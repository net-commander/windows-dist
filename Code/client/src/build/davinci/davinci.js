//>>built
require({cache:{"davinci/main":function(){define("dojo/_base/kernel dojo/_base/declare davinci/davinci davinci/ve/metadata davinci/Runtime davinci/Workbench davinci/ve/metadata davinci/ui/widgets/OutlineTree".split(" "),function(q){return q.davinci})},"davinci/ve/metadata":function(){define("require dojo/Deferred dojo/promise/all dojo/_base/lang dojo/_base/connect ../library ../model/Path ../repositoryinfo xide/types xide/utils".split(" "),function(q,n,h,g,e,m,c,k,f,d){function b(a,p){a=a||{};for(var d=
1,f=arguments.length;d<f;d++){var c=arguments[d],r,k;for(r in c)c.hasOwnProperty(r)&&(k=c[r],r in a&&("object"===typeof k||a[r]===k)?b(a[r],k):a[r]=k)}return a}function a(a,f,r){E[a.name]=a;f=new c(f);var e=a.overlays,v;for(v in e)e.hasOwnProperty(v)&&("oam"!==v&&"maqetta"!==v||b(a,e[v]));delete a.overlays;a.__metadataModuleId="maq-metadata-"+a.name;v=new c(location.href);v.path=v.path.substring(0,v.path.lastIndexOf("/"));v.path=d.removeURLParameter(v.path,"theme");v.path=""+r;e=[{name:a.__metadataModuleId,
location:r+f}];e[0].location=e[0].location.replace("index.php","");e[0].location=e[0].location.replace("?debug\x3dtrue","");e[0].location=e[0].location.replace("\x26isDesktop\x3dtrue","");e[0].location=e[0].location.replace("maqetta.html","");e[0].location=e[0].location.replace("maqettar.html","");e[0].location=e[0].location.replace("index.html","");e[0].location=e[0].location.replace("xui.php","");e[0].location=e[0].location.replace("xui.php?debug\x3dtrue","");"dojo"!==a.name&&"xide"!==a.name&&"xblox"!==
a.name&&(a.__libraryModuleId=a.name,v={name:a.__libraryModuleId,location:v.append("app/static/lib/"+a.name+"/"+a.version).toString()},"xide"!==a.__libraryModuleId&&e.push(v));var m;if(g.exists("scripts.widget_metadata",a))if("string"===typeof a.scripts.widget_metadata){var B=f.append(a.scripts.widget_metadata);m=dojo.xhrGet({url:r+B.toString()+(0<k.revision.length?"?"+k.revision:""),handleAs:"json"}).then(function(b){if(b){var d=B.getParentPath();return p(a.name,b,d,d,r)}})}else m=p(a.name,a.scripts.widget_metadata,
f,r);if(g.exists("scripts.callbacks",a)){var h=new n;q([a.scripts.callbacks],function(b){a.$callbacks=b;h.resolve()});O.push(h)}return m}function p(a,b,p,d){function f(a,b,p){"undefined"==typeof a.$providedTags[b]&&(a.$providedTags[b]=[]);a.$providedTags[b].push(p)}a||console.error("parseLibraryDescriptor: missing 'libName' arg");var c=E[a];b.$descriptorFolderPath=p.toString();b.$moduleFolderPath=d.toString();if(c)if(c.$widgets){b.widgets.forEach(function(a){c.$wm.widgets.push(a)});for(var k in b.categories)c.$wm.categories.hasOwnProperty(k)||
(c.$wm.categories[k]=b.categories[k])}else if(c.$wm)for(d=0;d<b.widgets.length;d++){k=!1;for(var e=0;!k&&e<c.$wm.widgets.length;e++)c.$wm.widgets[e].type==b.widgets[d].type&&(k=!0);k||c.$wm.widgets.push(b.widgets[d])}else c.$wm||(c.$wm=b);else E[a]={$wm:b,name:b.name,version:b.version},b.__metadataModuleId&&(E[a].__metadataModuleId=b.__metadataModuleId),c=E[a];var v=c.$wm;v.$providedTypes=v.$providedTypes||{};v.$providedTags=v.$providedTags||{};v.widgets.forEach(function(a){v.$providedTypes[a.type]=
a;if("string"==typeof a.tags)f(v,a.tags,a);else if(a.tags&&a.tags.length)for(var b=0;b<a.tags.length;b++)f(v,a.tags[b],a);a.icon&&!a.iconLocal&&(a.icon=p.append(a.icon).toString());a.iconLarge&&!a.iconLargeLocal&&(a.iconLarge=p.append(a.iconLarge).toString());a.widgetClass=v.categories[a.category].widgetClass});dojo.mixin(v,{_maqGetString:w});if(v.extend)for(var m in v.extend)v.extend.hasOwnProperty(m)&&(E[m]&&E[m].$wm?r(E[m].$wm,[v.extend[m]]):(b=K[m]||[],b.push(v.extend[m]),K[m]=b));K[a]&&r(v,K[a]);
return c}function r(a,b){var p=a.$providedTypes;b.forEach(function(a){for(var b in a)if(a.hasOwnProperty(b)){var d=a[b],f=p[b];d.mixin&&g.mixin(f,d.mixin);if(d.concat)for(var c in d.concat)if(d.concat.hasOwnProperty(c)){var r=d.concat[c];if(f[c]){var k=f,e=c;var v=f[c];"string"===typeof v?r=v+","+r:v instanceof Array?r=v.concat(r):(console.error('Unhandled type for "concat()"'),r=void 0);k[e]=r}else f[c]=r}}})}function v(a){if(a)for(var b in E)if(E.hasOwnProperty(b)){var p=E[b];if(p.$wm&&p.$wm.$providedTypes[a])return p}return null}
function w(a){J||(J=!0);return null}function x(a){if(a){if(D.hasOwnProperty(a))return D[a];var p=v(a),d;p&&(d=p.$wm.$descriptorFolderPath);if(!d)return null;var p=p.$wm,c=null,r=F.getResourceManager().getVariable(f.RESOURCE_VARIABLES.APP_URL);p.localPath?(d=a.replace(/\./g,"/").split("/"),d.shift(),d=d.join("/"),d=[p.$moduleFolderPath,"/",d,"_oam.json"].join(""),r=system.resource.findResource(d).getContentSync(),c=dojo.fromJson(r)):(d=[d,"/",a.replace(/\./g,"/"),"_oam.json"].join(""),d=r+"/lib/xideve/metadata/"+
d,dojo.xhrGet({url:d,handleAs:"json",sync:!0}).then(function(a){c=a}));if(!c)return console.error("ERROR: Could not load metadata for type: "+a),null;c.$ownproperty=dojo.mixin({},c.property);c.property=dojo.mixin({},L,c.property);c.$src=d;D[a]=c;b(c,p.$providedTypes[a].metadata);return c}}function B(a,b){if(!b)return a;dojo.every(b.split("."),function(b){if(void 0===a[b])return a=void 0,!1;a=a[b];return!0});return a}function z(a,b){(b=A.queryDescriptor(b,"allowed"+a))||(b="Parent"===a?"ANY":"NONE");
return b.split(/\s*,\s*/)}function u(a,b){b=A.queryDescriptor(a,b);if(!b)return null;a=v(a);return y(a,b)}function y(a,b){return a&&b?"string"===typeof b&&"./"===b.substr(0,2)?(new c(a.__metadataModuleId)).append(b).toString():b:null}var A,C,F,E={},D={},H={},O=[],K={},L={id:{datatype:"string",hidden:!0},lang:{datatype:"string",hidden:!0},dir:{datatype:"string",hidden:!0},"class":{datatype:"string",hidden:!0},style:{datatype:"string",hidden:!0},title:{datatype:"string",hidden:!0}};dojo.subscribe("/davinci/ui/libraryChanged/start",
function(){E={};D={};H={};A.init().then(function(){dojo.publish("/davinci/ui/libraryChanged")})});var J=!1;A={prefix:"",init:function(b,p){F=b;var d=[];C=q("../Workbench");b=F.getResourceManager().getVariable(f.RESOURCE_VARIABLES.APP_URL);p=p.replace(b,"");p=q.toUrl("xideve/metadata/");m.getUserLibs(C.getProject()).forEach(function(b){var f=b.metaRoot;(f=f.replace("app/metadata/",""))&&d.push(dojo.xhrGet({url:p+f+"/package.json?"+k.revision,handleAs:"json"}).then(function(b){return a(b,f,p)}))});
return h(d)},parseMetaData:function(a,b,d,f){return p(a,b,d,f)},getLibrary:function(a){return a?E[a]:E},getLibraryActions:function(a,b){var p=[],d;for(d in E)if(E.hasOwnProperty(d)){var f=E[d];if(f.$wm){var c=f.$wm["davinci.actionSets"];c&&dojo.forEach(c,function(d){d.id!=a||b&&d.targetID!==b||(d=dojo.clone(d.actions),dojo.forEach(d,function(a){if(a.action){var b=y(f,a.action);a.action=b}a.menu&&a.menu.forEach(function(a){if(a.action){var b=y(f,a.action);a.action=b}});p.push(a)}))})}}return p},loadThemeMeta:function(a){for(var b=
a.find({elementType:"HTMLElement",tag:"style"}),d=[],p,f=0;f<b.length;f++)for(var r=0;r<b[f].children.length;r++)"CSSImport"==b[f].children[r].elementType&&d.push(b[f].children[r]);new c(a.fileName);f=m.getThemes(C.getProject());b={};for(r=0;r<f.length;r++)if(f[r].files)for(var k=0;k<f[r].files.length;k++)b[f[r].files[k]]=f[r];for(r=0;r<d.length;r++){var f=d[r].url,e;for(e in b)if(-1<e.indexOf("claro")&&(p=e),-1<f.indexOf(e))return{themeUrl:f,themeMetaCache:m.getThemeMetadata(b[e]),theme:b[e]}}if(r=
A._loadThemeMetaDojoxMobile(a,b))return r;if(p){for(var v,r=0;r<d.length;r++)if((e=d[r].url.match(/\/([^\/]*)\.css$/))&&2==e.length&&(e=e[1],d[r].url.match(new RegExp("themes/"+e+"/"+e+".css$")))){v=e;break}if(v)return e=a.getDocumentElement(),a=e.getChildElement("head"),e=e.getChildElement("body"),(f=e.getAttribute("class"))&&e.setAttribute("class",f.replace(new RegExp("\\b"+v+"\\b","g"),"claro")),a=a.getChildElements("style"),dojo.forEach(a,function(a){dojo.forEach(a.children,function(a){"CSSImport"==
a.elementType&&(a.url=a.url.replace(new RegExp("/"+v,"g"),"/claro"))})}),f=d[r].url.replace(new RegExp("/"+v,"g"),"/claro"),d={themeUrl:f,themeMetaCache:m.getThemeMetadata(b[p]),theme:b[p]},d.themeMetaCache.usingSubstituteTheme={oldThemeName:v,newThemeName:"claro"},d}},_loadThemeMetaDojoxMobile:function(a,b){a=a.find({elementType:"HTMLElement",tag:"script"});for(var d=0;d<a.length;d++){var p=a[d].getElementText();if(p.length){var f=p.indexOf("dojoxMobile.themeMap");if(0<f){var f=p.indexOf("\x3d",
f),c=p.indexOf(";",f);if(c>f){var p=dojo.fromJson(p.substring(f+1,c))[0][2][0],r;for(r in b)if(-1<p.indexOf(r))return{themeUrl:p,themeMetaCache:m.getThemeMetadata(b[r]),theme:b[r]}}}}}},getLibraryForType:function(a){return v(a)},getLibraryMetadataForType:function(a){return(a=v(a))?a.$wm:null},getWidgetDescriptorForType:function(a){var b=v(a);a=b?b.$wm.$providedTypes[a]:void 0;return a},getOamDescriptivePropertyForType:function(a,b){return(a=x(a))&&a[b]?(b=a[b],"string"==typeof b?{type:"text/plain",
value:b}:"string"==typeof b.value?{type:b.type?b.type:"text/plain",value:b.value}:null):null},getWidgetsWithTag:function(a){var b=[];if(a)for(var d in E)if(E.hasOwnProperty(d)){var p=E[d];p.$wm&&p.$wm.$providedTags[a]&&(b=b.concat(p.$wm.$providedTags[a]))}return b},getLibraryBase:function(a){if(a=v(a))return a.$wm.$descriptorFolderPath},invokeCallback:function(a,b,d){var p=a;"string"===typeof a&&(p=v(type));if(p&&p.$callbacks&&(a=p.$callbacks[b]))return a.apply(p.$callbacks,d)},query:function(a,b){if(a){var p,
d;a.declaredClass?(a.metadata&&(d=a.metadata),p=a.type):p=a;if(!d){d=x(p);if(!d)return;a.declaredClass&&(a.metadata=d)}return B(d,b)}},queryDescriptorByName:function(a,b,d){b=v(b);var p;if(b){b=b.$wm.widgets;for(var f=0;f<b.length;f++)if(b[f].name==a){p=b[f];break}}return this._queryDescriptor(p,d)},queryDescriptor:function(a,b){var p=v(a),d;p&&(d=p.$wm.$providedTypes[a]);return this._queryDescriptor(d,b)},_queryDescriptor:function(a,b){if(a&&"object"===typeof a)return a=B(a,b),"resizable"===b&&(a||
(a="both")),a},getAllowedParent:function(a){return z("Parent",a)},getAllowedChild:function(a){return z("Child",a)},getCanSelect:function(a){return(a=A.queryDescriptor(a,"canSelect"))?a.split(/\s*,\s*/):[]},getHelper:function(a,b){var p=new n,d=a+":"+b;if(d in H)return p.resolve(H[d]),p;(a=u(a,b))?q([a],function(a){p.resolve(a);H[d]=a}):p.resolve();return p},getSmartInput:function(a){var b=new n;if(a in I)b.resolve(I[a]);else{var p=u(a,"inlineEdit");p?"string"===typeof p?q([p],function(p){b.resolve(I[a]=
new p)}):"[object Array]"===Object.prototype.toString.call(p.property)?q(["davinci/ve/input/MultiFieldSmartInput"],function(d){d=new d;g.mixin(d,p);b.resolve(I[a]=d)}):q(["davinci/ve/input/SmartInput"],function(d){d=new d;g.mixin(d,p);b.resolve(I[a]=d)}):b.resolve(null)}return b},getDeferreds:function(){return O}};var I={};e.subscribe("/davinci/ui/libraryChanged/start",function(){I={}});return dojo.setObject("davinci.ve.metadata",A)})},"davinci/library":function(){define("dojo/_base/xhr dojo/Deferred ./Runtime ./model/Path ./ve/themeEditor/metadata/query ./workbench/Preferences dojo/_base/kernel".split(" "),
function(q,n,h,g,e,m,c){var k=[{userLibs:[{id:"dojo",version:"1.8",metaRoot:"app/metadata/dojo/1.8",required:!1,hasSource:!0,root:""},{id:"DojoThemes",version:"1.8",metaRoot:"",required:!1,hasSource:!1,root:"themes"},{id:"gridx",version:"1.0.0",metaRoot:"app/metadata/gridx/1.0.0",required:!1,hasSource:!0,root:"lib/dojo/gridx"},{id:"html",version:"0.8",metaRoot:"app/metadata/html/0.8",required:!0,hasSource:!1},{id:"requirejs",version:"0.8",metaRoot:"app/metadata/requirejs/",required:!0,hasSource:!1},
{id:"delite",version:"0.8",metaRoot:"app/metadata/delite/0.8",required:!1,hasSource:!0},{id:"deliteful",version:"0.8",metaRoot:"app/metadata/deliteful/0.8",required:!1,hasSource:!0},{id:"clipart",version:"1.0",metaRoot:"app/metadata/clipart/1.0",required:!1,hasSource:!1,root:"lib/clipart"},{id:"xblox",version:"1.0",metaRoot:"app/metadata/xblox/1.0",required:!1,hasSource:!1,root:"lib/xblox"},{id:"maqettaSamples",version:"1.0",metaRoot:"app/metadata/maqetta/core/0.3",required:!1,hasSource:!1,root:"samples"},
{id:"maqetta",version:"0.3",metaRoot:"app/metadata/maqetta/core/0.3",required:!1,hasSource:!1,root:"lib/maqetta"},{id:"shapes",version:"1.0",metaRoot:"app/metadata/shapes/1.0",required:!1,hasSource:!1,root:"lib/shapes"}]}],f=[{specVersion:"1.0",files:["blackberry.css"],useBodyFontBackgroundClass:"useBodyFontBg",helper:"maq-metadata-dojo/dojox/mobile/ThemeHelper",themeEditorHtmls:["../custom/dojo-theme-editor.html"],name:"blackberry",path:["project1/themes/blackberry/blackberry.theme"],base:"",className:"blackberry",
type:"dojox.mobile",meta:["../custom/custom.json"],version:"1.8"},{specVersion:"1.0",files:["claro.css"],helper:"maq-metadata-dojo/dijit/ThemeHelper",themeEditorHtmls:["dojo-theme-editor.html"],name:"claro",path:["project1/themes/claro/claro.theme"],conditionalFiles:["document.css"],className:"claro",meta:["claro.json"],version:"1.8"},{specVersion:"1.0",files:["ipad.css"],useBodyFontBackgroundClass:"useBodyFontBg",helper:"maq-metadata-dojo/dojox/mobile/ThemeHelper",themeEditorHtmls:["dojo-theme-editor.html"],
name:"ipad",path:["project1/themes/ipad/ipad.theme"],base:"",className:"ipad",type:"dojox.mobile",meta:["ipad.json"],version:"1.8"},{specVersion:"1.0",files:["android.css"],useBodyFontBackgroundClass:"useBodyFontBg",helper:"maq-metadata-dojo/dojox/mobile/ThemeHelper",themeEditorHtmls:["../custom/dojo-theme-editor.html"],name:"android",path:["project1/themes/android/android.theme"],base:"",className:"android",type:"dojox.mobile",meta:["../custom/custom.json"],version:"1.8"},{specVersion:"1.0",files:["custom.css"],
useBodyFontBackgroundClass:"useBodyFontBg",helper:"maq-metadata-dojo/dojox/mobile/ThemeHelper",themeEditorHtmls:["dojo-theme-editor.html"],name:"custom",path:["project1/themes/custom/custom.theme"],base:"",className:"custom",type:"dojox.mobile",meta:["custom.json"],version:"1.8"},{specVersion:"1.0",files:["iphone.css"],useBodyFontBackgroundClass:"useBodyFontBg",helper:"maq-metadata-dojo/dojox/mobile/ThemeHelper",themeEditorHtmls:["../custom/dojo-theme-editor.html"],name:"iphone",path:["project1/themes/iphone/iphone.theme"],
base:"",className:"iphone",type:"dojox.mobile",meta:["../custom/custom.json"],version:"1.8"},{specVersion:"1.0",files:["sketch.css"],themeEditorHtmls:["../claro/dojo-theme-editor.html"],name:"Sketch",path:["project1/themes/sketch/sketch.theme"],className:"claro",meta:["../claro/claro.json"],version:"1.8"}],d={_customWidgets:{}},b={},a={},p={},r={};c.subscribe("/davinci/ui/libraryChanged/start",this,function(){r={};p={}});c.subscribe("/davinci/resource/resourceChanged",this,function(a,p){var d=require("davinci/Workbench").getProject();
if("deleted"==a||"renamed"==a){var f=m.getPreferences("davinci.ui.ProjectPrefs",d),f=(new g(d)).append(f.themeFolder);(new g(p.getPath())).startsWith(f)&&delete b[d]}"File"==p.elementType&&"theme"==p.extension&&"modified"==a&&p.getContent().then(function(a){a=JSON.parse(a);a.path=[p.getPath()];a.getFile=function(){return system.resource.findResource(this.path[0])}.bind(a);for(var f=0;f<b[d].length;f++)if(b[d][f].name==a.name){b[d][f]=a;return}b[d].push(a)}.bind(this))});return d={themesChanged:function(a){b[a]=
a?null:[]},getThemes:function(a,d,p){function c(){var p=[];b[a]&&(p=d?b[a].filter(function(a){return!a.getFile().isVirtual()}):b[a]);return p}p&&delete b[a];if(b[a])return c();p=m.getPreferences("davinci.ui.ProjectPrefs",a);p.themeFolder="themes";(new g(a)).append(p.themeFolder);f.forEach(function(a){a.getFile=function(){return system.resource.findResource(this.path[0])}.bind(a)}.bind(this));b[a]=f;return c()},getThemeMetadata:function(b){return a[b.name]?a[b.name]:null},addCustomWidgets:function(a,
b,p,f){var r=m.getPreferences("davinci.ui.ProjectPrefs",a);r.widgetFolder||(r.widgetFolder="./lib/custom",m.savePreferences("davinci.ui.ProjectPrefs",a,r));b=b.getParentFolder().getPath();b=new g(b);p=require("davinci/ve/metadata").parseMetaData(f.name,f,b,p);d._customWidgets[a].hasOwnProperty("name")||(d._customWidgets[a].name="custom",d._customWidgets[a].metaPath=r.widgetFolder,d._customWidgets[a].localPath=!0);d._customWidgets[a]=p;c.publish("/davinci/ui/addedCustomWidget",[p]);return p},getCustomWidgets:function(a){if(!d._customWidgets||
!d._customWidgets[a]){d._customWidgets||(d._customWidgets={});d._customWidgets[a]||(d._customWidgets[a]=[]);var b=m.getPreferences("davinci.ui.ProjectPrefs",a);b.widgetFolder||(b.widgetFolder="./lib/custom",m.savePreferences("davinci.ui.ProjectPrefs",a,b));for(var p=(new g(a)).append(b.widgetFolder).getSegments(),b=system.resource.findResource(p[0]),f=1;f<p.length;f++)var k=b.getChild(p[f]),b=k?k:b.createResource(p[f],!0);var e;b.getChildren(function(a){e=a},!0);this._customWidgetPackages=[];null==
e&&(e=[]);p={};for(f=0;f<e.length;f++)if(k=e[f],"Folder"==k.elementType){p[k.name]=k.getPath();var v="maq-lib-custom-"+k.name,h=k.getURL();require({packages:[{name:v,location:h}]});this._customWidgetPackages.push({name:k.name,location:h})}k=system.resource.findResource("*_widgets.json",!1,b);this._customWidgetDescriptors={};for(f=0;f<k.length;f++){var n=k[f],F=n.getParentFolder(),h=b.getURL(),v=F.getURL(),E=v.substr(h.length+1),h=null;try{h=c.fromJson(n.getContentSync())}catch(D){}if(h&&h.customWidgetSpec&&
(E=E.split("/").shift(),h.__metadataModuleId="maq-lib-custom-"+E,d.addCustomWidgets(a,n,p[E],h),r[a]||(r[a]={}),r[a][F.name]||(r[a][F.name]={}),r[a][F.name][h.version]=v,h&&h.widgets))for(n=0;n<h.widgets.length;n++)(F=h.widgets[n].type)&&(this._customWidgetDescriptors[F]={name:E,location:v,descriptor:h})}}return{custom:d._customWidgets[a]}},getCustomWidgetPackages:function(){return this._customWidgetPackages||[]},getCustomWidgetDescriptors:function(){return this._customWidgetDescriptors?this._customWidgetDescriptors:
{}},getInstalledLibs:function(){d._serverLibs||(d._serverLibs=h.serverJSONRequest({url:"cmd/listLibs",handleAs:"json",content:{},sync:!0})[0].userLibs);return d._serverLibs},getUserLibs:function(a){if(p.base)return p.base;p.base=k[0].userLibs;return p.base},getLibRoot:function(a,b,p){var d=new n,f=r;if(f[p]&&f[p][a]&&void 0!==f[p][a][b])return d.resolve(f[p][a][b]||"");f[p]||(f[p]={});f[p][a]||(f[p][a]={});f[a]||(f[a]={});var c=null;switch(a){case "xblox":c="lib/xblox";break;case "dojo":c="lib/dojo";
break;case "maqetta":c="lib/maqetta";break;case "delite":c="lib/ibm-js/delite";break;case "deliteful":c="lib/ibm-js/deliteful";break;case "requirejs":c="lib/ibm-js/requirejs"}f[p][a][b]=c;return d.resolve(c||"")},modifyLib:function(a){return h.serverJSONRequest({url:"cmd/modifyLib",handleAs:"text",content:{libChanges:JSON.stringify(a)},sync:!0})},addLib:function(a,b){return h.serverJSONRequest({url:"cmd/getLibRoots",handleAs:"json",content:{libId:a,version:b},sync:!0})[0].libRoot.root},getLibraryId:function(a,
b){return{sketch:"sketch",claro:"claro"}[a]+(b||"")},getLibraryName:function(a){var b,p;for(p in a)b=p;return b}}})},"davinci/Runtime":function(){define("davinci/lang/webContent ./commands/CommandStack ./ui.plugin ./html/html.plugin ./js/js.plugin ./ve/ve.plugin".split(" "),function(q,n,h,g,e,m){var c=[h,g,m],k={plugins:[],extensionPoints:[],subscriptions:[],currentSelection:[],commandStack:new n,getUser:function(){return this._initializationInfo.userInfo},getWorkbenchState:function(){return this._initializationInfo?
this._initializationInfo.workbenchState:{activeEditor:null,editors:[],nhfo:{project1:{device:"iphone",layout:"flow",themeSet:{name:"(none)",desktopTheme:"claro",mobileTheme:[{theme:"android",device:"Android"},{theme:"blackberry",device:"BlackBerry"},{theme:"ipad",device:"iPad"},{theme:"iphone",device:"iPhone"},{theme:"iphone",device:"other"}]}}},project:"project1",id:"",Fields:[]}},getSiteConfigData:function(f){return"widgetPalette"==f?{_COMMENT1_:"Defines site-specific organization for widget palette",
name:"widgetPalette_dojo_default",_COMMENT2_:"One entry for each section (\x3d\x3dfolder) in widget palette",_COMMENT3_:"includes provides ordered list of widgets to appear in each section",_COMMENT4_:"each entry in array causes a new item to appear in that section",_COMMENT5_:"each entry in array can be either a string or an array",_COMMENT6_:"if a string, can be either a string that begins with type:, which is a particular widget type",_COMMENT7_:"otherwise the string holds a tag, which causes all widgets that match tag to share that item",
_COMMENT8_:"if an array, then it holds a list of strings, each of which can start with type: (widget type) or a tag",defs:{$XBLOXSection:{id:"xblox",name:"xblox",iconBase64:"data:image/gif;base64,R0lGODlhEAAQAKIAAFhYWtXV1v///0BAQP///wAAAAAAAAAAACH5BAEAAAQALAAAAAAQABAAAAMuSLo0w5CNIF6EM9grN2+Z82WCEGjcVJbopa5tlJ2nh4W2XH9LyCu+X/AHAPyOCQA7",subsections:["$XBLOXSection_Controls"]},$XBLOXSection_Controls:{id:"Controls",name:"Controls",iconBase64:"data:image/gif;base64,R0lGODlhEAAQALMAAN7e4oyMjtXV1sDAwf///+Dg4MvLyzMzM////wAAAAAAAAAAAAAAAAAAAAAAAAAAACH5BAEAAAgALAAAAAAQABAAAAQ3EMlJq704a3RO2NIhBIexHYRgeFTndkQ8HmER33g60EcB/ECcYBd6wWSkDErFUs5Mms4HRK1SIwA7",
includes:["RunScript","CSSState","StyleState","Script"]},$ClipartSection_Arrows:{id:"Arrows",name:"Arrows",iconBase64:"data:image/gif;base64,R0lGODlhEAAQALMAAN7e4oyMjtXV1sDAwf///+Dg4MvLyzMzM////wAAAAAAAAAAAAAAAAAAAAAAAAAAACH5BAEAAAgALAAAAAAQABAAAAQ3EMlJq704a3RO2NIhBIexHYRgeFTndkQ8HmER33g60EcB/ECcYBd6wWSkDErFUs5Mms4HRK1SIwA7",includes:["ArrowDown","ArrowLeft","ArrowRight","ArrowUp"]},$ClipartSection_Community:{id:"Community",name:"Community",iconBase64:"data:image/gif;base64,R0lGODlhEAAQAMQAANXV1v///9HR0cXFxbm5uaKiooyMjHR0dGlpaVJSUkZGRkREREJCQkFBQT09PTo6OjMzM////wAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAACH5BAEAABEALAAAAAAQABAAAAVdIJEoZGmSiTgAbOuywwgEdAAY5WyTul0gAYFCB+DRWJCAqFArDo+QRcDRgBCNu1rgueMWG4FHw4u1Maa9bg8AdqSd6/a7zEZr4U35vRw4KA5aOwkrL4UxIieJCikhADs\x3d",
includes:["Facebook","Rss","Twitter"]},$ClipartSection_Devices:{id:"Devices",name:"Devices",iconBase64:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAMAAAAoLQ9TAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAA2hpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuMC1jMDYxIDY0LjE0MDk0OSwgMjAxMC8xMi8wNy0xMDo1NzowMSAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wTU09Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9tbS8iIHhtbG5zOnN0UmVmPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvc1R5cGUvUmVzb3VyY2VSZWYjIiB4bWxuczp4bXA9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC8iIHhtcE1NOk9yaWdpbmFsRG9jdW1lbnRJRD0ieG1wLmRpZDowMTgwMTE3NDA3MjA2ODExOTJCMEJDQTgxOTc0RDYxMiIgeG1wTU06RG9jdW1lbnRJRD0ieG1wLmRpZDo4NTQ0QUU2NjhCMzMxMUUyOTQ3N0ExRTg0NEJENzk4RiIgeG1wTU06SW5zdGFuY2VJRD0ieG1wLmlpZDo4NTQ0QUU2NThCMzMxMUUyOTQ3N0ExRTg0NEJENzk4RiIgeG1wOkNyZWF0b3JUb29sPSJBZG9iZSBQaG90b3Nob3AgQ1M1LjEgTWFjaW50b3NoIj4gPHhtcE1NOkRlcml2ZWRGcm9tIHN0UmVmOmluc3RhbmNlSUQ9InhtcC5paWQ6MDM4MDExNzQwNzIwNjgxMTkyQjBCQ0E4MTk3NEQ2MTIiIHN0UmVmOmRvY3VtZW50SUQ9InhtcC5kaWQ6MDE4MDExNzQwNzIwNjgxMTkyQjBCQ0E4MTk3NEQ2MTIiLz4gPC9yZGY6RGVzY3JpcHRpb24+IDwvcmRmOlJERj4gPC94OnhtcG1ldGE+IDw/eHBhY2tldCBlbmQ9InIiPz7l5plaAAAAIVBMVEX///8zMzP3+PnV1dZ+fn7ExMZ9fX4sKis1NTVZWVmgoKKPJ3BhAAAARElEQVR42mJgIAIwM8IBM1iAkRkO2KECTFBAiQCaoZjWsrKxcgIxEHKA+BysbGysQIKLi5OVEyjCiAYYWNAAYa8CBBgA3BQB3Pw68r4AAAAASUVORK5CYII\x3d",
includes:["Cellphone","Computer","Laptop","Server","Tablet"]},$ClipartSection_DeviceSilhouettes:{id:"DeviceSilhouettes",name:"Device Silhouettes",iconBase64:"data:image/gif;base64,R0lGODlhEAAQAKIAAGZmaNXV1v///0BAQP///wAAAAAAAAAAACH5BAEAAAQALAAAAAAQABAAAAM6SErT3iu+EF5UL4/LqPfbNQRCaVbcaJ6hRK4CKr6r7MJxu6iwvX8fHUbjSDUAFEBR5AAol0wNZzpNAAA7",includes:"Android_340x480 Android_480x800 AndroidTablet Blackberry iPad iPhone".split(" ")},$ClipartSection_Media:{id:"Media",name:"Media",iconBase64:"data:image/gif;base64,R0lGODlhEAAQALMAANXV1v////z8/Pr6+vn5+fj4+Ojo6MrKyre3t6urq4iIiHV1dUdHR0BAQDMzM////yH5BAEAAA8ALAAAAAAQABAAAARZ8MlJq6Ut36c5+E3VOGAGBEAWeif6DULghk0rB8jCLAhK2zjFoXBQIFKeW2BxSDQShwWypmQUGoZGgTEFMp1Q6U+JEBKN3RsBp+P5WJ+4HCRR2e+rjX5PiQAAOw\x3d\x3d",
includes:"Camera Chat GraphBar GraphLine GraphPie Image Map Microphone PlayControl Record StreetMap Table VideoCamera VideoPlayer".split(" ")},$ClipartSection_UserInterfaceControls:{id:"UserInterfaceControls",name:"User Interface Controls",iconBase64:"data:image/gif;base64,R0lGODlhEAAQALMAAFhYWtXV1qurrKGhooKCg/////X19TMzM////wAAAAAAAAAAAAAAAAAAAAAAAAAAACH5BAEAAAgALAAAAAAQABAAAARSEElwqrUyHxG678KRIVthDoNZhGNZBFVgsppQGId5GKtYF5dKr8X5eGiSoNKXJAie0CeBSbKprsgqMDj84XS8rAt2kHWT1gJKJS4aA1nSspKJAAA7",includes:"File Folder FormattingToolbox HScrollBar HSplit ProgressBar SpinInput VScrollBar VSplit WaitingPending".split(" ")},
$ClipartSection_UserInterfaceIcons:{id:"UserInterfaceIcons",name:"User Interface Icons",iconBase64:"data:image/gif;base64,R0lGODlhEAAQANUAANXT1vj4+eLi49/f4Nra29nZ2tbW19XV1tTU1dDQ0c3NzpCQkf////7+/vX19fLy8vDw8O/v7+zs7OTk5OPj49nZ2dHR0c/Pz87Ozs3NzczMzKWlpaOjo6KioqGhoZ6enp2dnZycnJubm5mZmY+Pj4aGhoWFhYGBgX5+fnR0dHNzc2lpaWZmZllZWVdXV1VVVVNTU1FRUU5OTk1NTUxMTEJCQkBAQDY2NjMzMzIyMi8vLyoqKiYmJiMjI////wAAACH5BAEAAD4ALAAAAAAQABAAAAa8QJ/Qd0HRdD0dDXUZDj8ykqJgKGBIso/zs9IIIoFGICLQrLREWUZSmeHetookI2ueFgIGC6fSqHAzDAILJz4yFhF6LA8MD28MEQkyPjkEAQyYjS04LAwBBDk+PAYNmQ+bLYwNBjw+OJaZGzipmA4EOD4xB4mYIzgjmREHMT4mIhSZyZgUIiZELwgSvb+YEggvTT4eKQgDEB01HRATCCkcThwuIAcEAAQHIS/nTj4WJTA3OzcwJRb0/wB9BAEAOw\x3d\x3d",
includes:"Close Copy Delete Edit Error Fatal Help Home Info Lock Mail Minus Next Paste Plus Previous Print Refresh Save Search ShoppingCart Trash Warning".split(" ")},$ClipartSection_Other:{id:"Other",name:"Other",iconBase64:"data:image/gif;base64,R0lGODlhEAAQAJEAAHx8fDMzM////wAAACH5BAEAAAIALAAAAAAQABAAAAImlI9pAYoQDGxuHpvwZY8rrH1MWAWes53oRHZUK4Rkq8Gxp4roXgAAOw\x3d\x3d",includes:["Browser","Person","ProfilePicture","X"]},$ClipartSection:{id:"Clipart",name:"Clip Art",iconBase64:"data:image/gif;base64,R0lGODlhEAAQAKIAAFhYWtXV1v///0BAQP///wAAAAAAAAAAACH5BAEAAAQALAAAAAAQABAAAAMuSLo0w5CNIF6EM9grN2+Z82WCEGjcVJbopa5tlJ2nh4W2XH9LyCu+X/AHAPyOCQA7",
subsections:"$ClipartSection_Arrows $ClipartSection_Community $ClipartSection_Devices $ClipartSection_DeviceSilhouettes $ClipartSection_Media $ClipartSection_UserInterfaceControls $ClipartSection_UserInterfaceIcons $ClipartSection_Other".split(" ")},$DrawingToolsSection:{id:"DrawingTools",name:"Drawing Tools",iconBase64:"data:image/gif;base64,R0lGODlhEAAQAKIAAL+/v5aWlmNjYzMzMxwcHBYWFv///wAAACH5BAEAAAYALAAAAAAQABAAAAMgaLrc/jBKFsBcg9g7iuaFZwlhaZrD1Ikqq35Xdc10PScAOw\x3d\x3d",includes:"Text Line Arrow Polyline PolylineArrow Circle Rectangle RoundedRectangle".split(" ")},
$ViewsSection:{id:"Views",name:"Views",_COMMENT1_:"Mobile-only view widgets, often representing a single screen of UI",iconBase64:"data:image/gif;base64,R0lGODlhEAAQANUAAC5KhTFOiPj6/jJRijRTjTRUjTdXkTdXkLrH3+Hp+OHp9zdakzZYkDdYkDlbkzlck97o+ODp+N/o9ztflj5km/L2/Pj6/T5mnD9mnT5lm0FqoENupENuo0Ruo0ZxpvL2+0l3rEl4rEh2qkl3q0l2qk6BtE1+sU+BtFCDtVCFt1CEtlSLvVOJulOHuVaOv7nW78/t+////////wAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAACH5BAEAADIALAAAAAAQABAAAAaAQJlwSCwKXcikcilzxZ5QaApGVclWMUAWMFhgYiRYACGStaJoDKzyuchQr7hc3jAwGAeZCR1lKRIRLDIjWVtdXyUSEhAnMh58UCCKECEyGnOYHRsbHBwyFJBPGVQwFDIThQBcXjEOYggOMg+hMQUwFgIEsg+8vb0BwMBGw8TFQkEAOw\x3d\x3d",
includes:["ScrollableView","SwapView","View"]},$HeadingSection:{id:"Heading, Section Labels",name:"Heading",_COMMENT1_:"Mobile-only Heading widgets, often titles at top of a screen",iconBase64:"data:image/gif;base64,R0lGODlhEAAQAMQAAEh1qkd2q0d2qkh2q0h2qkt7r0t8r0+BtU6CtFGGuVGHuVSLvFaNv1WLvKzM6a3M6a3M6LfS7DJlklaOv4y64Iy635zD5J3E5KzN6azM6IK13Iy734273////////wAAACH5BAEAAB4ALAAAAAAQABAAAAVQoCeOZGmeaKqqU+u+LdN6U2Tf+D15S5ZJwIzjgXFkIJmGJ2GRtCSbTWc6vSg8hw0HCN1UKFotwlPQmM/os8FDIADcgYGAIJgD3qu8fs/nhwAAOw\x3d\x3d",
includes:["Heading","ToolBarButton"]},$ContainersSection_Dojo:{id:"ContainersSection_Dojo",name:"Dojo",iconBase64:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAACXBIWXMAAAsTAAALEwEAmpwYAAAKT2lDQ1BQaG90b3Nob3AgSUNDIHByb2ZpbGUAAHjanVNnVFPpFj333vRCS4iAlEtvUhUIIFJCi4AUkSYqIQkQSoghodkVUcERRUUEG8igiAOOjoCMFVEsDIoK2AfkIaKOg6OIisr74Xuja9a89+bN/rXXPues852zzwfACAyWSDNRNYAMqUIeEeCDx8TG4eQuQIEKJHAAEAizZCFz/SMBAPh+PDwrIsAHvgABeNMLCADATZvAMByH/w/qQplcAYCEAcB0kThLCIAUAEB6jkKmAEBGAYCdmCZTAKAEAGDLY2LjAFAtAGAnf+bTAICd+Jl7AQBblCEVAaCRACATZYhEAGg7AKzPVopFAFgwABRmS8Q5ANgtADBJV2ZIALC3AMDOEAuyAAgMADBRiIUpAAR7AGDIIyN4AISZABRG8lc88SuuEOcqAAB4mbI8uSQ5RYFbCC1xB1dXLh4ozkkXKxQ2YQJhmkAuwnmZGTKBNA/g88wAAKCRFRHgg/P9eM4Ors7ONo62Dl8t6r8G/yJiYuP+5c+rcEAAAOF0ftH+LC+zGoA7BoBt/qIl7gRoXgugdfeLZrIPQLUAoOnaV/Nw+H48PEWhkLnZ2eXk5NhKxEJbYcpXff5nwl/AV/1s+X48/Pf14L7iJIEyXYFHBPjgwsz0TKUcz5IJhGLc5o9H/LcL//wd0yLESWK5WCoU41EScY5EmozzMqUiiUKSKcUl0v9k4t8s+wM+3zUAsGo+AXuRLahdYwP2SycQWHTA4vcAAPK7b8HUKAgDgGiD4c93/+8//UegJQCAZkmScQAAXkQkLlTKsz/HCAAARKCBKrBBG/TBGCzABhzBBdzBC/xgNoRCJMTCQhBCCmSAHHJgKayCQiiGzbAdKmAv1EAdNMBRaIaTcA4uwlW4Dj1wD/phCJ7BKLyBCQRByAgTYSHaiAFiilgjjggXmYX4IcFIBBKLJCDJiBRRIkuRNUgxUopUIFVIHfI9cgI5h1xGupE7yAAygvyGvEcxlIGyUT3UDLVDuag3GoRGogvQZHQxmo8WoJvQcrQaPYw2oefQq2gP2o8+Q8cwwOgYBzPEbDAuxsNCsTgsCZNjy7EirAyrxhqwVqwDu4n1Y8+xdwQSgUXACTYEd0IgYR5BSFhMWE7YSKggHCQ0EdoJNwkDhFHCJyKTqEu0JroR+cQYYjIxh1hILCPWEo8TLxB7iEPENyQSiUMyJ7mQAkmxpFTSEtJG0m5SI+ksqZs0SBojk8naZGuyBzmULCAryIXkneTD5DPkG+Qh8lsKnWJAcaT4U+IoUspqShnlEOU05QZlmDJBVaOaUt2ooVQRNY9aQq2htlKvUYeoEzR1mjnNgxZJS6WtopXTGmgXaPdpr+h0uhHdlR5Ol9BX0svpR+iX6AP0dwwNhhWDx4hnKBmbGAcYZxl3GK+YTKYZ04sZx1QwNzHrmOeZD5lvVVgqtip8FZHKCpVKlSaVGyovVKmqpqreqgtV81XLVI+pXlN9rkZVM1PjqQnUlqtVqp1Q61MbU2epO6iHqmeob1Q/pH5Z/YkGWcNMw09DpFGgsV/jvMYgC2MZs3gsIWsNq4Z1gTXEJrHN2Xx2KruY/R27iz2qqaE5QzNKM1ezUvOUZj8H45hx+Jx0TgnnKKeX836K3hTvKeIpG6Y0TLkxZVxrqpaXllirSKtRq0frvTau7aedpr1Fu1n7gQ5Bx0onXCdHZ4/OBZ3nU9lT3acKpxZNPTr1ri6qa6UbobtEd79up+6Ynr5egJ5Mb6feeb3n+hx9L/1U/W36p/VHDFgGswwkBtsMzhg8xTVxbzwdL8fb8VFDXcNAQ6VhlWGX4YSRudE8o9VGjUYPjGnGXOMk423GbcajJgYmISZLTepN7ppSTbmmKaY7TDtMx83MzaLN1pk1mz0x1zLnm+eb15vft2BaeFostqi2uGVJsuRaplnutrxuhVo5WaVYVVpds0atna0l1rutu6cRp7lOk06rntZnw7Dxtsm2qbcZsOXYBtuutm22fWFnYhdnt8Wuw+6TvZN9un2N/T0HDYfZDqsdWh1+c7RyFDpWOt6azpzuP33F9JbpL2dYzxDP2DPjthPLKcRpnVOb00dnF2e5c4PziIuJS4LLLpc+Lpsbxt3IveRKdPVxXeF60vWdm7Obwu2o26/uNu5p7ofcn8w0nymeWTNz0MPIQ+BR5dE/C5+VMGvfrH5PQ0+BZ7XnIy9jL5FXrdewt6V3qvdh7xc+9j5yn+M+4zw33jLeWV/MN8C3yLfLT8Nvnl+F30N/I/9k/3r/0QCngCUBZwOJgUGBWwL7+Hp8Ib+OPzrbZfay2e1BjKC5QRVBj4KtguXBrSFoyOyQrSH355jOkc5pDoVQfujW0Adh5mGLw34MJ4WHhVeGP45wiFga0TGXNXfR3ENz30T6RJZE3ptnMU85ry1KNSo+qi5qPNo3ujS6P8YuZlnM1VidWElsSxw5LiquNm5svt/87fOH4p3iC+N7F5gvyF1weaHOwvSFpxapLhIsOpZATIhOOJTwQRAqqBaMJfITdyWOCnnCHcJnIi/RNtGI2ENcKh5O8kgqTXqS7JG8NXkkxTOlLOW5hCepkLxMDUzdmzqeFpp2IG0yPTq9MYOSkZBxQqohTZO2Z+pn5mZ2y6xlhbL+xW6Lty8elQfJa7OQrAVZLQq2QqboVFoo1yoHsmdlV2a/zYnKOZarnivN7cyzytuQN5zvn//tEsIS4ZK2pYZLVy0dWOa9rGo5sjxxedsK4xUFK4ZWBqw8uIq2Km3VT6vtV5eufr0mek1rgV7ByoLBtQFr6wtVCuWFfevc1+1dT1gvWd+1YfqGnRs+FYmKrhTbF5cVf9go3HjlG4dvyr+Z3JS0qavEuWTPZtJm6ebeLZ5bDpaql+aXDm4N2dq0Dd9WtO319kXbL5fNKNu7g7ZDuaO/PLi8ZafJzs07P1SkVPRU+lQ27tLdtWHX+G7R7ht7vPY07NXbW7z3/T7JvttVAVVN1WbVZftJ+7P3P66Jqun4lvttXa1ObXHtxwPSA/0HIw6217nU1R3SPVRSj9Yr60cOxx++/p3vdy0NNg1VjZzG4iNwRHnk6fcJ3/ceDTradox7rOEH0x92HWcdL2pCmvKaRptTmvtbYlu6T8w+0dbq3nr8R9sfD5w0PFl5SvNUyWna6YLTk2fyz4ydlZ19fi753GDborZ752PO32oPb++6EHTh0kX/i+c7vDvOXPK4dPKy2+UTV7hXmq86X23qdOo8/pPTT8e7nLuarrlca7nuer21e2b36RueN87d9L158Rb/1tWeOT3dvfN6b/fF9/XfFt1+cif9zsu72Xcn7q28T7xf9EDtQdlD3YfVP1v+3Njv3H9qwHeg89HcR/cGhYPP/pH1jw9DBY+Zj8uGDYbrnjg+OTniP3L96fynQ89kzyaeF/6i/suuFxYvfvjV69fO0ZjRoZfyl5O/bXyl/erA6xmv28bCxh6+yXgzMV70VvvtwXfcdx3vo98PT+R8IH8o/2j5sfVT0Kf7kxmTk/8EA5jz/GMzLdsAAAAgY0hSTQAAeiUAAICDAAD5/wAAgOkAAHUwAADqYAAAOpgAABdvkl/FRgAAAg9JREFUeNp8ks1rE0EYxn9bE/xqikI0lITiQW+VImoONmCQtoonUbAglFDEUtlLxdo/wUNRD0Iw1kOIEmj6D9ir2FRQi4j0lILQJoimRfJB9mNmOx42iWsT+8Iw7DwPv32feUdTSuGtyeQKaT3GZHJlGEgA40AOyKT1WL6lt0rbC2hC9IFg7/a1c5HAib5Dc+WqOb/8pVjb3K4H03os6fVqXToYHgj2RiYun34KhD1S6c27jYeb2/ViWo/lW4c9dFYiPtgfMIQTNoRDw3YwbIeGcMLxwf5AM1a7fF0A436fL15pSNAUGqCUhqYp/P4Dc0AImNoPkNvaqX8MHDn4SkOBiwA0Kg1rHoh6zd0iZD4VyrWaKUpVQ1I1bSqGpGKI0udCuQZk/gu4+XhZpfXY2amRM88vnjq2vlMz7xn2biF41L8+FAl8f5a4cFw4u/mrj3KqK0BYNkDqzv3UyR6N32uFn9H334qhtY1fhyf0lzEgVd76oQDaEKVUe43NLirP97Rnn97rG5tdRCnldrCw9EFd0TNKNEwARmayCkg1tRdAavRBVo3OZAFwpMQR8m+E12+/YjcMzW4CpBsFF7AKgG1aCNM9l4bd9vjc7FZ73gDCtDpGIw27Oc5/9R6AuzeiSFsqRwjX7DH0hYK0fiKbHSSuDyEtq/MSu63zt56o/fRuL5HWxS4srTJ1+xL71Z8BAL+kU+9a36VRAAAAAElFTkSuQmCC",
includes:[["AccordionContainer","Accordion"],"BorderContainer","Container","ContentPane","FixedSplitter","Form","GridLayout","MenuBar","Pane","RoundRect","ScrollablePane","TabContainer","TitlePane","ToolBar"]},$ContainersSection_HTML:{id:"ContainersSection_HTML",name:"HTML",iconBase64:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyBpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuMC1jMDYwIDYxLjEzNDc3NywgMjAxMC8wMi8xMi0xNzozMjowMCAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENTNSBXaW5kb3dzIiB4bXBNTTpJbnN0YW5jZUlEPSJ4bXAuaWlkOjVFNUZFNTNBNTk0QjExRTBBNkY0ODEzNDdCMzkxNTdDIiB4bXBNTTpEb2N1bWVudElEPSJ4bXAuZGlkOjVFNUZFNTNCNTk0QjExRTBBNkY0ODEzNDdCMzkxNTdDIj4gPHhtcE1NOkRlcml2ZWRGcm9tIHN0UmVmOmluc3RhbmNlSUQ9InhtcC5paWQ6NUU1RkU1Mzg1OTRCMTFFMEE2RjQ4MTM0N0IzOTE1N0MiIHN0UmVmOmRvY3VtZW50SUQ9InhtcC5kaWQ6NUU1RkU1Mzk1OTRCMTFFMEE2RjQ4MTM0N0IzOTE1N0MiLz4gPC9yZGY6RGVzY3JpcHRpb24+IDwvcmRmOlJERj4gPC94OnhtcG1ldGE+IDw/eHBhY2tldCBlbmQ9InIiPz5wB++kAAABAklEQVR42qRToQ7CMBC9LYhK5Bz9AyaHYhIHEomcYxI5iRwOOYkcDgkKWxxyuElwnSq5hpJ2tAvJXnK5vuvd60u7eUII6IOBTo67SafafH31foroQEWZR8IFVibis2/M+G3BV9NYTydkCJSGPy59WzOKtMMlYghUTwLsXsMsLQA4yIwc10GUyaBxLvusAuGigM3+BHFIJceMnFW182K/ApfbQ6jhdBnjoTLrIljjLgF9WIcu0ulgm8zgzCrID2ejATnWcV+htt3BdDzydBHOzWEaBLLGucMB4lQkXycIffivTxmBzYdsJdcqd8GHnmg5ILDfLrXHIpaHIwbz+v7ObwEGADGQtFOesBZAAAAAAElFTkSuQmCC",
includes:["\x3ca\x3e","\x3cdiv\x3e","\x3cspan\x3e","\x3ctable\x3e","\x3cstyle\x3e"]},$ContainersSection:{id:"Containers",name:"Containers",_COMMENT1_:"Desktop and mobile containers",_COMMENT2_:"Note that default desktop preset only include desktop widgets",_COMMENT3_:"and mobile preset only include mobile widgets",iconBase64:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAARJJREFUeNqkUzFuhEAMNFHqHAUEiU9Q0PKS3BNo6O9aJMQDqHkM4iG05CJdGgpgfXhvvVqyECHdSNaO7PWMsRYHEaGua+z7Hgi+7wPzLZh14kACZVniPM8yTM4xTZMOqpv8nZSEENqB+e/9DmIRJ6A6Xddd3aW8FFhcrFE/TifdaEHllymeAkQYQRBAURS7OwjDEFh2U6DrOrheLrDjDXmea64FxnHU4w7DIJt/bt+AAtVenqf36cs6/DcBc2piAUSxriszMn6DF2FNcAR45BM8z9tc5N+7lkAURZBl2a57HMe2gHxIajFt20JVVasHY06Spimcv87AfS8v0eG/sWkamUiSBJhvwawTd3bf+0E8BBgAL2nsdz3dOk4AAAAASUVORK5CYII\x3d",
subsections:["$ContainersSection_Dojo","$ContainersSection_HTML"]},$ListsSection:{id:"Lists",name:"Lists",_COMMENT1_:"Mobile-only List widgets",iconBase64:"data:image/gif;base64,R0lGODlhEAAQAMQAADlck9jf6ra/zGiKukNvpERvo/P3/Ex7r0x9sUx8r1KHuVKHuFaOv3io0bnW78jg8////////wAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAACH5BAEAABEALAAAAAAQABAAAAVWYCSOZGmeptEwbNs2hmgwgWHfd8DETQD9wKAh0IgsDBBEcGlQRBLIpfTwdFiv2CsVKp1GCkhlF2IgRAaC8c8gGEQeAAFuLgA8RI8BYM/nD+4ogYKDgiEAOw\x3d\x3d",includes:"RoundRectCategory RoundRectList RoundRectDataList EdgeToEdgeCategory EdgeToEdgeList EdgeToEdgeDataList ListItem".split(" ")},
$ControlsSection_Buttons:{id:"Buttons",name:"Buttons",iconBase64:"data:image/gif;base64,R0lGODlhEAAQANUAAC5KhTFPijZXkDZYkDxhmTtimUJsouHr9/D1+0h2q0l3q7XQ7bbQ7bbQ7MLX79vo9k6AtE6Bs6TH6bbR7NLj9FKJu1OJulaNv5C95aTH6KTI6LXR7L/Z8Mje8laOv36z4X604JC95LnW77/a8Nzr9////wAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAACH5BAEAACUALAAAAAAQABAAAAZiwJJwSCwaj8hk0cP0XJpQj9ByqFqvVUSlFDk4vuCw4wApKR6MxmLCbm8mj0TJQNFI7nh8hmIoFTohGIKDgyEdBCUDHCAfHyCPkI0jAiUBIpeYmZckAUIAn6ChoEqkpaanRUEAOw\x3d\x3d",
includes:[["Button","\x3cbutton\x3e"],"ComboButton","DropDownButton","ToggleButton"]},$ControlsSection_CheckboxesRadios:{id:"CheckboxesRadios",name:"Checkboxes, RadioButtons, Switch",iconBase64:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAP9JREFUeNpi/P//P8PGnQf/M5AJWGAMf3d7kjUDLUYYAAITd94kWnO+uzqqC2DAQkGAgYEDwpbg4ICLv/jxA8IAUicefMD0Agw8+ABRCNL7geEHXBwkHG4uD2avuPAAtwEQS4Cqf3DAtX8A2p5urw6Xv3DjBZzNhMuPP6Da0TUHdu5ksNCQwG0ASEO8uToYv/iAqtmxcSODAjCMBAQ48BuAHtIwzQZAmzUkBIBhzIHfCyBnIgNkzQJIMYPVAJACkDNBmghpxhoLEkD/CXBIgBUXzjzI4GCgAHE2B4GkDE8HLxDpQACq8cWHH4TzAnqgkZyZQBmDHMAIys6UAIAAAwBz81X4fS5oMgAAAABJRU5ErkJggg\x3d\x3d",
includes:["CheckBox","RadioButton","Switch","TriStateCheckBox"]},$ControlsSection_IconContainer:{id:"IconContainer",name:"IconContainer",_COMMENT1_:"Mobile-only",iconBase64:"data:image/gif;base64,R0lGODlhEAAQAMQAACVLiiVLiDlck/P2+zxhlzpppj9mnDh3xUJtokdzp3ak21ON0FCDvEp6rU6As1SKvFaOv////wAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAACH5BAEAABEALAAAAAAQABAAAAVoYBRBZGmWIjSsbMtC0TMo9FzTyvBEzrD8PuBvMXBEGoODMrlUHgaNSMJFXSUiiAGgwNByvV1ExFClGiIEWw6nHhAigiBxKB8I4MynM2/Hl1t3cQFfg12FfXF/LHdwAo6PkI4ik5SVkyEAOw\x3d\x3d",
includes:["IconContainer","IconItem","IconMenu","IconMenuItem"]},$ControlsSection_Pickers:{id:"Pickers",name:"Pickers",iconBase64:"data:image/gif;base64,R0lGODlhEAAQANUAAKFMUiI5ZjxsuTlckz1jmj1jmVyL0T1kmUNvpERvpERuo0Rvo16W2jx7wEeO4Et7r0x7r26ayUt8r0x8rqrS+lGHuVKHuZXN/1aOv6u7yJypq+38++v6+aiysJ6uqWpNK5RcON6CV+esnbq2tf/X0t26tuxmXtaJhL+Zmf///wAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAACH5BAEAACkALAAAAAAQABAAAAZswJRwSCwSA8YhUrlMBpbPpjEqfCarUmlRezVivmBMKgweXyIMgUGMOafXKcvog2o4LKnKvH5PTUIgIh0UECkPgIIUEikLGQAnGxoJKQiOkBoKKQUcJSYkHgUpBJyeHgcpA6mqA6irqV2wsUJBADs\x3d",
includes:"Carousel CarouselItem DataCarousel DatePicker SpinWheel SpinWheelSlot SpinWheelDatePicker SpinWheelTimePicker TimePicker ValuePicker ValuePickerSlot ValuePickerDatePicker ValuePickerTimePicker".split(" ")},$ControlsSection_Select:{id:"Select",name:"Select",iconBase64:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAVJJREFUeNpi/P//PwMlgAVEhPcf+E+RAb++fWeoz3QlqLhxxh6G+gwXBH/6bgYmEOPHp69gAVGGvwxijH8ZhP/9AbNhWJwRgn9+/AxWl5TYy/D61hOgvi8QF3z/8Akswc/JjGLjfwZGMM0IZIHY3z5ADDi4ogQs+23+XgZGUCBaRE4EByUjRBeUATOEASoANe4/0DhGqOh/aBjIm+kzfn37/n+IkxZJAbhm3zWIAX9//WHg4OVlMDBQZhD6+5doA7aceQQx4M/PnwywePRN6IVEDzsrAysnJwMHDxcDGxCDaFZODoZJqfZwA/78+AWLxh9wf+9cWkK0C359/wEx4DeQAXOBe3QPXhfAwKwsJ3D6gSckmAGHV5cT7YLf36AuADkFBmxDO4lyweJCZ7DLIbEADIz/0DA4vaGSeBcA9YETkpF/JyLNMGBJTXgAI6XZGSDAAJsyjhMJL+H/AAAAAElFTkSuQmCC",
includes:["ComboBox","DropDownButton",["DropDownSelect","\x3cselect\x3e"],"FilteringSelect","MultiSelect","Select","\x3cselect\x3e"]},$ControlsSection_SlidersSpinners:{id:"SlidersSpinners",name:"Sliders, Spinners",iconBase64:"data:image/gif;base64,R0lGODlhEAAQANUAAM7W5DdYkDteljpfloOcwUBonkBonUFonkdzqEdzp3CUv+Tt+EZzp9Xk9Njm9dvo9kx+sU1+sZ/E6K3M68re8tDh89fm9VKHuYO14pC95ZG95Z/F6KzM663N68ne8tDi89Xl9FaOv4O24pG+5aDJ6tXj76nR7v///wAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAACH5BAEAACcALAAAAAAQABAAAAZZwJNwSCwaj8ikcjkMOZ/J0KJBbSxCyMtnwulMPpdiKcSIUDZoiSfCCJWEERIB8RhpMppHglCBCA0mJgoHFiIYDgYKgQVCAAGPAQIgIAOQAQBIj0ybnJ2eJ0EAOw\x3d\x3d",
includes:["HorizontalSlider","NumberSpinner","Slider","TimeSpinner","VerticalSlider"]},$ControlsSection_TextBox:{id:"TextBox",name:"TextBox",iconBase64:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAM1JREFUeNpi/P//PwMlgImBQkCxASzIHIvIif/lzfQZHp66yHBieT4jUSaAwgAZm0dM+I8uhg+DXRDefwAckqGWCmBD15x48H/18QcELV9Z6MAINuDPz98MtWmODBKcTAw9QL6NvhyDipoMXs0ts/chwuD39+9gDjfDfzgtyvAXe6hDQ+bXtx8IA94+eArmsLMywml+Bmbc4cbAyPD24VOEAX9//WLIyJ7KkBJiARZctPE0w5w1JxjoEgtM2NIBiCY2ITEO/bxAsQEAAQYAGVGarS2fPq4AAAAASUVORK5CYII\x3d",
includes:[["TextBox","\x3cinput\x3e"],"ComboBox","CurrencyTextBox","DateTextBox","DateTimeTextBox","NumberTextBox","SimpleTextarea",["Textarea","TextArea","ExpandingTextArea"],"ValidationTextBox","TimeTextBox"]},$ControlsSection_Toolbars:{id:"Toolbars",name:"Toolbars, ButtonBars",iconBase64:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAOtJREFUeNpi/P//PwMlgAVEhPcf+E+RAX9+/mKoTXMiWXPTzH0MTCDGzy9f4YIxmZOIokHg19dvDIygMHAtWPq/vjQYLPgfCHecf8ngaSTOsP0cHtpQgqGxey3ECyCT3n/9CdINNsJCTZDh/ZdfcNoSRH9G8C1UBYDqfyBcYJowg7JAlJCVYGgu9CFZc+2ErRAD/v39BxZQ4STNgL9//kBi4R+QQQ749+cvzIC/ZBoAdcFfSl3w69t3sgwA6QMb8PsfeVH4599/aCwA00Jy2QIG5n+YJv1lYgKLw+h/QBqUaCBizJCERAkACDAAug6MMt3XrLUAAAAASUVORK5CYII\x3d",
includes:["TabBar","TabBarButton","Toolbar"]},$ControlsSection_Other:{id:"Other",name:"Other",iconBase64:"data:image/gif;base64,R0lGODlhEAAQANUAADlckzthmDxhl0BonkBonUVwpUp6rU+BtU+CtFOJu1OKu1aOv/b8//n9/8/t++/6//L7/+v5/+76//X8//j9/+v6/+77/+/7//L8//b9//X9//n+//j+///ovfvcsvTKofTJofbKo/TJo/TKo+20kOegfeeffuegfuWfff///wAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAACH5BAEAACkALAAAAAAQABAAAAZfwJRwSCwaj8ikUrloOp/QVIJErZIc2Kwiheh4v9dKpEI+pAyetPp6eVgsEkOq8AGNRKAQyoGB9DEFKQRWVHsTGgwaGQMpAiclJiYoJ3sNDRwbFAEpAJ2en6BLoqOkpEEAOw\x3d\x3d",
includes:["ProgressIndicator","Rating","SearchBox"]},$ControlsSection:{id:"Controls",name:"Controls",_COMMENT1_:"each section can either have an array of subsections or an array of includes",iconBase64:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAIAAACQkWg2AAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyBpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuMC1jMDYwIDYxLjEzNDc3NywgMjAxMC8wMi8xMi0xNzozMjowMCAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENTNSBXaW5kb3dzIiB4bXBNTTpJbnN0YW5jZUlEPSJ4bXAuaWlkOjgyQUEwNTdCNTk1MTExRTBCODIzOTk0QzIzMzdBNkNGIiB4bXBNTTpEb2N1bWVudElEPSJ4bXAuZGlkOjgyQUEwNTdDNTk1MTExRTBCODIzOTk0QzIzMzdBNkNGIj4gPHhtcE1NOkRlcml2ZWRGcm9tIHN0UmVmOmluc3RhbmNlSUQ9InhtcC5paWQ6ODJBQTA1Nzk1OTUxMTFFMEI4MjM5OTRDMjMzN0E2Q0YiIHN0UmVmOmRvY3VtZW50SUQ9InhtcC5kaWQ6ODJBQTA1N0E1OTUxMTFFMEI4MjM5OTRDMjMzN0E2Q0YiLz4gPC9yZGY6RGVzY3JpcHRpb24+IDwvcmRmOlJERj4gPC94OnhtcG1ldGE+IDw/eHBhY2tldCBlbmQ9InIiPz7ZOYfnAAABBUlEQVR42pRSKxCDMAztdgjkJBKJnKxETk5WIpGTlcjKykpk5SSyEolETk4iI9eRrpSud7tF5NK8vHweHHoz38cHSdmVlhFkM5lN9W2dJDTKRJDNZBgxrum5oOdynB7j9NSC+aJhXjC4VCfrHQErLO0dsN2cBUDwjosOn0fyy2y19+8JsMDWjMA3QSkRPjMCW9GJ5CFWFzllu+qW1RmsXfHoW0OlNv7oYX52XRsS+rtVCbajrdGq9EeH2/rMQfZGaRPNxYwPdivpYRo1D8W+tAo3kVJ/Q+478Bt32UH5PSAFHWFVqVllRr/ploLc0VWRCyl2nT9BBDlZ8T8hKUYE/a3SS4ABAP4rm5Sxt9t9AAAAAElFTkSuQmCC",
subsections:"$ControlsSection_Buttons $ControlsSection_CheckboxesRadios $ControlsSection_IconContainer $ControlsSection_Pickers $ControlsSection_Select $ControlsSection_SlidersSpinners $ControlsSection_TextBox $ControlsSection_Toolbars $ControlsSection_Other".split(" ")},$HTMLSection_Common:{id:"Common",name:"Common",iconBase64:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAALNJREFUeNpi/P//P4NUxvb/DGQCFhjj2QxPkjUDLWZgYqAQgA34//8fmNO74TIcwwCMjU2MAagPbADTv79wyeIAXTBG1oALMAL1gcOA8f9vgoqRDQWxIfr+QF3w9w95/v/7C+qCf78x/AezBa8XgC5gAKUDhZh5/8kBIH3QQPxNlhdALqdOOmD8+5vMQIS6gPH/X/K8ANQHDQMyoxEYC9CE9I9BI6SHdBeA9f7/T1EgAgQYAMdnhUefY5wVAAAAAElFTkSuQmCC",
includes:["\x3ca\x3e","\x3cdiv\x3e","\x3clabel\x3e","\x3cspan\x3e","\x3cstyle\x3e"]},$HTMLSection_Forms:{id:"Forms",name:"Forms",iconBase64:"data:image/png;base64,R0lGODlhEAAQAOYAAPT2/PH0+/n6/Iaavoyfwt/o+OLq+Onv+pOmxt/o9+bt+N7k7unv+e3y+sbT59/p+OLr+PD0+t/p9/D1+/f5+5DDvKfMxgBZSqfNxgJbSqjNxqjMxQZeSqjNxQZfSgpiSgphSg9mSrXSyRNrShNqSb3Vy5zKtp3Ktr3Wy5zKtZ3KtR1zSaDMtSJ3ScTYzSZ6SSZ7SSl+SSl9SSp+SSp9SaTNtCyASXt0T392ToV5TIx8SpOASKOIQ5yEReDIj97WwbSQPbCOPquLQNSyaNSyadq9fObav9Wyaf///////wAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAACH5BAEAAEkALAAAAAAQABAAAAeQgEmCg4SFhoeIhECLi4g2NklASEgCRECHNi40RpMURUdBgjAxMzIzKCUvSAgAPkVDQkktIrS1Ii0RExERATxJKx0bGhYdGMIrDgQDDT1JJBXQ0dAjDAwHDDtJISYnKSom3CEOCMoKOkkgHOoeLCwfCxAG8hA5hRk1HD8J+w8SBTiFLlxIcqOgwYKJEipcaCgQADs\x3d",
includes:"\x3cbutton\x3e \x3cfieldset\x3e \x3cform\x3e \x3cinput\x3e \x3cselect\x3e \x3ctextarea\x3e".split(" ")},$HTMLSection_Headers:{id:"Headers",name:"Headers",iconBase64:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAIpJREFUeNpi/P//PwMlgImBQkCxASwggtW3bzeQcgFiVx5NrT0gsS/Xr2GIwQBQbiaQSgPJkewCoOZyqGaEC4jUqASkQK5SIjcMlKC4Aoj34HLBbqBNuAy4B8TKwPC4B1TjgsuAs0D8Hso2BmJBmARIIzHRWAFUCAp1V6hhQyAhUWwA49DPTAABBgDGmykkJRol4AAAAABJRU5ErkJggg\x3d\x3d",
includes:["\x3ch1\x3e","\x3ch2\x3e","\x3ch3\x3e"]},$HTMLSection_ImagesMediaIframes:{id:"ImagesMediaIframes",name:"Images, Media, Iframes",iconBase64:"data:image/gif;base64,R0lGODlhEAAQANUAAOnn6f////7+/v39/fz8/Pr6+vn5+ff39/X19fT09PLy8vHx8e/v7+fn59/f397e3tvb29bW1sfHx8LCwsHBwby8vLq6urm5uba2trS0tLKysq2traKioqCgoJycnJSUlJKSkpGRkYuLi4qKiomJiYSEhHh4eHV1dXR0dGlpaWhoaFxcXP///wAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAACH5BAEAACwALAAAAAAQABAAAAaPQBYLNAQZjcJk0mgJOBeEkXI5jEwmHMJCNC1uIBNKxzTwEJWhocPxkAQIBgY3+QFpAJTJxnRarU5KRCANVxkcFygsJIEfGAx5eQoZSFQgCQkIlwREaUsgFwdXYQIXlEJpIAWiFAEfQ4EgFQFheQEWpq8gTrsBnLBNkBO2dWhDsxTIrSydQioqKc7P0iolQkEAOw\x3d\x3d",
includes:["\x3caudio\x3e","\x3cembed\x3e","\x3cimg\x3e","\x3ciframe\x3e","\x3cvideo\x3e"]},$HTMLSection_ParagraphsFormatting:{id:"ParagraphsFormatting",name:"Paragraphs, Breaks, Rules",iconBase64:"data:image/gif;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAIAAACQkWg2AAAACXBIWXMAAAsTAAALEwEAmpwYAAAKT2lDQ1BQaG90b3Nob3AgSUNDIHByb2ZpbGUAAHjanVNnVFPpFj333vRCS4iAlEtvUhUIIFJCi4AUkSYqIQkQSoghodkVUcERRUUEG8igiAOOjoCMFVEsDIoK2AfkIaKOg6OIisr74Xuja9a89+bN/rXXPues852zzwfACAyWSDNRNYAMqUIeEeCDx8TG4eQuQIEKJHAAEAizZCFz/SMBAPh+PDwrIsAHvgABeNMLCADATZvAMByH/w/qQplcAYCEAcB0kThLCIAUAEB6jkKmAEBGAYCdmCZTAKAEAGDLY2LjAFAtAGAnf+bTAICd+Jl7AQBblCEVAaCRACATZYhEAGg7AKzPVopFAFgwABRmS8Q5ANgtADBJV2ZIALC3AMDOEAuyAAgMADBRiIUpAAR7AGDIIyN4AISZABRG8lc88SuuEOcqAAB4mbI8uSQ5RYFbCC1xB1dXLh4ozkkXKxQ2YQJhmkAuwnmZGTKBNA/g88wAAKCRFRHgg/P9eM4Ors7ONo62Dl8t6r8G/yJiYuP+5c+rcEAAAOF0ftH+LC+zGoA7BoBt/qIl7gRoXgugdfeLZrIPQLUAoOnaV/Nw+H48PEWhkLnZ2eXk5NhKxEJbYcpXff5nwl/AV/1s+X48/Pf14L7iJIEyXYFHBPjgwsz0TKUcz5IJhGLc5o9H/LcL//wd0yLESWK5WCoU41EScY5EmozzMqUiiUKSKcUl0v9k4t8s+wM+3zUAsGo+AXuRLahdYwP2SycQWHTA4vcAAPK7b8HUKAgDgGiD4c93/+8//UegJQCAZkmScQAAXkQkLlTKsz/HCAAARKCBKrBBG/TBGCzABhzBBdzBC/xgNoRCJMTCQhBCCmSAHHJgKayCQiiGzbAdKmAv1EAdNMBRaIaTcA4uwlW4Dj1wD/phCJ7BKLyBCQRByAgTYSHaiAFiilgjjggXmYX4IcFIBBKLJCDJiBRRIkuRNUgxUopUIFVIHfI9cgI5h1xGupE7yAAygvyGvEcxlIGyUT3UDLVDuag3GoRGogvQZHQxmo8WoJvQcrQaPYw2oefQq2gP2o8+Q8cwwOgYBzPEbDAuxsNCsTgsCZNjy7EirAyrxhqwVqwDu4n1Y8+xdwQSgUXACTYEd0IgYR5BSFhMWE7YSKggHCQ0EdoJNwkDhFHCJyKTqEu0JroR+cQYYjIxh1hILCPWEo8TLxB7iEPENyQSiUMyJ7mQAkmxpFTSEtJG0m5SI+ksqZs0SBojk8naZGuyBzmULCAryIXkneTD5DPkG+Qh8lsKnWJAcaT4U+IoUspqShnlEOU05QZlmDJBVaOaUt2ooVQRNY9aQq2htlKvUYeoEzR1mjnNgxZJS6WtopXTGmgXaPdpr+h0uhHdlR5Ol9BX0svpR+iX6AP0dwwNhhWDx4hnKBmbGAcYZxl3GK+YTKYZ04sZx1QwNzHrmOeZD5lvVVgqtip8FZHKCpVKlSaVGyovVKmqpqreqgtV81XLVI+pXlN9rkZVM1PjqQnUlqtVqp1Q61MbU2epO6iHqmeob1Q/pH5Z/YkGWcNMw09DpFGgsV/jvMYgC2MZs3gsIWsNq4Z1gTXEJrHN2Xx2KruY/R27iz2qqaE5QzNKM1ezUvOUZj8H45hx+Jx0TgnnKKeX836K3hTvKeIpG6Y0TLkxZVxrqpaXllirSKtRq0frvTau7aedpr1Fu1n7gQ5Bx0onXCdHZ4/OBZ3nU9lT3acKpxZNPTr1ri6qa6UbobtEd79up+6Ynr5egJ5Mb6feeb3n+hx9L/1U/W36p/VHDFgGswwkBtsMzhg8xTVxbzwdL8fb8VFDXcNAQ6VhlWGX4YSRudE8o9VGjUYPjGnGXOMk423GbcajJgYmISZLTepN7ppSTbmmKaY7TDtMx83MzaLN1pk1mz0x1zLnm+eb15vft2BaeFostqi2uGVJsuRaplnutrxuhVo5WaVYVVpds0atna0l1rutu6cRp7lOk06rntZnw7Dxtsm2qbcZsOXYBtuutm22fWFnYhdnt8Wuw+6TvZN9un2N/T0HDYfZDqsdWh1+c7RyFDpWOt6azpzuP33F9JbpL2dYzxDP2DPjthPLKcRpnVOb00dnF2e5c4PziIuJS4LLLpc+Lpsbxt3IveRKdPVxXeF60vWdm7Obwu2o26/uNu5p7ofcn8w0nymeWTNz0MPIQ+BR5dE/C5+VMGvfrH5PQ0+BZ7XnIy9jL5FXrdewt6V3qvdh7xc+9j5yn+M+4zw33jLeWV/MN8C3yLfLT8Nvnl+F30N/I/9k/3r/0QCngCUBZwOJgUGBWwL7+Hp8Ib+OPzrbZfay2e1BjKC5QRVBj4KtguXBrSFoyOyQrSH355jOkc5pDoVQfujW0Adh5mGLw34MJ4WHhVeGP45wiFga0TGXNXfR3ENz30T6RJZE3ptnMU85ry1KNSo+qi5qPNo3ujS6P8YuZlnM1VidWElsSxw5LiquNm5svt/87fOH4p3iC+N7F5gvyF1weaHOwvSFpxapLhIsOpZATIhOOJTwQRAqqBaMJfITdyWOCnnCHcJnIi/RNtGI2ENcKh5O8kgqTXqS7JG8NXkkxTOlLOW5hCepkLxMDUzdmzqeFpp2IG0yPTq9MYOSkZBxQqohTZO2Z+pn5mZ2y6xlhbL+xW6Lty8elQfJa7OQrAVZLQq2QqboVFoo1yoHsmdlV2a/zYnKOZarnivN7cyzytuQN5zvn//tEsIS4ZK2pYZLVy0dWOa9rGo5sjxxedsK4xUFK4ZWBqw8uIq2Km3VT6vtV5eufr0mek1rgV7ByoLBtQFr6wtVCuWFfevc1+1dT1gvWd+1YfqGnRs+FYmKrhTbF5cVf9go3HjlG4dvyr+Z3JS0qavEuWTPZtJm6ebeLZ5bDpaql+aXDm4N2dq0Dd9WtO319kXbL5fNKNu7g7ZDuaO/PLi8ZafJzs07P1SkVPRU+lQ27tLdtWHX+G7R7ht7vPY07NXbW7z3/T7JvttVAVVN1WbVZftJ+7P3P66Jqun4lvttXa1ObXHtxwPSA/0HIw6217nU1R3SPVRSj9Yr60cOxx++/p3vdy0NNg1VjZzG4iNwRHnk6fcJ3/ceDTradox7rOEH0x92HWcdL2pCmvKaRptTmvtbYlu6T8w+0dbq3nr8R9sfD5w0PFl5SvNUyWna6YLTk2fyz4ydlZ19fi753GDborZ752PO32oPb++6EHTh0kX/i+c7vDvOXPK4dPKy2+UTV7hXmq86X23qdOo8/pPTT8e7nLuarrlca7nuer21e2b36RueN87d9L158Rb/1tWeOT3dvfN6b/fF9/XfFt1+cif9zsu72Xcn7q28T7xf9EDtQdlD3YfVP1v+3Njv3H9qwHeg89HcR/cGhYPP/pH1jw9DBY+Zj8uGDYbrnjg+OTniP3L96fynQ89kzyaeF/6i/suuFxYvfvjV69fO0ZjRoZfyl5O/bXyl/erA6xmv28bCxh6+yXgzMV70VvvtwXfcdx3vo98PT+R8IH8o/2j5sfVT0Kf7kxmTk/8EA5jz/GMzLdsAAAAEZ0FNQQAAsY58+1GTAAAAIGNIUk0AAHolAACAgwAA+f8AAIDpAAB1MAAA6mAAADqYAAAXb5JfxUYAAAHGSURBVHjaZFLJbhNREKx+b2Yc7xs2EEVZlEgR4oKEOHLiH/gEfokP4EM4I0UcEApCkYAoIDlWGC9je2ymFw4zA9jUqaWu6up6r+nT1XWn1QDAnMEU2/BB5HxoxjAAmM4XQb/TGtzrcBprfOXC2l8ugVnHox+9w6eN7kGhdy4QVQCrZB7WjqOykYMZy9E0vXg9fPKqOzgCIKou76kZs6w2WbL6laRZkmarDXNmlfqg2xvefngzGX/NbYNimkFU3328niTrMKrA+Ua18vzRg73W4ab20iq38eimOzwBSoGamWLQaVSj0PuAnAO591/uWG2/1z46aU++X+bMPw7GgpvxLJ4tgzByPiDnyXkxNKt7+83Iygd0JR/MCjgiclTAERHBDBmriG05qGrG+uLZuUk5oIQYVou5qm4JzCCii1QlYxBgAIEAGMg7EdUdBzMTsbcXn+N5EoYR+ZCcd96z4Pygd9orvuvfDMZS7GEglBUoNzfV3Qym8I/PjjebdZ4WRCAyo2atwpLuCgDcfbvsCwfCO6GXoFUyrQfrQuCdA/Dw+CyKIsDyRXZg9xvt/rA4vp/TuagSka8PczL9JyDQbC26jKezxe8BAJ6U+/2r7MIJAAAAAElFTkSuQmCC",
includes:"\x3cb\x3e \x3cbr\x3e \x3cem\x3e \x3chr\x3e \x3ci\x3e \x3cp\x3e \x3cs\x3e \x3cstrong\x3e \x3cu\x3e".split(" ")},$HTMLSection_Tables:{id:"Tables",name:"Tables",iconBase64:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAXhJREFUeNrEUz1LA0EQnTvzO/wPYsBOrQW109ImpLPIL9DWKqQQRESEFGKjYmGwEyQggUTBRn+BIhFFTXK53Z1xZi53ulcpKdxjmXnD7Lv39iMgIhhnhDDmKKTJavXyz1KOKvNBRkCIsFWe09wxFbI1iTEy5ppB0shB69v1K18BOdTYvHvUZm1k0oi7rUwhIIkAs8VJQESfwMQxVGoXv5Le7jxAwF/yZ2aVubRxRjKYmWJrqXZyQ/3I0HtvSG8fA8Xd1z49v/ToqftJi5va/30KJhqOyGQ/WL6xCcZkCkakrMcOopyFKGKvCGLNslFrDMTGqX8hECz7AKN7YwZDnwC5uXp47XndPW17uN64zXK0zidwzsH6yozKNKxg57gFpeUi11EtHZx3YG1hKiNoNO9zx8iMcjRigWQFYuJfVAMp/jmcRf8qG90sUAWoEWUZpG8FcwRICQ7ShunSniYToiIMIb3XguXELdcKnEtM6639chD8+2v8EmAA9/wqJKl9P7kAAAAASUVORK5CYII\x3d",
includes:["\x3ctable\x3e"]},$HTMLSection:{id:"HTML",name:"HTML",iconBase64:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyBpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuMC1jMDYwIDYxLjEzNDc3NywgMjAxMC8wMi8xMi0xNzozMjowMCAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENTNSBXaW5kb3dzIiB4bXBNTTpJbnN0YW5jZUlEPSJ4bXAuaWlkOjVFNUZFNTNBNTk0QjExRTBBNkY0ODEzNDdCMzkxNTdDIiB4bXBNTTpEb2N1bWVudElEPSJ4bXAuZGlkOjVFNUZFNTNCNTk0QjExRTBBNkY0ODEzNDdCMzkxNTdDIj4gPHhtcE1NOkRlcml2ZWRGcm9tIHN0UmVmOmluc3RhbmNlSUQ9InhtcC5paWQ6NUU1RkU1Mzg1OTRCMTFFMEE2RjQ4MTM0N0IzOTE1N0MiIHN0UmVmOmRvY3VtZW50SUQ9InhtcC5kaWQ6NUU1RkU1Mzk1OTRCMTFFMEE2RjQ4MTM0N0IzOTE1N0MiLz4gPC9yZGY6RGVzY3JpcHRpb24+IDwvcmRmOlJERj4gPC94OnhtcG1ldGE+IDw/eHBhY2tldCBlbmQ9InIiPz5wB++kAAABAklEQVR42qRToQ7CMBC9LYhK5Bz9AyaHYhIHEomcYxI5iRwOOYkcDgkKWxxyuElwnSq5hpJ2tAvJXnK5vuvd60u7eUII6IOBTo67SafafH31foroQEWZR8IFVibis2/M+G3BV9NYTydkCJSGPy59WzOKtMMlYghUTwLsXsMsLQA4yIwc10GUyaBxLvusAuGigM3+BHFIJceMnFW182K/ApfbQ6jhdBnjoTLrIljjLgF9WIcu0ulgm8zgzCrID2ejATnWcV+htt3BdDzydBHOzWEaBLLGucMB4lQkXycIffivTxmBzYdsJdcqd8GHnmg5ILDfLrXHIpaHIwbz+v7ObwEGADGQtFOesBZAAAAAAElFTkSuQmCC",
subsections:"$HTMLSection_Common $HTMLSection_Forms $HTMLSection_Headers $HTMLSection_ImagesMediaIframes $HTMLSection_ParagraphsFormatting $HTMLSection_Tables".split(" ")},$AppOtherSection:{id:"Other",name:"Other",iconBase64:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAcFJREFUeNqcUj1IQlEUPjfc+llqCEKwpaCgrJZqKOhnqiChsbQhF+f2moqgpaH2rDEqiiCwBB2sRbJArYa0hohSCLTQ93rvds95710VHaIDx/P5ne+ce869j3HOAW039MCPr9PwV5sddIBntJPZLAKLV+eHCDMpY2UlnP5bvyv7V9gA6qx04bMAmbwKmZwiXIWPvAI9bY0iFikSh7m8QhrUo9nKx8IknsTFGYyXcwDvohHDgbgxhWUVDbJfijE23osIO+Fnmnw79CKKzTJswEot5Aq+uV6Ix+6FJ8HewCESjJIjTtwmKWev5xAXOCEw6o2G4jR039Y5z+WK5H/FWCdX4HppLEykMtkqrJu4vaWZML2T9R2cRtP8LJygS5wa6QYDg8BdNbChmRlwMLmCd/NUjmfhu9Qr4enlALl384Q4S4N18hJ1XYeaWNMk1rRqTcUKR4Ebwq7JPiAsnss10Q9HFyY/YfKmpmKFpY0T/v2tkrvXDig+vWX54vohRXTUYMScR2gqXqGoFEqvYI7X2tQkxv6hSBq1IHHVCoHII/cHY/QJL4w7wX8ZI94t8J7gUYYYNcSPOWFyuIPJBv+1XwEGAJJgewSkj0bcAAAAAElFTkSuQmCC",
includes:"Calendar ColorPalette GridX RichText StickyNote Tree $$AllOthers$$".split(" ")},$SketchOtherSection:{id:"Other",name:"Other",iconBase64:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAcFJREFUeNqcUj1IQlEUPjfc+llqCEKwpaCgrJZqKOhnqiChsbQhF+f2moqgpaH2rDEqiiCwBB2sRbJArYa0hohSCLTQ93rvds95710VHaIDx/P5ne+ce869j3HOAW039MCPr9PwV5sddIBntJPZLAKLV+eHCDMpY2UlnP5bvyv7V9gA6qx04bMAmbwKmZwiXIWPvAI9bY0iFikSh7m8QhrUo9nKx8IknsTFGYyXcwDvohHDgbgxhWUVDbJfijE23osIO+Fnmnw79CKKzTJswEot5Aq+uV6Ix+6FJ8HewCESjJIjTtwmKWev5xAXOCEw6o2G4jR039Y5z+WK5H/FWCdX4HppLEykMtkqrJu4vaWZML2T9R2cRtP8LJygS5wa6QYDg8BdNbChmRlwMLmCd/NUjmfhu9Qr4enlALl384Q4S4N18hJ1XYeaWNMk1rRqTcUKR4Ebwq7JPiAsnss10Q9HFyY/YfKmpmKFpY0T/v2tkrvXDig+vWX54vohRXTUYMScR2gqXqGoFEqvYI7X2tQkxv6hSBq1IHHVCoHII/cHY/QJL4w7wX8ZI94t8J7gUYYYNcSPOWFyuIPJBv+1XwEGAJJgewSkj0bcAAAAAElFTkSuQmCC",
includes:"Calendar ColorPalette GridX RichText StickyNote Tree $$AllOthers$$".split(" ")},$mobileSections:"$ViewsSection $HeadingSection $ListsSection $ControlsSection $ContainersSection $HTMLSection $ClipartSection $XBLOXSection $DrawingToolsSection $AppOtherSection $StatesSection".split(" "),$desktopSections:"$ContainersSection $ControlsSection $ViewsSection $HeadingSection $ListsSection $HTMLSection $ClipartSection $XBLOXSection $DrawingToolsSection $AppOtherSection $StatesSection".split(" "),
$sketchSections:"$DrawingToolsSection $ClipartSection $ControlsSection $ContainersSection $HTMLSection $HeadingSection $ListsSection $SketchOtherSection".split(" "),$sketchExcludes:["dojox.mobile.ScrollableView","dojox.mobile.SwapView","dojox.mobile.View"],$ALLMOBILE_Sections:"$ViewsSection $HeadingSection $ListsSection $ControlsSection $ContainersSection $HTMLSection $ClipartSection $XBLOXSection $DrawingToolsSection $AppOtherSection $StatesSection".split(" "),$ALLDESKTOP_Sections:"$ContainersSection $ControlsSection $ViewsSection $HeadingSection $ListsSection $HTMLSection $ClipartSection $XBLOXSection $DrawingToolsSection $AppOtherSection $StatesSection".split(" "),
$deliteSections:["$HTMLSection","$XBLOXSection","$DELITESection","$StatesSection"],$ALLDELITE_Sections:["$HTMLSection","$XBLOXSection","$DELITESection"],$DELITESection_Controls:{id:"delite",name:"Controls",iconBase64:"data:image/gif;base64,R0lGODlhEAAQALMAAN7e4oyMjtXV1sDAwf///+Dg4MvLyzMzM////wAAAAAAAAAAAAAAAAAAAAAAAAAAACH5BAEAAAgALAAAAAAQABAAAAQ3EMlJq704a3RO2NIhBIexHYRgeFTndkQ8HmER33g60EcB/ECcYBd6wWSkDErFUs5Mms4HRK1SIwA7",includes:"Button Slider Combobox Select Checkbox RadioButton Switch ToggleButton MediaPlayer".split(" ")},
$DELITESection_Containers:{id:"delite",name:"Containers",iconBase64:"data:image/gif;base64,R0lGODlhEAAQALMAAN7e4oyMjtXV1sDAwf///+Dg4MvLyzMzM////wAAAAAAAAAAAAAAAAAAAAAAAAAAACH5BAEAAAgALAAAAAAQABAAAAQ3EMlJq704a3RO2NIhBIexHYRgeFTndkQ8HmER33g60EcB/ECcYBd6wWSkDErFUs5Mms4HRK1SIwA7",includes:["ViewStack","Panel","TabBar","Accordion"]},$DELITESection_States:{id:"delite",name:"States",iconBase64:"data:image/gif;base64,R0lGODlhEAAQALMAAN7e4oyMjtXV1sDAwf///+Dg4MvLyzMzM////wAAAAAAAAAAAAAAAAAAAAAAAAAAACH5BAEAAAgALAAAAAAQABAAAAQ3EMlJq704a3RO2NIhBIexHYRgeFTndkQ8HmER33g60EcB/ECcYBd6wWSkDErFUs5Mms4HRK1SIwA7",
includes:["CSSState"]},$DELITESection:{id:"delite",name:"Deliteful",iconBase64:"data:image/gif;base64,R0lGODlhEAAQAKIAAFhYWtXV1v///0BAQP///wAAAAAAAAAAACH5BAEAAAQALAAAAAAQABAAAAMuSLo0w5CNIF6EM9grN2+Z82WCEGjcVJbopa5tlJ2nh4W2XH9LyCu+X/AHAPyOCQA7",subsections:["$DELITESection_Controls","$DELITESection_Containers"],includes:[]},$StatesSection:{id:"States",name:"States",iconBase64:"data:image/gif;base64,R0lGODlhEAAQAKIAAL+/v5aWlmNjYzMzMxwcHBYWFv///wAAACH5BAEAAAYALAAAAAAQABAAAAMgaLrc/jBKFsBcg9g7iuaFZwlhaZrD1Ikqq35Xdc10PScAOw\x3d\x3d",
includes:["CSS","Style"]}},_COMMENT11_:"Should have one each for mobile, desktop, sketchhifi, sketchlofi",_COMMENT12_:"For each preset, collections is list of each widget collection in order of precedence",_COMMENT13_:"and sections is the array of sections for this preset (or $desktopSections)",presets:{mobile:{collections:[{id:"dojoxmobile",show:!0},{id:"dijit",show:!1},{id:"html",show:!0},{id:"clipart",show:!0},{id:"shapes",show:!0}],sections:"$mobileSections"},desktop:{collections:[{id:"dijit",
show:!0},{id:"dojoxmobile",show:!1},{id:"html",show:!0},{id:"clipart",show:!0},{id:"xblox",show:!0},{id:"shapes",show:!0},{id:"delite",show:!0}],sections:"$desktopSections"},delite:{collections:[{id:"dijit",show:!1},{id:"dojoxmobile",show:!1},{id:"html",show:!0},{id:"xblox",show:!0},{id:"delite",show:!0},{id:"shapes",show:!0},{id:"clipart",show:!0}],sections:"$deliteSections"},sketchhifi:{collections:[{id:"shapes",show:!0},{id:"clipart",show:!1},{id:"dijit",show:!0},{id:"dojoxmobile",show:!0},{id:"html",
show:!0}],sections:"$sketchSections",exclude:"$sketchExcludes"},sketchlofi:{collections:[{id:"shapes",show:!0},{id:"clipart",show:!1},{id:"dijit",show:!0},{id:"dojoxmobile",show:!1},{id:"html",show:!0}],sections:"$sketchSections",exclude:"$sketchExcludes"},$ALLMOBILE:{_COMMENT1_:"$ALLMOBILE is a special preset which shows all widgets",_COMMENT2_:"regardless of the current composition type",_COMMENT3_:"ranking mobile widgets above desktop widgets",collections:[{id:"dojoxmobile",show:!0},{id:"dijit",
show:!0},{id:"html",show:!0},{id:"clipart",show:!0},{id:"xblox",show:!0},{id:"shapes",show:!0}],sections:"$ALLMOBILE_Sections"},$ALLDESKTOP:{_COMMENT1_:"$ALLDESKTOP is a special preset which shows all widgets",_COMMENT2_:"regardless of the current composition type",_COMMENT3_:"ranking desktop widgets above mobile widgets",collections:[{id:"dijit",show:!0},{id:"dojoxmobile",show:!0},{id:"html",show:!0},{id:"clipart",show:!0},{id:"xblox",show:!0},{id:"shapes",show:!0}],sections:"$ALLDESKTOP_Sections"},
$ALLDELITE:{_COMMENT1_:"$ALLDESKTOP is a special preset which shows all widgets",_COMMENT2_:"regardless of the current composition type",_COMMENT3_:"ranking desktop widgets above mobile widgets",collections:[{id:"dijit",show:!1},{id:"dojoxmobile",show:!1},{id:"html",show:!0},{id:"clipart",show:!0},{id:"xblox",show:!0},{id:"shapes",show:!0},{id:"delite",show:!0}],sections:"$ALLDELITE_Sections"}}}:this._initializationInfo[f]},getDefaultThemeSet:function(){return this.getSiteConfigData("defaultThemeSet")},
getUserDisplayName:function(f){f||(f=this.getUser());var d=f.userDisplayName;f.userDisplayName||(d=f.email);return d},getUserEmail:function(f){f||(f=this.getUser());return f.email},getUserDisplayNamePlusEmail:function(f){f||(f=this.getUser());var d=this.getUserDisplayName(f);d!=f.email&&(d+=" \x26lt;"+f.email+"\x26gt;");return d},loadPlugins:function(){c.forEach(function(f){var d=f.id;k.plugins[d]=f;for(var b in f){var a=f[b];"string"!=typeof a&&(a instanceof Array?a.forEach(function(a){k._addExtension(b,
a,d)}):k._addExtension(b,a,d))}})},singleUserMode:function(){return k.isLocalInstall},_stripMaqetta:!0,location:function(){var f=document.location.href.split("?")[0],f=f.replace("index.php",""),f=f.replace("maqetta.html",""),f=f.replace("xui.php",""),f=f.replace("xui.php?debug\x3dtrue",""),f=f.replace("maqettar.html",""),f=f.replace("index.html",""),f=f.replace("?",""),f=f.replace("debug\x3dtrue",""),f=f.replace("\x26isDesktop\x3dtrue","");this._stripMaqetta&&(f=f.replace("maqetta/",""));return f},
getUserWorkspaceUrl:function(){if(this.userBaseUrl)return this.userBaseUrl},run:function(){dojo.isMac&&dojo.addClass(document.documentElement,"isMac");var f=document.body.style;k.supportsCSS3Transitions=void 0!==f.WebkitTransition||void 0!==f.MozTransition||void 0!==f.OTransition||void 0!==f.transition;k.subscribe("/davinci/ui/selectionChanged",k._selectionChanged);dojo.connect(dojo.doc.documentElement,"onkeypress",function(d){8==d.charOrCode&&(window.davinciBackspaceKeyTime=Date.now())});dojo.connect(dojo.doc.documentElement,
"onkeydown",this,"_handleGlobalDocumentKeyEvent");dojo.addOnUnload(function(d){for(var b=null,a=davinci.Workbench&&davinci.Workbench.editorTabs?davinci.Workbench.editorTabs.getChildren():[],p=0,f=0;f<a.length;f++){var c=a[f];c.editor&&(c=c.editor.getOnUnloadWarningMessage())&&(b||(b=c),p++)}1<p&&(b=dojo.string.substitute(q.multipleFilesUnsaved,[b,p]));!b&&100>Date.now()-window.davinciBackspaceKeyTime&&(b=q.careful);if(b){if(d=d||window.event)d.returnValue=b;return b}})},subscribe:function(f,d){k.subscriptions.push(dojo.subscribe(f,
this,d))},destroy:function(){dojo.forEach(k.subscriptions,dojo.unsubscribe)},_addExtension:function(f,d,b){d.id&&(d.id=b+"."+d.id);k.extensionPoints[f]=k.extensionPoints[f]||[];b=k.extensionPoints[f];b.push(d);k.extensionPoints[f]=b},getExtensions:function(f,d){f=k.extensionPoints[f];if(d){var b=d instanceof Function;if(f)return f.filter(function(a){return b&&d(a)||a.id==d})}return f},getExtension:function(f,d){return k.getExtensions(f,d)[0]},handleError:function(f){var d="welcome";k.singleUserMode()&&
(d=".");window.document.body.innerHTML=dojo.string.substitute(q.serverConnectError,{redirectUrl:d,error:f})},executeCommand:function(f){(f=k.getExtension("davinci.commands",f))&&f.run&&f.run()},_selectionChanged:function(f){k.currentSelection=f},getSelection:function(){return k.currentSelection},serverJSONRequest:function(f){var d,b={handleAs:"json"};dojo.mixin(b,f);dojo.xhrGet(b).then(function(a){a&&(d=a)});return d},registerKeyBinding:function(f,d){this._globalKeyBindings||(this._globalKeyBindings=
[]);this._globalKeyBindings.push({keyBinding:f,action:d})},handleKeyEvent:function(f){this._handleKeyEvent(f,!0)},_handleGlobalDocumentKeyEvent:function(f){this._handleKeyEvent(f)},_handleKeyEvent:function(f,d){if(this._globalKeyBindings){var b=!1;(b=dojo.some(this._globalKeyBindings,dojo.hitch(this,function(a){if(k.isKeyEqualToEvent(a.keyBinding,f))return davinci.Workbench._runAction(a.action),!0})))?dojo.stopEvent(f):d||this.currentEditor&&this.currentEditor.handleKeyEvent&&this.currentEditor.handleKeyEvent(f,
!0)}},isKeyEqualToEvent:function(f,d){var b=!0,a=d.altKey&&!dojo.isMac||dojo.isMac&&d.ctrlKey;!!f.accel!==(d.ctrlKey&&!dojo.isMac||dojo.isMac&&d.metaKey)&&(b=!1);!!f.meta!==a&&(b=!1);!!f.shift!==d.shiftKey&&(b=!1);b&&f.charOrCode&&d.which&&(b=dojo.isArray(f.charOrCode)?dojo.some(f.charOrCode,dojo.hitch(this,function(a){return this._comparecharOrCode(a,d)})):this._comparecharOrCode(f.charOrCode,d));return b},_comparecharOrCode:function(f,d){return dojo.isString(f)?f.toLowerCase()===String.fromCharCode(d.which).toLowerCase():
f===d.which}};return k})},"davinci/lang/webContent":function(){define([],function(){return{designer:"Designer,",welcome:"Welcome",loadingMaqetta:"\x26nbsp;Loading Maqetta...",startupError:"Error starting Maqetta: ${0}",logOff:"Log Out",unsupportedBrowser:"Unsupported Browser",unsupportedNote:'Maqetta supports Firefox 4, Chrome 5, and Safari 5.1 or greater. If you wish to continue with an unsupported browser, click "Continue."',buttonContinue:"Continue",pageDesignerTitle:"Maqetta Designer",maqettaUser:"Maqetta User",
localhostUser:"localhost user",sessionTimedOut:"Session timed out",sessionTimedOutMsg:"The session has timed out, please \x3ca href\x3d'${hrefLoc}'\x3elog in\x3c/a\x3e again. (Auto-redirect within 10 seconds)",devicePreviewError:"Maqetta device previewer error. Must supply URL parameter 'file\x3d'",devicePreviewPreviewing:"Previewing:",help:"Help",tutorials:"Tutorials",aboutMaqetta:"About Maqetta",review:"Review and Commenting,",reviewPageTitle:"Maqetta Review Board",careful:"Warning: You are about to leave Maqetta.",
errorLoadingPlugin:"error loading plugin ${0}, response\x3d${1}",errorLoadingPlugins:"error loading plugins",multipleFilesUnsaved:"${0} (NOTE: This is one of ${1} files with unsaved changes.)",idleSessionMessage:"Your session will timeout in ${seconds} seconds, click anywhere in the page to continue using Maqetta.",fileHasUnsavedChanges:"Save changes to ${0}?",perspectiveNotFound:"perspective not found: ${0}",scopeNotDefined:"scope not defined for action: ${0}",funcNotDefined:"function not defined for action: ${0}",
serverConnectError:"\x3ch3\x3eError connecting to the Maqetta Server.\x3c/h3\x3e\x3cbr\x3e\x3cdiv\x3ePlease click here to \x3ca href\x3d'${redirectUrl}'\x3ereturn to Maqetta\x3c/a\x3e\x3cdiv\x3e\x3cdiv\x3eError description: ${error}\x3c/div\x3e"}})},"davinci/commands/CommandStack":function(){define(["dojo/_base/declare"],function(q){return q("davinci.commands.CommandStack",null,{constructor:function(n){this._context=n;this._undoStack=[];this._redoStack=[]},execute:function(n,h){if(n&&(h=this._context&&
"davinci.ve.themeEditor.Context"!=this._context.declaredClass?dojo.withDoc(this._context.getDocument(),"execute",n,[this._context,h]):n.execute(h),this._undoStack.push(n),this._redoStack=[],!h))this.onExecute(n,"execute")},undo:function(){if(this.canUndo()){var n=this._undoStack.pop();n._runDelegate?n._runDelegate.undoDelegate(n):this._context&&"davinci.ve.themeEditor.Context"!=this._context.declaredClass?dojo.withDoc(this._context.getDocument(),"undo",n):n.undo();this._redoStack.push(n);this.onExecute(n,
"undo")}},redo:function(){if(this.canRedo()){var n=this._redoStack.pop();n._runDelegate?n._runDelegate.redoDelegate(n):this._context&&"davinci.ve.themeEditor.Context"!=this._context.declaredClass?dojo.withDoc(this._context.getDocument(),"execute",n):n.execute();this._undoStack.push(n);this.onExecute(n,"redo")}},canUndo:function(){return 0<this._undoStack.length},canRedo:function(){return 0<this._redoStack.length},getUndoCount:function(){return this._undoStack.length},getRedoCount:function(){return this._redoStack.length},
clear:function(){this._undoStack=[];this._redoStack=[]},jump:function(n,h){var g=this.getUndoCount(),e=this.getRedoCount();if(n==g)return n;if(0>n||n>g+e)return-1;g=n-g;if(h)if(0>g)for(;0>g;)this._redoStack.push(this._undoStack.pop()),g++;else for(;0<g;)this._undoStack.push(this._redoStack.pop()),g--;else if(0>g)for(;0>g;)this.undo(),g++;else for(;0<g;)this.redo(),g--;return n},onExecute:function(n,h){},undoDelegate:function(n){},redoDelegate:function(n){}})})},"davinci/ui.plugin":function(){define(["require"],
function(q){return{id:"davinci.ui","davinci.view":[{id:"navigator",title:"Files",viewClass:"davinci/workbench/Explorer",iconClass:"paletteIcon paletteIconFiles"},{id:"hierarchy",title:"Hierarchy"},{id:"devices",title:"Devices",viewClass:"davinci/workbench/DeviceTreeView",iconClass:"paletteIcon paletteIconOutline"},{id:"files",title:"XFiles",viewClass:"davinci/workbench/FileView",iconClass:"paletteIcon paletteIconOutline"},{id:"comment",title:"Comments",viewClass:"davinci/review/view/CommentView",
iconClass:"paletteIcon paletteIconComments"},{id:"scope",title:"Scope"},{id:"properties",title:"Properties",viewClass:"davinci/workbench/PropertyEditor"},{id:"console",title:"Console"},{id:"history",title:"History"},{id:"search",title:"Search"}],"davinci.preferences":[{name:"Project",id:"project",hide:!0,category:"",pageContent:"Project Settings here"},{name:"Project Settings",id:"ProjectPrefs",category:"davinci.ui.project",pane:"davinci/ui/ProjectPreferences",defaultValues:{webContentFolder:"",themeFolder:"themes",
widgetFolder:"lib/custom"}}],"davinci.perspective":{id:"main",title:"AJAX IDE",views:[{viewID:"davinci.ui.navigator",position:"left-bottom"},{viewID:"davinci.ui.outline",position:"right"},{viewID:"davinci.ui.properties",position:"right-bottom"}]},"davinci.actionSets":[{id:"editorActions",visible:!0,menu:[{__mainMenu:!0,separator:["new",!1,"open",!1]},{label:"Create",path:"new",id:"davinci.new",separator:["newApp",!0,"newSketch",!0,"newFolder",!0,"newTheme",!0,"newProject",!0,"additions",!0]},{label:"Open",
path:"open",id:"davinci.open",separator:["openFile",!0,"openTheme",!0,"openOrion",!1,"additions",!1]}],actions:[{id:"newHTMLMobile",run:function(){q(["./ui/Resource"],function(n){n.newHTMLMobile()})},iconClass:"newOpenMenuItem newMobileAppMenuItem",label:"Mobile Application...",menubarPath:"davinci.new/newApp"},{id:"newHTMLDesktop",run:function(){q(["./ui/Resource"],function(n){n.newHTMLDesktop()})},iconClass:"newOpenMenuItem newDesktopAppMenuItem",label:"Desktop Application...",menubarPath:"davinci.new/newApp"},
{id:"newHTMLSketchHiFi",run:function(){q(["./ui/Resource"],function(n){n.newHTMLSketchHiFi()})},iconClass:"newOpenMenuItem newSketchHiFiMenuItem",label:"Sketch (high-fidelity)...",menubarPath:"davinci.new/newSketch"},{id:"newHTMLSketchLoFi",run:function(){q(["./ui/Resource"],function(n){n.newHTMLSketchLoFi()})},iconClass:"newOpenMenuItem newSketchLoFiMenuItem",label:"Sketch (low-fidelity)...",menubarPath:"davinci.new/newSketch"},{id:"newFolder",run:function(){q(["./ui/Resource"],function(n){n.newFolder()})},
iconClass:"newOpenMenuItem newFolderMenuItem",label:"Folder...",menubarPath:"davinci.new/newFolder"},{id:"newCSS",run:function(){q(["./ui/Resource"],function(n){n.newCSS()})},iconClass:"newOpenMenuItem newCSSMenuItem",label:"CSS File...",menubarPath:"davinci.new/newFolder"},{id:"newJS",run:function(){q(["./ui/Resource"],function(n){n.newJS()})},iconClass:"newOpenMenuItem newJSMenuItem",label:"JavaScript File...",menubarPath:"davinci.new/newFolder"},{id:"newTheme",run:function(){q(["davinci/Workbench",
"davinci/ui/NewTheme"],function(n,h){n.showModal(new h,"New Theme",{width:300},null,!0)})},iconClass:"newOpenMenuItem newThemeMenuItem",label:"Theme...",menubarPath:"davinci.new/newTheme"},{id:"newProject",run:function(){q(["./ui/Resource"],function(n){n.newProject()})},iconClass:"newOpenMenuItem newProjectMenuItem",label:"Project...",menubarPath:"davinci.new/newProject"},{id:"openThemeEditor",run:function(){q(["davinci/Workbench","davinci/ui/OpenThemeDialog"],function(n,h){n.showModal(new h,"Open Theme",
{width:200},null,!0)})},iconClass:"newOpenMenuItem openThemeMenuItem",label:"Theme Editor...",menubarPath:"davinci.open/openTheme"},{id:"openReview",run:function(){q(["./ui/Resource"],function(n){n.openFile()})},run:function(){q(["davinci/Workbench","davinci/review/widgets/OpenReviewDialog"],function(n,h){n.showModal(new h,"Open Review",{width:350,height:250})})},iconClass:"newOpenMenuItem openReviewMenuItem",label:"Review...",menubarPath:"davinci.open/openTheme"},{id:"orionNavigator",run:function(){window.open("../navigate/table.html#",
"_blank");window.focus()},iconClass:"newOpenMenuItem orionIcon",label:"Orion Navigator",menubarPath:"davinci.open/openOrion"}]},{id:"main",visible:!0,menu:[{__mainMenu:!0,separator:["usersettings",!1,"settings",!1,"additions",!1,"help",!1]},{label:"User settings",path:"usersettings",id:"davinci.usersettings",className:"userSettingsMenu",iconClass:"userSettingsMenuIcon",showLabel:!1,separator:["username",!0,"logout",!0,"additions",!1]},{label:"Settings",path:"settings",id:"davinci.settings",className:"appSettingsMenu",
iconClass:"appSettingsMenuIcon",showLabel:!1,separator:["settings",!0,"additions",!1]},{label:"Help",path:"help",id:"davinci.help",className:"helpMenu",iconClass:"helpMenuIcon",showLabel:!1,separator:["help",!0,"about",!1,"additions",!1]}],actions:[{id:"editPreferences",run:function(){q(["davinci/workbench/Preferences"],function(n){n.showPreferencePage()})},label:"Preferences...",menubarPath:"davinci.settings/settings"},{id:"editThemeSets",run:function(){q(["davinci/ui/ThemeSetsDialog"],function(n){n()})},
label:"Theme sets...",menubarPath:"davinci.settings/settings"},{id:"showHelp",run:function(){window.open("app/docs/index.html","MaqettaDocumentation")},label:"Documentation",menubarPath:"davinci.help/help",keyBinding:{charOrCode:dojo.keys.F1}},{id:"showTutotials",run:function(){window.open("app/docs/index.html#tutorials/tutorials","MaqettaTutorials")},label:"Tutorials",menubarPath:"davinci.help/help"},{id:"showVideos",run:function(){window.open("http://www.youtube.com/user/Maqetta/","MaqettaVideos")},
label:"Videos",menubarPath:"davinci.help/help"},{id:"showCheatSheets",run:function(){window.open("app/docs/index.html#cheatsheets/cheatsheets","MaqettaCheatSheets")},label:"Cheat sheets",menubarPath:"davinci.help/help"},{id:"showHowTo",run:function(){window.open("https://www.ibm.com/search/csass/search/?sn\x3ddw\x26en\x3dutf\x26hpp\x3d20\x26dws\x3ddw\x26q\x3dmaqetta\x26Search\x3dSearch","MaqettaHowTo")},label:"How-to articles",menubarPath:"davinci.help/help"},{id:"about",run:function(){q(["davinci/ui/about"],
function(n){n.show()})},label:"About Maqetta",menubarPath:"davinci.help/about"},{id:"username",action:"davinci/actions/UserNameAction",run:function(){window.open("../settings/settings.html","_blank");window.focus()},label:"{user}",menubarPath:"davinci.usersettings/username"},{id:"logout",action:"davinci/actions/LogoutAction",label:"Logout",menubarPath:"davinci.usersettings/logout"}]},{id:"explorerActions",visible:!0,actions:[{id:"davinci.ui.rename",label:"Rename...",iconClass:"renameIcon",run:function(){q(["./ui/Resource"],
function(n){n.renameAction()})},isEnabled:function(n){return q("./ui/Resource").canModify(n)},menubarPath:"addFiles"},{id:"davinci.ui.delete",label:"Delete",iconClass:"deleteIcon",isEnabled:function(n){return q("./ui/Resource").canModify(n)},run:function(){q(["./ui/Resource"],function(n){n.deleteAction()})},menubarPath:"delete",keyBinding:{charOrCode:[dojo.keys.DELETE,dojo.keys.BACKSPACE]}},{id:"davinci.ui.download",label:"Download",iconClass:"downloadSomeIcon",action:"davinci/actions/DownloadAction",
isEnabled:function(n){return q("./ui/Resource").canModify(n)},menubarPath:"delete"}]}],"davinci.actionSetPartAssociations":[{targetID:"davinci.ui.editorActions",parts:["davinci.ui.editorMenuBar"]},{targetID:"davinci.ui.explorerActions",parts:["davinci.ui.navigator"]}],"davinci.viewActions":[{viewContribution:{targetID:"davinci.ui.problems",actions:[{id:"Copy2",iconClass:"copyIcon",run:function(){alert("view toolbar")},label:"Copy",toolbarPath:"davinci.toolbar.main/edit",menubarPath:"davinci.edit/cut"}]}},
{viewContribution:{targetID:"workbench.Explorer",actions:[{id:"davinci.ui.newfile",label:"New folder...",iconClass:"newFolderIcon",className:"FilesToolbarNewFolder",run:function(){q(["./ui/Resource"],function(n){n.newFolder()})},toolbarPath:"download"},{id:"davinci.ui.deletefile",label:"Delete file...",iconClass:"FilesToolbarDeleteFileIcon",className:"FilesToolbarDeleteFile",run:function(){q(["./ui/Resource"],function(n){n.deleteAction()})},toolbarPath:"download"},{id:"davinci.ui.renamefile",label:"Rename file...",
iconClass:"FilesToolbarRenameFileIcon",className:"FilesToolbarRenameFile",run:function(){q(["./ui/Resource"],function(n){n.renameAction()})},toolbarPath:"download"},{id:"download",iconClass:"downloadSomeIcon",className:"FilesToolbarDownloadSelected",run:function(){q(["./Workbench","./ui/DownloadSelected"],function(n,h){n.showModal(new h,"Download",{width:440})})},label:"Download Selected Files",toolbarPath:"download"},{id:"download",iconClass:"downloadAllIcon",className:"FilesToolbarDownloadAll",
run:function(){q(["./Workbench","./ui/Download"],function(n,h){n.showModal(new h,"Download",{width:440})})},label:"Download Entire Project",toolbarPath:"download"}]}}]}})},"davinci/html/html.plugin":function(){define(["require"],function(q){return{id:"davinci.html","davinci.editor":[{id:"HTMLEditor",name:"HTML Editor",extensions:"html",isDefault:!1,editorClass:"davinci/html/ui/HTMLEditor",palettePerspective:"davinci.html.htmlEditor",expandPalettes:["left"]},{id:"CSSEditor",name:"CSS Editor",extensions:"css",
isDefault:!1,editorClass:"davinci/html/ui/CSSEditor",palettePerspective:"davinci.html.htmlEditor",expandPalettes:["left"]},{id:"ImageViewer",name:"Image Viewer",extensions:"jpg,gif,jpeg,png",isDefault:!0,editorClass:"davinci/html/ui/ImageViewer",palettePerspective:"davinci.html.htmlEditor",expandPalettes:["left"]}],"davinci.editorActions":{editorContribution:{targetID:"davinci.html.CSSEditor",actions:[{id:"savecombo",className:"maqLabelButton",showLabel:!0,label:"Save",toolbarPath:"save",type:"ComboButton",
run:function(){q(["../Workbench"],function(n){q("../ui/Resource").save()})},isEnabled:function(n){return q("../Workbench").getOpenEditor()},menu:[{iconClass:"saveIcon",run:function(){q("../ui/Resource").save()},isEnabled:function(n){return q("../Workbench").getOpenEditor()},label:"Save",keyBinding:{accel:!0,charOrCode:"s",allowGlobal:!0}},{iconClass:"saveAsIcon",run:function(){q("../ui/Resource").saveAs("html")},isEnabled:function(n){return q("../Workbench").getOpenEditor()},label:"Save As",keyBinding:{accel:!0,
shift:!0,charOrCode:"s",allowGlobal:!0}}]}]}},"davinci.preferences":[{name:"HTML",id:"general",category:""}],"davinci.fileType":[{extension:"html",iconClass:"htmlFileIcon",type:"text"},{extension:"css",iconClass:"cssFileIcon",type:"text"},{extension:"jpeg",iconClass:"imageFileIcon",type:"image"},{extension:"jpg",iconClass:"imageFileIcon",type:"image"},{extension:"png",iconClass:"imageFileIcon",type:"image"},{extension:"gif",iconClass:"imageFileIcon",type:"image"}],"davinci.perspective":[{id:"htmlEditor",
title:"HTML Editor",views:[{viewID:"davinci.ve.Palette",position:"left",hidden:!0},{viewID:"davinci.ui.outline",position:"left",hidden:!0},{viewID:"davinci.ve.style",position:"right"},{viewID:"davinci.ui.comment",position:"right",hidden:!0},{viewID:"davinci.ve.states",position:"right-bottom",hidden:!0},{viewID:"davinci.ui.navigator",position:"left-bottom",selected:!0},{viewID:"davinci.review.reviewNavigator",position:"left"}]}]}})},"davinci/js/js.plugin":function(){define(["require"],function(q){return{id:"davinci.js",
"davinci.editor":[{id:"JSEditor",name:"JavaScript Editor",extensions:"js,json",isDefault:!1,editorClass:"davinci/js/ui/JavaScriptEditor",palettePerspective:"davinci.html.htmlEditor",expandPalettes:["left"]},{id:"XIDEEditor",name:"Editor",extensions:"js,json",isDefault:!0,editorClass:"davinci/xide/Editor",palettePerspective:"davinci.html.htmlEditor",expandPalettes:["left"]}],"davinci.actionSets":[{id:"jsSource",visible:!0,menu:[{label:"Source",path:"edit",id:"davinci.js.source",separator:["commentGroup",
!0,"editGroup",!0,"codeGroup",!0,"additions",!1]}],actions:[{id:"davinci.js.comment",icon:null,run:function(){alert("toggle comment")},label:"Toggle Comment",menubarPath:"davinci.js.source/commentGroup"}]},{id:"jsEdit",visible:!0,actions:[{id:"davinci.js.cut",icon:null,label:"cut",commandID:"davinci.js.cut",menubarPath:"davinci.edit/cut"},{id:"davinci.js.add",icon:null,label:"add",commandID:"davinci.js.add",menubarPath:"davinci.edit/add"},{id:"davinci.js.delete",icon:null,label:"delete",commandID:"davinci.js.delete",
menubarPath:"davinci.edit/delete"}]}],"davinci.actionSetPartAssociations":[{targetID:"davinci.js.jsEdit",parts:["davinci.ui.outline","davinci.js.JSEditor"]}],"davinci.editorActions":{editorContribution:{targetID:"davinci.js.JSEditor",actions:[{id:"savecombo",className:"maqLabelButton",showLabel:!0,label:"Save",toolbarPath:"save",type:"ComboButton",run:function(){q(["../Workbench"],function(n){q("../ui/Resource").save()})},isEnabled:function(n){return q("../Workbench").getOpenEditor()},menu:[{iconClass:"saveIcon",
run:function(){q("../ui/Resource").save()},isEnabled:function(n){return q("../Workbench").getOpenEditor()},label:"Save",keyBinding:{accel:!0,charOrCode:"s",allowGlobal:!0}},{iconClass:"saveAsIcon",run:function(){q("../ui/Resource").saveAs("html")},isEnabled:function(n){return q("../Workbench").getOpenEditor()},label:"Save As",keyBinding:{accel:!0,shift:!0,charOrCode:"s",allowGlobal:!0}}]}]}},"davinci.commands":[{id:"cut",run:function(){}},{id:"add",run:function(){}},{id:"delete",run:function(){}}],
"davinci.keyBindings":[{platform:"win",sequence:"M1+C",commandID:"davinci.js.copy",contextID:"davinci.js.JSEditor"}],"davinci.preferences":[{name:"JavaScript",id:"general",category:""},{name:"Formatting",id:"format",category:"davinci.js.general",pane:"davinci/js/ui/FormatOptions",defaultValues:{blockNewLine:!1,blockIndent:3,functionNewLine:!1,functionIndent:5,functionParamSpaceing:1,labelSpace:1,forParamSpacing:0,breakOnLabel:!0,ifStmtSpacing:0,varAssignmentSpaceing:0,switchSpacing:3,objectLitFieldSpace:1}}],
"davinci.fileType":[{extension:"js",iconClass:"jsFileIcon",type:"text"},{extension:"json",iconClass:"jsFileIcon",type:"text"}]}})},"davinci/ve/ve.plugin":function(){define(["require"],function(q){return{id:"davinci.ve","davinci.view":[{id:"Palette",title:"Palette",viewClass:"davinci/ve/palette/HtmlWidgets",iconClass:"paletteIcon paletteIconWidgets"},{id:"states",title:"Scenes",viewClass:"davinci/ve/views/StatesView",iconClass:"paletteIcon paletteIconStates"},{id:"datastores",title:"DataStores",viewClass:"davinci/ve/views/DataStoresView"},
{id:"object",title:"Object",viewClass:"davinci/ve/views/ObjectView"},{id:"style",title:"",viewClass:"davinci/ve/views/SwitchingStyleView"}],"davinci.perspective":[{id:"pageDesign",title:"Page Design",views:[{viewID:"davinci.ve.Palette",position:"left",selected:!0},{viewID:"davinci.ui.outline",position:"left"},{viewID:"davinci.ui.devices",position:"left"},{viewID:"davinci.ui.files",position:"left"},{viewID:"davinci.ve.style",position:"right"},{viewID:"davinci.ui.comment",position:"right",hidden:!0},
{viewID:"davinci.ve.states",position:"right-bottom",selected:!0},{viewID:"davinci.ui.navigator",position:"left-bottom",selected:!0},{viewID:"davinci.review.reviewNavigator",position:"left-bottom"}]}],"davinci.editor":[{id:"HTMLPageEditor",name:"HTML Visual Editor",extensions:["html","htm","php"],isDefault:!0,editorClass:"davinci/ve/PageEditor",palettePerspective:"davinci.ve.pageDesign",expandPalettes:["left"]}],"davinci.actionSets":[{id:"cutCopyPaste",visible:!0,actions:[{label:"Cut",keySequence:"M1+X",
iconClass:"editActionIcon editCutIconSmall",action:"davinci/ve/actions/CutAction",menubarPath:"davinci.edit/cut"},{label:"Copy",keySequence:"M1+C",iconClass:"editActionIcon editCopyIconSmall",action:"davinci/ve/actions/CopyAction",menubarPath:"davinci.edit/cut"},{keySequence:"M1+V",iconClass:"editActionIcon editPasteIconSmall",label:"Paste",action:"davinci/ve/actions/PasteAction",menubarPath:"davinci.edit/cut"},{keySequence:"DEL",iconClass:"editActionIcon editDeleteIconSmall",label:"Delete",action:"davinci/ve/actions/DeleteAction",
menubarPath:"davinci.edit/cut"},{iconClass:"fa-crosshairs",label:"Show in Outline",action:"davinci/ve/actions/ShowInOutline",menubarPath:"davinci.edit/cut"},{iconClass:"editActionIcon selectParentIconSmall",label:"Select parent",action:"davinci/ve/actions/SelectParentAction",menubarPath:"davinci.edit/cut"},{iconClass:"editActionIcon selectAncestorIconSmall",label:"Select ancestor...",action:"davinci/ve/actions/SelectAncestorAction",menubarPath:"davinci.edit/cut"},{iconClass:"editActionIcon unselectAllIconSmall",
label:"Unselect all",action:"davinci/ve/actions/UnselectAllAction",menubarPath:"davinci.edit/cut"},{iconClass:"editActionIcon",label:"Surround with \x26lt;A\x26gt;",action:"davinci/ve/actions/SurroundAction",surroundWithTagName:"a",menubarPath:"davinci.edit/cut"},{iconClass:"editActionIcon",label:"Surround with \x26lt;DIV\x26gt;",action:"davinci/ve/actions/SurroundAction",surroundWithTagName:"div",menubarPath:"davinci.edit/cut"},{iconClass:"editActionIcon",label:"Surround with \x26lt;SPAN\x26gt;",
action:"davinci/ve/actions/SurroundAction",surroundWithTagName:"span",menubarPath:"davinci.edit/cut"},{iconClass:"editActionIcon moveToFrontIconSmall",label:"Move to front",action:"davinci/ve/actions/MoveToFrontAction",menubarPath:"davinci.edit/cut"},{iconClass:"editActionIcon moveForwardIconSmall",label:"Move forward",action:"davinci/ve/actions/MoveForwardAction",menubarPath:"davinci.edit/cut"},{iconClass:"editActionIcon moveBackwardIconSmall",label:"Move backward",action:"davinci/ve/actions/MoveBackwardAction",
menubarPath:"davinci.edit/cut"},{iconClass:"editActionIcon moveToBackIconSmall",label:"Move to back",action:"davinci/ve/actions/MoveToBackAction",menubarPath:"davinci.edit/cut"}]}],"davinci.viewActions":[{viewContribution:{targetID:"davinci.ve.outline",actions:[{id:"design",iconClass:"designModeIcon editActionIcon",radioGroup:"displayMode",method:"switchDisplayMode",label:"Widgets",toolbarPath:"displayMode"},{id:"source",iconClass:"sourceModeIcon editActionIcon",method:"switchDisplayMode",radioGroup:"displayMode",
label:"Source",toolbarPath:"displayMode"}]}},{viewContribution:{targetID:"davinci.ve.states",actions:[{id:"addState",iconClass:"viewActionIcon addStateIcon",action:"davinci/ve/actions/AddState",label:"Add state",toolbarPath:"states1"},{id:"removeState",iconClass:"viewActionIcon removeStateIcon",action:"davinci/ve/actions/RemoveState",label:"Remove state",toolbarPath:"states1"},{id:"modifyState",iconClass:"viewActionIcon modifyStateIcon",action:"davinci/ve/actions/ModifyState",label:"Modify state",
toolbarPath:"states1"},{id:"NewWidgetsCurrentState",className:"newWidgetsCurrentStateButton",iconClass:"viewActionIcon newWidgetsCurrentStateIcon",action:"davinci/ve/actions/NewWidgetsCurrentState",label:"Toggle whether new widgets go to Background or current state",toolbarPath:"states2"},{id:"highlightBaseWidgets",className:"highlightBaseWidgetsButton",iconClass:"viewActionIcon highlightBaseWidgetsIcon",action:"davinci/ve/actions/HighlightBaseWidgets",label:"When in custom state, highlight widgets from Background state",
toolbarPath:"states2"}]}}],"davinci.actionSetPartAssociations":[{targetID:"davinci.ve.cutCopyPaste",parts:["davinci.ve.visualEditor","davinci.ve.VisualEditorOutline"]}],"davinci.editorActions":{editorContribution:{targetID:"davinci.ve.HTMLPageEditor",actions:[{id:"savecombo",className:"maqLabelButton",showLabel:!0,label:"Save",toolbarPath:"save",type:"ComboButton",run:function(){q(["../Workbench"],function(n){q("../ui/Resource").save()})},isEnabled:function(n){return q("../Workbench").getOpenEditor()},
menu:[{iconClass:"saveIcon",run:function(){q("../ui/Resource").save()},isEnabled:function(n){return q("../Workbench").getOpenEditor()},label:"Save",keyBinding:{accel:!0,charOrCode:"s",allowGlobal:!0}},{iconClass:"saveAsIcon",run:function(){q("../ui/Resource").saveAs("html")},isEnabled:function(n){return q("../Workbench").getOpenEditor()},label:"Save As",keyBinding:{accel:!0,shift:!0,charOrCode:"s",allowGlobal:!0}}]},{id:"undo",iconClass:"editActionIcon undoIcon",action:"davinci/actions/UndoAction",
label:"Undo",toolbarPath:"undoredo",keyBinding:{accel:!0,charOrCode:"z"},command:"Edit/Undo"},{id:"redo",iconClass:"editActionIcon redoIcon",action:"davinci/actions/RedoAction",label:"Redo",toolbarPath:"undoredo",keyBinding:{accel:!0,shift:!0,charOrCode:"z"},command:"Edit/Redo"},{id:"cut",label:"Cut",iconClass:"editActionIcon editCutIcon",action:"davinci/ve/actions/CutAction",toolbarPath:"cutcopypaste",keyBinding:{accel:!0,charOrCode:"x"}},{id:"copy",label:"Copy",iconClass:"editActionIcon editCopyIcon",
action:"davinci/ve/actions/CopyAction",toolbarPath:"cutcopypaste",keyBinding:{accel:!0,charOrCode:"c"}},{id:"paste",label:"Paste",iconClass:"editActionIcon editPasteIcon",action:"davinci/ve/actions/PasteAction",toolbarPath:"cutcopypaste",keyBinding:{accel:!0,charOrCode:"v"}},{id:"delete",iconClass:"editActionIcon editDeleteIcon",label:"Delete",action:"davinci/ve/actions/DeleteAction",toolbarPath:"delete",keyBinding:{charOrCode:[dojo.keys.DELETE,dojo.keys.BACKSPACE]}},{id:"outline",iconClass:"fa-crosshairs",
label:"Show in Outline",action:"davinci/ve/actions/ShowInOutline",toolbarPath:"outline"},{id:"openBrowser",iconClass:"text-success fa-play",className:"davinciFloatRight openBrowser",run:function(){q(["../Workbench"],function(n){(n=n.getOpenEditor())&&n.resourceFile?n.previewInBrowser():console.error("ERROR. Cannot launch browser window. No editor info.")})},label:"Preview in Browser",toolbarPath:"undoredo",iconClass:"text-success fa-play",keyBinding:{accel:!0,charOrCode:"0",allowGlobal:!0},command:"File/Open In Browser",
group:"File",tab:"Home"},{id:"documentSettings",iconClass:"documentSettingsIcon",className:"documentSettings davinciFloatRight",label:"Document settings",toolbarPath:"undoredo",type:"DropDownButton",menu:[{id:"theme",iconClass:"selectThemeIcon",className:"davinciFloatRight",action:"davinci/actions/SelectThemeAction",label:"Switch theme"},{iconClass:"editActionIcon",label:"Select parent",action:"davinci/ve/actions/SelectParentAction",command:"Widget/Select/SelectParent",group:"Widget"},{iconClass:"editActionIcon",
label:"Select ancestor",action:"davinci/ve/actions/SelectAncestorAction",command:"Widget/Select/SelectAnchestor",group:"Widget"},{iconClass:"editActionIcon",label:"Unselect all",action:"davinci/ve/actions/UnselectAllAction"},{iconClass:"editActionIcon moveToFrontIconSmall",label:"Move to front",action:"davinci/ve/actions/MoveToFrontAction",command:"Widget/Move/MoveToFront",group:"Widget"},{iconClass:"editActionIcon moveForwardIconSmall",label:"Move forward",action:"davinci/ve/actions/MoveForwardAction",
command:"Widget/Move/MoveToForward",group:"Widget"},{iconClass:"editActionIcon moveBackwardIconSmall",label:"Move backward",action:"davinci/ve/actions/MoveBackwardAction",command:"Widget/Move/MoveToBackward",group:"Widget"},{iconClass:"editActionIcon moveToBackIconSmall",label:"Move to back",action:"davinci/ve/actions/MoveToBackAction",command:"Widget/Move/MoveToBack",group:"Widget"},{iconClass:"editActionIcon",label:"Surround with \x26lt;A\x26gt;",action:"davinci/ve/actions/SurroundAction",surroundWithTagName:"a",
command:"Widget/SourroundWithA",group:"Widget",tab:"Tools"},{iconClass:"editActionIcon",label:"Surround with \x26lt;DIV\x26gt;",action:"davinci/ve/actions/SurroundAction",surroundWithTagName:"div",command:"Widget/SourroundWithDIV",group:"Widget",tab:"Tools"},{iconClass:"editActionIcon",label:"Surround with \x26lt;SPAN\x26gt;",action:"davinci/ve/actions/SurroundAction",surroundWithTagName:"span",command:"Widget/SourroundWithSPAN",group:"Widget",tab:"Tools"}]},{id:"stickynote",iconClass:"stickynoteIcon",
action:"davinci/actions/StickyNoteAction",label:"Add note",toolbarPath:"stickynote"},{id:"layout",className:"maqLabelButton davinciFloatRight maqLayoutDropDownButton",showLabel:!0,label:"Flow",toolbarPath:"undoredo",type:"DropDownButton",menu:[{label:"Flow",iconClass:"flowLayoutIcon",method:"selectLayoutFlow"},{label:"Absolute",iconClass:"absoluteLayoutIcon",method:"selectLayoutAbsolute"}]},{id:"sourcecombo",className:"maqLabelButton davinciFloatRight maqSourceComboButton",showLabel:!0,label:"Source",
action:"davinci/ve/actions/ViewSourceAction",toolbarPath:"undoredo",type:"ComboButton",menu:[{keyBinding:{accel:!0,charOrCode:"2",allowGlobal:!0},iconClass:"editActionIcon sourceModeIcon sourceMenuIcon",action:"davinci/ve/actions/ViewSourceMenuAction",label:"Source only"},{keyBinding:{accel:!0,charOrCode:"3",allowGlobal:!0},iconClass:"editActionIcon splitVerticalIcon sourceMenuIcon",action:"davinci/ve/actions/ViewSplitVMenuAction",label:"Split Vertically"},{keyBinding:{accel:!0,charOrCode:"4",allowGlobal:!0},
iconClass:"editActionIcon splitHorizontalIcon sourceMenuIcon",action:"davinci/ve/actions/ViewSplitHMenuAction",label:"Split Horizontally"}]},{id:"design",showLabel:!0,className:"maqLabelButton davinciFloatRight maqDesignButton",action:"davinci/ve/actions/ViewDesignAction",label:"Design",toolbarPath:"undoredo",keyBinding:{accel:!0,charOrCode:"1",allowGlobal:!0}},{id:"closeactiveeditor",run:function(){q(["../Workbench"],function(n){n.closeActiveEditor()})},keyBinding:{accel:!0,shift:!0,charOrCode:"w",
allowGlobal:!0}},{id:"showWidgetsPalette",run:function(){var n=dijit.byId("davinci.ve.Palette");if(n){var h=n.getParent();h&&h.selectChild(n)}},keyBinding:{meta:!0,charOrCode:"p",allowGlobal:!0}}]}},"davinci.preferences":[{name:"Visual Editor",id:"editorPrefs",category:"davinci.html.general",pane:"davinci/ve/prefs/HTMLEditPreferences",defaultValues:{flowLayout:!1,snap:!0,showPossibleParents:!0,cssOverrideWarn:!0,absoluteWidgetsZindex:900,widgetPaletteLayout:"icons"}}],"davinci.dnd":[{parts:["davinci.ui.navigator"],
dragSource:function(n){if("File"==n.elementType)return/gif|jpeg|jpg|png|svg|json/i.test(n.getExtension())},dragHandler:"davinci/ve/palette/ImageDragSource"}],"davinci.fileType":[{extension:"theme",iconClass:"themeFileIcon",type:"text"}],"davinci.defaultEditorActions":{editorContribution:{actions:[{id:"save",run:function(){q("../Workbench").getOpenEditor().save()},isEnabled:function(n){return!0},className:"maqLabelButton",showLabel:!0,label:"Save",toolbarPath:"save",keyBinding:{accel:!0,charOrCode:"s"}},
{id:"undo",iconClass:"editActionIcon undoIcon",action:"davinci/actions/UndoAction",label:"Undo",toolbarPath:"undoredo",keyBinding:{accel:!0,charOrCode:"z"}},{id:"redo",iconClass:"editActionIcon redoIcon",action:"davinci/actions/RedoAction",label:"Redo",toolbarPath:"undoredo",keyBinding:{accel:!0,shift:!0,charOrCode:"z"}}]}}}})},"davinci/model/Path":function(){define(["dojo/_base/declare"],function(q){"undefined"===typeof davinci.model&&(davinci.model={});"undefined"===typeof davinci.model.Path&&(davinci.model.Path=
{});var n=q("davinci.model.Path",null,{constructor:function(h,g,e){h=h||".";"string"==typeof h?(this.path=h,this.getSegments()):(this.segments=h,this.hasLeading=g,this.hasTrailing=e)},endsWith:function(h){var g=dojo.clone(this.segments);for(h=(new n(h)).getSegments();0<h.length&&0<g.length;)if(h.pop()!=g.pop())return!1;return!0},getExtension:function(){this.extension||(this.extension=this.path.substr(this.path.lastIndexOf(".")+1));return this.extension},segment:function(h){var g=this.getSegments();
return g.length<h?null:g[h]},getSegments:function(){if(!this.segments){var h=this.path;this.segments=h.split("/");"/"==h.charAt(0)&&(this.hasLeading=!0);"/"==h.charAt(h.length-1)&&(this.hasTrailing=!0,this.segments.pop());this._canonicalize()}return this.segments},isAbsolute:function(){return this.hasLeading},getParentPath:function(){if(!this._parentPath){var h=dojo.clone(this.segments);h.pop();this._parentPath=new n(h,this.hasLeading)}return dojo.clone(this._parentPath)},_clone:function(){return new n(dojo.clone(this.segments),
this.hasLeading,this.hasTrailing)},append:function(h){h=h||"";"string"==typeof h&&(h=new n(h));if(h.isAbsolute())return h;var g=this.segments,e=h.getSegments(),g=g.concat(e);h=new n(g,this.hasLeading,h.hasTrailing);".."!=e[0]&&"."!=e[0]||h._canonicalize();return h},toString:function(){var h=[];this.hasLeading&&h.push("/");for(var g=0;g<this.segments.length;g++)0<g&&h.push("/"),h.push(this.segments[g]);this.hasTrailing&&h.push("/");return h.join("")},removeRelative:function(){var h=this.getSegments();
return 0<h.length&&"."==h[1]?this.removeFirstSegments(1):this},relativeTo:function(h,g){"string"==typeof h&&(h=new n(h));var e=this.segments;if(this.isAbsolute())return this;var m=h.getSegments();h=this.matchingFirstSegments(h);m=m.length;g&&--m;g=m-h;if(0==g+e.length-h)return davinci.model.Path.EMPTY;for(var m=[],c=0;c<g;c++)m.push("..");for(c=h;c<e.length;c++)m.push(e[c]);return new n(m,!1,this.hasTrailing)},startsWith:function(h){var g=this.matchingFirstSegments(h);return h._length()==g},_length:function(h){return this.segments.length},
matchingFirstSegments:function(h){var g=this.segments;h=h.getSegments();for(var e=Math.min(g.length,h.length),m=0,c=0;c<e&&g[c]==h[c];c++)m++;return m},removeFirstSegments:function(h){return new n(this.segments.slice(h,this.segments.length),this.hasLeading,this.hasTrailing)},removeMatchingLastSegments:function(h){h=this.matchingFirstSegments(h);return this.removeLastSegments(h)},removeMatchingFirstSegments:function(h){h=this.matchingFirstSegments(h);return this._clone().removeFirstSegments(h)},removeLastSegments:function(h){h||
(h=1);return new n(this.segments.slice(0,this.segments.length-h),this.hasLeading,this.hasTrailing)},lastSegment:function(){return this.segments[this.segments.length-1]},firstSegment:function(h){return this.segments[h||0]},equals:function(h){if(this.segments.length!=h.segments.length)return!1;for(var g=0;g<this.segments.length;g++)if(h.segments[g]!=this.segments[g])return!1;return!0},_canonicalize:function(){for(var h,g=this.segments,e=0;e<g.length;e++)if("."==g[e]||".."==g[e]){h=!0;break}if(h){h=
[];for(e=0;e<g.length;e++)".."==g[e]?0==h.length?this.hasLeading||h.push(g[e]):".."==h[h.length-1]?h.push(".."):h.pop():"."==g[e]&&1!=this.segments.length||h.push(g[e]);h.length!=g.length&&(this.segments=h)}}});davinci.model.Path.EMPTY=new n("");return n})},"davinci/ve/themeEditor/metadata/query":function(){define(["dojo/_base/declare","davinci/ve/utils/URLRewrite"],function(q,n){return q("davinci.ve.themeEditor.metadata.query",null,{constructor:function(h,g){this.files=h;this.cache={};this.lastLoaded=
-1;this.modules=g;this.modulePrefix=null;this.modulePrefix=".";if(g)for(h=0;h<g.length;h++)this.modulePrefix+="/"+g[h]},getType:function(h){var g=null;h.declaredClass?g=h.type:(g=h,"html."==g.substring(0,5)&&(tagName=g.substring(5)));return g},_loadNextFile:function(){var h=this.files[++this.lastLoaded],g=null,g=h.getURL?n.encodeURI(h.getURL()):this.modulePrefix+h,e=null;dojo.xhrGet({url:g,handleAs:"json",sync:!0,load:function(m){e=m}});return e},_fullyLoaded:function(){return this.files.length<=
this.lastLoaded+1},_cacheNext:function(){var h=this._loadNextFile();dojo.mixin(this.cache,h)},getMetaData:function(h){var g=h.split(/[\.\/]/),e=0<=g.length?g[g.length-1]:g;return(g=this.cache[0<=g.length?g[0]:g])&&g[e]?g[e]:this._fullyLoaded()?null:(this._cacheNext(),this.getMetaData(h))}})})},"davinci/ve/utils/URLRewrite":function(){define([],function(){var q=/^\s*url\s*\(\s*(\'[^\'\"]*\'|\"[^\'\"]*\"|[^\'\"]*)\s*\)\s*$/,n=/^[\'\"]?([^\'\"]*)[\'\"]?$/,h=/^(http|ftp)/;return{isAbsolute:function(g){return"string"!=
typeof g?!1:(g=this.getUrl(g))?h.test(g):!1},containsUrl:function(g){return"string"!=typeof g?!1:q.test(g)},replaceUrl:function(g,e){return"string"!=typeof g||"string"!=typeof e?null:this.getUrl(g)?"url('"+e+"')":null},stripQuotes:function(g){return g.replace(n,"$1")},encodeURI:function(g){return encodeURI(g).replace(/#/g,"%23")},getUrl:function(g){return"string"!=typeof g?null:(g=g.match(q))&&1<g.length?this.stripQuotes(g[1]):null}}})},"davinci/workbench/Preferences":function(){define("dojo/_base/declare dojo/_base/xhr dojo/_base/lang dojo/topic dojo/dom ../Runtime dijit/_WidgetBase dijit/_TemplatedMixin dijit/_WidgetsInTemplateMixin dijit/registry davinci/ui/Dialog dijit/Tree dijit/tree/ForestStoreModel dojo/data/ItemFileReadStore davinci/lang/workbench dijit/lang/_common dojo/text!davinci/workbench/templates/Preferences.html dijit/form/Button".split(" "),
function(q,n,h,g,e,m,c,k,f,d,b,a,p,r,v,w,x){var B=q([c,k,f],{templateString:x,commonStrings:w,resize:function(){this.borderContainer.resize()}}),z={_allPrefs:{},savePreferences:function(a,b,p){},_loadExtensions:function(){z._extensions||(z._extensions=m.getExtensions("davinci.preferences"))},showPreferencePage:function(){z._loadExtensions();var f=z.getPrefJson();if(f.items)for(var c=f.items.length-1;0<=c;c--){var k=f.items[c];k.hide&&f.items.splice(c,1)}if(!f||1>f.length)alert(v.noUserPref);else{this.dialog=
b.showModal(new B({}),v.preferences,{width:650,height:350});var k=new r({data:f,jsId:"prefTreeDataStore"}),c=new p({jsId:"fileModel",labelAttr:"name",store:k,rootId:"root"}),m=["root"];if(f=f.items){do k=f[0],m.push(k.id),f=k.children;while(f)}var g=d.byId("prefTree");g||(g=new a({model:c,id:"prefTree",persist:!1,query:"{type:'directory'}",label:"Preferences",labelAttr:"name",showRoot:!1,childrenAttrs:"children",openOnClick:!0,autoExpand:!0}));g.onClick=function(a){z.setPaneContent(a)};e.byId("pref.TreePane").appendChild(g.domNode);
g.startup();g.onLoadDeferred.then(function(){g.set("paths",[m]).then(function(){g.focusNode(g.selectedNode);z.setPaneContent(g.selectedItem)})})}},getPrefJson:function(){var a=z._extensions;if(!a)return[];for(var b=[],p=0;p<a.length;p++)a[p]._index=p,a[p].category?(b[a[p].category]||(b[a[p].category]=[]),b[a[p].category].push(a[p])):(b.root||(b.root=[]),b.root.push(a[p]));return{identifier:"id",items:b.root.map(function(a){return{id:a.id,name:a.name,hide:a.hide,index:a._index,children:z._getPrefJsonChildren(a.id,
b)}})}},_getPrefJsonChildren:function(a,b){a=b[a];if(!a)return[];for(var p=[],d=0;d<a.length;d++)p[d]={id:a[d].id,name:a[d].name,index:a[d]._index},b[a[d].id]&&(p[d].children=z._getPrefJsonChildren(a[d].id,b));return p},setPaneContent:function(a){var b;delete z._currentPane;var p=z._extensions[a.index[0]],f=z.getPreferences(p.id,davinci.Workbench.getProject());p.pane?require([p.pane],function(a){a=new a;z._currentPane=a;z._currentPane._extension=p;z._currentPane.setPreferences(f);d.byId("pref.RightPane").setContent(a.domNode)}):
b=p.pageContent?document.createTextNode(p.pageContent):document.createTextNode("");b&&d.byId("pref.RightPane").setContent(b)},_save:function(a){if(z._currentPane){var b=z._currentPane.getPreferences(),p=z._currentPane._extension.id,d=davinci.Workbench.getProject();z.savePreferences(p,d,b);z._currentPane.save&&z._currentPane.save(b)}for(b=0;b<a.length;b++){try{a[b].save&&a[b].save()}catch(F){}a[b].children&&0<a[b].children.length&&z._save(a[b].children)}},save:function(){z._save(z._extensions);z.finish()},
finish:function(){z._extensions=null;z._currentPane=null;this.dialog.destroyRecursive(!1);this.dialog=null},getPreferences:function(a,b){z._allPrefs[b]||(z._allPrefs[b]={});return{version:"1.7",specVersion:"0.8",snap:!0,helper:"maq-metadata-dojo/dojox/mobile/ThemeHelper",themeSets:[{_COMMENT_:"Defines site-specific default theme sets",desktopTheme:"claro",mobileTheme:[{device:"Android",theme:"android"},{device:"BlackBerry",theme:"blackberry"},{device:"iPad",theme:"ipad"},{device:"iPhone",theme:"iphone"},
{device:"other",theme:"iphone"}],name:"site_dojo_default"}]}},getDefaultPreferences:function(a){z._loadExtensions();for(var b=0;b<z._extensions.length;b++)if(z._extensions[b].id==a)return"string"===typeof z._extensions[b].defaultValues?m.serverJSONRequest({url:z._extensions[b].defaultValues,handleAs:"json",sync:!0}).defaultValues:z._extensions[b].defaultValues}};return h.setObject("davinci.workbench.Preferences",z)})},"davinci/ui/Dialog":function(){define("dojo/_base/declare dijit/form/Button dijit/Dialog dojo/dom-geometry dojo/dom-style dojo/_base/connect dojo/window dojo/parser davinci/_common".split(" "),
function(q,n,h,g,e,m,c,k,f){var d=q(h,{contentStyle:null,buildRendering:function(){this.inherited(arguments);dojo.addClass(this.domNode,"resizableDialog");dojo.addClass(this.domNode,"ui-widget-content");this.submitOnEnter&&dojo.addClass(this.domNode,"submitOnEnter")},_setContent:function(b,a){this.inherited(arguments);var p=dojo.doc.createElement("div");this.containerNode.appendChild(p);(p=dojo.query(".dijitDialogPaneContentArea",this.containerNode)[0])?dojo.connect(p,"onkeydown",this,"_onKeyDown"):
dojo.connect(this.domNode,"onkeydown",this,"_onKeyDown")},resize:function(b){if(b){var a=e.getComputedStyle(this.containerNode),a=g.getPadExtents(this.containerNode,a),p=b.w-a.w,d=b.h-a.h,d=d-g.getMarginBox(this.titleBar).h;b=dojo.query(".dijitDialogPaneContentArea",this.containerNode)[0];a=dojo.query(".dijitDialogPaneActionBar",this.containerNode)[0];d-=g.getMarginBox(a).h;p&&dojo.style(b,"width",p+"px");d&&dojo.style(b,"height",d+"px");dojo.forEach(this.getChildren(),dojo.hitch(this,function(a){a.resize&&
a.resize({w:p,h:d})}))}},show:function(){var b=this.inherited(arguments);if(this.contentStyle){if("object"==typeof this.contentStyle){var a={};this.contentStyle.width&&(a.w=parseInt(this.contentStyle.width));this.contentStyle.height&&(a.h=parseInt(this.contentStyle.height));var p=c.getBox(this.ownerDocument);p.w*=this.maxRatio;p.h*=this.maxRatio;a.h>p.h&&(g.position(this.containerNode),a.h=p.h);this.resize(a)}this._size();this._position();dojo.style(this.containerNode,"width","auto");dojo.style(this.containerNode,
"height","auto")}return b},_onKeyDown:function(b){var a=b.ctrlKey&&!dojo.isMac||dojo.isMac&&b.metaKey;b.which==dojo.keys.ENTER&&(a||this.submitOnEnter)&&(b=dojo.query("input[type\x3dsubmit]",this.containerNode),0<b.length&&(b=dijit.getEnclosingWidget(b[0]),a=document.createEvent("MouseEvents"),a.initMouseEvent("click",!0,!0,window,0,0,0,0,0,!1,!1,!1,!1,0,null),b._onClick(a)))}});d._timedDestroy=function(b,a){a&&a.forEach(m.disconnect);var p=m.connect(b,"onHide",function(){m.disconnect(p);b.destroyRecursive()});
b.hide()};d.showModal=function(b,a,p,f,c,k){var r=[];a={title:a,content:b,contentStyle:p,submitOnEnter:c};k&&(a.onShow=k);var e=new d(a);k=dojo.hitch(this,function(){var a=!1;f&&(a=f());a||this._timedDestroy(e,r)});r.push(m.connect(e,"onExecute",b,k));b.onExecute&&r.push(m.connect(b,"onExecute",b,k));r.push(m.connect(b,"onClose",dojo.hitch(this,function(){this._timedDestroy(e,r)})));r.push(m.connect(e,"onCancel",dojo.hitch(this,function(){this._timedDestroy(e,r)})));e.show();return e};d.showMessage=
function(b,a,p,d,f){return this.showDialog({title:b,content:a,style:p,okCallback:d,okLabel:null,hideCancel:!0})};d.showDialog=function(b){var a=b.title,p=b.content,c=b.style,e=b.okCallback,g=b.okLabel,h=b.hideCancel,B=b.submitOnEnter,z=b.extendLabels,u=b.extendCallbacks,y,A=[];b=document.createElement("div");var C=document.createElement("div");dojo.addClass(C,"dijitDialogPaneContentArea");b.appendChild(C);var F=document.createElement("div");dojo.addClass(F,"dijitDialogPaneActionBar");g=new n({label:g?
g:f.ok,type:"submit","class":"maqPrimaryButton"});F.appendChild(g.domNode);var E=dojo.hitch(this,function(){this._timedDestroy(y,A)});if(z&&u&&0<z.length&&z.length===u.length)for(g=0;g<z.length;g++){var D=function(a){if(u[a])u[a]();y.onCancel()}.bind(this,g);F.appendChild((new n({label:z[g],onClick:D,"class":"maqSecondaryButton"})).domNode)}h||F.appendChild((new n({label:f.cancel,onClick:function(){y.onCancel()},"class":"maqSecondaryButton"})).domNode);b.appendChild(F);y=new d({title:a,content:b,
contentStyle:c,submitOnEnter:B});dojo.isString(p)?(C.innerHTML=p,k.parse(C)):p.domNode?C.appendChild(p.domNode):C.appendChild(p);A.push(m.connect(y,"onExecute",dojo.hitch(this,function(){e&&e();E()})));A.push(m.connect(y,"onCancel",dojo.hitch(this,function(){E()})));y.show();return y};return d})},"dojo/window":function(){define("./_base/lang ./sniff ./_base/window ./dom ./dom-geometry ./dom-style ./dom-construct".split(" "),function(q,n,h,g,e,m,c){n.add("rtl-adjust-position-for-verticalScrollBar",
function(f,d){f=h.body(d);d=c.create("div",{style:{overflow:"scroll",overflowX:"visible",direction:"rtl",visibility:"hidden",position:"absolute",left:"0",top:"0",width:"64px",height:"64px"}},f,"last");var b=c.create("div",{style:{overflow:"hidden",direction:"ltr"}},d,"last"),a=0!=e.position(b).x;d.removeChild(b);f.removeChild(d);return a});n.add("position-fixed-support",function(f,d){f=h.body(d);d=c.create("span",{style:{visibility:"hidden",position:"fixed",left:"1px",top:"1px"}},f,"last");var b=
c.create("span",{style:{position:"fixed",left:"0",top:"0"}},d,"last"),a=e.position(b).x!=e.position(d).x;d.removeChild(b);f.removeChild(d);return a});var k={getBox:function(f){f=f||h.doc;var d="BackCompat"==f.compatMode?h.body(f):f.documentElement,b=e.docScroll(f);if(n("touch")){var a=k.get(f);f=a.innerWidth||d.clientWidth;d=a.innerHeight||d.clientHeight}else f=d.clientWidth,d=d.clientHeight;return{l:b.x,t:b.y,w:f,h:d}},get:function(f){if(9>n("ie")&&k!==document.parentWindow){f.parentWindow.execScript("document._parentWindow \x3d window;",
"Javascript");var d=f._parentWindow;f._parentWindow=null;return d}return f.parentWindow||f.defaultView},scrollIntoView:function(f,d){try{f=g.byId(f);var b=f.ownerDocument||h.doc,a=h.body(b),p=b.documentElement||a.parentNode,c=n("ie"),k=n("webkit");if(f!=a&&f!=p)if(!(n("mozilla")||c||k||n("opera"))&&"scrollIntoView"in f)f.scrollIntoView(!1);else{var w="BackCompat"==b.compatMode,x=Math.min(a.clientWidth||p.clientWidth,p.clientWidth||a.clientWidth),B=Math.min(a.clientHeight||p.clientHeight,p.clientHeight||
a.clientHeight),b=k||w?a:p,z=d||e.position(f),u=f.parentNode;d=function(a){return 6>=c||7==c&&w?!1:n("position-fixed-support")&&"fixed"==m.get(a,"position").toLowerCase()};if(!d(f))for(;u;){u==a&&(u=b);var y=e.position(u),A=d(u),C="rtl"==m.getComputedStyle(u).direction.toLowerCase();if(u==b){y.w=x;y.h=B;b==p&&c&&C&&(y.x+=b.offsetWidth-y.w);if(0>y.x||!c||9<=c)y.x=0;if(0>y.y||!c||9<=c)y.y=0}else{var F=e.getPadBorderExtents(u);y.w-=F.w;y.h-=F.h;y.x+=F.l;y.y+=F.t;var E=u.clientWidth,D=y.w-E;0<E&&0<D&&
(C&&n("rtl-adjust-position-for-verticalScrollBar")&&(y.x+=D),y.w=E);E=u.clientHeight;D=y.h-E;0<E&&0<D&&(y.h=E)}A&&(0>y.y&&(y.h+=y.y,y.y=0),0>y.x&&(y.w+=y.x,y.x=0),y.y+y.h>B&&(y.h=B-y.y),y.x+y.w>x&&(y.w=x-y.x));var q=z.x-y.x,O=z.y-y.y,K=q+z.w-y.w,L=O+z.h-y.h,J,I;0<K*q&&(u.scrollLeft||u==b||u.scrollWidth>u.offsetHeight)&&(J=Math[0>q?"max":"min"](q,K),C&&(8==c&&!w||9<=c)&&(J=-J),I=u.scrollLeft,u.scrollLeft+=J,J=u.scrollLeft-I,z.x-=J);0<L*O&&(u.scrollTop||u==b||u.scrollHeight>u.offsetHeight)&&(J=Math.ceil(Math[0>
O?"max":"min"](O,L)),I=u.scrollTop,u.scrollTop+=J,J=u.scrollTop-I,z.y-=J);u=u!=b&&!A&&u.parentNode}}}catch(G){console.error("scrollIntoView: "+G),f.scrollIntoView(!1)}}};q.setObject("dojo.window",k);return k})},"davinci/_common":function(){define([],function(){return{search:"Search",filter:"Filter","new":"New",errorSavingFile:"Error saving file: ${0} details: ${1}",palette:"palette",closeAllEditors:"Close all tabs",undo:"Undo",redo:"Redo",copy:"Copy",paste:"Paste",cut:"Cut","delete":"Delete",surround:"Surround",
properties:"Properties",styles:"Styles",events:"Events",preferences:"Preferences",addPane:"Add Pane",addColumn:"Add Column",addRow:"Add Row",removeColumn:"Remove Column",removeRow:"Remove Row",joinColumn:"Join Column",joinRow:"Join Row",splitColumn:"Split Column",splitRow:"Split Row",alignLeft:"Align Left",alignRight:"Align Right",alignTop:"Align Top",alignBottom:"Align Bottom",show:"Show",hide:"Hide",addMenuItem:"Add Menu Item",addSubMenu:"Add Sub Menu",addMenuBarItem:"Add MenuBar Item",addPopupMenuBar:"Add Popup MenuBarItem",
ok:"OK",cancel:"Cancel",page:"Page",title:"Title",metaInfo:"Meta Info",httpEquiv:"HTTP Equiv",style:"Style",theme:"Theme",styleSheets:"Style Sheets",rules:"Rules",url:"URL",externalScripts:"External Scripts",modules:"Modules",name:"Name",value:"Value",add:"Add",remove:"Remove",staticOptions:"Static Options",axisOptions:"Axis Options",series:"Series",axis:"Axis",option:"Option",selected:"Selected",staticItems:"Static Items",dataStore:"Data Store",query:"Query",fields:"Fields",field:"Field",label:"Label",
width:"Width",edit:"Edit",key:"Key",rootId:"Root ID",rootLabel:"Root Label",childrenAttrs:"Children Attributes",items:"Items",type:"Type",widget:"Widget",position:"Position",size:"Size",layout:"Layout",visual:"Visual",text:"Text",border:"Border",table:"Table",list:"List",aural:"Aural",others:"Others",onLoad:"Load",onUnload:"Unload",script:"Script",methodCall:"Method Call",serviceCall:"Service Call",object:"Object",method:"Method",parameters:"Parameters",result:"Result",service:"Service",content:"Content",
source:"Source",target:"Target",property:"Property",flowLayout:"Flow Layout",snapToNearestWidget:"Snap to nearest widget",showPossibleParents:"When dragging, show possible parents",warnOnCSSOverride:"Warn on CSS Override",absoluteWidgetsZindex:"z-index for sketch mode",widgetPaletteLayout:"In Palette, display widgets as",widgetPaletteShow_Icons:"icons",widgetPaletteShow_List:"list",liveEdit:"Live Edit",zazl:"Enable \x3ca href\x3d'http://zazl.org' target\x3d'_blank'\x3eZazl Optimizer\x3c/a\x3e",selectorPrefix:"Selector Prefix",
component:"Component",alternates:"Alternates",alternateWidgets:"Alternate widgets:",howToChooseAlternate:"To choose alternate widget, click-select current widget, then click on up arrow icon.",summary:"Summary:",description:"Description:",showSuggestedWidgets:"Suggested Widgets",showAllWidgets:"All Widgets",MoreIconTitleString:"Click here to see alternative similar widgets",HelpIconTitleString:"Click here to see descriptive info about this widget",__dummy__:""}})},"dojo/data/ItemFileReadStore":function(){define("../_base/kernel ../_base/lang ../_base/declare ../_base/array ../_base/xhr ../Evented ./util/filter ./util/simpleFetch ../date/stamp".split(" "),
function(q,n,h,g,e,m,c,k,f){h=h("dojo.data.ItemFileReadStore",[m],{constructor:function(d){this._arrayOfAllItems=[];this._arrayOfTopLevelItems=[];this._loadFinished=!1;this.url=this._ccUrl=this._jsonFileUrl=d.url;this._jsonData=d.data;this.data=null;this._datatypeMap=d.typeMap||{};this._datatypeMap.Date||(this._datatypeMap.Date={type:Date,deserialize:function(b){return f.fromISOString(b)}});this._features={"dojo.data.api.Read":!0,"dojo.data.api.Identity":!0};this._itemsByIdentity=null;this._storeRefPropName=
"_S";this._itemNumPropName="_0";this._rootItemPropName="_RI";this._reverseRefMap="_RRM";this._loadInProgress=!1;this._queuedFetches=[];void 0!==d.urlPreventCache&&(this.urlPreventCache=d.urlPreventCache?!0:!1);void 0!==d.hierarchical&&(this.hierarchical=d.hierarchical?!0:!1);d.clearOnClose&&(this.clearOnClose=!0);"failOk"in d&&(this.failOk=d.failOk?!0:!1)},url:"",_ccUrl:"",data:null,typeMap:null,clearOnClose:!1,urlPreventCache:!1,failOk:!1,hierarchical:!0,_assertIsItem:function(d){if(!this.isItem(d))throw Error(this.declaredClass+
": Invalid item argument.");},_assertIsAttribute:function(d){if("string"!==typeof d)throw Error(this.declaredClass+": Invalid attribute argument.");},getValue:function(d,b,a){d=this.getValues(d,b);return 0<d.length?d[0]:a},getValues:function(d,b){this._assertIsItem(d);this._assertIsAttribute(b);return(d[b]||[]).slice(0)},getAttributes:function(d){this._assertIsItem(d);var b=[],a;for(a in d)a!==this._storeRefPropName&&a!==this._itemNumPropName&&a!==this._rootItemPropName&&a!==this._reverseRefMap&&
b.push(a);return b},hasAttribute:function(d,b){this._assertIsItem(d);this._assertIsAttribute(b);return b in d},containsValue:function(d,b,a){var p=void 0;"string"===typeof a&&(p=c.patternToRegExp(a,!1));return this._containsValue(d,b,a,p)},_containsValue:function(d,b,a,p){return g.some(this.getValues(d,b),function(b){if(null!==b&&!n.isObject(b)&&p){if(b.toString().match(p))return!0}else if(a===b)return!0})},isItem:function(d){return d&&d[this._storeRefPropName]===this&&this._arrayOfAllItems[d[this._itemNumPropName]]===
d?!0:!1},isItemLoaded:function(d){return this.isItem(d)},loadItem:function(d){this._assertIsItem(d.item)},getFeatures:function(){return this._features},getLabel:function(d){if(this._labelAttr&&this.isItem(d))return this.getValue(d,this._labelAttr)},getLabelAttributes:function(d){return this._labelAttr?[this._labelAttr]:null},filter:function(d,b,a){var p=[],f,k;if(d.query){var e;f=d.queryOptions?d.queryOptions.ignoreCase:!1;var m={};for(k in d.query)e=d.query[k],"string"===typeof e?m[k]=c.patternToRegExp(e,
f):e instanceof RegExp&&(m[k]=e);for(f=0;f<b.length;++f){var g=!0,h=b[f];if(null===h)g=!1;else for(k in d.query)e=d.query[k],this._containsValue(h,k,e,m[k])||(g=!1);g&&p.push(h)}}else for(f=0;f<b.length;++f)k=b[f],null!==k&&p.push(k);a(p,d)},_fetchItems:function(d,b,a){var p=this;if(this._loadFinished)this.filter(d,this._getItemsArray(d.queryOptions),b);else if(this._jsonFileUrl!==this._ccUrl?(q.deprecated(this.declaredClass+": ","To change the url, set the url property of the store, not _jsonFileUrl.  _jsonFileUrl support will be removed in 2.0"),
this.url=this._ccUrl=this._jsonFileUrl):this.url!==this._ccUrl&&(this._ccUrl=this._jsonFileUrl=this.url),null!=this.data&&(this._jsonData=this.data,this.data=null),this._jsonFileUrl)if(this._loadInProgress)this._queuedFetches.push({args:d,filter:n.hitch(p,"filter"),findCallback:n.hitch(p,b)});else{this._loadInProgress=!0;var f=e.get({url:p._jsonFileUrl,handleAs:"json-comment-optional",preventCache:this.urlPreventCache,failOk:this.failOk});f.addCallback(function(f){try{p._getItemsFromLoadedData(f),
p._loadFinished=!0,p._loadInProgress=!1,p.filter(d,p._getItemsArray(d.queryOptions),b),p._handleQueuedFetches()}catch(x){p._loadFinished=!0,p._loadInProgress=!1,a(x,d)}});f.addErrback(function(b){p._loadInProgress=!1;a(b,d)});var c=null;d.abort&&(c=d.abort);d.abort=function(){var a=f;a&&-1===a.fired&&(a.cancel(),a=null);c&&c.call(d)}}else if(this._jsonData)try{this._loadFinished=!0,this._getItemsFromLoadedData(this._jsonData),this._jsonData=null,p.filter(d,this._getItemsArray(d.queryOptions),b)}catch(w){a(w,
d)}else a(Error(this.declaredClass+": No JSON source data was provided as either URL or a nested Javascript object."),d)},_handleQueuedFetches:function(){if(0<this._queuedFetches.length){for(var d=0;d<this._queuedFetches.length;d++){var b=this._queuedFetches[d],a=b.args,p=b.filter,b=b.findCallback;p?p(a,this._getItemsArray(a.queryOptions),b):this.fetchItemByIdentity(a)}this._queuedFetches=[]}},_getItemsArray:function(d){return d&&d.deep?this._arrayOfAllItems:this._arrayOfTopLevelItems},close:function(d){this.clearOnClose&&
this._loadFinished&&!this._loadInProgress&&(this._arrayOfAllItems=[],this._arrayOfTopLevelItems=[],this._loadFinished=!1,this._itemsByIdentity=null,this._loadInProgress=!1,this._queuedFetches=[])},_getItemsFromLoadedData:function(d){function b(a){return null!==a&&"object"===typeof a&&(!n.isArray(a)||p)&&!n.isFunction(a)&&(a.constructor==Object||n.isArray(a))&&"undefined"===typeof a._reference&&"undefined"===typeof a._type&&"undefined"===typeof a._value&&f.hierarchical}function a(p){f._arrayOfAllItems.push(p);
for(var d in p){var c=p[d];if(c)if(n.isArray(c))for(var k=0;k<c.length;++k){var e=c[k];b(e)&&a(e)}else b(c)&&a(c)}}var p=!1,f=this;this._labelAttr=d.label;var c,k;this._arrayOfAllItems=[];this._arrayOfTopLevelItems=d.items;for(c=0;c<this._arrayOfTopLevelItems.length;++c)k=this._arrayOfTopLevelItems[c],n.isArray(k)&&(p=!0),a(k),k[this._rootItemPropName]=!0;var e={},m;for(c=0;c<this._arrayOfAllItems.length;++c)for(m in k=this._arrayOfAllItems[c],k){if(m!==this._rootItemPropName){var g=k[m];null!==g?
n.isArray(g)||(k[m]=[g]):k[m]=[null]}e[m]=m}for(;e[this._storeRefPropName];)this._storeRefPropName+="_";for(;e[this._itemNumPropName];)this._itemNumPropName+="_";for(;e[this._reverseRefMap];)this._reverseRefMap+="_";if(e=d.identifier)for(this._itemsByIdentity={},this._features["dojo.data.api.Identity"]=e,c=0;c<this._arrayOfAllItems.length;++c)if(k=this._arrayOfAllItems[c],d=k[e],d=d[0],Object.hasOwnProperty.call(this._itemsByIdentity,d)){if(this._jsonFileUrl)throw Error(this.declaredClass+":  The json data as specified by: ["+
this._jsonFileUrl+"] is malformed.  Items within the list have identifier: ["+e+"].  Value collided: ["+d+"]");if(this._jsonData)throw Error(this.declaredClass+":  The json data provided by the creation arguments is malformed.  Items within the list have identifier: ["+e+"].  Value collided: ["+d+"]");}else this._itemsByIdentity[d]=k;else this._features["dojo.data.api.Identity"]=Number;for(c=0;c<this._arrayOfAllItems.length;++c)k=this._arrayOfAllItems[c],k[this._storeRefPropName]=this,k[this._itemNumPropName]=
c;for(c=0;c<this._arrayOfAllItems.length;++c)for(m in k=this._arrayOfAllItems[c],k)for(d=k[m],e=0;e<d.length;++e)if(g=d[e],null!==g&&"object"==typeof g){if("_type"in g&&"_value"in g){var h=g._type,y=this._datatypeMap[h];if(y)if(n.isFunction(y))d[e]=new y(g._value);else if(n.isFunction(y.deserialize))d[e]=y.deserialize(g._value);else throw Error("dojo.data.ItemFileReadStore: Value provided in typeMap was neither a constructor, nor a an object with a deserialize function");else throw Error("dojo.data.ItemFileReadStore: in the typeMap constructor arg, no object class was specified for the datatype '"+
h+"'");}if(g._reference){g=g._reference;if(n.isObject(g))for(h=0;h<this._arrayOfAllItems.length;++h){var y=this._arrayOfAllItems[h],A=!0,C;for(C in g)y[C]!=g[C]&&(A=!1);A&&(d[e]=y)}else d[e]=this._getItemByIdentity(g);this.referenceIntegrity&&(g=d[e],this.isItem(g)&&this._addReferenceToMap(g,k,m))}else this.isItem(g)&&this.referenceIntegrity&&this._addReferenceToMap(g,k,m)}},_addReferenceToMap:function(d,b,a){},getIdentity:function(d){var b=this._features["dojo.data.api.Identity"];return b===Number?
d[this._itemNumPropName]:(d=d[b])?d[0]:null},fetchItemByIdentity:function(d){var b,a;if(this._loadFinished)b=this._getItemByIdentity(d.identity),d.onItem&&(a=d.scope?d.scope:q.global,d.onItem.call(a,b));else{var p=this;this._jsonFileUrl!==this._ccUrl?(q.deprecated(this.declaredClass+": ","To change the url, set the url property of the store, not _jsonFileUrl.  _jsonFileUrl support will be removed in 2.0"),this.url=this._ccUrl=this._jsonFileUrl):this.url!==this._ccUrl&&(this._ccUrl=this._jsonFileUrl=
this.url);null!=this.data&&null==this._jsonData&&(this._jsonData=this.data,this.data=null);this._jsonFileUrl?this._loadInProgress?this._queuedFetches.push({args:d}):(this._loadInProgress=!0,a=e.get({url:p._jsonFileUrl,handleAs:"json-comment-optional",preventCache:this.urlPreventCache,failOk:this.failOk}),a.addCallback(function(a){var f=d.scope?d.scope:q.global;try{p._getItemsFromLoadedData(a),p._loadFinished=!0,p._loadInProgress=!1,b=p._getItemByIdentity(d.identity),d.onItem&&d.onItem.call(f,b),p._handleQueuedFetches()}catch(w){p._loadInProgress=
!1,d.onError&&d.onError.call(f,w)}}),a.addErrback(function(a){p._loadInProgress=!1;d.onError&&d.onError.call(d.scope?d.scope:q.global,a)})):this._jsonData&&(p._getItemsFromLoadedData(p._jsonData),p._jsonData=null,p._loadFinished=!0,b=p._getItemByIdentity(d.identity),d.onItem&&(a=d.scope?d.scope:q.global,d.onItem.call(a,b)))}},_getItemByIdentity:function(d){var b=null;this._itemsByIdentity?Object.hasOwnProperty.call(this._itemsByIdentity,d)&&(b=this._itemsByIdentity[d]):Object.hasOwnProperty.call(this._arrayOfAllItems,
d)&&(b=this._arrayOfAllItems[d]);void 0===b&&(b=null);return b},getIdentityAttributes:function(d){d=this._features["dojo.data.api.Identity"];return d===Number?null:[d]},_forceLoad:function(){var d=this;this._jsonFileUrl!==this._ccUrl?(q.deprecated(this.declaredClass+": ","To change the url, set the url property of the store, not _jsonFileUrl.  _jsonFileUrl support will be removed in 2.0"),this.url=this._ccUrl=this._jsonFileUrl):this.url!==this._ccUrl&&(this._ccUrl=this._jsonFileUrl=this.url);null!=
this.data&&(this._jsonData=this.data,this.data=null);if(this._jsonFileUrl){var b=e.get({url:this._jsonFileUrl,handleAs:"json-comment-optional",preventCache:this.urlPreventCache,failOk:this.failOk,sync:!0});b.addCallback(function(a){try{if(!0!==d._loadInProgress&&!d._loadFinished)d._getItemsFromLoadedData(a),d._loadFinished=!0;else if(d._loadInProgress)throw Error(this.declaredClass+":  Unable to perform a synchronous load, an async load is in progress.");}catch(p){throw p;}});b.addErrback(function(a){throw a;
})}else this._jsonData&&(d._getItemsFromLoadedData(d._jsonData),d._jsonData=null,d._loadFinished=!0)}});n.extend(h,k);return h})},"dojo/data/util/filter":function(){define(["../../_base/lang"],function(q){var n={};q.setObject("dojo.data.util.filter",n);n.patternToRegExp=function(h,g){for(var e="^",m=null,c=0;c<h.length;c++)switch(m=h.charAt(c),m){case "\\":e+=m;c++;e+=h.charAt(c);break;case "*":e+=".*";break;case "?":e+=".";break;case "$":case "^":case "/":case "+":case ".":case "|":case "(":case ")":case "{":case "}":case "[":case "]":e+=
"\\";default:e+=m}e+="$";return g?new RegExp(e,"mi"):new RegExp(e,"m")};return n})},"dojo/data/util/simpleFetch":function(){define(["../../_base/lang","../../_base/kernel","./sorter"],function(q,n,h){var g={};q.setObject("dojo.data.util.simpleFetch",g);g.errorHandler=function(e,m){m.onError&&m.onError.call(m.scope||n.global,e,m)};g.fetchHandler=function(e,m){var c=m.abort||null,k=!1,f=m.start?m.start:0,d=m.count&&Infinity!==m.count?f+m.count:e.length;m.abort=function(){k=!0;c&&c.call(m)};var b=m.scope||
n.global;m.store||(m.store=this);m.onBegin&&m.onBegin.call(b,e.length,m);m.sort&&e.sort(h.createSortFunction(m.sort,this));if(m.onItem)for(var a=f;a<e.length&&a<d;++a){var p=e[a];k||m.onItem.call(b,p,m)}m.onComplete&&!k&&(a=null,m.onItem||(a=e.slice(f,d)),m.onComplete.call(b,a,m))};g.fetch=function(e){e=e||{};e.store||(e.store=this);this._fetchItems(e,q.hitch(this,"fetchHandler"),q.hitch(this,"errorHandler"));return e};return g})},"dojo/data/util/sorter":function(){define(["../../_base/lang"],function(q){var n=
{};q.setObject("dojo.data.util.sorter",n);n.basicComparator=function(h,g){var e=-1;null===h&&(h=void 0);null===g&&(g=void 0);if(h==g)e=0;else if(h>g||null==h)e=1;return e};n.createSortFunction=function(h,g){function e(a,b,d,f){return function(p,c){p=f.getValue(p,a);c=f.getValue(c,a);return b*d(p,c)}}for(var m=[],c,k=g.comparatorMap,f=n.basicComparator,d=0;d<h.length;d++){c=h[d];var b=c.attribute;if(b){c=c.descending?-1:1;var a=f;k&&("string"!==typeof b&&"toString"in b&&(b=b.toString()),a=k[b]||f);
m.push(e(b,c,a,g))}}return function(a,b){for(var p=0;p<m.length;){var d=m[p++](a,b);if(0!==d)return d}return 0}};return n})},"davinci/lang/workbench":function(){define([],function(){return{fileHasUnsavedChanges:"The file '${0}' has unsaved changes. Are you sure you want to close WITHOUT saving?",outlineNotAvailable:"An outline is not available",preferences:"Preferences",noUserPref:"no user preferences...",restoreDefaults:"Restore Defaults"}})},"davinci/repositoryinfo":function(){define({revision:"",
buildtime:"@buildtime@"})},"davinci/Workbench":function(){define("dcl/dcl dojo/_base/lang require ./Runtime ./ui/Dialog ./ve/metadata ./ve/utils/GeomUtils davinci/_WokbenchEditors davinci/_WokbenchMisc davinci/_Workbench_Menu davinci/_Workbench_Palette".split(" "),function(q,n,h,g,e,m,c,k,f,d,b){Function.prototype.bind=Function.prototype.bind||function(a){return dojo.hitch(a,this)};window.setInterval(function(){a.saveState&&a.updateWorkbenchState()},5E3);var a=new (q([k,f,d,b],{declaredClass:"davinci.Workbench",
_XX_last_member:!0,activePerspective:"",actionScope:[],_DEFAULT_PROJECT:"project1",_baseTitle:"Control-Freak ",hideEditorTabs:!0,_editorTabClosing:{},_shadowTabClosing:{},service:null,serviceClass:"XApp_XIDE_Workbench_Service",currentEditor:null,run2:function(){g.subscribe("/davinci/ui/widgetPropertiesChanges",function(){var a=g.currentEditor.visualEditor;a._objectPropertiesChange.apply(a,arguments)})},onResize:function(b){var p=b.explicitOriginalTarget?b.explicitOriginalTarget:b.srcElement;if(("resize"==
b.type||p.id&&-1<p.id.indexOf("dijit_layout__Splitter_")||p.nextSibling&&p.nextSibling.id&&-1<p.nextSibling.id.indexOf("dijit_layout__Splitter_"))&&(b=davinci&&g.currentEditor)&&b.onResize)b.onResize();a._originalOnResize&&a._originalOnResize();a._repositionFocusContainer()},showModal:function(a,b,d,f,c,k){return e.showModal(a,b,d,f,c,k)},showMessage:function(a,b,d,f,c){return e.showMessage(a,b,d,f,c)},showDialog:function(a){return e.showDialog(a)},_loadActionClass:function(a){a&&"string"==typeof a.action&&
h([a.action],function(b){try{if(b)a.action=new b,a.action.item=a;else debugger}catch(v){console.error("action class creation failed : "+a.action)}})},_toggleButton:function(b,d,f,c){b.checked&&(f.forEach(function(a){a!=b&&a.set("checked",!1)}),a._runAction(b.item,d,b.item.id))},_runAction:function(a,b,d){b&&g.currentEditor&&(b=g.currentEditor);if(a.run)a.run();else if(a.action)dojo.isString(a.action)&&this._loadActionClass(a),a.action.run(b);else if(a.method&&b&&b[a.method]instanceof Function)b[a.method](d);
else a.commandID&&g.executeCommand(a.commandID)},createPopup:function(b){var d=b.partID,p=b.domNode,f=b.context,c=b.openCallback,k=this.getActionSets(d),e=k.clonedActionSets,k=k.actionSets;try{if(0<e.length){var m=a._createMenuTree(e,!0);a._initActionsKeys(k,b);var g=a._createMenu(m,f);g&&p&&g.bindDomNode(p);g._widgetCallback=c;g._partID=d;return g}}catch(A){logError(A,"creating popup")}},getActionSets:function(a){var b=[];g.getExtension("davinci.actionSetPartAssociations",function(d){return d.parts.some(function(p){if(p==
a)return b.push(d.targetID),!0})});var d,p=[];b.length&&(d=g.getExtensions("davinci.actionSets",function(a){return b.some(function(b){return b==a.id})}),d.length&&d.forEach(function(a){var b=m.getLibraryActions(a.id);b.length&&(a=n.mixin({},a),a.actions=a.actions.concat(b));p.push(a)}));return{actionSets:d,clonedActionSets:p}},getFocusContainer:function(){var a=document.getElementById("focusContainer");a||(a=dojo.create("div",{"class":"focusContainer",id:"focusContainer"},document.body),davinci.Workbench.focusContainer=
a);return a},_repositionFocusContainer:function(){var a=dojo.byId("editorsStackContainer"),b=this.getFocusContainer();if(a&&b){var d=g.currentEditor;if(a=d&&d.getFocusContainerBounds?d.getFocusContainerBounds():c.getBorderBoxPageCoords(a))b.style.left=a.l+"px",b.style.top=a.t+"px",b.style.width=a.w+"px",b.style.height=a.h+"px",d&&d.getContext&&(b=d.getContext())&&b.updateFocusAll&&b.updateFocusAll()}},_removeFocusContainerChildren:function(){davinci.Workbench.focusContainer&&(davinci.Workbench.focusContainer.innerHTML=
"")}}));dojo.setObject("davinci.Workbench",a);return a})},"davinci/ve/utils/GeomUtils":function(){define(["dojo/_base/window","dojo/dom-geometry","dojo/dom-style","dojo/has","dojo/_base/sniff"],function(q,n,h,g,e){var m=["TABLE","TBODY","TR","TD","TH"];return{getMarginBoxPageCoords:function(c){var k;q.withDoc(c.ownerDocument,function(){var f=this.getBorderBoxPageCoords(c),d=this.getMarginExtents(c);k={l:f.l-d.l,t:f.t-d.t,w:f.w+d.l+d.r,h:f.h+d.t+d.b}}.bind(this));return k},getMarginBoxPageCoordsCached:function(c){c._maqMarginBoxPageCoords||
(c._maqMarginBoxPageCoords=this.getMarginBoxPageCoords(c));return c._maqMarginBoxPageCoords},getBorderBoxPageCoords:function(c){var k;q.withDoc(c.ownerDocument,function(){if(m.indexOf(c.tagName)){var f=c.getBoundingClientRect(),d=this.getScrollLeft(c),b=this.getScrollTop(c);k={l:f.left+d,t:f.top+b,w:f.width,h:f.height}}else{for(var f=c.offsetLeft,d=c.offsetTop,b=c.parentNode,a=c.offsetParent;b&&"BODY"!=b.tagName;){"number"==typeof b.scrollLeft&&"number"==typeof b.scrollTop&&(f-=b.scrollLeft,d-=b.scrollTop);
if(b==a)var p=n.getBorderExtents(a),f=f+(a.offsetLeft+p.l),d=d+(a.offsetTop+p.t),a=a.offsetParent;b=b.parentNode}k={l:f,t:d,w:c.offsetWidth,h:c.offsetHeight}}}.bind(this));return k},getBorderBoxPageCoordsCached:function(c){c._maqBorderBoxPageCoords||(c._maqBorderBoxPageCoords=this.getBorderBoxPageCoords(c));return c._maqBorderBoxPageCoords},getScrollLeft:function(c){c=c&&c.ownerDocument;return g("mozilla")?(c=c&&c.defaultView)?c.pageXOffset:0:(c=c&&c.body)?c.scrollLeft:0},getScrollTop:function(c){c=
c&&c.ownerDocument;return g("mozilla")?(c=c&&c.defaultView)?c.pageYOffset:0:(c=c&&c.body)?c.scrollTop:0},getMarginExtents:function(c,k){var f=k||h.getComputedStyle(c),d;f?(c=parseFloat(f.marginLeft)||0,k=parseFloat(f.marginTop)||0,d=parseFloat(f.marginRight)||0,f=parseFloat(f.marginBottom)||0):c=k=d=f=0;return{l:c,t:k,r:d,b:f,w:c+d,h:k+f}},clearGeomCache:function(c){delete c._maqBorderBoxPageCoords;delete c._maqMarginBoxPageCoords}}})},"davinci/_WokbenchEditors":function(){define(["dcl/dcl","./Runtime",
"dojo/promise/all"],function(q,n,h){return q(null,{closeAllEditors:function(){var g=dijit.byId("editors_container");g&&g.getChildren().forEach(function(e){g.closeChild(e)})},getOpenEditor:function(g){return this.currentEditor?this.currentEditor:null!=g?(g=dijit.byId(filename2id(g.getPath())))?g.editor:null:(g=dijit.byId("editors_container"))&&g.selectedChildWidget&&g.selectedChildWidget.editor?g.selectedChildWidget.editor:null},closeActiveEditor:function(){var g=dijit.byId("editors_container"),e=
dijit.byId("davinci_file_tabs");if(g&&g.selectedChildWidget&&g.selectedChildWidget.editor){var m=selectedChildWidget.id.replace(/^editor/,"shadow");g.closeChild(g.selectedChildWidget);(g=dijit.byId(m))&&e.closeChild(g)}},getAllOpenEditorIds:function(){},_showEditorTopPanes:function(){this._hideShowEditorTopPanes("block")},_hideEditorTopPanes:function(){this._hideShowEditorTopPanes("none")},_hideShowEditorTopPanes:function(g){},_editorTabClosed:function(g){if(!davinci.Workbench._editorTabClosing[g.id]){davinci.Workbench._editorTabClosing[g.id]=
!0;if(g&&g.editor&&g.editor.fileName){var e=g.id.replace(/^editor/,"shadow"),m=dijit.byId("davinci_file_tabs"),c=dijit.byId(e),k=Workbench._state.editors.indexOf(g.editor.fileName);-1!=k&&Workbench._state.editors.splice(k,1);Workbench.saveState=!0;davinci.Workbench._shadowTabClosing[e]||(m.removeChild(c),c.destroyRecursive())}dijit.byId("editors_container").getChildren().length||(Workbench._switchEditor(null),this._expandCollapsePaletteContainers(null),e=dijit.byId("editorsStackContainer"),m=dijit.byId("editorsWelcomePage"),
e&&m&&e.selectChild(m),this._hideEditorTopPanes());delete davinci.Workbench._editorTabClosing[g.id]}},openEditor:function(g,e){try{var m=g.fileName,c;"string"==typeof m?c=m.substr(m.lastIndexOf(".")+1):(c=m.getExtension(),m=m.getPath());var k=dijit.byId(filename2id(m)),f=dijit.byId("editors_container");if(k){f.selectChild(k);var d=k.editor;g.startOffset&&d.select(g)}else{var b=g.editorCreateCallback,a=n.getExtensions("davinci.editor",function(a){"string"==typeof a.extensions&&(a.extensions=a.extensions.split(","));
return dojo.some(a.extensions,function(a){return a.toLowerCase()==c.toLowerCase()})}),p=a[0];1<a.length&&dojo.some(a,function(a){p=a;return a.isDefault});Workbench._createEditor(p,m,g,e).then(function(a){b&&b.call(window,a);g.noSelect||(n.currentEditor=a)},function(a){console.error("Error opening editor for filename: "+m,a)})}}catch(r){console.error("Exception opening editor for filename: "+g&&g.fileName),console.error(r)}},_switchEditor:function(g,e){var m=n.currentEditor;n.currentEditor=g;var c=
davinci.Workbench;c._state&&(c._state.activeEditor=g?g.fileName:null);this._removeFocusContainerChildren();this._showEditorTopPanes();try{dojo.publish("/davinci/ui/editorSelected",[{editor:g,oldEditor:m}])}catch(k){console.error(k)}c._updateTitle(g);setTimeout(function(){g&&g.visualEditor&&g.visualEditor.context&&g.visualEditor.context.isActive()&&g.visualEditor.context.getTopWidgets().forEach(function(c){c.resize&&c.resize()});this._repositionFocusContainer()}.bind(this),1E3);h(this._showViewPromises).then(function(){g&&
g.focus&&g.focus();this._rearrangePalettes(g);this._expandCollapsePaletteContainers(g)}.bind(this));e||(c.saveState=!0)}})})},"davinci/_WokbenchMisc":function(){define("dcl/dcl require ./Runtime ./ui/Dialog davinci/lang/webContent ./ve/metadata dojo/_base/connect xide/manager/ServerActionBase".split(" "),function(q,n,h,g,e,m,c,k){var f=function(b,a){401==a.status||403==a.status?d():!0===b.canceled&&(b=b.ioArgs.url,(new RegExp("(^|\\.\\/|"+document.baseURI+"\\/)cmd\\/")).test(b)&&(0<=b.indexOf("getBluePageInfo")||
h.handleError(a.message)))},d=function(){var b=new g({title:e.sessionTimedOut}),a=dojo.string.substitute(e.sessionTimedOutMsg,{hrefLoc:"welcome"});b.set("content",a);dojo.connect(b,"onCancel",null,function(){window.location.href="welcome"});setTimeout(function(){window.location.href="welcome"},1E4);b.show()};return q(null,{run:function(){var b=davinci.Workbench;console.error("run ");h.run();b._initKeys();b._baseTitle=dojo.doc.title;try{b.initService()}catch(p){debugger}window.maqetta&&maqetta.TopBanner&&
maqetta.TopBanner.setup&&maqetta.TopBanner.setup();h.subscribe("/davinci/resource/resourceChanged",function(a,b){if("deleted"==a&&(a="editor-"+encodeURIComponent(b.getPath().replace(/[\/| |\t]/g,"_")).replace(/%/g,":"),b=editorIdToShadowId(a),a=dijit.byId(a),b=dijit.byId(b),a&&!a._isClosing)){var d=dijit.byId("editors_container"),p=dijit.byId("davinci_file_tabs");d.removeChild(a);a.destroyRecursive();p.removeChild(b);b.destroyRecursive()}});h.subscribe("/dojo/io/error",f);h.subscribe("/davinci/states/state/changed",
function(a){var b=h.currentEditor;"davinci.ve.themeEditor.ThemeEditor"!=b.declaredClass&&"davinci.review.editor.ReviewEditor"!=b.declaredClass&&b.visualEditor.onContentChange.apply(b.visualEditor,arguments)});h.subscribe("/davinci/ui/widgetPropertiesChanges",function(){var a=h.currentEditor.visualEditor;a._objectPropertiesChange.apply(a,arguments)});c.subscribe("/davinci/states/state/changed",function(a){var b=h.currentEditor&&"davinci.ve.PageEditor"==h.currentEditor.declaredClass&&h.currentEditor.visualEditor&&
h.currentEditor.visualEditor.context;if(b){var d,p,b=b?b.getDijit():null,f=n("davinci/ve/widget");a.newState&&!a.newState.indexOf("_show:")&&(d=b.byId(a.newState.substring(6)),d=f.getWidget(d.domNode),(p=d.getHelper())&&p.popup&&p.popup(d));a.oldState&&!a.oldState.indexOf("_show:")&&(d=b.byId(a.oldState.substring(6)),d=f.getWidget(d.domNode),(p=d.getHelper())&&p.tearDown&&p.tearDown(d))}});c.subscribe("/davinci/ui/repositionFocusContainer",function(a){b._repositionFocusContainer()});var a=this.service.serviceObject[this.serviceClass].getInfo().then(function(a){h._initializationInfo=
a;a=a.userInfo;h.isLocalInstall="maqettaUser"==a.userId;h.userName=a.userId;h.userEmail=a.email;return m.init()}).then(function(){var a=h.initialPerspective||"davinci.ui.main";dojo.query(".loading").orphan();b.showPerspective(a);b._updateTitle();initializeWorkbenchState()}).otherwise(function(a){dojo.query("#load_screen").addContent(dojo.string.substitute(e.startupError,[a.message]),"only")});b._lastAutoSave=Date.now();setInterval(dojo.hitch(this,"_autoSave"),3E4);return a},initService:function(){this.service||
(this.service=new k({serviceClass:"XApp_XIDE_Workbench_Service",serviceUrl:"./xcf/xui.php?debug\x3dtrue\x26view\x3drpc",singleton:!1}),this.service.init())},findView:function(b){if(b=dijit.byId(b))return b},location:function(){return h.location()},logoff:function(b){},unload:function(){davinci.Workbench._autoSave()},singleProjectMode:function(){return!0},getProject:function(){var b=davinci.Workbench;return b.getActiveProject()||b._DEFAULT_PROJECT},loadProject:function(b){var a=davinci.Workbench;a.setActiveProject(b);
return a.updateWorkbenchState().then(function(){location.href="cmd/configProject?configOnly\x3dtrue\x26project\x3d"+encodeURIComponent(b)})},getActiveProject:function(){return"project1"},setActiveProject:function(b){var a=davinci.Workbench;a._state||(a._state={});a._state.project=b;a.saveState=!0},setActionScope:function(b,a){davinci.Workbench.actionScope[b]=a},clearWorkbenchState:function(){var b=davinci.Workbench;b._state={};return b.updateWorkbenchState()},updateWorkbenchState:function(){delete davinci.Workbench.saveState;
return null},getDefaultMount:function(){},workbenchStateCustomPropGet:function(b){var a=davinci.Workbench;if("string"==typeof b)return a._state[b]},workbenchStateCustomPropSet:function(b,a){var d=davinci.Workbench;"string"==typeof b&&("undefined"==typeof a?delete d._state[b]:d._state[b]=a,d.saveState=!0)},_autoSave:function(){var b=davinci.Workbench,a=!1;if(this.currentEditor){var d=this.currentEditor;if(d.isReadOnly)console.error("workbench : autosave failed : isReadyOnly or is not dirty");else try{d.save(!0)}catch(r){console.error("Error while autosaving file:"+
r),a=!0}}a||(b._lastAutoSave=Date.now())},_updateTitle:function(b){var a=davinci.Workbench._baseTitle||"";b&&(a+="",b.isDirty&&(a+="*"),a+=b.item.name);dojo.doc.title=a},_initActionsKeys:function(b,a){var d=davinci.Workbench,f=a.keysDomNode||a.domNode,c={},k;dojo.forEach(b,function(a){dojo.forEach(a.actions,function(a){a.keySequence&&(c[a.keySequence]=a,k=!0)})});if(k){var e=a.context;dojo.connect(f,"onkeydown",function(a){a=d._keySequence(a);a=c[a];!a||a.action.shouldShow&&!a.action.shouldShow(e)||
a.action.isEnabled(e)&&d._runAction(a,e)})}},_initKeys:function(){var b=davinci.Workbench,a={all:[]},d=h.getExtensions("davinci.keyBindings");dojo.forEach(d,function(b){var d=b.contextID||"all",p=a[d];p||(p=a[d]=[]);p[b.sequence]=b.commandID});b.keyBindings=a},handleKey:function(b){var a=davinci.Workbench;if(a.keyBindings){b=a._keySequence(b);var d;a.currentContext&&a.keyBindings[a.currentContext]&&(d=a.keyBindings[a.currentContext][b]);d||(d=a.keyBindings.all[b]);if(d)return h.executeCommand(d),
!0}},_keySequence:function(b){var a=[];window.event?(window.event.ctrlKey&&a.push("M1"),window.event.shiftKey&&a.push("M2"),window.event.altKey&&a.push("M3")):((b.ctrlKey||2==b.modifiers||3==b.modifiers||5<b.modifiers)&&a.push("M1"),(b.shiftKey||3<b.modifiers)&&a.push("M2"),b.modifiers?(b.altKey||b.modifiers%2)&&a.push("M3"):b.altKey&&a.push("M3"));var d=String.fromCharCode(b.keyCode);/[A-Z0-9]/.test(d)||(d={46:"del",114:"f3"}[b.keyCode]||"xxxxxxxxxx");d=d.toUpperCase();" "==d&&(d="' '");a.push(d);
return a.join("+")},setupGlobalKeyboardHandler:function(){var b=h.getExtensions("davinci.actionSets");dojo.forEach(b,function(a){"davinci.ui.main"!=a.id&&"davinci.ui.editorActions"!=a.id||dojo.forEach(a.actions,function(a){a.keyBinding&&h.registerKeyBinding(a.keyBinding,a)})})}})})},"davinci/_Workbench_Menu":function(){define("dcl/dcl dojo/_base/declare ./Runtime dijit/Menu dijit/MenuBar dijit/MenuItem dijit/MenuSeparator dijit/PopupMenuBarItem dijit/form/DropDownButton davinci/_WokbenchEditors davinci/_WokbenchMisc".split(" "),
function(q,n,h,g,e,m,c,k,f){var d=n(g,{menuOpened:function(b){},_openMyself:function(b){this.menuOpened(b);var a;try{var d=document.getElementById("menuOverlayDiv");d||(d=dojo.create("div",{id:"menuOverlayDiv",style:"left:0px; top:0px; width:100%; height:100%; position:absolute; z-index:10;"},document.body));if(this.adjustPosition){var f=this.adjustPosition(b);a=dijit.popup.open;dijit.popup.open=function(b){b.x+=f.x;b.y+=f.y;a.call(dijit.popup,b)}}this.onClose=function(){var a=document.getElementById("menuOverlayDiv");
a&&a.parentNode.removeChild(a)}.bind(this);this.inherited(arguments)}finally{a&&(dijit.popup.open=a)}}});return q(null,{declaredClass:"davinci.Workbench_Menu",updateMenubar:function(b,a){console.error("updateMenubar")},_updateMainMenubar:function(b,a){console.error("_updateMainMenubar")},_addItemsToMenubar:function(b,a){console.error("_addItemsToMenubar")},_createMenu:function(b,a){var p,f;b.menus?(p=new g({parentMenu:b}),f=b.menus,b="onOpen"):(p=new d({}),f=b,b="menuOpened");p.domNode.style.display=
"none";p.actionContext=a;this._rebuildMenu(p,f);dojo.connect(p,b,this,function(a){p._widgetCallback&&p._widgetCallback(a);this._rebuildMenu(p,f).focus()});return p},_rebuildMenu:function(b,a){dojo.forEach(b.getChildren(),function(a){b.removeChild(a);a.destroy()});b.focusedChild=null;var d,f;a.forEach(function(a,p){a.menus.length&&(a.isSeparator&&0<p&&(d=!0),a.menus.forEach(function(a){d&&f&&(b.addChild(new c({})),d=!1);f=!0;var p=a.label;a.action&&a.action.getName&&(p=a.action.getName());if(a.separator)a=
davinci.Workbench._createMenu(a),a=new m({label:p,popup:a,id:a.id+"item"}),a.actionContext=b.actionContext,b.addChild(a);else{var k=!0;a.isEnabled&&(k=h.getSelection(),k=(k=k[0]&&k[0].resource)?a.isEnabled(k):!1);if(a.action){if(a.action.shouldShow&&!a.action.shouldShow(b.actionContext,{menu:b}))return;k=a.action.isEnabled&&a.action.isEnabled(b.actionContext)}p={label:p,id:a.id,disabled:!k,onClick:dojo.hitch(this,"_runAction",a,b.actionContext)};a.iconClass&&(p.iconClass=a.iconClass);b.addChild(new m(p))}},
this))},this);return b},_createMenuTree:function(b,a){function d(a,b,d){b=(b||"additions").split("/");var p=f;davinci.Workbench._loadActionClass(a);var c=b[b.length-1];if(1<b.length)for(var k=0,e=b.length-1;k<e;k++){var m;a:{m=0;for(var r=p.length;m<r;m++)for(var g=0,h=p[m].menus.length;g<h;g++)if(b[k]==p[m].menus[g].id){m=p[m].menus[g].menus;break a}m=void 0}m&&(p=m)}k=0;for(e=p.length;k<e;k++)if(p[k].id==c){b=p[k].menus;b.push(a);if(a.separator){d=!1;b=a.menus=[];for(p=0;p<a.separator.length;p+=
2)c=a.separator[p],d="additions"==c,b.push({id:c,isSeparator:a.separator[p+1],menus:[]});d||b.push({id:"additions",isSeparator:!1,menus:[]})}return}d&&f.push({id:c,isSeparator:!1,menus:[a]})}b||(b=h.getExtensions("davinci.actionSets",function(a){return 0==h.getExtensions("davinci.actionSetPartAssociations",function(b){return b.targetID==a.id}).length}));for(var f=[],c=0,k=b.length;c<k;c++){var e=b[c];if(e.visible&&e.menu)for(var m=0,g=e.menu.length;m<g;m++){var u=e.menu[m];if(u.__mainMenu)for(var y=
0;y<u.separator.length;y+=2)f.push({id:u.separator[y],isSeparator:u.separator[y+1],menus:[]});else if(d(u,u.path,a),u.populate instanceof Function){var u=u.populate(),n;for(n in u)d(u[n],u[n].menubarPath)}}}c=0;for(k=b.length;c<k;c++)if(e=b[c],e.visible)for(m=0,g=e.actions.length;m<g;m++)n=e.actions[m],n.menubarPath&&d(n,n.menubarPath,a);return f}})})},"davinci/_Workbench_Palette":function(){define(["dcl/dcl","davinci/Runtime"],function(q,n){var h={};return q(null,{declaredClass:"davinci.Workbench_Menu",
_rearrangePalettes:function(g){var e,m,c;g?((m=n.getExtensions("davinci.editor",function(c){return g?c.id===g.editorID:!1}))&&0<m.length&&(e=m[0].palettePerspective),m=g._rightPaletteExpanded,c=g._leftPaletteExpanded):e=n.initialPerspective||"davinci.ui.main";e&&((e=n.getExtension("davinci.perspective",e))||console.error("---error"),dojo.forEach(e.views,function(c){var f=c.viewID,d=c.position;0>d.indexOf("bottom")&&(d+="-top");if(f=dijit.byId(f)){var b=f.getParent(),d=mainBody.tabs.perspective[d];
b!=d&&(b&&b.removeChild(f),c.hidden||(d.addChild(f),b=d));b&&(c.hidden?b.removeChild(f):c.selected&&(b._maqDontExpandCollapse=!0,b.selectChild(f),delete b._maqDontExpandCollapse))}}));g&&(g.hasOwnProperty("_rightPaletteExpanded")&&(g._rightPaletteExpanded=m),g.hasOwnProperty("_leftPaletteExpanded")&&(g._leftPaletteExpanded=c))},_nearlyCollapsed:function(g){g=dojo.style(g,"width");"string"==typeof g&&(g=parseInt(g));return 91>g},_expandCollapsePaletteContainer:function(g){if(g&&g.domNode&&(g=davinci.Workbench.findPaletteContainerNode(g.domNode),
g.id)){var e=g._maqExpanded,m;this._nearlyCollapsed(g)&&(e=!1,m=91<=h[g.id].expandToSize?h[g.id].expandToSize:h[g.id].initialExpandToSize);e?this.collapsePaletteContainer(g):this.expandPaletteContainer(g,{expandToSize:m})}},_expandCollapsePaletteContainers:function(g,e){var m=dijit.byId("left_mainBody"),c=dijit.byId("right_mainBody");if(g){var k=n.getExtensions("davinci.editor",function(d){return d.id===g.editorID});if(k&&0<k.length){var k=k[0].expandPalettes,f;m&&((f=g&&g.hasOwnProperty("_leftPaletteExpanded")?
g._leftPaletteExpanded:k&&0<=k.indexOf("left"))?this.expandPaletteContainer(m.domNode,e):this.collapsePaletteContainer(m.domNode,e));c&&((f=g&&g.hasOwnProperty("_rightPaletteExpanded")?g._rightPaletteExpanded:k&&0<=k.indexOf("right"))?this.expandPaletteContainer(c.domNode,e):this.collapsePaletteContainer(c.domNode,e))}}else m&&this.collapsePaletteContainer(m.domNode,e),c&&this.collapsePaletteContainer(c.domNode,e)},findPaletteContainerNode:function(g){for(var e;g&&"BODY"!=g.tagName;){if(dojo.hasClass(g,
"davinciPaletteContainer")){e=g;break}g=g.parentNode}return e},collapsePaletteContainer:function(g,e){if((g=davinci.Workbench.findPaletteContainerNode(g))&&g.id){var m=g.id,c=dojo.style(g,"width"),k=dijit.byNode(g),f=dojo.query("[role\x3dtablist]",g);if(k&&0<f.length){var f=dojo.marginBox(f[0]),d=k.getParent();d&&d.resize&&f&&f.w&&(this._nearlyCollapsed(g)||e&&e.dontPreserveWidth||(h[m].expandToSize=c),g.style.width=f.w+"px",d.resize(),k._isCollapsed=!0)}dojo.removeClass(g,"maqPaletteExpanded");g._maqExpanded=
!1;davinci.Workbench._repositionFocusContainer();if(e=n.currentEditor)"left_mainBody"==g.id?e._leftPaletteExpanded=!1:"right_mainBody"==g.id&&(e._rightPaletteExpanded=!1)}},expandPaletteContainer:function(g,e){e=e&&e.expandToSize;if((g=davinci.Workbench.findPaletteContainerNode(g))&&g.id){var m=g.id,c=dijit.byNode(g);e&&(h[m].expandToSize=e);c&&h[m].expandToSize&&(e=c.getParent())&&e.resize&&(g.style.width=h[m].expandToSize+"px",e.resize(),delete c._isCollapsed);dojo.addClass(g,"maqPaletteExpanded");
g._maqExpanded=!0;davinci.Workbench._repositionFocusContainer();if(e=n.currentEditor)"left_mainBody"==g.id?e._leftPaletteExpanded=!0:"right_mainBody"==g.id&&(e._rightPaletteExpanded=!0)}}})})},"davinci/ui/widgets/OutlineTree":function(){define(["dojo/_base/declare"],function(q){return q(null,{})})},"davinci/davinci_":function(){define("dijit/dijit ./Workbench ./ve/palette/HtmlWidgets ./ve/views/StatesView ./ve/views/SwitchingStyleView ./actions/UndoAction ./actions/SelectThemeAction ./actions/SelectLayoutAction ./actions/RedoAction ./actions/DownloadAction ./actions/StickyNoteAction ./actions/SaveAsWidget ./actions/UserNameAction ./actions/LogoutAction ./ve/actions/CopyAction ./ve/actions/CutAction ./ve/actions/DeleteAction ./ve/actions/PasteAction ./ve/actions/DuplicateAction ./ve/actions/EditValueAction ./ve/actions/EditPropertiesAction ./ve/actions/SurroundAction ./ve/actions/SelectParentAction ./ve/actions/SelectAncestorAction ./ve/actions/UnselectAllAction ./ve/actions/ArrangeAction ./ve/actions/MoveToFrontAction ./ve/actions/MoveToBackAction ./ve/actions/MoveForwardAction ./ve/actions/MoveBackwardAction ./ve/actions/OtherAction ./ve/actions/EnableApplicationStates ./ve/actions/ViewDesignAction ./ve/actions/ViewSourceAction ./ve/actions/ViewSourceMenuAction ./ve/actions/ViewSplitHMenuAction ./ve/actions/ViewSplitVMenuAction ./ve/actions/AddState ./ve/actions/RemoveState ./ve/actions/ModifyState ./ve/actions/ManageStates ./ve/actions/NewWidgetsCurrentState ./ve/actions/HighlightBaseWidgets ./ve/actions/ShowInOutline ./ve/PageEditor ./html/ui/HTMLEditor ./html/ui/ImageViewer ./ve/prefs/HTMLEditPreferences dijit/layout/LayoutContainer ./commands/OrderedCompoundCommand ./version".split(" "),
function(){})},"davinci/ve/palette/HtmlWidgets":function(){define(["dojo/_base/declare","davinci/workbench/ViewPart","davinci/ve/palette/Palette"],function(q,n,h){return q("davinci.ve.palette.HtmlWidgets",n,{constructor:function(g,e){dojo.subscribe("/davinci/ui/editorSelected",dojo.hitch(this,this._editorSelected))},_editorSelected:function(g){g.editor&&g.editor.supports("palette")?(this.setContext([g.editor.getContext()]),dojo.removeClass(this.palette.domNode,"dijitHidden")):(this.palette.domNode.scrollTop=
0,dojo.addClass(this.palette.domNode,"dijitHidden"))},postCreate:function(){this.inherited(arguments);this.attachToolbar();this.palette=new h({toolbarDiv:this.toolbarDiv});this.palette.descriptors="dijit,dojox,html,OpenAjax";this.setContent(this.palette);this.palette._loadPalette();dojo.addClass(this.palette.domNode,"dijitHidden")},setContext:function(g){this.palette.setContext(g[0])}})})},"davinci/workbench/ViewPart":function(){define(["dojo/_base/declare","./_ToolbaredContainer","../ve/States",
"../Runtime"],function(q,n,h,g){return q("davinci.workbench.ViewPart",n,{constructor:function(e,m){this.viewExt=e.view;this.subscriptions=[];this.publishing={}},startup:function(){this.inherited(arguments);this.domNode.view=this;this.viewExt.startup&&this.viewExt.startup()},subscribe:function(e,m){this.subscriptions.push(dojo.subscribe(e,this,m))},publish:function(e,m){this.publishing[e]=!0;try{dojo.publish(e,m)}catch(c){console.error(c)}delete this.publishing[e]},destroy:function(){dojo.forEach(this.subscriptions,
dojo.unsubscribe);delete this.subscriptions},_getViewActions:function(){var e=this.toolbarID||this.viewExt.id,m=[];g.getExtensions("davinci.viewActions",function(c){if(e==c.viewContribution.targetID)return m.push(c.viewContribution),!0});return m}})})},"davinci/workbench/_ToolbaredContainer":function(){define(["dojo/_base/declare","dijit/layout/_LayoutWidget","dijit/_Templated"],function(q,n,h){return q("davinci.workbench._ToolbaredContainer",[n,h],{templateString:"\x3cdiv\x3e\x3cdiv dojoAttachPoint\x3d'titleBarDiv' class\x3d'palette_titleBarDiv'\x3e\x3c/div\x3e\x3cdiv dojoAttachPoint\x3d'toolbarDiv' class\x3d'toolbaredContainer_toolbarDiv'\x3e\x3c/div\x3e\x3cdiv dojoAttachPoint\x3d'containerNode'\x3e\x3c/div\x3e\x3c/div\x3e",
gutters:!1,_toolbarCreated:{},layout:function(){var g=[{domNode:this.titleBarDiv,layoutAlign:"top"},{domNode:this.toolbarDiv,layoutAlign:"top"},{domNode:this.containerNode,layoutAlign:"client"}];dijit.layout.layoutChildren(this.domNode,this._contentBox,g);this._containerContentBox=dijit.layout.marginBox2contentBox(this.containerNode,g[2]);var e=dijit.byNode(this.containerNode);e&&e.resize&&e.resize(this._containerContentBox);dojo.marginBox(this.containerNode,g[2])},setContent:function(g){this.mainWidget=
g;g=g.domNode||g;dojo.place(g,this.containerNode,"replace");this.containerNode=g;this.toolbarCreated(this.declaredClass)||this._createToolbar(this.declaredClass);this.titleBarDiv.innerHTML='\x3cspan class\x3d"paletteCloseBox"\x3e\x3c/span\x3e\x3cspan class\x3d"titleBarDivTitle"\x3e'+this.title+"\x3c/span\x3e";g=dojo.query(".paletteCloseBox",this.titleBarDiv);0<g.length&&dojo.connect(g[0],"click",this,function(e){davinci.Workbench.collapsePaletteContainer(e.currentTarget)});this._started&&this.layout()},
removeContent:function(){var g=dojo.doc.createElement("div");dojo.place(g,this.containerNode,"replace");this.containerNode=g;this.mainWidget&&this.mainWidget.destroy();delete this.mainWidget},_getViewActions:function(){},getTopAdditions:function(){},_createToolbar:function(g){var e=require("davinci/Workbench"),m=this.getToolbarDiv(),c=this.getTopAdditions();c&&m.appendChild(c);this.toolbarMenuActionSets&&(c="m"+Date.now(),m=dojo.create("span",{id:c+"_menucontainer","class":"paletteDropdown"},m),m=
dojo.create("span",{id:c+"_menu"},m),e.updateMenubar(m,this.toolbarMenuActionSets));(m=this._getViewActions())&&m.length&&(c=dojo.create("div",{"class":"toolbaredContainer_toolbarDiv"}),c=dojo.create("span",{style:{display:"inline-block"}},c),e=e._createToolBar("toolbarPath",c,m,this._getViewContext()),dojo.style(e.domNode,{display:"inline-block","float":"left"}),this.toolbarCreated(g,e))},_getViewContext:function(){return this},getToolbarDiv:function(){return this.toolbarDiv},toolbarCreated:function(g,
e){1<arguments.length&&(this._toolbarCreated[g]=e);return this._toolbarCreated[g]},attachToolbar:function(){var g=this.toolbarCreated(this.declaredClass),e=this.getToolbarDiv();g&&g.domNode&&e&&(e.innerHTML="",e.appendChild(g.domNode))}})})},"davinci/ve/States":function(){"undefined"===typeof davinci&&(davinci={});davinci.AppStatesDontInitialize=!0;define("dojo/_base/declare dojo/_base/connect dojo/query dojo/dom-class dojo/dom-style dojo/_base/window dijit/registry davinci/Runtime davinci/Workbench davinci/maqetta/AppStates ./utils/GeomUtils ./commands/EventCommand ./commands/StyleCommand davinci/ve/utils/StyleArray davinci/workbench/Preferences davinci/lang/ve".split(" "),
function(q,n,h,g,e,m,c,k,f,d,b,a,p,r,v,w){var x=document;q=q(d,{_update:function(a,b){k.currentEditor&&"davinci.ve.PageEditor"==k.currentEditor.declaredClass&&a&&a._dvWidget&&(a._maqAppStates||!a._maqDeltas)&&this._refresh(a._dvWidget)},_refresh:function(a){var b=a.getParent();b.dijitWidget?this._refresh(b):a&&a.resize&&a.resize()},_updateEvents:function(b,d,p){if(b&&b._dvWidget){b=b._dvWidget;var f=["onclick","onmouseover","onmouseout","onfocus","onblur"],c,k;for(k in f){var e=f[k],m=b&&b.properties&&
b.properties[e];if("string"==typeof m&&0<=m.indexOf("davinci.states.setState")){var r=m,m=m.replace("'"+d+"'","'"+p+"'");m!==r&&(c=c||{},c[e]=m)}}if(d=this.getContext())c=new a(b,c),d.getCommandStack().execute(c)}},normalize:function(a,b,d,p){switch(a){case "style":var f=this.getStatesListCurrent(b);for(a=0;a<f.length;a++)f[a]="Normal";if(b=this.getStyle(b,f,d))for(a=0;a<b.length;a++)b[a][d]&&(p=b[a][d])}return p},normalizeArray:function(a,b,d,p){p=dojo.clone(p);switch(a){case "style":var f=this.getStatesListCurrent(b);
for(a=0;a<f.length;a++)f[a]="Normal";if(b=this.getStyle(b,f,d)){for(a=0;a<b.length;a++){d=b[a];for(var c in d)for(d=p.length-1;0<=d;d--){var f=p[d],k;for(k in f)if(k==c){p.splice(d,1);break}}}p=p.concat(b)}}return p},getEditor:function(){return k.currentEditor},getContext:function(){var a=this.getEditor();return a&&(a.getContext&&a.getContext()||a.context)},getDocument:function(){var a=this.getContext();return a&&a.getDocument&&a.getDocument()},resetState:function(a){if(a){var b=this.getStateContainersForNode(a);
a=this.getFocus(a.ownerDocument.body);for(var d=0;d<b.length;d++){var p=b[d],f=this.getState(p);this.setState(f,p,{focus:a&&p==a.stateContainerNode&&f==a.state,updateWhenCurrent:!0,silent:!1})}}},_updateSrcState:function(a,b){var d=a&&a._dvWidget;if(d){var p=d._srcElement.getAttribute(davinci.states.APPSTATES_ATTRIBUTE),f=d._srcElement.getAttribute(davinci.states.DELTAS_ATTRIBUTE);d&&d._srcElement&&(a=this.serialize(a),a.maqAppStates&&a.maqAppStates.trim(),a.maqAppStates?d._srcElement.addAttribute(davinci.states.APPSTATES_ATTRIBUTE,
a.maqAppStates):d._srcElement.removeAttribute(davinci.states.APPSTATES_ATTRIBUTE),a.maqDeltas&&a.maqDeltas.trim(),a.maqDeltas?d._srcElement.addAttribute(davinci.states.DELTAS_ATTRIBUTE,a.maqDeltas):d._srcElement.removeAttribute(davinci.states.DELTAS_ATTRIBUTE),a=d._srcElement.getAttribute(davinci.states.APPSTATES_ATTRIBUTE),d=d._srcElement.getAttribute(davinci.states.DELTAS_ATTRIBUTE),(p!==a||f!==d)&&(p=this.getEditor())&&p._visualChanged&&p._visualChanged(b))}},_removeStateFromNodeRecursive:function(a,
b){var d=a._dvWidget;if(a&&d&&b)for(this._removeStateFromNode(a,b),a=d.getChildren(),d=0;d<a.length;d++)this._removeStateFromNodeRecursive(a[d].domNode,b)},_removeStateFromNode:function(a,b){if(a&&a._maqDeltas&&a._maqDeltas[b]){delete a._maqDeltas[b];b=!1;for(var d in a._maqDeltas)if("undefined"!==d){b=!0;break}b||delete a._maqDeltas;this._updateSrcState(a)}},removeUnusedStates:function(a){if(a){a=a.getAllWidgets();for(var b=0;b<a.length;b++){var d=a[b].domNode;if("BODY"!==d.tagName&&d&&d._maqDeltas){var p=
this.getAllStatesForNode(d),f;for(f in d._maqDeltas)"undefined"!==f&&0>p.indexOf(f)&&this._removeStateFromNode(d,f)}}}},_getStateIndex:function(a){return a&&"Normal"!=a&&"undefined"!=a?a:"undefined"},getCurrentStateIndex:function(){return this._getStateIndex(this.getState())},getApplyToStateIndex:function(a){var b=this.getState();return this._getStateIndex("current"===a&&b&&"Normal"!=b&&"undefined"!=b?b:void 0)},getEffectiveDisplayValue:function(a,b,d,p){a=b?b.domNode:null;b="none";var f=d||"undefined";
if(p&&"string"==typeof p[f]&&"$MAQ_DELETE_PROPERTY$"!=p[f])b=p[f],c=!0;else if(a){var c=!1;if(a._maqDeltas&&(!p||"$MAQ_DELETE_PROPERTY$"!=p[f])){var k=a._maqDeltas[d]&&a._maqDeltas[d].style;if(k)for(d=0;d<k.length;d++){var m=k[d],r;for(r in m)"display"==r&&(b=m[r],c=!0)}}if(!c){if(p&&"string"==typeof p.undefined)b=p.undefined;else{p=a._maqDeltas&&a._maqDeltas.undefined&&a._maqDeltas.undefined.style;f=!1;if(p)for(d=0;d<p.length;d++)for(r in m=p[d],m)"display"==r&&(b=m[r],f=!0);f||(b=e.get(a,"display"))}f=
"undefined"}if(0==a.offsetLeft&&0==a.offsetTop&&0==a.offsetWidth&&0==a.offsetHeight)b="none";else for(;a&&"BODY"!=a.tagName.toUpperCase();){if(a&&a.ownerDocument&&a.ownerDocument.defaultView&&"none"==e.get(a,"display")){b="none";break}a=a.parentNode}}else b="none";return{effectiveDisplayValue:b,effectiveState:f}},propertyDefinedForAnyCurrentState:function(a,b){var d,p=a._maqDeltas;if(p){a=this.getStateContainersForNode(a);var f=a.length-1;a:for(;0<=f;f--){var c=this.getState(a[f]),k=c&&c!=this.NORMAL?
c:"undefined";if(k=p[k]&&p[k].style)for(var e=0;e<k.length;e++)for(var m=k[e],r=0;r<b.length;r++)if(m.hasOwnProperty(b[r])){d=c;break a}}}return d},_customStateActive:function(a){return a?this.getState(a.rootNode):!1},updateStateIcons:function(a){a&&a.editor&&a.editor==k.currentEditor&&"davinci.ve.PageEditor"==a.editor.declaredClass&&m.withDoc(x,function(){var b=h(".manageStatesButton")[0],d=c.byNode(b),b=h(".manageStatesIcon")[0];d&&b&&(this.manageStatesActive(a)?(g.remove(b,"manageStatesIconDisabled"),
d.set("disabled",!1)):(g.add(b,"manageStatesIconDisabled"),d.set("disabled",!0)));var d=v.getPreferences("davinci.ve.editorPrefs",davinci.Workbench.getProject()).newWidgetsCurrentState,b=h(".newWidgetsCurrentStateButton")[0],p=c.byNode(b),b=h(".newWidgetsCurrentStateIcon")[0];p&&b&&(this.newWidgetsCurrentStateActive(a)?g.remove(b,"newWidgetsCurrentStateIconDisabled"):g.add(b,"newWidgetsCurrentStateIconDisabled"),d?(g.remove(b,"newWidgetsCurrentStateIconOff"),g.add(b,"newWidgetsCurrentStateIconOn"),
p.set("title",w.NewWidgetsCurrentStateTitleCurrentState)):(g.remove(b,"newWidgetsCurrentStateIconOn"),g.add(b,"newWidgetsCurrentStateIconOff"),p.set("title",w.NewWidgetsCurrentStateTitleBackground)))}.bind(this))},manageStatesActive:function(a){return a&&a.getSelection().length},newWidgetsCurrentStateActive:function(a){return this._customStateActive(a)},highlightBaseWidgetsActive:function(a){return this._customStateActive(a)},updateHighlightsBaseStateWidgets:function(a){},initialize:function(){this.subscribed=
!0}});davinci.ve.states=new q;davinci.ve.states.initialize();return davinci.ve.states})},"davinci/maqetta/AppStates":function(){define("dojo/_base/connect dojo/dom-style dojo/dom dojo/_base/html dojo/_base/window dojo/_base/array dojo/parser require dojo/json dojo/_base/lang".split(" "),function(q,n,h,g,e,m,c,k,f,d){n=function(){};n.prototype={NORMAL:"Normal",DELTAS_ATTRIBUTE:"data-maq-deltas",DELTAS_ATTRIBUTE_P6:"dvStates",APPSTATES_ATTRIBUTE:"data-maq-appstates",APPSTATES_ATTRIBUTE_P6:"dvStates",
reImportant:/^(.*)(!\ *important)(.*)/,isStateContainer:function(a){return!(!a||!a._maqAppStates)},getStateContainersForNode:function(a){for(var b=[];a;){a._maqAppStates&&b.splice(0,0,a);if("BODY"==a.tagName)break;a=a.parentNode}return b},getAllStateContainers:function(a){function b(a){a._maqAppStates&&d.push(a);a=f._getChildrenOfNode(a);for(var p=0;p<a.length;p++)b(a[p])}var d=[],f=this;b(a);return d},getStatesArray:function(a,b,d,f){var p=[];if(a)for(a=a.parentNode;a;){if(a._maqAppStates)if(a==
f)p.splice(0,0,{node:a,oldState:b,newState:d});else{var c=a._maqAppStates.states?a._maqAppStates.states.current:void 0;p.splice(0,0,{node:a,oldState:c,newState:c})}if("BODY"==a.tagName)break;a=a.parentNode}return p},findStateContainer:function(a,b){if(a)for(a=a.parentNode;a;){if(a._maqAppStates&&(!b||b==this.NORMAL||a._maqAppStates.states&&0<=a._maqAppStates.states.indexOf(b)))return a;if("BODY"==a.tagName)break;a=a.parentNode}},getAllStatesForNode:function(a){var b=[this.NORMAL];if(a)for(a=a.parentNode;a;){if(a._maqAppStates&&
a._maqAppStates.states)for(var d=a._maqAppStates.states?a._maqAppStates.states:[],f=0;f<d.length;f++)b.push(d[f]);if("BODY"==a.tagName)break;a=a.parentNode}return b},getStatesListCurrent:function(a){var b=[];if(a)for(a=a.parentNode;a;){a._maqAppStates&&b.splice(0,0,a._maqAppStates.current);if("BODY"==a.tagName)break;a=a.parentNode}return b},getAllCurrentStates:function(a){a=this.getAllStateContainers(a);for(var b=[],d=0;d<a.length;d++){var f=a[d],c=this.getState(f);b.push({stateContainerNode:f,state:c})}return b},
getStates:function(a){var b=a&&a._maqAppStates;a=["Normal"];if(b)for(var b=b.states?b.states:[],d=0;d<b.length;d++){var f=b[d];"Normal"!=f&&a.push(f)}return a},_getSCNodeFromElemOrEvent:function(a,b){b&&b.tagName&&b.nodeName?b=b._maqAppStates?b:this.findStateContainer(b,a):b&&b.target&&b.currentTarget?(b=b.currentTarget,b._maqAppStates||(b=this.findStateContainer(b,a))):b=this.getContainer();return b},_updateSrcState:function(a){},hasState:function(a,b){return!!(a&&a._maqAppStates&&a._maqAppStates.states&&
0<=a._maqAppStates.states.indexOf(b))},getState:function(a){return a&&a._maqAppStates&&a._maqAppStates.current},setState:function(a,b,d){var p=d?d.updateWhenCurrent:!1,f=d?d.silent:!1,c=d?d.focus:!1;(b=this._getSCNodeFromElemOrEvent(a,b))&&b._maqAppStates&&(p||b._maqAppStates.current!=a)&&(p=b._maqAppStates.current,this.isNormalState(a)?(b._maqAppStates.hasOwnProperty("current")&&delete b._maqAppStates.current,a=void 0):b._maqAppStates.current=a,c&&this._setFocus(a,b),d&&d.hasOwnProperty("initial")&&
(d.initial?b._maqAppStates.initial=a:b._maqAppStates.initial&&delete b._maqAppStates.initial),f||q.publish("/maqetta/appstates/state/changed",[{node:b,newState:a,oldState:p,stateContainerNode:b}]),this._updateSrcState(b,!a))},getInitial:function(a){return a&&a._maqAppStates&&a._maqAppStates.initial},getFocus:function(a){if(!a)return null;a=this.getAllStateContainers(a);for(var b=0;b<a.length;b++){var d=a[b]._maqAppStates;if(d&&d.hasOwnProperty("focus"))return{stateContainerNode:a[b],state:d.focus}}return null},
_setFocus:function(a,b){if(b&&b._maqAppStates){var d=b.ownerDocument&&b.ownerDocument.body;if(d){var f=this.getFocus(d);if(!f||f.stateContainerNode!=b||f.state!=a){for(var f=this.getAllStateContainers(d),p=0;p<f.length;p++)(d=f[p]._maqAppStates)&&delete d.focus;b._maqAppStates.focus=a}}}},isNormalState:function(a){0==arguments.length&&(a=this.getState());return!a||a==this.NORMAL},_styleArrayMixin:function(a,b){if(b){for(var d=0;d<b.length;d++){var f=b[d],p;for(p in f)for(f=a.length-1;0<=f;f--)a[f].hasOwnProperty(p)&&
a.splice(f,1)}for(d=0;d<b.length;d++)a.push(b[d])}},getStyle:function(a,b,d){for(var f,p=[],c=0;c<b.length;c++)if(f=b[c],f=a&&a._maqDeltas&&a._maqDeltas[f]&&a._maqDeltas[f].style,this._styleArrayMixin(p,f),2<arguments.length&&p)for(f=p.length-1;0<=f;f--){var k=p[f],e;for(e in k)if(e!=d){p.splice(f,1);break}}return p},hasStyle:function(a,b,d){if(a&&d)if(a._maqDeltas&&a._maqDeltas[b]&&a._maqDeltas[b].style)for(a=a._maqDeltas[b].style,b=0;b<a[b];b++){if(a[b].hasProperty(d))return!0}else return!1},setStyle:function(a,
b,d,f){if(a&&d){a._maqDeltas=a._maqDeltas||{};a._maqDeltas[b]=a._maqDeltas[b]||{};a._maqDeltas[b].style=a._maqDeltas[b].style||[];var p=a._maqDeltas[b].style;if(d)for(var c=0;c<d.length;c++){var k=d[c],e;for(e in k)for(k=p.length-1;0<=k;k--){var m=p[k],g;for(g in m)if(e==g){p.splice(k,1);break}}}var r;if(d)for(k=0;k<d.length;k++)for(var h in d[k])c=d[k][h],"undefined"!=typeof c&&null!==c&&("undefined"==typeof r&&(r=[]),e={},e[h]=this._getFormattedValue(h,c),r.push(e));a._maqDeltas[b].style=p&&r?p.concat(r):
p?p:r?r:void 0;f||q.publish("/davinci/states/state/style/changed",[{node:a,state:b,style:d}]);this._updateSrcState(a)}},_convertStyleName:function(a){if(0<=a.indexOf("-")){var b=a.split("-");a=b[0];for(var d=1;d<b.length;d++){var f=b[d];a+=f.charAt(0).toUpperCase()+f.substring(1)}}return a},_DYNAMIC_PROPERTIES:{width:1,height:1,top:1,right:1,bottom:1,left:1},_getFormattedValue:function(a,b){if(a in this._DYNAMIC_PROPERTIES){if("string"!=typeof b)return b+"px";a=k("dojo/_base/lang").trim(b);/^[-+]?[0-9]*\.?[0-9]+$/.test(a)&&
(b=a+"px")}return b},_getStatesListUsingPropName:function(a,b){var d=[];if(a)for(var f=0;f<a.length;f++)d.push(a[f][b]);return d},_resetAndCacheNormalStyle:function(a,b){if(a&&b)for(var f=0;f<b.length;f++){var p=this._getStatesListUsingPropName(b,"oldState"),c=this.getStyle(a,p),p=this._getStatesListUsingPropName(b),p=this.getStyle(a,p);if(c)for(var k=0;k<c.length;k++){var e=c[k],m;for(m in e)e=this._convertStyleName(m),a.style[e]=""}if(p)for(c=0;c<p.length;c++){var k=p[c],g;for(g in k){var e=this._convertStyleName(g),
h=a.style,n=this._getFormattedValue(g,k[g])+"",C=n?n.match(this.reImportant):null;C?(n=C[1]+C[3],n=d.trim(n),h.setProperty?h.setProperty(g,n,"important"):a.style[e]=n):a.style[e]=n}}}},_update:function(a,b){if(a&&a._maqDeltas){var f=this._getStatesListUsingPropName(b,"newState"),f=this.getStyle(a,f);this._resetAndCacheNormalStyle(a,b);if(f)for(b=0;b<f.length;b++){var p=f[b],c;for(c in p){var k=this._convertStyleName(c),e=p[c]+"",m=e?e.match(this.reImportant):null;m?(e=m[1]+m[3],e=d.trim(e),p.setProperty?
p.setProperty(c,e,"important"):a.style[k]=e):a.style[k]=e}}}},isContainer:function(a){var b=!1;if(a){var d=this.getDocument();if(a===(d&&d.body)||"BODY"==a.tagName)b=!0}return b},getContainer:function(){return document.body},add:function(a,b,d){a&&!this.hasState(a,b)&&(d=d&&d.index,a._maqAppStates=a._maqAppStates||{},a._maqAppStates.states=a._maqAppStates.states||[],"number"==typeof d&&0<=d?a._maqAppStates.states.splice(d,0,b):a._maqAppStates.states.push(b),q.publish("/davinci/states/state/added",
[{node:a,state:b}]),this._updateSrcState(a))},remove:function(a,b){if(a&&a._maqAppStates&&a._maqAppStates.states&&this.hasState(a,b)){var d=a._maqAppStates.states.indexOf(b);if(!(0>d)){var f=this.getState(a),p=this.getFocus(a.ownerDocument.body);a._maqAppStates.states.splice(d,1);d={};p&&p.stateContainerNode==a&&p.state==b&&(d.focus=!0,d.updateWhenCurrent=!0);b==f&&this.setState(void 0,a,d);q.publish("/davinci/states/state/removed",[{node:a,state:b}]);this._updateSrcState(a)}}},rename:function(a,
b){if(!b)return!1;var d=b.oldName;b=b.newName;if(!(a&&a._maqAppStates&&a._maqAppStates.states&&a._maqAppStates.states.length))return!1;var f=a._maqAppStates.states;if(0>f.indexOf(d)||0<=f.indexOf(b))return!1;f.splice(f.indexOf(d),1,b);a._maqAppStates.focus===d&&(a._maqAppStates.focus=b);a._maqAppStates.current===d&&(a._maqAppStates.current=b);f=[a];this.getState(a);for(f=f.concat(this._getChildrenOfNode(a));f.length;){var p=f.shift();p._maqDeltas&&p._maqDeltas[d]&&(p._maqDeltas[b]=p._maqDeltas[d],
delete p._maqDeltas[d]);var f=f.concat(this._getChildrenOfNode(p)),c=this.getStatesArray(p,null,b,a);this._update(p,c);this._updateSrcState(p)}q.publish("/davinci/states/state/renamed",[{node:p,oldName:d,newName:b,stateContainerNode:p}]);return!0},_isEmpty:function(a){for(var b in a)if(a.hasOwnProperty(b))return!1;return!0},stringifyWithQuotes:function(a){str=f.stringify(a);str=str.replace(/(\\)?'/g,function(a,b){return b?a:"\\'"});return str=str.replace(/"/g,"'")},serialize:function(a){var b=this,
d=function(d){var f=null;a[d]&&(d=k("dojo/_base/lang").clone(a[d]),delete d.undefined,b._isEmpty(d)||(f=this.stringifyWithQuotes(d)));return f}.bind(this),f={};if(!a)return f;var c=d("_maqAppStates");"string"==typeof c&&(f.maqAppStates=c);d=d("_maqDeltas");"string"==typeof d&&(f.maqDeltas=d);return f},deserialize:function(a,b){"string"==typeof a&&(a=a.replace(/(\\)?'/g,function(a,b){return b?"'":'"'}),a=f.parse(a),this._migrate_m4_m5(a),a=this._migrate_m6_m7(a,b&&b.isBody));return a},_migrate_m4_m5:function(a){for(var b in a){var d=
a[b];if(d){var f=d.style;if(f&&!f.length){var c=[],k;for(k in f){var e={};e[k]=f[k];c.push(e)}d.style=c}}}},_migrate_m6_m7:function(a,b){if(!a||a.states)return a;if(b){b=[];for(var d in a)"current"!=d&&b.push(d);if(0<b.length)return{states:b}}else return delete a.current,a},store:function(a,b,d){if(a){this.clear(a);var f="BODY"==a.tagName;b&&(a._maqAppStates=this.deserialize(b,{isBody:f}));d&&(a._maqDeltas=this.deserialize(d,{isBody:f}));q.publish("/davinci/states/stored",[])}},retrieve:function(a){if(a){var b=
a.getAttribute(this.APPSTATES_ATTRIBUTE);b||"BODY"!==a.tagName||(b=a.getAttribute(this.APPSTATES_ATTRIBUTE_P6));var d=a.getAttribute(this.DELTAS_ATTRIBUTE);d||"BODY"===a.tagName||(d=a.getAttribute(this.DELTAS_ATTRIBUTE_P6));return{maqAppStates:b,maqDeltas:d}}},clear:function(a){a&&(a._maqAppStates&&delete a._maqAppStates,a._maqDeltas&&delete a._maqDeltas)},_parseStyleValues:function(a){var b=[];a&&m.forEach(a.split(";"),function(a){var d=a.indexOf(":");if(0<d){var f=a.substring(0,d).trim();a=a.substring(d+
1).trim();d={};d[f]=a;b.push(d)}});return b},transferElementStyle:function(a,b){a&&(a=a._maqDeltas,b=this._parseStyleValues(b),a.undefined||(a.undefined={}),a.undefined.style=b)},getDocument:function(){return document},shouldInitialize:function(){return!davinci.AppStatesDontInitialize},_getChildrenOfNode:function(a){for(var b=[],d=0;d<a.childNodes.length;d++){var f=a.childNodes[d];1===f.nodeType&&b.push(f)}return b},initialize:function(){this.subscribed||(q.subscribe("/maqetta/appstates/state/changed",
this,function(a){if(!a.editorClass)for(var b=davinci.states._getChildrenOfNode(a.node);b.length;){var d=b.shift();davinci.states.isContainer(d)||(b=b.concat(davinci.states._getChildrenOfNode(d)));var f=this.getStatesArray(d,a.oldState,a.newState,a.stateContainerNode);davinci.states._update(d,f)}}),this.subscribed=!0)}};"undefined"===typeof davinci&&(davinci={});var b=davinci.states=new n;(function(){b.initialize();b.shouldInitialize()&&"undefined"!=typeof k&&k(["dojo/_base/lang","dojo/query","dojo/aspect"],
function(a,d,f){var p=0,m=!1;a=function(a){m||(f.around(a,"parse",function(a){var d={};return function(f,c){var p;p=(p=!c&&f&&f.rootNode?f.rootNode:f)?g.byId(p):e.body();r(d);p=a.apply(this,arguments);var k=b.getDocument(),m,h,v,B,w;for(w in d){var x;if(x="body"==w?k.body:k.querySelectorAll("."+w)[0]){var n="BODY"==x.tagName;m=h=v=B=null;n?m=d[w]:(m=d[w].maqAppStates,h=d[w].maqDeltas);m&&(v=b.deserialize(m,{isBody:n}));h&&(B=b.deserialize(h,{isBody:n}));v&&(v.initial?v.current=v.initial:(v.focus&&
delete v.focus,delete v.current));b.store(x,v,B);h&&davinci.states.transferElementStyle(x,d[w].style)}}w=b.getAllStateContainers(k.body);for(k=0;k<w.length;k++)m=w[k],m._maqAppStates&&"string"==typeof m._maqAppStates.current&&b.setState(m._maqAppStates.current,m,{updateWhenCurrent:!0,focus:m._maqAppStates.focus});return p}}),dojo.parser.parse=a.parse,m=!0)};try{var h=k("dojox/mobile/parser");a.apply(h)}catch(z){}h||a.call(null,c);var r=function(a){var f=b.getDocument();if(!f.body._maqAlreadyPreserved){var c=
davinci.states.retrieve(f.body);c&&c.maqAppStates&&(a.body=c.maqAppStates);f.body._maqAlreadyPreserved=!0}d("*",f).forEach(function(d){var f=d.getAttribute("class");f||(f="");if(!d._maqAlreadyPreserved&&0>f.indexOf("maqTempClass")){d._maqAlreadyPreserved=!0;var c=b.retrieve(d);if("BODY"!=d.tagName&&c&&(c.maqAppStates||c.maqDeltas)){var k="maqTempClass"+p;d.setAttribute("class",f+" "+k);p++;a[k]={};c.maqAppStates&&(a[k].maqAppStates=c.maqAppStates);c.maqDeltas&&(a[k].maqDeltas=c.maqDeltas);d.style?
a[k].style=d.style.cssText:console.error("States.js _preserveStates. No value for node.style.")}}})}})})();davinci.Workbench||"undefined"==typeof dijit||q.subscribe("/maqetta/appstates/state/changed",function(a){var b=a&&a.node&&a.node.ownerDocument&&a.node.ownerDocument.defaultView&&a.node.ownerDocument.defaultView.dijit.byId;b&&(a.newState&&!a.newState.indexOf("_show:")?(a=b(a.newState.substring(6)))&&a.show&&a.show():a.oldState&&!a.oldState.indexOf("_show:")&&(a=b(a.oldState.substring(6)))&&a.hide&&
a.hide())});return n})},"davinci/ve/commands/EventCommand":function(){define(["dojo/_base/declare","davinci/ve/widget"],function(q,n){return q("davinci.ve.commands.EventCommand",null,{name:"EventCommand",constructor:function(h,g){this._oldId=h?h.id:void 0;this._properties=g||{}},setContext:function(h){this._context=h},execute:function(){if(this._oldId&&this._properties){var h=n.byId(this._oldId);this._oldProps=h.properties||{};h.setProperties(this._properties,!0);if(h.isHtmlWidget){var g=h.domNode,
e;for(e in this._properties)this._properties[e]||g.removeAttribute(e)}this._newId=this._oldId;dojo.publish("/davinci/ui/widgetPropertiesChanged",[[h]])}},undo:function(){if(this._newId){var h=n.byId(this._newId),g=h.domNode,e=h._srcElement,m;for(m in this._properties)this._oldProps[m]||(g.removeAttribute(m),e.removeAttribute(m));h.setProperties(this._oldProps);dojo.publish("/davinci/ui/widgetPropertiesChanged",[[h]])}}})})},"davinci/ve/widget":function(){define("davinci/html/HTMLElement ../Runtime ./metadata dojo/Deferred dojo/_base/lang ./DijitWidget ./GenericWidget ./DeliteWidget ./HTMLWidget ./ObjectWidget dojo/window".split(" "),
function(q,n,h,g,e,m,c,k,f,d,b){var a={},p=function(a,b,d){for(var f=0;f<d.children.length;f++){var c=b.childNodes[f],k=d.children[f];c&&1==c.nodeType&&"HTMLElement"==k.elementType&&(c.id=a.getUniqueID(k),p(a,c,k))}},r={_dojo:function(a){a=(a=a?a.ownerDocument||a:dojo.doc)||dojo.doc;return b.get(a).dojo||dojo},_dijit:function(a){return b.get(a?a.ownerDocument||a:dojo.doc).dijit||dijit},parseStyleValues:function(a){var b=[];a&&dojo.forEach(a.split(";"),function(a){var d=a.indexOf(":");if(0<d){var f=
a.substring(0,d).trim();a=a.substring(d+1).trim();d={};d[f]=a;b.push(d)}});return b},retrieveStyleProperty:function(a,b,d){var f=d;a&&dojo.some(a,function(a){if(a.hasOwnProperty(b))return f=a[b],!0});return f},setStyleProperty:function(a,b,d){var f=!1;a&&dojo.some(a,function(a){if(a.hasOwnProperty(b))return a[b]=d,f=!0});if(!f){var c={};c[b]=d;a.push(c)}},getStyleString:function(a){var b="";dojo.forEach(a,function(a){for(var d in a)a[d]&&(b=b+d+":"+a[d]+";")});return b},getEnclosingWidget:function(a){var b=
r.getEnclosingWidgetForRichText(a);if(b)return b;for(;a;){if(a._dvWidget)return a._dvWidget;a=a.parentNode||a.domNode&&a.domNode.parentNode}},getEnclosingWidgetForRichText:function(a){if(a&&a._dvWidget)return"html.stickynote"===a._dvWidget.type||"html.richtext"===a._dvWidget.type?a._dvWidget:a.parentNode?r.getEnclosingWidgetForRichText(a.parentNode):null},getUniqueObjectId:function(a,b){if(a){a=a.substring((a.lastIndexOf("/")||a.lastIndexOf("."))+1);var d=1,f=a+"_"+d++;for(b=r._dojo(b);b.getObject(f)||
b.byId(f);)f=a+"_"+d++;return f}},_remove_prefix:function(a){if(a){for(var b=a,d="dijit/form/ dijit/layout/ dijit/ dojox/mobile/ html. html/ OpenAjax. OpenAjax/".split(" "),f=0;f<d.length;f++)if(0==a.indexOf(d[f])){b=a.substr(d[f].length);"html."==d[f]&&(b="\x26lt;"+b+"\x26gt;");break}return b}return""},_getWidgetNameText:function(a){return"\x3cspan class\x3d'propertiesTitleWidgetName'\x3e"+this._remove_prefix(a)+"\x3c/span\x3e"},_getWidgetClassText:function(a,b){var d="\x3cspan class\x3d'propertiesTitleClassName'\x3e";
a&&(d+="#"+a);b&&(d+="."+b.replace(/\s+/g,"."));return d+"\x3c/span\x3e"},getLabelForNode:function(a){var b=a.getAttribute("data-dojo-type")||a.getAttribute("dojoType");b||(b=a.tagName.toLowerCase());b=b.replace(/\./g,"/");b=this._getWidgetNameText(b);a.id&&(b+=this._getWidgetClassText(a.id));return b},getLabel:function(a){var b=this._getWidgetNameText(a.type),d,f=r.getWidgetHelper(a.type);f&&f.getWidgetText&&(d=f.getWidgetText(a));f&&f.getWidgetNameText&&(b=f.getWidgetNameText(a));var c=a.domNode;
if(!a.type)return"unknown type";switch(a.type.replace(/\//g,".")){case "dijit.form.ComboBox":case "dijit.form.Button":d=a.attr("label");break;case "dijit.layout.ContentPane":d=a.attr("title");break;case "html.label":d=c.innerHTML;break;case "html.img":d=c.alt,d||(d=c.title)}d&&(b+="\x3cspan class\x3d'propertiesTitleWidgetText'\x3e"+d+"\x3c/span\x3e ");f&&f.getWidgetDescriptor&&(b+=" \x3cspan class\x3d'propertiesTitleWidgetDescriptor'\x3e"+f.getWidgetDescriptor(a)+"\x3c/span\x3e ");var p=a._srcElement;
d=a.getId();p=(p=p&&p.getAttribute("class"))&&p.trim();if(d||p)b=f&&f._getWidgetClassText?b+f._getWidgetClassText(d,p):b+this._getWidgetClassText(d,p);f&&f.getWidgetTextExtra&&(b+=f.getWidgetTextExtra(a));"html.img"==a.type&&(b+="\x3cspan\x3e"+c.src.substr(c.src.lastIndexOf("/")+1)+"\x3c/span\x3e");return b},byId:function(a,b){if(b=dojo.byId(a,b&&b.body?b:void 0)){if(b._dvWidget)return b._dvWidget;if((b=r.getEnclosingWidget(b))&&b.id==a)return b}if(n.currentEditor&&n.currentEditor.currentEditor&&
n.currentEditor.currentEditor.context)return n.currentEditor.currentEditor.context.widgetHash[a]},byNode:function(a){if(a._dvWidget)return a._dvWidget},createWidget:function(a,g,n){if(a&&a.type){var v=dojo.mixin({},a),w=!1;"xblox/RunScript"===v.type&&"xblox/CSSState"===v.type&&(w=!0,delete a.properties.style);v.properties&&(v.properties=dojo.mixin({},a.properties));var x=v.type,y,A,C=h.query(x);if(C){v.properties&&("content"in v.properties&&!v.properties.content&&delete v.properties.content,v.properties.theme&&
(A=v.properties.theme.themeName));n&&n.metadata&&n.metadata.childOverride&&e.mixin(v.properties,n.metadata.childOverride);a=h.queryDescriptor(x,"widgetClass");!a&&g&&g.widgetClass&&(a=g.widgetClass);if(!0===C.delite||"xblox/RunScript"===x||"xblox/CSSState"===x||"xblox/Script"===x||"xblox/StyleSate"===x)a="delite";"delite"==a?y=k:"object"==a?(y=d,C.attributes=C.attributes||{},C.attributes.dojoType=x):"html"==a?y=f:"dijit"==a?y=m:null==y&&(y=c);if(y){a=C.content.trim().replace(/\s+/g," ");b.get(dojo.doc);
var F=b.get(dojo.doc).dojo._toDom(a);F.fromWidgetData&&F.fromWidgetData(v);if(11===F.nodeType){n=0;var E=null;a=F.childNodes;for(var D=0;D<a.length&&!(8!==a[D].nodeType&&(n++,E=a[D],1<n));D++);if(1<n){console.error("ERROR: complex widget content not supported");return}F=E}if(!F)return null;var H=new q(F.tagName.toLowerCase());if(F.hasAttributes())for(a=F.attributes,n=a.length-1;0<=n;--n)w&&"style"===a[n].name||H.addAttribute(a[n].name,a[n].value);F.innerHTML&&H.addText(F.innerHTML);w=h.queryDescriptor(x,
"requiresId");a=h.queryDescriptor(x,"name");w=w&&a.match(/^[A-Za-z]\w*$/)?a:void 0;F.id=v.properties&&v.properties.id||(v.context?v.context.getUniqueID(H,w):"");if(a=v.children)dojo.isString(a)?(F.innerHTML=a,F.nodeName.toLowerCase(),w=H._getAttribute("id"),H.addText(a),a=H.getText(v.context),H.children=[],H.setText(a),w&&H.addAttribute(w.name,w.value,w.noPersist),p(v.context,F,H)):dojo.forEach(a,function(a){if(a)if(dojo.isString(a))7<a.length&&"\x3c!--"==a.substring(0,4)&&"--\x3e"==a.substring(a.length-
3)?(F.appendChild(dojo.doc.createComment(a.substring(4,a.length-3))),H.addComment(a.substring(4,a.length-3))):(F.appendChild(dojo.doc.createTextNode(a)),H.addText(a));else if(a.context=v.context,a=r.createWidget(a))F.appendChild(a.domNode),H.addChild(a._srcElement)});(w=r.getWidgetHelper(x))&&w.preProcessData&&(v=w.preProcessData(v));w={};a={};for(var O in v.properties)n=v.properties[O],null!=n&&("on"==O.substr(0,2).toLowerCase()||"a"==H.tag.toLowerCase()&&"href"==O.toLowerCase()?a[O]=n:w[O]=n);C=
new y(w,F,x,C,H,x);C._srcElement=H;C.chart&&v.properties&&v.properties.theme&&(C.chart.theme.themeName=A);v.scripts&&(C.scripts=v.scripts);v.context&&(C._edit_context=v.context);v.properties&&(C.setProperties(w),C.setProperties(a,!0));if(v.maqAppStates||v.maqDeltas)v.maqAppStates&&(C.domNode._maqAppStates=dojo.clone(v.maqAppStates)),v.maqDeltas&&(C.domNode._maqDeltas=dojo.clone(v.maqDeltas)),A=davinci.states.serialize(C.domNode),A.maqAppStates&&C._srcElement.addAttribute(davinci.states.APPSTATES_ATTRIBUTE,
A.maqAppStates),A.maqDeltas&&C._srcElement.addAttribute(davinci.states.DELTAS_ATTRIBUTE,A.maqDeltas);(w=r.getWidgetHelper(x))&&w.cleanSrcElement&&w.cleanSrcElement(C._srcElement,g);w&&w.postCreateWidget&&w.postCreateWidget(C,g);return C}}else console.error("cant get widget meta data : ",a)}},_createSrcElement:function(a){var b=new q(a.tagName.toLowerCase());if(a.hasAttributes()){a=a.attributes;for(var d=a.length-1;0<=d;--d)b.addAttribute(a[d].name,a[d].value)}return b},getWidgetHelper:function(b){return a[b]},
requireWidgetHelper:function(b){var d=new g;h.getHelper(b,"helper").then(function(f){f?d.resolve(a[b]=new f):d.resolve()});return d},getWidget:function(a,b){if(a&&1==a.nodeType){var p=r.byNode(a);if(!p){if(a){for(var p={properties:{}},e=0;e<a.attributes.length;e++){var g=a.attributes[e];if(g.specified&&g.nodeValue){var h=g.nodeName.toLowerCase();if("id"!=h&&"widgetid"!=h&&"style"!=h&&"_"!=h.charAt(0)){if((g=g.nodeValue)&&"class"==h&&(g=g.replace("HtmlWidget","").trim(),!g))continue;p.properties[h]=
g}}}"script"==a.tagName.toLowerCase()&&(p.children=a.innerHTML||void 0)}else p=void 0;if(p.properties.is||null!=a.render||-1!==a.tagName.indexOf("D-"))return p=new k(p,a);e=a.getAttribute("dvwidget");if(a.hasAttribute("widgetid")||a.hasAttribute("data-dojo-type")||a.hasAttribute("dojotype"))b=r._dijit(a).byNode(a),e=a.getAttribute("data-dojo-type")||a.getAttribute("dojotype"),p=b?new m(p,a,b,null,null,e):new d(p,a);else if(e)p=new c(p,a,e);else{if("svg"==a.nodeName)return;p=new f(p,a,b)}}return p}}};
dojo.setObject("davinci.ve.widget",r);return r})},"davinci/html/HTMLElement":function(){define(["dojo/_base/declare","davinci/html/HTMLItem","davinci/html/HTMLText","davinci/html/HTMLComment","davinci/html/HTMLAttribute"],function(q,n,h,g,e){return q("davinci.html.HTMLElement",n,{constructor:function(e){this.elementType="HTMLElement";this.attributes=[];this.tag=e||"";this._fmChildIndent=this._fmChildLine=0},add:function(e){this.statements||(this.statements=[]);this.statements.push(e);this.onChange()},
getText:function(e){e=e||{};var c;e.indent+=2;c="\x3c"+this.tag;for(var k=0;k<this.attributes.length;k++){var f=this.attributes[k].getText(e);0<f.length&&(c=c+" "+f)}if(this.noEndTag)c+="/\x3e";else{c=c+"\x3e"+this._addWS(this._fmChildLine,this._fmChildIndent);if(this.statements)for(k=0;k<this.statements.length;k++)c+=this.statements[k].printStatement(e,this.statements[k]);else if(this.script)c+=this.script;else if(0<this.children.length)for(f="style"==this.tag,k=0;k<this.children.length;k++)if(c+=
this.children[k].getText(e),f){var d=this._fmChildLine,b=this._fmChildIndent||0;k+1==this.children.length&&(d=this._fmLine,b=this._fmIndent);c+=this._addWS(d,b)}c=c+"\x3c/"+this.tag+"\x3e"}e.indent-=2;return c+=this._addWS(this._fmLine,this._fmIndent)},_formatModel:function(e,c,k){function f(a,d,f){b+=1+a;d?(d._fmChildLine=1,d._fmChildIndent=k.indent):(f._fmLine=1,f._fmIndent=k.indent)}function d(a,c){a.startOffset=b;a.wasParsed=!0;b+=a.tag.length+2;for(var p=0;p<a.attributes.length;p++){a.attributes[p].startOffset=
b;var k=a.attributes[p].getText(c);0<k.length&&(b+=1+k.length);a.attributes[p].endOffset=b-1}a.noEndTag&&b++;a.startTagOffset=b;k="";if(a.statements)for(p=0;p<a.statements.length;p++)k+=a.statements[p].printStatement(c,a.statements[p]);else a.script&&(k=a.script);if(k)b+=k.length;else if(0<a.children.length){var e;davinci.html._noFormatElements[a.tag]||(c.indent+=2,f(c.indent,a),e=!0);for(var m,p=0;p<a.children.length;p++){k=a.children[p];switch(k.elementType){case "HTMLElement":m&&"HTMLText"!=m.elementType&&
!davinci.html._noFormatElements[k.tag]&&f(c.indent,null,m);d(k,c);break;case "HTMLText":k.startOffset=b;b+=k.value.length;break;case "HTMLComment":k.startOffset=b,b+=k.value.length,b++,k.isProcessingInstruction&&(b+=2)}m=k}e&&(c.indent-=2);m&&"HTMLText"!=m.elementType&&f(c.indent,null,m)}b+=a.tag.length+3;a.endOffset=b-1}var b=0;void 0==c&&(c=this.children.length);var a,p;this.children.length&&0!=c?(p=this.children[c-1],b=p.endOffset+1):(a=this,b=this.startTagOffset+1);var m=b;davinci.html._noFormatElements[e.tag]||
(f(k.indent,a,p),e._fmLine=1,e._fmIndent=c<this.children.length?k.indent:k.indent-2);d(e,k);return b>m?b-m:0},getElementText:function(e){e=e||{};var c="";if(0<this.children.length)for(var k=0;k<this.children.length;k++)"HTMLComment"!=this.children[k].elementType&&(c+=this.children[k].getText(e));else{if(this.script)return this.script;if(this.statements)for(k=0;k<this.statements.length;k++)c+=this.statements[k].printStatement(e,this.statements[k])}return c},getChildElements:function(e,c,k){k=k||[];
for(var f=0;f<this.children.length;f++)this.children[f].tag==e&&k.push(this.children[f]),c&&"HTMLElement"==this.children[f].elementType&&this.children[f].getChildElements(e,c,k);return k},getChildElement:function(e){for(var c=0;c<this.children.length;c++)if(this.children[c].tag==e)return this.children[c]},hasAttribute:function(e){for(var c=0;c<this.attributes.length;c++)if(this.attributes[c].name==e)return!0;return!1},getAttribute:function(e){if(e=this._getAttribute(e))return e.value},_getAttribute:function(e){for(var c=
0;c<this.attributes.length;c++)if(this.attributes[c].name==e)return this.attributes[c]},addText:function(e){this.addChild(new h(e));this.onChange()},addComment:function(e){this.addChild(new g(e));this.onChange()},getLabel:function(){return"\x3c"+this.tag+"\x3e"},addAttribute:function(m,c,k){if("textContent"==m)this.children=[],this.addText(c);else{var f,d=0<this.attributes.length?this.attributes[this.attributes.length-1].endOffset+1:this.startTagOffset-(this.noEndTag?2:1),b=this._getAttribute(m),
a;b?f=c.length-b.value.length:(b=new e,a=!0,f=m.length+c.length+4,b.startOffset=d,b.endOffset=d+f-1);b.name=m;b.setValue(c);b.noPersist=k;this.wasParsed&&!k&&0<f&&this.getHTMLFile().updatePositions(d,f);a&&this.attributes.push(b);this.onChange()}},removeAttribute:function(e){this.attributes.every(function(c,k,f){return c.name===e?(f.splice(k,1),k=this.getHTMLFile(),!c.noPersist&&k&&(f=c.getText(),k.updatePositions(c.startOffest,0-(f.length+1))),!1):!0},this);this.onChange()},setAttribute:function(e,
c){this.removeAttribute(e);this.addAttribute(e,c)},getUniqueID:function(e){if(!this.getAttribute("id")){var c=this.getHTMLFile();c.uniqueIDs||(c.uniqueIDs={});c=c.uniqueIDs.hasOwnProperty(this.tag)?++c.uniqueIDs[this.tag]:c.uniqueIDs[this.tag]=0;this.addAttribute("id",this.tag+"_"+c,e)}},findElement:function(e){var c=this.getAttribute("id");if(e==c)return this;for(c=0;c<this.children.length;c++)if("HTMLElement"==this.children[c].elementType){var k=this.children[c].findElement(e);if(k)return k}},insertBefore:function(e,
c){c=dojo.indexOf(this.children,c);0>c&&(c=void 0);this.addChild(e,c);this.onChange()},addChild:function(e,c,k){if(!k&&this.wasParsed)if("HTMLElement"==e.elementType){var f=this._getIndent(),d;c<this.children.length&&"HTMLElement"==this.children[c].elementType?d=this.children[c]._getIndent():this.children.length?dojo.forEach(this.children,function(a){"HTMLElement"==a.elementType&&(d=a._getIndent())}):d=f+1;f=this._formatModel(e,c,{indent:d});this.getHTMLFile().updatePositions(e.startOffset,f)}else if("HTMLText"==
e.elementType||"CSS"==e.elementType.substring(0,3)){var f=e.getText(),b=this.children.length?this.children[this.children.length-1].endOffset:this.startTagOffset,a=f.length;0<a&&("HTMLText"!=e.elementType&&(a+=this._fmChildIndent+1),this.getHTMLFile().updatePositions(b+1,a));e.startOffset=b+1;e.endOffset=e.startOffset+f.length-1}n.prototype.addChild.apply(this,arguments)},removeChild:function(e){var c=dojo.indexOf(this.children,e);if(0<=c){var k=1+e.endOffset-e.startOffset;if("HTMLElement"==e.elementType)if(1==
this.children.length)k+=1*this._fmChildLine+this._fmChildIndent,this._fmChildIndent-=2;else{if(0<c&&"HTMLElement"==this.children[c-1].elementType)var f=this.children[c-1],k=k+(1*f._fmLine+f._fmIndent);c+1==this.children.length&&"HTMLElement"==this.children[c-1].elementType&&(this.children[c-1]._fmChildIndent-=2)}0<k&&this.wasParsed&&this.getHTMLFile().updatePositions(e.startOffset,0-k)}n.prototype.removeChild.apply(this,arguments)},_textModify:function(e,c){e=e.length-c.length;0!=e&&this.wasParsed&&
this.getHTMLFile().updatePositions(this.startOffset,e)},setScript:function(e){this._textModify(e,this.script);this.script=e},_previous:function(){var e=dojo.indexOf(this.parent.children,this);if(0<e)return this.parent.children[e-1]},_getIndent:function(){var e=this._previous();return e?" HTMLText"==e.elementType?(e=e.value.split("\n"),e[e.length-1].length):e._fmIndent:this.parent._fmChildIndent},visit:function(e){if(!e.visit(this)){for(var c=0;c<this.attributes.length;c++)this.attributes[c].visit(e);
for(c=0;c<this.children.length;c++)this.children[c].visit(e)}e.endVisit&&e.endVisit(this)},setText:function(e){this.script="";var c=this.parent;this.errors=require("davinci/html/HTMLParser").parse(e,this).errors;dojo.mixin(this,this.children[0]);this.parent=c;this.visit({visit:function(c){delete c.wasParsed},rules:[]});this.onChange()}})})},"davinci/html/HTMLItem":function(){define(["dojo/_base/declare","davinci/html/HTMLModel"],function(q,n){return q("davinci.html.HTMLItem",n,{constructor:function(){this.elementType=
"HTMLItem"},getLabel:function(){return this.getText({indent:0})},onChange:function(h){if(this.parent&&h)this.parent.onChange(h)},_addWS:function(h,g){h=h||0;g=g||0;for(var e=[],m=0;m<h;m++)e.push("\n");e.push("                                          ".substring(0,g));return e.join("")},close:function(){for(var h=0;h<this.children.length;h++)this.children[h].close()},getID:function(){return this.parent.getID()+":"+this.startOffset+":"+this.getLabel()},getHTMLFile:function(){for(var h=this;h&&"HTMLFile"!=
h.elementType;)h=h.parent;return h}})})},"davinci/html/HTMLModel":function(){define(["dojo/_base/declare","davinci/model/Model"],function(q,n){davinci.html||(davinci.html={});davinci.html._noFormatElements={span:!0,b:!0,it:!0};davinci.html.escapeXml=function(h){return h?h.replace(/&/g,"\x26amp;").replace(/</g,"\x26lt;").replace(/>/g,"\x26gt;").replace(/"/g,"\x26quot;"):h};davinci.html.unEscapeXml=function(h){return h&&"string"===typeof h?h.replace(/&quot;/g,'"').replace(/&gt;/g,"\x3e").replace(/&lt;/g,
"\x3c").replace(/&amp;/g,"\x26"):h};return q("davinci.html.HTMLModel",n,{})})},"davinci/model/Model":function(){define(["dojo/_base/declare"],function(q){return q("davinci.model.Model",null,{constructor:function(){this.name=this.elementType="";this.endOffset=this.startOffset=0;this.parent=null;this.children=[]},inherits:function(n){1<arguments.length?n.apply(this,Array.prototype.slice.call(arguments,1)):n.call(this)},getText:function(){},setText:function(n){},addChild:function(n,h,g){n.parent=this;
void 0!=h?this.children.splice(h,0,n):this.children.push(n)},setStart:function(n){this.startOffset=n},setEnd:function(n){this.endOffset=n},getLabel:function(){return null},getID:function(){return null},mapPositions:function(n){return{startOffset:n.startOffset,endOffset:n.endOffset}},findChildAtPosition:function(n){n.endOffset||(n.endOffset=n.startOffset);if(n.startOffset>=this.startOffset&&n.endOffset<=this.endOffset){for(var h=0;h<this.children.length;h++){var g=this.children[h].findChildAtPosition(n);
if(null!=g)return g}return this}return null},removeChild:function(n){for(var h=0;h<this.children.length;h++)if(this.children[h]==n){this.children.splice(h,1);break}},find:function(n,h){var g={visit:function(e){if(0<this.found.length&&h)return!0;var m=null;for(m in n)if(e[m]!=n[m])break;e[m]==n[m]&&this.found.push(e);return!1},found:[]};this.visit(g);return h?0<g.found.length?g.found[0]:null:g.found},setDirty:function(n){this.dirtyResource=n},isDirty:function(){return this.dirtyResource},searchUp:function(n){if(this.elementType==
n)return this;for(var h=this.parent;h&&h.elementType!=n;)h=h.parent;return h},visit:function(n){if(!n.visit(this))for(var h=0;h<this.children.length;h++)this.children[h].visit(n);n.endVisit&&n.endVisit(this)},updatePositions:function(n,h,g){visitor={visit:function(e){if(e.endOffset<h)return!0;e.startOffset>=h?(e.startOffset+=g,e.endOffset+=g):e.endOffset>=h&&(e.endOffset+=g)}};n.visit(visitor)}})})},"davinci/html/HTMLText":function(){define(["dojo/_base/declare","davinci/html/HTMLItem"],function(q,
n){return q("davinci.html.HTMLText",n,{constructor:function(h){this.elementType="HTMLText";this.value=h||""},getText:function(h){return this.value},setText:function(h){if(this.wasParsed||this.parent&&this.parent.wasParsed){var g=h.length-this.value.length;0<g&&this.getHTMLFile().updatePositions(this.startOffset+1,g)}this.value=h},getLabel:function(){return 15>this.value.length?this.value:this.value.substring(0,15)+"..."}})})},"davinci/html/HTMLComment":function(){define(["dojo/_base/declare","davinci/html/HTMLItem"],
function(q,n){return q("davinci.html.HTMLComment",n,{constructor:function(h){this.elementType="HTMLComment";this.value=h||""},getText:function(h){h=this.isProcessingInstruction?"":"--";return"\x3c!"+h+this.value+h+"\x3e"}})})},"davinci/html/HTMLAttribute":function(){define(["dojo/_base/declare","davinci/html/HTMLItem"],function(q,n){return q("davinci.html.HTMLAttribute",n,{constructor:function(){this.elementType="HTMLAttribute";this.value=this.name=""},getText:function(h){if(this.noPersist&&!h.includeNoPersist)return"";
h=this.name;({checked:1,selected:1,disabled:1,readonly:1,multiple:1,ismap:1,autofocus:1,autoplay:1,controls:1,formnovalidate:1,loop:1,muted:1,required:1})[this.name.toLowerCase()]?h=this.value&&"false"!==this.value?h+('\x3d"'+this.value+'"'):"":this.noValue||(h=h+'\x3d"'+davinci.html.escapeXml(String(this.value))+'"');return h},setValue:function(h){this.value=davinci.html.unEscapeXml(h);this.onChange()}})})},"davinci/ve/DijitWidget":function(){define("require dojo/_base/declare dojo/_base/window dojo/_base/lang dojo/dom-attr dojo/parser ./_Widget ./metadata".split(" "),
function(q,n,h,g,e,m,c,k){return n("davinci.ve.DijitWidget",c,{isDijitWidget:!0,constructor:function(f,d,b,a,c,k){if("string"===typeof b){e.get(d,"data-dojo-type")||e.get(d,"dojoType")||e.set(d,"data-dojo-type",b);c&&c.addAttribute("data-dojo-type",b);b=d.ownerDocument;c=b.defaultView;(a=b.__DijitWidgetScratchSpace)||(a=b.__DijitWidgetScratchSpace=b.createElement("div"));a.appendChild(d);b=c.require("dojo/parser").instantiate([d],f,{noStart:!0})[0];a.firstChild&&a.removeChild(a.firstChild);if(this.domNode=
b.domNode)b.domNode._dvWidget=this;this.isLayoutContainer=b.isLayoutContainer}else this.type=k?k.replace(/\./g,"/"):b.declaredClass.replace(/\./g,"/");f=davinci.ve.metadata.getAllowedChild(this.type);this.acceptsHTMLChildren="ANY"===f[0]||-1!==f.toString().toUpperCase().indexOf("HTML");this.dijitWidget=b;this.containerNode=b.containerNode;this.styleNode=b.styleNode;this.id=b.id},getParent:function(){if(this.dijitWidget&&this.dijitWidget.domNode&&this.dijitWidget.domNode.parentNode){var f=q("davinci/ve/widget"),
d=this.dijitWidget;do d=f.getEnclosingWidget(d.domNode.parentNode);while(d&&d.dijitWidget&&"_"==d.dijitWidget.declaredClass.split(".").pop().charAt(0));return d}},_getChildren:function(f){if(this.acceptsHTMLChildren)return this.inherited(arguments);var d=[];"NONE"!==davinci.ve.metadata.getAllowedChild(this.type)[0]&&(this.dijitWidget.getChildren(),this.dijitWidget.getChildren().forEach(function(b){b._maqNotDVWidget||(f?d.push(q("davinci/ve/widget").getWidget(b.domNode)):(b=b.domNode&&b.domNode._dvWidget)&&
d.push(b))}));return d},_getContainerNode:function(){return this.containerNode||this.domNode},selectChild:function(f){this.dijitWidget.selectChild&&this.dijitWidget.selectChild(f.dijitWidget)},_addChildToDom:function(f,d){if(this.acceptsHTMLChildren){this.inherited(arguments);var b=f.dijitWidget;b&&this.dijitWidget._started&&!b._started&&f.startup()}else f.dijitWidget&&this.dijitWidget.addChild?this.dijitWidget.addChild(f.dijitWidget,d):("xblox/RunScript"===f.type&&f.getHelper()&&f.getHelper().addChildToDom&&
f.getHelper().addChildToDom(this.dijitWidget,f,d),this.inherited(arguments))},_removeChildFromDom:function(f){this.dijitWidget.removeChild&&f.dijitWidget?this.dijitWidget.removeChild(f.dijitWidget):this.inherited(arguments)},_getPropertyValue:function(f){return this.dijitWidget.get(f)},startup:function(){this.dijitWidget.startup()},isLayout:function(){var f=this.getContext().getDijit();return f.layout?this.dijitWidget.isInstanceOf(f.layout._LayoutWidget):!1},resize:function(){var f=this.getHelper();
f&&f.resize?f.resize(this):this.dijitWidget.resize&&this.dijitWidget.resize()},renderWidget:function(){if(this.dijitWidget.render)this.dijitWidget.render();else if(this.dijitWidget.chart){var f=dojo.marginBox(this.dijitWidget.domNode);this.dijitWidget.resize(f)}this.domNode.parentNode._dvWidget&&this.domNode.parentNode._dvWidget.isDijitWidget&&this._refresh(this.domNode.parentNode)},_refresh:function(f){var d=f.parentNode;d._dvWidget&&d._dvWidget.isDijitWidget?this._refresh(d):f._dvWidget.resize&&
f._dvWidget.resize()},_attr:function(f,d){return this.dijitWidget.get.apply(this.dijitWidget,arguments)}})})},"davinci/ve/_Widget":function(){define("davinci/ve/_Widget","dojo/_base/declare ./metadata ../html/CSSModel dojox/html/entities davinci/ve/utils/StyleArray davinci/ve/utils/GeomUtils xide/mixins/EventedMixin xide/mixins/ReloadMixin".split(" "),function(q,n,h,g,e,m,c,k){var f=function(d,b,a){if(d==b)return!0;if(!d||!b||d.length!=b.length)return!1;for(var f=0;f<d.length;f++)if(a){if(!a(d[f],
b[f]))return!1}else if(d[f]!=b[f])return!1;return!0};return q("davinci.ve._Widget",[c,k],{isWidget:!0,acceptsHTMLChildren:!1,_skipAttrs:"id style class dir lang _children".split(" "),constructor:function(d,b,a,f){this.domNode=b;this.id=b.id;b._dvWidget=this;this._params=dojo.mixin({},d);this.type=a;this.metadata=f},postscript:function(){var d;if(this.domNode){var b=this.domNode.ownerDocument;b.body._edit_context?d=b.body._edit_context:b.body._dvWidget&&b.body._dvWidget._edit_context&&(d=b.body._dvWidget._edit_context)}this.id&&
d&&(d.widgetHash[this.id]=this);this.buildRendering();this.postCreate()},buildRendering:function(){},postCreate:function(){},getObjectType:function(){},getContext:function(){return this._edit_context},getChildren:function(d){var b=this.getHelper();return b&&b.getChildren?b.getChildren(this,d):this._getChildren(d)},indexOf:function(d){var b=this.getHelper();return b&&b.indexOf?b.indexOf(this,d):dojo.indexOf(this.getChildren(),d)},_getChildrenForTree:function(d){d=this.getContainerNode();var b=[];d&&
!d.children.length&&this.domNode.children.length&&(d=this.domNode);d&&dojo.forEach(d.children,function(a){a=dijit.registry.getEnclosingWidget(a);a!=this&&b.push(a)});return b},_getChildren:function(d){var b=this.getContainerNode(),a=[];b&&dojo.forEach(b.children,function(b){d?a.push(require("davinci/ve/widget").getWidget(b)):(b=b._dvWidget)&&a.push(b)});return a},getContainerNode:function(){var d=this.getHelper();return d&&d.getContainerNode?d.getContainerNode(this):"NONE"!==n.getAllowedChild(this.type)[0]?
this._getContainerNode():null},_getContainerNode:function(){return this.domNode},getMetadata:function(){this.metadata||(this.metadata=n.query(this));return this.metadata},getHelper:function(){this._edit_helper||(this._edit_helper=require("davinci/ve/widget").getWidgetHelper(this.type));return this._edit_helper},attr:function(d,b){var a=this._attr.apply(this,arguments);if(1<arguments.length)b=this._stringValue(d,b),this._srcElement.addAttribute(d,b);else return a},_attr:function(d,b){},indexOf:function(d){var b=
this.getHelper();return b&&b.indexOf?b.indexOf(this,d):dojo.indexOf(this.getChildren(),d)},getStyleNode:function(){return this.styleNode||this.domNode},addChild:function(d,b){if(this.getContainerNode()){if(void 0===b||null===b||-1===b)this._srcElement.addChild(d._srcElement);else{var a=this.getChildren();b<a.length?this._srcElement.insertBefore(d._srcElement,a[b]._srcElement):this._srcElement.addChild(d._srcElement)}(a=this.getHelper())&&a.addChild?a.addChild(this,d,b):this._addChildToDom.apply(this,
arguments)}},_addChildToDom:function(d,b){try{var a=d.domNode,f=this.getContainerNode();if(void 0===b||null===b||-1===b)f.appendChild(a);else{var c=this.getChildren();b<c.length?f.insertBefore(a,c[b].domNode):f.appendChild(a)}}catch(v){debugger}},getParent:function(){return require("davinci/ve/widget").getEnclosingWidget(this.domNode.parentNode)||this.domNode.parentNode},getObjectId:function(d){d=d||this;var b=d._edit_object_id;if(b)return b;if(d.domNode)return d.domNode.getAttribute("jsId")},addClass:function(d){var b=
this.getClassNames(),b=b?b.split(/\s+/):[];-1===b.indexOf(d)&&(b.push(d),this._srcElement.setAttribute("class",b.join(" ")),dojo.addClass(this.domNode,d))},getId:function(){if(!this.id){if(!this.domNode.id||!this.type)return;var d=this.domNode.id,b=(this.isHtmlWidget?this.getTagName():this.type).replace(/\./g,"_")+"_";if(d.length>b.length&&d.substring(0,b.length)==b)return}if(!(this._srcElement&&this._srcElement._getAttribute("id")&&this._srcElement._getAttribute("id").noPersist))return this.id},
setMarginBox:function(d){var b=this.getStyleNode();b&&(dojo.marginBox(b,d),this._updateSrcStyle())},getMarginBox:function(){var d=this.domNode,b=null,b=(b=this.getHelper())&&b.getMarginBoxPageCoords?b.getMarginBoxPageCoords(this):m.getMarginBoxPageCoords(d);b.l-=m.getScrollLeft(d);b.t-=m.getScrollTop(d);b.x=b.l;b.y=b.t;return b},getStyle:function(d){return(d=this.getStyleValues(d))?this._styleText(d):""},_sortStyleValues:function(d){d=dojo.clone(d);for(var b=h.shorthand,a=0,f=0;f<b.length;f++){var c;
a:{c=b[f][0];for(var e=0;e<d.length;e++)if(d[e]&&d[e].hasOwnProperty(c)){c=e;break a}c=-1}-1<c&&(e=d[c],d.splice(c,1),d.splice(a,0,e),a++)}return d},_styleText:function(d){var b="";if(dojo.isArray(d)){d=davinci.ve.states.normalizeArray("style",this.domNode,f,d);for(var a=0;a<d.length;a++)for(var f in d[a])value=d[a][f],void 0!==value&&""!=value&&null!=value&&(b+=f+": "+d[a][f]+"; ")}else for(f in d)value=davinci.ve.states.normalize("style",this.domNode,f,d[f]),void 0!==value&&""!=value&&null!=value&&
(b+=f+": "+d[f]+"; ");return b.trim()},getChildrenData:function(d){d=d||{identify:!0};var b=this.getHelper();return b&&b.getChildrenData?b.getChildrenData.apply(b,[this,d]):this._getChildrenData(d)},_getChildrenData:function(d){return this.getChildren().map(function(b){return b.getData(d)})},getClassNames:function(){return this._srcElement.getAttribute("class")||""},_getData:function(d){var b={type:this.type,properties:{}},a=require("davinci/ve/widget");if(d.identify){this._srcElement||(this._srcElement=
a._createSrcElement(this.domNode));var c=this._srcElement._getAttribute("id");c&&c.noPersist&&(b.properties.isTempID=!0);b.properties.id=this.id}!1!==d.preserveTagName&&this.id&&(b.tagName=this._srcElement.tag);c=n.query(this,"property");this.domNode&&this.domNode.parentNode&&(a=a.getEnclosingWidget(this.domNode.parentNode),(a=n.query(a,"childProperties"))&&(c=c?dojo.mixin({},c,a):a));if(c)for(var e in c)if(-1===this._skipAttrs.indexOf(e.toLowerCase())){var a=c[e],k=this.getPropertyValue(e);k&&k.length?
"array"==a.datatype?f(k,a.defaultValue)||(b.properties[e]=k):k!=a.defaultValue&&(b.properties[e]=k):"boolean"!=a.datatype&&"number"!=a.datatype||k==a.defaultValue?a.datatype&&(0==a.datatype.indexOf("dijit")||"object"==a.datatype&&a.isData)&&(b.properties[e]=k):b.properties[e]=k}b.properties.style=this.getStyle(d);(e=this.getClassNames(d))&&(b.properties["class"]=e);b.children=this.getChildrenData(d);b.type.indexOf("delite");return b},getData:function(d){d=d||{identify:!0,preserveStates:!0};var b=
this.getHelper();d=b&&b.getData?b.getData.apply(b,[this,d]):this._getData(d);d.maqAppStates=dojo.clone(this.domNode._maqAppStates);d.maqDeltas=dojo.clone(this.domNode._maqDeltas);d.properties||(d.properties={});if(this.properties)for(var a in this.properties)a in d.properties||(d.properties[a]=this.properties[a]);a=this._srcElement;for(var b=a.attributes,f=0;f<b.length;f++){var c=b[f];"on"==c.name.substr(0,2).toLowerCase()?d.properties[c.name]=c.value:"a"==a.tag.toLowerCase()&&"href"==c.name.toLowerCase()&&
(d.properties[c.name]=c.value)}return d},getPropertyValue:function(d){if("id"===d)return this.getId();if("jsId"===d)return this.getObjectId();var b=this.getHelper();return b&&b.getPropertyValue?b.getPropertyValue(this,d):this._getPropertyValue(d)},_getPropertyValue:function(d){return this.domNode.getAttribute(d)},getTagName:function(){return this.domNode.nodeName.toLowerCase()},getStyleValues:function(){function d(a){for(var b=f.length-1;0<=b;b--)void 0!==f[b][a]&&f.splice(b,1)}var b=this.getStyleNode().style,
a=this._srcElement.getAttribute("style"),f=require("davinci/ve/widget").parseStyleValues(a),a=this.getParent();b&&a&&a.dijitWidget&&a.dijitWidget.addChild&&!a.acceptsHTMLChildren&&(d("position"),d("left"),d("top"));return f},getStyleValuesAllStates:function(){var d=this.getStyleValues(),b={undefined:d},a=this.domNode._maqDeltas;if(a)for(var f in a)a[f].style&&(b[f]="undefined"==f?e.mergeStyleArrays(d,a[f].style):a[f].style);return b},_updateSrcStyle:function(){var d=this.getStyle();d.length?this._srcElement.addAttribute("style",
d):this._srcElement.removeAttribute("style")},_getStyleString:function(d){if(!d)return"";d=this._sortStyleValues(d);return this._styleText(d)},setStyleValuesCanvas:function(d){if(d){d=this._getStyleString(d);var b=this.getStyleNode();dojo.attr(b,"style",d);this.dijitWidget&&(this.dijitWidget.style=d)}},setStyleValuesModel:function(d){d=this._getStyleString(d);0<d.length?this._srcElement.addAttribute("style",d):this._srcElement.removeAttribute("style")},setStyleValuesAllStates:function(d){this.domNode._maqDeltas=
void 0;if(d)for(var b in d){var a=d[b];"undefined"===b&&(b=void 0);davinci.ve.states.setStyle(this.domNode,b,a,!0)}},isLayout:function(){return!1},resize:function(){},refresh:function(){var d=this.getParent();d&&d.dijitWidget?d.refresh():this.resize&&this.resize()},removeChild:function(d){this._srcElement?this._srcElement.removeChild(d._srcElement):console.error("cant remove child! this._srcElement is null",this);var b=this.getHelper();b&&b.removeChild?b.removeChild(this,d):this._removeChildFromDom.apply(this,
arguments)},_removeChildFromDom:function(d){(d=d.domNode)&&d.parentNode&&d.parentNode.removeChild(d)},setProperties:function(d,b){this.properties||(this.properties={});b=b||!1;d.id&&(this._srcElement.addAttribute("id",d.id,d.isTempID),delete d.id,delete d.isTempID);d.isTempID&&delete d.isTempID;for(var a in d){var f=d[a];f||"boolean"==typeof f||"number"==typeof f?(f=this._stringValue(a,f),b||(this.properties[a]=f),this._srcElement.addAttribute(a,f)):(delete this.properties[a],this._srcElement.removeAttribute(a))}},
startup:function(){this.initReload()},renderWidget:function(){},destroyWidget:function(d){(d=this.getHelper())&&d.destroy?d.destroy(this):this.dijitWidget?this.dijitWidget.destroyRecursive():dojo.forEach(this.getChildren(),function(b){b.destroyWidget()})},destroy:function(){this.inherited(arguments);console.error("destry")},selectChild:function(d){},attach:function(){var d=this.getHelper();d&&d.create&&d.create(this,this._srcElement)},_stringValue:function(d,b){var a=this.getMetadata();d=a.property&&
a.property[d];if(!d)return b;if("object"==d.datatype)if(b.getObjectId)b=b.getObjectId();else{if(d=b._edit_object_id)return d;if(b.domNode)return b.domNode.getAttribute("jsId")}else if("json"==d.datatype)d=(d=this.getContext())&&d.getDojo()||dojo,(a=this.getHelper())&&a.checkValue&&(b=a.checkValue(b)),d.isObject(b)&&(b=d.toJson(b));else if("string"==d.datatype)switch(d.format){case "date":case "time":isFinite(b)&&(b=dojo.date.stamp.toISOString(b,{selector:d.format}));break;default:b=g.encode(b)}return b}})})},
"davinci/html/CSSModel":function(){define({shorthand:[["border","border-width border-style border-color border-top border-left border-right border-bottom".split(" ")],["border-width",["border-top-width","border-right-width","border-bottom-width","border-left-width"]],["border-style",["border-top-style","border-right-style","border-bottom-style","border-left-style"]],["border-color",["border-top-color","border-right-color","border-bottom-color","border-left-color"]],["border-bottom",["border-bottom-width",
"border-bottom-style","border-bottom-color"]],["border-top",["border-top-width","border-top-style","border-top-color"]],["border-left",["border-left-width","border-left-style","border-left-color"]],["border-right",["border-right-width","border-right-style","border-right-color"]],["font","font-size line-height font-weight font-style font-family line-height".split(" ")],["border-radius",["border-top-left-radius","border-top-right-radius","border-bottom-right-radius","border-bottom-left-radius"]],["-moz-border-radius",
["-moz-border-radius-topleft","-moz-border-radius-topright","-moz-border-radius-bottomright","-moz-border-radius-bottomleft"]],["margin",["margin-top","margin-right","margin-bottom","margin-left"]],["padding",["padding-top","padding-right","padding-bottom","padding-left"]],["background",["background-color","background-image","background-repeat","background-position","background-attachment"]]]})},"davinci/ve/utils/StyleArray":function(){define([],function(){return{mergeStyleArrays:function(q,n){q||
(q=[]);n||(n=[]);q=dojo.clone(q);for(var h=0;h<n.length;h++)for(var g in n[h])for(j=q.length-1;0<=j;j--){var e=q[j],m;for(m in e)if(g==m){q.splice(j,1);break}}return q.concat(n)}}})},"davinci/ve/GenericWidget":function(){define(["dojo/_base/declare","./_Widget"],function(q,n){return q("davinci.ve.GenericWidget",n,{isGenericWidget:!0,constructor:function(h,g,e,m,c){dojo.attr(g,"dvwidget",e);c&&c.addAttribute("dvwidget",e)},buildRendering:function(){this.containerNode=this.domNode;if(this._params){for(var h in this._params)this.domNode.setAttribute(h,
this._params[h]);this._params=void 0}},_getChildrenData:function(h){for(var g=[],e=this.domNode.childNodes,m=0;m<e.length;m++){var c=e[m],k;switch(c.nodeType){case 1:(c=require("davinci/ve/widget").byNode(c))&&(k=c.getData(h));break;case 3:(k=c.nodeValue.trim())&&h.serialize&&(k=davinci.html.escapeXml(k));break;case 8:k="\x3c!--"+c.nodeValue+"--\x3e"}k&&g.push(k)}if(0!==g.length)return g},setProperties:function(h){var g=this.domNode,e;for(e in h)"style"===e?dojo.style(g,h[e]):h[e]?g[e]=h[e]:g.removeAttribute(e);
this.inherited(arguments)},_attr:function(h,g){if(1<arguments.length)this.domNode.setAttribute(h,g);else return this.domNode.getAttribute(h)},getTagName:function(){return this.domNode.nodeName.toLowerCase()}})})},"davinci/ve/DeliteWidget":function(){define("dojo/_base/declare ./_Widget ./widget require xide/registry xide/utils".split(" "),function(q,n,h,g,e,m){function c(c){c.declaredClass&&"davinci.ve.DeliteWidget"!==c.declaredClass?c.type=c.declaredClass:c.domNode&&c.domNode.declaredClass&&-1==
c.domNode.declaredClass.indexOf("uniq")&&(c.type=c.domNode.declaredClass);if(!c.type)switch("delite/"+m.capitalize(c.domNode.baseClass.replace("d-",""))){case "delite/Radio-button":c.type="delite/RadioButton";break;case "delite/Checkbox":c.type="delite/Checkbox";break;case "delite/Accordion-header":c.type="delite/AccordionHeader";break;case "delite/Combobox":c.type="delite/Combobox";break;case "delite/Toggle-button":c.type="delite/ToggleButton";break;case "delite/Tab-bar":c.type="delite/TabBar";break;
case "delite/View-stack":c.type="delite/ViewStack";break;case "delite/MediaPlayer":c.type="delite/MediaPlayer";break;case "delite/Panel":c.type="delite/Panel";break;case "delite/Select":c.type="delite/Select";break;case "delite/Button":c.type="delite/Button";break;case "delite/Accordion":c.type="delite/Accordion";break;case "delite/Slider":c.type="delite/Slider"}c.type?e.add(c.domNode):console.error("have no widget type ",c)}q=q("davinci.ve.DeliteWidget",n,{isGenericWidget:!0,helper:h,getData:function(c){c=
c||{identify:!0,preserveStates:!0};var f;f=(f=this.getHelper())&&f.getData?f.getData.apply(f,[this,c]):this._getData(c);var d=!1;"no_id"===this.id&&(d=dijit.getUniqueId(this.type.toLowerCase().replace("/","-").replace(/\./g,"_")),this.id=d=d.replace("delite/","d-").toLowerCase(),f.properties.id=d,f.properties.id=d,this.domNode.id=d,d=!0);c.identify&&!d&&e.byId(this.id);e.add(this.domNode);f.maqAppStates=dojo.clone(this.domNode._maqAppStates);f.maqDeltas=dojo.clone(this.domNode._maqDeltas);f.properties||
(f.properties={});if(this.properties)for(var b in this.properties)b in f.properties||(f.properties[b]=this.properties[b]);c=this._srcElement;for(var d=c.attributes,a=0;a<d.length;a++){var p=d[a];b=p.name;if("on"==p.name.substr(0,2).toLowerCase())f.properties[p.name]=p.value;else if("a"==c.tag.toLowerCase()&&"href"==p.name.toLowerCase())f.properties[p.name]=p.value;else if("stop"===b||"bidirectional"===b||"block"===b||"targetevent"===b)f.properties[p.name]=p.value}return f},_fixType:function(e){return c(e)},
_getChildren:function(c){function f(f){dojo.forEach(f.children,function(f){(f=a.getWidget(f,!1))&&!f.type&&b._fixType(f);b.metadata&&b.metadata.ignore&&f.type&&-1!==b.metadata.ignore.indexOf(f.type)||f&&f.type&&(-1==f.type.indexOf("html.")||b.metadata&&1==b.metadata.htmlContent)&&d.push(f)})}var d=[],b=this;c=this.container||this.domNode;c.containerNode&&null==this.domNode.render&&(c=c.containerNode);this.domNode&&null!=this.domNode.render&&(c=this.domNode);var a=g("davinci/ve/widget");c&&(f(c),0==
d.length&&this.domNode.containerNode&&f(this.domNode.containerNode));return b.metadata&&b.metadata.noChildren?[]:d},getChildren:function(c){var f=this.getHelper();return f&&f.getChildren?f.getChildren(this,c):this._getChildren(c)},constructor:function(c,f,d,b,a){this.acceptsHTMLChildren=!0},buildRendering:function(){this.containerNode=this.domNode;if(this._params){for(var c in this._params)this.domNode.setAttribute(c,this._params[c]);this._params=void 0}},_getChildrenData:function(c){var f=this.domNode;
if(!f.hasChildNodes())return null;if(f&&f.getChildrenData)return f.getChildrenData();var f=[],d=this.domNode.childNodes,b=g("davinci/ve/widget");this.metadata&&this.metadata.noChildren&&(d=[]);for(var a=0;a<d.length;a++){var e=d[a],k;switch(e.nodeType){case 1:if((e=b.byNode(e))&&e.type&&-1!==e.type.indexOf("html.")&&!0!==this.metadata.htmlContent)break;if(this.metadata&&this.metadata.ignore&&e.type&&-1!==this.metadata.ignore.indexOf(e.type))break;e&&(k=e.getData(c));break;case 3:(k=e.nodeValue.trim())&&
(c.serialize||!0===this.metadata.htmlContent)&&(k=davinci.html.escapeXml(k));break;case 8:k="\x3c!--"+e.nodeValue+"--\x3e"}(k&&k.type&&-1==k.type.indexOf("html.")||k&&!0===this.metadata.htmlContent)&&f.push(k)}if(0!==f.length)return f},_getPropertyValue:function(c){if(this.domNode._get){var f=this.domNode._get(c);null==f&&(f=this.domNode.getAttribute(c));return f}if(this.containerNode&&c in this.containerNode)return this.containerNode[c]},setProperties:function(c){var f=this.domNode,d;for(d in c)"style"===
d?dojo.style(f,c[d]):c[d]?(f[d]=c[d],f._set&&f._set(d,c[d]),dojo.attr(f,d,c[d])):f.removeAttribute(d);this.inherited(arguments)},_attr:function(c,f){},getTagName:function(){return this.domNode.nodeName.toLowerCase()},getParent:function(){if("xblox/RunScript"==this.type){var c=this.domNode;if(c&&c._targetReference&&c._targetReference._dvWidget)return c._targetReference._dvWidget}return this.inherited(arguments)}});q.fixType=c;return q})},"davinci/ve/HTMLWidget":function(){define(["dojo/_base/declare",
"./_Widget"],function(q,n){return q("davinci.ve.HTMLWidget",n,{isHtmlWidget:!0,addHTMLClasses:!0,constructor:function(h,g,e){this.type="html."+g.tagName.toLowerCase();this.acceptsHTMLChildren=!0;null!=e&&(this.addHTMLClasses=e)},buildRendering:function(){this.containerNode=this.domNode;if(this._params){for(var h in this._params)this.domNode.setAttribute(h,this._params[h]);this._params=void 0}try{!1!==this.addHTMLClasses&&dojo.addClass(this.domNode,"HtmlWidget")}catch(g){}},_getChildrenData:function(h){function g(c){(c=
c.nodeValue.trim())&&(c=davinci.html.escapeXml(c));return c}var e=this.domNode;if(!e.hasChildNodes())return null;if(1===e.childNodes.length&&3===e.firstChild.nodeType)return g(e.firstChild);var m=[];dojo.forEach(e.childNodes,function(c){var e;switch(c.nodeType){case 1:(c=require("davinci/ve/widget").byNode(c))&&(e=c.getData(h));break;case 3:e=g(c);break;case 8:e="\x3c!--"+c.nodeValue+"--\x3e"}e&&m.push(e)});return m},setProperties:function(h,g){var e=this.domNode;g=g||!1;for(var m in h)if("style"===
m)dojo.style(e,h[m]);else if(!g){var c=h[m];c||"boolean"==typeof c||"number"==typeof c?e.setAttribute(m,c):e.removeAttribute(m)}this.inherited(arguments)},resize:function(){this.getChildren().forEach(function(h){h.resize&&h.resize()})},_attr:function(h,g){if(1<arguments.length)this.domNode[h]=g;else return this.domNode[h]},getTagName:function(){return this.domNode.nodeName.toLowerCase()}})})},"davinci/ve/ObjectWidget":function(){define(["dojo/_base/declare","dojo/dom-attr","./_Widget"],function(q,
n,h){return q("davinci.ve.ObjectWidget",h,{isObjectWidget:!0,constructor:function(g,e,m,c,k){"string"===typeof m&&(n.set(e,"data-dojo-type",m),k&&k.addAttribute("data-dojo-type",m))},postCreate:function(){var g=this._params.jsId,e=require("davinci/ve/widget")._dojo(this.domNode),m;if(g){if(n.set(this.domNode,"jsId",g),m=this.getObjectType())if(m=e.getObject(m.replace(/\//g,".")))if(m=m.markupFactory?m.markupFactory(this._params,this.domNode,m):m.prototype&&m.prototype.markupFactory?m.prototype.markupFactory(this._params,
this.domNode,m):new m(this._params,this.domNode))m._edit_object_id=g,e.setObject(g,m)}else if(g=this.getObjectId())if(m=e.getObject(g))m._edit_object_id=g},getObjectType:function(){var g=this.domNode,g=n.get(g,"data-dojo-type")||n.get(g,"dojoType");return g=g.replace(/\./g,"/")},getObjectId:function(){return n.get(this.domNode,"jsId")},_getChildren:function(){return[]}})})},"davinci/ve/commands/StyleCommand":function(){define(["dojo/_base/declare","davinci/ve/widget","davinci/ve/utils/StyleArray"],
function(q,n,h){return q("davinci.ve.commands.StyleCommand",null,{name:"style",constructor:function(g,e,m){this._newValues=e;this._id=g?g.id:void 0;this._applyToStateIndex=m&&"Normal"!=m&&"undefined"!=m?m:"undefined"},add:function(g){g&&g._id==this._id&&g._newValues&&dojo.mixin(this._newValues,g._newValues)},execute:function(g,e){if(this._id&&this._newValues&&(g=require("davinci/ve/widget").byId(this._id))&&g.domNode){var m=require("davinci/ve/States"),c=g.getStyleValuesAllStates();this._oldStyleValuesAllStates=
dojo.clone(c);c[this._applyToStateIndex]=c[this._applyToStateIndex]?h.mergeStyleArrays(c[this._applyToStateIndex],this._newValues):this._newValues;for(var k=c[this._applyToStateIndex],f=k.length-1;0<=f;f--){var d=k[f],b=!1,a;for(a in d)"$MAQ_DELETE_PROPERTY$"==d[a]?delete d[a]:b=!0;b||k.splice(f,1)}g.setStyleValuesAllStates(c);a=m.getStatesListCurrent(g.domNode);k=h.mergeStyleArrays([],c.undefined);for(f=0;f<a.length;f++)c[a[f]]&&(k=h.mergeStyleArrays(k,c[a[f]]));g.setStyleValuesCanvas(k);g.setStyleValuesModel(c.undefined);
g.refresh();m.resetState(g.domNode);!0!==e&&dojo.publish("/davinci/ui/widgetPropertiesChanged",[[g]])}},undo:function(){if(this._id&&this._oldStyleValuesAllStates){var g=require("davinci/ve/widget").byId(this._id);if(g){require("davinci/ve/States");var e=this._oldStyleValuesAllStates,m=this._applyToStateIndex;g.setStyleValuesAllStates(e);e=h.mergeStyleArrays(e.undefined,e[m]);g.setStyleValuesCanvas(e);g.setStyleValuesModel(this._oldStyleValuesAllStates.undefined);g.refresh();require("davinci/ve/States").resetState(g.domNode);
dojo.publish("/davinci/ui/widgetPropertiesChanged",[[g]])}}}})})},"davinci/lang/ve":function(){define([],function(){return{common:"Common",widgetSpecific:"Widget",events:"Events",layout:"Layout",showMinMax:"show min/max",padding:"Padding",margins:"Margins",showtrbl:"show t/r/b/l",background:"Background",border:"Border",showDetails:"show details",fontsAndText:"Fonts/Text",shapesSVG:"SVG",properties:"properties",Scenes:"Scenes",States:"States",ActiveScene:"This scene is currently visible",AppStateFocus:"This application state is the target for application-state-specific visibility or styling changes",
InitialScene:"This scene will show initially when the page runs",chooseDeviceSilhouette:"Choose a device silhouette: ",filesHasUnsavedChanges:"The file '${0}' has unsaved changes, \"Save\" changes and continue with switch device silhouette.",selectAncestorTitle:"Select ancestor",selectAncestorLabel:"Select ancestor (closest ancestor listed first):",createNewState:"Create New State",updateCurrentState:"Update Current State",createLabel:"Create",updateLabel:"Update",modifyState:"Modify State",modifyLabel:"Update",
stateLabel:"Name",enterStateName:"Please enter a state name.",stateNameExists:"State name '${name}' already exists. Please enter a different state name.",renameState:"Rename State",renameLabel:"Rename",cancelLabel:"Cancel",newStateLabel:"New name:",manageStates:"Manage Widget Visibility for Different States",manageStatesCheckLabel:"Check:",manageStatesCheckCurrentStateOnly:"Current state",manageStatesCheckAll:"All",manageStatesUncheckAll:"None",manageStatesCheckBackgroundOnly:"Background only",manageStatesAllVisibleFromBackground:"(Visible from Background)",
manageStatesSomeVisibleFromBackground:"(Some visible from Background)",manageStatesSomeVisibleSomeHidden:"(Some visible, some hidden)",initialStateCheckBoxLabel:"Initial state at document load time",EnableApplicationStates:"Enable/disable application states",EnableAsStateContainerDescription:"Setting the check box below and clicking OK will allow custom application states to be defined on the currently selected widget.",DisableAsStateContainerDescription:"Unsetting the check box below and clicking OK will disallow custom application states on the currently selected widget.",
DisableAsStateContainerDataLoss:"Any existing interactivity based on existing application states will be lost.",EnableAsStateContainerWidgetLabel:"Application states are enabled on this widget",EnableApplicationStatesCurrentWidget:"Currently selected widget",EnableApplicationStatesCurrentStates:"Current application states",EnableApplicationStatesNone:"(none)",NewWidgetsCurrentStateTitleBackground:"Toggle whether new widgets go to Background or selected state (current value: Background)",NewWidgetsCurrentStateTitleCurrentState:"Toggle whether new widgets go to Background or selected state (current value: selected state)",
richTextInputHelp:"Provides Rich Text (word processor-like) editing of HTML.",smartInputHelp1:"If you use any markup characters (\x26lt;,\x26gt;,\x26amp;), you need to specify whether the text represents literal (plain) text or HTML markup that should be parsed (using an innerHTML assignment).",smartInputHelp2:"Text represents literal (plain) text.",loading:"Loading...",htmlMarkup:"HTML markup",creatingStyleRules:"Creating Style Rules with app.css",propChangeCannotComplete:"This property change cannot be completed because the operation attempts to modify a read-only theme CSS file.",
toChangeProperty:"To change this property, one technique is to add a class to this widget (at top of Properties palette)  and then open up the CSS Details pane to target a style rule within your app.css file, as described at ${0}.",errorModifyingValue:"Error modifying value",changeWillModify:"This change will modify one of the CSS style rules defined within a 'CSS theme' and will therefore probably impact other widgets on a global basis.",insteadOfChanging:"Instead of changing the theme CSS files, it is usually better to add a class to this widget (at the top of the Properties palette) and then open up the CSS Details pane to target a style rule within your app.css file, as described at ${0}.",
okToProceed:"OK to proceed with this change?",valueIsOverriden:"This value is overriden and can not be changed.",applyToWhich:"Apply to which style rule:",onlyApplyToState:" Only apply to current state (${0})",newRule:"[class: ${0} - New rule in ${1}] ",newThemeRule:"[theme: - New rule in ${0}] ",existingRule:"[class: ${0} - Existing rule in ${1}] ",line:" line: ${0})",propUndefined:"undefined",bgdType_emptystring:"",bgdType_none:"none",bgdType_url:"image",bgdType_linear:"linear gradient",bgdType_radial:"radial gradient",
bgdType_other:"other",bgdPickFile:"Choose...",bgdStop:"Stop",bgdAddStop:"Add a new gradient stop after this stop",bgdRemoveStop:"Remove this gradient stop",bgdBackgroundColor:"background-color:",bgdBackgroundImageType:"background-image type:",bgdImageUrl:"Image URL:",bgdUrl:"URL:",bgdColorStops:"Color stops:",bgdColor:"color",bgdPosition:"position",bgdOptions:"Options:",bgdAngle:"Angle:",bgdPosition2:"Position:",bgdShape:"Shape:",bgdExtent:"Extent:",bgdBackgroundRepeat:"background-repeat:",bgdBackgroundPosition:"background-position:",
bgdBackgroundSize:"background-size:",bgdBackgroundOrigin:"background-origin:",bgdBackgroundClip:"background-clip:",bgdBackgroundImageValue:"'background-image' value:",bgdTemplate:"Template:",colorPicker:"Color picker...",removeValue:"Remove Value",selectColor:"select a color",toolBarFor:"",noSelection:"(no selection)",toolBarClass:"class:",toolBarId:"ID:",idAlreadyUsed:"This id is already used by another widget",noValidParents:"No valid parents at this position",willBeChildOf:"Will become a child of:",
candidateParents:"Candidate parents:",toChangePress:"To change, press numbers",vteWarningTitle:"Theme Version Warning",vteWarningMessage:"Theme version does not match Maqetta version this could produce unexpected results. We suggest recreating the custom theme using the current version of Maqetta and deleting the existing theme.",vteWarningUnsuportedBrowserTitle:"Unsupported brower",vteWarningUnsuportedBrowserMessage:"Editing mobile themes is only supported on webkit browsers, we sugguest using Chrome or Safari to customize mobile themes.",
vteWarningToolkitMessage:"Theme version does not match workspace library version this could produce unexpected results. We suggest recreating the custom theme using the current version of Maqetta and deleting the existing theme.",vteErrorTitle:"Theme Version Error",vteErrorMessage:"Theme version is not supported by this version of Maqetta. You must recreating custom theme using the current version of Maqetta and deleting the existing theme..",vteErrorSavingResourceMessage:"error saving resource\n",
"SourceComboButton-source":"Source","SourceComboButton-splitHorizontal":"Split-H","SourceComboButton-splitVertical":"Split-V","LayoutDropDownButton-flow":"Flow","LayoutDropDownButton-absolute":"Absolute"}})},"davinci/ve/palette/Palette":function(){define("dojo/_base/declare dojo/_base/lang dojo/_base/connect dojo/on dojo/query dojo/dom-class dojo/Deferred dijit/focus dijit/_WidgetBase davinci/Runtime davinci/Workbench dijit/_KeyNavContainer dijit/form/TextBox dijit/form/DropDownButton dijit/DropDownMenu dijit/MenuItem davinci/ui/dnd/DragSource davinci/ve/metadata davinci/library ./PaletteFolder ./PaletteItem davinci/_common davinci/ve/tools/CreateTool davinci/workbench/Preferences".split(" "),
function(q,n,h,g,e,m,c,k,f,d,b,a,p,r,v,w,x,B,z,u,y,A,C,F){return q("davinci.ve.palette.Palette",[f,a],{descriptors:"",_displayShowValue:"block",_presetClassNamePrefix:"maqPaletteSection_",_presetSections:{},_presetCreated:{},raisedItems:[],sunkenItems:[],moreItems:[],helpItems:[],_userWidgetSection:{id:"$$UserWidgets$$",name:"User Widgets",includes:[]},postMixInProperties:function(){this._resource=A},postCreate:function(){dojo.addClass(this.domNode,"dojoyPalette");this.refresh();h.subscribe("/davinci/ui/addedCustomWidget",
this,"addCustomWidget");h.subscribe("/davinci/preferencesChanged",this,"preferencesChanged")},addCustomWidget:function(a){if(this._loaded&&a&&a.$wm&&a.$wm.widgets&&a.$wm.widgets.length){var f=d.currentEditor.getContext().getCompType();F.getPreferences("davinci.ve.editorPrefs",b.getProject()).showAllWidgets&&(f="mobile"==f?"$ALLMOBILE":"$ALLDESKTOP");var c=a.$wm;a=a.$wm.widgets;for(var e=null,p=0;p<a.length;p++){var k=a[p],m;for(m in this._presetSections){var g=null,h=this._presetSections[m];if(h){for(var r=
0;r<h.length;r++){var v=h[r];if("$$UserWidgets$$"==v.id){g=v;break}}g||(g=dojo.clone(this._userWidgetSection),g.preset=this._presetSections[m],g.presetId=m,g.items=[],h.push(g),this._presetCreated[m]&&(this._generateCssRules([g]),this._createPalette(g),g._created=!0));h="type:"+k.type;if(0>g.includes.indexOf(h)){g.includes.push(h);k.$library=c;k.section=g;k._paletteItemGroup=this._paletteItemGroupCount++;g.items.push(k);h=null;r=this.getChildren();for(v=0;v<r.length;v++){var n=r[v];if("davinci.ve.palette.PaletteFolder"==
n.declaredClass&&n.presetId==m&&"$$UserWidgets$$"==n.section.id){h=n;break}}h&&(h.domNode.style.display="none",g={displayName:k.$library._maqGetString(k.type)||k.$library._maqGetString(k.name)||k.name,description:k.$library._maqGetString(k.type+"_description")||k.$library._maqGetString(k.name+"_description")||k.description||k.type,name:k.name,paletteId:this.id,type:k.type,data:k.data||{name:k.name,type:k.type,properties:k.properties,children:k.children},tool:k.tool,category:"custom",section:g,PaletteFolderSection:h,
PaletteFolderSubsection:null,_paletteItemGroup:k._paletteItemGroup,_paletteGroupSelected:!0},this._setIconProperties(k,g),this._createItem(g,h).domNode.style.display="none",f==m&&(e=h))}}else console.error("Palette.js:addCustomWidget - no sections for comptype\x3d"+m)}}e&&e.showHideFolderContents(!0)}},setContext:function(a){this._context=a;try{this._loadPalette()}catch(D){console.error("_loadPalette:crash "+D)}this._filter();this.updatePaletteVisibility()},refresh:function(){delete this._loaded;
this._presetSections={};this._createFolderTemplate();this._createHeader();if(this._context)try{this._loadPalette()}catch(E){console.error("_loadPalette:crash")}},_loadPalette:function(){if(!this._loaded){var a=B.getLibrary(),f={};z.getUserLibs(b.getProject()).forEach(function(b){var d;a:{d=b.id;b=b.version;for(var c in a)if(a.hasOwnProperty(c)){var e=a[c];if(e.name===d&&e.version===b){b={};b[d]=a[c];d=b;break a}}d=null}d&&dojo.mixin(f,d)});var c={},e=[],p;for(p in f)if(f.hasOwnProperty(p)){var k=
f[p].$wm;k&&dojo.forEach(k.widgets,function(a){"untested"==a.category||a.hidden||e.push(a.type)})}this._paletteItemGroupCount=0;if(this._widgetPalette=d.getSiteConfigData("widgetPalette"))if((p=this._widgetPalette.presets)&&"object"==typeof p)for(var m in p){k=e.concat();this._presetSections[m]=[];var g=p[m],h,r="string"==typeof g.sections?this._widgetPalette.defs?this._widgetPalette.defs[g.sections]:void 0:g.sections;if(r&&r.length){var v=[],n;for(n in c){var w=c[n];w.descriptor&&v.push({name:n,
value:w})}v.sort(function(a,b){a=a.name.split("/").pop().toLowerCase();b=b.name.split("/").pop().toLowerCase();return a<b?-1:a>b?1:0});for(var w=!1,y,x=0;x<v.length;x++){w||(n=dojo.clone(this._userWidgetSection),r=r.concat(n),w=!0,y=n.includes);var A=v[x].value.descriptor.widgets;for(n=0;n<A.length;n++)y.push("type:"+A[n].type)}for(v=0;v<r.length;v++){w=dojo.clone("string"==typeof r[v]?this._widgetPalette.defs?this._widgetPalette.defs[r[v]]:void 0:r[v]);w.preset=g;w.presetId=m;if(w.subsections&&w.subsections.length)for(x=
w.subsections,A=0;A<x.length;A++){if("string"==typeof x[A]){var u=this._widgetPalette.defs?this._widgetPalette.defs[x[A]]:void 0;u&&(x[A]=dojo.clone(u))}u=x[A];u.includes&&0<=u.includes.indexOf("$$AllOthers$$")&&(h=u);u.preset=g;u.presetId=m;this._createSectionItems(u,g,k)}else this._createSectionItems(w,g,k),w.includes&&0<=w.includes.indexOf("$$AllOthers$$")&&(h=w);this._presetSections[m].push(w)}}else console.warning("No sections defined for preset "+m+" in widgetPalette.json (in siteConfig folder)");
for(g=0;g<k.length;g++)r=k[g],h&&(r=B.getWidgetDescriptorForType(r),r=dojo.clone(r),this._prepareSectionItem(r,h,this._paletteItemGroupCount),h.items.push(r),this._paletteItemGroupCount++)}else console.warning("No presets defined in widgetPalette.json (in siteConfig folder)");else console.error("widgetPalette.json not defined (in siteConfig folder)");this._loaded=!0}},_generateCssRules:function(a){var b=dojo.doc.styleSheets[0];b&&dojo.forEach(a,function(a){a.items&&dojo.forEach(a.items,function(a){var d=
a.iconBase64||this._getIconUri(a.icon,"ve/resources/images/file_obj.gif");a="img.davinci_"+a.type.replace(/[\.\/]/g,"_");d="{background-image: url("+d+")}";dojo.isIE?b.addRule(a,d):b.insertRule(a+d,b.cssRules.length)},this)},this)},_createPaletteItemsForComponent:function(a,b){if(a.items){var d=null;dojo.forEach(a.items,function(f){if(!f.hidden){var c={displayName:f.$library._maqGetString(f.type)||f.$library._maqGetString(f.name)||f.name,description:f.$library._maqGetString(f.type+"_description")||
f.$library._maqGetString(f.name+"_description")||f.description||f.type,name:f.name,paletteId:this.id,type:f.type,data:f.data||{name:f.name,type:f.type,properties:f.properties,children:f.children},category:a.name,section:a,preset:a.preset,presetId:a.presetId,presetClassName:b.presetClassName,PaletteFolderSection:b.PaletteFolderSection,PaletteFolderSubsection:b.PaletteFolderSubsection,_paletteItemGroup:f._paletteItemGroup,_paletteGroupSelected:f._paletteItemGroup!=d,_collectionName:f.$library&&f.$library.collections&&
f.$library.collections[f.collection]&&f.$library.collections[f.collection].name,ignoreMeta:f.ignoreMeta,userData:f.userData,forceShow:f.forceShow,iconHTML:f.iconHTML};this._setIconProperties(f,c);this._createItem(c);d=f._paletteItemGroup}},this)}},_createPalette:function(a){var b=a.presetId?this._presetClassNamePrefix+a.presetId:null,d={paletteId:this.id,icon:this._getIconUri(a.icon,"ve/resources/images/fldr_obj.gif"),iconBase64:a.iconBase64,displayName:a.name,section:a,subsections:a.subsections,
subsection_container:null,preset:a.preset,presetId:a.presetId,presetClassName:b};this._createFolder(d).then(function(d){if(a.subsections&&a.subsections.length)for(var f=0;f<a.subsections.length;f++){var c=a.subsections[f],c={paletteId:this.id,icon:this._getIconUri(c.icon,"ve/resources/images/fldr_obj.gif"),iconBase64:c.iconBase64,displayName:c.name,section:a,subsection:c,subsection_container:d,preset:a.preset,presetId:a.presetId,presetClassName:b};this._createFolder(c).then(function(c){d._children.push(c);
this._createPaletteItemsForComponent(a.subsections[f],{presetClassName:b,PaletteFolderSection:d,PaletteFolderSubsection:c})}.bind(this))}else this._createPaletteItemsForComponent(a,{presetClassName:b,PaletteFolderSection:d,PaletteFolderSubsection:null})}.bind(this))},_getIconUri:function(a,d){return a?0==a.indexOf("http")?a:b.location()+a:require.toUrl("davinci/"+d)},_createFolder:function(a){var b=new c;require(["davinci/ve/palette/PaletteFolder"],function(d){d=new d(a);this.addChild(d);b.resolve(d)}.bind(this));
return b},_createFolderTemplate:function(){this.folderTemplate=dojo.create("div",{className:"dojoyPaletteCommon dojoyPaletteFolder dojoyPaletteFolderLow ui-widget-header",innerHTML:'\x3ca href\x3d"javascript:void(0)"\x3e\x3cimg border\x3d"0"/\x3e\x3c/a\x3e'})},_createHeader:function(){},_updateShowAllWidgetsPreference:function(a){var d=b.getProject(),f=F.getPreferences("davinci.ve.editorPrefs",d);f.showAllWidgets=a;F.savePreferences("davinci.ve.editorPrefs",d,f)},_updateShowAllWidgetsMenu:function(a){},
_clearFilter:function(){this.filterField&&this.filterField.set("value","");this._filter()},_filter:function(){var a=this.context.getCompType(),d=F.getPreferences("davinci.ve.editorPrefs",b.getProject());d.showAllWidgets=!0;d.showAllWidgets&&(a="mobile"==a?"$ALLMOBILE":"$ALLDESKTOP");dojo.removeClass(this.domNode,"maqWidgetsFiltered");this.toolbarDiv&&dojo.removeClass(this.toolbarDiv,"maqWidgetsToolbarFiltered");this.getChildren().forEach(function(b){"dijit.form.TextBox"!=b.declaredClass&&dojo.style(b.domNode,
"display","davinci.ve.palette.PaletteFolder"===b.declaredClass&&b.presetId==a&&0<b._children.length&&("simple"==b._type||"subsection_container"==b._type)?"block":"none")})},_hasItem:function(a){for(var b=this.getChildren(),d=0;d<b.length;d++)if(b[d].type==a)return!0;return!1},_createItem:function(a,b){if("$$UserWidgets$$"!=a.section.id){var d=B.queryDescriptor(a.type,"collection"),f;if(a.preset&&(f=a.preset.collections,!f||!f.length)){console.error("_create item : presetCollections.l\x3d0");return}if(a.preset&&
a.preset.exclude){var c="string"==typeof a.preset.exclude?this._widgetPalette.defs?this._widgetPalette.defs[a.preset.exclude]:void 0:a.preset.exclude;if(c&&0<=c.indexOf(a.type)){console.error("_create item : exclude \x3d 1");return}}c=!1;if(f&&f.length){for(var p=0;p<f.length;p++)if(f[p].id==d&&f[p].show){c=!0;break}!0===a.ignoreMeta&&(c=!0);if(!c)return}}a.icon=a.iconLarge;d=new y(a);b?b.addChild(d):this.addChild(d);a.paletteItem=d;a.PaletteFolderSubsection?(a.PaletteFolderSubsection._children.push(d),
d.domNode.style.display=a.PaletteFolderSubsection._isOpen&&d._paletteGroupSelected?this._displayShowValue:"none"):a.PaletteFolderSection&&(a.PaletteFolderSection._children.push(d),d.domNode.style.display=a.PaletteFolderSection._isOpen&&d._paletteGroupSelected?this._displayShowValue:"none");b=e(".paletteItemImageContainer",d.domNode)[0];b=new x(d.domNode,"component",d,b);b.targetShouldShowCaret=!0;b.returnCloneOnFailure=!1;this.connect(b,"onDragStart",dojo.hitch(this,function(a){this.onDragStart(a)}));
this.connect(b,"onDragEnd",dojo.hitch(this,function(a){this.onDragEnd(a)}));a.forceShow&&(d.domNode.style.display="inline-block");return d},_prepareSectionItem:function(a,b,d){var f=B.getLibraryMetadataForType(a.type);a.$library=f;a.section=b;a._paletteItemGroup=d},_createSectionItems:function(a,b,d){a.items=[];collections=b.collections;var f=a.includes;if(!f||!f.length)return console.error("No includes property for preset "+b+" in widgetPalette.json (in siteConfig folder)"),[];for(b=0;b<f.length;b++){for(var c=
f[b],e=n.isArray(c)?c:[c],c=[],p=0;p<e.length;p++){var k=e[p],m=[];if("type:"===k.substr(0,5)){var g=B.getWidgetDescriptorForType(k.substr(5));g&&m.push(g)}else m=B.getWidgetsWithTag(k);for(k=0;k<m.length;k++)g=m[k],g=dojo.clone(g),this._prepareSectionItem(g,a,this._paletteItemGroupCount),c.push(g)}e=[];if(collections&&collections.length){for(m=0;m<collections.length;m++)for(k=collections[m],p=0;p<c.length;)g=c[p],g.collection==k.id?(e.push(g),c.splice(p,1)):p++;for(p=0;p<c.length;p++)e.push(c[p])}else e=
c;for(p=0;p<e.length;p++)c=e[p],m=d.indexOf(c.type),0<=m&&d.splice(m,1),a.items.push(c);this._paletteItemGroupCount++}},updatePaletteVisibility:function(){this._clearFilter();this._updateShowAllWidgetsMenu();var a=d.currentEditor.getContext().getCompType();this._presetCreated[a]=!0;dojo.addClass(this.domNode,"paletteLayoutIcons");this._displayShowValue="inline-block";var b=this._presetSections[a];if(b)for(var f=0;f<b.length;f++){var c=b[f];c._created||(this._generateCssRules([c]),this._createPalette(c),
c._created=!0)}b=this.getChildren();f=0;for(c=b.length;f<c;f++){var e=b[f];e&&e.domNode&&e.presetId&&("davinci.ve.palette.PaletteFolder"==e.declaredClass?(e.domNode.style.display=e.presetId==a?0==e._children.length||"subsection"==e._type?"none":"block":"none","subsubsection_container"==e._type&&(e._openSubsection=null),e._isOpen=!1):e.domNode.style.display=e.forceShow?"inline-block":"none")}},preferencesChanged:function(){for(var a=F.getPreferences("davinci.ve.editorPrefs",b.getProject()),a=a.widgetPaletteLayout&&
"icons"!=a.widgetPaletteLayout?"icon":"iconLarge",d=this.getChildren(),f=0;f<d.length;f++){var c=d[f];"davinci.ve.palette.PaletteItem"==c.declaredClass&&c.updateImgSrc(c[a])}this.updatePaletteVisibility()},flattenAll:function(){for(var a=0;a<this.raisedItems.length;a++)this.raisedItems[a].flat(this.raisedItems[a].domNode);this.raisedItems=[];for(a=0;a<this.sunkenItems.length;a++){var b=this.sunkenItems[a];b._tooltipDialog&&(b.paletteItemMoreCloseCleanup(),b.paletteItemHelpCloseCleanup());b.flat(b.domNode);
b._selectionShowing=!1}this.sunkenItems=[]},removeSelectionAll:function(){try{this.flattenAll()}catch(O){console.error("flatten failed")}for(var a=e(".paletteItemSelectionContent",this.domNode),b=0;b<a.length;b++){var d=a[b];d&&d.parentNode&&(d.parentNode.innerHTML="")}},getPaletteItemsSameGroup:function(a){for(var b=[],d=a._paletteItemGroup,f;a&&a._paletteItemGroup;)if(a._paletteItemGroup==d)a=(f=a)&&a.domNode&&a.domNode.previousSibling&&a.domNode.previousSibling._paletteItem;else break;for(a=f;a&&
a._paletteItemGroup==d;)b.push(a),a=a&&a.domNode&&a.domNode.nextSibling&&a.domNode.nextSibling._paletteItem;return b},_setIconProperties:function(a,b){b.icon=a.iconBase64||a.icon&&this._getIconUri(a.icon,"ve/resources/images/file_obj.gif")||a.iconLargeBase64||a.iconLarge&&this._getIconUri(a.iconLarge,"ve/resources/images/file_obj.gif")||this._getIconUri(a.icon,"ve/resources/images/file_obj.gif");b.iconLarge=a.iconLargeBase64||a.iconLarge&&this._getIconUri(a.iconLarge,"ve/resources/images/file_obj.gif")||
a.iconBase64||this._getIconUri(a.icon,"ve/resources/images/file_obj.gif")},onDragStart:function(a){this.removeSelectionAll();this.selectedItem=null;var b=a.dragSource.data;B.getHelper(b.type,"tool").then(function(a){a=new (a||C)(dojo.clone(b.data),b.userData);this._context.setActiveTool(a)}.bind(this));this._context.blockChange(!1);a._dragClone&&(m.add(a._dragClone,"paletteDragContainer"),dojo.create("div",{className:"maqCandidateParents"},a._dragClone));this._context.setActiveDragDiv(a._dragClone);
this._dragKeyDownListener=dojo.connect(document,"onkeydown",dojo.hitch(this,function(a){var b=this._context.getActiveTool();if(b&&b.onKeyDown)b.onKeyDown(a)}));this._dragKeyUpListener=dojo.connect(document,"onkeyup",dojo.hitch(this,function(a){var b=this._context.getActiveTool();if(b&&b.onKeyUp)b.onKeyUp(a)}))},onDragEnd:function(a){this._context.setActiveTool(null);this._context.setActiveDragDiv(null);dojo.disconnect(this._dragKeyDownListener);dojo.disconnect(this._dragKeyUpListener);k.curNode&&
k.curNode.blur&&k.curNode.blur();this.removeSelectionAll();this.selectedItem=null;this.flattenAll()},onDragMove:function(a){},nop:function(){return!1},__dummy__:null})})},"davinci/ui/dnd/DragSource":function(){define(["dojo/_base/declare","dojo/fx"],function(q,n){return q("davinci.ui.dnd.DragSource",null,{disabled:!1,dragObject:null,dragClone:null,offsetParent:null,offsetParentCoords:null,parentCoords:null,refNode:null,positioning:null,useCurrentPositioning:!0,targetShouldShowCaret:!1,draggingMousePosition:"TopLeft",
data:null,returnCloneOnFailure:!0,constructor:function(h,g,e,m){this.data=e;h=dojo.byId(h);h.dragSource=this;this.domNode=h;this.dragObject=m?m:h;this.refNode=h;this.type=g;this.offsetParent=dojo.doc.body},onDragDown:function(h){this.useCurrentPositioning&&(this.positioning=dojo.style(this.refNode,"position"));this.storeMouseDownInfo(h);this.initDrag(h)},onDragStart:function(h){this.createDragClone(h);return h._dragClone=this.dragClone},onDragMove:function(h){"TopLeft"==this.draggingMousePosition?
(this.dragClone.style.top=h.pageY+4+(h.documentY||0)+"px",this.dragClone.style.left=h.pageX+4+(h.documentX||0)+"px"):"ClickedPosition"==this.draggingMousePosition&&(this.dragClone.style.top=h.pageY-this.dragOffset.y+(h.documentY||0)+"px",this.dragClone.style.left=h.pageX-this.dragOffset.x+(h.documentX||0)+"px");"none"==this.dragClone.style.display&&(this.dragClone.style.display="")},onDragEnd:function(h){"dropSuccess"!=h.dragStatus&&this.returnCloneOnFailure?"dropFailure"==h.dragStatus?this.returnClone():
console.error("DragSource#onDragEnd: internal error: e.dragStatus is not set"):this.removeClone();this.cleanupDrag()},unregister:function(){this.domNode.dragSource=null;this.cleanupDrag()},reregister:function(){this.domNode.dragSource=this;this.initDrag()},storeMouseDownInfo:function(h){this.layerX=h.layerX-1;this.layerY=h.layerY-1;this.pageX=h.pageX;this.pageY=h.pageY;this.scrollOffset=dojo._docScroll();window.__x&&window.__x.apply(this);this.dragStartPosition=dojo.position(this.refNode,!0);this.dragStartCssPosition=
{y:this.refNode.offsetTop,x:this.refNode.offsetLeft};this.dragOffset={y:h.pageY-this.dragStartPosition.y,x:h.pageX-this.dragStartPosition.x};this.offsetParentCoords=dojo.position(this.offsetParent,!0);h=dojo.position(this.domNode.parentNode,!0);this.parentCoords={y:h.y-this.offsetParentCoords.y,x:h.x-this.offsetParentCoords.x};this.fixMouseDownInfo&&this.fixMouseDownInfo(this)},initDrag:function(){},cleanupDrag:function(){},createDragClone:function(h){this.dragClone=h=h.dragSource.dragHandler&&h.dragSource.dragHandler.createDragClone?
h.dragSource.dragHandler.createDragClone():this.dragObject.cloneNode(!0);dojo.style(h,"opacity",.5);h.style.zIndex=1001E3;var g=dojo.contentBox(this.dragObject);h.style.width=g.w+"px";h.style.height=g.h+"px";h.style.top=this.dragObject.offsetTop+4+"px";h.style.left=this.dragObject.offsetLeft+4+"px";h.style.position="absolute";h.style.clear="both";h.style.display="none";this.offsetParent.appendChild(h)},setDragTarget:function(h){this.dragObject=h},cancelEvent:function(h){h.stopPropagation();h.preventDefault()},
removeClone:function(){setTimeout(dojo.hitch(this,"removeClone_1"),0)},removeClone_1:function(){try{this.dragClone.parentNode.removeChild(this.dragClone),this.dragClone=null}catch(h){logError(h)}},returnClone:function(){var h=dojo.position(this.dragClone,!0),g=this.dragStartPosition,e=this;n.slideTo({node:this.dragClone,top:h.y>g.y?g.y-10:g.y+10,left:h.x>g.x?g.x-10:g.x+10,duration:400,onEnd:function(){n.slideTo({node:e.dragClone,top:g.y,left:g.x,duration:100,onEnd:function(){e.dragClone.parentNode.removeChild(e.dragClone);
e.dragClone=null;e.onCloneReturned()}}).play()}}).play()},onCloneReturned:function(){},globalChangeCursor:function(h){var g=dojo.doc.styleSheets[0];if(g)if(h){if(this._showingCursor){if(this._showingCursor==h)return;this.globalChangeCursor(null)}this._showingCursor=h;this._ruleIndex=g.cssRules.length;g.insertRule("*{cursor:"+h+" ! important;}",g.cssRules.length)}else this._showingCursor&&(this._showingCursor=null,g.deleteRule(this._ruleIndex))}})})},"dojo/fx":function(){define("./_base/lang ./Evented ./_base/kernel ./_base/array ./aspect ./_base/fx ./dom ./dom-style ./dom-geometry ./ready require".split(" "),
function(q,n,h,g,e,m,c,k,f,d,b){h.isAsync||d(0,function(){b(["./fx/Toggler"])});h=h.fx={};d={_fire:function(a,b){this[a]&&this[a].apply(this,b||[]);return this}};var a=function(a){this._index=-1;this._animations=a||[];this._current=this._onAnimateCtx=this._onEndCtx=null;this.duration=0;g.forEach(this._animations,function(a){this.duration+=a.duration;a.delay&&(this.duration+=a.delay)},this)};a.prototype=new n;q.extend(a,{_onAnimate:function(){this._fire("onAnimate",arguments)},_onEnd:function(){this._onAnimateCtx.remove();
this._onEndCtx.remove();this._onAnimateCtx=this._onEndCtx=null;this._index+1==this._animations.length?this._fire("onEnd"):(this._current=this._animations[++this._index],this._onAnimateCtx=e.after(this._current,"onAnimate",q.hitch(this,"_onAnimate"),!0),this._onEndCtx=e.after(this._current,"onEnd",q.hitch(this,"_onEnd"),!0),this._current.play(0,!0))},play:function(a,b){this._current||(this._current=this._animations[this._index=0]);if(!b&&"playing"==this._current.status())return this;var d=e.after(this._current,
"beforeBegin",q.hitch(this,function(){this._fire("beforeBegin")}),!0),f=e.after(this._current,"onBegin",q.hitch(this,function(a){this._fire("onBegin",arguments)}),!0),c=e.after(this._current,"onPlay",q.hitch(this,function(a){this._fire("onPlay",arguments);d.remove();f.remove();c.remove()}));this._onAnimateCtx&&this._onAnimateCtx.remove();this._onAnimateCtx=e.after(this._current,"onAnimate",q.hitch(this,"_onAnimate"),!0);this._onEndCtx&&this._onEndCtx.remove();this._onEndCtx=e.after(this._current,
"onEnd",q.hitch(this,"_onEnd"),!0);this._current.play.apply(this._current,arguments);return this},pause:function(){if(this._current){var a=e.after(this._current,"onPause",q.hitch(this,function(b){this._fire("onPause",arguments);a.remove()}),!0);this._current.pause()}return this},gotoPercent:function(a,b){this.pause();var d=this.duration*a;this._current=null;g.some(this._animations,function(a){if(a.duration<=d)return this._current=a,!0;d-=a.duration;return!1});this._current&&this._current.gotoPercent(d/
this._current.duration,b);return this},stop:function(a){if(this._current){if(a){for(;this._index+1<this._animations.length;++this._index)this._animations[this._index].stop(!0);this._current=this._animations[this._index]}var b=e.after(this._current,"onStop",q.hitch(this,function(a){this._fire("onStop",arguments);b.remove()}),!0);this._current.stop()}return this},status:function(){return this._current?this._current.status():"stopped"},destroy:function(){this._onAnimateCtx&&this._onAnimateCtx.remove();
this._onEndCtx&&this._onEndCtx.remove()}});q.extend(a,d);h.chain=function(b){return new a(b)};var p=function(a){this._animations=a||[];this._connects=[];this.duration=this._finished=0;g.forEach(a,function(a){var b=a.duration;a.delay&&(b+=a.delay);this.duration<b&&(this.duration=b);this._connects.push(e.after(a,"onEnd",q.hitch(this,"_onEnd"),!0))},this);this._pseudoAnimation=new m.Animation({curve:[0,1],duration:this.duration});var b=this;g.forEach("beforeBegin onBegin onPlay onAnimate onPause onStop onEnd".split(" "),
function(a){b._connects.push(e.after(b._pseudoAnimation,a,function(){b._fire(a,arguments)},!0))})};q.extend(p,{_doAction:function(a,b){g.forEach(this._animations,function(d){d[a].apply(d,b)});return this},_onEnd:function(){++this._finished>this._animations.length&&this._fire("onEnd")},_call:function(a,b){var d=this._pseudoAnimation;d[a].apply(d,b)},play:function(a,b){this._finished=0;this._doAction("play",arguments);this._call("play",arguments);return this},pause:function(){this._doAction("pause",
arguments);this._call("pause",arguments);return this},gotoPercent:function(a,b){var d=this.duration*a;g.forEach(this._animations,function(a){a.gotoPercent(a.duration<d?1:d/a.duration,b)});this._call("gotoPercent",arguments);return this},stop:function(a){this._doAction("stop",arguments);this._call("stop",arguments);return this},status:function(){return this._pseudoAnimation.status()},destroy:function(){g.forEach(this._connects,function(a){a.remove()})}});q.extend(p,d);h.combine=function(a){return new p(a)};
h.wipeIn=function(a){var b=a.node=c.byId(a.node),d=b.style,f;a=m.animateProperty(q.mixin({properties:{height:{start:function(){f=d.overflow;d.overflow="hidden";if("hidden"==d.visibility||"none"==d.display)return d.height="1px",d.display="",d.visibility="",1;var a=k.get(b,"height");return Math.max(a,1)},end:function(){return b.scrollHeight}}}},a));var p=function(){d.height="auto";d.overflow=f};e.after(a,"onStop",p,!0);e.after(a,"onEnd",p,!0);return a};h.wipeOut=function(a){var b=(a.node=c.byId(a.node)).style,
d;a=m.animateProperty(q.mixin({properties:{height:{end:1}}},a));e.after(a,"beforeBegin",function(){d=b.overflow;b.overflow="hidden";b.display=""},!0);var f=function(){b.overflow=d;b.height="auto";b.display="none"};e.after(a,"onStop",f,!0);e.after(a,"onEnd",f,!0);return a};h.slideTo=function(a){var b=null,d=null,p=function(a){return function(){var c=k.getComputedStyle(a),e=c.position;b="absolute"==e?a.offsetTop:parseInt(c.top)||0;d="absolute"==e?a.offsetLeft:parseInt(c.left)||0;"absolute"!=e&&"relative"!=
e&&(c=f.position(a,!0),b=c.y,d=c.x,a.style.position="absolute",a.style.top=b+"px",a.style.left=d+"px")}}(a.node=c.byId(a.node));p();a=m.animateProperty(q.mixin({properties:{top:a.top||0,left:a.left||0}},a));e.after(a,"beforeBegin",p,!0);return a};return h})},"davinci/ve/palette/PaletteFolder":function(){define("dojo/_base/declare dijit/_WidgetBase dojo/dom-class dojo/fx davinci/Runtime davinci/ve/metadata".split(" "),function(q,n,h,g,e,m){return q("davinci.ve.palette.PaletteFolder",n,{icon:"",displayName:"",
paletteId:"",palette:null,preset:null,presetId:null,presetClassName:null,_type:"",_isOpen:!1,_openSubsection:null,buildRendering:function(){this.palette=dijit.byId(this.paletteId);var c=this.domNode=this.palette.folderTemplate.cloneNode(!0);this.presetClassName&&h.add(c,this.presetClassName);var e="PaletteFolder__"+this.presetId+"__"+this.section.id;this.subsection&&(e+="__"+this.subsection.id);dojo.attr(c,"selType",e);e=c.firstChild;dojo.attr(e,"tabIndex","0");e.onclick=this.palette.nop;e.firstChild.src=
this.iconBase64?this.iconBase64:this.icon;e.appendChild(dojo.doc.createTextNode(this.displayName));c._paletteFolder=this;this._type=this.subsections?"subsection_container":this.subsection?"subsection":"simple";"subsection"==this._type&&h.add(c,"PaletteFolderSubsection");this._children=[]},postCreate:function(){this.connect(this.domNode,"onmouseover","folderMouseOverHandler");this.connect(this.domNode,"onmouseout","folderMouseOutHandler");this.connect(this.domNode,"onclick","folderClickHandler")},
startup:function(){},isFocusable:function(){return!0},focus:function(){dijit.focus(this.domNode)},addChild:function(c){for(var e=this.palette.getChildren(),f=0,d=e.length;f<d;f++)if(e[f]==this)return this.palette.addChild(c,f+1),!0;return!1},_paletteItemGroupInfo:function(c,e){var f={},d=e,b=c[d],a=b._paletteItemGroup;do{b._paletteGroupSelected&&(f.selectedIndex=d);d++;if(d>=c.length)break;b=c[d]}while("davinci.ve.palette.PaletteItem"==b.declaredClass&&b._paletteItemGroup===a);"number"!=typeof f.selectedIndex&&
(f.selectedIndex=e,c[e]._paletteGroupSelected=!0);f.endIndex=d-1;return f},folderClickHandler:function(c){this.showHideFolderContents()},showHideFolderContents:function(c){for(var e=this.palette.getChildren(),f=0,d=e.length;f<d;){var b=e[f];if(b==this){"none"==this.domNode.style.display&&g.wipeIn({node:this.domNode,duration:100}).play();if("subsection_container"==this._type)for(this._isOpen="boolean"==typeof c?c:!this._isOpen,b=f+1;b<d;b++)if(f=e[b],"davinci.ve.palette.PaletteFolder"==f.declaredClass){if("subsection"!=
f._type)break;0==f._children.length?(f.domNode.style.display="none",f.isOpen=!1):this._isOpen?(g.wipeIn({node:f.id,duration:100}).play(),f._isOpen=f==f.subsection_container._openSubsection):(g.wipeOut({node:f.id,duration:100}).play(),f.isOpen=!1)}else this._isOpen&&f.PaletteFolderSubsection._isOpen?g.wipeIn({node:f.id,duration:100,onEnd:function(a){setTimeout(function(){a.style.height=""},1)}.bind(this,f.domNode)}).play():f.domNode.style.display="none";else for(this._isOpen="boolean"==typeof c?c:
!this._isOpen,"subsection"==this._type&&(this.subsection_container._openSubsection=this._isOpen?this:null),b=f+1;b<d;){f=e[b];if("davinci.ve.palette.PaletteItem"!=f.declaredClass)break;for(f=this._paletteItemGroupInfo(e,b);b<=f.endIndex;b++){var a=e[b],p=m.getWidgetDescriptorForType(a.type),h;p||(h=!0);if(p&&"custom"==p.category)h=!0;else if(p=p&&p.collection,h=!1,a.preset&&a.preset.collections)for(var n=a.preset.collections,w=0;w<n.length;w++){var x=n[w];if(x.id&&x.id===p){h=x.show;break}}b==f.selectedIndex&&
h?this._isOpen?g.wipeIn({node:a.id,duration:100,onEnd:function(a){setTimeout(function(){a.style.height=""},1)}.bind(this,a.domNode)}).play():g.wipeOut({node:a.id,duration:100}).play():a.domNode.style.display="none"}}f=b}else"davinci.ve.palette.PaletteItem"==b.declaredClass&&"none"!=b.domNode.style.display&&g.wipeOut({node:b.id,duration:100}).play(),"davinci.ve.palette.PaletteFolder"!=b.declaredClass||"simple"!=b._type&&"subsection"!=b._type||(b._isOpen=!1),"davinci.ve.palette.PaletteFolder"==b.declaredClass&&
"subsection_container"==b._type&&b!=this.subsection_container&&(b._isOpen=!1),"davinci.ve.palette.PaletteFolder"!=b.declaredClass||"subsection"!=b._type||b.subsection_container._isOpen||"none"==b.domNode.style.display||(g.wipeOut({node:b.id,duration:100}).play(),b._isOpen=!1),f++}return!1},folderMouseOverHandler:function(c){dojo.removeClass(this.domNode,"dojoyPaletteFolderLow");dojo.addClass(this.domNode,"dojoyPaletteFolderHi")},folderMouseOutHandler:function(c){dojo.removeClass(this.domNode,"dojoyPaletteFolderHi");
dojo.addClass(this.domNode,"dojoyPaletteFolderLow")}})})},"davinci/ve/palette/PaletteItem":function(){define("dojo/_base/declare dojo/on dojo/_base/event dojo/query dojo/dom-construct dojo/dom-geometry dijit/focus dijit/_WidgetBase dojo/dom-class dojox/html/entities dijit/popup dijit/Tooltip dijit/TooltipDialog davinci/ve/tools/CreateTool davinci/ui/dnd/DragManager davinci/ve/utils/GeomUtils davinci/ve/metadata davinci/_common".split(" "),function(q,n,h,g,e,m,c,k,f,d,b,a,p,r,v,w,x,B){return q("davinci.ve.palette.PaletteItem",
k,{icon:"",displayName:"",name:"",paletteId:"",type:"",data:null,tool:"",palette:null,category:"",template:'\x3ca href\x3d"javascript:void(0)"\x3e\x3cspan class\x3d"paletteItemSelectionContainer"\x3e\x3c/span\x3e\x3cspan class\x3d"paletteItemNormalContainer"\x3e\x3cspan class\x3d"paletteItemImageContainer"\x3e\x3cimg class\x3d"paletteItemImage" border\x3d"0"/\x3e\x3c/span\x3e\x3cspan class\x3d"paletteItemLabelContainer"\x3e\x3cspan class\x3d"paletteItemLabel"\x3e\x3c/span\x3e\x3c/span\x3e\x3c/span\x3e\x3c/a\x3e',
selectedWidgetTemplate:'\x3cspan class\x3d"paletteItemSelectionContent"\x3e\x3cspan class\x3d"paletteItemSelectedStrip paletteItemSelectedStripV paletteItemSelectedStripL"\x3e\x3c/span\x3e\x3cspan class\x3d"paletteItemSelectedStrip paletteItemSelectedStripV paletteItemSelectedStripR"\x3e\x3c/span\x3e\x3cspan class\x3d"paletteItemSelectedStrip paletteItemSelectedStripH paletteItemSelectedStripT"\x3e\x3c/span\x3e\x3cspan class\x3d"paletteItemSelectedStrip paletteItemSelectedStripH paletteItemSelectedStripB"\x3e\x3c/span\x3e\x3cspan class\x3d"paletteItemSelectedIcon paletteItemSelectedMoreIcon" title\x3d"'+
B.MoreIconTitleString+'"\x3e\x3c/span\x3e\x3cspan class\x3d"paletteItemSelectedIcon paletteItemSelectedHelpIcon" title\x3d"'+B.HelpIconTitleString+'"\x3e\x3c/span\x3e\x3c/span\x3e',preset:null,presetId:null,presetClassName:null,_paletteItemGroup:null,_collectionName:null,_paletteItemMoreConnects:[],_paletteItemHelpConnects:[],item:null,constructor:function(a){this.item=a},buildRendering:function(){this.palette=dijit.byId(this.paletteId);var a=this.domNode=dojo.create("div",{className:"dojoyPaletteCommon dojoyPaletteItem"});
a.innerHTML=this.template;a._paletteItem=this;this.presetClassName&&f.add(a,this.presetClassName);var b=this.type+"__"+this.presetId+"__"+this.PaletteFolderSection.section.id;this.PaletteFolderSubsection&&(b+="__"+this.PaletteFolderSubsection.subsection.id);dojo.attr(a,"selType",b);a=a.firstChild;dojo.attr(a,"tabIndex","0");a.onclick=this.palette.nop;b=a.querySelector("img");this.item&&this.item.iconHTML?(dojo.destroy(b),a.querySelector(".paletteItemImageContainer").innerHTML=this.item.iconHTML):
b.src=this.icon;a=a.querySelector(".paletteItemLabel");a.appendChild(dojo.doc.createTextNode(this.displayName));for(var b=d.encode(a.textContent),c=b.length-1;0<c;c--)0<="_-".indexOf(b[c])?(b=b.substr(0,c+1)+"\x26#8203;"+b.substr(c+1),a.innerHTML=b):b[c].toLowerCase()!=b[c]&&(b=b.substr(0,c)+"\x26#8203;"+b.substr(c),a.innerHTML=b);this.domNode.componentClassName=this.name;dojo.setSelectable(this.domNode,!1)},postCreate:function(){var a=g(".paletteItemNormalContainer",this.domNode)[0];this.connect(a,
"onmouseover","itemMouseOverHandler");this.connect(a,"onmouseout","itemMouseOutHandler");this.connect(this.domNode,"onmousedown","itemMouseDownHandler");this.connect(this.domNode,"onmouseup","itemMouseUpHandler");this.connect(this.domNode,"onkeydown","itemKeyDownHandler")},startup:function(){},isFocusable:function(){return"none"!=dojo.style(this.domNode,"display")},focus:function(){dijit.focus(this.domNode)},itemMouseOverHandler:function(a){this._mouseover=!0;a=this.domNode;this.palette.selectedItem!=
this&&this.raised(a);setTimeout(function(){if(this._mouseover&&0==this.palette.moreItems.length&&0==this.palette.helpItems.length&&this._tooltipNode!=this.domNode){this._tooltipNode&&dijit.hideTooltip(this._tooltipPos);this._tooltipNode=this.domNode;this._tooltipPos=m.position(this.domNode,!0);var a;a='\x3cdiv class\x3d"paletteTooltip"\x3e'+('\x3cdiv class\x3d"paletteTooltipCurrent"\x3e\x3cspan class\x3d"paletteTooltipCurrentWidget"\x3e'+d.encode(this.displayName)+'\x3c/span\x3e \x3cspan class\x3d"paletteTooltipCurrentLibrary"\x3e('+
this._collectionName+")\x3c/span\x3e\x3c/div\x3e");var b=this.palette.getPaletteItemsSameGroup(this);if(1<b.length){a+='\x3cdiv class\x3d"paletteTooltipAlternates"\x3e\x3cspan class\x3d"paletteTooltipAlternatesLabel"\x3e'+B.alternates+': \x3c/span\x3e\x3cspan class\x3d"paletteTooltipAlternatesLibraries"\x3e';for(var f=!1,c=0;c<b.length;c++){var e=b[c];e!=this&&(f&&(a+=", "),a+=e._collectionName,f=!0)}a=a+"\x3c/div\x3e"+('\x3cdiv class\x3d"paletteTooltipNote"\x3e'+B.howToChooseAlternate+"\x3c/div\x3e");
a+="\x3c/div\x3e"}dijit.showTooltip(a,this._tooltipPos);setTimeout(function(){dijit.hideTooltip(this._tooltipPos);this._tooltipPos=this._tooltipNode=null}.bind(this),5E3)}}.bind(this),750)},itemMouseOutHandler:function(a){this._mouseover=!1;this._tooltipPos&&(dijit.hideTooltip(this._tooltipPos),this._tooltipPos=this._tooltipNode=null);a=this.domNode;this.palette.selectedItem==this?this.sunken(a):this.flat(a)},itemMouseDownHandler:function(a){a=this.domNode;this.focus();this.sunken(a);this.palette.selectedItem&&
this.palette.selectedItem!=this&&(this.palette.removeSelectionAll(),this.flat(this.palette.selectedItem.domNode),this.palette.selectedItem=null);v.document=this.palette._context.getDocument();if(a=this.palette._context.frameNode){a=dojo.coords(a);var b=this.palette._context.getContainerNode();v.documentX=a.x-w.getScrollLeft(b);v.documentY=a.y-w.getScrollTop(b)}x.getHelper(this.type,"helper")},itemMouseUpHandler:function(a){a=this.domNode;if(this.palette.selectedItem==this)this.palette.removeSelectionAll(),
this.palette.selectedItem.flat(this.palette.selectedItem.domNode),this.palette.selectedItem=null,this.palette.sunkenItem=null,this.palette.flattenAll(),this.palette._context.setActiveTool(null),c.curNode&&c.curNode==a&&c.curNode.blur&&c.curNode.blur();else{this.palette.selectedItem&&this.palette.selectedItem!=this&&(this.palette.removeSelectionAll(),this.flat(this.palette.selectedItem.domNode),this.palette.selectedItem=null);this.palette.selectedItem=this;this.sunken(a);x.getHelper(this.type,"tool").then(function(a){a=
new (a||r)(dojo.clone(this.data),this.userData);this.palette._context.setActiveTool(a)}.bind(this));var b=function(){this.palette._contextMouseUpHandler&&(this.disconnect(this.palette._contextMouseUpHandler),this.palette._contextMouseUpHandler=null);this.palette._docMouseUpHandler&&(dojo.disconnect(this.palette._docMouseUpHandler),this.palette._docMouseUpHandler=null);this.palette.removeSelectionAll();this.palette.selectedItem=null;this.flat(this.domNode);this.palette._context.dragMoveCleanup()}.bind(this);
this.palette._contextMouseUpHandler=this.connect(this.palette._context,"onMouseUp",function(a){b()}.bind(this));setTimeout(function(){this.palette._docMouseUpHandler=dojo.connect(document,"onmouseup",function(a){var d=!1;if(this.palette.selectedItem){var f=this.palette.selectedItem.domNode;for(a=a.target;a&&"BODY"!=a.tagName;){if(a==f){d=!0;break}a=a.parentNode}}this.palette.selectedItem&&!d&&(b(),this.palette._context.setActiveTool(null))}.bind(this))}.bind(this),0)}},itemKeyDownHandler:function(a){a.keyCode==
dojo.keys.ENTER&&(this.palette.selectedItem&&(this.flat(this.palette.selectedItem.domNode),this.palette.selectedItem=null),x.getHelper(this.type,"tool").then(function(a){a=new (a||r)(dojo.clone(this.data));var b=this.palette._context;b.setActiveTool(a);a.create({target:b.getSelection()[0],position:{x:50,y:50}});b.setActiveTool(null);b.getContainerNode().focus()}),x.getHelper(this.type,"helper"))},flat:function(a){a&&(dojo.removeClass(a,"dojoyPaletteItemRaised"),dojo.removeClass(a,"dojoyPaletteItemSunken"),
dojo.addClass(a,"dojoyPaletteItemFlat"))},raised:function(a){dojo.removeClass(a,"dojoyPaletteItemFlat");dojo.removeClass(a,"dojoyPaletteItemSunken");dojo.addClass(a,"dojoyPaletteItemRaised");this.palette.raisedItems.push(this)},sunken:function(a){dojo.removeClass(a,"dojoyPaletteItemFlat");dojo.removeClass(a,"dojoyPaletteItemRaised");dojo.addClass(a,"dojoyPaletteItemSunken");this.palette.sunkenItems.push(this);this._selectionShowing=!0;g(".paletteItemSelectionContainer",this.domNode)[0].innerHTML=
this.selectedWidgetTemplate;var d=g(".paletteItemSelectedMoreIcon",a)[0],f=this.palette.getPaletteItemsSameGroup(this);1<f.length?(d.style.display="inline-block",n(d,"mousedown, mouseup",function(a){h.stop(a)}),n(d,"click",function(a){h.stop(a);this._tooltipNode&&(dijit.hideTooltip(this._tooltipPos),this._tooltipPos=this._tooltipNode=null);if(this._moreShowing)this.paletteItemMoreCloseCleanup();else{a=e.create("div",{className:"paletteItemMoreContent"});var c=e.create("span",{className:"paletteItemMoreCloseBox"},
a);e.create("div",{className:"paletteItemAlternatesLabel",innerHTML:B.alternateWidgets},a);this._paletteItemMoreConnects.push(n(c,"mousedown, mouseup",function(a){h.stop(a)}.bind(this)));this._paletteItemMoreConnects.push(n(c,"click",function(a){h.stop(a);this.paletteItemMoreCloseCleanup()}.bind(this)));for(var c=e.create("div",{className:"paletteItemAlternatesContainer"},a),k=[],m=0;m<f.length;m++){var g=f[m],v=g._collectionName,g=e.create("button",{className:"paletteItemAlternate "+(g._paletteGroupSelected?
"paletteItemMoreSelected":"paletteItemMoreUnselected"),innerHTML:v},c);k.push(g);this._paletteItemMoreConnects.push(n(g,"mousedown, mouseup",function(a){h.stop(a)}.bind(this)));this._paletteItemMoreConnects.push(n(g,"click",function(a,b){h.stop(b);var d;for(b=0;b<f.length;b++){var c=f[b];if(c._collectionName==a){d=c;break}}if(d){for(b=0;b<f.length;b++)c=f[b],c==d?(c._paletteGroupSelected=!0,c.domNode.style.display=this.palette._displayShowValue):(c._paletteGroupSelected=!1,c.domNode.style.display=
"none");d.sunken(d.domNode);x.getHelper(d.type,"tool").then(function(a){a=new (a||r)(dojo.clone(this.data));this.palette._context.setActiveTool(a)}.bind(d))}this.paletteItemMoreCloseCleanup()}.bind(this,v)))}this._tooltipDialog=new p({className:"paletteItemMorePopup",style:"width: auto; ",content:a,onShow:function(a){if(a=this._tooltipDialog.domNode.parentNode){var b=parseFloat(a.style.top);isNaN(b)||(a.style.top=b+12+"px")}}.bind(this)});b.open({popup:this._tooltipDialog,around:d,orient:["above-centered"]});
this._moreShowing=!0;this.palette.moreItems.push(this)}}.bind(this))):d.style.display="none";var c=g(".paletteItemSelectedHelpIcon",a)[0];n(c,"mousedown, mouseup",function(a){h.stop(a)}.bind(this));n(c,"click",function(a){h.stop(a);this._tooltipNode&&(dijit.hideTooltip(this._tooltipPos),this._tooltipPos=this._tooltipNode=null);if(this._helpShowing)this.paletteItemHelpCloseCleanup();else{var d=x.getOamDescriptivePropertyForType(this.type,"title"),f=x.getOamDescriptivePropertyForType(this.type,"description");
a=e.create("div",{className:"helpInnerContent"});var k=e.create("div",{className:"paletteTooltipCurrent"},a);e.create("span",{className:"paletteTooltipCurrentWidget"},k).textContent=this.name;this._collectionName&&e.create("span",{className:"paletteTooltipCurrentLibrary",innerHTML:" ("+this._collectionName+")"},k);k={container:"helpInnerContentSummary",title:"helpInnerContentSummaryTitle",content:"helpInnerContentSummaryContent"};this._createHelpSection(d,a,B.summary,k);this._createHelpSection(f,
a,B.description,k);d=e.create("div",{className:"paletteItemHelpContent"});f=e.create("span",{className:"paletteItemHelpCloseBox"},d);e.create("div",{className:"paletteItemHelpDescription"},d).appendChild(a);this._paletteItemHelpConnects.push(n(f,"mousedown, mouseup",function(a){h.stop(a)}.bind(this)));this._paletteItemHelpConnects.push(n(f,"click",function(a){h.stop(a);this.paletteItemHelpCloseCleanup()}.bind(this)));this._tooltipDialog=new p({className:"paletteItemHelpPopup",style:"width: auto; ",
content:d,onShow:function(a){if(a=this._tooltipDialog.domNode.parentNode){var b=parseFloat(a.style.top);isNaN(b)||(a.style.top=b-12+"px")}}.bind(this)});b.open({popup:this._tooltipDialog,around:c,orient:["below-centered"]});this._helpShowing=!0;this.palette.helpItems.push(this)}}.bind(this))},_createHelpSection:function(a,b,d,f){a&&a.value&&(b=e.create("div",{className:f.container},b),e.create("div",{className:f.title,innerHTML:d},b),d=e.create("div",{className:f.content},b),"text/html"==a.type?d.innerHTML=
a.value:d.textContent=a.value)},paletteItemMoreCloseCleanup:function(){if(this._moreShowing){for(var a=0;a<this._paletteItemMoreConnects.length;a++)this._paletteItemMoreConnects[a].remove();this._paletteItemMoreConnects=[];this._moreShowing=!1;index=this.palette.moreItems.indexOf(this);0<=index&&this.palette.moreItems.splice(index,1)}this._tooltipDialog&&(b.close(this._tooltipDialog),this._tooltipDialog.destroyRecursive(),this._tooltipDialog=null)},paletteItemHelpCloseCleanup:function(){if(this._helpShowing){for(var a=
0;a<this._paletteItemHelpConnects.length;a++)this._paletteItemHelpConnects[a].remove();this._paletteItemHelpConnects=[];this._helpShowing=!1;index=this.palette.helpItems.indexOf(this);0<=index&&this.palette.helpItems.splice(index,1)}this._tooltipDialog&&(b.close(this._tooltipDialog),this._tooltipDialog.destroyRecursive(),this._tooltipDialog=null)},updateImgSrc:function(a){this.domNode.querySelector(".paletteItemImage").src=a}})})},"davinci/ve/tools/CreateTool":function(){define("dojo/_base/declare dojo/dom-style ../tools/_Tool davinci/Workbench davinci/workbench/Preferences ../metadata ../widget dojo/Deferred dojo/promise/all davinci/ve/States davinci/commands/CompoundCommand ../commands/AddCommand ../commands/MoveCommand ../commands/ResizeCommand ../commands/StyleCommand".split(" "),
function(q,n,h,g,e,m,c,k,f,d,b,a,p,r,v){return q("davinci.ve.tools.CreateTool",h,{constructor:function(a,b){this._data=a;this._userData=b;a&&a.type&&(b=m.queryDescriptor(a.type,"resizableOnCreate")||m.queryDescriptor(a.type,"resizable"),"none"!==b&&(this._resizable=b),this._dropCursor=m.queryDescriptor(a.type,"dropCursor"));this._requireHelpers(a)},activate:function(a){(this._context=a)&&a.rootNode&&(this._oldCursor=a.rootNode.style.cursor);a.rootNode.style.cursor="crosshair"},deactivate:function(){this._context&&
this._context.rootNode&&(this._context.rootNode.style.cursor=this._oldCursor);this._setTarget(null);delete this._mdPosition;this._context.dragMoveCleanup()},_getContentPosition:function(a){if(a)return a.target&&(a={x:a.pageX,y:a.pageY}),a},onMouseDown:function(a){this._target=c.getEnclosingWidget(a.target);this._mdPosition=this._getContentPosition(a);this._dragRect=null},onMouseMove:function(a){var b=this._context,d=b._chooseParent;a.target!=this._lastEventTarget&&d.setProposedParentWidget(null);
this._lastEventTarget=a.target;if(this._mdPosition){if(this._resizable){b.deselect();var f=this._getContentPosition(a),c,p,k=!0,m=!0;f.x>=this._mdPosition.x?(d=this._mdPosition.x,p=f.x-this._mdPosition.x):(d=f.x,p=this._mdPosition.x-f.x,k=!1);f.y>=this._mdPosition.y?(c=this._mdPosition.y,f=f.y-this._mdPosition.y):(c=f.y,f=this._mdPosition.y-f.y,m=!1);a.shiftKey&&(p>=f?(f=p,m||(c=this._mdPosition.y-f)):(p=f,k||(d=this._mdPosition.x-p)));this._dragSizeRect||(a=b.getDocument().body,this._dragSizeRect=
dojo.create("div",{style:"border:1px dashed black;z-index:1000001;position:absolute;"},a));a=this._dragSizeRect.style;a.left=d+"px";a.top=c+"px";a.width=p+"px";a.height=f+"px"}}else d=!this.createWithFlowLayout(),this._setTarget(a.target,a),c=b.getPreference("showPossibleParents"),c=!c&&this._spaceKeyDown||c&&!this._spaceKeyDown,p={x:a.pageX,y:a.pageY},f={l:a.pageX,t:a.pageY,w:0,h:0},k=e.getPreferences("davinci.ve.editorPrefs",g.getProject()).snap&&d,m=!d,"object"==typeof this._dropCursor&&!1===this._dropCursor.show&&
(m=!1),b.dragMoveUpdate({data:this._data,position:p,absolute:d,currentParent:null,eventTarget:a.target,rect:f,doSnapLinesX:k,doSnapLinesY:k,doFindParentsXY:c,doCursor:m,beforeAfter:this._dropCursor&&this._dropCursor.beforeAfter})},onMouseUp:function(a){var b=this._context,d=b._chooseParent,f=!this.createWithFlowLayout();this._dragSizeRect&&(this._dragSizeRect.parentNode.removeChild(this._dragSizeRect),this._dragSizeRect=null);var e=b.getActiveDragDiv();e&&(e=dojo.query(".maqCandidateParents",e),1==
e.length&&(e[0].innerHTML=""));this._lastEventTarget=null;var p,k,h,r,e=this._getContentPosition(a);if(this._mdPosition){var n=!0,v=!0;this._position=dojo.mixin({},this._mdPosition);e.x<this._mdPosition.x&&(this._position.x=e.x);"height"==this._resizable?h=0:0<=e.x-this._mdPosition.x?h=e.x-this._mdPosition.x:(h=this._mdPosition.x-e.x,n=!1);e.y<this._mdPosition.y&&(this._position.y=e.y);"width"==this._resizable?r=0:0<=e.y-this._mdPosition.y?r=e.y-this._mdPosition.y:(r=this._mdPosition.y-e.y,v=!1);
a.shiftKey&&(h>=r?(r=h,v||(t=this._mdPosition.y-r)):(h=r,n||(l=this._mdPosition.x-h)))}else this._position=e;this._resizable&&this._position&&(4<h||4<r)&&(p={w:0<h?h:void 0,h:0<r?r:void 0});if(h=d.getProposedParentWidget()){if(k=h.parent,h.refChild){var w=h.parent.getChildren().indexOf(h.refChild);0<=w?h.refAfter&&w++:w=null}}else{a=this._getTarget()||c.getEnclosingWidget(a.target);var q=this._data;h=d.getAllowedTargetWidget(a,q,!0,{absolute:f});var K=dojo.isArray(q)?q[0].type:q.type,L=c.getWidgetHelper(K);
1<h.length&&L&&L.chooseParent?k=L.chooseParent(h):0<h.length&&(k=0<=h.indexOf(a)?a:h[0])}d.setProposedParentWidget(null);d=function(a){this.prototype=Error.prototype;this.name="InvalidTargetWidgetError";this.message=a?a:"The selected target is not a valid parent for the given widget."};try{q=this._data instanceof Array?this._data:[this._data];if(!k){var J=q.map(function(a){return a.type}).join(", "),I=q.map(function(a){var b=m.getAllowedParent(a.type);a=a.type;var d=m.queryDescriptor(a,"class");a=
d?d.split(/\s+/).push(a):[a];return{allowedParent:b,classList:a}});p="The selected target is not a valid parent for the given widget.";1===I.length&&I[0].allowedParent&&(p+=['The widget \x3cspan style\x3d"font-family: monospace"\x3e',J,"\x3c/span\x3e requires ",1<I[0].allowedParent.length?"one of the following parent types":"the parent type",' \x3cspan style\x3d"font-family: monospace"\x3e',I[0].allowedParent.join(", "),"\x3c/span\x3e."].join(""),K=q[0].type,(L=c.getWidgetHelper(K))&&L.isAllowedError&&
(p=L.isAllowedError({errorMsg:p,type:K,allowedParent:I[0].allowedParent,absolute:f})));debugger;throw new d(p);}for(f=0;f<q.length;f++){var G=q[f].type,M=m.getLibraryForType(G),Q=M.name,K=[G,b];b._widgets.hasOwnProperty(Q)||(b._widgets[Q]=0);1==++b._widgets[Q]&&m.invokeCallback(M,"onFirstAdd",K);m.invokeCallback(M,"onAdd",K)}this.create({target:k,index:w,directTarget:this._getTarget(),size:p,userData:this._userData})}catch(N){var R,P;N instanceof d?(R=N.message,P="Invalid Target"):(R="The action was interrupted by an internal error.",
P="Error",console.error(N));g.showMessage(P,R)}finally{this.exitCreateToolOnMouseUp()&&b.setActiveTool(null),this._cleanupActions()}},_cleanupActions:function(){var a=this._context;a.dragMoveCleanup();a.inlineEditActive()||this._context.getDocument().defaultView.focus()},onKeyDown:function(a){dojo.stopEvent(a);var b=this._context;if(a.keyCode==dojo.keys.ESCAPE)b.setActiveTool(null),this._cleanupActions();else{var d=this._context.getPreference("showPossibleParents");a.keyCode==dojo.keys.SPACE?this._spaceKeyDown=
!0:this._processKeyDown(a.keyCode);a=!d&&this._spaceKeyDown||d&&!this._spaceKeyDown;var d=this._data,d=dojo.isArray(d)?d[0].type:d.type,b=b._chooseParent,f=!this.createWithFlowLayout(),c=!f;"object"==typeof this._dropCursor&&!1===this._dropCursor.show&&(c=!1);b.dragUpdateCandidateParents({widgetType:d,showCandidateParents:a,absolute:f,doCursor:c,beforeAfter:this._dropCursor&&this._dropCursor.beforeAfter,currentParent:null})}},_processKeyDown:function(a){if(49<=a&&57>=a){var b=this._context._chooseParent,
d=b.getProposedParentsList();d&&1<d.length&&(a=d.length-(a-48),0<=a&&b.setProposedParentWidget(d[a]))}},onKeyUp:function(a){a.keyCode==dojo.keys.SPACE&&(this._spaceKeyDown=!1);dojo.stopEvent(a);a=this._context.getPreference("showPossibleParents");a=!a&&this._spaceKeyDown||a&&!this._spaceKeyDown;var b=this._data,b=dojo.isArray(b)?b[0].type:b.type,d=this._context._chooseParent,f=!this.createWithFlowLayout(),c=!f;"object"==typeof this._dropCursor&&!1===this._dropCursor.show&&(c=!1);d.dragUpdateCandidateParents({widgetType:b,
showCandidateParents:a,absolute:f,doCursor:c,beforeAfter:this._dropCursor&&this._dropCursor.beforeAfter,currentParent:null})},_requireHelpers:function(a){var b=[];if(!a||!a.type)return a instanceof Array&&a.forEach(function(a){b.concat(this._requireHelpers(a))},this),b;b.push(c.requireWidgetHelper(a.type));a.children&&!dojo.isString(a.children)&&dojo.every(a.children,function(a){return b.concat(this._requireHelpers(a))},this);return b},create:function(a){if(a&&this._data){for(var b=a.target,d,c;b&&
!(d=b.getContainerNode());)c=b,b=b.getParent();var e=a.index,p;d=!1;this._data.properties&&this._data.properties.style&&0<this._data.properties.style.indexOf("absolute")&&(d=!0);!d&&this.createWithFlowLayout()?c&&(e=b.indexOf(c)):a.position?p=a.position:this._position&&(p=this._position);this._data.context=this._context;f(this._requireHelpers(this._data)).then(function(){this._create({parent:b,index:e,position:p,size:a.size,userData:this._userData})}.bind(this))}},_create:function(d){var e=this._context,
m=[],g=new k;if(!this._loadType(this._data,m))return g.reject(),g;f(m).then(function(){var f;this.createNewWidget()?dojo.withDoc(this._context.getDocument(),function(){f=c.createWidget(this._data,this._userData,d.parent)},this):f=this._widget;f||g.reject(Error("Failed to create widget"));var k=new b;if(this.createNewWidget()){d.size=this._getInitialSize(f,d);k.add(new a(f,d.parent||this._context.getContainerNode(),d.index));var m=!0;f&&f.properties&&1==f.properties.ignorePosition&&(m=!1);f&&f.metadata&&
1==f.metadata.ignorePosition&&(m=!1);d.position&&m&&(m=e.getPreference("absoluteWidgetsZindex"),"xblox/RunScript"!==f.type&&"xblox/CSSState"!==f.type&&(k.add(new v(f,[{position:"absolute"},{"z-index":m}])),k.add(new p(f,d.position.x,d.position.y))));if(d.size){var m=d.size.w,h=d.size.h;if(null!==m&&null!==h){k.add(new r(f,m,h));var n=c.getWidgetHelper(f.type);if(n&&n.onCreateResize)n.onCreateResize(k,f,m,h)}}this.checkAddToCurrentState(k,f)}m=f.id;this.addToCommandStack&&this.addToCommandStack(k,
{widget:f});k.isEmpty()||this._context.getCommandStack().execute(k);f.isLayoutContainer&&f.resize();f=c.byId(m);this._select(f);this._widget=f;g.resolve(f);this.mouseUpProcessingCompleted()}.bind(this));return g},_loadType:function(a,b){if(!a||!a.type)return!1;b.push(this._context.loadRequires(a.type,!0));a.children&&!dojo.isString(a.children)&&dojo.forEach(a.children,function(a){this._loadType(a,b)}.bind(this));return!0},_getInitialSize:function(a,b){var d=b.size,f=a.getHelper();f&&f.initialSize&&
(f=f.initialSize(b))&&(d=f);!d&&(a=m.queryDescriptor(a.type,"initialSize"))&&(b&&!b.position?(b=b.parent,"html.body"==b.type?d="auto"==a||"auto"==a.flow?{w:"100%",h:"auto"}:this._getExplicitFlowSizeFromMetadata(a):this._isTypeContainer(b.type)?"auto"==a||"auto"==a.flow?(b=b.getData().children,d={w:"100%",h:b&&b.length?"auto":"100%"}):d=this._getExplicitFlowSizeFromMetadata(a):d=this._getExplicitFlowSizeFromMetadata(a)):d="auto"==a||"auto"==a.absolute?{w:"300px",h:"300px"}:this._getExplicitAbsoluteSizeFromMetadata(a));
return d},_getExplicitFlowSizeFromMetadata:function(a){var b=null;return b=a.flow?{w:a.flow.width?a.flow.width:"100%",h:a.flow.height?a.flow.height:"auto"}:{w:a.width?a.width:"100%",h:a.height?a.height:"auto"}},_getExplicitAbsoluteSizeFromMetadata:function(a){var b=null;return b=a.absolute?{w:a.absolute.width?a.absolute.width:"300px",h:a.absolute.height?a.absolute.height:"300px"}:{w:a.width?a.width:"300px",h:a.height?a.height:"300px"}},_isTypeContainer:function(a){return a&&("dijit/layout/ContentPane"==
a||"html.div"==a||"html.form"==a||"html.fieldset"==a)},_select:function(a){if(a)if(a.type){var b=m.getSmartInput(a.type);b&&b.then?b.then(function(b){!this._data.fileDragCreate&&b&&b.displayOnCreate?(a.inLineEdit_displayOnCreate=b.displayOnCreate,this._context.select(a,null,!0)):this._context.select(a)}.bind(this)):(console.error("create tool failed::_select smart input is null"),this._context.select(a))}else console.error("create tool failed::_select w.type is null");else console.error("create tool failed::_select w is null")},
createWithFlowLayout:function(){return m.queryDescriptor(this._data.type,"forceAbsolute")?!1:this._context.getFlowLayout()},createNewWidget:function(){return!0},exitCreateToolOnMouseUp:function(){return!0},mouseUpProcessingCompleted:function(){},checkAddToCurrentState:function(a,b){var f=d.getFocus(b._edit_context.rootNode);if(f&&f.stateContainerNode){var f=d.getState(f.stateContainerNode),c=e.getPreferences("davinci.ve.editorPrefs",g.getProject());f&&c.newWidgetsCurrentState&&(c=n.get(b.domNode,
"display"),a.add(new v(b,[{display:"none"}])),a.add(new v(b,[{display:c}],f)))}}})})},"davinci/ve/tools/_Tool":function(){define(["dojo/_base/declare","davinci/ve/widget","davinci/ve/metadata","davinci/ve/utils/GeomUtils"],function(q,n,h,g){return q("davinci.ve.tools._Tool",null,{_getTarget:function(){return this._target},_setTarget:function(e,m){this._targetOverlays||(this._targetOverlays=[]);if(!this._matchesTargetOverlay(e)){for(var c=this._context.getContainerNode(),k;e&&e!=c;)if((k=n.getEnclosingWidget(e))&&
!k.getContext())e=k.domNode.parentNode,k=null;else{k&&davinci.ve.metadata.queryDescriptor(k.type,"enablePointerEvents")?k=null:k&&k.getContainerNode()&&(davinci.ve.metadata.queryDescriptor(k.type,"isControl")||(k=null));break}k?(this._target=k,this._updateTargetOverlays(m),this._insertTargetOverlays()):(this._removeTargetOverlays(),this._target=null)}},_updateTargetOverlays:function(e){this._removeTargetOverlays();if(this._target){var m=this._target.domNode,c=this._getMaxZIndex(m);if(this._targetOverlays){var k=
this._target.getHelper();if(k&&k.getTargetOverlays&&(k=k.getTargetOverlays(this._target))&&0<k.length){dojo.forEach(k,function(a){a=this._getNewTargetOverlay(a,a.x,a.y,a.width,a.height,c);this._targetOverlays.push(a)},this);return}var k=m.offsetLeft,f=m.offsetTop,d=m.offsetWidth,b=m.offsetHeight;if(e){var a,p=g.getBorderBoxPageCoordsCached(m);e.pageX<p.l&&(a=p.l-e.pageX,k-=a,d+=a);e.pageY<p.t&&(a=p.t-e.pageY,f-=a,b+=a);e.pageX>p.l+p.w&&(a=e.pageX-(p.l+p.w),d+=a);e.pageY>p.t+p.h&&(a=e.pageY-(p.t+p.h),
b+=a)}e=this._getNewTargetOverlay(m,k,f,d,b,c);this._targetOverlays.push(e)}}},_getMaxZIndex:function(e){var m=dojo.style(e,"zIndex");dojo.query("*",e).forEach(function(c){c=dojo.style(c,"zIndex");var e=Number(c),f=Number(m);isNaN(e)||(isNaN(f)?m=c:e>f&&(m=c))});return m},_getNewTargetOverlay:function(e,m,c,k,f,d){return this._context.getDojo().create("div",{className:"editFeedback",style:{position:"absolute",opacity:.1,left:m+"px",top:c+"px",width:k+"px",height:f+"px",zIndex:d}})},_insertTargetOverlays:function(){if(this._targetOverlays&&
this._target){var e=this._target.domNode,m=e.parentNode;dojo.forEach(this._targetOverlays,function(c){m.insertBefore(c,e.nextSibling)},this)}},_removeTargetOverlays:function(){if(this._targetOverlays&&this._target)for(var e=this._targetOverlays.length-1;0<=e;e--)dojo.destroy(this._targetOverlays[e]),this._targetOverlays.pop()},_matchesTargetOverlay:function(e){return dojo.some(this._targetOverlays,function(m){return e==m},this)}})})},"davinci/commands/CompoundCommand":function(){define(["dojo/_base/declare"],
function(q){return q("davinci.commands.CompoundCommand",null,{name:"compound",_commands:[],constructor:function(n){this._commands=[];n&&(this._commands=[n])},add:function(n){if(n)if(this._commands)if("compound"==n.name)dojo.forEach(n._commands,function(e){this.add(e)},this);else{if("modify"==n.name)for(var h=n._oldId,g=0;g<this._commands.length;g++){var e=this._commands[g];if("modify"==e.name&&e._oldId==h){e.add(n);return}}this._commands.push(n)}else this._commands="compound"==n.name?n._commands:
[n]},setContext:function(n){for(var h=0;h<this._commands.length;h++)this._commands[h].setContext&&this._commands[h].setContext(n)},isEmpty:function(){return!this._commands||0===this._commands.length},execute:function(){if(this._commands)for(var n=0;n<this._commands.length;n++)this._commands[n].execute(),this._commands[n]._oldId&&this._commands[n]._newId&&(this._oldId=this._commands[n]._oldId,this._newId=this._commands[n]._newId)},undo:function(){if(this._commands)for(var n=this._commands.length-1;0<=
n;n--)this._commands[n].undo()}})})},"davinci/ve/commands/AddCommand":function(){define("dojo/_base/declare davinci/ve/commands/_hierarchyCommand davinci/ve/widget davinci/ve/utils/ImageUtils davinci/ve/States davinci/ve/commands/ModifyCommand".split(" "),function(q,n,h,g,e,m){return q("davinci.ve.commands.AddCommand",[n],{name:"add",constructor:function(c,e,f){c&&(c.domNode?this._id=c.id:this._data=c);this._parentId=e.id;this._index=f},execute:function(){var c=h.byId(this._parentId);if(c){var k=
c.getContext(),f=void 0;this._data?(this._id&&this._data.properties&&(this._data.properties.id=this._id),f=h.createWidget(this._data),this._id=f.id):this._id&&(f=h.byId(this._id,k));if(f){this._data=f.getData();this._data.properties.id=this._id;this._data.context=k;if(this._index&&"number"!=typeof this._index)if(this._index.domNode)this._index=c.indexOf(this._index);else{var d=h.byId(this._index.id,k);this._index=c.indexOf(d)}"IMG"===f.domNode.tagName&&g.ImageUpdateFocus(f,k);c.addChild(f,this._index);
k&&(k.attach(f),f.startup(),f.renderWidget(),k.widgetAddedOrDeleted(),k.widgetChanged(k.WIDGET_ADDED,f));(k=this._isRefreshOnDescendantChange(f))&&(new m(k,null,null,c._edit_context)).execute();e.resetState(f.domNode)}}},undo:function(){if(this._id&&this._parentId){var c=h.byId(this._id);if(c){var k=h.byId(this._parentId);if(k){var f=this._isRefreshOnDescendantChange(c),d=c.getContext();d&&(d.detach(c),d.deselect(c));k.removeChild(c);d.widgetChanged(d.WIDGET_REMOVED,c);c.destroyWidget();d&&d.widgetAddedOrDeleted();
f&&(new m(f,null,null,k._edit_context)).execute();e.resetState(c.domNode)}}}}})})},"davinci/ve/commands/_hierarchyCommand":function(){define(["dojo/_base/declare"],function(q){return q("davinci.ve.commands._hierarchyCommand",null,{_isRefreshOnDescendantChange:function(n){for(var h;n&&n.domNode&&"BODY"!=n.domNode.tagName;)(n=n.getParent())&&davinci.ve.metadata.queryDescriptor(n.type,"refreshOnDescendantChange")&&(h=n);return h}})})},"davinci/ve/utils/ImageUtils":function(){define([],function(){return{ImageUpdateFocus:function(q,
n){if(n&&q&&q.domNode&&"IMG"===q.domNode.tagName)var h=dojo.connect(q.domNode,"onload",function(){for(var g=n.getSelection(),e=0;e<g.length;e++)if(g[e]==q){n.updateFocus(q,e);break}dojo.disconnect(h)})}}})},"davinci/ve/commands/ModifyCommand":function(){define(["dojo/_base/declare","davinci/ve/commands/_hierarchyCommand","../widget","../utils/ImageUtils","../States"],function(q,n,h,g,e){return q("davinci.ve.commands.ModifyCommand",[n],{name:"modify",constructor:function(e,c,k,f,d){this._oldId=e?e.id:
void 0;this._properties=c=c||{};this._children=k||"string"==typeof k?k:c._children;this._context=f||e.getContext();this._scripts=d;delete this._properties._children},setContext:function(e){this._context=e},add:function(e){e&&e._oldId==this._oldId&&(e._properties&&dojo.mixin(this._properties,e._properties),e._children&&(this._children=e._children))},execute:function(){if(this._oldId&&this._properties){var m=h.byId(this._oldId),c=this._context;if(m){this._oldData=m.getData();this._oldData.context=c;
this._newData={type:this._oldData.type,properties:dojo.mixin({},this._oldData.properties,this._properties),children:this._children||"string"==typeof this._children?this._children:this._oldData.children,scripts:dojo.mixin({},this._oldData.scripts,this._scripts),maqAppStates:this._oldData.maqAppStates,maqDeltas:this._oldData.maqDeltas,context:c};for(var k in this._newData.properties)"$MAQ_MODIFYCOMMAND_DELETE_PROPERTY$"===this._newData.properties[k]&&delete this._newData.properties[k];if(this._doRefreshFromSource(m))m.setProperties(this._newData.properties,
!0),setTimeout(function(){c.visualEditor.refresh()},0);else{c&&c.detach(m);this._oldData.properties.isTempID&&!this._properties.id||delete this._newData.properties.isTempID;k=m.getParent();var f=null,d=k.indexOf(m);k.removeChild(m);m.destroyWidget();if(f=h.createWidget(this._newData)){"IMG"===f.domNode.tagName&&g.ImageUpdateFocus(f,c);k.addChild(f,d);this._newId=f.id;c&&(c.attach(f),f.startup(),f.renderWidget(),c.widgetAddedOrDeleted(),this._oldId!=this._newId&&c.widgetChanged(c.WIDGET_ID_CHANGED,
f,this._oldId),c.widgetChanged(c.WIDGET_MODIFIED,f));this.newWidget=f;dojo.publish("/davinci/ui/widget/replaced",[f,m]);e.resetState(f.domNode);var b;if(m=this._isRefreshParentOnPropChange(f))if("string"==typeof m)for(b=k;b&&b.domNode&&b.type!=m&&"BODY"!=b.domNode.tagName;){if(!b.domNode||"BODY"==b.domNode.tagName){b=null;break}b=b.getParent()}else b=k;(m=this._isRefreshOnDescendantChange(f))&&(b=m);b&&(new davinci.ve.commands.ModifyCommand(b,null,null,k._edit_context)).execute();dojo.publish("/davinci/ui/widgetPropertiesChanged",
[[f]])}}}}},_doRefreshFromSource:function(e){var c=this._properties,k,f,d=!1;for(k in c)if(c.hasOwnProperty(k)&&(f=e.metadata.property[k])&&f.refreshFromSource){d=!0;break}return d},_isRefreshParentOnPropChange:function(e){return davinci.ve.metadata.queryDescriptor(e.type,"refreshParentOnPropChange")},undo:function(){if(this._newId&&this._oldData){var g=h.byId(this._newId);if(g){var c=g.getParent();if(c){var k=c.indexOf(g);if(!(0>k)){var f=c.getContext();f&&f.detach(g);c.removeChild(g);g.destroyWidget();
if(newWidget=h.createWidget(this._oldData)){this._oldData=newWidget.getData();this._oldData.context=this._context;c.addChild(newWidget,k);f&&(f.attach(newWidget),newWidget.startup(),newWidget.renderWidget(),f.widgetAddedOrDeleted(),f.widgetChanged(f.WIDGET_MODIFIED,newWidget));dojo.publish("/davinci/ui/widget/replaced",[newWidget,g]);e.resetState(newWidget.domNode);var d;if(this._isRefreshParentOnPropChange(g))if("string"==typeof refreshParent)for(d=c;d&&d.domNode&&d.type!=refreshParent&&"BODY"!=
d.domNode.tagName;){if(!d.domNode||"BODY"==d.domNode.tagName){d=null;break}d=d.getParent()}else d=c;(g=this._isRefreshOnDescendantChange(newWidget))&&(d=g);d&&(new davinci.ve.commands.ModifyCommand(d,null,null,c._edit_context)).execute();dojo.publish("/davinci/ui/widgetPropertiesChanged",[[newWidget]])}}}}}}})})},"davinci/ve/commands/MoveCommand":function(){define("dojo/_base/declare dojo/dom-geometry davinci/ve/widget davinci/ve/States davinci/ve/utils/StyleArray davinci/ve/utils/GeomUtils".split(" "),
function(q,n,h,g,e,m){return q("davinci.ve.commands.MoveCommand",null,{name:"move",constructor:function(c,e,f,d,b,a,p){this._id=c?c.id:void 0;this._context=c.getContext();this._newBox={l:e,t:f};this._commandForXYDeltas=d;this._oldBox=b;this._applyToStateIndex=a&&"Normal"!=a&&"undefined"!=a?a:"undefined";this._disableSnapping=p},execute:function(){if(this._id){var c=h.byId(this._id);if(c&&c.domNode){var k=this._context;if(!this._oldBox){var f=c.getMarginBox();this._oldBox={l:f.l,t:f.t,w:f.w,h:f.h}}if(!c.domNode.offsetParent)console.error("maeh");
else if(dojo.position(c.domNode.offsetParent,!0)){this._commandForXYDeltas?(this._newBox.l=this._oldBox.l+this._commandForXYDeltas._deltaX,this._newBox.t=this._oldBox.t+this._commandForXYDeltas._deltaY):(!this._disableSnapping&&k&&k._snapX&&(f=this._oldBox.w,"left"==k._snapX.typeRefObj?this._newBox.l=k._snapX.x:f&&"right"==k._snapX.typeRefObj?this._newBox.l=k._snapX.x-f:f&&"center"==k._snapX.typeRefObj&&(this._newBox.l=k._snapX.x-f/2)),!this._disableSnapping&&k&&k._snapY&&(f=this._oldBox.h,"top"==
k._snapY.typeRefObj?this._newBox.t=k._snapY.y:f&&"bottom"==k._snapY.typeRefObj?this._newBox.t=k._snapY.y-f:f&&"middle"==k._snapY.typeRefObj&&(this._newBox.t=k._snapY.y-f/2)));this._deltaX=this._newBox.l-this._oldBox.l;this._deltaY=this._newBox.t-this._oldBox.t;var f=m.getBorderBoxPageCoords(c.domNode.offsetParent),d=n.getBorderExtents(c.domNode.offsetParent),b=this._newBox.l-f.l-d.l,a=this._newBox.t-f.t-d.t;k.getScrollOffset();b=[{left:b+"px"},{top:a+"px"}];k=c.getStyleValuesAllStates();this._oldStyleValuesAllStates=
dojo.clone(k);this._oldBox&&(this._oldStyleValuesAllStates[this._applyToStateIndex]=e.mergeStyleArrays(this._oldStyleValuesAllStates[this._applyToStateIndex],[{left:this._oldBox.l-f.l-d.l+"px"},{top:this._oldBox.t-f.t-d.t+"px"}]));k[this._applyToStateIndex]=k[this._applyToStateIndex]?e.mergeStyleArrays(k[this._applyToStateIndex],b):b;c.setStyleValuesAllStates(k);f=g.getStatesListCurrent(c.domNode);d=e.mergeStyleArrays([],k.undefined);for(b=0;b<f.length;b++)k[f[b]]&&(d=e.mergeStyleArrays(d,k[f[b]]));
c.setStyleValuesCanvas(d);c.setStyleValuesModel(k.undefined);c.refresh();g.resetState(c.domNode);dojo.publish("/davinci/ui/widgetPropertiesChanged",[[c]])}}else console.error("no widget")}},undo:function(){if(this._id){var c=h.byId(this._id);if(c){var k=this._oldStyleValuesAllStates,f=this._applyToStateIndex;c.setStyleValuesAllStates(k);k=e.mergeStyleArrays(k.undefined,k[f]);c.setStyleValuesCanvas(k);c.setStyleValuesModel(this._oldStyleValuesAllStates.undefined);c.refresh();davinci.ve.states.resetState(c.domNode);
dojo.publish("/davinci/ui/widgetPropertiesChanged",[[c]])}}}})})},"davinci/ve/commands/ResizeCommand":function(){define(["dojo/_base/declare","dojo/dom-geometry","davinci/ve/widget","davinci/ve/States","davinci/ve/utils/StyleArray"],function(q,n,h,g,e){return q("davinci.ve.commands.ResizeCommand",null,{name:"resize",constructor:function(e,c,k,f){this._id=e?e.id:void 0;e=/^\s*[-+]?[0-9]*\.?[0-9]+\s*$/;e.test(c)&&(c=parseFloat(c));e.test(k)&&(k=parseFloat(k));this._newBox={w:c,h:k};this._applyToStateIndex=
f&&"Normal"!=f&&"undefined"!=f?f:"undefined"},execute:function(){if(this._id&&this._newBox){var m=h.byId(this._id);if(m&&m.domNode){var c=m.domNode,k=c.ownerDocument.defaultView.getComputedStyle(c),f=n.getContentBox(c,k);this._oldBox={w:f.w,h:f.h};var f=this._newBox.w,d=this._newBox.h;this._usesBorderBox(c)&&(c=n.getPadBorderExtents(c,k),"number"==typeof f&&0<=f&&(f+=c.w),"number"==typeof d&&0<=d&&(d+=c.h));c=[{}];"number"==typeof f?c[0].width=f+"px":"string"==typeof f&&(c[0].width=f);"number"==typeof d?
c[0].height=d+"px":"string"==typeof d&&(c[0].height=d);f=m.getStyleValuesAllStates();this._oldStyleValuesAllStates=dojo.clone(f);this._oldBox&&(this._oldStyleValuesAllStates[this._applyToStateIndex]=e.mergeStyleArrays(this._oldStyleValuesAllStates[this._applyToStateIndex],[{width:this._oldBox.w+"px"},{height:this._oldBox.h+"px"}]));f[this._applyToStateIndex]=f[this._applyToStateIndex]?e.mergeStyleArrays(f[this._applyToStateIndex],c):c;m.setStyleValuesAllStates(f);d=g.getStatesListCurrent(m.domNode);
c=e.mergeStyleArrays([],f.undefined);for(k=0;k<d.length;k++)f[d[k]]&&(c=e.mergeStyleArrays(c,f[d[k]]));m.setStyleValuesCanvas(c);m.setStyleValuesModel(f.undefined);this._resize(m);g.resetState(m.domNode);dojo.publish("/davinci/ui/widgetPropertiesChanged",[[m]])}}},setContext:function(e){this._context=e},undo:function(){if(this._id){var m=h.byId(this._id);if(m){var c=this._oldStyleValuesAllStates,k=this._applyToStateIndex;m.setStyleValuesAllStates(c);c=e.mergeStyleArrays(c.undefined,c[k]);m.setStyleValuesCanvas(c);
m.setStyleValuesModel(this._oldStyleValuesAllStates.undefined);this._resize(m);g.resetState(m.domNode);dojo.publish("/davinci/ui/widgetPropertiesChanged",[[m]])}}},_usesBorderBox:function(e){var c=e.tagName.toLowerCase();(e=e.getAttribute("type"))&&(e=e.toLowerCase(e));return"table"==c||"button"==c||"input"==c&&"button"==e},_resize:function(e){var c=e.getParent();c&&c.dijitWidget&&c.dijitWidget.isLayoutContainer?c.resize():e.resize&&e.resize();e.renderWidget();e._updateSrcStyle()}})})},"davinci/ui/dnd/DragManager":function(){define(["dojo/_base/declare",
"dojo/_base/array","dojo/_base/connect","dojo/mouse"],function(q,n,h){q=q("",null,{disabled:!1,currentDragSource:null,currentDropTarget:null,dropAcceptable:!1,dropTargets:null,dragTriggered:!1,currentDomElement:null,_connectors:null,_moveConnector:null,document:null,documentX:0,documentY:0,_ABSOLUTE_THRESHOLD:3,_STATIC_THRESHOLD:40,constructor:function(){this.dropTargets=[];this._connectors=[h.connect(dojo.doc,"onkeydown",this,"onKeyDown"),h.connect(dojo.doc,"onmouseover",this,"onMouseOver"),h.connect(dojo.doc,
"onmouseout",this,"onMouseOut"),h.connect(dojo.doc,"onmousedown",this,"onMouseDown"),h.connect(dojo.doc,"onmouseup",this,"onMouseUp")]},destroy:function(){n.forEach(this._connectors,dojo.disconnect)},onKeyDown:function(e){27==e.keyCode&&this.currentDragSource&&(this.dropAcceptable=!1,this.onMouseUp(e))},onMouseDown:function(e,g){if(!(this.disabled||this.dragTriggered||!dojo.mouseButtons.isLeft(e)||e.metaKey||e.ctrlKey||this.dragTriggered)&&(g=this.currentDragSource=g||this.findDragSource(e))){g.onDragDown(e);
g=0;for(var c=this.dropTargets.length;g<c;g++){var k=this.dropTargets[g];if(!k.disabled)k.onDragDown(e)}e.preventDefault();this._moveConnectors=[h.connect(dojo.doc,"onmousemove",this,"onMouseMove")];this.document&&this.document!=dojo.doc&&(this._moveConnectors.push(h.connect(this.document,"onmousemove",this,"onMouseMove")),this._moveConnectors.push(h.connect(this.document,"onmouseover",this,"onMouseOver")),this._moveConnectors.push(h.connect(this.document,"onmouseout",this,"onMouseOut")),this._moveConnectors.push(h.connect(this.document,
"onmouseup",this,"onMouseUp")))}},onMouseMove:function(e){e.preventDefault();dojo.isIE&&(e.pageX-=2,e.pageY-=2);if(e.target==this.document||e.target.ownerDocument==this.document)e.documentX=this.documentX,e.documentY=this.documentY,e.documentX-=this.document.documentElement.scrollLeft,e.documentY-=this.document.documentElement.scrollTop;var g=e.dragSource=this.currentDragSource;if(!this.dragTriggered){var c=e.pageX-g.pageX,k=e.pageY-g.pageY,c=Math.sqrt(c*c+k*k);if("absolute"==g.positioning){if(c<
this._ABSOLUTE_THRESHOLD)return}else if(c<this._STATIC_THRESHOLD)return;this.dragTriggered=!0;g.onDragStart(e);c=0;for(k=this.dropTargets.length;c<k;c++){var f=this.dropTargets[c];f.disabled||(e.dropTarget=f,f.onDragStart(e))}this.onMouseOver(e)}g.onDragMove(e);(f=this.currentDropTarget)?this.dropAcceptable&&(e.dropTarget=f,f.onDragMove(e,this.dragObjects)):this.dropAcceptable=!1},onMouseOver:function(e){this.currentDomElement=e.target;if(this.dragTriggered){var g=this.currentDragSource;if(g){e.dragSource=
g;var c=this.findDropTarget(this.currentDomElement,g);c&&g.domNode==c.domNode||(c!=this.currentDropTarget&&(this.currentDropTarget&&(e.dropTarget=this.currentDropTarget,this.currentDropTarget.onDragOut(e)),c&&(e.dropTarget=c,this.dropAcceptable=c.onDragOver(e))),this.currentDropTarget=c)}}},onMouseOut:function(e){},onMouseUp:function(e){if(!this.ignoreMouseUp){n.forEach(this._moveConnectors,dojo.disconnect);if(this.dragTriggered){for(var g=0,c=this.dropTargets.length;g<c;g++){var k=this.dropTargets[g];
k.disabled||(e.dropTarget=k,k.onDragEnd(e))}g=this.currentDragSource;c=this.currentDropTarget;e.dragSource=g;e.dropTarget=c;if(g&&(c?(c.onDropStart(e),this.dropAcceptable?(k=c.onDrop(e),c.onDragOut(e),void 0==k||e.dragStatus||(e.dragStatus=k?"dropSuccess":"dropFailure")):(c.onDragOut(e),e.dragStatus="dropFailure")):e.dragStatus="dropFailure",g.onDragEnd(e),c))c.onDropEnd(e)}this._resetStatus()}},_resetStatus:function(){this.currentDragSource=this.currentDropTarget=null;this.dragTriggered=this.dropAcceptable=
!1;this.currentDomElement=null},findDragSource:function(e){for(e=e.target;e&&e!=dojo.doc.body;e=e.parentNode)if(e.dragSource&&!e.dragSource.disabled)return e.dragSource;return null},findDropTarget:function(e,g){for(var c=null,k=null;null!=e&&e!=dojo.doc.body;e=e.parentNode){var f=e.dropTarget;if(f&&!f.disabled&&f.accepts(g)){c=f;c.nodeUnderMouse=k;break}e.dragSource&&!e.dragSource.disabled&&(k=e)}return c},registerDropTarget:function(e){this.dropTargets.push(e)},unregisterDropTarget:function(e){for(var g=
0,c=this.dropTargets.length;g<c;g++)if(this.dropTargets[g]==e){this.dropTargets.splice(g,1);break}}});var g=new q;g.Module=q;return g})},"davinci/ve/views/StatesView":function(){define("dojo/_base/declare dojo/query dojo/dom-class dojo/_base/connect dojo/aspect davinci/lang/ve/ve davinci/workbench/ViewPart dijit/layout/BorderContainer dijit/layout/ContentPane davinci/XPathUtils davinci/ve/States davinci/ve/widget davinci/ve/_Widget davinci/ve/commands/AppStateCommand dojo/data/ItemFileWriteStore dijit/tree/ForestStoreModel dijit/Tree dojo/_base/window".split(" "),
function(q,n,h,g,e,m,c,k,f,d,b,a,p,r,v,w,x,B){q(x._TreeNode,{});var z=q(x._TreeNode,{_setLabelAttr:{node:"labelNode",type:"innerHTML"}}),u="sceneId category node sceneContainerNode isCurrent isFocus isInitial".split(" ");return q("davinci.ve.views.StatesView",[c],{nextId:0,_lastSelectedId:null,postCreate:function(){this.inherited(arguments);this._themeState=null;this.container=new k({design:"headline",gutters:!1,liveSplitters:!1});this.centerPane=new f({region:"center"});this.container.addChild(this.centerPane);
this.container.layout();this.container.startup();this.setContent(this.container);this.subscribe("/davinci/ui/editorSelected",this._editorSelected.bind(this));this.subscribe("/davinci/ui/context/loaded",this._contextLoaded.bind(this));this.subscribe("/davinci/ui/context/statesLoaded",this._statesLoaded.bind(this));this.subscribe("/davinci/ui/context/pagebuilt",this._pagebuilt.bind(this));this.subscribe("/davinci/ui/context/pagerebuilt",this._pagerebuilt.bind(this));this.subscribe("/davinci/states/statesReordered",
this._statesReordered.bind(this));this.subscribe("/davinci/ui/deviceChanged",this._deviceChanged.bind(this));this.subscribe("/davinci/states/state/added",this._addState.bind(this));this.subscribe("/davinci/states/state/removed",this._removeState.bind(this));this.subscribe("/davinci/states/state/renamed",this._renameState.bind(this));this.subscribe("/davinci/states/state/changed",this._changeState.bind(this));this.subscribe("/maqetta/appstates/state/changed",this._changeState.bind(this));this.subscribe("/maqetta/appstates/state/containerChange",
this._containerChange.bind(this));this.subscribe("/davinci/ui/context/registerSceneManager",this._registerSceneManager.bind(this));this.subscribe("/davinci/scene/scenesLoaded",this._scenesLoaded.bind(this));this.subscribe("/davinci/scene/added",this._addScene.bind(this));this.subscribe("/davinci/scene/removed",this._removeScene.bind(this));this.subscribe("/davinci/scene/renamed",this._renameScene.bind(this));this.subscribe("/davinci/scene/selectionChanged",this._sceneSelectionChanged.bind(this));
dojo.subscribe("/davinci/ui/widgetPropertiesChanged",dojo.hitch(this,this._widgetPropertiesChanged));this.subscribe("/davinci/ui/widgetSelected",dojo.hitch(this,this._widgetSelectionChanged));this.attachToolbar();dojo.style(this.toolbarDiv,"display","none")},_contextLoaded:function(){},_pagebuilt:function(){this._statesLoaded.apply(this,arguments)},_pagerebuilt:function(){this._destroyTree();this._statesLoaded.apply(this,arguments)},_statesReordered:function(){this._destroyTree();this._statesLoaded.apply(this,
arguments)},_statesLoaded:function(){this._editor&&"davinci.ve.themeEditor.ThemeEditor"!=this._editor.declaredClass&&this._updateView();this._hideShowToolBar()},_deviceChanged:function(){this._updateView()},_addState:function(){this._updateView()},_removeState:function(){this._updateView()},_renameState:function(){this._updateView()},_changeState:function(a){this.isThemeEditor()?this._updateThemeSelection(a.newState):this._updateView()},_containerChange:function(){this._updateView()},_registerSceneManager:function(a){},
_scenesLoaded:function(a){this._updateView()},_addScene:function(a,b,d){this._updateView()},_removeScene:function(a,b,d){this._updateView()},_renameScene:function(a,b,d){this._updateView()},_widgetPropertiesChanged:function(){this._updateView()},_widgetSelectionChanged:function(a){this._editor&&this._editor.getContext&&this._tree&&this._sceneStore&&(a=this._editor.getContext().getSelection(),1==a.length&&(a=a[0].domNode)&&a._maqAppStates&&this._sceneStore.fetch({query:{node:a},queryOptions:{deep:!0},
onComplete:dojo.hitch(this,function(a,b){0<a.length&&(a=this._getTreeSelectionPath(a[0]),this._tree.set("path",a))})}))},_sceneSelectionChanged:function(a,b){a&&a.category&&b&&this._updateView()},_editorSelected:function(a){a=a.editor;this._destroyTree();this._unregisterForContextEvents();a&&a.supports("states")?(this._editor=a,dojo.style(this.container.domNode,"display","block"),"davinci.ve.themeEditor.ThemeEditor"===a.declaredClass?(this.set("title",m.States),this._updateViewForThemeEditor(),this._themeState?
this._updateThemeSelection(this._themeState):this._updateThemeSelection("Normal")):(this.set("title",m.Scenes),this._registerForContextEvents(),this._updateView()),this.container.layout()):(delete this._editor,dojo.style(this.container.domNode,"display","none"));this._hideShowToolBar()},_getRootNode:function(){var a=this._editor,b;a&&a.getContext&&(b=(a=a.getContext())&&a.rootNode);return b},_updateView:function(){if(this._editor&&this._editor.getContext&&!this.isThemeEditor()){var a=this._editor.getContext();
a&&a._statesLoaded&&B.withDoc(document,function(){this._updateList();this._updateSelection()},this)}},isThemeEditor:function(){return this._editor&&"davinci.ve.themeEditor.ThemeEditor"===this._editor.declaredClass},_updateViewForThemeEditor:function(){var a=this._editor._theme.getStatesForAllWidgets(),b={Normal:"Normal"};if(a)for(var d=0;d<a.length;d++){var f=a[d];"Normal"!=f&&(b[f]=f)}window.latestStates=b;var a=this._getScenes(),b={name:this._editor&&this._editor.getFileNameToDisplay?this._editor.getFileNameToDisplay():
this._editor&&this._editor.fileName?this._editor.fileName:"file",type:"file",category:"file",children:[]},d=[],f=[b],c;for(c in latestStates)d.push({name:c,sceneId:c,type:"AppState"});b.children=b.children.concat(d);this._compareStructures(f,a)||(this._destroyTree(),this._createTree(f))},_updateList:function(){function f(c,e){var r,n=c.declaredClass&&c.isInstanceOf&&c.isInstanceOf(p);n?(r=c,c=r.domNode):r=null;var v=b.isStateContainer(c),B=!1,y;for(y in k){var A=k[y];if(A.getSceneChildren&&A.name&&
A.category&&(B=A.isSceneContainer(c)))break}if("BODY"==c.tagName||v||B){for(var x=null,w=0;w<g.length;w++)if(A=g[w],A.node==c){x=A;break}var u=null;if(!x){var z=c.parentNode;a:for(;z;){for(w=0;w<g.length;w++)if(A=g[w],A.node==z){u=A;break a}if("BODY"==z.tagName)break;z=z.parentNode}}if(x)e=x;else{var C=n?a.getLabel(r):a.getLabelForNode(c),w=d.getXPath(c),C={name:C,type:"file",category:"file",node:c,children:[]};u?(C.maqid=u.maqid+"$"+w,u.children.push(C)):(C.maqid=e.maqid+"$"+w,e.children.push(C));
g.push(C);e=C}if(v){w=b.getStates(c);A=b.getState(c);A||(A=b.NORMAL);z=b.getInitial(c);z||(z=b.NORMAL);for(var q={maqid:e.maqid+"$AppStates",name:"Application States",type:"SceneManagerRoot",category:"AppStates",sceneContainerNode:c,parentItem:e,children:[]},F=0;F<w.length;F++){var D=w[F],C=m._treeNodeContent("Normal"==D?"Background":D),v=h&&h.stateContainerNode==c&&h.state==A,u=D===A,x=D===z,C={maqid:q.maqid+"$"+D,name:C,sceneId:D,type:"AppState",isFocus:v,isCurrent:u,isInitial:x,sceneContainerNode:c,
parentItem:q};q.children.push(C);g.push(C)}e.children.push(q);g.push(q)}if(B)for(y in k)if(A=k[y],A.getSceneChildren&&A.getCurrentScene&&A.getInitialScenes&&A.name&&A.category&&(B=A.getSceneChildren(c),0<B.length)){z=A.getCurrentScene(c);q=A.getInitialScenes(c);w=d.getXPath(c);F={maqid:e.maqid+"$"+w,name:A.name,type:"SceneManagerRoot",category:A.category,parentItem:e,children:[]};for(D=0;D<B.length;D++){var E=B[D],C=n?a.getLabel(E._dvWidget):a.getLabelForNode(E),C=m._treeNodeContent(C),v=!1,u=E===
z,x=0<=q.indexOf(E),w=d.getXPath(E),C={maqid:F.maqid+"$"+w,name:C,sceneId:E.id,type:A.category,isFocus:v,isCurrent:u,isInitial:x,sceneContainerNode:c,parentItem:F,node:E,children:[]};F.children.push(C);g.push(C)}e.children.push(F);g.push(C)}}r=n?r.getChildren():b._getChildrenOfNode(c);for(n=0;n<r.length;n++)f(r[n],e)}var c=this._getScenes();if(this._editor&&c){var e=this._editor.getContext();if(e&&e.rootWidget&&e.rootNode&&e._statesLoaded){var k=e.sceneManagers,g=[],m=this,h=b.getFocus(e.rootNode);
h&&!h.state&&(h.state=b.NORMAL);var r={maqid:"root",children:[]};f(e.rootWidget,r);e=[r.children[0]];if(!this._compareStructures(e,c)){var n=null;this._tree&&this._sceneStore&&(c=this._tree.get("path"),0<c.length&&(n=c[c.length-1].maqid[0]));this._destroyTree();this._createTree(e);n&&this._tree.onLoadDeferred.then(function(){this._sceneStore.fetch({query:{maqid:n},queryOptions:{deep:!0},onComplete:dojo.hitch(this,function(a,b){1===a.length&&(a=this._getTreeSelectionPath(a[0]),0<a.length&&this._tree.set("path",
a))})})}.bind(this))}this._hideShowToolBar()}}},_getTreeSelectionPath:function(a){var b=[];b.splice(0,0,a.id[0]);for(a=a.parentItem&&a.parentItem[0];a;)b.splice(0,0,a.id[0]),a=a.parentItem&&a.parentItem[0];b.splice(0,0,"StoryRoot");return b},_updateSelection:function(){if(this._editor&&this._tree){var a=this._editor.getContext();a&&a._statesLoaded&&this._tree.onLoadDeferred.then(function(){var d=this._tree.get("path"),d=0<d.length?d[d.length-1].maqid[0]:null,f=a.sceneManagers,c;for(c in f){var e=
f[c];if(e.getAllSceneContainers&&e.getSceneChildren&&e.getCurrentScene){e.getAllSceneContainers();var p;this._sceneStore.fetch({query:{type:e.category},queryOptions:{deep:!0},onComplete:dojo.hitch(this,function(a,b){p=a})});for(e=0;e<p.length;e++){var k=p[e],g=this._findTreeNodeSpanByClass(k,"ScenesPaletteCurrent"),m=this._findTreeNodeSpanByClass(k,"ScenesPaletteInitial");k.isCurrent&&k.isCurrent[0]?g&&h.remove(g,"ScenesPaletteCurrentHidden"):g&&h.add(g,"ScenesPaletteCurrentHidden");k.isInitial&&
k.isInitial[0]?m&&h.remove(m,"ScenesPaletteInitialHidden"):m&&h.add(m,"ScenesPaletteInitialHidden");k.maqId&&k.maqId[0]==d&&(g=k.node&&k.node[0])&&g._maqAppStates&&(m=b.getState(g),b.setState(m,g,{focus:!0,updateWhenCurrent:!0}))}}}var r=[];this._sceneStore.fetch({query:{type:"AppState"},queryOptions:{deep:!0},onComplete:dojo.hitch(this,function(a,b){r=a})});for(e=0;e<r.length;e++)c=r[e],g=this._findTreeNodeSpanByClass(c,"ScenesPaletteCurrent"),m=this._findTreeNodeSpanByClass(c,"ScenesPaletteInitial"),
c.isCurrent&&c.isCurrent[0]?g&&h.remove(g,"ScenesPaletteCurrentHidden"):g&&h.add(g,"ScenesPaletteCurrentHidden"),c.isInitial&&c.isInitial[0]?m&&h.remove(m,"ScenesPaletteInitialHidden"):m&&h.add(m,"ScenesPaletteInitialHidden")}.bind(this))}},_updateThemeSelection:function(a){if(this._sceneStore){var b;a||(a="Normal");this._sceneStore.fetch({query:{type:"AppState",sceneId:a},queryOptions:{deep:!0},onComplete:dojo.hitch(this,function(a,d){1===a.length&&(b=a[0].sceneId[0])})});b&&this._updateSelectedScene("AppState",
b)}},_getScenes:function(){var a=[];this._sceneStore&&this._sceneStore.fetch({query:{},queryOptions:{},onComplete:dojo.hitch(this,function(b,d){function f(a,b){for(var d={name:a.name[0],type:a.type[0]},c=0;c<u.length;c++){var e=u[c];a[e]&&(d[e]=a[e][0])}b.push(d);a.children&&0<a.children.length&&(d.children=[],a.children.forEach(function(a){f(a,d.children)}))}b.forEach(function(b){f(b,a)})})});return a},_compareStructures:function(a,b){function d(a,b){if(a.length!=b.length)return!1;for(var f=0;f<
a.length;f++){var c;a:{c=a[f];for(var e=b[f],p=0;p<u.length;p++){var k=u[p];k=c[k]&&!e[k]||!c[k]&&e[k]?!1:c[k]&&c[k]!==e[k]?!1:!0;if(!k){c=!1;break a}}p=c.children&&c.children.length;k=e.children&&e.children.length;c=p&&!k||!p&&k||p&&!d(c.children,e.children)?!1:!0}if(!c)return!1}return!0}return d(a,b)},_destroyTree:function(){this._tree&&(this._tree.destroyRecursive(),this._forest.destroy(),this._tree=this._forest=this._sceneStore=null)},_createTree:function(a){require(["dijit/tree/dndSource"],function(d){d=
function(a,b,d){if(a&&b){var f,c,e;b.forInSelectedItems(function(a){if(f=a.data&&a.data.item)c=f.parentItem&&f.parentItem[0],e=c.children&&c.children.indexOf(f)});var p,k;(a=dijit.getEnclosingWidget(a).item)&&(p=a.parentItem&&a.parentItem[0])&&(k=p.children&&p.children.indexOf(a));return"over"!=d&&f&&a&&c&&p&&"AppState"==f.type[0]&&"AppState"==a.type[0]&&c==p&&0!==e&&!("before"==d&&0===k)&&!("before"==d&&e+1==k)&&!("after"==d&&e==k+1)}}.bind(this);var f=function(a,b,d){if(a.tree==this._tree){var f,
e;a.forInSelectedItems(function(a){(f=a.data&&a.data.item)&&(e=f.parentItem&&f.parentItem[0])});if((a=e.sceneContainerNode&&e.sceneContainerNode[0])&&a._maqAppStates&&a._maqAppStates.states){b=[];for(d=1;d<e.children.length;d++)b.push(e.children[d].sceneId[0]);a=new r({action:"reorder",newStatesList:b,stateContainerNode:a,context:c});c.getCommandStack().execute(a)}}}.bind(this);if(this._editor){var c=this._editor.getContext(),p=c.sceneManagers;this._sceneStore=new v({data:{identifier:"id",label:"name",
items:[]},clearOnClose:!0});this._forest=new w({store:this._sceneStore,query:{type:"file"},rootId:"StoryRoot",rootLabel:"All",childrenAttrs:["children"]});this._tree=new x({model:this._forest,persist:!1,showRoot:!1,autoExpand:!0,dndController:"dijit.tree.dndSource",dragThreshold:8,betweenThreshold:5,checkItemAcceptance:d,className:"StatesViewTree",style:"height:150px; overflow-x:hidden; overflow-y:auto;",_createTreeNode:function(a){return new z(a)},getIconClass:function(a,b){return"dijitLeaf"}});
this._tree.tree&&this._tree.tree.dndController&&e.after(this._tree.tree.dndController,"onDndDrop",f,!0);this.centerPane.domNode.appendChild(this._tree.domNode);dojo.connect(this._tree,"onClick",this,function(a){var d=this._editor,f=d?d.getContext():null,c=null,e=null,k=null;a&&a.type&&(e=a.type[0],k=a.category&&a.category[0],"AppState"==e||"SceneManagerRoot"==e&&"AppStates"==k?c=a.sceneContainerNode?a.sceneContainerNode[0]:null:a.node&&a.node[0]._maqAppStates&&(c=a.node[0]));if(this.isThemeEditor())this.publish("/davinci/states/state/changed",
[{editorClass:d.declaredClass,widget:"$all",newState:a.sceneId[0],oldState:this._themeState,context:this._editor.context}]),this._themeState=a.sceneId[0];else{f&&c&&(k="AppState"==e?a.sceneId?a.sceneId[0]:null:b.getState(c),b.setState(k,c,{focus:!0,updateWhenCurrent:!0}),"davinci.ve.PageEditor"===this._editor.declaredClass&&(f.deselectInvisible(),f.clearCachedWidgetBounds(),f.updateFocusAll()));if(a.sceneId)for(var g in p){if(d=p[g],d.selectScene&&d.selectScene({sceneId:a.sceneId[0]}))break}else a.type&&
"file"==a.type[0]&&a.node&&a.node[0]._dvWidget&&f.select(a.node[0]._dvWidget);this._updateSelection()}});var k=function(a,b){var d=dojo.mixin({},a),f=this.nextId+"";this.nextId++;d.id=f;d.parentItem=b;delete d.children;var c;c=b?this._sceneStore.newItem(d,{parent:b,attribute:"children"}):this._sceneStore.newItem(d);a.children&&a.children.forEach(function(a){k(a,c)})}.bind(this);a.forEach(function(a){k(a)});this._sceneStore.save();if(this._tree.getParent){var g=this._tree.getParent();g.resize&&window.setTimeout(function(){g.resize()},
0)}}}.bind(this))},_updateSelectedScene:function(a,b){if(this._sceneStore){for(var d=b,f=[];d;)this._sceneStore.fetch({query:{type:a,sceneId:d},queryOptions:{deep:!0},onComplete:dojo.hitch(this,function(a,b){if(1!==a.length)console.error("_sceneSelectionChanged error. currentSceneId\x3d"+d+",items.length\x3d"+a.length),d=null;else for(a=a[0],f.splice(0,0,a.id[0]),d=a.parentSceneId?a.parentSceneId[0]:null,a=a.parentItem&&a.parentItem[0];a;)f.splice(0,0,a.id[0]),a=a.parentItem&&a.parentItem[0]})});
f.splice(0,0,"StoryRoot");this._tree.set("paths",[f])}},_hideShowToolBar:function(){function a(a,b){var d=a+"Disabled";a=n("."+a);a.length&&(b?h.remove(a[0],d):h.add(a[0],d))}if(this._editor){var d=this._editor.getContext&&this._editor.getContext();dojo.style(this.toolbarDiv,"display","davinci.ve.PageEditor"===this._editor.declaredClass?"block":"none");var f,c,e;f=c=e=!1;d&&d.rootNode&&((d=b.getFocus(d.rootNode))&&d.stateContainerNode&&(f=e=!0),d&&d.state&&d.state!==b.NORMAL&&(c=e=!0));a("addStateIcon",
f);a("removeStateIcon",c);a("modifyStateIcon",e)}},_treeNodeContent:function(a){var b;b=""+('\x3cspan title\x3d"'+m.InitialScene+'" class\x3d"ScenesPaletteAppStateIcon ScenesPaletteInitial"\x3e\x26#x2713;\x3c/span\x3e');b+='\x3cspan title\x3d"'+m.ActiveScene+'" class\x3d"ScenesPaletteAppStateIcon ScenesPaletteCurrent"\x3e\x3c/span\x3e';return b+("\x3cspan\x3e"+a+"\x3c/span\x3e")},_findTreeNodeSpanByClass:function(a,b){var d=(a=(a=this._tree.getNodesByItem(a))&&0<a.length?a[0]:null)?a.domNode:null;
return(b=a?dojo.query("."+b,d):[])&&0<b.length?b[0]:null},_contextEventHandler:function(){this._updateView()},_unregisterForContextEvents:function(){this._contextConnects&&(this._contextConnects.forEach(g.disconnect),this._contextConnects=null)},_registerForContextEvents:function(){var a=["widgetChanged","widgetAddedOrDeleted"];this._unregisterForContextEvents();var b=this._editor&&this._editor.getContext&&this._editor.getContext();b&&(this._contextConnects=[],a.forEach(function(a){b[a]&&this._contextConnects.push(g.connect(b,
a,this,"_contextEventHandler"))}.bind(this)))}})})},"davinci/lang/ve/ve":function(){define([],function(){return{common:"Common",widgetSpecific:"Widget",events:"Events",layout:"Layout",showMinMax:"show min/max",padding:"Padding",margins:"Margins",showtrbl:"show t/r/b/l",background:"Background",border:"Border",showDetails:"show details",fontsAndText:"Fonts/Text",shapesSVG:"SVG",properties:"properties",Scenes:"Scenes",States:"States",ActiveScene:"This scene is currently visible",AppStateFocus:"This application state is the target for application-state-specific visibility or styling changes",
InitialScene:"This scene will show initially when the page runs",chooseDeviceSilhouette:"Choose a device silhouette: ",filesHasUnsavedChanges:"The file '${0}' has unsaved changes, \"Save\" changes and continue with switch device silhouette.",selectAncestorTitle:"Select ancestor",selectAncestorLabel:"Select ancestor (closest ancestor listed first):",createNewState:"Create New State",updateCurrentState:"Update Current State",createLabel:"Create",updateLabel:"Update",modifyState:"Modify State",modifyLabel:"Update",
stateLabel:"Name",enterStateName:"Please enter a state name.",stateNameExists:"State name '${name}' already exists. Please enter a different state name.",renameState:"Rename State",renameLabel:"Rename",cancelLabel:"Cancel",newStateLabel:"New name:",manageStates:"Manage Widget Visibility for Different States",manageStatesCheckLabel:"Check:",manageStatesCheckCurrentStateOnly:"Current state",manageStatesCheckAll:"All",manageStatesUncheckAll:"None",manageStatesCheckBackgroundOnly:"Background only",manageStatesAllVisibleFromBackground:"(Visible from Background)",
manageStatesSomeVisibleFromBackground:"(Some visible from Background)",manageStatesSomeVisibleSomeHidden:"(Some visible, some hidden)",initialStateCheckBoxLabel:"Initial state at document load time",EnableApplicationStates:"Enable/disable application states",EnableAsStateContainerDescription:"Setting the check box below and clicking OK will allow custom application states to be defined on the currently selected widget.",DisableAsStateContainerDescription:"Unsetting the check box below and clicking OK will disallow custom application states on the currently selected widget.",
DisableAsStateContainerDataLoss:"Any existing interactivity based on existing application states will be lost.",EnableAsStateContainerWidgetLabel:"Application states are enabled on this widget",EnableApplicationStatesCurrentWidget:"Currently selected widget",EnableApplicationStatesCurrentStates:"Current application states",EnableApplicationStatesNone:"(none)",NewWidgetsCurrentStateTitleBackground:"Toggle whether new widgets go to Background or selected state (current value: Background)",NewWidgetsCurrentStateTitleCurrentState:"Toggle whether new widgets go to Background or selected state (current value: selected state)",
richTextInputHelp:"Provides Rich Text (word processor-like) editing of HTML.",smartInputHelp1:"If you use any markup characters (\x26lt;,\x26gt;,\x26amp;), you need to specify whether the text represents literal (plain) text or HTML markup that should be parsed (using an innerHTML assignment).",smartInputHelp2:"Text represents literal (plain) text.",loading:"Loading...",htmlMarkup:"HTML markup",creatingStyleRules:"Creating Style Rules with app.css",propChangeCannotComplete:"This property change cannot be completed because the operation attempts to modify a read-only theme CSS file.",
toChangeProperty:"To change this property, one technique is to add a class to this widget (at top of Properties palette)  and then open up the CSS Details pane to target a style rule within your app.css file, as described at ${0}.",errorModifyingValue:"Error modifying value",changeWillModify:"This change will modify one of the CSS style rules defined within a 'CSS theme' and will therefore probably impact other widgets on a global basis.",insteadOfChanging:"Instead of changing the theme CSS files, it is usually better to add a class to this widget (at the top of the Properties palette) and then open up the CSS Details pane to target a style rule within your app.css file, as described at ${0}.",
okToProceed:"OK to proceed with this change?",valueIsOverriden:"This value is overriden and can not be changed.",applyToWhich:"Apply to which style rule:",onlyApplyToState:" Only apply to current state (${0})",newRule:"[class: ${0} - New rule in ${1}] ",newThemeRule:"[theme: - New rule in ${0}] ",existingRule:"[class: ${0} - Existing rule in ${1}] ",line:" line: ${0})",propUndefined:"undefined",bgdType_emptystring:"",bgdType_none:"none",bgdType_url:"image",bgdType_linear:"linear gradient",bgdType_radial:"radial gradient",
bgdType_other:"other",bgdPickFile:"Choose...",bgdStop:"Stop",bgdAddStop:"Add a new gradient stop after this stop",bgdRemoveStop:"Remove this gradient stop",bgdBackgroundColor:"background-color:",bgdBackgroundImageType:"background-image type:",bgdImageUrl:"Image URL:",bgdUrl:"URL:",bgdColorStops:"Color stops:",bgdColor:"color",bgdPosition:"position",bgdOptions:"Options:",bgdAngle:"Angle:",bgdPosition2:"Position:",bgdShape:"Shape:",bgdExtent:"Extent:",bgdBackgroundRepeat:"background-repeat:",bgdBackgroundPosition:"background-position:",
bgdBackgroundSize:"background-size:",bgdBackgroundOrigin:"background-origin:",bgdBackgroundClip:"background-clip:",bgdBackgroundImageValue:"'background-image' value:",bgdTemplate:"Template:",colorPicker:"Color picker...",removeValue:"Remove Value",selectColor:"select a color",toolBarFor:"",noSelection:"(no selection)",toolBarClass:"class:",toolBarId:"ID:",idAlreadyUsed:"This id is already used by another widget",noValidParents:"No valid parents at this position",willBeChildOf:"Will become a child of:",
candidateParents:"Candidate parents:",toChangePress:"To change, press numbers",vteWarningTitle:"Theme Version Warning",vteWarningMessage:"Theme version does not match Maqetta version this could produce unexpected results. We suggest recreating the custom theme using the current version of Maqetta and deleting the existing theme.",vteWarningUnsuportedBrowserTitle:"Unsupported brower",vteWarningUnsuportedBrowserMessage:"Editing mobile themes is only supported on webkit browsers, we sugguest using Chrome or Safari to customize mobile themes.",
vteWarningToolkitMessage:"Theme version does not match workspace library version this could produce unexpected results. We suggest recreating the custom theme using the current version of Maqetta and deleting the existing theme.",vteErrorTitle:"Theme Version Error",vteErrorMessage:"Theme version is not supported by this version of Maqetta. You must recreating custom theme using the current version of Maqetta and deleting the existing theme..",vteErrorSavingResourceMessage:"error saving resource\n",
"SourceComboButton-source":"Source","SourceComboButton-splitHorizontal":"Split-H","SourceComboButton-splitVertical":"Split-V","LayoutDropDownButton-flow":"Flow","LayoutDropDownButton-absolute":"Absolute"}})},"davinci/XPathUtils":function(){define(function(){function q(h){this.node=h}q.prototype={name:function(){return this.node.nodeName},parent:function(){var h=this.node.parentNode;if(h!==this.node.ownerDocument)return new q(h)},index:function(){var h=this.node.nodeName,g=this.node.parentNode,e=!1,
m=0;g.id||(g.id="__XPATH_UTILS_TEMP_ID__"+Date.now(),e=!0);h=g.querySelectorAll("#"+g.id+"\x3e"+h);if(1<h.length)for(var c=0,k=h.length;c<k;c++)if(h[c]===this.node){m=c+1;break}e&&(g.id="");return m}};var n=/(\w+)(?:\[(\d+)\])?/;return{getXPath:function(h,g){function e(g,c){var k=c.name(),f=c.parent();return f?(c=c.index(),e((c?k+("["+c+"]"):k+"[1]")+(g?"/"+g:""),f)):"/"+k+"/"+g}g=g||q;h=new g(h);return e("",h).toLowerCase()},toCssPath:function(h){"/"===h.charAt(0)&&(h=h.substr(1));var g="";h.split("/").forEach(function(e){e=
e.match(n);var m=e[2];g+=(g?"\x3e":"")+e[1];m&&(g+=":nth-of-type("+m+")")});return g}}})},"davinci/ve/commands/AppStateCommand":function(){define("dojo/_base/declare dojo/_base/lang dojo/topic davinci/XPathUtils davinci/html/HtmlFileXPathAdapter davinci/ve/States".split(" "),function(q,n,h,g,e,m){return q("davinci.ve.commands.AppStateCommand",null,{name:"AppStateCommand",_actions:["add","remove","modify","reorder"],constructor:function(c){if(c){this._params=n.mixin({},c);var k=c.stateContainerNode;
k&&k._dvWidget&&(this._params.stateContainerId=k.id,this._params.stateContainerXpath=g.getXPath(k._dvWidget._srcElement,e));"reorder"==this._params.action&&((k=this._getStateContainerNode())&&c.newStatesList.length?(this._oldStatesList=m.getStates(k),this._oldStatesList.shift()):this._params=null)}},_validParams:function(){return this._params&&0<=this._actions.indexOf(this._params.action)&&this._params.stateContainerNode&&this._params.stateContainerId&&this._params.stateContainerXpath&&this._params.context},
_getStateContainerNode:function(){var c,e=this._params.context;if(!e)return c;var f=e.getDocument();if(!f)return c;var d=this._params.stateContainerXpath;c=f.getElementById(this._params.stateContainerId);c||(e=e.model.evaluate(d))&&(c=f.getElementById(e.getAttribute("id")));return c},execute:function(){if(this._validParams()){var c=this._params.action,e=this._params.state,f=this._getStateContainerNode();f&&("add"==c?(m.add(f,e),this._setStateAndFocus(f)):"remove"==c?(this._stateIndex=f._maqAppStates&&
f._maqAppStates.states&&f._maqAppStates.states.indexOf(e),this._preservedNodesId=[],this._preservedNodesXpath=[],this._preservedStateValues=[],this._preserveStateFromNodeRecursive(f,e),m.remove(f,e),this._setStateAndFocus(f)):"modify"==c?(this._params.newState&&(this._traverseRenameState(this._params.state,this._params.newState),h.publish("/davinci/states/state/renamed",{node:f,oldName:this._params.state,newName:this._params.newState,stateContainerNode:f})),"string"==typeof this._params.initialState&&
(this._oldInitialState=m.getInitial(f),c="undefined"==this._params.initialState?void 0:this._params.initialState,this._params.newState&&c==this._params.state&&(c=this._params.newState),m.setState(c,f,{initial:c,updateWhenCurrent:!0})),this._setStateAndFocus(f)):"reorder"==c&&f&&f._maqAppStates&&f._dvWidget&&(f._maqAppStates.states=this._params.newStatesList,c=m.stringifyWithQuotes(f._maqAppStates),f.setAttribute(m.APPSTATES_ATTRIBUTE,c),srcElement=f._dvWidget._srcElement,srcElement.setAttribute(m.APPSTATES_ATTRIBUTE,
c),h.publish("/davinci/states/statesReordered",[f,this._params.newStatesList])))}},undo:function(){if(this._validParams()){var c=this._params.action,e=this._params.state,f=this._getStateContainerNode();f&&("add"==c?(m.remove(f,e),this._setStateAndFocus(f)):"remove"==c?(m.add(f,e,{index:this._stateIndex}),this._restoreState(e),m.setState(e,f,{focus:!0}),this._setStateAndFocus(f)):"modify"==c?("string"==typeof this._params.initialState&&m.setState(this._oldInitialState,f,{initial:this._oldInitialState,
updateWhenCurrent:!0}),this._params.newState&&this._traverseRenameState(this._params.newState,this._params.state),this._setStateAndFocus(f)):"reorder"==c&&f&&f._maqAppStates&&f._dvWidget&&(f._maqAppStates.states=this._oldStatesList,c=m.stringifyWithQuotes(f._maqAppStates),f.setAttribute(m.APPSTATES_ATTRIBUTE,c),srcElement=f._dvWidget._srcElement,srcElement.setAttribute(m.APPSTATES_ATTRIBUTE,c),h.publish("/davinci/states/statesReordered",[f,this._params.newStatesList])))}},_setStateAndFocus:function(c){var e=
m.getState(c);m.setState(e,c,{focus:e,updateWhenCurrent:!0})},_preserveStateFromNodeRecursive:function(c,e){var f=c._dvWidget;if(c&&f&&e)for(this._preserveStateFromNode(c,e),c=f.getChildren(),f=0;f<c.length;f++)this._preserveStateFromNodeRecursive(c[f].domNode,e)},_preserveStateFromNode:function(c,k){c&&c._maqDeltas&&c._maqDeltas[k]&&c._dvWidget&&c._dvWidget._srcElement&&(this._preservedNodesId.push(c.id),this._preservedNodesXpath.push(g.getXPath(c._dvWidget._srcElement,e)),this._preservedStateValues.push(n.clone(c._maqDeltas[k])))},
_restoreState:function(c){var e=this._params.context;if(e&&this._preservedNodesId){var f=e.getDocument();if(f)for(var d=0;d<this._preservedNodesId.length;d++){var b=this._preservedNodesXpath[d],a=f.getElementById(this._preservedNodesId[d]);a||(b=e.model.evaluate(b))&&(a=f.getElementById(b.getAttribute("id")));a&&(a._maqDeltas||(a._maqDeltas={}),a._maqDeltas[c]=n.clone(this._preservedStateValues[d]),m._updateSrcState(a))}}},_traverseRenameState:function(c,e){var f=this._getStateContainerNode();if(f&&
(m.rename(f,{oldName:c,newName:e}),f=f._dvWidget&&f._dvWidget._srcElement)){var d=null,b=!1,a=/^(.*davinci.states.setState\s*\(\s*)('[^']*'|"[^"]*")([^\)]*\).*)$/,p=/^(['"])(.*)(['"])$/;f.visit({visit:dojo.hitch(this,function(f){if("HTMLElement"==f.elementType)d=f;else if("HTMLAttribute"==f.elementType){var k=f.name;if(k&&"on"==k.substr(0,2).toLowerCase()&&(f=f.value.match(a))){var g=f[2].match(p);g&&g[2]==c&&(d.setAttribute(k,f[1]+g[1]+e+g[3]+f[3]),b=!0)}}})});b&&(f=this._params&&this._params.context&&
this._params.context.editor)&&f._visualChanged()}}})})},"davinci/html/HtmlFileXPathAdapter":function(){define(function(){function q(n){this.elem=n}q.prototype={name:function(){return this.elem.tag},parent:function(){var n=this.elem.parent;if("HTMLFile"!==n.elementType)return new q(n)},index:function(){var n=this.elem.tag,h=this.elem.parent.children,g=0;if(1===h.length)return 0;h=h.filter(function(e){return e.tag===n});1<h.length&&h.some(function(e,m){if(e===this.elem)return g=m+1,!0},this);return g}};
return q})},"dojo/data/ItemFileWriteStore":function(){define("../_base/lang ../_base/declare ../_base/array ../_base/json ../_base/kernel ./ItemFileReadStore ../date/stamp".split(" "),function(q,n,h,g,e,m,c){return n("dojo.data.ItemFileWriteStore",m,{constructor:function(e){this._features["dojo.data.api.Write"]=!0;this._features["dojo.data.api.Notification"]=!0;this._pending={_newItems:{},_modifiedItems:{},_deletedItems:{}};this._datatypeMap.Date.serialize||(this._datatypeMap.Date.serialize=function(f){return c.toISOString(f,
{zulu:!0})});e&&!1===e.referenceIntegrity&&(this.referenceIntegrity=!1);this._saveInProgress=!1},referenceIntegrity:!0,_assert:function(c){if(!c)throw Error("assertion failed in ItemFileWriteStore");},_getIdentifierAttribute:function(){return this.getFeatures()["dojo.data.api.Identity"]},newItem:function(c,f){this._assert(!this._saveInProgress);this._loadFinished||this._forceLoad();if("object"!=typeof c&&"undefined"!=typeof c)throw Error("newItem() was passed something other than an object");var d=
null,b=this._getIdentifierAttribute();if(b===Number)d=this._arrayOfAllItems.length;else{d=c[b];if("undefined"===typeof d)throw Error("newItem() was not passed an identity for the new item");if(q.isArray(d))throw Error("newItem() was not passed an single-valued identity");}this._itemsByIdentity&&this._assert("undefined"===typeof this._itemsByIdentity[d]);this._assert("undefined"===typeof this._pending._newItems[d]);this._assert("undefined"===typeof this._pending._deletedItems[d]);var a={};a[this._storeRefPropName]=
this;a[this._itemNumPropName]=this._arrayOfAllItems.length;this._itemsByIdentity&&(this._itemsByIdentity[d]=a,a[b]=[d]);this._arrayOfAllItems.push(a);b=null;if(f&&f.parent&&f.attribute){var b={item:f.parent,attribute:f.attribute,oldValue:void 0},e=this.getValues(f.parent,f.attribute);if(e&&0<e.length){var k=e.slice(0,e.length);b.oldValue=1===e.length?e[0]:e.slice(0,e.length);k.push(a);this._setValueOrValues(f.parent,f.attribute,k,!1);b.newValue=this.getValues(f.parent,f.attribute)}else this._setValueOrValues(f.parent,
f.attribute,a,!1),b.newValue=a}else a[this._rootItemPropName]=!0,this._arrayOfTopLevelItems.push(a);this._pending._newItems[d]=a;for(var g in c){if(g===this._storeRefPropName||g===this._itemNumPropName)throw Error("encountered bug in ItemFileWriteStore.newItem");f=c[g];q.isArray(f)||(f=[f]);a[g]=f;if(this.referenceIntegrity)for(d=0;d<f.length;d++)e=f[d],this.isItem(e)&&this._addReferenceToMap(e,a,g)}this.onNew(a,b);return a},_removeArrayElement:function(c,f){f=h.indexOf(c,f);return-1!=f?(c.splice(f,
1),!0):!1},deleteItem:function(c){this._assert(!this._saveInProgress);this._assertIsItem(c);var f=c[this._itemNumPropName],d=this.getIdentity(c);if(this.referenceIntegrity){var b=this.getAttributes(c);c[this._reverseRefMap]&&(c["backup_"+this._reverseRefMap]=q.clone(c[this._reverseRefMap]));h.forEach(b,function(a){h.forEach(this.getValues(c,a),function(b){this.isItem(b)&&(c["backupRefs_"+this._reverseRefMap]||(c["backupRefs_"+this._reverseRefMap]=[]),c["backupRefs_"+this._reverseRefMap].push({id:this.getIdentity(b),
attr:a}),this._removeReferenceFromMap(b,c,a))},this)},this);if(b=c[this._reverseRefMap])for(var a in b){var e=null;if(e=this._itemsByIdentity?this._itemsByIdentity[a]:this._arrayOfAllItems[a])for(var k in b[a]){var g=this.getValues(e,k)||[],m=h.filter(g,function(a){return!(this.isItem(a)&&this.getIdentity(a)==d)},this);this._removeReferenceFromMap(c,e,k);m.length<g.length&&this._setValueOrValues(e,k,m,!0)}}}this._arrayOfAllItems[f]=null;c[this._storeRefPropName]=null;this._itemsByIdentity&&delete this._itemsByIdentity[d];
this._pending._deletedItems[d]=c;c[this._rootItemPropName]&&this._removeArrayElement(this._arrayOfTopLevelItems,c);this.onDelete(c);return!0},setValue:function(c,f,d){return this._setValueOrValues(c,f,d,!0)},setValues:function(c,f,d){return this._setValueOrValues(c,f,d,!0)},unsetAttribute:function(c,f){return this._setValueOrValues(c,f,[],!0)},_setValueOrValues:function(c,f,d,b){this._assert(!this._saveInProgress);this._assertIsItem(c);this._assert(q.isString(f));this._assert("undefined"!==typeof d);
var a=this._getIdentifierAttribute();if(f==a)throw Error("ItemFileWriteStore does not have support for changing the value of an item's identifier.");var a=this._getValueOrValues(c,f),e=this.getIdentity(c);if(!this._pending._modifiedItems[e]){var k={},g;for(g in c)k[g]=g===this._storeRefPropName||g===this._itemNumPropName||g===this._rootItemPropName?c[g]:g===this._reverseRefMap?q.clone(c[g]):c[g].slice(0,c[g].length);this._pending._modifiedItems[e]=k}e=!1;if(q.isArray(d)&&0===d.length){if(e=delete c[f],
d=void 0,this.referenceIntegrity&&a){g=a;q.isArray(g)||(g=[g]);for(var m=0;m<g.length;m++)k=g[m],this.isItem(k)&&this._removeReferenceFromMap(k,c,f)}}else{e=q.isArray(d)?d.slice(0,d.length):[d];if(this.referenceIntegrity)if(a){g=a;q.isArray(g)||(g=[g]);var n={};h.forEach(g,function(a){this.isItem(a)&&(a=this.getIdentity(a),n[a.toString()]=!0)},this);h.forEach(e,function(a){if(this.isItem(a)){var b=this.getIdentity(a);n[b.toString()]?delete n[b.toString()]:this._addReferenceToMap(a,c,f)}},this);for(m in n)this._removeReferenceFromMap(this._itemsByIdentity?
this._itemsByIdentity[m]:this._arrayOfAllItems[m],c,f)}else for(m=0;m<e.length;m++)k=e[m],this.isItem(k)&&this._addReferenceToMap(k,c,f);c[f]=e;e=!0}if(b)this.onSet(c,f,a,d);return e},_addReferenceToMap:function(c,f,d){f=this.getIdentity(f);var b=c[this._reverseRefMap];b||(b=c[this._reverseRefMap]={});(c=b[f])||(c=b[f]={});c[d]=!0},_removeReferenceFromMap:function(c,f,d){f=this.getIdentity(f);var b=c[this._reverseRefMap],a;if(b){for(a in b)a==f&&(delete b[a][d],this._isEmpty(b[a])&&delete b[a]);this._isEmpty(b)&&
delete c[this._reverseRefMap]}},_dumpReferenceMap:function(){var c;for(c=0;c<this._arrayOfAllItems.length;c++);},_getValueOrValues:function(c,f){var d=void 0;this.hasAttribute(c,f)&&(c=this.getValues(c,f),d=1==c.length?c[0]:c);return d},_flatten:function(c){if(this.isItem(c))return{_reference:this.getIdentity(c)};if("object"===typeof c)for(var f in this._datatypeMap){var d=this._datatypeMap[f];if(q.isObject(d)&&!q.isFunction(d)){if(c instanceof d.type){if(!d.serialize)throw Error("ItemFileWriteStore:  No serializer defined for type mapping: ["+
f+"]");return{_type:f,_value:d.serialize(c)}}}else if(c instanceof d)return{_type:f,_value:c.toString()}}return c},_getNewFileContentString:function(){var c={},f=this._getIdentifierAttribute();f!==Number&&(c.identifier=f);this._labelAttr&&(c.label=this._labelAttr);c.items=[];for(f=0;f<this._arrayOfAllItems.length;++f){var d=this._arrayOfAllItems[f];if(null!==d){var b={},a;for(a in d)if(a!==this._storeRefPropName&&a!==this._itemNumPropName&&a!==this._reverseRefMap&&a!==this._rootItemPropName){var e=
this.getValues(d,a);if(1==e.length)b[a]=this._flatten(e[0]);else for(var m=[],h=0;h<e.length;++h)m.push(this._flatten(e[h])),b[a]=m}c.items.push(b)}}return g.toJson(c,!0)},_isEmpty:function(c){var f=!0;if(q.isObject(c))for(var d in c){f=!1;break}else q.isArray(c)&&0<c.length&&(f=!1);return f},save:function(c){this._assert(!this._saveInProgress);this._saveInProgress=!0;var f=this,d=function(){f._pending={_newItems:{},_modifiedItems:{},_deletedItems:{}};f._saveInProgress=!1;c&&c.onComplete&&c.onComplete.call(c.scope||
e.global)},b=function(a){f._saveInProgress=!1;c&&c.onError&&c.onError.call(c.scope||e.global,a)};if(this._saveEverything){var a=this._getNewFileContentString();this._saveEverything(d,b,a)}this._saveCustom&&this._saveCustom(d,b);this._saveEverything||this._saveCustom||d()},revert:function(){this._assert(!this._saveInProgress);for(var c in this._pending._modifiedItems){var f=this._pending._modifiedItems[c],d=null,d=this._itemsByIdentity?this._itemsByIdentity[c]:this._arrayOfAllItems[c];f[this._storeRefPropName]=
this;for(var b in d)delete d[b];q.mixin(d,f)}var a;for(c in this._pending._deletedItems)a=this._pending._deletedItems[c],a[this._storeRefPropName]=this,f=a[this._itemNumPropName],a["backup_"+this._reverseRefMap]&&(a[this._reverseRefMap]=a["backup_"+this._reverseRefMap],delete a["backup_"+this._reverseRefMap]),this._arrayOfAllItems[f]=a,this._itemsByIdentity&&(this._itemsByIdentity[c]=a),a[this._rootItemPropName]&&this._arrayOfTopLevelItems.push(a);for(c in this._pending._deletedItems)a=this._pending._deletedItems[c],
a["backupRefs_"+this._reverseRefMap]&&(h.forEach(a["backupRefs_"+this._reverseRefMap],function(b){this._addReferenceToMap(this._itemsByIdentity?this._itemsByIdentity[b.id]:this._arrayOfAllItems[b.id],a,b.attr)},this),delete a["backupRefs_"+this._reverseRefMap]);for(c in this._pending._newItems)f=this._pending._newItems[c],f[this._storeRefPropName]=null,this._arrayOfAllItems[f[this._itemNumPropName]]=null,f[this._rootItemPropName]&&this._removeArrayElement(this._arrayOfTopLevelItems,f),this._itemsByIdentity&&
delete this._itemsByIdentity[c];this._pending={_newItems:{},_modifiedItems:{},_deletedItems:{}};return!0},isDirty:function(c){return c?(c=this.getIdentity(c),(new Boolean(this._pending._newItems[c]||this._pending._modifiedItems[c]||this._pending._deletedItems[c])).valueOf()):!this._isEmpty(this._pending._newItems)||!this._isEmpty(this._pending._modifiedItems)||!this._isEmpty(this._pending._deletedItems)},onSet:function(c,f,d,b){},onNew:function(c,f){},onDelete:function(c){},close:function(c){if(this.clearOnClose){if(this.isDirty())throw Error("dojo.data.ItemFileWriteStore: There are unsaved changes present in the store.  Please save or revert the changes before invoking close.");
this.inherited(arguments)}}})})},"davinci/ve/views/SwitchingStyleView":function(){define("dojo/_base/declare dojo/_base/kernel davinci/lang/ve dijit/lang/_common xide/utils dijit/layout/ContentPane davinci/Runtime davinci/workbench/WidgetLite davinci/ve/widgets/HTMLStringUtil davinci/ve/widgets/WidgetToolBar davinci/ve/widgets/Cascade davinci/ve/widgets/CommonProperties davinci/ve/widgets/WidgetProperties davinci/ve/widgets/EventSelection xide/registry".split(" "),function(q,n,h,g,e,m,c,k,f,d,b,a,
p,r,v){return q("davinci.ve.views.SwitchingStyleView",[k],{_editor:null,_widget:null,_subWidget:null,_titleBarDiv:"\x3cdiv class\x3d'palette_titleBarDiv'\x3e\x3cspan class\x3d'paletteCloseBox'\x3e\x3c/span\x3e\x3cspan class\x3d'titleBarDivTitle'\x3e\x3c/span\x3e\x3c/div\x3e",constructor:function(a,b){},pageTemplate:[{key:"widgetSpecific",className:"maqPropertySection page_editor_only",addCommonPropertiesAtTop:!1,html:"\x3cdiv dojoType\x3d'davinci.ve.widgets.WidgetProperties'\x3e\x3c/div\x3e"},{key:"events",
className:"maqPropertySection page_editor_only",addCommonPropertiesAtTop:!1,pageTemplate:{html:"\x3cdiv dojoType\x3d'davinci.ve.widgets.EventSelection'\x3e\x3c/div\x3e"}},{key:"layout",className:"maqPropertySection",addCommonPropertiesAtTop:!0,pageTemplate:[{display:"width",type:"multi",target:["width"],values:["","auto","100%","200px","10em"]},{display:"height",type:"multi",target:["height"],values:["","auto","100%","200px","10em"]},{html:"\x26nbsp;"},{key:"showMinMax",display:"\x26nbsp;\x26nbsp;\x26nbsp;",
type:"toggleSection",pageTemplate:[{display:"min-height",type:"multi",target:["min-height"],rowClass:"propertiesSectionHidden"},{display:"max-height",type:"multi",target:["max-height"],rowClass:"propertiesSectionHidden"},{display:"min-width",type:"multi",target:["min-width"],rowClass:"propertiesSectionHidden"},{display:"max-width",type:"multi",target:["max-width"],rowClass:"propertiesSectionHidden"},{html:"\x26nbsp;",rowClass:"propertiesSectionHidden"}]},{display:"position",type:"combo",target:["position"],
values:["","absolute","relative"]},{display:"left",type:"multi",target:["left"],values:["","0px","1em"]},{display:"top",type:"multi",target:["top"],values:["","0px","1em"]},{display:"right",type:"multi",target:["right"],values:["","0px","1em"]},{display:"bottom",type:"multi",target:["bottom"],values:["","0px","1em"]},{display:"display",type:"combo",target:["display"],values:["","none","block","inline","inline-block"]},{display:"opacity",type:"multi",target:["opacity"],values:["0","0.5","1.0"]},{display:"box-shadow",
type:"text",target:["box-shadow"],value:["","none","1px 1px rgba(0,0,0,.5)"]},{display:"float",type:"combo",target:["float"],values:["","none","left","right"]},{display:"clear",type:"combo",target:["clear"],values:["","none","left","right","both"]},{display:"overflow",type:"combo",target:["overflow"],values:["","visible","hidden","scroll","auto"]},{display:"z-index",type:"multi",target:["z-index"],values:" auto 0 1 100 -1 -100".split(" ")},{display:"box-sizing",type:"combo",target:["box-sizing","-webkit-box-sizing",
"-ms-box-sizing","-moz-box-sizing"],values:["","content-box","border-box"]}]},{key:"padding",className:"maqPropertySection",addCommonPropertiesAtTop:!0,pageTemplate:[{display:"\x3cb\x3e(padding)\x3c/b\x3e",type:"multi",target:["padding"],values:["","0px","1em"]},{key:"showtrbl",display:"\x26nbsp;\x26nbsp;\x26nbsp;",type:"toggleSection",pageTemplate:[{display:"padding-top",type:"multi",target:["padding-top"],values:["","0px","1em"],rowClass:"propertiesSectionHidden"},{display:"padding-right",type:"multi",
target:["padding-right"],values:["","0px","1em"],rowClass:"propertiesSectionHidden"},{display:"padding-bottom",type:"multi",target:["padding-bottom"],values:["","0px","1em"],rowClass:"propertiesSectionHidden"},{display:"padding-left",type:"multi",target:["padding-left"],values:["","0px","1em"],rowClass:"propertiesSectionHidden"}]}]},{key:"margins",className:"maqPropertySection",addCommonPropertiesAtTop:!0,pageTemplate:[{display:"\x3cb\x3e(margin)\x3c/b\x3e",type:"multi",target:["margin"],values:["",
"0px","1em"]},{key:"showtrbl",display:"\x26nbsp;\x26nbsp;\x26nbsp;",type:"toggleSection",pageTemplate:[{display:"margin-top",type:"multi",target:["margin-top"],values:["","0px","1em"],rowClass:"propertiesSectionHidden"},{display:"margin-right",type:"multi",target:["margin-right"],values:["","0px","1em"],rowClass:"propertiesSectionHidden"},{display:"margin-bottom",type:"multi",target:["margin-bottom"],values:["","0px","1em"],rowClass:"propertiesSectionHidden"},{display:"margin-left",type:"multi",target:["margin-left"],
values:["","0px","1em"],rowClass:"propertiesSectionHidden"}]}]},{key:"background",className:"maqPropertySection",addCommonPropertiesAtTop:!0,pageTemplate:[{display:"background-color",type:"background",target:["background-color"],colorswatch:!0},{display:"background-image",type:"background",target:["background-image"],values:["","none"]},{display:"background-repeat",type:"background",values:["","repeat","repeat-x","repeat-y","no-repeat"],target:["background-repeat"]},{display:"background-position",
type:"background",target:["background-position"],values:";0px 0px;0% 0%;left top;center center;right bottom".split(";")},{display:"background-size",type:"background",target:["background-size"],values:["","auto","contain","cover","100%"]},{display:"background-origin",type:"background",target:["background-origin"],values:["","border-box","padding-box","content-box"]},{display:"background-clip",type:"background",target:["background-clip"],values:["","border-box","padding-box","content-box"]}]},{key:"border",
className:"maqPropertySection",addCommonPropertiesAtTop:!0,pageTemplate:[{display:"\x3cb\x3e(border)\x3c/b\x3e",type:"multi",target:["border"],values:["","none","1px solid black"]},{display:"show",type:"combo",values:["none","props","sides","all"],id:"properties_show_select",onchange:function(a){if("number"==typeof a){var b=function(a,b,d,f,c){for(;b<=d;b++){var e=n.byId(a[b].rowId);b>=f&&b<=c?n.removeClass(e,"propertiesSectionHidden"):n.addClass(e,"propertiesSectionHidden")}};if(this.pageTemplate){a=
this.pageTemplate[a];var d;a&&a.id&&(a=n.byId(a.id))&&(d=a.value);n.isString(d)&&("none"===d?b(this.pageTemplate,2,20,-1,-1):"sides"===d?b(this.pageTemplate,2,20,2,5):"props"===d?b(this.pageTemplate,2,20,6,8):"all"===d&&b(this.pageTemplate,2,20,9,20))}}}},{display:"border-top",type:"multi",target:["border-top"],values:["","none","1px solid black"],rowClass:"propertiesSectionHidden"},{display:"border-right",type:"multi",target:["border-right"],values:["","none","1px solid black"],rowClass:"propertiesSectionHidden"},
{display:"border-bottom",type:"multi",target:["border-bottom"],values:["","none","1px solid black"],rowClass:"propertiesSectionHidden"},{display:"border-left",type:"multi",target:["border-left"],values:["","none","1px solid black"],rowClass:"propertiesSectionHidden"},{display:"border-width",type:"multi",target:["border-width"],values:["","1px","1em"],rowClass:"propertiesSectionHidden"},{display:"border-style",type:"multi",target:["border-style"],values:["","none","solid","dotted","dashed"],rowClass:"propertiesSectionHidden"},
{display:"border-color",type:"color",target:["border-color"],rowClass:"propertiesSectionHidden"},{display:"border-top-width",type:"multi",target:["border-top-width"],values:["","1px","1em"],rowClass:"propertiesSectionHidden"},{display:"border-top-style",type:"multi",target:["border-top-style"],values:["","none","solid","dotted","dashed"],rowClass:"propertiesSectionHidden"},{display:"border-top-color",type:"color",target:["border-top-color"],rowClass:"propertiesSectionHidden"},{display:"border-right-width",
type:"multi",target:["border-right-width"],values:["","1px","1em"],rowClass:"propertiesSectionHidden"},{display:"border-right-style",type:"multi",target:["border-right-style"],values:["","none","solid","dotted","dashed"],rowClass:"propertiesSectionHidden"},{display:"border-right-color",type:"color",target:["border-right-color"],rowClass:"propertiesSectionHidden"},{display:"border-bottom-width",type:"multi",target:["border-bottom-width"],values:["","1px","1em"],rowClass:"propertiesSectionHidden"},
{display:"border-bottom-style",type:"multi",target:["border-bottom-style"],values:["","none","solid","dotted","dashed"],rowClass:"propertiesSectionHidden"},{display:"border-bottom-color",type:"color",target:["border-bottom-color"],rowClass:"propertiesSectionHidden"},{display:"border-left-width",type:"multi",target:["border-left-width"],values:["","1px","1em"],rowClass:"propertiesSectionHidden"},{display:"border-left-style",type:"multi",target:["border-left-style"],values:["","none","solid","dotted",
"dashed"],rowClass:"propertiesSectionHidden"},{display:"border-left-color",type:"color",target:["border-left-color"],rowClass:"propertiesSectionHidden"},{display:"border-collapse",type:"combo",target:["border-collapse"],values:["","separate","collapse"]},{display:"\x3cb\x3e(border-radius)\x3c/b\x3e",type:"multi",target:["border-radius","-moz-border-radius"],values:["","0px","6px"]},{key:"showDetails",display:"",type:"toggleSection",pageTemplate:[{display:"border-top-left-radius",type:"multi",target:["border-top-left-radius",
"-moz-border-radius-topleft"],values:["","0px","6px"],rowClass:"propertiesSectionHidden"},{display:"border-top-right-radius",type:"multi",target:["border-top-right-radius","-moz-border-radius-topright"],values:["","0px","6px"],rowClass:"propertiesSectionHidden"},{display:"border-bottom-right-radius",type:"multi",target:["border-bottom-right-radius","-moz-border-radius-bottomright"],values:["","0px","6px"],rowClass:"propertiesSectionHidden"},{display:"border-bottom-left-radius",type:"multi",target:["border-bottom-left-radius",
"-moz-border-radius-bottomleft"],values:["","0px","6px"],rowClass:"propertiesSectionHidden"}]}]},{key:"fontsAndText",className:"maqPropertySection",addCommonPropertiesAtTop:!0,pageTemplate:[{display:"font",type:"text",target:["font"]},{display:"font-family",type:"font",target:["font-family"]},{display:"size",type:"multi",target:["font-size"],values:["","100%","1em","10px","10pt"]},{display:"color",type:"color",target:["color"]},{display:"font-weight",type:"combo",target:["font-weight"],values:["",
"normal","bold"]},{display:"font-style",type:"combo",target:["font-style"],values:["","normal","italic"]},{display:"text-decoration",type:"combo",target:["text-decoration"],values:["","none","underline","line-through"]},{display:"text-align",type:"combo",target:["text-align"],values:["","left","center","right","justify"]},{display:"vertical-align",type:"combo",target:["vertical-align"],values:["","baseline","top","middle","bottom"]},{display:"white-space",type:"combo",target:["white-space"],values:" normal nowrap pre pre-line pre-wrap".split(" ")},
{display:"text-indent",type:"multi",target:["text-indent"],values:["","0","1em","10px"]},{display:"line-height",type:"multi",target:["line-height"],values:["","normal","1.2","120%"]}]}],buildRendering:function(){this.domNode=n.doc.createElement("div");n.addClass(this.domNode,"propertiesContent");var a;a=""+this._titleBarDiv;for(var b=0;b<this.pageTemplate.length;b++)if(this.pageTemplate[b].title=h[this.pageTemplate[b].key]?h[this.pageTemplate[b].key]:"Key not found",this.pageTemplate[b].pageTemplate)for(var d=
0;d<this.pageTemplate[b].pageTemplate.length;d++)this.pageTemplate[b].pageTemplate[d].key&&(this.pageTemplate[b].pageTemplate[d].display+=h[this.pageTemplate[b].pageTemplate[d].key]?h[this.pageTemplate[b].pageTemplate[d].key]:"Key not found");this.domNode.innerHTML=a+"\x3cdiv class\x3d'propertiesToolBar' dojoType\x3d'davinci.ve.widgets.WidgetToolBar'\x3e\x3c/div\x3e\x3cdiv dojoType\x3d'davinci.ve.widgets.WidgetProperties'\x3e\x3c/div\x3e\x3cdiv class\x3d'propScrollableArea'\x3e\x3ctable class\x3d'propRootDetailsContainer'\x3e\x3ctr\x3e\x3ctd class\x3d'propPaletteRoot'\x3e";
this.inherited(arguments)},_widgetValuesChanged:function(a){var b=this._currentPropSection;if(b){for(var d=!1,f=0;f<this.pageTemplate.length;f++)if(this.pageTemplate[f].key==b){d=!0;break}if(d)for(b=this._getVisibleCascade(f),d=0;d<b.length;d++)b[d]._widgetValuesChanged(a)}},_getVisibleCascade:function(a){if(a)return this.pageTemplate[a].cascade;a=[];var b=this._currentPropSection;if(b)for(var d=0;d<this.pageTemplate.length;d++)if(this.pageTemplate[d].key==b){a=a.concat(this.pageTemplate[d].cascade);
break}return a},_updatePaletteValues:function(a){if(this._editor){var b=a[0];this._subwidget=(this._widget=b)&&b.subwidget;this.setReadOnly(!(this._widget||this._subwidget));for(var b=this._getVisibleCascade(),d=0;d<b.length;d++)b[d]._widgetSelectionChanged(a)}},_widgetSelectionChanged:function(a){!0!==a.isFake&&this._updatePaletteValues(a.selection)},_stateChanged:function(){this._updatePaletteValues(this._widget?[this._widget]:[])},_widgetPropertiesChanged:function(a){this._widget&&this._widget.type!==
a[0].type||this._updatePaletteValues(a)},_titlePaneOpen:function(a){a=this._getVisibleCascade(a);for(var b=0;b<a.length;b++)a[b]._editorSelected({editor:this._editor})},startup:function(){this.domNode.style.height="100%";this._editor=c.currentEditor;this.inherited(arguments);for(var a=0;a<this.pageTemplate.length;a++){var b=this.pageTemplate[a];if(b.pageTemplate)for(var d=0;d<b.pageTemplate.length;d++){var f=b.pageTemplate[d];f.onchange&&f.id&&n.connect(n.byId(f.id),"onchange",n.hitch(b,f.onchange,
d))}}for(a=0;a<this.pageTemplate.length;a++)this.pageTemplate[a].cascade=[];try{this.setReadOnly(!0)}catch(u){logError(u,"set read only crashed ! "+u)}this.onEditorSelected();this.subscribe("/davinci/ui/widgetValuesChanged",n.hitch(this,this._widgetValuesChanged));this.subscribe("/davinci/ui/widgetPropertiesChanged",n.hitch(this,this._widgetPropertiesChanged));this.subscribe("/davinci/ui/editorSelected",n.hitch(this,this._editorSelected));this.subscribe("/davinci/ui/widgetSelected",n.hitch(this,this._widgetSelectionChanged));
this.subscribe("/davinci/states/state/changed",n.hitch(this,this._stateChanged));this.subscribe("/maqetta/appstates/state/changed",n.hitch(this,this._stateChanged));this.subscribe("/davinci/ui/initialPerspectiveReady",n.hitch(this,this._initialPerspectiveReady));this.subscribe("/davinci/workbench/ready",n.hitch(this,this._workbenchReady))},setReadOnly:function(a){for(var b=0;b<this.pageTemplate.length;b++){var d=this.pageTemplate[b].pageTemplate;if(d)for(var f=0;f<d.length;f++){var c=d[f].widget;
c?c.set("readOnly",a):(c=d[f].domNode)&&n.attr(c,"disabled",a)}}},_modelEntryById:function(a){for(var b=0;b<this.pageTemplate.length;b++){var d=this.pageTemplate[b].pageTemplate;if(d)for(var f=0;f<d.length;f++)if(a==d[f].id)return d[f]}},_editorSelected:function(a){this._editor=a.editor;this.onEditorSelected(this._editor);a=this.tabContainer;this.getParent();var b=a.selectedChildWidget||a.getSelected(),d=!1,f=n.query(".maqPropertySection",a.domNode);this._editor?"davinci.ve.PageEditor"!=this._editor.declaredClass&&
"davinci.ve.themeEditor.ThemeEditor"!=this._editor.declaredClass?f.forEach(function(a){dijit.byNode(a)==b&&(d=!0)}):(f.forEach(function(a){}),"davinci.ve.themeEditor.ThemeEditor"==this._editor.declaredClass&&n.query(".page_editor_only",a.domNode).forEach(function(a){dijit.byNode(a)==b&&(d=!0)})):(f.forEach(function(a){dijit.byNode(a)}),d=!0);d&&this._selectFirstVisibleTab()},onEditorSelected:function(){this._subWidget=this._widget=null;if(this._oldClassName)if(this.domNode)n.removeClass(this.domNode.parentNode.parentNode,
this._oldClassName);else{console.error("have no dom node ! : "+this.id);return}if(this._editor)if(this._editor&&this._editor.editorID&&(this._oldClassName=this._editor.editorID.replace(/\./g,"_"),this.domNode?n.addClass(this.domNode.parentNode.parentNode,this._oldClassName):console.error("have no dom node !")),this.domNode){for(var a=this._currentPropSection,b=n.query(".propSectionButton",this.domNode),d=0;d<b.length;d++){var c=b[d];this._editor&&this._editor.supports&&this._editor.supports("propsect_"+
this.pageTemplate[d].key)?n.removeClass(c,"dijitHidden"):(n.addClass(c,"dijitHidden"),a==this.pageTemplate[d].key&&f.showRoot())}a=[];for(d=0;d<this.pageTemplate.length;d++)(b=this.pageTemplate[d].cascade)&&(a=a.concat(b));for(d=0;d<a.length;d++)b=a[d],b._editorSelected&&b._editorSelected({editor:this._editor})}else console.error("have no dom node !")},_destroyContent:function(){var a=this.containerNode||this.domNode;for(n.forEach(n.query("[widgetId]",a).map(dijit.byNode),function(a){a.destroy()});a.firstChild;)n._destroyElement(a.firstChild);
n.forEach(this._tooltips,function(a){a.destroy()});this._tooltips=void 0;this._destroyHandles()},sectionTitleFromKey:function(a){for(var b=0;b<this.pageTemplate.length;b++)if(this.pageTemplate[b].key==a)return this.pageTemplate[b].title},_initialPerspectiveReady:function(){var a=null;if(!this._alreadySplitIntoMultipleTabs){var b=this.tabContainer;n.addClass(b.domNode,"propRootDetailsContainer");n.addClass(b.domNode,"propertiesContent");for(var d=0;d<this.pageTemplate.length;d++){var a=this.pageTemplate[d].key,
c=this.pageTemplate[d].title,p=this.pageTemplate[d].className;p||(p="");var g=this._titleBarDiv,g=g+"\x3cdiv class\x3d'propertiesToolBar' dojoType\x3d'davinci.ve.widgets.WidgetToolBar'\x3e\x3c/div\x3e",g=g+("\x3cdiv class\x3d'cascadeBackButtonDiv'\x3e\x3cbutton class\x3d'btn-info' onclick\x3d'davinci.ve.widgets.HTMLStringUtil.showSection(\""+a+'","'+c+"\")'\x3e"+c+" "+h.properties+"\x3c/button\x3e\x3c/div\x3e"),a=f.generateTemplate(this.pageTemplate[d]),a=g+a;0==d?(a=this,a.set("title",c),n.addClass(a.domNode,
p)):(g=b.createTab(c,null,null,null,{"class":p,delegate:this}),a=e.addWidget(m,{title:c,content:a,"class":p,delegate:this},null,g,!1),g.cp=a,g._maqPropGroup=this.pageTemplate[d].key,g.add(a,null,!1));a._maqPropGroup=this.pageTemplate[d].key;c=n.query(".paletteCloseBox",a.domNode);0<c.length&&n.connect(c[0],"click",this,function(a){davinci.Workbench.collapsePaletteContainer(a.currentTarget)})}for(c=0;c<this.pageTemplate.length;c++)if(this.pageTemplate[c].cascade=[],p=this.pageTemplate[c].pageTemplate){for(d=
0;d<p.length;d++)g=p[d].id,(a=dijit.byId(g))?p[d].widget=a:(a=n.byId(g))&&(p[d].domNode=a);n.query("#"+this.pageTemplate[c].id+" .CascadeTop").forEach(function(a){return function(b){b=dijit.byId(b.id);a.cascade.push(b)}}(this.pageTemplate[c]))}b._on("selectChild",function(a){a._maqPropGroup&&(this._currentPropSection=a._maqPropGroup,a=(a=this._editor&&this._editor.getContext?this._editor.getContext():null)&&a.getSelection?a.getSelection():[],this._updatePaletteValues(a),f._initSection(this._currentPropSection))}.bind(this));
this._alreadySplitIntoMultipleTabs=!0}},_workbenchReady:function(){this._updateToolBars()},_updateToolBars:function(){n.query(".propertiesToolBar").forEach(function(a){this._editor&&"davinci.ve.PageEditor"==this._editor.declaredClass?(n.removeClass(a,"dijitHidden"),a.style.display=""):n.addClass(a,"dijitHidden")}.bind(this))},_selectFirstVisibleTab:function(){var a=this.getParent();if(a&&a.getChildren)for(var b=a.getChildren(),d=0;d<b.length;d++){var f=b[d];if("none"!=f.controlButton.domNode.style.display){a._maqDontExpandCollapse=
!0;a.selectChild(f);delete a._maqDontExpandCollapse;break}}}})})},"davinci/workbench/WidgetLite":function(){define(["dojo/_base/declare","dijit/_WidgetBase","dojo/parser","xide/mixins/EventedMixin"],function(q,n,h,g){return q("davinci.workbench.WidgetLite",[n,g],{buildRendering:function(){this.inherited(arguments);/dojotype/i.test(this.domNode.innerHTML||"")&&(this._startupWidgets=dojo.parser.parse(this.domNode,{noStart:!this._earlyTemplatedStartup,inherited:{dir:this.dir,lang:this.lang}}))},_destroyContent:function(){var e=
this.containerNode||this.domNode;for(dojo.forEach(dojo.query("[widgetId]",e).map(dijit.byNode),function(e){e.destroy()});e.firstChild;)dojo._destroyElement(e.firstChild);dojo.forEach(this._tooltips,function(e){e.destroy()});delete this._tooltips;this._destroyHandles()},startup:function(){dojo.forEach(this._startupWidgets,function(e){e&&!e._started&&e.startup&&e.startup()});this.inherited(arguments)}})})},"davinci/ve/widgets/HTMLStringUtil":function(){define("davinci/Runtime ./FontDataStore ./FontComboBox ./MultiInputDropDown dijit/form/ComboBox ./MetaDataStore ./ColorPicker ./Background".split(" "),
function(q,n){var h=dojo.getObject("davinci.ve.widgets.HTMLStringUtil",!0);dojo.mixin(h,{__id:0,idPrefix:"davinci_ve_widgets_properties_generated",_currentPropSection:null,animSS:null,animRuleIndex:{},getCurrentPropSection:function(){return this._currentPropSection},getId:function(){return this.idPrefix+this.__id++},injectId:function(g,e){var m=g.indexOf("\x3e");return m?g.substring(0,m)+" id\x3d'"+e+"'"+g.substring(m,g.length):"\x3cspan id\x3d'"+e+"'\x3e"+g+"\x3c/span\x3e"},getEditor:function(g){function e(f){var d=
{};d.value="undefined"!=typeof f.value&&null!==f.value?f.value:f;d.title=f.title||d.value;return d}var m=g.type,c=this.getId();g.id=c;var k=g.disabled?" disabled\x3d'true' ":"";switch(m){case "multi":return m="",g.values&&(m="data\x3d'"+dojo.toJson(dojo.map(g.values,function(f){return{value:f}}))+"'"),"\x3cdiv dojoType\x3d'davinci.ve.widgets.MultiInputDropDown' "+m+"  class\x3d'propertyPaneEditablevalue' style\x3d'display:inline-block; width:100%;' id\x3d'"+c+"'"+k+"\x3e\x3c/div\x3e";case "boolean":return"\x3cinput type\x3d'checkbox' class\x3d'propertyPaneEditablevalue' style\x3d'display:inline-block;margin-left:5px' id\x3d'"+
c+"'\x3e\x3c/input\x3e";case "comboEdit":g=g.values;c="\x3cselect dojoType\x3d'dijit.form.ComboBox' autoComplete\x3d'false' style\x3d'display:inline-block; width:100%;' id\x3d'"+c+"'"+k+"\x3e";for(k=0;k<g.length;k++)m=e(g[k]),c+="\x3coption class\x3d'option' value\x3d'"+m.value+"'\x3e"+m.title+"\x3c/option\x3e";return c+"\x3c/select\x3e";case "combo":g=g.values;c="\x3cselect class\x3d'form-control input-transparent' style\x3d'display:inline-block; width:100%;' id\x3d'"+c+"'"+k+"\x3e";for(k=0;k<g.length;k++)m=
e(g[k]),c+="\x3coption class\x3d'option' value\x3d'"+m.value+"'\x3e"+m.title+"\x3c/option\x3e";return c+"\x3c/select\x3e";case "font":return c="\x3cdiv dojoType\x3d'davinci.ve.widgets.FontDataStore' jsId\x3d'"+c+"_fontStore'\x3e"+("\x3cdiv dojoType\x3d'davinci.ve.widgets.FontComboBox' value\x3d'"+n.fonts[0].value+"' store\x3d'"+c+"_fontStore'  id\x3d'"+c+"' class\x3d'propertyPaneEditablevalue' style\x3d'display:inline-block; width:100%;'\x3e\x3c/div\x3e");case "state":return"\x3cdiv dojoType\x3d'davinci.ve.widgets.MetaDataStore' jsId\x3d'davinci.properties.event"+
c+"_Store'\x3e"+("\x3cdiv dojoType\x3d'dijit.form.ComboBox' id\x3d'"+c+"'store\x3d'davinci.properties.event"+c+"_Store' class\x3d'propertyPaneEditablevalue' style\x3d'display:inline-block; width:100%;' autoComplete\x3d'false'\x3e\x3c/div\x3e");case "color":return"\x3cdiv class\x3d'propertyPaneEditablevalue' dojoType\x3d'davinci.ve.widgets.ColorPicker' id\x3d'"+c+"' \x3e\x3c/div\x3e";case "background":return m=dojo.isArray(g.values)?" data\x3d'"+dojo.toJson(g.values)+"'":"",k=dojo.isArray(g.target)?
g.target[0]:g.target,c="\x3cdiv dojoType\x3d'davinci.ve.widgets.Background' id\x3d'"+c+"'"+m+(" propname\x3d'"+k+"'")+(g.colorswatch?" colorswatch\x3d'true'":"")+"\x3e\x3c/div\x3e";case "border":case "number":case "object":case "text":case "array":case "widgetState":case "string":if("date"==g.format)return"\x3cdiv class\x3d'propertyPaneEditablevalue' dojoType\x3d'dijit.form.DateTextBox' id\x3d'"+c+"'\x3e\x3c/input\x3e";if("time"==g.format)return"\x3cdiv class\x3d'propertyPaneEditablevalue' dojoType\x3d'dijit.form.TimeTextBox' id\x3d'"+
c+"'\x3e\x3c/input\x3e";default:return c=g.data&&!0===g.data.readonly?"\x3cinput readonly type\x3d'text' class\x3d'form-control input-transparent propertyPaneEditablevalue' style\x3d'display:inline-block; width:100%;' id\x3d'"+c+"'\x3e\x3c/input\x3e":"\x3cinput type\x3d'text' class\x3d'form-control input-transparent propertyPaneEditablevalue' style\x3d'display:inline-block; width:100%;' id\x3d'"+c+"'\x3e\x3c/input\x3e"}},generateTable:function(g,e){var m=e?e.rowsOnly:!1,c=e&&e.zeroSpaceForIncrDecr?
"0px":"20px";e="";if(g.html)return g.id=this.getId(),this.injectId(g.html,g.id);c="\x3ctable class\x3d'property_table_stretchable' border\x3d'0' width\x3d'100%' align\x3d'center' cellspacing\x3d'0' cellpadding\x3d'0'\x3e\x3ccolgroup\x3e\x3ccol style\x3d'width:6px;' /\x3e\x3ccol class\x3d'gap02' /\x3e\x3ccol class\x3d'gap03' /\x3e"+("\x3ccol style\x3d'width:"+c+";' /\x3e")+"\x3ccol style\x3d'width:6px;' /\x3e\x3c/colgroup\x3e";m||(e+=c);for(var k=0;k<g.length;k++)if(g[k].widgetHtml)g[k].id=this.getId(),
g[k].rowId=this.getId(),e+="\x3ctr id\x3d'"+g[k].rowId+"'",g[k].rowClass&&(e+=" class\x3d'"+g[k].rowClass+"'"),e+="\x3e",e+="\x3ctd colspan\x3d'5' width\x3d'100%'\x3e",e+=this.injectId(g[k].widgetHtml,g[k].id),e+="\x3c/td\x3e",e+="\x3c/tr\x3e";else if(g[k].html)g[k].id=this.getId(),g[k].rowId=this.getId(),e+="\x3ctr id\x3d'"+g[k].rowId+"'",e+=" class\x3d'cssPropertySection",g[k].rowClass&&(e+=" "+g[k].rowClass),e+="'\x3e",e+="\x3ctd colspan\x3d'5' width\x3d'100%'\x3e",e+=g[k].html,e+="\x3c/td\x3e",
e+="\x3c/tr\x3e";else if("toggleSection"==g[k].type){e+="\x3ctr id\x3d'"+g[k].id+"'  class\x3d'cssPropertySection'\x3e\x3ctd colspan\x3d'5'\x3e";for(var f="",d=this.generateTable(g[k].pageTemplate,{rowsOnly:!0}),b=0;b<g[k].pageTemplate.length;b++)g[k].pageTemplate[b].rowId&&(f+="dojo.toggleClass('"+g[k].pageTemplate[b].rowId+"','propertiesSectionHidden');"),g[k].pageTemplate[b].cascadeSectionRowId&&(f+="if(this.checked){dojo.removeClass('"+g[k].pageTemplate[b].cascadeSectionRowId+"','propertiesSectionHidden');}else{{dojo.addClass('"+
g[k].pageTemplate[b].cascadeSectionRowId+"','propertiesSectionHidden');}}");e+="\x3cinput type\x3d'checkbox' onclick\x3d\""+f+'"\x3e\x3c/input\x3e';e+=g[k].display;e+="\x3c/td\x3e\x3c/tr\x3e";e+=d}else g[k].display?(g[k].toggleCascade=this.getId(),g[k].cascadeSection=this.getId(),g[k].rowId=this.getId(),g[k].cascadeSectionRowId=this.getId(),e+="\x3ctr id\x3d'"+g[k].rowId+"'",e+=" class\x3d'cssPropertySection",g[k].rowClass&&(e+=" "+g[k].rowClass),e+="'",e+=" propName\x3d'"+g[k].display+"'",e+="\x3e",
e+="\x3ctd/\x3e",e+="\x3ctd class\x3d'propertyDisplayName'\x3e"+g[k].display+":\x26nbsp;\x3c/td\x3e",e+="\x3ctd class\x3d'propertyInputField propertyInputField"+g[k].type+"' \x3e"+this.getEditor(g[k])+"\x3c/td\x3e",e+="\x3ctd class\x3d'propertyExtra' nowrap\x3d'true'\x3e",e+="\x3ctd class\x3d'propertyExtra2' nowrap\x3d'true'\x3e",g[k].target&&!g[k].hideCascade&&(e+="\x3cdiv width\x3d'100%'\x3e\x3cbutton class\x3d'showCss propertyButton' id\x3d'"+g[k].toggleCascade+"'",e+=' onClick\x3d"davinci.ve.widgets.HTMLStringUtil.showProperty(',
e+="'"+g[k].rowId+"'",e+=')"\x3e\x26gt;\x3c/button\x3e',e+="\x3c/div\x3e"),e+="\x3ctd/\x3e",e+="\x3c/tr\x3e",g[k].target&&!g[k].hideCascade&&(f="{'cascadeSectionRowId':\""+g[k].cascadeSectionRowId+"\",'toggleCascade':\""+g[k].toggleCascade+'"}',e+="\x3ctr id\x3d'"+g[k].cascadeSectionRowId+"' class\x3d'cssCascadeSection cascadeRowHidden'\x3e",e+="\x3ctd colspan\x3d'5' width\x3d'100%' class\x3d'showCascadeDiv'\x3e\x3cdiv dojoType\x3d'davinci.ve.widgets.Cascade' toggleClasses\x3d"+f+" target\x3d'"+dojo.toJson(g[k].target)+
"' targetField\x3d'\""+g[k].id+"\"' id\x3d'"+g[k].cascadeSection+"'\x3e\x3c/div\x3e\x3c/td\x3e\x3c/tr\x3e")):(e+="\x3c/table\x3e",e+=this.getEditor(g[k]),e+=c);m||(e+="\x3c/table\x3e");return e},generateTemplate:function(g){var e="";g.pageTemplate?(g.key&&(g.id=this.getId(),e="\x3cdiv class\x3d'propGroup' id\x3d'"+g.id+"' propGroup\x3d'"+g.key+"'\x3e"),e+=this.generateTable(g.pageTemplate),e+="\x3c/div\x3e"):g.html?e+=g.html:g.widgetHtml&&(g.id=this.getId(),e+=this.injectId(g.widgetHtml,g.id));return e},
stylesheetHref:"propview.css",animShowSectionClass:"propRootDetailsContainer",animShowSectionClassSelector:".propRootDetailsContainer",animShowDetailsClass:"property_table_stretchable",animShowDetailsClassSelector:".property_table_stretchable",showPropAnimClasses:["propRowFadeIn","propRowFadeOut","propRowTransparent","propRowOpaque","propRowHidden"],showRoot:function(){this._hideSectionShowRoot();this._currentPropSection=null;return!1},showSection:function(g,e){this._initSection(g);return!1},showProperty:function(g){function e(a){dojo.disconnect(w);
dojo.disconnect(x);m();var b=k._findRule(k.animShowDetailsClassSelector);b?(a=b.ss,b=b.ruleIndex,a.deleteRule(b),a.insertRule(k.animShowDetailsClassSelector+" { margin-top:0px; }",b),c()):console.error("HTMLStringUtil showProperty: transEnd: rule not found")}var m=function(){for(var a=0;a<b.children.length;a++){var c=b.children[a];1==c.nodeType&&dojo.hasClass(c,"cssPropertySection")&&(c==d?k._addRemoveClasses(c,f,[]):k._addRemoveClasses(c,f,["propRowHidden"]))}},c=function(){p&&(dojo.removeClass(p,
"cascadeRowHidden"),dojo.addClass(p,"cascadeRowTransparent"),setTimeout(function(){dojo.removeClass(p,"cascadeRowTransparent");dojo.addClass(p,"cascadeRowFadeIn")},1))};dojo.addClass(dojo.byId("root"),"showingCascade");var k=this,f=this.showPropAnimClasses,d=dojo.byId(g),b=d.parentNode,a=k._searchSiblingsByTagClass(b.children[0],"TR","cssPropertySection"),p=k._searchSiblingsByTagClass(d.nextSibling,"TR","cssCascadeSection");g=k._searchUpByTagClass(b,"TABLE",k.animShowDetailsClass);var h=k._searchUpByTagClass(d,
"DIV","propGroup"),h=dojo.attr(h,"propGroup");dojo.attr(d,"propName");require("davinci/ve/views/SwitchingStyleView").prototype.sectionTitleFromKey(h);if(q.supportsCSS3Transitions){var a=dojo.marginBox(a),a=dojo.marginBox(d).t-a.t,n=k._findRule(k.animShowDetailsClassSelector);if(n){var h=n.ss,n=n.ruleIndex,w=dojo.connect(g,"webkitTransitionEnd",e),x=dojo.connect(g,"transitionend",e);h.deleteRule(n);h.insertRule(k.animShowDetailsClassSelector+" { margin-top:-"+a+"px; opacity:.99; -webkit-transition: all .6s ease; -moz-transition: all .6s ease; }",
n);g=!1;for(a=0;a<b.children.length;a++)h=b.children[a],1==h.nodeType&&dojo.hasClass(h,"cssPropertySection")&&(h==d?(k._addRemoveClasses(h,f,["propRowFadeIn"]),g=!0):g?k._addRemoveClasses(h,f,["propRowHidden"]):k._addRemoveClasses(h,f,["propRowTransparent"]))}else console.error("HTMLStringUtil showProperty: transEnd: rule not found")}else m(),c()},_initSection:function(g){for(var e=this.showPropAnimClasses,m=this._getRootTD(),c=dojo.query(".propGroup",m),k,m=0;m<c.length;m++){var f=c[m];dojo.attr(f,
"propGroup")==g?(dojo.removeClass(f,"dijitHidden"),k=f):dojo.addClass(f,"dijitHidden")}c=dojo.query(".cssPropertySection",k);for(m=0;m<c.length;m++)this._addRemoveClasses(c[m],e,[]);e=dojo.query(".cssCascadeSection",k);for(m=0;m<e.length;m++)dojo.addClass(e[m],"cascadeRowHidden");this._currentPropSection=g;dojo.removeClass(dojo.byId("root"),"showingCascade")},_hideSectionShowRoot:function(){var g=this._getRootTD();dojo.removeClass(g,"dijitHidden")},_findRule:function(g){function e(c,f){for(var d=
0;d<c.cssRules.length;d++){var b=c.cssRules[d];if(3===b.type){if(b=e(b.styleSheet,f))return b}else if(b.selectorText==f)return{ss:c,ruleIndex:d}}}if(this.animSS&&"number"==typeof this.animRuleIndex[g]){var m=this.animRuleIndex[g];if(this.animSS.cssRules[m].selectorText==g)return{ss:this.animSS,ruleIndex:m}}for(m=0;m<document.styleSheets.length;m++){var c=e(document.styleSheets[m],g);if(c)return this.animSS=c.ss,this.animRuleIndex[g]=c.ruleIndex,c}return null},_addRemoveClasses:function(g,e,m){for(var c=
[],k=0;k<e.length;k++){for(var f=!1,d=0;d<m.length;d++)if(e[k]==m[d]){f=!0;break}f||c.push(e[k])}for(k=0;k<c.length;k++)dojo.removeClass(g,c[k]);for(k=0;k<m.length;k++)dojo.addClass(g,m[k])},_searchUpByTagClass:function(g,e,m){for(;null!=g&&"BODY"!=g.nodeName;){if(g.nodeName==e&&(!m||dojo.hasClass(g,m)))return g;g=g.parentNode}return null},_searchSiblingsByTagClass:function(g,e,m){for(;null!=g;){if(g.nodeName==e&&(!m||dojo.hasClass(g,m)))return g;g=g.nextSibling}return null},_getRootDetailsContainer:function(){this._rootDetailsContainer||
(this._rootDetailsContainer=dojo.query(this.animShowSectionClassSelector)[0]);return this._rootDetailsContainer},_getRootTD:function(){var g=this._getRootDetailsContainer();this._rootTD||(this._rootTD=dojo.query(".propPaletteRoot",g)[0]);return this._rootTD}});return h})},"davinci/ve/widgets/FontDataStore":function(){define(["dojo/_base/declare","dojo/data/ItemFileReadStore","davinci/lang/ve","dijit/lang/_common"],function(q,n){q=q("davinci.ve.widgets.FontDataStore",n,{_allValues:[],constructor:function(h){this.setValues(h.values||
davinci.ve.widgets.FontDataStore.fonts)},setValues:function(h){this._allValues=this._allValues.concat(h);this._jsonData={label:"name",identifier:"value",items:this._allValues};this._loadFinished=!1},contains:function(h){for(var g=0;g<this._allValues.length;g++)if(this._allValues[g].value==h||this._allValues[g].name==h)return g;return!1},clearValues:function(){this._allValues=[];this._loadFinished=!1},lookupValue:function(h){h=this.contains(h);return this._allValues[h].value[0]}});return dojo.mixin(q,
{fonts:[{name:"",value:""},{name:"Arial,Helvetica,sans-serif",value:"Arial,Helvetica,sans-serif"},{name:"'Arial Black,Gadget',sans-serif",value:"'Arial Black,Gadget',sans-serif"},{name:"'Comic Sans MS',cursive",value:"'Comic Sans MS',cursive"},{name:"'Courier New',Courier,monospace",value:"'Courier New',Courier,monospace"},{name:"Geneva,Tahoma,sans-serif",value:"Geneva,Tahoma,sans-serif"},{name:"Georgia,serif",value:"Georgia,serif"},{name:"'Helvetica,Trebuchet MS',sans-serif",value:"'Helvetica,Trebuchet MS',sans-serif"},
{name:"Impact,Charcoal,sans-serif",value:"Impact,Charcoal,sans-serif"},{name:"'Lucida Console',Monaco,monospace",value:"'Lucida Console',Monaco,monospace"},{name:"'Lucida Sans Unicode','Lucida Grande',sans-serif",value:"'Lucida Sans Unicode','Lucida Grande',sans-serif"},{name:"'Lucida Console', Monaco, monospace",value:"'Lucida Console', Monaco, monospace"},{name:"'Palatino Linotype','Book Antiqua',Palatino,serif",value:"'Palatino Linotype','Book Antiqua',Palatino,serif"},{name:"Symbol",value:"Symbol"},
{name:"Tahoma,Geneva,sans-serif",value:"Tahoma,Geneva,sans-serif"},{name:"'Times New Roman',Times,serif",value:"'Times New Roman',Times,serif"},{name:"'Trebuchet MS',Helvetica,sans-serif",value:"'Trebuchet MS',Helvetica,sans-serif"},{name:"Verdana,Geneva,sans-serif",value:"Verdana,Geneva,sans-serif"},{name:"Webdings",value:"Webdings"},{name:"Wingdings, 'Zapf Dingbats'",value:"Wingdings, 'Zapf Dingbats'"},{name:"'Zapf Dingbats', Wingdings",value:"'Zapf Dingbats', Wingdings"},{name:"sans-serif",value:"sans-serif"},
{name:"serif",value:"serif"},{name:"monospace",value:"monospace"},{name:"cursive",value:"cursive"},{name:"LCD",value:"LCD"}]})})},"davinci/ve/widgets/FontComboBox":function(){define(["dojo/_base/declare","dijit/form/ComboBox","davinci/lang/ve","dijit/lang/_common"],function(q,n){return q("davinci.ve.widgets.FontComboBox",n,{_getValueAttr:function(){if(this.store)for(var h=0;h<this.store._allValues.length;h++){var g=this.store._allValues[h];if(g.name[0]==this.value)return g.value[0]}return this.value},
_setValueAttr:function(h){this.store&&h?this.store.fetch({query:{value:h},onComplete:function(g,e){1>g.length?this.inherited("_setValueAttr",[h]):(this.inherited("_setValueAttr",[g[0].name[0]]),this.item=g[0])}.bind(this),onError:function(){this.inherited("_setValueAttr",[h])}.bind(this)}):this.inherited("_setValueAttr",[h])}})})},"davinci/ve/widgets/MultiInputDropDown":function(){define("dojo/_base/declare xide/widgets/TemplatedWidgetBase xide/form/Select dcl/dcl xide/data/TreeMemory xide/data/ObservableStore dstore/Trackable xide/factory dojo/_base/lang".split(" "),
function(q,n,h,g,e,m,c,k,f){var d=g(n,{numberDelta:1,templateString:"\x3cdiv \x3e\x3c/div\x3e",insertPosition:1,declaredClass:"davinci.ve.widgets.MultiInputDropDown",data:null,divider:"---",postCreate:function(){},get:function(b){return"value"===b&&this._dropDown?this._getValueAttr():""},startup:function(){var b=dojo.doc.createElement("div");this._run={};var a=this;this.data?(this.data.push({value:d.divider}),this.data.push({label:"Remove Value",value:"Remove Value",run:function(){this.set("value",
"",!1);a._dropDown.set("value","",!0)}})):this.data=[{value:"auto"},{value:"0px"},{value:d.divider},{value:"Remove Value",run:function(){this.set("value","",!1);a._dropDown.set("value","")}},{value:d.divider},{value:"Help",run:function(){alert("help!")}}];for(var f=[],g=0;g<this.data.length;g++)f.push(this.data[g].value),this.data[g].run&&(this._run[this.data[g].value]=this.data[g].run);var n=[];_.each(this.data,function(a){n.push({label:a.label||a.value,value:a.value,run:a.run})});this._dropDown=
new h({EDITABLE_CLASS:h.TYPEAHEAD,storeClass:q("driverStore",[e,c,m],{setValues:function(a){var b=[],d=0;a&&(this._values=a);dojo.forEach(this.data,dojo.hitch(this,function(a){b.push({label:a.label,value:a.value,id:d++})}));this._jsonData={identifier:"id",items:b};this.setData(b);this.root._emit("update",{target:null})},modifyItem:function(b,d){for(var f=0;f<this.data.length;f++)this.data[f].value===b&&(this.data[f].value=d);a._dropDown.set("value",d);this.setValues()},insert:function(a,b){this.data.splice(a,
0,{value:b,label:b});this.setValues()},contains:function(a){for(var b=0;b<this.data.length;b++)if(this.data[b].value==a)return!0;return!1},findSimilar:function(a){if(a=(new RegExp(/(\D*)(-?)(\d+)(\D*)/)).exec(a)){a=new RegExp((0<a.length?a[1]:"")+"(-?)(\\d+)"+(3<a.length?a[4]:""));for(var b=0;b<this.data.length;b++)if(a.test(this.data[b].value))return this.data[b].value}},getItemNumber:function(a){return this.data[a]},clearValues:function(){this._loadFinished=!1}}),required:!1,title:"",editable:!0,
options:n,selectOptions:{container:"body",liveSearch:!0,createItem:!0,createItemText:"Create: {0}"},userData:{}});this._dropDown.startup();this._store=this._dropDown.store;this._plus=k.createButton(this._dropDown.previewNode,"fa-plus","btn-default btn-xs2",null,"");this._minus=k.createButton(this._dropDown.button0,"fa-minus","btn-default btn-xs2",null,"");f=dojo.create("div",{"class":"propInputWithIncrDecrButtons"});f.appendChild(this._dropDown.domNode);b.appendChild(f);f=dojo.doc.createElement("div");
dojo.style(f,"clear","both");b.appendChild(f);this._currentValue=this._store.data[0];dojo.connect(this._dropDown,"onKeyUp",this,"_updateSpinner");var w=this;this._dropDown._on?this._dropDown._on("change",function(a){w._onChange(a)}):dojo.connect(this._dropDown,"onChange",this,"_onChange");dojo.connect(this._plus,"onclick",this,"_plusButton",!1);dojo.connect(this._minus,"onclick",this,"_minusButton",!1);this._updateSpinner();this.domNode.appendChild(b);this.add(this._dropDown);this.add(this._store)},
_setReadOnlyAttr:function(b){this._isReadOnly=b;this._dropDown&&(this._dropDown.set("disabled",b),dojo.attr(this._plus,"disabled",b),dojo.attr(this._minus,"disabled",b))},onChange:function(b){},_getValueAttr:function(){return this._dropDown.get("value")},_setValueAttr:function(b,a){this._dropDown.set("value",b,!0);this._currentValue=this._dropDown.get("value");!1!==a&&this._onChange(this._currentValue);if(!a)this.onChange()},_changeValue:function(b,a){b=b.split(" ");for(var d="",f=0;f<b.length;f++){0<
f&&(d+=" ");var c=b[f].match(/([-\d\.]+)([a-zA-Z%]*)/);if(c)if(1==c.length)d+=c[0];else for(var e=1;e<c.length;e++)d=isNaN(c[e])||""==c[e]?d+c[e]:d+(parseFloat(c[e])+a);else d+=b[f]}return d},_plusButton:function(){var b=this._dropDown.get("value"),a=this._changeValue(b,this.numberDelta);this._store.modifyItem(b,a);this._dropDown.set("value",a);this._onChange(a)},_minusButton:function(){var b=this._dropDown.get("value"),a=this._changeValue(b,-1*this.numberDelta);this._store.modifyItem(b,a);this._dropDown.set("value",
a);this._onChange(a)},_updateSpinner:function(){var b=this._dropDown.get("value"),b=/(-?)(\d+){1}/.exec(b);this._minus.disabled=b&&b.length?this._plus.disabled=!1:this._plus.disabled=!0;return!0},_onChange:function(b){var a;b in this._run?(this._dropDown.get("value",this._store.getItemNumber(0)),dojo.hitch(this,this._run[b])()):b==d.divider?this._dropDown.get("value",this._store.getItemNumber(0)):(a=this._store.findSimilar(b))?this._store.modifyItem(a,b):this._store.contains(b)||this._store.insert(this.insertPosition,
b);this._currentValue!=this._dropDown.get("value")&&(this._currentValue=this._dropDown.get("value"),this.onChange(b));this._updateSpinner()}});d.divider="---";f.setObject("davinci.ve.widgets.MultiInputDropDown",d);return d})},"davinci/ve/widgets/MetaDataStore":function(){define(["dojo/_base/declare","dojo/data/ItemFileReadStore","davinci/lang/ve","dijit/lang/_common"],function(q,n){return q("davinci.ve.widgets.MetaDataStore",n,{_allValues:[],constructor:function(h){this.setValues(h&&h.values||[])},
setValues:function(h){dojo.mixin(this._allValues,h);var g=[];dojo.forEach(this._allValues,function(e){g.push({name:e,value:e})});this._jsonData={identifier:"name",items:g};this._loadFinished=!1},contains:function(h){return-1!=dojo.indexOf(this._allValues,h)},clearValues:function(){this._allValues=[];this._loadFinished=!1}})})},"davinci/ve/widgets/ColorPicker":function(){define(["davinci/ve/widgets/ColorPicker2","dijit/popup"],function(q){return q})},"davinci/ve/widgets/ColorPicker2":function(){define(["xide/widgets/ColorPickerWidget",
"xide/utils","dcl/dcl","xide/widgets/TemplatedWidgetBase","dojo/_base/lang"],function(q,n,h,g,e){h=h(g,{templateString:"\x3cdiv \x3e\x3c/div\x3e",numberDelta:1,insertPosition:9,data:null,_onChange:function(e){},_setValueAttr:function(e,c){if(this._dropDown&&(this._dropDown.set("value",e.replace("#",""),!0),this._currentValue=this._dropDown.get("value"),!1!==c&&this._onChange(this._currentValue),!c&&e!==this._currentValue))this.onChange()},set:function(e,c){if("value"===e&&this._dropDown)return this._setValueAttr(c)},
get:function(e){return"value"===e&&this._dropDown?this._getValueAttr():""},postCreate:function(){},startup:function(){var e=n.addWidget(q,{title:""},null,this.domNode,!0);this._dropDown=e;this._value=this._value||"";this._dropDown.set("value",this._value.replace("#",""),!0);var c=this;this._dropDown._on("change",function(e){c._value=c._getValueAttr();c.onChange(c._value)});this.add(e)},_setReadOnlyAttr:function(e){this._isReadOnly=e;this._dropDown.set("disabled",e)},onChange:function(){this._value=
this._dropDown.get("value")},_getValueAttr:function(){return this._dropDown.get("value")}});dojo.mixin(h,{divider:"---"});e.setObject("davinci.ve.widgets.ColorPicker",h);return h})},"davinci/ve/widgets/Background":function(){define("dojo/_base/declare dojo/Deferred davinci/workbench/WidgetLite davinci/ve/widgets/ColorPickerFlat davinci/ve/widgets/ColorStore davinci/ve/widgets/MutableStore dijit/form/ComboBox davinci/ve/widgets/BackgroundDialog davinci/Workbench davinci/ve/utils/URLRewrite davinci/model/Path davinci/lang/ve dijit/lang/_common davinci/ve/utils/CssUtils davinci/ve/widgets/ColorPicker xide/views/_PanelDialog xide/utils".split(" "),
function(q,n,h,g,e,m,c,k,f,d,b,a,p,r,v,w,x){var B=0;return q("davinci.ve.widgets.Background",[h],{__id:0,data:null,buildRendering:function(){this.domNode=dojo.doc.createElement("div",{style:"width:100%"});this._textFieldId="davinci_ve_widgets_properties_border_generated"+B++;this._buttonId="davinci_ve_widgets_properties_border_generated"+B++;var b=dojo.create("div",{className:"bgPropButtonDiv",style:"float:right; width:28px;"});dojo.create("button",{innerHTML:"...",id:this._buttonId,className:"bgPropButton btn-info",
style:"font-size:1em;"},b);var d=38,f=this._colorswatch="true"==this.colorswatch;if(f){var d=56,p=dojo.doc.createElement("div");dojo.addClass(p,"colorPicker");this._selectedColor=dojo.doc.createElement("div");this._selectedColor.innerHTML="\x26nbsp;";dojo.addClass(this._selectedColor,"colorPickerSelected");dojo.addClass(this._selectedColor,"colorPickerSelectedSkinny");this._colorPickerFlat=new g({})}var d=dojo.create("div",{className:"bgPropComboDiv",style:"margin-right:"+d+"px;padding:1px 0;"}),
k=dojo.isArray(this.data)?this.data:[""],h=this.langObjVE=a;if(f){this._statics=["",davinci.ve.widgets.ColorPicker.divider,h.colorPicker,h.removeValue];this._run={};this.data?(this.data.push({value:davinci.ve.widgets.ColorPicker.divider}),this.data.push({value:langObj.removeValue,run:function(){this.set("value","")}})):(this.data=[{value:this._statics[0]}],this.data.push({value:this._statics[2],run:this._chooseColorValue}),this.data.push({value:this._statics[3],run:function(){this.set("value","")}}),
this.data.push({value:this._statics[1]}),this.data.push({value:"transparent"}),this.data.push({value:"black"}),this.data.push({value:"white"}),this.data.push({value:"red"}),this.data.push({value:"green"}),this.data.push({value:"blue"}));k=[];for(h=0;h<this.data.length;h++)k.push(this.data[h].value),this.data[h].run&&(this._run[this.data[h].value]=this.data[h].run);this._store=new e({values:k,noncolors:this._statics})}else this._store=new m({values:k});this._comboBox=new c({store:this._store,id:this._textFieldId,
style:"width:100%;"});d.appendChild(this._comboBox.domNode);this.domNode.appendChild(b);f&&(this.domNode.appendChild(p),dojo.connect(p,"onclick",dojo.hitch(this,function(a){dojo.stopEvent(a);this._chooseColorValue()})),p.appendChild(this._selectedColor),this._colorPickerFlat_comboBoxUpdateDueTo="colorSwatch");this.domNode.appendChild(d);"string"==typeof this.propname&&this._comboBox&&(davinci.ve._BackgroundWidgets||(davinci.ve._BackgroundWidgets={}),davinci.ve._BackgroundWidgets[this.propname]={propPaletteWidget:this,
comboBox:this._comboBox});this.inherited(arguments)},startup:function(){this.inherited(arguments);this._button=dojo.byId(this._buttonId);dojo.connect(this._button,"onclick",this,function(){var a=this._cascade&&this._cascade._widget&&this._cascade._widget.getContext?this._cascade._widget.getContext():null,f=new k({context:a}),c=dojo.hitch(this,function(f){a||(console.error("Background.js. no context"),a={});var c=a.cascadeBatch={},e=c.propList=[],p=c.actions={},g=c.deferreds={};c.askUserResponse=void 0;
if(!f.cancel){var k=davinci.ve._BackgroundWidgets,h;for(h in k){var m=k[h];if(m.bgdWidget){var c=m.bgdWidget.get("value"),v=m.propPaletteWidget.get("value");c!==v&&(e.push(h),p[h]=dojo.hitch(this,function(a,b){a.propPaletteWidget._comboBoxUpdateDueTo="backgroundDialog";a.propPaletteWidget.set("value",b)},m,c),g[h]=new n)}}h="background-image";m=k[h];f=r.buildBackgroundImage(f.bgddata);for(c=0;c<f.length;c++)v=f[c],d.containsUrl(v)&&!d.isAbsolute(v)&&((k=d.getUrl(v))&&(v="url('"+(new b(k)).toString()+
"')"),f[c]=v);c=0==f.length?"":f[f.length-1];v=m.propPaletteWidget.get("value");c!==v&&(m.propPaletteWidget._cascade&&(m.propPaletteWidget._cascade._valueArrayNew=f),e.push(h),p[h]=dojo.hitch(this,function(a,b){m.propPaletteWidget._comboBoxUpdateDueTo="backgroundDialog";m.propPaletteWidget.set("value",b)},m,c),g[h]=new n);for(c=0;c<e.length;c++)h=e[c],g[h].then(dojo.hitch(this,function(b){(b=e[b+1])?p[b].apply():delete a.cascadeBatch},c));0<e.length&&(h=e[0],p[h].apply())}return!0},f),e=davinci.ve._BackgroundWidgets,
p;for(p in e){var g=e[p].propPaletteWidget._cascade;g&&(g._valueArrayNew=g._valueArray)}f.set("baseLocation",this._baseLocation);(new w({onOk:function(){c()},onShow:function(a,b,d){x.addChild(b,f,!0);this.add(f,null,!1);this.startDfd.resolve();return[f]}})).show()});this.connect(this._comboBox,"onChange",dojo.hitch(this,function(a){a!=davinci.ve.widgets.ColorPicker.divider&&a!=this.langObjVE.colorPicker||this._comboBox.set("value",this.value);var b=this._comboBoxUpdateDueTo;this._comboBoxUpdateDueTo=
void 0;"setAttr"!=b&&this._onChange(a)}));this.connect(this._comboBox,"onFocus",dojo.hitch(this,function(a){a=davinci.ve._BackgroundWidgets;for(var b in a){var d=a[b].propPaletteWidget._cascade;d&&(d._valueArrayNew=void 0)}(b=this._cascade&&this._cascade._widget&&this._cascade._widget.getContext?this._cascade._widget.getContext():null)&&delete b.cascadeBatch}));this._maqStartupComplete=!0},_setBaseLocationAttr:function(a){this._baseLocation=a},_setValueAttr:function(a){var b=this._comboBox.get("value");
this._colorswatch&&dojo.style(this._selectedColor,"backgroundColor",a);a=dojo.isArray(a)?0<a.length?a[a.length-1]:"":a;b!==a&&("backgroundDialog"!==this._comboBoxUpdateDueTo&&"colorSwatch"!==this._comboBoxUpdateDueTo&&(this._comboBoxUpdateDueTo="setAttr"),this._comboBox.set("value",a))},_onChange:function(a){this._colorswatch&&"string"==typeof a&&(a in this._run?dojo.hitch(this,this._run[a])():a==davinci.ve.widgets.ColorPicker.divider?this._comboBox.set("value",this._store.getItemNumber(0)):dojo.style(this._selectedColor,
"backgroundColor",a));this.value=this._comboBox.get("value");this.onChange(a)},onChange:function(a){},_getValueAttr:function(){return this._comboBox.get("value")},_setReadOnlyAttr:function(a){this._maqStartupComplete&&(this._isReadOnly=a,this._comboBox.set("disabled",a),this._button.disabled=a)},_chooseColorValue:function(){if(!this._isReadOnly){var a=this._comboBox.get("value"),b=this.isLeftToRight();davinci.ve.widgets.ColorPickerFlat.show(this._colorPickerFlat,a,this,b)}}})})},"davinci/ve/widgets/ColorPickerFlat":function(){define("dojo/_base/declare dijit/_Widget dijit/TooltipDialog dijit/form/Button dojox/widget/ColorPicker davinci/lang/ve dijit/lang/_common".split(" "),
function(q,n,h,g,e,m,c){q=q("davinci.ve.widgets.ColorPickerFlat",[n],{numberDelta:1,insertPosition:1,data:null,postCreate:function(){this.inherited(arguments);var k=dojo.doc.createElement("div");this._colorPicker=new e({});k.appendChild(this._colorPicker.domNode);var f=dojo.doc.createElement("div"),d=g({label:c.buttonOk});d.innerHtml="OK";f.appendChild(d.domNode);var b=g({label:c.buttonCancel});f.appendChild(b.domNode);k.appendChild(f);this.domNode.appendChild(k);dojo.connect(d,"onClick",this,"_onOk");
dojo.connect(b,"onClick",this,"onCancel");delete this.canceled},onClose:function(){},onCancel:function(){this._value=null;this.canceled=!0},_onOk:function(){delete this.canceled;this._value=this._colorPicker.get("value");this.onClose()},_getValueAttr:function(){return this._value},_setValueAttr:function(c){c=new dojo.Color(c);this._colorPicker.setColor(c.toHex())}});return dojo.mixin(q,{show:function(c,f,d,b){var a=new h({id:"maqetta_prop_tooltip_color_picker",title:m.selectColor,content:c});dijit.popup.moveOffScreen(a.domNode);
var e=!1,g=function(b){return function(){e&&(e=!1,dijit.popup.close(a))}}();a.connect(c,"onCancel",g);a.connect(c,"onClose",g);var k=dijit.byNode(dojo.query("[widgetId]",a.domNode)[0]);f in dojo.Color.named?(f=dojo.colorFromString(f),c.set("value",f.toHex())):c.set("value",f||"",!0);(function(f){return function(){dijit.popup.open({parent:d,popup:a,around:d.domNode,orient:b?{BL:"TL",BR:"TR",TL:"BL",TR:"BR"}:{BR:"TR",BL:"TL",TR:"BR",TL:"BL"},onClose:function(){k.canceled||(d._colorPickerFlat_comboBoxUpdateDueTo&&
(d._comboBoxUpdateDueTo=d._colorPickerFlat_comboBoxUpdateDueTo),d.get("value"),d.set("value",k.get("value")));g();a.destroy()}});e=!0;dijit.focus(a.containerNode)}})()()}})})},"davinci/ve/widgets/ColorStore":function(){define(["dojo/_base/declare","dojo/data/ItemFileReadStore","davinci/lang/ve","dijit/lang/_common"],function(q,n){return q("davinci.ve.widgets.ColorStore",n,{constructor:function(h){this.clearValues();h.noncolors&&(this.noncolors=h.noncolors);h.values&&this.setValues(h.values)},setValues:function(h){var g=
[];h&&(this._values=h);dojo.forEach(this._values,dojo.hitch(this,function(e){for(var h=!1,c=0;!h&&c<this.noncolors.length;c++)this.noncolors[c]==e&&(h=!0);h?g.push({name:e,value:e,label:e}):g.push({value:e,name:e,label:"\x3ctable\x3e\x3ctr\x3e\x3ctd style\x3d'width:10em'\x3e"+e+"\x3c/td\x3e\x3ctd style\x3d'width:10px;height:10px;background-color:"+e+"'\x3e\x3c/td\x3e\x3c/tr\x3e\x3c/table\x3e"})}));this._jsonData={identifier:"value",items:g};this._loadFinished=!1},insert:function(h,g){this._values.splice(h,
0,g);this.setValues()},contains:function(h){for(var g=0;g<this._values.length;g++)if(this._values[g]==h)return!0;return!1},getItemNumber:function(h){return this._values[h]},clearValues:function(){this._loadFinished=!1}})})},"davinci/ve/widgets/MutableStore":function(){define(["dojo/_base/declare","dojo/data/ItemFileReadStore","davinci/lang/ve","dijit/lang/_common"],function(q,n,h,g){return q("davinci.ve.widgets.MutableStore",n,{constructor:function(e){this.clearValues();e.divider&&(this.divider=e.divider);
e.values&&this.setValues(e.values)},setValues:function(e){var g=[],c=0;e&&(this._values=e);dojo.forEach(this._values,dojo.hitch(this,function(e){g.push({name:e,value:e,id:c++})}));this._jsonData={identifier:"id",items:g};this._loadFinished=!1},modifyItem:function(e,g){for(var c=0;c<this._values.length;c++)this._values[c]==e&&(this._values[c]=g);this.setValues()},insert:function(e,g){this._values.splice(e,0,g);this.setValues()},contains:function(e){for(var g=0;g<this._values.length;g++)if(this._values[g]==
e)return!0;return!1},findSimilar:function(e){if(e=(new RegExp(/(\D*)(-?)(\d+)(\D*)/)).exec(e)){e=new RegExp((0<e.length?e[1]:"")+"(-?)(\\d+)"+(3<e.length?e[4]:""));for(var g=0;g<this._values.length;g++)if(e.test(this._values[g]))return this._values[g]}},getItemNumber:function(e){return this._values[e]},clearValues:function(){this._loadFinished=!1}})})},"davinci/ve/widgets/BackgroundDialog":function(){define("dojo/_base/declare dijit/_WidgetBase dijit/_TemplatedMixin dijit/_WidgetsInTemplateMixin davinci/Runtime davinci/ve/widgets/MutableStore davinci/ve/widgets/ColorStore xide/utils dojo/text!./templates/BackgroundDialog.html davinci/ve/utils/CssUtils davinci/lang/ve dijit/lang/_common davinci/ve/utils/URLRewrite dojo/parser dojo/_base/lang davinci/model/Path dijit/form/Button davinci/ve/widgets/ColorPicker davinci/ve/widgets/ColorPickerFlat dijit/form/Textarea davinci/ui/widgets/FileFieldDialog".split(" "),
function(q,n,h,g,e,m,c,k,f,d,b,a,p,r,v){r._clearCache();var w=function(a,b){return"url('"+b+"')"};q=q("davinci.ve.widgets.BackgroundDialog",[n,h,g],{templateString:f,widgetsInTemplate:!0,_filePicker:null,context:null,veNLS:b,stopRowTemplate:"\x3ctr class\x3d'bgdGradOptRow bgdStopRow' style\x3d'display:none;'\x3e\x3ctd class\x3d'bgdCol1'\x3e\x3c/td\x3e\x3ctd class\x3d'bgdOptsLabel bdgStopLabel'\x3e"+b.bgdTemplate+"\x3c/td\x3e\x3ctd class\x3d'bgdStopColorTD'\x3e\x3cselect class\x3d'bgdColor' dojoType\x3d'dijit.form.ComboBox'\x3e\x3c/select\x3e\x3c/td\x3e\x3ctd\x3e\x3cselect class\x3d'bgdPosition' dojoType\x3d'dijit.form.ComboBox'\x3e\x3c/select\x3e\x3c/td\x3e\x3ctd class\x3d'bgdPlusMinusButtons'\x3e\x3cspan class\x3d'bgdPlusButton' dojoType\x3d'dijit.form.Button'\x3e+\x3c/span\x3e\x3cspan class\x3d'bgdMinusButton' dojoType\x3d'dijit.form.Button'\x3e-\x3c/span\x3e\x3c/td\x3e\x3c/tr\x3e",
postMixInProperties:function(){this.inherited(arguments);dojo.mixin(this,a)},postCreate:function(){this.inherited(arguments);var a=this.langObj=b;this.stoppos_store=new m({values:"0% 100% 10% 20% 30% 40% 50% 60% 70% 80% 90%".split(" ")});var f=davinci.ve._BackgroundWidgets;this._statics=["",davinci.ve.widgets.ColorPicker.divider,a.colorPicker,a.removeValue];var e=[{value:this._statics[0]}];e.push({value:this._statics[2],action:"_colorpicker"});e.push({value:this._statics[3],action:"_removevalue"});
e.push({value:this._statics[1],action:"_donothing"});e.push({value:"transparent"});e.push({value:"black"});e.push({value:"white"});e.push({value:"red"});e.push({value:"green"});e.push({value:"blue"});var p=[];this._bgcolor_action={};var g=[];this._stops_action={};for(var k=0;k<e.length;k++)p.push(e[k].value),e[k].action&&(this._bgcolor_action[e[k].value]=e[k].action),""!=e[k].value&&"_removevalue"!=e[k].action&&(g.push(e[k].value),e[k].action&&(this._stops_action[e[k].value]=e[k].action));this._bgcolor_store=
new c({values:p,noncolors:this._statics});this._stops_store=new c({values:g,noncolors:this._statics});var e=f["background-image"].comboBox.get("value"),h,r;"string"==typeof e&&0<e.length?(h=d.parseBackgroundImage(e),r=h.type):h={};this.bgddata=h;this.bgdOtherTA.set("value",e);var n=[];"emptystring url linear radial none other".split(" ").forEach(function(b){n.push({value:b,label:a["bgdType_"+b]})});this.bgdTypeSelect.addOption(n);this._updateBackgroundImageType(r);this.connect(this.bgdTypeSelect,
"onChange",dojo.hitch(this,function(){var a=this.bgdTypeSelect.get("value");this._updateBackgroundImageType(a);this._onFieldChanged()}));e=f["background-color"].comboBox.get("value");r=this.bgdColorCB;r.set("store",this._bgcolor_store);r.set("value",e);h.backgroundColor=e;this.connect(this.bgdColorCB,"onChange",dojo.hitch(this,function(a){this._onChangeColor(a,this.bgdColorCB,this._bgcolor_action)}));f["background-color"].bgdWidget=this.bgdColorCB;r=f["background-repeat"].comboBox;e=r.get("value");
p=this.bgdRepeatCB;p.set("store",r.store);p.set("regExp","repeat|repeat-x|repeat-y|no-repeat");p.set("value",e);h.backgroundRepeat=e;this.connect(this.bgdRepeatCB,"onChange",dojo.hitch(this,function(){h.backgroundRepeat=this.bgdRepeatCB.get("value");this._onFieldChanged()}));f["background-repeat"].bgdWidget=this.bgdRepeatCB;r=f["background-position"].comboBox;e=r.get("value");p=this.bgdPositionCB;p.set("store",r.store);p.set("regExp","auto|contain|cover|"+d.regstr_posn);p.set("value",e);h.backgroundPosition=
e;this.connect(this.bgdPositionCB,"onChange",dojo.hitch(this,function(){h.backgroundPosition=this.bgdPositionCB.get("value");this._onFieldChanged()}));f["background-position"].bgdWidget=this.bgdPositionCB;r=f["background-size"].comboBox;e=r.get("value");p=this.bgdSizeCB;p.set("store",r.store);p.set("regExp","auto|contain|cover|"+d.regstr_len_or_pct);p.set("value",e);h.backgroundSize=e;this.connect(this.bgdSizeCB,"onChange",dojo.hitch(this,function(){h.backgroundSize=this.bgdSizeCB.get("value");this._onFieldChanged()}));
f["background-size"].bgdWidget=this.bgdSizeCB;r=f["background-origin"].comboBox;e=r.get("value");p=this.bgdOriginCB;p.set("store",r.store);p.set("regExp","border-box|padding-box|content-box");p.set("value",e);h.backgroundOrigin=e;this.connect(this.bgdOriginCB,"onChange",dojo.hitch(this,function(){h.backgroundOrigin=this.bgdOriginCB.get("value");this._onFieldChanged()}));f["background-origin"].bgdWidget=this.bgdOriginCB;r=f["background-clip"].comboBox;e=r.get("value");p=this.bgdClipCB;p.set("store",
r.store);p.set("regExp","border-box|padding-box|content-box");p.set("value",e);h.backgroundClip=e;this.connect(this.bgdClipCB,"onChange",dojo.hitch(this,function(){h.backgroundClip=this.bgdClipCB.get("value");this._onFieldChanged()}));f["background-clip"].bgdWidget=this.bgdClipCB;f=new m({values:"to bottom;to top;to right;to left;45deg;-45deg".split(";")});this.bgdLinearAngleCB.set("store",f);this.bgdLinearAngleCB.set("regExp",d.regstr_angle);this.bgdLinearAngleCB.set("value",h&&h.angle?h.angle:"to bottom");
this.connect(this.bgdLinearAngleCB,"onChange",dojo.hitch(this,function(){h.angle=this.bgdLinearAngleCB.get("value");this._onFieldChanged()}));f=new m({values:"center;left top;center center;right bottom;0% 0%;0px 0px".split(";")});this.bgdRadialPosCB.set("store",f);this.bgdRadialPosCB.set("regExp",d.regstr_posn);this.bgdRadialPosCB.set("value",h&&h.posn?h.posn:"center");this.connect(this.bgdRadialPosCB,"onChange",dojo.hitch(this,function(){h.posn=this.bgdRadialPosCB.get("value");this._onFieldChanged()}));
f=new m({values:["circle","ellipse"]});this.bgdRadialShapeCB.set("store",f);this.bgdRadialShapeCB.set("regExp",d.regstr_shape);this.bgdRadialShapeCB.set("value",h&&h.shape?h.shape:"circle");this.connect(this.bgdRadialShapeCB,"onChange",dojo.hitch(this,function(){h.shape=this.bgdRadialShapeCB.get("value");this._onFieldChanged()}));f=new m({values:["farthest-corner","farthest-side","closest-corner","closest-side"]});this.bgdRadialExtentCB.set("store",f);this.bgdRadialExtentCB.set("regExp",d.regstr_extent);
this.bgdRadialExtentCB.set("value",h&&h.extent?h.extent:"farthest-corner");this.connect(this.bgdRadialExtentCB,"onChange",dojo.hitch(this,function(){h.extent=this.bgdRadialExtentCB.get("value");this._onFieldChanged()}));this._initializeStops(h&&h.stops&&2<=h.stops.length?h.stops:[{color:"white",pos:"0%"},{color:"black",pos:"100%"}])},startup:function(){this.inherited(arguments);var a=this.bgddata&&this.bgddata.url?this.bgddata.url:"";this._filePicker.set("value",a);this._filePicker.owner=this;this.bgddata.url=
a;this.connect(this._filePicker,"onChange",dojo.hitch(this,function(){var a=this._filePicker.get("value");this.bgddata.url=a;this._onFieldChanged()}))},_updateBackgroundImageType:function(a){var b=this.domNode;if(!a||"none"!=a&&"url"!=a&&"linear"!=a&&"radial"!=a&&"other"!=a)a="emptystring";this.bgddata.type=a;this.bgdTypeSelect.set("value",a);var d=dojo.query(".bgdOptionsLabelRow",b),f=dojo.query(".bgdImageOptRow",b),c=dojo.query(".bgdGradOptRow",b),e=dojo.query(".bgdLinearOptRow",b),p=dojo.query(".bgdRadialOptRow",
b),b=dojo.query(".bgdOtherRow",b);"url"==a?(f.concat(d).forEach(function(a){dojo.removeClass(a,"dijitHidden")}),c.concat(b).forEach(function(a){dojo.addClass(a,"dijitHidden")})):"linear"==a?(c.concat(d).forEach(function(a){dojo.removeClass(a,"dijitHidden")}),f.concat(p).concat(b).forEach(function(a){dojo.addClass(a,"dijitHidden")})):"radial"==a?(c.concat(d).forEach(function(a){dojo.removeClass(a,"dijitHidden")}),f.concat(e).concat(b).forEach(function(a){dojo.addClass(a,"dijitHidden")})):"other"==
a?(b.forEach(function(a){dojo.removeClass(a,"dijitHidden")}),f.concat(c).concat(d).forEach(function(a){dojo.addClass(a,"dijitHidden")})):f.concat(c).concat(d).concat(b).forEach(function(a){dojo.addClass(a,"dijitHidden")})},_initializeStops:function(a){var b=this.langObj;a||(a=this.bgddata.stops);for(var f=this.bgdTypeSelect.get("value"),c=dojo.query(".bgdStopRow",this.domNode),e=c.length-1;0<e;e--){var p=c[e],g=dojo.query(".bgdColor",p),g=dijit.byNode(g[0]);g.destroyRecursive();g=dojo.query(".bgdPosition",
p);g=dijit.byNode(g[0]);g.destroyRecursive();dojo.destroy(p)}e=c[0];c=e.parentNode;p=e.nextSibling;for(e=0;e<a.length;e++){var k=a[e],h=dojo.create("tr",{className:"bgdGradOptRow bgdStopRow"});h.innerHTML=this.stopRowTemplate;"linear"!=f&&"radial"!=f&&dojo.addClass(h,"dijitHidden");c.insertBefore(h,p);dojo.parser.parse(h);dojo.query(".bdgStopLabel",h)[0].innerHTML=this.langObj.bgdStop+" #"+(e+1)+":";g=dojo.query(".bgdColor",h);g=dijit.byNode(g[0]);g.set("store",this._stops_store);g.set("regExp",d.regstr_stop_color);
g.set("value",k.color);this.connect(g,"onChange",dojo.hitch(this,function(a,b){this._onChangeColor(b,a,this._stops_action)},g));g=dojo.query(".bgdPosition",h);g=dijit.byNode(g[0]);g.set("store",this.stoppos_store);k="string"==typeof k.pos&&0<k.pos.length?k.pos:0==e?"0%":"100%";g.set("regExp",d.regstr_stop_pos);g.set("value",k);this.connect(g,"onChange",dojo.hitch(this,function(){this._updateDataStructureStops();this._onFieldChanged()}));g=dojo.query(".bgdPlusButton",h)[0];g=dijit.byNode(g);g.set("title",
b.bgdAddStop);this.connect(g,"onClick",dojo.hitch(this,function(a){var b=this.bgddata.stops[a];this.bgddata.stops.splice(a+1,0,{color:b.color,pos:b.pos});this._initializeStops()},e));k=dojo.query(".bgdMinusButton",h)[0];k=dijit.byNode(k);k.set("title",b.bgdRemoveStop);this.connect(k,"onClick",dojo.hitch(this,function(a){this.bgddata.stops.splice(a,1);this._initializeStops()},e));h=dojo.query(".bgdMinusButton",this.domNode);for(g=0;g<h.length;g++)k=h[g],k=dijit.byNode(k),2>=a.length?k.set("disabled",
!0):k.set("disabled",!1)}this._updateDataStructureStops()},_onFieldChanged:function(){this._updateDialogValidity();this._updateBackgroundPreview()},_setBaseLocationAttr:function(a){this._baseLocation=a;this._filePicker.set("baseLocation",a)},_updateDialogValidity:function(){var a=this.bgddata;if(a&&a.type){var b=this.domNode,a=a.type,d=[],f=!0;"url"==a?d=dojo.query(".bgdImageOptRow",b):"linear"==a?d=dojo.query(".bgdStopRow",b).concat(dojo.query(".bgdLinearOptRow",b)):"radial"==a&&(d=dojo.query(".bgdStopRow",
b).concat(dojo.query(".bgdRadialOptRow",b)));d.forEach(function(a){dojo.query("[widgetid]",a).forEach(function(a){"function"!=typeof a.isValid||a.isValid()||(f=!1)})});this.bdgValid=f}},_updateBackgroundPreview:function(){function a(a,b){b=c[b];"string"==typeof b&&0<b.length&&(f+=";"+a+":"+b)}var b=dojo.query(".bgdPreview",this.domNode)[0],f="",c=this.bgddata;a("background-color","backgroundColor");a("background-repeat","backgroundRepeat");a("background-position","backgroundPosition");a("background-size",
"backgroundSize");a("background-origin","backgroundOrigin");a("background-clip","backgroundClip");for(var e=d.buildBackgroundImage(this.bgddata),g=0;g<e.length;g++){var h=e[g];if(p.containsUrl(h)&&!p.isAbsolute(h)&&this.context){var m=p.getUrl(h),m=k.parse_url(m);(m=this.context.ctx.getFileManager().getImageUrl({path:m.host+(m.path||""),mount:m.scheme},!1))&&(h=w(this._baseLocation,m))}f+=";background-image:"+h}b.setAttribute("style",f);this.bgdOtherTA.set("value",e[e.length-1])},_updateDataStructureStops:function(){var a=
this.bgddata;a.stops=[];for(var b=dojo.query(".bgdStopRow",this.domNode),d=1;d<b.length;d++){var f=b[d],c=dojo.query(".bgdColor",f),c=dijit.byNode(c[0]),f=dojo.query(".bgdPosition",f),f=dijit.byNode(f[0]);a.stops.push({color:c.get("value"),pos:f.get("value")})}},_setValueAttr:function(a){a&&this._colorPickerTargetWidget.set("value",a)},_onChangeColor:function(a,b,d){if(a=d[a])if("_removevalue"==a?b.set("value",""):b.set("value",b._currentcolorvalue),"_colorpicker"==a){a=new davinci.ve.widgets.ColorPickerFlat({});
d=b.get("value");var f=this.isLeftToRight();this._colorPickerTargetWidget=b;davinci.ve.widgets.ColorPickerFlat.show(a,d,this,f)}b._currentcolorvalue=b.get("value");this.bgddata.backgroundColor=this.bgdColorCB.get("value");this._updateDataStructureStops();this._onFieldChanged()},okButton:function(){},cancelButton:function(){this.onClose()}});q.getCSSForWorkspaceURL=w;v.setObject("davinci.ve.widgets.BackgroundDialog",q);return q})},"davinci/ve/utils/CssUtils":function(){define(["dojo/_base/Color","davinci/ve/utils/URLRewrite"],
function(q,n){var h=[],g;for(g in q.named)"transparent"!=g&&h.push(g);h.sort(function(a,b){return 0==b.indexOf(a)?1:0==a.indexOf(b)?-1:a<b?-1:1});var e=[];h.forEach(function(a){e.push(a);a=q.named[a];a="#"+(16777216+(a[0]<<16)+(a[1]<<8)+a[2]).toString(16).slice(1);e.push(a)});var m=/^\-?(?:\d*\.\d+|\d+)$/,h="(?:";for(g=0;g<e.length;g+=2)0!=g&&(h+="|"),h+=e[g];h="(?:"+(h+")")+"|\\#(?:[0-9A-Fa-f]{6}|[0-9A-Fa-f]{3})|(?:rgb|hsl)\\s*\\(\\s*(?:(?:\\d*\\.\\d+|\\d+)%?)\\s*,\\s*(?:(?:\\d*\\.\\d+|\\d+)%?)\\s*,\\s*(?:(?:\\d*\\.\\d+|\\d+)%?)\\s*\\)|(?:rgba|hsla)\\s*\\(\\s*(?:(?:\\d*\\.\\d+|\\d+)%?)\\s*,\\s*(?:(?:\\d*\\.\\d+|\\d+)%?)\\s*,\\s*(?:(?:\\d*\\.\\d+|\\d+)%?)\\s*,\\s*(?:\\d*\\.\\d+|\\d+)\\s*\\))";
g="(?:"+h+"(?:\\s+(?:\\-?(?:\\d*\\.\\d+|\\d+)(?:in|cm|mm|pt|pc|px|%)|0))?)";var c=new RegExp("(?:\\s*("+h+")\\s*((?:\\-?(?:\\d*\\.\\d+|\\d+)(?:in|cm|mm|pt|pc|px|%)|0))?\\s*,?(.*))");g="("+g+"(?:\\s*,\\s*"+g+")*)";var k=/^\s*(url)\s*\(\s*(?:\'([^\']*)\'*|\"([^\"]*)\"|([^\'\"]*))\s*\)\s*$/,f=new RegExp("^\\s*((?:-moz-linear-gradient|-webkit-linear-gradient|-ms-linear-gradient|-o-linear-gradient|linear-gradient))\\s*\\(\\s*(?:(?:to\\s+((?:\\s*left\\s*|\\s*right\\s*|\\s*top\\s*|\\s*bottom\\s*){1,2})|((?:\\s*left\\s*|\\s*right\\s*|\\s*top\\s*|\\s*bottom\\s*){1,2})|((?:\\-?(?:\\d*\\.\\d+|\\d+)deg)))\\s*,\\s*)?\\s*"+
g+"\\s*\\)\\s*$"),d=new RegExp("^\\s*((?:-moz-radial-gradient|-webkit-radial-gradient|-ms-radial-gradient|-o-radial-gradient|radial-gradient))\\s*\\(\\s*(?:\\s*(?:\\s*(\\s*(?:(?:\\-?(?:\\d*\\.\\d+|\\d+)(?:in|cm|mm|pt|pc|px|%)|0)|(?:left|center|right|top|bottom))(?:\\s*(?:(?:\\-?(?:\\d*\\.\\d+|\\d+)(?:in|cm|mm|pt|pc|px|%)|0)|(?:left|center|right|top|bottom)))?)\\s*((?:\\-?(?:\\d*\\.\\d+|\\d+)deg))\\s*|\\s*(\\s*(?:(?:\\-?(?:\\d*\\.\\d+|\\d+)(?:in|cm|mm|pt|pc|px|%)|0)|(?:left|center|right|top|bottom))(?:\\s*(?:(?:\\-?(?:\\d*\\.\\d+|\\d+)(?:in|cm|mm|pt|pc|px|%)|0)|(?:left|center|right|top|bottom)))?)\\s*|\\s*((?:\\-?(?:\\d*\\.\\d+|\\d+)deg))\\s*)\\s*,\\s*)?\\s*(?:\\s*(?:\\s*(circle|ellipse)\\s*((?:(?:closest-side|farthest-side|closest-corner|farthest-corner|contain|cover)|(?:(?:\\-?(?:\\d*\\.\\d+|\\d+)(?:in|cm|mm|pt|pc|px|%)|0)(?:\\s+(?:\\-?(?:\\d*\\.\\d+|\\d+)(?:in|cm|mm|pt|pc|px|%)|0)\\s*)?)))\\s*|\\s*((?:(?:closest-side|farthest-side|closest-corner|farthest-corner|contain|cover)|(?:(?:\\-?(?:\\d*\\.\\d+|\\d+)(?:in|cm|mm|pt|pc|px|%)|0)(?:\\s+(?:\\-?(?:\\d*\\.\\d+|\\d+)(?:in|cm|mm|pt|pc|px|%)|0)\\s*)?)))\\s*(circle|ellipse)\\s*|\\s*(circle|ellipse)\\s*|\\s*((?:(?:closest-side|farthest-side|closest-corner|farthest-corner|contain|cover)|(?:(?:\\-?(?:\\d*\\.\\d+|\\d+)(?:in|cm|mm|pt|pc|px|%)|0)(?:\\s+(?:\\-?(?:\\d*\\.\\d+|\\d+)(?:in|cm|mm|pt|pc|px|%)|0)\\s*)?)))\\s*)\\s*,\\s*)?\\s*"+
g+"\\s*\\)\\s*$"),b=/(?:\s*((?:top|bottom|left|right|center|(?:\-?(?:\d*\.\d+|\d+)%?)))\s+((?:top|bottom|left|right|center|(?:\-?(?:\d*\.\d+|\d+)%?)))\s*)/;g="("+("(?:\\s*,\\s*"+("(?:"+("(?:color-stop\\s*\\(\\s*(?:\\-?(?:\\d*\\.\\d+|\\d+)%?)\\s*,\\s*"+h+"\\s*\\)\\s*)")+"|"+("(?:from\\s*\\(\\s*"+h+"\\s*\\)\\s*)")+"|"+("(?:to\\s*\\(\\s*"+h+"\\s*\\)\\s*)")+")")+"\\s*)")+"+)";var a=new RegExp("(?:\\s*,\\s*"+("(?:"+("(?:(color-stop)\\s*\\(\\s*((?:\\-?(?:\\d*\\.\\d+|\\d+)%?))\\s*,\\s*("+h+")\\s*\\)\\s*)")+
"|"+("(?:(from)\\s*\\(\\s*("+h+")\\s*\\)\\s*)")+"|"+("(?:(to)\\s*\\(\\s*("+h+")\\s*\\)\\s*)")+")")+"\\s*)(.*)"),p=new RegExp("(?:\\s*(-webkit-gradient)\\s*\\(\\s*(linear)\\s*(?:\\s*,\\s*((?:\\s*(?:top|bottom|left|right|center|(?:\\-?(?:\\d*\\.\\d+|\\d+)%?))\\s+(?:top|bottom|left|right|center|(?:\\-?(?:\\d*\\.\\d+|\\d+)%?))\\s*))\\s*)(?:\\s*,\\s*((?:\\s*(?:top|bottom|left|right|center|(?:\\-?(?:\\d*\\.\\d+|\\d+)%?))\\s+(?:top|bottom|left|right|center|(?:\\-?(?:\\d*\\.\\d+|\\d+)%?))\\s*))\\s*)"+g+"\\s*\\)\\s*)"),
r=new RegExp("(?:\\s*(-webkit-gradient)\\s*\\(\\s*(radial)\\s*(?:(?:\\s*,\\s*((?:\\s*(?:top|bottom|left|right|center|(?:\\-?(?:\\d*\\.\\d+|\\d+)%?))\\s+(?:top|bottom|left|right|center|(?:\\-?(?:\\d*\\.\\d+|\\d+)%?))\\s*))\\s*)(?:\\s*,\\s*((?:\\d*\\.\\d+|\\d+))\\s*)(?:\\s*,\\s*((?:\\s*(?:top|bottom|left|right|center|(?:\\-?(?:\\d*\\.\\d+|\\d+)%?))\\s+(?:top|bottom|left|right|center|(?:\\-?(?:\\d*\\.\\d+|\\d+)%?))\\s*))\\s*)(?:\\s*,\\s*((?:\\d*\\.\\d+|\\d+))\\s*)?)"+g+"\\s*\\)\\s*)"),v=function(a){var b=
[];do{var d=a.match(c);d&&(b.push({color:d[1],pos:d[2]}),a=d[3])}while(d);return b},w=function(b){var d=[],f=[],c,e;do{var p=b.match(a);p&&(p[4]?c={color:p[5]}:p[6]?e={color:p[7]}:(b=p[2].match(m)?100*p[2]+"%":p[2],f.push({color:p[3],pos:b})),b=p[8])}while(p);c&&d.push(c);for(c=0;c<f.length;c++)d.push(f[c]);e&&d.push(e);return d};return{regstr_posn:"^\\s*\\s*(?:(?:\\-?(?:\\d*\\.\\d+|\\d+)(?:in|cm|mm|pt|pc|px|%)|0)|(?:left|center|right|top|bottom))(?:\\s*(?:(?:\\-?(?:\\d*\\.\\d+|\\d+)(?:in|cm|mm|pt|pc|px|%)|0)|(?:left|center|right|top|bottom)))?\\s*$",
regstr_len_or_pct:"^\\s*(?:\\-?(?:\\d*\\.\\d+|\\d+)(?:in|cm|mm|pt|pc|px|%)|0)\\s*$",regstr_angle:"^\\s*(?:to\\s+((?:\\s*left\\s*|\\s*right\\s*|\\s*top\\s*|\\s*bottom\\s*){1,2})|((?:\\-?(?:\\d*\\.\\d+|\\d+)deg)))\\s*$",regstr_shape:"^\\s*circle|ellipse\\s*$",regstr_extent:"^\\s*(?:(?:closest-side|farthest-side|closest-corner|farthest-corner|contain|cover)|(?:(?:\\-?(?:\\d*\\.\\d+|\\d+)(?:in|cm|mm|pt|pc|px|%)|0)(?:\\s+(?:\\-?(?:\\d*\\.\\d+|\\d+)(?:in|cm|mm|pt|pc|px|%)|0)\\s*)?))\\s*$",regstr_stop_color:"\\s*"+
h+"\\s*",regstr_stop_pos:"\\s*(?:\\-?(?:\\d*\\.\\d+|\\d+)(?:in|cm|mm|pt|pc|px|%)|0)\\s*",parseBackgroundImage:function(a){var c={},e=a.match(/^\s*$/);if(e)c.type="emptystring";else if(e=a.match(/^\s*none\s*$/))c.type="none";else if(e=a.match(k))c.type="url",c.func=e[1],c.url=e[2]?e[2]:e[3]?e[3]:e[4];else if(e=a.match(p)){c.type="linear";c.func=e[1];c.webkitGradType=e[2];c.webKitPosn1=e[3];c.webKitPosn2=e[4];var g=c.webKitPosn1,h=c.webKitPosn2;a=0<=g.indexOf("left");var m=0<=g.indexOf("top"),n=0<=
g.indexOf("right"),g=0<=g.indexOf("bottom"),q=0<=h.indexOf("left"),x=0<=h.indexOf("top"),D=0<=h.indexOf("right"),h=0<=h.indexOf("bottom");m&&h&&(a&&q||n&&D)?c.angle="to bottom":g&&x&&(a&&q||n&&D)?c.angle="to top":a&&D&&(m&&x||g&&h)?c.angle="to right":q&&n&&(m&&x||g&&h)?c.angle="to left":a&&m&&D&&h?c.angle="to bottom right":a&&g&&D&&x?c.angle="to top right":n&&m&&q&&h?c.angle="to bottom left":n&&g&&q&&x&&(c.angle="to top left");c.stops=w(e[5])}else if(e=a.match(r))c.type="radial",c.func=e[1],c.webkitGradType=
e[2],c.webKitPosn1=e[3],c.webKitRadius1=e[4],c.webKitPosn2=e[5],c.webKitRadius2=e[6],c.shape=c.webKitPosn1==c.webKitPosn2?"circle":"ellipse",m=c.webKitPosn1,(a=m.match(b))?(m=a[1],m.match(/^\d+$/)&&(m+="px"),a=a[2],a.match(/^\d+$/)&&(a+="px"),a=m+" "+a):a=m,c.posn=a,c.extent=c.webKitRadius2?c.webKitRadius2+"px":c.webKitRadius1?c.webKitRadius1+"px":"farthest-corner",c.stops=w(e[7]);else if(e=a.match(f))c.type="linear",c.func=e[1],c.angle=e[2]?"to "+e[2]:e[3]?"to "+e[3]:e[4],c.stops=v(e[5]);else if(e=
a.match(d))c.type="radial",c.func=e[1],c.posn=e[2]?e[2]:e[4],c.angle=e[3]?e[3]:e[5],c.shape=e[6]?e[6]:e[9]?e[9]:e[10],c.extent=e[7]?e[7]:e[8]?e[8]:e[11],c.stops=v(e[12]);e||(c.type="unknown");return c},buildBackgroundImage:function(a){var b=[];if("emptystring"==a.type)b.push("");else if("none"==a.type)b.push("none");else if("url"==a.type){if("string"==typeof a.url&&0<a.url.length){var d=n.getUrl(a.url);d||(d=n.stripQuotes(a.url));b.push("url('"+d+"')")}}else if("linear"==a.type||"radial"==a.type){for(var d=
"",c,f,e=[],p=0;p<a.stops.length;p++){var g=a.stops[p],k="string"==typeof g.pos&&0<g.pos.length?g.pos:"";0<p&&(d+=", ");d+=g.color;if(0<p&&p<a.stops.length-1||0==p&&0!=k.length&&"0%"!=k&&0!=k-0||p==a.stops.length-1&&0!=k.length&&"100%"!=k&&1!=k-0)d+=" "+k;0!=p||0!=k.length&&"0%"!=k&&0!=k-0?p!=a.stops.length-1||0!=k.length&&"100%"!=k&&1!=k-0?e.push("color-stop("+k+", "+g.color+")"):f="to("+g.color+")":c="from("+g.color+")"}g="";k=!1;c&&(g+=c,k=!0);f&&(k&&(g+=", "),g+=f,k=!0);for(p=0;p<e.length;p++)k&&
(g+=", "),g+=e[p],k=!0;if("linear"==a.type){c="(";var h=a.angle;(f="string"==typeof h&&0<h.length?h.match(/^\s*(?:to\s+((?:\s*left\s*|\s*right\s*|\s*top\s*|\s*bottom\s*){1,2})|((?:\-?(?:\d*\.\d+|\d+)deg)))\s*$/):null)||(h="to bottom");"to bottom"!=h&&(c+=h+",");a="(linear,";e=0<=h.indexOf("left");p=0<=h.indexOf("top");k=0<=h.indexOf("right");h=0<=h.indexOf("bottom");e&&p?a+=" right bottom, left top, ":e&&h?a+=" right top, left bottom, ":k&&p?a+=" left bottom, right top, ":k&&h?a+=" left top, right bottom, ":
e?a+=" right top, left top, ":k?a+=" left top, right top, ":p?a+=" left bottom, left top, ":h?a+=" left top, left bottom, ":(e=180*(90-parseFloat(f[4]))/Math.PI,f=Math.cos(e),e=Math.sin(e),0<=f&&0<=e?(a+="0% 100%,",a=Math.abs(f)>Math.abs(e)?a+("100% "+100*(1-Math.abs(e)/Math.abs(f))+"%"):a+(Math.abs(f)/Math.abs(e)*100+"% 100%")):0<=f&&0>e?(a+="0% 0%,",a=Math.abs(f)>Math.abs(e)?a+("100% "+Math.abs(-e)/Math.abs(f)*100+"%"):a+(Math.abs(f)/Math.abs(e)*100+"% 100%")):0>f&&0<=e?(a+="100% 100%,",a=Math.abs(f)>
Math.abs(e)?a+("0% "+100*(1-Math.abs(e)/Math.abs(f))+"%"):a+(Math.abs(f)/Math.abs(e)*100+"% 100%")):(a+="100% 0%,",a=Math.abs(f)>Math.abs(e)?a+("0% "+Math.abs(-e)/Math.abs(f)*100+"%"):a+(Math.abs(f)/Math.abs(e)*100+"% 100%")),a+=", ");c+=d+")";b.push("-webkit-gradient"+(a+(g+")")));b.push("-o-linear-gradient"+c);b.push("-ms-linear-gradient"+c);b.push("-moz-linear-gradient"+c);b.push("-webkit-linear-gradient"+c);b.push("linear-gradient"+c)}else c="(","center"!=a.posn&&"center center"!=a.posn&&(c+=
a.posn+", "),"circle"!=a.shape&&(c+=a.shape+", "),"farthest-corner"!=a.extent&&(c+=a.extent+", "),c+=d+")",b.push("-webkit-gradient(radial, center center, 10, center center, "+(g+")")),b.push("-o-radial-gradient"+c),b.push("-ms-radial-gradient"+c),b.push("-moz-radial-gradient"+c),b.push("-webkit-radial-gradient"+c),b.push("radial-gradient"+c)}return b}}})},"davinci/ui/widgets/FileFieldDialog":function(){define("dojo/_base/declare dijit/_WidgetBase dijit/_TemplatedMixin dijit/_WidgetsInTemplateMixin davinci/Workbench davinci/ui/widgets/OpenFile dijit/form/Button davinci/model/Path davinci/lang/ui dijit/lang/_common dojo/text!./templates/FileFieldDialog.html dijit/form/TextBox xide/views/_PanelDialog xide/utils xide/types xfile/views/FileGrid xfile/FileActions".split(" "),
function(q,n,h,g,e,m,c,k,f,d,b,a,p,r,v,w,x){return q("davinci.ui.widgets.FileFieldDialog",[n,h,g],{templateString:b,widgetsInTemplate:!0,_fileSelectionDialog:null,_showFileSelectionDialog:function(){var a=this;this.ctx=e.ctx;x.createFilePicker(this,"",function(b){var d=r.buildPath(b.mount,b.path,!1);a.ctx.getFileManager().getImageUrl(b,!0,{oriPath:d});a.textField.set("value",d);a._onChange()},f.selectFile,null,{mount:"workspace_user",selection:"."},null,w,{micromatch:"(*.png)|(*.jpg)|!(*.*)"})},_setBaseLocationAttr:function(a){this._baseLocation=
a},_setValueAttr:function(a){this.value!=a&&(this.value=a,this.textField.set("value",a))},_setDisabledAttr:function(a){this.textField.set("disabled",a);this.button.set("disabled",a);this.inherited(arguments)},_setIntermediateChangesAttr:function(a){this.textField.set("intermediateChanges",a);this.inherited(arguments)},_onChange:function(){var a=this.textField.get("value");this.value!=a&&(this.value=a,this.textField.set("value",this.value),this.onChange(a))},onChange:function(a){},_getValueAttr:function(){return this.textField.get("value")}})})},
"davinci/ui/widgets/OpenFile":function(){define("dojo/_base/declare dijit/_Templated dijit/_Widget davinci/library system/resource davinci/workbench/Preferences davinci/Runtime davinci/Workbench dijit/Menu dijit/MenuItem davinci/model/Path dijit/form/DropDownButton davinci/lang/ui dijit/lang/_common dijit/form/Button dijit/form/TextBox dijit/form/RadioButton dijit/layout/ContentPane dijit/Tree".split(" "),function(q,n,h,g,e,m,c,k,f,d,b,a,p,r){return q("davinci.ui.widgets.OpenFile",[h,n],{widgetsInTemplate:!0,
fileDialogFileName:null,fileDialogParentFolder:null,postMixInProperties:function(){dojo.mixin(this,p);dojo.mixin(this,r);this.inherited(arguments)},postCreate:function(){this.inherited(arguments);this.fileTree.watch("selectedItem",dojo.hitch(this,this._updateFields));this._value||this._setValueAttr(this._getForcedRootAttr())},startup:function(){this.fileTree.startup()},_setValueAttr:function(a){a!=this._value&&(this._value=a,this.fileTree.set("selectedItems",[a]))},_getForcedRootAttr:function(){return this._forcedRoot||
e.findResource(k.getProject())},_setForcedRootAttr:function(a){this._forcedRoot=a},_updateFields:function(){var a=this.fileTree.get("selectedItems"),a=null!=a&&0<a.length?a[0]:null;dojo.attr(this._okButton,"disabled",!0);null!=a&&"File"==a.elementType&&dojo.attr(this._okButton,"disabled",!1)},_okButton:function(){this.value=this.fileTree.get("selectedItems")[0]},_onDblClick:function(a){this._okButton();this.onExecute()},_onKeyPress:function(a){a.which==dojo.keys.ENTER&&(this._okButton(),this.onExecute())},
_getValueAttr:function(){return this.value},_cancelButton:function(){this.onClose()},resize:function(a){this.contentpane.resize(a)},onExecute:function(){},onClose:function(){}})})},"davinci/lang/ui":function(){define([],function(){return{dontShowAgain:"Don't show again",selectFile:"Select a file",openFile:"Open File",aboutMaqetta:"About Maqetta",productVersion:"Version: ${0}",productDate:"Date: ${0}",build:"Build: ${0}",library:"Library",version:"Version",include:"Include",source:"Source",baseLocation:"Base Location",
invalidDownloadFileName:"File name may only contain letters, numbers, \x26#8216;_\x26#8216;, and \x26#8216;.\x26#8216;.",selectedFiles:"Selected Files",noFilesSelected:"No files selected!",downloadButtonLabel:"Download",themeAlreadyExists:"Theme already Exists!",invalidThemeName:"Invalid theme name",errorCreatingTheme:"Error creating theme: ",creatingTheme:"Creating theme",noUserThemes:"No user themes found in workspace. Please create a new theme before editing.",themeSetsDialog:"Manage theme sets",
renameThemeSet:"Rename theme set",themeSets:"Theme sets:",currentlySelectedThemeSet:"Currently selected theme set:",themeSetName:"Name:",desktopTheme:"Dojo desktop 1.7 theme:",mobileTheme:"Dojo mobile 1.7 theme:",android:"Android:",blackberry:"Blackberry:",ipad:"iPad:",iphone:"iPhone:",other:"Other:",selectTheme:"Select theme",themeSet:"Theme set:",themeVersionMessage:"Theme version does not match workspace version this could produce unexpected results. We suggest recreating the custom theme using the current version of Maqetta and deleting the existing theme.",
addThemeSet:"Add theme set",deleteThemeSet:"Delete theme set",workspaceLocation:"Workspace Location",savingReadonlyFile:"This file is a read-only file. Please save it to a writeable location.",create:"Create",open:"Open",save:"Save",select:"Select",update:"Update",unknown:"unknown",fileName:"File name",folderName:"Folder name",parentFolder:"Parent folder: ",newFolderLabel:"New folder",cancelButtonLabel:"Cancel",newFolderName:"Name:",createFolder:"Create Folder",createNewFile:"Create New File",createMobileApplication:"Create a Mobile Application",
createDesktopApplication:"Create a Desktop Application",createSketchHiFi:"Create a Sketch (high-fidelity)",createSketchLoFi:"Create a Sketch (low-fidelity)",createNewCSSFile:"Create New CSS File",createNewJSFile:"Create New JavaScript File",createNewFolder:"Create New Folder",saveFileAs:"Save File As",downloadFile:"Download",selectFiles:"Select Files...",selectZip:"Select ZIP file...",upload:"Upload",addFiles:"Upload",uploading:"Uploading...",completed:"completed: ${0} \n",done:"Done",explodeZipWarning:"Warning: Contents of .zip files will overwrite any conflicting files in your workspace",
mustEnterFileName:"You must enter a file name.",cannotSelect:"Cannot select ${0}. It is a folder.",fileAlreadyExistsOverwrite:"File ${0} already exists. OK to overwrite?",cannotCreate:"Cannot create ${0}. It already Exists.",fileNameSlashCharacter:"File names cannot contain a slash character (/). Your file name is: ${0}",doesNotHaveExtension:"The name ${0} does not have an extension (e.g., .html, .css or .js) and will be treated as a plain text file. OK to proceed?",areYouSureDelete:"Are you sure you want to delete ${0}?",
areYouSureDeleteProject:"Are you sure you want to delete project ${0}?",noResourcesSelected:"No resources are currently selected.",optimizeOption:"Use Dojo Web Builder (experimental)",downloadFullSource:"Download uncompressed source for selected libraries (if available)",selectAll:"All",selectNone:"None",themeToClone:"Theme to clone",newName:"New Name",selectTheme:"Select a Theme",newProject:"New Project",renameProjectDialogTitle:"Rename Project To...",deleteProjectButtonTitle:"Delete Project",renameProjectButtonTitle:"Rename Project...",
deleteOnlyProjectError:"You can't delete the only project in your workspace!",newFileShowFiles:"Show file picker",newFileHideFiles:"Hide file picker",root:"(root)",nhfoDevice:"Device:",nhfoDeviceTooltip:"Select an initial mobile device",nhfoThemeButtonLabel:"Theme...",nhfoThemeButtonTitle:"Select themes or theme set for new HTML file",renameNewLabel:"Name:",renameButtonLabel:"Rename",renameDialogTitle:"Rename To...",createProject:"New project",createProjectMenuItem:"New project...",deleteProjectMenuItem:"Delete this project...",
renameProjectMenuItem:"Rename this project...",saveAsProjectTemplateMenuItem:"Save as project template...",manageProjectTemplatesMenuItem:"Manage project templates...",modifyLibrariesMenuItem:"Modify libraries...",modifyLibraries:"Modify libraries",projectColon:"Project:",ProjectMenu:"Project menu",newProjectName:"Name:",newProjectTemplate:"Template:",newProjectUseProjectTemplate:"Use project template",newProjectCloneExistingProject:"Copy files from current project into new project",newProjectEclipseSupport:"New project should be Eclipse-compatible",
newProjectNameExists:"A project with this name already exists",saveAsProjectTemplate:"Save as project template",newProjectTemplateName:"Project template name:",newProjectTemplateShareLabel:"Share with everyone",newProjectTemplateOverwrite:"Project template {0} already exists. OK to overwrite?",newProjectTemplateCreationSuccess:"Project template {0} has been saved",newProjectTemplateCreationFailure:"Error: Project template {0} save operation failed",newProjectTemplateCancelled:"Operation cancelled",
manageProjectTemplates:"Manage project templates",ManageProjectTemplatesHeaderName:"Project template name",ManageProjectTemplatesHeaderShared:"Share with everyone?",ManageProjectTemplatesHeaderCreatedBy:"Created by",ManageProjectTemplatesHeaderCreatedOn:"Created on",ManageProjectTemplatesHeaderLastModified:"Last updated",ManageProjectTemplatesNoTemplates:"You have no project templates.",ManageProjectTemplatesDuplicateNames:"Invalid entries - two project templates have the same name",ManageProjectTemplateAboutToOccur:"The following actions are about to occur:",
ManageProjectTemplateDeletions:"project template deletions",ManageProjectTemplateModifications:"project template modifications",ManageProjectTemplateOKToProceed:"OK to proceed?",ManageProjectTemplatesInitializing:"Initializing...",modify:"Modify",User:"Account",currentProject:"Current Project:",selectProject:"Select a Project:",NoteOperationNotUndoable:"Note: this operation is not undoable."}})},"davinci/ve/widgets/WidgetToolBar":function(){define("dojo/_base/declare dijit/_Templated dijit/_Widget davinci/Runtime davinci/workbench/ViewLite davinci/ve/commands/ModifyCommand dijit/form/ComboBox dijit/form/ValidationTextBox dijit/form/TextBox dojo/store/Memory davinci/lang/ve dijit/lang/_common davinci/ve/widget dojo/text!./templates/WidgetToolBar.html".split(" "),
function(q,n,h,g,e,m,c,k,f,d,b,a,p,r){return q("davinci.ve.widgets.WidgetToolBar",[e,h,n],{templateString:r,widgetsInTemplate:!0,descNode:null,idTextBox:null,classComboBox:null,blockGroupComboBox:null,widgetDescStart:"",widgetDescUnselectEnd:"",_oldIDName:null,_oldClassName:null,_oldBlockGroup:null,veNLS:b,cssRules:null,postCreate:function(){this.idTextBox.validator=dojo.hitch(this,function(a,d){this.invalidMessage=null;return a&&this._widget&&!this.changing?(a=p.byId(a))&&a!==this._widget?(this.invalidMessage=
b.idAlreadyUsed,!1):!0:!0});dojo.subscribe("/davinci/ui/widget/replaced",dojo.hitch(this,this._widgetReplaced));var a=this;this.subscribe("CSSRulesUpdated",function(b){a.cssRules=b.names;a.onWidgetSelectionChange()})},initialize:function(){if((this._editor=g.currentEditor)&&this._editor.visualEditor&&this._editor.visualEditor.context){var a=this._editor.visualEditor.context.getSelection();this._widget=0==a.length?null:a[0]}else this._widget=null;this.onWidgetSelectionChange()},cssSelect:null,startup:function(){this.inherited(arguments);
if(!this.cssSelect){this.cssSelect=$(this.cssClasses).selectize({delimiter:",",persist:!0,inputClass:"selectize-input form-control input-transparent",plugins:["restore_on_backspace"],createOnBlur:!0,dropdownParent:"body",create:function(a){return{value:a,text:a}}}).data().selectize;var a=this;this.cssSelect.on("change",function(){var b=a.cssSelect.getValue();if(a._widget&&!a.changing&&(a.context&&a.context.blockChange(!1),b=b.split(",").join(" "),b!==a._oldClassName)){a._oldClassName=b;var d={};d["class"]=
b;b=new davinci.ve.commands.ModifyCommand(a._widget,d,null);dojo.publish("/davinci/ui/widgetPropertiesChanges",[{source:a._editor.editor_id,command:b}])}})}},onEditorSelected:function(){this.initialize();this.domNode.style.display=this._editor&&"davinci.ve.HTMLPageEditor"==this._editor.editorID?"block":"none"},_widgetReplaced:function(a,b){this._widget===b&&(this._widget=a,this.onWidgetSelectionChange())},onWidgetSelectionChangeBak:function(){var a="";if(this._widget){a=p.getLabel(this._widget);this.context=
this._widget.getContext();this.classComboBox.set("disabled",!1);this.idTextBox.attr("disabled",!1);this.changing=!0;this._oldBlockGroup=this._oldClassName=this._oldIDName=null;dojo.addClass(this.domNode,"propertiesSelection");this.descNode.innerHTML=a;if(this._editor&&"davinci.ve.PageEditor"===this._editor.declaredClass&&(a=this._widget._srcElement)){var c=[],f=this._widget.getContext().getModel().getDocumentElement();if(f){var e={visit:function(a){"HTMLElement"==a.elementType&&"body"!=a.tag&&"html"!=
a.tag&&(a=a.getAttribute("class"))&&(a=dojo.trim(a).split(" "),dojo.forEach(a,dojo.hitch(this,function(a){-1==dojo.indexOf(this.classes,a)&&this.classes.push(a)})))},classes:[]};f.visit(e);dojo.forEach(e.classes,function(a){c.push({name:a})})}this.cssRules&&_.each(this.cssRules,function(a){_.find(c,{name:a})||c.push({name:a})});f=new d({data:c});this.classComboBox.set("store",f);a=(a=a.getAttribute("class"))&&dojo.trim(a)||"";this.cssSelect&&(_.each(c,function(a){this.cssSelect.addOption({value:a.name,
text:a.name})},this),this.cssSelect.setValue(a.split(" "),!0));this.classComboBox.set("value",a);this._oldClassName=a;this._oldIDName=a=(a=this._widget.getId())&&dojo.trim(a)||"";this.idTextBox.attr("value",a);this._widget.domNode&&this._widget.domNode&&((a=this._widget.domNode.blockGroup)||(a=this._widget.domNode.getAttribute("blockGroup")),this._oldBlockGroup=a)}this.changing=!1}else this.descNode.innerHTML=b.noSelection,dojo.removeClass(this.domNode,"propertiesSelection"),this.context=null,this.classComboBox.set("value",
""),this.classComboBox.set("disabled",!0),this.idTextBox.attr("value",""),this.idTextBox.attr("disabled",!0)},onWidgetSelectionChange:function(){var a="";if(this._widget){a=p.getLabel(this._widget);this.context=this._widget.getContext();this.idTextBox.attr("disabled",!1);this.cssSelect&&this.cssSelect.enable();this.changing=!0;this._oldBlockGroup=this._oldClassName=this._oldIDName=null;dojo.addClass(this.domNode,"propertiesSelection");this.descNode.innerHTML=a;if(this._editor&&"davinci.ve.PageEditor"===
this._editor.declaredClass&&(a=this._widget._srcElement)){var d=[],c=this._widget.getContext().getModel().getDocumentElement();if(c){var f={visit:function(a){"HTMLElement"==a.elementType&&"body"!=a.tag&&"html"!=a.tag&&(a=a.getAttribute("class"))&&(a=dojo.trim(a).split(" "),dojo.forEach(a,dojo.hitch(this,function(a){-1==dojo.indexOf(this.classes,a)&&this.classes.push(a)})))},classes:[]};c.visit(f);dojo.forEach(f.classes,function(a){d.push({name:a})})}this.cssRules&&_.each(this.cssRules,function(a){_.find(d,
{name:a})||d.push({name:a})});a=(a=a.getAttribute("class"))&&dojo.trim(a)||"";this.cssSelect&&(_.each(d,function(a){this.cssSelect.addOption({value:a.name,text:a.name})},this),this.cssSelect.setValue(a.split(" "),!0));this._oldClassName=a;this._oldIDName=a=(a=this._widget.getId())&&dojo.trim(a)||"";this.idTextBox.attr("value",a);this._widget.domNode&&this._widget.domNode&&((a=this._widget.domNode.blockGroup)||(a=this._widget.domNode.getAttribute("blockGroup")),this._oldBlockGroup=a)}this.changing=
!1}else this.descNode.innerHTML=b.noSelection,dojo.removeClass(this.domNode,"propertiesSelection"),this.context=null,this.cssSelect&&this.cssSelect.disable(),this.cssSelect&&this.cssSelect.setValue([]),this.idTextBox.attr("value",""),this.idTextBox.attr("disabled",!0)},_onChangeIDAttribute:function(){if(this._widget&&!this.changing){var a=this.idTextBox;if(a&&a.isValid()&&(this.context&&this.context.blockChange(!1),a=a.attr("value"),a!==this._oldIDName)){this._oldIDName=a;var b={};b.id=a;a=new m(this._widget,
b,null);dojo.publish("/davinci/ui/widgetPropertiesChanges",[{source:this._editor.editor_id,command:a}])}}},_onChangeClassAttribute:function(){if(this._widget&&!this.changing){var a=this.classComboBox;if(a&&(this.context&&this.context.blockChange(!1),a=a.attr("value"),a!==this._oldClassName)){this._oldClassName=a;var b={};b["class"]=a;a=new davinci.ve.commands.ModifyCommand(this._widget,b,null);dojo.publish("/davinci/ui/widgetPropertiesChanges",[{source:this._editor.editor_id,command:a}])}}},_onChangeBlockGroupAttribute:function(){if(this._widget&&
!this.changing){var a=this.blockGroupComboBox;if(a&&(this.context&&this.context.blockChange(!1),a=a.attr("value"),a!==this._oldBlockGroup)){this._oldBlockGroup=a;var b={};b.blockGroup=a;a=new davinci.ve.commands.ModifyCommand(this._widget,b,null);this.publish("/davinci/ui/widgetPropertiesChanges",[{source:this._editor.editor_id,command:a}])}}},_onFieldFocus:function(){this.context&&this.context.blockChange(!0)},_onFieldBlur:function(){this.context&&this.context.blockChange(!1)},_onKeyPress:function(a){a.keyCode==
dojo.keys.ENTER&&this._onChangeIDAttribute()}})})},"davinci/workbench/ViewLite":function(){define(["dojo/_base/declare","./WidgetLite","../ve/States"],function(q,n){return q("davinci.workbench.ViewLite",[n],{_editor:null,_widget:null,_subWidget:null,constructor:function(h,g){this.subscriptions=[];this.publishing={};this.subscribe("/davinci/ui/editorSelected",dojo.hitch(this,this._editorSelected));this.subscribe("/davinci/ui/widgetSelected",dojo.hitch(this,this._widgetSelectionChanged))},_widgetSelectionChanged:function(h){if(this._editor)if(h.selection){var g=
h.selection[0];if(g&&this._widget==g&&this._subwidget==g.subwidget)return!1;this._subwidget=(this._widget=g)&&g.subwidget;if(this.onWidgetSelectionChange)this.onWidgetSelectionChange(h)}else console.error("have no selection")},_editorSelected:function(h){this._editor=h.editor;if(this.onEditorSelected)this.onEditorSelected(this._editor)},_subscribe:function(h,g){this.subscriptions.push(dojo.subscribe(h,this,g))},publish:function(h,g){this.publishing[h]=!0;try{dojo.publish(h,g)}catch(e){console.error(e)}delete this.publishing[h]},
destroy:function(){dojo.forEach(this.subscriptions,dojo.unsubscribe);delete this.subscriptions;this._destroyHandles()}})})},"dojo/store/Memory":function(){define(["../_base/declare","./util/QueryResults","./util/SimpleQueryEngine"],function(q,n,h){return q("dojo.store.Memory",null,{constructor:function(g){for(var e in g)this[e]=g[e];this.setData(this.data||[])},data:null,idProperty:"id",index:null,queryEngine:h,get:function(g){return this.data[this.index[g]]},getIdentity:function(g){return g[this.idProperty]},
put:function(g,e){var h=this.data,c=this.index,k=this.idProperty,k=g[k]=e&&"id"in e?e.id:k in g?g[k]:Math.random();if(k in c){if(e&&!1===e.overwrite)throw Error("Object already exists");h[c[k]]=g}else c[k]=h.push(g)-1;return k},add:function(g,e){(e=e||{}).overwrite=!1;return this.put(g,e)},remove:function(g){var e=this.index,h=this.data;if(g in e)return h.splice(e[g],1),this.setData(h),!0},query:function(g,e){return n(this.queryEngine(g,e)(this.data))},setData:function(g){g.items?(this.idProperty=
g.identifier,g=this.data=g.items):this.data=g;this.index={};for(var e=0,h=g.length;e<h;e++)this.index[g[e][this.idProperty]]=e}})})},"dojo/store/util/QueryResults":function(){define(["../../_base/array","../../_base/lang","../../when"],function(q,n,h){var g=function(e){function m(c){e[c]||(e[c]=function(){var k=arguments;return h(e,function(f){Array.prototype.unshift.call(k,f);return g(q[c].apply(q,k))})})}if(!e)return e;e.then&&(e=n.delegate(e));m("forEach");m("filter");m("map");e.total||(e.total=
h(e,function(c){return c.length}));return e};n.setObject("dojo.store.util.QueryResults",g);return g})},"dojo/store/util/SimpleQueryEngine":function(){define(["../../_base/array"],function(q){return function(n,h){function g(e){e=q.filter(e,n);var c=h&&h.sort;c&&e.sort("function"==typeof c?c:function(f,d){for(var b,a=0;b=c[a];a++){var e=f[b.attribute],g=d[b.attribute];if(e!=g)return!!b.descending==(null==e||e>g)?-1:1}return 0});if(h&&(h.start||h.count)){var g=e.length;e=e.slice(h.start||0,(h.start||
0)+(h.count||Infinity));e.total=g}return e}switch(typeof n){default:throw Error("Can not query with a "+typeof n);case "object":case "undefined":var e=n;n=function(g){for(var c in e){var k=e[c];if(k&&k.test){if(!k.test(g[c],g))return!1}else if(k!=g[c])return!1}return!0};break;case "string":if(!this[n])throw Error("No filter function "+n+" was found in store");n=this[n];case "function":}g.matches=n;return g}})},"davinci/ve/widgets/Cascade":function(){define("dojo/_base/declare ../../workbench/WidgetLite ../../workbench/Preferences ../../Workbench ../../html/CSSModel ../../library ../../Theme ../../html/CSSRule ../States davinci/lang/ve/ve system/resource".split(" "),
function(q,n,h,g,e,m,c,k,f,d,b){q=q("davinci.ve.widgets.Cascade",[n],{target:null,targetField:null,toggleClasses:null,_regex_combinators:/[\s\~\+\>]+/,_regex_not_pseudoclass:/(.*)\:not\((.*)\)(.*)/,_regex_pseudoelement:/(.*)(\:\:[^\:\.\#\[]*)(.*)/,_regex_id:/(.*)(\#[^\:\.\#\[]*)(.*)/,_regex_class:/(.*)(\.[^\:\.\#\[]*)(.*)/,_regex_attribute:/(.*)(\[[^\]]*\])(.*)/,_regex_pseudoclass:/(.*)(\:[^\:\.\#\[]*)(.*)/,_regex_univeral:/(.*)(\*[^\:\.\#\[]*)(.*)/,delegate:null,constructor:function(a,b){this.subscriptions=
[];this.publishing={};this._radioGroupName="davinci_ve_widgets_Cascade"+davinci.ve.widgets.Cascade.__id++;this._handles=[];this._values=[];this.inherited(arguments)},buildRendering:function(){this.domNode=dojo.doc.createElement("div");this.container=dojo.doc.createElement("div");dojo.addClass(this.container,"showCascade");this.domNode.appendChild(this.container);this.topDiv=dojo.create("div",{"class":"cascadeTopDiv"},this.container);this.cascadeTableDiv=dojo.create("div",{"class":"cascadeTableDiv widget"},
this.container);dojo.removeClass(this.container,"showAllValues");dojo.isArray(this.target)||(this.target=[this.target]);dojo.addClass(this.domNode,"CascadeTop");this.inherited(arguments)},startup:function(){var a=dijit.byId(this.targetField);if(a)a._cascade=this,this._getFieldValue=function(){return a.get("value")},this._setFieldValue=function(b,d){a.set&&(this._value=b||"",this._loc=d,a._setBaseLocationAttr&&a.set("baseLocation",d&&d.getPath?d.getPath():null),a.set("value",this._value,!0))},dojo.connect(a,
"onChange",this,"_onFieldChange"),dojo.connect(a,"onFocus",this,"_onFieldFocus"),dojo.connect(a,"onBlur",this,"_onFieldBlur");else{var b=dojo.byId(this.targetField);this._getFieldValue=function(){return dojo.attr(b,"value")};this._setFieldValue=function(a,d){this._value=a||"";this._loc=d;dojo.attr(b,"value",this._value)};dojo.connect(b,"onchange",this,"_onFieldChange",!0);dojo.connect(b,"onfocus",this,"_onFieldFocus",!0);dojo.connect(b,"onblur",this,"_onFieldBlur",!0)}this._value=this._getFieldValue();
this._started=!0},_canModifyRule:function(a){return a&&a.getCSSFile?(a=a.getCSSFile())?!b.findResource(a.url).readOnly():!0:!0},_onFieldChange:function(a){function b(){e&&n&&n[e]&&n[e].resolve()}function c(a){a._value=a._getFieldValue();a._valueArray=a._valueArrayNew;var b=a._valueArray&&dojo.isArray(a._valueArray)&&0<a._valueArray.length?a._valueArray:a._value;a._changeValue(a._targetValueIndex,b)}a=function(a,b){if(!a&&!b)return!0;if(!a&&b||a&&!b||a.length!=b.length)return!1;for(var d=0;d<a.length;d++)if(a[d]!==
b[d])return!1;return!0};this.context&&this.context.blockChange(!1);if(!(this._value==this._getFieldValue()&&a(this._valueArray,this._valueArrayNew)||1>this._values.length))if("(overrides)"==this._getFieldValue())this._setFieldValue&&this._setFieldValue("(overrides)",null);else if("number"==typeof this._targetValueIndex){var f=h.getPreferences("davinci.ve.editorPrefs",g.getProject());if(this._widget&&this.target&&0<this.target.length){var e=this.target[0];a=this._widget.getContext();var k;a&&(k=a.cascadeBatch);
if(k){var m=k.askUserResponse;if(k.deferreds)var n=k.deferreds}}!1===m?(this._setFieldValue(this._value,this._loc),b()):!0===m?(c(this),b()):(m=null,this._values[this._targetValueIndex].readOnly&&"davinci.themeEdit.ThemeEditor"!=this._editor.editorID?(m=d.propChangeCannotComplete+"\x3cbr\x3e\x3cbr\x3e"+dojo.string.substitute(d.toChangeProperty,["\x3ca href\x3d'app/docs/index.html#CreatingStyleRulesWithAppCss' target\x3d'_blank'\x3e"+d.creatingStyleRules+"\x3c/a\x3e"])+"\x3cbr/\x3e\x3cbr/\x3e",davinci.Workbench.showMessage(d.errorModifyingValue,
m,{width:350},dojo.hitch(this,function(){b();return!0})),k&&(k.askUserResponse=!1),this._setFieldValue(this._value,this._loc)):("theme"==this._values[this._targetValueIndex].type||"theme"==this._values[this._targetValueIndex].proposalTarget)&&f.cssOverrideWarn&&this._editor.supports("MultiPropTarget")?require(["davinci/ve/widgets/ChangeWillModify"],dojo.hitch(this,function(a){var d=new a;a=davinci.Workbench.showDialog({title:"",content:d,style:{width:350},okCallback:dojo.hitch(this,function(){k&&
(k.askUserResponse=!0);c(this);b();d.checkbox.get("checked")&&(f.cssOverrideWarn=!1,h.savePreferences("davinci.ve.editorPrefs",null,f))}),okLabel:null,hideCancel:null,submitOnEnter:!0});dojo.connect(a,"onCancel",dojo.hitch(this,function(){k&&(k.askUserResponse=!1);this._setFieldValue(this._value,this._loc);b();d.checkbox.get("checked")&&(f.cssOverrideWarn=!1,h.savePreferences("davinci.ve.editorPrefs",null,f))}))})):(c(this),b()))}},_changeValue:function(a,b){var d=void 0;this._whichStateInputElement&&
this._whichStateInputElement.checked&&(d=this._whichState);var c=this._values[a];a=[];for(var f=0;f<this.target.length;f++)if(dojo.isArray(b))for(var e=0;e<b.length;e++){var p={};p[this.target[f]]=b[e];a.push(p)}else p={},p[this.target[f]]=b,a.push(p);this._dirtyCascadeList=!0;"element.style"==c.type?("position"==this.target[0]&&1==a.length&&("absolute"==a[0].position?(b=this.context.getPreference("absoluteWidgetsZindex"),a.push({"z-index":b})):a.push({"z-index":""})),dojo.publish("/davinci/ui/styleValuesChange",
[{values:a,appliesTo:"inline",applyToWhichStates:d,cascade:this}])):dojo.publish("/davinci/ui/styleValuesChange",[{values:a,appliesTo:c,applyToWhichStates:d}])},_getAttribStyleValue:function(){return this.context.getStyleAttributeValues(this._widget)},_getShortHands:function(){if(this._shorthands)return this._shorthands;this._shorthands=[];for(var a=0;a<this.target.length;a++)this._buildShortHands(this.target[a]);return this._shorthands},_buildShortHands:function(a){for(var b=!1,d=0;d<e.shorthand.length;d++)if(a==
e.shorthand[d][0]){b=!0;break}if(b)for(a=e.shorthand[d][1],b=0;b<a.length;b++){for(var c=!1,d=0;d<this._shorthands.length&&!c;d++)this._shorthands[d]==a[b]&&(c=!0);c||this._shorthands.push(a[b]);this._buildShortHands(a[b])}return this._shorthands},_onChangeOverride:function(a){alert(d.valueIsOverriden);return!1},_getSelector:function(a,b){var d=this.context.getThemeMeta();if(!d)return[];a=d.loader.getType(a);if(d=d.metadata.getStyleSelectors(a,"Normal"))for(var c in d)for(a=0;a<d[c].length;a++)for(var f=
0;f<b.length;f++)if(b[f]==d[c][a])return c},_getMetaTargets:function(a,b){var d=this._getSelector(a,b);return this.context.getModel().getRule(d).filter(function(a){return a.getSelectorText()==d})},_getSelectionCssRules:function(a){this.context._cssCache=this.context._cssCache||{};var b=this.context.getSelection();if(!a&&!b.length)return{rules:null,matchLevels:null};var d=a||b[0].domNode||b[0],c=d.id+"_"+d.className;if(b.length){var f=this.context._cssCache[c]=this.context.model.getMatchingRules(d,
!0);this.context.cssFiles&&this.context.cssFiles.forEach(function(a){a.getMatchingRules(d,f.rules,f.matchLevels)});f.rules.forEach(function(a){var b=dojo.hitch(a,"onChange",this,function(){delete this.context._cssCache[c];connect.unsubscribe(b)})},this);return f}return{rules:null,matchLevels:null}},_getAllRules:function(){function a(a){if(a&&a.parent&&a.parent.url)return a=a.parent.url,/^themes\//.test(a)||/\/themes\//.test(a)?"theme":"queried"}var b=[];if("davinci.themeEdit.ThemeEditor"!=this._editor.editorID){var d=
this._getDefaultSelection();if(this._editor.supports("inline-style")&&"element.style"==d){for(var d=this._getAttribStyleValue(),c=null,f=0;f<d.length;f++)for(var e=d[f],g=0;g<this.target.length;g++){var k=this.target[g];void 0!==e[k]&&(c=e[k])}b.push({rule:d,value:c,matchLevel:"element.style",type:"element.style"})}if((d=this._getSelectionCssRules(this._topWidgetDom))&&d.rules)for(g=0;g<d.rules.length;g++){c="";f=d.rules[g];for(e=0;e<f.selectors.length;e++)0!=e&&(c+=", "),c+=f.selectors[e].getLabel();
f=a(f);b.push({rule:d.rules[g],ruleString:c,matchLevel:d.matchLevels[g],type:f})}this._addDeltaRules(this._widget,b);for(var d=this._getClasses(this._widget),h=0,g=0;g<d.length;g++){var m=d[g];"string"==typeof m&&0<m.length&&this._getClassSelector(m).forEach(function(a){for(var d=!1,c=0;c<b.length;c++)if(this._compareSelectors(b[c].ruleString,a)){b[c].className=m;d=!0;break}d||(d=this._computeMatchLevelSelector(a),b.splice(h,0,{rule:null,ruleString:a,targetFile:this.targetFile,className:m,value:null,
matchLevel:d,type:"proposal"}),h++)}.bind(this))}}if("davinci.themeEdit.ThemeEditor"==this._editor.editorID){if(d=this._editor._getCssRules(this._widget,this._editor._selectedSubWidget,this._editor._currentState)){g=[];for(c=d.length-1;-1<c;--c)g.push(d[c]);d=g}}else d=this._widget?this._getMetaTargets(this._widget,this.target):[];for(g=0;g<d.length;g++){c=!1;for(f=0;!c&&f<b.length;f++)b[f].rule==d[g]&&(c=!0,b[f].type="theme");c||b.push({rule:d[g],matchLevel:"theme",type:"theme"})}return b},_buildCssRuleset:function(){var a=
this._getAllRules();this._values=[];this._hasOverride=!1;for(var b=this._getShortHands(),d=0;d<a.length;d++){var c=a[d].rule;if(c){for(var f=0;f<b.length;f++)if("element.style"!=a[d].type&&null!=a[d].rule.getProperty(b[f])){a[d].shorthand=b[f];var e=c.getProperty(b[f]);a[d].value=e&&e.value;this._hasOverride=!0}else"element.style"==a[d].type&&-1<dojo.indexOf(a[d].rule,b[f])&&(a[d].shorthand=b[f],e=dojo.indexOf(a[d].rule,b[f]),a[d].value=c[e],this._hasOverride=!0);if(!a[d].shorthand&&"element.style"!=
a[d].type)a[d].value=this._getRuleTargetValue(c);else if(!a[d].shorthand&&"element.style"==a[d].type)for(f=0;f<c.length;f++)c[f].hasOwnProperty(this.target[0])&&(a[d].value=c[f][this.target[0]])}}a=this._sortRules(a);this._addClasses(a);this._values=a},_sortRules:function(a){for(var b=[],d=0;d<a.length;d++){var c=!1;"element.style"==a[d].type&&(b.splice(0,0,a[d]),c=!0);for(var f=0;!c&&f<b.length;f++)"element.style"!=b[f].matchLevel&&b[f].matchLevel<a[d].matchLevel&&(c=!0,b.splice(f,0,a[d]));c||b.push(a[d])}return b},
_addClasses:function(a){for(var b=!1,d=0;d<a.length;d++)a[d].extraClass=[],b&&a[d].extraClass.push("cssShorthandOverRidden"),a[d].value||"element.style"!=a[d].type&&this._getRuleTargetValue(a[d].rule)?b=!0:a[d].value||"element.style"==a[d].type||a[d].extraClass.push("hiddenCascadeNode"),"element.style"!=a[d].type||a[d].value||a[d].extraClass.push("elementStyleNode"),this._canModifyRule(a[d].rule)||(a[d].extraClass.push("readOnlyRule"),a[d].readOnly=!0)},_updateCascadeList:function(){function a(a){return function(){return this._onChange({target:a})}}
function b(a){return function(){return this._onChangeRemove({target:a})}}this._setFieldValue&&this._setFieldValue("",null);if(this._widget&&this._widget.domNode){dojo.removeClass(this.container,"dijitHidden");this._buildCssRuleset();this._destroy();var c=dojo.doc.createElement("table");dojo.addClass(c,"cascadeTable");var e=null,g=null,e=dojo.doc.createElement("tr");e.className="propApplyToLabelRow";g=dojo.doc.createElement("td");g.colSpan="3";g.innerHTML=d.applyToWhich;g.className="propApplyToLabelCell";
e.appendChild(g);c.appendChild(e);this._radio=[];for(var k=0;k<this._values.length;k++){var h=this._formatRuleString(this._values[k]);this._radio.push(dojo.create("input",{type:"radio",name:this._radioGroupName}));for(var e=dojo.doc.createElement("tr"),m=0;m<this._values[k].extraClass.length;m++)dojo.addClass(e,this._values[k].extraClass[m]);g=dojo.doc.createElement("td");e.appendChild(g);dojo.addClass(g,"cascadeSpacer");g=dojo.doc.createElement("td");dojo.addClass(g,"cascadeButton");g.appendChild(this._radio[this._radio.length-
1]);e.appendChild(g);g=dojo.doc.createElement("td");dojo.addClass(g,"cascadText");g.innerHTML="\x3cdiv class\x3d'cascadeRuleText'\x3e"+h+"\x3c/div\x3e";this._values[k].shorthand?this._handles.push(dojo.connect(this._radio[this._radio.length-1],"onclick",this,"_onChangeOverride")):this._handles.push(dojo.connect(this._radio[this._radio.length-1],"onclick",this,a(k)));if(this._values[k].shorthand)g.innerHTML+="\x3cdiv\x3e"+this._values[k].shorthand+":"+this._values[k].value+";\x3c/div\x3e";else if(this._values[k].value){for(m=
0;m<this.target.length;m++);g.innerHTML+="\x3cdiv class\x3d'ruleValue'\x3e"+this.target[0]+":"+this._values[k].value+";\x3c/div\x3e"}e.appendChild(g);g=dojo.doc.createElement("td");dojo.addClass(g,"cascadRemove");h=dojo.doc.createElement("button");this._values[k].readOnly&&dojo.attr(h,"disabled","true");dojo.addClass(h,"cascadeRemoveButton");g.appendChild(h);this._handles.push(dojo.connect(h,"onclick",this,b(k)));e.appendChild(g);g=dojo.doc.createElement("td");g.className="cascadeSpacer";e.appendChild(g);
c.appendChild(e)}this._widgetState=this._whichStateInputElement=void 0;e=f.getStatesListCurrent(this._widget.domNode);for(k=0;k<e.length;k++)if(e[k]){k=e[k];e=dojo.doc.createElement("tr");e.className="propWhichStateRow";g=dojo.doc.createElement("td");g.colSpan="3";h=dojo.create("input",{type:"checkbox",checked:!1,className:"propWhichStateInput"});this._whichState=k;this._whichStateInputElement=h;g.appendChild(h);h=dojo.create("label",{className:"propWhichStateLabel"});h.innerHTML=dojo.string.substitute(d.onlyApplyToState,
[k]);g.appendChild(h);g.className="propWhichStateCell";e.appendChild(g);c.appendChild(e);break}this.cascadeTableDiv.appendChild(c);this._updateFieldValue()}else dojo.addClass(this.container,"dijitHidden")},selectRule:function(a){for(var b=0;b<this._values.length;b++)if("element.style"!=a&&this._values[b].rule==a){dojo.removeClass(this._radio[b].parentNode.parentNode,"hiddenCascadeNode");dojo.attr(this._radio[b],"checked",!0);this._onChange({target:b});break}else if("element.style"==a&&"element.style"==
this._values[b].type){dojo.removeClass(this._radio[b].parentNode.parentNode,"hiddenCascadeNode");dojo.attr(this._radio[b],"checked",!0);this._onChange({target:b});break}},selectRuleBySelector:function(a){if("element.style"==a)this._targetValueIndex=0,0<this._values.length&&(dojo.attr(this._radio[0],"checked",!0),this._values[0].shorthand?dojo.addClass(this._radio[0].parentNode.parentNode,"cssShorthandOverRidden"):(a=this._getBaseLocation(),this._setFieldValue(this._values[0].value,a)));else for(var b=
0;b<this._values.length;b++)if("element.style"!=this._values[b].type&&this._values[b].rule&&this._values[b].rule.hasSelector(a)){dojo.removeClass(this._radio[b].parentNode.parentNode,"hiddenCascadeNode");dojo.attr(this._radio[b],"checked",!0);this._onChange({target:b});break}},_isTarget:function(a){if("$std_10"===a)return!0;for(var b=0;b<this.target.length;b++)if(this.target[b]==a)return!0;return!1},_targetIsRootProperty:function(){for(var a=["left","top","right","bottom"],b=0;b<this.target.length;b++)if(-1<
a.indexOf(this.target[b]))return!0;return!1},_updateFieldValue:function(){null==this._widget&&this._setFieldValue("",this._getBaseLocation());var a=this._getDefaultSelection();this._targetValueIndex=0;for(var b=!1,d=!1,c=0;c<this._values.length;c++){var f="davinci.ve.HTMLPageEditor"==this._editor.editorID,e="davinci.themeEdit.ThemeEditor"==this._editor.editorID;this._values[c].value&&!b&&e||this._values[c].value&&!b&&f&&!this._values[c].readOnly||!b&&!d&&"element.style"!=this._values[c].type&&this._values[c].rule&&
this._values[c].rule.hasSelector(a)||"element.style"==a&&"element.style"==this._values[c].type?(this.selectRule("element.style"==this._values[c].type?"element.style":this._values[c].rule),this._values[c].value&&(b=!0),d=!0):b&&!d&&dojo.addClass(this._radio[c].parentNode.parentNode,"cssOverRidden")}b||d||!f||this.selectRuleBySelector("element.style")},_getThemeMetaDataByWidget:function(a){var b=this.context.getThemeMeta();if(!b)return null;a=b.loader.getType(a);var b=b.loader.getMetaData(a),d=!1,f=
"string"==typeof a?a.split("."):null;f&&"html"==f[0]&&(d=!0);if(!b&&this.context.cssFiles&&!d)for(d=0;d<this.context.cssFiles.length;d++)if(f=c.getThemeByCssFile(this.context.cssFiles[d]))if(b=m.getThemeMetadata(f).loader.getMetaData(a))break;return b},_getDefaultSelection:function(){var a="Normal";"davinci.themeEdit.ThemeEditor"==this._editor.editorID&&(a=a||f.getState());var b=this._getThemeMetaDataByWidget(this._widget);if(!b||!b.states||this._targetIsRootProperty())return"element.style";if(b&&
b.states[a]&&b.states[a].elements){var d=b.states[a].elements,c;for(c in d)for(var e=0;e<d[c].length;e++)if(this._isTarget(d[c][e]))return"$root"==c?"element.style":c}if(b&&b.states[a]&&(d=this.context.getThemeMeta())&&(e=d.loader.getType(this._widget),d=d.metadata.getStyleSelectors(e,a,null)))for(c in d)for(a=0;a<d[c].length;a++)if(this._isTarget(d[c][a])){if(b.rootSelectors)for(a=0;a<b.rootSelectors.length;a++)if(c==b.rootSelectors[a])return"element.style";return c}return null},_addDeltaRules:function(a,
d){var c="Normal",e=-1,g=[],p=this.context._getCssFiles(),p=p&&0<p.length?p[0].url:null,k=!1;p&&(k=(k=b.findResource(p))?k._readOnly:!0);"davinci.themeEdit.ThemeEditor"==this._editor.editorID&&(c=c||f.getState());if((a=this._getThemeMetaDataByWidget(a))&&a.states[c]&&a.states[c].selectors){var c=a.states[c].selectors,h;for(h in c){c=!1;for(a=0;a<d.length;a++){var m=d[a];"element.style"===m.type&&(e=a);if("theme"===m.type&&m.ruleString===h&&(m.rule.parent.relativeURL==this.context._themeUrl||m.rule.parent.url==
p)){c=!0;break}}c||(c=this._computeMatchLevelSelector(h),p&&!k&&g.push({rule:null,ruleString:h,targetFile:p,className:null,value:null,matchLevel:c,type:"proposal"}),this.context._themeUrl&&!this.context.theme.getFile().readOnly()&&g.push({rule:null,ruleString:h,targetFile:this.context._themeUrl,className:null,value:null,matchLevel:c,type:"proposal",proposalTarget:"theme"}))}}var n=e+1;g.forEach(function(a){d.splice(n++,0,a)});return d},_getRuleTargetValue:function(a){var b=null;if(a)for(var d=0;!b&&
d<this.target.length;d++)b=a.getProperties(this.target[d]);if(null!=b){if(1<b.length){a=[];for(d=0;d<b.length;d++)a.push(b[d].value);return a}if(1==b.length)return b[0].value}return null},_onChangeRemove:function(a){this._changeValue(a.target,null);this._updateCascadeList()},_onChange:function(a){var d=null;if("element.style"==this._values[a.target].type)d=this._getBaseLocation();else if("proposal"==this._values[a.target].type){var c=this.context.getModel().find({elementType:"CSSFile",relativeURL:this._values[a.target].targetFile},
!0),f=this.context._getCssFiles();c?d=b.findResource(c.url):f[0].url==this._values[a.target].targetFile&&(d=b.findResource(f[0].url))}else d=b.findResource(this._values[a.target].rule.getCSSFile().url);this._setFieldValue&&this._setFieldValue(this._values[a.target].value||"",d);this._targetValueIndex=a.target},_widgetValuesChanged:function(a){if(this._dirtyCascadeList)this._updateCascadeList(),this._dirtyCascadeList=!1;else{var b=this._getShortHands();a=a.values;for(var d in a)for(a=0;a<b.length;a++)if(b[a]==
d){this._updateCascadeList();return}}},_formatRuleString:function(a){if("element.style"==a.type)return"element.style";var b="";if("proposal"==a.type)b=a.className?b+dojo.string.substitute(d.newRule,[a.className,a.targetFile]):b+dojo.string.substitute(d.newThemeRule,[a.targetFile]),b+=a.ruleString;else{var c=a.rule;a.className?b+=dojo.string.substitute(d.existingRule,[a.className,this.targetFile]):"theme"==a.type&&(b+="["+a.type+"] ");if(a.ruleString)b+=a.ruleString;else for(var f=0;f<c.selectors.length;f++)0!=
f&&(b+=", "),b+=c.selectors[f].getLabel();(f=c.searchUp("CSSFile"))&&(b+="  ("+f.url||f.relativeURL);b=a.property?b+dojo.string.substitute(d.line,[a.property.startLine]):b+dojo.string.substitute(d.line,[c.startLine||d.propUndefined])}return b},_getWidgetTopDom:function(a,b){b=this._getSelector(a,b);var d=function(a,b){if(b.matches(a))return a;for(;0<a.children.length;)return d(a.children[0],b)};if(b){var c=new k;c.setText(b+"{}");return d(a.domNode||a,c)}return null},_widgetSelectionChanged:function(a){(this._widget=
a=a[0])?(this.context=a.getContext(),this.targetFile=this.context.getAppCssRelativeFile(),this._editor=this.context.editor,this._topWidgetDom=this._getWidgetTopDom(this._widget,this.target)||this._widget.domNode||this._widget):this._topWidgetDom=null;this._updateCascadeList()},_getBaseLocation:function(){return{}},_editorSelected:function(a){this._editor=a.editor;var b;this._editor&&this._editor.getContext&&(b=this._editor.getContext());b&&this._editor.supports("style")?(this.context=b,this.targetFile=
b.getAppCssRelativeFile(),a=b.getSelection(),0<a.length?this._widgetSelectionChanged(a):this._widgetSelectionChanged([])):(this._widget=this.context=null,this._setFieldValue&&this._setFieldValue("",null));this._updateCascadeList()},_onFieldFocus:function(){this.context&&this.context.blockChange(!0)},_destroy:function(){var a=this.cascadeTableDiv;for(dojo.forEach(dojo.query("[widgetId]",a).map(dijit.byNode),function(a){a.destroy()});a.firstChild;)dojo._destroyElement(a.firstChild);dojo.forEach(this._handles,
dojo.disconnect);this._handles=[]},_onFieldBlur:function(){this.context&&this.context.blockChange(!1)},_getClasses:function(a){a=a.getClassNames("class")||"";a=a.split(" ");for(var b=0;b<a.length;b++)for(var d=b+1;d<a.length;d++)a[d]==a[b]&&a.splice(d,1);return a},_getRelativeMetaTargetSelector:function(a){var b=this.context.getThemeMeta();if(!b)return[];var d=this.context.getSelection();if(!d.length)return[];d=d[0];d=b.loader.getType(d);return b.metadata.getRelativeStyleSelectorsText(d,"Normal",
null,a,this.context.getTheme().className)},_getClassSelector:function(a){var b=this._getRelativeMetaTargetSelector(this.target),b=b.length?b[0]:"";bodyId=this.context.model.find({elementType:"HTMLElement",tag:"body"},!0).find({elementType:"HTMLAttribute",name:"id"},!0).value;var d=this.context.getTheme(),c=[];if(!d)return c;var f=d.className;b.split(",").forEach(function(b){b=b.trim();c.push("#"+bodyId+"."+f+" ."+a+b)}.bind(this));return c},_computeMatchLevelSelector:function(a){a=a.split(this._regex_combinators);
for(var b=0,d=0;d<a.length;d++){for(var c=a[d];;){var f=c.match(this._regex_not_pseudoclass);if(null!=f)b+=this._computeMatchLevelSimpleSelector(f[2]),c=f[1]+f[3];else break}b+=this._computeMatchLevelSimpleSelector(c)}return b},_computeMatchLevelSimpleSelector:function(a){var b=0;do{var d=function(d,f){d=a.match(d);null!=d&&(c=!0,b+=f,a=d[1]+d[3])},c=!1;d(this._regex_pseudoelement,1);c||(d(this._regex_id,100),d(this._regex_class,10),d(this._regex_attribute,10),d(this._regex_pseudoclass,10),d(this._regex_univeral,
0))}while(c);0<a.length&&(b+=1);return b},_compareSelectors:function(a,b){if(!(a&&b||a==b))return!1;a=a.split(this._regex_combinators);b=b.split(this._regex_combinators);if(a.length!=a.length)return!1;for(var d=0;d<a.length;d++)if(a[d]!=b[d])return!1;return!0},_compareSimpleSelectors:function(a,b){}});return dojo.mixin(q,{__id:0})})},"davinci/Theme":function(){define("dojo/_base/declare dojo/promise/all ./Workbench ./Runtime ./library ./workbench/Preferences ./model/Path ./html/HTMLFile ./model/Factory system/resource".split(" "),
function(q,n,h,g,e,m,c,k,f,d){var b={TEMP_CLONE_PRE:"clone_",desktop_default:"desktop_default",mobile_default:"custom_default",default_theme:"(device-specific)",none_themeset_name:"(none)",other_device:"other",none_theme:"none",dojoMobileDefault:[{theme:"android",device:"Android"},{theme:"blackberry",device:"BlackBerry"},{theme:"ipad",device:"iPad"},{theme:"iphone",device:"iPhone"},{theme:"iphone",device:"other"}],dojoMobileCustom:[{theme:"custom",device:"Android"},{theme:"custom",device:"BlackBerry"},
{theme:"custom",device:"iPad"},{theme:"custom",device:"iPhone"},{theme:"custom",device:"other"}],isThemeHTML:function(a){return-1<a.getName().indexOf("dojo-theme-editor.html")},CloneTheme:function(a,b,f,e,g,k){function p(a){var b=[];a.forEach(function(a){a=d.findResource(v+"/"+a);a=(new c(a.getPath())).relativeTo("./"+r,!0);for(var f="..",e=0;e<a.segments.length;e++)f=f+"/"+a.segments[e];b.push(f)});return b}f=[];g.getFile();k=(new c(e)).removeLastSegments(0);k=d.findResource(k.toString());k.readOnly()&&
k.createResource();d.createResource(e,!0);var h=d.findResource(e);g.getFile().getName();var m=(new c(h.getPath())).lastSegment();e=h.createResource(m+".theme");k=h.createResource(m+".css");var r=this.getThemeLocation(),v=g.getFile().parent.getPath(),q=p(g.themeEditorHtmls),w=p(g.meta),x=" ";p(g.files).forEach(function(a){x=x+'@import url("'+a+'");'});a={className:g.className,name:a,version:b||g.version,specVersion:g.specVersion,files:[""+m+".css"],meta:w,themeEditorHtmls:q,useBodyFontBackgroundClass:g.useBodyFontBackgroundClass};
g.helper&&(a.helper=g.helper.declaredClass?g.helper.declaredClass:g.helper);g.base&&(a.base=g.base);g.type&&(a.type=g.type);if(g.conditionalFiles)for(a.conditionalFiles=g.conditionalFiles,g=p(g.conditionalFiles),b=0;b<a.conditionalFiles.length;b++)m=h.createResource(a.conditionalFiles[b]),f.push(m.setContents('@import url("'+g[b]+'");'));g=e.setContents(JSON.stringify(a));g.themeFile=e;f.push(g);f.push(k.setContents(x));return{promise:n(f),themeFile:e}},getHelper:function(a){if(a){if(a.helper&&"string"!=
typeof a.helper)return a.helper;var b=a.helper;if(b){var d=new dojo.Deferred;require([b],function(a){a.declaredClass=b;b=a;d.resolve({helper:b})});return d}}},getThemeSet:function(a){var d=b.getThemeSets(h.getProject()),c=dojo.clone(this.dojoMobileDefault),f;d||(d=this.dojoThemeSets);d=dojo.clone(d);if(a){if(f=a._getDojoJsElem().getAttribute("data-dojo-config"))f=require.eval("({ "+f+" })","data-dojo-config"),f.themeMap&&(c=b.getDojoxMobileThemesFromThemeMap(a,f.themeMap));var e=a.getTheme();if(null==
e)console.error("have no desktop theme, abort!");else for(var g=0,k=d.themeSets.length;g<k;g++)if(f=d.themeSets[g],f.desktopTheme===e.name&&this.themeSetEquals(c,f.mobileTheme))return f}e||(console.error("maq hack, restore desktop theme"),e={name:"claro"});f={name:this.none_themeset_name,desktopTheme:a?e.name:"claro",mobileTheme:c};d.themeSets.push(f);return f},getBase:function(){if(h.singleProjectMode())return h.getProject()},getThemeLocation:function(){var a=this.getBase(),b=m.getPreferences("davinci.ui.ProjectPrefs",
a);return(new c(a)).append(b.themeFolder)},getTheme:function(a,b){b=e.getThemes(h.getProject(),this.workspaceOnly);for(var d=0;d<b.length;d++)if(b[d]&&b[d].name===a)return b[d]},getThemeByCssFile:function(a){var b=e.getThemes(h.getProject(),this.workspaceOnly);a=d.findResource(a.url).getPath();for(var c=0;c<b.length;c++)for(var f=b[c].getFile().getParentFolder().getPath(),g=0;g<b[c].files.length;g++)if(f+"/"+b[c].files[g]===a)return b[c];return null},getDojoxMobileThemeMap:function(a,b){for(var d=
[],f=[".*","iphone",[]],e=0;e<b.length;e++)if(b[e].theme!=this.none_theme&&b[e].theme!=this.default_theme){var g=this.getTheme(b[e].theme);if(g){var k;g.path&&g.path[0]?(k=g.path[0].lastIndexOf("/"),k=new c(g.path[0].substring(0,k+1)+g.files[0])):k=(new c(g.getFile().parent.getPath())).append(g.files[0]);var p=a.getFullResourcePath();k=k.relativeTo(p,!0).toString();b[e].device===this.other_device?f=[".*",g.base,[k]]:d.push([b[e].device,g.base,[k]])}}d.push(f);return d},getDojoxMobileThemesFromThemeMap:function(a,
b){var d=e.getThemes(h.getProject(),this.workspaceOnly),f=[];b.forEach(function(b,e,g){for(g=0;g<d.length;g++){e=d[g];var k=(new c(e.getFile().parent.getPath())).append(e.files[0]),p=a.getFullResourcePath();if(k.relativeTo(p,!0).toString()==b[2][0]){g={};g.device=b[0];g.theme=e.name;".*"===g.device&&(g.device="other");f.push(g);break}}},this);return f},themeSetEquals:function(a,b){function d(a){var b=0,d;for(d in a)a.hasOwnProperty(d)&&b++;return b}if(typeof a!==typeof b)return!1;if("function"===
typeof a)return a.toString()===b.toString();if(a instanceof Object&&b instanceof Object){if(d(a)!==d(b))return!1;var c=!0,f;for(f in a)if(c=this.themeSetEquals(a[f],b[f]),!c)return!1;return!0}return a===b},themeMapsEqual:function(a,b){a=JSON.stringify(a);b=JSON.stringify(b);return a===b},singleMobileTheme:function(a){for(var b=a.mobileTheme[0].theme,d=1;d<a.mobileTheme.length;d++)if(a.mobileTheme[d].theme!=b)return!1;return!0},getThemeSets:function(a){var d=g.getDefaultThemeSet(),c=null;if(d){var f=
!1;if(c=m.getPreferences("maqetta.dojo.themesets",a)){for(var e=!1,k=0;k<c.themeSets.length;k++)if(c.themeSets[k].name===d.name){e=!0;b.themeSetEquals(c.themeSets[k],d)||(c.themeSets[k]=d,f=!0);break}e||(c.themeSets.push(d),f=!0)}else c=b.dojoThemeSets,c.themeSets[0]=d,f=!0;f&&b.saveThemeSets(a,c)}return c},saveThemeSets:function(a,b){m.savePreferences("maqetta.dojo.themesets",a,b)}};b.none_themeset={name:b.none_themeset_name,desktopTheme:"claro",mobileTheme:dojo.clone(b.dojoMobileDefault)};b.default_themeset=
{name:b.desktop_default,desktopTheme:"claro",mobileTheme:dojo.clone(b.dojoMobileDefault)};b.custom_themeset={name:b.mobile_default,desktopTheme:"claro",mobileTheme:b.dojoMobileCustom};b.dojoThemeSets={version:"1.7",specVersion:"0.8",helper:"maq-metadata-dojo/dojox/mobile/ThemeHelper",themeSets:[b.custom_themeset]};return b})},"davinci/html/HTMLFile":function(){define("dojo/_base/declare davinci/html/HTMLItem davinci/html/HTMLParser davinci/html/CSSSelector davinci/html/HTMLElement davinci/html/CSSImport davinci/html/CSSFile davinci/model/Model davinci/model/Path".split(" "),
function(q,n,h,g,e,m,c,k,f){return q("davinci.html.HTMLFile",n,{constructor:function(d){this.url=this.fileName=d;this.elementType="HTMLFile";this._loadedCSS={};this._styleElem=null},save:function(d){var b,a=system.resource.findResource(this.fileName);this.getText();a?(b=this.getText(),b=a.setContents(b,d)):console.error("couldnt find file in resources : "+this.fileName);return b},getText:function(d){d=d||{};d.indent=0;for(var b="",a=0;a<this.children.length;a++){var c=this.children[a],b=b+c.getText(d);
"HTMLComment"==c.elementType&&(b+=this._addWS(c._fmLine,c._fmIndent))}return b},getDocumentElement:function(d){for(d=0;d<this.children.length;d++)if("html"==this.children[d].tag)return this.children[d]},findElement:function(d){var b=this.getDocumentElement();if(b)return b.findElement(d)},getMatchingRules:function(d,b){var a={visit:function(a){if("CSSFile"==a.elementType){var b=[];a=a.getMatchingRules(d,[],b);for(var c=0;c<a.length;c++)for(var f=0;f<this.matchLevels.length;f++)if(b[c]>this.matchLevels[f]){this.matchLevels.splice(f,
0,b[c]);this.rules.splice(f,0,a[c]);break}0==this.rules.length&&(this.rules=a,this.matchLevels=b);return!0}return!1},matchLevels:[],rules:[]};this.visit(a);return b?{rules:a.rules,matchLevels:a.matchLevels}:a.rules},getRule:function(d){if(!d)return[];var b=g.parseSelectors(d);d={visit:function(a){return"CSSFile"==a.elementType?(a=a.getRule(b),this.rules=this.rules.concat(a||[]),!0):!1},rules:[]};this.visit(d);return d.rules},setText:function(d,b){this.visit({visit:function(a){"CSSImport"==a.elementType&&
a.close()}});this.children=[];this._styleElem=null;d=h.parse(d||"",this);var a="";b||0!=d.errors.length||(a=this.getText(),this.children=[],d=h.parse(a,this));this.endOffset=d.endOffset;this.errors=d.errors;var c=this;b||this.visit({visit:function(a){"CSSImport"!=a.elementType||a.cssFile||(a.load(!0),dojo.connect(a.cssFile,"onChange",null,dojo.hitch(c,"onChange")))}});this.onChange()},hasStyleSheet:function(d){for(var b=this.find({elementType:"CSSImport"}),a=0;a<b.length;a++)if(b[a].url==d)return!0;
return!1},addStyleSheet:function(d,b,a,c,g){var k=new f(this.url||this.fileName),k=k.getParentPath().append(d),k=k.toString();a||(this._loadedCSS[k]=require("davinci/model/Factory").getModel({url:k,includeImports:!0,loader:g}));b&&this._loadedCSS[k].setText(b);this.onChange();this._styleElem||(b=this.find({elementType:"HTMLElement",tag:"head"},!0),g=b.getChildElement("style"),g||(g=new e("style"),b.addChild(g)),this._styleElem=g);b=new m;b.parent=this;b.url=d;c?this._styleElem.insertBefore(b,c):this._styleElem.addChild(b);
a||b.load(!0)},close:function(){this.visit({visit:function(d){"CSSImport"==d.elementType&&d.close()}});require("davinci/model/Factory").closeModel(this)},getLabel:function(){return"\x3c\x3e"},getID:function(){return this.fileName},updatePositions:function(d,b){(new k(this)).updatePositions(this,d,b);this.visit({visit:function(a){if(a.endOffset<d)return!0;"HTMLElement"==a.elementType&&a.startTagOffset>d&&(a.startTagOffset+=b)}})},mapPositions:function(d){var b=this.getText();d=d.getText();b=b.indexOf(d);
d=b+d.lastIndexOf("\x3e")+1;return{startOffset:b,endOffset:d}},reportPositions:function(){this.visit({visit:function(d){}})},evaluate:function(d){if("/"!==d.charAt(0))console.error("invalid XPath string");else{var b=this;d.substr(1).split("/").forEach(function(a){a=a.match(this._RE_XPATH);var d=a[1];a=a[2];var c;c=b.children.filter(function(a){return a.tag===d});!a&&1<c.length?console.error("invalid XPath string; no index specified for multiple elements"):b=a?c[a-1]:c[0]},this);return b}},_RE_XPATH:/(\w+)(?:\[(\d+)\])?/})})},
"davinci/html/HTMLParser":function(){define("dojo/_base/declare davinci/html/HTMLText davinci/html/HTMLElement davinci/html/HTMLAttribute davinci/html/HTMLComment davinci/html/PHPBlock davinci/model/parser/Tokenizer davinci/html/CSSParser".split(" "),function(q,n,h,g,e,m,c,k){var f=function(){var d={autoSelfClosers:{br:!0,img:!0,hr:!0,link:!0,input:!0,meta:!0,col:!0,frame:!0,base:!0,area:!0},doNotIndent:{pre:!0,"!cdata":!0}},b={autoSelfClosers:{},doNotIndent:{"!cdata":!0}},a=d,f=!1,e=function(){function a(a,
d){var c=a.next();if("\x3c"==c){if(a.equals("!"))return a.next(),a.equals("[")?a.lookAhead("[CDATA[",!0)?(d(f("xml-cdata","]]\x3e")),null):"xml-text":a.lookAhead("--",!0)?(d(f("xml-comment","--\x3e")),null):a.lookAhead("DOCTYPE",!0)?(a.nextWhileMatches(/[\w\._\-]/),d(f("xml-doctype","\x3e")),"xml-doctype"):"xml-text";if(a.equals("?")){a.next();if(a.lookAhead("php",!0,!1,!0))return d(e("php-block","?\x3e")),null;a.nextWhileMatches(/[\w\._\-]/);d(f("xml-processing","?\x3e"));return"xml-processing"}a.equals("/")&&
a.next();d(b);return"xml-punctuation"}if("\x26"==c){for(;!a.endOfLine()&&";"!=a.next(););return"xml-entity"}a.nextWhileMatches(/[^&<\n]/);return"xml-text"}function b(b,c){var f=b.next();if("\x3e"==f)return c(a),"xml-punctuation";if(/[?\/]/.test(f)&&b.equals("\x3e"))return b.next(),c(a),"xml-punctuation";if("\x3d"==f)return"xml-punctuation";if(/[\'\"]/.test(f))return c(d(f)),null;b.nextWhileMatches(/[^\s\u00a0=<>\"\'\/?]/);return"xml-name"}function d(a){return function(d,c){for(;!d.endOfLine();)if(d.next()==
a){c(b);break}return"xml-attribute"}}function f(b,d){return function(c,f){for(;!c.endOfLine();){if(c.lookAhead(d,!0)){f(a);break}c.next()}return b}}function e(b,d){return function(c,f){for(var e=!1;!c.endOfLine();){if(c.lookAhead(d,!0)){e=!0;f(a);break}c.next()}if(!e&&c.endOfLine())c.next();else{for(;c.lookAheadRegex(/^[\ \t]/,!0););c.endOfLine()&&c.next()}return b}}return function(b,d){return c.tokenizer(b,d||a)}}();return{make:function(b){function d(a){for(var b=a.length-1;0<=b;b--)G.push(a[b])}
function c(){d(arguments);N=!0}function g(){d(arguments);N=!1}function k(){I.style+=" xml-error"}function h(a){return function(b,d){d==a?c():(k(),c(arguments.callee))}}function p(b,d){var c=a.doNotIndent.hasOwnProperty(b)||P&&P.noIndent;P={prev:P,name:b,indent:Q,startOfLine:d,noIndent:c}}function m(a){return function(b,d){var c=a;if(c&&c.noIndent)return d;if(f&&/<!\[CDATA\[/.test(b))return 0;c&&/^<\//.test(b)&&(c=c.prev);for(;c&&!c.startOfLine;)c=c.prev;return c?c.indent+indentUnit:0}}function n(){return g(r,
n)}function r(a,b){"\x3c"==b?c(q,O,H(1==M)):"\x3c/"==b?c(v,h("\x3e")):("xml-cdata"==a?(P&&"!cdata"==P.name||p("!cdata"),/\]\]>$/.test(b)&&(P=P.prev)):U.hasOwnProperty(a)||k(),c())}function q(a,b){"xml-name"==a?(R=b.toLowerCase(),I.style="xml-tagname",c()):(R=null,g())}function v(a,b){"xml-name"==a&&(I.style="xml-tagname",P&&b.toLowerCase()==P.name?P=P.prev:k());c()}function H(b){return function(d,f){"/\x3e"==f||"\x3e"==f&&a.autoSelfClosers.hasOwnProperty(R)?c():"\x3e"==f?(p(R,b),c()):(k(),c(arguments.callee))}}
function O(a){"xml-name"==a?(I.style="xml-attname",c(K,O)):g()}function K(a,b){"\x3d"==b?c(L):"\x3e"==b||"/\x3e"==b?g(H):g()}function L(a){"xml-attribute"==a?c(L):g()}var J=e(b),I,G=[n],M=0,Q=0,R=null,P=null,N,U={"xml-text":!0,"xml-entity":!0,"xml-comment":!0,"xml-processing":!0,"xml-doctype":!0,"php-block":!0};return{indentation:function(){return Q},next:function(){I=J.next();"whitespace"==I.style&&0==M?Q=I.value.length:M++;"\n"==I.content&&(Q=M=0,I.indentation=m(P));if("whitespace"==I.style||"xml-comment"==
I.type||"php-block"==I.type)return I;for(;;)if(N=!1,G.pop()(I.style,I.content),N)return I},copy:function(){var a=G.concat([]),b=J.state,d=P,c=this;return function(f){G=a.concat([]);M=Q=0;P=d;J=e(f,b);return c}}}},electricChars:"/",configure:function(c){null!=c.useHTMLKludges&&(a=c.useHTMLKludges?d:b);c.alignCDATA&&(f=c.alignCDATA)}}}();return{parse:function(d,b){function a(a,b){C=new n;C.wasParsed=!0;C.startOffset=b;A[A.length-1].addChild(C,void 0,!0);C.value=a}function p(b){b.content!=b.value&&a(b.value.substring(b.content.length),
b.offset+b.value.length)}function r(a,b){a=a.split("\n");var d=a[a.length-1].length;b.children.length?(lastElement=b.children[b.children.length-1],lastElement._fmLine=a.length-1,lastElement._fmIndent=d):(b._fmChildLine=a.length-1,b._fmChildIndent=d)}function q(){if(null!=C&&!C.value.match(/\S/)){var a=A[A.length-1];a.children.pop();r(C.value,a)}C=null}function w(){var a=A[A.length-1];B.nextWhileMatches(/[\s\u00a0]/);var b=B.get();null!=C?(C.value+=b,q()):r(b,a);k.parse(B,a)}function x(a){for(u=z.next();a&&
"whitespace"==u.style;)u=z.next();return u}var B=c.stringStream({next:function(){if(1==++this.count)return d;throw StopIteration;},count:0,text:d}),z=f.make(B),u,y=[],A=[];A.push(b);var C,F,E;try{do switch(u=z.next(),u.style){case "xml-punctuation":q();if("\x3c"==u.content){var D=new h;D.wasParsed=!0;D.startOffset=u.offset;A[A.length-1].addChild(D,void 0,!0);x(!0);for("xml-tagname"==u.style?D.tag=u.content:y.push("expecting tag name");"xml-attname"==(u=x(!0)).style;){var H=new g;H.wasParsed=!0;D.attributes.push(H);
H.name=u.content;H.startOffset=u.offset;x(!0);if("\x3d"==u.content)if(u=z.next(),"xml-attribute"==u.style){var O=u.content;H.setValue(O.substring(1,O.length-1))}else y.push("expecting attribute value");else H.noValue=!0,H.setValue(!0);H.endOffset=u.offset-1;if(H.noValue&&"xml-attname"!=u.style)break}"xml-punctuation"!=u.style?y.push("expecting \x3e"):(D.startTagOffset=u.offset,"\x3e"==u.content?A.push(D):(D.noEndTag=!0,D=A[A.length-1]),p(u));"style"==D.tag&&w()}else"\x3c/"==u.value&&(b=D,u=z.next(),
"script"==D.tag&&(D.script=D.getElementText()),A.pop(),D=A[A.length-1],u=z.next(),b.endOffset=u.offset,p(u));E=null;break;case "xml-text":case "whitespace":case "xml-entity":F?F.value+=u.value:E?E.value+=u.value:C?C.value+=u.value:a(u.value,u.offset);E=null;break;case "xml-comment":q();var K=new e;K.wasParsed=!0;K.startOffset=u.offset;K.value=u.content.substring(4,u.content.length-3);K.endOffset=u.offset+u.content.length;A[A.length-1].addChild(K,void 0,!0);E=null;break;case "php-block":q();var L=
new m;L.wasParsed=!0;L.startOffset=u.offset;L.value=u.content;L.endOffset=u.offset+u.content.length;A[A.length-1].addChild(L,void 0,!0);E=L;break;case "xml-doctype":F||(q(),K=new e,K.wasParsed=!0,K.startOffset=u.offset,K.value=u.value.substring(2),A[A.length-1].addChild(K,void 0,!0),K.isProcessingInstruction=!0,u=z.next());var J=u.content.length-1;"\x3e"==u.content.charAt(u.content.length-1)?(K.endOffset=u.offset+u.content.length,K.value+=u.content.substring(0,J),p(u),F=void 0):(F=K,K.value+=u.content);
E=null}while(1)}catch(I){}return{errors:y,endOffset:u?u.offset:0}}}})},"davinci/html/PHPBlock":function(){define(["dojo/_base/declare","davinci/html/HTMLItem"],function(q,n){return q("davinci.html.PHPBlock",n,{constructor:function(h){this.elementType="PHPBlock";this.value=h||""},getText:function(h){return h.excludeIgnoredContent?"":this.value}})})},"davinci/model/parser/Tokenizer":function(){define(["dojo/_base/declare","davinci/js/JSExpression"],function(q,n){return{stringStream:function(h){function g(){for(;m==
e.length;){k+=e;e="";m=0;try{e=h.next()}catch(f){if(f!=StopIteration)throw f;return!1}}return!0}var e="",m=0,c=0,k="";return{peek:function(){return g()?e.charAt(m):null},next:function(){if(!g()){if(0<k.length)throw"End of stringstream reached without emptying buffer ('"+k+"').";throw StopIteration;}return e.charAt(m++)},get:function(){var f=k;k="";0<m&&(f+=e.slice(0,m),e=e.slice(m),m=0);c+=f.length;return f},getOffset:function(){return c},push:function(f){e=e.slice(0,m)+f+e.slice(m);c-=f.length},
lookAhead:function(c,d,b,a){function f(b){return a?b.toLowerCase():b}c=f(c);var g=!1,n=k,q=m;for(b&&this.nextWhileMatches(/[\s\u00a0]/);;){b=m+c.length;var x=e.length-m;if(b<=e.length){g=c==f(e.slice(m,b));m=b;break}else if(c.slice(0,x)==f(e.slice(m))){k+=e;e="";try{e=h.next()}catch(B){if(B!=StopIteration)throw B;break}m=0;c=c.slice(x)}else break}g&&d||(e=k.slice(n.length)+e,m=q,k=n);return g},lookAheadRegex:function(c,d){if("^"!=c.source.charAt(0))throw Error("Regexps passed to lookAheadRegex must start with ^");
for(;-1==e.indexOf("\n",m);)try{e+=h.next()}catch(b){if(b!=StopIteration)throw b;}(c=e.slice(m).match(c))&&d&&(m+=c[0].length);return c},more:function(){return null!==this.peek()},applies:function(c){var d=this.peek();return null!==d&&c(d)},nextWhile:function(c){for(var d;null!==(d=this.peek())&&c(d);)this.next()},matches:function(c){var d=this.peek();return null!==d&&c.test(d)},nextWhileMatches:function(c){for(var d;null!==(d=this.peek())&&c.test(d);)this.next()},equals:function(c){return c===this.peek()},
endOfLine:function(){var c=this.peek();return null==c||"\n"==c}}},tokenizer:function(h,g){function e(c){return"\n"!=c&&/^[\s\u00a0]*$/.test(c)}var m={state:g,take:function(c){"string"==typeof c&&(c={style:c,type:c});c.offset=h.getOffset();c.content=(c.content||"")+h.get();/\n$/.test(c.content)||h.nextWhile(e);c.value=c.content+h.get();return c},next:function(){if(!h.more())throw StopIteration;var c;if(h.equals("\n"))return h.next(),this.take("whitespace");if(h.applies(e))c="whitespace";else for(;!c;)c=
this.state(h,function(c){m.state=c});return this.take(c)}};return m}}})},"davinci/js/JSExpression":function(){define(["dojo/_base/declare","davinci/js/JSElement"],function(q,n){return q("davinci.js.JSExpression",n,{constructor:function(){this.elementType="JSExpression"},getText:function(){var h="";this.comment&&(h+=this.printNewLine(context)+this.comment.getText(context));this.label&&(h+=this.printNewLine(context)+this.label.getText(context));return h},add:function(h){}})})},"davinci/js/JSElement":function(){define(["dojo/_base/declare",
"davinci/js/JSModel"],function(q,n){var h=null,g=null;return q("davinci.js.JSElement",n,{constructor:function(){this.elementType="JSElement";null!==h&&(this.comment=h,h=null);null!==g&&(this.label=g,g=null)},printNewLine:function(e){for(var g="\n",c=0;c<e.indent;c++)g+=" ";return g},printStatement:function(e,g){return this.printNewLine(e)+g.getText(e)+(g.nosemicolon?"":";")},add:function(e){this.addChild(e)},init:function(e,g,c){},getLabel:function(){context={indent:0};return this.getText(context)},
getID:function(){return this.parent.getID()+":"+this.startLine+":"+this.getLabel()},getSyntaxPositions:function(e){function g(c,d,b,a){"undefined"!=typeof e&&e!=c||k.push({line:c,col:d,length:b,type:a})}function c(c,d,b){"undefined"!=typeof e&&e!=c[0]||k.push({line:c[0],col:c[1],length:d,type:b})}var k=[];this.visit({visit:function(f){"JSFunction"==f.elementType?(g(f.startLine,f.startCol,8,"keyword"),c(f.leftParenPos,1,"delimiter"),c(f.rightParenPos,1,"delimiter"),c(f.leftBracePos,1,"delimiter"),
c(f.rightBracePos,1,"delimiter")):"JSVariableDeclaration"==f.elementType?g(f.startLine,f.startCol,3,"keyword"):"JSVariableFragment"==f.elementType?f.equalPos?c(f.equalPos,1,"operator"):g(f.startLine,f.startCol,1,"name"):"JSNameReference"==f.elementType&&g(f.startLine,f.startCol,f.endCol-f.startCol,"name")},endVisit:function(c){return!0}});return k}})})},"davinci/js/JSModel":function(){define(["dojo/_base/declare","davinci/model/Model"],function(q,n){davinci.js||(davinci.js={});return q("davinci.js.JSModel",
n,{})})},"davinci/html/CSSParser":function(){define("dojo/_base/declare davinci/html/CSSSelector davinci/html/CSSCombinedSelector davinci/html/CSSRule davinci/html/CSSProperty davinci/html/CSSAtRule davinci/html/CSSImport davinci/model/parser/Tokenizer davinci/model/Comment".split(" "),function(q,n,h,g,e,m,c,k,f){var d=null,b=function(){function a(a,b,d){return function(c){return!a||/^\}/.test(c)?d:b?d+2*indentUnit:d+indentUnit}}var b=function(){function a(a,f){var e=a.next();if("@"==e)return a.nextWhileMatches(/[a-zA-Z0-9_-]/),
"css-at";if("/"==e&&a.equals("*"))return f(b),null;if("\x3c"==e&&a.equals("!"))return f(d),null;if("\x3d"==e)return"css-compare";if(!a.equals("\x3d")||"~"!=e&&"|"!=e){if('"'==e||"'"==e)return f(c(e)),null;if("#"==e)return a.nextWhileMatches(/[\w-]/),"css-hash";if("!"==e)return a.nextWhileMatches(/[ \t]/),a.nextWhileMatches(/\w/),"css-important";if(/\d/.test(e))return a.nextWhileMatches(/[\w.%]/),"css-unit";if(/[,.+>*\/]/.test(e))return"css-select-op";if(/[;{}:\[\]]/.test(e))return"css-punctuation";
a.nextWhileMatches(/[\w\\\-_]/);return"css-identifier"}a.next();return"css-compare"}function b(b,d){for(var c=!1;!b.endOfLine();){var f=b.next();if(c&&"/"==f){d(a);break}c="*"==f}return"css-comment"}function d(b,d){for(var c=0;!b.endOfLine();){var f=b.next();if(2<=c&&"\x3e"==f){d(a);break}c="-"==f?c+1:0}return"css-comment"}function c(b){return function(d,c){for(var f=!1;!d.endOfLine();){var e=d.next();if(e==b&&!f)break;f=!f&&"\\"==e}f||c(a);return"css-string"}}return function(b,d){return k.tokenizer(b,
d||a)}}();return{make:function(d,c){c=c||0;var f=b(d),e=!1,g=!1,k=!1,h={next:function(){var b=f.next(),d=b.style,h=b.content;"css-hash"==d&&(d=b.style=g?"css-colorcode":"css-identifier");"css-identifier"==d&&(g?b.style="css-value":e||k||(b.style="css-selector"));"\n"==h&&(b.indentation=a(e,g,c));"{"==h&&"@media"==k?k=!1:"{"==h?e=!0:"}"==h?e=g=k=!1:";"==h?g=k=!1:e&&"css-comment"!=d&&"whitespace"!=d?g=!0:e||"css-at"!=d||(k=h);return b},copy:function(){var a=e,d=g,c=f.state;return function(k){f=b(k,
c);e=a;g=d;return h}}};return h},electricChars:"}"}}();b.parse=function(a,p){function r(){var a;u=z.next();for(var b=!1;"css-comment"==u.style||"whitespace"==u.style;){if("css-comment"==u.style||b)d||(d=new f),a=u.content,0===u.content.indexOf("/*")&&(a=a.substring(2),b=!0,d.addComment("block",void 0,void 0,"")),-1<a.lastIndexOf("*/")&&a.lastIndexOf("*/")==a.length-2&&(a=a.substring(0,a.length-2),b=!1),d.appendComment(a);u=z.next()}return u}function q(){y=new n;y.startOffset=u.offset;y.parent=D;A?
(A.selectors.push(y),y.parent=A):D.selectors.push(y)}function w(){var a=y;a.endOffset=u.offset-1;A||(A=new h,A.parent=D,A.selectors.push(a),y.startOffset=a.startOffset,D.selectors[D.selectors.length-1]=A);q();A.combiners.push(C);C=" "}var x,B;"string"==typeof a?x=k.stringStream({next:function(){if(1==++this.count)return a;throw StopIteration;},count:0,text:a}):(x=a,B=!0);var z=b.make(x),u,y,A,C=" ",F=[],E=[],D,H;try{do switch(r(),u.style){case "css-selector":case "css-select-op":if(B&&"\x3c"==u.content)throw x.push("\x3c"),
StopIteration;D=new g;E.push(D);D.startOffset=u.offset;p&&p.addChild(D,void 0,!0);H=!1;A=void 0;C=" ";q();a:for(;;){switch(u.style){case "css-select-op":switch(u.content){case ",":A=void 0;q();break;case ".":H&&w();r();y.cls=y.cls?y.cls+"."+u.content:u.content;H=u.value.length>u.content.length;break;case "*":(y.element||y.cls)&&w();y.element="*";break;case "+":case "\x3e":C=u.content,w()}break;case "css-selector":"css-identifier"==u.type?((y.element||y.cls||H)&&w(),y.element=u.content):"css-hash"==
u.type&&((y.id||H)&&w(),y.id=u.content.substring(1));H=u.value.length>u.content.length;break;case "css-punctuation":if("{"==u.content)break a;else":"==u.content?(r(),":"==u.content?(r(),y.pseudoElement=u.content):(y.pseudoRule=u.content,H=!0)):"["==u.content&&(r(),y.attribute={name:u.content},r(),"\x3d"===u.content||"~\x3d"===u.content||"|\x3d"===u.content)&&(y.attribute.type=u.content,r(),y.attribute.value=u.content.substring(1,u.content.length-1),r())}r()}d&&(D.comment=d,d=null);for(y.endOffset=
u.offset-1;"}"!=r().content;){var O=u.offset,K=u.content,L=!1;"css-hash"==u.type?(r(),"css-identifier"==u.type?K+=u.content:L=!0):"css-identifier"!=u.type&&("*"!=u.content?F.push("expecting identifier around "+y.getText()+"{ "+J.name+": "+propery.value):(r(),K+=u.content));var J=new e;J.startOffset=O;J.parent=D;d&&(J.comment=d,d=null);D.properties.push(J);D.addChild(J,void 0,!0);J.name=K;L||":"!=r().content&&F.push("expecting ':' "+y.getText()+"{ "+J.name+": "+propery.value);r();J.value=u.value;if("url"==
J.value){for(;")"!=r().content;)J.value+=u.value;J.value+=u.value}for(;";"!=r().content&&"}"!=u.content;)J.value+=u.value;d&&(J.postComment=d,d=null);J.endOffset=u.offset-1;if("}"==u.content)break}d&&(J.postComment=d,d=null);D.endOffset=u.offset;break;case "css-at":var I=u.content.substring(1),G="import"==I?new c:new m;G.startOffset=u.offset;p&&p.addChild(G,void 0,!0);if("import"==I)L=G,r(),"url"==u.content&&(L.isURL=!0,r(),r()),L.url=u.content.substring(1,u.content.length-1),L.isURL&&r(),r();else if(0<=
I.indexOf("keyframes")){var M=L="",Q=!1,R="\t\t";r();L=u.content;"."==L&&(r(),L+=u.content);r();G.value=u.content+"\n";r();if(0<=u.content.indexOf("from")||0<=u.content.indexOf("to")||0<=u.content.indexOf("%"))a:for(;;){G.value+="\t"+u.content+" ";r();for(G.value+=u.content+"\n";"}"!=r().content;){Q&&(R="\t\t",Q=!1);if(";"==u.content)M="\n",Q=!0;else if(":"==u.content||")"==u.content)M=" ";G.value+=R+u.content+M;R=M=""}G.value+="\t"+u.content+"\n";r();if("}"==u.content)break a}else F.push("inside keyframes decl expecting from/to blocks or nn% blocks");
G.value+=u.content;G.name=I+" "+L}else for(G.name=I,G.value="";";"!=r().content;)G.value+=u.content;G.endOffset=u.offset}while(1)}catch(P){d&&D&&(D.postComment=d,d=null)}return{errors:F,model:E}};return b})},"davinci/html/CSSSelector":function(){define(["require","dojo/_base/declare","davinci/html/CSSElement"],function(q,n,h){n=n("davinci.html.CSSSelector",h,{constructor:function(){this.elementType="CSSSelector"},matchesSelector:function(g){if(g.elementType==this.elementType&&this.id==g.id&&this.cls==
g.cls&&this.element==g.element&&this.pseudoRule==g.pseudoRule)return!0},getText:function(g){g="";this.element&&(g+=this.element);this.id&&(g=g+"#"+this.id);this.cls&&(g=g+"."+this.cls);this.pseudoRule&&(g=g+":"+this.pseudoRule);this.pseudoElement&&(g=g+"::"+this.pseudoElement);this.attribute&&(g=g+"["+this.attribute.name,this.attribute.type&&(g=g+this.attribute.type+'"'+this.attribute.value+'"'),g+="]");return g},matches:function(g,e){e=g[e||0];g=0;var h=!1;if(this.id){if(this.id!=e.id)return-1;g+=
100;h=!0}if(this.element){if("*"!=this.element){if(this.element!=e.tagName&&this.element.toUpperCase()!=e.tagName)return-1;g+=1}h=!0}if(this.cls&&e.classes){e=e.classes;if(0<=this.cls.indexOf(".")){for(var h=this.cls.split("."),c=0;c<h.length;c++){for(var k=!1,f=0;f<e.length&&!(k=e[f]==h[c]);f++);if(!k)return-1}g+=10*h.length}else{k=!1;for(f=0;f<e.length&&!(k=e[f]==this.cls&&!this.pseudoRule);f++);if(!k)return-1;g+=10}h=!0}return h?g:-1},getCSSRule:function(){return"CSSRule"==this.parent.elementType?
this.parent:this.parent.parent}});n.parseSelectors=function(g){if("string"==typeof g){g+="{}";var e=new (q("davinci/html/CSSFile"));e.setText(g);return e.children[0].selectors}return g};return n})},"davinci/html/CSSElement":function(){define(["dojo/_base/declare","davinci/model/Model"],function(q,n){return q("davinci.html.CSSElement",n,{constructor:function(){"undefined"!=typeof pushComment&&null!==pushComment&&(this.comment=pushComment,pushComment=null);this.elementType="CSSElement"},getLabel:function(){context=
{indent:0,noComments:!0};return this.getText(context)},onChange:function(h){if(this.parent)if(h)this.parent.onChange(h);else this.parent.onChange(this)},close:function(h){for(h=0;h<this.children;h++)this.children[h].close()},getCSSFile:function(){var h=this.getCSSRule();if(h)return h.parent},getCSSRule:function(){},_convertNode:function(h){if(dojo.isArray(h))return h;for(var g=[];h&&"HTML"!=h.tagName;)g.push({tagName:h.tagName,id:h.id,classes:h.className&&h.className.split(" ")}),h=h.parentNode;return g},
getID:function(){return this.parent.getID()+":"+this.startOffset+":"+this.getLabel()}})})},"davinci/html/CSSCombinedSelector":function(){define(["dojo/_base/declare","davinci/html/CSSElement"],function(q,n){return q("davinci.html.CSSCombinedSelector",n,{constructor:function(){this.selectors=[];this.combiners=[];this.elementType="CSSCombinedSelector"},matchesSelector:function(h){if(h.elementType==this.elementType&&h.selectors.length==this.selectors.length){for(var g=0;g<this.selectors.length;g++)if(this.combiners[g]!=
h.combiners[g]||!this.selectors[g].matchesSelector(h.selectors[g]))return!1;return!0}},getText:function(h){for(var g="",e=0;e<this.selectors.length-1;e++)g+=this.selectors[e].getText(h),g=" "!=this.combiners[e]?g+(" "+this.combiners[e]+" "):g+this.combiners[e];return g+=this.selectors[this.selectors.length-1].getText(h)},matches:function(h){for(var g=this.selectors.length-1,e=0,m=0;m<h.length;m++){var c;if(0<=(c=this.selectors[g].matches(h,m))&&(e+=c,g--,0>g))return e;if(0==m&&0>c)return-1}},visit:function(h){if(!h.visit(this)){for(var g=
0;g<this.children.length;g++)this.children[g].visit(h);for(g=0;g<this.selectors.length;g++)this.selectors[g].visit(h)}h.endVisit&&h.endVisit(this)},getCSSRule:function(){return this.parent}})})},"davinci/html/CSSRule":function(){define(["dojo/_base/declare","davinci/html/CSSElement","davinci/html/CSSParser","davinci/html/CSSProperty"],function(q,n,h,g){return q("davinci.html.CSSRule",n,{constructor:function(){this.elementType="CSSRule";this.selectors=[];this.properties=[]},getText:function(e){var g=
"";e=e||[];this.comment&&!e.noComments&&(g+=this.comment.getText(e));for(var g=g+this.getSelectorText(e),g=g+" {",c=0;c<this.properties.length;c++)g=g+"\n    "+this.properties[c].getText(e);g+="\n}\n";this.postComment&&!e.noComments&&(g+=this.postComment.getText(e));return g},setText:function(e){require("davinci/html/CSSParser").parse(e,this);dojo.mixin(this,this.children[0]);this.startOffset=(this.parent?this.parent.endOffset:0)+1;this.setDirty(!0)},addProperty:function(e,h){e=new g(e,h,this);this.properties.push(e);
this.setDirty(!0);this.onChange()},insertProperty:function(e,h,c){var k;(k=this.getProperty(e))&&this.removeProperty(e);k=new g(e,h,this);this.properties.splice(c,0,k);this.setDirty(!0);this.onChange()},getSelectorText:function(e){for(var g="",c=0;c<this.selectors.length;c++)0<c&&(g+=", "),g+=this.selectors[c].getText(e);return g},matches:function(e){e=this._convertNode(e);for(var g,c=0;c<this.selectors.length;c++)if(0<=(g=this.selectors[c].matches(e)))return g},visit:function(e){if(!e.visit(this)){for(var g=
0;g<this.children.length;g++)this.children[g].visit(e);for(g=0;g<this.selectors.length;g++)this.selectors[g].visit(e)}e.endVisit&&e.endVisit(this)},hasSelector:function(e){for(var g=0;g<this.selectors.length;g++)if(this.selectors[g].getLabel()==e)return!0;return!1},matchesSelectors:function(e){for(var g=0;g<e.length;g++)for(var c=0;c<this.selectors.length;c++)if(this.selectors[c].matchesSelector(e[g]))return!0;return!1},getCSSRule:function(){return this},getLabel:function(){return this.getSelectorText({})},
getProperty:function(e){for(var g=0;g<this.properties.length;g++)if(e==this.properties[g].name)return this.properties[g]},hasProperty:function(e){for(var g=0;g<this.properties.length;g++)if(e==this.properties[g].name)return!0},getProperties:function(e){for(var g=[],c=0;c<this.properties.length;c++)e&&e!=this.properties[c].name||g.push(this.properties[c]);return g},setProperty:function(e,h){var c=this.getProperty(e);h?c?c.value=h:(c=new g,c.name=e,c.value=h,this.properties.push(c),c.parent=this):this.removeProperty(e);
this.setDirty(!0);this.onChange()},removeProperty:function(e){for(var g=0;g<this.properties.length;g++)e==this.properties[g].name&&this.properties.splice(g,1);this.setDirty(!0);this.onChange()},removeAllProperties:function(){this.properties=[];this.setDirty(!0);this.onChange()},removeStyleValues:function(e){for(var g=[],c=0;c<this.properties.length;c++){for(var k,f=0;f<e.length&&!k;f++)k=e[f]==this.properties[c].name;k||(g=this.properties[c])}this.properties=g;this.setDirty(!0);this.onChange()}})})},
"davinci/html/CSSProperty":function(){define(["dojo/_base/declare","davinci/html/CSSElement"],function(q,n){return q("davinci.html.CSSProperty",n,{constructor:function(h,g,e){this.elementType="CSSProperty";this.name=h||"";this.value=g||"";this.parent=e;this.expanded=[];this.lengthValues=[]},getValue:function(){return this.value},getText:function(h){var g="";this.comment&&!h.noComments&&(g+="\n  "+this.comment.getText(h));g+=this.name+" : "+this.value;this.isNotImportant&&(g+=" !important");g+=";";
this.postComment&&!h.noComments&&(g+=this.postComment.getText(h));return g},getCSSRule:function(){return this.parent},addProperty:function(h,g){h=new CSSProperty(h,g,this);this.properties.push(h)},getURL:function(){if(this.url){var h=new davinci.model.Path(this.getCSSFile().url),h=h.getParentPath().append(this.url);return h.toString()}}})})},"davinci/html/CSSAtRule":function(){define(["dojo/_base/declare","davinci/html/CSSElement"],function(q,n){return q("davinci.html.CSSAtRule",n,{constructor:function(){this.elementType=
"CSSAtRule"},getCSSFile:function(){return this.parent},getText:function(h){s="@";return s=s+this.name+" "+this.value+"\n"}})})},"davinci/html/CSSImport":function(){define(["dojo/_base/declare","davinci/html/CSSElement","davinci/model/Path","davinci/html/CSSFile"],function(q,n,h,g){return q("davinci.html.CSSImport",n,{constructor:function(){this.elementType="CSSImport"},getCSSFile:function(){return this.parent},setUrl:function(e){this.url=e},visit:function(e){if(!e.visit(this)){for(var g=0;g<this.children.length;g++)this.children[g].visit(e);
this.cssFile&&this.cssFile.visit(e)}e.endVisit&&e.endVisit(this)},getText:function(e){s="@import ";return s=this.isURL?s+('url("'+this.url+'");'):s+('"'+this.url+'";')},close:function(e){require("davinci/model/Factory").closeModel(this.cssFile);this.connection&&dojo.disconnect(this.connection);delete this.connection},load:function(e){for(var g=this.parent;g&&!g.url&&!g.fileName;)g=g.parent;g=new h(g.url||g.fileName);g=g.getParentPath().append(this.url);g=g.toString();this.cssFile=require("davinci/model/Factory").getModel({url:g,
loader:this.parent.loader,includeImports:this.parent.includeImports||e});this.cssFile.relativeURL=this.url;this.connection=dojo.connect(this.cssFile,"onChange",this.parent,"onChange")}})})},"davinci/html/CSSFile":function(){define("dojo/_base/declare dojo/_base/lang davinci/html/CSSElement davinci/html/CSSRule davinci/html/CSSSelector system/resource davinci/Workbench".split(" "),function(q,n,h,g,e,m,c){return q("davinci.html.CSSFile",h,{constructor:function(c){this.elementType="CSSFile";n.mixin(this,
c);this.options||(this.options={xmode:"style",css:!0,expandShorthand:!1});c=null;this.url&&this.loader?c=this.loader(this.url):this.url&&"app.css"===this.url&&this.setText("BODY {background-color: red!important;}");c&&this.setText(c)},save:function(c){return m.findResourceAsync(this.url).then(function(f){return f.setContents(this.getText(),c)}.bind(this))},close:function(){this.visit({visit:function(c){"CSSImport"==c.elementType&&c.close()}});require(["dojo/_base/connect"],function(c){c.publish("davinci/model/closeModel",
[this])})},addRule:function(c){var f=new g;f.setText(c);this.addChild(f);this.setDirty(!0);return f},setText:function(c){var f=this.children;this.children=[];this.errors=require("davinci/html/CSSParser").parse(c,this).errors;0<this.errors.length&&this.errors[this.errors.length-1].isException&&(this.children=f);this.includeImports&&this.children.forEach(function(d){"CSSImport"==d.elementType&&d.load()});this.onChange()},getText:function(c){c=c||{};c.indent=0;return this.children.map(function(f){return f.getText(c)}).join("")},
getCSSFile:function(){return this},getID:function(){return this.fileName},getMatchingRules:function(c,f,d){c=this._convertNode(c);f=f||[];d=d||[];for(var b=0;b<this.children.length;b++){var a=this.children[b];if("CSSRule"==a.elementType){var e=a.matches(c);if(e){for(var g=!1,k=0;k<d.length;k++)if(e>=d[k]){f.splice(k,0,a);d.splice(k,0,e);g=!0;break}g||(f.splice(0,0,a),d.splice(0,0,e))}}else"CSSImport"==a.elementType&&a.cssFile&&a.cssFile.getMatchingRules(c,f,d)}return f},getRule:function(c){var f;
if(!c)return[];c=e.parseSelectors(c);for(var d=0;d<this.children.length;d++){var b=this.children[d];if("CSSRule"==b.elementType){if(b.matchesSelectors(c)){f=b;break}}else"CSSImport"==b.elementType&&b.cssFile&&(f=b.cssFile.getRule(c)||f)}return f},getRules:function(c){c=e.parseSelectors(c);for(var f=[],d=0;d<this.children.length;d++){var b=this.children[d];"CSSRule"==b.elementType?b.matchesSelectors(c)&&f.push(b):"CSSImport"==b.elementType&&b.cssFile&&(f=f.concat(b.cssFile.getRules(c)))}return f},
getStyleValue:function(c,f){var d=[],b=[];f=this._convertNode(f);this.getMatchingRules(f,d,b);"string"==typeof c&&(c=[c]);return c.map(function(a){for(var c=0,f,e,g=0;g<d.length;g++)(e=d[g].getProperty(a))&&b[g]>c&&(f=e,c=b[g]);return f})}})})},"davinci/model/Comment":function(){define(["dojo/_base/declare","davinci/model/Model"],function(q,n){return q("davinci.model.Comment",n,{constructor:function(){this.elementType="Comment";this.nosemicolon=!0},addComment:function(h,g,e,m){null==this.comments&&
(this.comments=[]);this.comments[this.comments.length]={commentType:h,start:g,stop:e,s:m}},appendComment:function(h){var g=this.comments[this.comments.length-1];g.s+=h;g.stop+=h.length},getText:function(h){h="";for(var g=0;g<this.comments.length;g++)"line"==this.comments[g].commentType?h+="//"+this.comments[g].s+"\n":"block"==this.comments[g].commentType&&(h+="/*"+this.comments[g].s+"*/\n");return h}})})},"davinci/model/Factory":function(){define(["../html/CSSFile","../js/JSFile","../html/HTMLFile",
"system/resource"],function(q,n,h,g){var e=[],m=[],c={getModel:function(g){var f=g.url;if(!f)return null;for(var d=0;d<m.length;d++)if(m[d].url==f)return e[d]++,this.incrementImports(m[d]),m[d];if(/\.html?$/i.test(f)||/\.cfhtml?$/i.test(f))return c.newHTML(g);if(/\.css$/i.test(f))return c.newCSS(g);if(/\.js$/i.test(f))return c.newJS(g)},closeModel:function(c){c=c.url;if(!c)return null;for(var f=0;f<m.length;f++)m[f].url==c&&(e[f]--,0===e[f]&&(m.splice(f,1),e.splice(f,1)))},newHTML:function(c){c=new h(c.url);
m.push(c);e[m.length-1]=1;return c},newCSS:function(c){c=new q(c);m.push(c);e[m.length-1]=1;return c},newJS:function(c){c=new n(c);m.push(c);e[m.length-1]=1;return c},getNewFromResource:function(c){c=c.extension;if(!c)return new h;switch(c){case "html":return new h;case "css":return new q;case "js":case "json":return new n;default:return new h}},incrementImports:function(c){var f={visit:function(d){if("CSSImport"==d.elementType){d=d.cssFile.url;for(var b=0;b<m.length;b++)m[b].url==d&&e[b]++}return!1}};
c&&c.visit(f)},log:function(){for(var c=0;c<m.length;c++);}};require(["dojo/_base/connect"],function(e){e.subscribe("davinci/model/closeModel",c,c.closeModel)});return c})},"davinci/js/JSFile":function(){define(["dojo/_base/declare","davinci/js/JSElement"],function(q,n){return q("davinci.js.JSFile",n,{constructor:function(h){this.elementType="JSFile";this.nosemicolon=!0;this._textContent="";h&&(this.origin=h)},getText:function(h){return this._textContent},setText:function(h){this._textContent=h},
getLabel:function(){return this.fileName},getID:function(){return this.fileName},visit:function(h){if(!h.visit(this))for(var g=0;g<this.children.length;g++)this.children[g].visit(h);h.endVisit&&h.endVisit(this)}})})},"davinci/ve/widgets/CommonProperties":function(){define(["dojo/_base/declare","davinci/workbench/ViewLite","davinci/ve/commands/ModifyCommand"],function(q,n,h){return q("davinci.ve.widgets.CommonProperties",[n],{buildRendering:function(){var g=["title"],e;e="\x3ctable width\x3d'100%' class\x3d'property_table_stretchable' border\x3d'0' cellspacing\x3d'0' cellpadding\x3d'0'\x3e\x3ccolgroup\x3e\x3ccol style\x3d'width:15px;' /\x3e\x3ccol class\x3d'gap02' /\x3e\x3ccol class\x3d'gap03' /\x3e\x3ccol style\x3d'width:15px;' /\x3e\x3c/colgroup\x3e";
var h=0;this._boxes={};for(var c=0;c<g.length;c++)this._boxes[g[c]]={value:""},this._boxes[g[c]].id="davinci_properties_event_"+h++ +"_combo",e+="\x3ctr\x3e",e+="\x3ctd/\x3e",e+="\x3ctd class\x3d'propertyDisplayName'\x3e",e+=g[c]+":",e+="\x3c/td\x3e",e+="\x3ctd\x3e",e+="\x3cinput type\x3d'text' id\x3d'"+this._boxes[g[c]].id+"'\x3e\x3c/input\x3e",e+="\x3c/td\x3e",e+="\x3ctd/\x3e",e+="\x3c/tr\x3e";e+="\x3c/table\x3e";this.domNode=dojo.doc.createElement("div");this.domNode.innerHTML=e;dojo.subscribe("/davinci/ui/widgetValuesChanged",
dojo.hitch(this,this.onWidgetSelectionChange));dojo.subscribe("/davinci/ui/widget/replaced",dojo.hitch(this,this._widgetReplaced));this.inherited(arguments)},onEditorSelected:function(g){this._editor&&this._editor.getContext?(this.context=this._editor.getContext(),this._setValues()):(this.context=this._widget=this._subwidget=null,this._clearValues())},startup:function(){function g(e){return function(){return this._onChange({target:e})}}this.inherited(arguments);for(var e in this._boxes)this._boxes[e].domNode=
dojo.byId(this._boxes[e].id),dojo.connect(this._boxes[e].domNode,"onchange",this,g(e)),dojo.connect(this._boxes[e].domNode,"onfocus",this,"_onFocus"),dojo.connect(this._boxes[e].domNode,"onblur",this,"_onBlur")},_onFocus:function(){this.context&&this.context.blockChange(!0)},_onBlur:function(){this.context&&this.context.blockChange(!1)},_onChange:function(g){g=g.target;var e=dojo.attr(this._boxes[g].domNode,"value");this.context&&this.context.blockChange(!1);if(this._boxes[g].value!=e){this._boxes[g].value=
e;var m={};m[g]=e;g=new h(this._widget,m,null);dojo.publish("/davinci/ui/widgetPropertiesChanges",[{source:this._editor.editor_id,command:g}])}},_widgetReplaced:function(g,e){this._widget===e&&(this._widget=g,this.onWidgetSelectionChange())},onWidgetSelectionChange:function(){this._widget?(this._setValues(),this.set("readOnly",!1)):(this.set("readOnly",!0),this._clearValues())},_clearValues:function(){for(name in this._boxes)this._boxes[name].domNode&&dojo.attr(this._boxes[name].domNode,"value",""),
this._boxes[name].value=null},_setValues:function(){if(this._widget)for(var g in this._boxes){var e=this._widget,h=this._boxes[g];h.domNode&&h.domNode.ownerDocument&&(e.getPropertyValue?(e=e.getPropertyValue(g),h.value!=e&&(h.value=e,dojo.attr(h.domNode,"value",h.value))):(h.value="",dojo.attr(h.domNode,"value","")))}}})})},"davinci/ve/widgets/WidgetProperties":function(){define("dojo/_base/declare dojo/_base/connect davinci/workbench/ViewLite davinci/ve/metadata davinci/commands/CompoundCommand davinci/ve/commands/ModifyCommand ./HTMLStringUtil dijit/form/DateTextBox dijit/form/TimeTextBox xide/types xide/factory".split(" "),
function(q,n,h,g,e,m,c,k,f,d,b){return q("davinci.ve.widgets.WidgetProperties",[h],{key:"widgetSpecific",_connects:null,buildRendering:function(){this.domNode=this.propDom=dojo.doc.createElement("div");dojo.addClass(this.domNode,"propGroup");dojo.attr(this.domNode,"propGroup",this.key);this._connects=[];this.inherited(arguments)},onWidgetSelectionChange:function(){if(this._widget&&this._editor&&"davinci.ve.HTMLPageEditor"==this._editor.editorID){var a=davinci.ve.metadata.query(this._widget),b=this._widget.getParent();
if(b&&b.isWidget&&(b=g.query(b))&&b.childProperties)if(a.$ownproperty)for(var d in b.childProperties)a.$ownproperty[d]=b.childProperties[d];else a.$ownproperty=b.childProperties;if(a&&a.$ownproperty){this._disconnectAll();this._destroyProperties();b={};a.$ownproperty.title||(b.title={datatype:"string"});for(d in a.$ownproperty)b[d]=a.$ownproperty[d];a=this.propDom.innerHTML=this._createWidgetRows(b);-1===a.indexOf("data-dojo-type")&&-1===a.indexOf("dojoType")||dojo.parser.parse(this.propDom);this._setValues();
this._connectAll()}}else this._disconnectAll(),this._destroyProperties()},onEditorSelected:function(a){if((this._editor=a)&&"davinci.ve.HTMLPageEditor"==a.editorID){if(this.context=a.getContext())this._widget=this.context.getSelection()[0]}else this._widget=this.context=null;this.onWidgetSelectionChange()},_createWidgetRows:function(a){this._pageLayout=[];for(var b in a){var d=a[b];if(!d.hidden){var f={display:d.title||b,type:d.datatype,format:d.format,target:b,hideCascade:!0,data:d};if(d.dropdownQueryValues&&
d.dropdownQueryAttribute){var e=[];dojo.forEach(d.dropdownQueryValues,dojo.hitch(this,function(a){a=dojo.query(a,this.context.rootNode);dojo.forEach(a,function(a){e.push(a.getAttribute(d.dropdownQueryAttribute))})}));f.values=e;f.type="comboEdit"}if(dojo.isArray(d.mustHaveAncestor)){for(var g=!1,k=this._widget;!g&&k&&k.getParent()!=this.context.rootWidget;)(k=k.getParent())&&-1<dojo.indexOf(d.mustHaveAncestor,k.type)&&(g=!0);g||(f.disabled=!0)}this._pageLayout.push(f);d.option&&(this._pageLayout[this._pageLayout.length-
1].values=dojo.map(d.option,function(a){return a}),this._pageLayout[this._pageLayout.length-1].type=d.unconstrained?"comboEdit":"combo")}}return c.generateTable(this._pageLayout)},_destroyProperties:function(){var a=this.propDom;for(dojo.forEach(dojo.query("[widgetId]",a).map(dijit.byNode),function(a){a.destroy()});a.firstChild;)dojo._destroyElement(a.firstChild)},_connectAll:function(){function a(a){return function(){return this._onChange({target:a})}}for(var c=0,f=this._pageLayout.length;c<f;c++){var e=
this._pageLayout[c],g=dijit.byId(e.id),k=g||dojo.byId(e.id),h=g?"onChange":"change",m=g?"onFocus":"focus",n=g?"onBlur":"blur";k?(k.pageIndex=c,this._connect(k,h,this,a(c)),this._connect(k,m,this,"_onFieldFocus"),this._connect(k,n,this,"_onFieldBlur"),k.owner=this,k.row=c,b.publish(d.EVENTS.WIDGET_PROPERTY_RENDERED,{view:this,row:e,widget:g,node:k},this)):console.error("cant find "+e.id+" node",e)}},_connect:function(a,b,d,c,f){this._connects.push(n.connect.apply(null,arguments))},_disconnectAll:function(){this._connects.forEach(n.disconnect);
this._connects=[]},_onChange:function(a){a=this._pageLayout[a.target];var b=dijit.byId(a.id),d;this.context&&this.context.blockChange(!1);b?(d=b.get("value"))&&d instanceof Date&&(b instanceof k?d=d.toISOString().substring(0,10):b instanceof f&&(d="T"+d.toTimeString().substring(0,8))):(d=dojo.byId(a.id),d=dojo.attr(d,"checkbox"===d.type?"checked":"value"));if(a.value!=d){a.value=d;b={};b[a.target]=d;a=new e;d=new m(this._widget,b,null);a.add(d);if((b=this._widget.getHelper())&&b.onWidgetPropertyChange)b.onWidgetPropertyChange({widget:this._widget,
compoundCommand:a,modifyCommand:d});dojo.publish("/davinci/ui/widgetPropertiesChanges",[{source:this._editor.editor_id,compoundCommand:a,command:d}])}},_onFieldFocus:function(){this.context&&this.context.blockChange(!0)},_onFieldBlur:function(){this.context&&this.context.blockChange(!1)},_setValues:function(){try{for(var a=0,b=this._pageLayout.length;a<b;a++){var d=this._pageLayout[a],c=dojo.byId(d.id);if(c){var f=this._widget,e=d.target,g;g="_children"===e?(g=f.getChildrenData())&&1===g.length?g[0]:
f.getPropertyValue(e):f.getPropertyValue(e);if(g&&g.toISOString){var k=f.metadata.property[e].format;k&&("date"==k?g=g.toISOString().substring(0,10):"time"==k&&(g="T"+g.toTimeString().substring(0,8)))}if(d.value!=g){d.value=g;var h="boolean"===d.type?"checked":"value",m=dijit.byId(d.id);m?m.attr(h,d.value):dojo.attr(c,h,d.value)}}}}catch(A){debugger}}})})},"davinci/ve/widgets/EventSelection":function(){define("dojo/_base/declare dojo/_base/connect dojo/dom-class system/resource davinci/Runtime davinci/Workbench davinci/model/Path ../../workbench/Preferences ../../workbench/ViewLite ../commands/EventCommand ./HTMLStringUtil ../States xide/types".split(" "),
function(q,n,h,g,e,m,c,k,f,d,b,a,p){var r=/^State:.*/,v=/^\s*davinci\.states\.setState\s*\(\s*([\'"])((?:(?!\1).)*)\1\s*\)\s*$/,w=/^File:.*/,x=/^\s*location\.href\s*\=\s*([\'"])((?:(?!\1).)*)\1\s*$/,B=function(b){b&&a.getAllStateContainers(b);return[""]},z=function(a){a&&a.match(r)&&(a=a.substring(6),a="davinci.states.setState('"+("Background"==a?"Normal":a)+"')");a&&a.match(w)&&(a="location.href\x3d'"+a.substring(5)+"'");return a},u=function(a){var b;a&&((b=a.match(v))&&(a="State:"+b[2]),(b=a.match(x))&&
(a="File:"+b[2]));return a};q=q("davinci.ve.widgets.EventSelection",[f],{pageTemplate:[{display:"onclick",target:"onclick",type:"state",hideCascade:!0},{display:"ondblclick",target:"ondblclick",type:"state",hideCascade:!0},{display:"onmousedown",target:"onmousedown",type:"state",hideCascade:!0},{display:"onmouseup",target:"onmouseup",type:"state",hideCascade:!0},{display:"onmouseover",target:"onmouseover",type:"state",hideCascade:!0},{display:"onmousemove",target:"onmousemove",type:"state",hideCascade:!0},
{display:"onmouseout",target:"onmouseout",type:"state",hideCascade:!0},{display:"onkeypress",target:"onkeypress",type:"state",hideCascade:!0},{display:"onkeydown",target:"onkeydown",type:"state",hideCascade:!0},{display:"onkeyup",target:"onkeyup",type:"state",hideCascade:!0},{display:"onfocus",target:"onfocus",type:"state",hideCascade:!0},{display:"onblur",target:"onblur",type:"state",hideCascade:!0},{display:"onchange",target:"onchange",type:"state",hideCascade:!0}],buildRendering:function(){this.domNode=
dojo.doc.createElement("div");this.domNode.innerHTML=b.generateTable(this.pageTemplate,{zeroSpaceForIncrDecr:!0});h.add(this.domNode,"EventSelection");this.inherited(arguments)},setReadOnly:function(a){for(var b=0;b<this.pageTemplate.length;b++){var d=this.pageTemplate[b].widget;d?d.set("readOnly",a):(d=this.pageTemplate[b].domNode)&&dojo.attr(d,"disabled",a)}},startup:function(){function a(a){return function(){return this._onChange({target:a})}}this.inherited(arguments);for(var b=0;b<this.pageTemplate.length;b++){var d=
dijit.byId(this.pageTemplate[b].id);this.pageTemplate[b].widget=d;n.connect(d,"onChange",this,a(b))}this._buildSelectionValues();this.subscribe("/davinci/ui/context/loaded",dojo.hitch(this,this._buildSelectionValues));this.subscribe("/davinci/states/stored",dojo.hitch(this,this._buildSelectionValues));this.subscribe("/davinci/states/state/added",dojo.hitch(this,this._buildSelectionValues));this.subscribe("/davinci/states/state/removed",dojo.hitch(this,this._updateValues));this.subscribe("/davinci/states/state/renamed",
dojo.hitch(this,this._updateValues));this.subscribe("/davinci/ui/widgetPropertiesChanged",dojo.hitch(this,this._widgetPropertiesChanged));this.publish(p.EVENTS.ON_EVENT_SELECTION_RENDERED,{eventSelection:this,pageTemplate:this.pageTemplate});this.setReadOnly(!0)},onEditorSelected:function(){this._editor&&this._editor.supports("states")||delete this._editor;this._buildSelectionValues()},_onChange:function(a){a=a.target;var b=dijit.byId(this.pageTemplate[a].id),c=b.get("value"),c=z(c),f={};f[this.pageTemplate[a].target]=
c;f=new d(this._widget,f);dojo.publish("/davinci/ui/widgetPropertiesChanges",[{source:this._editor.editor_id,command:f}]);this.publish(p.EVENTS.ON_WIDGET_PROPERTY_CHANGED,{widget:b,editor:this._editor,eventSelection:this,pageTemplate:this.pageTemplate,widgetProperty:this.pageTemplate[a].target,value:c,target:this._widget})},_getRoot:function(){var a=this._editor,b;a&&a.getContext&&(b=(a=a.getContext())&&a.rootNode);return b},_updateValues:function(a){a&&a.node&&a.node._dvWidget&&(a=(a=a.node._dvWidget.getContext())&&
a.editor)&&a==e.currentEditor&&(this._buildSelectionValues(),this._widget&&this._setValues())},onWidgetSelectionChange:function(){this._widget?(this._setValues(),this.setReadOnly(!1)):(this.setReadOnly(!0),this._clearValues())},_clearValues:function(){for(var a=0;a<this.pageTemplate.length;a++)dijit.byId(this.pageTemplate[a].id).set("value","",!1)},_buildSelectionValues:function(){for(var a=this._getRoot(),a=B(a),b=0;b<this.pageTemplate.length;b++){var d=dijit.byId(this.pageTemplate[b].id);d.store.clearValues();
d.store.setValues(a)}},_setValues:function(){for(var a=0;a<this.pageTemplate.length;a++){var b=this.pageTemplate[a].target,d=this._widget,c="";d.properties&&d.properties[b]?c=d.properties[b]:d._srcElement&&(c=d._srcElement.getAttribute(b));c=u(c);(b=dijit.byId(this.pageTemplate[a].id))&&b.set("value",c,!1)}},_widgetPropertiesChanged:function(a){this._updateValues({widget:a[0]})}});q.getEventSelectionValues=B;q.getEventScriptFromValue=z;q.getValueFromEventScript=u;return q})},"davinci/actions/UndoAction":function(){define(["dojo/_base/declare",
"./Action","../Workbench"],function(q,n,h){return q("davinci.actions.UndoAction",n,{run:function(g){(g=h.getOpenEditor())&&g.getContext&&g.getContext().getCommandStack().undo()},isEnabled:function(g){var e=(g=h.getOpenEditor())&&g.getContext&&g.getContext();if(g&&e){if(e=e.getCommandStack().canUndo(),"davinci.ve.PageEditor"==g.declaredClass||"davinci.ve.themeEditor.ThemeEditor"==g.declaredClass)return e}else return!1}})})},"davinci/actions/Action":function(){define(["dojo/_base/declare"],function(q){return q("davinci.actions.Action",
null,{item:null,run:function(n){},isEnabled:function(n){return!0},getName:function(){return this.item.label}})})},"davinci/actions/SelectThemeAction":function(){define("dojo/_base/declare ./Action ../ui/widgets/ThemeSetSelection ../ve/commands/ChangeThemeCommand davinci/lang/actions davinci/Workbench".split(" "),function(q,n,h,g,e,m){return q("davinci.actions.SelectThemeAction",n,{run:function(c){if((c=davinci.Workbench.getOpenEditor())&&c.isDirty){var g=c.getOnUnloadWarningMessage();g||(g=dojo.string.substitute(e.filesHasUnsavedChanges,
[c.fileName]));m.showDialog({title:e.switchingThemes,content:g,style:{width:300},okCallback:dojo.hitch(this,this._okToSwitch),okLabel:e.save,hideCancel:null})}else this._okToSwitch()},_okToSwitch:function(){var c=davinci.Workbench.getOpenEditor();c.isDirty&&c.save();var e=c.getContext().getTheme(),c=c.getContext().getDojo().version.major+"."+c.getContext().getDojo().version.minor;this._themeChooser=new h({value:e,workspaceOnly:!1,dojoVersion:c});this._themeChooser.buildRendering()},_changeTheme:function(){var c=
this._themeChooser.attr("value");this._themeChooser.onClose();this._themeChooser.destroy();var e=davinci.Workbench.getOpenEditor();e&&e.getContext&&e.getContext().getCommandStack().execute(new g(c,e.getContext()))}})})},"davinci/ui/widgets/ThemeSetSelection":function(){define("dojo/_base/declare dijit/_WidgetBase dijit/_TemplatedMixin dijit/_WidgetsInTemplateMixin davinci/library system/resource davinci/workbench/Preferences davinci/Runtime davinci/Workbench davinci/ve/commands/ChangeThemeCommand davinci/ui/Dialog davinci/lang/ui dijit/lang/_common dijit/form/Button dijit/form/Select davinci/Theme dojo/text!./templates/ThemeSetSelection.html".split(" "),
function(q,n,h,g,e,m,c,k,f,d,b,a,p,r,v,w,x){q("davinci.ui.widgets.ThemeSetSelectionWidget",[n,h,g],{templateString:x,widgetsInTemplate:!0,uiNLS:a,commonNLS:p});return q("davinci.ui.widgets.ThemeSetSelection",null,{workspaceOnly:!1,_connections:[],_selectedThemeSet:null,constructor:function(a){dojo.safeMixin(this,a)},buildRendering:function(){this._dialog=new b({title:a.selectTheme,contentStyle:{width:372}});dojo.connect(this._dialog,"onCancel",this,"onClose");var d=null;this.newFile||(d=f.getOpenEditor().getContext());
(d=w.getThemeSet(d))||(d=w.dojoThemeSets.themeSets[0]);this._selectedThemeSet=d;this._dialog.attr("content",new davinci.ui.widgets.ThemeSetSelectionWidget({}));this._connections.push(dojo.connect(dijit.byId("theme_select_themeset_theme_select"),"onChange",this,"onChange"));this._connections.push(dojo.connect(dijit.byId("theme_select_desktop_theme_select"),"onChange",this,"onDesktopChange"));this._connections.push(dojo.connect(dijit.byId("theme_select_mobile_theme_select"),"onChange",this,"onMobileChange"));
this._connections.push(dojo.connect(this._dialog,"onExecute",this,"onOk"));this._connections.push(dojo.connect(dijit.byId("theme_select_cancel_button"),"onClick",this,"onClose"));this._connections.push(dojo.connect(dijit.byId("theme_select_android_select"),"onChange",this,"onAndroidThemeChange"));this._connections.push(dojo.connect(dijit.byId("theme_select_blackberry_select"),"onChange",this,"onBlackberryThemeChange"));this._connections.push(dojo.connect(dijit.byId("theme_select_ipad_select"),"onChange",
this,"oniPadThemeChange"));this._connections.push(dojo.connect(dijit.byId("theme_select_iphone_select"),"onChange",this,"oniPhoneThemeChange"));this._connections.push(dojo.connect(dijit.byId("theme_select_other_select"),"onChange",this,"onOtherThemeChange"));this.addThemeSets();dijit.byId("theme_select_themeset_theme_select").attr("value",d.name);this._dialog.show()},addThemeSets:function(){this._dojoThemeSets=w.getThemeSets(f.getProject());this._dojoThemeSets||(this._dojoThemeSets=w.dojoThemeSets);
this._dojoThemeSets=dojo.clone(this._dojoThemeSets);this._selectedThemeSet.name==w.none_themeset_name?this._dojoThemeSets.themeSets.unshift(this._selectedThemeSet):this._dojoThemeSets.themeSets.unshift(w.none_themeset);for(var a=dijit.byId("theme_select_themeset_theme_select"),b=0;b<this._dojoThemeSets.themeSets.length;b++)opt={value:this._dojoThemeSets.themeSets[b].name,label:this._dojoThemeSets.themeSets[b].name},a.addOption(opt)},addThemes:function(a){this._themeData=e.getThemes(f.getProject(),
this.workspaceOnly);var b=dijit.byId("theme_select_desktop_theme_select");b.options=[];var d=dijit.byId("theme_select_android_select");d.options=[];var c=dijit.byId("theme_select_blackberry_select");c.options=[];var g=dijit.byId("theme_select_ipad_select");g.options=[];var k=dijit.byId("theme_select_iphone_select");k.options=[];var h=dijit.byId("theme_select_other_select");h.options=[];var p=dijit.byId("theme_select_mobile_theme_select");b.options=[];p.options=[];p.addOption({value:w.default_theme,
label:w.default_theme});this._themeCount=this._themeData.length;for(var m=0;m<this._themeData.length;m++){var n={value:this._themeData[m].name,label:this._themeData[m].name};"dojox.mobile"===this._themeData[m].type?(p.addOption(n),d.addOption(n),c.addOption(n),g.addOption(n),k.addOption(n),h.addOption(n)):b.addOption(n)}b.attr("value",a.desktopTheme);for(b=0;b<a.mobileTheme.length;b++)switch(a.mobileTheme[b].device.toLowerCase()){case "android":d.attr("value",a.mobileTheme[b].theme);break;case "blackberry":c.attr("value",
a.mobileTheme[b].theme);break;case "ipad":g.attr("value",a.mobileTheme[b].theme);break;case "iphone":k.attr("value",a.mobileTheme[b].theme);break;case "other":h.attr("value",a.mobileTheme[b].theme)}w.singleMobileTheme(a)?p.attr("value",a.mobileTheme[a.mobileTheme.length-1].theme):p.attr("value",w.default_theme)},onChange:function(a){for(var b=0;b<this._dojoThemeSets.themeSets.length;b++)if(this._dojoThemeSets.themeSets[b].name==a){this.addThemes(this._dojoThemeSets.themeSets[b]);this._selectedThemeSet=
this._dojoThemeSets.themeSets[b];break}var b=dijit.byId("theme_select_mobile_theme_select"),d=dijit.byId("theme_select_desktop_theme_select"),c=dijit.byId("theme_select_android_select"),f=dijit.byId("theme_select_blackberry_select"),e=dijit.byId("theme_select_ipad_select"),g=dijit.byId("theme_select_iphone_select"),k=dijit.byId("theme_select_other_select");a===w.none_themeset_name?(b.set("disabled",!1),d.set("disabled",!1),c.set("disabled",!1),f.set("disabled",!1),e.set("disabled",!1),g.set("disabled",
!1),k.set("disabled",!1)):(b.set("disabled",!0),d.set("disabled",!0),c.set("disabled",!0),f.set("disabled",!0),e.set("disabled",!0),g.set("disabled",!0),k.set("disabled",!0))},onDesktopChange:function(a){this._selectedThemeSet.desktopTheme=a},onDeviceThemeChange:function(a,b){for(var d=0;d<this._selectedThemeSet.mobileTheme.length;d++)if(this._selectedThemeSet.mobileTheme[d].device.toLowerCase()===a.toLowerCase()){this._selectedThemeSet.mobileTheme[d].theme=b;break}},onAndroidThemeChange:function(a){this.onDeviceThemeChange("android",
a)},onBlackberryThemeChange:function(a){this.onDeviceThemeChange("blackberry",a)},oniPadThemeChange:function(a){this.onDeviceThemeChange("ipad",a)},oniPhoneThemeChange:function(a){this.onDeviceThemeChange("iphone",a)},onOtherThemeChange:function(a){this.onDeviceThemeChange("other",a)},onMobileChange:function(a){if(this._selectedThemeSet.name==w.none_themeset_name){var b=dijit.byId("theme_select_android_select"),d=dijit.byId("theme_select_blackberry_select"),c=dijit.byId("theme_select_ipad_select"),
f=dijit.byId("theme_select_iphone_select"),e=dijit.byId("theme_select_other_select");if("(device-specific)"===a&&this._selectedThemeSet.name===w.none_themeset_name)b.set("disabled",!1),d.set("disabled",!1),c.set("disabled",!1),f.set("disabled",!1),e.set("disabled",!1);else for(var g=0;g<this._selectedThemeSet.mobileTheme.length;g++){var k=this._selectedThemeSet.mobileTheme[g].device.toLowerCase();this._selectedThemeSet.mobileTheme[g].theme=a;switch(k){case "android":b.attr("value",a);b.set("disabled",
!0);break;case "blackberry":d.attr("value",a);d.set("disabled",!0);break;case "ipad":c.attr("value",a);c.set("disabled",!0);break;case "iphone":f.attr("value",a);f.set("disabled",!0);break;case "other":e.attr("value",a),e.set("disabled",!0)}}}},updateDeviceThemes:function(){for(var a=0;a<this._selectedThemeSet.mobileTheme.length;a++){var b;switch(this._selectedThemeSet.mobileTheme[a].device.toLowerCase()){case "android":b=dijit.byId("theme_select_android_select");break;case "blackberry":b=dijit.byId("theme_select_blackberry_select");
break;case "ipad":b=dijit.byId("theme_select_ipad_select");break;case "iphone":b=dijit.byId("theme_select_iphone_select");break;default:b=dijit.byId("theme_select_other_select")}this._selectedThemeSet.mobileTheme[a].theme=b.attr("value")}},_changeTheme:function(){debugger;var a=f.getOpenEditor();a&&a.getContext&&a.getContext().getCommandStack().execute(new d(newTheme,a.getContext()))},_onChange:function(){var b=this._getValueAttr();if(null!=b&&!this._blockChange){this.value=b;this._cookieName="maqetta_"+
b.name+"_"+b.version;var d=dojo.cookie(this._cookieName);if(this.dojoVersion&&b.version!==this.dojoVersion&&!d)this._warnDiv.innerHTML="\x3ctable\x3e\x3ctr\x3e\x3ctd\x3e\x3c/td\x3e\x3ctd\x3e"+a.themeVersionMessage+'\x3c/td\x3e\x3ctd\x3e\x3c/td\x3e\x3c/tr\x3e\x3ctr\x3e\x3ctd\x3e\x3c/td\x3e\x3ctd align\x3d"center"\x3e\x3cbutton data-dojo-type\x3d"dijit.form.Button" type\x3d"button" id\x3d"davinci.ui.widgets.ThemeSelection.ok"\x3e'+p.buttonOk+'\x3c/button\x3e\x3cbutton data-dojo-type\x3d"dijit.form.Button" type\x3d"button" id\x3d"davinci.ui.widgets.ThemeSelection.cancel"\x3e'+
p.buttonCancel+"\x3c/button\x3e\x3c/td\x3e\x3ctd\x3e\x3c/td\x3e\x3c/tr\x3e\x3c/table\x3e",b=dijit.byId("davinci.ui.widgets.ThemeSelection.ok"),d=dijit.byId("davinci.ui.widgets.ThemeSelection.cancel"),dojo.connect(b,"onClick",this,"_warnOk"),dojo.connect(d,"onClick",this,"_warnCancel");else this.onChange()}},_warnOk:function(){dojo.cookie(this._cookieName,"true");this._destroy();this.onChange()},_warnCancel:function(){this._destroy();this.onClose()},_destroy:function(){var a=dijit.byId("davinci.ui.widgets.ThemeSelection.ok");
dojo.disconnect(a);a.destroy();a=dijit.byId("davinci.ui.widgets.ThemeSelection.cancel");dojo.disconnect(a);a.destroy()},onOk:function(a){this.onClose(a);this.newFile||(a=f.getOpenEditor())&&a.getContext&&a.getContext().getCommandStack().execute(new d(this._selectedThemeSet,a.getContext()))},onClose:function(a){for(;connection=this._connections.pop();)dojo.disconnect(connection);this._dialog.destroyRecursive();delete this._dialog},_getTemplate:function(){return'\x3ctable style\x3d"width: 100%; margin-left:10px; margin-right:10px;"\x3e\x3ctr\x3e\x3ctd style\x3d"width: 18%;"\x3e'+
a.themeSet+'\x3c/td\x3e\x3ctd style\x3d"text-align: center;"\x3e\x3cselect dojoType\x3d"dijit.form.Select" id\x3d"theme_select_themeset_theme_select" type\x3d"text" style\x3d"width: 175px;" \x3e\x3c/select\x3e\x3c/td\x3e\x3c/tr\x3e\x3c/table\x3e\x3cdiv style\x3d"border-top: 1px solid black; top: 231px; border-top-color: #ccc; left: 429px; width: 300px; height: 11px; margin-top: 6px; margin-left:10px;"\x3e\x3c/div\x3e\x3ctable style\x3d"margin-left: 15px; width: 100%;"\x3e\x3ctr\x3e\x3ctd\x3e'+a.desktopTheme+
'\x3c/td\x3e\x3ctd\x3e\x3cselect dojoType\x3d"dijit.form.Select" id\x3d"theme_select_desktop_theme_select"type\x3d"text"  style\x3d"width: 175px;"  \x3e\x3c/select\x3e\x3c/td\x3e\x3c/tr\x3e\x3ctr\x3e\x3ctd\x3e'+a.mobileTheme+'\x3c/td\x3e\x3ctd\x3e\x3cselect dojoType\x3d"dijit.form.Select" id\x3d"theme_select_mobile_theme_select"type\x3d"text"  style\x3d"width: 175px;" \x3e\x3c/select\x3e\x3c/td\x3e\x3c/tr\x3e\x3c/table\x3e\x3ctable id\x3d"theme_select_devices_table" style\x3d"margin-left:30px; border-collapse: separate; border-spacing: 0 0; width: 100%"\x3e\x3ctr\x3e\x3ctd style\x3d"width: 139px;"\x3e'+
a.android+'\x3c/td\x3e\x3ctd\x3e\x3cselect dojoType\x3d"dijit.form.Select" id\x3d"theme_select_android_select" type\x3d"text"  style\x3d"width: 150px;"\x3e\x3c/select\x3e\x3c/td\x3e\x3c/tr\x3e\x3ctr\x3e\x3ctd\x3e'+a.blackberry+'\x3c/td\x3e\x3ctd\x3e\x3cselect dojoType\x3d"dijit.form.Select" id\x3d"theme_select_blackberry_select" type\x3d"text"  style\x3d"width: 150px;"\x3e\x3c/select\x3e\x3c/td\x3e\x3c/tr\x3e\x3ctr\x3e\x3ctd\x3e'+a.ipad+'\x3c/td\x3e\x3ctd\x3e\x3cselect dojoType\x3d"dijit.form.Select" id\x3d"theme_select_ipad_select" type\x3d"text"  style\x3d"width: 150px;"\x3e\x3c/select\x3e\x3c/td\x3e\x3c/tr\x3e\x3ctr\x3e\x3ctd\x3e'+
a.iphone+'\x3c/td\x3e\x3ctd\x3e\x3cselect dojoType\x3d"dijit.form.Select" id\x3d"theme_select_iphone_select" type\x3d"text"  style\x3d"width: 150px;"\x3e\x3c/select\x3e\x3c/td\x3e\x3c/tr\x3e\x3ctr\x3e\x3ctd\x3e'+a.other+'\x3c/td\x3e\x3ctd\x3e\x3cselect dojoType\x3d"dijit.form.Select" id\x3d"theme_select_other_select" type\x3d"text"  style\x3d"width: 150px;"\x3e\x3c/select\x3e\x3c/td\x3e\x3c/tr\x3e\x3c/table\x3e\x3ctable style\x3d"width:100%; margin-top: 10px;"\x3e\x3ctr\x3e\x3ctd style\x3d"text-align:right; width:80%;"\x3e\x3cinput type\x3d"button" dojoType\x3d"dijit.form.Button" id\x3d"theme_select_ok_button" label\x3d"'+
p.buttonOk+'"\x3e\x3c/input\x3e\x3c/td\x3e\x3ctd\x3e\x3cinput type\x3d"button" dojoType\x3d"dijit.form.Button" id\x3d"theme_select_cancel_button" label\x3d"'+p.buttonCancel+'"\x3e\x3c/input\x3e\x3c/td\x3e\x3c/tr\x3e\x3c/table\x3e'}})})},"davinci/ve/commands/ChangeThemeCommand":function(){define("dojo/_base/declare dojo/_base/lang dojo/query davinci/Theme davinci/Workbench davinci/library davinci/html/CSSImport davinci/html/HTMLElement davinci/html/HTMLText preview/silhouetteiframe davinci/model/Factory".split(" "),
function(q,n,h,g,e,m,c,k,f,d,b){return q("davinci.ve.commands.ChangeThemeCommand",null,{name:"changeTheme",constructor:function(a,b){this._newTheme=a;this._context=b;this._oldTheme=g.getThemeSet(this._context);this._oldTheme||(this._oldTheme=g.dojoThemeSets.themeSets[0])},execute:function(){this._changeTheme(this._newTheme,this._oldTheme)},undo:function(){this._changeTheme(this._oldTheme,this._newTheme)},_changeTheme:function(a,b){b.desktopTheme?this.removeThemeSet(b):this.removeTheme(b);a.desktopTheme?
this.addThemeSet(a):this.addTheme(a);a=this._context;b=a.editor;var c=a.getModel().getText();b.setContent(b.fileName,c);a.widgetAddedOrDeleted(!0);a._configDojoxMobile();b=a.getMobileDevice()||"none";"none"!=b&&(b=d.themeMap[b+".svg"]);(a=n.getObject("dojox.mobile",!0,a.getGlobal()))&&a.loadDeviceTheme&&a.loadDeviceTheme(b);window.setTimeout(function(){this._context.resizeAllWidgets()}.bind(this),50)},removeTheme:function(a){var b=g.getHelper(a);if(b&&b.removeTheme)b.removeTheme(this._context,a);
else{var d=this._context.getModel().getDocumentElement(),b=d.getChildElement("head"),d=d.getChildElement("body"),c=dojo.clone(this._context.getHeader()),f=a.files;a.conditionalFiles&&(f=f.concat(a.conditionalFiles));for(var e=0;e<f.length;e++)for(var k=f[e],m=0;m<c.styleSheets.length;m++)if(-1<c.styleSheets[m].indexOf(k)){var n=d.getAttribute("class");n&&(n=n.replace(a.className,""),c.bodyClasses=n,d.removeAttribute("class"),0<n.length&&d.addAttribute("class",n,!1));this._context.setHeader(c);for(var n=
b.find({elementType:"CSSImport"}),q=0;q<n.length;q++)if(-1<n[q].url.indexOf(k)){var A=n[q].url,C=this._context.getDocument();n[q].url="x";n[q].parent.removeChild(n[q]);n[q].close();h('link[href\x3d"'+A+'"]',C).orphan();this._context.theme=null;break}}}},addTheme:function(a){var d=g.getHelper(a);if(d&&d.addTheme)d.addTheme(this._context,a);else{var f=this._context.getModel().getDocumentElement(),d=f.getChildElement("head"),e=f.getChildElement("body"),h=dojo.clone(this._context.getHeader()),f=this._context.getFullResourcePath(),
f=(new davinci.model.Path(a.getFile().parent.getPath())).append(a.files[0]).relativeTo(f,!0).toString();h.styleSheets[h.styleSheets.length]=f;var m=e.getAttribute("class");m||(m=" ");m=m+" "+a.className;m=m.trim();h.bodyClasses=m;e.removeAttribute("class");e.addAttribute("class",m,!1);this._context.setHeader(h);e=d.getChildElement("style");e||(e=new k("style"),d.addChild(e));d=new c;d.url=f;f=b.getModel({url:g.getBase()+"/"+d.url,includeImports:!0});d.cssFile=f;e.addChild(d,0);this._context.theme=
a}},removeThemeSet:function(a){var b=m.getThemes(e.getProject(),this.workspaceOnly);if(a.desktopTheme)for(var d=0;d<b.length;d++)b[d].name===a.desktopTheme&&this.removeTheme(b[d]);a.mobileTheme&&!g.themeSetEquals(a.mobileTheme,g.dojoMobileDefault)&&(this._context.close(),this._dojoxMobileRemoveTheme(this._context))},addThemeSet:function(a){var b=m.getThemes(e.getProject(),this.workspaceOnly);if(a.desktopTheme)for(var d=0;d<b.length;d++)b[d].name===a.desktopTheme&&this.addTheme(b[d]);a.mobileTheme&&
this._dojoxMobileAddTheme(this._context,a.mobileTheme)},_dojoxMobileRemoveTheme:function(a){a._updateDojoConfig({themeMap:null,mblLoadCompatPattern:null,mblThemeFiles:null})},_dojoxMobileAddTheme:function(a,b,d){g.getThemeLocation().toString().replace(/\//g,"\\/");a._updateDojoConfig({themeMap:g.getDojoxMobileThemeMap(a,b),mblLoadCompatPattern:"''",mblThemeFiles:[]})}})})},"davinci/lang/actions":function(){define([],function(){return{select:"Select",save:"Save",selectDirectory:"Select Directory to link to",
parentFolder:"Parent Folder:",localName:"Local Name:",link:"Link",downloadResources:"Download Resources",downloadFileName:"Download File Name: ",downloadNow:"Download now",titleDownload:"Download",invalidFileName:"File names may only contain letters. numbers, and '_'.",editTheme:"Edit Theme",noEditableThemes:"No editable themes found in your workspace. Please create a new theme from one of the Read Only themes.",newWidgetsShouldUse:"New widgets should use: ",selectTheme:"Select a theme",switchingThemes:"Switching themes",
filesHasUnsavedChanges:"The file '${0}' has unsaved changes, \"Save\" changes and continue with switching themes.",abs:"Absolute positioning",flow:"Flow positioning"}})},"davinci/actions/SelectLayoutAction":function(){define(["dojo/_base/declare","./Action","../Workbench","davinci/lang/actions"],function(q,n,h,g){return q("davinci.actions.SelectLayoutAction",n,{_changeLayoutCommand:function(e){var g=dijit.byId("selectLayout");g&&g.destroyRecursive(!1);if((g=h.getOpenEditor())&&g.getContext){var c=
!0;if("absolute"===e||"Absolute positioning"===e)c=!1;g.getContext().setFlowLayout(c);g._visualChanged()}}})})},"davinci/actions/RedoAction":function(){define(["dojo/_base/declare","./Action","../Workbench"],function(q,n,h){return q("davinci.actions.RedoAction",n,{run:function(g){(g=h.getOpenEditor())&&g.getContext&&g.getContext().getCommandStack().redo()},isEnabled:function(g){var e=(g=h.getOpenEditor())&&g.getContext&&g.getContext();if(g&&e){if(e=e.getCommandStack().canRedo(),"davinci.ve.PageEditor"==
g.declaredClass||"davinci.ve.themeEditor.ThemeEditor"==g.declaredClass)return e}else return!1}})})},"davinci/actions/DownloadAction":function(){define("dojo/_base/declare ./Action ../Workbench ../ui/DownloadSelected system/resource davinci/ui/Resource davinci/lang/ui davinci/lang/actions dijit/form/ValidationTextBox".split(" "),function(q,n,h,g,e,m,c){return q("davinci.actions.DownloadAction",n,{run:function(){h.showModal(new g,c.downloadFile,{width:"400px"})},isEnabled:function(c){return(c=m.getSelectedResources())&&
0<c.length}})})},"davinci/ui/DownloadSelected":function(){define(["dojo/_base/declare","./Download","./Resource","davinci/lang/ui/ui","dojo/text!./templates/downloadSelected.html"],function(q,n,h,g,e){return q([n],{templateString:e,_buildUITable:function(){this._files=h.getSelectedResources();var e=["\x3cdiv class\x3d'downloadSelectedHeader'\x3e"+g.selectedFiles+"\x3c/div\x3e","\x3cdiv class\x3d'downloadSelectedList'\x3e"];this._files||(e.push("\x3cb\x3e"+g.noFilesSelected+"\x3c/b\x3e"),this._files=
[],dojo.attr(this._okButton,"disabled","true"));e=e.concat(this._files.map(function(c){return c.getPath()+"\x3cbr\x3e"}));e.push("\x3c/div\x3e\x3cbr\x3e\x3cbr\x3e");dojo.place(e.join(""),this._selectionDiv)},_getResources:function(){return this._files.map(function(e){return e.getPath()})},_getLibs:function(){return[]}})})},"davinci/ui/Download":function(){define("dojo/_base/declare dijit/_TemplatedMixin dijit/_WidgetBase dijit/_WidgetsInTemplateMixin davinci/library system/resource dojo/promise/all dojo/parser davinci/Workbench davinci/ve/RebaseDownload davinci/lang/ui/ui dijit/lang/_common dojo/text!./templates/download.html davinci/Theme dijit/form/Button dijit/form/ValidationTextBox dijit/form/TextBox".split(" "),
function(q,n,h,g,e,m,c,k,f,d,b,a,p,r){return q([h,n,g],{templateString:p,_fileNameValidationRegExp:"[a-zA-z0-9_.]+",_fileNameMaxLength:50,postMixInProperties:function(){this._projectName=f.getProject();dojo.mixin(this,b);dojo.mixin(this,a);this.inherited(arguments)},buildRendering:function(){this.inherited(arguments);this._buildUITable()},_buildUITable:function(){this._handles=[];this._userLibs=e.getUserLibs(this.getRoot());var a=[dojo.replace("\x3ctable cellspacing\x3d'0' cellpadding\x3d'0' width\x3d'100%' class\x3d'dwnloadLibTable'\x3e\x3ctr\x3e\x3ctd class\x3d'header'\x3e{library}\x3c/td\x3e\x3ctd class\x3d'header'\x3e{version}\x3c/td\x3e\x3ctd class\x3d'header'\x3e{include}\x3cbr\x3e{source}\x3c/td\x3e\x3ctd class\x3d'header'\x3e{baseLocation}\x3c/td\x3e\x3c/tr\x3e\x3ctr\x3e\x3ctd colspan\x3d'4'\x3e\x3chr\x3e\x3c/hr\x3e\x3c/td\x3e\x3c/tr\x3e",
b)];this.libraries={};this._userLibs.forEach(function(b,d){b.initRoot=this._getLibRoot(b.id,b.version);var c=b.id;b.initRoot&&(a.push("\x3ctr libPath\x3d'"+d+"'"),b.required&&a.push(" style\x3d'display:none'"),a.push("\x3e"),a=a.concat(["\x3ctd class\x3d'columna'\x3e"+c+"\x3c/td\x3e","\x3ctd class\x3d'columnb'\x3e"+b.version+"\x3c/td\x3e","\x3ctd class\x3d'columnc'\x3e\x3cinput type\x3d'checkbox' data-dojo-type\x3d'dijit/form/CheckBox' checked\x3e\x3c/input\x3e\x3c/td\x3e","\x3ctd class\x3d'columnd'\x3e\x3cinput type\x3d'text' data-dojo-type\x3d'dijit/form/TextBox' value\x3d'"+
b.initRoot+"'\x3e\x3c/input\x3e\x3c/td\x3e","\x3c/tr\x3e"]))},this);a.push("\x3c/table\x3e");dojo.place(a.join(""),this._tableDiv);k.parse(this._tableDiv)},_getLibRoot:function(a,b){var d=void 0;this._userLibs.some(function(c){if(c.id==a&&c.version==b)return d=c.root,!0});return d},_getLibs:function(){return dojo.query("tr[libPath]",this.domNode).map(function(a){var b=dijit.byNode(dojo.query(".dijitTextBox",a)[0]),d=dijit.byNode(dojo.query(".dijitCheckBox",a)[0]);a=parseInt(dojo.attr(a,"libPath"));
d=d.get("checked");b=b.get("value")||this._userLibs[a].root;return{id:this._userLibs[a].id,version:this._userLibs[a].version,root:b,includeSrc:d}},this)},getRoot:function(){if(f.singleProjectMode())return f.getProject()},_getResources:function(){return[f.getProject()]},_rewriteUrls:function(){var a=[];this._getResources().forEach(function(b){b=m.findResource(b);"Folder"==b.elementType?a=a.concat(m.findResource("*.html",!0,b,!0)):"html"==b.extension&&a.push(b)});var b=new d(this._getLibs()),f=a.filter(function(a){return!r.isThemeHTML(a)}).map(function(a){return b.rebuildSource(a.getContentSync(),
a).then(function(b){a.setContents(b,!0)})});return c(f)},_select:function(a){dojo.query("tr[libPath]",this.domNode).forEach(function(b){(b=dijit.byNode(dojo.query(".dijitCheckBox",b)[0]))&&b.set("checked",a)});return!1},_selectAll:function(){this._select(!0)},_selectNone:function(){this._select(!1)},okButton:function(){if(this.__fileName.isValid()){var a=dojo.attr(this.__fileName,"value");".zip"!=a.slice(-4)&&(a+=".zip");this._rewriteUrls().then(function(){var b=this._getLibs().filter(function(a){return a.includeSrc}),
d={};this.__optimize&&this.__optimize.getValue()&&(d.build="1");this.__fullSource&&this.__fullSource.getValue()&&(d.fullsource="1");setTimeout(function(){m.download(this._getResources(),a,this.getRoot(),b,d)}.bind(this),300)}.bind(this))}},cancelButton:function(){this.cancel=!0;this.onClose()}})})},"davinci/ve/RebaseDownload":function(){define(["dojo/_base/declare","./RebuildPage","../library"],function(q,n,h){return q(n,{constructor:function(g){this.libs=g},getLibraryBase:function(g,e){for(var m in this.libs){var c=
this.libs[m];if(c.id==g&&c.version==e)return g=new Deferred,g.resolve(c.root),g}return h.getLibRoot(g,e)||""}})})},"davinci/ve/RebuildPage":function(){define("dojo/_base/declare ./Context ../model/Path davinci/model/Factory dojo/Deferred dojo/promise/all davinci/ve/commands/ChangeThemeCommand".split(" "),function(q,n,h,g,e,m,c){return q(null,{constructor:function(c){dojo.mixin(this,c);this.context=new n},getPageCss:function(){return["app.css"]},getPageJs:function(){return["app.js"]},rebuildSource:function(k,
f,d,b){if(!f||!f.extension||"html"!=f.extension){var a=new e;a.resolve(k);return a}this.context.model=this.context._srcDocument=g.getNewFromResource(f);var p=new h(f?f.getPath():"");this.context.model.fileName=p.toString();this.context._srcDocument.setText(k,!0);if(null==this.context._srcDocument.find({elementType:"HTMLElement",tag:"html"},!0))return a=new e,a.resolve(k),a;var n=this.context._srcDocument.find({elementType:"HTMLElement"});k=[];k.push(this.context.loadRequires("html.body",!0,!0,!0));
for(f=0;f<n.length;f++){var q=n[f],q=q.getAttribute("data-dojo-type")||q.getAttribute("dojoType")||q.getAttribute("dvwidget");null!=q&&k.push(this.context.loadRequires(q.replace(/\./g,"/"),!0,!0,!0))}d&&this.changeThemeBase(d,p);b&&b.mobileTheme&&(new c(b,this.context))._dojoxMobileAddTheme(this.context,b.mobileTheme);n=this.getPageCss();d=this.getPageJs();b=this.context._getCurrentBasePath();p=p.getParentPath();for(f=0;f<n.length;f++)q=b.append(n[f]).relativeTo(p).toString(),this.addModeledStyleSheet(q,
n[f]);for(f=0;f<d.length;f++)n=b.append(d[f]).relativeTo(p).toString(),this.addJavaScript(n,null,null,null,d[f]);a=new e;m(k).then(function(){a.resolve(this.context._srcDocument.getText())}.bind(this));return a},addModeledStyleSheet:function(c,f){this.context._srcDocument.find({elementType:"CSSImport"}).some(function(d){if(d.url&&-1<d.url.indexOf(f))return d.setUrl(c),!0})},addJavaScript:function(c,f,d,b,a){!this.context._srcDocument.find({elementType:"HTMLElement",tag:"script"}).some(function(b){var d=
b.getAttribute("src");if(d&&-1<d.indexOf(a))return b.setAttribute("src",c),!0})&&c&&(-1<c.indexOf("dojo.js")&&this.context.addHeaderScript(c,{"data-dojo-config":"parseOnLoad: true"}),this.context.addHeaderScript(c))},changeThemeBase:function(c,f){var d=new h(c.getFile().parent.getPath()),b=function(a){var b=d.append(a).relativeTo(f,!0);this.addModeledStyleSheet(b.toString(),new h(a),!0)}.bind(this);c.files.forEach(b);c.conditionalFiles&&c.conditionalFiles.forEach(b)}})})},"davinci/ve/Context":function(){define("require dojo/_base/declare dojo/_base/lang dojo/dom-class dojo/query dojo/_base/connect xide/mixins/ReloadMixin xide/mixins/EventedMixin ./_ContextMobile ./_ContextTheme ./_ContextCSS ./_ContextJS ./_ContextDelite ./_ContextDojo ./_ContextInterface ./_ContextDocument ./_ContextWidgets ./ThemeModifier ../commands/CommandStack ./tools/SelectTool ../model/Path ../Workbench ./widget ../library ./metadata ./ChooseParent ./States dojox/html/_base".split(" "),
function(q,n,h,g,e,m,c,k,f,d,b,a,p,r,v,w,x,B,z,u,y,A,C,F,E,D,H){davinci.ve._preferences={};var O=0,K=function(a){var b=E.getLibrary();a&&dojo.filter(a.attributes,function(a){return"on"==a.nodeName.substr(0,2).toLowerCase()}).forEach(function(a){var d=!1,c;for(c in b)if(d=E.getLibrary(c),d=E.invokeCallback(d,"requiredEventAttribute",[a]))break})};return n("davinci.ve.Context",[f,d,b,a,p,r,v,w,x,B,k,c],{_scripts:[],delite:!1,WIDGET_MODIFIED:0,WIDGET_ADDED:1,WIDGET_REMOVED:2,WIDGET_REPARENTED:3,WIDGET_ID_CHANGED:4,
maqStatesClassCount:0,maqStatesClassPrefix:"maqStatesClass",maqTypesClassCount:0,maqTypesClassPrefix:"maqTypesClass",rootWidget:null,getRootWidget:function(){return this.rootWidget},constructor:function(a){a||(a={});A.location();this._contentStyleSheet=q.toUrl("davinci/ve/resources/content.css");this._id="_edit_context_"+O++;this.widgetHash={};this.delite=a.delite;h.mixin(this,a);"string"==typeof this.containerNode&&(this.containerNode=dijit.byId(this.containerNode));this._commandStack=new z(this);
this._defaultTool=new u;this._widgetIds=[];this._objectIds=[];this._widgets=[];this._loadedCSSConnects=[];this._chooseParent=new D({context:this});this.sceneManagers={};this.catchEvents=!0;this._customWidgetPackages=h.clone(F.getCustomWidgetPackages());a=E.getLibrary();for(var b in a)a=E.getLibrary(b),E.invokeCallback(a,"onDocInit",[this]);b=document.getElementById("focusContainer");b||(b=dojo.create("div",{"class":"focusContainer",id:"focusContainer"},document.body),davinci.Workbench.focusContainer=
b);this.initReload()},getVisualEditor:function(){return this.visualEditor&&this.visualEditor._pageEditor?this.visualEditor._pageEditor.delegate:null},destroy:function(){this.deactivate();this.inherited(arguments);this._loadedCSSConnects&&(this._loadedCSSConnects.forEach(m.disconnect),delete this._loadedCSSConnects)},isActive:function(){return!!this._activeTool},onReloaded:function(){},getPath:function(){return new y(this.getModel().fileName)},activate2:function(){if(!this.isActive()){this.loadStyleSheet(this._contentStyleSheet);
this._attachAll();this._restoreStates();e("*",this.rootNode).forEach(function(a){K(a);"A"==a.tagName.toUpperCase()&&a.hasAttribute("href")&&a.removeAttribute("href")});this._AppStatesActivateActions();this._statesLoaded=!0;m.publish("/davinci/ui/context/statesLoaded",[this]);this._onLoadHelpers();var a=this.getContainerNode();g.add(a,"editContextContainer");this.catchEvents?(this._connects=[m.connect(this._commandStack,"onExecute",this,"onCommandStackExecute"),m.connect(this._commandStack,"onExecute",
function(){setTimeout(this.onContentChange.bind(this),0)}.bind(this))],this._designEvents=[m.connect(this.getDocument(),"onkeydown",this,"onKeyDown"),m.connect(this.getDocument(),"onkeyup",this,"onKeyUp"),m.connect(a,"ondblclick",this,"onDblClick"),m.connect(a,"onmousedown",this,"onMouseDown"),m.connect(a,"onclick",this,"onMouseClick"),m.connect(a,"onmousemove",this,"onMouseMove"),m.connect(a,"onmouseup",this,"onMouseUp"),m.connect(a,"onmouseover",this,"onMouseOver"),m.connect(a,"onmouseout",this,
"onMouseOut")]):this._connects=[m.connect(this._commandStack,"onExecute",this,"onCommandStackExecute"),m.connect(this._commandStack,"onExecute",function(){setTimeout(this.onContentChange.bind(this),0)}.bind(this)),m.connect(this.getDocument(),"onkeydown",this,"onKeyDown"),m.connect(this.getDocument(),"onkeyup",this,"onKeyUp")];this.visualEditor&&this.visualEditor._pageEditor&&this.visualEditor._pageEditor._visualChanged&&this.visualEditor._pageEditor._visualChanged(!0);try{this.setActiveTool()}catch(J){debugger;
console.error("set active tool failed! "+J.message)}return!0}},deactivate:function(){if(this.isActive()){this._connects.forEach(m.disconnect);this._designEvents.forEach(m.disconnect);delete this._designEvents;delete this._connects;(this._focuses||[]).forEach(function(a){a._connected=!1});this._commandStack.clear();this._activeTool&&(this._activeTool.deactivate(),delete this._activeTool);var a=this.getContainerNode();this.select(null);g.remove(a,"editContextContainer");this.getTopWidgets().forEach(this.detach,
this);this.unloadStyleSheet(this._contentStyleSheet)}},_editorSelectionChange:function(a){a.editor.fileName===this.editor.fileName&&(m.unsubscribe(this._editorSelectConnection),delete this._editorSelectConnection,this._setSource(this._srcDocument))},_preserveStates:function(a,b){var d=davinci.ve.states.retrieve(a);if("BODY"!=a.tagName.toUpperCase()&&(d.maqAppStates||d.maqDeltas)){var c=this.maqStatesClassPrefix+this.maqStatesClassCount;a.className=a.className+" "+c;this.maqStatesClassCount++;b[c]=
{};d.maqAppStates&&(b[c].maqAppStates=d.maqAppStates);d.maqDeltas&&(b[c].maqDeltas=d.maqDeltas);a.style?b[c].style=a.style.cssText:console.error("Context._preserveStates: fail")}},_restoreStates:function(){},_AppStatesActivateActions:function(){if("davinci.ve.PageEditor"===this.editor.declaredClass){if(!this.rootNode._maqAppStates){this.rootNode._maqAppStates={};var a=this.rootWidget._srcElement,b=H.serialize(this.rootNode);b.maqAppStates?a.setAttribute(H.APPSTATES_ATTRIBUTE,b.maqAppStates):a.removeAttribute(H.APPSTATES_ATTRIBUTE);
this.editor._visualChanged(!0)}H.getFocus(this.rootNode)||(a=H.getState(this.rootNode),H.setState(a,this.rootNode,{updateWhenCurrent:!0,silent:!0,focus:!0}))}},getCommandStack:function(){return this._commandStack},getSelection:function(){return this._selection||[]},getPreference:function(a){if(a)return davinci.ve._preferences[a]},getPreferences:function(){return h.mixin({},davinci.ve._preferences)},setPreference:function(a,b){a&&(davinci.ve._preferences[a]=b,this.isActive())},setPreferences:function(a){if(a)for(var b in a)this.setPreference(b,
a[b])},_parse:function(a){var b={metas:[],scripts:[],modules:[],styleSheets:[]},d=a.getDocumentElement();a=d.getChildElement("head");var c=d.getChildElement("body");this._uniqueIDs={};if(c){c.visit({visit:dojo.hitch(this,function(a){"HTMLElement"==a.elementType&&a!=c&&this.getUniqueID(a)})});if(d=c.getAttribute("class"))b.bodyClasses=d;b.style=c.getAttribute("style");b.content=c.getElementText({includeNoPersist:!0,excludeIgnoredContent:!0});d=c.getAttribute(davinci.ve.states.APPSTATES_ATTRIBUTE);
d||(d=c.getAttribute(davinci.ve.states.APPSTATES_ATTRIBUTE_P6))&&c.setAttribute(davinci.ve.states.APPSTATES_ATTRIBUTE,d);c.removeAttribute(davinci.ve.states.APPSTATES_ATTRIBUTE_P6);b.maqAppStates=d}if(d=a.getChildElement("title"))b.title=d.getElementText();d=a.getChildElements("script");dojo.forEach(d,function(a){var d=a.getAttribute("src");d&&b.scripts.push(d);a=a.getElementText();a.length&&(a.replace(/dojo\.require\(["']([^'"]+)["']\)/g,function(a,d){b.modules.push(d)}),a.replace(/require\(\[["']([^'"]+)["']\]\)/g,
function(a,d){b.modules.push(d)}))},this);a=a.getChildElements("style");dojo.forEach(a,function(a){dojo.forEach(a.children,function(a){"CSSImport"===a.elementType&&b.styleSheets.push(a.url)})});return b},getUniqueID:function(a,b){var d=a.getAttribute("id");if(!d){for(var c=this.rootWidget?this.rootWidget.domNode.ownerDocument:null,f=b||a.tag;;)if(d=this._uniqueIDs.hasOwnProperty(f)?++this._uniqueIDs[f]:this._uniqueIDs[f]=0,d=f+"_"+d,c){if(!c.getElementById(d))break}else break;a.addAttribute("id",
d,!b)}return d},registerSceneManager:function(a){if(a&&a.id){var b=a.id;this.sceneManagers[b]||(this.sceneManagers[b]=a,m.publish("/davinci/ui/context/registerSceneManager",[a]))}},onCommandStackExecute:function(){this.clearCachedWidgetBounds();this.editor&&this.editor.editorContainer&&this.editor.editorContainer.updateToolbars&&this.editor.editorContainer.updateToolbars();H.updateHighlightsBaseStateWidgets(this)},reorderPreserveSiblingOrder:function(a){a=[].concat(a);for(var b=0;b<a.length-1;){for(var d=
a[b].getParent(),c=b+1,f=!1;c<a.length;)if(a[c].getParent()==d)f=!0,c++;else break;if(f)for(d=d.getChildren(),f=c-2;f>=b;f--)for(var e=b;e<=f;e++){var g=d.indexOf(a[e]),k=d.indexOf(a[e+1]);g>k&&(g=a[e+1],a[e+1]=a[e],a[e]=g)}b=c}return a},_updateWidgetHash:function(){this.widgetHash={};this.getAllWidgets().forEach(function(a){var b=a.id;b&&(this.widgetHash[b]=a)},this)}})})},"davinci/ve/_ContextMobile":function(){define(["require","dojo/_base/declare","../Theme","preview/silhouetteiframe","dojox/html/_base"],
function(q,n,h,g){return n(null,{getMobileDevice:function(){var e=this.getDocumentElement().getChildElement("body");if(e){var g=e.getAttribute("data-maq-device"),c=e.getAttribute("data-maqetta-device");!g&&c&&(e.removeAttribute("data-maqetta-device"),e.setAttribute("data-maq-device",c),g=c,this.editor._visualChanged());return g}},setMobileDevice:function(e){this.getGlobal().require("dojo/_base/config").mblUserAgent=g.getMobileTheme(e+".svg");var h=this.getDocumentElement().getChildElement("body");
e&&"none"!=e?h.addAttribute("data-maq-device",e):h.removeAttribute("data-maq-device",e)},setMobileTheme:function(e){(this.getMobileDevice()||"none")!=e&&this.setMobileDevice(e);this.close();try{g.getMobileTheme(e+".svg"),this._configDojoxMobile()}catch(m){}},getMobileOrientation:function(){var e=this.getDocumentElement().getChildElement("body"),g=e.getAttribute("data-maq-orientation"),c=e.getAttribute("data-maqetta-device-orientation");!g&&c&&(e.removeAttribute("data-maqetta-device-orientation"),
e.setAttribute("data-maq-orientation",c),g=c,this.editor._visualChanged());return g},setMobileOrientation:function(e){var g=this.getDocumentElement().getChildElement("body");e?g.setAttribute("data-maq-orientation",e):g.removeAttribute("data-maq-orientation")},_mobileMetaElement:{name:"viewport",content:"width\x3ddevice-width, initial-scale\x3d1.0, user-scalable\x3dno"},setMobileMeta:function(e){"none"===e?this._removeHeadElement("meta",this._mobileMetaElement):this._addHeadElement("meta",this._mobileMetaElement)},
_configDojoxMobile:function(e){try{var g=this.getGlobal().require,c=g("dojox/mobile"),k=g("dojox/mobile/deviceTheme"),f=this.getGlobal().dojo.config,d=this._getDojoJsElem().getAttribute("data-dojo-config"),b=f.mblUserAgent||"none",a,p,n,d=d?q.eval("({ "+d+" })","data-dojo-config"):{};a=d.themeMap;p=d.mblThemeFiles;n=d.mblLoadCompatPattern;delete this.themeCssFiles;delete this.cssFiles;a||(a=h.getDojoxMobileThemeMap(this,dojo.clone(h.dojoMobileDefault)),p=[],h.getThemeLocation().toString().replace(/\//g,
"\\/"),n=RegExp(""));e=!1;h.themeMapsEqual(k.themeMap,a)||(e=!1,k.themeMap=a);p?f.mblThemeFiles=p:delete f.mblThemeFiles;n?(f.mblLoadCompatPattern=n,c.loadCompatPattern=n):(delete f.mblLoadCompatPattern,c.loadCompatPattern=/\/mobile\/themes\/.*\.css$/);if(this._selection)this.onSelectionChange(this._selection);e||k.loadDeviceTheme(b)}catch(v){}}})})},"davinci/ve/_ContextTheme":function(){define("dojo/_base/declare ../Theme ../model/Path ../Workbench ../library ./metadata dojox/html/_base".split(" "),
function(q,n,h,g,e,m){return q(null,{getTheme:function(){if(!this.theme){var c=m.loadThemeMeta(this._srcDocument);c&&(this._themeUrl=c.themeUrl,this._themeMetaCache=c.themeMetaCache,this.theme=c.theme,this.theme.helper=n.getHelper(this.theme),this.theme.helper&&this.theme.helper.then&&this.theme.helper.then(function(c){c.helper&&(this.theme.helper=c.helper)}.bind(this)))}return this.theme},getThemeMeta:function(){this._themeMetaCache||this.getTheme();return this._themeMetaCache},themeChanged:function(){var c=
!0,e=this.getModel();this._themeUrl&&e.find({elementType:"CSSImport",url:this._themeUrl},!0)&&(c=!1);c&&(this._themeMetaCache=this.theme=null)},loadTheme:function(c){var k=this.getModel(),f="claro";c&&c.themeSet?f=c.themeSet.desktopTheme:c&&c.theme&&(f="deviceSpecific"==c.theme?"claro":c.theme);c=k.find({elementType:"CSSImport"});var d={},b;e.getThemes(g.getProject()).forEach(function(a){a.name==f&&(b=a);a.files&&a.files.forEach(function(b){d[b]=a})});if(null==b)return console.error("couldnt find default theme, abort!!"),
!1;if(null==b.getFile)return console.error("default theme in invalid state, abort!!"),!1;if(c.some(function(a){for(var b in d)if(-1<a.url.indexOf(b))return!0}))return!0;k.find({elementType:"HTMLElement",tag:"body"},!0).setAttribute("class",b.className);k=b.getFile();if(null==k||null==k.getPath)return console.error("default theme file in invalid state, abort!!"),!0;var a=b.getFile().getPath();b.files.forEach(function(b){b=(new h(a)).removeLastSegments(1).append(b).relativeTo(this.getPath(),!0);this.addModeledStyleSheet(b.toString(),
!0)},this)},_themeChange:function(c){c&&"CSSRule"===c.elementType&&(this.editor.setDirty(!0),this.hotModifyCssRule(c))}})})},"davinci/ve/_ContextCSS":function(){define("dojo/_base/declare dojo/dom-construct dojo/query dojo/_base/connect system/resource ../model/Path ../Workbench ./widget ./States ./utils/pseudoClass dojox/html/_base".split(" "),function(q,n,h,g,e,m,c,k,f,d){return q(null,{getStyleAttributeValues:function(b){for(var a=b?b.getStyleValues():[],d=f.getStateContainersForNode(b.domNode),
c=!0,e=0;e<d.length;e++){var g=f.getState(d[e]);if(g&&g!=f.NORMAL){c=!1;break}}if(!c&&(d=davinci.ve.states.getStatesListCurrent(b.domNode),b=davinci.ve.states.getStyle(b.domNode,d))){for(d=0;d<b.length;d++){var c=b[d],k;for(k in c)for(c=a.length-1;0<=c;c--){var e=a[c],h;for(h in e)if(k==h){a.splice(c,1);break}}}a=a.concat(b)}return a},addPseudoClassSelectors:function(b){var a=function(b){if(b){for(var c=b.cssRules,f=0,f=0;f<c.length;f++){var e=c[f];if(e.type&&e.type===CSSRule.IMPORT_RULE)a(c[f].styleSheet);
else if(c[f].type==CSSRule.STYLE_RULE){var g=c[f].selectorText;if(-1<g.indexOf(":")){g=d.replace(g);e.selectorText=g;b.deleteRule(f);b.insertRule(e.cssText,f);break}}}return!0}return!1};dojo.some(this.getDocument().styleSheets,a)},hotModifyCssRule:function(b){function a(b,d){if(b.href==d)return b;var c;b=b.cssRules;for(var f=0;f<b.length&&(!b[f].type||b[f].type!==CSSRule.IMPORT_RULE||!(c=b[f].href==d?b[f].styleSheet:a(b[f].styleSheet,d)));f++);return c}dojo.some(this.getDocument().styleSheets,function(c){var f;
f=e.findResource(b.parent.url).getURL();var g=encodeURI(f);f=b.getSelectorText();-1<f.indexOf(":")&&(f=d.replace(f));f=f.replace(/^\s+|\s+$/g,"");if(c=a(c,g)){for(var k=c.cssRules,g=0;g<k.length;g++)if(k[g].type&&k[g].type==CSSRule.STYLE_RULE&&k[g].selectorText==f){c.deleteRule(g);break}b.properties.length&&(f=b.getText({noComments:!0}),-1<f.indexOf(":")&&(f=d.replace(f)),c.insertRule(f,g));f=!0}else f=!1;return f})},unloadStyleSheet:function(b){var a=this.getGlobal();a&&a.require&&a.require("dojo/query")("link").filter(function(a){return a.getAttribute("href")==
b}).forEach(n.destroy)},addModeledStyleSheet:function(b,a){a||this.loadStyleSheet(b);if(!this.model.hasStyleSheet(b)){a=-1<b.indexOf("app.css");var d,c=this.model.find({elementType:"HTMLElement",tag:"style"},!0);if(c)for(var c=c.children,f=0;f<c.length;f++)-1<c[f].url.indexOf("app.css")&&(d=c[f]);this.model.addStyleSheet(b,void 0,void 0,a?void 0:d);for(var e in this.model._loadedCSS)this._loadedCSSConnects.push(g.connect(this.model._loadedCSS[e],"onChange",this,"_themeChange"))}},loadStyleSheet:function(b){var a=
this.getDocument(),d=this.getGlobal().require("dojo/query")("link");d.some(function(a){return a.getAttribute("href")===b})||dojo.withDoc(a,function(){var c=a.getElementsByTagName("head")[0],f=-1<b.indexOf("app.css"),e=-1<b.indexOf("content.css"),g=-1<b.indexOf("claro.css"),k=-1<b.indexOf("claro/document.css"),f=!f&&!e&&!k&&!g,h,f=!1,g=n.create("link",{rel:"stylesheet",type:"text/css",href:b});d.forEach(function(a){-1<a.href.indexOf("app.css")?h=a:a.href.indexOf("content.css")});var p;e||(p=h);f?c.appendChild(g):
p?c.insertBefore(g,p):c.appendChild(g)})},getStyle:function(){return this._header?this._header.style:void 0},setStyle:function(b){var a=k.parseStyleValues(b);if(this._header){var d=k.parseStyleValues(this._header.style);if(d)for(var c in d)a[c]||(a[c]=void 0);this._header.style=b}else this._header={style:b}},getAppCssRelativeFile:function(){this._appCssRelativeFile||(this._appCssRelativeFile=this.getRelativeFileString("app.css"));return this._appCssRelativeFile},_addCssForDevice:function(b,a,d){d=
0;for(var c=a.length;d<c;d++){var f=a[d];if(f[0]===b||".*"===f[0]){this.themeCssFiles||(this.themeCssFiles=[]);this.themeCssFiles=this.themeCssFiles.concat(f[2]);this._themePath=new m(this.visualEditor.fileName);this._getCssFiles().forEach(function(a){this._loadedCSSConnects.push(g.connect(a,"onChange",this,"_themeChange"))},this);break}}}})})},"davinci/ve/utils/pseudoClass":function(){define([],function(){return{MAQETTA_PSEUDO_CLASS:"maqettaPseudoClass",replace:function(q){return"hover link visited active focus first-letter first-line first-child before after".split(" ").reduce(function(n,
h){return n.replace(new RegExp(":"+h,"g"),".maqettaPseudoClass"+h[0].toUpperCase()+h.slice(1))},q)}}})},"davinci/ve/_ContextJS":function(){define("dojo/_base/declare dojo/_base/xhr dojo/Deferred dojo/promise/all xide/factory xide/types ../html/HTMLElement ../html/HTMLText dojox/html/_base".split(" "),function(q,n,h,g,e,m,c,k){return q(null,{_getAppJsRelativeFile:function(){this._appJsRelativeFile||(this._appJsRelativeFile=this.getRelativeFileString("app.js"));return this._appJsRelativeFile},addJavaScriptSrc:function(c,
d,b,a){var f=/\/dojo.js$/.test(c),k=[];if(!this._didDojo){if(!f&&!a){var h=this;a=(new dojo._Url(this.getDocument().baseURI,c)).toString();k.push(n.get({url:a,sync:!0}).then(function(a){h.getGlobal().eval(a)}))}if(d){a=this.getDocumentElement().getChildElement("head");d={parseOnLoad:!0,async:!0,packages:this._getLoaderPackages()};var q=this;a=a.getChildElements("script").some(function(a){var d=a.getAttribute("src");if(d&&-1<d.indexOf(b))return f&&(e.publish(m.EVENTS.ON_SET_DOJO_URL,{data:{dojoUrl:c},
context:q,editor:q.editor},this),a=a.getAttribute("src"),/\/dojo.js$/.test(a)||q.addHeaderScript(a)),!0;q.addHeaderScript(d)});d.packages=d.packages.concat(this._customWidgetPackages);a?f&&this._updateDojoConfig(d):f?(e.publish(m.EVENTS.ON_SET_DOJO_URL,{data:{dojoUrl:c},context:this,editor:this.editor},this),this.addHeaderScript(c,{"data-dojo-config":JSON.stringify(d).slice(1,-1).replace(/"/g,"'")}),k.push(this.addJavaScriptModule("dijit/dijit",!0,!0)),k.push(this.addJavaScriptModule("dojo/parser",
!0,!0)),this._didDojo=!0):this.addHeaderScript(c)}return g(k)}},addJavaScriptModule:function(c,d,b){var a=new h;b?a.resolve():this.getGlobal().require([c],function(b){a.resolve(b)});if(d){if(!this._requireHtmlElem&&!this.getDocumentElement().getChildElement("head").getChildElements("script").some(function(a){var b=a.find({elementType:"HTMLText"},!0);if(b&&this._reRequire.test(b.getText()))return this._requireHtmlElem=a,!0},this))return this._requireHtmlElem=this.addHeaderScriptText('require(["'+c+
'"]);\n'),a;d=this._requireHtmlElem.find({elementType:"HTMLText"},!0);b=d.getText();var f=b.match(this._reRequire)[1].match(this._reModuleId);-1===f.indexOf(c)&&(f.push(c),b=b.replace(this._reRequire,"require("+JSON.stringify(f,null,"  ")+")"),d.setText(b),d.parent.setScript(b))}return a},addJavaScriptText:function(c,d,b){if(!b)try{this.getGlobal().eval(c)}catch(a){b=c.length,console.error('eval of "'+c.substr(0,20)+(20<b?"...":"")+'" failed')}d&&this.addHeaderScriptText(c)},addHeaderScript:function(f,
d){var b=new c("script");b.addAttribute("type","text/javascript");b.addAttribute("src",f);if(d)for(var a in d)b.addAttribute(a,d[a]);this.getDocumentElement().getChildElement("head").addChild(b)},addHeaderScriptText:function(f){var d=this.getDocumentElement().getChildElement("head"),b,a=d.children,e,g;for(e=a.length-1;0<=e;e--)if(g=a[e],"HTMLElement"===g.elementType&&"script"===g.tag){b=g.find({elementType:"HTMLText"},!0);break}b||(a=new c("script"),a.addAttribute("type","text/javascript"),a.script=
"",d.addChild(a),b=new k,a.addChild(b));d=b.getText();-1===d.indexOf(f)&&(b.setText(d+"\n"+f),b.parent.setScript(d+"\n"+f));return b.parent}})})},"davinci/ve/_ContextDelite":function(){define("dojo/_base/declare dojo/_base/lang dojo/_base/xhr dojo/dom-class dojo/dom-construct dojo/dom-style dojo/query dojo/Deferred dojo/promise/all dojo/_base/connect dojo/topic dojo/window xide/utils xide/factory xide/types system/resource ../UserActivityMonitor ../Theme ./ThemeModifier ../commands/CommandStack ./commands/ChangeThemeCommand ./tools/SelectTool ../model/Path ../Runtime ../Workbench ./widget ./Focus ../library ./metadata ./ChooseParent ./Snap ./States ./HTMLWidget ../html/HTMLElement ../html/HTMLText ../workbench/Preferences ./utils/GeomUtils dojo/text!./newfile.template.html ./utils/pseudoClass dojox/html/_base".split(" "),
function(q){return q(null,{})})},"davinci/UserActivityMonitor":function(){define([],function(){return{}})},"davinci/ve/ThemeModifier":function(){define("dojo/_base/declare ../model/Path ../model/Factory ./utils/URLRewrite ./commands/ModifyRuleCommand ./commands/StyleCommand davinci/_common system/resource".split(" "),function(q,n,h,g,e,m,c,k){return q("davinci.ve.ThemeModifier",null,{_getCssFiles:function(){if(this.cssFiles)return this.cssFiles;this.cssFiles=[];if(this.themeCssFiles){var c=this._themePath.getParentPath();
this.cssFiles=this.themeCssFiles.map(function(d){return h.getModel({url:c.append(d).toString(),includeImports:!0})})}return this.cssFiles},_getThemeResource:function(c){c=this._themePath.getParentPath().append(c).toString();return system.resource.findResource(c)},getDeltaRule:function(c){var d=null,b=this.cssFiles[0],a=c.getSelectorText();this.cssFiles.forEach(function(c){var f=c.getRules(a);0<f.length&&(b=c);f.forEach(function(a){a.parent.url==c.url&&(d=a)}.bind(this))}.bind(this));!d&&b&&(d=b.addRule(a+
" {}"));return d},_markDirty:function(c,d){this._dirtyResource||(this._dirtyResource={});this._dirtyResource[c]={time:Date.now(),modelObject:d};this._srcChanged()},getCommandForStyleChange:function(c,d){var b=d||this.getSelection();d=b.length?b[b.length-1]:void 0;1<b.length&&this.select(d);if("inline"==c.appliesTo){for(var a=[],f=new n(this.fileName),b=0;b<c.values.length;b++)for(var k in c.values[b]){if(g.containsUrl(c.values[b][k])&&!g.isAbsolute(c.values[b][k])){var h=new n(g.getUrl(c.values[b][k]));
if(h.isAbsolute){var q={};q[k]=c.values[b][k]}else h=h.relativeTo(f).toString(),g.replaceUrl(c.values[b][k],h)}else q={},q[k]=c.values[b][k];a.push(q)}c=new m(d,a,c.applyToWhichStates)}else{if("proposal"==c.appliesTo.type){k=this.model.find({elementType:"CSSFile",relativeURL:c.appliesTo.targetFile},!0);if(!k&&this.cssFiles){for(b=0;this.cssFiles.length;b++)if(this.cssFiles[b].url===c.appliesTo.targetFile){k=this.cssFiles[b];break}if(!k)return}k=k.addRule(c.appliesTo.ruleString+" {}")}else k=c.appliesTo.rule;
c=new e(k,c.values,this)}return c},saveDynamicCssFiles:function(f,d){var b=[],a={visit:function(a){"CSSFile"==a.elementType&&a.isDirty()&&b.push(a.save(d).then(function(b){d||k.findResource(a.url).removeWorkingCopy();a.dirtyResource=d;return a},function(b){console.error(dojo.string.substitute(c.errorSavingFile,[a.url,b]));return b}));return!1}};f&&f.forEach(function(b){b.visit(a)});return b},dirtyDynamicCssFiles:function(c){if(null==c)return console.error("dirtyDynamicCssFiles:invalid arg"),!1;var d=
!1,b={visit:function(a){"CSSFile"==a.elementType&&a.isDirty()&&(d=!0);return d}};c&&c.forEach(function(a){if(d)return d;a.visit(b)});return d},close:function(){this.cssFiles&&this.cssFiles.forEach(function(c){c.close();require("davinci/model/Factory").closeModel(c)}.bind(this));delete this.cssFiles},destroy:function(){this.close()}})})},"davinci/ve/commands/ModifyRuleCommand":function(){define(["dojo/_base/declare","../States","../../html/CSSModel"],function(q,n,h){var g=function(e,g){e.removeAllProperties();
g.forEach(function(c){e.addProperty(c.name,c.value)})};return q("davinci.ve.commands.ModifyRuleCommand",null,{name:"modify rule",constructor:function(e,g,c){this.cssRule=e;this.values=g;this.context=c},execute:function(e){this.context||(this.context=e);if(this.cssRule&&this.values&&this.context){this._oldValues=this.cssRule.getProperties();e=this.cssRule;var g=this.values,c,k,f=[],d=[];for(c=0;c<g.length;c++)for(var b in g[c])(k=e.getProperty(b))&&d.push(k),e.removeProperty(b);for(c=0;c<e.properties.length;c++){k=
e.properties[c];var a={};a[k.name]=k.value;f.push(a)}g=f.concat(dojo.clone(g));k=h.shorthand;for(c=f=0;c<k.length;c++){a:{for(var a=k[c][0],p=0;p<g.length;p++)if(g[p].hasOwnProperty(a)){a=p;break a}a=-1}-1<a&&(p=g[a],g.splice(a,1),g.splice(f,0,p),f++)}for(c=e.properties.length-1;0<=c;c--)if(k=e.properties[c])d.push(e.getProperty(k.name)),e.removeProperty(k.name);for(c=0;c<g.length;c++)for(b in g[c])if(g[c][b]&&""!==g[c][b])for(e.addProperty(b,g[c][b]),k=0;k<d.length;k++)if(d[k].name===b){f=e.getProperty(b,
g[c][b]);d[k].comment&&(f.comment=d[k].comment);d[k].postComment&&(f.postComment=d[k].postComment);d.splice(k,1);break}this._setDirty()}},undo:function(){this.cssRule&&this._oldValues&&this.context&&(g(this.cssRule,this._oldValues),this._setDirty())},_setDirty:function(){this.cssRule.getCSSFile().setDirty(!0);this.context.editor.setDirty(!0);n.resetState(this.context.rootNode);this.context._selection&&(this.context._forceSelectionChange=!0)}})})},"davinci/ve/tools/SelectTool":function(){define("dojo/_base/declare dojo/dom-geometry ../../Workbench ../../workbench/Preferences ./_Tool ../widget ../metadata dojo/dnd/Mover ../../XPathUtils ../../html/HtmlFileXPathAdapter ../Snap ../../commands/CompoundCommand ../commands/AddCommand ../commands/ReparentCommand ../commands/MoveCommand ../commands/ResizeCommand ../commands/ModifyCommand ../tools/CreateTool ../States ../utils/GeomUtils".split(" "),
function(q,n,h,g,e,m,c,k,f,d,b,a,p,r,v,w,x,B,z,u){return q("davinci.ve.tools.SelectTool",e,{CONSTRAIN_MIN_DIST:3,activate:function(a){this._context=a},deactivate:function(){this._setTarget(null)},onMouseDown:function(a){var b=this._context;if(!b.isFocusNode(a.target)){this._shiftKey=a.shiftKey;this._sKey=this._spaceKey=!1;this._areaSelectClear();var d=this._checkFocusXY(a.pageX,a.pageY);d&&"NONE"!==c.getAllowedChild(d.type)[0]&&(d=null);var f=this._getTarget()||m.getEnclosingWidget(a.target);for(d||
(d=f);d&&!d.getContext();)d=m.getEnclosingWidget(d.domNode.parentNode);if(d)if("NONE"===c.getCanSelect(d.type)[0]&&f&&(f=d),dojo.isMac&&a.ctrlKey||2==a.button)b.select(d);else{for(var e=b.getSelection(),g=null,h=0;h<e.length;h++){for(var p=e[h],q=d;q&&q!=b.rootWidget;){if(q==p){g=p;break}q=q.getParent()}if(g)break}q=null;h=dojo.isMac?a.metaKey:a.ctrlKey;this._mouseDownInfo=null;if(0<=dojo.indexOf(e,d))h?b.deselect(d):(q=d,this._mouseDownInfo={widget:d,eventTargetWidget:f,pageX:a.pageX,pageY:a.pageY,
dateValue:Date.now()});else if(h){if(d==b.rootWidget)return;b.select(d,h)}else if(g)q=g,this._mouseDownInfo={widget:d,eventTargetWidget:f,pageX:a.pageX,pageY:a.pageY,dateValue:Date.now()};else{if(d==b.rootWidget){b.deselect();this._areaSelectInit(a.pageX,a.pageY);return}"NONE"===c.getAllowedChild(d.type)[0]?(b.select(d,h),q=d):(this._mouseDownInfo={widget:d,eventTargetWidget:f,pageX:a.pageX,pageY:a.pageY,dateValue:Date.now()},this._areaSelectInit(a.pageX,a.pageY))}if(q&&(d=b.getDocument(),e=d.defaultView&&
d.defaultView.dojo)&&(e=e.style(q.domNode,"position"),this._moverAbsolute="absolute"==e,e=q.getParent(),f=q.getHelper(),!(f&&f.disableDragging&&f.disableDragging(q)||e&&e.isLayout&&e.isLayout()))){this._moverWidget=q;this._moverWidgets=[q];this._moverLastEventTarget=null;b._chooseParent.setProposedParentWidget(null);e=b.getSelection();this._moverStartLocations=[];this._moverStartLocationsRel=[];for(h=0;h<e.length;h++){e[h]!=q&&this._moverWidgets.push(e[h]);g=null;g=(g=e[h].getHelper())&&g.getMarginBoxPageCoords?
g.getMarginBoxPageCoords(e[h]):u.getMarginBoxPageCoordsCached(e[h].domNode);this._moverStartLocations.push(g);if((p=e[h].domNode.offsetParent)&&"BODY"!=p.tagName)var r=u.getBorderBoxPageCoordsCached(p),v=n.getBorderExtents(p),p=g.l-(r.l+v.l),g=g.t-(r.t+v.t);else p=g.l,g=g.t;this._moverStartLocationsRel.push({l:p,t:g})}h=q.domNode;g=h.offsetWidth;e=h.offsetHeight;p=null;f&&f.getMarginBoxPageCoords?(p=f.getMarginBoxPageCoords(q),g=p.w,e=p.h):p=u.getMarginBoxPageCoordsCached(h);h=p.l;f=p.t;q=p.w;p=p.h;
r=b.getScrollOffset();h+=r.x;f+=r.y;this._moverAbsolute?this._moverDragDiv=dojo.create("div",{className:"selectToolDragDiv",style:"left:"+h+"px;top:"+f+"px;width:"+q+"px;height:"+p+"px"},b.rootNode):(q=g+10,e+=10,g=q-8,p=e-8,this._moverDragDiv=dojo.create("div",{className:"flowDragOuter",style:"left:"+(h-5)+"px;top:"+(f-5)+"px;width:"+q+"px;height:"+e+"px"},b.rootNode),dojo.create("div",{className:"flowDragInner",style:"width:"+g+"px;height:"+p+"px"},this._moverDragDiv));this._mover=new k(this._moverDragDiv,
a,this);this._altKey=a.altKey;this._updateMoveCursor();(a=document.getElementById("maqetta_project_select"))&&a.focus();d.defaultView.focus()}}}},onMouseUp:function(a){var b=this._context;if(!b.isFocusNode(a.target)){var d=1===a.which,c=Date.now();this._mouseDownInfo&&(10>=Math.abs(a.pageX-this._mouseDownInfo.pageX)&&10>=Math.abs(a.pageY-this._mouseDownInfo.pageY)&&750>=c-this._mouseDownInfo.dateValue&&(this._context.select(this._mouseDownInfo.eventTargetWidget?this._mouseDownInfo.eventTargetWidget:
this._mouseDownInfo.widget),d=!1),this._mouseDownInfo=null);if(this._lastMouseUp&&10>=Math.abs(a.pageX-this._lastMouseUp.pageX)&&10>=Math.abs(a.pageY-this._lastMouseUp.pageY)&&750>=c-this._lastMouseUp.dateValue)this.onDblClick(a);this._lastMouseUp={pageX:a.pageX,pageY:a.pageY,dateValue:c};b.getScrollOffset();this._areaSelect&&d&&this._areaSelectSelectWidgets(a.pageX,a.pageY);this._areaSelectClear()}},onDblClick:function(a){if(!this._context.isFocusNode(a.target)){for(var b="selectToolDragDiv"===a.target.getAttribute("class")?
this._context.getSelection()[0]:this._getTarget()||m.getEnclosingWidget(a.target);b&&!b.getContext();)b=m.getEnclosingWidget(b.domNode.parentNode);if(b){var d=this._context.getSelection(),c=dojo.isMac?a.ctrlKey:a.metaKey;0<=dojo.indexOf(d,b)?c&&2!==a.button?this._context.deselect(b):2!==a.button&&this._context.select(b,null,!0):this._context.select(b,c,!0)}}},onMouseMove:function(a){this._context.isFocusNode(a.target)||(this._setTarget(a.target,a),this._areaSelect&&(1===a.which?this._areaSelectUpdate(a.pageX,
a.pageY):this._areaSelectClear()))},onMouseOver:function(a){try{dojo.hasClass(a.target,"editFeedback")||dojo.hasClass(a.target,"selectToolDragDiv")||(this._onMouseOverEventTargetXPath=f.getXPath(a.target)),this._setTarget(a.target,a)}catch(A){}},onMouseOut:function(a){try{this._setTarget(a.relatedTarget,a)}catch(A){}},onExtentChange:function(b){var d=b.index,f=b.newBox,e=b.copy,g=b.oldBoxes,k=b.applyToWhichStates,h,q=this._context,y=q._chooseParent,x=q.getSelection(),z=[];if(!(x.length<=d)){var I=
x[d],G=void 0;if("w"in f||"h"in f){var d=c.queryDescriptor(I.type,"resizable"),M,Q;b=I.domNode;var R=b.ownerDocument.defaultView.getComputedStyle(b),y=u.getMarginExtents(b,R),P=n.getBorderExtents(b,R);b=n.getPadExtents(b,R);"number"==typeof f.w&&(f.w-=y.w+P.w+b.w);"number"==typeof f.h&&(f.h-=y.h+P.h+b.h);switch(d){case "width":M=f.w;break;case "height":Q=f.h;case "both":M=f.w,Q=f.h}d=new w(I,M,Q,k);G||(G=new a);G.add(d);d=dojo.style(I.domNode,"position");"l"in f&&"t"in f&&"absolute"==d&&(M=f.l,f=
f.t,f=new v(I,M,f,null,null,k),G.add(f))}else if(b=I.getStyleNode(),"absolute"!=dojo.style(b,"position")){var N=y.getProposedParentWidget();if(N){G||(G=new a);var U=null;b=q.reorderPreserveSiblingOrder(x);dojo.forEach(b,function(a){N.refChild&&(null!==U?h=U+1:(h=N.parent.getChildren().indexOf(N.refChild),0<=h?N.refAfter&&h++:h=null),U=h);if(e){var b,d=a.getData({identify:!1});d.context=q;dojo.withDoc(q.getDocument(),function(){b=m.createWidget(d)},this);b&&(G.add(new p(b,N.parent,h)),B.prototype.checkAddToCurrentState(G,
b),z.push(b))}else G.add(new r(a,N.parent,h)),z.push(a)},this);q.select(null)}else console.error("SelectTool: ppw is null")}else{var V=[],W=[];dojo.forEach(x,function(a,b){V[b]=x[b].getParent();W[b]=V[b].indexOf(a)});M=f.l;f=f.t;G||(G=new a);var S=(N=y.getProposedParentWidget())?N.parent:null;b=I.getParent();Q=void 0;S&&S!=b&&(Q=S);var Y=M-g[0].l,Z=f-g[0].t;e&&(b=q.reorderPreserveSiblingOrder(x),dojo.forEach(b,function(a){var b=a.getParent();if(b){for(var d=b.getChildren(),c=0;c<d.length&&d[c]!=a;c++);
var f,e=a.getData({identify:!1});e.context=q;dojo.withDoc(q.getDocument(),function(){f=m.createWidget(e)},this);f&&(S?G.add(new p(f,S,-1)):G.add(new p(f,b,c)),B.prototype.checkAddToCurrentState(G,f),z.push(f))}},this),newWidget=z[d]);var T=e?newWidget:I,X=new v(T,M,f,null,g[d],k);G.add(X);Q&&(G.add(new r(T,S,"last")),G.add(new v(T,M,f,null,null,k)));dojo.forEach(x,dojo.hitch(this,function(a,b){T=e?z[b]:a;if(a!=I){var d=g[b].l+Y,c=g[b].t+Z;"absolute"==a.getStyleNode().style.position&&(b=new v(T,d,
c,X,g[b],k,!0),G.add(b));a=a.getParent();S&&S!=a&&(G.add(new r(T,S,"last")),G.add(new v(T,d,c,null,null,k,!0)))}}));e&&dojo.forEach(x,dojo.hitch(this,function(a,b){G.add(new r(x[b],V[b],W[b]));G.add(new v(x[b],g[b].l,g[b].t,null,g[b],k,!0))}))}G?(q.getCommandStack().execute(G),dojo.forEach(z,function(a,b){q.select(a,0<b)},this)):q.select(I)}},_updateMoveCursor:function(){var a=this._context.getDocument().body;this._moverDragDiv&&(this._altKey?dojo.addClass(a,"selectToolDragCopy"):dojo.addClass(a,
"selectToolDragMove"))},onKeyDown:function(a){if(a)switch(dojo.stopEvent(a),a.keyCode){case dojo.keys.SHIFT:this._shiftKey=!0;b.clearSnapLines(this._context);break;case dojo.keys.ALT:this._altKey=!0;this._updateMoveCursor();break;case dojo.keys.SPACE:this._spaceKey=!0;break;case 83:this._sKey=!0;break;case dojo.keys.TAB:this._moveFocus(a)&&dojo.stopEvent(a);break;case dojo.keys.RIGHT_ARROW:case dojo.keys.LEFT_ARROW:case dojo.keys.DOWN_ARROW:case dojo.keys.UP_ARROW:this._move(a)}},onKeyUp:function(a){if(a&&
this._moverWidget)switch(dojo.stopEvent(a),a.keyCode){case dojo.keys.SHIFT:this._shiftKey=!1;break;case dojo.keys.ALT:this._altKey=!1;this._updateMoveCursor();break;case dojo.keys.SPACE:this._spaceKey=!1;break;case 83:this._sKey=!1}},_move:function(b){var d=this._context.getSelection();if(0!==d.length){var c=0,f=0,e=b.shiftKey?10:1;switch(b.keyCode){case dojo.keys.RIGHT_ARROW:c=e;break;case dojo.keys.LEFT_ARROW:c=-e;break;case dojo.keys.DOWN_ARROW:f=e;break;case dojo.keys.UP_ARROW:f=-e}var g=new a;
dojo.forEach(d,function(a){var b=null,b=(b=a.getHelper())&&b.getMarginBoxPageCoords?b.getMarginBoxPageCoords(a):u.getMarginBoxPageCoords(a.domNode);g.add(new v(a,b.l+c,b.t+f))},this);g.isEmpty()||(this._context.getCommandStack().execute(g),this._updateTargetOverlays())}},_moveFocus:function(a){a=a.shiftKey?-1:1;for(var b=this._context.getSelection()[0],d=this._context.getTopWidgets(),b=b?dojo.indexOf(d,b)+a:0<a?0:d.length-1,c=d[b];c&&!c.getContext();)b+=a,c=d[b];c&&this._context.select(c);return c},
onMove:function(a,b,d){this._mouseDownInfo=null;a=this._context;var c=a._chooseParent,f=a.getSelection(),e=f.indexOf(this._moverWidget);if(0>e)console.error("SelectTool.js onMove error. move widget is not selected");else{this._selectionHideFocus();var k=!1,p=c.getProposedParentWidget();if(p&&p.parent&&p.parent.domNode){var m=p.parent.domNode;if("BODY"==p.parent.domNode.tagName)k=!0;else for(p=d.target;p&&"BODY"!=p.tagName;){if(p==m){k=!0;break}p=p.parentNode}}k&&d.target==this._moverLastEventTarget||
c.setProposedParentWidget(null);this._moverLastEventTarget=d.target;this._moverBox=b;this._moverDragDiv.style.left=b.l+"px";this._moverDragDiv.style.top=b.t+"px";if(this._moverAbsolute)for(k=b.l-this._moverStartLocations[e].l,b=b.t-this._moverStartLocations[e].t,e=Math.abs(k),m=Math.abs(b),this._shiftKey&&(e>=this.CONSTRAIN_MIN_DIST||m>=this.CONSTRAIN_MIN_DIST)&&(e>m?b=0:k=0),e=0;e<f.length;e++)m=f[e],p=this._moverStartLocationsRel[e].t,m.domNode.style.left=this._moverStartLocationsRel[e].l+k+"px",
m.domNode.style.top=p+b+"px";k=this._moverWidget.type;f=this._moverWidget.getParent();(b=c.parentListDivGet())||(b=c.parentListDivCreate({widgetType:k,absolute:this._moverAbsolute,doCursor:!this._moverAbsolute,beforeAfter:null,currentParent:f}));if(e=a.getParentIframe()){offsetTop=offsetLeft=0;for(offsetNode=e;offsetNode&&"BODY"!=offsetNode.tagName;)offsetLeft+=offsetNode.offsetLeft,offsetTop+=offsetNode.offsetTop,offsetNode=offsetNode.offsetParent;e=u.getScrollLeft(a.rootNode.parentNode);m=u.getScrollTop(a.rootNode.parentNode);
b.style.left=offsetLeft+d.pageX-e+"px";b.style.top=offsetTop+d.pageY-m+"px"}b=g.getPreferences("davinci.ve.editorPrefs",h.getProject());b=!this._shiftKey&&b.snap&&this._moverAbsolute;e=a.getPreference("showPossibleParents");e=!0;c=c.isSpaceKeyDown()||this._spaceKey;c=!e&&c||e&&!c;k={type:k};e={x:d.pageX,y:d.pageY};m=null;m=(m=this._moverWidget.getHelper())&&m.getMarginBoxPageCoords?m.getMarginBoxPageCoords(this._moverWidget):u.getMarginBoxPageCoords(this._moverWidget.domNode);a.dragMoveUpdate({widgets:this._moverWidgets,
data:k,eventTarget:d.target,position:e,absolute:this._moverAbsolute,currentParent:f,rect:m,doSnapLinesX:b,doSnapLinesY:b,doFindParentsXY:c,doCursor:!this._moverAbsolute})}},onFirstMove:function(a){},onMoveStart:function(a){},onMoveStop:function(a){a=this._context;var b=this._context._chooseParent;this._moverWidget&&this._moverWidget._srcElement&&f.getXPath(this._moverWidget._srcElement,d);var c=!0,e,g;this._moverBox&&this._moverWidget&&this._moverWidget.domNode?(g={l:this._moverBox.l,t:this._moverBox.t},
e=a.getSelection().indexOf(this._moverWidget),0>e&&(c=!1)):c=!1;if(c){c=void 0;if(this._sKey)for(var k=z.getStatesListCurrent(this._moverWidget.domNode),h=0;h<k.length;h++){if(k[h]){c=k[h];break}}else c=z.propertyDefinedForAnyCurrentState(this._moverWidget.domNode,["left","top","right","bottom"]);var p=this._getPageLeftTop(this._moverWidget.domNode.offsetParent),k=a.getScrollOffset(),h=Math.abs(g.l-p.l-this._moverStartLocations[e].l),p=Math.abs(g.t-p.t-this._moverStartLocations[e].t);this._shiftKey&&
(h>=this.CONSTRAIN_MIN_DIST||p>=this.CONSTRAIN_MIN_DIST)&&(h>p?g.t=this._moverStartLocations[e].t:g.l=this._moverStartLocations[e].l);g.t-=k.y;g.l-=k.x;this.onExtentChange({index:e,newBox:g,oldBoxes:this._moverStartLocations,copy:this._altKey,applyToWhichStates:c})}this._moverDragDiv&&((e=this._moverDragDiv.parentNode)&&e.removeChild(this._moverDragDiv),this._moverDragDiv=null);this._mover=this._moverBox=this._moverWidget=this._moverWidgets=this._moverLastEventTarget=null;this._updateMoveCursor();
a.dragMoveCleanup();b.parentListDivDelete();this._selectionShowFocus();b=f.toCssPath(this._onMouseOverEventTargetXPath);a=a.getDocument();(a=b?a.querySelector(b):null)&&this._setTarget(a)},_getPageLeftTop:function(a){if(a){var b=a.offsetLeft,d=a.offsetTop;for(a=a.offsetParent;a&&"BODY"!=a.tagName;)b+=a.offsetLeft,d+=a.offsetTop,a=a.offsetParent;return{l:b,t:d}}return{l:0,t:0}},_areaSelectInit:function(a,b){this._areaSelect={x:a,y:b,attached:!1};this._areaSelectDiv=dojo.create("div",{className:"areaSelectDiv",
style:"display:none"})},_areaSelectUpdate:function(a,b){this._areaSelect&&this._areaSelectDiv&&(a=this._getBounds(this._areaSelect.x,this._areaSelect.y,a,b),b=this._areaSelectDiv.style,b.display="block",b.left=a.l+"px",b.top=a.t+"px",b.width=a.w+"px",b.height=a.h+"px",this._areaSelect.attached||(this._context.rootNode.appendChild(this._areaSelectDiv),this._areaSelect.attached=!0))},_areaSelectClear:function(){this._areaSelect=null;if(this._areaSelectDiv){var a=this._areaSelectDiv.parentNode;a&&a.removeChild(this._areaSelectDiv);
this._areaSelectDiv=null}},_areaSelectSelectWidgets:function(a,b){if(this._areaSelect){var d=this._getBounds(this._areaSelect.x,this._areaSelect.y,a,b);a=d.l;b=d.t;var c=d.w,d=d.h,f=this._context;f.deselect();for(var f=f.getTopWidgets(),e=0;e<f.length;e++)this._areaSelectRecursive(f[e],a,b,c,d)}},_areaSelectRecursive:function(a,b,d,c,f){if(a&&a.domNode){var e=u.getBorderBoxPageCoordsCached(a.domNode);if(e.l>=b&&e.t>=d&&e.l+e.w<=b+c&&e.t+e.h<=d+f)this._context.select(a,!0);else for(a=a.getChildren(),
e=0;e<a.length;e++)this._areaSelectRecursive(a[e],b,d,c,f)}},_getBounds:function(a,b,d,c){var f={};a<=d?(f.l=a,f.w=d-a):(f.l=d,f.w=a-d);b<=c?(f.t=b,f.h=c-b):(f.t=c,f.h=b-c);return f},_checkFocusXY:function(a,b){for(var d=this._context,c=d.getSelection(),f=0;f<c.length;f++){var e=d._focuses[f].getBounds();if(a>=e.l&&a<=e.l+e.w&&b>=e.t&&b<=e.t+e.h)return c[f]}return null},_selectionHideFocus:function(){for(var a=this._context,b=a.getSelection(),d=0;d<b.length;d++)a._focuses[d].hide()},_selectionShowFocus:function(){for(var a=
this._context,b=a.getSelection(),d=0;d<b.length;d++)a._focuses[d].show(b[d],{})}})})},"dojo/dnd/Mover":function(){define("../_base/array ../_base/declare ../_base/lang ../sniff ../_base/window ../dom ../dom-geometry ../dom-style ../Evented ../on ../touch ./common ./autoscroll".split(" "),function(q,n,h,g,e,m,c,k,f,d,b,a,p){return n("dojo.dnd.Mover",[f],{constructor:function(a,c,f){function e(a){a.preventDefault();a.stopPropagation()}this.node=m.byId(a);this.marginBox={l:c.pageX,t:c.pageY};this.mouseButton=
c.button;c=this.host=f;a=a.ownerDocument;this.events=[d(a,b.move,h.hitch(this,"onFirstMove")),d(a,b.move,h.hitch(this,"onMouseMove")),d(a,b.release,h.hitch(this,"onMouseUp")),d(a,"dragstart",e),d(a.body,"selectstart",e)];p.autoScrollStart(a);if(c&&c.onMoveStart)c.onMoveStart(this)},onMouseMove:function(a){p.autoScroll(a);var b=this.marginBox;this.host.onMove(this,{l:b.l+a.pageX,t:b.t+a.pageY},a);a.preventDefault();a.stopPropagation()},onMouseUp:function(a){(g("webkit")&&g("mac")&&2==this.mouseButton?
0==a.button:this.mouseButton==a.button)&&this.destroy();a.preventDefault();a.stopPropagation()},onFirstMove:function(a){var b=this.node.style,d,f=this.host;switch(b.position){case "relative":case "absolute":d=Math.round(parseFloat(b.left))||0;b=Math.round(parseFloat(b.top))||0;break;default:b.position="absolute";b=c.getMarginBox(this.node);d=e.doc.body;var g=k.getComputedStyle(d),h=c.getMarginBox(d,g),g=c.getContentBox(d,g);d=b.l-(g.l-h.l);b=b.t-(g.t-h.t)}this.marginBox.l=d-this.marginBox.l;this.marginBox.t=
b-this.marginBox.t;if(f&&f.onFirstMove)f.onFirstMove(this,a);this.events.shift().remove()},destroy:function(){q.forEach(this.events,function(a){a.remove()});var a=this.host;if(a&&a.onMoveStop)a.onMoveStop(this);this.events=this.node=this.host=null}})})},"dojo/touch":function(){define("./_base/kernel ./aspect ./dom ./dom-class ./_base/lang ./on ./has ./mouse ./domReady ./_base/window".split(" "),function(q,n,h,g,e,m,c,k,f,d){function b(a,b,d){return w&&d?function(a,b){return m(a,d,b)}:r?function(d,
c){var f=m(d,b,c),e=m(d,a,function(a){(!E||(new Date).getTime()>E+1E3)&&c.call(this,a)});return{remove:function(){f.remove();e.remove()}}}:function(b,d){return m(b,a,d)}}function a(a){do if(a.dojoClick)return a.dojoClick;while(a=a.parentNode)}function p(b,c,f){if(B=!b.target.disabled&&a(b.target))z=b.target,u=b.touches?b.touches[0].pageX:b.clientX,y=b.touches?b.touches[0].pageY:b.clientY,A=("object"==typeof B?B.x:"number"==typeof B?B:0)||4,C=("object"==typeof B?B.y:"number"==typeof B?B:0)||4,x||(b=
function(a){d.doc.addEventListener(a,function(b){b._dojo_click||!((new Date).getTime()<=F+1E3)||"INPUT"==b.target.tagName&&g.contains(b.target,"dijitOffScreen")||(b.stopPropagation(),b.stopImmediatePropagation&&b.stopImmediatePropagation(),"click"!=a||"INPUT"==b.target.tagName&&"radio"!=b.target.type&&"checkbox"!=b.target.type||"TEXTAREA"==b.target.tagName||"AUDIO"==b.target.tagName||"VIDEO"==b.target.tagName||b.preventDefault())},!0)},x=!0,d.doc.addEventListener(c,function(a){B=B&&a.target==z&&Math.abs((a.touches?
a.touches[0].pageX:a.clientX)-u)<=A&&Math.abs((a.touches?a.touches[0].pageY:a.clientY)-y)<=C},!0),d.doc.addEventListener(f,function(a){if(B){F=(new Date).getTime();var b=a.target;"LABEL"===b.tagName&&(b=h.byId(b.getAttribute("for"))||b);setTimeout(function(){m.emit(b,"click",{bubbles:!0,cancelable:!0,_dojo_click:!0})})}},!0),b("click"),b("mousedown"),b("mouseup"))}var r=c("touch"),v=5>c("ios"),w=navigator.msPointerEnabled,x,B,z,u,y,A,C,F,E,D;r&&(w?f(function(){d.doc.addEventListener("MSPointerDown",
function(a){p(a,"MSPointerMove","MSPointerUp")},!0)}):f(function(){function a(a){var b=e.delegate(a,{bubbles:!0});6<=c("ios")&&(b.touches=a.touches,b.altKey=a.altKey,b.changedTouches=a.changedTouches,b.ctrlKey=a.ctrlKey,b.metaKey=a.metaKey,b.shiftKey=a.shiftKey,b.targetTouches=a.targetTouches);return b}D=d.body();d.doc.addEventListener("touchstart",function(a){E=(new Date).getTime();var b=D;D=a.target;m.emit(b,"dojotouchout",{relatedTarget:D,bubbles:!0});m.emit(D,"dojotouchover",{relatedTarget:b,
bubbles:!0});p(a,"touchmove","touchend")},!0);m(d.doc,"touchmove",function(b){E=(new Date).getTime();var c=d.doc.elementFromPoint(b.pageX-(v?0:d.global.pageXOffset),b.pageY-(v?0:d.global.pageYOffset));c&&(D!==c&&(m.emit(D,"dojotouchout",{relatedTarget:c,bubbles:!0}),m.emit(c,"dojotouchover",{relatedTarget:D,bubbles:!0}),D=c),m.emit(c,"dojotouchmove",a(b))||b.preventDefault())});m(d.doc,"touchend",function(b){E=(new Date).getTime();var c=d.doc.elementFromPoint(b.pageX-(v?0:d.global.pageXOffset),b.pageY-
(v?0:d.global.pageYOffset))||d.body();m.emit(c,"dojotouchend",a(b))})}));n={press:b("mousedown","touchstart","MSPointerDown"),move:b("mousemove","dojotouchmove","MSPointerMove"),release:b("mouseup","dojotouchend","MSPointerUp"),cancel:b(k.leave,"touchcancel",r?"MSPointerCancel":null),over:b("mouseover","dojotouchover","MSPointerOver"),out:b("mouseout","dojotouchout","MSPointerOut"),enter:k._eventHandler(b("mouseover","dojotouchover","MSPointerOver")),leave:k._eventHandler(b("mouseout","dojotouchout",
"MSPointerOut"))};return q.touch=n})},"dojo/dnd/common":function(){define(["../sniff","../_base/kernel","../_base/lang","../dom"],function(q,n,h,g){var e=h.getObject("dojo.dnd",!0);e.getCopyKeyState=function(e){return e[q("mac")?"metaKey":"ctrlKey"]};e._uniqueId=0;e.getUniqueId=function(){var h;do h=n._scopeName+"Unique"+ ++e._uniqueId;while(g.byId(h));return h};e._empty={};e.isFormElement=function(e){e=e.target;3==e.nodeType&&(e=e.parentNode);return 0<=" a button textarea input select option ".indexOf(" "+
e.tagName.toLowerCase()+" ")};return e})},"dojo/dnd/autoscroll":function(){define("../_base/lang ../sniff ../_base/window ../dom-geometry ../dom-style ../window".split(" "),function(q,n,h,g,e,m){var c={};q.setObject("dojo.dnd.autoscroll",c);c.getViewport=m.getBox;c.V_TRIGGER_AUTOSCROLL=32;c.H_TRIGGER_AUTOSCROLL=32;c.V_AUTOSCROLL_VALUE=16;c.H_AUTOSCROLL_VALUE=16;var k,f=h.doc,d=Infinity,b=Infinity;c.autoScrollStart=function(a){f=a;k=m.getBox(f);a=h.body(f).parentNode;d=Math.max(a.scrollHeight-k.h,
0);b=Math.max(a.scrollWidth-k.w,0)};c.autoScroll=function(a){var e=k||m.getBox(f),g=h.body(f).parentNode,n=0,q=0;a.clientX<c.H_TRIGGER_AUTOSCROLL?n=-c.H_AUTOSCROLL_VALUE:a.clientX>e.w-c.H_TRIGGER_AUTOSCROLL&&(n=Math.min(c.H_AUTOSCROLL_VALUE,b-g.scrollLeft));a.clientY<c.V_TRIGGER_AUTOSCROLL?q=-c.V_AUTOSCROLL_VALUE:a.clientY>e.h-c.V_TRIGGER_AUTOSCROLL&&(q=Math.min(c.V_AUTOSCROLL_VALUE,d-g.scrollTop));window.scrollBy(n,q)};c._validNodes={div:1,p:1,td:1};c._validOverflow={auto:1,scroll:1};c.autoScrollNodes=
function(a){for(var b,d,f,k,m,q=0,z=0,u=a.target;u;){if(1==u.nodeType&&u.tagName.toLowerCase()in c._validNodes){f=e.getComputedStyle(u);m=f.overflowX.toLowerCase()in c._validOverflow;k=f.overflowY.toLowerCase()in c._validOverflow;if(m||k)b=g.getContentBox(u,f),d=g.position(u,!0);if(m){f=Math.min(c.H_TRIGGER_AUTOSCROLL,b.w/2);m=a.pageX-d.x;if(n("webkit")||n("opera"))m+=h.body().scrollLeft;q=0;0<m&&m<b.w&&(m<f?q=-f:m>b.w-f&&(q=f),u.scrollLeft+=q)}if(k){k=Math.min(c.V_TRIGGER_AUTOSCROLL,b.h/2);f=a.pageY-
d.y;if(n("webkit")||n("opera"))f+=h.body().scrollTop;z=0;0<f&&f<b.h&&(f<k?z=-k:f>b.h-k&&(z=k),u.scrollTop+=z)}if(q||z)return}try{u=u.parentNode}catch(y){u=null}}c.autoScroll(a)};return c})},"davinci/ve/Snap":function(){define(["davinci/ve/utils/GeomUtils"],function(q){dojo.getObject("davinci.ve.Snap",!0);return davinci.ve.Snap={updateSnapLinesBeforeTraversal:function(n,h){n._snapX=null;n._snapY=null;if(n._lastSnapBox&&n._lastSnapBox.l==h.l&&n._lastSnapBox.t==h.t&&n._lastSnapBox.w==h.w&&n._lastSnapBox.h==
h.h)return!1;snapBox={l:h.l,t:h.t,w:h.w,h:h.h,c:h.l+h.w/2,r:h.l+h.w,m:h.t+h.h/2,b:h.t+h.h};n._lastSnapBox=snapBox;return!0},findSnapOpportunities:function(n,h,g,e,m){function c(b,d,c,f){f<a&&(n._snapX={type:b,typeRefObj:b,typeCurrObj:d,x:c,widget:h,delta:f},a=f,n._snapXLast=n._snapX)}function k(a,b,d,c){c<p&&(n._snapY={type:a,typeRefObj:a,typeCurrObj:b,y:d,widget:h,delta:c},p=c,n._snapYLast=n._snapY)}g=n._lastSnapBox;var f=h.domNode;if("BODY"!=f.tagName){var d=null,b=h.getHelper(),d=b&&b.getMarginBoxPageCoords?
b.getMarginBoxPageCoords(h):q.getMarginBoxPageCoordsCached(f);n.getScrollOffset();d.x=d.l;d.y=d.t;var a=n._snapX?n._snapX.delta:6,p=n._snapY?n._snapY.delta:6,f={snapRect:{l:d.x,c:d.x+d.w/2,r:d.x+d.w,t:d.y,m:d.y+d.h/2,b:d.y+d.h}};b&&b.getSnapInfo&&(f=b.getSnapInfo(h,f));var b=f.snapRect,r;if(b){if(e){e=n._snapXLast&&n._snapXLast.widget===h?Infinity:75;d=Math.abs(b.t-g.b);r=Math.abs(b.b-g.t);var v=Math.abs(b.b-g.b);if(Math.abs(b.t-g.t)<=e||d<=e||r<=e||v<=e)e=Math.abs(b.l-g.l),d=Math.abs(b.c-g.c),r=
Math.abs(b.r-g.r),c("left","left",b.l,e),c("center","center",b.c,d),c("right","right",b.r,r),c("left","center",b.c,Math.abs(b.c-g.l)),c("left","right",b.r,Math.abs(b.r-g.l)),c("right","left",b.l,Math.abs(b.l-g.r)),c("right","center",b.c,Math.abs(b.c-g.r)),c("center","left",b.l,Math.abs(b.l-g.c)),c("center","right",b.r,Math.abs(b.r-g.c))}m&&(m=n._snapYLast&&n._snapYLast.widget===h?Infinity:75,e=Math.abs(b.l-g.r),d=Math.abs(b.r-g.l),r=Math.abs(b.r-g.r),Math.abs(b.l-g.l)<=m||e<=m||d<=m||r<=m)&&(e=Math.abs(b.t-
g.t),d=Math.abs(b.m-g.m),r=Math.abs(b.b-g.b),k("top","top",b.t,e),k("middle","middle",b.m,d),k("bottom","bottom",b.b,r),k("top","middle",b.m,Math.abs(b.m-g.t)),k("top","bottom",b.b,Math.abs(b.b-g.t)),k("bottom","top",b.t,Math.abs(b.t-g.b)),k("bottom","middle",b.m,Math.abs(b.m-g.b)),k("middle","top",b.t,Math.abs(b.t-g.m)),k("middle","bottom",b.b,Math.abs(b.b-g.m)))}if(f=f.snapPoints)for(b=0;b<f.length;b++)m=f[b],e=Math.abs(m.x-g.l),d=Math.abs(m.x-g.c),r=Math.abs(m.x-g.r),c("point",m.x,e),c("point",
m.x,d),c("point",m.x,r),e=Math.abs(m.y-g.t),d=Math.abs(m.y-g.m),r=Math.abs(m.y-g.b),k("point",m.y,e),k("point",m.y,d),k("point",m.y,r)}},updateSnapLinesAfterTraversal:function(n){function h(c,d,b,a){b.style.display="block";a.style.display="block";e=(a=d.getHelper())&&a.getMarginBoxPageCoords?a.getMarginBoxPageCoords(d):q.getMarginBoxPageCoordsCached(d.domNode);c.getScrollOffset();e.x=e.l;e.y=e.t;e.r=e.x+e.w;e.b=e.y+e.h;e.c=e.x+e.w/2;e.m=e.y+e.h/2;b.style.left=e.x+"px";b.style.top=e.y+"px";b.style.width=
e.w+"px";b.style.height=e.h+"px";b.style.backgroundColor="rgba(255,0,255,.05)"}var g=n.getContainerNode();n._snapLinesDiv||(n._snapLinesDiv=dojo.create("div",{"class":"snaplines",style:"position:absolute;top:0px;left:0px;z-index:1000001;pointer-events:none;"},g),n._snapLinesDivWidgetX=dojo.create("div",{"class":"snaplinesWidgetX",style:"position:absolute;pointer-events:none;"},n._snapLinesDiv),n._snapLinesDivAlignX=dojo.create("div",{"class":"snaplinesAlignX",style:"position:absolute;pointer-events:none;"},
n._snapLinesDiv),n._snapLinesDivWidgetY=dojo.create("div",{"class":"snaplinesWidgetY",style:"position:absolute;pointer-events:none;"},n._snapLinesDiv),n._snapLinesDivAlignY=dojo.create("div",{"class":"snaplinesAlignY",style:"position:absolute;pointer-events:none;"},n._snapLinesDiv));n._snapLinesDiv.style.display="block";var e,g=n._snapLinesDivAlignX.style,m=n._snapLinesDivWidgetX.style;if(n._snapX){m=n._snapX;h(n,m.widget,n._snapLinesDivWidgetX,n._snapLinesDivAlignX);var c,k;e.y<snapBox.t?(c=e.y,
k=snapBox.t-e.y):(c=snapBox.t,k=e.y-snapBox.t);g.left="point"==m.typeCurrObj?n._snapX.x+"px":"left"==m.typeCurrObj?e.x+"px":"center"==m.typeCurrObj?e.c+"px":e.r+"px";g.top=c+"px";g.width="1px";g.height=k+"px";g.backgroundColor="rgba(255,0,255,.75)"}else g.display="none",m.display="none";g=n._snapLinesDivAlignY.style;m=n._snapLinesDivWidgetY.style;n._snapY?(m=n._snapY,h(n,m.widget,n._snapLinesDivWidgetY,n._snapLinesDivAlignY),e.x<snapBox.l?(n=e.x,c=snapBox.l-e.x):(n=snapBox.l,c=e.x-snapBox.l),g.top=
"point"==m.type?m.y+"px":"top"==m.typeCurrObj?e.y+"px":"middle"==m.typeCurrObj?e.m+"px":e.b+"px",g.left=n+"px",g.height="1px",g.width=c+"px",g.backgroundColor="rgba(255,0,255,.75)"):(g.display="none",m.display="none")},clearSnapLines:function(n){n._snapLinesDiv&&(n._snapLinesDiv.style.display="none");n._snapX=n._snapY=null}}})},"davinci/ve/commands/ReparentCommand":function(){define(["dojo/_base/declare","davinci/ve/commands/_hierarchyCommand","../widget","../States","davinci/ve/commands/ModifyCommand"],
function(q,n,h,g,e){return q("davinci.ve.commands.ReparentCommand",[n],{name:"reparent",constructor:function(e,c,g){this._id=e?e.id:void 0;this._newParentId=c?c.id:"myapp";this._newIndex=g},execute:function(){if(this._id&&this._newParentId){var m=h.byId(this._id);if(m){var c=m.getParent();c||(c=dojo.byId("myapp"));var k=h.byId(this._newParentId);k||(k=dojo.byId("myapp"));var f=this._isRefreshOnDescendantChange(m);this._oldParentId||(this._oldParentId=c.id,this._oldIndex=dojo.indexOf(c.getChildren(),
m),this._newIndex&&this._newIndex.domNode&&(this._newIndex=k.indexOf(this._newIndex)));c.removeChild(m);var d=k.getContext();k.addChild(m,k==c&&this._oldIndex<this._newIndex?this._newIndex-1:this._newIndex);if(d){var b=m.getHelper();b&&b.reparent&&b.reparent(m);m.startup();m.renderWidget();d.widgetChanged(d.WIDGET_REPARENTED,m,[c,k]);c=this._isRefreshOnDescendantChange(m);f&&(f=new e(f,null,null,d),f.execute());c&&(f=new e(c,null,null,d),f.execute())}g.resetState(m.domNode)}}},undo:function(){if(this._id&&
this._oldParentId&&this._newParentId){var m=h.byId(this._id);if(m){var c=h.byId(this._oldParentId);if(c){var k=h.byId(this._newParentId);if(k){var f=this._isRefreshOnDescendantChange(m),d=c.getContext();k.removeChild(m);c.addChild(m,this._oldIndex);if(d){var b=m.getHelper();b&&b.reparent&&b.reparent(m);m.startup();m.renderWidget();d.widgetChanged(d.WIDGET_REPARENTED,m,[c,k]);c=this._isRefreshOnDescendantChange(m);f&&(f=new e(f,null,null,d),f.execute());c&&(f=new e(c,null,null,d),f.execute())}g.resetState(m.domNode)}}}}}})})},
"davinci/ve/Focus":function(){define("require dojo/_base/declare dojo/query dijit/_WidgetBase dojo/dnd/Mover ../Runtime ./metadata ./States ./utils/GeomUtils".split(" "),function(q,n,h,g,e,m,c,k,f){return n(g,{nobSize:11,frameSize:6,postCreate:function(){dojo.addClass(this.domNode,"maqFocus");dojo.style(this.domNode,{position:"absolute",display:"none"});this._stdChrome=dojo.create("div",{"class":"editFocusStdChrome"},this.domNode);this._frames=[];for(var d=0;4>d;d++){var b=dojo.create("div",{"class":"editFocusFrame"},
this._stdChrome);this._frames.push(b);this.connect(b,"onmousedown","onMouseDown")}dojo.addClass(this._frames[0],"editFocusFrameLEFT");dojo.addClass(this._frames[1],"editFocusFrameRIGHT");dojo.addClass(this._frames[2],"editFocusFrameTOP");dojo.addClass(this._frames[3],"editFocusFrameBOTTOM");this._nobs=[];for(d=0;8>d;d++)b=dojo.create("div",{"class":"editFocusNob"},this._stdChrome),this._nobs.push(b),this.connect(b,"onmousedown","onMouseDown");this._frameIndex=this._nobIndex=-1;this._custom=dojo.create("div",
{"class":"editFocusCustom"},this.domNode)},resize:function(d,b){b&&(this._selectedWidget=b);this._moverCurrent=dojo.mixin({},d);this._moverCurrentConstrained=dojo.mixin({},this._moverCurrent);this._updateFocusChrome(this._moverCurrent,!0);this._contexDiv&&(this._contexDiv.style.left=d.w+10+"px",this._updateSubwidgetList());this._box=d},getBounds:function(){return this._moverCurrent},show:function(d,b){b=b&&b.inline;if(d){this._custom.innerHTML="";var a=c.queryDescriptor(d.type,"showStandardSelectionChrome");
this._stdChrome.style.display=!1===a?"none":"block";this.domNode.style.display="block";this._selectedWidget=d;var a=d.getHelper(),f=!0;if(a&&a.onShowSelection)a.onShowSelection({widget:d,customDiv:this._custom});b&&(this.showInline(d),f=!1);f&&delete this._inline}},showInline:function(d){this._selectedWidget=d;var b=this._context,a=this;c.getSmartInput(d.type).then(function(c){if(c)if(a._inline=c,c.useParent){if(c=d.getParent())b.deselect(d),b.select(c),b.getFocus(c).showInline(c)}else c.show&&c.show(d.id)})},
inlineEditActive:function(){return this._inline&&this._inline.inlineEditActive?this._inline.inlineEditActive():!1},hide:function(d){var b=(d=this._selectedWidget)?d.getHelper():void 0;if(b&&b.onHideSelection)b.onHideSelection({widget:d,customDiv:this._custom});this.domNode.style.display="none";this._displayedWidget=this._selectedWidget=null;this._inline&&(this._inline.hide(),delete this._inline)},allow:function(d){if(d){this._op=d;var b={},a=this._selectedWidget.getHelper();a&&a.resizeAllowWhich?
(a.resizeAllowWhich(this._selectedWidget,b),this._resizeLeft=b.resizeLeft,this._resizeRight=b.resizeRight,this._resizeTop=b.resizeTop,this._resizeBottom=b.resizeBottom):(this._resizeLeft=this._resizeRight=d.resizeWidth,this._resizeTop=this._resizeBottom=d.resizeHeight);b.left=!this._resizeLeft||this._resizeTop||this._resizeBottom?"none":"block";b.right=!this._resizeRight||this._resizeTop||this._resizeBottom?"none":"block";b.top=!this._resizeTop||this._resizeLeft||this._resizeRight?"none":"block";
b.bottom=!this._resizeBottom||this._resizeLeft||this._resizeRight?"none":"block";b.left_top=this._resizeLeft&&this._resizeTop?"block":"none";b.left_bottom=this._resizeLeft&&this._resizeBottom?"block":"none";b.right_top=this._resizeRight&&this._resizeTop?"block":"none";b.right_bottom=this._resizeRight&&this._resizeBottom?"block":"none";this._nobs[0].style.display=b.left;this._nobs[1].style.display=b.right;this._nobs[2].style.display=b.top;this._nobs[3].style.display=b.bottom;this._nobs[4].style.display=
b.left_top;this._nobs[5].style.display=b.left_bottom;this._nobs[6].style.display=b.right_top;this._nobs[7].style.display=b.right_bottom;this._nobs[0].style.cursor=this._frames[0].style.cursor=this._resizeLeft?"w-resize":"auto";this._nobs[1].style.cursor=this._frames[1].style.cursor=this._resizeRight?"e-resize":"auto";this._nobs[2].style.cursor=this._frames[2].style.cursor=this._resizeTop?"n-resize":"auto";this._nobs[3].style.cursor=this._frames[3].style.cursor=this._resizeBottom?"s-resize":"auto";
this._nobs[4].style.cursor="none"!=b.left_top?"nw-resize":"auto";this._nobs[5].style.cursor="none"!=b.left_bottom?"sw-resize":"auto";this._nobs[6].style.cursor="none"!=b.right_top?"ne-resize":"auto";this._nobs[7].style.cursor="none"!=b.right_bottom?"se-resize":"auto"}},_updateFocusChrome:function(d,b){"moverLeft"in d&&(this._context.isResizing=!0);if(b=dojo.byId("focusContainer")){b=f.getBorderBoxPageCoords(b);var a=this._context.getParentIframe(),c=f.getBorderBoxPageCoords(a);d.l+=c.l;d.t+=c.t;if(a)if(a.contentDocument)if(a.contentDocument.body){a=
a.contentDocument.body;d.l-=f.getScrollLeft(a);d.t-=f.getScrollTop(a);this.domNode.style.left=d.l-b.l+"px";this.domNode.style.top=d.t-b.t+"px";b=d.w;var a=d.h,e=d.w,c=d.h,g=d.w,k=d.h,h=d.w+4+4;d=d.h+4+4;this._frames[0].style.left=this._frames[2].style.left=this._frames[3].style.left="-6px";this._frames[0].style.top=this._frames[2].style.top=this._frames[1].style.top="-6px";this._frames[0].style.height=d+"px";this._frames[1].style.height=d+"px";this._frames[1].style.left=g+"px";this._frames[2].style.width=
h+"px";this._frames[3].style.top=k+"px";this._frames[3].style.width=h+"px";d=Math.round(e/2-this.nobSize/2);c=Math.round(c/2-this.nobSize/2);this._nobs[0].style.left=this._nobs[4].style.left=this._nobs[5].style.left="-11px";this._nobs[2].style.top=this._nobs[4].style.top=this._nobs[6].style.top="-11px";this._nobs[0].style.top=c+"px";this._nobs[1].style.left=b+"px";this._nobs[1].style.top=c+"px";this._nobs[2].style.left=d+"px";this._nobs[3].style.left=d+"px";this._nobs[3].style.top=a+"px";this._nobs[5].style.top=
a+"px";this._nobs[6].style.left=b+"px";this._nobs[7].style.left=b+"px";this._nobs[7].style.top=a+"px"}else console.error("have no body");else console.error("have no contentDocument");else console.error("have no parent iframe")}},onMouseDown:function(d){this._removeKeyHandlers();if(this._selectedWidget&&this._selectedWidget.domNode&&2!==d.button&&!d.ctrlKey&&"davinci.ve.tools.SelectTool"==this._context._activeTool.declaredClass){this._shiftKey=d.shiftKey;this._sKey=!1;this._nobIndex=dojo.indexOf(this._nobs,
d.target);this._frameIndex=dojo.indexOf(this._frames,d.target);var b=d.pageX-400,a=d.pageY-400,c=null,g=this._selectedWidget.getHelper(),c=g&&g.getMarginBoxPageCoords?g.getMarginBoxPageCoords(this._selectedWidget):f.getMarginBoxPageCoords(this._selectedWidget.domNode),g=f.getBorderBoxPageCoords(this._context.getParentIframe());this._moverStart={moverLeft:b,moverTop:a,l:c.l+g.l,t:c.t+g.t,w:c.w,h:c.h};c=document.body;this._moverCurrent=dojo.mixin({},this._moverStart);this._moverDragDiv=dojo.create("div",
{className:"focusDragDiv",style:"position:absolute;left:"+b+"px;top:"+a+"px;width:800px;height:800px"},c);this._mover=new e(this._moverDragDiv,d,this);dojo.stopEvent(d);this._mouseDownInfo={widget:this._selectedWidget,pageX:d.pageX+g.l,pageY:d.pageY+g.t,dateValue:Date.now()};this._moverMouseDownEvent=d;this._moverMouseUpEvent=null;this._moverMouseUpHandler=dojo.connect(this._moverDragDiv,"onmouseup",dojo.hitch(this,function(a){this.onMouseUp(a)}));d=this._context.getDocument();(b=document.getElementById("maqetta_project_select"))&&
b.focus();d.defaultView.focus();this._keyDownHandler=dojo.connect(d,"onkeydown",dojo.hitch(this,function(a){this.onKeyDown(a)}));this._keyUpHandler=dojo.connect(d,"onkeyup",dojo.hitch(this,function(a){this.onKeyUp(a)}))}},onMove:function(d,b,a){this._mouseDownInfo=null;this._moverDragDiv&&(this._moverDragDiv.style.left=b.l+"px",this._moverDragDiv.style.top=b.t+"px");if(!(0===this._frameIndex&&!this._resizeLeft||1===this._frameIndex&&!this._resizeRight||2===this._frameIndex&&!this._resizeTop||3===
this._frameIndex&&!this._resizeBottom)){d=this._moverStart;a=b.l-d.moverLeft;b=b.t-d.moverTop;if(0===this._frameIndex||4===this._nobIndex||0===this._nobIndex||5===this._nobIndex)this._moverCurrent.l=d.l+a,this._moverCurrent.w=d.w-a;else if(1===this._frameIndex||6===this._nobIndex||1===this._nobIndex||7===this._nobIndex)this._moverCurrent.w=d.w+a;if(2===this._frameIndex||4===this._nobIndex||2===this._nobIndex||6===this._nobIndex)this._moverCurrent.t=d.t+b,this._moverCurrent.h=d.h-b;else if(3===this._frameIndex||
5===this._nobIndex||3===this._nobIndex||7===this._nobIndex)this._moverCurrent.h=d.h+b;b=this._moverCurrent.w;d=this._moverCurrent.h;a=!1;if(this._selectedWidget&&"IMG"===this._selectedWidget.domNode.nodeName){var c=this._selectedWidget.domNode,e=c.naturalWidth,c=c.naturalHeight;"number"==typeof c&&0<c&&"number"==typeof e&&0<e&&(a=e/c,b<a*d?b=d*a:d=b/a,a=!0)}a||(0===this._frameIndex||0===this._nobIndex||1===this._frameIndex||1===this._nobIndex?d=b:2===this._frameIndex||2===this._nobIndex||3===this._frameIndex||
3===this._nobIndex?b=d:b>d?d=b:b=d);this._moverCurrentConstrained={l:this._moverCurrent.l,t:this._moverCurrent.t,w:b,h:d};if(0===this._frameIndex||0===this._nobIndex||1===this._frameIndex||1===this._nobIndex)this._moverCurrentConstrained.t-=(this._moverCurrentConstrained.h-this._moverCurrent.h)/2;if(2===this._frameIndex||2===this._nobIndex||3===this._frameIndex||3===this._nobIndex)this._moverCurrentConstrained.l-=(this._moverCurrentConstrained.w-this._moverCurrent.w)/2;b=dojo.mixin({},this._shiftKey?
this._moverCurrentConstrained:this._moverCurrent);d=f.getBorderBoxPageCoords(this._context.getParentIframe());b.l-=d.l;b.t-=d.t;this._updateFocusChrome(b,!1)}},onFirstMove:function(d){},onMoveStart:function(d){},_moverDoneCleanup:function(){var d=this._context,b=d._chooseParent;this._lastEventTarget=null;this._removeKeyHandlers();d.dragMoveCleanup();b.parentListDivDelete();this._mover=void 0;this._frameIndex=this._nobIndex=-1;d.isResizing=!1},onMoveStop:function(d){if(this._moverDragDiv&&((d=this._moverDragDiv.parentNode)&&
d.removeChild(this._moverDragDiv),this._moverDragDiv=null,this._moverCurrent.l!=this._moverStart.l||this._moverCurrent.t!=this._moverStart.t||this._moverCurrent.w!=this._moverStart.w||this._moverCurrent.h!=this._moverStart.h)){d=void 0;if(this._selectedWidget&&this._selectedWidget.domNode)if(this._sKey)for(var b=k.getStatesListCurrent(this._selectedWidget.domNode),a=0;a<b.length;a++){if(b[a]){d=b[a];break}}else d=k.propertyDefinedForAnyCurrentState(this._selectedWidget.domNode,["width","height"]);
b=this._shiftKey?this._moverCurrentConstrained:this._moverCurrent;b.w==this._moverStart.w&&delete b.w;b.h==this._moverStart.h&&delete b.h;"number"!=typeof b.l&&(b.l=this._moverStart.l);"number"!=typeof b.t&&(b.t=this._moverStart.t);b.l==this._moverStart.l&&b.t==this._moverStart.t&&(delete b.l,delete b.t);b=dojo.mixin({},b);b.hasOwnProperty("l")&&(a=f.getBorderBoxPageCoords(this._context.getParentIframe()),b.l-=a.l,b.t-=a.t);this.onExtentChange(this,this._moverStart,b,d)}this._moverDoneCleanup();d=
this._moverMouseUpEvent||this._moverMouseDownEvent;this._moverMouseUpEvent=this._moverMouseDownEvent=null;if(d&&d.target){b=Date.now();this._mouseDownInfo=null;if(this._lastMouseUp&&10>=Math.abs(d.pageX-this._lastMouseUp.pageX)&&10>=Math.abs(d.pageY-this._lastMouseUp.pageY)&&750>=b-this._lastMouseUp.dateValue)this.onDblClick(d);this._lastMouseUp={pageX:d.pageX,pageY:d.pageY,dateValue:b};dojo.stopEvent(d)}},onMouseUp:function(d){this._moverMouseUpEvent=d},onDblClick:function(d){this.showInline(this._selectedWidget);
d.stopPropagation()},onKeyDown:function(d){d&&this._moverDragDiv?(dojo.stopEvent(d),d.keyCode==dojo.keys.SHIFT?(this._shiftKey=!0,this._updateFocusChrome(this._shiftKey?this._moverCurrentConstrained:this._moverCurrent,!1)):83==d.keyCode&&(this._sKey=!0)):this._removeKeyHandlers()},onKeyUp:function(d){d&&this._moverDragDiv?(dojo.stopEvent(d),d.keyCode==dojo.keys.SHIFT?(this._shiftKey=!1,this._updateFocusChrome(this._shiftKey?this._moverCurrentConstrained:this._moverCurrent,!1)):83==d.keyCode&&(this._sKey=
!1)):this._removeKeyHandlers()},_removeKeyHandlers:function(){this._keyDownHandler&&(dojo.disconnect(this._keyDownHandler),this._keyDownHandler=null);this._keyUpHandler&&(dojo.disconnect(this._keyUpHandler),this._keyUpHandler=null)},onExtentChange:function(d,b,a,c){},isFocusNode:function(d){return dojo.hasClass(d,"focusDragDiv")||dojo.hasClass(d,"editFocusNob")||dojo.hasClass(d,"editFocusFrame")||dojo.hasClass(d,"maqFocus")||dojo.hasClass(d,"editFocusStdChrome")},showContext:function(d,b){"davinci.ve.themeEditor.ThemeEditor"==
this._context.editor.declaredClass&&(this._contexDiv||(this._context=d,this._createContextPopUp()),this._contexDiv.style.display="block")},hideContext:function(){"davinci.ve.themeEditor.ThemeEditor"==this._context.editor.declaredClass&&this._contexDiv&&(this._contexDiv.style.display="none")},_createContextPopUp:function(){var d=dojo.doc.createElement("div");d.id="ieb";this._contexDiv=d;this.domNode.appendChild(d)},_createSubwidgetList:function(){var d=this._context._selectedWidget;if(d){var b=this._context.getThemeMeta().metadata,
a=b.getWidgetType(d),b=(b=b.getMetadata(a))?b.subwidgets:null;this._displayedWidget=d;if(b){a=this._contexDiv;a.innerHTML="\x3cspan\x3e\x3c/span\x3e";a.style.position="absolute";a.style.left=this._box.w+10+"px";a.className="themeSubwidgetMenu";dojo.connect(a,"onmousedown",this,"stopPropagation");a.style.display="none";this._contexDiv=a;this.domNode.appendChild(a);var c=this._contexDiv.firstElementChild,f=this._context.theme.name+"_subwidgetmenu";(a=dijit.byId(f))&&a.destroyRecursive(!1);var e=this._context.getDijit(),
a=new e.Menu({id:f},c),c=!1;d.subwidget||(c=!0);c=new e.CheckedMenuItem({label:"WidgetOuterContainer",id:this._context.theme.name+"_WidgetOuterContainer",checked:c,onClick:dojo.hitch(this,"_subwidgetSelected",this._context.theme.name+"_WidgetOuterContainer")});c.domNode.children[0].children[0].setAttribute("src",c.domNode.children[0].children[0].src);a.addChild(c);this._currentItem=c;for(var g in b)c=d.subwidget===g,b=new e.CheckedMenuItem({label:g,id:this._context.theme.name+"_"+g,checked:c,onClick:dojo.hitch(this,
"_subwidgetSelected",this._context.theme.name+"_"+g)}),b.domNode.children[0].children[0].setAttribute("src",b.domNode.children[0].children[0].src),a.addChild(b),c&&(this._currentItem=b);a.startup();this._cm=a;this._updateSubwidgetListForState();this._connections=[];this._connections.push(dojo.subscribe("/davinci/ui/subwidgetSelectionChanged",dojo.hitch(this,this._subwidgetSelectedChange)));this._connections.push(dojo.subscribe("/davinci/states/state/changed",dojo.hitch(this,this._updateSubwidgetListForState)))}else this._contexDiv.innerHTML=
""}},stopPropagation:function(d){d.stopPropagation()},_subwidgetSelected:function(d,b){b.stopPropagation();var a=this._context.getDijit();d=a.byId(d);d.checked?(this._currentItem&&d!=this._currentItem&&this._currentItem.set("checked",!1),this._currentItem=d,a=this._currentItem.label):((this._currentItem=a.byId(this._context.theme.name+"_WidgetOuterContainer"))&&this._currentItem.set("checked",!0),a=null);b.currentTarget.id===this._context.theme.name+"_WidgetOuterContainer"&&(a=null);dojo.publish("/davinci/ui/subwidgetSelectionChanged",
[{subwidget:a,origin:this.declaredClass}])},_subwidgetSelectedChange:function(d){var b=this._context.getDijit();d.origin!==this.declaredClass&&(this._currentItem&&this._currentItem.set("checked",!1),(this._currentItem=d.subwidget?b.byId(this._context.theme.name+"_"+d.subwidget):b.byId(this._context.theme.name+"_WidgetOuterContainer"))&&this._currentItem.set("checked",!0))},_updateSubwidgetListForState:function(){if(this._context.editor==m.currentEditor)if(this._context._selectedWidget&&this._displayedWidget===
this._context._selectedWidget&&this._cm){var d=m.currentEditor,b=d._theme;this._cm.getChildren().forEach(function(a){var c=a.label;"WidgetOuterContainer"===c&&(c=null);a.setDisabled(!b.isStateValid(this._displayedWidget,d._currentState,c))},this)}else this._clearList(),this._createSubwidgetList()},_updateSubwidgetList:function(){this._displayedWidget!==this._context._selectedWidget&&(this._clearList(),this._createSubwidgetList())},_clearList:function(){if(this._cm)for(this._cm.destroyRecursive(!1),
delete this._cm;connection=this._connections.pop();)dojo.unsubscribe(connection);this._currentItem=null},dojoStyle:function(d,b,a){if(d&&d.ownerDocument&&d.ownerDocument.defaultView&&d.ownerDocument.defaultView.getComputedStyle(d))return dojo.style.apply(dojo,arguments)}})})},"davinci/ve/ChooseParent":function(){define("dojo/_base/declare davinci/Runtime ./widget ./_Widget ./metadata davinci/ve/utils/GeomUtils".split(" "),function(q,n,h,g,e,m){return q("davinci.ve.ChooseParent",null,{constructor:function(c){this._context=
c.context},getAllowedTargetWidget:function(c,k,f,d){var b=h.getEnclosingWidget,a=[],p=[];k=k.length?k:[k];var m=this;k.forEach(function(a){p.push({type:a.type,allowedParent:e.getAllowedParent(a.type),classList:m.getClassList(a.type)})});do{k=c instanceof g?c.type:c._dvWidget.type;var n=this.getClassList(k);this.isAllowed(p,c,k,n,d)&&a.push(c);c=b(c)}while(c&&f);return a},isAllowed:function(c,g,f,d,b){function a(a,b){return b.some(function(b){return-1!==a.indexOf(b)})}var k=e.getAllowedChild(f);"html.body"===
f&&(k=["ANY"]);return c.every(function(c){var e="NONE"!==k[0]&&("ANY"===k[0]||"BLOCK"===k[0]||a(k,c.classList)),g="ANY"===c.allowedParent[0]||a(c.allowedParent,d),p=h.getWidgetHelper(c.type);return p&&p.isAllowed?p.isAllowed({childType:c.type,childClassList:c.classList,parentType:f,parentClassList:d,absolute:b.absolute,isAllowedChild:e,isAllowedParent:g}):e&&g})},getClassList:function(c){var g=e.queryDescriptor(c,"class");return g?(g=g.split(/\s+/),g.push(c),g):[c]},dragUpdateCandidateParents:function(c){var e=
c.widgetType,f=c.showCandidateParents,d=c.doCursor,b=c.absolute,a=c.currentParent;c=this._XYParent;this._proposedParentWidget||(this._proposedParentWidget=this._getDefaultParent(e,c,b,a));(f||d)&&this.highlightNewWidgetParent(this._proposedParentWidget);var e=this._context,b=e.getActiveDragDiv(),g;b&&(b=dojo.query(".maqCandidateParents",b),1==b.length&&(g=b[0]));if(g)if(f){f=!0;if(this._lastProposedParentWidget!=this._proposedParentWidget)f=!1;else if("undefined"==typeof this._lastAllowedParentList||
null===this._lastAllowedParentList)f=!1;else if(this._lastAllowedParentList.length!=c.length)f=!1;else for(a=0;a<c.length;a++)if(this._lastAllowedParentList[a]!=c[a]){f=!1;break}this._lastProposedParentWidget=this._proposedParentWidget;if(!f)if(f=dojo.i18n.getLocalization("davinci.ve","ve"),g.innerHTML="","undefined"==typeof c||null===c)this._lastAllowedParentList=null,a=0;else{this._lastAllowedParentList=c.slice();var a=c.length,q=dojo.create("div",{className:"maqCandidateParentsHeader"},g),b=dojo.create("div",
{className:"maqCandidateParentsList"},g);g=dojo.create("div",{className:"maqCandidateParentsHelp"},g);if(0===a)q.innerHTML=f.noValidParents;else if(1==a)q.innerHTML=f.willBeChildOf,dojo.create("div",{className:"maqCandidateListItem maqCandidateCurrent",innerHTML:h.getLabel(c[0])},b);else{q.innerHTML=f.candidateParents;for(var q="\x3ctable\x3e",a=c.length-1,v=1;0<=a;a--,v++){var w="maqCandidateListItem";c[a]==this._proposedParentWidget&&(w+=" maqCandidateCurrent");q+='\x3ctr class\x3d"'+w+'"\x3e\x3ctd class\x3d"maqCandidateCheckedColumn"\x3e\x26rarr;\x3c/td\x3e\x3ctd class\x3d"maqCandidateNumberColumn"\x3e'+
v+'\x3c/td\x3e\x3ctd class\x3d"maqCandidateParentColumn"\x3e'+h.getLabel(c[a])+"\x3c/td\x3e\x3c/tr\x3e"}b.innerHTML=q+"\x3c/table\x3e";g.innerHTML=f.toChangePress}}}else g.innerHTML="",this._lastAllowedParentList=null;if(d){for(var x,a=0;a<this._XYParent.length;a++)if(this._XYParent[a]===this._proposedParentWidget){x=a;break}void 0!==x&&(!this._cursorSpan&&(this._cursorSpan=dojo.create("span",{className:"editCursor"}),d=e.getGlobal())&&(this._timer=d.setInterval(function(a,b){var d=n.currentEditor;
(d.getContext&&d.getContext())!==b?this.cleanup():dojo.toggleClass(a,"editCursorBlink")}.bind(this),400,this._cursorSpan,e)),d=this._XYParent[x].domNode,c=(c=this._XYRefChild[x])?c.domNode:null,x=this._XYRefAfter[x],c?(x?c.nextSibling&&c.nextSibling._dvWidget?(e=m.getBorderBoxPageCoordsCached(c.nextSibling),x=e.l):(e=m.getBorderBoxPageCoordsCached(c),x=e.l+e.w):(e=m.getBorderBoxPageCoordsCached(c),x=e.l),c=e.t,e=e.h):(e=m.getBorderBoxPageCoordsCached(d),x=e.l,c=e.t,e=16),g=this._cursorSpan.style,
g.height=e+"px",g.left=x+"px",g.top=c+"px",d.ownerDocument.body.appendChild(this._cursorSpan))}},_getDefaultParent:function(c,e,f,d){var b;e&&(c=h.getWidgetHelper(c),b=1<e.length&&c&&c.chooseParent?c.chooseParent(e):0===e.length?null:f&&d?d:e[e.length-1]);return b},cleanup:function(){this._cursorSpan&&(this._cursorSpan.parentNode.removeChild(this._cursorSpan),this._cursorSpan=null);if(this._timer){var c=this._context.getGlobal();c&&(c.clearInterval(this._timer),this._timer=null)}this.highlightNewWidgetParent(null);
this._lastAllowedParentList=null},highlightNewWidgetParent:function(c){c!=this.newWidgetParent&&(this.newWidgetParent&&(this.newWidgetParent.domNode.style.outline=""),this.newWidgetParent=c)&&(c.domNode.style.outline="1px solid rgba(165,42,42,.7)")},getProposedParentWidget:function(){var c=null;if(this._XYParent){var e=this._XYParent.indexOf(this._proposedParentWidget);0<=e&&(c={},c.parent=this._XYParent[e],c.refChild=this._XYRefChild[e],c.refAfter=this._XYRefAfter[e])}return c},setProposedParentWidget:function(c){this._proposedParentWidget=
c},getProposedParentsList:function(){return this._XYParent},findParentsXYBeforeTraversal:function(c){c=c.position;this._XYParent=[];this._XYRefChild=[];this._XYRefAfter=[];"undefined"==typeof this.findParentsXYLastPosition&&(this.findParentsXYLastPosition={});var e=this.findParentsXYLastPosition;if(c.x===e.x&&c.y===e.y)return!1;e.x=c.x;e.y=c.y;return!0},findParentsXY:function(c){var e=c.data,f=c.widget,d=c.absolute,b=c.position;c=c.beforeAfter;this._context.getScrollOffset();var a=b.x,b=b.y,g=f.getHelper(),
h=null,h=g&&g.getMarginBoxPageCoords?g.getMarginBoxPageCoords(f):m.getMarginBoxPageCoordsCached(f.domNode),n=h.l,q=h.t,g=h.w,x=h.h,B;if(a>=n&&a<=n+g&&b>=q&&b<=q+x&&1===this.getAllowedTargetWidget(f,e,!1,{absolute:d}).length)if(!0===d)this._XYParent.push(f),this._XYRefChild.push(null),this._XYRefAfter.push(!0);else{d=f.getChildren();h=[];for(e=0;e<d.length;e++)g=d[e],n=g.domNode,q=m.getBorderBoxPageCoordsCached(n),g=n.offsetWidth,x=n.offsetHeight,n=q.l,q=q.t,B=n+g,x=q+x,h.push({l:n,t:q,r:B,b:x,c:n+
g/2});for(var z,u,y,e=0;e<h.length;e++){n=h[e];g=d[e];if(a>=n.l&&a<=n.r&&b>=n.t&&b<=n.b){z=g;u=a>=n.c?!0:!1;break}0===e?(z=g,u=b>n.b||a>=n.c?!0:!1,y=n.b):(b>=n.t||b>=y)&&a>=n.l?(z=g,u=b>n.b||a>=n.c?!0:!1):b>=y&&b>=n.b&&(z=g,u=!0);n.b>y&&(y=n.b)}this._XYParent.push(f);this._XYRefChild.push(z);this._XYRefAfter.push("after"===c?!0:"before"===c?!1:u)}},findParentsXYAfterTraversal:function(c){var e=c.widgets,f=c.currentParent,d=c.eventTarget.ownerDocument.body._dvWidget;if(c.absolute&&f&&f!=d){var b=!1;
this._XYParent.forEach(function(a){a==f&&(b=!0)});b||(this._XYParent.push(f),this._XYRefChild.push(e[0]),this._XYRefAfter.push(!0))}this.findParentsXYLastPosition={};for(c=0;c<this._XYRefAfter.length-1;c++)this._XYRefAfter[c]=!0},findParentsXYCleanup:function(c){this.findParentsXYLastPosition={}},parentListDivCreate:function(c){var e=c.widgetType,f=c.absolute,d=c.doCursor,b=c.beforeAfter,a=c.currentParent;c=this._context;if(e){var g=c.getDocument();this._oldActiveElement=document.activeElement;g.defaultView.focus();
this._keyDownHandler=dojo.connect(g,"onkeydown",dojo.hitch(this,function(a,b){this.onKeyDown(b,a[0],a[1],a[2],a[3],a[4])},[e,f,d,b,a]));this._keyUpHandler=dojo.connect(g,"onkeyup",dojo.hitch(this,function(a,b){this.onKeyUp(b,a[0],a[1],a[2],a[3],a[4])},[e,f,d,b,a]));e=this._parentListDiv=dojo.create("div",{className:"maqParentListDiv"},document.body);c.setActiveDragDiv(e);dojo.create("div",{className:"maqCandidateParents"},e);return e}},parentListDivGet:function(){return this._parentListDiv},parentListDivDelete:function(){var c=
this._context,e=this._parentListDiv;e&&(this._oldActiveElement&&(this._oldActiveElement.focus(),this._oldActiveElement=null),dojo.disconnect(this._keyDownHandler),dojo.disconnect(this._keyUpHandler),this._keyDownHandler=this._keyUpHandler=null,e.parentNode.removeChild(e),c.setActiveDragDiv(null),this._parentListDiv=null)},_keyEventDoUpdate:function(c,e,f,d,b){var a=this._context.getPreference("showPossibleParents");this.dragUpdateCandidateParents({widgetType:c,showCandidateParents:!a&&this._spaceKeyDown||
a&&!this._spaceKeyDown,doCursor:f,beforeAfter:d,absolute:e,currentParent:b})},onKeyDown:function(c,e,f,d,b,a){dojo.stopEvent(c);c.keyCode==dojo.keys.SPACE?this._spaceKeyDown=!0:this._processKeyDown(c.keyCode);this._keyEventDoUpdate(e,f,d,b,a)},onKeyUp:function(c,e,f,d,b,a){dojo.stopEvent(c);c.keyCode==dojo.keys.SPACE&&(this._spaceKeyDown=!1);this._keyEventDoUpdate(e,f,d,b,a)},_processKeyDown:function(c){if(49<=c&&57>=c){var e=this.getProposedParentsList();1<e.length&&(c=e.length-(c-48),0<=c&&this.setProposedParentWidget(e[c]))}},
isSpaceKeyDown:function(){return this._spaceKeyDown}})})},"davinci/ve/_ContextDojo":function(){define("require dojo/_base/declare dojo/_base/lang dojo/dom-construct dojo/query dojo/Deferred dojo/promise/all dojo/_base/connect dojo/window xide/factory xide/types ./commands/ChangeThemeCommand ../model/Path ../Runtime ../Workbench ../library ./metadata ../workbench/Preferences dojo/text!./newfile.template.html dojox/html/_base".split(" "),function(q,n,h,g,e,m,c,k,f,d,b,a,p,r,v,w,x,B,z){return n(null,
{_didDojo:!1,_reRequire:/\brequire\s*\(\s*\[\s*([\s\S]*?)\s*\]\s*\)/,_reModuleId:/[\w.\/]+/g,_bootstrapModules:"dijit/dijit,dijit/dijit-all",getDojoUrl:function(){var a=v.location();"/"==a.charAt(a.length-1)&&(a=a.substring(0,a.length-1));if(document&&document.getElementsByTagName)for(var b=document.getElementsByTagName("script"),d=/dojo(\.xd)?\.js(\W|$)/i,c=0;c<b.length;c++){var f=b[c].getAttribute("src");if(f&&f.match(d))return a+"/"+f}},_getLoaderPackages:function(){var a=this.getBase(),b=w.getUserLibs(a),
d,c=[];b.some(function(a){return"dojo"===a.id?(d=new p(a.root+"/dojo"),!0):!1});b=b.concat({id:"widgets",root:function(){var b=B.getPreferences("davinci.ui.ProjectPrefs",a);b.widgetFolder||(b.widgetFolder="WebContent/lib/custom",B.savePreferences("davinci.ui.ProjectPrefs",a,b));for(b=b.widgetFolder;1<b.length&&("."==b.charAt(0)||"/"==b.charAt(0));)b=b.substring(1);return b}()});b.forEach(function(a){var b=a.id;void 0!==a.root&&"dojo"!==b&&"DojoThemes"!==b&&(b=(new p(a.root)).relativeTo(d).toString(),
c.push({name:a.id,location:b}))});dojo.publish("onGetLoaderPackages",{context:this,packages:c,base:a});return c},_setSourcePostLoadRequires:function(b,d,c,m){m&&(m.themeSet&&(new a(m.themeSet,this))._dojoxMobileAddTheme(this,m.themeSet.mobileTheme,!0),this.addModeledStyleSheet(this.getAppCssRelativeFile(),!0),m=this._getAppJsRelativeFile(),this.addHeaderScript(m));b.find({elementType:"HTMLElement",tag:"script"}).forEach(function(a){for(var b=0;b<a.children.length;b++)if(0<=a.children[b].getText().indexOf("dojo.require")){a.parent.removeChild(a);
break}});var n=this._parse(b);if(this.frameNode)this.getGlobal(),e(".loading",this.frameNode.parentNode).orphan(),this._continueLoading(n,d,this,c);else{var q;dojo.some(n.scripts,function(a){if(-1!=a.indexOf("/dojo.js"))return q=a,!0});q=null;m=this.getBase();if(!q){var A=this;dojo.some(w.getUserLibs(m.toString()),function(a){return"dojo"===a.id?(q=(new p(this.getBase())).append(a.root).append("dojo/dojo.js").relativeTo(this.getPath(),!0).toString(),A.addJavaScriptSrc(q,!0,"",!1),!0):!1},this);q||
(q=this.getDojoUrl())}m=this.getFullResourcePath().getParentPath();var u=new p(q);m=m.append(u).getParentPath();for(var u=r.getUserWorkspaceUrl(),C=0;C<this._customWidgetPackages.length;C++){var y=this._customWidgetPackages[C],x=y.location.substr(u.length),x=new p(x);y.location=x.relativeTo(m).toString()}m=this.containerNode;m.style.overflow="hidden";m=g.create("iframe",this.iframeattrs,m);m.dvContext=this;this.frameNode=m;u=v.location()+"/";this.baseURL&&(u=this.baseURL);var B=m.contentDocument||
m.contentWindow.document,I=f.get(B),G={baseUrl:u};q&&(G.dojoUrl=q,G.id=this._id,m={packages:this._getLoaderPackages()},this._getDojoScriptValues(m,G),this._bootstrapModules&&(G.additionalModules=","+this._bootstrapModules.split(",").map(function(a){return"'"+a+"'"}).join(",")));b.themeCssFiles&&(G.themeCssFiles=b.themeCssFiles.map(function(a){return'\x3clink rel\x3d"stylesheet" type\x3d"text/css" href\x3d"'+a+'"\x3e'}).join(""));window["loading"+this._id]=function(a,b){a=this;try{var e=f.get(B),g=
this.rootNode=B.body;if(!g){this._waiting=this._waiting||0;if(10>this._waiting++){setTimeout(window["loading"+this._id],500);return}throw"doc.body is null";}delete window["loading"+this._id];g.id="myapp";g.style.width="100%";g.style.height="100%";g.style.visibility="visible";g.style.margin="0";g._edit_context=this;-1!=this._bootstrapModules.split(",").indexOf("dijit/dijit-all")&&(e.dojo._postLoad=!0);e.require("dojo/_base/lang").isArray=e.dojo.isArray=function(a){return a&&"[object Array]"==Object.prototype.toString.call(a)};
e.require({packages:this._customWidgetPackages})}catch(N){console.error(N.stack||N),a=Error(N.message,N.fileName,N.lineNumber),h.mixin(a,N)}this._continueLoading(n,d,a,c)}.bind(this);B.open();b=h.replace(z,function(a,b){return G.hasOwnProperty(b)?G[b]:""});B.write(b);B.close();k.connect(B.documentElement,"onkeypress",function(a){8==a.charOrCode&&(window.davinciBackspaceKeyTime=I.davinciBackspaceKeyTime=Date.now())});k.connect(B.documentElement,"onkeydown",dojo.hitch(this,function(a){this.editor.handleKeyEvent(a)}));
k.connect(B.documentElement,"onkeyup",dojo.hitch(this,function(a){this.editor.handleKeyEvent(a)}))}},getLibraryBase:function(a,b){return w.getLibRoot(a,b,this.getBase())},loadRequires:function(a,b,d,f){var e=x.query(a,"require");if(!e){var g=new m;g.resolve();return g}var h=x.query(a,"library"),k={},n=this,q=function(a,d){return n.addJavaScriptSrc(d,b,d,f)},r=function(a,b){var d=new m;if(k.hasOwnProperty(a))return d.resolve(),d;var c=x.getLibrary(a).version||b.version;return n.getLibraryBase(a,c).then(function(f){if(null==
f)return console.error("No library found for name \x3d '"+a+"' version \x3d '"+c+"'"),d.reject(),d;k[a]=(new p(n.getBase())).append(f);if(b&&b.src&&".js"===b.src.substr(-3))return f=b.src.match(/((?:\.\.\/)*)(.*)/),q(a,f[2]);d.resolve();return d})},g=[],A;for(A in h)h.hasOwnProperty(A)&&g.push(r(A,h[A]));return c(g).then(function(){var g=[];e.every(function(c){c.$library&&g.push(r(c.$library,h[c.$library]));switch(c.type){case "javascript":c.src?g.push(q(c.$library,c.src)):this.addJavaScriptText(c.$text,
b||d,f);break;case "javascript-module":"amd"!==c.format&&console.error("Unknown javascript-module format");c.src?g.push(this.addJavaScriptModule(c.src,b||d,f)):console.error("Inline 'javascript-module' not handled src\x3d"+c.src);break;case "css":c.src?(c=c.src,b?this.addModeledStyleSheet(c,f):this.loadStyleSheet(c)):console.error("Inline CSS not handled src\x3d"+c.src);break;case "image":break;default:console.error("Unhandled metadata resource type\x3d'"+c.type+"' for widget '"+a+"'")}return!0},
this);return c(g)}.bind(this))},getDojo:function(){var a=this.getGlobal();return a&&a.dojo||dojo},getDijit:function(){var a=this.getGlobal();return a&&a.dijit||dijit},_getDojoJsElem:function(){if(this._dojoScriptElem||this.getDocumentElement().getChildElement("head").getChildElements("script").some(function(a){if(/\/dojo.js$/.test(a.getAttribute("src")))return this._dojoScriptElem=a,!0},this))return this._dojoScriptElem;console.error('"dojo.js" script element not found!')},_updateDojoConfig:function(a){this.close();
var c=this._getDojoJsElem(),f=c.getAttribute("data-dojo-config"),f=f?q.eval("({ "+f+" })","data-dojo-config"):{},e="";f.mblLoadCompatPattern&&(e=", mblLoadCompatPattern: "+f.mblLoadCompatPattern.toString(),delete f.mblLoadCompatPattern);for(var g in a)"mblLoadCompatPattern"==g?e=null===a[g]?"":", 'mblLoadCompatPattern': "+a[g]:null===a[g]?delete f[g]:f[g]=a[g];d.publish(b.EVENTS.ON_BUILD_DOJO_CONFIG,{data:f,context:this,editor:this.editor},this);a=JSON.stringify(f).slice(1,-1).replace(/"/g,"'");c.setAttribute("data-dojo-config",
a+e)},_preserveDojoTypes:function(a){var b=a.getAttribute("data-dojo-type")||a.getAttribute("dojoType");if(b){var d=this._loadFileDojoTypesCache,c=this.maqTypesClassPrefix+this.maqTypesClassCount;a.className=a.className+" "+c;this.maqTypesClassCount++;d[c]=b}},_getDojoScriptValues:function(a,b){var d=this._getDojoJsElem(),c=d.getAttribute("data-dojo-config"),c=c?q.eval("({ "+c+" })","data-dojo-config"):{};h.mixin(c,a,{async:!0,parseOnLoad:!1});b.dojoConfig=JSON.stringify(c).slice(1,-1).replace(/"/g,
"'");var f=[];d.attributes.forEach(function(a){var b=a.name;a=a.value;"src"!==b&&"data-dojo-config"!==b&&f.push(b+'\x3d"'+a+'"')});f.length&&(b.additionalDojoAttrs=f.join(" "))},_restoreDojoTypes:function(){var a=this._loadFileDojoTypesCache,b=this.getDocument(),d;for(d in a)if(node=b.querySelectorAll("."+d)[0])node.className=node.className.replace(" "+d,""),node.setAttribute("data-dojo-type",a[d])},_continueLoading:function(a,b,d,c){var f,e={};try{if(d instanceof Error)throw d;f=this._setSourceData(a).then(this.onload.bind(this),
function(a){e.errorMessage='Unable to parse HTML source.  See console for error.  Please switch to "Display Source" mode and correct the error.';console.error(a.stack||a.message)})}catch(D){e=D}finally{b&&(f?f.then(function(){b.call(c||this,e)}.bind(this)):b.call(c||this,e))}}})})},"davinci/ve/_ContextInterface":function(){define("dojo/_base/declare dojo/dom-style dojo/_base/connect dojo/topic ../Theme ../Workbench ./Snap dojox/html/_base".split(" "),function(q,n,h,g,e,m,c){return q(null,{_designEvents:[],
_designMode:!0,isDesignMode:function(){return this._designMode},_disableDesignMode:function(){this._designEvents.forEach(h.disconnect);this._designEvents=[]},_enableDesignMode:function(){var c=this.getContainerNode();this._designEvents.forEach(h.disconnect);this._designEvents=[h.connect(this.getDocument(),"onkeydown",this,"onKeyDown"),h.connect(this.getDocument(),"onkeyup",this,"onKeyUp"),h.connect(c,"ondblclick",this,"onDblClick"),h.connect(c,"onmousedown",this,"onMouseDown"),h.connect(c,"onclick",
this,"onMouseClick"),h.connect(c,"onmousemove",this,"onMouseMove"),h.connect(c,"onmouseup",this,"onMouseUp"),h.connect(c,"onmouseover",this,"onMouseOver"),h.connect(c,"onmouseout",this,"onMouseOut")]},setDesignMode:function(c){!c&&this._designMode&&this._disableDesignMode();c&&!this._designMode&&this._enableDesignMode();this._designMode=c},getActiveDragDiv:function(){return this._activeDragDiv},setActiveDragDiv:function(c){this._activeDragDiv=c},blockChange:function(c){this._blockChange=c},onMouseClick:function(c){this.eventHandler&&
this.eventHandler.click&&this.eventHandler.click(c)},onMouseDown:function(c){if(this._activeTool&&this._activeTool.onMouseDown&&!this._blockChange)this._activeTool.onMouseDown(c);this.blockChange(!1)},onDblClick:function(c){},onMouseMove:function(c){if(this._activeTool&&this._activeTool.onMouseMove&&!this._blockChange)this._activeTool.onMouseMove(c)},onMouseUp:function(c){if(this._activeTool&&this._activeTool.onMouseUp)this._activeTool.onMouseUp(c);this.blockChange(!1);g.publish("/davinci/ve/context/mouseup",
c)},onMouseOver:function(c){if(this._activeTool&&this._activeTool.onMouseOver)this._activeTool.onMouseOver(c)},onMouseOut:function(c){if(this._activeTool&&this._activeTool.onMouseOut)this._activeTool.onMouseOut(c)},dragMoveUpdate:function(e){var f=this,d=this._chooseParent,b=e.widgets,a=e.data,g=e.position,h=e.absolute,k=e.currentParent,m=e.rect,n=e.doSnapLinesX,q=e.doSnapLinesY,z=e.doFindParentsXY,u=e.doCursor,y=e.beforeAfter,A=dojo.isArray(a)?a[0].type:a.type,C=function(e){if(!(b&&0<=b.indexOf(e))){var k=
this.getGlobal().require("dojo/dom-style").get(e.domNode);(n||q)&&c.findSnapOpportunities(this,e,k,n,q);d.findParentsXY({data:a,widget:e,absolute:h,position:g,doCursor:u,beforeAfter:y});dojo.forEach(e.getChildren(),function(a){C.apply(f,[a])})}};if(n||q)doSnapLines=c.updateSnapLinesBeforeTraversal(this,m);m=d.findParentsXYBeforeTraversal(e);C.apply(f,[this.rootWidget]);(n||q)&&c.updateSnapLinesAfterTraversal(this);d.findParentsXYAfterTraversal(e);m&&(d.dragUpdateCandidateParents({widgetType:A,showCandidateParents:z,
doCursor:u,beforeAfter:y,absolute:h,currentParent:k}),d.findParentsXYCleanup(e))},dragMoveCleanup:function(){c.clearSnapLines(this);this._chooseParent.cleanup(this)},onExtentChange:function(c,f,d,b){if(this._activeTool&&this._activeTool.onExtentChange&&!this._blockChange&&(c=dojo.indexOf(this._focuses,c),0<=c))this._activeTool.onExtentChange({index:c,oldBoxes:[f],newBox:d,applyToWhichStates:b});this.blockChange(!1)},onKeyDown:function(c){if(this._activeTool&&this._activeTool.onKeyDown)this._activeTool.onKeyDown(c)},
onKeyUp:function(c){if(this._activeTool&&this._activeTool.onKeyUp)this._activeTool.onKeyUp(c)},onContentChange:function(){this._updateWidgetHash();this.deselectInvisible();dojo.forEach(this.getSelection(),function(c,d){0===d?this.select(c):this.select(c,!0)},this);if("davinci.themeEdit.ThemeEditor"==this.editor.editorID){var c=e.getHelper(this.visualEditor.theme);if(c&&c.onContentChange)c.onContentChange(this,this.visualEditor.theme);else c&&c.then&&c.then(function(c){if(c.helper&&c.helper.onContentChange)c.helper.onContentChange(this,
this.visualEditor.theme)}.bind(this))}this._forceSelectionChange&&(this.onSelectionChange(this.getSelection()),delete this._forceSelectionChange);setTimeout(function(){m._autoSave.call(m)},0)},onSelectionChange:function(c){this._cssCache={};h.publish("/davinci/ui/widgetSelected",{selection:c,context:this})},getActiveTool:function(){return this._activeTool},setActiveTool:function(c){try{this._activeTool&&this._activeTool.deactivate(),this._activeTool=c,this._activeTool||(this._activeTool=this._defaultTool),
this._activeTool.activate(this),h.publish("/davinci/ve/activeToolChanged",[this,c])}catch(f){debugger}},inlineEditActive:function(){return this.getSelection().some(function(c,f){return this._focuses[f].inlineEditActive()},this)},select:function(c,f,d){if(c&&c!=this.rootWidget){var b,a=!1;this._selection&&(a=this._selection.some(function(a,d){return a===c?(b=d,!0):!1}));if(!a){f&&this._selection?(b=this._selection.length,a=this._selection,a.push(c)):a=[c];var e=c.getParent();if(e){var g=e.getHelper();
g&&g.selectChild?g.selectChild(e,c):e.selectChild(c)}if(!this._selection||1<this._selection.length||1<a.length||this.getSelection()!=c)if(e=this._selection,this._selection=a,this.onSelectionChange(a,f),e&&e.forEach(function(a){var b=a.getHelper();if(b&&b.onDeselect)b.onDeselect(a)},this),(f=c.getHelper())&&f.onSelect)f.onSelect(c)}this.updateFocus(c,b,d)}else f||this.deselect()},deselect:function(c){if(this._selection){c&&(helper=c.getHelper());if(c&&this._selection.length){if(1===this._selection.length){if(this._selection[0]!=
c)return;this.focus(null,0);this._selection=void 0}else{var f=dojo.indexOf(this._selection,c);if(0>f)return;this.focus(null,f);this._selection.splice(f,1)}if(helper&&helper.onDeselect)helper.onDeselect(c)}else this._selection&&this._selection.forEach(function(d){var b=d.getHelper();if(b&&b.onDeselect)b.onDeselect(d)},this),this.focus(null),this._selection=void 0;this.onSelectionChange(this.getSelection())}},deselectInvisible:function(){function c(a){return 1==a.nodeType&&"none"==n.get(a,"display")?
!0:a.parentNode?c(a.parentNode):!1}if(this._selection)for(var f=this._selection.length-1;0<=f;f--){var d=this._selection[f],b=d.domNode;if(c(b)&&"xblox/RunScript"!==d.type)this.deselect(d);else for(;b&&"BODY"!=b.tagName.toUpperCase();){if(b&&b.ownerDocument&&b.ownerDocument.defaultView&&"none"==n.get(b,"display")&&"xblox/RunScript"!==d.type){this.deselect(d);break}b=b.parentNode}}},getFlowLayout:function(){var c=!0;c="true"===c;return c},setFlowLayout:function(c){var f=this.getDocumentElement().getChildElement("body");
f&&f.addAttribute(PREF_LAYOUT_ATTR,""+c);return c}})})},"davinci/ve/_ContextDocument":function(){define("dojo/_base/declare dojo/dom-class dojo/dom-construct dojo/query dojo/_base/connect dojo/window xide/utils xide/factory xide/types ../UserActivityMonitor ../model/Path ../Workbench ./widget ./metadata ../html/HTMLElement ../workbench/Preferences dojox/html/_base".split(" "),function(q,n,h,g,e,m,c,k,f,d,b,a,p,r,v,w){var x=function(a){var b=r.getLibrary();a&&dojo.filter(a.attributes,function(a){return"on"==
a.nodeName.substr(0,2).toLowerCase()}).forEach(function(a){var d=!1,c;for(c in b)if(d=r.getLibrary(c),d=r.invokeCallback(d,"requiredEventAttribute",[a]))break})};return q(null,{hasDirtyResources:function(){return!1},getCompType:function(){var a=this.getDocumentElement().getChildElement("body"),b=a&&a.getAttribute("data-maq-comptype");a&&!b&&(b=this.getMobileDevice()?"mobile":"desktop",a.addAttribute("data-maq-comptype",b));return b},_significantAttrs:{link:"href",meta:"name"},getContainerNode:function(){return this.rootNode},
getParentIframe:function(){if(!this._parentIframeElem)for(var a=this.getDocument(),b=document.getElementsByTagName("iframe"),d=0;d<b.length;d++)if(b[d].contentDocument===a){this._parentIframeElem=b[d];break}return this._parentIframeElem},getModel:function(){return this._srcDocument},setSource:function(a,b,d,c){dojo.withDoc(this.getDocument(),"_setSource",this,arguments);this.editor&&this.editor._setDirty()},getBase:function(){return""},getFullResourcePath:function(){if(!this._fullResourcePath){var a=
this.getModel().fileName;this._fullResourcePath=new b(a)}return this._fullResourcePath},_getCurrentBasePath:function(){var d=new b(a.getProject()),c=w.getPreferences("davinci.ui.ProjectPrefs",d);null!==c.webContentFolder&&""!==c.webContentFolder&&(d=d.append(c.webContentFolder));return d},getRelativeFileString:function(a){var b=this.getFullResourcePath().getParentPath();return this._getCurrentBasePath().append(a).relativeTo(b).toString()},_setSource:function(a,b,d,f){delete this._requireHtmlElem;
delete this._dojoScriptElem;delete this.rootWidget;if(this.frameNode){var e=this.frameNode.contentDocument||this.frameNode.contentWindow&&this.frameNode.contentWindow.document;if(e)try{var g=m.get(e).require("dijit/registry")._destroyAll();g&&(g.forEach(function(a){c.destroy(a,!0)}),g._hash={})}catch(F){console.error("error cleaning registry",F)}}this._srcDocument=a;f&&(e=a.getDocumentElement().getChildElement("body"),e.setAttribute("data-maq-device",f.device),e.setAttribute("data-maq-flow-layout",
f.flowlayout),e.setAttribute("data-maq-comptype",f.comptype));this.loadRequires("html.body",!0,!1,!0).then(function(){f&&this.loadTheme(f);this._setSourcePostLoadRequires(a,b,d,f)}.bind(this))},_setSourceData:function(a){k.publish(f.EVENTS.ON_SET_SOURCE_DATA,{data:a,context:this,editor:this.editor},this);this.getGlobal();this.themeChanged();var b={title:a.title,scripts:a.scripts,modules:a.modules,styleSheets:a.styleSheets,bodyClasses:a.bodyClasses,style:a.style};k.publish(f.EVENTS.ON_BUILD_HEADER,
{data:b,context:this,editor:this.editor},this);this.setHeader(b);var d=a.content||"";if(b=this.isActive())this.select(null),this.getTopWidgets().forEach(this.detach,this);var c={},e=this.getContainerNode();a.maqAppStates&&(c.body=a.maqAppStates);this.getTopWidgets().forEach(function(a){a.getContext()&&a.destroyWidget()});var h=this.getGlobal().require("dijit/registry");h.forEach(function(a){a.destroy()});h.forEach(function(a){a.destroy();h.remove(a.id)});var d=d.replace(/<\s*\/\s*br\s*>/gi,""),m;
this.getGlobal();var p=this.getDojo();p.create||this.getGlobal().require(["dojo/dom-construct","dojo/dom-style","dojo/dom-attr","dojo/_base/html"],function(a,b,d,c){p.create=a.create;p.destroy=a.destroy;p.place=a.place;p.toDom=a.toDom});this.getGlobal().require("dojox/html/_base").set(e,d,{executeScripts:!0,onEnd:function(){m=this._code;this.executeScripts=!1;this.inherited("onEnd",arguments)}});x(e);g("*",e).forEach(x);e.setAttribute("data-maq-ws","collapse");(a=this._srcDocument.getDocumentElement().getChildElement("body"))&&
a.addAttribute("data-maq-ws","collapse");this.getGlobal();(a=this.getDocumentElement().getChildElement("body"))&&a.getAttribute("data-maq-device");var n={SCRIPT:1,STYLE:1},q=function(a){dojo.forEach(a.childNodes,function(a){3==a.nodeType?a.nodeValue=a.data.replace(/^[\f\n\r\t\v\ ]+$/g,""):1!=a.nodeType||n[a.nodeName]||q(a)})};q(e);this._loadFileStatesCache=c;this.global=this.getGlobal();return this._processWidgets(e,b,this._loadFileStatesCache,m)},getSource:function(){return this._srcDocument.getText()},
getDocumentElement:function(){return this._srcDocument.getDocumentElement()},getDocumentLocation:function(){return this._srcDocument.fileName},getHeader:function(){return this._header||{}},setHeader:function(a){var b=[],d,c,f;this._header&&(b=this._header.styleSheets||[],c=this._header.bodyClasses);if(a){d=a.styleSheets||[];f=a.bodyClasses;if(a.modules){var e=this.getGlobal().require;a.modules.map(function(a){return[a.replace(/\./g,"/")]}).forEach(e)}if(a.className){var g=a.className.split(" ");dojo.some(g,
function(a,b){g.splice(b,1);f=g.join(" ");return!0})}}c!=f&&(e=this.getContainerNode(),c&&n.remove(e,c),f&&n.add(e,f));b!=d&&(b=[].concat(b),dojo.forEach(d,function(a){var d=dojo.indexOf(b,a);0>d?this.loadStyleSheet(a):b.splice(d,1)},this),dojo.forEach(b,this.unloadStyleSheet,this));this.setStyle(a?a.style:void 0);this._header=a},onload:function(){this.getCompType();this._connects=(this._connects||[]).concat(d.addInActivityMonitor(this.getDocument()));var a=this.getMobileDevice();a&&(this.setMobileDevice(a),
this.visualEditor.setDevice(a,!0),this.visualEditor.setOrientation(this.getMobileOrientation()));this._configDojoxMobile(!0);window.setTimeout(function(){this.widgetAddedOrDeleted();e.publish("/davinci/ui/context/loaded",[this]);this._markDirtyAtLoadTime?(this.editor.setDirty(!0),delete this._markDirtyAtLoadTime,this.editor.save(!0)):this.editor.setDirty(this.hasDirtyResources());this.addPseudoClassSelectors()}.bind(this),500)},_onLoadHelpers:function(){var a={};g("\x3e *",this.rootNode).map(p.getWidget).forEach(function(b){var d=
b.getHelper();if(d&&d.onLoad){var c=a[b.type];a[b.type]=!0;d.onLoad(b,c)}},this)},_addHeadElement:function(a,b,d){var c=this.getDocumentElement().getChildElement("head");if(!d){var f=this._significantAttrs[a]||"src";if(c.getChildElements(a).some(function(a){return a.getAttribute(f)===b[f]}))return}d=new v(a);for(var e in b)b.hasOwnProperty(e)&&d.addAttribute(e,b[e]);c.addChild(d);dojo.withGlobal(this.getGlobal(),function(){h.create(a,b,g("head")[0])})},_removeHeadElement:function(a,b){var d=this.getDocumentElement().getChildElement("head");
d.getChildElements(a).some(function(a){var c=!0,f;for(f in b)if(b.hasOwnProperty(f)&&a.getAttribute(f)!==b[f]){c=!1;break}if(c)return d.removeChild(a),!0});dojo.withGlobal(this.getGlobal(),function(){var d=a,c;for(c in b)b.hasOwnProperty(c)&&(d+="["+c+'\x3d"'+b[c]+'"]');g(d).orphan()})},getDocument:function(){var a=this.getContainerNode();return a&&a.ownerDocument},getGlobal:function(){var a=this.getDocument();return a?m.get(a):null}})})},"davinci/ve/_ContextWidgets":function(){define("dojo/_base/declare dojo/query dojo/Deferred dojo/promise/all dojo/_base/connect ../Theme ./widget ./Focus ./metadata ./States ./HTMLWidget ./utils/GeomUtils dojox/html/_base".split(" "),
function(q,n,h,g,e,m,c,k,f,d,b,a){return q(null,{_processWidgets:function(a,b,d,c){var f=[];this._loadFileDojoTypesCache={};dojo.forEach(n("*",a),function(a){var b=a.getAttribute("data-dojo-type")||a.getAttribute("dojoType")||a.getAttribute("dvwidget");b||(b="html."+a.tagName.toLowerCase());f.push(this.loadRequires((b||"").replace(/\./g,"/"),!1,!0));f.push(this._preProcess(a));this._preserveStates(a,d);this._preserveDojoTypes(a)},this);var e=new h;g(f).then(function(){this.getGlobal().require("dojo/ready")(function(){try{this.getGlobal().require("dijit/registry"),
this.getGlobal().require("dojo/parser").parse(a).then(function(){this._restoreDojoTypes();e.resolve();b&&this._attachAll();if(c)try{dojox.html.evalInGlobal(c,a)}catch(z){console.error("Error eval script in Context._setSourceData, "+z)}}.bind(this),function(a){e.reject(a)})}catch(z){console.error("error in _processWidgets",z),e.reject(z)}}.bind(this))}.bind(this));return e},_preProcess:function(a){var b=a.getAttribute("data-dojo-type")||a.getAttribute("dojoType");b||(b="html."+a.tagName.toLowerCase());
return c.requireWidgetHelper((b||"").replace(/\./g,"/")).then(function(b){b&&b.preProcess&&b.preProcess(a,this)}.bind(this))},attach:function(a){if(a&&!a._edit_focus)if(a._srcElement||(a._srcElement=this._srcDocument.findElement(a.id)),a.type||(a.type=a.isHtmlWidget?"html."+a.getTagName():a.isGenericWidget?a.domNode.getAttribute("dvwidget"):a.isObjectWidget?a.getObjectType():a.declaredClass.replace(/\./g,"/")),a.metadata=a.metadata||f.query(a.type),a._edit_context=this,a.attach(),"_"==a.type.charAt(a.type.lastIndexOf(".")+
1))a.internal=!0;else{var b=a.getId();if(b){var d=this._widgetIds;-1===d.indexOf(b)&&d.push(b)}if(b=a.getObjectId(a))d=this._objectIds,-1===d.indexOf(b)&&d.push(b);dojo.forEach(a.getChildren(!0),this.attach,this)}},_attachAll:function(){var a=this.rootWidget=new b({},this.rootNode);a._edit_context=this;a.isRoot=!0;this._srcDocument.getDocumentElement().getChildElement("body");a._srcElement=this._srcDocument.getDocumentElement().getChildElement("body");a._srcElement&&a._srcElement.setAttribute("id",
"myapp");this._attachChildren(this.rootNode)},_attachChildren:function(a){n("\x3e *",a).map(c.getWidget).forEach(this.attach,this)},detach:function(a){this.getGlobal();var b=function(a,b){b=a.indexOf(b);-1!=b&&a.splice(b,1)},d=a.getId(),c=this;d&&b(this._widgetIds,d);(d=a.getObjectId())&&b(this._objectIds,d);if(this._selection)for(b=0;b<this._selection.length;b++)this._selection[b]==a&&(this.focus(null,b),this._selection.splice(b,1));if(b=f.getLibraryForType(a.type)){var d=b.name,e=[a.type,this];
f.invokeCallback(b,"onRemove",e);--this._widgets[d];0===this._widgets[d]&&f.invokeCallback(b,"onLastRemove",e)}a.getChildren();dojo.forEach(a.getChildren(),function(a){c.detach(a)},this);delete this._containerControls},widgetChanged:function(a,b){1==a?this.widgetHash[b.id]=b:2==a&&delete this.widgetHash[b.id]},resizeAllWidgets:function(){this.getTopWidgets().forEach(function(a){a.resize&&a.resize()})},getAllWidgets:function(){var a=[],b=function(d){a.push(d);d.getChildren().forEach(function(a){b(a)})};
this.rootWidget&&b(this.rootWidget);return a},widgetAddedOrDeleted:function(a){var b=m.getHelper(this.getTheme());b&&b.widgetAddedOrDeleted?b.widgetAddedOrDeleted(this,a):b&&b.then&&b.then(function(b){b.helper&&(this.theme.helper=b.helper,b.helper.widgetAddedOrDeleted&&b.helper.widgetAddedOrDeleted(this,a))}.bind(this))},clearCachedWidgetBounds:function(){this.getAllWidgets().forEach(function(b){(b=b.domNode)&&a.clearGeomCache(b)})},updateFocus:function(b,d,e){this.editor.getDisplayMode&&"source"==
this.editor.getDisplayMode()||c.requireWidgetHelper(b.type).then(function(c){if(this.editor.isActiveEditor()){var g,h,k;if(!f.queryDescriptor(b.type,"isInvisible"))switch((c=b.getHelper())&&c.getMarginBoxPageCoords?g=c.getMarginBoxPageCoords(b):(g=b.getStyleNode(),c&&c.getSelectNode&&(g=c.getSelectNode(this)||g),g=a.getMarginBoxPageCoords(g)),k=b.getParent(),h={move:!(k&&k.isLayout&&k.isLayout())},k&&k.isLayout&&k.isLayout()?"none":f.queryDescriptor(b.type,"resizable")){case "width":h.resizeWidth=
!0;break;case "height":h.resizeHeight=!0;break;case "both":h.resizeWidth=!0,h.resizeHeight=!0}this.focus({box:g,op:h,hasLayout:b.isLayout&&b.isLayout(),isChild:k&&k.isLayout&&k.isLayout()},d,e);this._focuses[0].showContext(this,b)}}.bind(this))},updateFocusAll:function(){if(!this.editor||!this.editor.getDisplayMode||"source"!=this.editor.getDisplayMode()){var a=this._selection;if(a)for(var b=0;b<a.length;b++)this.updateFocus(a[b],b);d.updateHighlightsBaseStateWidgets(this)}},hideFocusAll:function(a){a||
(a=0);var b=this.getFocusContainer();if(this._focuses)for(;a<this._focuses.length;a++){var d=this._focuses[a];d.domNode.parentNode==b&&(d.hide(),b.removeChild(d.domNode))}},getFocus:function(a){a=this.getSelection().indexOf(a);return-1==a?null:this._focuses[a]},isFocusNode:function(a){if(this._selection&&this._selection.length&&this._focuses&&this._focuses.length>=this._selection.length)for(var b=0;b<this._selection.length;b++)if(this._focuses[b].isFocusNode(a))return!0;return!1},focus:function(a,
b,d){this._focuses=this._focuses||[];var c=!1;void 0===b&&(c=!0,b=0);var f;b<this._focuses.length?f=this._focuses[b]:(dojo.withDoc(this.getDocument(),dojo.hitch(this,function(){f=new k;f._edit_focus=!0;f._context=this})),this._focuses.push(f));var g=this.getFocusContainer();if(a){if(a.box&&a.op){f._connected||(this._connects.push(e.connect(f,"onExtentChange",this,"onExtentChange")),f._connected=!0);var h=this.getSelection();f.resize(a.box,h[0]);var m=b<h.length?b:0;f.resize(a.box,h[m]);f.allow(a.op);
f.domNode.parentNode!=g&&g.appendChild(f.domNode);f.show(h[m],{inline:d})}else f.hide();b++}else c||(f.domNode.parentNode==g&&(f.hide(),g.removeChild(f.domNode)),this._focuses.splice(b,1),this._focuses.push(f));c&&this.hideFocusAll(b)},getFocusContainer:function(){var a=document.getElementById("focusContainer");a||(a=dojo.create("div",{"class":"focusContainer",id:"focusContainer"},document.body),davinci.Workbench.focusContainer=a);return a},getTopWidgets:function(){for(var a=[],b=this.rootNode.firstChild;b;b=
b.nextSibling)1==b.nodeType&&b._dvWidget&&a.push(b._dvWidget);return a}})})},"davinci/lang/ui/ui":function(){define([],function(){return{dontShowAgain:"Don't show again",selectFile:"Select a file",openFile:"Open File",aboutMaqetta:"About Maqetta",productVersion:"Version: ${0}",productDate:"Date: ${0}",build:"Build: ${0}",library:"Library",version:"Version",include:"Include",source:"Source",baseLocation:"Base Location",invalidDownloadFileName:"File name may only contain letters, numbers, \x26#8216;_\x26#8216;, and \x26#8216;.\x26#8216;.",
selectedFiles:"Selected Files",noFilesSelected:"No files selected!",downloadButtonLabel:"Download",themeAlreadyExists:"Theme already Exists!",invalidThemeName:"Invalid theme name",errorCreatingTheme:"Error creating theme: ",creatingTheme:"Creating theme",noUserThemes:"No user themes found in workspace. Please create a new theme before editing.",themeSetsDialog:"Manage theme sets",renameThemeSet:"Rename theme set",themeSets:"Theme sets:",currentlySelectedThemeSet:"Currently selected theme set:",themeSetName:"Name:",
desktopTheme:"Dojo desktop 1.7 theme:",mobileTheme:"Dojo mobile 1.7 theme:",android:"Android:",blackberry:"Blackberry:",ipad:"iPad:",iphone:"iPhone:",other:"Other:",selectTheme:"Select theme",themeSet:"Theme set:",themeVersionMessage:"Theme version does not match workspace version this could produce unexpected results. We suggest recreating the custom theme using the current version of Maqetta and deleting the existing theme.",addThemeSet:"Add theme set",deleteThemeSet:"Delete theme set",workspaceLocation:"Workspace Location",
savingReadonlyFile:"This file is a read-only file. Please save it to a writeable location.",create:"Create",open:"Open",save:"Save",select:"Select",update:"Update",unknown:"unknown",fileName:"File name",folderName:"Folder name",parentFolder:"Parent folder: ",newFolderLabel:"New folder",cancelButtonLabel:"Cancel",newFolderName:"Name:",createFolder:"Create Folder",createNewFile:"Create New File",createMobileApplication:"Create a Mobile Application",createDesktopApplication:"Create a Desktop Application",
createSketchHiFi:"Create a Sketch (high-fidelity)",createSketchLoFi:"Create a Sketch (low-fidelity)",createNewCSSFile:"Create New CSS File",createNewJSFile:"Create New JavaScript File",createNewFolder:"Create New Folder",saveFileAs:"Save File As",downloadFile:"Download",selectFiles:"Select Files...",selectZip:"Select ZIP file...",upload:"Upload",addFiles:"Upload",uploading:"Uploading...",completed:"completed: ${0} \n",done:"Done",explodeZipWarning:"Warning: Contents of .zip files will overwrite any conflicting files in your workspace",
mustEnterFileName:"You must enter a file name.",cannotSelect:"Cannot select ${0}. It is a folder.",fileAlreadyExistsOverwrite:"File ${0} already exists. OK to overwrite?",cannotCreate:"Cannot create ${0}. It already Exists.",fileNameSlashCharacter:"File names cannot contain a slash character (/). Your file name is: ${0}",doesNotHaveExtension:"The name ${0} does not have an extension (e.g., .html, .css or .js) and will be treated as a plain text file. OK to proceed?",areYouSureDelete:"Are you sure you want to delete ${0}?",
areYouSureDeleteProject:"Are you sure you want to delete project ${0}?",noResourcesSelected:"No resources are currently selected.",optimizeOption:"Use Dojo Web Builder (experimental)",downloadFullSource:"Download uncompressed source for selected libraries (if available)",selectAll:"All",selectNone:"None",themeToClone:"Theme to clone",newName:"New Name",selectTheme:"Select a Theme",newProject:"New Project",renameProjectDialogTitle:"Rename Project To...",deleteProjectButtonTitle:"Delete Project",renameProjectButtonTitle:"Rename Project...",
deleteOnlyProjectError:"You can't delete the only project in your workspace!",newFileShowFiles:"Show file picker",newFileHideFiles:"Hide file picker",root:"(root)",nhfoDevice:"Device:",nhfoDeviceTooltip:"Select an initial mobile device",nhfoThemeButtonLabel:"Theme...",nhfoThemeButtonTitle:"Select themes or theme set for new HTML file",renameNewLabel:"Name:",renameButtonLabel:"Rename",renameDialogTitle:"Rename To...",createProject:"New project",createProjectMenuItem:"New project...",deleteProjectMenuItem:"Delete this project...",
renameProjectMenuItem:"Rename this project...",saveAsProjectTemplateMenuItem:"Save as project template...",manageProjectTemplatesMenuItem:"Manage project templates...",modifyLibrariesMenuItem:"Modify libraries...",modifyLibraries:"Modify libraries",projectColon:"Project:",ProjectMenu:"Project menu",newProjectName:"Name:",newProjectTemplate:"Template:",newProjectUseProjectTemplate:"Use project template",newProjectCloneExistingProject:"Copy files from current project into new project",newProjectEclipseSupport:"New project should be Eclipse-compatible",
newProjectNameExists:"A project with this name already exists",saveAsProjectTemplate:"Save as project template",newProjectTemplateName:"Project template name:",newProjectTemplateShareLabel:"Share with everyone",newProjectTemplateOverwrite:"Project template {0} already exists. OK to overwrite?",newProjectTemplateCreationSuccess:"Project template {0} has been saved",newProjectTemplateCreationFailure:"Error: Project template {0} save operation failed",newProjectTemplateCancelled:"Operation cancelled",
manageProjectTemplates:"Manage project templates",ManageProjectTemplatesHeaderName:"Project template name",ManageProjectTemplatesHeaderShared:"Share with everyone?",ManageProjectTemplatesHeaderCreatedBy:"Created by",ManageProjectTemplatesHeaderCreatedOn:"Created on",ManageProjectTemplatesHeaderLastModified:"Last updated",ManageProjectTemplatesNoTemplates:"You have no project templates.",ManageProjectTemplatesDuplicateNames:"Invalid entries - two project templates have the same name",ManageProjectTemplateAboutToOccur:"The following actions are about to occur:",
ManageProjectTemplateDeletions:"project template deletions",ManageProjectTemplateModifications:"project template modifications",ManageProjectTemplateOKToProceed:"OK to proceed?",ManageProjectTemplatesInitializing:"Initializing...",modify:"Modify",User:"Account",currentProject:"Current Project:",selectProject:"Select a Project:",NoteOperationNotUndoable:"Note: this operation is not undoable."}})},"davinci/ui/Resource":function(){define("system/resource ../model/Path ../Runtime ../Workbench ../workbench/Preferences ../ve/RebuildPage".split(" "),
function(q,n,h,g,e){return dojo.setObject("davinci.ui.Resource",{newHTMLDialogSpecificClass:"davinci/ui/widgets/NewHTMLFileOptions",newHTMLMobile:function(){},newHTMLDesktop:function(){},newHTMLSketchHiFi:function(){},newHTMLSketchLoFi:function(){},newHTML:function(e){},newCSS:function(){},selectResource:function(e){for(var c=dijit.byId("resourceTree"),g=[];e.parent;e=e.parent)g.unshift(e);c.set("path",g)},newFolder:function(e,c){},closeEditor:function(e,c){},save:function(){var e=g.getOpenEditor();
e&&system.resource.findResourceAsync(e.fileName).then(dojo.hitch(this,function(c){c.readOnly()?this.saveAs(c.getExtension(),"save"):e.save()}))},saveAs:function(e,c){},newJS:function(){},openFile:function(){},addFiles:function(){},addFilesZip:function(){},getNewFileName:function(e,c,g){var f,d,b=0;g||(g="");do b++,d="folder"===e?"folder"+b:"file"+b+g,f=c.getPath()+"/"+d,f=q.findResource(f);while(f);return d},canModify:function(e){return!e.readOnly()},newProject:function(){},renameAction:function(){},
getResourceIcon:function(e,c){},getResourceClass:function(e){if(e.readOnly())return"readOnlyResource"},deleteAction:function(){},getSelectedResources:function(){var e=h.getSelection();if(e[0]&&e[0].resource)return dojo.map(e,function(c){return c.resource})},alphabeticalSortFilter:{filterList:function(e){return e.sort(function(c,e){return c.name>e.name?1:c.name<e.name?-1:0})}},foldersFilter:{filterItem:function(e){if("File"==e.elementType)return!0}},openPath:function(e,c){},openResource:function(e,
c){}})})},"davinci/actions/StickyNoteAction":function(){define("dojo/_base/declare ./Action ../Workbench davinci/commands/CompoundCommand ../ve/commands/AddCommand ../ve/commands/MoveCommand ../ve/commands/ResizeCommand ../ve/tools/CreateTool ../ve/widget ../ve/metadata".split(" "),function(q,n,h,g,e,m,c,k,f,d){return q("davinci.actions.StickyNoteAction",n,{run:function(b){var a=h.getOpenEditor();if(b=davinci.ve.metadata.queryDescriptor("html.stickynote")){var p=dojo.clone(b);p.context=a.getContext();
if(a&&a.getContext){var n=void 0;dojo.withDoc(a.getContext().getDocument(),function(){n=f.createWidget(p)});n&&(b=new g,a.getContext().getDocument(),a.getContext().getContainerNode(),b.add(new e(n,a.getContext().getContainerNode())),k.prototype.checkAddToCurrentState(b,n),b.add(new m(n,50,50)),n.isLayoutContainer&&b.add(new c(n,args.size&&args.size.w,args.size&&args.size.h)),a.getContext().getCommandStack().execute(b),d.getSmartInput(n.type).then(function(b){b&&b.displayOnCreate?a.getContext().select(n,
null,!0):a.getContext().select(n)}.bind(this)))}}},isEnabled:function(b){return(b=h.getOpenEditor())&&b.getContext}})})},"davinci/actions/SaveAsWidget":function(){define("dojo/_base/declare ./Action ../Workbench davinci/ui/Dialog ../ui/SaveAsWidgetForm davinci/lang/ui/common".split(" "),function(q,n,h,g,e,m){return q("davinci.actions.SaveAsWidget",n,{run:function(c){"davinci.ve.Context"!==c.declaredClass&&(c="function"===typeof c.getContext?c.getContext():h.getOpenEditor().getContext());c=this._generateMetadata(c);
this._showDialog(c)},_generateMetadata:function(c){var e={spec:"1.0",require:[],library:{}},f=c.model.find({elementType:"HTMLElement",tag:"body"},!0);e.content=dojo.trim(f.getText(c).match(/<body[^>]*>([\s\S]*)<\/body>/)[1]);this._getRequires(c.getTopWidgets(),e);return e},_getRequires:function(c,e){function f(a,b,d){dojo.forEach(a,function(a){if(!d.hasOwnProperty(a.type)){d[a.type]=!0;dojo.forEach(a.metadata.require,function(a){this._inRequiresArray(a,b.require)||b.require.push(a)},this);for(var c in a.metadata.library)a.metadata.library.hasOwnProperty(c)&&
(b.library[c]||(b.library[c]=a.metadata.library[c]))}f.call(this,a.getChildren(),b,d)},this)}var d=d||{};f.call(this,c,e,d);if(1<e.require.length){c=e.require.slice(0,1);for(d=1;d<e.require.length;d++){var b=e.require[d];b.$text&&c[c.length-1].$text?c[c.length-1].$text+="\n"+b.$text:c.push(b)}e.require=c}},_inRequiresArray:function(c,e){var f=c.$text?c.$text.replace(/\s/g," "):"";return dojo.some(e,function(d){return c.type===d.type&&(c.src&&d.src&&c.src===d.src&&(c.$library&&d.$library&&c.$library===
d.$library||!c.$library&&!d.$library)||c.$text&&d.$text&&f===d.$text.replace(/\s/g," "))})},_showDialog:function(c){var h=new g({title:m.sawdTitle,"class":"dvSaveAsWidgetDialog",execute:dojo.hitch(this,function(c){this._saveMetadata(c.metadata)}),onHide:function(){setTimeout(function(){h.destroyRecursive()},h.duration)}});c=new e({parentId:h.id,metadata:c});h.set("content",c);h.show()},_saveMetadata:function(c){}})})},"davinci/ui/SaveAsWidgetForm":function(){define("dojo/_base/declare dijit/_Templated dijit/_Widget davinci/lang/ui dijit/lang/_common dojo/text!./templates/SaveAsWidgetForm.html".split(" "),
function(q,n,h,g,e,m){return dojo.declare("davinci.ui.SaveAsWidgetForm",[h,n],{templateString:m,widgetsInTemplate:!0,postMixInProperties:function(){this.descriptionString=e.sawfDesc;this.nameString=e.name;this.idString=e.id;this.versionString=e.version;this.requiredString=e.required;this.saveString=e.save;this.cancelString=e.cancel;this.metadataTitle=e.sawfMetadataTitle;this.namePromptString=e.sawfNamePrompt;this.idPromptString=e.sawfIdPrompt;this.initialTextareaContent=dojo.toJson(this.metadata,
!0)},postCreate:function(){this.inherited(arguments);dojo.forEach(["nameInputNode","idInputNode","versionInputNode","textareaNode"],function(c){this.connect(this[c],"onChange",function(e){this._onChange(c,e)})},this);this.idInputNode.regExp="[a-zA-Z]+://[^\\s]+";this.connect(this.buttonCancel,"onClick",function(){dijit.byId(this.parentId).hide()})},_onChange:function(c,e){switch(c){case "nameInputNode":this.metadata.name=e;break;case "idInputNode":this.metadata.id=e;break;case "versionInputNode":this.metadata.version=
e;break;case "textareaNode":try{this.metadata=dojo.fromJson(e),this._invalidMetadata=!1}catch(f){this._invalidMetadata=!0}}"textareaNode"!==c&&this.textareaNode.set("value",dojo.toJson(this.metadata,!0));this.buttonSave.set("disabled",!this._isValid())},_isValid:function(){return this.idInputNode.isValid()&&!this._invalidMetadata}})})},"davinci/lang/ui/common":function(){define([],function(){return{save:"Save",cancel:"Cancel",discard:"Discard",sawdTitle:"Save As Widget",name:"Name",id:"ID",version:"Version",
required:"required",sawfDesc:"Enter the following information to complete the custom widget metadata.",sawfMetadataTitle:"Edit full metadata for custom widget (advanced)",sawfNamePrompt:'A unique "common" name.',sawfIdPrompt:"A unique identifier for this widget in the form of a URI."}})},"davinci/actions/UserNameAction":function(){define(["dojo/_base/declare","davinci/Runtime","./Action","davinci/lang/ui"],function(q,n,h,g){return q("davinci.actions.UserNameAction",h,{run:function(){},getName:function(){var e=
n.getUserDisplayName();return g.User+": \x3ci\x3e"+e+"\x3c/i\x3e"}})})},"davinci/actions/LogoutAction":function(){define(["dojo/_base/declare","./Action","davinci/lang/ui"],function(q,n,h){return q("davinci.actions.LogoutAction",n,{run:function(){dojo.xhrPost({url:"../logout",handleAs:"text",headers:{"Content-Type":"application/x-www-form-urlencoded","Orion-Version":"1"},postData:"",load:function(g,e){location.href="welcome"}.bind(this)})},isEnabled:function(g){return!0}})})},"davinci/ve/actions/CopyAction":function(){define(["dojo/_base/declare",
"./_CutCopyAction","../../Runtime"],function(q,n,h){return q("davinci.ve.actions.CopyAction",[n],{_invokeSourceEditorAction:function(g){g.htmlEditor.copyAction.run()},_executeAction:function(g,e,m,c){c=h.clipboard;h.clipboard=m;if(!c)g.onSelectionChange(e)}})})},"davinci/ve/actions/_CutCopyAction":function(){define("dojo/_base/declare davinci/Workbench davinci/ve/actions/ContextAction davinci/commands/CompoundCommand davinci/ve/commands/RemoveCommand davinci/ve/widget".split(" "),function(q,n,h,g,
e,m){return q("davinci.ve.actions.CutAction",[h],{run:function(c){if(c=this.fixupContext(c))if("davinci.ve.PageEditor"==c.declaredClass&&"source"==c._displayMode)this._invokeSourceEditorAction(c);else{var h=this._normalizeSelection(c);if(0<h.length){var f=new g,d=[],b=c.reorderPreserveSiblingOrder(h);dojo.forEach(b,function(a){var b=a.getData({identify:!1});b&&d.push(b);var c=a.getHelper();if(c&&c.getRemoveCommand){if(a=c.getRemoveCommand(a),"compound"===a.name){for(var c=[],g=a._commands,h=g.length-
1;0<h;h--){var k=g[h];"remove"===k.name&&(k=m.byId(k._id).getData({identify:!1}),c.push(k))}b.associatedCopiedWidgetData=c}}else a=new e(a);f.add(a)});this._executeAction(c,h,d,f)}}},isEnabled:function(c){c=this.fixupContext(c);var e=n.getOpenEditor();return e&&c?(c=0<c.getSelection().length,"davinci.ve.PageEditor"==e.declaredClass?(e=e.getDisplayMode(),c&&"source"!=e):c):!1},shouldShow:function(c){return(c=(c=this.fixupContext(c))?c.editor:null)&&"davinci.ve.PageEditor"==c.declaredClass},_invokeSourceEditorAction:function(c){},
_executeAction:function(c,e,f,d){}})})},"davinci/ve/actions/ContextAction":function(){define(["dojo/_base/declare","davinci/actions/Action","davinci/Runtime"],function(q,n,h){return q("davinci.ve.actions.ContextAction",[n],{_normalizeSelection:function(g){var e=g.getSelection();if(2>e.length)return e;var h=g.rootWidget,c=[];dojo.forEach(e,function(k){for(var f=k.getParent();f&&f!=h;){for(var d=0;d<e.length;d++)if(e[d]==f){g.deselect(k);return}f=f.getParent()}c.push(k)});return c},_getContext:function(g){return g?
g:(g=h.currentEditor)&&(g.getContext&&g.getContext()||g.context)},fixupContext:function(g){g=this._getContext(g);return"davinci.ve.Context"==g.declaredClass||"xideve/delite/Context"==g.declaredClass?g:"function"==typeof g.getContext?g.getContext():null}})})},"davinci/ve/commands/RemoveCommand":function(){define(["dojo/_base/declare","davinci/ve/commands/_hierarchyCommand","davinci/ve/widget","davinci/ve/States","davinci/ve/commands/ModifyCommand"],function(q,n,h,g,e){return q("davinci.ve.commands.RemoveCommand",
[n],{name:"remove",constructor:function(e){this._id=e?e.id:void 0},execute:function(){if(this._id){var m=h.byId(this._id);if(m){var c=m.getContext(),k=m.getParent()||c.getContainerNode(),f,d=m.getHelper();d&&d.onRemove&&(f=d.onRemove(m));if(!this._data){this._index=dojo.indexOf(k.getChildren(),m);if(0>this._index)return;this._data=m.getData();this._parentId=k.id}this._data.context=c;d=this._isRefreshOnDescendantChange(m);c&&c.detach(m);k.removeChild(m);c&&c.widgetChanged(c.WIDGET_REMOVED,m);m.destroyWidget();
c&&c.widgetAddedOrDeleted();d&&(new e(d,null,null,k._edit_context)).execute();g.resetState(m.domNode);f&&f()}}},undo:function(){if(this._data&&this._parentId){var m=h.byId(this._parentId);if(m){var c=h.createWidget(this._data);if(c){m.addChild(c,this._index);var k=m.getContext();k&&(k.attach(c),c.startup(),c.renderWidget(),k.widgetAddedOrDeleted(),k.widgetChanged(k.WIDGET_ADDED,c),(k=this._isRefreshOnDescendantChange(c))&&(new e(k,null,null,m._edit_context)).execute(),g.resetState(c.domNode))}}}}})})},
"davinci/ve/actions/CutAction":function(){define(["dojo/_base/declare","./_CutCopyAction","../../Runtime"],function(q,n,h){return q("davinci.ve.actions.CutAction",[n],{_invokeSourceEditorAction:function(g){g.htmlEditor.cutAction.run()},_executeAction:function(g,e,m,c){h.clipboard=m;g.select(null);g.getCommandStack().execute(c)}})})},"davinci/ve/actions/DeleteAction":function(){define(["dojo/_base/declare","davinci/Workbench","davinci/ve/actions/ContextAction","davinci/commands/CompoundCommand","davinci/ve/commands/RemoveCommand"],
function(q,n,h,g,e){return q("davinci.ve.actions.DeleteAction",[h],{run:function(h){if(h=this.fixupContext(h)){var c=this._normalizeSelection(h);if(0<c.length){var k=void 0;if(1===c.length)var c=c[0],f=c.getHelper(),k=f&&f.getRemoveCommand?f.getRemoveCommand(c):new e(c);else k=new g,dojo.forEach(c,function(d){var b=d.getHelper();d=b&&b.getRemoveCommand?b.getRemoveCommand(d):new e(d);k.add(d)});h.select(null);h.getCommandStack().execute(k)}}},isEnabled:function(e){e=this.fixupContext(e);var c=n.getOpenEditor();
return c&&e?(e=0<e.getSelection().length,"davinci.ve.PageEditor"==c.declaredClass?(c=c.getDisplayMode(),e&&"source"!=c):e):!1},shouldShow:function(e){return(e=(e=this.fixupContext(e))?e.editor:null)&&"davinci.ve.PageEditor"==e.declaredClass}})})},"davinci/ve/actions/PasteAction":function(){define(["dojo/_base/declare","../../Workbench","./ContextAction","../tools/PasteTool","../../Runtime"],function(q,n,h,g,e){return q("davinci.ve.actions.PasteAction",[h],{shortcut:{keyCode:86,ctrlKey:!0},run:function(h){if(h=
this.fixupContext(h))if("davinci.ve.PageEditor"==h.declaredClass&&"source"==h._displayMode)h.htmlEditor.pasteAction.run();else{var c=e.clipboard;c&&h.setActiveTool(new g(c))}},isEnabled:function(g){g=this.fixupContext(g);var c=n.getOpenEditor();return c&&g?"davinci.ve.PageEditor"==c.declaredClass?(g=c.getDisplayMode(),e.clipboard&&"source"!=g):e.clipboard:!1},shouldShow:function(e){return(e=(e=this.fixupContext(e))?e.editor:null)&&"davinci.ve.PageEditor"==e.declaredClass}})})},"davinci/ve/tools/PasteTool":function(){define("dojo/_base/declare ./CreateTool ../widget ../metadata ../../commands/CompoundCommand ../commands/AddCommand ../commands/MoveCommand ../commands/StyleCommand dojo/Deferred dojo/promise/all".split(" "),
function(q,n,h,g,e,m,c,k,f,d){return q("davinci.ve.tools.PasteTool",n,{constructor:function(b){this.inherited(arguments);this._position_prop=null;var a=b[0];a&&a.properties&&(a=h.parseStyleValues(a.properties.style),this._position_prop=h.retrieveStyleProperty(a,"position",""))},_create:function(b){var a=b.index,p,n,q=new e,w,x=[],B=new f,z=this._data.map(function(e){var r=new f,A=[];if(!this._loadType(e,A))return r.reject(),r;d(A).then(function(){var d=h.parseStyleValues(e.properties&&e.properties.style);
if("absolute"==this._position_prop){var f=parseInt(h.retrieveStyleProperty(d,"left","0px")),d=parseInt(h.retrieveStyleProperty(d,"top","0px"));p?n={x:f+p.x,y:d+p.y}:b.position?(n=b.position,p={x:b.position.x-f,y:b.position.y-d}):(n={x:f,y:d},p={x:0,y:0})}dojo.withDoc(this._context.getDocument(),function(){var d=function(b){void 0!==a&&0<=a&&a++;x.push(b);if(n){var d=this._context.getPreference("absoluteWidgetsZindex");q.add(new k(b,[{position:"absolute"},{"z-index":d}]));b=new c(b,n.x,n.y,w,null,
null,w);w||(w=b);q.add(b)}r.resolve()}.bind(this);e.context=this._context;g.getHelper(e.type,"tool").then(function(c){var f;c&&(f=new c(e));if(f&&f.addPasteCreateCommand)c={parent:b.parent||this._context.getContainerNode(),position:n,index:a},f.addPasteCreateCommand(q,c).then(function(a){if(!a)return r.reject(),r;d(a)});else{f=h.createWidget(e);if(!f)return r.reject(),r;q.add(new m(f,b.parent||this._context.getContainerNode(),a));this.checkAddToCurrentState(q,f);d(f)}}.bind(this))}.bind(this))}.bind(this));
return r}.bind(this));d(z).then(function(){q.isEmpty()||(this._context.getCommandStack().execute(q),setTimeout(function(){x.forEach(function(a,b){this._context.select(a,0<b)}.bind(this))}.bind(this),0));B.resolve()}.bind(this));return B},createWithFlowLayout:function(){return"absolute"!=this._position_prop}})})},"davinci/ve/actions/DuplicateAction":function(){define("dojo/_base/declare dojo/dom-style davinci/ve/actions/ContextAction davinci/commands/CompoundCommand davinci/ve/commands/AddCommand davinci/ve/commands/MoveCommand davinci/ve/tools/CreateTool davinci/ve/widget davinci/ve/utils/GeomUtils".split(" "),
function(q,n,h,g,e,m,c,k,f){return q("davinci.ve.actions.DuplicateAction",[h],{run:function(d){if((d=this.fixupContext(d))&&"davinci.ve.Context"===d.declaredClass&&"davinci/delite/Context"===d.declaredClass){var b=this._normalizeSelection(d);if(this.selectionSameParent(b)){var a=[];if(0<b.length){var h=new g;dojo.forEach(b,function(b){var g,p=b.getData({identify:!1});p&&(p.context=d,dojo.withDoc(d.getDocument(),function(){g=k.createWidget(p)},this),g&&(h.add(new e(g,b.getParent(),void 0)),c.prototype.checkAddToCurrentState(h,
g),a.push(g),"absolute"==(b&&b.domNode?n.get(b.domNode,"position"):null)&&(b=f.getMarginBoxPageCoords(b.domNode),b.l+=25,h.add(new m(g,b.l,b.t,void 0,void 0,void 0,!0)))))});d.getCommandStack().execute(h);dojo.forEach(a,function(a,b){d.select(a,0<b)},this)}}}},isEnabled:function(d){d=(d=this.fixupContext(d))&&d.getSelection?d.getSelection():[];return 0===d.length?!1:this.selectionSameParent(d)},shouldShow:function(d){return(d=(d=this.fixupContext(d))?d.editor:null)&&"davinci.ve.PageEditor"==d.declaredClass},
selectionSameParent:function(d){if(0===d.length)return!1;for(var b=d[0].getParent(),a=0;a<d.length;a++)if(d[a].getParent()!=b)return!1;return!0}})})},"davinci/ve/actions/EditValueAction":function(){define(["dojo/_base/declare","davinci/ve/actions/ContextAction"],function(q,n){return q("davinci.ve.actions.EditValueAction",[n],{run:function(h){if((h=this.fixupContext(h))&&"davinci.ve.Context"===h.declaredClass&&"davinci/delite/Context"===h.declaredClass){var g=h.getSelection();1===g.length&&h.select(g[0],
!1,!0)}},isEnabled:function(h){return(h=this.fixupContext(h))&&0<h.getSelection().length},shouldShow:function(h){return(h=(h=this.fixupContext(h))?h.editor:null)&&"davinci.ve.PageEditor"==h.declaredClass}})})},"davinci/ve/actions/EditPropertiesAction":function(){define(["dojo/_base/declare","davinci/ve/actions/ContextAction"],function(q,n){return q("davinci.ve.actions.EditPropertiesAction",[n],{run:function(h){(h=this.fixupContext(h))&&h.editor&&h.editor.editorContainer&&h.editor.editorContainer.hideShowProperties&&
h.editor.editorContainer.hideShowProperties()},isEnabled:function(h){h=this.fixupContext(h);return!0}})})},"davinci/ve/actions/SurroundAction":function(){define("dojo/_base/declare dojo/_base/array dojo/dom-style davinci/ve/actions/ContextAction davinci/commands/CompoundCommand davinci/ve/commands/AddCommand davinci/ve/commands/StyleCommand davinci/ve/commands/MoveCommand davinci/ve/commands/ResizeCommand davinci/ve/commands/ReparentCommand davinci/ve/tools/CreateTool davinci/ve/widget davinci/ve/utils/GeomUtils".split(" "),
function(q,n,h,g,e,m,c,k,f,d,b,a,p){return q("davinci.ve.actions.SurroundAction",[g],{run:function(g){g=this.fixupContext(g);var q,r,x,B,z=[],u,y=this.item.surroundWithTagName;if(y){dojo.withDoc(g.getDocument(),function(){u=a.createWidget({type:"html."+y,properties:{},children:[],context:g})});var A=new e,C=[].concat(g.getSelection()),F=C[0],E=F.getParent();p.getMarginBoxPageCoords(E.domNode);C.sort(function(a,b){return E.indexOf(a)-E.indexOf(b)});var D=g.getDocument(),H=D.defaultView&&D.defaultView.dojo;
H.style||(H.style=h);(D=n.every(C,function(a){if(H)return position_prop=H.style(a.domNode,"position"),"absolute"==position_prop}))&&n.forEach(C,function(a,b){z.push(p.getMarginBoxPageCoordsCached(a.domNode));A.add(new k(a,z[b].l,z[b].t,null,z[b]))});A.add(new m(u,E,E.indexOf(F)));b.prototype.checkAddToCurrentState(A,u);D&&(A.add(new c(u,[{position:"absolute"}])),n.forEach(C,function(a,b){a=z[b].l+z[b].w;var d=z[b].t+z[b].h;if(0==b||z[b].l<q)q=z[b].l;if(0==b||z[b].t<r)r=z[b].t;if(0==b||a>x)x=a;if(0==
b||d>B)B=d}),A.add(new k(u,q,r)),A.add(new f(u,x-q,B-r)));n.forEach(C,function(a){A.add(new d(a,u,"last"))});D&&n.forEach(C,function(a,b){A.add(new k(a,z[b].l,z[b].t,null,z[b]))});g.getCommandStack().execute(A);g.select(u)}else console.error("missing surroundWithTagName")},isEnabled:function(a){if((a=this.fixupContext(a))&&a.getSelection().length){var b=a.getSelection()[0].getParent(),d=[];if(!b||!b.length)return!1;if(n.every(a.getSelection(),function(a){var c=a.getParent();if(!c)return!1;d.push(b.indexOf(a));
return b.id==c.id})){d.sort();var c;for(a=d.shift();d.length;a=c)if(c=d.shift(),c!=a+1)return!1;return!0}}return!1}})})},"davinci/ve/actions/SelectParentAction":function(){define(["dojo/_base/declare","davinci/ve/actions/_SelectAncestorAction"],function(q,n){return q("davinci.ve.actions.SelectParentAction",[n],{run:function(h){var g=(h=this.fixupContext(h))&&h.getSelection();this.selectionSameParentNotBody(g)&&h.select(g[0].getParent())},isEnabled:function(h){h=(h=this.fixupContext(h))&&h.getSelection();
return this.selectionSameParentNotBody(h)}})})},"davinci/ve/actions/_SelectAncestorAction":function(){define(["dojo/_base/declare","davinci/ve/actions/ContextAction"],function(q,n){return q("davinci.ve.actions._SelectAncestorAction",[n],{shouldShow:function(h){return(h=this.fixupContext(h))&&h.editor&&"davinci.ve.HTMLPageEditor"==h.editor.editorID},selectionSameParentNotBody:function(h){if(!h||0===h.length)return!1;var g=h[0].getParent();if(!g||!g.domNode)return!1;for(var e=0;e<h.length;e++)if(h[e].getParent()!=
g)return!1;return!0}})})},"davinci/ve/actions/SelectAncestorAction":function(){define(["dojo/_base/declare","davinci/ve/actions/_SelectAncestorAction","davinci/Workbench","davinci/lang/ve"],function(q,n,h,g){return q("davinci.ve.actions.SelectAncestorAction",[n],{run:function(e){var m=(e=this.fixupContext(e))&&e.getSelection();if(this.selectionSameParentNotBody(m)){for(var c=[],m=m[0].getParent();"BODY"!=m.domNode.tagName;)c.push(m),m=m.getParent();for(var m='\x3cdiv class\x3d"SelectAncestorLabel"\x3e'+
g.selectAncestorLabel+'\x3c/div\x3e\x3cselect dojoType\x3d"dijit.form.Select" id\x3d"SelectAncestor" name\x3d"SelectAncestor" style\x3d"width:12em;"\x3e\x3coption value\x3d"-1"\x3e\x3c/option\x3e',k=0;k<c.length;k++)var f=require("davinci/ve/widget").getLabel(c[k]),m=m+('\x3coption value\x3d"'+k+'"\x3e'+f+"\x3c/option\x3e");h.showMessage(g.selectAncestorTitle,m+"\x3c/select\x3e\x3cbr/\x3e");m=dijit.byId("SelectAncestor");m._selectAncestor=this._selectAncestor;dojo.connect(m,"onChange",function(d){e.select(c[d])})}},
isEnabled:function(e){e=(e=this.fixupContext(e))&&e.getSelection();return this.selectionSameParentNotBody(e)}})})},"davinci/ve/actions/UnselectAllAction":function(){define(["dojo/_base/declare","davinci/ve/actions/ContextAction"],function(q,n){return q("davinci.ve.actions.SelectParentAction",[n],{run:function(h){h=this.fixupContext(h);0<(h&&h.getSelection()).length&&h.deselect()},isEnabled:function(h){return(h=(h=this.fixupContext(h))&&h.getSelection())&&0<h.length}})})},"davinci/ve/actions/ArrangeAction":function(){define(["dojo/_base/declare",
"./_ReorderAction","davinci/commands/CompoundCommand","davinci/ve/commands/ReparentCommand"],function(q,n,h,g){return q("davinci.ve.actions.ArrangeAction",[n],{run:function(e){},isEnabled:function(e){return!0},shouldShow:function(e){return(e=(e=this.fixupContext(e))?e.editor:null)&&"davinci.ve.PageEditor"==e.declaredClass}})})},"davinci/ve/actions/_ReorderAction":function(){define(["dojo/_base/declare","dojo/_base/array","dojo/dom-style","davinci/ve/actions/ContextAction"],function(q,n,h,g){return q("davinci.ve.actions._ReorderAction",
[g],{shouldShow:function(e){return(e=this.fixupContext(e))&&e.editor&&"davinci.ve.HTMLPageEditor"==e.editor.editorID},selectionSameParentAllAbsolute:function(e){if(0===e.length)return!1;var g=e[0].getParent();if(!g)return!1;for(var c=0;c<e.length;c++){var k=e[c];if(k.getParent()!=g||"absolute"!=(k&&k.domNode?h.get(k.domNode,"position"):null))return!1}return!0},selectionSameParentAllAbsoluteAdjacent:function(e){if(!e||0===e.length||!this.selectionSameParentAllAbsolute(e))return!1;var g=e[0].getParent();
if(!g||!g.length)return!1;for(var g=g.getChildren(),c=Number.MAX_VALUE,h=Number.MIN_VALUE,f=0;f<g.length;f++)0<=e.indexOf(g[f])&&(c=f<c?f:c,h=f>h?f:h);return h-c+1===e.length},getAbsoluteSiblings:function(e){e=e&&e.getParent&&e.getParent();return e?(e=e.getChildren&&e.getChildren())?n.filter(e,function(e){return"absolute"==(e&&e.domNode?h.get(e.domNode,"position"):null)}):[]:[]}})})},"davinci/ve/actions/MoveToFrontAction":function(){define(["dojo/_base/declare","./_ReorderAction","davinci/commands/CompoundCommand",
"davinci/ve/commands/ReparentCommand"],function(q,n,h,g){return q("davinci.ve.actions.MoveToFrontAction",[n],{name:"MoveToFront",iconClass:"editActionIcon editMoveToFrontIcon",run:function(e){if(e=this.fixupContext(e)){var m=e&&e.getSelection?e.getSelection():[];if(0!==m.length&&this.selectionSameParentAllAbsolute(m)){for(var c=m[0].getParent(),k=this.getAbsoluteSiblings(m[0]),f=new h,d=0;d<k.length;d++){var b=k[d];0<=m.indexOf(b)&&f.add(new g(b,c,null))}e.getCommandStack().execute(f)}}},isEnabled:function(e){e=
(e=this.fixupContext(e))&&e.getSelection?e.getSelection():[];if(0===e.length||!this.selectionSameParentAllAbsolute(e))return!1;for(var g=this.getAbsoluteSiblings(e[0]),c=0;c<e.length;c++)if(g.indexOf(e[c])<g.length-e.length)return!0;return!1}})})},"davinci/ve/actions/MoveToBackAction":function(){define(["dojo/_base/declare","./_ReorderAction","davinci/commands/CompoundCommand","davinci/ve/commands/ReparentCommand"],function(q,n,h,g){return q("davinci.ve.actions.MoveToBackAction",[n],{name:"MoveToBack",
iconClass:"editActionIcon editMoveToBackIcon",run:function(e){if(e=this.fixupContext(e)){var m=e&&e.getSelection?e.getSelection():[];if(0!==m.length&&this.selectionSameParentAllAbsolute(m)){for(var c=m[0].getParent(),k=this.getAbsoluteSiblings(m[0]),f=new h,d=k.length-1;0<=d;d--){var b=k[d];0<=m.indexOf(b)&&f.add(new g(b,c,0))}e.getCommandStack().execute(f)}}},isEnabled:function(e){e=(e=this.fixupContext(e))&&e.getSelection?e.getSelection():[];if(0===e.length||!this.selectionSameParentAllAbsolute(e))return!1;
for(var g=this.getAbsoluteSiblings(e[0]),c=0;c<e.length;c++)if(g.indexOf(e[c])>e.length-1)return!0;return!1}})})},"davinci/ve/actions/MoveForwardAction":function(){define(["dojo/_base/declare","./_ReorderAction","davinci/commands/CompoundCommand","davinci/ve/commands/ReparentCommand"],function(q,n,h,g){return q("davinci.ve.actions.MoveForwardAction",[n],{name:"MoveForward",iconClass:"editActionIcon editMoveForwardIcon",run:function(e){if(e=this.fixupContext(e)){var m=e&&e.getSelection?e.getSelection():
[];if(0!==m.length&&this.selectionSameParentAllAbsoluteAdjacent(m)){for(var c,k=m[0].getParent(),f=k.getChildren(),d=this.getAbsoluteSiblings(m[0]),b=new h,a=m.slice(0),n=0;n<d.length;n++){c=d[n];var q=a.indexOf(c);if(0<=q)a.splice(q,1);else if(0===a.length)break}f=f.indexOf(c)+1;for(a=0;a<d.length;a++)c=d[a],0<=m.indexOf(c)&&b.add(new g(c,k,f));e.getCommandStack().execute(b)}}},isEnabled:function(e){e=(e=this.fixupContext(e))&&e.getSelection?e.getSelection():[];if(0===e.length||!this.selectionSameParentAllAbsoluteAdjacent(e))return!1;
for(var g=this.getAbsoluteSiblings(e[0]),c=0;c<e.length;c++)if(g.indexOf(e[c])<g.length-e.length)return!0;return!1}})})},"davinci/ve/actions/MoveBackwardAction":function(){define(["dojo/_base/declare","./_ReorderAction","davinci/commands/CompoundCommand","davinci/ve/commands/ReparentCommand"],function(q,n,h,g){return q("davinci.ve.actions.MoveBackwardAction",[n],{name:"MoveBackward",iconClass:"editActionIcon editMoveBackwardIcon",run:function(e){if(e=this.fixupContext(e)){var m=e&&e.getSelection?
e.getSelection():[];if(0!==m.length&&this.selectionSameParentAllAbsoluteAdjacent(m)){for(var c,k=m[0].getParent(),f=k.getChildren(),d=this.getAbsoluteSiblings(m[0]),b=new h,a=m.slice(0),n=d.length-1;0<=n;n--){c=d[n];var q=a.indexOf(c);if(0<=q)a.splice(q,1);else if(0===a.length)break}f=f.indexOf(c);for(a=d.length-1;0<=a;a--)c=d[a],0<=m.indexOf(c)&&b.add(new g(c,k,f));e.getCommandStack().execute(b)}}},isEnabled:function(e){e=(e=this.fixupContext(e))&&e.getSelection?e.getSelection():[];if(0===e.length||
!this.selectionSameParentAllAbsoluteAdjacent(e))return!1;for(var g=this.getAbsoluteSiblings(e[0]),c=0;c<e.length;c++)if(g.indexOf(e[c])>e.length-1)return!0;return!1}})})},"davinci/ve/actions/OtherAction":function(){define(["dojo/_base/declare","./_ReorderAction","davinci/commands/CompoundCommand","davinci/ve/commands/ReparentCommand"],function(q,n,h,g){return q("davinci.ve.actions.OtherAction",[n],{run:function(e){},isEnabled:function(e){return!0},shouldShow:function(e){return(e=(e=this.fixupContext(e))?
e.editor:null)&&"davinci.ve.PageEditor"==e.declaredClass}})})},"davinci/ve/actions/EnableApplicationStates":function(){define("dojo/_base/declare dojo/_base/connect dojo/dom-class dijit/_WidgetBase dijit/_TemplatedMixin dijit/_WidgetsInTemplateMixin davinci/Runtime davinci/Workbench davinci/ve/metadata davinci/ve/widget davinci/ve/States davinci/actions/Action davinci/lang/ve dijit/lang/_common dojo/text!./templates/EnableApplicationStates.html dijit/form/TextBox".split(" "),function(q,n,h,g,e,m,
c,k,f,d,b,a,p,r,v){var w=function(){if(c.currentEditor&&c.currentEditor.currentEditor&&c.currentEditor.currentEditor.context){context=c.currentEditor.currentEditor.context;var a=context.getSelection();if(1==a.length)return"ANY"==f.getAllowedChild(a[0].type)}return!1};q("davinci.ve.actions.EnableApplicationStatesWidget",[g,e,m],{templateString:v,widgetsInTemplate:!0,veNls:p,commonNls:r,oldValue:null,widget:null,postCreate:function(){if(c.currentEditor&&c.currentEditor.currentEditor&&c.currentEditor.currentEditor.context){editor=
this.editor=c.currentEditor;context=this.context=c.currentEditor.currentEditor.context;var a=context.getSelection();if(0<a.length){var a=this.widget=a[0],e=d.getLabel(a);this.widgetLabel.innerHTML=e;this.oldValue=b.isStateContainer(a.domNode);this.checkBoxWidget.set("checked",this.oldValue);this.oldValue?(a=b.getStates(a.domNode),1<a.length?(a.splice(0,1),this.statesListDiv.innerHTML=p.EnableApplicationStatesCurrentStates+": "+a.join(", ")):this.statesListDiv.innerHTML=p.EnableApplicationStatesCurrentStates+
": "+p.EnableApplicationStatesNone,this.description.innerHTML=p.DisableAsStateContainerDescription):(this.description.innerHTML=p.EnableAsStateContainerDescription,this.statesListDiv.innerHTML="")}this.okButton.connect(this.okButton,"onClick",dojo.hitch(this,function(a){this.onOk(a)}));this.cancelButton.connect(this.cancelButton,"onClick",dojo.hitch(this,function(a){this.onCancel(a)}))}},_onKeyPress:function(a){if(a.keyCode==dojo.keys.ENTER)this.onOk()},onOk:function(){var a=this.checkBoxWidget.get("checked");
if(a!=this.oldValue){var d=this.widget.domNode;a?(d._maqAppStates={},a=b.serialize(d),this.widget._srcElement.addAttribute(b.APPSTATES_ATTRIBUTE,a.maqAppStates)):(delete d._maqAppStates,this.widget._srcElement.removeAttribute(b.APPSTATES_ATTRIBUTE),b.removeUnusedStates(this.context));this.editor._visualChanged();n.publish("/maqetta/appstates/state/containerChange",[])}this.onClose()},onCancel:function(){this.onClose()}});return q("davinci.ve.actions.EnableApplicationStates",[a],{run:function(){if(w()&&
c.currentEditor&&c.currentEditor.currentEditor&&c.currentEditor.currentEditor.context){var a=new davinci.ve.actions.EnableApplicationStatesWidget;k.showModal(a,p.EnableApplicationStates,{width:"370px"})}},isEnabled:function(){return w()}})})},"davinci/ve/actions/ViewDesignAction":function(){define(["dojo/_base/declare","davinci/ve/actions/ContextAction"],function(q,n){return q("davinci.ve.actions.ViewDesignAction",[n],{run:function(h){(h=this.fixupContext(h))&&h.editor&&h.editor.switchDisplayModeDesign&&
h.editor.switchDisplayModeDesign()},updateStyling:function(){var h=davinci.Workbench.getOpenEditor();if(h&&h.getDisplayMode){var h=h.getDisplayMode(),g=dojo.query(".maqDesignButton")[0];g&&("design"==h?dojo.addClass(g,"maqLabelButtonSelected"):dojo.removeClass(g,"maqLabelButtonSelected"))}}})})},"davinci/ve/actions/ViewSourceAction":function(){define(["dojo/_base/declare","davinci/ve/actions/ContextAction","davinci/lang/ve"],function(q,n,h){return q("davinci.ve.actions.ViewSourceAction",[n],{run:function(g){(g=
this.fixupContext(g))&&g.editor&&g.editor.switchDisplayModeSourceLatest&&(editor=g.editor,editor.switchDisplayModeSourceLatest())},updateStyling:function(){var g=davinci.Workbench.getOpenEditor();if(g&&g.getDisplayMode){var e=g.getDisplayMode(),g=g.getSourceDisplayMode(),m=dojo.query(".maqSourceComboButton")[0];if(m){var c=dijit.byNode(m);c&&c.set("label",h["SourceComboButton-"+g]);"design"==e?dojo.removeClass(m,"maqLabelButtonSelected"):dojo.addClass(m,"maqLabelButtonSelected")}}}})})},"davinci/ve/actions/ViewSourceMenuAction":function(){define(["dojo/_base/declare",
"davinci/ve/actions/ContextAction"],function(q,n){return q("davinci.ve.actions.ViewSourceMenuAction",[n],{run:function(h){(h=this.fixupContext(h))&&h.editor&&h.editor.switchDisplayModeSource&&h.editor.switchDisplayModeSource()}})})},"davinci/ve/actions/ViewSplitHMenuAction":function(){define(["dojo/_base/declare","davinci/ve/actions/ContextAction"],function(q,n){return q("davinci.ve.actions.ViewSplitHMenuAction",[n],{run:function(h){(h=this.fixupContext(h))&&h.editor&&h.editor.switchDisplayModeSplitHorizontal&&
h.editor.switchDisplayModeSplitHorizontal()}})})},"davinci/ve/actions/ViewSplitVMenuAction":function(){define(["dojo/_base/declare","davinci/ve/actions/ContextAction"],function(q,n){return q("davinci.ve.actions.ViewSplitVMenuAction",[n],{run:function(h){(h=this.fixupContext(h))&&h.editor&&h.editor.switchDisplayModeSplitVertical&&h.editor.switchDisplayModeSplitVertical()}})})},"davinci/ve/actions/AddState":function(){define("dojo/_base/declare davinci/Runtime davinci/Workbench davinci/workbench/Preferences davinci/ve/States davinci/actions/Action davinci/lang/ve davinci/ve/actions/_AddManageStatesWidget".split(" "),
function(q,n,h,g,e,m,c,k){return q("davinci.ve.actions.AddState",[m],{run:function(){var f;n.currentEditor&&n.currentEditor.currentEditor&&n.currentEditor.currentEditor.context&&(f=n.currentEditor.currentEditor.context,(f=e.getFocus(f.rootNode))&&f.stateContainerNode&&(f=new davinci.ve.actions._AddManageStatesWidget({node:f.stateContainerNode}),f._calledBy="AddState",h.showModal(f,c.createNewState,null,null,!0),f.okButton.set("disabled",!0)))}})})},"davinci/ve/actions/_AddManageStatesWidget":function(){define("dojo/_base/declare dojo/dom-style dojo/_base/event dijit/_WidgetBase dijit/_TemplatedMixin dijit/_WidgetsInTemplateMixin davinci/Runtime davinci/Workbench davinci/workbench/Preferences davinci/ve/States davinci/commands/CompoundCommand davinci/ve/commands/StyleCommand davinci/ve/commands/AppStateCommand davinci/actions/Action davinci/lang/ve dijit/lang/_common dojo/text!./templates/AddState.html dijit/form/TextBox dijit/form/Select dijit/form/CheckBox dijit/form/Button".split(" "),
function(q,n,h,g,e,m,c,k,f,d,b,a,p,r,v,w,x,B,z,u,y){return q("davinci.ve.actions._AddManageStatesWidget",[g,e,m],{templateString:x,widgetsInTemplate:!0,veNls:v,commonNls:w,_isValid:function(){var a=this.domNode.querySelector(".addStateNameDiv");if(a&&"none"==n.get(a,"display"))return!0;a=this.input.get("value");return a?davinci.ve.states.hasState(this.node,a)?(alert(dojo.string.substitute(v.stateNameExists,{name:a})),!1):!0:!1},_onKeyPress:function(a){a.keyCode!=dojo.keys.ENTER&&(this._isValid()?
this.okButton.set("disabled",!1):this.okButton.set("disabled",!0))},onOk:function(){var a;if(c.currentEditor&&c.currentEditor.currentEditor&&c.currentEditor.currentEditor.context){if(a=c.currentEditor.currentEditor.context,(a=d.getFocus(a.rootNode))&&a.stateContainerNode){d.getState(a.stateContainerNode);var e=this.input.get("value");if(e)if(c.currentEditor&&c.currentEditor.currentEditor&&c.currentEditor.currentEditor.context){a=c.currentEditor.currentEditor.context;var f=new b;e&&f.add(new p({action:"add",
state:e,stateContainerNode:this.node,context:a}));a.getCommandStack().execute(f)}else console.error("AddState.js - cannot determine context.")}}else console.error("_AddManageStatesWidget.js (from "+this._calledBy+" - cannot determine context.")},onCancel:function(){this.onClose()}})})},"davinci/ve/actions/RemoveState":function(){define("dojo/_base/declare davinci/Runtime davinci/ve/States davinci/actions/Action davinci/commands/CompoundCommand davinci/ve/commands/AppStateCommand".split(" "),function(q,
n,h,g,e,m){return q("davinci.ve.actions.RemoveState",[g],{run:function(){var c;if(n.currentEditor&&n.currentEditor.currentEditor&&n.currentEditor.currentEditor.context){c=n.currentEditor.currentEditor.context;var g=h.getFocus(c.rootNode);if(g&&g.state&&g.state!==h.NORMAL){var g=g.stateContainerNode,f=f=davinci.ve.states.getState(g);if(f){var d=new e;d.add(new m({action:"remove",state:f,stateContainerNode:g,context:c}));c.getCommandStack().execute(d)}}}}})})},"davinci/ve/actions/ModifyState":function(){define("dojo/_base/declare dojo/Deferred dojo/_base/connect dijit/_WidgetBase dijit/_TemplatedMixin dijit/_WidgetsInTemplateMixin dijit/popup dijit/focus davinci/ve/States davinci/ui/Dialog davinci/Runtime davinci/Workbench davinci/actions/Action davinci/lang/ve dijit/lang/_common dojo/text!./templates/ModifyState.html dijit/form/TextBox dijit/form/ValidationTextBox davinci/commands/CompoundCommand davinci/ve/commands/AppStateCommand".split(" "),
function(q,n,h,g,e,m,c,k,f,d,b,a,p,r,v,w,x,B,z,u){var y=null;q("davinci.ve.actions.ModifyStateWidget",[g,e,m],{templateString:w,widgetsInTemplate:!0,veNls:r,commonNls:v,isNormalState:!1,newName:null,oldInitialStateOn:null,postCreate:function(){this._connections=[];dijit.byId("state_rename_tooltip_dialog");y.then(function(){this._statesFocus.state&&this._statesFocus.state!==f.NORMAL||(this.isNormalState=!0);var a=dojo.byId("modify_state_old_name");a&&(this._statesFocus&&this._statesFocus.state&&!this.isNormalState?
a.innerHTML=this._statesFocus.state:(a.innerHTML="\x3ci\x3e"+f.NORMAL+"\x3c/i\x3e",this.renameButton.set("disabled",!0)));this.oldInitialStateOn=a=f.getInitial(this._statesFocus.stateContainerNode)===this._statesFocus.state;this.initialState.set("checked",a);a&&this.isNormalState&&this.initialState.set("disabled",!0);this._dialog.connect(this._dialog,"hide",function(a){this.onClose()}.bind(this));this.okButton.connect(this.okButton,"onClick",dojo.hitch(this,function(a){this.onOk(a)}));this.cancelButton.connect(this.cancelButton,
"onClick",dojo.hitch(this,function(a){this.onCancel(a)}));if(a=dijit.byId("state_rename_tooltip_dialog"))a.connect(a,"onShow",function(a){this.renameStateShowTooltipDialog(a)}.bind(this)),a.connect(a,"onHide",function(a){this.renameStateHideTooltipDialog(a)}.bind(this))}.bind(this))},renameStateShowTooltipDialog:function(a){a=dojo.byId("modify_state_old_name");var b=dojo.byId("state_rename_new_name"),d=dijit.byId("state_rename_new_name");a&&d&&d.set("value",a.innerText);k.focus(b);a=dijit.byId("state_rename_do_it");
b=dijit.byId("state_rename_cancel");a.connect(a,"onMouseDown",function(a){a.stopPropagation()});b.connect(a,"onMouseDown",function(a){a.stopPropagation()});a.connect(a,"onClick",function(a){this.renameStateDoIt(a)}.bind(this));b.connect(b,"onClick",function(a){a=dijit.byId("state_rename_tooltip_dialog");c.close(a)}.bind(this))},renameStateDoIt:function(a){a=dojo.byId("modify_state_old_name");var b=dijit.byId("state_rename_new_name"),b=b?b.get("value"):null,d=dijit.byId("state_rename_tooltip_dialog");
a&&b&&(this.newName=a.innerHTML=b);d&&c.close(d)},renameStateHideTooltipDialog:function(a){},onOk:function(a){if(b.currentEditor&&b.currentEditor.currentEditor&&b.currentEditor.currentEditor.context){a=b.currentEditor.currentEditor.context;var d=f.getFocus(a.rootNode);if(d&&d.stateContainerNode){var c;this.newName&&this.newName!==this._statesFocus.state&&(c=this.newName);var e,g=this.initialState.get("checked");g!==this.oldInitialStateOn&&(e=d.state?d.state:"undefined",e=g?e:null);if(c||e)g=new z,
g.add(new u({action:"modify",state:d.state,stateContainerNode:d.stateContainerNode,context:a,newState:c,initialState:e})),a.getCommandStack().execute(g);this.onClose()}}},onCancel:function(){this.onClose()},onClose:function(a){for(;a=this._connections.pop();)h.disconnect(a)}});return q("davinci.ve.actions.ModifyState",[p],{run:function(){var d;if(b.currentEditor&&b.currentEditor.currentEditor&&b.currentEditor.currentEditor.context&&(d=b.currentEditor.currentEditor.context,d=f.getFocus(d.rootNode))){y=
new n;var c=new davinci.ve.actions.ModifyStateWidget,e=a.showModal(c,r.modifyState);this._dialog=c._dialog=e;c._statesFocus=d;y.resolve()}}})})},"davinci/ve/actions/ManageStates":function(){define("dojo/_base/declare davinci/Runtime davinci/Workbench davinci/ve/actions/ContextAction davinci/workbench/Preferences dijit/registry davinci/ve/States davinci/actions/Action davinci/lang/ve davinci/ve/actions/_ManageStatesWidget".split(" "),function(q,n,h,g,e,m,c,k,f,d){return q("davinci.ve.actions.ManageStates",
[g],{run:function(){var b;n.currentEditor&&n.currentEditor.currentEditor&&n.currentEditor.currentEditor.context&&(b=n.currentEditor.currentEditor.context,(b=c.getFocus(b.rootNode))&&b.stateContainerNode&&(b=new davinci.ve.actions._ManageStatesWidget({node:b.stateContainerNode}),b._calledBy="ManageStates",b.okButton.set("label",f.updateLabel),b.updateDialog(),h.showModal(b,f.manageStates,{width:400},null,!0)))},isEnabled:function(b){b=this.fixupContext(b);var a=h.getOpenEditor();return a&&b?"davinci.ve.PageEditor"==
a.declaredClass?0<b.getSelection().length:!1:!1},shouldShow:function(b){return(b=(b=this.fixupContext(b))?b.editor:null)&&"davinci.ve.PageEditor"==b.declaredClass}})})},"davinci/ve/actions/_ManageStatesWidget":function(){define("dojo/_base/declare dojo/dom-construct dojo/on dojo/dom-style dojo/dom-class dojo/_base/event dijit/_WidgetBase dijit/_TemplatedMixin dijit/_WidgetsInTemplateMixin davinci/Runtime davinci/Workbench davinci/workbench/Preferences davinci/ve/States davinci/commands/CompoundCommand davinci/ve/commands/StyleCommand davinci/actions/Action davinci/lang/ve dijit/lang/_common dojo/text!./templates/ManageStates.html dijit/form/Button".split(" "),
function(q,n,h,g,e,m,c,k,f,d,b,a,p,r,v,w,x,B,z,u){return q("davinci.ve.actions._ManageStatesWidget",[c,k,f],{templateString:z,widgetsInTemplate:!0,anyCheckBoxChanges:!1,_states:[],_stateContainers:[],_checkBoxes:[],_overrideDisplayValue:[],_notes:[],_handlers:[],veNls:x,commonNls:B,constructor:function(){this.handlers=[]},postCreate:function(){if(this._getContext()){var a=this.domNode.querySelector(".manageStatesStatesListDiv");if(a){var b=this._getAllStatesInDoc();this._states=b.states;this._stateContainers=
b.stateContainers;if(b=this.domNode.querySelector(".manageStatesCheckAcceleratorsTable"))b.style.width="100%";if(b=this.domNode.querySelector(".manageStatesCheckCurrentStateOnlyCell"))b.style.textAlign="left";if(b=this.domNode.querySelector(".manageStatesCheckAllCell"))b.style.textAlign="center";if(b=this.domNode.querySelector(".manageStatesUncheckAllCell"))b.style.textAlign="right";for(var d,a=n.create("table",{"class":"manageStatesStatesListTable",style:"width:100%",border:0,cellspacing:0,cellpadding:3},
a),c=0;c<this._states.length;c++)b=n.create("tr",{},a),d=n.create("td",{"class":"manageStatesCheckboxCell"},b),this._checkBoxes[c]=n.create("div",{id:"manageStatesCheckBox_"+c,"class":"manageStatesCheckbox"},d),this._handlers.push(h(this._checkBoxes[c],"click",function(a,b){b=this._checkBoxes[a];this.anyCheckBoxChanges=!0;e.remove(b,"manageStatesCheckboxNoneVisible");e.remove(b,"manageStatesCheckboxAllVisible");e.remove(b,"manageStatesCheckboxAllVisibleBackgroundAll");e.remove(b,"manageStatesCheckboxAllVisibleBackgroundSome");
e.remove(b,"manageStatesCheckboxSomeVisible");1==b._checkValue?(b._checkValue=0,e.add(b,"manageStatesCheckboxNoneVisible"),this._overrideDisplayValue[a]="none"):(b._checkValue=1,e.add(b,"manageStatesCheckboxAllVisible"),this._overrideDisplayValue[a]="");this.updateDialog()}.bind(this,c))),this._overrideDisplayValue[c]=null,d=this._states[c],n.create("td",{"class":"manageStatesStateNameCell",innerHTML:"Normal"==d?"Background":d},b),d=n.create("td",{"class":"manageStatesNotesCell"},b),this._notes[c]=
n.create("span",{"class":"manageStatesNotesSpan"},d)}(a=this.domNode.querySelector(".manageStatesCheckCurrentStateOnly"))&&this._handlers.push(h(a,"click",function(a){m.stop(a);this._acceleratorClicked("current")}.bind(this)));(a=this.domNode.querySelector(".manageStatesCheckAll"))&&this._handlers.push(h(a,"click",function(a){m.stop(a);this._acceleratorClicked("all")}.bind(this)));(a=this.domNode.querySelector(".manageStatesUncheckAll"))&&this._handlers.push(h(a,"click",function(a){m.stop(a);this._acceleratorClicked("none")}.bind(this)));
(a=this.domNode.querySelector(".manageStatesCheckBackgroundOnly"))&&this._handlers.push(h(a,"click",function(a){m.stop(a);this._acceleratorClicked("background")}.bind(this)));this.anyCheckBoxChanges=!1;setTimeout(function(){this.okButton.focus()}.bind(this),500)}},_acceleratorClicked:function(a){var b=this._getContext();if(b&&(b=p.getFocus(b.rootNode))&&b.stateContainerNode){for(var d=p.getState(b.stateContainerNode),c=0;c<this._states.length;c++){var f=this._states[c];if("undefined"==f||f==p.NORMAL)f=
void 0;var g=this._checkBoxes[c];e.remove(g,"manageStatesCheckboxNoneVisible");e.remove(g,"manageStatesCheckboxAllVisible");e.remove(g,"manageStatesCheckboxAllVisibleBackgroundAll");e.remove(g,"manageStatesCheckboxAllVisibleBackgroundSome");e.remove(g,"manageStatesCheckboxSomeVisible");"current"==a?f==d&&b.stateContainerNode==this._stateContainers[c]?(g._checkValue=1,e.add(g,"manageStatesCheckboxAllVisible"),this._overrideDisplayValue[c]=""):(g._checkValue=0,e.add(g,"manageStatesCheckboxNoneVisible"),
this._overrideDisplayValue[c]="none"):"all"==a?(g._checkValue=1,e.add(g,"manageStatesCheckboxAllVisible"),this._overrideDisplayValue[c]=""):"none"==a?(g._checkValue=0,e.add(g,"manageStatesCheckboxNoneVisible"),this._overrideDisplayValue[c]="none"):"background"==a&&(g._checkValue=1,e.add(g,"manageStatesCheckboxAllVisible"),this._overrideDisplayValue[c]=0==c?"":"$MAQ_DELETE_PROPERTY$")}this.anyCheckBoxChanges=!0;this.updateDialog()}},_isValid:function(){return!0},_onKeyPress:function(a){a.keyCode!=
dojo.keys.ENTER&&(this._isValid()?this.okButton.set("disabled",!1):this.okButton.set("disabled",!0))},_getAllStatesInDoc:function(){var a;if(d.currentEditor&&d.currentEditor.currentEditor&&d.currentEditor.currentEditor.context){a=d.currentEditor.currentEditor.context;var b=[],c=[];if(a=p.getAllStateContainers(a.rootNode))for(var e=0;e<a.length;e++)for(var f=p.getStates(a[e]),g=0;g<f.length;g++)b.push(f[g]),c.push(a[e]);return{states:b,stateContainers:c}}console.error("_ManageStatesWidget.js (from "+
this._calledBy+" - cannot determine context.")},_getContext:function(){var a;d.currentEditor&&d.currentEditor.currentEditor&&d.currentEditor.currentEditor.context?a=d.currentEditor.currentEditor.context:console.error("_ManageStatesWidget.js (from "+this._calledBy+" - cannot determine context.");return a},_getAllEffectedWidgets:function(){var a=this._getContext();if(!a)return[];var b=p.getFocus(a.rootNode);if(b&&b.stateContainerNode)return a.getSelection().slice(0)},updateDialog:function(){var a=this._getContext();
if(a){var b=p.getFocus(a.rootNode);if(b&&b.stateContainerNode)for(var b=this._getAllEffectedWidgets(),d=this._overrideDisplayValue[0],c=0;c<this._states.length;c++){var f=this._states[c];if(f==p.NORMAL||"undefined"==f)f=void 0;for(var g=0,h=0,k=0;k<b.length;k++){var m=b[k],n={undefined:d};n[void 0===f?"undefined":f]=this._overrideDisplayValue[c];m=p.getEffectiveDisplayValue(a,m,f,n);0!=m.effectiveDisplayValue.indexOf("none")&&(g++,f||"undefined"!=m.effectiveState?f&&m.effectiveState==f&&h++:h++)}f=
this._checkBoxes[c];k=this._notes[c];e.remove(f,"manageStatesCheckboxNoneVisible");e.remove(f,"manageStatesCheckboxAllVisible");e.remove(f,"manageStatesCheckboxAllVisibleBackgroundAll");e.remove(f,"manageStatesCheckboxAllVisibleBackgroundSome");e.remove(f,"manageStatesCheckboxSomeVisible");k.innerHTML="";0==g?(f._checkValue=0,e.add(f,"manageStatesCheckboxNoneVisible")):g==b.length?(f._checkValue=1,h==b.length?e.add(f,"manageStatesCheckboxAllVisible"):0<h?(e.add(f,"manageStatesCheckboxAllVisibleBackgroundSome"),
k.innerHTML=x.manageStatesSomeVisibleFromBackground):(e.add(f,"manageStatesCheckboxAllVisibleBackgroundAll"),k.innerHTML=x.manageStatesAllVisibleFromBackground)):(f._checkValue=2,e.add(f,"manageStatesCheckboxSomeVisible"),k.innerHTML=x.manageStatesSomeVisibleSomeHidden)}}},onOk:function(){if(this.anyCheckBoxChanges){var a=this._getContext();if(a){for(var b,d=this._getAllEffectedWidgets(),c=0;c<this._states.length;c++){var f=this._states[c];if(f==p.NORMAL||"undefined"==f)f=void 0;var e=this._checkBoxes[c]._checkValue;
if(0===e||1===e)for(var g=0;g<d.length;g++){var h=d[g];b||(b=new r);b.add(new v(h,[{display:this._overrideDisplayValue[c]?this._overrideDisplayValue[c]:1==e?"":"none"}],f))}}b&&a.getCommandStack().execute(b)}}},onCancel:function(){this.onClose()},destroy:function(){this.inherited(arguments);for(var a=0;a<this._handlers.length;a++)this._handlers[a].remove();this._handlers=[]}})})},"davinci/ve/actions/NewWidgetsCurrentState":function(){define("dojo/_base/declare davinci/Runtime davinci/Workbench davinci/ve/States davinci/actions/Action davinci/workbench/Preferences".split(" "),
function(q,n,h,g,e,m){return q("davinci.ve.actions.NewWidgetsCurrentState",[e],{run:function(){var c;if(n.currentEditor&&n.currentEditor.currentEditor&&n.currentEditor.currentEditor.context){c=n.currentEditor.currentEditor.context;var e=h.getProject(),f=m.getPreferences("davinci.ve.editorPrefs",e);f.newWidgetsCurrentState=f.newWidgetsCurrentState?!1:!0;m.savePreferences("davinci.ve.editorPrefs",e,f);g.updateStateIcons(c)}}})})},"davinci/ve/actions/HighlightBaseWidgets":function(){define("dojo/_base/declare davinci/Runtime davinci/Workbench davinci/ve/States davinci/actions/Action davinci/workbench/Preferences".split(" "),
function(q,n,h,g,e,m){return q("davinci.ve.actions.HighlightBaseWidgets",[e],{run:function(){var c;if(n.currentEditor&&n.currentEditor.currentEditor&&n.currentEditor.currentEditor.context){c=n.currentEditor.currentEditor.context;var e=h.getProject(),f=m.getPreferences("davinci.ve.editorPrefs",e);f.highlightBaseWidgets=f.highlightBaseWidgets?!1:!0;m.savePreferences("davinci.ve.editorPrefs",e,f);c.updateFocusAll()}}})})},"davinci/ve/actions/ShowInOutline":function(){define(["dojo/_base/declare","davinci/Runtime",
"davinci/Workbench","davinci/ve/actions/ContextAction"],function(q,n,h,g){return q("davinci.ve.actions.ManageStates",[g],{run:function(){var e=n.currentEditor;e&&e.delegate.showInOutline()},isEnabled:function(e){e=this.fixupContext(e);var g=h.getOpenEditor();return g&&e?"davinci.ve.PageEditor"==g.declaredClass?0<e.getSelection().length:!1:!1},shouldShow:function(e){return(e=(e=this.fixupContext(e))?e.editor:null)&&"davinci.ve.PageEditor"==e.declaredClass}})})},"davinci/ve/PageEditor":function(){define("require dojo/_base/declare ../ui/ModelEditor dojo/dnd/Moveable ../Runtime ../commands/CommandStack ../html/ui/HTMLEditor ./VisualEditor ./VisualEditorOutline ./widget ./States ../XPathUtils ../html/HtmlFileXPathAdapter ./utils/GeomUtils davinci/model/Factory xide/mixins/EventedMixin xide/mixins/ReloadMixin xide/utils xide/types xide/factory xideve/views/BlocksFileEditor xide/widgets/_Widget xide/views/_LayoutMixin xdocker/Docker2 xdocker/types wcDocker/iframe".split(" "),
function(q,n,h,g,e,m,c,k,f,d,b,a,p,r,v,w,x,B,z,u,y,A,C,F,E){n=n("davinci.ve.PageEditor",[h,A,w,x,C],{_latestSourceMode:"source",_latestLayoutMode:"flow",item:null,delegate:null,template:null,bottomTabContainer:null,textEditorPane:null,didBlockViews:!1,_propCP:null,createTab:function(a,b){var d=z.DOCKER;return this._docker.addTab(a||"DefaultTab",B.mixin({icon:!1,closeable:!0,moveable:!0,tabOrientation:d.TAB.TOP,location:d.DOCK.STACKED},b))},createLayout:function(){},constructor:function(a,b,d,c,f,
e){function g(a){setTimeout(function(){var a=h.getContext();a&&a.frameNode&&$(a.frameNode).css("pointer-events","initial")},a||4E3)}b=z.DOCKER;this.item=d;this.template=f;var h=this;this._commandStack=new m(this);this.savePoint=0;this._docker=F.createDefault(a,{});this.domNode=this._docker.$container[0];this._designCP=this.createTab(null,{title:"Design",icon:"fa-eye"});this._docker.on(z.DOCKER.EVENT.BEGIN_RESIZE,function(a){(a=h.getContext())&&a.frameNode&&$(a.frameNode).css("pointer-events","none");
g()});this._docker.on(z.DOCKER.EVENT.MOVE_STARTED,function(a){(a=h.getContext())&&a.frameNode&&$(a.frameNode).css("pointer-events","none");g()});this._docker.on(z.DOCKER.EVENT.MOVE_ENDED,function(a){g(1)});this._docker.on(z.DOCKER.EVENT.END_RESIZE,function(a){g(1)});this._docker.on(z.DOCKER.EVENT.BEGIN_FLOAT_RESIZE,function(a){a=h.getContext();$(a.frameNode).css("pointer-events","none");g()});this._docker.on(z.DOCKER.EVENT.END_FLOAT_RESIZE,function(a){g(1)});this._designCP.$container[0].domNode=this._designCP.$container[0];
this._designCP.domNode=this._designCP.$container[0];this._designCP.minSize(400,400);this.currentEditor=this.visualEditor=new k(this._designCP.$container[0],this,this.template);this.currentEditor._commandStack=this._commandStack;this.initReload();try{this._propCP=this.createTab(null,{title:"Props",icon:"fa-cogs",tabOrientation:b.TAB.TOP,location:b.TAB.RIGHT,target:this._designCP});this._propCP.maxSize(400);this._propCP.minSize(350);this._propCP.closeable(!1);a=null;e.length?this._srcCP=a=this.createTab(null,
{title:"HTML",icon:"fa-code",tabOrientation:b.TAB.TOP,location:b.TAB.BOTTOM}):console.error("have no editors, ");e=null;try{e=this.htmlEditor=c(a)}catch(M){debugger}this.model=e.model;e._on(z.EVENTS.ON_FILE_CONTENT_CHANGED,function(a){h.delegate.onEditorContentChanged(a)});this._displayMode="design";this._connect(this.visualEditor,"onContentChange","_visualChanged");this.subscribe("/davinci/ui/styleValuesChange",this._stylePropertiesChange);this.subscribe("/davinci/ui/widgetSelected",this._widgetSelectionChange);
this.subscribe("/davinci/ui/selectionChanged",this._modelSelectionChange);this.subscribe("/davinci/ui/editorSelected",this._editorSelected.bind(this));this.subscribe("/davinci/ui/context/loaded",this._contextLoaded.bind(this));this.subscribe("/davinci/ui/deviceChanged",this._deviceChanged.bind(this));this._designCP.getSplitter().pos(.5);setTimeout(function(){h._srcCP.getSplitter().pos(.5);h._propCP.maxSize(500)},1500);this.resize()}catch(M){this.visualEditor._connectCallback(M),console.error("page editor crash : "+
M)}this.add(this._docker)},getPropertyPane:function(){return this._propCP},getDesignPane:function(){return this._designCP},getSourcePane:function(){return this._srcCP},getVisualEditor:function(){return this.visualEditor},getBlocksPane:function(){return this._blocksTab},onSceneBlocksLoaded:function(a,b){if(0!=b.showBlocks&&!this.didBlockViews){this.didBlockViews=!0;var d=a.blockScopes;a=a.ctx;var c=z.DOCKER;this._blocksTab=this.createTab(null,{title:"Blocks",icon:"fa-eye",target:this._srcCP,tabOrientation:c.TAB.TOP,
location:c.DOCK.STACKED});d=d[0];c=this._blocksTab;a=B.addWidget(y,{style:"height:inherit;width:inherit;padding:0px;",ctx:a,pageEditor:this,visualEditor:b,editorContext:this.getContext(),item:{path:d.path,mount:d.mount}},this,c,!0);a.initWithScope(d);c.add(a);this._blockEditor=a;(b=b.getItem())&&this._blockEditor._widgetSelectionChanged({selection:[b]})}},getBlockEditor:function(){return this._blockEditor},setRootElement:function(a){this._rootElement=a},supports:function(a){return a.match(/^palette|properties|style|states|inline-style|MultiPropTarget|propsect_common|propsect_widgetSpecific|propsect_events|propsect_layout|propsect_paddingMargins|propsect_background|propsect_border|propsect_fontsAndText|propsect_shapesSVG$/)},
focus:function(){},_editorSelected:function(a){var b=this.getContext();b&&(this==a.oldEditor&&b.hideFocusAll(),a.editor&&a.editor.editorContainer&&("davinci.ve.PageEditor"==a.editor.declaredClass||"davinci.ve.themeEditor.ThemeEditor"==a.editor.declaredClass)&&this==a.editor&&(a=b.getFlowLayout(),this._updateLayoutDropDownButton(a?"flow":"absolute"),b.clearCachedWidgetBounds()))},_contextLoaded:function(){},_deviceChanged:function(){if(e.currentEditor==this&&this.editorContainer){var a=this.getContext();
a&&a.updateFocusAll&&setTimeout(function(){a.updateFocusAll()},1E3)}},_updateLayoutDropDownButton:function(a){(a=dojo.query(".maqLayoutDropDownButton"))&&a[0]&&dijit.byNode(a[0])},_selectLayout:function(a){this._latestLayoutMode=a;q(["davinci/actions/SelectLayoutAction"],function(b){b=new b;b._changeLayoutCommand(a)});this._updateLayoutDropDownButton(a)},selectLayoutFlow:function(){this._selectLayout("flow")},selectLayoutAbsolute:function(){this._selectLayout("absolute")},getDisplayMode:function(){return this._displayMode},
getSourceDisplayMode:function(){return this._latestSourceMode},_switchDisplayModeSource:function(a){this._latestSourceMode=a;this.switchDisplayMode(a)},switchDisplayModeSource:function(){this._switchDisplayModeSource("source")},switchDisplayModeSplitVertical:function(){this._switchDisplayModeSource("splitVertical")},switchDisplayModeSplitHorizontal:function(){this._switchDisplayModeSource("splitHorizontal")},switchDisplayModeSourceLatest:function(){this.switchDisplayMode(this._latestSourceMode)},
switchDisplayModeDesign:function(){this.switchDisplayMode("design")},switchDisplayMode:function(a){},hidePropertyPane:function(a){this.getPropertyPane()},_modelSelectionChange:function(a){if("source"!=this._displayMode&&q("davinci/Runtime").currentEditor===this&&(this._selectionCssRules=null,a.length&&(a=a[0].model)&&"HTMLElement"==a.elementType&&(a=a.getAttribute("id"))&&"source"!=this._displayMode)){a=d.byId(a,this.visualEditor.context.getDocument());var b=r.getMarginBoxPageCoords(a.domNode);this.getContext().getGlobal().scroll(b.l,
b.t);this.visualEditor.context.select(a)}},_widgetSelectionChange:function(a){!0===a.isFake||!this.visualEditor.context||a&&a.length&&a[0]._edit_context!=this.visualEditor.context||(a=this.visualEditor.context.getSelection())&&a.length&&"design"!=this._displayMode&&this.htmlEditor.selectModel([{model:a[0]._srcElement}])},_stylePropertiesChange:function(a){if(!(a&&a.cascade&&a.cascade._widget&&1==a.cascade._widget.isFake)){this.visualEditor._stylePropertiesChange(a);var b=this.visualEditor.context.getSelection();
if(b&&b[0]&&(b=B.getNode(b[0]))&&b.onChanged)b.onChanged();a=a.cascade._topWidgetDom;$(a).attr("style");this.getContext().updateBackground(a)}},_setDirty:function(){this.setDirty(!0)},setDirty:function(a){if(this.isDirty=a)this.lastModifiedTime=Date.now();this.editorContainer&&this.editorContainer.setDirty(a)},_visualChanged:function(a){this.delegate.shouldUpdateTextEditor()&&(a||this._setDirty(),this.htmlEditor.set("value",this.model.getText(),!0),this.getContext().visualEditorChanged())},_srcChanged:function(){dojo.withDoc(window.document,
function(){this.htmlEditor.isTyping&&(this.visualEditor.skipSave=!0);var a=this.visualEditor.context,b=a&&this._getStatesScenes(a);this.visualEditor.setContent(this.fileName,this.htmlEditor.model);this.editorContainer.updateToolbars();dojo.publish("/davinci/ui/context/pagerebuilt",[a]);b&&this._setStatesScenes(a,b);delete this.visualEditor.skipSave;this._setDirty()},this)},_getStatesScenes:function(a){return[]},_setStatesScenes:function(a,b){},getContext:function(){return this.visualEditor.context},
getOutline:function(){this.outline||(this.outline=new f(this));return this.outline},getPropertiesView:function(){return this.currentEditor.getPropertiesView()},setContent:function(a,b,d){this.fileName=a;this.htmlEditor.setContent(a,b);this.visualEditor.setContent(a,this.htmlEditor.model,d);this._connect(this.htmlEditor.model,"onChange","_themeChange")},_themeChange:function(a){a&&"CSSRule"===a.elementType&&(this.setDirty(!0),this.visualEditor.context.hotModifyCssRule(a))},getDefaultContent:function(){this._isNewFile=
!0;return this.visualEditor.getDefaultContent()},selectModel:function(a,b){this.publishingSelect||b&&this!=b||(b=a&&a[0])&&(b.elementType?this.htmlEditor.selectModel(a):b.model&&b.model.isWidget&&this.visualEditor.context.select(b.model,b.add))},save:function(a){if(this.delegate&&this.delegate.save){var b=this.visualEditor.context.getModel(),d=b.getText();this.delegate.save(this,this.visualEditor,b,d)}else this.savePoint=this._commandStack.getUndoCount(),(b=this.visualEditor.save(a))&&b.then&&b.then(function(b){this.isDirty=
a;this.editorContainer&&this.editorContainer.domNode&&this.editorContainer.setDirty(a)}.bind(this),function(a){})},removeWorkingCopy:function(){},previewInBrowser:function(){this.visualEditor.previewInBrowser()},destroy:function(){this.inherited(arguments);this.visualEditor.destroy();this.htmlEditor.destroy();B.destroy(this.bottomTabContainer)},getText:function(){return this.htmlEditor.getText()},onResize:function(){for(var a=this.getContext(),b=a.getSelection(),d=0;d<b.length;d++)a.select(b[d],0!=
d)},handleKeyEvent:function(a){},getFocusContainerBounds:function(){if("source"==this._displayMode)return{l:0,t:0,w:0,h:0};var a=r.getBorderBoxPageCoords(this._designCP.domNode);a.l-=8;a.t-=8;"none"==(this.visualEditor&&this.visualEditor.getDevice?this.visualEditor.getDevice():"none")?(a.w+="splitVertical"==this._displayMode?8:16,a.h+="splitHorizontal"==this._displayMode?8:16):(a.w+=8,a.h+=8);return a},getCommandStack:function(){return this.getContext().getCommandStack()}});n.__test="asd2f";return n})},
"davinci/ui/ModelEditor":function(){define(["dojo/_base/declare","../Runtime","./TextEditor","../commands/SourceChangeCommand"],function(q,n,h,g){return q(h,{constructor:function(e,g){this.subscribe("/davinci/ui/selectionChanged",this.selectModel)},colorize:function(e){return null},setContent:function(e,g){this.inherited(arguments);this.model.fileName=e;this.model.setText(g)},getHoverText:function(e,g){e=this.convertMouseToLine(e,g);return this.model.findChildAtPosition({startOffset:e.row,endOffset:e.col}).getLabel()},
handleChange:function(e){this.inherited(arguments);var h=this.model.getText(),c=n.currentEditor;c&&c.getCommandStack?(c=c.getCommandStack(),h=new g({model:this.model,oldText:h,newText:e}),c.execute(h)):(this.model.setText(e),dojo.publish("/davinci/ui/modelChanged",[{newModel:this.model}]))},selectModel:function(e,g){this.publishingSelect||g&&this!=g||!e.length||!e[0].model||(e=e[0].model,e.elementType&&(e=this.model.mapPositions(e),this.select(e)))},selectionChange:function(e){var g=this.model.mapPositions(this.model),
g=this.model.endOffset-g.endOffset,g=this.model.findChildAtPosition({startOffset:e.startOffset+g,endOffset:e.endOffset+g-1});e.model=g;if(g!=this._selectedModel)try{this.publishingSelect=!0,dojo.publish("/davinci/ui/selectionChanged",[[e],this])}finally{this.publishingSelect=!1}this._selectedModel=g},getSyntaxPositions:function(e,g){this.model.setText(e);if(this.model.getSyntaxPositions)return this.model.getSyntaxPositions(g).sort(function(c,e){return c.line!=e.line?c.line-e.line:c.col-e.col})},save:function(){this.model.setText(this.getText());
this.inherited(arguments)},getErrors:function(){return this.model.errors||[]}})})},"davinci/ui/TextEditor":function(){define(["dojo/_base/declare","./Editor","../Runtime"],function(q,n,h){return q(n,{constructor:function(g,e){this.subscriptions=[];this._handles=[]},isActiveEditor:function(){return h.currentEditor==this},handleChange:function(g){this.editorContainer&&this.editorContainer.setDirty(!0);this.isDirty=!0;this.lastModifiedTime=Date.now()},_onKey:function(g){davinci.Workbench.currentContext=
this.editorID;return davinci.Workbench.handleKey(g)},subscribe:function(g,e){this.subscriptions.push(dojo.subscribe(g,this,e))},destroy:function(){this.inherited(arguments);this.subscriptions.forEach(dojo.unsubscribe);this._handles.forEach(dojo.disconnect)},getDefaultContent:function(){return null},getErrors:function(){return[]},save:function(g){var e=this.getText();if(this.resourceFile){this.resourceFile.clearMarkers();for(var h=this.getErrors(),c=0;c<h.length;c++){var k;switch(h[c].id){case "(error)":k=
"error";break;case "(warning)":k="warning"}k&&this.resourceFile.addMarker(k,h[c].line+1,h[c].reason)}this.resourceFile.setContents(e,g);this.editorContainer&&this.editorContainer.setDirty(g);this.isDirty=!1;this.lastModifiedTime=0}},supports:function(g){return!1},_connect:function(g,e,h){this._handles.push(dojo.connect(g,e,this,h))}})})},"davinci/ui/Editor":function(){define(["../commands/CommandStack","dojo/_base/declare"],function(q,n,h){var g=function(e){this._progSelect||this.selectionChange({startOffset:e.newValue.start,
endOffset:e.newValue.end})};return n(null,{constructor:function(e,g,c){this.contentDiv=e;this.commandStack=new q;this._existWhenVisible=c;this._isVisible=!c},setContent:function(e,g){this.editor||this._existWhenVisible&&!this._isVisible||this._createEditor();this._textModel||(this._textModel=this.editor?this.editor.getModel():new mProjectionTextModel.ProjectionTextModel(new mTextModel.TextModel));this.fileName=e;this.setValue(g,!0);this._textModel&&(dojo.disconnect(this._textModelConnection),this._textModelConnection=
dojo.connect(this._textModel,"onChanged",this,onTextChanged))},setVisible:function(e){e!=this._isVisible&&this._existWhenVisible&&(e&&this._existWhenVisible?(this._createEditor(),this._updateStyler()):(this.editor.getTextView().removeEventListener("Selection",dojo.hitch(this,g)),delete this.editor));this._isVisible=e},setValue:function(e,g){this._dontNotifyChange=g;this.editor?this.editor.setText(e):this._textModel.setText(e)},_createEditor:function(){},_updateStyler:function(){},selectionChange:function(e){},
destroy:function(){},select:function(e){if(this.editor)try{this._progSelect=!0,this.editor.setSelection(e.endOffset,e.startOffset)}finally{delete this._progSelect}},getText:function(){return this._textModel.getText(0)},getOnUnloadWarningMessage:function(){return null}})})},"davinci/commands/SourceChangeCommand":function(){define(["dojo/_base/declare","davinci/Runtime"],function(q,n){return q("davinci.commands.SourceChangeCommand",null,{name:"SourceChange",constructor:function(h){this._model=h.model;
this._oldText=h.oldText;this._newText=h.newText},incrementalUpdate:function(h){this._newText=h.newText},execute:function(){this._model.setText(this._newText);dojo.publish("/davinci/ui/modelChanged",[{newModel:this._model}]);var h=n.currentEditor;"davinci.ve.PageEditor"==h.declaredClass&&h.handleChange&&require(["davinci/ve/PageEditor"],function(g){g.prototype._srcChanged.call(h,this._newText)}.bind(this));if(!this.established)return this.established=!0},undo:function(){this._model.setText(this._oldText);
dojo.publish("/davinci/ui/modelChanged",[{newModel:this._model}]);var h=n.currentEditor;"davinci.ve.PageEditor"==h.declaredClass&&h.handleChange&&require(["davinci/ve/PageEditor"],function(g){g.prototype._srcChanged.call(h,this._oldText)}.bind(this))}})})},"dojo/dnd/Moveable":function(){define("../_base/array ../_base/declare ../_base/lang ../dom ../dom-class ../Evented ../on ../topic ../touch ./common ./Mover ../_base/window".split(" "),function(q,n,h,g,e,m,c,k,f,d,b,a){return n("dojo.dnd.Moveable",
[m],{handle:"",delay:0,skip:!1,constructor:function(a,d){this.node=g.byId(a);d||(d={});this.handle=d.handle?g.byId(d.handle):null;this.handle||(this.handle=this.node);this.delay=0<d.delay?d.delay:0;this.skip=d.skip;this.mover=d.mover?d.mover:b;this.events=[c(this.handle,f.press,h.hitch(this,"onMouseDown")),c(this.handle,"dragstart",h.hitch(this,"onSelectStart")),c(this.handle,"selectstart",h.hitch(this,"onSelectStart"))]},markupFactory:function(a,b,d){return new d(b,a)},destroy:function(){q.forEach(this.events,
function(a){a.remove()});this.events=this.node=this.handle=null},onMouseDown:function(a){if(!this.skip||!d.isFormElement(a)){if(this.delay)this.events.push(c(this.handle,f.move,h.hitch(this,"onMouseMove")),c(this.handle.ownerDocument,f.release,h.hitch(this,"onMouseUp"))),this._lastX=a.pageX,this._lastY=a.pageY;else this.onDragDetected(a);a.stopPropagation();a.preventDefault()}},onMouseMove:function(a){if(Math.abs(a.pageX-this._lastX)>this.delay||Math.abs(a.pageY-this._lastY)>this.delay)this.onMouseUp(a),
this.onDragDetected(a);a.stopPropagation();a.preventDefault()},onMouseUp:function(a){for(var b=0;2>b;++b)this.events.pop().remove();a.stopPropagation();a.preventDefault()},onSelectStart:function(a){this.skip&&d.isFormElement(a)||(a.stopPropagation(),a.preventDefault())},onDragDetected:function(a){new this.mover(this.node,a,this)},onMoveStart:function(b){k.publish("/dnd/move/start",b);e.add(a.body(),"dojoMove");e.add(this.node,"dojoMoveItem")},onMoveStop:function(b){k.publish("/dnd/move/stop",b);e.remove(a.body(),
"dojoMove");e.remove(this.node,"dojoMoveItem")},onFirstMove:function(){},onMove:function(a,b){this.onMoving(a,b);var d=a.node.style;d.left=b.l+"px";d.top=b.t+"px";this.onMoved(a,b)},onMoving:function(){},onMoved:function(){}})})},"davinci/html/ui/HTMLEditor":function(){define(["dojo/_base/declare","davinci/ui/ModelEditor","davinci/model/Factory","davinci/html/ui/HTMLOutline"],function(q,n,h,g){return q("davinci.html.ui.HTMLEditor",n,{constructor:function(e,g){this.model=this.htmlFile=h.getModel({url:g});
this._handle=dojo.connect(this.htmlFile.getDocumentElement(),"onkeydown",this,"onKeyDown")},destroy:function(){this.htmlFile.close();dojo.disconnect(this._handle);this.inherited(arguments)},getOutline:function(){this.outline||(this.outline=new g(this.model));return this.outline},getDefaultContent:function(){return"\x3chtml\x3e\n \x3chead\x3e\x3c/head\x3e\n \x3cbody\x3e\x3c/body\x3e\n\x3c/html\x3e"},onKeyDown:function(e){}})})},"davinci/html/ui/HTMLOutline":function(){define(["dojo/_base/declare",
"davinci/html/ui/HTMLOutlineModel"],function(q,n){return q("davinci/html/ui/HTMLOutline",null,{constructor:function(h){this._htmlModel=h},getModel:function(){return this._model=new n(this._htmlModel)}})})},"davinci/html/ui/HTMLOutlineModel":function(){define(["dojo/_base/declare"],function(q){return q("davinci.html.ui.HTMLOutlineModel",null,{constructor:function(n){this.root=n;this.subscription=dojo.subscribe("/davinci/ui/modelChanged",this,this._modelChanged)},getRoot:function(n,h){n(this.root)},
getIdentity:function(n){return n.getID()},getLabel:function(n){return n.getLabel().replace("\x3c","\x26lt")},_getChildren:function(n){var h=[];"HTMLFile"!=n.elementType&&"HTMLElement"!=n.elementType||dojo.forEach(n.children,function(g){"HTMLElement"==g.elementType&&h.push(g)});return h},mayHaveChildren:function(n){return 0<n.children.length},getChildren:function(n,h,g){h(this._getChildren(n))},_modelChanged:function(){this.onChildrenChange(this.root,this._getChildren(this.root))},destroy:function(){dojo.unsubscribe(this.subscription)}})})},
"davinci/ve/VisualEditor":function(){define("dojo/_base/declare dojo/_base/lang dojo/_base/connect dojo/dom-class dojo/dom-construct dojo/promise/all dojo/text!./template.html ../Runtime ../Workbench ../model/Path ./metadata ./Context preview/silhouetteiframe preview/loadIndicator ../workbench/Preferences ./widget ../XPathUtils ../html/HtmlFileXPathAdapter ./utils/GeomUtils xide/utils xide/registry".split(" "),function(q,n,h,g,e,m,c,k,f,d,b,a,p,r,v,w,x,B,z,u,y){return q("davinci.ve.VisualEditor",
null,{deviceName:"none",_orientation:"portrait",_subscriptions:[],delite:!1,context:null,getContext:function(){return this.context},template:{},constructor2:function(a,d,c){this._pageEditor=d;this.template=c||{};this.contentPane=dijit.getEnclosingWidget(a)||y.byId(a.id);this.loadingDiv=e.create("div",{className:"loading",innerHTML:dojo.replace("\x3ctable\x3e\x3ctr\x3e\x3ctd\x3e\x3cspan\x3e\x26nbsp;\x26nbsp;\x26nbsp;\x26nbsp;\x26nbsp;\x3c/span\x3e\x26nbsp;{0}\x3c/td\x3e\x3c/tr\x3e\x3c/table\x3e",["Loading..."])},
this.contentPane.domNode.parentNode,"first");g.add(this.contentPane.domNode,"fullPane");a=e.create("div",{className:"silhouette_div_container"},this.contentPane.domNode);e.create("span",{className:"silhouetteiframe_object_container"},a);this.silhouetteiframe=new p({rootNode:a,margin:20});var f=this;this.contentPane.connect(this.contentPane,"resize",function(a){var b=dojo.query(".designCP iframe",this._pageEditor.domNode)[0];b&&b.contentDocument&&b.contentDocument.body&&(f._resizeBody(b.contentDocument.body,
a),setTimeout(function(){var a=f.getContext();a.clearCachedWidgetBounds();a.updateFocusAll();f._registerScrollHandlers()},100))}.bind(this));this._pageEditor.deferreds=m(b.getDeferreds());this._subscriptions.push(dojo.subscribe("/davinci/ui/editorSelected",this._editorSelected.bind(this)));this._subscriptions.push(dojo.subscribe("/davinci/ui/context/loaded",this._contextLoaded.bind(this)))},_setContentRaw:function(b,c,e){this.fileName=b;this.basePath=new d(b);if(this.initialSet)this.context.setSource(c,
this.context._restoreStates,this.context);else{var f=k.getUserWorkspaceUrl();0==b.indexOf("./")&&(b=b.substring(2,b.length));b=f+b;b=f;this._handles=[];f=dojo.query(".silhouette_div_container",this.contentPane.containerNode)[0];$(this.contentPane.containerNode).find(".silhouette_div_container");f={editor:this._pageEditor,visualEditor:this,containerNode:f,model:c,template:this.template,baseURL:b,iframeattrs:{"class":"silhouetteiframe_iframe"},ctx:this._pageEditor.ctx};this.context=this.template&&this.template.contextClass?
new (u.getObject(this.template.contextClass))(f):new a(f);this.context._commandStack=this._commandStack;this._commandStack._context=this.context;try{this._handles.push(dojo.connect(this.context,"activate",this,this.update))}catch(D){debugger}this._handles.push(dojo.connect(this.context,"onContentChange",this,this.onContentChange));this._handles.push(dojo.connect(this.context,"onSelectionChange",this,this.onContentChange));this.title=dojo.doc.title;this.context._setSource(c,this._connectCallback,this,
e);this.context.getFlowLayout();this.initialSet=!0}},constructor:function(a,d,c){this._pageEditor=d;this.template=c||{};this.contentPane=dijit.getEnclosingWidget(a)||y.byId(a.id);a=this.contentPane.containerNode;this.loadingDiv=e.create("div",{className:"loading",innerHTML:dojo.replace("\x3ctable\x3e\x3ctr\x3e\x3ctd\x3e\x3cspan\x3e\x26nbsp;\x26nbsp;\x26nbsp;\x26nbsp;\x26nbsp;\x3c/span\x3e\x26nbsp;{0}\x3c/td\x3e\x3c/tr\x3e\x3c/table\x3e",["Loading..."])},a.parentNode,"first");g.add(a,"fullPane");a=
e.create("div",{className:"silhouette_div_container"},a);e.create("span",{className:"silhouetteiframe_object_container"},a);this.silhouetteiframe=new p({rootNode:a,margin:20});this._pageEditor.deferreds=m(b.getDeferreds());this._subscriptions.push(dojo.subscribe("/davinci/ui/editorSelected",this._editorSelected.bind(this)));this._subscriptions.push(dojo.subscribe("/davinci/ui/context/loaded",this._contextLoaded.bind(this)))},getDevice:function(){return this.deviceName},setDevice:function(a,b){this.deviceName=
a;var d=this.getContext();d.setMobileMeta(a);b||d.setMobileTheme(a);this.silhouetteiframe.setSVGFilename("none"==a?null:"app/preview/images/"+a+".svg");d.clearCachedWidgetBounds();dojo.publish("/davinci/ui/deviceChanged",[a]);dojo.publish("/davinci/ui/repositionFocusContainer",[])},toggleOrientation:function(){"none"!=this.deviceName&&this.setOrientation("landscape"==this._orientation?"portrait":"landscape");this.getContext().clearCachedWidgetBounds()},getOrientation:function(a){return this._orientation},
setOrientation:function(a){if("none"!=this.deviceName&&this._orientation!=a){this._orientation=a;a=f.getOpenEditor();a.editorContainer&&a.editorContainer.updateToolbars&&a.editorContainer.updateToolbars();var b=this.getContext();b.setMobileOrientation(this._orientation);this.silhouetteiframe.setOrientation(this._orientation);a._visualChanged();setTimeout(function(){b.clearCachedWidgetBounds();b.updateFocusAll()},100)}},_objectPropertiesChange:function(a){if(this.isActiveEditor()){var b=this.getContext(),
d=a.command;b.getCommandStack().execute(a.compoundCommand||d);d._newId?(a=w.byId(d._newId,b.getDocument()),b.select(a)):(d=b.getSelection(),a=d.length?d[d.length-1]:void 0,1<d.length&&b.select(a));this._srcChanged()}},isActiveEditor:function(){var a=k.currentEditor;return a&&"davinci.ve.PageEditor"==a.declaredClass&&a.visualEditor==this},_stylePropertiesChange:function(a){if(this.isActiveEditor()){var b=this.getContext().getCommandForStyleChange(a);b&&(this.getContext().getCommandStack().execute(b),
b._newId&&(b=w.byId(b._newId,context.getDocument()),this.context.select(b)),this._srcChanged(),dojo.publish("/davinci/ui/widgetValuesChanged",[a]))}},_srcChanged:function(){this.isDirty=!0},getTemplate:function(){return c},destroy:function(){this._handles&&(this._focusPopup&&this._focusPopup.destroyRecursive(),delete this._focusPopup,this.context.destroy(),this._handles.forEach(dojo.disconnect),this._iframeScrollHandler&&(dojo.disconnect(this._iframeScrollHandler),delete this._iframeScrollHandler),
this._designCPScrollHandler&&(dojo.disconnect(this._designCPScrollHandler),delete this._designCPScrollHandler),this._subscriptions.forEach(dojo.unsubscribe),this._subscriptions=[])},setContent:function(a,b,d){this._onloadMessages=[];this._setContent(a,b,d)},saveAs:function(a,b,d){this._setContent(a,d)},_setContent:function(a,b,d){this._setContentRaw(a,b,d)},_connectCallback:function(a){try{if(a instanceof Error)throw a;var b=this.context,d;this.savePoint=0;try{b.activate2()}catch(E){console.error("crash in context activation! : "+
E),logError(E,"crash in context activation! : ")}d=f.createPopup({partID:"davinci.ve.visualEditor",domNode:b.getContainerNode(),keysDomNode:b.getDocument(),context:b});b.getDocument();d&&(d.adjustPosition=function(a){var d=dojo.position(b.frameNode);dojo.withDoc(b.getDocument(),function(){var a=dojo.docScroll();d.x-=a.x;d.y-=a.y});return d});this._focusPopup=f.createPopup({partID:"davinci.ve.visualEditor",domNode:b.getFocusContainer(),keysDomNode:b.getDocument(),context:b});b.getTopWidgets().forEach(function(a){a.resize&&
a.resize()});b.anyDojoxMobileWidgets=void 0;dojo.publish("/davinci/ui/context/pagebuilt",[b])}catch(E){a=E}finally{a.errorMessage?(this.loadingDiv.innerHTML=a.errorMessage||"(unknown)",console.error("error! ",a.errorMessage)):a instanceof Error?(this.loadingDiv.parentNode&&this.loadingDiv.parentNode.removeChild(this.loadingDiv),delete this.loadingDiv,dojo.publish("/davinci/ui/context/pagebuilt",[b]),console.error("error! ",a)):(this.loadingDiv.parentNode&&this.loadingDiv.parentNode.removeChild(this.loadingDiv),
delete this.loadingDiv)}},getSelectedWidget:function(){var a=this.getContext(),b=a.getSelection(),d=b.length?b[b.length-1]:void 0;1<b.length&&a.select(d);return d},getSelectedSubWidget:function(){return this._selectedSubWidget},save:function(a){if(this.context){var b=[],d=this.context.getModel();d.getText();d.setDirty(!0);d.visit({visit:function(d){"HTMLFile"!=d.elementType&&"CSSFile"!=d.elementType||!d.isDirty()||b.push(d.save(a));return!1}});b=b.concat(this.getContext().saveDynamicCssFiles(this.context.cssFiles,
a));b.length?this.savePromise=m(b):delete this.savePromise;return this.savePromise}},removeWorkingCopy:function(){},getDefaultContent:function(){return this.getTemplate()},previewInBrowser:function(){var a=this.deviceName,b=f.getOpenEditor().resourceFile.getURL(),d=[];"none"!=a&&(d=["preview\x3d1","device\x3d"+encodeURIComponent(a),"file\x3d"+encodeURIComponent(b)],b=f.location(),b+="/maqetta/preview.html?","landscape"==this._orientation&&d.push("orientation\x3d"+this._orientation));this.context.getPreference("zazl")&&
d.push("zazl\x3dtrue");d.length&&(b+="?"+d.join("\x26"));a=function(){var a=window.open(b,"preview_"+b);r(a,k.location()+require.toUrl("dojox/image/resources/images/loading.gif"),"gray")};this.savePromise?this.savePromise.then(a):a()},refresh:function(){var a=this.context,b=x.getXPath(a.getSelection()[0]._srcElement,B);a.setSource(a.model);var b=a.model.evaluate(b).getAttribute("id"),d=w.byId(b,a.getDocument());setTimeout(function(){a.select(d)},0)},_contextLoaded:function(a){a==this.getContext()&&
this._registerScrollHandlers()},_editorSelected:function(a){var b=this.getContext(),b=b?b.getFocusContainer():null;a.oldEditor==this._pageEditor&&b&&this._focusPopup&&this._focusPopup.unBindDomNode(b);a.editor==this._pageEditor&&(this._registerScrollHandlers(),b&&this._focusPopup&&this._focusPopup.bindDomNode(b));if(b=document.getElementById("visualEditorBorder"))b.style.display=a.editor&&"davinci.ve.PageEditor"==a.editor.declaredClass?"block":"none"},_resizeBody:function(a,b){var d=z.getScrollLeft(a),
c=z.getScrollTop(a);a.style.width=0<d?b.w+d+"px":"100%";a.style.height=0<c?b.h+c+"px":"100%"},_scrollHandler:function(a){(a=dojo.query(".designCP iframe",this._pageEditor.domNode)[0])&&a.contentDocument&&a.contentDocument.body&&(this._resizeBody(a.contentDocument.body,{w:dojo.style(this.contentPane.domNode,"width"),h:dojo.style(this.contentPane.domNode,"height")}),setTimeout(function(){var a=this.getContext();a.clearCachedWidgetBounds();a.updateFocusAll()}.bind(this),100))},_registerScrollHandlers:function(){if(!this._iframeScrollHandler){var a=
dojo.query(".designCP iframe",this._pageEditor.domNode)[0];a&&a.contentDocument&&a.contentDocument.body&&(this._iframeScrollHandler=dojo.connect(a.contentDocument.body.ownerDocument,"onscroll",this,this._scrollHandler))}!this._designCPScrollHandler&&(a=dojo.query(".designCP",this._pageEditor.domNode)[0])&&(this._designCPScrollHandler=dojo.connect(a,"onscroll",this,this._scrollHandler))}})})},"davinci/ve/VisualEditorOutline":function(){define("dojo/_base/declare dojo/_base/connect ./commands/ReparentCommand ./commands/StyleCommand ./widget ./States ../Runtime xide/factory xide/types".split(" "),
function(q,n,h,g,e,m,c,k,f){var d=q(null,{toggleMode:!0,betweenThreshold:4,showRoot:!0,dndController:"dijit.tree.dndSource",onChange:function(b){},constructor:function(b){this._context=b;this._handles=[];this._connect("activate","_rebuild");this._connect("widgetChanged","_widgetChanged")},getRoot:function(b,a){b(this._context.rootWidget||{id:"myapp",label:"application"})},getLabel:function(b){if("myapp"==b.id)return this._context.model.fileName;var a="",d=this._getWidget(b);if("xblox/RunScript"===
b.type&&d)return(a=d.domNode)&&a.script?"XBlox::"+a.script:"XBlox::"+d.dijitWidget.targetEvent;if(d.isWidget)return a=e.getLabel(d);if(a=d.type){b=this.useRichTextLabel?"\x26lt;":"\x3c";var c=this.useRichTextLabel?"\x26gt;":"\x3e",a=0===a.indexOf("html.")?b+a.substring(5)+c:0===a.indexOf("OpenAjax.")?b+a.substring(9)+c:0<a.indexOf(".")?a.substring(a.lastIndexOf(".")+1):d.label||a;(d=e.byId(d.id,this._context.getDocument()))&&(d=d.getId())&&(a+=" id\x3d"+d);return a}},_getChildren:function(b){var a=
[];this._context.rootWidget||console.error("editor context has no root widget yet!");if(!this._context.rootWidget||!b||"state"==b.type||"html.stickynote"==b.type||"html.richtext"==b.type)return[];if("myapp"==b.id||b===this._context.rootNode)a=this._context.getTopWidgets();else{var d=this._getWidget(b);d&&d.getChildren&&(a=this._getWidget(b).getChildren())}return a.filter(function(a){return"xblox/RunScript"==a.type||"xblox/CSSState"==a.type||"xblox/StyleState"==a.type?!0:a&&a.getContext&&a.getContext()&&
!a.internal&&a._srcElement}).map(this._buildItem)},__getChildren:function(b){var a=[];b&&"dijit/form/Button"==b.type&&b.dijitWidget&&dojo.forEach(b.dijitWidget.domNode.children,function(b){(b=davinci.ve.widget.getWidget(b))&&"xblox/RunScript"==b.type&&a.push(b)});return a},mayHaveChildren:function(b){return(b=this._getWidget(b))&&b.type&&0===b.type.indexOf("OpenAjax.")?!1:0<this._getChildren(b).length},getIdentity:function(b){return b?b.id:null},getChildren:function(b,a,d){a(this._getChildren(b))},
put:function(b,a){b=this._getWidget(b);a=b.getParent();this.onChildrenChange(a,this._getChildren(a));return this.getIdentity(b)},add:function(b,a){(a=a||{}).overwrite=!1;return this.put(b,a)},onDelete:function(b){},remove:function(b){this.onDelete(b)},newItem:function(b,a){},pasteItem:function(b,a,d,c,f,e){b&&d&&a&&(d="myapp"==d.id?this._context.rootWidget:this._getWidget(d),a="myapp"==a.id?this._context.rootWidget:this._getWidget(a),b=this._getWidget(b),a!=d||c||dojo.indexOf(a.getChildren(),b)<f&&
f++,b=new h(b,d,f),this._context.getCommandStack().execute(b))},checkItemAcceptance:function(b,a,d){switch(d){case "before":case "after":return!0;default:return b=dijit.getEnclosingWidget(b).item,b=this.tree.model._getWidget(b),b.getContainerNode&&b.getContainerNode()||"myapp"==b.id}},onChildrenChange:function(b,a){},_rebuild:function(){if(!this._skipRefresh){var b=this._context.rootNode;if(b)this.onChildrenChange(this._buildItem(b),this._getChildren(b))}},_widgetChanged:function(b,a,d){try{b===this._context.WIDGET_ADDED?
this.add(a):b===this._context.WIDGET_REMOVED?this.remove(a):b===this._context.WIDGET_MODIFIED?(this.onChange(a),this.onChildrenChange(a,this._getChildren(a))):b===this._context.WIDGET_REPARENTED?(this.remove(a),this.put(a,{overwrite:!0,parent:d[1]})):b===this._context.WIDGET_ID_CHANGED&&(this.remove({id:d}),this.add(a))}catch(r){console.error("VisualEditorOutline._widgetChanged: e \x3d "+r)}k.publish(f.EVENTS.ON_WIDGET_CHANGED,{type:b,widget:a,args:d},this)},toggle:function(b,a,d){b=this._getWidget(b);
var c=b.getHelper(),f=!0;c&&c.onToggleVisibility&&(f=c.onToggleVisibility(b,a));return f?(this._toggle(b,a,d),!0):!1},_toggle:function(b,a,d){a=a?"none":"";var c;if(d=m.getFocus(b.domNode.ownerDocument.body))c=d.state;else{d=m.getStatesListCurrent(b.domNode);for(var f=0;f<d.length;f++)if(d[f]){c=d[f];break}}b=new g(b,[{display:a}],c);this._context.getCommandStack().execute(b)},shouldShowElement:function(b,a){return"toggleNode"==b?"states"!=a.type&&"myapp"!=a.id:!0},_getToggledItemsAttr:function(){var b=
[],a;for(a in this.toggledItems)b.push(a);return b},isToggleOn:function(b){b=this._getWidget(b);var a=b.getHelper();return a&&a.isToggleOn?a.isToggleOn(b):"none"===b.domNode.style.display},_getWidget:function(b){return b?e.byId(b.id):null},_buildItem:function(b){if(b)return{id:b.id,type:b.type}},_connect:function(b,a){this._handles.push(n.connect(this._context,b,this,a))},destroy:function(){this._handles.forEach(n.disconnect)}});return q("davinci.ve.VisualEditorOutline",null,{toolbarID:"davinci.ve.outline",
_outlineMode:"design",constructor:function(b){this._editor=b;this._context=b.visualEditor.context;this._handles=[];this._connect("onSelectionChange","onSelectionChange");this._connect("deselect","deselect");this._widgetModel=new d(this._context);n.subscribe("/maqetta/appstates/state/changed/end",this,function(a){if("davinci.themeEditor.ThemeEditor"!==("undefined"!==typeof davinci&&c.currentEditor&&c.currentEditor.declaredClass)&&this._tree&&(a=a&&a.node&&a.node._dvWidget))for(a=a.getChildren();a.length;){var b=
a.shift();if(b){var d="none"!==b.domNode.style.display;this._tree&&this._tree.toggleNode(b,!d);a=a.concat(b.getChildren())}}})},getActionsID:function(){if("design"===this._outlineMode)return"davinci.ve.VisualEditorOutline"},_connect:function(b,a){this._handles.push(n.connect(this._context,b,this,a))},switchDisplayMode:function(b){this._outlineMode=b;this._outlineView.createTree()},getModel:function(){switch(this._outlineMode){case "design":this._model=this._widgetModel;break;case "source":this._model=
this._srcModel}return this._model},getSelectedItem:function(){return this._tree&&this._tree._getSelectedItemAttr()},onSelectionChange:function(b,a){"design"==this._outlineMode&&(b=b||this._context.getSelection())&&this._tree&&this._tree.selectNode(b,a)},deselect:function(){this._tree&&this._tree&&this._tree.deselectAll()},getIconClass:function(b,a){return(b=b.type)?"xblox/RunScript"==b?"fa fa-play-circle-o":a?"fa fa-circle-thin":"fa fa-circle":a?"fa fa-circle-thin":"fa fa-circle"}})})},"davinci/html/ui/ImageViewer":function(){define([],
function(){var q=function(n){this.element=n};q.prototype={isReadOnly:!0,save:function(){},getDefaultContent:function(){},supports:function(n){return!1},setContent:function(n,h){this.fileName=n;this.element.innerHTML="\x3cdiv style\x3d'overflow:auto'\x3e\x3cimg src\x3d'"+encodeURI(this.resourceFile.getURL())+"'/\x3e\x3c/div\x3e";this.dirty=!1},destroy:function(){},getOnUnloadWarningMessage:function(){return null}};return q})},"davinci/ve/prefs/HTMLEditPreferences":function(){define("dojo/_base/declare dijit/layout/ContentPane dijit/_TemplatedMixin dijit/form/CheckBox dijit/form/TextBox dijit/form/Select davinci/lang/ve/common dojo/text!./HtmlEditPreferences.html".split(" "),
function(q,n,h,g,e,m,c,k){return q([n,h],{templateString:k,postMixInProperties:function(){this._loc=c},postCreate:function(){this._snap=new g({},this.snapNode);this._showPossibleParents=new g({},this.showPossibleParentsNode);this._cssOverrideWarn=new g({},this.cssOverrideWarn);this._absoluteWidgetsZindex=new e({},this.absoluteWidgetsZindex);this._zazl=new g({},this.zazl);this.containerNode||(this.containerNode=this.domNode)},getDefaults:function(){},setDefaults:function(){},doApply:function(){},getPreferences:function(){return{snap:this._snap.checked,
showPossibleParents:this._showPossibleParents.checked,cssOverrideWarn:this._cssOverrideWarn.checked,absoluteWidgetsZindex:this._absoluteWidgetsZindex.value,zazl:this._zazl.checked}},setPreferences:function(c){c=c||{};this._check(this._snap,!!c.snap);this._check(this._showPossibleParents,!!c.showPossibleParents);this._check(this._cssOverrideWarn,!!c.cssOverrideWarn);this._absoluteWidgetsZindex.set("value",c.absoluteWidgetsZindex);this._check(this._zazl,!!c.zazl)},_check:function(c,d){c.set("checked",
d)},save:function(c){davinci.ve._preferences=c}})})},"davinci/lang/ve/common":function(){define([],function(){return{search:"Search",filter:"Filter","new":"New",errorSavingFile:"Error saving file: ${0} details: ${1}",palette:"palette",closeAllEditors:"Close all tabs",undo:"Undo",redo:"Redo",copy:"Copy",paste:"Paste",cut:"Cut","delete":"Delete",surround:"Surround",properties:"Properties",styles:"Styles",events:"Events",preferences:"Preferences",addPane:"Add Pane",addColumn:"Add Column",addRow:"Add Row",
removeColumn:"Remove Column",removeRow:"Remove Row",joinColumn:"Join Column",joinRow:"Join Row",splitColumn:"Split Column",splitRow:"Split Row",alignLeft:"Align Left",alignRight:"Align Right",alignTop:"Align Top",alignBottom:"Align Bottom",show:"Show",hide:"Hide",addMenuItem:"Add Menu Item",addSubMenu:"Add Sub Menu",addMenuBarItem:"Add MenuBar Item",addPopupMenuBar:"Add Popup MenuBarItem",ok:"OK",cancel:"Cancel",page:"Page",title:"Title",metaInfo:"Meta Info",httpEquiv:"HTTP Equiv",style:"Style",theme:"Theme",
styleSheets:"Style Sheets",rules:"Rules",url:"URL",externalScripts:"External Scripts",modules:"Modules",name:"Name",value:"Value",add:"Add",remove:"Remove",staticOptions:"Static Options",axisOptions:"Axis Options",series:"Series",axis:"Axis",option:"Option",selected:"Selected",staticItems:"Static Items",dataStore:"Data Store",query:"Query",fields:"Fields",field:"Field",label:"Label",width:"Width",edit:"Edit",key:"Key",rootId:"Root ID",rootLabel:"Root Label",childrenAttrs:"Children Attributes",items:"Items",
type:"Type",widget:"Widget",position:"Position",size:"Size",layout:"Layout",visual:"Visual",text:"Text",border:"Border",table:"Table",list:"List",aural:"Aural",others:"Others",onLoad:"Load",onUnload:"Unload",script:"Script",methodCall:"Method Call",serviceCall:"Service Call",object:"Object",method:"Method",parameters:"Parameters",result:"Result",service:"Service",content:"Content",source:"Source",target:"Target",property:"Property",flowLayout:"Flow Layout",snapToNearestWidget:"Snap to nearest widget",
showPossibleParents:"When dragging, show possible parents",warnOnCSSOverride:"Warn on CSS Override",absoluteWidgetsZindex:"z-index for sketch mode",widgetPaletteLayout:"In Palette, display widgets as",widgetPaletteShow_Icons:"icons",widgetPaletteShow_List:"list",liveEdit:"Live Edit",zazl:"Enable \x3ca href\x3d'http://zazl.org' target\x3d'_blank'\x3eZazl Optimizer\x3c/a\x3e",selectorPrefix:"Selector Prefix",component:"Component",alternates:"Alternates",alternateWidgets:"Alternate widgets:",howToChooseAlternate:"To choose alternate widget, click-select current widget, then click on up arrow icon.",
summary:"Summary:",description:"Description:",showSuggestedWidgets:"Suggested Widgets",showAllWidgets:"All Widgets",MoreIconTitleString:"Click here to see alternative similar widgets",HelpIconTitleString:"Click here to see descriptive info about this widget",__dummy__:""}})},"davinci/commands/OrderedCompoundCommand":function(){define(["dojo/_base/declare","davinci/commands/CompoundCommand"],function(q,n){return q("davinci.commands.OrderedCompoundCommand",n,{undo:function(){if(this._commands)for(var h=
0;h<this._commands.length;h++)this._commands[h].undo()}})})},"davinci/version":function(){define([],"10")},"davinci/model/resource/Folder":function(){define(["dojo/_base/declare","dojo/_base/xhr","davinci/Runtime","davinci/model/resource/Resource","davinci/model/resource/File"],function(q,n,h,g,e){var m=q("davinci.model.resource.Folder",g,{serviceClass:"XIDE_Directory_Service",workspaceMount:"/ws/",constructor:function(c,e){this.elementType="Folder";this.name=c;this.parent=e},reload:function(){this._isLoaded=
!1},createResource:function(c,g,f,d){var b;null!=c?b=g?new m(c,this):new e(c,this):(b=this,g="Folder"==this.elementType);var a=this;if(!f){f=""+this.getPath();"."==f&&(f=""+this.workspaceMount);f=f.replace("./",this.workspaceMount);f=this.serviceClass;g=g?"mkDir":"mkFile";if(!this.serviceObject[f][g])return console.error("_createResource : server doesnt support :"+g),this;this.serviceObject[f][g](this.workspaceMount,b.getPath()).then(function(f){if(!0===f&&null!=c||"The file already exists"===f)return a.children.push(b),
delete b.libraryId,delete b.libVersion,delete b._readOnly,dojo.publish("/davinci/resource/resourceChanged",["created",b]),d&&d(b),b;if("OK"!=f)throw"Folder.createResource failed: name\x3d"+c+"response\x3d"+f;delete b.libraryId;delete b.libVersion;delete b._readOnly;d(a);if(!d)debugger})}},getChildren2:function(c,e){if(this._isLoaded)c(this.children);else if(this._loadingCallbacks)this._loadingCallbacks.push(c);else{this._loadingCallbacks=[];this._loadingCallbacks.push(c);c=""+this.getPath();"."==
c&&(c="/ws/");var f=this.serviceClass;if(!this.serviceObject)debugger;if(!this.serviceObject[f])debugger;this.serviceObject.sync=!0;this.serviceObject[f].ls(this.workspaceMount,c).then(function(d){this.setChildrenSync(d);dojo.forEach(this._loadingCallbacks,function(b){b(this.children)},this);delete this._loadingCallbacks}.bind(this),e)}},getChildren:function(c,e){if(this._isLoaded)c.call(null,this.children);else if(this._loading)this._loading.then(function(){c.call(null,this.children)}.bind(this),
e);else{console.error("list files : "+this.getPath());var f=""+this.getPath();"."==f&&(f="/ws/");f=f.replace("./",this.workspaceMount);this.serviceObject[this.serviceClass].ls(f).then(function(d){this.setChildren(d);this._isLoaded=!0;c.call(null,this.children);delete this._loading}.bind(this),e)}},getChildrenSync:function(c,e){this._isLoaded?c(this.children):this._loadingCallbacks?this._loadingCallbacks.push(c):(this._loadingCallbacks=[],this._loadingCallbacks.push(c),console.error("list files : "+
this.getPath()),c=this.getPath(),"./project1"===c&&console.error("gotcha"),c=""+c,"."==c&&(c="/ws/"),c=c.replace("./","/ws/"),h.serverJSONRequest({url:"cmd/listFiles.php",content:{path:this.getPath(),basePath:"./"},sync:e,load:dojo.hitch(this,function(c,d){this.setChildrenSync(c);dojo.forEach(this._loadingCallbacks,function(b){b(this.children)},this);delete this._loadingCallbacks})}))},setChildren:function(c){this.children=[];this._appendFiles(c)},setChildrenSync:function(c){this.children=[];this._appendFiles(c,
!0)},_appendFiles:function(c,g){c.forEach(function(c){var d=g?this.getChildSync(c.name):this._getChild(c.name),b=null!=d;c.isDir||c.isLib?(b||(d=new m(c.name,this)),c.isLib&&(d.isLibrary=!0)):b||(d=new e(c.name,this));d.link=c.link;d.isNew=c.isNew;d._readOnly=c.readOnly;d.setDirty(c.isDirty);c.libraryId&&(d.libraryId=c.libraryId,d.libVersion=c.libVersion);b||this.children.push(d)},this);this._isLoaded=!0},getMarkers:function(c,e){var f=[];this.visit({visit:function(d){if("File"==d.elementType)markers=
d.getMarkers(c),f.concat(markers);else if(!e)return!0}},!0);return f},getChildSync:function(c){if(!this._isLoaded||1>this.children.length)this._isLoaded=!1,this.getChildrenSync(function(c){this.children=c},!0);return this._getChild(c)},getChild:function(c){if(!this._isLoaded||1>this.children.length)this._isLoaded=!1,this.getChildren2(function(c){this.children=c},!0);return this._getChild(c)},_getChild:function(c){if(!this.__CASE_SENSITIVE){if(!c||null==c.toLowerCase)debugger;c=c.toLowerCase()}var e;
this.children.some(function(f){var d=f.getName();this.__CASE_SENSITIVE||(d=d.toLowerCase());(d=d==c)&&(e=f);return d});return e}});return m})},"davinci/model/resource/Resource":function(){define("dojo/_base/declare dojo/_base/xhr dojo/_base/connect dojo/Deferred davinci/Runtime davinci/model/Model davinci/model/Path xide/manager/ServerActionBase".split(" "),function(q,n,h,g,e,m,c,k){return q("davinci.model.resource.Resource",[m,k],{singleton:!0,sync:!1,workspaceMount:"/ws/",_initService:function(){var c=
this.findServiceUrl(this.declaredClass);c&&(this.serviceUrl=c);this.inherited(arguments)},constructor:function(){this.elementType="Resource";this.name="";this.parent=null;this._id=dijit.getUniqueId("maqFileResource");this.init()},getName:function(){return this.name},getPath:function(){return this.parent?this.parent.getPath()+"/"+this.name:this.name},readOnly:function(){return this.hasOwnProperty("_readOnly")?this._readOnly||null!=this.parent&&this.parent.readOnly():this.parent?this.parent.readOnly():
!1},getURL:function(){var c=this.getPath();0==c.indexOf("./")&&(c=c.substring(2,c.length));return e.getUserWorkspaceUrl()+c},rename:function(e){var d=(new c(this.getPath())).removeLastSegments().append(e);return n.get({url:"cmd/rename",handleAs:"text",content:{oldName:this.getPath(),newName:d.toString()}}).then(function(){this.name=e;h.publish("/davinci/resource/resourceChanged",["renamed",this])}.bind(this))},getParentFolder:function(){return"File"==this.elementType?this.parent:this},isVirtual:function(){return!!this.libraryId},
visit:function(c,d){var b=c.visit(this);this._isLoaded||"Folder"!=this.elementType||d?this.children&&!b&&dojo.forEach(this.children,function(a){a.visit(c,d)}):this.getChildren(dojo.hitch(this,function(){dojo.forEach(this.children,function(a){a.visit(c,d)})}))},deleteResource:function(c){var d=""+this.getPath();"."==d&&(d=""+this.workspaceMount);var d=d.replace("./",this.workspaceMount),b=this.serviceClass,a="Folder"==this.elementType?"deleteDirectory":"deleteFile",e=function(){var a=this.getName();
this.parent.children.some(function(b,d,c){if(b.getName()==a)return c.splice(d,1),!0});h.publish("/davinci/resource/resourceChanged",["deleted",this])}.bind(this);c?(c=new g,e(),c.resolve()):c=this.serviceObject[b][a](d).then(e,function(){});return c},getId:function(){return this._id}})})},"davinci/model/resource/File":function(){define("dojo/_base/declare davinci/Runtime davinci/model/resource/Resource davinci/model/resource/Marker davinci/ve/utils/URLRewrite xide/utils".split(" "),function(q,n,h,
g,e,m){return q("davinci.model.resource.File",h,{serviceClass:"XIDE_Directory_Service",mount:"/ws/",getMountPoint:function(){return this.mount},constructor:function(c,e){this.elementType="File";this.name=c;this.parent=e;this.markers=[];this.extension=c.substr(c.lastIndexOf(".")+1)},getExtension:function(){return this.extension},clearMarkers:function(){this.markers=[]},addMarker:function(c,e,f){this.markers.push(new g(this,c,e,f))},getMarkers:function(c){var e=[];if(this.markers)for(var f=0;f<this.markers.length;f++){var d=
this.markers[f];c?"string"==typeof c?d.type==c&&e.push(d):dojo.forEach(c,function(b){b==d.type&&e.push(d)}):e.push(d)}return e},setContents:function(c,e){this.isNew&&!e&&(this.isNew=!1);var f=(e=!1,""),d=encodeURI(this.getPath()+f);return this.serviceObject[this.serviceClass].set(this.getMountPoint(),d,c).then(function(b){this.dirtyResource=e;dojo.publish("/davinci/resource/resourceChanged",["modified",this]);return this}.bind(this),function(b){console.error("An error occurred: davinci.model.resource.File.prototype.setContents "+
b+" : "+d);return b})},getContentSync:function(){return n.serverJSONRequest({url:e.encodeURI(this.getURL()),handleAs:"text",sync:!0})},getContent:function(){return this.serviceObject[this.serviceClass].get(m.buildPath(this.getMountPoint(),encodeURI(this.getPath())),!1,!1)},removeWorkingCopy:function(){n.serverJSONRequest({url:n.cmdOffset+"cmd/removeWorkingCopy",handleAs:"text",content:{path:this.getPath()},sync:!0});this.isNew&&this.deleteResource(!0)}})})},"davinci/model/resource/Marker":function(){define(["dojo/_base/declare",
"davinci/model/resource/Resource"],function(q,n){return q("davinci.model.resource.Marker",n,{constructor:function(h,g,e,m){this.resource=h;this.type=g;this.line=e;this.text=m}})})},"davinci/ve/input/SmartInput":function(){define("dojo/_base/declare dojo/dom-geometry davinci/ve/commands/ModifyRichTextCommand dijit/layout/ContentPane dojox/html/entities davinci/lang/ve dijit/lang/_common xide/registry".split(" "),function(q,n,h,g,e,m,c,k){return q("davinci.ve.input.SmartInput",null,{property:null,_X_MOVE_RANGE:10,
_Y_MOVE_RANGE:10,_POINTER_TOP_OFFSET:-13,multiLine:"false",displayOnCreate:"true",_connection:[],getHelpText:function(){return this.helpText?this.helpText:this.isHtmlSupported()?m.smartInputHelp1:m.smartInputHelp2},isHtmlSupported:function(){this.supportsHTML||("html"==this._widget.type.match("^html")?this.supportsHTML="true":this.supportsHTML="false");return"boolean"===typeof this.supportsHTML?this.supportsHTML:"true"===this.supportsHTML},parse:function(c){return c},parseItems:function(c){this.trim&&
(c=dojo.trim(c));return c.match(/[^\\][\r\n]/)?this.parseItemsInRows(c):this.parseItemsInColumns(c)},parseItemsInRows:function(c){c=this.splitRows(c);for(var d=c.length,b=0;b<d;b++){var a=c[b],a=this.parseItem(a);c[b]=a}return c},parseItemsInColumns:function(c){c=this.splitColumns(c);for(var d=c.length,b=0;b<d;b++){var a=c[b],a=this.parseItem(a);c[b]=a}return c},parseGrid:function(c){c=this.splitRows(c);for(var d=c.length,b=0;b<d;b++){var a=this.parseItemsInColumns(c[b]);c[b]=a}return c},parseItem:function(c){var d=
null,b=c,a=c.match(/^([-~!>|(*)[+\]]*) ?(.*)$/);a&&(d=a[1],b=a[2]);var a=0,e=!1,f=!1;if(d)for(var g=0;g<d.length;g++)switch(d[g]){case "-":case "~":case "!":e=!0;break;case "\x3e":a++;break;case "*":case "+":f=!0}return{original:c,specialChars:d,text:b,indent:a,disabled:e,selected:f}},splitRows:function(c){var d=[],b,a="",e=!1;for(b=0;b<c.length;b++){var f=c.charAt(b);switch(f){case "\\":e&&(a+=f);e=!e;break;case "r":e?(a+="\r",e=!1):a+=f;break;case "n":e?(a+="\n",e=!1):a+=f;break;case "\r":case "\n":e?
(a+=f,e=!1):(this.trim&&(a=dojo.trim(a)),d.push(a),a="");break;default:a+=f,e=!1}}a&&(this.trim&&(a=dojo.trim(a)),d.push(a));return d},splitColumns:function(c){var d=[],b,a="",e=!1;for(b=0;b<c.length;b++){var f=c.charAt(b);switch(f){case "\\":e&&(a+=f);e=!e;break;case "r":e?(a+="\r",e=!1):a+=f;break;case "n":e?(a+="\n",e=!1):a+=f;break;case ",":e?(a+=f,e=!1):(this.trim&&(a=dojo.trim(a)),d.push(a),a="");break;default:a+=f,e=!1}}a&&(this.trim&&(a=dojo.trim(a)),d.push(a));return d},serializeItems:function(c){return"columns"==
this.format?this.serializeColumns(c):this.serializeRows(c)},serializeColumns:function(c){for(var d=0;d<c.length;d++){var b=c[d],b=b.replace(/\\/g,"\\\\");c[d]=b.replace(/,/g,"\\,")}return c.join(", ")},serializeRows:function(c){for(var d=0;d<c.length;d++){var b=c[d],b=b.replace(/\\/g,"\\\\");c[d]=b.replace(/\n/g,"\\\n")}return c.join("\n")},inlineEditActive:function(){return!(!this._inline||"none"==this._inline.style.display||!this._inline.eb)},show:function(c){this._widget=davinci.ve.widget.byId(c);
this._inline||this._createInline();c=dojo.hitch(this,function(a){this._inline.style.display="block";this.setFormat(a);a=e.decode(a,[["\x26","amp"],['"',"quot"],["\x3c","lt"],["\x3e","gt"]]);this._inline.eb.set("value",String(a));this.updateFormats();this.help(!1);dijit.selectInputText(this._inline.eb.textbox);this.updateSimStyle();this._inline.eb.textbox.focus()});var d=this._node(this._widget),b=this.property,a="maq_innerText"===b?"innerHTML":b,f;b&&(d?f=dojo.attr(d,a):"innerHTML"===a||"textContent"==
a?(f=this._widget._srcElement.getElementText(this._context),f=f.replace(/\s+/g," ")):f=this._widget.attr(b));this.serialize?this.serialize(d||this._widget,c,f):b&&c(f)},_createInline:function(){if(this.multiLine&&"false"!=this.multiLine){this._loading(115,200);var c=this._getTemplate()}else this._loading(85,200),c=this._getTemplate();this._inline.set("content",c);this._inline.eb=dijit.byId("davinciIleb");this._connection.push(dojo.connect(this._inline.eb,"onMouseDown",this,"stopEvent"));this._connection.push(dojo.connect(this._inline.eb,
"onKeyDown",this,"stopEvent_Intercept_Enter"));this._connection.push(dojo.connect(this._inline.eb,"onKeyUp",this,"handleEvent"));"true"==this.multiLine&&(this._connection.push(dojo.connect(this._inline.eb,"onBlur",this,"onBlur")),this._connectSimDiv());c=this._widget._srcElement.getElementText(this._context);this._inline.eb.setValue(c);this._loadingDiv.style.backgroundImage="none";this._inline._setStyleAttr({display:"block"});this._connectHelpDiv();window.setTimeout(function(){this._inline&&this._inline.eb&&
this._inline.eb.textbox&&this._inline.eb.textbox.focus();this._connection.push(dojo.connect(this._inline,"onBlur",this,"onOk"))}.bind(this),500);this.resize(null)},_connectHelpDiv:function(){var c=dojo.byId("davinci.ve.input.SmartInput_img_help");this._connection.push(dojo.connect(c,"onclick",this,"toggleHelp"));this._connection.push(dojo.connect(dijit.byId("davinci.ve.input.SmartInput_ok"),"_onSubmit",this,"onOk"));this._connection.push(dojo.connect(dijit.byId("davinci.ve.input.SmartInput_cancel"),
"onClick",this,"onCancel"))},_findSmartInputContainer:function(c){return document.body},_loading:function(c,d){this._widget&&this._widget._edit_context||console.error("have no widget");var b=this._widget._edit_context.frameNode,a=b.ownerDocument,e=a.createElement("div"),f=this._findSmartInputContainer(b);if(f){f.appendChild(e);this._loadingDiv=e;dojo.addClass(e,"smartInputLoading");e=a.createElement("div");e.id="ieb";dojo.addClass(e,"inlineEdit dijitTooltipContainer");a=a.createElement("div");a.id=
"iebPointer";this._inline=e;f.appendChild(e);f.appendChild(a);var h=new dojo.dnd.Moveable("ieb");this._connection.push(dojo.connect(h,"onMoveStart",this,"onMoveStart"));this._connection.push(dojo.connect(h,"onMoveStop",this,"onMoveStop"));this._inline=new g({},e);e=k.byId("editorsStackContainer").domNode;k.byId("editorsStackContainer");e=n.position(e);this._loadingDiv.style.position="absolute";this._loadingDiv.style.left=e.x+"px";this._loadingDiv.style.top=e.y+"px";this._loadingDiv.style.width=e.w+
"px";this._loadingDiv.style.height=e.h+"px";var e=this._widget.getMarginBox(),h=dojo.position(b),m=dojo.position(f),b=h.x-m.x+f.scrollLeft-1,h=h.y-m.y+f.scrollTop-1,q=f.clientWidth,m=26,B=0;e.y+c+26<f.clientHeight?(m=e.y+26,dojo.addClass(a,"inlineEditConnectorBelow")):0<e.y-c?(m=e.y-c,B=c+12):m=26;c="0";e.x+d+20<q?c=e.x:e.x+d>q&&(d=e.x-d+e.w,0>d&&(d=0),c=d);c+=b;m+=h;this._inline._setStyleAttr({display:"block",top:m+"px",left:c+"px",padding:"1px",overflow:"hidden",backgroundImage:"none"});this._startTop=
m;this._startLeft=c;dojo.style(a,"left",e.x+20+b+"px");dojo.style(a,"top",m+B+this._POINTER_TOP_OFFSET+"px")}},handleEvent:function(c){switch(c.keyCode){case 13:var d=this.multiLine;if(!d||"false"==d||13==this._lastKeyCode||c.ctrlKey)this.onOk();else if(c.which==dojo.keys.ENTER&&c.ctrlKey)this.onOk();break;case 27:this.onCancel();break;default:this.updateFormats()}this._lastKeyCode=c.keyCode;this.updateSimStyle()},onOk:function(c){this.hide()},onCancel:function(c){this.hide(!0)},onMoveStart:function(c){dojo.style("iebPointer",
"display","none")},onMoveStop:function(c){var d=dojo.style("ieb","left");c=dojo.style("ieb","top");d=this._startLeft-d;c-=this._startTop;c<this._Y_MOVE_RANGE&&c>-this._Y_MOVE_RANGE?(dojo.style("iebPointer","display",""),dojo.style("iebPointer","top",this._startTop+this._POINTER_TOP_OFFSET+c+"px"),d<this._X_MOVE_RANGE&&d>-this._X_MOVE_RANGE?dojo.style("iebPointer","display",""):dojo.style("iebPointer","display","none")):dojo.style("iebPointer","display","none")},stopEvent:function(c){c.stopPropagation();
this.updateSimStyle()},stopEvent_Intercept_Enter:function(c){this.stopEvent(c);13!=c.keyCode||this.multiLine||c.preventDefault()},_node:function(){var c,d=this.path,b=this.selector;if(d||b)c=this._widget.domNode,d&&(c=dojo.getObject(d,!1,this._widget)),b&&(c=dojo.query(b,c)[0]);return c},updateWidget:function(c){if(!this._widget._destroyed){this.parse&&(c=this.parse(c));var d=this._node(this._widget),b=this._widget.getContext(),a=this.property,e="maq_innerText"===a?"innerHTML":a;if(this.update){if(c=
this.update(d||this._widget,c,a))this._widget=c;b.select(this._widget,null,!1)}else if(a){if(d)dojo.attr(d,e,c);else{d={};c&&"string"==typeof c&&(c=c.replace(/\n/g,""));var f=null;"textContent"==a?f=c:d[a]=c;"innerHTML"===e?(d.richText=d[a],delete d[a],c=new h(this._widget,d,null,b)):c=new davinci.ve.commands.ModifyCommand(this._widget,d,f,b);this._widget._edit_context.getCommandStack().execute(c);this._widget=c.newWidget;this._widget._edit_context._focuses[0]._selectedWidget=this._widget}b.select(this._widget,
null,!1)}}},hide:function(c){if(this._inline){for(var d;connection=this._connection.pop();)connection&&dojo.disconnect(connection);var b=this._findSmartInputContainer(this._widget._edit_context.frameNode);if(b&&(this._loadingDiv&&b.removeChild(this._loadingDiv),"none"!=this._inline.style.display&&this._inline.eb)){this._value=d=this._inline.eb.get("value");this._format=this.getFormat();this._inline.style.display="none";this._inline.eb&&(this._inline.eb.destroyRecursive(),delete this._inline.eb);this._inline.destroyRecursive();
delete this._inline;var a=b.ownerDocument.getElementById("iebPointer");b.removeChild(a);null==d||c||(this.disableEncode||"text"!==this._format||(d=e.encode(d)),this.updateWidget(d));this._widget.getContext().getDocument().defaultView.focus()}}},getFormat:function(){var c=dijit.byId("davinci.ve.input.SmartInput_radio_html"),d="text";c&&c.checked&&(d="html");return d},containsHtmlMarkUp:function(c){return 0<dojo.create("div",{innerHTML:c}).children.length},toggleHelp:function(){var c=dojo.byId("davinci.ve.input.SmartInput_img_help");
dojo.hasClass(c,"inlineEditHelpSelected")?this.help(!1):this.help(!0);dojo.toggleClass(c,"inlineEditHelpSelected")},setFormat:function(c){var d=dijit.byId("davinci.ve.input.SmartInput_radio_html"),b=dijit.byId("davinci.ve.input.SmartInput_radio_text");c=dojo.create("div",{innerHTML:c}).children.length?"html":"text";"html"===c?(d.set("checked",!0),b.set("checked",!1)):(d.set("checked",!1),b.set("checked",!0));this._format=c},help:function(c){var d=dojo.byId("davinci.ve.input.SmartInput_div_help");
dojo.byId("davinci.ve.input.SmartInput_radio_div");c?dojo.style(d,"display",""):dojo.style(d,"display","none")},updateFormats:function(){var c=this._inline.eb.get("value"),d=!0;this.containsHtmlMarkUp(c)&&(d=!1);this._widget.getContext().getDojo();var b=dojo.byId("davinci.ve.input.SmartInput_radio_text_width_div"),c=e.encode(c);b.innerHTML='\x3cdiv class\x3d"dojoxEllipsis"\x3e'+dojo.replace("Plain text ({0})",[c])+"\x3c/div\x3e";c=dojo.byId("davinci.ve.input.SmartInput_radio_html_width_div");c.innerHTML=
'\x3cdiv id\x3d"davinci.ve.input.SmartInput_radio_html_div" class\x3d"dojoxEllipsis"\x3e'+m.htmlMarkup+"\x3c/div\x3e";var a=dijit.byId("davinci.ve.input.SmartInput_radio_html"),g=dijit.byId("davinci.ve.input.SmartInput_radio_text"),h=dojo.byId("davinci.ve.input.SmartInput_table");a.setDisabled(d);g.setDisabled(d);d?(dojo.addClass(b,"inlineEditDisabled"),dojo.addClass(c,"inlineEditDisabled"),a.set("checked",!1),g.set("checked",!0)):(dojo.removeClass(b,"inlineEditDisabled"),dojo.removeClass(c,"inlineEditDisabled"));
!d&&this.isHtmlSupported()?(dojo.style(g.domNode,"display",""),dojo.style(a.domNode,"display",""),dojo.style(c,"display",""),dojo.style(b,"display",""),dojo.style(h,"display","")):(dojo.style(g.domNode,"display","none"),dojo.style(a.domNode,"display","none"),dojo.style(c,"display","none"),dojo.style(b,"display","none"),dojo.style(h,"display","none"))},resize:function(c){c=dojo.byId("iedResizeDiv");var d=dijit.byId("davinciIleb"),b=c.clientWidth-5,a=c.clientHeight-6,e=c.clientWidth-10,b=c.clientWidth-
8,a=c.clientHeight-20,e=c.clientWidth-9,f=dojo.byId("smartInputSim");dojo.style(f,"width",b+10+"px");this.updateSimStyle();d&&(d._setStyleAttr({width:b+"px",height:a+"px",maxHeight:a+"px"}),d._setStyleAttr({width:c.clientWidth+"px"}));d=dojo.byId("davinci.ve.input.SmartInput_radio_div");dojo.style(d,"width",e+2+"px");d=dojo.byId("davinci.ve.input.SmartInput_radio_text_width_div");dojo.style(d,"width",c.clientWidth-50+"px");d=dojo.byId("davinci.ve.input.SmartInput_radio_html_width_div");dojo.style(d,
"width",c.clientWidth-50+"px")},onBlur:function(c){this.updateSimStyle(c)},updateSimStyle:function(c){var d=dijit.byId("davinciIleb");if(c=dojo.byId("smartInputSim"))d=dojo.style(d.domNode),dojo.style(c,"borderColor",d.borderTopColor),dojo.style(c,"backgroundColor",d.backgroundColor)},_getTemplate:function(){var e='\x3cdiv id\x3d"iedResizeDiv" class\x3d"iedResizeDiv" \x3e\x3ctextarea  dojoType\x3d"dijit.form.SimpleTextarea" name\x3d"davinciIleb" trim\x3d"true" id\x3d"davinciIleb" class\x3d"smartInputTextArea" \x3e\x3c/textarea\x3e\x3cdiv id\x3d"smartInputSim" class\x3d"smartInputSim" \x3e\x3c/div\x3e\x3c/div\x3e';
"true"===this.multiLine&&(e='\x3cdiv id\x3d"iedResizeDiv" class\x3d"iedResizeDiv" \x3e\x3ctextarea  dojoType\x3d"dijit.form.SimpleTextarea" name\x3d"davinciIleb" trim\x3d"true" id\x3d"davinciIleb" class\x3d"smartInputTextAreaMulti" \x3e\x3c/textarea\x3e\x3cdiv id\x3d"smartInputSim" class\x3d"smartInputSim" \x3e\x3c/div\x3e\x3c/div\x3e');return""+e+'\x3cdiv  id\x3d"davinci.ve.input.SmartInput_div"  class\x3d"davinciVeInputSmartInputDiv" \x3e\x3cdiv id\x3d"davinci.ve.input.SmartInput_radio_div" class\x3d"smartInputRadioDiv" \x3e\x3ctable id\x3d"davinci.ve.input.SmartInput_table"\x3e \x3ctbody\x3e\x3ctr\x3e \x3ctd class\x3d"smartInputTd1" \x3e \x3cinput id\x3d"davinci.ve.input.SmartInput_radio_text" showlabel\x3d"true" type\x3d"radio" dojoType\x3d"dijit.form.RadioButton" disabled\x3d"false" readOnly\x3d"false" intermediateChanges\x3d"false" checked\x3d"true"\x3e \x3c/input\x3e \x3c/td\x3e \x3ctd class\x3d"smartInputTd2" \x3e\x3cdiv id\x3d"davinci.ve.input.SmartInput_radio_text_width_div" class\x3d"smartInputRadioTextDiv"\x3e\x3c/div\x3e\x3c/td\x3e \x3c/tr\x3e\x3ctr\x3e \x3ctd class\x3d"smartInputTd1"\x3e \x3cinput id\x3d"davinci.ve.input.SmartInput_radio_html" showlabel\x3d"true" type\x3d"radio" dojoType\x3d"dijit.form.RadioButton"\x3e \x3c/input\x3e  \x3c/td\x3e \x3ctd class\x3d"smartInputTd2"\x3e\x3cdiv id\x3d"davinci.ve.input.SmartInput_radio_html_width_div" class\x3d"smartInputRadioTextDiv"\x3e\x3c/div\x3e\x3c/td\x3e \x3c/tr\x3e \x3c/tbody\x3e\x3c/table\x3e \x3cdiv class\x3d"smartInputHelpDiv" \x3e \x3cspan id\x3d"davinci.ve.input.SmartInput_img_help"  title\x3d"Help" class\x3d"inlineEditHelp" \x3e \x3c/span\x3e\x3cspan class\x3d"smartInputSpacerSpan" \x3e\x3cbutton id\x3d"davinci.ve.input.SmartInput_ok"  dojoType\x3d"dijit.form.Button" type\x3d"submit" class\x3d"inlineEditHelpOk" \x3e'+
c.buttonOk+'\x3c/button\x3e \x3cbutton id\x3ddavinci.ve.input.SmartInput_cancel dojoType\x3d"dijit.form.Button" class\x3d"inlineEditHelpCancel"\x3e '+c.buttonCancel+'\x3c/button\x3e  \x3c/span\x3e   \x3c/div\x3e \x3cdiv id\x3d"davinci.ve.input.SmartInput_div_help" style\x3d"display:none;" class\x3d"smartInputHelpTextDiv" \x3e \x3cdiv dojoType\x3d"dijit.layout.ContentPane" class\x3d"smartInputHelpTextDivContentPane "style\x3d"padding:0;" \x3e'+this.getHelpText()+'\x3c/div\x3e \x3cdiv style\x3d"text-align: left; padding:0; height:2px;" \x3e\x3c/div\x3e \x3c/div\x3e \x3c/div\x3e\x3c/div\x3e '},
_connectResizeHandle:function(){},_connectSimDiv:function(){this._connection.push(dojo.connect(this._inline.eb,"onFocus",this,"updateSimStyle"));this._connection.push(dojo.connect(this._inline.eb,"onMouseOver",this,"updateSimStyle"));this._connection.push(dojo.connect(this._inline.eb,"onMouseOut",this,"updateSimStyle"));this._connection.push(dojo.connect(dojo.byId(" davinci.ve.input.SmartInput_div"),"onclick",this,"updateSimStyle"))}})})},"davinci/ve/commands/ModifyRichTextCommand":function(){define(["dojo/_base/declare"],
function(q){return q("davinci.ve.commands.ModifyRichTextCommand",null,{name:"modify",constructor:function(n,h,g,e){this._oldId=n?n.id:void 0;this._properties=h=h||{};h.richText?(this._richText=!0,this._children=this._newText=h.richText,delete h.richText):this._children=h._children;this._context=e||n.getContext()},setContext:function(n){this._context=n},add:function(n){n&&n._oldId==this._oldId&&(n._properties&&dojo.mixin(this._properties,n._properties),n._children&&(this._children=n._children))},execute:function(){if(this._oldId&&
this._properties){var n=require("davinci/ve/widget"),h=n.byId(this._oldId);if(h){this._parentWidget=h.getParent();this._oldText||(this._oldText=h._srcElement.getElementText(this._context))&&"string"==typeof this._oldText&&(this._oldText=this._oldText.replace(/\n/g,""));this._oldData||(this._oldData=h.getData(),this._oldData.context=this._context,this._newData={type:this._oldData.type,properties:dojo.mixin({},this._oldData.properties,this._properties),children:this._newText,maqStates:this._oldData.maqStates,
maqDeltas:this._oldData.maqDeltas,context:this._context},this._oldData={type:this._oldData.type,properties:dojo.mixin({},this._oldData.properties,this._properties),children:this._oldText,maqStates:this._oldData.maqStates,maqDeltas:this._oldData.maqDeltas,context:this._context});var g=this._context;g&&g.detach(h);this._properties.id&&delete this._newData.properties.isTempID;this._newId_isTempID||(this._newId_isTempID=this._newData.properties.isTempID);this._oldId_isTempID||(this._oldId_isTempID=this._oldData.properties.isTempID);
var e=null,m=this._parentWidget.indexOf(h);this._parentWidget.removeChild(h);h.destroyWidget();this._newId&&(this._newData.properties.id=this._newId);this._newId_isTempID&&(this._newData.properties.isTempID=this._newId_isTempID);if(e=n.createWidget(this._newData))this._parentWidget.addChild(e,m),this._newId=e.id,this._context&&this._refresh(e),g&&(g.widgetAddedOrDeleted(),this._oldId!=this._newId&&g.widgetChanged(g.WIDGET_ID_CHANGED,e,this._oldId),g.widgetChanged(g.WIDGET_MODIFIED,e)),this.newWidget=
e,dojo.publish("/davinci/ui/widget/replaced",[e,h]),require("davinci/ve/States").resetState(e.domNode)}}},undo:function(){if(this._newId&&this._oldData){var n=require("davinci/ve/widget"),h=n.byId(this._newId);if(h){var g=dojo.indexOf(this._parentWidget.getChildren(),h);if(!(0>g)){var e=this._parentWidget.getContext();e&&e.detach(h);this._parentWidget.removeChild(h);h.destroyWidget();this._oldData.children=this._oldText;this._oldData.properties.id=this._oldId;n=n.createWidget(this._oldData);this._parentWidget.addChild(n,
g);e&&this._refresh(n);e.widgetAddedOrDeleted();e.widgetChanged(e.WIDGET_MODIFIED,n);dojo.publish("/davinci/ui/widget/replaced",[n,h]);require("davinci/ve/States").resetState(n.domNode)}}}},_refresh:function(n){var h=n.getContainerNode();h&&this._context.getGlobal().require("dojo/parser").parse(h);this._context.attach(n);n.startup();n.renderWidget();h&&this._context._attachChildren(h)}})})},"url:davinci/workbench/templates/Preferences.html":"\x3cdiv style\x3d'width:100%; height: 100%'\x3e\n\t\x3cdiv class\x3d\"dijitDialogPaneContentArea\"\x3e\n\t\t\x3cdiv dojoType\x3d'dijit.layout.BorderContainer' dojoAttachPoint\x3d\"borderContainer\" style\x3d'width:100%; height: 100%' gutters\x3d'false' liveSplitters\x3d'true' id\x3d'preferencesContainer'\x3e\n\t\t\t\x3cdiv dojoType\x3d'dijit.layout.ContentPane' id\x3d'pref.TreePane' splitter\x3d'true' region\x3d'leading' style\x3d'width: 200px;' minSize\x3d'100' maxSize\x3d'300'\x3e\x3c/div\x3e\n\t\t\t\x3cdiv dojoType\x3d'dijit.layout.ContentPane' region\x3d'center' id\x3d'pref.RightPane'\x3e\x3c/div\x3e\n\t\t\x3c/div\x3e\n\t\x3c/div\x3e\n\t\x3cdiv class\x3d\"dijitDialogPaneActionBar\"\x3e\n\t\t\x3c!-- FIXME: we don't have logic to yet implement restoreDefaults() yet. See #627\n\t\t\x3cbutton dojoType\x3ddijit.form.Button type\x3d\"button\" onclick\x3d\"davinci.workbench.Preferences.restoreDefaults();\"\x3e\x3c/button\x3e--\x3e\n\t\t\x3cbutton dojoType\x3d\"dijit.form.Button\" type\x3d\"button\" onclick\x3d\"davinci.workbench.Preferences.save();\" class\x3d\"maqPrimaryButton\" type\x3d\"submit\"\x3e${commonStrings.buttonSave}\x3c/button\x3e\n\t\t\x3cbutton dojoType\x3d\"dijit.form.Button\" type\x3d\"button\" onclick\x3d\"davinci.workbench.Preferences.finish();\" class\x3d\"maqSecondaryButton\"\x3e${commonStrings.buttonCancel}\x3c/button\x3e\n\t\x3c/div\x3e\n\x3c/div\x3e\n\n\n",
"url:davinci/ve/widgets/templates/BackgroundDialog.html":"\x3cdiv class\x3d\"backgroundDialog\" style\x3d\"position:relative\" dojoAttachPoint\x3d\"_fileDialog\"\x3e\n\t\x3cstyle type\x3d\"text/css\"\x3e\n\t\t.backgroundDialog {\n\t\t\twidth:31em;\n\t\t}\n\t\t.bgdTopDiv {\n\t\t\tmargin-top: 4px;\n\t\t\tpadding-left: .75em;\n\t\t}\n\t\t.bgdTopTable {\n\t\t\twidth:100%;\n\t\t\tborder-collapse:collapse;\n\t\t}\n\t\t.bgdTopLabel, .bgdTopField, .bgdTopPreview {\n\t\t\twidth:1px;\n\t\t\twhite-space:nowrap;\n\t\t}\n\t\t.bgdTopLabel {\n\t\t\ttext-align:right;\n\t\t\tpadding-right:6px;\n\t\t}\n\t\t.bgdTopTable .dijitSelect .dijitButtonContents {\n\t\t\twidth:8em;\n\t\t}\n\t\t.bgdTopTable .dijitTextBox {\n\t\t\twidth: 9.8em;\n\t\t}\n\t\t.bgdPreview {\n\t\t\tdisplay:inline-block;\n\t\t\twidth: 6em;\n\t\t\theight: 2.8em;\n\t\t\tmargin-left:12px;\n\t\t\tborder:1px solid gray;\n\t\t\tvertical-align: middle;\n\t\t}\n\t\t.bgdOptionsDiv {\n\t\t\tmargin:0.3em 0em 1em 1em;\n\t\t}\n\t\t.bgdOptionsDiv \x3e table {\n\t\t\twidth:27em;\n\t\t}\n\t\t.bgdSection {\n\t\t\tbackground-color:#d8d8d8;\n\t\t}\n\t\tdiv.bgdSection, .bgdSection td, .bgdSection.bgdUrlSectionLabel {\n\t\t\tpadding:2px 5px;\n\t\t}\n\t\t.bgdBeforeStopsLabel {\n\t\t\theight:6px;\n\t\t}\n\t\t.bgdStopsLabel {\n\t\t\tmargin-top:1em;\n\t\t}\n\t\t.bgdAfterStopsLabel {\n\t\t\theight:0px;\n\t\t}\n\t\t.bgdBeforeOptionsLabel {\n\t\t\theight:16px;\n\t\t}\n\t\t.bgdOptionsLabel {\n\t\t\tmargin-top:1em;\n\t\t}\n\t\t.bgdAfterOptionsLabel {\n\t\t\theight:4px;\n\t\t}\n\t\t.bgdCol1 {\n\t\t\twidth:10px;\n\t\t}\n\t\t.bgdPlusMinusButtons {\n\t\t\twhite-space:nowrap;\n\t\t\twidth:51px;\n\t\t}\n\t\t.bgdOptionsDiv th {\n\t\t\ttext-align:center;\n\t\t\tfont-style:italic;\n\t\t}\n\t\t.bgdOptsLabel {\n\t\t\ttext-align:right;\n\t\t\tpadding-right: 6px;\n\t\t\twhite-space:nowrap;\n\t\t}\n\t\t.bgdColor.dijitTextBox {\n\t\t\twidth:9em;\n\t\t}\n\t\t.bgdOptionsDiv .bgdPosition.dijitTextBox {\n\t\t\twidth:5em;\n\t\t}\n\t\t.bgdOptionsDiv .dijitTextBox {\n\t\t\twidth:10.6em;\n\t\t}\n\t\t.bgdStopColorTD .dijitTextBox {\n\t\t\twidth:14em;\n\t\t}\n\t\t.bgdOptionsDiv .dijitSelect {\n\t\t\tmargin:0;\n\t\t}\n\t\t.bgdOptionsDiv .dijitSelect .dijitButtonContents {\n\t\t\twidth:9em;\n\t\t}\n\t\t.bgdUrlContainerOuter {\n\t\t\tmargin-top:1em;\n\t\t\tmargin-left:1em;\n\t\t}\n\t\t.bgdUrlContainerInner {\n\t\t\tmargin:0 1em;\n\t\t}\n\t\t.bgdUrlSectionLabel {\n\t\t\tmargin:1em 0 .25em;\n\t\t}\n\t\t.bgdFileTreeContainer {\n\t\t\tmargin: 0 0 0 3px;\n\t\t\tborder: 1px solid #26A;\n\t\t}\n\t\t.bgdFileTreeContainer .dijitTree {\n\t\t\theight:125px;\n\t\t}\t\t\n\t\t.backgroundDialog .fileNameRow  {\n\t\t\tmargin:8px 0 .4em;\n\t\t}\n\t\t.backgroundDialog .fileNameRow label {\n\t\t\tvertical-align:middle;\n\t\t\tmargin-right:4px;\n\t\t}\n\t\t.backgroundDialog .fileNameRow .dijitTextBox {\n\t\t\twidth:16em;\n\t\t}\n\t\t.bgdOptionsDiv .bgdOtherRow .dijitTextBox {\n\t\t\twidth:15em;\n\t\t}\n\t\t\n\t\x3c/style\x3e\n\n\t\x3cdiv class\x3d\"dijitDialogPaneContentArea\"\x3e\n\t\t\x3cdiv class\x3d'bgdTopDiv'\x3e\n\t\t\t\x3ctable class\x3d'bgdTopTable'\x3e\n\t\t\t\t\x3ctr\x3e\n\t\t\t\t\t\x3ctd class\x3d'bgdTopLabel'\x3e\x3clabel class\x3d'bgdTypeDivTypeLabel'\x3e${veNLS.bgdBackgroundColor}\x3c/label\x3e\x3c/td\x3e\n\t\t\t\t\t\x3ctd class\x3d'bgdTopField'\x3e\n\t\t\t\t\t\t\x3cselect dojoType\x3d\"dijit.form.ComboBox\" dojoAttachPoint\x3d'bgdColorCB'\x3e\n\t\t\t\t\t\t\t\x3c!--  values added dynamically --\x3e\n\t\t\t\t\t\t\x3c/select\x3e\n\t\t\t\t\t\x3c/td\x3e\n\t\t\t\t\t\x3ctd rowspan\x3d'2' class\x3d'bgdTopPreview' style\x3d'border-collapse:collapse'\x3e\x3cspan class\x3d'bgdPreview'\x3e\x3c/span\x3e\x3c/td\x3e\n\t\t\t\t\t\x3ctd class\x3d'bgdTopExpando'\x3e\x26nbsp;\x3c/td\x3e\n\t\t\t\t\x3c/tr\x3e\n\t\t\t\t\x3ctr\x3e\n\t\t\t\t\t\x3ctd class\x3d'bgdTopLabel'\x3e\x3clabel class\x3d'bgdTypeDivTypeLabel'\x3e${veNLS.bgdBackgroundImageType}\x3c/label\x3e\x3c/td\x3e\n\t\t\t\t\t\x3ctd class\x3d'bgdTopField'\x3e\n\t\t\t\t\t\t\x3cselect dojoType\x3d'dijit.form.Select' value\x3d'linear' dojoAttachPoint\x3d'bgdTypeSelect'\x3e\n\t\t\t\t\t\t\t\x3c!--  values added dynamically --\x3e\n\t\x3c!-- FIXME: Add plain text type-in box if unrecognized syntax --\x3e\n\t\t\t\t\t\t\x3c/select\x3e\n\t\t\t\t\t\x3c/td\x3e\n\t\t\t\t\t\x3ctd class\x3d'bgdTopExpando'\x3e\x26nbsp;\x3c/td\x3e\n\t\t\t\t\x3c/tr\x3e\n\t\t\t\x3c/table\x3e\n\t\t\x3c/div\x3e\n\t\t\n\t\t\x3cdiv class\x3d\"bgdUrlContainerOuter bgdImageOptRow\"\x3e\n\t\t\t\x3cdiv class\x3d\"bgdSection bgdOptionsLabel\"\x3e${veNLS.bgdImageUrl}\x3c/div\x3e\n\t\t\t\x3cdiv class\x3d\"bgdUrlContainerInner\"\x3e\n\t\t\t\t\x3cdiv class\x3d'fileNameRow'\x3e\n\t\t\t\t\t\x3ctd class\x3d\"fileDialogLabelCell\"\x3e\n\t\t\t\t\t\x3clabel\x3e${veNLS.bgdUrl}\x3c/label\x3e\n\t\t\t\t\t\x3c/td\x3e\n\t\t\t\t\t\x3ctd\x3e\n\t\t\t\t\t\x3cdiv dojoType\x3d'davinci.ui.widgets.FileFieldDialog' dojoAttachPoint\x3d\"_filePicker\"\x3e\x3c/div\x3e\n\t\t\t\t\t\x3c/td\x3e\n\t\t\t\t\x3c/div\x3e\n\t\t\t\x3c/div\x3e\n\t\t\x3c/div\x3e\n\t\t\x3cdiv class\x3d\"bgdOptionsDiv\"\x3e\n\t\t\t\x3ctable\x3e\n\t\t\t\t\x3ctr class\x3d\"bgdGradOptRow bgdBeforeStopsLabel\"\x3e\x3c/tr\x3e\n\t\t\t\t\x3ctr class\x3d\"bgdGradOptRow bgdSection bgdStopsLabel\"\x3e\n\t\t\t\t\t\x3ctd colspan\x3d\"5\"\x3e${veNLS.bgdColorStops}\x3c/td\x3e\n\t\t\t\t\x3c/tr\x3e\n\t\t\t\t\x3ctr class\x3d\"bgdGradOptRow bgdAfterStopsLabel\"\x3e\x3c/tr\x3e\n\t\t\t\t\x3ctr class\x3d'bgdGradOptRow bgdStopRow'\x3e\n\t\t\t\t\t\x3cth\x3e\x3c/th\x3e\x3cth\x3e\x3c/th\x3e\x3cth\x3e${veNLS.bgdColor}\x3c/th\x3e\x3cth\x3e${veNLS.bgdPosition}\x3c/th\x3e\x3cth\x3e\x3c/th\x3e\n\t\t\t\t\x3c/tr\x3e\n\t\t\t\t\x3c!--  gradient stop rows added dynamically --\x3e\n\t\t\t\t\x3ctr class\x3d\"bgdBeforeOptionsLabel bgdOptionsLabelRow\"\x3e\x3c/tr\x3e\n\t\t\t\t\x3ctr class\x3d\"bgdSection bgdOptionsLabel bgdOptionsLabelRow\"\x3e\n\t\t\t\t\t\x3ctd colspan\x3d\"5\"\x3e${veNLS.bgdOptions}\x3c/td\x3e\n\t\t\t\t\x3c/tr\x3e\n\t\t\t\t\x3ctr class\x3d\"bgdAfterOptionsLabel bgdOptionsLabelRow\"\x3e\x3c/tr\x3e\n\t\t\t\t\x3ctr class\x3d\"bgdGradOptRow bgdLinearOptRow\"\x3e\t\n\t\t\t\t\t\x3ctd class\x3d'bgdCol1'\x3e\x3c/td\x3e\n\t\t\t\t\t\x3ctd class\x3d'bgdOptsLabel'\x3e\x3clabel\x3e${veNLS.bgdAngle}\x3c/label\x3e\x3c/td\x3e\n\t\t\t\t\t\x3ctd colspan\x3d'3'\x3e\n\t\t\t\t\t\t\x3cselect dojoType\x3d\"dijit.form.ComboBox\" dojoAttachPoint\x3d'bgdLinearAngleCB'\x3e\n\t\t\t\t\t\t\t\x3c!--  values added dynamically --\x3e\n\t\t\t\t\t\t\x3c/select\x3e\n\t\t\t\t\t\x3c/td\x3e\n\t\t\t\t\x3c/tr\x3e\n\t\t\t\t\x3ctr class\x3d\"bgdGradOptRow bgdRadialOptRow\"\x3e\t\n\t\t\t\t\t\x3ctd class\x3d'bgdCol1'\x3e\x3c/td\x3e\n\t\t\t\t\t\x3ctd class\x3d'bgdOptsLabel'\x3e${veNLS.bgdPosition2}\x3c/td\x3e\n\t\t\t\t\t\x3ctd colspan\x3d'3'\x3e\n\t\t\t\t\t\t\x3cselect dojoType\x3d\"dijit.form.ComboBox\" dojoAttachPoint\x3d'bgdRadialPosCB'\x3e\n\t\t\t\t\t\t\t\x3c!--  values added dynamically --\x3e\n\t\t\t\t\t\t\x3c/select\x3e\n\t\t\t\t\t\x3c/td\x3e\n\t\t\t\t\x3c/tr\x3e\n\t\t\t\t\x3ctr dojoAttachPoint\x3d\"bgdShapeRow\" class\x3d\"bgdGradOptRow bgdRadialOptRow\"\x3e\t\n\t\t\t\t\t\x3ctd class\x3d'bgdCol1'\x3e\x3c/td\x3e\n\t\t\t\t\t\x3ctd class\x3d'bgdOptsLabel'\x3e\x3clabel\x3e${veNLS.bgdShape}\x3c/label\x3e\x3c/td\x3e\n\t\t\t\t\t\x3ctd colspan\x3d'3'\x3e\n\t\t\t\t\t\t\x3cselect dojoType\x3d\"dijit.form.ComboBox\" dojoAttachPoint\x3d'bgdRadialShapeCB'\x3e\n\t\t\t\t\t\t\t\x3c!--  values added dynamically --\x3e\n\t\t\t\t\t\t\x3c/select\x3e\n\t\t\t\t\t\x3c/td\x3e\n\t\t\t\t\x3c/tr\x3e\n\t\t\t\t\x3ctr dojoAttachPoint\x3d\"bgdExtentRow\" class\x3d\"bgdGradOptRow bgdRadialOptRow\"\x3e\t\n\t\t\t\t\t\x3ctd class\x3d'bgdCol1'\x3e\x3c/td\x3e\n\t\t\t\t\t\x3ctd class\x3d'bgdOptsLabel'\x3e\x3clabel\x3e${veNLS.bgdExtent}\x3c/label\x3e\x3c/td\x3e\n\t\t\t\t\t\x3ctd colspan\x3d'3'\x3e\n\t\t\t\t\t\t\x3cselect dojoType\x3d\"dijit.form.ComboBox\" dojoAttachPoint\x3d'bgdRadialExtentCB'\x3e\n\t\t\t\t\t\t\t\x3c!--  values added dynamically --\x3e\n\t\t\t\t\t\t\x3c/select\x3e\n\t\t\t\t\t\x3c/td\x3e\n\t\t\t\t\x3c/tr\x3e\n\t\t\t\t\x3ctr dojoAttachPoint\x3d\"bgdRepeatRow\" class\x3d\"bgdImageOptRow\"\x3e\t\n\t\t\t\t\t\x3ctd class\x3d'bgdCol1'\x3e\x3c/td\x3e\n\t\t\t\t\t\x3ctd class\x3d'bgdOptsLabel'\x3e\x3clabel\x3e${veNLS.bgdBackgroundRepeat}\x3c/label\x3e\x3c/td\x3e\n\t\t\t\t\t\x3ctd colspan\x3d'3'\x3e\n\t\t\t\t\t\t\x3cselect dojoType\x3d\"dijit.form.ComboBox\" dojoAttachPoint\x3d'bgdRepeatCB'\x3e\n\t\t\t\t\t\t\t\x3c!--  values added dynamically --\x3e\n\t\t\t\t\t\t\x3c/select\x3e\n\t\t\t\t\t\x3c/td\x3e\n\t\t\t\t\x3c/tr\x3e\n\t\t\t\t\x3ctr dojoAttachPoint\x3d\"bgdPositionRow\" class\x3d\"bgdImageOptRow\"\x3e\t\n\t\t\t\t\t\x3ctd class\x3d'bgdCol1'\x3e\x3c/td\x3e\n\t\t\t\t\t\x3ctd class\x3d'bgdOptsLabel'\x3e${veNLS.bgdBackgroundPosition}\x3c/td\x3e\n\t\t\t\t\t\x3ctd colspan\x3d'3'\x3e\n\t\x3c!-- FIXME: regExp, invalidMessage --\x3e\n\t\t\t\t\t\t\x3cselect dojoType\x3d\"dijit.form.ComboBox\" dojoAttachPoint\x3d'bgdPositionCB'\x3e\n\t\t\t\t\t\t\t\x3c!--  values added dynamically --\x3e\n\t\t\t\t\t\t\x3c/select\x3e\n\t\t\t\t\t\x3c/td\x3e\n\t\t\t\t\x3c/tr\x3e\n\t\t\t\t\x3ctr dojoAttachPoint\x3d\"bgdSizeRow\" class\x3d\"bgdImageOptRow\"\x3e\t\n\t\t\t\t\t\x3ctd class\x3d'bgdCol1'\x3e\x3c/td\x3e\n\t\t\t\t\t\x3ctd class\x3d'bgdOptsLabel'\x3e${veNLS.bgdBackgroundSize}\x3c/td\x3e\n\t\t\t\t\t\x3ctd colspan\x3d'3'\x3e\n\t\x3c!-- FIXME: regExp, invalidMessage --\x3e\n\t\t\t\t\t\t\x3cselect dojoType\x3d\"dijit.form.ComboBox\" dojoAttachPoint\x3d'bgdSizeCB'\x3e\n\t\t\t\t\t\t\t\x3c!--  values added dynamically --\x3e\n\t\t\t\t\t\t\x3c/select\x3e\n\t\t\t\t\t\x3c/td\x3e\n\t\t\t\t\x3c/tr\x3e\n\t\t\t\t\x3ctr dojoAttachPoint\x3d\"bgdOriginRow\" class\x3d\"bgdImageOptRow\"\x3e\t\n\t\t\t\t\t\x3ctd class\x3d'bgdCol1'\x3e\x3c/td\x3e\n\t\t\t\t\t\x3ctd class\x3d'bgdOptsLabel'\x3e\x3clabel\x3e${veNLS.bgdBackgroundOrigin}\x3c/label\x3e\x3c/td\x3e\n\t\t\t\t\t\x3ctd colspan\x3d'3'\x3e\n\t\t\t\t\t\t\x3cselect dojoType\x3d\"dijit.form.ComboBox\" dojoAttachPoint\x3d'bgdOriginCB'\x3e\n\t\t\t\t\t\t\t\x3c!--  values added dynamically --\x3e\n\t\t\t\t\t\t\x3c/select\x3e\n\t\t\t\t\t\x3c/td\x3e\n\t\t\t\t\x3c/tr\x3e\n\t\t\t\t\x3ctr dojoAttachPoint\x3d\"bgdClipRow\" class\x3d\"bgdImageOptRow\"\x3e\t\n\t\t\t\t\t\x3ctd class\x3d'bgdCol1'\x3e\x3c/td\x3e\n\t\t\t\t\t\x3ctd class\x3d'bgdOptsLabel'\x3e\x3clabel\x3e${veNLS.bgdBackgroundClip}\x3c/label\x3e\x3c/td\x3e\n\t\t\t\t\t\x3ctd colspan\x3d'3'\x3e\n\t\t\t\t\t\t\x3cselect dojoType\x3d\"dijit.form.ComboBox\" dojoAttachPoint\x3d'bgdClipCB'\x3e\n\t\t\t\t\t\t\t\x3c!--  values added dynamically --\x3e\n\t\t\t\t\t\t\x3c/select\x3e\n\t\t\t\t\t\x3c/td\x3e\n\t\t\t\t\x3c/tr\x3e\n\t\t\t\t\x3ctr dojoAttachPoint\x3d\"bgdOtherTypeInRow\" class\x3d\"bgdOtherRow\"\x3e\t\n\t\n\t\t\t\t\t\x3ctd class\x3d'bgdCol1'\x3e\x3c/td\x3e\n\t\t\t\t\t\x3ctd class\x3d'bgdOptsLabel'\x3e\x3clabel\x3e${veNLS.bgdBackgroundImageValue}\x3c/label\x3e\x3c/td\x3e\n\t\t\t\t\t\x3ctd colspan\x3d'3'\x3e\n\t\t\t\t\t\t\x3ctextarea dojoType\x3d\"dijit.form.Textarea\" dojoAttachPoint\x3d'bgdOtherTA'\x3e\x3c/textarea\x3e\n\t\t\t\t\t\x3c/td\x3e\n\t\n\t\t\t\t\x3c/tr\x3e\n\t\n\t\t\t\x3c/table\x3e\n\t\t\x3c/div\x3e\n\t\x3c/div\x3e\n\n\t\x3c!--div class\x3d\"dijitDialogPaneActionBar\"\x3e\n\t\t\x3cspan dojoType\x3d'dijit.form.Button' dojoAttachPoint\x3d\"_okButton\" dojoAttachEvent\x3d'onClick:okButton' label\x3d'${buttonOk}' class\x3d\"maqPrimaryButton\" type\x3d\"submit\"\x3e\x3c/span\x3e \n\t\t\x3cspan dojoType\x3d'dijit.form.Button' dojoAttachEvent\x3d'onClick:cancelButton' label\x3d'${buttonCancel}' class\x3d\"maqSecondaryButton\"/\x3e\x3c/span\x3e \n\t\x3c/div--\x3e\n\x3c/div\x3e\n",
"url:davinci/ui/widgets/templates/FileFieldDialog.html":"\x3cdiv\x3e\n\t\x3cdiv style\x3d'float:right;'\x3e\n\t\t\x3cbutton type\x3d'button' style\x3d'font-size:.75em;float:right;' dojoType\x3d\"dijit.form.Button\" dojoAttachPoint\x3d\"button\" dojoAttachEvent\x3d\"onClick:_showFileSelectionDialog\"\x3e...\x3c/button\x3e\n\t\x3c/div\x3e\n\t\x3cdiv style\x3d'margin-right:35px;'\x3e\n\t\t\x3cinput style\x3d'width:100%;' type\x3d'text' dojoType\x3d\"dijit.form.TextBox\" dojoAttachPoint\x3d\"textField\" dojoAttachEvent\x3d\"onChange:_onChange\"\x3e\x3c/input\x3e\n\t\x3c/div\x3e\n\x3c/div\x3e\n\n",
"url:davinci/ve/widgets/templates/WidgetToolBar.html":'\x3cdiv class\x3d"propertiesTitleBar ui-widget-content" style\x3d"display: none"\x3e\n    \x3cdiv class\x3d\'propertiesWidgetDescription\'\x3e\n        \x3cspan class\x3d\'propertiesWidgetDescriptionFor\'\x3e${veNLS.toolBarFor}\x3c/span\x3e\n        \x3cspan data-dojo-attach-point\x3d"descNode"\x3e${veNLS.noSelection}\x3c/span\x3e\n    \x3c/div\x3e\n    \x3cdiv class\x3d"propertiesTitleBarPropertiesContainer"\x3e\n        \x3ctable width\x3d"100%" cellspacing\x3d"0" cellpadding\x3d"0" border\x3d"0" align\x3d"center"\n               class\x3d"propertiesTitleBarProperties property_table_stretchable"\x3e\n            \x3ccolgroup\x3e\n                \x3ccol style\x3d"width:10px;"\x3e\n                \x3ccol class\x3d"gap02"\x3e\n                \x3ccol class\x3d"gap03"\x3e\n                \x3ccol style\x3d"width:10px;"\x3e\n                \x3ccol style\x3d"width:6px;"\x3e\n            \x3c/colgroup\x3e\n            \x3ctbody\x3e\n            \x3c!--tr class\x3d"cssPropertySection"\x3e\n                \x3ctd\x3e\x3c/td\x3e\n                \x3ctd class\x3d"propertyDisplayName"\x3e${veNLS.toolBarClass}\x26nbsp;\x3c/td\x3e\n                \x3ctd class\x3d"propertyInputField"\x3e\n                  \x3cinput data-dojo-type\x3d"dijit.form.ComboBox" data-dojo-attach-point\x3d"classComboBox" label\x3d"" data-dojo-attach-event\x3d"onChange:_onChangeClassAttribute,onFocus:_onFieldFocus,onBlur:_onFieldBlur" style\x3d"width: 100%" searchAttr\x3d"name"/\x3e\n                \x3c/td\x3e\n                \x3ctd nowrap\x3d"true" class\x3d"propertyExtra"\x3e\x3c/td\x3e\n                \x3ctd\x3e\x3c/td\x3e\n            \x3c/tr--\x3e\n            \x3ctr class\x3d"cssPropertySection"\x3e\n                \x3ctd\x3e\x3c/td\x3e\n                \x3ctd class\x3d"propertyDisplayName"\x3e${veNLS.toolBarId}\x26nbsp;\x3c/td\x3e\n                \x3ctd class\x3d"propertyInputField"\x3e\n                    \x3cinput class\x3d"form-control input-transparent" data-dojo-type\x3d"dijit.form.ValidationTextBox" data-dojo-attach-point\x3d"idTextBox" label\x3d"" data-dojo-attach-event\x3d"onChange:_onChangeIDAttribute,onKeyPress:_onKeyPress,onFocus:_onFieldFocus,onBlur:_onFieldBlur" style\x3d"width: 100%"/\x3e\n                \x3c/td\x3e\n                \x3ctd nowrap\x3d"true" class\x3d"propertyExtra"\x3e\x3c/td\x3e\n                \x3ctd\x3e\x3c/td\x3e\n            \x3c/tr\x3e\n\n            \x3ctr class\x3d"cssPropertySection"\x3e\n                \x3ctd\x3e\x3c/td\x3e\n                \x3ctd class\x3d"propertyDisplayName"\x3eClass\x3c/td\x3e\n                \x3ctd class\x3d"propertyInputField"\x3e\n                    \x3cinput data-dojo-attach-point\x3d"cssClasses" type\x3d"text" class\x3d"" value\x3d"" style\x3d"width: 100%"\x3e\n                \x3c/td\x3e\n                \x3ctd nowrap\x3d"true" class\x3d"propertyExtra"\x3e\x3c/td\x3e\n                \x3ctd\x3e\x3c/td\x3e\n            \x3c/tr\x3e\n            \x3c!--tr class\x3d"cssPropertySection"\x3e\n                \x3ctd\x3e\x3c/td\x3e\n                \x3ctd class\x3d"propertyDisplayName"\x3eBlock Group\x26nbsp;\x3c/td\x3e\n                \x3ctd class\x3d"propertyInputField"\x3e\n                    \x3cinput data-dojo-type\x3d"dijit.form.ComboBox" data-dojo-attach-point\x3d"blockGroupComboBox" label\x3d"" data-dojo-attach-event\x3d"onChange:_onChangeBlockGroupAttribute,onFocus:_onFieldFocus,onBlur:_onFieldBlur" style\x3d"width: 100%" searchAttr\x3d"name"/\x3e\n                \x3c/td\x3e\n                \x3ctd nowrap\x3d"true" class\x3d"propertyExtra"\x3e\x3c/td\x3e\n                \x3ctd\x3e\x3c/td\x3e\n            \x3c/tr--\x3e\n            \x3c/tbody\x3e\n        \x3c/table\x3e\n    \x3c/div\x3e\n\x3c/div\x3e\n',
"url:davinci/ui/widgets/templates/ThemeSetSelection.html":'\x3cdiv\x3e\n  \x3cdiv class\x3d"dijitDialogPaneContentArea"\x3e\n\t\t\x3ctable style\x3d"width: 100%; padding-left:10px; padding-right:10px;"\x3e\n\t\t\t\x3ctr\x3e\n\t\t\t\t\x3ctd style\x3d"" NOWRAP\x3e${uiNLS.themeSet}\x3c/td\x3e\n\t\t\t\t\x3ctd style\x3d"width: 100%; text-align: center;"\x3e\x3cselect dojoType\x3d"dijit.form.Select" id\x3d"theme_select_themeset_theme_select" type\x3d"text" style\x3d"width: 175px;" \x3e\x3c/select\x3e\x3c/td\x3e\n\t\t\t\x3c/tr\x3e\n\t\t\x3c/table\x3e\n\t\n\t\t\x3cdiv style\x3d"border-top: 1px solid black; top: 231px; border-top-color: #ccc; left: 429px; width: 300px; height: 11px; margin-top: 6px; padding-left:10px;"\x3e\x3c/div\x3e\n\t\t\x3ctable style\x3d"padding-left: 15px; width: 100%;"\x3e\n\t\t\t\x3ctr\x3e\x3ctd style\x3d"width: 139px;"\x3e${uiNLS.desktopTheme}\x3c/td\x3e\x3ctd\x3e\x3cselect dojoType\x3d"dijit.form.Select" id\x3d"theme_select_desktop_theme_select"type\x3d"text"  style\x3d"width: 175px;"  \x3e\x3c/select\x3e\x3c/td\x3e\x3c/tr\x3e\n\t\t\t\x3ctr\x3e\x3ctd\x3e${uiNLS.mobileTheme}\x3c/td\x3e\x3ctd\x3e\x3cselect dojoType\x3d"dijit.form.Select" id\x3d"theme_select_mobile_theme_select"type\x3d"text"  style\x3d"width: 175px;" \x3e\x3c/select\x3e\x3c/td\x3e\x3c/tr\x3e\n\t\t\x3c/table\x3e\n\t\t\x3ctable id\x3d"theme_select_devices_table" style\x3d"padding-left:30px; border-collapse: separate; border-spacing: 0 0; width: 100%"\x3e\n\t\t\t\x3ctr\x3e\x3ctd style\x3d"width: 139px;"\x3e${uiNLS.android}\x3c/td\x3e\x3ctd\x3e\x3cselect dojoType\x3d"dijit.form.Select" id\x3d"theme_select_android_select" type\x3d"text"  style\x3d"width: 150px;"\x3e\x3c/select\x3e\x3c/td\x3e\x3c/tr\x3e\n\t\t\t\x3ctr\x3e\x3ctd\x3e${uiNLS.blackberry}\x3c/td\x3e\x3ctd\x3e\x3cselect dojoType\x3d"dijit.form.Select" id\x3d"theme_select_blackberry_select" type\x3d"text"  style\x3d"width: 150px;"\x3e\x3c/select\x3e\x3c/td\x3e\x3c/tr\x3e\n\t\t\t\x3ctr\x3e\x3ctd\x3e${uiNLS.ipad}\x3c/td\x3e\x3ctd\x3e\x3cselect dojoType\x3d"dijit.form.Select" id\x3d"theme_select_ipad_select" type\x3d"text"  style\x3d"width: 150px;"\x3e\x3c/select\x3e\x3c/td\x3e\x3c/tr\x3e\n\t\t\t\x3ctr\x3e\x3ctd\x3e${uiNLS.iphone}\x3c/td\x3e\x3ctd\x3e\x3cselect dojoType\x3d"dijit.form.Select" id\x3d"theme_select_iphone_select" type\x3d"text"  style\x3d"width: 150px;"\x3e\x3c/select\x3e\x3c/td\x3e\x3c/tr\x3e\n\t\t\t\x3ctr\x3e\x3ctd\x3e${uiNLS.other}\x3c/td\x3e\x3ctd\x3e\x3cselect dojoType\x3d"dijit.form.Select" id\x3d"theme_select_other_select" type\x3d"text"  style\x3d"width: 150px;"\x3e\x3c/select\x3e\x3c/td\x3e\x3c/tr\x3e\n\t\t\x3c/table\x3e\n\t\x3c/div\x3e\n\n\t\x3cdiv class\x3d"dijitDialogPaneActionBar"\x3e\n\t\t\x3cbutton dojoType\x3d"dijit.form.Button" id\x3d"theme_select_ok_button" label\x3d"${uiNLS.select}" class\x3d"maqPrimaryButton" type\x3d"submit"\x3e\x3c/button\x3e\n\t\t\x3cbutton dojoType\x3d"dijit.form.Button" id\x3d"theme_select_cancel_button" label\x3d"${commonNLS.buttonCancel}" class\x3d"maqSecondaryButton"\x3e\x3c/button\x3e\n\t\x3c/div\x3e\n\x3c/div\x3e\n',
"url:davinci/ve/newfile.template.html":'\x3c!DOCTYPE html\x3e\n\x3c!--\n\tTODO: margin:0 is a temporary hack. In previous releases, we always included dojo.css\n\twhich set margin:0, but we now only include dojo.css with the first Dojo widget\n\tadded to the page. That causes scrollbars when page was loaded initially,\n\twhich went want when first Dojo widget was added.\n\tNeed to rethink this whole business of width:100%;height:100%;margin:0\n--\x3e\n\x3chtml style\x3d"height: 100%; width: 100%; margin: 0;"\x3e\n\t\x3chead\x3e\n\t\t\x3cbase href\x3d"{baseUrl}"/\x3e\n\t\t\x3cmeta charset\x3d"utf-8"/\x3e\n\t\t\x3cscript src\x3d"{dojoUrl}" data-dojo-config\x3d"{dojoConfig}" {additionalDojoAttrs}\x3e\x3c/script\x3e\n\t\t\x3cscript\x3e\n\t\t\t// base dependencies needed for VE\n\t\t\trequire([\n\t\t\t\t\'dojo/parser\',\n\t\t\t\t\'dojox/html/_base\',\n\t\t\t\t\'dojo/domReady!\'\n\t\t\t\t{additionalModules}\n\t\t\t], top.loading{id});\n\t\t\x3c/script\x3e\n\t\t{themeHeadImports}\n\t\t{themeCssFiles}\n\t\x3c/head\x3e\n\t\x3cbody\x3e\n\t\x3c/body\x3e\n\x3c/html\x3e\n',
"url:davinci/ui/templates/download.html":'\x3cdiv class\x3d\'downloadDialog\'\x3e\t \n\t\x3cdiv class\x3d"dijitDialogPaneContentArea"\x3e\n\t\t\x3cdiv style\x3d"margin-bottom: 20px"\x3e\n\t\t  ${fileName}: \x3cinput data-dojo-type\x3d\'dijit/form/ValidationTextBox\' type\x3d"text" maxLength\x3d\'${_fileNameMaxLength}\' data-dojo-attach-point\x3d"__fileName" value\x3d\'${_projectName}.zip\' data-dojo-props\x3d"regExp:\'${_fileNameValidationRegExp}\', required:true, invalidMessage:\'${invalidDownloadFileName}\'"\x3e\x3c/input\x3e\n\t\t\x3c/div\x3e\n\t\t\n\t\t\x3cdiv data-dojo-attach-point\x3d"_selectionDiv"\x3e\x3c/div\x3e\n\t\t\x3cdiv data-dojo-attach-point\x3d"_tableDiv"\x3e\x3c/div\x3e\n\n\t\t\x3cdiv style\x3d"margin-top: 8px"\x3e\n\t\t  Select: \x3ca href\x3d"javascript:;" data-dojo-attach-event\x3d"onclick: _selectAll"\x3e${selectAll}\x3c/a\x3e / \x3ca href\x3d"javascript:;" data-dojo-attach-event\x3d"onclick: _selectNone"\x3e${selectNone}\x3c/a\x3e\n\t\t\x3c/div\x3e\n\n\t\t\x3cdiv style\x3d"margin-top: 20px"\x3e\n\t\t\t\x3cinput data-dojo-type\x3d\'dijit/form/CheckBox\' type\x3d"text" data-dojo-attach-point\x3d"__fullSource" data-dojo-props\x3d""\x3e\x3c/input\x3e\x3cspan style\x3d\'padding-left: 3px;\'\x3e${downloadFullSource}\x3c/span\x3e\n\t\t\t\x3cbr\x3e\n\t\t\t\x3cinput data-dojo-type\x3d\'dijit/form/CheckBox\' type\x3d"text" data-dojo-attach-point\x3d"__optimize" data-dojo-props\x3d""\x3e\x3c/input\x3e\x3cspan style\x3d\'padding-left: 3px;\'\x3e${optimizeOption}\x3c/span\x3e\n\t\t\x3c/div\x3e\n  \x3c/div\x3e\n\t\x3cdiv class\x3d"dijitDialogPaneActionBar"\x3e\n\t\t\x3cbutton data-dojo-type\x3d\'dijit/form/Button\' data-dojo-attach-point\x3d"_okButton" data-dojo-attach-event\x3d\'onClick:okButton\' label\x3d\'${downloadButtonLabel}\' class\x3d"maqPrimaryButton" type\x3d"submit"\x3e\x3c/button\x3e\n\t\t\x3cbutton data-dojo-type\x3d\'dijit/form/Button\' data-dojo-attach-event\x3d\'onClick:cancelButton\' label\x3d\'${buttonCancel}\' class\x3d"maqSecondaryButton"\x3e\x3c/button\x3e\n\t\x3c/div\x3e\n\x3c/div\x3e',
"url:davinci/ui/templates/downloadSelected.html":"\x3cdiv class\x3d'downloadDialog'\x3e\t \n\t\x3cdiv class\x3d\"dijitDialogPaneContentArea\"\x3e\n\t\t\x3cdiv style\x3d\"margin-bottom: 20px\"\x3e\n\t\t  ${fileName}: \x3cinput data-dojo-type\x3d'dijit/form/ValidationTextBox' type\x3d\"text\" maxLength\x3d'${_fileNameMaxLength}' data-dojo-attach-point\x3d\"__fileName\" value\x3d'${_projectName}.zip' data-dojo-props\x3d\"regExp:'${_fileNameValidationRegExp}', required:true, invalidMessage:'${invalidDownloadFileName}'\"\x3e\x3c/input\x3e\n\t\t\x3c/div\x3e\n\t\t\n\t\t\x3cdiv data-dojo-attach-point\x3d\"_selectionDiv\"\x3e\x3c/div\x3e\n\n  \x3c/div\x3e\n\t\x3cdiv class\x3d\"dijitDialogPaneActionBar\"\x3e\n\t\t\x3cbutton data-dojo-type\x3d'dijit/form/Button' data-dojo-attach-point\x3d\"_okButton\" data-dojo-attach-event\x3d'onClick:okButton' label\x3d'${downloadButtonLabel}' class\x3d\"maqPrimaryButton\" type\x3d\"submit\"\x3e\x3c/button\x3e\n\t\t\x3cbutton data-dojo-type\x3d'dijit/form/Button' data-dojo-attach-event\x3d'onClick:cancelButton' label\x3d'${buttonCancel}' class\x3d\"maqSecondaryButton\"\x3e\x3c/button\x3e\n\t\x3c/div\x3e\n\x3c/div\x3e",
"url:davinci/ui/templates/SaveAsWidgetForm.html":'\x3cdiv class\x3d\'dvSaveAsWidgetForm\'\x3e\n\t\x3cdiv class\x3d"dijitDialogPaneContentArea"\x3e\n\t\t\x3cp class\x3d"dvSawfDesc"\x3e${descriptionString}\x3c/p\x3e\n\t\t\x3cp\x3e\n\t\t\t\x3cspan class\x3d"dvSawfLabel"\x3e${nameString}:\x3c/span\x3e\n\t\t\t\x3cinput dojoType\x3d\'dijit.form.ValidationTextBox\' dojoAttachPoint\x3d"nameInputNode" trim\x3d"true"\n\t\t\t\t\tpromptMessage\x3d"${namePromptString}"\x3e\x3c/input\x3e\n\t\t\x3c/p\x3e\n\t\t\x3cp\x3e\n\t\t\t\x3cspan class\x3d"dvSawfLabel"\x3e\x3cspan class\x3d"dvRequired"\x3e*\x3c/span\x3e${idString}:\x3c/span\x3e\n\t\t\t\x3cinput dojoType\x3d\'dijit.form.ValidationTextBox\' dojoAttachPoint\x3d"idInputNode" trim\x3d"true"\n\t\t\t\t\trequired\x3d"true" intermediateChanges\x3d"true" promptMessage\x3d"${idPromptString}"\x3e\x3c/input\x3e\n\t\t\x3c/p\x3e\n\t\t\x3cp\x3e\n\t\t\t\x3cspan class\x3d"dvSawfLabel"\x3e${versionString}:\x3c/span\x3e\n\t\t\t\x3cinput dojoType\x3d\'dijit.form.ValidationTextBox\' dojoAttachPoint\x3d"versionInputNode"\n\t\t\t\t\ttrim\x3d"true"\x3e\x3c/input\x3e\n\t\t\x3c/p\x3e\n\t\t\x3ch4 class\x3d"dvRequired"\x3e*${requiredString}\x3c/h4\x3e\n\t\n\t\t\x3cdiv dojoType\x3d"dijit.TitlePane" title\x3d"${metadataTitle}" open\x3d"false"\x3e\n\t\t\t\x3ctextarea dojoType\x3d"dijit.form.SimpleTextarea" dojoAttachPoint\x3d"textareaNode" name\x3d"metadata"\n\t\t\t\t\trows\x3d"15" cols\x3d"50" intermediateChanges\x3d"true"\x3e${initialTextareaContent}\x3c/textarea\x3e\n\t\t\x3c/div\x3e\n\t\x3c/div\x3e\n  \x3cdiv class\x3d"dijitDialogPaneActionBar"\x3e\n    \x3cbutton dojoType\x3d"dijit.form.Button" dojoAttachPoint\x3d"buttonSave" class\x3d"maqPrimaryButton" type\x3d"submit" disabled\x3d"true"\x3e${saveString}\x3c/button\x3e\n    \x3cbutton dojoType\x3d"dijit.form.Button" dojoAttachPoint\x3d"buttonCancel" type\x3d"button" class\x3d"maqSecondaryButton"\x3e${cancelString}\x3c/button\x3e\n  \x3c/div\x3e\n\x3c/div\x3e\n',
"url:davinci/ve/actions/templates/EnableApplicationStates.html":"\x3cdiv\x3e\n\t\x3cdiv class\x3d\"dijitDialogPaneContentArea\"\x3e\n\t\t\x3cdiv class\x3d'EnableAsStateContainerWidgetDiv'\x3e\n\t\t\t${veNls.EnableApplicationStatesCurrentWidget}:\n\t\t\t\x3cspan class\x3d'EnableAsStateContainerWidgetLabel' dojoAttachPoint\x3d'widgetLabel'\x3e\x3c/span\x3e\n\t\t\x3c/div\x3e\n\t\t\x3cdiv class\x3d'EnableAsStateContainerStatesDiv' dojoAttachPoint\x3d'statesListDiv'\x3e\n\t\t\t//Filled in by JavaScript logic\n\t\t\x3c/div\x3e\n\t\t\x3cdiv class\x3d'EnableAsStateContainerDescriptionDiv' dojoAttachPoint\x3d'description'\x3e\n\t\t\t//Filled in by JavaScript logic\n\t\t\x3c/div\x3e\n\t\t\x3cdiv class\x3d'EnableAsStateContainerCheckBoxDiv'\x3e\n\t\t\t\x3cinput dojoAttachPoint\x3d\"checkBoxWidget\" dojoType\x3d\"dijit.form.CheckBox\" dojoAttachEvent\x3d\"onKeyUp:_onKeyPress\" type\x3d\"text\"\x3e\x3c/input\x3e\n\t\t\t${veNls.EnableAsStateContainerWidgetLabel}\n\t\t\x3c/div\x3e\n\t\x3c/div\x3e\n\t\t\t\t\n\t\x3cdiv class\x3d\"dijitDialogPaneActionBar\"\x3e\n\t\t\x3cbutton dojoType\x3d'dijit.form.Button' dojoAttachPoint\x3d'okButton' label\x3d'${commonNls.buttonOk}' class\x3d\"maqPrimaryButton\"\x3e\x3c/button\x3e\n\t\t\x3cbutton dojoType\x3d'dijit.form.Button' dojoAttachPoint\x3d'cancelButton' label\x3d'${commonNls.buttonCancel}' class\x3d\"maqSecondaryButton\"\x3e\x3c/button\x3e\n\t\x3c/div\x3e\n\x3c/div\x3e\n",
"url:davinci/ve/actions/templates/AddState.html":'\x3cdiv\x3e\n\t\x3cdiv class\x3d"dijitDialogPaneContentArea"\x3e\n\t\t\x3cdiv class\x3d\'addStateNameDiv\'\x3e\n\t\t\t\x3clabel\x3e${veNls.stateLabel}:\x3c/label\x3e\x3cinput dojoAttachPoint\x3d"input" dojoType\x3d"dijit.form.TextBox" dojoAttachEvent\x3d"onKeyUp:_onKeyPress" type\x3d"text"\x3e\x3c/input\x3e\n\t\t\x3c/div\x3e\n\t\x3c/div\x3e\n\t\x3cdiv class\x3d"dijitDialogPaneActionBar"\x3e\n\t\t\x3cbutton dojoType\x3d\'dijit.form.Button\' dojoAttachPoint\x3d"okButton" dojoAttachEvent\x3d\'onClick:onOk\' label\x3d\'${veNls.createLabel}\' class\x3d"maqPrimaryButton" type\x3d"submit"\x3e\x3c/button\x3e\n\t\t\x3cbutton dojoType\x3d\'dijit.form.Button\' dojoAttachEvent\x3d\'onClick:onCancel\' label\x3d\'${commonNls.buttonCancel}\' class\x3d"maqSecondaryButton"\x3e\x3c/button\x3e\n\t\x3c/div\x3e\n\x3c/div\x3e\n',
"url:davinci/ve/actions/templates/ModifyState.html":'\x3cdiv\x3e\n\t\x3cdiv class\x3d"dijitDialogPaneContentArea"\x3e\n\t\t\x3cdiv class\x3d\'modify_state_container\'\x3e\n\t\t\t\x3cdiv data-dojo-type\x3d"dijit.form.DropDownButton" label\x3d\'${veNls.renameLabel}\' dojoAttachPoint\x3d"renameButton" class\x3d"modify_state_rename_button"\x3e\n\t\t\t\t\t\x3cdiv data-dojo-type\x3d"dijit.TooltipDialog" class\x3d\'modify_state_rename_container\' id\x3d\'state_rename_tooltip_dialog\'\x3e\n\t\t\t\t\t\t\x3cdiv\x3e\n\t\t\t\t\t\t\t\x3clabel for\x3d"state_rename_new_name"\x3e${veNls.newStateLabel}\x3c/label\x3e\n\t\t\t\t\t\t\t\x3cinput data-dojo-type\x3d"dijit.form.ValidationTextBox" id\x3d"state_rename_new_name" name\x3d"state_rename_new_name"\x3e\x3c/input\x3e\n\t\t\t\t\t\t\x3c/div\x3e\n\t\t\t\t\t\t\x3cdiv\x3e\n\t\t\t\t\t\t\t\x3cbutton id\x3d"state_rename_do_it" dojoType\x3d\'dijit.form.Button\' label\x3d\'${veNls.renameLabel}\'\x3e\x3c/button\x3e\n\t\t\t\t\t\t\t\x3cbutton id\x3d"state_rename_cancel" dojoType\x3d\'dijit.form.Button\' label\x3d\'${veNls.cancelLabel}\'\x3e\x3c/button\x3e\n\t\t\t\t\t\t\x3c/div\x3e\n\t\t\t\t\t\x3c/div\x3e\n\t\t\t\t\x3c/div\x3e\n\t\t\t${veNls.stateLabel}: \x3cspan id\x3d\'modify_state_old_name\'\x3eaaa\x3c/span\x3e\n\t\t\x3c/div\x3e\n\t\t\x3cdiv class\x3d\'initial_state_row\'\x3e\n\t\t\t\x3cinput data-dojo-type\x3d"dijit.form.CheckBox" dojoAttachPoint\x3d"initialState" id\x3d"modify_state_initial_state" name\x3d"modify_state_initial_state"\x3e\x3c/input\x3e\n\t\t\t\x3clabel for\x3d\'modify_state_initial_state\'\x3e${veNls.initialStateCheckBoxLabel}\x3c/label\x3e\n\t\t\x3c/div\x3e\n\t\x3c/div\x3e\n\t\t\t\t\n\t\x3cdiv class\x3d"dijitDialogPaneActionBar"\x3e\n\t\t\x3cbutton dojoType\x3d\'dijit.form.Button\' dojoAttachPoint\x3d"okButton" label\x3d\'${veNls.modifyLabel}\' class\x3d"maqPrimaryButton"\x3e\x3c/button\x3e\n\t\t\x3cbutton dojoType\x3d\'dijit.form.Button\' dojoAttachPoint\x3d"cancelButton" label\x3d\'${commonNls.buttonCancel}\' class\x3d"maqSecondaryButton"\x3e\x3c/button\x3e\n\t\x3c/div\x3e\n\x3c/div\x3e\n',
"url:davinci/ve/actions/templates/ManageStates.html":"\x3cdiv\x3e\n\t\x3cdiv class\x3d\"dijitDialogPaneContentArea\"\x3e\n\t\t\x3cdiv class\x3d\"addStateDialogOptions\"\x3e\n\t\t\t\x3cdiv class\x3d'manageStatesStatesListDiv'\x3e\n\t\t\t\t\x3c!-- Filled in by JavaScript --\x3e\n\t\t\t\x3c/div\x3e\n\t\t\t\x3cdiv class\x3d'manageStatesCheckAcceleratorsDiv'\x3e\n\t\t\t\t${veNls.manageStatesCheckLabel}\n\t\t\t\t\x3ca href\x3d'' class\x3d'manageStatesCheckCurrentStateOnly'\x3e${veNls.manageStatesCheckCurrentStateOnly}\x3c/a\x3e\n\t\t\t\t/\n\t\t\t\t\x3ca href\x3d'' class\x3d'manageStatesCheckAll'\x3e${veNls.manageStatesCheckAll}\x3c/a\x3e\n\t\t\t\t/\n\t\t\t\t\x3ca href\x3d'' class\x3d'manageStatesUncheckAll'\x3e${veNls.manageStatesUncheckAll}\x3c/a\x3e\n\t\t\t\t/\n\t\t\t\t\x3ca href\x3d'' class\x3d'manageStatesCheckBackgroundOnly'\x3e${veNls.manageStatesCheckBackgroundOnly}\x3c/a\x3e\n\t\t\t\x3c/div\x3e\n\t\t\t\n\t\t\x3c/div\x3e\t\n\t\x3c/div\x3e\n\t\x3cdiv class\x3d\"dijitDialogPaneActionBar\"\x3e\n\t\t\x3cbutton dojoType\x3d'dijit.form.Button' dojoAttachPoint\x3d\"okButton\" dojoAttachEvent\x3d'onClick:onOk' label\x3d'${veNls.createLabel}' class\x3d\"maqPrimaryButton\" type\x3d\"submit\"\x3e\x3c/button\x3e\n\t\t\x3cbutton dojoType\x3d'dijit.form.Button' dojoAttachEvent\x3d'onClick:onCancel' label\x3d'${commonNls.buttonCancel}' class\x3d\"maqSecondaryButton\"\x3e\x3c/button\x3e\n\t\x3c/div\x3e\n\x3c/div\x3e\n",
"url:davinci/ve/template.html":'\n\x3c!DOCTYPE html\x3e\n\x3chtml\x3e\n\x3chead\x3e\n\x3cmeta charset\x3d"utf-8" /\x3e\n\x3cmeta http-equiv\x3d"X-UA-Compatible" content\x3d"IE\x3dedge" /\x3e\n\x3ctitle\x3eUntitled\x3c/title\x3e\n\x3c/head\x3e\n\x3cbody\x3e\n\x3c/body\x3e\n\x3c/html\x3e\n',"url:davinci/ve/prefs/HtmlEditPreferences.html":"\x3cdiv\x3e\n\t\x3ctable style\x3d'margin: 4px;' cellspacing\x3d'4'\x3e\n\t\t\x3ctbody\x3e\n\t\t\t\x3c!--\n\t\t\t\x3ctr\x3e\n\t\t\t\t\x3ctd\x3e${_loc.flowLayout}:\x3c/td\x3e\n\t\t\t\t\x3ctd\x3e\n\t\t\t\t\t\x3cdiv dojoAttachPoint\x3d'flowBoxNode'\x3e\x3c/div\x3e\n\t\t\t\t\x3c/td\x3e\n\t\t\t\x3c/tr\x3e\n\t\t\t--\x3e\n\t\t\t\x3ctr\x3e\n\t\t\t\t\x3ctd\x3e${_loc.snapToNearestWidget}:\x3c/td\x3e\n\t\t\t\t\x3ctd\x3e\n\t\t\t\t\t\x3cdiv dojoAttachPoint\x3d'snapNode'\x3e\x3c/div\x3e\n\t\t\t\t\x3c/td\x3e\n\t\t\t\x3c/tr\x3e\n\t\t\t\x3ctr\x3e\n\t\t\t\t\x3ctd\x3e${_loc.showPossibleParents}:\x3c/td\x3e\n\t\t\t\t\x3ctd\x3e\n\t\t\t\t\t\x3cdiv dojoAttachPoint\x3d'showPossibleParentsNode'\x3e\x3c/div\x3e\n\t\t\t\t\x3c/td\x3e\n\t\t\t\x3c/tr\x3e\n\t\t\t\x3ctr\x3e\n\t\t\t\t\x3ctd\x3e${_loc.warnOnCSSOverride}:\x3c/td\x3e\n\t\t\t\t\x3ctd\x3e\n\t\t\t\t\t\x3cdiv dojoAttachPoint\x3d'cssOverrideWarn'\x3e\x3c/div\x3e\n\t\t\t\t\x3c/td\x3e\n\t\t\t\x3c/tr\x3e\n\t\t\t\x3ctr\x3e\n\t\t\t\t\x3ctd\x3e${_loc.absoluteWidgetsZindex}:\x3c/td\x3e\n\t\t\t\t\x3ctd\x3e\n\t\t\t\t\t\x3cdiv dojoAttachPoint\x3d'absoluteWidgetsZindex'\x3e\x3c/div\x3e\n\t\t\t\t\x3c/td\x3e\n\t\t\t\x3c/tr\x3e\n\t\t\t\x3c!-- FIXME: Disabled for now. Ultimately, UI for this option should go to widget palette\n\t\t\t\x3ctr\x3e\n\t\t\t\t\x3ctd\x3e${_loc.widgetPaletteLayout}:\x3c/td\x3e\n\t\t\t\t\x3ctd\x3e\n\t\t\t\t\t\x3cdiv dojoAttachPoint\x3d'widgetPaletteLayout'\x3e\x3c/div\x3e\n\t\t\t\t\x3c/td\x3e\n\t\t\t\x3c/tr\x3e\n\t\t\t--\x3e\n\t\t\t\x3ctr\x3e\n\t\t\t\t\x3ctd\x3e${_loc.zazl}:\x3c/td\x3e\n\t\t\t\t\x3ctd\x3e\n\t\t\t\t\t\x3cdiv dojoAttachPoint\x3d'zazl'\x3e\x3c/div\x3e\n\t\t\t\t\x3c/td\x3e\n\t\t\t\x3c/tr\x3e\n\t\t\x3c/tbody\x3e\n\t\x3c/table\x3e\n\x3c/div\x3e"}});
define("davinci/davinci",[],function(){});
//# sourceMappingURL=davinci.js.map