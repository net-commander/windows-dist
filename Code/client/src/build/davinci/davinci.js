//>>built
require({cache:{"davinci/main":function(){define("dojo/_base/kernel dojo/_base/declare davinci/davinci davinci/ve/metadata davinci/Runtime davinci/Workbench davinci/ve/metadata davinci/ui/widgets/OutlineTree".split(" "),function(p){return p.davinci})},"davinci/ve/metadata":function(){define("require dojo/Deferred dojo/promise/all dojo/_base/lang dojo/_base/connect ../library ../model/Path ../repositoryinfo xide/types xide/utils".split(" "),function(p,m,h,e,b,k,a,f,n,g){function d(c,q){c=c||{};for(var g=
1,a=arguments.length;g<a;g++){var f=arguments[g],n,w;for(n in f)f.hasOwnProperty(n)&&(w=f[n],n in c&&("object"===typeof w||c[n]===w)?d(c[n],w):c[n]=w)}return c}function c(c,n,w){D[c.name]=c;n=new a(n);var b=c.overlays,r;for(r in b)b.hasOwnProperty(r)&&("oam"!==r&&"maqetta"!==r||d(c,b[r]));delete c.overlays;c.__metadataModuleId="maq-metadata-"+c.name;r=new a(location.href);r.path=r.path.substring(0,r.path.lastIndexOf("/"));r.path=g.removeURLParameter(r.path,"theme");r.path=""+w;b=[{name:c.__metadataModuleId,
location:w+n}];b[0].location=b[0].location.replace("index.php","");b[0].location=b[0].location.replace("?debug\x3dtrue","");b[0].location=b[0].location.replace("\x26isDesktop\x3dtrue","");b[0].location=b[0].location.replace("maqetta.html","");b[0].location=b[0].location.replace("maqettar.html","");b[0].location=b[0].location.replace("index.html","");b[0].location=b[0].location.replace("xui.php","");b[0].location=b[0].location.replace("xui.php?debug\x3dtrue","");"dojo"!=c.name&&"xide"!=c.name&&"xblox"!=
c.name&&(c.__libraryModuleId=c.name,r={name:c.__libraryModuleId,location:r.append("app/static/lib/"+c.name+"/"+c.version).toString()},"xide"!=c.__libraryModuleId&&b.push(r));p=p({packages:b});var k;if(e.exists("scripts.widget_metadata",c))if("string"==typeof c.scripts.widget_metadata){var h=n.append(c.scripts.widget_metadata);k=dojo.xhrGet({url:w+h.toString()+(0<f.revision.length?"?"+f.revision:""),handleAs:"json"}).then(function(d){if(d){var g=h.getParentPath();return q(c.name,d,g,g,w)}})}else k=
q(c.name,c.scripts.widget_metadata,n,w);if(e.exists("scripts.callbacks",c)){var A=new m;p([c.scripts.callbacks],function(d){c.$callbacks=d;A.resolve()});G.push(A)}return k}function q(c,d,g,q){function a(c,d,g){"undefined"==typeof c.$providedTags[d]&&(c.$providedTags[d]=[]);c.$providedTags[d].push(g)}c||console.error("parseLibraryDescriptor: missing 'libName' arg");var f=D[c];d.$descriptorFolderPath=g.toString();d.$moduleFolderPath=q.toString();if(f)if(f.$widgets){d.widgets.forEach(function(c){f.$wm.widgets.push(c)});
for(var n in d.categories)f.$wm.categories.hasOwnProperty(n)||(f.$wm.categories[n]=d.categories[n])}else if(f.$wm)for(q=0;q<d.widgets.length;q++){n=!1;for(var b=0;!n&&b<f.$wm.widgets.length;b++)f.$wm.widgets[b].type==d.widgets[q].type&&(n=!0);n||f.$wm.widgets.push(d.widgets[q])}else f.$wm||(f.$wm=d);else D[c]={$wm:d,name:d.name,version:d.version},d.__metadataModuleId&&(D[c].__metadataModuleId=d.__metadataModuleId),f=D[c];var r=f.$wm;r.$providedTypes=r.$providedTypes||{};r.$providedTags=r.$providedTags||
{};r.widgets.forEach(function(c){r.$providedTypes[c.type]=c;if("string"==typeof c.tags)a(r,c.tags,c);else if(c.tags&&c.tags.length)for(var d=0;d<c.tags.length;d++)a(r,c.tags[d],c);c.icon&&!c.iconLocal&&(c.icon=g.append(c.icon).toString());c.iconLarge&&!c.iconLargeLocal&&(c.iconLarge=g.append(c.iconLarge).toString());c.widgetClass=r.categories[c.category].widgetClass});dojo.mixin(r,{_maqGetString:B});if(r.extend)for(var k in r.extend)r.extend.hasOwnProperty(k)&&(D[k]&&D[k].$wm?w(D[k].$wm,[r.extend[k]]):
(d=N[k]||[],d.push(r.extend[k]),N[k]=d));N[c]&&w(r,N[c]);return f}function w(c,d){var g=c.$providedTypes;d.forEach(function(c){for(var d in c)if(c.hasOwnProperty(d)){var q=c[d],a=g[d];q.mixin&&e.mixin(a,q.mixin);if(q.concat)for(var f in q.concat)if(q.concat.hasOwnProperty(f)){var n=q.concat[f];if(a[f]){var b=a,w=f;var r=a[f];"string"===typeof r?n=r+","+n:r instanceof Array?n=r.concat(n):(console.error('Unhandled type for "concat()"'),n=void 0);b[w]=n}else a[f]=n}}})}function r(c){if(c)for(var d in D)if(D.hasOwnProperty(d)){var q=
D[d];if(q.$wm&&q.$wm.$providedTypes[c])return q}return null}function B(c){J||(J=!0);return null}function y(c){if(c){if(H.hasOwnProperty(c))return H[c];var q=r(c),g;q&&(g=q.$wm.$descriptorFolderPath);if(!g)return null;var q=q.$wm,a=null,f=I.getResourceManager().getVariable(n.RESOURCE_VARIABLES.APP_URL);q.localPath?(g=c.replace(/\./g,"/").split("/"),g.shift(),g=g.join("/"),g=[q.$moduleFolderPath,"/",g,"_oam.json"].join(""),f=system.resource.findResource(g).getContentSync(),a=dojo.fromJson(f)):(g=[g,
"/",c.replace(/\./g,"/"),"_oam.json"].join(""),g=f+"/lib/xideve/metadata/"+g,dojo.xhrGet({url:g,handleAs:"json",sync:!0}).then(function(c){a=c}));if(!a)return console.error("ERROR: Could not load metadata for type: "+c),null;a.$ownproperty=dojo.mixin({},a.property);a.property=dojo.mixin({},L,a.property);a.$src=g;H[c]=a;d(a,q.$providedTypes[c].metadata);return a}}function A(c,d){if(!d)return c;dojo.every(d.split("."),function(d){if(void 0===c[d])return c=void 0,!1;c=c[d];return!0});return c}function v(c,
d){var g=z.queryDescriptor(d,"allowed"+c);g||(g="Parent"===c?"ANY":"NONE");return g.split(/\s*,\s*/)}function x(c,d){var g=z.queryDescriptor(c,d);if(!g)return null;var q=r(c);return u(q,g)}function u(c,d){return c&&d?"string"===typeof d&&"./"===d.substr(0,2)?(new a(c.__metadataModuleId)).append(d).toString():d:null}var z,C,I,D={},H={},E={},G=[],N={},L={id:{datatype:"string",hidden:!0},lang:{datatype:"string",hidden:!0},dir:{datatype:"string",hidden:!0},"class":{datatype:"string",hidden:!0},style:{datatype:"string",
hidden:!0},title:{datatype:"string",hidden:!0}};dojo.subscribe("/davinci/ui/libraryChanged/start",function(){D={};H={};E={};z.init().then(function(){dojo.publish("/davinci/ui/libraryChanged")})});var J=!1;z={prefix:"",init:function(d,g){I=d;var q=[];C=p("../Workbench");I.getResourceManager().getVariable(n.RESOURCE_VARIABLES.APP_URL);k.getUserLibs(C.getProject()).forEach(function(d){var a=d.metaRoot;(a=a.replace("app/metadata/",""))&&q.push(dojo.xhrGet({url:g+a+"/package.json?"+f.revision,handleAs:"json"}).then(function(d){return c(d,
a,g)}))});return h(q)},parseMetaData:function(c,d,g,a){return q(c,d,g,a)},getLibrary:function(c){return c?D[c]:D},getLibraryActions:function(c,d){var g=[],q;for(q in D)if(D.hasOwnProperty(q)){var a=D[q];if(a.$wm){var f=a.$wm["davinci.actionSets"];f&&dojo.forEach(f,function(q){q.id!=c||d&&q.targetID!==d||(q=dojo.clone(q.actions),dojo.forEach(q,function(c){if(c.action){var d=u(a,c.action);c.action=d}c.menu&&c.menu.forEach(function(c){if(c.action){var d=u(a,c.action);c.action=d}});g.push(c)}))})}}return g},
loadThemeMeta:function(c){for(var d=c.find({elementType:"HTMLElement",tag:"style"}),g=[],q,f=0;f<d.length;f++)for(var n=0;n<d[f].children.length;n++)"CSSImport"==d[f].children[n].elementType&&g.push(d[f].children[n]);new a(c.fileName);f=k.getThemes(C.getProject());d={};for(n=0;n<f.length;n++)if(f[n].files)for(var b=0;b<f[n].files.length;b++)d[f[n].files[b]]=f[n];for(n=0;n<g.length;n++){var f=g[n].url,r;for(r in d)if(-1<r.indexOf("claro")&&(q=r),-1<f.indexOf(r))return{themeUrl:f,themeMetaCache:k.getThemeMetadata(d[r]),
theme:d[r]}}if(n=z._loadThemeMetaDojoxMobile(c,d))return n;if(q){for(var w,n=0;n<g.length;n++)if((r=g[n].url.match(/\/([^\/]*)\.css$/))&&2==r.length&&(r=r[1],g[n].url.match(new RegExp("themes/"+r+"/"+r+".css$")))){w=r;break}if(w)return r=c.getDocumentElement(),c=r.getChildElement("head"),r=r.getChildElement("body"),(f=r.getAttribute("class"))&&r.setAttribute("class",f.replace(new RegExp("\\b"+w+"\\b","g"),"claro")),c=c.getChildElements("style"),dojo.forEach(c,function(c){dojo.forEach(c.children,function(c){"CSSImport"==
c.elementType&&(c.url=c.url.replace(new RegExp("/"+w,"g"),"/claro"))})}),f=g[n].url.replace(new RegExp("/"+w,"g"),"/claro"),g={themeUrl:f,themeMetaCache:k.getThemeMetadata(d[q]),theme:d[q]},g.themeMetaCache.usingSubstituteTheme={oldThemeName:w,newThemeName:"claro"},g}},_loadThemeMetaDojoxMobile:function(c,d){for(var g=c.find({elementType:"HTMLElement",tag:"script"}),q=0;q<g.length;q++){var a=g[q].getElementText();if(a.length){var f=a.indexOf("dojoxMobile.themeMap");if(0<f){var f=a.indexOf("\x3d",
f),n=a.indexOf(";",f);if(n>f){var a=dojo.fromJson(a.substring(f+1,n))[0][2][0],r;for(r in d)if(-1<a.indexOf(r))return{themeUrl:a,themeMetaCache:k.getThemeMetadata(d[r]),theme:d[r]}}}}}},getLibraryForType:function(c){return r(c)},getLibraryMetadataForType:function(c){return(c=r(c))?c.$wm:null},getWidgetDescriptorForType:function(c){var d=r(c);c=d?d.$wm.$providedTypes[c]:void 0;return c},getOamDescriptivePropertyForType:function(c,d){var g=y(c);return g&&g[d]?(g=g[d],"string"==typeof g?{type:"text/plain",
value:g}:"string"==typeof g.value?{type:g.type?g.type:"text/plain",value:g.value}:null):null},getWidgetsWithTag:function(c){var d=[];if(c)for(var g in D)if(D.hasOwnProperty(g)){var q=D[g];q.$wm&&q.$wm.$providedTags[c]&&(d=d.concat(q.$wm.$providedTags[c]))}return d},getLibraryBase:function(c){if(c=r(c))return c.$wm.$descriptorFolderPath},invokeCallback:function(c,d,g){var q=c;"string"===typeof c&&(q=r(type));if(q&&q.$callbacks&&(c=q.$callbacks[d]))return c.apply(q.$callbacks,g)},query:function(c,d){if(c){var g,
q;c.declaredClass?(c.metadata&&(q=c.metadata),g=c.type):g=c;if(!q){q=y(g);if(!q)return;c.declaredClass&&(c.metadata=q)}return A(q,d)}},queryDescriptorByName:function(c,d,g){d=r(d);var q;if(d){d=d.$wm.widgets;for(var a=0;a<d.length;a++)if(d[a].name==c){q=d[a];break}}return this._queryDescriptor(q,g)},queryDescriptor:function(c,d){var g=r(c),q;g&&(q=g.$wm.$providedTypes[c]);return this._queryDescriptor(q,d)},_queryDescriptor:function(c,d){if(c&&"object"===typeof c){var g=A(c,d);"resizable"===d&&(g||
(g="both"));return g}},getAllowedParent:function(c){return v("Parent",c)},getAllowedChild:function(c){return v("Child",c)},getHelper:function(c,d){var g=new m,q=c+":"+d;if(q in E)return g.resolve(E[q]),g;var a=x(c,d);a?p([a],function(c){g.resolve(c);E[q]=c}):g.resolve();return g},getSmartInput:function(c){var d=new m;if(c in F)d.resolve(F[c]);else{var g=x(c,"inlineEdit");g?"string"===typeof g?p([g],function(g){d.resolve(F[c]=new g)}):"[object Array]"===Object.prototype.toString.call(g.property)?p(["davinci/ve/input/MultiFieldSmartInput"],
function(q){q=new q;e.mixin(q,g);d.resolve(F[c]=q)}):p(["davinci/ve/input/SmartInput"],function(q){q=new q;e.mixin(q,g);d.resolve(F[c]=q)}):d.resolve(null)}return d},getDeferreds:function(){return G}};var F={};b.subscribe("/davinci/ui/libraryChanged/start",function(){F={}});return dojo.setObject("davinci.ve.metadata",z)})},"davinci/library":function(){define("dojo/_base/xhr dojo/Deferred ./Runtime ./model/Path ./ve/themeEditor/metadata/CSSThemeProvider ./ve/themeEditor/metadata/query ./workbench/Preferences".split(" "),
function(p,m,h,e,b,k,a){var f={_customWidgets:{}},n={},g={},d={},c={};dojo.subscribe("/davinci/ui/libraryChanged/start",this,function(){c={};d={}});dojo.subscribe("/davinci/resource/resourceChanged",this,function(c,d){var g=require("davinci/Workbench").getProject();if("deleted"==c||"renamed"==c){var f=a.getPreferences("davinci.ui.ProjectPrefs",g),f=(new e(g)).append(f.themeFolder);(new e(d.getPath())).startsWith(f)&&delete n[g]}"File"==d.elementType&&"theme"==d.extension&&"modified"==c&&d.getContent().then(function(c){c=
JSON.parse(c);c.path=[d.getPath()];c.getFile=function(){return system.resource.findResource(this.path[0])}.bind(c);for(var q=0;q<n[g].length;q++)if(n[g][q].name==c.name){n[g][q]=c;return}n[g].push(c)}.bind(this))});return f={themesChanged:function(c){n[c]=c?null:[]},getThemes:function(c,d,g){function f(){var g=[];n[c]&&(g=d?n[c].filter(function(c){return!c.getFile().isVirtual()}):n[c]);return g}g&&delete n[c];if(n[c])return f();g=a.getPreferences("davinci.ui.ProjectPrefs",c);g.themeFolder="themes";
g=(new e(c)).append(g.themeFolder);g=h.serverJSONRequest({url:h.cmdOffset+"cmd/getThemes",handleAs:"json",content:{path:"*.theme",ignoreCase:!0,workspaceOnly:!1,inFolder:g.toString()},sync:!0});g.forEach(function(c){c.getFile=function(){return system.resource.findResource(this.path[0])}.bind(c)}.bind(this));n[c]=g;return f()},getThemeMetadata:function(c){return g[c.name]?g[c.name]:null},addCustomWidgets:function(c,d,g,n){var b=a.getPreferences("davinci.ui.ProjectPrefs",c);b.widgetFolder||(b.widgetFolder=
"./lib/custom",a.savePreferences("davinci.ui.ProjectPrefs",c,b));d=d.getParentFolder().getPath();d=new e(d);g=require("davinci/ve/metadata").parseMetaData(n.name,n,d,g);f._customWidgets[c].hasOwnProperty("name")||(f._customWidgets[c].name="custom",f._customWidgets[c].metaPath=b.widgetFolder,f._customWidgets[c].localPath=!0);f._customWidgets[c]=g;dojo.publish("/davinci/ui/addedCustomWidget",[g]);return g},getCustomWidgets:function(d){if(!f._customWidgets||!f._customWidgets[d]){f._customWidgets||(f._customWidgets=
{});f._customWidgets[d]||(f._customWidgets[d]=[]);var g=a.getPreferences("davinci.ui.ProjectPrefs",d);g.widgetFolder||(g.widgetFolder="./lib/custom",a.savePreferences("davinci.ui.ProjectPrefs",d,g));for(var n=(new e(d)).append(g.widgetFolder).getSegments(),g=system.resource.findResource(n[0]),b=1;b<n.length;b++)var k=g.getChild(n[b]),g=k?k:g.createResource(n[b],!0);var h;g.getChildren(function(c){h=c},!0);this._customWidgetPackages=[];null==h&&(h=[]);n={};for(b=0;b<h.length;b++)if(k=h[b],"Folder"==
k.elementType){n[k.name]=k.getPath();var v="maq-lib-custom-"+k.name,x=k.getURL();require({packages:[{name:v,location:x}]});this._customWidgetPackages.push({name:k.name,location:x})}k=system.resource.findResource("*_widgets.json",!1,g);this._customWidgetDescriptors={};for(b=0;b<k.length;b++){var u=k[b],z=u.getParentFolder(),x=g.getURL(),v=z.getURL(),m=v.substr(x.length+1),x=null;try{x=dojo.fromJson(u.getContentSync())}catch(I){}if(x&&x.customWidgetSpec&&(m=m.split("/").shift(),x.__metadataModuleId=
"maq-lib-custom-"+m,f.addCustomWidgets(d,u,n[m],x),c[d]||(c[d]={}),c[d][z.name]||(c[d][z.name]={}),c[d][z.name][x.version]=v,x&&x.widgets))for(u=0;u<x.widgets.length;u++)(z=x.widgets[u].type)&&(this._customWidgetDescriptors[z]={name:m,location:v,descriptor:x})}}return{custom:f._customWidgets[d]}},getCustomWidgetPackages:function(){return this._customWidgetPackages||[]},getCustomWidgetDescriptors:function(){return this._customWidgetDescriptors?this._customWidgetDescriptors:{}},getInstalledLibs:function(){f._serverLibs||
(f._serverLibs=h.serverJSONRequest({url:"cmd/listLibs",handleAs:"json",content:{},sync:!0})[0].userLibs);return f._serverLibs},getUserLibs:function(c){if(d.base)return d.base;d.base=h.serverJSONRequest({url:h.cmdOffset+"cmd/getUserLibs.json",handleAs:"json",content:{base:c},sync:!0})[0].userLibs;return d.base},getLibRoot:function(d,g,a){var f=new m,n=c;if(n[a]&&n[a][d]&&void 0!==n[a][d][g])return f.resolve(n[a][d][g]||"");n[a]||(n[a]={});n[a][d]||(n[a][d]={});return p.get({url:h.cmdOffset+"cmd/getLibRoots.php",
handleAs:"json",content:{libId:d,version:g,base:a}}).then(function(c){c=c?c[0].libRoot.root:null;n[d]||(n[d]={});n[a][d][g]=c;return f.resolve(c||"")})},modifyLib:function(c){return h.serverJSONRequest({url:"cmd/modifyLib",handleAs:"text",content:{libChanges:JSON.stringify(c)},sync:!0})},addLib:function(c,d){return h.serverJSONRequest({url:"cmd/getLibRoots",handleAs:"json",content:{libId:c,version:d},sync:!0})[0].libRoot.root},getLibraryId:function(c,d){return{sketch:"sketch",claro:"claro"}[c]+(d||
"")},getLibraryName:function(c){var d,g;for(g in c)d=g;return d}}})},"davinci/Runtime":function(){define("davinci/lang/webContent ./commands/CommandStack ./ui.plugin ./html/html.plugin ./js/js.plugin ./ve/ve.plugin".split(" "),function(p,m,h,e,b,k){var a=[h,e,k],f={plugins:[],extensionPoints:[],subscriptions:[],currentSelection:[],commandStack:new m,getUser:function(){return this._initializationInfo.userInfo},getWorkbenchState:function(){return this._initializationInfo?this._initializationInfo.workbenchState:
{activeEditor:null,editors:[],nhfo:{project1:{device:"iphone",layout:"flow",themeSet:{name:"(none)",desktopTheme:"claro",mobileTheme:[{theme:"android",device:"Android"},{theme:"blackberry",device:"BlackBerry"},{theme:"ipad",device:"iPad"},{theme:"iphone",device:"iPhone"},{theme:"iphone",device:"other"}]}}},project:"project1",id:"",Fields:[]}},getSiteConfigData:function(a){return"widgetPalette"==a?{_COMMENT1_:"Defines site-specific organization for widget palette",name:"widgetPalette_dojo_default",
_COMMENT2_:"One entry for each section (\x3d\x3dfolder) in widget palette",_COMMENT3_:"includes provides ordered list of widgets to appear in each section",_COMMENT4_:"each entry in array causes a new item to appear in that section",_COMMENT5_:"each entry in array can be either a string or an array",_COMMENT6_:"if a string, can be either a string that begins with type:, which is a particular widget type",_COMMENT7_:"otherwise the string holds a tag, which causes all widgets that match tag to share that item",
_COMMENT8_:"if an array, then it holds a list of strings, each of which can start with type: (widget type) or a tag",defs:{$XBLOXSection:{id:"xblox",name:"xblox",iconBase64:"data:image/gif;base64,R0lGODlhEAAQAKIAAFhYWtXV1v///0BAQP///wAAAAAAAAAAACH5BAEAAAQALAAAAAAQABAAAAMuSLo0w5CNIF6EM9grN2+Z82WCEGjcVJbopa5tlJ2nh4W2XH9LyCu+X/AHAPyOCQA7",subsections:["$XBLOXSection_Controls"]},$XBLOXSection_Controls:{id:"Controls",name:"Controls",iconBase64:"data:image/gif;base64,R0lGODlhEAAQALMAAN7e4oyMjtXV1sDAwf///+Dg4MvLyzMzM////wAAAAAAAAAAAAAAAAAAAAAAAAAAACH5BAEAAAgALAAAAAAQABAAAAQ3EMlJq704a3RO2NIhBIexHYRgeFTndkQ8HmER33g60EcB/ECcYBd6wWSkDErFUs5Mms4HRK1SIwA7",
includes:["RunScript","CSSState","StyleState","Script"]},$ClipartSection_Arrows:{id:"Arrows",name:"Arrows",iconBase64:"data:image/gif;base64,R0lGODlhEAAQALMAAN7e4oyMjtXV1sDAwf///+Dg4MvLyzMzM////wAAAAAAAAAAAAAAAAAAAAAAAAAAACH5BAEAAAgALAAAAAAQABAAAAQ3EMlJq704a3RO2NIhBIexHYRgeFTndkQ8HmER33g60EcB/ECcYBd6wWSkDErFUs5Mms4HRK1SIwA7",includes:["ArrowDown","ArrowLeft","ArrowRight","ArrowUp"]},$ClipartSection_Community:{id:"Community",name:"Community",iconBase64:"data:image/gif;base64,R0lGODlhEAAQAMQAANXV1v///9HR0cXFxbm5uaKiooyMjHR0dGlpaVJSUkZGRkREREJCQkFBQT09PTo6OjMzM////wAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAACH5BAEAABEALAAAAAAQABAAAAVdIJEoZGmSiTgAbOuywwgEdAAY5WyTul0gAYFCB+DRWJCAqFArDo+QRcDRgBCNu1rgueMWG4FHw4u1Maa9bg8AdqSd6/a7zEZr4U35vRw4KA5aOwkrL4UxIieJCikhADs\x3d",
includes:["Facebook","Rss","Twitter"]},$ClipartSection_Devices:{id:"Devices",name:"Devices",iconBase64:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAMAAAAoLQ9TAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAA2hpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuMC1jMDYxIDY0LjE0MDk0OSwgMjAxMC8xMi8wNy0xMDo1NzowMSAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wTU09Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9tbS8iIHhtbG5zOnN0UmVmPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvc1R5cGUvUmVzb3VyY2VSZWYjIiB4bWxuczp4bXA9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC8iIHhtcE1NOk9yaWdpbmFsRG9jdW1lbnRJRD0ieG1wLmRpZDowMTgwMTE3NDA3MjA2ODExOTJCMEJDQTgxOTc0RDYxMiIgeG1wTU06RG9jdW1lbnRJRD0ieG1wLmRpZDo4NTQ0QUU2NjhCMzMxMUUyOTQ3N0ExRTg0NEJENzk4RiIgeG1wTU06SW5zdGFuY2VJRD0ieG1wLmlpZDo4NTQ0QUU2NThCMzMxMUUyOTQ3N0ExRTg0NEJENzk4RiIgeG1wOkNyZWF0b3JUb29sPSJBZG9iZSBQaG90b3Nob3AgQ1M1LjEgTWFjaW50b3NoIj4gPHhtcE1NOkRlcml2ZWRGcm9tIHN0UmVmOmluc3RhbmNlSUQ9InhtcC5paWQ6MDM4MDExNzQwNzIwNjgxMTkyQjBCQ0E4MTk3NEQ2MTIiIHN0UmVmOmRvY3VtZW50SUQ9InhtcC5kaWQ6MDE4MDExNzQwNzIwNjgxMTkyQjBCQ0E4MTk3NEQ2MTIiLz4gPC9yZGY6RGVzY3JpcHRpb24+IDwvcmRmOlJERj4gPC94OnhtcG1ldGE+IDw/eHBhY2tldCBlbmQ9InIiPz7l5plaAAAAIVBMVEX///8zMzP3+PnV1dZ+fn7ExMZ9fX4sKis1NTVZWVmgoKKPJ3BhAAAARElEQVR42mJgIAIwM8IBM1iAkRkO2KECTFBAiQCaoZjWsrKxcgIxEHKA+BysbGysQIKLi5OVEyjCiAYYWNAAYa8CBBgA3BQB3Pw68r4AAAAASUVORK5CYII\x3d",
includes:["Cellphone","Computer","Laptop","Server","Tablet"]},$ClipartSection_DeviceSilhouettes:{id:"DeviceSilhouettes",name:"Device Silhouettes",iconBase64:"data:image/gif;base64,R0lGODlhEAAQAKIAAGZmaNXV1v///0BAQP///wAAAAAAAAAAACH5BAEAAAQALAAAAAAQABAAAAM6SErT3iu+EF5UL4/LqPfbNQRCaVbcaJ6hRK4CKr6r7MJxu6iwvX8fHUbjSDUAFEBR5AAol0wNZzpNAAA7",includes:"Android_340x480 Android_480x800 AndroidTablet Blackberry iPad iPhone".split(" ")},$ClipartSection_Media:{id:"Media",name:"Media",iconBase64:"data:image/gif;base64,R0lGODlhEAAQALMAANXV1v////z8/Pr6+vn5+fj4+Ojo6MrKyre3t6urq4iIiHV1dUdHR0BAQDMzM////yH5BAEAAA8ALAAAAAAQABAAAARZ8MlJq6Ut36c5+E3VOGAGBEAWeif6DULghk0rB8jCLAhK2zjFoXBQIFKeW2BxSDQShwWypmQUGoZGgTEFMp1Q6U+JEBKN3RsBp+P5WJ+4HCRR2e+rjX5PiQAAOw\x3d\x3d",
includes:"Camera Chat GraphBar GraphLine GraphPie Image Map Microphone PlayControl Record StreetMap Table VideoCamera VideoPlayer".split(" ")},$ClipartSection_UserInterfaceControls:{id:"UserInterfaceControls",name:"User Interface Controls",iconBase64:"data:image/gif;base64,R0lGODlhEAAQALMAAFhYWtXV1qurrKGhooKCg/////X19TMzM////wAAAAAAAAAAAAAAAAAAAAAAAAAAACH5BAEAAAgALAAAAAAQABAAAARSEElwqrUyHxG678KRIVthDoNZhGNZBFVgsppQGId5GKtYF5dKr8X5eGiSoNKXJAie0CeBSbKprsgqMDj84XS8rAt2kHWT1gJKJS4aA1nSspKJAAA7",includes:"File Folder FormattingToolbox HScrollBar HSplit ProgressBar SpinInput VScrollBar VSplit WaitingPending".split(" ")},
$ClipartSection_UserInterfaceIcons:{id:"UserInterfaceIcons",name:"User Interface Icons",iconBase64:"data:image/gif;base64,R0lGODlhEAAQANUAANXT1vj4+eLi49/f4Nra29nZ2tbW19XV1tTU1dDQ0c3NzpCQkf////7+/vX19fLy8vDw8O/v7+zs7OTk5OPj49nZ2dHR0c/Pz87Ozs3NzczMzKWlpaOjo6KioqGhoZ6enp2dnZycnJubm5mZmY+Pj4aGhoWFhYGBgX5+fnR0dHNzc2lpaWZmZllZWVdXV1VVVVNTU1FRUU5OTk1NTUxMTEJCQkBAQDY2NjMzMzIyMi8vLyoqKiYmJiMjI////wAAACH5BAEAAD4ALAAAAAAQABAAAAa8QJ/Qd0HRdD0dDXUZDj8ykqJgKGBIso/zs9IIIoFGICLQrLREWUZSmeHetookI2ueFgIGC6fSqHAzDAILJz4yFhF6LA8MD28MEQkyPjkEAQyYjS04LAwBBDk+PAYNmQ+bLYwNBjw+OJaZGzipmA4EOD4xB4mYIzgjmREHMT4mIhSZyZgUIiZELwgSvb+YEggvTT4eKQgDEB01HRATCCkcThwuIAcEAAQHIS/nTj4WJTA3OzcwJRb0/wB9BAEAOw\x3d\x3d",
includes:"Close Copy Delete Edit Error Fatal Help Home Info Lock Mail Minus Next Paste Plus Previous Print Refresh Save Search ShoppingCart Trash Warning".split(" ")},$ClipartSection_Other:{id:"Other",name:"Other",iconBase64:"data:image/gif;base64,R0lGODlhEAAQAJEAAHx8fDMzM////wAAACH5BAEAAAIALAAAAAAQABAAAAImlI9pAYoQDGxuHpvwZY8rrH1MWAWes53oRHZUK4Rkq8Gxp4roXgAAOw\x3d\x3d",includes:["Browser","Person","ProfilePicture","X"]},$ClipartSection:{id:"Clipart",name:"Clip Art",iconBase64:"data:image/gif;base64,R0lGODlhEAAQAKIAAFhYWtXV1v///0BAQP///wAAAAAAAAAAACH5BAEAAAQALAAAAAAQABAAAAMuSLo0w5CNIF6EM9grN2+Z82WCEGjcVJbopa5tlJ2nh4W2XH9LyCu+X/AHAPyOCQA7",
subsections:"$ClipartSection_Arrows $ClipartSection_Community $ClipartSection_Devices $ClipartSection_DeviceSilhouettes $ClipartSection_Media $ClipartSection_UserInterfaceControls $ClipartSection_UserInterfaceIcons $ClipartSection_Other".split(" ")},$DrawingToolsSection:{id:"DrawingTools",name:"Drawing Tools",iconBase64:"data:image/gif;base64,R0lGODlhEAAQAKIAAL+/v5aWlmNjYzMzMxwcHBYWFv///wAAACH5BAEAAAYALAAAAAAQABAAAAMgaLrc/jBKFsBcg9g7iuaFZwlhaZrD1Ikqq35Xdc10PScAOw\x3d\x3d",includes:"Text Line Arrow Polyline PolylineArrow Circle Rectangle RoundedRectangle".split(" ")},
$ViewsSection:{id:"Views",name:"Views",_COMMENT1_:"Mobile-only view widgets, often representing a single screen of UI",iconBase64:"data:image/gif;base64,R0lGODlhEAAQANUAAC5KhTFOiPj6/jJRijRTjTRUjTdXkTdXkLrH3+Hp+OHp9zdakzZYkDdYkDlbkzlck97o+ODp+N/o9ztflj5km/L2/Pj6/T5mnD9mnT5lm0FqoENupENuo0Ruo0ZxpvL2+0l3rEl4rEh2qkl3q0l2qk6BtE1+sU+BtFCDtVCFt1CEtlSLvVOJulOHuVaOv7nW78/t+////////wAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAACH5BAEAADIALAAAAAAQABAAAAaAQJlwSCwKXcikcilzxZ5QaApGVclWMUAWMFhgYiRYACGStaJoDKzyuchQr7hc3jAwGAeZCR1lKRIRLDIjWVtdXyUSEhAnMh58UCCKECEyGnOYHRsbHBwyFJBPGVQwFDIThQBcXjEOYggOMg+hMQUwFgIEsg+8vb0BwMBGw8TFQkEAOw\x3d\x3d",
includes:["ScrollableView","SwapView","View"]},$HeadingSection:{id:"Heading, Section Labels",name:"Heading",_COMMENT1_:"Mobile-only Heading widgets, often titles at top of a screen",iconBase64:"data:image/gif;base64,R0lGODlhEAAQAMQAAEh1qkd2q0d2qkh2q0h2qkt7r0t8r0+BtU6CtFGGuVGHuVSLvFaNv1WLvKzM6a3M6a3M6LfS7DJlklaOv4y64Iy635zD5J3E5KzN6azM6IK13Iy734273////////wAAACH5BAEAAB4ALAAAAAAQABAAAAVQoCeOZGmeaKqqU+u+LdN6U2Tf+D15S5ZJwIzjgXFkIJmGJ2GRtCSbTWc6vSg8hw0HCN1UKFotwlPQmM/os8FDIADcgYGAIJgD3qu8fs/nhwAAOw\x3d\x3d",
includes:["Heading","ToolBarButton"]},$ContainersSection_Dojo:{id:"ContainersSection_Dojo",name:"Dojo",iconBase64:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAACXBIWXMAAAsTAAALEwEAmpwYAAAKT2lDQ1BQaG90b3Nob3AgSUNDIHByb2ZpbGUAAHjanVNnVFPpFj333vRCS4iAlEtvUhUIIFJCi4AUkSYqIQkQSoghodkVUcERRUUEG8igiAOOjoCMFVEsDIoK2AfkIaKOg6OIisr74Xuja9a89+bN/rXXPues852zzwfACAyWSDNRNYAMqUIeEeCDx8TG4eQuQIEKJHAAEAizZCFz/SMBAPh+PDwrIsAHvgABeNMLCADATZvAMByH/w/qQplcAYCEAcB0kThLCIAUAEB6jkKmAEBGAYCdmCZTAKAEAGDLY2LjAFAtAGAnf+bTAICd+Jl7AQBblCEVAaCRACATZYhEAGg7AKzPVopFAFgwABRmS8Q5ANgtADBJV2ZIALC3AMDOEAuyAAgMADBRiIUpAAR7AGDIIyN4AISZABRG8lc88SuuEOcqAAB4mbI8uSQ5RYFbCC1xB1dXLh4ozkkXKxQ2YQJhmkAuwnmZGTKBNA/g88wAAKCRFRHgg/P9eM4Ors7ONo62Dl8t6r8G/yJiYuP+5c+rcEAAAOF0ftH+LC+zGoA7BoBt/qIl7gRoXgugdfeLZrIPQLUAoOnaV/Nw+H48PEWhkLnZ2eXk5NhKxEJbYcpXff5nwl/AV/1s+X48/Pf14L7iJIEyXYFHBPjgwsz0TKUcz5IJhGLc5o9H/LcL//wd0yLESWK5WCoU41EScY5EmozzMqUiiUKSKcUl0v9k4t8s+wM+3zUAsGo+AXuRLahdYwP2SycQWHTA4vcAAPK7b8HUKAgDgGiD4c93/+8//UegJQCAZkmScQAAXkQkLlTKsz/HCAAARKCBKrBBG/TBGCzABhzBBdzBC/xgNoRCJMTCQhBCCmSAHHJgKayCQiiGzbAdKmAv1EAdNMBRaIaTcA4uwlW4Dj1wD/phCJ7BKLyBCQRByAgTYSHaiAFiilgjjggXmYX4IcFIBBKLJCDJiBRRIkuRNUgxUopUIFVIHfI9cgI5h1xGupE7yAAygvyGvEcxlIGyUT3UDLVDuag3GoRGogvQZHQxmo8WoJvQcrQaPYw2oefQq2gP2o8+Q8cwwOgYBzPEbDAuxsNCsTgsCZNjy7EirAyrxhqwVqwDu4n1Y8+xdwQSgUXACTYEd0IgYR5BSFhMWE7YSKggHCQ0EdoJNwkDhFHCJyKTqEu0JroR+cQYYjIxh1hILCPWEo8TLxB7iEPENyQSiUMyJ7mQAkmxpFTSEtJG0m5SI+ksqZs0SBojk8naZGuyBzmULCAryIXkneTD5DPkG+Qh8lsKnWJAcaT4U+IoUspqShnlEOU05QZlmDJBVaOaUt2ooVQRNY9aQq2htlKvUYeoEzR1mjnNgxZJS6WtopXTGmgXaPdpr+h0uhHdlR5Ol9BX0svpR+iX6AP0dwwNhhWDx4hnKBmbGAcYZxl3GK+YTKYZ04sZx1QwNzHrmOeZD5lvVVgqtip8FZHKCpVKlSaVGyovVKmqpqreqgtV81XLVI+pXlN9rkZVM1PjqQnUlqtVqp1Q61MbU2epO6iHqmeob1Q/pH5Z/YkGWcNMw09DpFGgsV/jvMYgC2MZs3gsIWsNq4Z1gTXEJrHN2Xx2KruY/R27iz2qqaE5QzNKM1ezUvOUZj8H45hx+Jx0TgnnKKeX836K3hTvKeIpG6Y0TLkxZVxrqpaXllirSKtRq0frvTau7aedpr1Fu1n7gQ5Bx0onXCdHZ4/OBZ3nU9lT3acKpxZNPTr1ri6qa6UbobtEd79up+6Ynr5egJ5Mb6feeb3n+hx9L/1U/W36p/VHDFgGswwkBtsMzhg8xTVxbzwdL8fb8VFDXcNAQ6VhlWGX4YSRudE8o9VGjUYPjGnGXOMk423GbcajJgYmISZLTepN7ppSTbmmKaY7TDtMx83MzaLN1pk1mz0x1zLnm+eb15vft2BaeFostqi2uGVJsuRaplnutrxuhVo5WaVYVVpds0atna0l1rutu6cRp7lOk06rntZnw7Dxtsm2qbcZsOXYBtuutm22fWFnYhdnt8Wuw+6TvZN9un2N/T0HDYfZDqsdWh1+c7RyFDpWOt6azpzuP33F9JbpL2dYzxDP2DPjthPLKcRpnVOb00dnF2e5c4PziIuJS4LLLpc+Lpsbxt3IveRKdPVxXeF60vWdm7Obwu2o26/uNu5p7ofcn8w0nymeWTNz0MPIQ+BR5dE/C5+VMGvfrH5PQ0+BZ7XnIy9jL5FXrdewt6V3qvdh7xc+9j5yn+M+4zw33jLeWV/MN8C3yLfLT8Nvnl+F30N/I/9k/3r/0QCngCUBZwOJgUGBWwL7+Hp8Ib+OPzrbZfay2e1BjKC5QRVBj4KtguXBrSFoyOyQrSH355jOkc5pDoVQfujW0Adh5mGLw34MJ4WHhVeGP45wiFga0TGXNXfR3ENz30T6RJZE3ptnMU85ry1KNSo+qi5qPNo3ujS6P8YuZlnM1VidWElsSxw5LiquNm5svt/87fOH4p3iC+N7F5gvyF1weaHOwvSFpxapLhIsOpZATIhOOJTwQRAqqBaMJfITdyWOCnnCHcJnIi/RNtGI2ENcKh5O8kgqTXqS7JG8NXkkxTOlLOW5hCepkLxMDUzdmzqeFpp2IG0yPTq9MYOSkZBxQqohTZO2Z+pn5mZ2y6xlhbL+xW6Lty8elQfJa7OQrAVZLQq2QqboVFoo1yoHsmdlV2a/zYnKOZarnivN7cyzytuQN5zvn//tEsIS4ZK2pYZLVy0dWOa9rGo5sjxxedsK4xUFK4ZWBqw8uIq2Km3VT6vtV5eufr0mek1rgV7ByoLBtQFr6wtVCuWFfevc1+1dT1gvWd+1YfqGnRs+FYmKrhTbF5cVf9go3HjlG4dvyr+Z3JS0qavEuWTPZtJm6ebeLZ5bDpaql+aXDm4N2dq0Dd9WtO319kXbL5fNKNu7g7ZDuaO/PLi8ZafJzs07P1SkVPRU+lQ27tLdtWHX+G7R7ht7vPY07NXbW7z3/T7JvttVAVVN1WbVZftJ+7P3P66Jqun4lvttXa1ObXHtxwPSA/0HIw6217nU1R3SPVRSj9Yr60cOxx++/p3vdy0NNg1VjZzG4iNwRHnk6fcJ3/ceDTradox7rOEH0x92HWcdL2pCmvKaRptTmvtbYlu6T8w+0dbq3nr8R9sfD5w0PFl5SvNUyWna6YLTk2fyz4ydlZ19fi753GDborZ752PO32oPb++6EHTh0kX/i+c7vDvOXPK4dPKy2+UTV7hXmq86X23qdOo8/pPTT8e7nLuarrlca7nuer21e2b36RueN87d9L158Rb/1tWeOT3dvfN6b/fF9/XfFt1+cif9zsu72Xcn7q28T7xf9EDtQdlD3YfVP1v+3Njv3H9qwHeg89HcR/cGhYPP/pH1jw9DBY+Zj8uGDYbrnjg+OTniP3L96fynQ89kzyaeF/6i/suuFxYvfvjV69fO0ZjRoZfyl5O/bXyl/erA6xmv28bCxh6+yXgzMV70VvvtwXfcdx3vo98PT+R8IH8o/2j5sfVT0Kf7kxmTk/8EA5jz/GMzLdsAAAAgY0hSTQAAeiUAAICDAAD5/wAAgOkAAHUwAADqYAAAOpgAABdvkl/FRgAAAg9JREFUeNp8ks1rE0EYxn9bE/xqikI0lITiQW+VImoONmCQtoonUbAglFDEUtlLxdo/wUNRD0Iw1kOIEmj6D9ir2FRQi4j0lILQJoimRfJB9mNmOx42iWsT+8Iw7DwPv32feUdTSuGtyeQKaT3GZHJlGEgA40AOyKT1WL6lt0rbC2hC9IFg7/a1c5HAib5Dc+WqOb/8pVjb3K4H03os6fVqXToYHgj2RiYun34KhD1S6c27jYeb2/ViWo/lW4c9dFYiPtgfMIQTNoRDw3YwbIeGcMLxwf5AM1a7fF0A436fL15pSNAUGqCUhqYp/P4Dc0AImNoPkNvaqX8MHDn4SkOBiwA0Kg1rHoh6zd0iZD4VyrWaKUpVQ1I1bSqGpGKI0udCuQZk/gu4+XhZpfXY2amRM88vnjq2vlMz7xn2biF41L8+FAl8f5a4cFw4u/mrj3KqK0BYNkDqzv3UyR6N32uFn9H334qhtY1fhyf0lzEgVd76oQDaEKVUe43NLirP97Rnn97rG5tdRCnldrCw9EFd0TNKNEwARmayCkg1tRdAavRBVo3OZAFwpMQR8m+E12+/YjcMzW4CpBsFF7AKgG1aCNM9l4bd9vjc7FZ73gDCtDpGIw27Oc5/9R6AuzeiSFsqRwjX7DH0hYK0fiKbHSSuDyEtq/MSu63zt56o/fRuL5HWxS4srTJ1+xL71Z8BAL+kU+9a36VRAAAAAElFTkSuQmCC",
includes:[["AccordionContainer","Accordion"],"BorderContainer","Container","ContentPane","FixedSplitter","Form","GridLayout","MenuBar","Pane","RoundRect","ScrollablePane","TabContainer","TitlePane","ToolBar"]},$ContainersSection_HTML:{id:"ContainersSection_HTML",name:"HTML",iconBase64:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyBpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuMC1jMDYwIDYxLjEzNDc3NywgMjAxMC8wMi8xMi0xNzozMjowMCAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENTNSBXaW5kb3dzIiB4bXBNTTpJbnN0YW5jZUlEPSJ4bXAuaWlkOjVFNUZFNTNBNTk0QjExRTBBNkY0ODEzNDdCMzkxNTdDIiB4bXBNTTpEb2N1bWVudElEPSJ4bXAuZGlkOjVFNUZFNTNCNTk0QjExRTBBNkY0ODEzNDdCMzkxNTdDIj4gPHhtcE1NOkRlcml2ZWRGcm9tIHN0UmVmOmluc3RhbmNlSUQ9InhtcC5paWQ6NUU1RkU1Mzg1OTRCMTFFMEE2RjQ4MTM0N0IzOTE1N0MiIHN0UmVmOmRvY3VtZW50SUQ9InhtcC5kaWQ6NUU1RkU1Mzk1OTRCMTFFMEE2RjQ4MTM0N0IzOTE1N0MiLz4gPC9yZGY6RGVzY3JpcHRpb24+IDwvcmRmOlJERj4gPC94OnhtcG1ldGE+IDw/eHBhY2tldCBlbmQ9InIiPz5wB++kAAABAklEQVR42qRToQ7CMBC9LYhK5Bz9AyaHYhIHEomcYxI5iRwOOYkcDgkKWxxyuElwnSq5hpJ2tAvJXnK5vuvd60u7eUII6IOBTo67SafafH31foroQEWZR8IFVibis2/M+G3BV9NYTydkCJSGPy59WzOKtMMlYghUTwLsXsMsLQA4yIwc10GUyaBxLvusAuGigM3+BHFIJceMnFW182K/ApfbQ6jhdBnjoTLrIljjLgF9WIcu0ulgm8zgzCrID2ejATnWcV+htt3BdDzydBHOzWEaBLLGucMB4lQkXycIffivTxmBzYdsJdcqd8GHnmg5ILDfLrXHIpaHIwbz+v7ObwEGADGQtFOesBZAAAAAAElFTkSuQmCC",
includes:["\x3ca\x3e","\x3cdiv\x3e","\x3cspan\x3e","\x3ctable\x3e","\x3cstyle\x3e"]},$ContainersSection:{id:"Containers",name:"Containers",_COMMENT1_:"Desktop and mobile containers",_COMMENT2_:"Note that default desktop preset only include desktop widgets",_COMMENT3_:"and mobile preset only include mobile widgets",iconBase64:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAARJJREFUeNqkUzFuhEAMNFHqHAUEiU9Q0PKS3BNo6O9aJMQDqHkM4iG05CJdGgpgfXhvvVqyECHdSNaO7PWMsRYHEaGua+z7Hgi+7wPzLZh14kACZVniPM8yTM4xTZMOqpv8nZSEENqB+e/9DmIRJ6A6Xddd3aW8FFhcrFE/TifdaEHllymeAkQYQRBAURS7OwjDEFh2U6DrOrheLrDjDXmea64FxnHU4w7DIJt/bt+AAtVenqf36cs6/DcBc2piAUSxriszMn6DF2FNcAR45BM8z9tc5N+7lkAURZBl2a57HMe2gHxIajFt20JVVasHY06Spimcv87AfS8v0eG/sWkamUiSBJhvwawTd3bf+0E8BBgAL2nsdz3dOk4AAAAASUVORK5CYII\x3d",
subsections:["$ContainersSection_Dojo","$ContainersSection_HTML"]},$ListsSection:{id:"Lists",name:"Lists",_COMMENT1_:"Mobile-only List widgets",iconBase64:"data:image/gif;base64,R0lGODlhEAAQAMQAADlck9jf6ra/zGiKukNvpERvo/P3/Ex7r0x9sUx8r1KHuVKHuFaOv3io0bnW78jg8////////wAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAACH5BAEAABEALAAAAAAQABAAAAVWYCSOZGmeptEwbNs2hmgwgWHfd8DETQD9wKAh0IgsDBBEcGlQRBLIpfTwdFiv2CsVKp1GCkhlF2IgRAaC8c8gGEQeAAFuLgA8RI8BYM/nD+4ogYKDgiEAOw\x3d\x3d",includes:"RoundRectCategory RoundRectList RoundRectDataList EdgeToEdgeCategory EdgeToEdgeList EdgeToEdgeDataList ListItem".split(" ")},
$ControlsSection_Buttons:{id:"Buttons",name:"Buttons",iconBase64:"data:image/gif;base64,R0lGODlhEAAQANUAAC5KhTFPijZXkDZYkDxhmTtimUJsouHr9/D1+0h2q0l3q7XQ7bbQ7bbQ7MLX79vo9k6AtE6Bs6TH6bbR7NLj9FKJu1OJulaNv5C95aTH6KTI6LXR7L/Z8Mje8laOv36z4X604JC95LnW77/a8Nzr9////wAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAACH5BAEAACUALAAAAAAQABAAAAZiwJJwSCwaj8hk0cP0XJpQj9ByqFqvVUSlFDk4vuCw4wApKR6MxmLCbm8mj0TJQNFI7nh8hmIoFTohGIKDgyEdBCUDHCAfHyCPkI0jAiUBIpeYmZckAUIAn6ChoEqkpaanRUEAOw\x3d\x3d",
includes:[["Button","\x3cbutton\x3e"],"ComboButton","DropDownButton","ToggleButton"]},$ControlsSection_CheckboxesRadios:{id:"CheckboxesRadios",name:"Checkboxes, RadioButtons, Switch",iconBase64:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAP9JREFUeNpi/P//P8PGnQf/M5AJWGAMf3d7kjUDLUYYAAITd94kWnO+uzqqC2DAQkGAgYEDwpbg4ICLv/jxA8IAUicefMD0Agw8+ABRCNL7geEHXBwkHG4uD2avuPAAtwEQS4Cqf3DAtX8A2p5urw6Xv3DjBZzNhMuPP6Da0TUHdu5ksNCQwG0ASEO8uToYv/iAqtmxcSODAjCMBAQ48BuAHtIwzQZAmzUkBIBhzIHfCyBnIgNkzQJIMYPVAJACkDNBmghpxhoLEkD/CXBIgBUXzjzI4GCgAHE2B4GkDE8HLxDpQACq8cWHH4TzAnqgkZyZQBmDHMAIys6UAIAAAwBz81X4fS5oMgAAAABJRU5ErkJggg\x3d\x3d",
includes:["CheckBox","RadioButton","Switch","TriStateCheckBox"]},$ControlsSection_IconContainer:{id:"IconContainer",name:"IconContainer",_COMMENT1_:"Mobile-only",iconBase64:"data:image/gif;base64,R0lGODlhEAAQAMQAACVLiiVLiDlck/P2+zxhlzpppj9mnDh3xUJtokdzp3ak21ON0FCDvEp6rU6As1SKvFaOv////wAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAACH5BAEAABEALAAAAAAQABAAAAVoYBRBZGmWIjSsbMtC0TMo9FzTyvBEzrD8PuBvMXBEGoODMrlUHgaNSMJFXSUiiAGgwNByvV1ExFClGiIEWw6nHhAigiBxKB8I4MynM2/Hl1t3cQFfg12FfXF/LHdwAo6PkI4ik5SVkyEAOw\x3d\x3d",
includes:["IconContainer","IconItem","IconMenu","IconMenuItem"]},$ControlsSection_Pickers:{id:"Pickers",name:"Pickers",iconBase64:"data:image/gif;base64,R0lGODlhEAAQANUAAKFMUiI5ZjxsuTlckz1jmj1jmVyL0T1kmUNvpERvpERuo0Rvo16W2jx7wEeO4Et7r0x7r26ayUt8r0x8rqrS+lGHuVKHuZXN/1aOv6u7yJypq+38++v6+aiysJ6uqWpNK5RcON6CV+esnbq2tf/X0t26tuxmXtaJhL+Zmf///wAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAACH5BAEAACkALAAAAAAQABAAAAZswJRwSCwSA8YhUrlMBpbPpjEqfCarUmlRezVivmBMKgweXyIMgUGMOafXKcvog2o4LKnKvH5PTUIgIh0UECkPgIIUEikLGQAnGxoJKQiOkBoKKQUcJSYkHgUpBJyeHgcpA6mqA6irqV2wsUJBADs\x3d",
includes:"Carousel CarouselItem DataCarousel DatePicker SpinWheel SpinWheelSlot SpinWheelDatePicker SpinWheelTimePicker TimePicker ValuePicker ValuePickerSlot ValuePickerDatePicker ValuePickerTimePicker".split(" ")},$ControlsSection_Select:{id:"Select",name:"Select",iconBase64:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAVJJREFUeNpi/P//PwMlgAVEhPcf+E+RAb++fWeoz3QlqLhxxh6G+gwXBH/6bgYmEOPHp69gAVGGvwxijH8ZhP/9AbNhWJwRgn9+/AxWl5TYy/D61hOgvi8QF3z/8Akswc/JjGLjfwZGMM0IZIHY3z5ADDi4ogQs+23+XgZGUCBaRE4EByUjRBeUATOEASoANe4/0DhGqOh/aBjIm+kzfn37/n+IkxZJAbhm3zWIAX9//WHg4OVlMDBQZhD6+5doA7aceQQx4M/PnwywePRN6IVEDzsrAysnJwMHDxcDGxCDaFZODoZJqfZwA/78+AWLxh9wf+9cWkK0C359/wEx4DeQAXOBe3QPXhfAwKwsJ3D6gSckmAGHV5cT7YLf36AuADkFBmxDO4lyweJCZ7DLIbEADIz/0DA4vaGSeBcA9YETkpF/JyLNMGBJTXgAI6XZGSDAAJsyjhMJL+H/AAAAAElFTkSuQmCC",
includes:["ComboBox","DropDownButton",["DropDownSelect","\x3cselect\x3e"],"FilteringSelect","MultiSelect","Select","\x3cselect\x3e"]},$ControlsSection_SlidersSpinners:{id:"SlidersSpinners",name:"Sliders, Spinners",iconBase64:"data:image/gif;base64,R0lGODlhEAAQANUAAM7W5DdYkDteljpfloOcwUBonkBonUFonkdzqEdzp3CUv+Tt+EZzp9Xk9Njm9dvo9kx+sU1+sZ/E6K3M68re8tDh89fm9VKHuYO14pC95ZG95Z/F6KzM663N68ne8tDi89Xl9FaOv4O24pG+5aDJ6tXj76nR7v///wAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAACH5BAEAACcALAAAAAAQABAAAAZZwJNwSCwaj8ikcjkMOZ/J0KJBbSxCyMtnwulMPpdiKcSIUDZoiSfCCJWEERIB8RhpMppHglCBCA0mJgoHFiIYDgYKgQVCAAGPAQIgIAOQAQBIj0ybnJ2eJ0EAOw\x3d\x3d",
includes:["HorizontalSlider","NumberSpinner","Slider","TimeSpinner","VerticalSlider"]},$ControlsSection_TextBox:{id:"TextBox",name:"TextBox",iconBase64:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAM1JREFUeNpi/P//PwMlgImBQkCxASzIHIvIif/lzfQZHp66yHBieT4jUSaAwgAZm0dM+I8uhg+DXRDefwAckqGWCmBD15x48H/18QcELV9Z6MAINuDPz98MtWmODBKcTAw9QL6NvhyDipoMXs0ts/chwuD39+9gDjfDfzgtyvAXe6hDQ+bXtx8IA94+eArmsLMywml+Bmbc4cbAyPD24VOEAX9//WLIyJ7KkBJiARZctPE0w5w1JxjoEgtM2NIBiCY2ITEO/bxAsQEAAQYAGVGarS2fPq4AAAAASUVORK5CYII\x3d",
includes:[["TextBox","\x3cinput\x3e"],"ComboBox","CurrencyTextBox","DateTextBox","DateTimeTextBox","NumberTextBox","SimpleTextarea",["Textarea","TextArea","ExpandingTextArea"],"ValidationTextBox","TimeTextBox"]},$ControlsSection_Toolbars:{id:"Toolbars",name:"Toolbars, ButtonBars",iconBase64:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAOtJREFUeNpi/P//PwMlgAVEhPcf+E+RAX9+/mKoTXMiWXPTzH0MTCDGzy9f4YIxmZOIokHg19dvDIygMHAtWPq/vjQYLPgfCHecf8ngaSTOsP0cHtpQgqGxey3ECyCT3n/9CdINNsJCTZDh/ZdfcNoSRH9G8C1UBYDqfyBcYJowg7JAlJCVYGgu9CFZc+2ErRAD/v39BxZQ4STNgL9//kBi4R+QQQ749+cvzIC/ZBoAdcFfSl3w69t3sgwA6QMb8PsfeVH4599/aCwA00Jy2QIG5n+YJv1lYgKLw+h/QBqUaCBizJCERAkACDAAug6MMt3XrLUAAAAASUVORK5CYII\x3d",
includes:["TabBar","TabBarButton","Toolbar"]},$ControlsSection_Other:{id:"Other",name:"Other",iconBase64:"data:image/gif;base64,R0lGODlhEAAQANUAADlckzthmDxhl0BonkBonUVwpUp6rU+BtU+CtFOJu1OKu1aOv/b8//n9/8/t++/6//L7/+v5/+76//X8//j9/+v6/+77/+/7//L8//b9//X9//n+//j+///ovfvcsvTKofTJofbKo/TJo/TKo+20kOegfeeffuegfuWfff///wAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAACH5BAEAACkALAAAAAAQABAAAAZfwJRwSCwaj8ikUrloOp/QVIJErZIc2Kwiheh4v9dKpEI+pAyetPp6eVgsEkOq8AGNRKAQyoGB9DEFKQRWVHsTGgwaGQMpAiclJiYoJ3sNDRwbFAEpAJ2en6BLoqOkpEEAOw\x3d\x3d",
includes:["ProgressIndicator","Rating","SearchBox"]},$ControlsSection:{id:"Controls",name:"Controls",_COMMENT1_:"each section can either have an array of subsections or an array of includes",iconBase64:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAIAAACQkWg2AAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyBpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuMC1jMDYwIDYxLjEzNDc3NywgMjAxMC8wMi8xMi0xNzozMjowMCAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENTNSBXaW5kb3dzIiB4bXBNTTpJbnN0YW5jZUlEPSJ4bXAuaWlkOjgyQUEwNTdCNTk1MTExRTBCODIzOTk0QzIzMzdBNkNGIiB4bXBNTTpEb2N1bWVudElEPSJ4bXAuZGlkOjgyQUEwNTdDNTk1MTExRTBCODIzOTk0QzIzMzdBNkNGIj4gPHhtcE1NOkRlcml2ZWRGcm9tIHN0UmVmOmluc3RhbmNlSUQ9InhtcC5paWQ6ODJBQTA1Nzk1OTUxMTFFMEI4MjM5OTRDMjMzN0E2Q0YiIHN0UmVmOmRvY3VtZW50SUQ9InhtcC5kaWQ6ODJBQTA1N0E1OTUxMTFFMEI4MjM5OTRDMjMzN0E2Q0YiLz4gPC9yZGY6RGVzY3JpcHRpb24+IDwvcmRmOlJERj4gPC94OnhtcG1ldGE+IDw/eHBhY2tldCBlbmQ9InIiPz7ZOYfnAAABBUlEQVR42pRSKxCDMAztdgjkJBKJnKxETk5WIpGTlcjKykpk5SSyEolETk4iI9eRrpSud7tF5NK8vHweHHoz38cHSdmVlhFkM5lN9W2dJDTKRJDNZBgxrum5oOdynB7j9NSC+aJhXjC4VCfrHQErLO0dsN2cBUDwjosOn0fyy2y19+8JsMDWjMA3QSkRPjMCW9GJ5CFWFzllu+qW1RmsXfHoW0OlNv7oYX52XRsS+rtVCbajrdGq9EeH2/rMQfZGaRPNxYwPdivpYRo1D8W+tAo3kVJ/Q+478Bt32UH5PSAFHWFVqVllRr/ploLc0VWRCyl2nT9BBDlZ8T8hKUYE/a3SS4ABAP4rm5Sxt9t9AAAAAElFTkSuQmCC",
subsections:"$ControlsSection_Buttons $ControlsSection_CheckboxesRadios $ControlsSection_IconContainer $ControlsSection_Pickers $ControlsSection_Select $ControlsSection_SlidersSpinners $ControlsSection_TextBox $ControlsSection_Toolbars $ControlsSection_Other".split(" ")},$HTMLSection_Common:{id:"Common",name:"Common",iconBase64:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAALNJREFUeNpi/P//P4NUxvb/DGQCFhjj2QxPkjUDLWZgYqAQgA34//8fmNO74TIcwwCMjU2MAagPbADTv79wyeIAXTBG1oALMAL1gcOA8f9vgoqRDQWxIfr+QF3w9w95/v/7C+qCf78x/AezBa8XgC5gAKUDhZh5/8kBIH3QQPxNlhdALqdOOmD8+5vMQIS6gPH/X/K8ANQHDQMyoxEYC9CE9I9BI6SHdBeA9f7/T1EgAgQYAMdnhUefY5wVAAAAAElFTkSuQmCC",
includes:["\x3ca\x3e","\x3cdiv\x3e","\x3clabel\x3e","\x3cspan\x3e","\x3cstyle\x3e"]},$HTMLSection_Forms:{id:"Forms",name:"Forms",iconBase64:"data:image/png;base64,R0lGODlhEAAQAOYAAPT2/PH0+/n6/Iaavoyfwt/o+OLq+Onv+pOmxt/o9+bt+N7k7unv+e3y+sbT59/p+OLr+PD0+t/p9/D1+/f5+5DDvKfMxgBZSqfNxgJbSqjNxqjMxQZeSqjNxQZfSgpiSgphSg9mSrXSyRNrShNqSb3Vy5zKtp3Ktr3Wy5zKtZ3KtR1zSaDMtSJ3ScTYzSZ6SSZ7SSl+SSl9SSp+SSp9SaTNtCyASXt0T392ToV5TIx8SpOASKOIQ5yEReDIj97WwbSQPbCOPquLQNSyaNSyadq9fObav9Wyaf///////wAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAACH5BAEAAEkALAAAAAAQABAAAAeQgEmCg4SFhoeIhECLi4g2NklASEgCRECHNi40RpMURUdBgjAxMzIzKCUvSAgAPkVDQkktIrS1Ii0RExERATxJKx0bGhYdGMIrDgQDDT1JJBXQ0dAjDAwHDDtJISYnKSom3CEOCMoKOkkgHOoeLCwfCxAG8hA5hRk1HD8J+w8SBTiFLlxIcqOgwYKJEipcaCgQADs\x3d",
includes:"\x3cbutton\x3e \x3cfieldset\x3e \x3cform\x3e \x3cinput\x3e \x3cselect\x3e \x3ctextarea\x3e".split(" ")},$HTMLSection_Headers:{id:"Headers",name:"Headers",iconBase64:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAIpJREFUeNpi/P//PwMlgImBQkCxASwggtW3bzeQcgFiVx5NrT0gsS/Xr2GIwQBQbiaQSgPJkewCoOZyqGaEC4jUqASkQK5SIjcMlKC4Aoj34HLBbqBNuAy4B8TKwPC4B1TjgsuAs0D8Hso2BmJBmARIIzHRWAFUCAp1V6hhQyAhUWwA49DPTAABBgDGmykkJRol4AAAAABJRU5ErkJggg\x3d\x3d",
includes:["\x3ch1\x3e","\x3ch2\x3e","\x3ch3\x3e"]},$HTMLSection_ImagesMediaIframes:{id:"ImagesMediaIframes",name:"Images, Media, Iframes",iconBase64:"data:image/gif;base64,R0lGODlhEAAQANUAAOnn6f////7+/v39/fz8/Pr6+vn5+ff39/X19fT09PLy8vHx8e/v7+fn59/f397e3tvb29bW1sfHx8LCwsHBwby8vLq6urm5uba2trS0tLKysq2traKioqCgoJycnJSUlJKSkpGRkYuLi4qKiomJiYSEhHh4eHV1dXR0dGlpaWhoaFxcXP///wAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAACH5BAEAACwALAAAAAAQABAAAAaPQBYLNAQZjcJk0mgJOBeEkXI5jEwmHMJCNC1uIBNKxzTwEJWhocPxkAQIBgY3+QFpAJTJxnRarU5KRCANVxkcFygsJIEfGAx5eQoZSFQgCQkIlwREaUsgFwdXYQIXlEJpIAWiFAEfQ4EgFQFheQEWpq8gTrsBnLBNkBO2dWhDsxTIrSydQioqKc7P0iolQkEAOw\x3d\x3d",
includes:["\x3caudio\x3e","\x3cembed\x3e","\x3cimg\x3e","\x3ciframe\x3e","\x3cvideo\x3e"]},$HTMLSection_ParagraphsFormatting:{id:"ParagraphsFormatting",name:"Paragraphs, Breaks, Rules",iconBase64:"data:image/gif;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAIAAACQkWg2AAAACXBIWXMAAAsTAAALEwEAmpwYAAAKT2lDQ1BQaG90b3Nob3AgSUNDIHByb2ZpbGUAAHjanVNnVFPpFj333vRCS4iAlEtvUhUIIFJCi4AUkSYqIQkQSoghodkVUcERRUUEG8igiAOOjoCMFVEsDIoK2AfkIaKOg6OIisr74Xuja9a89+bN/rXXPues852zzwfACAyWSDNRNYAMqUIeEeCDx8TG4eQuQIEKJHAAEAizZCFz/SMBAPh+PDwrIsAHvgABeNMLCADATZvAMByH/w/qQplcAYCEAcB0kThLCIAUAEB6jkKmAEBGAYCdmCZTAKAEAGDLY2LjAFAtAGAnf+bTAICd+Jl7AQBblCEVAaCRACATZYhEAGg7AKzPVopFAFgwABRmS8Q5ANgtADBJV2ZIALC3AMDOEAuyAAgMADBRiIUpAAR7AGDIIyN4AISZABRG8lc88SuuEOcqAAB4mbI8uSQ5RYFbCC1xB1dXLh4ozkkXKxQ2YQJhmkAuwnmZGTKBNA/g88wAAKCRFRHgg/P9eM4Ors7ONo62Dl8t6r8G/yJiYuP+5c+rcEAAAOF0ftH+LC+zGoA7BoBt/qIl7gRoXgugdfeLZrIPQLUAoOnaV/Nw+H48PEWhkLnZ2eXk5NhKxEJbYcpXff5nwl/AV/1s+X48/Pf14L7iJIEyXYFHBPjgwsz0TKUcz5IJhGLc5o9H/LcL//wd0yLESWK5WCoU41EScY5EmozzMqUiiUKSKcUl0v9k4t8s+wM+3zUAsGo+AXuRLahdYwP2SycQWHTA4vcAAPK7b8HUKAgDgGiD4c93/+8//UegJQCAZkmScQAAXkQkLlTKsz/HCAAARKCBKrBBG/TBGCzABhzBBdzBC/xgNoRCJMTCQhBCCmSAHHJgKayCQiiGzbAdKmAv1EAdNMBRaIaTcA4uwlW4Dj1wD/phCJ7BKLyBCQRByAgTYSHaiAFiilgjjggXmYX4IcFIBBKLJCDJiBRRIkuRNUgxUopUIFVIHfI9cgI5h1xGupE7yAAygvyGvEcxlIGyUT3UDLVDuag3GoRGogvQZHQxmo8WoJvQcrQaPYw2oefQq2gP2o8+Q8cwwOgYBzPEbDAuxsNCsTgsCZNjy7EirAyrxhqwVqwDu4n1Y8+xdwQSgUXACTYEd0IgYR5BSFhMWE7YSKggHCQ0EdoJNwkDhFHCJyKTqEu0JroR+cQYYjIxh1hILCPWEo8TLxB7iEPENyQSiUMyJ7mQAkmxpFTSEtJG0m5SI+ksqZs0SBojk8naZGuyBzmULCAryIXkneTD5DPkG+Qh8lsKnWJAcaT4U+IoUspqShnlEOU05QZlmDJBVaOaUt2ooVQRNY9aQq2htlKvUYeoEzR1mjnNgxZJS6WtopXTGmgXaPdpr+h0uhHdlR5Ol9BX0svpR+iX6AP0dwwNhhWDx4hnKBmbGAcYZxl3GK+YTKYZ04sZx1QwNzHrmOeZD5lvVVgqtip8FZHKCpVKlSaVGyovVKmqpqreqgtV81XLVI+pXlN9rkZVM1PjqQnUlqtVqp1Q61MbU2epO6iHqmeob1Q/pH5Z/YkGWcNMw09DpFGgsV/jvMYgC2MZs3gsIWsNq4Z1gTXEJrHN2Xx2KruY/R27iz2qqaE5QzNKM1ezUvOUZj8H45hx+Jx0TgnnKKeX836K3hTvKeIpG6Y0TLkxZVxrqpaXllirSKtRq0frvTau7aedpr1Fu1n7gQ5Bx0onXCdHZ4/OBZ3nU9lT3acKpxZNPTr1ri6qa6UbobtEd79up+6Ynr5egJ5Mb6feeb3n+hx9L/1U/W36p/VHDFgGswwkBtsMzhg8xTVxbzwdL8fb8VFDXcNAQ6VhlWGX4YSRudE8o9VGjUYPjGnGXOMk423GbcajJgYmISZLTepN7ppSTbmmKaY7TDtMx83MzaLN1pk1mz0x1zLnm+eb15vft2BaeFostqi2uGVJsuRaplnutrxuhVo5WaVYVVpds0atna0l1rutu6cRp7lOk06rntZnw7Dxtsm2qbcZsOXYBtuutm22fWFnYhdnt8Wuw+6TvZN9un2N/T0HDYfZDqsdWh1+c7RyFDpWOt6azpzuP33F9JbpL2dYzxDP2DPjthPLKcRpnVOb00dnF2e5c4PziIuJS4LLLpc+Lpsbxt3IveRKdPVxXeF60vWdm7Obwu2o26/uNu5p7ofcn8w0nymeWTNz0MPIQ+BR5dE/C5+VMGvfrH5PQ0+BZ7XnIy9jL5FXrdewt6V3qvdh7xc+9j5yn+M+4zw33jLeWV/MN8C3yLfLT8Nvnl+F30N/I/9k/3r/0QCngCUBZwOJgUGBWwL7+Hp8Ib+OPzrbZfay2e1BjKC5QRVBj4KtguXBrSFoyOyQrSH355jOkc5pDoVQfujW0Adh5mGLw34MJ4WHhVeGP45wiFga0TGXNXfR3ENz30T6RJZE3ptnMU85ry1KNSo+qi5qPNo3ujS6P8YuZlnM1VidWElsSxw5LiquNm5svt/87fOH4p3iC+N7F5gvyF1weaHOwvSFpxapLhIsOpZATIhOOJTwQRAqqBaMJfITdyWOCnnCHcJnIi/RNtGI2ENcKh5O8kgqTXqS7JG8NXkkxTOlLOW5hCepkLxMDUzdmzqeFpp2IG0yPTq9MYOSkZBxQqohTZO2Z+pn5mZ2y6xlhbL+xW6Lty8elQfJa7OQrAVZLQq2QqboVFoo1yoHsmdlV2a/zYnKOZarnivN7cyzytuQN5zvn//tEsIS4ZK2pYZLVy0dWOa9rGo5sjxxedsK4xUFK4ZWBqw8uIq2Km3VT6vtV5eufr0mek1rgV7ByoLBtQFr6wtVCuWFfevc1+1dT1gvWd+1YfqGnRs+FYmKrhTbF5cVf9go3HjlG4dvyr+Z3JS0qavEuWTPZtJm6ebeLZ5bDpaql+aXDm4N2dq0Dd9WtO319kXbL5fNKNu7g7ZDuaO/PLi8ZafJzs07P1SkVPRU+lQ27tLdtWHX+G7R7ht7vPY07NXbW7z3/T7JvttVAVVN1WbVZftJ+7P3P66Jqun4lvttXa1ObXHtxwPSA/0HIw6217nU1R3SPVRSj9Yr60cOxx++/p3vdy0NNg1VjZzG4iNwRHnk6fcJ3/ceDTradox7rOEH0x92HWcdL2pCmvKaRptTmvtbYlu6T8w+0dbq3nr8R9sfD5w0PFl5SvNUyWna6YLTk2fyz4ydlZ19fi753GDborZ752PO32oPb++6EHTh0kX/i+c7vDvOXPK4dPKy2+UTV7hXmq86X23qdOo8/pPTT8e7nLuarrlca7nuer21e2b36RueN87d9L158Rb/1tWeOT3dvfN6b/fF9/XfFt1+cif9zsu72Xcn7q28T7xf9EDtQdlD3YfVP1v+3Njv3H9qwHeg89HcR/cGhYPP/pH1jw9DBY+Zj8uGDYbrnjg+OTniP3L96fynQ89kzyaeF/6i/suuFxYvfvjV69fO0ZjRoZfyl5O/bXyl/erA6xmv28bCxh6+yXgzMV70VvvtwXfcdx3vo98PT+R8IH8o/2j5sfVT0Kf7kxmTk/8EA5jz/GMzLdsAAAAEZ0FNQQAAsY58+1GTAAAAIGNIUk0AAHolAACAgwAA+f8AAIDpAAB1MAAA6mAAADqYAAAXb5JfxUYAAAHGSURBVHjaZFLJbhNREKx+b2Yc7xs2EEVZlEgR4oKEOHLiH/gEfokP4EM4I0UcEApCkYAoIDlWGC9je2ymFw4zA9jUqaWu6up6r+nT1XWn1QDAnMEU2/BB5HxoxjAAmM4XQb/TGtzrcBprfOXC2l8ugVnHox+9w6eN7kGhdy4QVQCrZB7WjqOykYMZy9E0vXg9fPKqOzgCIKou76kZs6w2WbL6laRZkmarDXNmlfqg2xvefngzGX/NbYNimkFU3328niTrMKrA+Ua18vzRg73W4ab20iq38eimOzwBSoGamWLQaVSj0PuAnAO591/uWG2/1z46aU++X+bMPw7GgpvxLJ4tgzByPiDnyXkxNKt7+83Iygd0JR/MCjgiclTAERHBDBmriG05qGrG+uLZuUk5oIQYVou5qm4JzCCii1QlYxBgAIEAGMg7EdUdBzMTsbcXn+N5EoYR+ZCcd96z4Pygd9orvuvfDMZS7GEglBUoNzfV3Qym8I/PjjebdZ4WRCAyo2atwpLuCgDcfbvsCwfCO6GXoFUyrQfrQuCdA/Dw+CyKIsDyRXZg9xvt/rA4vp/TuagSka8PczL9JyDQbC26jKezxe8BAJ6U+/2r7MIJAAAAAElFTkSuQmCC",
includes:"\x3cb\x3e \x3cbr\x3e \x3cem\x3e \x3chr\x3e \x3ci\x3e \x3cp\x3e \x3cs\x3e \x3cstrong\x3e \x3cu\x3e".split(" ")},$HTMLSection_Tables:{id:"Tables",name:"Tables",iconBase64:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAXhJREFUeNrEUz1LA0EQnTvzO/wPYsBOrQW109ImpLPIL9DWKqQQRESEFGKjYmGwEyQggUTBRn+BIhFFTXK53Z1xZi53ulcpKdxjmXnD7Lv39iMgIhhnhDDmKKTJavXyz1KOKvNBRkCIsFWe09wxFbI1iTEy5ppB0shB69v1K18BOdTYvHvUZm1k0oi7rUwhIIkAs8VJQESfwMQxVGoXv5Le7jxAwF/yZ2aVubRxRjKYmWJrqXZyQ/3I0HtvSG8fA8Xd1z49v/ToqftJi5va/30KJhqOyGQ/WL6xCcZkCkakrMcOopyFKGKvCGLNslFrDMTGqX8hECz7AKN7YwZDnwC5uXp47XndPW17uN64zXK0zidwzsH6yozKNKxg57gFpeUi11EtHZx3YG1hKiNoNO9zx8iMcjRigWQFYuJfVAMp/jmcRf8qG90sUAWoEWUZpG8FcwRICQ7ShunSniYToiIMIb3XguXELdcKnEtM6639chD8+2v8EmAA9/wqJKl9P7kAAAAASUVORK5CYII\x3d",
includes:["\x3ctable\x3e"]},$HTMLSection:{id:"HTML",name:"HTML",iconBase64:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyBpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuMC1jMDYwIDYxLjEzNDc3NywgMjAxMC8wMi8xMi0xNzozMjowMCAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENTNSBXaW5kb3dzIiB4bXBNTTpJbnN0YW5jZUlEPSJ4bXAuaWlkOjVFNUZFNTNBNTk0QjExRTBBNkY0ODEzNDdCMzkxNTdDIiB4bXBNTTpEb2N1bWVudElEPSJ4bXAuZGlkOjVFNUZFNTNCNTk0QjExRTBBNkY0ODEzNDdCMzkxNTdDIj4gPHhtcE1NOkRlcml2ZWRGcm9tIHN0UmVmOmluc3RhbmNlSUQ9InhtcC5paWQ6NUU1RkU1Mzg1OTRCMTFFMEE2RjQ4MTM0N0IzOTE1N0MiIHN0UmVmOmRvY3VtZW50SUQ9InhtcC5kaWQ6NUU1RkU1Mzk1OTRCMTFFMEE2RjQ4MTM0N0IzOTE1N0MiLz4gPC9yZGY6RGVzY3JpcHRpb24+IDwvcmRmOlJERj4gPC94OnhtcG1ldGE+IDw/eHBhY2tldCBlbmQ9InIiPz5wB++kAAABAklEQVR42qRToQ7CMBC9LYhK5Bz9AyaHYhIHEomcYxI5iRwOOYkcDgkKWxxyuElwnSq5hpJ2tAvJXnK5vuvd60u7eUII6IOBTo67SafafH31foroQEWZR8IFVibis2/M+G3BV9NYTydkCJSGPy59WzOKtMMlYghUTwLsXsMsLQA4yIwc10GUyaBxLvusAuGigM3+BHFIJceMnFW182K/ApfbQ6jhdBnjoTLrIljjLgF9WIcu0ulgm8zgzCrID2ejATnWcV+htt3BdDzydBHOzWEaBLLGucMB4lQkXycIffivTxmBzYdsJdcqd8GHnmg5ILDfLrXHIpaHIwbz+v7ObwEGADGQtFOesBZAAAAAAElFTkSuQmCC",
subsections:"$HTMLSection_Common $HTMLSection_Forms $HTMLSection_Headers $HTMLSection_ImagesMediaIframes $HTMLSection_ParagraphsFormatting $HTMLSection_Tables".split(" ")},$AppOtherSection:{id:"Other",name:"Other",iconBase64:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAcFJREFUeNqcUj1IQlEUPjfc+llqCEKwpaCgrJZqKOhnqiChsbQhF+f2moqgpaH2rDEqiiCwBB2sRbJArYa0hohSCLTQ93rvds95710VHaIDx/P5ne+ce869j3HOAW039MCPr9PwV5sddIBntJPZLAKLV+eHCDMpY2UlnP5bvyv7V9gA6qx04bMAmbwKmZwiXIWPvAI9bY0iFikSh7m8QhrUo9nKx8IknsTFGYyXcwDvohHDgbgxhWUVDbJfijE23osIO+Fnmnw79CKKzTJswEot5Aq+uV6Ix+6FJ8HewCESjJIjTtwmKWev5xAXOCEw6o2G4jR039Y5z+WK5H/FWCdX4HppLEykMtkqrJu4vaWZML2T9R2cRtP8LJygS5wa6QYDg8BdNbChmRlwMLmCd/NUjmfhu9Qr4enlALl384Q4S4N18hJ1XYeaWNMk1rRqTcUKR4Ebwq7JPiAsnss10Q9HFyY/YfKmpmKFpY0T/v2tkrvXDig+vWX54vohRXTUYMScR2gqXqGoFEqvYI7X2tQkxv6hSBq1IHHVCoHII/cHY/QJL4w7wX8ZI94t8J7gUYYYNcSPOWFyuIPJBv+1XwEGAJJgewSkj0bcAAAAAElFTkSuQmCC",
includes:"Calendar ColorPalette GridX RichText StickyNote Tree $$AllOthers$$".split(" ")},$SketchOtherSection:{id:"Other",name:"Other",iconBase64:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAcFJREFUeNqcUj1IQlEUPjfc+llqCEKwpaCgrJZqKOhnqiChsbQhF+f2moqgpaH2rDEqiiCwBB2sRbJArYa0hohSCLTQ93rvds95710VHaIDx/P5ne+ce869j3HOAW039MCPr9PwV5sddIBntJPZLAKLV+eHCDMpY2UlnP5bvyv7V9gA6qx04bMAmbwKmZwiXIWPvAI9bY0iFikSh7m8QhrUo9nKx8IknsTFGYyXcwDvohHDgbgxhWUVDbJfijE23osIO+Fnmnw79CKKzTJswEot5Aq+uV6Ix+6FJ8HewCESjJIjTtwmKWev5xAXOCEw6o2G4jR039Y5z+WK5H/FWCdX4HppLEykMtkqrJu4vaWZML2T9R2cRtP8LJygS5wa6QYDg8BdNbChmRlwMLmCd/NUjmfhu9Qr4enlALl384Q4S4N18hJ1XYeaWNMk1rRqTcUKR4Ebwq7JPiAsnss10Q9HFyY/YfKmpmKFpY0T/v2tkrvXDig+vWX54vohRXTUYMScR2gqXqGoFEqvYI7X2tQkxv6hSBq1IHHVCoHII/cHY/QJL4w7wX8ZI94t8J7gUYYYNcSPOWFyuIPJBv+1XwEGAJJgewSkj0bcAAAAAElFTkSuQmCC",
includes:"Calendar ColorPalette GridX RichText StickyNote Tree $$AllOthers$$".split(" ")},$mobileSections:"$ViewsSection $HeadingSection $ListsSection $ControlsSection $ContainersSection $HTMLSection $ClipartSection $XBLOXSection $DrawingToolsSection $AppOtherSection $StatesSection".split(" "),$desktopSections:"$ContainersSection $ControlsSection $ViewsSection $HeadingSection $ListsSection $HTMLSection $ClipartSection $XBLOXSection $DrawingToolsSection $AppOtherSection $StatesSection".split(" "),
$sketchSections:"$DrawingToolsSection $ClipartSection $ControlsSection $ContainersSection $HTMLSection $HeadingSection $ListsSection $SketchOtherSection".split(" "),$sketchExcludes:["dojox.mobile.ScrollableView","dojox.mobile.SwapView","dojox.mobile.View"],$ALLMOBILE_Sections:"$ViewsSection $HeadingSection $ListsSection $ControlsSection $ContainersSection $HTMLSection $ClipartSection $XBLOXSection $DrawingToolsSection $AppOtherSection $StatesSection".split(" "),$ALLDESKTOP_Sections:"$ContainersSection $ControlsSection $ViewsSection $HeadingSection $ListsSection $HTMLSection $ClipartSection $XBLOXSection $DrawingToolsSection $AppOtherSection $StatesSection".split(" "),
$deliteSections:["$HTMLSection","$XBLOXSection","$DELITESection","$StatesSection"],$ALLDELITE_Sections:["$HTMLSection","$XBLOXSection","$DELITESection"],$DELITESection_Controls:{id:"delite",name:"Controls",iconBase64:"data:image/gif;base64,R0lGODlhEAAQALMAAN7e4oyMjtXV1sDAwf///+Dg4MvLyzMzM////wAAAAAAAAAAAAAAAAAAAAAAAAAAACH5BAEAAAgALAAAAAAQABAAAAQ3EMlJq704a3RO2NIhBIexHYRgeFTndkQ8HmER33g60EcB/ECcYBd6wWSkDErFUs5Mms4HRK1SIwA7",includes:"Button Slider Combobox Select Checkbox RadioButton Switch ToggleButton MediaPlayer".split(" ")},
$DELITESection_Containers:{id:"delite",name:"Containers",iconBase64:"data:image/gif;base64,R0lGODlhEAAQALMAAN7e4oyMjtXV1sDAwf///+Dg4MvLyzMzM////wAAAAAAAAAAAAAAAAAAAAAAAAAAACH5BAEAAAgALAAAAAAQABAAAAQ3EMlJq704a3RO2NIhBIexHYRgeFTndkQ8HmER33g60EcB/ECcYBd6wWSkDErFUs5Mms4HRK1SIwA7",includes:["ViewStack","Panel","TabBar","Accordion"]},$DELITESection_States:{id:"delite",name:"States",iconBase64:"data:image/gif;base64,R0lGODlhEAAQALMAAN7e4oyMjtXV1sDAwf///+Dg4MvLyzMzM////wAAAAAAAAAAAAAAAAAAAAAAAAAAACH5BAEAAAgALAAAAAAQABAAAAQ3EMlJq704a3RO2NIhBIexHYRgeFTndkQ8HmER33g60EcB/ECcYBd6wWSkDErFUs5Mms4HRK1SIwA7",
includes:["CSSState"]},$DELITESection:{id:"delite",name:"Deliteful",iconBase64:"data:image/gif;base64,R0lGODlhEAAQAKIAAFhYWtXV1v///0BAQP///wAAAAAAAAAAACH5BAEAAAQALAAAAAAQABAAAAMuSLo0w5CNIF6EM9grN2+Z82WCEGjcVJbopa5tlJ2nh4W2XH9LyCu+X/AHAPyOCQA7",subsections:["$DELITESection_Controls","$DELITESection_Containers"],includes:[]},$StatesSection:{id:"States",name:"States",iconBase64:"data:image/gif;base64,R0lGODlhEAAQAKIAAL+/v5aWlmNjYzMzMxwcHBYWFv///wAAACH5BAEAAAYALAAAAAAQABAAAAMgaLrc/jBKFsBcg9g7iuaFZwlhaZrD1Ikqq35Xdc10PScAOw\x3d\x3d",
includes:["CSS","Style"]}},_COMMENT11_:"Should have one each for mobile, desktop, sketchhifi, sketchlofi",_COMMENT12_:"For each preset, collections is list of each widget collection in order of precedence",_COMMENT13_:"and sections is the array of sections for this preset (or $desktopSections)",presets:{mobile:{collections:[{id:"dojoxmobile",show:!0},{id:"dijit",show:!1},{id:"html",show:!0},{id:"clipart",show:!0},{id:"shapes",show:!0}],sections:"$mobileSections"},desktop:{collections:[{id:"dijit",
show:!0},{id:"dojoxmobile",show:!1},{id:"html",show:!0},{id:"clipart",show:!0},{id:"xblox",show:!0},{id:"shapes",show:!0},{id:"delite",show:!0}],sections:"$desktopSections"},delite:{collections:[{id:"dijit",show:!1},{id:"dojoxmobile",show:!1},{id:"html",show:!0},{id:"xblox",show:!0},{id:"delite",show:!0},{id:"shapes",show:!0},{id:"clipart",show:!0}],sections:"$deliteSections"},sketchhifi:{collections:[{id:"shapes",show:!0},{id:"clipart",show:!1},{id:"dijit",show:!0},{id:"dojoxmobile",show:!0},{id:"html",
show:!0}],sections:"$sketchSections",exclude:"$sketchExcludes"},sketchlofi:{collections:[{id:"shapes",show:!0},{id:"clipart",show:!1},{id:"dijit",show:!0},{id:"dojoxmobile",show:!1},{id:"html",show:!0}],sections:"$sketchSections",exclude:"$sketchExcludes"},$ALLMOBILE:{_COMMENT1_:"$ALLMOBILE is a special preset which shows all widgets",_COMMENT2_:"regardless of the current composition type",_COMMENT3_:"ranking mobile widgets above desktop widgets",collections:[{id:"dojoxmobile",show:!0},{id:"dijit",
show:!0},{id:"html",show:!0},{id:"clipart",show:!0},{id:"xblox",show:!0},{id:"shapes",show:!0}],sections:"$ALLMOBILE_Sections"},$ALLDESKTOP:{_COMMENT1_:"$ALLDESKTOP is a special preset which shows all widgets",_COMMENT2_:"regardless of the current composition type",_COMMENT3_:"ranking desktop widgets above mobile widgets",collections:[{id:"dijit",show:!0},{id:"dojoxmobile",show:!0},{id:"html",show:!0},{id:"clipart",show:!0},{id:"xblox",show:!0},{id:"shapes",show:!0}],sections:"$ALLDESKTOP_Sections"},
$ALLDELITE:{_COMMENT1_:"$ALLDESKTOP is a special preset which shows all widgets",_COMMENT2_:"regardless of the current composition type",_COMMENT3_:"ranking desktop widgets above mobile widgets",collections:[{id:"dijit",show:!1},{id:"dojoxmobile",show:!1},{id:"html",show:!0},{id:"clipart",show:!0},{id:"xblox",show:!0},{id:"shapes",show:!0},{id:"delite",show:!0}],sections:"$ALLDELITE_Sections"}}}:this._initializationInfo[a]},getDefaultThemeSet:function(){return this.getSiteConfigData("defaultThemeSet")},
getUserDisplayName:function(a){a||(a=this.getUser());var g=a.userDisplayName;a.userDisplayName||(g=a.email);return g},getUserEmail:function(a){a||(a=this.getUser());return a.email},getUserDisplayNamePlusEmail:function(a){a||(a=this.getUser());var g=this.getUserDisplayName(a);g!=a.email&&(g+=" \x26lt;"+a.email+"\x26gt;");return g},loadPlugins:function(){a.forEach(function(a){var g=a.id;f.plugins[g]=a;for(var d in a){var c=a[d];"string"!=typeof c&&(c instanceof Array?c.forEach(function(c){f._addExtension(d,
c,g)}):f._addExtension(d,c,g))}})},singleUserMode:function(){return f.isLocalInstall},_stripMaqetta:!0,location:function(){var a=document.location.href.split("?")[0],a=a.replace("index.php",""),a=a.replace("maqetta.html",""),a=a.replace("xui.php",""),a=a.replace("xui.php?debug\x3dtrue",""),a=a.replace("maqettar.html",""),a=a.replace("index.html",""),a=a.replace("?",""),a=a.replace("debug\x3dtrue",""),a=a.replace("\x26isDesktop\x3dtrue","");this._stripMaqetta&&(a=a.replace("maqetta/",""));return a},
getUserWorkspaceUrl:function(){if(this.userBaseUrl)return this.userBaseUrl},run:function(){dojo.isMac&&dojo.addClass(document.documentElement,"isMac");var a=document.body.style;f.supportsCSS3Transitions=void 0!==a.WebkitTransition||void 0!==a.MozTransition||void 0!==a.OTransition||void 0!==a.transition;f.subscribe("/davinci/ui/selectionChanged",f._selectionChanged);dojo.connect(dojo.doc.documentElement,"onkeypress",function(g){8==g.charOrCode&&(window.davinciBackspaceKeyTime=Date.now())});dojo.connect(dojo.doc.documentElement,
"onkeydown",this,"_handleGlobalDocumentKeyEvent");dojo.addOnUnload(function(g){for(var d=null,c=davinci.Workbench&&davinci.Workbench.editorTabs?davinci.Workbench.editorTabs.getChildren():[],a=0,f=0;f<c.length;f++){var b=c[f];b.editor&&(b=b.editor.getOnUnloadWarningMessage())&&(d||(d=b),a++)}1<a&&(d=dojo.string.substitute(p.multipleFilesUnsaved,[d,a]));!d&&100>Date.now()-window.davinciBackspaceKeyTime&&(d=p.careful);if(d){if(g=g||window.event)g.returnValue=d;return d}})},subscribe:function(a,g){f.subscriptions.push(dojo.subscribe(a,
this,g))},destroy:function(){dojo.forEach(f.subscriptions,dojo.unsubscribe)},_addExtension:function(a,g,d){g.id&&(g.id=d+"."+g.id);f.extensionPoints[a]=f.extensionPoints[a]||[];d=f.extensionPoints[a];d.push(g);f.extensionPoints[a]=d},getExtensions:function(a,g){var d=f.extensionPoints[a];if(g){var c=g instanceof Function;if(d)return d.filter(function(d){return c&&g(d)||d.id==g})}return d},getExtension:function(a,g){return f.getExtensions(a,g)[0]},handleError:function(a){var g="welcome";f.singleUserMode()&&
(g=".");window.document.body.innerHTML=dojo.string.substitute(p.serverConnectError,{redirectUrl:g,error:a})},executeCommand:function(a){(a=f.getExtension("davinci.commands",a))&&a.run&&a.run()},_selectionChanged:function(a){f.currentSelection=a},getSelection:function(){return f.currentSelection},serverJSONRequest:function(a){var g,d={handleAs:"json"};dojo.mixin(d,a);dojo.xhrGet(d).then(function(c){c&&(g=c)});return g},registerKeyBinding:function(a,g){this._globalKeyBindings||(this._globalKeyBindings=
[]);this._globalKeyBindings.push({keyBinding:a,action:g})},handleKeyEvent:function(a){this._handleKeyEvent(a,!0)},_handleGlobalDocumentKeyEvent:function(a){this._handleKeyEvent(a)},_handleKeyEvent:function(a,g){if(this._globalKeyBindings){var d=!1;(d=dojo.some(this._globalKeyBindings,dojo.hitch(this,function(c){if(f.isKeyEqualToEvent(c.keyBinding,a))return davinci.Workbench._runAction(c.action),!0})))?dojo.stopEvent(a):g||this.currentEditor&&this.currentEditor.handleKeyEvent&&this.currentEditor.handleKeyEvent(a,
!0)}},isKeyEqualToEvent:function(a,g){var d=!0,c=g.altKey&&!dojo.isMac||dojo.isMac&&g.ctrlKey;!!a.accel!==(g.ctrlKey&&!dojo.isMac||dojo.isMac&&g.metaKey)&&(d=!1);!!a.meta!==c&&(d=!1);!!a.shift!==g.shiftKey&&(d=!1);d&&a.charOrCode&&g.which&&(d=dojo.isArray(a.charOrCode)?dojo.some(a.charOrCode,dojo.hitch(this,function(c){return this._comparecharOrCode(c,g)})):this._comparecharOrCode(a.charOrCode,g));return d},_comparecharOrCode:function(a,g){return dojo.isString(a)?a.toLowerCase()===String.fromCharCode(g.which).toLowerCase():
a===g.which}};return f})},"davinci/lang/webContent":function(){define([],function(){return{designer:"Designer,",welcome:"Welcome",loadingMaqetta:"\x26nbsp;Loading Maqetta...",startupError:"Error starting Maqetta: ${0}",logOff:"Log Out",unsupportedBrowser:"Unsupported Browser",unsupportedNote:'Maqetta supports Firefox 4, Chrome 5, and Safari 5.1 or greater. If you wish to continue with an unsupported browser, click "Continue."',buttonContinue:"Continue",pageDesignerTitle:"Maqetta Designer",maqettaUser:"Maqetta User",
localhostUser:"localhost user",sessionTimedOut:"Session timed out",sessionTimedOutMsg:"The session has timed out, please \x3ca href\x3d'${hrefLoc}'\x3elog in\x3c/a\x3e again. (Auto-redirect within 10 seconds)",devicePreviewError:"Maqetta device previewer error. Must supply URL parameter 'file\x3d'",devicePreviewPreviewing:"Previewing:",help:"Help",tutorials:"Tutorials",aboutMaqetta:"About Maqetta",review:"Review and Commenting,",reviewPageTitle:"Maqetta Review Board",careful:"Warning: You are about to leave Maqetta.",
errorLoadingPlugin:"error loading plugin ${0}, response\x3d${1}",errorLoadingPlugins:"error loading plugins",multipleFilesUnsaved:"${0} (NOTE: This is one of ${1} files with unsaved changes.)",idleSessionMessage:"Your session will timeout in ${seconds} seconds, click anywhere in the page to continue using Maqetta.",fileHasUnsavedChanges:"Save changes to ${0}?",perspectiveNotFound:"perspective not found: ${0}",scopeNotDefined:"scope not defined for action: ${0}",funcNotDefined:"function not defined for action: ${0}",
serverConnectError:"\x3ch3\x3eError connecting to the Maqetta Server.\x3c/h3\x3e\x3cbr\x3e\x3cdiv\x3ePlease click here to \x3ca href\x3d'${redirectUrl}'\x3ereturn to Maqetta\x3c/a\x3e\x3cdiv\x3e\x3cdiv\x3eError description: ${error}\x3c/div\x3e"}})},"davinci/commands/CommandStack":function(){define(["dojo/_base/declare"],function(p){return p("davinci.commands.CommandStack",null,{constructor:function(m){this._context=m;this._undoStack=[];this._redoStack=[]},execute:function(m,h){if(m){var e;e=this._context&&
"davinci.ve.themeEditor.Context"!=this._context.declaredClass?dojo.withDoc(this._context.getDocument(),"execute",m,[this._context,h]):m.execute(h);this._undoStack.push(m);this._redoStack=[];if(!e)this.onExecute(m,"execute")}},undo:function(){if(this.canUndo()){var m=this._undoStack.pop();m._runDelegate?m._runDelegate.undoDelegate(m):this._context&&"davinci.ve.themeEditor.Context"!=this._context.declaredClass?dojo.withDoc(this._context.getDocument(),"undo",m):m.undo();this._redoStack.push(m);this.onExecute(m,
"undo")}},redo:function(){if(this.canRedo()){var m=this._redoStack.pop();m._runDelegate?m._runDelegate.redoDelegate(m):this._context&&"davinci.ve.themeEditor.Context"!=this._context.declaredClass?dojo.withDoc(this._context.getDocument(),"execute",m):m.execute();this._undoStack.push(m);this.onExecute(m,"redo")}},canUndo:function(){return 0<this._undoStack.length},canRedo:function(){return 0<this._redoStack.length},getUndoCount:function(){return this._undoStack.length},getRedoCount:function(){return this._redoStack.length},
clear:function(){this._undoStack=[];this._redoStack=[]},jump:function(m,h){var e=this.getUndoCount(),b=this.getRedoCount();if(m==e)return m;if(0>m||m>e+b)return-1;e=m-e;if(h)if(0>e)for(;0>e;)this._redoStack.push(this._undoStack.pop()),e++;else for(;0<e;)this._undoStack.push(this._redoStack.pop()),e--;else if(0>e)for(;0>e;)this.undo(),e++;else for(;0<e;)this.redo(),e--;return m},onExecute:function(m,h){},undoDelegate:function(m){},redoDelegate:function(m){}})})},"davinci/ui.plugin":function(){define(["require"],
function(p){return{id:"davinci.ui","davinci.view":[{id:"navigator",title:"Files",viewClass:"davinci/workbench/Explorer",iconClass:"paletteIcon paletteIconFiles"},{id:"hierarchy",title:"Hierarchy"},{id:"devices",title:"Devices",viewClass:"davinci/workbench/DeviceTreeView",iconClass:"paletteIcon paletteIconOutline"},{id:"files",title:"XFiles",viewClass:"davinci/workbench/FileView",iconClass:"paletteIcon paletteIconOutline"},{id:"comment",title:"Comments",viewClass:"davinci/review/view/CommentView",
iconClass:"paletteIcon paletteIconComments"},{id:"scope",title:"Scope"},{id:"properties",title:"Properties",viewClass:"davinci/workbench/PropertyEditor"},{id:"console",title:"Console"},{id:"history",title:"History"},{id:"search",title:"Search"}],"davinci.preferences":[{name:"Project",id:"project",hide:!0,category:"",pageContent:"Project Settings here"},{name:"Project Settings",id:"ProjectPrefs",category:"davinci.ui.project",pane:"davinci/ui/ProjectPreferences",defaultValues:{webContentFolder:"",themeFolder:"themes",
widgetFolder:"lib/custom"}}],"davinci.perspective":{id:"main",title:"AJAX IDE",views:[{viewID:"davinci.ui.navigator",position:"left-bottom"},{viewID:"davinci.ui.outline",position:"right"},{viewID:"davinci.ui.properties",position:"right-bottom"}]},"davinci.actionSets":[{id:"editorActions",visible:!0,menu:[{__mainMenu:!0,separator:["new",!1,"open",!1]},{label:"Create",path:"new",id:"davinci.new",separator:["newApp",!0,"newSketch",!0,"newFolder",!0,"newTheme",!0,"newProject",!0,"additions",!0]},{label:"Open",
path:"open",id:"davinci.open",separator:["openFile",!0,"openTheme",!0,"openOrion",!1,"additions",!1]}],actions:[{id:"newHTMLMobile",run:function(){p(["./ui/Resource"],function(m){m.newHTMLMobile()})},iconClass:"newOpenMenuItem newMobileAppMenuItem",label:"Mobile Application...",menubarPath:"davinci.new/newApp"},{id:"newHTMLDesktop",run:function(){p(["./ui/Resource"],function(m){m.newHTMLDesktop()})},iconClass:"newOpenMenuItem newDesktopAppMenuItem",label:"Desktop Application...",menubarPath:"davinci.new/newApp"},
{id:"newHTMLSketchHiFi",run:function(){p(["./ui/Resource"],function(m){m.newHTMLSketchHiFi()})},iconClass:"newOpenMenuItem newSketchHiFiMenuItem",label:"Sketch (high-fidelity)...",menubarPath:"davinci.new/newSketch"},{id:"newHTMLSketchLoFi",run:function(){p(["./ui/Resource"],function(m){m.newHTMLSketchLoFi()})},iconClass:"newOpenMenuItem newSketchLoFiMenuItem",label:"Sketch (low-fidelity)...",menubarPath:"davinci.new/newSketch"},{id:"newFolder",run:function(){p(["./ui/Resource"],function(m){m.newFolder()})},
iconClass:"newOpenMenuItem newFolderMenuItem",label:"Folder...",menubarPath:"davinci.new/newFolder"},{id:"newCSS",run:function(){p(["./ui/Resource"],function(m){m.newCSS()})},iconClass:"newOpenMenuItem newCSSMenuItem",label:"CSS File...",menubarPath:"davinci.new/newFolder"},{id:"newJS",run:function(){p(["./ui/Resource"],function(m){m.newJS()})},iconClass:"newOpenMenuItem newJSMenuItem",label:"JavaScript File...",menubarPath:"davinci.new/newFolder"},{id:"newTheme",run:function(){p(["davinci/Workbench",
"davinci/ui/NewTheme"],function(m,h){m.showModal(new h,"New Theme",{width:300},null,!0)})},iconClass:"newOpenMenuItem newThemeMenuItem",label:"Theme...",menubarPath:"davinci.new/newTheme"},{id:"newProject",run:function(){p(["./ui/Resource"],function(m){m.newProject()})},iconClass:"newOpenMenuItem newProjectMenuItem",label:"Project...",menubarPath:"davinci.new/newProject"},{id:"openThemeEditor",run:function(){p(["davinci/Workbench","davinci/ui/OpenThemeDialog"],function(m,h){m.showModal(new h,"Open Theme",
{width:200},null,!0)})},iconClass:"newOpenMenuItem openThemeMenuItem",label:"Theme Editor...",menubarPath:"davinci.open/openTheme"},{id:"openReview",run:function(){p(["./ui/Resource"],function(m){m.openFile()})},run:function(){p(["davinci/Workbench","davinci/review/widgets/OpenReviewDialog"],function(m,h){m.showModal(new h,"Open Review",{width:350,height:250})})},iconClass:"newOpenMenuItem openReviewMenuItem",label:"Review...",menubarPath:"davinci.open/openTheme"},{id:"orionNavigator",run:function(){window.open("../navigate/table.html#",
"_blank");window.focus()},iconClass:"newOpenMenuItem orionIcon",label:"Orion Navigator",menubarPath:"davinci.open/openOrion"}]},{id:"main",visible:!0,menu:[{__mainMenu:!0,separator:["usersettings",!1,"settings",!1,"additions",!1,"help",!1]},{label:"User settings",path:"usersettings",id:"davinci.usersettings",className:"userSettingsMenu",iconClass:"userSettingsMenuIcon",showLabel:!1,separator:["username",!0,"logout",!0,"additions",!1]},{label:"Settings",path:"settings",id:"davinci.settings",className:"appSettingsMenu",
iconClass:"appSettingsMenuIcon",showLabel:!1,separator:["settings",!0,"additions",!1]},{label:"Help",path:"help",id:"davinci.help",className:"helpMenu",iconClass:"helpMenuIcon",showLabel:!1,separator:["help",!0,"about",!1,"additions",!1]}],actions:[{id:"editPreferences",run:function(){p(["davinci/workbench/Preferences"],function(m){m.showPreferencePage()})},label:"Preferences...",menubarPath:"davinci.settings/settings"},{id:"editThemeSets",run:function(){p(["davinci/ui/ThemeSetsDialog"],function(m){m()})},
label:"Theme sets...",menubarPath:"davinci.settings/settings"},{id:"showHelp",run:function(){window.open("app/docs/index.html","MaqettaDocumentation")},label:"Documentation",menubarPath:"davinci.help/help",keyBinding:{charOrCode:dojo.keys.F1}},{id:"showTutotials",run:function(){window.open("app/docs/index.html#tutorials/tutorials","MaqettaTutorials")},label:"Tutorials",menubarPath:"davinci.help/help"},{id:"showVideos",run:function(){window.open("http://www.youtube.com/user/Maqetta/","MaqettaVideos")},
label:"Videos",menubarPath:"davinci.help/help"},{id:"showCheatSheets",run:function(){window.open("app/docs/index.html#cheatsheets/cheatsheets","MaqettaCheatSheets")},label:"Cheat sheets",menubarPath:"davinci.help/help"},{id:"showHowTo",run:function(){window.open("https://www.ibm.com/search/csass/search/?sn\x3ddw\x26en\x3dutf\x26hpp\x3d20\x26dws\x3ddw\x26q\x3dmaqetta\x26Search\x3dSearch","MaqettaHowTo")},label:"How-to articles",menubarPath:"davinci.help/help"},{id:"about",run:function(){p(["davinci/ui/about"],
function(m){m.show()})},label:"About Maqetta",menubarPath:"davinci.help/about"},{id:"username",action:"davinci/actions/UserNameAction",run:function(){window.open("../settings/settings.html","_blank");window.focus()},label:"{user}",menubarPath:"davinci.usersettings/username"},{id:"logout",action:"davinci/actions/LogoutAction",label:"Logout",menubarPath:"davinci.usersettings/logout"}]},{id:"explorerActions",visible:!0,actions:[{id:"davinci.ui.rename",label:"Rename...",iconClass:"renameIcon",run:function(){p(["./ui/Resource"],
function(m){m.renameAction()})},isEnabled:function(m){return p("./ui/Resource").canModify(m)},menubarPath:"addFiles"},{id:"davinci.ui.delete",label:"Delete",iconClass:"deleteIcon",isEnabled:function(m){return p("./ui/Resource").canModify(m)},run:function(){p(["./ui/Resource"],function(m){m.deleteAction()})},menubarPath:"delete",keyBinding:{charOrCode:[dojo.keys.DELETE,dojo.keys.BACKSPACE]}},{id:"davinci.ui.download",label:"Download",iconClass:"downloadSomeIcon",action:"davinci/actions/DownloadAction",
isEnabled:function(m){return p("./ui/Resource").canModify(m)},menubarPath:"delete"}]}],"davinci.actionSetPartAssociations":[{targetID:"davinci.ui.editorActions",parts:["davinci.ui.editorMenuBar"]},{targetID:"davinci.ui.explorerActions",parts:["davinci.ui.navigator"]}],"davinci.viewActions":[{viewContribution:{targetID:"davinci.ui.problems",actions:[{id:"Copy2",iconClass:"copyIcon",run:function(){alert("view toolbar")},label:"Copy",toolbarPath:"davinci.toolbar.main/edit",menubarPath:"davinci.edit/cut"}]}},
{viewContribution:{targetID:"workbench.Explorer",actions:[{id:"davinci.ui.newfile",label:"New folder...",iconClass:"newFolderIcon",className:"FilesToolbarNewFolder",run:function(){p(["./ui/Resource"],function(m){m.newFolder()})},toolbarPath:"download"},{id:"davinci.ui.deletefile",label:"Delete file...",iconClass:"FilesToolbarDeleteFileIcon",className:"FilesToolbarDeleteFile",run:function(){p(["./ui/Resource"],function(m){m.deleteAction()})},toolbarPath:"download"},{id:"davinci.ui.renamefile",label:"Rename file...",
iconClass:"FilesToolbarRenameFileIcon",className:"FilesToolbarRenameFile",run:function(){p(["./ui/Resource"],function(m){m.renameAction()})},toolbarPath:"download"},{id:"download",iconClass:"downloadSomeIcon",className:"FilesToolbarDownloadSelected",run:function(){p(["./Workbench","./ui/DownloadSelected"],function(m,h){m.showModal(new h,"Download",{width:440})})},label:"Download Selected Files",toolbarPath:"download"},{id:"download",iconClass:"downloadAllIcon",className:"FilesToolbarDownloadAll",
run:function(){p(["./Workbench","./ui/Download"],function(m,h){m.showModal(new h,"Download",{width:440})})},label:"Download Entire Project",toolbarPath:"download"}]}}]}})},"davinci/html/html.plugin":function(){define(["require"],function(p){return{id:"davinci.html","davinci.editor":[{id:"HTMLEditor",name:"HTML Editor",extensions:"html",isDefault:!1,editorClass:"davinci/html/ui/HTMLEditor",palettePerspective:"davinci.html.htmlEditor",expandPalettes:["left"]},{id:"CSSEditor",name:"CSS Editor",extensions:"css",
isDefault:!1,editorClass:"davinci/html/ui/CSSEditor",palettePerspective:"davinci.html.htmlEditor",expandPalettes:["left"]},{id:"ImageViewer",name:"Image Viewer",extensions:"jpg,gif,jpeg,png",isDefault:!0,editorClass:"davinci/html/ui/ImageViewer",palettePerspective:"davinci.html.htmlEditor",expandPalettes:["left"]}],"davinci.editorActions":{editorContribution:{targetID:"davinci.html.CSSEditor",actions:[{id:"savecombo",className:"maqLabelButton",showLabel:!0,label:"Save",toolbarPath:"save",type:"ComboButton",
run:function(){p(["../Workbench"],function(m){p("../ui/Resource").save()})},isEnabled:function(m){return p("../Workbench").getOpenEditor()},menu:[{iconClass:"saveIcon",run:function(){p("../ui/Resource").save()},isEnabled:function(m){return p("../Workbench").getOpenEditor()},label:"Save",keyBinding:{accel:!0,charOrCode:"s",allowGlobal:!0}},{iconClass:"saveAsIcon",run:function(){p("../ui/Resource").saveAs("html")},isEnabled:function(m){return p("../Workbench").getOpenEditor()},label:"Save As",keyBinding:{accel:!0,
shift:!0,charOrCode:"s",allowGlobal:!0}}]}]}},"davinci.preferences":[{name:"HTML",id:"general",category:""}],"davinci.fileType":[{extension:"html",iconClass:"htmlFileIcon",type:"text"},{extension:"css",iconClass:"cssFileIcon",type:"text"},{extension:"jpeg",iconClass:"imageFileIcon",type:"image"},{extension:"jpg",iconClass:"imageFileIcon",type:"image"},{extension:"png",iconClass:"imageFileIcon",type:"image"},{extension:"gif",iconClass:"imageFileIcon",type:"image"}],"davinci.perspective":[{id:"htmlEditor",
title:"HTML Editor",views:[{viewID:"davinci.ve.Palette",position:"left",hidden:!0},{viewID:"davinci.ui.outline",position:"left",hidden:!0},{viewID:"davinci.ve.style",position:"right"},{viewID:"davinci.ui.comment",position:"right",hidden:!0},{viewID:"davinci.ve.states",position:"right-bottom",hidden:!0},{viewID:"davinci.ui.navigator",position:"left-bottom",selected:!0},{viewID:"davinci.review.reviewNavigator",position:"left"}]}]}})},"davinci/js/js.plugin":function(){define(["require"],function(p){return{id:"davinci.js",
"davinci.editor":[{id:"JSEditor",name:"JavaScript Editor",extensions:"js,json",isDefault:!1,editorClass:"davinci/js/ui/JavaScriptEditor",palettePerspective:"davinci.html.htmlEditor",expandPalettes:["left"]},{id:"XIDEEditor",name:"Editor",extensions:"js,json",isDefault:!0,editorClass:"davinci/xide/Editor",palettePerspective:"davinci.html.htmlEditor",expandPalettes:["left"]}],"davinci.actionSets":[{id:"jsSource",visible:!0,menu:[{label:"Source",path:"edit",id:"davinci.js.source",separator:["commentGroup",
!0,"editGroup",!0,"codeGroup",!0,"additions",!1]}],actions:[{id:"davinci.js.comment",icon:null,run:function(){alert("toggle comment")},label:"Toggle Comment",menubarPath:"davinci.js.source/commentGroup"}]},{id:"jsEdit",visible:!0,actions:[{id:"davinci.js.cut",icon:null,label:"cut",commandID:"davinci.js.cut",menubarPath:"davinci.edit/cut"},{id:"davinci.js.add",icon:null,label:"add",commandID:"davinci.js.add",menubarPath:"davinci.edit/add"},{id:"davinci.js.delete",icon:null,label:"delete",commandID:"davinci.js.delete",
menubarPath:"davinci.edit/delete"}]}],"davinci.actionSetPartAssociations":[{targetID:"davinci.js.jsEdit",parts:["davinci.ui.outline","davinci.js.JSEditor"]}],"davinci.editorActions":{editorContribution:{targetID:"davinci.js.JSEditor",actions:[{id:"savecombo",className:"maqLabelButton",showLabel:!0,label:"Save",toolbarPath:"save",type:"ComboButton",run:function(){p(["../Workbench"],function(m){p("../ui/Resource").save()})},isEnabled:function(m){return p("../Workbench").getOpenEditor()},menu:[{iconClass:"saveIcon",
run:function(){p("../ui/Resource").save()},isEnabled:function(m){return p("../Workbench").getOpenEditor()},label:"Save",keyBinding:{accel:!0,charOrCode:"s",allowGlobal:!0}},{iconClass:"saveAsIcon",run:function(){p("../ui/Resource").saveAs("html")},isEnabled:function(m){return p("../Workbench").getOpenEditor()},label:"Save As",keyBinding:{accel:!0,shift:!0,charOrCode:"s",allowGlobal:!0}}]}]}},"davinci.commands":[{id:"cut",run:function(){}},{id:"add",run:function(){}},{id:"delete",run:function(){}}],
"davinci.keyBindings":[{platform:"win",sequence:"M1+C",commandID:"davinci.js.copy",contextID:"davinci.js.JSEditor"}],"davinci.preferences":[{name:"JavaScript",id:"general",category:""},{name:"Formatting",id:"format",category:"davinci.js.general",pane:"davinci/js/ui/FormatOptions",defaultValues:{blockNewLine:!1,blockIndent:3,functionNewLine:!1,functionIndent:5,functionParamSpaceing:1,labelSpace:1,forParamSpacing:0,breakOnLabel:!0,ifStmtSpacing:0,varAssignmentSpaceing:0,switchSpacing:3,objectLitFieldSpace:1}}],
"davinci.fileType":[{extension:"js",iconClass:"jsFileIcon",type:"text"},{extension:"json",iconClass:"jsFileIcon",type:"text"}]}})},"davinci/ve/ve.plugin":function(){define(["require"],function(p){return{id:"davinci.ve","davinci.view":[{id:"Palette",title:"Palette",viewClass:"davinci/ve/palette/HtmlWidgets",iconClass:"paletteIcon paletteIconWidgets"},{id:"states",title:"Scenes",viewClass:"davinci/ve/views/StatesView",iconClass:"paletteIcon paletteIconStates"},{id:"datastores",title:"DataStores",viewClass:"davinci/ve/views/DataStoresView"},
{id:"object",title:"Object",viewClass:"davinci/ve/views/ObjectView"},{id:"style",title:"",viewClass:"davinci/ve/views/SwitchingStyleView"}],"davinci.perspective":[{id:"pageDesign",title:"Page Design",views:[{viewID:"davinci.ve.Palette",position:"left",selected:!0},{viewID:"davinci.ui.outline",position:"left"},{viewID:"davinci.ui.devices",position:"left"},{viewID:"davinci.ui.files",position:"left"},{viewID:"davinci.ve.style",position:"right"},{viewID:"davinci.ui.comment",position:"right",hidden:!0},
{viewID:"davinci.ve.states",position:"right-bottom",selected:!0},{viewID:"davinci.ui.navigator",position:"left-bottom",selected:!0},{viewID:"davinci.review.reviewNavigator",position:"left-bottom"}]}],"davinci.editor":[{id:"HTMLPageEditor",name:"HTML Visual Editor",extensions:["html","htm","php"],isDefault:!0,editorClass:"davinci/ve/PageEditor",palettePerspective:"davinci.ve.pageDesign",expandPalettes:["left"]}],"davinci.actionSets":[{id:"cutCopyPaste",visible:!0,actions:[{label:"Cut",keySequence:"M1+X",
iconClass:"editActionIcon editCutIconSmall",action:"davinci/ve/actions/CutAction",menubarPath:"davinci.edit/cut"},{label:"Copy",keySequence:"M1+C",iconClass:"editActionIcon editCopyIconSmall",action:"davinci/ve/actions/CopyAction",menubarPath:"davinci.edit/cut"},{keySequence:"M1+V",iconClass:"editActionIcon editPasteIconSmall",label:"Paste",action:"davinci/ve/actions/PasteAction",menubarPath:"davinci.edit/cut"},{keySequence:"DEL",iconClass:"editActionIcon editDeleteIconSmall",label:"Delete",action:"davinci/ve/actions/DeleteAction",
menubarPath:"davinci.edit/cut"},{iconClass:"fa-crosshairs",label:"Show in Outline",action:"davinci/ve/actions/ShowInOutline",menubarPath:"davinci.edit/cut"},{iconClass:"editActionIcon selectParentIconSmall",label:"Select parent",action:"davinci/ve/actions/SelectParentAction",menubarPath:"davinci.edit/cut"},{iconClass:"editActionIcon selectAncestorIconSmall",label:"Select ancestor...",action:"davinci/ve/actions/SelectAncestorAction",menubarPath:"davinci.edit/cut"},{iconClass:"editActionIcon unselectAllIconSmall",
label:"Unselect all",action:"davinci/ve/actions/UnselectAllAction",menubarPath:"davinci.edit/cut"},{iconClass:"editActionIcon",label:"Surround with \x26lt;A\x26gt;",action:"davinci/ve/actions/SurroundAction",surroundWithTagName:"a",menubarPath:"davinci.edit/cut"},{iconClass:"editActionIcon",label:"Surround with \x26lt;DIV\x26gt;",action:"davinci/ve/actions/SurroundAction",surroundWithTagName:"div",menubarPath:"davinci.edit/cut"},{iconClass:"editActionIcon",label:"Surround with \x26lt;SPAN\x26gt;",
action:"davinci/ve/actions/SurroundAction",surroundWithTagName:"span",menubarPath:"davinci.edit/cut"},{iconClass:"editActionIcon moveToFrontIconSmall",label:"Move to front",action:"davinci/ve/actions/MoveToFrontAction",menubarPath:"davinci.edit/cut"},{iconClass:"editActionIcon moveForwardIconSmall",label:"Move forward",action:"davinci/ve/actions/MoveForwardAction",menubarPath:"davinci.edit/cut"},{iconClass:"editActionIcon moveBackwardIconSmall",label:"Move backward",action:"davinci/ve/actions/MoveBackwardAction",
menubarPath:"davinci.edit/cut"},{iconClass:"editActionIcon moveToBackIconSmall",label:"Move to back",action:"davinci/ve/actions/MoveToBackAction",menubarPath:"davinci.edit/cut"},{iconClass:"editActionIcon",label:"Manage States...",action:"davinci/ve/actions/ManageStates",menubarPath:"davinci.edit/cut",command:"File/ManageStates",group:"View"}]}],"davinci.viewActions":[{viewContribution:{targetID:"davinci.ve.outline",actions:[{id:"design",iconClass:"designModeIcon editActionIcon",radioGroup:"displayMode",
method:"switchDisplayMode",label:"Widgets",toolbarPath:"displayMode"},{id:"source",iconClass:"sourceModeIcon editActionIcon",method:"switchDisplayMode",radioGroup:"displayMode",label:"Source",toolbarPath:"displayMode"}]}},{viewContribution:{targetID:"davinci.ve.states",actions:[{id:"addState",iconClass:"viewActionIcon addStateIcon",action:"davinci/ve/actions/AddState",label:"Add state",toolbarPath:"states1"},{id:"removeState",iconClass:"viewActionIcon removeStateIcon",action:"davinci/ve/actions/RemoveState",
label:"Remove state",toolbarPath:"states1"},{id:"modifyState",iconClass:"viewActionIcon modifyStateIcon",action:"davinci/ve/actions/ModifyState",label:"Modify state",toolbarPath:"states1"},{id:"manageStates",className:"manageStatesButton",iconClass:"viewActionIcon manageStatesIcon",action:"davinci/ve/actions/ManageStates",label:"For currently selected widgets, manage widget visibility for different states",toolbarPath:"states1",command:"File/ManageStates",group:"View"},{id:"NewWidgetsCurrentState",
className:"newWidgetsCurrentStateButton",iconClass:"viewActionIcon newWidgetsCurrentStateIcon",action:"davinci/ve/actions/NewWidgetsCurrentState",label:"Toggle whether new widgets go to Background or current state",toolbarPath:"states2"},{id:"highlightBaseWidgets",className:"highlightBaseWidgetsButton",iconClass:"viewActionIcon highlightBaseWidgetsIcon",action:"davinci/ve/actions/HighlightBaseWidgets",label:"When in custom state, highlight widgets from Background state",toolbarPath:"states2"}]}}],
"davinci.actionSetPartAssociations":[{targetID:"davinci.ve.cutCopyPaste",parts:["davinci.ve.visualEditor","davinci.ve.VisualEditorOutline"]}],"davinci.editorActions":{editorContribution:{targetID:"davinci.ve.HTMLPageEditor",actions:[{id:"savecombo",className:"maqLabelButton",showLabel:!0,label:"Save",toolbarPath:"save",type:"ComboButton",run:function(){p(["../Workbench"],function(m){p("../ui/Resource").save()})},isEnabled:function(m){return p("../Workbench").getOpenEditor()},menu:[{iconClass:"saveIcon",
run:function(){p("../ui/Resource").save()},isEnabled:function(m){return p("../Workbench").getOpenEditor()},label:"Save",keyBinding:{accel:!0,charOrCode:"s",allowGlobal:!0}},{iconClass:"saveAsIcon",run:function(){p("../ui/Resource").saveAs("html")},isEnabled:function(m){return p("../Workbench").getOpenEditor()},label:"Save As",keyBinding:{accel:!0,shift:!0,charOrCode:"s",allowGlobal:!0}},{id:"saveasdijit",iconClass:"fa-save",run:function(){return p(["davinci/de/resource"],function(m){m.createDijiFromNewDialog()})},
isEnabled:function(m){return p("../Workbench").getOpenEditor()},label:"Save As Widget",command:"File/Save As Widget",group:"File",tab:"Home"}]},{id:"undo",iconClass:"editActionIcon undoIcon",action:"davinci/actions/UndoAction",label:"Undo",toolbarPath:"undoredo",keyBinding:{accel:!0,charOrCode:"z"},command:"Edit/Undo"},{id:"redo",iconClass:"editActionIcon redoIcon",action:"davinci/actions/RedoAction",label:"Redo",toolbarPath:"undoredo",keyBinding:{accel:!0,shift:!0,charOrCode:"z"},command:"Edit/Redo"},
{id:"cut",label:"Cut",iconClass:"editActionIcon editCutIcon",action:"davinci/ve/actions/CutAction",toolbarPath:"cutcopypaste",keyBinding:{accel:!0,charOrCode:"x"}},{id:"copy",label:"Copy",iconClass:"editActionIcon editCopyIcon",action:"davinci/ve/actions/CopyAction",toolbarPath:"cutcopypaste",keyBinding:{accel:!0,charOrCode:"c"}},{id:"paste",label:"Paste",iconClass:"editActionIcon editPasteIcon",action:"davinci/ve/actions/PasteAction",toolbarPath:"cutcopypaste",keyBinding:{accel:!0,charOrCode:"v"}},
{id:"delete",iconClass:"editActionIcon editDeleteIcon",label:"Delete",action:"davinci/ve/actions/DeleteAction",toolbarPath:"delete",keyBinding:{charOrCode:[dojo.keys.DELETE,dojo.keys.BACKSPACE]}},{id:"outline",iconClass:"fa-crosshairs",label:"Show in Outline",action:"davinci/ve/actions/ShowInOutline",toolbarPath:"outline"},{id:"openBrowser",iconClass:"fa-play",className:"davinciFloatRight openBrowser",run:function(){p(["../Workbench"],function(m){(m=m.getOpenEditor())&&m.resourceFile?m.previewInBrowser():
console.error("ERROR. Cannot launch browser window. No editor info.")})},label:"Preview in Browser",toolbarPath:"undoredo",keyBinding:{accel:!0,charOrCode:"0",allowGlobal:!0},command:"File/Open In Browser",group:"File",tab:"Home"},{id:"documentSettings",iconClass:"documentSettingsIcon",className:"documentSettings davinciFloatRight",label:"Document settings",toolbarPath:"undoredo",type:"DropDownButton",menu:[{id:"theme",iconClass:"selectThemeIcon",className:"davinciFloatRight",action:"davinci/actions/SelectThemeAction",
label:"Switch theme"},{iconClass:"editActionIcon",label:"Select parent",action:"davinci/ve/actions/SelectParentAction",command:"Widget/Select/SelectParent",group:"Widget"},{iconClass:"editActionIcon",label:"Select ancestor",action:"davinci/ve/actions/SelectAncestorAction",command:"Widget/Select/SelectAnchestor",group:"Widget"},{iconClass:"editActionIcon",label:"Unselect all",action:"davinci/ve/actions/UnselectAllAction"},{iconClass:"editActionIcon moveToFrontIconSmall",label:"Move to front",action:"davinci/ve/actions/MoveToFrontAction",
command:"Widget/Move/MoveToFront",group:"Widget"},{iconClass:"editActionIcon moveForwardIconSmall",label:"Move forward",action:"davinci/ve/actions/MoveForwardAction",command:"Widget/Move/MoveToForward",group:"Widget"},{iconClass:"editActionIcon moveBackwardIconSmall",label:"Move backward",action:"davinci/ve/actions/MoveBackwardAction",command:"Widget/Move/MoveToBackward",group:"Widget"},{iconClass:"editActionIcon moveToBackIconSmall",label:"Move to back",action:"davinci/ve/actions/MoveToBackAction",
command:"Widget/Move/MoveToBack",group:"Widget"},{iconClass:"editActionIcon",label:"Surround with \x26lt;A\x26gt;",action:"davinci/ve/actions/SurroundAction",surroundWithTagName:"a",command:"Widget/SourroundWithA",group:"Widget",tab:"Tools"},{iconClass:"editActionIcon",label:"Surround with \x26lt;DIV\x26gt;",action:"davinci/ve/actions/SurroundAction",surroundWithTagName:"div",command:"Widget/SourroundWithDIV",group:"Widget",tab:"Tools"},{iconClass:"editActionIcon",label:"Surround with \x26lt;SPAN\x26gt;",
action:"davinci/ve/actions/SurroundAction",surroundWithTagName:"span",command:"Widget/SourroundWithSPAN",group:"Widget",tab:"Tools"},{iconClass:"editActionIcon",label:"Manage States...",id:"manageStates",action:"davinci/ve/actions/ManageStates",menubarPath:"davinci.edit/cut",command:"File/ManageStates",group:"States",tab:"Tools"}]},{id:"stickynote",iconClass:"stickynoteIcon",action:"davinci/actions/StickyNoteAction",label:"Add note",toolbarPath:"stickynote"},{id:"layout",className:"maqLabelButton davinciFloatRight maqLayoutDropDownButton",
showLabel:!0,label:"Flow",toolbarPath:"undoredo",type:"DropDownButton",menu:[{label:"Flow",iconClass:"flowLayoutIcon",method:"selectLayoutFlow"},{label:"Absolute",iconClass:"absoluteLayoutIcon",method:"selectLayoutAbsolute"}]},{id:"sourcecombo",className:"maqLabelButton davinciFloatRight maqSourceComboButton",showLabel:!0,label:"Source",action:"davinci/ve/actions/ViewSourceAction",toolbarPath:"undoredo",type:"ComboButton",menu:[{keyBinding:{accel:!0,charOrCode:"2",allowGlobal:!0},iconClass:"editActionIcon sourceModeIcon sourceMenuIcon",
action:"davinci/ve/actions/ViewSourceMenuAction",label:"Source only"},{keyBinding:{accel:!0,charOrCode:"3",allowGlobal:!0},iconClass:"editActionIcon splitVerticalIcon sourceMenuIcon",action:"davinci/ve/actions/ViewSplitVMenuAction",label:"Split Vertically"},{keyBinding:{accel:!0,charOrCode:"4",allowGlobal:!0},iconClass:"editActionIcon splitHorizontalIcon sourceMenuIcon",action:"davinci/ve/actions/ViewSplitHMenuAction",label:"Split Horizontally"}]},{id:"design",showLabel:!0,className:"maqLabelButton davinciFloatRight maqDesignButton",
action:"davinci/ve/actions/ViewDesignAction",label:"Design",toolbarPath:"undoredo",keyBinding:{accel:!0,charOrCode:"1",allowGlobal:!0}},{id:"closeactiveeditor",run:function(){p(["../Workbench"],function(m){m.closeActiveEditor()})},keyBinding:{accel:!0,shift:!0,charOrCode:"w",allowGlobal:!0}},{id:"showWidgetsPalette",run:function(){var m=dijit.byId("davinci.ve.Palette");if(m){var h=m.getParent();h&&h.selectChild(m)}},keyBinding:{meta:!0,charOrCode:"p",allowGlobal:!0}}]}},"davinci.preferences":[{name:"Visual Editor",
id:"editorPrefs",category:"davinci.html.general",pane:"davinci/ve/prefs/HTMLEditPreferences",defaultValues:{flowLayout:!1,snap:!0,showPossibleParents:!0,cssOverrideWarn:!0,absoluteWidgetsZindex:900,widgetPaletteLayout:"icons"}}],"davinci.dnd":[{parts:["davinci.ui.navigator"],dragSource:function(m){if("File"==m.elementType)return/gif|jpeg|jpg|png|svg|json/i.test(m.getExtension())},dragHandler:"davinci/ve/palette/ImageDragSource"}],"davinci.fileType":[{extension:"theme",iconClass:"themeFileIcon",type:"text"}],
"davinci.defaultEditorActions":{editorContribution:{actions:[{id:"save",run:function(){p("../Workbench").getOpenEditor().save()},isEnabled:function(m){return!0},className:"maqLabelButton",showLabel:!0,label:"Save",toolbarPath:"save",keyBinding:{accel:!0,charOrCode:"s"}},{id:"undo",iconClass:"editActionIcon undoIcon",action:"davinci/actions/UndoAction",label:"Undo",toolbarPath:"undoredo",keyBinding:{accel:!0,charOrCode:"z"}},{id:"redo",iconClass:"editActionIcon redoIcon",action:"davinci/actions/RedoAction",
label:"Redo",toolbarPath:"undoredo",keyBinding:{accel:!0,shift:!0,charOrCode:"z"}}]}}}})},"davinci/model/Path":function(){define(["dojo/_base/declare"],function(p){"undefined"===typeof davinci.model&&(davinci.model={});"undefined"===typeof davinci.model.Path&&(davinci.model.Path={});var m=p("davinci.model.Path",null,{constructor:function(h,e,b){h=h||".";"string"==typeof h?(this.path=h,this.getSegments()):(this.segments=h,this.hasLeading=e,this.hasTrailing=b)},endsWith:function(h){var e=dojo.clone(this.segments);
for(h=(new m(h)).getSegments();0<h.length&&0<e.length;)if(h.pop()!=e.pop())return!1;return!0},getExtension:function(){this.extension||(this.extension=this.path.substr(this.path.lastIndexOf(".")+1));return this.extension},segment:function(h){var e=this.getSegments();return e.length<h?null:e[h]},getSegments:function(){if(!this.segments){var h=this.path;this.segments=h.split("/");"/"==h.charAt(0)&&(this.hasLeading=!0);"/"==h.charAt(h.length-1)&&(this.hasTrailing=!0,this.segments.pop());this._canonicalize()}return this.segments},
isAbsolute:function(){return this.hasLeading},getParentPath:function(){if(!this._parentPath){var h=dojo.clone(this.segments);h.pop();this._parentPath=new m(h,this.hasLeading)}return dojo.clone(this._parentPath)},_clone:function(){return new m(dojo.clone(this.segments),this.hasLeading,this.hasTrailing)},append:function(h){h=h||"";"string"==typeof h&&(h=new m(h));if(h.isAbsolute())return h;var e=this.segments,b=h.getSegments(),e=e.concat(b);h=new m(e,this.hasLeading,h.hasTrailing);".."!=b[0]&&"."!=
b[0]||h._canonicalize();return h},toString:function(){var h=[];this.hasLeading&&h.push("/");for(var e=0;e<this.segments.length;e++)0<e&&h.push("/"),h.push(this.segments[e]);this.hasTrailing&&h.push("/");return h.join("")},removeRelative:function(){var h=this.getSegments();return 0<h.length&&"."==h[1]?this.removeFirstSegments(1):this},relativeTo:function(h,e){"string"==typeof h&&(h=new m(h));var b=this.segments;if(this.isAbsolute())return this;var k=h.getSegments(),a=this.matchingFirstSegments(h),
k=k.length;e&&--k;k-=a;if(0==k+b.length-a)return davinci.model.Path.EMPTY;for(var f=[],n=0;n<k;n++)f.push("..");for(n=a;n<b.length;n++)f.push(b[n]);return new m(f,!1,this.hasTrailing)},startsWith:function(h){var e=this.matchingFirstSegments(h);return h._length()==e},_length:function(h){return this.segments.length},matchingFirstSegments:function(h){var e=this.segments;h=h.getSegments();for(var b=Math.min(e.length,h.length),k=0,a=0;a<b&&e[a]==h[a];a++)k++;return k},removeFirstSegments:function(h){return new m(this.segments.slice(h,
this.segments.length),this.hasLeading,this.hasTrailing)},removeMatchingLastSegments:function(h){h=this.matchingFirstSegments(h);return this.removeLastSegments(h)},removeMatchingFirstSegments:function(h){h=this.matchingFirstSegments(h);return this._clone().removeFirstSegments(h)},removeLastSegments:function(h){h||(h=1);return new m(this.segments.slice(0,this.segments.length-h),this.hasLeading,this.hasTrailing)},lastSegment:function(){return this.segments[this.segments.length-1]},firstSegment:function(h){return this.segments[h||
0]},equals:function(h){if(this.segments.length!=h.segments.length)return!1;for(var e=0;e<this.segments.length;e++)if(h.segments[e]!=this.segments[e])return!1;return!0},_canonicalize:function(){for(var h,e=this.segments,b=0;b<e.length;b++)if("."==e[b]||".."==e[b]){h=!0;break}if(h){h=[];for(b=0;b<e.length;b++)".."==e[b]?0==h.length?this.hasLeading||h.push(e[b]):".."==h[h.length-1]?h.push(".."):h.pop():"."==e[b]&&1!=this.segments.length||h.push(e[b]);h.length!=e.length&&(this.segments=h)}}});davinci.model.Path.EMPTY=
new m("");return m})},"davinci/ve/themeEditor/metadata/CSSThemeProvider":function(){define(["dojo/_base/declare","../../utils/pseudoClass"],function(p,m){return p("davinci.ve.themeEditor.metadata.CSSThemeProvider",null,{module:"davinci.lib",path:"theme/tundra.json",constructor:function(h,e){this._theme=e;this.url=encodeURI(h[0].getURL());this.getWidgets()},getWidgets:function(){if(!this._widgets){var h=void 0;dojo.xhrGet({url:""+this.url,handleAs:"json",sync:!0,load:function(e){h=e}});this._widgets=
h;this._createDefaults()}return this._widgets},_createDefaults:function(){for(var h in this._widgets){var e=this._widgets[h],b;for(b in e){var k=e[b],a;for(a in k.states)this.getStyleSelectors(h+"."+b,a);for(var f in k.subwidgets){var n=k.subwidgets[f];for(a in n.states)this.getStyleSelectors(h+"."+b,a,f)}}}},getRelativeStyleSelectorsText:function(h,e,b,k,a){var f=this.getStyleSelectors(h,e,b),n=[];for(s in f)k.forEach(function(g){for(var d=!1,c=0;!d&&c<f[s].length;c++)if(f[s][c]==g||"$std_10"==f[s][c])d=
!0;if(d){var q=""+s;g=q.split(" ");q="";g.forEach(function(c){c!="."+a&&(q+=" "+c)}.bind(this));n.push(q.replace(/^\s*/,"").replace(/\s*$/,""))}}.bind(this));return n},getStyleSelectors:function(h,e,b){if(h){e||(e="Normal");var k,a=h.split(/[\.\/]/);h=a[0];a=a[a.length-1];if(b&&h in this._widgets&&a in this._widgets[h]){b=b.id?b.id:b;if(!this._widgets[h][a].subwidgets[""+b].states[""+e])return null;k=this._widgets[h][a].subwidgets[""+b].states[""+e].selectors;k&&"$auto"!=k||(k=this._createDefaultSelectors(""+
h+b,e),this._widgets[h][a].subwidgets[""+b].states[""+e].selectors=k)}else this._widgets&&h in this._widgets&&a in this._widgets[h]&&this._widgets[h][a].states[""+e]&&(k=this._widgets[h][a].states[""+e].selectors,k&&"$auto"!=k||(k=this._createDefaultSelectors(""+h+a,e),this._widgets[h][a].states[""+e].selectors=k));return k}},getElementStyleProperties:function(h,e,b){if(h){e||(e="Normal");var k,a=h.split(/[\.\/]/);h=a[0];a=a[a.length-1];if(b&&h in this._widgets&&a in this._widgets[h]){b=b.id?b.id:
b;if(!this._widgets[h][a].subwidgets[""+b].states[""+e]||!this._widgets[h][a].subwidgets[""+b].states[""+e].element||!this._widgets[h][a].subwidgets[""+b].states[""+e].element.style)return null;k=this._widgets[h][a].subwidgets[""+b].states[""+e].element.style}else this._widgets&&h in this._widgets&&a in this._widgets[h]&&this._widgets[h][a].states[""+e]&&this._widgets[h][a].states[""+e].element&&this._widgets[h][a].states[""+e].element.style&&(k=this._widgets[h][a].states[""+e].element.style);return k}},
_createDefaultSelectors:function(h,e){var b={};b["Normal"==e?"."+this._theme.className+" ."+h:"."+this._theme.className+" ."+h+e]=["$std_10"];return b},_createDefaultQuery:function(h,e){return"."+h},_simulateState:function(h,e,b,k){for(var a=h instanceof Array?h:[h],f=e instanceof Array?e:[e],n=0;n<f.length;n++){var g=f[n],d=a[n],c,q,w;-1<(c=g.indexOf(":"))&&(q=g.substring(c+1),g=g.substring(0,c),c=q.indexOf("\x3d"),-1<c?(w=q.substring(c+1),q=q.substring(0,c)):w=q);d=dojo.query(d,k.domNode)[0];d||
(d=k.domNode);try{"add"==b?(q&&d.setAttribute(q,w),g&&dojo.addClass(d,g)):(q&&d.removeAttribute(q),g&&dojo.removeClass(d,g))}catch(r){console.error("CSSThemeProvider._simulateState invalid simulate in metadata for "+k.type+" "+h+": "+e)}}},_updateStyle:function(h,e,b,k){if("all"!==h.id){var a=!1;b||(b="Normal",a=!0);if(!this._widgets)return null;e||(e=h.type);var f=e.split(/[\.\/]/),n=f[0],g=f[f.length-1],f=this._widgets[n][g];"Normal"===b&&1==a&&"remove"===k&&this._widgets[n][g].startState&&(b=this._widgets[n][g].startState);
if(this._widgets[n][g].states[""+b]){var d=this._widgets[n][g].states[""+b].query;d&&"$auto"!=d||(d=this._createDefaultQuery(n+g,b),f.states[""+b].query=d);g=this._widgets[n][g].states[""+b].simulate;if(!g){var g=" ",c=this.getStyleSelectors(e,b),q="",w;for(w in c)q=m.replace(w),q=q.replace(/\./g," "),q=q.replace(this._theme.className,""),g+=" "+q;"Normal"!=b&&(g=n+b+" "+g)}"Normal"!=b&&(g+=" "+m.MAQETTA_PSEUDO_CLASS+b,this._simulateState(d,g,k,h))}for(var r in f.subwidgets)if(c=f.subwidgets[r],"Normal"===
b&&1==a&&"remove"===k&&c.startState&&(b=c.startState),c.states[""+b]){d=c.states[""+b].query;g=c.states[""+b].simulate;d&&"$auto"!=d||(d=this._createDefaultQuery(n+r,b),c.states[""+b].query=d);if(!g){c=this.getStyleSelectors(e,b,r);g=" ";for(w in c)q=m.replace(w).replace(/\./g," ").replace(this._theme.className,""),g+=" "+q;"Normal"!=b&&(g=n+b+" "+g)}"Normal"!=b&&this._simulateState(d,g,k,h)}}},setStyleValues:function(h,e,b,k){this._updateStyle(h,e,b,"add")},removeStyleValues:function(h,e,b,k){b&&
"Normal"!=b&&this._updateStyle(h,e,b,"remove")},setWidgetStyleValues:function(h,e){davinci.ve.widget.getWidget(h);this._updateStyle(h,null,e,"add")},removeWidgetStyleValues:function(h,e){this._updateStyle(h,null,e,"remove")},getDomNode:function(h,e,b,k){if(!this._widgets)return null;k||(k="Normal");var a=e.split(/[\.\/]/);e=a[0];var a=a[a.length-1],f;try{b?(f=this._widgets[e][a].subwidgets[""+b].states[""+k].query,f&&"$auto"!=f||(f=this._createDefaultQuery(e+b,k),this._widgets[e][a].subwidgets[""+
b].states[""+k].query=f)):(f=this._widgets[e][a].states[""+k].query,f&&"$auto"!=f||(f=this._createDefaultQuery(e+a,k),this._widgets[e][a].states[""+k].query=f))}catch(n){return null}(a=dojo.query(f instanceof Array?f[0]:f,h)[0])||(a=h);return a},getMetadata:function(h){if(h){var e=h.split(/[\.\/]/);h=e[0];e=e[e.length-1];return this._widgets&&this._widgets[h]&&this._widgets[h][e]}},getWidgetType:function(h){var e;e=h.type;h=h.id;0===h.indexOf("all")&&(e=e+".$"+h);return e},isPropertyVaildForWidgetRule:function(h,
e,b,k,a){b=this.getWidgetType(b);b=this.getMetadata(b);k&&(b=b.subwidgets[k]);b=a?b.states[a]:b.states.Normal;h=h.getSelectorText();for(var f in b.selectors)if(k=b.selectors[f],h==f)for(a=0;a<k.length;a++){var n=k[a];if("$std_10"==n||n==e)return!0}return!1},isPropertyRuleValid:function(h,e,b){h=h.getSelectorText();for(var k in b.states){var a=b.states[k],f;for(f in a.selectors){var n=a.selectors[f];if(h==f)for(var g=0;g<n.length;g++){var d=n[g];if("$std_10"==d||d==e)return!0}}}for(var c in b.subwidgets){var q=
b.subwidgets[c];for(k in q.states)for(f in a=q.states[k],a.selectors)if(n=a.selectors[f],h==f)for(g=0;g<n.length;g++)if(d=n[g],"$std_10"==d||d==e)return!0}return!1},isPropertyValidForRule:function(h,e){h.getSelectorText();for(var b in this._widgets){var k=this._widgets[b],a;for(a in k)if(this.isPropertyRuleValid(h,e,k[a]))return!0}return!1},getStatesForAllWidgets:function(){if(!this._widgets)return null;states=[];for(var h in this._widgets){var e=this._widgets[h],b;for(b in e)if(0!=b.indexOf("$all")){var k=
e[b],a;for(a in k.states)states[a]=a;for(var f in k.subwidgets){var n=k.subwidgets[f];for(a in n.states)states[a]=a}}}retStates=[];for(var g in states)retStates.push(g);return retStates.sort()},isStateValid:function(h,e,b){if(!this._widgets||"all"===h.id&&"Normal"!=e)return!1;h=this.getMetadata(h.type);if(h.states[e]&&!b)return!0;if(b){if((b=h.subwidgets[b])&&b.states[e])return!0}else for(var k in h.subwidgets)if(b=h.subwidgets[k],b.states[e])return!0;return!1}})})},"davinci/ve/utils/pseudoClass":function(){define([],
function(){return{MAQETTA_PSEUDO_CLASS:"maqettaPseudoClass",replace:function(p){return"hover link visited active focus first-letter first-line first-child before after".split(" ").reduce(function(m,h){return m.replace(new RegExp(":"+h,"g"),".maqettaPseudoClass"+h[0].toUpperCase()+h.slice(1))},p)}}})},"davinci/ve/themeEditor/metadata/query":function(){define(["dojo/_base/declare","davinci/ve/utils/URLRewrite"],function(p,m){return p("davinci.ve.themeEditor.metadata.query",null,{constructor:function(h,
e){this.files=h;this.cache={};this.lastLoaded=-1;this.modules=e;this.modulePrefix=null;this.modulePrefix=".";if(e)for(var b=0;b<e.length;b++)this.modulePrefix+="/"+e[b]},getType:function(h){var e=null;h.declaredClass?e=h.type:(e=h,"html."==e.substring(0,5)&&(tagName=e.substring(5)));return e},_loadNextFile:function(){var h=this.files[++this.lastLoaded],e=null,e=h.getURL?m.encodeURI(h.getURL()):this.modulePrefix+h,b=null;dojo.xhrGet({url:e,handleAs:"json",sync:!0,load:function(k){b=k}});return b},
_fullyLoaded:function(){return this.files.length<=this.lastLoaded+1},_cacheNext:function(){var h=this._loadNextFile();dojo.mixin(this.cache,h)},getMetaData:function(h){var e=h.split(/[\.\/]/),b=0<=e.length?e[e.length-1]:e;return(e=this.cache[0<=e.length?e[0]:e])&&e[b]?e[b]:this._fullyLoaded()?null:(this._cacheNext(),this.getMetaData(h))}})})},"davinci/ve/utils/URLRewrite":function(){define([],function(){var p=/^\s*url\s*\(\s*(\'[^\'\"]*\'|\"[^\'\"]*\"|[^\'\"]*)\s*\)\s*$/,m=/^[\'\"]?([^\'\"]*)[\'\"]?$/,
h=/^(http|ftp)/;return{isAbsolute:function(e){return"string"!=typeof e?!1:(e=this.getUrl(e))?h.test(e):!1},containsUrl:function(e){return"string"!=typeof e?!1:p.test(e)},replaceUrl:function(e,b){return"string"!=typeof e||"string"!=typeof b?null:this.getUrl(e)?"url('"+b+"')":null},stripQuotes:function(e){return e.replace(m,"$1")},encodeURI:function(e){return encodeURI(e).replace(/#/g,"%23")},getUrl:function(e){return"string"!=typeof e?null:(e=e.match(p))&&1<e.length?this.stripQuotes(e[1]):null}}})},
"davinci/workbench/Preferences":function(){define("dojo/_base/declare dojo/_base/xhr dojo/_base/lang dojo/topic dojo/dom ../Runtime dijit/_WidgetBase dijit/_TemplatedMixin dijit/_WidgetsInTemplateMixin dijit/registry davinci/ui/Dialog dijit/Tree dijit/tree/ForestStoreModel dojo/data/ItemFileReadStore davinci/lang/workbench dijit/lang/_common dojo/text!davinci/workbench/templates/Preferences.html dijit/form/Button".split(" "),function(p,m,h,e,b,k,a,f,n,g,d,c,q,w,r,B,y){var A=p([a,f,n],{templateString:y,
commonStrings:B,resize:function(){this.borderContainer.resize()}}),v={_allPrefs:{},savePreferences:function(c,d,g){},_loadExtensions:function(){v._extensions||(v._extensions=k.getExtensions("davinci.preferences"))},showPreferencePage:function(){v._loadExtensions();var a=v.getPrefJson();if(a.items)for(var f=a.items.length-1;0<=f;f--){var k=a.items[f];k.hide&&a.items.splice(f,1)}if(!a||1>a.length)alert(r.noUserPref);else{this.dialog=d.showModal(new A({}),r.preferences,{width:650,height:350});var k=
new w({data:a,jsId:"prefTreeDataStore"}),f=new q({jsId:"fileModel",labelAttr:"name",store:k,rootId:"root"}),n=["root"];if(a=a.items){do k=a[0],n.push(k.id),a=k.children;while(a)}var e=g.byId("prefTree");e||(e=new c({model:f,id:"prefTree",persist:!1,query:"{type:'directory'}",label:"Preferences",labelAttr:"name",showRoot:!1,childrenAttrs:"children",openOnClick:!0,autoExpand:!0}));e.onClick=function(c){v.setPaneContent(c)};b.byId("pref.TreePane").appendChild(e.domNode);e.startup();e.onLoadDeferred.then(function(){e.set("paths",
[n]).then(function(){e.focusNode(e.selectedNode);v.setPaneContent(e.selectedItem)})})}},getPrefJson:function(){var c=v._extensions;if(!c)return[];for(var d=[],g=0;g<c.length;g++)c[g]._index=g,c[g].category?(d[c[g].category]||(d[c[g].category]=[]),d[c[g].category].push(c[g])):(d.root||(d.root=[]),d.root.push(c[g]));return{identifier:"id",items:d.root.map(function(c){return{id:c.id,name:c.name,hide:c.hide,index:c._index,children:v._getPrefJsonChildren(c.id,d)}})}},_getPrefJsonChildren:function(c,d){var g=
d[c];if(!g)return[];for(var a=[],q=0;q<g.length;q++)a[q]={id:g[q].id,name:g[q].name,index:g[q]._index},d[g[q].id]&&(a[q].children=v._getPrefJsonChildren(g[q].id,d));return a},setPaneContent:function(c){var d;delete v._currentPane;var a=v._extensions[c.index[0]],q=v.getPreferences(a.id,davinci.Workbench.getProject());a.pane?require([a.pane],function(c){c=new c;v._currentPane=c;v._currentPane._extension=a;v._currentPane.setPreferences(q);g.byId("pref.RightPane").setContent(c.domNode)}):d=a.pageContent?
document.createTextNode(a.pageContent):document.createTextNode("");d&&g.byId("pref.RightPane").setContent(d)},_save:function(c){if(v._currentPane){var d=v._currentPane.getPreferences(),g=v._currentPane._extension.id,a=davinci.Workbench.getProject();v.savePreferences(g,a,d);v._currentPane.save&&v._currentPane.save(d)}for(d=0;d<c.length;d++){try{c[d].save&&c[d].save()}catch(q){}c[d].children&&0<c[d].children.length&&v._save(c[d].children)}},save:function(){v._save(v._extensions);v.finish()},finish:function(){v._extensions=
null;v._currentPane=null;this.dialog.destroyRecursive(!1);this.dialog=null},getPreferences:function(c,d){v._allPrefs[d]||(v._allPrefs[d]={});return{version:"1.7",specVersion:"0.8",snap:!0,helper:"maq-metadata-dojo/dojox/mobile/ThemeHelper",themeSets:[{_COMMENT_:"Defines site-specific default theme sets",desktopTheme:"claro",mobileTheme:[{device:"Android",theme:"android"},{device:"BlackBerry",theme:"blackberry"},{device:"iPad",theme:"ipad"},{device:"iPhone",theme:"iphone"},{device:"other",theme:"iphone"}],
name:"site_dojo_default"}]}},getDefaultPreferences:function(c){v._loadExtensions();for(var d=0;d<v._extensions.length;d++)if(v._extensions[d].id==c)return"string"===typeof v._extensions[d].defaultValues?k.serverJSONRequest({url:v._extensions[d].defaultValues,handleAs:"json",sync:!0}).defaultValues:v._extensions[d].defaultValues}};return h.setObject("davinci.workbench.Preferences",v)})},"davinci/ui/Dialog":function(){define("dojo/_base/declare dijit/form/Button dijit/Dialog dojo/dom-geometry dojo/dom-style dojo/_base/connect dojo/window dojo/parser davinci/_common".split(" "),
function(p,m,h,e,b,k,a,f,n){var g=p(h,{contentStyle:null,buildRendering:function(){this.inherited(arguments);dojo.addClass(this.domNode,"resizableDialog");dojo.addClass(this.domNode,"ui-widget-content");this.submitOnEnter&&dojo.addClass(this.domNode,"submitOnEnter")},_setContent:function(d,c){this.inherited(arguments);var g=dojo.doc.createElement("div");this.containerNode.appendChild(g);(g=dojo.query(".dijitDialogPaneContentArea",this.containerNode)[0])?dojo.connect(g,"onkeydown",this,"_onKeyDown"):
dojo.connect(this.domNode,"onkeydown",this,"_onKeyDown")},resize:function(d){if(d){var c=b.getComputedStyle(this.containerNode),c=e.getPadExtents(this.containerNode,c),g=d.w-c.w,a=d.h-c.h,a=a-e.getMarginBox(this.titleBar).h;d=dojo.query(".dijitDialogPaneContentArea",this.containerNode)[0];c=dojo.query(".dijitDialogPaneActionBar",this.containerNode)[0];a-=e.getMarginBox(c).h;g&&dojo.style(d,"width",g+"px");a&&dojo.style(d,"height",a+"px");dojo.forEach(this.getChildren(),dojo.hitch(this,function(c){c.resize&&
c.resize({w:g,h:a})}))}},show:function(){var d=this.inherited(arguments);if(this.contentStyle){if("object"==typeof this.contentStyle){var c={};this.contentStyle.width&&(c.w=parseInt(this.contentStyle.width));this.contentStyle.height&&(c.h=parseInt(this.contentStyle.height));var g=a.getBox(this.ownerDocument);g.w*=this.maxRatio;g.h*=this.maxRatio;c.h>g.h&&(e.position(this.containerNode),Math.min(c.w,g.w),Math.min(c.h,g.h),c.h=g.h);this.resize(c)}this._size();this._position();dojo.style(this.containerNode,
"width","auto");dojo.style(this.containerNode,"height","auto")}return d},_onKeyDown:function(d){var c=d.ctrlKey&&!dojo.isMac||dojo.isMac&&d.metaKey;d.which==dojo.keys.ENTER&&(c||this.submitOnEnter)&&(d=dojo.query("input[type\x3dsubmit]",this.containerNode),0<d.length&&(d=dijit.getEnclosingWidget(d[0]),c=document.createEvent("MouseEvents"),c.initMouseEvent("click",!0,!0,window,0,0,0,0,0,!1,!1,!1,!1,0,null),d._onClick(c)))}});g._timedDestroy=function(d,c){c&&c.forEach(k.disconnect);var g=k.connect(d,
"onHide",function(){k.disconnect(g);d.destroyRecursive()});d.hide()};g.showModal=function(d,c,a,f,b,n){var e=[];c={title:c,content:d,contentStyle:a,submitOnEnter:b};n&&(c.onShow=n);var h=new g(c);n=dojo.hitch(this,function(){var c=!1;f&&(c=f());c||this._timedDestroy(h,e)});e.push(k.connect(h,"onExecute",d,n));d.onExecute&&e.push(k.connect(d,"onExecute",d,n));e.push(k.connect(d,"onClose",dojo.hitch(this,function(){this._timedDestroy(h,e)})));e.push(k.connect(h,"onCancel",dojo.hitch(this,function(){this._timedDestroy(h,
e)})));h.show();return h};g.showMessage=function(d,c,g,a,f){return this.showDialog({title:d,content:c,style:g,okCallback:a,okLabel:null,hideCancel:!0})};g.showDialog=function(d){var c=d.title,a=d.content,b=d.style,r=d.okCallback,e=d.okLabel,h=d.hideCancel,A=d.submitOnEnter,v=d.extendLabels,x=d.extendCallbacks,u,z=[];d=document.createElement("div");var C=document.createElement("div");dojo.addClass(C,"dijitDialogPaneContentArea");d.appendChild(C);var p=document.createElement("div");dojo.addClass(p,
"dijitDialogPaneActionBar");e=new m({label:e?e:n.ok,type:"submit","class":"maqPrimaryButton"});p.appendChild(e.domNode);var D=dojo.hitch(this,function(){this._timedDestroy(u,z)});if(v&&x&&0<v.length&&v.length===x.length)for(e=0;e<v.length;e++){var H=function(c){if(x[c])x[c]();u.onCancel()}.bind(this,e);p.appendChild((new m({label:v[e],onClick:H,"class":"maqSecondaryButton"})).domNode)}h||p.appendChild((new m({label:n.cancel,onClick:function(){u.onCancel()},"class":"maqSecondaryButton"})).domNode);
d.appendChild(p);u=new g({title:c,content:d,contentStyle:b,submitOnEnter:A});dojo.isString(a)?(C.innerHTML=a,f.parse(C)):a.domNode?C.appendChild(a.domNode):C.appendChild(a);z.push(k.connect(u,"onExecute",dojo.hitch(this,function(){r&&r();D()})));z.push(k.connect(u,"onCancel",dojo.hitch(this,function(){D()})));u.show();return u};return g})},"dojo/window":function(){define("./_base/lang ./sniff ./_base/window ./dom ./dom-geometry ./dom-style ./dom-construct".split(" "),function(p,m,h,e,b,k,a){m.add("rtl-adjust-position-for-verticalScrollBar",
function(f,g){var d=h.body(g),c=a.create("div",{style:{overflow:"scroll",overflowX:"visible",direction:"rtl",visibility:"hidden",position:"absolute",left:"0",top:"0",width:"64px",height:"64px"}},d,"last"),q=a.create("div",{style:{overflow:"hidden",direction:"ltr"}},c,"last"),k=0!=b.position(q).x;c.removeChild(q);d.removeChild(c);return k});m.add("position-fixed-support",function(f,g){var d=h.body(g),c=a.create("span",{style:{visibility:"hidden",position:"fixed",left:"1px",top:"1px"}},d,"last"),q=
a.create("span",{style:{position:"fixed",left:"0",top:"0"}},c,"last"),k=b.position(q).x!=b.position(c).x;c.removeChild(q);d.removeChild(c);return k});var f={getBox:function(a){a=a||h.doc;var g="BackCompat"==a.compatMode?h.body(a):a.documentElement,d=b.docScroll(a);if(m("touch")){var c=f.get(a);a=c.innerWidth||g.clientWidth;g=c.innerHeight||g.clientHeight}else a=g.clientWidth,g=g.clientHeight;return{l:d.x,t:d.y,w:a,h:g}},get:function(a){if(9>m("ie")&&f!==document.parentWindow){a.parentWindow.execScript("document._parentWindow \x3d window;",
"Javascript");var g=a._parentWindow;a._parentWindow=null;return g}return a.parentWindow||a.defaultView},scrollIntoView:function(a,g){try{a=e.byId(a);var d=a.ownerDocument||h.doc,c=h.body(d),f=d.documentElement||c.parentNode,w=m("ie"),r=m("webkit");if(a!=c&&a!=f)if(!(m("mozilla")||w||r||m("opera"))&&"scrollIntoView"in a)a.scrollIntoView(!1);else{var B="BackCompat"==d.compatMode,y=Math.min(c.clientWidth||f.clientWidth,f.clientWidth||c.clientWidth),A=Math.min(c.clientHeight||f.clientHeight,f.clientHeight||
c.clientHeight),d=r||B?c:f,v=g||b.position(a),x=a.parentNode,r=function(c){return 6>=w||7==w&&B?!1:m("position-fixed-support")&&"fixed"==k.get(c,"position").toLowerCase()};if(!r(a))for(;x;){x==c&&(x=d);var u=b.position(x),z=r(x),C="rtl"==k.getComputedStyle(x).direction.toLowerCase();if(x==d){u.w=y;u.h=A;d==f&&w&&C&&(u.x+=d.offsetWidth-u.w);if(0>u.x||!w||9<=w)u.x=0;if(0>u.y||!w||9<=w)u.y=0}else{var p=b.getPadBorderExtents(x);u.w-=p.w;u.h-=p.h;u.x+=p.l;u.y+=p.t;var D=x.clientWidth,H=u.w-D;0<D&&0<H&&
(C&&m("rtl-adjust-position-for-verticalScrollBar")&&(u.x+=H),u.w=D);D=x.clientHeight;H=u.h-D;0<D&&0<H&&(u.h=D)}z&&(0>u.y&&(u.h+=u.y,u.y=0),0>u.x&&(u.w+=u.x,u.x=0),u.y+u.h>A&&(u.h=A-u.y),u.x+u.w>y&&(u.w=y-u.x));var E=v.x-u.x,G=v.y-u.y,N=E+v.w-u.w,L=G+v.h-u.h,J,F;0<N*E&&(x.scrollLeft||x==d||x.scrollWidth>x.offsetHeight)&&(J=Math[0>E?"max":"min"](E,N),C&&(8==w&&!B||9<=w)&&(J=-J),F=x.scrollLeft,x.scrollLeft+=J,J=x.scrollLeft-F,v.x-=J);0<L*G&&(x.scrollTop||x==d||x.scrollHeight>x.offsetHeight)&&(J=Math.ceil(Math[0>
G?"max":"min"](G,L)),F=x.scrollTop,x.scrollTop+=J,J=x.scrollTop-F,v.y-=J);x=x!=d&&!z&&x.parentNode}}}catch(K){console.error("scrollIntoView: "+K),a.scrollIntoView(!1)}}};p.setObject("dojo.window",f);return f})},"davinci/_common":function(){define([],function(){return{search:"Search",filter:"Filter","new":"New",errorSavingFile:"Error saving file: ${0} details: ${1}",palette:"palette",closeAllEditors:"Close all tabs",undo:"Undo",redo:"Redo",copy:"Copy",paste:"Paste",cut:"Cut","delete":"Delete",surround:"Surround",
properties:"Properties",styles:"Styles",events:"Events",preferences:"Preferences",addPane:"Add Pane",addColumn:"Add Column",addRow:"Add Row",removeColumn:"Remove Column",removeRow:"Remove Row",joinColumn:"Join Column",joinRow:"Join Row",splitColumn:"Split Column",splitRow:"Split Row",alignLeft:"Align Left",alignRight:"Align Right",alignTop:"Align Top",alignBottom:"Align Bottom",show:"Show",hide:"Hide",addMenuItem:"Add Menu Item",addSubMenu:"Add Sub Menu",addMenuBarItem:"Add MenuBar Item",addPopupMenuBar:"Add Popup MenuBarItem",
ok:"OK",cancel:"Cancel",page:"Page",title:"Title",metaInfo:"Meta Info",httpEquiv:"HTTP Equiv",style:"Style",theme:"Theme",styleSheets:"Style Sheets",rules:"Rules",url:"URL",externalScripts:"External Scripts",modules:"Modules",name:"Name",value:"Value",add:"Add",remove:"Remove",staticOptions:"Static Options",axisOptions:"Axis Options",series:"Series",axis:"Axis",option:"Option",selected:"Selected",staticItems:"Static Items",dataStore:"Data Store",query:"Query",fields:"Fields",field:"Field",label:"Label",
width:"Width",edit:"Edit",key:"Key",rootId:"Root ID",rootLabel:"Root Label",childrenAttrs:"Children Attributes",items:"Items",type:"Type",widget:"Widget",position:"Position",size:"Size",layout:"Layout",visual:"Visual",text:"Text",border:"Border",table:"Table",list:"List",aural:"Aural",others:"Others",onLoad:"Load",onUnload:"Unload",script:"Script",methodCall:"Method Call",serviceCall:"Service Call",object:"Object",method:"Method",parameters:"Parameters",result:"Result",service:"Service",content:"Content",
source:"Source",target:"Target",property:"Property",flowLayout:"Flow Layout",snapToNearestWidget:"Snap to nearest widget",showPossibleParents:"When dragging, show possible parents",warnOnCSSOverride:"Warn on CSS Override",absoluteWidgetsZindex:"z-index for sketch mode",widgetPaletteLayout:"In Palette, display widgets as",widgetPaletteShow_Icons:"icons",widgetPaletteShow_List:"list",liveEdit:"Live Edit",zazl:"Enable \x3ca href\x3d'http://zazl.org' target\x3d'_blank'\x3eZazl Optimizer\x3c/a\x3e",selectorPrefix:"Selector Prefix",
component:"Component",alternates:"Alternates",alternateWidgets:"Alternate widgets:",howToChooseAlternate:"To choose alternate widget, click-select current widget, then click on up arrow icon.",summary:"Summary:",description:"Description:",showSuggestedWidgets:"Suggested Widgets",showAllWidgets:"All Widgets",MoreIconTitleString:"Click here to see alternative similar widgets",HelpIconTitleString:"Click here to see descriptive info about this widget",__dummy__:""}})},"dojo/data/ItemFileReadStore":function(){define("../_base/kernel ../_base/lang ../_base/declare ../_base/array ../_base/xhr ../Evented ./util/filter ./util/simpleFetch ../date/stamp".split(" "),
function(p,m,h,e,b,k,a,f,n){h=h("dojo.data.ItemFileReadStore",[k],{constructor:function(g){this._arrayOfAllItems=[];this._arrayOfTopLevelItems=[];this._loadFinished=!1;this.url=this._ccUrl=this._jsonFileUrl=g.url;this._jsonData=g.data;this.data=null;this._datatypeMap=g.typeMap||{};this._datatypeMap.Date||(this._datatypeMap.Date={type:Date,deserialize:function(d){return n.fromISOString(d)}});this._features={"dojo.data.api.Read":!0,"dojo.data.api.Identity":!0};this._itemsByIdentity=null;this._storeRefPropName=
"_S";this._itemNumPropName="_0";this._rootItemPropName="_RI";this._reverseRefMap="_RRM";this._loadInProgress=!1;this._queuedFetches=[];void 0!==g.urlPreventCache&&(this.urlPreventCache=g.urlPreventCache?!0:!1);void 0!==g.hierarchical&&(this.hierarchical=g.hierarchical?!0:!1);g.clearOnClose&&(this.clearOnClose=!0);"failOk"in g&&(this.failOk=g.failOk?!0:!1)},url:"",_ccUrl:"",data:null,typeMap:null,clearOnClose:!1,urlPreventCache:!1,failOk:!1,hierarchical:!0,_assertIsItem:function(g){if(!this.isItem(g))throw Error(this.declaredClass+
": Invalid item argument.");},_assertIsAttribute:function(g){if("string"!==typeof g)throw Error(this.declaredClass+": Invalid attribute argument.");},getValue:function(g,d,c){g=this.getValues(g,d);return 0<g.length?g[0]:c},getValues:function(g,d){this._assertIsItem(g);this._assertIsAttribute(d);return(g[d]||[]).slice(0)},getAttributes:function(g){this._assertIsItem(g);var d=[],c;for(c in g)c!==this._storeRefPropName&&c!==this._itemNumPropName&&c!==this._rootItemPropName&&c!==this._reverseRefMap&&
d.push(c);return d},hasAttribute:function(g,d){this._assertIsItem(g);this._assertIsAttribute(d);return d in g},containsValue:function(g,d,c){var f=void 0;"string"===typeof c&&(f=a.patternToRegExp(c,!1));return this._containsValue(g,d,c,f)},_containsValue:function(g,d,c,a){return e.some(this.getValues(g,d),function(d){if(null!==d&&!m.isObject(d)&&a){if(d.toString().match(a))return!0}else if(c===d)return!0})},isItem:function(a){return a&&a[this._storeRefPropName]===this&&this._arrayOfAllItems[a[this._itemNumPropName]]===
a?!0:!1},isItemLoaded:function(a){return this.isItem(a)},loadItem:function(a){this._assertIsItem(a.item)},getFeatures:function(){return this._features},getLabel:function(a){if(this._labelAttr&&this.isItem(a))return this.getValue(a,this._labelAttr)},getLabelAttributes:function(a){return this._labelAttr?[this._labelAttr]:null},filter:function(g,d,c){var f=[],b,k;if(g.query){var n;b=g.queryOptions?g.queryOptions.ignoreCase:!1;var e={};for(k in g.query)n=g.query[k],"string"===typeof n?e[k]=a.patternToRegExp(n,
b):n instanceof RegExp&&(e[k]=n);for(b=0;b<d.length;++b){var h=!0,v=d[b];if(null===v)h=!1;else for(k in g.query)n=g.query[k],this._containsValue(v,k,n,e[k])||(h=!1);h&&f.push(v)}}else for(b=0;b<d.length;++b)k=d[b],null!==k&&f.push(k);c(f,g)},_fetchItems:function(a,d,c){var f=this;if(this._loadFinished)this.filter(a,this._getItemsArray(a.queryOptions),d);else if(this._jsonFileUrl!==this._ccUrl?(p.deprecated(this.declaredClass+": ","To change the url, set the url property of the store, not _jsonFileUrl.  _jsonFileUrl support will be removed in 2.0"),
this.url=this._ccUrl=this._jsonFileUrl):this.url!==this._ccUrl&&(this._ccUrl=this._jsonFileUrl=this.url),null!=this.data&&(this._jsonData=this.data,this.data=null),this._jsonFileUrl)if(this._loadInProgress)this._queuedFetches.push({args:a,filter:m.hitch(f,"filter"),findCallback:m.hitch(f,d)});else{this._loadInProgress=!0;var k=b.get({url:f._jsonFileUrl,handleAs:"json-comment-optional",preventCache:this.urlPreventCache,failOk:this.failOk});k.addCallback(function(b){try{f._getItemsFromLoadedData(b),
f._loadFinished=!0,f._loadInProgress=!1,f.filter(a,f._getItemsArray(a.queryOptions),d),f._handleQueuedFetches()}catch(k){f._loadFinished=!0,f._loadInProgress=!1,c(k,a)}});k.addErrback(function(d){f._loadInProgress=!1;c(d,a)});var n=null;a.abort&&(n=a.abort);a.abort=function(){k&&-1===k.fired&&k.cancel();n&&n.call(a)}}else if(this._jsonData)try{this._loadFinished=!0,this._getItemsFromLoadedData(this._jsonData),this._jsonData=null,f.filter(a,this._getItemsArray(a.queryOptions),d)}catch(e){c(e,a)}else c(Error(this.declaredClass+
": No JSON source data was provided as either URL or a nested Javascript object."),a)},_handleQueuedFetches:function(){if(0<this._queuedFetches.length){for(var a=0;a<this._queuedFetches.length;a++){var d=this._queuedFetches[a],c=d.args,f=d.filter,d=d.findCallback;f?f(c,this._getItemsArray(c.queryOptions),d):this.fetchItemByIdentity(c)}this._queuedFetches=[]}},_getItemsArray:function(a){return a&&a.deep?this._arrayOfAllItems:this._arrayOfTopLevelItems},close:function(a){this.clearOnClose&&this._loadFinished&&
!this._loadInProgress&&(this._arrayOfAllItems=[],this._arrayOfTopLevelItems=[],this._loadFinished=!1,this._itemsByIdentity=null,this._loadInProgress=!1,this._queuedFetches=[])},_getItemsFromLoadedData:function(a){function d(c){return null!==c&&"object"===typeof c&&(!m.isArray(c)||f)&&!m.isFunction(c)&&(c.constructor==Object||m.isArray(c))&&"undefined"===typeof c._reference&&"undefined"===typeof c._type&&"undefined"===typeof c._value&&b.hierarchical}function c(a){b._arrayOfAllItems.push(a);for(var g in a){var f=
a[g];if(f)if(m.isArray(f))for(var q=0;q<f.length;++q){var k=f[q];d(k)&&c(k)}else d(f)&&c(f)}}var f=!1,b=this;this._labelAttr=a.label;var k,n;this._arrayOfAllItems=[];this._arrayOfTopLevelItems=a.items;for(k=0;k<this._arrayOfTopLevelItems.length;++k)n=this._arrayOfTopLevelItems[k],m.isArray(n)&&(f=!0),c(n),n[this._rootItemPropName]=!0;var e={},h;for(k=0;k<this._arrayOfAllItems.length;++k)for(h in n=this._arrayOfAllItems[k],n){if(h!==this._rootItemPropName){var v=n[h];null!==v?m.isArray(v)||(n[h]=[v]):
n[h]=[null]}e[h]=h}for(;e[this._storeRefPropName];)this._storeRefPropName+="_";for(;e[this._itemNumPropName];)this._itemNumPropName+="_";for(;e[this._reverseRefMap];)this._reverseRefMap+="_";if(e=a.identifier)for(this._itemsByIdentity={},this._features["dojo.data.api.Identity"]=e,k=0;k<this._arrayOfAllItems.length;++k)if(n=this._arrayOfAllItems[k],a=n[e],a=a[0],Object.hasOwnProperty.call(this._itemsByIdentity,a)){if(this._jsonFileUrl)throw Error(this.declaredClass+":  The json data as specified by: ["+
this._jsonFileUrl+"] is malformed.  Items within the list have identifier: ["+e+"].  Value collided: ["+a+"]");if(this._jsonData)throw Error(this.declaredClass+":  The json data provided by the creation arguments is malformed.  Items within the list have identifier: ["+e+"].  Value collided: ["+a+"]");}else this._itemsByIdentity[a]=n;else this._features["dojo.data.api.Identity"]=Number;for(k=0;k<this._arrayOfAllItems.length;++k)n=this._arrayOfAllItems[k],n[this._storeRefPropName]=this,n[this._itemNumPropName]=
k;for(k=0;k<this._arrayOfAllItems.length;++k)for(h in n=this._arrayOfAllItems[k],n)for(a=n[h],e=0;e<a.length;++e)if(v=a[e],null!==v&&"object"==typeof v){if("_type"in v&&"_value"in v){var x=v._type,u=this._datatypeMap[x];if(u)if(m.isFunction(u))a[e]=new u(v._value);else if(m.isFunction(u.deserialize))a[e]=u.deserialize(v._value);else throw Error("dojo.data.ItemFileReadStore: Value provided in typeMap was neither a constructor, nor a an object with a deserialize function");else throw Error("dojo.data.ItemFileReadStore: in the typeMap constructor arg, no object class was specified for the datatype '"+
x+"'");}if(v._reference){v=v._reference;if(m.isObject(v))for(x=0;x<this._arrayOfAllItems.length;++x){var u=this._arrayOfAllItems[x],z=!0,C;for(C in v)u[C]!=v[C]&&(z=!1);z&&(a[e]=u)}else a[e]=this._getItemByIdentity(v);this.referenceIntegrity&&(v=a[e],this.isItem(v)&&this._addReferenceToMap(v,n,h))}else this.isItem(v)&&this.referenceIntegrity&&this._addReferenceToMap(v,n,h)}},_addReferenceToMap:function(a,d,c){},getIdentity:function(a){var d=this._features["dojo.data.api.Identity"];return d===Number?
a[this._itemNumPropName]:(a=a[d])?a[0]:null},fetchItemByIdentity:function(a){var d,c;if(this._loadFinished)d=this._getItemByIdentity(a.identity),a.onItem&&(c=a.scope?a.scope:p.global,a.onItem.call(c,d));else{var f=this;this._jsonFileUrl!==this._ccUrl?(p.deprecated(this.declaredClass+": ","To change the url, set the url property of the store, not _jsonFileUrl.  _jsonFileUrl support will be removed in 2.0"),this.url=this._ccUrl=this._jsonFileUrl):this.url!==this._ccUrl&&(this._ccUrl=this._jsonFileUrl=
this.url);null!=this.data&&null==this._jsonData&&(this._jsonData=this.data,this.data=null);this._jsonFileUrl?this._loadInProgress?this._queuedFetches.push({args:a}):(this._loadInProgress=!0,c=b.get({url:f._jsonFileUrl,handleAs:"json-comment-optional",preventCache:this.urlPreventCache,failOk:this.failOk}),c.addCallback(function(c){var b=a.scope?a.scope:p.global;try{f._getItemsFromLoadedData(c),f._loadFinished=!0,f._loadInProgress=!1,d=f._getItemByIdentity(a.identity),a.onItem&&a.onItem.call(b,d),f._handleQueuedFetches()}catch(k){f._loadInProgress=
!1,a.onError&&a.onError.call(b,k)}}),c.addErrback(function(c){f._loadInProgress=!1;a.onError&&a.onError.call(a.scope?a.scope:p.global,c)})):this._jsonData&&(f._getItemsFromLoadedData(f._jsonData),f._jsonData=null,f._loadFinished=!0,d=f._getItemByIdentity(a.identity),a.onItem&&(c=a.scope?a.scope:p.global,a.onItem.call(c,d)))}},_getItemByIdentity:function(a){var d=null;this._itemsByIdentity?Object.hasOwnProperty.call(this._itemsByIdentity,a)&&(d=this._itemsByIdentity[a]):Object.hasOwnProperty.call(this._arrayOfAllItems,
a)&&(d=this._arrayOfAllItems[a]);void 0===d&&(d=null);return d},getIdentityAttributes:function(a){a=this._features["dojo.data.api.Identity"];return a===Number?null:[a]},_forceLoad:function(){var a=this;this._jsonFileUrl!==this._ccUrl?(p.deprecated(this.declaredClass+": ","To change the url, set the url property of the store, not _jsonFileUrl.  _jsonFileUrl support will be removed in 2.0"),this.url=this._ccUrl=this._jsonFileUrl):this.url!==this._ccUrl&&(this._ccUrl=this._jsonFileUrl=this.url);null!=
this.data&&(this._jsonData=this.data,this.data=null);if(this._jsonFileUrl){var d=b.get({url:this._jsonFileUrl,handleAs:"json-comment-optional",preventCache:this.urlPreventCache,failOk:this.failOk,sync:!0});d.addCallback(function(c){try{if(!0!==a._loadInProgress&&!a._loadFinished)a._getItemsFromLoadedData(c),a._loadFinished=!0;else if(a._loadInProgress)throw Error(this.declaredClass+":  Unable to perform a synchronous load, an async load is in progress.");}catch(d){throw d;}});d.addErrback(function(c){throw c;
})}else this._jsonData&&(a._getItemsFromLoadedData(a._jsonData),a._jsonData=null,a._loadFinished=!0)}});m.extend(h,f);return h})},"dojo/data/util/filter":function(){define(["../../_base/lang"],function(p){var m={};p.setObject("dojo.data.util.filter",m);m.patternToRegExp=function(h,e){for(var b="^",k=null,a=0;a<h.length;a++)switch(k=h.charAt(a),k){case "\\":b+=k;a++;b+=h.charAt(a);break;case "*":b+=".*";break;case "?":b+=".";break;case "$":case "^":case "/":case "+":case ".":case "|":case "(":case ")":case "{":case "}":case "[":case "]":b+=
"\\";default:b+=k}b+="$";return e?new RegExp(b,"mi"):new RegExp(b,"m")};return m})},"dojo/data/util/simpleFetch":function(){define(["../../_base/lang","../../_base/kernel","./sorter"],function(p,m,h){var e={};p.setObject("dojo.data.util.simpleFetch",e);e.errorHandler=function(b,k){k.onError&&k.onError.call(k.scope||m.global,b,k)};e.fetchHandler=function(b,k){var a=k.abort||null,f=!1,n=k.start?k.start:0,g=k.count&&Infinity!==k.count?n+k.count:b.length;k.abort=function(){f=!0;a&&a.call(k)};var d=k.scope||
m.global;k.store||(k.store=this);k.onBegin&&k.onBegin.call(d,b.length,k);k.sort&&b.sort(h.createSortFunction(k.sort,this));if(k.onItem)for(var c=n;c<b.length&&c<g;++c){var q=b[c];f||k.onItem.call(d,q,k)}k.onComplete&&!f&&(c=null,k.onItem||(c=b.slice(n,g)),k.onComplete.call(d,c,k))};e.fetch=function(b){b=b||{};b.store||(b.store=this);this._fetchItems(b,p.hitch(this,"fetchHandler"),p.hitch(this,"errorHandler"));return b};return e})},"dojo/data/util/sorter":function(){define(["../../_base/lang"],function(p){var m=
{};p.setObject("dojo.data.util.sorter",m);m.basicComparator=function(h,e){var b=-1;null===h&&(h=void 0);null===e&&(e=void 0);if(h==e)b=0;else if(h>e||null==h)b=1;return b};m.createSortFunction=function(h,e){function b(c,a,d,g){return function(f,b){var k=g.getValue(f,c),n=g.getValue(b,c);return a*d(k,n)}}for(var k=[],a,f=e.comparatorMap,n=m.basicComparator,g=0;g<h.length;g++){a=h[g];var d=a.attribute;if(d){a=a.descending?-1:1;var c=n;f&&("string"!==typeof d&&"toString"in d&&(d=d.toString()),c=f[d]||
n);k.push(b(d,a,c,e))}}return function(c,a){for(var d=0;d<k.length;){var g=k[d++](c,a);if(0!==g)return g}return 0}};return m})},"davinci/lang/workbench":function(){define([],function(){return{fileHasUnsavedChanges:"The file '${0}' has unsaved changes. Are you sure you want to close WITHOUT saving?",outlineNotAvailable:"An outline is not available",preferences:"Preferences",noUserPref:"no user preferences...",restoreDefaults:"Restore Defaults"}})},"davinci/repositoryinfo":function(){define({revision:"",
buildtime:"@buildtime@"})},"davinci/Workbench":function(){define("dcl/dcl dojo/_base/lang require ./Runtime ./ui/Dialog ./ve/metadata ./ve/utils/GeomUtils davinci/_WokbenchEditors davinci/_WokbenchMisc davinci/_Workbench_Menu davinci/_Workbench_Palette".split(" "),function(p,m,h,e,b,k,a,f,n,g,d){Function.prototype.bind=Function.prototype.bind||function(c){return dojo.hitch(c,this)};window.setInterval(function(){c.saveState&&c.updateWorkbenchState()},5E3);var c=new (p([f,n,g,d],{declaredClass:"davinci.Workbench",
_XX_last_member:!0,activePerspective:"",actionScope:[],_DEFAULT_PROJECT:"project1",_baseTitle:"Control-Freak ",hideEditorTabs:!0,_editorTabClosing:{},_shadowTabClosing:{},service:null,serviceClass:"XApp_XIDE_Workbench_Service",currentEditor:null,run2:function(){e.subscribe("/davinci/ui/widgetPropertiesChanges",function(){var c=e.currentEditor.visualEditor;c._objectPropertiesChange.apply(c,arguments)})},onResize:function(a){var d=a.explicitOriginalTarget?a.explicitOriginalTarget:a.srcElement;if(("resize"==
a.type||d.id&&-1<d.id.indexOf("dijit_layout__Splitter_")||d.nextSibling&&d.nextSibling.id&&-1<d.nextSibling.id.indexOf("dijit_layout__Splitter_"))&&(a=davinci&&e.currentEditor)&&a.onResize)a.onResize();c._originalOnResize&&c._originalOnResize();c._repositionFocusContainer()},showModal:function(c,a,d,g,f,k){return b.showModal(c,a,d,g,f,k)},showMessage:function(c,a,d,g,f){return b.showMessage(c,a,d,g,f)},showDialog:function(c){return b.showDialog(c)},_loadActionClass:function(c){c&&"string"==typeof c.action&&
h([c.action],function(a){try{if(a)c.action=new a,c.action.item=c;else debugger}catch(d){console.error("action class creation failed : "+c.action)}})},_toggleButton:function(a,d,g,f){a.checked&&(g.forEach(function(c){c!=a&&c.set("checked",!1)}),c._runAction(a.item,d,a.item.id))},_runAction:function(c,a,d){a&&e.currentEditor&&(a=e.currentEditor);if(c.run)c.run();else if(c.action)dojo.isString(c.action)&&this._loadActionClass(c),c.action.run(a);else if(c.method&&a&&a[c.method]instanceof Function)a[c.method](d);
else c.commandID&&e.executeCommand(c.commandID)},createPopup:function(a){var d=a.partID,g=a.domNode,f=a.context,b=a.openCallback,k=this.getActionSets(d),n=k.clonedActionSets,k=k.actionSets;try{if(0<n.length){var e=c._createMenuTree(n,!0);c._initActionsKeys(k,a);var h=c._createMenu(e,f);h&&g&&h.bindDomNode(g);h._widgetCallback=b;h._partID=d;return h}}catch(z){logError(z,"creating popup")}},getActionSets:function(c){var a=[];e.getExtension("davinci.actionSetPartAssociations",function(d){return d.parts.some(function(g){if(g==
c)return a.push(d.targetID),!0})});var d,g=[];a.length&&(d=e.getExtensions("davinci.actionSets",function(c){return a.some(function(a){return a==c.id})}),d.length&&d.forEach(function(c){var a=k.getLibraryActions(c.id);a.length&&(c=m.mixin({},c),c.actions=c.actions.concat(a));g.push(c)}));return{actionSets:d,clonedActionSets:g}},getFocusContainer:function(){var c=document.getElementById("focusContainer");c||(c=dojo.create("div",{"class":"focusContainer",id:"focusContainer"},document.body),davinci.Workbench.focusContainer=
c);return c},_repositionFocusContainer:function(){var c=dojo.byId("editorsStackContainer"),d=this.getFocusContainer();if(c&&d){var g=e.currentEditor;if(c=g&&g.getFocusContainerBounds?g.getFocusContainerBounds():a.getBorderBoxPageCoords(c))d.style.left=c.l+"px",d.style.top=c.t+"px",d.style.width=c.w+"px",d.style.height=c.h+"px",g&&g.getContext&&(d=g.getContext())&&d.updateFocusAll&&d.updateFocusAll()}},_removeFocusContainerChildren:function(){davinci.Workbench.focusContainer&&(davinci.Workbench.focusContainer.innerHTML=
"")}}));dojo.setObject("davinci.Workbench",c);return c})},"davinci/ve/utils/GeomUtils":function(){define(["dojo/_base/window","dojo/dom-geometry","dojo/dom-style","dojo/has","dojo/_base/sniff"],function(p,m,h,e,b){var k=["TABLE","TBODY","TR","TD","TH"];return{getMarginBoxPageCoords:function(a){var f;p.withDoc(a.ownerDocument,function(){var b=this.getBorderBoxPageCoords(a),g=this.getMarginExtents(a);f={l:b.l-g.l,t:b.t-g.t,w:b.w+g.l+g.r,h:b.h+g.t+g.b}}.bind(this));return f},getMarginBoxPageCoordsCached:function(a){a._maqMarginBoxPageCoords||
(a._maqMarginBoxPageCoords=this.getMarginBoxPageCoords(a));return a._maqMarginBoxPageCoords},getBorderBoxPageCoords:function(a){var f;p.withDoc(a.ownerDocument,function(){if(k.indexOf(a.tagName)){var b=a.getBoundingClientRect(),g=this.getScrollLeft(a),d=this.getScrollTop(a);f={l:b.left+g,t:b.top+d,w:b.width,h:b.height}}else{for(var b=a.offsetLeft,g=a.offsetTop,d=a.parentNode,c=a.offsetParent;d&&"BODY"!=d.tagName;){"number"==typeof d.scrollLeft&&"number"==typeof d.scrollTop&&(b-=d.scrollLeft,g-=d.scrollTop);
if(d==c)var q=m.getBorderExtents(c),b=b+(c.offsetLeft+q.l),g=g+(c.offsetTop+q.t),c=c.offsetParent;d=d.parentNode}f={l:b,t:g,w:a.offsetWidth,h:a.offsetHeight}}}.bind(this));return f},getBorderBoxPageCoordsCached:function(a){a._maqBorderBoxPageCoords||(a._maqBorderBoxPageCoords=this.getBorderBoxPageCoords(a));return a._maqBorderBoxPageCoords},getScrollLeft:function(a){a=a&&a.ownerDocument;return e("mozilla")?(a=a&&a.defaultView)?a.pageXOffset:0:(a=a&&a.body)?a.scrollLeft:0},getScrollTop:function(a){a=
a&&a.ownerDocument;return e("mozilla")?(a=a&&a.defaultView)?a.pageYOffset:0:(a=a&&a.body)?a.scrollTop:0},getMarginExtents:function(a,f){var b=f||h.getComputedStyle(a),g,d,c;b?(g=parseFloat(b.marginLeft)||0,d=parseFloat(b.marginTop)||0,c=parseFloat(b.marginRight)||0,b=parseFloat(b.marginBottom)||0):g=d=c=b=0;return{l:g,t:d,r:c,b:b,w:g+c,h:d+b}},clearGeomCache:function(a){delete a._maqBorderBoxPageCoords;delete a._maqMarginBoxPageCoords}}})},"davinci/_WokbenchEditors":function(){define(["dcl/dcl","./Runtime",
"dojo/promise/all"],function(p,m,h){return p(null,{closeAllEditors:function(){var e=dijit.byId("editors_container");e&&e.getChildren().forEach(function(b){e.closeChild(b)})},getOpenEditor:function(e){return this.currentEditor?this.currentEditor:null!=e?(e=dijit.byId(filename2id(e.getPath())))?e.editor:null:(e=dijit.byId("editors_container"))&&e.selectedChildWidget&&e.selectedChildWidget.editor?e.selectedChildWidget.editor:null},closeActiveEditor:function(){var e=dijit.byId("editors_container"),b=
dijit.byId("davinci_file_tabs");if(e&&e.selectedChildWidget&&e.selectedChildWidget.editor){var k=selectedChildWidget.id.replace(/^editor/,"shadow");e.closeChild(e.selectedChildWidget);(e=dijit.byId(k))&&b.closeChild(e)}},getAllOpenEditorIds:function(){},_showEditorTopPanes:function(){this._hideShowEditorTopPanes("block")},_hideEditorTopPanes:function(){this._hideShowEditorTopPanes("none")},_hideShowEditorTopPanes:function(e){},_editorTabClosed:function(e){if(!davinci.Workbench._editorTabClosing[e.id]){davinci.Workbench._editorTabClosing[e.id]=
!0;if(e&&e.editor&&e.editor.fileName){var b=e.id.replace(/^editor/,"shadow"),k=dijit.byId("davinci_file_tabs"),a=dijit.byId(b),f=Workbench._state.editors.indexOf(e.editor.fileName);-1!=f&&Workbench._state.editors.splice(f,1);Workbench.saveState=!0;davinci.Workbench._shadowTabClosing[b]||(k.removeChild(a),a.destroyRecursive())}dijit.byId("editors_container").getChildren().length||(Workbench._switchEditor(null),this._expandCollapsePaletteContainers(null),b=dijit.byId("editorsStackContainer"),k=dijit.byId("editorsWelcomePage"),
b&&k&&b.selectChild(k),this._hideEditorTopPanes());delete davinci.Workbench._editorTabClosing[e.id]}},openEditor:function(e,b){try{var k=e.fileName,a;"string"==typeof k?a=k.substr(k.lastIndexOf(".")+1):(a=k.getExtension(),k=k.getPath());var f=dijit.byId(filename2id(k)),n=dijit.byId("editors_container");if(f){n.selectChild(f);var g=f.editor;e.startOffset&&g.select(e)}else{var d=e.editorCreateCallback,c=m.getExtensions("davinci.editor",function(c){"string"==typeof c.extensions&&(c.extensions=c.extensions.split(","));
return dojo.some(c.extensions,function(c){return c.toLowerCase()==a.toLowerCase()})}),q=c[0];1<c.length&&dojo.some(c,function(c){q=c;return c.isDefault});Workbench._createEditor(q,k,e,b).then(function(c){d&&d.call(window,c);e.noSelect||(m.currentEditor=c)},function(c){console.error("Error opening editor for filename: "+k,c)})}}catch(w){console.error("Exception opening editor for filename: "+e&&e.fileName),console.error(w)}},_switchEditor:function(e,b){var k=m.currentEditor;m.currentEditor=e;var a=
davinci.Workbench;a._state&&(a._state.activeEditor=e?e.fileName:null);this._removeFocusContainerChildren();this._showEditorTopPanes();try{dojo.publish("/davinci/ui/editorSelected",[{editor:e,oldEditor:k}])}catch(f){console.error(f)}a._updateTitle(e);setTimeout(function(){e&&e.visualEditor&&e.visualEditor.context&&e.visualEditor.context.isActive()&&e.visualEditor.context.getTopWidgets().forEach(function(a){a.resize&&a.resize()});this._repositionFocusContainer()}.bind(this),1E3);h(this._showViewPromises).then(function(){e&&
e.focus&&e.focus();this._rearrangePalettes(e);this._expandCollapsePaletteContainers(e)}.bind(this));b||(a.saveState=!0)}})})},"davinci/_WokbenchMisc":function(){define("dcl/dcl require ./Runtime ./ui/Dialog davinci/lang/webContent ./ve/metadata dojo/_base/connect xide/manager/ServerActionBase".split(" "),function(p,m,h,e,b,k,a,f){var n=function(a,c){if(401==c.status||403==c.status)g();else if(!0===a.canceled){var f=a.ioArgs.url;(new RegExp("(^|\\.\\/|"+document.baseURI+"\\/)cmd\\/")).test(f)&&(0<=
f.indexOf("getBluePageInfo")||h.handleError(c.message))}},g=function(){var a=new e({title:b.sessionTimedOut}),c=dojo.string.substitute(b.sessionTimedOutMsg,{hrefLoc:"welcome"});a.set("content",c);dojo.connect(a,"onCancel",null,function(){window.location.href="welcome"});setTimeout(function(){window.location.href="welcome"},1E4);a.show()};return p(null,{run:function(){var d=davinci.Workbench;console.error("run ");h.run();d._initKeys();d._baseTitle=dojo.doc.title;try{d.initService()}catch(c){debugger}window.maqetta&&
maqetta.TopBanner&&maqetta.TopBanner.setup&&maqetta.TopBanner.setup();h.subscribe("/davinci/resource/resourceChanged",function(c,a){if("deleted"==c){var d;d=a.getPath();d="editor-"+encodeURIComponent(d.replace(/[\/| |\t]/g,"_")).replace(/%/g,":");var g=editorIdToShadowId(d);d=dijit.byId(d);g=dijit.byId(g);if(d&&!d._isClosing){var f=dijit.byId("editors_container"),b=dijit.byId("davinci_file_tabs");f.removeChild(d);d.destroyRecursive();b.removeChild(g);g.destroyRecursive()}}});h.subscribe("/dojo/io/error",
n);h.subscribe("/davinci/states/state/changed",function(c){var a=h.currentEditor;"davinci.ve.themeEditor.ThemeEditor"!=a.declaredClass&&"davinci.review.editor.ReviewEditor"!=a.declaredClass&&a.visualEditor.onContentChange.apply(a.visualEditor,arguments)});h.subscribe("/davinci/ui/widgetPropertiesChanges",function(){var c=h.currentEditor.visualEditor;c._objectPropertiesChange.apply(c,arguments)});a.subscribe("/davinci/states/state/changed",function(c){var a=h.currentEditor&&"davinci.ve.PageEditor"==
h.currentEditor.declaredClass&&h.currentEditor.visualEditor&&h.currentEditor.visualEditor.context;if(a){var d,g,a=a?a.getDijit():null,f=m("davinci/ve/widget");c.newState&&!c.newState.indexOf("_show:")&&(d=a.byId(c.newState.substring(6)),d=f.getWidget(d.domNode),(g=d.getHelper())&&g.popup&&g.popup(d));c.oldState&&!c.oldState.indexOf("_show:")&&(d=a.byId(c.oldState.substring(6)),d=f.getWidget(d.domNode),(g=d.getHelper())&&g.tearDown&&g.tearDown(d))}});a.subscribe("/davinci/ui/repositionFocusContainer",
function(c){d._repositionFocusContainer()});var g=this.service.serviceObject[this.serviceClass].getInfo().then(function(c){h._initializationInfo=c;c=c.userInfo;h.isLocalInstall="maqettaUser"==c.userId;h.userName=c.userId;h.userEmail=c.email;return k.init()}).then(function(){var c=h.initialPerspective||"davinci.ui.main";dojo.query(".loading").orphan();d.showPerspective(c);d._updateTitle();initializeWorkbenchState()}).otherwise(function(c){dojo.query("#load_screen").addContent(dojo.string.substitute(b.startupError,
[c.message]),"only")});d._lastAutoSave=Date.now();setInterval(dojo.hitch(this,"_autoSave"),3E4);return g},initService:function(){this.service||(this.service=new f({serviceClass:"XApp_XIDE_Workbench_Service",serviceUrl:"./xcf/xui.php?debug\x3dtrue\x26view\x3drpc",singleton:!1}),this.service.init())},findView:function(a){if(a=dijit.byId(a))return a},location:function(){return h.location()},logoff:function(a){},unload:function(){davinci.Workbench._autoSave()},singleProjectMode:function(){return!0},getProject:function(){var a=
davinci.Workbench;return a.getActiveProject()||a._DEFAULT_PROJECT},loadProject:function(a){var c=davinci.Workbench;c.setActiveProject(a);return c.updateWorkbenchState().then(function(){location.href="cmd/configProject?configOnly\x3dtrue\x26project\x3d"+encodeURIComponent(a)})},getActiveProject:function(){return"project1"},setActiveProject:function(a){var c=davinci.Workbench;c._state||(c._state={});c._state.project=a;c.saveState=!0},setActionScope:function(a,c){davinci.Workbench.actionScope[a]=c},
clearWorkbenchState:function(){var a=davinci.Workbench;a._state={};return a.updateWorkbenchState()},updateWorkbenchState:function(){delete davinci.Workbench.saveState;return null},getDefaultMount:function(){},workbenchStateCustomPropGet:function(a){var c=davinci.Workbench;if("string"==typeof a)return c._state[a]},workbenchStateCustomPropSet:function(a,c){var g=davinci.Workbench;"string"==typeof a&&("undefined"==typeof c?delete g._state[a]:g._state[a]=c,g.saveState=!0)},_autoSave:function(){var a=
davinci.Workbench,c=!1;if(this.currentEditor){var g=this.currentEditor;if(g.isReadOnly)console.error("workbench : autosave failed : isReadyOnly or is not dirty");else try{g.save(!0)}catch(f){console.error("Error while autosaving file:"+f),c=!0}}c||(a._lastAutoSave=Date.now())},_updateTitle:function(a){var c=davinci.Workbench._baseTitle||"";a&&(c+="",a.isDirty&&(c+="*"),c+=a.item.name);dojo.doc.title=c},_initActionsKeys:function(a,c){var g=davinci.Workbench,f=c.keysDomNode||c.domNode,b={},k;dojo.forEach(a,
function(c){dojo.forEach(c.actions,function(c){c.keySequence&&(b[c.keySequence]=c,k=!0)})});if(k){var n=c.context;dojo.connect(f,"onkeydown",function(c){c=g._keySequence(c);c=b[c];!c||c.action.shouldShow&&!c.action.shouldShow(n)||c.action.isEnabled(n)&&g._runAction(c,n)})}},_initKeys:function(){var a=davinci.Workbench,c={all:[]},g=h.getExtensions("davinci.keyBindings");dojo.forEach(g,function(a){var d=a.contextID||"all",g=c[d];g||(g=c[d]=[]);g[a.sequence]=a.commandID});a.keyBindings=c},handleKey:function(a){var c=
davinci.Workbench;if(c.keyBindings){a=c._keySequence(a);var g;c.currentContext&&c.keyBindings[c.currentContext]&&(g=c.keyBindings[c.currentContext][a]);g||(g=c.keyBindings.all[a]);if(g)return h.executeCommand(g),!0}},_keySequence:function(a){var c=[];window.event?(window.event.ctrlKey&&c.push("M1"),window.event.shiftKey&&c.push("M2"),window.event.altKey&&c.push("M3")):((a.ctrlKey||2==a.modifiers||3==a.modifiers||5<a.modifiers)&&c.push("M1"),(a.shiftKey||3<a.modifiers)&&c.push("M2"),a.modifiers?(a.altKey||
a.modifiers%2)&&c.push("M3"):a.altKey&&c.push("M3"));var g=String.fromCharCode(a.keyCode);/[A-Z0-9]/.test(g)||(g={46:"del",114:"f3"}[a.keyCode]||"xxxxxxxxxx");g=g.toUpperCase();" "==g&&(g="' '");c.push(g);return c.join("+")},setupGlobalKeyboardHandler:function(){var a=h.getExtensions("davinci.actionSets");dojo.forEach(a,function(c){"davinci.ui.main"!=c.id&&"davinci.ui.editorActions"!=c.id||dojo.forEach(c.actions,function(c){c.keyBinding&&h.registerKeyBinding(c.keyBinding,c)})})}})})},"davinci/_Workbench_Menu":function(){define("dcl/dcl dojo/_base/declare ./Runtime dijit/Menu dijit/MenuBar dijit/MenuItem dijit/MenuSeparator dijit/PopupMenuBarItem dijit/form/DropDownButton davinci/_WokbenchEditors davinci/_WokbenchMisc".split(" "),
function(p,m,h,e,b,k,a,f,n){var g=m(e,{menuOpened:function(a){},_openMyself:function(a){this.menuOpened(a);var c;try{var g=document.getElementById("menuOverlayDiv");g||(g=dojo.create("div",{id:"menuOverlayDiv",style:"left:0px; top:0px; width:100%; height:100%; position:absolute; z-index:10;"},document.body));if(this.adjustPosition){var f=this.adjustPosition(a);c=dijit.popup.open;dijit.popup.open=function(a){a.x+=f.x;a.y+=f.y;c.call(dijit.popup,a)}}this.onClose=function(){var c=document.getElementById("menuOverlayDiv");
c&&c.parentNode.removeChild(c)}.bind(this);this.inherited(arguments)}finally{c&&(dijit.popup.open=c)}}});return p(null,{declaredClass:"davinci.Workbench_Menu",updateMenubar:function(a,c){console.error("updateMenubar")},_updateMainMenubar:function(a,c){console.error("_updateMainMenubar")},_addItemsToMenubar:function(a,c){console.error("_addItemsToMenubar")},_createMenu:function(a,c){var f,b,k;a.menus?(f=new e({parentMenu:a}),b=a.menus,k="onOpen"):(f=new g({}),b=a,k="menuOpened");f.domNode.style.display=
"none";f.actionContext=c;this._rebuildMenu(f,b);dojo.connect(f,k,this,function(c){f._widgetCallback&&f._widgetCallback(c);this._rebuildMenu(f,b).focus()});return f},_rebuildMenu:function(d,c){dojo.forEach(d.getChildren(),function(c){d.removeChild(c);c.destroy()});d.focusedChild=null;var g,f;c.forEach(function(c,b){c.menus.length&&(c.isSeparator&&0<b&&(g=!0),c.menus.forEach(function(c){g&&f&&(d.addChild(new a({})),g=!1);f=!0;var b=c.label;c.action&&c.action.getName&&(b=c.action.getName());if(c.separator)c=
davinci.Workbench._createMenu(c),c=new k({label:b,popup:c,id:c.id+"item"}),c.actionContext=d.actionContext,d.addChild(c);else{var n=!0;c.isEnabled&&(n=h.getSelection(),n=(n=n[0]&&n[0].resource)?c.isEnabled(n):!1);if(c.action){if(c.action.shouldShow&&!c.action.shouldShow(d.actionContext,{menu:d}))return;n=c.action.isEnabled&&c.action.isEnabled(d.actionContext)}b={label:b,id:c.id,disabled:!n,onClick:dojo.hitch(this,"_runAction",c,d.actionContext)};c.iconClass&&(b.iconClass=c.iconClass);d.addChild(new k(b))}},
this))},this);return d},_createMenuTree:function(a,c){function g(c,a,d){a=(a||"additions").split("/");var b=f;davinci.Workbench._loadActionClass(c);var k=a[a.length-1];if(1<a.length)for(var q=0,n=a.length-1;q<n;q++){var e;a:{e=0;for(var h=b.length;e<h;e++)for(var r=0,A=b[e].menus.length;r<A;r++)if(a[q]==b[e].menus[r].id){e=b[e].menus[r].menus;break a}e=void 0}e&&(b=e)}q=0;for(n=b.length;q<n;q++)if(b[q].id==k){a=b[q].menus;a.push(c);if(c.separator){d=!1;a=c.menus=[];for(b=0;b<c.separator.length;b+=
2)k=c.separator[b],d="additions"==k,a.push({id:k,isSeparator:c.separator[b+1],menus:[]});d||a.push({id:"additions",isSeparator:!1,menus:[]})}return}d&&f.push({id:k,isSeparator:!1,menus:[c]})}a||(a=h.getExtensions("davinci.actionSets",function(c){return 0==h.getExtensions("davinci.actionSetPartAssociations",function(a){return a.targetID==c.id}).length}));for(var f=[],b=0,k=a.length;b<k;b++){var n=a[b];if(n.visible&&n.menu)for(var e=0,v=n.menu.length;e<v;e++){var x=n.menu[e];if(x.__mainMenu)for(var u=
0;u<x.separator.length;u+=2)f.push({id:x.separator[u],isSeparator:x.separator[u+1],menus:[]});else if(g(x,x.path,c),x.populate instanceof Function){var x=x.populate(),z;for(z in x)g(x[z],x[z].menubarPath)}}}b=0;for(k=a.length;b<k;b++)if(n=a[b],n.visible)for(e=0,v=n.actions.length;e<v;e++)z=n.actions[e],z.menubarPath&&g(z,z.menubarPath,c);return f}})})},"davinci/_Workbench_Palette":function(){define(["dcl/dcl","davinci/Runtime"],function(p,m){var h={};return p(null,{declaredClass:"davinci.Workbench_Menu",
_rearrangePalettes:function(e){var b,k,a;e?((k=m.getExtensions("davinci.editor",function(a){return e?a.id===e.editorID:!1}))&&0<k.length&&(b=k[0].palettePerspective),k=e._rightPaletteExpanded,a=e._leftPaletteExpanded):b=m.initialPerspective||"davinci.ui.main";b&&((b=m.getExtension("davinci.perspective",b))||console.error("---error"),dojo.forEach(b.views,function(a){var b=a.viewID,g=a.position;0>g.indexOf("bottom")&&(g+="-top");if(b=dijit.byId(b)){var d=b.getParent(),g=mainBody.tabs.perspective[g];
d!=g&&(d&&d.removeChild(b),a.hidden||(g.addChild(b),d=g));d&&(a.hidden?d.removeChild(b):a.selected&&(d._maqDontExpandCollapse=!0,d.selectChild(b),delete d._maqDontExpandCollapse))}}));e&&(e.hasOwnProperty("_rightPaletteExpanded")&&(e._rightPaletteExpanded=k),e.hasOwnProperty("_leftPaletteExpanded")&&(e._leftPaletteExpanded=a))},_nearlyCollapsed:function(e){e=dojo.style(e,"width");"string"==typeof e&&(e=parseInt(e));return 91>e},_expandCollapsePaletteContainer:function(e){if(e&&e.domNode&&(e=davinci.Workbench.findPaletteContainerNode(e.domNode),
e.id)){var b=e._maqExpanded,k;this._nearlyCollapsed(e)&&(b=!1,k=91<=h[e.id].expandToSize?h[e.id].expandToSize:h[e.id].initialExpandToSize);b?this.collapsePaletteContainer(e):this.expandPaletteContainer(e,{expandToSize:k})}},_expandCollapsePaletteContainers:function(e,b){var k=dijit.byId("left_mainBody"),a=dijit.byId("right_mainBody");if(e){var f=m.getExtensions("davinci.editor",function(a){return a.id===e.editorID});if(f&&0<f.length){var f=f[0].expandPalettes,n;k&&((n=e&&e.hasOwnProperty("_leftPaletteExpanded")?
e._leftPaletteExpanded:f&&0<=f.indexOf("left"))?this.expandPaletteContainer(k.domNode,b):this.collapsePaletteContainer(k.domNode,b));a&&((n=e&&e.hasOwnProperty("_rightPaletteExpanded")?e._rightPaletteExpanded:f&&0<=f.indexOf("right"))?this.expandPaletteContainer(a.domNode,b):this.collapsePaletteContainer(a.domNode,b))}}else k&&this.collapsePaletteContainer(k.domNode,b),a&&this.collapsePaletteContainer(a.domNode,b)},findPaletteContainerNode:function(e){for(var b;e&&"BODY"!=e.tagName;){if(dojo.hasClass(e,
"davinciPaletteContainer")){b=e;break}e=e.parentNode}return b},collapsePaletteContainer:function(e,b){var k=davinci.Workbench.findPaletteContainerNode(e);if(k&&k.id){var a=k.id,f=dojo.style(k,"width"),n=dijit.byNode(k),g=dojo.query("[role\x3dtablist]",k);if(n&&0<g.length){var g=dojo.marginBox(g[0]),d=n.getParent();d&&d.resize&&g&&g.w&&(this._nearlyCollapsed(k)||b&&b.dontPreserveWidth||(h[a].expandToSize=f),k.style.width=g.w+"px",d.resize(),n._isCollapsed=!0)}dojo.removeClass(k,"maqPaletteExpanded");
k._maqExpanded=!1;davinci.Workbench._repositionFocusContainer();if(a=m.currentEditor)"left_mainBody"==k.id?a._leftPaletteExpanded=!1:"right_mainBody"==k.id&&(a._rightPaletteExpanded=!1)}},expandPaletteContainer:function(e,b){var k=b&&b.expandToSize,a=davinci.Workbench.findPaletteContainerNode(e);if(a&&a.id){var f=a.id,n=dijit.byNode(a);k&&(h[f].expandToSize=k);n&&h[f].expandToSize&&(k=n.getParent())&&k.resize&&(a.style.width=h[f].expandToSize+"px",k.resize(),delete n._isCollapsed);dojo.addClass(a,
"maqPaletteExpanded");a._maqExpanded=!0;davinci.Workbench._repositionFocusContainer();if(f=m.currentEditor)"left_mainBody"==a.id?f._leftPaletteExpanded=!0:"right_mainBody"==a.id&&(f._rightPaletteExpanded=!0)}}})})},"davinci/ui/widgets/OutlineTree":function(){define(["dojo/_base/declare"],function(p){return p(null,{})})},"davinci/davinci_":function(){define("dijit/dijit ./Workbench ./ve/palette/HtmlWidgets ./ve/views/StatesView ./ve/views/SwitchingStyleView ./actions/UndoAction ./actions/SelectThemeAction ./actions/SelectLayoutAction ./actions/RedoAction ./actions/DownloadAction ./actions/StickyNoteAction ./actions/SaveAsWidget ./actions/UserNameAction ./actions/LogoutAction ./ve/actions/CopyAction ./ve/actions/CutAction ./ve/actions/DeleteAction ./ve/actions/PasteAction ./ve/actions/DuplicateAction ./ve/actions/EditValueAction ./ve/actions/EditPropertiesAction ./ve/actions/SurroundAction ./ve/actions/SelectParentAction ./ve/actions/SelectAncestorAction ./ve/actions/UnselectAllAction ./ve/actions/ArrangeAction ./ve/actions/MoveToFrontAction ./ve/actions/MoveToBackAction ./ve/actions/MoveForwardAction ./ve/actions/MoveBackwardAction ./ve/actions/OtherAction ./ve/actions/EnableApplicationStates ./ve/actions/ViewDesignAction ./ve/actions/ViewSourceAction ./ve/actions/ViewSourceMenuAction ./ve/actions/ViewSplitHMenuAction ./ve/actions/ViewSplitVMenuAction ./ve/actions/AddState ./ve/actions/RemoveState ./ve/actions/ModifyState ./ve/actions/ManageStates ./ve/actions/NewWidgetsCurrentState ./ve/actions/HighlightBaseWidgets ./ve/actions/ShowInOutline ./ve/PageEditor ./html/ui/HTMLEditor ./html/ui/ImageViewer ./ve/prefs/HTMLEditPreferences dijit/layout/LayoutContainer ./commands/OrderedCompoundCommand ./version".split(" "),
function(){})},"davinci/ve/palette/HtmlWidgets":function(){define(["dojo/_base/declare","davinci/workbench/ViewPart","davinci/ve/palette/Palette"],function(p,m,h){return p("davinci.ve.palette.HtmlWidgets",m,{constructor:function(e,b){dojo.subscribe("/davinci/ui/editorSelected",dojo.hitch(this,this._editorSelected))},_editorSelected:function(e){e.editor&&e.editor.supports("palette")?(this.setContext([e.editor.getContext()]),dojo.removeClass(this.palette.domNode,"dijitHidden")):(this.palette.domNode.scrollTop=
0,dojo.addClass(this.palette.domNode,"dijitHidden"))},postCreate:function(){this.inherited(arguments);this.attachToolbar();this.palette=new h({toolbarDiv:this.toolbarDiv});this.palette.descriptors="dijit,dojox,html,OpenAjax";this.setContent(this.palette);this.palette._loadPalette();dojo.addClass(this.palette.domNode,"dijitHidden")},setContext:function(e){this.palette.setContext(e[0])}})})},"davinci/workbench/ViewPart":function(){define(["dojo/_base/declare","./_ToolbaredContainer","../ve/States",
"../Runtime"],function(p,m,h,e){return p("davinci.workbench.ViewPart",m,{constructor:function(b,k){this.viewExt=b.view;this.subscriptions=[];this.publishing={}},startup:function(){this.inherited(arguments);this.domNode.view=this;this.viewExt.startup&&this.viewExt.startup()},subscribe:function(b,k){this.subscriptions.push(dojo.subscribe(b,this,k))},publish:function(b,k){this.publishing[b]=!0;try{dojo.publish(b,k)}catch(a){console.error(a)}delete this.publishing[b]},destroy:function(){dojo.forEach(this.subscriptions,
dojo.unsubscribe);delete this.subscriptions},_getViewActions:function(){var b=this.toolbarID||this.viewExt.id,k=[];e.getExtensions("davinci.viewActions",function(a){if(b==a.viewContribution.targetID)return k.push(a.viewContribution),!0});return k}})})},"davinci/workbench/_ToolbaredContainer":function(){define(["dojo/_base/declare","dijit/layout/_LayoutWidget","dijit/_Templated"],function(p,m,h){return p("davinci.workbench._ToolbaredContainer",[m,h],{templateString:"\x3cdiv\x3e\x3cdiv dojoAttachPoint\x3d'titleBarDiv' class\x3d'palette_titleBarDiv'\x3e\x3c/div\x3e\x3cdiv dojoAttachPoint\x3d'toolbarDiv' class\x3d'toolbaredContainer_toolbarDiv'\x3e\x3c/div\x3e\x3cdiv dojoAttachPoint\x3d'containerNode'\x3e\x3c/div\x3e\x3c/div\x3e",
gutters:!1,_toolbarCreated:{},layout:function(){var e=[{domNode:this.titleBarDiv,layoutAlign:"top"},{domNode:this.toolbarDiv,layoutAlign:"top"},{domNode:this.containerNode,layoutAlign:"client"}];dijit.layout.layoutChildren(this.domNode,this._contentBox,e);this._containerContentBox=dijit.layout.marginBox2contentBox(this.containerNode,e[2]);var b=dijit.byNode(this.containerNode);b&&b.resize&&b.resize(this._containerContentBox);dojo.marginBox(this.containerNode,e[2])},setContent:function(e){this.mainWidget=
e;e=e.domNode||e;dojo.place(e,this.containerNode,"replace");this.containerNode=e;this.toolbarCreated(this.declaredClass)||this._createToolbar(this.declaredClass);this.titleBarDiv.innerHTML='\x3cspan class\x3d"paletteCloseBox"\x3e\x3c/span\x3e\x3cspan class\x3d"titleBarDivTitle"\x3e'+this.title+"\x3c/span\x3e";e=dojo.query(".paletteCloseBox",this.titleBarDiv);0<e.length&&dojo.connect(e[0],"click",this,function(b){davinci.Workbench.collapsePaletteContainer(b.currentTarget)});this._started&&this.layout()},
removeContent:function(){var e=dojo.doc.createElement("div");dojo.place(e,this.containerNode,"replace");this.containerNode=e;this.mainWidget&&this.mainWidget.destroy();delete this.mainWidget},_getViewActions:function(){},getTopAdditions:function(){},_createToolbar:function(e){var b=require("davinci/Workbench"),k=this.getToolbarDiv(),a=this.getTopAdditions();a&&k.appendChild(a);this.toolbarMenuActionSets&&(a="m"+Date.now(),k=dojo.create("span",{id:a+"_menucontainer","class":"paletteDropdown"},k),k=
dojo.create("span",{id:a+"_menu"},k),b.updateMenubar(k,this.toolbarMenuActionSets));(k=this._getViewActions())&&k.length&&(a=dojo.create("div",{"class":"toolbaredContainer_toolbarDiv"}),a=dojo.create("span",{style:{display:"inline-block"}},a),b=b._createToolBar("toolbarPath",a,k,this._getViewContext()),dojo.style(b.domNode,{display:"inline-block","float":"left"}),this.toolbarCreated(e,b))},_getViewContext:function(){return this},getToolbarDiv:function(){return this.toolbarDiv},toolbarCreated:function(e,
b){1<arguments.length&&(this._toolbarCreated[e]=b);return this._toolbarCreated[e]},attachToolbar:function(){var e=this.toolbarCreated(this.declaredClass),b=this.getToolbarDiv();e&&e.domNode&&b&&(b.innerHTML="",b.appendChild(e.domNode))}})})},"davinci/ve/States":function(){"undefined"===typeof davinci&&(davinci={});davinci.AppStatesDontInitialize=!0;define("dojo/_base/declare dojo/_base/connect dojo/query dojo/dom-class dojo/dom-style dojo/_base/window dijit/registry davinci/Runtime davinci/Workbench davinci/maqetta/AppStates ./utils/GeomUtils ./commands/EventCommand ./commands/StyleCommand davinci/ve/utils/StyleArray davinci/workbench/Preferences davinci/lang/ve".split(" "),
function(p,m,h,e,b,k,a,f,n,g,d,c,q,w,r,B){var y=document;p=p(g,{_update:function(c,a){f.currentEditor&&"davinci.ve.PageEditor"==f.currentEditor.declaredClass&&c&&c._dvWidget&&(c._maqAppStates||!c._maqDeltas)&&this._refresh(c._dvWidget)},_refresh:function(c){var a=c.getParent();a.dijitWidget?this._refresh(a):c&&c.resize&&c.resize()},_updateEvents:function(a,d,g){if(a&&a._dvWidget){a=a._dvWidget;var f=["onclick","onmouseover","onmouseout","onfocus","onblur"],b,k;for(k in f){var q=f[k],n=a&&a.properties&&
a.properties[q];if("string"==typeof n&&0<=n.indexOf("davinci.states.setState")){var e=n,n=n.replace("'"+d+"'","'"+g+"'");n!==e&&(b=b||{},b[q]=n)}}if(d=this.getContext())b=new c(a,b),d.getCommandStack().execute(b)}},normalize:function(c,a,d,g){switch(c){case "style":var f=this.getStatesListCurrent(a);for(c=0;c<f.length;c++)f[c]="Normal";if(a=this.getStyle(a,f,d))for(c=0;c<a.length;c++)a[c][d]&&(g=a[c][d])}return g},normalizeArray:function(c,a,d,g){g=dojo.clone(g);switch(c){case "style":var f=this.getStatesListCurrent(a);
for(c=0;c<f.length;c++)f[c]="Normal";if(a=this.getStyle(a,f,d)){for(c=0;c<a.length;c++){d=a[c];for(var b in d)for(d=g.length-1;0<=d;d--){var f=g[d],k;for(k in f)if(k==b){g.splice(d,1);break}}}g=g.concat(a)}}return g},getEditor:function(){return f.currentEditor},getContext:function(){var c=this.getEditor();return c&&(c.getContext&&c.getContext()||c.context)},getDocument:function(){var c=this.getContext();return c&&c.getDocument&&c.getDocument()},resetState:function(c){if(c){var a=this.getStateContainersForNode(c);
c=this.getFocus(c.ownerDocument.body);for(var d=0;d<a.length;d++){var g=a[d],f=this.getState(g);this.setState(f,g,{focus:c&&g==c.stateContainerNode&&f==c.state,updateWhenCurrent:!0,silent:!1})}}},_updateSrcState:function(c,a){var d=c&&c._dvWidget;if(d){var g=d._srcElement.getAttribute(davinci.states.APPSTATES_ATTRIBUTE),f=d._srcElement.getAttribute(davinci.states.DELTAS_ATTRIBUTE);if(d&&d._srcElement){var b=this.serialize(c);b.maqAppStates&&b.maqAppStates.trim();b.maqAppStates?d._srcElement.addAttribute(davinci.states.APPSTATES_ATTRIBUTE,
b.maqAppStates):d._srcElement.removeAttribute(davinci.states.APPSTATES_ATTRIBUTE);b.maqDeltas&&b.maqDeltas.trim();b.maqDeltas?d._srcElement.addAttribute(davinci.states.DELTAS_ATTRIBUTE,b.maqDeltas):d._srcElement.removeAttribute(davinci.states.DELTAS_ATTRIBUTE);b=d._srcElement.getAttribute(davinci.states.APPSTATES_ATTRIBUTE);d=d._srcElement.getAttribute(davinci.states.DELTAS_ATTRIBUTE);(g!==b||f!==d)&&(g=this.getEditor())&&g._visualChanged&&g._visualChanged(a)}}},_removeStateFromNodeRecursive:function(c,
a){var d=c._dvWidget;if(c&&d&&a){this._removeStateFromNode(c,a);for(var d=d.getChildren(),g=0;g<d.length;g++)this._removeStateFromNodeRecursive(d[g].domNode,a)}},_removeStateFromNode:function(c,a){if(c&&c._maqDeltas&&c._maqDeltas[a]){delete c._maqDeltas[a];var d=!1,g;for(g in c._maqDeltas)if("undefined"!==g){d=!0;break}d||delete c._maqDeltas;this._updateSrcState(c)}},removeUnusedStates:function(c){if(c){c=c.getAllWidgets();for(var a=0;a<c.length;a++){var d=c[a].domNode;if("BODY"!==d.tagName&&d&&d._maqDeltas){var g=
this.getAllStatesForNode(d),f;for(f in d._maqDeltas)"undefined"!==f&&0>g.indexOf(f)&&this._removeStateFromNode(d,f)}}}},_getStateIndex:function(c){return c&&"Normal"!=c&&"undefined"!=c?c:"undefined"},getCurrentStateIndex:function(){return this._getStateIndex(this.getState())},getApplyToStateIndex:function(c){var a=this.getState();return this._getStateIndex("current"===c&&a&&"Normal"!=a&&"undefined"!=a?a:void 0)},getEffectiveDisplayValue:function(c,a,d,g){c=a?a.domNode:null;a="none";var f=d||"undefined";
if(g&&"string"==typeof g[f]&&"$MAQ_DELETE_PROPERTY$"!=g[f])a=g[f];else if(c){var k=!1;if(c._maqDeltas&&(!g||"$MAQ_DELETE_PROPERTY$"!=g[f])){var q=c._maqDeltas[d]&&c._maqDeltas[d].style;if(q)for(d=0;d<q.length;d++){var n=q[d],e;for(e in n)"display"==e&&(a=n[e],k=!0)}}if(!k){if(g&&"string"==typeof g.undefined)a=g.undefined;else{g=c._maqDeltas&&c._maqDeltas.undefined&&c._maqDeltas.undefined.style;f=!1;if(g)for(d=0;d<g.length;d++)for(e in n=g[d],n)"display"==e&&(a=n[e],f=!0);f||(a=b.get(c,"display"))}f=
"undefined"}if(0==c.offsetLeft&&0==c.offsetTop&&0==c.offsetWidth&&0==c.offsetHeight)a="none";else for(;c&&"BODY"!=c.tagName.toUpperCase();){if(c&&c.ownerDocument&&c.ownerDocument.defaultView&&"none"==b.get(c,"display")){a="none";break}c=c.parentNode}}else a="none";return{effectiveDisplayValue:a,effectiveState:f}},propertyDefinedForAnyCurrentState:function(c,a){var d,g=c._maqDeltas;if(g){var f=this.getStateContainersForNode(c),b=f.length-1;a:for(;0<=b;b--){var k=this.getState(f[b]),q=k&&k!=this.NORMAL?
k:"undefined";if(q=g[q]&&g[q].style)for(var n=0;n<q.length;n++)for(var e=q[n],h=0;h<a.length;h++)if(e.hasOwnProperty(a[h])){d=k;break a}}}return d},_customStateActive:function(c){return c?this.getState(c.rootNode):!1},updateStateIcons:function(c){c&&c.editor&&c.editor==f.currentEditor&&"davinci.ve.PageEditor"==c.editor.declaredClass&&k.withDoc(y,function(){var d=h(".manageStatesButton")[0],g=a.byNode(d),d=h(".manageStatesIcon")[0];g&&d&&(this.manageStatesActive(c)?(e.remove(d,"manageStatesIconDisabled"),
g.set("disabled",!1)):(e.add(d,"manageStatesIconDisabled"),g.set("disabled",!0)));var g=r.getPreferences("davinci.ve.editorPrefs",davinci.Workbench.getProject()).newWidgetsCurrentState,d=h(".newWidgetsCurrentStateButton")[0],f=a.byNode(d),d=h(".newWidgetsCurrentStateIcon")[0];f&&d&&(this.newWidgetsCurrentStateActive(c)?e.remove(d,"newWidgetsCurrentStateIconDisabled"):e.add(d,"newWidgetsCurrentStateIconDisabled"),g?(e.remove(d,"newWidgetsCurrentStateIconOff"),e.add(d,"newWidgetsCurrentStateIconOn"),
f.set("title",B.NewWidgetsCurrentStateTitleCurrentState)):(e.remove(d,"newWidgetsCurrentStateIconOn"),e.add(d,"newWidgetsCurrentStateIconOff"),f.set("title",B.NewWidgetsCurrentStateTitleBackground)))}.bind(this))},manageStatesActive:function(c){return c&&c.getSelection().length},newWidgetsCurrentStateActive:function(c){return this._customStateActive(c)},highlightBaseWidgetsActive:function(c){return this._customStateActive(c)},updateHighlightsBaseStateWidgets:function(c){},initialize:function(){this.subscribed=
!0}});davinci.ve.states=new p;davinci.ve.states.initialize();return davinci.ve.states})},"davinci/maqetta/AppStates":function(){define("dojo/_base/connect dojo/dom-style dojo/dom dojo/_base/html dojo/_base/window dojo/_base/array dojo/parser require dojo/json dojo/_base/lang".split(" "),function(p,m,h,e,b,k,a,f,n,g){m=function(){};m.prototype={NORMAL:"Normal",DELTAS_ATTRIBUTE:"data-maq-deltas",DELTAS_ATTRIBUTE_P6:"dvStates",APPSTATES_ATTRIBUTE:"data-maq-appstates",APPSTATES_ATTRIBUTE_P6:"dvStates",
reImportant:/^(.*)(!\ *important)(.*)/,isStateContainer:function(c){return!(!c||!c._maqAppStates)},getStateContainersForNode:function(c){for(var a=[];c;){c._maqAppStates&&a.splice(0,0,c);if("BODY"==c.tagName)break;c=c.parentNode}return a},getAllStateContainers:function(c){function a(c){c._maqAppStates&&d.push(c);c=g._getChildrenOfNode(c);for(var f=0;f<c.length;f++)a(c[f])}var d=[],g=this;a(c);return d},getStatesArray:function(c,a,d,g){var f=[];if(c)for(c=c.parentNode;c;){if(c._maqAppStates)if(c==
g)f.splice(0,0,{node:c,oldState:a,newState:d});else{var b=c._maqAppStates.states?c._maqAppStates.states.current:void 0;f.splice(0,0,{node:c,oldState:b,newState:b})}if("BODY"==c.tagName)break;c=c.parentNode}return f},findStateContainer:function(c,a){if(c)for(var d=c.parentNode;d;){if(d._maqAppStates&&(!a||a==this.NORMAL||d._maqAppStates.states&&0<=d._maqAppStates.states.indexOf(a)))return d;if("BODY"==d.tagName)break;d=d.parentNode}},getAllStatesForNode:function(c){var a=[this.NORMAL];if(c)for(c=c.parentNode;c;){if(c._maqAppStates&&
c._maqAppStates.states)for(var d=c._maqAppStates.states?c._maqAppStates.states:[],g=0;g<d.length;g++)a.push(d[g]);if("BODY"==c.tagName)break;c=c.parentNode}return a},getStatesListCurrent:function(c){var a=[];if(c)for(c=c.parentNode;c;){c._maqAppStates&&a.splice(0,0,c._maqAppStates.current);if("BODY"==c.tagName)break;c=c.parentNode}return a},getAllCurrentStates:function(c){c=this.getAllStateContainers(c);for(var a=[],d=0;d<c.length;d++){var g=c[d],f=this.getState(g);a.push({stateContainerNode:g,state:f})}return a},
getStates:function(c){var a=c&&c._maqAppStates;c=["Normal"];if(a)for(var a=a.states?a.states:[],d=0;d<a.length;d++){var g=a[d];"Normal"!=g&&c.push(g)}return c},_getSCNodeFromElemOrEvent:function(c,a){var d;a&&a.tagName&&a.nodeName?d=a._maqAppStates?a:this.findStateContainer(a,c):a&&a.target&&a.currentTarget?(d=a.currentTarget,d._maqAppStates||(d=this.findStateContainer(d,c))):d=this.getContainer();return d},_updateSrcState:function(c){},hasState:function(c,a){return!!(c&&c._maqAppStates&&c._maqAppStates.states&&
0<=c._maqAppStates.states.indexOf(a))},getState:function(c){return c&&c._maqAppStates&&c._maqAppStates.current},setState:function(c,a,d){var g=d?d.updateWhenCurrent:!1,f=d?d.silent:!1,b=d?d.focus:!1;(a=this._getSCNodeFromElemOrEvent(c,a))&&a._maqAppStates&&(g||a._maqAppStates.current!=c)&&(g=a._maqAppStates.current,this.isNormalState(c)?(a._maqAppStates.hasOwnProperty("current")&&delete a._maqAppStates.current,c=void 0):a._maqAppStates.current=c,b&&this._setFocus(c,a),d&&d.hasOwnProperty("initial")&&
(d.initial?a._maqAppStates.initial=c:a._maqAppStates.initial&&delete a._maqAppStates.initial),f||p.publish("/maqetta/appstates/state/changed",[{node:a,newState:c,oldState:g,stateContainerNode:a}]),this._updateSrcState(a,!c))},getInitial:function(c){return c&&c._maqAppStates&&c._maqAppStates.initial},getFocus:function(c){if(!c)return null;c=this.getAllStateContainers(c);for(var a=0;a<c.length;a++){var d=c[a]._maqAppStates;if(d&&d.hasOwnProperty("focus"))return{stateContainerNode:c[a],state:d.focus}}return null},
_setFocus:function(c,a){if(a&&a._maqAppStates){var d=a.ownerDocument&&a.ownerDocument.body;if(d){var g=this.getFocus(d);if(!g||g.stateContainerNode!=a||g.state!=c){for(var g=this.getAllStateContainers(d),f=0;f<g.length;f++)(d=g[f]._maqAppStates)&&delete d.focus;a._maqAppStates.focus=c}}}},isNormalState:function(c){0==arguments.length&&(c=this.getState());return!c||c==this.NORMAL},_styleArrayMixin:function(c,a){if(a){for(var d=0;d<a.length;d++){var g=a[d],f;for(f in g)for(g=c.length-1;0<=g;g--)c[g].hasOwnProperty(f)&&
c.splice(g,1)}for(d=0;d<a.length;d++)c.push(a[d])}},getStyle:function(c,a,d){for(var g,f=[],b=0;b<a.length;b++)if(g=a[b],g=c&&c._maqDeltas&&c._maqDeltas[g]&&c._maqDeltas[g].style,this._styleArrayMixin(f,g),2<arguments.length&&f)for(g=f.length-1;0<=g;g--){var k=f[g],n;for(n in k)if(n!=d){f.splice(g,1);break}}return f},hasStyle:function(c,a,d){if(c&&d)if(c._maqDeltas&&c._maqDeltas[a]&&c._maqDeltas[a].style)for(c=c._maqDeltas[a].style,a=0;a<c[a];a++){if(c[a].hasProperty(d))return!0}else return!1},setStyle:function(c,
a,d,g){if(c&&d){c._maqDeltas=c._maqDeltas||{};c._maqDeltas[a]=c._maqDeltas[a]||{};c._maqDeltas[a].style=c._maqDeltas[a].style||[];var f=c._maqDeltas[a].style;if(d)for(var b=0;b<d.length;b++){var k=d[b],n;for(n in k)for(k=f.length-1;0<=k;k--){var e=f[k],h;for(h in e)if(n==h){f.splice(k,1);break}}}var z;if(d)for(k=0;k<d.length;k++)for(var m in d[k])b=d[k][m],"undefined"!=typeof b&&null!==b&&("undefined"==typeof z&&(z=[]),n={},n[m]=this._getFormattedValue(m,b),z.push(n));c._maqDeltas[a].style=f&&z?f.concat(z):
f?f:z?z:void 0;g||p.publish("/davinci/states/state/style/changed",[{node:c,state:a,style:d}]);this._updateSrcState(c)}},_convertStyleName:function(c){if(0<=c.indexOf("-")){var a=c.split("-");c=a[0];for(var d=1;d<a.length;d++){var g=a[d];c+=g.charAt(0).toUpperCase()+g.substring(1)}}return c},_DYNAMIC_PROPERTIES:{width:1,height:1,top:1,right:1,bottom:1,left:1},_getFormattedValue:function(c,a){if(c in this._DYNAMIC_PROPERTIES){if("string"!=typeof a)return a+"px";var d=f("dojo/_base/lang").trim(a);/^[-+]?[0-9]*\.?[0-9]+$/.test(d)&&
(a=d+"px")}return a},_getStatesListUsingPropName:function(c,a){var d=[];if(c)for(var g=0;g<c.length;g++)d.push(c[g][a]);return d},_resetAndCacheNormalStyle:function(c,a){if(c&&a)for(var d=0;d<a.length;d++){var f=this._getStatesListUsingPropName(a,"oldState"),b=this.getStyle(c,f),f=this._getStatesListUsingPropName(a),f=this.getStyle(c,f);if(b)for(var k=0;k<b.length;k++){var n=b[k],e;for(e in n)n=this._convertStyleName(e),c.style[n]=""}if(f)for(b=0;b<f.length;b++){var k=f[b],h;for(h in k){var n=this._convertStyleName(h),
u=c.style,z=this._getFormattedValue(h,k[h])+"",m=z?z.match(this.reImportant):null;m?(z=m[1]+m[3],z=g.trim(z),u.setProperty?u.setProperty(h,z,"important"):c.style[n]=z):c.style[n]=z}}}},_update:function(c,a){if(c&&c._maqDeltas){var d=this._getStatesListUsingPropName(a,"newState"),d=this.getStyle(c,d);this._resetAndCacheNormalStyle(c,a);if(d)for(var f=0;f<d.length;f++){var b=d[f],k;for(k in b){var n=this._convertStyleName(k),e=b[k]+"",h=e?e.match(this.reImportant):null;h?(e=h[1]+h[3],e=g.trim(e),b.setProperty?
b.setProperty(k,e,"important"):c.style[n]=e):c.style[n]=e}}}},isContainer:function(c){var a=!1;if(c){var d=this.getDocument();if(c===(d&&d.body)||"BODY"==c.tagName)a=!0}return a},getContainer:function(){return document.body},add:function(c,a,d){c&&!this.hasState(c,a)&&(d=d&&d.index,c._maqAppStates=c._maqAppStates||{},c._maqAppStates.states=c._maqAppStates.states||[],"number"==typeof d&&0<=d?c._maqAppStates.states.splice(d,0,a):c._maqAppStates.states.push(a),p.publish("/davinci/states/state/added",
[{node:c,state:a}]),this._updateSrcState(c))},remove:function(c,a){if(c&&c._maqAppStates&&c._maqAppStates.states&&this.hasState(c,a)){var d=c._maqAppStates.states.indexOf(a);if(!(0>d)){var g=this.getState(c),f=this.getFocus(c.ownerDocument.body);c._maqAppStates.states.splice(d,1);d={};f&&f.stateContainerNode==c&&f.state==a&&(d.focus=!0,d.updateWhenCurrent=!0);a==g&&this.setState(void 0,c,d);p.publish("/davinci/states/state/removed",[{node:c,state:a}]);this._updateSrcState(c)}}},rename:function(c,
a){if(!a)return!1;var d=a.oldName,g=a.newName;if(!(c&&c._maqAppStates&&c._maqAppStates.states&&c._maqAppStates.states.length))return!1;var f=c._maqAppStates.states;if(0>f.indexOf(d)||0<=f.indexOf(g))return!1;f.splice(f.indexOf(d),1,g);c._maqAppStates.focus===d&&(c._maqAppStates.focus=g);c._maqAppStates.current===d&&(c._maqAppStates.current=g);f=[c];this.getState(c);for(f=f.concat(this._getChildrenOfNode(c));f.length;){var b=f.shift();b._maqDeltas&&b._maqDeltas[d]&&(b._maqDeltas[g]=b._maqDeltas[d],
delete b._maqDeltas[d]);var f=f.concat(this._getChildrenOfNode(b)),k=this.getStatesArray(b,null,g,c);this._update(b,k);this._updateSrcState(b)}p.publish("/davinci/states/state/renamed",[{node:b,oldName:d,newName:g,stateContainerNode:b}]);return!0},_isEmpty:function(c){for(var a in c)if(c.hasOwnProperty(a))return!1;return!0},stringifyWithQuotes:function(c){str=n.stringify(c);str=str.replace(/(\\)?'/g,function(c,a){return a?c:"\\'"});return str=str.replace(/"/g,"'")},serialize:function(c){var a=this,
d=function(d){var g=null;c[d]&&(d=f("dojo/_base/lang").clone(c[d]),delete d.undefined,a._isEmpty(d)||(g=this.stringifyWithQuotes(d)));return g}.bind(this),g={};if(!c)return g;var b=d("_maqAppStates");"string"==typeof b&&(g.maqAppStates=b);d=d("_maqDeltas");"string"==typeof d&&(g.maqDeltas=d);return g},deserialize:function(c,a){"string"==typeof c&&(c=c.replace(/(\\)?'/g,function(c,a){return a?"'":'"'}),c=n.parse(c),this._migrate_m4_m5(c),c=this._migrate_m6_m7(c,a&&a.isBody));return c},_migrate_m4_m5:function(c){for(var a in c){var d=
c[a];if(d){var g=d.style;if(g&&!g.length){var f=[],b;for(b in g){var k={};k[b]=g[b];f.push(k)}d.style=f}}}},_migrate_m6_m7:function(c,a){if(!c||c.states)return c;if(a){var d=[],g;for(g in c)"current"!=g&&d.push(g);if(0<d.length)return{states:d}}else return delete c.current,c},store:function(c,a,d){if(c){this.clear(c);var g="BODY"==c.tagName;a&&(c._maqAppStates=this.deserialize(a,{isBody:g}));d&&(c._maqDeltas=this.deserialize(d,{isBody:g}));p.publish("/davinci/states/stored",[])}},retrieve:function(c){if(c){var a=
c.getAttribute(this.APPSTATES_ATTRIBUTE);a||"BODY"!==c.tagName||(a=c.getAttribute(this.APPSTATES_ATTRIBUTE_P6));var d=c.getAttribute(this.DELTAS_ATTRIBUTE);d||"BODY"===c.tagName||(d=c.getAttribute(this.DELTAS_ATTRIBUTE_P6));return{maqAppStates:a,maqDeltas:d}}},clear:function(c){c&&(c._maqAppStates&&delete c._maqAppStates,c._maqDeltas&&delete c._maqDeltas)},_parseStyleValues:function(c){var a=[];c&&k.forEach(c.split(";"),function(c){var d=c.indexOf(":");if(0<d){var g=c.substring(0,d).trim();c=c.substring(d+
1).trim();d={};d[g]=c;a.push(d)}});return a},transferElementStyle:function(c,a){if(c){var d=c._maqDeltas,g=this._parseStyleValues(a);d.undefined||(d.undefined={});d.undefined.style=g}},getDocument:function(){return document},shouldInitialize:function(){return!davinci.AppStatesDontInitialize},_getChildrenOfNode:function(c){for(var a=[],d=0;d<c.childNodes.length;d++){var g=c.childNodes[d];1===g.nodeType&&a.push(g)}return a},initialize:function(){this.subscribed||(p.subscribe("/maqetta/appstates/state/changed",
this,function(c){if(!c.editorClass)for(var a=davinci.states._getChildrenOfNode(c.node);a.length;){var d=a.shift();davinci.states.isContainer(d)||(a=a.concat(davinci.states._getChildrenOfNode(d)));var g=this.getStatesArray(d,c.oldState,c.newState,c.stateContainerNode);davinci.states._update(d,g)}}),this.subscribed=!0)}};"undefined"===typeof davinci&&(davinci={});var d=davinci.states=new m;(function(){d.initialize();d.shouldInitialize()&&"undefined"!=typeof f&&f(["dojo/_base/lang","dojo/query","dojo/aspect"],
function(c,g,k){var n=0,h=!1;c=function(c){h||(k.around(c,"parse",function(c){var a={};return function(g,f){var k;(k=!f&&g&&g.rootNode?g.rootNode:g)?e.byId(k):b.body();v(a);k=c.apply(this,arguments);var n=d.getDocument(),q,h,r,w,A;for(A in a){var y;if(y="body"==A?n.body:n.querySelectorAll("."+A)[0]){var B="BODY"==y.tagName;h=r=w=null;B?q=a[A]:(q=a[A].maqAppStates,h=a[A].maqDeltas);q&&(r=d.deserialize(q,{isBody:B}));h&&(w=d.deserialize(h,{isBody:B}));r&&(r.initial?r.current=r.initial:(r.focus&&delete r.focus,
delete r.current));d.store(y,r,w);h&&davinci.states.transferElementStyle(y,a[A].style)}}A=d.getAllStateContainers(n.body);for(n=0;n<A.length;n++)q=A[n],q._maqAppStates&&"string"==typeof q._maqAppStates.current&&d.setState(q._maqAppStates.current,q,{updateWhenCurrent:!0,focus:q._maqAppStates.focus});return k}}),dojo.parser.parse=c.parse,h=!0)};try{var y=f("dojox/mobile/parser");c.apply(y)}catch(A){}y||c.call(null,a);var v=function(c){var a=d.getDocument();if(!a.body._maqAlreadyPreserved){var f=davinci.states.retrieve(a.body);
f&&f.maqAppStates&&(c.body=f.maqAppStates);a.body._maqAlreadyPreserved=!0}g("*",a).forEach(function(a){var g=a.getAttribute("class");g||(g="");if(!a._maqAlreadyPreserved&&0>g.indexOf("maqTempClass")){a._maqAlreadyPreserved=!0;var f=d.retrieve(a);if("BODY"!=a.tagName&&f&&(f.maqAppStates||f.maqDeltas)){var b="maqTempClass"+n;a.setAttribute("class",g+" "+b);n++;c[b]={};f.maqAppStates&&(c[b].maqAppStates=f.maqAppStates);f.maqDeltas&&(c[b].maqDeltas=f.maqDeltas);a.style?c[b].style=a.style.cssText:console.error("States.js _preserveStates. No value for node.style.")}}})}})})();
davinci.Workbench||"undefined"==typeof dijit||p.subscribe("/maqetta/appstates/state/changed",function(c){var a=c&&c.node&&c.node.ownerDocument&&c.node.ownerDocument.defaultView&&c.node.ownerDocument.defaultView.dijit.byId;a&&(c.newState&&!c.newState.indexOf("_show:")?(c=a(c.newState.substring(6)))&&c.show&&c.show():c.oldState&&!c.oldState.indexOf("_show:")&&(c=a(c.oldState.substring(6)))&&c.hide&&c.hide())});return m})},"davinci/ve/commands/EventCommand":function(){define(["dojo/_base/declare","davinci/ve/widget"],
function(p,m){return p("davinci.ve.commands.EventCommand",null,{name:"EventCommand",constructor:function(h,e){this._oldId=h?h.id:void 0;this._properties=e||{}},setContext:function(h){this._context=h},execute:function(){if(this._oldId&&this._properties){var h=m.byId(this._oldId);this._oldProps=h.properties||{};h.setProperties(this._properties,!0);if(h.isHtmlWidget){var e=h.domNode,b;for(b in this._properties)this._properties[b]||e.removeAttribute(b)}this._newId=this._oldId;dojo.publish("/davinci/ui/widgetPropertiesChanged",
[[h]])}},undo:function(){if(this._newId){var h=m.byId(this._newId),e=h.domNode,b=h._srcElement,k;for(k in this._properties)this._oldProps[k]||(e.removeAttribute(k),b.removeAttribute(k));h.setProperties(this._oldProps);dojo.publish("/davinci/ui/widgetPropertiesChanged",[[h]])}}})})},"davinci/ve/widget":function(){define("davinci/html/HTMLElement ../Runtime ./metadata dojo/Deferred dojo/_base/lang ./DijitWidget ./GenericWidget ./DeliteWidget ./HTMLWidget ./ObjectWidget dojo/window".split(" "),function(p,
m,h,e,b,k,a,f,n,g,d){var c={},q=function(c,a,d){for(var g=0;g<d.children.length;g++){var f=a.childNodes[g],b=d.children[g];f&&1==f.nodeType&&"HTMLElement"==b.elementType&&(f.id=c.getUniqueID(b),q(c,f,b))}},w={_dojo:function(c){c=(c=c?c.ownerDocument||c:dojo.doc)||dojo.doc;return d.get(c).dojo||dojo},_dijit:function(c){return d.get(c?c.ownerDocument||c:dojo.doc).dijit||dijit},parseStyleValues:function(c){var a=[];c&&dojo.forEach(c.split(";"),function(c){var d=c.indexOf(":");if(0<d){var g=c.substring(0,
d).trim();c=c.substring(d+1).trim();d={};d[g]=c;a.push(d)}});return a},retrieveStyleProperty:function(c,a,d){var g=d;c&&dojo.some(c,function(c){if(c.hasOwnProperty(a))return g=c[a],!0});return g},setStyleProperty:function(c,a,d){var g=!1;c&&dojo.some(c,function(c){if(c.hasOwnProperty(a))return c[a]=d,g=!0});if(!g){var f={};f[a]=d;c.push(f)}},getStyleString:function(c){var a="";dojo.forEach(c,function(c){for(var d in c)c[d]&&(a=a+d+":"+c[d]+";")});return a},getEnclosingWidget:function(c){var a=w.getEnclosingWidgetForRichText(c);
if(a)return a;for(;c;){if(c._dvWidget)return c._dvWidget;c=c.parentNode||c.domNode&&c.domNode.parentNode}},getEnclosingWidgetForRichText:function(c){if(c&&c._dvWidget)return"html.stickynote"===c._dvWidget.type||"html.richtext"===c._dvWidget.type?c._dvWidget:c.parentNode?w.getEnclosingWidgetForRichText(c.parentNode):null},getUniqueObjectId:function(c,a){if(c){for(var d=c.substring((c.lastIndexOf("/")||c.lastIndexOf("."))+1),g=1,f=d+"_"+g++,b=w._dojo(a);b.getObject(f)||b.byId(f);)f=d+"_"+g++;return f}},
_remove_prefix:function(c){if(c){for(var a=c,d="dijit/form/ dijit/layout/ dijit/ dojox/mobile/ html. html/ OpenAjax. OpenAjax/".split(" "),g=0;g<d.length;g++)if(0==c.indexOf(d[g])){a=c.substr(d[g].length);"html."==d[g]&&(a="\x26lt;"+a+"\x26gt;");break}return a}return""},_getWidgetNameText:function(c){c="\x3cspan class\x3d'propertiesTitleWidgetName'\x3e"+this._remove_prefix(c);return c+"\x3c/span\x3e"},_getWidgetClassText:function(c,a){var d="\x3cspan class\x3d'propertiesTitleClassName'\x3e";c&&(d+=
"#"+c);a&&(d+="."+a.replace(/\s+/g,"."));return d+"\x3c/span\x3e"},getLabelForNode:function(c){var a=c.getAttribute("data-dojo-type")||c.getAttribute("dojoType");a||(a=c.tagName.toLowerCase());a=a.replace(/\./g,"/");a=this._getWidgetNameText(a);c.id&&(a+=this._getWidgetClassText(c.id));return a},getLabel:function(c){var a=this._getWidgetNameText(c.type),d,g=w.getWidgetHelper(c.type);g&&g.getWidgetText&&(d=g.getWidgetText(c));g&&g.getWidgetNameText&&(a=g.getWidgetNameText(c));var f=c.domNode;if(!c.type)return"unknown type";
switch(c.type.replace(/\//g,".")){case "dijit.form.ComboBox":case "dijit.form.Button":d=c.attr("label");break;case "dijit.layout.ContentPane":d=c.attr("title");break;case "html.label":d=f.innerHTML;break;case "html.img":d=f.alt,d||(d=f.title)}d&&(a+="\x3cspan class\x3d'propertiesTitleWidgetText'\x3e"+d+"\x3c/span\x3e ");g&&g.getWidgetDescriptor&&(a+=" \x3cspan class\x3d'propertiesTitleWidgetDescriptor'\x3e"+g.getWidgetDescriptor(c)+"\x3c/span\x3e ");var b=c._srcElement;d=c.getId();b=(b=b&&b.getAttribute("class"))&&
b.trim();if(d||b)a=g&&g._getWidgetClassText?a+g._getWidgetClassText(d,b):a+this._getWidgetClassText(d,b);g&&g.getWidgetTextExtra&&(a+=g.getWidgetTextExtra(c));"html.img"==c.type&&(a+="\x3cspan\x3e"+f.src.substr(f.src.lastIndexOf("/")+1)+"\x3c/span\x3e");return a},byId:function(c,a){var d=dojo.byId(c,a&&a.body?a:void 0);if(d){if(d._dvWidget)return d._dvWidget;if((d=w.getEnclosingWidget(d))&&d.id==c)return d}if(m.currentEditor&&m.currentEditor.currentEditor&&m.currentEditor.currentEditor.context)return m.currentEditor.currentEditor.context.widgetHash[c]},
byNode:function(c){if(c._dvWidget)return c._dvWidget},createWidget:function(c,e,y){if(c&&c.type){var A=dojo.mixin({},c),v=!1;"xblox/RunScript"===A.type&&"xblox/CSSState"===A.type&&(v=!0,delete c.properties.style);A.properties&&(A.properties=dojo.mixin({},c.properties));var m=A.type,u,z,C=h.query(m);if(C){A.properties&&("content"in A.properties&&!A.properties.content&&delete A.properties.content,A.properties.theme&&(z=A.properties.theme.themeName));y&&y.metadata&&y.metadata.childOverride&&b.mixin(A.properties,
y.metadata.childOverride);c=h.queryDescriptor(m,"widgetClass");!c&&e&&e.widgetClass&&(c=e.widgetClass);if(!0===C.delite||"xblox/RunScript"===m||"xblox/CSSState"===m||"xblox/Script"===m||"xblox/StyleSate"===m)c="delite";"delite"==c?u=f:"object"==c?(u=g,C.attributes=C.attributes||{},C.attributes.dojoType=m):"html"==c?u=n:"dijit"==c?u=k:null==u&&(u=a);if(u){c=C.content.trim().replace(/\s+/g," ");d.get(dojo.doc);var I=d.get(dojo.doc).dojo._toDom(c);I.fromWidgetData&&I.fromWidgetData(A);if(11===I.nodeType){y=
0;var D=null;c=I.childNodes;for(var H=0;H<c.length&&!(8!==c[H].nodeType&&(y++,D=c[H],1<y));H++);if(1<y){console.error("ERROR: complex widget content not supported");return}I=D}if(!I)return null;var E=new p(I.tagName.toLowerCase());if(I.hasAttributes())for(c=I.attributes,y=c.length-1;0<=y;--y)v&&"style"===c[y].name||E.addAttribute(c[y].name,c[y].value);I.innerHTML&&E.addText(I.innerHTML);v=h.queryDescriptor(m,"requiresId");c=h.queryDescriptor(m,"name");v=v&&c.match(/^[A-Za-z]\w*$/)?c:void 0;I.id=A.properties&&
A.properties.id||(A.context?A.context.getUniqueID(E,v):"");if(c=A.children)dojo.isString(c)?(I.innerHTML=c,I.nodeName.toLowerCase(),v=E._getAttribute("id"),E.addText(c),c=E.getText(A.context),E.children=[],E.setText(c),v&&E.addAttribute(v.name,v.value,v.noPersist),q(A.context,I,E)):dojo.forEach(c,function(c){if(c)if(dojo.isString(c))7<c.length&&"\x3c!--"==c.substring(0,4)&&"--\x3e"==c.substring(c.length-3)?(I.appendChild(dojo.doc.createComment(c.substring(4,c.length-3))),E.addComment(c.substring(4,
c.length-3))):(I.appendChild(dojo.doc.createTextNode(c)),E.addText(c));else if(c.context=A.context,c=w.createWidget(c))I.appendChild(c.domNode),E.addChild(c._srcElement)});(v=w.getWidgetHelper(m))&&v.preProcessData&&(A=v.preProcessData(A));v={};c={};for(var G in A.properties)y=A.properties[G],null!=y&&("on"==G.substr(0,2).toLowerCase()||"a"==E.tag.toLowerCase()&&"href"==G.toLowerCase()?c[G]=y:v[G]=y);C=new u(v,I,m,C,E,m);C._srcElement=E;C.chart&&A.properties&&A.properties.theme&&(C.chart.theme.themeName=
z);A.scripts&&(C.scripts=A.scripts);A.context&&(C._edit_context=A.context);A.properties&&(C.setProperties(v),C.setProperties(c,!0));if(A.maqAppStates||A.maqDeltas)A.maqAppStates&&(C.domNode._maqAppStates=dojo.clone(A.maqAppStates)),A.maqDeltas&&(C.domNode._maqDeltas=dojo.clone(A.maqDeltas)),z=davinci.states.serialize(C.domNode),z.maqAppStates&&C._srcElement.addAttribute(davinci.states.APPSTATES_ATTRIBUTE,z.maqAppStates),z.maqDeltas&&C._srcElement.addAttribute(davinci.states.DELTAS_ATTRIBUTE,z.maqDeltas);
(v=w.getWidgetHelper(m))&&v.cleanSrcElement&&v.cleanSrcElement(C._srcElement,e);v&&v.postCreateWidget&&v.postCreateWidget(C,e);return C}}else console.error("cant get widget meta data : ",c)}},_createSrcElement:function(c){var a=new p(c.tagName.toLowerCase());if(c.hasAttributes()){c=c.attributes;for(var d=c.length-1;0<=d;--d)a.addAttribute(c[d].name,c[d].value)}return a},getWidgetHelper:function(a){return c[a]},requireWidgetHelper:function(a){var d=new e;h.getHelper(a,"helper").then(function(g){g?
d.resolve(c[a]=new g):d.resolve()});return d},getWidget:function(c,d){if(c&&1==c.nodeType){var b=w.byNode(c);if(!b){if(c){for(var b={properties:{}},e=0;e<c.attributes.length;e++){var q=c.attributes[e];if(q.specified&&q.nodeValue){var h=q.nodeName.toLowerCase();if("id"!=h&&"widgetid"!=h&&"style"!=h&&"_"!=h.charAt(0)){if((q=q.nodeValue)&&"class"==h&&(q=q.replace("HtmlWidget","").trim(),!q))continue;b.properties[h]=q}}}"script"==c.tagName.toLowerCase()&&(b.children=c.innerHTML||void 0)}else b=void 0;
if(b.properties.is||null!=c.render||-1!==c.tagName.indexOf("D-"))return b=new f(b,c);e=c.getAttribute("dvwidget");if(c.hasAttribute("widgetid")||c.hasAttribute("data-dojo-type")||c.hasAttribute("dojotype"))e=w._dijit(c).byNode(c),h=c.getAttribute("data-dojo-type")||c.getAttribute("dojotype"),b=e?new k(b,c,e,null,null,h):new g(b,c);else if(e)b=new a(b,c,e);else{if("svg"==c.nodeName)return;b=new n(b,c,d)}}return b}}};dojo.setObject("davinci.ve.widget",w);return w})},"davinci/html/HTMLElement":function(){define(["dojo/_base/declare",
"davinci/html/HTMLItem","davinci/html/HTMLText","davinci/html/HTMLComment","davinci/html/HTMLAttribute"],function(p,m,h,e,b){return p("davinci.html.HTMLElement",m,{constructor:function(b){this.elementType="HTMLElement";this.attributes=[];this.tag=b||"";this._fmChildIndent=this._fmChildLine=0},add:function(b){this.statements||(this.statements=[]);this.statements.push(b);this.onChange()},getText:function(b){b=b||{};var a;b.indent+=2;a="\x3c"+this.tag;for(var f=0;f<this.attributes.length;f++){var n=
this.attributes[f].getText(b);0<n.length&&(a=a+" "+n)}if(this.noEndTag)a+="/\x3e";else{a=a+"\x3e"+this._addWS(this._fmChildLine,this._fmChildIndent);if(this.statements)for(f=0;f<this.statements.length;f++)a+=this.statements[f].printStatement(b,this.statements[f]);else if(this.script)a+=this.script;else if(0<this.children.length)for(n="style"==this.tag,f=0;f<this.children.length;f++)if(a+=this.children[f].getText(b),n){var g=this._fmChildLine,d=this._fmChildIndent||0;f+1==this.children.length&&(g=
this._fmLine,d=this._fmIndent);a+=this._addWS(g,d)}a=a+"\x3c/"+this.tag+"\x3e"}b.indent-=2;return a+=this._addWS(this._fmLine,this._fmIndent)},_formatModel:function(b,a,f){function n(c,a,g){d+=1+c;a?(a._fmChildLine=1,a._fmChildIndent=f.indent):(g._fmLine=1,g._fmIndent=f.indent)}function g(c,a){c.startOffset=d;c.wasParsed=!0;d+=c.tag.length+2;for(var f=0;f<c.attributes.length;f++){c.attributes[f].startOffset=d;var b=c.attributes[f].getText(a);0<b.length&&(d+=1+b.length);c.attributes[f].endOffset=d-
1}c.noEndTag&&d++;c.startTagOffset=d;b="";if(c.statements)for(f=0;f<c.statements.length;f++)b+=c.statements[f].printStatement(a,c.statements[f]);else c.script&&(b=c.script);if(b)d+=b.length;else if(0<c.children.length){var k;davinci.html._noFormatElements[c.tag]||(a.indent+=2,n(a.indent,c),k=!0);for(var e,f=0;f<c.children.length;f++){b=c.children[f];switch(b.elementType){case "HTMLElement":e&&"HTMLText"!=e.elementType&&!davinci.html._noFormatElements[b.tag]&&n(a.indent,null,e);g(b,a);break;case "HTMLText":b.startOffset=
d;d+=b.value.length;break;case "HTMLComment":b.startOffset=d,d+=b.value.length,d++,b.isProcessingInstruction&&(d+=2)}e=b}k&&(a.indent-=2);e&&"HTMLText"!=e.elementType&&n(a.indent,null,e)}d+=c.tag.length+3;c.endOffset=d-1}var d=0;void 0==a&&(a=this.children.length);var c,e;this.children.length&&0!=a?(e=this.children[a-1],d=e.endOffset+1):(c=this,d=this.startTagOffset+1);var h=d;davinci.html._noFormatElements[b.tag]||(n(f.indent,c,e),b._fmLine=1,b._fmIndent=a<this.children.length?f.indent:f.indent-
2);g(b,f);return d>h?d-h:0},getElementText:function(b){b=b||{};var a="";if(0<this.children.length)for(var f=0;f<this.children.length;f++)"HTMLComment"!=this.children[f].elementType&&(a+=this.children[f].getText(b));else{if(this.script)return this.script;if(this.statements)for(f=0;f<this.statements.length;f++)a+=this.statements[f].printStatement(b,this.statements[f])}return a},getChildElements:function(b,a,f){f=f||[];for(var n=0;n<this.children.length;n++)this.children[n].tag==b&&f.push(this.children[n]),
a&&"HTMLElement"==this.children[n].elementType&&this.children[n].getChildElements(b,a,f);return f},getChildElement:function(b){for(var a=0;a<this.children.length;a++)if(this.children[a].tag==b)return this.children[a]},hasAttribute:function(b){for(var a=0;a<this.attributes.length;a++)if(this.attributes[a].name==b)return!0;return!1},getAttribute:function(b){if(b=this._getAttribute(b))return b.value},_getAttribute:function(b){for(var a=0;a<this.attributes.length;a++)if(this.attributes[a].name==b)return this.attributes[a]},
addText:function(b){this.addChild(new h(b));this.onChange()},addComment:function(b){this.addChild(new e(b));this.onChange()},getLabel:function(){return"\x3c"+this.tag+"\x3e"},addAttribute:function(k,a,f){if("textContent"==k)this.children=[],this.addText(a);else{var n,g=0<this.attributes.length?this.attributes[this.attributes.length-1].endOffset+1:this.startTagOffset-(this.noEndTag?2:1),d=this._getAttribute(k),c;d?n=a.length-d.value.length:(d=new b,c=!0,n=k.length+a.length+4,d.startOffset=g,d.endOffset=
g+n-1);d.name=k;d.setValue(a);d.noPersist=f;this.wasParsed&&!f&&0<n&&this.getHTMLFile().updatePositions(g,n);c&&this.attributes.push(d);this.onChange()}},removeAttribute:function(b){this.attributes.every(function(a,f,n){return a.name===b?(n.splice(f,1),f=this.getHTMLFile(),!a.noPersist&&f&&(n=a.getText(),f.updatePositions(a.startOffest,0-(n.length+1))),!1):!0},this);this.onChange()},setAttribute:function(b,a){this.removeAttribute(b);this.addAttribute(b,a)},getUniqueID:function(b){if(!this.getAttribute("id")){var a=
this.getHTMLFile();a.uniqueIDs||(a.uniqueIDs={});a=a.uniqueIDs.hasOwnProperty(this.tag)?++a.uniqueIDs[this.tag]:a.uniqueIDs[this.tag]=0;this.addAttribute("id",this.tag+"_"+a,b)}},findElement:function(b){var a=this.getAttribute("id");if(b==a)return this;for(a=0;a<this.children.length;a++)if("HTMLElement"==this.children[a].elementType){var f=this.children[a].findElement(b);if(f)return f}},insertBefore:function(b,a){var f=dojo.indexOf(this.children,a);0>f&&(f=void 0);this.addChild(b,f);this.onChange()},
addChild:function(b,a,f){if(!f&&this.wasParsed)if("HTMLElement"==b.elementType){var n=this._getIndent(),g;a<this.children.length&&"HTMLElement"==this.children[a].elementType?g=this.children[a]._getIndent():this.children.length?dojo.forEach(this.children,function(c){"HTMLElement"==c.elementType&&(g=c._getIndent())}):g=n+1;n=this._formatModel(b,a,{indent:g});this.getHTMLFile().updatePositions(b.startOffset,n)}else if("HTMLText"==b.elementType||"CSS"==b.elementType.substring(0,3)){var n=b.getText(),
d=this.children.length?this.children[this.children.length-1].endOffset:this.startTagOffset,c=n.length;0<c&&("HTMLText"!=b.elementType&&(c+=this._fmChildIndent+1),this.getHTMLFile().updatePositions(d+1,c));b.startOffset=d+1;b.endOffset=b.startOffset+n.length-1}m.prototype.addChild.apply(this,arguments)},removeChild:function(b){var a=dojo.indexOf(this.children,b);if(0<=a){var f=1+b.endOffset-b.startOffset;if("HTMLElement"==b.elementType)if(1==this.children.length)f+=1*this._fmChildLine+this._fmChildIndent,
this._fmChildIndent-=2;else{if(0<a&&"HTMLElement"==this.children[a-1].elementType)var n=this.children[a-1],f=f+(1*n._fmLine+n._fmIndent);a+1==this.children.length&&"HTMLElement"==this.children[a-1].elementType&&(this.children[a-1]._fmChildIndent-=2)}0<f&&this.wasParsed&&this.getHTMLFile().updatePositions(b.startOffset,0-f)}m.prototype.removeChild.apply(this,arguments)},_textModify:function(b,a){var f=b.length-a.length;0!=f&&this.wasParsed&&this.getHTMLFile().updatePositions(this.startOffset,f)},setScript:function(b){this._textModify(b,
this.script);this.script=b},_previous:function(){var b=dojo.indexOf(this.parent.children,this);if(0<b)return this.parent.children[b-1]},_getIndent:function(){var b=this._previous();return b?" HTMLText"==b.elementType?(b=b.value.split("\n"),b[b.length-1].length):b._fmIndent:this.parent._fmChildIndent},visit:function(b){if(!b.visit(this)){for(var a=0;a<this.attributes.length;a++)this.attributes[a].visit(b);for(a=0;a<this.children.length;a++)this.children[a].visit(b)}b.endVisit&&b.endVisit(this)},setText:function(b){this.script=
"";var a=this.parent;this.errors=require("davinci/html/HTMLParser").parse(b,this).errors;dojo.mixin(this,this.children[0]);this.parent=a;this.visit({visit:function(a){delete a.wasParsed},rules:[]});this.onChange()}})})},"davinci/html/HTMLItem":function(){define(["dojo/_base/declare","davinci/html/HTMLModel"],function(p,m){return p("davinci.html.HTMLItem",m,{constructor:function(){this.elementType="HTMLItem"},getLabel:function(){return this.getText({indent:0})},onChange:function(h){if(this.parent&&
h)this.parent.onChange(h)},_addWS:function(h,e){h=h||0;e=e||0;for(var b=[],k=0;k<h;k++)b.push("\n");b.push("                                          ".substring(0,e));return b.join("")},close:function(){for(var h=0;h<this.children.length;h++)this.children[h].close()},getID:function(){return this.parent.getID()+":"+this.startOffset+":"+this.getLabel()},getHTMLFile:function(){for(var h=this;h&&"HTMLFile"!=h.elementType;)h=h.parent;return h}})})},"davinci/html/HTMLModel":function(){define(["dojo/_base/declare",
"davinci/model/Model"],function(p,m){davinci.html||(davinci.html={});davinci.html._noFormatElements={span:!0,b:!0,it:!0};davinci.html.escapeXml=function(h){return h?h.replace(/&/g,"\x26amp;").replace(/</g,"\x26lt;").replace(/>/g,"\x26gt;").replace(/"/g,"\x26quot;"):h};davinci.html.unEscapeXml=function(h){return h&&"string"===typeof h?h.replace(/&quot;/g,'"').replace(/&gt;/g,"\x3e").replace(/&lt;/g,"\x3c").replace(/&amp;/g,"\x26"):h};return p("davinci.html.HTMLModel",m,{})})},"davinci/model/Model":function(){define(["dojo/_base/declare"],
function(p){return p("davinci.model.Model",null,{constructor:function(){this.name=this.elementType="";this.endOffset=this.startOffset=0;this.parent=null;this.children=[]},inherits:function(m){1<arguments.length?m.apply(this,Array.prototype.slice.call(arguments,1)):m.call(this)},getText:function(){},setText:function(m){},addChild:function(m,h,e){m.parent=this;void 0!=h?this.children.splice(h,0,m):this.children.push(m)},setStart:function(m){this.startOffset=m},setEnd:function(m){this.endOffset=m},getLabel:function(){return null},
getID:function(){return null},mapPositions:function(m){return{startOffset:m.startOffset,endOffset:m.endOffset}},findChildAtPosition:function(m){m.endOffset||(m.endOffset=m.startOffset);if(m.startOffset>=this.startOffset&&m.endOffset<=this.endOffset){for(var h=0;h<this.children.length;h++){var e=this.children[h].findChildAtPosition(m);if(null!=e)return e}return this}return null},removeChild:function(m){for(var h=0;h<this.children.length;h++)if(this.children[h]==m){this.children.splice(h,1);break}},
find:function(m,h){var e={visit:function(b){if(0<this.found.length&&h)return!0;var k=null;for(k in m)if(b[k]!=m[k])break;b[k]==m[k]&&this.found.push(b);return!1},found:[]};this.visit(e);return h?0<e.found.length?e.found[0]:null:e.found},setDirty:function(m){this.dirtyResource=m},isDirty:function(){return this.dirtyResource},searchUp:function(m){if(this.elementType==m)return this;for(var h=this.parent;h&&h.elementType!=m;)h=h.parent;return h},visit:function(m){if(!m.visit(this))for(var h=0;h<this.children.length;h++)this.children[h].visit(m);
m.endVisit&&m.endVisit(this)},updatePositions:function(m,h,e){visitor={visit:function(b){if(b.endOffset<h)return!0;b.startOffset>=h?(b.startOffset+=e,b.endOffset+=e):b.endOffset>=h&&(b.endOffset+=e)}};m.visit(visitor)}})})},"davinci/html/HTMLText":function(){define(["dojo/_base/declare","davinci/html/HTMLItem"],function(p,m){return p("davinci.html.HTMLText",m,{constructor:function(h){this.elementType="HTMLText";this.value=h||""},getText:function(h){return this.value},setText:function(h){if(this.wasParsed||
this.parent&&this.parent.wasParsed){var e=h.length-this.value.length;0<e&&this.getHTMLFile().updatePositions(this.startOffset+1,e)}this.value=h},getLabel:function(){return 15>this.value.length?this.value:this.value.substring(0,15)+"..."}})})},"davinci/html/HTMLComment":function(){define(["dojo/_base/declare","davinci/html/HTMLItem"],function(p,m){return p("davinci.html.HTMLComment",m,{constructor:function(h){this.elementType="HTMLComment";this.value=h||""},getText:function(h){h=this.isProcessingInstruction?
"":"--";return"\x3c!"+h+this.value+h+"\x3e"}})})},"davinci/html/HTMLAttribute":function(){define(["dojo/_base/declare","davinci/html/HTMLItem"],function(p,m){return p("davinci.html.HTMLAttribute",m,{constructor:function(){this.elementType="HTMLAttribute";this.value=this.name=""},getText:function(h){if(this.noPersist&&!h.includeNoPersist)return"";h=this.name;({checked:1,selected:1,disabled:1,readonly:1,multiple:1,ismap:1,autofocus:1,autoplay:1,controls:1,formnovalidate:1,loop:1,muted:1,required:1})[this.name.toLowerCase()]?
h=this.value&&"false"!==this.value?h+('\x3d"'+this.value+'"'):"":this.noValue||(h=h+'\x3d"'+davinci.html.escapeXml(String(this.value))+'"');return h},setValue:function(h){this.value=davinci.html.unEscapeXml(h);this.onChange()}})})},"davinci/ve/DijitWidget":function(){define("require dojo/_base/declare dojo/_base/window dojo/_base/lang dojo/dom-attr dojo/parser ./_Widget ./metadata".split(" "),function(p,m,h,e,b,k,a,f){return m("davinci.ve.DijitWidget",a,{isDijitWidget:!0,constructor:function(a,g,
d,c,f,k){if("string"===typeof d){b.get(g,"data-dojo-type")||b.get(g,"dojoType")||b.set(g,"data-dojo-type",d);f&&f.addAttribute("data-dojo-type",d);d=g.ownerDocument;f=d.defaultView;(c=d.__DijitWidgetScratchSpace)||(c=d.__DijitWidgetScratchSpace=d.createElement("div"));c.appendChild(g);d=f.require("dojo/parser").instantiate([g],a,{noStart:!0})[0];c.firstChild&&c.removeChild(c.firstChild);if(this.domNode=d.domNode)d.domNode._dvWidget=this;this.isLayoutContainer=d.isLayoutContainer}else this.type=k?
k.replace(/\./g,"/"):d.declaredClass.replace(/\./g,"/");a=davinci.ve.metadata.getAllowedChild(this.type);this.acceptsHTMLChildren="ANY"===a[0]||-1!==a.toString().toUpperCase().indexOf("HTML");this.dijitWidget=d;this.containerNode=d.containerNode;this.styleNode=d.styleNode;this.id=d.id},getParent:function(){if(this.dijitWidget&&this.dijitWidget.domNode&&this.dijitWidget.domNode.parentNode){var a=p("davinci/ve/widget"),g=this.dijitWidget;do g=a.getEnclosingWidget(g.domNode.parentNode);while(g&&g.dijitWidget&&
"_"==g.dijitWidget.declaredClass.split(".").pop().charAt(0));return g}},_getChildren:function(a){if(this.acceptsHTMLChildren)return this.inherited(arguments);var g=[];"NONE"!==davinci.ve.metadata.getAllowedChild(this.type)[0]&&(this.dijitWidget.getChildren(),this.dijitWidget.getChildren().forEach(function(d){d._maqNotDVWidget||(a?g.push(p("davinci/ve/widget").getWidget(d.domNode)):(d=d.domNode&&d.domNode._dvWidget)&&g.push(d))}));return g},_getContainerNode:function(){return this.containerNode||this.domNode},
selectChild:function(a){this.dijitWidget.selectChild&&this.dijitWidget.selectChild(a.dijitWidget)},_addChildToDom:function(a,g){if(this.acceptsHTMLChildren){this.inherited(arguments);var d=a.dijitWidget;d&&this.dijitWidget._started&&!d._started&&a.startup()}else a.dijitWidget&&this.dijitWidget.addChild?this.dijitWidget.addChild(a.dijitWidget,g):("xblox/RunScript"===a.type&&a.getHelper()&&a.getHelper().addChildToDom&&a.getHelper().addChildToDom(this.dijitWidget,a,g),this.inherited(arguments))},_removeChildFromDom:function(a){this.dijitWidget.removeChild&&
a.dijitWidget?this.dijitWidget.removeChild(a.dijitWidget):this.inherited(arguments)},_getPropertyValue:function(a){return this.dijitWidget.get(a)},startup:function(){this.dijitWidget.startup()},isLayout:function(){var a=this.getContext().getDijit();return a.layout?this.dijitWidget.isInstanceOf(a.layout._LayoutWidget):!1},resize:function(){var a=this.getHelper();a&&a.resize?a.resize(this):this.dijitWidget.resize&&this.dijitWidget.resize()},renderWidget:function(){if(this.dijitWidget.render)this.dijitWidget.render();
else if(this.dijitWidget.chart){var a=dojo.marginBox(this.dijitWidget.domNode);this.dijitWidget.resize(a)}this.domNode.parentNode._dvWidget&&this.domNode.parentNode._dvWidget.isDijitWidget&&this._refresh(this.domNode.parentNode)},_refresh:function(a){var g=a.parentNode;g._dvWidget&&g._dvWidget.isDijitWidget?this._refresh(g):a._dvWidget.resize&&a._dvWidget.resize()},_attr:function(a,g){return this.dijitWidget.get.apply(this.dijitWidget,arguments)}})})},"davinci/ve/_Widget":function(){define("davinci/ve/_Widget",
"dojo/_base/declare ./metadata ../html/CSSModel dojox/html/entities davinci/ve/utils/StyleArray davinci/ve/utils/GeomUtils xide/mixins/EventedMixin xide/mixins/ReloadMixin".split(" "),function(p,m,h,e,b,k,a,f){var n=function(a,d,c){if(a==d)return!0;if(!a||!d||a.length!=d.length)return!1;for(var f=0;f<a.length;f++)if(c){if(!c(a[f],d[f]))return!1}else if(a[f]!=d[f])return!1;return!0};return p("davinci.ve._Widget",[a,f],{isWidget:!0,acceptsHTMLChildren:!1,_skipAttrs:"id style class dir lang _children".split(" "),
constructor:function(a,d,c,f){this.domNode=d;this.id=d.id;d._dvWidget=this;this._params=dojo.mixin({},a);this.type=c;this.metadata=f},postscript:function(){var a;if(this.domNode){var d=this.domNode.ownerDocument;d.body._edit_context?a=d.body._edit_context:d.body._dvWidget&&d.body._dvWidget._edit_context&&(a=d.body._dvWidget._edit_context)}this.id&&a&&(a.widgetHash[this.id]=this);this.buildRendering();this.postCreate()},buildRendering:function(){},postCreate:function(){},getObjectType:function(){},
getContext:function(){return this._edit_context},getChildren:function(a){var d=this.getHelper();return d&&d.getChildren?d.getChildren(this,a):this._getChildren(a)},indexOf:function(a){var d=this.getHelper();return d&&d.indexOf?d.indexOf(this,a):dojo.indexOf(this.getChildren(),a)},_getChildrenForTree:function(a){a=this.getContainerNode();var d=[];a&&!a.children.length&&this.domNode.children.length&&(a=this.domNode);a&&dojo.forEach(a.children,function(c){c=dijit.registry.getEnclosingWidget(c);c!=this&&
d.push(c)});return d},_getChildren:function(a){var d=this.getContainerNode(),c=[];d&&dojo.forEach(d.children,function(d){a?c.push(require("davinci/ve/widget").getWidget(d)):(d=d._dvWidget)&&c.push(d)});return c},getContainerNode:function(){var a=this.getHelper();return a&&a.getContainerNode?a.getContainerNode(this):"NONE"!==m.getAllowedChild(this.type)[0]?this._getContainerNode():null},_getContainerNode:function(){return this.domNode},getMetadata:function(){this.metadata||(this.metadata=m.query(this));
return this.metadata},getHelper:function(){this._edit_helper||(this._edit_helper=require("davinci/ve/widget").getWidgetHelper(this.type));return this._edit_helper},attr:function(a,d){var c=this._attr.apply(this,arguments);if(1<arguments.length)d=this._stringValue(a,d),this._srcElement.addAttribute(a,d);else return c},_attr:function(a,d){},indexOf:function(a){var d=this.getHelper();return d&&d.indexOf?d.indexOf(this,a):dojo.indexOf(this.getChildren(),a)},getStyleNode:function(){return this.styleNode||
this.domNode},addChild:function(a,d){if(this.getContainerNode()){if(void 0===d||null===d||-1===d)this._srcElement.addChild(a._srcElement);else{var c=this.getChildren();d<c.length?this._srcElement.insertBefore(a._srcElement,c[d]._srcElement):this._srcElement.addChild(a._srcElement)}(c=this.getHelper())&&c.addChild?c.addChild(this,a,d):this._addChildToDom.apply(this,arguments)}},_addChildToDom:function(a,d){try{var c=a.domNode,f=this.getContainerNode();if(void 0===d||null===d||-1===d)f.appendChild(c);
else{var b=this.getChildren();d<b.length?f.insertBefore(c,b[d].domNode):f.appendChild(c)}}catch(k){debugger}},getParent:function(){return require("davinci/ve/widget").getEnclosingWidget(this.domNode.parentNode)||this.domNode.parentNode},getObjectId:function(a){a=a||this;var d=a._edit_object_id;if(d)return d;if(a.domNode)return a.domNode.getAttribute("jsId")},addClass:function(a){var d=this.getClassNames(),d=d?d.split(/\s+/):[];-1===d.indexOf(a)&&(d.push(a),this._srcElement.setAttribute("class",d.join(" ")),
dojo.addClass(this.domNode,a))},getId:function(){if(!this.id){if(!this.domNode.id||!this.type)return;var a=this.domNode.id,d=(this.isHtmlWidget?this.getTagName():this.type).replace(/\./g,"_")+"_";if(a.length>d.length&&a.substring(0,d.length)==d)return}return this._srcElement&&this._srcElement._getAttribute("id")&&this._srcElement._getAttribute("id").noPersist?void 0:this.id},setMarginBox:function(a){var d=this.getStyleNode();d&&(dojo.marginBox(d,a),this._updateSrcStyle())},getMarginBox:function(){var a=
this.domNode,d=null,d=(d=this.getHelper())&&d.getMarginBoxPageCoords?d.getMarginBoxPageCoords(this):k.getMarginBoxPageCoords(a);d.l-=k.getScrollLeft(a);d.t-=k.getScrollTop(a);d.x=d.l;d.y=d.t;return d},getStyle:function(a){return(a=this.getStyleValues(a))?this._styleText(a):""},_sortStyleValues:function(a){a=dojo.clone(a);for(var d=h.shorthand,c=0,f=0;f<d.length;f++){var b;a:{b=d[f][0];for(var k=0;k<a.length;k++)if(a[k]&&a[k].hasOwnProperty(b)){b=k;break a}b=-1}-1<b&&(k=a[b],a.splice(b,1),a.splice(c,
0,k),c++)}return a},_styleText:function(a){var d="";if(dojo.isArray(a)){a=davinci.ve.states.normalizeArray("style",this.domNode,f,a);for(var c=0;c<a.length;c++)for(var f in a[c])value=a[c][f],void 0!==value&&""!=value&&null!=value&&(d+=f+": "+a[c][f]+"; ")}else for(f in a)value=davinci.ve.states.normalize("style",this.domNode,f,a[f]),void 0!==value&&""!=value&&null!=value&&(d+=f+": "+a[f]+"; ");return d.trim()},getChildrenData:function(a){a=a||{identify:!0};var d=this.getHelper();return d&&d.getChildrenData?
d.getChildrenData.apply(d,[this,a]):this._getChildrenData(a)},_getChildrenData:function(a){return this.getChildren().map(function(d){return d.getData(a)})},getClassNames:function(){return this._srcElement.getAttribute("class")||""},_getData:function(a){var d={type:this.type,properties:{}},c=require("davinci/ve/widget");if(a.identify){this._srcElement||(this._srcElement=c._createSrcElement(this.domNode));var f=this._srcElement._getAttribute("id");f&&f.noPersist&&(d.properties.isTempID=!0);d.properties.id=
this.id}!1!==a.preserveTagName&&this.id&&(d.tagName=this._srcElement.tag);f=m.query(this,"property");this.domNode&&this.domNode.parentNode&&(c=c.getEnclosingWidget(this.domNode.parentNode),(c=m.query(c,"childProperties"))&&(f=f?dojo.mixin({},f,c):c));if(f)for(var b in f)if(-1===this._skipAttrs.indexOf(b.toLowerCase())){var c=f[b],k=this.getPropertyValue(b);k&&k.length?"array"==c.datatype?n(k,c.defaultValue)||(d.properties[b]=k):k!=c.defaultValue&&(d.properties[b]=k):"boolean"!=c.datatype&&"number"!=
c.datatype||k==c.defaultValue?c.datatype&&(0==c.datatype.indexOf("dijit")||"object"==c.datatype&&c.isData)&&(d.properties[b]=k):d.properties[b]=k}d.properties.style=this.getStyle(a);(b=this.getClassNames(a))&&(d.properties["class"]=b);d.children=this.getChildrenData(a);d.type.indexOf("delite");return d},getData:function(a){a=a||{identify:!0,preserveStates:!0};var d=this.getHelper();a=d&&d.getData?d.getData.apply(d,[this,a]):this._getData(a);a.maqAppStates=dojo.clone(this.domNode._maqAppStates);a.maqDeltas=
dojo.clone(this.domNode._maqDeltas);a.properties||(a.properties={});if(this.properties)for(var c in this.properties)c in a.properties||(a.properties[c]=this.properties[c]);c=this._srcElement;for(var d=c.attributes,f=0;f<d.length;f++){var b=d[f];"on"==b.name.substr(0,2).toLowerCase()?a.properties[b.name]=b.value:"a"==c.tag.toLowerCase()&&"href"==b.name.toLowerCase()&&(a.properties[b.name]=b.value)}return a},getPropertyValue:function(a){if("id"===a)return this.getId();if("jsId"===a)return this.getObjectId();
var d=this.getHelper();return d&&d.getPropertyValue?d.getPropertyValue(this,a):this._getPropertyValue(a)},_getPropertyValue:function(a){return this.domNode.getAttribute(a)},getTagName:function(){return this.domNode.nodeName.toLowerCase()},getStyleValues:function(){function a(c){for(var d=f.length-1;0<=d;d--)void 0!==f[d][c]&&f.splice(d,1)}var d=this.getStyleNode().style,c=this._srcElement.getAttribute("style"),f=require("davinci/ve/widget").parseStyleValues(c),c=this.getParent();d&&c&&c.dijitWidget&&
c.dijitWidget.addChild&&!c.acceptsHTMLChildren&&(a("position"),a("left"),a("top"));return f},getStyleValuesAllStates:function(){var a=this.getStyleValues(),d={undefined:a},c=this.domNode._maqDeltas;if(c)for(var f in c)c[f].style&&(d[f]="undefined"==f?b.mergeStyleArrays(a,c[f].style):c[f].style);return d},_updateSrcStyle:function(){var a=this.getStyle();a.length?this._srcElement.addAttribute("style",a):this._srcElement.removeAttribute("style")},_getStyleString:function(a){if(!a)return"";a=this._sortStyleValues(a);
return this._styleText(a)},setStyleValuesCanvas:function(a){if(a){a=this._getStyleString(a);var d=this.getStyleNode();dojo.attr(d,"style",a);this.dijitWidget&&(this.dijitWidget.style=a)}},setStyleValuesModel:function(a){a=this._getStyleString(a);0<a.length?this._srcElement.addAttribute("style",a):this._srcElement.removeAttribute("style")},setStyleValuesAllStates:function(a){this.domNode._maqDeltas=void 0;if(a)for(var d in a){var c=a[d];"undefined"===d&&(d=void 0);davinci.ve.states.setStyle(this.domNode,
d,c,!0)}},isLayout:function(){return!1},resize:function(){},refresh:function(){var a=this.getParent();a&&a.dijitWidget?a.refresh():this.resize&&this.resize()},removeChild:function(a){this._srcElement?this._srcElement.removeChild(a._srcElement):console.error("cant remove child! this._srcElement is null",this);var d=this.getHelper();d&&d.removeChild?d.removeChild(this,a):this._removeChildFromDom.apply(this,arguments)},_removeChildFromDom:function(a){(a=a.domNode)&&a.parentNode&&a.parentNode.removeChild(a)},
setProperties:function(a,d){this.properties||(this.properties={});d=d||!1;a.id&&(this._srcElement.addAttribute("id",a.id,a.isTempID),delete a.id,delete a.isTempID);a.isTempID&&delete a.isTempID;for(var c in a){var f=a[c];f||"boolean"==typeof f||"number"==typeof f?(f=this._stringValue(c,f),d||(this.properties[c]=f),this._srcElement.addAttribute(c,f)):(delete this.properties[c],this._srcElement.removeAttribute(c))}},startup:function(){this.initReload()},renderWidget:function(){},destroyWidget:function(a){(a=
this.getHelper())&&a.destroy?a.destroy(this):this.dijitWidget?this.dijitWidget.destroyRecursive():dojo.forEach(this.getChildren(),function(a){a.destroyWidget()})},destroy:function(){this.inherited(arguments);console.error("destry")},selectChild:function(a){},attach:function(){var a=this.getHelper();a&&a.create&&a.create(this,this._srcElement)},_stringValue:function(a,d){var c=this.getMetadata(),c=c.property&&c.property[a];if(!c)return d;if("object"==c.datatype)if(d.getObjectId)d=d.getObjectId();else{if(c=
d._edit_object_id)return c;if(d.domNode)return d.domNode.getAttribute("jsId")}else if("json"==c.datatype){var c=(c=this.getContext())&&c.getDojo()||dojo,f=this.getHelper();f&&f.checkValue&&(d=f.checkValue(d));c.isObject(d)&&(d=c.toJson(d))}else if("string"==c.datatype)switch(c.format){case "date":case "time":isFinite(d)&&(d=dojo.date.stamp.toISOString(d,{selector:c.format}));break;default:d=e.encode(d)}return d}})})},"davinci/html/CSSModel":function(){define({shorthand:[["border","border-width border-style border-color border-top border-left border-right border-bottom".split(" ")],
["border-width",["border-top-width","border-right-width","border-bottom-width","border-left-width"]],["border-style",["border-top-style","border-right-style","border-bottom-style","border-left-style"]],["border-color",["border-top-color","border-right-color","border-bottom-color","border-left-color"]],["border-bottom",["border-bottom-width","border-bottom-style","border-bottom-color"]],["border-top",["border-top-width","border-top-style","border-top-color"]],["border-left",["border-left-width","border-left-style",
"border-left-color"]],["border-right",["border-right-width","border-right-style","border-right-color"]],["font","font-size line-height font-weight font-style font-family line-height".split(" ")],["border-radius",["border-top-left-radius","border-top-right-radius","border-bottom-right-radius","border-bottom-left-radius"]],["-moz-border-radius",["-moz-border-radius-topleft","-moz-border-radius-topright","-moz-border-radius-bottomright","-moz-border-radius-bottomleft"]],["margin",["margin-top","margin-right",
"margin-bottom","margin-left"]],["padding",["padding-top","padding-right","padding-bottom","padding-left"]],["background",["background-color","background-image","background-repeat","background-position","background-attachment"]]]})},"davinci/ve/utils/StyleArray":function(){define([],function(){return{mergeStyleArrays:function(p,m){p||(p=[]);m||(m=[]);for(var h=dojo.clone(p),e=0;e<m.length;e++)for(var b in m[e])for(j=h.length-1;0<=j;j--){var k=h[j],a;for(a in k)if(b==a){h.splice(j,1);break}}return h.concat(m)}}})},
"davinci/ve/GenericWidget":function(){define(["dojo/_base/declare","./_Widget"],function(p,m){return p("davinci.ve.GenericWidget",m,{isGenericWidget:!0,constructor:function(h,e,b,k,a){dojo.attr(e,"dvwidget",b);a&&a.addAttribute("dvwidget",b)},buildRendering:function(){this.containerNode=this.domNode;if(this._params){for(var h in this._params)this.domNode.setAttribute(h,this._params[h]);this._params=void 0}},_getChildrenData:function(h){for(var e=[],b=this.domNode.childNodes,k=0;k<b.length;k++){var a=
b[k],f;switch(a.nodeType){case 1:(a=require("davinci/ve/widget").byNode(a))&&(f=a.getData(h));break;case 3:(f=a.nodeValue.trim())&&h.serialize&&(f=davinci.html.escapeXml(f));break;case 8:f="\x3c!--"+a.nodeValue+"--\x3e"}f&&e.push(f)}return 0===e.length?void 0:e},setProperties:function(h){var e=this.domNode,b;for(b in h)"style"===b?dojo.style(e,h[b]):h[b]?e[b]=h[b]:e.removeAttribute(b);this.inherited(arguments)},_attr:function(h,e){if(1<arguments.length)this.domNode.setAttribute(h,e);else return this.domNode.getAttribute(h)},
getTagName:function(){return this.domNode.nodeName.toLowerCase()}})})},"davinci/ve/DeliteWidget":function(){define("dojo/_base/declare ./_Widget ./widget require xide/registry xide/utils".split(" "),function(p,m,h,e,b,k){function a(a){a.declaredClass&&"davinci.ve.DeliteWidget"!==a.declaredClass?a.type=a.declaredClass:a.domNode&&a.domNode.declaredClass&&-1==a.domNode.declaredClass.indexOf("uniq")&&(a.type=a.domNode.declaredClass);if(!a.type)switch("delite/"+k.capitalize(a.domNode.baseClass.replace("d-",
""))){case "delite/Radio-button":a.type="delite/RadioButton";break;case "delite/Checkbox":a.type="delite/Checkbox";break;case "delite/Accordion-header":a.type="delite/AccordionHeader";break;case "delite/Combobox":a.type="delite/Combobox";break;case "delite/Toggle-button":a.type="delite/ToggleButton";break;case "delite/Tab-bar":a.type="delite/TabBar";break;case "delite/View-stack":a.type="delite/ViewStack";break;case "delite/MediaPlayer":a.type="delite/MediaPlayer";break;case "delite/Panel":a.type=
"delite/Panel";break;case "delite/Select":a.type="delite/Select";break;case "delite/Button":a.type="delite/Button";break;case "delite/Accordion":a.type="delite/Accordion";break;case "delite/Slider":a.type="delite/Slider"}a.type?b.add(a.domNode):console.error("have no widget type ",a)}p=p("davinci.ve.DeliteWidget",m,{isGenericWidget:!0,helper:h,getData:function(a){a=a||{identify:!0,preserveStates:!0};var k;k=(k=this.getHelper())&&k.getData?k.getData.apply(k,[this,a]):this._getData(a);var g=!1;"no_id"===
this.id&&(g=dijit.getUniqueId(this.type.replace(/\./g,"_")),g=g.replace("delite/","d-").toLowerCase(),console.error("no id! set to "+g),this.id=g,k.properties.id=g,k.properties.id=g,this.domNode.id=g,g=!0);a.identify&&!g&&b.byId(this.id);b.add(this.domNode);k.maqAppStates=dojo.clone(this.domNode._maqAppStates);k.maqDeltas=dojo.clone(this.domNode._maqDeltas);k.properties||(k.properties={});if(this.properties)for(var d in this.properties)d in k.properties||(k.properties[d]=this.properties[d]);a=this._srcElement;
for(var g=a.attributes,c=0;c<g.length;c++){var e=g[c];d=e.name;if("on"==e.name.substr(0,2).toLowerCase())k.properties[e.name]=e.value;else if("a"==a.tag.toLowerCase()&&"href"==e.name.toLowerCase())k.properties[e.name]=e.value;else if("stop"===d||"bidirectional"===d||"block"===d||"targetevent"===d)k.properties[e.name]=e.value}return k},_fixType:function(f){return a(f)},_getChildren:function(a){function b(a){dojo.forEach(a.children,function(a){(a=c.getWidget(a,!1))&&!a.type&&d._fixType(a);d.metadata&&
d.metadata.ignore&&a.type&&-1!==d.metadata.ignore.indexOf(a.type)||a&&a.type&&(-1==a.type.indexOf("html.")||d.metadata&&1==d.metadata.htmlContent)&&g.push(a)})}var g=[],d=this;a=this.container||this.domNode;a.containerNode&&null==this.domNode.render&&(a=a.containerNode);this.domNode&&null!=this.domNode.render&&(a=this.domNode);var c=e("davinci/ve/widget");a&&(b(a),0==g.length&&this.domNode.containerNode&&b(this.domNode.containerNode));return d.metadata&&d.metadata.noChildren?[]:g},getChildren:function(a){var b=
this.getHelper();return b&&b.getChildren?b.getChildren(this,a):this._getChildren(a)},constructor:function(a,b,g,d,c){this.acceptsHTMLChildren=!0},buildRendering:function(){this.containerNode=this.domNode;if(this._params){for(var a in this._params)this.domNode.setAttribute(a,this._params[a]);this._params=void 0}},_getChildrenData:function(a){var b=this.domNode;if(!b.hasChildNodes())return null;if(b&&b.getChildrenData)return b.getChildrenData();var b=[],g=this.domNode.childNodes,d=e("davinci/ve/widget");
this.metadata&&this.metadata.noChildren&&(g=[]);for(var c=0;c<g.length;c++){var k=g[c],h;switch(k.nodeType){case 1:if((k=d.byNode(k))&&k.type&&-1!==k.type.indexOf("html.")&&!0!==this.metadata.htmlContent)break;if(this.metadata&&this.metadata.ignore&&k.type&&-1!==this.metadata.ignore.indexOf(k.type))break;k&&(h=k.getData(a));break;case 3:(h=k.nodeValue.trim())&&(a.serialize||!0===this.metadata.htmlContent)&&(h=davinci.html.escapeXml(h));break;case 8:h="\x3c!--"+k.nodeValue+"--\x3e"}(h&&h.type&&-1==
h.type.indexOf("html.")||h&&!0===this.metadata.htmlContent)&&b.push(h)}return 0===b.length?void 0:b},_getPropertyValue:function(a){if(this.domNode._get){var b=this.domNode._get(a);null==b&&(b=this.domNode.getAttribute(a));return b}if(this.containerNode&&a in this.containerNode)return this.containerNode[a]},setProperties:function(a){var b=this.domNode,g;for(g in a)"style"===g?dojo.style(b,a[g]):a[g]?(b[g]=a[g],b._set&&b._set(g,a[g]),dojo.attr(b,g,a[g])):b.removeAttribute(g);this.inherited(arguments)},
_attr:function(a,b){},getTagName:function(){return this.domNode.nodeName.toLowerCase()},getParent:function(){if("xblox/RunScript"==this.type){var a=this.domNode;if(a&&a._targetReference&&a._targetReference._dvWidget)return a._targetReference._dvWidget}return this.inherited(arguments)}});p.fixType=a;return p})},"davinci/ve/HTMLWidget":function(){define(["dojo/_base/declare","./_Widget"],function(p,m){return p("davinci.ve.HTMLWidget",m,{isHtmlWidget:!0,addHTMLClasses:!0,constructor:function(h,e,b){this.type=
"html."+e.tagName.toLowerCase();this.acceptsHTMLChildren=!0;null!=b&&(this.addHTMLClasses=b)},buildRendering:function(){this.containerNode=this.domNode;if(this._params){for(var h in this._params)this.domNode.setAttribute(h,this._params[h]);this._params=void 0}try{!1!==this.addHTMLClasses&&dojo.addClass(this.domNode,"HtmlWidget")}catch(e){}},_getChildrenData:function(h){function e(a){(a=a.nodeValue.trim())&&(a=davinci.html.escapeXml(a));return a}var b=this.domNode;if(!b.hasChildNodes())return null;
if(1===b.childNodes.length&&3===b.firstChild.nodeType)return e(b.firstChild);var k=[];dojo.forEach(b.childNodes,function(a){var f;switch(a.nodeType){case 1:(a=require("davinci/ve/widget").byNode(a))&&(f=a.getData(h));break;case 3:f=e(a);break;case 8:f="\x3c!--"+a.nodeValue+"--\x3e"}f&&k.push(f)});return k},setProperties:function(h,e){var b=this.domNode;e=e||!1;for(var k in h)if("style"===k)dojo.style(b,h[k]);else if(!e){var a=h[k];a||"boolean"==typeof a||"number"==typeof a?b.setAttribute(k,a):b.removeAttribute(k)}this.inherited(arguments)},
resize:function(){this.getChildren().forEach(function(h){h.resize&&h.resize()})},_attr:function(h,e){if(1<arguments.length)this.domNode[h]=e;else return this.domNode[h]},getTagName:function(){return this.domNode.nodeName.toLowerCase()}})})},"davinci/ve/ObjectWidget":function(){define(["dojo/_base/declare","dojo/dom-attr","./_Widget"],function(p,m,h){return p("davinci.ve.ObjectWidget",h,{isObjectWidget:!0,constructor:function(e,b,k,a,f){"string"===typeof k&&(m.set(b,"data-dojo-type",k),f&&f.addAttribute("data-dojo-type",
k))},postCreate:function(){var e=this._params.jsId,b=require("davinci/ve/widget")._dojo(this.domNode),k;if(e){if(m.set(this.domNode,"jsId",e),k=this.getObjectType())if(k=b.getObject(k.replace(/\//g,".")))if(k=k.markupFactory?k.markupFactory(this._params,this.domNode,k):k.prototype&&k.prototype.markupFactory?k.prototype.markupFactory(this._params,this.domNode,k):new k(this._params,this.domNode))k._edit_object_id=e,b.setObject(e,k)}else if(e=this.getObjectId())if(k=b.getObject(e))k._edit_object_id=
e},getObjectType:function(){var e=this.domNode,e=m.get(e,"data-dojo-type")||m.get(e,"dojoType");return e=e.replace(/\./g,"/")},getObjectId:function(){return m.get(this.domNode,"jsId")},_getChildren:function(){return[]}})})},"davinci/ve/commands/StyleCommand":function(){define(["dojo/_base/declare","davinci/ve/widget","davinci/ve/utils/StyleArray"],function(p,m,h){return p("davinci.ve.commands.StyleCommand",null,{name:"style",constructor:function(e,b,k){this._newValues=b;this._id=e?e.id:void 0;this._applyToStateIndex=
k&&"Normal"!=k&&"undefined"!=k?k:"undefined"},add:function(e){e&&e._id==this._id&&e._newValues&&dojo.mixin(this._newValues,e._newValues)},execute:function(e,b){if(this._id&&this._newValues){var k=require("davinci/ve/widget").byId(this._id);if(k&&k.domNode){var a=require("davinci/ve/States"),f=k.getStyleValuesAllStates();this._oldStyleValuesAllStates=dojo.clone(f);f[this._applyToStateIndex]=f[this._applyToStateIndex]?h.mergeStyleArrays(f[this._applyToStateIndex],this._newValues):this._newValues;for(var n=
f[this._applyToStateIndex],g=n.length-1;0<=g;g--){var d=n[g],c=!1,q;for(q in d)"$MAQ_DELETE_PROPERTY$"==d[q]?delete d[q]:c=!0;c||n.splice(g,1)}k.setStyleValuesAllStates(f);n=a.getStatesListCurrent(k.domNode);d=h.mergeStyleArrays([],f.undefined);for(g=0;g<n.length;g++)f[n[g]]&&(d=h.mergeStyleArrays(d,f[n[g]]));k.setStyleValuesCanvas(d);k.setStyleValuesModel(f.undefined);k.refresh();a.resetState(k.domNode);!0!==b&&dojo.publish("/davinci/ui/widgetPropertiesChanged",[[k]])}}},undo:function(){if(this._id&&
this._oldStyleValuesAllStates){var e=require("davinci/ve/widget").byId(this._id);if(e){require("davinci/ve/States");var b=this._oldStyleValuesAllStates,k=this._applyToStateIndex;e.setStyleValuesAllStates(b);b=h.mergeStyleArrays(b.undefined,b[k]);e.setStyleValuesCanvas(b);e.setStyleValuesModel(this._oldStyleValuesAllStates.undefined);e.refresh();require("davinci/ve/States").resetState(e.domNode);dojo.publish("/davinci/ui/widgetPropertiesChanged",[[e]])}}}})})},"davinci/lang/ve":function(){define([],
function(){return{common:"Common",widgetSpecific:"Widget",events:"Events",layout:"Layout",showMinMax:"show min/max",padding:"Padding",margins:"Margins",showtrbl:"show t/r/b/l",background:"Background",border:"Border",showDetails:"show details",fontsAndText:"Fonts/Text",shapesSVG:"SVG",properties:"properties",Scenes:"Scenes",States:"States",ActiveScene:"This scene is currently visible",AppStateFocus:"This application state is the target for application-state-specific visibility or styling changes",
InitialScene:"This scene will show initially when the page runs",chooseDeviceSilhouette:"Choose a device silhouette: ",filesHasUnsavedChanges:"The file '${0}' has unsaved changes, \"Save\" changes and continue with switch device silhouette.",selectAncestorTitle:"Select ancestor",selectAncestorLabel:"Select ancestor (closest ancestor listed first):",createNewState:"Create New State",updateCurrentState:"Update Current State",createLabel:"Create",updateLabel:"Update",modifyState:"Modify State",modifyLabel:"Update",
stateLabel:"Name",enterStateName:"Please enter a state name.",stateNameExists:"State name '${name}' already exists. Please enter a different state name.",renameState:"Rename State",renameLabel:"Rename",cancelLabel:"Cancel",newStateLabel:"New name:",manageStates:"Manage Widget Visibility for Different States",manageStatesCheckLabel:"Check:",manageStatesCheckCurrentStateOnly:"Current state",manageStatesCheckAll:"All",manageStatesUncheckAll:"None",manageStatesCheckBackgroundOnly:"Background only",manageStatesAllVisibleFromBackground:"(Visible from Background)",
manageStatesSomeVisibleFromBackground:"(Some visible from Background)",manageStatesSomeVisibleSomeHidden:"(Some visible, some hidden)",initialStateCheckBoxLabel:"Initial state at document load time",EnableApplicationStates:"Enable/disable application states",EnableAsStateContainerDescription:"Setting the check box below and clicking OK will allow custom application states to be defined on the currently selected widget.",DisableAsStateContainerDescription:"Unsetting the check box below and clicking OK will disallow custom application states on the currently selected widget.",
DisableAsStateContainerDataLoss:"Any existing interactivity based on existing application states will be lost.",EnableAsStateContainerWidgetLabel:"Application states are enabled on this widget",EnableApplicationStatesCurrentWidget:"Currently selected widget",EnableApplicationStatesCurrentStates:"Current application states",EnableApplicationStatesNone:"(none)",NewWidgetsCurrentStateTitleBackground:"Toggle whether new widgets go to Background or selected state (current value: Background)",NewWidgetsCurrentStateTitleCurrentState:"Toggle whether new widgets go to Background or selected state (current value: selected state)",
richTextInputHelp:"Provides Rich Text (word processor-like) editing of HTML.",smartInputHelp1:"If you use any markup characters (\x26lt;,\x26gt;,\x26amp;), you need to specify whether the text represents literal (plain) text or HTML markup that should be parsed (using an innerHTML assignment).",smartInputHelp2:"Text represents literal (plain) text.",loading:"Loading...",htmlMarkup:"HTML markup",creatingStyleRules:"Creating Style Rules with app.css",propChangeCannotComplete:"This property change cannot be completed because the operation attempts to modify a read-only theme CSS file.",
toChangeProperty:"To change this property, one technique is to add a class to this widget (at top of Properties palette)  and then open up the CSS Details pane to target a style rule within your app.css file, as described at ${0}.",errorModifyingValue:"Error modifying value",changeWillModify:"This change will modify one of the CSS style rules defined within a 'CSS theme' and will therefore probably impact other widgets on a global basis.",insteadOfChanging:"Instead of changing the theme CSS files, it is usually better to add a class to this widget (at the top of the Properties palette) and then open up the CSS Details pane to target a style rule within your app.css file, as described at ${0}.",
okToProceed:"OK to proceed with this change?",valueIsOverriden:"This value is overriden and can not be changed.",applyToWhich:"Apply to which style rule:",onlyApplyToState:" Only apply to current state (${0})",newRule:"[class: ${0} - New rule in ${1}] ",newThemeRule:"[theme: - New rule in ${0}] ",existingRule:"[class: ${0} - Existing rule in ${1}] ",line:" line: ${0})",propUndefined:"undefined",bgdType_emptystring:"",bgdType_none:"none",bgdType_url:"image",bgdType_linear:"linear gradient",bgdType_radial:"radial gradient",
bgdType_other:"other",bgdPickFile:"Choose...",bgdStop:"Stop",bgdAddStop:"Add a new gradient stop after this stop",bgdRemoveStop:"Remove this gradient stop",bgdBackgroundColor:"background-color:",bgdBackgroundImageType:"background-image type:",bgdImageUrl:"Image URL:",bgdUrl:"URL:",bgdColorStops:"Color stops:",bgdColor:"color",bgdPosition:"position",bgdOptions:"Options:",bgdAngle:"Angle:",bgdPosition2:"Position:",bgdShape:"Shape:",bgdExtent:"Extent:",bgdBackgroundRepeat:"background-repeat:",bgdBackgroundPosition:"background-position:",
bgdBackgroundSize:"background-size:",bgdBackgroundOrigin:"background-origin:",bgdBackgroundClip:"background-clip:",bgdBackgroundImageValue:"'background-image' value:",bgdTemplate:"Template:",colorPicker:"Color picker...",removeValue:"Remove Value",selectColor:"select a color",toolBarFor:"for: ",noSelection:"(no selection)",toolBarClass:"class:",toolBarId:"ID:",idAlreadyUsed:"This id is already used by another widget",noValidParents:"No valid parents at this position",willBeChildOf:"Will become a child of:",
candidateParents:"Candidate parents:",toChangePress:"To change, press numbers",vteWarningTitle:"Theme Version Warning",vteWarningMessage:"Theme version does not match Maqetta version this could produce unexpected results. We suggest recreating the custom theme using the current version of Maqetta and deleting the existing theme.",vteWarningUnsuportedBrowserTitle:"Unsupported brower",vteWarningUnsuportedBrowserMessage:"Editing mobile themes is only supported on webkit browsers, we sugguest using Chrome or Safari to customize mobile themes.",
vteWarningToolkitMessage:"Theme version does not match workspace library version this could produce unexpected results. We suggest recreating the custom theme using the current version of Maqetta and deleting the existing theme.",vteErrorTitle:"Theme Version Error",vteErrorMessage:"Theme version is not supported by this version of Maqetta. You must recreating custom theme using the current version of Maqetta and deleting the existing theme..",vteErrorSavingResourceMessage:"error saving resource\n",
"SourceComboButton-source":"Source","SourceComboButton-splitHorizontal":"Split-H","SourceComboButton-splitVertical":"Split-V","LayoutDropDownButton-flow":"Flow","LayoutDropDownButton-absolute":"Absolute"}})},"davinci/ve/palette/Palette":function(){define("dojo/_base/declare dojo/_base/lang dojo/_base/connect dojo/on dojo/query dojo/dom-class dojo/Deferred dijit/focus dijit/_WidgetBase davinci/Runtime davinci/Workbench dijit/_KeyNavContainer dijit/form/TextBox dijit/form/DropDownButton dijit/DropDownMenu dijit/MenuItem davinci/ui/dnd/DragSource davinci/ve/metadata davinci/library ./PaletteFolder ./PaletteItem davinci/_common davinci/ve/tools/CreateTool davinci/workbench/Preferences".split(" "),
function(p,m,h,e,b,k,a,f,n,g,d,c,q,w,r,B,y,A,v,x,u,z,C,I){return p("davinci.ve.palette.Palette",[n,c],{descriptors:"",_displayShowValue:"block",_presetClassNamePrefix:"maqPaletteSection_",_presetSections:{},_presetCreated:{},raisedItems:[],sunkenItems:[],moreItems:[],helpItems:[],_userWidgetSection:{id:"$$UserWidgets$$",name:"User Widgets",includes:[]},postMixInProperties:function(){this._resource=z},postCreate:function(){dojo.addClass(this.domNode,"dojoyPalette");this.refresh();h.subscribe("/davinci/ui/addedCustomWidget",
this,"addCustomWidget");h.subscribe("/davinci/preferencesChanged",this,"preferencesChanged")},addCustomWidget:function(a){if(this._loaded&&a&&a.$wm&&a.$wm.widgets&&a.$wm.widgets.length){var c=g.currentEditor.getContext().getCompType();I.getPreferences("davinci.ve.editorPrefs",d.getProject()).showAllWidgets&&(c="mobile"==c?"$ALLMOBILE":"$ALLDESKTOP");var f=a.$wm;a=a.$wm.widgets;for(var b=null,k=0;k<a.length;k++){var e=a[k],n;for(n in this._presetSections){var h=null,q=this._presetSections[n];if(q){for(var w=
0;w<q.length;w++){var r=q[w];if("$$UserWidgets$$"==r.id){h=r;break}}h||(h=dojo.clone(this._userWidgetSection),h.preset=this._presetSections[n],h.presetId=n,h.items=[],q.push(h),this._presetCreated[n]&&(this._generateCssRules([h]),this._createPalette(h),h._created=!0));q="type:"+e.type;if(0>h.includes.indexOf(q)){h.includes.push(q);e.$library=f;e.section=h;e._paletteItemGroup=this._paletteItemGroupCount++;h.items.push(e);q=null;w=this.getChildren();for(r=0;r<w.length;r++){var u=w[r];if("davinci.ve.palette.PaletteFolder"==
u.declaredClass&&u.presetId==n&&"$$UserWidgets$$"==u.section.id){q=u;break}}q&&(q.domNode.style.display="none",h={displayName:e.$library._maqGetString(e.type)||e.$library._maqGetString(e.name)||e.name,description:e.$library._maqGetString(e.type+"_description")||e.$library._maqGetString(e.name+"_description")||e.description||e.type,name:e.name,paletteId:this.id,type:e.type,data:e.data||{name:e.name,type:e.type,properties:e.properties,children:e.children},tool:e.tool,category:"custom",section:h,PaletteFolderSection:q,
PaletteFolderSubsection:null,_paletteItemGroup:e._paletteItemGroup,_paletteGroupSelected:!0},this._setIconProperties(e,h),this._createItem(h,q).domNode.style.display="none",c==n&&(b=q))}}else console.error("Palette.js:addCustomWidget - no sections for comptype\x3d"+n)}}b&&b.showHideFolderContents(!0)}},setContext:function(a){this._context=a;try{this._loadPalette()}catch(c){console.error("_loadPalette:crash "+c)}this._filter();this.updatePaletteVisibility()},refresh:function(){delete this._loaded;
this._presetSections={};this._createFolderTemplate();this._createHeader();if(this._context)try{this._loadPalette()}catch(a){console.error("_loadPalette:crash")}},_loadPalette:function(){if(!this._loaded){var a=A.getLibrary(),c={};v.getUserLibs(d.getProject()).forEach(function(d){var f;a:{f=d.id;d=d.version;for(var b in a)if(a.hasOwnProperty(b)){var g=a[b];if(g.name===f&&g.version===d){d={};d[f]=a[b];f=d;break a}}f=null}f&&dojo.mixin(c,f)});var f={},b=[],k;for(k in c)if(c.hasOwnProperty(k)){var e=
c[k].$wm;e&&dojo.forEach(e.widgets,function(a){"untested"==a.category||a.hidden||b.push(a.type)})}this._paletteItemGroupCount=0;if(this._widgetPalette=g.getSiteConfigData("widgetPalette"))if((k=this._widgetPalette.presets)&&"object"==typeof k)for(var n in k){e=b.concat();this._presetSections[n]=[];var h=k[n],q,w="string"==typeof h.sections?this._widgetPalette.defs?this._widgetPalette.defs[h.sections]:void 0:h.sections;if(w&&w.length){var r=[],u;for(u in f){var z=f[u];z.descriptor&&r.push({name:u,
value:z})}r.sort(function(a,c){var d=a.name.split("/").pop().toLowerCase(),f=c.name.split("/").pop().toLowerCase();return d<f?-1:d>f?1:0});for(var z=!1,m,y=0;y<r.length;y++){z||(u=dojo.clone(this._userWidgetSection),w=w.concat(u),z=!0,m=u.includes);var B=r[y].value.descriptor.widgets;for(u=0;u<B.length;u++)m.push("type:"+B[u].type)}for(r=0;r<w.length;r++){z=dojo.clone("string"==typeof w[r]?this._widgetPalette.defs?this._widgetPalette.defs[w[r]]:void 0:w[r]);z.preset=h;z.presetId=n;if(z.subsections&&
z.subsections.length)for(y=z.subsections,B=0;B<y.length;B++){if("string"==typeof y[B]){var x=this._widgetPalette.defs?this._widgetPalette.defs[y[B]]:void 0;x&&(y[B]=dojo.clone(x))}x=y[B];x.includes&&0<=x.includes.indexOf("$$AllOthers$$")&&(q=x);x.preset=h;x.presetId=n;this._createSectionItems(x,h,e)}else this._createSectionItems(z,h,e),z.includes&&0<=z.includes.indexOf("$$AllOthers$$")&&(q=z);this._presetSections[n].push(z)}}else console.warning("No sections defined for preset "+n+" in widgetPalette.json (in siteConfig folder)");
for(h=0;h<e.length;h++)w=e[h],q&&(w=A.getWidgetDescriptorForType(w),w=dojo.clone(w),this._prepareSectionItem(w,q,this._paletteItemGroupCount),q.items.push(w),this._paletteItemGroupCount++)}else console.warning("No presets defined in widgetPalette.json (in siteConfig folder)");else console.error("widgetPalette.json not defined (in siteConfig folder)");this._loaded=!0}},_generateCssRules:function(a){var c=dojo.doc.styleSheets[0];c&&dojo.forEach(a,function(a){a.items&&dojo.forEach(a.items,function(a){var d=
a.iconBase64||this._getIconUri(a.icon,"ve/resources/images/file_obj.gif");a="img.davinci_"+a.type.replace(/[\.\/]/g,"_");d="{background-image: url("+d+")}";dojo.isIE?c.addRule(a,d):c.insertRule(a+d,c.cssRules.length)},this)},this)},_createPaletteItemsForComponent:function(a,c){if(a.items){var d=null;dojo.forEach(a.items,function(f){if(!f.hidden){var b={displayName:f.$library._maqGetString(f.type)||f.$library._maqGetString(f.name)||f.name,description:f.$library._maqGetString(f.type+"_description")||
f.$library._maqGetString(f.name+"_description")||f.description||f.type,name:f.name,paletteId:this.id,type:f.type,data:f.data||{name:f.name,type:f.type,properties:f.properties,children:f.children},category:a.name,section:a,preset:a.preset,presetId:a.presetId,presetClassName:c.presetClassName,PaletteFolderSection:c.PaletteFolderSection,PaletteFolderSubsection:c.PaletteFolderSubsection,_paletteItemGroup:f._paletteItemGroup,_paletteGroupSelected:f._paletteItemGroup!=d,_collectionName:f.$library&&f.$library.collections&&
f.$library.collections[f.collection]&&f.$library.collections[f.collection].name,ignoreMeta:f.ignoreMeta,userData:f.userData,forceShow:f.forceShow,iconHTML:f.iconHTML};this._setIconProperties(f,b);this._createItem(b);d=f._paletteItemGroup}},this)}},_createPalette:function(a){var c=a.presetId?this._presetClassNamePrefix+a.presetId:null,d={paletteId:this.id,icon:this._getIconUri(a.icon,"ve/resources/images/fldr_obj.gif"),iconBase64:a.iconBase64,displayName:a.name,section:a,subsections:a.subsections,
subsection_container:null,preset:a.preset,presetId:a.presetId,presetClassName:c};this._createFolder(d).then(function(d){if(a.subsections&&a.subsections.length)for(var f=0;f<a.subsections.length;f++){var b=a.subsections[f],b={paletteId:this.id,icon:this._getIconUri(b.icon,"ve/resources/images/fldr_obj.gif"),iconBase64:b.iconBase64,displayName:b.name,section:a,subsection:b,subsection_container:d,preset:a.preset,presetId:a.presetId,presetClassName:c};this._createFolder(b).then(function(b){d._children.push(b);
this._createPaletteItemsForComponent(a.subsections[f],{presetClassName:c,PaletteFolderSection:d,PaletteFolderSubsection:b})}.bind(this))}else this._createPaletteItemsForComponent(a,{presetClassName:c,PaletteFolderSection:d,PaletteFolderSubsection:null})}.bind(this))},_getIconUri:function(a,c){return a?0==a.indexOf("http")?a:d.location()+a:require.toUrl("davinci/"+c)},_createFolder:function(c){var d=new a;require(["davinci/ve/palette/PaletteFolder"],function(a){a=new a(c);this.addChild(a);d.resolve(a)}.bind(this));
return d},_createFolderTemplate:function(){this.folderTemplate=dojo.create("div",{className:"dojoyPaletteCommon dojoyPaletteFolder dojoyPaletteFolderLow ui-widget-header",innerHTML:'\x3ca href\x3d"javascript:void(0)"\x3e\x3cimg border\x3d"0"/\x3e\x3c/a\x3e'})},_createHeader:function(){},_updateShowAllWidgetsPreference:function(a){var c=d.getProject(),f=I.getPreferences("davinci.ve.editorPrefs",c);f.showAllWidgets=a;I.savePreferences("davinci.ve.editorPrefs",c,f)},_updateShowAllWidgetsMenu:function(a){},
_clearFilter:function(){this.filterField&&this.filterField.set("value","");this._filter()},_filter:function(){var a=this.context.getCompType(),c=I.getPreferences("davinci.ve.editorPrefs",d.getProject());c.showAllWidgets=!0;c.showAllWidgets&&(a="mobile"==a?"$ALLMOBILE":"$ALLDESKTOP");dojo.removeClass(this.domNode,"maqWidgetsFiltered");this.toolbarDiv&&dojo.removeClass(this.toolbarDiv,"maqWidgetsToolbarFiltered");this.getChildren().forEach(function(c){"dijit.form.TextBox"!=c.declaredClass&&dojo.style(c.domNode,
"display","davinci.ve.palette.PaletteFolder"===c.declaredClass&&c.presetId==a&&0<c._children.length&&("simple"==c._type||"subsection_container"==c._type)?"block":"none")})},_hasItem:function(a){for(var c=this.getChildren(),d=0;d<c.length;d++)if(c[d].type==a)return!0;return!1},_createItem:function(a,c){if("$$UserWidgets$$"!=a.section.id){var d=A.queryDescriptor(a.type,"collection"),f;if(a.preset&&(f=a.preset.collections,!f||!f.length)){console.error("_create item : presetCollections.l\x3d0");return}if(a.preset&&
a.preset.exclude){var g="string"==typeof a.preset.exclude?this._widgetPalette.defs?this._widgetPalette.defs[a.preset.exclude]:void 0:a.preset.exclude;if(g&&0<=g.indexOf(a.type)){console.error("_create item : exclude \x3d 1");return}}g=!1;if(f&&f.length){for(var k=0;k<f.length;k++)if(f[k].id==d&&f[k].show){g=!0;break}!0===a.ignoreMeta&&(g=!0);if(!g)return}}a.icon=a.iconLarge;d=new u(a);c?c.addChild(d):this.addChild(d);a.paletteItem=d;a.PaletteFolderSubsection?(a.PaletteFolderSubsection._children.push(d),
d.domNode.style.display=a.PaletteFolderSubsection._isOpen&&d._paletteGroupSelected?this._displayShowValue:"none"):a.PaletteFolderSection&&(a.PaletteFolderSection._children.push(d),d.domNode.style.display=a.PaletteFolderSection._isOpen&&d._paletteGroupSelected?this._displayShowValue:"none");f=b(".paletteItemImageContainer",d.domNode)[0];f=new y(d.domNode,"component",d,f);f.targetShouldShowCaret=!0;f.returnCloneOnFailure=!1;this.connect(f,"onDragStart",dojo.hitch(this,function(a){this.onDragStart(a)}));
this.connect(f,"onDragEnd",dojo.hitch(this,function(a){this.onDragEnd(a)}));a.forceShow&&(d.domNode.style.display="inline-block");return d},_prepareSectionItem:function(a,c,d){var f=A.getLibraryMetadataForType(a.type);a.$library=f;a.section=c;a._paletteItemGroup=d},_createSectionItems:function(a,c,d){a.items=[];collections=c.collections;var f=a.includes;if(!f||!f.length)return console.error("No includes property for preset "+c+" in widgetPalette.json (in siteConfig folder)"),[];for(c=0;c<f.length;c++){for(var b=
f[c],g=m.isArray(b)?b:[b],b=[],k=0;k<g.length;k++){var e=g[k],n=[];if("type:"===e.substr(0,5)){var h=A.getWidgetDescriptorForType(e.substr(5));h&&n.push(h)}else n=A.getWidgetsWithTag(e);for(e=0;e<n.length;e++)h=n[e],h=dojo.clone(h),this._prepareSectionItem(h,a,this._paletteItemGroupCount),b.push(h)}g=[];if(collections&&collections.length){for(n=0;n<collections.length;n++)for(e=collections[n],k=0;k<b.length;)h=b[k],h.collection==e.id?(g.push(h),b.splice(k,1)):k++;for(k=0;k<b.length;k++)g.push(b[k])}else g=
b;for(k=0;k<g.length;k++)b=g[k],n=d.indexOf(b.type),0<=n&&d.splice(n,1),a.items.push(b);this._paletteItemGroupCount++}},updatePaletteVisibility:function(){this._clearFilter();this._updateShowAllWidgetsMenu();var a=g.currentEditor.getContext().getCompType();this._presetCreated[a]=!0;dojo.addClass(this.domNode,"paletteLayoutIcons");this._displayShowValue="inline-block";var c=this._presetSections[a];if(c)for(var d=0;d<c.length;d++){var f=c[d];f._created||(this._generateCssRules([f]),this._createPalette(f),
f._created=!0)}c=this.getChildren();d=0;for(f=c.length;d<f;d++){var b=c[d];b&&b.domNode&&b.presetId&&("davinci.ve.palette.PaletteFolder"==b.declaredClass?(b.domNode.style.display=b.presetId==a?0==b._children.length||"subsection"==b._type?"none":"block":"none","subsubsection_container"==b._type&&(b._openSubsection=null),b._isOpen=!1):b.domNode.style.display=b.forceShow?"inline-block":"none")}},preferencesChanged:function(){for(var a=I.getPreferences("davinci.ve.editorPrefs",d.getProject()),a=a.widgetPaletteLayout&&
"icons"!=a.widgetPaletteLayout?"icon":"iconLarge",c=this.getChildren(),f=0;f<c.length;f++){var b=c[f];"davinci.ve.palette.PaletteItem"==b.declaredClass&&b.updateImgSrc(b[a])}this.updatePaletteVisibility()},flattenAll:function(){for(var a=0;a<this.raisedItems.length;a++)this.raisedItems[a].flat(this.raisedItems[a].domNode);this.raisedItems=[];for(a=0;a<this.sunkenItems.length;a++){var c=this.sunkenItems[a];c._tooltipDialog&&(c.paletteItemMoreCloseCleanup(),c.paletteItemHelpCloseCleanup());c.flat(c.domNode);
c._selectionShowing=!1}this.sunkenItems=[]},removeSelectionAll:function(){try{this.flattenAll()}catch(a){console.error("flatten failed")}for(var c=b(".paletteItemSelectionContent",this.domNode),d=0;d<c.length;d++){var f=c[d];f&&f.parentNode&&(f.parentNode.innerHTML="")}},getPaletteItemsSameGroup:function(a){for(var c=[],d=a._paletteItemGroup,f;a&&a._paletteItemGroup;)if(a._paletteItemGroup==d)a=(f=a)&&a.domNode&&a.domNode.previousSibling&&a.domNode.previousSibling._paletteItem;else break;for(a=f;a&&
a._paletteItemGroup==d;)c.push(a),a=a&&a.domNode&&a.domNode.nextSibling&&a.domNode.nextSibling._paletteItem;return c},_setIconProperties:function(a,c){c.icon=a.iconBase64||a.icon&&this._getIconUri(a.icon,"ve/resources/images/file_obj.gif")||a.iconLargeBase64||a.iconLarge&&this._getIconUri(a.iconLarge,"ve/resources/images/file_obj.gif")||this._getIconUri(a.icon,"ve/resources/images/file_obj.gif");c.iconLarge=a.iconLargeBase64||a.iconLarge&&this._getIconUri(a.iconLarge,"ve/resources/images/file_obj.gif")||
a.iconBase64||this._getIconUri(a.icon,"ve/resources/images/file_obj.gif")},onDragStart:function(a){this.removeSelectionAll();this.selectedItem=null;var c=a.dragSource.data;A.getHelper(c.type,"tool").then(function(a){a=new (a||C)(dojo.clone(c.data),c.userData);this._context.setActiveTool(a)}.bind(this));this._context.blockChange(!1);a._dragClone&&(k.add(a._dragClone,"paletteDragContainer"),dojo.create("div",{className:"maqCandidateParents"},a._dragClone));this._context.setActiveDragDiv(a._dragClone);
this._dragKeyDownListener=dojo.connect(document,"onkeydown",dojo.hitch(this,function(a){var c=this._context.getActiveTool();if(c&&c.onKeyDown)c.onKeyDown(a)}));this._dragKeyUpListener=dojo.connect(document,"onkeyup",dojo.hitch(this,function(a){var c=this._context.getActiveTool();if(c&&c.onKeyUp)c.onKeyUp(a)}))},onDragEnd:function(a){this._context.setActiveTool(null);this._context.setActiveDragDiv(null);dojo.disconnect(this._dragKeyDownListener);dojo.disconnect(this._dragKeyUpListener);f.curNode&&
f.curNode.blur&&f.curNode.blur();this.removeSelectionAll();this.selectedItem=null;this.flattenAll()},onDragMove:function(a){},nop:function(){return!1},__dummy__:null})})},"davinci/ui/dnd/DragSource":function(){define(["dojo/_base/declare","dojo/fx"],function(p,m){return p("davinci.ui.dnd.DragSource",null,{disabled:!1,dragObject:null,dragClone:null,offsetParent:null,offsetParentCoords:null,parentCoords:null,refNode:null,positioning:null,useCurrentPositioning:!0,targetShouldShowCaret:!1,draggingMousePosition:"TopLeft",
data:null,returnCloneOnFailure:!0,constructor:function(h,e,b,k){this.data=b;h=dojo.byId(h);h.dragSource=this;this.domNode=h;this.dragObject=k?k:h;this.refNode=h;this.type=e;this.offsetParent=dojo.doc.body},onDragDown:function(h){this.useCurrentPositioning&&(this.positioning=dojo.style(this.refNode,"position"));this.storeMouseDownInfo(h);this.initDrag(h)},onDragStart:function(h){this.createDragClone(h);return h._dragClone=this.dragClone},onDragMove:function(h){"TopLeft"==this.draggingMousePosition?
(this.dragClone.style.top=h.pageY+4+(h.documentY||0)+"px",this.dragClone.style.left=h.pageX+4+(h.documentX||0)+"px"):"ClickedPosition"==this.draggingMousePosition&&(this.dragClone.style.top=h.pageY-this.dragOffset.y+(h.documentY||0)+"px",this.dragClone.style.left=h.pageX-this.dragOffset.x+(h.documentX||0)+"px");"none"==this.dragClone.style.display&&(this.dragClone.style.display="")},onDragEnd:function(h){"dropSuccess"!=h.dragStatus&&this.returnCloneOnFailure?"dropFailure"==h.dragStatus?this.returnClone():
console.error("DragSource#onDragEnd: internal error: e.dragStatus is not set"):this.removeClone();this.cleanupDrag()},unregister:function(){this.domNode.dragSource=null;this.cleanupDrag()},reregister:function(){this.domNode.dragSource=this;this.initDrag()},storeMouseDownInfo:function(h){this.layerX=h.layerX-1;this.layerY=h.layerY-1;this.pageX=h.pageX;this.pageY=h.pageY;this.scrollOffset=dojo._docScroll();window.__x&&window.__x.apply(this);this.dragStartPosition=dojo.position(this.refNode,!0);this.dragStartCssPosition=
{y:this.refNode.offsetTop,x:this.refNode.offsetLeft};this.dragOffset={y:h.pageY-this.dragStartPosition.y,x:h.pageX-this.dragStartPosition.x};this.offsetParentCoords=dojo.position(this.offsetParent,!0);h=dojo.position(this.domNode.parentNode,!0);this.parentCoords={y:h.y-this.offsetParentCoords.y,x:h.x-this.offsetParentCoords.x};this.fixMouseDownInfo&&this.fixMouseDownInfo(this)},initDrag:function(){},cleanupDrag:function(){},createDragClone:function(h){this.dragClone=h=h.dragSource.dragHandler&&h.dragSource.dragHandler.createDragClone?
h.dragSource.dragHandler.createDragClone():this.dragObject.cloneNode(!0);dojo.style(h,"opacity",.5);h.style.zIndex=1001E3;var e=dojo.contentBox(this.dragObject);h.style.width=e.w+"px";h.style.height=e.h+"px";h.style.top=this.dragObject.offsetTop+4+"px";h.style.left=this.dragObject.offsetLeft+4+"px";h.style.position="absolute";h.style.clear="both";h.style.display="none";this.offsetParent.appendChild(h)},setDragTarget:function(h){this.dragObject=h},cancelEvent:function(h){h.stopPropagation();h.preventDefault()},
removeClone:function(){setTimeout(dojo.hitch(this,"removeClone_1"),0)},removeClone_1:function(){try{this.dragClone.parentNode.removeChild(this.dragClone),this.dragClone=null}catch(h){logError(h)}},returnClone:function(){var h=dojo.position(this.dragClone,!0),e=this.dragStartPosition,b=this;m.slideTo({node:this.dragClone,top:h.y>e.y?e.y-10:e.y+10,left:h.x>e.x?e.x-10:e.x+10,duration:400,onEnd:function(){m.slideTo({node:b.dragClone,top:e.y,left:e.x,duration:100,onEnd:function(){b.dragClone.parentNode.removeChild(b.dragClone);
b.dragClone=null;b.onCloneReturned()}}).play()}}).play()},onCloneReturned:function(){},globalChangeCursor:function(h){var e=dojo.doc.styleSheets[0];if(e)if(h){if(this._showingCursor){if(this._showingCursor==h)return;this.globalChangeCursor(null)}this._showingCursor=h;this._ruleIndex=e.cssRules.length;e.insertRule("*{cursor:"+h+" ! important;}",e.cssRules.length)}else this._showingCursor&&(this._showingCursor=null,e.deleteRule(this._ruleIndex))}})})},"dojo/fx":function(){define("./_base/lang ./Evented ./_base/kernel ./_base/array ./aspect ./_base/fx ./dom ./dom-style ./dom-geometry ./ready require".split(" "),
function(p,m,h,e,b,k,a,f,n,g,d){h.isAsync||g(0,function(){d(["./fx/Toggler"])});h=h.fx={};g={_fire:function(a,c){this[a]&&this[a].apply(this,c||[]);return this}};var c=function(a){this._index=-1;this._animations=a||[];this._current=this._onAnimateCtx=this._onEndCtx=null;this.duration=0;e.forEach(this._animations,function(a){this.duration+=a.duration;a.delay&&(this.duration+=a.delay)},this)};c.prototype=new m;p.extend(c,{_onAnimate:function(){this._fire("onAnimate",arguments)},_onEnd:function(){this._onAnimateCtx.remove();
this._onEndCtx.remove();this._onAnimateCtx=this._onEndCtx=null;this._index+1==this._animations.length?this._fire("onEnd"):(this._current=this._animations[++this._index],this._onAnimateCtx=b.after(this._current,"onAnimate",p.hitch(this,"_onAnimate"),!0),this._onEndCtx=b.after(this._current,"onEnd",p.hitch(this,"_onEnd"),!0),this._current.play(0,!0))},play:function(a,c){this._current||(this._current=this._animations[this._index=0]);if(!c&&"playing"==this._current.status())return this;var d=b.after(this._current,
"beforeBegin",p.hitch(this,function(){this._fire("beforeBegin")}),!0),f=b.after(this._current,"onBegin",p.hitch(this,function(a){this._fire("onBegin",arguments)}),!0),g=b.after(this._current,"onPlay",p.hitch(this,function(a){this._fire("onPlay",arguments);d.remove();f.remove();g.remove()}));this._onAnimateCtx&&this._onAnimateCtx.remove();this._onAnimateCtx=b.after(this._current,"onAnimate",p.hitch(this,"_onAnimate"),!0);this._onEndCtx&&this._onEndCtx.remove();this._onEndCtx=b.after(this._current,
"onEnd",p.hitch(this,"_onEnd"),!0);this._current.play.apply(this._current,arguments);return this},pause:function(){if(this._current){var a=b.after(this._current,"onPause",p.hitch(this,function(c){this._fire("onPause",arguments);a.remove()}),!0);this._current.pause()}return this},gotoPercent:function(a,c){this.pause();var d=this.duration*a;this._current=null;e.some(this._animations,function(a){if(a.duration<=d)return this._current=a,!0;d-=a.duration;return!1});this._current&&this._current.gotoPercent(d/
this._current.duration,c);return this},stop:function(a){if(this._current){if(a){for(;this._index+1<this._animations.length;++this._index)this._animations[this._index].stop(!0);this._current=this._animations[this._index]}var c=b.after(this._current,"onStop",p.hitch(this,function(a){this._fire("onStop",arguments);c.remove()}),!0);this._current.stop()}return this},status:function(){return this._current?this._current.status():"stopped"},destroy:function(){this._onAnimateCtx&&this._onAnimateCtx.remove();
this._onEndCtx&&this._onEndCtx.remove()}});p.extend(c,g);h.chain=function(a){return new c(a)};var q=function(a){this._animations=a||[];this._connects=[];this.duration=this._finished=0;e.forEach(a,function(a){var c=a.duration;a.delay&&(c+=a.delay);this.duration<c&&(this.duration=c);this._connects.push(b.after(a,"onEnd",p.hitch(this,"_onEnd"),!0))},this);this._pseudoAnimation=new k.Animation({curve:[0,1],duration:this.duration});var c=this;e.forEach("beforeBegin onBegin onPlay onAnimate onPause onStop onEnd".split(" "),
function(a){c._connects.push(b.after(c._pseudoAnimation,a,function(){c._fire(a,arguments)},!0))})};p.extend(q,{_doAction:function(a,c){e.forEach(this._animations,function(d){d[a].apply(d,c)});return this},_onEnd:function(){++this._finished>this._animations.length&&this._fire("onEnd")},_call:function(a,c){var d=this._pseudoAnimation;d[a].apply(d,c)},play:function(a,c){this._finished=0;this._doAction("play",arguments);this._call("play",arguments);return this},pause:function(){this._doAction("pause",
arguments);this._call("pause",arguments);return this},gotoPercent:function(a,c){var d=this.duration*a;e.forEach(this._animations,function(a){a.gotoPercent(a.duration<d?1:d/a.duration,c)});this._call("gotoPercent",arguments);return this},stop:function(a){this._doAction("stop",arguments);this._call("stop",arguments);return this},status:function(){return this._pseudoAnimation.status()},destroy:function(){e.forEach(this._connects,function(a){a.remove()})}});p.extend(q,g);h.combine=function(a){return new q(a)};
h.wipeIn=function(c){var d=c.node=a.byId(c.node),g=d.style,e;c=k.animateProperty(p.mixin({properties:{height:{start:function(){e=g.overflow;g.overflow="hidden";if("hidden"==g.visibility||"none"==g.display)return g.height="1px",g.display="",g.visibility="",1;var a=f.get(d,"height");return Math.max(a,1)},end:function(){return d.scrollHeight}}}},c));var n=function(){g.height="auto";g.overflow=e};b.after(c,"onStop",n,!0);b.after(c,"onEnd",n,!0);return c};h.wipeOut=function(c){var d=(c.node=a.byId(c.node)).style,
f;c=k.animateProperty(p.mixin({properties:{height:{end:1}}},c));b.after(c,"beforeBegin",function(){f=d.overflow;d.overflow="hidden";d.display=""},!0);var g=function(){d.overflow=f;d.height="auto";d.display="none"};b.after(c,"onStop",g,!0);b.after(c,"onEnd",g,!0);return c};h.slideTo=function(c){var d=null,g=null,e=function(a){return function(){var c=f.getComputedStyle(a),b=c.position;d="absolute"==b?a.offsetTop:parseInt(c.top)||0;g="absolute"==b?a.offsetLeft:parseInt(c.left)||0;"absolute"!=b&&"relative"!=
b&&(c=n.position(a,!0),d=c.y,g=c.x,a.style.position="absolute",a.style.top=d+"px",a.style.left=g+"px")}}(c.node=a.byId(c.node));e();c=k.animateProperty(p.mixin({properties:{top:c.top||0,left:c.left||0}},c));b.after(c,"beforeBegin",e,!0);return c};return h})},"davinci/ve/palette/PaletteFolder":function(){define("dojo/_base/declare dijit/_WidgetBase dojo/dom-class dojo/fx davinci/Runtime davinci/ve/metadata".split(" "),function(p,m,h,e,b,k){return p("davinci.ve.palette.PaletteFolder",m,{icon:"",displayName:"",
paletteId:"",palette:null,preset:null,presetId:null,presetClassName:null,_type:"",_isOpen:!1,_openSubsection:null,buildRendering:function(){this.palette=dijit.byId(this.paletteId);var a=this.domNode=this.palette.folderTemplate.cloneNode(!0);this.presetClassName&&h.add(a,this.presetClassName);var f="PaletteFolder__"+this.presetId+"__"+this.section.id;this.subsection&&(f+="__"+this.subsection.id);dojo.attr(a,"selType",f);f=a.firstChild;dojo.attr(f,"tabIndex","0");f.onclick=this.palette.nop;f.firstChild.src=
this.iconBase64?this.iconBase64:this.icon;f.appendChild(dojo.doc.createTextNode(this.displayName));a._paletteFolder=this;this._type=this.subsections?"subsection_container":this.subsection?"subsection":"simple";"subsection"==this._type&&h.add(a,"PaletteFolderSubsection");this._children=[]},postCreate:function(){this.connect(this.domNode,"onmouseover","folderMouseOverHandler");this.connect(this.domNode,"onmouseout","folderMouseOutHandler");this.connect(this.domNode,"onclick","folderClickHandler")},
startup:function(){},isFocusable:function(){return!0},focus:function(){dijit.focus(this.domNode)},addChild:function(a){for(var f=this.palette.getChildren(),b=0,g=f.length;b<g;b++)if(f[b]==this)return this.palette.addChild(a,b+1),!0;return!1},_paletteItemGroupInfo:function(a,f){var b={},g=f,d=a[g],c=d._paletteItemGroup;do{d._paletteGroupSelected&&(b.selectedIndex=g);g++;if(g>=a.length)break;d=a[g]}while("davinci.ve.palette.PaletteItem"==d.declaredClass&&d._paletteItemGroup===c);"number"!=typeof b.selectedIndex&&
(b.selectedIndex=f,a[f]._paletteGroupSelected=!0);b.endIndex=g-1;return b},folderClickHandler:function(a){this.showHideFolderContents()},showHideFolderContents:function(a){for(var f=this.palette.getChildren(),b=0,g=f.length;b<g;){var d=f[b];if(d==this){"none"==this.domNode.style.display&&e.wipeIn({node:this.domNode,duration:100}).play();if("subsection_container"==this._type)for(this._isOpen="boolean"==typeof a?a:!this._isOpen,d=b+1;d<g;d++)if(b=f[d],"davinci.ve.palette.PaletteFolder"==b.declaredClass){if("subsection"!=
b._type)break;0==b._children.length?(b.domNode.style.display="none",b.isOpen=!1):this._isOpen?(e.wipeIn({node:b.id,duration:100}).play(),b._isOpen=b==b.subsection_container._openSubsection):(e.wipeOut({node:b.id,duration:100}).play(),b.isOpen=!1)}else this._isOpen&&b.PaletteFolderSubsection._isOpen?e.wipeIn({node:b.id,duration:100,onEnd:function(a){setTimeout(function(){a.style.height=""},1)}.bind(this,b.domNode)}).play():b.domNode.style.display="none";else for(this._isOpen="boolean"==typeof a?a:
!this._isOpen,"subsection"==this._type&&(this.subsection_container._openSubsection=this._isOpen?this:null),d=b+1;d<g;){b=f[d];if("davinci.ve.palette.PaletteItem"!=b.declaredClass)break;for(b=this._paletteItemGroupInfo(f,d);d<=b.endIndex;d++){var c=f[d],h=k.getWidgetDescriptorForType(c.type),w;h||(w=!0);if(h&&"custom"==h.category)w=!0;else if(h=h&&h.collection,w=!1,c.preset&&c.preset.collections)for(var r=c.preset.collections,m=0;m<r.length;m++){var y=r[m];if(y.id&&y.id===h){w=y.show;break}}d==b.selectedIndex&&
w?this._isOpen?e.wipeIn({node:c.id,duration:100,onEnd:function(a){setTimeout(function(){a.style.height=""},1)}.bind(this,c.domNode)}).play():e.wipeOut({node:c.id,duration:100}).play():c.domNode.style.display="none"}}b=d}else"davinci.ve.palette.PaletteItem"==d.declaredClass&&"none"!=d.domNode.style.display&&e.wipeOut({node:d.id,duration:100}).play(),"davinci.ve.palette.PaletteFolder"!=d.declaredClass||"simple"!=d._type&&"subsection"!=d._type||(d._isOpen=!1),"davinci.ve.palette.PaletteFolder"==d.declaredClass&&
"subsection_container"==d._type&&d!=this.subsection_container&&(d._isOpen=!1),"davinci.ve.palette.PaletteFolder"!=d.declaredClass||"subsection"!=d._type||d.subsection_container._isOpen||"none"==d.domNode.style.display||(e.wipeOut({node:d.id,duration:100}).play(),d._isOpen=!1),b++}return!1},folderMouseOverHandler:function(a){dojo.removeClass(this.domNode,"dojoyPaletteFolderLow");dojo.addClass(this.domNode,"dojoyPaletteFolderHi")},folderMouseOutHandler:function(a){dojo.removeClass(this.domNode,"dojoyPaletteFolderHi");
dojo.addClass(this.domNode,"dojoyPaletteFolderLow")}})})},"davinci/ve/palette/PaletteItem":function(){define("dojo/_base/declare dojo/on dojo/_base/event dojo/query dojo/dom-construct dojo/dom-geometry dijit/focus dijit/_WidgetBase dojo/dom-class dojox/html/entities dijit/popup dijit/Tooltip dijit/TooltipDialog davinci/ve/tools/CreateTool davinci/ui/dnd/DragManager davinci/ve/utils/GeomUtils davinci/ve/metadata davinci/_common".split(" "),function(p,m,h,e,b,k,a,f,n,g,d,c,q,w,r,B,y,A){return p("davinci.ve.palette.PaletteItem",
f,{icon:"",displayName:"",name:"",paletteId:"",type:"",data:null,tool:"",palette:null,category:"",template:'\x3ca href\x3d"javascript:void(0)"\x3e\x3cspan class\x3d"paletteItemSelectionContainer"\x3e\x3c/span\x3e\x3cspan class\x3d"paletteItemNormalContainer"\x3e\x3cspan class\x3d"paletteItemImageContainer"\x3e\x3cimg class\x3d"paletteItemImage" border\x3d"0"/\x3e\x3c/span\x3e\x3cspan class\x3d"paletteItemLabelContainer"\x3e\x3cspan class\x3d"paletteItemLabel"\x3e\x3c/span\x3e\x3c/span\x3e\x3c/span\x3e\x3c/a\x3e',
selectedWidgetTemplate:'\x3cspan class\x3d"paletteItemSelectionContent"\x3e\x3cspan class\x3d"paletteItemSelectedStrip paletteItemSelectedStripV paletteItemSelectedStripL"\x3e\x3c/span\x3e\x3cspan class\x3d"paletteItemSelectedStrip paletteItemSelectedStripV paletteItemSelectedStripR"\x3e\x3c/span\x3e\x3cspan class\x3d"paletteItemSelectedStrip paletteItemSelectedStripH paletteItemSelectedStripT"\x3e\x3c/span\x3e\x3cspan class\x3d"paletteItemSelectedStrip paletteItemSelectedStripH paletteItemSelectedStripB"\x3e\x3c/span\x3e\x3cspan class\x3d"paletteItemSelectedIcon paletteItemSelectedMoreIcon" title\x3d"'+
A.MoreIconTitleString+'"\x3e\x3c/span\x3e\x3cspan class\x3d"paletteItemSelectedIcon paletteItemSelectedHelpIcon" title\x3d"'+A.HelpIconTitleString+'"\x3e\x3c/span\x3e\x3c/span\x3e',preset:null,presetId:null,presetClassName:null,_paletteItemGroup:null,_collectionName:null,_paletteItemMoreConnects:[],_paletteItemHelpConnects:[],item:null,constructor:function(a){this.item=a},buildRendering:function(){this.palette=dijit.byId(this.paletteId);var a=this.domNode=dojo.create("div",{className:"dojoyPaletteCommon dojoyPaletteItem"});
a.innerHTML=this.template;a._paletteItem=this;this.presetClassName&&n.add(a,this.presetClassName);var c=this.type+"__"+this.presetId+"__"+this.PaletteFolderSection.section.id;this.PaletteFolderSubsection&&(c+="__"+this.PaletteFolderSubsection.subsection.id);dojo.attr(a,"selType",c);a=a.firstChild;dojo.attr(a,"tabIndex","0");a.onclick=this.palette.nop;c=a.querySelector("img");this.item&&this.item.iconHTML?(dojo.destroy(c),a.querySelector(".paletteItemImageContainer").innerHTML=this.item.iconHTML):
c.src=this.icon;a=a.querySelector(".paletteItemLabel");a.appendChild(dojo.doc.createTextNode(this.displayName));for(var c=g.encode(a.textContent),d=c.length-1;0<d;d--)0<="_-".indexOf(c[d])?(c=c.substr(0,d+1)+"\x26#8203;"+c.substr(d+1),a.innerHTML=c):c[d].toLowerCase()!=c[d]&&(c=c.substr(0,d)+"\x26#8203;"+c.substr(d),a.innerHTML=c);this.domNode.componentClassName=this.name;dojo.setSelectable(this.domNode,!1)},postCreate:function(){var a=e(".paletteItemNormalContainer",this.domNode)[0];this.connect(a,
"onmouseover","itemMouseOverHandler");this.connect(a,"onmouseout","itemMouseOutHandler");this.connect(this.domNode,"onmousedown","itemMouseDownHandler");this.connect(this.domNode,"onmouseup","itemMouseUpHandler");this.connect(this.domNode,"onkeydown","itemKeyDownHandler")},startup:function(){},isFocusable:function(){return"none"!=dojo.style(this.domNode,"display")},focus:function(){dijit.focus(this.domNode)},itemMouseOverHandler:function(a){this._mouseover=!0;a=this.domNode;this.palette.selectedItem!=
this&&this.raised(a);setTimeout(function(){if(this._mouseover&&0==this.palette.moreItems.length&&0==this.palette.helpItems.length&&this._tooltipNode!=this.domNode){this._tooltipNode&&dijit.hideTooltip(this._tooltipPos);this._tooltipNode=this.domNode;this._tooltipPos=k.position(this.domNode,!0);var a;a='\x3cdiv class\x3d"paletteTooltip"\x3e'+('\x3cdiv class\x3d"paletteTooltipCurrent"\x3e\x3cspan class\x3d"paletteTooltipCurrentWidget"\x3e'+g.encode(this.displayName)+'\x3c/span\x3e \x3cspan class\x3d"paletteTooltipCurrentLibrary"\x3e('+
this._collectionName+")\x3c/span\x3e\x3c/div\x3e");var c=this.palette.getPaletteItemsSameGroup(this);if(1<c.length){a+='\x3cdiv class\x3d"paletteTooltipAlternates"\x3e\x3cspan class\x3d"paletteTooltipAlternatesLabel"\x3e'+A.alternates+': \x3c/span\x3e\x3cspan class\x3d"paletteTooltipAlternatesLibraries"\x3e';for(var d=!1,f=0;f<c.length;f++){var b=c[f];b!=this&&(d&&(a+=", "),a+=b._collectionName,d=!0)}a=a+"\x3c/div\x3e"+('\x3cdiv class\x3d"paletteTooltipNote"\x3e'+A.howToChooseAlternate+"\x3c/div\x3e");
a+="\x3c/div\x3e"}dijit.showTooltip(a,this._tooltipPos);setTimeout(function(){dijit.hideTooltip(this._tooltipPos);this._tooltipPos=this._tooltipNode=null}.bind(this),5E3)}}.bind(this),750)},itemMouseOutHandler:function(a){this._mouseover=!1;this._tooltipPos&&(dijit.hideTooltip(this._tooltipPos),this._tooltipPos=this._tooltipNode=null);a=this.domNode;this.palette.selectedItem==this?this.sunken(a):this.flat(a)},itemMouseDownHandler:function(a){a=this.domNode;this.focus();this.sunken(a);this.palette.selectedItem&&
this.palette.selectedItem!=this&&(this.palette.removeSelectionAll(),this.flat(this.palette.selectedItem.domNode),this.palette.selectedItem=null);r.document=this.palette._context.getDocument();if(a=this.palette._context.frameNode){a=dojo.coords(a);var c=this.palette._context.getContainerNode();r.documentX=a.x-B.getScrollLeft(c);r.documentY=a.y-B.getScrollTop(c)}y.getHelper(this.type,"helper")},itemMouseUpHandler:function(c){c=this.domNode;if(this.palette.selectedItem==this)this.palette.removeSelectionAll(),
this.palette.selectedItem.flat(this.palette.selectedItem.domNode),this.palette.selectedItem=null,this.palette.sunkenItem=null,this.palette.flattenAll(),this.palette._context.setActiveTool(null),a.curNode&&a.curNode==c&&a.curNode.blur&&a.curNode.blur();else{this.palette.selectedItem&&this.palette.selectedItem!=this&&(this.palette.removeSelectionAll(),this.flat(this.palette.selectedItem.domNode),this.palette.selectedItem=null);this.palette.selectedItem=this;this.sunken(c);y.getHelper(this.type,"tool").then(function(a){a=
new (a||w)(dojo.clone(this.data),this.userData);this.palette._context.setActiveTool(a)}.bind(this));var d=function(){this.palette._contextMouseUpHandler&&(this.disconnect(this.palette._contextMouseUpHandler),this.palette._contextMouseUpHandler=null);this.palette._docMouseUpHandler&&(dojo.disconnect(this.palette._docMouseUpHandler),this.palette._docMouseUpHandler=null);this.palette.removeSelectionAll();this.palette.selectedItem=null;this.flat(this.domNode);this.palette._context.dragMoveCleanup()}.bind(this);
this.palette._contextMouseUpHandler=this.connect(this.palette._context,"onMouseUp",function(a){d()}.bind(this));setTimeout(function(){this.palette._docMouseUpHandler=dojo.connect(document,"onmouseup",function(a){var c=!1;if(this.palette.selectedItem){var f=this.palette.selectedItem.domNode;for(a=a.target;a&&"BODY"!=a.tagName;){if(a==f){c=!0;break}a=a.parentNode}}this.palette.selectedItem&&!c&&(d(),this.palette._context.setActiveTool(null))}.bind(this))}.bind(this),0)}},itemKeyDownHandler:function(a){a.keyCode==
dojo.keys.ENTER&&(this.palette.selectedItem&&(this.flat(this.palette.selectedItem.domNode),this.palette.selectedItem=null),y.getHelper(this.type,"tool").then(function(a){a=new (a||w)(dojo.clone(this.data));var c=this.palette._context;c.setActiveTool(a);a.create({target:c.getSelection()[0],position:{x:50,y:50}});c.setActiveTool(null);c.getContainerNode().focus()}),y.getHelper(this.type,"helper"))},flat:function(a){a&&(dojo.removeClass(a,"dojoyPaletteItemRaised"),dojo.removeClass(a,"dojoyPaletteItemSunken"),
dojo.addClass(a,"dojoyPaletteItemFlat"))},raised:function(a){dojo.removeClass(a,"dojoyPaletteItemFlat");dojo.removeClass(a,"dojoyPaletteItemSunken");dojo.addClass(a,"dojoyPaletteItemRaised");this.palette.raisedItems.push(this)},sunken:function(a){dojo.removeClass(a,"dojoyPaletteItemFlat");dojo.removeClass(a,"dojoyPaletteItemRaised");dojo.addClass(a,"dojoyPaletteItemSunken");this.palette.sunkenItems.push(this);this._selectionShowing=!0;e(".paletteItemSelectionContainer",this.domNode)[0].innerHTML=
this.selectedWidgetTemplate;var c=e(".paletteItemSelectedMoreIcon",a)[0],f=this.palette.getPaletteItemsSameGroup(this);1<f.length?(c.style.display="inline-block",m(c,"mousedown, mouseup",function(a){h.stop(a)}),m(c,"click",function(a){h.stop(a);this._tooltipNode&&(dijit.hideTooltip(this._tooltipPos),this._tooltipPos=this._tooltipNode=null);if(this._moreShowing)this.paletteItemMoreCloseCleanup();else{a=b.create("div",{className:"paletteItemMoreContent"});var g=b.create("span",{className:"paletteItemMoreCloseBox"},
a);b.create("div",{className:"paletteItemAlternatesLabel",innerHTML:A.alternateWidgets},a);this._paletteItemMoreConnects.push(m(g,"mousedown, mouseup",function(a){h.stop(a)}.bind(this)));this._paletteItemMoreConnects.push(m(g,"click",function(a){h.stop(a);this.paletteItemMoreCloseCleanup()}.bind(this)));for(var g=b.create("div",{className:"paletteItemAlternatesContainer"},a),k=[],e=0;e<f.length;e++){var n=f[e],r=n._collectionName,n=b.create("button",{className:"paletteItemAlternate "+(n._paletteGroupSelected?
"paletteItemMoreSelected":"paletteItemMoreUnselected"),innerHTML:r},g);k.push(n);this._paletteItemMoreConnects.push(m(n,"mousedown, mouseup",function(a){h.stop(a)}.bind(this)));this._paletteItemMoreConnects.push(m(n,"click",function(a,c){h.stop(c);for(var d,b=0;b<f.length;b++){var g=f[b];if(g._collectionName==a){d=g;break}}if(d){for(b=0;b<f.length;b++)g=f[b],g==d?(g._paletteGroupSelected=!0,g.domNode.style.display=this.palette._displayShowValue):(g._paletteGroupSelected=!1,g.domNode.style.display=
"none");d.sunken(d.domNode);y.getHelper(d.type,"tool").then(function(a){a=new (a||w)(dojo.clone(this.data));this.palette._context.setActiveTool(a)}.bind(d))}this.paletteItemMoreCloseCleanup()}.bind(this,r)))}this._tooltipDialog=new q({className:"paletteItemMorePopup",style:"width: auto; ",content:a,onShow:function(a){if(a=this._tooltipDialog.domNode.parentNode){var c=parseFloat(a.style.top);isNaN(c)||(a.style.top=c+12+"px")}}.bind(this)});d.open({popup:this._tooltipDialog,around:c,orient:["above-centered"]});
this._moreShowing=!0;this.palette.moreItems.push(this)}}.bind(this))):c.style.display="none";var g=e(".paletteItemSelectedHelpIcon",a)[0];m(g,"mousedown, mouseup",function(a){h.stop(a)}.bind(this));m(g,"click",function(a){h.stop(a);this._tooltipNode&&(dijit.hideTooltip(this._tooltipPos),this._tooltipPos=this._tooltipNode=null);if(this._helpShowing)this.paletteItemHelpCloseCleanup();else{var c=y.getOamDescriptivePropertyForType(this.type,"title"),f=y.getOamDescriptivePropertyForType(this.type,"description");
a=b.create("div",{className:"helpInnerContent"});var k=b.create("div",{className:"paletteTooltipCurrent"},a);b.create("span",{className:"paletteTooltipCurrentWidget"},k).textContent=this.name;this._collectionName&&b.create("span",{className:"paletteTooltipCurrentLibrary",innerHTML:" ("+this._collectionName+")"},k);k={container:"helpInnerContentSummary",title:"helpInnerContentSummaryTitle",content:"helpInnerContentSummaryContent"};this._createHelpSection(c,a,A.summary,k);this._createHelpSection(f,
a,A.description,k);c=b.create("div",{className:"paletteItemHelpContent"});f=b.create("span",{className:"paletteItemHelpCloseBox"},c);b.create("div",{className:"paletteItemHelpDescription"},c).appendChild(a);this._paletteItemHelpConnects.push(m(f,"mousedown, mouseup",function(a){h.stop(a)}.bind(this)));this._paletteItemHelpConnects.push(m(f,"click",function(a){h.stop(a);this.paletteItemHelpCloseCleanup()}.bind(this)));this._tooltipDialog=new q({className:"paletteItemHelpPopup",style:"width: auto; ",
content:c,onShow:function(a){if(a=this._tooltipDialog.domNode.parentNode){var c=parseFloat(a.style.top);isNaN(c)||(a.style.top=c-12+"px")}}.bind(this)});d.open({popup:this._tooltipDialog,around:g,orient:["below-centered"]});this._helpShowing=!0;this.palette.helpItems.push(this)}}.bind(this))},_createHelpSection:function(a,c,d,f){a&&a.value&&(c=b.create("div",{className:f.container},c),b.create("div",{className:f.title,innerHTML:d},c),d=b.create("div",{className:f.content},c),"text/html"==a.type?d.innerHTML=
a.value:d.textContent=a.value)},paletteItemMoreCloseCleanup:function(){if(this._moreShowing){for(var a=0;a<this._paletteItemMoreConnects.length;a++)this._paletteItemMoreConnects[a].remove();this._paletteItemMoreConnects=[];this._moreShowing=!1;index=this.palette.moreItems.indexOf(this);0<=index&&this.palette.moreItems.splice(index,1)}this._tooltipDialog&&(d.close(this._tooltipDialog),this._tooltipDialog.destroyRecursive(),this._tooltipDialog=null)},paletteItemHelpCloseCleanup:function(){if(this._helpShowing){for(var a=
0;a<this._paletteItemHelpConnects.length;a++)this._paletteItemHelpConnects[a].remove();this._paletteItemHelpConnects=[];this._helpShowing=!1;index=this.palette.helpItems.indexOf(this);0<=index&&this.palette.helpItems.splice(index,1)}this._tooltipDialog&&(d.close(this._tooltipDialog),this._tooltipDialog.destroyRecursive(),this._tooltipDialog=null)},updateImgSrc:function(a){this.domNode.querySelector(".paletteItemImage").src=a}})})},"davinci/ve/tools/CreateTool":function(){define("dojo/_base/declare dojo/dom-style ../tools/_Tool davinci/Workbench davinci/workbench/Preferences ../metadata ../widget dojo/Deferred dojo/promise/all davinci/ve/States davinci/commands/CompoundCommand ../commands/AddCommand ../commands/MoveCommand ../commands/ResizeCommand ../commands/StyleCommand".split(" "),
function(p,m,h,e,b,k,a,f,n,g,d,c,q,w,r){return p("davinci.ve.tools.CreateTool",h,{constructor:function(a,c){this._data=a;this._userData=c;if(a&&a.type){var d=k.queryDescriptor(a.type,"resizableOnCreate")||k.queryDescriptor(a.type,"resizable");"none"!==d&&(this._resizable=d);this._dropCursor=k.queryDescriptor(a.type,"dropCursor")}this._requireHelpers(a)},activate:function(a){(this._context=a)&&a.rootNode&&(this._oldCursor=a.rootNode.style.cursor);a.rootNode.style.cursor="crosshair"},deactivate:function(){this._context&&
this._context.rootNode&&(this._context.rootNode.style.cursor=this._oldCursor);this._setTarget(null);delete this._mdPosition;this._context.dragMoveCleanup()},_getContentPosition:function(a){if(a)return a.target&&(a={x:a.pageX,y:a.pageY}),a},onMouseDown:function(c){this._target=a.getEnclosingWidget(c.target);this._mdPosition=this._getContentPosition(c);this._dragRect=null},onMouseMove:function(a){var c=this._context,d=c._chooseParent;a.target!=this._lastEventTarget&&d.setProposedParentWidget(null);
this._lastEventTarget=a.target;if(this._mdPosition){if(this._resizable){c.deselect();var f=this._getContentPosition(a),g,k,h=!0,n=!0;f.x>=this._mdPosition.x?(d=this._mdPosition.x,k=f.x-this._mdPosition.x):(d=f.x,k=this._mdPosition.x-f.x,h=!1);f.y>=this._mdPosition.y?(g=this._mdPosition.y,f=f.y-this._mdPosition.y):(g=f.y,f=this._mdPosition.y-f.y,n=!1);a.shiftKey&&(k>=f?(f=k,n||(g=this._mdPosition.y-f)):(k=f,h||(d=this._mdPosition.x-k)));this._dragSizeRect||(a=c.getDocument().body,this._dragSizeRect=
dojo.create("div",{style:"border:1px dashed black;z-index:1000001;position:absolute;"},a));a=this._dragSizeRect.style;a.left=d+"px";a.top=g+"px";a.width=k+"px";a.height=f+"px"}}else d=!this.createWithFlowLayout(),this._setTarget(a.target,a),g=c.getPreference("showPossibleParents"),g=!g&&this._spaceKeyDown||g&&!this._spaceKeyDown,k={x:a.pageX,y:a.pageY},f={l:a.pageX,t:a.pageY,w:0,h:0},h=b.getPreferences("davinci.ve.editorPrefs",e.getProject()).snap&&d,n=!d,"object"==typeof this._dropCursor&&!1===this._dropCursor.show&&
(n=!1),c.dragMoveUpdate({data:this._data,position:k,absolute:d,currentParent:null,eventTarget:a.target,rect:f,doSnapLinesX:h,doSnapLinesY:h,doFindParentsXY:g,doCursor:n,beforeAfter:this._dropCursor&&this._dropCursor.beforeAfter})},onMouseUp:function(c){var d=this._context,f=d._chooseParent,b=!this.createWithFlowLayout();this._dragSizeRect&&(this._dragSizeRect.parentNode.removeChild(this._dragSizeRect),this._dragSizeRect=null);var g=d.getActiveDragDiv();g&&(g=dojo.query(".maqCandidateParents",g),1==
g.length&&(g[0].innerHTML=""));this._lastEventTarget=null;var h,n,q,w,g=this._getContentPosition(c);if(this._mdPosition){var r=!0,m=!0;this._position=dojo.mixin({},this._mdPosition);g.x<this._mdPosition.x&&(this._position.x=g.x);"height"==this._resizable?q=0:0<=g.x-this._mdPosition.x?q=g.x-this._mdPosition.x:(q=this._mdPosition.x-g.x,r=!1);g.y<this._mdPosition.y&&(this._position.y=g.y);"width"==this._resizable?w=0:0<=g.y-this._mdPosition.y?w=g.y-this._mdPosition.y:(w=this._mdPosition.y-g.y,m=!1);
c.shiftKey&&(q>=w?(w=q,m||(t=this._mdPosition.y-w)):(q=w,r||(l=this._mdPosition.x-q)))}else this._position=g;this._resizable&&this._position&&(4<q||4<w)&&(h={w:0<q?q:void 0,h:0<w?w:void 0});if(q=f.getProposedParentWidget()){if(n=q.parent,q.refChild){var p=q.parent.getChildren().indexOf(q.refChild);0<=p?q.refAfter&&p++:p=null}}else{c=this._getTarget()||a.getEnclosingWidget(c.target);var G=this._data;q=f.getAllowedTargetWidget(c,G,!0,{absolute:b});var N=dojo.isArray(G)?G[0].type:G.type,L=a.getWidgetHelper(N);
1<q.length&&L&&L.chooseParent?n=L.chooseParent(q):0<q.length&&(n=0<=q.indexOf(c)?c:q[0])}f.setProposedParentWidget(null);f=function(a){this.prototype=Error.prototype;this.name="InvalidTargetWidgetError";this.message=a?a:"The selected target is not a valid parent for the given widget."};try{G=this._data instanceof Array?this._data:[this._data];if(!n){var J=G.map(function(a){return a.type}).join(", "),F=G.map(function(a){var c=k.getAllowedParent(a.type);a=a.type;var d=k.queryDescriptor(a,"class");a=
d?d.split(/\s+/).push(a):[a];return{allowedParent:c,classList:a}});h="The selected target is not a valid parent for the given widget.";1===F.length&&F[0].allowedParent&&(h+=['The widget \x3cspan style\x3d"font-family: monospace"\x3e',J,"\x3c/span\x3e requires ",1<F[0].allowedParent.length?"one of the following parent types":"the parent type",' \x3cspan style\x3d"font-family: monospace"\x3e',F[0].allowedParent.join(", "),"\x3c/span\x3e."].join(""),N=G[0].type,(L=a.getWidgetHelper(N))&&L.isAllowedError&&
(h=L.isAllowedError({errorMsg:h,type:N,allowedParent:F[0].allowedParent,absolute:b})));debugger;throw new f(h);}for(b=0;b<G.length;b++){var K=G[b].type,M=k.getLibraryForType(K),P=M.name,N=[K,d];d._widgets.hasOwnProperty(P)||(d._widgets[P]=0);1==++d._widgets[P]&&k.invokeCallback(M,"onFirstAdd",N);k.invokeCallback(M,"onAdd",N)}this.create({target:n,index:p,directTarget:this._getTarget(),size:h,userData:this._userData})}catch(R){var O,Q;R instanceof f?(O=R.message,Q="Invalid Target"):(O="The action was interrupted by an internal error.",
Q="Error",console.error(R));e.showMessage(Q,O)}finally{this.exitCreateToolOnMouseUp()&&d.setActiveTool(null),this._cleanupActions()}},_cleanupActions:function(){var a=this._context;a.dragMoveCleanup();a.inlineEditActive()||this._context.getDocument().defaultView.focus()},onKeyDown:function(a){dojo.stopEvent(a);var c=this._context;if(a.keyCode==dojo.keys.ESCAPE)c.setActiveTool(null),this._cleanupActions();else{var d=this._context.getPreference("showPossibleParents");a.keyCode==dojo.keys.SPACE?this._spaceKeyDown=
!0:this._processKeyDown(a.keyCode);a=!d&&this._spaceKeyDown||d&&!this._spaceKeyDown;var d=this._data,d=dojo.isArray(d)?d[0].type:d.type,c=c._chooseParent,f=!this.createWithFlowLayout(),b=!f;"object"==typeof this._dropCursor&&!1===this._dropCursor.show&&(b=!1);c.dragUpdateCandidateParents({widgetType:d,showCandidateParents:a,absolute:f,doCursor:b,beforeAfter:this._dropCursor&&this._dropCursor.beforeAfter,currentParent:null})}},_processKeyDown:function(a){if(49<=a&&57>=a){var c=this._context._chooseParent,
d=c.getProposedParentsList();d&&1<d.length&&(a=d.length-(a-48),0<=a&&c.setProposedParentWidget(d[a]))}},onKeyUp:function(a){a.keyCode==dojo.keys.SPACE&&(this._spaceKeyDown=!1);dojo.stopEvent(a);a=this._context.getPreference("showPossibleParents");a=!a&&this._spaceKeyDown||a&&!this._spaceKeyDown;var c=this._data,c=dojo.isArray(c)?c[0].type:c.type,d=this._context._chooseParent,f=!this.createWithFlowLayout(),b=!f;"object"==typeof this._dropCursor&&!1===this._dropCursor.show&&(b=!1);d.dragUpdateCandidateParents({widgetType:c,
showCandidateParents:a,absolute:f,doCursor:b,beforeAfter:this._dropCursor&&this._dropCursor.beforeAfter,currentParent:null})},_requireHelpers:function(c){var d=[];if(!c||!c.type)return c instanceof Array&&c.forEach(function(a){d.concat(this._requireHelpers(a))},this),d;d.push(a.requireWidgetHelper(c.type));c.children&&!dojo.isString(c.children)&&dojo.every(c.children,function(a){return d.concat(this._requireHelpers(a))},this);return d},create:function(a){if(a&&this._data){for(var c=a.target,d,f;c&&
!(d=c.getContainerNode());)f=c,c=c.getParent();var b=a.index,g;d=!1;this._data.properties&&this._data.properties.style&&0<this._data.properties.style.indexOf("absolute")&&(d=!0);!d&&this.createWithFlowLayout()?f&&(b=c.indexOf(f)):a.position?g=a.position:this._position&&(g=this._position);this._data.context=this._context;n(this._requireHelpers(this._data)).then(function(){this._create({parent:c,index:b,position:g,size:a.size,userData:this._userData})}.bind(this))}},_create:function(b){var g=this._context,
k=[],e=new f;if(!this._loadType(this._data,k))return e.reject(),e;n(k).then(function(){var f;this.createNewWidget()?dojo.withDoc(this._context.getDocument(),function(){f=a.createWidget(this._data,this._userData,b.parent)},this):f=this._widget;f||e.reject(Error("Failed to create widget"));var k=new d;if(this.createNewWidget()){b.size=this._getInitialSize(f,b);k.add(new c(f,b.parent||this._context.getContainerNode(),b.index));var h=!0;f&&f.properties&&1==f.properties.ignorePosition&&(h=!1);f&&f.metadata&&
1==f.metadata.ignorePosition&&(h=!1);b.position&&h&&(h=g.getPreference("absoluteWidgetsZindex"),"xblox/RunScript"!==f.type&&"xblox/CSSState"!==f.type&&(k.add(new r(f,[{position:"absolute"},{"z-index":h}])),k.add(new q(f,b.position.x,b.position.y))));if(b.size){var h=b.size.w,n=b.size.h;if(null!==h&&null!==n){k.add(new w(f,h,n));var m=a.getWidgetHelper(f.type);if(m&&m.onCreateResize)m.onCreateResize(k,f,h,n)}}this.checkAddToCurrentState(k,f)}h=f.id;this.addToCommandStack&&this.addToCommandStack(k,
{widget:f});k.isEmpty()||this._context.getCommandStack().execute(k);f.isLayoutContainer&&f.resize();f=a.byId(h);this._select(f);this._widget=f;e.resolve(f);this.mouseUpProcessingCompleted()}.bind(this));return e},_loadType:function(a,c){if(!a||!a.type)return!1;c.push(this._context.loadRequires(a.type,!0));a.children&&!dojo.isString(a.children)&&dojo.forEach(a.children,function(a){this._loadType(a,c)}.bind(this));return!0},_getInitialSize:function(a,c){var d=c.size,f=a.getHelper();f&&f.initialSize&&
(f=f.initialSize(c))&&(d=f);!d&&(f=k.queryDescriptor(a.type,"initialSize"))&&(c&&!c.position?(d=c.parent,"html.body"==d.type?d="auto"==f||"auto"==f.flow?{w:"100%",h:"auto"}:this._getExplicitFlowSizeFromMetadata(f):this._isTypeContainer(d.type)?"auto"==f||"auto"==f.flow?(d=d.getData().children,d={w:"100%",h:d&&d.length?"auto":"100%"}):d=this._getExplicitFlowSizeFromMetadata(f):d=this._getExplicitFlowSizeFromMetadata(f)):d="auto"==f||"auto"==f.absolute?{w:"300px",h:"300px"}:this._getExplicitAbsoluteSizeFromMetadata(f));
return d},_getExplicitFlowSizeFromMetadata:function(a){var c=null;return c=a.flow?{w:a.flow.width?a.flow.width:"100%",h:a.flow.height?a.flow.height:"auto"}:{w:a.width?a.width:"100%",h:a.height?a.height:"auto"}},_getExplicitAbsoluteSizeFromMetadata:function(a){var c=null;return c=a.absolute?{w:a.absolute.width?a.absolute.width:"300px",h:a.absolute.height?a.absolute.height:"300px"}:{w:a.width?a.width:"300px",h:a.height?a.height:"300px"}},_isTypeContainer:function(a){return a&&("dijit/layout/ContentPane"==
a||"html.div"==a||"html.form"==a||"html.fieldset"==a)},_select:function(a){if(a)if(a.type){var c=k.getSmartInput(a.type);c&&c.then?c.then(function(c){!this._data.fileDragCreate&&c&&c.displayOnCreate?(a.inLineEdit_displayOnCreate=c.displayOnCreate,this._context.select(a,null,!0)):this._context.select(a)}.bind(this)):(console.error("create tool failed::_select smart input is null"),this._context.select(a))}else console.error("create tool failed::_select w.type is null");else console.error("create tool failed::_select w is null")},
createWithFlowLayout:function(){return k.queryDescriptor(this._data.type,"forceAbsolute")?!1:this._context.getFlowLayout()},createNewWidget:function(){return!0},exitCreateToolOnMouseUp:function(){return!0},mouseUpProcessingCompleted:function(){},checkAddToCurrentState:function(a,c){var d=g.getFocus(c._edit_context.rootNode);if(d&&d.stateContainerNode){var d=g.getState(d.stateContainerNode),f=b.getPreferences("davinci.ve.editorPrefs",e.getProject());d&&f.newWidgetsCurrentState&&(f=m.get(c.domNode,
"display"),a.add(new r(c,[{display:"none"}])),a.add(new r(c,[{display:f}],d)))}}})})},"davinci/ve/tools/_Tool":function(){define(["dojo/_base/declare","davinci/ve/widget","davinci/ve/metadata","davinci/ve/utils/GeomUtils"],function(p,m,h,e){return p("davinci.ve.tools._Tool",null,{_getTarget:function(){return this._target},_setTarget:function(b,k){this._targetOverlays||(this._targetOverlays=[]);if(!this._matchesTargetOverlay(b)){for(var a=this._context.getContainerNode(),f;b&&b!=a;)if((f=m.getEnclosingWidget(b))&&
!f.getContext())b=f.domNode.parentNode,f=null;else{f&&davinci.ve.metadata.queryDescriptor(f.type,"enablePointerEvents")?f=null:f&&f.getContainerNode()&&(davinci.ve.metadata.queryDescriptor(f.type,"isControl")||(f=null));break}f?(this._target=f,this._updateTargetOverlays(k),this._insertTargetOverlays()):(this._removeTargetOverlays(),this._target=null)}},_updateTargetOverlays:function(b){this._removeTargetOverlays();if(this._target){var k=this._target.domNode,a=this._getMaxZIndex(k);if(this._targetOverlays){var f=
this._target.getHelper();if(f&&f.getTargetOverlays&&(f=f.getTargetOverlays(this._target))&&0<f.length){dojo.forEach(f,function(c){c=this._getNewTargetOverlay(c,c.x,c.y,c.width,c.height,a);this._targetOverlays.push(c)},this);return}var f=k.offsetLeft,h=k.offsetTop,g=k.offsetWidth,d=k.offsetHeight;if(b){var c,q=e.getBorderBoxPageCoordsCached(k);b.pageX<q.l&&(c=q.l-b.pageX,f-=c,g+=c);b.pageY<q.t&&(c=q.t-b.pageY,h-=c,d+=c);b.pageX>q.l+q.w&&(c=b.pageX-(q.l+q.w),g+=c);b.pageY>q.t+q.h&&(c=b.pageY-(q.t+q.h),
d+=c)}b=this._getNewTargetOverlay(k,f,h,g,d,a);this._targetOverlays.push(b)}}},_getMaxZIndex:function(b){var k=dojo.style(b,"zIndex");dojo.query("*",b).forEach(function(a){a=dojo.style(a,"zIndex");var f=Number(a),b=Number(k);isNaN(f)||(isNaN(b)?k=a:f>b&&(k=a))});return k},_getNewTargetOverlay:function(b,k,a,f,e,g){return this._context.getDojo().create("div",{className:"editFeedback",style:{position:"absolute",opacity:.1,left:k+"px",top:a+"px",width:f+"px",height:e+"px",zIndex:g}})},_insertTargetOverlays:function(){if(this._targetOverlays&&
this._target){var b=this._target.domNode,k=b.parentNode;dojo.forEach(this._targetOverlays,function(a){k.insertBefore(a,b.nextSibling)},this)}},_removeTargetOverlays:function(){if(this._targetOverlays&&this._target)for(var b=this._targetOverlays.length-1;0<=b;b--)dojo.destroy(this._targetOverlays[b]),this._targetOverlays.pop()},_matchesTargetOverlay:function(b){return dojo.some(this._targetOverlays,function(k){return b==k},this)}})})},"davinci/commands/CompoundCommand":function(){define(["dojo/_base/declare"],
function(p){return p("davinci.commands.CompoundCommand",null,{name:"compound",_commands:[],constructor:function(m){this._commands=[];m&&(this._commands=[m])},add:function(m){if(m)if(this._commands)if("compound"==m.name)dojo.forEach(m._commands,function(b){this.add(b)},this);else{if("modify"==m.name)for(var h=m._oldId,e=0;e<this._commands.length;e++){var b=this._commands[e];if("modify"==b.name&&b._oldId==h){b.add(m);return}}this._commands.push(m)}else this._commands="compound"==m.name?m._commands:
[m]},setContext:function(m){for(var h=0;h<this._commands.length;h++)this._commands[h].setContext&&this._commands[h].setContext(m)},isEmpty:function(){return!this._commands||0===this._commands.length},execute:function(){if(this._commands)for(var m=0;m<this._commands.length;m++)this._commands[m].execute(),this._commands[m]._oldId&&this._commands[m]._newId&&(this._oldId=this._commands[m]._oldId,this._newId=this._commands[m]._newId)},undo:function(){if(this._commands)for(var m=this._commands.length-1;0<=
m;m--)this._commands[m].undo()}})})},"davinci/ve/commands/AddCommand":function(){define("dojo/_base/declare davinci/ve/commands/_hierarchyCommand davinci/ve/widget davinci/ve/utils/ImageUtils davinci/ve/States davinci/ve/commands/ModifyCommand".split(" "),function(p,m,h,e,b,k){return p("davinci.ve.commands.AddCommand",[m],{name:"add",constructor:function(a,f,b){a&&(a.domNode?this._id=a.id:this._data=a);this._parentId=f.id;this._index=b},execute:function(){var a=h.byId(this._parentId);if(a){var f=
a.getContext(),n=void 0;this._data?(this._id&&this._data.properties&&(this._data.properties.id=this._id),n=h.createWidget(this._data),this._id=n.id):this._id&&(n=h.byId(this._id,f));if(n){this._data=n.getData();this._data.properties.id=this._id;this._data.context=f;if(this._index&&"number"!=typeof this._index)if(this._index.domNode)this._index=a.indexOf(this._index);else{var g=h.byId(this._index.id,f);this._index=a.indexOf(g)}"IMG"===n.domNode.tagName&&e.ImageUpdateFocus(n,f);a.addChild(n,this._index);
f&&(f.attach(n),n.startup(),n.renderWidget(),f.widgetAddedOrDeleted(),f.widgetChanged(f.WIDGET_ADDED,n));(f=this._isRefreshOnDescendantChange(n))&&(new k(f,null,null,a._edit_context)).execute();b.resetState(n.domNode)}}},undo:function(){if(this._id&&this._parentId){var a=h.byId(this._id);if(a){var f=h.byId(this._parentId);if(f){var e=this._isRefreshOnDescendantChange(a),g=a.getContext();g&&(g.detach(a),g.deselect(a));f.removeChild(a);g.widgetChanged(g.WIDGET_REMOVED,a);a.destroyWidget();g&&g.widgetAddedOrDeleted();
e&&(new k(e,null,null,f._edit_context)).execute();b.resetState(a.domNode)}}}}})})},"davinci/ve/commands/_hierarchyCommand":function(){define(["dojo/_base/declare"],function(p){return p("davinci.ve.commands._hierarchyCommand",null,{_isRefreshOnDescendantChange:function(m){for(var h;m&&m.domNode&&"BODY"!=m.domNode.tagName;)(m=m.getParent())&&davinci.ve.metadata.queryDescriptor(m.type,"refreshOnDescendantChange")&&(h=m);return h}})})},"davinci/ve/utils/ImageUtils":function(){define([],function(){return{ImageUpdateFocus:function(p,
m){if(m&&p&&p.domNode&&"IMG"===p.domNode.tagName)var h=dojo.connect(p.domNode,"onload",function(){for(var e=m.getSelection(),b=0;b<e.length;b++)if(e[b]==p){m.updateFocus(p,b);break}dojo.disconnect(h)})}}})},"davinci/ve/commands/ModifyCommand":function(){define(["dojo/_base/declare","davinci/ve/commands/_hierarchyCommand","../widget","../utils/ImageUtils","../States"],function(p,m,h,e,b){return p("davinci.ve.commands.ModifyCommand",[m],{name:"modify",constructor:function(b,a,f,e,g){this._oldId=b?b.id:
void 0;this._properties=a=a||{};this._children=f||"string"==typeof f?f:a._children;this._context=e||b.getContext();this._scripts=g;delete this._properties._children},setContext:function(b){this._context=b},add:function(b){b&&b._oldId==this._oldId&&(b._properties&&dojo.mixin(this._properties,b._properties),b._children&&(this._children=b._children))},execute:function(){if(this._oldId&&this._properties){var k=h.byId(this._oldId),a=this._context;if(k){this._oldData=k.getData();this._oldData.context=a;
this._newData={type:this._oldData.type,properties:dojo.mixin({},this._oldData.properties,this._properties),children:this._children||"string"==typeof this._children?this._children:this._oldData.children,scripts:dojo.mixin({},this._oldData.scripts,this._scripts),maqAppStates:this._oldData.maqAppStates,maqDeltas:this._oldData.maqDeltas,context:a};for(var f in this._newData.properties)"$MAQ_MODIFYCOMMAND_DELETE_PROPERTY$"===this._newData.properties[f]&&delete this._newData.properties[f];if(this._doRefreshFromSource(k))k.setProperties(this._newData.properties,
!0),setTimeout(function(){a.visualEditor.refresh()},0);else{a&&a.detach(k);this._oldData.properties.isTempID&&!this._properties.id||delete this._newData.properties.isTempID;f=k.getParent();var n=null,g=f.indexOf(k);f.removeChild(k);k.destroyWidget();if(n=h.createWidget(this._newData)){"IMG"===n.domNode.tagName&&e.ImageUpdateFocus(n,a);f.addChild(n,g);this._newId=n.id;a&&(a.attach(n),n.startup(),n.renderWidget(),a.widgetAddedOrDeleted(),this._oldId!=this._newId&&a.widgetChanged(a.WIDGET_ID_CHANGED,
n,this._oldId),a.widgetChanged(a.WIDGET_MODIFIED,n));this.newWidget=n;dojo.publish("/davinci/ui/widget/replaced",[n,k]);b.resetState(n.domNode);var d;if(k=this._isRefreshParentOnPropChange(n))if("string"==typeof k)for(d=f;d&&d.domNode&&d.type!=k&&"BODY"!=d.domNode.tagName;){if(!d.domNode||"BODY"==d.domNode.tagName){d=null;break}d=d.getParent()}else d=f;(k=this._isRefreshOnDescendantChange(n))&&(d=k);d&&(new davinci.ve.commands.ModifyCommand(d,null,null,f._edit_context)).execute();dojo.publish("/davinci/ui/widgetPropertiesChanged",
[[n]])}}}}},_doRefreshFromSource:function(b){var a=this._properties,f,e,g=!1;for(f in a)if(a.hasOwnProperty(f)&&(e=b.metadata.property[f])&&e.refreshFromSource){g=!0;break}return g},_isRefreshParentOnPropChange:function(b){return davinci.ve.metadata.queryDescriptor(b.type,"refreshParentOnPropChange")},undo:function(){if(this._newId&&this._oldData){var k=h.byId(this._newId);if(k){var a=k.getParent();if(a){var f=a.indexOf(k);if(!(0>f)){var e=a.getContext();e&&e.detach(k);a.removeChild(k);k.destroyWidget();
if(newWidget=h.createWidget(this._oldData)){this._oldData=newWidget.getData();this._oldData.context=this._context;a.addChild(newWidget,f);e&&(e.attach(newWidget),newWidget.startup(),newWidget.renderWidget(),e.widgetAddedOrDeleted(),e.widgetChanged(e.WIDGET_MODIFIED,newWidget));dojo.publish("/davinci/ui/widget/replaced",[newWidget,k]);b.resetState(newWidget.domNode);var g;if(this._isRefreshParentOnPropChange(k))if("string"==typeof refreshParent)for(g=a;g&&g.domNode&&g.type!=refreshParent&&"BODY"!=
g.domNode.tagName;){if(!g.domNode||"BODY"==g.domNode.tagName){g=null;break}g=g.getParent()}else g=a;(k=this._isRefreshOnDescendantChange(newWidget))&&(g=k);g&&(new davinci.ve.commands.ModifyCommand(g,null,null,a._edit_context)).execute();dojo.publish("/davinci/ui/widgetPropertiesChanged",[[newWidget]])}}}}}}})})},"davinci/ve/commands/MoveCommand":function(){define("dojo/_base/declare dojo/dom-geometry davinci/ve/widget davinci/ve/States davinci/ve/utils/StyleArray davinci/ve/utils/GeomUtils".split(" "),
function(p,m,h,e,b,k){return p("davinci.ve.commands.MoveCommand",null,{name:"move",constructor:function(a,f,b,g,d,c,k){this._id=a?a.id:void 0;this._context=a.getContext();this._newBox={l:f,t:b};this._commandForXYDeltas=g;this._oldBox=d;this._applyToStateIndex=c&&"Normal"!=c&&"undefined"!=c?c:"undefined";this._disableSnapping=k},execute:function(){if(this._id){var a=h.byId(this._id);if(a&&a.domNode){var f=this._context;if(!this._oldBox){var n=a.getMarginBox();this._oldBox={l:n.l,t:n.t,w:n.w,h:n.h}}if(!a.domNode.offsetParent)console.error("maeh");
else if(dojo.position(a.domNode.offsetParent,!0)){this._commandForXYDeltas?(this._newBox.l=this._oldBox.l+this._commandForXYDeltas._deltaX,this._newBox.t=this._oldBox.t+this._commandForXYDeltas._deltaY):(!this._disableSnapping&&f&&f._snapX&&(n=this._oldBox.w,"left"==f._snapX.typeRefObj?this._newBox.l=f._snapX.x:n&&"right"==f._snapX.typeRefObj?this._newBox.l=f._snapX.x-n:n&&"center"==f._snapX.typeRefObj&&(this._newBox.l=f._snapX.x-n/2)),!this._disableSnapping&&f&&f._snapY&&(n=this._oldBox.h,"top"==
f._snapY.typeRefObj?this._newBox.t=f._snapY.y:n&&"bottom"==f._snapY.typeRefObj?this._newBox.t=f._snapY.y-n:n&&"middle"==f._snapY.typeRefObj&&(this._newBox.t=f._snapY.y-n/2)));this._deltaX=this._newBox.l-this._oldBox.l;this._deltaY=this._newBox.t-this._oldBox.t;var n=k.getBorderBoxPageCoords(a.domNode.offsetParent),g=m.getBorderExtents(a.domNode.offsetParent),d=this._newBox.l-n.l-g.l,c=this._newBox.t-n.t-g.t;f.getScrollOffset();d=[{left:d+"px"},{top:c+"px"}];f=a.getStyleValuesAllStates();this._oldStyleValuesAllStates=
dojo.clone(f);this._oldBox&&(this._oldStyleValuesAllStates[this._applyToStateIndex]=b.mergeStyleArrays(this._oldStyleValuesAllStates[this._applyToStateIndex],[{left:this._oldBox.l-n.l-g.l+"px"},{top:this._oldBox.t-n.t-g.t+"px"}]));f[this._applyToStateIndex]=f[this._applyToStateIndex]?b.mergeStyleArrays(f[this._applyToStateIndex],d):d;a.setStyleValuesAllStates(f);n=e.getStatesListCurrent(a.domNode);g=b.mergeStyleArrays([],f.undefined);for(d=0;d<n.length;d++)f[n[d]]&&(g=b.mergeStyleArrays(g,f[n[d]]));
a.setStyleValuesCanvas(g);a.setStyleValuesModel(f.undefined);a.refresh();e.resetState(a.domNode);dojo.publish("/davinci/ui/widgetPropertiesChanged",[[a]])}}else console.error("no widget")}},undo:function(){if(this._id){var a=h.byId(this._id);if(a){var f=this._oldStyleValuesAllStates,k=this._applyToStateIndex;a.setStyleValuesAllStates(f);f=b.mergeStyleArrays(f.undefined,f[k]);a.setStyleValuesCanvas(f);a.setStyleValuesModel(this._oldStyleValuesAllStates.undefined);a.refresh();davinci.ve.states.resetState(a.domNode);
dojo.publish("/davinci/ui/widgetPropertiesChanged",[[a]])}}}})})},"davinci/ve/commands/ResizeCommand":function(){define(["dojo/_base/declare","dojo/dom-geometry","davinci/ve/widget","davinci/ve/States","davinci/ve/utils/StyleArray"],function(p,m,h,e,b){return p("davinci.ve.commands.ResizeCommand",null,{name:"resize",constructor:function(b,a,f,e){this._id=b?b.id:void 0;b=/^\s*[-+]?[0-9]*\.?[0-9]+\s*$/;b.test(a)&&(a=parseFloat(a));b.test(f)&&(f=parseFloat(f));this._newBox={w:a,h:f};this._applyToStateIndex=
e&&"Normal"!=e&&"undefined"!=e?e:"undefined"},execute:function(){if(this._id&&this._newBox){var k=h.byId(this._id);if(k&&k.domNode){var a=k.domNode,f=a.ownerDocument.defaultView.getComputedStyle(a),n=m.getContentBox(a,f);this._oldBox={w:n.w,h:n.h};var n=this._newBox.w,g=this._newBox.h;this._usesBorderBox(a)&&(a=m.getPadBorderExtents(a,f),"number"==typeof n&&0<=n&&(n+=a.w),"number"==typeof g&&0<=g&&(g+=a.h));a=[{}];"number"==typeof n?a[0].width=n+"px":"string"==typeof n&&(a[0].width=n);"number"==typeof g?
a[0].height=g+"px":"string"==typeof g&&(a[0].height=g);n=k.getStyleValuesAllStates();this._oldStyleValuesAllStates=dojo.clone(n);this._oldBox&&(this._oldStyleValuesAllStates[this._applyToStateIndex]=b.mergeStyleArrays(this._oldStyleValuesAllStates[this._applyToStateIndex],[{width:this._oldBox.w+"px"},{height:this._oldBox.h+"px"}]));n[this._applyToStateIndex]=n[this._applyToStateIndex]?b.mergeStyleArrays(n[this._applyToStateIndex],a):a;k.setStyleValuesAllStates(n);g=e.getStatesListCurrent(k.domNode);
a=b.mergeStyleArrays([],n.undefined);for(f=0;f<g.length;f++)n[g[f]]&&(a=b.mergeStyleArrays(a,n[g[f]]));k.setStyleValuesCanvas(a);k.setStyleValuesModel(n.undefined);this._resize(k);e.resetState(k.domNode);dojo.publish("/davinci/ui/widgetPropertiesChanged",[[k]])}}},setContext:function(b){this._context=b},undo:function(){if(this._id){var k=h.byId(this._id);if(k){var a=this._oldStyleValuesAllStates,f=this._applyToStateIndex;k.setStyleValuesAllStates(a);a=b.mergeStyleArrays(a.undefined,a[f]);k.setStyleValuesCanvas(a);
k.setStyleValuesModel(this._oldStyleValuesAllStates.undefined);this._resize(k);e.resetState(k.domNode);dojo.publish("/davinci/ui/widgetPropertiesChanged",[[k]])}}},_usesBorderBox:function(b){var a=b.tagName.toLowerCase();(b=b.getAttribute("type"))&&(b=b.toLowerCase(b));return"table"==a||"button"==a||"input"==a&&"button"==b},_resize:function(b){var a=b.getParent();a&&a.dijitWidget&&a.dijitWidget.isLayoutContainer?a.resize():b.resize&&b.resize();b.renderWidget();b._updateSrcStyle()}})})},"davinci/ui/dnd/DragManager":function(){define(["dojo/_base/declare",
"dojo/_base/array","dojo/_base/connect","dojo/mouse"],function(p,m,h){p=p("",null,{disabled:!1,currentDragSource:null,currentDropTarget:null,dropAcceptable:!1,dropTargets:null,dragTriggered:!1,currentDomElement:null,_connectors:null,_moveConnector:null,document:null,documentX:0,documentY:0,_ABSOLUTE_THRESHOLD:3,_STATIC_THRESHOLD:40,constructor:function(){this.dropTargets=[];this._connectors=[h.connect(dojo.doc,"onkeydown",this,"onKeyDown"),h.connect(dojo.doc,"onmouseover",this,"onMouseOver"),h.connect(dojo.doc,
"onmouseout",this,"onMouseOut"),h.connect(dojo.doc,"onmousedown",this,"onMouseDown"),h.connect(dojo.doc,"onmouseup",this,"onMouseUp")]},destroy:function(){m.forEach(this._connectors,dojo.disconnect)},onKeyDown:function(b){27==b.keyCode&&this.currentDragSource&&(this.dropAcceptable=!1,this.onMouseUp(b))},onMouseDown:function(b,k){if(!(this.disabled||this.dragTriggered||!dojo.mouseButtons.isLeft(b)||b.metaKey||b.ctrlKey||this.dragTriggered)){var a=this.currentDragSource=k||this.findDragSource(b);if(a){a.onDragDown(b);
for(var a=0,f=this.dropTargets.length;a<f;a++){var e=this.dropTargets[a];if(!e.disabled)e.onDragDown(b)}b.preventDefault();this._moveConnectors=[h.connect(dojo.doc,"onmousemove",this,"onMouseMove")];this.document&&this.document!=dojo.doc&&(this._moveConnectors.push(h.connect(this.document,"onmousemove",this,"onMouseMove")),this._moveConnectors.push(h.connect(this.document,"onmouseover",this,"onMouseOver")),this._moveConnectors.push(h.connect(this.document,"onmouseout",this,"onMouseOut")),this._moveConnectors.push(h.connect(this.document,
"onmouseup",this,"onMouseUp")))}}},onMouseMove:function(b){b.preventDefault();dojo.isIE&&(b.pageX-=2,b.pageY-=2);if(b.target==this.document||b.target.ownerDocument==this.document)b.documentX=this.documentX,b.documentY=this.documentY,b.documentX-=this.document.documentElement.scrollLeft,b.documentY-=this.document.documentElement.scrollTop;var k=b.dragSource=this.currentDragSource;if(!this.dragTriggered){var a=b.pageX-k.pageX,f=b.pageY-k.pageY,a=Math.sqrt(a*a+f*f);if("absolute"==k.positioning){if(a<
this._ABSOLUTE_THRESHOLD)return}else if(a<this._STATIC_THRESHOLD)return;this.dragTriggered=!0;k.onDragStart(b);a=0;for(f=this.dropTargets.length;a<f;a++){var e=this.dropTargets[a];e.disabled||(b.dropTarget=e,e.onDragStart(b))}this.onMouseOver(b)}k.onDragMove(b);(e=this.currentDropTarget)?this.dropAcceptable&&(b.dropTarget=e,e.onDragMove(b,this.dragObjects)):this.dropAcceptable=!1},onMouseOver:function(b){this.currentDomElement=b.target;if(this.dragTriggered){var k=this.currentDragSource;if(k){b.dragSource=
k;var a=this.findDropTarget(this.currentDomElement,k);a&&k.domNode==a.domNode||(a!=this.currentDropTarget&&(this.currentDropTarget&&(b.dropTarget=this.currentDropTarget,this.currentDropTarget.onDragOut(b)),a&&(b.dropTarget=a,this.dropAcceptable=a.onDragOver(b))),this.currentDropTarget=a)}}},onMouseOut:function(b){},onMouseUp:function(b){if(!this.ignoreMouseUp){m.forEach(this._moveConnectors,dojo.disconnect);if(this.dragTriggered){for(var k=0,a=this.dropTargets.length;k<a;k++){var f=this.dropTargets[k];
f.disabled||(b.dropTarget=f,f.onDragEnd(b))}k=this.currentDragSource;a=this.currentDropTarget;b.dragSource=k;b.dropTarget=a;if(k&&(a?(a.onDropStart(b),this.dropAcceptable?(f=a.onDrop(b),a.onDragOut(b),void 0==f||b.dragStatus||(b.dragStatus=f?"dropSuccess":"dropFailure")):(a.onDragOut(b),b.dragStatus="dropFailure")):b.dragStatus="dropFailure",k.onDragEnd(b),a))a.onDropEnd(b)}this._resetStatus()}},_resetStatus:function(){this.currentDragSource=this.currentDropTarget=null;this.dragTriggered=this.dropAcceptable=
!1;this.currentDomElement=null},findDragSource:function(b){for(b=b.target;b&&b!=dojo.doc.body;b=b.parentNode)if(b.dragSource&&!b.dragSource.disabled)return b.dragSource;return null},findDropTarget:function(b,k){for(var a=null,f=b,e=null;null!=f&&f!=dojo.doc.body;f=f.parentNode){var g=f.dropTarget;if(g&&!g.disabled&&g.accepts(k)){a=g;a.nodeUnderMouse=e;break}f.dragSource&&!f.dragSource.disabled&&(e=f)}return a},registerDropTarget:function(b){this.dropTargets.push(b)},unregisterDropTarget:function(b){for(var k=
0,a=this.dropTargets.length;k<a;k++)if(this.dropTargets[k]==b){this.dropTargets.splice(k,1);break}}});var e=new p;e.Module=p;return e})},"davinci/ve/views/StatesView":function(){define("dojo/_base/declare dojo/query dojo/dom-class dojo/_base/connect dojo/aspect davinci/lang/ve/ve davinci/workbench/ViewPart dijit/layout/BorderContainer dijit/layout/ContentPane davinci/XPathUtils davinci/ve/States davinci/ve/widget davinci/ve/_Widget davinci/ve/commands/AppStateCommand dojo/data/ItemFileWriteStore dijit/tree/ForestStoreModel dijit/Tree dojo/_base/window".split(" "),
function(p,m,h,e,b,k,a,f,n,g,d,c,q,w,r,B,y,A){p(y._TreeNode,{});var v=p(y._TreeNode,{_setLabelAttr:{node:"labelNode",type:"innerHTML"}}),x="sceneId category node sceneContainerNode isCurrent isFocus isInitial".split(" ");return p("davinci.ve.views.StatesView",[a],{nextId:0,_lastSelectedId:null,postCreate:function(){this.inherited(arguments);this._themeState=null;this.container=new f({design:"headline",gutters:!1,liveSplitters:!1});this.centerPane=new n({region:"center"});this.container.addChild(this.centerPane);
this.container.layout();this.container.startup();this.setContent(this.container);this.subscribe("/davinci/ui/editorSelected",this._editorSelected.bind(this));this.subscribe("/davinci/ui/context/loaded",this._contextLoaded.bind(this));this.subscribe("/davinci/ui/context/statesLoaded",this._statesLoaded.bind(this));this.subscribe("/davinci/ui/context/pagebuilt",this._pagebuilt.bind(this));this.subscribe("/davinci/ui/context/pagerebuilt",this._pagerebuilt.bind(this));this.subscribe("/davinci/states/statesReordered",
this._statesReordered.bind(this));this.subscribe("/davinci/ui/deviceChanged",this._deviceChanged.bind(this));this.subscribe("/davinci/states/state/added",this._addState.bind(this));this.subscribe("/davinci/states/state/removed",this._removeState.bind(this));this.subscribe("/davinci/states/state/renamed",this._renameState.bind(this));this.subscribe("/davinci/states/state/changed",this._changeState.bind(this));this.subscribe("/maqetta/appstates/state/changed",this._changeState.bind(this));this.subscribe("/maqetta/appstates/state/containerChange",
this._containerChange.bind(this));this.subscribe("/davinci/ui/context/registerSceneManager",this._registerSceneManager.bind(this));this.subscribe("/davinci/scene/scenesLoaded",this._scenesLoaded.bind(this));this.subscribe("/davinci/scene/added",this._addScene.bind(this));this.subscribe("/davinci/scene/removed",this._removeScene.bind(this));this.subscribe("/davinci/scene/renamed",this._renameScene.bind(this));this.subscribe("/davinci/scene/selectionChanged",this._sceneSelectionChanged.bind(this));
dojo.subscribe("/davinci/ui/widgetPropertiesChanged",dojo.hitch(this,this._widgetPropertiesChanged));this.subscribe("/davinci/ui/widgetSelected",dojo.hitch(this,this._widgetSelectionChanged));this.attachToolbar();dojo.style(this.toolbarDiv,"display","none")},_contextLoaded:function(){},_pagebuilt:function(){this._statesLoaded.apply(this,arguments)},_pagerebuilt:function(){this._destroyTree();this._statesLoaded.apply(this,arguments)},_statesReordered:function(){this._destroyTree();this._statesLoaded.apply(this,
arguments)},_statesLoaded:function(){this._editor&&"davinci.ve.themeEditor.ThemeEditor"!=this._editor.declaredClass&&this._updateView();this._hideShowToolBar()},_deviceChanged:function(){this._updateView()},_addState:function(){this._updateView()},_removeState:function(){this._updateView()},_renameState:function(){this._updateView()},_changeState:function(a){this.isThemeEditor()?this._updateThemeSelection(a.newState):this._updateView()},_containerChange:function(){this._updateView()},_registerSceneManager:function(a){},
_scenesLoaded:function(a){this._updateView()},_addScene:function(a,c,d){this._updateView()},_removeScene:function(a,c,d){this._updateView()},_renameScene:function(a,c,d){this._updateView()},_widgetPropertiesChanged:function(){this._updateView()},_widgetSelectionChanged:function(a){this._editor&&this._editor.getContext&&this._tree&&this._sceneStore&&(a=this._editor.getContext().getSelection(),1==a.length&&(a=a[0].domNode)&&a._maqAppStates&&this._sceneStore.fetch({query:{node:a},queryOptions:{deep:!0},
onComplete:dojo.hitch(this,function(a,c){if(0<a.length){var d=this._getTreeSelectionPath(a[0]);this._tree.set("path",d)}})}))},_sceneSelectionChanged:function(a,c){a&&a.category&&c&&this._updateView()},_editorSelected:function(a){a=a.editor;this._destroyTree();this._unregisterForContextEvents();a&&a.supports("states")?(this._editor=a,dojo.style(this.container.domNode,"display","block"),"davinci.ve.themeEditor.ThemeEditor"===a.declaredClass?(this.set("title",k.States),this._updateViewForThemeEditor(),
this._themeState?this._updateThemeSelection(this._themeState):this._updateThemeSelection("Normal")):(this.set("title",k.Scenes),this._registerForContextEvents(),this._updateView()),this.container.layout()):(delete this._editor,dojo.style(this.container.domNode,"display","none"));this._hideShowToolBar()},_getRootNode:function(){var a=this._editor,c;a&&a.getContext&&(c=(a=a.getContext())&&a.rootNode);return c},_updateView:function(){if(this._editor&&this._editor.getContext&&!this.isThemeEditor()){var a=
this._editor.getContext();a&&a._statesLoaded&&A.withDoc(document,function(){this._updateList();this._updateSelection()},this)}},isThemeEditor:function(){return this._editor&&"davinci.ve.themeEditor.ThemeEditor"===this._editor.declaredClass},_updateViewForThemeEditor:function(){var a=this._editor._theme.getStatesForAllWidgets(),c={Normal:"Normal"};if(a)for(var d=0;d<a.length;d++){var f=a[d];"Normal"!=f&&(c[f]=f)}window.latestStates=c;var a=this._getScenes(),c={name:this._editor&&this._editor.getFileNameToDisplay?
this._editor.getFileNameToDisplay():this._editor&&this._editor.fileName?this._editor.fileName:"file",type:"file",category:"file",children:[]},d=[],f=[c],b;for(b in latestStates)d.push({name:b,sceneId:b,type:"AppState"});c.children=c.children.concat(d);this._compareStructures(f,a)||(this._destroyTree(),this._createTree(f))},_updateList:function(){function a(f,b){var w,r,m=f.declaredClass&&f.isInstanceOf&&f.isInstanceOf(q);m?(w=f,r=w.domNode):(w=null,r=f);var z=d.isStateContainer(r),A=!1,y;for(y in k){var v=
k[y];if(v.getSceneChildren&&v.name&&v.category&&(A=v.isSceneContainer(r)))break}if("BODY"==r.tagName||z||A){for(var x=null,C=0;C<e.length;C++)if(v=e[C],v.node==r){x=v;break}var B=null;if(!x){var p=r.parentNode;a:for(;p;){for(C=0;C<e.length;C++)if(v=e[C],v.node==p){B=v;break a}if("BODY"==p.tagName)break;p=p.parentNode}}if(x)b=x;else{var G=m?c.getLabel(w):c.getLabelForNode(r),C=g.getXPath(r),G={name:G,type:"file",category:"file",node:r,children:[]};B?(G.maqid=B.maqid+"$"+C,B.children.push(G)):(G.maqid=
b.maqid+"$"+C,b.children.push(G));e.push(G);b=G}if(z){C=d.getStates(r);v=d.getState(r);v||(v=d.NORMAL);p=d.getInitial(r);p||(p=d.NORMAL);for(var N={maqid:b.maqid+"$AppStates",name:"Application States",type:"SceneManagerRoot",category:"AppStates",sceneContainerNode:r,parentItem:b,children:[]},S=0;S<C.length;S++){var T=C[S],G=h._treeNodeContent("Normal"==T?"Background":T),z=n&&n.stateContainerNode==r&&n.state==v,B=T===v,x=T===p,G={maqid:N.maqid+"$"+T,name:G,sceneId:T,type:"AppState",isFocus:z,isCurrent:B,
isInitial:x,sceneContainerNode:r,parentItem:N};N.children.push(G);e.push(G)}b.children.push(N);e.push(N)}if(A)for(y in k)if(v=k[y],v.getSceneChildren&&v.getCurrentScene&&v.getInitialScenes&&v.name&&v.category&&(A=v.getSceneChildren(r),0<A.length)){p=v.getCurrentScene(r);N=v.getInitialScenes(r);C=g.getXPath(r);S={maqid:b.maqid+"$"+C,name:v.name,type:"SceneManagerRoot",category:v.category,parentItem:b,children:[]};for(T=0;T<A.length;T++){var V=A[T],G=m?c.getLabel(V._dvWidget):c.getLabelForNode(V),G=
h._treeNodeContent(G),z=!1,B=V===p,x=0<=N.indexOf(V),C=g.getXPath(V),G={maqid:S.maqid+"$"+C,name:G,sceneId:V.id,type:v.category,isFocus:z,isCurrent:B,isInitial:x,sceneContainerNode:r,parentItem:S,node:V,children:[]};S.children.push(G);e.push(G)}b.children.push(S);e.push(G)}}w=m?w.getChildren():d._getChildrenOfNode(r);for(r=0;r<w.length;r++)a(w[r],b)}var f=this._getScenes();if(this._editor&&f){var b=this._editor.getContext();if(b&&b.rootWidget&&b.rootNode&&b._statesLoaded){var k=b.sceneManagers,e=
[],h=this,n=d.getFocus(b.rootNode);n&&!n.state&&(n.state=d.NORMAL);var w={maqid:"root",children:[]};a(b.rootWidget,w);b=[w.children[0]];if(!this._compareStructures(b,f)){var r=null;this._tree&&this._sceneStore&&(f=this._tree.get("path"),0<f.length&&(r=f[f.length-1].maqid[0]));this._destroyTree();this._createTree(b);r&&this._tree.onLoadDeferred.then(function(){this._sceneStore.fetch({query:{maqid:r},queryOptions:{deep:!0},onComplete:dojo.hitch(this,function(a,c){if(1===a.length){var d=this._getTreeSelectionPath(a[0]);
0<d.length&&this._tree.set("path",d)}})})}.bind(this))}this._hideShowToolBar()}}},_getTreeSelectionPath:function(a){var c=[];c.splice(0,0,a.id[0]);for(a=a.parentItem&&a.parentItem[0];a;)c.splice(0,0,a.id[0]),a=a.parentItem&&a.parentItem[0];c.splice(0,0,"StoryRoot");return c},_updateSelection:function(){if(this._editor&&this._tree){var a=this._editor.getContext();a&&a._statesLoaded&&this._tree.onLoadDeferred.then(function(){var c=this._tree.get("path"),c=0<c.length?c[c.length-1].maqid[0]:null,f=a.sceneManagers,
b;for(b in f){var g=f[b];if(g.getAllSceneContainers&&g.getSceneChildren&&g.getCurrentScene){g.getAllSceneContainers();var k;this._sceneStore.fetch({query:{type:g.category},queryOptions:{deep:!0},onComplete:dojo.hitch(this,function(a,c){k=a})});for(g=0;g<k.length;g++){var e=k[g],n=this._findTreeNodeSpanByClass(e,"ScenesPaletteCurrent"),q=this._findTreeNodeSpanByClass(e,"ScenesPaletteInitial");e.isCurrent&&e.isCurrent[0]?n&&h.remove(n,"ScenesPaletteCurrentHidden"):n&&h.add(n,"ScenesPaletteCurrentHidden");
e.isInitial&&e.isInitial[0]?q&&h.remove(q,"ScenesPaletteInitialHidden"):q&&h.add(q,"ScenesPaletteInitialHidden");e.maqId&&e.maqId[0]==c&&(n=e.node&&e.node[0])&&n._maqAppStates&&(q=d.getState(n),d.setState(q,n,{focus:!0,updateWhenCurrent:!0}))}}}var w=[];this._sceneStore.fetch({query:{type:"AppState"},queryOptions:{deep:!0},onComplete:dojo.hitch(this,function(a,c){w=a})});for(g=0;g<w.length;g++)b=w[g],n=this._findTreeNodeSpanByClass(b,"ScenesPaletteCurrent"),q=this._findTreeNodeSpanByClass(b,"ScenesPaletteInitial"),
b.isCurrent&&b.isCurrent[0]?n&&h.remove(n,"ScenesPaletteCurrentHidden"):n&&h.add(n,"ScenesPaletteCurrentHidden"),b.isInitial&&b.isInitial[0]?q&&h.remove(q,"ScenesPaletteInitialHidden"):q&&h.add(q,"ScenesPaletteInitialHidden")}.bind(this))}},_updateThemeSelection:function(a){if(this._sceneStore){var c;a||(a="Normal");this._sceneStore.fetch({query:{type:"AppState",sceneId:a},queryOptions:{deep:!0},onComplete:dojo.hitch(this,function(a,d){1===a.length&&(c=a[0].sceneId[0])})});c&&this._updateSelectedScene("AppState",
c)}},_getScenes:function(){var a=[];this._sceneStore&&this._sceneStore.fetch({query:{},queryOptions:{},onComplete:dojo.hitch(this,function(c,d){function f(a,c){for(var d={name:a.name[0],type:a.type[0]},b=0;b<x.length;b++){var g=x[b];a[g]&&(d[g]=a[g][0])}c.push(d);a.children&&0<a.children.length&&(d.children=[],a.children.forEach(function(a){f(a,d.children)}))}c.forEach(function(c){f(c,a)})})});return a},_compareStructures:function(a,c){function d(a,c){if(a.length!=c.length)return!1;for(var f=0;f<
a.length;f++){var b;a:{b=a[f];for(var g=c[f],k=0;k<x.length;k++){var e=x[k];e=b[e]&&!g[e]||!b[e]&&g[e]?!1:b[e]&&b[e]!==g[e]?!1:!0;if(!e){b=!1;break a}}k=b.children&&b.children.length;e=g.children&&g.children.length;b=k&&!e||!k&&e||k&&!d(b.children,g.children)?!1:!0}if(!b)return!1}return!0}return d(a,c)},_destroyTree:function(){this._tree&&(this._tree.destroyRecursive(),this._forest.destroy(),this._tree=this._forest=this._sceneStore=null)},_createTree:function(a){require(["dijit/tree/dndSource"],function(c){c=
function(a,c,d){if(a&&c){var f,b,g;c.forInSelectedItems(function(a){if(f=a.data&&a.data.item)b=f.parentItem&&f.parentItem[0],g=b.children&&b.children.indexOf(f)});var k,e;(a=dijit.getEnclosingWidget(a).item)&&(k=a.parentItem&&a.parentItem[0])&&(e=k.children&&k.children.indexOf(a));return"over"!=d&&f&&a&&b&&k&&"AppState"==f.type[0]&&"AppState"==a.type[0]&&b==k&&0!==g&&!("before"==d&&0===e)&&!("before"==d&&g+1==e)&&!("after"==d&&g==e+1)}}.bind(this);var f=function(a,c,d){if(a.tree==this._tree){var f,
b;a.forInSelectedItems(function(a){(f=a.data&&a.data.item)&&(b=f.parentItem&&f.parentItem[0])});if((a=b.sceneContainerNode&&b.sceneContainerNode[0])&&a._maqAppStates&&a._maqAppStates.states){c=[];for(d=1;d<b.children.length;d++)c.push(b.children[d].sceneId[0]);a=new w({action:"reorder",newStatesList:c,stateContainerNode:a,context:g});g.getCommandStack().execute(a)}}}.bind(this);if(this._editor){var g=this._editor.getContext(),k=g.sceneManagers;this._sceneStore=new r({data:{identifier:"id",label:"name",
items:[]},clearOnClose:!0});this._forest=new B({store:this._sceneStore,query:{type:"file"},rootId:"StoryRoot",rootLabel:"All",childrenAttrs:["children"]});this._tree=new y({model:this._forest,persist:!1,showRoot:!1,autoExpand:!0,dndController:"dijit.tree.dndSource",dragThreshold:8,betweenThreshold:5,checkItemAcceptance:c,className:"StatesViewTree",style:"height:150px; overflow-x:hidden; overflow-y:auto;",_createTreeNode:function(a){return new v(a)},getIconClass:function(a,c){return"dijitLeaf"}});
this._tree.tree&&this._tree.tree.dndController&&b.after(this._tree.tree.dndController,"onDndDrop",f,!0);this.centerPane.domNode.appendChild(this._tree.domNode);dojo.connect(this._tree,"onClick",this,function(a){var c=this._editor,f=c?c.getContext():null,b=null,g=null,e=null;a&&a.type&&(g=a.type[0],e=a.category&&a.category[0],"AppState"==g||"SceneManagerRoot"==g&&"AppStates"==e?b=a.sceneContainerNode?a.sceneContainerNode[0]:null:a.node&&a.node[0]._maqAppStates&&(b=a.node[0]));if(this.isThemeEditor())this.publish("/davinci/states/state/changed",
[{editorClass:c.declaredClass,widget:"$all",newState:a.sceneId[0],oldState:this._themeState,context:this._editor.context}]),this._themeState=a.sceneId[0];else{f&&b&&(e="AppState"==g?a.sceneId?a.sceneId[0]:null:d.getState(b),d.setState(e,b,{focus:!0,updateWhenCurrent:!0}),"davinci.ve.PageEditor"===this._editor.declaredClass&&(f.deselectInvisible(),f.clearCachedWidgetBounds(),f.updateFocusAll()));if(a.sceneId)for(var h in k){if(c=k[h],c.selectScene&&c.selectScene({sceneId:a.sceneId[0]}))break}else a.type&&
"file"==a.type[0]&&a.node&&a.node[0]._dvWidget&&f.select(a.node[0]._dvWidget);this._updateSelection()}});var e=function(a,c){var d=dojo.mixin({},a),f=this.nextId+"";this.nextId++;d.id=f;d.parentItem=c;delete d.children;var b;b=c?this._sceneStore.newItem(d,{parent:c,attribute:"children"}):this._sceneStore.newItem(d);a.children&&a.children.forEach(function(a){e(a,b)})}.bind(this);a.forEach(function(a){e(a)});this._sceneStore.save();if(this._tree.getParent){var h=this._tree.getParent();h.resize&&window.setTimeout(function(){h.resize()},
0)}}}.bind(this))},_updateSelectedScene:function(a,c){if(this._sceneStore){for(var d=c,f=[];d;)this._sceneStore.fetch({query:{type:a,sceneId:d},queryOptions:{deep:!0},onComplete:dojo.hitch(this,function(a,c){if(1!==a.length)console.error("_sceneSelectionChanged error. currentSceneId\x3d"+d+",items.length\x3d"+a.length),d=null;else{var b=a[0];f.splice(0,0,b.id[0]);d=b.parentSceneId?b.parentSceneId[0]:null;for(b=b.parentItem&&b.parentItem[0];b;)f.splice(0,0,b.id[0]),b=b.parentItem&&b.parentItem[0]}})});
f.splice(0,0,"StoryRoot");this._tree.set("paths",[f])}},_hideShowToolBar:function(){function a(c,d){var f=c+"Disabled",b=m("."+c);b.length&&(d?h.remove(b[0],f):h.add(b[0],f))}if(this._editor){var c=this._editor.getContext&&this._editor.getContext();dojo.style(this.toolbarDiv,"display","davinci.ve.PageEditor"===this._editor.declaredClass?"block":"none");var f,b,g;f=b=g=!1;c&&c.rootNode&&((c=d.getFocus(c.rootNode))&&c.stateContainerNode&&(f=g=!0),c&&c.state&&c.state!==d.NORMAL&&(b=g=!0));a("addStateIcon",
f);a("removeStateIcon",b);a("modifyStateIcon",g)}},_treeNodeContent:function(a){var c;c=""+('\x3cspan title\x3d"'+k.InitialScene+'" class\x3d"ScenesPaletteAppStateIcon ScenesPaletteInitial"\x3e\x26#x2713;\x3c/span\x3e');c+='\x3cspan title\x3d"'+k.ActiveScene+'" class\x3d"ScenesPaletteAppStateIcon ScenesPaletteCurrent"\x3e\x3c/span\x3e';return c+("\x3cspan\x3e"+a+"\x3c/span\x3e")},_findTreeNodeSpanByClass:function(a,c){var d=this._tree.getNodesByItem(a),f=(d=d&&0<d.length?d[0]:null)?d.domNode:null;
return(d=d?dojo.query("."+c,f):[])&&0<d.length?d[0]:null},_contextEventHandler:function(){this._updateView()},_unregisterForContextEvents:function(){this._contextConnects&&(this._contextConnects.forEach(e.disconnect),this._contextConnects=null)},_registerForContextEvents:function(){var a=["widgetChanged","widgetAddedOrDeleted"];this._unregisterForContextEvents();var c=this._editor&&this._editor.getContext&&this._editor.getContext();c&&(this._contextConnects=[],a.forEach(function(a){c[a]&&this._contextConnects.push(e.connect(c,
a,this,"_contextEventHandler"))}.bind(this)))}})})},"davinci/lang/ve/ve":function(){define([],function(){return{common:"Common",widgetSpecific:"Widget",events:"Events",layout:"Layout",showMinMax:"show min/max",padding:"Padding",margins:"Margins",showtrbl:"show t/r/b/l",background:"Background",border:"Border",showDetails:"show details",fontsAndText:"Fonts/Text",shapesSVG:"SVG",properties:"properties",Scenes:"Scenes",States:"States",ActiveScene:"This scene is currently visible",AppStateFocus:"This application state is the target for application-state-specific visibility or styling changes",
InitialScene:"This scene will show initially when the page runs",chooseDeviceSilhouette:"Choose a device silhouette: ",filesHasUnsavedChanges:"The file '${0}' has unsaved changes, \"Save\" changes and continue with switch device silhouette.",selectAncestorTitle:"Select ancestor",selectAncestorLabel:"Select ancestor (closest ancestor listed first):",createNewState:"Create New State",updateCurrentState:"Update Current State",createLabel:"Create",updateLabel:"Update",modifyState:"Modify State",modifyLabel:"Update",
stateLabel:"Name",enterStateName:"Please enter a state name.",stateNameExists:"State name '${name}' already exists. Please enter a different state name.",renameState:"Rename State",renameLabel:"Rename",cancelLabel:"Cancel",newStateLabel:"New name:",manageStates:"Manage Widget Visibility for Different States",manageStatesCheckLabel:"Check:",manageStatesCheckCurrentStateOnly:"Current state",manageStatesCheckAll:"All",manageStatesUncheckAll:"None",manageStatesCheckBackgroundOnly:"Background only",manageStatesAllVisibleFromBackground:"(Visible from Background)",
manageStatesSomeVisibleFromBackground:"(Some visible from Background)",manageStatesSomeVisibleSomeHidden:"(Some visible, some hidden)",initialStateCheckBoxLabel:"Initial state at document load time",EnableApplicationStates:"Enable/disable application states",EnableAsStateContainerDescription:"Setting the check box below and clicking OK will allow custom application states to be defined on the currently selected widget.",DisableAsStateContainerDescription:"Unsetting the check box below and clicking OK will disallow custom application states on the currently selected widget.",
DisableAsStateContainerDataLoss:"Any existing interactivity based on existing application states will be lost.",EnableAsStateContainerWidgetLabel:"Application states are enabled on this widget",EnableApplicationStatesCurrentWidget:"Currently selected widget",EnableApplicationStatesCurrentStates:"Current application states",EnableApplicationStatesNone:"(none)",NewWidgetsCurrentStateTitleBackground:"Toggle whether new widgets go to Background or selected state (current value: Background)",NewWidgetsCurrentStateTitleCurrentState:"Toggle whether new widgets go to Background or selected state (current value: selected state)",
richTextInputHelp:"Provides Rich Text (word processor-like) editing of HTML.",smartInputHelp1:"If you use any markup characters (\x26lt;,\x26gt;,\x26amp;), you need to specify whether the text represents literal (plain) text or HTML markup that should be parsed (using an innerHTML assignment).",smartInputHelp2:"Text represents literal (plain) text.",loading:"Loading...",htmlMarkup:"HTML markup",creatingStyleRules:"Creating Style Rules with app.css",propChangeCannotComplete:"This property change cannot be completed because the operation attempts to modify a read-only theme CSS file.",
toChangeProperty:"To change this property, one technique is to add a class to this widget (at top of Properties palette)  and then open up the CSS Details pane to target a style rule within your app.css file, as described at ${0}.",errorModifyingValue:"Error modifying value",changeWillModify:"This change will modify one of the CSS style rules defined within a 'CSS theme' and will therefore probably impact other widgets on a global basis.",insteadOfChanging:"Instead of changing the theme CSS files, it is usually better to add a class to this widget (at the top of the Properties palette) and then open up the CSS Details pane to target a style rule within your app.css file, as described at ${0}.",
okToProceed:"OK to proceed with this change?",valueIsOverriden:"This value is overriden and can not be changed.",applyToWhich:"Apply to which style rule:",onlyApplyToState:" Only apply to current state (${0})",newRule:"[class: ${0} - New rule in ${1}] ",newThemeRule:"[theme: - New rule in ${0}] ",existingRule:"[class: ${0} - Existing rule in ${1}] ",line:" line: ${0})",propUndefined:"undefined",bgdType_emptystring:"",bgdType_none:"none",bgdType_url:"image",bgdType_linear:"linear gradient",bgdType_radial:"radial gradient",
bgdType_other:"other",bgdPickFile:"Choose...",bgdStop:"Stop",bgdAddStop:"Add a new gradient stop after this stop",bgdRemoveStop:"Remove this gradient stop",bgdBackgroundColor:"background-color:",bgdBackgroundImageType:"background-image type:",bgdImageUrl:"Image URL:",bgdUrl:"URL:",bgdColorStops:"Color stops:",bgdColor:"color",bgdPosition:"position",bgdOptions:"Options:",bgdAngle:"Angle:",bgdPosition2:"Position:",bgdShape:"Shape:",bgdExtent:"Extent:",bgdBackgroundRepeat:"background-repeat:",bgdBackgroundPosition:"background-position:",
bgdBackgroundSize:"background-size:",bgdBackgroundOrigin:"background-origin:",bgdBackgroundClip:"background-clip:",bgdBackgroundImageValue:"'background-image' value:",bgdTemplate:"Template:",colorPicker:"Color picker...",removeValue:"Remove Value",selectColor:"select a color",toolBarFor:"for: ",noSelection:"(no selection)",toolBarClass:"class:",toolBarId:"ID:",idAlreadyUsed:"This id is already used by another widget",noValidParents:"No valid parents at this position",willBeChildOf:"Will become a child of:",
candidateParents:"Candidate parents:",toChangePress:"To change, press numbers",vteWarningTitle:"Theme Version Warning",vteWarningMessage:"Theme version does not match Maqetta version this could produce unexpected results. We suggest recreating the custom theme using the current version of Maqetta and deleting the existing theme.",vteWarningUnsuportedBrowserTitle:"Unsupported brower",vteWarningUnsuportedBrowserMessage:"Editing mobile themes is only supported on webkit browsers, we sugguest using Chrome or Safari to customize mobile themes.",
vteWarningToolkitMessage:"Theme version does not match workspace library version this could produce unexpected results. We suggest recreating the custom theme using the current version of Maqetta and deleting the existing theme.",vteErrorTitle:"Theme Version Error",vteErrorMessage:"Theme version is not supported by this version of Maqetta. You must recreating custom theme using the current version of Maqetta and deleting the existing theme..",vteErrorSavingResourceMessage:"error saving resource\n",
"SourceComboButton-source":"Source","SourceComboButton-splitHorizontal":"Split-H","SourceComboButton-splitVertical":"Split-V","LayoutDropDownButton-flow":"Flow","LayoutDropDownButton-absolute":"Absolute"}})},"davinci/XPathUtils":function(){define(function(){function p(h){this.node=h}p.prototype={name:function(){return this.node.nodeName},parent:function(){var h=this.node.parentNode;if(h!==this.node.ownerDocument)return new p(h)},index:function(){var h=this.node.nodeName,e=this.node.parentNode,b=!1,
k=0;e.id||(e.id="__XPATH_UTILS_TEMP_ID__"+Date.now(),b=!0);h=e.querySelectorAll("#"+e.id+"\x3e"+h);if(1<h.length)for(var a=0,f=h.length;a<f;a++)if(h[a]===this.node){k=a+1;break}b&&(e.id="");return k}};var m=/(\w+)(?:\[(\d+)\])?/;return{getXPath:function(h,e){function b(a,f){var e=f.name(),g=f.parent();if(g){var d=f.index();a=(d?e+("["+d+"]"):e+"[1]")+(a?"/"+a:"");return b(a,g)}return"/"+e+"/"+a}e=e||p;var k=new e(h);return b("",k).toLowerCase()},toCssPath:function(h){"/"===h.charAt(0)&&(h=h.substr(1));
var e="";h.split("/").forEach(function(b){b=b.match(m);var k=b[2];e+=(e?"\x3e":"")+b[1];k&&(e+=":nth-of-type("+k+")")});return e}}})},"davinci/ve/commands/AppStateCommand":function(){define("dojo/_base/declare dojo/_base/lang dojo/topic davinci/XPathUtils davinci/html/HtmlFileXPathAdapter davinci/ve/States".split(" "),function(p,m,h,e,b,k){return p("davinci.ve.commands.AppStateCommand",null,{name:"AppStateCommand",_actions:["add","remove","modify","reorder"],constructor:function(a){if(a){this._params=
m.mixin({},a);var f=a.stateContainerNode;f&&f._dvWidget&&(this._params.stateContainerId=f.id,this._params.stateContainerXpath=e.getXPath(f._dvWidget._srcElement,b));"reorder"==this._params.action&&((f=this._getStateContainerNode())&&a.newStatesList.length?(this._oldStatesList=k.getStates(f),this._oldStatesList.shift()):this._params=null)}},_validParams:function(){return this._params&&0<=this._actions.indexOf(this._params.action)&&this._params.stateContainerNode&&this._params.stateContainerId&&this._params.stateContainerXpath&&
this._params.context},_getStateContainerNode:function(){var a,f=this._params.context;if(!f)return a;var b=f.getDocument();if(!b)return a;var g=this._params.stateContainerXpath;a=b.getElementById(this._params.stateContainerId);a||(f=f.model.evaluate(g))&&(a=b.getElementById(f.getAttribute("id")));return a},execute:function(){if(this._validParams()){var a=this._params.action,f=this._params.state,b=this._getStateContainerNode();b&&("add"==a?(k.add(b,f),this._setStateAndFocus(b)):"remove"==a?(this._stateIndex=
b._maqAppStates&&b._maqAppStates.states&&b._maqAppStates.states.indexOf(f),this._preservedNodesId=[],this._preservedNodesXpath=[],this._preservedStateValues=[],this._preserveStateFromNodeRecursive(b,f),k.remove(b,f),this._setStateAndFocus(b)):"modify"==a?(this._params.newState&&(this._traverseRenameState(this._params.state,this._params.newState),h.publish("/davinci/states/state/renamed",{node:b,oldName:this._params.state,newName:this._params.newState,stateContainerNode:b})),"string"==typeof this._params.initialState&&
(this._oldInitialState=k.getInitial(b),a="undefined"==this._params.initialState?void 0:this._params.initialState,this._params.newState&&a==this._params.state&&(a=this._params.newState),k.setState(a,b,{initial:a,updateWhenCurrent:!0})),this._setStateAndFocus(b)):"reorder"==a&&b&&b._maqAppStates&&b._dvWidget&&(b._maqAppStates.states=this._params.newStatesList,a=k.stringifyWithQuotes(b._maqAppStates),b.setAttribute(k.APPSTATES_ATTRIBUTE,a),srcElement=b._dvWidget._srcElement,srcElement.setAttribute(k.APPSTATES_ATTRIBUTE,
a),h.publish("/davinci/states/statesReordered",[b,this._params.newStatesList])))}},undo:function(){if(this._validParams()){var a=this._params.action,f=this._params.state,b=this._getStateContainerNode();b&&("add"==a?(k.remove(b,f),this._setStateAndFocus(b)):"remove"==a?(k.add(b,f,{index:this._stateIndex}),this._restoreState(f),k.setState(f,b,{focus:!0}),this._setStateAndFocus(b)):"modify"==a?("string"==typeof this._params.initialState&&k.setState(this._oldInitialState,b,{initial:this._oldInitialState,
updateWhenCurrent:!0}),this._params.newState&&this._traverseRenameState(this._params.newState,this._params.state),this._setStateAndFocus(b)):"reorder"==a&&b&&b._maqAppStates&&b._dvWidget&&(b._maqAppStates.states=this._oldStatesList,a=k.stringifyWithQuotes(b._maqAppStates),b.setAttribute(k.APPSTATES_ATTRIBUTE,a),srcElement=b._dvWidget._srcElement,srcElement.setAttribute(k.APPSTATES_ATTRIBUTE,a),h.publish("/davinci/states/statesReordered",[b,this._params.newStatesList])))}},_setStateAndFocus:function(a){var b=
k.getState(a);k.setState(b,a,{focus:b,updateWhenCurrent:!0})},_preserveStateFromNodeRecursive:function(a,b){var e=a._dvWidget;if(a&&e&&b){this._preserveStateFromNode(a,b);for(var e=e.getChildren(),g=0;g<e.length;g++)this._preserveStateFromNodeRecursive(e[g].domNode,b)}},_preserveStateFromNode:function(a,f){a&&a._maqDeltas&&a._maqDeltas[f]&&a._dvWidget&&a._dvWidget._srcElement&&(this._preservedNodesId.push(a.id),this._preservedNodesXpath.push(e.getXPath(a._dvWidget._srcElement,b)),this._preservedStateValues.push(m.clone(a._maqDeltas[f])))},
_restoreState:function(a){var b=this._params.context;if(b&&this._preservedNodesId){var e=b.getDocument();if(e)for(var g=0;g<this._preservedNodesId.length;g++){var d=this._preservedNodesXpath[g],c=e.getElementById(this._preservedNodesId[g]);c||(d=b.model.evaluate(d))&&(c=e.getElementById(d.getAttribute("id")));c&&(c._maqDeltas||(c._maqDeltas={}),c._maqDeltas[a]=m.clone(this._preservedStateValues[g]),k._updateSrcState(c))}}},_traverseRenameState:function(a,b){var e=this._getStateContainerNode();if(e&&
(k.rename(e,{oldName:a,newName:b}),e=e._dvWidget&&e._dvWidget._srcElement)){var g=null,d=!1,c=/^(.*davinci.states.setState\s*\(\s*)('[^']*'|"[^"]*")([^\)]*\).*)$/,h=/^(['"])(.*)(['"])$/;e.visit({visit:dojo.hitch(this,function(e){if("HTMLElement"==e.elementType)g=e;else if("HTMLAttribute"==e.elementType){var k=e.name;if(k&&"on"==k.substr(0,2).toLowerCase()&&(e=e.value.match(c))){var n=e[2].match(h);n&&n[2]==a&&(g.setAttribute(k,e[1]+n[1]+b+n[3]+e[3]),d=!0)}}})});d&&(e=this._params&&this._params.context&&
this._params.context.editor)&&e._visualChanged()}}})})},"davinci/html/HtmlFileXPathAdapter":function(){define(function(){function p(m){this.elem=m}p.prototype={name:function(){return this.elem.tag},parent:function(){var m=this.elem.parent;if("HTMLFile"!==m.elementType)return new p(m)},index:function(){var m=this.elem.tag,h=this.elem.parent.children,e=0;if(1===h.length)return 0;h=h.filter(function(b){return b.tag===m});1<h.length&&h.some(function(b,k){if(b===this.elem)return e=k+1,!0},this);return e}};
return p})},"dojo/data/ItemFileWriteStore":function(){define("../_base/lang ../_base/declare ../_base/array ../_base/json ../_base/kernel ./ItemFileReadStore ../date/stamp".split(" "),function(p,m,h,e,b,k,a){return m("dojo.data.ItemFileWriteStore",k,{constructor:function(b){this._features["dojo.data.api.Write"]=!0;this._features["dojo.data.api.Notification"]=!0;this._pending={_newItems:{},_modifiedItems:{},_deletedItems:{}};this._datatypeMap.Date.serialize||(this._datatypeMap.Date.serialize=function(b){return a.toISOString(b,
{zulu:!0})});b&&!1===b.referenceIntegrity&&(this.referenceIntegrity=!1);this._saveInProgress=!1},referenceIntegrity:!0,_assert:function(a){if(!a)throw Error("assertion failed in ItemFileWriteStore");},_getIdentifierAttribute:function(){return this.getFeatures()["dojo.data.api.Identity"]},newItem:function(a,b){this._assert(!this._saveInProgress);this._loadFinished||this._forceLoad();if("object"!=typeof a&&"undefined"!=typeof a)throw Error("newItem() was passed something other than an object");var g=
null,d=this._getIdentifierAttribute();if(d===Number)g=this._arrayOfAllItems.length;else{g=a[d];if("undefined"===typeof g)throw Error("newItem() was not passed an identity for the new item");if(p.isArray(g))throw Error("newItem() was not passed an single-valued identity");}this._itemsByIdentity&&this._assert("undefined"===typeof this._itemsByIdentity[g]);this._assert("undefined"===typeof this._pending._newItems[g]);this._assert("undefined"===typeof this._pending._deletedItems[g]);var c={};c[this._storeRefPropName]=
this;c[this._itemNumPropName]=this._arrayOfAllItems.length;this._itemsByIdentity&&(this._itemsByIdentity[g]=c,c[d]=[g]);this._arrayOfAllItems.push(c);d=null;if(b&&b.parent&&b.attribute){var d={item:b.parent,attribute:b.attribute,oldValue:void 0},e=this.getValues(b.parent,b.attribute);if(e&&0<e.length){var k=e.slice(0,e.length);d.oldValue=1===e.length?e[0]:e.slice(0,e.length);k.push(c);this._setValueOrValues(b.parent,b.attribute,k,!1);d.newValue=this.getValues(b.parent,b.attribute)}else this._setValueOrValues(b.parent,
b.attribute,c,!1),d.newValue=c}else c[this._rootItemPropName]=!0,this._arrayOfTopLevelItems.push(c);this._pending._newItems[g]=c;for(var h in a){if(h===this._storeRefPropName||h===this._itemNumPropName)throw Error("encountered bug in ItemFileWriteStore.newItem");g=a[h];p.isArray(g)||(g=[g]);c[h]=g;if(this.referenceIntegrity)for(e=0;e<g.length;e++)k=g[e],this.isItem(k)&&this._addReferenceToMap(k,c,h)}this.onNew(c,d);return c},_removeArrayElement:function(a,b){var g=h.indexOf(a,b);return-1!=g?(a.splice(g,
1),!0):!1},deleteItem:function(a){this._assert(!this._saveInProgress);this._assertIsItem(a);var b=a[this._itemNumPropName],g=this.getIdentity(a);if(this.referenceIntegrity){var d=this.getAttributes(a);a[this._reverseRefMap]&&(a["backup_"+this._reverseRefMap]=p.clone(a[this._reverseRefMap]));h.forEach(d,function(c){h.forEach(this.getValues(a,c),function(d){this.isItem(d)&&(a["backupRefs_"+this._reverseRefMap]||(a["backupRefs_"+this._reverseRefMap]=[]),a["backupRefs_"+this._reverseRefMap].push({id:this.getIdentity(d),
attr:c}),this._removeReferenceFromMap(d,a,c))},this)},this);if(d=a[this._reverseRefMap])for(var c in d){var e=null;if(e=this._itemsByIdentity?this._itemsByIdentity[c]:this._arrayOfAllItems[c])for(var k in d[c]){var r=this.getValues(e,k)||[],m=h.filter(r,function(a){return!(this.isItem(a)&&this.getIdentity(a)==g)},this);this._removeReferenceFromMap(a,e,k);m.length<r.length&&this._setValueOrValues(e,k,m,!0)}}}this._arrayOfAllItems[b]=null;a[this._storeRefPropName]=null;this._itemsByIdentity&&delete this._itemsByIdentity[g];
this._pending._deletedItems[g]=a;a[this._rootItemPropName]&&this._removeArrayElement(this._arrayOfTopLevelItems,a);this.onDelete(a);return!0},setValue:function(a,b,g){return this._setValueOrValues(a,b,g,!0)},setValues:function(a,b,g){return this._setValueOrValues(a,b,g,!0)},unsetAttribute:function(a,b){return this._setValueOrValues(a,b,[],!0)},_setValueOrValues:function(a,b,g,d){this._assert(!this._saveInProgress);this._assertIsItem(a);this._assert(p.isString(b));this._assert("undefined"!==typeof g);
var c=this._getIdentifierAttribute();if(b==c)throw Error("ItemFileWriteStore does not have support for changing the value of an item's identifier.");var c=this._getValueOrValues(a,b),e=this.getIdentity(a);if(!this._pending._modifiedItems[e]){var k={},r;for(r in a)k[r]=r===this._storeRefPropName||r===this._itemNumPropName||r===this._rootItemPropName?a[r]:r===this._reverseRefMap?p.clone(a[r]):a[r].slice(0,a[r].length);this._pending._modifiedItems[e]=k}e=!1;if(p.isArray(g)&&0===g.length){if(e=delete a[b],
g=void 0,this.referenceIntegrity&&c){r=c;p.isArray(r)||(r=[r]);for(var m=0;m<r.length;m++)k=r[m],this.isItem(k)&&this._removeReferenceFromMap(k,a,b)}}else{e=p.isArray(g)?g.slice(0,g.length):[g];if(this.referenceIntegrity)if(c){r=c;p.isArray(r)||(r=[r]);var y={};h.forEach(r,function(a){this.isItem(a)&&(a=this.getIdentity(a),y[a.toString()]=!0)},this);h.forEach(e,function(c){if(this.isItem(c)){var d=this.getIdentity(c);y[d.toString()]?delete y[d.toString()]:this._addReferenceToMap(c,a,b)}},this);for(m in y)this._removeReferenceFromMap(this._itemsByIdentity?
this._itemsByIdentity[m]:this._arrayOfAllItems[m],a,b)}else for(m=0;m<e.length;m++)k=e[m],this.isItem(k)&&this._addReferenceToMap(k,a,b);a[b]=e;e=!0}if(d)this.onSet(a,b,c,g);return e},_addReferenceToMap:function(a,b,g){b=this.getIdentity(b);var d=a[this._reverseRefMap];d||(d=a[this._reverseRefMap]={});(a=d[b])||(a=d[b]={});a[g]=!0},_removeReferenceFromMap:function(a,b,g){b=this.getIdentity(b);var d=a[this._reverseRefMap],c;if(d){for(c in d)c==b&&(delete d[c][g],this._isEmpty(d[c])&&delete d[c]);this._isEmpty(d)&&
delete a[this._reverseRefMap]}},_dumpReferenceMap:function(){var a;for(a=0;a<this._arrayOfAllItems.length;a++);},_getValueOrValues:function(a,b){var g=void 0;this.hasAttribute(a,b)&&(g=this.getValues(a,b),g=1==g.length?g[0]:g);return g},_flatten:function(a){if(this.isItem(a))return{_reference:this.getIdentity(a)};if("object"===typeof a)for(var b in this._datatypeMap){var g=this._datatypeMap[b];if(p.isObject(g)&&!p.isFunction(g)){if(a instanceof g.type){if(!g.serialize)throw Error("ItemFileWriteStore:  No serializer defined for type mapping: ["+
b+"]");return{_type:b,_value:g.serialize(a)}}}else if(a instanceof g)return{_type:b,_value:a.toString()}}return a},_getNewFileContentString:function(){var a={},b=this._getIdentifierAttribute();b!==Number&&(a.identifier=b);this._labelAttr&&(a.label=this._labelAttr);a.items=[];for(b=0;b<this._arrayOfAllItems.length;++b){var g=this._arrayOfAllItems[b];if(null!==g){var d={},c;for(c in g)if(c!==this._storeRefPropName&&c!==this._itemNumPropName&&c!==this._reverseRefMap&&c!==this._rootItemPropName){var k=
this.getValues(g,c);if(1==k.length)d[c]=this._flatten(k[0]);else for(var h=[],r=0;r<k.length;++r)h.push(this._flatten(k[r])),d[c]=h}a.items.push(d)}}return e.toJson(a,!0)},_isEmpty:function(a){var b=!0;if(p.isObject(a))for(var g in a){b=!1;break}else p.isArray(a)&&0<a.length&&(b=!1);return b},save:function(a){this._assert(!this._saveInProgress);this._saveInProgress=!0;var e=this,g=function(){e._pending={_newItems:{},_modifiedItems:{},_deletedItems:{}};e._saveInProgress=!1;a&&a.onComplete&&a.onComplete.call(a.scope||
b.global)},d=function(c){e._saveInProgress=!1;a&&a.onError&&a.onError.call(a.scope||b.global,c)};if(this._saveEverything){var c=this._getNewFileContentString();this._saveEverything(g,d,c)}this._saveCustom&&this._saveCustom(g,d);this._saveEverything||this._saveCustom||g()},revert:function(){this._assert(!this._saveInProgress);for(var a in this._pending._modifiedItems){var b=this._pending._modifiedItems[a],g=null,g=this._itemsByIdentity?this._itemsByIdentity[a]:this._arrayOfAllItems[a];b[this._storeRefPropName]=
this;for(var d in g)delete g[d];p.mixin(g,b)}var c;for(a in this._pending._deletedItems)c=this._pending._deletedItems[a],c[this._storeRefPropName]=this,b=c[this._itemNumPropName],c["backup_"+this._reverseRefMap]&&(c[this._reverseRefMap]=c["backup_"+this._reverseRefMap],delete c["backup_"+this._reverseRefMap]),this._arrayOfAllItems[b]=c,this._itemsByIdentity&&(this._itemsByIdentity[a]=c),c[this._rootItemPropName]&&this._arrayOfTopLevelItems.push(c);for(a in this._pending._deletedItems)c=this._pending._deletedItems[a],
c["backupRefs_"+this._reverseRefMap]&&(h.forEach(c["backupRefs_"+this._reverseRefMap],function(a){this._addReferenceToMap(this._itemsByIdentity?this._itemsByIdentity[a.id]:this._arrayOfAllItems[a.id],c,a.attr)},this),delete c["backupRefs_"+this._reverseRefMap]);for(a in this._pending._newItems)b=this._pending._newItems[a],b[this._storeRefPropName]=null,this._arrayOfAllItems[b[this._itemNumPropName]]=null,b[this._rootItemPropName]&&this._removeArrayElement(this._arrayOfTopLevelItems,b),this._itemsByIdentity&&
delete this._itemsByIdentity[a];this._pending={_newItems:{},_modifiedItems:{},_deletedItems:{}};return!0},isDirty:function(a){return a?(a=this.getIdentity(a),(new Boolean(this._pending._newItems[a]||this._pending._modifiedItems[a]||this._pending._deletedItems[a])).valueOf()):!this._isEmpty(this._pending._newItems)||!this._isEmpty(this._pending._modifiedItems)||!this._isEmpty(this._pending._deletedItems)},onSet:function(a,b,g,d){},onNew:function(a,b){},onDelete:function(a){},close:function(a){if(this.clearOnClose){if(this.isDirty())throw Error("dojo.data.ItemFileWriteStore: There are unsaved changes present in the store.  Please save or revert the changes before invoking close.");
this.inherited(arguments)}}})})},"davinci/ve/views/SwitchingStyleView":function(){define("dojo/_base/declare dojo/_base/kernel davinci/lang/ve dijit/lang/_common dijit/layout/TabContainer xide/utils dijit/layout/ContentPane davinci/Runtime davinci/workbench/WidgetLite davinci/ve/widgets/HTMLStringUtil davinci/ve/widgets/WidgetToolBar davinci/ve/widgets/Cascade davinci/ve/widgets/CommonProperties davinci/ve/widgets/WidgetProperties davinci/ve/widgets/EventSelection xide/registry".split(" "),function(p,
m,h,e,b,k,a,f,n,g,d,c,q,w,r,B){return p("davinci.ve.views.SwitchingStyleView",[n],{_editor:null,_widget:null,_subWidget:null,_titleBarDiv:"\x3cdiv class\x3d'palette_titleBarDiv'\x3e\x3cspan class\x3d'paletteCloseBox'\x3e\x3c/span\x3e\x3cspan class\x3d'titleBarDivTitle'\x3e\x3c/span\x3e\x3c/div\x3e",constructor:function(a,c){},pageTemplate:[{key:"widgetSpecific",className:"maqPropertySection page_editor_only",addCommonPropertiesAtTop:!1,html:"\x3cdiv dojoType\x3d'davinci.ve.widgets.WidgetProperties'\x3e\x3c/div\x3e"},
{key:"events",className:"maqPropertySection page_editor_only",addCommonPropertiesAtTop:!1,pageTemplate:{html:"\x3cdiv dojoType\x3d'davinci.ve.widgets.EventSelection'\x3e\x3c/div\x3e"}},{key:"layout",className:"maqPropertySection",addCommonPropertiesAtTop:!0,pageTemplate:[{display:"width",type:"multi",target:["width"],values:["","auto","100%","200px","10em"]},{display:"height",type:"multi",target:["height"],values:["","auto","100%","200px","10em"]},{html:"\x26nbsp;"},{key:"showMinMax",display:"\x26nbsp;\x26nbsp;\x26nbsp;",
type:"toggleSection",pageTemplate:[{display:"min-height",type:"multi",target:["min-height"],rowClass:"propertiesSectionHidden"},{display:"max-height",type:"multi",target:["max-height"],rowClass:"propertiesSectionHidden"},{display:"min-width",type:"multi",target:["min-width"],rowClass:"propertiesSectionHidden"},{display:"max-width",type:"multi",target:["max-width"],rowClass:"propertiesSectionHidden"},{html:"\x26nbsp;",rowClass:"propertiesSectionHidden"}]},{display:"position",type:"combo",target:["position"],
values:["","absolute","fixed","relative","static"]},{display:"left",type:"multi",target:["left"],values:["","0px","1em"]},{display:"top",type:"multi",target:["top"],values:["","0px","1em"]},{display:"right",type:"multi",target:["right"],values:["","0px","1em"]},{display:"bottom",type:"multi",target:["bottom"],values:["","0px","1em"]},{display:"display",type:"combo",target:["display"],values:["","none","block","inline","inline-block"]},{display:"opacity",type:"multi",target:["opacity"],values:["0",
"0.5","1.0"]},{display:"box-shadow",type:"text",target:["box-shadow"],value:["","none","1px 1px rgba(0,0,0,.5)"]},{display:"float",type:"combo",target:["float"],values:["","none","left","right"]},{display:"clear",type:"combo",target:["clear"],values:["","none","left","right","both"]},{display:"overflow",type:"combo",target:["overflow"],values:["","visible","hidden","scroll","auto"]},{display:"z-index",type:"multi",target:["z-index"],values:" auto 0 1 100 -1 -100".split(" ")},{display:"box-sizing",
type:"combo",target:["box-sizing","-webkit-box-sizing","-ms-box-sizing","-moz-box-sizing"],values:["","content-box","border-box"]}]},{key:"padding",className:"maqPropertySection",addCommonPropertiesAtTop:!0,pageTemplate:[{display:"\x3cb\x3e(padding)\x3c/b\x3e",type:"multi",target:["padding"],values:["","0px","1em"]},{key:"showtrbl",display:"\x26nbsp;\x26nbsp;\x26nbsp;",type:"toggleSection",pageTemplate:[{display:"padding-top",type:"multi",target:["padding-top"],values:["","0px","1em"],rowClass:"propertiesSectionHidden"},
{display:"padding-right",type:"multi",target:["padding-right"],values:["","0px","1em"],rowClass:"propertiesSectionHidden"},{display:"padding-bottom",type:"multi",target:["padding-bottom"],values:["","0px","1em"],rowClass:"propertiesSectionHidden"},{display:"padding-left",type:"multi",target:["padding-left"],values:["","0px","1em"],rowClass:"propertiesSectionHidden"}]}]},{key:"margins",className:"maqPropertySection",addCommonPropertiesAtTop:!0,pageTemplate:[{display:"\x3cb\x3e(margin)\x3c/b\x3e",type:"multi",
target:["margin"],values:["","0px","1em"]},{key:"showtrbl",display:"\x26nbsp;\x26nbsp;\x26nbsp;",type:"toggleSection",pageTemplate:[{display:"margin-top",type:"multi",target:["margin-top"],values:["","0px","1em"],rowClass:"propertiesSectionHidden"},{display:"margin-right",type:"multi",target:["margin-right"],values:["","0px","1em"],rowClass:"propertiesSectionHidden"},{display:"margin-bottom",type:"multi",target:["margin-bottom"],values:["","0px","1em"],rowClass:"propertiesSectionHidden"},{display:"margin-left",
type:"multi",target:["margin-left"],values:["","0px","1em"],rowClass:"propertiesSectionHidden"}]}]},{key:"background",className:"maqPropertySection",addCommonPropertiesAtTop:!0,pageTemplate:[{display:"background-color",type:"background",target:["background-color"],colorswatch:!0},{display:"background-image",type:"background",target:["background-image"],values:["","none"]},{display:"background-repeat",type:"background",values:["","repeat","repeat-x","repeat-y","no-repeat"],target:["background-repeat"]},
{display:"background-position",type:"background",target:["background-position"],values:";0px 0px;0% 0%;left top;center center;right bottom".split(";")},{display:"background-size",type:"background",target:["background-size"],values:["","auto","contain","cover","100%"]},{display:"background-origin",type:"background",target:["background-origin"],values:["","border-box","padding-box","content-box"]},{display:"background-clip",type:"background",target:["background-clip"],values:["","border-box","padding-box",
"content-box"]}]},{key:"border",className:"maqPropertySection",addCommonPropertiesAtTop:!0,pageTemplate:[{display:"\x3cb\x3e(border)\x3c/b\x3e",type:"multi",target:["border"],values:["","none","1px solid black"]},{display:"show",type:"combo",values:["none","props","sides","all"],id:"properties_show_select",onchange:function(a){if("number"==typeof a){var c=function(a,c,d,b,f){for(;c<=d;c++){var g=m.byId(a[c].rowId);c>=b&&c<=f?m.removeClass(g,"propertiesSectionHidden"):m.addClass(g,"propertiesSectionHidden")}};
if(this.pageTemplate){a=this.pageTemplate[a];var d;a&&a.id&&(a=m.byId(a.id))&&(d=a.value);m.isString(d)&&("none"===d?c(this.pageTemplate,2,20,-1,-1):"sides"===d?c(this.pageTemplate,2,20,2,5):"props"===d?c(this.pageTemplate,2,20,6,8):"all"===d&&c(this.pageTemplate,2,20,9,20))}}}},{display:"border-top",type:"multi",target:["border-top"],values:["","none","1px solid black"],rowClass:"propertiesSectionHidden"},{display:"border-right",type:"multi",target:["border-right"],values:["","none","1px solid black"],
rowClass:"propertiesSectionHidden"},{display:"border-bottom",type:"multi",target:["border-bottom"],values:["","none","1px solid black"],rowClass:"propertiesSectionHidden"},{display:"border-left",type:"multi",target:["border-left"],values:["","none","1px solid black"],rowClass:"propertiesSectionHidden"},{display:"border-width",type:"multi",target:["border-width"],values:["","1px","1em"],rowClass:"propertiesSectionHidden"},{display:"border-style",type:"multi",target:["border-style"],values:["","none",
"solid","dotted","dashed"],rowClass:"propertiesSectionHidden"},{display:"border-color",type:"color",target:["border-color"],rowClass:"propertiesSectionHidden"},{display:"border-top-width",type:"multi",target:["border-top-width"],values:["","1px","1em"],rowClass:"propertiesSectionHidden"},{display:"border-top-style",type:"multi",target:["border-top-style"],values:["","none","solid","dotted","dashed"],rowClass:"propertiesSectionHidden"},{display:"border-top-color",type:"color",target:["border-top-color"],
rowClass:"propertiesSectionHidden"},{display:"border-right-width",type:"multi",target:["border-right-width"],values:["","1px","1em"],rowClass:"propertiesSectionHidden"},{display:"border-right-style",type:"multi",target:["border-right-style"],values:["","none","solid","dotted","dashed"],rowClass:"propertiesSectionHidden"},{display:"border-right-color",type:"color",target:["border-right-color"],rowClass:"propertiesSectionHidden"},{display:"border-bottom-width",type:"multi",target:["border-bottom-width"],
values:["","1px","1em"],rowClass:"propertiesSectionHidden"},{display:"border-bottom-style",type:"multi",target:["border-bottom-style"],values:["","none","solid","dotted","dashed"],rowClass:"propertiesSectionHidden"},{display:"border-bottom-color",type:"color",target:["border-bottom-color"],rowClass:"propertiesSectionHidden"},{display:"border-left-width",type:"multi",target:["border-left-width"],values:["","1px","1em"],rowClass:"propertiesSectionHidden"},{display:"border-left-style",type:"multi",target:["border-left-style"],
values:["","none","solid","dotted","dashed"],rowClass:"propertiesSectionHidden"},{display:"border-left-color",type:"color",target:["border-left-color"],rowClass:"propertiesSectionHidden"},{display:"border-collapse",type:"combo",target:["border-collapse"],values:["","separate","collapse"]},{display:"\x3cb\x3e(border-radius)\x3c/b\x3e",type:"multi",target:["border-radius","-moz-border-radius"],values:["","0px","6px"]},{key:"showDetails",display:"",type:"toggleSection",pageTemplate:[{display:"border-top-left-radius",
type:"multi",target:["border-top-left-radius","-moz-border-radius-topleft"],values:["","0px","6px"],rowClass:"propertiesSectionHidden"},{display:"border-top-right-radius",type:"multi",target:["border-top-right-radius","-moz-border-radius-topright"],values:["","0px","6px"],rowClass:"propertiesSectionHidden"},{display:"border-bottom-right-radius",type:"multi",target:["border-bottom-right-radius","-moz-border-radius-bottomright"],values:["","0px","6px"],rowClass:"propertiesSectionHidden"},{display:"border-bottom-left-radius",
type:"multi",target:["border-bottom-left-radius","-moz-border-radius-bottomleft"],values:["","0px","6px"],rowClass:"propertiesSectionHidden"}]}]},{key:"fontsAndText",className:"maqPropertySection",addCommonPropertiesAtTop:!0,pageTemplate:[{display:"font",type:"text",target:["font"]},{display:"font-family",type:"font",target:["font-family"]},{display:"size",type:"multi",target:["font-size"],values:["","100%","1em","10px","10pt"]},{display:"color",type:"color",target:["color"]},{display:"font-weight",
type:"combo",target:["font-weight"],values:["","normal","bold"]},{display:"font-style",type:"combo",target:["font-style"],values:["","normal","italic"]},{display:"text-decoration",type:"combo",target:["text-decoration"],values:["","none","underline","line-through"]},{display:"text-align",type:"combo",target:["text-align"],values:["","left","center","right","justify"]},{display:"vertical-align",type:"combo",target:["vertical-align"],values:["","baseline","top","middle","bottom"]},{display:"white-space",
type:"combo",target:["white-space"],values:" normal nowrap pre pre-line pre-wrap".split(" ")},{display:"text-indent",type:"multi",target:["text-indent"],values:["","0","1em","10px"]},{display:"line-height",type:"multi",target:["line-height"],values:["","normal","1.2","120%"]}]}],buildRendering:function(){this.domNode=m.doc.createElement("div");m.addClass(this.domNode,"propertiesContent");var a;a=""+this._titleBarDiv;a+="\x3cdiv class\x3d'propertiesToolBar' dojoType\x3d'davinci.ve.widgets.WidgetToolBar'\x3e\x3c/div\x3e\x3cdiv dojoType\x3d'davinci.ve.widgets.WidgetProperties'\x3e\x3c/div\x3e";
a+="\x3cdiv class\x3d'propScrollableArea'\x3e";a+="\x3ctable class\x3d'propRootDetailsContainer'\x3e";a+="\x3ctr\x3e";a+="\x3ctd class\x3d'propPaletteRoot'\x3e";for(var c=0;c<this.pageTemplate.length;c++)if(this.pageTemplate[c].title=h[this.pageTemplate[c].key]?h[this.pageTemplate[c].key]:"Key not found",this.pageTemplate[c].pageTemplate)for(var d=0;d<this.pageTemplate[c].pageTemplate.length;d++)this.pageTemplate[c].pageTemplate[d].key&&(this.pageTemplate[c].pageTemplate[d].display+=h[this.pageTemplate[c].pageTemplate[d].key]?
h[this.pageTemplate[c].pageTemplate[d].key]:"Key not found");this.domNode.innerHTML=a;this.inherited(arguments)},_widgetValuesChanged:function(a){var c=this._currentPropSection;if(c){for(var d=!1,b=0;b<this.pageTemplate.length;b++)if(this.pageTemplate[b].key==c){d=!0;break}if(d)for(c=this._getVisibleCascade(b),d=0;d<c.length;d++)c[d]._widgetValuesChanged(a)}},_getVisibleCascade:function(a){if(a)return this.pageTemplate[a].cascade;a=[];var c=this._currentPropSection;if(c)for(var d=0;d<this.pageTemplate.length;d++)if(this.pageTemplate[d].key==
c){a=a.concat(this.pageTemplate[d].cascade);break}return a},_updatePaletteValues:function(a){if(this._editor){var c=a[0];this._subwidget=(this._widget=c)&&c.subwidget;this.setReadOnly(!(this._widget||this._subwidget));for(var c=this._getVisibleCascade(),d=0;d<c.length;d++)c[d]._widgetSelectionChanged(a)}},_widgetSelectionChanged:function(a){!0!==a.isFake&&this._updatePaletteValues(a.selection)},_stateChanged:function(){this._updatePaletteValues(this._widget?[this._widget]:[])},_widgetPropertiesChanged:function(a){this._widget&&
this._widget.type!==a[0].type||this._updatePaletteValues(a)},_titlePaneOpen:function(a){a=this._getVisibleCascade(a);for(var c=0;c<a.length;c++)a[c]._editorSelected({editor:this._editor})},startup:function(){this.domNode.style.height="100%";this._editor=f.currentEditor;this.inherited(arguments);for(var a=0;a<this.pageTemplate.length;a++){var c=this.pageTemplate[a];if(c.pageTemplate)for(var d=0;d<c.pageTemplate.length;d++){var b=c.pageTemplate[d];b.onchange&&b.id&&m.connect(m.byId(b.id),"onchange",
m.hitch(c,b.onchange,d))}}for(a=0;a<this.pageTemplate.length;a++)this.pageTemplate[a].cascade=[];try{this.setReadOnly(!0)}catch(g){logError(g,"set read only crashed ! "+g)}this.onEditorSelected();this.subscribe("/davinci/ui/widgetValuesChanged",m.hitch(this,this._widgetValuesChanged));this.subscribe("/davinci/ui/widgetPropertiesChanged",m.hitch(this,this._widgetPropertiesChanged));this.subscribe("/davinci/ui/editorSelected",m.hitch(this,this._editorSelected));this.subscribe("/davinci/ui/widgetSelected",
m.hitch(this,this._widgetSelectionChanged));this.subscribe("/davinci/states/state/changed",m.hitch(this,this._stateChanged));this.subscribe("/maqetta/appstates/state/changed",m.hitch(this,this._stateChanged));this.subscribe("/davinci/ui/initialPerspectiveReady",m.hitch(this,this._initialPerspectiveReady));this.subscribe("/davinci/workbench/ready",m.hitch(this,this._workbenchReady))},setReadOnly:function(a){for(var c=0;c<this.pageTemplate.length;c++){var d=this.pageTemplate[c].pageTemplate;if(d)for(var b=
0;b<d.length;b++){var f=d[b].widget;f?f.set("readOnly",a):(f=d[b].domNode)&&m.attr(f,"disabled",a)}}},_modelEntryById:function(a){for(var c=0;c<this.pageTemplate.length;c++){var d=this.pageTemplate[c].pageTemplate;if(d)for(var b=0;b<d.length;b++)if(a==d[b].id)return d[b]}},_editorSelected:function(a){this._editor=a.editor;this.onEditorSelected(this._editor);a=this.tabContainer;this.getParent();var c=a.selectedChildWidget||a.getSelected(),d=!1,b=m.query(".maqPropertySection",a.domNode);this._editor?
"davinci.ve.PageEditor"!=this._editor.declaredClass&&"davinci.ve.themeEditor.ThemeEditor"!=this._editor.declaredClass?b.forEach(function(a){dijit.byNode(a)==c&&(d=!0)}):(b.forEach(function(a){dijit.byNode(a)}),"davinci.ve.themeEditor.ThemeEditor"==this._editor.declaredClass&&m.query(".page_editor_only",a.domNode).forEach(function(a){dijit.byNode(a)==c&&(d=!0)})):(b.forEach(function(a){dijit.byNode(a)}),d=!0);d&&this._selectFirstVisibleTab()},onEditorSelected:function(){this._subWidget=this._widget=
null;if(this._oldClassName)if(this.domNode)m.removeClass(this.domNode.parentNode.parentNode,this._oldClassName);else{console.error("have no dom node ! : "+this.id);return}if(this._editor)if(this._editor&&this._editor.editorID&&(this._oldClassName=this._editor.editorID.replace(/\./g,"_"),this.domNode?m.addClass(this.domNode.parentNode.parentNode,this._oldClassName):console.error("have no dom node !")),this.domNode){for(var a=this._currentPropSection,c=m.query(".propSectionButton",this.domNode),d=0;d<
c.length;d++){var b=c[d];this._editor&&this._editor.supports&&this._editor.supports("propsect_"+this.pageTemplate[d].key)?m.removeClass(b,"dijitHidden"):(m.addClass(b,"dijitHidden"),a==this.pageTemplate[d].key&&g.showRoot())}a=[];for(d=0;d<this.pageTemplate.length;d++)(c=this.pageTemplate[d].cascade)&&(a=a.concat(c));for(d=0;d<a.length;d++)c=a[d],c._editorSelected&&c._editorSelected({editor:this._editor})}else console.error("have no dom node !")},destroy:function(){this.inherited(arguments)},_destroyContent:function(){var a=
this.containerNode||this.domNode;for(m.forEach(m.query("[widgetId]",a).map(dijit.byNode),function(a){a.destroy()});a.firstChild;)m._destroyElement(a.firstChild);m.forEach(this._tooltips,function(a){a.destroy()});this._tooltips=void 0;this._destroyHandles()},sectionTitleFromKey:function(a){for(var c=0;c<this.pageTemplate.length;c++)if(this.pageTemplate[c].key==a)return this.pageTemplate[c].title},_initialPerspectiveReady:function(){var c=null;if(!this._alreadySplitIntoMultipleTabs){var d=this.tabContainer;
m.addClass(d.domNode,"propRootDetailsContainer");m.addClass(d.domNode,"propertiesContent");for(var b=0;b<this.pageTemplate.length;b++){var c=this.pageTemplate[b].key,f=this.pageTemplate[b].title,e=this.pageTemplate[b].className;e||(e="");var q=this._titleBarDiv,q=q+"\x3cdiv class\x3d'propertiesToolBar' dojoType\x3d'davinci.ve.widgets.WidgetToolBar'\x3e\x3c/div\x3e",q=q+("\x3cdiv class\x3d'cascadeBackButtonDiv'\x3e\x3cbutton class\x3d'btn-info' onclick\x3d'davinci.ve.widgets.HTMLStringUtil.showSection(\""+
c+'","'+f+"\")'\x3e"+f+" "+h.properties+"\x3c/button\x3e\x3c/div\x3e"),c=g.generateTemplate(this.pageTemplate[b]),c=q+c;0==b?(c=this,c.set("title",f),m.addClass(c.domNode,e)):(q=d.createTab(f,null,null,null,{"class":e,delegate:this}),c=k.addWidget(a,{title:f,content:c,"class":e,delegate:this},null,q,!1),q.cp=c,q._maqPropGroup=this.pageTemplate[b].key,q.add(c,null,!1));c._maqPropGroup=this.pageTemplate[b].key;f=m.query(".paletteCloseBox",c.domNode);0<f.length&&m.connect(f[0],"click",this,function(a){davinci.Workbench.collapsePaletteContainer(a.currentTarget)})}for(f=
0;f<this.pageTemplate.length;f++)if(this.pageTemplate[f].cascade=[],e=this.pageTemplate[f].pageTemplate){for(b=0;b<e.length;b++)q=e[b].id,(c=dijit.byId(q))?e[b].widget=c:(c=m.byId(q))&&(e[b].domNode=c);m.query("#"+this.pageTemplate[f].id+" .CascadeTop").forEach(function(a){return function(c){c=dijit.byId(c.id);a.cascade.push(c)}}(this.pageTemplate[f]))}d._on("selectChild",function(a){a._maqPropGroup&&(this._currentPropSection=a._maqPropGroup,a=(a=this._editor&&this._editor.getContext?this._editor.getContext():
null)&&a.getSelection?a.getSelection():[],this._updatePaletteValues(a),g._initSection(this._currentPropSection))}.bind(this));this._alreadySplitIntoMultipleTabs=!0}},_initialPerspectiveReadyO:function(){if(!this._alreadySplitIntoMultipleTabs){var c=this.getParent();m.addClass(c.domNode,"propRootDetailsContainer");m.addClass(c.domNode,"propertiesContent");for(var d=0;d<this.pageTemplate.length;d++){var b=this.pageTemplate[d].key,f=this.pageTemplate[d].title,e=this.pageTemplate[d].className;e||(e="");
var k=this._titleBarDiv,k=k+"\x3cdiv class\x3d'propertiesToolBar' dojoType\x3d'davinci.ve.widgets.WidgetToolBar'\x3e\x3c/div\x3e",k=k+("\x3cdiv class\x3d'cascadeBackButtonDiv'\x3e\x3cbutton onclick\x3d'davinci.ve.widgets.HTMLStringUtil.showSection(\""+b+'","'+f+"\")'\x3e"+f+" "+h.properties+"\x3c/button\x3e\x3c/div\x3e"),b=g.generateTemplate(this.pageTemplate[d]),k=k+b;0==d?(k=this,k.set("title",f),m.addClass(k.domNode,e)):(k=new a({title:f,content:k,"class":e}),c.addChild(k));k._maqPropGroup=this.pageTemplate[d].key;
f=m.query(".paletteCloseBox",k.domNode);0<f.length&&m.connect(f[0],"click",this,function(a){davinci.Workbench.collapsePaletteContainer(a.currentTarget)})}for(f=0;f<this.pageTemplate.length;f++)if(this.pageTemplate[f].cascade=[],e=this.pageTemplate[f].pageTemplate){for(d=0;d<e.length;d++)k=e[d].id,(b=dijit.byId(k))?e[d].widget=b:(b=m.byId(k))&&(e[d].domNode=b);m.query("#"+this.pageTemplate[f].id+" .CascadeTop").forEach(function(a){return function(c){c=dijit.byId(c.id);a.cascade.push(c)}}(this.pageTemplate[f]))}c._on("selectChild",
function(a){"none"!=a.controlButton.domNode.style.display||this._recursiveSelectChildInProcess?a._maqPropGroup&&(this._currentPropSection=a._maqPropGroup,a=(a=this._editor&&this._editor.getContext?this._editor.getContext():null)&&a.getSelection?a.getSelection():[],this._updatePaletteValues(a),g._initSection(this._currentPropSection)):(this._recursiveSelectChildInProcess=!0,this._selectFirstVisibleTab(),delete this._recursiveSelectChildInProcess)}.bind(this));this._alreadySplitIntoMultipleTabs=!0}},
_workbenchReady:function(){this._updateToolBars()},_updateToolBars:function(){m.query(".propertiesToolBar").forEach(function(a){this._editor&&"davinci.ve.PageEditor"==this._editor.declaredClass?(m.removeClass(a,"dijitHidden"),a.style.display=""):m.addClass(a,"dijitHidden")}.bind(this))},_selectFirstVisibleTab:function(){var a=this.getParent();if(a&&a.getChildren)for(var c=a.getChildren(),d=0;d<c.length;d++){var b=c[d];if("none"!=b.controlButton.domNode.style.display){a._maqDontExpandCollapse=!0;a.selectChild(b);
delete a._maqDontExpandCollapse;break}}}})})},"davinci/workbench/WidgetLite":function(){define(["dojo/_base/declare","dijit/_WidgetBase","dojo/parser","xide/mixins/EventedMixin"],function(p,m,h,e){return p("davinci.workbench.WidgetLite",[m,e],{buildRendering:function(){this.inherited(arguments);/dojotype/i.test(this.domNode.innerHTML||"")&&(this._startupWidgets=dojo.parser.parse(this.domNode,{noStart:!this._earlyTemplatedStartup,inherited:{dir:this.dir,lang:this.lang}}))},_destroyContent:function(){var b=
this.containerNode||this.domNode;for(dojo.forEach(dojo.query("[widgetId]",b).map(dijit.byNode),function(b){b.destroy()});b.firstChild;)dojo._destroyElement(b.firstChild);dojo.forEach(this._tooltips,function(b){b.destroy()});delete this._tooltips;this._destroyHandles()},startup:function(){dojo.forEach(this._startupWidgets,function(b){b&&!b._started&&b.startup&&b.startup()});this.inherited(arguments)}})})},"davinci/ve/widgets/HTMLStringUtil":function(){define("davinci/Runtime ./FontDataStore ./FontComboBox ./MultiInputDropDown dijit/form/ComboBox dijit/form/DateTextBox dijit/form/TimeTextBox ./MetaDataStore ./ColorPicker ./Background".split(" "),
function(p,m){var h=dojo.getObject("davinci.ve.widgets.HTMLStringUtil",!0);dojo.mixin(h,{__id:0,idPrefix:"davinci_ve_widgets_properties_generated",_currentPropSection:null,animSS:null,animRuleIndex:{},getCurrentPropSection:function(){return this._currentPropSection},getId:function(){return this.idPrefix+this.__id++},injectId:function(e,b){var k=e.indexOf("\x3e");return k?e.substring(0,k)+" id\x3d'"+b+"'"+e.substring(k,e.length):"\x3cspan id\x3d'"+b+"'\x3e"+e+"\x3c/span\x3e"},getEditor:function(e){function b(a){var b=
{};b.value="undefined"!=typeof a.value&&null!==a.value?a.value:a;b.title=a.title||b.value;return b}var k=e.type,a=this.getId();e.id=a;var f=e.disabled?" disabled\x3d'true' ":"";switch(k){case "multi":return k="",e.values&&(k="data\x3d'"+dojo.toJson(dojo.map(e.values,function(a){return{value:a}}))+"'"),"\x3cdiv dojoType\x3d'davinci.ve.widgets.MultiInputDropDown' "+k+"  class\x3d'propertyPaneEditablevalue' style\x3d'display:inline-block; width:100%;' id\x3d'"+a+"'"+f+"\x3e\x3c/div\x3e";case "boolean":return"\x3cinput type\x3d'checkbox' class\x3d'propertyPaneEditablevalue' style\x3d'display:inline-block;margin-left:5px' id\x3d'"+
a+"'\x3e\x3c/input\x3e";case "comboEdit":e=e.values;a="\x3cselect dojoType\x3d'dijit.form.ComboBox' autoComplete\x3d'false' style\x3d'display:inline-block; width:100%;' id\x3d'"+a+"'"+f+"\x3e";for(f=0;f<e.length;f++)k=b(e[f]),a+="\x3coption class\x3d'option' value\x3d'"+k.value+"'\x3e"+k.title+"\x3c/option\x3e";return a+="\x3c/select\x3e";case "combo":e=e.values;a="\x3cselect class\x3d'form-control input-transparent' style\x3d'display:inline-block; width:100%;' id\x3d'"+a+"'"+f+"\x3e";for(f=0;f<e.length;f++)k=
b(e[f]),a+="\x3coption class\x3d'option' value\x3d'"+k.value+"'\x3e"+k.title+"\x3c/option\x3e";return a+="\x3c/select\x3e";case "font":return a="\x3cdiv dojoType\x3d'davinci.ve.widgets.FontDataStore' jsId\x3d'"+a+"_fontStore'\x3e"+("\x3cdiv dojoType\x3d'davinci.ve.widgets.FontComboBox' value\x3d'"+m.fonts[0].value+"' store\x3d'"+a+"_fontStore'  id\x3d'"+a+"' class\x3d'propertyPaneEditablevalue' style\x3d'display:inline-block; width:100%;'\x3e\x3c/div\x3e");case "state":return a="\x3cdiv dojoType\x3d'davinci.ve.widgets.MetaDataStore' jsId\x3d'davinci.properties.event"+
a+"_Store'\x3e"+("\x3cdiv dojoType\x3d'dijit.form.ComboBox' id\x3d'"+a+"'store\x3d'davinci.properties.event"+a+"_Store' class\x3d'propertyPaneEditablevalue' style\x3d'display:inline-block; width:100%;' autoComplete\x3d'false'\x3e\x3c/div\x3e");case "color":return"\x3cdiv class\x3d'propertyPaneEditablevalue' dojoType\x3d'davinci.ve.widgets.ColorPicker' id\x3d'"+a+"' \x3e\x3c/div\x3e";case "background":return k=dojo.isArray(e.values)?" data\x3d'"+dojo.toJson(e.values)+"'":"",f=" propname\x3d'"+(dojo.isArray(e.target)?
e.target[0]:e.target)+"'",a="\x3cdiv dojoType\x3d'davinci.ve.widgets.Background' id\x3d'"+a+"'"+k+f+(e.colorswatch?" colorswatch\x3d'true'":"")+"\x3e\x3c/div\x3e";case "border":case "number":case "object":case "text":case "array":case "widgetState":case "string":if("date"==e.format)return"\x3cdiv class\x3d'propertyPaneEditablevalue' dojoType\x3d'dijit.form.DateTextBox' id\x3d'"+a+"'\x3e\x3c/input\x3e";if("time"==e.format)return"\x3cdiv class\x3d'propertyPaneEditablevalue' dojoType\x3d'dijit.form.TimeTextBox' id\x3d'"+
a+"'\x3e\x3c/input\x3e";default:return a=e.data&&!0===e.data.readonly?"\x3cinput readonly type\x3d'text' class\x3d'form-control input-transparent propertyPaneEditablevalue' style\x3d'display:inline-block; width:100%;' id\x3d'"+a+"'\x3e\x3c/input\x3e":"\x3cinput type\x3d'text' class\x3d'form-control input-transparent propertyPaneEditablevalue' style\x3d'display:inline-block; width:100%;' id\x3d'"+a+"'\x3e\x3c/input\x3e"}},generateTable:function(e,b){var k=b?b.rowsOnly:!1,a=b&&b.zeroSpaceForIncrDecr?
"0px":"20px",f="";if(e.html)return e.id=this.getId(),this.injectId(e.html,e.id);var h;h="\x3ctable class\x3d'property_table_stretchable' border\x3d'0' width\x3d'100%' align\x3d'center' cellspacing\x3d'0' cellpadding\x3d'0'\x3e\x3ccolgroup\x3e\x3ccol style\x3d'width:6px;' /\x3e";h+="\x3ccol class\x3d'gap02' /\x3e";h+="\x3ccol class\x3d'gap03' /\x3e";h+="\x3ccol style\x3d'width:"+a+";' /\x3e";h+="\x3ccol style\x3d'width:6px;' /\x3e";h+="\x3c/colgroup\x3e";k||(f+=h);for(a=0;a<e.length;a++)if(e[a].widgetHtml)e[a].id=
this.getId(),e[a].rowId=this.getId(),f+="\x3ctr id\x3d'"+e[a].rowId+"'",e[a].rowClass&&(f+=" class\x3d'"+e[a].rowClass+"'"),f+="\x3e",f+="\x3ctd colspan\x3d'5' width\x3d'100%'\x3e",f+=this.injectId(e[a].widgetHtml,e[a].id),f+="\x3c/td\x3e",f+="\x3c/tr\x3e";else if(e[a].html)e[a].id=this.getId(),e[a].rowId=this.getId(),f+="\x3ctr id\x3d'"+e[a].rowId+"'",f+=" class\x3d'cssPropertySection",e[a].rowClass&&(f+=" "+e[a].rowClass),f+="'\x3e",f+="\x3ctd colspan\x3d'5' width\x3d'100%'\x3e",f+=e[a].html,f+=
"\x3c/td\x3e",f+="\x3c/tr\x3e";else if("toggleSection"==e[a].type){for(var f=f+("\x3ctr id\x3d'"+e[a].id+"'  class\x3d'cssPropertySection'\x3e\x3ctd colspan\x3d'5'\x3e"),g="",d=this.generateTable(e[a].pageTemplate,{rowsOnly:!0}),c=0;c<e[a].pageTemplate.length;c++)e[a].pageTemplate[c].rowId&&(g+="dojo.toggleClass('"+e[a].pageTemplate[c].rowId+"','propertiesSectionHidden');"),e[a].pageTemplate[c].cascadeSectionRowId&&(g+="if(this.checked){dojo.removeClass('"+e[a].pageTemplate[c].cascadeSectionRowId+
"','propertiesSectionHidden');}else{{dojo.addClass('"+e[a].pageTemplate[c].cascadeSectionRowId+"','propertiesSectionHidden');}}");f+="\x3cinput type\x3d'checkbox' onclick\x3d\""+g+'"\x3e\x3c/input\x3e';f+=e[a].display;f+="\x3c/td\x3e\x3c/tr\x3e";f+=d}else e[a].display?(e[a].toggleCascade=this.getId(),e[a].cascadeSection=this.getId(),e[a].rowId=this.getId(),e[a].cascadeSectionRowId=this.getId(),f+="\x3ctr id\x3d'"+e[a].rowId+"'",f+=" class\x3d'cssPropertySection",e[a].rowClass&&(f+=" "+e[a].rowClass),
f+="'",f+=" propName\x3d'"+e[a].display+"'",f+="\x3e",f+="\x3ctd/\x3e",f+="\x3ctd class\x3d'propertyDisplayName'\x3e"+e[a].display+":\x26nbsp;\x3c/td\x3e",f+="\x3ctd class\x3d'propertyInputField propertyInputField"+e[a].type+"' \x3e"+this.getEditor(e[a])+"\x3c/td\x3e",f+="\x3ctd class\x3d'propertyExtra' nowrap\x3d'true'\x3e",f+="\x3ctd class\x3d'propertyExtra2' nowrap\x3d'true'\x3e",e[a].target&&!e[a].hideCascade&&(f+="\x3cdiv width\x3d'100%'\x3e\x3cbutton class\x3d'showCss propertyButton' id\x3d'"+
e[a].toggleCascade+"'",f+=' onClick\x3d"davinci.ve.widgets.HTMLStringUtil.showProperty(',f+="'"+e[a].rowId+"'",f+=')"\x3e\x26gt;\x3c/button\x3e',f+="\x3c/div\x3e"),f+="\x3ctd/\x3e",f+="\x3c/tr\x3e",e[a].target&&!e[a].hideCascade&&(g="{'cascadeSectionRowId':\""+e[a].cascadeSectionRowId+"\",'toggleCascade':\""+e[a].toggleCascade+'"}',f+="\x3ctr id\x3d'"+e[a].cascadeSectionRowId+"' class\x3d'cssCascadeSection cascadeRowHidden'\x3e",f+="\x3ctd colspan\x3d'5' width\x3d'100%' class\x3d'showCascadeDiv'\x3e\x3cdiv dojoType\x3d'davinci.ve.widgets.Cascade' toggleClasses\x3d"+
g+" target\x3d'"+dojo.toJson(e[a].target)+"' targetField\x3d'\""+e[a].id+"\"' id\x3d'"+e[a].cascadeSection+"'\x3e\x3c/div\x3e\x3c/td\x3e\x3c/tr\x3e")):(f+="\x3c/table\x3e",f+=this.getEditor(e[a]),f+=h);k||(f+="\x3c/table\x3e");return f},generateTemplate:function(e){var b="";e.pageTemplate?(e.key&&(e.id=this.getId(),b="\x3cdiv class\x3d'propGroup' id\x3d'"+e.id+"' propGroup\x3d'"+e.key+"'\x3e"),b+=this.generateTable(e.pageTemplate),b+="\x3c/div\x3e"):e.html?b+=e.html:e.widgetHtml&&(e.id=this.getId(),
b+=this.injectId(e.widgetHtml,e.id));return b},stylesheetHref:"propview.css",animShowSectionClass:"propRootDetailsContainer",animShowSectionClassSelector:".propRootDetailsContainer",animShowDetailsClass:"property_table_stretchable",animShowDetailsClassSelector:".property_table_stretchable",showPropAnimClasses:["propRowFadeIn","propRowFadeOut","propRowTransparent","propRowOpaque","propRowHidden"],showRoot:function(){this._hideSectionShowRoot();this._currentPropSection=null;return!1},showSection:function(e,
b){this._initSection(e);return!1},showProperty:function(e){function b(c){dojo.disconnect(m);dojo.disconnect(y);k();var d=f._findRule(f.animShowDetailsClassSelector);d?(c=d.ss,d=d.ruleIndex,c.deleteRule(d),c.insertRule(f.animShowDetailsClassSelector+" { margin-top:0px; }",d),a()):console.error("HTMLStringUtil showProperty: transEnd: rule not found")}var k=function(){for(var a=0;a<d.children.length;a++){var c=d.children[a];1==c.nodeType&&dojo.hasClass(c,"cssPropertySection")&&(c==g?f._addRemoveClasses(c,
h,[]):f._addRemoveClasses(c,h,["propRowHidden"]))}},a=function(){q&&(dojo.removeClass(q,"cascadeRowHidden"),dojo.addClass(q,"cascadeRowTransparent"),setTimeout(function(){dojo.removeClass(q,"cascadeRowTransparent");dojo.addClass(q,"cascadeRowFadeIn")},1))};dojo.addClass(dojo.byId("root"),"showingCascade");var f=this,h=this.showPropAnimClasses,g=dojo.byId(e),d=g.parentNode,c=f._searchSiblingsByTagClass(d.children[0],"TR","cssPropertySection"),q=f._searchSiblingsByTagClass(g.nextSibling,"TR","cssCascadeSection");
e=f._searchUpByTagClass(d,"TABLE",f.animShowDetailsClass);var w=f._searchUpByTagClass(g,"DIV","propGroup"),w=dojo.attr(w,"propGroup");dojo.attr(g,"propName");require("davinci/ve/views/SwitchingStyleView").prototype.sectionTitleFromKey(w);if(p.supportsCSS3Transitions){var c=dojo.marginBox(c),c=dojo.marginBox(g).t-c.t,r=f._findRule(f.animShowDetailsClassSelector);if(r){var w=r.ss,r=r.ruleIndex,m=dojo.connect(e,"webkitTransitionEnd",b),y=dojo.connect(e,"transitionend",b);w.deleteRule(r);w.insertRule(f.animShowDetailsClassSelector+
" { margin-top:-"+c+"px; opacity:.99; -webkit-transition: all .6s ease; -moz-transition: all .6s ease; }",r);e=!1;for(c=0;c<d.children.length;c++)w=d.children[c],1==w.nodeType&&dojo.hasClass(w,"cssPropertySection")&&(w==g?(f._addRemoveClasses(w,h,["propRowFadeIn"]),e=!0):e?f._addRemoveClasses(w,h,["propRowHidden"]):f._addRemoveClasses(w,h,["propRowTransparent"]))}else console.error("HTMLStringUtil showProperty: transEnd: rule not found")}else k(),a()},_initSection:function(e){for(var b=this.showPropAnimClasses,
k=this._getRootTD(),a=dojo.query(".propGroup",k),f,k=0;k<a.length;k++){var h=a[k];dojo.attr(h,"propGroup")==e?(dojo.removeClass(h,"dijitHidden"),f=h):dojo.addClass(h,"dijitHidden")}a=dojo.query(".cssPropertySection",f);for(k=0;k<a.length;k++)this._addRemoveClasses(a[k],b,[]);b=dojo.query(".cssCascadeSection",f);for(k=0;k<b.length;k++)dojo.addClass(b[k],"cascadeRowHidden");this._currentPropSection=e;dojo.removeClass(dojo.byId("root"),"showingCascade")},_hideSectionShowRoot:function(){var e=this._getRootTD();
dojo.removeClass(e,"dijitHidden")},_findRule:function(e){function b(a,e){for(var g=0;g<a.cssRules.length;g++){var d=a.cssRules[g];if(3===d.type){if(d=b(d.styleSheet,e))return d}else if(d.selectorText==e)return{ss:a,ruleIndex:g}}}if(this.animSS&&"number"==typeof this.animRuleIndex[e]){var k=this.animRuleIndex[e];if(this.animSS.cssRules[k].selectorText==e)return{ss:this.animSS,ruleIndex:k}}for(k=0;k<document.styleSheets.length;k++){var a=b(document.styleSheets[k],e);if(a)return this.animSS=a.ss,this.animRuleIndex[e]=
a.ruleIndex,a}return null},_addRemoveClasses:function(e,b,k){for(var a=[],f=0;f<b.length;f++){for(var h=!1,g=0;g<k.length;g++)if(b[f]==k[g]){h=!0;break}h||a.push(b[f])}for(f=0;f<a.length;f++)dojo.removeClass(e,a[f]);for(f=0;f<k.length;f++)dojo.addClass(e,k[f])},_searchUpByTagClass:function(e,b,k){for(;null!=e&&"BODY"!=e.nodeName;){if(e.nodeName==b&&(!k||dojo.hasClass(e,k)))return e;e=e.parentNode}return null},_searchSiblingsByTagClass:function(e,b,k){for(;null!=e;){if(e.nodeName==b&&(!k||dojo.hasClass(e,
k)))return e;e=e.nextSibling}return null},_getRootDetailsContainer:function(){this._rootDetailsContainer||(this._rootDetailsContainer=dojo.query(this.animShowSectionClassSelector)[0]);return this._rootDetailsContainer},_getRootTD:function(){var e=this._getRootDetailsContainer();this._rootTD||(this._rootTD=dojo.query(".propPaletteRoot",e)[0]);return this._rootTD}});return h})},"davinci/ve/widgets/FontDataStore":function(){define(["dojo/_base/declare","dojo/data/ItemFileReadStore","davinci/lang/ve",
"dijit/lang/_common"],function(p,m){var h=p("davinci.ve.widgets.FontDataStore",m,{_allValues:[],constructor:function(e){this.setValues(e.values||davinci.ve.widgets.FontDataStore.fonts)},setValues:function(e){this._allValues=this._allValues.concat(e);this._jsonData={label:"name",identifier:"value",items:this._allValues};this._loadFinished=!1},contains:function(e){for(var b=0;b<this._allValues.length;b++)if(this._allValues[b].value==e||this._allValues[b].name==e)return b;return!1},clearValues:function(){this._allValues=
[];this._loadFinished=!1},lookupValue:function(e){e=this.contains(e);return this._allValues[e].value[0]}});return dojo.mixin(h,{fonts:[{name:"",value:""},{name:"Arial,Helvetica,sans-serif",value:"Arial,Helvetica,sans-serif"},{name:"'Arial Black,Gadget',sans-serif",value:"'Arial Black,Gadget',sans-serif"},{name:"'Comic Sans MS',cursive",value:"'Comic Sans MS',cursive"},{name:"'Courier New',Courier,monospace",value:"'Courier New',Courier,monospace"},{name:"Geneva,Tahoma,sans-serif",value:"Geneva,Tahoma,sans-serif"},
{name:"Georgia,serif",value:"Georgia,serif"},{name:"'Helvetica,Trebuchet MS',sans-serif",value:"'Helvetica,Trebuchet MS',sans-serif"},{name:"Impact,Charcoal,sans-serif",value:"Impact,Charcoal,sans-serif"},{name:"'Lucida Console',Monaco,monospace",value:"'Lucida Console',Monaco,monospace"},{name:"'Lucida Sans Unicode','Lucida Grande',sans-serif",value:"'Lucida Sans Unicode','Lucida Grande',sans-serif"},{name:"'Lucida Console', Monaco, monospace",value:"'Lucida Console', Monaco, monospace"},{name:"'Palatino Linotype','Book Antiqua',Palatino,serif",
value:"'Palatino Linotype','Book Antiqua',Palatino,serif"},{name:"Symbol",value:"Symbol"},{name:"Tahoma,Geneva,sans-serif",value:"Tahoma,Geneva,sans-serif"},{name:"'Times New Roman',Times,serif",value:"'Times New Roman',Times,serif"},{name:"'Trebuchet MS',Helvetica,sans-serif",value:"'Trebuchet MS',Helvetica,sans-serif"},{name:"Verdana,Geneva,sans-serif",value:"Verdana,Geneva,sans-serif"},{name:"Webdings",value:"Webdings"},{name:"Wingdings, 'Zapf Dingbats'",value:"Wingdings, 'Zapf Dingbats'"},{name:"'Zapf Dingbats', Wingdings",
value:"'Zapf Dingbats', Wingdings"},{name:"sans-serif",value:"sans-serif"},{name:"serif",value:"serif"},{name:"monospace",value:"monospace"},{name:"cursive",value:"cursive"},{name:"LCD",value:"LCD"}]})})},"davinci/ve/widgets/FontComboBox":function(){define(["dojo/_base/declare","dijit/form/ComboBox","davinci/lang/ve","dijit/lang/_common"],function(p,m){return p("davinci.ve.widgets.FontComboBox",m,{_getValueAttr:function(){if(this.store)for(var h=0;h<this.store._allValues.length;h++){var e=this.store._allValues[h];
if(e.name[0]==this.value)return e.value[0]}return this.value},_setValueAttr:function(h){this.store&&h?this.store.fetch({query:{value:h},onComplete:function(e,b){1>e.length?this.inherited("_setValueAttr",[h]):(this.inherited("_setValueAttr",[e[0].name[0]]),this.item=e[0])}.bind(this),onError:function(){this.inherited("_setValueAttr",[h])}.bind(this)}):this.inherited("_setValueAttr",[h])}})})},"davinci/ve/widgets/MultiInputDropDown":function(){define("dojo/_base/declare dijit/_WidgetBase davinci/ve/widgets/MutableStore dijit/form/ComboBox davinci/lang/ve dijit/lang/_common xide/form/Select".split(" "),
function(p,m,h,e,b,k,a){var f=p("davinci.ve.widgets.MultiInputDropDown",[m],{numberDelta:1,insertPosition:1,data:null,postCreate:function(){},startup:function(){this.inherited(arguments);this.domNode.removeAttribute("data-dojo-type");this.domNode.removeAttribute("dojoType");var a=dojo.doc.createElement("div");this._run={};this.data?(this.data.push({value:f.divider}),this.data.push({value:"Remove Value",run:function(){this.set("value","")}})):this.data=[{value:""},{value:"auto"},{value:"0px"},{value:f.divider},
{value:"Remove Value",run:function(){this.set("value","")}},{value:f.divider},{value:"Help",run:function(){alert("help!")}}];for(var b=[],d=0;d<this.data.length;d++)b.push(this.data[d].value),this.data[d].run&&(this._run[this.data[d].value]=this.data[d].run);this._store=new h({values:b,divider:f.divider});var c=[];_.each(this.data,function(a){c.push({label:a.value,value:a.value,run:a.run})});this._dropDown=new e({store:this._store,required:!1,style:"width:100%"});b=dojo.doc.createElement("div");dojo.style(b,
"float","right");this._plus=dojo.doc.createElement("button");dojo.addClass(this._plus,"incrementButton");dojo.addClass(this._plus,"propertyButton");b.appendChild(this._plus);this._minus=dojo.doc.createElement("button");dojo.addClass(this._minus,"decrementButton");dojo.addClass(this._minus,"propertyButton");b.appendChild(this._minus);a.appendChild(b);b=dojo.create("div",{"class":"propInputWithIncrDecrButtons"});b.appendChild(this._dropDown.domNode);a.appendChild(b);b=dojo.doc.createElement("div");
dojo.style(b,"clear","both");a.appendChild(b);this._currentValue=this._store.getItemNumber(0);dojo.connect(this._dropDown,"onKeyUp",this,"_updateSpinner");var k=this;this._dropDown._on?this._dropDown._on("change",function(a){k._onChange(a)}):dojo.connect(this._dropDown,"onChange",this,"_onChange");dojo.connect(this._plus,"onclick",this,"_plusButton",!1);dojo.connect(this._minus,"onclick",this,"_minusButton",!1);this._updateSpinner();this.domNode.appendChild(a)},_setReadOnlyAttr:function(a){this._isReadOnly=
a;this._dropDown&&(this._dropDown.set("disabled",a),dojo.attr(this._plus,"disabled",a),dojo.attr(this._minus,"disabled",a))},onChange:function(a){},_getValueAttr:function(){return this._dropDown.get("value")},_setValueAttr:function(a,b){this._dropDown.set("value",a,!0);this._currentValue=this._dropDown.get("value");this._onChange(this._currentValue);if(!b)this.onChange()},_changeValue:function(a,b){for(var d=a.split(" "),c="",f=0;f<d.length;f++){0<f&&(c+=" ");var e=d[f].match(/([-\d\.]+)([a-zA-Z%]*)/);
if(e)if(1==e.length)c+=e[0];else for(var k=1;k<e.length;k++)c=isNaN(e[k])||""==e[k]?c+e[k]:c+(parseFloat(e[k])+b);else c+=d[f]}return c},_plusButton:function(){var a=this._dropDown.get("value"),b=this._changeValue(a,this.numberDelta);this._store.modifyItem(a,b);this._dropDown.set("value",b)},_minusButton:function(){var a=this._dropDown.get("value"),b=this._changeValue(a,-1*this.numberDelta);this._store.modifyItem(a,b);this._dropDown.set("value",b)},_updateSpinner:function(){var a=this._dropDown.get("value"),
a=/(-?)(\d+){1}/.exec(a);this._minus.disabled=a&&a.length?this._plus.disabled=!1:this._plus.disabled=!0;return!0},_onChange:function(a){var b;a in this._run?(this._dropDown.get("value",this._store.getItemNumber(0)),dojo.hitch(this,this._run[a])()):a==f.divider?this._dropDown.get("value",this._store.getItemNumber(0)):(b=this._store.findSimilar(a))?this._store.modifyItem(b,a):this._store.contains(a)||this._store.insert(this.insertPosition,a);this._currentValue!=this._dropDown.get("value")&&(this._currentValue=
this._dropDown.get("value"),this.onChange(a));this._updateSpinner()}});return dojo.mixin(f,{divider:"---"})})},"davinci/ve/widgets/MutableStore":function(){define(["dojo/_base/declare","dojo/data/ItemFileReadStore","davinci/lang/ve","dijit/lang/_common"],function(p,m,h,e){return p("davinci.ve.widgets.MutableStore",m,{constructor:function(b){this.clearValues();b.divider&&(this.divider=b.divider);b.values&&this.setValues(b.values)},setValues:function(b){var e=[],a=0;b&&(this._values=b);dojo.forEach(this._values,
dojo.hitch(this,function(b){e.push({name:b,value:b,id:a++})}));this._jsonData={identifier:"id",items:e};this._loadFinished=!1},modifyItem:function(b,e){for(var a=0;a<this._values.length;a++)this._values[a]==b&&(this._values[a]=e);this.setValues()},insert:function(b,e){this._values.splice(b,0,e);this.setValues()},contains:function(b){for(var e=0;e<this._values.length;e++)if(this._values[e]==b)return!0;return!1},findSimilar:function(b){if(b=(new RegExp(/(\D*)(-?)(\d+)(\D*)/)).exec(b)){b=new RegExp((0<
b.length?b[1]:"")+"(-?)(\\d+)"+(3<b.length?b[4]:""));for(var e=0;e<this._values.length;e++)if(b.test(this._values[e]))return this._values[e]}},getItemNumber:function(b){return this._values[b]},clearValues:function(){this._loadFinished=!1}})})},"davinci/ve/widgets/MetaDataStore":function(){define(["dojo/_base/declare","dojo/data/ItemFileReadStore","davinci/lang/ve","dijit/lang/_common"],function(p,m){return p("davinci.ve.widgets.MetaDataStore",m,{_allValues:[],constructor:function(h){this.setValues(h&&
h.values||[])},setValues:function(h){dojo.mixin(this._allValues,h);var e=[];dojo.forEach(this._allValues,function(b){e.push({name:b,value:b})});this._jsonData={identifier:"name",items:e};this._loadFinished=!1},contains:function(h){return-1!=dojo.indexOf(this._allValues,h)},clearValues:function(){this._allValues=[];this._loadFinished=!1}})})},"davinci/ve/widgets/ColorPicker":function(){define("dojo/_base/declare dijit/_WidgetBase dijit/form/ComboBox davinci/ve/widgets/ColorStore davinci/ve/widgets/ColorPickerFlat dijit/TooltipDialog davinci/lang/ve dijit/popup".split(" "),
function(p,m,h,e,b,k,a){p=p("davinci.ve.widgets.ColorPicker",[m],{numberDelta:1,insertPosition:9,data:null,postCreate:function(){this.inherited(arguments);this.domNode.removeAttribute("data-dojo-type");this.domNode.removeAttribute("dojoType");this._statics=["",davinci.ve.widgets.ColorPicker.divider,a.colorPicker,a.removeValue];this._run={};this.data?(this.data.push({value:davinci.ve.widgets.ColorPicker.divider}),this.data.push({value:a.removeValue,run:function(){this.set("value","")}})):this.data=
[{value:this._statics[0]},{value:this._statics[2],run:this._chooseColorValue},{value:this._statics[3],run:function(){this.set("value","")}},{value:this._statics[1]},{value:"transparent"},{value:"black"},{value:"white"},{value:"red"},{value:"green"},{value:"blue"}];for(var f=[],k=0;k<this.data.length;k++)f.push(this.data[k].value),this.data[k].run&&(this._run[this.data[k].value]=this.data[k].run);this._store=new e({values:f,noncolors:this._statics});this._dropDown=new h({store:this._store,required:!1,
autoComplete:!1,labelType:"html",labelAttr:"label",style:"width:100%"});dojo.connect(this._dropDown,"onChange",this,"_onChange");f=dojo.doc.createElement("div");dojo.addClass(f,"colorPicker");this._selectedColor=dojo.doc.createElement("div");this._selectedColor.innerHTML="\x26nbsp;";dojo.addClass(this._selectedColor,"colorPickerSelected");dojo.connect(this._selectedColor,"onclick",dojo.hitch(this,function(a){this._chooseColorValue()}));f.appendChild(this._selectedColor);k=dojo.doc.createElement("div");
dojo.addClass(k,"colorPickerComboContainer");k.appendChild(this._dropDown.domNode);f.appendChild(k);this._colorPickerFlat=new b({});this.domNode.appendChild(f)},_chooseColorValue:function(){this._dropDown.set("value",this._value,!0);var b=this._colorPickerFlat,e=new k({id:"maqetta_prop_tooltip_color_picker",title:a.selectColor,content:b});dijit.popup.moveOffScreen(e.domNode);var g=!1,d=function(a){return function(){g&&(g=!1,dijit.popup.close(e))}}(this);e.connect(b,"onCancel",dojo.hitch(this,d));
e.connect(b,"onClose",dojo.hitch(this,d));var c=dijit.byNode(dojo.query("[widgetId]",e.domNode)[0]);if(this._value in dojo.Color.named){var h=dojo.colorFromString(this._value);b.set("value",h.toHex())}else b.set("value",this._value||"",!0);(function(a){return function(){this._isReadOnly||(dijit.popup.open({parent:a._dropDown,popup:e,around:a._dropDown.domNode,orient:a.isLeftToRight()?{BL:"TL",BR:"TR",TL:"BL",TR:"BR"}:{BR:"TR",BL:"TL",TR:"BR",TL:"BL"},onClose:function(){c.canceled||(a._dropDown.get("value"),
a._dropDown.set("value",c.get("value")));d();e.destroy()}}),g=!0,dijit.focus(e.containerNode))}})(this)()},_setReadOnlyAttr:function(a){this._isReadOnly=a;this._dropDown.set("disabled",a)},onChange:function(a){},_getValueAttr:function(){return this._dropDown.get("value")},_setValueAttr:function(a,b){this._dropDown.set("value",a,!0);dojo.style(this._selectedColor,"backgroundColor",a);if(a in dojo.Color.named){var g=dojo.colorFromString(a);this._colorPickerFlat.set("value",g.toHex(),b)}else this._colorPickerFlat.set("value",
a,b);this._onChange(a,b)},_onChange:function(a,b){a in this._run?dojo.hitch(this,this._run[a])():a==davinci.ve.widgets.ColorPicker.divider?this._dropDown.set("value",this._store.getItemNumber(0)):(this._store.contains(a)||this._store.insert(this.insertPosition,a),dojo.style(this._selectedColor,"backgroundColor",a));if(!(this._value==a||a in this._run||(this._value=a,b)))this.onChange(a)}});return dojo.mixin(p,{divider:"---"})})},"davinci/ve/widgets/ColorStore":function(){define(["dojo/_base/declare",
"dojo/data/ItemFileReadStore","davinci/lang/ve","dijit/lang/_common"],function(p,m){return p("davinci.ve.widgets.ColorStore",m,{constructor:function(h){this.clearValues();h.noncolors&&(this.noncolors=h.noncolors);h.values&&this.setValues(h.values)},setValues:function(h){var e=[];h&&(this._values=h);dojo.forEach(this._values,dojo.hitch(this,function(b){for(var k=!1,a=0;!k&&a<this.noncolors.length;a++)this.noncolors[a]==b&&(k=!0);k?e.push({name:b,value:b,label:b}):e.push({value:b,name:b,label:"\x3ctable\x3e\x3ctr\x3e\x3ctd style\x3d'width:10em'\x3e"+
b+"\x3c/td\x3e\x3ctd style\x3d'width:10px;height:10px;background-color:"+b+"'\x3e\x3c/td\x3e\x3c/tr\x3e\x3c/table\x3e"})}));this._jsonData={identifier:"value",items:e};this._loadFinished=!1},insert:function(h,e){this._values.splice(h,0,e);this.setValues()},contains:function(h){for(var e=0;e<this._values.length;e++)if(this._values[e]==h)return!0;return!1},getItemNumber:function(h){return this._values[h]},clearValues:function(){this._loadFinished=!1}})})},"davinci/ve/widgets/ColorPickerFlat":function(){define("dojo/_base/declare dijit/_Widget dijit/TooltipDialog dijit/form/Button dojox/widget/ColorPicker davinci/lang/ve dijit/lang/_common".split(" "),
function(p,m,h,e,b,k,a){p=p("davinci.ve.widgets.ColorPickerFlat",[m],{numberDelta:1,insertPosition:1,data:null,postCreate:function(){this.inherited(arguments);var f=dojo.doc.createElement("div");this._colorPicker=new b({});f.appendChild(this._colorPicker.domNode);var k=dojo.doc.createElement("div"),g=e({label:a.buttonOk});g.innerHtml="OK";k.appendChild(g.domNode);var d=e({label:a.buttonCancel});k.appendChild(d.domNode);f.appendChild(k);this.domNode.appendChild(f);dojo.connect(g,"onClick",this,"_onOk");
dojo.connect(d,"onClick",this,"onCancel");delete this.canceled},onClose:function(){},onCancel:function(){this._value=null;this.canceled=!0},_onOk:function(){delete this.canceled;this._value=this._colorPicker.get("value");this.onClose()},_getValueAttr:function(){return this._value},_setValueAttr:function(a){a=new dojo.Color(a);this._colorPicker.setColor(a.toHex())}});return dojo.mixin(p,{show:function(a,b,g,d){var c=new h({id:"maqetta_prop_tooltip_color_picker",title:k.selectColor,content:a});dijit.popup.moveOffScreen(c.domNode);
var e=!1,w=function(a){return function(){e&&(e=!1,dijit.popup.close(c))}}();c.connect(a,"onCancel",w);c.connect(a,"onClose",w);var r=dijit.byNode(dojo.query("[widgetId]",c.domNode)[0]);b in dojo.Color.named?(b=dojo.colorFromString(b),a.set("value",b.toHex())):a.set("value",b||"",!0);(function(a){return function(){dijit.popup.open({parent:g,popup:c,around:g.domNode,orient:d?{BL:"TL",BR:"TR",TL:"BL",TR:"BR"}:{BR:"TR",BL:"TL",TR:"BR",TL:"BL"},onClose:function(){r.canceled||(g._colorPickerFlat_comboBoxUpdateDueTo&&
(g._comboBoxUpdateDueTo=g._colorPickerFlat_comboBoxUpdateDueTo),g.get("value"),g.set("value",r.get("value")));w();c.destroy()}});e=!0;dijit.focus(c.containerNode)}})()()}})})},"davinci/ve/widgets/Background":function(){define("dojo/_base/declare dojo/Deferred davinci/workbench/WidgetLite davinci/ve/widgets/ColorPickerFlat davinci/ve/widgets/ColorStore davinci/ve/widgets/MutableStore dijit/form/ComboBox davinci/ve/widgets/BackgroundDialog davinci/Workbench davinci/ve/utils/URLRewrite davinci/model/Path davinci/lang/ve dijit/lang/_common davinci/ve/utils/CssUtils davinci/ve/widgets/ColorPicker xide/views/_PanelDialog xide/utils".split(" "),
function(p,m,h,e,b,k,a,f,n,g,d,c,q,w,r,B,y){var A=0;return p("davinci.ve.widgets.Background",[h],{__id:0,data:null,buildRendering:function(){this.domNode=dojo.doc.createElement("div",{style:"width:100%"});this._textFieldId="davinci_ve_widgets_properties_border_generated"+A++;this._buttonId="davinci_ve_widgets_properties_border_generated"+A++;var d=dojo.create("div",{className:"bgPropButtonDiv",style:"float:right; width:28px;"});dojo.create("button",{innerHTML:"...",id:this._buttonId,className:"bgPropButton btn-info",
style:"font-size:1em;"},d);var f=38,g=this._colorswatch="true"==this.colorswatch;if(g){var f=56,h=dojo.doc.createElement("div");dojo.addClass(h,"colorPicker");this._selectedColor=dojo.doc.createElement("div");this._selectedColor.innerHTML="\x26nbsp;";dojo.addClass(this._selectedColor,"colorPickerSelected");dojo.addClass(this._selectedColor,"colorPickerSelectedSkinny");this._colorPickerFlat=new e({})}var f=dojo.create("div",{className:"bgPropComboDiv",style:"margin-right:"+f+"px;padding:1px 0;"}),
q=dojo.isArray(this.data)?this.data:[""],n=this.langObjVE=c;if(g){this._statics=["",davinci.ve.widgets.ColorPicker.divider,n.colorPicker,n.removeValue];this._run={};this.data?(this.data.push({value:davinci.ve.widgets.ColorPicker.divider}),this.data.push({value:langObj.removeValue,run:function(){this.set("value","")}})):(this.data=[{value:this._statics[0]}],this.data.push({value:this._statics[2],run:this._chooseColorValue}),this.data.push({value:this._statics[3],run:function(){this.set("value","")}}),
this.data.push({value:this._statics[1]}),this.data.push({value:"transparent"}),this.data.push({value:"black"}),this.data.push({value:"white"}),this.data.push({value:"red"}),this.data.push({value:"green"}),this.data.push({value:"blue"}));q=[];for(n=0;n<this.data.length;n++)q.push(this.data[n].value),this.data[n].run&&(this._run[this.data[n].value]=this.data[n].run);this._store=new b({values:q,noncolors:this._statics})}else this._store=new k({values:q});this._comboBox=new a({store:this._store,id:this._textFieldId,
style:"width:100%;"});f.appendChild(this._comboBox.domNode);this.domNode.appendChild(d);g&&(this.domNode.appendChild(h),dojo.connect(h,"onclick",dojo.hitch(this,function(a){dojo.stopEvent(a);this._chooseColorValue()})),h.appendChild(this._selectedColor),this._colorPickerFlat_comboBoxUpdateDueTo="colorSwatch");this.domNode.appendChild(f);"string"==typeof this.propname&&this._comboBox&&(davinci.ve._BackgroundWidgets||(davinci.ve._BackgroundWidgets={}),davinci.ve._BackgroundWidgets[this.propname]={propPaletteWidget:this,
comboBox:this._comboBox});this.inherited(arguments)},startup:function(){this.inherited(arguments);this._button=dojo.byId(this._buttonId);dojo.connect(this._button,"onclick",this,function(){var a=this._cascade&&this._cascade._widget&&this._cascade._widget.getContext?this._cascade._widget.getContext():null,c=new f({context:a}),b=dojo.hitch(this,function(c){a||(console.error("Background.js. no context"),a={});var b=a.cascadeBatch={},f=b.propList=[],e=b.actions={},k=b.deferreds={};b.askUserResponse=void 0;
if(!c.cancel){var h=davinci.ve._BackgroundWidgets,q;for(q in h){var n=h[q];if(n.bgdWidget){var b=n.bgdWidget.get("value"),r=n.propPaletteWidget.get("value");b!==r&&(f.push(q),e[q]=dojo.hitch(this,function(a,c){a.propPaletteWidget._comboBoxUpdateDueTo="backgroundDialog";a.propPaletteWidget.set("value",c)},n,b),k[q]=new m)}}q="background-image";n=h[q];c=w.buildBackgroundImage(c.bgddata);for(b=0;b<c.length;b++)r=c[b],g.containsUrl(r)&&!g.isAbsolute(r)&&((h=g.getUrl(r))&&(r="url('"+(new d(h)).toString()+
"')"),c[b]=r);b=0==c.length?"":c[c.length-1];r=n.propPaletteWidget.get("value");b!==r&&(n.propPaletteWidget._cascade&&(n.propPaletteWidget._cascade._valueArrayNew=c),f.push(q),e[q]=dojo.hitch(this,function(a,c){n.propPaletteWidget._comboBoxUpdateDueTo="backgroundDialog";n.propPaletteWidget.set("value",c)},n,b),k[q]=new m);for(b=0;b<f.length;b++)q=f[b],k[q].then(dojo.hitch(this,function(c){(c=f[c+1])?e[c].apply():delete a.cascadeBatch},b));0<f.length&&(q=f[0],e[q].apply())}return!0},c),e=davinci.ve._BackgroundWidgets,
k;for(k in e){var h=e[k].propPaletteWidget._cascade;h&&(h._valueArrayNew=h._valueArray)}c.set("baseLocation",this._baseLocation);(new B({onOk:function(){b()},onShow:function(a,d,b){y.addChild(d,c,!0);this.add(c,null,!1);this.startDfd.resolve();return[c]}})).show()});this.connect(this._comboBox,"onChange",dojo.hitch(this,function(a){a!=davinci.ve.widgets.ColorPicker.divider&&a!=this.langObjVE.colorPicker||this._comboBox.set("value",this.value);var c=this._comboBoxUpdateDueTo;this._comboBoxUpdateDueTo=
void 0;"setAttr"!=c&&this._onChange(a)}));this.connect(this._comboBox,"onFocus",dojo.hitch(this,function(a){a=davinci.ve._BackgroundWidgets;for(var c in a){var d=a[c].propPaletteWidget._cascade;d&&(d._valueArrayNew=void 0)}(c=this._cascade&&this._cascade._widget&&this._cascade._widget.getContext?this._cascade._widget.getContext():null)&&delete c.cascadeBatch}));this._maqStartupComplete=!0},_setBaseLocationAttr:function(a){this._baseLocation=a},_setValueAttr:function(a){var c=this._comboBox.get("value");
this._colorswatch&&dojo.style(this._selectedColor,"backgroundColor",a);a=dojo.isArray(a)?0<a.length?a[a.length-1]:"":a;c!==a&&("backgroundDialog"!==this._comboBoxUpdateDueTo&&"colorSwatch"!==this._comboBoxUpdateDueTo&&(this._comboBoxUpdateDueTo="setAttr"),this._comboBox.set("value",a))},_onChange:function(a){this._colorswatch&&"string"==typeof a&&(a in this._run?dojo.hitch(this,this._run[a])():a==davinci.ve.widgets.ColorPicker.divider?this._comboBox.set("value",this._store.getItemNumber(0)):dojo.style(this._selectedColor,
"backgroundColor",a));this.value=this._comboBox.get("value");this.onChange(a)},onChange:function(a){},_getValueAttr:function(){return this._comboBox.get("value")},_setReadOnlyAttr:function(a){this._maqStartupComplete&&(this._isReadOnly=a,this._comboBox.set("disabled",a),this._button.disabled=a)},_chooseColorValue:function(){if(!this._isReadOnly){var a=this._comboBox.get("value"),c=this.isLeftToRight();davinci.ve.widgets.ColorPickerFlat.show(this._colorPickerFlat,a,this,c)}}})})},"davinci/ve/widgets/BackgroundDialog":function(){define("dojo/_base/declare dijit/_WidgetBase dijit/_TemplatedMixin dijit/_WidgetsInTemplateMixin davinci/Runtime davinci/ve/widgets/MutableStore davinci/ve/widgets/ColorStore xide/utils dojo/text!./templates/BackgroundDialog.html davinci/ve/utils/CssUtils davinci/lang/ve dijit/lang/_common davinci/ve/utils/URLRewrite davinci/model/Path dijit/form/Button davinci/ve/widgets/ColorPicker davinci/ve/widgets/ColorPickerFlat dijit/form/Textarea davinci/ui/widgets/FileFieldDialog".split(" "),
function(p,m,h,e,b,k,a,f,n,g,d,c,q,w){var r=function(a,c){return"url('"+c+"')"};p=p("davinci.ve.widgets.BackgroundDialog",[m,h,e],{templateString:n,widgetsInTemplate:!0,_filePicker:null,context:null,veNLS:d,stopRowTemplate:"\x3ctr class\x3d'bgdGradOptRow bgdStopRow' style\x3d'display:none;'\x3e\x3ctd class\x3d'bgdCol1'\x3e\x3c/td\x3e\x3ctd class\x3d'bgdOptsLabel bdgStopLabel'\x3e"+d.bgdTemplate+"\x3c/td\x3e\x3ctd class\x3d'bgdStopColorTD'\x3e\x3cselect class\x3d'bgdColor' dojoType\x3d'dijit.form.ComboBox'\x3e\x3c/select\x3e\x3c/td\x3e\x3ctd\x3e\x3cselect class\x3d'bgdPosition' dojoType\x3d'dijit.form.ComboBox'\x3e\x3c/select\x3e\x3c/td\x3e\x3ctd class\x3d'bgdPlusMinusButtons'\x3e\x3cspan class\x3d'bgdPlusButton' dojoType\x3d'dijit.form.Button'\x3e+\x3c/span\x3e\x3cspan class\x3d'bgdMinusButton' dojoType\x3d'dijit.form.Button'\x3e-\x3c/span\x3e\x3c/td\x3e\x3c/tr\x3e",
postMixInProperties:function(){this.inherited(arguments);dojo.mixin(this,c)},postCreate:function(){this.inherited(arguments);var c=this.langObj=d;this.stoppos_store=new k({values:"0% 100% 10% 20% 30% 40% 50% 60% 70% 80% 90%".split(" ")});var b=davinci.ve._BackgroundWidgets;this._statics=["",davinci.ve.widgets.ColorPicker.divider,c.colorPicker,c.removeValue];var f=[{value:this._statics[0]}];f.push({value:this._statics[2],action:"_colorpicker"});f.push({value:this._statics[3],action:"_removevalue"});
f.push({value:this._statics[1],action:"_donothing"});f.push({value:"transparent"});f.push({value:"black"});f.push({value:"white"});f.push({value:"red"});f.push({value:"green"});f.push({value:"blue"});var e=[];this._bgcolor_action={};var h=[];this._stops_action={};for(var q=0;q<f.length;q++)e.push(f[q].value),f[q].action&&(this._bgcolor_action[f[q].value]=f[q].action),""!=f[q].value&&"_removevalue"!=f[q].action&&(h.push(f[q].value),f[q].action&&(this._stops_action[f[q].value]=f[q].action));this._bgcolor_store=
new a({values:e,noncolors:this._statics});this._stops_store=new a({values:h,noncolors:this._statics});var f=b["background-image"].comboBox.get("value"),n,r;"string"==typeof f&&0<f.length?(n=g.parseBackgroundImage(f),r=n.type):n={};this.bgddata=n;this.bgdOtherTA.set("value",f);var w=[];"emptystring url linear radial none other".split(" ").forEach(function(a){w.push({value:a,label:c["bgdType_"+a]})});this.bgdTypeSelect.addOption(w);this._updateBackgroundImageType(r);this.connect(this.bgdTypeSelect,
"onChange",dojo.hitch(this,function(){var a=this.bgdTypeSelect.get("value");this._updateBackgroundImageType(a);this._onFieldChanged()}));f=b["background-color"].comboBox.get("value");r=this.bgdColorCB;r.set("store",this._bgcolor_store);r.set("value",f);n.backgroundColor=f;this.connect(this.bgdColorCB,"onChange",dojo.hitch(this,function(a){this._onChangeColor(a,this.bgdColorCB,this._bgcolor_action)}));b["background-color"].bgdWidget=this.bgdColorCB;r=b["background-repeat"].comboBox;f=r.get("value");
e=this.bgdRepeatCB;e.set("store",r.store);e.set("regExp","repeat|repeat-x|repeat-y|no-repeat");e.set("value",f);n.backgroundRepeat=f;this.connect(this.bgdRepeatCB,"onChange",dojo.hitch(this,function(){n.backgroundRepeat=this.bgdRepeatCB.get("value");this._onFieldChanged()}));b["background-repeat"].bgdWidget=this.bgdRepeatCB;r=b["background-position"].comboBox;f=r.get("value");e=this.bgdPositionCB;e.set("store",r.store);e.set("regExp","auto|contain|cover|"+g.regstr_posn);e.set("value",f);n.backgroundPosition=
f;this.connect(this.bgdPositionCB,"onChange",dojo.hitch(this,function(){n.backgroundPosition=this.bgdPositionCB.get("value");this._onFieldChanged()}));b["background-position"].bgdWidget=this.bgdPositionCB;r=b["background-size"].comboBox;f=r.get("value");e=this.bgdSizeCB;e.set("store",r.store);e.set("regExp","auto|contain|cover|"+g.regstr_len_or_pct);e.set("value",f);n.backgroundSize=f;this.connect(this.bgdSizeCB,"onChange",dojo.hitch(this,function(){n.backgroundSize=this.bgdSizeCB.get("value");this._onFieldChanged()}));
b["background-size"].bgdWidget=this.bgdSizeCB;r=b["background-origin"].comboBox;f=r.get("value");e=this.bgdOriginCB;e.set("store",r.store);e.set("regExp","border-box|padding-box|content-box");e.set("value",f);n.backgroundOrigin=f;this.connect(this.bgdOriginCB,"onChange",dojo.hitch(this,function(){n.backgroundOrigin=this.bgdOriginCB.get("value");this._onFieldChanged()}));b["background-origin"].bgdWidget=this.bgdOriginCB;r=b["background-clip"].comboBox;f=r.get("value");e=this.bgdClipCB;e.set("store",
r.store);e.set("regExp","border-box|padding-box|content-box");e.set("value",f);n.backgroundClip=f;this.connect(this.bgdClipCB,"onChange",dojo.hitch(this,function(){n.backgroundClip=this.bgdClipCB.get("value");this._onFieldChanged()}));b["background-clip"].bgdWidget=this.bgdClipCB;b=new k({values:"to bottom;to top;to right;to left;45deg;-45deg".split(";")});this.bgdLinearAngleCB.set("store",b);this.bgdLinearAngleCB.set("regExp",g.regstr_angle);this.bgdLinearAngleCB.set("value",n&&n.angle?n.angle:"to bottom");
this.connect(this.bgdLinearAngleCB,"onChange",dojo.hitch(this,function(){n.angle=this.bgdLinearAngleCB.get("value");this._onFieldChanged()}));b=new k({values:"center;left top;center center;right bottom;0% 0%;0px 0px".split(";")});this.bgdRadialPosCB.set("store",b);this.bgdRadialPosCB.set("regExp",g.regstr_posn);this.bgdRadialPosCB.set("value",n&&n.posn?n.posn:"center");this.connect(this.bgdRadialPosCB,"onChange",dojo.hitch(this,function(){n.posn=this.bgdRadialPosCB.get("value");this._onFieldChanged()}));
b=new k({values:["circle","ellipse"]});this.bgdRadialShapeCB.set("store",b);this.bgdRadialShapeCB.set("regExp",g.regstr_shape);this.bgdRadialShapeCB.set("value",n&&n.shape?n.shape:"circle");this.connect(this.bgdRadialShapeCB,"onChange",dojo.hitch(this,function(){n.shape=this.bgdRadialShapeCB.get("value");this._onFieldChanged()}));b=new k({values:["farthest-corner","farthest-side","closest-corner","closest-side"]});this.bgdRadialExtentCB.set("store",b);this.bgdRadialExtentCB.set("regExp",g.regstr_extent);
this.bgdRadialExtentCB.set("value",n&&n.extent?n.extent:"farthest-corner");this.connect(this.bgdRadialExtentCB,"onChange",dojo.hitch(this,function(){n.extent=this.bgdRadialExtentCB.get("value");this._onFieldChanged()}));this._initializeStops(n&&n.stops&&2<=n.stops.length?n.stops:[{color:"white",pos:"0%"},{color:"black",pos:"100%"}])},startup:function(){this.inherited(arguments);var a=this.bgddata&&this.bgddata.url?this.bgddata.url:"";this._filePicker.set("value",a);this._filePicker.owner=this;this.bgddata.url=
a;this.connect(this._filePicker,"onChange",dojo.hitch(this,function(){var a=this._filePicker.get("value");this.bgddata.url=a;this._onFieldChanged()}))},_updateBackgroundImageType:function(a){var c=this.domNode;if(!a||"none"!=a&&"url"!=a&&"linear"!=a&&"radial"!=a&&"other"!=a)a="emptystring";this.bgddata.type=a;this.bgdTypeSelect.set("value",a);var d=dojo.query(".bgdOptionsLabelRow",c),b=dojo.query(".bgdImageOptRow",c),f=dojo.query(".bgdGradOptRow",c),g=dojo.query(".bgdLinearOptRow",c),e=dojo.query(".bgdRadialOptRow",
c),c=dojo.query(".bgdOtherRow",c);"url"==a?(b.concat(d).forEach(function(a){dojo.removeClass(a,"dijitHidden")}),f.concat(c).forEach(function(a){dojo.addClass(a,"dijitHidden")})):"linear"==a?(f.concat(d).forEach(function(a){dojo.removeClass(a,"dijitHidden")}),b.concat(e).concat(c).forEach(function(a){dojo.addClass(a,"dijitHidden")})):"radial"==a?(f.concat(d).forEach(function(a){dojo.removeClass(a,"dijitHidden")}),b.concat(g).concat(c).forEach(function(a){dojo.addClass(a,"dijitHidden")})):"other"==
a?(c.forEach(function(a){dojo.removeClass(a,"dijitHidden")}),b.concat(f).concat(d).forEach(function(a){dojo.addClass(a,"dijitHidden")})):b.concat(f).concat(d).concat(c).forEach(function(a){dojo.addClass(a,"dijitHidden")})},_initializeStops:function(a){var c=this.langObj;a||(a=this.bgddata.stops);for(var d=this.bgdTypeSelect.get("value"),b=dojo.query(".bgdStopRow",this.domNode),f=b.length-1;0<f;f--){var e=b[f],k=dojo.query(".bgdColor",e),k=dijit.byNode(k[0]);k.destroyRecursive();k=dojo.query(".bgdPosition",
e);k=dijit.byNode(k[0]);k.destroyRecursive();dojo.destroy(e)}f=b[0];b=f.parentNode;e=f.nextSibling;for(f=0;f<a.length;f++){var h=a[f],q=dojo.create("tr",{className:"bgdGradOptRow bgdStopRow"});q.innerHTML=this.stopRowTemplate;"linear"!=d&&"radial"!=d&&dojo.addClass(q,"dijitHidden");b.insertBefore(q,e);dojo.parser.parse(q);dojo.query(".bdgStopLabel",q)[0].innerHTML=this.langObj.bgdStop+" #"+(f+1)+":";k=dojo.query(".bgdColor",q);k=dijit.byNode(k[0]);k.set("store",this._stops_store);k.set("regExp",g.regstr_stop_color);
k.set("value",h.color);this.connect(k,"onChange",dojo.hitch(this,function(a,c){this._onChangeColor(c,a,this._stops_action)},k));k=dojo.query(".bgdPosition",q);k=dijit.byNode(k[0]);k.set("store",this.stoppos_store);h="string"==typeof h.pos&&0<h.pos.length?h.pos:0==f?"0%":"100%";k.set("regExp",g.regstr_stop_pos);k.set("value",h);this.connect(k,"onChange",dojo.hitch(this,function(){this._updateDataStructureStops();this._onFieldChanged()}));k=dojo.query(".bgdPlusButton",q)[0];k=dijit.byNode(k);k.set("title",
c.bgdAddStop);this.connect(k,"onClick",dojo.hitch(this,function(a){var c=this.bgddata.stops[a];this.bgddata.stops.splice(a+1,0,{color:c.color,pos:c.pos});this._initializeStops()},f));h=dojo.query(".bgdMinusButton",q)[0];h=dijit.byNode(h);h.set("title",c.bgdRemoveStop);this.connect(h,"onClick",dojo.hitch(this,function(a){this.bgddata.stops.splice(a,1);this._initializeStops()},f));q=dojo.query(".bgdMinusButton",this.domNode);for(k=0;k<q.length;k++)h=q[k],h=dijit.byNode(h),2>=a.length?h.set("disabled",
!0):h.set("disabled",!1)}this._updateDataStructureStops()},_onFieldChanged:function(){this._updateDialogValidity();this._updateBackgroundPreview()},_setBaseLocationAttr:function(a){this._baseLocation=a;this._filePicker.set("baseLocation",a)},_updateDialogValidity:function(){var a=this.bgddata;if(a&&a.type){var c=this.domNode,a=a.type,d=[],b=!0;"url"==a?d=dojo.query(".bgdImageOptRow",c):"linear"==a?d=dojo.query(".bgdStopRow",c).concat(dojo.query(".bgdLinearOptRow",c)):"radial"==a&&(d=dojo.query(".bgdStopRow",
c).concat(dojo.query(".bgdRadialOptRow",c)));d.forEach(function(a){dojo.query("[widgetid]",a).forEach(function(a){"function"!=typeof a.isValid||a.isValid()||(b=!1)})});this.bdgValid=b}},_updateBackgroundPreview:function(){function a(c,f){var g=b[f];"string"==typeof g&&0<g.length&&(d+=";"+c+":"+g)}var c=dojo.query(".bgdPreview",this.domNode)[0],d="",b=this.bgddata;a("background-color","backgroundColor");a("background-repeat","backgroundRepeat");a("background-position","backgroundPosition");a("background-size",
"backgroundSize");a("background-origin","backgroundOrigin");a("background-clip","backgroundClip");for(var e=g.buildBackgroundImage(this.bgddata),k=0;k<e.length;k++){var h=e[k];if(q.containsUrl(h)&&!q.isAbsolute(h)&&this.context){var n=q.getUrl(h),n=f.parse_url(n);(n=this.context.ctx.getFileManager().getImageUrl({path:n.host+n.path,mount:n.scheme},!1))&&(h=r(this._baseLocation,n))}d+=";background-image:"+h}c.setAttribute("style",d);this.bgdOtherTA.set("value",e[e.length-1])},_updateDataStructureStops:function(){var a=
this.bgddata;a.stops=[];for(var c=dojo.query(".bgdStopRow",this.domNode),d=1;d<c.length;d++){var b=c[d],f=dojo.query(".bgdColor",b),f=dijit.byNode(f[0]),b=dojo.query(".bgdPosition",b),b=dijit.byNode(b[0]);a.stops.push({color:f.get("value"),pos:b.get("value")})}},_setValueAttr:function(a){a&&this._colorPickerTargetWidget.set("value",a)},_onChangeColor:function(a,c,d){if(a=d[a])if("_removevalue"==a?c.set("value",""):c.set("value",c._currentcolorvalue),"_colorpicker"==a){a=new davinci.ve.widgets.ColorPickerFlat({});
d=c.get("value");var b=this.isLeftToRight();this._colorPickerTargetWidget=c;davinci.ve.widgets.ColorPickerFlat.show(a,d,this,b)}c._currentcolorvalue=c.get("value");this.bgddata.backgroundColor=this.bgdColorCB.get("value");this._updateDataStructureStops();this._onFieldChanged()},okButton:function(){},cancelButton:function(){this.onClose()}});p.getCSSForWorkspaceURL=r;return p})},"davinci/ve/utils/CssUtils":function(){define(["dojo/_base/Color","davinci/ve/utils/URLRewrite"],function(p,m){var h=[],
e;for(e in p.named)"transparent"!=e&&h.push(e);h.sort(function(a,c){return 0==c.indexOf(a)?1:0==a.indexOf(c)?-1:a<c?-1:1});var b=[];h.forEach(function(a){b.push(a);a=p.named[a];a="#"+(16777216+(a[0]<<16)+(a[1]<<8)+a[2]).toString(16).slice(1);b.push(a)});var k=/^\-?(?:\d*\.\d+|\d+)$/,h="(?:";for(e=0;e<b.length;e+=2)0!=e&&(h+="|"),h+=b[e];h="(?:"+(h+")")+"|\\#(?:[0-9A-Fa-f]{6}|[0-9A-Fa-f]{3})|(?:rgb|hsl)\\s*\\(\\s*(?:(?:\\d*\\.\\d+|\\d+)%?)\\s*,\\s*(?:(?:\\d*\\.\\d+|\\d+)%?)\\s*,\\s*(?:(?:\\d*\\.\\d+|\\d+)%?)\\s*\\)|(?:rgba|hsla)\\s*\\(\\s*(?:(?:\\d*\\.\\d+|\\d+)%?)\\s*,\\s*(?:(?:\\d*\\.\\d+|\\d+)%?)\\s*,\\s*(?:(?:\\d*\\.\\d+|\\d+)%?)\\s*,\\s*(?:\\d*\\.\\d+|\\d+)\\s*\\))";
e="(?:"+h+"(?:\\s+(?:\\-?(?:\\d*\\.\\d+|\\d+)(?:in|cm|mm|pt|pc|px|%)|0))?)";var a=new RegExp("(?:\\s*("+h+")\\s*((?:\\-?(?:\\d*\\.\\d+|\\d+)(?:in|cm|mm|pt|pc|px|%)|0))?\\s*,?(.*))");e="("+e+"(?:\\s*,\\s*"+e+")*)";var f=/^\s*(url)\s*\(\s*(?:\'([^\']*)\'*|\"([^\"]*)\"|([^\'\"]*))\s*\)\s*$/,n=new RegExp("^\\s*((?:-moz-linear-gradient|-webkit-linear-gradient|-ms-linear-gradient|-o-linear-gradient|linear-gradient))\\s*\\(\\s*(?:(?:to\\s+((?:\\s*left\\s*|\\s*right\\s*|\\s*top\\s*|\\s*bottom\\s*){1,2})|((?:\\s*left\\s*|\\s*right\\s*|\\s*top\\s*|\\s*bottom\\s*){1,2})|((?:\\-?(?:\\d*\\.\\d+|\\d+)deg)))\\s*,\\s*)?\\s*"+
e+"\\s*\\)\\s*$"),g=new RegExp("^\\s*((?:-moz-radial-gradient|-webkit-radial-gradient|-ms-radial-gradient|-o-radial-gradient|radial-gradient))\\s*\\(\\s*(?:\\s*(?:\\s*(\\s*(?:(?:\\-?(?:\\d*\\.\\d+|\\d+)(?:in|cm|mm|pt|pc|px|%)|0)|(?:left|center|right|top|bottom))(?:\\s*(?:(?:\\-?(?:\\d*\\.\\d+|\\d+)(?:in|cm|mm|pt|pc|px|%)|0)|(?:left|center|right|top|bottom)))?)\\s*((?:\\-?(?:\\d*\\.\\d+|\\d+)deg))\\s*|\\s*(\\s*(?:(?:\\-?(?:\\d*\\.\\d+|\\d+)(?:in|cm|mm|pt|pc|px|%)|0)|(?:left|center|right|top|bottom))(?:\\s*(?:(?:\\-?(?:\\d*\\.\\d+|\\d+)(?:in|cm|mm|pt|pc|px|%)|0)|(?:left|center|right|top|bottom)))?)\\s*|\\s*((?:\\-?(?:\\d*\\.\\d+|\\d+)deg))\\s*)\\s*,\\s*)?\\s*(?:\\s*(?:\\s*(circle|ellipse)\\s*((?:(?:closest-side|farthest-side|closest-corner|farthest-corner|contain|cover)|(?:(?:\\-?(?:\\d*\\.\\d+|\\d+)(?:in|cm|mm|pt|pc|px|%)|0)(?:\\s+(?:\\-?(?:\\d*\\.\\d+|\\d+)(?:in|cm|mm|pt|pc|px|%)|0)\\s*)?)))\\s*|\\s*((?:(?:closest-side|farthest-side|closest-corner|farthest-corner|contain|cover)|(?:(?:\\-?(?:\\d*\\.\\d+|\\d+)(?:in|cm|mm|pt|pc|px|%)|0)(?:\\s+(?:\\-?(?:\\d*\\.\\d+|\\d+)(?:in|cm|mm|pt|pc|px|%)|0)\\s*)?)))\\s*(circle|ellipse)\\s*|\\s*(circle|ellipse)\\s*|\\s*((?:(?:closest-side|farthest-side|closest-corner|farthest-corner|contain|cover)|(?:(?:\\-?(?:\\d*\\.\\d+|\\d+)(?:in|cm|mm|pt|pc|px|%)|0)(?:\\s+(?:\\-?(?:\\d*\\.\\d+|\\d+)(?:in|cm|mm|pt|pc|px|%)|0)\\s*)?)))\\s*)\\s*,\\s*)?\\s*"+
e+"\\s*\\)\\s*$"),d=/(?:\s*((?:top|bottom|left|right|center|(?:\-?(?:\d*\.\d+|\d+)%?)))\s+((?:top|bottom|left|right|center|(?:\-?(?:\d*\.\d+|\d+)%?)))\s*)/;e="("+("(?:\\s*,\\s*"+("(?:"+("(?:color-stop\\s*\\(\\s*(?:\\-?(?:\\d*\\.\\d+|\\d+)%?)\\s*,\\s*"+h+"\\s*\\)\\s*)")+"|"+("(?:from\\s*\\(\\s*"+h+"\\s*\\)\\s*)")+"|"+("(?:to\\s*\\(\\s*"+h+"\\s*\\)\\s*)")+")")+"\\s*)")+"+)";var c=new RegExp("(?:\\s*,\\s*"+("(?:"+("(?:(color-stop)\\s*\\(\\s*((?:\\-?(?:\\d*\\.\\d+|\\d+)%?))\\s*,\\s*("+h+")\\s*\\)\\s*)")+
"|"+("(?:(from)\\s*\\(\\s*("+h+")\\s*\\)\\s*)")+"|"+("(?:(to)\\s*\\(\\s*("+h+")\\s*\\)\\s*)")+")")+"\\s*)(.*)"),q=new RegExp("(?:\\s*(-webkit-gradient)\\s*\\(\\s*(linear)\\s*(?:\\s*,\\s*((?:\\s*(?:top|bottom|left|right|center|(?:\\-?(?:\\d*\\.\\d+|\\d+)%?))\\s+(?:top|bottom|left|right|center|(?:\\-?(?:\\d*\\.\\d+|\\d+)%?))\\s*))\\s*)(?:\\s*,\\s*((?:\\s*(?:top|bottom|left|right|center|(?:\\-?(?:\\d*\\.\\d+|\\d+)%?))\\s+(?:top|bottom|left|right|center|(?:\\-?(?:\\d*\\.\\d+|\\d+)%?))\\s*))\\s*)"+e+"\\s*\\)\\s*)"),
w=new RegExp("(?:\\s*(-webkit-gradient)\\s*\\(\\s*(radial)\\s*(?:(?:\\s*,\\s*((?:\\s*(?:top|bottom|left|right|center|(?:\\-?(?:\\d*\\.\\d+|\\d+)%?))\\s+(?:top|bottom|left|right|center|(?:\\-?(?:\\d*\\.\\d+|\\d+)%?))\\s*))\\s*)(?:\\s*,\\s*((?:\\d*\\.\\d+|\\d+))\\s*)(?:\\s*,\\s*((?:\\s*(?:top|bottom|left|right|center|(?:\\-?(?:\\d*\\.\\d+|\\d+)%?))\\s+(?:top|bottom|left|right|center|(?:\\-?(?:\\d*\\.\\d+|\\d+)%?))\\s*))\\s*)(?:\\s*,\\s*((?:\\d*\\.\\d+|\\d+))\\s*)?)"+e+"\\s*\\)\\s*)"),r=function(c){var d=
[];do{var b=c.match(a);b&&(d.push({color:b[1],pos:b[2]}),c=b[3])}while(b);return d},B=function(a){var d=[],b=[],f,g;do{var e=a.match(c);e&&(e[4]?f={color:e[5]}:e[6]?g={color:e[7]}:(a=e[2].match(k)?100*e[2]+"%":e[2],b.push({color:e[3],pos:a})),a=e[8])}while(e);f&&d.push(f);for(f=0;f<b.length;f++)d.push(b[f]);g&&d.push(g);return d};return{regstr_posn:"^\\s*\\s*(?:(?:\\-?(?:\\d*\\.\\d+|\\d+)(?:in|cm|mm|pt|pc|px|%)|0)|(?:left|center|right|top|bottom))(?:\\s*(?:(?:\\-?(?:\\d*\\.\\d+|\\d+)(?:in|cm|mm|pt|pc|px|%)|0)|(?:left|center|right|top|bottom)))?\\s*$",
regstr_len_or_pct:"^\\s*(?:\\-?(?:\\d*\\.\\d+|\\d+)(?:in|cm|mm|pt|pc|px|%)|0)\\s*$",regstr_angle:"^\\s*(?:to\\s+((?:\\s*left\\s*|\\s*right\\s*|\\s*top\\s*|\\s*bottom\\s*){1,2})|((?:\\-?(?:\\d*\\.\\d+|\\d+)deg)))\\s*$",regstr_shape:"^\\s*circle|ellipse\\s*$",regstr_extent:"^\\s*(?:(?:closest-side|farthest-side|closest-corner|farthest-corner|contain|cover)|(?:(?:\\-?(?:\\d*\\.\\d+|\\d+)(?:in|cm|mm|pt|pc|px|%)|0)(?:\\s+(?:\\-?(?:\\d*\\.\\d+|\\d+)(?:in|cm|mm|pt|pc|px|%)|0)\\s*)?))\\s*$",regstr_stop_color:"\\s*"+
h+"\\s*",regstr_stop_pos:"\\s*(?:\\-?(?:\\d*\\.\\d+|\\d+)(?:in|cm|mm|pt|pc|px|%)|0)\\s*",parseBackgroundImage:function(a){var c={},b=a.match(/^\s*$/);if(b)c.type="emptystring";else if(b=a.match(/^\s*none\s*$/))c.type="none";else if(b=a.match(f))c.type="url",c.func=b[1],c.url=b[2]?b[2]:b[3]?b[3]:b[4];else if(b=a.match(q)){c.type="linear";c.func=b[1];c.webkitGradType=b[2];c.webKitPosn1=b[3];c.webKitPosn2=b[4];var e=c.webKitPosn1,k=c.webKitPosn2;a=0<=e.indexOf("left");var h=0<=e.indexOf("top"),m=0<=
e.indexOf("right"),e=0<=e.indexOf("bottom"),p=0<=k.indexOf("left"),D=0<=k.indexOf("top"),H=0<=k.indexOf("right"),k=0<=k.indexOf("bottom");h&&k&&(a&&p||m&&H)?c.angle="to bottom":e&&D&&(a&&p||m&&H)?c.angle="to top":a&&H&&(h&&D||e&&k)?c.angle="to right":p&&m&&(h&&D||e&&k)?c.angle="to left":a&&h&&H&&k?c.angle="to bottom right":a&&e&&H&&D?c.angle="to top right":m&&h&&p&&k?c.angle="to bottom left":m&&e&&p&&D&&(c.angle="to top left");c.stops=B(b[5])}else if(b=a.match(w))c.type="radial",c.func=b[1],c.webkitGradType=
b[2],c.webKitPosn1=b[3],c.webKitRadius1=b[4],c.webKitPosn2=b[5],c.webKitRadius2=b[6],c.shape=c.webKitPosn1==c.webKitPosn2?"circle":"ellipse",h=c.webKitPosn1,(a=h.match(d))?(h=a[1],h.match(/^\d+$/)&&(h+="px"),a=a[2],a.match(/^\d+$/)&&(a+="px"),a=h+" "+a):a=h,c.posn=a,c.extent=c.webKitRadius2?c.webKitRadius2+"px":c.webKitRadius1?c.webKitRadius1+"px":"farthest-corner",c.stops=B(b[7]);else if(b=a.match(n))c.type="linear",c.func=b[1],c.angle=b[2]?"to "+b[2]:b[3]?"to "+b[3]:b[4],c.stops=r(b[5]);else if(b=
a.match(g))c.type="radial",c.func=b[1],c.posn=b[2]?b[2]:b[4],c.angle=b[3]?b[3]:b[5],c.shape=b[6]?b[6]:b[9]?b[9]:b[10],c.extent=b[7]?b[7]:b[8]?b[8]:b[11],c.stops=r(b[12]);b||(c.type="unknown");return c},buildBackgroundImage:function(a){var c=[];if("emptystring"==a.type)c.push("");else if("none"==a.type)c.push("none");else if("url"==a.type){if("string"==typeof a.url&&0<a.url.length){var d=m.getUrl(a.url);d||(d=m.stripQuotes(a.url));c.push("url('"+d+"')")}}else if("linear"==a.type||"radial"==a.type){for(var d=
"",b,f,g=[],e=0;e<a.stops.length;e++){var k=a.stops[e],h="string"==typeof k.pos&&0<k.pos.length?k.pos:"";0<e&&(d+=", ");d+=k.color;if(0<e&&e<a.stops.length-1||0==e&&0!=h.length&&"0%"!=h&&0!=h-0||e==a.stops.length-1&&0!=h.length&&"100%"!=h&&1!=h-0)d+=" "+h;0!=e||0!=h.length&&"0%"!=h&&0!=h-0?e!=a.stops.length-1||0!=h.length&&"100%"!=h&&1!=h-0?g.push("color-stop("+h+", "+k.color+")"):f="to("+k.color+")":b="from("+k.color+")"}k="";h=!1;b&&(k+=b,h=!0);f&&(h&&(k+=", "),k+=f,h=!0);for(e=0;e<g.length;e++)h&&
(k+=", "),k+=g[e],h=!0;if("linear"==a.type){b="(";var q=a.angle;(f="string"==typeof q&&0<q.length?q.match(/^\s*(?:to\s+((?:\s*left\s*|\s*right\s*|\s*top\s*|\s*bottom\s*){1,2})|((?:\-?(?:\d*\.\d+|\d+)deg)))\s*$/):null)||(q="to bottom");"to bottom"!=q&&(b+=q+",");a="(linear,";g=0<=q.indexOf("left");e=0<=q.indexOf("top");h=0<=q.indexOf("right");q=0<=q.indexOf("bottom");g&&e?a+=" right bottom, left top, ":g&&q?a+=" right top, left bottom, ":h&&e?a+=" left bottom, right top, ":h&&q?a+=" left top, right bottom, ":
g?a+=" right top, left top, ":h?a+=" left top, right top, ":e?a+=" left bottom, left top, ":q?a+=" left top, left bottom, ":(g=180*(90-parseFloat(f[4]))/Math.PI,f=Math.cos(g),g=Math.sin(g),0<=f&&0<=g?(a+="0% 100%,",a=Math.abs(f)>Math.abs(g)?a+("100% "+100*(1-Math.abs(g)/Math.abs(f))+"%"):a+(Math.abs(f)/Math.abs(g)*100+"% 100%")):0<=f&&0>g?(a+="0% 0%,",a=Math.abs(f)>Math.abs(g)?a+("100% "+Math.abs(-g)/Math.abs(f)*100+"%"):a+(Math.abs(f)/Math.abs(g)*100+"% 100%")):0>f&&0<=g?(a+="100% 100%,",a=Math.abs(f)>
Math.abs(g)?a+("0% "+100*(1-Math.abs(g)/Math.abs(f))+"%"):a+(Math.abs(f)/Math.abs(g)*100+"% 100%")):(a+="100% 0%,",a=Math.abs(f)>Math.abs(g)?a+("0% "+Math.abs(-g)/Math.abs(f)*100+"%"):a+(Math.abs(f)/Math.abs(g)*100+"% 100%")),a+=", ");b+=d+")";c.push("-webkit-gradient"+(a+(k+")")));c.push("-o-linear-gradient"+b);c.push("-ms-linear-gradient"+b);c.push("-moz-linear-gradient"+b);c.push("-webkit-linear-gradient"+b);c.push("linear-gradient"+b)}else b="(","center"!=a.posn&&"center center"!=a.posn&&(b+=
a.posn+", "),"circle"!=a.shape&&(b+=a.shape+", "),"farthest-corner"!=a.extent&&(b+=a.extent+", "),b+=d+")",a="(radial, center center, 10, center center, "+(k+")"),c.push("-webkit-gradient"+a),c.push("-o-radial-gradient"+b),c.push("-ms-radial-gradient"+b),c.push("-moz-radial-gradient"+b),c.push("-webkit-radial-gradient"+b),c.push("radial-gradient"+b)}return c}}})},"davinci/ui/widgets/FileFieldDialog":function(){define("dojo/_base/declare dijit/_WidgetBase dijit/_TemplatedMixin dijit/_WidgetsInTemplateMixin davinci/Workbench davinci/ui/widgets/OpenFile dijit/form/Button davinci/model/Path davinci/lang/ui dijit/lang/_common dojo/text!./templates/FileFieldDialog.html dijit/form/TextBox xide/views/_PanelDialog xide/utils xide/types xfile/views/FileGrid xfile/FileActions".split(" "),
function(p,m,h,e,b,k,a,f,n,g,d,c,q,w,r,B,y){return p("davinci.ui.widgets.FileFieldDialog",[m,h,e],{templateString:d,widgetsInTemplate:!0,_fileSelectionDialog:null,_showFileSelectionDialog:function(){var a=this;this.ctx=b.ctx;y.createFilePicker(this,"",function(c){var d=w.buildPath(c.mount,c.path,!1);a.ctx.getFileManager().getImageUrl(c,!0,{oriPath:d});console.error(" file picker done ",d);a.textField.set("value",d);a._onChange()},n.selectFile,null,{mount:"workspace_user",selection:""},null,B)},_setBaseLocationAttr:function(a){this._baseLocation=
a},_setValueAttr:function(a){this.value!=a&&(this.value=a,this.textField.set("value",a))},_setDisabledAttr:function(a){this.textField.set("disabled",a);this.button.set("disabled",a);this.inherited(arguments)},_setIntermediateChangesAttr:function(a){this.textField.set("intermediateChanges",a);this.inherited(arguments)},_onChange:function(){var a=this.textField.get("value");this.value!=a&&(this.value=a,this.textField.set("value",this.value),this.onChange(a))},onChange:function(a){},_getValueAttr:function(){return this.textField.get("value")}})})},
"davinci/ui/widgets/OpenFile":function(){define("dojo/_base/declare dijit/_Templated dijit/_Widget davinci/library system/resource davinci/workbench/Preferences davinci/Runtime davinci/Workbench dijit/Menu dijit/MenuItem davinci/model/Path dijit/form/DropDownButton davinci/lang/ui dijit/lang/_common dijit/form/Button dijit/form/TextBox dijit/form/RadioButton dijit/layout/ContentPane dijit/Tree".split(" "),function(p,m,h,e,b,k,a,f,n,g,d,c,q,w){return p("davinci.ui.widgets.OpenFile",[h,m],{widgetsInTemplate:!0,
fileDialogFileName:null,fileDialogParentFolder:null,postMixInProperties:function(){dojo.mixin(this,q);dojo.mixin(this,w);this.inherited(arguments)},postCreate:function(){this.inherited(arguments);this.fileTree.watch("selectedItem",dojo.hitch(this,this._updateFields));this._value||this._setValueAttr(this._getForcedRootAttr())},startup:function(){this.fileTree.startup()},_setValueAttr:function(a){a!=this._value&&(this._value=a,this.fileTree.set("selectedItems",[a]))},_getForcedRootAttr:function(){return this._forcedRoot||
b.findResource(f.getProject())},_setForcedRootAttr:function(a){this._forcedRoot=a},_updateFields:function(){var a=this.fileTree.get("selectedItems"),a=null!=a&&0<a.length?a[0]:null;dojo.attr(this._okButton,"disabled",!0);null!=a&&"File"==a.elementType&&dojo.attr(this._okButton,"disabled",!1)},_okButton:function(){this.value=this.fileTree.get("selectedItems")[0]},_onDblClick:function(a){this._okButton();this.onExecute()},_onKeyPress:function(a){a.which==dojo.keys.ENTER&&(this._okButton(),this.onExecute())},
_getValueAttr:function(){return this.value},_cancelButton:function(){this.onClose()},resize:function(a){this.contentpane.resize(a)},onExecute:function(){},onClose:function(){}})})},"davinci/lang/ui":function(){define([],function(){return{dontShowAgain:"Don't show again",selectFile:"Select a file",openFile:"Open File",aboutMaqetta:"About Maqetta",productVersion:"Version: ${0}",productDate:"Date: ${0}",build:"Build: ${0}",library:"Library",version:"Version",include:"Include",source:"Source",baseLocation:"Base Location",
invalidDownloadFileName:"File name may only contain letters, numbers, \x26#8216;_\x26#8216;, and \x26#8216;.\x26#8216;.",selectedFiles:"Selected Files",noFilesSelected:"No files selected!",downloadButtonLabel:"Download",themeAlreadyExists:"Theme already Exists!",invalidThemeName:"Invalid theme name",errorCreatingTheme:"Error creating theme: ",creatingTheme:"Creating theme",noUserThemes:"No user themes found in workspace. Please create a new theme before editing.",themeSetsDialog:"Manage theme sets",
renameThemeSet:"Rename theme set",themeSets:"Theme sets:",currentlySelectedThemeSet:"Currently selected theme set:",themeSetName:"Name:",desktopTheme:"Dojo desktop 1.7 theme:",mobileTheme:"Dojo mobile 1.7 theme:",android:"Android:",blackberry:"Blackberry:",ipad:"iPad:",iphone:"iPhone:",other:"Other:",selectTheme:"Select theme",themeSet:"Theme set:",themeVersionMessage:"Theme version does not match workspace version this could produce unexpected results. We suggest recreating the custom theme using the current version of Maqetta and deleting the existing theme.",
addThemeSet:"Add theme set",deleteThemeSet:"Delete theme set",workspaceLocation:"Workspace Location",savingReadonlyFile:"This file is a read-only file. Please save it to a writeable location.",create:"Create",open:"Open",save:"Save",select:"Select",update:"Update",unknown:"unknown",fileName:"File name",folderName:"Folder name",parentFolder:"Parent folder: ",newFolderLabel:"New folder",cancelButtonLabel:"Cancel",newFolderName:"Name:",createFolder:"Create Folder",createNewFile:"Create New File",createMobileApplication:"Create a Mobile Application",
createDesktopApplication:"Create a Desktop Application",createSketchHiFi:"Create a Sketch (high-fidelity)",createSketchLoFi:"Create a Sketch (low-fidelity)",createNewCSSFile:"Create New CSS File",createNewJSFile:"Create New JavaScript File",createNewFolder:"Create New Folder",saveFileAs:"Save File As",downloadFile:"Download",selectFiles:"Select Files...",selectZip:"Select ZIP file...",upload:"Upload",addFiles:"Upload",uploading:"Uploading...",completed:"completed: ${0} \n",done:"Done",explodeZipWarning:"Warning: Contents of .zip files will overwrite any conflicting files in your workspace",
mustEnterFileName:"You must enter a file name.",cannotSelect:"Cannot select ${0}. It is a folder.",fileAlreadyExistsOverwrite:"File ${0} already exists. OK to overwrite?",cannotCreate:"Cannot create ${0}. It already Exists.",fileNameSlashCharacter:"File names cannot contain a slash character (/). Your file name is: ${0}",doesNotHaveExtension:"The name ${0} does not have an extension (e.g., .html, .css or .js) and will be treated as a plain text file. OK to proceed?",areYouSureDelete:"Are you sure you want to delete ${0}?",
areYouSureDeleteProject:"Are you sure you want to delete project ${0}?",noResourcesSelected:"No resources are currently selected.",optimizeOption:"Use Dojo Web Builder (experimental)",downloadFullSource:"Download uncompressed source for selected libraries (if available)",selectAll:"All",selectNone:"None",themeToClone:"Theme to clone",newName:"New Name",selectTheme:"Select a Theme",newProject:"New Project",renameProjectDialogTitle:"Rename Project To...",deleteProjectButtonTitle:"Delete Project",renameProjectButtonTitle:"Rename Project...",
deleteOnlyProjectError:"You can't delete the only project in your workspace!",newFileShowFiles:"Show file picker",newFileHideFiles:"Hide file picker",root:"(root)",nhfoDevice:"Device:",nhfoDeviceTooltip:"Select an initial mobile device",nhfoThemeButtonLabel:"Theme...",nhfoThemeButtonTitle:"Select themes or theme set for new HTML file",renameNewLabel:"Name:",renameButtonLabel:"Rename",renameDialogTitle:"Rename To...",createProject:"New project",createProjectMenuItem:"New project...",deleteProjectMenuItem:"Delete this project...",
renameProjectMenuItem:"Rename this project...",saveAsProjectTemplateMenuItem:"Save as project template...",manageProjectTemplatesMenuItem:"Manage project templates...",modifyLibrariesMenuItem:"Modify libraries...",modifyLibraries:"Modify libraries",projectColon:"Project:",ProjectMenu:"Project menu",newProjectName:"Name:",newProjectTemplate:"Template:",newProjectUseProjectTemplate:"Use project template",newProjectCloneExistingProject:"Copy files from current project into new project",newProjectEclipseSupport:"New project should be Eclipse-compatible",
newProjectNameExists:"A project with this name already exists",saveAsProjectTemplate:"Save as project template",newProjectTemplateName:"Project template name:",newProjectTemplateShareLabel:"Share with everyone",newProjectTemplateOverwrite:"Project template {0} already exists. OK to overwrite?",newProjectTemplateCreationSuccess:"Project template {0} has been saved",newProjectTemplateCreationFailure:"Error: Project template {0} save operation failed",newProjectTemplateCancelled:"Operation cancelled",
manageProjectTemplates:"Manage project templates",ManageProjectTemplatesHeaderName:"Project template name",ManageProjectTemplatesHeaderShared:"Share with everyone?",ManageProjectTemplatesHeaderCreatedBy:"Created by",ManageProjectTemplatesHeaderCreatedOn:"Created on",ManageProjectTemplatesHeaderLastModified:"Last updated",ManageProjectTemplatesNoTemplates:"You have no project templates.",ManageProjectTemplatesDuplicateNames:"Invalid entries - two project templates have the same name",ManageProjectTemplateAboutToOccur:"The following actions are about to occur:",
ManageProjectTemplateDeletions:"project template deletions",ManageProjectTemplateModifications:"project template modifications",ManageProjectTemplateOKToProceed:"OK to proceed?",ManageProjectTemplatesInitializing:"Initializing...",modify:"Modify",User:"Account",currentProject:"Current Project:",selectProject:"Select a Project:",NoteOperationNotUndoable:"Note: this operation is not undoable."}})},"davinci/ve/widgets/WidgetToolBar":function(){define("dojo/_base/declare dijit/_Templated dijit/_Widget davinci/Runtime davinci/workbench/ViewLite davinci/ve/commands/ModifyCommand dijit/form/ComboBox dijit/form/ValidationTextBox dijit/form/TextBox dojo/store/Memory davinci/lang/ve dijit/lang/_common davinci/ve/widget dojo/text!./templates/WidgetToolBar.html".split(" "),
function(p,m,h,e,b,k,a,f,n,g,d,c,q,w){return p("davinci.ve.widgets.WidgetToolBar",[b,h,m],{templateString:w,widgetsInTemplate:!0,descNode:null,idTextBox:null,classComboBox:null,blockGroupComboBox:null,widgetDescStart:"",widgetDescUnselectEnd:"",_oldIDName:null,_oldClassName:null,_oldBlockGroup:null,veNLS:d,cssRules:null,postCreate:function(){this.idTextBox.validator=dojo.hitch(this,function(a,c){this.invalidMessage=null;if(!a||!this._widget||this.changing)return!0;var b=q.byId(a);return b&&b!==this._widget?
(this.invalidMessage=d.idAlreadyUsed,!1):!0});dojo.subscribe("/davinci/ui/widget/replaced",dojo.hitch(this,this._widgetReplaced));var a=this;this.subscribe("CSSRulesUpdated",function(c){a.cssRules=c.names;a.onWidgetSelectionChange()})},initialize:function(){if((this._editor=e.currentEditor)&&this._editor.visualEditor&&this._editor.visualEditor.context){var a=this._editor.visualEditor.context.getSelection();this._widget=0==a.length?null:a[0]}else this._widget=null;this.onWidgetSelectionChange()},cssSelect:null,
startup:function(){this.inherited(arguments);if(!this.cssSelect){this.cssSelect=$(this.cssClasses).selectize({delimiter:",",persist:!0,plugins:["restore_on_backspace"],createOnBlur:!0,dropdownParent:"body",create:function(a){return{value:a,text:a}}}).data().selectize;var a=this;this.cssSelect.on("change",function(){var c=a.cssSelect.getValue();if(a._widget&&!a.changing&&(a.context&&a.context.blockChange(!1),c=c.split(",").join(" "),c!==a._oldClassName)){a._oldClassName=c;var d={};d["class"]=c;c=new davinci.ve.commands.ModifyCommand(a._widget,
d,null);dojo.publish("/davinci/ui/widgetPropertiesChanges",[{source:a._editor.editor_id,command:c}])}})}},onEditorSelected:function(){this.initialize();this.domNode.style.display=this._editor&&"davinci.ve.HTMLPageEditor"==this._editor.editorID?"block":"none"},_widgetReplaced:function(a,c){this._widget===c&&(this._widget=a,this.onWidgetSelectionChange())},onWidgetSelectionChangeBak:function(){var a="";if(this._widget){a=q.getLabel(this._widget);this.context=this._widget.getContext();this.classComboBox.set("disabled",
!1);this.idTextBox.attr("disabled",!1);this.changing=!0;this._oldBlockGroup=this._oldClassName=this._oldIDName=null;dojo.addClass(this.domNode,"propertiesSelection");this.descNode.innerHTML=a;if(this._editor&&"davinci.ve.PageEditor"===this._editor.declaredClass&&(a=this._widget._srcElement)){var c=[],b=this._widget.getContext().getModel().getDocumentElement();if(b){var f={visit:function(a){"HTMLElement"==a.elementType&&"body"!=a.tag&&"html"!=a.tag&&(a=a.getAttribute("class"))&&(a=dojo.trim(a).split(" "),
dojo.forEach(a,dojo.hitch(this,function(a){-1==dojo.indexOf(this.classes,a)&&this.classes.push(a)})))},classes:[]};b.visit(f);dojo.forEach(f.classes,function(a){c.push({name:a})})}this.cssRules&&_.each(this.cssRules,function(a){_.find(c,{name:a})||c.push({name:a})});b=new g({data:c});this.classComboBox.set("store",b);a=(a=a.getAttribute("class"))&&dojo.trim(a)||"";this.cssSelect&&(_.each(c,function(a){this.cssSelect.addOption({value:a.name,text:a.name})},this),console.error("set "+a.split(" ").join(",")),
this.cssSelect.setValue(a.split(" "),!0));this.classComboBox.set("value",a);this._oldClassName=a;this._oldIDName=a=(a=this._widget.getId())&&dojo.trim(a)||"";this.idTextBox.attr("value",a);this._widget.domNode&&this._widget.domNode&&((a=this._widget.domNode.blockGroup)||(a=this._widget.domNode.getAttribute("blockGroup")),this._oldBlockGroup=a)}this.changing=!1}else this.descNode.innerHTML=d.noSelection,dojo.removeClass(this.domNode,"propertiesSelection"),this.context=null,this.classComboBox.set("value",
""),this.classComboBox.set("disabled",!0),this.idTextBox.attr("value",""),this.idTextBox.attr("disabled",!0)},onWidgetSelectionChange:function(){var a="";if(this._widget){a=q.getLabel(this._widget);this.context=this._widget.getContext();this.idTextBox.attr("disabled",!1);this.cssSelect&&this.cssSelect.enable();this.changing=!0;this._oldBlockGroup=this._oldClassName=this._oldIDName=null;dojo.addClass(this.domNode,"propertiesSelection");this.descNode.innerHTML=a;if(this._editor&&"davinci.ve.PageEditor"===
this._editor.declaredClass&&(a=this._widget._srcElement)){var c=[],b=this._widget.getContext().getModel().getDocumentElement();if(b){var f={visit:function(a){"HTMLElement"==a.elementType&&"body"!=a.tag&&"html"!=a.tag&&(a=a.getAttribute("class"))&&(a=dojo.trim(a).split(" "),dojo.forEach(a,dojo.hitch(this,function(a){-1==dojo.indexOf(this.classes,a)&&this.classes.push(a)})))},classes:[]};b.visit(f);dojo.forEach(f.classes,function(a){c.push({name:a})})}this.cssRules&&_.each(this.cssRules,function(a){_.find(c,
{name:a})||c.push({name:a})});a=(a=a.getAttribute("class"))&&dojo.trim(a)||"";this.cssSelect&&(_.each(c,function(a){this.cssSelect.addOption({value:a.name,text:a.name})},this),this.cssSelect.setValue(a.split(" "),!0));this._oldClassName=a;this._oldIDName=a=(a=this._widget.getId())&&dojo.trim(a)||"";this.idTextBox.attr("value",a);this._widget.domNode&&this._widget.domNode&&((a=this._widget.domNode.blockGroup)||(a=this._widget.domNode.getAttribute("blockGroup")),this._oldBlockGroup=a)}this.changing=
!1}else this.descNode.innerHTML=d.noSelection,dojo.removeClass(this.domNode,"propertiesSelection"),this.context=null,this.cssSelect&&this.cssSelect.disable(),this.cssSelect&&this.cssSelect.setValue([]),this.idTextBox.attr("value",""),this.idTextBox.attr("disabled",!0)},_onChangeIDAttribute:function(){if(this._widget&&!this.changing){var a=this.idTextBox;if(a&&a.isValid()&&(this.context&&this.context.blockChange(!1),a=a.attr("value"),a!==this._oldIDName)){this._oldIDName=a;var c={};c.id=a;a=new k(this._widget,
c,null);dojo.publish("/davinci/ui/widgetPropertiesChanges",[{source:this._editor.editor_id,command:a}])}}},_onChangeClassAttribute:function(){if(this._widget&&!this.changing){var a=this.classComboBox;if(a&&(this.context&&this.context.blockChange(!1),a=a.attr("value"),a!==this._oldClassName)){this._oldClassName=a;var c={};c["class"]=a;a=new davinci.ve.commands.ModifyCommand(this._widget,c,null);dojo.publish("/davinci/ui/widgetPropertiesChanges",[{source:this._editor.editor_id,command:a}])}}},_onChangeBlockGroupAttribute:function(){if(this._widget&&
!this.changing){var a=this.blockGroupComboBox;if(a&&(this.context&&this.context.blockChange(!1),a=a.attr("value"),a!==this._oldBlockGroup)){this._oldBlockGroup=a;var c={};c.blockGroup=a;a=new davinci.ve.commands.ModifyCommand(this._widget,c,null);this.publish("/davinci/ui/widgetPropertiesChanges",[{source:this._editor.editor_id,command:a}])}}},_onFieldFocus:function(){this.context&&this.context.blockChange(!0)},_onFieldBlur:function(){this.context&&this.context.blockChange(!1)},_onKeyPress:function(a){a.keyCode==
dojo.keys.ENTER&&this._onChangeIDAttribute()}})})},"davinci/workbench/ViewLite":function(){define(["dojo/_base/declare","./WidgetLite","../ve/States"],function(p,m){return p("davinci.workbench.ViewLite",[m],{_editor:null,_widget:null,_subWidget:null,constructor:function(h,e){this.subscriptions=[];this.publishing={};this.subscribe("/davinci/ui/editorSelected",dojo.hitch(this,this._editorSelected));this.subscribe("/davinci/ui/widgetSelected",dojo.hitch(this,this._widgetSelectionChanged))},_widgetSelectionChanged:function(h){if(this._editor)if(h.selection){var e=
h.selection[0];if(e&&this._widget==e&&this._subwidget==e.subwidget)return!1;this._subwidget=(this._widget=e)&&e.subwidget;if(this.onWidgetSelectionChange)this.onWidgetSelectionChange(h)}else console.error("have no selection")},_editorSelected:function(h){this._editor=h.editor;if(this.onEditorSelected)this.onEditorSelected(this._editor)},_subscribe:function(h,e){this.subscriptions.push(dojo.subscribe(h,this,e))},publish:function(h,e){this.publishing[h]=!0;try{dojo.publish(h,e)}catch(b){console.error(b)}delete this.publishing[h]},
destroy:function(){dojo.forEach(this.subscriptions,dojo.unsubscribe);delete this.subscriptions;this._destroyHandles()}})})},"dojo/store/Memory":function(){define(["../_base/declare","./util/QueryResults","./util/SimpleQueryEngine"],function(p,m,h){return p("dojo.store.Memory",null,{constructor:function(e){for(var b in e)this[b]=e[b];this.setData(this.data||[])},data:null,idProperty:"id",index:null,queryEngine:h,get:function(e){return this.data[this.index[e]]},getIdentity:function(e){return e[this.idProperty]},
put:function(e,b){var k=this.data,a=this.index,f=this.idProperty,f=e[f]=b&&"id"in b?b.id:f in e?e[f]:Math.random();if(f in a){if(b&&!1===b.overwrite)throw Error("Object already exists");k[a[f]]=e}else a[f]=k.push(e)-1;return f},add:function(e,b){(b=b||{}).overwrite=!1;return this.put(e,b)},remove:function(e){var b=this.index,k=this.data;if(e in b)return k.splice(b[e],1),this.setData(k),!0},query:function(e,b){return m(this.queryEngine(e,b)(this.data))},setData:function(e){e.items?(this.idProperty=
e.identifier,e=this.data=e.items):this.data=e;this.index={};for(var b=0,k=e.length;b<k;b++)this.index[e[b][this.idProperty]]=b}})})},"dojo/store/util/QueryResults":function(){define(["../../_base/array","../../_base/lang","../../when"],function(p,m,h){var e=function(b){function k(a){b[a]||(b[a]=function(){var f=arguments;return h(b,function(b){Array.prototype.unshift.call(f,b);return e(p[a].apply(p,f))})})}if(!b)return b;b.then&&(b=m.delegate(b));k("forEach");k("filter");k("map");b.total||(b.total=
h(b,function(a){return a.length}));return b};m.setObject("dojo.store.util.QueryResults",e);return e})},"dojo/store/util/SimpleQueryEngine":function(){define(["../../_base/array"],function(p){return function(m,h){function e(b){b=p.filter(b,m);var a=h&&h.sort;a&&b.sort("function"==typeof a?a:function(b,f){for(var d,c=0;d=a[c];c++){var e=b[d.attribute],k=f[d.attribute];if(e!=k)return!!d.descending==(null==e||e>k)?-1:1}return 0});if(h&&(h.start||h.count)){var f=b.length;b=b.slice(h.start||0,(h.start||
0)+(h.count||Infinity));b.total=f}return b}switch(typeof m){default:throw Error("Can not query with a "+typeof m);case "object":case "undefined":var b=m;m=function(e){for(var a in b){var f=b[a];if(f&&f.test){if(!f.test(e[a],e))return!1}else if(f!=e[a])return!1}return!0};break;case "string":if(!this[m])throw Error("No filter function "+m+" was found in store");m=this[m];case "function":}e.matches=m;return e}})},"davinci/ve/widgets/Cascade":function(){define("dojo/_base/declare ../../workbench/WidgetLite ../../workbench/Preferences ../../Workbench ../../html/CSSModel ../../library ../../Theme ../../html/CSSRule ../States davinci/lang/ve/ve system/resource".split(" "),
function(p,m,h,e,b,k,a,f,n,g,d){p=p("davinci.ve.widgets.Cascade",[m],{target:null,targetField:null,toggleClasses:null,_regex_combinators:/[\s\~\+\>]+/,_regex_not_pseudoclass:/(.*)\:not\((.*)\)(.*)/,_regex_pseudoelement:/(.*)(\:\:[^\:\.\#\[]*)(.*)/,_regex_id:/(.*)(\#[^\:\.\#\[]*)(.*)/,_regex_class:/(.*)(\.[^\:\.\#\[]*)(.*)/,_regex_attribute:/(.*)(\[[^\]]*\])(.*)/,_regex_pseudoclass:/(.*)(\:[^\:\.\#\[]*)(.*)/,_regex_univeral:/(.*)(\*[^\:\.\#\[]*)(.*)/,delegate:null,constructor:function(a,d){this.subscriptions=
[];this.publishing={};this._radioGroupName="davinci_ve_widgets_Cascade"+davinci.ve.widgets.Cascade.__id++;this._handles=[];this._values=[];this.inherited(arguments)},buildRendering:function(){this.domNode=dojo.doc.createElement("div");this.container=dojo.doc.createElement("div");dojo.addClass(this.container,"showCascade");this.domNode.appendChild(this.container);this.topDiv=dojo.create("div",{"class":"cascadeTopDiv"},this.container);this.cascadeTableDiv=dojo.create("div",{"class":"cascadeTableDiv widget"},
this.container);dojo.removeClass(this.container,"showAllValues");dojo.isArray(this.target)||(this.target=[this.target]);dojo.addClass(this.domNode,"CascadeTop");this.inherited(arguments)},startup:function(){var a=dijit.byId(this.targetField);if(a)a._cascade=this,this._getFieldValue=function(){return a.get("value")},this._setFieldValue=function(d,b){a.set&&(this._value=d||"",this._loc=b,a._setBaseLocationAttr&&a.set("baseLocation",b&&b.getPath?b.getPath():null),a.set("value",this._value,!0))},dojo.connect(a,
"onChange",this,"_onFieldChange"),dojo.connect(a,"onFocus",this,"_onFieldFocus"),dojo.connect(a,"onBlur",this,"_onFieldBlur");else{var d=dojo.byId(this.targetField);this._getFieldValue=function(){return dojo.attr(d,"value")};this._setFieldValue=function(a,c){this._value=a||"";this._loc=c;dojo.attr(d,"value",this._value)};dojo.connect(d,"onchange",this,"_onFieldChange",!0);dojo.connect(d,"onfocus",this,"_onFieldFocus",!0);dojo.connect(d,"onblur",this,"_onFieldBlur",!0)}this._value=this._getFieldValue();
this._started=!0},_canModifyRule:function(a){return a&&a.getCSSFile?(a=a.getCSSFile())?!d.findResource(a.url).readOnly():!0:!0},_onFieldChange:function(a){function d(){k&&p&&p[k]&&p[k].resolve()}function b(a){a._value=a._getFieldValue();a._valueArray=a._valueArrayNew;var c=a._valueArray&&dojo.isArray(a._valueArray)&&0<a._valueArray.length?a._valueArray:a._value;a._changeValue(a._targetValueIndex,c)}a=function(a,c){if(!a&&!c)return!0;if(!a&&c||a&&!c||a.length!=c.length)return!1;for(var d=0;d<a.length;d++)if(a[d]!==
c[d])return!1;return!0};this.context&&this.context.blockChange(!1);if(!(this._value==this._getFieldValue()&&a(this._valueArray,this._valueArrayNew)||1>this._values.length))if("(overrides)"==this._getFieldValue())this._setFieldValue&&this._setFieldValue("(overrides)",null);else if("number"==typeof this._targetValueIndex){var f=h.getPreferences("davinci.ve.editorPrefs",e.getProject());if(this._widget&&this.target&&0<this.target.length){var k=this.target[0];a=this._widget.getContext();var n;a&&(n=a.cascadeBatch);
if(n){var m=n.askUserResponse;if(n.deferreds)var p=n.deferreds}}!1===m?(this._setFieldValue(this._value,this._loc),d()):!0===m?(b(this),d()):(m=null,this._values[this._targetValueIndex].readOnly&&"davinci.themeEdit.ThemeEditor"!=this._editor.editorID?(m=g.propChangeCannotComplete+"\x3cbr\x3e\x3cbr\x3e"+dojo.string.substitute(g.toChangeProperty,["\x3ca href\x3d'app/docs/index.html#CreatingStyleRulesWithAppCss' target\x3d'_blank'\x3e"+g.creatingStyleRules+"\x3c/a\x3e"])+"\x3cbr/\x3e\x3cbr/\x3e",davinci.Workbench.showMessage(g.errorModifyingValue,
m,{width:350},dojo.hitch(this,function(){d();return!0})),n&&(n.askUserResponse=!1),this._setFieldValue(this._value,this._loc)):("theme"==this._values[this._targetValueIndex].type||"theme"==this._values[this._targetValueIndex].proposalTarget)&&f.cssOverrideWarn&&this._editor.supports("MultiPropTarget")?require(["davinci/ve/widgets/ChangeWillModify"],dojo.hitch(this,function(a){var c=new a;a=davinci.Workbench.showDialog({title:"",content:c,style:{width:350},okCallback:dojo.hitch(this,function(){n&&
(n.askUserResponse=!0);b(this);d();c.checkbox.get("checked")&&(f.cssOverrideWarn=!1,h.savePreferences("davinci.ve.editorPrefs",null,f))}),okLabel:null,hideCancel:null,submitOnEnter:!0});dojo.connect(a,"onCancel",dojo.hitch(this,function(){n&&(n.askUserResponse=!1);this._setFieldValue(this._value,this._loc);d();c.checkbox.get("checked")&&(f.cssOverrideWarn=!1,h.savePreferences("davinci.ve.editorPrefs",null,f))}))})):(b(this),d()))}},_changeValue:function(a,d){var b=void 0;this._whichStateInputElement&&
this._whichStateInputElement.checked&&(b=this._whichState);for(var f=this._values[a],g=[],e=0;e<this.target.length;e++)if(dojo.isArray(d))for(var k=0;k<d.length;k++){var h={};h[this.target[e]]=d[k];g.push(h)}else h={},h[this.target[e]]=d,g.push(h);this._dirtyCascadeList=!0;"element.style"==f.type?("position"==this.target[0]&&1==g.length&&("absolute"==g[0].position?(f=this.context.getPreference("absoluteWidgetsZindex"),g.push({"z-index":f})):g.push({"z-index":""})),dojo.publish("/davinci/ui/styleValuesChange",
[{values:g,appliesTo:"inline",applyToWhichStates:b,cascade:this}])):dojo.publish("/davinci/ui/styleValuesChange",[{values:g,appliesTo:f,applyToWhichStates:b}])},_getAttribStyleValue:function(){return this.context.getStyleAttributeValues(this._widget)},_getShortHands:function(){if(this._shorthands)return this._shorthands;this._shorthands=[];for(var a=0;a<this.target.length;a++)this._buildShortHands(this.target[a]);return this._shorthands},_buildShortHands:function(a){for(var d=!1,f=0;f<b.shorthand.length;f++)if(a==
b.shorthand[f][0]){d=!0;break}if(d)for(a=b.shorthand[f][1],d=0;d<a.length;d++){for(var g=!1,f=0;f<this._shorthands.length&&!g;f++)this._shorthands[f]==a[d]&&(g=!0);g||this._shorthands.push(a[d]);this._buildShortHands(a[d])}return this._shorthands},_onChangeOverride:function(a){alert(g.valueIsOverriden);return!1},_getSelector:function(a,d){var b=this.context.getThemeMeta();if(!b)return[];var f=b.loader.getType(a);if(b=b.metadata.getStyleSelectors(f,"Normal"))for(var g in b)for(f=0;f<b[g].length;f++)for(var e=
0;e<d.length;e++)if(d[e]==b[g][f])return g},_getMetaTargets:function(a,d){var b=this._getSelector(a,d);return this.context.getModel().getRule(b).filter(function(a){return a.getSelectorText()==b})},_getSelectionCssRules:function(a){this.context._cssCache=this.context._cssCache||{};var d=this.context.getSelection();if(!a&&!d.length)return{rules:null,matchLevels:null};var b=a||d[0].domNode||d[0],f=b.id+"_"+b.className;if(d.length){var g=this.context._cssCache[f]=this.context.model.getMatchingRules(b,
!0);this.context.cssFiles&&this.context.cssFiles.forEach(function(a){a.getMatchingRules(b,g.rules,g.matchLevels)});g.rules.forEach(function(a){var c=dojo.hitch(a,"onChange",this,function(){delete this.context._cssCache[f];connect.unsubscribe(c)})},this);return g}return{rules:null,matchLevels:null}},_getAllRules:function(){function a(c){if(c&&c.parent&&c.parent.url)return c=c.parent.url,/^themes\//.test(c)||/\/themes\//.test(c)?"theme":"queried"}var d=[];if("davinci.themeEdit.ThemeEditor"!=this._editor.editorID){var b=
this._getDefaultSelection();if(this._editor.supports("inline-style")&&"element.style"==b){for(var b=this._getAttribStyleValue(),f=null,g=0;g<b.length;g++)for(var e=b[g],k=0;k<this.target.length;k++){var h=this.target[k];void 0!==e[h]&&(f=e[h])}d.push({rule:b,value:f,matchLevel:"element.style",type:"element.style"})}if((b=this._getSelectionCssRules(this._topWidgetDom))&&b.rules)for(k=0;k<b.rules.length;k++){f="";g=b.rules[k];for(e=0;e<g.selectors.length;e++)0!=e&&(f+=", "),f+=g.selectors[e].getLabel();
g=a(g);d.push({rule:b.rules[k],ruleString:f,matchLevel:b.matchLevels[k],type:g})}this._addDeltaRules(this._widget,d);for(var b=this._getClasses(this._widget),n=0,k=0;k<b.length;k++){var m=b[k];"string"==typeof m&&0<m.length&&this._getClassSelector(m).forEach(function(a){for(var c=!1,b=0;b<d.length;b++)if(this._compareSelectors(d[b].ruleString,a)){d[b].className=m;c=!0;break}c||(c=this._computeMatchLevelSelector(a),d.splice(n,0,{rule:null,ruleString:a,targetFile:this.targetFile,className:m,value:null,
matchLevel:c,type:"proposal"}),n++)}.bind(this))}}if("davinci.themeEdit.ThemeEditor"==this._editor.editorID){if(b=this._editor._getCssRules(this._widget,this._editor._selectedSubWidget,this._editor._currentState)){k=[];for(f=b.length-1;-1<f;--f)k.push(b[f]);b=k}}else b=this._widget?this._getMetaTargets(this._widget,this.target):[];for(k=0;k<b.length;k++){f=!1;for(g=0;!f&&g<d.length;g++)d[g].rule==b[k]&&(f=!0,d[g].type="theme");f||d.push({rule:b[k],matchLevel:"theme",type:"theme"})}return d},_buildCssRuleset:function(){var a=
this._getAllRules();this._values=[];this._hasOverride=!1;for(var d=this._getShortHands(),b=0;b<a.length;b++){var f=a[b].rule;if(f){for(var g=0;g<d.length;g++)if("element.style"!=a[b].type&&null!=a[b].rule.getProperty(d[g])){a[b].shorthand=d[g];var e=f.getProperty(d[g]);a[b].value=e&&e.value;this._hasOverride=!0}else"element.style"==a[b].type&&-1<dojo.indexOf(a[b].rule,d[g])&&(a[b].shorthand=d[g],e=dojo.indexOf(a[b].rule,d[g]),a[b].value=f[e],this._hasOverride=!0);if(!a[b].shorthand&&"element.style"!=
a[b].type)a[b].value=this._getRuleTargetValue(f);else if(!a[b].shorthand&&"element.style"==a[b].type)for(g=0;g<f.length;g++)f[g].hasOwnProperty(this.target[0])&&(a[b].value=f[g][this.target[0]])}}a=this._sortRules(a);this._addClasses(a);this._values=a},_sortRules:function(a){for(var d=[],b=0;b<a.length;b++){var f=!1;"element.style"==a[b].type&&(d.splice(0,0,a[b]),f=!0);for(var g=0;!f&&g<d.length;g++)"element.style"!=d[g].matchLevel&&d[g].matchLevel<a[b].matchLevel&&(f=!0,d.splice(g,0,a[b]));f||d.push(a[b])}return d},
_addClasses:function(a){for(var d=!1,b=0;b<a.length;b++)a[b].extraClass=[],d&&a[b].extraClass.push("cssShorthandOverRidden"),a[b].value||"element.style"!=a[b].type&&this._getRuleTargetValue(a[b].rule)?d=!0:a[b].value||"element.style"==a[b].type||a[b].extraClass.push("hiddenCascadeNode"),"element.style"!=a[b].type||a[b].value||a[b].extraClass.push("elementStyleNode"),this._canModifyRule(a[b].rule)||(a[b].extraClass.push("readOnlyRule"),a[b].readOnly=!0)},_updateCascadeList:function(){function a(c){return function(){return this._onChange({target:c})}}
function d(a){return function(){return this._onChangeRemove({target:a})}}this._setFieldValue&&this._setFieldValue("",null);if(this._widget&&this._widget.domNode){dojo.removeClass(this.container,"dijitHidden");this._buildCssRuleset();this._destroy();var b=dojo.doc.createElement("table");dojo.addClass(b,"cascadeTable");var f=null,e=null,f=dojo.doc.createElement("tr");f.className="propApplyToLabelRow";e=dojo.doc.createElement("td");e.colSpan="3";e.innerHTML=g.applyToWhich;e.className="propApplyToLabelCell";
f.appendChild(e);b.appendChild(f);this._radio=[];for(var k=0;k<this._values.length;k++){var h=this._formatRuleString(this._values[k]);this._radio.push(dojo.create("input",{type:"radio",name:this._radioGroupName}));for(var f=dojo.doc.createElement("tr"),m=0;m<this._values[k].extraClass.length;m++)dojo.addClass(f,this._values[k].extraClass[m]);e=dojo.doc.createElement("td");f.appendChild(e);dojo.addClass(e,"cascadeSpacer");e=dojo.doc.createElement("td");dojo.addClass(e,"cascadeButton");e.appendChild(this._radio[this._radio.length-
1]);f.appendChild(e);e=dojo.doc.createElement("td");dojo.addClass(e,"cascadText");e.innerHTML="\x3cdiv class\x3d'cascadeRuleText'\x3e"+h+"\x3c/div\x3e";this._values[k].shorthand?this._handles.push(dojo.connect(this._radio[this._radio.length-1],"onclick",this,"_onChangeOverride")):this._handles.push(dojo.connect(this._radio[this._radio.length-1],"onclick",this,a(k)));if(this._values[k].shorthand)e.innerHTML+="\x3cdiv\x3e"+this._values[k].shorthand+":"+this._values[k].value+";\x3c/div\x3e";else if(this._values[k].value){for(m=
0;m<this.target.length;m++);e.innerHTML+="\x3cdiv class\x3d'ruleValue'\x3e"+this.target[0]+":"+this._values[k].value+";\x3c/div\x3e"}f.appendChild(e);e=dojo.doc.createElement("td");dojo.addClass(e,"cascadRemove");h=dojo.doc.createElement("button");this._values[k].readOnly&&dojo.attr(h,"disabled","true");dojo.addClass(h,"cascadeRemoveButton");e.appendChild(h);this._handles.push(dojo.connect(h,"onclick",this,d(k)));f.appendChild(e);e=dojo.doc.createElement("td");e.className="cascadeSpacer";f.appendChild(e);
b.appendChild(f)}this._widgetState=this._whichStateInputElement=void 0;f=n.getStatesListCurrent(this._widget.domNode);for(k=0;k<f.length;k++)if(f[k]){k=f[k];f=dojo.doc.createElement("tr");f.className="propWhichStateRow";e=dojo.doc.createElement("td");e.colSpan="3";h=dojo.create("input",{type:"checkbox",checked:!1,className:"propWhichStateInput"});this._whichState=k;this._whichStateInputElement=h;e.appendChild(h);h=dojo.create("label",{className:"propWhichStateLabel"});h.innerHTML=dojo.string.substitute(g.onlyApplyToState,
[k]);e.appendChild(h);e.className="propWhichStateCell";f.appendChild(e);b.appendChild(f);break}this.cascadeTableDiv.appendChild(b);this._updateFieldValue()}else dojo.addClass(this.container,"dijitHidden")},selectRule:function(a){for(var d=0;d<this._values.length;d++)if("element.style"!=a&&this._values[d].rule==a){dojo.removeClass(this._radio[d].parentNode.parentNode,"hiddenCascadeNode");dojo.attr(this._radio[d],"checked",!0);this._onChange({target:d});break}else if("element.style"==a&&"element.style"==
this._values[d].type){dojo.removeClass(this._radio[d].parentNode.parentNode,"hiddenCascadeNode");dojo.attr(this._radio[d],"checked",!0);this._onChange({target:d});break}},selectRuleBySelector:function(a){if("element.style"==a)this._targetValueIndex=0,0<this._values.length&&(dojo.attr(this._radio[0],"checked",!0),this._values[0].shorthand?dojo.addClass(this._radio[0].parentNode.parentNode,"cssShorthandOverRidden"):(a=this._getBaseLocation(),this._setFieldValue(this._values[0].value,a)));else for(var d=
0;d<this._values.length;d++)if("element.style"!=this._values[d].type&&this._values[d].rule&&this._values[d].rule.hasSelector(a)){dojo.removeClass(this._radio[d].parentNode.parentNode,"hiddenCascadeNode");dojo.attr(this._radio[d],"checked",!0);this._onChange({target:d});break}},_isTarget:function(a){if("$std_10"===a)return!0;for(var d=0;d<this.target.length;d++)if(this.target[d]==a)return!0;return!1},_targetIsRootProperty:function(){for(var a=["left","top","right","bottom"],d=0;d<this.target.length;d++)if(-1<
a.indexOf(this.target[d]))return!0;return!1},_updateFieldValue:function(){null==this._widget&&this._setFieldValue("",this._getBaseLocation());var a=this._getDefaultSelection();this._targetValueIndex=0;for(var d=!1,b=!1,f=0;f<this._values.length;f++){var g="davinci.ve.HTMLPageEditor"==this._editor.editorID,e="davinci.themeEdit.ThemeEditor"==this._editor.editorID;this._values[f].value&&!d&&e||this._values[f].value&&!d&&g&&!this._values[f].readOnly||!d&&!b&&"element.style"!=this._values[f].type&&this._values[f].rule&&
this._values[f].rule.hasSelector(a)||"element.style"==a&&"element.style"==this._values[f].type?(this.selectRule("element.style"==this._values[f].type?"element.style":this._values[f].rule),this._values[f].value&&(d=!0),b=!0):d&&!b&&dojo.addClass(this._radio[f].parentNode.parentNode,"cssOverRidden")}d||b||!g||this.selectRuleBySelector("element.style")},_getThemeMetaDataByWidget:function(c){var d=this.context.getThemeMeta();if(!d)return null;c=d.loader.getType(c);var d=d.loader.getMetaData(c),b=!1,f=
"string"==typeof c?c.split("."):null;f&&"html"==f[0]&&(b=!0);if(!d&&this.context.cssFiles&&!b)for(b=0;b<this.context.cssFiles.length;b++)if(f=a.getThemeByCssFile(this.context.cssFiles[b]))if(d=k.getThemeMetadata(f).loader.getMetaData(c))break;return d},_getDefaultSelection:function(){var a="Normal";"davinci.themeEdit.ThemeEditor"==this._editor.editorID&&(a=a||n.getState());var d=this._getThemeMetaDataByWidget(this._widget);if(!d||!d.states||this._targetIsRootProperty())return"element.style";if(d&&
d.states[a]&&d.states[a].elements){var b=d.states[a].elements,f;for(f in b)for(var g=0;g<b[f].length;g++)if(this._isTarget(b[f][g]))return"$root"==f?"element.style":f}if(d&&d.states[a]&&(b=this.context.getThemeMeta())&&(g=b.loader.getType(this._widget),b=b.metadata.getStyleSelectors(g,a,null)))for(f in b)for(a=0;a<b[f].length;a++)if(this._isTarget(b[f][a])){if(d.rootSelectors)for(a=0;a<d.rootSelectors.length;a++)if(f==d.rootSelectors[a])return"element.style";return f}return null},_addDeltaRules:function(a,
b){var f="Normal",g=-1,e=[],k=this.context._getCssFiles(),k=k&&0<k.length?k[0].url:null,h=!1;k&&(h=(h=d.findResource(k))?h._readOnly:!0);"davinci.themeEdit.ThemeEditor"==this._editor.editorID&&(f=f||n.getState());var m=this._getThemeMetaDataByWidget(a);if(m&&m.states[f]&&m.states[f].selectors){var f=m.states[f].selectors,p;for(p in f){f=!1;for(m=0;m<b.length;m++){var u=b[m];"element.style"===u.type&&(g=m);if("theme"===u.type&&u.ruleString===p&&(u.rule.parent.relativeURL==this.context._themeUrl||u.rule.parent.url==
k)){f=!0;break}}f||(f=this._computeMatchLevelSelector(p),k&&!h&&e.push({rule:null,ruleString:p,targetFile:k,className:null,value:null,matchLevel:f,type:"proposal"}),this.context._themeUrl&&!this.context.theme.getFile().readOnly()&&e.push({rule:null,ruleString:p,targetFile:this.context._themeUrl,className:null,value:null,matchLevel:f,type:"proposal",proposalTarget:"theme"}))}}var z=g+1;e.forEach(function(a){b.splice(z++,0,a)});return b},_getRuleTargetValue:function(a){var d=null;if(a)for(var b=0;!d&&
b<this.target.length;b++)d=a.getProperties(this.target[b]);if(null!=d){if(1<d.length){a=[];for(b=0;b<d.length;b++)a.push(d[b].value);return a}if(1==d.length)return d[0].value}return null},_onChangeRemove:function(a){this._changeValue(a.target,null);this._updateCascadeList()},_onChange:function(a){var b=null;if("element.style"==this._values[a.target].type)b=this._getBaseLocation();else if("proposal"==this._values[a.target].type){var f=this.context.getModel().find({elementType:"CSSFile",relativeURL:this._values[a.target].targetFile},
!0),g=this.context._getCssFiles();f?b=d.findResource(f.url):g[0].url==this._values[a.target].targetFile&&(b=d.findResource(g[0].url))}else b=d.findResource(this._values[a.target].rule.getCSSFile().url);this._setFieldValue&&this._setFieldValue(this._values[a.target].value||"",b);this._targetValueIndex=a.target},_widgetValuesChanged:function(a){if(this._dirtyCascadeList)this._updateCascadeList(),this._dirtyCascadeList=!1;else{var d=this._getShortHands();a=a.values;for(var b in a)for(a=0;a<d.length;a++)if(d[a]==
b){this._updateCascadeList();return}}},_formatRuleString:function(a){if("element.style"==a.type)return"element.style";var d="";if("proposal"==a.type)d=a.className?d+dojo.string.substitute(g.newRule,[a.className,a.targetFile]):d+dojo.string.substitute(g.newThemeRule,[a.targetFile]),d+=a.ruleString;else{var b=a.rule;a.className?d+=dojo.string.substitute(g.existingRule,[a.className,this.targetFile]):"theme"==a.type&&(d+="["+a.type+"] ");if(a.ruleString)d+=a.ruleString;else for(var f=0;f<b.selectors.length;f++)0!=
f&&(d+=", "),d+=b.selectors[f].getLabel();(f=b.searchUp("CSSFile"))&&(d+="  ("+f.url||f.relativeURL);d=a.property?d+dojo.string.substitute(g.line,[a.property.startLine]):d+dojo.string.substitute(g.line,[b.startLine||g.propUndefined])}return d},_getWidgetTopDom:function(a,d){var b=this._getSelector(a,d),g=function(a,c){if(c.matches(a))return a;for(;0<a.children.length;)return g(a.children[0],c)};if(b){var e=new f;e.setText(b+"{}");return g(a.domNode||a,e)}return null},_widgetSelectionChanged:function(a){(this._widget=
a=a[0])?(this.context=a.getContext(),this.targetFile=this.context.getAppCssRelativeFile(),this._editor=this.context.editor,this._topWidgetDom=this._getWidgetTopDom(this._widget,this.target)||this._widget.domNode||this._widget):this._topWidgetDom=null;this._updateCascadeList()},_getBaseLocation:function(){return{}},_editorSelected:function(a){this._editor=a.editor;var d;this._editor&&this._editor.getContext&&(d=this._editor.getContext());d&&this._editor.supports("style")?(this.context=d,this.targetFile=
d.getAppCssRelativeFile(),a=d.getSelection(),0<a.length?this._widgetSelectionChanged(a):this._widgetSelectionChanged([])):(this._widget=this.context=null,this._setFieldValue&&this._setFieldValue("",null));this._updateCascadeList()},_onFieldFocus:function(){this.context&&this.context.blockChange(!0)},_destroy:function(){var a=this.cascadeTableDiv;for(dojo.forEach(dojo.query("[widgetId]",a).map(dijit.byNode),function(a){a.destroy()});a.firstChild;)dojo._destroyElement(a.firstChild);dojo.forEach(this._handles,
dojo.disconnect);this._handles=[]},_onFieldBlur:function(){this.context&&this.context.blockChange(!1)},_getClasses:function(a){a=a.getClassNames("class")||"";a=a.split(" ");for(var d=0;d<a.length;d++)for(var b=d+1;b<a.length;b++)a[b]==a[d]&&a.splice(b,1);return a},_getRelativeMetaTargetSelector:function(a){var d=this.context.getThemeMeta();if(!d)return[];var b=this.context.getSelection();if(!b.length)return[];b=b[0];b=d.loader.getType(b);return d.metadata.getRelativeStyleSelectorsText(b,"Normal",
null,a,this.context.getTheme().className)},_getClassSelector:function(a){var d=this._getRelativeMetaTargetSelector(this.target),d=d.length?d[0]:"";bodyId=this.context.model.find({elementType:"HTMLElement",tag:"body"},!0).find({elementType:"HTMLAttribute",name:"id"},!0).value;var b=this.context.getTheme(),f=[];if(!b)return f;var g=b.className;d.split(",").forEach(function(d){d=d.trim();f.push("#"+bodyId+"."+g+" ."+a+d)}.bind(this));return f},_computeMatchLevelSelector:function(a){a=a.split(this._regex_combinators);
for(var d=0,b=0;b<a.length;b++){for(var f=a[b];;){var g=f.match(this._regex_not_pseudoclass);if(null!=g)d+=this._computeMatchLevelSimpleSelector(g[2]),f=g[1]+g[3];else break}d+=this._computeMatchLevelSimpleSelector(f)}return d},_computeMatchLevelSimpleSelector:function(a){var d=0;do{var b=function(b,g){var e=a.match(b);null!=e&&(f=!0,d+=g,a=e[1]+e[3])},f=!1;b(this._regex_pseudoelement,1);f||(b(this._regex_id,100),b(this._regex_class,10),b(this._regex_attribute,10),b(this._regex_pseudoclass,10),b(this._regex_univeral,
0))}while(f);0<a.length&&(d+=1);return d},_compareSelectors:function(a,d){if(!(a&&d||a==d))return!1;var b=a.split(this._regex_combinators),f=d.split(this._regex_combinators);if(b.length!=b.length)return!1;for(var g=0;g<b.length;g++)if(b[g]!=f[g])return!1;return!0},_compareSimpleSelectors:function(a,d){}});return dojo.mixin(p,{__id:0})})},"davinci/Theme":function(){define("dojo/_base/declare dojo/promise/all ./Workbench ./Runtime ./library ./workbench/Preferences ./model/Path ./html/HTMLFile ./model/Factory system/resource".split(" "),
function(p,m,h,e,b,k,a,f,n,g){var d={TEMP_CLONE_PRE:"clone_",desktop_default:"desktop_default",mobile_default:"custom_default",default_theme:"(device-specific)",none_themeset_name:"(none)",other_device:"other",none_theme:"none",dojoMobileDefault:[{theme:"android",device:"Android"},{theme:"blackberry",device:"BlackBerry"},{theme:"ipad",device:"iPad"},{theme:"iphone",device:"iPhone"},{theme:"iphone",device:"other"}],dojoMobileCustom:[{theme:"custom",device:"Android"},{theme:"custom",device:"BlackBerry"},
{theme:"custom",device:"iPad"},{theme:"custom",device:"iPhone"},{theme:"custom",device:"other"}],isThemeHTML:function(a){return-1<a.getName().indexOf("dojo-theme-editor.html")},CloneTheme:function(c,d,b,f,e,k){function h(c){var d=[];c.forEach(function(c){c=g.findResource(z+"/"+c);c=(new a(c.getPath())).relativeTo("./"+u,!0);for(var b="..",f=0;f<c.segments.length;f++)b=b+"/"+c.segments[f];d.push(b)});return d}b=[];e.getFile();k=(new a(f)).removeLastSegments(0);k=g.findResource(k.toString());k.readOnly()&&
k.createResource();g.createResource(f,!0);var n=g.findResource(f);e.getFile().getName();var p=(new a(n.getPath())).lastSegment();f=n.createResource(p+".theme");k=n.createResource(p+".css");var u=this.getThemeLocation(),z=e.getFile().parent.getPath(),C=h(e.themeEditorHtmls),I=h(e.meta),D=" ";h(e.files).forEach(function(a){D=D+'@import url("'+a+'");'});c={className:e.className,name:c,version:d||e.version,specVersion:e.specVersion,files:[""+p+".css"],meta:I,themeEditorHtmls:C,useBodyFontBackgroundClass:e.useBodyFontBackgroundClass};
e.helper&&(c.helper=e.helper.declaredClass?e.helper.declaredClass:e.helper);e.base&&(c.base=e.base);e.type&&(c.type=e.type);if(e.conditionalFiles)for(c.conditionalFiles=e.conditionalFiles,e=h(e.conditionalFiles),d=0;d<c.conditionalFiles.length;d++)p=n.createResource(c.conditionalFiles[d]),b.push(p.setContents('@import url("'+e[d]+'");'));e=f.setContents(JSON.stringify(c));e.themeFile=f;b.push(e);b.push(k.setContents(D));return{promise:m(b),themeFile:f}},getHelper:function(a){if(a){if(a.helper&&"string"!=
typeof a.helper)return a.helper;var d=a.helper;if(d){var b=new dojo.Deferred;require([d],function(a){a.declaredClass=d;d=a;b.resolve({helper:d})});return b}}},getThemeSet:function(a){var b=d.getThemeSets(h.getProject()),f=dojo.clone(this.dojoMobileDefault),g;b||(b=this.dojoThemeSets);b=dojo.clone(b);if(a){if(g=a._getDojoJsElem().getAttribute("data-dojo-config"))g=require.eval("({ "+g+" })","data-dojo-config"),g.themeMap&&(f=d.getDojoxMobileThemesFromThemeMap(a,g.themeMap));var e=a.getTheme();if(null==
e)console.error("have no desktop theme, abort!");else for(var k=0,n=b.themeSets.length;k<n;k++)if(g=b.themeSets[k],g.desktopTheme===e.name&&this.themeSetEquals(f,g.mobileTheme))return g}e||(console.error("maq hack, restore desktop theme"),e={name:"claro"});g={name:this.none_themeset_name,desktopTheme:a?e.name:"claro",mobileTheme:f};b.themeSets.push(g);return g},getBase:function(){if(h.singleProjectMode())return h.getProject()},getThemeLocation:function(){var c=this.getBase(),d=k.getPreferences("davinci.ui.ProjectPrefs",
c);return(new a(c)).append(d.themeFolder)},getTheme:function(a,d){for(var f=b.getThemes(h.getProject(),this.workspaceOnly),g=0;g<f.length;g++)if(f[g]&&f[g].name===a)return f[g]},getThemeByCssFile:function(a){var d=b.getThemes(h.getProject(),this.workspaceOnly);a=g.findResource(a.url).getPath();for(var f=0;f<d.length;f++)for(var e=d[f].getFile().getParentFolder().getPath(),k=0;k<d[f].files.length;k++)if(e+"/"+d[f].files[k]===a)return d[f];return null},getDojoxMobileThemeMap:function(c,d){for(var b=
[],f=[".*","iphone",[]],g=0;g<d.length;g++)if(d[g].theme!=this.none_theme&&d[g].theme!=this.default_theme){var e=this.getTheme(d[g].theme);if(e){var k;e.path&&e.path[0]?(k=e.path[0].lastIndexOf("/"),k=new a(e.path[0].substring(0,k+1)+e.files[0])):k=(new a(e.getFile().parent.getPath())).append(e.files[0]);var h=c.getFullResourcePath();k=k.relativeTo(h,!0).toString();d[g].device===this.other_device?f=[".*",e.base,[k]]:b.push([d[g].device,e.base,[k]])}}b.push(f);return b},getDojoxMobileThemesFromThemeMap:function(c,
d){var f=b.getThemes(h.getProject(),this.workspaceOnly),g=[];d.forEach(function(d,b,e){for(e=0;e<f.length;e++){b=f[e];var k=(new a(b.getFile().parent.getPath())).append(b.files[0]),h=c.getFullResourcePath();if(k.relativeTo(h,!0).toString()==d[2][0]){e={};e.device=d[0];e.theme=b.name;".*"===e.device&&(e.device="other");g.push(e);break}}},this);return g},themeSetEquals:function(a,d){function b(a){var c=0,d;for(d in a)a.hasOwnProperty(d)&&c++;return c}if(typeof a!==typeof d)return!1;if("function"===
typeof a)return a.toString()===d.toString();if(a instanceof Object&&d instanceof Object){if(b(a)!==b(d))return!1;var f=!0,g;for(g in a)if(f=this.themeSetEquals(a[g],d[g]),!f)return!1;return!0}return a===d},themeMapsEqual:function(a,d){var b=JSON.stringify(a),f=JSON.stringify(d);return b===f},singleMobileTheme:function(a){for(var d=a.mobileTheme[0].theme,b=1;b<a.mobileTheme.length;b++)if(a.mobileTheme[b].theme!=d)return!1;return!0},getThemeSets:function(a){var b=e.getDefaultThemeSet(),f=null;if(b){var g=
!1;if(f=k.getPreferences("maqetta.dojo.themesets",a)){for(var h=!1,n=0;n<f.themeSets.length;n++)if(f.themeSets[n].name===b.name){h=!0;d.themeSetEquals(f.themeSets[n],b)||(f.themeSets[n]=b,g=!0);break}h||(f.themeSets.push(b),g=!0)}else f=d.dojoThemeSets,f.themeSets[0]=b,g=!0;g&&d.saveThemeSets(a,f)}return f},saveThemeSets:function(a,d){k.savePreferences("maqetta.dojo.themesets",a,d)}};d.none_themeset={name:d.none_themeset_name,desktopTheme:"claro",mobileTheme:dojo.clone(d.dojoMobileDefault)};d.default_themeset=
{name:d.desktop_default,desktopTheme:"claro",mobileTheme:dojo.clone(d.dojoMobileDefault)};d.custom_themeset={name:d.mobile_default,desktopTheme:"claro",mobileTheme:d.dojoMobileCustom};d.dojoThemeSets={version:"1.7",specVersion:"0.8",helper:"maq-metadata-dojo/dojox/mobile/ThemeHelper",themeSets:[d.custom_themeset]};return d})},"davinci/html/HTMLFile":function(){define("dojo/_base/declare davinci/html/HTMLItem davinci/html/HTMLParser davinci/html/CSSSelector davinci/html/HTMLElement davinci/html/CSSImport davinci/html/CSSFile davinci/model/Model davinci/model/Path".split(" "),
function(p,m,h,e,b,k,a,f,n){return p("davinci.html.HTMLFile",m,{constructor:function(a){this.url=this.fileName=a;this.elementType="HTMLFile";this._loadedCSS={};this._styleElem=null},save:function(a){var d,c=system.resource.findResource(this.fileName);this.getText();c?(d=this.getText(),d=c.setContents(d,a)):console.error("couldnt find file in resources : "+this.fileName);return d},getText:function(a){a=a||{};a.indent=0;for(var d="",c=0;c<this.children.length;c++){var b=this.children[c],d=d+b.getText(a);
"HTMLComment"==b.elementType&&(d+=this._addWS(b._fmLine,b._fmIndent))}return d},getDocumentElement:function(a){for(a=0;a<this.children.length;a++)if("html"==this.children[a].tag)return this.children[a]},findElement:function(a){var d=this.getDocumentElement();if(d)return d.findElement(a)},getMatchingRules:function(a,d){var c={visit:function(c){if("CSSFile"==c.elementType){var d=[];c=c.getMatchingRules(a,[],d);for(var b=0;b<c.length;b++)for(var f=0;f<this.matchLevels.length;f++)if(d[b]>this.matchLevels[f]){this.matchLevels.splice(f,
0,d[b]);this.rules.splice(f,0,c[b]);break}0==this.rules.length&&(this.rules=c,this.matchLevels=d);return!0}return!1},matchLevels:[],rules:[]};this.visit(c);return d?{rules:c.rules,matchLevels:c.matchLevels}:c.rules},getRule:function(a){if(!a)return[];var d=e.parseSelectors(a);a={visit:function(a){return"CSSFile"==a.elementType?(a=a.getRule(d),this.rules=this.rules.concat(a||[]),!0):!1},rules:[]};this.visit(a);return a.rules},setText:function(a,d){this.visit({visit:function(a){"CSSImport"==a.elementType&&
a.close()}});this.children=[];this._styleElem=null;var c=h.parse(a||"",this),b="";d||0!=c.errors.length||(b=this.getText(),this.children=[],c=h.parse(b,this));this.endOffset=c.endOffset;this.errors=c.errors;var f=this;d||this.visit({visit:function(a){"CSSImport"!=a.elementType||a.cssFile||(a.load(!0),dojo.connect(a.cssFile,"onChange",null,dojo.hitch(f,"onChange")))}});this.onChange()},hasStyleSheet:function(a){for(var d=this.find({elementType:"CSSImport"}),c=0;c<d.length;c++)if(d[c].url==a)return!0;
return!1},addStyleSheet:function(a,d,c,f,e){var h=new n(this.url||this.fileName),h=h.getParentPath().append(a),h=h.toString();c||(this._loadedCSS[h]=require("davinci/model/Factory").getModel({url:h,includeImports:!0,loader:e}));d&&this._loadedCSS[h].setText(d);this.onChange();this._styleElem||(d=this.find({elementType:"HTMLElement",tag:"head"},!0),e=d.getChildElement("style"),e||(e=new b("style"),d.addChild(e)),this._styleElem=e);d=new k;d.parent=this;d.url=a;f?this._styleElem.insertBefore(d,f):this._styleElem.addChild(d);
c||d.load(!0)},close:function(){this.visit({visit:function(a){"CSSImport"==a.elementType&&a.close()}});require("davinci/model/Factory").closeModel(this)},getLabel:function(){return"\x3c\x3e"},getID:function(){return this.fileName},updatePositions:function(a,d){(new f(this)).updatePositions(this,a,d);this.visit({visit:function(c){if(c.endOffset<a)return!0;"HTMLElement"==c.elementType&&c.startTagOffset>a&&(c.startTagOffset+=d)}})},mapPositions:function(a){var d=this.getText();a=a.getText();d=d.indexOf(a);
a=d+a.lastIndexOf("\x3e")+1;return{startOffset:d,endOffset:a}},reportPositions:function(){this.visit({visit:function(a){}})},evaluate:function(a){if("/"!==a.charAt(0))console.error("invalid XPath string");else{var d=this;a.substr(1).split("/").forEach(function(a){a=a.match(this._RE_XPATH);var b=a[1];a=a[2];var f;f=d.children.filter(function(a){return a.tag===b});!a&&1<f.length?console.error("invalid XPath string; no index specified for multiple elements"):d=a?f[a-1]:f[0]},this);return d}},_RE_XPATH:/(\w+)(?:\[(\d+)\])?/})})},
"davinci/html/HTMLParser":function(){define("dojo/_base/declare davinci/html/HTMLText davinci/html/HTMLElement davinci/html/HTMLAttribute davinci/html/HTMLComment davinci/html/PHPBlock davinci/model/parser/Tokenizer davinci/html/CSSParser".split(" "),function(p,m,h,e,b,k,a,f){var n=function(){var b={autoSelfClosers:{br:!0,img:!0,hr:!0,link:!0,input:!0,meta:!0,col:!0,frame:!0,base:!0,area:!0},doNotIndent:{pre:!0,"!cdata":!0}},d={autoSelfClosers:{},doNotIndent:{"!cdata":!0}},c=b,f=!1,e=function(){function c(a,
b){var e=a.next();if("\x3c"==e){if(a.equals("!"))return a.next(),a.equals("[")?a.lookAhead("[CDATA[",!0)?(b(f("xml-cdata","]]\x3e")),null):"xml-text":a.lookAhead("--",!0)?(b(f("xml-comment","--\x3e")),null):a.lookAhead("DOCTYPE",!0)?(a.nextWhileMatches(/[\w\._\-]/),b(f("xml-doctype","\x3e")),"xml-doctype"):"xml-text";if(a.equals("?")){a.next();if(a.lookAhead("php",!0,!1,!0))return b(g("php-block","?\x3e")),null;a.nextWhileMatches(/[\w\._\-]/);b(f("xml-processing","?\x3e"));return"xml-processing"}a.equals("/")&&
a.next();b(d);return"xml-punctuation"}if("\x26"==e){for(;!a.endOfLine()&&";"!=a.next(););return"xml-entity"}a.nextWhileMatches(/[^&<\n]/);return"xml-text"}function d(a,f){var g=a.next();if("\x3e"==g)return f(c),"xml-punctuation";if(/[?\/]/.test(g)&&a.equals("\x3e"))return a.next(),f(c),"xml-punctuation";if("\x3d"==g)return"xml-punctuation";if(/[\'\"]/.test(g))return f(b(g)),null;a.nextWhileMatches(/[^\s\u00a0=<>\"\'\/?]/);return"xml-name"}function b(a){return function(c,b){for(;!c.endOfLine();)if(c.next()==
a){b(d);break}return"xml-attribute"}}function f(a,d){return function(b,f){for(;!b.endOfLine();){if(b.lookAhead(d,!0)){f(c);break}b.next()}return a}}function g(a,d){return function(b,f){for(var g=!1;!b.endOfLine();){if(b.lookAhead(d,!0)){g=!0;f(c);break}b.next()}if(!g&&b.endOfLine())b.next();else{for(;b.lookAheadRegex(/^[\ \t]/,!0););b.endOfLine()&&b.next()}return a}}return function(d,b){return a.tokenizer(d,b||c)}}();return{make:function(a){function d(a){for(var c=a.length-1;0<=c;c--)K.push(a[c])}
function b(){d(arguments);Q=!0}function g(){d(arguments);Q=!1}function k(){F.style+=" xml-error"}function h(a){return function(c,d){d==a?b():(k(),b(arguments.callee))}}function n(a,d){var b=c.doNotIndent.hasOwnProperty(a)||O&&O.noIndent;O={prev:O,name:a,indent:P,startOfLine:d,noIndent:b}}function m(a){return function(c,d){var b=a;if(b&&b.noIndent)return d;if(f&&/<!\[CDATA\[/.test(c))return 0;b&&/^<\//.test(c)&&(b=b.prev);for(;b&&!b.startOfLine;)b=b.prev;return b?b.indent+indentUnit:0}}function p(){return g(I,
p)}function I(a,c){"\x3c"==c?b(D,G,E(1==M)):"\x3c/"==c?b(H,h("\x3e")):("xml-cdata"==a?(O&&"!cdata"==O.name||n("!cdata"),/\]\]>$/.test(c)&&(O=O.prev)):W.hasOwnProperty(a)||k(),b())}function D(a,c){"xml-name"==a?(R=c.toLowerCase(),F.style="xml-tagname",b()):(R=null,g())}function H(a,c){"xml-name"==a&&(F.style="xml-tagname",O&&c.toLowerCase()==O.name?O=O.prev:k());b()}function E(a){return function(d,f){"/\x3e"==f||"\x3e"==f&&c.autoSelfClosers.hasOwnProperty(R)?b():"\x3e"==f?(n(R,a),b()):(k(),b(arguments.callee))}}
function G(a){"xml-name"==a?(F.style="xml-attname",b(N,G)):g()}function N(a,c){"\x3d"==c?b(L):"\x3e"==c||"/\x3e"==c?g(E):g()}function L(a){"xml-attribute"==a?b(L):g()}var J=e(a),F,K=[p],M=0,P=0,R=null,O=null,Q,W={"xml-text":!0,"xml-entity":!0,"xml-comment":!0,"xml-processing":!0,"xml-doctype":!0,"php-block":!0};return{indentation:function(){return P},next:function(){F=J.next();"whitespace"==F.style&&0==M?P=F.value.length:M++;"\n"==F.content&&(P=M=0,F.indentation=m(O));if("whitespace"==F.style||"xml-comment"==
F.type||"php-block"==F.type)return F;for(;;)if(Q=!1,K.pop()(F.style,F.content),Q)return F},copy:function(){var a=K.concat([]),c=J.state,d=O,b=this;return function(f){K=a.concat([]);M=P=0;O=d;J=e(f,c);return b}}}},electricChars:"/",configure:function(a){null!=a.useHTMLKludges&&(c=a.useHTMLKludges?b:d);a.alignCDATA&&(f=a.alignCDATA)}}}();return{parse:function(g,d){function c(a,c){C=new m;C.wasParsed=!0;C.startOffset=c;z[z.length-1].addChild(C,void 0,!0);C.value=a}function q(a){a.content!=a.value&&c(a.value.substring(a.content.length),
a.offset+a.value.length)}function w(a,c){var d=a.split("\n"),b=d[d.length-1].length;c.children.length?(lastElement=c.children[c.children.length-1],lastElement._fmLine=d.length-1,lastElement._fmIndent=b):(c._fmChildLine=d.length-1,c._fmChildIndent=b)}function r(){if(null!=C&&!C.value.match(/\S/)){var a=z[z.length-1];a.children.pop();w(C.value,a)}C=null}function p(){var a=z[z.length-1];A.nextWhileMatches(/[\s\u00a0]/);var c=A.get();null!=C?(C.value+=c,r()):w(c,a);f.parse(A,a)}function y(a){for(x=v.next();a&&
"whitespace"==x.style;)x=v.next();return x}var A=a.stringStream({next:function(){if(1==++this.count)return g;throw StopIteration;},count:0,text:g}),v=n.make(A),x,u=[],z=[];z.push(d);var C,I,D;try{do switch(x=v.next(),x.style){case "xml-punctuation":r();if("\x3c"==x.content){var H=new h;H.wasParsed=!0;H.startOffset=x.offset;z[z.length-1].addChild(H,void 0,!0);y(!0);for("xml-tagname"==x.style?H.tag=x.content:u.push("expecting tag name");"xml-attname"==(x=y(!0)).style;){var E=new e;E.wasParsed=!0;H.attributes.push(E);
E.name=x.content;E.startOffset=x.offset;y(!0);if("\x3d"==x.content)if(x=v.next(),"xml-attribute"==x.style){var G=x.content;E.setValue(G.substring(1,G.length-1))}else u.push("expecting attribute value");else E.noValue=!0,E.setValue(!0);E.endOffset=x.offset-1;if(E.noValue&&"xml-attname"!=x.style)break}"xml-punctuation"!=x.style?u.push("expecting \x3e"):(H.startTagOffset=x.offset,"\x3e"==x.content?z.push(H):(H.noEndTag=!0,H=z[z.length-1]),q(x));"style"==H.tag&&p()}else if("\x3c/"==x.value){var N=H;x=
v.next();"script"==H.tag&&(H.script=H.getElementText());z.pop();H=z[z.length-1];x=v.next();N.endOffset=x.offset;q(x)}D=null;break;case "xml-text":case "whitespace":case "xml-entity":I?I.value+=x.value:D?D.value+=x.value:C?C.value+=x.value:c(x.value,x.offset);D=null;break;case "xml-comment":r();var L=new b;L.wasParsed=!0;L.startOffset=x.offset;L.value=x.content.substring(4,x.content.length-3);L.endOffset=x.offset+x.content.length;z[z.length-1].addChild(L,void 0,!0);D=null;break;case "php-block":r();
var J=new k;J.wasParsed=!0;J.startOffset=x.offset;J.value=x.content;J.endOffset=x.offset+x.content.length;z[z.length-1].addChild(J,void 0,!0);D=J;break;case "xml-doctype":I||(r(),L=new b,L.wasParsed=!0,L.startOffset=x.offset,L.value=x.value.substring(2),z[z.length-1].addChild(L,void 0,!0),L.isProcessingInstruction=!0,x=v.next());var F=x.content.length-1;"\x3e"==x.content.charAt(x.content.length-1)?(L.endOffset=x.offset+x.content.length,L.value+=x.content.substring(0,F),q(x),I=void 0):(I=L,L.value+=
x.content);D=null}while(1)}catch(K){}return{errors:u,endOffset:x?x.offset:0}}}})},"davinci/html/PHPBlock":function(){define(["dojo/_base/declare","davinci/html/HTMLItem"],function(p,m){return p("davinci.html.PHPBlock",m,{constructor:function(h){this.elementType="PHPBlock";this.value=h||""},getText:function(h){return h.excludeIgnoredContent?"":this.value}})})},"davinci/model/parser/Tokenizer":function(){define(["dojo/_base/declare","davinci/js/JSExpression"],function(p,m){return{stringStream:function(h){function e(){for(;k==
b.length;){f+=b;b="";k=0;try{b=h.next()}catch(a){if(a!=StopIteration)throw a;return!1}}return!0}var b="",k=0,a=0,f="";return{peek:function(){return e()?b.charAt(k):null},next:function(){if(!e()){if(0<f.length)throw"End of stringstream reached without emptying buffer ('"+f+"').";throw StopIteration;}return b.charAt(k++)},get:function(){var e=f;f="";0<k&&(e+=b.slice(0,k),b=b.slice(k),k=0);a+=e.length;return e},getOffset:function(){return a},push:function(f){b=b.slice(0,k)+f+b.slice(k);a-=f.length},
lookAhead:function(a,g,d,c){function e(a){return c?a.toLowerCase():a}a=e(a);var m=!1,r=f,p=k;for(d&&this.nextWhileMatches(/[\s\u00a0]/);;){d=k+a.length;var y=b.length-k;if(d<=b.length){m=a==e(b.slice(k,d));k=d;break}else if(a.slice(0,y)==e(b.slice(k))){f+=b;b="";try{b=h.next()}catch(A){if(A!=StopIteration)throw A;break}k=0;a=a.slice(y)}else break}m&&g||(b=f.slice(r.length)+b,k=p,f=r);return m},lookAheadRegex:function(a,f){if("^"!=a.source.charAt(0))throw Error("Regexps passed to lookAheadRegex must start with ^");
for(;-1==b.indexOf("\n",k);)try{b+=h.next()}catch(d){if(d!=StopIteration)throw d;}var c=b.slice(k).match(a);c&&f&&(k+=c[0].length);return c},more:function(){return null!==this.peek()},applies:function(a){var b=this.peek();return null!==b&&a(b)},nextWhile:function(a){for(var b;null!==(b=this.peek())&&a(b);)this.next()},matches:function(a){var b=this.peek();return null!==b&&a.test(b)},nextWhileMatches:function(a){for(var b;null!==(b=this.peek())&&a.test(b);)this.next()},equals:function(a){return a===
this.peek()},endOfLine:function(){var a=this.peek();return null==a||"\n"==a}}},tokenizer:function(h,e){function b(a){return"\n"!=a&&/^[\s\u00a0]*$/.test(a)}var k={state:e,take:function(a){"string"==typeof a&&(a={style:a,type:a});a.offset=h.getOffset();a.content=(a.content||"")+h.get();/\n$/.test(a.content)||h.nextWhile(b);a.value=a.content+h.get();return a},next:function(){if(!h.more())throw StopIteration;var a;if(h.equals("\n"))return h.next(),this.take("whitespace");if(h.applies(b))a="whitespace";
else for(;!a;)a=this.state(h,function(a){k.state=a});return this.take(a)}};return k}}})},"davinci/js/JSExpression":function(){define(["dojo/_base/declare","davinci/js/JSElement"],function(p,m){return p("davinci.js.JSExpression",m,{constructor:function(){this.elementType="JSExpression"},getText:function(){var h="";this.comment&&(h+=this.printNewLine(context)+this.comment.getText(context));this.label&&(h+=this.printNewLine(context)+this.label.getText(context));return h},add:function(h){}})})},"davinci/js/JSElement":function(){define(["dojo/_base/declare",
"davinci/js/JSModel"],function(p,m){var h=null,e=null;return p("davinci.js.JSElement",m,{constructor:function(){this.elementType="JSElement";null!==h&&(this.comment=h,h=null);null!==e&&(this.label=e,e=null)},printNewLine:function(b){for(var e="\n",a=0;a<b.indent;a++)e+=" ";return e},printStatement:function(b,e){return this.printNewLine(b)+e.getText(b)+(e.nosemicolon?"":";")},add:function(b){this.addChild(b)},init:function(b,e,a){},getLabel:function(){context={indent:0};return this.getText(context)},
getID:function(){return this.parent.getID()+":"+this.startLine+":"+this.getLabel()},getSyntaxPositions:function(b){function e(a,g,d,c){"undefined"!=typeof b&&b!=a||f.push({line:a,col:g,length:d,type:c})}function a(a,g,d){"undefined"!=typeof b&&b!=a[0]||f.push({line:a[0],col:a[1],length:g,type:d})}var f=[];this.visit({visit:function(b){"JSFunction"==b.elementType?(e(b.startLine,b.startCol,8,"keyword"),a(b.leftParenPos,1,"delimiter"),a(b.rightParenPos,1,"delimiter"),a(b.leftBracePos,1,"delimiter"),
a(b.rightBracePos,1,"delimiter")):"JSVariableDeclaration"==b.elementType?e(b.startLine,b.startCol,3,"keyword"):"JSVariableFragment"==b.elementType?b.equalPos?a(b.equalPos,1,"operator"):e(b.startLine,b.startCol,1,"name"):"JSNameReference"==b.elementType&&e(b.startLine,b.startCol,b.endCol-b.startCol,"name")},endVisit:function(a){return!0}});return f}})})},"davinci/js/JSModel":function(){define(["dojo/_base/declare","davinci/model/Model"],function(p,m){davinci.js||(davinci.js={});return p("davinci.js.JSModel",
m,{})})},"davinci/html/CSSParser":function(){define("dojo/_base/declare davinci/html/CSSSelector davinci/html/CSSCombinedSelector davinci/html/CSSRule davinci/html/CSSProperty davinci/html/CSSAtRule davinci/html/CSSImport davinci/model/parser/Tokenizer davinci/model/Comment".split(" "),function(p,m,h,e,b,k,a,f,n){var g=null,d=function(){function a(c,b,d){return function(a){return!c||/^\}/.test(a)?d:b?d+2*indentUnit:d+indentUnit}}var b=function(){function a(f,g){var e=f.next();if("@"==e)return f.nextWhileMatches(/[a-zA-Z0-9_-]/),
"css-at";if("/"==e&&f.equals("*"))return g(c),null;if("\x3c"==e&&f.equals("!"))return g(b),null;if("\x3d"==e)return"css-compare";if(!f.equals("\x3d")||"~"!=e&&"|"!=e){if('"'==e||"'"==e)return g(d(e)),null;if("#"==e)return f.nextWhileMatches(/[\w-]/),"css-hash";if("!"==e)return f.nextWhileMatches(/[ \t]/),f.nextWhileMatches(/\w/),"css-important";if(/\d/.test(e))return f.nextWhileMatches(/[\w.%]/),"css-unit";if(/[,.+>*\/]/.test(e))return"css-select-op";if(/[;{}:\[\]]/.test(e))return"css-punctuation";
f.nextWhileMatches(/[\w\\\-_]/);return"css-identifier"}f.next();return"css-compare"}function c(b,d){for(var f=!1;!b.endOfLine();){var g=b.next();if(f&&"/"==g){d(a);break}f="*"==g}return"css-comment"}function b(c,d){for(var f=0;!c.endOfLine();){var g=c.next();if(2<=f&&"\x3e"==g){d(a);break}f="-"==g?f+1:0}return"css-comment"}function d(c){return function(b,d){for(var f=!1;!b.endOfLine();){var g=b.next();if(g==c&&!f)break;f=!f&&"\\"==g}f||d(a);return"css-string"}}return function(c,b){return f.tokenizer(c,
b||a)}}();return{make:function(d,f){f=f||0;var g=b(d),e=!1,k=!1,h=!1,n={next:function(){var b=g.next(),d=b.style,n=b.content;"css-hash"==d&&(d=b.style=k?"css-colorcode":"css-identifier");"css-identifier"==d&&(k?b.style="css-value":e||h||(b.style="css-selector"));"\n"==n&&(b.indentation=a(e,k,f));"{"==n&&"@media"==h?h=!1:"{"==n?e=!0:"}"==n?e=k=h=!1:";"==n?k=h=!1:e&&"css-comment"!=d&&"whitespace"!=d?k=!0:e||"css-at"!=d||(h=n);return b},copy:function(){var a=e,c=k,d=g.state;return function(f){g=b(f,
d);e=a;k=c;return n}}};return n},electricChars:"}"}}();d.parse=function(c,q){function w(a){D.push(a)}function r(){var a;u=x.next();for(var c=!1;"css-comment"==u.style||"whitespace"==u.style;){if("css-comment"==u.style||c)g||(g=new n),a=u.content,0===u.content.indexOf("/*")&&(a=a.substring(2),c=!0,g.addComment("block",void 0,void 0,"")),-1<a.lastIndexOf("*/")&&a.lastIndexOf("*/")==a.length-2&&(a=a.substring(0,a.length-2),c=!1),g.appendComment(a);u=x.next()}return u}function p(){z=new m;z.startOffset=
u.offset;z.parent=E;C?(C.selectors.push(z),z.parent=C):E.selectors.push(z)}function y(){var a=z;a.endOffset=u.offset-1;C||(C=new h,C.parent=E,C.selectors.push(a),z.startOffset=a.startOffset,E.selectors[E.selectors.length-1]=C);p();C.combiners.push(I);I=" "}var A,v;"string"==typeof c?A=f.stringStream({next:function(){if(1==++this.count)return c;throw StopIteration;},count:0,text:c}):(A=c,v=!0);var x=d.make(A),u,z,C,I=" ",D=[],H=[],E,G;try{do switch(r(),u.style){case "css-selector":case "css-select-op":if(v&&
"\x3c"==u.content)throw A.push("\x3c"),StopIteration;E=new e;H.push(E);E.startOffset=u.offset;q&&q.addChild(E,void 0,!0);G=!1;C=void 0;I=" ";p();a:for(;;){switch(u.style){case "css-select-op":switch(u.content){case ",":C=void 0;p();break;case ".":G&&y();r();z.cls=z.cls?z.cls+"."+u.content:u.content;G=u.value.length>u.content.length;break;case "*":(z.element||z.cls)&&y();z.element="*";break;case "+":case "\x3e":I=u.content,y()}break;case "css-selector":"css-identifier"==u.type?((z.element||z.cls||
G)&&y(),z.element=u.content):"css-hash"==u.type&&((z.id||G)&&y(),z.id=u.content.substring(1));G=u.value.length>u.content.length;break;case "css-punctuation":if("{"==u.content)break a;else":"==u.content?(r(),":"==u.content?(r(),z.pseudoElement=u.content):(z.pseudoRule=u.content,G=!0)):"["==u.content&&(r(),z.attribute={name:u.content},r(),"\x3d"===u.content||"~\x3d"===u.content||"|\x3d"===u.content)&&(z.attribute.type=u.content,r(),z.attribute.value=u.content.substring(1,u.content.length-1),r())}r()}g&&
(E.comment=g,g=null);for(z.endOffset=u.offset-1;"}"!=r().content;){var N=u.offset,L=u.content,J=!1;"css-hash"==u.type?(r(),"css-identifier"==u.type?L+=u.content:J=!0):"css-identifier"!=u.type&&("*"!=u.content?w("expecting identifier around "+z.getText()+"{ "+F.name+": "+propery.value):(r(),L+=u.content));var F=new b;F.startOffset=N;F.parent=E;g&&(F.comment=g,g=null);E.properties.push(F);E.addChild(F,void 0,!0);F.name=L;J||":"!=r().content&&w("expecting ':' "+z.getText()+"{ "+F.name+": "+propery.value);
r();F.value=u.value;if("url"==F.value){for(;")"!=r().content;)F.value+=u.value;F.value+=u.value}for(;";"!=r().content&&"}"!=u.content;)F.value+=u.value;g&&(F.postComment=g,g=null);F.endOffset=u.offset-1;if("}"==u.content)break}g&&(F.postComment=g,g=null);E.endOffset=u.offset;break;case "css-at":var K=u.content.substring(1),M="import"==K?new a:new k;M.startOffset=u.offset;q&&q.addChild(M,void 0,!0);if("import"==K)J=M,r(),"url"==u.content&&(J.isURL=!0,r(),r()),J.url=u.content.substring(1,u.content.length-
1),J.isURL&&r(),r();else if(0<=K.indexOf("keyframes")){var P=J="",R=!1,O="\t\t";r();J=u.content;"."==J&&(r(),J+=u.content);r();M.value=u.content+"\n";r();if(0<=u.content.indexOf("from")||0<=u.content.indexOf("to")||0<=u.content.indexOf("%"))a:for(;;){M.value+="\t"+u.content+" ";r();for(M.value+=u.content+"\n";"}"!=r().content;){R&&(O="\t\t",R=!1);if(";"==u.content)P="\n",R=!0;else if(":"==u.content||")"==u.content)P=" ";M.value+=O+u.content+P;O=P=""}M.value+="\t"+u.content+"\n";r();if("}"==u.content)break a}else w("inside keyframes decl expecting from/to blocks or nn% blocks");
M.value+=u.content;M.name=K+" "+J}else for(M.name=K,M.value="";";"!=r().content;)M.value+=u.content;M.endOffset=u.offset}while(1)}catch(Q){g&&E&&(E.postComment=g,g=null)}return{errors:D,model:H}};return d})},"davinci/html/CSSSelector":function(){define(["require","dojo/_base/declare","davinci/html/CSSElement"],function(p,m,h){m=m("davinci.html.CSSSelector",h,{constructor:function(){this.elementType="CSSSelector"},matchesSelector:function(e){if(e.elementType==this.elementType&&this.id==e.id&&this.cls==
e.cls&&this.element==e.element&&this.pseudoRule==e.pseudoRule)return!0},getText:function(e){e="";this.element&&(e+=this.element);this.id&&(e=e+"#"+this.id);this.cls&&(e=e+"."+this.cls);this.pseudoRule&&(e=e+":"+this.pseudoRule);this.pseudoElement&&(e=e+"::"+this.pseudoElement);this.attribute&&(e=e+"["+this.attribute.name,this.attribute.type&&(e=e+this.attribute.type+'"'+this.attribute.value+'"'),e+="]");return e},matches:function(e,b){var k=e[b||0],a=0,f=!1;if(this.id){if(this.id!=k.id)return-1;a+=
100;f=!0}if(this.element){if("*"!=this.element){if(this.element!=k.tagName&&this.element.toUpperCase()!=k.tagName)return-1;a+=1}f=!0}if(this.cls&&k.classes){k=k.classes;if(0<=this.cls.indexOf(".")){for(var f=this.cls.split("."),h=0;h<f.length;h++){for(var g=!1,d=0;d<k.length&&!(g=k[d]==f[h]);d++);if(!g)return-1}a+=10*f.length}else{g=!1;for(d=0;d<k.length&&!(g=k[d]==this.cls&&!this.pseudoRule);d++);if(!g)return-1;a+=10}f=!0}return f?a:-1},getCSSRule:function(){return"CSSRule"==this.parent.elementType?
this.parent:this.parent.parent}});m.parseSelectors=function(e){if("string"==typeof e){e+="{}";var b=new (p("davinci/html/CSSFile"));b.setText(e);return b.children[0].selectors}return e};return m})},"davinci/html/CSSElement":function(){define(["dojo/_base/declare","davinci/model/Model"],function(p,m){return p("davinci.html.CSSElement",m,{constructor:function(){"undefined"!=typeof pushComment&&null!==pushComment&&(this.comment=pushComment,pushComment=null);this.elementType="CSSElement"},getLabel:function(){context=
{indent:0,noComments:!0};return this.getText(context)},onChange:function(h){if(this.parent)if(h)this.parent.onChange(h);else this.parent.onChange(this)},close:function(h){for(h=0;h<this.children;h++)this.children[h].close()},getCSSFile:function(){var h=this.getCSSRule();if(h)return h.parent},getCSSRule:function(){},_convertNode:function(h){if(dojo.isArray(h))return h;for(var e=[];h&&"HTML"!=h.tagName;)e.push({tagName:h.tagName,id:h.id,classes:h.className&&h.className.split(" ")}),h=h.parentNode;return e},
getID:function(){return this.parent.getID()+":"+this.startOffset+":"+this.getLabel()}})})},"davinci/html/CSSCombinedSelector":function(){define(["dojo/_base/declare","davinci/html/CSSElement"],function(p,m){return p("davinci.html.CSSCombinedSelector",m,{constructor:function(){this.selectors=[];this.combiners=[];this.elementType="CSSCombinedSelector"},matchesSelector:function(h){if(h.elementType==this.elementType&&h.selectors.length==this.selectors.length){for(var e=0;e<this.selectors.length;e++)if(this.combiners[e]!=
h.combiners[e]||!this.selectors[e].matchesSelector(h.selectors[e]))return!1;return!0}},getText:function(h){for(var e="",b=0;b<this.selectors.length-1;b++)e+=this.selectors[b].getText(h),e=" "!=this.combiners[b]?e+(" "+this.combiners[b]+" "):e+this.combiners[b];return e+=this.selectors[this.selectors.length-1].getText(h)},matches:function(h){for(var e=this.selectors.length-1,b=0,k=0;k<h.length;k++){var a;if(0<=(a=this.selectors[e].matches(h,k))&&(b+=a,e--,0>e))return b;if(0==k&&0>a)return-1}},visit:function(h){if(!h.visit(this)){for(var e=
0;e<this.children.length;e++)this.children[e].visit(h);for(e=0;e<this.selectors.length;e++)this.selectors[e].visit(h)}h.endVisit&&h.endVisit(this)},getCSSRule:function(){return this.parent}})})},"davinci/html/CSSRule":function(){define(["dojo/_base/declare","davinci/html/CSSElement","davinci/html/CSSParser","davinci/html/CSSProperty"],function(p,m,h,e){return p("davinci.html.CSSRule",m,{constructor:function(){this.elementType="CSSRule";this.selectors=[];this.properties=[]},getText:function(b){var e=
"";b=b||[];this.comment&&!b.noComments&&(e+=this.comment.getText(b));for(var e=e+this.getSelectorText(b),e=e+" {",a=0;a<this.properties.length;a++)e=e+"\n    "+this.properties[a].getText(b);e+="\n}\n";this.postComment&&!b.noComments&&(e+=this.postComment.getText(b));return e},setText:function(b){require("davinci/html/CSSParser").parse(b,this);dojo.mixin(this,this.children[0]);this.startOffset=(this.parent?this.parent.endOffset:0)+1;this.setDirty(!0)},addProperty:function(b,k){var a=new e(b,k,this);
this.properties.push(a);this.setDirty(!0);this.onChange()},insertProperty:function(b,k,a){var f;(f=this.getProperty(b))&&this.removeProperty(b);f=new e(b,k,this);this.properties.splice(a,0,f);this.setDirty(!0);this.onChange()},getSelectorText:function(b){for(var e="",a=0;a<this.selectors.length;a++)0<a&&(e+=", "),e+=this.selectors[a].getText(b);return e},matches:function(b){b=this._convertNode(b);for(var e,a=0;a<this.selectors.length;a++)if(0<=(e=this.selectors[a].matches(b)))return e},visit:function(b){if(!b.visit(this)){for(var e=
0;e<this.children.length;e++)this.children[e].visit(b);for(e=0;e<this.selectors.length;e++)this.selectors[e].visit(b)}b.endVisit&&b.endVisit(this)},hasSelector:function(b){for(var e=0;e<this.selectors.length;e++)if(this.selectors[e].getLabel()==b)return!0;return!1},matchesSelectors:function(b){for(var e=0;e<b.length;e++)for(var a=0;a<this.selectors.length;a++)if(this.selectors[a].matchesSelector(b[e]))return!0;return!1},getCSSRule:function(){return this},getLabel:function(){return this.getSelectorText({})},
getProperty:function(b){for(var e=0;e<this.properties.length;e++)if(b==this.properties[e].name)return this.properties[e]},hasProperty:function(b){for(var e=0;e<this.properties.length;e++)if(b==this.properties[e].name)return!0},getProperties:function(b){for(var e=[],a=0;a<this.properties.length;a++)b&&b!=this.properties[a].name||e.push(this.properties[a]);return e},setProperty:function(b,k){var a=this.getProperty(b);k?a?a.value=k:(a=new e,a.name=b,a.value=k,this.properties.push(a),a.parent=this):this.removeProperty(b);
this.setDirty(!0);this.onChange()},removeProperty:function(b){for(var e=0;e<this.properties.length;e++)b==this.properties[e].name&&this.properties.splice(e,1);this.setDirty(!0);this.onChange()},removeAllProperties:function(){this.properties=[];this.setDirty(!0);this.onChange()},removeStyleValues:function(b){for(var e=[],a=0;a<this.properties.length;a++){for(var f,h=0;h<b.length&&!f;h++)f=b[h]==this.properties[a].name;f||(e=this.properties[a])}this.properties=e;this.setDirty(!0);this.onChange()}})})},
"davinci/html/CSSProperty":function(){define(["dojo/_base/declare","davinci/html/CSSElement"],function(p,m){return p("davinci.html.CSSProperty",m,{constructor:function(h,e,b){this.elementType="CSSProperty";this.name=h||"";this.value=e||"";this.parent=b;this.expanded=[];this.lengthValues=[]},getValue:function(){return this.value},getText:function(h){var e="";this.comment&&!h.noComments&&(e+="\n  "+this.comment.getText(h));e+=this.name+" : "+this.value;this.isNotImportant&&(e+=" !important");e+=";";
this.postComment&&!h.noComments&&(e+=this.postComment.getText(h));return e},getCSSRule:function(){return this.parent},addProperty:function(h,e){var b=new CSSProperty(h,e,this);this.properties.push(b)},getURL:function(){if(this.url){var h=new davinci.model.Path(this.getCSSFile().url),h=h.getParentPath().append(this.url);return h.toString()}}})})},"davinci/html/CSSAtRule":function(){define(["dojo/_base/declare","davinci/html/CSSElement"],function(p,m){return p("davinci.html.CSSAtRule",m,{constructor:function(){this.elementType=
"CSSAtRule"},getCSSFile:function(){return this.parent},getText:function(h){s="@";return s=s+this.name+" "+this.value+"\n"}})})},"davinci/html/CSSImport":function(){define(["dojo/_base/declare","davinci/html/CSSElement","davinci/model/Path","davinci/html/CSSFile"],function(p,m,h,e){return p("davinci.html.CSSImport",m,{constructor:function(){this.elementType="CSSImport"},getCSSFile:function(){return this.parent},setUrl:function(b){this.url=b},visit:function(b){if(!b.visit(this)){for(var e=0;e<this.children.length;e++)this.children[e].visit(b);
this.cssFile&&this.cssFile.visit(b)}b.endVisit&&b.endVisit(this)},getText:function(b){s="@import ";return s=this.isURL?s+('url("'+this.url+'");'):s+('"'+this.url+'";')},close:function(b){require("davinci/model/Factory").closeModel(this.cssFile);this.connection&&dojo.disconnect(this.connection);delete this.connection},load:function(b){for(var e=this.parent;e&&!e.url&&!e.fileName;)e=e.parent;e=new h(e.url||e.fileName);e=e.getParentPath().append(this.url);e=e.toString();this.cssFile=require("davinci/model/Factory").getModel({url:e,
loader:this.parent.loader,includeImports:this.parent.includeImports||b});this.cssFile.relativeURL=this.url;this.connection=dojo.connect(this.cssFile,"onChange",this.parent,"onChange")}})})},"davinci/html/CSSFile":function(){define("dojo/_base/declare dojo/_base/lang davinci/html/CSSElement davinci/html/CSSRule davinci/html/CSSSelector system/resource davinci/Workbench".split(" "),function(p,m,h,e,b,k,a){return p("davinci.html.CSSFile",h,{constructor:function(a){this.elementType="CSSFile";m.mixin(this,
a);this.options||(this.options={xmode:"style",css:!0,expandShorthand:!1});a=null;this.url&&this.loader?a=this.loader(this.url):this.url&&"app.css"===this.url&&this.setText("BODY {background-color: red!important;}");a&&this.setText(a)},save:function(a){return k.findResourceAsync(this.url).then(function(b){return b.setContents(this.getText(),a)}.bind(this))},close:function(){this.visit({visit:function(a){"CSSImport"==a.elementType&&a.close()}});require(["dojo/_base/connect"],function(a){a.publish("davinci/model/closeModel",
[this])})},addRule:function(a){var b=new e;b.setText(a);this.addChild(b);this.setDirty(!0);return b},setText:function(a){var b=this.children;this.children=[];this.errors=require("davinci/html/CSSParser").parse(a,this).errors;0<this.errors.length&&this.errors[this.errors.length-1].isException&&(this.children=b);this.includeImports&&this.children.forEach(function(a){"CSSImport"==a.elementType&&a.load()});this.onChange()},getText:function(a){a=a||{};a.indent=0;return this.children.map(function(b){return b.getText(a)}).join("")},
getCSSFile:function(){return this},getID:function(){return this.fileName},getMatchingRules:function(a,b,e){a=this._convertNode(a);b=b||[];e=e||[];for(var d=0;d<this.children.length;d++){var c=this.children[d];if("CSSRule"==c.elementType){var k=c.matches(a);if(k){for(var h=!1,m=0;m<e.length;m++)if(k>=e[m]){b.splice(m,0,c);e.splice(m,0,k);h=!0;break}h||(b.splice(0,0,c),e.splice(0,0,k))}}else"CSSImport"==c.elementType&&c.cssFile&&c.cssFile.getMatchingRules(a,b,e)}return b},getRule:function(a){var e;
if(!a)return[];a=b.parseSelectors(a);for(var g=0;g<this.children.length;g++){var d=this.children[g];if("CSSRule"==d.elementType){if(d.matchesSelectors(a)){e=d;break}}else"CSSImport"==d.elementType&&d.cssFile&&(e=d.cssFile.getRule(a)||e)}return e},getRules:function(a){a=b.parseSelectors(a);for(var e=[],g=0;g<this.children.length;g++){var d=this.children[g];"CSSRule"==d.elementType?d.matchesSelectors(a)&&e.push(d):"CSSImport"==d.elementType&&d.cssFile&&(e=e.concat(d.cssFile.getRules(a)))}return e},
getStyleValue:function(a,b){var e=[],d=[];b=this._convertNode(b);this.getMatchingRules(b,e,d);"string"==typeof a&&(a=[a]);return a.map(function(a){for(var b=0,f,k,h=0;h<e.length;h++)(k=e[h].getProperty(a))&&d[h]>b&&(f=k,b=d[h]);return f})}})})},"davinci/model/Comment":function(){define(["dojo/_base/declare","davinci/model/Model"],function(p,m){return p("davinci.model.Comment",m,{constructor:function(){this.elementType="Comment";this.nosemicolon=!0},addComment:function(h,e,b,k){null==this.comments&&
(this.comments=[]);this.comments[this.comments.length]={commentType:h,start:e,stop:b,s:k}},appendComment:function(h){var e=this.comments[this.comments.length-1];e.s+=h;e.stop+=h.length},getText:function(h){h="";for(var e=0;e<this.comments.length;e++)"line"==this.comments[e].commentType?h+="//"+this.comments[e].s+"\n":"block"==this.comments[e].commentType&&(h+="/*"+this.comments[e].s+"*/\n");return h}})})},"davinci/model/Factory":function(){define(["../html/CSSFile","../js/JSFile","../html/HTMLFile",
"system/resource"],function(p,m,h,e){var b=[],k=[],a={getModel:function(f){var e=f.url;if(!e)return null;for(var g=0;g<k.length;g++)if(k[g].url==e)return b[g]++,this.incrementImports(k[g]),k[g];if(/\.html?$/i.test(e)||/\.cfhtml?$/i.test(e))return a.newHTML(f);if(/\.css$/i.test(e))return a.newCSS(f);if(/\.js$/i.test(e))return a.newJS(f)},closeModel:function(a){a=a.url;if(!a)return null;for(var e=0;e<k.length;e++)k[e].url==a&&(b[e]--,0===b[e]&&(k.splice(e,1),b.splice(e,1)))},newHTML:function(a){a=new h(a.url);
k.push(a);b[k.length-1]=1;return a},newCSS:function(a){a=new p(a);k.push(a);b[k.length-1]=1;return a},newJS:function(a){a=new m(a);k.push(a);b[k.length-1]=1;return a},getNewFromResource:function(a){a=a.extension;if(!a)return new h;switch(a){case "html":return new h;case "css":return new p;case "js":case "json":return new m;default:return new h}},incrementImports:function(a){var e={visit:function(a){if("CSSImport"==a.elementType){a=a.cssFile.url;for(var d=0;d<k.length;d++)k[d].url==a&&b[d]++}return!1}};
a&&a.visit(e)},log:function(){for(var a=0;a<k.length;a++);}};require(["dojo/_base/connect"],function(b){b.subscribe("davinci/model/closeModel",a,a.closeModel)});return a})},"davinci/js/JSFile":function(){define(["dojo/_base/declare","davinci/js/JSElement"],function(p,m){return p("davinci.js.JSFile",m,{constructor:function(h){this.elementType="JSFile";this.nosemicolon=!0;this._textContent="";h&&(this.origin=h)},getText:function(h){return this._textContent},setText:function(h){this._textContent=h},
getLabel:function(){return this.fileName},getID:function(){return this.fileName},visit:function(h){if(!h.visit(this))for(var e=0;e<this.children.length;e++)this.children[e].visit(h);h.endVisit&&h.endVisit(this)}})})},"davinci/ve/widgets/CommonProperties":function(){define(["dojo/_base/declare","davinci/workbench/ViewLite","davinci/ve/commands/ModifyCommand"],function(p,m,h){return p("davinci.ve.widgets.CommonProperties",[m],{buildRendering:function(){var e=["title"],b;b="\x3ctable width\x3d'100%' class\x3d'property_table_stretchable' border\x3d'0' cellspacing\x3d'0' cellpadding\x3d'0'\x3e\x3ccolgroup\x3e\x3ccol style\x3d'width:15px;' /\x3e";
b+="\x3ccol class\x3d'gap02' /\x3e";b+="\x3ccol class\x3d'gap03' /\x3e";b+="\x3ccol style\x3d'width:15px;' /\x3e";b+="\x3c/colgroup\x3e";var k=0;this._boxes={};for(var a=0;a<e.length;a++)this._boxes[e[a]]={value:""},this._boxes[e[a]].id="davinci_properties_event_"+k++ +"_combo",b+="\x3ctr\x3e",b+="\x3ctd/\x3e",b+="\x3ctd class\x3d'propertyDisplayName'\x3e",b+=e[a]+":",b+="\x3c/td\x3e",b+="\x3ctd\x3e",b+="\x3cinput type\x3d'text' id\x3d'"+this._boxes[e[a]].id+"'\x3e\x3c/input\x3e",b+="\x3c/td\x3e",
b+="\x3ctd/\x3e",b+="\x3c/tr\x3e";b+="\x3c/table\x3e";this.domNode=dojo.doc.createElement("div");this.domNode.innerHTML=b;dojo.subscribe("/davinci/ui/widgetValuesChanged",dojo.hitch(this,this.onWidgetSelectionChange));dojo.subscribe("/davinci/ui/widget/replaced",dojo.hitch(this,this._widgetReplaced));this.inherited(arguments)},onEditorSelected:function(e){this._editor&&this._editor.getContext?(this.context=this._editor.getContext(),this._setValues()):(this.context=this._widget=this._subwidget=null,
this._clearValues())},startup:function(){function e(b){return function(){return this._onChange({target:b})}}this.inherited(arguments);for(var b in this._boxes)this._boxes[b].domNode=dojo.byId(this._boxes[b].id),dojo.connect(this._boxes[b].domNode,"onchange",this,e(b)),dojo.connect(this._boxes[b].domNode,"onfocus",this,"_onFocus"),dojo.connect(this._boxes[b].domNode,"onblur",this,"_onBlur")},_onFocus:function(){this.context&&this.context.blockChange(!0)},_onBlur:function(){this.context&&this.context.blockChange(!1)},
_onChange:function(e){e=e.target;var b=dojo.attr(this._boxes[e].domNode,"value");this.context&&this.context.blockChange(!1);if(this._boxes[e].value!=b){this._boxes[e].value=b;var k={};k[e]=b;e=new h(this._widget,k,null);dojo.publish("/davinci/ui/widgetPropertiesChanges",[{source:this._editor.editor_id,command:e}])}},_widgetReplaced:function(e,b){this._widget===b&&(this._widget=e,this.onWidgetSelectionChange())},onWidgetSelectionChange:function(){this._widget?(this._setValues(),this.set("readOnly",
!1)):(this.set("readOnly",!0),this._clearValues())},_clearValues:function(){for(name in this._boxes)this._boxes[name].domNode&&dojo.attr(this._boxes[name].domNode,"value",""),this._boxes[name].value=null},_setValues:function(){if(this._widget)for(var e in this._boxes){var b=this._widget,k=this._boxes[e];k.domNode&&k.domNode.ownerDocument&&(b.getPropertyValue?(b=b.getPropertyValue(e),k.value!=b&&(k.value=b,dojo.attr(k.domNode,"value",k.value))):(k.value="",dojo.attr(k.domNode,"value","")))}}})})},
"davinci/ve/widgets/WidgetProperties":function(){define("dojo/_base/declare dojo/_base/connect davinci/workbench/ViewLite davinci/ve/metadata davinci/commands/CompoundCommand davinci/ve/commands/ModifyCommand ./HTMLStringUtil dijit/form/DateTextBox dijit/form/TimeTextBox xide/types xide/factory".split(" "),function(p,m,h,e,b,k,a,f,n,g,d){return p("davinci.ve.widgets.WidgetProperties",[h],{key:"widgetSpecific",_connects:null,buildRendering:function(){this.domNode=this.propDom=dojo.doc.createElement("div");
dojo.addClass(this.domNode,"propGroup");dojo.attr(this.domNode,"propGroup",this.key);this._connects=[];this.inherited(arguments)},onWidgetSelectionChange:function(){if(this._widget&&this._editor&&"davinci.ve.HTMLPageEditor"==this._editor.editorID){var a=davinci.ve.metadata.query(this._widget),b=this._widget.getParent();if(b&&b.isWidget&&(b=e.query(b))&&b.childProperties)if(a.$ownproperty)for(var d in b.childProperties)a.$ownproperty[d]=b.childProperties[d];else a.$ownproperty=b.childProperties;if(a&&
a.$ownproperty){this._disconnectAll();this._destroyProperties();b={};a.$ownproperty.title||(b.title={datatype:"string"});for(d in a.$ownproperty)b[d]=a.$ownproperty[d];a=this.propDom.innerHTML=this._createWidgetRows(b);-1===a.indexOf("data-dojo-type")&&-1===a.indexOf("dojoType")||dojo.parser.parse(this.propDom);this._setValues();this._connectAll()}}else this._disconnectAll(),this._destroyProperties()},onEditorSelected:function(a){if((this._editor=a)&&"davinci.ve.HTMLPageEditor"==a.editorID){if(this.context=
a.getContext())this._widget=this.context.getSelection()[0]}else this._widget=this.context=null;this.onWidgetSelectionChange()},_createWidgetRows:function(c){this._pageLayout=[];for(var b in c){var d=c[b];if(!d.hidden){var f={display:d.title||b,type:d.datatype,format:d.format,target:b,hideCascade:!0,data:d};if(d.dropdownQueryValues&&d.dropdownQueryAttribute){var e=[];dojo.forEach(d.dropdownQueryValues,dojo.hitch(this,function(a){a=dojo.query(a,this.context.rootNode);dojo.forEach(a,function(a){e.push(a.getAttribute(d.dropdownQueryAttribute))})}));
f.values=e;f.type="comboEdit"}if(dojo.isArray(d.mustHaveAncestor)){for(var g=!1,k=this._widget;!g&&k&&k.getParent()!=this.context.rootWidget;)(k=k.getParent())&&-1<dojo.indexOf(d.mustHaveAncestor,k.type)&&(g=!0);g||(f.disabled=!0)}this._pageLayout.push(f);d.option&&(this._pageLayout[this._pageLayout.length-1].values=dojo.map(d.option,function(a){return a}),this._pageLayout[this._pageLayout.length-1].type=d.unconstrained?"comboEdit":"combo")}}return a.generateTable(this._pageLayout)},_destroyProperties:function(){var a=
this.propDom;for(dojo.forEach(dojo.query("[widgetId]",a).map(dijit.byNode),function(a){a.destroy()});a.firstChild;)dojo._destroyElement(a.firstChild)},_connectAll:function(){function a(c){return function(){return this._onChange({target:c})}}for(var b=0,f=this._pageLayout.length;b<f;b++){var e=this._pageLayout[b],k=dijit.byId(e.id),h=k||dojo.byId(e.id),n=k?"onChange":"change",m=k?"onFocus":"focus",p=k?"onBlur":"blur";h?(h.pageIndex=b,this._connect(h,n,this,a(b)),this._connect(h,m,this,"_onFieldFocus"),
this._connect(h,p,this,"_onFieldBlur"),h.owner=this,h.row=b,d.publish(g.EVENTS.WIDGET_PROPERTY_RENDERED,{view:this,row:e,widget:k,node:h},this)):console.error("cant find "+e.id+" node",e)}},_connect:function(a,b,d,f,e){this._connects.push(m.connect.apply(null,arguments))},_disconnectAll:function(){this._connects.forEach(m.disconnect);this._connects=[]},_onChange:function(a){a=this._pageLayout[a.target];var d=dijit.byId(a.id),e;this.context&&this.context.blockChange(!1);d?(e=d.get("value"))&&e instanceof
Date&&(d instanceof f?e=e.toISOString().substring(0,10):d instanceof n&&(e="T"+e.toTimeString().substring(0,8))):(e=dojo.byId(a.id),e=dojo.attr(e,"checkbox"===e.type?"checked":"value"));if(a.value!=e){a.value=e;d={};d[a.target]=e;a=new b;e=new k(this._widget,d,null);a.add(e);if((d=this._widget.getHelper())&&d.onWidgetPropertyChange)d.onWidgetPropertyChange({widget:this._widget,compoundCommand:a,modifyCommand:e});dojo.publish("/davinci/ui/widgetPropertiesChanges",[{source:this._editor.editor_id,compoundCommand:a,
command:e}])}},_onFieldFocus:function(){this.context&&this.context.blockChange(!0)},_onFieldBlur:function(){this.context&&this.context.blockChange(!1)},_setValues:function(){try{for(var a=0,b=this._pageLayout.length;a<b;a++){var d=this._pageLayout[a],f=dojo.byId(d.id);if(f){var e=this._widget,g=d.target,k;k="_children"===g?(k=e.getChildrenData())&&1===k.length?k[0]:e.getPropertyValue(g):e.getPropertyValue(g);if(k&&k.toISOString){var h=e.metadata.property[g].format;h&&("date"==h?k=k.toISOString().substring(0,
10):"time"==h&&(k="T"+k.toTimeString().substring(0,8)))}if(d.value!=k){d.value=k;var n="boolean"===d.type?"checked":"value",m=dijit.byId(d.id);m?m.attr(n,d.value):dojo.attr(f,n,d.value)}}}}catch(p){debugger}}})})},"davinci/ve/widgets/EventSelection":function(){define("dojo/_base/declare dojo/_base/connect dojo/dom-class system/resource davinci/Runtime davinci/Workbench davinci/model/Path ../../workbench/Preferences ../../workbench/ViewLite ../commands/EventCommand ./HTMLStringUtil ../States xide/types".split(" "),
function(p,m,h,e,b,k,a,f,n,g,d,c,q){var w=/^State:.*/,r=/^\s*davinci\.states\.setState\s*\(\s*([\'"])((?:(?!\1).)*)\1\s*\)\s*$/,B=/^File:.*/,y=/^\s*location\.href\s*\=\s*([\'"])((?:(?!\1).)*)\1\s*$/,A=function(a){a&&c.getAllStateContainers(a);return[""]},v=function(a){a&&a.match(w)&&(a=a.substring(6),a="davinci.states.setState('"+("Background"==a?"Normal":a)+"')");a&&a.match(B)&&(a="location.href\x3d'"+a.substring(5)+"'");return a},x=function(a){var c;a&&((c=a.match(r))&&(a="State:"+c[2]),(c=a.match(y))&&
(a="File:"+c[2]));return a};p=p("davinci.ve.widgets.EventSelection",[n],{pageTemplate:[{display:"onclick",target:"onclick",type:"state",hideCascade:!0},{display:"ondblclick",target:"ondblclick",type:"state",hideCascade:!0},{display:"onmousedown",target:"onmousedown",type:"state",hideCascade:!0},{display:"onmouseup",target:"onmouseup",type:"state",hideCascade:!0},{display:"onmouseover",target:"onmouseover",type:"state",hideCascade:!0},{display:"onmousemove",target:"onmousemove",type:"state",hideCascade:!0},
{display:"onmouseout",target:"onmouseout",type:"state",hideCascade:!0},{display:"onkeypress",target:"onkeypress",type:"state",hideCascade:!0},{display:"onkeydown",target:"onkeydown",type:"state",hideCascade:!0},{display:"onkeyup",target:"onkeyup",type:"state",hideCascade:!0},{display:"onfocus",target:"onfocus",type:"state",hideCascade:!0},{display:"onblur",target:"onblur",type:"state",hideCascade:!0},{display:"onchange",target:"onchange",type:"state",hideCascade:!0}],buildRendering:function(){this.domNode=
dojo.doc.createElement("div");this.domNode.innerHTML=d.generateTable(this.pageTemplate,{zeroSpaceForIncrDecr:!0});h.add(this.domNode,"EventSelection");this.inherited(arguments)},setReadOnly:function(a){for(var c=0;c<this.pageTemplate.length;c++){var b=this.pageTemplate[c].widget;b?b.set("readOnly",a):(b=this.pageTemplate[c].domNode)&&dojo.attr(b,"disabled",a)}},startup:function(){function a(c){return function(){return this._onChange({target:c})}}this.inherited(arguments);for(var c=0;c<this.pageTemplate.length;c++){var b=
dijit.byId(this.pageTemplate[c].id);this.pageTemplate[c].widget=b;m.connect(b,"onChange",this,a(c))}this._buildSelectionValues();this.subscribe("/davinci/ui/context/loaded",dojo.hitch(this,this._buildSelectionValues));this.subscribe("/davinci/states/stored",dojo.hitch(this,this._buildSelectionValues));this.subscribe("/davinci/states/state/added",dojo.hitch(this,this._buildSelectionValues));this.subscribe("/davinci/states/state/removed",dojo.hitch(this,this._updateValues));this.subscribe("/davinci/states/state/renamed",
dojo.hitch(this,this._updateValues));this.subscribe("/davinci/ui/widgetPropertiesChanged",dojo.hitch(this,this._widgetPropertiesChanged));this.publish(q.EVENTS.ON_EVENT_SELECTION_RENDERED,{eventSelection:this,pageTemplate:this.pageTemplate});this.setReadOnly(!0)},onEditorSelected:function(){this._editor&&this._editor.supports("states")||delete this._editor;this._buildSelectionValues()},_onChange:function(a){a=a.target;var c=dijit.byId(this.pageTemplate[a].id),b=c.get("value"),b=v(b),d={};d[this.pageTemplate[a].target]=
b;d=new g(this._widget,d);dojo.publish("/davinci/ui/widgetPropertiesChanges",[{source:this._editor.editor_id,command:d}]);this.publish(q.EVENTS.ON_WIDGET_PROPERTY_CHANGED,{widget:c,editor:this._editor,eventSelection:this,pageTemplate:this.pageTemplate,widgetProperty:this.pageTemplate[a].target,value:b,target:this._widget})},_getRoot:function(){var a=this._editor,c;a&&a.getContext&&(c=(a=a.getContext())&&a.rootNode);return c},_updateValues:function(a){a&&a.node&&a.node._dvWidget&&(a=(a=a.node._dvWidget.getContext())&&
a.editor)&&a==b.currentEditor&&(this._buildSelectionValues(),this._widget&&this._setValues())},onWidgetSelectionChange:function(){this._widget?(this._setValues(),this.setReadOnly(!1)):(this.setReadOnly(!0),this._clearValues())},_clearValues:function(){for(var a=0;a<this.pageTemplate.length;a++)dijit.byId(this.pageTemplate[a].id).set("value","",!1)},_buildSelectionValues:function(){for(var a=this._getRoot(),a=A(a),c=0;c<this.pageTemplate.length;c++){var b=dijit.byId(this.pageTemplate[c].id);b.store.clearValues();
b.store.setValues(a)}},_setValues:function(){for(var a=0;a<this.pageTemplate.length;a++){var c=this.pageTemplate[a].target,b=this._widget,d="";b.properties&&b.properties[c]?d=b.properties[c]:b._srcElement&&(d=b._srcElement.getAttribute(c));d=x(d);(c=dijit.byId(this.pageTemplate[a].id))&&c.set("value",d,!1)}},_widgetPropertiesChanged:function(a){this._updateValues({widget:a[0]})}});p.getEventSelectionValues=A;p.getEventScriptFromValue=v;p.getValueFromEventScript=x;return p})},"davinci/actions/UndoAction":function(){define(["dojo/_base/declare",
"./Action","../Workbench"],function(p,m,h){return p("davinci.actions.UndoAction",m,{run:function(e){(e=h.getOpenEditor())&&e.getContext&&e.getContext().getCommandStack().undo()},isEnabled:function(e){var b=(e=h.getOpenEditor())&&e.getContext&&e.getContext();if(e&&b){if(b=b.getCommandStack().canUndo(),"davinci.ve.PageEditor"==e.declaredClass||"davinci.ve.themeEditor.ThemeEditor"==e.declaredClass)return b}else return!1}})})},"davinci/actions/Action":function(){define(["dojo/_base/declare"],function(p){return p("davinci.actions.Action",
null,{item:null,run:function(m){},isEnabled:function(m){return!0},getName:function(){return this.item.label}})})},"davinci/actions/SelectThemeAction":function(){define("dojo/_base/declare ./Action ../ui/widgets/ThemeSetSelection ../ve/commands/ChangeThemeCommand davinci/lang/actions davinci/Workbench".split(" "),function(p,m,h,e,b,k){return p("davinci.actions.SelectThemeAction",m,{run:function(a){if((a=davinci.Workbench.getOpenEditor())&&a.isDirty){var f=a.getOnUnloadWarningMessage();f||(f=dojo.string.substitute(b.filesHasUnsavedChanges,
[a.fileName]));k.showDialog({title:b.switchingThemes,content:f,style:{width:300},okCallback:dojo.hitch(this,this._okToSwitch),okLabel:b.save,hideCancel:null})}else this._okToSwitch()},_okToSwitch:function(){var a=davinci.Workbench.getOpenEditor();a.isDirty&&a.save();var b=a.getContext().getTheme(),a=a.getContext().getDojo().version.major+"."+a.getContext().getDojo().version.minor;this._themeChooser=new h({value:b,workspaceOnly:!1,dojoVersion:a});this._themeChooser.buildRendering()},_changeTheme:function(){var a=
this._themeChooser.attr("value");this._themeChooser.onClose();this._themeChooser.destroy();var b=davinci.Workbench.getOpenEditor();b&&b.getContext&&b.getContext().getCommandStack().execute(new e(a,b.getContext()))}})})},"davinci/ui/widgets/ThemeSetSelection":function(){define("dojo/_base/declare dijit/_WidgetBase dijit/_TemplatedMixin dijit/_WidgetsInTemplateMixin davinci/library system/resource davinci/workbench/Preferences davinci/Runtime davinci/Workbench davinci/ve/commands/ChangeThemeCommand davinci/ui/Dialog davinci/lang/ui dijit/lang/_common dijit/form/Button dijit/form/Select davinci/Theme dojo/text!./templates/ThemeSetSelection.html".split(" "),
function(p,m,h,e,b,k,a,f,n,g,d,c,q,w,r,B,y){p("davinci.ui.widgets.ThemeSetSelectionWidget",[m,h,e],{templateString:y,widgetsInTemplate:!0,uiNLS:c,commonNLS:q});return p("davinci.ui.widgets.ThemeSetSelection",null,{workspaceOnly:!1,_connections:[],_selectedThemeSet:null,constructor:function(a){dojo.safeMixin(this,a)},buildRendering:function(){this._dialog=new d({title:c.selectTheme,contentStyle:{width:372}});dojo.connect(this._dialog,"onCancel",this,"onClose");var a=null;this.newFile||(a=n.getOpenEditor().getContext());
(a=B.getThemeSet(a))||(a=B.dojoThemeSets.themeSets[0]);this._selectedThemeSet=a;this._dialog.attr("content",new davinci.ui.widgets.ThemeSetSelectionWidget({}));this._connections.push(dojo.connect(dijit.byId("theme_select_themeset_theme_select"),"onChange",this,"onChange"));this._connections.push(dojo.connect(dijit.byId("theme_select_desktop_theme_select"),"onChange",this,"onDesktopChange"));this._connections.push(dojo.connect(dijit.byId("theme_select_mobile_theme_select"),"onChange",this,"onMobileChange"));
this._connections.push(dojo.connect(this._dialog,"onExecute",this,"onOk"));this._connections.push(dojo.connect(dijit.byId("theme_select_cancel_button"),"onClick",this,"onClose"));this._connections.push(dojo.connect(dijit.byId("theme_select_android_select"),"onChange",this,"onAndroidThemeChange"));this._connections.push(dojo.connect(dijit.byId("theme_select_blackberry_select"),"onChange",this,"onBlackberryThemeChange"));this._connections.push(dojo.connect(dijit.byId("theme_select_ipad_select"),"onChange",
this,"oniPadThemeChange"));this._connections.push(dojo.connect(dijit.byId("theme_select_iphone_select"),"onChange",this,"oniPhoneThemeChange"));this._connections.push(dojo.connect(dijit.byId("theme_select_other_select"),"onChange",this,"onOtherThemeChange"));this.addThemeSets();dijit.byId("theme_select_themeset_theme_select").attr("value",a.name);this._dialog.show()},addThemeSets:function(){this._dojoThemeSets=B.getThemeSets(n.getProject());this._dojoThemeSets||(this._dojoThemeSets=B.dojoThemeSets);
this._dojoThemeSets=dojo.clone(this._dojoThemeSets);this._selectedThemeSet.name==B.none_themeset_name?this._dojoThemeSets.themeSets.unshift(this._selectedThemeSet):this._dojoThemeSets.themeSets.unshift(B.none_themeset);for(var a=dijit.byId("theme_select_themeset_theme_select"),c=0;c<this._dojoThemeSets.themeSets.length;c++)opt={value:this._dojoThemeSets.themeSets[c].name,label:this._dojoThemeSets.themeSets[c].name},a.addOption(opt)},addThemes:function(a){this._themeData=b.getThemes(n.getProject(),
this.workspaceOnly);var c=dijit.byId("theme_select_desktop_theme_select");c.options=[];var d=dijit.byId("theme_select_android_select");d.options=[];var f=dijit.byId("theme_select_blackberry_select");f.options=[];var e=dijit.byId("theme_select_ipad_select");e.options=[];var g=dijit.byId("theme_select_iphone_select");g.options=[];var k=dijit.byId("theme_select_other_select");k.options=[];var h=dijit.byId("theme_select_mobile_theme_select");c.options=[];h.options=[];h.addOption({value:B.default_theme,
label:B.default_theme});this._themeCount=this._themeData.length;for(var m=0;m<this._themeData.length;m++){var q={value:this._themeData[m].name,label:this._themeData[m].name};"dojox.mobile"===this._themeData[m].type?(h.addOption(q),d.addOption(q),f.addOption(q),e.addOption(q),g.addOption(q),k.addOption(q)):c.addOption(q)}c.attr("value",a.desktopTheme);for(c=0;c<a.mobileTheme.length;c++)switch(a.mobileTheme[c].device.toLowerCase()){case "android":d.attr("value",a.mobileTheme[c].theme);break;case "blackberry":f.attr("value",
a.mobileTheme[c].theme);break;case "ipad":e.attr("value",a.mobileTheme[c].theme);break;case "iphone":g.attr("value",a.mobileTheme[c].theme);break;case "other":k.attr("value",a.mobileTheme[c].theme)}B.singleMobileTheme(a)?h.attr("value",a.mobileTheme[a.mobileTheme.length-1].theme):h.attr("value",B.default_theme)},onChange:function(a){for(var c=0;c<this._dojoThemeSets.themeSets.length;c++)if(this._dojoThemeSets.themeSets[c].name==a){this.addThemes(this._dojoThemeSets.themeSets[c]);this._selectedThemeSet=
this._dojoThemeSets.themeSets[c];break}var c=dijit.byId("theme_select_mobile_theme_select"),b=dijit.byId("theme_select_desktop_theme_select"),d=dijit.byId("theme_select_android_select"),f=dijit.byId("theme_select_blackberry_select"),e=dijit.byId("theme_select_ipad_select"),g=dijit.byId("theme_select_iphone_select"),k=dijit.byId("theme_select_other_select");a===B.none_themeset_name?(c.set("disabled",!1),b.set("disabled",!1),d.set("disabled",!1),f.set("disabled",!1),e.set("disabled",!1),g.set("disabled",
!1),k.set("disabled",!1)):(c.set("disabled",!0),b.set("disabled",!0),d.set("disabled",!0),f.set("disabled",!0),e.set("disabled",!0),g.set("disabled",!0),k.set("disabled",!0))},onDesktopChange:function(a){this._selectedThemeSet.desktopTheme=a},onDeviceThemeChange:function(a,c){for(var b=0;b<this._selectedThemeSet.mobileTheme.length;b++)if(this._selectedThemeSet.mobileTheme[b].device.toLowerCase()===a.toLowerCase()){this._selectedThemeSet.mobileTheme[b].theme=c;break}},onAndroidThemeChange:function(a){this.onDeviceThemeChange("android",
a)},onBlackberryThemeChange:function(a){this.onDeviceThemeChange("blackberry",a)},oniPadThemeChange:function(a){this.onDeviceThemeChange("ipad",a)},oniPhoneThemeChange:function(a){this.onDeviceThemeChange("iphone",a)},onOtherThemeChange:function(a){this.onDeviceThemeChange("other",a)},onMobileChange:function(a){if(this._selectedThemeSet.name==B.none_themeset_name){var c=dijit.byId("theme_select_android_select"),b=dijit.byId("theme_select_blackberry_select"),d=dijit.byId("theme_select_ipad_select"),
f=dijit.byId("theme_select_iphone_select"),e=dijit.byId("theme_select_other_select");if("(device-specific)"===a&&this._selectedThemeSet.name===B.none_themeset_name)c.set("disabled",!1),b.set("disabled",!1),d.set("disabled",!1),f.set("disabled",!1),e.set("disabled",!1);else for(var g=0;g<this._selectedThemeSet.mobileTheme.length;g++){var k=this._selectedThemeSet.mobileTheme[g].device.toLowerCase();this._selectedThemeSet.mobileTheme[g].theme=a;switch(k){case "android":c.attr("value",a);c.set("disabled",
!0);break;case "blackberry":b.attr("value",a);b.set("disabled",!0);break;case "ipad":d.attr("value",a);d.set("disabled",!0);break;case "iphone":f.attr("value",a);f.set("disabled",!0);break;case "other":e.attr("value",a),e.set("disabled",!0)}}}},updateDeviceThemes:function(){for(var a=0;a<this._selectedThemeSet.mobileTheme.length;a++){var c;switch(this._selectedThemeSet.mobileTheme[a].device.toLowerCase()){case "android":c=dijit.byId("theme_select_android_select");break;case "blackberry":c=dijit.byId("theme_select_blackberry_select");
break;case "ipad":c=dijit.byId("theme_select_ipad_select");break;case "iphone":c=dijit.byId("theme_select_iphone_select");break;default:c=dijit.byId("theme_select_other_select")}this._selectedThemeSet.mobileTheme[a].theme=c.attr("value")}},_changeTheme:function(){debugger;var a=n.getOpenEditor();a&&a.getContext&&a.getContext().getCommandStack().execute(new g(newTheme,a.getContext()))},_onChange:function(){var a=this._getValueAttr();if(null!=a&&!this._blockChange){this.value=a;this._cookieName="maqetta_"+
a.name+"_"+a.version;var b=dojo.cookie(this._cookieName);if(this.dojoVersion&&a.version!==this.dojoVersion&&!b)this._warnDiv.innerHTML="\x3ctable\x3e\x3ctr\x3e\x3ctd\x3e\x3c/td\x3e\x3ctd\x3e"+c.themeVersionMessage+'\x3c/td\x3e\x3ctd\x3e\x3c/td\x3e\x3c/tr\x3e\x3ctr\x3e\x3ctd\x3e\x3c/td\x3e\x3ctd align\x3d"center"\x3e\x3cbutton data-dojo-type\x3d"dijit.form.Button" type\x3d"button" id\x3d"davinci.ui.widgets.ThemeSelection.ok"\x3e'+q.buttonOk+'\x3c/button\x3e\x3cbutton data-dojo-type\x3d"dijit.form.Button" type\x3d"button" id\x3d"davinci.ui.widgets.ThemeSelection.cancel"\x3e'+
q.buttonCancel+"\x3c/button\x3e\x3c/td\x3e\x3ctd\x3e\x3c/td\x3e\x3c/tr\x3e\x3c/table\x3e",a=dijit.byId("davinci.ui.widgets.ThemeSelection.ok"),b=dijit.byId("davinci.ui.widgets.ThemeSelection.cancel"),dojo.connect(a,"onClick",this,"_warnOk"),dojo.connect(b,"onClick",this,"_warnCancel");else this.onChange()}},_warnOk:function(){dojo.cookie(this._cookieName,"true");this._destroy();this.onChange()},_warnCancel:function(){this._destroy();this.onClose()},_destroy:function(){var a=dijit.byId("davinci.ui.widgets.ThemeSelection.ok");
dojo.disconnect(a);a.destroy();a=dijit.byId("davinci.ui.widgets.ThemeSelection.cancel");dojo.disconnect(a);a.destroy()},onOk:function(a){this.onClose(a);this.newFile||(a=n.getOpenEditor())&&a.getContext&&a.getContext().getCommandStack().execute(new g(this._selectedThemeSet,a.getContext()))},onClose:function(a){for(;connection=this._connections.pop();)dojo.disconnect(connection);this._dialog.destroyRecursive();delete this._dialog},_getTemplate:function(){return'\x3ctable style\x3d"width: 100%; margin-left:10px; margin-right:10px;"\x3e\x3ctr\x3e\x3ctd style\x3d"width: 18%;"\x3e'+
c.themeSet+'\x3c/td\x3e\x3ctd style\x3d"text-align: center;"\x3e\x3cselect dojoType\x3d"dijit.form.Select" id\x3d"theme_select_themeset_theme_select" type\x3d"text" style\x3d"width: 175px;" \x3e\x3c/select\x3e\x3c/td\x3e\x3c/tr\x3e\x3c/table\x3e\x3cdiv style\x3d"border-top: 1px solid black; top: 231px; border-top-color: #ccc; left: 429px; width: 300px; height: 11px; margin-top: 6px; margin-left:10px;"\x3e\x3c/div\x3e\x3ctable style\x3d"margin-left: 15px; width: 100%;"\x3e\x3ctr\x3e\x3ctd\x3e'+c.desktopTheme+
'\x3c/td\x3e\x3ctd\x3e\x3cselect dojoType\x3d"dijit.form.Select" id\x3d"theme_select_desktop_theme_select"type\x3d"text"  style\x3d"width: 175px;"  \x3e\x3c/select\x3e\x3c/td\x3e\x3c/tr\x3e\x3ctr\x3e\x3ctd\x3e'+c.mobileTheme+'\x3c/td\x3e\x3ctd\x3e\x3cselect dojoType\x3d"dijit.form.Select" id\x3d"theme_select_mobile_theme_select"type\x3d"text"  style\x3d"width: 175px;" \x3e\x3c/select\x3e\x3c/td\x3e\x3c/tr\x3e\x3c/table\x3e\x3ctable id\x3d"theme_select_devices_table" style\x3d"margin-left:30px; border-collapse: separate; border-spacing: 0 0; width: 100%"\x3e\x3ctr\x3e\x3ctd style\x3d"width: 139px;"\x3e'+
c.android+'\x3c/td\x3e\x3ctd\x3e\x3cselect dojoType\x3d"dijit.form.Select" id\x3d"theme_select_android_select" type\x3d"text"  style\x3d"width: 150px;"\x3e\x3c/select\x3e\x3c/td\x3e\x3c/tr\x3e\x3ctr\x3e\x3ctd\x3e'+c.blackberry+'\x3c/td\x3e\x3ctd\x3e\x3cselect dojoType\x3d"dijit.form.Select" id\x3d"theme_select_blackberry_select" type\x3d"text"  style\x3d"width: 150px;"\x3e\x3c/select\x3e\x3c/td\x3e\x3c/tr\x3e\x3ctr\x3e\x3ctd\x3e'+c.ipad+'\x3c/td\x3e\x3ctd\x3e\x3cselect dojoType\x3d"dijit.form.Select" id\x3d"theme_select_ipad_select" type\x3d"text"  style\x3d"width: 150px;"\x3e\x3c/select\x3e\x3c/td\x3e\x3c/tr\x3e\x3ctr\x3e\x3ctd\x3e'+
c.iphone+'\x3c/td\x3e\x3ctd\x3e\x3cselect dojoType\x3d"dijit.form.Select" id\x3d"theme_select_iphone_select" type\x3d"text"  style\x3d"width: 150px;"\x3e\x3c/select\x3e\x3c/td\x3e\x3c/tr\x3e\x3ctr\x3e\x3ctd\x3e'+c.other+'\x3c/td\x3e\x3ctd\x3e\x3cselect dojoType\x3d"dijit.form.Select" id\x3d"theme_select_other_select" type\x3d"text"  style\x3d"width: 150px;"\x3e\x3c/select\x3e\x3c/td\x3e\x3c/tr\x3e\x3c/table\x3e\x3ctable style\x3d"width:100%; margin-top: 10px;"\x3e\x3ctr\x3e\x3ctd style\x3d"text-align:right; width:80%;"\x3e\x3cinput type\x3d"button" dojoType\x3d"dijit.form.Button" id\x3d"theme_select_ok_button" label\x3d"'+
q.buttonOk+'"\x3e\x3c/input\x3e\x3c/td\x3e\x3ctd\x3e\x3cinput type\x3d"button" dojoType\x3d"dijit.form.Button" id\x3d"theme_select_cancel_button" label\x3d"'+q.buttonCancel+'"\x3e\x3c/input\x3e\x3c/td\x3e\x3c/tr\x3e\x3c/table\x3e'}})})},"davinci/ve/commands/ChangeThemeCommand":function(){define("dojo/_base/declare dojo/_base/lang dojo/query davinci/Theme davinci/Workbench davinci/library davinci/html/CSSImport davinci/html/HTMLElement davinci/html/HTMLText preview/silhouetteiframe davinci/model/Factory".split(" "),
function(p,m,h,e,b,k,a,f,n,g,d){return p("davinci.ve.commands.ChangeThemeCommand",null,{name:"changeTheme",constructor:function(a,b){this._newTheme=a;this._context=b;this._oldTheme=e.getThemeSet(this._context);this._oldTheme||(this._oldTheme=e.dojoThemeSets.themeSets[0])},execute:function(){this._changeTheme(this._newTheme,this._oldTheme)},undo:function(){this._changeTheme(this._oldTheme,this._newTheme)},_changeTheme:function(a,b){b.desktopTheme?this.removeThemeSet(b):this.removeTheme(b);a.desktopTheme?
this.addThemeSet(a):this.addTheme(a);var d=this._context,f=d.editor,e=d.getModel().getText();f.setContent(f.fileName,e);d.widgetAddedOrDeleted(!0);d._configDojoxMobile();f=d.getMobileDevice()||"none";"none"!=f&&(f=g.themeMap[f+".svg"]);(d=m.getObject("dojox.mobile",!0,d.getGlobal()))&&d.loadDeviceTheme&&d.loadDeviceTheme(f);window.setTimeout(function(){this._context.resizeAllWidgets()}.bind(this),50)},removeTheme:function(a){var b=e.getHelper(a);if(b&&b.removeTheme)b.removeTheme(this._context,a);
else{var d=this._context.getModel().getDocumentElement(),b=d.getChildElement("head"),d=d.getChildElement("body"),f=dojo.clone(this._context.getHeader()),g=a.files;a.conditionalFiles&&(g=g.concat(a.conditionalFiles));for(var k=0;k<g.length;k++)for(var n=g[k],m=0;m<f.styleSheets.length;m++)if(-1<f.styleSheets[m].indexOf(n)){var p=d.getAttribute("class");p&&(p=p.replace(a.className,""),f.bodyClasses=p,d.removeAttribute("class"),0<p.length&&d.addAttribute("class",p,!1));this._context.setHeader(f);for(var p=
b.find({elementType:"CSSImport"}),u=0;u<p.length;u++)if(-1<p[u].url.indexOf(n)){var z=p[u].url,C=this._context.getDocument();p[u].url="x";p[u].parent.removeChild(p[u]);p[u].close();h('link[href\x3d"'+z+'"]',C).orphan();this._context.theme=null;break}}}},addTheme:function(c){var b=e.getHelper(c);if(b&&b.addTheme)b.addTheme(this._context,c);else{var g=this._context.getModel().getDocumentElement(),b=g.getChildElement("head"),k=g.getChildElement("body"),h=dojo.clone(this._context.getHeader()),g=this._context.getFullResourcePath(),
g=(new davinci.model.Path(c.getFile().parent.getPath())).append(c.files[0]).relativeTo(g,!0).toString();h.styleSheets[h.styleSheets.length]=g;var n=k.getAttribute("class");n||(n=" ");n=n+" "+c.className;n=n.trim();h.bodyClasses=n;k.removeAttribute("class");k.addAttribute("class",n,!1);this._context.setHeader(h);k=b.getChildElement("style");k||(k=new f("style"),b.addChild(k));b=new a;b.url=g;g=d.getModel({url:e.getBase()+"/"+b.url,includeImports:!0});b.cssFile=g;k.addChild(b,0);this._context.theme=
c}},removeThemeSet:function(a){var d=k.getThemes(b.getProject(),this.workspaceOnly);if(a.desktopTheme)for(var f=0;f<d.length;f++)d[f].name===a.desktopTheme&&this.removeTheme(d[f]);a.mobileTheme&&!e.themeSetEquals(a.mobileTheme,e.dojoMobileDefault)&&(this._context.close(),this._dojoxMobileRemoveTheme(this._context))},addThemeSet:function(a){var d=k.getThemes(b.getProject(),this.workspaceOnly);if(a.desktopTheme)for(var f=0;f<d.length;f++)d[f].name===a.desktopTheme&&this.addTheme(d[f]);a.mobileTheme&&
this._dojoxMobileAddTheme(this._context,a.mobileTheme)},_dojoxMobileRemoveTheme:function(a){a._updateDojoConfig({themeMap:null,mblLoadCompatPattern:null,mblThemeFiles:null})},_dojoxMobileAddTheme:function(a,b,d){e.getThemeLocation().toString().replace(/\//g,"\\/");a._updateDojoConfig({themeMap:e.getDojoxMobileThemeMap(a,b),mblLoadCompatPattern:"''",mblThemeFiles:[]})}})})},"davinci/lang/actions":function(){define([],function(){return{select:"Select",save:"Save",selectDirectory:"Select Directory to link to",
parentFolder:"Parent Folder:",localName:"Local Name:",link:"Link",downloadResources:"Download Resources",downloadFileName:"Download File Name: ",downloadNow:"Download now",titleDownload:"Download",invalidFileName:"File names may only contain letters. numbers, and '_'.",editTheme:"Edit Theme",noEditableThemes:"No editable themes found in your workspace. Please create a new theme from one of the Read Only themes.",newWidgetsShouldUse:"New widgets should use: ",selectTheme:"Select a theme",switchingThemes:"Switching themes",
filesHasUnsavedChanges:"The file '${0}' has unsaved changes, \"Save\" changes and continue with switching themes.",abs:"Absolute positioning",flow:"Flow positioning"}})},"davinci/actions/SelectLayoutAction":function(){define(["dojo/_base/declare","./Action","../Workbench","davinci/lang/actions"],function(p,m,h,e){return p("davinci.actions.SelectLayoutAction",m,{_changeLayoutCommand:function(b){var e=dijit.byId("selectLayout");e&&e.destroyRecursive(!1);if((e=h.getOpenEditor())&&e.getContext){var a=
!0;if("absolute"===b||"Absolute positioning"===b)a=!1;e.getContext().setFlowLayout(a);e._visualChanged()}}})})},"davinci/actions/RedoAction":function(){define(["dojo/_base/declare","./Action","../Workbench"],function(p,m,h){return p("davinci.actions.RedoAction",m,{run:function(e){(e=h.getOpenEditor())&&e.getContext&&e.getContext().getCommandStack().redo()},isEnabled:function(e){var b=(e=h.getOpenEditor())&&e.getContext&&e.getContext();if(e&&b){if(b=b.getCommandStack().canRedo(),"davinci.ve.PageEditor"==
e.declaredClass||"davinci.ve.themeEditor.ThemeEditor"==e.declaredClass)return b}else return!1}})})},"davinci/actions/DownloadAction":function(){define("dojo/_base/declare ./Action ../Workbench ../ui/DownloadSelected system/resource davinci/ui/Resource davinci/lang/ui davinci/lang/actions dijit/form/ValidationTextBox".split(" "),function(p,m,h,e,b,k,a){return p("davinci.actions.DownloadAction",m,{run:function(){h.showModal(new e,a.downloadFile,{width:"400px"})},isEnabled:function(a){return(a=k.getSelectedResources())&&
0<a.length}})})},"davinci/ui/DownloadSelected":function(){define(["dojo/_base/declare","./Download","./Resource","davinci/lang/ui/ui","dojo/text!./templates/downloadSelected.html"],function(p,m,h,e,b){return p([m],{templateString:b,_buildUITable:function(){this._files=h.getSelectedResources();var b=["\x3cdiv class\x3d'downloadSelectedHeader'\x3e"+e.selectedFiles+"\x3c/div\x3e","\x3cdiv class\x3d'downloadSelectedList'\x3e"];this._files||(b.push("\x3cb\x3e"+e.noFilesSelected+"\x3c/b\x3e"),this._files=
[],dojo.attr(this._okButton,"disabled","true"));b=b.concat(this._files.map(function(a){return a.getPath()+"\x3cbr\x3e"}));b.push("\x3c/div\x3e\x3cbr\x3e\x3cbr\x3e");dojo.place(b.join(""),this._selectionDiv)},_getResources:function(){return this._files.map(function(b){return b.getPath()})},_getLibs:function(){return[]}})})},"davinci/ui/Download":function(){define("dojo/_base/declare dijit/_TemplatedMixin dijit/_WidgetBase dijit/_WidgetsInTemplateMixin davinci/library system/resource dojo/promise/all dojo/parser davinci/Workbench davinci/ve/RebaseDownload davinci/lang/ui/ui dijit/lang/_common dojo/text!./templates/download.html davinci/Theme dijit/form/Button dijit/form/ValidationTextBox dijit/form/TextBox".split(" "),
function(p,m,h,e,b,k,a,f,n,g,d,c,q,w){return p([h,m,e],{templateString:q,_fileNameValidationRegExp:"[a-zA-z0-9_.]+",_fileNameMaxLength:50,postMixInProperties:function(){this._projectName=n.getProject();dojo.mixin(this,d);dojo.mixin(this,c);this.inherited(arguments)},buildRendering:function(){this.inherited(arguments);this._buildUITable()},_buildUITable:function(){this._handles=[];this._userLibs=b.getUserLibs(this.getRoot());var a=[dojo.replace("\x3ctable cellspacing\x3d'0' cellpadding\x3d'0' width\x3d'100%' class\x3d'dwnloadLibTable'\x3e\x3ctr\x3e\x3ctd class\x3d'header'\x3e{library}\x3c/td\x3e\x3ctd class\x3d'header'\x3e{version}\x3c/td\x3e\x3ctd class\x3d'header'\x3e{include}\x3cbr\x3e{source}\x3c/td\x3e\x3ctd class\x3d'header'\x3e{baseLocation}\x3c/td\x3e\x3c/tr\x3e\x3ctr\x3e\x3ctd colspan\x3d'4'\x3e\x3chr\x3e\x3c/hr\x3e\x3c/td\x3e\x3c/tr\x3e",
d)];this.libraries={};this._userLibs.forEach(function(c,b){c.initRoot=this._getLibRoot(c.id,c.version);var d=c.id;c.initRoot&&(a.push("\x3ctr libPath\x3d'"+b+"'"),c.required&&a.push(" style\x3d'display:none'"),a.push("\x3e"),a=a.concat(["\x3ctd class\x3d'columna'\x3e"+d+"\x3c/td\x3e","\x3ctd class\x3d'columnb'\x3e"+c.version+"\x3c/td\x3e","\x3ctd class\x3d'columnc'\x3e\x3cinput type\x3d'checkbox' data-dojo-type\x3d'dijit/form/CheckBox' checked\x3e\x3c/input\x3e\x3c/td\x3e","\x3ctd class\x3d'columnd'\x3e\x3cinput type\x3d'text' data-dojo-type\x3d'dijit/form/TextBox' value\x3d'"+
c.initRoot+"'\x3e\x3c/input\x3e\x3c/td\x3e","\x3c/tr\x3e"]))},this);a.push("\x3c/table\x3e");dojo.place(a.join(""),this._tableDiv);f.parse(this._tableDiv)},_getLibRoot:function(a,c){var b=void 0;this._userLibs.some(function(d){if(d.id==a&&d.version==c)return b=d.root,!0});return b},_getLibs:function(){return dojo.query("tr[libPath]",this.domNode).map(function(a){var c=dijit.byNode(dojo.query(".dijitTextBox",a)[0]),b=dijit.byNode(dojo.query(".dijitCheckBox",a)[0]);a=parseInt(dojo.attr(a,"libPath"));
b=b.get("checked");c=c.get("value")||this._userLibs[a].root;return{id:this._userLibs[a].id,version:this._userLibs[a].version,root:c,includeSrc:b}},this)},getRoot:function(){if(n.singleProjectMode())return n.getProject()},_getResources:function(){return[n.getProject()]},_rewriteUrls:function(){var c=[];this._getResources().forEach(function(a){a=k.findResource(a);"Folder"==a.elementType?c=c.concat(k.findResource("*.html",!0,a,!0)):"html"==a.extension&&c.push(a)});var b=new g(this._getLibs()),d=c.filter(function(a){return!w.isThemeHTML(a)}).map(function(a){return b.rebuildSource(a.getContentSync(),
a).then(function(c){a.setContents(c,!0)})});return a(d)},_select:function(a){dojo.query("tr[libPath]",this.domNode).forEach(function(c){(c=dijit.byNode(dojo.query(".dijitCheckBox",c)[0]))&&c.set("checked",a)});return!1},_selectAll:function(){this._select(!0)},_selectNone:function(){this._select(!1)},okButton:function(){if(this.__fileName.isValid()){var a=dojo.attr(this.__fileName,"value");".zip"!=a.slice(-4)&&(a+=".zip");this._rewriteUrls().then(function(){var c=this._getLibs().filter(function(a){return a.includeSrc}),
b={};this.__optimize&&this.__optimize.getValue()&&(b.build="1");this.__fullSource&&this.__fullSource.getValue()&&(b.fullsource="1");setTimeout(function(){k.download(this._getResources(),a,this.getRoot(),c,b)}.bind(this),300)}.bind(this))}},cancelButton:function(){this.cancel=!0;this.onClose()}})})},"davinci/ve/RebaseDownload":function(){define(["dojo/_base/declare","./RebuildPage","../library"],function(p,m,h){return p(m,{constructor:function(e){this.libs=e},getLibraryBase:function(e,b){for(var k in this.libs){var a=
this.libs[k];if(a.id==e&&a.version==b)return k=new Deferred,k.resolve(a.root),k}return h.getLibRoot(e,b)||""}})})},"davinci/ve/RebuildPage":function(){define("dojo/_base/declare ./Context ../model/Path davinci/model/Factory dojo/Deferred dojo/promise/all davinci/ve/commands/ChangeThemeCommand".split(" "),function(p,m,h,e,b,k,a){return p(null,{constructor:function(a){dojo.mixin(this,a);this.context=new m},getPageCss:function(){return["app.css"]},getPageJs:function(){return["app.js"]},rebuildSource:function(f,
n,g,d){if(!n||!n.extension||"html"!=n.extension){var c=new b;c.resolve(f);return c}this.context.model=this.context._srcDocument=e.getNewFromResource(n);var m=new h(n?n.getPath():"");this.context.model.fileName=m.toString();this.context._srcDocument.setText(f,!0);if(null==this.context._srcDocument.find({elementType:"HTMLElement",tag:"html"},!0))return c=new b,c.resolve(f),c;var p=this.context._srcDocument.find({elementType:"HTMLElement"});f=[];f.push(this.context.loadRequires("html.body",!0,!0,!0));
for(n=0;n<p.length;n++){var r=p[n],r=r.getAttribute("data-dojo-type")||r.getAttribute("dojoType")||r.getAttribute("dvwidget");null!=r&&f.push(this.context.loadRequires(r.replace(/\./g,"/"),!0,!0,!0))}g&&this.changeThemeBase(g,m);d&&d.mobileTheme&&(new a(d,this.context))._dojoxMobileAddTheme(this.context,d.mobileTheme);p=this.getPageCss();g=this.getPageJs();d=this.context._getCurrentBasePath();m=m.getParentPath();for(n=0;n<p.length;n++)r=d.append(p[n]).relativeTo(m).toString(),this.addModeledStyleSheet(r,
p[n]);for(n=0;n<g.length;n++)p=d.append(g[n]).relativeTo(m).toString(),this.addJavaScript(p,null,null,null,g[n]);c=new b;k(f).then(function(){c.resolve(this.context._srcDocument.getText())}.bind(this));return c},addModeledStyleSheet:function(a,b){this.context._srcDocument.find({elementType:"CSSImport"}).some(function(e){if(e.url&&-1<e.url.indexOf(b))return e.setUrl(a),!0})},addJavaScript:function(a,b,e,d,c){!this.context._srcDocument.find({elementType:"HTMLElement",tag:"script"}).some(function(b){var d=
b.getAttribute("src");if(d&&-1<d.indexOf(c))return b.setAttribute("src",a),!0})&&a&&(-1<a.indexOf("dojo.js")&&this.context.addHeaderScript(a,{"data-dojo-config":"parseOnLoad: true"}),this.context.addHeaderScript(a))},changeThemeBase:function(a,b){var e=new h(a.getFile().parent.getPath()),d=function(a){var d=e.append(a).relativeTo(b,!0);this.addModeledStyleSheet(d.toString(),new h(a),!0)}.bind(this);a.files.forEach(d);a.conditionalFiles&&a.conditionalFiles.forEach(d)}})})},"davinci/ve/Context":function(){define("require dojo/_base/declare dojo/_base/lang dojo/dom-class dojo/query dojo/_base/connect xide/mixins/ReloadMixin xide/mixins/EventedMixin ./_ContextMobile ./_ContextTheme ./_ContextCSS ./_ContextJS ./_ContextDelite ./_ContextDojo ./_ContextInterface ./_ContextDocument ./_ContextWidgets ./ThemeModifier ../commands/CommandStack ./tools/SelectTool ../model/Path ../Workbench ./widget ../library ./metadata ./ChooseParent ./States dojox/html/_base".split(" "),
function(p,m,h,e,b,k,a,f,n,g,d,c,q,w,r,B,y,A,v,x,u,z,C,I,D,H,E){davinci.ve._preferences={};var G=0,N=function(a){var c=D.getLibrary();a&&dojo.filter(a.attributes,function(a){return"on"==a.nodeName.substr(0,2).toLowerCase()}).forEach(function(a){var b=!1,d;for(d in c)if(b=D.getLibrary(d),b=D.invokeCallback(b,"requiredEventAttribute",[a]))break})};return m("davinci.ve.Context",[n,g,d,c,q,w,r,B,y,A,f,a],{_scripts:[],delite:!1,WIDGET_MODIFIED:0,WIDGET_ADDED:1,WIDGET_REMOVED:2,WIDGET_REPARENTED:3,WIDGET_ID_CHANGED:4,
maqStatesClassCount:0,maqStatesClassPrefix:"maqStatesClass",maqTypesClassCount:0,maqTypesClassPrefix:"maqTypesClass",rootWidget:null,getRootWidget:function(){return this.rootWidget},constructor:function(a){a||(a={});z.location();this._contentStyleSheet=p.toUrl("davinci/ve/resources/content.css");this._id="_edit_context_"+G++;this.widgetHash={};this.delite=a.delite;h.mixin(this,a);"string"==typeof this.containerNode&&(this.containerNode=dijit.byId(this.containerNode));this._commandStack=new v(this);
this._defaultTool=new x;this._widgetIds=[];this._objectIds=[];this._widgets=[];this._loadedCSSConnects=[];this._chooseParent=new H({context:this});this.sceneManagers={};this.catchEvents=!0;this._customWidgetPackages=h.clone(I.getCustomWidgetPackages());a=D.getLibrary();for(var c in a)a=D.getLibrary(c),D.invokeCallback(a,"onDocInit",[this]);c=document.getElementById("focusContainer");c||(c=dojo.create("div",{"class":"focusContainer",id:"focusContainer"},document.body),davinci.Workbench.focusContainer=
c);this.initReload()},getVisualEditor:function(){return this.visualEditor&&this.visualEditor._pageEditor?this.visualEditor._pageEditor.delegate:null},destroy:function(){this.deactivate();this.inherited(arguments);this._loadedCSSConnects&&(this._loadedCSSConnects.forEach(k.disconnect),delete this._loadedCSSConnects)},isActive:function(){return!!this._activeTool},onReloaded:function(){},getPath:function(){return new u(this.getModel().fileName)},activate2:function(){if(!this.isActive()){this.loadStyleSheet(this._contentStyleSheet);
this._attachAll();this._restoreStates();b("*",this.rootNode).forEach(function(a){N(a);"A"==a.tagName.toUpperCase()&&a.hasAttribute("href")&&a.removeAttribute("href")});this._AppStatesActivateActions();this._statesLoaded=!0;k.publish("/davinci/ui/context/statesLoaded",[this]);this._onLoadHelpers();var a=this.getContainerNode();e.add(a,"editContextContainer");this.catchEvents?(this._connects=[k.connect(this._commandStack,"onExecute",this,"onCommandStackExecute"),k.connect(this._commandStack,"onExecute",
function(){setTimeout(this.onContentChange.bind(this),0)}.bind(this))],this._designEvents=[k.connect(this.getDocument(),"onkeydown",this,"onKeyDown"),k.connect(this.getDocument(),"onkeyup",this,"onKeyUp"),k.connect(a,"ondblclick",this,"onDblClick"),k.connect(a,"onmousedown",this,"onMouseDown"),k.connect(a,"onclick",this,"onMouseClick"),k.connect(a,"onmousemove",this,"onMouseMove"),k.connect(a,"onmouseup",this,"onMouseUp"),k.connect(a,"onmouseover",this,"onMouseOver"),k.connect(a,"onmouseout",this,
"onMouseOut")]):this._connects=[k.connect(this._commandStack,"onExecute",this,"onCommandStackExecute"),k.connect(this._commandStack,"onExecute",function(){setTimeout(this.onContentChange.bind(this),0)}.bind(this)),k.connect(this.getDocument(),"onkeydown",this,"onKeyDown"),k.connect(this.getDocument(),"onkeyup",this,"onKeyUp")];this.visualEditor&&this.visualEditor._pageEditor&&this.visualEditor._pageEditor._visualChanged&&this.visualEditor._pageEditor._visualChanged(!0);try{this.setActiveTool()}catch(c){debugger;
console.error("set active tool failed! "+c.message)}return!0}},deactivate:function(){if(this.isActive()){this._connects.forEach(k.disconnect);this._designEvents.forEach(k.disconnect);delete this._designEvents;delete this._connects;(this._focuses||[]).forEach(function(a){a._connected=!1});this._commandStack.clear();this._activeTool&&(this._activeTool.deactivate(),delete this._activeTool);var a=this.getContainerNode();this.select(null);e.remove(a,"editContextContainer");this.getTopWidgets().forEach(this.detach,
this);this.unloadStyleSheet(this._contentStyleSheet)}},_editorSelectionChange:function(a){a.editor.fileName===this.editor.fileName&&(k.unsubscribe(this._editorSelectConnection),delete this._editorSelectConnection,this._setSource(this._srcDocument))},_preserveStates:function(a,c){var b=davinci.ve.states.retrieve(a);if("BODY"!=a.tagName.toUpperCase()&&(b.maqAppStates||b.maqDeltas)){var d=this.maqStatesClassPrefix+this.maqStatesClassCount;a.className=a.className+" "+d;this.maqStatesClassCount++;c[d]=
{};b.maqAppStates&&(c[d].maqAppStates=b.maqAppStates);b.maqDeltas&&(c[d].maqDeltas=b.maqDeltas);a.style?c[d].style=a.style.cssText:console.error("Context._preserveStates: fail")}},_restoreStates:function(){},_AppStatesActivateActions:function(){if("davinci.ve.PageEditor"===this.editor.declaredClass){if(!this.rootNode._maqAppStates){this.rootNode._maqAppStates={};var a=this.rootWidget._srcElement,c=E.serialize(this.rootNode);c.maqAppStates?a.setAttribute(E.APPSTATES_ATTRIBUTE,c.maqAppStates):a.removeAttribute(E.APPSTATES_ATTRIBUTE);
this.editor._visualChanged(!0)}E.getFocus(this.rootNode)||(a=E.getState(this.rootNode),E.setState(a,this.rootNode,{updateWhenCurrent:!0,silent:!0,focus:!0}))}},getCommandStack:function(){return this._commandStack},getSelection:function(){return this._selection||[]},getPreference:function(a){return a?davinci.ve._preferences[a]:void 0},getPreferences:function(){return h.mixin({},davinci.ve._preferences)},setPreference:function(a,c){a&&(davinci.ve._preferences[a]=c,this.isActive())},setPreferences:function(a){if(a)for(var c in a)this.setPreference(c,
a[c])},_parse:function(a){var c={metas:[],scripts:[],modules:[],styleSheets:[]},b=a.getDocumentElement();a=b.getChildElement("head");var d=b.getChildElement("body");this._uniqueIDs={};if(d){d.visit({visit:dojo.hitch(this,function(a){"HTMLElement"==a.elementType&&a!=d&&this.getUniqueID(a)})});if(b=d.getAttribute("class"))c.bodyClasses=b;c.style=d.getAttribute("style");c.content=d.getElementText({includeNoPersist:!0,excludeIgnoredContent:!0});b=d.getAttribute(davinci.ve.states.APPSTATES_ATTRIBUTE);
b||(b=d.getAttribute(davinci.ve.states.APPSTATES_ATTRIBUTE_P6))&&d.setAttribute(davinci.ve.states.APPSTATES_ATTRIBUTE,b);d.removeAttribute(davinci.ve.states.APPSTATES_ATTRIBUTE_P6);c.maqAppStates=b}if(b=a.getChildElement("title"))c.title=b.getElementText();b=a.getChildElements("script");dojo.forEach(b,function(a){var b=a.getAttribute("src");b&&c.scripts.push(b);a=a.getElementText();a.length&&(a.replace(/dojo\.require\(["']([^'"]+)["']\)/g,function(a,b){c.modules.push(b)}),a.replace(/require\(\[["']([^'"]+)["']\]\)/g,
function(a,b){c.modules.push(b)}))},this);a=a.getChildElements("style");dojo.forEach(a,function(a){dojo.forEach(a.children,function(a){"CSSImport"===a.elementType&&c.styleSheets.push(a.url)})});return c},getUniqueID:function(a,c){var b=a.getAttribute("id");if(!b){for(var d=this.rootWidget?this.rootWidget.domNode.ownerDocument:null,f=c||a.tag;;)if(b=this._uniqueIDs.hasOwnProperty(f)?++this._uniqueIDs[f]:this._uniqueIDs[f]=0,b=f+"_"+b,d){if(!d.getElementById(b))break}else break;a.addAttribute("id",
b,!c)}return b},registerSceneManager:function(a){if(a&&a.id){var c=a.id;this.sceneManagers[c]||(this.sceneManagers[c]=a,k.publish("/davinci/ui/context/registerSceneManager",[a]))}},onCommandStackExecute:function(){this.clearCachedWidgetBounds();this.editor&&this.editor.editorContainer&&this.editor.editorContainer.updateToolbars&&this.editor.editorContainer.updateToolbars();E.updateHighlightsBaseStateWidgets(this)},reorderPreserveSiblingOrder:function(a){a=[].concat(a);for(var c=0;c<a.length-1;){for(var b=
a[c].getParent(),d=c+1,f=!1;d<a.length;)if(a[d].getParent()==b)f=!0,d++;else break;if(f)for(b=b.getChildren(),f=d-2;f>=c;f--)for(var e=c;e<=f;e++){var g=b.indexOf(a[e]),k=b.indexOf(a[e+1]);g>k&&(g=a[e+1],a[e+1]=a[e],a[e]=g)}c=d}return a},_updateWidgetHash:function(){this.widgetHash={};this.getAllWidgets().forEach(function(a){var c=a.id;c&&(this.widgetHash[c]=a)},this)}})})},"davinci/ve/_ContextMobile":function(){define(["require","dojo/_base/declare","../Theme","preview/silhouetteiframe","dojox/html/_base"],
function(p,m,h,e){return m(null,{getMobileDevice:function(){var b=this.getDocumentElement().getChildElement("body");if(b){var e=b.getAttribute("data-maq-device"),a=b.getAttribute("data-maqetta-device");!e&&a&&(b.removeAttribute("data-maqetta-device"),b.setAttribute("data-maq-device",a),e=a,this.editor._visualChanged());return e}},setMobileDevice:function(b){this.getGlobal().require("dojo/_base/config").mblUserAgent=e.getMobileTheme(b+".svg");var k=this.getDocumentElement().getChildElement("body");
b&&"none"!=b?k.addAttribute("data-maq-device",b):k.removeAttribute("data-maq-device",b)},setMobileTheme:function(b){(this.getMobileDevice()||"none")!=b&&this.setMobileDevice(b);this.close();try{e.getMobileTheme(b+".svg"),this._configDojoxMobile()}catch(k){}},getMobileOrientation:function(){var b=this.getDocumentElement().getChildElement("body"),e=b.getAttribute("data-maq-orientation"),a=b.getAttribute("data-maqetta-device-orientation");!e&&a&&(b.removeAttribute("data-maqetta-device-orientation"),
b.setAttribute("data-maq-orientation",a),e=a,this.editor._visualChanged());return e},setMobileOrientation:function(b){var e=this.getDocumentElement().getChildElement("body");b?e.setAttribute("data-maq-orientation",b):e.removeAttribute("data-maq-orientation")},_mobileMetaElement:{name:"viewport",content:"width\x3ddevice-width, initial-scale\x3d1.0, user-scalable\x3dno"},setMobileMeta:function(b){"none"===b?this._removeHeadElement("meta",this._mobileMetaElement):this._addHeadElement("meta",this._mobileMetaElement)},
_configDojoxMobile:function(b){try{var e=this.getGlobal().require,a=e("dojox/mobile"),f=e("dojox/mobile/deviceTheme"),n=this.getGlobal().dojo.config,g=this._getDojoJsElem().getAttribute("data-dojo-config"),d=n.mblUserAgent||"none",c,m,w,g=g?p.eval("({ "+g+" })","data-dojo-config"):{};c=g.themeMap;m=g.mblThemeFiles;w=g.mblLoadCompatPattern;delete this.themeCssFiles;delete this.cssFiles;c||(c=h.getDojoxMobileThemeMap(this,dojo.clone(h.dojoMobileDefault)),m=[],h.getThemeLocation().toString().replace(/\//g,
"\\/"),w=RegExp(""));b=!1;h.themeMapsEqual(f.themeMap,c)||(b=!1,f.themeMap=c);m?n.mblThemeFiles=m:delete n.mblThemeFiles;w?(n.mblLoadCompatPattern=w,a.loadCompatPattern=w):(delete n.mblLoadCompatPattern,a.loadCompatPattern=/\/mobile\/themes\/.*\.css$/);if(this._selection)this.onSelectionChange(this._selection);b||f.loadDeviceTheme(d)}catch(r){}}})})},"davinci/ve/_ContextTheme":function(){define("dojo/_base/declare ../Theme ../model/Path ../Workbench ../library ./metadata dojox/html/_base".split(" "),
function(p,m,h,e,b,k){return p(null,{getTheme:function(){if(!this.theme){var a=k.loadThemeMeta(this._srcDocument);a&&(this._themeUrl=a.themeUrl,this._themeMetaCache=a.themeMetaCache,this.theme=a.theme,this.theme.helper=m.getHelper(this.theme),this.theme.helper&&this.theme.helper.then&&this.theme.helper.then(function(a){a.helper&&(this.theme.helper=a.helper)}.bind(this)))}return this.theme},getThemeMeta:function(){this._themeMetaCache||this.getTheme();return this._themeMetaCache},themeChanged:function(){var a=
!0,b=this.getModel();this._themeUrl&&b.find({elementType:"CSSImport",url:this._themeUrl},!0)&&(a=!1);a&&(this._themeMetaCache=this.theme=null)},loadTheme:function(a){var f=this.getModel(),k="claro";a&&a.themeSet?k=a.themeSet.desktopTheme:a&&a.theme&&(k="deviceSpecific"==a.theme?"claro":a.theme);a=f.find({elementType:"CSSImport"});var g={},d;b.getThemes(e.getProject()).forEach(function(a){a.name==k&&(d=a);a.files&&a.files.forEach(function(c){g[c]=a})});if(null==d)return console.error("couldnt find default theme, abort!!"),
!1;if(null==d.getFile)return console.error("default theme in invalid state, abort!!"),!1;if(a.some(function(a){for(var c in g)if(-1<a.url.indexOf(c))return!0}))return!0;f.find({elementType:"HTMLElement",tag:"body"},!0).setAttribute("class",d.className);f=d.getFile();if(null==f||null==f.getPath)return console.error("default theme file in invalid state, abort!!"),!0;var c=d.getFile().getPath();d.files.forEach(function(a){a=(new h(c)).removeLastSegments(1).append(a).relativeTo(this.getPath(),!0);this.addModeledStyleSheet(a.toString(),
!0)},this)},_themeChange:function(a){a&&"CSSRule"===a.elementType&&(this.editor.setDirty(!0),this.hotModifyCssRule(a))}})})},"davinci/ve/_ContextCSS":function(){define("dojo/_base/declare dojo/dom-construct dojo/query dojo/_base/connect system/resource ../model/Path ../Workbench ./widget ./States ./utils/pseudoClass dojox/html/_base".split(" "),function(p,m,h,e,b,k,a,f,n,g){return p(null,{getStyleAttributeValues:function(a){for(var c=a?a.getStyleValues():[],b=n.getStateContainersForNode(a.domNode),
f=!0,e=0;e<b.length;e++){var g=n.getState(b[e]);if(g&&g!=n.NORMAL){f=!1;break}}if(!f&&(b=davinci.ve.states.getStatesListCurrent(a.domNode),a=davinci.ve.states.getStyle(a.domNode,b))){for(b=0;b<a.length;b++){var f=a[b],k;for(k in f)for(f=c.length-1;0<=f;f--){var e=c[f],h;for(h in e)if(k==h){c.splice(f,1);break}}}c=c.concat(a)}return c},addPseudoClassSelectors:function(a){var c=function(a){if(a){for(var b=a.cssRules,d=0,d=0;d<b.length;d++){var f=b[d];if(f.type&&f.type===CSSRule.IMPORT_RULE)c(b[d].styleSheet);
else if(b[d].type==CSSRule.STYLE_RULE){var e=b[d].selectorText;if(-1<e.indexOf(":")){e=g.replace(e);f.selectorText=e;a.deleteRule(d);a.insertRule(f.cssText,d);break}}}return!0}return!1};dojo.some(this.getDocument().styleSheets,c)},hotModifyCssRule:function(a){function c(a,b){if(a.href==b)return a;for(var d,f=a.cssRules,e=0;e<f.length&&(!f[e].type||f[e].type!==CSSRule.IMPORT_RULE||!(d=f[e].href==b?f[e].styleSheet:c(f[e].styleSheet,b)));e++);return d}dojo.some(this.getDocument().styleSheets,function(f){var e;
e=b.findResource(a.parent.url).getURL();var k=encodeURI(e);e=a.getSelectorText();-1<e.indexOf(":")&&(e=g.replace(e));e=e.replace(/^\s+|\s+$/g,"");if(f=c(f,k)){for(var h=f.cssRules,k=0;k<h.length;k++)if(h[k].type&&h[k].type==CSSRule.STYLE_RULE&&h[k].selectorText==e){f.deleteRule(k);break}a.properties.length&&(e=a.getText({noComments:!0}),-1<e.indexOf(":")&&(e=g.replace(e)),f.insertRule(e,k));e=!0}else e=!1;return e})},unloadStyleSheet:function(a){var c=this.getGlobal();c&&c.require&&c.require("dojo/query")("link").filter(function(c){return c.getAttribute("href")==
a}).forEach(m.destroy)},addModeledStyleSheet:function(a,c){c||this.loadStyleSheet(a);if(!this.model.hasStyleSheet(a)){var b=-1<a.indexOf("app.css"),f,g=this.model.find({elementType:"HTMLElement",tag:"style"},!0);if(g)for(var g=g.children,k=0;k<g.length;k++)-1<g[k].url.indexOf("app.css")&&(f=g[k]);this.model.addStyleSheet(a,void 0,void 0,b?void 0:f);for(var h in this.model._loadedCSS)this._loadedCSSConnects.push(e.connect(this.model._loadedCSS[h],"onChange",this,"_themeChange"))}},loadStyleSheet:function(a){var c=
this.getDocument(),b=this.getGlobal().require("dojo/query")("link");b.some(function(c){return c.getAttribute("href")===a})||dojo.withDoc(c,function(){var f=c.getElementsByTagName("head")[0],e=-1<a.indexOf("app.css"),g=-1<a.indexOf("content.css"),k=-1<a.indexOf("claro.css"),h=-1<a.indexOf("claro/document.css"),e=!e&&!g&&!h&&!k,n,e=!1,k=m.create("link",{rel:"stylesheet",type:"text/css",href:a});b.forEach(function(a){-1<a.href.indexOf("app.css")?n=a:a.href.indexOf("content.css")});var p;g||(p=n);e?f.appendChild(k):
p?f.insertBefore(k,p):f.appendChild(k)})},getStyle:function(){return this._header?this._header.style:void 0},setStyle:function(a){var c=f.parseStyleValues(a);if(this._header){var b=f.parseStyleValues(this._header.style);if(b)for(var e in b)c[e]||(c[e]=void 0);this._header.style=a}else this._header={style:a}},getAppCssRelativeFile:function(){this._appCssRelativeFile||(this._appCssRelativeFile=this.getRelativeFileString("app.css"));return this._appCssRelativeFile},_addCssForDevice:function(a,c,b){b=
0;for(var f=c.length;b<f;b++){var g=c[b];if(g[0]===a||".*"===g[0]){this.themeCssFiles||(this.themeCssFiles=[]);this.themeCssFiles=this.themeCssFiles.concat(g[2]);this._themePath=new k(this.visualEditor.fileName);this._getCssFiles().forEach(function(a){this._loadedCSSConnects.push(e.connect(a,"onChange",this,"_themeChange"))},this);break}}}})})},"davinci/ve/_ContextJS":function(){define("dojo/_base/declare dojo/_base/xhr dojo/Deferred dojo/promise/all xide/factory xide/types ../html/HTMLElement ../html/HTMLText dojox/html/_base".split(" "),
function(p,m,h,e,b,k,a,f){return p(null,{_getAppJsRelativeFile:function(){this._appJsRelativeFile||(this._appJsRelativeFile=this.getRelativeFileString("app.js"));return this._appJsRelativeFile},addJavaScriptSrc:function(a,f,d,c){var h=/\/dojo.js$/.test(a),p=[];if(!this._didDojo){if(!h&&!c){var r=this;c=(new dojo._Url(this.getDocument().baseURI,a)).toString();p.push(m.get({url:c,sync:!0}).then(function(a){r.getGlobal().eval(a)}))}if(f){c=this.getDocumentElement().getChildElement("head");f={parseOnLoad:!0,
async:!0,packages:this._getLoaderPackages()};var B=this;c=c.getChildElements("script").some(function(c){var f=c.getAttribute("src");if(f&&-1<f.indexOf(d))return h&&(b.publish(k.EVENTS.ON_SET_DOJO_URL,{data:{dojoUrl:a},context:B,editor:B.editor},this),c=c.getAttribute("src"),/\/dojo.js$/.test(c)||B.addHeaderScript(c)),!0;B.addHeaderScript(f)});f.packages=f.packages.concat(this._customWidgetPackages);c?h&&this._updateDojoConfig(f):h?(b.publish(k.EVENTS.ON_SET_DOJO_URL,{data:{dojoUrl:a},context:this,
editor:this.editor},this),this.addHeaderScript(a,{"data-dojo-config":JSON.stringify(f).slice(1,-1).replace(/"/g,"'")}),p.push(this.addJavaScriptModule("dijit/dijit",!0,!0)),p.push(this.addJavaScriptModule("dojo/parser",!0,!0)),this._didDojo=!0):this.addHeaderScript(a)}return e(p)}},addJavaScriptModule:function(a,b,d){var c=new h;d?c.resolve():this.getGlobal().require([a],function(a){c.resolve(a)});if(b){if(!this._requireHtmlElem&&!this.getDocumentElement().getChildElement("head").getChildElements("script").some(function(a){var c=
a.find({elementType:"HTMLText"},!0);if(c&&this._reRequire.test(c.getText()))return this._requireHtmlElem=a,!0},this))return this._requireHtmlElem=this.addHeaderScriptText('require(["'+a+'"]);\n'),c;b=this._requireHtmlElem.find({elementType:"HTMLText"},!0);d=b.getText();var f=d.match(this._reRequire)[1].match(this._reModuleId);-1===f.indexOf(a)&&(f.push(a),d=d.replace(this._reRequire,"require("+JSON.stringify(f,null,"  ")+")"),b.setText(d),b.parent.setScript(d))}return c},addJavaScriptText:function(a,
b,d){if(!d)try{this.getGlobal().eval(a)}catch(c){d=a.length,console.error('eval of "'+a.substr(0,20)+(20<d?"...":"")+'" failed')}b&&this.addHeaderScriptText(a)},addHeaderScript:function(b,f){var d=new a("script");d.addAttribute("type","text/javascript");d.addAttribute("src",b);if(f)for(var c in f)d.addAttribute(c,f[c]);this.getDocumentElement().getChildElement("head").addChild(d)},addHeaderScriptText:function(b){var e=this.getDocumentElement().getChildElement("head"),d,c=e.children,k,h;for(k=c.length-
1;0<=k;k--)if(h=c[k],"HTMLElement"===h.elementType&&"script"===h.tag){d=h.find({elementType:"HTMLText"},!0);break}d||(c=new a("script"),c.addAttribute("type","text/javascript"),c.script="",e.addChild(c),d=new f,c.addChild(d));e=d.getText();-1===e.indexOf(b)&&(d.setText(e+"\n"+b),d.parent.setScript(e+"\n"+b));return d.parent}})})},"davinci/ve/_ContextDelite":function(){define("dojo/_base/declare dojo/_base/lang dojo/_base/xhr dojo/dom-class dojo/dom-construct dojo/dom-style dojo/query dojo/Deferred dojo/promise/all dojo/_base/connect dojo/topic dojo/window xide/utils xide/factory xide/types system/resource ../UserActivityMonitor ../Theme ./ThemeModifier ../commands/CommandStack ./commands/ChangeThemeCommand ./tools/SelectTool ../model/Path ../Runtime ../Workbench ./widget ./Focus ../library ./metadata ./ChooseParent ./Snap ./States ./HTMLWidget ../html/HTMLElement ../html/HTMLText ../workbench/Preferences ./utils/GeomUtils dojo/text!./newfile.template.html ./utils/pseudoClass dojox/html/_base".split(" "),
function(p){return p(null,{})})},"davinci/UserActivityMonitor":function(){define([],function(){return{}})},"davinci/ve/ThemeModifier":function(){define("dojo/_base/declare ../model/Path ../model/Factory ./utils/URLRewrite ./commands/ModifyRuleCommand ./commands/StyleCommand davinci/_common system/resource".split(" "),function(p,m,h,e,b,k,a,f){return p("davinci.ve.ThemeModifier",null,{_getCssFiles:function(){if(this.cssFiles)return this.cssFiles;this.cssFiles=[];if(this.themeCssFiles){var a=this._themePath.getParentPath();
this.cssFiles=this.themeCssFiles.map(function(b){return h.getModel({url:a.append(b).toString(),includeImports:!0})})}return this.cssFiles},_getThemeResource:function(a){a=this._themePath.getParentPath().append(a).toString();return system.resource.findResource(a)},getDeltaRule:function(a){var b=null,d=this.cssFiles[0],c=a.getSelectorText();this.cssFiles.forEach(function(a){var f=a.getRules(c);0<f.length&&(d=a);f.forEach(function(c){c.parent.url==a.url&&(b=c)}.bind(this))}.bind(this));!b&&d&&(b=d.addRule(c+
" {}"));return b},_markDirty:function(a,b){this._dirtyResource||(this._dirtyResource={});this._dirtyResource[a]={time:Date.now(),modelObject:b};this._srcChanged()},getCommandForStyleChange:function(a,f){var d=f||this.getSelection(),c=d.length?d[d.length-1]:void 0;1<d.length&&this.select(c);if("inline"==a.appliesTo){for(var h=[],p=new m(this.fileName),d=0;d<a.values.length;d++)for(var r in a.values[d]){if(e.containsUrl(a.values[d][r])&&!e.isAbsolute(a.values[d][r])){var B=new m(e.getUrl(a.values[d][r]));
if(B.isAbsolute){var y={};y[r]=a.values[d][r]}else B=B.relativeTo(p).toString(),e.replaceUrl(a.values[d][r],B)}else y={},y[r]=a.values[d][r];h.push(y)}c=new k(c,h,a.applyToWhichStates)}else{if("proposal"==a.appliesTo.type){c=this.model.find({elementType:"CSSFile",relativeURL:a.appliesTo.targetFile},!0);if(!c&&this.cssFiles){for(d=0;this.cssFiles.length;d++)if(this.cssFiles[d].url===a.appliesTo.targetFile){c=this.cssFiles[d];break}if(!c)return}c=c.addRule(a.appliesTo.ruleString+" {}")}else c=a.appliesTo.rule;
c=new b(c,a.values,this)}return c},saveDynamicCssFiles:function(b,e){var d=[],c={visit:function(c){"CSSFile"==c.elementType&&c.isDirty()&&d.push(c.save(e).then(function(a){e||f.findResource(c.url).removeWorkingCopy();c.dirtyResource=e;return c},function(b){console.error(dojo.string.substitute(a.errorSavingFile,[c.url,b]));return b}));return!1}};b&&b.forEach(function(a){a.visit(c)});return d},dirtyDynamicCssFiles:function(a){if(null==a)return console.error("dirtyDynamicCssFiles:invalid arg"),!1;var b=
!1,d={visit:function(a){"CSSFile"==a.elementType&&a.isDirty()&&(b=!0);return b}};a&&a.forEach(function(a){if(b)return b;a.visit(d)});return b},close:function(){this.cssFiles&&this.cssFiles.forEach(function(a){a.close();require("davinci/model/Factory").closeModel(a)}.bind(this));delete this.cssFiles},destroy:function(){this.close()}})})},"davinci/ve/commands/ModifyRuleCommand":function(){define(["dojo/_base/declare","../States","../../html/CSSModel"],function(p,m,h){var e=function(b,e){b.removeAllProperties();
e.forEach(function(a){b.addProperty(a.name,a.value)})};return p("davinci.ve.commands.ModifyRuleCommand",null,{name:"modify rule",constructor:function(b,e,a){this.cssRule=b;this.values=e;this.context=a},execute:function(b){this.context||(this.context=b);if(this.cssRule&&this.values&&this.context){this._oldValues=this.cssRule.getProperties();b=this.cssRule;var e=this.values,a,f,n=[],g=[];for(a=0;a<e.length;a++)for(var d in e[a])(f=b.getProperty(d))&&g.push(f),b.removeProperty(d);for(a=0;a<b.properties.length;a++){f=
b.properties[a];var c={};c[f.name]=f.value;n.push(c)}e=n.concat(dojo.clone(e));f=h.shorthand;for(a=n=0;a<f.length;a++){a:{for(var c=f[a][0],m=0;m<e.length;m++)if(e[m].hasOwnProperty(c)){c=m;break a}c=-1}-1<c&&(m=e[c],e.splice(c,1),e.splice(n,0,m),n++)}for(a=b.properties.length-1;0<=a;a--)if(f=b.properties[a])g.push(b.getProperty(f.name)),b.removeProperty(f.name);for(a=0;a<e.length;a++)for(d in e[a])if(e[a][d]&&""!==e[a][d])for(b.addProperty(d,e[a][d]),f=0;f<g.length;f++)if(g[f].name===d){n=b.getProperty(d,
e[a][d]);g[f].comment&&(n.comment=g[f].comment);g[f].postComment&&(n.postComment=g[f].postComment);g.splice(f,1);break}this._setDirty()}},undo:function(){this.cssRule&&this._oldValues&&this.context&&(e(this.cssRule,this._oldValues),this._setDirty())},_setDirty:function(){this.cssRule.getCSSFile().setDirty(!0);this.context.editor.setDirty(!0);m.resetState(this.context.rootNode);this.context._selection&&(this.context._forceSelectionChange=!0)}})})},"davinci/ve/tools/SelectTool":function(){define("dojo/_base/declare dojo/dom-geometry ../../Workbench ../../workbench/Preferences ./_Tool ../widget ../metadata dojo/dnd/Mover ../../XPathUtils ../../html/HtmlFileXPathAdapter ../Snap ../../commands/CompoundCommand ../commands/AddCommand ../commands/ReparentCommand ../commands/MoveCommand ../commands/ResizeCommand ../commands/ModifyCommand ../tools/CreateTool ../States ../utils/GeomUtils".split(" "),
function(p,m,h,e,b,k,a,f,n,g,d,c,q,w,r,B,y,A,v,x){return p("davinci.ve.tools.SelectTool",b,{CONSTRAIN_MIN_DIST:3,activate:function(a){this._context=a},deactivate:function(){this._setTarget(null)},onMouseDown:function(c){var b=this._context;if(!b.isFocusNode(c.target)){this._shiftKey=c.shiftKey;this._sKey=this._spaceKey=!1;this._areaSelectClear();var d=this._checkFocusXY(c.pageX,c.pageY);d&&"NONE"!==a.getAllowedChild(d.type)[0]&&(d=null);var e=this._getTarget()||k.getEnclosingWidget(c.target);for(d||
(d=e);d&&!d.getContext();)d=k.getEnclosingWidget(d.domNode.parentNode);if(d)if(dojo.isMac&&c.ctrlKey||2==c.button)b.select(d);else{for(var g=b.getSelection(),h=null,n=0;n<g.length;n++){for(var q=g[n],p=d;p&&p!=b.rootWidget;){if(p==q){h=q;break}p=p.getParent()}if(h)break}p=null;n=dojo.isMac?c.metaKey:c.ctrlKey;this._mouseDownInfo=null;if(0<=dojo.indexOf(g,d))n?b.deselect(d):(p=d,this._mouseDownInfo={widget:d,eventTargetWidget:e,pageX:c.pageX,pageY:c.pageY,dateValue:Date.now()});else if(n){if(d==b.rootWidget)return;
b.select(d,n)}else if(h)p=h,this._mouseDownInfo={widget:d,eventTargetWidget:e,pageX:c.pageX,pageY:c.pageY,dateValue:Date.now()};else{if(d==b.rootWidget){b.deselect();this._areaSelectInit(c.pageX,c.pageY);return}"NONE"===a.getAllowedChild(d.type)[0]?(b.select(d,n),p=d):(this._mouseDownInfo={widget:d,eventTargetWidget:e,pageX:c.pageX,pageY:c.pageY,dateValue:Date.now()},this._areaSelectInit(c.pageX,c.pageY))}if(p&&(d=b.getDocument(),g=d.defaultView&&d.defaultView.dojo)&&(g=g.style(p.domNode,"position"),
this._moverAbsolute="absolute"==g,g=p.getParent(),e=p.getHelper(),!(e&&e.disableDragging&&e.disableDragging(p)||g&&g.isLayout&&g.isLayout()))){this._moverWidget=p;this._moverWidgets=[p];this._moverLastEventTarget=null;b._chooseParent.setProposedParentWidget(null);g=b.getSelection();this._moverStartLocations=[];this._moverStartLocationsRel=[];for(n=0;n<g.length;n++){g[n]!=p&&this._moverWidgets.push(g[n]);h=null;h=(h=g[n].getHelper())&&h.getMarginBoxPageCoords?h.getMarginBoxPageCoords(g[n]):x.getMarginBoxPageCoordsCached(g[n].domNode);
this._moverStartLocations.push(h);if((q=g[n].domNode.offsetParent)&&"BODY"!=q.tagName)var r=x.getBorderBoxPageCoordsCached(q),w=m.getBorderExtents(q),q=h.l-(r.l+w.l),h=h.t-(r.t+w.t);else q=h.l,h=h.t;this._moverStartLocationsRel.push({l:q,t:h})}n=p.domNode;h=n.offsetWidth;g=n.offsetHeight;q=null;e&&e.getMarginBoxPageCoords?(q=e.getMarginBoxPageCoords(p),h=q.w,g=q.h):q=x.getMarginBoxPageCoordsCached(n);n=q.l;e=q.t;p=q.w;q=q.h;r=b.getScrollOffset();n+=r.x;e+=r.y;this._moverAbsolute?this._moverDragDiv=
dojo.create("div",{className:"selectToolDragDiv",style:"left:"+n+"px;top:"+e+"px;width:"+p+"px;height:"+q+"px"},b.rootNode):(p=h+10,g+=10,h=p-8,q=g-8,this._moverDragDiv=dojo.create("div",{className:"flowDragOuter",style:"left:"+(n-5)+"px;top:"+(e-5)+"px;width:"+p+"px;height:"+g+"px"},b.rootNode),dojo.create("div",{className:"flowDragInner",style:"width:"+h+"px;height:"+q+"px"},this._moverDragDiv));this._mover=new f(this._moverDragDiv,c,this);this._altKey=c.altKey;this._updateMoveCursor();(c=document.getElementById("maqetta_project_select"))&&
c.focus();d.defaultView.focus()}}}},onMouseUp:function(a){var c=this._context;if(!c.isFocusNode(a.target)){var b=1===a.which,d=Date.now();this._mouseDownInfo&&(10>=Math.abs(a.pageX-this._mouseDownInfo.pageX)&&10>=Math.abs(a.pageY-this._mouseDownInfo.pageY)&&750>=d-this._mouseDownInfo.dateValue&&(this._context.select(this._mouseDownInfo.eventTargetWidget?this._mouseDownInfo.eventTargetWidget:this._mouseDownInfo.widget),b=!1),this._mouseDownInfo=null);if(this._lastMouseUp&&10>=Math.abs(a.pageX-this._lastMouseUp.pageX)&&
10>=Math.abs(a.pageY-this._lastMouseUp.pageY)&&750>=d-this._lastMouseUp.dateValue)this.onDblClick(a);this._lastMouseUp={pageX:a.pageX,pageY:a.pageY,dateValue:d};c.getScrollOffset();this._areaSelect&&b&&this._areaSelectSelectWidgets(a.pageX,a.pageY);this._areaSelectClear()}},onDblClick:function(a){if(!this._context.isFocusNode(a.target)){for(var c="selectToolDragDiv"===a.target.getAttribute("class")?this._context.getSelection()[0]:this._getTarget()||k.getEnclosingWidget(a.target);c&&!c.getContext();)c=
k.getEnclosingWidget(c.domNode.parentNode);if(c){var b=this._context.getSelection(),d=dojo.isMac?a.ctrlKey:a.metaKey;0<=dojo.indexOf(b,c)?d&&2!==a.button?this._context.deselect(c):2!==a.button&&this._context.select(c,null,!0):this._context.select(c,d,!0)}}},onMouseMove:function(a){this._context.isFocusNode(a.target)||(this._setTarget(a.target,a),this._areaSelect&&(1===a.which?this._areaSelectUpdate(a.pageX,a.pageY):this._areaSelectClear()))},onMouseOver:function(a){try{dojo.hasClass(a.target,"editFeedback")||
dojo.hasClass(a.target,"selectToolDragDiv")||(this._onMouseOverEventTargetXPath=n.getXPath(a.target)),this._setTarget(a.target,a)}catch(c){}},onMouseOut:function(a){try{this._setTarget(a.relatedTarget,a)}catch(c){}},onExtentChange:function(b){var d=b.index,f=b.newBox,e=b.copy,g=b.oldBoxes,h=b.applyToWhichStates,n,p=this._context,v=p._chooseParent,y=p.getSelection(),J=[];if(!(y.length<=d)){var F=y[d],K=void 0;if("w"in f||"h"in f){var d=a.queryDescriptor(F.type,"resizable"),M,P;b=F.domNode;var R=b.ownerDocument.defaultView.getComputedStyle(b),
v=x.getMarginExtents(b,R),O=m.getBorderExtents(b,R);b=m.getPadExtents(b,R);"number"==typeof f.w&&(f.w-=v.w+O.w+b.w);"number"==typeof f.h&&(f.h-=v.h+O.h+b.h);switch(d){case "width":M=f.w;break;case "height":P=f.h;case "both":M=f.w,P=f.h}d=new B(F,M,P,h);K||(K=new c);K.add(d);d=dojo.style(F.domNode,"position");"l"in f&&"t"in f&&"absolute"==d&&(M=f.l,f=f.t,f=new r(F,M,f,null,null,h),K.add(f))}else if(b=F.getStyleNode(),"absolute"!=dojo.style(b,"position")){var Q=v.getProposedParentWidget();if(Q){K||
(K=new c);var W=null;b=p.reorderPreserveSiblingOrder(y);dojo.forEach(b,function(a){Q.refChild&&(null!==W?n=W+1:(n=Q.parent.getChildren().indexOf(Q.refChild),0<=n?Q.refAfter&&n++:n=null),W=n);if(e){var c,b=a.getData({identify:!1});b.context=p;dojo.withDoc(p.getDocument(),function(){c=k.createWidget(b)},this);c&&(K.add(new q(c,Q.parent,n)),A.prototype.checkAddToCurrentState(K,c),J.push(c))}else K.add(new w(a,Q.parent,n)),J.push(a)},this);p.select(null)}else console.error("SelectTool: ppw is null")}else{var X=
[],Y=[];dojo.forEach(y,function(a,c){X[c]=y[c].getParent();Y[c]=X[c].indexOf(a)});M=f.l;f=f.t;K||(K=new c);var U=(Q=v.getProposedParentWidget())?Q.parent:null;b=F.getParent();P=void 0;U&&U!=b&&(P=U);var Z=M-g[0].l,aa=f-g[0].t;e&&(b=p.reorderPreserveSiblingOrder(y),dojo.forEach(b,function(a){var c=a.getParent();if(c){for(var b=c.getChildren(),d=0;d<b.length&&b[d]!=a;d++);var f,e=a.getData({identify:!1});e.context=p;dojo.withDoc(p.getDocument(),function(){f=k.createWidget(e)},this);f&&(U?K.add(new q(f,
U,-1)):K.add(new q(f,c,d)),A.prototype.checkAddToCurrentState(K,f),J.push(f))}},this),newWidget=J[d]);var S=e?newWidget:F,T=new r(S,M,f,null,g[d],h);K.add(T);P&&(K.add(new w(S,U,"last")),K.add(new r(S,M,f,null,null,h)));dojo.forEach(y,dojo.hitch(this,function(a,c){S=e?J[c]:a;if(a!=F){var b=g[c].l+Z,d=g[c].t+aa;if("absolute"==a.getStyleNode().style.position){var f=new r(S,b,d,T,g[c],h,!0);K.add(f)}f=a.getParent();U&&U!=f&&(K.add(new w(S,U,"last")),K.add(new r(S,b,d,null,null,h,!0)))}}));e&&dojo.forEach(y,
dojo.hitch(this,function(a,c){K.add(new w(y[c],X[c],Y[c]));K.add(new r(y[c],g[c].l,g[c].t,null,g[c],h,!0))}))}K?(p.getCommandStack().execute(K),dojo.forEach(J,function(a,c){p.select(a,0<c)},this)):p.select(F)}},_updateMoveCursor:function(){var a=this._context.getDocument().body;this._moverDragDiv&&(this._altKey?dojo.addClass(a,"selectToolDragCopy"):dojo.addClass(a,"selectToolDragMove"))},onKeyDown:function(a){if(a)switch(dojo.stopEvent(a),a.keyCode){case dojo.keys.SHIFT:this._shiftKey=!0;d.clearSnapLines(this._context);
break;case dojo.keys.ALT:this._altKey=!0;this._updateMoveCursor();break;case dojo.keys.SPACE:this._spaceKey=!0;break;case 83:this._sKey=!0;break;case dojo.keys.TAB:this._moveFocus(a)&&dojo.stopEvent(a);break;case dojo.keys.RIGHT_ARROW:case dojo.keys.LEFT_ARROW:case dojo.keys.DOWN_ARROW:case dojo.keys.UP_ARROW:this._move(a)}},onKeyUp:function(a){if(a&&this._moverWidget)switch(dojo.stopEvent(a),a.keyCode){case dojo.keys.SHIFT:this._shiftKey=!1;break;case dojo.keys.ALT:this._altKey=!1;this._updateMoveCursor();
break;case dojo.keys.SPACE:this._spaceKey=!1;break;case 83:this._sKey=!1}},_move:function(a){var b=this._context.getSelection();if(0!==b.length){var d=0,f=0,e=a.shiftKey?10:1;switch(a.keyCode){case dojo.keys.RIGHT_ARROW:d=e;break;case dojo.keys.LEFT_ARROW:d=-e;break;case dojo.keys.DOWN_ARROW:f=e;break;case dojo.keys.UP_ARROW:f=-e}var g=new c;dojo.forEach(b,function(a){var c=null,c=(c=a.getHelper())&&c.getMarginBoxPageCoords?c.getMarginBoxPageCoords(a):x.getMarginBoxPageCoords(a.domNode);g.add(new r(a,
c.l+d,c.t+f))},this);g.isEmpty()||(this._context.getCommandStack().execute(g),this._updateTargetOverlays())}},_moveFocus:function(a){a=a.shiftKey?-1:1;for(var c=this._context.getSelection()[0],b=this._context.getTopWidgets(),c=c?dojo.indexOf(b,c)+a:0<a?0:b.length-1,d=b[c];d&&!d.getContext();)c+=a,d=b[c];d&&this._context.select(d);return d},onMove:function(a,c,b){this._mouseDownInfo=null;a=this._context;var d=a._chooseParent,f=a.getSelection(),g=f.indexOf(this._moverWidget);if(0>g)console.error("SelectTool.js onMove error. move widget is not selected");
else{this._selectionHideFocus();var k=!1,n=d.getProposedParentWidget();if(n&&n.parent&&n.parent.domNode){var m=n.parent.domNode;if("BODY"==n.parent.domNode.tagName)k=!0;else for(n=b.target;n&&"BODY"!=n.tagName;){if(n==m){k=!0;break}n=n.parentNode}}k&&b.target==this._moverLastEventTarget||d.setProposedParentWidget(null);this._moverLastEventTarget=b.target;this._moverBox=c;this._moverDragDiv.style.left=c.l+"px";this._moverDragDiv.style.top=c.t+"px";if(this._moverAbsolute)for(k=c.l-this._moverStartLocations[g].l,
c=c.t-this._moverStartLocations[g].t,g=Math.abs(k),m=Math.abs(c),this._shiftKey&&(g>=this.CONSTRAIN_MIN_DIST||m>=this.CONSTRAIN_MIN_DIST)&&(g>m?c=0:k=0),g=0;g<f.length;g++)m=f[g],n=this._moverStartLocationsRel[g].t,m.domNode.style.left=this._moverStartLocationsRel[g].l+k+"px",m.domNode.style.top=n+c+"px";k=this._moverWidget.type;f=this._moverWidget.getParent();(c=d.parentListDivGet())||(c=d.parentListDivCreate({widgetType:k,absolute:this._moverAbsolute,doCursor:!this._moverAbsolute,beforeAfter:null,
currentParent:f}));if(g=a.getParentIframe()){offsetTop=offsetLeft=0;for(offsetNode=g;offsetNode&&"BODY"!=offsetNode.tagName;)offsetLeft+=offsetNode.offsetLeft,offsetTop+=offsetNode.offsetTop,offsetNode=offsetNode.offsetParent;g=x.getScrollLeft(a.rootNode.parentNode);m=x.getScrollTop(a.rootNode.parentNode);c.style.left=offsetLeft+b.pageX-g+"px";c.style.top=offsetTop+b.pageY-m+"px"}c=e.getPreferences("davinci.ve.editorPrefs",h.getProject());c=!this._shiftKey&&c.snap&&this._moverAbsolute;g=a.getPreference("showPossibleParents");
g=!0;d=d.isSpaceKeyDown()||this._spaceKey;d=!g&&d||g&&!d;k={type:k};g={x:b.pageX,y:b.pageY};m=null;m=(m=this._moverWidget.getHelper())&&m.getMarginBoxPageCoords?m.getMarginBoxPageCoords(this._moverWidget):x.getMarginBoxPageCoords(this._moverWidget.domNode);a.dragMoveUpdate({widgets:this._moverWidgets,data:k,eventTarget:b.target,position:g,absolute:this._moverAbsolute,currentParent:f,rect:m,doSnapLinesX:c,doSnapLinesY:c,doFindParentsXY:d,doCursor:!this._moverAbsolute})}},onFirstMove:function(a){},
onMoveStart:function(a){},onMoveStop:function(a){a=this._context;var c=this._context._chooseParent;this._moverWidget&&this._moverWidget._srcElement&&n.getXPath(this._moverWidget._srcElement,g);var b=!0,d,f;this._moverBox&&this._moverWidget&&this._moverWidget.domNode?(f={l:this._moverBox.l,t:this._moverBox.t},d=a.getSelection().indexOf(this._moverWidget),0>d&&(b=!1)):b=!1;if(b){b=void 0;if(this._sKey)for(var e=v.getStatesListCurrent(this._moverWidget.domNode),k=0;k<e.length;k++){if(e[k]){b=e[k];break}}else b=
v.propertyDefinedForAnyCurrentState(this._moverWidget.domNode,["left","top","right","bottom"]);var h=this._getPageLeftTop(this._moverWidget.domNode.offsetParent),e=a.getScrollOffset(),k=f.t-h.t-this._moverStartLocations[d].t,h=Math.abs(f.l-h.l-this._moverStartLocations[d].l),k=Math.abs(k);this._shiftKey&&(h>=this.CONSTRAIN_MIN_DIST||k>=this.CONSTRAIN_MIN_DIST)&&(h>k?f.t=this._moverStartLocations[d].t:f.l=this._moverStartLocations[d].l);f.t-=e.y;f.l-=e.x;this.onExtentChange({index:d,newBox:f,oldBoxes:this._moverStartLocations,
copy:this._altKey,applyToWhichStates:b})}this._moverDragDiv&&((d=this._moverDragDiv.parentNode)&&d.removeChild(this._moverDragDiv),this._moverDragDiv=null);this._mover=this._moverBox=this._moverWidget=this._moverWidgets=this._moverLastEventTarget=null;this._updateMoveCursor();a.dragMoveCleanup();c.parentListDivDelete();this._selectionShowFocus();c=n.toCssPath(this._onMouseOverEventTargetXPath);a=a.getDocument();(a=c?a.querySelector(c):null)&&this._setTarget(a)},_getPageLeftTop:function(a){if(a){var c=
a.offsetLeft,b=a.offsetTop;for(a=a.offsetParent;a&&"BODY"!=a.tagName;)c+=a.offsetLeft,b+=a.offsetTop,a=a.offsetParent;return{l:c,t:b}}return{l:0,t:0}},_areaSelectInit:function(a,c){this._areaSelect={x:a,y:c,attached:!1};this._areaSelectDiv=dojo.create("div",{className:"areaSelectDiv",style:"display:none"})},_areaSelectUpdate:function(a,c){if(this._areaSelect&&this._areaSelectDiv){var b=this._getBounds(this._areaSelect.x,this._areaSelect.y,a,c),d=this._areaSelectDiv.style;d.display="block";d.left=
b.l+"px";d.top=b.t+"px";d.width=b.w+"px";d.height=b.h+"px";this._areaSelect.attached||(this._context.rootNode.appendChild(this._areaSelectDiv),this._areaSelect.attached=!0)}},_areaSelectClear:function(){this._areaSelect=null;if(this._areaSelectDiv){var a=this._areaSelectDiv.parentNode;a&&a.removeChild(this._areaSelectDiv);this._areaSelectDiv=null}},_areaSelectSelectWidgets:function(a,c){if(this._areaSelect){var b=this._getBounds(this._areaSelect.x,this._areaSelect.y,a,c),d=b.l,f=b.t,e=b.w,b=b.h,g=
this._context;g.deselect();for(var g=g.getTopWidgets(),k=0;k<g.length;k++)this._areaSelectRecursive(g[k],d,f,e,b)}},_areaSelectRecursive:function(a,c,b,d,f){if(a&&a.domNode){var e=x.getBorderBoxPageCoordsCached(a.domNode);if(e.l>=c&&e.t>=b&&e.l+e.w<=c+d&&e.t+e.h<=b+f)this._context.select(a,!0);else for(a=a.getChildren(),e=0;e<a.length;e++)this._areaSelectRecursive(a[e],c,b,d,f)}},_getBounds:function(a,c,b,d){var f={};a<=b?(f.l=a,f.w=b-a):(f.l=b,f.w=a-b);c<=d?(f.t=c,f.h=d-c):(f.t=d,f.h=c-d);return f},
_checkFocusXY:function(a,c){for(var b=this._context,d=b.getSelection(),f=0;f<d.length;f++){var e=b._focuses[f].getBounds();if(a>=e.l&&a<=e.l+e.w&&c>=e.t&&c<=e.t+e.h)return d[f]}return null},_selectionHideFocus:function(){for(var a=this._context,c=a.getSelection(),b=0;b<c.length;b++)a._focuses[b].hide()},_selectionShowFocus:function(){for(var a=this._context,c=a.getSelection(),b=0;b<c.length;b++)a._focuses[b].show(c[b],{})}})})},"dojo/dnd/Mover":function(){define("../_base/array ../_base/declare ../_base/lang ../sniff ../_base/window ../dom ../dom-geometry ../dom-style ../Evented ../on ../touch ./common ./autoscroll".split(" "),
function(p,m,h,e,b,k,a,f,n,g,d,c,q){return m("dojo.dnd.Mover",[n],{constructor:function(a,c,b){function f(a){a.preventDefault();a.stopPropagation()}this.node=k.byId(a);this.marginBox={l:c.pageX,t:c.pageY};this.mouseButton=c.button;c=this.host=b;a=a.ownerDocument;this.events=[g(a,d.move,h.hitch(this,"onFirstMove")),g(a,d.move,h.hitch(this,"onMouseMove")),g(a,d.release,h.hitch(this,"onMouseUp")),g(a,"dragstart",f),g(a.body,"selectstart",f)];q.autoScrollStart(a);if(c&&c.onMoveStart)c.onMoveStart(this)},
onMouseMove:function(a){q.autoScroll(a);var c=this.marginBox;this.host.onMove(this,{l:c.l+a.pageX,t:c.t+a.pageY},a);a.preventDefault();a.stopPropagation()},onMouseUp:function(a){(e("webkit")&&e("mac")&&2==this.mouseButton?0==a.button:this.mouseButton==a.button)&&this.destroy();a.preventDefault();a.stopPropagation()},onFirstMove:function(c){var d=this.node.style,e,g=this.host;switch(d.position){case "relative":case "absolute":e=Math.round(parseFloat(d.left))||0;d=Math.round(parseFloat(d.top))||0;break;
default:d.position="absolute";d=a.getMarginBox(this.node);e=b.doc.body;var k=f.getComputedStyle(e),h=a.getMarginBox(e,k),k=a.getContentBox(e,k);e=d.l-(k.l-h.l);d=d.t-(k.t-h.t)}this.marginBox.l=e-this.marginBox.l;this.marginBox.t=d-this.marginBox.t;if(g&&g.onFirstMove)g.onFirstMove(this,c);this.events.shift().remove()},destroy:function(){p.forEach(this.events,function(a){a.remove()});var a=this.host;if(a&&a.onMoveStop)a.onMoveStop(this);this.events=this.node=this.host=null}})})},"dojo/touch":function(){define("./_base/kernel ./aspect ./dom ./dom-class ./_base/lang ./on ./has ./mouse ./domReady ./_base/window".split(" "),
function(p,m,h,e,b,k,a,f,n,g){function d(a,c,b){return B&&b?function(a,c){return k(a,b,c)}:w?function(b,d){var f=k(b,c,d),e=k(b,a,function(a){(!D||(new Date).getTime()>D+1E3)&&d.call(this,a)});return{remove:function(){f.remove();e.remove()}}}:function(c,b){return k(c,a,b)}}function c(a){do if(a.dojoClick)return a.dojoClick;while(a=a.parentNode)}function q(a,b,d){if(A=!a.target.disabled&&c(a.target))v=a.target,x=a.touches?a.touches[0].pageX:a.clientX,u=a.touches?a.touches[0].pageY:a.clientY,z=("object"==
typeof A?A.x:"number"==typeof A?A:0)||4,C=("object"==typeof A?A.y:"number"==typeof A?A:0)||4,y||(a=function(a){g.doc.addEventListener(a,function(c){c._dojo_click||!((new Date).getTime()<=I+1E3)||"INPUT"==c.target.tagName&&e.contains(c.target,"dijitOffScreen")||(c.stopPropagation(),c.stopImmediatePropagation&&c.stopImmediatePropagation(),"click"!=a||"INPUT"==c.target.tagName&&"radio"!=c.target.type&&"checkbox"!=c.target.type||"TEXTAREA"==c.target.tagName||"AUDIO"==c.target.tagName||"VIDEO"==c.target.tagName||
c.preventDefault())},!0)},y=!0,g.doc.addEventListener(b,function(a){A=A&&a.target==v&&Math.abs((a.touches?a.touches[0].pageX:a.clientX)-x)<=z&&Math.abs((a.touches?a.touches[0].pageY:a.clientY)-u)<=C},!0),g.doc.addEventListener(d,function(a){if(A){I=(new Date).getTime();var c=a.target;"LABEL"===c.tagName&&(c=h.byId(c.getAttribute("for"))||c);setTimeout(function(){k.emit(c,"click",{bubbles:!0,cancelable:!0,_dojo_click:!0})})}},!0),a("click"),a("mousedown"),a("mouseup"))}var w=a("touch"),r=5>a("ios"),
B=navigator.msPointerEnabled,y,A,v,x,u,z,C,I,D,H;w&&(B?n(function(){g.doc.addEventListener("MSPointerDown",function(a){q(a,"MSPointerMove","MSPointerUp")},!0)}):n(function(){function c(d){var f=b.delegate(d,{bubbles:!0});6<=a("ios")&&(f.touches=d.touches,f.altKey=d.altKey,f.changedTouches=d.changedTouches,f.ctrlKey=d.ctrlKey,f.metaKey=d.metaKey,f.shiftKey=d.shiftKey,f.targetTouches=d.targetTouches);return f}H=g.body();g.doc.addEventListener("touchstart",function(a){D=(new Date).getTime();var c=H;
H=a.target;k.emit(c,"dojotouchout",{relatedTarget:H,bubbles:!0});k.emit(H,"dojotouchover",{relatedTarget:c,bubbles:!0});q(a,"touchmove","touchend")},!0);k(g.doc,"touchmove",function(a){D=(new Date).getTime();var b=g.doc.elementFromPoint(a.pageX-(r?0:g.global.pageXOffset),a.pageY-(r?0:g.global.pageYOffset));b&&(H!==b&&(k.emit(H,"dojotouchout",{relatedTarget:b,bubbles:!0}),k.emit(b,"dojotouchover",{relatedTarget:H,bubbles:!0}),H=b),k.emit(b,"dojotouchmove",c(a))||a.preventDefault())});k(g.doc,"touchend",
function(a){D=(new Date).getTime();var b=g.doc.elementFromPoint(a.pageX-(r?0:g.global.pageXOffset),a.pageY-(r?0:g.global.pageYOffset))||g.body();k.emit(b,"dojotouchend",c(a))})}));m={press:d("mousedown","touchstart","MSPointerDown"),move:d("mousemove","dojotouchmove","MSPointerMove"),release:d("mouseup","dojotouchend","MSPointerUp"),cancel:d(f.leave,"touchcancel",w?"MSPointerCancel":null),over:d("mouseover","dojotouchover","MSPointerOver"),out:d("mouseout","dojotouchout","MSPointerOut"),enter:f._eventHandler(d("mouseover",
"dojotouchover","MSPointerOver")),leave:f._eventHandler(d("mouseout","dojotouchout","MSPointerOut"))};return p.touch=m})},"dojo/dnd/common":function(){define(["../sniff","../_base/kernel","../_base/lang","../dom"],function(p,m,h,e){var b=h.getObject("dojo.dnd",!0);b.getCopyKeyState=function(b){return b[p("mac")?"metaKey":"ctrlKey"]};b._uniqueId=0;b.getUniqueId=function(){var k;do k=m._scopeName+"Unique"+ ++b._uniqueId;while(e.byId(k));return k};b._empty={};b.isFormElement=function(b){b=b.target;3==
b.nodeType&&(b=b.parentNode);return 0<=" a button textarea input select option ".indexOf(" "+b.tagName.toLowerCase()+" ")};return b})},"dojo/dnd/autoscroll":function(){define("../_base/lang ../sniff ../_base/window ../dom-geometry ../dom-style ../window".split(" "),function(p,m,h,e,b,k){var a={};p.setObject("dojo.dnd.autoscroll",a);a.getViewport=k.getBox;a.V_TRIGGER_AUTOSCROLL=32;a.H_TRIGGER_AUTOSCROLL=32;a.V_AUTOSCROLL_VALUE=16;a.H_AUTOSCROLL_VALUE=16;var f,n=h.doc,g=Infinity,d=Infinity;a.autoScrollStart=
function(a){n=a;f=k.getBox(n);a=h.body(n).parentNode;g=Math.max(a.scrollHeight-f.h,0);d=Math.max(a.scrollWidth-f.w,0)};a.autoScroll=function(c){var b=f||k.getBox(n),e=h.body(n).parentNode,m=0,p=0;c.clientX<a.H_TRIGGER_AUTOSCROLL?m=-a.H_AUTOSCROLL_VALUE:c.clientX>b.w-a.H_TRIGGER_AUTOSCROLL&&(m=Math.min(a.H_AUTOSCROLL_VALUE,d-e.scrollLeft));c.clientY<a.V_TRIGGER_AUTOSCROLL?p=-a.V_AUTOSCROLL_VALUE:c.clientY>b.h-a.V_TRIGGER_AUTOSCROLL&&(p=Math.min(a.V_AUTOSCROLL_VALUE,g-e.scrollTop));window.scrollBy(m,
p)};a._validNodes={div:1,p:1,td:1};a._validOverflow={auto:1,scroll:1};a.autoScrollNodes=function(c){for(var d,f,g,k,n,p=0,v=0,x=c.target;x;){if(1==x.nodeType&&x.tagName.toLowerCase()in a._validNodes){g=b.getComputedStyle(x);n=g.overflowX.toLowerCase()in a._validOverflow;k=g.overflowY.toLowerCase()in a._validOverflow;if(n||k)d=e.getContentBox(x,g),f=e.position(x,!0);if(n){g=Math.min(a.H_TRIGGER_AUTOSCROLL,d.w/2);n=c.pageX-f.x;if(m("webkit")||m("opera"))n+=h.body().scrollLeft;p=0;0<n&&n<d.w&&(n<g?p=
-g:n>d.w-g&&(p=g),x.scrollLeft+=p)}if(k){k=Math.min(a.V_TRIGGER_AUTOSCROLL,d.h/2);g=c.pageY-f.y;if(m("webkit")||m("opera"))g+=h.body().scrollTop;v=0;0<g&&g<d.h&&(g<k?v=-k:g>d.h-k&&(v=k),x.scrollTop+=v)}if(p||v)return}try{x=x.parentNode}catch(u){x=null}}a.autoScroll(c)};return a})},"davinci/ve/Snap":function(){define(["davinci/ve/utils/GeomUtils"],function(p){dojo.getObject("davinci.ve.Snap",!0);return davinci.ve.Snap={updateSnapLinesBeforeTraversal:function(m,h){m._snapX=null;m._snapY=null;if(m._lastSnapBox&&
m._lastSnapBox.l==h.l&&m._lastSnapBox.t==h.t&&m._lastSnapBox.w==h.w&&m._lastSnapBox.h==h.h)return!1;snapBox={l:h.l,t:h.t,w:h.w,h:h.h,c:h.l+h.w/2,r:h.l+h.w,m:h.t+h.h/2,b:h.t+h.h};m._lastSnapBox=snapBox;return!0},findSnapOpportunities:function(m,h,e,b,k){function a(a,b,d,f){f<c&&(m._snapX={type:a,typeRefObj:a,typeCurrObj:b,x:d,widget:h,delta:f},c=f,m._snapXLast=m._snapX)}function f(a,c,b,d){d<q&&(m._snapY={type:a,typeRefObj:a,typeCurrObj:c,y:b,widget:h,delta:d},q=d,m._snapYLast=m._snapY)}e=m._lastSnapBox;
var n=h.domNode;if("BODY"!=n.tagName){var g=null,d=h.getHelper(),g=d&&d.getMarginBoxPageCoords?d.getMarginBoxPageCoords(h):p.getMarginBoxPageCoordsCached(n);m.getScrollOffset();g.x=g.l;g.y=g.t;var c=m._snapX?m._snapX.delta:6,q=m._snapY?m._snapY.delta:6,n={snapRect:{l:g.x,c:g.x+g.w/2,r:g.x+g.w,t:g.y,m:g.y+g.h/2,b:g.y+g.h}};d&&d.getSnapInfo&&(n=d.getSnapInfo(h,n));var d=n.snapRect,w;if(d){if(b){b=m._snapXLast&&m._snapXLast.widget===h?Infinity:75;g=Math.abs(d.t-e.t);w=Math.abs(d.t-e.b);var r=Math.abs(d.b-
e.t),B=Math.abs(d.b-e.b);if(g<=b||w<=b||r<=b||B<=b)b=Math.abs(d.l-e.l),g=Math.abs(d.c-e.c),w=Math.abs(d.r-e.r),a("left","left",d.l,b),a("center","center",d.c,g),a("right","right",d.r,w),a("left","center",d.c,Math.abs(d.c-e.l)),a("left","right",d.r,Math.abs(d.r-e.l)),a("right","left",d.l,Math.abs(d.l-e.r)),a("right","center",d.c,Math.abs(d.c-e.r)),a("center","left",d.l,Math.abs(d.l-e.c)),a("center","right",d.r,Math.abs(d.r-e.c))}k&&(k=m._snapYLast&&m._snapYLast.widget===h?Infinity:75,b=Math.abs(d.l-
e.l),g=Math.abs(d.l-e.r),w=Math.abs(d.r-e.l),r=Math.abs(d.r-e.r),b<=k||g<=k||w<=k||r<=k)&&(b=Math.abs(d.t-e.t),g=Math.abs(d.m-e.m),w=Math.abs(d.b-e.b),f("top","top",d.t,b),f("middle","middle",d.m,g),f("bottom","bottom",d.b,w),f("top","middle",d.m,Math.abs(d.m-e.t)),f("top","bottom",d.b,Math.abs(d.b-e.t)),f("bottom","top",d.t,Math.abs(d.t-e.b)),f("bottom","middle",d.m,Math.abs(d.m-e.b)),f("middle","top",d.t,Math.abs(d.t-e.m)),f("middle","bottom",d.b,Math.abs(d.b-e.m)))}if(n=n.snapPoints)for(d=0;d<
n.length;d++)k=n[d],b=Math.abs(k.x-e.l),g=Math.abs(k.x-e.c),w=Math.abs(k.x-e.r),a("point",k.x,b),a("point",k.x,g),a("point",k.x,w),b=Math.abs(k.y-e.t),g=Math.abs(k.y-e.m),w=Math.abs(k.y-e.b),f("point",k.y,b),f("point",k.y,g),f("point",k.y,w)}},updateSnapLinesAfterTraversal:function(m){function h(a,f,d,c){d.style.display="block";c.style.display="block";b=(c=f.getHelper())&&c.getMarginBoxPageCoords?c.getMarginBoxPageCoords(f):p.getMarginBoxPageCoordsCached(f.domNode);a.getScrollOffset();b.x=b.l;b.y=
b.t;b.r=b.x+b.w;b.b=b.y+b.h;b.c=b.x+b.w/2;b.m=b.y+b.h/2;d.style.left=b.x+"px";d.style.top=b.y+"px";d.style.width=b.w+"px";d.style.height=b.h+"px";d.style.backgroundColor="rgba(255,0,255,.05)"}var e=m.getContainerNode();m._snapLinesDiv||(m._snapLinesDiv=dojo.create("div",{"class":"snaplines",style:"position:absolute;top:0px;left:0px;z-index:1000001;pointer-events:none;"},e),m._snapLinesDivWidgetX=dojo.create("div",{"class":"snaplinesWidgetX",style:"position:absolute;pointer-events:none;"},m._snapLinesDiv),
m._snapLinesDivAlignX=dojo.create("div",{"class":"snaplinesAlignX",style:"position:absolute;pointer-events:none;"},m._snapLinesDiv),m._snapLinesDivWidgetY=dojo.create("div",{"class":"snaplinesWidgetY",style:"position:absolute;pointer-events:none;"},m._snapLinesDiv),m._snapLinesDivAlignY=dojo.create("div",{"class":"snaplinesAlignY",style:"position:absolute;pointer-events:none;"},m._snapLinesDiv));m._snapLinesDiv.style.display="block";var b,e=m._snapLinesDivAlignX.style,k=m._snapLinesDivWidgetX.style;
if(m._snapX){k=m._snapX;h(m,k.widget,m._snapLinesDivWidgetX,m._snapLinesDivAlignX);var a,f;b.y<snapBox.t?(a=b.y,f=snapBox.t-b.y):(a=snapBox.t,f=b.y-snapBox.t);e.left="point"==k.typeCurrObj?m._snapX.x+"px":"left"==k.typeCurrObj?b.x+"px":"center"==k.typeCurrObj?b.c+"px":b.r+"px";e.top=a+"px";e.width="1px";e.height=f+"px";e.backgroundColor="rgba(255,0,255,.75)"}else e.display="none",k.display="none";e=m._snapLinesDivAlignY.style;k=m._snapLinesDivWidgetY.style;m._snapY?(k=m._snapY,h(m,k.widget,m._snapLinesDivWidgetY,
m._snapLinesDivAlignY),b.x<snapBox.l?(m=b.x,a=snapBox.l-b.x):(m=snapBox.l,a=b.x-snapBox.l),e.top="point"==k.type?k.y+"px":"top"==k.typeCurrObj?b.y+"px":"middle"==k.typeCurrObj?b.m+"px":b.b+"px",e.left=m+"px",e.height="1px",e.width=a+"px",e.backgroundColor="rgba(255,0,255,.75)"):(e.display="none",k.display="none")},clearSnapLines:function(m){m._snapLinesDiv&&(m._snapLinesDiv.style.display="none");m._snapX=m._snapY=null}}})},"davinci/ve/commands/ReparentCommand":function(){define(["dojo/_base/declare",
"davinci/ve/commands/_hierarchyCommand","../widget","../States","davinci/ve/commands/ModifyCommand"],function(p,m,h,e,b){return p("davinci.ve.commands.ReparentCommand",[m],{name:"reparent",constructor:function(b,a,f){this._id=b?b.id:void 0;this._newParentId=a?a.id:"myapp";this._newIndex=f},execute:function(){if(this._id&&this._newParentId){var k=h.byId(this._id);if(k){var a=k.getParent();a||(a=dojo.byId("myapp"));var f=h.byId(this._newParentId);f||(f=dojo.byId("myapp"));var n=this._isRefreshOnDescendantChange(k);
this._oldParentId||(this._oldParentId=a.id,this._oldIndex=dojo.indexOf(a.getChildren(),k),this._newIndex&&this._newIndex.domNode&&(this._newIndex=f.indexOf(this._newIndex)));a.removeChild(k);var g=f.getContext();f.addChild(k,f==a&&this._oldIndex<this._newIndex?this._newIndex-1:this._newIndex);if(g){var d=k.getHelper();d&&d.reparent&&d.reparent(k);k.startup();k.renderWidget();g.widgetChanged(g.WIDGET_REPARENTED,k,[a,f]);a=this._isRefreshOnDescendantChange(k);n&&(n=new b(n,null,null,g),n.execute());
a&&(n=new b(a,null,null,g),n.execute())}e.resetState(k.domNode)}}},undo:function(){if(this._id&&this._oldParentId&&this._newParentId){var k=h.byId(this._id);if(k){var a=h.byId(this._oldParentId);if(a){var f=h.byId(this._newParentId);if(f){var n=this._isRefreshOnDescendantChange(k),g=a.getContext();f.removeChild(k);a.addChild(k,this._oldIndex);if(g){var d=k.getHelper();d&&d.reparent&&d.reparent(k);k.startup();k.renderWidget();g.widgetChanged(g.WIDGET_REPARENTED,k,[a,f]);a=this._isRefreshOnDescendantChange(k);
n&&(n=new b(n,null,null,g),n.execute());a&&(n=new b(a,null,null,g),n.execute())}e.resetState(k.domNode)}}}}}})})},"davinci/ve/Focus":function(){define("require dojo/_base/declare dojo/query dijit/_WidgetBase dojo/dnd/Mover ../Runtime ./metadata ./States ./utils/GeomUtils".split(" "),function(p,m,h,e,b,k,a,f,n){return m(e,{nobSize:11,frameSize:6,postCreate:function(){dojo.addClass(this.domNode,"maqFocus");dojo.style(this.domNode,{position:"absolute",display:"none"});this._stdChrome=dojo.create("div",
{"class":"editFocusStdChrome"},this.domNode);this._frames=[];for(var a=0;4>a;a++){var b=dojo.create("div",{"class":"editFocusFrame"},this._stdChrome);this._frames.push(b);this.connect(b,"onmousedown","onMouseDown")}dojo.addClass(this._frames[0],"editFocusFrameLEFT");dojo.addClass(this._frames[1],"editFocusFrameRIGHT");dojo.addClass(this._frames[2],"editFocusFrameTOP");dojo.addClass(this._frames[3],"editFocusFrameBOTTOM");this._nobs=[];for(a=0;8>a;a++)b=dojo.create("div",{"class":"editFocusNob"},this._stdChrome),
this._nobs.push(b),this.connect(b,"onmousedown","onMouseDown");this._frameIndex=this._nobIndex=-1;this._custom=dojo.create("div",{"class":"editFocusCustom"},this.domNode)},resize:function(a,b){b&&(this._selectedWidget=b);this._moverCurrent=dojo.mixin({},a);this._moverCurrentConstrained=dojo.mixin({},this._moverCurrent);this._updateFocusChrome(this._moverCurrent,!0);this._contexDiv&&(this._contexDiv.style.left=a.w+10+"px",this._updateSubwidgetList());this._box=a},getBounds:function(){return this._moverCurrent},
show:function(b,d){var c=d&&d.inline;if(b){this._custom.innerHTML="";var f=a.queryDescriptor(b.type,"showStandardSelectionChrome");this._stdChrome.style.display=!1===f?"none":"block";this.domNode.style.display="block";this._selectedWidget=b;var f=b.getHelper(),e=!0;if(f&&f.onShowSelection)f.onShowSelection({widget:b,customDiv:this._custom});c&&(this.showInline(b),e=!1);e&&delete this._inline}},showInline:function(b){this._selectedWidget=b;var d=this._context,c=this;a.getSmartInput(b.type).then(function(a){if(a)if(c._inline=
a,a.useParent){if(a=b.getParent())d.deselect(b),d.select(a),d.getFocus(a).showInline(a)}else a.show&&a.show(b.id)})},inlineEditActive:function(){return this._inline&&this._inline.inlineEditActive?this._inline.inlineEditActive():!1},hide:function(a){var b=(a=this._selectedWidget)?a.getHelper():void 0;if(b&&b.onHideSelection)b.onHideSelection({widget:a,customDiv:this._custom});this.domNode.style.display="none";this._displayedWidget=this._selectedWidget=null;this._inline&&(this._inline.hide(),delete this._inline)},
allow:function(a){if(a){this._op=a;var b={},c=this._selectedWidget.getHelper();c&&c.resizeAllowWhich?(c.resizeAllowWhich(this._selectedWidget,b),this._resizeLeft=b.resizeLeft,this._resizeRight=b.resizeRight,this._resizeTop=b.resizeTop,this._resizeBottom=b.resizeBottom):(this._resizeLeft=this._resizeRight=a.resizeWidth,this._resizeTop=this._resizeBottom=a.resizeHeight);b.left=!this._resizeLeft||this._resizeTop||this._resizeBottom?"none":"block";b.right=!this._resizeRight||this._resizeTop||this._resizeBottom?
"none":"block";b.top=!this._resizeTop||this._resizeLeft||this._resizeRight?"none":"block";b.bottom=!this._resizeBottom||this._resizeLeft||this._resizeRight?"none":"block";b.left_top=this._resizeLeft&&this._resizeTop?"block":"none";b.left_bottom=this._resizeLeft&&this._resizeBottom?"block":"none";b.right_top=this._resizeRight&&this._resizeTop?"block":"none";b.right_bottom=this._resizeRight&&this._resizeBottom?"block":"none";this._nobs[0].style.display=b.left;this._nobs[1].style.display=b.right;this._nobs[2].style.display=
b.top;this._nobs[3].style.display=b.bottom;this._nobs[4].style.display=b.left_top;this._nobs[5].style.display=b.left_bottom;this._nobs[6].style.display=b.right_top;this._nobs[7].style.display=b.right_bottom;this._nobs[0].style.cursor=this._frames[0].style.cursor=this._resizeLeft?"w-resize":"auto";this._nobs[1].style.cursor=this._frames[1].style.cursor=this._resizeRight?"e-resize":"auto";this._nobs[2].style.cursor=this._frames[2].style.cursor=this._resizeTop?"n-resize":"auto";this._nobs[3].style.cursor=
this._frames[3].style.cursor=this._resizeBottom?"s-resize":"auto";this._nobs[4].style.cursor="none"!=b.left_top?"nw-resize":"auto";this._nobs[5].style.cursor="none"!=b.left_bottom?"sw-resize":"auto";this._nobs[6].style.cursor="none"!=b.right_top?"ne-resize":"auto";this._nobs[7].style.cursor="none"!=b.right_bottom?"se-resize":"auto"}},_updateFocusChrome:function(a,b){var c,f,e,k,h=this.nobSize+1,m=this.frameSize+1,p=dojo.byId("focusContainer");if(p){var p=n.getBorderBoxPageCoords(p),v=this._context.getParentIframe(),
x=n.getBorderBoxPageCoords(v);a.l+=x.l;a.t+=x.t;if(v)if(v.contentDocument)if(v.contentDocument.body){v=v.contentDocument.body;a.l-=n.getScrollLeft(v);a.t-=n.getScrollTop(v);this.domNode.style.left=a.l-p.l+"px";this.domNode.style.top=a.t-p.t+"px";var v=p=-11,x=a.w,u=a.h,z=a.w,C=a.h,I=-6,D=-6,H=a.w,E=a.h,G=a.w+4+4,N=a.h+4+4,L=this.domNode&&this.domNode.ownerDocument,J=L&&L.body;this._frames[0].style.left=this._frames[2].style.left=this._frames[3].style.left=I+"px";this._frames[0].style.top=this._frames[2].style.top=
this._frames[1].style.top=D+"px";this._frames[0].style.height=N+"px";this._frames[1].style.height=N+"px";this._frames[1].style.left=H+"px";this._frames[2].style.width=G+"px";this._frames[3].style.top=E+"px";this._frames[3].style.width=G+"px";m=Math.round(z/2-this.nobSize/2);h=Math.round(C/2-this.nobSize/2);this._nobs[0].style.left=this._nobs[4].style.left=this._nobs[5].style.left=p+"px";this._nobs[2].style.top=this._nobs[4].style.top=this._nobs[6].style.top=v+"px";this._nobs[0].style.top=h+"px";this._nobs[1].style.left=
x+"px";this._nobs[1].style.top=h+"px";this._nobs[2].style.left=m+"px";this._nobs[3].style.left=m+"px";this._nobs[3].style.top=u+"px";this._nobs[5].style.top=u+"px";this._nobs[6].style.left=x+"px";this._nobs[7].style.left=x+"px";this._nobs[7].style.top=u+"px"}else console.error("have no body");else console.error("have no contentDocument");else console.error("have no parent iframe")}},onMouseDown:function(a){this._removeKeyHandlers();if(this._selectedWidget&&this._selectedWidget.domNode&&2!==a.button&&
!a.ctrlKey&&"davinci.ve.tools.SelectTool"==this._context._activeTool.declaredClass){this._shiftKey=a.shiftKey;this._sKey=!1;this._nobIndex=dojo.indexOf(this._nobs,a.target);this._frameIndex=dojo.indexOf(this._frames,a.target);var d=a.pageX-400,c=a.pageY-400,f=null,e=this._selectedWidget.getHelper(),f=e&&e.getMarginBoxPageCoords?e.getMarginBoxPageCoords(this._selectedWidget):n.getMarginBoxPageCoords(this._selectedWidget.domNode),e=n.getBorderBoxPageCoords(this._context.getParentIframe());this._moverStart=
{moverLeft:d,moverTop:c,l:f.l+e.l,t:f.t+e.t,w:f.w,h:f.h};f=document.body;this._moverCurrent=dojo.mixin({},this._moverStart);this._moverDragDiv=dojo.create("div",{className:"focusDragDiv",style:"position:absolute;left:"+d+"px;top:"+c+"px;width:800px;height:800px"},f);this._mover=new b(this._moverDragDiv,a,this);dojo.stopEvent(a);this._mouseDownInfo={widget:this._selectedWidget,pageX:a.pageX+e.l,pageY:a.pageY+e.t,dateValue:Date.now()};this._moverMouseDownEvent=a;this._moverMouseUpEvent=null;this._moverMouseUpHandler=
dojo.connect(this._moverDragDiv,"onmouseup",dojo.hitch(this,function(a){this.onMouseUp(a)}));a=this._context.getDocument();(d=document.getElementById("maqetta_project_select"))&&d.focus();a.defaultView.focus();this._keyDownHandler=dojo.connect(a,"onkeydown",dojo.hitch(this,function(a){this.onKeyDown(a)}));this._keyUpHandler=dojo.connect(a,"onkeyup",dojo.hitch(this,function(a){this.onKeyUp(a)}))}},onMove:function(a,b,c){this._mouseDownInfo=null;this._moverDragDiv&&(this._moverDragDiv.style.left=b.l+
"px",this._moverDragDiv.style.top=b.t+"px");if(!(0===this._frameIndex&&!this._resizeLeft||1===this._frameIndex&&!this._resizeRight||2===this._frameIndex&&!this._resizeTop||3===this._frameIndex&&!this._resizeBottom)){a=this._moverStart;c=b.l-a.moverLeft;b=b.t-a.moverTop;if(0===this._frameIndex||4===this._nobIndex||0===this._nobIndex||5===this._nobIndex)this._moverCurrent.l=a.l+c,this._moverCurrent.w=a.w-c;else if(1===this._frameIndex||6===this._nobIndex||1===this._nobIndex||7===this._nobIndex)this._moverCurrent.w=
a.w+c;if(2===this._frameIndex||4===this._nobIndex||2===this._nobIndex||6===this._nobIndex)this._moverCurrent.t=a.t+b,this._moverCurrent.h=a.h-b;else if(3===this._frameIndex||5===this._nobIndex||3===this._nobIndex||7===this._nobIndex)this._moverCurrent.h=a.h+b;b=this._moverCurrent.w;a=this._moverCurrent.h;c=!1;if(this._selectedWidget&&"IMG"===this._selectedWidget.domNode.nodeName){var f=this._selectedWidget.domNode,e=f.naturalWidth,f=f.naturalHeight;"number"==typeof f&&0<f&&"number"==typeof e&&0<e&&
(c=e/f,b<c*a?b=a*c:a=b/c,c=!0)}c||(0===this._frameIndex||0===this._nobIndex||1===this._frameIndex||1===this._nobIndex?a=b:2===this._frameIndex||2===this._nobIndex||3===this._frameIndex||3===this._nobIndex?b=a:b>a?a=b:b=a);this._moverCurrentConstrained={l:this._moverCurrent.l,t:this._moverCurrent.t,w:b,h:a};if(0===this._frameIndex||0===this._nobIndex||1===this._frameIndex||1===this._nobIndex)this._moverCurrentConstrained.t-=(this._moverCurrentConstrained.h-this._moverCurrent.h)/2;if(2===this._frameIndex||
2===this._nobIndex||3===this._frameIndex||3===this._nobIndex)this._moverCurrentConstrained.l-=(this._moverCurrentConstrained.w-this._moverCurrent.w)/2;b=dojo.mixin({},this._shiftKey?this._moverCurrentConstrained:this._moverCurrent);a=n.getBorderBoxPageCoords(this._context.getParentIframe());b.l-=a.l;b.t-=a.t;this._updateFocusChrome(b,!1)}},onFirstMove:function(a){},onMoveStart:function(a){},_moverDoneCleanup:function(){var a=this._context,b=a._chooseParent;this._lastEventTarget=null;this._removeKeyHandlers();
a.dragMoveCleanup();b.parentListDivDelete();this._mover=void 0;this._frameIndex=this._nobIndex=-1},onMoveStop:function(a){if(this._moverDragDiv&&((a=this._moverDragDiv.parentNode)&&a.removeChild(this._moverDragDiv),this._moverDragDiv=null,this._moverCurrent.l!=this._moverStart.l||this._moverCurrent.t!=this._moverStart.t||this._moverCurrent.w!=this._moverStart.w||this._moverCurrent.h!=this._moverStart.h)){a=void 0;if(this._selectedWidget&&this._selectedWidget.domNode)if(this._sKey)for(var b=f.getStatesListCurrent(this._selectedWidget.domNode),
c=0;c<b.length;c++){if(b[c]){a=b[c];break}}else a=f.propertyDefinedForAnyCurrentState(this._selectedWidget.domNode,["width","height"]);b=this._shiftKey?this._moverCurrentConstrained:this._moverCurrent;b.w==this._moverStart.w&&delete b.w;b.h==this._moverStart.h&&delete b.h;"number"!=typeof b.l&&(b.l=this._moverStart.l);"number"!=typeof b.t&&(b.t=this._moverStart.t);b.l==this._moverStart.l&&b.t==this._moverStart.t&&(delete b.l,delete b.t);b=dojo.mixin({},b);b.hasOwnProperty("l")&&(c=n.getBorderBoxPageCoords(this._context.getParentIframe()),
b.l-=c.l,b.t-=c.t);this.onExtentChange(this,this._moverStart,b,a)}this._moverDoneCleanup();a=this._moverMouseUpEvent||this._moverMouseDownEvent;this._moverMouseUpEvent=this._moverMouseDownEvent=null;if(a&&a.target){b=Date.now();this._mouseDownInfo=null;if(this._lastMouseUp&&10>=Math.abs(a.pageX-this._lastMouseUp.pageX)&&10>=Math.abs(a.pageY-this._lastMouseUp.pageY)&&750>=b-this._lastMouseUp.dateValue)this.onDblClick(a);this._lastMouseUp={pageX:a.pageX,pageY:a.pageY,dateValue:b};dojo.stopEvent(a)}},
onMouseUp:function(a){this._moverMouseUpEvent=a},onDblClick:function(a){this.showInline(this._selectedWidget);a.stopPropagation()},onKeyDown:function(a){a&&this._moverDragDiv?(dojo.stopEvent(a),a.keyCode==dojo.keys.SHIFT?(this._shiftKey=!0,this._updateFocusChrome(this._shiftKey?this._moverCurrentConstrained:this._moverCurrent,!1)):83==a.keyCode&&(this._sKey=!0)):this._removeKeyHandlers()},onKeyUp:function(a){a&&this._moverDragDiv?(dojo.stopEvent(a),a.keyCode==dojo.keys.SHIFT?(this._shiftKey=!1,this._updateFocusChrome(this._shiftKey?
this._moverCurrentConstrained:this._moverCurrent,!1)):83==a.keyCode&&(this._sKey=!1)):this._removeKeyHandlers()},_removeKeyHandlers:function(){this._keyDownHandler&&(dojo.disconnect(this._keyDownHandler),this._keyDownHandler=null);this._keyUpHandler&&(dojo.disconnect(this._keyUpHandler),this._keyUpHandler=null)},onExtentChange:function(a,b,c,f){},isFocusNode:function(a){return dojo.hasClass(a,"focusDragDiv")||dojo.hasClass(a,"editFocusNob")||dojo.hasClass(a,"editFocusFrame")||dojo.hasClass(a,"maqFocus")||
dojo.hasClass(a,"editFocusStdChrome")},showContext:function(a,b){"davinci.ve.themeEditor.ThemeEditor"==this._context.editor.declaredClass&&(this._contexDiv||(this._context=a,this._createContextPopUp()),this._contexDiv.style.display="block")},hideContext:function(){"davinci.ve.themeEditor.ThemeEditor"==this._context.editor.declaredClass&&this._contexDiv&&(this._contexDiv.style.display="none")},_createContextPopUp:function(){var a=dojo.doc.createElement("div");a.id="ieb";this._contexDiv=a;this.domNode.appendChild(a)},
_createSubwidgetList:function(){var a=this._context._selectedWidget;if(a){var b=this._context.getThemeMeta().metadata,c=b.getWidgetType(a),b=(b=b.getMetadata(c))?b.subwidgets:null;this._displayedWidget=a;if(b){c=this._contexDiv;c.innerHTML="\x3cspan\x3e\x3c/span\x3e";c.style.position="absolute";c.style.left=this._box.w+10+"px";c.className="themeSubwidgetMenu";dojo.connect(c,"onmousedown",this,"stopPropagation");c.style.display="none";this._contexDiv=c;this.domNode.appendChild(c);var f=this._contexDiv.firstElementChild,
e=this._context.theme.name+"_subwidgetmenu";(c=dijit.byId(e))&&c.destroyRecursive(!1);var k=this._context.getDijit(),c=new k.Menu({id:e},f),f=!1;a.subwidget||(f=!0);f=new k.CheckedMenuItem({label:"WidgetOuterContainer",id:this._context.theme.name+"_WidgetOuterContainer",checked:f,onClick:dojo.hitch(this,"_subwidgetSelected",this._context.theme.name+"_WidgetOuterContainer")});f.domNode.children[0].children[0].setAttribute("src",f.domNode.children[0].children[0].src);c.addChild(f);this._currentItem=
f;for(var h in b)f=a.subwidget===h,b=new k.CheckedMenuItem({label:h,id:this._context.theme.name+"_"+h,checked:f,onClick:dojo.hitch(this,"_subwidgetSelected",this._context.theme.name+"_"+h)}),b.domNode.children[0].children[0].setAttribute("src",b.domNode.children[0].children[0].src),c.addChild(b),f&&(this._currentItem=b);c.startup();this._cm=c;this._updateSubwidgetListForState();this._connections=[];this._connections.push(dojo.subscribe("/davinci/ui/subwidgetSelectionChanged",dojo.hitch(this,this._subwidgetSelectedChange)));
this._connections.push(dojo.subscribe("/davinci/states/state/changed",dojo.hitch(this,this._updateSubwidgetListForState)))}else this._contexDiv.innerHTML=""}},stopPropagation:function(a){a.stopPropagation()},_subwidgetSelected:function(a,b){b.stopPropagation();var c=this._context.getDijit(),f=c.byId(a);f.checked?(this._currentItem&&f!=this._currentItem&&this._currentItem.set("checked",!1),this._currentItem=f,c=this._currentItem.label):((this._currentItem=c.byId(this._context.theme.name+"_WidgetOuterContainer"))&&
this._currentItem.set("checked",!0),c=null);b.currentTarget.id===this._context.theme.name+"_WidgetOuterContainer"&&(c=null);dojo.publish("/davinci/ui/subwidgetSelectionChanged",[{subwidget:c,origin:this.declaredClass}])},_subwidgetSelectedChange:function(a){var b=this._context.getDijit();a.origin!==this.declaredClass&&(this._currentItem&&this._currentItem.set("checked",!1),(this._currentItem=a.subwidget?b.byId(this._context.theme.name+"_"+a.subwidget):b.byId(this._context.theme.name+"_WidgetOuterContainer"))&&
this._currentItem.set("checked",!0))},_updateSubwidgetListForState:function(){if(this._context.editor==k.currentEditor)if(this._context._selectedWidget&&this._displayedWidget===this._context._selectedWidget&&this._cm){var a=k.currentEditor,b=a._theme;this._cm.getChildren().forEach(function(c){var f=c.label;"WidgetOuterContainer"===f&&(f=null);c.setDisabled(!b.isStateValid(this._displayedWidget,a._currentState,f))},this)}else this._clearList(),this._createSubwidgetList()},_updateSubwidgetList:function(){this._displayedWidget!==
this._context._selectedWidget&&(this._clearList(),this._createSubwidgetList())},_clearList:function(){if(this._cm)for(this._cm.destroyRecursive(!1),delete this._cm;connection=this._connections.pop();)dojo.unsubscribe(connection);this._currentItem=null},dojoStyle:function(a,b,c){if(a&&a.ownerDocument&&a.ownerDocument.defaultView&&a.ownerDocument.defaultView.getComputedStyle(a))return dojo.style.apply(dojo,arguments)}})})},"davinci/ve/ChooseParent":function(){define("dojo/_base/declare davinci/Runtime ./widget ./_Widget ./metadata davinci/ve/utils/GeomUtils".split(" "),
function(p,m,h,e,b,k){return p("davinci.ve.ChooseParent",null,{constructor:function(a){this._context=a.context},getAllowedTargetWidget:function(a,f,k,g){var d=h.getEnclosingWidget,c=[],m=[];f=f.length?f:[f];var p=this;f.forEach(function(a){m.push({type:a.type,allowedParent:b.getAllowedParent(a.type),classList:p.getClassList(a.type)})});do{f=a instanceof e?a.type:a._dvWidget.type;var r=this.getClassList(f);this.isAllowed(m,a,f,r,g)&&c.push(a);a=d(a)}while(a&&k);return c},isAllowed:function(a,f,e,g,
d){function c(a,b){return b.some(function(b){return-1!==a.indexOf(b)})}var k=b.getAllowedChild(e);"html.body"===e&&(k=["ANY"]);return a.every(function(a){var b="NONE"!==k[0]&&("ANY"===k[0]||"BLOCK"===k[0]||c(k,a.classList)),f="ANY"===a.allowedParent[0]||c(a.allowedParent,g),m=h.getWidgetHelper(a.type);return m&&m.isAllowed?m.isAllowed({childType:a.type,childClassList:a.classList,parentType:e,parentClassList:g,absolute:d.absolute,isAllowedChild:b,isAllowedParent:f}):b&&f})},getClassList:function(a){var f=
b.queryDescriptor(a,"class");return f?(f=f.split(/\s+/),f.push(a),f):[a]},dragUpdateCandidateParents:function(a){var b=a.widgetType,e=a.showCandidateParents,g=a.doCursor,d=a.absolute,c=a.currentParent;a=this._XYParent;this._proposedParentWidget||(this._proposedParentWidget=this._getDefaultParent(b,a,d,c));(e||g)&&this.highlightNewWidgetParent(this._proposedParentWidget);var b=this._context,d=b.getActiveDragDiv(),q;d&&(d=dojo.query(".maqCandidateParents",d),1==d.length&&(q=d[0]));if(q)if(e){e=!0;if(this._lastProposedParentWidget!=
this._proposedParentWidget)e=!1;else if("undefined"==typeof this._lastAllowedParentList||null===this._lastAllowedParentList)e=!1;else if(this._lastAllowedParentList.length!=a.length)e=!1;else for(c=0;c<a.length;c++)if(this._lastAllowedParentList[c]!=a[c]){e=!1;break}this._lastProposedParentWidget=this._proposedParentWidget;if(!e)if(e=dojo.i18n.getLocalization("davinci.ve","ve"),q.innerHTML="","undefined"==typeof a||null===a)this._lastAllowedParentList=null,c=0;else{this._lastAllowedParentList=a.slice();
var c=a.length,p=dojo.create("div",{className:"maqCandidateParentsHeader"},q),d=dojo.create("div",{className:"maqCandidateParentsList"},q);q=dojo.create("div",{className:"maqCandidateParentsHelp"},q);if(0===c)p.innerHTML=e.noValidParents;else if(1==c)p.innerHTML=e.willBeChildOf,dojo.create("div",{className:"maqCandidateListItem maqCandidateCurrent",innerHTML:h.getLabel(a[0])},d);else{p.innerHTML=e.candidateParents;for(var p="\x3ctable\x3e",c=a.length-1,r=1;0<=c;c--,r++){var B="maqCandidateListItem";
a[c]==this._proposedParentWidget&&(B+=" maqCandidateCurrent");p+='\x3ctr class\x3d"'+B+'"\x3e\x3ctd class\x3d"maqCandidateCheckedColumn"\x3e\x26rarr;\x3c/td\x3e\x3ctd class\x3d"maqCandidateNumberColumn"\x3e'+r+'\x3c/td\x3e\x3ctd class\x3d"maqCandidateParentColumn"\x3e'+h.getLabel(a[c])+"\x3c/td\x3e\x3c/tr\x3e"}d.innerHTML=p+"\x3c/table\x3e";q.innerHTML=e.toChangePress}}}else q.innerHTML="",this._lastAllowedParentList=null;if(g){for(var y,c=0;c<this._XYParent.length;c++)if(this._XYParent[c]===this._proposedParentWidget){y=
c;break}void 0!==y&&(!this._cursorSpan&&(this._cursorSpan=dojo.create("span",{className:"editCursor"}),g=b.getGlobal())&&(this._timer=g.setInterval(function(a,b){var c=m.currentEditor;(c.getContext&&c.getContext())!==b?this.cleanup():dojo.toggleClass(a,"editCursorBlink")}.bind(this),400,this._cursorSpan,b)),g=this._XYParent[y].domNode,a=(a=this._XYRefChild[y])?a.domNode:null,y=this._XYRefAfter[y],a?(y?a.nextSibling&&a.nextSibling._dvWidget?(b=k.getBorderBoxPageCoordsCached(a.nextSibling),y=b.l):(b=
k.getBorderBoxPageCoordsCached(a),y=b.l+b.w):(b=k.getBorderBoxPageCoordsCached(a),y=b.l),a=b.t,b=b.h):(b=k.getBorderBoxPageCoordsCached(g),y=b.l,a=b.t,b=16),q=this._cursorSpan.style,q.height=b+"px",q.left=y+"px",q.top=a+"px",g.ownerDocument.body.appendChild(this._cursorSpan))}},_getDefaultParent:function(a,b,e,g){var d;b&&(a=h.getWidgetHelper(a),d=1<b.length&&a&&a.chooseParent?a.chooseParent(b):0===b.length?null:e&&g?g:b[b.length-1]);return d},cleanup:function(){this._cursorSpan&&(this._cursorSpan.parentNode.removeChild(this._cursorSpan),
this._cursorSpan=null);if(this._timer){var a=this._context.getGlobal();a&&(a.clearInterval(this._timer),this._timer=null)}this.highlightNewWidgetParent(null);this._lastAllowedParentList=null},highlightNewWidgetParent:function(a){a!=this.newWidgetParent&&(this.newWidgetParent&&(this.newWidgetParent.domNode.style.outline=""),this.newWidgetParent=a)&&(a.domNode.style.outline="1px solid rgba(165,42,42,.7)")},getProposedParentWidget:function(){var a=null;if(this._XYParent){var b=this._XYParent.indexOf(this._proposedParentWidget);
0<=b&&(a={},a.parent=this._XYParent[b],a.refChild=this._XYRefChild[b],a.refAfter=this._XYRefAfter[b])}return a},setProposedParentWidget:function(a){this._proposedParentWidget=a},getProposedParentsList:function(){return this._XYParent},findParentsXYBeforeTraversal:function(a){a=a.position;this._XYParent=[];this._XYRefChild=[];this._XYRefAfter=[];"undefined"==typeof this.findParentsXYLastPosition&&(this.findParentsXYLastPosition={});var b=this.findParentsXYLastPosition;if(a.x===b.x&&a.y===b.y)return!1;
b.x=a.x;b.y=a.y;return!0},findParentsXY:function(a){var b=a.data,e=a.widget,g=a.absolute,d=a.position;a=a.beforeAfter;this._context.getScrollOffset();var c=d.x,d=d.y,h=e.getHelper(),m=null,m=h&&h.getMarginBoxPageCoords?h.getMarginBoxPageCoords(e):k.getMarginBoxPageCoordsCached(e.domNode),p=m.l,B=m.t,h=m.w,y=m.h,A;if(c>=p&&c<=p+h&&d>=B&&d<=B+y&&1===this.getAllowedTargetWidget(e,b,!1,{absolute:g}).length)if(!0===g)this._XYParent.push(e),this._XYRefChild.push(null),this._XYRefAfter.push(!0);else{g=e.getChildren();
m=[];for(b=0;b<g.length;b++)h=g[b],p=h.domNode,B=k.getBorderBoxPageCoordsCached(p),h=p.offsetWidth,y=p.offsetHeight,p=B.l,B=B.t,A=p+h,y=B+y,m.push({l:p,t:B,r:A,b:y,c:p+h/2});for(var v,x,u,b=0;b<m.length;b++){p=m[b];h=g[b];if(c>=p.l&&c<=p.r&&d>=p.t&&d<=p.b){v=h;x=c>=p.c?!0:!1;break}0===b?(v=h,x=d>p.b||c>=p.c?!0:!1,u=p.b):(d>=p.t||d>=u)&&c>=p.l?(v=h,x=d>p.b||c>=p.c?!0:!1):d>=u&&d>=p.b&&(v=h,x=!0);p.b>u&&(u=p.b)}this._XYParent.push(e);this._XYRefChild.push(v);this._XYRefAfter.push("after"===a?!0:"before"===
a?!1:x)}},findParentsXYAfterTraversal:function(a){var b=a.widgets,e=a.currentParent,g=a.eventTarget.ownerDocument.body._dvWidget;if(a.absolute&&e&&e!=g){var d=!1;this._XYParent.forEach(function(a){a==e&&(d=!0)});d||(this._XYParent.push(e),this._XYRefChild.push(b[0]),this._XYRefAfter.push(!0))}this.findParentsXYLastPosition={};for(a=0;a<this._XYRefAfter.length-1;a++)this._XYRefAfter[a]=!0},findParentsXYCleanup:function(a){this.findParentsXYLastPosition={}},parentListDivCreate:function(a){var b=a.widgetType,
e=a.absolute,g=a.doCursor,d=a.beforeAfter,c=a.currentParent;a=this._context;if(b){var k=a.getDocument();this._oldActiveElement=document.activeElement;k.defaultView.focus();this._keyDownHandler=dojo.connect(k,"onkeydown",dojo.hitch(this,function(a,b){this.onKeyDown(b,a[0],a[1],a[2],a[3],a[4])},[b,e,g,d,c]));this._keyUpHandler=dojo.connect(k,"onkeyup",dojo.hitch(this,function(a,b){this.onKeyUp(b,a[0],a[1],a[2],a[3],a[4])},[b,e,g,d,c]));b=this._parentListDiv=dojo.create("div",{className:"maqParentListDiv"},
document.body);a.setActiveDragDiv(b);dojo.create("div",{className:"maqCandidateParents"},b);return b}},parentListDivGet:function(){return this._parentListDiv},parentListDivDelete:function(){var a=this._context,b=this._parentListDiv;b&&(this._oldActiveElement&&(this._oldActiveElement.focus(),this._oldActiveElement=null),dojo.disconnect(this._keyDownHandler),dojo.disconnect(this._keyUpHandler),this._keyDownHandler=this._keyUpHandler=null,b.parentNode.removeChild(b),a.setActiveDragDiv(null),this._parentListDiv=
null)},_keyEventDoUpdate:function(a,b,e,g,d){var c=this._context.getPreference("showPossibleParents");this.dragUpdateCandidateParents({widgetType:a,showCandidateParents:!c&&this._spaceKeyDown||c&&!this._spaceKeyDown,doCursor:e,beforeAfter:g,absolute:b,currentParent:d})},onKeyDown:function(a,b,e,g,d,c){dojo.stopEvent(a);a.keyCode==dojo.keys.SPACE?this._spaceKeyDown=!0:this._processKeyDown(a.keyCode);this._keyEventDoUpdate(b,e,g,d,c)},onKeyUp:function(a,b,e,g,d,c){dojo.stopEvent(a);a.keyCode==dojo.keys.SPACE&&
(this._spaceKeyDown=!1);this._keyEventDoUpdate(b,e,g,d,c)},_processKeyDown:function(a){if(49<=a&&57>=a){var b=this.getProposedParentsList();1<b.length&&(a=b.length-(a-48),0<=a&&this.setProposedParentWidget(b[a]))}},isSpaceKeyDown:function(){return this._spaceKeyDown}})})},"davinci/ve/_ContextDojo":function(){define("require dojo/_base/declare dojo/_base/lang dojo/dom-construct dojo/query dojo/Deferred dojo/promise/all dojo/_base/connect dojo/window xide/factory xide/types ./commands/ChangeThemeCommand ../model/Path ../Runtime ../Workbench ../library ./metadata ../workbench/Preferences dojo/text!./newfile.template.html dojox/html/_base".split(" "),
function(p,m,h,e,b,k,a,f,n,g,d,c,q,w,r,B,y,A,v){return m(null,{_didDojo:!1,_reRequire:/\brequire\s*\(\s*\[\s*([\s\S]*?)\s*\]\s*\)/,_reModuleId:/[\w.\/]+/g,_bootstrapModules:"dijit/dijit,dijit/dijit-all",getDojoUrl:function(){var a=r.location();"/"==a.charAt(a.length-1)&&(a=a.substring(0,a.length-1));if(document&&document.getElementsByTagName)for(var b=document.getElementsByTagName("script"),c=/dojo(\.xd)?\.js(\W|$)/i,d=0;d<b.length;d++){var f=b[d].getAttribute("src");if(f&&f.match(c))return a+"/"+
f}},_getLoaderPackages:function(){var a=this.getBase(),b=B.getUserLibs(a),c,d=[];b.some(function(a){return"dojo"===a.id?(c=new q(a.root+"/dojo"),!0):!1});b=b.concat({id:"widgets",root:function(){var b=A.getPreferences("davinci.ui.ProjectPrefs",a);b.widgetFolder||(b.widgetFolder="WebContent/lib/custom",A.savePreferences("davinci.ui.ProjectPrefs",a,b));for(b=b.widgetFolder;1<b.length&&("."==b.charAt(0)||"/"==b.charAt(0));)b=b.substring(1);return b}()});b.forEach(function(a){var b=a.id;void 0!==a.root&&
"dojo"!==b&&"DojoThemes"!==b&&(b=(new q(a.root)).relativeTo(c).toString(),d.push({name:a.id,location:b}))});dojo.publish("onGetLoaderPackages",{context:this,packages:d,base:a});return d},_setSourcePostLoadRequires:function(a,d,g,k){k&&(k.themeSet&&(new c(k.themeSet,this))._dojoxMobileAddTheme(this,k.themeSet.mobileTheme,!0),this.addModeledStyleSheet(this.getAppCssRelativeFile(),!0),k=this._getAppJsRelativeFile(),this.addHeaderScript(k));a.find({elementType:"HTMLElement",tag:"script"}).forEach(function(a){for(var b=
0;b<a.children.length;b++)if(0<=a.children[b].getText().indexOf("dojo.require")){a.parent.removeChild(a);break}});var m=this._parse(a);if(this.frameNode)this.getGlobal(),b(".loading",this.frameNode.parentNode).orphan(),this._continueLoading(m,d,this,g);else{var p;dojo.some(m.scripts,function(a){if(-1!=a.indexOf("/dojo.js"))return p=a,!0});p=null;k=this.getBase();if(!p){var A=this;dojo.some(B.getUserLibs(k.toString()),function(a){return"dojo"===a.id?(p=(new q(this.getBase())).append(a.root).append("dojo/dojo.js").relativeTo(this.getPath(),
!0).toString(),A.addJavaScriptSrc(p,!0,"",!1),!0):!1},this);p||(p=this.getDojoUrl())}k=this.getFullResourcePath().getParentPath();var y=new q(p);k=k.append(y).getParentPath();for(var y=w.getUserWorkspaceUrl(),G=0;G<this._customWidgetPackages.length;G++){var N=this._customWidgetPackages[G],L=N.location.substr(y.length),L=new q(L);N.location=L.relativeTo(k).toString()}k=this.containerNode;k.style.overflow="hidden";k=e.create("iframe",this.iframeattrs,k);k.dvContext=this;this.frameNode=k;y=r.location()+
"/";this.baseURL&&(y=this.baseURL);var J=k.contentDocument||k.contentWindow.document,F=n.get(J),K={baseUrl:y};p&&(K.dojoUrl=p,K.id=this._id,k={packages:this._getLoaderPackages()},this._getDojoScriptValues(k,K),this._bootstrapModules&&(K.additionalModules=","+this._bootstrapModules.split(",").map(function(a){return"'"+a+"'"}).join(",")));a.themeCssFiles&&(K.themeCssFiles=a.themeCssFiles.map(function(a){return'\x3clink rel\x3d"stylesheet" type\x3d"text/css" href\x3d"'+a+'"\x3e'}).join(""));window["loading"+
this._id]=function(a,b){var c=this;try{var f=n.get(J),e=this.rootNode=J.body;if(!e){this._waiting=this._waiting||0;if(10>this._waiting++){setTimeout(window["loading"+this._id],500);return}throw"doc.body is null";}delete window["loading"+this._id];e.id="myapp";e.style.width="100%";e.style.height="100%";e.style.visibility="visible";e.style.margin="0";e._edit_context=this;-1!=this._bootstrapModules.split(",").indexOf("dijit/dijit-all")&&(f.dojo._postLoad=!0);f.require("dojo/_base/lang").isArray=f.dojo.isArray=
function(a){return a&&"[object Array]"==Object.prototype.toString.call(a)};f.require({packages:this._customWidgetPackages})}catch(k){console.error(k.stack||k),c=Error(k.message,k.fileName,k.lineNumber),h.mixin(c,k)}this._continueLoading(m,d,c,g)}.bind(this);J.open();a=h.replace(v,function(a,b){return K.hasOwnProperty(b)?K[b]:""});J.write(a);J.close();f.connect(J.documentElement,"onkeypress",function(a){8==a.charOrCode&&(window.davinciBackspaceKeyTime=F.davinciBackspaceKeyTime=Date.now())});f.connect(J.documentElement,
"onkeydown",dojo.hitch(this,function(a){this.editor.handleKeyEvent(a)}));f.connect(J.documentElement,"onkeyup",dojo.hitch(this,function(a){this.editor.handleKeyEvent(a)}))}},getLibraryBase:function(a,b){return B.getLibRoot(a,b,this.getBase())},loadRequires:function(b,c,d,f){var e=y.query(b,"require");if(!e){var g=new k;g.resolve();return g}var h=y.query(b,"library"),n={},m=this,p=function(a,b){return m.addJavaScriptSrc(b,c,b,f)},r=function(a,b){var c=new k;if(n.hasOwnProperty(a))return c.resolve(),
c;var d=y.getLibrary(a).version||b.version;return m.getLibraryBase(a,d).then(function(f){if(null==f)return console.error("No library found for name \x3d '"+a+"' version \x3d '"+d+"'"),c.reject(),c;n[a]=(new q(m.getBase())).append(f);if(b&&b.src&&".js"===b.src.substr(-3))return f=b.src.match(/((?:\.\.\/)*)(.*)/),p(a,f[2]);c.resolve();return c})},g=[],w;for(w in h)h.hasOwnProperty(w)&&g.push(r(w,h[w]));return a(g).then(function(){var g=[];e.every(function(a){a.$library&&g.push(r(a.$library,h[a.$library]));
switch(a.type){case "javascript":a.src?g.push(p(a.$library,a.src)):this.addJavaScriptText(a.$text,c||d,f);break;case "javascript-module":"amd"!==a.format&&console.error("Unknown javascript-module format");a.src?g.push(this.addJavaScriptModule(a.src,c||d,f)):console.error("Inline 'javascript-module' not handled src\x3d"+a.src);break;case "css":a.src?(a=a.src,c?this.addModeledStyleSheet(a,f):this.loadStyleSheet(a)):console.error("Inline CSS not handled src\x3d"+a.src);break;case "image":break;default:console.error("Unhandled metadata resource type\x3d'"+
a.type+"' for widget '"+b+"'")}return!0},this);return a(g)}.bind(this))},getDojo:function(){var a=this.getGlobal();return a&&a.dojo||dojo},getDijit:function(){var a=this.getGlobal();return a&&a.dijit||dijit},_getDojoJsElem:function(){if(this._dojoScriptElem||this.getDocumentElement().getChildElement("head").getChildElements("script").some(function(a){if(/\/dojo.js$/.test(a.getAttribute("src")))return this._dojoScriptElem=a,!0},this))return this._dojoScriptElem;console.error('"dojo.js" script element not found!')},
_updateDojoConfig:function(a){this.close();var b=this._getDojoJsElem(),c=b.getAttribute("data-dojo-config"),c=c?p.eval("({ "+c+" })","data-dojo-config"):{},f="";c.mblLoadCompatPattern&&(f=", mblLoadCompatPattern: "+c.mblLoadCompatPattern.toString(),delete c.mblLoadCompatPattern);for(var e in a)"mblLoadCompatPattern"==e?f=null===a[e]?"":", 'mblLoadCompatPattern': "+a[e]:null===a[e]?delete c[e]:c[e]=a[e];g.publish(d.EVENTS.ON_BUILD_DOJO_CONFIG,{data:c,context:this,editor:this.editor},this);a=JSON.stringify(c).slice(1,
-1).replace(/"/g,"'");b.setAttribute("data-dojo-config",a+f)},_preserveDojoTypes:function(a){var b=a.getAttribute("data-dojo-type")||a.getAttribute("dojoType");if(b){var c=this._loadFileDojoTypesCache,d=this.maqTypesClassPrefix+this.maqTypesClassCount;a.className=a.className+" "+d;this.maqTypesClassCount++;c[d]=b}},_getDojoScriptValues:function(a,b){var c=this._getDojoJsElem(),d=c.getAttribute("data-dojo-config"),d=d?p.eval("({ "+d+" })","data-dojo-config"):{};h.mixin(d,a,{async:!0,parseOnLoad:!1});
b.dojoConfig=JSON.stringify(d).slice(1,-1).replace(/"/g,"'");var f=[];c.attributes.forEach(function(a){var b=a.name;a=a.value;"src"!==b&&"data-dojo-config"!==b&&f.push(b+'\x3d"'+a+'"')});f.length&&(b.additionalDojoAttrs=f.join(" "))},_restoreDojoTypes:function(){var a=this._loadFileDojoTypesCache,b=this.getDocument(),c;for(c in a)if(node=b.querySelectorAll("."+c)[0])node.className=node.className.replace(" "+c,""),node.setAttribute("data-dojo-type",a[c])},_continueLoading:function(a,b,c,d){var f,e=
{};try{if(c instanceof Error)throw c;f=this._setSourceData(a).then(this.onload.bind(this),function(a){e.errorMessage='Unable to parse HTML source.  See console for error.  Please switch to "Display Source" mode and correct the error.';console.error(a.stack||a.message)})}catch(g){e=g}finally{b&&(f?f.then(function(){b.call(d||this,e)}.bind(this)):b.call(d||this,e))}}})})},"davinci/ve/_ContextInterface":function(){define("dojo/_base/declare dojo/dom-style dojo/_base/connect dojo/topic ../Theme ../Workbench ./Snap dojox/html/_base".split(" "),
function(p,m,h,e,b,k,a){return p(null,{_designEvents:[],_designMode:!0,isDesignMode:function(){return this._designMode},_disableDesignMode:function(){this._designEvents.forEach(h.disconnect);this._designEvents=[]},_enableDesignMode:function(){var a=this.getContainerNode();this._designEvents.forEach(h.disconnect);this._designEvents=[h.connect(this.getDocument(),"onkeydown",this,"onKeyDown"),h.connect(this.getDocument(),"onkeyup",this,"onKeyUp"),h.connect(a,"ondblclick",this,"onDblClick"),h.connect(a,
"onmousedown",this,"onMouseDown"),h.connect(a,"onclick",this,"onMouseClick"),h.connect(a,"onmousemove",this,"onMouseMove"),h.connect(a,"onmouseup",this,"onMouseUp"),h.connect(a,"onmouseover",this,"onMouseOver"),h.connect(a,"onmouseout",this,"onMouseOut")]},setDesignMode:function(a){!a&&this._designMode&&this._disableDesignMode();a&&!this._designMode&&this._enableDesignMode();this._designMode=a},getActiveDragDiv:function(){return this._activeDragDiv},setActiveDragDiv:function(a){this._activeDragDiv=
a},blockChange:function(a){this._blockChange=a},onMouseClick:function(a){this.eventHandler&&this.eventHandler.click&&this.eventHandler.click(a)},onMouseDown:function(a){if(this._activeTool&&this._activeTool.onMouseDown&&!this._blockChange)this._activeTool.onMouseDown(a);this.blockChange(!1)},onDblClick:function(a){},onMouseMove:function(a){if(this._activeTool&&this._activeTool.onMouseMove&&!this._blockChange)this._activeTool.onMouseMove(a)},onMouseUp:function(a){if(this._activeTool&&this._activeTool.onMouseUp)this._activeTool.onMouseUp(a);
this.blockChange(!1);e.publish("/davinci/ve/context/mouseup",a)},onMouseOver:function(a){if(this._activeTool&&this._activeTool.onMouseOver)this._activeTool.onMouseOver(a)},onMouseOut:function(a){if(this._activeTool&&this._activeTool.onMouseOut)this._activeTool.onMouseOut(a)},dragMoveUpdate:function(b){var e=this,g=this._chooseParent,d=b.widgets,c=b.data,k=b.position,h=b.absolute,m=b.currentParent,p=b.rect,y=b.doSnapLinesX,A=b.doSnapLinesY,v=b.doFindParentsXY,x=b.doCursor,u=b.beforeAfter,z=dojo.isArray(c)?
c[0].type:c.type,C=function(b){if(!(d&&0<=d.indexOf(b))){var f=this.getGlobal().require("dojo/dom-style").get(b.domNode);(y||A)&&a.findSnapOpportunities(this,b,f,y,A);g.findParentsXY({data:c,widget:b,absolute:h,position:k,doCursor:x,beforeAfter:u});dojo.forEach(b.getChildren(),function(a){C.apply(e,[a])})}};if(y||A)doSnapLines=a.updateSnapLinesBeforeTraversal(this,p);p=g.findParentsXYBeforeTraversal(b);C.apply(e,[this.rootWidget]);(y||A)&&a.updateSnapLinesAfterTraversal(this);g.findParentsXYAfterTraversal(b);
p&&(g.dragUpdateCandidateParents({widgetType:z,showCandidateParents:v,doCursor:x,beforeAfter:u,absolute:h,currentParent:m}),g.findParentsXYCleanup(b))},dragMoveCleanup:function(){a.clearSnapLines(this);this._chooseParent.cleanup(this)},onExtentChange:function(a,b,e,d){if(this._activeTool&&this._activeTool.onExtentChange&&!this._blockChange&&(a=dojo.indexOf(this._focuses,a),0<=a))this._activeTool.onExtentChange({index:a,oldBoxes:[b],newBox:e,applyToWhichStates:d});this.blockChange(!1)},onKeyDown:function(a){if(this._activeTool&&
this._activeTool.onKeyDown)this._activeTool.onKeyDown(a)},onKeyUp:function(a){if(this._activeTool&&this._activeTool.onKeyUp)this._activeTool.onKeyUp(a)},onContentChange:function(){this._updateWidgetHash();this.deselectInvisible();dojo.forEach(this.getSelection(),function(a,b){0===b?this.select(a):this.select(a,!0)},this);if("davinci.themeEdit.ThemeEditor"==this.editor.editorID){var a=b.getHelper(this.visualEditor.theme);if(a&&a.onContentChange)a.onContentChange(this,this.visualEditor.theme);else a&&
a.then&&a.then(function(a){if(a.helper&&a.helper.onContentChange)a.helper.onContentChange(this,this.visualEditor.theme)}.bind(this))}this._forceSelectionChange&&(this.onSelectionChange(this.getSelection()),delete this._forceSelectionChange);setTimeout(function(){k._autoSave.call(k)},0)},onSelectionChange:function(a){this._cssCache={};h.publish("/davinci/ui/widgetSelected",{selection:a,context:this})},getActiveTool:function(){return this._activeTool},setActiveTool:function(a){try{this._activeTool&&
this._activeTool.deactivate(),this._activeTool=a,this._activeTool||(this._activeTool=this._defaultTool),this._activeTool.activate(this),h.publish("/davinci/ve/activeToolChanged",[this,a])}catch(b){debugger}},inlineEditActive:function(){return this.getSelection().some(function(a,b){return this._focuses[b].inlineEditActive()},this)},select:function(a,b,e){if(a&&a!=this.rootWidget){var d,c=!1;this._selection&&(c=this._selection.some(function(b,c){return b===a?(d=c,!0):!1}));if(!c){b&&this._selection?
(d=this._selection.length,c=this._selection,c.push(a)):c=[a];var k=a.getParent();if(k){var h=k.getHelper();h&&h.selectChild?h.selectChild(k,a):k.selectChild(a)}if(!this._selection||1<this._selection.length||1<c.length||this.getSelection()!=a)if(k=this._selection,this._selection=c,this.onSelectionChange(c,b),k&&k.forEach(function(a){var b=a.getHelper();if(b&&b.onDeselect)b.onDeselect(a)},this),(b=a.getHelper())&&b.onSelect)b.onSelect(a)}this.updateFocus(a,d,e)}else b||this.deselect()},deselect:function(a){if(this._selection){a&&
(helper=a.getHelper());if(a&&this._selection.length){if(1===this._selection.length){if(this._selection[0]!=a)return;this.focus(null,0);this._selection=void 0}else{var b=dojo.indexOf(this._selection,a);if(0>b)return;this.focus(null,b);this._selection.splice(b,1)}if(helper&&helper.onDeselect)helper.onDeselect(a)}else this._selection&&this._selection.forEach(function(a){var b=a.getHelper();if(b&&b.onDeselect)b.onDeselect(a)},this),this.focus(null),this._selection=void 0;this.onSelectionChange(this.getSelection())}},
deselectInvisible:function(){function a(b){return 1==b.nodeType&&"none"==m.get(b,"display")?!0:b.parentNode?a(b.parentNode):!1}if(this._selection)for(var b=this._selection.length-1;0<=b;b--){var e=this._selection[b],d=e.domNode;if(a(d)&&"xblox/RunScript"!==e.type)this.deselect(e);else for(;d&&"BODY"!=d.tagName.toUpperCase();){if(d&&d.ownerDocument&&d.ownerDocument.defaultView&&"none"==m.get(d,"display")&&"xblox/RunScript"!==e.type){this.deselect(e);break}d=d.parentNode}}},getFlowLayout:function(){var a=
!0;a="true"===a;return a},setFlowLayout:function(a){var b=this.getDocumentElement().getChildElement("body");b&&b.addAttribute(PREF_LAYOUT_ATTR,""+a);return a}})})},"davinci/ve/_ContextDocument":function(){define("dojo/_base/declare dojo/dom-class dojo/dom-construct dojo/query dojo/_base/connect dojo/window xide/utils xide/factory xide/types ../UserActivityMonitor ../model/Path ../Workbench ./widget ./metadata ../html/HTMLElement ../workbench/Preferences dojox/html/_base".split(" "),function(p,m,h,
e,b,k,a,f,n,g,d,c,q,w,r,B){var y=function(a){var b=w.getLibrary();a&&dojo.filter(a.attributes,function(a){return"on"==a.nodeName.substr(0,2).toLowerCase()}).forEach(function(a){var c=!1,d;for(d in b)if(c=w.getLibrary(d),c=w.invokeCallback(c,"requiredEventAttribute",[a]))break})};return p(null,{hasDirtyResources:function(){return!1},getCompType:function(){var a=this.getDocumentElement().getChildElement("body"),b=a&&a.getAttribute("data-maq-comptype");a&&!b&&(b=this.getMobileDevice()?"mobile":"desktop",
a.addAttribute("data-maq-comptype",b));return b},_significantAttrs:{link:"href",meta:"name"},getContainerNode:function(){return this.rootNode},getParentIframe:function(){if(!this._parentIframeElem)for(var a=this.getDocument(),b=document.getElementsByTagName("iframe"),c=0;c<b.length;c++)if(b[c].contentDocument===a){this._parentIframeElem=b[c];break}return this._parentIframeElem},getModel:function(){return this._srcDocument},setSource:function(a,b,c,d){dojo.withDoc(this.getDocument(),"_setSource",this,
arguments);this.editor&&this.editor._setDirty()},getBase:function(){return""},getFullResourcePath:function(){if(!this._fullResourcePath){var a=this.getModel().fileName;this._fullResourcePath=new d(a)}return this._fullResourcePath},_getCurrentBasePath:function(){var a=new d(c.getProject()),b=B.getPreferences("davinci.ui.ProjectPrefs",a);null!==b.webContentFolder&&""!==b.webContentFolder&&(a=a.append(b.webContentFolder));return a},getRelativeFileString:function(a){var b=this.getFullResourcePath().getParentPath();
return this._getCurrentBasePath().append(a).relativeTo(b).toString()},_setSource:function(b,c,d,f){delete this._requireHtmlElem;delete this._dojoScriptElem;delete this.rootWidget;if(this.frameNode){var e=this.frameNode.contentDocument||this.frameNode.contentWindow&&this.frameNode.contentWindow.document;if(e)try{var g=k.get(e).require("dijit/registry")._destroyAll();g&&(g.forEach(function(b){a.destroy(b,!0)}),g._hash={})}catch(h){console.error("error cleaning registry",h)}}this._srcDocument=b;f&&(e=
b.getDocumentElement().getChildElement("body"),e.setAttribute("data-maq-device",f.device),e.setAttribute("data-maq-flow-layout",f.flowlayout),e.setAttribute("data-maq-comptype",f.comptype));this.loadRequires("html.body",!0,!1,!0).then(function(){f&&this.loadTheme(f);this._setSourcePostLoadRequires(b,c,d,f)}.bind(this))},_setSourceData:function(a){f.publish(n.EVENTS.ON_SET_SOURCE_DATA,{data:a,context:this,editor:this.editor},this);this.getGlobal();this.themeChanged();var b={title:a.title,scripts:a.scripts,
modules:a.modules,styleSheets:a.styleSheets,bodyClasses:a.bodyClasses,style:a.style};f.publish(n.EVENTS.ON_BUILD_HEADER,{data:b,context:this,editor:this.editor},this);this.setHeader(b);var c=a.content||"";if(b=this.isActive())this.select(null),this.getTopWidgets().forEach(this.detach,this);var d={},g=this.getContainerNode();a.maqAppStates&&(d.body=a.maqAppStates);this.getTopWidgets().forEach(function(a){a.getContext()&&a.destroyWidget()});var k=this.getGlobal().require("dijit/registry");k.forEach(function(a){a.destroy()});
k.forEach(function(a){a.destroy();k.remove(a.id)});var c=c.replace(/<\s*\/\s*br\s*>/gi,""),h;this.getGlobal();var m=this.getDojo();m.create||this.getGlobal().require(["dojo/dom-construct","dojo/dom-style","dojo/dom-attr","dojo/_base/html"],function(a,b,c,d){m.create=a.create;m.destroy=a.destroy;m.place=a.place;m.toDom=a.toDom});this.getGlobal().require("dojox/html/_base").set(g,c,{executeScripts:!0,onEnd:function(){h=this._code;this.executeScripts=!1;this.inherited("onEnd",arguments)}});y(g);e("*",
g).forEach(y);g.setAttribute("data-maq-ws","collapse");(a=this._srcDocument.getDocumentElement().getChildElement("body"))&&a.addAttribute("data-maq-ws","collapse");this.getGlobal();(a=this.getDocumentElement().getChildElement("body"))&&a.getAttribute("data-maq-device");var p={SCRIPT:1,STYLE:1},q=function(a){dojo.forEach(a.childNodes,function(a){3==a.nodeType?a.nodeValue=a.data.replace(/^[\f\n\r\t\v\ ]+$/g,""):1!=a.nodeType||p[a.nodeName]||q(a)})};q(g);this._loadFileStatesCache=d;this.global=this.getGlobal();
return this._processWidgets(g,b,this._loadFileStatesCache,h)},getSource:function(){return this._srcDocument.getText()},getDocumentElement:function(){return this._srcDocument.getDocumentElement()},getDocumentLocation:function(){return this._srcDocument.fileName},getHeader:function(){return this._header||{}},setHeader:function(a){var b=[],c,d,f;this._header&&(b=this._header.styleSheets||[],d=this._header.bodyClasses);if(a){c=a.styleSheets||[];f=a.bodyClasses;if(a.modules){var e=this.getGlobal().require;
a.modules.map(function(a){return[a.replace(/\./g,"/")]}).forEach(e)}if(a.className){var g=a.className.split(" ");dojo.some(g,function(a,b){g.splice(b,1);f=g.join(" ");return!0})}}d!=f&&(e=this.getContainerNode(),d&&m.remove(e,d),f&&m.add(e,f));b!=c&&(b=[].concat(b),dojo.forEach(c,function(a){var c=dojo.indexOf(b,a);0>c?this.loadStyleSheet(a):b.splice(c,1)},this),dojo.forEach(b,this.unloadStyleSheet,this));this.setStyle(a?a.style:void 0);this._header=a},onload:function(){this.getCompType();this._connects=
(this._connects||[]).concat(g.addInActivityMonitor(this.getDocument()));var a=this.getMobileDevice();a&&(this.setMobileDevice(a),this.visualEditor.setDevice(a,!0),this.visualEditor.setOrientation(this.getMobileOrientation()));this._configDojoxMobile(!0);window.setTimeout(function(){this.widgetAddedOrDeleted();b.publish("/davinci/ui/context/loaded",[this]);this._markDirtyAtLoadTime?(this.editor.setDirty(!0),delete this._markDirtyAtLoadTime,this.editor.save(!0)):this.editor.setDirty(this.hasDirtyResources());
this.addPseudoClassSelectors()}.bind(this),500)},_onLoadHelpers:function(){var a={};e("\x3e *",this.rootNode).map(q.getWidget).forEach(function(b){var c=b.getHelper();if(c&&c.onLoad){var d=a[b.type];a[b.type]=!0;c.onLoad(b,d)}},this)},_addHeadElement:function(a,b,c){var d=this.getDocumentElement().getChildElement("head");if(!c){var f=this._significantAttrs[a]||"src";if(d.getChildElements(a).some(function(a){return a.getAttribute(f)===b[f]}))return}c=new r(a);for(var g in b)b.hasOwnProperty(g)&&c.addAttribute(g,
b[g]);d.addChild(c);dojo.withGlobal(this.getGlobal(),function(){h.create(a,b,e("head")[0])})},_removeHeadElement:function(a,b){var c=this.getDocumentElement().getChildElement("head");c.getChildElements(a).some(function(a){var d=!0,f;for(f in b)if(b.hasOwnProperty(f)&&a.getAttribute(f)!==b[f]){d=!1;break}if(d)return c.removeChild(a),!0});dojo.withGlobal(this.getGlobal(),function(){var c=a,d;for(d in b)b.hasOwnProperty(d)&&(c+="["+d+'\x3d"'+b[d]+'"]');e(c).orphan()})},getDocument:function(){var a=this.getContainerNode();
return a&&a.ownerDocument},getGlobal:function(){var a=this.getDocument();return a?k.get(a):null}})})},"davinci/ve/_ContextWidgets":function(){define("dojo/_base/declare dojo/query dojo/Deferred dojo/promise/all dojo/_base/connect ../Theme ./widget ./Focus ./metadata ./States ./HTMLWidget ./utils/GeomUtils dojox/html/_base".split(" "),function(p,m,h,e,b,k,a,f,n,g,d,c){return p(null,{_processWidgets:function(a,b,c,d){var f=[];this._loadFileDojoTypesCache={};dojo.forEach(m("*",a),function(a){var b=a.getAttribute("data-dojo-type")||
a.getAttribute("dojoType")||a.getAttribute("dvwidget");b||(b="html."+a.tagName.toLowerCase());f.push(this.loadRequires((b||"").replace(/\./g,"/"),!1,!0));f.push(this._preProcess(a));this._preserveStates(a,c);this._preserveDojoTypes(a)},this);var g=new h;e(f).then(function(){this.getGlobal().require("dojo/ready")(function(){try{this.getGlobal().require("dijit/registry"),this.getGlobal().require("dojo/parser").parse(a).then(function(){this._restoreDojoTypes();g.resolve();b&&this._attachAll();if(d)try{dojox.html.evalInGlobal(d,
a)}catch(c){console.error("Error eval script in Context._setSourceData, "+c)}}.bind(this),function(a){g.reject(a)})}catch(c){console.error("error in _processWidgets",c),g.reject(c)}}.bind(this))}.bind(this));return g},_preProcess:function(b){var c=b.getAttribute("data-dojo-type")||b.getAttribute("dojoType");c||(c="html."+b.tagName.toLowerCase());return a.requireWidgetHelper((c||"").replace(/\./g,"/")).then(function(a){a&&a.preProcess&&a.preProcess(b,this)}.bind(this))},attach:function(a){if(a&&!a._edit_focus)if(a._srcElement||
(a._srcElement=this._srcDocument.findElement(a.id)),a.type||(a.type=a.isHtmlWidget?"html."+a.getTagName():a.isGenericWidget?a.domNode.getAttribute("dvwidget"):a.isObjectWidget?a.getObjectType():a.declaredClass.replace(/\./g,"/")),a.metadata=a.metadata||n.query(a.type),a._edit_context=this,a.attach(),"_"==a.type.charAt(a.type.lastIndexOf(".")+1))a.internal=!0;else{var b=a.getId();if(b){var c=this._widgetIds;-1===c.indexOf(b)&&c.push(b)}if(b=a.getObjectId(a))c=this._objectIds,-1===c.indexOf(b)&&c.push(b);
dojo.forEach(a.getChildren(!0),this.attach,this)}},_attachAll:function(){var a=this.rootWidget=new d({},this.rootNode);a._edit_context=this;a.isRoot=!0;this._srcDocument.getDocumentElement().getChildElement("body");a._srcElement=this._srcDocument.getDocumentElement().getChildElement("body");a._srcElement&&a._srcElement.setAttribute("id","myapp");this._attachChildren(this.rootNode)},_attachChildren:function(b){m("\x3e *",b).map(a.getWidget).forEach(this.attach,this)},detach:function(a){this.getGlobal();
var b=function(a,b){var c=a.indexOf(b);-1!=c&&a.splice(c,1)},c=a.getId(),d=this;c&&b(this._widgetIds,c);(c=a.getObjectId())&&b(this._objectIds,c);if(this._selection)for(b=0;b<this._selection.length;b++)this._selection[b]==a&&(this.focus(null,b),this._selection.splice(b,1));if(b=n.getLibraryForType(a.type)){var c=b.name,f=[a.type,this];n.invokeCallback(b,"onRemove",f);--this._widgets[c];0===this._widgets[c]&&n.invokeCallback(b,"onLastRemove",f)}a.getChildren();dojo.forEach(a.getChildren(),function(a){d.detach(a)},
this);delete this._containerControls},widgetChanged:function(a,b){1==a?this.widgetHash[b.id]=b:2==a&&delete this.widgetHash[b.id]},resizeAllWidgets:function(){this.getTopWidgets().forEach(function(a){a.resize&&a.resize()})},getAllWidgets:function(){var a=[],b=function(c){a.push(c);c.getChildren().forEach(function(a){b(a)})};this.rootWidget&&b(this.rootWidget);return a},widgetAddedOrDeleted:function(a){var b=k.getHelper(this.getTheme());b&&b.widgetAddedOrDeleted?b.widgetAddedOrDeleted(this,a):b&&b.then&&
b.then(function(b){b.helper&&(this.theme.helper=b.helper,b.helper.widgetAddedOrDeleted&&b.helper.widgetAddedOrDeleted(this,a))}.bind(this))},clearCachedWidgetBounds:function(){this.getAllWidgets().forEach(function(a){(a=a.domNode)&&c.clearGeomCache(a)})},updateFocus:function(b,d,f){this.editor.getDisplayMode&&"source"==this.editor.getDisplayMode()||a.requireWidgetHelper(b.type).then(function(a){if(this.editor.isActiveEditor()){var e,g,k;if(!n.queryDescriptor(b.type,"isInvisible"))switch((a=b.getHelper())&&
a.getMarginBoxPageCoords?e=a.getMarginBoxPageCoords(b):(e=b.getStyleNode(),a&&a.getSelectNode&&(e=a.getSelectNode(this)||e),e=c.getMarginBoxPageCoords(e)),k=b.getParent(),g={move:!(k&&k.isLayout&&k.isLayout())},k&&k.isLayout&&k.isLayout()?"none":n.queryDescriptor(b.type,"resizable")){case "width":g.resizeWidth=!0;break;case "height":g.resizeHeight=!0;break;case "both":g.resizeWidth=!0,g.resizeHeight=!0}this.focus({box:e,op:g,hasLayout:b.isLayout&&b.isLayout(),isChild:k&&k.isLayout&&k.isLayout()},
d,f);this._focuses[0].showContext(this,b)}}.bind(this))},updateFocusAll:function(){if(!this.editor||!this.editor.getDisplayMode||"source"!=this.editor.getDisplayMode()){var a=this._selection;if(a)for(var b=0;b<a.length;b++)this.updateFocus(a[b],b);g.updateHighlightsBaseStateWidgets(this)}},hideFocusAll:function(a){a||(a=0);var b=this.getFocusContainer();if(this._focuses)for(;a<this._focuses.length;a++){var c=this._focuses[a];c.domNode.parentNode==b&&(c.hide(),b.removeChild(c.domNode))}},getFocus:function(a){a=
this.getSelection().indexOf(a);return-1==a?null:this._focuses[a]},isFocusNode:function(a){if(this._selection&&this._selection.length&&this._focuses&&this._focuses.length>=this._selection.length)for(var b=0;b<this._selection.length;b++)if(this._focuses[b].isFocusNode(a))return!0;return!1},focus:function(a,c,d){this._focuses=this._focuses||[];var e=!1;void 0===c&&(e=!0,c=0);var g;c<this._focuses.length?g=this._focuses[c]:(dojo.withDoc(this.getDocument(),dojo.hitch(this,function(){g=new f;g._edit_focus=
!0;g._context=this})),this._focuses.push(g));var k=this.getFocusContainer();if(a){if(a.box&&a.op){g._connected||(this._connects.push(b.connect(g,"onExtentChange",this,"onExtentChange")),g._connected=!0);var h=this.getSelection();g.resize(a.box,h[0]);var m=c<h.length?c:0;g.resize(a.box,h[m]);g.allow(a.op);g.domNode.parentNode!=k&&k.appendChild(g.domNode);g.show(h[m],{inline:d})}else g.hide();c++}else e||(g.domNode.parentNode==k&&(g.hide(),k.removeChild(g.domNode)),this._focuses.splice(c,1),this._focuses.push(g));
e&&this.hideFocusAll(c)},getFocusContainer:function(){var a=document.getElementById("focusContainer");a||(a=dojo.create("div",{"class":"focusContainer",id:"focusContainer"},document.body),davinci.Workbench.focusContainer=a);return a},getTopWidgets:function(){for(var a=[],b=this.rootNode.firstChild;b;b=b.nextSibling)1==b.nodeType&&b._dvWidget&&a.push(b._dvWidget);return a}})})},"davinci/lang/ui/ui":function(){define([],function(){return{dontShowAgain:"Don't show again",selectFile:"Select a file",openFile:"Open File",
aboutMaqetta:"About Maqetta",productVersion:"Version: ${0}",productDate:"Date: ${0}",build:"Build: ${0}",library:"Library",version:"Version",include:"Include",source:"Source",baseLocation:"Base Location",invalidDownloadFileName:"File name may only contain letters, numbers, \x26#8216;_\x26#8216;, and \x26#8216;.\x26#8216;.",selectedFiles:"Selected Files",noFilesSelected:"No files selected!",downloadButtonLabel:"Download",themeAlreadyExists:"Theme already Exists!",invalidThemeName:"Invalid theme name",
errorCreatingTheme:"Error creating theme: ",creatingTheme:"Creating theme",noUserThemes:"No user themes found in workspace. Please create a new theme before editing.",themeSetsDialog:"Manage theme sets",renameThemeSet:"Rename theme set",themeSets:"Theme sets:",currentlySelectedThemeSet:"Currently selected theme set:",themeSetName:"Name:",desktopTheme:"Dojo desktop 1.7 theme:",mobileTheme:"Dojo mobile 1.7 theme:",android:"Android:",blackberry:"Blackberry:",ipad:"iPad:",iphone:"iPhone:",other:"Other:",
selectTheme:"Select theme",themeSet:"Theme set:",themeVersionMessage:"Theme version does not match workspace version this could produce unexpected results. We suggest recreating the custom theme using the current version of Maqetta and deleting the existing theme.",addThemeSet:"Add theme set",deleteThemeSet:"Delete theme set",workspaceLocation:"Workspace Location",savingReadonlyFile:"This file is a read-only file. Please save it to a writeable location.",create:"Create",open:"Open",save:"Save",select:"Select",
update:"Update",unknown:"unknown",fileName:"File name",folderName:"Folder name",parentFolder:"Parent folder: ",newFolderLabel:"New folder",cancelButtonLabel:"Cancel",newFolderName:"Name:",createFolder:"Create Folder",createNewFile:"Create New File",createMobileApplication:"Create a Mobile Application",createDesktopApplication:"Create a Desktop Application",createSketchHiFi:"Create a Sketch (high-fidelity)",createSketchLoFi:"Create a Sketch (low-fidelity)",createNewCSSFile:"Create New CSS File",createNewJSFile:"Create New JavaScript File",
createNewFolder:"Create New Folder",saveFileAs:"Save File As",downloadFile:"Download",selectFiles:"Select Files...",selectZip:"Select ZIP file...",upload:"Upload",addFiles:"Upload",uploading:"Uploading...",completed:"completed: ${0} \n",done:"Done",explodeZipWarning:"Warning: Contents of .zip files will overwrite any conflicting files in your workspace",mustEnterFileName:"You must enter a file name.",cannotSelect:"Cannot select ${0}. It is a folder.",fileAlreadyExistsOverwrite:"File ${0} already exists. OK to overwrite?",
cannotCreate:"Cannot create ${0}. It already Exists.",fileNameSlashCharacter:"File names cannot contain a slash character (/). Your file name is: ${0}",doesNotHaveExtension:"The name ${0} does not have an extension (e.g., .html, .css or .js) and will be treated as a plain text file. OK to proceed?",areYouSureDelete:"Are you sure you want to delete ${0}?",areYouSureDeleteProject:"Are you sure you want to delete project ${0}?",noResourcesSelected:"No resources are currently selected.",optimizeOption:"Use Dojo Web Builder (experimental)",
downloadFullSource:"Download uncompressed source for selected libraries (if available)",selectAll:"All",selectNone:"None",themeToClone:"Theme to clone",newName:"New Name",selectTheme:"Select a Theme",newProject:"New Project",renameProjectDialogTitle:"Rename Project To...",deleteProjectButtonTitle:"Delete Project",renameProjectButtonTitle:"Rename Project...",deleteOnlyProjectError:"You can't delete the only project in your workspace!",newFileShowFiles:"Show file picker",newFileHideFiles:"Hide file picker",
root:"(root)",nhfoDevice:"Device:",nhfoDeviceTooltip:"Select an initial mobile device",nhfoThemeButtonLabel:"Theme...",nhfoThemeButtonTitle:"Select themes or theme set for new HTML file",renameNewLabel:"Name:",renameButtonLabel:"Rename",renameDialogTitle:"Rename To...",createProject:"New project",createProjectMenuItem:"New project...",deleteProjectMenuItem:"Delete this project...",renameProjectMenuItem:"Rename this project...",saveAsProjectTemplateMenuItem:"Save as project template...",manageProjectTemplatesMenuItem:"Manage project templates...",
modifyLibrariesMenuItem:"Modify libraries...",modifyLibraries:"Modify libraries",projectColon:"Project:",ProjectMenu:"Project menu",newProjectName:"Name:",newProjectTemplate:"Template:",newProjectUseProjectTemplate:"Use project template",newProjectCloneExistingProject:"Copy files from current project into new project",newProjectEclipseSupport:"New project should be Eclipse-compatible",newProjectNameExists:"A project with this name already exists",saveAsProjectTemplate:"Save as project template",newProjectTemplateName:"Project template name:",
newProjectTemplateShareLabel:"Share with everyone",newProjectTemplateOverwrite:"Project template {0} already exists. OK to overwrite?",newProjectTemplateCreationSuccess:"Project template {0} has been saved",newProjectTemplateCreationFailure:"Error: Project template {0} save operation failed",newProjectTemplateCancelled:"Operation cancelled",manageProjectTemplates:"Manage project templates",ManageProjectTemplatesHeaderName:"Project template name",ManageProjectTemplatesHeaderShared:"Share with everyone?",
ManageProjectTemplatesHeaderCreatedBy:"Created by",ManageProjectTemplatesHeaderCreatedOn:"Created on",ManageProjectTemplatesHeaderLastModified:"Last updated",ManageProjectTemplatesNoTemplates:"You have no project templates.",ManageProjectTemplatesDuplicateNames:"Invalid entries - two project templates have the same name",ManageProjectTemplateAboutToOccur:"The following actions are about to occur:",ManageProjectTemplateDeletions:"project template deletions",ManageProjectTemplateModifications:"project template modifications",
ManageProjectTemplateOKToProceed:"OK to proceed?",ManageProjectTemplatesInitializing:"Initializing...",modify:"Modify",User:"Account",currentProject:"Current Project:",selectProject:"Select a Project:",NoteOperationNotUndoable:"Note: this operation is not undoable."}})},"davinci/ui/Resource":function(){define("system/resource ../model/Path ../Runtime ../Workbench ../workbench/Preferences ../ve/RebuildPage".split(" "),function(p,m,h,e,b){return dojo.setObject("davinci.ui.Resource",{newHTMLDialogSpecificClass:"davinci/ui/widgets/NewHTMLFileOptions",
newHTMLMobile:function(){},newHTMLDesktop:function(){},newHTMLSketchHiFi:function(){},newHTMLSketchLoFi:function(){},newHTML:function(b){},newCSS:function(){},selectResource:function(b){for(var a=dijit.byId("resourceTree"),f=[];b.parent;b=b.parent)f.unshift(b);a.set("path",f)},newFolder:function(b,a){},closeEditor:function(b,a){},save:function(){var b=e.getOpenEditor();b&&system.resource.findResourceAsync(b.fileName).then(dojo.hitch(this,function(a){a.readOnly()?this.saveAs(a.getExtension(),"save"):
b.save()}))},saveAs:function(b,a){},newJS:function(){},openFile:function(){},addFiles:function(){},addFilesZip:function(){},getNewFileName:function(b,a,f){var e,g,d=0;f||(f="");do d++,g="folder"===b?"folder"+d:"file"+d+f,e=a.getPath()+"/"+g,e=p.findResource(e);while(e);return g},canModify:function(b){return!b.readOnly()},newProject:function(){},renameAction:function(){},getResourceIcon:function(b,a){},getResourceClass:function(b){if(b.readOnly())return"readOnlyResource"},deleteAction:function(){},
getSelectedResources:function(){var b=h.getSelection();if(b[0]&&b[0].resource)return dojo.map(b,function(a){return a.resource})},alphabeticalSortFilter:{filterList:function(b){return b.sort(function(a,b){return a.name>b.name?1:a.name<b.name?-1:0})}},foldersFilter:{filterItem:function(b){if("File"==b.elementType)return!0}},openPath:function(b,a){},openResource:function(b,a){}})})},"davinci/actions/StickyNoteAction":function(){define("dojo/_base/declare ./Action ../Workbench davinci/commands/CompoundCommand ../ve/commands/AddCommand ../ve/commands/MoveCommand ../ve/commands/ResizeCommand ../ve/tools/CreateTool ../ve/widget ../ve/metadata".split(" "),
function(p,m,h,e,b,k,a,f,n,g){return p("davinci.actions.StickyNoteAction",m,{run:function(d){var c=h.getOpenEditor();if(d=davinci.ve.metadata.queryDescriptor("html.stickynote")){var m=dojo.clone(d);m.context=c.getContext();if(c&&c.getContext){var p=void 0;dojo.withDoc(c.getContext().getDocument(),function(){p=n.createWidget(m)});p&&(d=new e,c.getContext().getDocument(),c.getContext().getContainerNode(),d.add(new b(p,c.getContext().getContainerNode())),f.prototype.checkAddToCurrentState(d,p),d.add(new k(p,
50,50)),p.isLayoutContainer&&d.add(new a(p,args.size&&args.size.w,args.size&&args.size.h)),c.getContext().getCommandStack().execute(d),g.getSmartInput(p.type).then(function(a){a&&a.displayOnCreate?c.getContext().select(p,null,!0):c.getContext().select(p)}.bind(this)))}}},isEnabled:function(a){return(a=h.getOpenEditor())&&a.getContext}})})},"davinci/actions/SaveAsWidget":function(){define("dojo/_base/declare ./Action ../Workbench davinci/ui/Dialog ../ui/SaveAsWidgetForm davinci/lang/ui/common".split(" "),
function(p,m,h,e,b,k){return p("davinci.actions.SaveAsWidget",m,{run:function(a){"davinci.ve.Context"!==a.declaredClass&&(a="function"===typeof a.getContext?a.getContext():h.getOpenEditor().getContext());a=this._generateMetadata(a);this._showDialog(a)},_generateMetadata:function(a){var b={spec:"1.0",require:[],library:{}},e=a.model.find({elementType:"HTMLElement",tag:"body"},!0);b.content=dojo.trim(e.getText(a).match(/<body[^>]*>([\s\S]*)<\/body>/)[1]);this._getRequires(a.getTopWidgets(),b);return b},
_getRequires:function(a,b){function e(a,b,c){dojo.forEach(a,function(a){if(!c.hasOwnProperty(a.type)){c[a.type]=!0;dojo.forEach(a.metadata.require,function(a){this._inRequiresArray(a,b.require)||b.require.push(a)},this);for(var d in a.metadata.library)a.metadata.library.hasOwnProperty(d)&&(b.library[d]||(b.library[d]=a.metadata.library[d]))}e.call(this,a.getChildren(),b,c)},this)}var g=g||{};e.call(this,a,b,g);if(1<b.require.length){for(var g=b.require.slice(0,1),d=1;d<b.require.length;d++){var c=
b.require[d];c.$text&&g[g.length-1].$text?g[g.length-1].$text+="\n"+c.$text:g.push(c)}b.require=g}},_inRequiresArray:function(a,b){var e=a.$text?a.$text.replace(/\s/g," "):"";return dojo.some(b,function(b){return a.type===b.type&&(a.src&&b.src&&a.src===b.src&&(a.$library&&b.$library&&a.$library===b.$library||!a.$library&&!b.$library)||a.$text&&b.$text&&e===b.$text.replace(/\s/g," "))})},_showDialog:function(a){var f=new e({title:k.sawdTitle,"class":"dvSaveAsWidgetDialog",execute:dojo.hitch(this,function(a){this._saveMetadata(a.metadata)}),
onHide:function(){setTimeout(function(){f.destroyRecursive()},f.duration)}});a=new b({parentId:f.id,metadata:a});f.set("content",a);f.show()},_saveMetadata:function(a){}})})},"davinci/ui/SaveAsWidgetForm":function(){define("dojo/_base/declare dijit/_Templated dijit/_Widget davinci/lang/ui dijit/lang/_common dojo/text!./templates/SaveAsWidgetForm.html".split(" "),function(p,m,h,e,b,k){return dojo.declare("davinci.ui.SaveAsWidgetForm",[h,m],{templateString:k,widgetsInTemplate:!0,postMixInProperties:function(){this.descriptionString=
b.sawfDesc;this.nameString=b.name;this.idString=b.id;this.versionString=b.version;this.requiredString=b.required;this.saveString=b.save;this.cancelString=b.cancel;this.metadataTitle=b.sawfMetadataTitle;this.namePromptString=b.sawfNamePrompt;this.idPromptString=b.sawfIdPrompt;this.initialTextareaContent=dojo.toJson(this.metadata,!0)},postCreate:function(){this.inherited(arguments);dojo.forEach(["nameInputNode","idInputNode","versionInputNode","textareaNode"],function(a){this.connect(this[a],"onChange",
function(b){this._onChange(a,b)})},this);this.idInputNode.regExp="[a-zA-Z]+://[^\\s]+";this.connect(this.buttonCancel,"onClick",function(){dijit.byId(this.parentId).hide()})},_onChange:function(a,b){switch(a){case "nameInputNode":this.metadata.name=b;break;case "idInputNode":this.metadata.id=b;break;case "versionInputNode":this.metadata.version=b;break;case "textareaNode":try{this.metadata=dojo.fromJson(b),this._invalidMetadata=!1}catch(e){this._invalidMetadata=!0}}"textareaNode"!==a&&this.textareaNode.set("value",
dojo.toJson(this.metadata,!0));this.buttonSave.set("disabled",!this._isValid())},_isValid:function(){return this.idInputNode.isValid()&&!this._invalidMetadata}})})},"davinci/lang/ui/common":function(){define([],function(){return{save:"Save",cancel:"Cancel",discard:"Discard",sawdTitle:"Save As Widget",name:"Name",id:"ID",version:"Version",required:"required",sawfDesc:"Enter the following information to complete the custom widget metadata.",sawfMetadataTitle:"Edit full metadata for custom widget (advanced)",
sawfNamePrompt:'A unique "common" name.',sawfIdPrompt:"A unique identifier for this widget in the form of a URI."}})},"davinci/actions/UserNameAction":function(){define(["dojo/_base/declare","davinci/Runtime","./Action","davinci/lang/ui"],function(p,m,h,e){return p("davinci.actions.UserNameAction",h,{run:function(){},getName:function(){var b=m.getUserDisplayName();return e.User+": \x3ci\x3e"+b+"\x3c/i\x3e"}})})},"davinci/actions/LogoutAction":function(){define(["dojo/_base/declare","./Action","davinci/lang/ui"],
function(p,m,h){return p("davinci.actions.LogoutAction",m,{run:function(){dojo.xhrPost({url:"../logout",handleAs:"text",headers:{"Content-Type":"application/x-www-form-urlencoded","Orion-Version":"1"},postData:"",load:function(e,b){location.href="welcome"}.bind(this)})},isEnabled:function(e){return!0}})})},"davinci/ve/actions/CopyAction":function(){define(["dojo/_base/declare","./_CutCopyAction","../../Runtime"],function(p,m,h){return p("davinci.ve.actions.CopyAction",[m],{_invokeSourceEditorAction:function(e){e.htmlEditor.copyAction.run()},
_executeAction:function(e,b,k,a){a=h.clipboard;h.clipboard=k;if(!a)e.onSelectionChange(b)}})})},"davinci/ve/actions/_CutCopyAction":function(){define("dojo/_base/declare davinci/Workbench davinci/ve/actions/ContextAction davinci/commands/CompoundCommand davinci/ve/commands/RemoveCommand davinci/ve/widget".split(" "),function(p,m,h,e,b,k){return p("davinci.ve.actions.CutAction",[h],{run:function(a){if(a=this.fixupContext(a))if("davinci.ve.PageEditor"==a.declaredClass&&"source"==a._displayMode)this._invokeSourceEditorAction(a);
else{var f=this._normalizeSelection(a);if(0<f.length){var h=new e,g=[],d=a.reorderPreserveSiblingOrder(f);dojo.forEach(d,function(a){var d=a.getData({identify:!1});d&&g.push(d);var e=a.getHelper();if(e&&e.getRemoveCommand){if(a=e.getRemoveCommand(a),"compound"===a.name){for(var e=[],f=a._commands,m=f.length-1;0<m;m--){var p=f[m];"remove"===p.name&&(p=k.byId(p._id).getData({identify:!1}),e.push(p))}d.associatedCopiedWidgetData=e}}else a=new b(a);h.add(a)});this._executeAction(a,f,g,h)}}},isEnabled:function(a){a=
this.fixupContext(a);var b=m.getOpenEditor();return b&&a?(a=0<a.getSelection().length,"davinci.ve.PageEditor"==b.declaredClass?(b=b.getDisplayMode(),a&&"source"!=b):a):!1},shouldShow:function(a){return(a=(a=this.fixupContext(a))?a.editor:null)&&"davinci.ve.PageEditor"==a.declaredClass},_invokeSourceEditorAction:function(a){},_executeAction:function(a,b,e,g){}})})},"davinci/ve/actions/ContextAction":function(){define(["dojo/_base/declare","davinci/actions/Action","davinci/Runtime"],function(p,m,h){return p("davinci.ve.actions.ContextAction",
[m],{_normalizeSelection:function(e){var b=e.getSelection();if(2>b.length)return b;var k=e.rootWidget,a=[];dojo.forEach(b,function(f){for(var h=f.getParent();h&&h!=k;){for(var g=0;g<b.length;g++)if(b[g]==h){e.deselect(f);return}h=h.getParent()}a.push(f)});return a},_getContext:function(e){return e?e:(e=h.currentEditor)&&(e.getContext&&e.getContext()||e.context)},fixupContext:function(e){e=this._getContext(e);return"davinci.ve.Context"==e.declaredClass||"xideve/delite/Context"==e.declaredClass?e:"function"==
typeof e.getContext?e.getContext():null}})})},"davinci/ve/commands/RemoveCommand":function(){define(["dojo/_base/declare","davinci/ve/commands/_hierarchyCommand","davinci/ve/widget","davinci/ve/States","davinci/ve/commands/ModifyCommand"],function(p,m,h,e,b){return p("davinci.ve.commands.RemoveCommand",[m],{name:"remove",constructor:function(b){this._id=b?b.id:void 0},execute:function(){if(this._id){var k=h.byId(this._id);if(k){var a=k.getContext(),f=k.getParent()||a.getContainerNode(),m,g=k.getHelper();
g&&g.onRemove&&(m=g.onRemove(k));if(!this._data){this._index=dojo.indexOf(f.getChildren(),k);if(0>this._index)return;this._data=k.getData();this._parentId=f.id}this._data.context=a;g=this._isRefreshOnDescendantChange(k);a&&a.detach(k);f.removeChild(k);a&&a.widgetChanged(a.WIDGET_REMOVED,k);k.destroyWidget();a&&a.widgetAddedOrDeleted();g&&(new b(g,null,null,f._edit_context)).execute();e.resetState(k.domNode);m&&m()}}},undo:function(){if(this._data&&this._parentId){var k=h.byId(this._parentId);if(k){var a=
h.createWidget(this._data);if(a){k.addChild(a,this._index);var f=k.getContext();f&&(f.attach(a),a.startup(),a.renderWidget(),f.widgetAddedOrDeleted(),f.widgetChanged(f.WIDGET_ADDED,a),(f=this._isRefreshOnDescendantChange(a))&&(new b(f,null,null,k._edit_context)).execute(),e.resetState(a.domNode))}}}}})})},"davinci/ve/actions/CutAction":function(){define(["dojo/_base/declare","./_CutCopyAction","../../Runtime"],function(p,m,h){return p("davinci.ve.actions.CutAction",[m],{_invokeSourceEditorAction:function(e){e.htmlEditor.cutAction.run()},
_executeAction:function(e,b,k,a){h.clipboard=k;e.select(null);e.getCommandStack().execute(a)}})})},"davinci/ve/actions/DeleteAction":function(){define(["dojo/_base/declare","davinci/Workbench","davinci/ve/actions/ContextAction","davinci/commands/CompoundCommand","davinci/ve/commands/RemoveCommand"],function(p,m,h,e,b){return p("davinci.ve.actions.DeleteAction",[h],{run:function(k){if(k=this.fixupContext(k)){var a=this._normalizeSelection(k);if(0<a.length){var f=void 0;if(1===a.length)var a=a[0],h=
a.getHelper(),f=h&&h.getRemoveCommand?h.getRemoveCommand(a):new b(a);else f=new e,dojo.forEach(a,function(a){var d=a.getHelper();a=d&&d.getRemoveCommand?d.getRemoveCommand(a):new b(a);f.add(a)});k.select(null);k.getCommandStack().execute(f)}}},isEnabled:function(b){b=this.fixupContext(b);var a=m.getOpenEditor();return a&&b?(b=0<b.getSelection().length,"davinci.ve.PageEditor"==a.declaredClass?(a=a.getDisplayMode(),b&&"source"!=a):b):!1},shouldShow:function(b){return(b=(b=this.fixupContext(b))?b.editor:
null)&&"davinci.ve.PageEditor"==b.declaredClass}})})},"davinci/ve/actions/PasteAction":function(){define(["dojo/_base/declare","../../Workbench","./ContextAction","../tools/PasteTool","../../Runtime"],function(p,m,h,e,b){return p("davinci.ve.actions.PasteAction",[h],{shortcut:{keyCode:86,ctrlKey:!0},run:function(k){if(k=this.fixupContext(k))if("davinci.ve.PageEditor"==k.declaredClass&&"source"==k._displayMode)k.htmlEditor.pasteAction.run();else{var a=b.clipboard;a&&k.setActiveTool(new e(a))}},isEnabled:function(e){e=
this.fixupContext(e);var a=m.getOpenEditor();return a&&e?"davinci.ve.PageEditor"==a.declaredClass?(e=a.getDisplayMode(),b.clipboard&&"source"!=e):b.clipboard:!1},shouldShow:function(b){return(b=(b=this.fixupContext(b))?b.editor:null)&&"davinci.ve.PageEditor"==b.declaredClass}})})},"davinci/ve/tools/PasteTool":function(){define("dojo/_base/declare ./CreateTool ../widget ../metadata ../../commands/CompoundCommand ../commands/AddCommand ../commands/MoveCommand ../commands/StyleCommand dojo/Deferred dojo/promise/all".split(" "),
function(p,m,h,e,b,k,a,f,n,g){return p("davinci.ve.tools.PasteTool",m,{constructor:function(a){this.inherited(arguments);this._position_prop=null;var b=a[0];b&&b.properties&&(b=h.parseStyleValues(b.properties.style),this._position_prop=h.retrieveStyleProperty(b,"position",""))},_create:function(d){var c=d.index,m,p,r=new b,B,y=[],A=new n,v=this._data.map(function(b){var u=new n,z=[];if(!this._loadType(b,z))return u.reject(),u;g(z).then(function(){var g=h.parseStyleValues(b.properties&&b.properties.style);
if("absolute"==this._position_prop){var n=parseInt(h.retrieveStyleProperty(g,"left","0px")),g=parseInt(h.retrieveStyleProperty(g,"top","0px"));m?p={x:n+m.x,y:g+m.y}:d.position?(p=d.position,m={x:d.position.x-n,y:d.position.y-g}):(p={x:n,y:g},m={x:0,y:0})}dojo.withDoc(this._context.getDocument(),function(){var g=function(b){void 0!==c&&0<=c&&c++;y.push(b);if(p){var d=this._context.getPreference("absoluteWidgetsZindex");r.add(new f(b,[{position:"absolute"},{"z-index":d}]));b=new a(b,p.x,p.y,B,null,
null,B);B||(B=b);r.add(b)}u.resolve()}.bind(this);b.context=this._context;e.getHelper(b.type,"tool").then(function(a){var e;a&&(e=new a(b));if(e&&e.addPasteCreateCommand)a={parent:d.parent||this._context.getContainerNode(),position:p,index:c},e.addPasteCreateCommand(r,a).then(function(a){if(!a)return u.reject(),u;g(a)});else{e=h.createWidget(b);if(!e)return u.reject(),u;r.add(new k(e,d.parent||this._context.getContainerNode(),c));this.checkAddToCurrentState(r,e);g(e)}}.bind(this))}.bind(this))}.bind(this));
return u}.bind(this));g(v).then(function(){r.isEmpty()||(this._context.getCommandStack().execute(r),setTimeout(function(){y.forEach(function(a,b){this._context.select(a,0<b)}.bind(this))}.bind(this),0));A.resolve()}.bind(this));return A},createWithFlowLayout:function(){return"absolute"!=this._position_prop}})})},"davinci/ve/actions/DuplicateAction":function(){define("dojo/_base/declare dojo/dom-style davinci/ve/actions/ContextAction davinci/commands/CompoundCommand davinci/ve/commands/AddCommand davinci/ve/commands/MoveCommand davinci/ve/tools/CreateTool davinci/ve/widget davinci/ve/utils/GeomUtils".split(" "),
function(p,m,h,e,b,k,a,f,n){return p("davinci.ve.actions.DuplicateAction",[h],{run:function(g){if((g=this.fixupContext(g))&&"davinci.ve.Context"===g.declaredClass&&"davinci/delite/Context"===g.declaredClass){var d=this._normalizeSelection(g);if(this.selectionSameParent(d)){var c=[];if(0<d.length){var h=new e;dojo.forEach(d,function(d){var e,p=d.getData({identify:!1});p&&(p.context=g,dojo.withDoc(g.getDocument(),function(){e=f.createWidget(p)},this),e&&(h.add(new b(e,d.getParent(),void 0)),a.prototype.checkAddToCurrentState(h,
e),c.push(e),"absolute"==(d&&d.domNode?m.get(d.domNode,"position"):null)&&(d=n.getMarginBoxPageCoords(d.domNode),d.l+=25,h.add(new k(e,d.l,d.t,void 0,void 0,void 0,!0)))))});g.getCommandStack().execute(h);dojo.forEach(c,function(a,b){g.select(a,0<b)},this)}}}},isEnabled:function(a){a=(a=this.fixupContext(a))&&a.getSelection?a.getSelection():[];return 0===a.length?!1:this.selectionSameParent(a)},shouldShow:function(a){return(a=(a=this.fixupContext(a))?a.editor:null)&&"davinci.ve.PageEditor"==a.declaredClass},
selectionSameParent:function(a){if(0===a.length)return!1;for(var b=a[0].getParent(),c=0;c<a.length;c++)if(a[c].getParent()!=b)return!1;return!0}})})},"davinci/ve/actions/EditValueAction":function(){define(["dojo/_base/declare","davinci/ve/actions/ContextAction"],function(p,m){return p("davinci.ve.actions.EditValueAction",[m],{run:function(h){if((h=this.fixupContext(h))&&"davinci.ve.Context"===h.declaredClass&&"davinci/delite/Context"===h.declaredClass){var e=h.getSelection();1===e.length&&h.select(e[0],
!1,!0)}},isEnabled:function(h){return(h=this.fixupContext(h))&&0<h.getSelection().length},shouldShow:function(h){return(h=(h=this.fixupContext(h))?h.editor:null)&&"davinci.ve.PageEditor"==h.declaredClass}})})},"davinci/ve/actions/EditPropertiesAction":function(){define(["dojo/_base/declare","davinci/ve/actions/ContextAction"],function(p,m){return p("davinci.ve.actions.EditPropertiesAction",[m],{run:function(h){(h=this.fixupContext(h))&&h.editor&&h.editor.editorContainer&&h.editor.editorContainer.hideShowProperties&&
h.editor.editorContainer.hideShowProperties()},isEnabled:function(h){this.fixupContext(h);return!0}})})},"davinci/ve/actions/SurroundAction":function(){define("dojo/_base/declare dojo/_base/array dojo/dom-style davinci/ve/actions/ContextAction davinci/commands/CompoundCommand davinci/ve/commands/AddCommand davinci/ve/commands/StyleCommand davinci/ve/commands/MoveCommand davinci/ve/commands/ResizeCommand davinci/ve/commands/ReparentCommand davinci/ve/tools/CreateTool davinci/ve/widget davinci/ve/utils/GeomUtils".split(" "),
function(p,m,h,e,b,k,a,f,n,g,d,c,q){return p("davinci.ve.actions.SurroundAction",[e],{run:function(e){e=this.fixupContext(e);var p,B,y,A,v=[],x,u=this.item.surroundWithTagName;if(u){dojo.withDoc(e.getDocument(),function(){x=c.createWidget({type:"html."+u,properties:{},children:[],context:e})});var z=new b,C=[].concat(e.getSelection()),I=C[0],D=I.getParent();q.getMarginBoxPageCoords(D.domNode);C.sort(function(a,b){return D.indexOf(a)-D.indexOf(b)});var H=e.getDocument(),E=H.defaultView&&H.defaultView.dojo;
E.style||(E.style=h);(H=m.every(C,function(a){if(E)return position_prop=E.style(a.domNode,"position"),"absolute"==position_prop}))&&m.forEach(C,function(a,b){v.push(q.getMarginBoxPageCoordsCached(a.domNode));z.add(new f(a,v[b].l,v[b].t,null,v[b]))});z.add(new k(x,D,D.indexOf(I)));d.prototype.checkAddToCurrentState(z,x);H&&(z.add(new a(x,[{position:"absolute"}])),m.forEach(C,function(a,b){var c=v[b].l+v[b].w,d=v[b].t+v[b].h;if(0==b||v[b].l<p)p=v[b].l;if(0==b||v[b].t<B)B=v[b].t;if(0==b||c>y)y=c;if(0==
b||d>A)A=d}),z.add(new f(x,p,B)),z.add(new n(x,y-p,A-B)));m.forEach(C,function(a){z.add(new g(a,x,"last"))});H&&m.forEach(C,function(a,b){z.add(new f(a,v[b].l,v[b].t,null,v[b]))});e.getCommandStack().execute(z);e.select(x)}else console.error("missing surroundWithTagName")},isEnabled:function(a){if((a=this.fixupContext(a))&&a.getSelection().length){var b=a.getSelection()[0].getParent(),c=[];if(!b||!b.length)return!1;if(m.every(a.getSelection(),function(a){var d=a.getParent();if(!d)return!1;c.push(b.indexOf(a));
return b.id==d.id})){c.sort();var d;for(a=c.shift();c.length;a=d)if(d=c.shift(),d!=a+1)return!1;return!0}}return!1}})})},"davinci/ve/actions/SelectParentAction":function(){define(["dojo/_base/declare","davinci/ve/actions/_SelectAncestorAction"],function(p,m){return p("davinci.ve.actions.SelectParentAction",[m],{run:function(h){var e=(h=this.fixupContext(h))&&h.getSelection();this.selectionSameParentNotBody(e)&&h.select(e[0].getParent())},isEnabled:function(h){h=(h=this.fixupContext(h))&&h.getSelection();
return this.selectionSameParentNotBody(h)}})})},"davinci/ve/actions/_SelectAncestorAction":function(){define(["dojo/_base/declare","davinci/ve/actions/ContextAction"],function(p,m){return p("davinci.ve.actions._SelectAncestorAction",[m],{shouldShow:function(h){return(h=this.fixupContext(h))&&h.editor&&"davinci.ve.HTMLPageEditor"==h.editor.editorID},selectionSameParentNotBody:function(h){if(!h||0===h.length)return!1;var e=h[0].getParent();if(!e||!e.domNode)return!1;for(var b=0;b<h.length;b++)if(h[b].getParent()!=
e)return!1;return!0}})})},"davinci/ve/actions/SelectAncestorAction":function(){define(["dojo/_base/declare","davinci/ve/actions/_SelectAncestorAction","davinci/Workbench","davinci/lang/ve"],function(p,m,h,e){return p("davinci.ve.actions.SelectAncestorAction",[m],{run:function(b){var k=(b=this.fixupContext(b))&&b.getSelection();if(this.selectionSameParentNotBody(k)){for(var a=[],k=k[0].getParent();"BODY"!=k.domNode.tagName;)a.push(k),k=k.getParent();for(var k='\x3cdiv class\x3d"SelectAncestorLabel"\x3e'+
e.selectAncestorLabel+'\x3c/div\x3e\x3cselect dojoType\x3d"dijit.form.Select" id\x3d"SelectAncestor" name\x3d"SelectAncestor" style\x3d"width:12em;"\x3e\x3coption value\x3d"-1"\x3e\x3c/option\x3e',f=0;f<a.length;f++)var m=require("davinci/ve/widget").getLabel(a[f]),k=k+('\x3coption value\x3d"'+f+'"\x3e'+m+"\x3c/option\x3e");h.showMessage(e.selectAncestorTitle,k+"\x3c/select\x3e\x3cbr/\x3e");k=dijit.byId("SelectAncestor");k._selectAncestor=this._selectAncestor;dojo.connect(k,"onChange",function(e){b.select(a[e])})}},
isEnabled:function(b){b=(b=this.fixupContext(b))&&b.getSelection();return this.selectionSameParentNotBody(b)}})})},"davinci/ve/actions/UnselectAllAction":function(){define(["dojo/_base/declare","davinci/ve/actions/ContextAction"],function(p,m){return p("davinci.ve.actions.SelectParentAction",[m],{run:function(h){h=this.fixupContext(h);0<(h&&h.getSelection()).length&&h.deselect()},isEnabled:function(h){return(h=(h=this.fixupContext(h))&&h.getSelection())&&0<h.length}})})},"davinci/ve/actions/ArrangeAction":function(){define(["dojo/_base/declare",
"./_ReorderAction","davinci/commands/CompoundCommand","davinci/ve/commands/ReparentCommand"],function(p,m,h,e){return p("davinci.ve.actions.ArrangeAction",[m],{run:function(b){},isEnabled:function(b){return!0},shouldShow:function(b){return(b=(b=this.fixupContext(b))?b.editor:null)&&"davinci.ve.PageEditor"==b.declaredClass}})})},"davinci/ve/actions/_ReorderAction":function(){define(["dojo/_base/declare","dojo/_base/array","dojo/dom-style","davinci/ve/actions/ContextAction"],function(p,m,h,e){return p("davinci.ve.actions._ReorderAction",
[e],{shouldShow:function(b){return(b=this.fixupContext(b))&&b.editor&&"davinci.ve.HTMLPageEditor"==b.editor.editorID},selectionSameParentAllAbsolute:function(b){if(0===b.length)return!1;var e=b[0].getParent();if(!e)return!1;for(var a=0;a<b.length;a++){var f=b[a];if(f.getParent()!=e||"absolute"!=(f&&f.domNode?h.get(f.domNode,"position"):null))return!1}return!0},selectionSameParentAllAbsoluteAdjacent:function(b){if(!b||0===b.length||!this.selectionSameParentAllAbsolute(b))return!1;var e=b[0].getParent();
if(!e||!e.length)return!1;for(var e=e.getChildren(),a=Number.MAX_VALUE,f=Number.MIN_VALUE,h=0;h<e.length;h++)0<=b.indexOf(e[h])&&(a=h<a?h:a,f=h>f?h:f);return f-a+1===b.length},getAbsoluteSiblings:function(b){b=b&&b.getParent&&b.getParent();return b?(b=b.getChildren&&b.getChildren())?m.filter(b,function(b){return"absolute"==(b&&b.domNode?h.get(b.domNode,"position"):null)}):[]:[]}})})},"davinci/ve/actions/MoveToFrontAction":function(){define(["dojo/_base/declare","./_ReorderAction","davinci/commands/CompoundCommand",
"davinci/ve/commands/ReparentCommand"],function(p,m,h,e){return p("davinci.ve.actions.MoveToFrontAction",[m],{name:"MoveToFront",iconClass:"editActionIcon editMoveToFrontIcon",run:function(b){if(b=this.fixupContext(b)){var k=b&&b.getSelection?b.getSelection():[];if(0!==k.length&&this.selectionSameParentAllAbsolute(k)){for(var a=k[0].getParent(),f=this.getAbsoluteSiblings(k[0]),m=new h,g=0;g<f.length;g++){var d=f[g];0<=k.indexOf(d)&&m.add(new e(d,a,null))}b.getCommandStack().execute(m)}}},isEnabled:function(b){b=
(b=this.fixupContext(b))&&b.getSelection?b.getSelection():[];if(0===b.length||!this.selectionSameParentAllAbsolute(b))return!1;for(var e=this.getAbsoluteSiblings(b[0]),a=0;a<b.length;a++)if(e.indexOf(b[a])<e.length-b.length)return!0;return!1}})})},"davinci/ve/actions/MoveToBackAction":function(){define(["dojo/_base/declare","./_ReorderAction","davinci/commands/CompoundCommand","davinci/ve/commands/ReparentCommand"],function(p,m,h,e){return p("davinci.ve.actions.MoveToBackAction",[m],{name:"MoveToBack",
iconClass:"editActionIcon editMoveToBackIcon",run:function(b){if(b=this.fixupContext(b)){var k=b&&b.getSelection?b.getSelection():[];if(0!==k.length&&this.selectionSameParentAllAbsolute(k)){for(var a=k[0].getParent(),f=this.getAbsoluteSiblings(k[0]),m=new h,g=f.length-1;0<=g;g--){var d=f[g];0<=k.indexOf(d)&&m.add(new e(d,a,0))}b.getCommandStack().execute(m)}}},isEnabled:function(b){b=(b=this.fixupContext(b))&&b.getSelection?b.getSelection():[];if(0===b.length||!this.selectionSameParentAllAbsolute(b))return!1;
for(var e=this.getAbsoluteSiblings(b[0]),a=0;a<b.length;a++)if(e.indexOf(b[a])>b.length-1)return!0;return!1}})})},"davinci/ve/actions/MoveForwardAction":function(){define(["dojo/_base/declare","./_ReorderAction","davinci/commands/CompoundCommand","davinci/ve/commands/ReparentCommand"],function(p,m,h,e){return p("davinci.ve.actions.MoveForwardAction",[m],{name:"MoveForward",iconClass:"editActionIcon editMoveForwardIcon",run:function(b){if(b=this.fixupContext(b)){var k=b&&b.getSelection?b.getSelection():
[];if(0!==k.length&&this.selectionSameParentAllAbsoluteAdjacent(k)){for(var a,f=k[0].getParent(),m=f.getChildren(),g=this.getAbsoluteSiblings(k[0]),d=new h,c=k.slice(0),p=0;p<g.length;p++){a=g[p];var w=c.indexOf(a);if(0<=w)c.splice(w,1);else if(0===c.length)break}m=m.indexOf(a)+1;for(c=0;c<g.length;c++)a=g[c],0<=k.indexOf(a)&&d.add(new e(a,f,m));b.getCommandStack().execute(d)}}},isEnabled:function(b){b=(b=this.fixupContext(b))&&b.getSelection?b.getSelection():[];if(0===b.length||!this.selectionSameParentAllAbsoluteAdjacent(b))return!1;
for(var e=this.getAbsoluteSiblings(b[0]),a=0;a<b.length;a++)if(e.indexOf(b[a])<e.length-b.length)return!0;return!1}})})},"davinci/ve/actions/MoveBackwardAction":function(){define(["dojo/_base/declare","./_ReorderAction","davinci/commands/CompoundCommand","davinci/ve/commands/ReparentCommand"],function(p,m,h,e){return p("davinci.ve.actions.MoveBackwardAction",[m],{name:"MoveBackward",iconClass:"editActionIcon editMoveBackwardIcon",run:function(b){if(b=this.fixupContext(b)){var k=b&&b.getSelection?
b.getSelection():[];if(0!==k.length&&this.selectionSameParentAllAbsoluteAdjacent(k)){for(var a,f=k[0].getParent(),m=f.getChildren(),g=this.getAbsoluteSiblings(k[0]),d=new h,c=k.slice(0),p=g.length-1;0<=p;p--){a=g[p];var w=c.indexOf(a);if(0<=w)c.splice(w,1);else if(0===c.length)break}m=m.indexOf(a);for(c=g.length-1;0<=c;c--)a=g[c],0<=k.indexOf(a)&&d.add(new e(a,f,m));b.getCommandStack().execute(d)}}},isEnabled:function(b){b=(b=this.fixupContext(b))&&b.getSelection?b.getSelection():[];if(0===b.length||
!this.selectionSameParentAllAbsoluteAdjacent(b))return!1;for(var e=this.getAbsoluteSiblings(b[0]),a=0;a<b.length;a++)if(e.indexOf(b[a])>b.length-1)return!0;return!1}})})},"davinci/ve/actions/OtherAction":function(){define(["dojo/_base/declare","./_ReorderAction","davinci/commands/CompoundCommand","davinci/ve/commands/ReparentCommand"],function(p,m,h,e){return p("davinci.ve.actions.OtherAction",[m],{run:function(b){},isEnabled:function(b){return!0},shouldShow:function(b){return(b=(b=this.fixupContext(b))?
b.editor:null)&&"davinci.ve.PageEditor"==b.declaredClass}})})},"davinci/ve/actions/EnableApplicationStates":function(){define("dojo/_base/declare dojo/_base/connect dojo/dom-class dijit/_WidgetBase dijit/_TemplatedMixin dijit/_WidgetsInTemplateMixin davinci/Runtime davinci/Workbench davinci/ve/metadata davinci/ve/widget davinci/ve/States davinci/actions/Action davinci/lang/ve dijit/lang/_common dojo/text!./templates/EnableApplicationStates.html dijit/form/TextBox".split(" "),function(p,m,h,e,b,k,
a,f,n,g,d,c,q,w,r){var B=function(){if(a.currentEditor&&a.currentEditor.currentEditor&&a.currentEditor.currentEditor.context){context=a.currentEditor.currentEditor.context;var b=context.getSelection();if(1==b.length)return"ANY"==n.getAllowedChild(b[0].type)}return!1};p("davinci.ve.actions.EnableApplicationStatesWidget",[e,b,k],{templateString:r,widgetsInTemplate:!0,veNls:q,commonNls:w,oldValue:null,widget:null,postCreate:function(){if(a.currentEditor&&a.currentEditor.currentEditor&&a.currentEditor.currentEditor.context){editor=
this.editor=a.currentEditor;context=this.context=a.currentEditor.currentEditor.context;var b=context.getSelection();if(0<b.length){var b=this.widget=b[0],c=g.getLabel(b);this.widgetLabel.innerHTML=c;this.oldValue=d.isStateContainer(b.domNode);this.checkBoxWidget.set("checked",this.oldValue);this.oldValue?(b=d.getStates(b.domNode),1<b.length?(b.splice(0,1),this.statesListDiv.innerHTML=q.EnableApplicationStatesCurrentStates+": "+b.join(", ")):this.statesListDiv.innerHTML=q.EnableApplicationStatesCurrentStates+
": "+q.EnableApplicationStatesNone,this.description.innerHTML=q.DisableAsStateContainerDescription):(this.description.innerHTML=q.EnableAsStateContainerDescription,this.statesListDiv.innerHTML="")}this.okButton.connect(this.okButton,"onClick",dojo.hitch(this,function(a){this.onOk(a)}));this.cancelButton.connect(this.cancelButton,"onClick",dojo.hitch(this,function(a){this.onCancel(a)}))}},_onKeyPress:function(a){if(a.keyCode==dojo.keys.ENTER)this.onOk()},onOk:function(){var a=this.checkBoxWidget.get("checked");
if(a!=this.oldValue){var b=this.widget.domNode;a?(b._maqAppStates={},a=d.serialize(b),this.widget._srcElement.addAttribute(d.APPSTATES_ATTRIBUTE,a.maqAppStates)):(delete b._maqAppStates,this.widget._srcElement.removeAttribute(d.APPSTATES_ATTRIBUTE),d.removeUnusedStates(this.context));this.editor._visualChanged();m.publish("/maqetta/appstates/state/containerChange",[])}this.onClose()},onCancel:function(){this.onClose()}});return p("davinci.ve.actions.EnableApplicationStates",[c],{run:function(){if(B()&&
a.currentEditor&&a.currentEditor.currentEditor&&a.currentEditor.currentEditor.context){var b=new davinci.ve.actions.EnableApplicationStatesWidget;f.showModal(b,q.EnableApplicationStates,{width:"370px"})}},isEnabled:function(){return B()}})})},"davinci/ve/actions/ViewDesignAction":function(){define(["dojo/_base/declare","davinci/ve/actions/ContextAction"],function(p,m){return p("davinci.ve.actions.ViewDesignAction",[m],{run:function(h){(h=this.fixupContext(h))&&h.editor&&h.editor.switchDisplayModeDesign&&
h.editor.switchDisplayModeDesign()},updateStyling:function(){var h=davinci.Workbench.getOpenEditor();if(h&&h.getDisplayMode){var h=h.getDisplayMode(),e=dojo.query(".maqDesignButton")[0];e&&("design"==h?dojo.addClass(e,"maqLabelButtonSelected"):dojo.removeClass(e,"maqLabelButtonSelected"))}}})})},"davinci/ve/actions/ViewSourceAction":function(){define(["dojo/_base/declare","davinci/ve/actions/ContextAction","davinci/lang/ve"],function(p,m,h){return p("davinci.ve.actions.ViewSourceAction",[m],{run:function(e){(e=
this.fixupContext(e))&&e.editor&&e.editor.switchDisplayModeSourceLatest&&(editor=e.editor,editor.switchDisplayModeSourceLatest())},updateStyling:function(){var e=davinci.Workbench.getOpenEditor();if(e&&e.getDisplayMode){var b=e.getDisplayMode(),e=e.getSourceDisplayMode(),k=dojo.query(".maqSourceComboButton")[0];if(k){var a=dijit.byNode(k);a&&a.set("label",h["SourceComboButton-"+e]);"design"==b?dojo.removeClass(k,"maqLabelButtonSelected"):dojo.addClass(k,"maqLabelButtonSelected")}}}})})},"davinci/ve/actions/ViewSourceMenuAction":function(){define(["dojo/_base/declare",
"davinci/ve/actions/ContextAction"],function(p,m){return p("davinci.ve.actions.ViewSourceMenuAction",[m],{run:function(h){(h=this.fixupContext(h))&&h.editor&&h.editor.switchDisplayModeSource&&h.editor.switchDisplayModeSource()}})})},"davinci/ve/actions/ViewSplitHMenuAction":function(){define(["dojo/_base/declare","davinci/ve/actions/ContextAction"],function(p,m){return p("davinci.ve.actions.ViewSplitHMenuAction",[m],{run:function(h){(h=this.fixupContext(h))&&h.editor&&h.editor.switchDisplayModeSplitHorizontal&&
h.editor.switchDisplayModeSplitHorizontal()}})})},"davinci/ve/actions/ViewSplitVMenuAction":function(){define(["dojo/_base/declare","davinci/ve/actions/ContextAction"],function(p,m){return p("davinci.ve.actions.ViewSplitVMenuAction",[m],{run:function(h){(h=this.fixupContext(h))&&h.editor&&h.editor.switchDisplayModeSplitVertical&&h.editor.switchDisplayModeSplitVertical()}})})},"davinci/ve/actions/AddState":function(){define("dojo/_base/declare davinci/Runtime davinci/Workbench davinci/workbench/Preferences davinci/ve/States davinci/actions/Action davinci/lang/ve davinci/ve/actions/_AddManageStatesWidget".split(" "),
function(p,m,h,e,b,k,a,f){return p("davinci.ve.actions.AddState",[k],{run:function(){var e;m.currentEditor&&m.currentEditor.currentEditor&&m.currentEditor.currentEditor.context&&(e=m.currentEditor.currentEditor.context,(e=b.getFocus(e.rootNode))&&e.stateContainerNode&&(e=new davinci.ve.actions._AddManageStatesWidget({node:e.stateContainerNode}),e._calledBy="AddState",h.showModal(e,a.createNewState,null,null,!0),e.okButton.set("disabled",!0)))}})})},"davinci/ve/actions/_AddManageStatesWidget":function(){define("dojo/_base/declare dojo/dom-style dojo/_base/event dijit/_WidgetBase dijit/_TemplatedMixin dijit/_WidgetsInTemplateMixin davinci/Runtime davinci/Workbench davinci/workbench/Preferences davinci/ve/States davinci/commands/CompoundCommand davinci/ve/commands/StyleCommand davinci/ve/commands/AppStateCommand davinci/actions/Action davinci/lang/ve dijit/lang/_common dojo/text!./templates/AddState.html dijit/form/TextBox dijit/form/Select dijit/form/CheckBox dijit/form/Button".split(" "),
function(p,m,h,e,b,k,a,f,n,g,d,c,q,w,r,B,y,A,v,x,u){return p("davinci.ve.actions._AddManageStatesWidget",[e,b,k],{templateString:y,widgetsInTemplate:!0,veNls:r,commonNls:B,_isValid:function(){var a=this.domNode.querySelector(".addStateNameDiv");if(a&&"none"==m.get(a,"display"))return!0;a=this.input.get("value");return a?davinci.ve.states.hasState(this.node,a)?(alert(dojo.string.substitute(r.stateNameExists,{name:a})),!1):!0:!1},_onKeyPress:function(a){a.keyCode!=dojo.keys.ENTER&&(this._isValid()?
this.okButton.set("disabled",!1):this.okButton.set("disabled",!0))},onOk:function(){var b;if(a.currentEditor&&a.currentEditor.currentEditor&&a.currentEditor.currentEditor.context){if(b=a.currentEditor.currentEditor.context,(b=g.getFocus(b.rootNode))&&b.stateContainerNode){g.getState(b.stateContainerNode);var c=this.input.get("value");if(c)if(a.currentEditor&&a.currentEditor.currentEditor&&a.currentEditor.currentEditor.context){b=a.currentEditor.currentEditor.context;var e=new d;c&&e.add(new q({action:"add",
state:c,stateContainerNode:this.node,context:b}));b.getCommandStack().execute(e)}else console.error("AddState.js - cannot determine context.")}}else console.error("_AddManageStatesWidget.js (from "+this._calledBy+" - cannot determine context.")},onCancel:function(){this.onClose()}})})},"davinci/ve/actions/RemoveState":function(){define("dojo/_base/declare davinci/Runtime davinci/ve/States davinci/actions/Action davinci/commands/CompoundCommand davinci/ve/commands/AppStateCommand".split(" "),function(p,
m,h,e,b,k){return p("davinci.ve.actions.RemoveState",[e],{run:function(){var a;if(m.currentEditor&&m.currentEditor.currentEditor&&m.currentEditor.currentEditor.context){a=m.currentEditor.currentEditor.context;var e=h.getFocus(a.rootNode);if(e&&e.state&&e.state!==h.NORMAL){var e=e.stateContainerNode,n=n=davinci.ve.states.getState(e);if(n){var g=new b;g.add(new k({action:"remove",state:n,stateContainerNode:e,context:a}));a.getCommandStack().execute(g)}}}}})})},"davinci/ve/actions/ModifyState":function(){define("dojo/_base/declare dojo/Deferred dojo/_base/connect dijit/_WidgetBase dijit/_TemplatedMixin dijit/_WidgetsInTemplateMixin dijit/popup dijit/focus davinci/ve/States davinci/ui/Dialog davinci/Runtime davinci/Workbench davinci/actions/Action davinci/lang/ve dijit/lang/_common dojo/text!./templates/ModifyState.html dijit/form/TextBox dijit/form/ValidationTextBox davinci/commands/CompoundCommand davinci/ve/commands/AppStateCommand".split(" "),
function(p,m,h,e,b,k,a,f,n,g,d,c,q,w,r,B,y,A,v,x){var u=null;p("davinci.ve.actions.ModifyStateWidget",[e,b,k],{templateString:B,widgetsInTemplate:!0,veNls:w,commonNls:r,isNormalState:!1,newName:null,oldInitialStateOn:null,postCreate:function(){this._connections=[];dijit.byId("state_rename_tooltip_dialog");u.then(function(){this._statesFocus.state&&this._statesFocus.state!==n.NORMAL||(this.isNormalState=!0);var a=dojo.byId("modify_state_old_name");a&&(this._statesFocus&&this._statesFocus.state&&!this.isNormalState?
a.innerHTML=this._statesFocus.state:(a.innerHTML="\x3ci\x3e"+n.NORMAL+"\x3c/i\x3e",this.renameButton.set("disabled",!0)));this.oldInitialStateOn=a=n.getInitial(this._statesFocus.stateContainerNode)===this._statesFocus.state;this.initialState.set("checked",a);a&&this.isNormalState&&this.initialState.set("disabled",!0);this._dialog.connect(this._dialog,"hide",function(a){this.onClose()}.bind(this));this.okButton.connect(this.okButton,"onClick",dojo.hitch(this,function(a){this.onOk(a)}));this.cancelButton.connect(this.cancelButton,
"onClick",dojo.hitch(this,function(a){this.onCancel(a)}));if(a=dijit.byId("state_rename_tooltip_dialog"))a.connect(a,"onShow",function(a){this.renameStateShowTooltipDialog(a)}.bind(this)),a.connect(a,"onHide",function(a){this.renameStateHideTooltipDialog(a)}.bind(this))}.bind(this))},renameStateShowTooltipDialog:function(b){b=dojo.byId("modify_state_old_name");var c=dojo.byId("state_rename_new_name"),d=dijit.byId("state_rename_new_name");b&&d&&d.set("value",b.innerText);f.focus(c);b=dijit.byId("state_rename_do_it");
c=dijit.byId("state_rename_cancel");b.connect(b,"onMouseDown",function(a){a.stopPropagation()});c.connect(b,"onMouseDown",function(a){a.stopPropagation()});b.connect(b,"onClick",function(a){this.renameStateDoIt(a)}.bind(this));c.connect(c,"onClick",function(b){b=dijit.byId("state_rename_tooltip_dialog");a.close(b)}.bind(this))},renameStateDoIt:function(b){b=dojo.byId("modify_state_old_name");var c=dijit.byId("state_rename_new_name"),c=c?c.get("value"):null,d=dijit.byId("state_rename_tooltip_dialog");
b&&c&&(this.newName=b.innerHTML=c);d&&a.close(d)},renameStateHideTooltipDialog:function(a){},onOk:function(a){if(d.currentEditor&&d.currentEditor.currentEditor&&d.currentEditor.currentEditor.context){a=d.currentEditor.currentEditor.context;var b=n.getFocus(a.rootNode);if(b&&b.stateContainerNode){var c;this.newName&&this.newName!==this._statesFocus.state&&(c=this.newName);var e,f=this.initialState.get("checked");f!==this.oldInitialStateOn&&(e=b.state?b.state:"undefined",e=f?e:null);if(c||e)f=new v,
f.add(new x({action:"modify",state:b.state,stateContainerNode:b.stateContainerNode,context:a,newState:c,initialState:e})),a.getCommandStack().execute(f);this.onClose()}}},onCancel:function(){this.onClose()},onClose:function(a){for(;a=this._connections.pop();)h.disconnect(a)}});return p("davinci.ve.actions.ModifyState",[q],{run:function(){var a;if(d.currentEditor&&d.currentEditor.currentEditor&&d.currentEditor.currentEditor.context&&(a=d.currentEditor.currentEditor.context,a=n.getFocus(a.rootNode))){u=
new m;var b=new davinci.ve.actions.ModifyStateWidget,e=c.showModal(b,w.modifyState);this._dialog=b._dialog=e;b._statesFocus=a;u.resolve()}}})})},"davinci/ve/actions/ManageStates":function(){define("dojo/_base/declare davinci/Runtime davinci/Workbench davinci/ve/actions/ContextAction davinci/workbench/Preferences dijit/registry davinci/ve/States davinci/actions/Action davinci/lang/ve davinci/ve/actions/_ManageStatesWidget".split(" "),function(p,m,h,e,b,k,a,f,n,g){return p("davinci.ve.actions.ManageStates",
[e],{run:function(){var b;m.currentEditor&&m.currentEditor.currentEditor&&m.currentEditor.currentEditor.context&&(b=m.currentEditor.currentEditor.context,(b=a.getFocus(b.rootNode))&&b.stateContainerNode&&(b=new davinci.ve.actions._ManageStatesWidget({node:b.stateContainerNode}),b._calledBy="ManageStates",b.okButton.set("label",n.updateLabel),b.updateDialog(),h.showModal(b,n.manageStates,{width:400},null,!0)))},isEnabled:function(a){a=this.fixupContext(a);var b=h.getOpenEditor();return b&&a?"davinci.ve.PageEditor"==
b.declaredClass?0<a.getSelection().length:!1:!1},shouldShow:function(a){return(a=(a=this.fixupContext(a))?a.editor:null)&&"davinci.ve.PageEditor"==a.declaredClass}})})},"davinci/ve/actions/_ManageStatesWidget":function(){define("dojo/_base/declare dojo/dom-construct dojo/on dojo/dom-style dojo/dom-class dojo/_base/event dijit/_WidgetBase dijit/_TemplatedMixin dijit/_WidgetsInTemplateMixin davinci/Runtime davinci/Workbench davinci/workbench/Preferences davinci/ve/States davinci/commands/CompoundCommand davinci/ve/commands/StyleCommand davinci/actions/Action davinci/lang/ve dijit/lang/_common dojo/text!./templates/ManageStates.html dijit/form/Button".split(" "),
function(p,m,h,e,b,k,a,f,n,g,d,c,q,w,r,B,y,A,v,x){return p("davinci.ve.actions._ManageStatesWidget",[a,f,n],{templateString:v,widgetsInTemplate:!0,anyCheckBoxChanges:!1,_states:[],_stateContainers:[],_checkBoxes:[],_overrideDisplayValue:[],_notes:[],_handlers:[],veNls:y,commonNls:A,constructor:function(){this.handlers=[]},postCreate:function(){if(this._getContext()){var a=this.domNode.querySelector(".manageStatesStatesListDiv");if(a){var c=this._getAllStatesInDoc();this._states=c.states;this._stateContainers=
c.stateContainers;if(c=this.domNode.querySelector(".manageStatesCheckAcceleratorsTable"))c.style.width="100%";if(c=this.domNode.querySelector(".manageStatesCheckCurrentStateOnlyCell"))c.style.textAlign="left";if(c=this.domNode.querySelector(".manageStatesCheckAllCell"))c.style.textAlign="center";if(c=this.domNode.querySelector(".manageStatesUncheckAllCell"))c.style.textAlign="right";for(var d,a=m.create("table",{"class":"manageStatesStatesListTable",style:"width:100%",border:0,cellspacing:0,cellpadding:3},
a),e=0;e<this._states.length;e++)c=m.create("tr",{},a),d=m.create("td",{"class":"manageStatesCheckboxCell"},c),this._checkBoxes[e]=m.create("div",{id:"manageStatesCheckBox_"+e,"class":"manageStatesCheckbox"},d),this._handlers.push(h(this._checkBoxes[e],"click",function(a,c){var d=this._checkBoxes[a];this.anyCheckBoxChanges=!0;b.remove(d,"manageStatesCheckboxNoneVisible");b.remove(d,"manageStatesCheckboxAllVisible");b.remove(d,"manageStatesCheckboxAllVisibleBackgroundAll");b.remove(d,"manageStatesCheckboxAllVisibleBackgroundSome");
b.remove(d,"manageStatesCheckboxSomeVisible");1==d._checkValue?(d._checkValue=0,b.add(d,"manageStatesCheckboxNoneVisible"),this._overrideDisplayValue[a]="none"):(d._checkValue=1,b.add(d,"manageStatesCheckboxAllVisible"),this._overrideDisplayValue[a]="");this.updateDialog()}.bind(this,e))),this._overrideDisplayValue[e]=null,d=this._states[e],m.create("td",{"class":"manageStatesStateNameCell",innerHTML:"Normal"==d?"Background":d},c),d=m.create("td",{"class":"manageStatesNotesCell"},c),this._notes[e]=
m.create("span",{"class":"manageStatesNotesSpan"},d)}(a=this.domNode.querySelector(".manageStatesCheckCurrentStateOnly"))&&this._handlers.push(h(a,"click",function(a){k.stop(a);this._acceleratorClicked("current")}.bind(this)));(a=this.domNode.querySelector(".manageStatesCheckAll"))&&this._handlers.push(h(a,"click",function(a){k.stop(a);this._acceleratorClicked("all")}.bind(this)));(a=this.domNode.querySelector(".manageStatesUncheckAll"))&&this._handlers.push(h(a,"click",function(a){k.stop(a);this._acceleratorClicked("none")}.bind(this)));
(a=this.domNode.querySelector(".manageStatesCheckBackgroundOnly"))&&this._handlers.push(h(a,"click",function(a){k.stop(a);this._acceleratorClicked("background")}.bind(this)));this.anyCheckBoxChanges=!1;setTimeout(function(){this.okButton.focus()}.bind(this),500)}},_acceleratorClicked:function(a){var c=this._getContext();if(c&&(c=q.getFocus(c.rootNode))&&c.stateContainerNode){for(var d=q.getState(c.stateContainerNode),e=0;e<this._states.length;e++){var f=this._states[e];if("undefined"==f||f==q.NORMAL)f=
void 0;var g=this._checkBoxes[e];b.remove(g,"manageStatesCheckboxNoneVisible");b.remove(g,"manageStatesCheckboxAllVisible");b.remove(g,"manageStatesCheckboxAllVisibleBackgroundAll");b.remove(g,"manageStatesCheckboxAllVisibleBackgroundSome");b.remove(g,"manageStatesCheckboxSomeVisible");"current"==a?f==d&&c.stateContainerNode==this._stateContainers[e]?(g._checkValue=1,b.add(g,"manageStatesCheckboxAllVisible"),this._overrideDisplayValue[e]=""):(g._checkValue=0,b.add(g,"manageStatesCheckboxNoneVisible"),
this._overrideDisplayValue[e]="none"):"all"==a?(g._checkValue=1,b.add(g,"manageStatesCheckboxAllVisible"),this._overrideDisplayValue[e]=""):"none"==a?(g._checkValue=0,b.add(g,"manageStatesCheckboxNoneVisible"),this._overrideDisplayValue[e]="none"):"background"==a&&(g._checkValue=1,b.add(g,"manageStatesCheckboxAllVisible"),this._overrideDisplayValue[e]=0==e?"":"$MAQ_DELETE_PROPERTY$")}this.anyCheckBoxChanges=!0;this.updateDialog()}},_isValid:function(){return!0},_onKeyPress:function(a){a.keyCode!=
dojo.keys.ENTER&&(this._isValid()?this.okButton.set("disabled",!1):this.okButton.set("disabled",!0))},_getAllStatesInDoc:function(){var a;if(g.currentEditor&&g.currentEditor.currentEditor&&g.currentEditor.currentEditor.context){a=g.currentEditor.currentEditor.context;var b=[],c=[];if(a=q.getAllStateContainers(a.rootNode))for(var d=0;d<a.length;d++)for(var e=q.getStates(a[d]),f=0;f<e.length;f++)b.push(e[f]),c.push(a[d]);return{states:b,stateContainers:c}}console.error("_ManageStatesWidget.js (from "+
this._calledBy+" - cannot determine context.")},_getContext:function(){var a;g.currentEditor&&g.currentEditor.currentEditor&&g.currentEditor.currentEditor.context?a=g.currentEditor.currentEditor.context:console.error("_ManageStatesWidget.js (from "+this._calledBy+" - cannot determine context.");return a},_getAllEffectedWidgets:function(){var a=this._getContext();if(!a)return[];var b=q.getFocus(a.rootNode);if(b&&b.stateContainerNode)return a.getSelection().slice(0)},updateDialog:function(){var a=this._getContext();
if(a){var c=q.getFocus(a.rootNode);if(c&&c.stateContainerNode)for(var c=this._getAllEffectedWidgets(),d=this._overrideDisplayValue[0],e=0;e<this._states.length;e++){var f=this._states[e];if(f==q.NORMAL||"undefined"==f)f=void 0;for(var g=0,h=0,k=0;k<c.length;k++){var m=c[k],n={undefined:d};n[void 0===f?"undefined":f]=this._overrideDisplayValue[e];m=q.getEffectiveDisplayValue(a,m,f,n);0!=m.effectiveDisplayValue.indexOf("none")&&(g++,f||"undefined"!=m.effectiveState?f&&m.effectiveState==f&&h++:h++)}f=
this._checkBoxes[e];k=this._notes[e];b.remove(f,"manageStatesCheckboxNoneVisible");b.remove(f,"manageStatesCheckboxAllVisible");b.remove(f,"manageStatesCheckboxAllVisibleBackgroundAll");b.remove(f,"manageStatesCheckboxAllVisibleBackgroundSome");b.remove(f,"manageStatesCheckboxSomeVisible");k.innerHTML="";0==g?(f._checkValue=0,b.add(f,"manageStatesCheckboxNoneVisible")):g==c.length?(f._checkValue=1,h==c.length?b.add(f,"manageStatesCheckboxAllVisible"):0<h?(b.add(f,"manageStatesCheckboxAllVisibleBackgroundSome"),
k.innerHTML=y.manageStatesSomeVisibleFromBackground):(b.add(f,"manageStatesCheckboxAllVisibleBackgroundAll"),k.innerHTML=y.manageStatesAllVisibleFromBackground)):(f._checkValue=2,b.add(f,"manageStatesCheckboxSomeVisible"),k.innerHTML=y.manageStatesSomeVisibleSomeHidden)}}},onOk:function(){if(this.anyCheckBoxChanges){var a=this._getContext();if(a){for(var b,c=this._getAllEffectedWidgets(),d=0;d<this._states.length;d++){var e=this._states[d];if(e==q.NORMAL||"undefined"==e)e=void 0;var f=this._checkBoxes[d]._checkValue;
if(0===f||1===f)for(var g=0;g<c.length;g++){var h=c[g];b||(b=new w);b.add(new r(h,[{display:this._overrideDisplayValue[d]?this._overrideDisplayValue[d]:1==f?"":"none"}],e))}}b&&a.getCommandStack().execute(b)}}},onCancel:function(){this.onClose()},destroy:function(){this.inherited(arguments);for(var a=0;a<this._handlers.length;a++)this._handlers[a].remove();this._handlers=[]}})})},"davinci/ve/actions/NewWidgetsCurrentState":function(){define("dojo/_base/declare davinci/Runtime davinci/Workbench davinci/ve/States davinci/actions/Action davinci/workbench/Preferences".split(" "),
function(p,m,h,e,b,k){return p("davinci.ve.actions.NewWidgetsCurrentState",[b],{run:function(){var a;if(m.currentEditor&&m.currentEditor.currentEditor&&m.currentEditor.currentEditor.context){a=m.currentEditor.currentEditor.context;var b=h.getProject(),n=k.getPreferences("davinci.ve.editorPrefs",b);n.newWidgetsCurrentState=n.newWidgetsCurrentState?!1:!0;k.savePreferences("davinci.ve.editorPrefs",b,n);e.updateStateIcons(a)}}})})},"davinci/ve/actions/HighlightBaseWidgets":function(){define("dojo/_base/declare davinci/Runtime davinci/Workbench davinci/ve/States davinci/actions/Action davinci/workbench/Preferences".split(" "),
function(p,m,h,e,b,k){return p("davinci.ve.actions.HighlightBaseWidgets",[b],{run:function(){var a;if(m.currentEditor&&m.currentEditor.currentEditor&&m.currentEditor.currentEditor.context){a=m.currentEditor.currentEditor.context;var b=h.getProject(),e=k.getPreferences("davinci.ve.editorPrefs",b);e.highlightBaseWidgets=e.highlightBaseWidgets?!1:!0;k.savePreferences("davinci.ve.editorPrefs",b,e);a.updateFocusAll()}}})})},"davinci/ve/actions/ShowInOutline":function(){define(["dojo/_base/declare","davinci/Runtime",
"davinci/Workbench","davinci/ve/actions/ContextAction"],function(p,m,h,e){return p("davinci.ve.actions.ManageStates",[e],{run:function(){var b=m.currentEditor;b&&b.delegate.showInOutline()},isEnabled:function(b){b=this.fixupContext(b);var e=h.getOpenEditor();return e&&b?"davinci.ve.PageEditor"==e.declaredClass?0<b.getSelection().length:!1:!1},shouldShow:function(b){return(b=(b=this.fixupContext(b))?b.editor:null)&&"davinci.ve.PageEditor"==b.declaredClass}})})},"davinci/ve/PageEditor":function(){define("require dojo/_base/declare ../ui/ModelEditor dojo/dnd/Moveable ../Runtime ../commands/CommandStack ../html/ui/HTMLEditor ./VisualEditor ./VisualEditorOutline ./widget ./States ../XPathUtils ../html/HtmlFileXPathAdapter ./utils/GeomUtils davinci/model/Factory xide/mixins/EventedMixin xide/mixins/ReloadMixin xide/utils xide/types xide/factory xideve/views/BlocksFileEditor xide/widgets/_Widget xide/views/_LayoutMixin xdocker/Docker2 xdocker/types wcDocker/iframe".split(" "),
function(p,m,h,e,b,k,a,f,n,g,d,c,q,w,r,B,y,A,v,x,u,z,C,I,D){m=m("davinci.ve.PageEditor",[h,z,B,y,C],{_latestSourceMode:"source",_latestLayoutMode:"flow",item:null,delegate:null,template:null,bottomTabContainer:null,textEditorPane:null,didBlockViews:!1,_propCP:null,createTab:function(a,b){var c=v.DOCKER;return this._docker.addTab(a||"DefaultTab",A.mixin({icon:!1,closeable:!0,moveable:!0,tabOrientation:c.TAB.TOP,location:c.DOCK.STACKED},b))},createLayout:function(){},constructor:function(a,b,c,d,e,
g){function h(a){setTimeout(function(){var a=m.getContext();a&&a.frameNode&&$(a.frameNode).css("pointer-events","initial")},a||4E3)}b=v.DOCKER;this.item=c;this.template=e;var m=this;this._commandStack=new k(this);this.savePoint=0;this._docker=I.createDefault(a,{});this.domNode=this._docker.$container[0];this._designCP=this.createTab(null,{title:"Design",icon:"fa-eye"});this._docker.on(v.DOCKER.EVENT.BEGIN_RESIZE,function(a){(a=m.getContext())&&a.frameNode&&$(a.frameNode).css("pointer-events","none");
h()});this._docker.on(v.DOCKER.EVENT.MOVE_STARTED,function(a){(a=m.getContext())&&a.frameNode&&$(a.frameNode).css("pointer-events","none");h()});this._docker.on(v.DOCKER.EVENT.MOVE_ENDED,function(a){h(1)});this._docker.on(v.DOCKER.EVENT.END_RESIZE,function(a){h(1)});this._docker.on(v.DOCKER.EVENT.BEGIN_FLOAT_RESIZE,function(a){a=m.getContext();$(a.frameNode).css("pointer-events","none");h()});this._docker.on(v.DOCKER.EVENT.END_FLOAT_RESIZE,function(a){h(1)});this._designCP.$container[0].domNode=this._designCP.$container[0];
this._designCP.domNode=this._designCP.$container[0];this._designCP.minSize(400,400);this.currentEditor=this.visualEditor=new f(this._designCP.$container[0],this,this.template);this.currentEditor._commandStack=this._commandStack;this.initReload();try{this._propCP=this.createTab(null,{title:"Props",icon:"fa-cogs",tabOrientation:b.TAB.TOP,location:b.TAB.RIGHT,target:this._designCP});this._propCP.maxSize(400);this._propCP.minSize(350);a=null;g.length?this._srcCP=a=this.createTab(null,{title:"HTML",icon:"fa-code",
tabOrientation:b.TAB.TOP,location:b.TAB.BOTTOM}):console.error("have no editors, ");g=null;try{g=this.htmlEditor=d(a)}catch(n){debugger}this.model=g.model;g._on(v.EVENTS.ON_FILE_CONTENT_CHANGED,function(a){m.delegate.onEditorContentChanged(a)});this._displayMode="design";this._connect(this.visualEditor,"onContentChange","_visualChanged");this.subscribe("/davinci/ui/styleValuesChange",this._stylePropertiesChange);this.subscribe("/davinci/ui/widgetSelected",this._widgetSelectionChange);this.subscribe("/davinci/ui/selectionChanged",
this._modelSelectionChange);this.subscribe("/davinci/ui/editorSelected",this._editorSelected.bind(this));this.subscribe("/davinci/ui/context/loaded",this._contextLoaded.bind(this));this.subscribe("/davinci/ui/deviceChanged",this._deviceChanged.bind(this));this._designCP.getSplitter().pos(.5);setTimeout(function(){m._srcCP.getSplitter().pos(.5);m._propCP.maxSize(500)},1500);this.resize()}catch(p){this.visualEditor._connectCallback(p),console.error("page editor crash : "+p)}this.add(this._docker)},
getPropertyPane:function(){return this._propCP},getDesignPane:function(){return this._designCP},getSourcePane:function(){return this._srcCP},getVisualEditor:function(){return this.visualEditor},getBlocksPane:function(){return this._blocksTab},onSceneBlocksLoaded:function(a,b){if(0!=b.showBlocks&&!this.didBlockViews){this.didBlockViews=!0;var c=a.blockScopes,d=a.ctx,e=v.DOCKER;this._blocksTab=this.createTab(null,{title:"Blocks",icon:"fa-eye",target:this._srcCP,tabOrientation:e.TAB.TOP,location:e.DOCK.STACKED});
c=c[0];e=this._blocksTab;d=A.addWidget(u,{style:"height:inherit;width:inherit;padding:0px;",ctx:d,pageEditor:this,visualEditor:b,editorContext:this.getContext(),item:{path:c.path,mount:c.mount}},this,e,!0);d.initWithScope(c);e.add(d);this._blockEditor=d;(d=b.getItem())&&this._blockEditor._widgetSelectionChanged({selection:[d]})}},getBlockEditor:function(){return this._blockEditor},setRootElement:function(a){this._rootElement=a},supports:function(a){return a.match(/^palette|properties|style|states|inline-style|MultiPropTarget|propsect_common|propsect_widgetSpecific|propsect_events|propsect_layout|propsect_paddingMargins|propsect_background|propsect_border|propsect_fontsAndText|propsect_shapesSVG$/)},
focus:function(){},_editorSelected:function(a){var b=this.getContext();b&&(this==a.oldEditor&&b.hideFocusAll(),a.editor&&a.editor.editorContainer&&("davinci.ve.PageEditor"==a.editor.declaredClass||"davinci.ve.themeEditor.ThemeEditor"==a.editor.declaredClass)&&this==a.editor&&(a=b.getFlowLayout()?"flow":"absolute",this._updateLayoutDropDownButton(a),b.clearCachedWidgetBounds()))},_contextLoaded:function(){},_deviceChanged:function(){if(b.currentEditor==this&&this.editorContainer){var a=this.getContext();
a&&a.updateFocusAll&&setTimeout(function(){a.updateFocusAll()},1E3)}},_updateLayoutDropDownButton:function(a){(a=dojo.query(".maqLayoutDropDownButton"))&&a[0]&&dijit.byNode(a[0])},_selectLayout:function(a){this._latestLayoutMode=a;p(["davinci/actions/SelectLayoutAction"],function(b){b=new b;b._changeLayoutCommand(a)});this._updateLayoutDropDownButton(a)},selectLayoutFlow:function(){this._selectLayout("flow")},selectLayoutAbsolute:function(){this._selectLayout("absolute")},getDisplayMode:function(){return this._displayMode},
getSourceDisplayMode:function(){return this._latestSourceMode},_switchDisplayModeSource:function(a){this._latestSourceMode=a;this.switchDisplayMode(a)},switchDisplayModeSource:function(){this._switchDisplayModeSource("source")},switchDisplayModeSplitVertical:function(){this._switchDisplayModeSource("splitVertical")},switchDisplayModeSplitHorizontal:function(){this._switchDisplayModeSource("splitHorizontal")},switchDisplayModeSourceLatest:function(){this.switchDisplayMode(this._latestSourceMode)},
switchDisplayModeDesign:function(){this.switchDisplayMode("design")},switchDisplayMode:function(a){},hidePropertyPane:function(a){this.getPropertyPane()},_modelSelectionChange:function(a){if("source"!=this._displayMode&&p("davinci/Runtime").currentEditor===this&&(this._selectionCssRules=null,a.length&&(a=a[0].model)&&"HTMLElement"==a.elementType&&(a=a.getAttribute("id"))&&"source"!=this._displayMode)){a=g.byId(a,this.visualEditor.context.getDocument());var b=w.getMarginBoxPageCoords(a.domNode);this.getContext().getGlobal().scroll(b.l,
b.t);this.visualEditor.context.select(a)}},_widgetSelectionChange:function(a){!0===a.isFake||!this.visualEditor.context||a&&a.length&&a[0]._edit_context!=this.visualEditor.context||(a=this.visualEditor.context.getSelection())&&a.length&&"design"!=this._displayMode&&this.htmlEditor.selectModel([{model:a[0]._srcElement}])},_stylePropertiesChange:function(a){if(!(a&&a.cascade&&a.cascade._widget&&1==a.cascade._widget.isFake)){this.visualEditor._stylePropertiesChange(a);var b=this.visualEditor.context.getSelection();
if(b&&b[0]&&(b=A.getNode(b[0]))&&b.onChanged)b.onChanged();a=a.cascade._topWidgetDom;$(a).attr("style");this.getContext().updateBackground(a)}},_setDirty:function(){this.setDirty(!0)},setDirty:function(a){if(this.isDirty=a)this.lastModifiedTime=Date.now();this.editorContainer&&this.editorContainer.setDirty(a)},_visualChanged:function(a){this.delegate.shouldUpdateTextEditor()&&(a||this._setDirty(),this.htmlEditor.set("value",this.model.getText(),!0),this.getContext().visualEditorChanged())},_srcChanged:function(){dojo.withDoc(window.document,
function(){this.htmlEditor.isTyping&&(this.visualEditor.skipSave=!0);var a=this.visualEditor.context,b=a&&this._getStatesScenes(a);this.visualEditor.setContent(this.fileName,this.htmlEditor.model);this.editorContainer.updateToolbars();dojo.publish("/davinci/ui/context/pagerebuilt",[a]);b&&this._setStatesScenes(a,b);delete this.visualEditor.skipSave;this._setDirty()},this)},_getStatesScenes:function(a){return[]},_setStatesScenes:function(a,b){},getContext:function(){return this.visualEditor.context},
getOutline:function(){this.outline||(this.outline=new n(this));return this.outline},getPropertiesView:function(){return this.currentEditor.getPropertiesView()},setContent:function(a,b,c){this.fileName=a;this.htmlEditor.setContent(a,b);this.visualEditor.setContent(a,this.htmlEditor.model,c);this._connect(this.htmlEditor.model,"onChange","_themeChange")},_themeChange:function(a){a&&"CSSRule"===a.elementType&&(this.setDirty(!0),this.visualEditor.context.hotModifyCssRule(a))},getDefaultContent:function(){this._isNewFile=
!0;return this.visualEditor.getDefaultContent()},selectModel:function(a,b){if(!(this.publishingSelect||b&&this!=b)){var c=a&&a[0];c&&(c.elementType?this.htmlEditor.selectModel(a):c.model&&c.model.isWidget&&this.visualEditor.context.select(c.model,c.add))}},save:function(a){if(this.delegate&&this.delegate.save){var b=this.visualEditor.context.getModel(),c=b.getText();this.delegate.save(this,this.visualEditor,b,c)}else this.savePoint=this._commandStack.getUndoCount(),(b=this.visualEditor.save(a))&&
b.then&&b.then(function(b){this.isDirty=a;this.editorContainer&&this.editorContainer.domNode&&this.editorContainer.setDirty(a)}.bind(this),function(a){})},removeWorkingCopy:function(){},previewInBrowser:function(){this.visualEditor.previewInBrowser()},destroy:function(){this.inherited(arguments);this.visualEditor.destroy();this.htmlEditor.destroy();A.destroy(this.bottomTabContainer)},getText:function(){return this.htmlEditor.getText()},onResize:function(){for(var a=this.getContext(),b=a.getSelection(),
c=0;c<b.length;c++)a.select(b[c],0!=c)},handleKeyEvent:function(a){},getFocusContainerBounds:function(){if("source"==this._displayMode)return{l:0,t:0,w:0,h:0};var a=w.getBorderBoxPageCoords(this._designCP.domNode);a.l-=8;a.t-=8;"none"==(this.visualEditor&&this.visualEditor.getDevice?this.visualEditor.getDevice():"none")?(a.w+="splitVertical"==this._displayMode?8:16,a.h+="splitHorizontal"==this._displayMode?8:16):(a.w+=8,a.h+=8);return a},getCommandStack:function(){return this.getContext().getCommandStack()}});
m.__test="asd2f";return m})},"davinci/ui/ModelEditor":function(){define(["dojo/_base/declare","../Runtime","./TextEditor","../commands/SourceChangeCommand"],function(p,m,h,e){return p(h,{constructor:function(b,e){this.subscribe("/davinci/ui/selectionChanged",this.selectModel)},colorize:function(b){return null},setContent:function(b,e){this.inherited(arguments);this.model.fileName=b;this.model.setText(e)},getHoverText:function(b,e){var a=this.convertMouseToLine(b,e);return this.model.findChildAtPosition({startOffset:a.row,
endOffset:a.col}).getLabel()},handleChange:function(b){this.inherited(arguments);var h=this.model.getText(),a=m.currentEditor;a&&a.getCommandStack?(a=a.getCommandStack(),h=new e({model:this.model,oldText:h,newText:b}),a.execute(h)):(this.model.setText(b),dojo.publish("/davinci/ui/modelChanged",[{newModel:this.model}]))},selectModel:function(b,e){if(!(this.publishingSelect||e&&this!=e)&&b.length&&b[0].model){var a=b[0].model;a.elementType&&(a=this.model.mapPositions(a),this.select(a))}},selectionChange:function(b){var e=
this.model.mapPositions(this.model),e=this.model.endOffset-e.endOffset,e=this.model.findChildAtPosition({startOffset:b.startOffset+e,endOffset:b.endOffset+e-1});b.model=e;if(e!=this._selectedModel)try{this.publishingSelect=!0,dojo.publish("/davinci/ui/selectionChanged",[[b],this])}finally{this.publishingSelect=!1}this._selectedModel=e},getSyntaxPositions:function(b,e){this.model.setText(b);if(this.model.getSyntaxPositions)return this.model.getSyntaxPositions(e).sort(function(a,b){return a.line!=b.line?
a.line-b.line:a.col-b.col})},save:function(){this.model.setText(this.getText());this.inherited(arguments)},getErrors:function(){return this.model.errors||[]}})})},"davinci/ui/TextEditor":function(){define(["dojo/_base/declare","./Editor","../Runtime"],function(p,m,h){return p(m,{constructor:function(e,b){this.subscriptions=[];this._handles=[]},isActiveEditor:function(){return h.currentEditor==this},handleChange:function(e){this.editorContainer&&this.editorContainer.setDirty(!0);this.isDirty=!0;this.lastModifiedTime=
Date.now()},_onKey:function(e){davinci.Workbench.currentContext=this.editorID;return davinci.Workbench.handleKey(e)},subscribe:function(e,b){this.subscriptions.push(dojo.subscribe(e,this,b))},destroy:function(){this.inherited(arguments);this.subscriptions.forEach(dojo.unsubscribe);this._handles.forEach(dojo.disconnect)},getDefaultContent:function(){return null},getErrors:function(){return[]},save:function(e){var b=this.getText();if(this.resourceFile){this.resourceFile.clearMarkers();for(var h=this.getErrors(),
a=0;a<h.length;a++){var f;switch(h[a].id){case "(error)":f="error";break;case "(warning)":f="warning"}f&&this.resourceFile.addMarker(f,h[a].line+1,h[a].reason)}this.resourceFile.setContents(b,e);this.editorContainer&&this.editorContainer.setDirty(e);this.isDirty=!1;this.lastModifiedTime=0}},supports:function(e){return!1},_connect:function(e,b,h){this._handles.push(dojo.connect(e,b,this,h))}})})},"davinci/ui/Editor":function(){define(["../commands/CommandStack","dojo/_base/declare"],function(p,m,h){var e=
function(b){this._progSelect||this.selectionChange({startOffset:b.newValue.start,endOffset:b.newValue.end})};return m(null,{constructor:function(b,e,a){this.contentDiv=b;this.commandStack=new p;this._existWhenVisible=a;this._isVisible=!a},setContent:function(b,e){this.editor||this._existWhenVisible&&!this._isVisible||this._createEditor();this._textModel||(this._textModel=this.editor?this.editor.getModel():new mProjectionTextModel.ProjectionTextModel(new mTextModel.TextModel));this.fileName=b;this.setValue(e,
!0);this._textModel&&(dojo.disconnect(this._textModelConnection),this._textModelConnection=dojo.connect(this._textModel,"onChanged",this,onTextChanged))},setVisible:function(b){b!=this._isVisible&&this._existWhenVisible&&(b&&this._existWhenVisible?(this._createEditor(),this._updateStyler()):(this.editor.getTextView().removeEventListener("Selection",dojo.hitch(this,e)),delete this.editor));this._isVisible=b},setValue:function(b,e){this._dontNotifyChange=e;this.editor?this.editor.setText(b):this._textModel.setText(b)},
_createEditor:function(){},_updateStyler:function(){},selectionChange:function(b){},destroy:function(){},select:function(b){if(this.editor)try{this._progSelect=!0,this.editor.setSelection(b.endOffset,b.startOffset)}finally{delete this._progSelect}},getText:function(){return this._textModel.getText(0)},getOnUnloadWarningMessage:function(){return null}})})},"davinci/commands/SourceChangeCommand":function(){define(["dojo/_base/declare","davinci/Runtime"],function(p,m){return p("davinci.commands.SourceChangeCommand",
null,{name:"SourceChange",constructor:function(h){this._model=h.model;this._oldText=h.oldText;this._newText=h.newText},incrementalUpdate:function(h){this._newText=h.newText},execute:function(){this._model.setText(this._newText);dojo.publish("/davinci/ui/modelChanged",[{newModel:this._model}]);var h=m.currentEditor;"davinci.ve.PageEditor"==h.declaredClass&&h.handleChange&&require(["davinci/ve/PageEditor"],function(e){e.prototype._srcChanged.call(h,this._newText)}.bind(this));if(!this.established)return this.established=
!0},undo:function(){this._model.setText(this._oldText);dojo.publish("/davinci/ui/modelChanged",[{newModel:this._model}]);var h=m.currentEditor;"davinci.ve.PageEditor"==h.declaredClass&&h.handleChange&&require(["davinci/ve/PageEditor"],function(e){e.prototype._srcChanged.call(h,this._oldText)}.bind(this))}})})},"dojo/dnd/Moveable":function(){define("../_base/array ../_base/declare ../_base/lang ../dom ../dom-class ../Evented ../on ../topic ../touch ./common ./Mover ../_base/window".split(" "),function(p,
m,h,e,b,k,a,f,n,g,d,c){return m("dojo.dnd.Moveable",[k],{handle:"",delay:0,skip:!1,constructor:function(b,c){this.node=e.byId(b);c||(c={});this.handle=c.handle?e.byId(c.handle):null;this.handle||(this.handle=this.node);this.delay=0<c.delay?c.delay:0;this.skip=c.skip;this.mover=c.mover?c.mover:d;this.events=[a(this.handle,n.press,h.hitch(this,"onMouseDown")),a(this.handle,"dragstart",h.hitch(this,"onSelectStart")),a(this.handle,"selectstart",h.hitch(this,"onSelectStart"))]},markupFactory:function(a,
b,c){return new c(b,a)},destroy:function(){p.forEach(this.events,function(a){a.remove()});this.events=this.node=this.handle=null},onMouseDown:function(b){if(!this.skip||!g.isFormElement(b)){if(this.delay)this.events.push(a(this.handle,n.move,h.hitch(this,"onMouseMove")),a(this.handle.ownerDocument,n.release,h.hitch(this,"onMouseUp"))),this._lastX=b.pageX,this._lastY=b.pageY;else this.onDragDetected(b);b.stopPropagation();b.preventDefault()}},onMouseMove:function(a){if(Math.abs(a.pageX-this._lastX)>
this.delay||Math.abs(a.pageY-this._lastY)>this.delay)this.onMouseUp(a),this.onDragDetected(a);a.stopPropagation();a.preventDefault()},onMouseUp:function(a){for(var b=0;2>b;++b)this.events.pop().remove();a.stopPropagation();a.preventDefault()},onSelectStart:function(a){this.skip&&g.isFormElement(a)||(a.stopPropagation(),a.preventDefault())},onDragDetected:function(a){new this.mover(this.node,a,this)},onMoveStart:function(a){f.publish("/dnd/move/start",a);b.add(c.body(),"dojoMove");b.add(this.node,
"dojoMoveItem")},onMoveStop:function(a){f.publish("/dnd/move/stop",a);b.remove(c.body(),"dojoMove");b.remove(this.node,"dojoMoveItem")},onFirstMove:function(){},onMove:function(a,b){this.onMoving(a,b);var c=a.node.style;c.left=b.l+"px";c.top=b.t+"px";this.onMoved(a,b)},onMoving:function(){},onMoved:function(){}})})},"davinci/html/ui/HTMLEditor":function(){define(["dojo/_base/declare","davinci/ui/ModelEditor","davinci/model/Factory","davinci/html/ui/HTMLOutline"],function(p,m,h,e){return p("davinci.html.ui.HTMLEditor",
m,{constructor:function(b,e){this.model=this.htmlFile=h.getModel({url:e});this._handle=dojo.connect(this.htmlFile.getDocumentElement(),"onkeydown",this,"onKeyDown")},destroy:function(){this.htmlFile.close();dojo.disconnect(this._handle);this.inherited(arguments)},getOutline:function(){this.outline||(this.outline=new e(this.model));return this.outline},getDefaultContent:function(){return"\x3chtml\x3e\n \x3chead\x3e\x3c/head\x3e\n \x3cbody\x3e\x3c/body\x3e\n\x3c/html\x3e"},onKeyDown:function(b){}})})},
"davinci/html/ui/HTMLOutline":function(){define(["dojo/_base/declare","davinci/html/ui/HTMLOutlineModel"],function(p,m){return p("davinci/html/ui/HTMLOutline",null,{constructor:function(h){this._htmlModel=h},getModel:function(){return this._model=new m(this._htmlModel)}})})},"davinci/html/ui/HTMLOutlineModel":function(){define(["dojo/_base/declare"],function(p){return p("davinci.html.ui.HTMLOutlineModel",null,{constructor:function(m){this.root=m;this.subscription=dojo.subscribe("/davinci/ui/modelChanged",
this,this._modelChanged)},getRoot:function(m,h){m(this.root)},getIdentity:function(m){return m.getID()},getLabel:function(m){return m.getLabel().replace("\x3c","\x26lt")},_getChildren:function(m){var h=[];"HTMLFile"!=m.elementType&&"HTMLElement"!=m.elementType||dojo.forEach(m.children,function(e){"HTMLElement"==e.elementType&&h.push(e)});return h},mayHaveChildren:function(m){return 0<m.children.length},getChildren:function(m,h,e){h(this._getChildren(m))},_modelChanged:function(){this.onChildrenChange(this.root,
this._getChildren(this.root))},destroy:function(){dojo.unsubscribe(this.subscription)}})})},"davinci/ve/VisualEditor":function(){define("dojo/_base/declare dojo/_base/lang dojo/_base/connect dojo/dom-class dojo/dom-construct dojo/promise/all dojo/text!./template.html ../Runtime ../Workbench ../model/Path ./metadata ./Context preview/silhouetteiframe preview/loadIndicator ../workbench/Preferences ./widget ../XPathUtils ../html/HtmlFileXPathAdapter ./utils/GeomUtils xide/utils xide/registry".split(" "),
function(p,m,h,e,b,k,a,f,n,g,d,c,q,w,r,B,y,A,v,x,u){return p("davinci.ve.VisualEditor",null,{deviceName:"none",_orientation:"portrait",_subscriptions:[],delite:!1,context:null,getContext:function(){return this.context},template:{},constructor2:function(a,c,f){this._pageEditor=c;this.template=f||{};this.contentPane=dijit.getEnclosingWidget(a)||u.byId(a.id);this.loadingDiv=b.create("div",{className:"loading",innerHTML:dojo.replace("\x3ctable\x3e\x3ctr\x3e\x3ctd\x3e\x3cspan\x3e\x26nbsp;\x26nbsp;\x26nbsp;\x26nbsp;\x26nbsp;\x3c/span\x3e\x26nbsp;{0}\x3c/td\x3e\x3c/tr\x3e\x3c/table\x3e",
["Loading..."])},this.contentPane.domNode.parentNode,"first");e.add(this.contentPane.domNode,"fullPane");a=b.create("div",{className:"silhouette_div_container"},this.contentPane.domNode);b.create("span",{className:"silhouetteiframe_object_container"},a);this.silhouetteiframe=new q({rootNode:a,margin:20});var g=this;this.contentPane.connect(this.contentPane,"resize",function(a){var b=dojo.query(".designCP iframe",this._pageEditor.domNode)[0];b&&b.contentDocument&&b.contentDocument.body&&(g._resizeBody(b.contentDocument.body,
a),setTimeout(function(){var a=g.getContext();a.clearCachedWidgetBounds();a.updateFocusAll();g._registerScrollHandlers()},100))}.bind(this));this._pageEditor.deferreds=k(d.getDeferreds());this._subscriptions.push(dojo.subscribe("/davinci/ui/editorSelected",this._editorSelected.bind(this)));this._subscriptions.push(dojo.subscribe("/davinci/ui/context/loaded",this._contextLoaded.bind(this)))},_setContentRaw:function(a,b,d){this.fileName=a;this.basePath=new g(a);if(this.initialSet)this.context.setSource(b,
this.context._restoreStates,this.context);else{var e=f.getUserWorkspaceUrl();0==a.indexOf("./")&&(a=a.substring(2,a.length));a=e+a;a=e;this._handles=[];e=dojo.query(".silhouette_div_container",this.contentPane.containerNode)[0];$(this.contentPane.containerNode).find(".silhouette_div_container");e={editor:this._pageEditor,visualEditor:this,containerNode:e,model:b,template:this.template,baseURL:a,iframeattrs:{"class":"silhouetteiframe_iframe"},ctx:this._pageEditor.ctx};this.context=this.template&&this.template.contextClass?
new (x.getObject(this.template.contextClass))(e):new c(e);this.context._commandStack=this._commandStack;this._commandStack._context=this.context;try{this._handles.push(dojo.connect(this.context,"activate",this,this.update))}catch(h){debugger}this._handles.push(dojo.connect(this.context,"onContentChange",this,this.onContentChange));this._handles.push(dojo.connect(this.context,"onSelectionChange",this,this.onContentChange));this.title=dojo.doc.title;this.context._setSource(b,this._connectCallback,this,
d);this.context.getFlowLayout();this.initialSet=!0}},constructor:function(a,c,f){this._pageEditor=c;this.template=f||{};this.contentPane=dijit.getEnclosingWidget(a)||u.byId(a.id);a=this.contentPane.containerNode;this.loadingDiv=b.create("div",{className:"loading",innerHTML:dojo.replace("\x3ctable\x3e\x3ctr\x3e\x3ctd\x3e\x3cspan\x3e\x26nbsp;\x26nbsp;\x26nbsp;\x26nbsp;\x26nbsp;\x3c/span\x3e\x26nbsp;{0}\x3c/td\x3e\x3c/tr\x3e\x3c/table\x3e",["Loading..."])},a.parentNode,"first");e.add(a,"fullPane");a=
b.create("div",{className:"silhouette_div_container"},a);b.create("span",{className:"silhouetteiframe_object_container"},a);this.silhouetteiframe=new q({rootNode:a,margin:20});this._pageEditor.deferreds=k(d.getDeferreds());this._subscriptions.push(dojo.subscribe("/davinci/ui/editorSelected",this._editorSelected.bind(this)));this._subscriptions.push(dojo.subscribe("/davinci/ui/context/loaded",this._contextLoaded.bind(this)))},getDevice:function(){return this.deviceName},setDevice:function(a,b){this.deviceName=
a;var c=this.getContext();c.setMobileMeta(a);b||c.setMobileTheme(a);this.silhouetteiframe.setSVGFilename("none"==a?null:"app/preview/images/"+a+".svg");c.clearCachedWidgetBounds();dojo.publish("/davinci/ui/deviceChanged",[a]);dojo.publish("/davinci/ui/repositionFocusContainer",[])},toggleOrientation:function(){"none"!=this.deviceName&&this.setOrientation("landscape"==this._orientation?"portrait":"landscape");this.getContext().clearCachedWidgetBounds()},getOrientation:function(a){return this._orientation},
setOrientation:function(a){if("none"!=this.deviceName&&this._orientation!=a){this._orientation=a;a=n.getOpenEditor();a.editorContainer&&a.editorContainer.updateToolbars&&a.editorContainer.updateToolbars();var b=this.getContext();b.setMobileOrientation(this._orientation);this.silhouetteiframe.setOrientation(this._orientation);a._visualChanged();setTimeout(function(){b.clearCachedWidgetBounds();b.updateFocusAll()},100)}},_objectPropertiesChange:function(a){if(this.isActiveEditor()){var b=this.getContext(),
c=a.command;b.getCommandStack().execute(a.compoundCommand||c);c._newId?(a=B.byId(c._newId,b.getDocument()),b.select(a)):(c=b.getSelection(),a=c.length?c[c.length-1]:void 0,1<c.length&&b.select(a));this._srcChanged()}},isActiveEditor:function(){var a=f.currentEditor;return a&&"davinci.ve.PageEditor"==a.declaredClass&&a.visualEditor==this},_stylePropertiesChange:function(a){if(this.isActiveEditor()){var b=this.getContext().getCommandForStyleChange(a);b&&(this.getContext().getCommandStack().execute(b),
b._newId&&(b=B.byId(b._newId,context.getDocument()),this.context.select(b)),this._srcChanged(),dojo.publish("/davinci/ui/widgetValuesChanged",[a]))}},_srcChanged:function(){this.isDirty=!0},getTemplate:function(){return a},destroy:function(){this._handles&&(this._focusPopup&&this._focusPopup.destroyRecursive(),delete this._focusPopup,this.context.destroy(),this._handles.forEach(dojo.disconnect),this._iframeScrollHandler&&(dojo.disconnect(this._iframeScrollHandler),delete this._iframeScrollHandler),
this._designCPScrollHandler&&(dojo.disconnect(this._designCPScrollHandler),delete this._designCPScrollHandler),this._subscriptions.forEach(dojo.unsubscribe),this._subscriptions=[])},setContent:function(a,b,c){this._onloadMessages=[];this._setContent(a,b,c)},saveAs:function(a,b,c){this._setContent(a,c)},_setContent:function(a,b,c){this._setContentRaw(a,b,c)},_connectCallback:function(a){try{if(a instanceof Error)throw a;var b=this.context,c;this.savePoint=0;try{b.activate2()}catch(d){console.error("crash in context activation! : "+
d),logError(d,"crash in context activation! : ")}c=n.createPopup({partID:"davinci.ve.visualEditor",domNode:b.getContainerNode(),keysDomNode:b.getDocument(),context:b});b.getDocument();c&&(c.adjustPosition=function(a){var c=dojo.position(b.frameNode);dojo.withDoc(b.getDocument(),function(){var a=dojo.docScroll();c.x-=a.x;c.y-=a.y});return c});this._focusPopup=n.createPopup({partID:"davinci.ve.visualEditor",domNode:b.getFocusContainer(),keysDomNode:b.getDocument(),context:b});b.getTopWidgets().forEach(function(a){a.resize&&
a.resize()});b.anyDojoxMobileWidgets=void 0;dojo.publish("/davinci/ui/context/pagebuilt",[b])}catch(e){a=e}finally{a.errorMessage?(this.loadingDiv.innerHTML=a.errorMessage||"(unknown)",console.error("error! ",a.errorMessage)):a instanceof Error?(this.loadingDiv.parentNode&&this.loadingDiv.parentNode.removeChild(this.loadingDiv),delete this.loadingDiv,dojo.publish("/davinci/ui/context/pagebuilt",[b]),console.error("error! ",a)):(this.loadingDiv.parentNode&&this.loadingDiv.parentNode.removeChild(this.loadingDiv),
delete this.loadingDiv)}},getSelectedWidget:function(){var a=this.getContext(),b=a.getSelection(),c=b.length?b[b.length-1]:void 0;1<b.length&&a.select(c);return c},getSelectedSubWidget:function(){return this._selectedSubWidget},save:function(a){if(this.context){var b=[],c=this.context.getModel();c.getText();c.setDirty(!0);c.visit({visit:function(c){"HTMLFile"!=c.elementType&&"CSSFile"!=c.elementType||!c.isDirty()||b.push(c.save(a));return!1}});b=b.concat(this.getContext().saveDynamicCssFiles(this.context.cssFiles,
a));b.length?this.savePromise=k(b):delete this.savePromise;return this.savePromise}},removeWorkingCopy:function(){},getDefaultContent:function(){return this.getTemplate()},previewInBrowser:function(){var a=this.deviceName,b=n.getOpenEditor().resourceFile.getURL(),c=[];"none"!=a&&(c=["preview\x3d1","device\x3d"+encodeURIComponent(a),"file\x3d"+encodeURIComponent(b)],b=n.location(),b+="/maqetta/preview.html?","landscape"==this._orientation&&c.push("orientation\x3d"+this._orientation));this.context.getPreference("zazl")&&
c.push("zazl\x3dtrue");c.length&&(b+="?"+c.join("\x26"));a=function(){var a=window.open(b,"preview_"+b);w(a,f.location()+require.toUrl("dojox/image/resources/images/loading.gif"),"gray")};this.savePromise?this.savePromise.then(a):a()},refresh:function(){var a=this.context,b=y.getXPath(a.getSelection()[0]._srcElement,A);a.setSource(a.model);var b=a.model.evaluate(b).getAttribute("id"),c=B.byId(b,a.getDocument());setTimeout(function(){a.select(c)},0)},_contextLoaded:function(a){a==this.getContext()&&
this._registerScrollHandlers()},_editorSelected:function(a){var b=this.getContext(),b=b?b.getFocusContainer():null;a.oldEditor==this._pageEditor&&b&&this._focusPopup&&this._focusPopup.unBindDomNode(b);a.editor==this._pageEditor&&(this._registerScrollHandlers(),b&&this._focusPopup&&this._focusPopup.bindDomNode(b));if(b=document.getElementById("visualEditorBorder"))b.style.display=a.editor&&"davinci.ve.PageEditor"==a.editor.declaredClass?"block":"none"},_resizeBody:function(a,b){var c=v.getScrollLeft(a),
d=v.getScrollTop(a);a.style.width=0<c?b.w+c+"px":"100%";a.style.height=0<d?b.h+d+"px":"100%"},_scrollHandler:function(a){(a=dojo.query(".designCP iframe",this._pageEditor.domNode)[0])&&a.contentDocument&&a.contentDocument.body&&(this._resizeBody(a.contentDocument.body,{w:dojo.style(this.contentPane.domNode,"width"),h:dojo.style(this.contentPane.domNode,"height")}),setTimeout(function(){var a=this.getContext();a.clearCachedWidgetBounds();a.updateFocusAll()}.bind(this),100))},_registerScrollHandlers:function(){if(!this._iframeScrollHandler){var a=
dojo.query(".designCP iframe",this._pageEditor.domNode)[0];a&&a.contentDocument&&a.contentDocument.body&&(this._iframeScrollHandler=dojo.connect(a.contentDocument.body.ownerDocument,"onscroll",this,this._scrollHandler))}!this._designCPScrollHandler&&(a=dojo.query(".designCP",this._pageEditor.domNode)[0])&&(this._designCPScrollHandler=dojo.connect(a,"onscroll",this,this._scrollHandler))}})})},"davinci/ve/VisualEditorOutline":function(){define("dojo/_base/declare dojo/_base/connect ./commands/ReparentCommand ./commands/StyleCommand ./widget ./States ../Runtime xide/factory xide/types".split(" "),
function(p,m,h,e,b,k,a,f,n){var g=p(null,{toggleMode:!0,betweenThreshold:4,showRoot:!0,dndController:"dijit.tree.dndSource",onChange:function(a){},constructor:function(a){this._context=a;this._handles=[];this._connect("activate","_rebuild");this._connect("widgetChanged","_widgetChanged")},getRoot:function(a,b){a(this._context.rootWidget||{id:"myapp",label:"application"})},getLabel:function(a){if("myapp"==a.id)return this._context.model.fileName;var c="",e=this._getWidget(a);if("xblox/RunScript"===
a.type&&e)return(c=e.domNode)&&c.script?"XBlox::"+c.script:"XBlox::"+e.dijitWidget.targetEvent;if(e.isWidget)return c=b.getLabel(e);if(c=e.type){a=this.useRichTextLabel?"\x26lt;":"\x3c";var f=this.useRichTextLabel?"\x26gt;":"\x3e",c=0===c.indexOf("html.")?a+c.substring(5)+f:0===c.indexOf("OpenAjax.")?a+c.substring(9)+f:0<c.indexOf(".")?c.substring(c.lastIndexOf(".")+1):e.label||c;(e=b.byId(e.id,this._context.getDocument()))&&(e=e.getId())&&(c+=" id\x3d"+e);return c}},_getChildren:function(a){var b=
[];this._context.rootWidget||console.error("editor context has no root widget yet!");if(!this._context.rootWidget||!a||"state"==a.type||"html.stickynote"==a.type||"html.richtext"==a.type)return[];if("myapp"==a.id||a===this._context.rootNode)b=this._context.getTopWidgets();else{var e=this._getWidget(a);e&&e.getChildren&&(b=this._getWidget(a).getChildren())}return b.filter(function(a){return"xblox/RunScript"==a.type||"xblox/CSSState"==a.type||"xblox/StyleState"==a.type?!0:a&&a.getContext&&a.getContext()&&
!a.internal&&a._srcElement}).map(this._buildItem)},__getChildren:function(a){var b=[];a&&"dijit/form/Button"==a.type&&a.dijitWidget&&dojo.forEach(a.dijitWidget.domNode.children,function(a){(a=davinci.ve.widget.getWidget(a))&&"xblox/RunScript"==a.type&&b.push(a)});return b},mayHaveChildren:function(a){return(a=this._getWidget(a))&&a.type&&0===a.type.indexOf("OpenAjax.")?!1:0<this._getChildren(a).length},getIdentity:function(a){return a?a.id:null},getChildren:function(a,b,e){b(this._getChildren(a))},
put:function(a,b){var e=this._getWidget(a),f=e.getParent();this.onChildrenChange(f,this._getChildren(f));return this.getIdentity(e)},add:function(a,b){(b=b||{}).overwrite=!1;return this.put(a,b)},onDelete:function(a){},remove:function(a){this.onDelete(a)},newItem:function(a,b){},pasteItem:function(a,b,e,f,g,k){a&&e&&b&&(e="myapp"==e.id?this._context.rootWidget:this._getWidget(e),b="myapp"==b.id?this._context.rootWidget:this._getWidget(b),a=this._getWidget(a),b!=e||f||dojo.indexOf(b.getChildren(),
a)<g&&g++,a=new h(a,e,g),this._context.getCommandStack().execute(a))},checkItemAcceptance:function(a,b,e){switch(e){case "before":case "after":return!0;default:return a=dijit.getEnclosingWidget(a).item,a=this.tree.model._getWidget(a),a.getContainerNode&&a.getContainerNode()||"myapp"==a.id}},onChildrenChange:function(a,b){},_rebuild:function(){if(!this._skipRefresh){var a=this._context.rootNode;if(a)this.onChildrenChange(this._buildItem(a),this._getChildren(a))}},_widgetChanged:function(a,b,e){try{a===
this._context.WIDGET_ADDED?this.add(b):a===this._context.WIDGET_REMOVED?this.remove(b):a===this._context.WIDGET_MODIFIED?(this.onChange(b),this.onChildrenChange(b,this._getChildren(b))):a===this._context.WIDGET_REPARENTED?(this.remove(b),this.put(b,{overwrite:!0,parent:e[1]})):a===this._context.WIDGET_ID_CHANGED&&(this.remove({id:e}),this.add(b))}catch(g){console.error("VisualEditorOutline._widgetChanged: e \x3d "+g)}f.publish(n.EVENTS.ON_WIDGET_CHANGED,{type:a,widget:b,args:e},this)},toggle:function(a,
b,e){a=this._getWidget(a);var f=a.getHelper(),g=!0;f&&f.onToggleVisibility&&(g=f.onToggleVisibility(a,b));return g?(this._toggle(a,b,e),!0):!1},_toggle:function(a,b,f){b=b?"none":"";var g;if(f=k.getFocus(a.domNode.ownerDocument.body))g=f.state;else{f=k.getStatesListCurrent(a.domNode);for(var h=0;h<f.length;h++)if(f[h]){g=f[h];break}}a=new e(a,[{display:b}],g);this._context.getCommandStack().execute(a)},shouldShowElement:function(a,b){return"toggleNode"==a?"states"!=b.type&&"myapp"!=b.id:!0},_getToggledItemsAttr:function(){var a=
[],b;for(b in this.toggledItems)a.push(b);return a},isToggleOn:function(a){a=this._getWidget(a);var b=a.getHelper();return b&&b.isToggleOn?b.isToggleOn(a):"none"===a.domNode.style.display},_getWidget:function(a){return a?b.byId(a.id):null},_buildItem:function(a){if(a)return{id:a.id,type:a.type}},_connect:function(a,b){this._handles.push(m.connect(this._context,a,this,b))},destroy:function(){this._handles.forEach(m.disconnect)}});return p("davinci.ve.VisualEditorOutline",null,{toolbarID:"davinci.ve.outline",
_outlineMode:"design",constructor:function(b){this._editor=b;this._context=b.visualEditor.context;this._handles=[];this._connect("onSelectionChange","onSelectionChange");this._connect("deselect","deselect");this._widgetModel=new g(this._context);m.subscribe("/maqetta/appstates/state/changed/end",this,function(b){if("davinci.themeEditor.ThemeEditor"!==("undefined"!==typeof davinci&&a.currentEditor&&a.currentEditor.declaredClass)&&this._tree&&(b=b&&b.node&&b.node._dvWidget))for(b=b.getChildren();b.length;){var d=
b.shift();if(d){var e="none"!==d.domNode.style.display;this._tree&&this._tree.toggleNode(d,!e);b=b.concat(d.getChildren())}}})},getActionsID:function(){if("design"===this._outlineMode)return"davinci.ve.VisualEditorOutline"},_connect:function(a,b){this._handles.push(m.connect(this._context,a,this,b))},switchDisplayMode:function(a){this._outlineMode=a;this._outlineView.createTree()},getModel:function(){switch(this._outlineMode){case "design":this._model=this._widgetModel;break;case "source":this._model=
this._srcModel}return this._model},getSelectedItem:function(){return this._tree&&this._tree._getSelectedItemAttr()},onSelectionChange:function(a,b){"design"==this._outlineMode&&(a=a||this._context.getSelection())&&this._tree&&this._tree.selectNode(a,b)},deselect:function(){this._tree&&this._tree&&this._tree.deselectAll()},getIconClass:function(a,b){var e=a.type;return e?"xblox/RunScript"==e?"fa fa-play-circle-o":b?"fa fa-circle-thin":"fa fa-circle":b?"fa fa-circle-thin":"fa fa-circle"}})})},"davinci/html/ui/ImageViewer":function(){define([],
function(){var p=function(m){this.element=m};p.prototype={isReadOnly:!0,save:function(){},getDefaultContent:function(){},supports:function(m){return!1},setContent:function(m,h){this.fileName=m;this.element.innerHTML="\x3cdiv style\x3d'overflow:auto'\x3e\x3cimg src\x3d'"+encodeURI(this.resourceFile.getURL())+"'/\x3e\x3c/div\x3e";this.dirty=!1},destroy:function(){},getOnUnloadWarningMessage:function(){return null}};return p})},"davinci/ve/prefs/HTMLEditPreferences":function(){define("dojo/_base/declare dijit/layout/ContentPane dijit/_TemplatedMixin dijit/form/CheckBox dijit/form/TextBox dijit/form/Select davinci/lang/ve/common dojo/text!./HtmlEditPreferences.html".split(" "),
function(p,m,h,e,b,k,a,f){return p([m,h],{templateString:f,postMixInProperties:function(){this._loc=a},postCreate:function(){this._snap=new e({},this.snapNode);this._showPossibleParents=new e({},this.showPossibleParentsNode);this._cssOverrideWarn=new e({},this.cssOverrideWarn);this._absoluteWidgetsZindex=new b({},this.absoluteWidgetsZindex);this._zazl=new e({},this.zazl);this.containerNode||(this.containerNode=this.domNode)},getDefaults:function(){},setDefaults:function(){},doApply:function(){},getPreferences:function(){return{snap:this._snap.checked,
showPossibleParents:this._showPossibleParents.checked,cssOverrideWarn:this._cssOverrideWarn.checked,absoluteWidgetsZindex:this._absoluteWidgetsZindex.value,zazl:this._zazl.checked}},setPreferences:function(a){a=a||{};this._check(this._snap,!!a.snap);this._check(this._showPossibleParents,!!a.showPossibleParents);this._check(this._cssOverrideWarn,!!a.cssOverrideWarn);this._absoluteWidgetsZindex.set("value",a.absoluteWidgetsZindex);this._check(this._zazl,!!a.zazl)},_check:function(a,b){a.set("checked",
b)},save:function(a){davinci.ve._preferences=a}})})},"davinci/lang/ve/common":function(){define([],function(){return{search:"Search",filter:"Filter","new":"New",errorSavingFile:"Error saving file: ${0} details: ${1}",palette:"palette",closeAllEditors:"Close all tabs",undo:"Undo",redo:"Redo",copy:"Copy",paste:"Paste",cut:"Cut","delete":"Delete",surround:"Surround",properties:"Properties",styles:"Styles",events:"Events",preferences:"Preferences",addPane:"Add Pane",addColumn:"Add Column",addRow:"Add Row",
removeColumn:"Remove Column",removeRow:"Remove Row",joinColumn:"Join Column",joinRow:"Join Row",splitColumn:"Split Column",splitRow:"Split Row",alignLeft:"Align Left",alignRight:"Align Right",alignTop:"Align Top",alignBottom:"Align Bottom",show:"Show",hide:"Hide",addMenuItem:"Add Menu Item",addSubMenu:"Add Sub Menu",addMenuBarItem:"Add MenuBar Item",addPopupMenuBar:"Add Popup MenuBarItem",ok:"OK",cancel:"Cancel",page:"Page",title:"Title",metaInfo:"Meta Info",httpEquiv:"HTTP Equiv",style:"Style",theme:"Theme",
styleSheets:"Style Sheets",rules:"Rules",url:"URL",externalScripts:"External Scripts",modules:"Modules",name:"Name",value:"Value",add:"Add",remove:"Remove",staticOptions:"Static Options",axisOptions:"Axis Options",series:"Series",axis:"Axis",option:"Option",selected:"Selected",staticItems:"Static Items",dataStore:"Data Store",query:"Query",fields:"Fields",field:"Field",label:"Label",width:"Width",edit:"Edit",key:"Key",rootId:"Root ID",rootLabel:"Root Label",childrenAttrs:"Children Attributes",items:"Items",
type:"Type",widget:"Widget",position:"Position",size:"Size",layout:"Layout",visual:"Visual",text:"Text",border:"Border",table:"Table",list:"List",aural:"Aural",others:"Others",onLoad:"Load",onUnload:"Unload",script:"Script",methodCall:"Method Call",serviceCall:"Service Call",object:"Object",method:"Method",parameters:"Parameters",result:"Result",service:"Service",content:"Content",source:"Source",target:"Target",property:"Property",flowLayout:"Flow Layout",snapToNearestWidget:"Snap to nearest widget",
showPossibleParents:"When dragging, show possible parents",warnOnCSSOverride:"Warn on CSS Override",absoluteWidgetsZindex:"z-index for sketch mode",widgetPaletteLayout:"In Palette, display widgets as",widgetPaletteShow_Icons:"icons",widgetPaletteShow_List:"list",liveEdit:"Live Edit",zazl:"Enable \x3ca href\x3d'http://zazl.org' target\x3d'_blank'\x3eZazl Optimizer\x3c/a\x3e",selectorPrefix:"Selector Prefix",component:"Component",alternates:"Alternates",alternateWidgets:"Alternate widgets:",howToChooseAlternate:"To choose alternate widget, click-select current widget, then click on up arrow icon.",
summary:"Summary:",description:"Description:",showSuggestedWidgets:"Suggested Widgets",showAllWidgets:"All Widgets",MoreIconTitleString:"Click here to see alternative similar widgets",HelpIconTitleString:"Click here to see descriptive info about this widget",__dummy__:""}})},"davinci/commands/OrderedCompoundCommand":function(){define(["dojo/_base/declare","davinci/commands/CompoundCommand"],function(p,m){return p("davinci.commands.OrderedCompoundCommand",m,{undo:function(){if(this._commands)for(var h=
0;h<this._commands.length;h++)this._commands[h].undo()}})})},"davinci/version":function(){define([],"10")},"davinci/model/resource/Folder":function(){define(["dojo/_base/declare","dojo/_base/xhr","davinci/Runtime","davinci/model/resource/Resource","davinci/model/resource/File"],function(p,m,h,e,b){var k=p("davinci.model.resource.Folder",e,{serviceClass:"XIDE_Directory_Service",workspaceMount:"/ws/",constructor:function(a,b){this.elementType="Folder";this.name=a;this.parent=b},reload:function(){this._isLoaded=
!1},createResource:function(a,e,h,g){var d;null!=a?d=e?new k(a,this):new b(a,this):(d=this,e="Folder"==this.elementType);var c=this;if(!h){h=""+this.getPath();"."==h&&(h=""+this.workspaceMount);h=h.replace("./",this.workspaceMount);h=this.serviceClass;e=e?"mkDir":"mkFile";if(!this.serviceObject[h][e])return console.error("_createResource : server doesnt support :"+e),this;this.serviceObject[h][e](this.workspaceMount,d.getPath()).then(function(b){if(!0===b&&null!=a||"The file already exists"===b)return c.children.push(d),
delete d.libraryId,delete d.libVersion,delete d._readOnly,dojo.publish("/davinci/resource/resourceChanged",["created",d]),g&&g(d),d;if("OK"!=b)throw"Folder.createResource failed: name\x3d"+a+"response\x3d"+b;delete d.libraryId;delete d.libVersion;delete d._readOnly;g(c);if(!g)debugger})}},getChildren2:function(a,b){if(this._isLoaded)a(this.children);else if(this._loadingCallbacks)this._loadingCallbacks.push(a);else{this._loadingCallbacks=[];this._loadingCallbacks.push(a);var e=""+this.getPath();"."==
e&&(e="/ws/");var g=this.serviceClass;if(!this.serviceObject)debugger;if(!this.serviceObject[g])debugger;this.serviceObject.sync=!0;this.serviceObject[g].ls(this.workspaceMount,e).then(function(a){this.setChildrenSync(a);dojo.forEach(this._loadingCallbacks,function(a){a(this.children)},this);delete this._loadingCallbacks}.bind(this),b)}},getChildren:function(a,b){if(this._isLoaded)a.call(null,this.children);else if(this._loading)this._loading.then(function(){a.call(null,this.children)}.bind(this),
b);else{console.error("list files : "+this.getPath());var e=""+this.getPath();"."==e&&(e="/ws/");e=e.replace("./",this.workspaceMount);this.serviceObject[this.serviceClass].ls(e).then(function(b){this.setChildren(b);this._isLoaded=!0;a.call(null,this.children);delete this._loading}.bind(this),b)}},getChildrenSync:function(a,b){if(this._isLoaded)a(this.children);else if(this._loadingCallbacks)this._loadingCallbacks.push(a);else{this._loadingCallbacks=[];this._loadingCallbacks.push(a);console.error("list files : "+
this.getPath());var e=this.getPath();"./project1"===e&&console.error("gotcha");e=""+e;"."==e&&(e="/ws/");e=e.replace("./","/ws/");h.serverJSONRequest({url:"cmd/listFiles.php",content:{path:this.getPath(),basePath:"./"},sync:b,load:dojo.hitch(this,function(a,b){this.setChildrenSync(a);dojo.forEach(this._loadingCallbacks,function(a){a(this.children)},this);delete this._loadingCallbacks})})}},setChildren:function(a){this.children=[];this._appendFiles(a)},setChildrenSync:function(a){this.children=[];
this._appendFiles(a,!0)},_appendFiles:function(a,e){a.forEach(function(a){var g=e?this.getChildSync(a.name):this._getChild(a.name),d=null!=g;a.isDir||a.isLib?(d||(g=new k(a.name,this)),a.isLib&&(g.isLibrary=!0)):d||(g=new b(a.name,this));g.link=a.link;g.isNew=a.isNew;g._readOnly=a.readOnly;g.setDirty(a.isDirty);a.libraryId&&(g.libraryId=a.libraryId,g.libVersion=a.libVersion);d||this.children.push(g)},this);this._isLoaded=!0},getMarkers:function(a,b){var e=[];this.visit({visit:function(g){if("File"==
g.elementType)markers=g.getMarkers(a),e.concat(markers);else if(!b)return!0}},!0);return e},getChildSync:function(a){if(!this._isLoaded||1>this.children.length)this._isLoaded=!1,this.getChildrenSync(function(a){this.children=a},!0);return this._getChild(a)},getChild:function(a){if(!this._isLoaded||1>this.children.length)this._isLoaded=!1,this.getChildren2(function(a){this.children=a},!0);return this._getChild(a)},_getChild:function(a){if(!this.__CASE_SENSITIVE){if(!a||null==a.toLowerCase)debugger;
a=a.toLowerCase()}var b;this.children.some(function(e){var g=e.getName();this.__CASE_SENSITIVE||(g=g.toLowerCase());(g=g==a)&&(b=e);return g});return b}});return k})},"davinci/model/resource/Resource":function(){define("dojo/_base/declare dojo/_base/xhr dojo/_base/connect dojo/Deferred davinci/Runtime davinci/model/Model davinci/model/Path xide/manager/ServerActionBase".split(" "),function(p,m,h,e,b,k,a,f){return p("davinci.model.resource.Resource",[k,f],{singleton:!0,sync:!1,workspaceMount:"/ws/",
_initService:function(){var a=this.findServiceUrl(this.declaredClass);a&&(this.serviceUrl=a);this.inherited(arguments)},constructor:function(){this.elementType="Resource";this.name="";this.parent=null;this._id=dijit.getUniqueId("maqFileResource");this.init()},getName:function(){return this.name},getPath:function(){return this.parent?this.parent.getPath()+"/"+this.name:this.name},readOnly:function(){return this.hasOwnProperty("_readOnly")?this._readOnly||null!=this.parent&&this.parent.readOnly():this.parent?
this.parent.readOnly():!1},getURL:function(){var a=this.getPath();0==a.indexOf("./")&&(a=a.substring(2,a.length));return b.getUserWorkspaceUrl()+a},rename:function(b){var e=(new a(this.getPath())).removeLastSegments().append(b);return m.get({url:"cmd/rename",handleAs:"text",content:{oldName:this.getPath(),newName:e.toString()}}).then(function(){this.name=b;h.publish("/davinci/resource/resourceChanged",["renamed",this])}.bind(this))},getParentFolder:function(){return"File"==this.elementType?this.parent:
this},isVirtual:function(){return!!this.libraryId},visit:function(a,b){var d=a.visit(this);this._isLoaded||"Folder"!=this.elementType||b?this.children&&!d&&dojo.forEach(this.children,function(c){c.visit(a,b)}):this.getChildren(dojo.hitch(this,function(){dojo.forEach(this.children,function(c){c.visit(a,b)})}))},deleteResource:function(a){var b=""+this.getPath();"."==b&&(b=""+this.workspaceMount);var b=b.replace("./",this.workspaceMount),d=this.serviceClass,c="Folder"==this.elementType?"deleteDirectory":
"deleteFile",f=function(){var a=this.getName();this.parent.children.some(function(b,c,d){if(b.getName()==a)return d.splice(c,1),!0});h.publish("/davinci/resource/resourceChanged",["deleted",this])}.bind(this);a?(a=new e,f(),a.resolve()):a=this.serviceObject[d][c](b).then(f,function(){});return a},getId:function(){return this._id}})})},"davinci/model/resource/File":function(){define("dojo/_base/declare davinci/Runtime davinci/model/resource/Resource davinci/model/resource/Marker davinci/ve/utils/URLRewrite xide/utils".split(" "),
function(p,m,h,e,b,k){return p("davinci.model.resource.File",h,{serviceClass:"XIDE_Directory_Service",mount:"/ws/",getMountPoint:function(){return this.mount},constructor:function(a,b){this.elementType="File";this.name=a;this.parent=b;this.markers=[];this.extension=a.substr(a.lastIndexOf(".")+1)},getExtension:function(){return this.extension},clearMarkers:function(){this.markers=[]},addMarker:function(a,b,h){this.markers.push(new e(this,a,b,h))},getMarkers:function(a){var b=[];if(this.markers)for(var e=
0;e<this.markers.length;e++){var g=this.markers[e];a?"string"==typeof a?g.type==a&&b.push(g):dojo.forEach(a,function(a){a==g.type&&b.push(g)}):b.push(g)}return b},setContents:function(a,b){this.isNew&&!b&&(this.isNew=!1);var e=(b=!1,""),g=encodeURI(this.getPath()+e);return this.serviceObject[this.serviceClass].set(this.getMountPoint(),g,a).then(function(a){this.dirtyResource=b;dojo.publish("/davinci/resource/resourceChanged",["modified",this]);return this}.bind(this),function(a){console.error("An error occurred: davinci.model.resource.File.prototype.setContents "+
a+" : "+g);return a})},getContentSync:function(){return m.serverJSONRequest({url:b.encodeURI(this.getURL()),handleAs:"text",sync:!0})},getContent:function(){return this.serviceObject[this.serviceClass].get(k.buildPath(this.getMountPoint(),encodeURI(this.getPath())),!1,!1)},removeWorkingCopy:function(){m.serverJSONRequest({url:m.cmdOffset+"cmd/removeWorkingCopy",handleAs:"text",content:{path:this.getPath()},sync:!0});this.isNew&&this.deleteResource(!0)}})})},"davinci/model/resource/Marker":function(){define(["dojo/_base/declare",
"davinci/model/resource/Resource"],function(p,m){return p("davinci.model.resource.Marker",m,{constructor:function(h,e,b,k){this.resource=h;this.type=e;this.line=b;this.text=k}})})},"url:davinci/workbench/templates/Preferences.html":"\x3cdiv style\x3d'width:100%; height: 100%'\x3e\n\t\x3cdiv class\x3d\"dijitDialogPaneContentArea\"\x3e\n\t\t\x3cdiv dojoType\x3d'dijit.layout.BorderContainer' dojoAttachPoint\x3d\"borderContainer\" style\x3d'width:100%; height: 100%' gutters\x3d'false' liveSplitters\x3d'true' id\x3d'preferencesContainer'\x3e\n\t\t\t\x3cdiv dojoType\x3d'dijit.layout.ContentPane' id\x3d'pref.TreePane' splitter\x3d'true' region\x3d'leading' style\x3d'width: 200px;' minSize\x3d'100' maxSize\x3d'300'\x3e\x3c/div\x3e\n\t\t\t\x3cdiv dojoType\x3d'dijit.layout.ContentPane' region\x3d'center' id\x3d'pref.RightPane'\x3e\x3c/div\x3e\n\t\t\x3c/div\x3e\n\t\x3c/div\x3e\n\t\x3cdiv class\x3d\"dijitDialogPaneActionBar\"\x3e\n\t\t\x3c!-- FIXME: we don't have logic to yet implement restoreDefaults() yet. See #627\n\t\t\x3cbutton dojoType\x3ddijit.form.Button type\x3d\"button\" onclick\x3d\"davinci.workbench.Preferences.restoreDefaults();\"\x3e\x3c/button\x3e--\x3e\n\t\t\x3cbutton dojoType\x3d\"dijit.form.Button\" type\x3d\"button\" onclick\x3d\"davinci.workbench.Preferences.save();\" class\x3d\"maqPrimaryButton\" type\x3d\"submit\"\x3e${commonStrings.buttonSave}\x3c/button\x3e\n\t\t\x3cbutton dojoType\x3d\"dijit.form.Button\" type\x3d\"button\" onclick\x3d\"davinci.workbench.Preferences.finish();\" class\x3d\"maqSecondaryButton\"\x3e${commonStrings.buttonCancel}\x3c/button\x3e\n\t\x3c/div\x3e\n\x3c/div\x3e\n\n\n",
"url:davinci/ve/widgets/templates/BackgroundDialog.html":"\x3cdiv class\x3d\"backgroundDialog\" style\x3d\"position:relative\" dojoAttachPoint\x3d\"_fileDialog\"\x3e\n\t\x3cstyle type\x3d\"text/css\"\x3e\n\t\t.backgroundDialog {\n\t\t\twidth:31em;\n\t\t}\n\t\t.bgdTopDiv {\n\t\t\tmargin-top: 4px;\n\t\t\tpadding-left: .75em;\n\t\t}\n\t\t.bgdTopTable {\n\t\t\twidth:100%;\n\t\t\tborder-collapse:collapse;\n\t\t}\n\t\t.bgdTopLabel, .bgdTopField, .bgdTopPreview {\n\t\t\twidth:1px;\n\t\t\twhite-space:nowrap;\n\t\t}\n\t\t.bgdTopLabel {\n\t\t\ttext-align:right;\n\t\t\tpadding-right:6px;\n\t\t}\n\t\t.bgdTopTable .dijitSelect .dijitButtonContents {\n\t\t\twidth:8em;\n\t\t}\n\t\t.bgdTopTable .dijitTextBox {\n\t\t\twidth: 9.8em;\n\t\t}\n\t\t.bgdPreview {\n\t\t\tdisplay:inline-block;\n\t\t\twidth: 6em;\n\t\t\theight: 2.8em;\n\t\t\tmargin-left:12px;\n\t\t\tborder:1px solid gray;\n\t\t\tvertical-align: middle;\n\t\t}\n\t\t.bgdOptionsDiv {\n\t\t\tmargin:0.3em 0em 1em 1em;\n\t\t}\n\t\t.bgdOptionsDiv \x3e table {\n\t\t\twidth:27em;\n\t\t}\n\t\t.bgdSection {\n\t\t\tbackground-color:#d8d8d8;\n\t\t}\n\t\tdiv.bgdSection, .bgdSection td, .bgdSection.bgdUrlSectionLabel {\n\t\t\tpadding:2px 5px;\n\t\t}\n\t\t.bgdBeforeStopsLabel {\n\t\t\theight:6px;\n\t\t}\n\t\t.bgdStopsLabel {\n\t\t\tmargin-top:1em;\n\t\t}\n\t\t.bgdAfterStopsLabel {\n\t\t\theight:0px;\n\t\t}\n\t\t.bgdBeforeOptionsLabel {\n\t\t\theight:16px;\n\t\t}\n\t\t.bgdOptionsLabel {\n\t\t\tmargin-top:1em;\n\t\t}\n\t\t.bgdAfterOptionsLabel {\n\t\t\theight:4px;\n\t\t}\n\t\t.bgdCol1 {\n\t\t\twidth:10px;\n\t\t}\n\t\t.bgdPlusMinusButtons {\n\t\t\twhite-space:nowrap;\n\t\t\twidth:51px;\n\t\t}\n\t\t.bgdOptionsDiv th {\n\t\t\ttext-align:center;\n\t\t\tfont-style:italic;\n\t\t}\n\t\t.bgdOptsLabel {\n\t\t\ttext-align:right;\n\t\t\tpadding-right: 6px;\n\t\t\twhite-space:nowrap;\n\t\t}\n\t\t.bgdColor.dijitTextBox {\n\t\t\twidth:9em;\n\t\t}\n\t\t.bgdOptionsDiv .bgdPosition.dijitTextBox {\n\t\t\twidth:5em;\n\t\t}\n\t\t.bgdOptionsDiv .dijitTextBox {\n\t\t\twidth:10.6em;\n\t\t}\n\t\t.bgdStopColorTD .dijitTextBox {\n\t\t\twidth:14em;\n\t\t}\n\t\t.bgdOptionsDiv .dijitSelect {\n\t\t\tmargin:0;\n\t\t}\n\t\t.bgdOptionsDiv .dijitSelect .dijitButtonContents {\n\t\t\twidth:9em;\n\t\t}\n\t\t.bgdUrlContainerOuter {\n\t\t\tmargin-top:1em;\n\t\t\tmargin-left:1em;\n\t\t}\n\t\t.bgdUrlContainerInner {\n\t\t\tmargin:0 1em;\n\t\t}\n\t\t.bgdUrlSectionLabel {\n\t\t\tmargin:1em 0 .25em;\n\t\t}\n\t\t.bgdFileTreeContainer {\n\t\t\tmargin: 0 0 0 3px;\n\t\t\tborder: 1px solid #26A;\n\t\t}\n\t\t.bgdFileTreeContainer .dijitTree {\n\t\t\theight:125px;\n\t\t}\t\t\n\t\t.backgroundDialog .fileNameRow  {\n\t\t\tmargin:8px 0 .4em;\n\t\t}\n\t\t.backgroundDialog .fileNameRow label {\n\t\t\tvertical-align:middle;\n\t\t\tmargin-right:4px;\n\t\t}\n\t\t.backgroundDialog .fileNameRow .dijitTextBox {\n\t\t\twidth:16em;\n\t\t}\n\t\t.bgdOptionsDiv .bgdOtherRow .dijitTextBox {\n\t\t\twidth:15em;\n\t\t}\n\t\t\n\t\x3c/style\x3e\n\n\t\x3cdiv class\x3d\"dijitDialogPaneContentArea\"\x3e\n\t\t\x3cdiv class\x3d'bgdTopDiv'\x3e\n\t\t\t\x3ctable class\x3d'bgdTopTable'\x3e\n\t\t\t\t\x3ctr\x3e\n\t\t\t\t\t\x3ctd class\x3d'bgdTopLabel'\x3e\x3clabel class\x3d'bgdTypeDivTypeLabel'\x3e${veNLS.bgdBackgroundColor}\x3c/label\x3e\x3c/td\x3e\n\t\t\t\t\t\x3ctd class\x3d'bgdTopField'\x3e\n\t\t\t\t\t\t\x3cselect dojoType\x3d\"dijit.form.ComboBox\" dojoAttachPoint\x3d'bgdColorCB'\x3e\n\t\t\t\t\t\t\t\x3c!--  values added dynamically --\x3e\n\t\t\t\t\t\t\x3c/select\x3e\n\t\t\t\t\t\x3c/td\x3e\n\t\t\t\t\t\x3ctd rowspan\x3d'2' class\x3d'bgdTopPreview' style\x3d'border-collapse:collapse'\x3e\x3cspan class\x3d'bgdPreview'\x3e\x3c/span\x3e\x3c/td\x3e\n\t\t\t\t\t\x3ctd class\x3d'bgdTopExpando'\x3e\x26nbsp;\x3c/td\x3e\n\t\t\t\t\x3c/tr\x3e\n\t\t\t\t\x3ctr\x3e\n\t\t\t\t\t\x3ctd class\x3d'bgdTopLabel'\x3e\x3clabel class\x3d'bgdTypeDivTypeLabel'\x3e${veNLS.bgdBackgroundImageType}\x3c/label\x3e\x3c/td\x3e\n\t\t\t\t\t\x3ctd class\x3d'bgdTopField'\x3e\n\t\t\t\t\t\t\x3cselect dojoType\x3d'dijit.form.Select' value\x3d'linear' dojoAttachPoint\x3d'bgdTypeSelect'\x3e\n\t\t\t\t\t\t\t\x3c!--  values added dynamically --\x3e\n\t\x3c!-- FIXME: Add plain text type-in box if unrecognized syntax --\x3e\n\t\t\t\t\t\t\x3c/select\x3e\n\t\t\t\t\t\x3c/td\x3e\n\t\t\t\t\t\x3ctd class\x3d'bgdTopExpando'\x3e\x26nbsp;\x3c/td\x3e\n\t\t\t\t\x3c/tr\x3e\n\t\t\t\x3c/table\x3e\n\t\t\x3c/div\x3e\n\t\t\n\t\t\x3cdiv class\x3d\"bgdUrlContainerOuter bgdImageOptRow\"\x3e\n\t\t\t\x3cdiv class\x3d\"bgdSection bgdOptionsLabel\"\x3e${veNLS.bgdImageUrl}\x3c/div\x3e\n\t\t\t\x3cdiv class\x3d\"bgdUrlContainerInner\"\x3e\n\t\t\t\t\x3cdiv class\x3d'fileNameRow'\x3e\n\t\t\t\t\t\x3ctd class\x3d\"fileDialogLabelCell\"\x3e\n\t\t\t\t\t\x3clabel\x3e${veNLS.bgdUrl}\x3c/label\x3e\n\t\t\t\t\t\x3c/td\x3e\n\t\t\t\t\t\x3ctd\x3e\n\t\t\t\t\t\x3cdiv dojoType\x3d'davinci.ui.widgets.FileFieldDialog' dojoAttachPoint\x3d\"_filePicker\"\x3e\x3c/div\x3e\n\t\t\t\t\t\x3c/td\x3e\n\t\t\t\t\x3c/div\x3e\n\t\t\t\x3c/div\x3e\n\t\t\x3c/div\x3e\n\t\t\x3cdiv class\x3d\"bgdOptionsDiv\"\x3e\n\t\t\t\x3ctable\x3e\n\t\t\t\t\x3ctr class\x3d\"bgdGradOptRow bgdBeforeStopsLabel\"\x3e\x3c/tr\x3e\n\t\t\t\t\x3ctr class\x3d\"bgdGradOptRow bgdSection bgdStopsLabel\"\x3e\n\t\t\t\t\t\x3ctd colspan\x3d\"5\"\x3e${veNLS.bgdColorStops}\x3c/td\x3e\n\t\t\t\t\x3c/tr\x3e\n\t\t\t\t\x3ctr class\x3d\"bgdGradOptRow bgdAfterStopsLabel\"\x3e\x3c/tr\x3e\n\t\t\t\t\x3ctr class\x3d'bgdGradOptRow bgdStopRow'\x3e\n\t\t\t\t\t\x3cth\x3e\x3c/th\x3e\x3cth\x3e\x3c/th\x3e\x3cth\x3e${veNLS.bgdColor}\x3c/th\x3e\x3cth\x3e${veNLS.bgdPosition}\x3c/th\x3e\x3cth\x3e\x3c/th\x3e\n\t\t\t\t\x3c/tr\x3e\n\t\t\t\t\x3c!--  gradient stop rows added dynamically --\x3e\n\t\t\t\t\x3ctr class\x3d\"bgdBeforeOptionsLabel bgdOptionsLabelRow\"\x3e\x3c/tr\x3e\n\t\t\t\t\x3ctr class\x3d\"bgdSection bgdOptionsLabel bgdOptionsLabelRow\"\x3e\n\t\t\t\t\t\x3ctd colspan\x3d\"5\"\x3e${veNLS.bgdOptions}\x3c/td\x3e\n\t\t\t\t\x3c/tr\x3e\n\t\t\t\t\x3ctr class\x3d\"bgdAfterOptionsLabel bgdOptionsLabelRow\"\x3e\x3c/tr\x3e\n\t\t\t\t\x3ctr class\x3d\"bgdGradOptRow bgdLinearOptRow\"\x3e\t\n\t\t\t\t\t\x3ctd class\x3d'bgdCol1'\x3e\x3c/td\x3e\n\t\t\t\t\t\x3ctd class\x3d'bgdOptsLabel'\x3e\x3clabel\x3e${veNLS.bgdAngle}\x3c/label\x3e\x3c/td\x3e\n\t\t\t\t\t\x3ctd colspan\x3d'3'\x3e\n\t\t\t\t\t\t\x3cselect dojoType\x3d\"dijit.form.ComboBox\" dojoAttachPoint\x3d'bgdLinearAngleCB'\x3e\n\t\t\t\t\t\t\t\x3c!--  values added dynamically --\x3e\n\t\t\t\t\t\t\x3c/select\x3e\n\t\t\t\t\t\x3c/td\x3e\n\t\t\t\t\x3c/tr\x3e\n\t\t\t\t\x3ctr class\x3d\"bgdGradOptRow bgdRadialOptRow\"\x3e\t\n\t\t\t\t\t\x3ctd class\x3d'bgdCol1'\x3e\x3c/td\x3e\n\t\t\t\t\t\x3ctd class\x3d'bgdOptsLabel'\x3e${veNLS.bgdPosition2}\x3c/td\x3e\n\t\t\t\t\t\x3ctd colspan\x3d'3'\x3e\n\t\t\t\t\t\t\x3cselect dojoType\x3d\"dijit.form.ComboBox\" dojoAttachPoint\x3d'bgdRadialPosCB'\x3e\n\t\t\t\t\t\t\t\x3c!--  values added dynamically --\x3e\n\t\t\t\t\t\t\x3c/select\x3e\n\t\t\t\t\t\x3c/td\x3e\n\t\t\t\t\x3c/tr\x3e\n\t\t\t\t\x3ctr dojoAttachPoint\x3d\"bgdShapeRow\" class\x3d\"bgdGradOptRow bgdRadialOptRow\"\x3e\t\n\t\t\t\t\t\x3ctd class\x3d'bgdCol1'\x3e\x3c/td\x3e\n\t\t\t\t\t\x3ctd class\x3d'bgdOptsLabel'\x3e\x3clabel\x3e${veNLS.bgdShape}\x3c/label\x3e\x3c/td\x3e\n\t\t\t\t\t\x3ctd colspan\x3d'3'\x3e\n\t\t\t\t\t\t\x3cselect dojoType\x3d\"dijit.form.ComboBox\" dojoAttachPoint\x3d'bgdRadialShapeCB'\x3e\n\t\t\t\t\t\t\t\x3c!--  values added dynamically --\x3e\n\t\t\t\t\t\t\x3c/select\x3e\n\t\t\t\t\t\x3c/td\x3e\n\t\t\t\t\x3c/tr\x3e\n\t\t\t\t\x3ctr dojoAttachPoint\x3d\"bgdExtentRow\" class\x3d\"bgdGradOptRow bgdRadialOptRow\"\x3e\t\n\t\t\t\t\t\x3ctd class\x3d'bgdCol1'\x3e\x3c/td\x3e\n\t\t\t\t\t\x3ctd class\x3d'bgdOptsLabel'\x3e\x3clabel\x3e${veNLS.bgdExtent}\x3c/label\x3e\x3c/td\x3e\n\t\t\t\t\t\x3ctd colspan\x3d'3'\x3e\n\t\t\t\t\t\t\x3cselect dojoType\x3d\"dijit.form.ComboBox\" dojoAttachPoint\x3d'bgdRadialExtentCB'\x3e\n\t\t\t\t\t\t\t\x3c!--  values added dynamically --\x3e\n\t\t\t\t\t\t\x3c/select\x3e\n\t\t\t\t\t\x3c/td\x3e\n\t\t\t\t\x3c/tr\x3e\n\t\t\t\t\x3ctr dojoAttachPoint\x3d\"bgdRepeatRow\" class\x3d\"bgdImageOptRow\"\x3e\t\n\t\t\t\t\t\x3ctd class\x3d'bgdCol1'\x3e\x3c/td\x3e\n\t\t\t\t\t\x3ctd class\x3d'bgdOptsLabel'\x3e\x3clabel\x3e${veNLS.bgdBackgroundRepeat}\x3c/label\x3e\x3c/td\x3e\n\t\t\t\t\t\x3ctd colspan\x3d'3'\x3e\n\t\t\t\t\t\t\x3cselect dojoType\x3d\"dijit.form.ComboBox\" dojoAttachPoint\x3d'bgdRepeatCB'\x3e\n\t\t\t\t\t\t\t\x3c!--  values added dynamically --\x3e\n\t\t\t\t\t\t\x3c/select\x3e\n\t\t\t\t\t\x3c/td\x3e\n\t\t\t\t\x3c/tr\x3e\n\t\t\t\t\x3ctr dojoAttachPoint\x3d\"bgdPositionRow\" class\x3d\"bgdImageOptRow\"\x3e\t\n\t\t\t\t\t\x3ctd class\x3d'bgdCol1'\x3e\x3c/td\x3e\n\t\t\t\t\t\x3ctd class\x3d'bgdOptsLabel'\x3e${veNLS.bgdBackgroundPosition}\x3c/td\x3e\n\t\t\t\t\t\x3ctd colspan\x3d'3'\x3e\n\t\x3c!-- FIXME: regExp, invalidMessage --\x3e\n\t\t\t\t\t\t\x3cselect dojoType\x3d\"dijit.form.ComboBox\" dojoAttachPoint\x3d'bgdPositionCB'\x3e\n\t\t\t\t\t\t\t\x3c!--  values added dynamically --\x3e\n\t\t\t\t\t\t\x3c/select\x3e\n\t\t\t\t\t\x3c/td\x3e\n\t\t\t\t\x3c/tr\x3e\n\t\t\t\t\x3ctr dojoAttachPoint\x3d\"bgdSizeRow\" class\x3d\"bgdImageOptRow\"\x3e\t\n\t\t\t\t\t\x3ctd class\x3d'bgdCol1'\x3e\x3c/td\x3e\n\t\t\t\t\t\x3ctd class\x3d'bgdOptsLabel'\x3e${veNLS.bgdBackgroundSize}\x3c/td\x3e\n\t\t\t\t\t\x3ctd colspan\x3d'3'\x3e\n\t\x3c!-- FIXME: regExp, invalidMessage --\x3e\n\t\t\t\t\t\t\x3cselect dojoType\x3d\"dijit.form.ComboBox\" dojoAttachPoint\x3d'bgdSizeCB'\x3e\n\t\t\t\t\t\t\t\x3c!--  values added dynamically --\x3e\n\t\t\t\t\t\t\x3c/select\x3e\n\t\t\t\t\t\x3c/td\x3e\n\t\t\t\t\x3c/tr\x3e\n\t\t\t\t\x3ctr dojoAttachPoint\x3d\"bgdOriginRow\" class\x3d\"bgdImageOptRow\"\x3e\t\n\t\t\t\t\t\x3ctd class\x3d'bgdCol1'\x3e\x3c/td\x3e\n\t\t\t\t\t\x3ctd class\x3d'bgdOptsLabel'\x3e\x3clabel\x3e${veNLS.bgdBackgroundOrigin}\x3c/label\x3e\x3c/td\x3e\n\t\t\t\t\t\x3ctd colspan\x3d'3'\x3e\n\t\t\t\t\t\t\x3cselect dojoType\x3d\"dijit.form.ComboBox\" dojoAttachPoint\x3d'bgdOriginCB'\x3e\n\t\t\t\t\t\t\t\x3c!--  values added dynamically --\x3e\n\t\t\t\t\t\t\x3c/select\x3e\n\t\t\t\t\t\x3c/td\x3e\n\t\t\t\t\x3c/tr\x3e\n\t\t\t\t\x3ctr dojoAttachPoint\x3d\"bgdClipRow\" class\x3d\"bgdImageOptRow\"\x3e\t\n\t\t\t\t\t\x3ctd class\x3d'bgdCol1'\x3e\x3c/td\x3e\n\t\t\t\t\t\x3ctd class\x3d'bgdOptsLabel'\x3e\x3clabel\x3e${veNLS.bgdBackgroundClip}\x3c/label\x3e\x3c/td\x3e\n\t\t\t\t\t\x3ctd colspan\x3d'3'\x3e\n\t\t\t\t\t\t\x3cselect dojoType\x3d\"dijit.form.ComboBox\" dojoAttachPoint\x3d'bgdClipCB'\x3e\n\t\t\t\t\t\t\t\x3c!--  values added dynamically --\x3e\n\t\t\t\t\t\t\x3c/select\x3e\n\t\t\t\t\t\x3c/td\x3e\n\t\t\t\t\x3c/tr\x3e\n\t\t\t\t\x3ctr dojoAttachPoint\x3d\"bgdOtherTypeInRow\" class\x3d\"bgdOtherRow\"\x3e\t\n\t\n\t\t\t\t\t\x3ctd class\x3d'bgdCol1'\x3e\x3c/td\x3e\n\t\t\t\t\t\x3ctd class\x3d'bgdOptsLabel'\x3e\x3clabel\x3e${veNLS.bgdBackgroundImageValue}\x3c/label\x3e\x3c/td\x3e\n\t\t\t\t\t\x3ctd colspan\x3d'3'\x3e\n\t\t\t\t\t\t\x3ctextarea dojoType\x3d\"dijit.form.Textarea\" dojoAttachPoint\x3d'bgdOtherTA'\x3e\x3c/textarea\x3e\n\t\t\t\t\t\x3c/td\x3e\n\t\n\t\t\t\t\x3c/tr\x3e\n\t\n\t\t\t\x3c/table\x3e\n\t\t\x3c/div\x3e\n\t\x3c/div\x3e\n\n\t\x3c!--div class\x3d\"dijitDialogPaneActionBar\"\x3e\n\t\t\x3cspan dojoType\x3d'dijit.form.Button' dojoAttachPoint\x3d\"_okButton\" dojoAttachEvent\x3d'onClick:okButton' label\x3d'${buttonOk}' class\x3d\"maqPrimaryButton\" type\x3d\"submit\"\x3e\x3c/span\x3e \n\t\t\x3cspan dojoType\x3d'dijit.form.Button' dojoAttachEvent\x3d'onClick:cancelButton' label\x3d'${buttonCancel}' class\x3d\"maqSecondaryButton\"/\x3e\x3c/span\x3e \n\t\x3c/div--\x3e\n\x3c/div\x3e\n",
"url:davinci/ui/widgets/templates/FileFieldDialog.html":"\x3cdiv\x3e\n\t\x3cdiv style\x3d'float:right;'\x3e\n\t\t\x3cbutton type\x3d'button' style\x3d'font-size:.75em;float:right;' dojoType\x3d\"dijit.form.Button\" dojoAttachPoint\x3d\"button\" dojoAttachEvent\x3d\"onClick:_showFileSelectionDialog\"\x3e...\x3c/button\x3e\n\t\x3c/div\x3e\n\t\x3cdiv style\x3d'margin-right:35px;'\x3e\n\t\t\x3cinput style\x3d'width:100%;' type\x3d'text' dojoType\x3d\"dijit.form.TextBox\" dojoAttachPoint\x3d\"textField\" dojoAttachEvent\x3d\"onChange:_onChange\"\x3e\x3c/input\x3e\n\t\x3c/div\x3e\n\x3c/div\x3e\n\n",
"url:davinci/ve/widgets/templates/WidgetToolBar.html":'\x3cdiv class\x3d"propertiesTitleBar ui-widget-content" style\x3d"display: none"\x3e\n\t\x3cdiv class\x3d\'propertiesWidgetDescription\'\x3e\n\t\t\x3cspan class\x3d\'propertiesWidgetDescriptionFor\'\x3e${veNLS.toolBarFor}\x3c/span\x3e\n\t\t\x3cspan data-dojo-attach-point\x3d"descNode"\x3e${veNLS.noSelection}\x3c/span\x3e\n\t\x3c/div\x3e\n\n\t\x3cdiv class\x3d"propertiesTitleBarPropertiesContainer ui-widget-content"\x3e\n\t\t\x3ctable width\x3d"100%" cellspacing\x3d"0" cellpadding\x3d"0" border\x3d"0" align\x3d"center" class\x3d"propertiesTitleBarProperties property_table_stretchable"\x3e\n\t\t\t\x3ccolgroup\x3e\x3ccol style\x3d"width:10px;"\x3e\x3ccol class\x3d"gap02"\x3e\x3ccol class\x3d"gap03"\x3e\x3ccol style\x3d"width:10px;"\x3e\x3ccol style\x3d"width:6px;"\x3e\x3c/colgroup\x3e\n\t\t\t\x3ctbody\x3e\n\t\t\t\t\x3c!--tr class\x3d"cssPropertySection"\x3e\n\t\t\t\t\t\x3ctd\x3e\x3c/td\x3e\n\t\t\t\t\t\x3ctd class\x3d"propertyDisplayName"\x3e${veNLS.toolBarClass}\x26nbsp;\x3c/td\x3e\n\t\t\t\t\t\x3ctd class\x3d"propertyInputField"\x3e\n\t\t\t\t\t  \x3cinput data-dojo-type\x3d"dijit.form.ComboBox" data-dojo-attach-point\x3d"classComboBox" label\x3d"" data-dojo-attach-event\x3d"onChange:_onChangeClassAttribute,onFocus:_onFieldFocus,onBlur:_onFieldBlur" style\x3d"width: 100%" searchAttr\x3d"name"/\x3e\n\t\t\t\t\t\x3c/td\x3e\n\t\t\t\t\t\x3ctd nowrap\x3d"true" class\x3d"propertyExtra"\x3e\x3c/td\x3e\n\t\t\t\t\t\x3ctd\x3e\x3c/td\x3e\n\t\t\t\t\x3c/tr--\x3e\n\t\n\t\t\t\t\x3ctr class\x3d"cssPropertySection"\x3e\n\t\t\t\t\t\x3ctd\x3e\x3c/td\x3e\n\t\t\t\t\t\x3ctd class\x3d"propertyDisplayName"\x3e${veNLS.toolBarId}\x26nbsp;\x3c/td\x3e\n\t\t\t\t\t\x3ctd class\x3d"propertyInputField"\x3e\n\t\t\t\t\t  \x3cinput data-dojo-type\x3d"dijit.form.ValidationTextBox" data-dojo-attach-point\x3d"idTextBox" label\x3d"" data-dojo-attach-event\x3d"onChange:_onChangeIDAttribute,onKeyPress:_onKeyPress,onFocus:_onFieldFocus,onBlur:_onFieldBlur" style\x3d"width: 100%"/\x3e\n\t\t\t\t\t\x3c/td\x3e\n\t\t\t\t\t\x3ctd nowrap\x3d"true" class\x3d"propertyExtra"\x3e\x3c/td\x3e\n\t\t\t\t\t\x3ctd\x3e\x3c/td\x3e\n\t\t\t\t\x3c/tr\x3e\n\n\t\t\t\t\x3ctr class\x3d"cssPropertySection"\x3e\n                    \x3ctd\x3e\x3c/td\x3e\n                    \x3ctd class\x3d"propertyDisplayName"\x3eClass\x3c/td\x3e\n                    \x3ctd class\x3d"propertyInputField"\x3e\n                        \x3cinput data-dojo-attach-point\x3d"cssClasses" type\x3d"text" class\x3d"" value\x3d"" style\x3d"width: 100%"\x3e\n                    \x3c/td\x3e\n                    \x3ctd nowrap\x3d"true" class\x3d"propertyExtra"\x3e\x3c/td\x3e\n                    \x3ctd\x3e\x3c/td\x3e\n                \x3c/tr\x3e\n\n                \x3c!--tr class\x3d"cssPropertySection"\x3e\n                    \x3ctd\x3e\x3c/td\x3e\n                    \x3ctd class\x3d"propertyDisplayName"\x3eBlock Group\x26nbsp;\x3c/td\x3e\n                    \x3ctd class\x3d"propertyInputField"\x3e\n                        \x3cinput data-dojo-type\x3d"dijit.form.ComboBox" data-dojo-attach-point\x3d"blockGroupComboBox" label\x3d"" data-dojo-attach-event\x3d"onChange:_onChangeBlockGroupAttribute,onFocus:_onFieldFocus,onBlur:_onFieldBlur" style\x3d"width: 100%" searchAttr\x3d"name"/\x3e\n                    \x3c/td\x3e\n                    \x3ctd nowrap\x3d"true" class\x3d"propertyExtra"\x3e\x3c/td\x3e\n                    \x3ctd\x3e\x3c/td\x3e\n                \x3c/tr--\x3e\n\n\n\t\t\t\x3c/tbody\x3e\n\t\t\x3c/table\x3e\n\t\x3c/div\x3e\n\x3c/div\x3e\n',
"url:davinci/ui/widgets/templates/ThemeSetSelection.html":'\x3cdiv\x3e\n  \x3cdiv class\x3d"dijitDialogPaneContentArea"\x3e\n\t\t\x3ctable style\x3d"width: 100%; padding-left:10px; padding-right:10px;"\x3e\n\t\t\t\x3ctr\x3e\n\t\t\t\t\x3ctd style\x3d"" NOWRAP\x3e${uiNLS.themeSet}\x3c/td\x3e\n\t\t\t\t\x3ctd style\x3d"width: 100%; text-align: center;"\x3e\x3cselect dojoType\x3d"dijit.form.Select" id\x3d"theme_select_themeset_theme_select" type\x3d"text" style\x3d"width: 175px;" \x3e\x3c/select\x3e\x3c/td\x3e\n\t\t\t\x3c/tr\x3e\n\t\t\x3c/table\x3e\n\t\n\t\t\x3cdiv style\x3d"border-top: 1px solid black; top: 231px; border-top-color: #ccc; left: 429px; width: 300px; height: 11px; margin-top: 6px; padding-left:10px;"\x3e\x3c/div\x3e\n\t\t\x3ctable style\x3d"padding-left: 15px; width: 100%;"\x3e\n\t\t\t\x3ctr\x3e\x3ctd style\x3d"width: 139px;"\x3e${uiNLS.desktopTheme}\x3c/td\x3e\x3ctd\x3e\x3cselect dojoType\x3d"dijit.form.Select" id\x3d"theme_select_desktop_theme_select"type\x3d"text"  style\x3d"width: 175px;"  \x3e\x3c/select\x3e\x3c/td\x3e\x3c/tr\x3e\n\t\t\t\x3ctr\x3e\x3ctd\x3e${uiNLS.mobileTheme}\x3c/td\x3e\x3ctd\x3e\x3cselect dojoType\x3d"dijit.form.Select" id\x3d"theme_select_mobile_theme_select"type\x3d"text"  style\x3d"width: 175px;" \x3e\x3c/select\x3e\x3c/td\x3e\x3c/tr\x3e\n\t\t\x3c/table\x3e\n\t\t\x3ctable id\x3d"theme_select_devices_table" style\x3d"padding-left:30px; border-collapse: separate; border-spacing: 0 0; width: 100%"\x3e\n\t\t\t\x3ctr\x3e\x3ctd style\x3d"width: 139px;"\x3e${uiNLS.android}\x3c/td\x3e\x3ctd\x3e\x3cselect dojoType\x3d"dijit.form.Select" id\x3d"theme_select_android_select" type\x3d"text"  style\x3d"width: 150px;"\x3e\x3c/select\x3e\x3c/td\x3e\x3c/tr\x3e\n\t\t\t\x3ctr\x3e\x3ctd\x3e${uiNLS.blackberry}\x3c/td\x3e\x3ctd\x3e\x3cselect dojoType\x3d"dijit.form.Select" id\x3d"theme_select_blackberry_select" type\x3d"text"  style\x3d"width: 150px;"\x3e\x3c/select\x3e\x3c/td\x3e\x3c/tr\x3e\n\t\t\t\x3ctr\x3e\x3ctd\x3e${uiNLS.ipad}\x3c/td\x3e\x3ctd\x3e\x3cselect dojoType\x3d"dijit.form.Select" id\x3d"theme_select_ipad_select" type\x3d"text"  style\x3d"width: 150px;"\x3e\x3c/select\x3e\x3c/td\x3e\x3c/tr\x3e\n\t\t\t\x3ctr\x3e\x3ctd\x3e${uiNLS.iphone}\x3c/td\x3e\x3ctd\x3e\x3cselect dojoType\x3d"dijit.form.Select" id\x3d"theme_select_iphone_select" type\x3d"text"  style\x3d"width: 150px;"\x3e\x3c/select\x3e\x3c/td\x3e\x3c/tr\x3e\n\t\t\t\x3ctr\x3e\x3ctd\x3e${uiNLS.other}\x3c/td\x3e\x3ctd\x3e\x3cselect dojoType\x3d"dijit.form.Select" id\x3d"theme_select_other_select" type\x3d"text"  style\x3d"width: 150px;"\x3e\x3c/select\x3e\x3c/td\x3e\x3c/tr\x3e\n\t\t\x3c/table\x3e\n\t\x3c/div\x3e\n\n\t\x3cdiv class\x3d"dijitDialogPaneActionBar"\x3e\n\t\t\x3cbutton dojoType\x3d"dijit.form.Button" id\x3d"theme_select_ok_button" label\x3d"${uiNLS.select}" class\x3d"maqPrimaryButton" type\x3d"submit"\x3e\x3c/button\x3e\n\t\t\x3cbutton dojoType\x3d"dijit.form.Button" id\x3d"theme_select_cancel_button" label\x3d"${commonNLS.buttonCancel}" class\x3d"maqSecondaryButton"\x3e\x3c/button\x3e\n\t\x3c/div\x3e\n\x3c/div\x3e\n',
"url:davinci/ve/newfile.template.html":'\x3c!DOCTYPE html\x3e\n\x3c!--\n\tTODO: margin:0 is a temporary hack. In previous releases, we always included dojo.css\n\twhich set margin:0, but we now only include dojo.css with the first Dojo widget\n\tadded to the page. That causes scrollbars when page was loaded initially,\n\twhich went want when first Dojo widget was added.\n\tNeed to rethink this whole business of width:100%;height:100%;margin:0\n--\x3e\n\x3chtml style\x3d"height: 100%; width: 100%; margin: 0;"\x3e\n\t\x3chead\x3e\n\t\t\x3cbase href\x3d"{baseUrl}"/\x3e\n\t\t\x3cmeta charset\x3d"utf-8"/\x3e\n\t\t\x3cscript src\x3d"{dojoUrl}" data-dojo-config\x3d"{dojoConfig}" {additionalDojoAttrs}\x3e\x3c/script\x3e\n\t\t\x3cscript\x3e\n\t\t\t// base dependencies needed for VE\n\t\t\trequire([\n\t\t\t\t\'dojo/parser\',\n\t\t\t\t\'dojox/html/_base\',\n\t\t\t\t\'dojo/domReady!\'\n\t\t\t\t{additionalModules}\n\t\t\t], top.loading{id});\n\t\t\x3c/script\x3e\n\t\t{themeHeadImports}\n\t\t{themeCssFiles}\n\t\x3c/head\x3e\n\t\x3cbody\x3e\n\t\x3c/body\x3e\n\x3c/html\x3e\n',
"url:davinci/ui/templates/download.html":'\x3cdiv class\x3d\'downloadDialog\'\x3e\t \n\t\x3cdiv class\x3d"dijitDialogPaneContentArea"\x3e\n\t\t\x3cdiv style\x3d"margin-bottom: 20px"\x3e\n\t\t  ${fileName}: \x3cinput data-dojo-type\x3d\'dijit/form/ValidationTextBox\' type\x3d"text" maxLength\x3d\'${_fileNameMaxLength}\' data-dojo-attach-point\x3d"__fileName" value\x3d\'${_projectName}.zip\' data-dojo-props\x3d"regExp:\'${_fileNameValidationRegExp}\', required:true, invalidMessage:\'${invalidDownloadFileName}\'"\x3e\x3c/input\x3e\n\t\t\x3c/div\x3e\n\t\t\n\t\t\x3cdiv data-dojo-attach-point\x3d"_selectionDiv"\x3e\x3c/div\x3e\n\t\t\x3cdiv data-dojo-attach-point\x3d"_tableDiv"\x3e\x3c/div\x3e\n\n\t\t\x3cdiv style\x3d"margin-top: 8px"\x3e\n\t\t  Select: \x3ca href\x3d"javascript:;" data-dojo-attach-event\x3d"onclick: _selectAll"\x3e${selectAll}\x3c/a\x3e / \x3ca href\x3d"javascript:;" data-dojo-attach-event\x3d"onclick: _selectNone"\x3e${selectNone}\x3c/a\x3e\n\t\t\x3c/div\x3e\n\n\t\t\x3cdiv style\x3d"margin-top: 20px"\x3e\n\t\t\t\x3cinput data-dojo-type\x3d\'dijit/form/CheckBox\' type\x3d"text" data-dojo-attach-point\x3d"__fullSource" data-dojo-props\x3d""\x3e\x3c/input\x3e\x3cspan style\x3d\'padding-left: 3px;\'\x3e${downloadFullSource}\x3c/span\x3e\n\t\t\t\x3cbr\x3e\n\t\t\t\x3cinput data-dojo-type\x3d\'dijit/form/CheckBox\' type\x3d"text" data-dojo-attach-point\x3d"__optimize" data-dojo-props\x3d""\x3e\x3c/input\x3e\x3cspan style\x3d\'padding-left: 3px;\'\x3e${optimizeOption}\x3c/span\x3e\n\t\t\x3c/div\x3e\n  \x3c/div\x3e\n\t\x3cdiv class\x3d"dijitDialogPaneActionBar"\x3e\n\t\t\x3cbutton data-dojo-type\x3d\'dijit/form/Button\' data-dojo-attach-point\x3d"_okButton" data-dojo-attach-event\x3d\'onClick:okButton\' label\x3d\'${downloadButtonLabel}\' class\x3d"maqPrimaryButton" type\x3d"submit"\x3e\x3c/button\x3e\n\t\t\x3cbutton data-dojo-type\x3d\'dijit/form/Button\' data-dojo-attach-event\x3d\'onClick:cancelButton\' label\x3d\'${buttonCancel}\' class\x3d"maqSecondaryButton"\x3e\x3c/button\x3e\n\t\x3c/div\x3e\n\x3c/div\x3e',
"url:davinci/ui/templates/downloadSelected.html":"\x3cdiv class\x3d'downloadDialog'\x3e\t \n\t\x3cdiv class\x3d\"dijitDialogPaneContentArea\"\x3e\n\t\t\x3cdiv style\x3d\"margin-bottom: 20px\"\x3e\n\t\t  ${fileName}: \x3cinput data-dojo-type\x3d'dijit/form/ValidationTextBox' type\x3d\"text\" maxLength\x3d'${_fileNameMaxLength}' data-dojo-attach-point\x3d\"__fileName\" value\x3d'${_projectName}.zip' data-dojo-props\x3d\"regExp:'${_fileNameValidationRegExp}', required:true, invalidMessage:'${invalidDownloadFileName}'\"\x3e\x3c/input\x3e\n\t\t\x3c/div\x3e\n\t\t\n\t\t\x3cdiv data-dojo-attach-point\x3d\"_selectionDiv\"\x3e\x3c/div\x3e\n\n  \x3c/div\x3e\n\t\x3cdiv class\x3d\"dijitDialogPaneActionBar\"\x3e\n\t\t\x3cbutton data-dojo-type\x3d'dijit/form/Button' data-dojo-attach-point\x3d\"_okButton\" data-dojo-attach-event\x3d'onClick:okButton' label\x3d'${downloadButtonLabel}' class\x3d\"maqPrimaryButton\" type\x3d\"submit\"\x3e\x3c/button\x3e\n\t\t\x3cbutton data-dojo-type\x3d'dijit/form/Button' data-dojo-attach-event\x3d'onClick:cancelButton' label\x3d'${buttonCancel}' class\x3d\"maqSecondaryButton\"\x3e\x3c/button\x3e\n\t\x3c/div\x3e\n\x3c/div\x3e",
"url:davinci/ui/templates/SaveAsWidgetForm.html":'\x3cdiv class\x3d\'dvSaveAsWidgetForm\'\x3e\n\t\x3cdiv class\x3d"dijitDialogPaneContentArea"\x3e\n\t\t\x3cp class\x3d"dvSawfDesc"\x3e${descriptionString}\x3c/p\x3e\n\t\t\x3cp\x3e\n\t\t\t\x3cspan class\x3d"dvSawfLabel"\x3e${nameString}:\x3c/span\x3e\n\t\t\t\x3cinput dojoType\x3d\'dijit.form.ValidationTextBox\' dojoAttachPoint\x3d"nameInputNode" trim\x3d"true"\n\t\t\t\t\tpromptMessage\x3d"${namePromptString}"\x3e\x3c/input\x3e\n\t\t\x3c/p\x3e\n\t\t\x3cp\x3e\n\t\t\t\x3cspan class\x3d"dvSawfLabel"\x3e\x3cspan class\x3d"dvRequired"\x3e*\x3c/span\x3e${idString}:\x3c/span\x3e\n\t\t\t\x3cinput dojoType\x3d\'dijit.form.ValidationTextBox\' dojoAttachPoint\x3d"idInputNode" trim\x3d"true"\n\t\t\t\t\trequired\x3d"true" intermediateChanges\x3d"true" promptMessage\x3d"${idPromptString}"\x3e\x3c/input\x3e\n\t\t\x3c/p\x3e\n\t\t\x3cp\x3e\n\t\t\t\x3cspan class\x3d"dvSawfLabel"\x3e${versionString}:\x3c/span\x3e\n\t\t\t\x3cinput dojoType\x3d\'dijit.form.ValidationTextBox\' dojoAttachPoint\x3d"versionInputNode"\n\t\t\t\t\ttrim\x3d"true"\x3e\x3c/input\x3e\n\t\t\x3c/p\x3e\n\t\t\x3ch4 class\x3d"dvRequired"\x3e*${requiredString}\x3c/h4\x3e\n\t\n\t\t\x3cdiv dojoType\x3d"dijit.TitlePane" title\x3d"${metadataTitle}" open\x3d"false"\x3e\n\t\t\t\x3ctextarea dojoType\x3d"dijit.form.SimpleTextarea" dojoAttachPoint\x3d"textareaNode" name\x3d"metadata"\n\t\t\t\t\trows\x3d"15" cols\x3d"50" intermediateChanges\x3d"true"\x3e${initialTextareaContent}\x3c/textarea\x3e\n\t\t\x3c/div\x3e\n\t\x3c/div\x3e\n  \x3cdiv class\x3d"dijitDialogPaneActionBar"\x3e\n    \x3cbutton dojoType\x3d"dijit.form.Button" dojoAttachPoint\x3d"buttonSave" class\x3d"maqPrimaryButton" type\x3d"submit" disabled\x3d"true"\x3e${saveString}\x3c/button\x3e\n    \x3cbutton dojoType\x3d"dijit.form.Button" dojoAttachPoint\x3d"buttonCancel" type\x3d"button" class\x3d"maqSecondaryButton"\x3e${cancelString}\x3c/button\x3e\n  \x3c/div\x3e\n\x3c/div\x3e\n',
"url:davinci/ve/actions/templates/EnableApplicationStates.html":"\x3cdiv\x3e\n\t\x3cdiv class\x3d\"dijitDialogPaneContentArea\"\x3e\n\t\t\x3cdiv class\x3d'EnableAsStateContainerWidgetDiv'\x3e\n\t\t\t${veNls.EnableApplicationStatesCurrentWidget}:\n\t\t\t\x3cspan class\x3d'EnableAsStateContainerWidgetLabel' dojoAttachPoint\x3d'widgetLabel'\x3e\x3c/span\x3e\n\t\t\x3c/div\x3e\n\t\t\x3cdiv class\x3d'EnableAsStateContainerStatesDiv' dojoAttachPoint\x3d'statesListDiv'\x3e\n\t\t\t//Filled in by JavaScript logic\n\t\t\x3c/div\x3e\n\t\t\x3cdiv class\x3d'EnableAsStateContainerDescriptionDiv' dojoAttachPoint\x3d'description'\x3e\n\t\t\t//Filled in by JavaScript logic\n\t\t\x3c/div\x3e\n\t\t\x3cdiv class\x3d'EnableAsStateContainerCheckBoxDiv'\x3e\n\t\t\t\x3cinput dojoAttachPoint\x3d\"checkBoxWidget\" dojoType\x3d\"dijit.form.CheckBox\" dojoAttachEvent\x3d\"onKeyUp:_onKeyPress\" type\x3d\"text\"\x3e\x3c/input\x3e\n\t\t\t${veNls.EnableAsStateContainerWidgetLabel}\n\t\t\x3c/div\x3e\n\t\x3c/div\x3e\n\t\t\t\t\n\t\x3cdiv class\x3d\"dijitDialogPaneActionBar\"\x3e\n\t\t\x3cbutton dojoType\x3d'dijit.form.Button' dojoAttachPoint\x3d'okButton' label\x3d'${commonNls.buttonOk}' class\x3d\"maqPrimaryButton\"\x3e\x3c/button\x3e\n\t\t\x3cbutton dojoType\x3d'dijit.form.Button' dojoAttachPoint\x3d'cancelButton' label\x3d'${commonNls.buttonCancel}' class\x3d\"maqSecondaryButton\"\x3e\x3c/button\x3e\n\t\x3c/div\x3e\n\x3c/div\x3e\n",
"url:davinci/ve/actions/templates/AddState.html":'\x3cdiv\x3e\n\t\x3cdiv class\x3d"dijitDialogPaneContentArea"\x3e\n\t\t\x3cdiv class\x3d\'addStateNameDiv\'\x3e\n\t\t\t\x3clabel\x3e${veNls.stateLabel}:\x3c/label\x3e\x3cinput dojoAttachPoint\x3d"input" dojoType\x3d"dijit.form.TextBox" dojoAttachEvent\x3d"onKeyUp:_onKeyPress" type\x3d"text"\x3e\x3c/input\x3e\n\t\t\x3c/div\x3e\n\t\x3c/div\x3e\n\t\x3cdiv class\x3d"dijitDialogPaneActionBar"\x3e\n\t\t\x3cbutton dojoType\x3d\'dijit.form.Button\' dojoAttachPoint\x3d"okButton" dojoAttachEvent\x3d\'onClick:onOk\' label\x3d\'${veNls.createLabel}\' class\x3d"maqPrimaryButton" type\x3d"submit"\x3e\x3c/button\x3e\n\t\t\x3cbutton dojoType\x3d\'dijit.form.Button\' dojoAttachEvent\x3d\'onClick:onCancel\' label\x3d\'${commonNls.buttonCancel}\' class\x3d"maqSecondaryButton"\x3e\x3c/button\x3e\n\t\x3c/div\x3e\n\x3c/div\x3e\n',
"url:davinci/ve/actions/templates/ModifyState.html":'\x3cdiv\x3e\n\t\x3cdiv class\x3d"dijitDialogPaneContentArea"\x3e\n\t\t\x3cdiv class\x3d\'modify_state_container\'\x3e\n\t\t\t\x3cdiv data-dojo-type\x3d"dijit.form.DropDownButton" label\x3d\'${veNls.renameLabel}\' dojoAttachPoint\x3d"renameButton" class\x3d"modify_state_rename_button"\x3e\n\t\t\t\t\t\x3cdiv data-dojo-type\x3d"dijit.TooltipDialog" class\x3d\'modify_state_rename_container\' id\x3d\'state_rename_tooltip_dialog\'\x3e\n\t\t\t\t\t\t\x3cdiv\x3e\n\t\t\t\t\t\t\t\x3clabel for\x3d"state_rename_new_name"\x3e${veNls.newStateLabel}\x3c/label\x3e\n\t\t\t\t\t\t\t\x3cinput data-dojo-type\x3d"dijit.form.ValidationTextBox" id\x3d"state_rename_new_name" name\x3d"state_rename_new_name"\x3e\x3c/input\x3e\n\t\t\t\t\t\t\x3c/div\x3e\n\t\t\t\t\t\t\x3cdiv\x3e\n\t\t\t\t\t\t\t\x3cbutton id\x3d"state_rename_do_it" dojoType\x3d\'dijit.form.Button\' label\x3d\'${veNls.renameLabel}\'\x3e\x3c/button\x3e\n\t\t\t\t\t\t\t\x3cbutton id\x3d"state_rename_cancel" dojoType\x3d\'dijit.form.Button\' label\x3d\'${veNls.cancelLabel}\'\x3e\x3c/button\x3e\n\t\t\t\t\t\t\x3c/div\x3e\n\t\t\t\t\t\x3c/div\x3e\n\t\t\t\t\x3c/div\x3e\n\t\t\t${veNls.stateLabel}: \x3cspan id\x3d\'modify_state_old_name\'\x3eaaa\x3c/span\x3e\n\t\t\x3c/div\x3e\n\t\t\x3cdiv class\x3d\'initial_state_row\'\x3e\n\t\t\t\x3cinput data-dojo-type\x3d"dijit.form.CheckBox" dojoAttachPoint\x3d"initialState" id\x3d"modify_state_initial_state" name\x3d"modify_state_initial_state"\x3e\x3c/input\x3e\n\t\t\t\x3clabel for\x3d\'modify_state_initial_state\'\x3e${veNls.initialStateCheckBoxLabel}\x3c/label\x3e\n\t\t\x3c/div\x3e\n\t\x3c/div\x3e\n\t\t\t\t\n\t\x3cdiv class\x3d"dijitDialogPaneActionBar"\x3e\n\t\t\x3cbutton dojoType\x3d\'dijit.form.Button\' dojoAttachPoint\x3d"okButton" label\x3d\'${veNls.modifyLabel}\' class\x3d"maqPrimaryButton"\x3e\x3c/button\x3e\n\t\t\x3cbutton dojoType\x3d\'dijit.form.Button\' dojoAttachPoint\x3d"cancelButton" label\x3d\'${commonNls.buttonCancel}\' class\x3d"maqSecondaryButton"\x3e\x3c/button\x3e\n\t\x3c/div\x3e\n\x3c/div\x3e\n',
"url:davinci/ve/actions/templates/ManageStates.html":"\x3cdiv\x3e\n\t\x3cdiv class\x3d\"dijitDialogPaneContentArea\"\x3e\n\t\t\x3cdiv class\x3d\"addStateDialogOptions\"\x3e\n\t\t\t\x3cdiv class\x3d'manageStatesStatesListDiv'\x3e\n\t\t\t\t\x3c!-- Filled in by JavaScript --\x3e\n\t\t\t\x3c/div\x3e\n\t\t\t\x3cdiv class\x3d'manageStatesCheckAcceleratorsDiv'\x3e\n\t\t\t\t${veNls.manageStatesCheckLabel}\n\t\t\t\t\x3ca href\x3d'' class\x3d'manageStatesCheckCurrentStateOnly'\x3e${veNls.manageStatesCheckCurrentStateOnly}\x3c/a\x3e\n\t\t\t\t/\n\t\t\t\t\x3ca href\x3d'' class\x3d'manageStatesCheckAll'\x3e${veNls.manageStatesCheckAll}\x3c/a\x3e\n\t\t\t\t/\n\t\t\t\t\x3ca href\x3d'' class\x3d'manageStatesUncheckAll'\x3e${veNls.manageStatesUncheckAll}\x3c/a\x3e\n\t\t\t\t/\n\t\t\t\t\x3ca href\x3d'' class\x3d'manageStatesCheckBackgroundOnly'\x3e${veNls.manageStatesCheckBackgroundOnly}\x3c/a\x3e\n\t\t\t\x3c/div\x3e\n\t\t\t\n\t\t\x3c/div\x3e\t\n\t\x3c/div\x3e\n\t\x3cdiv class\x3d\"dijitDialogPaneActionBar\"\x3e\n\t\t\x3cbutton dojoType\x3d'dijit.form.Button' dojoAttachPoint\x3d\"okButton\" dojoAttachEvent\x3d'onClick:onOk' label\x3d'${veNls.createLabel}' class\x3d\"maqPrimaryButton\" type\x3d\"submit\"\x3e\x3c/button\x3e\n\t\t\x3cbutton dojoType\x3d'dijit.form.Button' dojoAttachEvent\x3d'onClick:onCancel' label\x3d'${commonNls.buttonCancel}' class\x3d\"maqSecondaryButton\"\x3e\x3c/button\x3e\n\t\x3c/div\x3e\n\x3c/div\x3e\n",
"url:davinci/ve/template.html":'\n\x3c!DOCTYPE html\x3e\n\x3chtml\x3e\n\x3chead\x3e\n\x3cmeta charset\x3d"utf-8" /\x3e\n\x3cmeta http-equiv\x3d"X-UA-Compatible" content\x3d"IE\x3dedge" /\x3e\n\x3ctitle\x3eUntitled\x3c/title\x3e\n\x3c/head\x3e\n\x3cbody\x3e\n\x3c/body\x3e\n\x3c/html\x3e\n',"url:davinci/ve/prefs/HtmlEditPreferences.html":"\x3cdiv\x3e\n\t\x3ctable style\x3d'margin: 4px;' cellspacing\x3d'4'\x3e\n\t\t\x3ctbody\x3e\n\t\t\t\x3c!--\n\t\t\t\x3ctr\x3e\n\t\t\t\t\x3ctd\x3e${_loc.flowLayout}:\x3c/td\x3e\n\t\t\t\t\x3ctd\x3e\n\t\t\t\t\t\x3cdiv dojoAttachPoint\x3d'flowBoxNode'\x3e\x3c/div\x3e\n\t\t\t\t\x3c/td\x3e\n\t\t\t\x3c/tr\x3e\n\t\t\t--\x3e\n\t\t\t\x3ctr\x3e\n\t\t\t\t\x3ctd\x3e${_loc.snapToNearestWidget}:\x3c/td\x3e\n\t\t\t\t\x3ctd\x3e\n\t\t\t\t\t\x3cdiv dojoAttachPoint\x3d'snapNode'\x3e\x3c/div\x3e\n\t\t\t\t\x3c/td\x3e\n\t\t\t\x3c/tr\x3e\n\t\t\t\x3ctr\x3e\n\t\t\t\t\x3ctd\x3e${_loc.showPossibleParents}:\x3c/td\x3e\n\t\t\t\t\x3ctd\x3e\n\t\t\t\t\t\x3cdiv dojoAttachPoint\x3d'showPossibleParentsNode'\x3e\x3c/div\x3e\n\t\t\t\t\x3c/td\x3e\n\t\t\t\x3c/tr\x3e\n\t\t\t\x3ctr\x3e\n\t\t\t\t\x3ctd\x3e${_loc.warnOnCSSOverride}:\x3c/td\x3e\n\t\t\t\t\x3ctd\x3e\n\t\t\t\t\t\x3cdiv dojoAttachPoint\x3d'cssOverrideWarn'\x3e\x3c/div\x3e\n\t\t\t\t\x3c/td\x3e\n\t\t\t\x3c/tr\x3e\n\t\t\t\x3ctr\x3e\n\t\t\t\t\x3ctd\x3e${_loc.absoluteWidgetsZindex}:\x3c/td\x3e\n\t\t\t\t\x3ctd\x3e\n\t\t\t\t\t\x3cdiv dojoAttachPoint\x3d'absoluteWidgetsZindex'\x3e\x3c/div\x3e\n\t\t\t\t\x3c/td\x3e\n\t\t\t\x3c/tr\x3e\n\t\t\t\x3c!-- FIXME: Disabled for now. Ultimately, UI for this option should go to widget palette\n\t\t\t\x3ctr\x3e\n\t\t\t\t\x3ctd\x3e${_loc.widgetPaletteLayout}:\x3c/td\x3e\n\t\t\t\t\x3ctd\x3e\n\t\t\t\t\t\x3cdiv dojoAttachPoint\x3d'widgetPaletteLayout'\x3e\x3c/div\x3e\n\t\t\t\t\x3c/td\x3e\n\t\t\t\x3c/tr\x3e\n\t\t\t--\x3e\n\t\t\t\x3ctr\x3e\n\t\t\t\t\x3ctd\x3e${_loc.zazl}:\x3c/td\x3e\n\t\t\t\t\x3ctd\x3e\n\t\t\t\t\t\x3cdiv dojoAttachPoint\x3d'zazl'\x3e\x3c/div\x3e\n\t\t\t\t\x3c/td\x3e\n\t\t\t\x3c/tr\x3e\n\t\t\x3c/tbody\x3e\n\t\x3c/table\x3e\n\x3c/div\x3e"}});
define("davinci/davinci",[],function(){});
//# sourceMappingURL=davinci.js.map