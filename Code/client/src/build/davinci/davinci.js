//>>built
require({cache:{"davinci/main":function(){define("dojo/_base/kernel dojo/_base/declare davinci/davinci davinci/ve/metadata davinci/Runtime davinci/Workbench davinci/ve/metadata davinci/ui/widgets/OutlineTree".split(" "),function(p){return p.davinci})},"davinci/ve/metadata":function(){define("require dojo/Deferred dojo/promise/all dojo/_base/lang dojo/_base/connect ../library ../model/Path ../repositoryinfo xide/types xide/utils".split(" "),function(p,k,f,e,b,d,n,a,m,h){function g(c,h){c=c||{};for(var a=
1,b=arguments.length;a<b;a++){var m=arguments[a],q,d;for(q in m)m.hasOwnProperty(q)&&(d=m[q],q in c&&("object"===typeof d||c[q]===d)?g(c[q],d):c[q]=d)}return c}function c(c,b,m){F[c.name]=c;b=new n(b);var d=c.overlays,u;for(u in d)d.hasOwnProperty(u)&&("oam"!==u&&"maqetta"!==u||g(c,d[u]));delete c.overlays;c.__metadataModuleId="maq-metadata-"+c.name;u=new n(location.href);u.path=u.path.substring(0,u.path.lastIndexOf("/"));u.path=h.removeURLParameter(u.path,"theme");u.path=""+m;d=[{name:c.__metadataModuleId,
location:m+b}];d[0].location=d[0].location.replace("index.php","");d[0].location=d[0].location.replace("?debug\x3dtrue","");d[0].location=d[0].location.replace("\x26isDesktop\x3dtrue","");d[0].location=d[0].location.replace("maqetta.html","");d[0].location=d[0].location.replace("maqettar.html","");d[0].location=d[0].location.replace("index.html","");d[0].location=d[0].location.replace("xui.php","");d[0].location=d[0].location.replace("xui.php?debug\x3dtrue","");"dojo"!==c.name&&"xide"!==c.name&&"xblox"!==
c.name&&(c.__libraryModuleId=c.name,u={name:c.__libraryModuleId,location:u.append("app/static/lib/"+c.name+"/"+c.version).toString()},"xide"!==c.__libraryModuleId&&d.push(u));var A;if(e.exists("scripts.widget_metadata",c))if("string"===typeof c.scripts.widget_metadata){var B=b.append(c.scripts.widget_metadata);A=dojo.xhrGet({url:m+B.toString()+(0<a.revision.length?"?"+a.revision:""),handleAs:"json"}).then(function(g){if(g){var h=B.getParentPath();return q(c.name,g,h,h,m)}})}else A=q(c.name,c.scripts.widget_metadata,
b,m);if(e.exists("scripts.callbacks",c)){var x=new k;p([c.scripts.callbacks],function(g){c.$callbacks=g;x.resolve()});N.push(x)}return A}function q(c,g,h,a){function b(c,g,h){"undefined"==typeof c.$providedTags[g]&&(c.$providedTags[g]=[]);c.$providedTags[g].push(h)}c||console.error("parseLibraryDescriptor: missing 'libName' arg");var m=F[c];g.$descriptorFolderPath=h.toString();g.$moduleFolderPath=a.toString();if(m)if(m.$widgets){g.widgets.forEach(function(c){m.$wm.widgets.push(c)});for(var q in g.categories)m.$wm.categories.hasOwnProperty(q)||
(m.$wm.categories[q]=g.categories[q])}else if(m.$wm)for(a=0;a<g.widgets.length;a++){q=!1;for(var d=0;!q&&d<m.$wm.widgets.length;d++)m.$wm.widgets[d].type==g.widgets[a].type&&(q=!0);q||m.$wm.widgets.push(g.widgets[a])}else m.$wm||(m.$wm=g);else F[c]={$wm:g,name:g.name,version:g.version},g.__metadataModuleId&&(F[c].__metadataModuleId=g.__metadataModuleId),m=F[c];var n=m.$wm;n.$providedTypes=n.$providedTypes||{};n.$providedTags=n.$providedTags||{};n.widgets.forEach(function(c){n.$providedTypes[c.type]=
c;if("string"==typeof c.tags)b(n,c.tags,c);else if(c.tags&&c.tags.length)for(var g=0;g<c.tags.length;g++)b(n,c.tags[g],c);c.icon&&!c.iconLocal&&(c.icon=h.append(c.icon).toString());c.iconLarge&&!c.iconLargeLocal&&(c.iconLarge=h.append(c.iconLarge).toString());c.widgetClass=n.categories[c.category].widgetClass});dojo.mixin(n,{_maqGetString:x});if(n.extend)for(var u in n.extend)n.extend.hasOwnProperty(u)&&(F[u]&&F[u].$wm?A(F[u].$wm,[n.extend[u]]):(g=J[u]||[],g.push(n.extend[u]),J[u]=g));J[c]&&A(n,J[c]);
return m}function A(c,g){var h=c.$providedTypes;g.forEach(function(c){for(var g in c)if(c.hasOwnProperty(g)){var a=c[g],b=h[g];a.mixin&&e.mixin(b,a.mixin);if(a.concat)for(var m in a.concat)if(a.concat.hasOwnProperty(m)){var q=a.concat[m];if(b[m]){var d=b,n=m;var u=b[m];"string"===typeof u?q=u+","+q:u instanceof Array?q=u.concat(q):(console.error('Unhandled type for "concat()"'),q=void 0);d[n]=q}else b[m]=q}}})}function u(c){if(c)for(var g in F)if(F.hasOwnProperty(g)){var h=F[g];if(h.$wm&&h.$wm.$providedTypes[c])return h}return null}
function x(c){I||(I=!0);return null}function z(c){if(c){if(D.hasOwnProperty(c))return D[c];var h=u(c),a;h&&(a=h.$wm.$descriptorFolderPath);if(!a)return null;var h=h.$wm,b=null,q=E.getResourceManager().getVariable(m.RESOURCE_VARIABLES.APP_URL);h.localPath?(a=c.replace(/\./g,"/").split("/"),a.shift(),a=a.join("/"),a=[h.$moduleFolderPath,"/",a,"_oam.json"].join(""),q=system.resource.findResource(a).getContentSync(),b=dojo.fromJson(q)):(a=[a,"/",c.replace(/\./g,"/"),"_oam.json"].join(""),a=q+"/lib/xideve/metadata/"+
a,dojo.xhrGet({url:a,handleAs:"json",sync:!0}).then(function(c){b=c}));if(!b)return console.error("ERROR: Could not load metadata for type: "+c),null;b.$ownproperty=dojo.mixin({},b.property);b.property=dojo.mixin({},K,b.property);b.$src=a;D[c]=b;g(b,h.$providedTypes[c].metadata);return b}}function B(c,g){if(!g)return c;dojo.every(g.split("."),function(g){if(void 0===c[g])return c=void 0,!1;c=c[g];return!0});return c}function w(c,g){(g=y.queryDescriptor(g,"allowed"+c))||(g="Parent"===c?"ANY":"NONE");
return g.split(/\s*,\s*/)}function r(c,g){g=y.queryDescriptor(c,g);if(!g)return null;c=u(c);return v(c,g)}function v(c,g){return c&&g?"string"===typeof g&&"./"===g.substr(0,2)?(new n(c.__metadataModuleId)).append(g).toString():g:null}var y,C,E,F={},D={},G={},N=[],J={},K={id:{datatype:"string",hidden:!0},lang:{datatype:"string",hidden:!0},dir:{datatype:"string",hidden:!0},"class":{datatype:"string",hidden:!0},style:{datatype:"string",hidden:!0},title:{datatype:"string",hidden:!0}};dojo.subscribe("/davinci/ui/libraryChanged/start",
function(){F={};D={};G={};y.init().then(function(){dojo.publish("/davinci/ui/libraryChanged")})});var I=!1;y={prefix:"",init:function(g,h){E=g;var b=[];C=p("../Workbench");g=E.getResourceManager().getVariable(m.RESOURCE_VARIABLES.APP_URL);h=h.replace(g,"");h=p.toUrl("xideve/metadata/");d.getUserLibs(C.getProject()).forEach(function(g){var m=g.metaRoot;(m=m.replace("app/metadata/",""))&&b.push(dojo.xhrGet({url:h+m+"/package.json?"+a.revision,handleAs:"json"}).then(function(g){return c(g,m,h)}))});
return f(b)},parseMetaData:function(c,g,h,a){return q(c,g,h,a)},getLibrary:function(c){return c?F[c]:F},getLibraryActions:function(c,g){var h=[],a;for(a in F)if(F.hasOwnProperty(a)){var b=F[a];if(b.$wm){var m=b.$wm["davinci.actionSets"];m&&dojo.forEach(m,function(a){a.id!=c||g&&a.targetID!==g||(a=dojo.clone(a.actions),dojo.forEach(a,function(c){if(c.action){var g=v(b,c.action);c.action=g}c.menu&&c.menu.forEach(function(c){if(c.action){var g=v(b,c.action);c.action=g}});h.push(c)}))})}}return h},loadThemeMeta:function(c){for(var g=
c.find({elementType:"HTMLElement",tag:"style"}),h=[],a,b=0;b<g.length;b++)for(var m=0;m<g[b].children.length;m++)"CSSImport"==g[b].children[m].elementType&&h.push(g[b].children[m]);new n(c.fileName);b=d.getThemes(C.getProject());g={};for(m=0;m<b.length;m++)if(b[m].files)for(var q=0;q<b[m].files.length;q++)g[b[m].files[q]]=b[m];for(m=0;m<h.length;m++){var b=h[m].url,u;for(u in g)if(-1<u.indexOf("claro")&&(a=u),-1<b.indexOf(u))return{themeUrl:b,themeMetaCache:d.getThemeMetadata(g[u]),theme:g[u]}}if(m=
y._loadThemeMetaDojoxMobile(c,g))return m;if(a){for(var A,m=0;m<h.length;m++)if((u=h[m].url.match(/\/([^\/]*)\.css$/))&&2==u.length&&(u=u[1],h[m].url.match(new RegExp("themes/"+u+"/"+u+".css$")))){A=u;break}if(A)return u=c.getDocumentElement(),c=u.getChildElement("head"),u=u.getChildElement("body"),(b=u.getAttribute("class"))&&u.setAttribute("class",b.replace(new RegExp("\\b"+A+"\\b","g"),"claro")),c=c.getChildElements("style"),dojo.forEach(c,function(c){dojo.forEach(c.children,function(c){"CSSImport"==
c.elementType&&(c.url=c.url.replace(new RegExp("/"+A,"g"),"/claro"))})}),b=h[m].url.replace(new RegExp("/"+A,"g"),"/claro"),h={themeUrl:b,themeMetaCache:d.getThemeMetadata(g[a]),theme:g[a]},h.themeMetaCache.usingSubstituteTheme={oldThemeName:A,newThemeName:"claro"},h}},_loadThemeMetaDojoxMobile:function(c,g){c=c.find({elementType:"HTMLElement",tag:"script"});for(var h=0;h<c.length;h++){var a=c[h].getElementText();if(a.length){var b=a.indexOf("dojoxMobile.themeMap");if(0<b){var b=a.indexOf("\x3d",
b),m=a.indexOf(";",b);if(m>b){var a=dojo.fromJson(a.substring(b+1,m))[0][2][0],q;for(q in g)if(-1<a.indexOf(q))return{themeUrl:a,themeMetaCache:d.getThemeMetadata(g[q]),theme:g[q]}}}}}},getLibraryForType:function(c){return u(c)},getLibraryMetadataForType:function(c){return(c=u(c))?c.$wm:null},getWidgetDescriptorForType:function(c){var g=u(c);c=g?g.$wm.$providedTypes[c]:void 0;return c},getOamDescriptivePropertyForType:function(c,g){return(c=z(c))&&c[g]?(g=c[g],"string"==typeof g?{type:"text/plain",
value:g}:"string"==typeof g.value?{type:g.type?g.type:"text/plain",value:g.value}:null):null},getWidgetsWithTag:function(c){var g=[];if(c)for(var h in F)if(F.hasOwnProperty(h)){var a=F[h];a.$wm&&a.$wm.$providedTags[c]&&(g=g.concat(a.$wm.$providedTags[c]))}return g},getLibraryBase:function(c){if(c=u(c))return c.$wm.$descriptorFolderPath},invokeCallback:function(c,g,h){var a=c;"string"===typeof c&&(a=u(type));if(a&&a.$callbacks&&(c=a.$callbacks[g]))return c.apply(a.$callbacks,h)},query:function(c,g){if(c){var h,
a;c.declaredClass?(c.metadata&&(a=c.metadata),h=c.type):h=c;if(!a){a=z(h);if(!a)return;c.declaredClass&&(c.metadata=a)}return B(a,g)}},queryDescriptorByName:function(c,g,a){g=u(g);var h;if(g){g=g.$wm.widgets;for(var b=0;b<g.length;b++)if(g[b].name==c){h=g[b];break}}return this._queryDescriptor(h,a)},queryDescriptor:function(c,g){var a=u(c),h;a&&(h=a.$wm.$providedTypes[c]);return this._queryDescriptor(h,g)},_queryDescriptor:function(c,g){if(c&&"object"===typeof c)return c=B(c,g),"resizable"===g&&(c||
(c="both")),c},getAllowedParent:function(c){return w("Parent",c)},getAllowedChild:function(c){return w("Child",c)},getCanSelect:function(c){return(c=y.queryDescriptor(c,"canSelect"))?c.split(/\s*,\s*/):[]},getHelper:function(c,g){var a=new k,h=c+":"+g;if(h in G)return a.resolve(G[h]),a;(c=r(c,g))?p([c],function(c){a.resolve(c);G[h]=c}):a.resolve();return a},getSmartInput:function(c){var g=new k;if(c in H)g.resolve(H[c]);else{var a=r(c,"inlineEdit");a?"string"===typeof a?p([a],function(a){g.resolve(H[c]=
new a)}):"[object Array]"===Object.prototype.toString.call(a.property)?p(["davinci/ve/input/MultiFieldSmartInput"],function(h){h=new h;e.mixin(h,a);g.resolve(H[c]=h)}):p(["davinci/ve/input/SmartInput"],function(h){h=new h;e.mixin(h,a);g.resolve(H[c]=h)}):g.resolve(null)}return g},getDeferreds:function(){return N}};var H={};b.subscribe("/davinci/ui/libraryChanged/start",function(){H={}});return dojo.setObject("davinci.ve.metadata",y)})},"davinci/library":function(){define("dojo/_base/xhr dojo/Deferred ./Runtime ./model/Path ./workbench/Preferences dojo/_base/kernel".split(" "),
function(p,k,f,e,b,d){var n=[{userLibs:[{id:"html",version:"0.8",metaRoot:"app/metadata/html/0.8",required:!0,hasSource:!1},{id:"requirejs",version:"0.8",metaRoot:"app/metadata/requirejs/",required:!0,hasSource:!1},{id:"delite",version:"0.8",metaRoot:"app/metadata/delite/0.8",required:!1,hasSource:!0},{id:"xblox",version:"1.0",metaRoot:"app/metadata/xblox/1.0",required:!1,hasSource:!1,root:"lib/xblox"}]}],a=[{specVersion:"1.0",files:["blackberry.css"],useBodyFontBackgroundClass:"useBodyFontBg",helper:"maq-metadata-dojo/dojox/mobile/ThemeHelper",
themeEditorHtmls:["../custom/dojo-theme-editor.html"],name:"blackberry",path:["project1/themes/blackberry/blackberry.theme"],base:"",className:"blackberry",type:"dojox.mobile",meta:["../custom/custom.json"],version:"1.8"},{specVersion:"1.0",files:["claro.css"],helper:"maq-metadata-dojo/dijit/ThemeHelper",themeEditorHtmls:["dojo-theme-editor.html"],name:"claro",path:["project1/themes/claro/claro.theme"],conditionalFiles:["document.css"],className:"claro",meta:["claro.json"],version:"1.8"},{specVersion:"1.0",
files:["ipad.css"],useBodyFontBackgroundClass:"useBodyFontBg",helper:"maq-metadata-dojo/dojox/mobile/ThemeHelper",themeEditorHtmls:["dojo-theme-editor.html"],name:"ipad",path:["project1/themes/ipad/ipad.theme"],base:"",className:"ipad",type:"dojox.mobile",meta:["ipad.json"],version:"1.8"},{specVersion:"1.0",files:["android.css"],useBodyFontBackgroundClass:"useBodyFontBg",helper:"maq-metadata-dojo/dojox/mobile/ThemeHelper",themeEditorHtmls:["../custom/dojo-theme-editor.html"],name:"android",path:["project1/themes/android/android.theme"],
base:"",className:"android",type:"dojox.mobile",meta:["../custom/custom.json"],version:"1.8"},{specVersion:"1.0",files:["custom.css"],useBodyFontBackgroundClass:"useBodyFontBg",helper:"maq-metadata-dojo/dojox/mobile/ThemeHelper",themeEditorHtmls:["dojo-theme-editor.html"],name:"custom",path:["project1/themes/custom/custom.theme"],base:"",className:"custom",type:"dojox.mobile",meta:["custom.json"],version:"1.8"},{specVersion:"1.0",files:["iphone.css"],useBodyFontBackgroundClass:"useBodyFontBg",helper:"maq-metadata-dojo/dojox/mobile/ThemeHelper",
themeEditorHtmls:["../custom/dojo-theme-editor.html"],name:"iphone",path:["project1/themes/iphone/iphone.theme"],base:"",className:"iphone",type:"dojox.mobile",meta:["../custom/custom.json"],version:"1.8"},{specVersion:"1.0",files:["sketch.css"],themeEditorHtmls:["../claro/dojo-theme-editor.html"],name:"Sketch",path:["project1/themes/sketch/sketch.theme"],className:"claro",meta:["../claro/claro.json"],version:"1.8"}],m={_customWidgets:{}},h={},g={},c={},q={};d.subscribe("/davinci/ui/libraryChanged/start",
this,function(){q={};c={}});d.subscribe("/davinci/resource/resourceChanged",this,function(c,g){var a=require("davinci/Workbench").getProject();if("deleted"==c||"renamed"==c){var m=b.getPreferences("davinci.ui.ProjectPrefs",a),m=(new e(a)).append(m.themeFolder);(new e(g.getPath())).startsWith(m)&&delete h[a]}"File"==g.elementType&&"theme"==g.extension&&"modified"==c&&g.getContent().then(function(c){c=JSON.parse(c);c.path=[g.getPath()];c.getFile=function(){return system.resource.findResource(this.path[0])}.bind(c);
for(var b=0;b<h[a].length;b++)if(h[a][b].name==c.name){h[a][b]=c;return}h[a].push(c)}.bind(this))});return m={themesChanged:function(c){h[c]=c?null:[]},getThemes:function(c,g,m){function q(){var a=[];h[c]&&(a=g?h[c].filter(function(c){return!c.getFile().isVirtual()}):h[c]);return a}m&&delete h[c];if(h[c])return q();m=b.getPreferences("davinci.ui.ProjectPrefs",c);m.themeFolder="themes";(new e(c)).append(m.themeFolder);a.forEach(function(c){c.getFile=function(){return system.resource.findResource(this.path[0])}.bind(c)}.bind(this));
h[c]=a;return q()},getThemeMetadata:function(c){return g[c.name]?g[c.name]:null},addCustomWidgets:function(c,g,a,h){var q=b.getPreferences("davinci.ui.ProjectPrefs",c);q.widgetFolder||(q.widgetFolder="./lib/custom",b.savePreferences("davinci.ui.ProjectPrefs",c,q));g=g.getParentFolder().getPath();g=new e(g);a=require("davinci/ve/metadata").parseMetaData(h.name,h,g,a);m._customWidgets[c].hasOwnProperty("name")||(m._customWidgets[c].name="custom",m._customWidgets[c].metaPath=q.widgetFolder,m._customWidgets[c].localPath=
!0);m._customWidgets[c]=a;d.publish("/davinci/ui/addedCustomWidget",[a]);return a},getCustomWidgets:function(c){if(!m._customWidgets||!m._customWidgets[c]){m._customWidgets||(m._customWidgets={});m._customWidgets[c]||(m._customWidgets[c]=[]);var g=b.getPreferences("davinci.ui.ProjectPrefs",c);g.widgetFolder||(g.widgetFolder="./lib/custom",b.savePreferences("davinci.ui.ProjectPrefs",c,g));for(var a=(new e(c)).append(g.widgetFolder).getSegments(),g=system.resource.findResource(a[0]),h=1;h<a.length;h++)var n=
g.getChild(a[h]),g=n?n:g.createResource(a[h],!0);var A;g.getChildren(function(c){A=c},!0);this._customWidgetPackages=[];null==A&&(A=[]);a={};for(h=0;h<A.length;h++)if(n=A[h],"Folder"==n.elementType){a[n.name]=n.getPath();var f="maq-lib-custom-"+n.name,v=n.getURL();require({packages:[{name:f,location:v}]});this._customWidgetPackages.push({name:n.name,location:v})}n=system.resource.findResource("*_widgets.json",!1,g);this._customWidgetDescriptors={};for(h=0;h<n.length;h++){var y=n[h],k=y.getParentFolder(),
v=g.getURL(),f=k.getURL(),E=f.substr(v.length+1),v=null;try{v=d.fromJson(y.getContentSync())}catch(F){}if(v&&v.customWidgetSpec&&(E=E.split("/").shift(),v.__metadataModuleId="maq-lib-custom-"+E,m.addCustomWidgets(c,y,a[E],v),q[c]||(q[c]={}),q[c][k.name]||(q[c][k.name]={}),q[c][k.name][v.version]=f,v&&v.widgets))for(y=0;y<v.widgets.length;y++)(k=v.widgets[y].type)&&(this._customWidgetDescriptors[k]={name:E,location:f,descriptor:v})}}return{custom:m._customWidgets[c]}},getCustomWidgetPackages:function(){return this._customWidgetPackages||
[]},getCustomWidgetDescriptors:function(){return this._customWidgetDescriptors?this._customWidgetDescriptors:{}},getInstalledLibs:function(){m._serverLibs||(m._serverLibs=f.serverJSONRequest({url:"cmd/listLibs",handleAs:"json",content:{},sync:!0})[0].userLibs);return m._serverLibs},getUserLibs:function(g){if(c.base)return c.base;c.base=n[0].userLibs;return c.base},getLibRoot:function(c,g,a){var h=new k,b=q;if(b[a]&&b[a][c]&&void 0!==b[a][c][g])return h.resolve(b[a][c][g]||"");b[a]||(b[a]={});b[a][c]||
(b[a][c]={});b[c]||(b[c]={});var m=null;switch(c){case "xblox":m="lib/xblox";break;case "dojo":m="lib/dojo";break;case "maqetta":m="lib/maqetta";break;case "delite":m="lib/ibm-js/delite";break;case "deliteful":m="lib/ibm-js/deliteful";break;case "requirejs":m="lib/ibm-js/requirejs"}b[a][c][g]=m;return h.resolve(m||"")},getLibraryId:function(c,g){return{sketch:"sketch",claro:"claro"}[c]+(g||"")},getLibraryName:function(c){var g,a;for(a in c)g=a;return g}}})},"davinci/Runtime":function(){define("davinci/lang/webContent ./commands/CommandStack ./ui.plugin ./html/html.plugin ./js/js.plugin ./ve/ve.plugin".split(" "),
function(p,k,f,e,b,d){var n=[f,e,d],a={plugins:[],extensionPoints:[],subscriptions:[],currentSelection:[],commandStack:new k,getUser:function(){return this._initializationInfo.userInfo},getWorkbenchState:function(){return this._initializationInfo?this._initializationInfo.workbenchState:{activeEditor:null,editors:[],nhfo:{project1:{device:"iphone",layout:"flow",themeSet:{name:"(none)",desktopTheme:"claro",mobileTheme:[{theme:"android",device:"Android"},{theme:"blackberry",device:"BlackBerry"},{theme:"ipad",
device:"iPad"},{theme:"iphone",device:"iPhone"},{theme:"iphone",device:"other"}]}}},project:"project1",id:"",Fields:[]}},getSiteConfigData:function(a){return"widgetPalette"==a?{_COMMENT1_:"Defines site-specific organization for widget palette",name:"widgetPalette_dojo_default",_COMMENT2_:"One entry for each section (\x3d\x3dfolder) in widget palette",_COMMENT3_:"includes provides ordered list of widgets to appear in each section",_COMMENT4_:"each entry in array causes a new item to appear in that section",
_COMMENT5_:"each entry in array can be either a string or an array",_COMMENT6_:"if a string, can be either a string that begins with type:, which is a particular widget type",_COMMENT7_:"otherwise the string holds a tag, which causes all widgets that match tag to share that item",_COMMENT8_:"if an array, then it holds a list of strings, each of which can start with type: (widget type) or a tag",defs:{$XBLOXSection:{id:"xblox",name:"xblox",iconBase64:"data:image/gif;base64,R0lGODlhEAAQAKIAAFhYWtXV1v///0BAQP///wAAAAAAAAAAACH5BAEAAAQALAAAAAAQABAAAAMuSLo0w5CNIF6EM9grN2+Z82WCEGjcVJbopa5tlJ2nh4W2XH9LyCu+X/AHAPyOCQA7",
subsections:["$XBLOXSection_Controls"]},$XBLOXSection_Controls:{id:"Controls",name:"Controls",iconBase64:"data:image/gif;base64,R0lGODlhEAAQALMAAN7e4oyMjtXV1sDAwf///+Dg4MvLyzMzM////wAAAAAAAAAAAAAAAAAAAAAAAAAAACH5BAEAAAgALAAAAAAQABAAAAQ3EMlJq704a3RO2NIhBIexHYRgeFTndkQ8HmER33g60EcB/ECcYBd6wWSkDErFUs5Mms4HRK1SIwA7",includes:["RunScript","CSSState","StyleState","Script"]},$ClipartSection_Arrows:{id:"Arrows",name:"Arrows",iconBase64:"data:image/gif;base64,R0lGODlhEAAQALMAAN7e4oyMjtXV1sDAwf///+Dg4MvLyzMzM////wAAAAAAAAAAAAAAAAAAAAAAAAAAACH5BAEAAAgALAAAAAAQABAAAAQ3EMlJq704a3RO2NIhBIexHYRgeFTndkQ8HmER33g60EcB/ECcYBd6wWSkDErFUs5Mms4HRK1SIwA7",
includes:["ArrowDown","ArrowLeft","ArrowRight","ArrowUp"]},$ClipartSection_Community:{id:"Community",name:"Community",iconBase64:"data:image/gif;base64,R0lGODlhEAAQAMQAANXV1v///9HR0cXFxbm5uaKiooyMjHR0dGlpaVJSUkZGRkREREJCQkFBQT09PTo6OjMzM////wAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAACH5BAEAABEALAAAAAAQABAAAAVdIJEoZGmSiTgAbOuywwgEdAAY5WyTul0gAYFCB+DRWJCAqFArDo+QRcDRgBCNu1rgueMWG4FHw4u1Maa9bg8AdqSd6/a7zEZr4U35vRw4KA5aOwkrL4UxIieJCikhADs\x3d",includes:["Facebook","Rss","Twitter"]},$ClipartSection_Devices:{id:"Devices",
name:"Devices",iconBase64:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAMAAAAoLQ9TAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAA2hpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuMC1jMDYxIDY0LjE0MDk0OSwgMjAxMC8xMi8wNy0xMDo1NzowMSAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wTU09Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9tbS8iIHhtbG5zOnN0UmVmPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvc1R5cGUvUmVzb3VyY2VSZWYjIiB4bWxuczp4bXA9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC8iIHhtcE1NOk9yaWdpbmFsRG9jdW1lbnRJRD0ieG1wLmRpZDowMTgwMTE3NDA3MjA2ODExOTJCMEJDQTgxOTc0RDYxMiIgeG1wTU06RG9jdW1lbnRJRD0ieG1wLmRpZDo4NTQ0QUU2NjhCMzMxMUUyOTQ3N0ExRTg0NEJENzk4RiIgeG1wTU06SW5zdGFuY2VJRD0ieG1wLmlpZDo4NTQ0QUU2NThCMzMxMUUyOTQ3N0ExRTg0NEJENzk4RiIgeG1wOkNyZWF0b3JUb29sPSJBZG9iZSBQaG90b3Nob3AgQ1M1LjEgTWFjaW50b3NoIj4gPHhtcE1NOkRlcml2ZWRGcm9tIHN0UmVmOmluc3RhbmNlSUQ9InhtcC5paWQ6MDM4MDExNzQwNzIwNjgxMTkyQjBCQ0E4MTk3NEQ2MTIiIHN0UmVmOmRvY3VtZW50SUQ9InhtcC5kaWQ6MDE4MDExNzQwNzIwNjgxMTkyQjBCQ0E4MTk3NEQ2MTIiLz4gPC9yZGY6RGVzY3JpcHRpb24+IDwvcmRmOlJERj4gPC94OnhtcG1ldGE+IDw/eHBhY2tldCBlbmQ9InIiPz7l5plaAAAAIVBMVEX///8zMzP3+PnV1dZ+fn7ExMZ9fX4sKis1NTVZWVmgoKKPJ3BhAAAARElEQVR42mJgIAIwM8IBM1iAkRkO2KECTFBAiQCaoZjWsrKxcgIxEHKA+BysbGysQIKLi5OVEyjCiAYYWNAAYa8CBBgA3BQB3Pw68r4AAAAASUVORK5CYII\x3d",
includes:["Cellphone","Computer","Laptop","Server","Tablet"]},$ClipartSection_DeviceSilhouettes:{id:"DeviceSilhouettes",name:"Device Silhouettes",iconBase64:"data:image/gif;base64,R0lGODlhEAAQAKIAAGZmaNXV1v///0BAQP///wAAAAAAAAAAACH5BAEAAAQALAAAAAAQABAAAAM6SErT3iu+EF5UL4/LqPfbNQRCaVbcaJ6hRK4CKr6r7MJxu6iwvX8fHUbjSDUAFEBR5AAol0wNZzpNAAA7",includes:"Android_340x480 Android_480x800 AndroidTablet Blackberry iPad iPhone".split(" ")},$ClipartSection_Media:{id:"Media",name:"Media",iconBase64:"data:image/gif;base64,R0lGODlhEAAQALMAANXV1v////z8/Pr6+vn5+fj4+Ojo6MrKyre3t6urq4iIiHV1dUdHR0BAQDMzM////yH5BAEAAA8ALAAAAAAQABAAAARZ8MlJq6Ut36c5+E3VOGAGBEAWeif6DULghk0rB8jCLAhK2zjFoXBQIFKeW2BxSDQShwWypmQUGoZGgTEFMp1Q6U+JEBKN3RsBp+P5WJ+4HCRR2e+rjX5PiQAAOw\x3d\x3d",
includes:"Camera Chat GraphBar GraphLine GraphPie Image Map Microphone PlayControl Record StreetMap Table VideoCamera VideoPlayer".split(" ")},$ClipartSection_UserInterfaceControls:{id:"UserInterfaceControls",name:"User Interface Controls",iconBase64:"data:image/gif;base64,R0lGODlhEAAQALMAAFhYWtXV1qurrKGhooKCg/////X19TMzM////wAAAAAAAAAAAAAAAAAAAAAAAAAAACH5BAEAAAgALAAAAAAQABAAAARSEElwqrUyHxG678KRIVthDoNZhGNZBFVgsppQGId5GKtYF5dKr8X5eGiSoNKXJAie0CeBSbKprsgqMDj84XS8rAt2kHWT1gJKJS4aA1nSspKJAAA7",includes:"File Folder FormattingToolbox HScrollBar HSplit ProgressBar SpinInput VScrollBar VSplit WaitingPending".split(" ")},
$ClipartSection_UserInterfaceIcons:{id:"UserInterfaceIcons",name:"User Interface Icons",iconBase64:"data:image/gif;base64,R0lGODlhEAAQANUAANXT1vj4+eLi49/f4Nra29nZ2tbW19XV1tTU1dDQ0c3NzpCQkf////7+/vX19fLy8vDw8O/v7+zs7OTk5OPj49nZ2dHR0c/Pz87Ozs3NzczMzKWlpaOjo6KioqGhoZ6enp2dnZycnJubm5mZmY+Pj4aGhoWFhYGBgX5+fnR0dHNzc2lpaWZmZllZWVdXV1VVVVNTU1FRUU5OTk1NTUxMTEJCQkBAQDY2NjMzMzIyMi8vLyoqKiYmJiMjI////wAAACH5BAEAAD4ALAAAAAAQABAAAAa8QJ/Qd0HRdD0dDXUZDj8ykqJgKGBIso/zs9IIIoFGICLQrLREWUZSmeHetookI2ueFgIGC6fSqHAzDAILJz4yFhF6LA8MD28MEQkyPjkEAQyYjS04LAwBBDk+PAYNmQ+bLYwNBjw+OJaZGzipmA4EOD4xB4mYIzgjmREHMT4mIhSZyZgUIiZELwgSvb+YEggvTT4eKQgDEB01HRATCCkcThwuIAcEAAQHIS/nTj4WJTA3OzcwJRb0/wB9BAEAOw\x3d\x3d",
includes:"Close Copy Delete Edit Error Fatal Help Home Info Lock Mail Minus Next Paste Plus Previous Print Refresh Save Search ShoppingCart Trash Warning".split(" ")},$ClipartSection_Other:{id:"Other",name:"Other",iconBase64:"data:image/gif;base64,R0lGODlhEAAQAJEAAHx8fDMzM////wAAACH5BAEAAAIALAAAAAAQABAAAAImlI9pAYoQDGxuHpvwZY8rrH1MWAWes53oRHZUK4Rkq8Gxp4roXgAAOw\x3d\x3d",includes:["Browser","Person","ProfilePicture","X"]},$ClipartSection:{id:"Clipart",name:"Clip Art",iconBase64:"data:image/gif;base64,R0lGODlhEAAQAKIAAFhYWtXV1v///0BAQP///wAAAAAAAAAAACH5BAEAAAQALAAAAAAQABAAAAMuSLo0w5CNIF6EM9grN2+Z82WCEGjcVJbopa5tlJ2nh4W2XH9LyCu+X/AHAPyOCQA7",
subsections:"$ClipartSection_Arrows $ClipartSection_Community $ClipartSection_Devices $ClipartSection_DeviceSilhouettes $ClipartSection_Media $ClipartSection_UserInterfaceControls $ClipartSection_UserInterfaceIcons $ClipartSection_Other".split(" ")},$DrawingToolsSection:{id:"DrawingTools",name:"Drawing Tools",iconBase64:"data:image/gif;base64,R0lGODlhEAAQAKIAAL+/v5aWlmNjYzMzMxwcHBYWFv///wAAACH5BAEAAAYALAAAAAAQABAAAAMgaLrc/jBKFsBcg9g7iuaFZwlhaZrD1Ikqq35Xdc10PScAOw\x3d\x3d",includes:"Text Line Arrow Polyline PolylineArrow Circle Rectangle RoundedRectangle".split(" ")},
$ViewsSection:{id:"Views",name:"Views",_COMMENT1_:"Mobile-only view widgets, often representing a single screen of UI",iconBase64:"data:image/gif;base64,R0lGODlhEAAQANUAAC5KhTFOiPj6/jJRijRTjTRUjTdXkTdXkLrH3+Hp+OHp9zdakzZYkDdYkDlbkzlck97o+ODp+N/o9ztflj5km/L2/Pj6/T5mnD9mnT5lm0FqoENupENuo0Ruo0ZxpvL2+0l3rEl4rEh2qkl3q0l2qk6BtE1+sU+BtFCDtVCFt1CEtlSLvVOJulOHuVaOv7nW78/t+////////wAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAACH5BAEAADIALAAAAAAQABAAAAaAQJlwSCwKXcikcilzxZ5QaApGVclWMUAWMFhgYiRYACGStaJoDKzyuchQr7hc3jAwGAeZCR1lKRIRLDIjWVtdXyUSEhAnMh58UCCKECEyGnOYHRsbHBwyFJBPGVQwFDIThQBcXjEOYggOMg+hMQUwFgIEsg+8vb0BwMBGw8TFQkEAOw\x3d\x3d",
includes:[]},$HeadingSection:{id:"Heading, Section Labels",name:"Heading",_COMMENT1_:"Mobile-only Heading widgets, often titles at top of a screen",iconBase64:"data:image/gif;base64,R0lGODlhEAAQAMQAAEh1qkd2q0d2qkh2q0h2qkt7r0t8r0+BtU6CtFGGuVGHuVSLvFaNv1WLvKzM6a3M6a3M6LfS7DJlklaOv4y64Iy635zD5J3E5KzN6azM6IK13Iy734273////////wAAACH5BAEAAB4ALAAAAAAQABAAAAVQoCeOZGmeaKqqU+u+LdN6U2Tf+D15S5ZJwIzjgXFkIJmGJ2GRtCSbTWc6vSg8hw0HCN1UKFotwlPQmM/os8FDIADcgYGAIJgD3qu8fs/nhwAAOw\x3d\x3d",includes:[]},$ContainersSection_Dojo:{id:"ContainersSection_Dojo",
name:"Dojo",iconBase64:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAACXBIWXMAAAsTAAALEwEAmpwYAAAKT2lDQ1BQaG90b3Nob3AgSUNDIHByb2ZpbGUAAHjanVNnVFPpFj333vRCS4iAlEtvUhUIIFJCi4AUkSYqIQkQSoghodkVUcERRUUEG8igiAOOjoCMFVEsDIoK2AfkIaKOg6OIisr74Xuja9a89+bN/rXXPues852zzwfACAyWSDNRNYAMqUIeEeCDx8TG4eQuQIEKJHAAEAizZCFz/SMBAPh+PDwrIsAHvgABeNMLCADATZvAMByH/w/qQplcAYCEAcB0kThLCIAUAEB6jkKmAEBGAYCdmCZTAKAEAGDLY2LjAFAtAGAnf+bTAICd+Jl7AQBblCEVAaCRACATZYhEAGg7AKzPVopFAFgwABRmS8Q5ANgtADBJV2ZIALC3AMDOEAuyAAgMADBRiIUpAAR7AGDIIyN4AISZABRG8lc88SuuEOcqAAB4mbI8uSQ5RYFbCC1xB1dXLh4ozkkXKxQ2YQJhmkAuwnmZGTKBNA/g88wAAKCRFRHgg/P9eM4Ors7ONo62Dl8t6r8G/yJiYuP+5c+rcEAAAOF0ftH+LC+zGoA7BoBt/qIl7gRoXgugdfeLZrIPQLUAoOnaV/Nw+H48PEWhkLnZ2eXk5NhKxEJbYcpXff5nwl/AV/1s+X48/Pf14L7iJIEyXYFHBPjgwsz0TKUcz5IJhGLc5o9H/LcL//wd0yLESWK5WCoU41EScY5EmozzMqUiiUKSKcUl0v9k4t8s+wM+3zUAsGo+AXuRLahdYwP2SycQWHTA4vcAAPK7b8HUKAgDgGiD4c93/+8//UegJQCAZkmScQAAXkQkLlTKsz/HCAAARKCBKrBBG/TBGCzABhzBBdzBC/xgNoRCJMTCQhBCCmSAHHJgKayCQiiGzbAdKmAv1EAdNMBRaIaTcA4uwlW4Dj1wD/phCJ7BKLyBCQRByAgTYSHaiAFiilgjjggXmYX4IcFIBBKLJCDJiBRRIkuRNUgxUopUIFVIHfI9cgI5h1xGupE7yAAygvyGvEcxlIGyUT3UDLVDuag3GoRGogvQZHQxmo8WoJvQcrQaPYw2oefQq2gP2o8+Q8cwwOgYBzPEbDAuxsNCsTgsCZNjy7EirAyrxhqwVqwDu4n1Y8+xdwQSgUXACTYEd0IgYR5BSFhMWE7YSKggHCQ0EdoJNwkDhFHCJyKTqEu0JroR+cQYYjIxh1hILCPWEo8TLxB7iEPENyQSiUMyJ7mQAkmxpFTSEtJG0m5SI+ksqZs0SBojk8naZGuyBzmULCAryIXkneTD5DPkG+Qh8lsKnWJAcaT4U+IoUspqShnlEOU05QZlmDJBVaOaUt2ooVQRNY9aQq2htlKvUYeoEzR1mjnNgxZJS6WtopXTGmgXaPdpr+h0uhHdlR5Ol9BX0svpR+iX6AP0dwwNhhWDx4hnKBmbGAcYZxl3GK+YTKYZ04sZx1QwNzHrmOeZD5lvVVgqtip8FZHKCpVKlSaVGyovVKmqpqreqgtV81XLVI+pXlN9rkZVM1PjqQnUlqtVqp1Q61MbU2epO6iHqmeob1Q/pH5Z/YkGWcNMw09DpFGgsV/jvMYgC2MZs3gsIWsNq4Z1gTXEJrHN2Xx2KruY/R27iz2qqaE5QzNKM1ezUvOUZj8H45hx+Jx0TgnnKKeX836K3hTvKeIpG6Y0TLkxZVxrqpaXllirSKtRq0frvTau7aedpr1Fu1n7gQ5Bx0onXCdHZ4/OBZ3nU9lT3acKpxZNPTr1ri6qa6UbobtEd79up+6Ynr5egJ5Mb6feeb3n+hx9L/1U/W36p/VHDFgGswwkBtsMzhg8xTVxbzwdL8fb8VFDXcNAQ6VhlWGX4YSRudE8o9VGjUYPjGnGXOMk423GbcajJgYmISZLTepN7ppSTbmmKaY7TDtMx83MzaLN1pk1mz0x1zLnm+eb15vft2BaeFostqi2uGVJsuRaplnutrxuhVo5WaVYVVpds0atna0l1rutu6cRp7lOk06rntZnw7Dxtsm2qbcZsOXYBtuutm22fWFnYhdnt8Wuw+6TvZN9un2N/T0HDYfZDqsdWh1+c7RyFDpWOt6azpzuP33F9JbpL2dYzxDP2DPjthPLKcRpnVOb00dnF2e5c4PziIuJS4LLLpc+Lpsbxt3IveRKdPVxXeF60vWdm7Obwu2o26/uNu5p7ofcn8w0nymeWTNz0MPIQ+BR5dE/C5+VMGvfrH5PQ0+BZ7XnIy9jL5FXrdewt6V3qvdh7xc+9j5yn+M+4zw33jLeWV/MN8C3yLfLT8Nvnl+F30N/I/9k/3r/0QCngCUBZwOJgUGBWwL7+Hp8Ib+OPzrbZfay2e1BjKC5QRVBj4KtguXBrSFoyOyQrSH355jOkc5pDoVQfujW0Adh5mGLw34MJ4WHhVeGP45wiFga0TGXNXfR3ENz30T6RJZE3ptnMU85ry1KNSo+qi5qPNo3ujS6P8YuZlnM1VidWElsSxw5LiquNm5svt/87fOH4p3iC+N7F5gvyF1weaHOwvSFpxapLhIsOpZATIhOOJTwQRAqqBaMJfITdyWOCnnCHcJnIi/RNtGI2ENcKh5O8kgqTXqS7JG8NXkkxTOlLOW5hCepkLxMDUzdmzqeFpp2IG0yPTq9MYOSkZBxQqohTZO2Z+pn5mZ2y6xlhbL+xW6Lty8elQfJa7OQrAVZLQq2QqboVFoo1yoHsmdlV2a/zYnKOZarnivN7cyzytuQN5zvn//tEsIS4ZK2pYZLVy0dWOa9rGo5sjxxedsK4xUFK4ZWBqw8uIq2Km3VT6vtV5eufr0mek1rgV7ByoLBtQFr6wtVCuWFfevc1+1dT1gvWd+1YfqGnRs+FYmKrhTbF5cVf9go3HjlG4dvyr+Z3JS0qavEuWTPZtJm6ebeLZ5bDpaql+aXDm4N2dq0Dd9WtO319kXbL5fNKNu7g7ZDuaO/PLi8ZafJzs07P1SkVPRU+lQ27tLdtWHX+G7R7ht7vPY07NXbW7z3/T7JvttVAVVN1WbVZftJ+7P3P66Jqun4lvttXa1ObXHtxwPSA/0HIw6217nU1R3SPVRSj9Yr60cOxx++/p3vdy0NNg1VjZzG4iNwRHnk6fcJ3/ceDTradox7rOEH0x92HWcdL2pCmvKaRptTmvtbYlu6T8w+0dbq3nr8R9sfD5w0PFl5SvNUyWna6YLTk2fyz4ydlZ19fi753GDborZ752PO32oPb++6EHTh0kX/i+c7vDvOXPK4dPKy2+UTV7hXmq86X23qdOo8/pPTT8e7nLuarrlca7nuer21e2b36RueN87d9L158Rb/1tWeOT3dvfN6b/fF9/XfFt1+cif9zsu72Xcn7q28T7xf9EDtQdlD3YfVP1v+3Njv3H9qwHeg89HcR/cGhYPP/pH1jw9DBY+Zj8uGDYbrnjg+OTniP3L96fynQ89kzyaeF/6i/suuFxYvfvjV69fO0ZjRoZfyl5O/bXyl/erA6xmv28bCxh6+yXgzMV70VvvtwXfcdx3vo98PT+R8IH8o/2j5sfVT0Kf7kxmTk/8EA5jz/GMzLdsAAAAgY0hSTQAAeiUAAICDAAD5/wAAgOkAAHUwAADqYAAAOpgAABdvkl/FRgAAAg9JREFUeNp8ks1rE0EYxn9bE/xqikI0lITiQW+VImoONmCQtoonUbAglFDEUtlLxdo/wUNRD0Iw1kOIEmj6D9ir2FRQi4j0lILQJoimRfJB9mNmOx42iWsT+8Iw7DwPv32feUdTSuGtyeQKaT3GZHJlGEgA40AOyKT1WL6lt0rbC2hC9IFg7/a1c5HAib5Dc+WqOb/8pVjb3K4H03os6fVqXToYHgj2RiYun34KhD1S6c27jYeb2/ViWo/lW4c9dFYiPtgfMIQTNoRDw3YwbIeGcMLxwf5AM1a7fF0A436fL15pSNAUGqCUhqYp/P4Dc0AImNoPkNvaqX8MHDn4SkOBiwA0Kg1rHoh6zd0iZD4VyrWaKUpVQ1I1bSqGpGKI0udCuQZk/gu4+XhZpfXY2amRM88vnjq2vlMz7xn2biF41L8+FAl8f5a4cFw4u/mrj3KqK0BYNkDqzv3UyR6N32uFn9H334qhtY1fhyf0lzEgVd76oQDaEKVUe43NLirP97Rnn97rG5tdRCnldrCw9EFd0TNKNEwARmayCkg1tRdAavRBVo3OZAFwpMQR8m+E12+/YjcMzW4CpBsFF7AKgG1aCNM9l4bd9vjc7FZ73gDCtDpGIw27Oc5/9R6AuzeiSFsqRwjX7DH0hYK0fiKbHSSuDyEtq/MSu63zt56o/fRuL5HWxS4srTJ1+xL71Z8BAL+kU+9a36VRAAAAAElFTkSuQmCC",
includes:[]},$ContainersSection_HTML:{id:"ContainersSection_HTML",name:"HTML",iconBase64:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyBpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuMC1jMDYwIDYxLjEzNDc3NywgMjAxMC8wMi8xMi0xNzozMjowMCAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENTNSBXaW5kb3dzIiB4bXBNTTpJbnN0YW5jZUlEPSJ4bXAuaWlkOjVFNUZFNTNBNTk0QjExRTBBNkY0ODEzNDdCMzkxNTdDIiB4bXBNTTpEb2N1bWVudElEPSJ4bXAuZGlkOjVFNUZFNTNCNTk0QjExRTBBNkY0ODEzNDdCMzkxNTdDIj4gPHhtcE1NOkRlcml2ZWRGcm9tIHN0UmVmOmluc3RhbmNlSUQ9InhtcC5paWQ6NUU1RkU1Mzg1OTRCMTFFMEE2RjQ4MTM0N0IzOTE1N0MiIHN0UmVmOmRvY3VtZW50SUQ9InhtcC5kaWQ6NUU1RkU1Mzk1OTRCMTFFMEE2RjQ4MTM0N0IzOTE1N0MiLz4gPC9yZGY6RGVzY3JpcHRpb24+IDwvcmRmOlJERj4gPC94OnhtcG1ldGE+IDw/eHBhY2tldCBlbmQ9InIiPz5wB++kAAABAklEQVR42qRToQ7CMBC9LYhK5Bz9AyaHYhIHEomcYxI5iRwOOYkcDgkKWxxyuElwnSq5hpJ2tAvJXnK5vuvd60u7eUII6IOBTo67SafafH31foroQEWZR8IFVibis2/M+G3BV9NYTydkCJSGPy59WzOKtMMlYghUTwLsXsMsLQA4yIwc10GUyaBxLvusAuGigM3+BHFIJceMnFW182K/ApfbQ6jhdBnjoTLrIljjLgF9WIcu0ulgm8zgzCrID2ejATnWcV+htt3BdDzydBHOzWEaBLLGucMB4lQkXycIffivTxmBzYdsJdcqd8GHnmg5ILDfLrXHIpaHIwbz+v7ObwEGADGQtFOesBZAAAAAAElFTkSuQmCC",
includes:["\x3ca\x3e","\x3cdiv\x3e","\x3cspan\x3e","\x3ctable\x3e","\x3cstyle\x3e"]},$ContainersSection:{id:"Containers",name:"Containers",_COMMENT1_:"Desktop and mobile containers",_COMMENT2_:"Note that default desktop preset only include desktop widgets",_COMMENT3_:"and mobile preset only include mobile widgets",iconBase64:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAARJJREFUeNqkUzFuhEAMNFHqHAUEiU9Q0PKS3BNo6O9aJMQDqHkM4iG05CJdGgpgfXhvvVqyECHdSNaO7PWMsRYHEaGua+z7Hgi+7wPzLZh14kACZVniPM8yTM4xTZMOqpv8nZSEENqB+e/9DmIRJ6A6Xddd3aW8FFhcrFE/TifdaEHllymeAkQYQRBAURS7OwjDEFh2U6DrOrheLrDjDXmea64FxnHU4w7DIJt/bt+AAtVenqf36cs6/DcBc2piAUSxriszMn6DF2FNcAR45BM8z9tc5N+7lkAURZBl2a57HMe2gHxIajFt20JVVasHY06Spimcv87AfS8v0eG/sWkamUiSBJhvwawTd3bf+0E8BBgAL2nsdz3dOk4AAAAASUVORK5CYII\x3d",
subsections:["$ContainersSection_HTML"]},$ListsSection:{id:"Lists",name:"Lists",_COMMENT1_:"Mobile-only List widgets",iconBase64:"data:image/gif;base64,R0lGODlhEAAQAMQAADlck9jf6ra/zGiKukNvpERvo/P3/Ex7r0x9sUx8r1KHuVKHuFaOv3io0bnW78jg8////////wAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAACH5BAEAABEALAAAAAAQABAAAAVWYCSOZGmeptEwbNs2hmgwgWHfd8DETQD9wKAh0IgsDBBEcGlQRBLIpfTwdFiv2CsVKp1GCkhlF2IgRAaC8c8gGEQeAAFuLgA8RI8BYM/nD+4ogYKDgiEAOw\x3d\x3d",includes:[]},$ControlsSection_Buttons:{id:"Buttons",
name:"Buttons",iconBase64:"data:image/gif;base64,R0lGODlhEAAQANUAAC5KhTFPijZXkDZYkDxhmTtimUJsouHr9/D1+0h2q0l3q7XQ7bbQ7bbQ7MLX79vo9k6AtE6Bs6TH6bbR7NLj9FKJu1OJulaNv5C95aTH6KTI6LXR7L/Z8Mje8laOv36z4X604JC95LnW77/a8Nzr9////wAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAACH5BAEAACUALAAAAAAQABAAAAZiwJJwSCwaj8hk0cP0XJpQj9ByqFqvVUSlFDk4vuCw4wApKR6MxmLCbm8mj0TJQNFI7nh8hmIoFTohGIKDgyEdBCUDHCAfHyCPkI0jAiUBIpeYmZckAUIAn6ChoEqkpaanRUEAOw\x3d\x3d",includes:[["Button",
"\x3cbutton\x3e"]]},$ControlsSection_CheckboxesRadios:{id:"CheckboxesRadios",name:"Checkboxes, RadioButtons, Switch",iconBase64:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAP9JREFUeNpi/P//P8PGnQf/M5AJWGAMf3d7kjUDLUYYAAITd94kWnO+uzqqC2DAQkGAgYEDwpbg4ICLv/jxA8IAUicefMD0Agw8+ABRCNL7geEHXBwkHG4uD2avuPAAtwEQS4Cqf3DAtX8A2p5urw6Xv3DjBZzNhMuPP6Da0TUHdu5ksNCQwG0ASEO8uToYv/iAqtmxcSODAjCMBAQ48BuAHtIwzQZAmzUkBIBhzIHfCyBnIgNkzQJIMYPVAJACkDNBmghpxhoLEkD/CXBIgBUXzjzI4GCgAHE2B4GkDE8HLxDpQACq8cWHH4TzAnqgkZyZQBmDHMAIys6UAIAAAwBz81X4fS5oMgAAAABJRU5ErkJggg\x3d\x3d",
includes:[]},$ControlsSection_IconContainer:{id:"IconContainer",name:"IconContainer",_COMMENT1_:"Mobile-only",iconBase64:"data:image/gif;base64,R0lGODlhEAAQAMQAACVLiiVLiDlck/P2+zxhlzpppj9mnDh3xUJtokdzp3ak21ON0FCDvEp6rU6As1SKvFaOv////wAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAACH5BAEAABEALAAAAAAQABAAAAVoYBRBZGmWIjSsbMtC0TMo9FzTyvBEzrD8PuBvMXBEGoODMrlUHgaNSMJFXSUiiAGgwNByvV1ExFClGiIEWw6nHhAigiBxKB8I4MynM2/Hl1t3cQFfg12FfXF/LHdwAo6PkI4ik5SVkyEAOw\x3d\x3d",includes:[]},$ControlsSection_Pickers:{id:"Pickers",
name:"Pickers",iconBase64:"data:image/gif;base64,R0lGODlhEAAQANUAAKFMUiI5ZjxsuTlckz1jmj1jmVyL0T1kmUNvpERvpERuo0Rvo16W2jx7wEeO4Et7r0x7r26ayUt8r0x8rqrS+lGHuVKHuZXN/1aOv6u7yJypq+38++v6+aiysJ6uqWpNK5RcON6CV+esnbq2tf/X0t26tuxmXtaJhL+Zmf///wAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAACH5BAEAACkALAAAAAAQABAAAAZswJRwSCwSA8YhUrlMBpbPpjEqfCarUmlRezVivmBMKgweXyIMgUGMOafXKcvog2o4LKnKvH5PTUIgIh0UECkPgIIUEikLGQAnGxoJKQiOkBoKKQUcJSYkHgUpBJyeHgcpA6mqA6irqV2wsUJBADs\x3d",
includes:[]},$ControlsSection_Select:{id:"Select",name:"Select",iconBase64:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAVJJREFUeNpi/P//PwMlgAVEhPcf+E+RAb++fWeoz3QlqLhxxh6G+gwXBH/6bgYmEOPHp69gAVGGvwxijH8ZhP/9AbNhWJwRgn9+/AxWl5TYy/D61hOgvi8QF3z/8Akswc/JjGLjfwZGMM0IZIHY3z5ADDi4ogQs+23+XgZGUCBaRE4EByUjRBeUATOEASoANe4/0DhGqOh/aBjIm+kzfn37/n+IkxZJAbhm3zWIAX9//WHg4OVlMDBQZhD6+5doA7aceQQx4M/PnwywePRN6IVEDzsrAysnJwMHDxcDGxCDaFZODoZJqfZwA/78+AWLxh9wf+9cWkK0C359/wEx4DeQAXOBe3QPXhfAwKwsJ3D6gSckmAGHV5cT7YLf36AuADkFBmxDO4lyweJCZ7DLIbEADIz/0DA4vaGSeBcA9YETkpF/JyLNMGBJTXgAI6XZGSDAAJsyjhMJL+H/AAAAAElFTkSuQmCC",
includes:["Select","\x3cselect\x3e"]},$ControlsSection_SlidersSpinners:{id:"SlidersSpinners",name:"Sliders, Spinners",iconBase64:"data:image/gif;base64,R0lGODlhEAAQANUAAM7W5DdYkDteljpfloOcwUBonkBonUFonkdzqEdzp3CUv+Tt+EZzp9Xk9Njm9dvo9kx+sU1+sZ/E6K3M68re8tDh89fm9VKHuYO14pC95ZG95Z/F6KzM663N68ne8tDi89Xl9FaOv4O24pG+5aDJ6tXj76nR7v///wAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAACH5BAEAACcALAAAAAAQABAAAAZZwJNwSCwaj8ikcjkMOZ/J0KJBbSxCyMtnwulMPpdiKcSIUDZoiSfCCJWEERIB8RhpMppHglCBCA0mJgoHFiIYDgYKgQVCAAGPAQIgIAOQAQBIj0ybnJ2eJ0EAOw\x3d\x3d",
includes:[]},$ControlsSection_TextBox:{id:"TextBox",name:"TextBox",iconBase64:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAM1JREFUeNpi/P//PwMlgImBQkCxASzIHIvIif/lzfQZHp66yHBieT4jUSaAwgAZm0dM+I8uhg+DXRDefwAckqGWCmBD15x48H/18QcELV9Z6MAINuDPz98MtWmODBKcTAw9QL6NvhyDipoMXs0ts/chwuD39+9gDjfDfzgtyvAXe6hDQ+bXtx8IA94+eArmsLMywml+Bmbc4cbAyPD24VOEAX9//WLIyJ7KkBJiARZctPE0w5w1JxjoEgtM2NIBiCY2ITEO/bxAsQEAAQYAGVGarS2fPq4AAAAASUVORK5CYII\x3d",
includes:[["TextBox","\x3cinput\x3e"]]},$ControlsSection_Toolbars:{id:"Toolbars",name:"Toolbars, ButtonBars",iconBase64:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAOtJREFUeNpi/P//PwMlgAVEhPcf+E+RAX9+/mKoTXMiWXPTzH0MTCDGzy9f4YIxmZOIokHg19dvDIygMHAtWPq/vjQYLPgfCHecf8ngaSTOsP0cHtpQgqGxey3ECyCT3n/9CdINNsJCTZDh/ZdfcNoSRH9G8C1UBYDqfyBcYJowg7JAlJCVYGgu9CFZc+2ErRAD/v39BxZQ4STNgL9//kBi4R+QQQ749+cvzIC/ZBoAdcFfSl3w69t3sgwA6QMb8PsfeVH4599/aCwA00Jy2QIG5n+YJv1lYgKLw+h/QBqUaCBizJCERAkACDAAug6MMt3XrLUAAAAASUVORK5CYII\x3d",
includes:[]},$ControlsSection_Other:{id:"Other",name:"Other",iconBase64:"data:image/gif;base64,R0lGODlhEAAQANUAADlckzthmDxhl0BonkBonUVwpUp6rU+BtU+CtFOJu1OKu1aOv/b8//n9/8/t++/6//L7/+v5/+76//X8//j9/+v6/+77/+/7//L8//b9//X9//n+//j+///ovfvcsvTKofTJofbKo/TJo/TKo+20kOegfeeffuegfuWfff///wAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAACH5BAEAACkALAAAAAAQABAAAAZfwJRwSCwaj8ikUrloOp/QVIJErZIc2Kwiheh4v9dKpEI+pAyetPp6eVgsEkOq8AGNRKAQyoGB9DEFKQRWVHsTGgwaGQMpAiclJiYoJ3sNDRwbFAEpAJ2en6BLoqOkpEEAOw\x3d\x3d",
includes:[]},$ControlsSection:{id:"Controls",name:"Controls",_COMMENT1_:"each section can either have an array of subsections or an array of includes",iconBase64:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAIAAACQkWg2AAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyBpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuMC1jMDYwIDYxLjEzNDc3NywgMjAxMC8wMi8xMi0xNzozMjowMCAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENTNSBXaW5kb3dzIiB4bXBNTTpJbnN0YW5jZUlEPSJ4bXAuaWlkOjgyQUEwNTdCNTk1MTExRTBCODIzOTk0QzIzMzdBNkNGIiB4bXBNTTpEb2N1bWVudElEPSJ4bXAuZGlkOjgyQUEwNTdDNTk1MTExRTBCODIzOTk0QzIzMzdBNkNGIj4gPHhtcE1NOkRlcml2ZWRGcm9tIHN0UmVmOmluc3RhbmNlSUQ9InhtcC5paWQ6ODJBQTA1Nzk1OTUxMTFFMEI4MjM5OTRDMjMzN0E2Q0YiIHN0UmVmOmRvY3VtZW50SUQ9InhtcC5kaWQ6ODJBQTA1N0E1OTUxMTFFMEI4MjM5OTRDMjMzN0E2Q0YiLz4gPC9yZGY6RGVzY3JpcHRpb24+IDwvcmRmOlJERj4gPC94OnhtcG1ldGE+IDw/eHBhY2tldCBlbmQ9InIiPz7ZOYfnAAABBUlEQVR42pRSKxCDMAztdgjkJBKJnKxETk5WIpGTlcjKykpk5SSyEolETk4iI9eRrpSud7tF5NK8vHweHHoz38cHSdmVlhFkM5lN9W2dJDTKRJDNZBgxrum5oOdynB7j9NSC+aJhXjC4VCfrHQErLO0dsN2cBUDwjosOn0fyy2y19+8JsMDWjMA3QSkRPjMCW9GJ5CFWFzllu+qW1RmsXfHoW0OlNv7oYX52XRsS+rtVCbajrdGq9EeH2/rMQfZGaRPNxYwPdivpYRo1D8W+tAo3kVJ/Q+478Bt32UH5PSAFHWFVqVllRr/ploLc0VWRCyl2nT9BBDlZ8T8hKUYE/a3SS4ABAP4rm5Sxt9t9AAAAAElFTkSuQmCC",
subsections:"$ControlsSection_Buttons $ControlsSection_CheckboxesRadios $ControlsSection_Pickers $ControlsSection_Select $ControlsSection_TextBox $ControlsSection_Toolbars $ControlsSection_Other".split(" ")},$HTMLSection_Common:{id:"Common",name:"Common",iconBase64:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAALNJREFUeNpi/P//P4NUxvb/DGQCFhjj2QxPkjUDLWZgYqAQgA34//8fmNO74TIcwwCMjU2MAagPbADTv79wyeIAXTBG1oALMAL1gcOA8f9vgoqRDQWxIfr+QF3w9w95/v/7C+qCf78x/AezBa8XgC5gAKUDhZh5/8kBIH3QQPxNlhdALqdOOmD8+5vMQIS6gPH/X/K8ANQHDQMyoxEYC9CE9I9BI6SHdBeA9f7/T1EgAgQYAMdnhUefY5wVAAAAAElFTkSuQmCC",
includes:["\x3ca\x3e","\x3cdiv\x3e","\x3clabel\x3e","\x3cspan\x3e","\x3cstyle\x3e"]},$HTMLSection_Forms:{id:"Forms",name:"Forms",iconBase64:"data:image/png;base64,R0lGODlhEAAQAOYAAPT2/PH0+/n6/Iaavoyfwt/o+OLq+Onv+pOmxt/o9+bt+N7k7unv+e3y+sbT59/p+OLr+PD0+t/p9/D1+/f5+5DDvKfMxgBZSqfNxgJbSqjNxqjMxQZeSqjNxQZfSgpiSgphSg9mSrXSyRNrShNqSb3Vy5zKtp3Ktr3Wy5zKtZ3KtR1zSaDMtSJ3ScTYzSZ6SSZ7SSl+SSl9SSp+SSp9SaTNtCyASXt0T392ToV5TIx8SpOASKOIQ5yEReDIj97WwbSQPbCOPquLQNSyaNSyadq9fObav9Wyaf///////wAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAACH5BAEAAEkALAAAAAAQABAAAAeQgEmCg4SFhoeIhECLi4g2NklASEgCRECHNi40RpMURUdBgjAxMzIzKCUvSAgAPkVDQkktIrS1Ii0RExERATxJKx0bGhYdGMIrDgQDDT1JJBXQ0dAjDAwHDDtJISYnKSom3CEOCMoKOkkgHOoeLCwfCxAG8hA5hRk1HD8J+w8SBTiFLlxIcqOgwYKJEipcaCgQADs\x3d",
includes:"\x3cbutton\x3e \x3cfieldset\x3e \x3cform\x3e \x3cinput\x3e \x3cselect\x3e \x3ctextarea\x3e".split(" ")},$HTMLSection_Headers:{id:"Headers",name:"Headers",iconBase64:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAIpJREFUeNpi/P//PwMlgImBQkCxASwggtW3bzeQcgFiVx5NrT0gsS/Xr2GIwQBQbiaQSgPJkewCoOZyqGaEC4jUqASkQK5SIjcMlKC4Aoj34HLBbqBNuAy4B8TKwPC4B1TjgsuAs0D8Hso2BmJBmARIIzHRWAFUCAp1V6hhQyAhUWwA49DPTAABBgDGmykkJRol4AAAAABJRU5ErkJggg\x3d\x3d",
includes:["\x3ch1\x3e","\x3ch2\x3e","\x3ch3\x3e"]},$HTMLSection_ImagesMediaIframes:{id:"ImagesMediaIframes",name:"Images, Media, Iframes",iconBase64:"data:image/gif;base64,R0lGODlhEAAQANUAAOnn6f////7+/v39/fz8/Pr6+vn5+ff39/X19fT09PLy8vHx8e/v7+fn59/f397e3tvb29bW1sfHx8LCwsHBwby8vLq6urm5uba2trS0tLKysq2traKioqCgoJycnJSUlJKSkpGRkYuLi4qKiomJiYSEhHh4eHV1dXR0dGlpaWhoaFxcXP///wAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAACH5BAEAACwALAAAAAAQABAAAAaPQBYLNAQZjcJk0mgJOBeEkXI5jEwmHMJCNC1uIBNKxzTwEJWhocPxkAQIBgY3+QFpAJTJxnRarU5KRCANVxkcFygsJIEfGAx5eQoZSFQgCQkIlwREaUsgFwdXYQIXlEJpIAWiFAEfQ4EgFQFheQEWpq8gTrsBnLBNkBO2dWhDsxTIrSydQioqKc7P0iolQkEAOw\x3d\x3d",
includes:["\x3caudio\x3e","\x3cembed\x3e","\x3cimg\x3e","\x3ciframe\x3e","\x3cvideo\x3e"]},$HTMLSection_ParagraphsFormatting:{id:"ParagraphsFormatting",name:"Paragraphs, Breaks, Rules",iconBase64:"data:image/gif;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAIAAACQkWg2AAAACXBIWXMAAAsTAAALEwEAmpwYAAAKT2lDQ1BQaG90b3Nob3AgSUNDIHByb2ZpbGUAAHjanVNnVFPpFj333vRCS4iAlEtvUhUIIFJCi4AUkSYqIQkQSoghodkVUcERRUUEG8igiAOOjoCMFVEsDIoK2AfkIaKOg6OIisr74Xuja9a89+bN/rXXPues852zzwfACAyWSDNRNYAMqUIeEeCDx8TG4eQuQIEKJHAAEAizZCFz/SMBAPh+PDwrIsAHvgABeNMLCADATZvAMByH/w/qQplcAYCEAcB0kThLCIAUAEB6jkKmAEBGAYCdmCZTAKAEAGDLY2LjAFAtAGAnf+bTAICd+Jl7AQBblCEVAaCRACATZYhEAGg7AKzPVopFAFgwABRmS8Q5ANgtADBJV2ZIALC3AMDOEAuyAAgMADBRiIUpAAR7AGDIIyN4AISZABRG8lc88SuuEOcqAAB4mbI8uSQ5RYFbCC1xB1dXLh4ozkkXKxQ2YQJhmkAuwnmZGTKBNA/g88wAAKCRFRHgg/P9eM4Ors7ONo62Dl8t6r8G/yJiYuP+5c+rcEAAAOF0ftH+LC+zGoA7BoBt/qIl7gRoXgugdfeLZrIPQLUAoOnaV/Nw+H48PEWhkLnZ2eXk5NhKxEJbYcpXff5nwl/AV/1s+X48/Pf14L7iJIEyXYFHBPjgwsz0TKUcz5IJhGLc5o9H/LcL//wd0yLESWK5WCoU41EScY5EmozzMqUiiUKSKcUl0v9k4t8s+wM+3zUAsGo+AXuRLahdYwP2SycQWHTA4vcAAPK7b8HUKAgDgGiD4c93/+8//UegJQCAZkmScQAAXkQkLlTKsz/HCAAARKCBKrBBG/TBGCzABhzBBdzBC/xgNoRCJMTCQhBCCmSAHHJgKayCQiiGzbAdKmAv1EAdNMBRaIaTcA4uwlW4Dj1wD/phCJ7BKLyBCQRByAgTYSHaiAFiilgjjggXmYX4IcFIBBKLJCDJiBRRIkuRNUgxUopUIFVIHfI9cgI5h1xGupE7yAAygvyGvEcxlIGyUT3UDLVDuag3GoRGogvQZHQxmo8WoJvQcrQaPYw2oefQq2gP2o8+Q8cwwOgYBzPEbDAuxsNCsTgsCZNjy7EirAyrxhqwVqwDu4n1Y8+xdwQSgUXACTYEd0IgYR5BSFhMWE7YSKggHCQ0EdoJNwkDhFHCJyKTqEu0JroR+cQYYjIxh1hILCPWEo8TLxB7iEPENyQSiUMyJ7mQAkmxpFTSEtJG0m5SI+ksqZs0SBojk8naZGuyBzmULCAryIXkneTD5DPkG+Qh8lsKnWJAcaT4U+IoUspqShnlEOU05QZlmDJBVaOaUt2ooVQRNY9aQq2htlKvUYeoEzR1mjnNgxZJS6WtopXTGmgXaPdpr+h0uhHdlR5Ol9BX0svpR+iX6AP0dwwNhhWDx4hnKBmbGAcYZxl3GK+YTKYZ04sZx1QwNzHrmOeZD5lvVVgqtip8FZHKCpVKlSaVGyovVKmqpqreqgtV81XLVI+pXlN9rkZVM1PjqQnUlqtVqp1Q61MbU2epO6iHqmeob1Q/pH5Z/YkGWcNMw09DpFGgsV/jvMYgC2MZs3gsIWsNq4Z1gTXEJrHN2Xx2KruY/R27iz2qqaE5QzNKM1ezUvOUZj8H45hx+Jx0TgnnKKeX836K3hTvKeIpG6Y0TLkxZVxrqpaXllirSKtRq0frvTau7aedpr1Fu1n7gQ5Bx0onXCdHZ4/OBZ3nU9lT3acKpxZNPTr1ri6qa6UbobtEd79up+6Ynr5egJ5Mb6feeb3n+hx9L/1U/W36p/VHDFgGswwkBtsMzhg8xTVxbzwdL8fb8VFDXcNAQ6VhlWGX4YSRudE8o9VGjUYPjGnGXOMk423GbcajJgYmISZLTepN7ppSTbmmKaY7TDtMx83MzaLN1pk1mz0x1zLnm+eb15vft2BaeFostqi2uGVJsuRaplnutrxuhVo5WaVYVVpds0atna0l1rutu6cRp7lOk06rntZnw7Dxtsm2qbcZsOXYBtuutm22fWFnYhdnt8Wuw+6TvZN9un2N/T0HDYfZDqsdWh1+c7RyFDpWOt6azpzuP33F9JbpL2dYzxDP2DPjthPLKcRpnVOb00dnF2e5c4PziIuJS4LLLpc+Lpsbxt3IveRKdPVxXeF60vWdm7Obwu2o26/uNu5p7ofcn8w0nymeWTNz0MPIQ+BR5dE/C5+VMGvfrH5PQ0+BZ7XnIy9jL5FXrdewt6V3qvdh7xc+9j5yn+M+4zw33jLeWV/MN8C3yLfLT8Nvnl+F30N/I/9k/3r/0QCngCUBZwOJgUGBWwL7+Hp8Ib+OPzrbZfay2e1BjKC5QRVBj4KtguXBrSFoyOyQrSH355jOkc5pDoVQfujW0Adh5mGLw34MJ4WHhVeGP45wiFga0TGXNXfR3ENz30T6RJZE3ptnMU85ry1KNSo+qi5qPNo3ujS6P8YuZlnM1VidWElsSxw5LiquNm5svt/87fOH4p3iC+N7F5gvyF1weaHOwvSFpxapLhIsOpZATIhOOJTwQRAqqBaMJfITdyWOCnnCHcJnIi/RNtGI2ENcKh5O8kgqTXqS7JG8NXkkxTOlLOW5hCepkLxMDUzdmzqeFpp2IG0yPTq9MYOSkZBxQqohTZO2Z+pn5mZ2y6xlhbL+xW6Lty8elQfJa7OQrAVZLQq2QqboVFoo1yoHsmdlV2a/zYnKOZarnivN7cyzytuQN5zvn//tEsIS4ZK2pYZLVy0dWOa9rGo5sjxxedsK4xUFK4ZWBqw8uIq2Km3VT6vtV5eufr0mek1rgV7ByoLBtQFr6wtVCuWFfevc1+1dT1gvWd+1YfqGnRs+FYmKrhTbF5cVf9go3HjlG4dvyr+Z3JS0qavEuWTPZtJm6ebeLZ5bDpaql+aXDm4N2dq0Dd9WtO319kXbL5fNKNu7g7ZDuaO/PLi8ZafJzs07P1SkVPRU+lQ27tLdtWHX+G7R7ht7vPY07NXbW7z3/T7JvttVAVVN1WbVZftJ+7P3P66Jqun4lvttXa1ObXHtxwPSA/0HIw6217nU1R3SPVRSj9Yr60cOxx++/p3vdy0NNg1VjZzG4iNwRHnk6fcJ3/ceDTradox7rOEH0x92HWcdL2pCmvKaRptTmvtbYlu6T8w+0dbq3nr8R9sfD5w0PFl5SvNUyWna6YLTk2fyz4ydlZ19fi753GDborZ752PO32oPb++6EHTh0kX/i+c7vDvOXPK4dPKy2+UTV7hXmq86X23qdOo8/pPTT8e7nLuarrlca7nuer21e2b36RueN87d9L158Rb/1tWeOT3dvfN6b/fF9/XfFt1+cif9zsu72Xcn7q28T7xf9EDtQdlD3YfVP1v+3Njv3H9qwHeg89HcR/cGhYPP/pH1jw9DBY+Zj8uGDYbrnjg+OTniP3L96fynQ89kzyaeF/6i/suuFxYvfvjV69fO0ZjRoZfyl5O/bXyl/erA6xmv28bCxh6+yXgzMV70VvvtwXfcdx3vo98PT+R8IH8o/2j5sfVT0Kf7kxmTk/8EA5jz/GMzLdsAAAAEZ0FNQQAAsY58+1GTAAAAIGNIUk0AAHolAACAgwAA+f8AAIDpAAB1MAAA6mAAADqYAAAXb5JfxUYAAAHGSURBVHjaZFLJbhNREKx+b2Yc7xs2EEVZlEgR4oKEOHLiH/gEfokP4EM4I0UcEApCkYAoIDlWGC9je2ymFw4zA9jUqaWu6up6r+nT1XWn1QDAnMEU2/BB5HxoxjAAmM4XQb/TGtzrcBprfOXC2l8ugVnHox+9w6eN7kGhdy4QVQCrZB7WjqOykYMZy9E0vXg9fPKqOzgCIKou76kZs6w2WbL6laRZkmarDXNmlfqg2xvefngzGX/NbYNimkFU3328niTrMKrA+Ua18vzRg73W4ab20iq38eimOzwBSoGamWLQaVSj0PuAnAO591/uWG2/1z46aU++X+bMPw7GgpvxLJ4tgzByPiDnyXkxNKt7+83Iygd0JR/MCjgiclTAERHBDBmriG05qGrG+uLZuUk5oIQYVou5qm4JzCCii1QlYxBgAIEAGMg7EdUdBzMTsbcXn+N5EoYR+ZCcd96z4Pygd9orvuvfDMZS7GEglBUoNzfV3Qym8I/PjjebdZ4WRCAyo2atwpLuCgDcfbvsCwfCO6GXoFUyrQfrQuCdA/Dw+CyKIsDyRXZg9xvt/rA4vp/TuagSka8PczL9JyDQbC26jKezxe8BAJ6U+/2r7MIJAAAAAElFTkSuQmCC",
includes:"\x3cb\x3e \x3cbr\x3e \x3cem\x3e \x3chr\x3e \x3ci\x3e \x3cp\x3e \x3cs\x3e \x3cstrong\x3e \x3cu\x3e".split(" ")},$HTMLSection_Tables:{id:"Tables",name:"Tables",iconBase64:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAXhJREFUeNrEUz1LA0EQnTvzO/wPYsBOrQW109ImpLPIL9DWKqQQRESEFGKjYmGwEyQggUTBRn+BIhFFTXK53Z1xZi53ulcpKdxjmXnD7Lv39iMgIhhnhDDmKKTJavXyz1KOKvNBRkCIsFWe09wxFbI1iTEy5ppB0shB69v1K18BOdTYvHvUZm1k0oi7rUwhIIkAs8VJQESfwMQxVGoXv5Le7jxAwF/yZ2aVubRxRjKYmWJrqXZyQ/3I0HtvSG8fA8Xd1z49v/ToqftJi5va/30KJhqOyGQ/WL6xCcZkCkakrMcOopyFKGKvCGLNslFrDMTGqX8hECz7AKN7YwZDnwC5uXp47XndPW17uN64zXK0zidwzsH6yozKNKxg57gFpeUi11EtHZx3YG1hKiNoNO9zx8iMcjRigWQFYuJfVAMp/jmcRf8qG90sUAWoEWUZpG8FcwRICQ7ShunSniYToiIMIb3XguXELdcKnEtM6639chD8+2v8EmAA9/wqJKl9P7kAAAAASUVORK5CYII\x3d",
includes:["\x3ctable\x3e"]},$HTMLSection:{id:"HTML",name:"HTML",iconBase64:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyBpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuMC1jMDYwIDYxLjEzNDc3NywgMjAxMC8wMi8xMi0xNzozMjowMCAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENTNSBXaW5kb3dzIiB4bXBNTTpJbnN0YW5jZUlEPSJ4bXAuaWlkOjVFNUZFNTNBNTk0QjExRTBBNkY0ODEzNDdCMzkxNTdDIiB4bXBNTTpEb2N1bWVudElEPSJ4bXAuZGlkOjVFNUZFNTNCNTk0QjExRTBBNkY0ODEzNDdCMzkxNTdDIj4gPHhtcE1NOkRlcml2ZWRGcm9tIHN0UmVmOmluc3RhbmNlSUQ9InhtcC5paWQ6NUU1RkU1Mzg1OTRCMTFFMEE2RjQ4MTM0N0IzOTE1N0MiIHN0UmVmOmRvY3VtZW50SUQ9InhtcC5kaWQ6NUU1RkU1Mzk1OTRCMTFFMEE2RjQ4MTM0N0IzOTE1N0MiLz4gPC9yZGY6RGVzY3JpcHRpb24+IDwvcmRmOlJERj4gPC94OnhtcG1ldGE+IDw/eHBhY2tldCBlbmQ9InIiPz5wB++kAAABAklEQVR42qRToQ7CMBC9LYhK5Bz9AyaHYhIHEomcYxI5iRwOOYkcDgkKWxxyuElwnSq5hpJ2tAvJXnK5vuvd60u7eUII6IOBTo67SafafH31foroQEWZR8IFVibis2/M+G3BV9NYTydkCJSGPy59WzOKtMMlYghUTwLsXsMsLQA4yIwc10GUyaBxLvusAuGigM3+BHFIJceMnFW182K/ApfbQ6jhdBnjoTLrIljjLgF9WIcu0ulgm8zgzCrID2ejATnWcV+htt3BdDzydBHOzWEaBLLGucMB4lQkXycIffivTxmBzYdsJdcqd8GHnmg5ILDfLrXHIpaHIwbz+v7ObwEGADGQtFOesBZAAAAAAElFTkSuQmCC",
subsections:"$HTMLSection_Common $HTMLSection_Forms $HTMLSection_Headers $HTMLSection_ImagesMediaIframes $HTMLSection_ParagraphsFormatting $HTMLSection_Tables".split(" ")},$AppOtherSection:{id:"Other",name:"Other",iconBase64:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAcFJREFUeNqcUj1IQlEUPjfc+llqCEKwpaCgrJZqKOhnqiChsbQhF+f2moqgpaH2rDEqiiCwBB2sRbJArYa0hohSCLTQ93rvds95710VHaIDx/P5ne+ce869j3HOAW039MCPr9PwV5sddIBntJPZLAKLV+eHCDMpY2UlnP5bvyv7V9gA6qx04bMAmbwKmZwiXIWPvAI9bY0iFikSh7m8QhrUo9nKx8IknsTFGYyXcwDvohHDgbgxhWUVDbJfijE23osIO+Fnmnw79CKKzTJswEot5Aq+uV6Ix+6FJ8HewCESjJIjTtwmKWev5xAXOCEw6o2G4jR039Y5z+WK5H/FWCdX4HppLEykMtkqrJu4vaWZML2T9R2cRtP8LJygS5wa6QYDg8BdNbChmRlwMLmCd/NUjmfhu9Qr4enlALl384Q4S4N18hJ1XYeaWNMk1rRqTcUKR4Ebwq7JPiAsnss10Q9HFyY/YfKmpmKFpY0T/v2tkrvXDig+vWX54vohRXTUYMScR2gqXqGoFEqvYI7X2tQkxv6hSBq1IHHVCoHII/cHY/QJL4w7wX8ZI94t8J7gUYYYNcSPOWFyuIPJBv+1XwEGAJJgewSkj0bcAAAAAElFTkSuQmCC",
includes:["$$AllOthers$$"]},$SketchOtherSection:{id:"Other",name:"Other",iconBase64:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAcFJREFUeNqcUj1IQlEUPjfc+llqCEKwpaCgrJZqKOhnqiChsbQhF+f2moqgpaH2rDEqiiCwBB2sRbJArYa0hohSCLTQ93rvds95710VHaIDx/P5ne+ce869j3HOAW039MCPr9PwV5sddIBntJPZLAKLV+eHCDMpY2UlnP5bvyv7V9gA6qx04bMAmbwKmZwiXIWPvAI9bY0iFikSh7m8QhrUo9nKx8IknsTFGYyXcwDvohHDgbgxhWUVDbJfijE23osIO+Fnmnw79CKKzTJswEot5Aq+uV6Ix+6FJ8HewCESjJIjTtwmKWev5xAXOCEw6o2G4jR039Y5z+WK5H/FWCdX4HppLEykMtkqrJu4vaWZML2T9R2cRtP8LJygS5wa6QYDg8BdNbChmRlwMLmCd/NUjmfhu9Qr4enlALl384Q4S4N18hJ1XYeaWNMk1rRqTcUKR4Ebwq7JPiAsnss10Q9HFyY/YfKmpmKFpY0T/v2tkrvXDig+vWX54vohRXTUYMScR2gqXqGoFEqvYI7X2tQkxv6hSBq1IHHVCoHII/cHY/QJL4w7wX8ZI94t8J7gUYYYNcSPOWFyuIPJBv+1XwEGAJJgewSkj0bcAAAAAElFTkSuQmCC",
includes:"Calendar ColorPalette GridX RichText StickyNote Tree $$AllOthers$$".split(" ")},$mobileSections:"$ViewsSection $HeadingSection $ListsSection $ControlsSection $ContainersSection $HTMLSection $ClipartSection $XBLOXSection $DrawingToolsSection $AppOtherSection $StatesSection".split(" "),$desktopSections:"$ContainersSection $ControlsSection $ViewsSection $HeadingSection $ListsSection $HTMLSection $ClipartSection $XBLOXSection $DrawingToolsSection $AppOtherSection $StatesSection".split(" "),
$sketchSections:"$DrawingToolsSection $ClipartSection $ControlsSection $ContainersSection $HTMLSection $HeadingSection $ListsSection $SketchOtherSection".split(" "),$sketchExcludes:[],$ALLMOBILE_Sections:[],$ALLDESKTOP_Sections:"$ContainersSection $ControlsSection $ViewsSection $HeadingSection $ListsSection $HTMLSection $ClipartSection $XBLOXSection $DrawingToolsSection $AppOtherSection $StatesSection".split(" "),$deliteSections:["$HTMLSection","$XBLOXSection","$DELITESection","$StatesSection"],$ALLDELITE_Sections:["$HTMLSection",
"$XBLOXSection","$DELITESection"],$DELITESection_Controls:{id:"delite",name:"Controls",iconBase64:"data:image/gif;base64,R0lGODlhEAAQALMAAN7e4oyMjtXV1sDAwf///+Dg4MvLyzMzM////wAAAAAAAAAAAAAAAAAAAAAAAAAAACH5BAEAAAgALAAAAAAQABAAAAQ3EMlJq704a3RO2NIhBIexHYRgeFTndkQ8HmER33g60EcB/ECcYBd6wWSkDErFUs5Mms4HRK1SIwA7",includes:"Button Slider Combobox Select Checkbox RadioButton Switch ToggleButton MediaPlayer".split(" ")},$DELITESection_Containers:{id:"delite",name:"Containers",iconBase64:"data:image/gif;base64,R0lGODlhEAAQALMAAN7e4oyMjtXV1sDAwf///+Dg4MvLyzMzM////wAAAAAAAAAAAAAAAAAAAAAAAAAAACH5BAEAAAgALAAAAAAQABAAAAQ3EMlJq704a3RO2NIhBIexHYRgeFTndkQ8HmER33g60EcB/ECcYBd6wWSkDErFUs5Mms4HRK1SIwA7",
includes:["ViewStack","Panel","TabBar","Accordion"]},$DELITESection_States:{id:"delite",name:"States",iconBase64:"data:image/gif;base64,R0lGODlhEAAQALMAAN7e4oyMjtXV1sDAwf///+Dg4MvLyzMzM////wAAAAAAAAAAAAAAAAAAAAAAAAAAACH5BAEAAAgALAAAAAAQABAAAAQ3EMlJq704a3RO2NIhBIexHYRgeFTndkQ8HmER33g60EcB/ECcYBd6wWSkDErFUs5Mms4HRK1SIwA7",includes:["CSSState"]},$DELITESection:{id:"delite",name:"Deliteful",iconBase64:"data:image/gif;base64,R0lGODlhEAAQAKIAAFhYWtXV1v///0BAQP///wAAAAAAAAAAACH5BAEAAAQALAAAAAAQABAAAAMuSLo0w5CNIF6EM9grN2+Z82WCEGjcVJbopa5tlJ2nh4W2XH9LyCu+X/AHAPyOCQA7",
subsections:["$DELITESection_Controls","$DELITESection_Containers"],includes:[]},$StatesSection:{id:"States",name:"States",iconBase64:"data:image/gif;base64,R0lGODlhEAAQAKIAAL+/v5aWlmNjYzMzMxwcHBYWFv///wAAACH5BAEAAAYALAAAAAAQABAAAAMgaLrc/jBKFsBcg9g7iuaFZwlhaZrD1Ikqq35Xdc10PScAOw\x3d\x3d",includes:["CSS","Style"]}},_COMMENT11_:"Should have one each for mobile, desktop, sketchhifi, sketchlofi",_COMMENT12_:"For each preset, collections is list of each widget collection in order of precedence",_COMMENT13_:"and sections is the array of sections for this preset (or $desktopSections)",
presets:{mobile:{collections:[{id:"html",show:!0},{id:"clipart",show:!0},{id:"shapes",show:!0}],sections:"$mobileSections"},desktop:{collections:[{id:"html",show:!0},{id:"clipart",show:!0},{id:"xblox",show:!0},{id:"shapes",show:!0},{id:"delite",show:!0}],sections:"$desktopSections"},delite:{collections:[{id:"html",show:!0},{id:"xblox",show:!0},{id:"delite",show:!0},{id:"shapes",show:!0},{id:"clipart",show:!0}],sections:"$deliteSections"},sketchhifi:{collections:[{id:"shapes",show:!0},{id:"clipart",
show:!1}],sections:"$sketchSections",exclude:"$sketchExcludes"},sketchlofi:{collections:[{id:"shapes",show:!0},{id:"clipart",show:!1},{id:"html",show:!0}],sections:"$sketchSections",exclude:"$sketchExcludes"},$ALLMOBILE:{_COMMENT1_:"$ALLMOBILE is a special preset which shows all widgets",_COMMENT2_:"regardless of the current composition type",_COMMENT3_:"ranking mobile widgets above desktop widgets",collections:[],sections:"$ALLMOBILE_Sections"},$ALLDESKTOP:{_COMMENT1_:"$ALLDESKTOP is a special preset which shows all widgets",
_COMMENT2_:"regardless of the current composition type",_COMMENT3_:"ranking desktop widgets above mobile widgets",collections:[{id:"html",show:!0},{id:"clipart",show:!0},{id:"xblox",show:!0},{id:"shapes",show:!0}],sections:"$ALLDESKTOP_Sections"},$ALLDELITE:{_COMMENT1_:"$ALLDESKTOP is a special preset which shows all widgets",_COMMENT2_:"regardless of the current composition type",_COMMENT3_:"ranking desktop widgets above mobile widgets",collections:[{id:"html",show:!0},{id:"clipart",show:!0},{id:"xblox",
show:!0},{id:"shapes",show:!0},{id:"delite",show:!0}],sections:"$ALLDELITE_Sections"}}}:this._initializationInfo[a]},getDefaultThemeSet:function(){return this.getSiteConfigData("defaultThemeSet")},getUserDisplayName:function(a){a||(a=this.getUser());var h=a.userDisplayName;a.userDisplayName||(h=a.email);return h},getUserEmail:function(a){a||(a=this.getUser());return a.email},getUserDisplayNamePlusEmail:function(a){a||(a=this.getUser());var h=this.getUserDisplayName(a);h!=a.email&&(h+=" \x26lt;"+a.email+
"\x26gt;");return h},loadPlugins:function(){n.forEach(function(b){var h=b.id;a.plugins[h]=b;for(var g in b){var c=b[g];"string"!=typeof c&&(c instanceof Array?c.forEach(function(c){a._addExtension(g,c,h)}):a._addExtension(g,c,h))}})},singleUserMode:function(){return a.isLocalInstall},_stripMaqetta:!0,location:function(){var a=document.location.href.split("?")[0],a=a.replace("index.php",""),a=a.replace("maqetta.html",""),a=a.replace("xui.php",""),a=a.replace("xui.php?debug\x3dtrue",""),a=a.replace("maqettar.html",
""),a=a.replace("index.html",""),a=a.replace("?",""),a=a.replace("debug\x3dtrue",""),a=a.replace("\x26isDesktop\x3dtrue","");this._stripMaqetta&&(a=a.replace("maqetta/",""));return a},getUserWorkspaceUrl:function(){if(this.userBaseUrl)return this.userBaseUrl},run:function(){dojo.isMac&&dojo.addClass(document.documentElement,"isMac");var b=document.body.style;a.supportsCSS3Transitions=void 0!==b.WebkitTransition||void 0!==b.MozTransition||void 0!==b.OTransition||void 0!==b.transition;a.subscribe("/davinci/ui/selectionChanged",
a._selectionChanged);dojo.connect(dojo.doc.documentElement,"onkeypress",function(a){8==a.charOrCode&&(window.davinciBackspaceKeyTime=Date.now())});dojo.connect(dojo.doc.documentElement,"onkeydown",this,"_handleGlobalDocumentKeyEvent");dojo.addOnUnload(function(a){for(var g=null,c=davinci.Workbench&&davinci.Workbench.editorTabs?davinci.Workbench.editorTabs.getChildren():[],h=0,b=0;b<c.length;b++){var m=c[b];m.editor&&(m=m.editor.getOnUnloadWarningMessage())&&(g||(g=m),h++)}1<h&&(g=dojo.string.substitute(p.multipleFilesUnsaved,
[g,h]));!g&&100>Date.now()-window.davinciBackspaceKeyTime&&(g=p.careful);if(g){if(a=a||window.event)a.returnValue=g;return g}})},subscribe:function(b,h){a.subscriptions.push(dojo.subscribe(b,this,h))},destroy:function(){dojo.forEach(a.subscriptions,dojo.unsubscribe)},_addExtension:function(b,h,g){h.id&&(h.id=g+"."+h.id);a.extensionPoints[b]=a.extensionPoints[b]||[];g=a.extensionPoints[b];g.push(h);a.extensionPoints[b]=g},getExtensions:function(b,h){b=a.extensionPoints[b];if(h){var g=h instanceof Function;
if(b)return b.filter(function(c){return g&&h(c)||c.id==h})}return b},getExtension:function(b,h){return a.getExtensions(b,h)[0]},handleError:function(b){var h="welcome";a.singleUserMode()&&(h=".");window.document.body.innerHTML=dojo.string.substitute(p.serverConnectError,{redirectUrl:h,error:b})},executeCommand:function(b){(b=a.getExtension("davinci.commands",b))&&b.run&&b.run()},_selectionChanged:function(b){a.currentSelection=b},getSelection:function(){return a.currentSelection},serverJSONRequest:function(a){var h,
g={handleAs:"json"};dojo.mixin(g,a);dojo.xhrGet(g).then(function(c){c&&(h=c)});return h},registerKeyBinding:function(a,h){this._globalKeyBindings||(this._globalKeyBindings=[]);this._globalKeyBindings.push({keyBinding:a,action:h})},handleKeyEvent:function(a){this._handleKeyEvent(a,!0)},_handleGlobalDocumentKeyEvent:function(a){this._handleKeyEvent(a)},_handleKeyEvent:function(b,h){if(this._globalKeyBindings){var g=!1;(g=dojo.some(this._globalKeyBindings,dojo.hitch(this,function(c){if(a.isKeyEqualToEvent(c.keyBinding,
b))return davinci.Workbench._runAction(c.action),!0})))?dojo.stopEvent(b):h||this.currentEditor&&this.currentEditor.handleKeyEvent&&this.currentEditor.handleKeyEvent(b,!0)}},isKeyEqualToEvent:function(a,h){var g=!0,c=h.altKey&&!dojo.isMac||dojo.isMac&&h.ctrlKey;!!a.accel!==(h.ctrlKey&&!dojo.isMac||dojo.isMac&&h.metaKey)&&(g=!1);!!a.meta!==c&&(g=!1);!!a.shift!==h.shiftKey&&(g=!1);g&&a.charOrCode&&h.which&&(g=dojo.isArray(a.charOrCode)?dojo.some(a.charOrCode,dojo.hitch(this,function(c){return this._comparecharOrCode(c,
h)})):this._comparecharOrCode(a.charOrCode,h));return g},_comparecharOrCode:function(a,h){return dojo.isString(a)?a.toLowerCase()===String.fromCharCode(h.which).toLowerCase():a===h.which}};return a})},"davinci/lang/webContent":function(){define([],function(){return{designer:"Designer,",welcome:"Welcome",loadingMaqetta:"\x26nbsp;Loading Maqetta...",startupError:"Error starting Maqetta: ${0}",logOff:"Log Out",unsupportedBrowser:"Unsupported Browser",unsupportedNote:'Maqetta supports Firefox 4, Chrome 5, and Safari 5.1 or greater. If you wish to continue with an unsupported browser, click "Continue."',
buttonContinue:"Continue",pageDesignerTitle:"Maqetta Designer",maqettaUser:"Maqetta User",localhostUser:"localhost user",sessionTimedOut:"Session timed out",sessionTimedOutMsg:"The session has timed out, please \x3ca href\x3d'${hrefLoc}'\x3elog in\x3c/a\x3e again. (Auto-redirect within 10 seconds)",devicePreviewError:"Maqetta device previewer error. Must supply URL parameter 'file\x3d'",devicePreviewPreviewing:"Previewing:",help:"Help",tutorials:"Tutorials",aboutMaqetta:"About Maqetta",review:"Review and Commenting,",
reviewPageTitle:"Maqetta Review Board",careful:"Warning: You are about to leave Maqetta.",errorLoadingPlugin:"error loading plugin ${0}, response\x3d${1}",errorLoadingPlugins:"error loading plugins",multipleFilesUnsaved:"${0} (NOTE: This is one of ${1} files with unsaved changes.)",idleSessionMessage:"Your session will timeout in ${seconds} seconds, click anywhere in the page to continue using Maqetta.",fileHasUnsavedChanges:"Save changes to ${0}?",perspectiveNotFound:"perspective not found: ${0}",
scopeNotDefined:"scope not defined for action: ${0}",funcNotDefined:"function not defined for action: ${0}",serverConnectError:"\x3ch3\x3eError connecting to the Maqetta Server.\x3c/h3\x3e\x3cbr\x3e\x3cdiv\x3ePlease click here to \x3ca href\x3d'${redirectUrl}'\x3ereturn to Maqetta\x3c/a\x3e\x3cdiv\x3e\x3cdiv\x3eError description: ${error}\x3c/div\x3e"}})},"davinci/commands/CommandStack":function(){define(["dojo/_base/declare"],function(p){return p("davinci.commands.CommandStack",null,{constructor:function(k){this._context=
k;this._undoStack=[];this._redoStack=[]},execute:function(k,f){if(k&&(f=this._context&&"davinci.ve.themeEditor.Context"!=this._context.declaredClass?dojo.withDoc(this._context.getDocument(),"execute",k,[this._context,f]):k.execute(f),this._undoStack.push(k),this._redoStack=[],!f))this.onExecute(k,"execute")},undo:function(){if(this.canUndo()){var k=this._undoStack.pop();k._runDelegate?k._runDelegate.undoDelegate(k):this._context&&"davinci.ve.themeEditor.Context"!=this._context.declaredClass?dojo.withDoc(this._context.getDocument(),
"undo",k):k.undo();this._redoStack.push(k);this.onExecute(k,"undo")}},redo:function(){if(this.canRedo()){var k=this._redoStack.pop();k._runDelegate?k._runDelegate.redoDelegate(k):this._context&&"davinci.ve.themeEditor.Context"!=this._context.declaredClass?dojo.withDoc(this._context.getDocument(),"execute",k):k.execute();this._undoStack.push(k);this.onExecute(k,"redo")}},canUndo:function(){return 0<this._undoStack.length},canRedo:function(){return 0<this._redoStack.length},getUndoCount:function(){return this._undoStack.length},
getRedoCount:function(){return this._redoStack.length},clear:function(){this._undoStack=[];this._redoStack=[]},jump:function(k,f){var e=this.getUndoCount(),b=this.getRedoCount();if(k==e)return k;if(0>k||k>e+b)return-1;e=k-e;if(f)if(0>e)for(;0>e;)this._redoStack.push(this._undoStack.pop()),e++;else for(;0<e;)this._undoStack.push(this._redoStack.pop()),e--;else if(0>e)for(;0>e;)this.undo(),e++;else for(;0<e;)this.redo(),e--;return k},onExecute:function(k,f){},undoDelegate:function(k){},redoDelegate:function(k){}})})},
"davinci/ui.plugin":function(){define(["require"],function(p){return{id:"davinci.ui","davinci.view":[{id:"navigator",title:"Files",viewClass:"davinci/workbench/Explorer",iconClass:"paletteIcon paletteIconFiles"},{id:"hierarchy",title:"Hierarchy"},{id:"devices",title:"Devices",viewClass:"davinci/workbench/DeviceTreeView",iconClass:"paletteIcon paletteIconOutline"},{id:"files",title:"XFiles",viewClass:"davinci/workbench/FileView",iconClass:"paletteIcon paletteIconOutline"},{id:"comment",title:"Comments",
viewClass:"davinci/review/view/CommentView",iconClass:"paletteIcon paletteIconComments"},{id:"scope",title:"Scope"},{id:"properties",title:"Properties",viewClass:"davinci/workbench/PropertyEditor"},{id:"console",title:"Console"},{id:"history",title:"History"},{id:"search",title:"Search"}],"davinci.preferences":[{name:"Project",id:"project",hide:!0,category:"",pageContent:"Project Settings here"},{name:"Project Settings",id:"ProjectPrefs",category:"davinci.ui.project",pane:"davinci/ui/ProjectPreferences",
defaultValues:{webContentFolder:"",themeFolder:"themes",widgetFolder:"lib/custom"}}],"davinci.perspective":{id:"main",title:"AJAX IDE",views:[{viewID:"davinci.ui.navigator",position:"left-bottom"},{viewID:"davinci.ui.outline",position:"right"},{viewID:"davinci.ui.properties",position:"right-bottom"}]},"davinci.actionSets":[{id:"editorActions",visible:!0,menu:[],actions:[]},{id:"main",visible:!0,menu:[{__mainMenu:!0,separator:["usersettings",!1,"settings",!1,"additions",!1,"help",!1]},{label:"User settings",
path:"usersettings",id:"davinci.usersettings",className:"userSettingsMenu",iconClass:"userSettingsMenuIcon",showLabel:!1,separator:["username",!0,"logout",!0,"additions",!1]},{label:"Settings",path:"settings",id:"davinci.settings",className:"appSettingsMenu",iconClass:"appSettingsMenuIcon",showLabel:!1,separator:["settings",!0,"additions",!1]}],actions:[{id:"editPreferences",run:function(){p(["davinci/workbench/Preferences"],function(k){k.showPreferencePage()})},label:"Preferences...",menubarPath:"davinci.settings/settings"}]},
{id:"explorerActions",visible:!0,actions:[{id:"davinci.ui.rename",label:"Rename...",iconClass:"renameIcon",run:function(){p(["./ui/Resource"],function(k){k.renameAction()})},isEnabled:function(k){return p("./ui/Resource").canModify(k)},menubarPath:"addFiles"},{id:"davinci.ui.delete",label:"Delete",iconClass:"deleteIcon",isEnabled:function(k){return p("./ui/Resource").canModify(k)},run:function(){p(["./ui/Resource"],function(k){k.deleteAction()})},menubarPath:"delete",keyBinding:{charOrCode:[dojo.keys.DELETE,
dojo.keys.BACKSPACE]}},{id:"davinci.ui.download",label:"Download",iconClass:"downloadSomeIcon",action:"davinci/actions/DownloadAction",isEnabled:function(k){return p("./ui/Resource").canModify(k)},menubarPath:"delete"}]}],"davinci.actionSetPartAssociations":[{targetID:"davinci.ui.editorActions",parts:["davinci.ui.editorMenuBar"]},{targetID:"davinci.ui.explorerActions",parts:["davinci.ui.navigator"]}],"davinci.viewActions":[{viewContribution:{targetID:"davinci.ui.problems",actions:[{id:"Copy2",iconClass:"copyIcon",
run:function(){alert("view toolbar")},label:"Copy",toolbarPath:"davinci.toolbar.main/edit",menubarPath:"davinci.edit/cut"}]}},{viewContribution:{targetID:"workbench.Explorer",actions:[{id:"davinci.ui.newfile",label:"New folder...",iconClass:"newFolderIcon",className:"FilesToolbarNewFolder",run:function(){p(["./ui/Resource"],function(k){k.newFolder()})},toolbarPath:"download"},{id:"davinci.ui.deletefile",label:"Delete file...",iconClass:"FilesToolbarDeleteFileIcon",className:"FilesToolbarDeleteFile",
run:function(){p(["./ui/Resource"],function(k){k.deleteAction()})},toolbarPath:"download"},{id:"davinci.ui.renamefile",label:"Rename file...",iconClass:"FilesToolbarRenameFileIcon",className:"FilesToolbarRenameFile",run:function(){p(["./ui/Resource"],function(k){k.renameAction()})},toolbarPath:"download"},{id:"download",iconClass:"downloadSomeIcon",className:"FilesToolbarDownloadSelected",run:function(){p(["./Workbench","./ui/DownloadSelected"],function(k,f){k.showModal(new f,"Download",{width:440})})},
label:"Download Selected Files",toolbarPath:"download"},{id:"download",iconClass:"downloadAllIcon",className:"FilesToolbarDownloadAll",run:function(){p(["./Workbench","./ui/Download"],function(k,f){k.showModal(new f,"Download",{width:440})})},label:"Download Entire Project",toolbarPath:"download"}]}}]}})},"davinci/html/html.plugin":function(){define(["require"],function(p){return{id:"davinci.html","davinci.editor":[{id:"HTMLEditor",name:"HTML Editor",extensions:"html",isDefault:!1,editorClass:"davinci/html/ui/HTMLEditor",
palettePerspective:"davinci.html.htmlEditor",expandPalettes:["left"]},{id:"CSSEditor",name:"CSS Editor",extensions:"css",isDefault:!1,editorClass:"davinci/html/ui/CSSEditor",palettePerspective:"davinci.html.htmlEditor",expandPalettes:["left"]},{id:"ImageViewer",name:"Image Viewer",extensions:"jpg,gif,jpeg,png",isDefault:!0,editorClass:"davinci/html/ui/ImageViewer",palettePerspective:"davinci.html.htmlEditor",expandPalettes:["left"]}],"davinci.editorActions":{editorContribution:{targetID:"davinci.html.CSSEditor",
actions:[{id:"savecombo",className:"maqLabelButton",showLabel:!0,label:"Save",toolbarPath:"save",type:"ComboButton",run:function(){p(["../Workbench"],function(k){p("../ui/Resource").save()})},isEnabled:function(k){return p("../Workbench").getOpenEditor()},menu:[{iconClass:"saveIcon",run:function(){p("../ui/Resource").save()},isEnabled:function(k){return p("../Workbench").getOpenEditor()},label:"Save",keyBinding:{accel:!0,charOrCode:"s",allowGlobal:!0}},{iconClass:"saveAsIcon",run:function(){p("../ui/Resource").saveAs("html")},
isEnabled:function(k){return p("../Workbench").getOpenEditor()},label:"Save As",keyBinding:{accel:!0,shift:!0,charOrCode:"s",allowGlobal:!0}}]}]}},"davinci.preferences":[{name:"HTML",id:"general",category:""}],"davinci.fileType":[{extension:"html",iconClass:"htmlFileIcon",type:"text"},{extension:"css",iconClass:"cssFileIcon",type:"text"},{extension:"jpeg",iconClass:"imageFileIcon",type:"image"},{extension:"jpg",iconClass:"imageFileIcon",type:"image"},{extension:"png",iconClass:"imageFileIcon",type:"image"},
{extension:"gif",iconClass:"imageFileIcon",type:"image"}],"davinci.perspective":[{id:"htmlEditor",title:"HTML Editor",views:[{viewID:"davinci.ve.Palette",position:"left",hidden:!0},{viewID:"davinci.ui.outline",position:"left",hidden:!0},{viewID:"davinci.ve.style",position:"right"},{viewID:"davinci.ui.comment",position:"right",hidden:!0},{viewID:"davinci.ve.states",position:"right-bottom",hidden:!0},{viewID:"davinci.ui.navigator",position:"left-bottom",selected:!0},{viewID:"davinci.review.reviewNavigator",
position:"left"}]}]}})},"davinci/js/js.plugin":function(){define(["require"],function(p){return{id:"davinci.js","davinci.editor":[{id:"JSEditor",name:"JavaScript Editor",extensions:"js,json",isDefault:!1,editorClass:"davinci/js/ui/JavaScriptEditor",palettePerspective:"davinci.html.htmlEditor",expandPalettes:["left"]},{id:"XIDEEditor",name:"Editor",extensions:"js,json",isDefault:!0,editorClass:"davinci/xide/Editor",palettePerspective:"davinci.html.htmlEditor",expandPalettes:["left"]}],"davinci.actionSets":[{id:"jsSource",
visible:!0,menu:[{label:"Source",path:"edit",id:"davinci.js.source",separator:["commentGroup",!0,"editGroup",!0,"codeGroup",!0,"additions",!1]}],actions:[{id:"davinci.js.comment",icon:null,run:function(){alert("toggle comment")},label:"Toggle Comment",menubarPath:"davinci.js.source/commentGroup"}]},{id:"jsEdit",visible:!0,actions:[{id:"davinci.js.cut",icon:null,label:"cut",commandID:"davinci.js.cut",menubarPath:"davinci.edit/cut"},{id:"davinci.js.add",icon:null,label:"add",commandID:"davinci.js.add",
menubarPath:"davinci.edit/add"},{id:"davinci.js.delete",icon:null,label:"delete",commandID:"davinci.js.delete",menubarPath:"davinci.edit/delete"}]}],"davinci.actionSetPartAssociations":[{targetID:"davinci.js.jsEdit",parts:["davinci.ui.outline","davinci.js.JSEditor"]}],"davinci.editorActions":{editorContribution:{targetID:"davinci.js.JSEditor",actions:[{id:"savecombo",className:"maqLabelButton",showLabel:!0,label:"Save",toolbarPath:"save",type:"ComboButton",run:function(){p(["../Workbench"],function(k){p("../ui/Resource").save()})},
isEnabled:function(k){return p("../Workbench").getOpenEditor()},menu:[{iconClass:"saveIcon",run:function(){p("../ui/Resource").save()},isEnabled:function(k){return p("../Workbench").getOpenEditor()},label:"Save",keyBinding:{accel:!0,charOrCode:"s",allowGlobal:!0}},{iconClass:"saveAsIcon",run:function(){p("../ui/Resource").saveAs("html")},isEnabled:function(k){return p("../Workbench").getOpenEditor()},label:"Save As",keyBinding:{accel:!0,shift:!0,charOrCode:"s",allowGlobal:!0}}]}]}},"davinci.commands":[{id:"cut",
run:function(){}},{id:"add",run:function(){}},{id:"delete",run:function(){}}],"davinci.keyBindings":[{platform:"win",sequence:"M1+C",commandID:"davinci.js.copy",contextID:"davinci.js.JSEditor"}],"davinci.preferences":[{name:"JavaScript",id:"general",category:""},{name:"Formatting",id:"format",category:"davinci.js.general",pane:"davinci/js/ui/FormatOptions",defaultValues:{blockNewLine:!1,blockIndent:3,functionNewLine:!1,functionIndent:5,functionParamSpaceing:1,labelSpace:1,forParamSpacing:0,breakOnLabel:!0,
ifStmtSpacing:0,varAssignmentSpaceing:0,switchSpacing:3,objectLitFieldSpace:1}}],"davinci.fileType":[{extension:"js",iconClass:"jsFileIcon",type:"text"},{extension:"json",iconClass:"jsFileIcon",type:"text"}]}})},"davinci/ve/ve.plugin":function(){define(["require"],function(p){return{id:"davinci.ve","davinci.view":[{id:"Palette",title:"Palette",viewClass:"davinci/ve/palette/HtmlWidgets",iconClass:"paletteIcon paletteIconWidgets"},{id:"states",title:"Scenes",viewClass:"davinci/ve/views/StatesView",
iconClass:"paletteIcon paletteIconStates"},{id:"datastores",title:"DataStores",viewClass:"davinci/ve/views/DataStoresView"},{id:"object",title:"Object",viewClass:"davinci/ve/views/ObjectView"},{id:"style",title:"",viewClass:"davinci/ve/views/SwitchingStyleView"}],"davinci.perspective":[{id:"pageDesign",title:"Page Design",views:[{viewID:"davinci.ve.Palette",position:"left",selected:!0},{viewID:"davinci.ui.outline",position:"left"},{viewID:"davinci.ui.devices",position:"left"},{viewID:"davinci.ui.files",
position:"left"},{viewID:"davinci.ve.style",position:"right"},{viewID:"davinci.ui.comment",position:"right",hidden:!0},{viewID:"davinci.ve.states",position:"right-bottom",selected:!0},{viewID:"davinci.ui.navigator",position:"left-bottom",selected:!0},{viewID:"davinci.review.reviewNavigator",position:"left-bottom"}]}],"davinci.editor":[{id:"HTMLPageEditor",name:"HTML Visual Editor",extensions:["html","htm","php"],isDefault:!0,editorClass:"davinci/ve/PageEditor",palettePerspective:"davinci.ve.pageDesign",
expandPalettes:["left"]}],"davinci.actionSets":[{id:"cutCopyPaste",visible:!0,actions:[{label:"Cut",keySequence:"M1+X",iconClass:"editActionIcon editCutIconSmall",action:"davinci/ve/actions/CutAction",menubarPath:"davinci.edit/cut"},{label:"Copy",keySequence:"M1+C",iconClass:"editActionIcon editCopyIconSmall",action:"davinci/ve/actions/CopyAction",menubarPath:"davinci.edit/cut"},{keySequence:"M1+V",iconClass:"editActionIcon editPasteIconSmall",label:"Paste",action:"davinci/ve/actions/PasteAction",
menubarPath:"davinci.edit/cut"},{keySequence:"DEL",iconClass:"editActionIcon editDeleteIconSmall",label:"Delete",action:"davinci/ve/actions/DeleteAction",menubarPath:"davinci.edit/cut"},{iconClass:"fa-crosshairs",label:"Show in Outline",action:"davinci/ve/actions/ShowInOutline",menubarPath:"davinci.edit/cut"},{iconClass:"editActionIcon selectParentIconSmall",label:"Select parent",action:"davinci/ve/actions/SelectParentAction",menubarPath:"davinci.edit/cut"},{iconClass:"editActionIcon selectAncestorIconSmall",
label:"Select ancestor...",action:"davinci/ve/actions/SelectAncestorAction",menubarPath:"davinci.edit/cut"},{iconClass:"editActionIcon unselectAllIconSmall",label:"Unselect all",action:"davinci/ve/actions/UnselectAllAction",menubarPath:"davinci.edit/cut"},{iconClass:"editActionIcon",label:"Surround with \x26lt;A\x26gt;",action:"davinci/ve/actions/SurroundAction",surroundWithTagName:"a",menubarPath:"davinci.edit/cut"},{iconClass:"editActionIcon",label:"Surround with \x26lt;DIV\x26gt;",action:"davinci/ve/actions/SurroundAction",
surroundWithTagName:"div",menubarPath:"davinci.edit/cut"},{iconClass:"editActionIcon",label:"Surround with \x26lt;SPAN\x26gt;",action:"davinci/ve/actions/SurroundAction",surroundWithTagName:"span",menubarPath:"davinci.edit/cut"},{iconClass:"editActionIcon moveToFrontIconSmall",label:"Move to front",action:"davinci/ve/actions/MoveToFrontAction",menubarPath:"davinci.edit/cut"},{iconClass:"editActionIcon moveForwardIconSmall",label:"Move forward",action:"davinci/ve/actions/MoveForwardAction",menubarPath:"davinci.edit/cut"},
{iconClass:"editActionIcon moveBackwardIconSmall",label:"Move backward",action:"davinci/ve/actions/MoveBackwardAction",menubarPath:"davinci.edit/cut"},{iconClass:"editActionIcon moveToBackIconSmall",label:"Move to back",action:"davinci/ve/actions/MoveToBackAction",menubarPath:"davinci.edit/cut"}]}],"davinci.viewActions":[{viewContribution:{targetID:"davinci.ve.outline",actions:[{id:"design",iconClass:"designModeIcon editActionIcon",radioGroup:"displayMode",method:"switchDisplayMode",label:"Widgets",
toolbarPath:"displayMode"},{id:"source",iconClass:"sourceModeIcon editActionIcon",method:"switchDisplayMode",radioGroup:"displayMode",label:"Source",toolbarPath:"displayMode"}]}},{viewContribution:{targetID:"davinci.ve.states",actions:[{id:"addState",iconClass:"viewActionIcon addStateIcon",action:"davinci/ve/actions/AddState",label:"Add state",toolbarPath:"states1"},{id:"removeState",iconClass:"viewActionIcon removeStateIcon",action:"davinci/ve/actions/RemoveState",label:"Remove state",toolbarPath:"states1"},
{id:"modifyState",iconClass:"viewActionIcon modifyStateIcon",action:"davinci/ve/actions/ModifyState",label:"Modify state",toolbarPath:"states1"},{id:"NewWidgetsCurrentState",className:"newWidgetsCurrentStateButton",iconClass:"viewActionIcon newWidgetsCurrentStateIcon",action:"davinci/ve/actions/NewWidgetsCurrentState",label:"Toggle whether new widgets go to Background or current state",toolbarPath:"states2"},{id:"highlightBaseWidgets",className:"highlightBaseWidgetsButton",iconClass:"viewActionIcon highlightBaseWidgetsIcon",
action:"davinci/ve/actions/HighlightBaseWidgets",label:"When in custom state, highlight widgets from Background state",toolbarPath:"states2"}]}}],"davinci.actionSetPartAssociations":[{targetID:"davinci.ve.cutCopyPaste",parts:["davinci.ve.visualEditor","davinci.ve.VisualEditorOutline"]}],"davinci.editorActions":{editorContribution:{targetID:"davinci.ve.HTMLPageEditor",actions:[{id:"savecombo",className:"maqLabelButton",showLabel:!0,label:"Save",toolbarPath:"save",type:"ComboButton",run:function(){p(["../Workbench"],
function(k){p("../ui/Resource").save()})},isEnabled:function(k){return p("../Workbench").getOpenEditor()},menu:[{iconClass:"saveIcon",run:function(){p("../ui/Resource").save()},isEnabled:function(k){return p("../Workbench").getOpenEditor()},label:"Save",keyBinding:{accel:!0,charOrCode:"s",allowGlobal:!0}},{iconClass:"saveAsIcon",run:function(){p("../ui/Resource").saveAs("html")},isEnabled:function(k){return p("../Workbench").getOpenEditor()},label:"Save As",keyBinding:{accel:!0,shift:!0,charOrCode:"s",
allowGlobal:!0}}]},{id:"undo",iconClass:"editActionIcon undoIcon",action:"davinci/actions/UndoAction",label:"Undo",toolbarPath:"undoredo",keyBinding:{accel:!0,charOrCode:"z"},command:"Edit/Undo"},{id:"redo",iconClass:"editActionIcon redoIcon",action:"davinci/actions/RedoAction",label:"Redo",toolbarPath:"undoredo",keyBinding:{accel:!0,shift:!0,charOrCode:"z"},command:"Edit/Redo"},{id:"cut",label:"Cut",iconClass:"editActionIcon editCutIcon",action:"davinci/ve/actions/CutAction",toolbarPath:"cutcopypaste",
keyBinding:{accel:!0,charOrCode:"x"}},{id:"copy",label:"Copy",iconClass:"editActionIcon editCopyIcon",action:"davinci/ve/actions/CopyAction",toolbarPath:"cutcopypaste",keyBinding:{accel:!0,charOrCode:"c"}},{id:"paste",label:"Paste",iconClass:"editActionIcon editPasteIcon",action:"davinci/ve/actions/PasteAction",toolbarPath:"cutcopypaste",keyBinding:{accel:!0,charOrCode:"v"}},{id:"delete",iconClass:"editActionIcon editDeleteIcon",label:"Delete",action:"davinci/ve/actions/DeleteAction",toolbarPath:"delete",
keyBinding:{charOrCode:[dojo.keys.DELETE,dojo.keys.BACKSPACE]}},{id:"outline",iconClass:"fa-crosshairs",label:"Show in Outline",action:"davinci/ve/actions/ShowInOutline",toolbarPath:"outline"},{id:"openBrowser",iconClass:"text-success fa-play",className:"davinciFloatRight openBrowser",run:function(){p(["../Workbench"],function(k){(k=k.getOpenEditor())&&k.resourceFile?k.previewInBrowser():console.error("ERROR. Cannot launch browser window. No editor info.")})},label:"Preview in Browser",toolbarPath:"undoredo",
iconClass:"text-success fa-play",keyBinding:{accel:!0,charOrCode:"0",allowGlobal:!0},command:"File/Open In Browser",group:"File",tab:"Home"},{id:"documentSettings",iconClass:"documentSettingsIcon",className:"documentSettings davinciFloatRight",label:"Document settings",toolbarPath:"undoredo",type:"DropDownButton",menu:[{iconClass:"editActionIcon",label:"Select parent",action:"davinci/ve/actions/SelectParentAction",command:"Widget/Select/SelectParent",group:"Widget"},{iconClass:"editActionIcon",label:"Select ancestor",
action:"davinci/ve/actions/SelectAncestorAction",command:"Widget/Select/SelectAnchestor",group:"Widget"},{iconClass:"editActionIcon",label:"Unselect all",action:"davinci/ve/actions/UnselectAllAction"},{iconClass:"editActionIcon moveToFrontIconSmall",label:"Move to front",action:"davinci/ve/actions/MoveToFrontAction",command:"Widget/Move/MoveToFront",group:"Widget"},{iconClass:"editActionIcon moveForwardIconSmall",label:"Move forward",action:"davinci/ve/actions/MoveForwardAction",command:"Widget/Move/MoveToForward",
group:"Widget"},{iconClass:"editActionIcon moveBackwardIconSmall",label:"Move backward",action:"davinci/ve/actions/MoveBackwardAction",command:"Widget/Move/MoveToBackward",group:"Widget"},{iconClass:"editActionIcon moveToBackIconSmall",label:"Move to back",action:"davinci/ve/actions/MoveToBackAction",command:"Widget/Move/MoveToBack",group:"Widget"},{iconClass:"editActionIcon",label:"Surround with \x26lt;A\x26gt;",action:"davinci/ve/actions/SurroundAction",surroundWithTagName:"a",command:"Widget/SourroundWithA",
group:"Widget",tab:"Tools"},{iconClass:"editActionIcon",label:"Surround with \x26lt;DIV\x26gt;",action:"davinci/ve/actions/SurroundAction",surroundWithTagName:"div",command:"Widget/SourroundWithDIV",group:"Widget",tab:"Tools"},{iconClass:"editActionIcon",label:"Surround with \x26lt;SPAN\x26gt;",action:"davinci/ve/actions/SurroundAction",surroundWithTagName:"span",command:"Widget/SourroundWithSPAN",group:"Widget",tab:"Tools"}]},{id:"layout",className:"maqLabelButton davinciFloatRight maqLayoutDropDownButton",
showLabel:!0,label:"Flow",toolbarPath:"undoredo",type:"DropDownButton",menu:[{label:"Flow",iconClass:"flowLayoutIcon",method:"selectLayoutFlow"},{label:"Absolute",iconClass:"absoluteLayoutIcon",method:"selectLayoutAbsolute"}]},{id:"closeactiveeditor",run:function(){p(["../Workbench"],function(k){k.closeActiveEditor()})},keyBinding:{accel:!0,shift:!0,charOrCode:"w",allowGlobal:!0}},{id:"showWidgetsPalette",run:function(){var k=dijit.byId("davinci.ve.Palette");if(k){var f=k.getParent();f&&f.selectChild(k)}},
keyBinding:{meta:!0,charOrCode:"p",allowGlobal:!0}}]}},"davinci.preferences":[{name:"Visual Editor",id:"editorPrefs",category:"davinci.html.general",pane:"davinci/ve/prefs/HTMLEditPreferences",defaultValues:{flowLayout:!1,snap:!0,showPossibleParents:!0,cssOverrideWarn:!0,absoluteWidgetsZindex:900,widgetPaletteLayout:"icons"}}],"davinci.dnd":[{parts:["davinci.ui.navigator"],dragSource:function(k){if("File"==k.elementType)return/gif|jpeg|jpg|png|svg|json/i.test(k.getExtension())},dragHandler:"davinci/ve/palette/ImageDragSource"}],
"davinci.fileType":[{extension:"theme",iconClass:"themeFileIcon",type:"text"}],"davinci.defaultEditorActions":{editorContribution:{actions:[{id:"save",run:function(){p("../Workbench").getOpenEditor().save()},isEnabled:function(k){return!0},className:"maqLabelButton",showLabel:!0,label:"Save",toolbarPath:"save",keyBinding:{accel:!0,charOrCode:"s"}},{id:"undo",iconClass:"editActionIcon undoIcon",action:"davinci/actions/UndoAction",label:"Undo",toolbarPath:"undoredo",keyBinding:{accel:!0,charOrCode:"z"}},
{id:"redo",iconClass:"editActionIcon redoIcon",action:"davinci/actions/RedoAction",label:"Redo",toolbarPath:"undoredo",keyBinding:{accel:!0,shift:!0,charOrCode:"z"}}]}}}})},"davinci/model/Path":function(){define(["dojo/_base/declare"],function(p){"undefined"===typeof davinci.model&&(davinci.model={});"undefined"===typeof davinci.model.Path&&(davinci.model.Path={});var k=p("davinci.model.Path",null,{constructor:function(f,e,b){f=f||".";"string"==typeof f?(this.path=f,this.getSegments()):(this.segments=
f,this.hasLeading=e,this.hasTrailing=b)},endsWith:function(f){var e=dojo.clone(this.segments);for(f=(new k(f)).getSegments();0<f.length&&0<e.length;)if(f.pop()!=e.pop())return!1;return!0},getExtension:function(){this.extension||(this.extension=this.path.substr(this.path.lastIndexOf(".")+1));return this.extension},segment:function(f){var e=this.getSegments();return e.length<f?null:e[f]},getSegments:function(){if(!this.segments){var f=this.path;this.segments=f.split("/");"/"==f.charAt(0)&&(this.hasLeading=
!0);"/"==f.charAt(f.length-1)&&(this.hasTrailing=!0,this.segments.pop());this._canonicalize()}return this.segments},isAbsolute:function(){return this.hasLeading},getParentPath:function(){if(!this._parentPath){var f=dojo.clone(this.segments);f.pop();this._parentPath=new k(f,this.hasLeading)}return dojo.clone(this._parentPath)},_clone:function(){return new k(dojo.clone(this.segments),this.hasLeading,this.hasTrailing)},append:function(f){f=f||"";"string"==typeof f&&(f=new k(f));if(f.isAbsolute())return f;
var e=this.segments,b=f.getSegments(),e=e.concat(b);f=new k(e,this.hasLeading,f.hasTrailing);".."!=b[0]&&"."!=b[0]||f._canonicalize();return f},toString:function(){var f=[];this.hasLeading&&f.push("/");for(var e=0;e<this.segments.length;e++)0<e&&f.push("/"),f.push(this.segments[e]);this.hasTrailing&&f.push("/");return f.join("")},removeRelative:function(){var f=this.getSegments();return 0<f.length&&"."==f[1]?this.removeFirstSegments(1):this},relativeTo:function(f,e){"string"==typeof f&&(f=new k(f));
var b=this.segments;if(this.isAbsolute())return this;var d=f.getSegments();f=this.matchingFirstSegments(f);d=d.length;e&&--d;e=d-f;if(0==e+b.length-f)return davinci.model.Path.EMPTY;for(var d=[],n=0;n<e;n++)d.push("..");for(n=f;n<b.length;n++)d.push(b[n]);return new k(d,!1,this.hasTrailing)},startsWith:function(f){var e=this.matchingFirstSegments(f);return f._length()==e},_length:function(f){return this.segments.length},matchingFirstSegments:function(f){var e=this.segments;f=f.getSegments();for(var b=
Math.min(e.length,f.length),d=0,n=0;n<b&&e[n]==f[n];n++)d++;return d},removeFirstSegments:function(f){return new k(this.segments.slice(f,this.segments.length),this.hasLeading,this.hasTrailing)},removeMatchingLastSegments:function(f){f=this.matchingFirstSegments(f);return this.removeLastSegments(f)},removeMatchingFirstSegments:function(f){f=this.matchingFirstSegments(f);return this._clone().removeFirstSegments(f)},removeLastSegments:function(f){f||(f=1);return new k(this.segments.slice(0,this.segments.length-
f),this.hasLeading,this.hasTrailing)},lastSegment:function(){return this.segments[this.segments.length-1]},firstSegment:function(f){return this.segments[f||0]},equals:function(f){if(this.segments.length!=f.segments.length)return!1;for(var e=0;e<this.segments.length;e++)if(f.segments[e]!=this.segments[e])return!1;return!0},_canonicalize:function(){for(var f,e=this.segments,b=0;b<e.length;b++)if("."==e[b]||".."==e[b]){f=!0;break}if(f){f=[];for(b=0;b<e.length;b++)".."==e[b]?0==f.length?this.hasLeading||
f.push(e[b]):".."==f[f.length-1]?f.push(".."):f.pop():"."==e[b]&&1!=this.segments.length||f.push(e[b]);f.length!=e.length&&(this.segments=f)}}});davinci.model.Path.EMPTY=new k("");return k})},"davinci/workbench/Preferences":function(){define("dojo/_base/declare dojo/_base/xhr dojo/_base/lang dojo/topic dojo/dom ../Runtime dijit/_WidgetBase dijit/_TemplatedMixin dijit/_WidgetsInTemplateMixin dijit/registry davinci/ui/Dialog dijit/Tree dijit/tree/ForestStoreModel dojo/data/ItemFileReadStore davinci/lang/workbench dijit/lang/_common dojo/text!davinci/workbench/templates/Preferences.html dijit/form/Button".split(" "),
function(p,k,f,e,b,d,n,a,m,h,g,c,q,A,u,x,z){var B=p([n,a,m],{templateString:z,commonStrings:x,resize:function(){this.borderContainer.resize()}}),w={_allPrefs:{},savePreferences:function(c,g,a){},_loadExtensions:function(){w._extensions||(w._extensions=d.getExtensions("davinci.preferences"))},showPreferencePage:function(){w._loadExtensions();var a=w.getPrefJson();if(a.items)for(var m=a.items.length-1;0<=m;m--){var d=a.items[m];d.hide&&a.items.splice(m,1)}if(!a||1>a.length)alert(u.noUserPref);else{this.dialog=
g.showModal(new B({}),u.preferences,{width:650,height:350});var d=new A({data:a,jsId:"prefTreeDataStore"}),m=new q({jsId:"fileModel",labelAttr:"name",store:d,rootId:"root"}),n=["root"];if(a=a.items){do d=a[0],n.push(d.id),a=d.children;while(a)}var e=h.byId("prefTree");e||(e=new c({model:m,id:"prefTree",persist:!1,query:"{type:'directory'}",label:"Preferences",labelAttr:"name",showRoot:!1,childrenAttrs:"children",openOnClick:!0,autoExpand:!0}));e.onClick=function(c){w.setPaneContent(c)};b.byId("pref.TreePane").appendChild(e.domNode);
e.startup();e.onLoadDeferred.then(function(){e.set("paths",[n]).then(function(){e.focusNode(e.selectedNode);w.setPaneContent(e.selectedItem)})})}},getPrefJson:function(){var c=w._extensions;if(!c)return[];for(var a=[],g=0;g<c.length;g++)c[g]._index=g,c[g].category?(a[c[g].category]||(a[c[g].category]=[]),a[c[g].category].push(c[g])):(a.root||(a.root=[]),a.root.push(c[g]));return{identifier:"id",items:a.root.map(function(c){return{id:c.id,name:c.name,hide:c.hide,index:c._index,children:w._getPrefJsonChildren(c.id,
a)}})}},_getPrefJsonChildren:function(c,g){c=g[c];if(!c)return[];for(var a=[],h=0;h<c.length;h++)a[h]={id:c[h].id,name:c[h].name,index:c[h]._index},g[c[h].id]&&(a[h].children=w._getPrefJsonChildren(c[h].id,g));return a},setPaneContent:function(c){var g;delete w._currentPane;var a=w._extensions[c.index[0]],b=w.getPreferences(a.id,davinci.Workbench.getProject());a.pane?require([a.pane],function(c){c=new c;w._currentPane=c;w._currentPane._extension=a;w._currentPane.setPreferences(b);h.byId("pref.RightPane").setContent(c.domNode)}):
g=a.pageContent?document.createTextNode(a.pageContent):document.createTextNode("");g&&h.byId("pref.RightPane").setContent(g)},_save:function(c){if(w._currentPane){var a=w._currentPane.getPreferences(),g=w._currentPane._extension.id,h=davinci.Workbench.getProject();w.savePreferences(g,h,a);w._currentPane.save&&w._currentPane.save(a)}for(a=0;a<c.length;a++){try{c[a].save&&c[a].save()}catch(E){}c[a].children&&0<c[a].children.length&&w._save(c[a].children)}},save:function(){w._save(w._extensions);w.finish()},
finish:function(){w._extensions=null;w._currentPane=null;this.dialog.destroyRecursive(!1);this.dialog=null},getPreferences:function(c,a){w._allPrefs[a]||(w._allPrefs[a]={});return{version:"1.7",specVersion:"0.8",snap:!0,helper:"maq-metadata-dojo/dojox/mobile/ThemeHelper",themeSets:[{_COMMENT_:"Defines site-specific default theme sets",desktopTheme:"claro",mobileTheme:[{device:"Android",theme:"android"},{device:"BlackBerry",theme:"blackberry"},{device:"iPad",theme:"ipad"},{device:"iPhone",theme:"iphone"},
{device:"other",theme:"iphone"}],name:"site_dojo_default"}]}},getDefaultPreferences:function(c){w._loadExtensions();for(var a=0;a<w._extensions.length;a++)if(w._extensions[a].id==c)return"string"===typeof w._extensions[a].defaultValues?d.serverJSONRequest({url:w._extensions[a].defaultValues,handleAs:"json",sync:!0}).defaultValues:w._extensions[a].defaultValues}};return f.setObject("davinci.workbench.Preferences",w)})},"davinci/ui/Dialog":function(){define("dojo/_base/declare dijit/form/Button dijit/Dialog dojo/dom-geometry dojo/dom-style dojo/_base/connect dojo/window dojo/parser davinci/_common".split(" "),
function(p,k,f,e,b,d,n,a,m){var h=p(f,{contentStyle:null,buildRendering:function(){this.inherited(arguments);dojo.addClass(this.domNode,"resizableDialog");dojo.addClass(this.domNode,"ui-widget-content");this.submitOnEnter&&dojo.addClass(this.domNode,"submitOnEnter")},_setContent:function(a,c){this.inherited(arguments);var g=dojo.doc.createElement("div");this.containerNode.appendChild(g);(g=dojo.query(".dijitDialogPaneContentArea",this.containerNode)[0])?dojo.connect(g,"onkeydown",this,"_onKeyDown"):
dojo.connect(this.domNode,"onkeydown",this,"_onKeyDown")},resize:function(a){if(a){var c=b.getComputedStyle(this.containerNode),c=e.getPadExtents(this.containerNode,c),g=a.w-c.w,h=a.h-c.h,h=h-e.getMarginBox(this.titleBar).h;a=dojo.query(".dijitDialogPaneContentArea",this.containerNode)[0];c=dojo.query(".dijitDialogPaneActionBar",this.containerNode)[0];h-=e.getMarginBox(c).h;g&&dojo.style(a,"width",g+"px");h&&dojo.style(a,"height",h+"px");dojo.forEach(this.getChildren(),dojo.hitch(this,function(c){c.resize&&
c.resize({w:g,h:h})}))}},show:function(){var a=this.inherited(arguments);if(this.contentStyle){if("object"==typeof this.contentStyle){var c={};this.contentStyle.width&&(c.w=parseInt(this.contentStyle.width));this.contentStyle.height&&(c.h=parseInt(this.contentStyle.height));var h=n.getBox(this.ownerDocument);h.w*=this.maxRatio;h.h*=this.maxRatio;c.h>h.h&&(e.position(this.containerNode),c.h=h.h);this.resize(c)}this._size();this._position();dojo.style(this.containerNode,"width","auto");dojo.style(this.containerNode,
"height","auto")}return a},_onKeyDown:function(a){var c=a.ctrlKey&&!dojo.isMac||dojo.isMac&&a.metaKey;a.which==dojo.keys.ENTER&&(c||this.submitOnEnter)&&(a=dojo.query("input[type\x3dsubmit]",this.containerNode),0<a.length&&(a=dijit.getEnclosingWidget(a[0]),c=document.createEvent("MouseEvents"),c.initMouseEvent("click",!0,!0,window,0,0,0,0,0,!1,!1,!1,!1,0,null),a._onClick(c)))}});h._timedDestroy=function(a,c){c&&c.forEach(d.disconnect);var g=d.connect(a,"onHide",function(){d.disconnect(g);a.destroyRecursive()});
a.hide()};h.showModal=function(a,c,b,m,n,e){var g=[];c={title:c,content:a,contentStyle:b,submitOnEnter:n};e&&(c.onShow=e);var q=new h(c);e=dojo.hitch(this,function(){var c=!1;m&&(c=m());c||this._timedDestroy(q,g)});g.push(d.connect(q,"onExecute",a,e));a.onExecute&&g.push(d.connect(a,"onExecute",a,e));g.push(d.connect(a,"onClose",dojo.hitch(this,function(){this._timedDestroy(q,g)})));g.push(d.connect(q,"onCancel",dojo.hitch(this,function(){this._timedDestroy(q,g)})));q.show();return q};h.showMessage=
function(a,c,h,b,m){return this.showDialog({title:a,content:c,style:h,okCallback:b,okLabel:null,hideCancel:!0})};h.showDialog=function(g){var c=g.title,b=g.content,n=g.style,e=g.okCallback,f=g.okLabel,z=g.hideCancel,B=g.submitOnEnter,w=g.extendLabels,r=g.extendCallbacks,v,y=[];g=document.createElement("div");var C=document.createElement("div");dojo.addClass(C,"dijitDialogPaneContentArea");g.appendChild(C);var E=document.createElement("div");dojo.addClass(E,"dijitDialogPaneActionBar");f=new k({label:f?
f:m.ok,type:"submit","class":"maqPrimaryButton"});E.appendChild(f.domNode);var p=dojo.hitch(this,function(){this._timedDestroy(v,y)});if(w&&r&&0<w.length&&w.length===r.length)for(f=0;f<w.length;f++){var D=function(c){if(r[c])r[c]();v.onCancel()}.bind(this,f);E.appendChild((new k({label:w[f],onClick:D,"class":"maqSecondaryButton"})).domNode)}z||E.appendChild((new k({label:m.cancel,onClick:function(){v.onCancel()},"class":"maqSecondaryButton"})).domNode);g.appendChild(E);v=new h({title:c,content:g,
contentStyle:n,submitOnEnter:B});dojo.isString(b)?(C.innerHTML=b,a.parse(C)):b.domNode?C.appendChild(b.domNode):C.appendChild(b);y.push(d.connect(v,"onExecute",dojo.hitch(this,function(){e&&e();p()})));y.push(d.connect(v,"onCancel",dojo.hitch(this,function(){p()})));v.show();return v};return h})},"dojo/window":function(){define("./_base/lang ./sniff ./_base/window ./dom ./dom-geometry ./dom-style ./dom-construct".split(" "),function(p,k,f,e,b,d,n){k.add("rtl-adjust-position-for-verticalScrollBar",
function(a,h){a=f.body(h);h=n.create("div",{style:{overflow:"scroll",overflowX:"visible",direction:"rtl",visibility:"hidden",position:"absolute",left:"0",top:"0",width:"64px",height:"64px"}},a,"last");var g=n.create("div",{style:{overflow:"hidden",direction:"ltr"}},h,"last"),c=0!=b.position(g).x;h.removeChild(g);a.removeChild(h);return c});k.add("position-fixed-support",function(a,h){a=f.body(h);h=n.create("span",{style:{visibility:"hidden",position:"fixed",left:"1px",top:"1px"}},a,"last");var g=
n.create("span",{style:{position:"fixed",left:"0",top:"0"}},h,"last"),c=b.position(g).x!=b.position(h).x;h.removeChild(g);a.removeChild(h);return c});var a={getBox:function(d){d=d||f.doc;var h="BackCompat"==d.compatMode?f.body(d):d.documentElement,g=b.docScroll(d);if(k("touch")){var c=a.get(d);d=c.innerWidth||h.clientWidth;h=c.innerHeight||h.clientHeight}else d=h.clientWidth,h=h.clientHeight;return{l:g.x,t:g.y,w:d,h:h}},get:function(b){if(9>k("ie")&&a!==document.parentWindow){b.parentWindow.execScript("document._parentWindow \x3d window;",
"Javascript");var h=b._parentWindow;b._parentWindow=null;return h}return b.parentWindow||b.defaultView},scrollIntoView:function(a,h){try{a=e.byId(a);var g=a.ownerDocument||f.doc,c=f.body(g),q=g.documentElement||c.parentNode,n=k("ie"),m=k("webkit");if(a!=c&&a!=q)if(!(k("mozilla")||n||m||k("opera"))&&"scrollIntoView"in a)a.scrollIntoView(!1);else{var x="BackCompat"==g.compatMode,z=Math.min(c.clientWidth||q.clientWidth,q.clientWidth||c.clientWidth),B=Math.min(c.clientHeight||q.clientHeight,q.clientHeight||
c.clientHeight),g=m||x?c:q,w=h||b.position(a),r=a.parentNode;h=function(c){return 6>=n||7==n&&x?!1:k("position-fixed-support")&&"fixed"==d.get(c,"position").toLowerCase()};if(!h(a))for(;r;){r==c&&(r=g);var v=b.position(r),y=h(r),C="rtl"==d.getComputedStyle(r).direction.toLowerCase();if(r==g){v.w=z;v.h=B;g==q&&n&&C&&(v.x+=g.offsetWidth-v.w);if(0>v.x||!n||9<=n)v.x=0;if(0>v.y||!n||9<=n)v.y=0}else{var E=b.getPadBorderExtents(r);v.w-=E.w;v.h-=E.h;v.x+=E.l;v.y+=E.t;var p=r.clientWidth,D=v.w-p;0<p&&0<D&&
(C&&k("rtl-adjust-position-for-verticalScrollBar")&&(v.x+=D),v.w=p);p=r.clientHeight;D=v.h-p;0<p&&0<D&&(v.h=p)}y&&(0>v.y&&(v.h+=v.y,v.y=0),0>v.x&&(v.w+=v.x,v.x=0),v.y+v.h>B&&(v.h=B-v.y),v.x+v.w>z&&(v.w=z-v.x));var G=w.x-v.x,N=w.y-v.y,J=G+w.w-v.w,K=N+w.h-v.h,I,H;0<J*G&&(r.scrollLeft||r==g||r.scrollWidth>r.offsetHeight)&&(I=Math[0>G?"max":"min"](G,J),C&&(8==n&&!x||9<=n)&&(I=-I),H=r.scrollLeft,r.scrollLeft+=I,I=r.scrollLeft-H,w.x-=I);0<K*N&&(r.scrollTop||r==g||r.scrollHeight>r.offsetHeight)&&(I=Math.ceil(Math[0>
N?"max":"min"](N,K)),H=r.scrollTop,r.scrollTop+=I,I=r.scrollTop-H,w.y-=I);r=r!=g&&!y&&r.parentNode}}}catch(L){console.error("scrollIntoView: "+L),a.scrollIntoView(!1)}}};p.setObject("dojo.window",a);return a})},"davinci/_common":function(){define([],function(){return{search:"Search",filter:"Filter","new":"New",errorSavingFile:"Error saving file: ${0} details: ${1}",palette:"palette",closeAllEditors:"Close all tabs",undo:"Undo",redo:"Redo",copy:"Copy",paste:"Paste",cut:"Cut","delete":"Delete",surround:"Surround",
properties:"Properties",styles:"Styles",events:"Events",preferences:"Preferences",addPane:"Add Pane",addColumn:"Add Column",addRow:"Add Row",removeColumn:"Remove Column",removeRow:"Remove Row",joinColumn:"Join Column",joinRow:"Join Row",splitColumn:"Split Column",splitRow:"Split Row",alignLeft:"Align Left",alignRight:"Align Right",alignTop:"Align Top",alignBottom:"Align Bottom",show:"Show",hide:"Hide",addMenuItem:"Add Menu Item",addSubMenu:"Add Sub Menu",addMenuBarItem:"Add MenuBar Item",addPopupMenuBar:"Add Popup MenuBarItem",
ok:"OK",cancel:"Cancel",page:"Page",title:"Title",metaInfo:"Meta Info",httpEquiv:"HTTP Equiv",style:"Style",theme:"Theme",styleSheets:"Style Sheets",rules:"Rules",url:"URL",externalScripts:"External Scripts",modules:"Modules",name:"Name",value:"Value",add:"Add",remove:"Remove",staticOptions:"Static Options",axisOptions:"Axis Options",series:"Series",axis:"Axis",option:"Option",selected:"Selected",staticItems:"Static Items",dataStore:"Data Store",query:"Query",fields:"Fields",field:"Field",label:"Label",
width:"Width",edit:"Edit",key:"Key",rootId:"Root ID",rootLabel:"Root Label",childrenAttrs:"Children Attributes",items:"Items",type:"Type",widget:"Widget",position:"Position",size:"Size",layout:"Layout",visual:"Visual",text:"Text",border:"Border",table:"Table",list:"List",aural:"Aural",others:"Others",onLoad:"Load",onUnload:"Unload",script:"Script",methodCall:"Method Call",serviceCall:"Service Call",object:"Object",method:"Method",parameters:"Parameters",result:"Result",service:"Service",content:"Content",
source:"Source",target:"Target",property:"Property",flowLayout:"Flow Layout",snapToNearestWidget:"Snap to nearest widget",showPossibleParents:"When dragging, show possible parents",warnOnCSSOverride:"Warn on CSS Override",absoluteWidgetsZindex:"z-index for sketch mode",widgetPaletteLayout:"In Palette, display widgets as",widgetPaletteShow_Icons:"icons",widgetPaletteShow_List:"list",liveEdit:"Live Edit",zazl:"Enable \x3ca href\x3d'http://zazl.org' target\x3d'_blank'\x3eZazl Optimizer\x3c/a\x3e",selectorPrefix:"Selector Prefix",
component:"Component",alternates:"Alternates",alternateWidgets:"Alternate widgets:",howToChooseAlternate:"To choose alternate widget, click-select current widget, then click on up arrow icon.",summary:"Summary:",description:"Description:",showSuggestedWidgets:"Suggested Widgets",showAllWidgets:"All Widgets",MoreIconTitleString:"Click here to see alternative similar widgets",HelpIconTitleString:"Click here to see descriptive info about this widget",__dummy__:""}})},"dojo/data/ItemFileReadStore":function(){define("../_base/kernel ../_base/lang ../_base/declare ../_base/array ../_base/xhr ../Evented ./util/filter ./util/simpleFetch ../date/stamp".split(" "),
function(p,k,f,e,b,d,n,a,m){f=f("dojo.data.ItemFileReadStore",[d],{constructor:function(a){this._arrayOfAllItems=[];this._arrayOfTopLevelItems=[];this._loadFinished=!1;this.url=this._ccUrl=this._jsonFileUrl=a.url;this._jsonData=a.data;this.data=null;this._datatypeMap=a.typeMap||{};this._datatypeMap.Date||(this._datatypeMap.Date={type:Date,deserialize:function(a){return m.fromISOString(a)}});this._features={"dojo.data.api.Read":!0,"dojo.data.api.Identity":!0};this._itemsByIdentity=null;this._storeRefPropName=
"_S";this._itemNumPropName="_0";this._rootItemPropName="_RI";this._reverseRefMap="_RRM";this._loadInProgress=!1;this._queuedFetches=[];void 0!==a.urlPreventCache&&(this.urlPreventCache=a.urlPreventCache?!0:!1);void 0!==a.hierarchical&&(this.hierarchical=a.hierarchical?!0:!1);a.clearOnClose&&(this.clearOnClose=!0);"failOk"in a&&(this.failOk=a.failOk?!0:!1)},url:"",_ccUrl:"",data:null,typeMap:null,clearOnClose:!1,urlPreventCache:!1,failOk:!1,hierarchical:!0,_assertIsItem:function(a){if(!this.isItem(a))throw Error(this.declaredClass+
": Invalid item argument.");},_assertIsAttribute:function(a){if("string"!==typeof a)throw Error(this.declaredClass+": Invalid attribute argument.");},getValue:function(a,g,c){a=this.getValues(a,g);return 0<a.length?a[0]:c},getValues:function(a,g){this._assertIsItem(a);this._assertIsAttribute(g);return(a[g]||[]).slice(0)},getAttributes:function(a){this._assertIsItem(a);var g=[],c;for(c in a)c!==this._storeRefPropName&&c!==this._itemNumPropName&&c!==this._rootItemPropName&&c!==this._reverseRefMap&&
g.push(c);return g},hasAttribute:function(a,g){this._assertIsItem(a);this._assertIsAttribute(g);return g in a},containsValue:function(a,g,c){var b=void 0;"string"===typeof c&&(b=n.patternToRegExp(c,!1));return this._containsValue(a,g,c,b)},_containsValue:function(a,g,c,b){return e.some(this.getValues(a,g),function(a){if(null!==a&&!k.isObject(a)&&b){if(a.toString().match(b))return!0}else if(c===a)return!0})},isItem:function(a){return a&&a[this._storeRefPropName]===this&&this._arrayOfAllItems[a[this._itemNumPropName]]===
a?!0:!1},isItemLoaded:function(a){return this.isItem(a)},loadItem:function(a){this._assertIsItem(a.item)},getFeatures:function(){return this._features},getLabel:function(a){if(this._labelAttr&&this.isItem(a))return this.getValue(a,this._labelAttr)},getLabelAttributes:function(a){return this._labelAttr?[this._labelAttr]:null},filter:function(a,g,c){var b=[],h,d;if(a.query){var m;h=a.queryOptions?a.queryOptions.ignoreCase:!1;var e={};for(d in a.query)m=a.query[d],"string"===typeof m?e[d]=n.patternToRegExp(m,
h):m instanceof RegExp&&(e[d]=m);for(h=0;h<g.length;++h){var f=!0,w=g[h];if(null===w)f=!1;else for(d in a.query)m=a.query[d],this._containsValue(w,d,m,e[d])||(f=!1);f&&b.push(w)}}else for(h=0;h<g.length;++h)d=g[h],null!==d&&b.push(d);c(b,a)},_fetchItems:function(a,g,c){var h=this;if(this._loadFinished)this.filter(a,this._getItemsArray(a.queryOptions),g);else if(this._jsonFileUrl!==this._ccUrl?(p.deprecated(this.declaredClass+": ","To change the url, set the url property of the store, not _jsonFileUrl.  _jsonFileUrl support will be removed in 2.0"),
this.url=this._ccUrl=this._jsonFileUrl):this.url!==this._ccUrl&&(this._ccUrl=this._jsonFileUrl=this.url),null!=this.data&&(this._jsonData=this.data,this.data=null),this._jsonFileUrl)if(this._loadInProgress)this._queuedFetches.push({args:a,filter:k.hitch(h,"filter"),findCallback:k.hitch(h,g)});else{this._loadInProgress=!0;var d=b.get({url:h._jsonFileUrl,handleAs:"json-comment-optional",preventCache:this.urlPreventCache,failOk:this.failOk});d.addCallback(function(b){try{h._getItemsFromLoadedData(b),
h._loadFinished=!0,h._loadInProgress=!1,h.filter(a,h._getItemsArray(a.queryOptions),g),h._handleQueuedFetches()}catch(z){h._loadFinished=!0,h._loadInProgress=!1,c(z,a)}});d.addErrback(function(g){h._loadInProgress=!1;c(g,a)});var n=null;a.abort&&(n=a.abort);a.abort=function(){var c=d;c&&-1===c.fired&&(c.cancel(),c=null);n&&n.call(a)}}else if(this._jsonData)try{this._loadFinished=!0,this._getItemsFromLoadedData(this._jsonData),this._jsonData=null,h.filter(a,this._getItemsArray(a.queryOptions),g)}catch(x){c(x,
a)}else c(Error(this.declaredClass+": No JSON source data was provided as either URL or a nested Javascript object."),a)},_handleQueuedFetches:function(){if(0<this._queuedFetches.length){for(var a=0;a<this._queuedFetches.length;a++){var g=this._queuedFetches[a],c=g.args,b=g.filter,g=g.findCallback;b?b(c,this._getItemsArray(c.queryOptions),g):this.fetchItemByIdentity(c)}this._queuedFetches=[]}},_getItemsArray:function(a){return a&&a.deep?this._arrayOfAllItems:this._arrayOfTopLevelItems},close:function(a){this.clearOnClose&&
this._loadFinished&&!this._loadInProgress&&(this._arrayOfAllItems=[],this._arrayOfTopLevelItems=[],this._loadFinished=!1,this._itemsByIdentity=null,this._loadInProgress=!1,this._queuedFetches=[])},_getItemsFromLoadedData:function(a){function g(c){return null!==c&&"object"===typeof c&&(!k.isArray(c)||b)&&!k.isFunction(c)&&(c.constructor==Object||k.isArray(c))&&"undefined"===typeof c._reference&&"undefined"===typeof c._type&&"undefined"===typeof c._value&&h.hierarchical}function c(a){h._arrayOfAllItems.push(a);
for(var b in a){var d=a[b];if(d)if(k.isArray(d))for(var n=0;n<d.length;++n){var m=d[n];g(m)&&c(m)}else g(d)&&c(d)}}var b=!1,h=this;this._labelAttr=a.label;var d,n;this._arrayOfAllItems=[];this._arrayOfTopLevelItems=a.items;for(d=0;d<this._arrayOfTopLevelItems.length;++d)n=this._arrayOfTopLevelItems[d],k.isArray(n)&&(b=!0),c(n),n[this._rootItemPropName]=!0;var m={},e;for(d=0;d<this._arrayOfAllItems.length;++d)for(e in n=this._arrayOfAllItems[d],n){if(e!==this._rootItemPropName){var f=n[e];null!==f?
k.isArray(f)||(n[e]=[f]):n[e]=[null]}m[e]=e}for(;m[this._storeRefPropName];)this._storeRefPropName+="_";for(;m[this._itemNumPropName];)this._itemNumPropName+="_";for(;m[this._reverseRefMap];)this._reverseRefMap+="_";if(m=a.identifier)for(this._itemsByIdentity={},this._features["dojo.data.api.Identity"]=m,d=0;d<this._arrayOfAllItems.length;++d)if(n=this._arrayOfAllItems[d],a=n[m],a=a[0],Object.hasOwnProperty.call(this._itemsByIdentity,a)){if(this._jsonFileUrl)throw Error(this.declaredClass+":  The json data as specified by: ["+
this._jsonFileUrl+"] is malformed.  Items within the list have identifier: ["+m+"].  Value collided: ["+a+"]");if(this._jsonData)throw Error(this.declaredClass+":  The json data provided by the creation arguments is malformed.  Items within the list have identifier: ["+m+"].  Value collided: ["+a+"]");}else this._itemsByIdentity[a]=n;else this._features["dojo.data.api.Identity"]=Number;for(d=0;d<this._arrayOfAllItems.length;++d)n=this._arrayOfAllItems[d],n[this._storeRefPropName]=this,n[this._itemNumPropName]=
d;for(d=0;d<this._arrayOfAllItems.length;++d)for(e in n=this._arrayOfAllItems[d],n)for(a=n[e],m=0;m<a.length;++m)if(f=a[m],null!==f&&"object"==typeof f){if("_type"in f&&"_value"in f){var r=f._type,v=this._datatypeMap[r];if(v)if(k.isFunction(v))a[m]=new v(f._value);else if(k.isFunction(v.deserialize))a[m]=v.deserialize(f._value);else throw Error("dojo.data.ItemFileReadStore: Value provided in typeMap was neither a constructor, nor a an object with a deserialize function");else throw Error("dojo.data.ItemFileReadStore: in the typeMap constructor arg, no object class was specified for the datatype '"+
r+"'");}if(f._reference){f=f._reference;if(k.isObject(f))for(r=0;r<this._arrayOfAllItems.length;++r){var v=this._arrayOfAllItems[r],y=!0,C;for(C in f)v[C]!=f[C]&&(y=!1);y&&(a[m]=v)}else a[m]=this._getItemByIdentity(f);this.referenceIntegrity&&(f=a[m],this.isItem(f)&&this._addReferenceToMap(f,n,e))}else this.isItem(f)&&this.referenceIntegrity&&this._addReferenceToMap(f,n,e)}},_addReferenceToMap:function(a,g,c){},getIdentity:function(a){var g=this._features["dojo.data.api.Identity"];return g===Number?
a[this._itemNumPropName]:(a=a[g])?a[0]:null},fetchItemByIdentity:function(a){var g,c;if(this._loadFinished)g=this._getItemByIdentity(a.identity),a.onItem&&(c=a.scope?a.scope:p.global,a.onItem.call(c,g));else{var h=this;this._jsonFileUrl!==this._ccUrl?(p.deprecated(this.declaredClass+": ","To change the url, set the url property of the store, not _jsonFileUrl.  _jsonFileUrl support will be removed in 2.0"),this.url=this._ccUrl=this._jsonFileUrl):this.url!==this._ccUrl&&(this._ccUrl=this._jsonFileUrl=
this.url);null!=this.data&&null==this._jsonData&&(this._jsonData=this.data,this.data=null);this._jsonFileUrl?this._loadInProgress?this._queuedFetches.push({args:a}):(this._loadInProgress=!0,c=b.get({url:h._jsonFileUrl,handleAs:"json-comment-optional",preventCache:this.urlPreventCache,failOk:this.failOk}),c.addCallback(function(c){var b=a.scope?a.scope:p.global;try{h._getItemsFromLoadedData(c),h._loadFinished=!0,h._loadInProgress=!1,g=h._getItemByIdentity(a.identity),a.onItem&&a.onItem.call(b,g),h._handleQueuedFetches()}catch(x){h._loadInProgress=
!1,a.onError&&a.onError.call(b,x)}}),c.addErrback(function(c){h._loadInProgress=!1;a.onError&&a.onError.call(a.scope?a.scope:p.global,c)})):this._jsonData&&(h._getItemsFromLoadedData(h._jsonData),h._jsonData=null,h._loadFinished=!0,g=h._getItemByIdentity(a.identity),a.onItem&&(c=a.scope?a.scope:p.global,a.onItem.call(c,g)))}},_getItemByIdentity:function(a){var g=null;this._itemsByIdentity?Object.hasOwnProperty.call(this._itemsByIdentity,a)&&(g=this._itemsByIdentity[a]):Object.hasOwnProperty.call(this._arrayOfAllItems,
a)&&(g=this._arrayOfAllItems[a]);void 0===g&&(g=null);return g},getIdentityAttributes:function(a){a=this._features["dojo.data.api.Identity"];return a===Number?null:[a]},_forceLoad:function(){var a=this;this._jsonFileUrl!==this._ccUrl?(p.deprecated(this.declaredClass+": ","To change the url, set the url property of the store, not _jsonFileUrl.  _jsonFileUrl support will be removed in 2.0"),this.url=this._ccUrl=this._jsonFileUrl):this.url!==this._ccUrl&&(this._ccUrl=this._jsonFileUrl=this.url);null!=
this.data&&(this._jsonData=this.data,this.data=null);if(this._jsonFileUrl){var g=b.get({url:this._jsonFileUrl,handleAs:"json-comment-optional",preventCache:this.urlPreventCache,failOk:this.failOk,sync:!0});g.addCallback(function(c){try{if(!0!==a._loadInProgress&&!a._loadFinished)a._getItemsFromLoadedData(c),a._loadFinished=!0;else if(a._loadInProgress)throw Error(this.declaredClass+":  Unable to perform a synchronous load, an async load is in progress.");}catch(q){throw q;}});g.addErrback(function(c){throw c;
})}else this._jsonData&&(a._getItemsFromLoadedData(a._jsonData),a._jsonData=null,a._loadFinished=!0)}});k.extend(f,a);return f})},"dojo/data/util/filter":function(){define(["../../_base/lang"],function(p){var k={};p.setObject("dojo.data.util.filter",k);k.patternToRegExp=function(f,e){for(var b="^",d=null,n=0;n<f.length;n++)switch(d=f.charAt(n),d){case "\\":b+=d;n++;b+=f.charAt(n);break;case "*":b+=".*";break;case "?":b+=".";break;case "$":case "^":case "/":case "+":case ".":case "|":case "(":case ")":case "{":case "}":case "[":case "]":b+=
"\\";default:b+=d}b+="$";return e?new RegExp(b,"mi"):new RegExp(b,"m")};return k})},"dojo/data/util/simpleFetch":function(){define(["../../_base/lang","../../_base/kernel","./sorter"],function(p,k,f){var e={};p.setObject("dojo.data.util.simpleFetch",e);e.errorHandler=function(b,d){d.onError&&d.onError.call(d.scope||k.global,b,d)};e.fetchHandler=function(b,d){var n=d.abort||null,a=!1,m=d.start?d.start:0,h=d.count&&Infinity!==d.count?m+d.count:b.length;d.abort=function(){a=!0;n&&n.call(d)};var g=d.scope||
k.global;d.store||(d.store=this);d.onBegin&&d.onBegin.call(g,b.length,d);d.sort&&b.sort(f.createSortFunction(d.sort,this));if(d.onItem)for(var c=m;c<b.length&&c<h;++c){var q=b[c];a||d.onItem.call(g,q,d)}d.onComplete&&!a&&(c=null,d.onItem||(c=b.slice(m,h)),d.onComplete.call(g,c,d))};e.fetch=function(b){b=b||{};b.store||(b.store=this);this._fetchItems(b,p.hitch(this,"fetchHandler"),p.hitch(this,"errorHandler"));return b};return e})},"dojo/data/util/sorter":function(){define(["../../_base/lang"],function(p){var k=
{};p.setObject("dojo.data.util.sorter",k);k.basicComparator=function(f,e){var b=-1;null===f&&(f=void 0);null===e&&(e=void 0);if(f==e)b=0;else if(f>e||null==f)b=1;return b};k.createSortFunction=function(f,e){function b(c,a,g,b){return function(h,d){h=b.getValue(h,c);d=b.getValue(d,c);return a*g(h,d)}}for(var d=[],n,a=e.comparatorMap,m=k.basicComparator,h=0;h<f.length;h++){n=f[h];var g=n.attribute;if(g){n=n.descending?-1:1;var c=m;a&&("string"!==typeof g&&"toString"in g&&(g=g.toString()),c=a[g]||m);
d.push(b(g,n,c,e))}}return function(c,a){for(var g=0;g<d.length;){var b=d[g++](c,a);if(0!==b)return b}return 0}};return k})},"davinci/lang/workbench":function(){define([],function(){return{fileHasUnsavedChanges:"The file '${0}' has unsaved changes. Are you sure you want to close WITHOUT saving?",outlineNotAvailable:"An outline is not available",preferences:"Preferences",noUserPref:"no user preferences...",restoreDefaults:"Restore Defaults"}})},"davinci/repositoryinfo":function(){define({revision:"",
buildtime:"@buildtime@"})},"davinci/Workbench":function(){define("dcl/dcl dojo/_base/lang require ./Runtime ./ui/Dialog ./ve/metadata ./ve/utils/GeomUtils davinci/_WokbenchEditors davinci/_WokbenchMisc davinci/_Workbench_Menu davinci/_Workbench_Palette xide/widgets/ContextMenu xide/utils xide/types".split(" "),function(p,k,f,e,b,d,n,a,m,h,g,c,q,A){Function.prototype.bind=Function.prototype.bind||function(c){return dojo.hitch(c,this)};window.setInterval(function(){u.saveState&&u.updateWorkbenchState()},
5E3);var u=new (p([a,m,h,g],{declaredClass:"davinci.Workbench",_XX_last_member:!0,activePerspective:"",actionScope:[],_DEFAULT_PROJECT:"project1",_baseTitle:"Control-Freak ",hideEditorTabs:!0,_editorTabClosing:{},_shadowTabClosing:{},service:null,serviceClass:"XApp_XIDE_Workbench_Service",currentEditor:null,run2:function(){e.subscribe("/davinci/ui/widgetPropertiesChanges",function(){var c=e.currentEditor.visualEditor;c._objectPropertiesChange.apply(c,arguments)})},onResize:function(c){var a=c.explicitOriginalTarget?
c.explicitOriginalTarget:c.srcElement;if(("resize"==c.type||a.id&&-1<a.id.indexOf("dijit_layout__Splitter_")||a.nextSibling&&a.nextSibling.id&&-1<a.nextSibling.id.indexOf("dijit_layout__Splitter_"))&&(c=davinci&&e.currentEditor)&&c.onResize)c.onResize();u._originalOnResize&&u._originalOnResize();u._repositionFocusContainer()},showModal:function(c,a,g,h,d,n){return b.showModal(c,a,g,h,d,n)},showMessage:function(c,a,g,h,d){return b.showMessage(c,a,g,h,d)},showDialog:function(c){return b.showDialog(c)},
_loadActionClass:function(c){c&&"string"==typeof c.action&&f([c.action],function(a){try{if(a)c.action=new a,c.action.item=c;else debugger}catch(B){console.error("action class creation failed : "+c.action)}})},_toggleButton:function(c,a,g,b){c.checked&&(g.forEach(function(a){a!=c&&a.set("checked",!1)}),u._runAction(c.item,a,c.item.id))},_runAction:function(c,a,g){a&&e.currentEditor&&(a=e.currentEditor);if(c.run)c.run();else if(c.action)dojo.isString(c.action)&&this._loadActionClass(c),c.action.run(a);
else if(c.method&&a&&a[c.method]instanceof Function)a[c.method](g);else c.commandID&&e.executeCommand(c.commandID)},createPopup:function(a){function g(a){var g=this.contextMenuArgs||{};q.mixin(g,{owner:this,delegate:this,actionFilter:{quick:!0}});var b=new c(g,a);b.openTarget=a;b.init({preventDoubleContext:!1});b._registerActionEmitter(this);$(a).one("contextmenu",function(c){c.preventDefault();this.store||b.setActionStore(this.getActionStore(),this)}.bind(this));this.contextMenu=b}var b=a.partID,
h=a.domNode,d=a.context,n=a.openCallback;if("davinci.ve.visualEditor"===b)d.cMenu||(d.cMenu=g.apply(d.getVisualEditor(),[h]),d.getVisualEditor().add(d.cMenu));else{var m=this.getActionSets(b),e=m.clonedActionSets,m=m.actionSets;try{if(0<e.length){var f=u._createMenuTree(e,!0);u._initActionsKeys(m,a);var A=u._createMenu(f,d);A&&h&&A.bindDomNode(h);A._widgetCallback=n;A._partID=b;return A}}catch(D){logError(D,"creating popup")}}},getActionSets:function(c){var a=[];e.getExtension("davinci.actionSetPartAssociations",
function(g){return g.parts.some(function(b){if(b==c)return a.push(g.targetID),!0})});var g,b=[];a.length&&(g=e.getExtensions("davinci.actionSets",function(c){return a.some(function(a){return a==c.id})}),g.length&&g.forEach(function(c){var a=d.getLibraryActions(c.id);a.length&&(c=k.mixin({},c),c.actions=c.actions.concat(a));b.push(c)}));return{actionSets:g,clonedActionSets:b}},getFocusContainer:function(){var c=document.getElementById("focusContainer");c||(c=dojo.create("div",{"class":"focusContainer",
id:"focusContainer"},document.body),davinci.Workbench.focusContainer=c);return c},_repositionFocusContainer:function(){var c=dojo.byId("editorsStackContainer"),a=this.getFocusContainer();if(c&&a){var g=e.currentEditor;if(c=g&&g.getFocusContainerBounds?g.getFocusContainerBounds():n.getBorderBoxPageCoords(c))a.style.left=c.l+"px",a.style.top=c.t+"px",a.style.width=c.w+"px",a.style.height=c.h+"px",g&&g.getContext&&(a=g.getContext())&&a.updateFocusAll&&a.updateFocusAll()}},_removeFocusContainerChildren:function(){davinci.Workbench.focusContainer&&
(davinci.Workbench.focusContainer.innerHTML="")}}));dojo.setObject("davinci.Workbench",u);return u})},"davinci/ve/utils/GeomUtils":function(){define(["dojo/_base/window","dojo/dom-geometry","dojo/dom-style","dojo/has","dojo/_base/sniff"],function(p,k,f,e,b){var d=["TABLE","TBODY","TR","TD","TH"];return{getMarginBoxPageCoords:function(b){var a;p.withDoc(b.ownerDocument,function(){var d=this.getBorderBoxPageCoords(b),h=this.getMarginExtents(b);a={l:d.l-h.l,t:d.t-h.t,w:d.w+h.l+h.r,h:d.h+h.t+h.b}}.bind(this));
return a},getMarginBoxPageCoordsCached:function(b){b._maqMarginBoxPageCoords||(b._maqMarginBoxPageCoords=this.getMarginBoxPageCoords(b));return b._maqMarginBoxPageCoords},getBorderBoxPageCoords:function(b){var a;p.withDoc(b.ownerDocument,function(){if(d.indexOf(b.tagName)){var n=b.getBoundingClientRect(),h=this.getScrollLeft(b),g=this.getScrollTop(b);a={l:n.left+h,t:n.top+g,w:n.width,h:n.height}}else{for(var n=b.offsetLeft,h=b.offsetTop,g=b.parentNode,c=b.offsetParent;g&&"BODY"!=g.tagName;){"number"==
typeof g.scrollLeft&&"number"==typeof g.scrollTop&&(n-=g.scrollLeft,h-=g.scrollTop);if(g==c)var q=k.getBorderExtents(c),n=n+(c.offsetLeft+q.l),h=h+(c.offsetTop+q.t),c=c.offsetParent;g=g.parentNode}a={l:n,t:h,w:b.offsetWidth,h:b.offsetHeight}}}.bind(this));return a},getBorderBoxPageCoordsCached:function(b){b._maqBorderBoxPageCoords||(b._maqBorderBoxPageCoords=this.getBorderBoxPageCoords(b));return b._maqBorderBoxPageCoords},getScrollLeft:function(b){b=b&&b.ownerDocument;return e("mozilla")?(b=b&&b.defaultView)?
b.pageXOffset:0:(b=b&&b.body)?b.scrollLeft:0},getScrollTop:function(b){b=b&&b.ownerDocument;return e("mozilla")?(b=b&&b.defaultView)?b.pageYOffset:0:(b=b&&b.body)?b.scrollTop:0},getMarginExtents:function(b,a){var d=a||f.getComputedStyle(b),h;d?(b=parseFloat(d.marginLeft)||0,a=parseFloat(d.marginTop)||0,h=parseFloat(d.marginRight)||0,d=parseFloat(d.marginBottom)||0):b=a=h=d=0;return{l:b,t:a,r:h,b:d,w:b+h,h:a+d}},clearGeomCache:function(b){delete b._maqBorderBoxPageCoords;delete b._maqMarginBoxPageCoords}}})},
"davinci/_WokbenchEditors":function(){define(["dcl/dcl","./Runtime","dojo/promise/all"],function(p,k,f){return p(null,{closeAllEditors:function(){var e=dijit.byId("editors_container");e&&e.getChildren().forEach(function(b){e.closeChild(b)})},getOpenEditor:function(e){return this.currentEditor?this.currentEditor:null!=e?(e=dijit.byId(filename2id(e.getPath())))?e.editor:null:(e=dijit.byId("editors_container"))&&e.selectedChildWidget&&e.selectedChildWidget.editor?e.selectedChildWidget.editor:null},closeActiveEditor:function(){var e=
dijit.byId("editors_container"),b=dijit.byId("davinci_file_tabs");if(e&&e.selectedChildWidget&&e.selectedChildWidget.editor){var d=selectedChildWidget.id.replace(/^editor/,"shadow");e.closeChild(e.selectedChildWidget);(e=dijit.byId(d))&&b.closeChild(e)}},getAllOpenEditorIds:function(){},_showEditorTopPanes:function(){this._hideShowEditorTopPanes("block")},_hideEditorTopPanes:function(){this._hideShowEditorTopPanes("none")},_hideShowEditorTopPanes:function(e){},_editorTabClosed:function(e){if(!davinci.Workbench._editorTabClosing[e.id]){davinci.Workbench._editorTabClosing[e.id]=
!0;if(e&&e.editor&&e.editor.fileName){var b=e.id.replace(/^editor/,"shadow"),d=dijit.byId("davinci_file_tabs"),n=dijit.byId(b),a=Workbench._state.editors.indexOf(e.editor.fileName);-1!=a&&Workbench._state.editors.splice(a,1);Workbench.saveState=!0;davinci.Workbench._shadowTabClosing[b]||(d.removeChild(n),n.destroyRecursive())}dijit.byId("editors_container").getChildren().length||(Workbench._switchEditor(null),this._expandCollapsePaletteContainers(null),b=dijit.byId("editorsStackContainer"),d=dijit.byId("editorsWelcomePage"),
b&&d&&b.selectChild(d),this._hideEditorTopPanes());delete davinci.Workbench._editorTabClosing[e.id]}},openEditor:function(e,b){try{var d=e.fileName,n;"string"==typeof d?n=d.substr(d.lastIndexOf(".")+1):(n=d.getExtension(),d=d.getPath());var a=dijit.byId(filename2id(d)),m=dijit.byId("editors_container");if(a){m.selectChild(a);var h=a.editor;e.startOffset&&h.select(e)}else{var g=e.editorCreateCallback,c=k.getExtensions("davinci.editor",function(c){"string"==typeof c.extensions&&(c.extensions=c.extensions.split(","));
return dojo.some(c.extensions,function(c){return c.toLowerCase()==n.toLowerCase()})}),q=c[0];1<c.length&&dojo.some(c,function(c){q=c;return c.isDefault});Workbench._createEditor(q,d,e,b).then(function(c){g&&g.call(window,c);e.noSelect||(k.currentEditor=c)},function(c){console.error("Error opening editor for filename: "+d,c)})}}catch(A){console.error("Exception opening editor for filename: "+e&&e.fileName),console.error(A)}},_switchEditor:function(e,b){var d=k.currentEditor;k.currentEditor=e;var n=
davinci.Workbench;n._state&&(n._state.activeEditor=e?e.fileName:null);this._removeFocusContainerChildren();this._showEditorTopPanes();try{dojo.publish("/davinci/ui/editorSelected",[{editor:e,oldEditor:d}])}catch(a){console.error(a)}n._updateTitle(e);setTimeout(function(){e&&e.visualEditor&&e.visualEditor.context&&e.visualEditor.context.isActive()&&e.visualEditor.context.getTopWidgets().forEach(function(a){a.resize&&a.resize()});this._repositionFocusContainer()}.bind(this),1E3);f(this._showViewPromises).then(function(){e&&
e.focus&&e.focus();this._rearrangePalettes(e);this._expandCollapsePaletteContainers(e)}.bind(this));b||(n.saveState=!0)}})})},"davinci/_WokbenchMisc":function(){define("dcl/dcl require ./Runtime ./ui/Dialog davinci/lang/webContent ./ve/metadata dojo/_base/connect xide/manager/ServerActionBase".split(" "),function(p,k,f,e,b,d,n,a){var m=function(a,c){401==c.status||403==c.status?h():!0===a.canceled&&(a=a.ioArgs.url,(new RegExp("(^|\\.\\/|"+document.baseURI+"\\/)cmd\\/")).test(a)&&(0<=a.indexOf("getBluePageInfo")||
f.handleError(c.message)))},h=function(){var a=new e({title:b.sessionTimedOut}),c=dojo.string.substitute(b.sessionTimedOutMsg,{hrefLoc:"welcome"});a.set("content",c);dojo.connect(a,"onCancel",null,function(){window.location.href="welcome"});setTimeout(function(){window.location.href="welcome"},1E4);a.show()};return p(null,{run:function(){var a=davinci.Workbench;console.error("run ");f.run();a._initKeys();a._baseTitle=dojo.doc.title;try{a.initService()}catch(q){debugger}window.maqetta&&maqetta.TopBanner&&
maqetta.TopBanner.setup&&maqetta.TopBanner.setup();f.subscribe("/davinci/resource/resourceChanged",function(c,a){if("deleted"==c&&(c="editor-"+encodeURIComponent(a.getPath().replace(/[\/| |\t]/g,"_")).replace(/%/g,":"),a=editorIdToShadowId(c),c=dijit.byId(c),a=dijit.byId(a),c&&!c._isClosing)){var g=dijit.byId("editors_container"),b=dijit.byId("davinci_file_tabs");g.removeChild(c);c.destroyRecursive();b.removeChild(a);a.destroyRecursive()}});f.subscribe("/dojo/io/error",m);f.subscribe("/davinci/states/state/changed",
function(c){var a=f.currentEditor;"davinci.ve.themeEditor.ThemeEditor"!=a.declaredClass&&"davinci.review.editor.ReviewEditor"!=a.declaredClass&&a.visualEditor.onContentChange.apply(a.visualEditor,arguments)});f.subscribe("/davinci/ui/widgetPropertiesChanges",function(){var c=f.currentEditor.visualEditor;c._objectPropertiesChange.apply(c,arguments)});n.subscribe("/davinci/states/state/changed",function(c){var a=f.currentEditor&&"davinci.ve.PageEditor"==f.currentEditor.declaredClass&&f.currentEditor.visualEditor&&
f.currentEditor.visualEditor.context;if(a){var g,b,a=a?a.getDijit():null,h=k("davinci/ve/widget");c.newState&&!c.newState.indexOf("_show:")&&(g=a.byId(c.newState.substring(6)),g=h.getWidget(g.domNode),(b=g.getHelper())&&b.popup&&b.popup(g));c.oldState&&!c.oldState.indexOf("_show:")&&(g=a.byId(c.oldState.substring(6)),g=h.getWidget(g.domNode),(b=g.getHelper())&&b.tearDown&&b.tearDown(g))}});n.subscribe("/davinci/ui/repositionFocusContainer",function(c){a._repositionFocusContainer()});var c=this.service.serviceObject[this.serviceClass].getInfo().then(function(c){f._initializationInfo=
c;c=c.userInfo;f.isLocalInstall="maqettaUser"==c.userId;f.userName=c.userId;f.userEmail=c.email;return d.init()}).then(function(){var c=f.initialPerspective||"davinci.ui.main";dojo.query(".loading").orphan();a.showPerspective(c);a._updateTitle();initializeWorkbenchState()}).otherwise(function(c){dojo.query("#load_screen").addContent(dojo.string.substitute(b.startupError,[c.message]),"only")});a._lastAutoSave=Date.now();setInterval(dojo.hitch(this,"_autoSave"),3E4);return c},initService:function(){this.service||
(this.service=new a({serviceClass:"XApp_XIDE_Workbench_Service",serviceUrl:"./xcf/xui.php?debug\x3dtrue\x26view\x3drpc",singleton:!1}),this.service.init())},findView:function(a){if(a=dijit.byId(a))return a},location:function(){return f.location()},logoff:function(a){},unload:function(){davinci.Workbench._autoSave()},singleProjectMode:function(){return!0},getProject:function(){var a=davinci.Workbench;return a.getActiveProject()||a._DEFAULT_PROJECT},loadProject:function(a){var c=davinci.Workbench;c.setActiveProject(a);
return c.updateWorkbenchState().then(function(){location.href="cmd/configProject?configOnly\x3dtrue\x26project\x3d"+encodeURIComponent(a)})},getActiveProject:function(){return"project1"},setActiveProject:function(a){var c=davinci.Workbench;c._state||(c._state={});c._state.project=a;c.saveState=!0},setActionScope:function(a,c){davinci.Workbench.actionScope[a]=c},clearWorkbenchState:function(){var a=davinci.Workbench;a._state={};return a.updateWorkbenchState()},updateWorkbenchState:function(){delete davinci.Workbench.saveState;
return null},getDefaultMount:function(){},workbenchStateCustomPropGet:function(a){var c=davinci.Workbench;if("string"==typeof a)return c._state[a]},workbenchStateCustomPropSet:function(a,c){var b=davinci.Workbench;"string"==typeof a&&("undefined"==typeof c?delete b._state[a]:b._state[a]=c,b.saveState=!0)},_autoSave:function(){var a=davinci.Workbench,c=!1;if(this.currentEditor){var b=this.currentEditor;if(b.isReadOnly)console.error("workbench : autosave failed : isReadyOnly or is not dirty");else try{b.save(!0)}catch(A){console.error("Error while autosaving file:"+
A),c=!0}}c||(a._lastAutoSave=Date.now())},_updateTitle:function(a){var c=davinci.Workbench._baseTitle||"";a&&(c+="",a.isDirty&&(c+="*"),c+=a.item.name);dojo.doc.title=c},_initActionsKeys:function(a,c){var b=davinci.Workbench,g=c.keysDomNode||c.domNode,h={},d;dojo.forEach(a,function(c){dojo.forEach(c.actions,function(c){c.keySequence&&(h[c.keySequence]=c,d=!0)})});if(d){var m=c.context;dojo.connect(g,"onkeydown",function(c){c=b._keySequence(c);c=h[c];!c||c.action.shouldShow&&!c.action.shouldShow(m)||
c.action.isEnabled(m)&&b._runAction(c,m)})}},_initKeys:function(){var a=davinci.Workbench,c={all:[]},b=f.getExtensions("davinci.keyBindings");dojo.forEach(b,function(a){var b=a.contextID||"all",g=c[b];g||(g=c[b]=[]);g[a.sequence]=a.commandID});a.keyBindings=c},handleKey:function(a){var c=davinci.Workbench;if(c.keyBindings){a=c._keySequence(a);var b;c.currentContext&&c.keyBindings[c.currentContext]&&(b=c.keyBindings[c.currentContext][a]);b||(b=c.keyBindings.all[a]);if(b)return f.executeCommand(b),
!0}},_keySequence:function(a){var c=[];window.event?(window.event.ctrlKey&&c.push("M1"),window.event.shiftKey&&c.push("M2"),window.event.altKey&&c.push("M3")):((a.ctrlKey||2==a.modifiers||3==a.modifiers||5<a.modifiers)&&c.push("M1"),(a.shiftKey||3<a.modifiers)&&c.push("M2"),a.modifiers?(a.altKey||a.modifiers%2)&&c.push("M3"):a.altKey&&c.push("M3"));var b=String.fromCharCode(a.keyCode);/[A-Z0-9]/.test(b)||(b={46:"del",114:"f3"}[a.keyCode]||"xxxxxxxxxx");b=b.toUpperCase();" "==b&&(b="' '");c.push(b);
return c.join("+")},setupGlobalKeyboardHandler:function(){var a=f.getExtensions("davinci.actionSets");dojo.forEach(a,function(c){"davinci.ui.main"!=c.id&&"davinci.ui.editorActions"!=c.id||dojo.forEach(c.actions,function(c){c.keyBinding&&f.registerKeyBinding(c.keyBinding,c)})})}})})},"davinci/_Workbench_Menu":function(){define("dcl/dcl dojo/_base/declare ./Runtime dijit/Menu dijit/MenuBar dijit/MenuItem dijit/MenuSeparator dijit/PopupMenuBarItem dijit/form/DropDownButton davinci/_WokbenchEditors davinci/_WokbenchMisc".split(" "),
function(p,k,f,e,b,d,n,a,m){var h=k(e,{menuOpened:function(a){},_openMyself:function(a){this.menuOpened(a);var c;try{var b=document.getElementById("menuOverlayDiv");b||(b=dojo.create("div",{id:"menuOverlayDiv",style:"left:0px; top:0px; width:100%; height:100%; position:absolute; z-index:10;"},document.body));if(this.adjustPosition){var g=this.adjustPosition(a);c=dijit.popup.open;dijit.popup.open=function(a){a.x+=g.x;a.y+=g.y;c.call(dijit.popup,a)}}this.onClose=function(){var c=document.getElementById("menuOverlayDiv");
c&&c.parentNode.removeChild(c)}.bind(this);this.inherited(arguments)}finally{c&&(dijit.popup.open=c)}}});return p(null,{declaredClass:"davinci.Workbench_Menu",updateMenubar:function(a,c){console.error("updateMenubar")},_updateMainMenubar:function(a,c){console.error("_updateMainMenubar")},_addItemsToMenubar:function(a,c){console.error("_addItemsToMenubar")},_createMenu:function(a,c){var b,g;a.menus?(b=new e({parentMenu:a}),g=a.menus,a="onOpen"):(b=new h({}),g=a,a="menuOpened");b.domNode.style.display=
"none";b.actionContext=c;this._rebuildMenu(b,g);dojo.connect(b,a,this,function(c){b._widgetCallback&&b._widgetCallback(c);this._rebuildMenu(b,g).focus()});return b},_rebuildMenu:function(a,c){dojo.forEach(a.getChildren(),function(c){a.removeChild(c);c.destroy()});a.focusedChild=null;var b,g;c.forEach(function(c,h){c.menus.length&&(c.isSeparator&&0<h&&(b=!0),c.menus.forEach(function(c){b&&g&&(a.addChild(new n({})),b=!1);g=!0;var h=c.label;c.action&&c.action.getName&&(h=c.action.getName());if(c.separator)c=
davinci.Workbench._createMenu(c),c=new d({label:h,popup:c,id:c.id+"item"}),c.actionContext=a.actionContext,a.addChild(c);else{var m=!0;c.isEnabled&&(m=f.getSelection(),m=(m=m[0]&&m[0].resource)?c.isEnabled(m):!1);if(c.action){if(c.action.shouldShow&&!c.action.shouldShow(a.actionContext,{menu:a}))return;m=c.action.isEnabled&&c.action.isEnabled(a.actionContext)}h={label:h,id:c.id,disabled:!m,onClick:dojo.hitch(this,"_runAction",c,a.actionContext)};c.iconClass&&(h.iconClass=c.iconClass);a.addChild(new d(h))}},
this))},this);return a},_createMenuTree:function(a,c){function b(c,a,b){a=(a||"additions").split("/");var h=g;davinci.Workbench._loadActionClass(c);var d=a[a.length-1];if(1<a.length)for(var m=0,n=a.length-1;m<n;m++){var e;a:{e=0;for(var f=h.length;e<f;e++)for(var q=0,u=h[e].menus.length;q<u;q++)if(a[m]==h[e].menus[q].id){e=h[e].menus[q].menus;break a}e=void 0}e&&(h=e)}m=0;for(n=h.length;m<n;m++)if(h[m].id==d){a=h[m].menus;a.push(c);if(c.separator){b=!1;a=c.menus=[];for(h=0;h<c.separator.length;h+=
2)d=c.separator[h],b="additions"==d,a.push({id:d,isSeparator:c.separator[h+1],menus:[]});b||a.push({id:"additions",isSeparator:!1,menus:[]})}return}b&&g.push({id:d,isSeparator:!1,menus:[c]})}a||(a=f.getExtensions("davinci.actionSets",function(c){return 0==f.getExtensions("davinci.actionSetPartAssociations",function(a){return a.targetID==c.id}).length}));for(var g=[],h=0,d=a.length;h<d;h++){var m=a[h];if(m.visible&&m.menu)for(var n=0,e=m.menu.length;n<e;n++){var r=m.menu[n];if(r.__mainMenu)for(var v=
0;v<r.separator.length;v+=2)g.push({id:r.separator[v],isSeparator:r.separator[v+1],menus:[]});else if(b(r,r.path,c),r.populate instanceof Function){var r=r.populate(),y;for(y in r)b(r[y],r[y].menubarPath)}}}h=0;for(d=a.length;h<d;h++)if(m=a[h],m.visible)for(n=0,e=m.actions.length;n<e;n++)y=m.actions[n],y.menubarPath&&b(y,y.menubarPath,c);return g}})})},"davinci/_Workbench_Palette":function(){define(["dcl/dcl","davinci/Runtime"],function(p,k){var f={};return p(null,{declaredClass:"davinci.Workbench_Menu",
_rearrangePalettes:function(e){var b,d,n;e?((d=k.getExtensions("davinci.editor",function(a){return e?a.id===e.editorID:!1}))&&0<d.length&&(b=d[0].palettePerspective),d=e._rightPaletteExpanded,n=e._leftPaletteExpanded):b=k.initialPerspective||"davinci.ui.main";b&&((b=k.getExtension("davinci.perspective",b))||console.error("---error"),dojo.forEach(b.views,function(a){var b=a.viewID,h=a.position;0>h.indexOf("bottom")&&(h+="-top");if(b=dijit.byId(b)){var g=b.getParent(),h=mainBody.tabs.perspective[h];
g!=h&&(g&&g.removeChild(b),a.hidden||(h.addChild(b),g=h));g&&(a.hidden?g.removeChild(b):a.selected&&(g._maqDontExpandCollapse=!0,g.selectChild(b),delete g._maqDontExpandCollapse))}}));e&&(e.hasOwnProperty("_rightPaletteExpanded")&&(e._rightPaletteExpanded=d),e.hasOwnProperty("_leftPaletteExpanded")&&(e._leftPaletteExpanded=n))},_nearlyCollapsed:function(e){e=dojo.style(e,"width");"string"==typeof e&&(e=parseInt(e));return 91>e},_expandCollapsePaletteContainer:function(e){if(e&&e.domNode&&(e=davinci.Workbench.findPaletteContainerNode(e.domNode),
e.id)){var b=e._maqExpanded,d;this._nearlyCollapsed(e)&&(b=!1,d=91<=f[e.id].expandToSize?f[e.id].expandToSize:f[e.id].initialExpandToSize);b?this.collapsePaletteContainer(e):this.expandPaletteContainer(e,{expandToSize:d})}},_expandCollapsePaletteContainers:function(e,b){var d=dijit.byId("left_mainBody"),n=dijit.byId("right_mainBody");if(e){var a=k.getExtensions("davinci.editor",function(a){return a.id===e.editorID});if(a&&0<a.length){var a=a[0].expandPalettes,m;d&&((m=e&&e.hasOwnProperty("_leftPaletteExpanded")?
e._leftPaletteExpanded:a&&0<=a.indexOf("left"))?this.expandPaletteContainer(d.domNode,b):this.collapsePaletteContainer(d.domNode,b));n&&((m=e&&e.hasOwnProperty("_rightPaletteExpanded")?e._rightPaletteExpanded:a&&0<=a.indexOf("right"))?this.expandPaletteContainer(n.domNode,b):this.collapsePaletteContainer(n.domNode,b))}}else d&&this.collapsePaletteContainer(d.domNode,b),n&&this.collapsePaletteContainer(n.domNode,b)},findPaletteContainerNode:function(e){for(var b;e&&"BODY"!=e.tagName;){if(dojo.hasClass(e,
"davinciPaletteContainer")){b=e;break}e=e.parentNode}return b},collapsePaletteContainer:function(e,b){if((e=davinci.Workbench.findPaletteContainerNode(e))&&e.id){var d=e.id,n=dojo.style(e,"width"),a=dijit.byNode(e),m=dojo.query("[role\x3dtablist]",e);if(a&&0<m.length){var m=dojo.marginBox(m[0]),h=a.getParent();h&&h.resize&&m&&m.w&&(this._nearlyCollapsed(e)||b&&b.dontPreserveWidth||(f[d].expandToSize=n),e.style.width=m.w+"px",h.resize(),a._isCollapsed=!0)}dojo.removeClass(e,"maqPaletteExpanded");e._maqExpanded=
!1;davinci.Workbench._repositionFocusContainer();if(b=k.currentEditor)"left_mainBody"==e.id?b._leftPaletteExpanded=!1:"right_mainBody"==e.id&&(b._rightPaletteExpanded=!1)}},expandPaletteContainer:function(e,b){b=b&&b.expandToSize;if((e=davinci.Workbench.findPaletteContainerNode(e))&&e.id){var d=e.id,n=dijit.byNode(e);b&&(f[d].expandToSize=b);n&&f[d].expandToSize&&(b=n.getParent())&&b.resize&&(e.style.width=f[d].expandToSize+"px",b.resize(),delete n._isCollapsed);dojo.addClass(e,"maqPaletteExpanded");
e._maqExpanded=!0;davinci.Workbench._repositionFocusContainer();if(b=k.currentEditor)"left_mainBody"==e.id?b._leftPaletteExpanded=!0:"right_mainBody"==e.id&&(b._rightPaletteExpanded=!0)}}})})},"davinci/ui/widgets/OutlineTree":function(){define(["dojo/_base/declare"],function(p){return p(null,{})})},"davinci/davinci_":function(){define("dijit/dijit ./Workbench ./ve/palette/HtmlWidgets ./ve/views/StatesView ./ve/views/SwitchingStyleView ./actions/UndoAction ./actions/SelectLayoutAction ./actions/RedoAction ./ve/actions/CopyAction ./ve/actions/CutAction ./ve/actions/DeleteAction ./ve/actions/PasteAction ./ve/actions/DuplicateAction ./ve/actions/EditValueAction ./ve/actions/EditPropertiesAction ./ve/actions/SurroundAction ./ve/actions/SelectParentAction ./ve/actions/SelectAncestorAction ./ve/actions/UnselectAllAction ./ve/actions/ArrangeAction ./ve/actions/MoveToFrontAction ./ve/actions/MoveToBackAction ./ve/actions/MoveForwardAction ./ve/actions/MoveBackwardAction ./ve/actions/OtherAction ./ve/actions/AddState ./ve/actions/RemoveState ./ve/actions/ModifyState ./ve/actions/ManageStates ./ve/actions/NewWidgetsCurrentState ./ve/actions/HighlightBaseWidgets ./ve/actions/ShowInOutline ./ve/PageEditor ./html/ui/HTMLEditor ./ve/prefs/HTMLEditPreferences dijit/layout/LayoutContainer ./commands/OrderedCompoundCommand ./version".split(" "),
function(){})},"davinci/ve/palette/HtmlWidgets":function(){define(["dojo/_base/declare","davinci/workbench/ViewPart","davinci/ve/palette/Palette"],function(p,k,f){return p("davinci.ve.palette.HtmlWidgets",k,{constructor:function(e,b){dojo.subscribe("/davinci/ui/editorSelected",dojo.hitch(this,this._editorSelected))},_editorSelected:function(e){e.editor&&e.editor.supports("palette")?(this.setContext([e.editor.getContext()]),dojo.removeClass(this.palette.domNode,"dijitHidden")):(this.palette.domNode.scrollTop=
0,dojo.addClass(this.palette.domNode,"dijitHidden"))},postCreate:function(){this.inherited(arguments);this.attachToolbar();this.palette=new f({toolbarDiv:this.toolbarDiv});this.palette.descriptors="dijit,dojox,html,OpenAjax";this.setContent(this.palette);this.palette._loadPalette();dojo.addClass(this.palette.domNode,"dijitHidden")},setContext:function(e){this.palette.setContext(e[0])}})})},"davinci/workbench/ViewPart":function(){define(["dojo/_base/declare","./_ToolbaredContainer","../ve/States",
"../Runtime"],function(p,k,f,e){return p("davinci.workbench.ViewPart",k,{constructor:function(b,d){this.viewExt=b.view;this.subscriptions=[];this.publishing={}},startup:function(){this.inherited(arguments);this.domNode.view=this;this.viewExt.startup&&this.viewExt.startup()},subscribe:function(b,d){this.subscriptions.push(dojo.subscribe(b,this,d))},publish:function(b,d){this.publishing[b]=!0;try{dojo.publish(b,d)}catch(n){console.error(n)}delete this.publishing[b]},destroy:function(){dojo.forEach(this.subscriptions,
dojo.unsubscribe);delete this.subscriptions},_getViewActions:function(){var b=this.toolbarID||this.viewExt.id,d=[];e.getExtensions("davinci.viewActions",function(n){if(b==n.viewContribution.targetID)return d.push(n.viewContribution),!0});return d}})})},"davinci/workbench/_ToolbaredContainer":function(){define(["dojo/_base/declare","dijit/layout/_LayoutWidget","dijit/_Templated"],function(p,k,f){return p("davinci.workbench._ToolbaredContainer",[k,f],{templateString:"\x3cdiv\x3e\x3cdiv dojoAttachPoint\x3d'titleBarDiv' class\x3d'palette_titleBarDiv'\x3e\x3c/div\x3e\x3cdiv dojoAttachPoint\x3d'toolbarDiv' class\x3d'toolbaredContainer_toolbarDiv'\x3e\x3c/div\x3e\x3cdiv dojoAttachPoint\x3d'containerNode'\x3e\x3c/div\x3e\x3c/div\x3e",
gutters:!1,_toolbarCreated:{},layout:function(){var e=[{domNode:this.titleBarDiv,layoutAlign:"top"},{domNode:this.toolbarDiv,layoutAlign:"top"},{domNode:this.containerNode,layoutAlign:"client"}];dijit.layout.layoutChildren(this.domNode,this._contentBox,e);this._containerContentBox=dijit.layout.marginBox2contentBox(this.containerNode,e[2]);var b=dijit.byNode(this.containerNode);b&&b.resize&&b.resize(this._containerContentBox);dojo.marginBox(this.containerNode,e[2])},setContent:function(e){this.mainWidget=
e;e=e.domNode||e;dojo.place(e,this.containerNode,"replace");this.containerNode=e;this.toolbarCreated(this.declaredClass)||this._createToolbar(this.declaredClass);this.titleBarDiv.innerHTML='\x3cspan class\x3d"paletteCloseBox"\x3e\x3c/span\x3e\x3cspan class\x3d"titleBarDivTitle"\x3e'+this.title+"\x3c/span\x3e";e=dojo.query(".paletteCloseBox",this.titleBarDiv);0<e.length&&dojo.connect(e[0],"click",this,function(b){davinci.Workbench.collapsePaletteContainer(b.currentTarget)});this._started&&this.layout()},
removeContent:function(){var e=dojo.doc.createElement("div");dojo.place(e,this.containerNode,"replace");this.containerNode=e;this.mainWidget&&this.mainWidget.destroy();delete this.mainWidget},_getViewActions:function(){},getTopAdditions:function(){},_createToolbar:function(e){var b=require("davinci/Workbench"),d=this.getToolbarDiv(),n=this.getTopAdditions();n&&d.appendChild(n);this.toolbarMenuActionSets&&(n="m"+Date.now(),d=dojo.create("span",{id:n+"_menucontainer","class":"paletteDropdown"},d),d=
dojo.create("span",{id:n+"_menu"},d),b.updateMenubar(d,this.toolbarMenuActionSets));(d=this._getViewActions())&&d.length&&(n=dojo.create("div",{"class":"toolbaredContainer_toolbarDiv"}),n=dojo.create("span",{style:{display:"inline-block"}},n),b=b._createToolBar("toolbarPath",n,d,this._getViewContext()),dojo.style(b.domNode,{display:"inline-block","float":"left"}),this.toolbarCreated(e,b))},_getViewContext:function(){return this},getToolbarDiv:function(){return this.toolbarDiv},toolbarCreated:function(e,
b){1<arguments.length&&(this._toolbarCreated[e]=b);return this._toolbarCreated[e]},attachToolbar:function(){var e=this.toolbarCreated(this.declaredClass),b=this.getToolbarDiv();e&&e.domNode&&b&&(b.innerHTML="",b.appendChild(e.domNode))}})})},"davinci/ve/States":function(){"undefined"===typeof davinci&&(davinci={});davinci.AppStatesDontInitialize=!0;define("dojo/_base/declare dojo/_base/connect dojo/query dojo/dom-class dojo/dom-style dojo/_base/window dijit/registry davinci/Runtime davinci/Workbench davinci/maqetta/AppStates ./utils/GeomUtils ./commands/EventCommand ./commands/StyleCommand davinci/ve/utils/StyleArray davinci/workbench/Preferences davinci/lang/ve".split(" "),
function(p,k,f,e,b,d,n,a,m,h,g,c,q,A,u,x){var z=document;p=p(h,{_update:function(c,b){a.currentEditor&&"davinci.ve.PageEditor"==a.currentEditor.declaredClass&&c&&c._dvWidget&&(c._maqAppStates||!c._maqDeltas)&&this._refresh(c._dvWidget)},_refresh:function(c){var a=c.getParent();a.dijitWidget?this._refresh(a):c&&c.resize&&c.resize()},_updateEvents:function(a,b,g){if(a&&a._dvWidget){a=a._dvWidget;var h=["onclick","onmouseover","onmouseout","onfocus","onblur"],d,m;for(m in h){var n=h[m],e=a&&a.properties&&
a.properties[n];if("string"==typeof e&&0<=e.indexOf("davinci.states.setState")){var f=e,e=e.replace("'"+b+"'","'"+g+"'");e!==f&&(d=d||{},d[n]=e)}}if(b=this.getContext())d=new c(a,d),b.getCommandStack().execute(d)}},normalize:function(c,a,b,g){switch(c){case "style":var h=this.getStatesListCurrent(a);for(c=0;c<h.length;c++)h[c]="Normal";if(a=this.getStyle(a,h,b))for(c=0;c<a.length;c++)a[c][b]&&(g=a[c][b])}return g},normalizeArray:function(c,a,b,g){g=dojo.clone(g);switch(c){case "style":var h=this.getStatesListCurrent(a);
for(c=0;c<h.length;c++)h[c]="Normal";if(a=this.getStyle(a,h,b)){for(c=0;c<a.length;c++){b=a[c];for(var d in b)for(b=g.length-1;0<=b;b--){var h=g[b],m;for(m in h)if(m==d){g.splice(b,1);break}}}g=g.concat(a)}}return g},getEditor:function(){return a.currentEditor},getContext:function(){var c=this.getEditor();return c&&(c.getContext&&c.getContext()||c.context)},getDocument:function(){var c=this.getContext();return c&&c.getDocument&&c.getDocument()},resetState:function(c){if(c){var a=this.getStateContainersForNode(c);
c=this.getFocus(c.ownerDocument.body);for(var b=0;b<a.length;b++){var g=a[b],h=this.getState(g);this.setState(h,g,{focus:c&&g==c.stateContainerNode&&h==c.state,updateWhenCurrent:!0,silent:!1})}}},_updateSrcState:function(c,a){var b=c&&c._dvWidget;if(b){var g=b._srcElement.getAttribute(davinci.states.APPSTATES_ATTRIBUTE),h=b._srcElement.getAttribute(davinci.states.DELTAS_ATTRIBUTE);b&&b._srcElement&&(c=this.serialize(c),c.maqAppStates&&c.maqAppStates.trim(),c.maqAppStates?b._srcElement.addAttribute(davinci.states.APPSTATES_ATTRIBUTE,
c.maqAppStates):b._srcElement.removeAttribute(davinci.states.APPSTATES_ATTRIBUTE),c.maqDeltas&&c.maqDeltas.trim(),c.maqDeltas?b._srcElement.addAttribute(davinci.states.DELTAS_ATTRIBUTE,c.maqDeltas):b._srcElement.removeAttribute(davinci.states.DELTAS_ATTRIBUTE),c=b._srcElement.getAttribute(davinci.states.APPSTATES_ATTRIBUTE),b=b._srcElement.getAttribute(davinci.states.DELTAS_ATTRIBUTE),(g!==c||h!==b)&&(g=this.getEditor())&&g._visualChanged&&g._visualChanged(a))}},_removeStateFromNodeRecursive:function(c,
a){var b=c._dvWidget;if(c&&b&&a)for(this._removeStateFromNode(c,a),c=b.getChildren(),b=0;b<c.length;b++)this._removeStateFromNodeRecursive(c[b].domNode,a)},_removeStateFromNode:function(c,a){if(c&&c._maqDeltas&&c._maqDeltas[a]){delete c._maqDeltas[a];a=!1;for(var b in c._maqDeltas)if("undefined"!==b){a=!0;break}a||delete c._maqDeltas;this._updateSrcState(c)}},removeUnusedStates:function(c){if(c){c=c.getAllWidgets();for(var a=0;a<c.length;a++){var b=c[a].domNode;if("BODY"!==b.tagName&&b&&b._maqDeltas){var g=
this.getAllStatesForNode(b),h;for(h in b._maqDeltas)"undefined"!==h&&0>g.indexOf(h)&&this._removeStateFromNode(b,h)}}}},_getStateIndex:function(c){return c&&"Normal"!=c&&"undefined"!=c?c:"undefined"},getCurrentStateIndex:function(){return this._getStateIndex(this.getState())},getApplyToStateIndex:function(c){var a=this.getState();return this._getStateIndex("current"===c&&a&&"Normal"!=a&&"undefined"!=a?a:void 0)},getEffectiveDisplayValue:function(c,a,g,h){c=a?a.domNode:null;a="none";var d=g||"undefined";
if(h&&"string"==typeof h[d]&&"$MAQ_DELETE_PROPERTY$"!=h[d])a=h[d],m=!0;else if(c){var m=!1;if(c._maqDeltas&&(!h||"$MAQ_DELETE_PROPERTY$"!=h[d])){var n=c._maqDeltas[g]&&c._maqDeltas[g].style;if(n)for(g=0;g<n.length;g++){var e=n[g],f;for(f in e)"display"==f&&(a=e[f],m=!0)}}if(!m){if(h&&"string"==typeof h.undefined)a=h.undefined;else{h=c._maqDeltas&&c._maqDeltas.undefined&&c._maqDeltas.undefined.style;d=!1;if(h)for(g=0;g<h.length;g++)for(f in e=h[g],e)"display"==f&&(a=e[f],d=!0);d||(a=b.get(c,"display"))}d=
"undefined"}if(0==c.offsetLeft&&0==c.offsetTop&&0==c.offsetWidth&&0==c.offsetHeight)a="none";else for(;c&&"BODY"!=c.tagName.toUpperCase();){if(c&&c.ownerDocument&&c.ownerDocument.defaultView&&"none"==b.get(c,"display")){a="none";break}c=c.parentNode}}else a="none";return{effectiveDisplayValue:a,effectiveState:d}},propertyDefinedForAnyCurrentState:function(c,a){var b,g=c._maqDeltas;if(g){c=this.getStateContainersForNode(c);var h=c.length-1;a:for(;0<=h;h--){var d=this.getState(c[h]),m=d&&d!=this.NORMAL?
d:"undefined";if(m=g[m]&&g[m].style)for(var n=0;n<m.length;n++)for(var e=m[n],f=0;f<a.length;f++)if(e.hasOwnProperty(a[f])){b=d;break a}}}return b},_customStateActive:function(c){return c?this.getState(c.rootNode):!1},updateStateIcons:function(c){c&&c.editor&&c.editor==a.currentEditor&&"davinci.ve.PageEditor"==c.editor.declaredClass&&d.withDoc(z,function(){var a=f(".manageStatesButton")[0],b=n.byNode(a),a=f(".manageStatesIcon")[0];b&&a&&(this.manageStatesActive(c)?(e.remove(a,"manageStatesIconDisabled"),
b.set("disabled",!1)):(e.add(a,"manageStatesIconDisabled"),b.set("disabled",!0)));var b=u.getPreferences("davinci.ve.editorPrefs",davinci.Workbench.getProject()).newWidgetsCurrentState,a=f(".newWidgetsCurrentStateButton")[0],g=n.byNode(a),a=f(".newWidgetsCurrentStateIcon")[0];g&&a&&(this.newWidgetsCurrentStateActive(c)?e.remove(a,"newWidgetsCurrentStateIconDisabled"):e.add(a,"newWidgetsCurrentStateIconDisabled"),b?(e.remove(a,"newWidgetsCurrentStateIconOff"),e.add(a,"newWidgetsCurrentStateIconOn"),
g.set("title",x.NewWidgetsCurrentStateTitleCurrentState)):(e.remove(a,"newWidgetsCurrentStateIconOn"),e.add(a,"newWidgetsCurrentStateIconOff"),g.set("title",x.NewWidgetsCurrentStateTitleBackground)))}.bind(this))},manageStatesActive:function(c){return c&&c.getSelection().length},newWidgetsCurrentStateActive:function(c){return this._customStateActive(c)},highlightBaseWidgetsActive:function(c){return this._customStateActive(c)},updateHighlightsBaseStateWidgets:function(c){},initialize:function(){this.subscribed=
!0}});davinci.ve.states=new p;davinci.ve.states.initialize();return davinci.ve.states})},"davinci/maqetta/AppStates":function(){define("dojo/_base/connect dojo/dom-style dojo/dom dojo/_base/html dojo/_base/window dojo/_base/array dojo/parser require dojo/json dojo/_base/lang".split(" "),function(p,k,f,e,b,d,n,a,m,h){k=function(){};k.prototype={NORMAL:"Normal",DELTAS_ATTRIBUTE:"data-maq-deltas",DELTAS_ATTRIBUTE_P6:"dvStates",APPSTATES_ATTRIBUTE:"data-maq-appstates",APPSTATES_ATTRIBUTE_P6:"dvStates",
reImportant:/^(.*)(!\ *important)(.*)/,isStateContainer:function(c){return!(!c||!c._maqAppStates)},getStateContainersForNode:function(c){for(var a=[];c;){c._maqAppStates&&a.splice(0,0,c);if("BODY"==c.tagName)break;c=c.parentNode}return a},getAllStateContainers:function(c){function a(c){c._maqAppStates&&b.push(c);c=g._getChildrenOfNode(c);for(var h=0;h<c.length;h++)a(c[h])}var b=[],g=this;a(c);return b},getStatesArray:function(c,a,b,g){var h=[];if(c)for(c=c.parentNode;c;){if(c._maqAppStates)if(c==
g)h.splice(0,0,{node:c,oldState:a,newState:b});else{var d=c._maqAppStates.states?c._maqAppStates.states.current:void 0;h.splice(0,0,{node:c,oldState:d,newState:d})}if("BODY"==c.tagName)break;c=c.parentNode}return h},findStateContainer:function(c,a){if(c)for(c=c.parentNode;c;){if(c._maqAppStates&&(!a||a==this.NORMAL||c._maqAppStates.states&&0<=c._maqAppStates.states.indexOf(a)))return c;if("BODY"==c.tagName)break;c=c.parentNode}},getAllStatesForNode:function(c){var a=[this.NORMAL];if(c)for(c=c.parentNode;c;){if(c._maqAppStates&&
c._maqAppStates.states)for(var b=c._maqAppStates.states?c._maqAppStates.states:[],g=0;g<b.length;g++)a.push(b[g]);if("BODY"==c.tagName)break;c=c.parentNode}return a},getStatesListCurrent:function(c){var a=[];if(c)for(c=c.parentNode;c;){c._maqAppStates&&a.splice(0,0,c._maqAppStates.current);if("BODY"==c.tagName)break;c=c.parentNode}return a},getAllCurrentStates:function(c){c=this.getAllStateContainers(c);for(var a=[],b=0;b<c.length;b++){var g=c[b],h=this.getState(g);a.push({stateContainerNode:g,state:h})}return a},
getStates:function(c){var a=c&&c._maqAppStates;c=["Normal"];if(a)for(var a=a.states?a.states:[],b=0;b<a.length;b++){var g=a[b];"Normal"!=g&&c.push(g)}return c},_getSCNodeFromElemOrEvent:function(c,a){a&&a.tagName&&a.nodeName?a=a._maqAppStates?a:this.findStateContainer(a,c):a&&a.target&&a.currentTarget?(a=a.currentTarget,a._maqAppStates||(a=this.findStateContainer(a,c))):a=this.getContainer();return a},_updateSrcState:function(c){},hasState:function(c,a){return!!(c&&c._maqAppStates&&c._maqAppStates.states&&
0<=c._maqAppStates.states.indexOf(a))},getState:function(c){return c&&c._maqAppStates&&c._maqAppStates.current},setState:function(c,a,b){var g=b?b.updateWhenCurrent:!1,h=b?b.silent:!1,d=b?b.focus:!1;(a=this._getSCNodeFromElemOrEvent(c,a))&&a._maqAppStates&&(g||a._maqAppStates.current!=c)&&(g=a._maqAppStates.current,this.isNormalState(c)?(a._maqAppStates.hasOwnProperty("current")&&delete a._maqAppStates.current,c=void 0):a._maqAppStates.current=c,d&&this._setFocus(c,a),b&&b.hasOwnProperty("initial")&&
(b.initial?a._maqAppStates.initial=c:a._maqAppStates.initial&&delete a._maqAppStates.initial),h||p.publish("/maqetta/appstates/state/changed",[{node:a,newState:c,oldState:g,stateContainerNode:a}]),this._updateSrcState(a,!c))},getInitial:function(c){return c&&c._maqAppStates&&c._maqAppStates.initial},getFocus:function(c){if(!c)return null;c=this.getAllStateContainers(c);for(var a=0;a<c.length;a++){var b=c[a]._maqAppStates;if(b&&b.hasOwnProperty("focus"))return{stateContainerNode:c[a],state:b.focus}}return null},
_setFocus:function(c,a){if(a&&a._maqAppStates){var b=a.ownerDocument&&a.ownerDocument.body;if(b){var g=this.getFocus(b);if(!g||g.stateContainerNode!=a||g.state!=c){for(var g=this.getAllStateContainers(b),h=0;h<g.length;h++)(b=g[h]._maqAppStates)&&delete b.focus;a._maqAppStates.focus=c}}}},isNormalState:function(c){0==arguments.length&&(c=this.getState());return!c||c==this.NORMAL},_styleArrayMixin:function(c,a){if(a){for(var b=0;b<a.length;b++){var g=a[b],h;for(h in g)for(g=c.length-1;0<=g;g--)c[g].hasOwnProperty(h)&&
c.splice(g,1)}for(b=0;b<a.length;b++)c.push(a[b])}},getStyle:function(c,a,b){for(var g,h=[],d=0;d<a.length;d++)if(g=a[d],g=c&&c._maqDeltas&&c._maqDeltas[g]&&c._maqDeltas[g].style,this._styleArrayMixin(h,g),2<arguments.length&&h)for(g=h.length-1;0<=g;g--){var m=h[g],n;for(n in m)if(n!=b){h.splice(g,1);break}}return h},hasStyle:function(c,a,b){if(c&&b)if(c._maqDeltas&&c._maqDeltas[a]&&c._maqDeltas[a].style)for(c=c._maqDeltas[a].style,a=0;a<c[a];a++){if(c[a].hasProperty(b))return!0}else return!1},setStyle:function(c,
a,b,g){if(c&&b){c._maqDeltas=c._maqDeltas||{};c._maqDeltas[a]=c._maqDeltas[a]||{};c._maqDeltas[a].style=c._maqDeltas[a].style||[];var h=c._maqDeltas[a].style;if(b)for(var d=0;d<b.length;d++){var m=b[d],n;for(n in m)for(m=h.length-1;0<=m;m--){var e=h[m],f;for(f in e)if(n==f){h.splice(m,1);break}}}var q;if(b)for(m=0;m<b.length;m++)for(var u in b[m])d=b[m][u],"undefined"!=typeof d&&null!==d&&("undefined"==typeof q&&(q=[]),n={},n[u]=this._getFormattedValue(u,d),q.push(n));c._maqDeltas[a].style=h&&q?h.concat(q):
h?h:q?q:void 0;g||p.publish("/davinci/states/state/style/changed",[{node:c,state:a,style:b}]);this._updateSrcState(c)}},_convertStyleName:function(c){if(0<=c.indexOf("-")){var a=c.split("-");c=a[0];for(var b=1;b<a.length;b++){var g=a[b];c+=g.charAt(0).toUpperCase()+g.substring(1)}}return c},_DYNAMIC_PROPERTIES:{width:1,height:1,top:1,right:1,bottom:1,left:1},_getFormattedValue:function(c,b){if(c in this._DYNAMIC_PROPERTIES){if("string"!=typeof b)return b+"px";c=a("dojo/_base/lang").trim(b);/^[-+]?[0-9]*\.?[0-9]+$/.test(c)&&
(b=c+"px")}return b},_getStatesListUsingPropName:function(c,a){var b=[];if(c)for(var g=0;g<c.length;g++)b.push(c[g][a]);return b},_resetAndCacheNormalStyle:function(c,a){if(c&&a)for(var b=0;b<a.length;b++){var g=this._getStatesListUsingPropName(a,"oldState"),d=this.getStyle(c,g),g=this._getStatesListUsingPropName(a),g=this.getStyle(c,g);if(d)for(var m=0;m<d.length;m++){var n=d[m],e;for(e in n)n=this._convertStyleName(e),c.style[n]=""}if(g)for(d=0;d<g.length;d++){var m=g[d],f;for(f in m){var n=this._convertStyleName(f),
q=c.style,y=this._getFormattedValue(f,m[f])+"",k=y?y.match(this.reImportant):null;k?(y=k[1]+k[3],y=h.trim(y),q.setProperty?q.setProperty(f,y,"important"):c.style[n]=y):c.style[n]=y}}}},_update:function(c,a){if(c&&c._maqDeltas){var b=this._getStatesListUsingPropName(a,"newState"),b=this.getStyle(c,b);this._resetAndCacheNormalStyle(c,a);if(b)for(a=0;a<b.length;a++){var g=b[a],d;for(d in g){var m=this._convertStyleName(d),n=g[d]+"",e=n?n.match(this.reImportant):null;e?(n=e[1]+e[3],n=h.trim(n),g.setProperty?
g.setProperty(d,n,"important"):c.style[m]=n):c.style[m]=n}}}},isContainer:function(c){var a=!1;if(c){var b=this.getDocument();if(c===(b&&b.body)||"BODY"==c.tagName)a=!0}return a},getContainer:function(){return document.body},add:function(c,a,b){c&&!this.hasState(c,a)&&(b=b&&b.index,c._maqAppStates=c._maqAppStates||{},c._maqAppStates.states=c._maqAppStates.states||[],"number"==typeof b&&0<=b?c._maqAppStates.states.splice(b,0,a):c._maqAppStates.states.push(a),p.publish("/davinci/states/state/added",
[{node:c,state:a}]),this._updateSrcState(c))},remove:function(c,a){if(c&&c._maqAppStates&&c._maqAppStates.states&&this.hasState(c,a)){var b=c._maqAppStates.states.indexOf(a);if(!(0>b)){var g=this.getState(c),h=this.getFocus(c.ownerDocument.body);c._maqAppStates.states.splice(b,1);b={};h&&h.stateContainerNode==c&&h.state==a&&(b.focus=!0,b.updateWhenCurrent=!0);a==g&&this.setState(void 0,c,b);p.publish("/davinci/states/state/removed",[{node:c,state:a}]);this._updateSrcState(c)}}},rename:function(c,
a){if(!a)return!1;var b=a.oldName;a=a.newName;if(!(c&&c._maqAppStates&&c._maqAppStates.states&&c._maqAppStates.states.length))return!1;var g=c._maqAppStates.states;if(0>g.indexOf(b)||0<=g.indexOf(a))return!1;g.splice(g.indexOf(b),1,a);c._maqAppStates.focus===b&&(c._maqAppStates.focus=a);c._maqAppStates.current===b&&(c._maqAppStates.current=a);g=[c];this.getState(c);for(g=g.concat(this._getChildrenOfNode(c));g.length;){var h=g.shift();h._maqDeltas&&h._maqDeltas[b]&&(h._maqDeltas[a]=h._maqDeltas[b],
delete h._maqDeltas[b]);var g=g.concat(this._getChildrenOfNode(h)),d=this.getStatesArray(h,null,a,c);this._update(h,d);this._updateSrcState(h)}p.publish("/davinci/states/state/renamed",[{node:h,oldName:b,newName:a,stateContainerNode:h}]);return!0},_isEmpty:function(c){for(var a in c)if(c.hasOwnProperty(a))return!1;return!0},stringifyWithQuotes:function(c){str=m.stringify(c);str=str.replace(/(\\)?'/g,function(c,a){return a?c:"\\'"});return str=str.replace(/"/g,"'")},serialize:function(c){var b=this,
g=function(g){var h=null;c[g]&&(g=a("dojo/_base/lang").clone(c[g]),delete g.undefined,b._isEmpty(g)||(h=this.stringifyWithQuotes(g)));return h}.bind(this),h={};if(!c)return h;var d=g("_maqAppStates");"string"==typeof d&&(h.maqAppStates=d);g=g("_maqDeltas");"string"==typeof g&&(h.maqDeltas=g);return h},deserialize:function(c,a){"string"==typeof c&&(c=c.replace(/(\\)?'/g,function(c,a){return a?"'":'"'}),c=m.parse(c),this._migrate_m4_m5(c),c=this._migrate_m6_m7(c,a&&a.isBody));return c},_migrate_m4_m5:function(c){for(var a in c){var b=
c[a];if(b){var g=b.style;if(g&&!g.length){var h=[],d;for(d in g){var m={};m[d]=g[d];h.push(m)}b.style=h}}}},_migrate_m6_m7:function(c,a){if(!c||c.states)return c;if(a){a=[];for(var b in c)"current"!=b&&a.push(b);if(0<a.length)return{states:a}}else return delete c.current,c},store:function(c,a,b){if(c){this.clear(c);var g="BODY"==c.tagName;a&&(c._maqAppStates=this.deserialize(a,{isBody:g}));b&&(c._maqDeltas=this.deserialize(b,{isBody:g}));p.publish("/davinci/states/stored",[])}},retrieve:function(c){if(c){var a=
c.getAttribute(this.APPSTATES_ATTRIBUTE);a||"BODY"!==c.tagName||(a=c.getAttribute(this.APPSTATES_ATTRIBUTE_P6));var b=c.getAttribute(this.DELTAS_ATTRIBUTE);b||"BODY"===c.tagName||(b=c.getAttribute(this.DELTAS_ATTRIBUTE_P6));return{maqAppStates:a,maqDeltas:b}}},clear:function(c){c&&(c._maqAppStates&&delete c._maqAppStates,c._maqDeltas&&delete c._maqDeltas)},_parseStyleValues:function(c){var a=[];c&&d.forEach(c.split(";"),function(c){var b=c.indexOf(":");if(0<b){var g=c.substring(0,b).trim();c=c.substring(b+
1).trim();b={};b[g]=c;a.push(b)}});return a},transferElementStyle:function(c,a){c&&(c=c._maqDeltas,a=this._parseStyleValues(a),c.undefined||(c.undefined={}),c.undefined.style=a)},getDocument:function(){return document},shouldInitialize:function(){return!davinci.AppStatesDontInitialize},_getChildrenOfNode:function(c){for(var a=[],b=0;b<c.childNodes.length;b++){var g=c.childNodes[b];1===g.nodeType&&a.push(g)}return a},initialize:function(){this.subscribed||(p.subscribe("/maqetta/appstates/state/changed",
this,function(c){if(!c.editorClass)for(var a=davinci.states._getChildrenOfNode(c.node);a.length;){var b=a.shift();davinci.states.isContainer(b)||(a=a.concat(davinci.states._getChildrenOfNode(b)));var g=this.getStatesArray(b,c.oldState,c.newState,c.stateContainerNode);davinci.states._update(b,g)}}),this.subscribed=!0)}};"undefined"===typeof davinci&&(davinci={});var g=davinci.states=new k;(function(){g.initialize();g.shouldInitialize()&&"undefined"!=typeof a&&a(["dojo/_base/lang","dojo/query","dojo/aspect"],
function(c,h,d){var m=0,f=!1;c=function(c){f||(d.around(c,"parse",function(c){var a={};return function(h,d){var m;m=(m=!d&&h&&h.rootNode?h.rootNode:h)?e.byId(m):b.body();A(a);m=c.apply(this,arguments);var n=g.getDocument(),f,q,u,z,x;for(x in a){var v;if(v="body"==x?n.body:n.querySelectorAll("."+x)[0]){var B="BODY"==v.tagName;f=q=u=z=null;B?f=a[x]:(f=a[x].maqAppStates,q=a[x].maqDeltas);f&&(u=g.deserialize(f,{isBody:B}));q&&(z=g.deserialize(q,{isBody:B}));u&&(u.initial?u.current=u.initial:(u.focus&&
delete u.focus,delete u.current));g.store(v,u,z);q&&davinci.states.transferElementStyle(v,a[x].style)}}x=g.getAllStateContainers(n.body);for(n=0;n<x.length;n++)f=x[n],f._maqAppStates&&"string"==typeof f._maqAppStates.current&&g.setState(f._maqAppStates.current,f,{updateWhenCurrent:!0,focus:f._maqAppStates.focus});return m}}),dojo.parser.parse=c.parse,f=!0)};try{var q=a("dojox/mobile/parser");c.apply(q)}catch(w){}q||c.call(null,n);var A=function(c){var a=g.getDocument();if(!a.body._maqAlreadyPreserved){var b=
davinci.states.retrieve(a.body);b&&b.maqAppStates&&(c.body=b.maqAppStates);a.body._maqAlreadyPreserved=!0}h("*",a).forEach(function(a){var b=a.getAttribute("class");b||(b="");if(!a._maqAlreadyPreserved&&0>b.indexOf("maqTempClass")){a._maqAlreadyPreserved=!0;var h=g.retrieve(a);if("BODY"!=a.tagName&&h&&(h.maqAppStates||h.maqDeltas)){var d="maqTempClass"+m;a.setAttribute("class",b+" "+d);m++;c[d]={};h.maqAppStates&&(c[d].maqAppStates=h.maqAppStates);h.maqDeltas&&(c[d].maqDeltas=h.maqDeltas);a.style?
c[d].style=a.style.cssText:console.error("States.js _preserveStates. No value for node.style.")}}})}})})();davinci.Workbench||"undefined"==typeof dijit||p.subscribe("/maqetta/appstates/state/changed",function(c){var a=c&&c.node&&c.node.ownerDocument&&c.node.ownerDocument.defaultView&&c.node.ownerDocument.defaultView.dijit.byId;a&&(c.newState&&!c.newState.indexOf("_show:")?(c=a(c.newState.substring(6)))&&c.show&&c.show():c.oldState&&!c.oldState.indexOf("_show:")&&(c=a(c.oldState.substring(6)))&&c.hide&&
c.hide())});return k})},"davinci/ve/commands/EventCommand":function(){define(["dojo/_base/declare","davinci/ve/widget"],function(p,k){return p("davinci.ve.commands.EventCommand",null,{name:"EventCommand",constructor:function(f,e){this._oldId=f?f.id:void 0;this._properties=e||{}},setContext:function(f){this._context=f},execute:function(){if(this._oldId&&this._properties){var f=k.byId(this._oldId);this._oldProps=f.properties||{};f.setProperties(this._properties,!0);if(f.isHtmlWidget){var e=f.domNode,
b;for(b in this._properties)this._properties[b]||e.removeAttribute(b)}this._newId=this._oldId;dojo.publish("/davinci/ui/widgetPropertiesChanged",[[f]])}},undo:function(){if(this._newId){var f=k.byId(this._newId),e=f.domNode,b=f._srcElement,d;for(d in this._properties)this._oldProps[d]||(e.removeAttribute(d),b.removeAttribute(d));f.setProperties(this._oldProps);dojo.publish("/davinci/ui/widgetPropertiesChanged",[[f]])}}})})},"davinci/ve/widget":function(){define("davinci/html/HTMLElement ../Runtime ./metadata dojo/Deferred dojo/_base/lang ./DijitWidget ./GenericWidget ./DeliteWidget ./HTMLWidget ./ObjectWidget dojo/window".split(" "),
function(p,k,f,e,b,d,n,a,m,h,g){var c={},q=function(c,a,b){for(var g=0;g<b.children.length;g++){var h=a.childNodes[g],d=b.children[g];h&&1==h.nodeType&&"HTMLElement"==d.elementType&&(h.id=c.getUniqueID(d),q(c,h,d))}},A={_dojo:function(c){c=(c=c?c.ownerDocument||c:dojo.doc)||dojo.doc;return g.get(c).dojo||dojo},_dijit:function(c){return g.get(c?c.ownerDocument||c:dojo.doc).dijit||dijit},parseStyleValues:function(c){var a=[];c&&dojo.forEach(c.split(";"),function(c){var b=c.indexOf(":");if(0<b){var g=
c.substring(0,b).trim();c=c.substring(b+1).trim();b={};b[g]=c;a.push(b)}});return a},retrieveStyleProperty:function(c,a,b){var g=b;c&&dojo.some(c,function(c){if(c.hasOwnProperty(a))return g=c[a],!0});return g},setStyleProperty:function(c,a,b){var g=!1;c&&dojo.some(c,function(c){if(c.hasOwnProperty(a))return c[a]=b,g=!0});if(!g){var h={};h[a]=b;c.push(h)}},getStyleString:function(c){var a="";dojo.forEach(c,function(c){for(var b in c)c[b]&&(a=a+b+":"+c[b]+";")});return a},getEnclosingWidget:function(c){var a=
A.getEnclosingWidgetForRichText(c);if(a)return a;for(;c;){if(c._dvWidget)return c._dvWidget;c=c.parentNode||c.domNode&&c.domNode.parentNode}},getEnclosingWidgetForRichText:function(c){if(c&&c._dvWidget)return"html.stickynote"===c._dvWidget.type||"html.richtext"===c._dvWidget.type?c._dvWidget:c.parentNode?A.getEnclosingWidgetForRichText(c.parentNode):null},getUniqueObjectId:function(c,a){if(c){c=c.substring((c.lastIndexOf("/")||c.lastIndexOf("."))+1);var b=1,g=c+"_"+b++;for(a=A._dojo(a);a.getObject(g)||
a.byId(g);)g=c+"_"+b++;return g}},_remove_prefix:function(c){if(c){for(var a=c,b="dijit/form/ dijit/layout/ dijit/ dojox/mobile/ html. html/ OpenAjax. OpenAjax/".split(" "),g=0;g<b.length;g++)if(0==c.indexOf(b[g])){a=c.substr(b[g].length);"html."==b[g]&&(a="\x26lt;"+a+"\x26gt;");break}return a}return""},_getWidgetNameText:function(c){return"\x3cspan class\x3d'propertiesTitleWidgetName'\x3e"+this._remove_prefix(c)+"\x3c/span\x3e"},_getWidgetClassText:function(c,a){var b="\x3cspan class\x3d'propertiesTitleClassName'\x3e";
c&&(b+="#"+c);a&&(b+="."+a.replace(/\s+/g,"."));return b+"\x3c/span\x3e"},getLabelForNode:function(c){var a=c.getAttribute("data-dojo-type")||c.getAttribute("dojoType");a||(a=c.tagName.toLowerCase());a=a.replace(/\./g,"/");a=this._getWidgetNameText(a);c.id&&(a+=this._getWidgetClassText(c.id));return a},getLabel:function(c){var a=this._getWidgetNameText(c.type),b,g=A.getWidgetHelper(c.type);g&&g.getWidgetText&&(b=g.getWidgetText(c));g&&g.getWidgetNameText&&(a=g.getWidgetNameText(c));var h=c.domNode;
if(!c.type)return"unknown type";switch(c.type.replace(/\//g,".")){case "dijit.form.ComboBox":case "dijit.form.Button":b=c.attr("label");break;case "dijit.layout.ContentPane":b=c.attr("title");break;case "html.label":b=h.innerHTML;break;case "html.img":b=h.alt,b||(b=h.title)}b&&(a+="\x3cspan class\x3d'propertiesTitleWidgetText'\x3e"+b+"\x3c/span\x3e ");g&&g.getWidgetDescriptor&&(a+=" \x3cspan class\x3d'propertiesTitleWidgetDescriptor'\x3e"+g.getWidgetDescriptor(c)+"\x3c/span\x3e ");var d=c._srcElement;
b=c.getId();d=(d=d&&d.getAttribute("class"))&&d.trim();if(b||d)a=g&&g._getWidgetClassText?a+g._getWidgetClassText(b,d):a+this._getWidgetClassText(b,d);g&&g.getWidgetTextExtra&&(a+=g.getWidgetTextExtra(c));"html.img"==c.type&&(a+="\x3cspan\x3e"+h.src.substr(h.src.lastIndexOf("/")+1)+"\x3c/span\x3e");return a},byId:function(c,a){if(a=dojo.byId(c,a&&a.body?a:void 0)){if(a._dvWidget)return a._dvWidget;if((a=A.getEnclosingWidget(a))&&a.id==c)return a}if(k.currentEditor&&k.currentEditor.currentEditor&&
k.currentEditor.currentEditor.context)return k.currentEditor.currentEditor.context.widgetHash[c]},byNode:function(c){if(c._dvWidget)return c._dvWidget},createWidget:function(c,e,z){if(c&&c.type){var u=dojo.mixin({},c),x=!1;"xblox/RunScript"===u.type&&"xblox/CSSState"===u.type&&(x=!0,delete c.properties.style);u.properties&&(u.properties=dojo.mixin({},c.properties));var k=u.type,v,y,C=f.query(k);if(C){u.properties&&("content"in u.properties&&!u.properties.content&&delete u.properties.content,u.properties.theme&&
(y=u.properties.theme.themeName));z&&z.metadata&&z.metadata.childOverride&&b.mixin(u.properties,z.metadata.childOverride);c=f.queryDescriptor(k,"widgetClass");!c&&e&&e.widgetClass&&(c=e.widgetClass);if(!0===C.delite||"xblox/RunScript"===k||"xblox/CSSState"===k||"xblox/Script"===k||"xblox/StyleSate"===k)c="delite";"delite"==c?v=a:"object"==c?(v=h,C.attributes=C.attributes||{},C.attributes.dojoType=k):"html"==c?v=m:"dijit"==c?v=d:null==v&&(v=n);if(v){c=C.content.trim().replace(/\s+/g," ");g.get(dojo.doc);
var E=g.get(dojo.doc).dojo._toDom(c);E.fromWidgetData&&E.fromWidgetData(u);if(11===E.nodeType){z=0;var F=null;c=E.childNodes;for(var D=0;D<c.length&&!(8!==c[D].nodeType&&(z++,F=c[D],1<z));D++);if(1<z){console.error("ERROR: complex widget content not supported");return}E=F}if(!E)return null;var G=new p(E.tagName.toLowerCase());if(E.hasAttributes())for(c=E.attributes,z=c.length-1;0<=z;--z)x&&"style"===c[z].name||G.addAttribute(c[z].name,c[z].value);E.innerHTML&&G.addText(E.innerHTML);x=f.queryDescriptor(k,
"requiresId");c=f.queryDescriptor(k,"name");x=x&&c.match(/^[A-Za-z]\w*$/)?c:void 0;E.id=u.properties&&u.properties.id||(u.context?u.context.getUniqueID(G,x):"");if(c=u.children)dojo.isString(c)?(E.innerHTML=c,E.nodeName.toLowerCase(),x=G._getAttribute("id"),G.addText(c),c=G.getText(u.context),G.children=[],G.setText(c),x&&G.addAttribute(x.name,x.value,x.noPersist),q(u.context,E,G)):dojo.forEach(c,function(c){if(c)if(dojo.isString(c))7<c.length&&"\x3c!--"==c.substring(0,4)&&"--\x3e"==c.substring(c.length-
3)?(E.appendChild(dojo.doc.createComment(c.substring(4,c.length-3))),G.addComment(c.substring(4,c.length-3))):(E.appendChild(dojo.doc.createTextNode(c)),G.addText(c));else if(c.context=u.context,c=A.createWidget(c))E.appendChild(c.domNode),G.addChild(c._srcElement)});(x=A.getWidgetHelper(k))&&x.preProcessData&&(u=x.preProcessData(u));x={};c={};for(var N in u.properties)z=u.properties[N],null!=z&&("on"==N.substr(0,2).toLowerCase()||"a"==G.tag.toLowerCase()&&"href"==N.toLowerCase()?c[N]=z:x[N]=z);C=
new v(x,E,k,C,G,k);C._srcElement=G;C.chart&&u.properties&&u.properties.theme&&(C.chart.theme.themeName=y);u.scripts&&(C.scripts=u.scripts);u.context&&(C._edit_context=u.context);u.properties&&(C.setProperties(x),C.setProperties(c,!0));if(u.maqAppStates||u.maqDeltas)u.maqAppStates&&(C.domNode._maqAppStates=dojo.clone(u.maqAppStates)),u.maqDeltas&&(C.domNode._maqDeltas=dojo.clone(u.maqDeltas)),y=davinci.states.serialize(C.domNode),y.maqAppStates&&C._srcElement.addAttribute(davinci.states.APPSTATES_ATTRIBUTE,
y.maqAppStates),y.maqDeltas&&C._srcElement.addAttribute(davinci.states.DELTAS_ATTRIBUTE,y.maqDeltas);(x=A.getWidgetHelper(k))&&x.cleanSrcElement&&x.cleanSrcElement(C._srcElement,e);x&&x.postCreateWidget&&x.postCreateWidget(C,e);return C}}else console.error("cant get widget meta data : ",c)}},_createSrcElement:function(c){var a=new p(c.tagName.toLowerCase());if(c.hasAttributes()){c=c.attributes;for(var b=c.length-1;0<=b;--b)a.addAttribute(c[b].name,c[b].value)}return a},getWidgetHelper:function(a){return c[a]},
requireWidgetHelper:function(a){var b=new e;f.getHelper(a,"helper").then(function(g){g?b.resolve(c[a]=new g):b.resolve()});return b},getWidget:function(c,b){if(c&&1==c.nodeType){var g=A.byNode(c);if(!g){if(c){for(var g={properties:{}},e=0;e<c.attributes.length;e++){var f=c.attributes[e];if(f.specified&&f.nodeValue){var q=f.nodeName.toLowerCase();if("id"!=q&&"widgetid"!=q&&"style"!=q&&"_"!=q.charAt(0)){if((f=f.nodeValue)&&"class"==q&&(f=f.replace("HtmlWidget","").trim(),!f))continue;g.properties[q]=
f}}}"script"==c.tagName.toLowerCase()&&(g.children=c.innerHTML||void 0)}else g=void 0;if(g.properties.is||null!=c.render||-1!==c.tagName.indexOf("D-"))return g=new a(g,c);e=c.getAttribute("dvwidget");if(c.hasAttribute("widgetid")||c.hasAttribute("data-dojo-type")||c.hasAttribute("dojotype"))b=A._dijit(c).byNode(c),e=c.getAttribute("data-dojo-type")||c.getAttribute("dojotype"),g=b?new d(g,c,b,null,null,e):new h(g,c);else if(e)g=new n(g,c,e);else{if("svg"==c.nodeName)return;g=new m(g,c,b)}}return g}}};
dojo.setObject("davinci.ve.widget",A);return A})},"davinci/html/HTMLElement":function(){define(["dojo/_base/declare","davinci/html/HTMLItem","davinci/html/HTMLText","davinci/html/HTMLComment","davinci/html/HTMLAttribute"],function(p,k,f,e,b){return p("davinci.html.HTMLElement",k,{constructor:function(b){this.elementType="HTMLElement";this.attributes=[];this.tag=b||"";this._fmChildIndent=this._fmChildLine=0},add:function(b){this.statements||(this.statements=[]);this.statements.push(b);this.onChange()},
getText:function(b){b=b||{};var d;b.indent+=2;d="\x3c"+this.tag;for(var a=0;a<this.attributes.length;a++){var m=this.attributes[a].getText(b);0<m.length&&(d=d+" "+m)}if(this.noEndTag)d+="/\x3e";else{d=d+"\x3e"+this._addWS(this._fmChildLine,this._fmChildIndent);if(this.statements)for(a=0;a<this.statements.length;a++)d+=this.statements[a].printStatement(b,this.statements[a]);else if(this.script)d+=this.script;else if(0<this.children.length)for(m="style"==this.tag,a=0;a<this.children.length;a++)if(d+=
this.children[a].getText(b),m){var h=this._fmChildLine,g=this._fmChildIndent||0;a+1==this.children.length&&(h=this._fmLine,g=this._fmIndent);d+=this._addWS(h,g)}d=d+"\x3c/"+this.tag+"\x3e"}b.indent-=2;return d+=this._addWS(this._fmLine,this._fmIndent)},_formatModel:function(b,n,a){function d(c,b,h){g+=1+c;b?(b._fmChildLine=1,b._fmChildIndent=a.indent):(h._fmLine=1,h._fmIndent=a.indent)}function h(c,a){c.startOffset=g;c.wasParsed=!0;g+=c.tag.length+2;for(var b=0;b<c.attributes.length;b++){c.attributes[b].startOffset=
g;var m=c.attributes[b].getText(a);0<m.length&&(g+=1+m.length);c.attributes[b].endOffset=g-1}c.noEndTag&&g++;c.startTagOffset=g;m="";if(c.statements)for(b=0;b<c.statements.length;b++)m+=c.statements[b].printStatement(a,c.statements[b]);else c.script&&(m=c.script);if(m)g+=m.length;else if(0<c.children.length){var n;davinci.html._noFormatElements[c.tag]||(a.indent+=2,d(a.indent,c),n=!0);for(var e,b=0;b<c.children.length;b++){m=c.children[b];switch(m.elementType){case "HTMLElement":e&&"HTMLText"!=e.elementType&&
!davinci.html._noFormatElements[m.tag]&&d(a.indent,null,e);h(m,a);break;case "HTMLText":m.startOffset=g;g+=m.value.length;break;case "HTMLComment":m.startOffset=g,g+=m.value.length,g++,m.isProcessingInstruction&&(g+=2)}e=m}n&&(a.indent-=2);e&&"HTMLText"!=e.elementType&&d(a.indent,null,e)}g+=c.tag.length+3;c.endOffset=g-1}var g=0;void 0==n&&(n=this.children.length);var c,e;this.children.length&&0!=n?(e=this.children[n-1],g=e.endOffset+1):(c=this,g=this.startTagOffset+1);var f=g;davinci.html._noFormatElements[b.tag]||
(d(a.indent,c,e),b._fmLine=1,b._fmIndent=n<this.children.length?a.indent:a.indent-2);h(b,a);return g>f?g-f:0},getElementText:function(b){b=b||{};var d="";if(0<this.children.length)for(var a=0;a<this.children.length;a++)"HTMLComment"!=this.children[a].elementType&&(d+=this.children[a].getText(b));else{if(this.script)return this.script;if(this.statements)for(a=0;a<this.statements.length;a++)d+=this.statements[a].printStatement(b,this.statements[a])}return d},getChildElements:function(b,n,a){a=a||[];
for(var d=0;d<this.children.length;d++)this.children[d].tag==b&&a.push(this.children[d]),n&&"HTMLElement"==this.children[d].elementType&&this.children[d].getChildElements(b,n,a);return a},getChildElement:function(b){for(var d=0;d<this.children.length;d++)if(this.children[d].tag==b)return this.children[d]},hasAttribute:function(b){for(var d=0;d<this.attributes.length;d++)if(this.attributes[d].name==b)return!0;return!1},getAttribute:function(b){if(b=this._getAttribute(b))return b.value},_getAttribute:function(b){for(var d=
0;d<this.attributes.length;d++)if(this.attributes[d].name==b)return this.attributes[d]},addText:function(b){this.addChild(new f(b));this.onChange()},addComment:function(b){this.addChild(new e(b));this.onChange()},getLabel:function(){return"\x3c"+this.tag+"\x3e"},addAttribute:function(d,n,a){if("textContent"==d)this.children=[],this.addText(n);else{var m,h=0<this.attributes.length?this.attributes[this.attributes.length-1].endOffset+1:this.startTagOffset-(this.noEndTag?2:1),g=this._getAttribute(d),
c;g?m=n.length-g.value.length:(g=new b,c=!0,m=d.length+n.length+4,g.startOffset=h,g.endOffset=h+m-1);g.name=d;g.setValue(n);g.noPersist=a;this.wasParsed&&!a&&0<m&&this.getHTMLFile().updatePositions(h,m);c&&this.attributes.push(g);this.onChange()}},removeAttribute:function(b){this.attributes.every(function(d,a,m){return d.name===b?(m.splice(a,1),a=this.getHTMLFile(),!d.noPersist&&a&&(m=d.getText(),a.updatePositions(d.startOffest,0-(m.length+1))),!1):!0},this);this.onChange()},setAttribute:function(b,
e){this.removeAttribute(b);this.addAttribute(b,e)},getUniqueID:function(b){if(!this.getAttribute("id")){var d=this.getHTMLFile();d.uniqueIDs||(d.uniqueIDs={});d=d.uniqueIDs.hasOwnProperty(this.tag)?++d.uniqueIDs[this.tag]:d.uniqueIDs[this.tag]=0;this.addAttribute("id",this.tag+"_"+d,b)}},findElement:function(b){var d=this.getAttribute("id");if(b==d)return this;for(d=0;d<this.children.length;d++)if("HTMLElement"==this.children[d].elementType){var a=this.children[d].findElement(b);if(a)return a}},insertBefore:function(b,
e){e=dojo.indexOf(this.children,e);0>e&&(e=void 0);this.addChild(b,e);this.onChange()},addChild:function(b,e,a){if(!a&&this.wasParsed)if("HTMLElement"==b.elementType){var d=this._getIndent(),h;e<this.children.length&&"HTMLElement"==this.children[e].elementType?h=this.children[e]._getIndent():this.children.length?dojo.forEach(this.children,function(c){"HTMLElement"==c.elementType&&(h=c._getIndent())}):h=d+1;d=this._formatModel(b,e,{indent:h});this.getHTMLFile().updatePositions(b.startOffset,d)}else if("HTMLText"==
b.elementType||"CSS"==b.elementType.substring(0,3)){var d=b.getText(),g=this.children.length?this.children[this.children.length-1].endOffset:this.startTagOffset,c=d.length;0<c&&("HTMLText"!=b.elementType&&(c+=this._fmChildIndent+1),this.getHTMLFile().updatePositions(g+1,c));b.startOffset=g+1;b.endOffset=b.startOffset+d.length-1}k.prototype.addChild.apply(this,arguments)},removeChild:function(b){var d=dojo.indexOf(this.children,b);if(0<=d){var a=1+b.endOffset-b.startOffset;if("HTMLElement"==b.elementType)if(1==
this.children.length)a+=1*this._fmChildLine+this._fmChildIndent,this._fmChildIndent-=2;else{if(0<d&&"HTMLElement"==this.children[d-1].elementType)var m=this.children[d-1],a=a+(1*m._fmLine+m._fmIndent);d+1==this.children.length&&"HTMLElement"==this.children[d-1].elementType&&(this.children[d-1]._fmChildIndent-=2)}0<a&&this.wasParsed&&this.getHTMLFile().updatePositions(b.startOffset,0-a)}k.prototype.removeChild.apply(this,arguments)},_textModify:function(b,e){b=b.length-e.length;0!=b&&this.wasParsed&&
this.getHTMLFile().updatePositions(this.startOffset,b)},setScript:function(b){this._textModify(b,this.script);this.script=b},_previous:function(){var b=dojo.indexOf(this.parent.children,this);if(0<b)return this.parent.children[b-1]},_getIndent:function(){var b=this._previous();return b?" HTMLText"==b.elementType?(b=b.value.split("\n"),b[b.length-1].length):b._fmIndent:this.parent._fmChildIndent},visit:function(b){if(!b.visit(this)){for(var d=0;d<this.attributes.length;d++)this.attributes[d].visit(b);
for(d=0;d<this.children.length;d++)this.children[d].visit(b)}b.endVisit&&b.endVisit(this)},setText:function(b){this.script="";var d=this.parent;this.errors=require("davinci/html/HTMLParser").parse(b,this).errors;dojo.mixin(this,this.children[0]);this.parent=d;this.visit({visit:function(a){delete a.wasParsed},rules:[]});this.onChange()}})})},"davinci/html/HTMLItem":function(){define(["dojo/_base/declare","davinci/html/HTMLModel"],function(p,k){return p("davinci.html.HTMLItem",k,{constructor:function(){this.elementType=
"HTMLItem"},getLabel:function(){return this.getText({indent:0})},onChange:function(f){if(this.parent&&f)this.parent.onChange(f)},_addWS:function(f,e){f=f||0;e=e||0;for(var b=[],d=0;d<f;d++)b.push("\n");b.push("                                          ".substring(0,e));return b.join("")},close:function(){for(var f=0;f<this.children.length;f++)this.children[f].close()},getID:function(){return this.parent.getID()+":"+this.startOffset+":"+this.getLabel()},getHTMLFile:function(){for(var f=this;f&&"HTMLFile"!=
f.elementType;)f=f.parent;return f}})})},"davinci/html/HTMLModel":function(){define(["dojo/_base/declare","davinci/model/Model"],function(p,k){davinci.html||(davinci.html={});davinci.html._noFormatElements={span:!0,b:!0,it:!0};davinci.html.escapeXml=function(f){return f?f.replace(/&/g,"\x26amp;").replace(/</g,"\x26lt;").replace(/>/g,"\x26gt;").replace(/"/g,"\x26quot;"):f};davinci.html.unEscapeXml=function(f){return f&&"string"===typeof f?f.replace(/&quot;/g,'"').replace(/&gt;/g,"\x3e").replace(/&lt;/g,
"\x3c").replace(/&amp;/g,"\x26"):f};return p("davinci.html.HTMLModel",k,{})})},"davinci/model/Model":function(){define(["dojo/_base/declare"],function(p){return p("davinci.model.Model",null,{constructor:function(){this.name=this.elementType="";this.endOffset=this.startOffset=0;this.parent=null;this.children=[]},inherits:function(k){1<arguments.length?k.apply(this,Array.prototype.slice.call(arguments,1)):k.call(this)},getText:function(){},setText:function(k){},addChild:function(k,f,e){k.parent=this;
void 0!=f?this.children.splice(f,0,k):this.children.push(k)},setStart:function(k){this.startOffset=k},setEnd:function(k){this.endOffset=k},getLabel:function(){return null},getID:function(){return null},mapPositions:function(k){return{startOffset:k.startOffset,endOffset:k.endOffset}},findChildAtPosition:function(k){k.endOffset||(k.endOffset=k.startOffset);if(k.startOffset>=this.startOffset&&k.endOffset<=this.endOffset){for(var f=0;f<this.children.length;f++){var e=this.children[f].findChildAtPosition(k);
if(null!=e)return e}return this}return null},removeChild:function(k){for(var f=0;f<this.children.length;f++)if(this.children[f]==k){this.children.splice(f,1);break}},find:function(k,f){var e={visit:function(b){if(0<this.found.length&&f)return!0;var d=null;for(d in k)if(b[d]!=k[d])break;b[d]==k[d]&&this.found.push(b);return!1},found:[]};this.visit(e);return f?0<e.found.length?e.found[0]:null:e.found},setDirty:function(k){this.dirtyResource=k},isDirty:function(){return this.dirtyResource},searchUp:function(k){if(this.elementType==
k)return this;for(var f=this.parent;f&&f.elementType!=k;)f=f.parent;return f},visit:function(k){if(!k.visit(this))for(var f=0;f<this.children.length;f++)this.children[f].visit(k);k.endVisit&&k.endVisit(this)},updatePositions:function(k,f,e){visitor={visit:function(b){if(b.endOffset<f)return!0;b.startOffset>=f?(b.startOffset+=e,b.endOffset+=e):b.endOffset>=f&&(b.endOffset+=e)}};k.visit(visitor)}})})},"davinci/html/HTMLText":function(){define(["dojo/_base/declare","davinci/html/HTMLItem"],function(p,
k){return p("davinci.html.HTMLText",k,{constructor:function(f){this.elementType="HTMLText";this.value=f||""},getText:function(f){return this.value},setText:function(f){if(this.wasParsed||this.parent&&this.parent.wasParsed){var e=f.length-this.value.length;0<e&&this.getHTMLFile().updatePositions(this.startOffset+1,e)}this.value=f},getLabel:function(){return 15>this.value.length?this.value:this.value.substring(0,15)+"..."}})})},"davinci/html/HTMLComment":function(){define(["dojo/_base/declare","davinci/html/HTMLItem"],
function(p,k){return p("davinci.html.HTMLComment",k,{constructor:function(f){this.elementType="HTMLComment";this.value=f||""},getText:function(f){f=this.isProcessingInstruction?"":"--";return"\x3c!"+f+this.value+f+"\x3e"}})})},"davinci/html/HTMLAttribute":function(){define(["dojo/_base/declare","davinci/html/HTMLItem"],function(p,k){return p("davinci.html.HTMLAttribute",k,{constructor:function(){this.elementType="HTMLAttribute";this.value=this.name=""},getText:function(f){if(this.noPersist&&!f.includeNoPersist)return"";
f=this.name;({checked:1,selected:1,disabled:1,readonly:1,multiple:1,ismap:1,autofocus:1,autoplay:1,controls:1,formnovalidate:1,loop:1,muted:1,required:1})[this.name.toLowerCase()]?f=this.value&&"false"!==this.value?f+('\x3d"'+this.value+'"'):"":this.noValue||(f=f+'\x3d"'+davinci.html.escapeXml(String(this.value))+'"');return f},setValue:function(f){this.value=davinci.html.unEscapeXml(f);this.onChange()}})})},"davinci/ve/DijitWidget":function(){define("require dojo/_base/declare dojo/_base/window dojo/_base/lang dojo/dom-attr dojo/parser ./_Widget ./metadata".split(" "),
function(p,k,f,e,b,d,n,a){return k("davinci.ve.DijitWidget",n,{isDijitWidget:!0,constructor:function(a,h,g,c,d,e){if("string"===typeof g){b.get(h,"data-dojo-type")||b.get(h,"dojoType")||b.set(h,"data-dojo-type",g);d&&d.addAttribute("data-dojo-type",g);g=h.ownerDocument;d=g.defaultView;(c=g.__DijitWidgetScratchSpace)||(c=g.__DijitWidgetScratchSpace=g.createElement("div"));c.appendChild(h);g=d.require("dojo/parser").instantiate([h],a,{noStart:!0})[0];c.firstChild&&c.removeChild(c.firstChild);if(this.domNode=
g.domNode)g.domNode._dvWidget=this;this.isLayoutContainer=g.isLayoutContainer}else this.type=e?e.replace(/\./g,"/"):g.declaredClass.replace(/\./g,"/");a=davinci.ve.metadata.getAllowedChild(this.type);this.acceptsHTMLChildren="ANY"===a[0]||-1!==a.toString().toUpperCase().indexOf("HTML");this.dijitWidget=g;this.containerNode=g.containerNode;this.styleNode=g.styleNode;this.id=g.id},getParent:function(){if(this.dijitWidget&&this.dijitWidget.domNode&&this.dijitWidget.domNode.parentNode){var a=p("davinci/ve/widget"),
b=this.dijitWidget;do b=a.getEnclosingWidget(b.domNode.parentNode);while(b&&b.dijitWidget&&"_"==b.dijitWidget.declaredClass.split(".").pop().charAt(0));return b}},_getChildren:function(a){if(this.acceptsHTMLChildren)return this.inherited(arguments);var b=[];"NONE"!==davinci.ve.metadata.getAllowedChild(this.type)[0]&&(this.dijitWidget.getChildren(),this.dijitWidget.getChildren().forEach(function(g){g._maqNotDVWidget||(a?b.push(p("davinci/ve/widget").getWidget(g.domNode)):(g=g.domNode&&g.domNode._dvWidget)&&
b.push(g))}));return b},_getContainerNode:function(){return this.containerNode||this.domNode},selectChild:function(a){this.dijitWidget.selectChild&&this.dijitWidget.selectChild(a.dijitWidget)},_addChildToDom:function(a,b){if(this.acceptsHTMLChildren){this.inherited(arguments);var g=a.dijitWidget;g&&this.dijitWidget._started&&!g._started&&a.startup()}else a.dijitWidget&&this.dijitWidget.addChild?this.dijitWidget.addChild(a.dijitWidget,b):("xblox/RunScript"===a.type&&a.getHelper()&&a.getHelper().addChildToDom&&
a.getHelper().addChildToDom(this.dijitWidget,a,b),this.inherited(arguments))},_removeChildFromDom:function(a){this.dijitWidget.removeChild&&a.dijitWidget?this.dijitWidget.removeChild(a.dijitWidget):this.inherited(arguments)},_getPropertyValue:function(a){return this.dijitWidget.get(a)},startup:function(){this.dijitWidget.startup()},isLayout:function(){var a=this.getContext().getDijit();return a.layout?this.dijitWidget.isInstanceOf(a.layout._LayoutWidget):!1},resize:function(){var a=this.getHelper();
a&&a.resize?a.resize(this):this.dijitWidget.resize&&this.dijitWidget.resize()},renderWidget:function(){if(this.dijitWidget.render)this.dijitWidget.render();else if(this.dijitWidget.chart){var a=dojo.marginBox(this.dijitWidget.domNode);this.dijitWidget.resize(a)}this.domNode.parentNode._dvWidget&&this.domNode.parentNode._dvWidget.isDijitWidget&&this._refresh(this.domNode.parentNode)},_refresh:function(a){var b=a.parentNode;b._dvWidget&&b._dvWidget.isDijitWidget?this._refresh(b):a._dvWidget.resize&&
a._dvWidget.resize()},_attr:function(a,b){return this.dijitWidget.get.apply(this.dijitWidget,arguments)}})})},"davinci/ve/_Widget":function(){define("davinci/ve/_Widget","dojo/_base/declare ./metadata ../html/CSSModel dojox/html/entities davinci/ve/utils/StyleArray davinci/ve/utils/GeomUtils xide/mixins/EventedMixin xide/mixins/ReloadMixin".split(" "),function(p,k,f,e,b,d,n,a){var m=function(a,b,c){if(a==b)return!0;if(!a||!b||a.length!=b.length)return!1;for(var g=0;g<a.length;g++)if(c){if(!c(a[g],
b[g]))return!1}else if(a[g]!=b[g])return!1;return!0};return p("davinci.ve._Widget",[n,a],{isWidget:!0,acceptsHTMLChildren:!1,_skipAttrs:"id style class dir lang _children".split(" "),constructor:function(a,b,c,d){this.domNode=b;this.id=b.id;b._dvWidget=this;this._params=dojo.mixin({},a);this.type=c;this.metadata=d},postscript:function(){var a;if(this.domNode){var b=this.domNode.ownerDocument;b.body._edit_context?a=b.body._edit_context:b.body._dvWidget&&b.body._dvWidget._edit_context&&(a=b.body._dvWidget._edit_context)}this.id&&
a&&(a.widgetHash[this.id]=this);this.buildRendering();this.postCreate()},buildRendering:function(){},postCreate:function(){},getObjectType:function(){},getContext:function(){return this._edit_context},getChildren:function(a){var b=this.getHelper();return b&&b.getChildren?b.getChildren(this,a):this._getChildren(a)},indexOf:function(a){var b=this.getHelper();return b&&b.indexOf?b.indexOf(this,a):dojo.indexOf(this.getChildren(),a)},_getChildrenForTree:function(a){a=this.getContainerNode();var b=[];a&&
!a.children.length&&this.domNode.children.length&&(a=this.domNode);a&&dojo.forEach(a.children,function(c){c=dijit.registry.getEnclosingWidget(c);c!=this&&b.push(c)});return b},_getChildren:function(a){var b=this.getContainerNode(),c=[];b&&dojo.forEach(b.children,function(b){a?c.push(require("davinci/ve/widget").getWidget(b)):(b=b._dvWidget)&&c.push(b)});return c},getContainerNode:function(){var a=this.getHelper();return a&&a.getContainerNode?a.getContainerNode(this):"NONE"!==k.getAllowedChild(this.type)[0]?
this._getContainerNode():null},_getContainerNode:function(){return this.domNode},getMetadata:function(){this.metadata||(this.metadata=k.query(this));return this.metadata},getHelper:function(){this._edit_helper||(this._edit_helper=require("davinci/ve/widget").getWidgetHelper(this.type));return this._edit_helper},attr:function(a,b){var c=this._attr.apply(this,arguments);if(1<arguments.length)b=this._stringValue(a,b),this._srcElement.addAttribute(a,b);else return c},_attr:function(a,b){},indexOf:function(a){var b=
this.getHelper();return b&&b.indexOf?b.indexOf(this,a):dojo.indexOf(this.getChildren(),a)},getStyleNode:function(){return this.styleNode||this.domNode},addChild:function(a,b){if(this.getContainerNode()){if(void 0===b||null===b||-1===b)this._srcElement.addChild(a._srcElement);else{var c=this.getChildren();b<c.length?this._srcElement.insertBefore(a._srcElement,c[b]._srcElement):this._srcElement.addChild(a._srcElement)}(c=this.getHelper())&&c.addChild?c.addChild(this,a,b):this._addChildToDom.apply(this,
arguments)}},_addChildToDom:function(a,b){try{var c=a.domNode,g=this.getContainerNode();if(void 0===b||null===b||-1===b)g.appendChild(c);else{var h=this.getChildren();b<h.length?g.insertBefore(c,h[b].domNode):g.appendChild(c)}}catch(u){debugger}},getParent:function(){return require("davinci/ve/widget").getEnclosingWidget(this.domNode.parentNode)||this.domNode.parentNode},getObjectId:function(a){a=a||this;var b=a._edit_object_id;if(b)return b;if(a.domNode)return a.domNode.getAttribute("jsId")},addClass:function(a){var b=
this.getClassNames(),b=b?b.split(/\s+/):[];-1===b.indexOf(a)&&(b.push(a),this._srcElement.setAttribute("class",b.join(" ")),dojo.addClass(this.domNode,a))},getId:function(){if(!this.id){if(!this.domNode.id||!this.type)return;var a=this.domNode.id,b=(this.isHtmlWidget?this.getTagName():this.type).replace(/\./g,"_")+"_";if(a.length>b.length&&a.substring(0,b.length)==b)return}if(!(this._srcElement&&this._srcElement._getAttribute("id")&&this._srcElement._getAttribute("id").noPersist))return this.id},
setMarginBox:function(a){var b=this.getStyleNode();b&&(dojo.marginBox(b,a),this._updateSrcStyle())},getMarginBox:function(){var a=this.domNode,b=null,b=(b=this.getHelper())&&b.getMarginBoxPageCoords?b.getMarginBoxPageCoords(this):d.getMarginBoxPageCoords(a);b.l-=d.getScrollLeft(a);b.t-=d.getScrollTop(a);b.x=b.l;b.y=b.t;return b},getStyle:function(a){return(a=this.getStyleValues(a))?this._styleText(a):""},_sortStyleValues:function(a){a=dojo.clone(a);for(var b=f.shorthand,c=0,d=0;d<b.length;d++){var h;
a:{h=b[d][0];for(var e=0;e<a.length;e++)if(a[e]&&a[e].hasOwnProperty(h)){h=e;break a}h=-1}-1<h&&(e=a[h],a.splice(h,1),a.splice(c,0,e),c++)}return a},_styleText:function(a){var b="";if(dojo.isArray(a)){a=davinci.ve.states.normalizeArray("style",this.domNode,d,a);for(var c=0;c<a.length;c++)for(var d in a[c])value=a[c][d],void 0!==value&&""!=value&&null!=value&&(b+=d+": "+a[c][d]+"; ")}else for(d in a)value=davinci.ve.states.normalize("style",this.domNode,d,a[d]),void 0!==value&&""!=value&&null!=value&&
(b+=d+": "+a[d]+"; ");return b.trim()},getChildrenData:function(a){a=a||{identify:!0};var b=this.getHelper();return b&&b.getChildrenData?b.getChildrenData.apply(b,[this,a]):this._getChildrenData(a)},_getChildrenData:function(a){return this.getChildren().map(function(b){return b.getData(a)})},getClassNames:function(){return this._srcElement.getAttribute("class")||""},_getData:function(a){var b={type:this.type,properties:{}},c=require("davinci/ve/widget");if(a.identify){this._srcElement||(this._srcElement=
c._createSrcElement(this.domNode));var d=this._srcElement._getAttribute("id");d&&d.noPersist&&(b.properties.isTempID=!0);b.properties.id=this.id}!1!==a.preserveTagName&&this.id&&(b.tagName=this._srcElement.tag);d=k.query(this,"property");this.domNode&&this.domNode.parentNode&&(c=c.getEnclosingWidget(this.domNode.parentNode),(c=k.query(c,"childProperties"))&&(d=d?dojo.mixin({},d,c):c));if(d)for(var h in d)if(-1===this._skipAttrs.indexOf(h.toLowerCase())){var c=d[h],e=this.getPropertyValue(h);e&&e.length?
"array"==c.datatype?m(e,c.defaultValue)||(b.properties[h]=e):e!=c.defaultValue&&(b.properties[h]=e):"boolean"!=c.datatype&&"number"!=c.datatype||e==c.defaultValue?c.datatype&&(0==c.datatype.indexOf("dijit")||"object"==c.datatype&&c.isData)&&(b.properties[h]=e):b.properties[h]=e}b.properties.style=this.getStyle(a);(h=this.getClassNames(a))&&(b.properties["class"]=h);b.children=this.getChildrenData(a);b.type.indexOf("delite");return b},getData:function(a){a=a||{identify:!0,preserveStates:!0};var b=
this.getHelper();a=b&&b.getData?b.getData.apply(b,[this,a]):this._getData(a);a.maqAppStates=dojo.clone(this.domNode._maqAppStates);a.maqDeltas=dojo.clone(this.domNode._maqDeltas);a.properties||(a.properties={});if(this.properties)for(var c in this.properties)c in a.properties||(a.properties[c]=this.properties[c]);c=this._srcElement;for(var b=c.attributes,d=0;d<b.length;d++){var h=b[d];"on"==h.name.substr(0,2).toLowerCase()?a.properties[h.name]=h.value:"a"==c.tag.toLowerCase()&&"href"==h.name.toLowerCase()&&
(a.properties[h.name]=h.value)}return a},getPropertyValue:function(a){if("id"===a)return this.getId();if("jsId"===a)return this.getObjectId();var b=this.getHelper();return b&&b.getPropertyValue?b.getPropertyValue(this,a):this._getPropertyValue(a)},_getPropertyValue:function(a){return this.domNode.getAttribute(a)},getTagName:function(){return this.domNode.nodeName.toLowerCase()},getStyleValues:function(){function a(a){for(var c=d.length-1;0<=c;c--)void 0!==d[c][a]&&d.splice(c,1)}var b=this.getStyleNode().style,
c=this._srcElement.getAttribute("style"),d=require("davinci/ve/widget").parseStyleValues(c),c=this.getParent();b&&c&&c.dijitWidget&&c.dijitWidget.addChild&&!c.acceptsHTMLChildren&&(a("position"),a("left"),a("top"));return d},getStyleValuesAllStates:function(){var a=this.getStyleValues(),g={undefined:a},c=this.domNode._maqDeltas;if(c)for(var d in c)c[d].style&&(g[d]="undefined"==d?b.mergeStyleArrays(a,c[d].style):c[d].style);return g},_updateSrcStyle:function(){var a=this.getStyle();a.length?this._srcElement.addAttribute("style",
a):this._srcElement.removeAttribute("style")},_getStyleString:function(a){if(!a)return"";a=this._sortStyleValues(a);return this._styleText(a)},setStyleValuesCanvas:function(a){if(a){a=this._getStyleString(a);var b=this.getStyleNode();dojo.attr(b,"style",a);this.dijitWidget&&(this.dijitWidget.style=a)}},setStyleValuesModel:function(a){a=this._getStyleString(a);0<a.length?this._srcElement.addAttribute("style",a):this._srcElement.removeAttribute("style")},setStyleValuesAllStates:function(a){this.domNode._maqDeltas=
void 0;if(a)for(var b in a){var c=a[b];"undefined"===b&&(b=void 0);davinci.ve.states.setStyle(this.domNode,b,c,!0)}},isLayout:function(){return!1},resize:function(){},refresh:function(){var a=this.getParent();a&&a.dijitWidget?a.refresh():this.resize&&this.resize()},removeChild:function(a){this._srcElement?this._srcElement.removeChild(a._srcElement):console.error("cant remove child! this._srcElement is null",this);var b=this.getHelper();b&&b.removeChild?b.removeChild(this,a):this._removeChildFromDom.apply(this,
arguments)},_removeChildFromDom:function(a){(a=a.domNode)&&a.parentNode&&a.parentNode.removeChild(a)},setProperties:function(a,b){this.properties||(this.properties={});b=b||!1;a.id&&(this._srcElement.addAttribute("id",a.id,a.isTempID),delete a.id,delete a.isTempID);a.isTempID&&delete a.isTempID;for(var c in a){var g=a[c];g||"boolean"==typeof g||"number"==typeof g?(g=this._stringValue(c,g),b||(this.properties[c]=g),this._srcElement.addAttribute(c,g)):(delete this.properties[c],this._srcElement.removeAttribute(c))}},
startup:function(){this.initReload()},renderWidget:function(){},destroyWidget:function(a){(a=this.getHelper())&&a.destroy?a.destroy(this):this.dijitWidget?this.dijitWidget.destroyRecursive():dojo.forEach(this.getChildren(),function(a){a.destroyWidget()})},destroy:function(){this.inherited(arguments);console.error("destry")},selectChild:function(a){},attach:function(){var a=this.getHelper();a&&a.create&&a.create(this,this._srcElement)},_stringValue:function(a,b){var c=this.getMetadata();a=c.property&&
c.property[a];if(!a)return b;if("object"==a.datatype)if(b.getObjectId)b=b.getObjectId();else{if(a=b._edit_object_id)return a;if(b.domNode)return b.domNode.getAttribute("jsId")}else if("json"==a.datatype)a=(a=this.getContext())&&a.getDojo()||dojo,(c=this.getHelper())&&c.checkValue&&(b=c.checkValue(b)),a.isObject(b)&&(b=a.toJson(b));else if("string"==a.datatype)switch(a.format){case "date":case "time":isFinite(b)&&(b=dojo.date.stamp.toISOString(b,{selector:a.format}));break;default:b=e.encode(b)}return b}})})},
"davinci/html/CSSModel":function(){define({shorthand:[["border","border-width border-style border-color border-top border-left border-right border-bottom".split(" ")],["border-width",["border-top-width","border-right-width","border-bottom-width","border-left-width"]],["border-style",["border-top-style","border-right-style","border-bottom-style","border-left-style"]],["border-color",["border-top-color","border-right-color","border-bottom-color","border-left-color"]],["border-bottom",["border-bottom-width",
"border-bottom-style","border-bottom-color"]],["border-top",["border-top-width","border-top-style","border-top-color"]],["border-left",["border-left-width","border-left-style","border-left-color"]],["border-right",["border-right-width","border-right-style","border-right-color"]],["font","font-size line-height font-weight font-style font-family line-height".split(" ")],["border-radius",["border-top-left-radius","border-top-right-radius","border-bottom-right-radius","border-bottom-left-radius"]],["-moz-border-radius",
["-moz-border-radius-topleft","-moz-border-radius-topright","-moz-border-radius-bottomright","-moz-border-radius-bottomleft"]],["margin",["margin-top","margin-right","margin-bottom","margin-left"]],["padding",["padding-top","padding-right","padding-bottom","padding-left"]],["background",["background-color","background-image","background-repeat","background-position","background-attachment"]]]})},"davinci/ve/utils/StyleArray":function(){define([],function(){return{mergeStyleArrays:function(p,k){p||
(p=[]);k||(k=[]);p=dojo.clone(p);for(var f=0;f<k.length;f++)for(var e in k[f])for(j=p.length-1;0<=j;j--){var b=p[j],d;for(d in b)if(e==d){p.splice(j,1);break}}return p.concat(k)}}})},"davinci/ve/GenericWidget":function(){define(["dojo/_base/declare","./_Widget"],function(p,k){return p("davinci.ve.GenericWidget",k,{isGenericWidget:!0,constructor:function(f,e,b,d,n){dojo.attr(e,"dvwidget",b);n&&n.addAttribute("dvwidget",b)},buildRendering:function(){this.containerNode=this.domNode;if(this._params){for(var f in this._params)this.domNode.setAttribute(f,
this._params[f]);this._params=void 0}},_getChildrenData:function(f){for(var e=[],b=this.domNode.childNodes,d=0;d<b.length;d++){var n=b[d],a;switch(n.nodeType){case 1:(n=require("davinci/ve/widget").byNode(n))&&(a=n.getData(f));break;case 3:(a=n.nodeValue.trim())&&f.serialize&&(a=davinci.html.escapeXml(a));break;case 8:a="\x3c!--"+n.nodeValue+"--\x3e"}a&&e.push(a)}if(0!==e.length)return e},setProperties:function(f){var e=this.domNode,b;for(b in f)"style"===b?dojo.style(e,f[b]):f[b]?e[b]=f[b]:e.removeAttribute(b);
this.inherited(arguments)},_attr:function(f,e){if(1<arguments.length)this.domNode.setAttribute(f,e);else return this.domNode.getAttribute(f)},getTagName:function(){return this.domNode.nodeName.toLowerCase()}})})},"davinci/ve/DeliteWidget":function(){define("dojo/_base/declare ./_Widget ./widget require xide/registry xide/utils".split(" "),function(p,k,f,e,b,d){function n(a){a.declaredClass&&"davinci.ve.DeliteWidget"!==a.declaredClass?a.type=a.declaredClass:a.domNode&&a.domNode.declaredClass&&-1==
a.domNode.declaredClass.indexOf("uniq")&&(a.type=a.domNode.declaredClass);if(!a.type)switch("delite/"+d.capitalize(a.domNode.baseClass.replace("d-",""))){case "delite/Radio-button":a.type="delite/RadioButton";break;case "delite/Checkbox":a.type="delite/Checkbox";break;case "delite/Accordion-header":a.type="delite/AccordionHeader";break;case "delite/Combobox":a.type="delite/Combobox";break;case "delite/Toggle-button":a.type="delite/ToggleButton";break;case "delite/Tab-bar":a.type="delite/TabBar";break;
case "delite/View-stack":a.type="delite/ViewStack";break;case "delite/MediaPlayer":a.type="delite/MediaPlayer";break;case "delite/Panel":a.type="delite/Panel";break;case "delite/Select":a.type="delite/Select";break;case "delite/Button":a.type="delite/Button";break;case "delite/Accordion":a.type="delite/Accordion";break;case "delite/Slider":a.type="delite/Slider"}a.type?b.add(a.domNode):console.error("have no widget type ",a)}p=p("davinci.ve.DeliteWidget",k,{isGenericWidget:!0,helper:f,getData:function(a){a=
a||{identify:!0,preserveStates:!0};var d;d=(d=this.getHelper())&&d.getData?d.getData.apply(d,[this,a]):this._getData(a);var h=!1;"no_id"===this.id&&(h=dijit.getUniqueId(this.type.toLowerCase().replace("/","-").replace(/\./g,"_")),this.id=h=h.replace("delite/","d-").toLowerCase(),d.properties.id=h,d.properties.id=h,this.domNode.id=h,h=!0);a.identify&&!h&&b.byId(this.id);b.add(this.domNode);d.maqAppStates=dojo.clone(this.domNode._maqAppStates);d.maqDeltas=dojo.clone(this.domNode._maqDeltas);d.properties||
(d.properties={});if(this.properties)for(var g in this.properties)g in d.properties||(d.properties[g]=this.properties[g]);a=this._srcElement;for(var h=a.attributes,c=0;c<h.length;c++){var e=h[c];g=e.name;if("on"==e.name.substr(0,2).toLowerCase())d.properties[e.name]=e.value;else if("a"==a.tag.toLowerCase()&&"href"==e.name.toLowerCase())d.properties[e.name]=e.value;else if("stop"===g||"bidirectional"===g||"block"===g||"targetevent"===g)d.properties[e.name]=e.value}return d},_fixType:function(a){return n(a)},
_getChildren:function(a){function b(a){dojo.forEach(a.children,function(a){(a=c.getWidget(a,!1))&&!a.type&&g._fixType(a);g.metadata&&g.metadata.ignore&&a.type&&-1!==g.metadata.ignore.indexOf(a.type)||a&&a.type&&(-1==a.type.indexOf("html.")||g.metadata&&1==g.metadata.htmlContent)&&d.push(a)})}var d=[],g=this;a=this.container||this.domNode;a.containerNode&&null==this.domNode.render&&(a=a.containerNode);this.domNode&&null!=this.domNode.render&&(a=this.domNode);var c=e("davinci/ve/widget");a&&(b(a),0==
d.length&&this.domNode.containerNode&&b(this.domNode.containerNode));return g.metadata&&g.metadata.noChildren?[]:d},getChildren:function(a){var b=this.getHelper();return b&&b.getChildren?b.getChildren(this,a):this._getChildren(a)},constructor:function(a,b,d,g,c){this.acceptsHTMLChildren=!0},buildRendering:function(){this.containerNode=this.domNode;if(this._params){for(var a in this._params)this.domNode.setAttribute(a,this._params[a]);this._params=void 0}},_getChildrenData:function(a){var b=this.domNode;
if(!b.hasChildNodes())return null;if(b&&b.getChildrenData)return b.getChildrenData();var b=[],d=this.domNode.childNodes,g=e("davinci/ve/widget");this.metadata&&this.metadata.noChildren&&(d=[]);for(var c=0;c<d.length;c++){var n=d[c],f;switch(n.nodeType){case 1:if((n=g.byNode(n))&&n.type&&-1!==n.type.indexOf("html.")&&!0!==this.metadata.htmlContent)break;if(this.metadata&&this.metadata.ignore&&n.type&&-1!==this.metadata.ignore.indexOf(n.type))break;n&&(f=n.getData(a));break;case 3:(f=n.nodeValue.trim())&&
(a.serialize||!0===this.metadata.htmlContent)&&(f=davinci.html.escapeXml(f));break;case 8:f="\x3c!--"+n.nodeValue+"--\x3e"}(f&&f.type&&-1==f.type.indexOf("html.")||f&&!0===this.metadata.htmlContent)&&b.push(f)}if(0!==b.length)return b},_getPropertyValue:function(a){if(this.domNode._get){var b=this.domNode._get(a);null==b&&(b=this.domNode.getAttribute(a));return b}if(this.containerNode&&a in this.containerNode)return this.containerNode[a]},setProperties:function(a){var b=this.domNode,d;for(d in a)"style"===
d?dojo.style(b,a[d]):a[d]?(b[d]=a[d],b._set&&b._set(d,a[d]),dojo.attr(b,d,a[d])):b.removeAttribute(d);this.inherited(arguments)},_attr:function(a,b){},getTagName:function(){return this.domNode.nodeName.toLowerCase()},getParent:function(){if("xblox/RunScript"==this.type){var a=this.domNode;if(a&&a._targetReference&&a._targetReference._dvWidget)return a._targetReference._dvWidget}return this.inherited(arguments)}});p.fixType=n;return p})},"davinci/ve/HTMLWidget":function(){define(["dojo/_base/declare",
"./_Widget"],function(p,k){return p("davinci.ve.HTMLWidget",k,{isHtmlWidget:!0,addHTMLClasses:!0,constructor:function(f,e,b){this.type="html."+e.tagName.toLowerCase();this.acceptsHTMLChildren=!0;null!=b&&(this.addHTMLClasses=b)},buildRendering:function(){this.containerNode=this.domNode;if(this._params){for(var f in this._params)this.domNode.setAttribute(f,this._params[f]);this._params=void 0}try{!1!==this.addHTMLClasses&&dojo.addClass(this.domNode,"HtmlWidget")}catch(e){}},_getChildrenData:function(f){function e(b){(b=
b.nodeValue.trim())&&(b=davinci.html.escapeXml(b));return b}var b=this.domNode;if(!b.hasChildNodes())return null;if(1===b.childNodes.length&&3===b.firstChild.nodeType)return e(b.firstChild);var d=[];dojo.forEach(b.childNodes,function(b){var a;switch(b.nodeType){case 1:(b=require("davinci/ve/widget").byNode(b))&&(a=b.getData(f));break;case 3:a=e(b);break;case 8:a="\x3c!--"+b.nodeValue+"--\x3e"}a&&d.push(a)});return d},setProperties:function(f,e){var b=this.domNode;e=e||!1;for(var d in f)if("style"===
d)dojo.style(b,f[d]);else if(!e){var n=f[d];n||"boolean"==typeof n||"number"==typeof n?b.setAttribute(d,n):b.removeAttribute(d)}this.inherited(arguments)},resize:function(){this.getChildren().forEach(function(f){f.resize&&f.resize()})},_attr:function(f,e){if(1<arguments.length)this.domNode[f]=e;else return this.domNode[f]},getTagName:function(){return this.domNode.nodeName.toLowerCase()}})})},"davinci/ve/ObjectWidget":function(){define(["dojo/_base/declare","dojo/dom-attr","./_Widget"],function(p,
k,f){return p("davinci.ve.ObjectWidget",f,{isObjectWidget:!0,constructor:function(e,b,d,f,a){"string"===typeof d&&(k.set(b,"data-dojo-type",d),a&&a.addAttribute("data-dojo-type",d))},postCreate:function(){var e=this._params.jsId,b=require("davinci/ve/widget")._dojo(this.domNode),d;if(e){if(k.set(this.domNode,"jsId",e),d=this.getObjectType())if(d=b.getObject(d.replace(/\//g,".")))if(d=d.markupFactory?d.markupFactory(this._params,this.domNode,d):d.prototype&&d.prototype.markupFactory?d.prototype.markupFactory(this._params,
this.domNode,d):new d(this._params,this.domNode))d._edit_object_id=e,b.setObject(e,d)}else if(e=this.getObjectId())if(d=b.getObject(e))d._edit_object_id=e},getObjectType:function(){var e=this.domNode,e=k.get(e,"data-dojo-type")||k.get(e,"dojoType");return e=e.replace(/\./g,"/")},getObjectId:function(){return k.get(this.domNode,"jsId")},_getChildren:function(){return[]}})})},"davinci/ve/commands/StyleCommand":function(){define(["dojo/_base/declare","davinci/ve/widget","davinci/ve/utils/StyleArray"],
function(p,k,f){return p("davinci.ve.commands.StyleCommand",null,{name:"style",constructor:function(e,b,d){this._newValues=b;this._id=e?e.id:void 0;this._applyToStateIndex=d&&"Normal"!=d&&"undefined"!=d?d:"undefined"},add:function(e){e&&e._id==this._id&&e._newValues&&dojo.mixin(this._newValues,e._newValues)},execute:function(e,b){if(this._id&&this._newValues&&(e=require("davinci/ve/widget").byId(this._id))&&e.domNode){var d=require("davinci/ve/States"),n=e.getStyleValuesAllStates();this._oldStyleValuesAllStates=
dojo.clone(n);n[this._applyToStateIndex]=n[this._applyToStateIndex]?f.mergeStyleArrays(n[this._applyToStateIndex],this._newValues):this._newValues;for(var a=n[this._applyToStateIndex],m=a.length-1;0<=m;m--){var h=a[m],g=!1,c;for(c in h)"$MAQ_DELETE_PROPERTY$"==h[c]?delete h[c]:g=!0;g||a.splice(m,1)}e.setStyleValuesAllStates(n);c=d.getStatesListCurrent(e.domNode);a=f.mergeStyleArrays([],n.undefined);for(m=0;m<c.length;m++)n[c[m]]&&(a=f.mergeStyleArrays(a,n[c[m]]));e.setStyleValuesCanvas(a);e.setStyleValuesModel(n.undefined);
e.refresh();d.resetState(e.domNode);!0!==b&&dojo.publish("/davinci/ui/widgetPropertiesChanged",[[e]])}},undo:function(){if(this._id&&this._oldStyleValuesAllStates){var e=require("davinci/ve/widget").byId(this._id);if(e){require("davinci/ve/States");var b=this._oldStyleValuesAllStates,d=this._applyToStateIndex;e.setStyleValuesAllStates(b);b=f.mergeStyleArrays(b.undefined,b[d]);e.setStyleValuesCanvas(b);e.setStyleValuesModel(this._oldStyleValuesAllStates.undefined);e.refresh();require("davinci/ve/States").resetState(e.domNode);
dojo.publish("/davinci/ui/widgetPropertiesChanged",[[e]])}}}})})},"davinci/lang/ve":function(){define([],function(){return{common:"Common",widgetSpecific:"Widget",events:"Events",layout:"Layout",showMinMax:"show min/max",padding:"Padding",margins:"Margins",showtrbl:"show t/r/b/l",background:"Background",border:"Border",showDetails:"show details",fontsAndText:"Fonts/Text",shapesSVG:"SVG",properties:"properties",Scenes:"Scenes",States:"States",ActiveScene:"This scene is currently visible",AppStateFocus:"This application state is the target for application-state-specific visibility or styling changes",
InitialScene:"This scene will show initially when the page runs",chooseDeviceSilhouette:"Choose a device silhouette: ",filesHasUnsavedChanges:"The file '${0}' has unsaved changes, \"Save\" changes and continue with switch device silhouette.",selectAncestorTitle:"Select ancestor",selectAncestorLabel:"Select ancestor (closest ancestor listed first):",createNewState:"Create New State",updateCurrentState:"Update Current State",createLabel:"Create",updateLabel:"Update",modifyState:"Modify State",modifyLabel:"Update",
stateLabel:"Name",enterStateName:"Please enter a state name.",stateNameExists:"State name '${name}' already exists. Please enter a different state name.",renameState:"Rename State",renameLabel:"Rename",cancelLabel:"Cancel",newStateLabel:"New name:",manageStates:"Manage Widget Visibility for Different States",manageStatesCheckLabel:"Check:",manageStatesCheckCurrentStateOnly:"Current state",manageStatesCheckAll:"All",manageStatesUncheckAll:"None",manageStatesCheckBackgroundOnly:"Background only",manageStatesAllVisibleFromBackground:"(Visible from Background)",
manageStatesSomeVisibleFromBackground:"(Some visible from Background)",manageStatesSomeVisibleSomeHidden:"(Some visible, some hidden)",initialStateCheckBoxLabel:"Initial state at document load time",EnableApplicationStates:"Enable/disable application states",EnableAsStateContainerDescription:"Setting the check box below and clicking OK will allow custom application states to be defined on the currently selected widget.",DisableAsStateContainerDescription:"Unsetting the check box below and clicking OK will disallow custom application states on the currently selected widget.",
DisableAsStateContainerDataLoss:"Any existing interactivity based on existing application states will be lost.",EnableAsStateContainerWidgetLabel:"Application states are enabled on this widget",EnableApplicationStatesCurrentWidget:"Currently selected widget",EnableApplicationStatesCurrentStates:"Current application states",EnableApplicationStatesNone:"(none)",NewWidgetsCurrentStateTitleBackground:"Toggle whether new widgets go to Background or selected state (current value: Background)",NewWidgetsCurrentStateTitleCurrentState:"Toggle whether new widgets go to Background or selected state (current value: selected state)",
richTextInputHelp:"Provides Rich Text (word processor-like) editing of HTML.",smartInputHelp1:"If you use any markup characters (\x26lt;,\x26gt;,\x26amp;), you need to specify whether the text represents literal (plain) text or HTML markup that should be parsed (using an innerHTML assignment).",smartInputHelp2:"Text represents literal (plain) text.",loading:"Loading...",htmlMarkup:"HTML markup",creatingStyleRules:"Creating Style Rules with app.css",propChangeCannotComplete:"This property change cannot be completed because the operation attempts to modify a read-only theme CSS file.",
toChangeProperty:"To change this property, one technique is to add a class to this widget (at top of Properties palette)  and then open up the CSS Details pane to target a style rule within your app.css file, as described at ${0}.",errorModifyingValue:"Error modifying value",changeWillModify:"This change will modify one of the CSS style rules defined within a 'CSS theme' and will therefore probably impact other widgets on a global basis.",insteadOfChanging:"Instead of changing the theme CSS files, it is usually better to add a class to this widget (at the top of the Properties palette) and then open up the CSS Details pane to target a style rule within your app.css file, as described at ${0}.",
okToProceed:"OK to proceed with this change?",valueIsOverriden:"This value is overriden and can not be changed.",applyToWhich:"Apply to which style rule:",onlyApplyToState:" Only apply to current state (${0})",newRule:"[class: ${0} - New rule in ${1}] ",newThemeRule:"[theme: - New rule in ${0}] ",existingRule:"[class: ${0} - Existing rule in ${1}] ",line:" line: ${0})",propUndefined:"undefined",bgdType_emptystring:"",bgdType_none:"none",bgdType_url:"image",bgdType_linear:"linear gradient",bgdType_radial:"radial gradient",
bgdType_other:"other",bgdPickFile:"Choose...",bgdStop:"Stop",bgdAddStop:"Add a new gradient stop after this stop",bgdRemoveStop:"Remove this gradient stop",bgdBackgroundColor:"background-color:",bgdBackgroundImageType:"background-image type:",bgdImageUrl:"Image URL:",bgdUrl:"URL:",bgdColorStops:"Color stops:",bgdColor:"color",bgdPosition:"position",bgdOptions:"Options:",bgdAngle:"Angle:",bgdPosition2:"Position:",bgdShape:"Shape:",bgdExtent:"Extent:",bgdBackgroundRepeat:"background-repeat:",bgdBackgroundPosition:"background-position:",
bgdBackgroundSize:"background-size:",bgdBackgroundOrigin:"background-origin:",bgdBackgroundClip:"background-clip:",bgdBackgroundImageValue:"'background-image' value:",bgdTemplate:"Template:",colorPicker:"Color picker...",removeValue:"Remove Value",selectColor:"select a color",toolBarFor:"",noSelection:"(no selection)",toolBarClass:"class:",toolBarId:"ID:",idAlreadyUsed:"This id is already used by another widget",noValidParents:"No valid parents at this position",willBeChildOf:"Will become a child of:",
candidateParents:"Candidate parents:",toChangePress:"To change, press numbers",vteWarningTitle:"Theme Version Warning",vteWarningMessage:"Theme version does not match Maqetta version this could produce unexpected results. We suggest recreating the custom theme using the current version of Maqetta and deleting the existing theme.",vteWarningUnsuportedBrowserTitle:"Unsupported brower",vteWarningUnsuportedBrowserMessage:"Editing mobile themes is only supported on webkit browsers, we sugguest using Chrome or Safari to customize mobile themes.",
vteWarningToolkitMessage:"Theme version does not match workspace library version this could produce unexpected results. We suggest recreating the custom theme using the current version of Maqetta and deleting the existing theme.",vteErrorTitle:"Theme Version Error",vteErrorMessage:"Theme version is not supported by this version of Maqetta. You must recreating custom theme using the current version of Maqetta and deleting the existing theme..",vteErrorSavingResourceMessage:"error saving resource\n",
"SourceComboButton-source":"Source","SourceComboButton-splitHorizontal":"Split-H","SourceComboButton-splitVertical":"Split-V","LayoutDropDownButton-flow":"Flow","LayoutDropDownButton-absolute":"Absolute"}})},"davinci/ve/palette/Palette":function(){define("dojo/_base/declare dojo/_base/lang dojo/_base/connect dojo/on dojo/query dojo/dom-class dojo/Deferred dijit/focus davinci/Runtime davinci/Workbench dijit/_KeyNavContainer davinci/ui/dnd/DragSource davinci/ve/metadata davinci/library ./PaletteFolder ./PaletteItem davinci/_common davinci/ve/tools/CreateTool davinci/workbench/Preferences dijit/_WidgetBase".split(" "),
function(p,k,f,e,b,d,n,a,m,h,g,c,q,A,u,x,z,B,w,r){return p("davinci.ve.palette.Palette",[r,g],{descriptors:"",_displayShowValue:"block",_presetClassNamePrefix:"maqPaletteSection_",_presetSections:{},_presetCreated:{},raisedItems:[],sunkenItems:[],moreItems:[],helpItems:[],_userWidgetSection:{id:"$$UserWidgets$$",name:"User Widgets",includes:[]},postMixInProperties:function(){this._resource=z},postCreate:function(){dojo.addClass(this.domNode,"dojoyPalette");this.refresh();f.subscribe("/davinci/ui/addedCustomWidget",
this,"addCustomWidget");f.subscribe("/davinci/preferencesChanged",this,"preferencesChanged")},addCustomWidget:function(a){if(this._loaded&&a&&a.$wm&&a.$wm.widgets&&a.$wm.widgets.length){var c=m.currentEditor.getContext().getCompType();w.getPreferences("davinci.ve.editorPrefs",h.getProject()).showAllWidgets&&(c="mobile"==c?"$ALLMOBILE":"$ALLDESKTOP");var b=a.$wm;a=a.$wm.widgets;for(var g=null,d=0;d<a.length;d++){var e=a[d],f;for(f in this._presetSections){var n=null,q=this._presetSections[f];if(q){for(var v=
0;v<q.length;v++){var A=q[v];if("$$UserWidgets$$"==A.id){n=A;break}}n||(n=dojo.clone(this._userWidgetSection),n.preset=this._presetSections[f],n.presetId=f,n.items=[],q.push(n),this._presetCreated[f]&&(this._generateCssRules([n]),this._createPalette(n),n._created=!0));q="type:"+e.type;if(0>n.includes.indexOf(q)){n.includes.push(q);e.$library=b;e.section=n;e._paletteItemGroup=this._paletteItemGroupCount++;n.items.push(e);q=null;v=this.getChildren();for(A=0;A<v.length;A++){var x=v[A];if("davinci.ve.palette.PaletteFolder"==
x.declaredClass&&x.presetId==f&&"$$UserWidgets$$"==x.section.id){q=x;break}}q&&(q.domNode.style.display="none",n={displayName:e.$library._maqGetString(e.type)||e.$library._maqGetString(e.name)||e.name,description:e.$library._maqGetString(e.type+"_description")||e.$library._maqGetString(e.name+"_description")||e.description||e.type,name:e.name,paletteId:this.id,type:e.type,data:e.data||{name:e.name,type:e.type,properties:e.properties,children:e.children},tool:e.tool,category:"custom",section:n,PaletteFolderSection:q,
PaletteFolderSubsection:null,_paletteItemGroup:e._paletteItemGroup,_paletteGroupSelected:!0},this._setIconProperties(e,n),this._createItem(n,q).domNode.style.display="none",c==f&&(g=q))}}else console.error("Palette.js:addCustomWidget - no sections for comptype\x3d"+f)}}g&&g.showHideFolderContents(!0)}},setContext:function(a){this._context=a;try{this._loadPalette()}catch(y){console.error("_loadPalette:crash "+y)}this._filter();this.updatePaletteVisibility()},refresh:function(){delete this._loaded;
this._presetSections={};this._createFolderTemplate();this._createHeader();if(this._context)try{this._loadPalette()}catch(v){console.error("_loadPalette:crash")}},_loadPalette:function(){if(!this._loaded){var a=q.getLibrary(),c=A.getUserLibs(h.getProject()),b={};c&&c.forEach(function(c){var g;a:{g=c.id;c=c.version;for(var d in a)if(a.hasOwnProperty(d)){var e=a[d];if(e.name===g&&e.version===c){c={};c[g]=a[d];g=c;break a}}g=null}g&&dojo.mixin(b,g)});var c={},g=[],d;for(d in b)if(b.hasOwnProperty(d)){var e=
b[d].$wm;e&&e&&e.widgets&&e.widgets.forEach(function(a){"untested"==a.category||a.hidden||g.push(a.type)})}this._paletteItemGroupCount=0;if(this._widgetPalette=m.getSiteConfigData("widgetPalette")){if((d=this._widgetPalette.presets)&&"object"==typeof d)for(var n in d){e=g.concat();this._presetSections[n]=[];var f=d[n],x,z="string"==typeof f.sections?this._widgetPalette.defs?this._widgetPalette.defs[f.sections]:void 0:f.sections;if(z&&z.length){var u=[],k;for(k in c){var B=c[k];B.descriptor&&u.push({name:k,
value:B})}u.sort(function(a,c){a=a.name.split("/").pop().toLowerCase();c=c.name.split("/").pop().toLowerCase();return a<c?-1:a>c?1:0});for(var B=!1,w,r=0;r<u.length;r++){B||(k=dojo.clone(this._userWidgetSection),z=z.concat(k),B=!0,w=k.includes);var p=u[r].value.descriptor.widgets;for(k=0;k<p.length;k++)w.push("type:"+p[k].type)}for(u=0;u<z.length;u++){B=dojo.clone("string"==typeof z[u]?this._widgetPalette.defs?this._widgetPalette.defs[z[u]]:void 0:z[u]);B.preset=f;B.presetId=n;if(B.subsections&&B.subsections.length)for(r=
B.subsections,p=0;p<r.length;p++){if("string"==typeof r[p]){var M=this._widgetPalette.defs?this._widgetPalette.defs[r[p]]:void 0;M&&(r[p]=dojo.clone(M))}M=r[p];M.includes&&0<=M.includes.indexOf("$$AllOthers$$")&&(x=M);M.preset=f;M.presetId=n;this._createSectionItems(M,f,e)}else this._createSectionItems(B,f,e),B.includes&&0<=B.includes.indexOf("$$AllOthers$$")&&(x=B);this._presetSections[n].push(B)}}for(f=0;f<e.length;f++)z=e[f],x&&(z=q.getWidgetDescriptorForType(z),z=dojo.clone(z),this._prepareSectionItem(z,
x,this._paletteItemGroupCount),x.items.push(z),this._paletteItemGroupCount++)}}else console.error("widgetPalette.json not defined (in siteConfig folder)");this._loaded=!0}},_generateCssRules:function(a){var c=dojo.doc.styleSheets[0];c&&dojo.forEach(a,function(a){a.items&&dojo.forEach(a.items,function(a){var b=a.iconBase64||this._getIconUri(a.icon,"ve/resources/images/file_obj.gif");a="img.davinci_"+a.type.replace(/[\.\/]/g,"_");b="{background-image: url("+b+")}";dojo.isIE?c.addRule(a,b):c.insertRule(a+
b,c.cssRules.length)},this)},this)},_createPaletteItemsForComponent:function(a,c){if(a.items){var b=null;dojo.forEach(a.items,function(g){if(!g.hidden){var d={displayName:g.$library._maqGetString(g.type)||g.$library._maqGetString(g.name)||g.name,description:g.$library._maqGetString(g.type+"_description")||g.$library._maqGetString(g.name+"_description")||g.description||g.type,name:g.name,paletteId:this.id,type:g.type,data:g.data||{name:g.name,type:g.type,properties:g.properties,children:g.children},
category:a.name,section:a,preset:a.preset,presetId:a.presetId,presetClassName:c.presetClassName,PaletteFolderSection:c.PaletteFolderSection,PaletteFolderSubsection:c.PaletteFolderSubsection,_paletteItemGroup:g._paletteItemGroup,_paletteGroupSelected:g._paletteItemGroup!=b,_collectionName:g.$library&&g.$library.collections&&g.$library.collections[g.collection]&&g.$library.collections[g.collection].name,ignoreMeta:g.ignoreMeta,userData:g.userData,forceShow:g.forceShow,iconHTML:g.iconHTML};this._setIconProperties(g,
d);this._createItem(d);b=g._paletteItemGroup}},this)}},_createPalette:function(a){var c=a.presetId?this._presetClassNamePrefix+a.presetId:null,b={paletteId:this.id,icon:this._getIconUri(a.icon,"ve/resources/images/fldr_obj.gif"),iconBase64:a.iconBase64,displayName:a.name,section:a,subsections:a.subsections,subsection_container:null,preset:a.preset,presetId:a.presetId,presetClassName:c};this._createFolder(b).then(function(b){if(a.subsections&&a.subsections.length)for(var g=0;g<a.subsections.length;g++){var d=
a.subsections[g],d={paletteId:this.id,icon:this._getIconUri(d.icon,"ve/resources/images/fldr_obj.gif"),iconBase64:d.iconBase64,displayName:d.name,section:a,subsection:d,subsection_container:b,preset:a.preset,presetId:a.presetId,presetClassName:c};this._createFolder(d).then(function(d){b._children.push(d);this._createPaletteItemsForComponent(a.subsections[g],{presetClassName:c,PaletteFolderSection:b,PaletteFolderSubsection:d})}.bind(this))}else this._createPaletteItemsForComponent(a,{presetClassName:c,
PaletteFolderSection:b,PaletteFolderSubsection:null})}.bind(this))},_getIconUri:function(a,c){return a?0==a.indexOf("http")?a:h.location()+a:require.toUrl("davinci/"+c)},_createFolder:function(a){var c=new n;require(["davinci/ve/palette/PaletteFolder"],function(b){b=new b(a);this.addChild(b);c.resolve(b)}.bind(this));return c},_createFolderTemplate:function(){this.folderTemplate=dojo.create("div",{className:"dojoyPaletteCommon dojoyPaletteFolder dojoyPaletteFolderLow ui-widget-header",innerHTML:'\x3ca href\x3d"javascript:void(0)"\x3e\x3cimg border\x3d"0"/\x3e\x3c/a\x3e'})},
_createHeader:function(){},_updateShowAllWidgetsPreference:function(a){var c=h.getProject(),b=w.getPreferences("davinci.ve.editorPrefs",c);b.showAllWidgets=a;w.savePreferences("davinci.ve.editorPrefs",c,b)},_updateShowAllWidgetsMenu:function(a){},_clearFilter:function(){this.filterField&&this.filterField.set("value","");this._filter()},_filter:function(){var a=this.context.getCompType(),c=w.getPreferences("davinci.ve.editorPrefs",h.getProject());c.showAllWidgets=!0;c.showAllWidgets&&(a="mobile"==
a?"$ALLMOBILE":"$ALLDESKTOP");dojo.removeClass(this.domNode,"maqWidgetsFiltered");this.toolbarDiv&&dojo.removeClass(this.toolbarDiv,"maqWidgetsToolbarFiltered");this.getChildren().forEach(function(c){"dijit.form.TextBox"!=c.declaredClass&&dojo.style(c.domNode,"display","davinci.ve.palette.PaletteFolder"===c.declaredClass&&c.presetId==a&&0<c._children.length&&("simple"==c._type||"subsection_container"==c._type)?"block":"none")})},_hasItem:function(a){for(var c=this.getChildren(),b=0;b<c.length;b++)if(c[b].type==
a)return!0;return!1},_createItem:function(a,g){if("$$UserWidgets$$"!=a.section.id){var d=q.queryDescriptor(a.type,"collection"),e;if(a.preset&&(e=a.preset.collections,!e||!e.length)){console.error("_create item : presetCollections.l\x3d0");return}if(a.preset&&a.preset.exclude){var h="string"==typeof a.preset.exclude?this._widgetPalette.defs?this._widgetPalette.defs[a.preset.exclude]:void 0:a.preset.exclude;if(h&&0<=h.indexOf(a.type)){console.error("_create item : exclude \x3d 1");return}}h=!1;if(e&&
e.length){for(var f=0;f<e.length;f++)if(e[f].id==d&&e[f].show){h=!0;break}!0===a.ignoreMeta&&(h=!0);if(!h)return}}a.icon=a.iconLarge;d=new x(a);g?g.addChild(d):this.addChild(d);a.paletteItem=d;a.PaletteFolderSubsection?(a.PaletteFolderSubsection._children.push(d),d.domNode.style.display=a.PaletteFolderSubsection._isOpen&&d._paletteGroupSelected?this._displayShowValue:"none"):a.PaletteFolderSection&&(a.PaletteFolderSection._children.push(d),d.domNode.style.display=a.PaletteFolderSection._isOpen&&d._paletteGroupSelected?
this._displayShowValue:"none");g=b(".paletteItemImageContainer",d.domNode)[0];g=new c(d.domNode,"component",d,g);g.targetShouldShowCaret=!0;g.returnCloneOnFailure=!1;this.connect(g,"onDragStart",dojo.hitch(this,function(a){this.onDragStart(a)}));this.connect(g,"onDragEnd",dojo.hitch(this,function(a){this.onDragEnd(a)}));a.forceShow&&(d.domNode.style.display="inline-block");return d},_prepareSectionItem:function(a,c,b){var g=q.getLibraryMetadataForType(a.type);a.$library=g;a.section=c;a._paletteItemGroup=
b},_createSectionItems:function(a,c,b){a.items=[];collections=c.collections;c=a.includes||[];for(var g=0;g<c.length;g++){for(var d=c[g],e=k.isArray(d)?d:[d],d=[],h=0;h<e.length;h++){var f=e[h],n=[];if("type:"===f.substr(0,5)){var m=q.getWidgetDescriptorForType(f.substr(5));m&&n.push(m)}else n=q.getWidgetsWithTag(f);for(f=0;f<n.length;f++)m=n[f],m=dojo.clone(m),this._prepareSectionItem(m,a,this._paletteItemGroupCount),d.push(m)}e=[];if(collections&&collections.length){for(n=0;n<collections.length;n++)for(f=
collections[n],h=0;h<d.length;)m=d[h],m.collection==f.id?(e.push(m),d.splice(h,1)):h++;for(h=0;h<d.length;h++)e.push(d[h])}else e=d;for(h=0;h<e.length;h++)d=e[h],n=b.indexOf(d.type),0<=n&&b.splice(n,1),a.items.push(d);this._paletteItemGroupCount++}},updatePaletteVisibility:function(){this._clearFilter();this._updateShowAllWidgetsMenu();var a=m.currentEditor.getContext().getCompType();this._presetCreated[a]=!0;dojo.addClass(this.domNode,"paletteLayoutIcons");this._displayShowValue="inline-block";var c=
this._presetSections[a];if(c)for(var b=0;b<c.length;b++){var g=c[b];g._created||(this._generateCssRules([g]),this._createPalette(g),g._created=!0)}c=this.getChildren();b=0;for(g=c.length;b<g;b++){var d=c[b];d&&d.domNode&&d.presetId&&("davinci.ve.palette.PaletteFolder"==d.declaredClass?(d.domNode.style.display=d.presetId==a?0==d._children.length||"subsection"==d._type?"none":"block":"none","subsubsection_container"==d._type&&(d._openSubsection=null),d._isOpen=!1):d.domNode.style.display=d.forceShow?
"inline-block":"none")}},preferencesChanged:function(){for(var a=w.getPreferences("davinci.ve.editorPrefs",h.getProject()),a=a.widgetPaletteLayout&&"icons"!=a.widgetPaletteLayout?"icon":"iconLarge",c=this.getChildren(),b=0;b<c.length;b++){var g=c[b];"davinci.ve.palette.PaletteItem"==g.declaredClass&&g.updateImgSrc(g[a])}this.updatePaletteVisibility()},flattenAll:function(){for(var a=0;a<this.raisedItems.length;a++)this.raisedItems[a].flat(this.raisedItems[a].domNode);this.raisedItems=[];for(a=0;a<
this.sunkenItems.length;a++){var c=this.sunkenItems[a];c._tooltipDialog&&(c.paletteItemMoreCloseCleanup(),c.paletteItemHelpCloseCleanup());c.flat(c.domNode);c._selectionShowing=!1}this.sunkenItems=[]},removeSelectionAll:function(){try{this.flattenAll()}catch(E){console.error("flatten failed")}for(var a=b(".paletteItemSelectionContent",this.domNode),c=0;c<a.length;c++){var g=a[c];g&&g.parentNode&&(g.parentNode.innerHTML="")}},getPaletteItemsSameGroup:function(a){for(var c=[],b=a._paletteItemGroup,
g;a&&a._paletteItemGroup;)if(a._paletteItemGroup==b)a=(g=a)&&a.domNode&&a.domNode.previousSibling&&a.domNode.previousSibling._paletteItem;else break;for(a=g;a&&a._paletteItemGroup==b;)c.push(a),a=a&&a.domNode&&a.domNode.nextSibling&&a.domNode.nextSibling._paletteItem;return c},_setIconProperties:function(a,c){c.icon=a.iconBase64||a.icon&&this._getIconUri(a.icon,"ve/resources/images/file_obj.gif")||a.iconLargeBase64||a.iconLarge&&this._getIconUri(a.iconLarge,"ve/resources/images/file_obj.gif")||this._getIconUri(a.icon,
"ve/resources/images/file_obj.gif");c.iconLarge=a.iconLargeBase64||a.iconLarge&&this._getIconUri(a.iconLarge,"ve/resources/images/file_obj.gif")||a.iconBase64||this._getIconUri(a.icon,"ve/resources/images/file_obj.gif")},onDragStart:function(a){this.removeSelectionAll();this.selectedItem=null;var c=a.dragSource.data;q.getHelper(c.type,"tool").then(function(a){a=new (a||B)(dojo.clone(c.data),c.userData);this._context.setActiveTool(a)}.bind(this));this._context.blockChange(!1);a._dragClone&&(d.add(a._dragClone,
"paletteDragContainer"),dojo.create("div",{className:"maqCandidateParents"},a._dragClone));this._context.setActiveDragDiv(a._dragClone);this._dragKeyDownListener=dojo.connect(document,"onkeydown",dojo.hitch(this,function(a){var c=this._context.getActiveTool();if(c&&c.onKeyDown)c.onKeyDown(a)}));this._dragKeyUpListener=dojo.connect(document,"onkeyup",dojo.hitch(this,function(a){var c=this._context.getActiveTool();if(c&&c.onKeyUp)c.onKeyUp(a)}))},onDragEnd:function(c){this._context.setActiveTool(null);
this._context.setActiveDragDiv(null);dojo.disconnect(this._dragKeyDownListener);dojo.disconnect(this._dragKeyUpListener);a.curNode&&a.curNode.blur&&a.curNode.blur();this.removeSelectionAll();this.selectedItem=null;this.flattenAll()},onDragMove:function(a){},nop:function(){return!1},__dummy__:null})})},"davinci/ui/dnd/DragSource":function(){define(["dojo/_base/declare","dojo/fx"],function(p,k){return p("davinci.ui.dnd.DragSource",null,{disabled:!1,dragObject:null,dragClone:null,offsetParent:null,offsetParentCoords:null,
parentCoords:null,refNode:null,positioning:null,useCurrentPositioning:!0,targetShouldShowCaret:!1,draggingMousePosition:"TopLeft",data:null,returnCloneOnFailure:!0,constructor:function(f,e,b,d){this.data=b;f=dojo.byId(f);f.dragSource=this;this.domNode=f;this.dragObject=d?d:f;this.refNode=f;this.type=e;this.offsetParent=dojo.doc.body},onDragDown:function(f){this.useCurrentPositioning&&(this.positioning=dojo.style(this.refNode,"position"));this.storeMouseDownInfo(f);this.initDrag(f)},onDragStart:function(f){this.createDragClone(f);
return f._dragClone=this.dragClone},onDragMove:function(f){"TopLeft"==this.draggingMousePosition?(this.dragClone.style.top=f.pageY+4+(f.documentY||0)+"px",this.dragClone.style.left=f.pageX+4+(f.documentX||0)+"px"):"ClickedPosition"==this.draggingMousePosition&&(this.dragClone.style.top=f.pageY-this.dragOffset.y+(f.documentY||0)+"px",this.dragClone.style.left=f.pageX-this.dragOffset.x+(f.documentX||0)+"px");"none"==this.dragClone.style.display&&(this.dragClone.style.display="")},onDragEnd:function(f){"dropSuccess"!=
f.dragStatus&&this.returnCloneOnFailure?"dropFailure"==f.dragStatus?this.returnClone():console.error("DragSource#onDragEnd: internal error: e.dragStatus is not set"):this.removeClone();this.cleanupDrag()},unregister:function(){this.domNode.dragSource=null;this.cleanupDrag()},reregister:function(){this.domNode.dragSource=this;this.initDrag()},storeMouseDownInfo:function(f){this.layerX=f.layerX-1;this.layerY=f.layerY-1;this.pageX=f.pageX;this.pageY=f.pageY;this.scrollOffset=dojo._docScroll();window.__x&&
window.__x.apply(this);this.dragStartPosition=dojo.position(this.refNode,!0);this.dragStartCssPosition={y:this.refNode.offsetTop,x:this.refNode.offsetLeft};this.dragOffset={y:f.pageY-this.dragStartPosition.y,x:f.pageX-this.dragStartPosition.x};this.offsetParentCoords=dojo.position(this.offsetParent,!0);f=dojo.position(this.domNode.parentNode,!0);this.parentCoords={y:f.y-this.offsetParentCoords.y,x:f.x-this.offsetParentCoords.x};this.fixMouseDownInfo&&this.fixMouseDownInfo(this)},initDrag:function(){},
cleanupDrag:function(){},createDragClone:function(f){this.dragClone=f=f.dragSource.dragHandler&&f.dragSource.dragHandler.createDragClone?f.dragSource.dragHandler.createDragClone():this.dragObject.cloneNode(!0);dojo.style(f,"opacity",.5);f.style.zIndex=1001E3;var e=dojo.contentBox(this.dragObject);f.style.width=e.w+"px";f.style.height=e.h+"px";f.style.top=this.dragObject.offsetTop+4+"px";f.style.left=this.dragObject.offsetLeft+4+"px";f.style.position="absolute";f.style.clear="both";f.style.display=
"none";this.offsetParent.appendChild(f)},setDragTarget:function(f){this.dragObject=f},cancelEvent:function(f){f.stopPropagation();f.preventDefault()},removeClone:function(){setTimeout(dojo.hitch(this,"removeClone_1"),0)},removeClone_1:function(){try{this.dragClone.parentNode.removeChild(this.dragClone),this.dragClone=null}catch(f){logError(f)}},returnClone:function(){var f=dojo.position(this.dragClone,!0),e=this.dragStartPosition,b=this;k.slideTo({node:this.dragClone,top:f.y>e.y?e.y-10:e.y+10,left:f.x>
e.x?e.x-10:e.x+10,duration:400,onEnd:function(){k.slideTo({node:b.dragClone,top:e.y,left:e.x,duration:100,onEnd:function(){b.dragClone.parentNode.removeChild(b.dragClone);b.dragClone=null;b.onCloneReturned()}}).play()}}).play()},onCloneReturned:function(){},globalChangeCursor:function(f){var e=dojo.doc.styleSheets[0];if(e)if(f){if(this._showingCursor){if(this._showingCursor==f)return;this.globalChangeCursor(null)}this._showingCursor=f;this._ruleIndex=e.cssRules.length;e.insertRule("*{cursor:"+f+" ! important;}",
e.cssRules.length)}else this._showingCursor&&(this._showingCursor=null,e.deleteRule(this._ruleIndex))}})})},"dojo/fx":function(){define("./_base/lang ./Evented ./_base/kernel ./_base/array ./aspect ./_base/fx ./dom ./dom-style ./dom-geometry ./ready require".split(" "),function(p,k,f,e,b,d,n,a,m,h,g){f.isAsync||h(0,function(){g(["./fx/Toggler"])});f=f.fx={};h={_fire:function(a,c){this[a]&&this[a].apply(this,c||[]);return this}};var c=function(a){this._index=-1;this._animations=a||[];this._current=
this._onAnimateCtx=this._onEndCtx=null;this.duration=0;e.forEach(this._animations,function(a){this.duration+=a.duration;a.delay&&(this.duration+=a.delay)},this)};c.prototype=new k;p.extend(c,{_onAnimate:function(){this._fire("onAnimate",arguments)},_onEnd:function(){this._onAnimateCtx.remove();this._onEndCtx.remove();this._onAnimateCtx=this._onEndCtx=null;this._index+1==this._animations.length?this._fire("onEnd"):(this._current=this._animations[++this._index],this._onAnimateCtx=b.after(this._current,
"onAnimate",p.hitch(this,"_onAnimate"),!0),this._onEndCtx=b.after(this._current,"onEnd",p.hitch(this,"_onEnd"),!0),this._current.play(0,!0))},play:function(a,c){this._current||(this._current=this._animations[this._index=0]);if(!c&&"playing"==this._current.status())return this;var g=b.after(this._current,"beforeBegin",p.hitch(this,function(){this._fire("beforeBegin")}),!0),d=b.after(this._current,"onBegin",p.hitch(this,function(a){this._fire("onBegin",arguments)}),!0),e=b.after(this._current,"onPlay",
p.hitch(this,function(a){this._fire("onPlay",arguments);g.remove();d.remove();e.remove()}));this._onAnimateCtx&&this._onAnimateCtx.remove();this._onAnimateCtx=b.after(this._current,"onAnimate",p.hitch(this,"_onAnimate"),!0);this._onEndCtx&&this._onEndCtx.remove();this._onEndCtx=b.after(this._current,"onEnd",p.hitch(this,"_onEnd"),!0);this._current.play.apply(this._current,arguments);return this},pause:function(){if(this._current){var a=b.after(this._current,"onPause",p.hitch(this,function(c){this._fire("onPause",
arguments);a.remove()}),!0);this._current.pause()}return this},gotoPercent:function(a,c){this.pause();var b=this.duration*a;this._current=null;e.some(this._animations,function(a){if(a.duration<=b)return this._current=a,!0;b-=a.duration;return!1});this._current&&this._current.gotoPercent(b/this._current.duration,c);return this},stop:function(a){if(this._current){if(a){for(;this._index+1<this._animations.length;++this._index)this._animations[this._index].stop(!0);this._current=this._animations[this._index]}var c=
b.after(this._current,"onStop",p.hitch(this,function(a){this._fire("onStop",arguments);c.remove()}),!0);this._current.stop()}return this},status:function(){return this._current?this._current.status():"stopped"},destroy:function(){this._onAnimateCtx&&this._onAnimateCtx.remove();this._onEndCtx&&this._onEndCtx.remove()}});p.extend(c,h);f.chain=function(a){return new c(a)};var q=function(a){this._animations=a||[];this._connects=[];this.duration=this._finished=0;e.forEach(a,function(a){var c=a.duration;
a.delay&&(c+=a.delay);this.duration<c&&(this.duration=c);this._connects.push(b.after(a,"onEnd",p.hitch(this,"_onEnd"),!0))},this);this._pseudoAnimation=new d.Animation({curve:[0,1],duration:this.duration});var c=this;e.forEach("beforeBegin onBegin onPlay onAnimate onPause onStop onEnd".split(" "),function(a){c._connects.push(b.after(c._pseudoAnimation,a,function(){c._fire(a,arguments)},!0))})};p.extend(q,{_doAction:function(a,c){e.forEach(this._animations,function(b){b[a].apply(b,c)});return this},
_onEnd:function(){++this._finished>this._animations.length&&this._fire("onEnd")},_call:function(a,c){var b=this._pseudoAnimation;b[a].apply(b,c)},play:function(a,c){this._finished=0;this._doAction("play",arguments);this._call("play",arguments);return this},pause:function(){this._doAction("pause",arguments);this._call("pause",arguments);return this},gotoPercent:function(a,c){var b=this.duration*a;e.forEach(this._animations,function(a){a.gotoPercent(a.duration<b?1:b/a.duration,c)});this._call("gotoPercent",
arguments);return this},stop:function(a){this._doAction("stop",arguments);this._call("stop",arguments);return this},status:function(){return this._pseudoAnimation.status()},destroy:function(){e.forEach(this._connects,function(a){a.remove()})}});p.extend(q,h);f.combine=function(a){return new q(a)};f.wipeIn=function(c){var g=c.node=n.byId(c.node),e=g.style,h;c=d.animateProperty(p.mixin({properties:{height:{start:function(){h=e.overflow;e.overflow="hidden";if("hidden"==e.visibility||"none"==e.display)return e.height=
"1px",e.display="",e.visibility="",1;var c=a.get(g,"height");return Math.max(c,1)},end:function(){return g.scrollHeight}}}},c));var f=function(){e.height="auto";e.overflow=h};b.after(c,"onStop",f,!0);b.after(c,"onEnd",f,!0);return c};f.wipeOut=function(a){var c=(a.node=n.byId(a.node)).style,g;a=d.animateProperty(p.mixin({properties:{height:{end:1}}},a));b.after(a,"beforeBegin",function(){g=c.overflow;c.overflow="hidden";c.display=""},!0);var e=function(){c.overflow=g;c.height="auto";c.display="none"};
b.after(a,"onStop",e,!0);b.after(a,"onEnd",e,!0);return a};f.slideTo=function(c){var g=null,e=null,h=function(c){return function(){var b=a.getComputedStyle(c),d=b.position;g="absolute"==d?c.offsetTop:parseInt(b.top)||0;e="absolute"==d?c.offsetLeft:parseInt(b.left)||0;"absolute"!=d&&"relative"!=d&&(b=m.position(c,!0),g=b.y,e=b.x,c.style.position="absolute",c.style.top=g+"px",c.style.left=e+"px")}}(c.node=n.byId(c.node));h();c=d.animateProperty(p.mixin({properties:{top:c.top||0,left:c.left||0}},c));
b.after(c,"beforeBegin",h,!0);return c};return f})},"davinci/ve/palette/PaletteFolder":function(){define("dojo/_base/declare dijit/_WidgetBase dojo/dom-class dojo/fx davinci/Runtime davinci/ve/metadata".split(" "),function(p,k,f,e,b,d){return p("davinci.ve.palette.PaletteFolder",k,{icon:"",displayName:"",paletteId:"",palette:null,preset:null,presetId:null,presetClassName:null,_type:"",_isOpen:!1,_openSubsection:null,buildRendering:function(){this.palette=dijit.byId(this.paletteId);var b=this.domNode=
this.palette.folderTemplate.cloneNode(!0);this.presetClassName&&f.add(b,this.presetClassName);var a="PaletteFolder__"+this.presetId+"__"+this.section.id;this.subsection&&(a+="__"+this.subsection.id);dojo.attr(b,"selType",a);a=b.firstChild;dojo.attr(a,"tabIndex","0");a.onclick=this.palette.nop;a.firstChild.src=this.iconBase64?this.iconBase64:this.icon;a.appendChild(dojo.doc.createTextNode(this.displayName));b._paletteFolder=this;this._type=this.subsections?"subsection_container":this.subsection?"subsection":
"simple";"subsection"==this._type&&f.add(b,"PaletteFolderSubsection");this._children=[]},postCreate:function(){this.connect(this.domNode,"onmouseover","folderMouseOverHandler");this.connect(this.domNode,"onmouseout","folderMouseOutHandler");this.connect(this.domNode,"onclick","folderClickHandler")},startup:function(){},isFocusable:function(){return!0},focus:function(){dijit.focus(this.domNode)},addChild:function(b){for(var a=this.palette.getChildren(),d=0,e=a.length;d<e;d++)if(a[d]==this)return this.palette.addChild(b,
d+1),!0;return!1},_paletteItemGroupInfo:function(b,a){var d={},e=a,g=b[e],c=g._paletteItemGroup;do{g._paletteGroupSelected&&(d.selectedIndex=e);e++;if(e>=b.length)break;g=b[e]}while("davinci.ve.palette.PaletteItem"==g.declaredClass&&g._paletteItemGroup===c);"number"!=typeof d.selectedIndex&&(d.selectedIndex=a,b[a]._paletteGroupSelected=!0);d.endIndex=e-1;return d},folderClickHandler:function(b){this.showHideFolderContents()},showHideFolderContents:function(b){for(var a=this.palette.getChildren(),
f=0,h=a.length;f<h;){var g=a[f];if(g==this){"none"==this.domNode.style.display&&e.wipeIn({node:this.domNode,duration:100}).play();if("subsection_container"==this._type)for(this._isOpen="boolean"==typeof b?b:!this._isOpen,g=f+1;g<h;g++)if(f=a[g],"davinci.ve.palette.PaletteFolder"==f.declaredClass){if("subsection"!=f._type)break;0==f._children.length?(f.domNode.style.display="none",f.isOpen=!1):this._isOpen?(e.wipeIn({node:f.id,duration:100}).play(),f._isOpen=f==f.subsection_container._openSubsection):
(e.wipeOut({node:f.id,duration:100}).play(),f.isOpen=!1)}else this._isOpen&&f.PaletteFolderSubsection._isOpen?e.wipeIn({node:f.id,duration:100,onEnd:function(a){setTimeout(function(){a.style.height=""},1)}.bind(this,f.domNode)}).play():f.domNode.style.display="none";else for(this._isOpen="boolean"==typeof b?b:!this._isOpen,"subsection"==this._type&&(this.subsection_container._openSubsection=this._isOpen?this:null),g=f+1;g<h;){f=a[g];if("davinci.ve.palette.PaletteItem"!=f.declaredClass)break;for(f=
this._paletteItemGroupInfo(a,g);g<=f.endIndex;g++){var c=a[g],n=d.getWidgetDescriptorForType(c.type),k;n||(k=!0);if(n&&"custom"==n.category)k=!0;else if(n=n&&n.collection,k=!1,c.preset&&c.preset.collections)for(var u=c.preset.collections,x=0;x<u.length;x++){var z=u[x];if(z.id&&z.id===n){k=z.show;break}}g==f.selectedIndex&&k?this._isOpen?e.wipeIn({node:c.id,duration:100,onEnd:function(a){setTimeout(function(){a.style.height=""},1)}.bind(this,c.domNode)}).play():e.wipeOut({node:c.id,duration:100}).play():
c.domNode.style.display="none"}}f=g}else"davinci.ve.palette.PaletteItem"==g.declaredClass&&"none"!=g.domNode.style.display&&e.wipeOut({node:g.id,duration:100}).play(),"davinci.ve.palette.PaletteFolder"!=g.declaredClass||"simple"!=g._type&&"subsection"!=g._type||(g._isOpen=!1),"davinci.ve.palette.PaletteFolder"==g.declaredClass&&"subsection_container"==g._type&&g!=this.subsection_container&&(g._isOpen=!1),"davinci.ve.palette.PaletteFolder"!=g.declaredClass||"subsection"!=g._type||g.subsection_container._isOpen||
"none"==g.domNode.style.display||(e.wipeOut({node:g.id,duration:100}).play(),g._isOpen=!1),f++}return!1},folderMouseOverHandler:function(b){dojo.removeClass(this.domNode,"dojoyPaletteFolderLow");dojo.addClass(this.domNode,"dojoyPaletteFolderHi")},folderMouseOutHandler:function(b){dojo.removeClass(this.domNode,"dojoyPaletteFolderHi");dojo.addClass(this.domNode,"dojoyPaletteFolderLow")}})})},"davinci/ve/palette/PaletteItem":function(){define("dojo/_base/declare dojo/on dojo/_base/event dojo/query dojo/dom-construct dojo/dom-geometry dijit/focus dijit/_WidgetBase dojo/dom-class dojox/html/entities dijit/popup davinci/ve/tools/CreateTool davinci/ui/dnd/DragManager davinci/ve/utils/GeomUtils davinci/ve/metadata davinci/_common".split(" "),
function(p,k,f,e,b,d,n,a,m,h,g,c,q,A,u,x){return p("davinci.ve.palette.PaletteItem",a,{icon:"",displayName:"",name:"",paletteId:"",type:"",data:null,tool:"",palette:null,category:"",template:'\x3ca href\x3d"javascript:void(0)"\x3e\x3cspan class\x3d"paletteItemSelectionContainer"\x3e\x3c/span\x3e\x3cspan class\x3d"paletteItemNormalContainer"\x3e\x3cspan class\x3d"paletteItemImageContainer"\x3e\x3cimg class\x3d"paletteItemImage" border\x3d"0"/\x3e\x3c/span\x3e\x3cspan class\x3d"paletteItemLabelContainer"\x3e\x3cspan class\x3d"paletteItemLabel"\x3e\x3c/span\x3e\x3c/span\x3e\x3c/span\x3e\x3c/a\x3e',
selectedWidgetTemplate:'\x3cspan class\x3d"paletteItemSelectionContent"\x3e\x3cspan class\x3d"paletteItemSelectedStrip paletteItemSelectedStripV paletteItemSelectedStripL"\x3e\x3c/span\x3e\x3cspan class\x3d"paletteItemSelectedStrip paletteItemSelectedStripV paletteItemSelectedStripR"\x3e\x3c/span\x3e\x3cspan class\x3d"paletteItemSelectedStrip paletteItemSelectedStripH paletteItemSelectedStripT"\x3e\x3c/span\x3e\x3cspan class\x3d"paletteItemSelectedStrip paletteItemSelectedStripH paletteItemSelectedStripB"\x3e\x3c/span\x3e\x3cspan class\x3d"paletteItemSelectedIcon paletteItemSelectedMoreIcon" title\x3d"'+
x.MoreIconTitleString+'"\x3e\x3c/span\x3e\x3cspan class\x3d"paletteItemSelectedIcon paletteItemSelectedHelpIcon" title\x3d"'+x.HelpIconTitleString+'"\x3e\x3c/span\x3e\x3c/span\x3e',preset:null,presetId:null,presetClassName:null,_paletteItemGroup:null,_collectionName:null,_paletteItemMoreConnects:[],_paletteItemHelpConnects:[],item:null,constructor:function(a){this.item=a},buildRendering:function(){this.palette=dijit.byId(this.paletteId);var a=this.domNode=dojo.create("div",{className:"dojoyPaletteCommon dojoyPaletteItem"});
a.innerHTML=this.template;a._paletteItem=this;this.presetClassName&&m.add(a,this.presetClassName);var c=this.type+"__"+this.presetId+"__"+this.PaletteFolderSection.section.id;this.PaletteFolderSubsection&&(c+="__"+this.PaletteFolderSubsection.subsection.id);dojo.attr(a,"selType",c);a=a.firstChild;dojo.attr(a,"tabIndex","0");a.onclick=this.palette.nop;c=a.querySelector("img");this.item&&this.item.iconHTML?(dojo.destroy(c),a.querySelector(".paletteItemImageContainer").innerHTML=this.item.iconHTML):
c.src=this.icon;a=a.querySelector(".paletteItemLabel");a.appendChild(dojo.doc.createTextNode(this.displayName));for(var c=h.encode(a.textContent),b=c.length-1;0<b;b--)0<="_-".indexOf(c[b])?(c=c.substr(0,b+1)+"\x26#8203;"+c.substr(b+1),a.innerHTML=c):c[b].toLowerCase()!=c[b]&&(c=c.substr(0,b)+"\x26#8203;"+c.substr(b),a.innerHTML=c);this.domNode.componentClassName=this.name;dojo.setSelectable(this.domNode,!1)},postCreate:function(){var a=e(".paletteItemNormalContainer",this.domNode)[0];this.connect(a,
"onmouseover","itemMouseOverHandler");this.connect(a,"onmouseout","itemMouseOutHandler");this.connect(this.domNode,"onmousedown","itemMouseDownHandler");this.connect(this.domNode,"onmouseup","itemMouseUpHandler");this.connect(this.domNode,"onkeydown","itemKeyDownHandler")},startup:function(){},isFocusable:function(){return"none"!=dojo.style(this.domNode,"display")},focus:function(){dijit.focus(this.domNode)},itemMouseOverHandler:function(a){this._mouseover=!0;a=this.domNode;this.palette.selectedItem!=
this&&this.raised(a);setTimeout(function(){if(this._mouseover&&0==this.palette.moreItems.length&&0==this.palette.helpItems.length&&this._tooltipNode!=this.domNode){this._tooltipNode&&dijit.hideTooltip(this._tooltipPos);this._tooltipNode=this.domNode;this._tooltipPos=d.position(this.domNode,!0);var a;a='\x3cdiv class\x3d"paletteTooltip"\x3e'+('\x3cdiv class\x3d"paletteTooltipCurrent"\x3e\x3cspan class\x3d"paletteTooltipCurrentWidget"\x3e'+h.encode(this.displayName)+'\x3c/span\x3e \x3cspan class\x3d"paletteTooltipCurrentLibrary"\x3e('+
this._collectionName+")\x3c/span\x3e\x3c/div\x3e");var c=this.palette.getPaletteItemsSameGroup(this);if(1<c.length){a+='\x3cdiv class\x3d"paletteTooltipAlternates"\x3e\x3cspan class\x3d"paletteTooltipAlternatesLabel"\x3e'+x.alternates+': \x3c/span\x3e\x3cspan class\x3d"paletteTooltipAlternatesLibraries"\x3e';for(var b=!1,g=0;g<c.length;g++){var e=c[g];e!=this&&(b&&(a+=", "),a+=e._collectionName,b=!0)}a=a+"\x3c/div\x3e"+('\x3cdiv class\x3d"paletteTooltipNote"\x3e'+x.howToChooseAlternate+"\x3c/div\x3e");
a+="\x3c/div\x3e"}dijit.showTooltip(a,this._tooltipPos);setTimeout(function(){dijit.hideTooltip(this._tooltipPos);this._tooltipPos=this._tooltipNode=null}.bind(this),5E3)}}.bind(this),750)},itemMouseOutHandler:function(a){this._mouseover=!1;this._tooltipPos&&(dijit.hideTooltip(this._tooltipPos),this._tooltipPos=this._tooltipNode=null);a=this.domNode;this.palette.selectedItem==this?this.sunken(a):this.flat(a)},itemMouseDownHandler:function(a){a=this.domNode;this.focus();this.sunken(a);this.palette.selectedItem&&
this.palette.selectedItem!=this&&(this.palette.removeSelectionAll(),this.flat(this.palette.selectedItem.domNode),this.palette.selectedItem=null);q.document=this.palette._context.getDocument();if(a=this.palette._context.frameNode){a=dojo.coords(a);var c=this.palette._context.getContainerNode();q.documentX=a.x-A.getScrollLeft(c);q.documentY=a.y-A.getScrollTop(c)}u.getHelper(this.type,"helper")},itemMouseUpHandler:function(a){a=this.domNode;if(this.palette.selectedItem==this)this.palette.removeSelectionAll(),
this.palette.selectedItem.flat(this.palette.selectedItem.domNode),this.palette.selectedItem=null,this.palette.sunkenItem=null,this.palette.flattenAll(),this.palette._context.setActiveTool(null),n.curNode&&n.curNode==a&&n.curNode.blur&&n.curNode.blur();else{this.palette.selectedItem&&this.palette.selectedItem!=this&&(this.palette.removeSelectionAll(),this.flat(this.palette.selectedItem.domNode),this.palette.selectedItem=null);this.palette.selectedItem=this;this.sunken(a);u.getHelper(this.type,"tool").then(function(a){a=
new (a||c)(dojo.clone(this.data),this.userData);this.palette._context.setActiveTool(a)}.bind(this));var b=function(){this.palette._contextMouseUpHandler&&(this.disconnect(this.palette._contextMouseUpHandler),this.palette._contextMouseUpHandler=null);this.palette._docMouseUpHandler&&(dojo.disconnect(this.palette._docMouseUpHandler),this.palette._docMouseUpHandler=null);this.palette.removeSelectionAll();this.palette.selectedItem=null;this.flat(this.domNode);this.palette._context.dragMoveCleanup()}.bind(this);
this.palette._contextMouseUpHandler=this.connect(this.palette._context,"onMouseUp",function(a){b()}.bind(this));setTimeout(function(){this.palette._docMouseUpHandler=dojo.connect(document,"onmouseup",function(a){var c=!1;if(this.palette.selectedItem){var g=this.palette.selectedItem.domNode;for(a=a.target;a&&"BODY"!=a.tagName;){if(a==g){c=!0;break}a=a.parentNode}}this.palette.selectedItem&&!c&&(b(),this.palette._context.setActiveTool(null))}.bind(this))}.bind(this),0)}},itemKeyDownHandler:function(a){a.keyCode==
dojo.keys.ENTER&&(this.palette.selectedItem&&(this.flat(this.palette.selectedItem.domNode),this.palette.selectedItem=null),u.getHelper(this.type,"tool").then(function(a){a=new (a||c)(dojo.clone(this.data));var b=this.palette._context;b.setActiveTool(a);a.create({target:b.getSelection()[0],position:{x:50,y:50}});b.setActiveTool(null);b.getContainerNode().focus()}),u.getHelper(this.type,"helper"))},flat:function(a){a&&(dojo.removeClass(a,"dojoyPaletteItemRaised"),dojo.removeClass(a,"dojoyPaletteItemSunken"),
dojo.addClass(a,"dojoyPaletteItemFlat"))},raised:function(a){dojo.removeClass(a,"dojoyPaletteItemFlat");dojo.removeClass(a,"dojoyPaletteItemSunken");dojo.addClass(a,"dojoyPaletteItemRaised");this.palette.raisedItems.push(this)},sunken:function(a){dojo.removeClass(a,"dojoyPaletteItemFlat");dojo.removeClass(a,"dojoyPaletteItemRaised");dojo.addClass(a,"dojoyPaletteItemSunken");this.palette.sunkenItems.push(this);this._selectionShowing=!0;e(".paletteItemSelectionContainer",this.domNode)[0].innerHTML=
this.selectedWidgetTemplate;var d=e(".paletteItemSelectedMoreIcon",a)[0],h=this.palette.getPaletteItemsSameGroup(this);1<h.length?(d.style.display="inline-block",k(d,"mousedown, mouseup",function(a){f.stop(a)}),k(d,"click",function(a){f.stop(a);this._tooltipNode&&(dijit.hideTooltip(this._tooltipPos),this._tooltipPos=this._tooltipNode=null);if(this._moreShowing)this.paletteItemMoreCloseCleanup();else{a=b.create("div",{className:"paletteItemMoreContent"});var e=b.create("span",{className:"paletteItemMoreCloseBox"},
a);b.create("div",{className:"paletteItemAlternatesLabel",innerHTML:x.alternateWidgets},a);this._paletteItemMoreConnects.push(k(e,"mousedown, mouseup",function(a){f.stop(a)}.bind(this)));this._paletteItemMoreConnects.push(k(e,"click",function(a){f.stop(a);this.paletteItemMoreCloseCleanup()}.bind(this)));for(var e=b.create("div",{className:"paletteItemAlternatesContainer"},a),n=[],m=0;m<h.length;m++){var q=h[m],A=q._collectionName,q=b.create("button",{className:"paletteItemAlternate "+(q._paletteGroupSelected?
"paletteItemMoreSelected":"paletteItemMoreUnselected"),innerHTML:A},e);n.push(q);this._paletteItemMoreConnects.push(k(q,"mousedown, mouseup",function(a){f.stop(a)}.bind(this)));this._paletteItemMoreConnects.push(k(q,"click",function(a,b){f.stop(b);var g;for(b=0;b<h.length;b++){var d=h[b];if(d._collectionName==a){g=d;break}}if(g){for(b=0;b<h.length;b++)d=h[b],d==g?(d._paletteGroupSelected=!0,d.domNode.style.display=this.palette._displayShowValue):(d._paletteGroupSelected=!1,d.domNode.style.display=
"none");g.sunken(g.domNode);u.getHelper(g.type,"tool").then(function(a){a=new (a||c)(dojo.clone(this.data));this.palette._context.setActiveTool(a)}.bind(g))}this.paletteItemMoreCloseCleanup()}.bind(this,A)))}this._tooltipDialog=new TooltipDialog({className:"paletteItemMorePopup",style:"width: auto; ",content:a,onShow:function(a){if(a=this._tooltipDialog.domNode.parentNode){var c=parseFloat(a.style.top);isNaN(c)||(a.style.top=c+12+"px")}}.bind(this)});g.open({popup:this._tooltipDialog,around:d,orient:["above-centered"]});
this._moreShowing=!0;this.palette.moreItems.push(this)}}.bind(this))):d.style.display="none";var n=e(".paletteItemSelectedHelpIcon",a)[0];k(n,"mousedown, mouseup",function(a){f.stop(a)}.bind(this));k(n,"click",function(a){f.stop(a);this._tooltipNode&&(dijit.hideTooltip(this._tooltipPos),this._tooltipPos=this._tooltipNode=null);if(this._helpShowing)this.paletteItemHelpCloseCleanup();else{var c=u.getOamDescriptivePropertyForType(this.type,"title"),d=u.getOamDescriptivePropertyForType(this.type,"description");
a=b.create("div",{className:"helpInnerContent"});var e=b.create("div",{className:"paletteTooltipCurrent"},a);b.create("span",{className:"paletteTooltipCurrentWidget"},e).textContent=this.name;this._collectionName&&b.create("span",{className:"paletteTooltipCurrentLibrary",innerHTML:" ("+this._collectionName+")"},e);e={container:"helpInnerContentSummary",title:"helpInnerContentSummaryTitle",content:"helpInnerContentSummaryContent"};this._createHelpSection(c,a,x.summary,e);this._createHelpSection(d,
a,x.description,e);c=b.create("div",{className:"paletteItemHelpContent"});d=b.create("span",{className:"paletteItemHelpCloseBox"},c);b.create("div",{className:"paletteItemHelpDescription"},c).appendChild(a);this._paletteItemHelpConnects.push(k(d,"mousedown, mouseup",function(a){f.stop(a)}.bind(this)));this._paletteItemHelpConnects.push(k(d,"click",function(a){f.stop(a);this.paletteItemHelpCloseCleanup()}.bind(this)));this._tooltipDialog=new TooltipDialog({className:"paletteItemHelpPopup",style:"width: auto; ",
content:c,onShow:function(a){if(a=this._tooltipDialog.domNode.parentNode){var c=parseFloat(a.style.top);isNaN(c)||(a.style.top=c-12+"px")}}.bind(this)});g.open({popup:this._tooltipDialog,around:n,orient:["below-centered"]});this._helpShowing=!0;this.palette.helpItems.push(this)}}.bind(this))},_createHelpSection:function(a,c,g,d){a&&a.value&&(c=b.create("div",{className:d.container},c),b.create("div",{className:d.title,innerHTML:g},c),g=b.create("div",{className:d.content},c),"text/html"==a.type?g.innerHTML=
a.value:g.textContent=a.value)},paletteItemMoreCloseCleanup:function(){if(this._moreShowing){for(var a=0;a<this._paletteItemMoreConnects.length;a++)this._paletteItemMoreConnects[a].remove();this._paletteItemMoreConnects=[];this._moreShowing=!1;index=this.palette.moreItems.indexOf(this);0<=index&&this.palette.moreItems.splice(index,1)}this._tooltipDialog&&(g.close(this._tooltipDialog),this._tooltipDialog.destroyRecursive(),this._tooltipDialog=null)},paletteItemHelpCloseCleanup:function(){if(this._helpShowing){for(var a=
0;a<this._paletteItemHelpConnects.length;a++)this._paletteItemHelpConnects[a].remove();this._paletteItemHelpConnects=[];this._helpShowing=!1;index=this.palette.helpItems.indexOf(this);0<=index&&this.palette.helpItems.splice(index,1)}this._tooltipDialog&&(g.close(this._tooltipDialog),this._tooltipDialog.destroyRecursive(),this._tooltipDialog=null)},updateImgSrc:function(a){this.domNode.querySelector(".paletteItemImage").src=a}})})},"davinci/ve/tools/CreateTool":function(){define("dojo/_base/declare dojo/dom-style ../tools/_Tool davinci/Workbench davinci/workbench/Preferences ../metadata ../widget dojo/Deferred dojo/promise/all davinci/ve/States davinci/commands/CompoundCommand ../commands/AddCommand ../commands/MoveCommand ../commands/ResizeCommand ../commands/StyleCommand".split(" "),
function(p,k,f,e,b,d,n,a,m,h,g,c,q,A,u){return p("davinci.ve.tools.CreateTool",f,{constructor:function(a,c){this._data=a;this._userData=c;a&&a.type&&(c=d.queryDescriptor(a.type,"resizableOnCreate")||d.queryDescriptor(a.type,"resizable"),"none"!==c&&(this._resizable=c),this._dropCursor=d.queryDescriptor(a.type,"dropCursor"));this._requireHelpers(a)},activate:function(a){(this._context=a)&&a.rootNode&&(this._oldCursor=a.rootNode.style.cursor);a.rootNode.style.cursor="crosshair"},deactivate:function(){this._context&&
this._context.rootNode&&(this._context.rootNode.style.cursor=this._oldCursor);this._setTarget(null);delete this._mdPosition;this._context.dragMoveCleanup()},_getContentPosition:function(a){if(a)return a.target&&(a={x:a.pageX,y:a.pageY}),a},onMouseDown:function(a){this._target=n.getEnclosingWidget(a.target);this._mdPosition=this._getContentPosition(a);this._dragRect=null},onMouseMove:function(a){var c=this._context,g=c._chooseParent;a.target!=this._lastEventTarget&&g.setProposedParentWidget(null);
this._lastEventTarget=a.target;if(this._mdPosition){if(this._resizable){c.deselect();var d=this._getContentPosition(a),h,f,n=!0,m=!0;d.x>=this._mdPosition.x?(g=this._mdPosition.x,f=d.x-this._mdPosition.x):(g=d.x,f=this._mdPosition.x-d.x,n=!1);d.y>=this._mdPosition.y?(h=this._mdPosition.y,d=d.y-this._mdPosition.y):(h=d.y,d=this._mdPosition.y-d.y,m=!1);a.shiftKey&&(f>=d?(d=f,m||(h=this._mdPosition.y-d)):(f=d,n||(g=this._mdPosition.x-f)));this._dragSizeRect||(a=c.getDocument().body,this._dragSizeRect=
dojo.create("div",{style:"border:1px dashed black;z-index:1000001;position:absolute;"},a));a=this._dragSizeRect.style;a.left=g+"px";a.top=h+"px";a.width=f+"px";a.height=d+"px"}}else g=!this.createWithFlowLayout(),this._setTarget(a.target,a),h=c.getPreference("showPossibleParents"),h=!h&&this._spaceKeyDown||h&&!this._spaceKeyDown,f={x:a.pageX,y:a.pageY},d={l:a.pageX,t:a.pageY,w:0,h:0},n=b.getPreferences("davinci.ve.editorPrefs",e.getProject()).snap&&g,m=!g,"object"==typeof this._dropCursor&&!1===this._dropCursor.show&&
(m=!1),c.dragMoveUpdate({data:this._data,position:f,absolute:g,currentParent:null,eventTarget:a.target,rect:d,doSnapLinesX:n,doSnapLinesY:n,doFindParentsXY:h,doCursor:m,beforeAfter:this._dropCursor&&this._dropCursor.beforeAfter})},onMouseUp:function(a){var c=this._context,b=c._chooseParent,g=!this.createWithFlowLayout();this._dragSizeRect&&(this._dragSizeRect.parentNode.removeChild(this._dragSizeRect),this._dragSizeRect=null);var h=c.getActiveDragDiv();h&&(h=dojo.query(".maqCandidateParents",h),1==
h.length&&(h[0].innerHTML=""));this._lastEventTarget=null;var f,m,q,k,h=this._getContentPosition(a);if(this._mdPosition){var u=!0,A=!0;this._position=dojo.mixin({},this._mdPosition);h.x<this._mdPosition.x&&(this._position.x=h.x);"height"==this._resizable?q=0:0<=h.x-this._mdPosition.x?q=h.x-this._mdPosition.x:(q=this._mdPosition.x-h.x,u=!1);h.y<this._mdPosition.y&&(this._position.y=h.y);"width"==this._resizable?k=0:0<=h.y-this._mdPosition.y?k=h.y-this._mdPosition.y:(k=this._mdPosition.y-h.y,A=!1);
a.shiftKey&&(q>=k?(k=q,A||(t=this._mdPosition.y-k)):(q=k,u||(l=this._mdPosition.x-q)))}else this._position=h;this._resizable&&this._position&&(4<q||4<k)&&(f={w:0<q?q:void 0,h:0<k?k:void 0});if(q=b.getProposedParentWidget()){if(m=q.parent,q.refChild){var x=q.parent.getChildren().indexOf(q.refChild);0<=x?q.refAfter&&x++:x=null}}else{a=this._getTarget()||n.getEnclosingWidget(a.target);var p=this._data;q=b.getAllowedTargetWidget(a,p,!0,{absolute:g});var J=dojo.isArray(p)?p[0].type:p.type,K=n.getWidgetHelper(J);
1<q.length&&K&&K.chooseParent?m=K.chooseParent(q):0<q.length&&(m=0<=q.indexOf(a)?a:q[0])}b.setProposedParentWidget(null);b=function(a){this.prototype=Error.prototype;this.name="InvalidTargetWidgetError";this.message=a?a:"The selected target is not a valid parent for the given widget."};try{p=this._data instanceof Array?this._data:[this._data];if(!m){var I=p.map(function(a){return a.type}).join(", "),H=p.map(function(a){var c=d.getAllowedParent(a.type);a=a.type;var b=d.queryDescriptor(a,"class");a=
b?b.split(/\s+/).push(a):[a];return{allowedParent:c,classList:a}});f="The selected target is not a valid parent for the given widget.";1===H.length&&H[0].allowedParent&&(f+=['The widget \x3cspan style\x3d"font-family: monospace"\x3e',I,"\x3c/span\x3e requires ",1<H[0].allowedParent.length?"one of the following parent types":"the parent type",' \x3cspan style\x3d"font-family: monospace"\x3e',H[0].allowedParent.join(", "),"\x3c/span\x3e."].join(""),J=p[0].type,(K=n.getWidgetHelper(J))&&K.isAllowedError&&
(f=K.isAllowedError({errorMsg:f,type:J,allowedParent:H[0].allowedParent,absolute:g})));throw new b(f);}for(g=0;g<p.length;g++){var L=p[g].type,O=d.getLibraryForType(L),P=O.name,J=[L,c];c._widgets.hasOwnProperty(P)||(c._widgets[P]=0);1==++c._widgets[P]&&d.invokeCallback(O,"onFirstAdd",J);d.invokeCallback(O,"onAdd",J)}this.create({target:m,index:x,directTarget:this._getTarget(),size:f,userData:this._userData})}catch(R){var Q,M;R instanceof b?(Q=R.message,M="Invalid Target"):(Q="The action was interrupted by an internal error.",
M="Error",console.error(R));e.showMessage(M,Q)}finally{this.exitCreateToolOnMouseUp()&&c.setActiveTool(null),this._cleanupActions()}},_cleanupActions:function(){var a=this._context;a.dragMoveCleanup();a.inlineEditActive()||this._context.getDocument().defaultView.focus()},onKeyDown:function(a){dojo.stopEvent(a);var c=this._context;if(a.keyCode==dojo.keys.ESCAPE)c.setActiveTool(null),this._cleanupActions();else{var b=this._context.getPreference("showPossibleParents");a.keyCode==dojo.keys.SPACE?this._spaceKeyDown=
!0:this._processKeyDown(a.keyCode);a=!b&&this._spaceKeyDown||b&&!this._spaceKeyDown;var b=this._data,b=dojo.isArray(b)?b[0].type:b.type,c=c._chooseParent,g=!this.createWithFlowLayout(),d=!g;"object"==typeof this._dropCursor&&!1===this._dropCursor.show&&(d=!1);c.dragUpdateCandidateParents({widgetType:b,showCandidateParents:a,absolute:g,doCursor:d,beforeAfter:this._dropCursor&&this._dropCursor.beforeAfter,currentParent:null})}},_processKeyDown:function(a){if(49<=a&&57>=a){var c=this._context._chooseParent,
b=c.getProposedParentsList();b&&1<b.length&&(a=b.length-(a-48),0<=a&&c.setProposedParentWidget(b[a]))}},onKeyUp:function(a){a.keyCode==dojo.keys.SPACE&&(this._spaceKeyDown=!1);dojo.stopEvent(a);a=this._context.getPreference("showPossibleParents");a=!a&&this._spaceKeyDown||a&&!this._spaceKeyDown;var c=this._data,c=dojo.isArray(c)?c[0].type:c.type,b=this._context._chooseParent,g=!this.createWithFlowLayout(),d=!g;"object"==typeof this._dropCursor&&!1===this._dropCursor.show&&(d=!1);b.dragUpdateCandidateParents({widgetType:c,
showCandidateParents:a,absolute:g,doCursor:d,beforeAfter:this._dropCursor&&this._dropCursor.beforeAfter,currentParent:null})},_requireHelpers:function(a){var c=[];if(!a||!a.type)return a instanceof Array&&a.forEach(function(a){c.concat(this._requireHelpers(a))},this),c;c.push(n.requireWidgetHelper(a.type));a.children&&!dojo.isString(a.children)&&dojo.every(a.children,function(a){return c.concat(this._requireHelpers(a))},this);return c},create:function(a){if(a&&this._data){for(var c=a.target,b,g;c&&
!(b=c.getContainerNode());)g=c,c=c.getParent();var d=a.index,e;b=!1;this._data.properties&&this._data.properties.style&&0<this._data.properties.style.indexOf("absolute")&&(b=!0);!b&&this.createWithFlowLayout()?g&&(d=c.indexOf(g)):a.position?e=a.position:this._position&&(e=this._position);this._data.context=this._context;m(this._requireHelpers(this._data)).then(function(){this._create({parent:c,index:d,position:e,size:a.size,userData:this._userData})}.bind(this))}},_create:function(b){var d=this._context,
e=[],h=new a;if(!this._loadType(this._data,e))return h.reject(),h;m(e).then(function(){var a;this.createNewWidget()?dojo.withDoc(this._context.getDocument(),function(){a=n.createWidget(this._data,this._userData,b.parent)},this):a=this._widget;a||h.reject(Error("Failed to create widget"));var e=new g;if(this.createNewWidget()){b.size=this._getInitialSize(a,b);e.add(new c(a,b.parent||this._context.getContainerNode(),b.index));var f=!0;a&&a.properties&&1==a.properties.ignorePosition&&(f=!1);a&&a.metadata&&
1==a.metadata.ignorePosition&&(f=!1);b.position&&f&&(f=d.getPreference("absoluteWidgetsZindex"),"xblox/RunScript"!==a.type&&"xblox/CSSState"!==a.type&&(e.add(new u(a,[{position:"absolute"},{"z-index":f}])),e.add(new q(a,b.position.x,b.position.y))));if(b.size){var m=b.size.w,k=b.size.h;if(null!==m&&null!==k&&(e.add(new A(a,m,k)),(f=n.getWidgetHelper(a.type))&&f.onCreateResize))f.onCreateResize(e,a,m,k)}this.checkAddToCurrentState(e,a)}f=a.id;this.addToCommandStack&&this.addToCommandStack(e,{widget:a});
e.isEmpty()||this._context.getCommandStack().execute(e);a.isLayoutContainer&&a.resize();a=n.byId(f);f=n.getWidgetHelper(a.type);e=null;f&&f.onAdded&&(e=f.onAdded(b.parent,a));this._select(e||a);this._widget=a;h.resolve(a);this.mouseUpProcessingCompleted()}.bind(this));return h},_loadType:function(a,c){if(!a||!a.type)return!1;c.push(this._context.loadRequires(a.type,!0));a.children&&!dojo.isString(a.children)&&dojo.forEach(a.children,function(a){this._loadType(a,c)}.bind(this));return!0},_getInitialSize:function(a,
c){var b=c.size,g=a.getHelper();g&&g.initialSize&&(g=g.initialSize(c))&&(b=g);!b&&(a=d.queryDescriptor(a.type,"initialSize"))&&(c&&!c.position?(c=c.parent,"html.body"==c.type?b="auto"==a||"auto"==a.flow?{w:"100%",h:"auto"}:this._getExplicitFlowSizeFromMetadata(a):this._isTypeContainer(c.type)?"auto"==a||"auto"==a.flow?(c=c.getData().children,b={w:"100%",h:c&&c.length?"auto":"100%"}):b=this._getExplicitFlowSizeFromMetadata(a):b=this._getExplicitFlowSizeFromMetadata(a)):b="auto"==a||"auto"==a.absolute?
{w:"300px",h:"300px"}:this._getExplicitAbsoluteSizeFromMetadata(a));return b},_getExplicitFlowSizeFromMetadata:function(a){var c=null;return c=a.flow?{w:a.flow.width?a.flow.width:"100%",h:a.flow.height?a.flow.height:"auto"}:{w:a.width?a.width:"100%",h:a.height?a.height:"auto"}},_getExplicitAbsoluteSizeFromMetadata:function(a){var c=null;return c=a.absolute?{w:a.absolute.width?a.absolute.width:"300px",h:a.absolute.height?a.absolute.height:"300px"}:{w:a.width?a.width:"300px",h:a.height?a.height:"300px"}},
_isTypeContainer:function(a){return a&&("dijit/layout/ContentPane"==a||"html.div"==a||"html.form"==a||"html.fieldset"==a)},_select:function(a){if(a)if(a.type){var c=d.getSmartInput(a.type);c&&c.then?c.then(function(c){!this._data.fileDragCreate&&c&&c.displayOnCreate?(a.inLineEdit_displayOnCreate=c.displayOnCreate,this._context.select(a,null,!0)):this._context.select(a)}.bind(this)):(console.error("create tool failed::_select smart input is null"),this._context.select(a))}else console.error("create tool failed::_select w.type is null");
else console.error("create tool failed::_select w is null")},createWithFlowLayout:function(){return d.queryDescriptor(this._data.type,"forceAbsolute")?!1:this._context.getFlowLayout()},createNewWidget:function(){return!0},exitCreateToolOnMouseUp:function(){return!0},mouseUpProcessingCompleted:function(){},checkAddToCurrentState:function(a,c){var g=h.getFocus(c._edit_context.rootNode);if(g&&g.stateContainerNode){var g=h.getState(g.stateContainerNode),d=b.getPreferences("davinci.ve.editorPrefs",e.getProject());
g&&d.newWidgetsCurrentState&&(d=k.get(c.domNode,"display"),a.add(new u(c,[{display:"none"}])),a.add(new u(c,[{display:d}],g)))}}})})},"davinci/ve/tools/_Tool":function(){define(["dojo/_base/declare","davinci/ve/widget","davinci/ve/metadata","davinci/ve/utils/GeomUtils"],function(p,k,f,e){return p("davinci.ve.tools._Tool",null,{_getTarget:function(){return this._target},_setTarget:function(b,d){this._targetOverlays||(this._targetOverlays=[]);if(!this._matchesTargetOverlay(b)){for(var e=this._context.getContainerNode(),
a;b&&b!=e;)if((a=k.getEnclosingWidget(b))&&!a.getContext())b=a.domNode.parentNode,a=null;else{a&&davinci.ve.metadata.queryDescriptor(a.type,"enablePointerEvents")?a=null:a&&a.getContainerNode()&&(davinci.ve.metadata.queryDescriptor(a.type,"isControl")||(a=null));break}a?(this._target=a,this._updateTargetOverlays(d),this._insertTargetOverlays()):(this._removeTargetOverlays(),this._target=null)}},_updateTargetOverlays:function(b){this._removeTargetOverlays();if(this._target){var d=this._target.domNode,
f=this._getMaxZIndex(d);if(this._targetOverlays){var a=this._target.getHelper();if(a&&a.getTargetOverlays&&(a=a.getTargetOverlays(this._target))&&0<a.length){dojo.forEach(a,function(a){a=this._getNewTargetOverlay(a,a.x,a.y,a.width,a.height,f);this._targetOverlays.push(a)},this);return}var a=d.offsetLeft,m=d.offsetTop,h=d.offsetWidth,g=d.offsetHeight;if(b){var c,q=e.getBorderBoxPageCoordsCached(d);b.pageX<q.l&&(c=q.l-b.pageX,a-=c,h+=c);b.pageY<q.t&&(c=q.t-b.pageY,m-=c,g+=c);b.pageX>q.l+q.w&&(c=b.pageX-
(q.l+q.w),h+=c);b.pageY>q.t+q.h&&(c=b.pageY-(q.t+q.h),g+=c)}b=this._getNewTargetOverlay(d,a,m,h,g,f);this._targetOverlays.push(b)}}},_getMaxZIndex:function(b){var d=dojo.style(b,"zIndex");dojo.query("*",b).forEach(function(b){b=dojo.style(b,"zIndex");var a=Number(b),e=Number(d);isNaN(a)||(isNaN(e)?d=b:a>e&&(d=b))});return d},_getNewTargetOverlay:function(b,d,e,a,f,h){return this._context.getDojo().create("div",{className:"editFeedback",style:{position:"absolute",opacity:.1,left:d+"px",top:e+"px",
width:a+"px",height:f+"px",zIndex:h}})},_insertTargetOverlays:function(){if(this._targetOverlays&&this._target){var b=this._target.domNode,d=b.parentNode;dojo.forEach(this._targetOverlays,function(e){d.insertBefore(e,b.nextSibling)},this)}},_removeTargetOverlays:function(){if(this._targetOverlays&&this._target)for(var b=this._targetOverlays.length-1;0<=b;b--)dojo.destroy(this._targetOverlays[b]),this._targetOverlays.pop()},_matchesTargetOverlay:function(b){return dojo.some(this._targetOverlays,function(d){return b==
d},this)}})})},"davinci/commands/CompoundCommand":function(){define(["dojo/_base/declare"],function(p){return p("davinci.commands.CompoundCommand",null,{name:"compound",_commands:[],constructor:function(k){this._commands=[];k&&(this._commands=[k])},add:function(k){if(k)if(this._commands)if("compound"==k.name)dojo.forEach(k._commands,function(b){this.add(b)},this);else{if("modify"==k.name)for(var f=k._oldId,e=0;e<this._commands.length;e++){var b=this._commands[e];if("modify"==b.name&&b._oldId==f){b.add(k);
return}}this._commands.push(k)}else this._commands="compound"==k.name?k._commands:[k]},setContext:function(k){for(var f=0;f<this._commands.length;f++)this._commands[f].setContext&&this._commands[f].setContext(k)},isEmpty:function(){return!this._commands||0===this._commands.length},execute:function(){if(this._commands)for(var k=0;k<this._commands.length;k++)this._commands[k].execute(),this._commands[k]._oldId&&this._commands[k]._newId&&(this._oldId=this._commands[k]._oldId,this._newId=this._commands[k]._newId)},
undo:function(){if(this._commands)for(var k=this._commands.length-1;0<=k;k--)this._commands[k].undo()}})})},"davinci/ve/commands/AddCommand":function(){define("dojo/_base/declare davinci/ve/commands/_hierarchyCommand davinci/ve/widget davinci/ve/utils/ImageUtils davinci/ve/States davinci/ve/commands/ModifyCommand".split(" "),function(p,k,f,e,b,d){return p("davinci.ve.commands.AddCommand",[k],{name:"add",constructor:function(b,a,d){b&&(b.domNode?this._id=b.id:this._data=b);this._parentId=a.id;this._index=
d},execute:function(){var n=f.byId(this._parentId);if(n){var a=n.getContext(),m=void 0;this._data?(this._id&&this._data.properties&&(this._data.properties.id=this._id),m=f.createWidget(this._data),this._id=m.id):this._id&&(m=f.byId(this._id,a));if(m){this._data=m.getData();this._data.properties.id=this._id;this._data.context=a;if(this._index&&"number"!=typeof this._index)if(this._index.domNode)this._index=n.indexOf(this._index);else{var h=f.byId(this._index.id,a);this._index=n.indexOf(h)}"IMG"===
m.domNode.tagName&&e.ImageUpdateFocus(m,a);n.addChild(m,this._index);a&&(a.attach(m),m.startup(),m.renderWidget(),a.widgetAddedOrDeleted(),a.widgetChanged(a.WIDGET_ADDED,m));(a=this._isRefreshOnDescendantChange(m))&&(new d(a,null,null,n._edit_context)).execute();b.resetState(m.domNode)}}},undo:function(){if(this._id&&this._parentId){var e=f.byId(this._id);if(e){var a=f.byId(this._parentId);if(a){var m=this._isRefreshOnDescendantChange(e),h=e.getContext();h&&(h.detach(e),h.deselect(e));a.removeChild(e);
h.widgetChanged(h.WIDGET_REMOVED,e);e.destroyWidget();h&&h.widgetAddedOrDeleted();m&&(new d(m,null,null,a._edit_context)).execute();b.resetState(e.domNode)}}}}})})},"davinci/ve/commands/_hierarchyCommand":function(){define(["dojo/_base/declare"],function(p){return p("davinci.ve.commands._hierarchyCommand",null,{_isRefreshOnDescendantChange:function(k){for(var f;k&&k.domNode&&"BODY"!=k.domNode.tagName;)(k=k.getParent())&&davinci.ve.metadata.queryDescriptor(k.type,"refreshOnDescendantChange")&&(f=k);
return f}})})},"davinci/ve/utils/ImageUtils":function(){define([],function(){return{ImageUpdateFocus:function(p,k){if(k&&p&&p.domNode&&"IMG"===p.domNode.tagName)var f=dojo.connect(p.domNode,"onload",function(){for(var e=k.getSelection(),b=0;b<e.length;b++)if(e[b]==p){k.updateFocus(p,b);break}dojo.disconnect(f)})}}})},"davinci/ve/commands/ModifyCommand":function(){define(["dojo/_base/declare","davinci/ve/commands/_hierarchyCommand","../widget","../utils/ImageUtils","../States"],function(p,k,f,e,b){return p("davinci.ve.commands.ModifyCommand",
[k],{name:"modify",constructor:function(b,e,a,f,h){this._oldId=b?b.id:void 0;this._properties=e=e||{};this._children=a||"string"==typeof a?a:e._children;this._context=f||b.getContext();this._scripts=h;delete this._properties._children},setContext:function(b){this._context=b},add:function(b){b&&b._oldId==this._oldId&&(b._properties&&dojo.mixin(this._properties,b._properties),b._children&&(this._children=b._children))},execute:function(){if(this._oldId&&this._properties){var d=f.byId(this._oldId),n=
this._context;if(d){this._oldData=d.getData();this._oldData.context=n;this._newData={type:this._oldData.type,properties:dojo.mixin({},this._oldData.properties,this._properties),children:this._children||"string"==typeof this._children?this._children:this._oldData.children,scripts:dojo.mixin({},this._oldData.scripts,this._scripts),maqAppStates:this._oldData.maqAppStates,maqDeltas:this._oldData.maqDeltas,context:n};for(var a in this._newData.properties)"$MAQ_MODIFYCOMMAND_DELETE_PROPERTY$"===this._newData.properties[a]&&
delete this._newData.properties[a];if(this._doRefreshFromSource(d))d.setProperties(this._newData.properties,!0),setTimeout(function(){n.visualEditor.refresh()},0);else{n&&n.detach(d);this._oldData.properties.isTempID&&!this._properties.id||delete this._newData.properties.isTempID;a=d.getParent();var m=null,h=a.indexOf(d);a.removeChild(d);d.destroyWidget();if(m=f.createWidget(this._newData)){"IMG"===m.domNode.tagName&&e.ImageUpdateFocus(m,n);a.addChild(m,h);this._newId=m.id;n&&(n.attach(m),m.startup(),
m.renderWidget(),n.widgetAddedOrDeleted(),this._oldId!=this._newId&&n.widgetChanged(n.WIDGET_ID_CHANGED,m,this._oldId),n.widgetChanged(n.WIDGET_MODIFIED,m));this.newWidget=m;dojo.publish("/davinci/ui/widget/replaced",[m,d]);b.resetState(m.domNode);var g;if(d=this._isRefreshParentOnPropChange(m))if("string"==typeof d)for(g=a;g&&g.domNode&&g.type!=d&&"BODY"!=g.domNode.tagName;){if(!g.domNode||"BODY"==g.domNode.tagName){g=null;break}g=g.getParent()}else g=a;(d=this._isRefreshOnDescendantChange(m))&&
(g=d);g&&(new davinci.ve.commands.ModifyCommand(g,null,null,a._edit_context)).execute();dojo.publish("/davinci/ui/widgetPropertiesChanged",[[m]])}}}}},_doRefreshFromSource:function(b){var d=this._properties,a,e,h=!1;for(a in d)if(d.hasOwnProperty(a)&&(e=b.metadata.property[a])&&e.refreshFromSource){h=!0;break}return h},_isRefreshParentOnPropChange:function(b){return davinci.ve.metadata.queryDescriptor(b.type,"refreshParentOnPropChange")},undo:function(){if(this._newId&&this._oldData){var d=f.byId(this._newId);
if(d){var e=d.getParent();if(e){var a=e.indexOf(d);if(!(0>a)){var m=e.getContext();m&&m.detach(d);e.removeChild(d);d.destroyWidget();if(newWidget=f.createWidget(this._oldData)){this._oldData=newWidget.getData();this._oldData.context=this._context;e.addChild(newWidget,a);m&&(m.attach(newWidget),newWidget.startup(),newWidget.renderWidget(),m.widgetAddedOrDeleted(),m.widgetChanged(m.WIDGET_MODIFIED,newWidget));dojo.publish("/davinci/ui/widget/replaced",[newWidget,d]);b.resetState(newWidget.domNode);
var h;if(this._isRefreshParentOnPropChange(d))if("string"==typeof refreshParent)for(h=e;h&&h.domNode&&h.type!=refreshParent&&"BODY"!=h.domNode.tagName;){if(!h.domNode||"BODY"==h.domNode.tagName){h=null;break}h=h.getParent()}else h=e;(d=this._isRefreshOnDescendantChange(newWidget))&&(h=d);h&&(new davinci.ve.commands.ModifyCommand(h,null,null,e._edit_context)).execute();dojo.publish("/davinci/ui/widgetPropertiesChanged",[[newWidget]])}}}}}}})})},"davinci/ve/commands/MoveCommand":function(){define("dojo/_base/declare dojo/dom-geometry davinci/ve/widget davinci/ve/States davinci/ve/utils/StyleArray davinci/ve/utils/GeomUtils".split(" "),
function(p,k,f,e,b,d){return p("davinci.ve.commands.MoveCommand",null,{name:"move",constructor:function(b,a,d,e,g,c,f){this._id=b?b.id:void 0;this._context=b.getContext();this._newBox={l:a,t:d};this._commandForXYDeltas=e;this._oldBox=g;this._applyToStateIndex=c&&"Normal"!=c&&"undefined"!=c?c:"undefined";this._disableSnapping=f},execute:function(){if(this._id){var n=f.byId(this._id);if(n&&n.domNode){var a=this._context;if(!this._oldBox){var m=n.getMarginBox();this._oldBox={l:m.l,t:m.t,w:m.w,h:m.h}}if(!n.domNode.offsetParent)console.error("maeh");
else if(dojo.position(n.domNode.offsetParent,!0)){this._commandForXYDeltas?(this._newBox.l=this._oldBox.l+this._commandForXYDeltas._deltaX,this._newBox.t=this._oldBox.t+this._commandForXYDeltas._deltaY):(!this._disableSnapping&&a&&a._snapX&&(m=this._oldBox.w,"left"==a._snapX.typeRefObj?this._newBox.l=a._snapX.x:m&&"right"==a._snapX.typeRefObj?this._newBox.l=a._snapX.x-m:m&&"center"==a._snapX.typeRefObj&&(this._newBox.l=a._snapX.x-m/2)),!this._disableSnapping&&a&&a._snapY&&(m=this._oldBox.h,"top"==
a._snapY.typeRefObj?this._newBox.t=a._snapY.y:m&&"bottom"==a._snapY.typeRefObj?this._newBox.t=a._snapY.y-m:m&&"middle"==a._snapY.typeRefObj&&(this._newBox.t=a._snapY.y-m/2)));this._deltaX=this._newBox.l-this._oldBox.l;this._deltaY=this._newBox.t-this._oldBox.t;var m=d.getBorderBoxPageCoords(n.domNode.offsetParent),h=k.getBorderExtents(n.domNode.offsetParent),g=this._newBox.l-m.l-h.l,c=this._newBox.t-m.t-h.t;a.getScrollOffset();g=[{left:g+"px"},{top:c+"px"}];a=n.getStyleValuesAllStates();this._oldStyleValuesAllStates=
dojo.clone(a);this._oldBox&&(this._oldStyleValuesAllStates[this._applyToStateIndex]=b.mergeStyleArrays(this._oldStyleValuesAllStates[this._applyToStateIndex],[{left:this._oldBox.l-m.l-h.l+"px"},{top:this._oldBox.t-m.t-h.t+"px"}]));a[this._applyToStateIndex]=a[this._applyToStateIndex]?b.mergeStyleArrays(a[this._applyToStateIndex],g):g;n.setStyleValuesAllStates(a);m=e.getStatesListCurrent(n.domNode);h=b.mergeStyleArrays([],a.undefined);for(g=0;g<m.length;g++)a[m[g]]&&(h=b.mergeStyleArrays(h,a[m[g]]));
n.setStyleValuesCanvas(h);n.setStyleValuesModel(a.undefined);n.refresh();e.resetState(n.domNode);dojo.publish("/davinci/ui/widgetPropertiesChanged",[[n]])}}else console.error("no widget")}},undo:function(){if(this._id){var d=f.byId(this._id);if(d){var a=this._oldStyleValuesAllStates,e=this._applyToStateIndex;d.setStyleValuesAllStates(a);a=b.mergeStyleArrays(a.undefined,a[e]);d.setStyleValuesCanvas(a);d.setStyleValuesModel(this._oldStyleValuesAllStates.undefined);d.refresh();davinci.ve.states.resetState(d.domNode);
dojo.publish("/davinci/ui/widgetPropertiesChanged",[[d]])}}}})})},"davinci/ve/commands/ResizeCommand":function(){define(["dojo/_base/declare","dojo/dom-geometry","davinci/ve/widget","davinci/ve/States","davinci/ve/utils/StyleArray"],function(p,k,f,e,b){return p("davinci.ve.commands.ResizeCommand",null,{name:"resize",constructor:function(b,e,a,f){this._id=b?b.id:void 0;b=/^\s*[-+]?[0-9]*\.?[0-9]+\s*$/;b.test(e)&&(e=parseFloat(e));b.test(a)&&(a=parseFloat(a));this._newBox={w:e,h:a};this._applyToStateIndex=
f&&"Normal"!=f&&"undefined"!=f?f:"undefined"},execute:function(){if(this._id&&this._newBox){var d=f.byId(this._id);if(d&&d.domNode){var n=d.domNode,a=n.ownerDocument.defaultView.getComputedStyle(n),m=k.getContentBox(n,a);this._oldBox={w:m.w,h:m.h};var m=this._newBox.w,h=this._newBox.h;this._usesBorderBox(n)&&(n=k.getPadBorderExtents(n,a),"number"==typeof m&&0<=m&&(m+=n.w),"number"==typeof h&&0<=h&&(h+=n.h));n=[{}];"number"==typeof m?n[0].width=m+"px":"string"==typeof m&&(n[0].width=m);"number"==typeof h?
n[0].height=h+"px":"string"==typeof h&&(n[0].height=h);m=d.getStyleValuesAllStates();this._oldStyleValuesAllStates=dojo.clone(m);this._oldBox&&(this._oldStyleValuesAllStates[this._applyToStateIndex]=b.mergeStyleArrays(this._oldStyleValuesAllStates[this._applyToStateIndex],[{width:this._oldBox.w+"px"},{height:this._oldBox.h+"px"}]));m[this._applyToStateIndex]=m[this._applyToStateIndex]?b.mergeStyleArrays(m[this._applyToStateIndex],n):n;d.setStyleValuesAllStates(m);h=e.getStatesListCurrent(d.domNode);
n=b.mergeStyleArrays([],m.undefined);for(a=0;a<h.length;a++)m[h[a]]&&(n=b.mergeStyleArrays(n,m[h[a]]));d.setStyleValuesCanvas(n);d.setStyleValuesModel(m.undefined);this._resize(d);e.resetState(d.domNode);dojo.publish("/davinci/ui/widgetPropertiesChanged",[[d]])}}},setContext:function(b){this._context=b},undo:function(){if(this._id){var d=f.byId(this._id);if(d){var n=this._oldStyleValuesAllStates,a=this._applyToStateIndex;d.setStyleValuesAllStates(n);n=b.mergeStyleArrays(n.undefined,n[a]);d.setStyleValuesCanvas(n);
d.setStyleValuesModel(this._oldStyleValuesAllStates.undefined);this._resize(d);e.resetState(d.domNode);dojo.publish("/davinci/ui/widgetPropertiesChanged",[[d]])}}},_usesBorderBox:function(b){var d=b.tagName.toLowerCase();(b=b.getAttribute("type"))&&(b=b.toLowerCase(b));return"table"==d||"button"==d||"input"==d&&"button"==b},_resize:function(b){var d=b.getParent();d&&d.dijitWidget&&d.dijitWidget.isLayoutContainer?d.resize():b.resize&&b.resize();b.renderWidget();b._updateSrcStyle()}})})},"davinci/ui/dnd/DragManager":function(){define(["dojo/_base/declare",
"dojo/_base/array","dojo/_base/connect","dojo/mouse"],function(p,k,f){p=p("",null,{disabled:!1,currentDragSource:null,currentDropTarget:null,dropAcceptable:!1,dropTargets:null,dragTriggered:!1,currentDomElement:null,_connectors:null,_moveConnector:null,document:null,documentX:0,documentY:0,_ABSOLUTE_THRESHOLD:3,_STATIC_THRESHOLD:40,constructor:function(){this.dropTargets=[];this._connectors=[f.connect(dojo.doc,"onkeydown",this,"onKeyDown"),f.connect(dojo.doc,"onmouseover",this,"onMouseOver"),f.connect(dojo.doc,
"onmouseout",this,"onMouseOut"),f.connect(dojo.doc,"onmousedown",this,"onMouseDown"),f.connect(dojo.doc,"onmouseup",this,"onMouseUp")]},destroy:function(){k.forEach(this._connectors,dojo.disconnect)},onKeyDown:function(b){27==b.keyCode&&this.currentDragSource&&(this.dropAcceptable=!1,this.onMouseUp(b))},onMouseDown:function(b,d){if(!(this.disabled||this.dragTriggered||!dojo.mouseButtons.isLeft(b)||b.metaKey||b.ctrlKey||this.dragTriggered)&&(d=this.currentDragSource=d||this.findDragSource(b))){d.onDragDown(b);
d=0;for(var e=this.dropTargets.length;d<e;d++){var a=this.dropTargets[d];if(!a.disabled)a.onDragDown(b)}b.preventDefault();this._moveConnectors=[f.connect(dojo.doc,"onmousemove",this,"onMouseMove")];this.document&&this.document!=dojo.doc&&(this._moveConnectors.push(f.connect(this.document,"onmousemove",this,"onMouseMove")),this._moveConnectors.push(f.connect(this.document,"onmouseover",this,"onMouseOver")),this._moveConnectors.push(f.connect(this.document,"onmouseout",this,"onMouseOut")),this._moveConnectors.push(f.connect(this.document,
"onmouseup",this,"onMouseUp")))}},onMouseMove:function(b){b.preventDefault();dojo.isIE&&(b.pageX-=2,b.pageY-=2);if(b.target==this.document||b.target.ownerDocument==this.document)b.documentX=this.documentX,b.documentY=this.documentY,b.documentX-=this.document.documentElement.scrollLeft,b.documentY-=this.document.documentElement.scrollTop;var d=b.dragSource=this.currentDragSource;if(!this.dragTriggered){var e=b.pageX-d.pageX,a=b.pageY-d.pageY,e=Math.sqrt(e*e+a*a);if("absolute"==d.positioning){if(e<
this._ABSOLUTE_THRESHOLD)return}else if(e<this._STATIC_THRESHOLD)return;this.dragTriggered=!0;d.onDragStart(b);e=0;for(a=this.dropTargets.length;e<a;e++){var f=this.dropTargets[e];f.disabled||(b.dropTarget=f,f.onDragStart(b))}this.onMouseOver(b)}d.onDragMove(b);(f=this.currentDropTarget)?this.dropAcceptable&&(b.dropTarget=f,f.onDragMove(b,this.dragObjects)):this.dropAcceptable=!1},onMouseOver:function(b){this.currentDomElement=b.target;if(this.dragTriggered){var d=this.currentDragSource;if(d){b.dragSource=
d;var e=this.findDropTarget(this.currentDomElement,d);e&&d.domNode==e.domNode||(e!=this.currentDropTarget&&(this.currentDropTarget&&(b.dropTarget=this.currentDropTarget,this.currentDropTarget.onDragOut(b)),e&&(b.dropTarget=e,this.dropAcceptable=e.onDragOver(b))),this.currentDropTarget=e)}}},onMouseOut:function(b){},onMouseUp:function(b){if(!this.ignoreMouseUp){k.forEach(this._moveConnectors,dojo.disconnect);if(this.dragTriggered){for(var d=0,e=this.dropTargets.length;d<e;d++){var a=this.dropTargets[d];
a.disabled||(b.dropTarget=a,a.onDragEnd(b))}d=this.currentDragSource;e=this.currentDropTarget;b.dragSource=d;b.dropTarget=e;if(d&&(e?(e.onDropStart(b),this.dropAcceptable?(a=e.onDrop(b),e.onDragOut(b),void 0==a||b.dragStatus||(b.dragStatus=a?"dropSuccess":"dropFailure")):(e.onDragOut(b),b.dragStatus="dropFailure")):b.dragStatus="dropFailure",d.onDragEnd(b),e))e.onDropEnd(b)}this._resetStatus()}},_resetStatus:function(){this.currentDragSource=this.currentDropTarget=null;this.dragTriggered=this.dropAcceptable=
!1;this.currentDomElement=null},findDragSource:function(b){for(b=b.target;b&&b!=dojo.doc.body;b=b.parentNode)if(b.dragSource&&!b.dragSource.disabled)return b.dragSource;return null},findDropTarget:function(b,d){for(var e=null,a=null;null!=b&&b!=dojo.doc.body;b=b.parentNode){var f=b.dropTarget;if(f&&!f.disabled&&f.accepts(d)){e=f;e.nodeUnderMouse=a;break}b.dragSource&&!b.dragSource.disabled&&(a=b)}return e},registerDropTarget:function(b){this.dropTargets.push(b)},unregisterDropTarget:function(b){for(var d=
0,e=this.dropTargets.length;d<e;d++)if(this.dropTargets[d]==b){this.dropTargets.splice(d,1);break}}});var e=new p;e.Module=p;return e})},"davinci/ve/views/StatesView":function(){define("dojo/_base/declare dojo/query dojo/dom-class dojo/_base/connect dojo/aspect davinci/lang/ve/ve davinci/workbench/ViewPart dijit/layout/BorderContainer dijit/layout/ContentPane davinci/XPathUtils davinci/ve/States davinci/ve/widget davinci/ve/_Widget davinci/ve/commands/AppStateCommand dojo/data/ItemFileWriteStore dijit/tree/ForestStoreModel dijit/Tree dojo/_base/window".split(" "),
function(p,k,f,e,b,d,n,a,m,h,g,c,q,A,u,x,z,B){p(z._TreeNode,{});var w=p(z._TreeNode,{_setLabelAttr:{node:"labelNode",type:"innerHTML"}}),r="sceneId category node sceneContainerNode isCurrent isFocus isInitial".split(" ");return p("davinci.ve.views.StatesView",[n],{nextId:0,_lastSelectedId:null,postCreate:function(){this.inherited(arguments);this._themeState=null;this.container=new a({design:"headline",gutters:!1,liveSplitters:!1});this.centerPane=new m({region:"center"});this.container.addChild(this.centerPane);
this.container.layout();this.container.startup();this.setContent(this.container);this.subscribe("/davinci/ui/editorSelected",this._editorSelected.bind(this));this.subscribe("/davinci/ui/context/loaded",this._contextLoaded.bind(this));this.subscribe("/davinci/ui/context/statesLoaded",this._statesLoaded.bind(this));this.subscribe("/davinci/ui/context/pagebuilt",this._pagebuilt.bind(this));this.subscribe("/davinci/ui/context/pagerebuilt",this._pagerebuilt.bind(this));this.subscribe("/davinci/states/statesReordered",
this._statesReordered.bind(this));this.subscribe("/davinci/ui/deviceChanged",this._deviceChanged.bind(this));this.subscribe("/davinci/states/state/added",this._addState.bind(this));this.subscribe("/davinci/states/state/removed",this._removeState.bind(this));this.subscribe("/davinci/states/state/renamed",this._renameState.bind(this));this.subscribe("/davinci/states/state/changed",this._changeState.bind(this));this.subscribe("/maqetta/appstates/state/changed",this._changeState.bind(this));this.subscribe("/maqetta/appstates/state/containerChange",
this._containerChange.bind(this));this.subscribe("/davinci/ui/context/registerSceneManager",this._registerSceneManager.bind(this));this.subscribe("/davinci/scene/scenesLoaded",this._scenesLoaded.bind(this));this.subscribe("/davinci/scene/added",this._addScene.bind(this));this.subscribe("/davinci/scene/removed",this._removeScene.bind(this));this.subscribe("/davinci/scene/renamed",this._renameScene.bind(this));this.subscribe("/davinci/scene/selectionChanged",this._sceneSelectionChanged.bind(this));
dojo.subscribe("/davinci/ui/widgetPropertiesChanged",dojo.hitch(this,this._widgetPropertiesChanged));this.subscribe("/davinci/ui/widgetSelected",dojo.hitch(this,this._widgetSelectionChanged));this.attachToolbar();dojo.style(this.toolbarDiv,"display","none")},_contextLoaded:function(){},_pagebuilt:function(){this._statesLoaded.apply(this,arguments)},_pagerebuilt:function(){this._destroyTree();this._statesLoaded.apply(this,arguments)},_statesReordered:function(){this._destroyTree();this._statesLoaded.apply(this,
arguments)},_statesLoaded:function(){this._editor&&"davinci.ve.themeEditor.ThemeEditor"!=this._editor.declaredClass&&this._updateView();this._hideShowToolBar()},_deviceChanged:function(){this._updateView()},_addState:function(){this._updateView()},_removeState:function(){this._updateView()},_renameState:function(){this._updateView()},_changeState:function(a){this.isThemeEditor()?this._updateThemeSelection(a.newState):this._updateView()},_containerChange:function(){this._updateView()},_registerSceneManager:function(a){},
_scenesLoaded:function(a){this._updateView()},_addScene:function(a,c,b){this._updateView()},_removeScene:function(a,c,b){this._updateView()},_renameScene:function(a,c,b){this._updateView()},_widgetPropertiesChanged:function(){this._updateView()},_widgetSelectionChanged:function(a){this._editor&&this._editor.getContext&&this._tree&&this._sceneStore&&(a=this._editor.getContext().getSelection(),1==a.length&&(a=a[0].domNode)&&a._maqAppStates&&this._sceneStore.fetch({query:{node:a},queryOptions:{deep:!0},
onComplete:dojo.hitch(this,function(a,c){0<a.length&&(a=this._getTreeSelectionPath(a[0]),this._tree.set("path",a))})}))},_sceneSelectionChanged:function(a,c){a&&a.category&&c&&this._updateView()},_editorSelected:function(a){a=a.editor;this._destroyTree();this._unregisterForContextEvents();a&&a.supports("states")?(this._editor=a,dojo.style(this.container.domNode,"display","block"),"davinci.ve.themeEditor.ThemeEditor"===a.declaredClass?(this.set("title",d.States),this._updateViewForThemeEditor(),this._themeState?
this._updateThemeSelection(this._themeState):this._updateThemeSelection("Normal")):(this.set("title",d.Scenes),this._registerForContextEvents(),this._updateView()),this.container.layout()):(delete this._editor,dojo.style(this.container.domNode,"display","none"));this._hideShowToolBar()},_getRootNode:function(){var a=this._editor,c;a&&a.getContext&&(c=(a=a.getContext())&&a.rootNode);return c},_updateView:function(){if(this._editor&&this._editor.getContext&&!this.isThemeEditor()){var a=this._editor.getContext();
a&&a._statesLoaded&&B.withDoc(document,function(){this._updateList();this._updateSelection()},this)}},isThemeEditor:function(){return this._editor&&"davinci.ve.themeEditor.ThemeEditor"===this._editor.declaredClass},_updateViewForThemeEditor:function(){var a=this._editor._theme.getStatesForAllWidgets(),c={Normal:"Normal"};if(a)for(var b=0;b<a.length;b++){var g=a[b];"Normal"!=g&&(c[g]=g)}window.latestStates=c;var a=this._getScenes(),c={name:this._editor&&this._editor.getFileNameToDisplay?this._editor.getFileNameToDisplay():
this._editor&&this._editor.fileName?this._editor.fileName:"file",type:"file",category:"file",children:[]},b=[],g=[c],d;for(d in latestStates)b.push({name:d,sceneId:d,type:"AppState"});c.children=c.children.concat(b);this._compareStructures(g,a)||(this._destroyTree(),this._createTree(g))},_updateList:function(){function a(b,d){var k,u=b.declaredClass&&b.isInstanceOf&&b.isInstanceOf(q);u?(k=b,b=k.domNode):k=null;var A=g.isStateContainer(b),z=!1,x;for(x in e){var y=e[x];if(y.getSceneChildren&&y.name&&
y.category&&(z=y.isSceneContainer(b)))break}if("BODY"==b.tagName||A||z){for(var B=null,v=0;v<f.length;v++)if(y=f[v],y.node==b){B=y;break}var r=null;if(!B){var p=b.parentNode;a:for(;p;){for(v=0;v<f.length;v++)if(y=f[v],y.node==p){r=y;break a}if("BODY"==p.tagName)break;p=p.parentNode}}if(B)d=B;else{var w=u?c.getLabel(k):c.getLabelForNode(b),v=h.getXPath(b),w={name:w,type:"file",category:"file",node:b,children:[]};r?(w.maqid=r.maqid+"$"+v,r.children.push(w)):(w.maqid=d.maqid+"$"+v,d.children.push(w));
f.push(w);d=w}if(A){v=g.getStates(b);y=g.getState(b);y||(y=g.NORMAL);p=g.getInitial(b);p||(p=g.NORMAL);for(var C={maqid:d.maqid+"$AppStates",name:"Application States",type:"SceneManagerRoot",category:"AppStates",sceneContainerNode:b,parentItem:d,children:[]},D=0;D<v.length;D++){var E=v[D],w=m._treeNodeContent("Normal"==E?"Background":E),A=n&&n.stateContainerNode==b&&n.state==y,r=E===y,B=E===p,w={maqid:C.maqid+"$"+E,name:w,sceneId:E,type:"AppState",isFocus:A,isCurrent:r,isInitial:B,sceneContainerNode:b,
parentItem:C};C.children.push(w);f.push(w)}d.children.push(C);f.push(C)}if(z)for(x in e)if(y=e[x],y.getSceneChildren&&y.getCurrentScene&&y.getInitialScenes&&y.name&&y.category&&(z=y.getSceneChildren(b),0<z.length)){p=y.getCurrentScene(b);C=y.getInitialScenes(b);v=h.getXPath(b);D={maqid:d.maqid+"$"+v,name:y.name,type:"SceneManagerRoot",category:y.category,parentItem:d,children:[]};for(E=0;E<z.length;E++){var F=z[E],w=u?c.getLabel(F._dvWidget):c.getLabelForNode(F),w=m._treeNodeContent(w),A=!1,r=F===
p,B=0<=C.indexOf(F),v=h.getXPath(F),w={maqid:D.maqid+"$"+v,name:w,sceneId:F.id,type:y.category,isFocus:A,isCurrent:r,isInitial:B,sceneContainerNode:b,parentItem:D,node:F,children:[]};D.children.push(w);f.push(w)}d.children.push(D);f.push(w)}}k=u?k.getChildren():g._getChildrenOfNode(b);for(u=0;u<k.length;u++)a(k[u],d)}var b=this._getScenes();if(this._editor&&b){var d=this._editor.getContext();if(d&&d.rootWidget&&d.rootNode&&d._statesLoaded){var e=d.sceneManagers,f=[],m=this,n=g.getFocus(d.rootNode);
n&&!n.state&&(n.state=g.NORMAL);var k={maqid:"root",children:[]};a(d.rootWidget,k);d=[k.children[0]];if(!this._compareStructures(d,b)){var u=null;this._tree&&this._sceneStore&&(b=this._tree.get("path"),0<b.length&&(u=b[b.length-1].maqid[0]));this._destroyTree();this._createTree(d);u&&this._tree.onLoadDeferred.then(function(){this._sceneStore.fetch({query:{maqid:u},queryOptions:{deep:!0},onComplete:dojo.hitch(this,function(a,c){1===a.length&&(a=this._getTreeSelectionPath(a[0]),0<a.length&&this._tree.set("path",
a))})})}.bind(this))}this._hideShowToolBar()}}},_getTreeSelectionPath:function(a){var c=[];c.splice(0,0,a.id[0]);for(a=a.parentItem&&a.parentItem[0];a;)c.splice(0,0,a.id[0]),a=a.parentItem&&a.parentItem[0];c.splice(0,0,"StoryRoot");return c},_updateSelection:function(){if(this._editor&&this._tree){var a=this._editor.getContext();a&&a._statesLoaded&&this._tree.onLoadDeferred.then(function(){var c=this._tree.get("path"),c=0<c.length?c[c.length-1].maqid[0]:null,b=a.sceneManagers,d;for(d in b){var e=
b[d];if(e.getAllSceneContainers&&e.getSceneChildren&&e.getCurrentScene){e.getAllSceneContainers();var h;this._sceneStore.fetch({query:{type:e.category},queryOptions:{deep:!0},onComplete:dojo.hitch(this,function(a,c){h=a})});for(e=0;e<h.length;e++){var m=h[e],n=this._findTreeNodeSpanByClass(m,"ScenesPaletteCurrent"),q=this._findTreeNodeSpanByClass(m,"ScenesPaletteInitial");m.isCurrent&&m.isCurrent[0]?n&&f.remove(n,"ScenesPaletteCurrentHidden"):n&&f.add(n,"ScenesPaletteCurrentHidden");m.isInitial&&
m.isInitial[0]?q&&f.remove(q,"ScenesPaletteInitialHidden"):q&&f.add(q,"ScenesPaletteInitialHidden");m.maqId&&m.maqId[0]==c&&(n=m.node&&m.node[0])&&n._maqAppStates&&(q=g.getState(n),g.setState(q,n,{focus:!0,updateWhenCurrent:!0}))}}}var k=[];this._sceneStore.fetch({query:{type:"AppState"},queryOptions:{deep:!0},onComplete:dojo.hitch(this,function(a,c){k=a})});for(e=0;e<k.length;e++)d=k[e],n=this._findTreeNodeSpanByClass(d,"ScenesPaletteCurrent"),q=this._findTreeNodeSpanByClass(d,"ScenesPaletteInitial"),
d.isCurrent&&d.isCurrent[0]?n&&f.remove(n,"ScenesPaletteCurrentHidden"):n&&f.add(n,"ScenesPaletteCurrentHidden"),d.isInitial&&d.isInitial[0]?q&&f.remove(q,"ScenesPaletteInitialHidden"):q&&f.add(q,"ScenesPaletteInitialHidden")}.bind(this))}},_updateThemeSelection:function(a){if(this._sceneStore){var c;a||(a="Normal");this._sceneStore.fetch({query:{type:"AppState",sceneId:a},queryOptions:{deep:!0},onComplete:dojo.hitch(this,function(a,b){1===a.length&&(c=a[0].sceneId[0])})});c&&this._updateSelectedScene("AppState",
c)}},_getScenes:function(){var a=[];this._sceneStore&&this._sceneStore.fetch({query:{},queryOptions:{},onComplete:dojo.hitch(this,function(c,b){function g(a,c){for(var b={name:a.name[0],type:a.type[0]},d=0;d<r.length;d++){var e=r[d];a[e]&&(b[e]=a[e][0])}c.push(b);a.children&&0<a.children.length&&(b.children=[],a.children.forEach(function(a){g(a,b.children)}))}c.forEach(function(c){g(c,a)})})});return a},_compareStructures:function(a,c){function b(a,c){if(a.length!=c.length)return!1;for(var g=0;g<
a.length;g++){var d;a:{d=a[g];for(var e=c[g],h=0;h<r.length;h++){var f=r[h];f=d[f]&&!e[f]||!d[f]&&e[f]?!1:d[f]&&d[f]!==e[f]?!1:!0;if(!f){d=!1;break a}}h=d.children&&d.children.length;f=e.children&&e.children.length;d=h&&!f||!h&&f||h&&!b(d.children,e.children)?!1:!0}if(!d)return!1}return!0}return b(a,c)},_destroyTree:function(){this._tree&&(this._tree.destroyRecursive(),this._forest.destroy(),this._tree=this._forest=this._sceneStore=null)},_createTree:function(a){require(["dijit/tree/dndSource"],function(c){c=
function(a,c,b){if(a&&c){var g,d,e;c.forInSelectedItems(function(a){if(g=a.data&&a.data.item)d=g.parentItem&&g.parentItem[0],e=d.children&&d.children.indexOf(g)});var h,f;(a=dijit.getEnclosingWidget(a).item)&&(h=a.parentItem&&a.parentItem[0])&&(f=h.children&&h.children.indexOf(a));return"over"!=b&&g&&a&&d&&h&&"AppState"==g.type[0]&&"AppState"==a.type[0]&&d==h&&0!==e&&!("before"==b&&0===f)&&!("before"==b&&e+1==f)&&!("after"==b&&e==f+1)}}.bind(this);var d=function(a,c,b){if(a.tree==this._tree){var g,
d;a.forInSelectedItems(function(a){(g=a.data&&a.data.item)&&(d=g.parentItem&&g.parentItem[0])});if((a=d.sceneContainerNode&&d.sceneContainerNode[0])&&a._maqAppStates&&a._maqAppStates.states){c=[];for(b=1;b<d.children.length;b++)c.push(d.children[b].sceneId[0]);a=new A({action:"reorder",newStatesList:c,stateContainerNode:a,context:e});e.getCommandStack().execute(a)}}}.bind(this);if(this._editor){var e=this._editor.getContext(),h=e.sceneManagers;this._sceneStore=new u({data:{identifier:"id",label:"name",
items:[]},clearOnClose:!0});this._forest=new x({store:this._sceneStore,query:{type:"file"},rootId:"StoryRoot",rootLabel:"All",childrenAttrs:["children"]});this._tree=new z({model:this._forest,persist:!1,showRoot:!1,autoExpand:!0,dndController:"dijit.tree.dndSource",dragThreshold:8,betweenThreshold:5,checkItemAcceptance:c,className:"StatesViewTree",style:"height:150px; overflow-x:hidden; overflow-y:auto;",_createTreeNode:function(a){return new w(a)},getIconClass:function(a,c){return"dijitLeaf"}});
this._tree.tree&&this._tree.tree.dndController&&b.after(this._tree.tree.dndController,"onDndDrop",d,!0);this.centerPane.domNode.appendChild(this._tree.domNode);dojo.connect(this._tree,"onClick",this,function(a){var c=this._editor,b=c?c.getContext():null,d=null,e=null,f=null;a&&a.type&&(e=a.type[0],f=a.category&&a.category[0],"AppState"==e||"SceneManagerRoot"==e&&"AppStates"==f?d=a.sceneContainerNode?a.sceneContainerNode[0]:null:a.node&&a.node[0]._maqAppStates&&(d=a.node[0]));if(this.isThemeEditor())this.publish("/davinci/states/state/changed",
[{editorClass:c.declaredClass,widget:"$all",newState:a.sceneId[0],oldState:this._themeState,context:this._editor.context}]),this._themeState=a.sceneId[0];else{b&&d&&(f="AppState"==e?a.sceneId?a.sceneId[0]:null:g.getState(d),g.setState(f,d,{focus:!0,updateWhenCurrent:!0}),"davinci.ve.PageEditor"===this._editor.declaredClass&&(b.deselectInvisible(),b.clearCachedWidgetBounds(),b.updateFocusAll()));if(a.sceneId)for(var m in h){if(c=h[m],c.selectScene&&c.selectScene({sceneId:a.sceneId[0]}))break}else a.type&&
"file"==a.type[0]&&a.node&&a.node[0]._dvWidget&&b.select(a.node[0]._dvWidget);this._updateSelection()}});var f=function(a,c){var b=dojo.mixin({},a),g=this.nextId+"";this.nextId++;b.id=g;b.parentItem=c;delete b.children;var d;d=c?this._sceneStore.newItem(b,{parent:c,attribute:"children"}):this._sceneStore.newItem(b);a.children&&a.children.forEach(function(a){f(a,d)})}.bind(this);a.forEach(function(a){f(a)});this._sceneStore.save();if(this._tree.getParent){var m=this._tree.getParent();m.resize&&window.setTimeout(function(){m.resize()},
0)}}}.bind(this))},_updateSelectedScene:function(a,c){if(this._sceneStore){for(var b=c,g=[];b;)this._sceneStore.fetch({query:{type:a,sceneId:b},queryOptions:{deep:!0},onComplete:dojo.hitch(this,function(a,c){if(1!==a.length)console.error("_sceneSelectionChanged error. currentSceneId\x3d"+b+",items.length\x3d"+a.length),b=null;else for(a=a[0],g.splice(0,0,a.id[0]),b=a.parentSceneId?a.parentSceneId[0]:null,a=a.parentItem&&a.parentItem[0];a;)g.splice(0,0,a.id[0]),a=a.parentItem&&a.parentItem[0]})});
g.splice(0,0,"StoryRoot");this._tree.set("paths",[g])}},_hideShowToolBar:function(){function a(a,c){var b=a+"Disabled";a=k("."+a);a.length&&(c?f.remove(a[0],b):f.add(a[0],b))}if(this._editor){var c=this._editor.getContext&&this._editor.getContext();dojo.style(this.toolbarDiv,"display","davinci.ve.PageEditor"===this._editor.declaredClass?"block":"none");var b,d,e;b=d=e=!1;c&&c.rootNode&&((c=g.getFocus(c.rootNode))&&c.stateContainerNode&&(b=e=!0),c&&c.state&&c.state!==g.NORMAL&&(d=e=!0));a("addStateIcon",
b);a("removeStateIcon",d);a("modifyStateIcon",e)}},_treeNodeContent:function(a){var c;c=""+('\x3cspan title\x3d"'+d.InitialScene+'" class\x3d"ScenesPaletteAppStateIcon ScenesPaletteInitial"\x3e\x26#x2713;\x3c/span\x3e');c+='\x3cspan title\x3d"'+d.ActiveScene+'" class\x3d"ScenesPaletteAppStateIcon ScenesPaletteCurrent"\x3e\x3c/span\x3e';return c+("\x3cspan\x3e"+a+"\x3c/span\x3e")},_findTreeNodeSpanByClass:function(a,c){var b=(a=(a=this._tree.getNodesByItem(a))&&0<a.length?a[0]:null)?a.domNode:null;
return(c=a?dojo.query("."+c,b):[])&&0<c.length?c[0]:null},_contextEventHandler:function(){this._updateView()},_unregisterForContextEvents:function(){this._contextConnects&&(this._contextConnects.forEach(e.disconnect),this._contextConnects=null)},_registerForContextEvents:function(){var a=["widgetChanged","widgetAddedOrDeleted"];this._unregisterForContextEvents();var c=this._editor&&this._editor.getContext&&this._editor.getContext();c&&(this._contextConnects=[],a.forEach(function(a){c[a]&&this._contextConnects.push(e.connect(c,
a,this,"_contextEventHandler"))}.bind(this)))}})})},"davinci/lang/ve/ve":function(){define([],function(){return{common:"Common",widgetSpecific:"Widget",events:"Events",layout:"Layout",showMinMax:"show min/max",padding:"Padding",margins:"Margins",showtrbl:"show t/r/b/l",background:"Background",border:"Border",showDetails:"show details",fontsAndText:"Fonts/Text",shapesSVG:"SVG",properties:"properties",Scenes:"Scenes",States:"States",ActiveScene:"This scene is currently visible",AppStateFocus:"This application state is the target for application-state-specific visibility or styling changes",
InitialScene:"This scene will show initially when the page runs",chooseDeviceSilhouette:"Choose a device silhouette: ",filesHasUnsavedChanges:"The file '${0}' has unsaved changes, \"Save\" changes and continue with switch device silhouette.",selectAncestorTitle:"Select ancestor",selectAncestorLabel:"Select ancestor (closest ancestor listed first):",createNewState:"Create New State",updateCurrentState:"Update Current State",createLabel:"Create",updateLabel:"Update",modifyState:"Modify State",modifyLabel:"Update",
stateLabel:"Name",enterStateName:"Please enter a state name.",stateNameExists:"State name '${name}' already exists. Please enter a different state name.",renameState:"Rename State",renameLabel:"Rename",cancelLabel:"Cancel",newStateLabel:"New name:",manageStates:"Manage Widget Visibility for Different States",manageStatesCheckLabel:"Check:",manageStatesCheckCurrentStateOnly:"Current state",manageStatesCheckAll:"All",manageStatesUncheckAll:"None",manageStatesCheckBackgroundOnly:"Background only",manageStatesAllVisibleFromBackground:"(Visible from Background)",
manageStatesSomeVisibleFromBackground:"(Some visible from Background)",manageStatesSomeVisibleSomeHidden:"(Some visible, some hidden)",initialStateCheckBoxLabel:"Initial state at document load time",EnableApplicationStates:"Enable/disable application states",EnableAsStateContainerDescription:"Setting the check box below and clicking OK will allow custom application states to be defined on the currently selected widget.",DisableAsStateContainerDescription:"Unsetting the check box below and clicking OK will disallow custom application states on the currently selected widget.",
DisableAsStateContainerDataLoss:"Any existing interactivity based on existing application states will be lost.",EnableAsStateContainerWidgetLabel:"Application states are enabled on this widget",EnableApplicationStatesCurrentWidget:"Currently selected widget",EnableApplicationStatesCurrentStates:"Current application states",EnableApplicationStatesNone:"(none)",NewWidgetsCurrentStateTitleBackground:"Toggle whether new widgets go to Background or selected state (current value: Background)",NewWidgetsCurrentStateTitleCurrentState:"Toggle whether new widgets go to Background or selected state (current value: selected state)",
richTextInputHelp:"Provides Rich Text (word processor-like) editing of HTML.",smartInputHelp1:"If you use any markup characters (\x26lt;,\x26gt;,\x26amp;), you need to specify whether the text represents literal (plain) text or HTML markup that should be parsed (using an innerHTML assignment).",smartInputHelp2:"Text represents literal (plain) text.",loading:"Loading...",htmlMarkup:"HTML markup",creatingStyleRules:"Creating Style Rules with app.css",propChangeCannotComplete:"This property change cannot be completed because the operation attempts to modify a read-only theme CSS file.",
toChangeProperty:"To change this property, one technique is to add a class to this widget (at top of Properties palette)  and then open up the CSS Details pane to target a style rule within your app.css file, as described at ${0}.",errorModifyingValue:"Error modifying value",changeWillModify:"This change will modify one of the CSS style rules defined within a 'CSS theme' and will therefore probably impact other widgets on a global basis.",insteadOfChanging:"Instead of changing the theme CSS files, it is usually better to add a class to this widget (at the top of the Properties palette) and then open up the CSS Details pane to target a style rule within your app.css file, as described at ${0}.",
okToProceed:"OK to proceed with this change?",valueIsOverriden:"This value is overriden and can not be changed.",applyToWhich:"Apply to which style rule:",onlyApplyToState:" Only apply to current state (${0})",newRule:"[class: ${0} - New rule in ${1}] ",newThemeRule:"[theme: - New rule in ${0}] ",existingRule:"[class: ${0} - Existing rule in ${1}] ",line:" line: ${0})",propUndefined:"undefined",bgdType_emptystring:"",bgdType_none:"none",bgdType_url:"image",bgdType_linear:"linear gradient",bgdType_radial:"radial gradient",
bgdType_other:"other",bgdPickFile:"Choose...",bgdStop:"Stop",bgdAddStop:"Add a new gradient stop after this stop",bgdRemoveStop:"Remove this gradient stop",bgdBackgroundColor:"background-color:",bgdBackgroundImageType:"background-image type:",bgdImageUrl:"Image URL:",bgdUrl:"URL:",bgdColorStops:"Color stops:",bgdColor:"color",bgdPosition:"position",bgdOptions:"Options:",bgdAngle:"Angle:",bgdPosition2:"Position:",bgdShape:"Shape:",bgdExtent:"Extent:",bgdBackgroundRepeat:"background-repeat:",bgdBackgroundPosition:"background-position:",
bgdBackgroundSize:"background-size:",bgdBackgroundOrigin:"background-origin:",bgdBackgroundClip:"background-clip:",bgdBackgroundImageValue:"'background-image' value:",bgdTemplate:"Template:",colorPicker:"Color picker...",removeValue:"Remove Value",selectColor:"select a color",toolBarFor:"",noSelection:"(no selection)",toolBarClass:"class:",toolBarId:"ID:",idAlreadyUsed:"This id is already used by another widget",noValidParents:"No valid parents at this position",willBeChildOf:"Will become a child of:",
candidateParents:"Candidate parents:",toChangePress:"To change, press numbers",vteWarningTitle:"Theme Version Warning",vteWarningMessage:"Theme version does not match Maqetta version this could produce unexpected results. We suggest recreating the custom theme using the current version of Maqetta and deleting the existing theme.",vteWarningUnsuportedBrowserTitle:"Unsupported brower",vteWarningUnsuportedBrowserMessage:"Editing mobile themes is only supported on webkit browsers, we sugguest using Chrome or Safari to customize mobile themes.",
vteWarningToolkitMessage:"Theme version does not match workspace library version this could produce unexpected results. We suggest recreating the custom theme using the current version of Maqetta and deleting the existing theme.",vteErrorTitle:"Theme Version Error",vteErrorMessage:"Theme version is not supported by this version of Maqetta. You must recreating custom theme using the current version of Maqetta and deleting the existing theme..",vteErrorSavingResourceMessage:"error saving resource\n",
"SourceComboButton-source":"Source","SourceComboButton-splitHorizontal":"Split-H","SourceComboButton-splitVertical":"Split-V","LayoutDropDownButton-flow":"Flow","LayoutDropDownButton-absolute":"Absolute"}})},"davinci/XPathUtils":function(){define(function(){function p(f){this.node=f}p.prototype={name:function(){return this.node.nodeName},parent:function(){var f=this.node.parentNode;if(f!==this.node.ownerDocument)return new p(f)},index:function(){var f=this.node.nodeName,e=this.node.parentNode,b=!1,
d=0;e.id||(e.id="__XPATH_UTILS_TEMP_ID__"+Date.now(),b=!0);f=e.querySelectorAll("#"+e.id+"\x3e"+f);if(1<f.length)for(var n=0,a=f.length;n<a;n++)if(f[n]===this.node){d=n+1;break}b&&(e.id="");return d}};var k=/(\w+)(?:\[(\d+)\])?/;return{getXPath:function(f,e){function b(d,e){var a=e.name(),f=e.parent();return f?(e=e.index(),b((e?a+("["+e+"]"):a+"[1]")+(d?"/"+d:""),f)):"/"+a+"/"+d}e=e||p;f=new e(f);return b("",f).toLowerCase()},toCssPath:function(f){"/"===f.charAt(0)&&(f=f.substr(1));var e="";f.split("/").forEach(function(b){b=
b.match(k);var d=b[2];e+=(e?"\x3e":"")+b[1];d&&(e+=":nth-of-type("+d+")")});return e}}})},"davinci/ve/commands/AppStateCommand":function(){define("dojo/_base/declare dojo/_base/lang dojo/topic davinci/XPathUtils davinci/html/HtmlFileXPathAdapter davinci/ve/States".split(" "),function(p,k,f,e,b,d){return p("davinci.ve.commands.AppStateCommand",null,{name:"AppStateCommand",_actions:["add","remove","modify","reorder"],constructor:function(f){if(f){this._params=k.mixin({},f);var a=f.stateContainerNode;
a&&a._dvWidget&&(this._params.stateContainerId=a.id,this._params.stateContainerXpath=e.getXPath(a._dvWidget._srcElement,b));"reorder"==this._params.action&&((a=this._getStateContainerNode())&&f.newStatesList.length?(this._oldStatesList=d.getStates(a),this._oldStatesList.shift()):this._params=null)}},_validParams:function(){return this._params&&0<=this._actions.indexOf(this._params.action)&&this._params.stateContainerNode&&this._params.stateContainerId&&this._params.stateContainerXpath&&this._params.context},
_getStateContainerNode:function(){var b,a=this._params.context;if(!a)return b;var d=a.getDocument();if(!d)return b;var e=this._params.stateContainerXpath;b=d.getElementById(this._params.stateContainerId);b||(a=a.model.evaluate(e))&&(b=d.getElementById(a.getAttribute("id")));return b},execute:function(){if(this._validParams()){var b=this._params.action,a=this._params.state,e=this._getStateContainerNode();e&&("add"==b?(d.add(e,a),this._setStateAndFocus(e)):"remove"==b?(this._stateIndex=e._maqAppStates&&
e._maqAppStates.states&&e._maqAppStates.states.indexOf(a),this._preservedNodesId=[],this._preservedNodesXpath=[],this._preservedStateValues=[],this._preserveStateFromNodeRecursive(e,a),d.remove(e,a),this._setStateAndFocus(e)):"modify"==b?(this._params.newState&&(this._traverseRenameState(this._params.state,this._params.newState),f.publish("/davinci/states/state/renamed",{node:e,oldName:this._params.state,newName:this._params.newState,stateContainerNode:e})),"string"==typeof this._params.initialState&&
(this._oldInitialState=d.getInitial(e),b="undefined"==this._params.initialState?void 0:this._params.initialState,this._params.newState&&b==this._params.state&&(b=this._params.newState),d.setState(b,e,{initial:b,updateWhenCurrent:!0})),this._setStateAndFocus(e)):"reorder"==b&&e&&e._maqAppStates&&e._dvWidget&&(e._maqAppStates.states=this._params.newStatesList,b=d.stringifyWithQuotes(e._maqAppStates),e.setAttribute(d.APPSTATES_ATTRIBUTE,b),srcElement=e._dvWidget._srcElement,srcElement.setAttribute(d.APPSTATES_ATTRIBUTE,
b),f.publish("/davinci/states/statesReordered",[e,this._params.newStatesList])))}},undo:function(){if(this._validParams()){var b=this._params.action,a=this._params.state,e=this._getStateContainerNode();e&&("add"==b?(d.remove(e,a),this._setStateAndFocus(e)):"remove"==b?(d.add(e,a,{index:this._stateIndex}),this._restoreState(a),d.setState(a,e,{focus:!0}),this._setStateAndFocus(e)):"modify"==b?("string"==typeof this._params.initialState&&d.setState(this._oldInitialState,e,{initial:this._oldInitialState,
updateWhenCurrent:!0}),this._params.newState&&this._traverseRenameState(this._params.newState,this._params.state),this._setStateAndFocus(e)):"reorder"==b&&e&&e._maqAppStates&&e._dvWidget&&(e._maqAppStates.states=this._oldStatesList,b=d.stringifyWithQuotes(e._maqAppStates),e.setAttribute(d.APPSTATES_ATTRIBUTE,b),srcElement=e._dvWidget._srcElement,srcElement.setAttribute(d.APPSTATES_ATTRIBUTE,b),f.publish("/davinci/states/statesReordered",[e,this._params.newStatesList])))}},_setStateAndFocus:function(b){var a=
d.getState(b);d.setState(a,b,{focus:a,updateWhenCurrent:!0})},_preserveStateFromNodeRecursive:function(b,a){var d=b._dvWidget;if(b&&d&&a)for(this._preserveStateFromNode(b,a),b=d.getChildren(),d=0;d<b.length;d++)this._preserveStateFromNodeRecursive(b[d].domNode,a)},_preserveStateFromNode:function(d,a){d&&d._maqDeltas&&d._maqDeltas[a]&&d._dvWidget&&d._dvWidget._srcElement&&(this._preservedNodesId.push(d.id),this._preservedNodesXpath.push(e.getXPath(d._dvWidget._srcElement,b)),this._preservedStateValues.push(k.clone(d._maqDeltas[a])))},
_restoreState:function(b){var a=this._params.context;if(a&&this._preservedNodesId){var e=a.getDocument();if(e)for(var h=0;h<this._preservedNodesId.length;h++){var g=this._preservedNodesXpath[h],c=e.getElementById(this._preservedNodesId[h]);c||(g=a.model.evaluate(g))&&(c=e.getElementById(g.getAttribute("id")));c&&(c._maqDeltas||(c._maqDeltas={}),c._maqDeltas[b]=k.clone(this._preservedStateValues[h]),d._updateSrcState(c))}}},_traverseRenameState:function(b,a){var e=this._getStateContainerNode();if(e&&
(d.rename(e,{oldName:b,newName:a}),e=e._dvWidget&&e._dvWidget._srcElement)){var h=null,g=!1,c=/^(.*davinci.states.setState\s*\(\s*)('[^']*'|"[^"]*")([^\)]*\).*)$/,f=/^(['"])(.*)(['"])$/;e.visit({visit:dojo.hitch(this,function(d){if("HTMLElement"==d.elementType)h=d;else if("HTMLAttribute"==d.elementType){var e=d.name;if(e&&"on"==e.substr(0,2).toLowerCase()&&(d=d.value.match(c))){var m=d[2].match(f);m&&m[2]==b&&(h.setAttribute(e,d[1]+m[1]+a+m[3]+d[3]),g=!0)}}})});g&&(e=this._params&&this._params.context&&
this._params.context.editor)&&e._visualChanged()}}})})},"davinci/html/HtmlFileXPathAdapter":function(){define(function(){function p(k){this.elem=k}p.prototype={name:function(){return this.elem.tag},parent:function(){var k=this.elem.parent;if("HTMLFile"!==k.elementType)return new p(k)},index:function(){var k=this.elem.tag,f=this.elem.parent.children,e=0;if(1===f.length)return 0;f=f.filter(function(b){return b.tag===k});1<f.length&&f.some(function(b,d){if(b===this.elem)return e=d+1,!0},this);return e}};
return p})},"dojo/data/ItemFileWriteStore":function(){define("../_base/lang ../_base/declare ../_base/array ../_base/json ../_base/kernel ./ItemFileReadStore ../date/stamp".split(" "),function(p,k,f,e,b,d,n){return k("dojo.data.ItemFileWriteStore",d,{constructor:function(a){this._features["dojo.data.api.Write"]=!0;this._features["dojo.data.api.Notification"]=!0;this._pending={_newItems:{},_modifiedItems:{},_deletedItems:{}};this._datatypeMap.Date.serialize||(this._datatypeMap.Date.serialize=function(a){return n.toISOString(a,
{zulu:!0})});a&&!1===a.referenceIntegrity&&(this.referenceIntegrity=!1);this._saveInProgress=!1},referenceIntegrity:!0,_assert:function(a){if(!a)throw Error("assertion failed in ItemFileWriteStore");},_getIdentifierAttribute:function(){return this.getFeatures()["dojo.data.api.Identity"]},newItem:function(a,b){this._assert(!this._saveInProgress);this._loadFinished||this._forceLoad();if("object"!=typeof a&&"undefined"!=typeof a)throw Error("newItem() was passed something other than an object");var d=
null,g=this._getIdentifierAttribute();if(g===Number)d=this._arrayOfAllItems.length;else{d=a[g];if("undefined"===typeof d)throw Error("newItem() was not passed an identity for the new item");if(p.isArray(d))throw Error("newItem() was not passed an single-valued identity");}this._itemsByIdentity&&this._assert("undefined"===typeof this._itemsByIdentity[d]);this._assert("undefined"===typeof this._pending._newItems[d]);this._assert("undefined"===typeof this._pending._deletedItems[d]);var c={};c[this._storeRefPropName]=
this;c[this._itemNumPropName]=this._arrayOfAllItems.length;this._itemsByIdentity&&(this._itemsByIdentity[d]=c,c[g]=[d]);this._arrayOfAllItems.push(c);g=null;if(b&&b.parent&&b.attribute){var g={item:b.parent,attribute:b.attribute,oldValue:void 0},e=this.getValues(b.parent,b.attribute);if(e&&0<e.length){var f=e.slice(0,e.length);g.oldValue=1===e.length?e[0]:e.slice(0,e.length);f.push(c);this._setValueOrValues(b.parent,b.attribute,f,!1);g.newValue=this.getValues(b.parent,b.attribute)}else this._setValueOrValues(b.parent,
b.attribute,c,!1),g.newValue=c}else c[this._rootItemPropName]=!0,this._arrayOfTopLevelItems.push(c);this._pending._newItems[d]=c;for(var m in a){if(m===this._storeRefPropName||m===this._itemNumPropName)throw Error("encountered bug in ItemFileWriteStore.newItem");b=a[m];p.isArray(b)||(b=[b]);c[m]=b;if(this.referenceIntegrity)for(d=0;d<b.length;d++)e=b[d],this.isItem(e)&&this._addReferenceToMap(e,c,m)}this.onNew(c,g);return c},_removeArrayElement:function(a,b){b=f.indexOf(a,b);return-1!=b?(a.splice(b,
1),!0):!1},deleteItem:function(a){this._assert(!this._saveInProgress);this._assertIsItem(a);var b=a[this._itemNumPropName],d=this.getIdentity(a);if(this.referenceIntegrity){var g=this.getAttributes(a);a[this._reverseRefMap]&&(a["backup_"+this._reverseRefMap]=p.clone(a[this._reverseRefMap]));f.forEach(g,function(c){f.forEach(this.getValues(a,c),function(b){this.isItem(b)&&(a["backupRefs_"+this._reverseRefMap]||(a["backupRefs_"+this._reverseRefMap]=[]),a["backupRefs_"+this._reverseRefMap].push({id:this.getIdentity(b),
attr:c}),this._removeReferenceFromMap(b,a,c))},this)},this);if(g=a[this._reverseRefMap])for(var c in g){var e=null;if(e=this._itemsByIdentity?this._itemsByIdentity[c]:this._arrayOfAllItems[c])for(var n in g[c]){var k=this.getValues(e,n)||[],x=f.filter(k,function(a){return!(this.isItem(a)&&this.getIdentity(a)==d)},this);this._removeReferenceFromMap(a,e,n);x.length<k.length&&this._setValueOrValues(e,n,x,!0)}}}this._arrayOfAllItems[b]=null;a[this._storeRefPropName]=null;this._itemsByIdentity&&delete this._itemsByIdentity[d];
this._pending._deletedItems[d]=a;a[this._rootItemPropName]&&this._removeArrayElement(this._arrayOfTopLevelItems,a);this.onDelete(a);return!0},setValue:function(a,b,d){return this._setValueOrValues(a,b,d,!0)},setValues:function(a,b,d){return this._setValueOrValues(a,b,d,!0)},unsetAttribute:function(a,b){return this._setValueOrValues(a,b,[],!0)},_setValueOrValues:function(a,b,d,g){this._assert(!this._saveInProgress);this._assertIsItem(a);this._assert(p.isString(b));this._assert("undefined"!==typeof d);
var c=this._getIdentifierAttribute();if(b==c)throw Error("ItemFileWriteStore does not have support for changing the value of an item's identifier.");var c=this._getValueOrValues(a,b),e=this.getIdentity(a);if(!this._pending._modifiedItems[e]){var h={},m;for(m in a)h[m]=m===this._storeRefPropName||m===this._itemNumPropName||m===this._rootItemPropName?a[m]:m===this._reverseRefMap?p.clone(a[m]):a[m].slice(0,a[m].length);this._pending._modifiedItems[e]=h}e=!1;if(p.isArray(d)&&0===d.length){if(e=delete a[b],
d=void 0,this.referenceIntegrity&&c){m=c;p.isArray(m)||(m=[m]);for(var n=0;n<m.length;n++)h=m[n],this.isItem(h)&&this._removeReferenceFromMap(h,a,b)}}else{e=p.isArray(d)?d.slice(0,d.length):[d];if(this.referenceIntegrity)if(c){m=c;p.isArray(m)||(m=[m]);var k={};f.forEach(m,function(a){this.isItem(a)&&(a=this.getIdentity(a),k[a.toString()]=!0)},this);f.forEach(e,function(c){if(this.isItem(c)){var d=this.getIdentity(c);k[d.toString()]?delete k[d.toString()]:this._addReferenceToMap(c,a,b)}},this);for(n in k)this._removeReferenceFromMap(this._itemsByIdentity?
this._itemsByIdentity[n]:this._arrayOfAllItems[n],a,b)}else for(n=0;n<e.length;n++)h=e[n],this.isItem(h)&&this._addReferenceToMap(h,a,b);a[b]=e;e=!0}if(g)this.onSet(a,b,c,d);return e},_addReferenceToMap:function(a,b,d){b=this.getIdentity(b);var g=a[this._reverseRefMap];g||(g=a[this._reverseRefMap]={});(a=g[b])||(a=g[b]={});a[d]=!0},_removeReferenceFromMap:function(a,b,d){b=this.getIdentity(b);var g=a[this._reverseRefMap],c;if(g){for(c in g)c==b&&(delete g[c][d],this._isEmpty(g[c])&&delete g[c]);this._isEmpty(g)&&
delete a[this._reverseRefMap]}},_dumpReferenceMap:function(){var a;for(a=0;a<this._arrayOfAllItems.length;a++);},_getValueOrValues:function(a,b){var d=void 0;this.hasAttribute(a,b)&&(a=this.getValues(a,b),d=1==a.length?a[0]:a);return d},_flatten:function(a){if(this.isItem(a))return{_reference:this.getIdentity(a)};if("object"===typeof a)for(var b in this._datatypeMap){var d=this._datatypeMap[b];if(p.isObject(d)&&!p.isFunction(d)){if(a instanceof d.type){if(!d.serialize)throw Error("ItemFileWriteStore:  No serializer defined for type mapping: ["+
b+"]");return{_type:b,_value:d.serialize(a)}}}else if(a instanceof d)return{_type:b,_value:a.toString()}}return a},_getNewFileContentString:function(){var a={},b=this._getIdentifierAttribute();b!==Number&&(a.identifier=b);this._labelAttr&&(a.label=this._labelAttr);a.items=[];for(b=0;b<this._arrayOfAllItems.length;++b){var d=this._arrayOfAllItems[b];if(null!==d){var g={},c;for(c in d)if(c!==this._storeRefPropName&&c!==this._itemNumPropName&&c!==this._reverseRefMap&&c!==this._rootItemPropName){var f=
this.getValues(d,c);if(1==f.length)g[c]=this._flatten(f[0]);else for(var n=[],k=0;k<f.length;++k)n.push(this._flatten(f[k])),g[c]=n}a.items.push(g)}}return e.toJson(a,!0)},_isEmpty:function(a){var b=!0;if(p.isObject(a))for(var d in a){b=!1;break}else p.isArray(a)&&0<a.length&&(b=!1);return b},save:function(a){this._assert(!this._saveInProgress);this._saveInProgress=!0;var d=this,e=function(){d._pending={_newItems:{},_modifiedItems:{},_deletedItems:{}};d._saveInProgress=!1;a&&a.onComplete&&a.onComplete.call(a.scope||
b.global)},g=function(c){d._saveInProgress=!1;a&&a.onError&&a.onError.call(a.scope||b.global,c)};if(this._saveEverything){var c=this._getNewFileContentString();this._saveEverything(e,g,c)}this._saveCustom&&this._saveCustom(e,g);this._saveEverything||this._saveCustom||e()},revert:function(){this._assert(!this._saveInProgress);for(var a in this._pending._modifiedItems){var b=this._pending._modifiedItems[a],d=null,d=this._itemsByIdentity?this._itemsByIdentity[a]:this._arrayOfAllItems[a];b[this._storeRefPropName]=
this;for(var g in d)delete d[g];p.mixin(d,b)}var c;for(a in this._pending._deletedItems)c=this._pending._deletedItems[a],c[this._storeRefPropName]=this,b=c[this._itemNumPropName],c["backup_"+this._reverseRefMap]&&(c[this._reverseRefMap]=c["backup_"+this._reverseRefMap],delete c["backup_"+this._reverseRefMap]),this._arrayOfAllItems[b]=c,this._itemsByIdentity&&(this._itemsByIdentity[a]=c),c[this._rootItemPropName]&&this._arrayOfTopLevelItems.push(c);for(a in this._pending._deletedItems)c=this._pending._deletedItems[a],
c["backupRefs_"+this._reverseRefMap]&&(f.forEach(c["backupRefs_"+this._reverseRefMap],function(a){this._addReferenceToMap(this._itemsByIdentity?this._itemsByIdentity[a.id]:this._arrayOfAllItems[a.id],c,a.attr)},this),delete c["backupRefs_"+this._reverseRefMap]);for(a in this._pending._newItems)b=this._pending._newItems[a],b[this._storeRefPropName]=null,this._arrayOfAllItems[b[this._itemNumPropName]]=null,b[this._rootItemPropName]&&this._removeArrayElement(this._arrayOfTopLevelItems,b),this._itemsByIdentity&&
delete this._itemsByIdentity[a];this._pending={_newItems:{},_modifiedItems:{},_deletedItems:{}};return!0},isDirty:function(a){return a?(a=this.getIdentity(a),(new Boolean(this._pending._newItems[a]||this._pending._modifiedItems[a]||this._pending._deletedItems[a])).valueOf()):!this._isEmpty(this._pending._newItems)||!this._isEmpty(this._pending._modifiedItems)||!this._isEmpty(this._pending._deletedItems)},onSet:function(a,b,d,g){},onNew:function(a,b){},onDelete:function(a){},close:function(a){if(this.clearOnClose){if(this.isDirty())throw Error("dojo.data.ItemFileWriteStore: There are unsaved changes present in the store.  Please save or revert the changes before invoking close.");
this.inherited(arguments)}}})})},"davinci/ve/views/SwitchingStyleView":function(){define("dojo/_base/declare dojo/_base/kernel davinci/lang/ve dijit/lang/_common xide/utils dijit/layout/ContentPane davinci/Runtime davinci/workbench/WidgetLite davinci/ve/widgets/HTMLStringUtil davinci/ve/widgets/WidgetToolBar davinci/ve/widgets/Cascade davinci/ve/widgets/CommonProperties davinci/ve/widgets/WidgetProperties davinci/ve/widgets/EventSelection xide/registry".split(" "),function(p,k,f,e,b,d,n,a,m,h,g,c,
q,A,u){return p("davinci.ve.views.SwitchingStyleView",[a],{_editor:null,_widget:null,_subWidget:null,_titleBarDiv:"\x3cdiv class\x3d'palette_titleBarDiv'\x3e\x3cspan class\x3d'paletteCloseBox'\x3e\x3c/span\x3e\x3cspan class\x3d'titleBarDivTitle'\x3e\x3c/span\x3e\x3c/div\x3e",constructor:function(a,c){},pageTemplate:[{key:"widgetSpecific",className:"maqPropertySection page_editor_only",addCommonPropertiesAtTop:!1,html:"\x3cdiv dojoType\x3d'davinci.ve.widgets.WidgetProperties'\x3e\x3c/div\x3e"},{key:"events",
className:"maqPropertySection page_editor_only",addCommonPropertiesAtTop:!1,pageTemplate:{html:"\x3cdiv dojoType\x3d'davinci.ve.widgets.EventSelection'\x3e\x3c/div\x3e"}},{key:"layout",className:"maqPropertySection",addCommonPropertiesAtTop:!0,pageTemplate:[{display:"width",type:"multi",target:["width"],values:["","auto","100%","200px","10em"]},{display:"height",type:"multi",target:["height"],values:["","auto","100%","200px","10em"]},{html:"\x26nbsp;"},{key:"showMinMax",display:"\x26nbsp;\x26nbsp;\x26nbsp;",
type:"toggleSection",pageTemplate:[{display:"min-height",type:"multi",target:["min-height"],rowClass:"propertiesSectionHidden"},{display:"max-height",type:"multi",target:["max-height"],rowClass:"propertiesSectionHidden"},{display:"min-width",type:"multi",target:["min-width"],rowClass:"propertiesSectionHidden"},{display:"max-width",type:"multi",target:["max-width"],rowClass:"propertiesSectionHidden"},{html:"\x26nbsp;",rowClass:"propertiesSectionHidden"}]},{display:"position",type:"combo",target:["position"],
values:["","absolute","relative"]},{display:"left",type:"multi",target:["left"],values:["","0px","1em"]},{display:"top",type:"multi",target:["top"],values:["","0px","1em"]},{display:"right",type:"multi",target:["right"],values:["","0px","1em"]},{display:"bottom",type:"multi",target:["bottom"],values:["","0px","1em"]},{display:"display",type:"combo",target:["display"],values:["","none","block","inline","inline-block"]},{display:"opacity",type:"multi",target:["opacity"],values:["0","0.5","1.0"]},{display:"box-shadow",
type:"text",target:["box-shadow"],value:["","none","1px 1px rgba(0,0,0,.5)"]},{display:"float",type:"combo",target:["float"],values:["","none","left","right"]},{display:"clear",type:"combo",target:["clear"],values:["","none","left","right","both"]},{display:"overflow",type:"combo",target:["overflow"],values:["","visible","hidden","scroll","auto"]},{display:"z-index",type:"multi",target:["z-index"],values:" auto 0 1 100 -1 -100".split(" ")},{display:"box-sizing",type:"combo",target:["box-sizing","-webkit-box-sizing",
"-ms-box-sizing","-moz-box-sizing"],values:["","content-box","border-box"]}]},{key:"padding",className:"maqPropertySection",addCommonPropertiesAtTop:!0,pageTemplate:[{display:"\x3cb\x3e(padding)\x3c/b\x3e",type:"multi",target:["padding"],values:["","0px","1em"]},{key:"showtrbl",display:"\x26nbsp;\x26nbsp;\x26nbsp;",type:"toggleSection",pageTemplate:[{display:"padding-top",type:"multi",target:["padding-top"],values:["","0px","1em"],rowClass:"propertiesSectionHidden"},{display:"padding-right",type:"multi",
target:["padding-right"],values:["","0px","1em"],rowClass:"propertiesSectionHidden"},{display:"padding-bottom",type:"multi",target:["padding-bottom"],values:["","0px","1em"],rowClass:"propertiesSectionHidden"},{display:"padding-left",type:"multi",target:["padding-left"],values:["","0px","1em"],rowClass:"propertiesSectionHidden"}]}]},{key:"margins",className:"maqPropertySection",addCommonPropertiesAtTop:!0,pageTemplate:[{display:"\x3cb\x3e(margin)\x3c/b\x3e",type:"multi",target:["margin"],values:["",
"0px","1em"]},{key:"showtrbl",display:"\x26nbsp;\x26nbsp;\x26nbsp;",type:"toggleSection",pageTemplate:[{display:"margin-top",type:"multi",target:["margin-top"],values:["","0px","1em"],rowClass:"propertiesSectionHidden"},{display:"margin-right",type:"multi",target:["margin-right"],values:["","0px","1em"],rowClass:"propertiesSectionHidden"},{display:"margin-bottom",type:"multi",target:["margin-bottom"],values:["","0px","1em"],rowClass:"propertiesSectionHidden"},{display:"margin-left",type:"multi",target:["margin-left"],
values:["","0px","1em"],rowClass:"propertiesSectionHidden"}]}]},{key:"background",className:"maqPropertySection",addCommonPropertiesAtTop:!0,pageTemplate:[{display:"background-color",type:"background",target:["background-color"],colorswatch:!0},{display:"background-image",type:"background",target:["background-image"],values:["","none"]},{display:"background-repeat",type:"background",values:["","repeat","repeat-x","repeat-y","no-repeat"],target:["background-repeat"]},{display:"background-position",
type:"background",target:["background-position"],values:";0px 0px;0% 0%;left top;center center;right bottom".split(";")},{display:"background-size",type:"background",target:["background-size"],values:["","auto","contain","cover","100%"]},{display:"background-origin",type:"background",target:["background-origin"],values:["","border-box","padding-box","content-box"]},{display:"background-clip",type:"background",target:["background-clip"],values:["","border-box","padding-box","content-box"]}]},{key:"border",
className:"maqPropertySection",addCommonPropertiesAtTop:!0,pageTemplate:[{display:"\x3cb\x3e(border)\x3c/b\x3e",type:"multi",target:["border"],values:["","none","1px solid black"]},{display:"show",type:"combo",values:["none","props","sides","all"],id:"properties_show_select",onchange:function(a){if("number"==typeof a){var c=function(a,c,b,d,g){for(;c<=b;c++){var e=k.byId(a[c].rowId);c>=d&&c<=g?k.removeClass(e,"propertiesSectionHidden"):k.addClass(e,"propertiesSectionHidden")}};if(this.pageTemplate){a=
this.pageTemplate[a];var b;a&&a.id&&(a=k.byId(a.id))&&(b=a.value);k.isString(b)&&("none"===b?c(this.pageTemplate,2,20,-1,-1):"sides"===b?c(this.pageTemplate,2,20,2,5):"props"===b?c(this.pageTemplate,2,20,6,8):"all"===b&&c(this.pageTemplate,2,20,9,20))}}}},{display:"border-top",type:"multi",target:["border-top"],values:["","none","1px solid black"],rowClass:"propertiesSectionHidden"},{display:"border-right",type:"multi",target:["border-right"],values:["","none","1px solid black"],rowClass:"propertiesSectionHidden"},
{display:"border-bottom",type:"multi",target:["border-bottom"],values:["","none","1px solid black"],rowClass:"propertiesSectionHidden"},{display:"border-left",type:"multi",target:["border-left"],values:["","none","1px solid black"],rowClass:"propertiesSectionHidden"},{display:"border-width",type:"multi",target:["border-width"],values:["","1px","1em"],rowClass:"propertiesSectionHidden"},{display:"border-style",type:"multi",target:["border-style"],values:["","none","solid","dotted","dashed"],rowClass:"propertiesSectionHidden"},
{display:"border-color",type:"color",target:["border-color"],rowClass:"propertiesSectionHidden"},{display:"border-top-width",type:"multi",target:["border-top-width"],values:["","1px","1em"],rowClass:"propertiesSectionHidden"},{display:"border-top-style",type:"multi",target:["border-top-style"],values:["","none","solid","dotted","dashed"],rowClass:"propertiesSectionHidden"},{display:"border-top-color",type:"color",target:["border-top-color"],rowClass:"propertiesSectionHidden"},{display:"border-right-width",
type:"multi",target:["border-right-width"],values:["","1px","1em"],rowClass:"propertiesSectionHidden"},{display:"border-right-style",type:"multi",target:["border-right-style"],values:["","none","solid","dotted","dashed"],rowClass:"propertiesSectionHidden"},{display:"border-right-color",type:"color",target:["border-right-color"],rowClass:"propertiesSectionHidden"},{display:"border-bottom-width",type:"multi",target:["border-bottom-width"],values:["","1px","1em"],rowClass:"propertiesSectionHidden"},
{display:"border-bottom-style",type:"multi",target:["border-bottom-style"],values:["","none","solid","dotted","dashed"],rowClass:"propertiesSectionHidden"},{display:"border-bottom-color",type:"color",target:["border-bottom-color"],rowClass:"propertiesSectionHidden"},{display:"border-left-width",type:"multi",target:["border-left-width"],values:["","1px","1em"],rowClass:"propertiesSectionHidden"},{display:"border-left-style",type:"multi",target:["border-left-style"],values:["","none","solid","dotted",
"dashed"],rowClass:"propertiesSectionHidden"},{display:"border-left-color",type:"color",target:["border-left-color"],rowClass:"propertiesSectionHidden"},{display:"border-collapse",type:"combo",target:["border-collapse"],values:["","separate","collapse"]},{display:"\x3cb\x3e(border-radius)\x3c/b\x3e",type:"multi",target:["border-radius","-moz-border-radius"],values:["","0px","6px"]},{key:"showDetails",display:"",type:"toggleSection",pageTemplate:[{display:"border-top-left-radius",type:"multi",target:["border-top-left-radius",
"-moz-border-radius-topleft"],values:["","0px","6px"],rowClass:"propertiesSectionHidden"},{display:"border-top-right-radius",type:"multi",target:["border-top-right-radius","-moz-border-radius-topright"],values:["","0px","6px"],rowClass:"propertiesSectionHidden"},{display:"border-bottom-right-radius",type:"multi",target:["border-bottom-right-radius","-moz-border-radius-bottomright"],values:["","0px","6px"],rowClass:"propertiesSectionHidden"},{display:"border-bottom-left-radius",type:"multi",target:["border-bottom-left-radius",
"-moz-border-radius-bottomleft"],values:["","0px","6px"],rowClass:"propertiesSectionHidden"}]}]},{key:"fontsAndText",className:"maqPropertySection",addCommonPropertiesAtTop:!0,pageTemplate:[{display:"font",type:"text",target:["font"]},{display:"font-family",type:"font",target:["font-family"]},{display:"size",type:"multi",target:["font-size"],values:["","100%","1em","10px","10pt"]},{display:"color",type:"color",target:["color"]},{display:"font-weight",type:"combo",target:["font-weight"],values:["",
"normal","bold"]},{display:"font-style",type:"combo",target:["font-style"],values:["","normal","italic"]},{display:"text-decoration",type:"combo",target:["text-decoration"],values:["","none","underline","line-through"]},{display:"text-align",type:"combo",target:["text-align"],values:["","left","center","right","justify"]},{display:"vertical-align",type:"combo",target:["vertical-align"],values:["","baseline","top","middle","bottom"]},{display:"white-space",type:"combo",target:["white-space"],values:" normal nowrap pre pre-line pre-wrap".split(" ")},
{display:"text-indent",type:"multi",target:["text-indent"],values:["","0","1em","10px"]},{display:"line-height",type:"multi",target:["line-height"],values:["","normal","1.2","120%"]}]}],buildRendering:function(){this.domNode=k.doc.createElement("div");k.addClass(this.domNode,"propertiesContent");var a;a=""+this._titleBarDiv;for(var c=0;c<this.pageTemplate.length;c++)if(this.pageTemplate[c].title=f[this.pageTemplate[c].key]?f[this.pageTemplate[c].key]:"Key not found",this.pageTemplate[c].pageTemplate)for(var b=
0;b<this.pageTemplate[c].pageTemplate.length;b++)this.pageTemplate[c].pageTemplate[b].key&&(this.pageTemplate[c].pageTemplate[b].display+=f[this.pageTemplate[c].pageTemplate[b].key]?f[this.pageTemplate[c].pageTemplate[b].key]:"Key not found");this.domNode.innerHTML=a+"\x3cdiv class\x3d'propertiesToolBar' dojoType\x3d'davinci.ve.widgets.WidgetToolBar'\x3e\x3c/div\x3e\x3cdiv dojoType\x3d'davinci.ve.widgets.WidgetProperties'\x3e\x3c/div\x3e\x3cdiv class\x3d'propScrollableArea'\x3e\x3ctable class\x3d'propRootDetailsContainer'\x3e\x3ctr\x3e\x3ctd class\x3d'propPaletteRoot'\x3e";
this.inherited(arguments)},_widgetValuesChanged:function(a){var c=this._currentPropSection;if(c){for(var b=!1,d=0;d<this.pageTemplate.length;d++)if(this.pageTemplate[d].key==c){b=!0;break}if(b)for(c=this._getVisibleCascade(d),b=0;b<c.length;b++)c[b]._widgetValuesChanged(a)}},_getVisibleCascade:function(a){if(a)return this.pageTemplate[a].cascade;a=[];var c=this._currentPropSection;if(c)for(var b=0;b<this.pageTemplate.length;b++)if(this.pageTemplate[b].key==c){a=a.concat(this.pageTemplate[b].cascade);
break}return a},_updatePaletteValues:function(a){if(this._editor){var c=a[0];this._subwidget=(this._widget=c)&&c.subwidget;this.setReadOnly(!(this._widget||this._subwidget));for(var c=this._getVisibleCascade(),b=0;b<c.length;b++)c[b]._widgetSelectionChanged(a)}},_widgetSelectionChanged:function(a){!0!==a.isFake&&this._updatePaletteValues(a.selection)},_stateChanged:function(){this._updatePaletteValues(this._widget?[this._widget]:[])},_widgetPropertiesChanged:function(a){this._widget&&this._widget.type!==
a[0].type||this._updatePaletteValues(a)},_titlePaneOpen:function(a){a=this._getVisibleCascade(a);for(var c=0;c<a.length;c++)a[c]._editorSelected({editor:this._editor})},startup:function(){this.domNode.style.height="100%";this._editor=n.currentEditor;this.inherited(arguments);for(var a=0;a<this.pageTemplate.length;a++){var c=this.pageTemplate[a];if(c.pageTemplate)for(var b=0;b<c.pageTemplate.length;b++){var d=c.pageTemplate[b];d.onchange&&d.id&&k.connect(k.byId(d.id),"onchange",k.hitch(c,d.onchange,
b))}}for(a=0;a<this.pageTemplate.length;a++)this.pageTemplate[a].cascade=[];try{this.setReadOnly(!0)}catch(r){logError(r,"set read only crashed ! "+r)}this.onEditorSelected();this.subscribe("/davinci/ui/widgetValuesChanged",k.hitch(this,this._widgetValuesChanged));this.subscribe("/davinci/ui/widgetPropertiesChanged",k.hitch(this,this._widgetPropertiesChanged));this.subscribe("/davinci/ui/editorSelected",k.hitch(this,this._editorSelected));this.subscribe("/davinci/ui/widgetSelected",k.hitch(this,this._widgetSelectionChanged));
this.subscribe("/davinci/states/state/changed",k.hitch(this,this._stateChanged));this.subscribe("/maqetta/appstates/state/changed",k.hitch(this,this._stateChanged));this.subscribe("/davinci/ui/initialPerspectiveReady",k.hitch(this,this._initialPerspectiveReady));this.subscribe("/davinci/workbench/ready",k.hitch(this,this._workbenchReady))},setReadOnly:function(a){for(var c=0;c<this.pageTemplate.length;c++){var b=this.pageTemplate[c].pageTemplate;if(b)for(var d=0;d<b.length;d++){var g=b[d].widget;
g?g.set("readOnly",a):(g=b[d].domNode)&&k.attr(g,"disabled",a)}}},_modelEntryById:function(a){for(var c=0;c<this.pageTemplate.length;c++){var b=this.pageTemplate[c].pageTemplate;if(b)for(var d=0;d<b.length;d++)if(a==b[d].id)return b[d]}},_editorSelected:function(a){this._editor=a.editor;this.onEditorSelected(this._editor);a=this.tabContainer;this.getParent();var c=a.selectedChildWidget||a.getSelected(),b=!1,d=k.query(".maqPropertySection",a.domNode);this._editor?"davinci.ve.PageEditor"!=this._editor.declaredClass&&
"davinci.ve.themeEditor.ThemeEditor"!=this._editor.declaredClass?d.forEach(function(a){dijit.byNode(a)==c&&(b=!0)}):(d.forEach(function(a){}),"davinci.ve.themeEditor.ThemeEditor"==this._editor.declaredClass&&k.query(".page_editor_only",a.domNode).forEach(function(a){dijit.byNode(a)==c&&(b=!0)})):(d.forEach(function(a){dijit.byNode(a)}),b=!0);b&&this._selectFirstVisibleTab()},onEditorSelected:function(){this._subWidget=this._widget=null;if(this._oldClassName)if(this.domNode)k.removeClass(this.domNode.parentNode.parentNode,
this._oldClassName);else{console.error("have no dom node ! : "+this.id);return}if(this._editor)if(this._editor&&this._editor.editorID&&(this._oldClassName=this._editor.editorID.replace(/\./g,"_"),this.domNode?k.addClass(this.domNode.parentNode.parentNode,this._oldClassName):console.error("have no dom node !")),this.domNode){for(var a=this._currentPropSection,c=k.query(".propSectionButton",this.domNode),b=0;b<c.length;b++){var d=c[b];this._editor&&this._editor.supports&&this._editor.supports("propsect_"+
this.pageTemplate[b].key)?k.removeClass(d,"dijitHidden"):(k.addClass(d,"dijitHidden"),a==this.pageTemplate[b].key&&m.showRoot())}a=[];for(b=0;b<this.pageTemplate.length;b++)(c=this.pageTemplate[b].cascade)&&(a=a.concat(c));for(b=0;b<a.length;b++)c=a[b],c._editorSelected&&c._editorSelected({editor:this._editor})}else console.error("have no dom node !")},_destroyContent:function(){var a=this.containerNode||this.domNode;for(k.forEach(k.query("[widgetId]",a).map(dijit.byNode),function(a){a.destroy()});a.firstChild;)k._destroyElement(a.firstChild);
k.forEach(this._tooltips,function(a){a.destroy()});this._tooltips=void 0;this._destroyHandles()},sectionTitleFromKey:function(a){for(var c=0;c<this.pageTemplate.length;c++)if(this.pageTemplate[c].key==a)return this.pageTemplate[c].title},_initialPerspectiveReady:function(){var a=null;if(!this._alreadySplitIntoMultipleTabs){var c=this.tabContainer;k.addClass(c.domNode,"propRootDetailsContainer");k.addClass(c.domNode,"propertiesContent");for(var g=0;g<this.pageTemplate.length;g++){var a=this.pageTemplate[g].key,
e=this.pageTemplate[g].title,h=this.pageTemplate[g].className;h||(h="");var n=this._titleBarDiv,n=n+"\x3cdiv class\x3d'propertiesToolBar' dojoType\x3d'davinci.ve.widgets.WidgetToolBar'\x3e\x3c/div\x3e",n=n+("\x3cdiv class\x3d'cascadeBackButtonDiv'\x3e\x3cbutton class\x3d'btn-info' onclick\x3d'davinci.ve.widgets.HTMLStringUtil.showSection(\""+a+'","'+e+"\")'\x3e"+e+" "+f.properties+"\x3c/button\x3e\x3c/div\x3e"),a=m.generateTemplate(this.pageTemplate[g]),a=n+a;0==g?(a=this,a.set("title",e),k.addClass(a.domNode,
h)):(n=c.createTab(e,null,null,null,{"class":h,delegate:this}),a=b.addWidget(d,{title:e,content:a,"class":h,delegate:this},null,n,!1),n.cp=a,n._maqPropGroup=this.pageTemplate[g].key,n.add(a,null,!1));a._maqPropGroup=this.pageTemplate[g].key;e=k.query(".paletteCloseBox",a.domNode);0<e.length&&k.connect(e[0],"click",this,function(a){davinci.Workbench.collapsePaletteContainer(a.currentTarget)})}for(e=0;e<this.pageTemplate.length;e++)if(this.pageTemplate[e].cascade=[],h=this.pageTemplate[e].pageTemplate){for(g=
0;g<h.length;g++)n=h[g].id,(a=dijit.byId(n))?h[g].widget=a:(a=k.byId(n))&&(h[g].domNode=a);k.query("#"+this.pageTemplate[e].id+" .CascadeTop").forEach(function(a){return function(c){c=dijit.byId(c.id);a.cascade.push(c)}}(this.pageTemplate[e]))}c._on("selectChild",function(a){a._maqPropGroup&&(this._currentPropSection=a._maqPropGroup,a=(a=this._editor&&this._editor.getContext?this._editor.getContext():null)&&a.getSelection?a.getSelection():[],this._updatePaletteValues(a),m._initSection(this._currentPropSection))}.bind(this));
this._alreadySplitIntoMultipleTabs=!0}},_workbenchReady:function(){this._updateToolBars()},_updateToolBars:function(){k.query(".propertiesToolBar").forEach(function(a){this._editor&&"davinci.ve.PageEditor"==this._editor.declaredClass?(k.removeClass(a,"dijitHidden"),a.style.display=""):k.addClass(a,"dijitHidden")}.bind(this))},_selectFirstVisibleTab:function(){var a=this.getParent();if(a&&a.getChildren)for(var c=a.getChildren(),b=0;b<c.length;b++){var d=c[b];if("none"!=d.controlButton.domNode.style.display){a._maqDontExpandCollapse=
!0;a.selectChild(d);delete a._maqDontExpandCollapse;break}}}})})},"davinci/workbench/WidgetLite":function(){define(["dojo/_base/declare","dijit/_WidgetBase","dojo/parser","xide/mixins/EventedMixin"],function(p,k,f,e){return p("davinci.workbench.WidgetLite",[k,e],{buildRendering:function(){this.inherited(arguments);/dojotype/i.test(this.domNode.innerHTML||"")&&(this._startupWidgets=dojo.parser.parse(this.domNode,{noStart:!this._earlyTemplatedStartup,inherited:{dir:this.dir,lang:this.lang}}))},_destroyContent:function(){var b=
this.containerNode||this.domNode;for(dojo.forEach(dojo.query("[widgetId]",b).map(dijit.byNode),function(b){b.destroy()});b.firstChild;)dojo._destroyElement(b.firstChild);dojo.forEach(this._tooltips,function(b){b.destroy()});delete this._tooltips;this._destroyHandles()},startup:function(){dojo.forEach(this._startupWidgets,function(b){b&&!b._started&&b.startup&&b.startup()});this.inherited(arguments)}})})},"davinci/ve/widgets/HTMLStringUtil":function(){define("davinci/Runtime ./FontDataStore ./FontComboBox ./MultiInputDropDown dijit/form/ComboBox ./MetaDataStore ./ColorPicker ./Background".split(" "),
function(p,k){var f=dojo.getObject("davinci.ve.widgets.HTMLStringUtil",!0);dojo.mixin(f,{__id:0,idPrefix:"davinci_ve_widgets_properties_generated",_currentPropSection:null,animSS:null,animRuleIndex:{},getCurrentPropSection:function(){return this._currentPropSection},getId:function(){return this.idPrefix+this.__id++},injectId:function(e,b){var d=e.indexOf("\x3e");return d?e.substring(0,d)+" id\x3d'"+b+"'"+e.substring(d,e.length):"\x3cspan id\x3d'"+b+"'\x3e"+e+"\x3c/span\x3e"},getEditor:function(e){function b(a){var b=
{};b.value="undefined"!=typeof a.value&&null!==a.value?a.value:a;b.title=a.title||b.value;return b}var d=e.type,f=this.getId();e.id=f;var a=e.disabled?" disabled\x3d'true' ":"";switch(d){case "multi":return d="",e.values&&(d="data\x3d'"+dojo.toJson(dojo.map(e.values,function(a){return{value:a}}))+"'"),"\x3cdiv dojoType\x3d'davinci.ve.widgets.MultiInputDropDown' "+d+"  class\x3d'propertyPaneEditablevalue' style\x3d'display:inline-block; width:100%;' id\x3d'"+f+"'"+a+"\x3e\x3c/div\x3e";case "boolean":return"\x3cinput type\x3d'checkbox' class\x3d'propertyPaneEditablevalue' style\x3d'display:inline-block;margin-left:5px' id\x3d'"+
f+"'\x3e\x3c/input\x3e";case "comboEdit":e=e.values;f="\x3cselect dojoType\x3d'dijit.form.ComboBox' autoComplete\x3d'false' style\x3d'display:inline-block; width:100%;' id\x3d'"+f+"'"+a+"\x3e";for(a=0;a<e.length;a++)d=b(e[a]),f+="\x3coption class\x3d'option' value\x3d'"+d.value+"'\x3e"+d.title+"\x3c/option\x3e";return f+"\x3c/select\x3e";case "combo":e=e.values;f="\x3cselect class\x3d'form-control input-transparent' style\x3d'display:inline-block; width:100%;' id\x3d'"+f+"'"+a+"\x3e";for(a=0;a<e.length;a++)d=
b(e[a]),f+="\x3coption class\x3d'option' value\x3d'"+d.value+"'\x3e"+d.title+"\x3c/option\x3e";return f+"\x3c/select\x3e";case "font":return f="\x3cdiv dojoType\x3d'davinci.ve.widgets.FontDataStore' jsId\x3d'"+f+"_fontStore'\x3e"+("\x3cdiv dojoType\x3d'davinci.ve.widgets.FontComboBox' value\x3d'"+k.fonts[0].value+"' store\x3d'"+f+"_fontStore'  id\x3d'"+f+"' class\x3d'propertyPaneEditablevalue' style\x3d'display:inline-block; width:100%;'\x3e\x3c/div\x3e");case "stateold":return"\x3cdiv dojoType\x3d'davinci.ve.widgets.MetaDataStore' jsId\x3d'davinci.properties.event"+
f+"_Store'\x3e"+("\x3cdiv dojoType\x3d'dijit.form.ComboBox' id\x3d'"+f+"'store\x3d'davinci.properties.event"+f+"_Store' class\x3d'propertyPaneEditablevalue' style\x3d'display:inline-block; width:100%;' autoComplete\x3d'false'\x3e\x3c/div\x3e");case "color":return"\x3cdiv class\x3d'propertyPaneEditablevalue' dojoType\x3d'davinci.ve.widgets.ColorPicker' id\x3d'"+f+"' \x3e\x3c/div\x3e";case "background":return d=dojo.isArray(e.values)?" data\x3d'"+dojo.toJson(e.values)+"'":"",a=dojo.isArray(e.target)?
e.target[0]:e.target,f="\x3cdiv dojoType\x3d'davinci.ve.widgets.Background' id\x3d'"+f+"'"+d+(" propname\x3d'"+a+"'")+(e.colorswatch?" colorswatch\x3d'true'":"")+"\x3e\x3c/div\x3e";case "border":case "number":case "object":case "text":case "array":case "widgetState":case "iconClass":case "state":case "string":if("date"==e.format)return"\x3cdiv class\x3d'propertyPaneEditablevalue' dojoType\x3d'dijit.form.DateTextBox' id\x3d'"+f+"'\x3e\x3c/input\x3e";if("time"==e.format)return"\x3cdiv class\x3d'propertyPaneEditablevalue' dojoType\x3d'dijit.form.TimeTextBox' id\x3d'"+
f+"'\x3e\x3c/input\x3e";default:return f=e.data&&!0===e.data.readonly?"\x3cinput readonly type\x3d'text' class\x3d'form-control input-transparent propertyPaneEditablevalue' style\x3d'display:inline-block; width:100%;' id\x3d'"+f+"'\x3e\x3c/input\x3e":"\x3cinput type\x3d'text' class\x3d'form-control input-transparent propertyPaneEditablevalue' style\x3d'display:inline-block; width:100%;' id\x3d'"+f+"'\x3e\x3c/input\x3e"}},generateTable:function(e,b){var d=b?b.rowsOnly:!1,f=b&&b.zeroSpaceForIncrDecr?
"0px":"20px";b="";if(e.html)return e.id=this.getId(),this.injectId(e.html,e.id);f="\x3ctable class\x3d'property_table_stretchable' border\x3d'0' width\x3d'100%' align\x3d'center' cellspacing\x3d'0' cellpadding\x3d'0'\x3e\x3ccolgroup\x3e\x3ccol style\x3d'width:6px;' /\x3e\x3ccol class\x3d'gap02' /\x3e\x3ccol class\x3d'gap03' /\x3e"+("\x3ccol style\x3d'width:"+f+";' /\x3e")+"\x3ccol style\x3d'width:6px;' /\x3e\x3c/colgroup\x3e";d||(b+=f);for(var a=0;a<e.length;a++)if(e[a].widgetHtml)e[a].id=this.getId(),
e[a].rowId=this.getId(),b+="\x3ctr id\x3d'"+e[a].rowId+"'",e[a].rowClass&&(b+=" class\x3d'"+e[a].rowClass+"'"),b+="\x3e",b+="\x3ctd colspan\x3d'5' width\x3d'100%'\x3e",b+=this.injectId(e[a].widgetHtml,e[a].id),b+="\x3c/td\x3e",b+="\x3c/tr\x3e";else if(e[a].html)e[a].id=this.getId(),e[a].rowId=this.getId(),b+="\x3ctr id\x3d'"+e[a].rowId+"'",b+=" class\x3d'cssPropertySection",e[a].rowClass&&(b+=" "+e[a].rowClass),b+="'\x3e",b+="\x3ctd colspan\x3d'5' width\x3d'100%'\x3e",b+=e[a].html,b+="\x3c/td\x3e",
b+="\x3c/tr\x3e";else if("toggleSection"==e[a].type){b+="\x3ctr id\x3d'"+e[a].id+"'  class\x3d'cssPropertySection'\x3e\x3ctd colspan\x3d'5'\x3e";for(var m="",h=this.generateTable(e[a].pageTemplate,{rowsOnly:!0}),g=0;g<e[a].pageTemplate.length;g++)e[a].pageTemplate[g].rowId&&(m+="dojo.toggleClass('"+e[a].pageTemplate[g].rowId+"','propertiesSectionHidden');"),e[a].pageTemplate[g].cascadeSectionRowId&&(m+="if(this.checked){dojo.removeClass('"+e[a].pageTemplate[g].cascadeSectionRowId+"','propertiesSectionHidden');}else{{dojo.addClass('"+
e[a].pageTemplate[g].cascadeSectionRowId+"','propertiesSectionHidden');}}");b+="\x3cinput type\x3d'checkbox' onclick\x3d\""+m+'"\x3e\x3c/input\x3e';b+=e[a].display;b+="\x3c/td\x3e\x3c/tr\x3e";b+=h}else e[a].display?(e[a].toggleCascade=this.getId(),e[a].cascadeSection=this.getId(),e[a].rowId=this.getId(),e[a].cascadeSectionRowId=this.getId(),b+="\x3ctr id\x3d'"+e[a].rowId+"'",b+=" class\x3d'cssPropertySection",e[a].rowClass&&(b+=" "+e[a].rowClass),b+="'",b+=" propName\x3d'"+e[a].display+"'",b+="\x3e",
b+="\x3ctd/\x3e",b+="\x3ctd class\x3d'propertyDisplayName'\x3e"+e[a].display+":\x26nbsp;\x3c/td\x3e",b+="\x3ctd class\x3d'propertyInputField propertyInputField"+e[a].type+"' \x3e"+this.getEditor(e[a])+"\x3c/td\x3e",b+="\x3ctd class\x3d'propertyExtra' nowrap\x3d'true'\x3e",b+="\x3ctd class\x3d'propertyExtra2' nowrap\x3d'true'\x3e",e[a].target&&!e[a].hideCascade&&(b+="\x3cdiv width\x3d'100%'\x3e\x3cbutton class\x3d'showCss propertyButton' id\x3d'"+e[a].toggleCascade+"'",b+=' onClick\x3d"davinci.ve.widgets.HTMLStringUtil.showProperty(',
b+="'"+e[a].rowId+"'",b+=')"\x3e\x26gt;\x3c/button\x3e',b+="\x3c/div\x3e"),b+="\x3ctd/\x3e",b+="\x3c/tr\x3e",e[a].target&&!e[a].hideCascade&&(m="{'cascadeSectionRowId':\""+e[a].cascadeSectionRowId+"\",'toggleCascade':\""+e[a].toggleCascade+'"}',b+="\x3ctr id\x3d'"+e[a].cascadeSectionRowId+"' class\x3d'cssCascadeSection cascadeRowHidden'\x3e",b+="\x3ctd colspan\x3d'5' width\x3d'100%' class\x3d'showCascadeDiv'\x3e\x3cdiv dojoType\x3d'davinci.ve.widgets.Cascade' toggleClasses\x3d"+m+" target\x3d'"+dojo.toJson(e[a].target)+
"' targetField\x3d'\""+e[a].id+"\"' id\x3d'"+e[a].cascadeSection+"'\x3e\x3c/div\x3e\x3c/td\x3e\x3c/tr\x3e")):(b+="\x3c/table\x3e",b+=this.getEditor(e[a]),b+=f);d||(b+="\x3c/table\x3e");return b},generateTemplate:function(e){var b="";e.pageTemplate?(e.key&&(e.id=this.getId(),b="\x3cdiv class\x3d'propGroup' id\x3d'"+e.id+"' propGroup\x3d'"+e.key+"'\x3e"),b+=this.generateTable(e.pageTemplate),b+="\x3c/div\x3e"):e.html?b+=e.html:e.widgetHtml&&(e.id=this.getId(),b+=this.injectId(e.widgetHtml,e.id));return b},
stylesheetHref:"propview.css",animShowSectionClass:"propRootDetailsContainer",animShowSectionClassSelector:".propRootDetailsContainer",animShowDetailsClass:"property_table_stretchable",animShowDetailsClassSelector:".property_table_stretchable",showPropAnimClasses:["propRowFadeIn","propRowFadeOut","propRowTransparent","propRowOpaque","propRowHidden"],showRoot:function(){this._hideSectionShowRoot();this._currentPropSection=null;return!1},showSection:function(e,b){this._initSection(e);return!1},showProperty:function(e){function b(c){dojo.disconnect(x);
dojo.disconnect(z);d();var b=a._findRule(a.animShowDetailsClassSelector);b?(c=b.ss,b=b.ruleIndex,c.deleteRule(b),c.insertRule(a.animShowDetailsClassSelector+" { margin-top:0px; }",b),f()):console.error("HTMLStringUtil showProperty: transEnd: rule not found")}var d=function(){for(var c=0;c<g.children.length;c++){var b=g.children[c];1==b.nodeType&&dojo.hasClass(b,"cssPropertySection")&&(b==h?a._addRemoveClasses(b,m,[]):a._addRemoveClasses(b,m,["propRowHidden"]))}},f=function(){q&&(dojo.removeClass(q,
"cascadeRowHidden"),dojo.addClass(q,"cascadeRowTransparent"),setTimeout(function(){dojo.removeClass(q,"cascadeRowTransparent");dojo.addClass(q,"cascadeRowFadeIn")},1))};dojo.addClass(dojo.byId("root"),"showingCascade");var a=this,m=this.showPropAnimClasses,h=dojo.byId(e),g=h.parentNode,c=a._searchSiblingsByTagClass(g.children[0],"TR","cssPropertySection"),q=a._searchSiblingsByTagClass(h.nextSibling,"TR","cssCascadeSection");e=a._searchUpByTagClass(g,"TABLE",a.animShowDetailsClass);var k=a._searchUpByTagClass(h,
"DIV","propGroup"),k=dojo.attr(k,"propGroup");dojo.attr(h,"propName");require("davinci/ve/views/SwitchingStyleView").prototype.sectionTitleFromKey(k);if(p.supportsCSS3Transitions){var c=dojo.marginBox(c),c=dojo.marginBox(h).t-c.t,u=a._findRule(a.animShowDetailsClassSelector);if(u){var k=u.ss,u=u.ruleIndex,x=dojo.connect(e,"webkitTransitionEnd",b),z=dojo.connect(e,"transitionend",b);k.deleteRule(u);k.insertRule(a.animShowDetailsClassSelector+" { margin-top:-"+c+"px; opacity:.99; -webkit-transition: all .6s ease; -moz-transition: all .6s ease; }",
u);e=!1;for(c=0;c<g.children.length;c++)k=g.children[c],1==k.nodeType&&dojo.hasClass(k,"cssPropertySection")&&(k==h?(a._addRemoveClasses(k,m,["propRowFadeIn"]),e=!0):e?a._addRemoveClasses(k,m,["propRowHidden"]):a._addRemoveClasses(k,m,["propRowTransparent"]))}else console.error("HTMLStringUtil showProperty: transEnd: rule not found")}else d(),f()},_initSection:function(e){for(var b=this.showPropAnimClasses,d=this._getRootTD(),f=dojo.query(".propGroup",d),a,d=0;d<f.length;d++){var m=f[d];dojo.attr(m,
"propGroup")==e?(dojo.removeClass(m,"dijitHidden"),a=m):dojo.addClass(m,"dijitHidden")}f=dojo.query(".cssPropertySection",a);for(d=0;d<f.length;d++)this._addRemoveClasses(f[d],b,[]);b=dojo.query(".cssCascadeSection",a);for(d=0;d<b.length;d++)dojo.addClass(b[d],"cascadeRowHidden");this._currentPropSection=e;dojo.removeClass(dojo.byId("root"),"showingCascade")},_hideSectionShowRoot:function(){var e=this._getRootTD();dojo.removeClass(e,"dijitHidden")},_findRule:function(e){function b(a,d){for(var e=
0;e<a.cssRules.length;e++){var g=a.cssRules[e];if(3===g.type){if(g=b(g.styleSheet,d))return g}else if(g.selectorText==d)return{ss:a,ruleIndex:e}}}if(this.animSS&&"number"==typeof this.animRuleIndex[e]){var d=this.animRuleIndex[e];if(this.animSS.cssRules[d].selectorText==e)return{ss:this.animSS,ruleIndex:d}}for(d=0;d<document.styleSheets.length;d++){var f=b(document.styleSheets[d],e);if(f)return this.animSS=f.ss,this.animRuleIndex[e]=f.ruleIndex,f}return null},_addRemoveClasses:function(e,b,d){for(var f=
[],a=0;a<b.length;a++){for(var m=!1,h=0;h<d.length;h++)if(b[a]==d[h]){m=!0;break}m||f.push(b[a])}for(a=0;a<f.length;a++)dojo.removeClass(e,f[a]);for(a=0;a<d.length;a++)dojo.addClass(e,d[a])},_searchUpByTagClass:function(e,b,d){for(;null!=e&&"BODY"!=e.nodeName;){if(e.nodeName==b&&(!d||dojo.hasClass(e,d)))return e;e=e.parentNode}return null},_searchSiblingsByTagClass:function(e,b,d){for(;null!=e;){if(e.nodeName==b&&(!d||dojo.hasClass(e,d)))return e;e=e.nextSibling}return null},_getRootDetailsContainer:function(){this._rootDetailsContainer||
(this._rootDetailsContainer=dojo.query(this.animShowSectionClassSelector)[0]);return this._rootDetailsContainer},_getRootTD:function(){var e=this._getRootDetailsContainer();this._rootTD||(this._rootTD=dojo.query(".propPaletteRoot",e)[0]);return this._rootTD}});return f})},"davinci/ve/widgets/FontDataStore":function(){define(["dojo/_base/declare","dojo/data/ItemFileReadStore","davinci/lang/ve","dijit/lang/_common"],function(p,k){p=p("davinci.ve.widgets.FontDataStore",k,{_allValues:[],constructor:function(f){this.setValues(f.values||
davinci.ve.widgets.FontDataStore.fonts)},setValues:function(f){this._allValues=this._allValues.concat(f);this._jsonData={label:"name",identifier:"value",items:this._allValues};this._loadFinished=!1},contains:function(f){for(var e=0;e<this._allValues.length;e++)if(this._allValues[e].value==f||this._allValues[e].name==f)return e;return!1},clearValues:function(){this._allValues=[];this._loadFinished=!1},lookupValue:function(f){f=this.contains(f);return this._allValues[f].value[0]}});return dojo.mixin(p,
{fonts:[{name:"",value:""},{name:"Arial,Helvetica,sans-serif",value:"Arial,Helvetica,sans-serif"},{name:"'Arial Black,Gadget',sans-serif",value:"'Arial Black,Gadget',sans-serif"},{name:"'Comic Sans MS',cursive",value:"'Comic Sans MS',cursive"},{name:"'Courier New',Courier,monospace",value:"'Courier New',Courier,monospace"},{name:"Geneva,Tahoma,sans-serif",value:"Geneva,Tahoma,sans-serif"},{name:"Georgia,serif",value:"Georgia,serif"},{name:"'Helvetica,Trebuchet MS',sans-serif",value:"'Helvetica,Trebuchet MS',sans-serif"},
{name:"Impact,Charcoal,sans-serif",value:"Impact,Charcoal,sans-serif"},{name:"'Lucida Console',Monaco,monospace",value:"'Lucida Console',Monaco,monospace"},{name:"'Lucida Sans Unicode','Lucida Grande',sans-serif",value:"'Lucida Sans Unicode','Lucida Grande',sans-serif"},{name:"'Lucida Console', Monaco, monospace",value:"'Lucida Console', Monaco, monospace"},{name:"'Palatino Linotype','Book Antiqua',Palatino,serif",value:"'Palatino Linotype','Book Antiqua',Palatino,serif"},{name:"Symbol",value:"Symbol"},
{name:"Tahoma,Geneva,sans-serif",value:"Tahoma,Geneva,sans-serif"},{name:"'Times New Roman',Times,serif",value:"'Times New Roman',Times,serif"},{name:"'Trebuchet MS',Helvetica,sans-serif",value:"'Trebuchet MS',Helvetica,sans-serif"},{name:"Verdana,Geneva,sans-serif",value:"Verdana,Geneva,sans-serif"},{name:"Webdings",value:"Webdings"},{name:"Wingdings, 'Zapf Dingbats'",value:"Wingdings, 'Zapf Dingbats'"},{name:"'Zapf Dingbats', Wingdings",value:"'Zapf Dingbats', Wingdings"},{name:"sans-serif",value:"sans-serif"},
{name:"serif",value:"serif"},{name:"monospace",value:"monospace"},{name:"cursive",value:"cursive"},{name:"LCD",value:"LCD"}]})})},"davinci/ve/widgets/FontComboBox":function(){define(["dojo/_base/declare","dijit/form/ComboBox","davinci/lang/ve","dijit/lang/_common"],function(p,k){return p("davinci.ve.widgets.FontComboBox",k,{_getValueAttr:function(){if(this.store)for(var f=0;f<this.store._allValues.length;f++){var e=this.store._allValues[f];if(e.name[0]==this.value)return e.value[0]}return this.value},
_setValueAttr:function(f){this.store&&f?this.store.fetch({query:{value:f},onComplete:function(e,b){1>e.length?this.inherited("_setValueAttr",[f]):(this.inherited("_setValueAttr",[e[0].name[0]]),this.item=e[0])}.bind(this),onError:function(){this.inherited("_setValueAttr",[f])}.bind(this)}):this.inherited("_setValueAttr",[f])}})})},"davinci/ve/widgets/MultiInputDropDown":function(){define("dojo/_base/declare xide/widgets/TemplatedWidgetBase xide/form/Select dcl/dcl xide/data/TreeMemory xide/data/ObservableStore dstore/Trackable xide/factory dojo/_base/lang".split(" "),
function(p,k,f,e,b,d,n,a,m){var h=e(k,{numberDelta:1,templateString:"\x3cdiv \x3e\x3c/div\x3e",insertPosition:1,declaredClass:"davinci.ve.widgets.MultiInputDropDown",data:null,divider:"---",postCreate:function(){},get:function(a){return"value"===a&&this._dropDown?this._getValueAttr():""},startup:function(){var g=dojo.doc.createElement("div");this._run={};var c=this;this.data?(this.data.push({value:h.divider}),this.data.push({label:"Remove Value",value:"Remove Value",run:function(){this.set("value",
"",!1);c._dropDown.set("value","",!0)}})):this.data=[{value:"auto"},{value:"0px"},{value:h.divider},{value:"Remove Value",run:function(){this.set("value","",!1);c._dropDown.set("value","")}},{value:h.divider},{value:"Help",run:function(){alert("help!")}}];for(var e=[],m=0;m<this.data.length;m++)e.push(this.data[m].value),this.data[m].run&&(this._run[this.data[m].value]=this.data[m].run);var k=[];_.each(this.data,function(a){k.push({label:a.label||a.value,value:a.value,run:a.run})});this._dropDown=
new f({EDITABLE_CLASS:f.TYPEAHEAD,storeClass:p("driverStore",[b,n,d],{setValues:function(a){var c=[],b=0;a&&(this._values=a);dojo.forEach(this.data,dojo.hitch(this,function(a){c.push({label:a.label,value:a.value,id:b++})}));this._jsonData={identifier:"id",items:c};this.setData(c);this.root._emit("update",{target:null})},modifyItem:function(a,b){for(var d=0;d<this.data.length;d++)this.data[d].value===a&&(this.data[d].value=b);c._dropDown.set("value",b);this.setValues()},insert:function(a,c){this.data.splice(a,
0,{value:c,label:c});this.setValues()},contains:function(a){for(var c=0;c<this.data.length;c++)if(this.data[c].value==a)return!0;return!1},findSimilar:function(a){if(a=(new RegExp(/(\D*)(-?)(\d+)(\D*)/)).exec(a)){a=new RegExp((0<a.length?a[1]:"")+"(-?)(\\d+)"+(3<a.length?a[4]:""));for(var c=0;c<this.data.length;c++)if(a.test(this.data[c].value))return this.data[c].value}},getItemNumber:function(a){return this.data[a]},clearValues:function(){this._loadFinished=!1}}),required:!1,title:"",editable:!0,
options:k,selectOptions:{container:"body",liveSearch:!0,createItem:!0,createItemText:"Create: {0}"},userData:{}});this._dropDown.startup();this._store=this._dropDown.store;this._plus=a.createButton(this._dropDown.previewNode,"fa-plus","btn-default btn-xs2",null,"");this._minus=a.createButton(this._dropDown.button0,"fa-minus","btn-default btn-xs2",null,"");e=dojo.create("div",{"class":"propInputWithIncrDecrButtons"});e.appendChild(this._dropDown.domNode);g.appendChild(e);e=dojo.doc.createElement("div");
dojo.style(e,"clear","both");g.appendChild(e);this._currentValue=this._store.data[0];dojo.connect(this._dropDown,"onKeyUp",this,"_updateSpinner");var x=this;this._dropDown._on?this._dropDown._on("change",function(a){x._onChange(a)}):dojo.connect(this._dropDown,"onChange",this,"_onChange");dojo.connect(this._plus,"onclick",this,"_plusButton",!1);dojo.connect(this._minus,"onclick",this,"_minusButton",!1);this._updateSpinner();this.domNode.appendChild(g);this.add(this._dropDown);this.add(this._store)},
_setReadOnlyAttr:function(a){this._isReadOnly=a;this._dropDown&&(this._dropDown.set("disabled",a),dojo.attr(this._plus,"disabled",a),dojo.attr(this._minus,"disabled",a))},onChange:function(a){},_getValueAttr:function(){return this._dropDown.get("value")},_setValueAttr:function(a,c){this._dropDown.set("value",a,!0);this._currentValue=this._dropDown.get("value");!1!==c&&this._onChange(this._currentValue);if(!c)this.onChange()},_changeValue:function(a,c){a=a.split(" ");for(var b="",d=0;d<a.length;d++){0<
d&&(b+=" ");var g=a[d].match(/([-\d\.]+)([a-zA-Z%]*)/);if(g)if(1==g.length)b+=g[0];else for(var e=1;e<g.length;e++)b=isNaN(g[e])||""==g[e]?b+g[e]:b+(parseFloat(g[e])+c);else b+=a[d]}return b},_plusButton:function(){var a=this._dropDown.get("value"),c=this._changeValue(a,this.numberDelta);this._store.modifyItem(a,c);this._dropDown.set("value",c);this._onChange(c)},_minusButton:function(){var a=this._dropDown.get("value"),c=this._changeValue(a,-1*this.numberDelta);this._store.modifyItem(a,c);this._dropDown.set("value",
c);this._onChange(c)},_updateSpinner:function(){var a=this._dropDown.get("value"),a=/(-?)(\d+){1}/.exec(a);this._minus.disabled=a&&a.length?this._plus.disabled=!1:this._plus.disabled=!0;return!0},_onChange:function(a){var c;a in this._run?(this._dropDown.get("value",this._store.getItemNumber(0)),dojo.hitch(this,this._run[a])()):a==h.divider?this._dropDown.get("value",this._store.getItemNumber(0)):(c=this._store.findSimilar(a))?this._store.modifyItem(c,a):this._store.contains(a)||this._store.insert(this.insertPosition,
a);this._currentValue!=this._dropDown.get("value")&&(this._currentValue=this._dropDown.get("value"),this.onChange(a));this._updateSpinner()}});h.divider="---";m.setObject("davinci.ve.widgets.MultiInputDropDown",h);return h})},"davinci/ve/widgets/MetaDataStore":function(){define(["dojo/_base/declare","dojo/data/ItemFileReadStore","davinci/lang/ve","dijit/lang/_common"],function(p,k){return p("davinci.ve.widgets.MetaDataStore",k,{_allValues:[],constructor:function(f){this.setValues(f&&f.values||[])},
setValues:function(f){dojo.mixin(this._allValues,f);var e=[];dojo.forEach(this._allValues,function(b){e.push({name:b,value:b})});this._jsonData={identifier:"name",items:e};this._loadFinished=!1},contains:function(f){return-1!=dojo.indexOf(this._allValues,f)},clearValues:function(){this._allValues=[];this._loadFinished=!1}})})},"davinci/ve/widgets/ColorPicker":function(){define(["davinci/ve/widgets/ColorPicker2","dijit/popup"],function(p){return p})},"davinci/ve/widgets/ColorPicker2":function(){define(["xide/widgets/ColorPickerWidget",
"xide/utils","dcl/dcl","xide/widgets/TemplatedWidgetBase","dojo/_base/lang"],function(p,k,f,e,b){f=f(e,{templateString:"\x3cdiv \x3e\x3c/div\x3e",numberDelta:1,insertPosition:9,data:null,_onChange:function(b){},_setValueAttr:function(b,e){if(this._dropDown&&(this._dropDown.set("value",b.replace("#",""),!0),this._currentValue=this._dropDown.get("value"),!1!==e&&this._onChange(this._currentValue),!e&&b!==this._currentValue))this.onChange()},set:function(b,e){if("value"===b&&this._dropDown)return this._setValueAttr(e)},
get:function(b){return"value"===b&&this._dropDown?this._getValueAttr():""},postCreate:function(){},startup:function(){var b=k.addWidget(p,{title:""},null,this.domNode,!0);this._dropDown=b;this._value=this._value||"";this._dropDown.set("value",this._value.replace("#",""),!0);var e=this;this._dropDown._on("change",function(a){e._value=e._getValueAttr();e.onChange(e._value)});this.add(b)},_setReadOnlyAttr:function(b){this._isReadOnly=b;this._dropDown.set("disabled",b)},onChange:function(){this._value=
this._dropDown.get("value")},_getValueAttr:function(){return this._dropDown.get("value")}});dojo.mixin(f,{divider:"---"});b.setObject("davinci.ve.widgets.ColorPicker",f);return f})},"davinci/ve/widgets/Background":function(){define("dojo/_base/declare dojo/Deferred davinci/workbench/WidgetLite davinci/ve/widgets/ColorPickerFlat davinci/ve/widgets/ColorStore davinci/ve/widgets/MutableStore dijit/form/ComboBox davinci/ve/widgets/BackgroundDialog davinci/Workbench davinci/ve/utils/URLRewrite davinci/model/Path davinci/lang/ve dijit/lang/_common davinci/ve/utils/CssUtils davinci/ve/widgets/ColorPicker xide/views/_PanelDialog xide/utils".split(" "),
function(p,k,f,e,b,d,n,a,m,h,g,c,q,A,u,x,z){var B=0;return p("davinci.ve.widgets.Background",[f],{__id:0,data:null,buildRendering:function(){this.domNode=dojo.doc.createElement("div",{style:"width:100%"});this._textFieldId="davinci_ve_widgets_properties_border_generated"+B++;this._buttonId="davinci_ve_widgets_properties_border_generated"+B++;var a=dojo.create("div",{className:"bgPropButtonDiv",style:"float:right; width:28px;"});dojo.create("button",{innerHTML:"...",id:this._buttonId,className:"bgPropButton btn-info",
style:"font-size:1em;"},a);var g=38,f=this._colorswatch="true"==this.colorswatch;if(f){var g=56,h=dojo.doc.createElement("div");dojo.addClass(h,"colorPicker");this._selectedColor=dojo.doc.createElement("div");this._selectedColor.innerHTML="\x26nbsp;";dojo.addClass(this._selectedColor,"colorPickerSelected");dojo.addClass(this._selectedColor,"colorPickerSelectedSkinny");this._colorPickerFlat=new e({})}var g=dojo.create("div",{className:"bgPropComboDiv",style:"margin-right:"+g+"px;padding:1px 0;"}),
m=dojo.isArray(this.data)?this.data:[""],k=this.langObjVE=c;if(f){this._statics=["",davinci.ve.widgets.ColorPicker.divider,k.colorPicker,k.removeValue];this._run={};this.data?(this.data.push({value:davinci.ve.widgets.ColorPicker.divider}),this.data.push({value:langObj.removeValue,run:function(){this.set("value","")}})):(this.data=[{value:this._statics[0]}],this.data.push({value:this._statics[2],run:this._chooseColorValue}),this.data.push({value:this._statics[3],run:function(){this.set("value","")}}),
this.data.push({value:this._statics[1]}),this.data.push({value:"transparent"}),this.data.push({value:"black"}),this.data.push({value:"white"}),this.data.push({value:"red"}),this.data.push({value:"green"}),this.data.push({value:"blue"}));m=[];for(k=0;k<this.data.length;k++)m.push(this.data[k].value),this.data[k].run&&(this._run[this.data[k].value]=this.data[k].run);this._store=new b({values:m,noncolors:this._statics})}else this._store=new d({values:m});this._comboBox=new n({store:this._store,id:this._textFieldId,
style:"width:100%;"});g.appendChild(this._comboBox.domNode);this.domNode.appendChild(a);f&&(this.domNode.appendChild(h),dojo.connect(h,"onclick",dojo.hitch(this,function(a){dojo.stopEvent(a);this._chooseColorValue()})),h.appendChild(this._selectedColor),this._colorPickerFlat_comboBoxUpdateDueTo="colorSwatch");this.domNode.appendChild(g);"string"==typeof this.propname&&this._comboBox&&(davinci.ve._BackgroundWidgets||(davinci.ve._BackgroundWidgets={}),davinci.ve._BackgroundWidgets[this.propname]={propPaletteWidget:this,
comboBox:this._comboBox});this.inherited(arguments)},startup:function(){this.inherited(arguments);this._button=dojo.byId(this._buttonId);dojo.connect(this._button,"onclick",this,function(){var c=this._cascade&&this._cascade._widget&&this._cascade._widget.getContext?this._cascade._widget.getContext():null,b=new a({context:c}),d=dojo.hitch(this,function(a){c||(console.error("Background.js. no context"),c={});var b=c.cascadeBatch={},d=b.propList=[],e=b.actions={},f=b.deferreds={};b.askUserResponse=void 0;
if(!a.cancel){var m=davinci.ve._BackgroundWidgets,n;for(n in m){var q=m[n];if(q.bgdWidget){var b=q.bgdWidget.get("value"),u=q.propPaletteWidget.get("value");b!==u&&(d.push(n),e[n]=dojo.hitch(this,function(a,c){a.propPaletteWidget._comboBoxUpdateDueTo="backgroundDialog";a.propPaletteWidget.set("value",c)},q,b),f[n]=new k)}}n="background-image";q=m[n];a=A.buildBackgroundImage(a.bgddata);for(b=0;b<a.length;b++)u=a[b],h.containsUrl(u)&&!h.isAbsolute(u)&&((m=h.getUrl(u))&&(u="url('"+(new g(m)).toString()+
"')"),a[b]=u);b=0==a.length?"":a[a.length-1];u=q.propPaletteWidget.get("value");b!==u&&(q.propPaletteWidget._cascade&&(q.propPaletteWidget._cascade._valueArrayNew=a),d.push(n),e[n]=dojo.hitch(this,function(a,c){q.propPaletteWidget._comboBoxUpdateDueTo="backgroundDialog";q.propPaletteWidget.set("value",c)},q,b),f[n]=new k);for(b=0;b<d.length;b++)n=d[b],f[n].then(dojo.hitch(this,function(a){(a=d[a+1])?e[a].apply():delete c.cascadeBatch},b));0<d.length&&(n=d[0],e[n].apply())}return!0},b),e=davinci.ve._BackgroundWidgets,
f;for(f in e){var m=e[f].propPaletteWidget._cascade;m&&(m._valueArrayNew=m._valueArray)}b.set("baseLocation",this._baseLocation);(new x({onOk:function(){d()},onShow:function(a,c,d){z.addChild(c,b,!0);this.add(b,null,!1);this.startDfd.resolve();return[b]}})).show()});this.connect(this._comboBox,"onChange",dojo.hitch(this,function(a){a!=davinci.ve.widgets.ColorPicker.divider&&a!=this.langObjVE.colorPicker||this._comboBox.set("value",this.value);var c=this._comboBoxUpdateDueTo;this._comboBoxUpdateDueTo=
void 0;"setAttr"!=c&&this._onChange(a)}));this.connect(this._comboBox,"onFocus",dojo.hitch(this,function(a){a=davinci.ve._BackgroundWidgets;for(var c in a){var b=a[c].propPaletteWidget._cascade;b&&(b._valueArrayNew=void 0)}(c=this._cascade&&this._cascade._widget&&this._cascade._widget.getContext?this._cascade._widget.getContext():null)&&delete c.cascadeBatch}));this._maqStartupComplete=!0},_setBaseLocationAttr:function(a){this._baseLocation=a},_setValueAttr:function(a){var c=this._comboBox.get("value");
this._colorswatch&&dojo.style(this._selectedColor,"backgroundColor",a);a=dojo.isArray(a)?0<a.length?a[a.length-1]:"":a;c!==a&&("backgroundDialog"!==this._comboBoxUpdateDueTo&&"colorSwatch"!==this._comboBoxUpdateDueTo&&(this._comboBoxUpdateDueTo="setAttr"),this._comboBox.set("value",a))},_onChange:function(a){this._colorswatch&&"string"==typeof a&&(a in this._run?dojo.hitch(this,this._run[a])():a==davinci.ve.widgets.ColorPicker.divider?this._comboBox.set("value",this._store.getItemNumber(0)):dojo.style(this._selectedColor,
"backgroundColor",a));this.value=this._comboBox.get("value");this.onChange(a)},onChange:function(a){},_getValueAttr:function(){return this._comboBox.get("value")},_setReadOnlyAttr:function(a){this._maqStartupComplete&&(this._isReadOnly=a,this._comboBox.set("disabled",a),this._button.disabled=a)},_chooseColorValue:function(){if(!this._isReadOnly){var a=this._comboBox.get("value"),c=this.isLeftToRight();davinci.ve.widgets.ColorPickerFlat.show(this._colorPickerFlat,a,this,c)}}})})},"davinci/ve/widgets/ColorPickerFlat":function(){define("dojo/_base/declare dijit/_Widget dijit/TooltipDialog dijit/form/Button dojox/widget/ColorPicker davinci/lang/ve dijit/lang/_common".split(" "),
function(p,k,f,e,b,d,n){p=p("davinci.ve.widgets.ColorPickerFlat",[k],{numberDelta:1,insertPosition:1,data:null,postCreate:function(){this.inherited(arguments);var a=dojo.doc.createElement("div");this._colorPicker=new b({});a.appendChild(this._colorPicker.domNode);var d=dojo.doc.createElement("div"),f=e({label:n.buttonOk});f.innerHtml="OK";d.appendChild(f.domNode);var g=e({label:n.buttonCancel});d.appendChild(g.domNode);a.appendChild(d);this.domNode.appendChild(a);dojo.connect(f,"onClick",this,"_onOk");
dojo.connect(g,"onClick",this,"onCancel");delete this.canceled},onClose:function(){},onCancel:function(){this._value=null;this.canceled=!0},_onOk:function(){delete this.canceled;this._value=this._colorPicker.get("value");this.onClose()},_getValueAttr:function(){return this._value},_setValueAttr:function(a){a=new dojo.Color(a);this._colorPicker.setColor(a.toHex())}});return dojo.mixin(p,{show:function(a,b,e,g){var c=new f({id:"maqetta_prop_tooltip_color_picker",title:d.selectColor,content:a});dijit.popup.moveOffScreen(c.domNode);
var h=!1,m=function(a){return function(){h&&(h=!1,dijit.popup.close(c))}}();c.connect(a,"onCancel",m);c.connect(a,"onClose",m);var n=dijit.byNode(dojo.query("[widgetId]",c.domNode)[0]);b in dojo.Color.named?(b=dojo.colorFromString(b),a.set("value",b.toHex())):a.set("value",b||"",!0);(function(a){return function(){dijit.popup.open({parent:e,popup:c,around:e.domNode,orient:g?{BL:"TL",BR:"TR",TL:"BL",TR:"BR"}:{BR:"TR",BL:"TL",TR:"BR",TL:"BL"},onClose:function(){n.canceled||(e._colorPickerFlat_comboBoxUpdateDueTo&&
(e._comboBoxUpdateDueTo=e._colorPickerFlat_comboBoxUpdateDueTo),e.get("value"),e.set("value",n.get("value")));m();c.destroy()}});h=!0;dijit.focus(c.containerNode)}})()()}})})},"davinci/ve/widgets/ColorStore":function(){define(["dojo/_base/declare","dojo/data/ItemFileReadStore","davinci/lang/ve","dijit/lang/_common"],function(p,k){return p("davinci.ve.widgets.ColorStore",k,{constructor:function(f){this.clearValues();f.noncolors&&(this.noncolors=f.noncolors);f.values&&this.setValues(f.values)},setValues:function(f){var e=
[];f&&(this._values=f);dojo.forEach(this._values,dojo.hitch(this,function(b){for(var d=!1,f=0;!d&&f<this.noncolors.length;f++)this.noncolors[f]==b&&(d=!0);d?e.push({name:b,value:b,label:b}):e.push({value:b,name:b,label:"\x3ctable\x3e\x3ctr\x3e\x3ctd style\x3d'width:10em'\x3e"+b+"\x3c/td\x3e\x3ctd style\x3d'width:10px;height:10px;background-color:"+b+"'\x3e\x3c/td\x3e\x3c/tr\x3e\x3c/table\x3e"})}));this._jsonData={identifier:"value",items:e};this._loadFinished=!1},insert:function(f,e){this._values.splice(f,
0,e);this.setValues()},contains:function(f){for(var e=0;e<this._values.length;e++)if(this._values[e]==f)return!0;return!1},getItemNumber:function(f){return this._values[f]},clearValues:function(){this._loadFinished=!1}})})},"davinci/ve/widgets/MutableStore":function(){define(["dojo/_base/declare","dojo/data/ItemFileReadStore","davinci/lang/ve","dijit/lang/_common"],function(p,k,f,e){return p("davinci.ve.widgets.MutableStore",k,{constructor:function(b){this.clearValues();b.divider&&(this.divider=b.divider);
b.values&&this.setValues(b.values)},setValues:function(b){var d=[],e=0;b&&(this._values=b);dojo.forEach(this._values,dojo.hitch(this,function(a){d.push({name:a,value:a,id:e++})}));this._jsonData={identifier:"id",items:d};this._loadFinished=!1},modifyItem:function(b,d){for(var e=0;e<this._values.length;e++)this._values[e]==b&&(this._values[e]=d);this.setValues()},insert:function(b,d){this._values.splice(b,0,d);this.setValues()},contains:function(b){for(var d=0;d<this._values.length;d++)if(this._values[d]==
b)return!0;return!1},findSimilar:function(b){if(b=(new RegExp(/(\D*)(-?)(\d+)(\D*)/)).exec(b)){b=new RegExp((0<b.length?b[1]:"")+"(-?)(\\d+)"+(3<b.length?b[4]:""));for(var d=0;d<this._values.length;d++)if(b.test(this._values[d]))return this._values[d]}},getItemNumber:function(b){return this._values[b]},clearValues:function(){this._loadFinished=!1}})})},"davinci/ve/widgets/BackgroundDialog":function(){define("dojo/_base/declare dijit/_WidgetBase dijit/_TemplatedMixin dijit/_WidgetsInTemplateMixin davinci/Runtime davinci/ve/widgets/MutableStore davinci/ve/widgets/ColorStore xide/utils dojo/text!./templates/BackgroundDialog.html davinci/ve/utils/CssUtils davinci/lang/ve dijit/lang/_common davinci/ve/utils/URLRewrite dojo/parser dojo/_base/lang davinci/model/Path dijit/form/Button davinci/ve/widgets/ColorPicker davinci/ve/widgets/ColorPickerFlat dijit/form/Textarea davinci/ui/widgets/FileFieldDialog".split(" "),
function(p,k,f,e,b,d,n,a,m,h,g,c,q,A,u){A._clearCache();var x=function(a,c){return"url('"+c+"')"};p=p("davinci.ve.widgets.BackgroundDialog",[k,f,e],{templateString:m,widgetsInTemplate:!0,_filePicker:null,context:null,veNLS:g,stopRowTemplate:"\x3ctr class\x3d'bgdGradOptRow bgdStopRow' style\x3d'display:none;'\x3e\x3ctd class\x3d'bgdCol1'\x3e\x3c/td\x3e\x3ctd class\x3d'bgdOptsLabel bdgStopLabel'\x3e"+g.bgdTemplate+"\x3c/td\x3e\x3ctd class\x3d'bgdStopColorTD'\x3e\x3cselect class\x3d'bgdColor' dojoType\x3d'dijit.form.ComboBox'\x3e\x3c/select\x3e\x3c/td\x3e\x3ctd\x3e\x3cselect class\x3d'bgdPosition' dojoType\x3d'dijit.form.ComboBox'\x3e\x3c/select\x3e\x3c/td\x3e\x3ctd class\x3d'bgdPlusMinusButtons'\x3e\x3cspan class\x3d'bgdPlusButton' dojoType\x3d'dijit.form.Button'\x3e+\x3c/span\x3e\x3cspan class\x3d'bgdMinusButton' dojoType\x3d'dijit.form.Button'\x3e-\x3c/span\x3e\x3c/td\x3e\x3c/tr\x3e",
postMixInProperties:function(){this.inherited(arguments);dojo.mixin(this,c)},postCreate:function(){this.inherited(arguments);var a=this.langObj=g;this.stoppos_store=new d({values:"0% 100% 10% 20% 30% 40% 50% 60% 70% 80% 90%".split(" ")});var c=davinci.ve._BackgroundWidgets;this._statics=["",davinci.ve.widgets.ColorPicker.divider,a.colorPicker,a.removeValue];var b=[{value:this._statics[0]}];b.push({value:this._statics[2],action:"_colorpicker"});b.push({value:this._statics[3],action:"_removevalue"});
b.push({value:this._statics[1],action:"_donothing"});b.push({value:"transparent"});b.push({value:"black"});b.push({value:"white"});b.push({value:"red"});b.push({value:"green"});b.push({value:"blue"});var e=[];this._bgcolor_action={};var f=[];this._stops_action={};for(var m=0;m<b.length;m++)e.push(b[m].value),b[m].action&&(this._bgcolor_action[b[m].value]=b[m].action),""!=b[m].value&&"_removevalue"!=b[m].action&&(f.push(b[m].value),b[m].action&&(this._stops_action[b[m].value]=b[m].action));this._bgcolor_store=
new n({values:e,noncolors:this._statics});this._stops_store=new n({values:f,noncolors:this._statics});var b=c["background-image"].comboBox.get("value"),k,q;"string"==typeof b&&0<b.length?(k=h.parseBackgroundImage(b),q=k.type):k={};this.bgddata=k;this.bgdOtherTA.set("value",b);var u=[];"emptystring url linear radial none other".split(" ").forEach(function(c){u.push({value:c,label:a["bgdType_"+c]})});this.bgdTypeSelect.addOption(u);this._updateBackgroundImageType(q);this.connect(this.bgdTypeSelect,
"onChange",dojo.hitch(this,function(){var a=this.bgdTypeSelect.get("value");this._updateBackgroundImageType(a);this._onFieldChanged()}));b=c["background-color"].comboBox.get("value");q=this.bgdColorCB;q.set("store",this._bgcolor_store);q.set("value",b);k.backgroundColor=b;this.connect(this.bgdColorCB,"onChange",dojo.hitch(this,function(a){this._onChangeColor(a,this.bgdColorCB,this._bgcolor_action)}));c["background-color"].bgdWidget=this.bgdColorCB;q=c["background-repeat"].comboBox;b=q.get("value");
e=this.bgdRepeatCB;e.set("store",q.store);e.set("regExp","repeat|repeat-x|repeat-y|no-repeat");e.set("value",b);k.backgroundRepeat=b;this.connect(this.bgdRepeatCB,"onChange",dojo.hitch(this,function(){k.backgroundRepeat=this.bgdRepeatCB.get("value");this._onFieldChanged()}));c["background-repeat"].bgdWidget=this.bgdRepeatCB;q=c["background-position"].comboBox;b=q.get("value");e=this.bgdPositionCB;e.set("store",q.store);e.set("regExp","auto|contain|cover|"+h.regstr_posn);e.set("value",b);k.backgroundPosition=
b;this.connect(this.bgdPositionCB,"onChange",dojo.hitch(this,function(){k.backgroundPosition=this.bgdPositionCB.get("value");this._onFieldChanged()}));c["background-position"].bgdWidget=this.bgdPositionCB;q=c["background-size"].comboBox;b=q.get("value");e=this.bgdSizeCB;e.set("store",q.store);e.set("regExp","auto|contain|cover|"+h.regstr_len_or_pct);e.set("value",b);k.backgroundSize=b;this.connect(this.bgdSizeCB,"onChange",dojo.hitch(this,function(){k.backgroundSize=this.bgdSizeCB.get("value");this._onFieldChanged()}));
c["background-size"].bgdWidget=this.bgdSizeCB;q=c["background-origin"].comboBox;b=q.get("value");e=this.bgdOriginCB;e.set("store",q.store);e.set("regExp","border-box|padding-box|content-box");e.set("value",b);k.backgroundOrigin=b;this.connect(this.bgdOriginCB,"onChange",dojo.hitch(this,function(){k.backgroundOrigin=this.bgdOriginCB.get("value");this._onFieldChanged()}));c["background-origin"].bgdWidget=this.bgdOriginCB;q=c["background-clip"].comboBox;b=q.get("value");e=this.bgdClipCB;e.set("store",
q.store);e.set("regExp","border-box|padding-box|content-box");e.set("value",b);k.backgroundClip=b;this.connect(this.bgdClipCB,"onChange",dojo.hitch(this,function(){k.backgroundClip=this.bgdClipCB.get("value");this._onFieldChanged()}));c["background-clip"].bgdWidget=this.bgdClipCB;c=new d({values:"to bottom;to top;to right;to left;45deg;-45deg".split(";")});this.bgdLinearAngleCB.set("store",c);this.bgdLinearAngleCB.set("regExp",h.regstr_angle);this.bgdLinearAngleCB.set("value",k&&k.angle?k.angle:"to bottom");
this.connect(this.bgdLinearAngleCB,"onChange",dojo.hitch(this,function(){k.angle=this.bgdLinearAngleCB.get("value");this._onFieldChanged()}));c=new d({values:"center;left top;center center;right bottom;0% 0%;0px 0px".split(";")});this.bgdRadialPosCB.set("store",c);this.bgdRadialPosCB.set("regExp",h.regstr_posn);this.bgdRadialPosCB.set("value",k&&k.posn?k.posn:"center");this.connect(this.bgdRadialPosCB,"onChange",dojo.hitch(this,function(){k.posn=this.bgdRadialPosCB.get("value");this._onFieldChanged()}));
c=new d({values:["circle","ellipse"]});this.bgdRadialShapeCB.set("store",c);this.bgdRadialShapeCB.set("regExp",h.regstr_shape);this.bgdRadialShapeCB.set("value",k&&k.shape?k.shape:"circle");this.connect(this.bgdRadialShapeCB,"onChange",dojo.hitch(this,function(){k.shape=this.bgdRadialShapeCB.get("value");this._onFieldChanged()}));c=new d({values:["farthest-corner","farthest-side","closest-corner","closest-side"]});this.bgdRadialExtentCB.set("store",c);this.bgdRadialExtentCB.set("regExp",h.regstr_extent);
this.bgdRadialExtentCB.set("value",k&&k.extent?k.extent:"farthest-corner");this.connect(this.bgdRadialExtentCB,"onChange",dojo.hitch(this,function(){k.extent=this.bgdRadialExtentCB.get("value");this._onFieldChanged()}));this._initializeStops(k&&k.stops&&2<=k.stops.length?k.stops:[{color:"white",pos:"0%"},{color:"black",pos:"100%"}])},startup:function(){this.inherited(arguments);var a=this.bgddata&&this.bgddata.url?this.bgddata.url:"";this._filePicker.set("value",a);this._filePicker.owner=this;this.bgddata.url=
a;this.connect(this._filePicker,"onChange",dojo.hitch(this,function(){var a=this._filePicker.get("value");this.bgddata.url=a;this._onFieldChanged()}))},_updateBackgroundImageType:function(a){var c=this.domNode;if(!a||"none"!=a&&"url"!=a&&"linear"!=a&&"radial"!=a&&"other"!=a)a="emptystring";this.bgddata.type=a;this.bgdTypeSelect.set("value",a);var b=dojo.query(".bgdOptionsLabelRow",c),d=dojo.query(".bgdImageOptRow",c),g=dojo.query(".bgdGradOptRow",c),e=dojo.query(".bgdLinearOptRow",c),f=dojo.query(".bgdRadialOptRow",
c),c=dojo.query(".bgdOtherRow",c);"url"==a?(d.concat(b).forEach(function(a){dojo.removeClass(a,"dijitHidden")}),g.concat(c).forEach(function(a){dojo.addClass(a,"dijitHidden")})):"linear"==a?(g.concat(b).forEach(function(a){dojo.removeClass(a,"dijitHidden")}),d.concat(f).concat(c).forEach(function(a){dojo.addClass(a,"dijitHidden")})):"radial"==a?(g.concat(b).forEach(function(a){dojo.removeClass(a,"dijitHidden")}),d.concat(e).concat(c).forEach(function(a){dojo.addClass(a,"dijitHidden")})):"other"==
a?(c.forEach(function(a){dojo.removeClass(a,"dijitHidden")}),d.concat(g).concat(b).forEach(function(a){dojo.addClass(a,"dijitHidden")})):d.concat(g).concat(b).concat(c).forEach(function(a){dojo.addClass(a,"dijitHidden")})},_initializeStops:function(a){var c=this.langObj;a||(a=this.bgddata.stops);for(var b=this.bgdTypeSelect.get("value"),d=dojo.query(".bgdStopRow",this.domNode),g=d.length-1;0<g;g--){var e=d[g],f=dojo.query(".bgdColor",e),f=dijit.byNode(f[0]);f.destroyRecursive();f=dojo.query(".bgdPosition",
e);f=dijit.byNode(f[0]);f.destroyRecursive();dojo.destroy(e)}g=d[0];d=g.parentNode;e=g.nextSibling;for(g=0;g<a.length;g++){var m=a[g],n=dojo.create("tr",{className:"bgdGradOptRow bgdStopRow"});n.innerHTML=this.stopRowTemplate;"linear"!=b&&"radial"!=b&&dojo.addClass(n,"dijitHidden");d.insertBefore(n,e);dojo.parser.parse(n);dojo.query(".bdgStopLabel",n)[0].innerHTML=this.langObj.bgdStop+" #"+(g+1)+":";f=dojo.query(".bgdColor",n);f=dijit.byNode(f[0]);f.set("store",this._stops_store);f.set("regExp",h.regstr_stop_color);
f.set("value",m.color);this.connect(f,"onChange",dojo.hitch(this,function(a,c){this._onChangeColor(c,a,this._stops_action)},f));f=dojo.query(".bgdPosition",n);f=dijit.byNode(f[0]);f.set("store",this.stoppos_store);m="string"==typeof m.pos&&0<m.pos.length?m.pos:0==g?"0%":"100%";f.set("regExp",h.regstr_stop_pos);f.set("value",m);this.connect(f,"onChange",dojo.hitch(this,function(){this._updateDataStructureStops();this._onFieldChanged()}));f=dojo.query(".bgdPlusButton",n)[0];f=dijit.byNode(f);f.set("title",
c.bgdAddStop);this.connect(f,"onClick",dojo.hitch(this,function(a){var c=this.bgddata.stops[a];this.bgddata.stops.splice(a+1,0,{color:c.color,pos:c.pos});this._initializeStops()},g));m=dojo.query(".bgdMinusButton",n)[0];m=dijit.byNode(m);m.set("title",c.bgdRemoveStop);this.connect(m,"onClick",dojo.hitch(this,function(a){this.bgddata.stops.splice(a,1);this._initializeStops()},g));n=dojo.query(".bgdMinusButton",this.domNode);for(f=0;f<n.length;f++)m=n[f],m=dijit.byNode(m),2>=a.length?m.set("disabled",
!0):m.set("disabled",!1)}this._updateDataStructureStops()},_onFieldChanged:function(){this._updateDialogValidity();this._updateBackgroundPreview()},_setBaseLocationAttr:function(a){this._baseLocation=a;this._filePicker.set("baseLocation",a)},_updateDialogValidity:function(){var a=this.bgddata;if(a&&a.type){var c=this.domNode,a=a.type,b=[],d=!0;"url"==a?b=dojo.query(".bgdImageOptRow",c):"linear"==a?b=dojo.query(".bgdStopRow",c).concat(dojo.query(".bgdLinearOptRow",c)):"radial"==a&&(b=dojo.query(".bgdStopRow",
c).concat(dojo.query(".bgdRadialOptRow",c)));b.forEach(function(a){dojo.query("[widgetid]",a).forEach(function(a){"function"!=typeof a.isValid||a.isValid()||(d=!1)})});this.bdgValid=d}},_updateBackgroundPreview:function(){function c(a,c){c=g[c];"string"==typeof c&&0<c.length&&(d+=";"+a+":"+c)}var b=dojo.query(".bgdPreview",this.domNode)[0],d="",g=this.bgddata;c("background-color","backgroundColor");c("background-repeat","backgroundRepeat");c("background-position","backgroundPosition");c("background-size",
"backgroundSize");c("background-origin","backgroundOrigin");c("background-clip","backgroundClip");for(var e=h.buildBackgroundImage(this.bgddata),f=0;f<e.length;f++){var m=e[f];if(q.containsUrl(m)&&!q.isAbsolute(m)&&this.context){var n=q.getUrl(m),n=a.parse_url(n);(n=this.context.ctx.getFileManager().getImageUrl({path:n.host+(n.path||""),mount:n.scheme},!1))&&(m=x(this._baseLocation,n))}d+=";background-image:"+m}b.setAttribute("style",d);this.bgdOtherTA.set("value",e[e.length-1])},_updateDataStructureStops:function(){var a=
this.bgddata;a.stops=[];for(var c=dojo.query(".bgdStopRow",this.domNode),b=1;b<c.length;b++){var d=c[b],g=dojo.query(".bgdColor",d),g=dijit.byNode(g[0]),d=dojo.query(".bgdPosition",d),d=dijit.byNode(d[0]);a.stops.push({color:g.get("value"),pos:d.get("value")})}},_setValueAttr:function(a){a&&this._colorPickerTargetWidget.set("value",a)},_onChangeColor:function(a,c,b){if(a=b[a])if("_removevalue"==a?c.set("value",""):c.set("value",c._currentcolorvalue),"_colorpicker"==a){a=new davinci.ve.widgets.ColorPickerFlat({});
b=c.get("value");var d=this.isLeftToRight();this._colorPickerTargetWidget=c;davinci.ve.widgets.ColorPickerFlat.show(a,b,this,d)}c._currentcolorvalue=c.get("value");this.bgddata.backgroundColor=this.bgdColorCB.get("value");this._updateDataStructureStops();this._onFieldChanged()},okButton:function(){},cancelButton:function(){this.onClose()}});p.getCSSForWorkspaceURL=x;u.setObject("davinci.ve.widgets.BackgroundDialog",p);return p})},"davinci/ve/utils/CssUtils":function(){define(["dojo/_base/Color","davinci/ve/utils/URLRewrite"],
function(p,k){var f=[],e;for(e in p.named)"transparent"!=e&&f.push(e);f.sort(function(a,c){return 0==c.indexOf(a)?1:0==a.indexOf(c)?-1:a<c?-1:1});var b=[];f.forEach(function(a){b.push(a);a=p.named[a];a="#"+(16777216+(a[0]<<16)+(a[1]<<8)+a[2]).toString(16).slice(1);b.push(a)});var d=/^\-?(?:\d*\.\d+|\d+)$/,f="(?:";for(e=0;e<b.length;e+=2)0!=e&&(f+="|"),f+=b[e];f="(?:"+(f+")")+"|\\#(?:[0-9A-Fa-f]{6}|[0-9A-Fa-f]{3})|(?:rgb|hsl)\\s*\\(\\s*(?:(?:\\d*\\.\\d+|\\d+)%?)\\s*,\\s*(?:(?:\\d*\\.\\d+|\\d+)%?)\\s*,\\s*(?:(?:\\d*\\.\\d+|\\d+)%?)\\s*\\)|(?:rgba|hsla)\\s*\\(\\s*(?:(?:\\d*\\.\\d+|\\d+)%?)\\s*,\\s*(?:(?:\\d*\\.\\d+|\\d+)%?)\\s*,\\s*(?:(?:\\d*\\.\\d+|\\d+)%?)\\s*,\\s*(?:\\d*\\.\\d+|\\d+)\\s*\\))";
e="(?:"+f+"(?:\\s+(?:\\-?(?:\\d*\\.\\d+|\\d+)(?:in|cm|mm|pt|pc|px|%)|0))?)";var n=new RegExp("(?:\\s*("+f+")\\s*((?:\\-?(?:\\d*\\.\\d+|\\d+)(?:in|cm|mm|pt|pc|px|%)|0))?\\s*,?(.*))");e="("+e+"(?:\\s*,\\s*"+e+")*)";var a=/^\s*(url)\s*\(\s*(?:\'([^\']*)\'*|\"([^\"]*)\"|([^\'\"]*))\s*\)\s*$/,m=new RegExp("^\\s*((?:-moz-linear-gradient|-webkit-linear-gradient|-ms-linear-gradient|-o-linear-gradient|linear-gradient))\\s*\\(\\s*(?:(?:to\\s+((?:\\s*left\\s*|\\s*right\\s*|\\s*top\\s*|\\s*bottom\\s*){1,2})|((?:\\s*left\\s*|\\s*right\\s*|\\s*top\\s*|\\s*bottom\\s*){1,2})|((?:\\-?(?:\\d*\\.\\d+|\\d+)deg)))\\s*,\\s*)?\\s*"+
e+"\\s*\\)\\s*$"),h=new RegExp("^\\s*((?:-moz-radial-gradient|-webkit-radial-gradient|-ms-radial-gradient|-o-radial-gradient|radial-gradient))\\s*\\(\\s*(?:\\s*(?:\\s*(\\s*(?:(?:\\-?(?:\\d*\\.\\d+|\\d+)(?:in|cm|mm|pt|pc|px|%)|0)|(?:left|center|right|top|bottom))(?:\\s*(?:(?:\\-?(?:\\d*\\.\\d+|\\d+)(?:in|cm|mm|pt|pc|px|%)|0)|(?:left|center|right|top|bottom)))?)\\s*((?:\\-?(?:\\d*\\.\\d+|\\d+)deg))\\s*|\\s*(\\s*(?:(?:\\-?(?:\\d*\\.\\d+|\\d+)(?:in|cm|mm|pt|pc|px|%)|0)|(?:left|center|right|top|bottom))(?:\\s*(?:(?:\\-?(?:\\d*\\.\\d+|\\d+)(?:in|cm|mm|pt|pc|px|%)|0)|(?:left|center|right|top|bottom)))?)\\s*|\\s*((?:\\-?(?:\\d*\\.\\d+|\\d+)deg))\\s*)\\s*,\\s*)?\\s*(?:\\s*(?:\\s*(circle|ellipse)\\s*((?:(?:closest-side|farthest-side|closest-corner|farthest-corner|contain|cover)|(?:(?:\\-?(?:\\d*\\.\\d+|\\d+)(?:in|cm|mm|pt|pc|px|%)|0)(?:\\s+(?:\\-?(?:\\d*\\.\\d+|\\d+)(?:in|cm|mm|pt|pc|px|%)|0)\\s*)?)))\\s*|\\s*((?:(?:closest-side|farthest-side|closest-corner|farthest-corner|contain|cover)|(?:(?:\\-?(?:\\d*\\.\\d+|\\d+)(?:in|cm|mm|pt|pc|px|%)|0)(?:\\s+(?:\\-?(?:\\d*\\.\\d+|\\d+)(?:in|cm|mm|pt|pc|px|%)|0)\\s*)?)))\\s*(circle|ellipse)\\s*|\\s*(circle|ellipse)\\s*|\\s*((?:(?:closest-side|farthest-side|closest-corner|farthest-corner|contain|cover)|(?:(?:\\-?(?:\\d*\\.\\d+|\\d+)(?:in|cm|mm|pt|pc|px|%)|0)(?:\\s+(?:\\-?(?:\\d*\\.\\d+|\\d+)(?:in|cm|mm|pt|pc|px|%)|0)\\s*)?)))\\s*)\\s*,\\s*)?\\s*"+
e+"\\s*\\)\\s*$"),g=/(?:\s*((?:top|bottom|left|right|center|(?:\-?(?:\d*\.\d+|\d+)%?)))\s+((?:top|bottom|left|right|center|(?:\-?(?:\d*\.\d+|\d+)%?)))\s*)/;e="("+("(?:\\s*,\\s*"+("(?:"+("(?:color-stop\\s*\\(\\s*(?:\\-?(?:\\d*\\.\\d+|\\d+)%?)\\s*,\\s*"+f+"\\s*\\)\\s*)")+"|"+("(?:from\\s*\\(\\s*"+f+"\\s*\\)\\s*)")+"|"+("(?:to\\s*\\(\\s*"+f+"\\s*\\)\\s*)")+")")+"\\s*)")+"+)";var c=new RegExp("(?:\\s*,\\s*"+("(?:"+("(?:(color-stop)\\s*\\(\\s*((?:\\-?(?:\\d*\\.\\d+|\\d+)%?))\\s*,\\s*("+f+")\\s*\\)\\s*)")+
"|"+("(?:(from)\\s*\\(\\s*("+f+")\\s*\\)\\s*)")+"|"+("(?:(to)\\s*\\(\\s*("+f+")\\s*\\)\\s*)")+")")+"\\s*)(.*)"),q=new RegExp("(?:\\s*(-webkit-gradient)\\s*\\(\\s*(linear)\\s*(?:\\s*,\\s*((?:\\s*(?:top|bottom|left|right|center|(?:\\-?(?:\\d*\\.\\d+|\\d+)%?))\\s+(?:top|bottom|left|right|center|(?:\\-?(?:\\d*\\.\\d+|\\d+)%?))\\s*))\\s*)(?:\\s*,\\s*((?:\\s*(?:top|bottom|left|right|center|(?:\\-?(?:\\d*\\.\\d+|\\d+)%?))\\s+(?:top|bottom|left|right|center|(?:\\-?(?:\\d*\\.\\d+|\\d+)%?))\\s*))\\s*)"+e+"\\s*\\)\\s*)"),
A=new RegExp("(?:\\s*(-webkit-gradient)\\s*\\(\\s*(radial)\\s*(?:(?:\\s*,\\s*((?:\\s*(?:top|bottom|left|right|center|(?:\\-?(?:\\d*\\.\\d+|\\d+)%?))\\s+(?:top|bottom|left|right|center|(?:\\-?(?:\\d*\\.\\d+|\\d+)%?))\\s*))\\s*)(?:\\s*,\\s*((?:\\d*\\.\\d+|\\d+))\\s*)(?:\\s*,\\s*((?:\\s*(?:top|bottom|left|right|center|(?:\\-?(?:\\d*\\.\\d+|\\d+)%?))\\s+(?:top|bottom|left|right|center|(?:\\-?(?:\\d*\\.\\d+|\\d+)%?))\\s*))\\s*)(?:\\s*,\\s*((?:\\d*\\.\\d+|\\d+))\\s*)?)"+e+"\\s*\\)\\s*)"),u=function(a){var c=
[];do{var b=a.match(n);b&&(c.push({color:b[1],pos:b[2]}),a=b[3])}while(b);return c},x=function(a){var b=[],g=[],e,f;do{var h=a.match(c);h&&(h[4]?e={color:h[5]}:h[6]?f={color:h[7]}:(a=h[2].match(d)?100*h[2]+"%":h[2],g.push({color:h[3],pos:a})),a=h[8])}while(h);e&&b.push(e);for(e=0;e<g.length;e++)b.push(g[e]);f&&b.push(f);return b};return{regstr_posn:"^\\s*\\s*(?:(?:\\-?(?:\\d*\\.\\d+|\\d+)(?:in|cm|mm|pt|pc|px|%)|0)|(?:left|center|right|top|bottom))(?:\\s*(?:(?:\\-?(?:\\d*\\.\\d+|\\d+)(?:in|cm|mm|pt|pc|px|%)|0)|(?:left|center|right|top|bottom)))?\\s*$",
regstr_len_or_pct:"^\\s*(?:\\-?(?:\\d*\\.\\d+|\\d+)(?:in|cm|mm|pt|pc|px|%)|0)\\s*$",regstr_angle:"^\\s*(?:to\\s+((?:\\s*left\\s*|\\s*right\\s*|\\s*top\\s*|\\s*bottom\\s*){1,2})|((?:\\-?(?:\\d*\\.\\d+|\\d+)deg)))\\s*$",regstr_shape:"^\\s*circle|ellipse\\s*$",regstr_extent:"^\\s*(?:(?:closest-side|farthest-side|closest-corner|farthest-corner|contain|cover)|(?:(?:\\-?(?:\\d*\\.\\d+|\\d+)(?:in|cm|mm|pt|pc|px|%)|0)(?:\\s+(?:\\-?(?:\\d*\\.\\d+|\\d+)(?:in|cm|mm|pt|pc|px|%)|0)\\s*)?))\\s*$",regstr_stop_color:"\\s*"+
f+"\\s*",regstr_stop_pos:"\\s*(?:\\-?(?:\\d*\\.\\d+|\\d+)(?:in|cm|mm|pt|pc|px|%)|0)\\s*",parseBackgroundImage:function(c){var b={},d=c.match(/^\s*$/);if(d)b.type="emptystring";else if(d=c.match(/^\s*none\s*$/))b.type="none";else if(d=c.match(a))b.type="url",b.func=d[1],b.url=d[2]?d[2]:d[3]?d[3]:d[4];else if(d=c.match(q)){b.type="linear";b.func=d[1];b.webkitGradType=d[2];b.webKitPosn1=d[3];b.webKitPosn2=d[4];var e=b.webKitPosn1,f=b.webKitPosn2;c=0<=e.indexOf("left");var n=0<=e.indexOf("top"),k=0<=
e.indexOf("right"),e=0<=e.indexOf("bottom"),p=0<=f.indexOf("left"),z=0<=f.indexOf("top"),D=0<=f.indexOf("right"),f=0<=f.indexOf("bottom");n&&f&&(c&&p||k&&D)?b.angle="to bottom":e&&z&&(c&&p||k&&D)?b.angle="to top":c&&D&&(n&&z||e&&f)?b.angle="to right":p&&k&&(n&&z||e&&f)?b.angle="to left":c&&n&&D&&f?b.angle="to bottom right":c&&e&&D&&z?b.angle="to top right":k&&n&&p&&f?b.angle="to bottom left":k&&e&&p&&z&&(b.angle="to top left");b.stops=x(d[5])}else if(d=c.match(A))b.type="radial",b.func=d[1],b.webkitGradType=
d[2],b.webKitPosn1=d[3],b.webKitRadius1=d[4],b.webKitPosn2=d[5],b.webKitRadius2=d[6],b.shape=b.webKitPosn1==b.webKitPosn2?"circle":"ellipse",n=b.webKitPosn1,(c=n.match(g))?(n=c[1],n.match(/^\d+$/)&&(n+="px"),c=c[2],c.match(/^\d+$/)&&(c+="px"),c=n+" "+c):c=n,b.posn=c,b.extent=b.webKitRadius2?b.webKitRadius2+"px":b.webKitRadius1?b.webKitRadius1+"px":"farthest-corner",b.stops=x(d[7]);else if(d=c.match(m))b.type="linear",b.func=d[1],b.angle=d[2]?"to "+d[2]:d[3]?"to "+d[3]:d[4],b.stops=u(d[5]);else if(d=
c.match(h))b.type="radial",b.func=d[1],b.posn=d[2]?d[2]:d[4],b.angle=d[3]?d[3]:d[5],b.shape=d[6]?d[6]:d[9]?d[9]:d[10],b.extent=d[7]?d[7]:d[8]?d[8]:d[11],b.stops=u(d[12]);d||(b.type="unknown");return b},buildBackgroundImage:function(a){var c=[];if("emptystring"==a.type)c.push("");else if("none"==a.type)c.push("none");else if("url"==a.type){if("string"==typeof a.url&&0<a.url.length){var b=k.getUrl(a.url);b||(b=k.stripQuotes(a.url));c.push("url('"+b+"')")}}else if("linear"==a.type||"radial"==a.type){for(var b=
"",d,g,e=[],f=0;f<a.stops.length;f++){var h=a.stops[f],m="string"==typeof h.pos&&0<h.pos.length?h.pos:"";0<f&&(b+=", ");b+=h.color;if(0<f&&f<a.stops.length-1||0==f&&0!=m.length&&"0%"!=m&&0!=m-0||f==a.stops.length-1&&0!=m.length&&"100%"!=m&&1!=m-0)b+=" "+m;0!=f||0!=m.length&&"0%"!=m&&0!=m-0?f!=a.stops.length-1||0!=m.length&&"100%"!=m&&1!=m-0?e.push("color-stop("+m+", "+h.color+")"):g="to("+h.color+")":d="from("+h.color+")"}h="";m=!1;d&&(h+=d,m=!0);g&&(m&&(h+=", "),h+=g,m=!0);for(f=0;f<e.length;f++)m&&
(h+=", "),h+=e[f],m=!0;if("linear"==a.type){d="(";var n=a.angle;(g="string"==typeof n&&0<n.length?n.match(/^\s*(?:to\s+((?:\s*left\s*|\s*right\s*|\s*top\s*|\s*bottom\s*){1,2})|((?:\-?(?:\d*\.\d+|\d+)deg)))\s*$/):null)||(n="to bottom");"to bottom"!=n&&(d+=n+",");a="(linear,";e=0<=n.indexOf("left");f=0<=n.indexOf("top");m=0<=n.indexOf("right");n=0<=n.indexOf("bottom");e&&f?a+=" right bottom, left top, ":e&&n?a+=" right top, left bottom, ":m&&f?a+=" left bottom, right top, ":m&&n?a+=" left top, right bottom, ":
e?a+=" right top, left top, ":m?a+=" left top, right top, ":f?a+=" left bottom, left top, ":n?a+=" left top, left bottom, ":(e=180*(90-parseFloat(g[4]))/Math.PI,g=Math.cos(e),e=Math.sin(e),0<=g&&0<=e?(a+="0% 100%,",a=Math.abs(g)>Math.abs(e)?a+("100% "+100*(1-Math.abs(e)/Math.abs(g))+"%"):a+(Math.abs(g)/Math.abs(e)*100+"% 100%")):0<=g&&0>e?(a+="0% 0%,",a=Math.abs(g)>Math.abs(e)?a+("100% "+Math.abs(-e)/Math.abs(g)*100+"%"):a+(Math.abs(g)/Math.abs(e)*100+"% 100%")):0>g&&0<=e?(a+="100% 100%,",a=Math.abs(g)>
Math.abs(e)?a+("0% "+100*(1-Math.abs(e)/Math.abs(g))+"%"):a+(Math.abs(g)/Math.abs(e)*100+"% 100%")):(a+="100% 0%,",a=Math.abs(g)>Math.abs(e)?a+("0% "+Math.abs(-e)/Math.abs(g)*100+"%"):a+(Math.abs(g)/Math.abs(e)*100+"% 100%")),a+=", ");d+=b+")";c.push("-webkit-gradient"+(a+(h+")")));c.push("-o-linear-gradient"+d);c.push("-ms-linear-gradient"+d);c.push("-moz-linear-gradient"+d);c.push("-webkit-linear-gradient"+d);c.push("linear-gradient"+d)}else d="(","center"!=a.posn&&"center center"!=a.posn&&(d+=
a.posn+", "),"circle"!=a.shape&&(d+=a.shape+", "),"farthest-corner"!=a.extent&&(d+=a.extent+", "),d+=b+")",c.push("-webkit-gradient(radial, center center, 10, center center, "+(h+")")),c.push("-o-radial-gradient"+d),c.push("-ms-radial-gradient"+d),c.push("-moz-radial-gradient"+d),c.push("-webkit-radial-gradient"+d),c.push("radial-gradient"+d)}return c}}})},"davinci/ve/utils/URLRewrite":function(){define([],function(){var p=/^\s*url\s*\(\s*(\'[^\'\"]*\'|\"[^\'\"]*\"|[^\'\"]*)\s*\)\s*$/,k=/^[\'\"]?([^\'\"]*)[\'\"]?$/,
f=/^(http|ftp)/;return{isAbsolute:function(e){return"string"!=typeof e?!1:(e=this.getUrl(e))?f.test(e):!1},containsUrl:function(e){return"string"!=typeof e?!1:p.test(e)},replaceUrl:function(e,b){return"string"!=typeof e||"string"!=typeof b?null:this.getUrl(e)?"url('"+b+"')":null},stripQuotes:function(e){return e.replace(k,"$1")},encodeURI:function(e){return encodeURI(e).replace(/#/g,"%23")},getUrl:function(e){return"string"!=typeof e?null:(e=e.match(p))&&1<e.length?this.stripQuotes(e[1]):null}}})},
"davinci/ui/widgets/FileFieldDialog":function(){define("dojo/_base/declare dijit/_WidgetBase dijit/_TemplatedMixin dijit/_WidgetsInTemplateMixin davinci/Workbench davinci/ui/widgets/OpenFile dijit/form/Button davinci/model/Path davinci/lang/ui dijit/lang/_common dojo/text!./templates/FileFieldDialog.html dijit/form/TextBox xide/views/_PanelDialog xide/utils xide/types xfile/views/FileGrid xfile/FileActions".split(" "),function(p,k,f,e,b,d,n,a,m,h,g,c,q,A,u,x,z){return p("davinci.ui.widgets.FileFieldDialog",
[k,f,e],{templateString:g,widgetsInTemplate:!0,_fileSelectionDialog:null,_showFileSelectionDialog:function(){var a=this;this.ctx=b.ctx;z.createFilePicker(this,"",function(c){var b=A.buildPath(c.mount,c.path,!1);a.ctx.getFileManager().getImageUrl(c,!0,{oriPath:b});a.textField.set("value",b);a._onChange()},m.selectFile,null,{mount:"workspace_user",selection:"."},null,x,{micromatch:"(*.png)|(*.jpg)|!(*.*)"})},_setBaseLocationAttr:function(a){this._baseLocation=a},_setValueAttr:function(a){this.value!=
a&&(this.value=a,this.textField.set("value",a))},_setDisabledAttr:function(a){this.textField.set("disabled",a);this.button.set("disabled",a);this.inherited(arguments)},_setIntermediateChangesAttr:function(a){this.textField.set("intermediateChanges",a);this.inherited(arguments)},_onChange:function(){var a=this.textField.get("value");this.value!=a&&(this.value=a,this.textField.set("value",this.value),this.onChange(a))},onChange:function(a){},_getValueAttr:function(){return this.textField.get("value")}})})},
"davinci/ui/widgets/OpenFile":function(){define("dojo/_base/declare dijit/_Templated dijit/_Widget davinci/library system/resource davinci/workbench/Preferences davinci/Runtime davinci/Workbench dijit/Menu dijit/MenuItem davinci/model/Path dijit/form/DropDownButton davinci/lang/ui dijit/lang/_common dijit/form/Button dijit/form/TextBox dijit/form/RadioButton dijit/layout/ContentPane dijit/Tree".split(" "),function(p,k,f,e,b,d,n,a,m,h,g,c,q,A){return p("davinci.ui.widgets.OpenFile",[f,k],{widgetsInTemplate:!0,
fileDialogFileName:null,fileDialogParentFolder:null,postMixInProperties:function(){dojo.mixin(this,q);dojo.mixin(this,A);this.inherited(arguments)},postCreate:function(){this.inherited(arguments);this.fileTree.watch("selectedItem",dojo.hitch(this,this._updateFields));this._value||this._setValueAttr(this._getForcedRootAttr())},startup:function(){this.fileTree.startup()},_setValueAttr:function(a){a!=this._value&&(this._value=a,this.fileTree.set("selectedItems",[a]))},_getForcedRootAttr:function(){return this._forcedRoot||
b.findResource(a.getProject())},_setForcedRootAttr:function(a){this._forcedRoot=a},_updateFields:function(){var a=this.fileTree.get("selectedItems"),a=null!=a&&0<a.length?a[0]:null;dojo.attr(this._okButton,"disabled",!0);null!=a&&"File"==a.elementType&&dojo.attr(this._okButton,"disabled",!1)},_okButton:function(){this.value=this.fileTree.get("selectedItems")[0]},_onDblClick:function(a){this._okButton();this.onExecute()},_onKeyPress:function(a){a.which==dojo.keys.ENTER&&(this._okButton(),this.onExecute())},
_getValueAttr:function(){return this.value},_cancelButton:function(){this.onClose()},resize:function(a){this.contentpane.resize(a)},onExecute:function(){},onClose:function(){}})})},"davinci/lang/ui":function(){define([],function(){return{dontShowAgain:"Don't show again",selectFile:"Select a file",openFile:"Open File",aboutMaqetta:"About Maqetta",productVersion:"Version: ${0}",productDate:"Date: ${0}",build:"Build: ${0}",library:"Library",version:"Version",include:"Include",source:"Source",baseLocation:"Base Location",
invalidDownloadFileName:"File name may only contain letters, numbers, \x26#8216;_\x26#8216;, and \x26#8216;.\x26#8216;.",selectedFiles:"Selected Files",noFilesSelected:"No files selected!",downloadButtonLabel:"Download",themeAlreadyExists:"Theme already Exists!",invalidThemeName:"Invalid theme name",errorCreatingTheme:"Error creating theme: ",creatingTheme:"Creating theme",noUserThemes:"No user themes found in workspace. Please create a new theme before editing.",themeSetsDialog:"Manage theme sets",
renameThemeSet:"Rename theme set",themeSets:"Theme sets:",currentlySelectedThemeSet:"Currently selected theme set:",themeSetName:"Name:",desktopTheme:"Dojo desktop 1.7 theme:",mobileTheme:"Dojo mobile 1.7 theme:",android:"Android:",blackberry:"Blackberry:",ipad:"iPad:",iphone:"iPhone:",other:"Other:",selectTheme:"Select theme",themeSet:"Theme set:",themeVersionMessage:"Theme version does not match workspace version this could produce unexpected results. We suggest recreating the custom theme using the current version of Maqetta and deleting the existing theme.",
addThemeSet:"Add theme set",deleteThemeSet:"Delete theme set",workspaceLocation:"Workspace Location",savingReadonlyFile:"This file is a read-only file. Please save it to a writeable location.",create:"Create",open:"Open",save:"Save",select:"Select",update:"Update",unknown:"unknown",fileName:"File name",folderName:"Folder name",parentFolder:"Parent folder: ",newFolderLabel:"New folder",cancelButtonLabel:"Cancel",newFolderName:"Name:",createFolder:"Create Folder",createNewFile:"Create New File",createMobileApplication:"Create a Mobile Application",
createDesktopApplication:"Create a Desktop Application",createSketchHiFi:"Create a Sketch (high-fidelity)",createSketchLoFi:"Create a Sketch (low-fidelity)",createNewCSSFile:"Create New CSS File",createNewJSFile:"Create New JavaScript File",createNewFolder:"Create New Folder",saveFileAs:"Save File As",downloadFile:"Download",selectFiles:"Select Files...",selectZip:"Select ZIP file...",upload:"Upload",addFiles:"Upload",uploading:"Uploading...",completed:"completed: ${0} \n",done:"Done",explodeZipWarning:"Warning: Contents of .zip files will overwrite any conflicting files in your workspace",
mustEnterFileName:"You must enter a file name.",cannotSelect:"Cannot select ${0}. It is a folder.",fileAlreadyExistsOverwrite:"File ${0} already exists. OK to overwrite?",cannotCreate:"Cannot create ${0}. It already Exists.",fileNameSlashCharacter:"File names cannot contain a slash character (/). Your file name is: ${0}",doesNotHaveExtension:"The name ${0} does not have an extension (e.g., .html, .css or .js) and will be treated as a plain text file. OK to proceed?",areYouSureDelete:"Are you sure you want to delete ${0}?",
areYouSureDeleteProject:"Are you sure you want to delete project ${0}?",noResourcesSelected:"No resources are currently selected.",optimizeOption:"Use Dojo Web Builder (experimental)",downloadFullSource:"Download uncompressed source for selected libraries (if available)",selectAll:"All",selectNone:"None",themeToClone:"Theme to clone",newName:"New Name",selectTheme:"Select a Theme",newProject:"New Project",renameProjectDialogTitle:"Rename Project To...",deleteProjectButtonTitle:"Delete Project",renameProjectButtonTitle:"Rename Project...",
deleteOnlyProjectError:"You can't delete the only project in your workspace!",newFileShowFiles:"Show file picker",newFileHideFiles:"Hide file picker",root:"(root)",nhfoDevice:"Device:",nhfoDeviceTooltip:"Select an initial mobile device",nhfoThemeButtonLabel:"Theme...",nhfoThemeButtonTitle:"Select themes or theme set for new HTML file",renameNewLabel:"Name:",renameButtonLabel:"Rename",renameDialogTitle:"Rename To...",createProject:"New project",createProjectMenuItem:"New project...",deleteProjectMenuItem:"Delete this project...",
renameProjectMenuItem:"Rename this project...",saveAsProjectTemplateMenuItem:"Save as project template...",manageProjectTemplatesMenuItem:"Manage project templates...",modifyLibrariesMenuItem:"Modify libraries...",modifyLibraries:"Modify libraries",projectColon:"Project:",ProjectMenu:"Project menu",newProjectName:"Name:",newProjectTemplate:"Template:",newProjectUseProjectTemplate:"Use project template",newProjectCloneExistingProject:"Copy files from current project into new project",newProjectEclipseSupport:"New project should be Eclipse-compatible",
newProjectNameExists:"A project with this name already exists",saveAsProjectTemplate:"Save as project template",newProjectTemplateName:"Project template name:",newProjectTemplateShareLabel:"Share with everyone",newProjectTemplateOverwrite:"Project template {0} already exists. OK to overwrite?",newProjectTemplateCreationSuccess:"Project template {0} has been saved",newProjectTemplateCreationFailure:"Error: Project template {0} save operation failed",newProjectTemplateCancelled:"Operation cancelled",
manageProjectTemplates:"Manage project templates",ManageProjectTemplatesHeaderName:"Project template name",ManageProjectTemplatesHeaderShared:"Share with everyone?",ManageProjectTemplatesHeaderCreatedBy:"Created by",ManageProjectTemplatesHeaderCreatedOn:"Created on",ManageProjectTemplatesHeaderLastModified:"Last updated",ManageProjectTemplatesNoTemplates:"You have no project templates.",ManageProjectTemplatesDuplicateNames:"Invalid entries - two project templates have the same name",ManageProjectTemplateAboutToOccur:"The following actions are about to occur:",
ManageProjectTemplateDeletions:"project template deletions",ManageProjectTemplateModifications:"project template modifications",ManageProjectTemplateOKToProceed:"OK to proceed?",ManageProjectTemplatesInitializing:"Initializing...",modify:"Modify",User:"Account",currentProject:"Current Project:",selectProject:"Select a Project:",NoteOperationNotUndoable:"Note: this operation is not undoable."}})},"davinci/ve/widgets/WidgetToolBar":function(){define("dojo/_base/declare dijit/_Templated dijit/_Widget davinci/Runtime davinci/workbench/ViewLite davinci/ve/commands/ModifyCommand dijit/form/ComboBox dijit/form/ValidationTextBox dijit/form/TextBox dojo/store/Memory davinci/lang/ve dijit/lang/_common davinci/ve/widget dojo/text!./templates/WidgetToolBar.html".split(" "),
function(p,k,f,e,b,d,n,a,m,h,g,c,q,A){return p("davinci.ve.widgets.WidgetToolBar",[b,f,k],{templateString:A,widgetsInTemplate:!0,descNode:null,idTextBox:null,classComboBox:null,blockGroupComboBox:null,widgetDescStart:"",widgetDescUnselectEnd:"",_oldIDName:null,_oldClassName:null,_oldBlockGroup:null,veNLS:g,cssRules:null,postCreate:function(){this.idTextBox.validator=dojo.hitch(this,function(a,c){this.invalidMessage=null;return a&&this._widget&&!this.changing?(a=q.byId(a))&&a!==this._widget?(this.invalidMessage=
g.idAlreadyUsed,!1):!0:!0});dojo.subscribe("/davinci/ui/widget/replaced",dojo.hitch(this,this._widgetReplaced));var a=this;this.subscribe("CSSRulesUpdated",function(c){a.cssRules=c.names;a.onWidgetSelectionChange()})},initialize:function(){if((this._editor=e.currentEditor)&&this._editor.visualEditor&&this._editor.visualEditor.context){var a=this._editor.visualEditor.context.getSelection();this._widget=0==a.length?null:a[0]}else this._widget=null;this.onWidgetSelectionChange()},cssSelect:null,startup:function(){this.inherited(arguments);
if(!this.cssSelect){this.cssSelect=$(this.cssClasses).selectize({delimiter:",",persist:!0,inputClass:"selectize-input form-control input-transparent",plugins:["restore_on_backspace"],createOnBlur:!0,dropdownParent:"body",create:function(a){return{value:a,text:a}}}).data().selectize;var a=this;this.cssSelect.on("change",function(){var c=a.cssSelect.getValue();if(a._widget&&!a.changing&&(a.context&&a.context.blockChange(!1),c=c.split(",").join(" "),c!==a._oldClassName)){a._oldClassName=c;var b={};b["class"]=
c;c=new davinci.ve.commands.ModifyCommand(a._widget,b,null);dojo.publish("/davinci/ui/widgetPropertiesChanges",[{source:a._editor.editor_id,command:c}])}})}},onEditorSelected:function(){this.initialize();this.domNode.style.display=this._editor&&"davinci.ve.HTMLPageEditor"==this._editor.editorID?"block":"none"},_widgetReplaced:function(a,c){this._widget===c&&(this._widget=a,this.onWidgetSelectionChange())},onWidgetSelectionChangeBak:function(){var a="";if(this._widget){a=q.getLabel(this._widget);this.context=
this._widget.getContext();this.classComboBox.set("disabled",!1);this.idTextBox.attr("disabled",!1);this.changing=!0;this._oldBlockGroup=this._oldClassName=this._oldIDName=null;dojo.addClass(this.domNode,"propertiesSelection");this.descNode.innerHTML=a;if(this._editor&&"davinci.ve.PageEditor"===this._editor.declaredClass&&(a=this._widget._srcElement)){var c=[],b=this._widget.getContext().getModel().getDocumentElement();if(b){var d={visit:function(a){"HTMLElement"==a.elementType&&"body"!=a.tag&&"html"!=
a.tag&&(a=a.getAttribute("class"))&&(a=dojo.trim(a).split(" "),dojo.forEach(a,dojo.hitch(this,function(a){-1==dojo.indexOf(this.classes,a)&&this.classes.push(a)})))},classes:[]};b.visit(d);dojo.forEach(d.classes,function(a){c.push({name:a})})}this.cssRules&&_.each(this.cssRules,function(a){_.find(c,{name:a})||c.push({name:a})});b=new h({data:c});this.classComboBox.set("store",b);a=(a=a.getAttribute("class"))&&dojo.trim(a)||"";this.cssSelect&&(_.each(c,function(a){this.cssSelect.addOption({value:a.name,
text:a.name})},this),this.cssSelect.setValue(a.split(" "),!0));this.classComboBox.set("value",a);this._oldClassName=a;this._oldIDName=a=(a=this._widget.getId())&&dojo.trim(a)||"";this.idTextBox.attr("value",a);this._widget.domNode&&this._widget.domNode&&((a=this._widget.domNode.blockGroup)||(a=this._widget.domNode.getAttribute("blockGroup")),this._oldBlockGroup=a)}this.changing=!1}else this.descNode.innerHTML=g.noSelection,dojo.removeClass(this.domNode,"propertiesSelection"),this.context=null,this.classComboBox.set("value",
""),this.classComboBox.set("disabled",!0),this.idTextBox.attr("value",""),this.idTextBox.attr("disabled",!0)},onWidgetSelectionChange:function(){var a="";if(this._widget){a=q.getLabel(this._widget);this.context=this._widget.getContext();this.idTextBox.attr("disabled",!1);this.cssSelect&&this.cssSelect.enable();this.changing=!0;this._oldBlockGroup=this._oldClassName=this._oldIDName=null;dojo.addClass(this.domNode,"propertiesSelection");this.descNode.innerHTML=a;if(this._editor&&"davinci.ve.PageEditor"===
this._editor.declaredClass&&(a=this._widget._srcElement)){var c=[],b=this._widget.getContext().getModel().getDocumentElement();if(b){var d={visit:function(a){"HTMLElement"==a.elementType&&"body"!=a.tag&&"html"!=a.tag&&(a=a.getAttribute("class"))&&(a=dojo.trim(a).split(" "),dojo.forEach(a,dojo.hitch(this,function(a){-1==dojo.indexOf(this.classes,a)&&this.classes.push(a)})))},classes:[]};b.visit(d);dojo.forEach(d.classes,function(a){c.push({name:a})})}this.cssRules&&_.each(this.cssRules,function(a){_.find(c,
{name:a})||c.push({name:a})});a=(a=a.getAttribute("class"))&&dojo.trim(a)||"";this.cssSelect&&(_.each(c,function(a){this.cssSelect.addOption({value:a.name,text:a.name})},this),this.cssSelect.setValue(a.split(" "),!0));this._oldClassName=a;this._oldIDName=a=(a=this._widget.getId())&&dojo.trim(a)||"";this.idTextBox.attr("value",a);this._widget.domNode&&this._widget.domNode&&((a=this._widget.domNode.blockGroup)||(a=this._widget.domNode.getAttribute("blockGroup")),this._oldBlockGroup=a)}this.changing=
!1}else this.descNode.innerHTML=g.noSelection,dojo.removeClass(this.domNode,"propertiesSelection"),this.context=null,this.cssSelect&&this.cssSelect.disable(),this.cssSelect&&this.cssSelect.setValue([]),this.idTextBox.attr("value",""),this.idTextBox.attr("disabled",!0)},_onChangeIDAttribute:function(){if(this._widget&&!this.changing){var a=this.idTextBox;if(a&&a.isValid()&&(this.context&&this.context.blockChange(!1),a=a.attr("value"),a!==this._oldIDName)){this._oldIDName=a;var c={};c.id=a;a=new d(this._widget,
c,null);dojo.publish("/davinci/ui/widgetPropertiesChanges",[{source:this._editor.editor_id,command:a}])}}},_onChangeClassAttribute:function(){if(this._widget&&!this.changing){var a=this.classComboBox;if(a&&(this.context&&this.context.blockChange(!1),a=a.attr("value"),a!==this._oldClassName)){this._oldClassName=a;var c={};c["class"]=a;a=new davinci.ve.commands.ModifyCommand(this._widget,c,null);dojo.publish("/davinci/ui/widgetPropertiesChanges",[{source:this._editor.editor_id,command:a}])}}},_onChangeBlockGroupAttribute:function(){if(this._widget&&
!this.changing){var a=this.blockGroupComboBox;if(a&&(this.context&&this.context.blockChange(!1),a=a.attr("value"),a!==this._oldBlockGroup)){this._oldBlockGroup=a;var c={};c.blockGroup=a;a=new davinci.ve.commands.ModifyCommand(this._widget,c,null);this.publish("/davinci/ui/widgetPropertiesChanges",[{source:this._editor.editor_id,command:a}])}}},_onFieldFocus:function(){this.context&&this.context.blockChange(!0)},_onFieldBlur:function(){this.context&&this.context.blockChange(!1)},_onKeyPress:function(a){a.keyCode==
dojo.keys.ENTER&&this._onChangeIDAttribute()}})})},"davinci/workbench/ViewLite":function(){define(["dojo/_base/declare","./WidgetLite","../ve/States"],function(p,k){return p("davinci.workbench.ViewLite",[k],{_editor:null,_widget:null,_subWidget:null,constructor:function(f,e){this.subscriptions=[];this.publishing={};this.subscribe("/davinci/ui/editorSelected",dojo.hitch(this,this._editorSelected));this.subscribe("/davinci/ui/widgetSelected",dojo.hitch(this,this._widgetSelectionChanged))},_widgetSelectionChanged:function(f){if(this._editor)if(f.selection){var e=
f.selection[0];if(e&&this._widget==e&&this._subwidget==e.subwidget)return!1;this._subwidget=(this._widget=e)&&e.subwidget;if(this.onWidgetSelectionChange)this.onWidgetSelectionChange(f)}else console.error("have no selection")},_editorSelected:function(f){this._editor=f.editor;if(this.onEditorSelected)this.onEditorSelected(this._editor)},_subscribe:function(f,e){this.subscriptions.push(dojo.subscribe(f,this,e))},publish:function(f,e){this.publishing[f]=!0;try{dojo.publish(f,e)}catch(b){console.error(b)}delete this.publishing[f]},
destroy:function(){dojo.forEach(this.subscriptions,dojo.unsubscribe);delete this.subscriptions;this._destroyHandles()}})})},"dojo/store/Memory":function(){define(["../_base/declare","./util/QueryResults","./util/SimpleQueryEngine"],function(p,k,f){return p("dojo.store.Memory",null,{constructor:function(e){for(var b in e)this[b]=e[b];this.setData(this.data||[])},data:null,idProperty:"id",index:null,queryEngine:f,get:function(e){return this.data[this.index[e]]},getIdentity:function(e){return e[this.idProperty]},
put:function(e,b){var d=this.data,f=this.index,a=this.idProperty,a=e[a]=b&&"id"in b?b.id:a in e?e[a]:Math.random();if(a in f){if(b&&!1===b.overwrite)throw Error("Object already exists");d[f[a]]=e}else f[a]=d.push(e)-1;return a},add:function(e,b){(b=b||{}).overwrite=!1;return this.put(e,b)},remove:function(e){var b=this.index,d=this.data;if(e in b)return d.splice(b[e],1),this.setData(d),!0},query:function(e,b){return k(this.queryEngine(e,b)(this.data))},setData:function(e){e.items?(this.idProperty=
e.identifier,e=this.data=e.items):this.data=e;this.index={};for(var b=0,d=e.length;b<d;b++)this.index[e[b][this.idProperty]]=b}})})},"dojo/store/util/QueryResults":function(){define(["../../_base/array","../../_base/lang","../../when"],function(p,k,f){var e=function(b){function d(d){b[d]||(b[d]=function(){var a=arguments;return f(b,function(b){Array.prototype.unshift.call(a,b);return e(p[d].apply(p,a))})})}if(!b)return b;b.then&&(b=k.delegate(b));d("forEach");d("filter");d("map");b.total||(b.total=
f(b,function(b){return b.length}));return b};k.setObject("dojo.store.util.QueryResults",e);return e})},"dojo/store/util/SimpleQueryEngine":function(){define(["../../_base/array"],function(p){return function(k,f){function e(b){b=p.filter(b,k);var d=f&&f.sort;d&&b.sort("function"==typeof d?d:function(a,b){for(var g,c=0;g=d[c];c++){var e=a[g.attribute],f=b[g.attribute];if(e!=f)return!!g.descending==(null==e||e>f)?-1:1}return 0});if(f&&(f.start||f.count)){var a=b.length;b=b.slice(f.start||0,(f.start||
0)+(f.count||Infinity));b.total=a}return b}switch(typeof k){default:throw Error("Can not query with a "+typeof k);case "object":case "undefined":var b=k;k=function(d){for(var e in b){var a=b[e];if(a&&a.test){if(!a.test(d[e],d))return!1}else if(a!=d[e])return!1}return!0};break;case "string":if(!this[k])throw Error("No filter function "+k+" was found in store");k=this[k];case "function":}e.matches=k;return e}})},"davinci/ve/widgets/Cascade":function(){define("dojo/_base/declare ../../workbench/WidgetLite ../../workbench/Preferences ../../Workbench ../../html/CSSModel ../../library ../../Theme ../../html/CSSRule ../States davinci/lang/ve/ve system/resource".split(" "),
function(p,k,f,e,b,d,n,a,m,h,g){p=p("davinci.ve.widgets.Cascade",[k],{target:null,targetField:null,toggleClasses:null,_regex_combinators:/[\s\~\+\>]+/,_regex_not_pseudoclass:/(.*)\:not\((.*)\)(.*)/,_regex_pseudoelement:/(.*)(\:\:[^\:\.\#\[]*)(.*)/,_regex_id:/(.*)(\#[^\:\.\#\[]*)(.*)/,_regex_class:/(.*)(\.[^\:\.\#\[]*)(.*)/,_regex_attribute:/(.*)(\[[^\]]*\])(.*)/,_regex_pseudoclass:/(.*)(\:[^\:\.\#\[]*)(.*)/,_regex_univeral:/(.*)(\*[^\:\.\#\[]*)(.*)/,delegate:null,constructor:function(a,b){this.subscriptions=
[];this.publishing={};this._radioGroupName="davinci_ve_widgets_Cascade"+davinci.ve.widgets.Cascade.__id++;this._handles=[];this._values=[];this.inherited(arguments)},buildRendering:function(){this.domNode=dojo.doc.createElement("div");this.container=dojo.doc.createElement("div");dojo.addClass(this.container,"showCascade");this.domNode.appendChild(this.container);this.topDiv=dojo.create("div",{"class":"cascadeTopDiv"},this.container);this.cascadeTableDiv=dojo.create("div",{"class":"cascadeTableDiv widget"},
this.container);dojo.removeClass(this.container,"showAllValues");dojo.isArray(this.target)||(this.target=[this.target]);dojo.addClass(this.domNode,"CascadeTop");this.inherited(arguments)},startup:function(){var a=dijit.byId(this.targetField);if(a)a._cascade=this,this._getFieldValue=function(){return a.get("value")},this._setFieldValue=function(c,b){a.set&&(this._value=c||"",this._loc=b,a._setBaseLocationAttr&&a.set("baseLocation",b&&b.getPath?b.getPath():null),a.set("value",this._value,!0))},dojo.connect(a,
"onChange",this,"_onFieldChange"),dojo.connect(a,"onFocus",this,"_onFieldFocus"),dojo.connect(a,"onBlur",this,"_onFieldBlur");else{var b=dojo.byId(this.targetField);this._getFieldValue=function(){return dojo.attr(b,"value")};this._setFieldValue=function(a,c){this._value=a||"";this._loc=c;dojo.attr(b,"value",this._value)};dojo.connect(b,"onchange",this,"_onFieldChange",!0);dojo.connect(b,"onfocus",this,"_onFieldFocus",!0);dojo.connect(b,"onblur",this,"_onFieldBlur",!0)}this._value=this._getFieldValue();
this._started=!0},_canModifyRule:function(a){return a&&a.getCSSFile?(a=a.getCSSFile())?!g.findResource(a.url).readOnly():!0:!0},_onFieldChange:function(a){function c(){g&&k&&k[g]&&k[g].resolve()}function b(a){a._value=a._getFieldValue();a._valueArray=a._valueArrayNew;var c=a._valueArray&&dojo.isArray(a._valueArray)&&0<a._valueArray.length?a._valueArray:a._value;a._changeValue(a._targetValueIndex,c)}a=function(a,c){if(!a&&!c)return!0;if(!a&&c||a&&!c||a.length!=c.length)return!1;for(var b=0;b<a.length;b++)if(a[b]!==
c[b])return!1;return!0};this.context&&this.context.blockChange(!1);if(!(this._value==this._getFieldValue()&&a(this._valueArray,this._valueArrayNew)||1>this._values.length))if("(overrides)"==this._getFieldValue())this._setFieldValue&&this._setFieldValue("(overrides)",null);else if("number"==typeof this._targetValueIndex){var d=f.getPreferences("davinci.ve.editorPrefs",e.getProject());if(this._widget&&this.target&&0<this.target.length){var g=this.target[0];a=this._widget.getContext();var m;a&&(m=a.cascadeBatch);
if(m){var n=m.askUserResponse;if(m.deferreds)var k=m.deferreds}}!1===n?(this._setFieldValue(this._value,this._loc),c()):!0===n?(b(this),c()):(n=null,this._values[this._targetValueIndex].readOnly&&"davinci.themeEdit.ThemeEditor"!=this._editor.editorID?(n=h.propChangeCannotComplete+"\x3cbr\x3e\x3cbr\x3e"+dojo.string.substitute(h.toChangeProperty,["\x3ca href\x3d'app/docs/index.html#CreatingStyleRulesWithAppCss' target\x3d'_blank'\x3e"+h.creatingStyleRules+"\x3c/a\x3e"])+"\x3cbr/\x3e\x3cbr/\x3e",davinci.Workbench.showMessage(h.errorModifyingValue,
n,{width:350},dojo.hitch(this,function(){c();return!0})),m&&(m.askUserResponse=!1),this._setFieldValue(this._value,this._loc)):("theme"==this._values[this._targetValueIndex].type||"theme"==this._values[this._targetValueIndex].proposalTarget)&&d.cssOverrideWarn&&this._editor.supports("MultiPropTarget")?require(["davinci/ve/widgets/ChangeWillModify"],dojo.hitch(this,function(a){var e=new a;a=davinci.Workbench.showDialog({title:"",content:e,style:{width:350},okCallback:dojo.hitch(this,function(){m&&
(m.askUserResponse=!0);b(this);c();e.checkbox.get("checked")&&(d.cssOverrideWarn=!1,f.savePreferences("davinci.ve.editorPrefs",null,d))}),okLabel:null,hideCancel:null,submitOnEnter:!0});dojo.connect(a,"onCancel",dojo.hitch(this,function(){m&&(m.askUserResponse=!1);this._setFieldValue(this._value,this._loc);c();e.checkbox.get("checked")&&(d.cssOverrideWarn=!1,f.savePreferences("davinci.ve.editorPrefs",null,d))}))})):(b(this),c()))}},_changeValue:function(a,b){var c=void 0;this._whichStateInputElement&&
this._whichStateInputElement.checked&&(c=this._whichState);var d=this._values[a];a=[];for(var e=0;e<this.target.length;e++)if(dojo.isArray(b))for(var g=0;g<b.length;g++){var f={};f[this.target[e]]=b[g];a.push(f)}else f={},f[this.target[e]]=b,a.push(f);this._dirtyCascadeList=!0;"element.style"==d.type?("position"==this.target[0]&&1==a.length&&("absolute"==a[0].position?(b=this.context.getPreference("absoluteWidgetsZindex"),a.push({"z-index":b})):a.push({"z-index":""})),dojo.publish("/davinci/ui/styleValuesChange",
[{values:a,appliesTo:"inline",applyToWhichStates:c,cascade:this}])):dojo.publish("/davinci/ui/styleValuesChange",[{values:a,appliesTo:d,applyToWhichStates:c}])},_getAttribStyleValue:function(){return this.context.getStyleAttributeValues(this._widget)},_getShortHands:function(){if(this._shorthands)return this._shorthands;this._shorthands=[];for(var a=0;a<this.target.length;a++)this._buildShortHands(this.target[a]);return this._shorthands},_buildShortHands:function(a){for(var c=!1,d=0;d<b.shorthand.length;d++)if(a==
b.shorthand[d][0]){c=!0;break}if(c)for(a=b.shorthand[d][1],c=0;c<a.length;c++){for(var e=!1,d=0;d<this._shorthands.length&&!e;d++)this._shorthands[d]==a[c]&&(e=!0);e||this._shorthands.push(a[c]);this._buildShortHands(a[c])}return this._shorthands},_onChangeOverride:function(a){alert(h.valueIsOverriden);return!1},_getSelector:function(a,b){var c=this.context.getThemeMeta();if(!c)return[];a=c.loader.getType(a);if(c=c.metadata.getStyleSelectors(a,"Normal"))for(var d in c)for(a=0;a<c[d].length;a++)for(var e=
0;e<b.length;e++)if(b[e]==c[d][a])return d},_getMetaTargets:function(a,b){var c=this._getSelector(a,b);return this.context.getModel().getRule(c).filter(function(a){return a.getSelectorText()==c})},_getSelectionCssRules:function(a){this.context._cssCache=this.context._cssCache||{};var c=this.context.getSelection();if(!a&&!c.length)return{rules:null,matchLevels:null};var b=a||c[0].domNode||c[0],d=b.id+"_"+b.className;if(c.length){var e=this.context._cssCache[d]=this.context.model.getMatchingRules(b,
!0);this.context.cssFiles&&this.context.cssFiles.forEach(function(a){a.getMatchingRules(b,e.rules,e.matchLevels)});e.rules.forEach(function(a){var c=dojo.hitch(a,"onChange",this,function(){delete this.context._cssCache[d];connect.unsubscribe(c)})},this);return e}return{rules:null,matchLevels:null}},_getAllRules:function(){function a(a){if(a&&a.parent&&a.parent.url)return a=a.parent.url,/^themes\//.test(a)||/\/themes\//.test(a)?"theme":"queried"}var b=[];if("davinci.themeEdit.ThemeEditor"!=this._editor.editorID){var d=
this._getDefaultSelection();if(this._editor.supports("inline-style")&&"element.style"==d){for(var d=this._getAttribStyleValue(),e=null,g=0;g<d.length;g++)for(var f=d[g],h=0;h<this.target.length;h++){var m=this.target[h];void 0!==f[m]&&(e=f[m])}b.push({rule:d,value:e,matchLevel:"element.style",type:"element.style"})}if((d=this._getSelectionCssRules(this._topWidgetDom))&&d.rules)for(h=0;h<d.rules.length;h++){e="";g=d.rules[h];for(f=0;f<g.selectors.length;f++)0!=f&&(e+=", "),e+=g.selectors[f].getLabel();
g=a(g);b.push({rule:d.rules[h],ruleString:e,matchLevel:d.matchLevels[h],type:g})}this._addDeltaRules(this._widget,b);for(var d=this._getClasses(this._widget),n=0,h=0;h<d.length;h++){var k=d[h];"string"==typeof k&&0<k.length&&this._getClassSelector(k).forEach(function(a){for(var c=!1,d=0;d<b.length;d++)if(this._compareSelectors(b[d].ruleString,a)){b[d].className=k;c=!0;break}c||(c=this._computeMatchLevelSelector(a),b.splice(n,0,{rule:null,ruleString:a,targetFile:this.targetFile,className:k,value:null,
matchLevel:c,type:"proposal"}),n++)}.bind(this))}}if("davinci.themeEdit.ThemeEditor"==this._editor.editorID){if(d=this._editor._getCssRules(this._widget,this._editor._selectedSubWidget,this._editor._currentState)){h=[];for(e=d.length-1;-1<e;--e)h.push(d[e]);d=h}}else d=this._widget?this._getMetaTargets(this._widget,this.target):[];for(h=0;h<d.length;h++){e=!1;for(g=0;!e&&g<b.length;g++)b[g].rule==d[h]&&(e=!0,b[g].type="theme");e||b.push({rule:d[h],matchLevel:"theme",type:"theme"})}return b},_buildCssRuleset:function(){var a=
this._getAllRules();this._values=[];this._hasOverride=!1;for(var b=this._getShortHands(),d=0;d<a.length;d++){var e=a[d].rule;if(e){for(var g=0;g<b.length;g++)if("element.style"!=a[d].type&&null!=a[d].rule.getProperty(b[g])){a[d].shorthand=b[g];var f=e.getProperty(b[g]);a[d].value=f&&f.value;this._hasOverride=!0}else"element.style"==a[d].type&&-1<dojo.indexOf(a[d].rule,b[g])&&(a[d].shorthand=b[g],f=dojo.indexOf(a[d].rule,b[g]),a[d].value=e[f],this._hasOverride=!0);if(!a[d].shorthand&&"element.style"!=
a[d].type)a[d].value=this._getRuleTargetValue(e);else if(!a[d].shorthand&&"element.style"==a[d].type)for(g=0;g<e.length;g++)e[g].hasOwnProperty(this.target[0])&&(a[d].value=e[g][this.target[0]])}}a=this._sortRules(a);this._addClasses(a);this._values=a},_sortRules:function(a){for(var c=[],b=0;b<a.length;b++){var d=!1;"element.style"==a[b].type&&(c.splice(0,0,a[b]),d=!0);for(var e=0;!d&&e<c.length;e++)"element.style"!=c[e].matchLevel&&c[e].matchLevel<a[b].matchLevel&&(d=!0,c.splice(e,0,a[b]));d||c.push(a[b])}return c},
_addClasses:function(a){for(var c=!1,b=0;b<a.length;b++)a[b].extraClass=[],c&&a[b].extraClass.push("cssShorthandOverRidden"),a[b].value||"element.style"!=a[b].type&&this._getRuleTargetValue(a[b].rule)?c=!0:a[b].value||"element.style"==a[b].type||a[b].extraClass.push("hiddenCascadeNode"),"element.style"!=a[b].type||a[b].value||a[b].extraClass.push("elementStyleNode"),this._canModifyRule(a[b].rule)||(a[b].extraClass.push("readOnlyRule"),a[b].readOnly=!0)},_updateCascadeList:function(){function a(a){return function(){return this._onChange({target:a})}}
function b(a){return function(){return this._onChangeRemove({target:a})}}this._setFieldValue&&this._setFieldValue("",null);if(this._widget&&this._widget.domNode){dojo.removeClass(this.container,"dijitHidden");this._buildCssRuleset();this._destroy();var d=dojo.doc.createElement("table");dojo.addClass(d,"cascadeTable");var e=null,g=null,e=dojo.doc.createElement("tr");e.className="propApplyToLabelRow";g=dojo.doc.createElement("td");g.colSpan="3";g.innerHTML=h.applyToWhich;g.className="propApplyToLabelCell";
e.appendChild(g);d.appendChild(e);this._radio=[];for(var f=0;f<this._values.length;f++){var n=this._formatRuleString(this._values[f]);this._radio.push(dojo.create("input",{type:"radio",name:this._radioGroupName}));for(var e=dojo.doc.createElement("tr"),k=0;k<this._values[f].extraClass.length;k++)dojo.addClass(e,this._values[f].extraClass[k]);g=dojo.doc.createElement("td");e.appendChild(g);dojo.addClass(g,"cascadeSpacer");g=dojo.doc.createElement("td");dojo.addClass(g,"cascadeButton");g.appendChild(this._radio[this._radio.length-
1]);e.appendChild(g);g=dojo.doc.createElement("td");dojo.addClass(g,"cascadText");g.innerHTML="\x3cdiv class\x3d'cascadeRuleText'\x3e"+n+"\x3c/div\x3e";this._values[f].shorthand?this._handles.push(dojo.connect(this._radio[this._radio.length-1],"onclick",this,"_onChangeOverride")):this._handles.push(dojo.connect(this._radio[this._radio.length-1],"onclick",this,a(f)));if(this._values[f].shorthand)g.innerHTML+="\x3cdiv\x3e"+this._values[f].shorthand+":"+this._values[f].value+";\x3c/div\x3e";else if(this._values[f].value){for(k=
0;k<this.target.length;k++);g.innerHTML+="\x3cdiv class\x3d'ruleValue'\x3e"+this.target[0]+":"+this._values[f].value+";\x3c/div\x3e"}e.appendChild(g);g=dojo.doc.createElement("td");dojo.addClass(g,"cascadRemove");n=dojo.doc.createElement("button");this._values[f].readOnly&&dojo.attr(n,"disabled","true");dojo.addClass(n,"cascadeRemoveButton");g.appendChild(n);this._handles.push(dojo.connect(n,"onclick",this,b(f)));e.appendChild(g);g=dojo.doc.createElement("td");g.className="cascadeSpacer";e.appendChild(g);
d.appendChild(e)}this._widgetState=this._whichStateInputElement=void 0;e=m.getStatesListCurrent(this._widget.domNode);for(f=0;f<e.length;f++)if(e[f]){f=e[f];e=dojo.doc.createElement("tr");e.className="propWhichStateRow";g=dojo.doc.createElement("td");g.colSpan="3";n=dojo.create("input",{type:"checkbox",checked:!1,className:"propWhichStateInput"});this._whichState=f;this._whichStateInputElement=n;g.appendChild(n);n=dojo.create("label",{className:"propWhichStateLabel"});n.innerHTML=dojo.string.substitute(h.onlyApplyToState,
[f]);g.appendChild(n);g.className="propWhichStateCell";e.appendChild(g);d.appendChild(e);break}this.cascadeTableDiv.appendChild(d);this._updateFieldValue()}else dojo.addClass(this.container,"dijitHidden")},selectRule:function(a){for(var c=0;c<this._values.length;c++)if("element.style"!=a&&this._values[c].rule==a){dojo.removeClass(this._radio[c].parentNode.parentNode,"hiddenCascadeNode");dojo.attr(this._radio[c],"checked",!0);this._onChange({target:c});break}else if("element.style"==a&&"element.style"==
this._values[c].type){dojo.removeClass(this._radio[c].parentNode.parentNode,"hiddenCascadeNode");dojo.attr(this._radio[c],"checked",!0);this._onChange({target:c});break}},selectRuleBySelector:function(a){if("element.style"==a)this._targetValueIndex=0,0<this._values.length&&(dojo.attr(this._radio[0],"checked",!0),this._values[0].shorthand?dojo.addClass(this._radio[0].parentNode.parentNode,"cssShorthandOverRidden"):(a=this._getBaseLocation(),this._setFieldValue(this._values[0].value,a)));else for(var c=
0;c<this._values.length;c++)if("element.style"!=this._values[c].type&&this._values[c].rule&&this._values[c].rule.hasSelector(a)){dojo.removeClass(this._radio[c].parentNode.parentNode,"hiddenCascadeNode");dojo.attr(this._radio[c],"checked",!0);this._onChange({target:c});break}},_isTarget:function(a){if("$std_10"===a)return!0;for(var c=0;c<this.target.length;c++)if(this.target[c]==a)return!0;return!1},_targetIsRootProperty:function(){for(var a=["left","top","right","bottom"],b=0;b<this.target.length;b++)if(-1<
a.indexOf(this.target[b]))return!0;return!1},_updateFieldValue:function(){null==this._widget&&this._setFieldValue("",this._getBaseLocation());var a=this._getDefaultSelection();this._targetValueIndex=0;for(var b=!1,d=!1,e=0;e<this._values.length;e++){var g="davinci.ve.HTMLPageEditor"==this._editor.editorID,f="davinci.themeEdit.ThemeEditor"==this._editor.editorID;this._values[e].value&&!b&&f||this._values[e].value&&!b&&g&&!this._values[e].readOnly||!b&&!d&&"element.style"!=this._values[e].type&&this._values[e].rule&&
this._values[e].rule.hasSelector(a)||"element.style"==a&&"element.style"==this._values[e].type?(this.selectRule("element.style"==this._values[e].type?"element.style":this._values[e].rule),this._values[e].value&&(b=!0),d=!0):b&&!d&&dojo.addClass(this._radio[e].parentNode.parentNode,"cssOverRidden")}b||d||!g||this.selectRuleBySelector("element.style")},_getThemeMetaDataByWidget:function(a){var c=this.context.getThemeMeta();if(!c)return null;a=c.loader.getType(a);var c=c.loader.getMetaData(a),b=!1,e=
"string"==typeof a?a.split("."):null;e&&"html"==e[0]&&(b=!0);if(!c&&this.context.cssFiles&&!b)for(b=0;b<this.context.cssFiles.length;b++)if(e=n.getThemeByCssFile(this.context.cssFiles[b]))if(c=d.getThemeMetadata(e).loader.getMetaData(a))break;return c},_getDefaultSelection:function(){var a="Normal";"davinci.themeEdit.ThemeEditor"==this._editor.editorID&&(a=a||m.getState());var b=this._getThemeMetaDataByWidget(this._widget);if(!b||!b.states||this._targetIsRootProperty())return"element.style";if(b&&
b.states[a]&&b.states[a].elements){var d=b.states[a].elements,e;for(e in d)for(var g=0;g<d[e].length;g++)if(this._isTarget(d[e][g]))return"$root"==e?"element.style":e}if(b&&b.states[a]&&(d=this.context.getThemeMeta())&&(g=d.loader.getType(this._widget),d=d.metadata.getStyleSelectors(g,a,null)))for(e in d)for(a=0;a<d[e].length;a++)if(this._isTarget(d[e][a])){if(b.rootSelectors)for(a=0;a<b.rootSelectors.length;a++)if(e==b.rootSelectors[a])return"element.style";return e}return null},_addDeltaRules:function(a,
b){var c="Normal",d=-1,e=[],f=this.context._getCssFiles(),f=f&&0<f.length?f[0].url:null,h=!1;f&&(h=(h=g.findResource(f))?h._readOnly:!0);"davinci.themeEdit.ThemeEditor"==this._editor.editorID&&(c=c||m.getState());if((a=this._getThemeMetaDataByWidget(a))&&a.states[c]&&a.states[c].selectors){var c=a.states[c].selectors,n;for(n in c){c=!1;for(a=0;a<b.length;a++){var k=b[a];"element.style"===k.type&&(d=a);if("theme"===k.type&&k.ruleString===n&&(k.rule.parent.relativeURL==this.context._themeUrl||k.rule.parent.url==
f)){c=!0;break}}c||(c=this._computeMatchLevelSelector(n),f&&!h&&e.push({rule:null,ruleString:n,targetFile:f,className:null,value:null,matchLevel:c,type:"proposal"}),this.context._themeUrl&&!this.context.theme.getFile().readOnly()&&e.push({rule:null,ruleString:n,targetFile:this.context._themeUrl,className:null,value:null,matchLevel:c,type:"proposal",proposalTarget:"theme"}))}}var q=d+1;e.forEach(function(a){b.splice(q++,0,a)});return b},_getRuleTargetValue:function(a){var c=null;if(a)for(var b=0;!c&&
b<this.target.length;b++)c=a.getProperties(this.target[b]);if(null!=c){if(1<c.length){a=[];for(b=0;b<c.length;b++)a.push(c[b].value);return a}if(1==c.length)return c[0].value}return null},_onChangeRemove:function(a){this._changeValue(a.target,null);this._updateCascadeList()},_onChange:function(a){var c=null;if("element.style"==this._values[a.target].type)c=this._getBaseLocation();else if("proposal"==this._values[a.target].type){var b=this.context.getModel().find({elementType:"CSSFile",relativeURL:this._values[a.target].targetFile},
!0),d=this.context._getCssFiles();b?c=g.findResource(b.url):d[0].url==this._values[a.target].targetFile&&(c=g.findResource(d[0].url))}else c=g.findResource(this._values[a.target].rule.getCSSFile().url);this._setFieldValue&&this._setFieldValue(this._values[a.target].value||"",c);this._targetValueIndex=a.target},_widgetValuesChanged:function(a){if(this._dirtyCascadeList)this._updateCascadeList(),this._dirtyCascadeList=!1;else{var c=this._getShortHands();a=a.values;for(var b in a)for(a=0;a<c.length;a++)if(c[a]==
b){this._updateCascadeList();return}}},_formatRuleString:function(a){if("element.style"==a.type)return"element.style";var c="";if("proposal"==a.type)c=a.className?c+dojo.string.substitute(h.newRule,[a.className,a.targetFile]):c+dojo.string.substitute(h.newThemeRule,[a.targetFile]),c+=a.ruleString;else{var b=a.rule;a.className?c+=dojo.string.substitute(h.existingRule,[a.className,this.targetFile]):"theme"==a.type&&(c+="["+a.type+"] ");if(a.ruleString)c+=a.ruleString;else for(var d=0;d<b.selectors.length;d++)0!=
d&&(c+=", "),c+=b.selectors[d].getLabel();(d=b.searchUp("CSSFile"))&&(c+="  ("+d.url||d.relativeURL);c=a.property?c+dojo.string.substitute(h.line,[a.property.startLine]):c+dojo.string.substitute(h.line,[b.startLine||h.propUndefined])}return c},_getWidgetTopDom:function(c,b){b=this._getSelector(c,b);var d=function(a,c){if(c.matches(a))return a;for(;0<a.children.length;)return d(a.children[0],c)};if(b){var e=new a;e.setText(b+"{}");return d(c.domNode||c,e)}return null},_widgetSelectionChanged:function(a){(this._widget=
a=a[0])?(this.context=a.getContext(),this.targetFile=this.context.getAppCssRelativeFile(),this._editor=this.context.editor,this._topWidgetDom=this._getWidgetTopDom(this._widget,this.target)||this._widget.domNode||this._widget):this._topWidgetDom=null;this._updateCascadeList()},_getBaseLocation:function(){return{}},_editorSelected:function(a){this._editor=a.editor;var c;this._editor&&this._editor.getContext&&(c=this._editor.getContext());c&&this._editor.supports("style")?(this.context=c,this.targetFile=
c.getAppCssRelativeFile(),a=c.getSelection(),0<a.length?this._widgetSelectionChanged(a):this._widgetSelectionChanged([])):(this._widget=this.context=null,this._setFieldValue&&this._setFieldValue("",null));this._updateCascadeList()},_onFieldFocus:function(){this.context&&this.context.blockChange(!0)},_destroy:function(){var a=this.cascadeTableDiv;for(dojo.forEach(dojo.query("[widgetId]",a).map(dijit.byNode),function(a){a.destroy()});a.firstChild;)dojo._destroyElement(a.firstChild);dojo.forEach(this._handles,
dojo.disconnect);this._handles=[]},_onFieldBlur:function(){this.context&&this.context.blockChange(!1)},_getClasses:function(a){a=a.getClassNames("class")||"";a=a.split(" ");for(var b=0;b<a.length;b++)for(var c=b+1;c<a.length;c++)a[c]==a[b]&&a.splice(c,1);return a},_getRelativeMetaTargetSelector:function(a){var b=this.context.getThemeMeta();if(!b)return[];var c=this.context.getSelection();if(!c.length)return[];c=c[0];c=b.loader.getType(c);return b.metadata.getRelativeStyleSelectorsText(c,"Normal",
null,a,this.context.getTheme().className)},_getClassSelector:function(a){var b=this._getRelativeMetaTargetSelector(this.target),b=b.length?b[0]:"";bodyId=this.context.model.find({elementType:"HTMLElement",tag:"body"},!0).find({elementType:"HTMLAttribute",name:"id"},!0).value;var c=this.context.getTheme(),d=[];if(!c)return d;var e=c.className;b.split(",").forEach(function(b){b=b.trim();d.push("#"+bodyId+"."+e+" ."+a+b)}.bind(this));return d},_computeMatchLevelSelector:function(a){a=a.split(this._regex_combinators);
for(var b=0,c=0;c<a.length;c++){for(var d=a[c];;){var e=d.match(this._regex_not_pseudoclass);if(null!=e)b+=this._computeMatchLevelSimpleSelector(e[2]),d=e[1]+e[3];else break}b+=this._computeMatchLevelSimpleSelector(d)}return b},_computeMatchLevelSimpleSelector:function(a){var b=0;do{var c=function(c,e){c=a.match(c);null!=c&&(d=!0,b+=e,a=c[1]+c[3])},d=!1;c(this._regex_pseudoelement,1);d||(c(this._regex_id,100),c(this._regex_class,10),c(this._regex_attribute,10),c(this._regex_pseudoclass,10),c(this._regex_univeral,
0))}while(d);0<a.length&&(b+=1);return b},_compareSelectors:function(a,b){if(!(a&&b||a==b))return!1;a=a.split(this._regex_combinators);b=b.split(this._regex_combinators);if(a.length!=a.length)return!1;for(var c=0;c<a.length;c++)if(a[c]!=b[c])return!1;return!0},_compareSimpleSelectors:function(a,b){}});return dojo.mixin(p,{__id:0})})},"davinci/Theme":function(){define("dojo/_base/declare dojo/promise/all ./Workbench ./Runtime ./library ./workbench/Preferences ./model/Path ./html/HTMLFile ./model/Factory system/resource".split(" "),
function(p,k,f,e,b,d,n,a,m,h){var g={TEMP_CLONE_PRE:"clone_",desktop_default:"desktop_default",mobile_default:"custom_default",default_theme:"(device-specific)",none_themeset_name:"(none)",other_device:"other",none_theme:"none",dojoMobileDefault:[{theme:"android",device:"Android"},{theme:"blackberry",device:"BlackBerry"},{theme:"ipad",device:"iPad"},{theme:"iphone",device:"iPhone"},{theme:"iphone",device:"other"}],dojoMobileCustom:[{theme:"custom",device:"Android"},{theme:"custom",device:"BlackBerry"},
{theme:"custom",device:"iPad"},{theme:"custom",device:"iPhone"},{theme:"custom",device:"other"}],isThemeHTML:function(a){return-1<a.getName().indexOf("dojo-theme-editor.html")},CloneTheme:function(a,b,d,e,g,f){function c(a){var b=[];a.forEach(function(a){a=h.findResource(u+"/"+a);a=(new n(a.getPath())).relativeTo("./"+p,!0);for(var c="..",d=0;d<a.segments.length;d++)c=c+"/"+a.segments[d];b.push(c)});return b}d=[];g.getFile();f=(new n(e)).removeLastSegments(0);f=h.findResource(f.toString());f.readOnly()&&
f.createResource();h.createResource(e,!0);var m=h.findResource(e);g.getFile().getName();var q=(new n(m.getPath())).lastSegment();e=m.createResource(q+".theme");f=m.createResource(q+".css");var p=this.getThemeLocation(),u=g.getFile().parent.getPath(),A=c(g.themeEditorHtmls),x=c(g.meta),z=" ";c(g.files).forEach(function(a){z=z+'@import url("'+a+'");'});a={className:g.className,name:a,version:b||g.version,specVersion:g.specVersion,files:[""+q+".css"],meta:x,themeEditorHtmls:A,useBodyFontBackgroundClass:g.useBodyFontBackgroundClass};
g.helper&&(a.helper=g.helper.declaredClass?g.helper.declaredClass:g.helper);g.base&&(a.base=g.base);g.type&&(a.type=g.type);if(g.conditionalFiles)for(a.conditionalFiles=g.conditionalFiles,g=c(g.conditionalFiles),b=0;b<a.conditionalFiles.length;b++)q=m.createResource(a.conditionalFiles[b]),d.push(q.setContents('@import url("'+g[b]+'");'));g=e.setContents(JSON.stringify(a));g.themeFile=e;d.push(g);d.push(f.setContents(z));return{promise:k(d),themeFile:e}},getHelper:function(a){if(a){if(a.helper&&"string"!=
typeof a.helper)return a.helper;var b=a.helper;if(b){var c=new dojo.Deferred;require([b],function(a){a.declaredClass=b;b=a;c.resolve({helper:b})});return c}}},getThemeSet:function(a){var b=g.getThemeSets(f.getProject()),c=dojo.clone(this.dojoMobileDefault),d;b||(b=this.dojoThemeSets);b=dojo.clone(b);if(a){if(d=a._getDojoJsElem().getAttribute("data-dojo-config"))d=require.eval("({ "+d+" })","data-dojo-config"),d.themeMap&&(c=g.getDojoxMobileThemesFromThemeMap(a,d.themeMap));var e=a.getTheme();if(null==
e)console.error("have no desktop theme, abort!");else for(var h=0,m=b.themeSets.length;h<m;h++)if(d=b.themeSets[h],d.desktopTheme===e.name&&this.themeSetEquals(c,d.mobileTheme))return d}e||(console.error("maq hack, restore desktop theme"),e={name:"claro"});d={name:this.none_themeset_name,desktopTheme:a?e.name:"claro",mobileTheme:c};b.themeSets.push(d);return d},getBase:function(){if(f.singleProjectMode())return f.getProject()},getThemeLocation:function(){var a=this.getBase(),b=d.getPreferences("davinci.ui.ProjectPrefs",
a);return(new n(a)).append(b.themeFolder)},getTheme:function(a,d){d=b.getThemes(f.getProject(),this.workspaceOnly);for(var c=0;c<d.length;c++)if(d[c]&&d[c].name===a)return d[c]},getThemeByCssFile:function(a){var c=b.getThemes(f.getProject(),this.workspaceOnly);a=h.findResource(a.url).getPath();for(var d=0;d<c.length;d++)for(var e=c[d].getFile().getParentFolder().getPath(),g=0;g<c[d].files.length;g++)if(e+"/"+c[d].files[g]===a)return c[d];return null},getDojoxMobileThemeMap:function(a,b){for(var c=
[],d=[".*","iphone",[]],e=0;e<b.length;e++)if(b[e].theme!=this.none_theme&&b[e].theme!=this.default_theme){var g=this.getTheme(b[e].theme);if(g){var f;g.path&&g.path[0]?(f=g.path[0].lastIndexOf("/"),f=new n(g.path[0].substring(0,f+1)+g.files[0])):f=(new n(g.getFile().parent.getPath())).append(g.files[0]);var h=a.getFullResourcePath();f=f.relativeTo(h,!0).toString();b[e].device===this.other_device?d=[".*",g.base,[f]]:c.push([b[e].device,g.base,[f]])}}c.push(d);return c},getDojoxMobileThemesFromThemeMap:function(a,
d){var c=b.getThemes(f.getProject(),this.workspaceOnly),e=[];d.forEach(function(b,d,g){for(g=0;g<c.length;g++){d=c[g];var f=(new n(d.getFile().parent.getPath())).append(d.files[0]),h=a.getFullResourcePath();if(f.relativeTo(h,!0).toString()==b[2][0]){g={};g.device=b[0];g.theme=d.name;".*"===g.device&&(g.device="other");e.push(g);break}}},this);return e},themeSetEquals:function(a,b){function c(a){var b=0,c;for(c in a)a.hasOwnProperty(c)&&b++;return b}if(typeof a!==typeof b)return!1;if("function"===
typeof a)return a.toString()===b.toString();if(a instanceof Object&&b instanceof Object){if(c(a)!==c(b))return!1;var d=!0,e;for(e in a)if(d=this.themeSetEquals(a[e],b[e]),!d)return!1;return!0}return a===b},themeMapsEqual:function(a,b){a=JSON.stringify(a);b=JSON.stringify(b);return a===b},singleMobileTheme:function(a){for(var b=a.mobileTheme[0].theme,c=1;c<a.mobileTheme.length;c++)if(a.mobileTheme[c].theme!=b)return!1;return!0},getThemeSets:function(a){var b=e.getDefaultThemeSet(),c=null;if(b){var f=
!1;if(c=d.getPreferences("maqetta.dojo.themesets",a)){for(var h=!1,m=0;m<c.themeSets.length;m++)if(c.themeSets[m].name===b.name){h=!0;g.themeSetEquals(c.themeSets[m],b)||(c.themeSets[m]=b,f=!0);break}h||(c.themeSets.push(b),f=!0)}else c=g.dojoThemeSets,c.themeSets[0]=b,f=!0;f&&g.saveThemeSets(a,c)}return c},saveThemeSets:function(a,b){d.savePreferences("maqetta.dojo.themesets",a,b)}};g.none_themeset={name:g.none_themeset_name,desktopTheme:"claro",mobileTheme:dojo.clone(g.dojoMobileDefault)};g.default_themeset=
{name:g.desktop_default,desktopTheme:"claro",mobileTheme:dojo.clone(g.dojoMobileDefault)};g.custom_themeset={name:g.mobile_default,desktopTheme:"claro",mobileTheme:g.dojoMobileCustom};g.dojoThemeSets={version:"1.7",specVersion:"0.8",helper:"maq-metadata-dojo/dojox/mobile/ThemeHelper",themeSets:[g.custom_themeset]};return g})},"davinci/html/HTMLFile":function(){define("dojo/_base/declare davinci/html/HTMLItem davinci/html/HTMLParser davinci/html/CSSSelector davinci/html/HTMLElement davinci/html/CSSImport davinci/html/CSSFile davinci/model/Model davinci/model/Path".split(" "),
function(p,k,f,e,b,d,n,a,m){return p("davinci.html.HTMLFile",k,{constructor:function(a){this.url=this.fileName=a;this.elementType="HTMLFile";this._loadedCSS={};this._styleElem=null},save:function(a){var b,c=system.resource.findResource(this.fileName);this.getText();c?(b=this.getText(),b=c.setContents(b,a)):console.error("couldnt find file in resources : "+this.fileName);return b},getText:function(a){a=a||{};a.indent=0;for(var b="",c=0;c<this.children.length;c++){var d=this.children[c],b=b+d.getText(a);
"HTMLComment"==d.elementType&&(b+=this._addWS(d._fmLine,d._fmIndent))}return b},getDocumentElement:function(a){for(a=0;a<this.children.length;a++)if("html"==this.children[a].tag)return this.children[a]},findElement:function(a){var b=this.getDocumentElement();if(b)return b.findElement(a)},getMatchingRules:function(a,b){var c={visit:function(b){if("CSSFile"==b.elementType){var c=[];b=b.getMatchingRules(a,[],c);for(var d=0;d<b.length;d++)for(var e=0;e<this.matchLevels.length;e++)if(c[d]>this.matchLevels[e]){this.matchLevels.splice(e,
0,c[d]);this.rules.splice(e,0,b[d]);break}0==this.rules.length&&(this.rules=b,this.matchLevels=c);return!0}return!1},matchLevels:[],rules:[]};this.visit(c);return b?{rules:c.rules,matchLevels:c.matchLevels}:c.rules},getRule:function(a){if(!a)return[];var b=e.parseSelectors(a);a={visit:function(a){return"CSSFile"==a.elementType?(a=a.getRule(b),this.rules=this.rules.concat(a||[]),!0):!1},rules:[]};this.visit(a);return a.rules},setText:function(a,b){this.visit({visit:function(a){"CSSImport"==a.elementType&&
a.close()}});this.children=[];this._styleElem=null;a=f.parse(a||"",this);var c="";b||0!=a.errors.length||(c=this.getText(),this.children=[],a=f.parse(c,this));this.endOffset=a.endOffset;this.errors=a.errors;var d=this;b||this.visit({visit:function(a){"CSSImport"!=a.elementType||a.cssFile||(a.load(!0),dojo.connect(a.cssFile,"onChange",null,dojo.hitch(d,"onChange")))}});this.onChange()},hasStyleSheet:function(a){for(var b=this.find({elementType:"CSSImport"}),c=0;c<b.length;c++)if(b[c].url==a)return!0;
return!1},addStyleSheet:function(a,e,c,f,n){var g=new m(this.url||this.fileName),g=g.getParentPath().append(a),g=g.toString();c||(this._loadedCSS[g]=require("davinci/model/Factory").getModel({url:g,includeImports:!0,loader:n}));e&&this._loadedCSS[g].setText(e);this.onChange();this._styleElem||(e=this.find({elementType:"HTMLElement",tag:"head"},!0),n=e.getChildElement("style"),n||(n=new b("style"),e.addChild(n)),this._styleElem=n);e=new d;e.parent=this;e.url=a;f?this._styleElem.insertBefore(e,f):this._styleElem.addChild(e);
c||e.load(!0)},close:function(){this.visit({visit:function(a){"CSSImport"==a.elementType&&a.close()}});require("davinci/model/Factory").closeModel(this)},getLabel:function(){return"\x3c\x3e"},getID:function(){return this.fileName},updatePositions:function(b,d){(new a(this)).updatePositions(this,b,d);this.visit({visit:function(a){if(a.endOffset<b)return!0;"HTMLElement"==a.elementType&&a.startTagOffset>b&&(a.startTagOffset+=d)}})},mapPositions:function(a){var b=this.getText();a=a.getText();b=b.indexOf(a);
a=b+a.lastIndexOf("\x3e")+1;return{startOffset:b,endOffset:a}},reportPositions:function(){this.visit({visit:function(a){}})},evaluate:function(a){if("/"!==a.charAt(0))console.error("invalid XPath string");else{var b=this;a.substr(1).split("/").forEach(function(a){a=a.match(this._RE_XPATH);var c=a[1];a=a[2];var d;d=b.children.filter(function(a){return a.tag===c});!a&&1<d.length?console.error("invalid XPath string; no index specified for multiple elements"):b=a?d[a-1]:d[0]},this);return b}},_RE_XPATH:/(\w+)(?:\[(\d+)\])?/})})},
"davinci/html/HTMLParser":function(){define("dojo/_base/declare davinci/html/HTMLText davinci/html/HTMLElement davinci/html/HTMLAttribute davinci/html/HTMLComment davinci/html/PHPBlock davinci/model/parser/Tokenizer davinci/html/CSSParser".split(" "),function(p,k,f,e,b,d,n,a){var m=function(){var a={autoSelfClosers:{br:!0,img:!0,hr:!0,link:!0,input:!0,meta:!0,col:!0,frame:!0,base:!0,area:!0},doNotIndent:{pre:!0,"!cdata":!0}},b={autoSelfClosers:{},doNotIndent:{"!cdata":!0}},c=a,d=!1,e=function(){function a(a,
c){var g=a.next();if("\x3c"==g){if(a.equals("!"))return a.next(),a.equals("[")?a.lookAhead("[CDATA[",!0)?(c(d("xml-cdata","]]\x3e")),null):"xml-text":a.lookAhead("--",!0)?(c(d("xml-comment","--\x3e")),null):a.lookAhead("DOCTYPE",!0)?(a.nextWhileMatches(/[\w\._\-]/),c(d("xml-doctype","\x3e")),"xml-doctype"):"xml-text";if(a.equals("?")){a.next();if(a.lookAhead("php",!0,!1,!0))return c(e("php-block","?\x3e")),null;a.nextWhileMatches(/[\w\._\-]/);c(d("xml-processing","?\x3e"));return"xml-processing"}a.equals("/")&&
a.next();c(b);return"xml-punctuation"}if("\x26"==g){for(;!a.endOfLine()&&";"!=a.next(););return"xml-entity"}a.nextWhileMatches(/[^&<\n]/);return"xml-text"}function b(b,d){var e=b.next();if("\x3e"==e)return d(a),"xml-punctuation";if(/[?\/]/.test(e)&&b.equals("\x3e"))return b.next(),d(a),"xml-punctuation";if("\x3d"==e)return"xml-punctuation";if(/[\'\"]/.test(e))return d(c(e)),null;b.nextWhileMatches(/[^\s\u00a0=<>\"\'\/?]/);return"xml-name"}function c(a){return function(c,d){for(;!c.endOfLine();)if(c.next()==
a){d(b);break}return"xml-attribute"}}function d(b,c){return function(d,e){for(;!d.endOfLine();){if(d.lookAhead(c,!0)){e(a);break}d.next()}return b}}function e(b,c){return function(d,e){for(var g=!1;!d.endOfLine();){if(d.lookAhead(c,!0)){g=!0;e(a);break}d.next()}if(!g&&d.endOfLine())d.next();else{for(;d.lookAheadRegex(/^[\ \t]/,!0););d.endOfLine()&&d.next()}return b}}return function(b,c){return n.tokenizer(b,c||a)}}();return{make:function(a){function b(a){for(var b=a.length-1;0<=b;b--)L.push(a[b])}
function g(){b(arguments);R=!0}function f(){b(arguments);R=!1}function h(){H.style+=" xml-error"}function m(a){return function(b,c){c==a?g():(h(),g(arguments.callee))}}function n(a,b){var d=c.doNotIndent.hasOwnProperty(a)||M&&M.noIndent;M={prev:M,name:a,indent:P,startOfLine:b,noIndent:d}}function k(a){return function(b,c){var e=a;if(e&&e.noIndent)return c;if(d&&/<!\[CDATA\[/.test(b))return 0;e&&/^<\//.test(b)&&(e=e.prev);for(;e&&!e.startOfLine;)e=e.prev;return e?e.indent+indentUnit:0}}function q(){return f(p,
q)}function p(a,b){"\x3c"==b?g(u,N,G(1==O)):"\x3c/"==b?g(A,m("\x3e")):("xml-cdata"==a?(M&&"!cdata"==M.name||n("!cdata"),/\]\]>$/.test(b)&&(M=M.prev)):S.hasOwnProperty(a)||h(),g())}function u(a,b){"xml-name"==a?(Q=b.toLowerCase(),H.style="xml-tagname",g()):(Q=null,f())}function A(a,b){"xml-name"==a&&(H.style="xml-tagname",M&&b.toLowerCase()==M.name?M=M.prev:h());g()}function G(a){return function(b,d){"/\x3e"==d||"\x3e"==d&&c.autoSelfClosers.hasOwnProperty(Q)?g():"\x3e"==d?(n(Q,a),g()):(h(),g(arguments.callee))}}
function N(a){"xml-name"==a?(H.style="xml-attname",g(J,N)):f()}function J(a,b){"\x3d"==b?g(K):"\x3e"==b||"/\x3e"==b?f(G):f()}function K(a){"xml-attribute"==a?g(K):f()}var I=e(a),H,L=[q],O=0,P=0,Q=null,M=null,R,S={"xml-text":!0,"xml-entity":!0,"xml-comment":!0,"xml-processing":!0,"xml-doctype":!0,"php-block":!0};return{indentation:function(){return P},next:function(){H=I.next();"whitespace"==H.style&&0==O?P=H.value.length:O++;"\n"==H.content&&(P=O=0,H.indentation=k(M));if("whitespace"==H.style||"xml-comment"==
H.type||"php-block"==H.type)return H;for(;;)if(R=!1,L.pop()(H.style,H.content),R)return H},copy:function(){var a=L.concat([]),b=I.state,c=M,d=this;return function(g){L=a.concat([]);O=P=0;M=c;I=e(g,b);return d}}}},electricChars:"/",configure:function(e){null!=e.useHTMLKludges&&(c=e.useHTMLKludges?a:b);e.alignCDATA&&(d=e.alignCDATA)}}}();return{parse:function(h,g){function c(a,b){C=new k;C.wasParsed=!0;C.startOffset=b;y[y.length-1].addChild(C,void 0,!0);C.value=a}function q(a){a.content!=a.value&&c(a.value.substring(a.content.length),
a.offset+a.value.length)}function p(a,b){a=a.split("\n");var c=a[a.length-1].length;b.children.length?(lastElement=b.children[b.children.length-1],lastElement._fmLine=a.length-1,lastElement._fmIndent=c):(b._fmChildLine=a.length-1,b._fmChildIndent=c)}function u(){if(null!=C&&!C.value.match(/\S/)){var a=y[y.length-1];a.children.pop();p(C.value,a)}C=null}function x(){var b=y[y.length-1];B.nextWhileMatches(/[\s\u00a0]/);var c=B.get();null!=C?(C.value+=c,u()):p(c,b);a.parse(B,b)}function z(a){for(r=w.next();a&&
"whitespace"==r.style;)r=w.next();return r}var B=n.stringStream({next:function(){if(1==++this.count)return h;throw StopIteration;},count:0,text:h}),w=m.make(B),r,v=[],y=[];y.push(g);var C,E,F;try{do switch(r=w.next(),r.style){case "xml-punctuation":u();if("\x3c"==r.content){var D=new f;D.wasParsed=!0;D.startOffset=r.offset;y[y.length-1].addChild(D,void 0,!0);z(!0);for("xml-tagname"==r.style?D.tag=r.content:v.push("expecting tag name");"xml-attname"==(r=z(!0)).style;){var G=new e;G.wasParsed=!0;D.attributes.push(G);
G.name=r.content;G.startOffset=r.offset;z(!0);if("\x3d"==r.content)if(r=w.next(),"xml-attribute"==r.style){var N=r.content;G.setValue(N.substring(1,N.length-1))}else v.push("expecting attribute value");else G.noValue=!0,G.setValue(!0);G.endOffset=r.offset-1;if(G.noValue&&"xml-attname"!=r.style)break}"xml-punctuation"!=r.style?v.push("expecting \x3e"):(D.startTagOffset=r.offset,"\x3e"==r.content?y.push(D):(D.noEndTag=!0,D=y[y.length-1]),q(r));"style"==D.tag&&x()}else"\x3c/"==r.value&&(g=D,r=w.next(),
"script"==D.tag&&(D.script=D.getElementText()),y.pop(),D=y[y.length-1],r=w.next(),g.endOffset=r.offset,q(r));F=null;break;case "xml-text":case "whitespace":case "xml-entity":E?E.value+=r.value:F?F.value+=r.value:C?C.value+=r.value:c(r.value,r.offset);F=null;break;case "xml-comment":u();var J=new b;J.wasParsed=!0;J.startOffset=r.offset;J.value=r.content.substring(4,r.content.length-3);J.endOffset=r.offset+r.content.length;y[y.length-1].addChild(J,void 0,!0);F=null;break;case "php-block":u();var K=
new d;K.wasParsed=!0;K.startOffset=r.offset;K.value=r.content;K.endOffset=r.offset+r.content.length;y[y.length-1].addChild(K,void 0,!0);F=K;break;case "xml-doctype":E||(u(),J=new b,J.wasParsed=!0,J.startOffset=r.offset,J.value=r.value.substring(2),y[y.length-1].addChild(J,void 0,!0),J.isProcessingInstruction=!0,r=w.next());var I=r.content.length-1;"\x3e"==r.content.charAt(r.content.length-1)?(J.endOffset=r.offset+r.content.length,J.value+=r.content.substring(0,I),q(r),E=void 0):(E=J,J.value+=r.content);
F=null}while(1)}catch(H){}return{errors:v,endOffset:r?r.offset:0}}}})},"davinci/html/PHPBlock":function(){define(["dojo/_base/declare","davinci/html/HTMLItem"],function(p,k){return p("davinci.html.PHPBlock",k,{constructor:function(f){this.elementType="PHPBlock";this.value=f||""},getText:function(f){return f.excludeIgnoredContent?"":this.value}})})},"davinci/model/parser/Tokenizer":function(){define(["dojo/_base/declare","davinci/js/JSExpression"],function(p,k){return{stringStream:function(f){function e(){for(;d==
b.length;){a+=b;b="";d=0;try{b=f.next()}catch(m){if(m!=StopIteration)throw m;return!1}}return!0}var b="",d=0,n=0,a="";return{peek:function(){return e()?b.charAt(d):null},next:function(){if(!e()){if(0<a.length)throw"End of stringstream reached without emptying buffer ('"+a+"').";throw StopIteration;}return b.charAt(d++)},get:function(){var e=a;a="";0<d&&(e+=b.slice(0,d),b=b.slice(d),d=0);n+=e.length;return e},getOffset:function(){return n},push:function(a){b=b.slice(0,d)+a+b.slice(d);n-=a.length},
lookAhead:function(e,h,g,c){function m(a){return c?a.toLowerCase():a}e=m(e);var n=!1,k=a,p=d;for(g&&this.nextWhileMatches(/[\s\u00a0]/);;){g=d+e.length;var z=b.length-d;if(g<=b.length){n=e==m(b.slice(d,g));d=g;break}else if(e.slice(0,z)==m(b.slice(d))){a+=b;b="";try{b=f.next()}catch(B){if(B!=StopIteration)throw B;break}d=0;e=e.slice(z)}else break}n&&h||(b=a.slice(k.length)+b,d=p,a=k);return n},lookAheadRegex:function(a,e){if("^"!=a.source.charAt(0))throw Error("Regexps passed to lookAheadRegex must start with ^");
for(;-1==b.indexOf("\n",d);)try{b+=f.next()}catch(g){if(g!=StopIteration)throw g;}(a=b.slice(d).match(a))&&e&&(d+=a[0].length);return a},more:function(){return null!==this.peek()},applies:function(a){var b=this.peek();return null!==b&&a(b)},nextWhile:function(a){for(var b;null!==(b=this.peek())&&a(b);)this.next()},matches:function(a){var b=this.peek();return null!==b&&a.test(b)},nextWhileMatches:function(a){for(var b;null!==(b=this.peek())&&a.test(b);)this.next()},equals:function(a){return a===this.peek()},
endOfLine:function(){var a=this.peek();return null==a||"\n"==a}}},tokenizer:function(f,e){function b(b){return"\n"!=b&&/^[\s\u00a0]*$/.test(b)}var d={state:e,take:function(d){"string"==typeof d&&(d={style:d,type:d});d.offset=f.getOffset();d.content=(d.content||"")+f.get();/\n$/.test(d.content)||f.nextWhile(b);d.value=d.content+f.get();return d},next:function(){if(!f.more())throw StopIteration;var e;if(f.equals("\n"))return f.next(),this.take("whitespace");if(f.applies(b))e="whitespace";else for(;!e;)e=
this.state(f,function(a){d.state=a});return this.take(e)}};return d}}})},"davinci/js/JSExpression":function(){define(["dojo/_base/declare","davinci/js/JSElement"],function(p,k){return p("davinci.js.JSExpression",k,{constructor:function(){this.elementType="JSExpression"},getText:function(){var f="";this.comment&&(f+=this.printNewLine(context)+this.comment.getText(context));this.label&&(f+=this.printNewLine(context)+this.label.getText(context));return f},add:function(f){}})})},"davinci/js/JSElement":function(){define(["dojo/_base/declare",
"davinci/js/JSModel"],function(p,k){var f=null,e=null;return p("davinci.js.JSElement",k,{constructor:function(){this.elementType="JSElement";null!==f&&(this.comment=f,f=null);null!==e&&(this.label=e,e=null)},printNewLine:function(b){for(var d="\n",e=0;e<b.indent;e++)d+=" ";return d},printStatement:function(b,d){return this.printNewLine(b)+d.getText(b)+(d.nosemicolon?"":";")},add:function(b){this.addChild(b)},init:function(b,d,e){},getLabel:function(){context={indent:0};return this.getText(context)},
getID:function(){return this.parent.getID()+":"+this.startLine+":"+this.getLabel()},getSyntaxPositions:function(b){function d(d,e,g,c){"undefined"!=typeof b&&b!=d||a.push({line:d,col:e,length:g,type:c})}function e(d,e,g){"undefined"!=typeof b&&b!=d[0]||a.push({line:d[0],col:d[1],length:e,type:g})}var a=[];this.visit({visit:function(a){"JSFunction"==a.elementType?(d(a.startLine,a.startCol,8,"keyword"),e(a.leftParenPos,1,"delimiter"),e(a.rightParenPos,1,"delimiter"),e(a.leftBracePos,1,"delimiter"),
e(a.rightBracePos,1,"delimiter")):"JSVariableDeclaration"==a.elementType?d(a.startLine,a.startCol,3,"keyword"):"JSVariableFragment"==a.elementType?a.equalPos?e(a.equalPos,1,"operator"):d(a.startLine,a.startCol,1,"name"):"JSNameReference"==a.elementType&&d(a.startLine,a.startCol,a.endCol-a.startCol,"name")},endVisit:function(a){return!0}});return a}})})},"davinci/js/JSModel":function(){define(["dojo/_base/declare","davinci/model/Model"],function(p,k){davinci.js||(davinci.js={});return p("davinci.js.JSModel",
k,{})})},"davinci/html/CSSParser":function(){define("dojo/_base/declare davinci/html/CSSSelector davinci/html/CSSCombinedSelector davinci/html/CSSRule davinci/html/CSSProperty davinci/html/CSSAtRule davinci/html/CSSImport davinci/model/parser/Tokenizer davinci/model/Comment".split(" "),function(p,k,f,e,b,d,n,a,m){var h=null,g=function(){function b(a,b,c){return function(d){return!a||/^\}/.test(d)?c:b?c+2*indentUnit:c+indentUnit}}var d=function(){function b(a,b){var g=a.next();if("@"==g)return a.nextWhileMatches(/[a-zA-Z0-9_-]/),
"css-at";if("/"==g&&a.equals("*"))return b(c),null;if("\x3c"==g&&a.equals("!"))return b(d),null;if("\x3d"==g)return"css-compare";if(!a.equals("\x3d")||"~"!=g&&"|"!=g){if('"'==g||"'"==g)return b(e(g)),null;if("#"==g)return a.nextWhileMatches(/[\w-]/),"css-hash";if("!"==g)return a.nextWhileMatches(/[ \t]/),a.nextWhileMatches(/\w/),"css-important";if(/\d/.test(g))return a.nextWhileMatches(/[\w.%]/),"css-unit";if(/[,.+>*\/]/.test(g))return"css-select-op";if(/[;{}:\[\]]/.test(g))return"css-punctuation";
a.nextWhileMatches(/[\w\\\-_]/);return"css-identifier"}a.next();return"css-compare"}function c(a,c){for(var d=!1;!a.endOfLine();){var e=a.next();if(d&&"/"==e){c(b);break}d="*"==e}return"css-comment"}function d(a,c){for(var d=0;!a.endOfLine();){var e=a.next();if(2<=d&&"\x3e"==e){c(b);break}d="-"==e?d+1:0}return"css-comment"}function e(a){return function(c,d){for(var e=!1;!c.endOfLine();){var g=c.next();if(g==a&&!e)break;e=!e&&"\\"==g}e||d(b);return"css-string"}}return function(c,d){return a.tokenizer(c,
d||b)}}();return{make:function(a,c){c=c||0;var e=d(a),g=!1,f=!1,h=!1,m={next:function(){var a=e.next(),d=a.style,m=a.content;"css-hash"==d&&(d=a.style=f?"css-colorcode":"css-identifier");"css-identifier"==d&&(f?a.style="css-value":g||h||(a.style="css-selector"));"\n"==m&&(a.indentation=b(g,f,c));"{"==m&&"@media"==h?h=!1:"{"==m?g=!0:"}"==m?g=f=h=!1:";"==m?f=h=!1:g&&"css-comment"!=d&&"whitespace"!=d?f=!0:g||"css-at"!=d||(h=m);return a},copy:function(){var a=g,b=f,c=e.state;return function(h){e=d(h,
c);g=a;f=b;return m}}};return m},electricChars:"}"}}();g.parse=function(c,p){function q(){var a;r=w.next();for(var b=!1;"css-comment"==r.style||"whitespace"==r.style;){if("css-comment"==r.style||b)h||(h=new m),a=r.content,0===r.content.indexOf("/*")&&(a=a.substring(2),b=!0,h.addComment("block",void 0,void 0,"")),-1<a.lastIndexOf("*/")&&a.lastIndexOf("*/")==a.length-2&&(a=a.substring(0,a.length-2),b=!1),h.appendComment(a);r=w.next()}return r}function u(){v=new k;v.startOffset=r.offset;v.parent=D;y?
(y.selectors.push(v),v.parent=y):D.selectors.push(v)}function x(){var a=v;a.endOffset=r.offset-1;y||(y=new f,y.parent=D,y.selectors.push(a),v.startOffset=a.startOffset,D.selectors[D.selectors.length-1]=y);u();y.combiners.push(C);C=" "}var z,B;"string"==typeof c?z=a.stringStream({next:function(){if(1==++this.count)return c;throw StopIteration;},count:0,text:c}):(z=c,B=!0);var w=g.make(z),r,v,y,C=" ",E=[],F=[],D,G;try{do switch(q(),r.style){case "css-selector":case "css-select-op":if(B&&"\x3c"==r.content)throw z.push("\x3c"),
StopIteration;D=new e;F.push(D);D.startOffset=r.offset;p&&p.addChild(D,void 0,!0);G=!1;y=void 0;C=" ";u();a:for(;;){switch(r.style){case "css-select-op":switch(r.content){case ",":y=void 0;u();break;case ".":G&&x();q();v.cls=v.cls?v.cls+"."+r.content:r.content;G=r.value.length>r.content.length;break;case "*":(v.element||v.cls)&&x();v.element="*";break;case "+":case "\x3e":C=r.content,x()}break;case "css-selector":"css-identifier"==r.type?((v.element||v.cls||G)&&x(),v.element=r.content):"css-hash"==
r.type&&((v.id||G)&&x(),v.id=r.content.substring(1));G=r.value.length>r.content.length;break;case "css-punctuation":if("{"==r.content)break a;else":"==r.content?(q(),":"==r.content?(q(),v.pseudoElement=r.content):(v.pseudoRule=r.content,G=!0)):"["==r.content&&(q(),v.attribute={name:r.content},q(),"\x3d"===r.content||"~\x3d"===r.content||"|\x3d"===r.content)&&(v.attribute.type=r.content,q(),v.attribute.value=r.content.substring(1,r.content.length-1),q())}q()}h&&(D.comment=h,h=null);for(v.endOffset=
r.offset-1;"}"!=q().content;){var N=r.offset,J=r.content,K=!1;"css-hash"==r.type?(q(),"css-identifier"==r.type?J+=r.content:K=!0):"css-identifier"!=r.type&&("*"!=r.content?E.push("expecting identifier around "+v.getText()+"{ "+I.name+": "+propery.value):(q(),J+=r.content));var I=new b;I.startOffset=N;I.parent=D;h&&(I.comment=h,h=null);D.properties.push(I);D.addChild(I,void 0,!0);I.name=J;K||":"!=q().content&&E.push("expecting ':' "+v.getText()+"{ "+I.name+": "+propery.value);q();I.value=r.value;if("url"==
I.value){for(;")"!=q().content;)I.value+=r.value;I.value+=r.value}for(;";"!=q().content&&"}"!=r.content;)I.value+=r.value;h&&(I.postComment=h,h=null);I.endOffset=r.offset-1;if("}"==r.content)break}h&&(I.postComment=h,h=null);D.endOffset=r.offset;break;case "css-at":var H=r.content.substring(1),L="import"==H?new n:new d;L.startOffset=r.offset;p&&p.addChild(L,void 0,!0);if("import"==H)K=L,q(),"url"==r.content&&(K.isURL=!0,q(),q()),K.url=r.content.substring(1,r.content.length-1),K.isURL&&q(),q();else if(0<=
H.indexOf("keyframes")){var O=K="",P=!1,Q="\t\t";q();K=r.content;"."==K&&(q(),K+=r.content);q();L.value=r.content+"\n";q();if(0<=r.content.indexOf("from")||0<=r.content.indexOf("to")||0<=r.content.indexOf("%"))a:for(;;){L.value+="\t"+r.content+" ";q();for(L.value+=r.content+"\n";"}"!=q().content;){P&&(Q="\t\t",P=!1);if(";"==r.content)O="\n",P=!0;else if(":"==r.content||")"==r.content)O=" ";L.value+=Q+r.content+O;Q=O=""}L.value+="\t"+r.content+"\n";q();if("}"==r.content)break a}else E.push("inside keyframes decl expecting from/to blocks or nn% blocks");
L.value+=r.content;L.name=H+" "+K}else for(L.name=H,L.value="";";"!=q().content;)L.value+=r.content;L.endOffset=r.offset}while(1)}catch(M){h&&D&&(D.postComment=h,h=null)}return{errors:E,model:F}};return g})},"davinci/html/CSSSelector":function(){define(["require","dojo/_base/declare","davinci/html/CSSElement"],function(p,k,f){k=k("davinci.html.CSSSelector",f,{constructor:function(){this.elementType="CSSSelector"},matchesSelector:function(e){if(e.elementType==this.elementType&&this.id==e.id&&this.cls==
e.cls&&this.element==e.element&&this.pseudoRule==e.pseudoRule)return!0},getText:function(e){e="";this.element&&(e+=this.element);this.id&&(e=e+"#"+this.id);this.cls&&(e=e+"."+this.cls);this.pseudoRule&&(e=e+":"+this.pseudoRule);this.pseudoElement&&(e=e+"::"+this.pseudoElement);this.attribute&&(e=e+"["+this.attribute.name,this.attribute.type&&(e=e+this.attribute.type+'"'+this.attribute.value+'"'),e+="]");return e},matches:function(e,b){b=e[b||0];e=0;var d=!1;if(this.id){if(this.id!=b.id)return-1;e+=
100;d=!0}if(this.element){if("*"!=this.element){if(this.element!=b.tagName&&this.element.toUpperCase()!=b.tagName)return-1;e+=1}d=!0}if(this.cls&&b.classes){b=b.classes;if(0<=this.cls.indexOf(".")){for(var d=this.cls.split("."),f=0;f<d.length;f++){for(var a=!1,m=0;m<b.length&&!(a=b[m]==d[f]);m++);if(!a)return-1}e+=10*d.length}else{a=!1;for(m=0;m<b.length&&!(a=b[m]==this.cls&&!this.pseudoRule);m++);if(!a)return-1;e+=10}d=!0}return d?e:-1},getCSSRule:function(){return"CSSRule"==this.parent.elementType?
this.parent:this.parent.parent}});k.parseSelectors=function(e){if("string"==typeof e){e+="{}";var b=new (p("davinci/html/CSSFile"));b.setText(e);return b.children[0].selectors}return e};return k})},"davinci/html/CSSElement":function(){define(["dojo/_base/declare","davinci/model/Model"],function(p,k){return p("davinci.html.CSSElement",k,{constructor:function(){"undefined"!=typeof pushComment&&null!==pushComment&&(this.comment=pushComment,pushComment=null);this.elementType="CSSElement"},getLabel:function(){context=
{indent:0,noComments:!0};return this.getText(context)},onChange:function(f){if(this.parent)if(f)this.parent.onChange(f);else this.parent.onChange(this)},close:function(f){for(f=0;f<this.children;f++)this.children[f].close()},getCSSFile:function(){var f=this.getCSSRule();if(f)return f.parent},getCSSRule:function(){},_convertNode:function(f){if(dojo.isArray(f))return f;for(var e=[];f&&"HTML"!=f.tagName;)e.push({tagName:f.tagName,id:f.id,classes:f.className&&f.className.split(" ")}),f=f.parentNode;return e},
getID:function(){return this.parent.getID()+":"+this.startOffset+":"+this.getLabel()}})})},"davinci/html/CSSCombinedSelector":function(){define(["dojo/_base/declare","davinci/html/CSSElement"],function(p,k){return p("davinci.html.CSSCombinedSelector",k,{constructor:function(){this.selectors=[];this.combiners=[];this.elementType="CSSCombinedSelector"},matchesSelector:function(f){if(f.elementType==this.elementType&&f.selectors.length==this.selectors.length){for(var e=0;e<this.selectors.length;e++)if(this.combiners[e]!=
f.combiners[e]||!this.selectors[e].matchesSelector(f.selectors[e]))return!1;return!0}},getText:function(f){for(var e="",b=0;b<this.selectors.length-1;b++)e+=this.selectors[b].getText(f),e=" "!=this.combiners[b]?e+(" "+this.combiners[b]+" "):e+this.combiners[b];return e+=this.selectors[this.selectors.length-1].getText(f)},matches:function(f){for(var e=this.selectors.length-1,b=0,d=0;d<f.length;d++){var n;if(0<=(n=this.selectors[e].matches(f,d))&&(b+=n,e--,0>e))return b;if(0==d&&0>n)return-1}},visit:function(f){if(!f.visit(this)){for(var e=
0;e<this.children.length;e++)this.children[e].visit(f);for(e=0;e<this.selectors.length;e++)this.selectors[e].visit(f)}f.endVisit&&f.endVisit(this)},getCSSRule:function(){return this.parent}})})},"davinci/html/CSSRule":function(){define(["dojo/_base/declare","davinci/html/CSSElement","davinci/html/CSSParser","davinci/html/CSSProperty"],function(p,k,f,e){return p("davinci.html.CSSRule",k,{constructor:function(){this.elementType="CSSRule";this.selectors=[];this.properties=[]},getText:function(b){var d=
"";b=b||[];this.comment&&!b.noComments&&(d+=this.comment.getText(b));for(var d=d+this.getSelectorText(b),d=d+" {",e=0;e<this.properties.length;e++)d=d+"\n    "+this.properties[e].getText(b);d+="\n}\n";this.postComment&&!b.noComments&&(d+=this.postComment.getText(b));return d},setText:function(b){require("davinci/html/CSSParser").parse(b,this);dojo.mixin(this,this.children[0]);this.startOffset=(this.parent?this.parent.endOffset:0)+1;this.setDirty(!0)},addProperty:function(b,d){b=new e(b,d,this);this.properties.push(b);
this.setDirty(!0);this.onChange()},insertProperty:function(b,d,f){var a;(a=this.getProperty(b))&&this.removeProperty(b);a=new e(b,d,this);this.properties.splice(f,0,a);this.setDirty(!0);this.onChange()},getSelectorText:function(b){for(var d="",e=0;e<this.selectors.length;e++)0<e&&(d+=", "),d+=this.selectors[e].getText(b);return d},matches:function(b){b=this._convertNode(b);for(var d,e=0;e<this.selectors.length;e++)if(0<=(d=this.selectors[e].matches(b)))return d},visit:function(b){if(!b.visit(this)){for(var d=
0;d<this.children.length;d++)this.children[d].visit(b);for(d=0;d<this.selectors.length;d++)this.selectors[d].visit(b)}b.endVisit&&b.endVisit(this)},hasSelector:function(b){for(var d=0;d<this.selectors.length;d++)if(this.selectors[d].getLabel()==b)return!0;return!1},matchesSelectors:function(b){for(var d=0;d<b.length;d++)for(var e=0;e<this.selectors.length;e++)if(this.selectors[e].matchesSelector(b[d]))return!0;return!1},getCSSRule:function(){return this},getLabel:function(){return this.getSelectorText({})},
getProperty:function(b){for(var d=0;d<this.properties.length;d++)if(b==this.properties[d].name)return this.properties[d]},hasProperty:function(b){for(var d=0;d<this.properties.length;d++)if(b==this.properties[d].name)return!0},getProperties:function(b){for(var d=[],e=0;e<this.properties.length;e++)b&&b!=this.properties[e].name||d.push(this.properties[e]);return d},setProperty:function(b,d){var f=this.getProperty(b);d?f?f.value=d:(f=new e,f.name=b,f.value=d,this.properties.push(f),f.parent=this):this.removeProperty(b);
this.setDirty(!0);this.onChange()},removeProperty:function(b){for(var d=0;d<this.properties.length;d++)b==this.properties[d].name&&this.properties.splice(d,1);this.setDirty(!0);this.onChange()},removeAllProperties:function(){this.properties=[];this.setDirty(!0);this.onChange()},removeStyleValues:function(b){for(var d=[],e=0;e<this.properties.length;e++){for(var a,f=0;f<b.length&&!a;f++)a=b[f]==this.properties[e].name;a||(d=this.properties[e])}this.properties=d;this.setDirty(!0);this.onChange()}})})},
"davinci/html/CSSProperty":function(){define(["dojo/_base/declare","davinci/html/CSSElement"],function(p,k){return p("davinci.html.CSSProperty",k,{constructor:function(f,e,b){this.elementType="CSSProperty";this.name=f||"";this.value=e||"";this.parent=b;this.expanded=[];this.lengthValues=[]},getValue:function(){return this.value},getText:function(f){var e="";this.comment&&!f.noComments&&(e+="\n  "+this.comment.getText(f));e+=this.name+" : "+this.value;this.isNotImportant&&(e+=" !important");e+=";";
this.postComment&&!f.noComments&&(e+=this.postComment.getText(f));return e},getCSSRule:function(){return this.parent},addProperty:function(f,e){f=new CSSProperty(f,e,this);this.properties.push(f)},getURL:function(){if(this.url){var f=new davinci.model.Path(this.getCSSFile().url),f=f.getParentPath().append(this.url);return f.toString()}}})})},"davinci/html/CSSAtRule":function(){define(["dojo/_base/declare","davinci/html/CSSElement"],function(p,k){return p("davinci.html.CSSAtRule",k,{constructor:function(){this.elementType=
"CSSAtRule"},getCSSFile:function(){return this.parent},getText:function(f){s="@";return s=s+this.name+" "+this.value+"\n"}})})},"davinci/html/CSSImport":function(){define(["dojo/_base/declare","davinci/html/CSSElement","davinci/model/Path","davinci/html/CSSFile"],function(p,k,f,e){return p("davinci.html.CSSImport",k,{constructor:function(){this.elementType="CSSImport"},getCSSFile:function(){return this.parent},setUrl:function(b){this.url=b},visit:function(b){if(!b.visit(this)){for(var d=0;d<this.children.length;d++)this.children[d].visit(b);
this.cssFile&&this.cssFile.visit(b)}b.endVisit&&b.endVisit(this)},getText:function(b){s="@import ";return s=this.isURL?s+('url("'+this.url+'");'):s+('"'+this.url+'";')},close:function(b){require("davinci/model/Factory").closeModel(this.cssFile);this.connection&&dojo.disconnect(this.connection);delete this.connection},load:function(b){for(var d=this.parent;d&&!d.url&&!d.fileName;)d=d.parent;d=new f(d.url||d.fileName);d=d.getParentPath().append(this.url);d=d.toString();this.cssFile=require("davinci/model/Factory").getModel({url:d,
loader:this.parent.loader,includeImports:this.parent.includeImports||b});this.cssFile.relativeURL=this.url;this.connection=dojo.connect(this.cssFile,"onChange",this.parent,"onChange")}})})},"davinci/html/CSSFile":function(){define("dojo/_base/declare dojo/_base/lang davinci/html/CSSElement davinci/html/CSSRule davinci/html/CSSSelector system/resource davinci/Workbench".split(" "),function(p,k,f,e,b,d,n){return p("davinci.html.CSSFile",f,{constructor:function(a){this.elementType="CSSFile";k.mixin(this,
a);this.options||(this.options={xmode:"style",css:!0,expandShorthand:!1});a=null;this.url&&this.loader?a=this.loader(this.url):this.url&&"app.css"===this.url&&this.setText("BODY {background-color: red!important;}");a&&this.setText(a)},save:function(a){return d.findResourceAsync(this.url).then(function(b){return b.setContents(this.getText(),a)}.bind(this))},close:function(){this.visit({visit:function(a){"CSSImport"==a.elementType&&a.close()}});require(["dojo/_base/connect"],function(a){a.publish("davinci/model/closeModel",
[this])})},addRule:function(a){var b=new e;b.setText(a);this.addChild(b);this.setDirty(!0);return b},setText:function(a){var b=this.children;this.children=[];this.errors=require("davinci/html/CSSParser").parse(a,this).errors;0<this.errors.length&&this.errors[this.errors.length-1].isException&&(this.children=b);this.includeImports&&this.children.forEach(function(a){"CSSImport"==a.elementType&&a.load()});this.onChange()},getText:function(a){a=a||{};a.indent=0;return this.children.map(function(b){return b.getText(a)}).join("")},
getCSSFile:function(){return this},getID:function(){return this.fileName},getMatchingRules:function(a,b,d){a=this._convertNode(a);b=b||[];d=d||[];for(var e=0;e<this.children.length;e++){var c=this.children[e];if("CSSRule"==c.elementType){var f=c.matches(a);if(f){for(var h=!1,m=0;m<d.length;m++)if(f>=d[m]){b.splice(m,0,c);d.splice(m,0,f);h=!0;break}h||(b.splice(0,0,c),d.splice(0,0,f))}}else"CSSImport"==c.elementType&&c.cssFile&&c.cssFile.getMatchingRules(a,b,d)}return b},getRule:function(a){var d;
if(!a)return[];a=b.parseSelectors(a);for(var e=0;e<this.children.length;e++){var g=this.children[e];if("CSSRule"==g.elementType){if(g.matchesSelectors(a)){d=g;break}}else"CSSImport"==g.elementType&&g.cssFile&&(d=g.cssFile.getRule(a)||d)}return d},getRules:function(a){a=b.parseSelectors(a);for(var d=[],e=0;e<this.children.length;e++){var g=this.children[e];"CSSRule"==g.elementType?g.matchesSelectors(a)&&d.push(g):"CSSImport"==g.elementType&&g.cssFile&&(d=d.concat(g.cssFile.getRules(a)))}return d},
getStyleValue:function(a,b){var d=[],e=[];b=this._convertNode(b);this.getMatchingRules(b,d,e);"string"==typeof a&&(a=[a]);return a.map(function(a){for(var b=0,c,g,f=0;f<d.length;f++)(g=d[f].getProperty(a))&&e[f]>b&&(c=g,b=e[f]);return c})}})})},"davinci/model/Comment":function(){define(["dojo/_base/declare","davinci/model/Model"],function(p,k){return p("davinci.model.Comment",k,{constructor:function(){this.elementType="Comment";this.nosemicolon=!0},addComment:function(f,e,b,d){null==this.comments&&
(this.comments=[]);this.comments[this.comments.length]={commentType:f,start:e,stop:b,s:d}},appendComment:function(f){var e=this.comments[this.comments.length-1];e.s+=f;e.stop+=f.length},getText:function(f){f="";for(var e=0;e<this.comments.length;e++)"line"==this.comments[e].commentType?f+="//"+this.comments[e].s+"\n":"block"==this.comments[e].commentType&&(f+="/*"+this.comments[e].s+"*/\n");return f}})})},"davinci/model/Factory":function(){define(["../html/CSSFile","../js/JSFile","../html/HTMLFile",
"system/resource"],function(p,k,f,e){var b=[],d=[],n={getModel:function(a){var e=a.url;if(!e)return null;for(var f=0;f<d.length;f++)if(d[f].url==e)return b[f]++,this.incrementImports(d[f]),d[f];if(/\.html?$/i.test(e)||/\.cfhtml?$/i.test(e))return n.newHTML(a);if(/\.css$/i.test(e))return n.newCSS(a);if(/\.js$/i.test(e))return n.newJS(a)},closeModel:function(a){a=a.url;if(!a)return null;for(var e=0;e<d.length;e++)d[e].url==a&&(b[e]--,0===b[e]&&(d.splice(e,1),b.splice(e,1)))},newHTML:function(a){a=new f(a.url);
d.push(a);b[d.length-1]=1;return a},newCSS:function(a){a=new p(a);d.push(a);b[d.length-1]=1;return a},newJS:function(a){a=new k(a);d.push(a);b[d.length-1]=1;return a},getNewFromResource:function(a){a=a.extension;if(!a)return new f;switch(a){case "html":return new f;case "css":return new p;case "js":case "json":return new k;default:return new f}},incrementImports:function(a){var e={visit:function(a){if("CSSImport"==a.elementType){a=a.cssFile.url;for(var e=0;e<d.length;e++)d[e].url==a&&b[e]++}return!1}};
a&&a.visit(e)},log:function(){for(var a=0;a<d.length;a++);}};require(["dojo/_base/connect"],function(a){a.subscribe("davinci/model/closeModel",n,n.closeModel)});return n})},"davinci/js/JSFile":function(){define(["dojo/_base/declare","davinci/js/JSElement"],function(p,k){return p("davinci.js.JSFile",k,{constructor:function(f){this.elementType="JSFile";this.nosemicolon=!0;this._textContent="";f&&(this.origin=f)},getText:function(f){return this._textContent},setText:function(f){this._textContent=f},
getLabel:function(){return this.fileName},getID:function(){return this.fileName},visit:function(f){if(!f.visit(this))for(var e=0;e<this.children.length;e++)this.children[e].visit(f);f.endVisit&&f.endVisit(this)}})})},"davinci/ve/widgets/CommonProperties":function(){define(["dojo/_base/declare","davinci/workbench/ViewLite","davinci/ve/commands/ModifyCommand"],function(p,k,f){return p("davinci.ve.widgets.CommonProperties",[k],{buildRendering:function(){var e=["title"],b;b="\x3ctable width\x3d'100%' class\x3d'property_table_stretchable' border\x3d'0' cellspacing\x3d'0' cellpadding\x3d'0'\x3e\x3ccolgroup\x3e\x3ccol style\x3d'width:15px;' /\x3e\x3ccol class\x3d'gap02' /\x3e\x3ccol class\x3d'gap03' /\x3e\x3ccol style\x3d'width:15px;' /\x3e\x3c/colgroup\x3e";
var d=0;this._boxes={};for(var f=0;f<e.length;f++)this._boxes[e[f]]={value:""},this._boxes[e[f]].id="davinci_properties_event_"+d++ +"_combo",b+="\x3ctr\x3e",b+="\x3ctd/\x3e",b+="\x3ctd class\x3d'propertyDisplayName'\x3e",b+=e[f]+":",b+="\x3c/td\x3e",b+="\x3ctd\x3e",b+="\x3cinput type\x3d'text' id\x3d'"+this._boxes[e[f]].id+"'\x3e\x3c/input\x3e",b+="\x3c/td\x3e",b+="\x3ctd/\x3e",b+="\x3c/tr\x3e";b+="\x3c/table\x3e";this.domNode=dojo.doc.createElement("div");this.domNode.innerHTML=b;dojo.subscribe("/davinci/ui/widgetValuesChanged",
dojo.hitch(this,this.onWidgetSelectionChange));dojo.subscribe("/davinci/ui/widget/replaced",dojo.hitch(this,this._widgetReplaced));this.inherited(arguments)},onEditorSelected:function(e){this._editor&&this._editor.getContext?(this.context=this._editor.getContext(),this._setValues()):(this.context=this._widget=this._subwidget=null,this._clearValues())},startup:function(){function e(b){return function(){return this._onChange({target:b})}}this.inherited(arguments);for(var b in this._boxes)this._boxes[b].domNode=
dojo.byId(this._boxes[b].id),dojo.connect(this._boxes[b].domNode,"onchange",this,e(b)),dojo.connect(this._boxes[b].domNode,"onfocus",this,"_onFocus"),dojo.connect(this._boxes[b].domNode,"onblur",this,"_onBlur")},_onFocus:function(){this.context&&this.context.blockChange(!0)},_onBlur:function(){this.context&&this.context.blockChange(!1)},_onChange:function(e){e=e.target;var b=dojo.attr(this._boxes[e].domNode,"value");this.context&&this.context.blockChange(!1);if(this._boxes[e].value!=b){this._boxes[e].value=
b;var d={};d[e]=b;e=new f(this._widget,d,null);dojo.publish("/davinci/ui/widgetPropertiesChanges",[{source:this._editor.editor_id,command:e}])}},_widgetReplaced:function(e,b){this._widget===b&&(this._widget=e,this.onWidgetSelectionChange())},onWidgetSelectionChange:function(){this._widget?(this._setValues(),this.set("readOnly",!1)):(this.set("readOnly",!0),this._clearValues())},_clearValues:function(){for(name in this._boxes)this._boxes[name].domNode&&dojo.attr(this._boxes[name].domNode,"value",""),
this._boxes[name].value=null},_setValues:function(){if(this._widget)for(var e in this._boxes){var b=this._widget,d=this._boxes[e];d.domNode&&d.domNode.ownerDocument&&(b.getPropertyValue?(b=b.getPropertyValue(e),d.value!=b&&(d.value=b,dojo.attr(d.domNode,"value",d.value))):(d.value="",dojo.attr(d.domNode,"value","")))}}})})},"davinci/ve/widgets/WidgetProperties":function(){define("dojo/_base/declare dojo/_base/connect davinci/workbench/ViewLite davinci/ve/metadata davinci/commands/CompoundCommand davinci/ve/commands/ModifyCommand ./HTMLStringUtil dijit/form/DateTextBox dijit/form/TimeTextBox xide/types xide/factory".split(" "),
function(p,k,f,e,b,d,n,a,m,h,g){return p("davinci.ve.widgets.WidgetProperties",[f],{key:"widgetSpecific",_connects:null,buildRendering:function(){this.domNode=this.propDom=dojo.doc.createElement("div");dojo.addClass(this.domNode,"propGroup");dojo.attr(this.domNode,"propGroup",this.key);this._connects=[];this.inherited(arguments)},onWidgetSelectionChange:function(){if(this._widget&&this._editor&&"davinci.ve.HTMLPageEditor"==this._editor.editorID){var a=davinci.ve.metadata.query(this._widget),b=this._widget.getParent();
if(b&&b.isWidget&&(b=e.query(b))&&b.childProperties)if(a.$ownproperty)for(var d in b.childProperties)a.$ownproperty[d]=b.childProperties[d];else a.$ownproperty=b.childProperties;if(a&&a.$ownproperty){this._disconnectAll();this._destroyProperties();b={};a.$ownproperty.title||(b.title={datatype:"string"});for(d in a.$ownproperty)b[d]=a.$ownproperty[d];a=this.propDom.innerHTML=this._createWidgetRows(b);-1===a.indexOf("data-dojo-type")&&-1===a.indexOf("dojoType")||dojo.parser.parse(this.propDom);this._setValues();
this._connectAll()}}else this._disconnectAll(),this._destroyProperties()},onEditorSelected:function(a){if((this._editor=a)&&"davinci.ve.HTMLPageEditor"==a.editorID){if(this.context=a.getContext())this._widget=this.context.getSelection()[0]}else this._widget=this.context=null;this.onWidgetSelectionChange()},_createWidgetRows:function(a){this._pageLayout=[];for(var b in a){var c=a[b];if(!c.hidden){var d={display:c.title||b,type:c.datatype,format:c.format,target:b,hideCascade:!0,data:c};if(c.dropdownQueryValues&&
c.dropdownQueryAttribute){var e=[];dojo.forEach(c.dropdownQueryValues,dojo.hitch(this,function(a){a=dojo.query(a,this.context.rootNode);dojo.forEach(a,function(a){e.push(a.getAttribute(c.dropdownQueryAttribute))})}));d.values=e;d.type="comboEdit"}if(dojo.isArray(c.mustHaveAncestor)){for(var g=!1,f=this._widget;!g&&f&&f.getParent()!=this.context.rootWidget;)(f=f.getParent())&&-1<dojo.indexOf(c.mustHaveAncestor,f.type)&&(g=!0);g||(d.disabled=!0)}this._pageLayout.push(d);c.option&&(this._pageLayout[this._pageLayout.length-
1].values=dojo.map(c.option,function(a){return a}),this._pageLayout[this._pageLayout.length-1].type=c.unconstrained?"comboEdit":"combo")}}return n.generateTable(this._pageLayout)},_destroyProperties:function(){var a=this.propDom;for(dojo.forEach(dojo.query("[widgetId]",a).map(dijit.byNode),function(a){a.destroy()});a.firstChild;)dojo._destroyElement(a.firstChild)},_connectAll:function(){function a(a){return function(){return this._onChange({target:a})}}for(var b=0,d=this._pageLayout.length;b<d;b++){var e=
this._pageLayout[b],f=dijit.byId(e.id),m=f||dojo.byId(e.id),n=f?"onChange":"change",k=f?"onFocus":"focus",p=f?"onBlur":"blur";m?(m.pageIndex=b,this._connect(m,n,this,a(b)),this._connect(m,k,this,"_onFieldFocus"),this._connect(m,p,this,"_onFieldBlur"),m.owner=this,m.row=b,g.publish(h.EVENTS.WIDGET_PROPERTY_RENDERED,{view:this,row:e,widget:f,node:m},this)):console.error("cant find "+e.id+" node",e)}},_connect:function(a,b,d,e,g){this._connects.push(k.connect.apply(null,arguments))},_disconnectAll:function(){this._connects.forEach(k.disconnect);
this._connects=[]},_onChange:function(c){c=this._pageLayout[c.target];var e=dijit.byId(c.id),g;this.context&&this.context.blockChange(!1);e?(g=e.get("value"))&&g instanceof Date&&(e instanceof a?g=g.toISOString().substring(0,10):e instanceof m&&(g="T"+g.toTimeString().substring(0,8))):(g=dojo.byId(c.id),g=dojo.attr(g,"checkbox"===g.type?"checked":"value"));if(c.value!=g){c.value=g;e={};e[c.target]=g;c=new b;g=new d(this._widget,e,null);c.add(g);if((e=this._widget.getHelper())&&e.onWidgetPropertyChange)e.onWidgetPropertyChange({widget:this._widget,
compoundCommand:c,modifyCommand:g});dojo.publish("/davinci/ui/widgetPropertiesChanges",[{source:this._editor.editor_id,compoundCommand:c,command:g}])}},_onFieldFocus:function(){this.context&&this.context.blockChange(!0)},_onFieldBlur:function(){this.context&&this.context.blockChange(!1)},_setValues:function(){try{for(var a=0,b=this._pageLayout.length;a<b;a++){var d=this._pageLayout[a],e=dojo.byId(d.id);if(e){var g=this._widget,f=d.target,h;h="_children"===f?(h=g.getChildrenData())&&1===h.length?h[0]:
g.getPropertyValue(f):g.getPropertyValue(f);if(h&&h.toISOString){var m=g.metadata.property[f].format;m&&("date"==m?h=h.toISOString().substring(0,10):"time"==m&&(h="T"+h.toTimeString().substring(0,8)))}if(d.value!=h){d.value=h;var n="boolean"===d.type?"checked":"value",k=dijit.byId(d.id);k?k.attr(n,d.value):dojo.attr(e,n,d.value)}}}}catch(y){debugger}}})})},"davinci/ve/widgets/EventSelection":function(){define("dojo/_base/declare dojo/_base/connect dojo/dom-class system/resource davinci/Runtime davinci/Workbench davinci/model/Path ../../workbench/Preferences ../../workbench/ViewLite ../commands/EventCommand ./HTMLStringUtil ../States xide/types xide/factory".split(" "),
function(p,k,f,e,b,d,n,a,m,h,g,c,q,A){var u=/^State:.*/,x=/^\s*davinci\.states\.setState\s*\(\s*([\'"])((?:(?!\1).)*)\1\s*\)\s*$/,z=/^File:.*/,B=/^\s*location\.href\s*\=\s*([\'"])((?:(?!\1).)*)\1\s*$/,w=function(a){a&&c.getAllStateContainers(a);return[""]},r=function(a){a&&a.match(u)&&(a=a.substring(6),a="davinci.states.setState('"+("Background"==a?"Normal":a)+"')");a&&a.match(z)&&(a="location.href\x3d'"+a.substring(5)+"'");return a},v=function(a){var b;a&&((b=a.match(x))&&(a="State:"+b[2]),(b=a.match(B))&&
(a="File:"+b[2]));return a};p=p("davinci.ve.widgets.EventSelection",[m],{pageTemplate:[{display:"onclick",target:"onclick",type:"state",hideCascade:!0},{display:"ondblclick",target:"ondblclick",type:"state",hideCascade:!0},{display:"onmousedown",target:"onmousedown",type:"state",hideCascade:!0},{display:"onmouseup",target:"onmouseup",type:"state",hideCascade:!0},{display:"onmouseover",target:"onmouseover",type:"state",hideCascade:!0},{display:"onmousemove",target:"onmousemove",type:"state",hideCascade:!0},
{display:"onmouseout",target:"onmouseout",type:"state",hideCascade:!0},{display:"onkeypress",target:"onkeypress",type:"state",hideCascade:!0},{display:"onkeydown",target:"onkeydown",type:"state",hideCascade:!0},{display:"onkeyup",target:"onkeyup",type:"state",hideCascade:!0},{display:"onfocus",target:"onfocus",type:"state",hideCascade:!0},{display:"onblur",target:"onblur",type:"state",hideCascade:!0},{display:"onchange",target:"onchange",type:"state",hideCascade:!0}],buildRendering:function(){this.domNode=
dojo.doc.createElement("div");this.domNode.innerHTML=g.generateTable(this.pageTemplate,{zeroSpaceForIncrDecr:!0});f.add(this.domNode,"EventSelection");this.inherited(arguments)},setReadOnly:function(a){for(var b=0;b<this.pageTemplate.length;b++){var c=this.pageTemplate[b].widget;c?c.set("readOnly",a):(c=this.pageTemplate[b].domNode)&&dojo.attr(c,"disabled",a)}},startup:function(){this.inherited(arguments);for(var a=0;a<this.pageTemplate.length;a++){var b=this.pageTemplate[a],c=dijit.byId(b.id),d=
c||dojo.byId(b.id);A.publish(q.EVENTS.WIDGET_PROPERTY_RENDERED,{view:this,row:b,widget:c,node:d},this)}},onEditorSelected:function(){this._editor&&this._editor.supports("states")||delete this._editor;this._buildSelectionValues()},_onChange:function(a){a=a.target;var b=dijit.byId(this.pageTemplate[a].id),c=b.get("value"),c=r(c),d={};d[this.pageTemplate[a].target]=c;d=new h(this._widget,d);dojo.publish("/davinci/ui/widgetPropertiesChanges",[{source:this._editor.editor_id,command:d}]);this.publish(q.EVENTS.ON_WIDGET_PROPERTY_CHANGED,
{widget:b,editor:this._editor,eventSelection:this,pageTemplate:this.pageTemplate,widgetProperty:this.pageTemplate[a].target,value:c,target:this._widget})},_getRoot:function(){var a=this._editor,b;a&&a.getContext&&(b=(a=a.getContext())&&a.rootNode);return b},_updateValues:function(a){a&&a.node&&a.node._dvWidget&&(a=(a=a.node._dvWidget.getContext())&&a.editor)&&a==b.currentEditor&&(this._buildSelectionValues(),this._widget&&this._setValues())},onWidgetSelectionChange:function(){this._widget?(this._setValues(),
this.setReadOnly(!1)):(this.setReadOnly(!0),this._clearValues())},_clearValues:function(){},_buildSelectionValues:function(){var a=this._getRoot();w(a)},_setValues:function(){for(var a=0;a<this.pageTemplate.length;a++){var b=this.pageTemplate[a].target,c=this._widget,d="";c.properties&&c.properties[b]?d=c.properties[b]:c._srcElement&&(d=c._srcElement.getAttribute(b));d=v(d);(b=dijit.byId(this.pageTemplate[a].id))&&b.set("value",d,!1)}},_widgetPropertiesChanged:function(a){this._updateValues({widget:a[0]})}});
p.getEventSelectionValues=w;p.getEventScriptFromValue=r;p.getValueFromEventScript=v;return p})},"davinci/actions/UndoAction":function(){define(["dojo/_base/declare","./Action","../Workbench"],function(p,k,f){return p("davinci.actions.UndoAction",k,{run:function(e){(e=f.getOpenEditor())&&e.getContext&&e.getContext().getCommandStack().undo()},isEnabled:function(e){var b=(e=f.getOpenEditor())&&e.getContext&&e.getContext();if(e&&b){if(b=b.getCommandStack().canUndo(),"davinci.ve.PageEditor"==e.declaredClass||
"davinci.ve.themeEditor.ThemeEditor"==e.declaredClass)return b}else return!1}})})},"davinci/actions/Action":function(){define(["dojo/_base/declare"],function(p){return p("davinci.actions.Action",null,{item:null,run:function(k){},isEnabled:function(k){return!0},getName:function(){return this.item.label}})})},"davinci/actions/SelectLayoutAction":function(){define(["dojo/_base/declare","./Action","../Workbench","davinci/lang/actions"],function(p,k,f,e){return p("davinci.actions.SelectLayoutAction",k,
{_changeLayoutCommand:function(b){var d=dijit.byId("selectLayout");d&&d.destroyRecursive(!1);if((d=f.getOpenEditor())&&d.getContext){var e=!0;if("absolute"===b||"Absolute positioning"===b)e=!1;d.getContext().setFlowLayout(e);d._visualChanged()}}})})},"davinci/lang/actions":function(){define([],function(){return{select:"Select",save:"Save",selectDirectory:"Select Directory to link to",parentFolder:"Parent Folder:",localName:"Local Name:",link:"Link",downloadResources:"Download Resources",downloadFileName:"Download File Name: ",
downloadNow:"Download now",titleDownload:"Download",invalidFileName:"File names may only contain letters. numbers, and '_'.",editTheme:"Edit Theme",noEditableThemes:"No editable themes found in your workspace. Please create a new theme from one of the Read Only themes.",newWidgetsShouldUse:"New widgets should use: ",selectTheme:"Select a theme",switchingThemes:"Switching themes",filesHasUnsavedChanges:"The file '${0}' has unsaved changes, \"Save\" changes and continue with switching themes.",abs:"Absolute positioning",
flow:"Flow positioning"}})},"davinci/actions/RedoAction":function(){define(["dojo/_base/declare","./Action","../Workbench"],function(p,k,f){return p("davinci.actions.RedoAction",k,{run:function(e){(e=f.getOpenEditor())&&e.getContext&&e.getContext().getCommandStack().redo()},isEnabled:function(e){var b=(e=f.getOpenEditor())&&e.getContext&&e.getContext();if(e&&b){if(b=b.getCommandStack().canRedo(),"davinci.ve.PageEditor"==e.declaredClass||"davinci.ve.themeEditor.ThemeEditor"==e.declaredClass)return b}else return!1}})})},
"davinci/ve/actions/CopyAction":function(){define(["dojo/_base/declare","./_CutCopyAction","../../Runtime"],function(p,k,f){return p("davinci.ve.actions.CopyAction",[k],{_invokeSourceEditorAction:function(e){e.htmlEditor.copyAction.run()},_executeAction:function(e,b,d,n){n=f.clipboard;f.clipboard=d;if(!n)e.onSelectionChange(b)}})})},"davinci/ve/actions/_CutCopyAction":function(){define("dojo/_base/declare davinci/Workbench davinci/ve/actions/ContextAction davinci/commands/CompoundCommand davinci/ve/commands/RemoveCommand davinci/ve/widget".split(" "),
function(p,k,f,e,b,d){return p("davinci.ve.actions.CutAction",[f],{run:function(f){if(f=this.fixupContext(f))if("davinci.ve.PageEditor"==f.declaredClass&&"source"==f._displayMode)this._invokeSourceEditorAction(f);else{var a=this._normalizeSelection(f);if(0<a.length){var m=new e,h=[],g=f.reorderPreserveSiblingOrder(a);dojo.forEach(g,function(a){var c=a.getData({identify:!1});c&&h.push(c);var e=a.getHelper();if(e&&e.getRemoveCommand){if(a=e.getRemoveCommand(a),"compound"===a.name){for(var e=[],g=a._commands,
f=g.length-1;0<f;f--){var n=g[f];"remove"===n.name&&(n=d.byId(n._id).getData({identify:!1}),e.push(n))}c.associatedCopiedWidgetData=e}}else a=new b(a);m.add(a)});this._executeAction(f,a,h,m)}}},isEnabled:function(b){b=this.fixupContext(b);var a=k.getOpenEditor();return a&&b?(b=0<b.getSelection().length,"davinci.ve.PageEditor"==a.declaredClass?(a=a.getDisplayMode(),b&&"source"!=a):b):!1},shouldShow:function(b){return(b=(b=this.fixupContext(b))?b.editor:null)&&"davinci.ve.PageEditor"==b.declaredClass},
_invokeSourceEditorAction:function(b){},_executeAction:function(b,a,d,e){}})})},"davinci/ve/actions/ContextAction":function(){define(["dojo/_base/declare","davinci/actions/Action","davinci/Runtime"],function(p,k,f){return p("davinci.ve.actions.ContextAction",[k],{_normalizeSelection:function(e){var b=e.getSelection();if(2>b.length)return b;var d=e.rootWidget,f=[];dojo.forEach(b,function(a){for(var m=a.getParent();m&&m!=d;){for(var h=0;h<b.length;h++)if(b[h]==m){e.deselect(a);return}m=m.getParent()}f.push(a)});
return f},_getContext:function(e){return e?e:(e=f.currentEditor)&&(e.getContext&&e.getContext()||e.context)},fixupContext:function(e){e=this._getContext(e);return"davinci.ve.Context"==e.declaredClass||"xideve/delite/Context"==e.declaredClass?e:"function"==typeof e.getContext?e.getContext():null}})})},"davinci/ve/commands/RemoveCommand":function(){define(["dojo/_base/declare","davinci/ve/commands/_hierarchyCommand","davinci/ve/widget","davinci/ve/States","davinci/ve/commands/ModifyCommand"],function(p,
k,f,e,b){return p("davinci.ve.commands.RemoveCommand",[k],{name:"remove",constructor:function(b){this._id=b?b.id:void 0},execute:function(){if(this._id){var d=f.byId(this._id);if(d){var n=d.getContext(),a=d.getParent()||n.getContainerNode(),m,h=d.getHelper();h&&h.onRemove&&(m=h.onRemove(d));if(!this._data){this._index=dojo.indexOf(a.getChildren(),d);if(0>this._index)return;this._data=d.getData();this._parentId=a.id}this._data.context=n;h=this._isRefreshOnDescendantChange(d);n&&n.detach(d);a.removeChild(d);
n&&n.widgetChanged(n.WIDGET_REMOVED,d);d.destroyWidget();n&&n.widgetAddedOrDeleted();h&&(new b(h,null,null,a._edit_context)).execute();e.resetState(d.domNode);m&&m()}}},undo:function(){if(this._data&&this._parentId){var d=f.byId(this._parentId);if(d){var n=f.createWidget(this._data);if(n){d.addChild(n,this._index);var a=d.getContext();a&&(a.attach(n),n.startup(),n.renderWidget(),a.widgetAddedOrDeleted(),a.widgetChanged(a.WIDGET_ADDED,n),(a=this._isRefreshOnDescendantChange(n))&&(new b(a,null,null,
d._edit_context)).execute(),e.resetState(n.domNode))}}}}})})},"davinci/ve/actions/CutAction":function(){define(["dojo/_base/declare","./_CutCopyAction","../../Runtime"],function(p,k,f){return p("davinci.ve.actions.CutAction",[k],{_invokeSourceEditorAction:function(e){e.htmlEditor.cutAction.run()},_executeAction:function(e,b,d,n){f.clipboard=d;e.select(null);e.getCommandStack().execute(n)}})})},"davinci/ve/actions/DeleteAction":function(){define(["dojo/_base/declare","davinci/Workbench","davinci/ve/actions/ContextAction",
"davinci/commands/CompoundCommand","davinci/ve/commands/RemoveCommand"],function(p,k,f,e,b){return p("davinci.ve.actions.DeleteAction",[f],{run:function(d){if(d=this.fixupContext(d)){var f=this._normalizeSelection(d);if(0<f.length){var a=void 0;if(1===f.length)var f=f[0],m=f.getHelper(),a=m&&m.getRemoveCommand?m.getRemoveCommand(f):new b(f);else a=new e,dojo.forEach(f,function(d){var e=d.getHelper();d=e&&e.getRemoveCommand?e.getRemoveCommand(d):new b(d);a.add(d)});d.select(null);d.getCommandStack().execute(a)}}},
isEnabled:function(b){b=this.fixupContext(b);var d=k.getOpenEditor();return d&&b?(b=0<b.getSelection().length,"davinci.ve.PageEditor"==d.declaredClass?(d=d.getDisplayMode(),b&&"source"!=d):b):!1},shouldShow:function(b){return(b=(b=this.fixupContext(b))?b.editor:null)&&"davinci.ve.PageEditor"==b.declaredClass}})})},"davinci/ve/actions/PasteAction":function(){define(["dojo/_base/declare","../../Workbench","./ContextAction","../tools/PasteTool","../../Runtime"],function(p,k,f,e,b){return p("davinci.ve.actions.PasteAction",
[f],{shortcut:{keyCode:86,ctrlKey:!0},run:function(d){if(d=this.fixupContext(d))if("davinci.ve.PageEditor"==d.declaredClass&&"source"==d._displayMode)d.htmlEditor.pasteAction.run();else{var f=b.clipboard;f&&d.setActiveTool(new e(f))}},isEnabled:function(d){d=this.fixupContext(d);var e=k.getOpenEditor();return e&&d?"davinci.ve.PageEditor"==e.declaredClass?(d=e.getDisplayMode(),b.clipboard&&"source"!=d):b.clipboard:!1},shouldShow:function(b){return(b=(b=this.fixupContext(b))?b.editor:null)&&"davinci.ve.PageEditor"==
b.declaredClass}})})},"davinci/ve/tools/PasteTool":function(){define("dojo/_base/declare ./CreateTool ../widget ../metadata ../../commands/CompoundCommand ../commands/AddCommand ../commands/MoveCommand ../commands/StyleCommand dojo/Deferred dojo/promise/all".split(" "),function(p,k,f,e,b,d,n,a,m,h){return p("davinci.ve.tools.PasteTool",k,{constructor:function(a){this.inherited(arguments);this._position_prop=null;var b=a[0];b&&b.properties&&(b=f.parseStyleValues(b.properties.style),this._position_prop=
f.retrieveStyleProperty(b,"position",""))},_create:function(g){var c=g.index,k,p,u=new b,x,z=[],B=new m,w=this._data.map(function(b){var q=new m,y=[];if(!this._loadType(b,y))return q.reject(),q;h(y).then(function(){var h=f.parseStyleValues(b.properties&&b.properties.style);if("absolute"==this._position_prop){var m=parseInt(f.retrieveStyleProperty(h,"left","0px")),h=parseInt(f.retrieveStyleProperty(h,"top","0px"));k?p={x:m+k.x,y:h+k.y}:g.position?(p=g.position,k={x:g.position.x-m,y:g.position.y-h}):
(p={x:m,y:h},k={x:0,y:0})}dojo.withDoc(this._context.getDocument(),function(){var h=function(b){void 0!==c&&0<=c&&c++;z.push(b);if(p){var d=this._context.getPreference("absoluteWidgetsZindex");u.add(new a(b,[{position:"absolute"},{"z-index":d}]));b=new n(b,p.x,p.y,x,null,null,x);x||(x=b);u.add(b)}q.resolve()}.bind(this);b.context=this._context;e.getHelper(b.type,"tool").then(function(a){var e;a&&(e=new a(b));if(e&&e.addPasteCreateCommand)a={parent:g.parent||this._context.getContainerNode(),position:p,
index:c},e.addPasteCreateCommand(u,a).then(function(a){if(!a)return q.reject(),q;h(a)});else{e=f.createWidget(b);if(!e)return q.reject(),q;u.add(new d(e,g.parent||this._context.getContainerNode(),c));this.checkAddToCurrentState(u,e);h(e)}}.bind(this))}.bind(this))}.bind(this));return q}.bind(this));h(w).then(function(){u.isEmpty()||(this._context.getCommandStack().execute(u),setTimeout(function(){z.forEach(function(a,b){this._context.select(a,0<b)}.bind(this))}.bind(this),0));B.resolve()}.bind(this));
return B},createWithFlowLayout:function(){return"absolute"!=this._position_prop}})})},"davinci/ve/actions/DuplicateAction":function(){define("dojo/_base/declare dojo/dom-style davinci/ve/actions/ContextAction davinci/commands/CompoundCommand davinci/ve/commands/AddCommand davinci/ve/commands/MoveCommand davinci/ve/tools/CreateTool davinci/ve/widget davinci/ve/utils/GeomUtils".split(" "),function(p,k,f,e,b,d,n,a,m){return p("davinci.ve.actions.DuplicateAction",[f],{run:function(f){if((f=this.fixupContext(f))&&
"davinci.ve.Context"===f.declaredClass&&"davinci/delite/Context"===f.declaredClass){var g=this._normalizeSelection(f);if(this.selectionSameParent(g)){var c=[];if(0<g.length){var h=new e;dojo.forEach(g,function(e){var g,p=e.getData({identify:!1});p&&(p.context=f,dojo.withDoc(f.getDocument(),function(){g=a.createWidget(p)},this),g&&(h.add(new b(g,e.getParent(),void 0)),n.prototype.checkAddToCurrentState(h,g),c.push(g),"absolute"==(e&&e.domNode?k.get(e.domNode,"position"):null)&&(e=m.getMarginBoxPageCoords(e.domNode),
e.l+=25,h.add(new d(g,e.l,e.t,void 0,void 0,void 0,!0)))))});f.getCommandStack().execute(h);dojo.forEach(c,function(a,b){f.select(a,0<b)},this)}}}},isEnabled:function(a){a=(a=this.fixupContext(a))&&a.getSelection?a.getSelection():[];return 0===a.length?!1:this.selectionSameParent(a)},shouldShow:function(a){return(a=(a=this.fixupContext(a))?a.editor:null)&&"davinci.ve.PageEditor"==a.declaredClass},selectionSameParent:function(a){if(0===a.length)return!1;for(var b=a[0].getParent(),c=0;c<a.length;c++)if(a[c].getParent()!=
b)return!1;return!0}})})},"davinci/ve/actions/EditValueAction":function(){define(["dojo/_base/declare","davinci/ve/actions/ContextAction"],function(p,k){return p("davinci.ve.actions.EditValueAction",[k],{run:function(f){if((f=this.fixupContext(f))&&"davinci.ve.Context"===f.declaredClass&&"davinci/delite/Context"===f.declaredClass){var e=f.getSelection();1===e.length&&f.select(e[0],!1,!0)}},isEnabled:function(f){return(f=this.fixupContext(f))&&0<f.getSelection().length},shouldShow:function(f){return(f=
(f=this.fixupContext(f))?f.editor:null)&&"davinci.ve.PageEditor"==f.declaredClass}})})},"davinci/ve/actions/EditPropertiesAction":function(){define(["dojo/_base/declare","davinci/ve/actions/ContextAction"],function(p,k){return p("davinci.ve.actions.EditPropertiesAction",[k],{run:function(f){(f=this.fixupContext(f))&&f.editor&&f.editor.editorContainer&&f.editor.editorContainer.hideShowProperties&&f.editor.editorContainer.hideShowProperties()},isEnabled:function(f){f=this.fixupContext(f);return!0}})})},
"davinci/ve/actions/SurroundAction":function(){define("dojo/_base/declare dojo/_base/array dojo/dom-style davinci/ve/actions/ContextAction davinci/commands/CompoundCommand davinci/ve/commands/AddCommand davinci/ve/commands/StyleCommand davinci/ve/commands/MoveCommand davinci/ve/commands/ResizeCommand davinci/ve/commands/ReparentCommand davinci/ve/tools/CreateTool davinci/ve/widget davinci/ve/utils/GeomUtils".split(" "),function(p,k,f,e,b,d,n,a,m,h,g,c,q){return p("davinci.ve.actions.SurroundAction",
[e],{run:function(e){e=this.fixupContext(e);var p,A,z,B,w=[],r,v=this.item.surroundWithTagName;if(v){dojo.withDoc(e.getDocument(),function(){r=c.createWidget({type:"html."+v,properties:{},children:[],context:e})});var y=new b,C=[].concat(e.getSelection()),E=C[0],F=E.getParent();q.getMarginBoxPageCoords(F.domNode);C.sort(function(a,b){return F.indexOf(a)-F.indexOf(b)});var D=e.getDocument(),G=D.defaultView&&D.defaultView.dojo;G.style||(G.style=f);(D=k.every(C,function(a){if(G)return position_prop=
G.style(a.domNode,"position"),"absolute"==position_prop}))&&k.forEach(C,function(b,c){w.push(q.getMarginBoxPageCoordsCached(b.domNode));y.add(new a(b,w[c].l,w[c].t,null,w[c]))});y.add(new d(r,F,F.indexOf(E)));g.prototype.checkAddToCurrentState(y,r);D&&(y.add(new n(r,[{position:"absolute"}])),k.forEach(C,function(a,b){a=w[b].l+w[b].w;var c=w[b].t+w[b].h;if(0==b||w[b].l<p)p=w[b].l;if(0==b||w[b].t<A)A=w[b].t;if(0==b||a>z)z=a;if(0==b||c>B)B=c}),y.add(new a(r,p,A)),y.add(new m(r,z-p,B-A)));k.forEach(C,
function(a){y.add(new h(a,r,"last"))});D&&k.forEach(C,function(b,c){y.add(new a(b,w[c].l,w[c].t,null,w[c]))});e.getCommandStack().execute(y);e.select(r)}else console.error("missing surroundWithTagName")},isEnabled:function(a){if((a=this.fixupContext(a))&&a.getSelection().length){var b=a.getSelection()[0].getParent(),c=[];if(!b||!b.length)return!1;if(k.every(a.getSelection(),function(a){var d=a.getParent();if(!d)return!1;c.push(b.indexOf(a));return b.id==d.id})){c.sort();var d;for(a=c.shift();c.length;a=
d)if(d=c.shift(),d!=a+1)return!1;return!0}}return!1}})})},"davinci/ve/commands/ReparentCommand":function(){define(["dojo/_base/declare","davinci/ve/commands/_hierarchyCommand","../widget","../States","davinci/ve/commands/ModifyCommand"],function(p,k,f,e,b){return p("davinci.ve.commands.ReparentCommand",[k],{name:"reparent",constructor:function(b,e,a){this._id=b?b.id:void 0;this._newParentId=e?e.id:"myapp";this._newIndex=a},execute:function(){if(this._id&&this._newParentId){var d=f.byId(this._id);
if(d){var n=d.getParent();n||(n=dojo.byId("myapp"));var a=f.byId(this._newParentId);a||(a=dojo.byId("myapp"));var m=this._isRefreshOnDescendantChange(d);this._oldParentId||(this._oldParentId=n.id,this._oldIndex=dojo.indexOf(n.getChildren(),d),this._newIndex&&this._newIndex.domNode&&(this._newIndex=a.indexOf(this._newIndex)));n.removeChild(d);var h=a.getContext();a.addChild(d,a==n&&this._oldIndex<this._newIndex?this._newIndex-1:this._newIndex);if(h){var g=d.getHelper();g&&g.reparent&&g.reparent(d);
d.startup();d.renderWidget();h.widgetChanged(h.WIDGET_REPARENTED,d,[n,a]);n=this._isRefreshOnDescendantChange(d);m&&(m=new b(m,null,null,h),m.execute());n&&(m=new b(n,null,null,h),m.execute())}e.resetState(d.domNode)}}},undo:function(){if(this._id&&this._oldParentId&&this._newParentId){var d=f.byId(this._id);if(d){var n=f.byId(this._oldParentId);if(n){var a=f.byId(this._newParentId);if(a){var m=this._isRefreshOnDescendantChange(d),h=n.getContext();a.removeChild(d);n.addChild(d,this._oldIndex);if(h){var g=
d.getHelper();g&&g.reparent&&g.reparent(d);d.startup();d.renderWidget();h.widgetChanged(h.WIDGET_REPARENTED,d,[n,a]);n=this._isRefreshOnDescendantChange(d);m&&(m=new b(m,null,null,h),m.execute());n&&(m=new b(n,null,null,h),m.execute())}e.resetState(d.domNode)}}}}}})})},"davinci/ve/actions/SelectParentAction":function(){define(["dojo/_base/declare","davinci/ve/actions/_SelectAncestorAction"],function(p,k){return p("davinci.ve.actions.SelectParentAction",[k],{run:function(f){var e=(f=this.fixupContext(f))&&
f.getSelection();this.selectionSameParentNotBody(e)&&f.select(e[0].getParent())},isEnabled:function(f){f=(f=this.fixupContext(f))&&f.getSelection();return this.selectionSameParentNotBody(f)}})})},"davinci/ve/actions/_SelectAncestorAction":function(){define(["dojo/_base/declare","davinci/ve/actions/ContextAction"],function(p,k){return p("davinci.ve.actions._SelectAncestorAction",[k],{shouldShow:function(f){return(f=this.fixupContext(f))&&f.editor&&"davinci.ve.HTMLPageEditor"==f.editor.editorID},selectionSameParentNotBody:function(f){if(!f||
0===f.length)return!1;var e=f[0].getParent();if(!e||!e.domNode)return!1;for(var b=0;b<f.length;b++)if(f[b].getParent()!=e)return!1;return!0}})})},"davinci/ve/actions/SelectAncestorAction":function(){define(["dojo/_base/declare","davinci/ve/actions/_SelectAncestorAction","davinci/Workbench","davinci/lang/ve"],function(p,k,f,e){return p("davinci.ve.actions.SelectAncestorAction",[k],{run:function(b){var d=(b=this.fixupContext(b))&&b.getSelection();if(this.selectionSameParentNotBody(d)){for(var n=[],
d=d[0].getParent();"BODY"!=d.domNode.tagName;)n.push(d),d=d.getParent();for(var d='\x3cdiv class\x3d"SelectAncestorLabel"\x3e'+e.selectAncestorLabel+'\x3c/div\x3e\x3cselect dojoType\x3d"dijit.form.Select" id\x3d"SelectAncestor" name\x3d"SelectAncestor" style\x3d"width:12em;"\x3e\x3coption value\x3d"-1"\x3e\x3c/option\x3e',a=0;a<n.length;a++)var m=require("davinci/ve/widget").getLabel(n[a]),d=d+('\x3coption value\x3d"'+a+'"\x3e'+m+"\x3c/option\x3e");f.showMessage(e.selectAncestorTitle,d+"\x3c/select\x3e\x3cbr/\x3e");
d=dijit.byId("SelectAncestor");d._selectAncestor=this._selectAncestor;dojo.connect(d,"onChange",function(a){b.select(n[a])})}},isEnabled:function(b){b=(b=this.fixupContext(b))&&b.getSelection();return this.selectionSameParentNotBody(b)}})})},"davinci/ve/actions/UnselectAllAction":function(){define(["dojo/_base/declare","davinci/ve/actions/ContextAction"],function(p,k){return p("davinci.ve.actions.SelectParentAction",[k],{run:function(f){f=this.fixupContext(f);0<(f&&f.getSelection()).length&&f.deselect()},
isEnabled:function(f){return(f=(f=this.fixupContext(f))&&f.getSelection())&&0<f.length}})})},"davinci/ve/actions/ArrangeAction":function(){define(["dojo/_base/declare","./_ReorderAction","davinci/commands/CompoundCommand","davinci/ve/commands/ReparentCommand"],function(p,k,f,e){return p("davinci.ve.actions.ArrangeAction",[k],{run:function(b){},isEnabled:function(b){return!0},shouldShow:function(b){return(b=(b=this.fixupContext(b))?b.editor:null)&&"davinci.ve.PageEditor"==b.declaredClass}})})},"davinci/ve/actions/_ReorderAction":function(){define(["dojo/_base/declare",
"dojo/_base/array","dojo/dom-style","davinci/ve/actions/ContextAction"],function(p,k,f,e){return p("davinci.ve.actions._ReorderAction",[e],{shouldShow:function(b){return(b=this.fixupContext(b))&&b.editor&&"davinci.ve.HTMLPageEditor"==b.editor.editorID},selectionSameParentAllAbsolute:function(b){if(0===b.length)return!1;var d=b[0].getParent();if(!d)return!1;for(var e=0;e<b.length;e++){var a=b[e];if(a.getParent()!=d||"absolute"!=(a&&a.domNode?f.get(a.domNode,"position"):null))return!1}return!0},selectionSameParentAllAbsoluteAdjacent:function(b){if(!b||
0===b.length||!this.selectionSameParentAllAbsolute(b))return!1;var d=b[0].getParent();if(!d||!d.length)return!1;for(var d=d.getChildren(),e=Number.MAX_VALUE,a=Number.MIN_VALUE,f=0;f<d.length;f++)0<=b.indexOf(d[f])&&(e=f<e?f:e,a=f>a?f:a);return a-e+1===b.length},getAbsoluteSiblings:function(b){b=b&&b.getParent&&b.getParent();return b?(b=b.getChildren&&b.getChildren())?k.filter(b,function(b){return"absolute"==(b&&b.domNode?f.get(b.domNode,"position"):null)}):[]:[]}})})},"davinci/ve/actions/MoveToFrontAction":function(){define(["dojo/_base/declare",
"./_ReorderAction","davinci/commands/CompoundCommand","davinci/ve/commands/ReparentCommand"],function(p,k,f,e){return p("davinci.ve.actions.MoveToFrontAction",[k],{name:"MoveToFront",iconClass:"editActionIcon editMoveToFrontIcon",run:function(b){if(b=this.fixupContext(b)){var d=b&&b.getSelection?b.getSelection():[];if(0!==d.length&&this.selectionSameParentAllAbsolute(d)){for(var n=d[0].getParent(),a=this.getAbsoluteSiblings(d[0]),m=new f,h=0;h<a.length;h++){var g=a[h];0<=d.indexOf(g)&&m.add(new e(g,
n,null))}b.getCommandStack().execute(m)}}},isEnabled:function(b){b=(b=this.fixupContext(b))&&b.getSelection?b.getSelection():[];if(0===b.length||!this.selectionSameParentAllAbsolute(b))return!1;for(var d=this.getAbsoluteSiblings(b[0]),e=0;e<b.length;e++)if(d.indexOf(b[e])<d.length-b.length)return!0;return!1}})})},"davinci/ve/actions/MoveToBackAction":function(){define(["dojo/_base/declare","./_ReorderAction","davinci/commands/CompoundCommand","davinci/ve/commands/ReparentCommand"],function(p,k,f,
e){return p("davinci.ve.actions.MoveToBackAction",[k],{name:"MoveToBack",iconClass:"editActionIcon editMoveToBackIcon",run:function(b){if(b=this.fixupContext(b)){var d=b&&b.getSelection?b.getSelection():[];if(0!==d.length&&this.selectionSameParentAllAbsolute(d)){for(var n=d[0].getParent(),a=this.getAbsoluteSiblings(d[0]),m=new f,h=a.length-1;0<=h;h--){var g=a[h];0<=d.indexOf(g)&&m.add(new e(g,n,0))}b.getCommandStack().execute(m)}}},isEnabled:function(b){b=(b=this.fixupContext(b))&&b.getSelection?
b.getSelection():[];if(0===b.length||!this.selectionSameParentAllAbsolute(b))return!1;for(var d=this.getAbsoluteSiblings(b[0]),e=0;e<b.length;e++)if(d.indexOf(b[e])>b.length-1)return!0;return!1}})})},"davinci/ve/actions/MoveForwardAction":function(){define(["dojo/_base/declare","./_ReorderAction","davinci/commands/CompoundCommand","davinci/ve/commands/ReparentCommand"],function(p,k,f,e){return p("davinci.ve.actions.MoveForwardAction",[k],{name:"MoveForward",iconClass:"editActionIcon editMoveForwardIcon",
run:function(b){if(b=this.fixupContext(b)){var d=b&&b.getSelection?b.getSelection():[];if(0!==d.length&&this.selectionSameParentAllAbsoluteAdjacent(d)){for(var n,a=d[0].getParent(),m=a.getChildren(),h=this.getAbsoluteSiblings(d[0]),g=new f,c=d.slice(0),k=0;k<h.length;k++){n=h[k];var p=c.indexOf(n);if(0<=p)c.splice(p,1);else if(0===c.length)break}m=m.indexOf(n)+1;for(c=0;c<h.length;c++)n=h[c],0<=d.indexOf(n)&&g.add(new e(n,a,m));b.getCommandStack().execute(g)}}},isEnabled:function(b){b=(b=this.fixupContext(b))&&
b.getSelection?b.getSelection():[];if(0===b.length||!this.selectionSameParentAllAbsoluteAdjacent(b))return!1;for(var d=this.getAbsoluteSiblings(b[0]),e=0;e<b.length;e++)if(d.indexOf(b[e])<d.length-b.length)return!0;return!1}})})},"davinci/ve/actions/MoveBackwardAction":function(){define(["dojo/_base/declare","./_ReorderAction","davinci/commands/CompoundCommand","davinci/ve/commands/ReparentCommand"],function(p,k,f,e){return p("davinci.ve.actions.MoveBackwardAction",[k],{name:"MoveBackward",iconClass:"editActionIcon editMoveBackwardIcon",
run:function(b){if(b=this.fixupContext(b)){var d=b&&b.getSelection?b.getSelection():[];if(0!==d.length&&this.selectionSameParentAllAbsoluteAdjacent(d)){for(var n,a=d[0].getParent(),m=a.getChildren(),h=this.getAbsoluteSiblings(d[0]),g=new f,c=d.slice(0),k=h.length-1;0<=k;k--){n=h[k];var p=c.indexOf(n);if(0<=p)c.splice(p,1);else if(0===c.length)break}m=m.indexOf(n);for(c=h.length-1;0<=c;c--)n=h[c],0<=d.indexOf(n)&&g.add(new e(n,a,m));b.getCommandStack().execute(g)}}},isEnabled:function(b){b=(b=this.fixupContext(b))&&
b.getSelection?b.getSelection():[];if(0===b.length||!this.selectionSameParentAllAbsoluteAdjacent(b))return!1;for(var d=this.getAbsoluteSiblings(b[0]),e=0;e<b.length;e++)if(d.indexOf(b[e])>b.length-1)return!0;return!1}})})},"davinci/ve/actions/OtherAction":function(){define(["dojo/_base/declare","./_ReorderAction","davinci/commands/CompoundCommand","davinci/ve/commands/ReparentCommand"],function(p,k,f,e){return p("davinci.ve.actions.OtherAction",[k],{run:function(b){},isEnabled:function(b){return!0},
shouldShow:function(b){return(b=(b=this.fixupContext(b))?b.editor:null)&&"davinci.ve.PageEditor"==b.declaredClass}})})},"davinci/ve/actions/AddState":function(){define("dojo/_base/declare davinci/Runtime davinci/Workbench davinci/workbench/Preferences davinci/ve/States davinci/actions/Action davinci/lang/ve davinci/ve/actions/_AddManageStatesWidget".split(" "),function(p,k,f,e,b,d,n,a){return p("davinci.ve.actions.AddState",[d],{run:function(){var a;k.currentEditor&&k.currentEditor.currentEditor&&
k.currentEditor.currentEditor.context&&(a=k.currentEditor.currentEditor.context,(a=b.getFocus(a.rootNode))&&a.stateContainerNode&&(a=new davinci.ve.actions._AddManageStatesWidget({node:a.stateContainerNode}),a._calledBy="AddState",f.showModal(a,n.createNewState,null,null,!0),a.okButton.set("disabled",!0)))}})})},"davinci/ve/actions/_AddManageStatesWidget":function(){define("dojo/_base/declare dojo/dom-style dojo/_base/event dijit/_WidgetBase dijit/_TemplatedMixin dijit/_WidgetsInTemplateMixin davinci/Runtime davinci/Workbench davinci/workbench/Preferences davinci/ve/States davinci/commands/CompoundCommand davinci/ve/commands/StyleCommand davinci/ve/commands/AppStateCommand davinci/actions/Action davinci/lang/ve dijit/lang/_common dojo/text!./templates/AddState.html dijit/form/TextBox dijit/form/Select dijit/form/CheckBox dijit/form/Button".split(" "),
function(p,k,f,e,b,d,n,a,m,h,g,c,q,A,u,x,z,B,w,r,v){return p("davinci.ve.actions._AddManageStatesWidget",[e,b,d],{templateString:z,widgetsInTemplate:!0,veNls:u,commonNls:x,_isValid:function(){var a=this.domNode.querySelector(".addStateNameDiv");if(a&&"none"==k.get(a,"display"))return!0;a=this.input.get("value");return a?davinci.ve.states.hasState(this.node,a)?(alert(dojo.string.substitute(u.stateNameExists,{name:a})),!1):!0:!1},_onKeyPress:function(a){a.keyCode!=dojo.keys.ENTER&&(this._isValid()?
this.okButton.set("disabled",!1):this.okButton.set("disabled",!0))},onOk:function(){var a;if(n.currentEditor&&n.currentEditor.currentEditor&&n.currentEditor.currentEditor.context){if(a=n.currentEditor.currentEditor.context,(a=h.getFocus(a.rootNode))&&a.stateContainerNode){h.getState(a.stateContainerNode);var b=this.input.get("value");if(b)if(n.currentEditor&&n.currentEditor.currentEditor&&n.currentEditor.currentEditor.context){a=n.currentEditor.currentEditor.context;var c=new g;b&&c.add(new q({action:"add",
state:b,stateContainerNode:this.node,context:a}));a.getCommandStack().execute(c)}else console.error("AddState.js - cannot determine context.")}}else console.error("_AddManageStatesWidget.js (from "+this._calledBy+" - cannot determine context.")},onCancel:function(){this.onClose()}})})},"davinci/ve/actions/RemoveState":function(){define("dojo/_base/declare davinci/Runtime davinci/ve/States davinci/actions/Action davinci/commands/CompoundCommand davinci/ve/commands/AppStateCommand".split(" "),function(p,
k,f,e,b,d){return p("davinci.ve.actions.RemoveState",[e],{run:function(){var e;if(k.currentEditor&&k.currentEditor.currentEditor&&k.currentEditor.currentEditor.context){e=k.currentEditor.currentEditor.context;var a=f.getFocus(e.rootNode);if(a&&a.state&&a.state!==f.NORMAL){var a=a.stateContainerNode,m=m=davinci.ve.states.getState(a);if(m){var h=new b;h.add(new d({action:"remove",state:m,stateContainerNode:a,context:e}));e.getCommandStack().execute(h)}}}}})})},"davinci/ve/actions/ModifyState":function(){define("dojo/_base/declare dojo/Deferred dojo/_base/connect dijit/_WidgetBase dijit/_TemplatedMixin dijit/_WidgetsInTemplateMixin dijit/popup dijit/focus davinci/ve/States davinci/ui/Dialog davinci/Runtime davinci/Workbench davinci/actions/Action davinci/lang/ve dijit/lang/_common dojo/text!./templates/ModifyState.html dijit/form/TextBox dijit/form/ValidationTextBox davinci/commands/CompoundCommand davinci/ve/commands/AppStateCommand".split(" "),
function(p,k,f,e,b,d,n,a,m,h,g,c,q,A,u,x,z,B,w,r){var v=null;p("davinci.ve.actions.ModifyStateWidget",[e,b,d],{templateString:x,widgetsInTemplate:!0,veNls:A,commonNls:u,isNormalState:!1,newName:null,oldInitialStateOn:null,postCreate:function(){this._connections=[];dijit.byId("state_rename_tooltip_dialog");v.then(function(){this._statesFocus.state&&this._statesFocus.state!==m.NORMAL||(this.isNormalState=!0);var a=dojo.byId("modify_state_old_name");a&&(this._statesFocus&&this._statesFocus.state&&!this.isNormalState?
a.innerHTML=this._statesFocus.state:(a.innerHTML="\x3ci\x3e"+m.NORMAL+"\x3c/i\x3e",this.renameButton.set("disabled",!0)));this.oldInitialStateOn=a=m.getInitial(this._statesFocus.stateContainerNode)===this._statesFocus.state;this.initialState.set("checked",a);a&&this.isNormalState&&this.initialState.set("disabled",!0);this._dialog.connect(this._dialog,"hide",function(a){this.onClose()}.bind(this));this.okButton.connect(this.okButton,"onClick",dojo.hitch(this,function(a){this.onOk(a)}));this.cancelButton.connect(this.cancelButton,
"onClick",dojo.hitch(this,function(a){this.onCancel(a)}));if(a=dijit.byId("state_rename_tooltip_dialog"))a.connect(a,"onShow",function(a){this.renameStateShowTooltipDialog(a)}.bind(this)),a.connect(a,"onHide",function(a){this.renameStateHideTooltipDialog(a)}.bind(this))}.bind(this))},renameStateShowTooltipDialog:function(b){b=dojo.byId("modify_state_old_name");var c=dojo.byId("state_rename_new_name"),d=dijit.byId("state_rename_new_name");b&&d&&d.set("value",b.innerText);a.focus(c);b=dijit.byId("state_rename_do_it");
c=dijit.byId("state_rename_cancel");b.connect(b,"onMouseDown",function(a){a.stopPropagation()});c.connect(b,"onMouseDown",function(a){a.stopPropagation()});b.connect(b,"onClick",function(a){this.renameStateDoIt(a)}.bind(this));c.connect(c,"onClick",function(a){a=dijit.byId("state_rename_tooltip_dialog");n.close(a)}.bind(this))},renameStateDoIt:function(a){a=dojo.byId("modify_state_old_name");var b=dijit.byId("state_rename_new_name"),b=b?b.get("value"):null,c=dijit.byId("state_rename_tooltip_dialog");
a&&b&&(this.newName=a.innerHTML=b);c&&n.close(c)},renameStateHideTooltipDialog:function(a){},onOk:function(a){if(g.currentEditor&&g.currentEditor.currentEditor&&g.currentEditor.currentEditor.context){a=g.currentEditor.currentEditor.context;var b=m.getFocus(a.rootNode);if(b&&b.stateContainerNode){var c;this.newName&&this.newName!==this._statesFocus.state&&(c=this.newName);var d,e=this.initialState.get("checked");e!==this.oldInitialStateOn&&(d=b.state?b.state:"undefined",d=e?d:null);if(c||d)e=new w,
e.add(new r({action:"modify",state:b.state,stateContainerNode:b.stateContainerNode,context:a,newState:c,initialState:d})),a.getCommandStack().execute(e);this.onClose()}}},onCancel:function(){this.onClose()},onClose:function(a){for(;a=this._connections.pop();)f.disconnect(a)}});return p("davinci.ve.actions.ModifyState",[q],{run:function(){var a;if(g.currentEditor&&g.currentEditor.currentEditor&&g.currentEditor.currentEditor.context&&(a=g.currentEditor.currentEditor.context,a=m.getFocus(a.rootNode))){v=
new k;var b=new davinci.ve.actions.ModifyStateWidget,d=c.showModal(b,A.modifyState);this._dialog=b._dialog=d;b._statesFocus=a;v.resolve()}}})})},"davinci/ve/actions/ManageStates":function(){define("dojo/_base/declare davinci/Runtime davinci/Workbench davinci/ve/actions/ContextAction davinci/workbench/Preferences dijit/registry davinci/ve/States davinci/actions/Action davinci/lang/ve davinci/ve/actions/_ManageStatesWidget".split(" "),function(p,k,f,e,b,d,n,a,m,h){return p("davinci.ve.actions.ManageStates",
[e],{run:function(){var a;k.currentEditor&&k.currentEditor.currentEditor&&k.currentEditor.currentEditor.context&&(a=k.currentEditor.currentEditor.context,(a=n.getFocus(a.rootNode))&&a.stateContainerNode&&(a=new davinci.ve.actions._ManageStatesWidget({node:a.stateContainerNode}),a._calledBy="ManageStates",a.okButton.set("label",m.updateLabel),a.updateDialog(),f.showModal(a,m.manageStates,{width:400},null,!0)))},isEnabled:function(a){a=this.fixupContext(a);var b=f.getOpenEditor();return b&&a?"davinci.ve.PageEditor"==
b.declaredClass?0<a.getSelection().length:!1:!1},shouldShow:function(a){return(a=(a=this.fixupContext(a))?a.editor:null)&&"davinci.ve.PageEditor"==a.declaredClass}})})},"davinci/ve/actions/_ManageStatesWidget":function(){define("dojo/_base/declare dojo/dom-construct dojo/on dojo/dom-style dojo/dom-class dojo/_base/event dijit/_WidgetBase dijit/_TemplatedMixin dijit/_WidgetsInTemplateMixin davinci/Runtime davinci/Workbench davinci/workbench/Preferences davinci/ve/States davinci/commands/CompoundCommand davinci/ve/commands/StyleCommand davinci/actions/Action davinci/lang/ve dijit/lang/_common dojo/text!./templates/ManageStates.html dijit/form/Button".split(" "),
function(p,k,f,e,b,d,n,a,m,h,g,c,q,A,u,x,z,B,w,r){return p("davinci.ve.actions._ManageStatesWidget",[n,a,m],{templateString:w,widgetsInTemplate:!0,anyCheckBoxChanges:!1,_states:[],_stateContainers:[],_checkBoxes:[],_overrideDisplayValue:[],_notes:[],_handlers:[],veNls:z,commonNls:B,constructor:function(){this.handlers=[]},postCreate:function(){if(this._getContext()){var a=this.domNode.querySelector(".manageStatesStatesListDiv");if(a){var c=this._getAllStatesInDoc();this._states=c.states;this._stateContainers=
c.stateContainers;if(c=this.domNode.querySelector(".manageStatesCheckAcceleratorsTable"))c.style.width="100%";if(c=this.domNode.querySelector(".manageStatesCheckCurrentStateOnlyCell"))c.style.textAlign="left";if(c=this.domNode.querySelector(".manageStatesCheckAllCell"))c.style.textAlign="center";if(c=this.domNode.querySelector(".manageStatesUncheckAllCell"))c.style.textAlign="right";for(var e,a=k.create("table",{"class":"manageStatesStatesListTable",style:"width:100%",border:0,cellspacing:0,cellpadding:3},
a),g=0;g<this._states.length;g++)c=k.create("tr",{},a),e=k.create("td",{"class":"manageStatesCheckboxCell"},c),this._checkBoxes[g]=k.create("div",{id:"manageStatesCheckBox_"+g,"class":"manageStatesCheckbox"},e),this._handlers.push(f(this._checkBoxes[g],"click",function(a,c){c=this._checkBoxes[a];this.anyCheckBoxChanges=!0;b.remove(c,"manageStatesCheckboxNoneVisible");b.remove(c,"manageStatesCheckboxAllVisible");b.remove(c,"manageStatesCheckboxAllVisibleBackgroundAll");b.remove(c,"manageStatesCheckboxAllVisibleBackgroundSome");
b.remove(c,"manageStatesCheckboxSomeVisible");1==c._checkValue?(c._checkValue=0,b.add(c,"manageStatesCheckboxNoneVisible"),this._overrideDisplayValue[a]="none"):(c._checkValue=1,b.add(c,"manageStatesCheckboxAllVisible"),this._overrideDisplayValue[a]="");this.updateDialog()}.bind(this,g))),this._overrideDisplayValue[g]=null,e=this._states[g],k.create("td",{"class":"manageStatesStateNameCell",innerHTML:"Normal"==e?"Background":e},c),e=k.create("td",{"class":"manageStatesNotesCell"},c),this._notes[g]=
k.create("span",{"class":"manageStatesNotesSpan"},e)}(a=this.domNode.querySelector(".manageStatesCheckCurrentStateOnly"))&&this._handlers.push(f(a,"click",function(a){d.stop(a);this._acceleratorClicked("current")}.bind(this)));(a=this.domNode.querySelector(".manageStatesCheckAll"))&&this._handlers.push(f(a,"click",function(a){d.stop(a);this._acceleratorClicked("all")}.bind(this)));(a=this.domNode.querySelector(".manageStatesUncheckAll"))&&this._handlers.push(f(a,"click",function(a){d.stop(a);this._acceleratorClicked("none")}.bind(this)));
(a=this.domNode.querySelector(".manageStatesCheckBackgroundOnly"))&&this._handlers.push(f(a,"click",function(a){d.stop(a);this._acceleratorClicked("background")}.bind(this)));this.anyCheckBoxChanges=!1;setTimeout(function(){this.okButton.focus()}.bind(this),500)}},_acceleratorClicked:function(a){var c=this._getContext();if(c&&(c=q.getFocus(c.rootNode))&&c.stateContainerNode){for(var d=q.getState(c.stateContainerNode),e=0;e<this._states.length;e++){var g=this._states[e];if("undefined"==g||g==q.NORMAL)g=
void 0;var f=this._checkBoxes[e];b.remove(f,"manageStatesCheckboxNoneVisible");b.remove(f,"manageStatesCheckboxAllVisible");b.remove(f,"manageStatesCheckboxAllVisibleBackgroundAll");b.remove(f,"manageStatesCheckboxAllVisibleBackgroundSome");b.remove(f,"manageStatesCheckboxSomeVisible");"current"==a?g==d&&c.stateContainerNode==this._stateContainers[e]?(f._checkValue=1,b.add(f,"manageStatesCheckboxAllVisible"),this._overrideDisplayValue[e]=""):(f._checkValue=0,b.add(f,"manageStatesCheckboxNoneVisible"),
this._overrideDisplayValue[e]="none"):"all"==a?(f._checkValue=1,b.add(f,"manageStatesCheckboxAllVisible"),this._overrideDisplayValue[e]=""):"none"==a?(f._checkValue=0,b.add(f,"manageStatesCheckboxNoneVisible"),this._overrideDisplayValue[e]="none"):"background"==a&&(f._checkValue=1,b.add(f,"manageStatesCheckboxAllVisible"),this._overrideDisplayValue[e]=0==e?"":"$MAQ_DELETE_PROPERTY$")}this.anyCheckBoxChanges=!0;this.updateDialog()}},_isValid:function(){return!0},_onKeyPress:function(a){a.keyCode!=
dojo.keys.ENTER&&(this._isValid()?this.okButton.set("disabled",!1):this.okButton.set("disabled",!0))},_getAllStatesInDoc:function(){var a;if(h.currentEditor&&h.currentEditor.currentEditor&&h.currentEditor.currentEditor.context){a=h.currentEditor.currentEditor.context;var b=[],c=[];if(a=q.getAllStateContainers(a.rootNode))for(var d=0;d<a.length;d++)for(var e=q.getStates(a[d]),g=0;g<e.length;g++)b.push(e[g]),c.push(a[d]);return{states:b,stateContainers:c}}console.error("_ManageStatesWidget.js (from "+
this._calledBy+" - cannot determine context.")},_getContext:function(){var a;h.currentEditor&&h.currentEditor.currentEditor&&h.currentEditor.currentEditor.context?a=h.currentEditor.currentEditor.context:console.error("_ManageStatesWidget.js (from "+this._calledBy+" - cannot determine context.");return a},_getAllEffectedWidgets:function(){var a=this._getContext();if(!a)return[];var b=q.getFocus(a.rootNode);if(b&&b.stateContainerNode)return a.getSelection().slice(0)},updateDialog:function(){var a=this._getContext();
if(a){var c=q.getFocus(a.rootNode);if(c&&c.stateContainerNode)for(var c=this._getAllEffectedWidgets(),d=this._overrideDisplayValue[0],e=0;e<this._states.length;e++){var g=this._states[e];if(g==q.NORMAL||"undefined"==g)g=void 0;for(var f=0,h=0,m=0;m<c.length;m++){var n=c[m],k={undefined:d};k[void 0===g?"undefined":g]=this._overrideDisplayValue[e];n=q.getEffectiveDisplayValue(a,n,g,k);0!=n.effectiveDisplayValue.indexOf("none")&&(f++,g||"undefined"!=n.effectiveState?g&&n.effectiveState==g&&h++:h++)}g=
this._checkBoxes[e];m=this._notes[e];b.remove(g,"manageStatesCheckboxNoneVisible");b.remove(g,"manageStatesCheckboxAllVisible");b.remove(g,"manageStatesCheckboxAllVisibleBackgroundAll");b.remove(g,"manageStatesCheckboxAllVisibleBackgroundSome");b.remove(g,"manageStatesCheckboxSomeVisible");m.innerHTML="";0==f?(g._checkValue=0,b.add(g,"manageStatesCheckboxNoneVisible")):f==c.length?(g._checkValue=1,h==c.length?b.add(g,"manageStatesCheckboxAllVisible"):0<h?(b.add(g,"manageStatesCheckboxAllVisibleBackgroundSome"),
m.innerHTML=z.manageStatesSomeVisibleFromBackground):(b.add(g,"manageStatesCheckboxAllVisibleBackgroundAll"),m.innerHTML=z.manageStatesAllVisibleFromBackground)):(g._checkValue=2,b.add(g,"manageStatesCheckboxSomeVisible"),m.innerHTML=z.manageStatesSomeVisibleSomeHidden)}}},onOk:function(){if(this.anyCheckBoxChanges){var a=this._getContext();if(a){for(var b,c=this._getAllEffectedWidgets(),d=0;d<this._states.length;d++){var e=this._states[d];if(e==q.NORMAL||"undefined"==e)e=void 0;var g=this._checkBoxes[d]._checkValue;
if(0===g||1===g)for(var f=0;f<c.length;f++){var h=c[f];b||(b=new A);b.add(new u(h,[{display:this._overrideDisplayValue[d]?this._overrideDisplayValue[d]:1==g?"":"none"}],e))}}b&&a.getCommandStack().execute(b)}}},onCancel:function(){this.onClose()},destroy:function(){this.inherited(arguments);for(var a=0;a<this._handlers.length;a++)this._handlers[a].remove();this._handlers=[]}})})},"davinci/ve/actions/NewWidgetsCurrentState":function(){define("dojo/_base/declare davinci/Runtime davinci/Workbench davinci/ve/States davinci/actions/Action davinci/workbench/Preferences".split(" "),
function(p,k,f,e,b,d){return p("davinci.ve.actions.NewWidgetsCurrentState",[b],{run:function(){var b;if(k.currentEditor&&k.currentEditor.currentEditor&&k.currentEditor.currentEditor.context){b=k.currentEditor.currentEditor.context;var a=f.getProject(),m=d.getPreferences("davinci.ve.editorPrefs",a);m.newWidgetsCurrentState=m.newWidgetsCurrentState?!1:!0;d.savePreferences("davinci.ve.editorPrefs",a,m);e.updateStateIcons(b)}}})})},"davinci/ve/actions/HighlightBaseWidgets":function(){define("dojo/_base/declare davinci/Runtime davinci/Workbench davinci/ve/States davinci/actions/Action davinci/workbench/Preferences".split(" "),
function(p,k,f,e,b,d){return p("davinci.ve.actions.HighlightBaseWidgets",[b],{run:function(){var b;if(k.currentEditor&&k.currentEditor.currentEditor&&k.currentEditor.currentEditor.context){b=k.currentEditor.currentEditor.context;var a=f.getProject(),e=d.getPreferences("davinci.ve.editorPrefs",a);e.highlightBaseWidgets=e.highlightBaseWidgets?!1:!0;d.savePreferences("davinci.ve.editorPrefs",a,e);b.updateFocusAll()}}})})},"davinci/ve/actions/ShowInOutline":function(){define(["dojo/_base/declare","davinci/Runtime",
"davinci/Workbench","davinci/ve/actions/ContextAction"],function(p,k,f,e){return p("davinci.ve.actions.ManageStates",[e],{run:function(){var b=k.currentEditor;b&&b.delegate.showInOutline()},isEnabled:function(b){b=this.fixupContext(b);var d=f.getOpenEditor();return d&&b?"davinci.ve.PageEditor"==d.declaredClass?0<b.getSelection().length:!1:!1},shouldShow:function(b){return(b=(b=this.fixupContext(b))?b.editor:null)&&"davinci.ve.PageEditor"==b.declaredClass}})})},"davinci/ve/PageEditor":function(){define("require dojo/_base/declare ../ui/ModelEditor dojo/dnd/Moveable ../Runtime ../commands/CommandStack ../html/ui/HTMLEditor ./VisualEditor ./VisualEditorOutline ./widget ./States ../XPathUtils ../html/HtmlFileXPathAdapter ./utils/GeomUtils davinci/model/Factory xide/mixins/EventedMixin xide/mixins/ReloadMixin xide/utils xide/types xide/factory xideve/views/BlocksFileEditor xide/widgets/_Widget xide/views/_LayoutMixin xdocker/Docker2 xdocker/types wcDocker/iframe".split(" "),
function(p,k,f,e,b,d,n,a,m,h,g,c,q,A,u,x,z,B,w,r,v,y,C,E,F){k=k("davinci.ve.PageEditor",[f,y,x,z,C],{_latestSourceMode:"source",_latestLayoutMode:"flow",item:null,delegate:null,template:null,bottomTabContainer:null,textEditorPane:null,didBlockViews:!1,_propCP:null,createTab:function(a,b){var c=w.DOCKER;return this._docker.addTab(a||"DefaultTab",B.mixin({icon:!1,closeable:!0,moveable:!0,tabOrientation:c.TAB.TOP,location:c.DOCK.STACKED},b))},createLayout:function(){},constructor:function(b,c,e,g,f,
h){function m(a){setTimeout(function(){var a=n.getContext();a&&a.frameNode&&$(a.frameNode).css("pointer-events","initial")},a||4E3)}c=w.DOCKER;this.item=e;this.template=f;var n=this;this._commandStack=new d(this);this.savePoint=0;this._docker=E.createDefault(b,{});this.domNode=this._docker.$container[0];this._designCP=this.createTab(null,{title:"Design",icon:"fa-eye"});this._docker.on(w.DOCKER.EVENT.BEGIN_RESIZE,function(a){(a=n.getContext())&&a.frameNode&&$(a.frameNode).css("pointer-events","none");
m()});this._docker.on(w.DOCKER.EVENT.MOVE_STARTED,function(a){(a=n.getContext())&&a.frameNode&&$(a.frameNode).css("pointer-events","none");m()});this._docker.on(w.DOCKER.EVENT.MOVE_ENDED,function(a){m(1)});this._docker.on(w.DOCKER.EVENT.END_RESIZE,function(a){m(1)});this._docker.on(w.DOCKER.EVENT.BEGIN_FLOAT_RESIZE,function(a){a=n.getContext();$(a.frameNode).css("pointer-events","none");m()});this._docker.on(w.DOCKER.EVENT.END_FLOAT_RESIZE,function(a){m(1)});this._designCP.$container[0].domNode=this._designCP.$container[0];
this._designCP.domNode=this._designCP.$container[0];this._designCP.minSize(400,400);this.currentEditor=this.visualEditor=new a(this._designCP.$container[0],this,this.template);this.currentEditor._commandStack=this._commandStack;this.initReload();try{this._propCP=this.createTab(null,{title:"Props",icon:"fa-cogs",tabOrientation:c.TAB.TOP,location:c.TAB.RIGHT,target:this._designCP});this._propCP.maxSize(400);this._propCP.minSize(350);this._propCP.closeable(!1);b=null;h.length?this._srcCP=b=this.createTab(null,
{title:"HTML",icon:"fa-code",tabOrientation:c.TAB.TOP,location:c.TAB.BOTTOM}):console.error("have no editors, ");h=null;try{h=this.htmlEditor=g(b)}catch(O){debugger}this.model=h.model;h._on(w.EVENTS.ON_FILE_CONTENT_CHANGED,function(a){n.delegate.onEditorContentChanged(a)});this._displayMode="design";this._connect(this.visualEditor,"onContentChange","_visualChanged");this.subscribe("/davinci/ui/styleValuesChange",this._stylePropertiesChange);this.subscribe("/davinci/ui/widgetSelected",this._widgetSelectionChange);
this.subscribe("/davinci/ui/selectionChanged",this._modelSelectionChange);this.subscribe("/davinci/ui/editorSelected",this._editorSelected.bind(this));this.subscribe("/davinci/ui/context/loaded",this._contextLoaded.bind(this));this.subscribe("/davinci/ui/deviceChanged",this._deviceChanged.bind(this));this._designCP.getSplitter().pos(.5);setTimeout(function(){n._srcCP.getSplitter().pos(.5);n._propCP.maxSize(500)},1500);this.resize()}catch(O){this.visualEditor._connectCallback(O),console.error("page editor crash : "+
O)}this.add(this._docker)},getPropertyPane:function(){return this._propCP},getDesignPane:function(){return this._designCP},getSourcePane:function(){return this._srcCP},getVisualEditor:function(){return this.visualEditor},getBlocksPane:function(){return this._blocksTab},onSceneBlocksLoaded:function(a,b){if(0!=b.showBlocks&&!this.didBlockViews){this.didBlockViews=!0;var c=a.blockScopes;a=a.ctx;var d=w.DOCKER;this._blocksTab=this.createTab(null,{title:"Blocks",icon:"fa-eye",target:this._srcCP,tabOrientation:d.TAB.TOP,
location:d.DOCK.STACKED});c=c[0];d=this._blocksTab;a=B.addWidget(v,{style:"height:inherit;width:inherit;padding:0px;",ctx:a,pageEditor:this,visualEditor:b,editorContext:this.getContext(),item:{path:c.path,mount:c.mount}},this,d,!0);a.initWithScope(c);d.add(a);this._blockEditor=a;(b=b.getItem())&&this._blockEditor._widgetSelectionChanged({selection:[b]})}},getBlockEditor:function(){return this._blockEditor},setRootElement:function(a){this._rootElement=a},supports:function(a){return a.match(/^palette|properties|style|states|inline-style|MultiPropTarget|propsect_common|propsect_widgetSpecific|propsect_events|propsect_layout|propsect_paddingMargins|propsect_background|propsect_border|propsect_fontsAndText|propsect_shapesSVG$/)},
focus:function(){},_editorSelected:function(a){var b=this.getContext();b&&(this==a.oldEditor&&b.hideFocusAll(),a.editor&&a.editor.editorContainer&&("davinci.ve.PageEditor"==a.editor.declaredClass||"davinci.ve.themeEditor.ThemeEditor"==a.editor.declaredClass)&&this==a.editor&&(a=b.getFlowLayout(),this._updateLayoutDropDownButton(a?"flow":"absolute"),b.clearCachedWidgetBounds()))},_contextLoaded:function(){},_deviceChanged:function(){if(b.currentEditor==this&&this.editorContainer){var a=this.getContext();
a&&a.updateFocusAll&&setTimeout(function(){a.updateFocusAll()},1E3)}},_updateLayoutDropDownButton:function(a){(a=dojo.query(".maqLayoutDropDownButton"))&&a[0]&&dijit.byNode(a[0])},_selectLayout:function(a){this._latestLayoutMode=a;p(["davinci/actions/SelectLayoutAction"],function(b){b=new b;b._changeLayoutCommand(a)});this._updateLayoutDropDownButton(a)},selectLayoutFlow:function(){this._selectLayout("flow")},selectLayoutAbsolute:function(){this._selectLayout("absolute")},getDisplayMode:function(){return this._displayMode},
getSourceDisplayMode:function(){return this._latestSourceMode},_switchDisplayModeSource:function(a){this._latestSourceMode=a;this.switchDisplayMode(a)},switchDisplayModeSource:function(){this._switchDisplayModeSource("source")},switchDisplayModeSplitVertical:function(){this._switchDisplayModeSource("splitVertical")},switchDisplayModeSplitHorizontal:function(){this._switchDisplayModeSource("splitHorizontal")},switchDisplayModeSourceLatest:function(){this.switchDisplayMode(this._latestSourceMode)},
switchDisplayModeDesign:function(){this.switchDisplayMode("design")},switchDisplayMode:function(a){},hidePropertyPane:function(a){this.getPropertyPane()},_modelSelectionChange:function(a){if("source"!=this._displayMode&&p("davinci/Runtime").currentEditor===this&&(this._selectionCssRules=null,a.length&&(a=a[0].model)&&"HTMLElement"==a.elementType&&(a=a.getAttribute("id"))&&"source"!=this._displayMode)){a=h.byId(a,this.visualEditor.context.getDocument());var b=A.getMarginBoxPageCoords(a.domNode);this.getContext().getGlobal().scroll(b.l,
b.t);this.visualEditor.context.select(a)}},_widgetSelectionChange:function(a){!0===a.isFake||!this.visualEditor.context||a&&a.length&&a[0]._edit_context!=this.visualEditor.context||(a=this.visualEditor.context.getSelection())&&a.length&&"design"!=this._displayMode&&this.htmlEditor.selectModel([{model:a[0]._srcElement}])},_stylePropertiesChange:function(a){if(!(a&&a.cascade&&a.cascade._widget&&1==a.cascade._widget.isFake)){this.visualEditor._stylePropertiesChange(a);var b=this.visualEditor.context.getSelection();
if(b&&b[0]&&(b=B.getNode(b[0]))&&b.onChanged)b.onChanged();a=a.cascade._topWidgetDom;$(a).attr("style");this.getContext().updateBackground(a)}},_setDirty:function(){this.setDirty(!0)},setDirty:function(a){if(this.isDirty=a)this.lastModifiedTime=Date.now();this.editorContainer&&this.editorContainer.setDirty(a)},_visualChanged:function(a){this.delegate.shouldUpdateTextEditor()&&(a||this._setDirty(),this.htmlEditor.set("value",this.model.getText(),!0),this.getContext().visualEditorChanged())},_srcChanged:function(){dojo.withDoc(window.document,
function(){this.htmlEditor.isTyping&&(this.visualEditor.skipSave=!0);var a=this.visualEditor.context,b=a&&this._getStatesScenes(a);this.visualEditor.setContent(this.fileName,this.htmlEditor.model);this.editorContainer.updateToolbars();dojo.publish("/davinci/ui/context/pagerebuilt",[a]);b&&this._setStatesScenes(a,b);delete this.visualEditor.skipSave;this._setDirty()},this)},_getStatesScenes:function(a){return[]},_setStatesScenes:function(a,b){},getContext:function(){return this.visualEditor.context},
getOutline:function(){this.outline||(this.outline=new m(this));return this.outline},getPropertiesView:function(){return this.currentEditor.getPropertiesView()},setContent:function(a,b,c){this.fileName=a;this.htmlEditor.setContent(a,b);this.visualEditor.setContent(a,this.htmlEditor.model,c);this._connect(this.htmlEditor.model,"onChange","_themeChange")},_themeChange:function(a){a&&"CSSRule"===a.elementType&&(this.setDirty(!0),this.visualEditor.context.hotModifyCssRule(a))},getDefaultContent:function(){this._isNewFile=
!0;return this.visualEditor.getDefaultContent()},selectModel:function(a,b){this.publishingSelect||b&&this!=b||(b=a&&a[0])&&(b.elementType?this.htmlEditor.selectModel(a):b.model&&b.model.isWidget&&this.visualEditor.context.select(b.model,b.add))},save:function(a){if(this.delegate&&this.delegate.save){var b=this.visualEditor.context.getModel(),c=b.getText();this.delegate.save(this,this.visualEditor,b,c)}else this.savePoint=this._commandStack.getUndoCount(),(b=this.visualEditor.save(a))&&b.then&&b.then(function(b){this.isDirty=
a;this.editorContainer&&this.editorContainer.domNode&&this.editorContainer.setDirty(a)}.bind(this),function(a){})},removeWorkingCopy:function(){},previewInBrowser:function(){this.visualEditor.previewInBrowser()},destroy:function(){this.inherited(arguments);this.visualEditor.destroy();this.htmlEditor.destroy();B.destroy(this.bottomTabContainer)},getText:function(){return this.htmlEditor.getText()},onResize:function(){for(var a=this.getContext(),b=a.getSelection(),c=0;c<b.length;c++)a.select(b[c],0!=
c)},handleKeyEvent:function(a){},getFocusContainerBounds:function(){if("source"==this._displayMode)return{l:0,t:0,w:0,h:0};var a=A.getBorderBoxPageCoords(this._designCP.domNode);a.l-=8;a.t-=8;"none"==(this.visualEditor&&this.visualEditor.getDevice?this.visualEditor.getDevice():"none")?(a.w+="splitVertical"==this._displayMode?8:16,a.h+="splitHorizontal"==this._displayMode?8:16):(a.w+=8,a.h+=8);return a},getCommandStack:function(){return this.getContext().getCommandStack()}});k.__test="asd2f";return k})},
"davinci/ui/ModelEditor":function(){define(["dojo/_base/declare","../Runtime","./TextEditor","../commands/SourceChangeCommand"],function(p,k,f,e){return p(f,{constructor:function(b,d){this.subscribe("/davinci/ui/selectionChanged",this.selectModel)},colorize:function(b){return null},setContent:function(b,d){this.inherited(arguments);this.model.fileName=b;this.model.setText(d)},getHoverText:function(b,d){b=this.convertMouseToLine(b,d);return this.model.findChildAtPosition({startOffset:b.row,endOffset:b.col}).getLabel()},
handleChange:function(b){this.inherited(arguments);var d=this.model.getText(),f=k.currentEditor;f&&f.getCommandStack?(f=f.getCommandStack(),d=new e({model:this.model,oldText:d,newText:b}),f.execute(d)):(this.model.setText(b),dojo.publish("/davinci/ui/modelChanged",[{newModel:this.model}]))},selectModel:function(b,d){this.publishingSelect||d&&this!=d||!b.length||!b[0].model||(b=b[0].model,b.elementType&&(b=this.model.mapPositions(b),this.select(b)))},selectionChange:function(b){var d=this.model.mapPositions(this.model),
d=this.model.endOffset-d.endOffset,d=this.model.findChildAtPosition({startOffset:b.startOffset+d,endOffset:b.endOffset+d-1});b.model=d;if(d!=this._selectedModel)try{this.publishingSelect=!0,dojo.publish("/davinci/ui/selectionChanged",[[b],this])}finally{this.publishingSelect=!1}this._selectedModel=d},getSyntaxPositions:function(b,d){this.model.setText(b);if(this.model.getSyntaxPositions)return this.model.getSyntaxPositions(d).sort(function(b,a){return b.line!=a.line?b.line-a.line:b.col-a.col})},save:function(){this.model.setText(this.getText());
this.inherited(arguments)},getErrors:function(){return this.model.errors||[]}})})},"davinci/ui/TextEditor":function(){define(["dojo/_base/declare","./Editor","../Runtime"],function(p,k,f){return p(k,{constructor:function(e,b){this.subscriptions=[];this._handles=[]},isActiveEditor:function(){return f.currentEditor==this},handleChange:function(e){this.editorContainer&&this.editorContainer.setDirty(!0);this.isDirty=!0;this.lastModifiedTime=Date.now()},_onKey:function(e){davinci.Workbench.currentContext=
this.editorID;return davinci.Workbench.handleKey(e)},subscribe:function(e,b){this.subscriptions.push(dojo.subscribe(e,this,b))},destroy:function(){this.inherited(arguments);this.subscriptions.forEach(dojo.unsubscribe);this._handles.forEach(dojo.disconnect)},getDefaultContent:function(){return null},getErrors:function(){return[]},save:function(e){var b=this.getText();if(this.resourceFile){this.resourceFile.clearMarkers();for(var d=this.getErrors(),f=0;f<d.length;f++){var a;switch(d[f].id){case "(error)":a=
"error";break;case "(warning)":a="warning"}a&&this.resourceFile.addMarker(a,d[f].line+1,d[f].reason)}this.resourceFile.setContents(b,e);this.editorContainer&&this.editorContainer.setDirty(e);this.isDirty=!1;this.lastModifiedTime=0}},supports:function(e){return!1},_connect:function(e,b,d){this._handles.push(dojo.connect(e,b,this,d))}})})},"davinci/ui/Editor":function(){define(["../commands/CommandStack","dojo/_base/declare"],function(p,k,f){var e=function(b){this._progSelect||this.selectionChange({startOffset:b.newValue.start,
endOffset:b.newValue.end})};return k(null,{constructor:function(b,d,e){this.contentDiv=b;this.commandStack=new p;this._existWhenVisible=e;this._isVisible=!e},setContent:function(b,d){this.editor||this._existWhenVisible&&!this._isVisible||this._createEditor();this._textModel||(this._textModel=this.editor?this.editor.getModel():new mProjectionTextModel.ProjectionTextModel(new mTextModel.TextModel));this.fileName=b;this.setValue(d,!0);this._textModel&&(dojo.disconnect(this._textModelConnection),this._textModelConnection=
dojo.connect(this._textModel,"onChanged",this,onTextChanged))},setVisible:function(b){b!=this._isVisible&&this._existWhenVisible&&(b&&this._existWhenVisible?(this._createEditor(),this._updateStyler()):(this.editor.getTextView().removeEventListener("Selection",dojo.hitch(this,e)),delete this.editor));this._isVisible=b},setValue:function(b,d){this._dontNotifyChange=d;this.editor?this.editor.setText(b):this._textModel.setText(b)},_createEditor:function(){},_updateStyler:function(){},selectionChange:function(b){},
destroy:function(){},select:function(b){if(this.editor)try{this._progSelect=!0,this.editor.setSelection(b.endOffset,b.startOffset)}finally{delete this._progSelect}},getText:function(){return this._textModel.getText(0)},getOnUnloadWarningMessage:function(){return null}})})},"davinci/commands/SourceChangeCommand":function(){define(["dojo/_base/declare","davinci/Runtime"],function(p,k){return p("davinci.commands.SourceChangeCommand",null,{name:"SourceChange",constructor:function(f){this._model=f.model;
this._oldText=f.oldText;this._newText=f.newText},incrementalUpdate:function(f){this._newText=f.newText},execute:function(){this._model.setText(this._newText);dojo.publish("/davinci/ui/modelChanged",[{newModel:this._model}]);var f=k.currentEditor;"davinci.ve.PageEditor"==f.declaredClass&&f.handleChange&&require(["davinci/ve/PageEditor"],function(e){e.prototype._srcChanged.call(f,this._newText)}.bind(this));if(!this.established)return this.established=!0},undo:function(){this._model.setText(this._oldText);
dojo.publish("/davinci/ui/modelChanged",[{newModel:this._model}]);var f=k.currentEditor;"davinci.ve.PageEditor"==f.declaredClass&&f.handleChange&&require(["davinci/ve/PageEditor"],function(e){e.prototype._srcChanged.call(f,this._oldText)}.bind(this))}})})},"dojo/dnd/Moveable":function(){define("../_base/array ../_base/declare ../_base/lang ../dom ../dom-class ../Evented ../on ../topic ../touch ./common ./Mover ../_base/window".split(" "),function(p,k,f,e,b,d,n,a,m,h,g,c){return k("dojo.dnd.Moveable",
[d],{handle:"",delay:0,skip:!1,constructor:function(a,b){this.node=e.byId(a);b||(b={});this.handle=b.handle?e.byId(b.handle):null;this.handle||(this.handle=this.node);this.delay=0<b.delay?b.delay:0;this.skip=b.skip;this.mover=b.mover?b.mover:g;this.events=[n(this.handle,m.press,f.hitch(this,"onMouseDown")),n(this.handle,"dragstart",f.hitch(this,"onSelectStart")),n(this.handle,"selectstart",f.hitch(this,"onSelectStart"))]},markupFactory:function(a,b,c){return new c(b,a)},destroy:function(){p.forEach(this.events,
function(a){a.remove()});this.events=this.node=this.handle=null},onMouseDown:function(a){if(!this.skip||!h.isFormElement(a)){if(this.delay)this.events.push(n(this.handle,m.move,f.hitch(this,"onMouseMove")),n(this.handle.ownerDocument,m.release,f.hitch(this,"onMouseUp"))),this._lastX=a.pageX,this._lastY=a.pageY;else this.onDragDetected(a);a.stopPropagation();a.preventDefault()}},onMouseMove:function(a){if(Math.abs(a.pageX-this._lastX)>this.delay||Math.abs(a.pageY-this._lastY)>this.delay)this.onMouseUp(a),
this.onDragDetected(a);a.stopPropagation();a.preventDefault()},onMouseUp:function(a){for(var b=0;2>b;++b)this.events.pop().remove();a.stopPropagation();a.preventDefault()},onSelectStart:function(a){this.skip&&h.isFormElement(a)||(a.stopPropagation(),a.preventDefault())},onDragDetected:function(a){new this.mover(this.node,a,this)},onMoveStart:function(d){a.publish("/dnd/move/start",d);b.add(c.body(),"dojoMove");b.add(this.node,"dojoMoveItem")},onMoveStop:function(d){a.publish("/dnd/move/stop",d);b.remove(c.body(),
"dojoMove");b.remove(this.node,"dojoMoveItem")},onFirstMove:function(){},onMove:function(a,b){this.onMoving(a,b);var c=a.node.style;c.left=b.l+"px";c.top=b.t+"px";this.onMoved(a,b)},onMoving:function(){},onMoved:function(){}})})},"dojo/touch":function(){define("./_base/kernel ./aspect ./dom ./dom-class ./_base/lang ./on ./has ./mouse ./domReady ./_base/window".split(" "),function(p,k,f,e,b,d,n,a,m,h){function g(a,b,c){return x&&c?function(a,b){return d(a,c,b)}:A?function(c,e){var g=d(c,b,e),f=d(c,
a,function(a){(!F||(new Date).getTime()>F+1E3)&&e.call(this,a)});return{remove:function(){g.remove();f.remove()}}}:function(b,c){return d(b,a,c)}}function c(a){do if(a.dojoClick)return a.dojoClick;while(a=a.parentNode)}function q(a,b,g){if(B=!a.target.disabled&&c(a.target))w=a.target,r=a.touches?a.touches[0].pageX:a.clientX,v=a.touches?a.touches[0].pageY:a.clientY,y=("object"==typeof B?B.x:"number"==typeof B?B:0)||4,C=("object"==typeof B?B.y:"number"==typeof B?B:0)||4,z||(a=function(a){h.doc.addEventListener(a,
function(b){b._dojo_click||!((new Date).getTime()<=E+1E3)||"INPUT"==b.target.tagName&&e.contains(b.target,"dijitOffScreen")||(b.stopPropagation(),b.stopImmediatePropagation&&b.stopImmediatePropagation(),"click"!=a||"INPUT"==b.target.tagName&&"radio"!=b.target.type&&"checkbox"!=b.target.type||"TEXTAREA"==b.target.tagName||"AUDIO"==b.target.tagName||"VIDEO"==b.target.tagName||b.preventDefault())},!0)},z=!0,h.doc.addEventListener(b,function(a){B=B&&a.target==w&&Math.abs((a.touches?a.touches[0].pageX:
a.clientX)-r)<=y&&Math.abs((a.touches?a.touches[0].pageY:a.clientY)-v)<=C},!0),h.doc.addEventListener(g,function(a){if(B){E=(new Date).getTime();var b=a.target;"LABEL"===b.tagName&&(b=f.byId(b.getAttribute("for"))||b);setTimeout(function(){d.emit(b,"click",{bubbles:!0,cancelable:!0,_dojo_click:!0})})}},!0),a("click"),a("mousedown"),a("mouseup"))}var A=n("touch"),u=5>n("ios"),x=navigator.msPointerEnabled,z,B,w,r,v,y,C,E,F,D;A&&(x?m(function(){h.doc.addEventListener("MSPointerDown",function(a){q(a,
"MSPointerMove","MSPointerUp")},!0)}):m(function(){function a(a){var c=b.delegate(a,{bubbles:!0});6<=n("ios")&&(c.touches=a.touches,c.altKey=a.altKey,c.changedTouches=a.changedTouches,c.ctrlKey=a.ctrlKey,c.metaKey=a.metaKey,c.shiftKey=a.shiftKey,c.targetTouches=a.targetTouches);return c}D=h.body();h.doc.addEventListener("touchstart",function(a){F=(new Date).getTime();var b=D;D=a.target;d.emit(b,"dojotouchout",{relatedTarget:D,bubbles:!0});d.emit(D,"dojotouchover",{relatedTarget:b,bubbles:!0});q(a,
"touchmove","touchend")},!0);d(h.doc,"touchmove",function(b){F=(new Date).getTime();var c=h.doc.elementFromPoint(b.pageX-(u?0:h.global.pageXOffset),b.pageY-(u?0:h.global.pageYOffset));c&&(D!==c&&(d.emit(D,"dojotouchout",{relatedTarget:c,bubbles:!0}),d.emit(c,"dojotouchover",{relatedTarget:D,bubbles:!0}),D=c),d.emit(c,"dojotouchmove",a(b))||b.preventDefault())});d(h.doc,"touchend",function(b){F=(new Date).getTime();var c=h.doc.elementFromPoint(b.pageX-(u?0:h.global.pageXOffset),b.pageY-(u?0:h.global.pageYOffset))||
h.body();d.emit(c,"dojotouchend",a(b))})}));k={press:g("mousedown","touchstart","MSPointerDown"),move:g("mousemove","dojotouchmove","MSPointerMove"),release:g("mouseup","dojotouchend","MSPointerUp"),cancel:g(a.leave,"touchcancel",A?"MSPointerCancel":null),over:g("mouseover","dojotouchover","MSPointerOver"),out:g("mouseout","dojotouchout","MSPointerOut"),enter:a._eventHandler(g("mouseover","dojotouchover","MSPointerOver")),leave:a._eventHandler(g("mouseout","dojotouchout","MSPointerOut"))};return p.touch=
k})},"dojo/dnd/common":function(){define(["../sniff","../_base/kernel","../_base/lang","../dom"],function(p,k,f,e){var b=f.getObject("dojo.dnd",!0);b.getCopyKeyState=function(b){return b[p("mac")?"metaKey":"ctrlKey"]};b._uniqueId=0;b.getUniqueId=function(){var d;do d=k._scopeName+"Unique"+ ++b._uniqueId;while(e.byId(d));return d};b._empty={};b.isFormElement=function(b){b=b.target;3==b.nodeType&&(b=b.parentNode);return 0<=" a button textarea input select option ".indexOf(" "+b.tagName.toLowerCase()+
" ")};return b})},"dojo/dnd/Mover":function(){define("../_base/array ../_base/declare ../_base/lang ../sniff ../_base/window ../dom ../dom-geometry ../dom-style ../Evented ../on ../touch ./common ./autoscroll".split(" "),function(p,k,f,e,b,d,n,a,m,h,g,c,q){return k("dojo.dnd.Mover",[m],{constructor:function(a,b,c){function e(a){a.preventDefault();a.stopPropagation()}this.node=d.byId(a);this.marginBox={l:b.pageX,t:b.pageY};this.mouseButton=b.button;b=this.host=c;a=a.ownerDocument;this.events=[h(a,
g.move,f.hitch(this,"onFirstMove")),h(a,g.move,f.hitch(this,"onMouseMove")),h(a,g.release,f.hitch(this,"onMouseUp")),h(a,"dragstart",e),h(a.body,"selectstart",e)];q.autoScrollStart(a);if(b&&b.onMoveStart)b.onMoveStart(this)},onMouseMove:function(a){q.autoScroll(a);var b=this.marginBox;this.host.onMove(this,{l:b.l+a.pageX,t:b.t+a.pageY},a);a.preventDefault();a.stopPropagation()},onMouseUp:function(a){(e("webkit")&&e("mac")&&2==this.mouseButton?0==a.button:this.mouseButton==a.button)&&this.destroy();
a.preventDefault();a.stopPropagation()},onFirstMove:function(c){var d=this.node.style,e,g=this.host;switch(d.position){case "relative":case "absolute":e=Math.round(parseFloat(d.left))||0;d=Math.round(parseFloat(d.top))||0;break;default:d.position="absolute";d=n.getMarginBox(this.node);e=b.doc.body;var f=a.getComputedStyle(e),h=n.getMarginBox(e,f),f=n.getContentBox(e,f);e=d.l-(f.l-h.l);d=d.t-(f.t-h.t)}this.marginBox.l=e-this.marginBox.l;this.marginBox.t=d-this.marginBox.t;if(g&&g.onFirstMove)g.onFirstMove(this,
c);this.events.shift().remove()},destroy:function(){p.forEach(this.events,function(a){a.remove()});var a=this.host;if(a&&a.onMoveStop)a.onMoveStop(this);this.events=this.node=this.host=null}})})},"dojo/dnd/autoscroll":function(){define("../_base/lang ../sniff ../_base/window ../dom-geometry ../dom-style ../window".split(" "),function(p,k,f,e,b,d){var n={};p.setObject("dojo.dnd.autoscroll",n);n.getViewport=d.getBox;n.V_TRIGGER_AUTOSCROLL=32;n.H_TRIGGER_AUTOSCROLL=32;n.V_AUTOSCROLL_VALUE=16;n.H_AUTOSCROLL_VALUE=
16;var a,m=f.doc,h=Infinity,g=Infinity;n.autoScrollStart=function(b){m=b;a=d.getBox(m);b=f.body(m).parentNode;h=Math.max(b.scrollHeight-a.h,0);g=Math.max(b.scrollWidth-a.w,0)};n.autoScroll=function(b){var c=a||d.getBox(m),e=f.body(m).parentNode,k=0,p=0;b.clientX<n.H_TRIGGER_AUTOSCROLL?k=-n.H_AUTOSCROLL_VALUE:b.clientX>c.w-n.H_TRIGGER_AUTOSCROLL&&(k=Math.min(n.H_AUTOSCROLL_VALUE,g-e.scrollLeft));b.clientY<n.V_TRIGGER_AUTOSCROLL?p=-n.V_AUTOSCROLL_VALUE:b.clientY>c.h-n.V_TRIGGER_AUTOSCROLL&&(p=Math.min(n.V_AUTOSCROLL_VALUE,
h-e.scrollTop));window.scrollBy(k,p)};n._validNodes={div:1,p:1,td:1};n._validOverflow={auto:1,scroll:1};n.autoScrollNodes=function(a){for(var c,d,g,h,m,p=0,w=0,r=a.target;r;){if(1==r.nodeType&&r.tagName.toLowerCase()in n._validNodes){g=b.getComputedStyle(r);m=g.overflowX.toLowerCase()in n._validOverflow;h=g.overflowY.toLowerCase()in n._validOverflow;if(m||h)c=e.getContentBox(r,g),d=e.position(r,!0);if(m){g=Math.min(n.H_TRIGGER_AUTOSCROLL,c.w/2);m=a.pageX-d.x;if(k("webkit")||k("opera"))m+=f.body().scrollLeft;
p=0;0<m&&m<c.w&&(m<g?p=-g:m>c.w-g&&(p=g),r.scrollLeft+=p)}if(h){h=Math.min(n.V_TRIGGER_AUTOSCROLL,c.h/2);g=a.pageY-d.y;if(k("webkit")||k("opera"))g+=f.body().scrollTop;w=0;0<g&&g<c.h&&(g<h?w=-h:g>c.h-h&&(w=h),r.scrollTop+=w)}if(p||w)return}try{r=r.parentNode}catch(v){r=null}}n.autoScroll(a)};return n})},"davinci/html/ui/HTMLEditor":function(){define(["dojo/_base/declare","davinci/ui/ModelEditor","davinci/model/Factory","davinci/html/ui/HTMLOutline"],function(p,k,f,e){return p("davinci.html.ui.HTMLEditor",
k,{constructor:function(b,d){this.model=this.htmlFile=f.getModel({url:d});this._handle=dojo.connect(this.htmlFile.getDocumentElement(),"onkeydown",this,"onKeyDown")},destroy:function(){this.htmlFile.close();dojo.disconnect(this._handle);this.inherited(arguments)},getOutline:function(){this.outline||(this.outline=new e(this.model));return this.outline},getDefaultContent:function(){return"\x3chtml\x3e\n \x3chead\x3e\x3c/head\x3e\n \x3cbody\x3e\x3c/body\x3e\n\x3c/html\x3e"},onKeyDown:function(b){}})})},
"davinci/html/ui/HTMLOutline":function(){define(["dojo/_base/declare","davinci/html/ui/HTMLOutlineModel"],function(p,k){return p("davinci/html/ui/HTMLOutline",null,{constructor:function(f){this._htmlModel=f},getModel:function(){return this._model=new k(this._htmlModel)}})})},"davinci/html/ui/HTMLOutlineModel":function(){define(["dojo/_base/declare"],function(p){return p("davinci.html.ui.HTMLOutlineModel",null,{constructor:function(k){this.root=k;this.subscription=dojo.subscribe("/davinci/ui/modelChanged",
this,this._modelChanged)},getRoot:function(k,f){k(this.root)},getIdentity:function(k){return k.getID()},getLabel:function(k){return k.getLabel().replace("\x3c","\x26lt")},_getChildren:function(k){var f=[];"HTMLFile"!=k.elementType&&"HTMLElement"!=k.elementType||dojo.forEach(k.children,function(e){"HTMLElement"==e.elementType&&f.push(e)});return f},mayHaveChildren:function(k){return 0<k.children.length},getChildren:function(k,f,e){f(this._getChildren(k))},_modelChanged:function(){this.onChildrenChange(this.root,
this._getChildren(this.root))},destroy:function(){dojo.unsubscribe(this.subscription)}})})},"davinci/ve/VisualEditor":function(){define("dojo/_base/declare dojo/_base/lang dojo/_base/connect dojo/dom-class dojo/dom-construct dojo/promise/all ../Runtime ../Workbench ../model/Path ./metadata ./Context preview/silhouetteiframe preview/loadIndicator ../workbench/Preferences ./widget ../XPathUtils ../html/HtmlFileXPathAdapter ./utils/GeomUtils xide/utils xide/registry".split(" "),function(p,k,f,e,b,d,
n,a,m,h,g,c,q,A,u,x,z,B,w,r){return p("davinci.ve.VisualEditor",null,{deviceName:"none",_orientation:"portrait",_subscriptions:[],delite:!1,context:null,getContext:function(){return this.context},template:{},constructor2:function(a,g,f){this._pageEditor=g;this.template=f||{};this.contentPane=dijit.getEnclosingWidget(a)||r.byId(a.id);this.loadingDiv=b.create("div",{className:"loading",innerHTML:dojo.replace("\x3ctable\x3e\x3ctr\x3e\x3ctd\x3e\x3cspan\x3e\x26nbsp;\x26nbsp;\x26nbsp;\x26nbsp;\x26nbsp;\x3c/span\x3e\x26nbsp;{0}\x3c/td\x3e\x3c/tr\x3e\x3c/table\x3e",
["Loading..."])},this.contentPane.domNode.parentNode,"first");e.add(this.contentPane.domNode,"fullPane");a=b.create("div",{className:"silhouette_div_container"},this.contentPane.domNode);b.create("span",{className:"silhouetteiframe_object_container"},a);this.silhouetteiframe=new c({rootNode:a,margin:20});var m=this;this.contentPane.connect(this.contentPane,"resize",function(a){var b=dojo.query(".designCP iframe",this._pageEditor.domNode)[0];b&&b.contentDocument&&b.contentDocument.body&&(m._resizeBody(b.contentDocument.body,
a),setTimeout(function(){var a=m.getContext();a.clearCachedWidgetBounds();a.updateFocusAll();m._registerScrollHandlers()},100))}.bind(this));this._pageEditor.deferreds=d(h.getDeferreds());this._subscriptions.push(dojo.subscribe("/davinci/ui/editorSelected",this._editorSelected.bind(this)));this._subscriptions.push(dojo.subscribe("/davinci/ui/context/loaded",this._contextLoaded.bind(this)))},_setContentRaw:function(a,b,c){this.fileName=a;this.basePath=new m(a);if(this.initialSet)this.context.setSource(b,
this.context._restoreStates,this.context);else{var d=n.getUserWorkspaceUrl();0==a.indexOf("./")&&(a=a.substring(2,a.length));a=d+a;a=d;this._handles=[];d=dojo.query(".silhouette_div_container",this.contentPane.containerNode)[0];$(this.contentPane.containerNode).find(".silhouette_div_container");d={editor:this._pageEditor,visualEditor:this,containerNode:d,model:b,template:this.template,baseURL:a,iframeattrs:{"class":"silhouetteiframe_iframe"},ctx:this._pageEditor.ctx};this.context=this.template&&this.template.contextClass?
new (w.getObject(this.template.contextClass))(d):new g(d);this.context._commandStack=this._commandStack;this._commandStack._context=this.context;try{this._handles.push(dojo.connect(this.context,"activate",this,this.update))}catch(F){debugger}this._handles.push(dojo.connect(this.context,"onContentChange",this,this.onContentChange));this._handles.push(dojo.connect(this.context,"onSelectionChange",this,this.onContentChange));this.title=dojo.doc.title;this.context._setSource(b,this._connectCallback,this,
c);this.context.getFlowLayout();this.initialSet=!0}},constructor:function(a,g,f){this._pageEditor=g;this.template=f||{};this.contentPane=dijit.getEnclosingWidget(a)||r.byId(a.id);a=this.contentPane.containerNode;this.loadingDiv=b.create("div",{className:"loading",innerHTML:dojo.replace("\x3ctable\x3e\x3ctr\x3e\x3ctd\x3e\x3cspan\x3e\x26nbsp;\x26nbsp;\x26nbsp;\x26nbsp;\x26nbsp;\x3c/span\x3e\x26nbsp;{0}\x3c/td\x3e\x3c/tr\x3e\x3c/table\x3e",["Loading..."])},a.parentNode,"first");e.add(a,"fullPane");a=
b.create("div",{className:"silhouette_div_container"},a);b.create("span",{className:"silhouetteiframe_object_container"},a);this.silhouetteiframe=new c({rootNode:a,margin:20});this._pageEditor.deferreds=d(h.getDeferreds());this._subscriptions.push(dojo.subscribe("/davinci/ui/editorSelected",this._editorSelected.bind(this)));this._subscriptions.push(dojo.subscribe("/davinci/ui/context/loaded",this._contextLoaded.bind(this)))},getDevice:function(){return this.deviceName},setDevice:function(a,b){this.deviceName=
a;var c=this.getContext();c.setMobileMeta(a);b||c.setMobileTheme(a);this.silhouetteiframe.setSVGFilename("none"==a?null:"app/preview/images/"+a+".svg");c.clearCachedWidgetBounds();dojo.publish("/davinci/ui/deviceChanged",[a]);dojo.publish("/davinci/ui/repositionFocusContainer",[])},toggleOrientation:function(){"none"!=this.deviceName&&this.setOrientation("landscape"==this._orientation?"portrait":"landscape");this.getContext().clearCachedWidgetBounds()},getOrientation:function(a){return this._orientation},
setOrientation:function(b){if("none"!=this.deviceName&&this._orientation!=b){this._orientation=b;b=a.getOpenEditor();b.editorContainer&&b.editorContainer.updateToolbars&&b.editorContainer.updateToolbars();var c=this.getContext();c.setMobileOrientation(this._orientation);this.silhouetteiframe.setOrientation(this._orientation);b._visualChanged();setTimeout(function(){c.clearCachedWidgetBounds();c.updateFocusAll()},100)}},_objectPropertiesChange:function(a){if(this.isActiveEditor()){var b=this.getContext(),
c=a.command;b.getCommandStack().execute(a.compoundCommand||c);c._newId?(a=u.byId(c._newId,b.getDocument()),b.select(a)):(c=b.getSelection(),a=c.length?c[c.length-1]:void 0,1<c.length&&b.select(a));this._srcChanged()}},isActiveEditor:function(){var a=n.currentEditor;return a&&"davinci.ve.PageEditor"==a.declaredClass&&a.visualEditor==this},_stylePropertiesChange:function(a){if(this.isActiveEditor()){var b=this.getContext().getCommandForStyleChange(a);b&&(this.getContext().getCommandStack().execute(b),
b._newId&&(b=u.byId(b._newId,context.getDocument()),this.context.select(b)),this._srcChanged(),dojo.publish("/davinci/ui/widgetValuesChanged",[a]))}},_srcChanged:function(){this.isDirty=!0},getTemplate:function(){return template},destroy:function(){this._handles&&(this._focusPopup&&this._focusPopup.destroyRecursive(),delete this._focusPopup,this.context.destroy(),this._handles.forEach(dojo.disconnect),this._iframeScrollHandler&&(dojo.disconnect(this._iframeScrollHandler),delete this._iframeScrollHandler),
this._designCPScrollHandler&&(dojo.disconnect(this._designCPScrollHandler),delete this._designCPScrollHandler),this._subscriptions.forEach(dojo.unsubscribe),this._subscriptions=[])},setContent:function(a,b,c){this._onloadMessages=[];this._setContent(a,b,c)},saveAs:function(a,b,c){this._setContent(a,c)},_setContent:function(a,b,c){this._setContentRaw(a,b,c)},_connectCallback:function(b){try{if(b instanceof Error)throw b;var c=this.context,d;this.savePoint=0;try{c.activate2()}catch(E){console.error("crash in context activation! : "+
E),logError(E,"crash in context activation! : ")}d=a.createPopup({partID:"davinci.ve.visualEditor",domNode:c.getContainerNode(),keysDomNode:c.getDocument(),context:c});c.getDocument();d&&(d.adjustPosition=function(a){var b=dojo.position(c.frameNode);dojo.withDoc(c.getDocument(),function(){var a=dojo.docScroll();b.x-=a.x;b.y-=a.y});return b});this._focusPopup=a.createPopup({partID:"davinci.ve.visualEditor",domNode:c.getFocusContainer(),keysDomNode:c.getDocument(),context:c});c.getTopWidgets().forEach(function(a){a.resize&&
a.resize()});c.anyDojoxMobileWidgets=void 0;dojo.publish("/davinci/ui/context/pagebuilt",[c])}catch(E){b=E}finally{b.errorMessage?(this.loadingDiv.innerHTML=b.errorMessage||"(unknown)",console.error("error! ",b.errorMessage)):b instanceof Error?(this.loadingDiv.parentNode&&this.loadingDiv.parentNode.removeChild(this.loadingDiv),delete this.loadingDiv,dojo.publish("/davinci/ui/context/pagebuilt",[c]),console.error("error! ",b)):(this.loadingDiv.parentNode&&this.loadingDiv.parentNode.removeChild(this.loadingDiv),
delete this.loadingDiv)}},getSelectedWidget:function(){var a=this.getContext(),b=a.getSelection(),c=b.length?b[b.length-1]:void 0;1<b.length&&a.select(c);return c},getSelectedSubWidget:function(){return this._selectedSubWidget},save:function(a){if(this.context){var b=[],c=this.context.getModel();c.getText();c.setDirty(!0);c.visit({visit:function(c){"HTMLFile"!=c.elementType&&"CSSFile"!=c.elementType||!c.isDirty()||b.push(c.save(a));return!1}});b=b.concat(this.getContext().saveDynamicCssFiles(this.context.cssFiles,
a));b.length?this.savePromise=d(b):delete this.savePromise;return this.savePromise}},removeWorkingCopy:function(){},getDefaultContent:function(){return this.getTemplate()},previewInBrowser:function(){var b=this.deviceName,c=a.getOpenEditor().resourceFile.getURL(),d=[];"none"!=b&&(d=["preview\x3d1","device\x3d"+encodeURIComponent(b),"file\x3d"+encodeURIComponent(c)],c=a.location(),c+="/maqetta/preview.html?","landscape"==this._orientation&&d.push("orientation\x3d"+this._orientation));this.context.getPreference("zazl")&&
d.push("zazl\x3dtrue");d.length&&(c+="?"+d.join("\x26"));b=function(){var a=window.open(c,"preview_"+c);q(a,n.location()+require.toUrl("dojox/image/resources/images/loading.gif"),"gray")};this.savePromise?this.savePromise.then(b):b()},refresh:function(){var a=this.context,b=x.getXPath(a.getSelection()[0]._srcElement,z);a.setSource(a.model);var b=a.model.evaluate(b).getAttribute("id"),c=u.byId(b,a.getDocument());setTimeout(function(){a.select(c)},0)},_contextLoaded:function(a){a==this.getContext()&&
this._registerScrollHandlers()},_editorSelected:function(a){var b=this.getContext(),b=b?b.getFocusContainer():null;a.oldEditor==this._pageEditor&&b&&this._focusPopup&&this._focusPopup.unBindDomNode(b);a.editor==this._pageEditor&&(this._registerScrollHandlers(),b&&this._focusPopup&&this._focusPopup.bindDomNode(b));if(b=document.getElementById("visualEditorBorder"))b.style.display=a.editor&&"davinci.ve.PageEditor"==a.editor.declaredClass?"block":"none"},_resizeBody:function(a,b){var c=B.getScrollLeft(a),
d=B.getScrollTop(a);a.style.width=0<c?b.w+c+"px":"100%";a.style.height=0<d?b.h+d+"px":"100%"},_scrollHandler:function(a){(a=dojo.query(".designCP iframe",this._pageEditor.domNode)[0])&&a.contentDocument&&a.contentDocument.body&&(this._resizeBody(a.contentDocument.body,{w:dojo.style(this.contentPane.domNode,"width"),h:dojo.style(this.contentPane.domNode,"height")}),setTimeout(function(){var a=this.getContext();a.clearCachedWidgetBounds();a.updateFocusAll()}.bind(this),100))},_registerScrollHandlers:function(){if(!this._iframeScrollHandler){var a=
dojo.query(".designCP iframe",this._pageEditor.domNode)[0];a&&a.contentDocument&&a.contentDocument.body&&(this._iframeScrollHandler=dojo.connect(a.contentDocument.body.ownerDocument,"onscroll",this,this._scrollHandler))}!this._designCPScrollHandler&&(a=dojo.query(".designCP",this._pageEditor.domNode)[0])&&(this._designCPScrollHandler=dojo.connect(a,"onscroll",this,this._scrollHandler))}})})},"davinci/ve/Context":function(){define([],function(){})},"davinci/ve/VisualEditorOutline":function(){define("dojo/_base/declare dojo/_base/connect ./commands/ReparentCommand ./commands/StyleCommand ./widget ./States ../Runtime xide/factory xide/types".split(" "),
function(p,k,f,e,b,d,n,a,m){var h=p(null,{toggleMode:!0,betweenThreshold:4,showRoot:!0,dndController:"dijit.tree.dndSource",onChange:function(a){},constructor:function(a){this._context=a;this._handles=[];this._connect("activate","_rebuild");this._connect("widgetChanged","_widgetChanged")},getRoot:function(a,b){a(this._context.rootWidget||{id:"myapp",label:"application"})},getLabel:function(a){if("myapp"==a.id)return this._context.model.fileName;var c="",d=this._getWidget(a);if("xblox/RunScript"===
a.type&&d)return(c=d.domNode)&&c.script?"XBlox::"+c.script:"XBlox::"+d.dijitWidget.targetEvent;if(d.isWidget)return c=b.getLabel(d);if(c=d.type){a=this.useRichTextLabel?"\x26lt;":"\x3c";var e=this.useRichTextLabel?"\x26gt;":"\x3e",c=0===c.indexOf("html.")?a+c.substring(5)+e:0===c.indexOf("OpenAjax.")?a+c.substring(9)+e:0<c.indexOf(".")?c.substring(c.lastIndexOf(".")+1):d.label||c;(d=b.byId(d.id,this._context.getDocument()))&&(d=d.getId())&&(c+=" id\x3d"+d);return c}},_getChildren:function(a){var b=
[];this._context.rootWidget||console.error("editor context has no root widget yet!");if(!this._context.rootWidget||!a||"state"==a.type||"html.stickynote"==a.type||"html.richtext"==a.type)return[];if("myapp"==a.id||a===this._context.rootNode)b=this._context.getTopWidgets();else{var d=this._getWidget(a);d&&d.getChildren&&(b=this._getWidget(a).getChildren())}return b.filter(function(a){return"xblox/RunScript"==a.type||"xblox/CSSState"==a.type||"xblox/StyleState"==a.type?!0:a&&a.getContext&&a.getContext()&&
!a.internal&&a._srcElement}).map(this._buildItem)},__getChildren:function(a){var b=[];a&&"dijit/form/Button"==a.type&&a.dijitWidget&&dojo.forEach(a.dijitWidget.domNode.children,function(a){(a=davinci.ve.widget.getWidget(a))&&"xblox/RunScript"==a.type&&b.push(a)});return b},mayHaveChildren:function(a){return(a=this._getWidget(a))&&a.type&&0===a.type.indexOf("OpenAjax.")?!1:0<this._getChildren(a).length},getIdentity:function(a){return a?a.id:null},getChildren:function(a,b,d){b(this._getChildren(a))},
put:function(a,b){a=this._getWidget(a);b=a.getParent();this.onChildrenChange(b,this._getChildren(b));return this.getIdentity(a)},add:function(a,b){(b=b||{}).overwrite=!1;return this.put(a,b)},onDelete:function(a){},remove:function(a){this.onDelete(a)},newItem:function(a,b){},pasteItem:function(a,b,d,e,h,m){a&&d&&b&&(d="myapp"==d.id?this._context.rootWidget:this._getWidget(d),b="myapp"==b.id?this._context.rootWidget:this._getWidget(b),a=this._getWidget(a),b!=d||e||dojo.indexOf(b.getChildren(),a)<h&&
h++,a=new f(a,d,h),this._context.getCommandStack().execute(a))},checkItemAcceptance:function(a,b,d){switch(d){case "before":case "after":return!0;default:return a=dijit.getEnclosingWidget(a).item,a=this.tree.model._getWidget(a),a.getContainerNode&&a.getContainerNode()||"myapp"==a.id}},onChildrenChange:function(a,b){},_rebuild:function(){if(!this._skipRefresh){var a=this._context.rootNode;if(a)this.onChildrenChange(this._buildItem(a),this._getChildren(a))}},_widgetChanged:function(b,c,d){try{b===this._context.WIDGET_ADDED?
this.add(c):b===this._context.WIDGET_REMOVED?this.remove(c):b===this._context.WIDGET_MODIFIED?(this.onChange(c),this.onChildrenChange(c,this._getChildren(c))):b===this._context.WIDGET_REPARENTED?(this.remove(c),this.put(c,{overwrite:!0,parent:d[1]})):b===this._context.WIDGET_ID_CHANGED&&(this.remove({id:d}),this.add(c))}catch(A){console.error("VisualEditorOutline._widgetChanged: e \x3d "+A)}a.publish(m.EVENTS.ON_WIDGET_CHANGED,{type:b,widget:c,args:d},this)},toggle:function(a,b,d){a=this._getWidget(a);
var c=a.getHelper(),e=!0;c&&c.onToggleVisibility&&(e=c.onToggleVisibility(a,b));return e?(this._toggle(a,b,d),!0):!1},_toggle:function(a,b,f){b=b?"none":"";var c;if(f=d.getFocus(a.domNode.ownerDocument.body))c=f.state;else{f=d.getStatesListCurrent(a.domNode);for(var g=0;g<f.length;g++)if(f[g]){c=f[g];break}}a=new e(a,[{display:b}],c);this._context.getCommandStack().execute(a)},shouldShowElement:function(a,b){return"toggleNode"==a?"states"!=b.type&&"myapp"!=b.id:!0},_getToggledItemsAttr:function(){var a=
[],b;for(b in this.toggledItems)a.push(b);return a},isToggleOn:function(a){a=this._getWidget(a);var b=a.getHelper();return b&&b.isToggleOn?b.isToggleOn(a):"none"===a.domNode.style.display},_getWidget:function(a){return a?b.byId(a.id):null},_buildItem:function(a){if(a)return{id:a.id,type:a.type}},_connect:function(a,b){this._handles.push(k.connect(this._context,a,this,b))},destroy:function(){this._handles.forEach(k.disconnect)}});return p("davinci.ve.VisualEditorOutline",null,{toolbarID:"davinci.ve.outline",
_outlineMode:"design",constructor:function(a){this._editor=a;this._context=a.visualEditor.context;this._handles=[];this._connect("onSelectionChange","onSelectionChange");this._connect("deselect","deselect");this._widgetModel=new h(this._context);k.subscribe("/maqetta/appstates/state/changed/end",this,function(a){if("davinci.themeEditor.ThemeEditor"!==("undefined"!==typeof davinci&&n.currentEditor&&n.currentEditor.declaredClass)&&this._tree&&(a=a&&a.node&&a.node._dvWidget))for(a=a.getChildren();a.length;){var b=
a.shift();if(b){var c="none"!==b.domNode.style.display;this._tree&&this._tree.toggleNode(b,!c);a=a.concat(b.getChildren())}}})},getActionsID:function(){if("design"===this._outlineMode)return"davinci.ve.VisualEditorOutline"},_connect:function(a,b){this._handles.push(k.connect(this._context,a,this,b))},switchDisplayMode:function(a){this._outlineMode=a;this._outlineView.createTree()},getModel:function(){switch(this._outlineMode){case "design":this._model=this._widgetModel;break;case "source":this._model=
this._srcModel}return this._model},getSelectedItem:function(){return this._tree&&this._tree._getSelectedItemAttr()},onSelectionChange:function(a,b){"design"==this._outlineMode&&(a=a||this._context.getSelection())&&this._tree&&this._tree.selectNode(a,b)},deselect:function(){this._tree&&this._tree&&this._tree.deselectAll()},getIconClass:function(a,b){return(a=a.type)?"xblox/RunScript"==a?"fa fa-play-circle-o":b?"fa fa-circle-thin":"fa fa-circle":b?"fa fa-circle-thin":"fa fa-circle"}})})},"davinci/ve/prefs/HTMLEditPreferences":function(){define("dojo/_base/declare dijit/layout/ContentPane dijit/_TemplatedMixin dijit/form/CheckBox dijit/form/TextBox dijit/form/Select davinci/lang/ve/common dojo/text!./HtmlEditPreferences.html".split(" "),
function(p,k,f,e,b,d,n,a){return p([k,f],{templateString:a,postMixInProperties:function(){this._loc=n},postCreate:function(){this._snap=new e({},this.snapNode);this._showPossibleParents=new e({},this.showPossibleParentsNode);this._cssOverrideWarn=new e({},this.cssOverrideWarn);this._absoluteWidgetsZindex=new b({},this.absoluteWidgetsZindex);this._zazl=new e({},this.zazl);this.containerNode||(this.containerNode=this.domNode)},getDefaults:function(){},setDefaults:function(){},doApply:function(){},getPreferences:function(){return{snap:this._snap.checked,
showPossibleParents:this._showPossibleParents.checked,cssOverrideWarn:this._cssOverrideWarn.checked,absoluteWidgetsZindex:this._absoluteWidgetsZindex.value,zazl:this._zazl.checked}},setPreferences:function(a){a=a||{};this._check(this._snap,!!a.snap);this._check(this._showPossibleParents,!!a.showPossibleParents);this._check(this._cssOverrideWarn,!!a.cssOverrideWarn);this._absoluteWidgetsZindex.set("value",a.absoluteWidgetsZindex);this._check(this._zazl,!!a.zazl)},_check:function(a,b){a.set("checked",
b)},save:function(a){davinci.ve._preferences=a}})})},"davinci/lang/ve/common":function(){define([],function(){return{search:"Search",filter:"Filter","new":"New",errorSavingFile:"Error saving file: ${0} details: ${1}",palette:"palette",closeAllEditors:"Close all tabs",undo:"Undo",redo:"Redo",copy:"Copy",paste:"Paste",cut:"Cut","delete":"Delete",surround:"Surround",properties:"Properties",styles:"Styles",events:"Events",preferences:"Preferences",addPane:"Add Pane",addColumn:"Add Column",addRow:"Add Row",
removeColumn:"Remove Column",removeRow:"Remove Row",joinColumn:"Join Column",joinRow:"Join Row",splitColumn:"Split Column",splitRow:"Split Row",alignLeft:"Align Left",alignRight:"Align Right",alignTop:"Align Top",alignBottom:"Align Bottom",show:"Show",hide:"Hide",addMenuItem:"Add Menu Item",addSubMenu:"Add Sub Menu",addMenuBarItem:"Add MenuBar Item",addPopupMenuBar:"Add Popup MenuBarItem",ok:"OK",cancel:"Cancel",page:"Page",title:"Title",metaInfo:"Meta Info",httpEquiv:"HTTP Equiv",style:"Style",theme:"Theme",
styleSheets:"Style Sheets",rules:"Rules",url:"URL",externalScripts:"External Scripts",modules:"Modules",name:"Name",value:"Value",add:"Add",remove:"Remove",staticOptions:"Static Options",axisOptions:"Axis Options",series:"Series",axis:"Axis",option:"Option",selected:"Selected",staticItems:"Static Items",dataStore:"Data Store",query:"Query",fields:"Fields",field:"Field",label:"Label",width:"Width",edit:"Edit",key:"Key",rootId:"Root ID",rootLabel:"Root Label",childrenAttrs:"Children Attributes",items:"Items",
type:"Type",widget:"Widget",position:"Position",size:"Size",layout:"Layout",visual:"Visual",text:"Text",border:"Border",table:"Table",list:"List",aural:"Aural",others:"Others",onLoad:"Load",onUnload:"Unload",script:"Script",methodCall:"Method Call",serviceCall:"Service Call",object:"Object",method:"Method",parameters:"Parameters",result:"Result",service:"Service",content:"Content",source:"Source",target:"Target",property:"Property",flowLayout:"Flow Layout",snapToNearestWidget:"Snap to nearest widget",
showPossibleParents:"When dragging, show possible parents",warnOnCSSOverride:"Warn on CSS Override",absoluteWidgetsZindex:"z-index for sketch mode",widgetPaletteLayout:"In Palette, display widgets as",widgetPaletteShow_Icons:"icons",widgetPaletteShow_List:"list",liveEdit:"Live Edit",zazl:"Enable \x3ca href\x3d'http://zazl.org' target\x3d'_blank'\x3eZazl Optimizer\x3c/a\x3e",selectorPrefix:"Selector Prefix",component:"Component",alternates:"Alternates",alternateWidgets:"Alternate widgets:",howToChooseAlternate:"To choose alternate widget, click-select current widget, then click on up arrow icon.",
summary:"Summary:",description:"Description:",showSuggestedWidgets:"Suggested Widgets",showAllWidgets:"All Widgets",MoreIconTitleString:"Click here to see alternative similar widgets",HelpIconTitleString:"Click here to see descriptive info about this widget",__dummy__:""}})},"davinci/commands/OrderedCompoundCommand":function(){define(["dojo/_base/declare","davinci/commands/CompoundCommand"],function(p,k){return p("davinci.commands.OrderedCompoundCommand",k,{undo:function(){if(this._commands)for(var f=
0;f<this._commands.length;f++)this._commands[f].undo()}})})},"davinci/version":function(){define([],"10")},"davinci/ve/utils/pseudoClass":function(){define([],function(){return{MAQETTA_PSEUDO_CLASS:"maqettaPseudoClass",replace:function(p){return"hover link visited active focus first-letter first-line first-child before after".split(" ").reduce(function(k,f){return k.replace(new RegExp(":"+f,"g"),".maqettaPseudoClass"+f[0].toUpperCase()+f.slice(1))},p)}}})},"davinci/model/resource/Folder":function(){define(["dojo/_base/declare",
"dojo/_base/xhr","davinci/Runtime","davinci/model/resource/Resource","davinci/model/resource/File"],function(p,k,f,e,b){var d=p("davinci.model.resource.Folder",e,{serviceClass:"XIDE_Directory_Service",workspaceMount:"/ws/",constructor:function(b,a){this.elementType="Folder";this.name=b;this.parent=a},reload:function(){this._isLoaded=!1},createResource:function(e,a,f,h){var g;null!=e?g=a?new d(e,this):new b(e,this):(g=this,a="Folder"==this.elementType);var c=this;if(!f){f=""+this.getPath();"."==f&&
(f=""+this.workspaceMount);f=f.replace("./",this.workspaceMount);f=this.serviceClass;a=a?"mkDir":"mkFile";if(!this.serviceObject[f][a])return console.error("_createResource : server doesnt support :"+a),this;this.serviceObject[f][a](this.workspaceMount,g.getPath()).then(function(a){if(!0===a&&null!=e||"The file already exists"===a)return c.children.push(g),delete g.libraryId,delete g.libVersion,delete g._readOnly,dojo.publish("/davinci/resource/resourceChanged",["created",g]),h&&h(g),g;if("OK"!=a)throw"Folder.createResource failed: name\x3d"+
e+"response\x3d"+a;delete g.libraryId;delete g.libVersion;delete g._readOnly;h(c);if(!h)debugger})}},getChildren2:function(b,a){if(this._isLoaded)b(this.children);else if(this._loadingCallbacks)this._loadingCallbacks.push(b);else{this._loadingCallbacks=[];this._loadingCallbacks.push(b);b=""+this.getPath();"."==b&&(b="/ws/");var d=this.serviceClass;if(!this.serviceObject)debugger;if(!this.serviceObject[d])debugger;this.serviceObject.sync=!0;this.serviceObject[d].ls(this.workspaceMount,b).then(function(a){this.setChildrenSync(a);
dojo.forEach(this._loadingCallbacks,function(a){a(this.children)},this);delete this._loadingCallbacks}.bind(this),a)}},getChildren:function(b,a){if(this._isLoaded)b.call(null,this.children);else if(this._loading)this._loading.then(function(){b.call(null,this.children)}.bind(this),a);else{console.error("list files : "+this.getPath());var d=""+this.getPath();"."==d&&(d="/ws/");d=d.replace("./",this.workspaceMount);this.serviceObject[this.serviceClass].ls(d).then(function(a){this.setChildren(a);this._isLoaded=
!0;b.call(null,this.children);delete this._loading}.bind(this),a)}},getChildrenSync:function(b,a){this._isLoaded?b(this.children):this._loadingCallbacks?this._loadingCallbacks.push(b):(this._loadingCallbacks=[],this._loadingCallbacks.push(b),console.error("list files : "+this.getPath()),b=this.getPath(),"./project1"===b&&console.error("gotcha"),b=""+b,"."==b&&(b="/ws/"),b=b.replace("./","/ws/"),f.serverJSONRequest({url:"cmd/listFiles.php",content:{path:this.getPath(),basePath:"./"},sync:a,load:dojo.hitch(this,
function(a,b){this.setChildrenSync(a);dojo.forEach(this._loadingCallbacks,function(a){a(this.children)},this);delete this._loadingCallbacks})}))},setChildren:function(b){this.children=[];this._appendFiles(b)},setChildrenSync:function(b){this.children=[];this._appendFiles(b,!0)},_appendFiles:function(e,a){e.forEach(function(e){var f=a?this.getChildSync(e.name):this._getChild(e.name),g=null!=f;e.isDir||e.isLib?(g||(f=new d(e.name,this)),e.isLib&&(f.isLibrary=!0)):g||(f=new b(e.name,this));f.link=e.link;
f.isNew=e.isNew;f._readOnly=e.readOnly;f.setDirty(e.isDirty);e.libraryId&&(f.libraryId=e.libraryId,f.libVersion=e.libVersion);g||this.children.push(f)},this);this._isLoaded=!0},getMarkers:function(b,a){var d=[];this.visit({visit:function(e){if("File"==e.elementType)markers=e.getMarkers(b),d.concat(markers);else if(!a)return!0}},!0);return d},getChildSync:function(b){if(!this._isLoaded||1>this.children.length)this._isLoaded=!1,this.getChildrenSync(function(a){this.children=a},!0);return this._getChild(b)},
getChild:function(b){if(!this._isLoaded||1>this.children.length)this._isLoaded=!1,this.getChildren2(function(a){this.children=a},!0);return this._getChild(b)},_getChild:function(b){if(!this.__CASE_SENSITIVE){if(!b||null==b.toLowerCase)debugger;b=b.toLowerCase()}var a;this.children.some(function(d){var e=d.getName();this.__CASE_SENSITIVE||(e=e.toLowerCase());(e=e==b)&&(a=d);return e});return a}});return d})},"davinci/model/resource/Resource":function(){define("dojo/_base/declare dojo/_base/xhr dojo/_base/connect dojo/Deferred davinci/Runtime davinci/model/Model davinci/model/Path xide/manager/ServerActionBase".split(" "),
function(p,k,f,e,b,d,n,a){return p("davinci.model.resource.Resource",[d,a],{singleton:!0,sync:!1,workspaceMount:"/ws/",_initService:function(){var a=this.findServiceUrl(this.declaredClass);a&&(this.serviceUrl=a);this.inherited(arguments)},constructor:function(){this.elementType="Resource";this.name="";this.parent=null;this._id=dijit.getUniqueId("maqFileResource");this.init()},getName:function(){return this.name},getPath:function(){return this.parent?this.parent.getPath()+"/"+this.name:this.name},
readOnly:function(){return this.hasOwnProperty("_readOnly")?this._readOnly||null!=this.parent&&this.parent.readOnly():this.parent?this.parent.readOnly():!1},getURL:function(){var a=this.getPath();0==a.indexOf("./")&&(a=a.substring(2,a.length));return b.getUserWorkspaceUrl()+a},rename:function(a){var b=(new n(this.getPath())).removeLastSegments().append(a);return k.get({url:"cmd/rename",handleAs:"text",content:{oldName:this.getPath(),newName:b.toString()}}).then(function(){this.name=a;f.publish("/davinci/resource/resourceChanged",
["renamed",this])}.bind(this))},getParentFolder:function(){return"File"==this.elementType?this.parent:this},isVirtual:function(){return!!this.libraryId},visit:function(a,b){var d=a.visit(this);this._isLoaded||"Folder"!=this.elementType||b?this.children&&!d&&dojo.forEach(this.children,function(c){c.visit(a,b)}):this.getChildren(dojo.hitch(this,function(){dojo.forEach(this.children,function(c){c.visit(a,b)})}))},deleteResource:function(a){var b=""+this.getPath();"."==b&&(b=""+this.workspaceMount);var b=
b.replace("./",this.workspaceMount),d=this.serviceClass,c="Folder"==this.elementType?"deleteDirectory":"deleteFile",m=function(){var a=this.getName();this.parent.children.some(function(b,c,d){if(b.getName()==a)return d.splice(c,1),!0});f.publish("/davinci/resource/resourceChanged",["deleted",this])}.bind(this);a?(a=new e,m(),a.resolve()):a=this.serviceObject[d][c](b).then(m,function(){});return a},getId:function(){return this._id}})})},"davinci/model/resource/File":function(){define("dojo/_base/declare davinci/Runtime davinci/model/resource/Resource davinci/model/resource/Marker davinci/ve/utils/URLRewrite xide/utils".split(" "),
function(p,k,f,e,b,d){return p("davinci.model.resource.File",f,{serviceClass:"XIDE_Directory_Service",mount:"/ws/",getMountPoint:function(){return this.mount},constructor:function(b,a){this.elementType="File";this.name=b;this.parent=a;this.markers=[];this.extension=b.substr(b.lastIndexOf(".")+1)},getExtension:function(){return this.extension},clearMarkers:function(){this.markers=[]},addMarker:function(b,a,d){this.markers.push(new e(this,b,a,d))},getMarkers:function(b){var a=[];if(this.markers)for(var d=
0;d<this.markers.length;d++){var e=this.markers[d];b?"string"==typeof b?e.type==b&&a.push(e):dojo.forEach(b,function(b){b==e.type&&a.push(e)}):a.push(e)}return a},setContents:function(b,a){this.isNew&&!a&&(this.isNew=!1);var d=(a=!1,""),e=encodeURI(this.getPath()+d);return this.serviceObject[this.serviceClass].set(this.getMountPoint(),e,b).then(function(b){this.dirtyResource=a;dojo.publish("/davinci/resource/resourceChanged",["modified",this]);return this}.bind(this),function(a){console.error("An error occurred: davinci.model.resource.File.prototype.setContents "+
a+" : "+e);return a})},getContentSync:function(){return k.serverJSONRequest({url:b.encodeURI(this.getURL()),handleAs:"text",sync:!0})},getContent:function(){return this.serviceObject[this.serviceClass].get(d.buildPath(this.getMountPoint(),encodeURI(this.getPath())),!1,!1)},removeWorkingCopy:function(){k.serverJSONRequest({url:k.cmdOffset+"cmd/removeWorkingCopy",handleAs:"text",content:{path:this.getPath()},sync:!0});this.isNew&&this.deleteResource(!0)}})})},"davinci/model/resource/Marker":function(){define(["dojo/_base/declare",
"davinci/model/resource/Resource"],function(p,k){return p("davinci.model.resource.Marker",k,{constructor:function(f,e,b,d){this.resource=f;this.type=e;this.line=b;this.text=d}})})},"davinci/ve/input/SmartInput":function(){define("dojo/_base/declare dojo/dom-geometry davinci/ve/commands/ModifyRichTextCommand dojox/html/entities davinci/lang/ve dijit/lang/_common xide/registry".split(" "),function(p,k,f,e,b,d,n){return p("davinci.ve.input.SmartInput",null,{property:null,_X_MOVE_RANGE:10,_Y_MOVE_RANGE:10,
_POINTER_TOP_OFFSET:-13,multiLine:"false",displayOnCreate:"true",_connection:[],getHelpText:function(){return this.helpText?this.helpText:this.isHtmlSupported()?b.smartInputHelp1:b.smartInputHelp2},isHtmlSupported:function(){this.supportsHTML||("html"==this._widget.type.match("^html")?this.supportsHTML="true":this.supportsHTML="false");return"boolean"===typeof this.supportsHTML?this.supportsHTML:"true"===this.supportsHTML},parse:function(a){return a},parseItems:function(a){this.trim&&(a=dojo.trim(a));
return a.match(/[^\\][\r\n]/)?this.parseItemsInRows(a):this.parseItemsInColumns(a)},parseItemsInRows:function(a){a=this.splitRows(a);for(var b=a.length,d=0;d<b;d++){var e=a[d],e=this.parseItem(e);a[d]=e}return a},parseItemsInColumns:function(a){a=this.splitColumns(a);for(var b=a.length,d=0;d<b;d++){var e=a[d],e=this.parseItem(e);a[d]=e}return a},parseGrid:function(a){a=this.splitRows(a);for(var b=a.length,d=0;d<b;d++){var e=this.parseItemsInColumns(a[d]);a[d]=e}return a},parseItem:function(a){var b=
null,d=a,e=a.match(/^([-~!>|(*)[+\]]*) ?(.*)$/);e&&(b=e[1],d=e[2]);var e=0,c=!1,f=!1;if(b)for(var k=0;k<b.length;k++)switch(b[k]){case "-":case "~":case "!":c=!0;break;case "\x3e":e++;break;case "*":case "+":f=!0}return{original:a,specialChars:b,text:d,indent:e,disabled:c,selected:f}},splitRows:function(a){var b=[],d,e="",c=!1;for(d=0;d<a.length;d++){var f=a.charAt(d);switch(f){case "\\":c&&(e+=f);c=!c;break;case "r":c?(e+="\r",c=!1):e+=f;break;case "n":c?(e+="\n",c=!1):e+=f;break;case "\r":case "\n":c?
(e+=f,c=!1):(this.trim&&(e=dojo.trim(e)),b.push(e),e="");break;default:e+=f,c=!1}}e&&(this.trim&&(e=dojo.trim(e)),b.push(e));return b},splitColumns:function(a){var b=[],d,e="",c=!1;for(d=0;d<a.length;d++){var f=a.charAt(d);switch(f){case "\\":c&&(e+=f);c=!c;break;case "r":c?(e+="\r",c=!1):e+=f;break;case "n":c?(e+="\n",c=!1):e+=f;break;case ",":c?(e+=f,c=!1):(this.trim&&(e=dojo.trim(e)),b.push(e),e="");break;default:e+=f,c=!1}}e&&(this.trim&&(e=dojo.trim(e)),b.push(e));return b},serializeItems:function(a){return"columns"==
this.format?this.serializeColumns(a):this.serializeRows(a)},serializeColumns:function(a){for(var b=0;b<a.length;b++){var d=a[b],d=d.replace(/\\/g,"\\\\");a[b]=d.replace(/,/g,"\\,")}return a.join(", ")},serializeRows:function(a){for(var b=0;b<a.length;b++){var d=a[b],d=d.replace(/\\/g,"\\\\");a[b]=d.replace(/\n/g,"\\\n")}return a.join("\n")},inlineEditActive:function(){return!(!this._inline||"none"==this._inline.style.display||!this._inline.eb)},show:function(a){this._widget=davinci.ve.widget.byId(a);
this._inline||this._createInline();a=dojo.hitch(this,function(a){this._inline.style.display="block";this.setFormat(a);a=e.decode(a,[["\x26","amp"],['"',"quot"],["\x3c","lt"],["\x3e","gt"]]);this._inline.eb.set("value",String(a));this.updateFormats();this.help(!1);dijit.selectInputText(this._inline.eb.textbox);this.updateSimStyle();this._inline.eb.textbox.focus()});var b=this._node(this._widget),d=this.property,g="maq_innerText"===d?"innerHTML":d,c;d&&(b?c=dojo.attr(b,g):"innerHTML"===g||"textContent"==
g?(c=this._widget._srcElement.getElementText(this._context),c=c.replace(/\s+/g," ")):c=this._widget.attr(d));this.serialize?this.serialize(b||this._widget,a,c):d&&a(c)},_createInline:function(){},_connectHelpDiv:function(){var a=dojo.byId("davinci.ve.input.SmartInput_img_help");this._connection.push(dojo.connect(a,"onclick",this,"toggleHelp"));this._connection.push(dojo.connect(dijit.byId("davinci.ve.input.SmartInput_ok"),"_onSubmit",this,"onOk"));this._connection.push(dojo.connect(dijit.byId("davinci.ve.input.SmartInput_cancel"),
"onClick",this,"onCancel"))},_findSmartInputContainer:function(a){return document.body},_loading:function(a,b){this._widget&&this._widget._edit_context||console.error("have no widget");var d=this._widget._edit_context.frameNode,e=d.ownerDocument,c=e.createElement("div"),f=this._findSmartInputContainer(d);if(f){f.appendChild(c);this._loadingDiv=c;dojo.addClass(c,"smartInputLoading");c=e.createElement("div");c.id="ieb";dojo.addClass(c,"inlineEdit dijitTooltipContainer");e=e.createElement("div");e.id=
"iebPointer";this._inline=c;f.appendChild(c);f.appendChild(e);var m=new dojo.dnd.Moveable("ieb");this._connection.push(dojo.connect(m,"onMoveStart",this,"onMoveStart"));this._connection.push(dojo.connect(m,"onMoveStop",this,"onMoveStop"));this._inline=new ContentPane({},c);c=n.byId("editorsStackContainer").domNode;n.byId("editorsStackContainer");c=k.position(c);this._loadingDiv.style.position="absolute";this._loadingDiv.style.left=c.x+"px";this._loadingDiv.style.top=c.y+"px";this._loadingDiv.style.width=
c.w+"px";this._loadingDiv.style.height=c.h+"px";var c=this._widget.getMarginBox(),m=dojo.position(d),p=dojo.position(f),d=m.x-p.x+f.scrollLeft-1,m=m.y-p.y+f.scrollTop-1,x=f.clientWidth,p=26,z=0;c.y+a+26<f.clientHeight?(p=c.y+26,dojo.addClass(e,"inlineEditConnectorBelow")):0<c.y-a?(p=c.y-a,z=a+12):p=26;a="0";c.x+b+20<x?a=c.x:c.x+b>x&&(b=c.x-b+c.w,0>b&&(b=0),a=b);a+=d;p+=m;this._inline._setStyleAttr({display:"block",top:p+"px",left:a+"px",padding:"1px",overflow:"hidden",backgroundImage:"none"});this._startTop=
p;this._startLeft=a;dojo.style(e,"left",c.x+20+d+"px");dojo.style(e,"top",p+z+this._POINTER_TOP_OFFSET+"px")}},handleEvent:function(a){switch(a.keyCode){case 13:var b=this.multiLine;if(!b||"false"==b||13==this._lastKeyCode||a.ctrlKey)this.onOk();else if(a.which==dojo.keys.ENTER&&a.ctrlKey)this.onOk();break;case 27:this.onCancel();break;default:this.updateFormats()}this._lastKeyCode=a.keyCode;this.updateSimStyle()},onOk:function(a){this.hide()},onCancel:function(a){this.hide(!0)},onMoveStart:function(a){dojo.style("iebPointer",
"display","none")},onMoveStop:function(a){var b=dojo.style("ieb","left");a=dojo.style("ieb","top");b=this._startLeft-b;a-=this._startTop;a<this._Y_MOVE_RANGE&&a>-this._Y_MOVE_RANGE?(dojo.style("iebPointer","display",""),dojo.style("iebPointer","top",this._startTop+this._POINTER_TOP_OFFSET+a+"px"),b<this._X_MOVE_RANGE&&b>-this._X_MOVE_RANGE?dojo.style("iebPointer","display",""):dojo.style("iebPointer","display","none")):dojo.style("iebPointer","display","none")},stopEvent:function(a){a.stopPropagation();
this.updateSimStyle()},stopEvent_Intercept_Enter:function(a){this.stopEvent(a);13!=a.keyCode||this.multiLine||a.preventDefault()},_node:function(){var a,b=this.path,d=this.selector;if(b||d)a=this._widget.domNode,b&&(a=dojo.getObject(b,!1,this._widget)),d&&(a=dojo.query(d,a)[0]);return a},updateWidget:function(a){if(!this._widget._destroyed){this.parse&&(a=this.parse(a));var b=this._node(this._widget),d=this._widget.getContext(),e=this.property,c="maq_innerText"===e?"innerHTML":e;if(this.update){if(a=
this.update(b||this._widget,a,e))this._widget=a;d.select(this._widget,null,!1)}else if(e){if(b)dojo.attr(b,c,a);else{b={};a&&"string"==typeof a&&(a=a.replace(/\n/g,""));var k=null;"textContent"==e?k=a:b[e]=a;"innerHTML"===c?(b.richText=b[e],delete b[e],a=new f(this._widget,b,null,d)):a=new davinci.ve.commands.ModifyCommand(this._widget,b,k,d);this._widget._edit_context.getCommandStack().execute(a);this._widget=a.newWidget;this._widget._edit_context._focuses[0]._selectedWidget=this._widget}d.select(this._widget,
null,!1)}}},hide:function(a){if(this._inline){for(var b;connection=this._connection.pop();)connection&&dojo.disconnect(connection);var d=this._findSmartInputContainer(this._widget._edit_context.frameNode);if(d&&(this._loadingDiv&&d.removeChild(this._loadingDiv),"none"!=this._inline.style.display&&this._inline.eb)){this._value=b=this._inline.eb.get("value");this._format=this.getFormat();this._inline.style.display="none";this._inline.eb&&(this._inline.eb.destroyRecursive(),delete this._inline.eb);this._inline.destroyRecursive();
delete this._inline;var f=d.ownerDocument.getElementById("iebPointer");d.removeChild(f);null==b||a||(this.disableEncode||"text"!==this._format||(b=e.encode(b)),this.updateWidget(b));this._widget.getContext().getDocument().defaultView.focus()}}},getFormat:function(){var a=dijit.byId("davinci.ve.input.SmartInput_radio_html"),b="text";a&&a.checked&&(b="html");return b},containsHtmlMarkUp:function(a){return 0<dojo.create("div",{innerHTML:a}).children.length},toggleHelp:function(){var a=dojo.byId("davinci.ve.input.SmartInput_img_help");
dojo.hasClass(a,"inlineEditHelpSelected")?this.help(!1):this.help(!0);dojo.toggleClass(a,"inlineEditHelpSelected")},setFormat:function(a){var b=dijit.byId("davinci.ve.input.SmartInput_radio_html"),d=dijit.byId("davinci.ve.input.SmartInput_radio_text");a=dojo.create("div",{innerHTML:a}).children.length?"html":"text";"html"===a?(b.set("checked",!0),d.set("checked",!1)):(b.set("checked",!1),d.set("checked",!0));this._format=a},help:function(a){var b=dojo.byId("davinci.ve.input.SmartInput_div_help");
dojo.byId("davinci.ve.input.SmartInput_radio_div");a?dojo.style(b,"display",""):dojo.style(b,"display","none")},updateFormats:function(){var a=this._inline.eb.get("value"),d=!0;this.containsHtmlMarkUp(a)&&(d=!1);this._widget.getContext().getDojo();var f=dojo.byId("davinci.ve.input.SmartInput_radio_text_width_div"),a=e.encode(a);f.innerHTML='\x3cdiv class\x3d"dojoxEllipsis"\x3e'+dojo.replace("Plain text ({0})",[a])+"\x3c/div\x3e";a=dojo.byId("davinci.ve.input.SmartInput_radio_html_width_div");a.innerHTML=
'\x3cdiv id\x3d"davinci.ve.input.SmartInput_radio_html_div" class\x3d"dojoxEllipsis"\x3e'+b.htmlMarkup+"\x3c/div\x3e";var g=dijit.byId("davinci.ve.input.SmartInput_radio_html"),c=dijit.byId("davinci.ve.input.SmartInput_radio_text"),k=dojo.byId("davinci.ve.input.SmartInput_table");g.setDisabled(d);c.setDisabled(d);d?(dojo.addClass(f,"inlineEditDisabled"),dojo.addClass(a,"inlineEditDisabled"),g.set("checked",!1),c.set("checked",!0)):(dojo.removeClass(f,"inlineEditDisabled"),dojo.removeClass(a,"inlineEditDisabled"));
!d&&this.isHtmlSupported()?(dojo.style(c.domNode,"display",""),dojo.style(g.domNode,"display",""),dojo.style(a,"display",""),dojo.style(f,"display",""),dojo.style(k,"display","")):(dojo.style(c.domNode,"display","none"),dojo.style(g.domNode,"display","none"),dojo.style(a,"display","none"),dojo.style(f,"display","none"),dojo.style(k,"display","none"))},resize:function(a){a=dojo.byId("iedResizeDiv");var b=dijit.byId("davinciIleb"),d=a.clientWidth-5,e=a.clientHeight-6,c=a.clientWidth-10,d=a.clientWidth-
8,e=a.clientHeight-20,c=a.clientWidth-9,f=dojo.byId("smartInputSim");dojo.style(f,"width",d+10+"px");this.updateSimStyle();b&&(b._setStyleAttr({width:d+"px",height:e+"px",maxHeight:e+"px"}),b._setStyleAttr({width:a.clientWidth+"px"}));b=dojo.byId("davinci.ve.input.SmartInput_radio_div");dojo.style(b,"width",c+2+"px");b=dojo.byId("davinci.ve.input.SmartInput_radio_text_width_div");dojo.style(b,"width",a.clientWidth-50+"px");b=dojo.byId("davinci.ve.input.SmartInput_radio_html_width_div");dojo.style(b,
"width",a.clientWidth-50+"px")},onBlur:function(a){this.updateSimStyle(a)},updateSimStyle:function(a){var b=dijit.byId("davinciIleb");if(a=dojo.byId("smartInputSim"))b=dojo.style(b.domNode),dojo.style(a,"borderColor",b.borderTopColor),dojo.style(a,"backgroundColor",b.backgroundColor)},_getTemplate:function(){var a='\x3cdiv id\x3d"iedResizeDiv" class\x3d"iedResizeDiv" \x3e\x3ctextarea  dojoType\x3d"dijit.form.SimpleTextarea" name\x3d"davinciIleb" trim\x3d"true" id\x3d"davinciIleb" class\x3d"smartInputTextArea" \x3e\x3c/textarea\x3e\x3cdiv id\x3d"smartInputSim" class\x3d"smartInputSim" \x3e\x3c/div\x3e\x3c/div\x3e';
"true"===this.multiLine&&(a='\x3cdiv id\x3d"iedResizeDiv" class\x3d"iedResizeDiv" \x3e\x3ctextarea  dojoType\x3d"dijit.form.SimpleTextarea" name\x3d"davinciIleb" trim\x3d"true" id\x3d"davinciIleb" class\x3d"smartInputTextAreaMulti" \x3e\x3c/textarea\x3e\x3cdiv id\x3d"smartInputSim" class\x3d"smartInputSim" \x3e\x3c/div\x3e\x3c/div\x3e');return""+a+'\x3cdiv  id\x3d"davinci.ve.input.SmartInput_div"  class\x3d"davinciVeInputSmartInputDiv" \x3e\x3cdiv id\x3d"davinci.ve.input.SmartInput_radio_div" class\x3d"smartInputRadioDiv" \x3e\x3ctable id\x3d"davinci.ve.input.SmartInput_table"\x3e \x3ctbody\x3e\x3ctr\x3e \x3ctd class\x3d"smartInputTd1" \x3e \x3cinput id\x3d"davinci.ve.input.SmartInput_radio_text" showlabel\x3d"true" type\x3d"radio" dojoType\x3d"dijit.form.RadioButton" disabled\x3d"false" readOnly\x3d"false" intermediateChanges\x3d"false" checked\x3d"true"\x3e \x3c/input\x3e \x3c/td\x3e \x3ctd class\x3d"smartInputTd2" \x3e\x3cdiv id\x3d"davinci.ve.input.SmartInput_radio_text_width_div" class\x3d"smartInputRadioTextDiv"\x3e\x3c/div\x3e\x3c/td\x3e \x3c/tr\x3e\x3ctr\x3e \x3ctd class\x3d"smartInputTd1"\x3e \x3cinput id\x3d"davinci.ve.input.SmartInput_radio_html" showlabel\x3d"true" type\x3d"radio" dojoType\x3d"dijit.form.RadioButton"\x3e \x3c/input\x3e  \x3c/td\x3e \x3ctd class\x3d"smartInputTd2"\x3e\x3cdiv id\x3d"davinci.ve.input.SmartInput_radio_html_width_div" class\x3d"smartInputRadioTextDiv"\x3e\x3c/div\x3e\x3c/td\x3e \x3c/tr\x3e \x3c/tbody\x3e\x3c/table\x3e \x3cdiv class\x3d"smartInputHelpDiv" \x3e \x3cspan id\x3d"davinci.ve.input.SmartInput_img_help"  title\x3d"Help" class\x3d"inlineEditHelp" \x3e \x3c/span\x3e\x3cspan class\x3d"smartInputSpacerSpan" \x3e\x3cbutton id\x3d"davinci.ve.input.SmartInput_ok"  dojoType\x3d"dijit.form.Button" type\x3d"submit" class\x3d"inlineEditHelpOk" \x3e'+
d.buttonOk+'\x3c/button\x3e \x3cbutton id\x3ddavinci.ve.input.SmartInput_cancel dojoType\x3d"dijit.form.Button" class\x3d"inlineEditHelpCancel"\x3e '+d.buttonCancel+'\x3c/button\x3e  \x3c/span\x3e   \x3c/div\x3e \x3cdiv id\x3d"davinci.ve.input.SmartInput_div_help" style\x3d"display:none;" class\x3d"smartInputHelpTextDiv" \x3e \x3cdiv dojoType\x3d"dijit.layout.ContentPane" class\x3d"smartInputHelpTextDivContentPane "style\x3d"padding:0;" \x3e'+this.getHelpText()+'\x3c/div\x3e \x3cdiv style\x3d"text-align: left; padding:0; height:2px;" \x3e\x3c/div\x3e \x3c/div\x3e \x3c/div\x3e\x3c/div\x3e '},
_connectResizeHandle:function(){},_connectSimDiv:function(){this._connection.push(dojo.connect(this._inline.eb,"onFocus",this,"updateSimStyle"));this._connection.push(dojo.connect(this._inline.eb,"onMouseOver",this,"updateSimStyle"));this._connection.push(dojo.connect(this._inline.eb,"onMouseOut",this,"updateSimStyle"));this._connection.push(dojo.connect(dojo.byId(" davinci.ve.input.SmartInput_div"),"onclick",this,"updateSimStyle"))}})})},"davinci/ve/commands/ModifyRichTextCommand":function(){define(["dojo/_base/declare"],
function(p){return p("davinci.ve.commands.ModifyRichTextCommand",null,{name:"modify",constructor:function(k,f,e,b){this._oldId=k?k.id:void 0;this._properties=f=f||{};f.richText?(this._richText=!0,this._children=this._newText=f.richText,delete f.richText):this._children=f._children;this._context=b||k.getContext()},setContext:function(k){this._context=k},add:function(k){k&&k._oldId==this._oldId&&(k._properties&&dojo.mixin(this._properties,k._properties),k._children&&(this._children=k._children))},execute:function(){if(this._oldId&&
this._properties){var k=require("davinci/ve/widget"),f=k.byId(this._oldId);if(f){this._parentWidget=f.getParent();this._oldText||(this._oldText=f._srcElement.getElementText(this._context))&&"string"==typeof this._oldText&&(this._oldText=this._oldText.replace(/\n/g,""));this._oldData||(this._oldData=f.getData(),this._oldData.context=this._context,this._newData={type:this._oldData.type,properties:dojo.mixin({},this._oldData.properties,this._properties),children:this._newText,maqStates:this._oldData.maqStates,
maqDeltas:this._oldData.maqDeltas,context:this._context},this._oldData={type:this._oldData.type,properties:dojo.mixin({},this._oldData.properties,this._properties),children:this._oldText,maqStates:this._oldData.maqStates,maqDeltas:this._oldData.maqDeltas,context:this._context});var e=this._context;e&&e.detach(f);this._properties.id&&delete this._newData.properties.isTempID;this._newId_isTempID||(this._newId_isTempID=this._newData.properties.isTempID);this._oldId_isTempID||(this._oldId_isTempID=this._oldData.properties.isTempID);
var b=null,d=this._parentWidget.indexOf(f);this._parentWidget.removeChild(f);f.destroyWidget();this._newId&&(this._newData.properties.id=this._newId);this._newId_isTempID&&(this._newData.properties.isTempID=this._newId_isTempID);if(b=k.createWidget(this._newData))this._parentWidget.addChild(b,d),this._newId=b.id,this._context&&this._refresh(b),e&&(e.widgetAddedOrDeleted(),this._oldId!=this._newId&&e.widgetChanged(e.WIDGET_ID_CHANGED,b,this._oldId),e.widgetChanged(e.WIDGET_MODIFIED,b)),this.newWidget=
b,dojo.publish("/davinci/ui/widget/replaced",[b,f]),require("davinci/ve/States").resetState(b.domNode)}}},undo:function(){if(this._newId&&this._oldData){var k=require("davinci/ve/widget"),f=k.byId(this._newId);if(f){var e=dojo.indexOf(this._parentWidget.getChildren(),f);if(!(0>e)){var b=this._parentWidget.getContext();b&&b.detach(f);this._parentWidget.removeChild(f);f.destroyWidget();this._oldData.children=this._oldText;this._oldData.properties.id=this._oldId;k=k.createWidget(this._oldData);this._parentWidget.addChild(k,
e);b&&this._refresh(k);b.widgetAddedOrDeleted();b.widgetChanged(b.WIDGET_MODIFIED,k);dojo.publish("/davinci/ui/widget/replaced",[k,f]);require("davinci/ve/States").resetState(k.domNode)}}}},_refresh:function(k){var f=k.getContainerNode();f&&this._context.getGlobal().require("dojo/parser").parse(f);this._context.attach(k);k.startup();k.renderWidget();f&&this._context._attachChildren(f)}})})},"url:davinci/workbench/templates/Preferences.html":"\x3cdiv style\x3d'width:100%; height: 100%'\x3e\n\t\x3cdiv class\x3d\"dijitDialogPaneContentArea\"\x3e\n\t\t\x3cdiv dojoType\x3d'dijit.layout.BorderContainer' dojoAttachPoint\x3d\"borderContainer\" style\x3d'width:100%; height: 100%' gutters\x3d'false' liveSplitters\x3d'true' id\x3d'preferencesContainer'\x3e\n\t\t\t\x3cdiv dojoType\x3d'dijit.layout.ContentPane' id\x3d'pref.TreePane' splitter\x3d'true' region\x3d'leading' style\x3d'width: 200px;' minSize\x3d'100' maxSize\x3d'300'\x3e\x3c/div\x3e\n\t\t\t\x3cdiv dojoType\x3d'dijit.layout.ContentPane' region\x3d'center' id\x3d'pref.RightPane'\x3e\x3c/div\x3e\n\t\t\x3c/div\x3e\n\t\x3c/div\x3e\n\t\x3cdiv class\x3d\"dijitDialogPaneActionBar\"\x3e\n\t\t\x3c!-- FIXME: we don't have logic to yet implement restoreDefaults() yet. See #627\n\t\t\x3cbutton dojoType\x3ddijit.form.Button type\x3d\"button\" onclick\x3d\"davinci.workbench.Preferences.restoreDefaults();\"\x3e\x3c/button\x3e--\x3e\n\t\t\x3cbutton dojoType\x3d\"dijit.form.Button\" type\x3d\"button\" onclick\x3d\"davinci.workbench.Preferences.save();\" class\x3d\"maqPrimaryButton\" type\x3d\"submit\"\x3e${commonStrings.buttonSave}\x3c/button\x3e\n\t\t\x3cbutton dojoType\x3d\"dijit.form.Button\" type\x3d\"button\" onclick\x3d\"davinci.workbench.Preferences.finish();\" class\x3d\"maqSecondaryButton\"\x3e${commonStrings.buttonCancel}\x3c/button\x3e\n\t\x3c/div\x3e\n\x3c/div\x3e\n\n\n",
"url:davinci/ve/widgets/templates/BackgroundDialog.html":"\x3cdiv class\x3d\"backgroundDialog\" style\x3d\"position:relative\" dojoAttachPoint\x3d\"_fileDialog\"\x3e\n\t\x3cstyle type\x3d\"text/css\"\x3e\n\t\t.backgroundDialog {\n\t\t\twidth:31em;\n\t\t}\n\t\t.bgdTopDiv {\n\t\t\tmargin-top: 4px;\n\t\t\tpadding-left: .75em;\n\t\t}\n\t\t.bgdTopTable {\n\t\t\twidth:100%;\n\t\t\tborder-collapse:collapse;\n\t\t}\n\t\t.bgdTopLabel, .bgdTopField, .bgdTopPreview {\n\t\t\twidth:1px;\n\t\t\twhite-space:nowrap;\n\t\t}\n\t\t.bgdTopLabel {\n\t\t\ttext-align:right;\n\t\t\tpadding-right:6px;\n\t\t}\n\t\t.bgdTopTable .dijitSelect .dijitButtonContents {\n\t\t\twidth:8em;\n\t\t}\n\t\t.bgdTopTable .dijitTextBox {\n\t\t\twidth: 9.8em;\n\t\t}\n\t\t.bgdPreview {\n\t\t\tdisplay:inline-block;\n\t\t\twidth: 6em;\n\t\t\theight: 2.8em;\n\t\t\tmargin-left:12px;\n\t\t\tborder:1px solid gray;\n\t\t\tvertical-align: middle;\n\t\t}\n\t\t.bgdOptionsDiv {\n\t\t\tmargin:0.3em 0em 1em 1em;\n\t\t}\n\t\t.bgdOptionsDiv \x3e table {\n\t\t\twidth:27em;\n\t\t}\n\t\t.bgdSection {\n\t\t\tbackground-color:#d8d8d8;\n\t\t}\n\t\tdiv.bgdSection, .bgdSection td, .bgdSection.bgdUrlSectionLabel {\n\t\t\tpadding:2px 5px;\n\t\t}\n\t\t.bgdBeforeStopsLabel {\n\t\t\theight:6px;\n\t\t}\n\t\t.bgdStopsLabel {\n\t\t\tmargin-top:1em;\n\t\t}\n\t\t.bgdAfterStopsLabel {\n\t\t\theight:0px;\n\t\t}\n\t\t.bgdBeforeOptionsLabel {\n\t\t\theight:16px;\n\t\t}\n\t\t.bgdOptionsLabel {\n\t\t\tmargin-top:1em;\n\t\t}\n\t\t.bgdAfterOptionsLabel {\n\t\t\theight:4px;\n\t\t}\n\t\t.bgdCol1 {\n\t\t\twidth:10px;\n\t\t}\n\t\t.bgdPlusMinusButtons {\n\t\t\twhite-space:nowrap;\n\t\t\twidth:51px;\n\t\t}\n\t\t.bgdOptionsDiv th {\n\t\t\ttext-align:center;\n\t\t\tfont-style:italic;\n\t\t}\n\t\t.bgdOptsLabel {\n\t\t\ttext-align:right;\n\t\t\tpadding-right: 6px;\n\t\t\twhite-space:nowrap;\n\t\t}\n\t\t.bgdColor.dijitTextBox {\n\t\t\twidth:9em;\n\t\t}\n\t\t.bgdOptionsDiv .bgdPosition.dijitTextBox {\n\t\t\twidth:5em;\n\t\t}\n\t\t.bgdOptionsDiv .dijitTextBox {\n\t\t\twidth:10.6em;\n\t\t}\n\t\t.bgdStopColorTD .dijitTextBox {\n\t\t\twidth:14em;\n\t\t}\n\t\t.bgdOptionsDiv .dijitSelect {\n\t\t\tmargin:0;\n\t\t}\n\t\t.bgdOptionsDiv .dijitSelect .dijitButtonContents {\n\t\t\twidth:9em;\n\t\t}\n\t\t.bgdUrlContainerOuter {\n\t\t\tmargin-top:1em;\n\t\t\tmargin-left:1em;\n\t\t}\n\t\t.bgdUrlContainerInner {\n\t\t\tmargin:0 1em;\n\t\t}\n\t\t.bgdUrlSectionLabel {\n\t\t\tmargin:1em 0 .25em;\n\t\t}\n\t\t.bgdFileTreeContainer {\n\t\t\tmargin: 0 0 0 3px;\n\t\t\tborder: 1px solid #26A;\n\t\t}\n\t\t.bgdFileTreeContainer .dijitTree {\n\t\t\theight:125px;\n\t\t}\t\t\n\t\t.backgroundDialog .fileNameRow  {\n\t\t\tmargin:8px 0 .4em;\n\t\t}\n\t\t.backgroundDialog .fileNameRow label {\n\t\t\tvertical-align:middle;\n\t\t\tmargin-right:4px;\n\t\t}\n\t\t.backgroundDialog .fileNameRow .dijitTextBox {\n\t\t\twidth:16em;\n\t\t}\n\t\t.bgdOptionsDiv .bgdOtherRow .dijitTextBox {\n\t\t\twidth:15em;\n\t\t}\n\t\t\n\t\x3c/style\x3e\n\n\t\x3cdiv class\x3d\"dijitDialogPaneContentArea\"\x3e\n\t\t\x3cdiv class\x3d'bgdTopDiv'\x3e\n\t\t\t\x3ctable class\x3d'bgdTopTable'\x3e\n\t\t\t\t\x3ctr\x3e\n\t\t\t\t\t\x3ctd class\x3d'bgdTopLabel'\x3e\x3clabel class\x3d'bgdTypeDivTypeLabel'\x3e${veNLS.bgdBackgroundColor}\x3c/label\x3e\x3c/td\x3e\n\t\t\t\t\t\x3ctd class\x3d'bgdTopField'\x3e\n\t\t\t\t\t\t\x3cselect dojoType\x3d\"dijit.form.ComboBox\" dojoAttachPoint\x3d'bgdColorCB'\x3e\n\t\t\t\t\t\t\t\x3c!--  values added dynamically --\x3e\n\t\t\t\t\t\t\x3c/select\x3e\n\t\t\t\t\t\x3c/td\x3e\n\t\t\t\t\t\x3ctd rowspan\x3d'2' class\x3d'bgdTopPreview' style\x3d'border-collapse:collapse'\x3e\x3cspan class\x3d'bgdPreview'\x3e\x3c/span\x3e\x3c/td\x3e\n\t\t\t\t\t\x3ctd class\x3d'bgdTopExpando'\x3e\x26nbsp;\x3c/td\x3e\n\t\t\t\t\x3c/tr\x3e\n\t\t\t\t\x3ctr\x3e\n\t\t\t\t\t\x3ctd class\x3d'bgdTopLabel'\x3e\x3clabel class\x3d'bgdTypeDivTypeLabel'\x3e${veNLS.bgdBackgroundImageType}\x3c/label\x3e\x3c/td\x3e\n\t\t\t\t\t\x3ctd class\x3d'bgdTopField'\x3e\n\t\t\t\t\t\t\x3cselect dojoType\x3d'dijit.form.Select' value\x3d'linear' dojoAttachPoint\x3d'bgdTypeSelect'\x3e\n\t\t\t\t\t\t\t\x3c!--  values added dynamically --\x3e\n\t\x3c!-- FIXME: Add plain text type-in box if unrecognized syntax --\x3e\n\t\t\t\t\t\t\x3c/select\x3e\n\t\t\t\t\t\x3c/td\x3e\n\t\t\t\t\t\x3ctd class\x3d'bgdTopExpando'\x3e\x26nbsp;\x3c/td\x3e\n\t\t\t\t\x3c/tr\x3e\n\t\t\t\x3c/table\x3e\n\t\t\x3c/div\x3e\n\t\t\n\t\t\x3cdiv class\x3d\"bgdUrlContainerOuter bgdImageOptRow\"\x3e\n\t\t\t\x3cdiv class\x3d\"bgdSection bgdOptionsLabel\"\x3e${veNLS.bgdImageUrl}\x3c/div\x3e\n\t\t\t\x3cdiv class\x3d\"bgdUrlContainerInner\"\x3e\n\t\t\t\t\x3cdiv class\x3d'fileNameRow'\x3e\n\t\t\t\t\t\x3ctd class\x3d\"fileDialogLabelCell\"\x3e\n\t\t\t\t\t\x3clabel\x3e${veNLS.bgdUrl}\x3c/label\x3e\n\t\t\t\t\t\x3c/td\x3e\n\t\t\t\t\t\x3ctd\x3e\n\t\t\t\t\t\x3cdiv dojoType\x3d'davinci.ui.widgets.FileFieldDialog' dojoAttachPoint\x3d\"_filePicker\"\x3e\x3c/div\x3e\n\t\t\t\t\t\x3c/td\x3e\n\t\t\t\t\x3c/div\x3e\n\t\t\t\x3c/div\x3e\n\t\t\x3c/div\x3e\n\t\t\x3cdiv class\x3d\"bgdOptionsDiv\"\x3e\n\t\t\t\x3ctable\x3e\n\t\t\t\t\x3ctr class\x3d\"bgdGradOptRow bgdBeforeStopsLabel\"\x3e\x3c/tr\x3e\n\t\t\t\t\x3ctr class\x3d\"bgdGradOptRow bgdSection bgdStopsLabel\"\x3e\n\t\t\t\t\t\x3ctd colspan\x3d\"5\"\x3e${veNLS.bgdColorStops}\x3c/td\x3e\n\t\t\t\t\x3c/tr\x3e\n\t\t\t\t\x3ctr class\x3d\"bgdGradOptRow bgdAfterStopsLabel\"\x3e\x3c/tr\x3e\n\t\t\t\t\x3ctr class\x3d'bgdGradOptRow bgdStopRow'\x3e\n\t\t\t\t\t\x3cth\x3e\x3c/th\x3e\x3cth\x3e\x3c/th\x3e\x3cth\x3e${veNLS.bgdColor}\x3c/th\x3e\x3cth\x3e${veNLS.bgdPosition}\x3c/th\x3e\x3cth\x3e\x3c/th\x3e\n\t\t\t\t\x3c/tr\x3e\n\t\t\t\t\x3c!--  gradient stop rows added dynamically --\x3e\n\t\t\t\t\x3ctr class\x3d\"bgdBeforeOptionsLabel bgdOptionsLabelRow\"\x3e\x3c/tr\x3e\n\t\t\t\t\x3ctr class\x3d\"bgdSection bgdOptionsLabel bgdOptionsLabelRow\"\x3e\n\t\t\t\t\t\x3ctd colspan\x3d\"5\"\x3e${veNLS.bgdOptions}\x3c/td\x3e\n\t\t\t\t\x3c/tr\x3e\n\t\t\t\t\x3ctr class\x3d\"bgdAfterOptionsLabel bgdOptionsLabelRow\"\x3e\x3c/tr\x3e\n\t\t\t\t\x3ctr class\x3d\"bgdGradOptRow bgdLinearOptRow\"\x3e\t\n\t\t\t\t\t\x3ctd class\x3d'bgdCol1'\x3e\x3c/td\x3e\n\t\t\t\t\t\x3ctd class\x3d'bgdOptsLabel'\x3e\x3clabel\x3e${veNLS.bgdAngle}\x3c/label\x3e\x3c/td\x3e\n\t\t\t\t\t\x3ctd colspan\x3d'3'\x3e\n\t\t\t\t\t\t\x3cselect dojoType\x3d\"dijit.form.ComboBox\" dojoAttachPoint\x3d'bgdLinearAngleCB'\x3e\n\t\t\t\t\t\t\t\x3c!--  values added dynamically --\x3e\n\t\t\t\t\t\t\x3c/select\x3e\n\t\t\t\t\t\x3c/td\x3e\n\t\t\t\t\x3c/tr\x3e\n\t\t\t\t\x3ctr class\x3d\"bgdGradOptRow bgdRadialOptRow\"\x3e\t\n\t\t\t\t\t\x3ctd class\x3d'bgdCol1'\x3e\x3c/td\x3e\n\t\t\t\t\t\x3ctd class\x3d'bgdOptsLabel'\x3e${veNLS.bgdPosition2}\x3c/td\x3e\n\t\t\t\t\t\x3ctd colspan\x3d'3'\x3e\n\t\t\t\t\t\t\x3cselect dojoType\x3d\"dijit.form.ComboBox\" dojoAttachPoint\x3d'bgdRadialPosCB'\x3e\n\t\t\t\t\t\t\t\x3c!--  values added dynamically --\x3e\n\t\t\t\t\t\t\x3c/select\x3e\n\t\t\t\t\t\x3c/td\x3e\n\t\t\t\t\x3c/tr\x3e\n\t\t\t\t\x3ctr dojoAttachPoint\x3d\"bgdShapeRow\" class\x3d\"bgdGradOptRow bgdRadialOptRow\"\x3e\t\n\t\t\t\t\t\x3ctd class\x3d'bgdCol1'\x3e\x3c/td\x3e\n\t\t\t\t\t\x3ctd class\x3d'bgdOptsLabel'\x3e\x3clabel\x3e${veNLS.bgdShape}\x3c/label\x3e\x3c/td\x3e\n\t\t\t\t\t\x3ctd colspan\x3d'3'\x3e\n\t\t\t\t\t\t\x3cselect dojoType\x3d\"dijit.form.ComboBox\" dojoAttachPoint\x3d'bgdRadialShapeCB'\x3e\n\t\t\t\t\t\t\t\x3c!--  values added dynamically --\x3e\n\t\t\t\t\t\t\x3c/select\x3e\n\t\t\t\t\t\x3c/td\x3e\n\t\t\t\t\x3c/tr\x3e\n\t\t\t\t\x3ctr dojoAttachPoint\x3d\"bgdExtentRow\" class\x3d\"bgdGradOptRow bgdRadialOptRow\"\x3e\t\n\t\t\t\t\t\x3ctd class\x3d'bgdCol1'\x3e\x3c/td\x3e\n\t\t\t\t\t\x3ctd class\x3d'bgdOptsLabel'\x3e\x3clabel\x3e${veNLS.bgdExtent}\x3c/label\x3e\x3c/td\x3e\n\t\t\t\t\t\x3ctd colspan\x3d'3'\x3e\n\t\t\t\t\t\t\x3cselect dojoType\x3d\"dijit.form.ComboBox\" dojoAttachPoint\x3d'bgdRadialExtentCB'\x3e\n\t\t\t\t\t\t\t\x3c!--  values added dynamically --\x3e\n\t\t\t\t\t\t\x3c/select\x3e\n\t\t\t\t\t\x3c/td\x3e\n\t\t\t\t\x3c/tr\x3e\n\t\t\t\t\x3ctr dojoAttachPoint\x3d\"bgdRepeatRow\" class\x3d\"bgdImageOptRow\"\x3e\t\n\t\t\t\t\t\x3ctd class\x3d'bgdCol1'\x3e\x3c/td\x3e\n\t\t\t\t\t\x3ctd class\x3d'bgdOptsLabel'\x3e\x3clabel\x3e${veNLS.bgdBackgroundRepeat}\x3c/label\x3e\x3c/td\x3e\n\t\t\t\t\t\x3ctd colspan\x3d'3'\x3e\n\t\t\t\t\t\t\x3cselect dojoType\x3d\"dijit.form.ComboBox\" dojoAttachPoint\x3d'bgdRepeatCB'\x3e\n\t\t\t\t\t\t\t\x3c!--  values added dynamically --\x3e\n\t\t\t\t\t\t\x3c/select\x3e\n\t\t\t\t\t\x3c/td\x3e\n\t\t\t\t\x3c/tr\x3e\n\t\t\t\t\x3ctr dojoAttachPoint\x3d\"bgdPositionRow\" class\x3d\"bgdImageOptRow\"\x3e\t\n\t\t\t\t\t\x3ctd class\x3d'bgdCol1'\x3e\x3c/td\x3e\n\t\t\t\t\t\x3ctd class\x3d'bgdOptsLabel'\x3e${veNLS.bgdBackgroundPosition}\x3c/td\x3e\n\t\t\t\t\t\x3ctd colspan\x3d'3'\x3e\n\t\x3c!-- FIXME: regExp, invalidMessage --\x3e\n\t\t\t\t\t\t\x3cselect dojoType\x3d\"dijit.form.ComboBox\" dojoAttachPoint\x3d'bgdPositionCB'\x3e\n\t\t\t\t\t\t\t\x3c!--  values added dynamically --\x3e\n\t\t\t\t\t\t\x3c/select\x3e\n\t\t\t\t\t\x3c/td\x3e\n\t\t\t\t\x3c/tr\x3e\n\t\t\t\t\x3ctr dojoAttachPoint\x3d\"bgdSizeRow\" class\x3d\"bgdImageOptRow\"\x3e\t\n\t\t\t\t\t\x3ctd class\x3d'bgdCol1'\x3e\x3c/td\x3e\n\t\t\t\t\t\x3ctd class\x3d'bgdOptsLabel'\x3e${veNLS.bgdBackgroundSize}\x3c/td\x3e\n\t\t\t\t\t\x3ctd colspan\x3d'3'\x3e\n\t\x3c!-- FIXME: regExp, invalidMessage --\x3e\n\t\t\t\t\t\t\x3cselect dojoType\x3d\"dijit.form.ComboBox\" dojoAttachPoint\x3d'bgdSizeCB'\x3e\n\t\t\t\t\t\t\t\x3c!--  values added dynamically --\x3e\n\t\t\t\t\t\t\x3c/select\x3e\n\t\t\t\t\t\x3c/td\x3e\n\t\t\t\t\x3c/tr\x3e\n\t\t\t\t\x3ctr dojoAttachPoint\x3d\"bgdOriginRow\" class\x3d\"bgdImageOptRow\"\x3e\t\n\t\t\t\t\t\x3ctd class\x3d'bgdCol1'\x3e\x3c/td\x3e\n\t\t\t\t\t\x3ctd class\x3d'bgdOptsLabel'\x3e\x3clabel\x3e${veNLS.bgdBackgroundOrigin}\x3c/label\x3e\x3c/td\x3e\n\t\t\t\t\t\x3ctd colspan\x3d'3'\x3e\n\t\t\t\t\t\t\x3cselect dojoType\x3d\"dijit.form.ComboBox\" dojoAttachPoint\x3d'bgdOriginCB'\x3e\n\t\t\t\t\t\t\t\x3c!--  values added dynamically --\x3e\n\t\t\t\t\t\t\x3c/select\x3e\n\t\t\t\t\t\x3c/td\x3e\n\t\t\t\t\x3c/tr\x3e\n\t\t\t\t\x3ctr dojoAttachPoint\x3d\"bgdClipRow\" class\x3d\"bgdImageOptRow\"\x3e\t\n\t\t\t\t\t\x3ctd class\x3d'bgdCol1'\x3e\x3c/td\x3e\n\t\t\t\t\t\x3ctd class\x3d'bgdOptsLabel'\x3e\x3clabel\x3e${veNLS.bgdBackgroundClip}\x3c/label\x3e\x3c/td\x3e\n\t\t\t\t\t\x3ctd colspan\x3d'3'\x3e\n\t\t\t\t\t\t\x3cselect dojoType\x3d\"dijit.form.ComboBox\" dojoAttachPoint\x3d'bgdClipCB'\x3e\n\t\t\t\t\t\t\t\x3c!--  values added dynamically --\x3e\n\t\t\t\t\t\t\x3c/select\x3e\n\t\t\t\t\t\x3c/td\x3e\n\t\t\t\t\x3c/tr\x3e\n\t\t\t\t\x3ctr dojoAttachPoint\x3d\"bgdOtherTypeInRow\" class\x3d\"bgdOtherRow\"\x3e\t\n\t\n\t\t\t\t\t\x3ctd class\x3d'bgdCol1'\x3e\x3c/td\x3e\n\t\t\t\t\t\x3ctd class\x3d'bgdOptsLabel'\x3e\x3clabel\x3e${veNLS.bgdBackgroundImageValue}\x3c/label\x3e\x3c/td\x3e\n\t\t\t\t\t\x3ctd colspan\x3d'3'\x3e\n\t\t\t\t\t\t\x3ctextarea dojoType\x3d\"dijit.form.Textarea\" dojoAttachPoint\x3d'bgdOtherTA'\x3e\x3c/textarea\x3e\n\t\t\t\t\t\x3c/td\x3e\n\t\n\t\t\t\t\x3c/tr\x3e\n\t\n\t\t\t\x3c/table\x3e\n\t\t\x3c/div\x3e\n\t\x3c/div\x3e\n\n\t\x3c!--div class\x3d\"dijitDialogPaneActionBar\"\x3e\n\t\t\x3cspan dojoType\x3d'dijit.form.Button' dojoAttachPoint\x3d\"_okButton\" dojoAttachEvent\x3d'onClick:okButton' label\x3d'${buttonOk}' class\x3d\"maqPrimaryButton\" type\x3d\"submit\"\x3e\x3c/span\x3e \n\t\t\x3cspan dojoType\x3d'dijit.form.Button' dojoAttachEvent\x3d'onClick:cancelButton' label\x3d'${buttonCancel}' class\x3d\"maqSecondaryButton\"/\x3e\x3c/span\x3e \n\t\x3c/div--\x3e\n\x3c/div\x3e\n",
"url:davinci/ui/widgets/templates/FileFieldDialog.html":"\x3cdiv\x3e\n\t\x3cdiv style\x3d'float:right;'\x3e\n\t\t\x3cbutton type\x3d'button' style\x3d'font-size:.75em;float:right;' dojoType\x3d\"dijit.form.Button\" dojoAttachPoint\x3d\"button\" dojoAttachEvent\x3d\"onClick:_showFileSelectionDialog\"\x3e...\x3c/button\x3e\n\t\x3c/div\x3e\n\t\x3cdiv style\x3d'margin-right:35px;'\x3e\n\t\t\x3cinput style\x3d'width:100%;' type\x3d'text' dojoType\x3d\"dijit.form.TextBox\" dojoAttachPoint\x3d\"textField\" dojoAttachEvent\x3d\"onChange:_onChange\"\x3e\x3c/input\x3e\n\t\x3c/div\x3e\n\x3c/div\x3e\n\n",
"url:davinci/ve/widgets/templates/WidgetToolBar.html":'\x3cdiv class\x3d"propertiesTitleBar ui-widget-content" style\x3d"display: none"\x3e\n    \x3cdiv class\x3d\'propertiesWidgetDescription\'\x3e\n        \x3cspan class\x3d\'propertiesWidgetDescriptionFor\'\x3e${veNLS.toolBarFor}\x3c/span\x3e\n        \x3cspan data-dojo-attach-point\x3d"descNode"\x3e${veNLS.noSelection}\x3c/span\x3e\n    \x3c/div\x3e\n    \x3cdiv class\x3d"propertiesTitleBarPropertiesContainer"\x3e\n        \x3ctable width\x3d"100%" cellspacing\x3d"0" cellpadding\x3d"0" border\x3d"0" align\x3d"center"\n               class\x3d"propertiesTitleBarProperties property_table_stretchable"\x3e\n            \x3ccolgroup\x3e\n                \x3ccol style\x3d"width:10px;"\x3e\n                \x3ccol class\x3d"gap02"\x3e\n                \x3ccol class\x3d"gap03"\x3e\n                \x3ccol style\x3d"width:10px;"\x3e\n                \x3ccol style\x3d"width:6px;"\x3e\n            \x3c/colgroup\x3e\n            \x3ctbody\x3e\n            \x3c!--tr class\x3d"cssPropertySection"\x3e\n                \x3ctd\x3e\x3c/td\x3e\n                \x3ctd class\x3d"propertyDisplayName"\x3e${veNLS.toolBarClass}\x26nbsp;\x3c/td\x3e\n                \x3ctd class\x3d"propertyInputField"\x3e\n                  \x3cinput data-dojo-type\x3d"dijit.form.ComboBox" data-dojo-attach-point\x3d"classComboBox" label\x3d"" data-dojo-attach-event\x3d"onChange:_onChangeClassAttribute,onFocus:_onFieldFocus,onBlur:_onFieldBlur" style\x3d"width: 100%" searchAttr\x3d"name"/\x3e\n                \x3c/td\x3e\n                \x3ctd nowrap\x3d"true" class\x3d"propertyExtra"\x3e\x3c/td\x3e\n                \x3ctd\x3e\x3c/td\x3e\n            \x3c/tr--\x3e\n            \x3ctr class\x3d"cssPropertySection"\x3e\n                \x3ctd\x3e\x3c/td\x3e\n                \x3ctd class\x3d"propertyDisplayName"\x3e${veNLS.toolBarId}\x26nbsp;\x3c/td\x3e\n                \x3ctd class\x3d"propertyInputField"\x3e\n                    \x3cinput class\x3d"form-control input-transparent" data-dojo-type\x3d"dijit.form.ValidationTextBox" data-dojo-attach-point\x3d"idTextBox" label\x3d"" data-dojo-attach-event\x3d"onChange:_onChangeIDAttribute,onKeyPress:_onKeyPress,onFocus:_onFieldFocus,onBlur:_onFieldBlur" style\x3d"width: 100%"/\x3e\n                \x3c/td\x3e\n                \x3ctd nowrap\x3d"true" class\x3d"propertyExtra"\x3e\x3c/td\x3e\n                \x3ctd\x3e\x3c/td\x3e\n            \x3c/tr\x3e\n\n            \x3ctr class\x3d"cssPropertySection"\x3e\n                \x3ctd\x3e\x3c/td\x3e\n                \x3ctd class\x3d"propertyDisplayName"\x3eClass\x3c/td\x3e\n                \x3ctd class\x3d"propertyInputField"\x3e\n                    \x3cinput data-dojo-attach-point\x3d"cssClasses" type\x3d"text" class\x3d"" value\x3d"" style\x3d"width: 100%"\x3e\n                \x3c/td\x3e\n                \x3ctd nowrap\x3d"true" class\x3d"propertyExtra"\x3e\x3c/td\x3e\n                \x3ctd\x3e\x3c/td\x3e\n            \x3c/tr\x3e\n            \x3c!--tr class\x3d"cssPropertySection"\x3e\n                \x3ctd\x3e\x3c/td\x3e\n                \x3ctd class\x3d"propertyDisplayName"\x3eBlock Group\x26nbsp;\x3c/td\x3e\n                \x3ctd class\x3d"propertyInputField"\x3e\n                    \x3cinput data-dojo-type\x3d"dijit.form.ComboBox" data-dojo-attach-point\x3d"blockGroupComboBox" label\x3d"" data-dojo-attach-event\x3d"onChange:_onChangeBlockGroupAttribute,onFocus:_onFieldFocus,onBlur:_onFieldBlur" style\x3d"width: 100%" searchAttr\x3d"name"/\x3e\n                \x3c/td\x3e\n                \x3ctd nowrap\x3d"true" class\x3d"propertyExtra"\x3e\x3c/td\x3e\n                \x3ctd\x3e\x3c/td\x3e\n            \x3c/tr--\x3e\n            \x3c/tbody\x3e\n        \x3c/table\x3e\n    \x3c/div\x3e\n\x3c/div\x3e\n',
"url:davinci/ve/actions/templates/AddState.html":'\x3cdiv\x3e\n\t\x3cdiv class\x3d"dijitDialogPaneContentArea"\x3e\n\t\t\x3cdiv class\x3d\'addStateNameDiv\'\x3e\n\t\t\t\x3clabel\x3e${veNls.stateLabel}:\x3c/label\x3e\x3cinput dojoAttachPoint\x3d"input" dojoType\x3d"dijit.form.TextBox" dojoAttachEvent\x3d"onKeyUp:_onKeyPress" type\x3d"text"\x3e\x3c/input\x3e\n\t\t\x3c/div\x3e\n\t\x3c/div\x3e\n\t\x3cdiv class\x3d"dijitDialogPaneActionBar"\x3e\n\t\t\x3cbutton dojoType\x3d\'dijit.form.Button\' dojoAttachPoint\x3d"okButton" dojoAttachEvent\x3d\'onClick:onOk\' label\x3d\'${veNls.createLabel}\' class\x3d"maqPrimaryButton" type\x3d"submit"\x3e\x3c/button\x3e\n\t\t\x3cbutton dojoType\x3d\'dijit.form.Button\' dojoAttachEvent\x3d\'onClick:onCancel\' label\x3d\'${commonNls.buttonCancel}\' class\x3d"maqSecondaryButton"\x3e\x3c/button\x3e\n\t\x3c/div\x3e\n\x3c/div\x3e\n',
"url:davinci/ve/actions/templates/ModifyState.html":'\x3cdiv\x3e\n\t\x3cdiv class\x3d"dijitDialogPaneContentArea"\x3e\n\t\t\x3cdiv class\x3d\'modify_state_container\'\x3e\n\t\t\t\x3cdiv data-dojo-type\x3d"dijit.form.DropDownButton" label\x3d\'${veNls.renameLabel}\' dojoAttachPoint\x3d"renameButton" class\x3d"modify_state_rename_button"\x3e\n\t\t\t\t\t\x3cdiv data-dojo-type\x3d"dijit.TooltipDialog" class\x3d\'modify_state_rename_container\' id\x3d\'state_rename_tooltip_dialog\'\x3e\n\t\t\t\t\t\t\x3cdiv\x3e\n\t\t\t\t\t\t\t\x3clabel for\x3d"state_rename_new_name"\x3e${veNls.newStateLabel}\x3c/label\x3e\n\t\t\t\t\t\t\t\x3cinput data-dojo-type\x3d"dijit.form.ValidationTextBox" id\x3d"state_rename_new_name" name\x3d"state_rename_new_name"\x3e\x3c/input\x3e\n\t\t\t\t\t\t\x3c/div\x3e\n\t\t\t\t\t\t\x3cdiv\x3e\n\t\t\t\t\t\t\t\x3cbutton id\x3d"state_rename_do_it" dojoType\x3d\'dijit.form.Button\' label\x3d\'${veNls.renameLabel}\'\x3e\x3c/button\x3e\n\t\t\t\t\t\t\t\x3cbutton id\x3d"state_rename_cancel" dojoType\x3d\'dijit.form.Button\' label\x3d\'${veNls.cancelLabel}\'\x3e\x3c/button\x3e\n\t\t\t\t\t\t\x3c/div\x3e\n\t\t\t\t\t\x3c/div\x3e\n\t\t\t\t\x3c/div\x3e\n\t\t\t${veNls.stateLabel}: \x3cspan id\x3d\'modify_state_old_name\'\x3eaaa\x3c/span\x3e\n\t\t\x3c/div\x3e\n\t\t\x3cdiv class\x3d\'initial_state_row\'\x3e\n\t\t\t\x3cinput data-dojo-type\x3d"dijit.form.CheckBox" dojoAttachPoint\x3d"initialState" id\x3d"modify_state_initial_state" name\x3d"modify_state_initial_state"\x3e\x3c/input\x3e\n\t\t\t\x3clabel for\x3d\'modify_state_initial_state\'\x3e${veNls.initialStateCheckBoxLabel}\x3c/label\x3e\n\t\t\x3c/div\x3e\n\t\x3c/div\x3e\n\t\t\t\t\n\t\x3cdiv class\x3d"dijitDialogPaneActionBar"\x3e\n\t\t\x3cbutton dojoType\x3d\'dijit.form.Button\' dojoAttachPoint\x3d"okButton" label\x3d\'${veNls.modifyLabel}\' class\x3d"maqPrimaryButton"\x3e\x3c/button\x3e\n\t\t\x3cbutton dojoType\x3d\'dijit.form.Button\' dojoAttachPoint\x3d"cancelButton" label\x3d\'${commonNls.buttonCancel}\' class\x3d"maqSecondaryButton"\x3e\x3c/button\x3e\n\t\x3c/div\x3e\n\x3c/div\x3e\n',
"url:davinci/ve/actions/templates/ManageStates.html":"\x3cdiv\x3e\n\t\x3cdiv class\x3d\"dijitDialogPaneContentArea\"\x3e\n\t\t\x3cdiv class\x3d\"addStateDialogOptions\"\x3e\n\t\t\t\x3cdiv class\x3d'manageStatesStatesListDiv'\x3e\n\t\t\t\t\x3c!-- Filled in by JavaScript --\x3e\n\t\t\t\x3c/div\x3e\n\t\t\t\x3cdiv class\x3d'manageStatesCheckAcceleratorsDiv'\x3e\n\t\t\t\t${veNls.manageStatesCheckLabel}\n\t\t\t\t\x3ca href\x3d'' class\x3d'manageStatesCheckCurrentStateOnly'\x3e${veNls.manageStatesCheckCurrentStateOnly}\x3c/a\x3e\n\t\t\t\t/\n\t\t\t\t\x3ca href\x3d'' class\x3d'manageStatesCheckAll'\x3e${veNls.manageStatesCheckAll}\x3c/a\x3e\n\t\t\t\t/\n\t\t\t\t\x3ca href\x3d'' class\x3d'manageStatesUncheckAll'\x3e${veNls.manageStatesUncheckAll}\x3c/a\x3e\n\t\t\t\t/\n\t\t\t\t\x3ca href\x3d'' class\x3d'manageStatesCheckBackgroundOnly'\x3e${veNls.manageStatesCheckBackgroundOnly}\x3c/a\x3e\n\t\t\t\x3c/div\x3e\n\t\t\t\n\t\t\x3c/div\x3e\t\n\t\x3c/div\x3e\n\t\x3cdiv class\x3d\"dijitDialogPaneActionBar\"\x3e\n\t\t\x3cbutton dojoType\x3d'dijit.form.Button' dojoAttachPoint\x3d\"okButton\" dojoAttachEvent\x3d'onClick:onOk' label\x3d'${veNls.createLabel}' class\x3d\"maqPrimaryButton\" type\x3d\"submit\"\x3e\x3c/button\x3e\n\t\t\x3cbutton dojoType\x3d'dijit.form.Button' dojoAttachEvent\x3d'onClick:onCancel' label\x3d'${commonNls.buttonCancel}' class\x3d\"maqSecondaryButton\"\x3e\x3c/button\x3e\n\t\x3c/div\x3e\n\x3c/div\x3e\n",
"url:davinci/ve/prefs/HtmlEditPreferences.html":"\x3cdiv\x3e\n\t\x3ctable style\x3d'margin: 4px;' cellspacing\x3d'4'\x3e\n\t\t\x3ctbody\x3e\n\t\t\t\x3c!--\n\t\t\t\x3ctr\x3e\n\t\t\t\t\x3ctd\x3e${_loc.flowLayout}:\x3c/td\x3e\n\t\t\t\t\x3ctd\x3e\n\t\t\t\t\t\x3cdiv dojoAttachPoint\x3d'flowBoxNode'\x3e\x3c/div\x3e\n\t\t\t\t\x3c/td\x3e\n\t\t\t\x3c/tr\x3e\n\t\t\t--\x3e\n\t\t\t\x3ctr\x3e\n\t\t\t\t\x3ctd\x3e${_loc.snapToNearestWidget}:\x3c/td\x3e\n\t\t\t\t\x3ctd\x3e\n\t\t\t\t\t\x3cdiv dojoAttachPoint\x3d'snapNode'\x3e\x3c/div\x3e\n\t\t\t\t\x3c/td\x3e\n\t\t\t\x3c/tr\x3e\n\t\t\t\x3ctr\x3e\n\t\t\t\t\x3ctd\x3e${_loc.showPossibleParents}:\x3c/td\x3e\n\t\t\t\t\x3ctd\x3e\n\t\t\t\t\t\x3cdiv dojoAttachPoint\x3d'showPossibleParentsNode'\x3e\x3c/div\x3e\n\t\t\t\t\x3c/td\x3e\n\t\t\t\x3c/tr\x3e\n\t\t\t\x3ctr\x3e\n\t\t\t\t\x3ctd\x3e${_loc.warnOnCSSOverride}:\x3c/td\x3e\n\t\t\t\t\x3ctd\x3e\n\t\t\t\t\t\x3cdiv dojoAttachPoint\x3d'cssOverrideWarn'\x3e\x3c/div\x3e\n\t\t\t\t\x3c/td\x3e\n\t\t\t\x3c/tr\x3e\n\t\t\t\x3ctr\x3e\n\t\t\t\t\x3ctd\x3e${_loc.absoluteWidgetsZindex}:\x3c/td\x3e\n\t\t\t\t\x3ctd\x3e\n\t\t\t\t\t\x3cdiv dojoAttachPoint\x3d'absoluteWidgetsZindex'\x3e\x3c/div\x3e\n\t\t\t\t\x3c/td\x3e\n\t\t\t\x3c/tr\x3e\n\t\t\t\x3c!-- FIXME: Disabled for now. Ultimately, UI for this option should go to widget palette\n\t\t\t\x3ctr\x3e\n\t\t\t\t\x3ctd\x3e${_loc.widgetPaletteLayout}:\x3c/td\x3e\n\t\t\t\t\x3ctd\x3e\n\t\t\t\t\t\x3cdiv dojoAttachPoint\x3d'widgetPaletteLayout'\x3e\x3c/div\x3e\n\t\t\t\t\x3c/td\x3e\n\t\t\t\x3c/tr\x3e\n\t\t\t--\x3e\n\t\t\t\x3ctr\x3e\n\t\t\t\t\x3ctd\x3e${_loc.zazl}:\x3c/td\x3e\n\t\t\t\t\x3ctd\x3e\n\t\t\t\t\t\x3cdiv dojoAttachPoint\x3d'zazl'\x3e\x3c/div\x3e\n\t\t\t\t\x3c/td\x3e\n\t\t\t\x3c/tr\x3e\n\t\t\x3c/tbody\x3e\n\t\x3c/table\x3e\n\x3c/div\x3e"}});
define("davinci/davinci",[],function(){});
//# sourceMappingURL=davinci.js.map