//>>built
require({cache:{"davinci/main":function(){define("dojo/_base/kernel dojo/_base/declare davinci/davinci davinci/ve/metadata davinci/Runtime davinci/Workbench davinci/ve/metadata davinci/ui/widgets/OutlineTree".split(" "),function(p){return p.davinci})},"davinci/ve/metadata":function(){define("require dojo/Deferred dojo/promise/all dojo/_base/lang dojo/_base/connect ../library ../model/Path ../repositoryinfo xide/types".split(" "),function(p,m,h,g,f,e,c,a,q){function k(b,d){b=b||{};for(var a=1,n=arguments.length;a<
n;a++){var q=arguments[a],c=void 0,e=void 0;for(c in q)q.hasOwnProperty(c)&&(e=q[c],c in b&&("object"===typeof e||b[c]===e)?k(b[c],e):b[c]=e)}return b}function d(d,n,q){C[d.name]=d;n=new c(n);var e=d.overlays,f;for(f in e)e.hasOwnProperty(f)&&("oam"!==f&&"maqetta"!==f||k(d,e[f]));delete d.overlays;d.__metadataModuleId="maq-metadata-"+d.name;e=new c(location.href);e.path=""+q;"dojo"!==d.name&&"xide"!==d.name&&"xblox"!==d.name&&(d.__libraryModuleId=d.name,e.append("app/static/lib/"+d.name+"/"+d.version));
var r;if(g.exists("scripts.widget_metadata",d))if("string"===typeof d.scripts.widget_metadata){var v=n.append(d.scripts.widget_metadata);r=dojo.xhrGet({url:q+"/"+v.toString()+(0<a.revision.length?"?"+a.revision:""),handleAs:"json"}).then(function(a){if(a){var n=v.getParentPath();return b(d.name,a,n,n,q)}})}else r=b(d.name,d.scripts.widget_metadata,n,q);if(g.exists("scripts.callbacks",d)){var h=new m;p([d.scripts.callbacks],function(b){d.$callbacks=b;h.resolve()});H.push(h)}return r}function b(b,d,
a,k){function q(b,d,a){"undefined"==typeof b.$providedTags[d]&&(b.$providedTags[d]=[]);b.$providedTags[d].push(a)}var c=C[b];d.$descriptorFolderPath=a.toString();d.$moduleFolderPath=k.toString();if(c)if(c.$widgets){d.widgets.forEach(function(b){c.$wm.widgets.push(b)});for(var e in d.categories)c.$wm.categories.hasOwnProperty(e)||(c.$wm.categories[e]=d.categories[e])}else if(c.$wm)for(k=0;k<d.widgets.length;k++){e=!1;for(var f=0;!e&&f<c.$wm.widgets.length;f++)c.$wm.widgets[f].type==d.widgets[k].type&&
(e=!0);e||c.$wm.widgets.push(d.widgets[k])}else c.$wm||(c.$wm=d);else C[b]={$wm:d,name:d.name,version:d.version},d.__metadataModuleId&&(C[b].__metadataModuleId=d.__metadataModuleId),c=C[b];var r=c.$wm;r.$providedTypes=r.$providedTypes||{};r.$providedTags=r.$providedTags||{};r.widgets.forEach(function(b){r.$providedTypes[b.type]=b;if("string"==typeof b.tags)q(r,b.tags,b);else if(b.tags&&b.tags.length)for(var d=0;d<b.tags.length;d++)q(r,b.tags[d],b);b.icon&&!b.iconLocal&&(b.icon=a.append(b.icon).toString());
b.iconLarge&&!b.iconLargeLocal&&(b.iconLarge=a.append(b.iconLarge).toString());b.widgetClass=r.categories[b.category].widgetClass});dojo.mixin(r,{_maqGetString:v});if(r.extend)for(var g in r.extend)r.extend.hasOwnProperty(g)&&(C[g]&&C[g].$wm?n(C[g].$wm,[r.extend[g]]):(d=N[g]||[],d.push(r.extend[g]),N[g]=d));N[b]&&n(r,N[b]);return c}function n(b,d){var a=b.$providedTypes;d.forEach(function(b){for(var d in b)if(b.hasOwnProperty(d)){var n=b[d],k=a[d];n.mixin&&g.mixin(k,n.mixin);if(n.concat)for(var q in n.concat)if(n.concat.hasOwnProperty(q)){var c=
n.concat[q];if(k[q]){var e=k[q];"string"===typeof e?c=e+","+c:e instanceof Array?c=e.concat(c):(console.error('Unhandled type for "concat()"'),c=void 0)}k[q]=c}}})}function r(b){if(b)for(var d in C)if(C.hasOwnProperty(d)){var a=C[d];if(a.$wm&&a.$wm.$providedTypes[b])return a}return null}function v(b){J||(J=!0);return null}function z(b){if(b){if(I.hasOwnProperty(b))return I[b];var d=r(b),a,n;d&&(n=d.$wm.$descriptorFolderPath);if(!n)return null;a=d.$wm;var c=null,e,d=F.getResourceManager().getVariable(q.RESOURCE_VARIABLES.APP_URL);
if(a.localPath){if(n=b.replace(/\./g,"/").split("/"),n.shift(),n=n.join("/"),e=[a.$moduleFolderPath,"/",n,"_oam.json"].join(""),-1!==e.indexOf("lib/custom")){var f=F.getFileManager().getStore("workspace_user",!1);return new Promise(function(d){f._loadItem({path:e,mount:"workspace_user"},!0).then(function(n){F.getFileManager().getContent(n.mount,n.path).then(function(n){c=dojo.fromJson(n);c.$ownproperty=dojo.mixin({},c.property);c.property=dojo.mixin({},L,c.property);c.$src=e;I[b]=c;k(c,a.$providedTypes[b].metadata);
d(c)})})})}}else e=[n,"/",b.replace(/\./g,"/"),"_oam.json"].join(""),e=d+"/lib/xideve/metadata/"+e,dojo.xhrGet({url:e,handleAs:"json",sync:!0}).then(function(b){c=b});if(!c)return console.error("ERROR: Could not load metadata for type: "+b),null;c.$ownproperty=dojo.mixin({},c.property);c.property=dojo.mixin({},L,c.property);c.$src=e;I[b]=c;k(c,a.$providedTypes[b].metadata);return c}}function y(b,d){if(!d)return b;dojo.every(d.split("."),function(d){if(void 0===b[d])return b=void 0,!1;b=b[d];return!0});
return b}function w(b,d){(d=x.queryDescriptor(d,"allowed"+b))||(d="Parent"===b?"ANY":"NONE");return d.split(/\s*,\s*/)}function B(b,d){d=x.queryDescriptor(b,d);if(!d)return null;b=r(b);return u(b,d)}function u(b,d){return b&&d?"string"===typeof d&&"./"===d.substr(0,2)?(new c(b.__metadataModuleId)).append(d).toString():d:null}var x,D,F,C={},I={},A={},H=[],N={},L={id:{datatype:"string",hidden:!0},lang:{datatype:"string",hidden:!0},dir:{datatype:"string",hidden:!0},"class":{datatype:"string",hidden:!0},
style:{datatype:"string",hidden:!0},title:{datatype:"string",hidden:!0}};dojo.subscribe("/davinci/ui/libraryChanged/start",function(){C={};I={};A={};x.init().then(function(){dojo.publish("/davinci/ui/libraryChanged")})});var J=!1;x={prefix:"",ctx:null,init:function(b,n){p({cacheBust:null});this.ctx=F=b;var k=[];D=p("../Workbench");b=F.getResourceManager().getVariable(q.RESOURCE_VARIABLES.APP_URL);n=n.replace(b,"");n=p.toUrl("xideve/metadata/");e.getUserLibs(D.getProject()).forEach(function(b){var c=
b.metaRoot;if(c=c.replace("app/metadata/","")){var q=null,e=null;try{b.getRoot&&(q=b.getRoot()),b.getMetaPath&&(e=b.getMetaPath()),k.push(dojo.xhrGet({url:(q||n)+"/"+(e||c)+"/package.json?"+a.revision,handleAs:"json"}).then(function(b){return d(b,e||c,q||n)}))}catch(T){console.error("error parsing library "+b.id,T)}}});return h(k)},parseMetaData:function(d,a,n,k){return b(d,a,n,k)},getLibrary:function(b){return b?C[b]:C},getLibraryActions:function(b,d){var a=[],n={},k;for(k in C){if(C.hasOwnProperty(k)){n.lib=
C[k];if(!n.lib.$wm)continue;var c=n.lib.$wm["davinci.actionSets"];if(!c)continue;dojo.forEach(c,function(n){return function(k){k.id!=b||d&&k.targetID!==d||(k=dojo.clone(k.actions),dojo.forEach(k,function(b){if(b.action){var d=u(n.lib,b.action);b.action=d}b.menu&&b.menu.forEach(function(b){if(b.action){var d=u(n.lib,b.action);b.action=d}});a.push(b)}))}}(n))}n={lib:n.lib}}return a},loadThemeMeta:function(b){for(var d=b.find({elementType:"HTMLElement",tag:"style"}),a=[],n,k=0;k<d.length;k++)for(var q=
0;q<d[k].children.length;q++)"CSSImport"==d[k].children[q].elementType&&a.push(d[k].children[q]);new c(b.fileName);k=e.getThemes(D.getProject());d={};for(q=0;q<k.length;q++)if(k[q].files)for(var f=0;f<k[q].files.length;f++)d[k[q].files[f]]=k[q];for(q=0;q<a.length;q++){var k=a[q].url,r;for(r in d)if(-1<r.indexOf("claro")&&(n=r),-1<k.indexOf(r))return{themeUrl:k,themeMetaCache:e.getThemeMetadata(d[r]),theme:d[r]}}if(q=x._loadThemeMetaDojoxMobile(b,d))return q;if(n){for(var g,q=0;q<a.length;q++)if((r=
a[q].url.match(/\/([^\/]*)\.css$/))&&2==r.length&&(r=r[1],a[q].url.match(new RegExp("themes/"+r+"/"+r+".css$")))){g=r;break}if(g)return r=b.getDocumentElement(),b=r.getChildElement("head"),r=r.getChildElement("body"),(k=r.getAttribute("class"))&&r.setAttribute("class",k.replace(new RegExp("\\b"+g+"\\b","g"),"claro")),b=b.getChildElements("style"),dojo.forEach(b,function(b){dojo.forEach(b.children,function(b){"CSSImport"==b.elementType&&(b.url=b.url.replace(new RegExp("/"+g,"g"),"/claro"))})}),k=a[q].url.replace(new RegExp("/"+
g,"g"),"/claro"),a={themeUrl:k,themeMetaCache:e.getThemeMetadata(d[n]),theme:d[n]},a.themeMetaCache.usingSubstituteTheme={oldThemeName:g,newThemeName:"claro"},a}},_loadThemeMetaDojoxMobile:function(b,d){b=b.find({elementType:"HTMLElement",tag:"script"});for(var a=0;a<b.length;a++){var n=b[a].getElementText();if(n.length){var k=n.indexOf("dojoxMobile.themeMap");if(0<k){var k=n.indexOf("\x3d",k),q=n.indexOf(";",k);if(q>k){var n=dojo.fromJson(n.substring(k+1,q))[0][2][0],c;for(c in d)if(-1<n.indexOf(c))return{themeUrl:n,
themeMetaCache:e.getThemeMetadata(d[c]),theme:d[c]}}}}}},getLibraryForType:function(b){return r(b)},getLibraryMetadataForType:function(b){return(b=r(b))?b.$wm:null},getWidgetDescriptorForType:function(b){var d=r(b);b=d?d.$wm.$providedTypes[b]:void 0;return b},getOamDescriptivePropertyForType:function(b,d){return(b=z(b))&&b[d]?(d=b[d],"string"==typeof d?{type:"text/plain",value:d}:"string"==typeof d.value?{type:d.type?d.type:"text/plain",value:d.value}:null):null},getWidgetsWithTag:function(b){var d=
[];if(b)for(var a in C)if(C.hasOwnProperty(a)){var n=C[a];n.$wm&&n.$wm.$providedTags[b]&&(d=d.concat(n.$wm.$providedTags[b]))}return d},getLibraryBase:function(b){if(b=r(b))return b.$wm.$descriptorFolderPath},invokeCallback:function(b,d,a){var n=b;"string"===typeof b&&(n=r(type));if(n&&n.$callbacks&&(b=n.$callbacks[d]))return b.apply(n.$callbacks,a)},query:function(b,d){if(b){var a,n;b.declaredClass?(b.metadata&&(n=b.metadata),a=b.type):a=b;if(!n){n=z(a);if(!n)return;b.declaredClass&&(b.metadata=
n)}return y(n,d)}},queryDescriptorByName:function(b,d,a){d=r(d);var n;if(d){d=d.$wm.widgets;for(var k=0;k<d.length;k++)if(d[k].name==b){n=d[k];break}}return this._queryDescriptor(n,a)},queryDescriptor:function(b,d){var a=r(b),n;a&&(n=a.$wm.$providedTypes[b]);return this._queryDescriptor(n,d)},_queryDescriptor:function(b,d){if(b&&"object"===typeof b)return b=y(b,d),"resizable"===d&&(b||(b="both")),b},getAllowedParent:function(b){return w("Parent",b)},getAllowedChild:function(b){return w("Child",b)},
getCanSelect:function(b){return(b=x.queryDescriptor(b,"canSelect"))?b.split(/\s*,\s*/):[]},getMetadata:z,getHelper:function(b,d){var a=new m,n=b+":"+d;if(n in A)return a.resolve(A[n]),a;(b=B(b,d))?p([b],function(b){a.resolve(b);A[n]=b}):a.resolve();return a},getSmartInput:function(b){var d=new m;if(b in G)d.resolve(G[b]);else{var a=B(b,"inlineEdit");a?"string"===typeof a?p([a],function(a){d.resolve(G[b]=new a)}):"[object Array]"===Object.prototype.toString.call(a.property)?p(["davinci/ve/input/MultiFieldSmartInput"],
function(n){n=new n;g.mixin(n,a);d.resolve(G[b]=n)}):p(["davinci/ve/input/SmartInput"],function(n){n=new n;g.mixin(n,a);d.resolve(G[b]=n)}):d.resolve(null)}return d},getDeferreds:function(){return H}};var G={};f.subscribe("/davinci/ui/libraryChanged/start",function(){G={}});dojo.setObject("davinci.ve.metadata",x);return x})},"davinci/library":function(){define("dojo/_base/xhr dojo/Deferred ./Runtime ./model/Path ./workbench/Preferences dojo/_base/kernel dojo/promise/all xide/model/Path xide/types xide/utils davinci/ve/metadata".split(" "),
function(p,m,h,g,f,e,c,a,q,k,d){var b=[{userLibs:[{id:"html",version:"0.8",metaRoot:"app/metadata/html/0.8",required:!0,hasSource:!1},{id:"delite",version:"0.8",metaRoot:"app/metadata/delite/0.8",required:!1,hasSource:!0},{id:"xblox",version:"1.0",metaRoot:"app/metadata/xblox/1.0",required:!1,hasSource:!1,root:"lib/xblox"}]}],n=[{specVersion:"1.0",files:["blackberry.css"],useBodyFontBackgroundClass:"useBodyFontBg",helper:"maq-metadata-dojo/dojox/mobile/ThemeHelper",themeEditorHtmls:["../custom/dojo-theme-editor.html"],
name:"blackberry",path:["project1/themes/blackberry/blackberry.theme"],base:"",className:"blackberry",type:"dojox.mobile",meta:["../custom/custom.json"],version:"1.8"},{specVersion:"1.0",files:["claro.css"],helper:"maq-metadata-dojo/dijit/ThemeHelper",themeEditorHtmls:["dojo-theme-editor.html"],name:"claro",path:["project1/themes/claro/claro.theme"],conditionalFiles:["document.css"],className:"claro",meta:["claro.json"],version:"1.8"},{specVersion:"1.0",files:["ipad.css"],useBodyFontBackgroundClass:"useBodyFontBg",
helper:"maq-metadata-dojo/dojox/mobile/ThemeHelper",themeEditorHtmls:["dojo-theme-editor.html"],name:"ipad",path:["project1/themes/ipad/ipad.theme"],base:"",className:"ipad",type:"dojox.mobile",meta:["ipad.json"],version:"1.8"},{specVersion:"1.0",files:["android.css"],useBodyFontBackgroundClass:"useBodyFontBg",helper:"maq-metadata-dojo/dojox/mobile/ThemeHelper",themeEditorHtmls:["../custom/dojo-theme-editor.html"],name:"android",path:["project1/themes/android/android.theme"],base:"",className:"android",
type:"dojox.mobile",meta:["../custom/custom.json"],version:"1.8"},{specVersion:"1.0",files:["custom.css"],useBodyFontBackgroundClass:"useBodyFontBg",helper:"maq-metadata-dojo/dojox/mobile/ThemeHelper",themeEditorHtmls:["dojo-theme-editor.html"],name:"custom",path:["project1/themes/custom/custom.theme"],base:"",className:"custom",type:"dojox.mobile",meta:["custom.json"],version:"1.8"},{specVersion:"1.0",files:["iphone.css"],useBodyFontBackgroundClass:"useBodyFontBg",helper:"maq-metadata-dojo/dojox/mobile/ThemeHelper",
themeEditorHtmls:["../custom/dojo-theme-editor.html"],name:"iphone",path:["project1/themes/iphone/iphone.theme"],base:"",className:"iphone",type:"dojox.mobile",meta:["../custom/custom.json"],version:"1.8"},{specVersion:"1.0",files:["sketch.css"],themeEditorHtmls:["../claro/dojo-theme-editor.html"],name:"Sketch",path:["project1/themes/sketch/sketch.theme"],className:"claro",meta:["../claro/claro.json"],version:"1.8"}],r={_customWidgets:{}},v={},z={},y={},w={};e.subscribe("/davinci/ui/libraryChanged/start",
this,function(){w={};y={}});return r={themesChanged:function(b){v[b]=b?null:[]},getThemes:function(b,d,a){function k(){var a=[];v[b]&&(a=d?v[b].filter(function(b){return!b.getFile().isVirtual()}):v[b]);return a}a&&delete v[b];if(v[b])return k();a=f.getPreferences("davinci.ui.ProjectPrefs",b);a.themeFolder="themes";(new g(b)).append(a.themeFolder);n.forEach(function(b){b.getFile=function(){return system.resource.findResource(this.path[0])}.bind(b)}.bind(this));v[b]=n;return k()},getThemeMetadata:function(b){return z[b.name]?
z[b.name]:null},addCustomWidgets:function(b,d,a){new m;b=b.getParent().getPath();b=new g(b);d=require("davinci/ve/metadata").parseMetaData(a.name,a,b,d);r._customWidgets||(r._customWidgets={});r._customWidgets.project1||(r._customWidgets.project1={});r._customWidgets.project1.hasOwnProperty("name")||(r._customWidgets.project1.name="custom",r._customWidgets.project1.metaPath="./lib/custom",r._customWidgets.project1.localPath=!0);r._customWidgets.project1=d;e.publish("/davinci/ui/addedCustomWidget",
[d]);return d},_getCustomWidgets:function(b){if(!r._customWidgets||!r._customWidgets[b]){r._customWidgets||(r._customWidgets={});r._customWidgets[b]||(r._customWidgets[b]=[]);var d=f.getPreferences("davinci.ui.ProjectPrefs",b);d.widgetFolder||(d.widgetFolder="./lib/custom",f.savePreferences("davinci.ui.ProjectPrefs",b,d));for(var a=(new g(b)).append(d.widgetFolder).getSegments(),d=system.resource.findResource(a[0]),n=1;n<a.length;n++)var k=d.getChild(a[n]),d=k?k:d.createResource(a[n],!0);var q;d.getChildren(function(b){q=
b},!0);this._customWidgetPackages=[];null==q&&(q=[]);a={};for(n=0;n<q.length;n++)if(k=q[n],"Folder"==k.elementType){a[k.name]=k.getPath();var c="maq-lib-custom-"+k.name,v=k.getURL();require({packages:[{name:c,location:v}]});this._customWidgetPackages.push({name:k.name,location:v})}k=system.resource.findResource("*_widgets.json",!1,d);this._customWidgetDescriptors={};for(n=0;n<k.length;n++){var h=k[n],z=h.getParentFolder(),v=d.getURL(),c=z.getURL(),y=c.substr(v.length+1),v=null;try{v=e.fromJson(h.getContentSync())}catch(J){}if(v&&
v.customWidgetSpec&&(y=y.split("/").shift(),v.__metadataModuleId="maq-lib-custom-"+y,r.addCustomWidgets(b,h,a[y],v),w[b]||(w[b]={}),w[b][z.name]||(w[b][z.name]={}),w[b][z.name][v.version]=c,v&&v.widgets))for(h=0;h<v.widgets.length;h++)(z=v.widgets[h].type)&&(this._customWidgetDescriptors[z]={name:y,location:c,descriptor:v})}}return{custom:r._customWidgets[b]}},getCustomWidgets:function(){var b=this;this._customWidgetPackages=[];var d={},a=[];if(!r.ctx)return console.error("library has no context"),
null;var n=r.ctx.getFileManager();if(!n)return console.error("have no file manager"),null;var q=n.getStore("workspace_user"),e=[],f=require("davinci/ve/metadata"),v=[],g=new m;n.mkdir("workspace_user","./lib/custom").then(function(){q.getItem("./lib/custom",!0).then(function(n){n.getChildren().forEach(function(n){!0===n.directory&&v.push(q._loadItem(n,!0).then(function(a){d[n.name]=n.getPath();a="maq-lib-custom-"+n.name;var k=require.toUrl("workspace")+"/lib/custom/"+n.name;require({packages:[{name:a,
location:k}]});b._customWidgetPackages.push({name:n.name,location:k});e.push(n)}));c(v).then(function(){e.forEach(function(b){var n=b.getPath()+"/"+b.name+"_widgets.json",c=q.getSync(n),e=new m;a.push(e);r.ctx.getFileManager().getContent(c.mount,c.path).then(function(n){n=k.getJson(n);var a=b.name;n.__metadataModuleId="maq-lib-custom-"+a;try{r.addCustomWidgets(c,d[a],n)}catch(Q){console.error("error parsing custom widget "+b.name,Q)}n=f.getMetadata(n.name+"/"+n.name);n.then?n.then(function(){e.resolve()}):
e.resolve()})});c(a).then(function(){g.resolve({custom:r._customWidgets.project1})})})})})});return g},getCustomWidgetPackages:function(){return this._customWidgetPackages||[]},getCustomWidgetDescriptors:function(){return this._customWidgetDescriptors?this._customWidgetDescriptors:{}},getInstalledLibs:function(){r._serverLibs||(r._serverLibs=h.serverJSONRequest({url:"cmd/listLibs",handleAs:"json",content:{},sync:!0})[0].userLibs);return r._serverLibs},getUserLibs:function(d){if(y.base)return y.base;
y.base=b[0].userLibs;return y.base},getLibRoot:function(b,d,n){var a=new m,k=w;if(k[n]&&k[n][b]&&void 0!==k[n][b][d])return a.resolve(k[n][b][d]||"");k[n]||(k[n]={});k[n][b]||(k[n][b]={});k[b]||(k[b]={});var q=null;switch(b){case "xblox":q="lib/xblox";break;case "dojo":q="lib/dojo";break;case "maqetta":q="lib/maqetta";break;case "delite":q="lib/ibm-js/delite";break;case "deliteful":q="lib/ibm-js/deliteful";break;case "requirejs":q="lib/ibm-js/requirejs";break;case "requirejs":q="lib/ibm-js/requirejs";
break;case "user":q="workspace_user/"}k[n][b][d]=q;return a.resolve(q||"")},getlibraryId:function(b,d){return{sketch:"sketch",claro:"claro"}[b]+(d||"")},getlibraryName:function(b){var d,n;for(n in b)d=n;return d}}})},"davinci/Runtime":function(){define("davinci/lang/webContent ./commands/CommandStack ./ui.plugin ./html/html.plugin ./js/js.plugin ./ve/ve.plugin".split(" "),function(p,m,h,g,f,e){var c=[h,g,e],a={plugins:[],extensionPoints:[],subscriptions:[],currentSelection:[],commandStack:new m,getUser:function(){return this._initializationInfo.userInfo},
getWorkbenchState:function(){return this._initializationInfo?this._initializationInfo.workbenchState:{activeEditor:null,editors:[],nhfo:{project1:{device:"iphone",layout:"flow",themeSet:{name:"(none)",desktopTheme:"claro",mobileTheme:[{theme:"android",device:"Android"},{theme:"blackberry",device:"BlackBerry"},{theme:"ipad",device:"iPad"},{theme:"iphone",device:"iPhone"},{theme:"iphone",device:"other"}]}}},project:"project1",id:"",Fields:[]}},getSiteConfigData:function(a){return"widgetPalette"==a?
{name:"widgetPalette_dojo_default",defs:{$XBLOXSection:{id:"xblox",name:"xblox",iconBase64:"data:image/gif;base64,R0lGODlhEAAQAKIAAFhYWtXV1v///0BAQP///wAAAAAAAAAAACH5BAEAAAQALAAAAAAQABAAAAMuSLo0w5CNIF6EM9grN2+Z82WCEGjcVJbopa5tlJ2nh4W2XH9LyCu+X/AHAPyOCQA7",subsections:["$XBLOXSection_Controls"]},$XBLOXSection_Controls:{id:"Controls",name:"Controls",iconBase64:"data:image/gif;base64,R0lGODlhEAAQALMAAN7e4oyMjtXV1sDAwf///+Dg4MvLyzMzM////wAAAAAAAAAAAAAAAAAAAAAAAAAAACH5BAEAAAgALAAAAAAQABAAAAQ3EMlJq704a3RO2NIhBIexHYRgeFTndkQ8HmER33g60EcB/ECcYBd6wWSkDErFUs5Mms4HRK1SIwA7",
includes:["RunScript","CSSState","StyleState","Script"]},$ClipartSection_Arrows:{id:"Arrows",name:"Arrows",iconBase64:"data:image/gif;base64,R0lGODlhEAAQALMAAN7e4oyMjtXV1sDAwf///+Dg4MvLyzMzM////wAAAAAAAAAAAAAAAAAAAAAAAAAAACH5BAEAAAgALAAAAAAQABAAAAQ3EMlJq704a3RO2NIhBIexHYRgeFTndkQ8HmER33g60EcB/ECcYBd6wWSkDErFUs5Mms4HRK1SIwA7",includes:["ArrowDown","ArrowLeft","ArrowRight","ArrowUp"]},$ClipartSection_Community:{id:"Community",name:"Community",iconBase64:"data:image/gif;base64,R0lGODlhEAAQAMQAANXV1v///9HR0cXFxbm5uaKiooyMjHR0dGlpaVJSUkZGRkREREJCQkFBQT09PTo6OjMzM////wAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAACH5BAEAABEALAAAAAAQABAAAAVdIJEoZGmSiTgAbOuywwgEdAAY5WyTul0gAYFCB+DRWJCAqFArDo+QRcDRgBCNu1rgueMWG4FHw4u1Maa9bg8AdqSd6/a7zEZr4U35vRw4KA5aOwkrL4UxIieJCikhADs\x3d",
includes:["Facebook","Rss","Twitter"]},$ClipartSection_Devices:{id:"Devices",name:"Devices",iconBase64:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAMAAAAoLQ9TAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAA2hpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuMC1jMDYxIDY0LjE0MDk0OSwgMjAxMC8xMi8wNy0xMDo1NzowMSAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wTU09Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9tbS8iIHhtbG5zOnN0UmVmPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvc1R5cGUvUmVzb3VyY2VSZWYjIiB4bWxuczp4bXA9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC8iIHhtcE1NOk9yaWdpbmFsRG9jdW1lbnRJRD0ieG1wLmRpZDowMTgwMTE3NDA3MjA2ODExOTJCMEJDQTgxOTc0RDYxMiIgeG1wTU06RG9jdW1lbnRJRD0ieG1wLmRpZDo4NTQ0QUU2NjhCMzMxMUUyOTQ3N0ExRTg0NEJENzk4RiIgeG1wTU06SW5zdGFuY2VJRD0ieG1wLmlpZDo4NTQ0QUU2NThCMzMxMUUyOTQ3N0ExRTg0NEJENzk4RiIgeG1wOkNyZWF0b3JUb29sPSJBZG9iZSBQaG90b3Nob3AgQ1M1LjEgTWFjaW50b3NoIj4gPHhtcE1NOkRlcml2ZWRGcm9tIHN0UmVmOmluc3RhbmNlSUQ9InhtcC5paWQ6MDM4MDExNzQwNzIwNjgxMTkyQjBCQ0E4MTk3NEQ2MTIiIHN0UmVmOmRvY3VtZW50SUQ9InhtcC5kaWQ6MDE4MDExNzQwNzIwNjgxMTkyQjBCQ0E4MTk3NEQ2MTIiLz4gPC9yZGY6RGVzY3JpcHRpb24+IDwvcmRmOlJERj4gPC94OnhtcG1ldGE+IDw/eHBhY2tldCBlbmQ9InIiPz7l5plaAAAAIVBMVEX///8zMzP3+PnV1dZ+fn7ExMZ9fX4sKis1NTVZWVmgoKKPJ3BhAAAARElEQVR42mJgIAIwM8IBM1iAkRkO2KECTFBAiQCaoZjWsrKxcgIxEHKA+BysbGysQIKLi5OVEyjCiAYYWNAAYa8CBBgA3BQB3Pw68r4AAAAASUVORK5CYII\x3d",
includes:["Cellphone","Computer","Laptop","Server","Tablet"]},$ClipartSection_DeviceSilhouettes:{id:"DeviceSilhouettes",name:"Device Silhouettes",iconBase64:"data:image/gif;base64,R0lGODlhEAAQAKIAAGZmaNXV1v///0BAQP///wAAAAAAAAAAACH5BAEAAAQALAAAAAAQABAAAAM6SErT3iu+EF5UL4/LqPfbNQRCaVbcaJ6hRK4CKr6r7MJxu6iwvX8fHUbjSDUAFEBR5AAol0wNZzpNAAA7",includes:"Android_340x480 Android_480x800 AndroidTablet Blackberry iPad iPhone".split(" ")},$ClipartSection_Media:{id:"Media",name:"Media",iconBase64:"data:image/gif;base64,R0lGODlhEAAQALMAANXV1v////z8/Pr6+vn5+fj4+Ojo6MrKyre3t6urq4iIiHV1dUdHR0BAQDMzM////yH5BAEAAA8ALAAAAAAQABAAAARZ8MlJq6Ut36c5+E3VOGAGBEAWeif6DULghk0rB8jCLAhK2zjFoXBQIFKeW2BxSDQShwWypmQUGoZGgTEFMp1Q6U+JEBKN3RsBp+P5WJ+4HCRR2e+rjX5PiQAAOw\x3d\x3d",
includes:"Camera Chat GraphBar GraphLine GraphPie Image Map Microphone PlayControl Record StreetMap Table VideoCamera VideoPlayer".split(" ")},$ClipartSection_UserInterfaceControls:{id:"UserInterfaceControls",name:"User Interface Controls",iconBase64:"data:image/gif;base64,R0lGODlhEAAQALMAAFhYWtXV1qurrKGhooKCg/////X19TMzM////wAAAAAAAAAAAAAAAAAAAAAAAAAAACH5BAEAAAgALAAAAAAQABAAAARSEElwqrUyHxG678KRIVthDoNZhGNZBFVgsppQGId5GKtYF5dKr8X5eGiSoNKXJAie0CeBSbKprsgqMDj84XS8rAt2kHWT1gJKJS4aA1nSspKJAAA7",includes:"File Folder FormattingToolbox HScrollBar HSplit ProgressBar SpinInput VScrollBar VSplit WaitingPending".split(" ")},
$ClipartSection_UserInterfaceIcons:{id:"UserInterfaceIcons",name:"User Interface Icons",iconBase64:"data:image/gif;base64,R0lGODlhEAAQANUAANXT1vj4+eLi49/f4Nra29nZ2tbW19XV1tTU1dDQ0c3NzpCQkf////7+/vX19fLy8vDw8O/v7+zs7OTk5OPj49nZ2dHR0c/Pz87Ozs3NzczMzKWlpaOjo6KioqGhoZ6enp2dnZycnJubm5mZmY+Pj4aGhoWFhYGBgX5+fnR0dHNzc2lpaWZmZllZWVdXV1VVVVNTU1FRUU5OTk1NTUxMTEJCQkBAQDY2NjMzMzIyMi8vLyoqKiYmJiMjI////wAAACH5BAEAAD4ALAAAAAAQABAAAAa8QJ/Qd0HRdD0dDXUZDj8ykqJgKGBIso/zs9IIIoFGICLQrLREWUZSmeHetookI2ueFgIGC6fSqHAzDAILJz4yFhF6LA8MD28MEQkyPjkEAQyYjS04LAwBBDk+PAYNmQ+bLYwNBjw+OJaZGzipmA4EOD4xB4mYIzgjmREHMT4mIhSZyZgUIiZELwgSvb+YEggvTT4eKQgDEB01HRATCCkcThwuIAcEAAQHIS/nTj4WJTA3OzcwJRb0/wB9BAEAOw\x3d\x3d",
includes:"Close Copy Delete Edit Error Fatal Help Home Info Lock Mail Minus Next Paste Plus Previous Print Refresh Save Search ShoppingCart Trash Warning".split(" ")},$ClipartSection_Other:{id:"Other",name:"Other",iconBase64:"data:image/gif;base64,R0lGODlhEAAQAJEAAHx8fDMzM////wAAACH5BAEAAAIALAAAAAAQABAAAAImlI9pAYoQDGxuHpvwZY8rrH1MWAWes53oRHZUK4Rkq8Gxp4roXgAAOw\x3d\x3d",includes:["Browser","Person","ProfilePicture","X"]},$ClipartSection:{id:"Clipart",name:"Clip Art",iconBase64:"data:image/gif;base64,R0lGODlhEAAQAKIAAFhYWtXV1v///0BAQP///wAAAAAAAAAAACH5BAEAAAQALAAAAAAQABAAAAMuSLo0w5CNIF6EM9grN2+Z82WCEGjcVJbopa5tlJ2nh4W2XH9LyCu+X/AHAPyOCQA7",
subsections:"$ClipartSection_Arrows $ClipartSection_Community $ClipartSection_Devices $ClipartSection_DeviceSilhouettes $ClipartSection_Media $ClipartSection_UserInterfaceControls $ClipartSection_UserInterfaceIcons $ClipartSection_Other".split(" ")},$DrawingToolsSection:{id:"DrawingTools",name:"Drawing Tools",iconBase64:"data:image/gif;base64,R0lGODlhEAAQAKIAAL+/v5aWlmNjYzMzMxwcHBYWFv///wAAACH5BAEAAAYALAAAAAAQABAAAAMgaLrc/jBKFsBcg9g7iuaFZwlhaZrD1Ikqq35Xdc10PScAOw\x3d\x3d",includes:"Text Line Arrow Polyline PolylineArrow Circle Rectangle RoundedRectangle".split(" ")},
$ViewsSection:{id:"Views",name:"Views",_COMMENT1_:"Mobile-only view widgets, often representing a single screen of UI",iconBase64:"data:image/gif;base64,R0lGODlhEAAQANUAAC5KhTFOiPj6/jJRijRTjTRUjTdXkTdXkLrH3+Hp+OHp9zdakzZYkDdYkDlbkzlck97o+ODp+N/o9ztflj5km/L2/Pj6/T5mnD9mnT5lm0FqoENupENuo0Ruo0ZxpvL2+0l3rEl4rEh2qkl3q0l2qk6BtE1+sU+BtFCDtVCFt1CEtlSLvVOJulOHuVaOv7nW78/t+////////wAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAACH5BAEAADIALAAAAAAQABAAAAaAQJlwSCwKXcikcilzxZ5QaApGVclWMUAWMFhgYiRYACGStaJoDKzyuchQr7hc3jAwGAeZCR1lKRIRLDIjWVtdXyUSEhAnMh58UCCKECEyGnOYHRsbHBwyFJBPGVQwFDIThQBcXjEOYggOMg+hMQUwFgIEsg+8vb0BwMBGw8TFQkEAOw\x3d\x3d",
includes:[]},$HeadingSection:{id:"Heading, Section Labels",name:"Heading",_COMMENT1_:"Mobile-only Heading widgets, often titles at top of a screen",iconBase64:"data:image/gif;base64,R0lGODlhEAAQAMQAAEh1qkd2q0d2qkh2q0h2qkt7r0t8r0+BtU6CtFGGuVGHuVSLvFaNv1WLvKzM6a3M6a3M6LfS7DJlklaOv4y64Iy635zD5J3E5KzN6azM6IK13Iy734273////////wAAACH5BAEAAB4ALAAAAAAQABAAAAVQoCeOZGmeaKqqU+u+LdN6U2Tf+D15S5ZJwIzjgXFkIJmGJ2GRtCSbTWc6vSg8hw0HCN1UKFotwlPQmM/os8FDIADcgYGAIJgD3qu8fs/nhwAAOw\x3d\x3d",includes:[]},$ContainersSection_Dojo:{id:"ContainersSection_Dojo",
name:"Dojo",iconBase64:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAACXBIWXMAAAsTAAALEwEAmpwYAAAKT2lDQ1BQaG90b3Nob3AgSUNDIHByb2ZpbGUAAHjanVNnVFPpFj333vRCS4iAlEtvUhUIIFJCi4AUkSYqIQkQSoghodkVUcERRUUEG8igiAOOjoCMFVEsDIoK2AfkIaKOg6OIisr74Xuja9a89+bN/rXXPues852zzwfACAyWSDNRNYAMqUIeEeCDx8TG4eQuQIEKJHAAEAizZCFz/SMBAPh+PDwrIsAHvgABeNMLCADATZvAMByH/w/qQplcAYCEAcB0kThLCIAUAEB6jkKmAEBGAYCdmCZTAKAEAGDLY2LjAFAtAGAnf+bTAICd+Jl7AQBblCEVAaCRACATZYhEAGg7AKzPVopFAFgwABRmS8Q5ANgtADBJV2ZIALC3AMDOEAuyAAgMADBRiIUpAAR7AGDIIyN4AISZABRG8lc88SuuEOcqAAB4mbI8uSQ5RYFbCC1xB1dXLh4ozkkXKxQ2YQJhmkAuwnmZGTKBNA/g88wAAKCRFRHgg/P9eM4Ors7ONo62Dl8t6r8G/yJiYuP+5c+rcEAAAOF0ftH+LC+zGoA7BoBt/qIl7gRoXgugdfeLZrIPQLUAoOnaV/Nw+H48PEWhkLnZ2eXk5NhKxEJbYcpXff5nwl/AV/1s+X48/Pf14L7iJIEyXYFHBPjgwsz0TKUcz5IJhGLc5o9H/LcL//wd0yLESWK5WCoU41EScY5EmozzMqUiiUKSKcUl0v9k4t8s+wM+3zUAsGo+AXuRLahdYwP2SycQWHTA4vcAAPK7b8HUKAgDgGiD4c93/+8//UegJQCAZkmScQAAXkQkLlTKsz/HCAAARKCBKrBBG/TBGCzABhzBBdzBC/xgNoRCJMTCQhBCCmSAHHJgKayCQiiGzbAdKmAv1EAdNMBRaIaTcA4uwlW4Dj1wD/phCJ7BKLyBCQRByAgTYSHaiAFiilgjjggXmYX4IcFIBBKLJCDJiBRRIkuRNUgxUopUIFVIHfI9cgI5h1xGupE7yAAygvyGvEcxlIGyUT3UDLVDuag3GoRGogvQZHQxmo8WoJvQcrQaPYw2oefQq2gP2o8+Q8cwwOgYBzPEbDAuxsNCsTgsCZNjy7EirAyrxhqwVqwDu4n1Y8+xdwQSgUXACTYEd0IgYR5BSFhMWE7YSKggHCQ0EdoJNwkDhFHCJyKTqEu0JroR+cQYYjIxh1hILCPWEo8TLxB7iEPENyQSiUMyJ7mQAkmxpFTSEtJG0m5SI+ksqZs0SBojk8naZGuyBzmULCAryIXkneTD5DPkG+Qh8lsKnWJAcaT4U+IoUspqShnlEOU05QZlmDJBVaOaUt2ooVQRNY9aQq2htlKvUYeoEzR1mjnNgxZJS6WtopXTGmgXaPdpr+h0uhHdlR5Ol9BX0svpR+iX6AP0dwwNhhWDx4hnKBmbGAcYZxl3GK+YTKYZ04sZx1QwNzHrmOeZD5lvVVgqtip8FZHKCpVKlSaVGyovVKmqpqreqgtV81XLVI+pXlN9rkZVM1PjqQnUlqtVqp1Q61MbU2epO6iHqmeob1Q/pH5Z/YkGWcNMw09DpFGgsV/jvMYgC2MZs3gsIWsNq4Z1gTXEJrHN2Xx2KruY/R27iz2qqaE5QzNKM1ezUvOUZj8H45hx+Jx0TgnnKKeX836K3hTvKeIpG6Y0TLkxZVxrqpaXllirSKtRq0frvTau7aedpr1Fu1n7gQ5Bx0onXCdHZ4/OBZ3nU9lT3acKpxZNPTr1ri6qa6UbobtEd79up+6Ynr5egJ5Mb6feeb3n+hx9L/1U/W36p/VHDFgGswwkBtsMzhg8xTVxbzwdL8fb8VFDXcNAQ6VhlWGX4YSRudE8o9VGjUYPjGnGXOMk423GbcajJgYmISZLTepN7ppSTbmmKaY7TDtMx83MzaLN1pk1mz0x1zLnm+eb15vft2BaeFostqi2uGVJsuRaplnutrxuhVo5WaVYVVpds0atna0l1rutu6cRp7lOk06rntZnw7Dxtsm2qbcZsOXYBtuutm22fWFnYhdnt8Wuw+6TvZN9un2N/T0HDYfZDqsdWh1+c7RyFDpWOt6azpzuP33F9JbpL2dYzxDP2DPjthPLKcRpnVOb00dnF2e5c4PziIuJS4LLLpc+Lpsbxt3IveRKdPVxXeF60vWdm7Obwu2o26/uNu5p7ofcn8w0nymeWTNz0MPIQ+BR5dE/C5+VMGvfrH5PQ0+BZ7XnIy9jL5FXrdewt6V3qvdh7xc+9j5yn+M+4zw33jLeWV/MN8C3yLfLT8Nvnl+F30N/I/9k/3r/0QCngCUBZwOJgUGBWwL7+Hp8Ib+OPzrbZfay2e1BjKC5QRVBj4KtguXBrSFoyOyQrSH355jOkc5pDoVQfujW0Adh5mGLw34MJ4WHhVeGP45wiFga0TGXNXfR3ENz30T6RJZE3ptnMU85ry1KNSo+qi5qPNo3ujS6P8YuZlnM1VidWElsSxw5LiquNm5svt/87fOH4p3iC+N7F5gvyF1weaHOwvSFpxapLhIsOpZATIhOOJTwQRAqqBaMJfITdyWOCnnCHcJnIi/RNtGI2ENcKh5O8kgqTXqS7JG8NXkkxTOlLOW5hCepkLxMDUzdmzqeFpp2IG0yPTq9MYOSkZBxQqohTZO2Z+pn5mZ2y6xlhbL+xW6Lty8elQfJa7OQrAVZLQq2QqboVFoo1yoHsmdlV2a/zYnKOZarnivN7cyzytuQN5zvn//tEsIS4ZK2pYZLVy0dWOa9rGo5sjxxedsK4xUFK4ZWBqw8uIq2Km3VT6vtV5eufr0mek1rgV7ByoLBtQFr6wtVCuWFfevc1+1dT1gvWd+1YfqGnRs+FYmKrhTbF5cVf9go3HjlG4dvyr+Z3JS0qavEuWTPZtJm6ebeLZ5bDpaql+aXDm4N2dq0Dd9WtO319kXbL5fNKNu7g7ZDuaO/PLi8ZafJzs07P1SkVPRU+lQ27tLdtWHX+G7R7ht7vPY07NXbW7z3/T7JvttVAVVN1WbVZftJ+7P3P66Jqun4lvttXa1ObXHtxwPSA/0HIw6217nU1R3SPVRSj9Yr60cOxx++/p3vdy0NNg1VjZzG4iNwRHnk6fcJ3/ceDTradox7rOEH0x92HWcdL2pCmvKaRptTmvtbYlu6T8w+0dbq3nr8R9sfD5w0PFl5SvNUyWna6YLTk2fyz4ydlZ19fi753GDborZ752PO32oPb++6EHTh0kX/i+c7vDvOXPK4dPKy2+UTV7hXmq86X23qdOo8/pPTT8e7nLuarrlca7nuer21e2b36RueN87d9L158Rb/1tWeOT3dvfN6b/fF9/XfFt1+cif9zsu72Xcn7q28T7xf9EDtQdlD3YfVP1v+3Njv3H9qwHeg89HcR/cGhYPP/pH1jw9DBY+Zj8uGDYbrnjg+OTniP3L96fynQ89kzyaeF/6i/suuFxYvfvjV69fO0ZjRoZfyl5O/bXyl/erA6xmv28bCxh6+yXgzMV70VvvtwXfcdx3vo98PT+R8IH8o/2j5sfVT0Kf7kxmTk/8EA5jz/GMzLdsAAAAgY0hSTQAAeiUAAICDAAD5/wAAgOkAAHUwAADqYAAAOpgAABdvkl/FRgAAAg9JREFUeNp8ks1rE0EYxn9bE/xqikI0lITiQW+VImoONmCQtoonUbAglFDEUtlLxdo/wUNRD0Iw1kOIEmj6D9ir2FRQi4j0lILQJoimRfJB9mNmOx42iWsT+8Iw7DwPv32feUdTSuGtyeQKaT3GZHJlGEgA40AOyKT1WL6lt0rbC2hC9IFg7/a1c5HAib5Dc+WqOb/8pVjb3K4H03os6fVqXToYHgj2RiYun34KhD1S6c27jYeb2/ViWo/lW4c9dFYiPtgfMIQTNoRDw3YwbIeGcMLxwf5AM1a7fF0A436fL15pSNAUGqCUhqYp/P4Dc0AImNoPkNvaqX8MHDn4SkOBiwA0Kg1rHoh6zd0iZD4VyrWaKUpVQ1I1bSqGpGKI0udCuQZk/gu4+XhZpfXY2amRM88vnjq2vlMz7xn2biF41L8+FAl8f5a4cFw4u/mrj3KqK0BYNkDqzv3UyR6N32uFn9H334qhtY1fhyf0lzEgVd76oQDaEKVUe43NLirP97Rnn97rG5tdRCnldrCw9EFd0TNKNEwARmayCkg1tRdAavRBVo3OZAFwpMQR8m+E12+/YjcMzW4CpBsFF7AKgG1aCNM9l4bd9vjc7FZ73gDCtDpGIw27Oc5/9R6AuzeiSFsqRwjX7DH0hYK0fiKbHSSuDyEtq/MSu63zt56o/fRuL5HWxS4srTJ1+xL71Z8BAL+kU+9a36VRAAAAAElFTkSuQmCC",
includes:[]},$ContainersSection_HTML:{id:"ContainersSection_HTML",name:"HTML",iconBase64:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyBpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuMC1jMDYwIDYxLjEzNDc3NywgMjAxMC8wMi8xMi0xNzozMjowMCAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENTNSBXaW5kb3dzIiB4bXBNTTpJbnN0YW5jZUlEPSJ4bXAuaWlkOjVFNUZFNTNBNTk0QjExRTBBNkY0ODEzNDdCMzkxNTdDIiB4bXBNTTpEb2N1bWVudElEPSJ4bXAuZGlkOjVFNUZFNTNCNTk0QjExRTBBNkY0ODEzNDdCMzkxNTdDIj4gPHhtcE1NOkRlcml2ZWRGcm9tIHN0UmVmOmluc3RhbmNlSUQ9InhtcC5paWQ6NUU1RkU1Mzg1OTRCMTFFMEE2RjQ4MTM0N0IzOTE1N0MiIHN0UmVmOmRvY3VtZW50SUQ9InhtcC5kaWQ6NUU1RkU1Mzk1OTRCMTFFMEE2RjQ4MTM0N0IzOTE1N0MiLz4gPC9yZGY6RGVzY3JpcHRpb24+IDwvcmRmOlJERj4gPC94OnhtcG1ldGE+IDw/eHBhY2tldCBlbmQ9InIiPz5wB++kAAABAklEQVR42qRToQ7CMBC9LYhK5Bz9AyaHYhIHEomcYxI5iRwOOYkcDgkKWxxyuElwnSq5hpJ2tAvJXnK5vuvd60u7eUII6IOBTo67SafafH31foroQEWZR8IFVibis2/M+G3BV9NYTydkCJSGPy59WzOKtMMlYghUTwLsXsMsLQA4yIwc10GUyaBxLvusAuGigM3+BHFIJceMnFW182K/ApfbQ6jhdBnjoTLrIljjLgF9WIcu0ulgm8zgzCrID2ejATnWcV+htt3BdDzydBHOzWEaBLLGucMB4lQkXycIffivTxmBzYdsJdcqd8GHnmg5ILDfLrXHIpaHIwbz+v7ObwEGADGQtFOesBZAAAAAAElFTkSuQmCC",
includes:["\x3ca\x3e","\x3cdiv\x3e","\x3cspan\x3e","\x3ctable\x3e","\x3cstyle\x3e"]},$ContainersSection:{id:"Containers",name:"Containers",_COMMENT1_:"Desktop and mobile containers",_COMMENT2_:"Note that default desktop preset only include desktop widgets",_COMMENT3_:"and mobile preset only include mobile widgets",iconBase64:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAARJJREFUeNqkUzFuhEAMNFHqHAUEiU9Q0PKS3BNo6O9aJMQDqHkM4iG05CJdGgpgfXhvvVqyECHdSNaO7PWMsRYHEaGua+z7Hgi+7wPzLZh14kACZVniPM8yTM4xTZMOqpv8nZSEENqB+e/9DmIRJ6A6Xddd3aW8FFhcrFE/TifdaEHllymeAkQYQRBAURS7OwjDEFh2U6DrOrheLrDjDXmea64FxnHU4w7DIJt/bt+AAtVenqf36cs6/DcBc2piAUSxriszMn6DF2FNcAR45BM8z9tc5N+7lkAURZBl2a57HMe2gHxIajFt20JVVasHY06Spimcv87AfS8v0eG/sWkamUiSBJhvwawTd3bf+0E8BBgAL2nsdz3dOk4AAAAASUVORK5CYII\x3d",
subsections:["$ContainersSection_HTML"]},$ControlsSection_Buttons:{id:"Buttons",name:"Buttons",iconBase64:"data:image/gif;base64,R0lGODlhEAAQANUAAC5KhTFPijZXkDZYkDxhmTtimUJsouHr9/D1+0h2q0l3q7XQ7bbQ7bbQ7MLX79vo9k6AtE6Bs6TH6bbR7NLj9FKJu1OJulaNv5C95aTH6KTI6LXR7L/Z8Mje8laOv36z4X604JC95LnW77/a8Nzr9////wAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAACH5BAEAACUALAAAAAAQABAAAAZiwJJwSCwaj8hk0cP0XJpQj9ByqFqvVUSlFDk4vuCw4wApKR6MxmLCbm8mj0TJQNFI7nh8hmIoFTohGIKDgyEdBCUDHCAfHyCPkI0jAiUBIpeYmZckAUIAn6ChoEqkpaanRUEAOw\x3d\x3d",
includes:[["Button","\x3cbutton\x3e"]]},$ControlsSection_CheckboxesRadios:{id:"CheckboxesRadios",name:"Checkboxes, RadioButtons, Switch",iconBase64:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAP9JREFUeNpi/P//P8PGnQf/M5AJWGAMf3d7kjUDLUYYAAITd94kWnO+uzqqC2DAQkGAgYEDwpbg4ICLv/jxA8IAUicefMD0Agw8+ABRCNL7geEHXBwkHG4uD2avuPAAtwEQS4Cqf3DAtX8A2p5urw6Xv3DjBZzNhMuPP6Da0TUHdu5ksNCQwG0ASEO8uToYv/iAqtmxcSODAjCMBAQ48BuAHtIwzQZAmzUkBIBhzIHfCyBnIgNkzQJIMYPVAJACkDNBmghpxhoLEkD/CXBIgBUXzjzI4GCgAHE2B4GkDE8HLxDpQACq8cWHH4TzAnqgkZyZQBmDHMAIys6UAIAAAwBz81X4fS5oMgAAAABJRU5ErkJggg\x3d\x3d",
includes:[]},$ControlsSection_IconContainer:{id:"IconContainer",name:"IconContainer",_COMMENT1_:"Mobile-only",iconBase64:"data:image/gif;base64,R0lGODlhEAAQAMQAACVLiiVLiDlck/P2+zxhlzpppj9mnDh3xUJtokdzp3ak21ON0FCDvEp6rU6As1SKvFaOv////wAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAACH5BAEAABEALAAAAAAQABAAAAVoYBRBZGmWIjSsbMtC0TMo9FzTyvBEzrD8PuBvMXBEGoODMrlUHgaNSMJFXSUiiAGgwNByvV1ExFClGiIEWw6nHhAigiBxKB8I4MynM2/Hl1t3cQFfg12FfXF/LHdwAo6PkI4ik5SVkyEAOw\x3d\x3d",includes:[]},$ControlsSection_Pickers:{id:"Pickers",
name:"Pickers",iconBase64:"data:image/gif;base64,R0lGODlhEAAQANUAAKFMUiI5ZjxsuTlckz1jmj1jmVyL0T1kmUNvpERvpERuo0Rvo16W2jx7wEeO4Et7r0x7r26ayUt8r0x8rqrS+lGHuVKHuZXN/1aOv6u7yJypq+38++v6+aiysJ6uqWpNK5RcON6CV+esnbq2tf/X0t26tuxmXtaJhL+Zmf///wAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAACH5BAEAACkALAAAAAAQABAAAAZswJRwSCwSA8YhUrlMBpbPpjEqfCarUmlRezVivmBMKgweXyIMgUGMOafXKcvog2o4LKnKvH5PTUIgIh0UECkPgIIUEikLGQAnGxoJKQiOkBoKKQUcJSYkHgUpBJyeHgcpA6mqA6irqV2wsUJBADs\x3d",
includes:[]},$ControlsSection_Select:{id:"Select",name:"Select",iconBase64:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAVJJREFUeNpi/P//PwMlgAVEhPcf+E+RAb++fWeoz3QlqLhxxh6G+gwXBH/6bgYmEOPHp69gAVGGvwxijH8ZhP/9AbNhWJwRgn9+/AxWl5TYy/D61hOgvi8QF3z/8Akswc/JjGLjfwZGMM0IZIHY3z5ADDi4ogQs+23+XgZGUCBaRE4EByUjRBeUATOEASoANe4/0DhGqOh/aBjIm+kzfn37/n+IkxZJAbhm3zWIAX9//WHg4OVlMDBQZhD6+5doA7aceQQx4M/PnwywePRN6IVEDzsrAysnJwMHDxcDGxCDaFZODoZJqfZwA/78+AWLxh9wf+9cWkK0C359/wEx4DeQAXOBe3QPXhfAwKwsJ3D6gSckmAGHV5cT7YLf36AuADkFBmxDO4lyweJCZ7DLIbEADIz/0DA4vaGSeBcA9YETkpF/JyLNMGBJTXgAI6XZGSDAAJsyjhMJL+H/AAAAAElFTkSuQmCC",
includes:["Select","\x3cselect\x3e"]},$ControlsSection_SlidersSpinners:{id:"SlidersSpinners",name:"Sliders, Spinners",iconBase64:"data:image/gif;base64,R0lGODlhEAAQANUAAM7W5DdYkDteljpfloOcwUBonkBonUFonkdzqEdzp3CUv+Tt+EZzp9Xk9Njm9dvo9kx+sU1+sZ/E6K3M68re8tDh89fm9VKHuYO14pC95ZG95Z/F6KzM663N68ne8tDi89Xl9FaOv4O24pG+5aDJ6tXj76nR7v///wAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAACH5BAEAACcALAAAAAAQABAAAAZZwJNwSCwaj8ikcjkMOZ/J0KJBbSxCyMtnwulMPpdiKcSIUDZoiSfCCJWEERIB8RhpMppHglCBCA0mJgoHFiIYDgYKgQVCAAGPAQIgIAOQAQBIj0ybnJ2eJ0EAOw\x3d\x3d",
includes:[]},$ControlsSection_TextBox:{id:"TextBox",name:"TextBox",iconBase64:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAM1JREFUeNpi/P//PwMlgImBQkCxASzIHIvIif/lzfQZHp66yHBieT4jUSaAwgAZm0dM+I8uhg+DXRDefwAckqGWCmBD15x48H/18QcELV9Z6MAINuDPz98MtWmODBKcTAw9QL6NvhyDipoMXs0ts/chwuD39+9gDjfDfzgtyvAXe6hDQ+bXtx8IA94+eArmsLMywml+Bmbc4cbAyPD24VOEAX9//WLIyJ7KkBJiARZctPE0w5w1JxjoEgtM2NIBiCY2ITEO/bxAsQEAAQYAGVGarS2fPq4AAAAASUVORK5CYII\x3d",
includes:[["TextBox","\x3cinput\x3e"]]},$ControlsSection_Toolbars:{id:"Toolbars",name:"Toolbars, ButtonBars",iconBase64:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAOtJREFUeNpi/P//PwMlgAVEhPcf+E+RAX9+/mKoTXMiWXPTzH0MTCDGzy9f4YIxmZOIokHg19dvDIygMHAtWPq/vjQYLPgfCHecf8ngaSTOsP0cHtpQgqGxey3ECyCT3n/9CdINNsJCTZDh/ZdfcNoSRH9G8C1UBYDqfyBcYJowg7JAlJCVYGgu9CFZc+2ErRAD/v39BxZQ4STNgL9//kBi4R+QQQ749+cvzIC/ZBoAdcFfSl3w69t3sgwA6QMb8PsfeVH4599/aCwA00Jy2QIG5n+YJv1lYgKLw+h/QBqUaCBizJCERAkACDAAug6MMt3XrLUAAAAASUVORK5CYII\x3d",
includes:[]},$ControlsSection_Other:{id:"Other",name:"Other",iconBase64:"data:image/gif;base64,R0lGODlhEAAQANUAADlckzthmDxhl0BonkBonUVwpUp6rU+BtU+CtFOJu1OKu1aOv/b8//n9/8/t++/6//L7/+v5/+76//X8//j9/+v6/+77/+/7//L8//b9//X9//n+//j+///ovfvcsvTKofTJofbKo/TJo/TKo+20kOegfeeffuegfuWfff///wAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAACH5BAEAACkALAAAAAAQABAAAAZfwJRwSCwaj8ikUrloOp/QVIJErZIc2Kwiheh4v9dKpEI+pAyetPp6eVgsEkOq8AGNRKAQyoGB9DEFKQRWVHsTGgwaGQMpAiclJiYoJ3sNDRwbFAEpAJ2en6BLoqOkpEEAOw\x3d\x3d",
includes:[]},$ControlsSection:{id:"Controls",name:"Controls",_COMMENT1_:"each section can either have an array of subsections or an array of includes",iconBase64:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAIAAACQkWg2AAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyBpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuMC1jMDYwIDYxLjEzNDc3NywgMjAxMC8wMi8xMi0xNzozMjowMCAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENTNSBXaW5kb3dzIiB4bXBNTTpJbnN0YW5jZUlEPSJ4bXAuaWlkOjgyQUEwNTdCNTk1MTExRTBCODIzOTk0QzIzMzdBNkNGIiB4bXBNTTpEb2N1bWVudElEPSJ4bXAuZGlkOjgyQUEwNTdDNTk1MTExRTBCODIzOTk0QzIzMzdBNkNGIj4gPHhtcE1NOkRlcml2ZWRGcm9tIHN0UmVmOmluc3RhbmNlSUQ9InhtcC5paWQ6ODJBQTA1Nzk1OTUxMTFFMEI4MjM5OTRDMjMzN0E2Q0YiIHN0UmVmOmRvY3VtZW50SUQ9InhtcC5kaWQ6ODJBQTA1N0E1OTUxMTFFMEI4MjM5OTRDMjMzN0E2Q0YiLz4gPC9yZGY6RGVzY3JpcHRpb24+IDwvcmRmOlJERj4gPC94OnhtcG1ldGE+IDw/eHBhY2tldCBlbmQ9InIiPz7ZOYfnAAABBUlEQVR42pRSKxCDMAztdgjkJBKJnKxETk5WIpGTlcjKykpk5SSyEolETk4iI9eRrpSud7tF5NK8vHweHHoz38cHSdmVlhFkM5lN9W2dJDTKRJDNZBgxrum5oOdynB7j9NSC+aJhXjC4VCfrHQErLO0dsN2cBUDwjosOn0fyy2y19+8JsMDWjMA3QSkRPjMCW9GJ5CFWFzllu+qW1RmsXfHoW0OlNv7oYX52XRsS+rtVCbajrdGq9EeH2/rMQfZGaRPNxYwPdivpYRo1D8W+tAo3kVJ/Q+478Bt32UH5PSAFHWFVqVllRr/ploLc0VWRCyl2nT9BBDlZ8T8hKUYE/a3SS4ABAP4rm5Sxt9t9AAAAAElFTkSuQmCC",
subsections:"$ControlsSection_Buttons $ControlsSection_CheckboxesRadios $ControlsSection_Pickers $ControlsSection_Select $ControlsSection_TextBox $ControlsSection_Toolbars $ControlsSection_Other".split(" ")},$HTMLSection_Common:{id:"Common",name:"Common",iconBase64:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAALNJREFUeNpi/P//P4NUxvb/DGQCFhjj2QxPkjUDLWZgYqAQgA34//8fmNO74TIcwwCMjU2MAagPbADTv79wyeIAXTBG1oALMAL1gcOA8f9vgoqRDQWxIfr+QF3w9w95/v/7C+qCf78x/AezBa8XgC5gAKUDhZh5/8kBIH3QQPxNlhdALqdOOmD8+5vMQIS6gPH/X/K8ANQHDQMyoxEYC9CE9I9BI6SHdBeA9f7/T1EgAgQYAMdnhUefY5wVAAAAAElFTkSuQmCC",
includes:["\x3ca\x3e","\x3cdiv\x3e","\x3clabel\x3e","\x3cspan\x3e","\x3cstyle\x3e"]},$HTMLSection_Forms:{id:"Forms",name:"Forms",iconBase64:"data:image/png;base64,R0lGODlhEAAQAOYAAPT2/PH0+/n6/Iaavoyfwt/o+OLq+Onv+pOmxt/o9+bt+N7k7unv+e3y+sbT59/p+OLr+PD0+t/p9/D1+/f5+5DDvKfMxgBZSqfNxgJbSqjNxqjMxQZeSqjNxQZfSgpiSgphSg9mSrXSyRNrShNqSb3Vy5zKtp3Ktr3Wy5zKtZ3KtR1zSaDMtSJ3ScTYzSZ6SSZ7SSl+SSl9SSp+SSp9SaTNtCyASXt0T392ToV5TIx8SpOASKOIQ5yEReDIj97WwbSQPbCOPquLQNSyaNSyadq9fObav9Wyaf///////wAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAACH5BAEAAEkALAAAAAAQABAAAAeQgEmCg4SFhoeIhECLi4g2NklASEgCRECHNi40RpMURUdBgjAxMzIzKCUvSAgAPkVDQkktIrS1Ii0RExERATxJKx0bGhYdGMIrDgQDDT1JJBXQ0dAjDAwHDDtJISYnKSom3CEOCMoKOkkgHOoeLCwfCxAG8hA5hRk1HD8J+w8SBTiFLlxIcqOgwYKJEipcaCgQADs\x3d",
includes:"\x3cbutton\x3e \x3cfieldset\x3e \x3cform\x3e \x3cinput\x3e \x3cselect\x3e \x3ctextarea\x3e".split(" ")},$HTMLSection_Headers:{id:"Headers",name:"Headers",iconBase64:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAIpJREFUeNpi/P//PwMlgImBQkCxASwggtW3bzeQcgFiVx5NrT0gsS/Xr2GIwQBQbiaQSgPJkewCoOZyqGaEC4jUqASkQK5SIjcMlKC4Aoj34HLBbqBNuAy4B8TKwPC4B1TjgsuAs0D8Hso2BmJBmARIIzHRWAFUCAp1V6hhQyAhUWwA49DPTAABBgDGmykkJRol4AAAAABJRU5ErkJggg\x3d\x3d",
includes:["\x3ch1\x3e","\x3ch2\x3e","\x3ch3\x3e"]},$HTMLSection_ImagesMediaIframes:{id:"ImagesMediaIframes",name:"Media",iconBase64:"data:image/gif;base64,R0lGODlhEAAQANUAAOnn6f////7+/v39/fz8/Pr6+vn5+ff39/X19fT09PLy8vHx8e/v7+fn59/f397e3tvb29bW1sfHx8LCwsHBwby8vLq6urm5uba2trS0tLKysq2traKioqCgoJycnJSUlJKSkpGRkYuLi4qKiomJiYSEhHh4eHV1dXR0dGlpaWhoaFxcXP///wAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAACH5BAEAACwALAAAAAAQABAAAAaPQBYLNAQZjcJk0mgJOBeEkXI5jEwmHMJCNC1uIBNKxzTwEJWhocPxkAQIBgY3+QFpAJTJxnRarU5KRCANVxkcFygsJIEfGAx5eQoZSFQgCQkIlwREaUsgFwdXYQIXlEJpIAWiFAEfQ4EgFQFheQEWpq8gTrsBnLBNkBO2dWhDsxTIrSydQioqKc7P0iolQkEAOw\x3d\x3d",
includes:["\x3caudio\x3e","\x3cembed\x3e","\x3cimg\x3e","\x3ciframe\x3e","\x3cvideo\x3e"]},$HTMLSection_ParagraphsFormatting:{id:"ParagraphsFormatting",name:"Paragraphs",iconBase64:"data:image/gif;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAIAAACQkWg2AAAACXBIWXMAAAsTAAALEwEAmpwYAAAKT2lDQ1BQaG90b3Nob3AgSUNDIHByb2ZpbGUAAHjanVNnVFPpFj333vRCS4iAlEtvUhUIIFJCi4AUkSYqIQkQSoghodkVUcERRUUEG8igiAOOjoCMFVEsDIoK2AfkIaKOg6OIisr74Xuja9a89+bN/rXXPues852zzwfACAyWSDNRNYAMqUIeEeCDx8TG4eQuQIEKJHAAEAizZCFz/SMBAPh+PDwrIsAHvgABeNMLCADATZvAMByH/w/qQplcAYCEAcB0kThLCIAUAEB6jkKmAEBGAYCdmCZTAKAEAGDLY2LjAFAtAGAnf+bTAICd+Jl7AQBblCEVAaCRACATZYhEAGg7AKzPVopFAFgwABRmS8Q5ANgtADBJV2ZIALC3AMDOEAuyAAgMADBRiIUpAAR7AGDIIyN4AISZABRG8lc88SuuEOcqAAB4mbI8uSQ5RYFbCC1xB1dXLh4ozkkXKxQ2YQJhmkAuwnmZGTKBNA/g88wAAKCRFRHgg/P9eM4Ors7ONo62Dl8t6r8G/yJiYuP+5c+rcEAAAOF0ftH+LC+zGoA7BoBt/qIl7gRoXgugdfeLZrIPQLUAoOnaV/Nw+H48PEWhkLnZ2eXk5NhKxEJbYcpXff5nwl/AV/1s+X48/Pf14L7iJIEyXYFHBPjgwsz0TKUcz5IJhGLc5o9H/LcL//wd0yLESWK5WCoU41EScY5EmozzMqUiiUKSKcUl0v9k4t8s+wM+3zUAsGo+AXuRLahdYwP2SycQWHTA4vcAAPK7b8HUKAgDgGiD4c93/+8//UegJQCAZkmScQAAXkQkLlTKsz/HCAAARKCBKrBBG/TBGCzABhzBBdzBC/xgNoRCJMTCQhBCCmSAHHJgKayCQiiGzbAdKmAv1EAdNMBRaIaTcA4uwlW4Dj1wD/phCJ7BKLyBCQRByAgTYSHaiAFiilgjjggXmYX4IcFIBBKLJCDJiBRRIkuRNUgxUopUIFVIHfI9cgI5h1xGupE7yAAygvyGvEcxlIGyUT3UDLVDuag3GoRGogvQZHQxmo8WoJvQcrQaPYw2oefQq2gP2o8+Q8cwwOgYBzPEbDAuxsNCsTgsCZNjy7EirAyrxhqwVqwDu4n1Y8+xdwQSgUXACTYEd0IgYR5BSFhMWE7YSKggHCQ0EdoJNwkDhFHCJyKTqEu0JroR+cQYYjIxh1hILCPWEo8TLxB7iEPENyQSiUMyJ7mQAkmxpFTSEtJG0m5SI+ksqZs0SBojk8naZGuyBzmULCAryIXkneTD5DPkG+Qh8lsKnWJAcaT4U+IoUspqShnlEOU05QZlmDJBVaOaUt2ooVQRNY9aQq2htlKvUYeoEzR1mjnNgxZJS6WtopXTGmgXaPdpr+h0uhHdlR5Ol9BX0svpR+iX6AP0dwwNhhWDx4hnKBmbGAcYZxl3GK+YTKYZ04sZx1QwNzHrmOeZD5lvVVgqtip8FZHKCpVKlSaVGyovVKmqpqreqgtV81XLVI+pXlN9rkZVM1PjqQnUlqtVqp1Q61MbU2epO6iHqmeob1Q/pH5Z/YkGWcNMw09DpFGgsV/jvMYgC2MZs3gsIWsNq4Z1gTXEJrHN2Xx2KruY/R27iz2qqaE5QzNKM1ezUvOUZj8H45hx+Jx0TgnnKKeX836K3hTvKeIpG6Y0TLkxZVxrqpaXllirSKtRq0frvTau7aedpr1Fu1n7gQ5Bx0onXCdHZ4/OBZ3nU9lT3acKpxZNPTr1ri6qa6UbobtEd79up+6Ynr5egJ5Mb6feeb3n+hx9L/1U/W36p/VHDFgGswwkBtsMzhg8xTVxbzwdL8fb8VFDXcNAQ6VhlWGX4YSRudE8o9VGjUYPjGnGXOMk423GbcajJgYmISZLTepN7ppSTbmmKaY7TDtMx83MzaLN1pk1mz0x1zLnm+eb15vft2BaeFostqi2uGVJsuRaplnutrxuhVo5WaVYVVpds0atna0l1rutu6cRp7lOk06rntZnw7Dxtsm2qbcZsOXYBtuutm22fWFnYhdnt8Wuw+6TvZN9un2N/T0HDYfZDqsdWh1+c7RyFDpWOt6azpzuP33F9JbpL2dYzxDP2DPjthPLKcRpnVOb00dnF2e5c4PziIuJS4LLLpc+Lpsbxt3IveRKdPVxXeF60vWdm7Obwu2o26/uNu5p7ofcn8w0nymeWTNz0MPIQ+BR5dE/C5+VMGvfrH5PQ0+BZ7XnIy9jL5FXrdewt6V3qvdh7xc+9j5yn+M+4zw33jLeWV/MN8C3yLfLT8Nvnl+F30N/I/9k/3r/0QCngCUBZwOJgUGBWwL7+Hp8Ib+OPzrbZfay2e1BjKC5QRVBj4KtguXBrSFoyOyQrSH355jOkc5pDoVQfujW0Adh5mGLw34MJ4WHhVeGP45wiFga0TGXNXfR3ENz30T6RJZE3ptnMU85ry1KNSo+qi5qPNo3ujS6P8YuZlnM1VidWElsSxw5LiquNm5svt/87fOH4p3iC+N7F5gvyF1weaHOwvSFpxapLhIsOpZATIhOOJTwQRAqqBaMJfITdyWOCnnCHcJnIi/RNtGI2ENcKh5O8kgqTXqS7JG8NXkkxTOlLOW5hCepkLxMDUzdmzqeFpp2IG0yPTq9MYOSkZBxQqohTZO2Z+pn5mZ2y6xlhbL+xW6Lty8elQfJa7OQrAVZLQq2QqboVFoo1yoHsmdlV2a/zYnKOZarnivN7cyzytuQN5zvn//tEsIS4ZK2pYZLVy0dWOa9rGo5sjxxedsK4xUFK4ZWBqw8uIq2Km3VT6vtV5eufr0mek1rgV7ByoLBtQFr6wtVCuWFfevc1+1dT1gvWd+1YfqGnRs+FYmKrhTbF5cVf9go3HjlG4dvyr+Z3JS0qavEuWTPZtJm6ebeLZ5bDpaql+aXDm4N2dq0Dd9WtO319kXbL5fNKNu7g7ZDuaO/PLi8ZafJzs07P1SkVPRU+lQ27tLdtWHX+G7R7ht7vPY07NXbW7z3/T7JvttVAVVN1WbVZftJ+7P3P66Jqun4lvttXa1ObXHtxwPSA/0HIw6217nU1R3SPVRSj9Yr60cOxx++/p3vdy0NNg1VjZzG4iNwRHnk6fcJ3/ceDTradox7rOEH0x92HWcdL2pCmvKaRptTmvtbYlu6T8w+0dbq3nr8R9sfD5w0PFl5SvNUyWna6YLTk2fyz4ydlZ19fi753GDborZ752PO32oPb++6EHTh0kX/i+c7vDvOXPK4dPKy2+UTV7hXmq86X23qdOo8/pPTT8e7nLuarrlca7nuer21e2b36RueN87d9L158Rb/1tWeOT3dvfN6b/fF9/XfFt1+cif9zsu72Xcn7q28T7xf9EDtQdlD3YfVP1v+3Njv3H9qwHeg89HcR/cGhYPP/pH1jw9DBY+Zj8uGDYbrnjg+OTniP3L96fynQ89kzyaeF/6i/suuFxYvfvjV69fO0ZjRoZfyl5O/bXyl/erA6xmv28bCxh6+yXgzMV70VvvtwXfcdx3vo98PT+R8IH8o/2j5sfVT0Kf7kxmTk/8EA5jz/GMzLdsAAAAEZ0FNQQAAsY58+1GTAAAAIGNIUk0AAHolAACAgwAA+f8AAIDpAAB1MAAA6mAAADqYAAAXb5JfxUYAAAHGSURBVHjaZFLJbhNREKx+b2Yc7xs2EEVZlEgR4oKEOHLiH/gEfokP4EM4I0UcEApCkYAoIDlWGC9je2ymFw4zA9jUqaWu6up6r+nT1XWn1QDAnMEU2/BB5HxoxjAAmM4XQb/TGtzrcBprfOXC2l8ugVnHox+9w6eN7kGhdy4QVQCrZB7WjqOykYMZy9E0vXg9fPKqOzgCIKou76kZs6w2WbL6laRZkmarDXNmlfqg2xvefngzGX/NbYNimkFU3328niTrMKrA+Ua18vzRg73W4ab20iq38eimOzwBSoGamWLQaVSj0PuAnAO591/uWG2/1z46aU++X+bMPw7GgpvxLJ4tgzByPiDnyXkxNKt7+83Iygd0JR/MCjgiclTAERHBDBmriG05qGrG+uLZuUk5oIQYVou5qm4JzCCii1QlYxBgAIEAGMg7EdUdBzMTsbcXn+N5EoYR+ZCcd96z4Pygd9orvuvfDMZS7GEglBUoNzfV3Qym8I/PjjebdZ4WRCAyo2atwpLuCgDcfbvsCwfCO6GXoFUyrQfrQuCdA/Dw+CyKIsDyRXZg9xvt/rA4vp/TuagSka8PczL9JyDQbC26jKezxe8BAJ6U+/2r7MIJAAAAAElFTkSuQmCC",
includes:"\x3cb\x3e \x3cbr\x3e \x3cem\x3e \x3chr\x3e \x3ci\x3e \x3cp\x3e \x3cs\x3e \x3cstrong\x3e \x3cu\x3e".split(" ")},$HTMLSection_Tables:{id:"Tables",name:"Tables",iconBase64:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAXhJREFUeNrEUz1LA0EQnTvzO/wPYsBOrQW109ImpLPIL9DWKqQQRESEFGKjYmGwEyQggUTBRn+BIhFFTXK53Z1xZi53ulcpKdxjmXnD7Lv39iMgIhhnhDDmKKTJavXyz1KOKvNBRkCIsFWe09wxFbI1iTEy5ppB0shB69v1K18BOdTYvHvUZm1k0oi7rUwhIIkAs8VJQESfwMQxVGoXv5Le7jxAwF/yZ2aVubRxRjKYmWJrqXZyQ/3I0HtvSG8fA8Xd1z49v/ToqftJi5va/30KJhqOyGQ/WL6xCcZkCkakrMcOopyFKGKvCGLNslFrDMTGqX8hECz7AKN7YwZDnwC5uXp47XndPW17uN64zXK0zidwzsH6yozKNKxg57gFpeUi11EtHZx3YG1hKiNoNO9zx8iMcjRigWQFYuJfVAMp/jmcRf8qG90sUAWoEWUZpG8FcwRICQ7ShunSniYToiIMIb3XguXELdcKnEtM6639chD8+2v8EmAA9/wqJKl9P7kAAAAASUVORK5CYII\x3d",
includes:["\x3ctable\x3e"]},$HTMLSection:{id:"HTML",name:"HTML",iconBase64:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyBpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuMC1jMDYwIDYxLjEzNDc3NywgMjAxMC8wMi8xMi0xNzozMjowMCAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENTNSBXaW5kb3dzIiB4bXBNTTpJbnN0YW5jZUlEPSJ4bXAuaWlkOjVFNUZFNTNBNTk0QjExRTBBNkY0ODEzNDdCMzkxNTdDIiB4bXBNTTpEb2N1bWVudElEPSJ4bXAuZGlkOjVFNUZFNTNCNTk0QjExRTBBNkY0ODEzNDdCMzkxNTdDIj4gPHhtcE1NOkRlcml2ZWRGcm9tIHN0UmVmOmluc3RhbmNlSUQ9InhtcC5paWQ6NUU1RkU1Mzg1OTRCMTFFMEE2RjQ4MTM0N0IzOTE1N0MiIHN0UmVmOmRvY3VtZW50SUQ9InhtcC5kaWQ6NUU1RkU1Mzk1OTRCMTFFMEE2RjQ4MTM0N0IzOTE1N0MiLz4gPC9yZGY6RGVzY3JpcHRpb24+IDwvcmRmOlJERj4gPC94OnhtcG1ldGE+IDw/eHBhY2tldCBlbmQ9InIiPz5wB++kAAABAklEQVR42qRToQ7CMBC9LYhK5Bz9AyaHYhIHEomcYxI5iRwOOYkcDgkKWxxyuElwnSq5hpJ2tAvJXnK5vuvd60u7eUII6IOBTo67SafafH31foroQEWZR8IFVibis2/M+G3BV9NYTydkCJSGPy59WzOKtMMlYghUTwLsXsMsLQA4yIwc10GUyaBxLvusAuGigM3+BHFIJceMnFW182K/ApfbQ6jhdBnjoTLrIljjLgF9WIcu0ulgm8zgzCrID2ejATnWcV+htt3BdDzydBHOzWEaBLLGucMB4lQkXycIffivTxmBzYdsJdcqd8GHnmg5ILDfLrXHIpaHIwbz+v7ObwEGADGQtFOesBZAAAAAAElFTkSuQmCC",
subsections:"$HTMLSection_Common $HTMLSection_Forms $HTMLSection_Headers $HTMLSection_ImagesMediaIframes $HTMLSection_ParagraphsFormatting $HTMLSection_Tables".split(" ")},$AppOtherSection:{id:"Other",name:"Other",iconBase64:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAcFJREFUeNqcUj1IQlEUPjfc+llqCEKwpaCgrJZqKOhnqiChsbQhF+f2moqgpaH2rDEqiiCwBB2sRbJArYa0hohSCLTQ93rvds95710VHaIDx/P5ne+ce869j3HOAW039MCPr9PwV5sddIBntJPZLAKLV+eHCDMpY2UlnP5bvyv7V9gA6qx04bMAmbwKmZwiXIWPvAI9bY0iFikSh7m8QhrUo9nKx8IknsTFGYyXcwDvohHDgbgxhWUVDbJfijE23osIO+Fnmnw79CKKzTJswEot5Aq+uV6Ix+6FJ8HewCESjJIjTtwmKWev5xAXOCEw6o2G4jR039Y5z+WK5H/FWCdX4HppLEykMtkqrJu4vaWZML2T9R2cRtP8LJygS5wa6QYDg8BdNbChmRlwMLmCd/NUjmfhu9Qr4enlALl384Q4S4N18hJ1XYeaWNMk1rRqTcUKR4Ebwq7JPiAsnss10Q9HFyY/YfKmpmKFpY0T/v2tkrvXDig+vWX54vohRXTUYMScR2gqXqGoFEqvYI7X2tQkxv6hSBq1IHHVCoHII/cHY/QJL4w7wX8ZI94t8J7gUYYYNcSPOWFyuIPJBv+1XwEGAJJgewSkj0bcAAAAAElFTkSuQmCC",
includes:["$$AllOthers$$"]},$SketchOtherSection:{id:"Other",name:"Other",iconBase64:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAcFJREFUeNqcUj1IQlEUPjfc+llqCEKwpaCgrJZqKOhnqiChsbQhF+f2moqgpaH2rDEqiiCwBB2sRbJArYa0hohSCLTQ93rvds95710VHaIDx/P5ne+ce869j3HOAW039MCPr9PwV5sddIBntJPZLAKLV+eHCDMpY2UlnP5bvyv7V9gA6qx04bMAmbwKmZwiXIWPvAI9bY0iFikSh7m8QhrUo9nKx8IknsTFGYyXcwDvohHDgbgxhWUVDbJfijE23osIO+Fnmnw79CKKzTJswEot5Aq+uV6Ix+6FJ8HewCESjJIjTtwmKWev5xAXOCEw6o2G4jR039Y5z+WK5H/FWCdX4HppLEykMtkqrJu4vaWZML2T9R2cRtP8LJygS5wa6QYDg8BdNbChmRlwMLmCd/NUjmfhu9Qr4enlALl384Q4S4N18hJ1XYeaWNMk1rRqTcUKR4Ebwq7JPiAsnss10Q9HFyY/YfKmpmKFpY0T/v2tkrvXDig+vWX54vohRXTUYMScR2gqXqGoFEqvYI7X2tQkxv6hSBq1IHHVCoHII/cHY/QJL4w7wX8ZI94t8J7gUYYYNcSPOWFyuIPJBv+1XwEGAJJgewSkj0bcAAAAAElFTkSuQmCC",
includes:"Calendar ColorPalette GridX RichText StickyNote Tree $$AllOthers$$".split(" ")},$mobileSections:"$ControlsSection $ContainersSection $HTMLSection $ClipartSection $XBLOXSection $DrawingToolsSection $AppOtherSection".split(" "),$desktopSections:"$ContainersSection $ControlsSection $ViewsSection $HeadingSection $HTMLSection $ClipartSection $XBLOXSection $DrawingToolsSection $AppOtherSection".split(" "),$sketchSections:"$DrawingToolsSection $ClipartSection $ControlsSection $ContainersSection $HTMLSection $HeadingSection $SketchOtherSection".split(" "),
$sketchExcludes:[],$ALLMOBILE_Sections:[],$ALLDESKTOP_Sections:"$ContainersSection $ControlsSection $ViewsSection $HeadingSection $HTMLSection $ClipartSection $XBLOXSection $DrawingToolsSection $AppOtherSection".split(" "),$deliteSections:["$HTMLSection","$XBLOXSection","$DELITESection"],$ALLDELITE_Sections:["$HTMLSection","$XBLOXSection","$DELITESection"],$DELITESection_Controls:{id:"delite",name:"Controls",iconBase64:"data:image/gif;base64,R0lGODlhEAAQALMAAN7e4oyMjtXV1sDAwf///+Dg4MvLyzMzM////wAAAAAAAAAAAAAAAAAAAAAAAAAAACH5BAEAAAgALAAAAAAQABAAAAQ3EMlJq704a3RO2NIhBIexHYRgeFTndkQ8HmER33g60EcB/ECcYBd6wWSkDErFUs5Mms4HRK1SIwA7",
includes:"Button Slider Combobox Select Checkbox RadioButton Switch ToggleButton MediaPlayer".split(" ")},$DELITESection_Containers:{id:"delite",name:"Containers",iconBase64:"data:image/gif;base64,R0lGODlhEAAQALMAAN7e4oyMjtXV1sDAwf///+Dg4MvLyzMzM////wAAAAAAAAAAAAAAAAAAAAAAAAAAACH5BAEAAAgALAAAAAAQABAAAAQ3EMlJq704a3RO2NIhBIexHYRgeFTndkQ8HmER33g60EcB/ECcYBd6wWSkDErFUs5Mms4HRK1SIwA7",includes:["ViewStack","Panel","TabBar","Accordion"]},$DELITESection:{id:"delite",name:"Deliteful",iconBase64:"data:image/gif;base64,R0lGODlhEAAQAKIAAFhYWtXV1v///0BAQP///wAAAAAAAAAAACH5BAEAAAQALAAAAAAQABAAAAMuSLo0w5CNIF6EM9grN2+Z82WCEGjcVJbopa5tlJ2nh4W2XH9LyCu+X/AHAPyOCQA7",
subsections:["$DELITESection_Controls","$DELITESection_Containers"],includes:[]}},_COMMENT11_:"Should have one each for mobile, desktop, sketchhifi, sketchlofi",_COMMENT12_:"For each preset, collections is list of each widget collection in order of precedence",_COMMENT13_:"and sections is the array of sections for this preset (or $desktopSections)",presets:{desktop:{collections:[{id:"html",show:!0},{id:"clipart",show:!0},{id:"xblox",show:!0},{id:"shapes",show:!0},{id:"delite",show:!0}],sections:"$desktopSections"},
delite:{collections:[{id:"html",show:!0},{id:"xblox",show:!0},{id:"delite",show:!0},{id:"shapes",show:!0},{id:"clipart",show:!0}],sections:"$deliteSections"},$ALLDESKTOP:{_COMMENT1_:"$ALLDESKTOP is a special preset which shows all widgets",_COMMENT2_:"regardless of the current composition type",_COMMENT3_:"ranking desktop widgets above mobile widgets",collections:[{id:"html",show:!0},{id:"clipart",show:!0},{id:"xblox",show:!0},{id:"shapes",show:!0}],sections:"$ALLDESKTOP_Sections"},$ALLDELITE:{_COMMENT1_:"$ALLDESKTOP is a special preset which shows all widgets",
_COMMENT2_:"regardless of the current composition type",_COMMENT3_:"ranking desktop widgets above mobile widgets",collections:[{id:"html",show:!0},{id:"clipart",show:!0},{id:"xblox",show:!0},{id:"shapes",show:!0},{id:"delite",show:!0}],sections:"$ALLDELITE_Sections"}}}:this._initializationInfo[a]},getDefaultThemeSet:function(){return this.getSiteConfigData("defaultThemeSet")},getUserDisplayName:function(a){a||(a=this.getUser());var k=a.userDisplayName;a.userDisplayName||(k=a.email);return k},getUserEmail:function(a){a||
(a=this.getUser());return a.email},getUserDisplayNamePlusEmail:function(a){a||(a=this.getUser());var k=this.getUserDisplayName(a);k!=a.email&&(k+=" \x26lt;"+a.email+"\x26gt;");return k},loadPlugins:function(){c.forEach(function(q){var k=q.id;a.plugins[k]=q;for(var d in q){var b=q[d];"string"!=typeof b&&(b instanceof Array?b.forEach(function(b){a._addExtension(d,b,k)}):a._addExtension(d,b,k))}})},singleUserMode:function(){return a.isLocalInstall},_stripMaqetta:!0,location:function(){var a=document.location.href.split("?")[0],
a=a.replace("index.php",""),a=a.replace("maqetta.html",""),a=a.replace("xui.php",""),a=a.replace("xui.php?debug\x3dtrue",""),a=a.replace("maqettar.html",""),a=a.replace("index.html",""),a=a.replace("?",""),a=a.replace("debug\x3dtrue",""),a=a.replace("\x26isDesktop\x3dtrue","");this._stripMaqetta&&(a=a.replace("maqetta/",""));return a},getUserWorkspaceUrl:function(){if(this.userBaseUrl)return this.userBaseUrl},run:function(){dojo.isMac&&dojo.addClass(document.documentElement,"isMac");var c=document.body.style;
a.supportsCSS3Transitions=void 0!==c.WebkitTransition||void 0!==c.MozTransition||void 0!==c.OTransition||void 0!==c.transition;a.subscribe("/davinci/ui/selectionChanged",a._selectionChanged);dojo.connect(dojo.doc.documentElement,"onkeypress",function(a){8==a.charOrCode&&(window.davinciBackspaceKeyTime=Date.now())});dojo.connect(dojo.doc.documentElement,"onkeydown",this,"_handleGlobalDocumentKeyEvent");dojo.addOnUnload(function(a){for(var d=null,b=davinci.Workbench&&davinci.Workbench.editorTabs?davinci.Workbench.editorTabs.getChildren():
[],n=0,k=0;k<b.length;k++){var c=b[k];c.editor&&(c=c.editor.getOnUnloadWarningMessage())&&(d||(d=c),n++)}1<n&&(d=dojo.string.substitute(p.multipleFilesUnsaved,[d,n]));!d&&100>Date.now()-window.davinciBackspaceKeyTime&&(d=p.careful);if(d){if(a=a||window.event)a.returnValue=d;return d}})},subscribe:function(c,k){a.subscriptions.push(dojo.subscribe(c,this,k))},destroy:function(){dojo.forEach(a.subscriptions,dojo.unsubscribe)},_addExtension:function(c,k,d){k.id&&(k.id=d+"."+k.id);a.extensionPoints[c]=
a.extensionPoints[c]||[];d=a.extensionPoints[c];d.push(k);a.extensionPoints[c]=d},getExtensions:function(c,k){c=a.extensionPoints[c];if(k){var d=k instanceof Function;if(c)return c.filter(function(b){return d&&k(b)||b.id==k})}return c},getExtension:function(c,k){return a.getExtensions(c,k)[0]},handleError:function(c){var k="welcome";a.singleUserMode()&&(k=".");window.document.body.innerHTML=dojo.string.substitute(p.serverConnectError,{redirectUrl:k,error:c})},executeCommand:function(c){(c=a.getExtension("davinci.commands",
c))&&c.run&&c.run()},_selectionChanged:function(c){a.currentSelection=c},getSelection:function(){return a.currentSelection},serverJSONRequest:function(a){var k,d={handleAs:"json"};dojo.mixin(d,a);dojo.xhrGet(d).then(function(b){b&&(k=b)});return k},registerKeyBinding:function(a,k){this._globalKeyBindings||(this._globalKeyBindings=[]);this._globalKeyBindings.push({keyBinding:a,action:k})},handleKeyEvent:function(a){this._handleKeyEvent(a,!0)},_handleGlobalDocumentKeyEvent:function(a){this._handleKeyEvent(a)},
_handleKeyEvent:function(c,k){if(this._globalKeyBindings){var d=!1;(d=dojo.some(this._globalKeyBindings,dojo.hitch(this,function(b){if(a.isKeyEqualToEvent(b.keyBinding,c))return davinci.Workbench._runAction(b.action),!0})))?dojo.stopEvent(c):k||this.currentEditor&&this.currentEditor.handleKeyEvent&&this.currentEditor.handleKeyEvent(c,!0)}},isKeyEqualToEvent:function(a,k){var d=!0,b=k.altKey&&!dojo.isMac||dojo.isMac&&k.ctrlKey;!!a.accel!==(k.ctrlKey&&!dojo.isMac||dojo.isMac&&k.metaKey)&&(d=!1);!!a.meta!==
b&&(d=!1);!!a.shift!==k.shiftKey&&(d=!1);d&&a.charOrCode&&k.which&&(d=dojo.isArray(a.charOrCode)?dojo.some(a.charOrCode,dojo.hitch(this,function(b){return this._comparecharOrCode(b,k)})):this._comparecharOrCode(a.charOrCode,k));return d},_comparecharOrCode:function(a,k){return dojo.isString(a)?a.toLowerCase()===String.fromCharCode(k.which).toLowerCase():a===k.which}};return a})},"davinci/lang/webContent":function(){define([],function(){return{designer:"Designer,",welcome:"Welcome",loadingMaqetta:"\x26nbsp;Loading Maqetta...",
startupError:"Error starting Maqetta: ${0}",logOff:"Log Out",unsupportedBrowser:"Unsupported Browser",unsupportedNote:'Maqetta supports Firefox 4, Chrome 5, and Safari 5.1 or greater. If you wish to continue with an unsupported browser, click "Continue."',buttonContinue:"Continue",pageDesignerTitle:"Maqetta Designer",maqettaUser:"Maqetta User",localhostUser:"localhost user",sessionTimedOut:"Session timed out",sessionTimedOutMsg:"The session has timed out, please \x3ca href\x3d'${hrefLoc}'\x3elog in\x3c/a\x3e again. (Auto-redirect within 10 seconds)",
devicePreviewError:"Maqetta device previewer error. Must supply URL parameter 'file\x3d'",devicePreviewPreviewing:"Previewing:",help:"Help",tutorials:"Tutorials",aboutMaqetta:"About Maqetta",review:"Review and Commenting,",reviewPageTitle:"Maqetta Review Board",careful:"Warning: You are about to leave Maqetta.",errorLoadingPlugin:"error loading plugin ${0}, response\x3d${1}",errorLoadingPlugins:"error loading plugins",multipleFilesUnsaved:"${0} (NOTE: This is one of ${1} files with unsaved changes.)",
idleSessionMessage:"Your session will timeout in ${seconds} seconds, click anywhere in the page to continue using Maqetta.",fileHasUnsavedChanges:"Save changes to ${0}?",perspectiveNotFound:"perspective not found: ${0}",scopeNotDefined:"scope not defined for action: ${0}",funcNotDefined:"function not defined for action: ${0}",serverConnectError:"\x3ch3\x3eError connecting to the Maqetta Server.\x3c/h3\x3e\x3cbr\x3e\x3cdiv\x3ePlease click here to \x3ca href\x3d'${redirectUrl}'\x3ereturn to Maqetta\x3c/a\x3e\x3cdiv\x3e\x3cdiv\x3eError description: ${error}\x3c/div\x3e"}})},
"davinci/commands/CommandStack":function(){define(["dojo/_base/declare"],function(p){return p("davinci.commands.CommandStack",null,{constructor:function(m){this._context=m;this._undoStack=[];this._redoStack=[]},execute:function(m,h){if(m&&(h=this._context&&"davinci.ve.themeEditor.Context"!=this._context.declaredClass?dojo.withDoc(this._context.getDocument(),"execute",m,[this._context,h]):m.execute(h),this._undoStack.push(m),this._redoStack=[],!h))this.onExecute(m,"execute")},undo:function(){if(this.canUndo()){var m=
this._undoStack.pop();m._runDelegate?m._runDelegate.undoDelegate(m):this._context&&"davinci.ve.themeEditor.Context"!=this._context.declaredClass?dojo.withDoc(this._context.getDocument(),"undo",m):m.undo();this._redoStack.push(m);this.onExecute(m,"undo")}},redo:function(){if(this.canRedo()){var m=this._redoStack.pop();m._runDelegate?m._runDelegate.redoDelegate(m):this._context&&"davinci.ve.themeEditor.Context"!=this._context.declaredClass?dojo.withDoc(this._context.getDocument(),"execute",m):m.execute();
this._undoStack.push(m);this.onExecute(m,"redo")}},canUndo:function(){return 0<this._undoStack.length},canRedo:function(){return 0<this._redoStack.length},getUndoCount:function(){return this._undoStack.length},getRedoCount:function(){return this._redoStack.length},clear:function(){this._undoStack=[];this._redoStack=[]},jump:function(m,h){var g=this.getUndoCount(),f=this.getRedoCount();if(m==g)return m;if(0>m||m>g+f)return-1;g=m-g;if(h)if(0>g)for(;0>g;)this._redoStack.push(this._undoStack.pop()),g++;
else for(;0<g;)this._undoStack.push(this._redoStack.pop()),g--;else if(0>g)for(;0>g;)this.undo(),g++;else for(;0<g;)this.redo(),g--;return m},onExecute:function(m,h){},undoDelegate:function(m){},redoDelegate:function(m){}})})},"davinci/ui.plugin":function(){define(["require"],function(p){return{id:"davinci.ui","davinci.view":[{id:"navigator",title:"Files",viewClass:"davinci/workbench/Explorer",iconClass:"paletteIcon paletteIconFiles"},{id:"hierarchy",title:"Hierarchy"},{id:"devices",title:"Devices",
viewClass:"davinci/workbench/DeviceTreeView",iconClass:"paletteIcon paletteIconOutline"},{id:"files",title:"XFiles",viewClass:"davinci/workbench/FileView",iconClass:"paletteIcon paletteIconOutline"},{id:"comment",title:"Comments",viewClass:"davinci/review/view/CommentView",iconClass:"paletteIcon paletteIconComments"},{id:"scope",title:"Scope"},{id:"properties",title:"Properties",viewClass:"davinci/workbench/PropertyEditor"},{id:"console",title:"Console"},{id:"history",title:"History"},{id:"search",
title:"Search"}],"davinci.preferences":[{name:"Project",id:"project",hide:!0,category:"",pageContent:"Project Settings here"},{name:"Project Settings",id:"ProjectPrefs",category:"davinci.ui.project",pane:"davinci/ui/ProjectPreferences",defaultValues:{webContentFolder:"",themeFolder:"themes",widgetFolder:"lib/custom"}}],"davinci.perspective":{id:"main",title:"AJAX IDE",views:[{viewID:"davinci.ui.navigator",position:"left-bottom"},{viewID:"davinci.ui.outline",position:"right"},{viewID:"davinci.ui.properties",
position:"right-bottom"}]},"davinci.actionSets":[{id:"editorActions",visible:!0,menu:[],actions:[]},{id:"main",visible:!0,menu:[{__mainMenu:!0,separator:["usersettings",!1,"settings",!1,"additions",!1,"help",!1]},{label:"User settings",path:"usersettings",id:"davinci.usersettings",className:"userSettingsMenu",iconClass:"userSettingsMenuIcon",showLabel:!1,separator:["username",!0,"logout",!0,"additions",!1]},{label:"Settings",path:"settings",id:"davinci.settings",className:"appSettingsMenu",iconClass:"appSettingsMenuIcon",
showLabel:!1,separator:["settings",!0,"additions",!1]}],actions:[{id:"editPreferences",run:function(){p(["davinci/workbench/Preferences"],function(m){m.showPreferencePage()})},label:"Preferences...",menubarPath:"davinci.settings/settings"}]},{id:"explorerActions",visible:!0,actions:[{id:"davinci.ui.rename",label:"Rename...",iconClass:"renameIcon",run:function(){p(["./ui/Resource"],function(m){m.renameAction()})},isEnabled:function(m){return p("./ui/Resource").canModify(m)},menubarPath:"addFiles"},
{id:"davinci.ui.delete",label:"Delete",iconClass:"deleteIcon",isEnabled:function(m){return p("./ui/Resource").canModify(m)},run:function(){p(["./ui/Resource"],function(m){m.deleteAction()})},menubarPath:"delete",keyBinding:{charOrCode:[dojo.keys.DELETE,dojo.keys.BACKSPACE]}},{id:"davinci.ui.download",label:"Download",iconClass:"downloadSomeIcon",action:"davinci/actions/DownloadAction",isEnabled:function(m){return p("./ui/Resource").canModify(m)},menubarPath:"delete"}]}],"davinci.actionSetPartAssociations":[{targetID:"davinci.ui.editorActions",
parts:["davinci.ui.editorMenuBar"]},{targetID:"davinci.ui.explorerActions",parts:["davinci.ui.navigator"]}],"davinci.viewActions":[{viewContribution:{targetID:"davinci.ui.problems",actions:[{id:"Copy2",iconClass:"copyIcon",run:function(){alert("view toolbar")},label:"Copy",toolbarPath:"davinci.toolbar.main/edit",menubarPath:"davinci.edit/cut"}]}},{viewContribution:{targetID:"workbench.Explorer",actions:[{id:"davinci.ui.newfile",label:"New folder...",iconClass:"newFolderIcon",className:"FilesToolbarNewFolder",
run:function(){p(["./ui/Resource"],function(m){m.newFolder()})},toolbarPath:"download"},{id:"davinci.ui.deletefile",label:"Delete file...",iconClass:"FilesToolbarDeleteFileIcon",className:"FilesToolbarDeleteFile",run:function(){p(["./ui/Resource"],function(m){m.deleteAction()})},toolbarPath:"download"},{id:"davinci.ui.renamefile",label:"Rename file...",iconClass:"FilesToolbarRenameFileIcon",className:"FilesToolbarRenameFile",run:function(){p(["./ui/Resource"],function(m){m.renameAction()})},toolbarPath:"download"},
{id:"download",iconClass:"downloadSomeIcon",className:"FilesToolbarDownloadSelected",run:function(){p(["./Workbench","./ui/DownloadSelected"],function(m,h){m.showModal(new h,"Download",{width:440})})},label:"Download Selected Files",toolbarPath:"download"},{id:"download",iconClass:"downloadAllIcon",className:"FilesToolbarDownloadAll",run:function(){p(["./Workbench","./ui/Download"],function(m,h){m.showModal(new h,"Download",{width:440})})},label:"Download Entire Project",toolbarPath:"download"}]}}]}})},
"davinci/html/html.plugin":function(){define(["require"],function(p){return{id:"davinci.html","davinci.editor":[{id:"HTMLEditor",name:"HTML Editor",extensions:"html",isDefault:!1,editorClass:"davinci/html/ui/HTMLEditor",palettePerspective:"davinci.html.htmlEditor",expandPalettes:["left"]},{id:"CSSEditor",name:"CSS Editor",extensions:"css",isDefault:!1,editorClass:"davinci/html/ui/CSSEditor",palettePerspective:"davinci.html.htmlEditor",expandPalettes:["left"]},{id:"ImageViewer",name:"Image Viewer",
extensions:"jpg,gif,jpeg,png",isDefault:!0,editorClass:"davinci/html/ui/ImageViewer",palettePerspective:"davinci.html.htmlEditor",expandPalettes:["left"]}],"davinci.editorActions":{editorContribution:{targetID:"davinci.html.CSSEditor",actions:[{id:"savecombo",className:"maqLabelButton",showLabel:!0,label:"Save",toolbarPath:"save",type:"ComboButton",run:function(){p(["../Workbench"],function(m){p("../ui/Resource").save()})},isEnabled:function(m){return p("../Workbench").getOpenEditor()},menu:[{iconClass:"saveIcon",
run:function(){p("../ui/Resource").save()},isEnabled:function(m){return p("../Workbench").getOpenEditor()},label:"Save",keyBinding:{accel:!0,charOrCode:"s",allowGlobal:!0}},{iconClass:"saveAsIcon",run:function(){p("../ui/Resource").saveAs("html")},isEnabled:function(m){return p("../Workbench").getOpenEditor()},label:"Save As",keyBinding:{accel:!0,shift:!0,charOrCode:"s",allowGlobal:!0}}]}]}},"davinci.preferences":[{name:"HTML",id:"general",category:""}],"davinci.fileType":[{extension:"html",iconClass:"htmlFileIcon",
type:"text"},{extension:"css",iconClass:"cssFileIcon",type:"text"},{extension:"jpeg",iconClass:"imageFileIcon",type:"image"},{extension:"jpg",iconClass:"imageFileIcon",type:"image"},{extension:"png",iconClass:"imageFileIcon",type:"image"},{extension:"gif",iconClass:"imageFileIcon",type:"image"}],"davinci.perspective":[{id:"htmlEditor",title:"HTML Editor",views:[{viewID:"davinci.ve.Palette",position:"left",hidden:!0},{viewID:"davinci.ui.outline",position:"left",hidden:!0},{viewID:"davinci.ve.style",
position:"right"},{viewID:"davinci.ui.comment",position:"right",hidden:!0},{viewID:"davinci.ve.states",position:"right-bottom",hidden:!0},{viewID:"davinci.ui.navigator",position:"left-bottom",selected:!0},{viewID:"davinci.review.reviewNavigator",position:"left"}]}]}})},"davinci/js/js.plugin":function(){define(["require"],function(p){return{id:"davinci.js","davinci.editor":[{id:"JSEditor",name:"JavaScript Editor",extensions:"js,json",isDefault:!1,editorClass:"davinci/js/ui/JavaScriptEditor",palettePerspective:"davinci.html.htmlEditor",
expandPalettes:["left"]},{id:"XIDEEditor",name:"Editor",extensions:"js,json",isDefault:!0,editorClass:"davinci/xide/Editor",palettePerspective:"davinci.html.htmlEditor",expandPalettes:["left"]}],"davinci.actionSets":[{id:"jsSource",visible:!0,menu:[{label:"Source",path:"edit",id:"davinci.js.source",separator:["commentGroup",!0,"editGroup",!0,"codeGroup",!0,"additions",!1]}],actions:[{id:"davinci.js.comment",icon:null,run:function(){alert("toggle comment")},label:"Toggle Comment",menubarPath:"davinci.js.source/commentGroup"}]},
{id:"jsEdit",visible:!0,actions:[{id:"davinci.js.cut",icon:null,label:"cut",commandID:"davinci.js.cut",menubarPath:"davinci.edit/cut"},{id:"davinci.js.add",icon:null,label:"add",commandID:"davinci.js.add",menubarPath:"davinci.edit/add"},{id:"davinci.js.delete",icon:null,label:"delete",commandID:"davinci.js.delete",menubarPath:"davinci.edit/delete"}]}],"davinci.actionSetPartAssociations":[{targetID:"davinci.js.jsEdit",parts:["davinci.ui.outline","davinci.js.JSEditor"]}],"davinci.editorActions":{editorContribution:{targetID:"davinci.js.JSEditor",
actions:[{id:"savecombo",className:"maqLabelButton",showLabel:!0,label:"Save",toolbarPath:"save",type:"ComboButton",run:function(){p(["../Workbench"],function(m){p("../ui/Resource").save()})},isEnabled:function(m){return p("../Workbench").getOpenEditor()},menu:[{iconClass:"saveIcon",run:function(){p("../ui/Resource").save()},isEnabled:function(m){return p("../Workbench").getOpenEditor()},label:"Save",keyBinding:{accel:!0,charOrCode:"s",allowGlobal:!0}},{iconClass:"saveAsIcon",run:function(){p("../ui/Resource").saveAs("html")},
isEnabled:function(m){return p("../Workbench").getOpenEditor()},label:"Save As",keyBinding:{accel:!0,shift:!0,charOrCode:"s",allowGlobal:!0}}]}]}},"davinci.commands":[{id:"cut",run:function(){}},{id:"add",run:function(){}},{id:"delete",run:function(){}}],"davinci.keyBindings":[{platform:"win",sequence:"M1+C",commandID:"davinci.js.copy",contextID:"davinci.js.JSEditor"}],"davinci.preferences":[{name:"JavaScript",id:"general",category:""},{name:"Formatting",id:"format",category:"davinci.js.general",
pane:"davinci/js/ui/FormatOptions",defaultValues:{blockNewLine:!1,blockIndent:3,functionNewLine:!1,functionIndent:5,functionParamSpaceing:1,labelSpace:1,forParamSpacing:0,breakOnLabel:!0,ifStmtSpacing:0,varAssignmentSpaceing:0,switchSpacing:3,objectLitFieldSpace:1}}],"davinci.fileType":[{extension:"js",iconClass:"jsFileIcon",type:"text"},{extension:"json",iconClass:"jsFileIcon",type:"text"}]}})},"davinci/ve/ve.plugin":function(){define(["require"],function(p){return{id:"davinci.ve","davinci.view":[{id:"style",
title:"",viewClass:"davinci/ve/views/SwitchingStyleView"}],"davinci.perspective":[{id:"pageDesign",title:"Page Design",views:[{viewID:"davinci.ui.outline",position:"left"},{viewID:"davinci.ui.devices",position:"left"},{viewID:"davinci.ui.files",position:"left"},{viewID:"davinci.ve.style",position:"right"},{viewID:"davinci.ui.comment",position:"right",hidden:!0},{viewID:"davinci.ve.states",position:"right-bottom",selected:!0},{viewID:"davinci.ui.navigator",position:"left-bottom",selected:!0},{viewID:"davinci.review.reviewNavigator",
position:"left-bottom"}]}],"davinci.editor":[{id:"HTMLPageEditor",name:"HTML Visual Editor",extensions:["html","htm","php"],isDefault:!0,editorClass:"davinci/ve/PageEditor",palettePerspective:"davinci.ve.pageDesign",expandPalettes:["left"]}],"davinci.actionSets":[{id:"cutCopyPaste",visible:!0,actions:[{label:"Cut",keySequence:"M1+X",iconClass:"editActionIcon editCutIconSmall",action:"davinci/ve/actions/CutAction",menubarPath:"davinci.edit/cut"},{label:"Copy",keySequence:"M1+C",iconClass:"editActionIcon editCopyIconSmall",
action:"davinci/ve/actions/CopyAction",menubarPath:"davinci.edit/cut"},{keySequence:"M1+V",iconClass:"editActionIcon editPasteIconSmall",label:"Paste",action:"davinci/ve/actions/PasteAction",menubarPath:"davinci.edit/cut"},{keySequence:"DEL",iconClass:"editActionIcon editDeleteIconSmall",label:"Delete",action:"davinci/ve/actions/DeleteAction",menubarPath:"davinci.edit/cut"},{iconClass:"fa-crosshairs",label:"Show in Outline",action:"davinci/ve/actions/ShowInOutline",menubarPath:"davinci.edit/cut"},
{iconClass:"editActionIcon selectParentIconSmall",label:"Select parent",action:"davinci/ve/actions/SelectParentAction",menubarPath:"davinci.edit/cut"},{iconClass:"editActionIcon selectAncestorIconSmall",label:"Select ancestor...",action:"davinci/ve/actions/SelectAncestorAction",menubarPath:"davinci.edit/cut"},{iconClass:"editActionIcon unselectAllIconSmall",label:"Unselect all",action:"davinci/ve/actions/UnselectAllAction",menubarPath:"davinci.edit/cut"},{iconClass:"editActionIcon",label:"Surround with \x26lt;A\x26gt;",
action:"davinci/ve/actions/SurroundAction",surroundWithTagName:"a",menubarPath:"davinci.edit/cut"},{iconClass:"editActionIcon",label:"Surround with \x26lt;DIV\x26gt;",action:"davinci/ve/actions/SurroundAction",surroundWithTagName:"div",menubarPath:"davinci.edit/cut"},{iconClass:"editActionIcon",label:"Surround with \x26lt;SPAN\x26gt;",action:"davinci/ve/actions/SurroundAction",surroundWithTagName:"span",menubarPath:"davinci.edit/cut"},{iconClass:"editActionIcon moveToFrontIconSmall",label:"Move to front",
action:"davinci/ve/actions/MoveToFrontAction",menubarPath:"davinci.edit/cut"},{iconClass:"editActionIcon moveForwardIconSmall",label:"Move forward",action:"davinci/ve/actions/MoveForwardAction",menubarPath:"davinci.edit/cut"},{iconClass:"editActionIcon moveBackwardIconSmall",label:"Move backward",action:"davinci/ve/actions/MoveBackwardAction",menubarPath:"davinci.edit/cut"},{iconClass:"editActionIcon moveToBackIconSmall",label:"Move to back",action:"davinci/ve/actions/MoveToBackAction",menubarPath:"davinci.edit/cut"}]}],
"davinci.viewActions":[{viewContribution:{targetID:"davinci.ve.outline",actions:[{id:"design",iconClass:"designModeIcon editActionIcon",radioGroup:"displayMode",method:"switchDisplayMode",label:"Widgets",toolbarPath:"displayMode"},{id:"source",iconClass:"sourceModeIcon editActionIcon",method:"switchDisplayMode",radioGroup:"displayMode",label:"Source",toolbarPath:"displayMode"}]}},{viewContribution:{targetID:"davinci.ve.states",actions:[{id:"addState",iconClass:"viewActionIcon addStateIcon",action:"davinci/ve/actions/AddState",
label:"Add state",toolbarPath:"states1"},{id:"removeState",iconClass:"viewActionIcon removeStateIcon",action:"davinci/ve/actions/RemoveState",label:"Remove state",toolbarPath:"states1"},{id:"modifyState",iconClass:"viewActionIcon modifyStateIcon",action:"davinci/ve/actions/ModifyState",label:"Modify state",toolbarPath:"states1"},{id:"NewWidgetsCurrentState",className:"newWidgetsCurrentStateButton",iconClass:"viewActionIcon newWidgetsCurrentStateIcon",action:"davinci/ve/actions/NewWidgetsCurrentState",
label:"Toggle whether new widgets go to Background or current state",toolbarPath:"states2"},{id:"highlightBaseWidgets",className:"highlightBaseWidgetsButton",iconClass:"viewActionIcon highlightBaseWidgetsIcon",action:"davinci/ve/actions/HighlightBaseWidgets",label:"When in custom state, highlight widgets from Background state",toolbarPath:"states2"}]}}],"davinci.actionSetPartAssociations":[{targetID:"davinci.ve.cutCopyPaste",parts:["davinci.ve.visualEditor","davinci.ve.VisualEditorOutline"]}],"davinci.editorActions":{editorContribution:{targetID:"davinci.ve.HTMLPageEditor",
actions:[{id:"savecombo",className:"maqLabelButton",showLabel:!0,label:"Save",toolbarPath:"save",type:"ComboButton",run:function(){p(["../Workbench"],function(m){p("../ui/Resource").save()})},isEnabled:function(m){return p("../Workbench").getOpenEditor()},menu:[{iconClass:"saveIcon",run:function(){p("../ui/Resource").save()},isEnabled:function(m){return p("../Workbench").getOpenEditor()},label:"Save",keyBinding:{accel:!0,charOrCode:"s",allowGlobal:!0}},{iconClass:"saveAsIcon",run:function(){p("../ui/Resource").saveAs("html")},
isEnabled:function(m){return p("../Workbench").getOpenEditor()},label:"Save As",keyBinding:{accel:!0,shift:!0,charOrCode:"s",allowGlobal:!0}},{id:"saveasdijit",iconClass:"fa-save",run:function(){return p(["davinci/de/resource"],function(m){m.createDijiFromNewDialog()})},isEnabled:function(m){return!0},label:"Save As Widget",command:"File/Save As Widget",group:"File",tab:"Home"}]},{id:"undo",iconClass:"editActionIcon undoIcon",action:"davinci/actions/UndoAction",label:"Undo",toolbarPath:"undoredo",
keyBinding:{accel:!0,charOrCode:"z"},command:"Edit/Undo"},{id:"redo",iconClass:"editActionIcon redoIcon",action:"davinci/actions/RedoAction",label:"Redo",toolbarPath:"undoredo",keyBinding:{accel:!0,shift:!0,charOrCode:"z"},command:"Edit/Redo"},{id:"cut",label:"Cut",iconClass:"editActionIcon editCutIcon",action:"davinci/ve/actions/CutAction",toolbarPath:"cutcopypaste",keyBinding:{accel:!0,charOrCode:"x"}},{id:"copy",label:"Copy",iconClass:"editActionIcon editCopyIcon",action:"davinci/ve/actions/CopyAction",
toolbarPath:"cutcopypaste",keyBinding:{accel:!0,charOrCode:"c"}},{id:"paste",label:"Paste",iconClass:"editActionIcon editPasteIcon",action:"davinci/ve/actions/PasteAction",toolbarPath:"cutcopypaste",keyBinding:{accel:!0,charOrCode:"v"}},{id:"delete",iconClass:"editActionIcon editDeleteIcon",label:"Delete",action:"davinci/ve/actions/DeleteAction",toolbarPath:"delete",keyBinding:{charOrCode:[dojo.keys.DELETE,dojo.keys.BACKSPACE]}},{id:"outline",iconClass:"fa-crosshairs",label:"Show in Outline",action:"davinci/ve/actions/ShowInOutline",
toolbarPath:"outline"},{id:"openBrowser",iconClass:"text-success fa-play",className:"davinciFloatRight openBrowser",run:function(){p(["../Workbench"],function(m){(m=m.getOpenEditor())&&m.resourceFile?m.previewInBrowser():console.error("ERROR. Cannot launch browser window. No editor info.")})},label:"Preview in Browser",toolbarPath:"undoredo",iconClass:"text-success fa-play",keyBinding:{accel:!0,charOrCode:"0",allowGlobal:!0},command:"File/Open In Browser",group:"File",tab:"Home"},{id:"documentSettings",
iconClass:"documentSettingsIcon",className:"documentSettings davinciFloatRight",label:"Document settings",toolbarPath:"undoredo",type:"DropDownButton",menu:[{iconClass:"editActionIcon",label:"Select parent",action:"davinci/ve/actions/SelectParentAction",command:"Widget/Select/SelectParent",group:"Widget"},{iconClass:"editActionIcon",label:"Select ancestor",action:"davinci/ve/actions/SelectAncestorAction",command:"Widget/Select/SelectAnchestor",group:"Widget"},{iconClass:"editActionIcon",label:"Unselect all",
action:"davinci/ve/actions/UnselectAllAction"},{iconClass:"editActionIcon moveToFrontIconSmall",label:"Move to front",action:"davinci/ve/actions/MoveToFrontAction",command:"Widget/Move/MoveToFront",group:"Widget"},{iconClass:"editActionIcon moveForwardIconSmall",label:"Move forward",action:"davinci/ve/actions/MoveForwardAction",command:"Widget/Move/MoveToForward",group:"Widget"},{iconClass:"editActionIcon moveBackwardIconSmall",label:"Move backward",action:"davinci/ve/actions/MoveBackwardAction",
command:"Widget/Move/MoveToBackward",group:"Widget"},{iconClass:"editActionIcon moveToBackIconSmall",label:"Move to back",action:"davinci/ve/actions/MoveToBackAction",command:"Widget/Move/MoveToBack",group:"Widget"},{iconClass:"editActionIcon",label:"Surround with \x26lt;A\x26gt;",action:"davinci/ve/actions/SurroundAction",surroundWithTagName:"a",command:"Widget/SourroundWithA",group:"Widget",tab:"Tools"},{iconClass:"editActionIcon",label:"Surround with \x26lt;DIV\x26gt;",action:"davinci/ve/actions/SurroundAction",
surroundWithTagName:"div",command:"Widget/SourroundWithDIV",group:"Widget",tab:"Tools"},{iconClass:"editActionIcon",label:"Surround with \x26lt;SPAN\x26gt;",action:"davinci/ve/actions/SurroundAction",surroundWithTagName:"span",command:"Widget/SourroundWithSPAN",group:"Widget",tab:"Tools"}]},{id:"layout",className:"maqLabelButton davinciFloatRight maqLayoutDropDownButton",showLabel:!0,label:"Flow",toolbarPath:"undoredo",type:"DropDownButton",menu:[{label:"Flow",iconClass:"flowLayoutIcon",method:"selectLayoutFlow"},
{label:"Absolute",iconClass:"absoluteLayoutIcon",method:"selectLayoutAbsolute"}]},{id:"closeactiveeditor",run:function(){p(["../Workbench"],function(m){m.closeActiveEditor()})},keyBinding:{accel:!0,shift:!0,charOrCode:"w",allowGlobal:!0}},{id:"showWidgetsPalette",run:function(){var m=dijit.byId("davinci.ve.Palette");if(m){var h=m.getParent();h&&h.selectChild(m)}},keyBinding:{meta:!0,charOrCode:"p",allowGlobal:!0}}]}},"davinci.preferences":[{name:"Visual Editor",id:"editorPrefs",category:"davinci.html.general",
pane:"davinci/ve/prefs/HTMLEditPreferences",defaultValues:{flowLayout:!1,snap:!0,showPossibleParents:!0,cssOverrideWarn:!0,absoluteWidgetsZindex:900,widgetPaletteLayout:"icons"}}],"davinci.dnd":[{parts:["davinci.ui.navigator"],dragSource:function(m){if("File"==m.elementType)return/gif|jpeg|jpg|png|svg|json/i.test(m.getExtension())},dragHandler:"davinci/ve/palette/ImageDragSource"}],"davinci.fileType":[{extension:"theme",iconClass:"themeFileIcon",type:"text"}],"davinci.defaultEditorActions":{editorContribution:{actions:[{id:"save",
run:function(){p("../Workbench").getOpenEditor().save()},isEnabled:function(m){return!0},className:"maqLabelButton",showLabel:!0,label:"Save",toolbarPath:"save",keyBinding:{accel:!0,charOrCode:"s"}},{id:"undo",iconClass:"editActionIcon undoIcon",action:"davinci/actions/UndoAction",label:"Undo",toolbarPath:"undoredo",keyBinding:{accel:!0,charOrCode:"z"}},{id:"redo",iconClass:"editActionIcon redoIcon",action:"davinci/actions/RedoAction",label:"Redo",toolbarPath:"undoredo",keyBinding:{accel:!0,shift:!0,
charOrCode:"z"}}]}}}})},"davinci/model/Path":function(){define(["dojo/_base/declare"],function(p){"undefined"===typeof davinci.model&&(davinci.model={});"undefined"===typeof davinci.model.Path&&(davinci.model.Path={});var m=p("davinci.model.Path",null,{constructor:function(h,g,f){h=h||".";"string"==typeof h?(this.path=h,this.getSegments()):(this.segments=h,this.hasLeading=g,this.hasTrailing=f)},endsWith:function(h){var g=dojo.clone(this.segments);for(h=(new m(h)).getSegments();0<h.length&&0<g.length;)if(h.pop()!=
g.pop())return!1;return!0},getExtension:function(){this.extension||(this.extension=this.path.substr(this.path.lastIndexOf(".")+1));return this.extension},segment:function(h){var g=this.getSegments();return g.length<h?null:g[h]},getSegments:function(){if(!this.segments){var h=this.path;this.segments=h.split("/");"/"==h.charAt(0)&&(this.hasLeading=!0);"/"==h.charAt(h.length-1)&&(this.hasTrailing=!0,this.segments.pop());this._canonicalize()}return this.segments},isAbsolute:function(){return this.hasLeading},
getParentPath:function(){if(!this._parentPath){var h=dojo.clone(this.segments);h.pop();this._parentPath=new m(h,this.hasLeading)}return dojo.clone(this._parentPath)},_clone:function(){return new m(dojo.clone(this.segments),this.hasLeading,this.hasTrailing)},append:function(h){h=h||"";"string"==typeof h&&(h=new m(h));if(h.isAbsolute())return h;var g=this.segments,f=h.getSegments(),g=g.concat(f);h=new m(g,this.hasLeading,h.hasTrailing);".."!=f[0]&&"."!=f[0]||h._canonicalize();return h},toString:function(){var h=
[];this.hasLeading&&h.push("/");for(var g=0;g<this.segments.length;g++)0<g&&h.push("/"),h.push(this.segments[g]);this.hasTrailing&&h.push("/");return h.join("")},removeRelative:function(){var h=this.getSegments();return 0<h.length&&"."==h[1]?this.removeFirstSegments(1):this},relativeTo:function(h,g){"string"==typeof h&&(h=new m(h));var f=this.segments;if(this.isAbsolute())return this;var e=h.getSegments();h=this.matchingFirstSegments(h);e=e.length;g&&--e;g=e-h;if(0==g+f.length-h)return davinci.model.Path.EMPTY;
for(var e=[],c=0;c<g;c++)e.push("..");for(c=h;c<f.length;c++)e.push(f[c]);return new m(e,!1,this.hasTrailing)},startsWith:function(h){var g=this.matchingFirstSegments(h);return h._length()==g},_length:function(h){return this.segments.length},matchingFirstSegments:function(h){var g=this.segments;h=h.getSegments();for(var f=Math.min(g.length,h.length),e=0,c=0;c<f&&g[c]==h[c];c++)e++;return e},removeFirstSegments:function(h){return new m(this.segments.slice(h,this.segments.length),this.hasLeading,this.hasTrailing)},
removeMatchingLastSegments:function(h){h=this.matchingFirstSegments(h);return this.removeLastSegments(h)},removeMatchingFirstSegments:function(h){h=this.matchingFirstSegments(h);return this._clone().removeFirstSegments(h)},removeLastSegments:function(h){h||(h=1);return new m(this.segments.slice(0,this.segments.length-h),this.hasLeading,this.hasTrailing)},lastSegment:function(){return this.segments[this.segments.length-1]},firstSegment:function(h){return this.segments[h||0]},equals:function(h){if(this.segments.length!=
h.segments.length)return!1;for(var g=0;g<this.segments.length;g++)if(h.segments[g]!=this.segments[g])return!1;return!0},_canonicalize:function(){for(var h,g=this.segments,f=0;f<g.length;f++)if("."==g[f]||".."==g[f]){h=!0;break}if(h){h=[];for(f=0;f<g.length;f++)".."==g[f]?0==h.length?this.hasLeading||h.push(g[f]):".."==h[h.length-1]?h.push(".."):h.pop():"."==g[f]&&1!=this.segments.length||h.push(g[f]);h.length!=g.length&&(this.segments=h)}}});davinci.model.Path.EMPTY=new m("");return m})},"davinci/workbench/Preferences":function(){define("dojo/_base/declare dojo/_base/xhr dojo/_base/lang dojo/topic dojo/dom ../Runtime dijit/_WidgetBase dijit/_TemplatedMixin dijit/_WidgetsInTemplateMixin dijit/registry davinci/ui/Dialog dijit/Tree dijit/tree/ForestStoreModel dojo/data/ItemFileReadStore davinci/lang/workbench dijit/lang/_common dojo/text!davinci/workbench/templates/Preferences.html dijit/form/Button".split(" "),
function(p,m,h,g,f,e,c,a,q,k,d,b,n,r,v,z,y){p([c,a,q],{templateString:y,commonStrings:z,resize:function(){this.borderContainer.resize()}});var w={_allPrefs:{},savePreferences:function(b,d,a){},_loadExtensions:function(){w._extensions||(w._extensions=e.getExtensions("davinci.preferences"))},showPreferencePage:function(){},getPrefJson:function(){var b=w._extensions;if(!b)return[];for(var d=[],a=0;a<b.length;a++)b[a]._index=a,b[a].category?(d[b[a].category]||(d[b[a].category]=[]),d[b[a].category].push(b[a])):
(d.root||(d.root=[]),d.root.push(b[a]));return{identifier:"id",items:d.root.map(function(b){return{id:b.id,name:b.name,hide:b.hide,index:b._index,children:w._getPrefJsonChildren(b.id,d)}})}},_getPrefJsonChildren:function(b,d){b=d[b];if(!b)return[];for(var a=[],n=0;n<b.length;n++)a[n]={id:b[n].id,name:b[n].name,index:b[n]._index},d[b[n].id]&&(a[n].children=w._getPrefJsonChildren(b[n].id,d));return a},setPaneContent:function(b){},_save:function(b){if(w._currentPane){var d=w._currentPane.getPreferences(),
a=w._currentPane._extension.id,n=davinci.Workbench.getProject();w.savePreferences(a,n,d);w._currentPane.save&&w._currentPane.save(d)}for(d=0;d<b.length;d++){try{b[d].save&&b[d].save()}catch(F){}b[d].children&&0<b[d].children.length&&w._save(b[d].children)}},save:function(){w._save(w._extensions);w.finish()},finish:function(){w._extensions=null;w._currentPane=null;this.dialog.destroyRecursive(!1);this.dialog=null},getPreferences:function(b,d){w._allPrefs[d]||(w._allPrefs[d]={});return{version:"1.7",
specVersion:"0.8",snap:!0,helper:"maq-metadata-dojo/dojox/mobile/ThemeHelper",themeSets:[{_COMMENT_:"Defines site-specific default theme sets",desktopTheme:"claro",mobileTheme:[{device:"Android",theme:"android"},{device:"BlackBerry",theme:"blackberry"},{device:"iPad",theme:"ipad"},{device:"iPhone",theme:"iphone"},{device:"other",theme:"iphone"}],name:"site_dojo_default"}]}},getDefaultPreferences:function(b){w._loadExtensions();for(var d=0;d<w._extensions.length;d++)if(w._extensions[d].id==b)return"string"===
typeof w._extensions[d].defaultValues?e.serverJSONRequest({url:w._extensions[d].defaultValues,handleAs:"json",sync:!0}).defaultValues:w._extensions[d].defaultValues}};return h.setObject("davinci.workbench.Preferences",w)})},"davinci/ui/Dialog":function(){define("dojo/_base/declare dijit/form/Button dijit/Dialog dojo/dom-geometry dojo/dom-style dojo/_base/connect dojo/window dojo/parser davinci/_common".split(" "),function(p,m,h,g,f,e,c,a,q){var k=p(h,{contentStyle:null,buildRendering:function(){this.inherited(arguments);
dojo.addClass(this.domNode,"resizableDialog");dojo.addClass(this.domNode,"ui-widget-content");this.submitOnEnter&&dojo.addClass(this.domNode,"submitOnEnter")},_setContent:function(d,b){this.inherited(arguments);var a=dojo.doc.createElement("div");this.containerNode.appendChild(a);(a=dojo.query(".dijitDialogPaneContentArea",this.containerNode)[0])?dojo.connect(a,"onkeydown",this,"_onKeyDown"):dojo.connect(this.domNode,"onkeydown",this,"_onKeyDown")},resize:function(d){if(d){var b=f.getComputedStyle(this.containerNode),
b=g.getPadExtents(this.containerNode,b),a=d.w-b.w,k=d.h-b.h,k=k-g.getMarginBox(this.titleBar).h;d=dojo.query(".dijitDialogPaneContentArea",this.containerNode)[0];b=dojo.query(".dijitDialogPaneActionBar",this.containerNode)[0];k-=g.getMarginBox(b).h;a&&dojo.style(d,"width",a+"px");k&&dojo.style(d,"height",k+"px");dojo.forEach(this.getChildren(),dojo.hitch(this,function(b){b.resize&&b.resize({w:a,h:k})}))}},show:function(){var d=this.inherited(arguments);if(this.contentStyle){if("object"==typeof this.contentStyle){var b=
{};this.contentStyle.width&&(b.w=parseInt(this.contentStyle.width));this.contentStyle.height&&(b.h=parseInt(this.contentStyle.height));var a=c.getBox(this.ownerDocument);a.w*=this.maxRatio;a.h*=this.maxRatio;b.h>a.h&&(g.position(this.containerNode),b.h=a.h);this.resize(b)}this._size();this._position();dojo.style(this.containerNode,"width","auto");dojo.style(this.containerNode,"height","auto")}return d},_onKeyDown:function(d){var b=d.ctrlKey&&!dojo.isMac||dojo.isMac&&d.metaKey;d.which==dojo.keys.ENTER&&
(b||this.submitOnEnter)&&(d=dojo.query("input[type\x3dsubmit]",this.containerNode),0<d.length&&(d=dijit.getEnclosingWidget(d[0]),b=document.createEvent("MouseEvents"),b.initMouseEvent("click",!0,!0,window,0,0,0,0,0,!1,!1,!1,!1,0,null),d._onClick(b)))}});k._timedDestroy=function(d,b){b&&b.forEach(e.disconnect);var a=e.connect(d,"onHide",function(){e.disconnect(a);d.destroyRecursive()});d.hide()};k.showModal=function(d,b,a,c,q,f){var n=[];b={title:b,content:d,contentStyle:a,submitOnEnter:q};f&&(b.onShow=
f);var r=new k(b);f=dojo.hitch(this,function(){var b=!1;c&&(b=c());b||this._timedDestroy(r,n)});n.push(e.connect(r,"onExecute",d,f));d.onExecute&&n.push(e.connect(d,"onExecute",d,f));n.push(e.connect(d,"onClose",dojo.hitch(this,function(){this._timedDestroy(r,n)})));n.push(e.connect(r,"onCancel",dojo.hitch(this,function(){this._timedDestroy(r,n)})));r.show();return r};k.showMessage=function(d,b,a,k,c){return this.showDialog({title:d,content:b,style:a,okCallback:k,okLabel:null,hideCancel:!0})};k.showDialog=
function(d){var b=d.title,n=d.content,c=d.style,f=d.okCallback,g=d.okLabel,h=d.hideCancel,w=d.submitOnEnter,B=d.extendLabels,u=d.extendCallbacks,x,D=[];d=document.createElement("div");var p=document.createElement("div");dojo.addClass(p,"dijitDialogPaneContentArea");d.appendChild(p);var C=document.createElement("div");dojo.addClass(C,"dijitDialogPaneActionBar");g=new m({label:g?g:q.ok,type:"submit","class":"maqPrimaryButton"});C.appendChild(g.domNode);var I=dojo.hitch(this,function(){this._timedDestroy(x,
D)});if(B&&u&&0<B.length&&B.length===u.length)for(g=0;g<B.length;g++){var A=function(b){if(u[b])u[b]();x.onCancel()}.bind(this,g);C.appendChild((new m({label:B[g],onClick:A,"class":"maqSecondaryButton"})).domNode)}h||C.appendChild((new m({label:q.cancel,onClick:function(){x.onCancel()},"class":"maqSecondaryButton"})).domNode);d.appendChild(C);x=new k({title:b,content:d,contentStyle:c,submitOnEnter:w});dojo.isString(n)?(p.innerHTML=n,a.parse(p)):n.domNode?p.appendChild(n.domNode):p.appendChild(n);
D.push(e.connect(x,"onExecute",dojo.hitch(this,function(){f&&f();I()})));D.push(e.connect(x,"onCancel",dojo.hitch(this,function(){I()})));x.show();return x};return k})},"dojo/window":function(){define("./_base/lang ./sniff ./_base/window ./dom ./dom-geometry ./dom-style ./dom-construct".split(" "),function(p,m,h,g,f,e,c){m.add("rtl-adjust-position-for-verticalScrollBar",function(a,k){a=h.body(k);k=c.create("div",{style:{overflow:"scroll",overflowX:"visible",direction:"rtl",visibility:"hidden",position:"absolute",
left:"0",top:"0",width:"64px",height:"64px"}},a,"last");var d=c.create("div",{style:{overflow:"hidden",direction:"ltr"}},k,"last"),b=0!=f.position(d).x;k.removeChild(d);a.removeChild(k);return b});m.add("position-fixed-support",function(a,k){a=h.body(k);k=c.create("span",{style:{visibility:"hidden",position:"fixed",left:"1px",top:"1px"}},a,"last");var d=c.create("span",{style:{position:"fixed",left:"0",top:"0"}},k,"last"),b=f.position(d).x!=f.position(k).x;k.removeChild(d);a.removeChild(k);return b});
var a={getBox:function(c){c=c||h.doc;var k="BackCompat"==c.compatMode?h.body(c):c.documentElement,d=f.docScroll(c);if(m("touch")){var b=a.get(c);c=b.innerWidth||k.clientWidth;k=b.innerHeight||k.clientHeight}else c=k.clientWidth,k=k.clientHeight;return{l:d.x,t:d.y,w:c,h:k}},get:function(c){if(9>m("ie")&&a!==document.parentWindow){c.parentWindow.execScript("document._parentWindow \x3d window;","Javascript");var k=c._parentWindow;c._parentWindow=null;return k}return c.parentWindow||c.defaultView},scrollIntoView:function(a,
k){try{a=g.byId(a);var d=a.ownerDocument||h.doc,b=h.body(d),n=d.documentElement||b.parentNode,c=m("ie"),q=m("webkit");if(a!=b&&a!=n)if(!(m("mozilla")||c||q||m("opera"))&&"scrollIntoView"in a)a.scrollIntoView(!1);else{var z="BackCompat"==d.compatMode,y=Math.min(b.clientWidth||n.clientWidth,n.clientWidth||b.clientWidth),w=Math.min(b.clientHeight||n.clientHeight,n.clientHeight||b.clientHeight),d=q||z?b:n,B=k||f.position(a),u=a.parentNode;k=function(b){return 6>=c||7==c&&z?!1:m("position-fixed-support")&&
"fixed"==e.get(b,"position").toLowerCase()};if(!k(a))for(;u;){u==b&&(u=d);var x=f.position(u),D=k(u),p="rtl"==e.getComputedStyle(u).direction.toLowerCase();if(u==d){x.w=y;x.h=w;d==n&&c&&p&&(x.x+=d.offsetWidth-x.w);if(0>x.x||!c||9<=c)x.x=0;if(0>x.y||!c||9<=c)x.y=0}else{var C=f.getPadBorderExtents(u);x.w-=C.w;x.h-=C.h;x.x+=C.l;x.y+=C.t;var I=u.clientWidth,A=x.w-I;0<I&&0<A&&(p&&m("rtl-adjust-position-for-verticalScrollBar")&&(x.x+=A),x.w=I);I=u.clientHeight;A=x.h-I;0<I&&0<A&&(x.h=I)}D&&(0>x.y&&(x.h+=
x.y,x.y=0),0>x.x&&(x.w+=x.x,x.x=0),x.y+x.h>w&&(x.h=w-x.y),x.x+x.w>y&&(x.w=y-x.x));var H=B.x-x.x,N=B.y-x.y,L=H+B.w-x.w,J=N+B.h-x.h,G,E;0<L*H&&(u.scrollLeft||u==d||u.scrollWidth>u.offsetHeight)&&(G=Math[0>H?"max":"min"](H,L),p&&(8==c&&!z||9<=c)&&(G=-G),E=u.scrollLeft,u.scrollLeft+=G,G=u.scrollLeft-E,B.x-=G);0<J*N&&(u.scrollTop||u==d||u.scrollHeight>u.offsetHeight)&&(G=Math.ceil(Math[0>N?"max":"min"](N,J)),E=u.scrollTop,u.scrollTop+=G,G=u.scrollTop-E,B.y-=G);u=u!=d&&!D&&u.parentNode}}}catch(K){console.error("scrollIntoView: "+
K),a.scrollIntoView(!1)}}};p.setObject("dojo.window",a);return a})},"davinci/_common":function(){define([],function(){return{search:"Search",filter:"Filter","new":"New",errorSavingFile:"Error saving file: ${0} details: ${1}",palette:"palette",closeAllEditors:"Close all tabs",undo:"Undo",redo:"Redo",copy:"Copy",paste:"Paste",cut:"Cut","delete":"Delete",surround:"Surround",properties:"Properties",styles:"Styles",events:"Events",preferences:"Preferences",addPane:"Add Pane",addColumn:"Add Column",addRow:"Add Row",
removeColumn:"Remove Column",removeRow:"Remove Row",joinColumn:"Join Column",joinRow:"Join Row",splitColumn:"Split Column",splitRow:"Split Row",alignLeft:"Align Left",alignRight:"Align Right",alignTop:"Align Top",alignBottom:"Align Bottom",show:"Show",hide:"Hide",addMenuItem:"Add Menu Item",addSubMenu:"Add Sub Menu",addMenuBarItem:"Add MenuBar Item",addPopupMenuBar:"Add Popup MenuBarItem",ok:"OK",cancel:"Cancel",page:"Page",title:"Title",metaInfo:"Meta Info",httpEquiv:"HTTP Equiv",style:"Style",theme:"Theme",
styleSheets:"Style Sheets",rules:"Rules",url:"URL",externalScripts:"External Scripts",modules:"Modules",name:"Name",value:"Value",add:"Add",remove:"Remove",staticOptions:"Static Options",axisOptions:"Axis Options",series:"Series",axis:"Axis",option:"Option",selected:"Selected",staticItems:"Static Items",dataStore:"Data Store",query:"Query",fields:"Fields",field:"Field",label:"Label",width:"Width",edit:"Edit",key:"Key",rootId:"Root ID",rootLabel:"Root Label",childrenAttrs:"Children Attributes",items:"Items",
type:"Type",widget:"Widget",position:"Position",size:"Size",layout:"Layout",visual:"Visual",text:"Text",border:"Border",table:"Table",list:"List",aural:"Aural",others:"Others",onLoad:"Load",onUnload:"Unload",script:"Script",methodCall:"Method Call",serviceCall:"Service Call",object:"Object",method:"Method",parameters:"Parameters",result:"Result",service:"Service",content:"Content",source:"Source",target:"Target",property:"Property",flowLayout:"Flow Layout",snapToNearestWidget:"Snap to nearest widget",
showPossibleParents:"When dragging, show possible parents",warnOnCSSOverride:"Warn on CSS Override",absoluteWidgetsZindex:"z-index for sketch mode",widgetPaletteLayout:"In Palette, display widgets as",widgetPaletteShow_Icons:"icons",widgetPaletteShow_List:"list",liveEdit:"Live Edit",zazl:"Enable \x3ca href\x3d'http://zazl.org' target\x3d'_blank'\x3eZazl Optimizer\x3c/a\x3e",selectorPrefix:"Selector Prefix",component:"Component",alternates:"Alternates",alternateWidgets:"Alternate widgets:",howToChooseAlternate:"To choose alternate widget, click-select current widget, then click on up arrow icon.",
summary:"Summary:",description:"Description:",showSuggestedWidgets:"Suggested Widgets",showAllWidgets:"All Widgets",MoreIconTitleString:"Click here to see alternative similar widgets",HelpIconTitleString:"Click here to see descriptive info about this widget",__dummy__:""}})},"dojo/data/ItemFileReadStore":function(){define("../_base/kernel ../_base/lang ../_base/declare ../_base/array ../_base/xhr ../Evented ./util/filter ./util/simpleFetch ../date/stamp".split(" "),function(p,m,h,g,f,e,c,a,q){h=h("dojo.data.ItemFileReadStore",
[e],{constructor:function(a){this._arrayOfAllItems=[];this._arrayOfTopLevelItems=[];this._loadFinished=!1;this.url=this._ccUrl=this._jsonFileUrl=a.url;this._jsonData=a.data;this.data=null;this._datatypeMap=a.typeMap||{};this._datatypeMap.Date||(this._datatypeMap.Date={type:Date,deserialize:function(d){return q.fromISOString(d)}});this._features={"dojo.data.api.Read":!0,"dojo.data.api.Identity":!0};this._itemsByIdentity=null;this._storeRefPropName="_S";this._itemNumPropName="_0";this._rootItemPropName=
"_RI";this._reverseRefMap="_RRM";this._loadInProgress=!1;this._queuedFetches=[];void 0!==a.urlPreventCache&&(this.urlPreventCache=a.urlPreventCache?!0:!1);void 0!==a.hierarchical&&(this.hierarchical=a.hierarchical?!0:!1);a.clearOnClose&&(this.clearOnClose=!0);"failOk"in a&&(this.failOk=a.failOk?!0:!1)},url:"",_ccUrl:"",data:null,typeMap:null,clearOnClose:!1,urlPreventCache:!1,failOk:!1,hierarchical:!0,_assertIsItem:function(a){if(!this.isItem(a))throw Error(this.declaredClass+": Invalid item argument.");
},_assertIsAttribute:function(a){if("string"!==typeof a)throw Error(this.declaredClass+": Invalid attribute argument.");},getValue:function(a,d,b){a=this.getValues(a,d);return 0<a.length?a[0]:b},getValues:function(a,d){this._assertIsItem(a);this._assertIsAttribute(d);return(a[d]||[]).slice(0)},getAttributes:function(a){this._assertIsItem(a);var d=[],b;for(b in a)b!==this._storeRefPropName&&b!==this._itemNumPropName&&b!==this._rootItemPropName&&b!==this._reverseRefMap&&d.push(b);return d},hasAttribute:function(a,
d){this._assertIsItem(a);this._assertIsAttribute(d);return d in a},containsValue:function(a,d,b){var n=void 0;"string"===typeof b&&(n=c.patternToRegExp(b,!1));return this._containsValue(a,d,b,n)},_containsValue:function(a,d,b,n){return g.some(this.getValues(a,d),function(d){if(null!==d&&!m.isObject(d)&&n){if(d.toString().match(n))return!0}else if(b===d)return!0})},isItem:function(a){return a&&a[this._storeRefPropName]===this&&this._arrayOfAllItems[a[this._itemNumPropName]]===a?!0:!1},isItemLoaded:function(a){return this.isItem(a)},
loadItem:function(a){this._assertIsItem(a.item)},getFeatures:function(){return this._features},getLabel:function(a){if(this._labelAttr&&this.isItem(a))return this.getValue(a,this._labelAttr)},getLabelAttributes:function(a){return this._labelAttr?[this._labelAttr]:null},filter:function(a,d,b){var n=[],k,e;if(a.query){var f;k=a.queryOptions?a.queryOptions.ignoreCase:!1;var q={};for(e in a.query)f=a.query[e],"string"===typeof f?q[e]=c.patternToRegExp(f,k):f instanceof RegExp&&(q[e]=f);for(k=0;k<d.length;++k){var g=
!0,h=d[k];if(null===h)g=!1;else for(e in a.query)f=a.query[e],this._containsValue(h,e,f,q[e])||(g=!1);g&&n.push(h)}}else for(k=0;k<d.length;++k)e=d[k],null!==e&&n.push(e);b(n,a)},_fetchItems:function(a,d,b){var n=this;if(this._loadFinished)this.filter(a,this._getItemsArray(a.queryOptions),d);else if(this._jsonFileUrl!==this._ccUrl?(p.deprecated(this.declaredClass+": ","To change the url, set the url property of the store, not _jsonFileUrl.  _jsonFileUrl support will be removed in 2.0"),this.url=this._ccUrl=
this._jsonFileUrl):this.url!==this._ccUrl&&(this._ccUrl=this._jsonFileUrl=this.url),null!=this.data&&(this._jsonData=this.data,this.data=null),this._jsonFileUrl)if(this._loadInProgress)this._queuedFetches.push({args:a,filter:m.hitch(n,"filter"),findCallback:m.hitch(n,d)});else{this._loadInProgress=!0;var c=f.get({url:n._jsonFileUrl,handleAs:"json-comment-optional",preventCache:this.urlPreventCache,failOk:this.failOk});c.addCallback(function(c){try{n._getItemsFromLoadedData(c),n._loadFinished=!0,n._loadInProgress=
!1,n.filter(a,n._getItemsArray(a.queryOptions),d),n._handleQueuedFetches()}catch(y){n._loadFinished=!0,n._loadInProgress=!1,b(y,a)}});c.addErrback(function(d){n._loadInProgress=!1;b(d,a)});var k=null;a.abort&&(k=a.abort);a.abort=function(){var b=c;b&&-1===b.fired&&(b.cancel(),b=null);k&&k.call(a)}}else if(this._jsonData)try{this._loadFinished=!0,this._getItemsFromLoadedData(this._jsonData),this._jsonData=null,n.filter(a,this._getItemsArray(a.queryOptions),d)}catch(z){b(z,a)}else b(Error(this.declaredClass+
": No JSON source data was provided as either URL or a nested Javascript object."),a)},_handleQueuedFetches:function(){if(0<this._queuedFetches.length){for(var a=0;a<this._queuedFetches.length;a++){var d=this._queuedFetches[a],b=d.args,n=d.filter,d=d.findCallback;n?n(b,this._getItemsArray(b.queryOptions),d):this.fetchItemByIdentity(b)}this._queuedFetches=[]}},_getItemsArray:function(a){return a&&a.deep?this._arrayOfAllItems:this._arrayOfTopLevelItems},close:function(a){this.clearOnClose&&this._loadFinished&&
!this._loadInProgress&&(this._arrayOfAllItems=[],this._arrayOfTopLevelItems=[],this._loadFinished=!1,this._itemsByIdentity=null,this._loadInProgress=!1,this._queuedFetches=[])},_getItemsFromLoadedData:function(a){function d(b){return null!==b&&"object"===typeof b&&(!m.isArray(b)||n)&&!m.isFunction(b)&&(b.constructor==Object||m.isArray(b))&&"undefined"===typeof b._reference&&"undefined"===typeof b._type&&"undefined"===typeof b._value&&c.hierarchical}function b(a){c._arrayOfAllItems.push(a);for(var n in a){var k=
a[n];if(k)if(m.isArray(k))for(var e=0;e<k.length;++e){var f=k[e];d(f)&&b(f)}else d(k)&&b(k)}}var n=!1,c=this;this._labelAttr=a.label;var k,e;this._arrayOfAllItems=[];this._arrayOfTopLevelItems=a.items;for(k=0;k<this._arrayOfTopLevelItems.length;++k)e=this._arrayOfTopLevelItems[k],m.isArray(e)&&(n=!0),b(e),e[this._rootItemPropName]=!0;var f={},q;for(k=0;k<this._arrayOfAllItems.length;++k)for(q in e=this._arrayOfAllItems[k],e){if(q!==this._rootItemPropName){var g=e[q];null!==g?m.isArray(g)||(e[q]=[g]):
e[q]=[null]}f[q]=q}for(;f[this._storeRefPropName];)this._storeRefPropName+="_";for(;f[this._itemNumPropName];)this._itemNumPropName+="_";for(;f[this._reverseRefMap];)this._reverseRefMap+="_";if(f=a.identifier)for(this._itemsByIdentity={},this._features["dojo.data.api.Identity"]=f,k=0;k<this._arrayOfAllItems.length;++k)if(e=this._arrayOfAllItems[k],a=e[f],a=a[0],Object.hasOwnProperty.call(this._itemsByIdentity,a)){if(this._jsonFileUrl)throw Error(this.declaredClass+":  The json data as specified by: ["+
this._jsonFileUrl+"] is malformed.  Items within the list have identifier: ["+f+"].  Value collided: ["+a+"]");if(this._jsonData)throw Error(this.declaredClass+":  The json data provided by the creation arguments is malformed.  Items within the list have identifier: ["+f+"].  Value collided: ["+a+"]");}else this._itemsByIdentity[a]=e;else this._features["dojo.data.api.Identity"]=Number;for(k=0;k<this._arrayOfAllItems.length;++k)e=this._arrayOfAllItems[k],e[this._storeRefPropName]=this,e[this._itemNumPropName]=
k;for(k=0;k<this._arrayOfAllItems.length;++k)for(q in e=this._arrayOfAllItems[k],e)for(a=e[q],f=0;f<a.length;++f)if(g=a[f],null!==g&&"object"==typeof g){if("_type"in g&&"_value"in g){var h=g._type,x=this._datatypeMap[h];if(x)if(m.isFunction(x))a[f]=new x(g._value);else if(m.isFunction(x.deserialize))a[f]=x.deserialize(g._value);else throw Error("dojo.data.ItemFileReadStore: Value provided in typeMap was neither a constructor, nor a an object with a deserialize function");else throw Error("dojo.data.ItemFileReadStore: in the typeMap constructor arg, no object class was specified for the datatype '"+
h+"'");}if(g._reference){g=g._reference;if(m.isObject(g))for(h=0;h<this._arrayOfAllItems.length;++h){var x=this._arrayOfAllItems[h],D=!0,p;for(p in g)x[p]!=g[p]&&(D=!1);D&&(a[f]=x)}else a[f]=this._getItemByIdentity(g);this.referenceIntegrity&&(g=a[f],this.isItem(g)&&this._addReferenceToMap(g,e,q))}else this.isItem(g)&&this.referenceIntegrity&&this._addReferenceToMap(g,e,q)}},_addReferenceToMap:function(a,d,b){},getIdentity:function(a){var d=this._features["dojo.data.api.Identity"];return d===Number?
a[this._itemNumPropName]:(a=a[d])?a[0]:null},fetchItemByIdentity:function(a){var d,b;if(this._loadFinished)d=this._getItemByIdentity(a.identity),a.onItem&&(b=a.scope?a.scope:p.global,a.onItem.call(b,d));else{var n=this;this._jsonFileUrl!==this._ccUrl?(p.deprecated(this.declaredClass+": ","To change the url, set the url property of the store, not _jsonFileUrl.  _jsonFileUrl support will be removed in 2.0"),this.url=this._ccUrl=this._jsonFileUrl):this.url!==this._ccUrl&&(this._ccUrl=this._jsonFileUrl=
this.url);null!=this.data&&null==this._jsonData&&(this._jsonData=this.data,this.data=null);this._jsonFileUrl?this._loadInProgress?this._queuedFetches.push({args:a}):(this._loadInProgress=!0,b=f.get({url:n._jsonFileUrl,handleAs:"json-comment-optional",preventCache:this.urlPreventCache,failOk:this.failOk}),b.addCallback(function(b){var c=a.scope?a.scope:p.global;try{n._getItemsFromLoadedData(b),n._loadFinished=!0,n._loadInProgress=!1,d=n._getItemByIdentity(a.identity),a.onItem&&a.onItem.call(c,d),n._handleQueuedFetches()}catch(z){n._loadInProgress=
!1,a.onError&&a.onError.call(c,z)}}),b.addErrback(function(b){n._loadInProgress=!1;a.onError&&a.onError.call(a.scope?a.scope:p.global,b)})):this._jsonData&&(n._getItemsFromLoadedData(n._jsonData),n._jsonData=null,n._loadFinished=!0,d=n._getItemByIdentity(a.identity),a.onItem&&(b=a.scope?a.scope:p.global,a.onItem.call(b,d)))}},_getItemByIdentity:function(a){var d=null;this._itemsByIdentity?Object.hasOwnProperty.call(this._itemsByIdentity,a)&&(d=this._itemsByIdentity[a]):Object.hasOwnProperty.call(this._arrayOfAllItems,
a)&&(d=this._arrayOfAllItems[a]);void 0===d&&(d=null);return d},getIdentityAttributes:function(a){a=this._features["dojo.data.api.Identity"];return a===Number?null:[a]},_forceLoad:function(){var a=this;this._jsonFileUrl!==this._ccUrl?(p.deprecated(this.declaredClass+": ","To change the url, set the url property of the store, not _jsonFileUrl.  _jsonFileUrl support will be removed in 2.0"),this.url=this._ccUrl=this._jsonFileUrl):this.url!==this._ccUrl&&(this._ccUrl=this._jsonFileUrl=this.url);null!=
this.data&&(this._jsonData=this.data,this.data=null);if(this._jsonFileUrl){var d=f.get({url:this._jsonFileUrl,handleAs:"json-comment-optional",preventCache:this.urlPreventCache,failOk:this.failOk,sync:!0});d.addCallback(function(b){try{if(!0!==a._loadInProgress&&!a._loadFinished)a._getItemsFromLoadedData(b),a._loadFinished=!0;else if(a._loadInProgress)throw Error(this.declaredClass+":  Unable to perform a synchronous load, an async load is in progress.");}catch(n){throw n;}});d.addErrback(function(b){throw b;
})}else this._jsonData&&(a._getItemsFromLoadedData(a._jsonData),a._jsonData=null,a._loadFinished=!0)}});m.extend(h,a);return h})},"dojo/data/util/filter":function(){define(["../../_base/lang"],function(p){var m={};p.setObject("dojo.data.util.filter",m);m.patternToRegExp=function(h,g){for(var f="^",e=null,c=0;c<h.length;c++)switch(e=h.charAt(c),e){case "\\":f+=e;c++;f+=h.charAt(c);break;case "*":f+=".*";break;case "?":f+=".";break;case "$":case "^":case "/":case "+":case ".":case "|":case "(":case ")":case "{":case "}":case "[":case "]":f+=
"\\";default:f+=e}f+="$";return g?new RegExp(f,"mi"):new RegExp(f,"m")};return m})},"dojo/data/util/simpleFetch":function(){define(["../../_base/lang","../../_base/kernel","./sorter"],function(p,m,h){var g={};p.setObject("dojo.data.util.simpleFetch",g);g.errorHandler=function(f,e){e.onError&&e.onError.call(e.scope||m.global,f,e)};g.fetchHandler=function(f,e){var c=e.abort||null,a=!1,q=e.start?e.start:0,k=e.count&&Infinity!==e.count?q+e.count:f.length;e.abort=function(){a=!0;c&&c.call(e)};var d=e.scope||
m.global;e.store||(e.store=this);e.onBegin&&e.onBegin.call(d,f.length,e);e.sort&&f.sort(h.createSortFunction(e.sort,this));if(e.onItem)for(var b=q;b<f.length&&b<k;++b){var n=f[b];a||e.onItem.call(d,n,e)}e.onComplete&&!a&&(b=null,e.onItem||(b=f.slice(q,k)),e.onComplete.call(d,b,e))};g.fetch=function(f){f=f||{};f.store||(f.store=this);this._fetchItems(f,p.hitch(this,"fetchHandler"),p.hitch(this,"errorHandler"));return f};return g})},"dojo/data/util/sorter":function(){define(["../../_base/lang"],function(p){var m=
{};p.setObject("dojo.data.util.sorter",m);m.basicComparator=function(h,g){var f=-1;null===h&&(h=void 0);null===g&&(g=void 0);if(h==g)f=0;else if(h>g||null==h)f=1;return f};m.createSortFunction=function(h,g){function f(b,a,d,c){return function(n,k){n=c.getValue(n,b);k=c.getValue(k,b);return a*d(n,k)}}for(var e=[],c,a=g.comparatorMap,q=m.basicComparator,k=0;k<h.length;k++){c=h[k];var d=c.attribute;if(d){c=c.descending?-1:1;var b=q;a&&("string"!==typeof d&&"toString"in d&&(d=d.toString()),b=a[d]||q);
e.push(f(d,c,b,g))}}return function(b,a){for(var d=0;d<e.length;){var n=e[d++](b,a);if(0!==n)return n}return 0}};return m})},"davinci/lang/workbench":function(){define([],function(){return{fileHasUnsavedChanges:"The file '${0}' has unsaved changes. Are you sure you want to close WITHOUT saving?",outlineNotAvailable:"An outline is not available",preferences:"Preferences",noUserPref:"no user preferences...",restoreDefaults:"Restore Defaults"}})},"davinci/repositoryinfo":function(){define({revision:"",
buildtime:"@buildtime@"})},"davinci/Workbench":function(){define("dcl/dcl dojo/_base/lang require ./Runtime ./ui/Dialog ./ve/metadata ./ve/utils/GeomUtils davinci/_WokbenchEditors davinci/_WokbenchMisc davinci/_Workbench_Menu davinci/_Workbench_Palette xide/widgets/ContextMenu xide/utils xide/types".split(" "),function(p,m,h,g,f,e,c,a,q,k,d,b,n,r){Function.prototype.bind=Function.prototype.bind||function(b){return dojo.hitch(b,this)};window.setInterval(function(){v.saveState&&v.updateWorkbenchState()},
5E3);var v=new (p([a,q,k,d],{declaredClass:"davinci.Workbench",_XX_last_member:!0,activePerspective:"",actionScope:[],_DEFAULT_PROJECT:"project1",_baseTitle:"Control-Freak ",hideEditorTabs:!0,_editorTabClosing:{},_shadowTabClosing:{},service:null,serviceClass:"XApp_XIDE_Workbench_Service",currentEditor:null,run2:function(){g.subscribe("/davinci/ui/widgetPropertiesChanges",function(){var b=g.currentEditor.visualEditor;b._objectPropertiesChange.apply(b,arguments)})},onResize:function(b){var a=b.explicitOriginalTarget?
b.explicitOriginalTarget:b.srcElement;if(("resize"==b.type||a.id&&-1<a.id.indexOf("dijit_layout__Splitter_")||a.nextSibling&&a.nextSibling.id&&-1<a.nextSibling.id.indexOf("dijit_layout__Splitter_"))&&(b=davinci&&g.currentEditor)&&b.onResize)b.onResize();v._originalOnResize&&v._originalOnResize();v._repositionFocusContainer()},showModal:function(b,a,d,n,c,k){return f.showModal(b,a,d,n,c,k)},showMessage:function(b,a,d,n,c){return f.showMessage(b,a,d,n,c)},showDialog:function(b){return f.showDialog(b)},
_loadActionClass:function(b){b&&"string"==typeof b.action&&h([b.action],function(a){try{if(a)b.action=new a,b.action.item=b;else debugger}catch(w){console.error("action class creation failed : "+b.action)}})},_toggleButton:function(b,a,d,n){b.checked&&(d.forEach(function(a){a!=b&&a.set("checked",!1)}),v._runAction(b.item,a,b.item.id))},_runAction:function(b,a,d){a&&g.currentEditor&&(a=g.currentEditor);if(b.run)b.run();else if(b.action)dojo.isString(b.action)&&this._loadActionClass(b),b.action.run(a);
else if(b.method&&a&&a[b.method]instanceof Function)a[b.method](d);else b.commandID&&g.executeCommand(b.commandID)},createPopup:function(a){function d(a){var d=this.contextMenuArgs||{};n.mixin(d,{owner:this,delegate:this,actionFilter:{quick:!0}});var c=new b(d,a);c.openTarget=a;c.init({preventDoubleContext:!1});c._registerActionEmitter(this);$(a).one("contextmenu",function(b){b.preventDefault();this.store||c.setActionStore(this.getActionStore(),this)}.bind(this));this.contextMenu=c}var c=a.partID,
k=a.domNode,e=a.context,f=a.openCallback;if("davinci.ve.visualEditor"===c)e.cMenu||(e.cMenu=d.apply(e.getVisualEditor(),[k]),e.getVisualEditor().add(e.cMenu));else{var q=this.getActionSets(c),g=q.clonedActionSets,q=q.actionSets;try{if(0<g.length){var r=v._createMenuTree(g,!0);v._initActionsKeys(q,a);var h=v._createMenu(r,e);h&&k&&h.bindDomNode(k);h._widgetCallback=f;h._partID=c;return h}}catch(A){logError(A,"creating popup")}}},getActionSets:function(b){var a=[];g.getExtension("davinci.actionSetPartAssociations",
function(d){return d.parts.some(function(n){if(n==b)return a.push(d.targetID),!0})});var d,n=[];a.length&&(d=g.getExtensions("davinci.actionSets",function(b){return a.some(function(a){return a==b.id})}),d.length&&d.forEach(function(b){var a=e.getLibraryActions(b.id);a.length&&(b=m.mixin({},b),b.actions=b.actions.concat(a));n.push(b)}));return{actionSets:d,clonedActionSets:n}},getFocusContainer:function(){var b=document.getElementById("focusContainer");b||(b=dojo.create("div",{"class":"focusContainer",
id:"focusContainer"},document.body),davinci.Workbench.focusContainer=b);return b},_repositionFocusContainer:function(){var b=dojo.byId("editorsStackContainer"),a=this.getFocusContainer();if(b&&a){var d=g.currentEditor;if(b=d&&d.getFocusContainerBounds?d.getFocusContainerBounds():c.getBorderBoxPageCoords(b))a.style.left=b.l+"px",a.style.top=b.t+"px",a.style.width=b.w+"px",a.style.height=b.h+"px",d&&d.getContext&&(a=d.getContext())&&a.updateFocusAll&&a.updateFocusAll()}},_removeFocusContainerChildren:function(){davinci.Workbench.focusContainer&&
(davinci.Workbench.focusContainer.innerHTML="")}}));dojo.setObject("davinci.Workbench",v);return v})},"davinci/ve/utils/GeomUtils":function(){define(["dojo/_base/window","dojo/dom-geometry","dojo/dom-style","dojo/has"],function(p,m,h,g){var f=["TABLE","TBODY","TR","TD","TH"];return{getMarginBoxPageCoords:function(e){var c;p.withDoc(e.ownerDocument,function(){var a=this.getBorderBoxPageCoords(e),f=this.getMarginExtents(e);c={l:a.l-f.l,t:a.t-f.t,w:a.w+f.l+f.r,h:a.h+f.t+f.b}}.bind(this));return c},getMarginBoxPageCoordsCached:function(e){e._maqMarginBoxPageCoords||
(e._maqMarginBoxPageCoords=this.getMarginBoxPageCoords(e));return e._maqMarginBoxPageCoords},getBorderBoxPageCoords:function(e){var c;p.withDoc(e.ownerDocument,function(){if(f.indexOf(e.tagName)){var a=e.getBoundingClientRect(),q=this.getScrollLeft(e),k=this.getScrollTop(e);c={l:a.left+q,t:a.top+k,w:a.width,h:a.height}}else{for(var a=e.offsetLeft,q=e.offsetTop,k=e.parentNode,d=e.offsetParent;k&&"BODY"!=k.tagName;){"number"==typeof k.scrollLeft&&"number"==typeof k.scrollTop&&(a-=k.scrollLeft,q-=k.scrollTop);
if(k==d)var b=m.getBorderExtents(d),a=a+(d.offsetLeft+b.l),q=q+(d.offsetTop+b.t),d=d.offsetParent;k=k.parentNode}c={l:a,t:q,w:e.offsetWidth,h:e.offsetHeight}}}.bind(this));return c},getBorderBoxPageCoordsCached:function(e){e._maqBorderBoxPageCoords||(e._maqBorderBoxPageCoords=this.getBorderBoxPageCoords(e));return e._maqBorderBoxPageCoords},getScrollLeft:function(e){e=e&&e.ownerDocument;return g("mozilla")?(e=e&&e.defaultView)?e.pageXOffset:0:(e=e&&e.body)?e.scrollLeft:0},getScrollTop:function(e){e=
e&&e.ownerDocument;return g("mozilla")?(e=e&&e.defaultView)?e.pageYOffset:0:(e=e&&e.body)?e.scrollTop:0},getMarginExtents:function(e,c){var a=c||h.getComputedStyle(e),f;a?(e=parseFloat(a.marginLeft)||0,c=parseFloat(a.marginTop)||0,f=parseFloat(a.marginRight)||0,a=parseFloat(a.marginBottom)||0):e=c=f=a=0;return{l:e,t:c,r:f,b:a,w:e+f,h:c+a}},clearGeomCache:function(e){delete e._maqBorderBoxPageCoords;delete e._maqMarginBoxPageCoords}}})},"davinci/_WokbenchEditors":function(){define(["dcl/dcl","./Runtime",
"dojo/promise/all"],function(p,m,h){return p(null,{closeAllEditors:function(){var g=dijit.byId("editors_container");g&&g.getChildren().forEach(function(f){g.closeChild(f)})},getOpenEditor:function(g){return this.currentEditor?this.currentEditor:null!=g?(g=dijit.byId(filename2id(g.getPath())))?g.editor:null:(g=dijit.byId("editors_container"))&&g.selectedChildWidget&&g.selectedChildWidget.editor?g.selectedChildWidget.editor:null},closeActiveEditor:function(){var g=dijit.byId("editors_container"),f=
dijit.byId("davinci_file_tabs");if(g&&g.selectedChildWidget&&g.selectedChildWidget.editor){var e=selectedChildWidget.id.replace(/^editor/,"shadow");g.closeChild(g.selectedChildWidget);(g=dijit.byId(e))&&f.closeChild(g)}},getAllOpenEditorIds:function(){},_showEditorTopPanes:function(){this._hideShowEditorTopPanes("block")},_hideEditorTopPanes:function(){this._hideShowEditorTopPanes("none")},_hideShowEditorTopPanes:function(g){},_editorTabClosed:function(g){if(!davinci.Workbench._editorTabClosing[g.id]){davinci.Workbench._editorTabClosing[g.id]=
!0;if(g&&g.editor&&g.editor.fileName){var f=g.id.replace(/^editor/,"shadow"),e=dijit.byId("davinci_file_tabs"),c=dijit.byId(f),a=Workbench._state.editors.indexOf(g.editor.fileName);-1!=a&&Workbench._state.editors.splice(a,1);Workbench.saveState=!0;davinci.Workbench._shadowTabClosing[f]||(e.removeChild(c),c.destroyRecursive())}dijit.byId("editors_container").getChildren().length||(Workbench._switchEditor(null),this._expandCollapsePaletteContainers(null),f=dijit.byId("editorsStackContainer"),e=dijit.byId("editorsWelcomePage"),
f&&e&&f.selectChild(e),this._hideEditorTopPanes());delete davinci.Workbench._editorTabClosing[g.id]}},openEditor:function(g,f){try{var e=g.fileName,c;"string"==typeof e?c=e.substr(e.lastIndexOf(".")+1):(c=e.getExtension(),e=e.getPath());var a=dijit.byId(filename2id(e)),q=dijit.byId("editors_container");if(a){q.selectChild(a);var k=a.editor;g.startOffset&&k.select(g)}else{var d=g.editorCreateCallback,b=m.getExtensions("davinci.editor",function(b){"string"==typeof b.extensions&&(b.extensions=b.extensions.split(","));
return dojo.some(b.extensions,function(b){return b.toLowerCase()==c.toLowerCase()})}),n=b[0];1<b.length&&dojo.some(b,function(b){n=b;return b.isDefault});Workbench._createEditor(n,e,g,f).then(function(b){d&&d.call(window,b);g.noSelect||(m.currentEditor=b)},function(b){console.error("Error opening editor for filename: "+e,b)})}}catch(r){console.error("Exception opening editor for filename: "+g&&g.fileName),console.error(r)}},_switchEditor:function(g,f){var e=m.currentEditor;m.currentEditor=g;var c=
davinci.Workbench;c._state&&(c._state.activeEditor=g?g.fileName:null);this._removeFocusContainerChildren();this._showEditorTopPanes();try{dojo.publish("/davinci/ui/editorSelected",[{editor:g,oldEditor:e}])}catch(a){console.error(a)}c._updateTitle(g);setTimeout(function(){g&&g.visualEditor&&g.visualEditor.context&&g.visualEditor.context.isActive()&&g.visualEditor.context.getTopWidgets().forEach(function(a){a.resize&&a.resize()});this._repositionFocusContainer()}.bind(this),1E3);h(this._showViewPromises).then(function(){g&&
g.focus&&g.focus();this._rearrangePalettes(g);this._expandCollapsePaletteContainers(g)}.bind(this));f||(c.saveState=!0)}})})},"davinci/_WokbenchMisc":function(){define("dcl/dcl require ./Runtime ./ui/Dialog davinci/lang/webContent ./ve/metadata dojo/_base/connect xide/manager/ServerActionBase".split(" "),function(p,m,h,g,f,e,c,a){var q=function(a,b){401==b.status||403==b.status?k():!0===a.canceled&&(a=a.ioArgs.url,(new RegExp("(^|\\.\\/|"+document.baseURI+"\\/)cmd\\/")).test(a)&&(0<=a.indexOf("getBluePageInfo")||
h.handleError(b.message)))},k=function(){var a=new g({title:f.sessionTimedOut}),b=dojo.string.substitute(f.sessionTimedOutMsg,{hrefLoc:"welcome"});a.set("content",b);dojo.connect(a,"onCancel",null,function(){window.location.href="welcome"});setTimeout(function(){window.location.href="welcome"},1E4);a.show()};return p(null,{run:function(){var a=davinci.Workbench;console.error("run ");h.run();a._initKeys();a._baseTitle=dojo.doc.title;try{a.initService()}catch(n){debugger}window.maqetta&&maqetta.TopBanner&&
maqetta.TopBanner.setup&&maqetta.TopBanner.setup();h.subscribe("/davinci/resource/resourceChanged",function(b,a){if("deleted"==b&&(b="editor-"+encodeURIComponent(a.getPath().replace(/[\/| |\t]/g,"_")).replace(/%/g,":"),a=editorIdToShadowId(b),b=dijit.byId(b),a=dijit.byId(a),b&&!b._isClosing)){var d=dijit.byId("editors_container"),n=dijit.byId("davinci_file_tabs");d.removeChild(b);b.destroyRecursive();n.removeChild(a);a.destroyRecursive()}});h.subscribe("/dojo/io/error",q);h.subscribe("/davinci/states/state/changed",
function(b){var a=h.currentEditor;"davinci.ve.themeEditor.ThemeEditor"!=a.declaredClass&&"davinci.review.editor.ReviewEditor"!=a.declaredClass&&a.visualEditor.onContentChange.apply(a.visualEditor,arguments)});h.subscribe("/davinci/ui/widgetPropertiesChanges",function(){var b=h.currentEditor.visualEditor;b._objectPropertiesChange.apply(b,arguments)});c.subscribe("/davinci/states/state/changed",function(b){var a=h.currentEditor&&"davinci.ve.PageEditor"==h.currentEditor.declaredClass&&h.currentEditor.visualEditor&&
h.currentEditor.visualEditor.context;if(a){var d,n,a=a?a.getDijit():null,c=m("davinci/ve/widget");b.newState&&!b.newState.indexOf("_show:")&&(d=a.byId(b.newState.substring(6)),d=c.getWidget(d.domNode),(n=d.getHelper())&&n.popup&&n.popup(d));b.oldState&&!b.oldState.indexOf("_show:")&&(d=a.byId(b.oldState.substring(6)),d=c.getWidget(d.domNode),(n=d.getHelper())&&n.tearDown&&n.tearDown(d))}});c.subscribe("/davinci/ui/repositionFocusContainer",function(b){a._repositionFocusContainer()});var b=this.service.serviceObject[this.serviceClass].getInfo().then(function(b){h._initializationInfo=
b;b=b.userInfo;h.isLocalInstall="maqettaUser"==b.userId;h.userName=b.userId;h.userEmail=b.email;return e.init()}).then(function(){var b=h.initialPerspective||"davinci.ui.main";dojo.query(".loading").orphan();a.showPerspective(b);a._updateTitle();initializeWorkbenchState()}).otherwise(function(b){dojo.query("#load_screen").addContent(dojo.string.substitute(f.startupError,[b.message]),"only")});a._lastAutoSave=Date.now();setInterval(dojo.hitch(this,"_autoSave"),3E4);return b},initService:function(){this.service||
(this.service=new a({serviceClass:"XApp_XIDE_Workbench_Service",serviceUrl:"./xcf/xui.php?debug\x3dtrue\x26view\x3drpc",singleton:!1}),this.service.init())},findView:function(a){if(a=dijit.byId(a))return a},location:function(){return h.location()},logoff:function(a){},unload:function(){davinci.Workbench._autoSave()},singleProjectMode:function(){return!0},getProject:function(){var a=davinci.Workbench;return a.getActiveProject()||a._DEFAULT_PROJECT},loadProject:function(a){var b=davinci.Workbench;b.setActiveProject(a);
return b.updateWorkbenchState().then(function(){location.href="cmd/configProject?configOnly\x3dtrue\x26project\x3d"+encodeURIComponent(a)})},getActiveProject:function(){return"project1"},setActiveProject:function(a){var b=davinci.Workbench;b._state||(b._state={});b._state.project=a;b.saveState=!0},setActionScope:function(a,b){davinci.Workbench.actionScope[a]=b},clearWorkbenchState:function(){var a=davinci.Workbench;a._state={};return a.updateWorkbenchState()},updateWorkbenchState:function(){delete davinci.Workbench.saveState;
return null},getDefaultMount:function(){},workbenchStateCustomPropGet:function(a){var b=davinci.Workbench;if("string"==typeof a)return b._state[a]},workbenchStateCustomPropSet:function(a,b){var d=davinci.Workbench;"string"==typeof a&&("undefined"==typeof b?delete d._state[a]:d._state[a]=b,d.saveState=!0)},_autoSave:function(){var a=davinci.Workbench,b=!1;if(this.currentEditor){var n=this.currentEditor;if(n.isReadOnly)console.error("workbench : autosave failed : isReadyOnly or is not dirty");else try{n.save(!0)}catch(r){console.error("Error while autosaving file:"+
r),b=!0}}b||(a._lastAutoSave=Date.now())},_updateTitle:function(a){var b=davinci.Workbench._baseTitle||"";a&&(b+="",a.isDirty&&(b+="*"),b+=a.item.name);dojo.doc.title=b},_initActionsKeys:function(a,b){var d=davinci.Workbench,c=b.keysDomNode||b.domNode,k={},e;dojo.forEach(a,function(b){dojo.forEach(b.actions,function(b){b.keySequence&&(k[b.keySequence]=b,e=!0)})});if(e){var f=b.context;dojo.connect(c,"onkeydown",function(b){b=d._keySequence(b);b=k[b];!b||b.action.shouldShow&&!b.action.shouldShow(f)||
b.action.isEnabled(f)&&d._runAction(b,f)})}},_initKeys:function(){var a=davinci.Workbench,b={all:[]},n=h.getExtensions("davinci.keyBindings");dojo.forEach(n,function(a){var d=a.contextID||"all",n=b[d];n||(n=b[d]=[]);n[a.sequence]=a.commandID});a.keyBindings=b},handleKey:function(a){var b=davinci.Workbench;if(b.keyBindings){a=b._keySequence(a);var d;b.currentContext&&b.keyBindings[b.currentContext]&&(d=b.keyBindings[b.currentContext][a]);d||(d=b.keyBindings.all[a]);if(d)return h.executeCommand(d),
!0}},_keySequence:function(a){var b=[];window.event?(window.event.ctrlKey&&b.push("M1"),window.event.shiftKey&&b.push("M2"),window.event.altKey&&b.push("M3")):((a.ctrlKey||2==a.modifiers||3==a.modifiers||5<a.modifiers)&&b.push("M1"),(a.shiftKey||3<a.modifiers)&&b.push("M2"),a.modifiers?(a.altKey||a.modifiers%2)&&b.push("M3"):a.altKey&&b.push("M3"));var d=String.fromCharCode(a.keyCode);/[A-Z0-9]/.test(d)||(d={46:"del",114:"f3"}[a.keyCode]||"xxxxxxxxxx");d=d.toUpperCase();" "==d&&(d="' '");b.push(d);
return b.join("+")},setupGlobalKeyboardHandler:function(){var a=h.getExtensions("davinci.actionSets");dojo.forEach(a,function(b){"davinci.ui.main"!=b.id&&"davinci.ui.editorActions"!=b.id||dojo.forEach(b.actions,function(b){b.keyBinding&&h.registerKeyBinding(b.keyBinding,b)})})}})})},"davinci/_Workbench_Menu":function(){define("dcl/dcl dojo/_base/declare ./Runtime dijit/Menu dijit/MenuBar dijit/MenuItem dijit/MenuSeparator dijit/PopupMenuBarItem dijit/form/DropDownButton davinci/_WokbenchEditors davinci/_WokbenchMisc".split(" "),
function(p,m,h,g,f,e,c,a,q){var k=m(g,{menuOpened:function(a){},_openMyself:function(a){this.menuOpened(a);var b;try{var d=document.getElementById("menuOverlayDiv");d||(d=dojo.create("div",{id:"menuOverlayDiv",style:"left:0px; top:0px; width:100%; height:100%; position:absolute; z-index:10;"},document.body));if(this.adjustPosition){var c=this.adjustPosition(a);b=dijit.popup.open;dijit.popup.open=function(a){a.x+=c.x;a.y+=c.y;b.call(dijit.popup,a)}}this.onClose=function(){var b=document.getElementById("menuOverlayDiv");
b&&b.parentNode.removeChild(b)}.bind(this);this.inherited(arguments)}finally{b&&(dijit.popup.open=b)}}});return p(null,{declaredClass:"davinci.Workbench_Menu",updateMenubar:function(a,b){console.error("updateMenubar")},_updateMainMenubar:function(a,b){console.error("_updateMainMenubar")},_addItemsToMenubar:function(a,b){console.error("_addItemsToMenubar")},_createMenu:function(a,b){var d,c;a.menus?(d=new g({parentMenu:a}),c=a.menus,a="onOpen"):(d=new k({}),c=a,a="menuOpened");d.domNode.style.display=
"none";d.actionContext=b;this._rebuildMenu(d,c);dojo.connect(d,a,this,function(b){d._widgetCallback&&d._widgetCallback(b);this._rebuildMenu(d,c).focus()});return d},_rebuildMenu:function(a,b){dojo.forEach(a.getChildren(),function(b){a.removeChild(b);b.destroy()});a.focusedChild=null;var d,k;b.forEach(function(b,n){b.menus.length&&(b.isSeparator&&0<n&&(d=!0),b.menus.forEach(function(b){d&&k&&(a.addChild(new c({})),d=!1);k=!0;var n=b.label;b.action&&b.action.getName&&(n=b.action.getName());if(b.separator)b=
davinci.Workbench._createMenu(b),b=new e({label:n,popup:b,id:b.id+"item"}),b.actionContext=a.actionContext,a.addChild(b);else{var f=!0;b.isEnabled&&(f=h.getSelection(),f=(f=f[0]&&f[0].resource)?b.isEnabled(f):!1);if(b.action){if(b.action.shouldShow&&!b.action.shouldShow(a.actionContext,{menu:a}))return;f=b.action.isEnabled&&b.action.isEnabled(a.actionContext)}n={label:n,id:b.id,disabled:!f,onClick:dojo.hitch(this,"_runAction",b,a.actionContext)};b.iconClass&&(n.iconClass=b.iconClass);a.addChild(new e(n))}},
this))},this);return a},_createMenuTree:function(a,b){function d(b,a,d){a=(a||"additions").split("/");var n=c;davinci.Workbench._loadActionClass(b);var k=a[a.length-1];if(1<a.length)for(var e=0,f=a.length-1;e<f;e++){var q;a:{q=0;for(var g=n.length;q<g;q++)for(var r=0,h=n[q].menus.length;r<h;r++)if(a[e]==n[q].menus[r].id){q=n[q].menus[r].menus;break a}q=void 0}q&&(n=q)}e=0;for(f=n.length;e<f;e++)if(n[e].id==k){a=n[e].menus;a.push(b);if(b.separator){d=!1;a=b.menus=[];for(n=0;n<b.separator.length;n+=
2)k=b.separator[n],d="additions"==k,a.push({id:k,isSeparator:b.separator[n+1],menus:[]});d||a.push({id:"additions",isSeparator:!1,menus:[]})}return}d&&c.push({id:k,isSeparator:!1,menus:[b]})}a||(a=h.getExtensions("davinci.actionSets",function(b){return 0==h.getExtensions("davinci.actionSetPartAssociations",function(a){return a.targetID==b.id}).length}));for(var c=[],k=0,e=a.length;k<e;k++){var f=a[k];if(f.visible&&f.menu)for(var q=0,g=f.menu.length;q<g;q++){var u=f.menu[q];if(u.__mainMenu)for(var m=
0;m<u.separator.length;m+=2)c.push({id:u.separator[m],isSeparator:u.separator[m+1],menus:[]});else if(d(u,u.path,b),u.populate instanceof Function){var u=u.populate(),D;for(D in u)d(u[D],u[D].menubarPath)}}}k=0;for(e=a.length;k<e;k++)if(f=a[k],f.visible)for(q=0,g=f.actions.length;q<g;q++)D=f.actions[q],D.menubarPath&&d(D,D.menubarPath,b);return c}})})},"davinci/_Workbench_Palette":function(){define(["dcl/dcl","davinci/Runtime"],function(p,m){var h={};return p(null,{declaredClass:"davinci.Workbench_Menu",
_rearrangePalettes:function(g){var f,e,c;g?((e=m.getExtensions("davinci.editor",function(a){return g?a.id===g.editorID:!1}))&&0<e.length&&(f=e[0].palettePerspective),e=g._rightPaletteExpanded,c=g._leftPaletteExpanded):f=m.initialPerspective||"davinci.ui.main";f&&((f=m.getExtension("davinci.perspective",f))||console.error("---error"),dojo.forEach(f.views,function(a){var c=a.viewID,k=a.position;0>k.indexOf("bottom")&&(k+="-top");if(c=dijit.byId(c)){var d=c.getParent(),k=mainBody.tabs.perspective[k];
d!=k&&(d&&d.removeChild(c),a.hidden||(k.addChild(c),d=k));d&&(a.hidden?d.removeChild(c):a.selected&&(d._maqDontExpandCollapse=!0,d.selectChild(c),delete d._maqDontExpandCollapse))}}));g&&(g.hasOwnProperty("_rightPaletteExpanded")&&(g._rightPaletteExpanded=e),g.hasOwnProperty("_leftPaletteExpanded")&&(g._leftPaletteExpanded=c))},_nearlyCollapsed:function(g){g=dojo.style(g,"width");"string"==typeof g&&(g=parseInt(g));return 91>g},_expandCollapsePaletteContainer:function(g){if(g&&g.domNode&&(g=davinci.Workbench.findPaletteContainerNode(g.domNode),
g.id)){var f=g._maqExpanded,e;this._nearlyCollapsed(g)&&(f=!1,e=91<=h[g.id].expandToSize?h[g.id].expandToSize:h[g.id].initialExpandToSize);f?this.collapsePaletteContainer(g):this.expandPaletteContainer(g,{expandToSize:e})}},_expandCollapsePaletteContainers:function(g,f){var e=dijit.byId("left_mainBody"),c=dijit.byId("right_mainBody");if(g){var a=m.getExtensions("davinci.editor",function(a){return a.id===g.editorID});if(a&&0<a.length){var a=a[0].expandPalettes,q;e&&((q=g&&g.hasOwnProperty("_leftPaletteExpanded")?
g._leftPaletteExpanded:a&&0<=a.indexOf("left"))?this.expandPaletteContainer(e.domNode,f):this.collapsePaletteContainer(e.domNode,f));c&&((q=g&&g.hasOwnProperty("_rightPaletteExpanded")?g._rightPaletteExpanded:a&&0<=a.indexOf("right"))?this.expandPaletteContainer(c.domNode,f):this.collapsePaletteContainer(c.domNode,f))}}else e&&this.collapsePaletteContainer(e.domNode,f),c&&this.collapsePaletteContainer(c.domNode,f)},findPaletteContainerNode:function(g){for(var f;g&&"BODY"!=g.tagName;){if(dojo.hasClass(g,
"davinciPaletteContainer")){f=g;break}g=g.parentNode}return f},collapsePaletteContainer:function(g,f){if((g=davinci.Workbench.findPaletteContainerNode(g))&&g.id){var e=g.id,c=dojo.style(g,"width"),a=dijit.byNode(g),q=dojo.query("[role\x3dtablist]",g);if(a&&0<q.length){var q=dojo.marginBox(q[0]),k=a.getParent();k&&k.resize&&q&&q.w&&(this._nearlyCollapsed(g)||f&&f.dontPreserveWidth||(h[e].expandToSize=c),g.style.width=q.w+"px",k.resize(),a._isCollapsed=!0)}dojo.removeClass(g,"maqPaletteExpanded");g._maqExpanded=
!1;davinci.Workbench._repositionFocusContainer();if(f=m.currentEditor)"left_mainBody"==g.id?f._leftPaletteExpanded=!1:"right_mainBody"==g.id&&(f._rightPaletteExpanded=!1)}},expandPaletteContainer:function(g,f){f=f&&f.expandToSize;if((g=davinci.Workbench.findPaletteContainerNode(g))&&g.id){var e=g.id,c=dijit.byNode(g);f&&(h[e].expandToSize=f);c&&h[e].expandToSize&&(f=c.getParent())&&f.resize&&(g.style.width=h[e].expandToSize+"px",f.resize(),delete c._isCollapsed);dojo.addClass(g,"maqPaletteExpanded");
g._maqExpanded=!0;davinci.Workbench._repositionFocusContainer();if(f=m.currentEditor)"left_mainBody"==g.id?f._leftPaletteExpanded=!0:"right_mainBody"==g.id&&(f._rightPaletteExpanded=!0)}}})})},"davinci/ui/widgets/OutlineTree":function(){define(["dojo/_base/declare"],function(p){return p(null,{})})},"davinci/davinci_":function(){define("dijit/dijit ./Workbench ./ve/palette/HtmlWidgets ./ve/views/SwitchingStyleView ./actions/UndoAction ./actions/SelectLayoutAction ./actions/RedoAction ./ve/actions/CopyAction ./ve/actions/CutAction ./ve/actions/DeleteAction ./ve/actions/PasteAction ./ve/actions/DuplicateAction ./ve/actions/EditValueAction ./ve/actions/EditPropertiesAction ./ve/actions/SurroundAction ./ve/actions/SelectParentAction ./ve/actions/SelectAncestorAction ./ve/actions/UnselectAllAction ./ve/actions/ArrangeAction ./ve/actions/MoveToFrontAction ./ve/actions/MoveToBackAction ./ve/actions/MoveForwardAction ./ve/actions/MoveBackwardAction ./ve/actions/OtherAction ./ve/actions/AddState ./ve/actions/RemoveState ./ve/actions/ModifyState ./ve/actions/ManageStates ./ve/actions/NewWidgetsCurrentState ./ve/actions/HighlightBaseWidgets ./ve/actions/ShowInOutline ./ve/PageEditor ./html/ui/HTMLEditor ./ve/prefs/HTMLEditPreferences dijit/layout/LayoutContainer ./commands/OrderedCompoundCommand ./version".split(" "),
function(){})},"davinci/ve/palette/HtmlWidgets":function(){define(["dojo/_base/declare","davinci/workbench/ViewPart"],function(p,m,h){return p("davinci.ve.palette.HtmlWidgets",m,{constructor:function(g,f){dojo.subscribe("/davinci/ui/editorSelected",dojo.hitch(this,this._editorSelected))},_editorSelected:function(g){g.editor&&g.editor.supports("palette")?(this.setContext([g.editor.getContext()]),dojo.removeClass(this.palette.domNode,"dijitHidden")):(this.palette.domNode.scrollTop=0,dojo.addClass(this.palette.domNode,
"dijitHidden"))},postCreate:function(){this.inherited(arguments);this.attachToolbar();this.palette=new h({toolbarDiv:this.toolbarDiv});this.palette.descriptors="dijit,dojox,html,OpenAjax";this.setContent(this.palette);this.palette._loadPalette();dojo.addClass(this.palette.domNode,"dijitHidden")},setContext:function(g){this.palette.setContext(g[0])}})})},"davinci/workbench/ViewPart":function(){define(["dojo/_base/declare","./_ToolbaredContainer","../ve/States","../Runtime"],function(p,m,h,g){return p("davinci.workbench.ViewPart",
m,{constructor:function(f,e){this.viewExt=f.view;this.subscriptions=[];this.publishing={}},startup:function(){this.inherited(arguments);this.domNode.view=this;this.viewExt.startup&&this.viewExt.startup()},subscribe:function(f,e){this.subscriptions.push(dojo.subscribe(f,this,e))},publish:function(f,e){this.publishing[f]=!0;try{dojo.publish(f,e)}catch(c){console.error(c)}delete this.publishing[f]},destroy:function(){dojo.forEach(this.subscriptions,dojo.unsubscribe);delete this.subscriptions},_getViewActions:function(){var f=
this.toolbarID||this.viewExt.id,e=[];g.getExtensions("davinci.viewActions",function(c){if(f==c.viewContribution.targetID)return e.push(c.viewContribution),!0});return e}})})},"davinci/workbench/_ToolbaredContainer":function(){define(["dojo/_base/declare","dijit/layout/_LayoutWidget","dijit/_Templated"],function(p,m,h){return p("davinci.workbench._ToolbaredContainer",[m,h],{templateString:"\x3cdiv\x3e\x3cdiv dojoAttachPoint\x3d'titleBarDiv' class\x3d'palette_titleBarDiv'\x3e\x3c/div\x3e\x3cdiv dojoAttachPoint\x3d'toolbarDiv' class\x3d'toolbaredContainer_toolbarDiv'\x3e\x3c/div\x3e\x3cdiv dojoAttachPoint\x3d'containerNode'\x3e\x3c/div\x3e\x3c/div\x3e",
gutters:!1,_toolbarCreated:{},layout:function(){var g=[{domNode:this.titleBarDiv,layoutAlign:"top"},{domNode:this.toolbarDiv,layoutAlign:"top"},{domNode:this.containerNode,layoutAlign:"client"}];dijit.layout.layoutChildren(this.domNode,this._contentBox,g);this._containerContentBox=dijit.layout.marginBox2contentBox(this.containerNode,g[2]);var f=dijit.byNode(this.containerNode);f&&f.resize&&f.resize(this._containerContentBox);dojo.marginBox(this.containerNode,g[2])},setContent:function(g){this.mainWidget=
g;g=g.domNode||g;dojo.place(g,this.containerNode,"replace");this.containerNode=g;this.toolbarCreated(this.declaredClass)||this._createToolbar(this.declaredClass);this.titleBarDiv.innerHTML='\x3cspan class\x3d"paletteCloseBox"\x3e\x3c/span\x3e\x3cspan class\x3d"titleBarDivTitle"\x3e'+this.title+"\x3c/span\x3e";g=dojo.query(".paletteCloseBox",this.titleBarDiv);0<g.length&&dojo.connect(g[0],"click",this,function(f){davinci.Workbench.collapsePaletteContainer(f.currentTarget)});this._started&&this.layout()},
removeContent:function(){var g=dojo.doc.createElement("div");dojo.place(g,this.containerNode,"replace");this.containerNode=g;this.mainWidget&&this.mainWidget.destroy();delete this.mainWidget},_getViewActions:function(){},getTopAdditions:function(){},_createToolbar:function(g){var f=require("davinci/Workbench"),e=this.getToolbarDiv(),c=this.getTopAdditions();c&&e.appendChild(c);this.toolbarMenuActionSets&&(c="m"+Date.now(),e=dojo.create("span",{id:c+"_menucontainer","class":"paletteDropdown"},e),e=
dojo.create("span",{id:c+"_menu"},e),f.updateMenubar(e,this.toolbarMenuActionSets));(e=this._getViewActions())&&e.length&&(c=dojo.create("div",{"class":"toolbaredContainer_toolbarDiv"}),c=dojo.create("span",{style:{display:"inline-block"}},c),f=f._createToolBar("toolbarPath",c,e,this._getViewContext()),dojo.style(f.domNode,{display:"inline-block","float":"left"}),this.toolbarCreated(g,f))},_getViewContext:function(){return this},getToolbarDiv:function(){return this.toolbarDiv},toolbarCreated:function(g,
f){1<arguments.length&&(this._toolbarCreated[g]=f);return this._toolbarCreated[g]},attachToolbar:function(){var g=this.toolbarCreated(this.declaredClass),f=this.getToolbarDiv();g&&g.domNode&&f&&(f.innerHTML="",f.appendChild(g.domNode))}})})},"davinci/ve/States":function(){"undefined"===typeof davinci&&(davinci={});davinci.AppStatesDontInitialize=!0;define("dojo/_base/declare dojo/query dojo/dom-class dojo/dom-style dojo/_base/window dijit/registry davinci/Runtime davinci/maqetta/AppStates ./commands/EventCommand davinci/workbench/Preferences davinci/lang/ve".split(" "),
function(p,m,h,g,f,e,c,a,q,k,d){var b=document;p=p(a,{_update:function(b,a){c.currentEditor&&"davinci.ve.PageEditor"==c.currentEditor.declaredClass&&b&&b._dvWidget&&(b._maqAppStates||!b._maqDeltas)&&this._refresh(b._dvWidget)},_refresh:function(b){var a=b.getParent();a.dijitWidget?this._refresh(a):b&&b.resize&&b.resize()},_updateEvents:function(b,a,d){if(b&&b._dvWidget){b=b._dvWidget;var c=["onclick","onmouseover","onmouseout","onfocus","onblur"],n,k;for(k in c){var e=c[k],f=b&&b.properties&&b.properties[e];
if("string"==typeof f&&0<=f.indexOf("davinci.states.setState")){var g=f,f=f.replace("'"+a+"'","'"+d+"'");f!==g&&(n=n||{},n[e]=f)}}if(a=this.getContext())n=new q(b,n),a.getCommandStack().execute(n)}},normalize:function(b,a,d,c){switch(b){case "style":var n=this.getStatesListCurrent(a);for(b=0;b<n.length;b++)n[b]="Normal";if(a=this.getStyle(a,n,d))for(b=0;b<a.length;b++)a[b][d]&&(c=a[b][d])}return c},normalizeArray:function(b,a,d,c){c=dojo.clone(c);switch(b){case "style":var n=this.getStatesListCurrent(a);
for(b=0;b<n.length;b++)n[b]="Normal";if(a=this.getStyle(a,n,d)){for(b=0;b<a.length;b++){d=a[b];for(var k in d)for(d=c.length-1;0<=d;d--){var n=c[d],e;for(e in n)if(e==k){c.splice(d,1);break}}}c=c.concat(a)}}return c},getEditor:function(){return c.currentEditor},getContext:function(){var b=this.getEditor();return b&&(b.getContext&&b.getContext()||b.context)},getDocument:function(){var b=this.getContext();return b&&b.getDocument&&b.getDocument()},resetState:function(b){if(b){var a=this.getStateContainersForNode(b);
b=this.getFocus(b.ownerDocument.body);for(var d=0;d<a.length;d++){var c=a[d],n=this.getState(c);this.setState(n,c,{focus:b&&c==b.stateContainerNode&&n==b.state,updateWhenCurrent:!0,silent:!1})}}},_updateSrcState:function(b,a){var d=b&&b._dvWidget;if(d){var c=d._srcElement.getAttribute(davinci.states.APPSTATES_ATTRIBUTE),n=d._srcElement.getAttribute(davinci.states.DELTAS_ATTRIBUTE);d&&d._srcElement&&(b=this.serialize(b),b.maqAppStates&&b.maqAppStates.trim(),b.maqAppStates?d._srcElement.addAttribute(davinci.states.APPSTATES_ATTRIBUTE,
b.maqAppStates):d._srcElement.removeAttribute(davinci.states.APPSTATES_ATTRIBUTE),b.maqDeltas&&b.maqDeltas.trim(),b.maqDeltas?d._srcElement.addAttribute(davinci.states.DELTAS_ATTRIBUTE,b.maqDeltas):d._srcElement.removeAttribute(davinci.states.DELTAS_ATTRIBUTE),b=d._srcElement.getAttribute(davinci.states.APPSTATES_ATTRIBUTE),d=d._srcElement.getAttribute(davinci.states.DELTAS_ATTRIBUTE),(c!==b||n!==d)&&(c=this.getEditor())&&c._visualChanged&&c._visualChanged(a))}},_removeStateFromNodeRecursive:function(b,
a){var d=b._dvWidget;if(b&&d&&a)for(this._removeStateFromNode(b,a),b=d.getChildren(),d=0;d<b.length;d++)this._removeStateFromNodeRecursive(b[d].domNode,a)},_removeStateFromNode:function(b,a){if(b&&b._maqDeltas&&b._maqDeltas[a]){delete b._maqDeltas[a];a=!1;for(var d in b._maqDeltas)if("undefined"!==d){a=!0;break}a||delete b._maqDeltas;this._updateSrcState(b)}},removeUnusedStates:function(b){if(b){b=b.getAllWidgets();for(var a=0;a<b.length;a++){var d=b[a].domNode;if("BODY"!==d.tagName&&d&&d._maqDeltas){var c=
this.getAllStatesForNode(d),n;for(n in d._maqDeltas)"undefined"!==n&&0>c.indexOf(n)&&this._removeStateFromNode(d,n)}}}},_getStateIndex:function(b){return b&&"Normal"!=b&&"undefined"!=b?b:"undefined"},getCurrentStateIndex:function(){return this._getStateIndex(this.getState())},getApplyToStateIndex:function(b){var a=this.getState();return this._getStateIndex("current"===b&&a&&"Normal"!=a&&"undefined"!=a?a:void 0)},getEffectiveDisplayValue:function(b,a,d,c){b=a?a.domNode:null;a="none";var n=d||"undefined";
if(c&&"string"==typeof c[n]&&"$MAQ_DELETE_PROPERTY$"!=c[n])a=c[n],k=!0;else if(b){var k=!1;if(b._maqDeltas&&(!c||"$MAQ_DELETE_PROPERTY$"!=c[n])){var e=b._maqDeltas[d]&&b._maqDeltas[d].style;if(e)for(d=0;d<e.length;d++){var f=e[d],q;for(q in f)"display"==q&&(a=f[q],k=!0)}}if(!k){if(c&&"string"==typeof c.undefined)a=c.undefined;else{c=b._maqDeltas&&b._maqDeltas.undefined&&b._maqDeltas.undefined.style;n=!1;if(c)for(d=0;d<c.length;d++)for(q in f=c[d],f)"display"==q&&(a=f[q],n=!0);n||(a=g.get(b,"display"))}n=
"undefined"}if(0==b.offsetLeft&&0==b.offsetTop&&0==b.offsetWidth&&0==b.offsetHeight)a="none";else for(;b&&"BODY"!=b.tagName.toUpperCase();){if(b&&b.ownerDocument&&b.ownerDocument.defaultView&&"none"==g.get(b,"display")){a="none";break}b=b.parentNode}}else a="none";return{effectiveDisplayValue:a,effectiveState:n}},propertyDefinedForAnyCurrentState:function(b,a){var d,c=b._maqDeltas;if(c){b=this.getStateContainersForNode(b);var n=b.length-1;a:for(;0<=n;n--){var k=this.getState(b[n]),e=k&&k!=this.NORMAL?
k:"undefined";if(e=c[e]&&c[e].style)for(var f=0;f<e.length;f++)for(var q=e[f],g=0;g<a.length;g++)if(q.hasOwnProperty(a[g])){d=k;break a}}}return d},_customStateActive:function(b){return b?this.getState(b.rootNode):!1},updateStateIcons:function(a){a&&a.editor&&a.editor==c.currentEditor&&"davinci.ve.PageEditor"==a.editor.declaredClass&&f.withDoc(b,function(){var b=m(".manageStatesButton")[0],c=e.byNode(b),b=m(".manageStatesIcon")[0];c&&b&&(this.manageStatesActive(a)?(h.remove(b,"manageStatesIconDisabled"),
c.set("disabled",!1)):(h.add(b,"manageStatesIconDisabled"),c.set("disabled",!0)));var c=k.getPreferences("davinci.ve.editorPrefs",davinci.Workbench.getProject()).newWidgetsCurrentState,b=m(".newWidgetsCurrentStateButton")[0],n=e.byNode(b),b=m(".newWidgetsCurrentStateIcon")[0];n&&b&&(this.newWidgetsCurrentStateActive(a)?h.remove(b,"newWidgetsCurrentStateIconDisabled"):h.add(b,"newWidgetsCurrentStateIconDisabled"),c?(h.remove(b,"newWidgetsCurrentStateIconOff"),h.add(b,"newWidgetsCurrentStateIconOn"),
n.set("title",d.NewWidgetsCurrentStateTitleCurrentState)):(h.remove(b,"newWidgetsCurrentStateIconOn"),h.add(b,"newWidgetsCurrentStateIconOff"),n.set("title",d.NewWidgetsCurrentStateTitleBackground)))}.bind(this))},manageStatesActive:function(b){return b&&b.getSelection().length},newWidgetsCurrentStateActive:function(b){return this._customStateActive(b)},highlightBaseWidgetsActive:function(b){return this._customStateActive(b)},updateHighlightsBaseStateWidgets:function(b){},initialize:function(){this.subscribed=
!0}});davinci.ve.states=new p;davinci.ve.states.initialize();return davinci.ve.states})},"davinci/maqetta/AppStates":function(){define("dojo/_base/connect dojo/dom-style dojo/dom dojo/_base/html dojo/_base/window dojo/_base/array dojo/parser require dojo/json dojo/_base/lang".split(" "),function(p,m,h,g,f,e,c,a,q,k){m=function(){};m.prototype={NORMAL:"Normal",DELTAS_ATTRIBUTE:"data-maq-deltas",DELTAS_ATTRIBUTE_P6:"dvStates",APPSTATES_ATTRIBUTE:"data-maq-appstates",APPSTATES_ATTRIBUTE_P6:"dvStates",
reImportant:/^(.*)(!\ *important)(.*)/,isStateContainer:function(b){return!(!b||!b._maqAppStates)},getStateContainersForNode:function(b){for(var a=[];b;){b._maqAppStates&&a.splice(0,0,b);if("BODY"==b.tagName)break;b=b.parentNode}return a},getAllStateContainers:function(b){function a(b){b._maqAppStates&&d.push(b);b=c._getChildrenOfNode(b);for(var k=0;k<b.length;k++)a(b[k])}var d=[],c=this;a(b);return d},getStatesArray:function(b,a,d,c){var k=[];if(b)for(b=b.parentNode;b;){if(b._maqAppStates)if(b==
c)k.splice(0,0,{node:b,oldState:a,newState:d});else{var e=b._maqAppStates.states?b._maqAppStates.states.current:void 0;k.splice(0,0,{node:b,oldState:e,newState:e})}if("BODY"==b.tagName)break;b=b.parentNode}return k},findStateContainer:function(b,a){if(b)for(b=b.parentNode;b;){if(b._maqAppStates&&(!a||a==this.NORMAL||b._maqAppStates.states&&0<=b._maqAppStates.states.indexOf(a)))return b;if("BODY"==b.tagName)break;b=b.parentNode}},getAllStatesForNode:function(b){var a=[this.NORMAL];if(b)for(b=b.parentNode;b;){if(b._maqAppStates&&
b._maqAppStates.states)for(var d=b._maqAppStates.states?b._maqAppStates.states:[],c=0;c<d.length;c++)a.push(d[c]);if("BODY"==b.tagName)break;b=b.parentNode}return a},getStatesListCurrent:function(b){var a=[];if(b)for(b=b.parentNode;b;){b._maqAppStates&&a.splice(0,0,b._maqAppStates.current);if("BODY"==b.tagName)break;b=b.parentNode}return a},getAllCurrentStates:function(b){b=this.getAllStateContainers(b);for(var a=[],d=0;d<b.length;d++){var c=b[d],k=this.getState(c);a.push({stateContainerNode:c,state:k})}return a},
getStates:function(b){var a=b&&b._maqAppStates;b=["Normal"];if(a)for(var a=a.states?a.states:[],d=0;d<a.length;d++){var c=a[d];"Normal"!=c&&b.push(c)}return b},_getSCNodeFromElemOrEvent:function(b,a){a&&a.tagName&&a.nodeName?a=a._maqAppStates?a:this.findStateContainer(a,b):a&&a.target&&a.currentTarget?(a=a.currentTarget,a._maqAppStates||(a=this.findStateContainer(a,b))):a=this.getContainer();return a},_updateSrcState:function(b){},hasState:function(b,a){return!!(b&&b._maqAppStates&&b._maqAppStates.states&&
0<=b._maqAppStates.states.indexOf(a))},getState:function(b){return b&&b._maqAppStates&&b._maqAppStates.current},setState:function(b,a,d){var c=d?d.updateWhenCurrent:!1,k=d?d.silent:!1,e=d?d.focus:!1;(a=this._getSCNodeFromElemOrEvent(b,a))&&a._maqAppStates&&(c||a._maqAppStates.current!=b)&&(c=a._maqAppStates.current,this.isNormalState(b)?(a._maqAppStates.hasOwnProperty("current")&&delete a._maqAppStates.current,b=void 0):a._maqAppStates.current=b,e&&this._setFocus(b,a),d&&d.hasOwnProperty("initial")&&
(d.initial?a._maqAppStates.initial=b:a._maqAppStates.initial&&delete a._maqAppStates.initial),k||p.publish("/maqetta/appstates/state/changed",[{node:a,newState:b,oldState:c,stateContainerNode:a}]),this._updateSrcState(a,!b))},getInitial:function(b){return b&&b._maqAppStates&&b._maqAppStates.initial},getFocus:function(b){if(!b)return null;b=this.getAllStateContainers(b);for(var a=0;a<b.length;a++){var d=b[a]._maqAppStates;if(d&&d.hasOwnProperty("focus"))return{stateContainerNode:b[a],state:d.focus}}return null},
_setFocus:function(b,a){if(a&&a._maqAppStates){var d=a.ownerDocument&&a.ownerDocument.body;if(d){var c=this.getFocus(d);if(!c||c.stateContainerNode!=a||c.state!=b){for(var c=this.getAllStateContainers(d),k=0;k<c.length;k++)(d=c[k]._maqAppStates)&&delete d.focus;a._maqAppStates.focus=b}}}},isNormalState:function(b){0==arguments.length&&(b=this.getState());return!b||b==this.NORMAL},_styleArrayMixin:function(b,a){if(a){for(var d=0;d<a.length;d++){var c=a[d],k;for(k in c)for(c=b.length-1;0<=c;c--)b[c].hasOwnProperty(k)&&
b.splice(c,1)}for(d=0;d<a.length;d++)b.push(a[d])}},getStyle:function(b,a,d){for(var c,k=[],e=0;e<a.length;e++)if(c=a[e],c=b&&b._maqDeltas&&b._maqDeltas[c]&&b._maqDeltas[c].style,this._styleArrayMixin(k,c),2<arguments.length&&k)for(c=k.length-1;0<=c;c--){var f=k[c],n;for(n in f)if(n!=d){k.splice(c,1);break}}return k},hasStyle:function(b,a,d){if(b&&d)if(b._maqDeltas&&b._maqDeltas[a]&&b._maqDeltas[a].style)for(b=b._maqDeltas[a].style,a=0;a<b[a];a++){if(b[a].hasProperty(d))return!0}else return!1},setStyle:function(b,
a,d,c){if(b&&d){b._maqDeltas=b._maqDeltas||{};b._maqDeltas[a]=b._maqDeltas[a]||{};b._maqDeltas[a].style=b._maqDeltas[a].style||[];var k=b._maqDeltas[a].style;if(d)for(var e=0;e<d.length;e++){var f=d[e],q;for(q in f)for(f=k.length-1;0<=f;f--){var n=k[f],g;for(g in n)if(q==g){k.splice(f,1);break}}}var h;if(d)for(f=0;f<d.length;f++)for(var r in d[f])e=d[f][r],"undefined"!=typeof e&&null!==e&&("undefined"==typeof h&&(h=[]),q={},q[r]=this._getFormattedValue(r,e),h.push(q));b._maqDeltas[a].style=k&&h?k.concat(h):
k?k:h?h:void 0;c||p.publish("/davinci/states/state/style/changed",[{node:b,state:a,style:d}]);this._updateSrcState(b)}},_convertStyleName:function(b){if(0<=b.indexOf("-")){var a=b.split("-");b=a[0];for(var d=1;d<a.length;d++){var c=a[d];b+=c.charAt(0).toUpperCase()+c.substring(1)}}return b},_DYNAMIC_PROPERTIES:{width:1,height:1,top:1,right:1,bottom:1,left:1},_getFormattedValue:function(b,d){if(b in this._DYNAMIC_PROPERTIES){if("string"!=typeof d)return d+"px";b=a("dojo/_base/lang").trim(d);/^[-+]?[0-9]*\.?[0-9]+$/.test(b)&&
(d=b+"px")}return d},_getStatesListUsingPropName:function(b,a){var d=[];if(b)for(var c=0;c<b.length;c++)d.push(b[c][a]);return d},_resetAndCacheNormalStyle:function(b,a){if(b&&a)for(var d=0;d<a.length;d++){var c=this._getStatesListUsingPropName(a,"oldState"),e=this.getStyle(b,c),c=this._getStatesListUsingPropName(a),c=this.getStyle(b,c);if(e)for(var f=0;f<e.length;f++){var q=e[f],n;for(n in q)q=this._convertStyleName(n),b.style[q]=""}if(c)for(e=0;e<c.length;e++){var f=c[e],g;for(g in f){var q=this._convertStyleName(g),
h=b.style,m=this._getFormattedValue(g,f[g])+"",p=m?m.match(this.reImportant):null;p?(m=p[1]+p[3],m=k.trim(m),h.setProperty?h.setProperty(g,m,"important"):b.style[q]=m):b.style[q]=m}}}},_update:function(b,a){if(b&&b._maqDeltas){var d=this._getStatesListUsingPropName(a,"newState"),d=this.getStyle(b,d);this._resetAndCacheNormalStyle(b,a);if(d)for(a=0;a<d.length;a++){var c=d[a],e;for(e in c){var f=this._convertStyleName(e),q=c[e]+"",n=q?q.match(this.reImportant):null;n?(q=n[1]+n[3],q=k.trim(q),c.setProperty?
c.setProperty(e,q,"important"):b.style[f]=q):b.style[f]=q}}}},isContainer:function(b){var a=!1;if(b){var d=this.getDocument();if(b===(d&&d.body)||"BODY"==b.tagName)a=!0}return a},getContainer:function(){return document.body},add:function(b,a,d){b&&!this.hasState(b,a)&&(d=d&&d.index,b._maqAppStates=b._maqAppStates||{},b._maqAppStates.states=b._maqAppStates.states||[],"number"==typeof d&&0<=d?b._maqAppStates.states.splice(d,0,a):b._maqAppStates.states.push(a),p.publish("/davinci/states/state/added",
[{node:b,state:a}]),this._updateSrcState(b))},remove:function(b,a){if(b&&b._maqAppStates&&b._maqAppStates.states&&this.hasState(b,a)){var d=b._maqAppStates.states.indexOf(a);if(!(0>d)){var c=this.getState(b),k=this.getFocus(b.ownerDocument.body);b._maqAppStates.states.splice(d,1);d={};k&&k.stateContainerNode==b&&k.state==a&&(d.focus=!0,d.updateWhenCurrent=!0);a==c&&this.setState(void 0,b,d);p.publish("/davinci/states/state/removed",[{node:b,state:a}]);this._updateSrcState(b)}}},rename:function(b,
a){if(!a)return!1;var d=a.oldName;a=a.newName;if(!(b&&b._maqAppStates&&b._maqAppStates.states&&b._maqAppStates.states.length))return!1;var c=b._maqAppStates.states;if(0>c.indexOf(d)||0<=c.indexOf(a))return!1;c.splice(c.indexOf(d),1,a);b._maqAppStates.focus===d&&(b._maqAppStates.focus=a);b._maqAppStates.current===d&&(b._maqAppStates.current=a);c=[b];this.getState(b);for(c=c.concat(this._getChildrenOfNode(b));c.length;){var k=c.shift();k._maqDeltas&&k._maqDeltas[d]&&(k._maqDeltas[a]=k._maqDeltas[d],
delete k._maqDeltas[d]);var c=c.concat(this._getChildrenOfNode(k)),e=this.getStatesArray(k,null,a,b);this._update(k,e);this._updateSrcState(k)}p.publish("/davinci/states/state/renamed",[{node:k,oldName:d,newName:a,stateContainerNode:k}]);return!0},_isEmpty:function(b){for(var a in b)if(b.hasOwnProperty(a))return!1;return!0},stringifyWithQuotes:function(b){str=q.stringify(b);str=str.replace(/(\\)?'/g,function(b,a){return a?b:"\\'"});return str=str.replace(/"/g,"'")},serialize:function(b){var d=this,
c=function(c){var k=null;b[c]&&(c=a("dojo/_base/lang").clone(b[c]),delete c.undefined,d._isEmpty(c)||(k=this.stringifyWithQuotes(c)));return k}.bind(this),k={};if(!b)return k;var e=c("_maqAppStates");"string"==typeof e&&(k.maqAppStates=e);c=c("_maqDeltas");"string"==typeof c&&(k.maqDeltas=c);return k},deserialize:function(b,a){"string"==typeof b&&(b=b.replace(/(\\)?'/g,function(b,a){return a?"'":'"'}),b=q.parse(b),this._migrate_m4_m5(b),b=this._migrate_m6_m7(b,a&&a.isBody));return b},_migrate_m4_m5:function(b){for(var a in b){var d=
b[a];if(d){var c=d.style;if(c&&!c.length){var k=[],e;for(e in c){var f={};f[e]=c[e];k.push(f)}d.style=k}}}},_migrate_m6_m7:function(b,a){if(!b||b.states)return b;if(a){a=[];for(var d in b)"current"!=d&&a.push(d);if(0<a.length)return{states:a}}else return delete b.current,b},store:function(b,a,d){if(b){this.clear(b);var c="BODY"==b.tagName;a&&(b._maqAppStates=this.deserialize(a,{isBody:c}));d&&(b._maqDeltas=this.deserialize(d,{isBody:c}));p.publish("/davinci/states/stored",[])}},retrieve:function(b){if(b){var a=
b.getAttribute(this.APPSTATES_ATTRIBUTE);a||"BODY"!==b.tagName||(a=b.getAttribute(this.APPSTATES_ATTRIBUTE_P6));var d=b.getAttribute(this.DELTAS_ATTRIBUTE);d||"BODY"===b.tagName||(d=b.getAttribute(this.DELTAS_ATTRIBUTE_P6));return{maqAppStates:a,maqDeltas:d}}},clear:function(b){b&&(b._maqAppStates&&delete b._maqAppStates,b._maqDeltas&&delete b._maqDeltas)},_parseStyleValues:function(b){var a=[];b&&e.forEach(b.split(";"),function(b){var d=b.indexOf(":");if(0<d){var c=b.substring(0,d).trim();b=b.substring(d+
1).trim();d={};d[c]=b;a.push(d)}});return a},transferElementStyle:function(b,a){b&&(b=b._maqDeltas,a=this._parseStyleValues(a),b.undefined||(b.undefined={}),b.undefined.style=a)},getDocument:function(){return document},shouldInitialize:function(){return!davinci.AppStatesDontInitialize},_getChildrenOfNode:function(b){for(var a=[],d=0;d<b.childNodes.length;d++){var c=b.childNodes[d];1===c.nodeType&&a.push(c)}return a},initialize:function(){this.subscribed||(p.subscribe("/maqetta/appstates/state/changed",
this,function(b){if(!b.editorClass)for(var a=davinci.states._getChildrenOfNode(b.node);a.length;){var d=a.shift();davinci.states.isContainer(d)||(a=a.concat(davinci.states._getChildrenOfNode(d)));var c=this.getStatesArray(d,b.oldState,b.newState,b.stateContainerNode);davinci.states._update(d,c)}}),this.subscribed=!0)}};"undefined"===typeof davinci&&(davinci={});var d=davinci.states=new m;(function(){d.initialize();d.shouldInitialize()&&"undefined"!=typeof a&&a(["dojo/_base/lang","dojo/query","dojo/aspect"],
function(b,k,e){var q=0,n=!1;b=function(b){n||(e.around(b,"parse",function(b){var a={};return function(c,k){var e;e=(e=!k&&c&&c.rootNode?c.rootNode:c)?g.byId(e):f.body();r(a);e=b.apply(this,arguments);var q=d.getDocument(),n,h,v,u,w;for(w in a){var z;if(z="body"==w?q.body:q.querySelectorAll("."+w)[0]){var m="BODY"==z.tagName;n=h=v=u=null;m?n=a[w]:(n=a[w].maqAppStates,h=a[w].maqDeltas);n&&(v=d.deserialize(n,{isBody:m}));h&&(u=d.deserialize(h,{isBody:m}));v&&(v.initial?v.current=v.initial:(v.focus&&
delete v.focus,delete v.current));d.store(z,v,u);h&&davinci.states.transferElementStyle(z,a[w].style)}}w=d.getAllStateContainers(q.body);for(q=0;q<w.length;q++)n=w[q],n._maqAppStates&&"string"==typeof n._maqAppStates.current&&d.setState(n._maqAppStates.current,n,{updateWhenCurrent:!0,focus:n._maqAppStates.focus});return e}}),dojo.parser.parse=b.parse,n=!0)};try{var h=a("dojox/mobile/parser");b.apply(h)}catch(B){}h||b.call(null,c);var r=function(b){var a=d.getDocument();if(!a.body._maqAlreadyPreserved){var c=
davinci.states.retrieve(a.body);c&&c.maqAppStates&&(b.body=c.maqAppStates);a.body._maqAlreadyPreserved=!0}k("*",a).forEach(function(a){var c=a.getAttribute("class");c||(c="");if(!a._maqAlreadyPreserved&&0>c.indexOf("maqTempClass")){a._maqAlreadyPreserved=!0;var k=d.retrieve(a);if("BODY"!=a.tagName&&k&&(k.maqAppStates||k.maqDeltas)){var e="maqTempClass"+q;a.setAttribute("class",c+" "+e);q++;b[e]={};k.maqAppStates&&(b[e].maqAppStates=k.maqAppStates);k.maqDeltas&&(b[e].maqDeltas=k.maqDeltas);a.style?
b[e].style=a.style.cssText:console.error("States.js _preserveStates. No value for node.style.")}}})}})})();davinci.Workbench||"undefined"==typeof dijit||p.subscribe("/maqetta/appstates/state/changed",function(b){var a=b&&b.node&&b.node.ownerDocument&&b.node.ownerDocument.defaultView&&b.node.ownerDocument.defaultView.dijit.byId;a&&(b.newState&&!b.newState.indexOf("_show:")?(b=a(b.newState.substring(6)))&&b.show&&b.show():b.oldState&&!b.oldState.indexOf("_show:")&&(b=a(b.oldState.substring(6)))&&b.hide&&
b.hide())});return m})},"davinci/ve/commands/EventCommand":function(){define(["dojo/_base/declare","davinci/ve/widget"],function(p,m){return p("davinci.ve.commands.EventCommand",null,{name:"EventCommand",constructor:function(h,g){this._oldId=h?h.id:void 0;this._properties=g||{}},setContext:function(h){this._context=h},execute:function(){if(this._oldId&&this._properties){var h=m.byId(this._oldId);this._oldProps=h.properties||{};h.setProperties(this._properties,!0);if(h.isHtmlWidget){var g=h.domNode,
f;for(f in this._properties)this._properties[f]||g.removeAttribute(f)}this._newId=this._oldId;dojo.publish("/davinci/ui/widgetPropertiesChanged",[[h]])}},undo:function(){if(this._newId){var h=m.byId(this._newId),g=h.domNode,f=h._srcElement,e;for(e in this._properties)this._oldProps[e]||(g.removeAttribute(e),f.removeAttribute(e));h.setProperties(this._oldProps);dojo.publish("/davinci/ui/widgetPropertiesChanged",[[h]])}}})})},"davinci/ve/widget":function(){define("davinci/html/HTMLElement ../Runtime ./metadata dojo/Deferred dojo/_base/lang ./DijitWidget ./GenericWidget ./DeliteWidget ./HTMLWidget ./ObjectWidget dojo/window".split(" "),
function(p,m,h,g,f,e,c,a,q,k,d){var b={},n=function(b,a,d){for(var c=0;c<d.children.length;c++){var k=a.childNodes[c],e=d.children[c];k&&1==k.nodeType&&"HTMLElement"==e.elementType&&(k.id=b.getUniqueID(e),n(b,k,e))}},r={_dojo:function(b){b=(b=b?b.ownerDocument||b:dojo.doc)||dojo.doc;return d.get(b).dojo||dojo},_dijit:function(b){return d.get(b?b.ownerDocument||b:dojo.doc).dijit||dijit},parseStyleValues:function(b){var a=[];b&&dojo.forEach(b.split(";"),function(b){var d=b.indexOf(":");if(0<d){var c=
b.substring(0,d).trim();b=b.substring(d+1).trim();d={};d[c]=b;a.push(d)}});return a},retrieveStyleProperty:function(b,a,d){var c=d;b&&dojo.some(b,function(b){if(b.hasOwnProperty(a))return c=b[a],!0});return c},setStyleProperty:function(b,a,d){var c=!1;b&&dojo.some(b,function(b){if(b.hasOwnProperty(a))return b[a]=d,c=!0});if(!c){var k={};k[a]=d;b.push(k)}},getStyleString:function(b){var a="";dojo.forEach(b,function(b){for(var d in b)b[d]&&(a=a+d+":"+b[d]+";")});return a},getEnclosingWidget:function(b){var a=
r.getEnclosingWidgetForRichText(b);if(a)return a;for(;b;){if(b._dvWidget)return b._dvWidget;b=b.parentNode||b.domNode&&b.domNode.parentNode}},getEnclosingWidgetForRichText:function(b){if(b&&b._dvWidget)return"html.stickynote"===b._dvWidget.type||"html.richtext"===b._dvWidget.type?b._dvWidget:b.parentNode?r.getEnclosingWidgetForRichText(b.parentNode):null},getUniqueObjectId:function(b,a){if(b){b=b.substring((b.lastIndexOf("/")||b.lastIndexOf("."))+1);var d=1,c=b+"_"+d++;for(a=r._dojo(a);a.getObject(c)||
a.byId(c);)c=b+"_"+d++;return c}},_remove_prefix:function(b){if(b){for(var a=b,d="dijit/form/ dijit/layout/ dijit/ dojox/mobile/ html. html/ OpenAjax. OpenAjax/".split(" "),c=0;c<d.length;c++)if(0==b.indexOf(d[c])){a=b.substr(d[c].length);"html."==d[c]&&(a="\x26lt;"+a+"\x26gt;");break}return a}return""},_getWidgetNameText:function(b){return"\x3cspan class\x3d'propertiesTitleWidgetName'\x3e"+this._remove_prefix(b)+"\x3c/span\x3e"},_getWidgetNameRaw:function(b){return""+this._remove_prefix(b)},_getWidgetClassText:function(b,
a){var d="\x3cspan class\x3d'propertiesTitleClassName'\x3e";b&&(d+="#"+b);a&&(d+="."+a.replace(/\s+/g,"."));return d+"\x3c/span\x3e"},getLabelForNode:function(b){var a=b.getAttribute("data-dojo-type")||b.getAttribute("dojoType");a||(a=b.tagName.toLowerCase());a=a.replace(/\./g,"/");a=this._getWidgetNameText(a);b.id&&(a+=this._getWidgetClassText(b.id));return a},getLabel:function(b){if(!b.getId)return"No Label";var a=this._getWidgetNameText(b.type),d,c=r.getWidgetHelper(b.type);c&&c.getWidgetText&&
(d=c.getWidgetText(b));c&&c.getWidgetNameText&&(a=c.getWidgetNameText(b));var k=b.domNode;if(!b.type)return"unknown type";switch(b.type.replace(/\//g,".")){case "dijit.form.ComboBox":case "dijit.form.Button":d=b.attr("label");break;case "dijit.layout.ContentPane":d=b.attr("title");break;case "html.label":d=k.innerHTML;break;case "html.img":d=k.alt,d||(d=k.title)}d&&(a+="\x3cspan class\x3d'propertiesTitleWidgetText'\x3e"+d+"\x3c/span\x3e ");c&&c.getWidgetDescriptor&&(a+=" \x3cspan class\x3d'propertiesTitleWidgetDescriptor'\x3e"+
c.getWidgetDescriptor(b)+"\x3c/span\x3e ");var e=b._srcElement;d=b.getId();e=(e=e&&e.getAttribute("class"))&&e.trim();if(d||e)a=c&&c._getWidgetClassText?a+c._getWidgetClassText(d,e):a+this._getWidgetClassText(d,e);c&&c.getWidgetTextExtra&&(a+=c.getWidgetTextExtra(b));"html.img"==b.type&&(a+="\x3cspan\x3e"+k.src.substr(k.src.lastIndexOf("/")+1)+"\x3c/span\x3e");return a},byId:function(b,a){if(a=dojo.byId(b,a&&a.body?a:void 0)){if(a._dvWidget)return a._dvWidget;if((a=r.getEnclosingWidget(a))&&a.id==
b)return a}if(m.currentEditor&&m.currentEditor.currentEditor&&m.currentEditor.currentEditor.context)return m.currentEditor.currentEditor.context.widgetHash[b]},byNode:function(b){if(b._dvWidget)return b._dvWidget},createWidget:function(b,g,m){if(b&&b.type){var w=dojo.mixin({},b),v=!1;"xblox/RunScript"===w.type&&"xblox/CSSState"===w.type&&(v=!0,delete b.properties.style);w.properties&&(w.properties=dojo.mixin({},b.properties));var u=w.type,z,y,F=h.query(u);if(F){w.properties&&("content"in w.properties&&
!w.properties.content&&delete w.properties.content,w.properties.theme&&(y=w.properties.theme.themeName));m&&m.metadata&&m.metadata.childOverride&&f.mixin(w.properties,m.metadata.childOverride);b=h.queryDescriptor(u,"widgetClass");!b&&g&&g.widgetClass&&(b=g.widgetClass);if(!0===F.delite||"xblox/RunScript"===u||"xblox/CSSState"===u||"xblox/Script"===u||"xblox/StyleSate"===u)b="delite";"delite"==b?z=a:"object"==b?(z=k,F.attributes=F.attributes||{},F.attributes.dojoType=u):"html"==b?z=q:"dijit"==b?z=
e:null==z&&(z=c);if(z){b=F.content.trim().replace(/\s+/g," ");d.get(dojo.doc);var C=d.get(dojo.doc).dojo._toDom(b);C.fromWidgetData&&C.fromWidgetData(w);if(11===C.nodeType){m=0;var I=null;b=C.childNodes;for(var A=0;A<b.length&&!(8!==b[A].nodeType&&(m++,I=b[A],1<m));A++);if(1<m){console.error("ERROR: complex widget content not supported");return}C=I}if(!C)return null;var H=new p(C.tagName.toLowerCase());if(C.hasAttributes())for(b=C.attributes,m=b.length-1;0<=m;--m)v&&"style"===b[m].name||H.addAttribute(b[m].name,
b[m].value);C.innerHTML&&H.addText(C.innerHTML);v=h.queryDescriptor(u,"requiresId");b=h.queryDescriptor(u,"name");v=v&&b.match(/^[A-Za-z]\w*$/)?b:void 0;C.id=w.properties&&w.properties.id||(w.context?w.context.getUniqueID(H,v):"");if(b=w.children)dojo.isString(b)?(C.innerHTML=b,C.nodeName.toLowerCase(),v=H._getAttribute("id"),H.addText(b),b=H.getText(w.context),H.children=[],H.setText(b),v&&H.addAttribute(v.name,v.value,v.noPersist),n(w.context,C,H)):dojo.forEach(b,function(b){if(b)if(dojo.isString(b))7<
b.length&&"\x3c!--"==b.substring(0,4)&&"--\x3e"==b.substring(b.length-3)?(C.appendChild(dojo.doc.createComment(b.substring(4,b.length-3))),H.addComment(b.substring(4,b.length-3))):(C.appendChild(dojo.doc.createTextNode(b)),H.addText(b));else if(b.context=w.context,b=r.createWidget(b))C.appendChild(b.domNode),H.addChild(b._srcElement)});(v=r.getWidgetHelper(u))&&v.preProcessData&&(w=v.preProcessData(w));v={};b={};for(var N in w.properties)m=w.properties[N],null!=m&&("on"==N.substr(0,2).toLowerCase()||
"a"==H.tag.toLowerCase()&&"href"==N.toLowerCase()?b[N]=m:v[N]=m);F=new z(v,C,u,F,H,u);F._srcElement=H;F.chart&&w.properties&&w.properties.theme&&(F.chart.theme.themeName=y);w.scripts&&(F.scripts=w.scripts);w.context&&(F._edit_context=w.context);w.properties&&(F.setProperties(v),F.setProperties(b,!0));if(w.maqAppStates||w.maqDeltas)w.maqAppStates&&(F.domNode._maqAppStates=dojo.clone(w.maqAppStates)),w.maqDeltas&&(F.domNode._maqDeltas=dojo.clone(w.maqDeltas)),y=davinci.states.serialize(F.domNode),y.maqAppStates&&
F._srcElement.addAttribute(davinci.states.APPSTATES_ATTRIBUTE,y.maqAppStates),y.maqDeltas&&F._srcElement.addAttribute(davinci.states.DELTAS_ATTRIBUTE,y.maqDeltas);(v=r.getWidgetHelper(u))&&v.cleanSrcElement&&v.cleanSrcElement(F._srcElement,g);v&&v.postCreateWidget&&v.postCreateWidget(F,g);return F}}else console.error("cant get widget meta data : ",b)}},_createSrcElement:function(b){var a=new p(b.tagName.toLowerCase());if(b.hasAttributes()){b=b.attributes;for(var d=b.length-1;0<=d;--d)a.addAttribute(b[d].name,
b[d].value)}return a},getWidgetHelper:function(a){return b[a]},requireWidgetHelper:function(a){var d=new g;h.getHelper(a,"helper").then(function(c){c?d.resolve(b[a]=new c):d.resolve()});return d},getWidget:function(b,d){if(b&&1==b.nodeType){var f=r.byNode(b);if(!f){if(b){for(var f={properties:{}},g=0;g<b.attributes.length;g++){var n=b.attributes[g];if(n.specified&&n.nodeValue){var h=n.nodeName.toLowerCase();if("id"!=h&&"widgetid"!=h&&"style"!=h&&"_"!=h.charAt(0)){if((n=n.nodeValue)&&"class"==h&&(n=
n.replace("HtmlWidget","").trim(),!n))continue;f.properties[h]=n}}}"script"==b.tagName.toLowerCase()&&(f.children=b.innerHTML||void 0)}else f=void 0;if(f.properties.is||null!=b.render||-1!==b.tagName.indexOf("D-"))return f=new a(f,b);g=b.getAttribute("dvwidget");if(b.hasAttribute("widgetid")||b.hasAttribute("data-dojo-type")||b.hasAttribute("dojotype"))d=r._dijit(b).byNode(b),g=b.getAttribute("data-dojo-type")||b.getAttribute("dojotype"),f=d?new e(f,b,d,null,null,g):new k(f,b);else if(g)f=new c(f,
b,g);else{if("svg"==b.nodeName)return;f=new q(f,b,d)}}return f}}};dojo.setObject("davinci.ve.widget",r);return r})},"davinci/html/HTMLElement":function(){define(["dojo/_base/declare","davinci/html/HTMLItem","davinci/html/HTMLText","davinci/html/HTMLComment","davinci/html/HTMLAttribute"],function(p,m,h,g,f){return p("davinci.html.HTMLElement",m,{constructor:function(e){this.elementType="HTMLElement";this.attributes=[];this.tag=e||"";this._fmChildIndent=this._fmChildLine=0},add:function(e){this.statements||
(this.statements=[]);this.statements.push(e);this.onChange()},getText:function(e){e=e||{};var c;e.indent+=2;c="\x3c"+this.tag;for(var a=0;a<this.attributes.length;a++){var f=this.attributes[a].getText(e);0<f.length&&(c=c+" "+f)}if(this.noEndTag)c+="/\x3e";else{c=c+"\x3e"+this._addWS(this._fmChildLine,this._fmChildIndent);if(this.statements)for(a=0;a<this.statements.length;a++)c+=this.statements[a].printStatement(e,this.statements[a]);else if(this.script)c+=this.script;else if(0<this.children.length)for(f=
"style"==this.tag,a=0;a<this.children.length;a++)if(c+=this.children[a].getText(e),f){var k=this._fmChildLine,d=this._fmChildIndent||0;a+1==this.children.length&&(k=this._fmLine,d=this._fmIndent);c+=this._addWS(k,d)}c=c+"\x3c/"+this.tag+"\x3e"}e.indent-=2;return c+=this._addWS(this._fmLine,this._fmIndent)},_formatModel:function(e,c,a){function f(b,c,k){d+=1+b;c?(c._fmChildLine=1,c._fmChildIndent=a.indent):(k._fmLine=1,k._fmIndent=a.indent)}function k(b,a){b.startOffset=d;b.wasParsed=!0;d+=b.tag.length+
2;for(var c=0;c<b.attributes.length;c++){b.attributes[c].startOffset=d;var e=b.attributes[c].getText(a);0<e.length&&(d+=1+e.length);b.attributes[c].endOffset=d-1}b.noEndTag&&d++;b.startTagOffset=d;e="";if(b.statements)for(c=0;c<b.statements.length;c++)e+=b.statements[c].printStatement(a,b.statements[c]);else b.script&&(e=b.script);if(e)d+=e.length;else if(0<b.children.length){var q;davinci.html._noFormatElements[b.tag]||(a.indent+=2,f(a.indent,b),q=!0);for(var g,c=0;c<b.children.length;c++){e=b.children[c];
switch(e.elementType){case "HTMLElement":g&&"HTMLText"!=g.elementType&&!davinci.html._noFormatElements[e.tag]&&f(a.indent,null,g);k(e,a);break;case "HTMLText":e.startOffset=d;d+=e.value.length;break;case "HTMLComment":e.startOffset=d,d+=e.value.length,d++,e.isProcessingInstruction&&(d+=2)}g=e}q&&(a.indent-=2);g&&"HTMLText"!=g.elementType&&f(a.indent,null,g)}d+=b.tag.length+3;b.endOffset=d-1}var d=0;void 0==c&&(c=this.children.length);var b,g;this.children.length&&0!=c?(g=this.children[c-1],d=g.endOffset+
1):(b=this,d=this.startTagOffset+1);var h=d;davinci.html._noFormatElements[e.tag]||(f(a.indent,b,g),e._fmLine=1,e._fmIndent=c<this.children.length?a.indent:a.indent-2);k(e,a);return d>h?d-h:0},getElementText:function(e){e=e||{};var c="";if(0<this.children.length)for(var a=0;a<this.children.length;a++)"HTMLComment"!=this.children[a].elementType&&(c+=this.children[a].getText(e));else{if(this.script)return this.script;if(this.statements)for(a=0;a<this.statements.length;a++)c+=this.statements[a].printStatement(e,
this.statements[a])}return c},getChildElements:function(e,c,a){a=a||[];for(var f=0;f<this.children.length;f++)this.children[f].tag==e&&a.push(this.children[f]),c&&"HTMLElement"==this.children[f].elementType&&this.children[f].getChildElements(e,c,a);return a},getChildElement:function(e){for(var c=0;c<this.children.length;c++)if(this.children[c].tag==e)return this.children[c]},hasAttribute:function(e){for(var c=0;c<this.attributes.length;c++)if(this.attributes[c].name==e)return!0;return!1},getAttribute:function(e){if(e=
this._getAttribute(e))return e.value},_getAttribute:function(e){for(var c=0;c<this.attributes.length;c++)if(this.attributes[c].name==e)return this.attributes[c]},addText:function(e){this.addChild(new h(e));this.onChange()},addComment:function(e){this.addChild(new g(e));this.onChange()},getLabel:function(){return"\x3c"+this.tag+"\x3e"},addAttribute:function(e,c,a){if("textContent"==e)this.children=[],this.addText(c);else{var q,k=0<this.attributes.length?this.attributes[this.attributes.length-1].endOffset+
1:this.startTagOffset-(this.noEndTag?2:1),d=this._getAttribute(e),b;d?q=c.length-d.value.length:(d=new f,b=!0,q=e.length+c.length+4,d.startOffset=k,d.endOffset=k+q-1);d.name=e;d.setValue(c);d.noPersist=a;this.wasParsed&&!a&&0<q&&this.getHTMLFile().updatePositions(k,q);b&&this.attributes.push(d);this.onChange()}},removeAttribute:function(e){this.attributes.every(function(c,a,f){return c.name===e?(f.splice(a,1),a=this.getHTMLFile(),!c.noPersist&&a&&(f=c.getText(),a.updatePositions(c.startOffest,0-(f.length+
1))),!1):!0},this);this.onChange()},setAttribute:function(e,c){this.removeAttribute(e);this.addAttribute(e,c)},getUniqueID:function(e){if(!this.getAttribute("id")){var c=this.getHTMLFile();c.uniqueIDs||(c.uniqueIDs={});c=c.uniqueIDs.hasOwnProperty(this.tag)?++c.uniqueIDs[this.tag]:c.uniqueIDs[this.tag]=0;this.addAttribute("id",this.tag+"_"+c,e)}},findElement:function(e){var c=this.getAttribute("id");if(e==c)return this;for(c=0;c<this.children.length;c++)if("HTMLElement"==this.children[c].elementType){var a=
this.children[c].findElement(e);if(a)return a}},insertBefore:function(e,c){c=dojo.indexOf(this.children,c);0>c&&(c=void 0);this.addChild(e,c);this.onChange()},addChild:function(e,c,a){if(!a&&this.wasParsed)if("HTMLElement"==e.elementType){var f=this._getIndent(),k;c<this.children.length&&"HTMLElement"==this.children[c].elementType?k=this.children[c]._getIndent():this.children.length?dojo.forEach(this.children,function(b){"HTMLElement"==b.elementType&&(k=b._getIndent())}):k=f+1;f=this._formatModel(e,
c,{indent:k});this.getHTMLFile().updatePositions(e.startOffset,f)}else if("HTMLText"==e.elementType||"CSS"==e.elementType.substring(0,3)){var f=e.getText(),d=this.children.length?this.children[this.children.length-1].endOffset:this.startTagOffset,b=f.length;0<b&&("HTMLText"!=e.elementType&&(b+=this._fmChildIndent+1),this.getHTMLFile().updatePositions(d+1,b));e.startOffset=d+1;e.endOffset=e.startOffset+f.length-1}m.prototype.addChild.apply(this,arguments)},removeChild:function(e){var c=dojo.indexOf(this.children,
e);if(0<=c){var a=1+e.endOffset-e.startOffset;if("HTMLElement"==e.elementType)if(1==this.children.length)a+=1*this._fmChildLine+this._fmChildIndent,this._fmChildIndent-=2;else{if(0<c&&"HTMLElement"==this.children[c-1].elementType)var f=this.children[c-1],a=a+(1*f._fmLine+f._fmIndent);c+1==this.children.length&&"HTMLElement"==this.children[c-1].elementType&&(this.children[c-1]._fmChildIndent-=2)}0<a&&this.wasParsed&&this.getHTMLFile().updatePositions(e.startOffset,0-a)}m.prototype.removeChild.apply(this,
arguments)},_textModify:function(e,c){e=e.length-c.length;0!=e&&this.wasParsed&&this.getHTMLFile().updatePositions(this.startOffset,e)},setScript:function(e){this._textModify(e,this.script);this.script=e},_previous:function(){var e=dojo.indexOf(this.parent.children,this);if(0<e)return this.parent.children[e-1]},_getIndent:function(){var e=this._previous();return e?" HTMLText"==e.elementType?(e=e.value.split("\n"),e[e.length-1].length):e._fmIndent:this.parent._fmChildIndent},visit:function(e){if(!e.visit(this)){for(var c=
0;c<this.attributes.length;c++)this.attributes[c].visit(e);for(c=0;c<this.children.length;c++)this.children[c].visit(e)}e.endVisit&&e.endVisit(this)},setText:function(e){this.script="";var c=this.parent;this.errors=require("davinci/html/HTMLParser").parse(e,this).errors;dojo.mixin(this,this.children[0]);this.parent=c;this.visit({visit:function(a){delete a.wasParsed},rules:[]});this.onChange()}})})},"davinci/html/HTMLItem":function(){define(["dojo/_base/declare","davinci/html/HTMLModel"],function(p,
m){return p("davinci.html.HTMLItem",m,{constructor:function(){this.elementType="HTMLItem"},getLabel:function(){return this.getText({indent:0})},onChange:function(h){if(this.parent&&h)this.parent.onChange(h)},_addWS:function(h,g){h=h||0;g=g||0;for(var f=[],e=0;e<h;e++)f.push("\n");f.push("                                          ".substring(0,g));return f.join("")},close:function(){for(var h=0;h<this.children.length;h++)this.children[h].close()},getID:function(){return this.parent.getID()+":"+this.startOffset+
":"+this.getLabel()},getHTMLFile:function(){for(var h=this;h&&"HTMLFile"!=h.elementType;)h=h.parent;return h}})})},"davinci/html/HTMLModel":function(){define(["dojo/_base/declare","davinci/model/Model"],function(p,m){davinci.html||(davinci.html={});davinci.html._noFormatElements={span:!0,b:!0,it:!0};davinci.html.escapeXml=function(h){return h?h.replace(/&/g,"\x26amp;").replace(/</g,"\x26lt;").replace(/>/g,"\x26gt;").replace(/"/g,"\x26quot;"):h};davinci.html.unEscapeXml=function(h){return h&&"string"===
typeof h?h.replace(/&quot;/g,'"').replace(/&gt;/g,"\x3e").replace(/&lt;/g,"\x3c").replace(/&amp;/g,"\x26"):h};return p("davinci.html.HTMLModel",m,{})})},"davinci/model/Model":function(){define(["dojo/_base/declare"],function(p){return p("davinci.model.Model",null,{constructor:function(){this.name=this.elementType="";this.endOffset=this.startOffset=0;this.parent=null;this.children=[]},inherits:function(m){1<arguments.length?m.apply(this,Array.prototype.slice.call(arguments,1)):m.call(this)},getText:function(){},
setText:function(m){},addChild:function(m,h,g){m.parent=this;void 0!=h?this.children.splice(h,0,m):this.children.push(m)},setStart:function(m){this.startOffset=m},setEnd:function(m){this.endOffset=m},getLabel:function(){return null},getID:function(){return null},mapPositions:function(m){return{startOffset:m.startOffset,endOffset:m.endOffset}},findChildAtPosition:function(m){m.endOffset||(m.endOffset=m.startOffset);if(m.startOffset>=this.startOffset&&m.endOffset<=this.endOffset){for(var h=0;h<this.children.length;h++){var g=
this.children[h].findChildAtPosition(m);if(null!=g)return g}return this}return null},removeChild:function(m){for(var h=0;h<this.children.length;h++)if(this.children[h]==m){this.children.splice(h,1);break}},find:function(m,h){var g={visit:function(f){if(0<this.found.length&&h)return!0;var e=null;for(e in m)if(f[e]!=m[e])break;f[e]==m[e]&&this.found.push(f);return!1},found:[]};this.visit(g);return h?0<g.found.length?g.found[0]:null:g.found},setDirty:function(m){this.dirtyResource=m},isDirty:function(){return this.dirtyResource},
searchUp:function(m){if(this.elementType==m)return this;for(var h=this.parent;h&&h.elementType!=m;)h=h.parent;return h},visit:function(m){if(!m.visit(this))for(var h=0;h<this.children.length;h++)this.children[h].visit(m);m.endVisit&&m.endVisit(this)},updatePositions:function(m,h,g){visitor={visit:function(f){if(f.endOffset<h)return!0;f.startOffset>=h?(f.startOffset+=g,f.endOffset+=g):f.endOffset>=h&&(f.endOffset+=g)}};m.visit(visitor)}})})},"davinci/html/HTMLText":function(){define(["dojo/_base/declare",
"davinci/html/HTMLItem"],function(p,m){return p("davinci.html.HTMLText",m,{constructor:function(h){this.elementType="HTMLText";this.value=h||""},getText:function(h){return this.value},setText:function(h){if(this.wasParsed||this.parent&&this.parent.wasParsed){var g=h.length-this.value.length;0<g&&this.getHTMLFile().updatePositions(this.startOffset+1,g)}this.value=h},getLabel:function(){return 15>this.value.length?this.value:this.value.substring(0,15)+"..."}})})},"davinci/html/HTMLComment":function(){define(["dojo/_base/declare",
"davinci/html/HTMLItem"],function(p,m){return p("davinci.html.HTMLComment",m,{constructor:function(h){this.elementType="HTMLComment";this.value=h||""},getText:function(h){h=this.isProcessingInstruction?"":"--";return"\x3c!"+h+this.value+h+"\x3e"}})})},"davinci/html/HTMLAttribute":function(){define(["dojo/_base/declare","davinci/html/HTMLItem"],function(p,m){return p("davinci.html.HTMLAttribute",m,{constructor:function(){this.elementType="HTMLAttribute";this.value=this.name=""},getText:function(h){if(this.noPersist&&
!h.includeNoPersist)return"";h=this.name;({checked:1,selected:1,disabled:1,readonly:1,multiple:1,ismap:1,autofocus:1,autoplay:1,controls:1,formnovalidate:1,loop:1,muted:1,required:1})[this.name.toLowerCase()]?h=this.value&&"false"!==this.value?h+('\x3d"'+this.value+'"'):"":this.noValue||(h=h+'\x3d"'+davinci.html.escapeXml(String(this.value))+'"');return h},setValue:function(h){this.value=davinci.html.unEscapeXml(h);this.onChange()}})})},"davinci/ve/DijitWidget":function(){define(["require","dojo/_base/declare",
"dojo/dom-attr","./_Widget"],function(p,m,h,g){return m("davinci.ve.DijitWidget",g,{isDijitWidget:!0,constructor:function(f,e,c,a,q,k){if("string"===typeof c){h.get(e,"data-dojo-type")||h.get(e,"dojoType")||h.set(e,"data-dojo-type",c);q&&q.addAttribute("data-dojo-type",c);c=e.ownerDocument;q=c.defaultView;(a=c.__DijitWidgetScratchSpace)||(a=c.__DijitWidgetScratchSpace=c.createElement("div"));a.appendChild(e);c=q.require("dojo/parser").instantiate([e],f,{noStart:!0})[0];a.firstChild&&a.removeChild(a.firstChild);
if(this.domNode=c.domNode)c.domNode._dvWidget=this;this.isLayoutContainer=c.isLayoutContainer}else this.type=k?k.replace(/\./g,"/"):c.declaredClass.replace(/\./g,"/");f=davinci.ve.metadata.getAllowedChild(this.type);this.acceptsHTMLChildren="ANY"===f[0]||-1!==f.toString().toUpperCase().indexOf("HTML");this.dijitWidget=c;this.containerNode=c.containerNode;this.styleNode=c.styleNode;this.id=c.id},getParent:function(){if(this.dijitWidget&&this.dijitWidget.domNode&&this.dijitWidget.domNode.parentNode){var f=
p("davinci/ve/widget"),e=this.dijitWidget;do e=f.getEnclosingWidget(e.domNode.parentNode);while(e&&e.dijitWidget&&"_"==e.dijitWidget.declaredClass.split(".").pop().charAt(0));return e}},_getChildren:function(f){if(this.acceptsHTMLChildren)return this.inherited(arguments);var e=[];"NONE"!==davinci.ve.metadata.getAllowedChild(this.type)[0]&&(this.dijitWidget.getChildren(),this.dijitWidget.getChildren().forEach(function(c){c._maqNotDVWidget||(f?e.push(p("davinci/ve/widget").getWidget(c.domNode)):(c=
c.domNode&&c.domNode._dvWidget)&&e.push(c))}));return e},_getContainerNode:function(){return this.containerNode||this.domNode},selectChild:function(f){this.dijitWidget.selectChild&&this.dijitWidget.selectChild(f.dijitWidget)},_addChildToDom:function(f,e){if(this.acceptsHTMLChildren){this.inherited(arguments);var c=f.dijitWidget;c&&this.dijitWidget._started&&!c._started&&f.startup()}else f.dijitWidget&&this.dijitWidget.addChild?this.dijitWidget.addChild(f.dijitWidget,e):("xblox/RunScript"===f.type&&
f.getHelper()&&f.getHelper().addChildToDom&&f.getHelper().addChildToDom(this.dijitWidget,f,e),this.inherited(arguments))},_removeChildFromDom:function(f){this.dijitWidget.removeChild&&f.dijitWidget?this.dijitWidget.removeChild(f.dijitWidget):this.inherited(arguments)},_getPropertyValue:function(f){return this.dijitWidget.get(f)},startup:function(){this.dijitWidget.startup()},isLayout:function(){var f=this.getContext().getDijit();return f.layout?this.dijitWidget.isInstanceOf(f.layout._LayoutWidget):
!1},resize:function(){var f=this.getHelper();f&&f.resize?f.resize(this):this.dijitWidget.resize&&this.dijitWidget.resize()},renderWidget:function(){if(this.dijitWidget.render)this.dijitWidget.render();else if(this.dijitWidget.chart){var f=dojo.marginBox(this.dijitWidget.domNode);this.dijitWidget.resize(f)}this.domNode.parentNode._dvWidget&&this.domNode.parentNode._dvWidget.isDijitWidget&&this._refresh(this.domNode.parentNode)},_refresh:function(f){var e=f.parentNode;e._dvWidget&&e._dvWidget.isDijitWidget?
this._refresh(e):f._dvWidget.resize&&f._dvWidget.resize()},_attr:function(f,e){return this.dijitWidget.get.apply(this.dijitWidget,arguments)}})})},"davinci/ve/_Widget":function(){define("davinci/ve/_Widget","dojo/_base/declare ./metadata ../html/CSSModel dojox/html/entities davinci/ve/utils/StyleArray davinci/ve/utils/GeomUtils xide/mixins/EventedMixin xide/mixins/ReloadMixin".split(" "),function(p,m,h,g,f,e,c,a){var q=function(a,d,b){if(a==d)return!0;if(!a||!d||a.length!=d.length)return!1;for(var c=
0;c<a.length;c++)if(b){if(!b(a[c],d[c]))return!1}else if(a[c]!=d[c])return!1;return!0};return p("davinci.ve._Widget",[c,a],{isWidget:!0,acceptsHTMLChildren:!1,_skipAttrs:"id style class dir lang _children".split(" "),constructor:function(a,d,b,c){this.domNode=d;this.id=d.id;d._dvWidget=this;this._params=dojo.mixin({},a);this.type=b;this.metadata=c},postscript:function(){var a;if(this.domNode){var d=this.domNode.ownerDocument;d.body._edit_context?a=d.body._edit_context:d.body._dvWidget&&d.body._dvWidget._edit_context&&
(a=d.body._dvWidget._edit_context)}this.id&&a&&(a.widgetHash[this.id]=this);this.buildRendering();this.postCreate()},buildRendering:function(){},postCreate:function(){},getObjectType:function(){},getContext:function(){return this._edit_context},getChildren:function(a){var d=this.getHelper();return d&&d.getChildren?d.getChildren(this,a):this._getChildren(a)},indexOf:function(a){var d=this.getHelper();return d&&d.indexOf?d.indexOf(this,a):dojo.indexOf(this.getChildren(),a)},_getChildrenForTree:function(a){a=
this.getContainerNode();var d=[];a&&!a.children.length&&this.domNode.children.length&&(a=this.domNode);a&&dojo.forEach(a.children,function(b){b=dijit.registry.getEnclosingWidget(b);b!=this&&d.push(b)});return d},_getChildren:function(a){var d=this.getContainerNode(),b=[];d&&dojo.forEach(d.children,function(d){a?b.push(require("davinci/ve/widget").getWidget(d)):(d=d._dvWidget)&&b.push(d)});return b},getContainerNode:function(){var a=this.getHelper();return a&&a.getContainerNode?a.getContainerNode(this):
"NONE"!==m.getAllowedChild(this.type)[0]?this._getContainerNode():null},_getContainerNode:function(){return this.domNode},getMetadata:function(){this.metadata||(this.metadata=m.query(this));return this.metadata},getHelper:function(){this._edit_helper||(this._edit_helper=require("davinci/ve/widget").getWidgetHelper(this.type));return this._edit_helper},attr:function(a,d){var b=this._attr.apply(this,arguments);if(1<arguments.length)d=this._stringValue(a,d),this._srcElement.addAttribute(a,d);else return b},
_attr:function(a,d){},indexOf:function(a){var d=this.getHelper();return d&&d.indexOf?d.indexOf(this,a):dojo.indexOf(this.getChildren(),a)},getStyleNode:function(){return this.styleNode||this.domNode},addChild:function(a,d){if(this.getContainerNode()){if(void 0===d||null===d||-1===d)this._srcElement.addChild(a._srcElement);else{var b=this.getChildren();d<b.length?this._srcElement.insertBefore(a._srcElement,b[d]._srcElement):this._srcElement.addChild(a._srcElement)}(b=this.getHelper())&&b.addChild?
b.addChild(this,a,d):this._addChildToDom.apply(this,arguments)}},_addChildToDom:function(a,d){try{var b=a.domNode,c=this.getContainerNode();if(void 0===d||null===d||-1===d)c.appendChild(b);else{var e=this.getChildren();d<e.length?c.insertBefore(b,e[d].domNode):c.appendChild(b)}}catch(v){debugger}},getParent:function(){return require("davinci/ve/widget").getEnclosingWidget(this.domNode.parentNode)||this.domNode.parentNode},getObjectId:function(a){a=a||this;var d=a._edit_object_id;if(d)return d;if(a.domNode)return a.domNode.getAttribute("jsId")},
addClass:function(a){var d=this.getClassNames(),d=d?d.split(/\s+/):[];-1===d.indexOf(a)&&(d.push(a),this._srcElement.setAttribute("class",d.join(" ")),dojo.addClass(this.domNode,a))},getId:function(){if(!this.id){if(!this.domNode.id||!this.type)return;var a=this.domNode.id,d=(this.isHtmlWidget?this.getTagName():this.type).replace(/\./g,"_")+"_";if(a.length>d.length&&a.substring(0,d.length)==d)return}if(!(this._srcElement&&this._srcElement._getAttribute("id")&&this._srcElement._getAttribute("id").noPersist))return this.id},
setMarginBox:function(a){var d=this.getStyleNode();d&&(dojo.marginBox(d,a),this._updateSrcStyle())},getMarginBox:function(){var a=this.domNode,d=null,d=(d=this.getHelper())&&d.getMarginBoxPageCoords?d.getMarginBoxPageCoords(this):e.getMarginBoxPageCoords(a);d.l-=e.getScrollLeft(a);d.t-=e.getScrollTop(a);d.x=d.l;d.y=d.t;return d},getStyle:function(a){return(a=this.getStyleValues(a))?this._styleText(a):""},_sortStyleValues:function(a){a=dojo.clone(a);for(var d=h.shorthand,b=0,c=0;c<d.length;c++){var e;
a:{e=d[c][0];for(var f=0;f<a.length;f++)if(a[f]&&a[f].hasOwnProperty(e)){e=f;break a}e=-1}-1<e&&(f=a[e],a.splice(e,1),a.splice(b,0,f),b++)}return a},_styleText:function(a){var d="";if(dojo.isArray(a)){a=davinci.ve.states.normalizeArray("style",this.domNode,c,a);for(var b=0;b<a.length;b++)for(var c in a[b])value=a[b][c],void 0!==value&&""!=value&&null!=value&&(d+=c+": "+a[b][c]+"; ")}else for(c in a)value=davinci.ve.states.normalize("style",this.domNode,c,a[c]),void 0!==value&&""!=value&&null!=value&&
(d+=c+": "+a[c]+"; ");return d.trim()},getChildrenData:function(a){a=a||{identify:!0};var d=this.getHelper();return d&&d.getChildrenData?d.getChildrenData.apply(d,[this,a]):this._getChildrenData(a)},_getChildrenData:function(a){return this.getChildren().map(function(d){return d.getData(a)})},getClassNames:function(){return this._srcElement.getAttribute("class")||""},_getData:function(a){var d={type:this.type,properties:{}},b=require("davinci/ve/widget");if(a.identify){this._srcElement||(this._srcElement=
b._createSrcElement(this.domNode));var c=this._srcElement._getAttribute("id");c&&c.noPersist&&(d.properties.isTempID=!0);d.properties.id=this.id}!1!==a.preserveTagName&&this.id&&(d.tagName=this._srcElement.tag);c=m.query(this,"property");this.domNode&&this.domNode.parentNode&&(b=b.getEnclosingWidget(this.domNode.parentNode),(b=m.query(b,"childProperties"))&&(c=c?dojo.mixin({},c,b):b));if(c)for(var e in c)if(-1===this._skipAttrs.indexOf(e.toLowerCase())){var b=c[e],f=this.getPropertyValue(e);f&&f.length?
"array"==b.datatype?q(f,b.defaultValue)||(d.properties[e]=f):f!=b.defaultValue&&(d.properties[e]=f):"boolean"!=b.datatype&&"number"!=b.datatype||f==b.defaultValue?b.datatype&&(0==b.datatype.indexOf("dijit")||"object"==b.datatype&&b.isData)&&(d.properties[e]=f):d.properties[e]=f}d.properties.style=this.getStyle(a);(e=this.getClassNames(a))&&(d.properties["class"]=e);d.children=this.getChildrenData(a);d.type.indexOf("delite");return d},getData:function(a){a=a||{identify:!0,preserveStates:!0};var d=
this.getHelper();a=d&&d.getData?d.getData.apply(d,[this,a]):this._getData(a);a.maqAppStates=dojo.clone(this.domNode._maqAppStates);a.maqDeltas=dojo.clone(this.domNode._maqDeltas);a.properties||(a.properties={});if(this.properties)for(var b in this.properties)b in a.properties||(a.properties[b]=this.properties[b]);b=this._srcElement;for(var d=b.attributes,c=0;c<d.length;c++){var e=d[c];"on"==e.name.substr(0,2).toLowerCase()?a.properties[e.name]=e.value:"a"==b.tag.toLowerCase()&&"href"==e.name.toLowerCase()&&
(a.properties[e.name]=e.value)}return a},getPropertyValue:function(a){if("id"===a)return this.getId();if("jsId"===a)return this.getObjectId();var d=this.getHelper();return d&&d.getPropertyValue?d.getPropertyValue(this,a):this._getPropertyValue(a)},_getPropertyValue:function(a){return this.domNode.getAttribute(a)},getTagName:function(){return this.domNode.nodeName.toLowerCase()},getStyleValues:function(){function a(b){for(var a=c.length-1;0<=a;a--)void 0!==c[a][b]&&c.splice(a,1)}var d=this.getStyleNode().style,
b=this._srcElement.getAttribute("style"),c=require("davinci/ve/widget").parseStyleValues(b),b=this.getParent();d&&b&&b.dijitWidget&&b.dijitWidget.addChild&&!b.acceptsHTMLChildren&&(a("position"),a("left"),a("top"));return c},getStyleValuesAllStates:function(){var a=this.getStyleValues(),d={undefined:a},b=this.domNode._maqDeltas;if(b)for(var c in b)b[c].style&&(d[c]="undefined"==c?f.mergeStyleArrays(a,b[c].style):b[c].style);return d},_updateSrcStyle:function(){var a=this.getStyle();a.length?this._srcElement.addAttribute("style",
a):this._srcElement.removeAttribute("style")},_getStyleString:function(a){if(!a)return"";a=this._sortStyleValues(a);return this._styleText(a)},setStyleValuesCanvas:function(a){if(a){a=this._getStyleString(a);var d=this.getStyleNode();dojo.attr(d,"style",a);this.dijitWidget&&(this.dijitWidget.style=a)}},setStyleValuesModel:function(a){a=this._getStyleString(a);0<a.length?this._srcElement.addAttribute("style",a):this._srcElement.removeAttribute("style")},setStyleValuesAllStates:function(a){this.domNode._maqDeltas=
void 0;if(a)for(var d in a){var b=a[d];"undefined"===d&&(d=void 0);davinci.ve.states.setStyle(this.domNode,d,b,!0)}},isLayout:function(){return!1},resize:function(){},refresh:function(){var a=this.getParent();a&&a.dijitWidget?a.refresh():this.resize&&this.resize()},removeChild:function(a){this._srcElement?this._srcElement.removeChild(a._srcElement):console.error("cant remove child! this._srcElement is null",this);var d=this.getHelper();d&&d.removeChild?d.removeChild(this,a):this._removeChildFromDom.apply(this,
arguments)},_removeChildFromDom:function(a){(a=a.domNode)&&a.parentNode&&a.parentNode.removeChild(a)},setProperties:function(a,d){this.properties||(this.properties={});d=d||!1;a.id&&(this._srcElement.addAttribute("id",a.id,a.isTempID),delete a.id,delete a.isTempID);a.isTempID&&delete a.isTempID;for(var b in a){var c=a[b];c||"boolean"==typeof c||"number"==typeof c?(c=this._stringValue(b,c),d||(this.properties[b]=c),this._srcElement.addAttribute(b,c)):(delete this.properties[b],this._srcElement.removeAttribute(b))}},
startup:function(){this.initReload()},renderWidget:function(){},destroyWidget:function(a){(a=this.getHelper())&&a.destroy?a.destroy(this):this.dijitWidget?this.dijitWidget.destroyRecursive():dojo.forEach(this.getChildren(),function(a){a.destroyWidget()})},destroy:function(){this.inherited(arguments);console.error("destry")},selectChild:function(a){},attach:function(){var a=this.getHelper();a&&a.create&&(this._srcElement?a.create(this,this._srcElement):console.error("widget attach : have no src element",
this))},_stringValue:function(a,d){var b=this.getMetadata();a=b.property&&b.property[a];if(!a)return d;if("object"==a.datatype)if(d.getObjectId)d=d.getObjectId();else{if(a=d._edit_object_id)return a;if(d.domNode)return d.domNode.getAttribute("jsId")}else if("json"==a.datatype)a=(a=this.getContext())&&a.getDojo()||dojo,(b=this.getHelper())&&b.checkValue&&(d=b.checkValue(d)),a.isObject(d)&&(d=a.toJson(d));else if("string"==a.datatype)switch(a.format){case "date":case "time":isFinite(d)&&(d=dojo.date.stamp.toISOString(d,
{selector:a.format}));break;default:d=g.encode(d)}return d}})})},"davinci/html/CSSModel":function(){define({shorthand:[["border","border-width border-style border-color border-top border-left border-right border-bottom".split(" ")],["border-width",["border-top-width","border-right-width","border-bottom-width","border-left-width"]],["border-style",["border-top-style","border-right-style","border-bottom-style","border-left-style"]],["border-color",["border-top-color","border-right-color","border-bottom-color",
"border-left-color"]],["border-bottom",["border-bottom-width","border-bottom-style","border-bottom-color"]],["border-top",["border-top-width","border-top-style","border-top-color"]],["border-left",["border-left-width","border-left-style","border-left-color"]],["border-right",["border-right-width","border-right-style","border-right-color"]],["font","font-size line-height font-weight font-style font-family line-height".split(" ")],["border-radius",["border-top-left-radius","border-top-right-radius",
"border-bottom-right-radius","border-bottom-left-radius"]],["-moz-border-radius",["-moz-border-radius-topleft","-moz-border-radius-topright","-moz-border-radius-bottomright","-moz-border-radius-bottomleft"]],["margin",["margin-top","margin-right","margin-bottom","margin-left"]],["padding",["padding-top","padding-right","padding-bottom","padding-left"]],["background",["background-color","background-image","background-repeat","background-position","background-attachment"]]]})},"davinci/ve/utils/StyleArray":function(){define([],
function(){return{mergeStyleArrays:function(p,m){p||(p=[]);m||(m=[]);p=dojo.clone(p);for(var h=0;h<m.length;h++)for(var g in m[h])for(j=p.length-1;0<=j;j--){var f=p[j],e;for(e in f)if(g==e){p.splice(j,1);break}}return p.concat(m)}}})},"davinci/ve/GenericWidget":function(){define(["dojo/_base/declare","./_Widget"],function(p,m){return p("davinci.ve.GenericWidget",m,{isGenericWidget:!0,constructor:function(h,g,f,e,c){dojo.attr(g,"dvwidget",f);c&&c.addAttribute("dvwidget",f)},buildRendering:function(){this.containerNode=
this.domNode;if(this._params){for(var h in this._params)this.domNode.setAttribute(h,this._params[h]);this._params=void 0}},_getChildrenData:function(h){for(var g=[],f=this.domNode.childNodes,e=0;e<f.length;e++){var c=f[e],a=void 0;switch(c.nodeType){case 1:(c=require("davinci/ve/widget").byNode(c))&&(a=c.getData(h));break;case 3:(a=c.nodeValue.trim())&&h.serialize&&(a=davinci.html.escapeXml(a));break;case 8:a="\x3c!--"+c.nodeValue+"--\x3e"}a&&g.push(a)}if(0!==g.length)return g},setProperties:function(h){var g=
this.domNode,f;for(f in h)"style"===f?dojo.style(g,h[f]):h[f]?g[f]=h[f]:g.removeAttribute(f);this.inherited(arguments)},_attr:function(h,g){if(1<arguments.length)this.domNode.setAttribute(h,g);else return this.domNode.getAttribute(h)},getTagName:function(){return this.domNode.nodeName.toLowerCase()}})})},"davinci/ve/DeliteWidget":function(){define("dojo/_base/declare ./_Widget ./widget require xide/registry xide/utils".split(" "),function(p,m,h,g,f,e){function c(a){a.declaredClass&&"davinci.ve.DeliteWidget"!==
a.declaredClass?a.type=a.declaredClass:a.domNode&&a.domNode.declaredClass&&-1==a.domNode.declaredClass.indexOf("uniq")&&(a.type=a.domNode.declaredClass);if(!a.type&&a.domNode.baseClass)switch("delite/"+e.capitalize(a.domNode.baseClass.replace("d-",""))){case "delite/Radio-button":a.type="delite/RadioButton";break;case "delite/Checkbox":a.type="delite/Checkbox";break;case "delite/Accordion-header":a.type="delite/AccordionHeader";break;case "delite/Combobox":a.type="delite/Combobox";break;case "delite/Toggle-button":a.type=
"delite/ToggleButton";break;case "delite/Tab-bar":a.type="delite/TabBar";break;case "delite/View-stack":a.type="delite/ViewStack";break;case "delite/MediaPlayer":a.type="delite/MediaPlayer";break;case "delite/Panel":a.type="delite/Panel";break;case "delite/Select":a.type="delite/Select";break;case "delite/Button":a.type="delite/Button";break;case "delite/Accordion":a.type="delite/Accordion";break;case "delite/Slider":a.type="delite/Slider"}if(!a.type&&a.domNode&&a.domNode.getAttribute("is")){var c=
a.domNode.getAttribute("is");a.type=c}a.type?f.add(a.domNode):console.error("have no widget type ",a)}p=p("davinci.ve.DeliteWidget",m,{isGenericWidget:!0,helper:h,getData:function(a){a=a||{identify:!0,preserveStates:!0};var c;c=(c=this.getHelper())&&c.getData?c.getData.apply(c,[this,a]):this._getData(a);var e=!1;"no_id"===this.id&&(e=dijit.getUniqueId(this.type.toLowerCase().replace("/","-").replace(/\./g,"_")),this.id=e=e.replace("delite/","d-").toLowerCase(),c.properties.id=e,c.properties.id=e,
this.domNode.id=e,e=!0);a.identify&&!e&&f.byId(this.id);f.add(this.domNode);c.maqAppStates=dojo.clone(this.domNode._maqAppStates);c.maqDeltas=dojo.clone(this.domNode._maqDeltas);c.properties||(c.properties={});if(this.properties)for(var d in this.properties)d in c.properties||(c.properties[d]=this.properties[d]);a=this._srcElement;for(var e=a.attributes,b=0;b<e.length;b++){var g=e[b];d=g.name;if("on"==g.name.substr(0,2).toLowerCase())c.properties[g.name]=g.value;else if("a"==a.tag.toLowerCase()&&
"href"==g.name.toLowerCase())c.properties[g.name]=g.value;else if("stop"===d||"bidirectional"===d||"block"===d||"targetevent"===d)c.properties[g.name]=g.value}return c},_fixType:function(a){return c(a)},_getChildren:function(a){function c(a){dojo.forEach(a.children,function(a){(a=b.getWidget(a,!1))&&!a.type&&d._fixType(a);d.metadata&&d.metadata.ignore&&a.type&&-1!==d.metadata.ignore.indexOf(a.type)||a&&a.type&&(-1==a.type.indexOf("html.")||d.metadata&&1==d.metadata.htmlContent)&&e.push(a)})}var e=
[],d=this;a=this.container||this.domNode;a.containerNode&&null==this.domNode.render&&(a=a.containerNode);this.domNode&&null!=this.domNode.render&&(a=this.domNode);var b=g("davinci/ve/widget");a&&(c(a),0==e.length&&this.domNode.containerNode&&c(this.domNode.containerNode));return d.metadata&&d.metadata.noChildren?[]:e},getChildren:function(a){var c=this.getHelper();return c&&c.getChildren?c.getChildren(this,a):this._getChildren(a)},constructor:function(a,c,e,d,b){this.acceptsHTMLChildren=!0},buildRendering:function(){this.containerNode=
this.domNode;if(this._params){for(var a in this._params)this.domNode.setAttribute(a,this._params[a]);this._params=void 0}},_getChildrenData:function(a){var c=this.domNode;if(!c.hasChildNodes())return null;if(c&&c.getChildrenData)return c.getChildrenData();var c=[],e=this.domNode.childNodes,d=g("davinci/ve/widget");this.metadata&&this.metadata.noChildren&&(e=[]);for(var b=0;b<e.length;b++){var f=e[b],h=void 0;switch(f.nodeType){case 1:if((f=d.byNode(f))&&f.type&&-1!==f.type.indexOf("html.")&&!0!==
this.metadata.htmlContent)break;if(this.metadata&&this.metadata.ignore&&f.type&&-1!==this.metadata.ignore.indexOf(f.type))break;f&&(h=f.getData(a));break;case 3:(h=f.nodeValue.trim())&&(a.serialize||!0===this.metadata.htmlContent)&&(h=davinci.html.escapeXml(h));break;case 8:h="\x3c!--"+f.nodeValue+"--\x3e"}(h&&h.type&&-1==h.type.indexOf("html.")||h&&!0===this.metadata.htmlContent)&&c.push(h)}if(0!==c.length)return c},_getPropertyValue:function(a){if(this.domNode._get){var c=this.domNode._get(a);null==
c&&(c=this.domNode.getAttribute(a));return c}if(this.containerNode&&a in this.containerNode)return this.containerNode[a]},setProperties:function(a){var c=this.domNode,e;for(e in a)"style"===e?dojo.style(c,a[e]):a[e]?(c[e]=a[e],c._set&&c._set(e,a[e]),dojo.attr(c,e,a[e])):c.removeAttribute(e);this.inherited(arguments)},_attr:function(a,c){},getTagName:function(){return this.domNode.nodeName.toLowerCase()},getParent:function(){if("xblox/RunScript"==this.type){var a=this.domNode;if(a&&a._targetReference&&
a._targetReference._dvWidget)return a._targetReference._dvWidget}return this.inherited(arguments)}});p.fixType=c;return p})},"davinci/ve/HTMLWidget":function(){define(["dojo/_base/declare","./_Widget"],function(p,m){return p("davinci.ve.HTMLWidget",m,{isHtmlWidget:!0,addHTMLClasses:!0,constructor:function(h,g,f){this.type="html."+g.tagName.toLowerCase();this.acceptsHTMLChildren=!0;null!=f&&(this.addHTMLClasses=f)},buildRendering:function(){this.containerNode=this.domNode;if(this._params){for(var h in this._params)this.domNode.setAttribute(h,
this._params[h]);this._params=void 0}try{!1!==this.addHTMLClasses&&dojo.addClass(this.domNode,"HtmlWidget")}catch(g){}},_getChildrenData:function(h){function g(c){(c=c.nodeValue.trim())&&(c=davinci.html.escapeXml(c));return c}var f=this.domNode;if(!f.hasChildNodes())return null;if(1===f.childNodes.length&&3===f.firstChild.nodeType)return g(f.firstChild);var e=[];dojo.forEach(f.childNodes,function(c){var a;switch(c.nodeType){case 1:(c=require("davinci/ve/widget").byNode(c))&&(a=c.getData(h));break;
case 3:a=g(c);break;case 8:a="\x3c!--"+c.nodeValue+"--\x3e"}a&&e.push(a)});return e},setProperties:function(h,g){var f=this.domNode;g=g||!1;for(var e in h)if("style"===e)dojo.style(f,h[e]);else if(!g){var c=h[e];c||"boolean"==typeof c||"number"==typeof c?f.setAttribute(e,c):f.removeAttribute(e)}this.inherited(arguments)},resize:function(){this.getChildren().forEach(function(h){h.resize&&h.resize()})},_attr:function(h,g){if(1<arguments.length)this.domNode[h]=g;else return this.domNode[h]},getTagName:function(){return this.domNode.nodeName.toLowerCase()}})})},
"davinci/ve/ObjectWidget":function(){define(["dojo/_base/declare","dojo/dom-attr","./_Widget"],function(p,m,h){return p("davinci.ve.ObjectWidget",h,{isObjectWidget:!0,constructor:function(g,f,e,c,a){"string"===typeof e&&(m.set(f,"data-dojo-type",e),a&&a.addAttribute("data-dojo-type",e))},postCreate:function(){var g=this._params.jsId,f=require("davinci/ve/widget")._dojo(this.domNode),e;if(g){if(m.set(this.domNode,"jsId",g),e=this.getObjectType())if(e=f.getObject(e.replace(/\//g,".")))if(e=e.markupFactory?
e.markupFactory(this._params,this.domNode,e):e.prototype&&e.prototype.markupFactory?e.prototype.markupFactory(this._params,this.domNode,e):new e(this._params,this.domNode))e._edit_object_id=g,f.setObject(g,e)}else if(g=this.getObjectId())if(e=f.getObject(g))e._edit_object_id=g},getObjectType:function(){var g=this.domNode,g=m.get(g,"data-dojo-type")||m.get(g,"dojoType");return g=g.replace(/\./g,"/")},getObjectId:function(){return m.get(this.domNode,"jsId")},_getChildren:function(){return[]}})})},"davinci/lang/ve":function(){define([],
function(){return{common:"Common",widgetSpecific:"Widget",events:"Events",layout:"Layout",showMinMax:"show min/max",padding:"Padding",margins:"Margins",showtrbl:"show t/r/b/l",background:"Background",border:"Border",showDetails:"show details",fontsAndText:"Fonts/Text",shapesSVG:"SVG",properties:"properties",Scenes:"Scenes",States:"States",ActiveScene:"This scene is currently visible",AppStateFocus:"This application state is the target for application-state-specific visibility or styling changes",
InitialScene:"This scene will show initially when the page runs",chooseDeviceSilhouette:"Choose a device silhouette: ",filesHasUnsavedChanges:"The file '${0}' has unsaved changes, \"Save\" changes and continue with switch device silhouette.",selectAncestorTitle:"Select ancestor",selectAncestorLabel:"Select ancestor (closest ancestor listed first):",createNewState:"Create New State",updateCurrentState:"Update Current State",createLabel:"Create",updateLabel:"Update",modifyState:"Modify State",modifyLabel:"Update",
stateLabel:"Name",enterStateName:"Please enter a state name.",stateNameExists:"State name '${name}' already exists. Please enter a different state name.",renameState:"Rename State",renameLabel:"Rename",cancelLabel:"Cancel",newStateLabel:"New name:",manageStates:"Manage Widget Visibility for Different States",manageStatesCheckLabel:"Check:",manageStatesCheckCurrentStateOnly:"Current state",manageStatesCheckAll:"All",manageStatesUncheckAll:"None",manageStatesCheckBackgroundOnly:"Background only",manageStatesAllVisibleFromBackground:"(Visible from Background)",
manageStatesSomeVisibleFromBackground:"(Some visible from Background)",manageStatesSomeVisibleSomeHidden:"(Some visible, some hidden)",initialStateCheckBoxLabel:"Initial state at document load time",EnableApplicationStates:"Enable/disable application states",EnableAsStateContainerDescription:"Setting the check box below and clicking OK will allow custom application states to be defined on the currently selected widget.",DisableAsStateContainerDescription:"Unsetting the check box below and clicking OK will disallow custom application states on the currently selected widget.",
DisableAsStateContainerDataLoss:"Any existing interactivity based on existing application states will be lost.",EnableAsStateContainerWidgetLabel:"Application states are enabled on this widget",EnableApplicationStatesCurrentWidget:"Currently selected widget",EnableApplicationStatesCurrentStates:"Current application states",EnableApplicationStatesNone:"(none)",NewWidgetsCurrentStateTitleBackground:"Toggle whether new widgets go to Background or selected state (current value: Background)",NewWidgetsCurrentStateTitleCurrentState:"Toggle whether new widgets go to Background or selected state (current value: selected state)",
richTextInputHelp:"Provides Rich Text (word processor-like) editing of HTML.",smartInputHelp1:"If you use any markup characters (\x26lt;,\x26gt;,\x26amp;), you need to specify whether the text represents literal (plain) text or HTML markup that should be parsed (using an innerHTML assignment).",smartInputHelp2:"Text represents literal (plain) text.",loading:"Loading...",htmlMarkup:"HTML markup",creatingStyleRules:"Creating Style Rules with app.css",propChangeCannotComplete:"This property change cannot be completed because the operation attempts to modify a read-only theme CSS file.",
toChangeProperty:"To change this property, one technique is to add a class to this widget (at top of Properties palette)  and then open up the CSS Details pane to target a style rule within your app.css file, as described at ${0}.",errorModifyingValue:"Error modifying value",changeWillModify:"This change will modify one of the CSS style rules defined within a 'CSS theme' and will therefore probably impact other widgets on a global basis.",insteadOfChanging:"Instead of changing the theme CSS files, it is usually better to add a class to this widget (at the top of the Properties palette) and then open up the CSS Details pane to target a style rule within your app.css file, as described at ${0}.",
okToProceed:"OK to proceed with this change?",valueIsOverriden:"This value is overriden and can not be changed.",applyToWhich:"Apply to which style rule:",onlyApplyToState:" Only apply to current state (${0})",newRule:"[class: ${0} - New rule in ${1}] ",newThemeRule:"[theme: - New rule in ${0}] ",existingRule:"[class: ${0} - Existing rule in ${1}] ",line:" line: ${0})",propUndefined:"undefined",bgdType_emptystring:"",bgdType_none:"none",bgdType_url:"image",bgdType_linear:"linear gradient",bgdType_radial:"radial gradient",
bgdType_other:"other",bgdPickFile:"Choose...",bgdStop:"Stop",bgdAddStop:"Add a new gradient stop after this stop",bgdRemoveStop:"Remove this gradient stop",bgdBackgroundColor:"background-color:",bgdBackgroundImageType:"background-image type:",bgdImageUrl:"Image URL:",bgdUrl:"URL:",bgdColorStops:"Color stops:",bgdColor:"color",bgdPosition:"position",bgdOptions:"Options:",bgdAngle:"Angle:",bgdPosition2:"Position:",bgdShape:"Shape:",bgdExtent:"Extent:",bgdBackgroundRepeat:"background-repeat:",bgdBackgroundPosition:"background-position:",
bgdBackgroundSize:"background-size:",bgdBackgroundOrigin:"background-origin:",bgdBackgroundClip:"background-clip:",bgdBackgroundImageValue:"'background-image' value:",bgdTemplate:"Template:",colorPicker:"Color picker...",removeValue:"Remove Value",selectColor:"select a color",toolBarFor:"",noSelection:"(no selection)",toolBarClass:"class:",toolBarId:"ID:",idAlreadyUsed:"This id is already used by another widget",noValidParents:"No valid parents at this position",willBeChildOf:"Will become a child of:",
candidateParents:"Candidate parents:",toChangePress:"To change, press numbers",vteWarningTitle:"Theme Version Warning",vteWarningMessage:"Theme version does not match Maqetta version this could produce unexpected results. We suggest recreating the custom theme using the current version of Maqetta and deleting the existing theme.",vteWarningUnsuportedBrowserTitle:"Unsupported brower",vteWarningUnsuportedBrowserMessage:"Editing mobile themes is only supported on webkit browsers, we sugguest using Chrome or Safari to customize mobile themes.",
vteWarningToolkitMessage:"Theme version does not match workspace library version this could produce unexpected results. We suggest recreating the custom theme using the current version of Maqetta and deleting the existing theme.",vteErrorTitle:"Theme Version Error",vteErrorMessage:"Theme version is not supported by this version of Maqetta. You must recreating custom theme using the current version of Maqetta and deleting the existing theme..",vteErrorSavingResourceMessage:"error saving resource\n",
"SourceComboButton-source":"Source","SourceComboButton-splitHorizontal":"Split-H","SourceComboButton-splitVertical":"Split-V","LayoutDropDownButton-flow":"Flow","LayoutDropDownButton-absolute":"Absolute"}})},"davinci/ve/views/SwitchingStyleView":function(){define("dojo/_base/declare dojo/_base/kernel davinci/lang/ve xide/utils dijit/layout/ContentPane davinci/Runtime davinci/workbench/WidgetLite davinci/ve/widgets/HTMLStringUtil".split(" "),function(p,m,h,g,f,e,c,a){return p("davinci.ve.views.SwitchingStyleView",
[c],{_editor:null,_widget:null,_subWidget:null,_titleBarDiv:"\x3cdiv class\x3d'palette_titleBarDiv'\x3e\x3cspan class\x3d'paletteCloseBox'\x3e\x3c/span\x3e\x3cspan class\x3d'titleBarDivTitle'\x3e\x3c/span\x3e\x3c/div\x3e",constructor:function(a,c){},pageTemplate:[{key:"widgetSpecific",className:"maqPropertySection page_editor_only",addCommonPropertiesAtTop:!1,html:"\x3cdiv dojoType\x3d'davinci.ve.widgets.WidgetProperties'\x3e\x3c/div\x3e"},{key:"events",className:"maqPropertySection page_editor_only",
addCommonPropertiesAtTop:!1,pageTemplate:{html:"\x3cdiv dojoType\x3d'davinci.ve.widgets.EventSelection'\x3e\x3c/div\x3e"}},{key:"layout",className:"maqPropertySection",addCommonPropertiesAtTop:!0,pageTemplate:[{display:"width",type:"multi",target:["width"],values:["","auto","100%","200px","10em"]},{display:"height",type:"multi",target:["height"],values:["","auto","100%","200px","10em"]},{html:"\x26nbsp;"},{key:"showMinMax",display:"\x26nbsp;\x26nbsp;\x26nbsp;",type:"toggleSection",pageTemplate:[{display:"min-height",
type:"multi",target:["min-height"],rowClass:"propertiesSectionHidden"},{display:"max-height",type:"multi",target:["max-height"],rowClass:"propertiesSectionHidden"},{display:"min-width",type:"multi",target:["min-width"],rowClass:"propertiesSectionHidden"},{display:"max-width",type:"multi",target:["max-width"],rowClass:"propertiesSectionHidden"},{html:"\x26nbsp;",rowClass:"propertiesSectionHidden"}]},{display:"position",type:"combo",target:["position"],values:["","absolute","relative"]},{display:"left",
type:"multi",target:["left"],values:["","0px","1em"]},{display:"top",type:"multi",target:["top"],values:["","0px","1em"]},{display:"right",type:"multi",target:["right"],values:["","0px","1em"]},{display:"bottom",type:"multi",target:["bottom"],values:["","0px","1em"]},{display:"display",type:"combo",target:["display"],values:["","none","block","inline","inline-block"]},{display:"opacity",type:"multi",target:["opacity"],values:["0","0.5","1.0"]},{display:"box-shadow",type:"text",target:["box-shadow"],
value:["","none","1px 1px rgba(0,0,0,.5)"]},{display:"float",type:"combo",target:["float"],values:["","none","left","right"]},{display:"clear",type:"combo",target:["clear"],values:["","none","left","right","both"]},{display:"overflow",type:"combo",target:["overflow"],values:["","visible","hidden","scroll","auto"]},{display:"z-index",type:"multi",target:["z-index"],values:" auto 0 1 100 -1 -100".split(" ")},{display:"box-sizing",type:"combo",target:["box-sizing","-webkit-box-sizing","-ms-box-sizing",
"-moz-box-sizing"],values:["","content-box","border-box"]}]},{key:"padding",className:"maqPropertySection",addCommonPropertiesAtTop:!0,pageTemplate:[{display:"\x3cb\x3e(padding)\x3c/b\x3e",type:"multi",target:["padding"],values:["","0px","1em"]},{key:"showtrbl",display:"\x26nbsp;\x26nbsp;\x26nbsp;",type:"toggleSection",pageTemplate:[{display:"padding-top",type:"multi",target:["padding-top"],values:["","0px","1em"],rowClass:"propertiesSectionHidden"},{display:"padding-right",type:"multi",target:["padding-right"],
values:["","0px","1em"],rowClass:"propertiesSectionHidden"},{display:"padding-bottom",type:"multi",target:["padding-bottom"],values:["","0px","1em"],rowClass:"propertiesSectionHidden"},{display:"padding-left",type:"multi",target:["padding-left"],values:["","0px","1em"],rowClass:"propertiesSectionHidden"}]}]},{key:"margins",className:"maqPropertySection",addCommonPropertiesAtTop:!0,pageTemplate:[{display:"\x3cb\x3e(margin)\x3c/b\x3e",type:"multi",target:["margin"],values:["","0px","1em"]},{key:"showtrbl",
display:"\x26nbsp;\x26nbsp;\x26nbsp;",type:"toggleSection",pageTemplate:[{display:"margin-top",type:"multi",target:["margin-top"],values:["","0px","1em"],rowClass:"propertiesSectionHidden"},{display:"margin-right",type:"multi",target:["margin-right"],values:["","0px","1em"],rowClass:"propertiesSectionHidden"},{display:"margin-bottom",type:"multi",target:["margin-bottom"],values:["","0px","1em"],rowClass:"propertiesSectionHidden"},{display:"margin-left",type:"multi",target:["margin-left"],values:["",
"0px","1em"],rowClass:"propertiesSectionHidden"}]}]},{key:"background",className:"maqPropertySection",addCommonPropertiesAtTop:!0,pageTemplate:[{display:"background-color",type:"background",target:["background-color"],colorswatch:!0},{display:"background-image",type:"background",target:["background-image"],values:["","none"]},{display:"background-repeat",type:"background",values:["","repeat","repeat-x","repeat-y","no-repeat"],target:["background-repeat"]},{display:"background-position",type:"background",
target:["background-position"],values:";0px 0px;0% 0%;left top;center center;right bottom".split(";")},{display:"background-size",type:"background",target:["background-size"],values:["","auto","contain","cover","100%"]},{display:"background-origin",type:"background",target:["background-origin"],values:["","border-box","padding-box","content-box"]},{display:"background-clip",type:"background",target:["background-clip"],values:["","border-box","padding-box","content-box"]}]},{key:"border",className:"maqPropertySection",
addCommonPropertiesAtTop:!0,pageTemplate:[{display:"\x3cb\x3e(border)\x3c/b\x3e",type:"multi",target:["border"],values:["","none","1px solid black"]},{display:"show",type:"combo",values:["none","props","sides","all"],id:"properties_show_select",onchange:function(a){if("number"==typeof a){var c=function(a,d,c,e,f){for(;d<=c;d++){var b=m.byId(a[d].rowId);d>=e&&d<=f?m.removeClass(b,"propertiesSectionHidden"):m.addClass(b,"propertiesSectionHidden")}};if(this.pageTemplate){a=this.pageTemplate[a];var d;
a&&a.id&&(a=m.byId(a.id))&&(d=a.value);m.isString(d)&&("none"===d?c(this.pageTemplate,2,20,-1,-1):"sides"===d?c(this.pageTemplate,2,20,2,5):"props"===d?c(this.pageTemplate,2,20,6,8):"all"===d&&c(this.pageTemplate,2,20,9,20))}}}},{display:"border-top",type:"multi",target:["border-top"],values:["","none","1px solid black"],rowClass:"propertiesSectionHidden"},{display:"border-right",type:"multi",target:["border-right"],values:["","none","1px solid black"],rowClass:"propertiesSectionHidden"},{display:"border-bottom",
type:"multi",target:["border-bottom"],values:["","none","1px solid black"],rowClass:"propertiesSectionHidden"},{display:"border-left",type:"multi",target:["border-left"],values:["","none","1px solid black"],rowClass:"propertiesSectionHidden"},{display:"border-width",type:"multi",target:["border-width"],values:["","1px","1em"],rowClass:"propertiesSectionHidden"},{display:"border-style",type:"multi",target:["border-style"],values:["","none","solid","dotted","dashed"],rowClass:"propertiesSectionHidden"},
{display:"border-color",type:"color",target:["border-color"],rowClass:"propertiesSectionHidden"},{display:"border-top-width",type:"multi",target:["border-top-width"],values:["","1px","1em"],rowClass:"propertiesSectionHidden"},{display:"border-top-style",type:"multi",target:["border-top-style"],values:["","none","solid","dotted","dashed"],rowClass:"propertiesSectionHidden"},{display:"border-top-color",type:"color",target:["border-top-color"],rowClass:"propertiesSectionHidden"},{display:"border-right-width",
type:"multi",target:["border-right-width"],values:["","1px","1em"],rowClass:"propertiesSectionHidden"},{display:"border-right-style",type:"multi",target:["border-right-style"],values:["","none","solid","dotted","dashed"],rowClass:"propertiesSectionHidden"},{display:"border-right-color",type:"color",target:["border-right-color"],rowClass:"propertiesSectionHidden"},{display:"border-bottom-width",type:"multi",target:["border-bottom-width"],values:["","1px","1em"],rowClass:"propertiesSectionHidden"},
{display:"border-bottom-style",type:"multi",target:["border-bottom-style"],values:["","none","solid","dotted","dashed"],rowClass:"propertiesSectionHidden"},{display:"border-bottom-color",type:"color",target:["border-bottom-color"],rowClass:"propertiesSectionHidden"},{display:"border-left-width",type:"multi",target:["border-left-width"],values:["","1px","1em"],rowClass:"propertiesSectionHidden"},{display:"border-left-style",type:"multi",target:["border-left-style"],values:["","none","solid","dotted",
"dashed"],rowClass:"propertiesSectionHidden"},{display:"border-left-color",type:"color",target:["border-left-color"],rowClass:"propertiesSectionHidden"},{display:"border-collapse",type:"combo",target:["border-collapse"],values:["","separate","collapse"]},{display:"\x3cb\x3e(border-radius)\x3c/b\x3e",type:"multi",target:["border-radius","-moz-border-radius"],values:["","0px","6px"]},{key:"showDetails",display:"",type:"toggleSection",pageTemplate:[{display:"border-top-left-radius",type:"multi",target:["border-top-left-radius",
"-moz-border-radius-topleft"],values:["","0px","6px"],rowClass:"propertiesSectionHidden"},{display:"border-top-right-radius",type:"multi",target:["border-top-right-radius","-moz-border-radius-topright"],values:["","0px","6px"],rowClass:"propertiesSectionHidden"},{display:"border-bottom-right-radius",type:"multi",target:["border-bottom-right-radius","-moz-border-radius-bottomright"],values:["","0px","6px"],rowClass:"propertiesSectionHidden"},{display:"border-bottom-left-radius",type:"multi",target:["border-bottom-left-radius",
"-moz-border-radius-bottomleft"],values:["","0px","6px"],rowClass:"propertiesSectionHidden"}]}]},{key:"fontsAndText",className:"maqPropertySection",addCommonPropertiesAtTop:!0,pageTemplate:[{display:"font",type:"text",target:["font"]},{display:"font-family",type:"font",target:["font-family"]},{display:"size",type:"multi",target:["font-size"],values:["","100%","1em","10px","10pt"]},{display:"color",type:"color",target:["color"]},{display:"font-weight",type:"combo",target:["font-weight"],values:["",
"normal","bold"]},{display:"font-style",type:"combo",target:["font-style"],values:["","normal","italic"]},{display:"text-decoration",type:"combo",target:["text-decoration"],values:["","none","underline","line-through"]},{display:"text-align",type:"combo",target:["text-align"],values:["","left","center","right","justify"]},{display:"vertical-align",type:"combo",target:["vertical-align"],values:["","baseline","top","middle","bottom"]},{display:"white-space",type:"combo",target:["white-space"],values:" normal nowrap pre pre-line pre-wrap".split(" ")},
{display:"text-indent",type:"multi",target:["text-indent"],values:["","0","1em","10px"]},{display:"line-height",type:"multi",target:["line-height"],values:["","normal","1.2","120%"]}]}],buildRendering:function(){this.domNode=m.doc.createElement("div");m.addClass(this.domNode,"propertiesContent");var a;a=""+this._titleBarDiv;for(var c=0;c<this.pageTemplate.length;c++)if(this.pageTemplate[c].title=h[this.pageTemplate[c].key]?h[this.pageTemplate[c].key]:"Key not found",this.pageTemplate[c].pageTemplate)for(var d=
0;d<this.pageTemplate[c].pageTemplate.length;d++)this.pageTemplate[c].pageTemplate[d].key&&(this.pageTemplate[c].pageTemplate[d].display+=h[this.pageTemplate[c].pageTemplate[d].key]?h[this.pageTemplate[c].pageTemplate[d].key]:"Key not found");this.domNode.innerHTML=a+"\x3cdiv class\x3d'propertiesToolBar' dojoType\x3d'davinci.ve.widgets.WidgetToolBar'\x3e\x3c/div\x3e\x3cdiv dojoType\x3d'davinci.ve.widgets.WidgetProperties'\x3e\x3c/div\x3e\x3cdiv class\x3d'propScrollableArea'\x3e\x3ctable class\x3d'propRootDetailsContainer'\x3e\x3ctr\x3e\x3ctd class\x3d'propPaletteRoot'\x3e";
this.inherited(arguments)},_widgetValuesChanged:function(a){var c=this._currentPropSection;if(c){for(var d=!1,b=0;b<this.pageTemplate.length;b++)if(this.pageTemplate[b].key==c){d=!0;break}if(d)for(c=this._getVisibleCascade(b),d=0;d<c.length;d++)c[d]._widgetValuesChanged(a)}},_getVisibleCascade:function(a){if(a)return this.pageTemplate[a].cascade;a=[];var c=this._currentPropSection;if(c)for(var d=0;d<this.pageTemplate.length;d++)if(this.pageTemplate[d].key==c){a=a.concat(this.pageTemplate[d].cascade);
break}return a},_updatePaletteValues:function(a){if(this._editor){var c=a[0];this._subwidget=(this._widget=c)&&c.subwidget;this.setReadOnly(!(this._widget||this._subwidget));for(var c=this._getVisibleCascade(),d=0;d<c.length;d++)c[d]._widgetSelectionChanged(a)}},_widgetSelectionChanged:function(a){this._updatePaletteValues(a.selection)},_stateChanged:function(){this._updatePaletteValues(this._widget?[this._widget]:[])},_widgetPropertiesChanged:function(a){this._widget&&this._widget.type!==a[0].type||
this._updatePaletteValues(a)},_titlePaneOpen:function(a){a=this._getVisibleCascade(a);for(var c=0;c<a.length;c++)a[c]._editorSelected({editor:this._editor})},startup:function(){this.domNode.style.height="100%";this._editor=e.currentEditor;this.inherited(arguments);for(var a=0;a<this.pageTemplate.length;a++){var c=this.pageTemplate[a];if(c.pageTemplate)for(var d=0;d<c.pageTemplate.length;d++){var b=c.pageTemplate[d];b.onchange&&b.id&&this.addHandle("onchange",m.connect(m.byId(b.id),"onchange",m.hitch(c,
b.onchange,d)))}}for(a=0;a<this.pageTemplate.length;a++)this.pageTemplate[a].cascade=[];try{this.setReadOnly(!0)}catch(n){logError(n,"set read only crashed ! "+n)}this.onEditorSelected();this.subscribe("/davinci/ui/widgetValuesChanged",m.hitch(this,this._widgetValuesChanged));this.subscribe("/davinci/ui/widgetPropertiesChanged",m.hitch(this,this._widgetPropertiesChanged));this.subscribe("/davinci/ui/editorSelected",m.hitch(this,this._editorSelected));this.subscribe("/davinci/ui/widgetSelected",m.hitch(this,
this._widgetSelectionChanged));this.subscribe("/davinci/states/state/changed",m.hitch(this,this._stateChanged));this.subscribe("/maqetta/appstates/state/changed",m.hitch(this,this._stateChanged));this.subscribe("/davinci/ui/initialPerspectiveReady",m.hitch(this,this._initialPerspectiveReady));this.subscribe("/davinci/workbench/ready",m.hitch(this,this._workbenchReady))},setReadOnly:function(a){for(var c=0;c<this.pageTemplate.length;c++){var d=this.pageTemplate[c].pageTemplate;if(d)for(var b=0;b<d.length;b++){var e=
d[b].widget;e?e.set("readOnly",a):(e=d[b].domNode)&&m.attr(e,"disabled",a)}}},_modelEntryById:function(a){for(var c=0;c<this.pageTemplate.length;c++){var d=this.pageTemplate[c].pageTemplate;if(d)for(var b=0;b<d.length;b++)if(a==d[b].id)return d[b]}},_editorSelected:function(a){this._editor=a.editor;this.onEditorSelected(this._editor);a=this.tabContainer;this.getParent();var c=a.selectedChildWidget||a.getSelected(),d=!1,b=m.query(".maqPropertySection",a.domNode);this._editor?"davinci.ve.PageEditor"!=
this._editor.declaredClass&&"davinci.ve.themeEditor.ThemeEditor"!=this._editor.declaredClass?b.forEach(function(a){dijit.byNode(a)==c&&(d=!0)}):(b.forEach(function(a){}),"davinci.ve.themeEditor.ThemeEditor"==this._editor.declaredClass&&m.query(".page_editor_only",a.domNode).forEach(function(a){dijit.byNode(a)==c&&(d=!0)})):(b.forEach(function(a){dijit.byNode(a)}),d=!0);d&&this._selectFirstVisibleTab()},onEditorSelected:function(){this._subWidget=this._widget=null;if(this._oldClassName)if(this.domNode)m.removeClass(this.domNode.parentNode.parentNode,
this._oldClassName);else{console.error("have no dom node ! : "+this.id);return}if(this._editor)if(this._editor&&this._editor.editorID&&(this._oldClassName=this._editor.editorID.replace(/\./g,"_"),this.domNode?m.addClass(this.domNode.parentNode.parentNode,this._oldClassName):console.error("have no dom node !")),this.domNode){for(var c=this._currentPropSection,e=m.query(".propSectionButton",this.domNode),d=0;d<e.length;d++){var b=e[d];this._editor&&this._editor.supports&&this._editor.supports("propsect_"+
this.pageTemplate[d].key)?m.removeClass(b,"dijitHidden"):(m.addClass(b,"dijitHidden"),c==this.pageTemplate[d].key&&a.showRoot())}c=[];for(d=0;d<this.pageTemplate.length;d++)(e=this.pageTemplate[d].cascade)&&(c=c.concat(e));for(d=0;d<c.length;d++)e=c[d],e._editorSelected&&e._editorSelected({editor:this._editor})}else console.error("have no dom node !")},_destroyContent:function(){var a=this.containerNode||this.domNode;for(m.forEach(m.query("[widgetId]",a).map(dijit.byNode),function(a){a.destroy()});a.firstChild;)m._destroyElement(a.firstChild);
m.forEach(this._tooltips,function(a){a.destroy()});this._tooltips=void 0;this._destroyHandles()},sectionTitleFromKey:function(a){for(var c=0;c<this.pageTemplate.length;c++)if(this.pageTemplate[c].key==a)return this.pageTemplate[c].title},_initialPerspectiveReady:function(){var c=null;if(!this._alreadySplitIntoMultipleTabs){var e=this.tabContainer;m.addClass(e.domNode,"propRootDetailsContainer");m.addClass(e.domNode,"propertiesContent");for(var d=0;d<this.pageTemplate.length;d++){var c=this.pageTemplate[d].key,
b=this.pageTemplate[d].title,n=this.pageTemplate[d].className;n||(n="");var r=this._titleBarDiv,r=r+"\x3cdiv class\x3d'propertiesToolBar' dojoType\x3d'davinci.ve.widgets.WidgetToolBar'\x3e\x3c/div\x3e",r=r+("\x3cdiv class\x3d'cascadeBackButtonDiv'\x3e\x3cbutton class\x3d'btn btn-xs btn-info' onclick\x3d'davinci.ve.widgets.HTMLStringUtil.showSection(\""+c+'","'+b+"\")'\x3e"+b+" "+h.properties+"\x3c/button\x3e\x3c/div\x3e"),c=a.generateTemplate(this.pageTemplate[d]),c=r+c;0==d?(c=this,c.set("title",
b),m.addClass(c.domNode,n)):(r=e.createTab(b,null,null,null,{"class":n,delegate:this}),c=g.addWidget(f,{title:b,content:c,"class":n,delegate:this},null,r,!1),r.cp=c,r._maqPropGroup=this.pageTemplate[d].key,r.add(c,null,!1));c._maqPropGroup=this.pageTemplate[d].key;b=m.query(".paletteCloseBox",c.domNode);0<b.length&&m.connect(b[0],"click",this,function(a){davinci.Workbench.collapsePaletteContainer(a.currentTarget)})}for(b=0;b<this.pageTemplate.length;b++)if(this.pageTemplate[b].cascade=[],n=this.pageTemplate[b].pageTemplate){for(d=
0;d<n.length;d++)r=n[d].id,(c=dijit.byId(r))?n[d].widget=c:(c=m.byId(r))&&(n[d].domNode=c);m.query("#"+this.pageTemplate[b].id+" .CascadeTop").forEach(function(a){return function(b){b=dijit.byId(b.id);a.cascade.push(b)}}(this.pageTemplate[b]))}e._on("selectChild",function(b){b._maqPropGroup&&(this._currentPropSection=b._maqPropGroup,b=(b=this._editor&&this._editor.getContext?this._editor.getContext():null)&&b.getSelection?b.getSelection():[],this._updatePaletteValues(b),a._initSection(this._currentPropSection))}.bind(this));
this._alreadySplitIntoMultipleTabs=!0}},_workbenchReady:function(){this._updateToolBars()},_updateToolBars:function(){m.query(".propertiesToolBar").forEach(function(a){this._editor&&"davinci.ve.PageEditor"==this._editor.declaredClass?(m.removeClass(a,"dijitHidden"),a.style.display=""):m.addClass(a,"dijitHidden")}.bind(this))},_selectFirstVisibleTab:function(){var a=this.getParent();if(a&&a.getChildren)for(var c=a.getChildren(),d=0;d<c.length;d++){var b=c[d];if("none"!=b.controlButton.domNode.style.display){a._maqDontExpandCollapse=
!0;a.selectChild(b);delete a._maqDontExpandCollapse;break}}}})})},"davinci/workbench/WidgetLite":function(){define(["dojo/_base/declare","dijit/_WidgetBase","dojo/parser","xide/mixins/EventedMixin"],function(p,m,h,g){return p("davinci.workbench.WidgetLite",[m,g],{buildRendering:function(){this.inherited(arguments);/dojotype/i.test(this.domNode.innerHTML||"")&&(this._startupWidgets=dojo.parser.parse(this.domNode,{noStart:!this._earlyTemplatedStartup,inherited:{dir:this.dir,lang:this.lang}}))},_destroyContent:function(){var f=
this.containerNode||this.domNode;for(dojo.forEach(dojo.query("[widgetId]",f).map(dijit.byNode),function(e){e.destroy()});f.firstChild;)dojo._destroyElement(f.firstChild);dojo.forEach(this._tooltips,function(e){e.destroy()});delete this._tooltips;this._destroyHandles()},destroy:function(){this._destroyHandles();this.inherited(arguments)},startup:function(){dojo.forEach(this._startupWidgets,function(f){f&&!f._started&&f.startup&&f.startup()});this.inherited(arguments)}})})},"davinci/ve/widgets/HTMLStringUtil":function(){define("davinci/Runtime ./FontDataStore ./FontComboBox ./DropDown dijit/form/ComboBox ./MetaDataStore ./ColorPicker ./Background2".split(" "),
function(p,m){var h=dojo.getObject("davinci.ve.widgets.HTMLStringUtil",!0);dojo.mixin(h,{__id:0,idPrefix:"davinci_ve_widgets_properties_generated",_currentPropSection:null,animSS:null,animRuleIndex:{},getCurrentPropSection:function(){return this._currentPropSection},getId:function(){return this.idPrefix+this.__id++},injectId:function(g,f){var e=g.indexOf("\x3e");return e?g.substring(0,e)+" id\x3d'"+f+"'"+g.substring(e,g.length):"\x3cspan id\x3d'"+f+"'\x3e"+g+"\x3c/span\x3e"},getEditor:function(g){function f(a){var c=
{};c.value="undefined"!=typeof a.value&&null!==a.value?a.value:a;c.title=a.title||c.value;return c}var e=g.type,c=this.getId();g.id=c;var a=g.disabled?" disabled\x3d'true' ":"";switch(e){case "multi":return e="",g.values&&(e="data\x3d'"+dojo.toJson(dojo.map(g.values,function(a){return{value:a}}))+"'"),"\x3cdiv dojoType\x3d'davinci.ve.widgets.MultiInputDropDown' "+e+"  class\x3d'propertyPaneEditablevalue' style\x3d'display:inline-block; width:100%;' id\x3d'"+c+"'"+a+"\x3e\x3c/div\x3e";case "boolean":return"\x3cinput type\x3d'checkbox' class\x3d'propertyPaneEditablevalue' style\x3d'display:inline-block;margin-left:5px' id\x3d'"+
c+"'\x3e\x3c/input\x3e";case "comboEdit":g=g.values;c="\x3cselect dojoType\x3d'dijit.form.ComboBox' autoComplete\x3d'false' style\x3d'display:inline-block; width:100%;' id\x3d'"+c+"'"+a+"\x3e";for(a=0;a<g.length;a++)e=f(g[a]),c+="\x3coption class\x3d'option' value\x3d'"+e.value+"'\x3e"+e.title+"\x3c/option\x3e";return c+"\x3c/select\x3e";case "combo":g=g.values;c="\x3cselect class\x3d'form-control input-transparent' style\x3d'display:inline-block; width:100%;' id\x3d'"+c+"'"+a+"\x3e";for(a=0;a<g.length;a++)e=
f(g[a]),c+="\x3coption class\x3d'option' value\x3d'"+e.value+"'\x3e"+e.title+"\x3c/option\x3e";return c+"\x3c/select\x3e";case "font":return c="\x3cdiv dojoType\x3d'davinci.ve.widgets.FontDataStore' jsId\x3d'"+c+"_fontStore'\x3e"+("\x3cdiv dojoType\x3d'davinci.ve.widgets.FontComboBox' value\x3d'"+m.fonts[0].value+"' store\x3d'"+c+"_fontStore'  id\x3d'"+c+"' class\x3d'propertyPaneEditablevalue' style\x3d'display:inline-block; width:100%;'\x3e\x3c/div\x3e");case "stateold":return"\x3cdiv dojoType\x3d'davinci.ve.widgets.MetaDataStore' jsId\x3d'davinci.properties.event"+
c+"_Store'\x3e"+("\x3cdiv dojoType\x3d'dijit.form.ComboBox' id\x3d'"+c+"'store\x3d'davinci.properties.event"+c+"_Store' class\x3d'propertyPaneEditablevalue' style\x3d'display:inline-block; width:100%;' autoComplete\x3d'false'\x3e\x3c/div\x3e");case "color":return"\x3cdiv class\x3d'propertyPaneEditablevalue' dojoType\x3d'davinci.ve.widgets.ColorPicker' id\x3d'"+c+"' \x3e\x3c/div\x3e";case "background":return e=dojo.isArray(g.values)?" data\x3d'"+dojo.toJson(g.values)+"'":"",a=dojo.isArray(g.target)?
g.target[0]:g.target,c="\x3cdiv dojoType\x3d'davinci.ve.widgets.Background' id\x3d'"+c+"'"+e+(" propname\x3d'"+a+"'")+(g.colorswatch?" colorswatch\x3d'true'":"")+"\x3e\x3c/div\x3e";case "border":case "number":case "object":case "text":case "array":case "widgetState":case "iconClass":case "state":case "string":if("date"==g.format)return"\x3cdiv class\x3d'propertyPaneEditablevalue' dojoType\x3d'dijit.form.DateTextBox' id\x3d'"+c+"'\x3e\x3c/input\x3e";if("time"==g.format)return"\x3cdiv class\x3d'propertyPaneEditablevalue' dojoType\x3d'dijit.form.TimeTextBox' id\x3d'"+
c+"'\x3e\x3c/input\x3e";default:return c=g.data&&!0===g.data.readonly?"\x3cinput readonly type\x3d'text' class\x3d'form-control input-transparent propertyPaneEditablevalue' style\x3d'display:inline-block; width:100%;' id\x3d'"+c+"'\x3e\x3c/input\x3e":"\x3cinput type\x3d'text' class\x3d'form-control input-transparent propertyPaneEditablevalue' style\x3d'display:inline-block; width:100%;' id\x3d'"+c+"'\x3e\x3c/input\x3e"}},generateTable:function(g,f){var e=f?f.rowsOnly:!1,c=f&&f.zeroSpaceForIncrDecr?
"0px":"20px";f="";if(g.html)return g.id=this.getId(),this.injectId(g.html,g.id);c="\x3ctable class\x3d'property_table_stretchable' border\x3d'0' width\x3d'100%' align\x3d'center' cellspacing\x3d'0' cellpadding\x3d'0'\x3e\x3ccolgroup\x3e\x3ccol style\x3d'width:6px;' /\x3e\x3ccol class\x3d'gap02' /\x3e\x3ccol class\x3d'gap03' /\x3e"+("\x3ccol style\x3d'width:"+c+";' /\x3e")+"\x3ccol style\x3d'width:6px;' /\x3e\x3c/colgroup\x3e";e||(f+=c);for(var a=0;a<g.length;a++)if(g[a].widgetHtml)g[a].id=this.getId(),
g[a].rowId=this.getId(),f+="\x3ctr id\x3d'"+g[a].rowId+"'",g[a].rowClass&&(f+=" class\x3d'"+g[a].rowClass+"'"),f+="\x3e",f+="\x3ctd colspan\x3d'5' width\x3d'100%'\x3e",f+=this.injectId(g[a].widgetHtml,g[a].id),f+="\x3c/td\x3e",f+="\x3c/tr\x3e";else if(g[a].html)g[a].id=this.getId(),g[a].rowId=this.getId(),f+="\x3ctr id\x3d'"+g[a].rowId+"'",f+=" class\x3d'cssPropertySection",g[a].rowClass&&(f+=" "+g[a].rowClass),f+="'\x3e",f+="\x3ctd colspan\x3d'5' width\x3d'100%'\x3e",f+=g[a].html,f+="\x3c/td\x3e",
f+="\x3c/tr\x3e";else if("toggleSection"==g[a].type){f+="\x3ctr id\x3d'"+g[a].id+"'  class\x3d'cssPropertySection'\x3e\x3ctd colspan\x3d'5'\x3e";for(var h="",k=this.generateTable(g[a].pageTemplate,{rowsOnly:!0}),d=0;d<g[a].pageTemplate.length;d++)g[a].pageTemplate[d].rowId&&(h+="dojo.toggleClass('"+g[a].pageTemplate[d].rowId+"','propertiesSectionHidden');"),g[a].pageTemplate[d].cascadeSectionRowId&&(h+="if(this.checked){dojo.removeClass('"+g[a].pageTemplate[d].cascadeSectionRowId+"','propertiesSectionHidden');}else{{dojo.addClass('"+
g[a].pageTemplate[d].cascadeSectionRowId+"','propertiesSectionHidden');}}");f+="\x3cinput type\x3d'checkbox' onclick\x3d\""+h+'"\x3e\x3c/input\x3e';f+=g[a].display;f+="\x3c/td\x3e\x3c/tr\x3e";f+=k}else g[a].display?(g[a].toggleCascade=this.getId(),g[a].cascadeSection=this.getId(),g[a].rowId=this.getId(),g[a].cascadeSectionRowId=this.getId(),f+="\x3ctr id\x3d'"+g[a].rowId+"'",f+=" class\x3d'cssPropertySection",g[a].rowClass&&(f+=" "+g[a].rowClass),f+="'",f+=" propName\x3d'"+g[a].display+"'",f+="\x3e",
f+="\x3ctd/\x3e",f+="\x3ctd class\x3d'propertyDisplayName'\x3e"+g[a].display+":\x26nbsp;\x3c/td\x3e",f+="\x3ctd class\x3d'propertyInputField propertyInputField"+g[a].type+"' \x3e"+this.getEditor(g[a])+"\x3c/td\x3e",f+="\x3ctd class\x3d'propertyExtra' nowrap\x3d'true'\x3e",f+="\x3ctd class\x3d'propertyExtra2' nowrap\x3d'true'\x3e",g[a].target&&!g[a].hideCascade&&(f+="\x3cdiv width\x3d'100%'\x3e\x3cbutton class\x3d'showCss propertyButton' id\x3d'"+g[a].toggleCascade+"'",f+=' onClick\x3d"davinci.ve.widgets.HTMLStringUtil.showProperty(',
f+="'"+g[a].rowId+"'",f+=')"\x3e\x26gt;\x3c/button\x3e',f+="\x3c/div\x3e"),f+="\x3ctd/\x3e",f+="\x3c/tr\x3e",g[a].target&&!g[a].hideCascade&&(h="{'cascadeSectionRowId':\""+g[a].cascadeSectionRowId+"\",'toggleCascade':\""+g[a].toggleCascade+'"}',f+="\x3ctr id\x3d'"+g[a].cascadeSectionRowId+"' class\x3d'cssCascadeSection cascadeRowHidden'\x3e",f+="\x3ctd colspan\x3d'5' width\x3d'100%' class\x3d'showCascadeDiv'\x3e\x3cdiv dojoType\x3d'davinci.ve.widgets.Cascade' toggleClasses\x3d"+h+" target\x3d'"+dojo.toJson(g[a].target)+
"' targetField\x3d'\""+g[a].id+"\"' id\x3d'"+g[a].cascadeSection+"'\x3e\x3c/div\x3e\x3c/td\x3e\x3c/tr\x3e")):(f+="\x3c/table\x3e",f+=this.getEditor(g[a]),f+=c);e||(f+="\x3c/table\x3e");return f},generateTemplate:function(g){var f="";g.pageTemplate?(g.key&&(g.id=this.getId(),f="\x3cdiv class\x3d'propGroup' id\x3d'"+g.id+"' propGroup\x3d'"+g.key+"'\x3e"),f+=this.generateTable(g.pageTemplate),f+="\x3c/div\x3e"):g.html?f+=g.html:g.widgetHtml&&(g.id=this.getId(),f+=this.injectId(g.widgetHtml,g.id));return f},
stylesheetHref:"propview.css",animShowSectionClass:"propRootDetailsContainer",animShowSectionClassSelector:".propRootDetailsContainer",animShowDetailsClass:"property_table_stretchable",animShowDetailsClassSelector:".property_table_stretchable",showPropAnimClasses:["propRowFadeIn","propRowFadeOut","propRowTransparent","propRowOpaque","propRowHidden"],showRoot:function(){this._hideSectionShowRoot();this._currentPropSection=null;return!1},showSection:function(g,f){this._initSection(g);return!1},showProperty:function(g){function f(b){dojo.disconnect(z);
dojo.disconnect(y);e();var d=a._findRule(a.animShowDetailsClassSelector);d?(b=d.ss,d=d.ruleIndex,b.deleteRule(d),b.insertRule(a.animShowDetailsClassSelector+" { margin-top:0px; }",d),c()):console.error("HTMLStringUtil showProperty: transEnd: rule not found")}var e=function(){for(var b=0;b<d.children.length;b++){var c=d.children[b];1==c.nodeType&&dojo.hasClass(c,"cssPropertySection")&&(c==k?a._addRemoveClasses(c,h,[]):a._addRemoveClasses(c,h,["propRowHidden"]))}},c=function(){n&&(dojo.removeClass(n,
"cascadeRowHidden"),dojo.addClass(n,"cascadeRowTransparent"),setTimeout(function(){dojo.removeClass(n,"cascadeRowTransparent");dojo.addClass(n,"cascadeRowFadeIn")},1))};dojo.addClass(dojo.byId("root"),"showingCascade");var a=this,h=this.showPropAnimClasses,k=dojo.byId(g),d=k.parentNode,b=a._searchSiblingsByTagClass(d.children[0],"TR","cssPropertySection"),n=a._searchSiblingsByTagClass(k.nextSibling,"TR","cssCascadeSection");g=a._searchUpByTagClass(d,"TABLE",a.animShowDetailsClass);var r=a._searchUpByTagClass(k,
"DIV","propGroup"),r=dojo.attr(r,"propGroup");dojo.attr(k,"propName");require("davinci/ve/views/SwitchingStyleView").prototype.sectionTitleFromKey(r);if(p.supportsCSS3Transitions){var b=dojo.marginBox(b),b=dojo.marginBox(k).t-b.t,m=a._findRule(a.animShowDetailsClassSelector);if(m){var r=m.ss,m=m.ruleIndex,z=dojo.connect(g,"webkitTransitionEnd",f),y=dojo.connect(g,"transitionend",f);r.deleteRule(m);r.insertRule(a.animShowDetailsClassSelector+" { margin-top:-"+b+"px; opacity:.99; -webkit-transition: all .6s ease; -moz-transition: all .6s ease; }",
m);g=!1;for(b=0;b<d.children.length;b++)r=d.children[b],1==r.nodeType&&dojo.hasClass(r,"cssPropertySection")&&(r==k?(a._addRemoveClasses(r,h,["propRowFadeIn"]),g=!0):g?a._addRemoveClasses(r,h,["propRowHidden"]):a._addRemoveClasses(r,h,["propRowTransparent"]))}else console.error("HTMLStringUtil showProperty: transEnd: rule not found")}else e(),c()},_initSection:function(g){for(var f=this.showPropAnimClasses,e=this._getRootTD(),c=dojo.query(".propGroup",e),a,e=0;e<c.length;e++){var h=c[e];dojo.attr(h,
"propGroup")==g?(dojo.removeClass(h,"dijitHidden"),a=h):dojo.addClass(h,"dijitHidden")}c=dojo.query(".cssPropertySection",a);for(e=0;e<c.length;e++)this._addRemoveClasses(c[e],f,[]);f=dojo.query(".cssCascadeSection",a);for(e=0;e<f.length;e++)dojo.addClass(f[e],"cascadeRowHidden");this._currentPropSection=g;dojo.removeClass(dojo.byId("root"),"showingCascade")},_hideSectionShowRoot:function(){var g=this._getRootTD();dojo.removeClass(g,"dijitHidden")},_findRule:function(g){function f(a,c){for(var e=
0;e<a.cssRules.length;e++){var d=a.cssRules[e];if(3===d.type){if(d=f(d.styleSheet,c))return d}else if(d.selectorText==c)return{ss:a,ruleIndex:e}}}if(this.animSS&&"number"==typeof this.animRuleIndex[g]){var e=this.animRuleIndex[g];if(this.animSS.cssRules[e].selectorText==g)return{ss:this.animSS,ruleIndex:e}}for(e=0;e<document.styleSheets.length;e++){var c=f(document.styleSheets[e],g);if(c)return this.animSS=c.ss,this.animRuleIndex[g]=c.ruleIndex,c}return null},_addRemoveClasses:function(g,f,e){for(var c=
[],a=0;a<f.length;a++){for(var h=!1,k=0;k<e.length;k++)if(f[a]==e[k]){h=!0;break}h||c.push(f[a])}for(a=0;a<c.length;a++)dojo.removeClass(g,c[a]);for(a=0;a<e.length;a++)dojo.addClass(g,e[a])},_searchUpByTagClass:function(g,f,e){for(;null!=g&&"BODY"!=g.nodeName;){if(g.nodeName==f&&(!e||dojo.hasClass(g,e)))return g;g=g.parentNode}return null},_searchSiblingsByTagClass:function(g,f,e){for(;null!=g;){if(g.nodeName==f&&(!e||dojo.hasClass(g,e)))return g;g=g.nextSibling}return null},_getRootDetailsContainer:function(){this._rootDetailsContainer||
(this._rootDetailsContainer=dojo.query(this.animShowSectionClassSelector)[0]);return this._rootDetailsContainer},_getRootTD:function(){var g=this._getRootDetailsContainer();this._rootTD||(this._rootTD=dojo.query(".propPaletteRoot",g)[0]);return this._rootTD}});return h})},"davinci/ve/widgets/FontDataStore":function(){define(["dojo/_base/declare","dojo/data/ItemFileReadStore","davinci/lang/ve","dijit/lang/_common"],function(p,m){p=p("davinci.ve.widgets.FontDataStore",m,{_allValues:[],constructor:function(h){this.setValues(h.values||
davinci.ve.widgets.FontDataStore.fonts)},setValues:function(h){this._allValues=this._allValues.concat(h);this._jsonData={label:"name",identifier:"value",items:this._allValues};this._loadFinished=!1},contains:function(h){for(var g=0;g<this._allValues.length;g++)if(this._allValues[g].value==h||this._allValues[g].name==h)return g;return!1},clearValues:function(){this._allValues=[];this._loadFinished=!1},lookupValue:function(h){h=this.contains(h);return this._allValues[h].value[0]}});return dojo.mixin(p,
{fonts:[{name:"",value:""},{name:"Arial,Helvetica,sans-serif",value:"Arial,Helvetica,sans-serif"},{name:"'Arial Black,Gadget',sans-serif",value:"'Arial Black,Gadget',sans-serif"},{name:"'Comic Sans MS',cursive",value:"'Comic Sans MS',cursive"},{name:"'Courier New',Courier,monospace",value:"'Courier New',Courier,monospace"},{name:"Geneva,Tahoma,sans-serif",value:"Geneva,Tahoma,sans-serif"},{name:"Georgia,serif",value:"Georgia,serif"},{name:"'Helvetica,Trebuchet MS',sans-serif",value:"'Helvetica,Trebuchet MS',sans-serif"},
{name:"Impact,Charcoal,sans-serif",value:"Impact,Charcoal,sans-serif"},{name:"'Lucida Console',Monaco,monospace",value:"'Lucida Console',Monaco,monospace"},{name:"'Lucida Sans Unicode','Lucida Grande',sans-serif",value:"'Lucida Sans Unicode','Lucida Grande',sans-serif"},{name:"'Lucida Console', Monaco, monospace",value:"'Lucida Console', Monaco, monospace"},{name:"'Palatino Linotype','Book Antiqua',Palatino,serif",value:"'Palatino Linotype','Book Antiqua',Palatino,serif"},{name:"Symbol",value:"Symbol"},
{name:"Tahoma,Geneva,sans-serif",value:"Tahoma,Geneva,sans-serif"},{name:"'Times New Roman',Times,serif",value:"'Times New Roman',Times,serif"},{name:"'Trebuchet MS',Helvetica,sans-serif",value:"'Trebuchet MS',Helvetica,sans-serif"},{name:"Verdana,Geneva,sans-serif",value:"Verdana,Geneva,sans-serif"},{name:"Webdings",value:"Webdings"},{name:"Wingdings, 'Zapf Dingbats'",value:"Wingdings, 'Zapf Dingbats'"},{name:"'Zapf Dingbats', Wingdings",value:"'Zapf Dingbats', Wingdings"},{name:"sans-serif",value:"sans-serif"},
{name:"serif",value:"serif"},{name:"monospace",value:"monospace"},{name:"cursive",value:"cursive"},{name:"LCD",value:"LCD"}]})})},"davinci/ve/widgets/FontComboBox":function(){define(["dojo/_base/declare","dijit/form/ComboBox","davinci/lang/ve","dijit/lang/_common"],function(p,m){return p("davinci.ve.widgets.FontComboBox",m,{_getValueAttr:function(){if(this.store)for(var h=0;h<this.store._allValues.length;h++){var g=this.store._allValues[h];if(g.name[0]==this.value)return g.value[0]}return this.value},
_setValueAttr:function(h){this.store&&h?this.store.fetch({query:{value:h},onComplete:function(g,f){1>g.length?this.inherited("_setValueAttr",[h]):(this.inherited("_setValueAttr",[g[0].name[0]]),this.item=g[0])}.bind(this),onError:function(){this.inherited("_setValueAttr",[h])}.bind(this)}):this.inherited("_setValueAttr",[h])}})})},"davinci/ve/widgets/DropDown":function(){define("dcl/dcl xdojo/declare xide/factory dojo/_base/lang dojo/_base/kernel xide/widgets/TemplatedWidgetBase xide/form/Select xide/data/TreeMemory xide/data/ObservableStore dstore/Trackable".split(" "),
function(p,m,h,g,f,e,c,a,q,k){var d=p(e,{numberDelta:1,templateString:"\x3cdiv \x3e\x3c/div\x3e",insertPosition:1,declaredClass:"davinci.ve.widgets.MultiInputDropDown",data:null,divider:"---",postCreate:function(){},get:function(a){return"value"===a&&this._dropDown?this._getValueAttr():""},startup:function(){var b=f.doc.createElement("div");this._run={};var e=this;this.data?(this.data.push({value:d.divider}),this.data.push({label:"Remove Value",value:"Remove Value",run:function(){this.set("value",
"",!1);e._dropDown.set("value","",!0)}})):this.data=[{value:"auto"},{value:"0px"},{value:d.divider},{value:"Remove Value",run:function(){this.set("value","",!1);e._dropDown.set("value","")}},{value:d.divider},{value:"Help",run:function(){alert("help!")}}];for(var g=[],v=0;v<this.data.length;v++)g.push(this.data[v].value),this.data[v].run&&(this._run[this.data[v].value]=this.data[v].run);var z=[];_.each(this.data,function(a){(a.value||"Remove Value"===a.label)&&z.push({label:a.label||a.value,value:a.value,
run:a.run})});this._dropDown=new c({EDITABLE_CLASS:c.TYPEAHEAD,storeClass:m("driverStore",[a,k,q],{setValues:function(a){var b=[],d=0;a&&(this._values=a);f.forEach(this.data,f.hitch(this,function(a){b.push({label:a.label,value:a.value,id:d++})}));this._jsonData={identifier:"id",items:b};this.setData(b);this.root._emit("update",{target:null})},modifyItem:function(a,b){for(var d=0;d<this.data.length;d++)this.data[d].value===a&&(this.data[d].value=b);e._dropDown.set("value",b);this.setValues()},insert:function(a,
b){this.data.splice(a,0,{value:b,label:b});this.setValues()},contains:function(a){for(var b=0;b<this.data.length;b++)if(this.data[b].value==a)return!0;return!1},findSimilar:function(a){if(a=(new RegExp(/(\D*)(-?)(\d+)(\D*)/)).exec(a)){a=new RegExp((0<a.length?a[1]:"")+"(-?)(\\d+)"+(3<a.length?a[4]:""));for(var b=0;b<this.data.length;b++)if(a.test(this.data[b].value))return this.data[b].value}},getItemNumber:function(a){return this.data[a]},clearValues:function(){this._loadFinished=!1}}),required:!1,
title:"",editable:!0,options:z,userData:{}});this._dropDown.startup();this._store=this._dropDown.store;this._plus=g=h.createButton(this._dropDown.previewNode,"fa-plus","btn-default btn-xs2",null,"");f.style(g,"float","right");this._minus=h.createButton(this._dropDown.button0,"fa-minus","btn-default btn-xs2",null,"");g=f.create("div",{"class":"propInputWithIncrDecrButtons"});g.appendChild(this._dropDown.domNode);b.appendChild(g);g=f.doc.createElement("div");f.style(g,"clear","both");b.appendChild(g);
this._currentValue=this._store.data[0];f.connect(this._dropDown,"onKeyUp",this,"_updateSpinner");var y=this;this._dropDown._on?this._dropDown._on("change",function(a){y._onChange(a)}):f.connect(this._dropDown,"onChange",this,"_onChange");f.connect(this._plus,"onclick",this,"_plusButton",!1);f.connect(this._minus,"onclick",this,"_minusButton",!1);this._updateSpinner();this.domNode.appendChild(b);this.add(this._dropDown);this.add(this._store)},_setReadOnlyAttr:function(a){this._isReadOnly=a;this._dropDown&&
(this._dropDown.set("disabled",a),f.attr(this._plus,"disabled",a),f.attr(this._minus,"disabled",a))},onChange:function(a){},_getValueAttr:function(){return this._dropDown.get("value")},_setValueAttr:function(a,d){this._dropDown.set("value",a,!0);this._currentValue=this._dropDown.get("value");!1!==d&&this._onChange(this._currentValue);if(!d)this.onChange()},_changeValue:function(a,d){a=a.split(" ");for(var b="",c=0;c<a.length;c++){0<c&&(b+=" ");var e=a[c].match(/([-\d\.]+)([a-zA-Z%]*)/);if(e)if(1==
e.length)b+=e[0];else for(var f=1;f<e.length;f++)b=isNaN(e[f])||""==e[f]?b+e[f]:b+(parseFloat(e[f])+d);else b+=a[c]}return b},_plusButton:function(){var a=this._dropDown.get("value"),d=this._changeValue(a,this.numberDelta);this._store.modifyItem(a,d);this._dropDown.set("value",d);this._onChange(d)},_minusButton:function(){var a=this._dropDown.get("value"),d=this._changeValue(a,-1*this.numberDelta);this._store.modifyItem(a,d);this._dropDown.set("value",d);this._onChange(d)},_updateSpinner:function(){var a=
this._dropDown.get("value"),a=/(-?)(\d+){1}/.exec(a);this._minus.disabled=a&&a.length?this._plus.disabled=!1:this._plus.disabled=!0;return!0},_onChange:function(a){var b;a in this._run?(this._dropDown.get("value",this._store.getItemNumber(0)),f.hitch(this,this._run[a])()):a==d.divider?this._dropDown.get("value",this._store.getItemNumber(0)):(b=this._store.findSimilar(a))?this._store.modifyItem(b,a):this._store.contains(a)||this._store.insert(this.insertPosition,a);this._currentValue!=this._dropDown.get("value")&&
(this._currentValue=this._dropDown.get("value"),this.onChange(a));this._updateSpinner()}});g.setObject("davinci.ve.widgets.MultiInputDropDown",d);return d})},"davinci/ve/widgets/MetaDataStore":function(){define(["dojo/_base/declare","dojo/data/ItemFileReadStore","davinci/lang/ve","dijit/lang/_common"],function(p,m){return p("davinci.ve.widgets.MetaDataStore",m,{_allValues:[],constructor:function(h){this.setValues(h&&h.values||[])},setValues:function(h){dojo.mixin(this._allValues,h);var g=[];dojo.forEach(this._allValues,
function(f){g.push({name:f,value:f})});this._jsonData={identifier:"name",items:g};this._loadFinished=!1},contains:function(h){return-1!=dojo.indexOf(this._allValues,h)},clearValues:function(){this._allValues=[];this._loadFinished=!1}})})},"davinci/ve/widgets/ColorPicker":function(){define(["davinci/ve/widgets/ColorPicker2"],function(p){return p})},"davinci/ve/widgets/ColorPicker2":function(){define(["xide/widgets/ColorPickerWidget","xide/utils","dcl/dcl","xide/widgets/TemplatedWidgetBase","dojo/_base/lang"],
function(p,m,h,g,f){h=h(g,{templateString:"\x3cdiv \x3e\x3c/div\x3e",numberDelta:1,insertPosition:9,data:null,_onChange:function(e){},_setValueAttr:function(e,c){if(this._dropDown&&(this._dropDown.set("value",e.replace("#",""),!0),this._currentValue=this._dropDown.get("value"),!1!==c&&this._onChange(this._currentValue),!c&&e!==this._currentValue))this.onChange()},set:function(e,c){if("value"===e&&this._dropDown)return this._setValueAttr(c)},get:function(e){return"value"===e&&this._dropDown?this._getValueAttr():
""},postCreate:function(){},startup:function(){var e=m.addWidget(p,{title:""},null,this.domNode,!0);this._dropDown=e;this._value=this._value||"";this._dropDown.set("value",this._value.replace("#",""),!0);var c=this;this._dropDown._on("change",function(a){c._value=c._getValueAttr();c.onChange(c._value)});this.add(e)},_setReadOnlyAttr:function(e){this._isReadOnly=e;this._dropDown.set("disabled",e)},onChange:function(){this._value=this._dropDown.get("value")},_getValueAttr:function(){return this._dropDown.get("value")}});
dojo.mixin(h,{divider:"---"});f.setObject("davinci.ve.widgets.ColorPicker",h);return h})},"davinci/ve/widgets/Background2":function(){define("dcl/dcl xdojo/declare xide/utils xide/widgets/TemplatedWidgetBase xide/data/TreeMemory xide/data/ObservableStore dstore/Trackable dojo/_base/lang davinci/ve/widgets/ColorPickerFlat davinci/lang/ve davinci/ve/widgets/ColorStore xide/form/Select davinci/ve/widgets/MutableStore davinci/ve/widgets/BackgroundDialog xide/views/_PanelDialog davinci/ve/utils/CssUtils dojo/Deferred davinci/ve/utils/URLRewrite davinci/model/Path".split(" "),
function(p,m,h,g,f,e,c,a,q,k,d,b,n,r,v,z,y,w,B){var u=0;p=p(g,{declaredClass:"davinci.ve.widgets.Background",templateString:"\x3cdiv \x3e\x3c/div\x3e",__id:0,data:null,get:function(a){if(this._comboBox)return this._comboBox.get("value")},startup:function(){this._textFieldId="davinci_ve_widgets_properties_border_generated"+u++;this._buttonId="davinci_ve_widgets_properties_border_generated"+u++;var a=dojo.create("div",{className:"bgPropButtonDiv",style:"float:right; width:28px;"});dojo.create("button",
{innerHTML:"...",id:this._buttonId,className:"bgPropButton btn-info",style:"font-size:1em;"},a);var g=38,p=this._colorswatch="true"==this.colorswatch;if(p){var g=56,C=dojo.doc.createElement("div");dojo.addClass(C,"colorPicker");this._selectedColor=dojo.doc.createElement("div");this._selectedColor.innerHTML="\x26nbsp;";dojo.addClass(this._selectedColor,"colorPickerSelected");dojo.addClass(this._selectedColor,"colorPickerSelectedSkinny");this._colorPickerFlat=new q({})}var g=dojo.create("div",{className:"bgPropComboDiv",
style:"margin-right:"+g+"px;padding:1px 0;"}),I=dojo.isArray(this.data)?this.data:[""],A=this.langObjVE=k;if(p){this._statics=["",davinci.ve.widgets.ColorPicker.divider,A.colorPicker,A.removeValue];this._run={};this.data?(this.data.push({value:davinci.ve.widgets.ColorPicker.divider}),this.data.push({value:langObj.removeValue,run:function(){this.set("value","")}})):(this.data=[{value:this._statics[0]}],this.data.push({value:this._statics[2],run:this._chooseColorValue}),this.data.push({value:this._statics[3],
run:function(){this.set("value","")}}),this.data.push({value:this._statics[1]}),this.data.push({value:"transparent"}),this.data.push({value:"black"}),this.data.push({value:"white"}),this.data.push({value:"red"}),this.data.push({value:"green"}),this.data.push({value:"blue"}));I=[];for(A=0;A<this.data.length;A++)I.push(this.data[A].value),this.data[A].run&&(this._run[this.data[A].value]=this.data[A].run);this._store=new d({values:I,noncolors:this._statics})}else this._store=new n({values:I});var H=
[];_.each(this.data,function(a){a&&(_.isString(a)&&a.length?H.push({label:a,value:a,run:a.run}):!_.isObject(a)||_.isString(a.value)&&!a.value.length||H.push({label:a.label||a.value,value:a.value,run:a.run}))});this._comboBox=new b({EDITABLE_CLASS:b.TYPEAHEAD,storeClass:m("driverStore",[f,c,e],{setValues:function(a){var b=[],d=0;a&&(this._values=a);dojo.forEach(this.data,dojo.hitch(this,function(a){b.push({label:a.label,value:a.value,id:d++})}));this._jsonData={identifier:"id",items:b};this.setData(b);
this.root._emit("update",{target:null})},modifyItem:function(a,b){for(var d=0;d<this.data.length;d++)this.data[d].value===a&&(this.data[d].value=b);N._dropDown.set("value",b);this.setValues()},insert:function(a,b){this.data.splice(a,0,{value:b,label:b});this.setValues()},contains:function(a){for(var b=0;b<this.data.length;b++)if(this.data[b].value==a)return!0;return!1},findSimilar:function(a){if(a=(new RegExp(/(\D*)(-?)(\d+)(\D*)/)).exec(a)){a=new RegExp((0<a.length?a[1]:"")+"(-?)(\\d+)"+(3<a.length?
a[4]:""));for(var b=0;b<this.data.length;b++)if(a.test(this.data[b].value))return this.data[b].value}},getItemNumber:function(a){return this.data[a]},clearValues:function(){this._loadFinished=!1}}),required:!1,title:"",editable:!0,options:H,userData:{},id:this._textFieldId});this._comboBox.startup();g.appendChild(this._comboBox.domNode);this.domNode.appendChild(a);p&&(this.domNode.appendChild(C),dojo.connect(C,"onclick",dojo.hitch(this,function(a){dojo.stopEvent(a);this._chooseColorValue()})),C.appendChild(this._selectedColor),
this._colorPickerFlat_comboBoxUpdateDueTo="colorSwatch");this.domNode.appendChild(g);"string"==typeof this.propname&&this._comboBox&&(davinci.ve._BackgroundWidgets||(davinci.ve._BackgroundWidgets={}),davinci.ve._BackgroundWidgets[this.propname]={propPaletteWidget:this,comboBox:this._comboBox});this._button=dojo.byId(this._buttonId);dojo.connect(this._button,"onclick",this,function(){var a=this._cascade&&this._cascade._widget&&this._cascade._widget.getContext?this._cascade._widget.getContext():null,
b=new r({context:a}),d=dojo.hitch(this,function(b){a||(console.error("Background.js. no context"),a={});var d=a.cascadeBatch={},c=d.propList=[],e=d.actions={},f=d.deferreds={};d.askUserResponse=void 0;if(!b.cancel){var g=davinci.ve._BackgroundWidgets,h;for(h in g){var k=g[h];if(k.bgdWidget){var d=k.bgdWidget.get("value"),q=k.propPaletteWidget.get("value");d!==q&&(c.push(h),e[h]=dojo.hitch(this,function(a,b){a.propPaletteWidget._comboBoxUpdateDueTo="backgroundDialog";a.propPaletteWidget.set("value",
b)},k,d),f[h]=new y)}}h="background-image";k=g[h];b=z.buildBackgroundImage(b.bgddata);for(d=0;d<b.length;d++)q=b[d],w.containsUrl(q)&&!w.isAbsolute(q)&&((g=w.getUrl(q))&&(q="url('"+(new B(g)).toString()+"')"),b[d]=q);d=0==b.length?"":b[b.length-1];q=k.propPaletteWidget.get("value");d!==q&&(k.propPaletteWidget._cascade&&(k.propPaletteWidget._cascade._valueArrayNew=b),c.push(h),e[h]=dojo.hitch(this,function(a,b){k.propPaletteWidget._comboBoxUpdateDueTo="backgroundDialog";k.propPaletteWidget.set("value",
b)},k,d),f[h]=new y);for(d=0;d<c.length;d++)h=c[d],f[h].then(dojo.hitch(this,function(b){(b=c[b+1])?e[b].apply():delete a.cascadeBatch},d));0<c.length&&(h=c[0],e[h].apply())}return!0},b),c=davinci.ve._BackgroundWidgets,e;for(e in c){var f=c[e].propPaletteWidget._cascade;f&&(f._valueArrayNew=f._valueArray)}b.set("baseLocation",this._baseLocation);(new v({onOk:function(){d()},onShow:function(a,d,c){h.addChild(d,b,!0);this.add(b,null,!1);this.startDfd.resolve();return[b]}})).show()});var N=this;this._comboBox._on("change",
function(a){N._onChange(a)});this.add(this._comboBox);this._maqStartupComplete=!0},_setBaseLocationAttr:function(a){this._baseLocation=a},_setValueAttr:function(a){var b=this._comboBox.get("value");this._colorswatch&&dojo.style(this._selectedColor,"backgroundColor",a);a=dojo.isArray(a)?0<a.length?a[a.length-1]:"":a;b!==a&&("backgroundDialog"!==this._comboBoxUpdateDueTo&&"colorSwatch"!==this._comboBoxUpdateDueTo&&(this._comboBoxUpdateDueTo="setAttr"),this._comboBox.set("value",a))},_onChange:function(a){this._colorswatch&&
"string"==typeof a&&(a in this._run?dojo.hitch(this,this._run[a])():a==davinci.ve.widgets.ColorPicker.divider?this._comboBox.set("value",this._store.getItemNumber(0)):dojo.style(this._selectedColor,"backgroundColor",a));this.value=this._comboBox.get("value");this.onChange(a)},onChange:function(a){},_getValueAttr:function(){return this._comboBox.get("value")},_setReadOnlyAttr:function(a){this._maqStartupComplete&&(this._isReadOnly=a,this._comboBox.set("disabled",a),this._button.disabled=a)},isLeftToRight:function(){return!0},
_chooseColorValue:function(){if(!this._isReadOnly){var a=this._comboBox.get("value");davinci.ve.widgets.ColorPickerFlat.show(this._colorPickerFlat,a,this,!0)}}});a.setObject("davinci.ve.widgets.Background",p);return p})},"davinci/ve/widgets/ColorPickerFlat":function(){define("dojo/_base/declare dijit/_Widget dijit/TooltipDialog dijit/form/Button dojox/widget/ColorPicker davinci/lang/ve dijit/lang/_common".split(" "),function(p,m,h,g,f,e,c){p=p("davinci.ve.widgets.ColorPickerFlat",[m],{numberDelta:1,
insertPosition:1,data:null,postCreate:function(){this.inherited(arguments);var a=dojo.doc.createElement("div");this._colorPicker=new f({});a.appendChild(this._colorPicker.domNode);var e=dojo.doc.createElement("div"),h=g({label:c.buttonOk});h.innerHtml="OK";e.appendChild(h.domNode);var d=g({label:c.buttonCancel});e.appendChild(d.domNode);a.appendChild(e);this.domNode.appendChild(a);dojo.connect(h,"onClick",this,"_onOk");dojo.connect(d,"onClick",this,"onCancel");delete this.canceled},onClose:function(){},
onCancel:function(){this._value=null;this.canceled=!0},_onOk:function(){delete this.canceled;this._value=this._colorPicker.get("value");this.onClose()},_getValueAttr:function(){return this._value},_setValueAttr:function(a){a=new dojo.Color(a);this._colorPicker.setColor(a.toHex())}});return dojo.mixin(p,{show:function(a,c,f,d){var b=new h({id:"maqetta_prop_tooltip_color_picker",title:e.selectColor,content:a});dijit.popup.moveOffScreen(b.domNode);var g=!1,k=function(a){return function(){g&&(g=!1,dijit.popup.close(b))}}();
b.connect(a,"onCancel",k);b.connect(a,"onClose",k);var q=dijit.byNode(dojo.query("[widgetId]",b.domNode)[0]);c in dojo.Color.named?(c=dojo.colorFromString(c),a.set("value",c.toHex())):a.set("value",c||"",!0);(function(a){return function(){dijit.popup.open({parent:f,popup:b,around:f.domNode,orient:d?{BL:"TL",BR:"TR",TL:"BL",TR:"BR"}:{BR:"TR",BL:"TL",TR:"BR",TL:"BL"},onClose:function(){q.canceled||(f._colorPickerFlat_comboBoxUpdateDueTo&&(f._comboBoxUpdateDueTo=f._colorPickerFlat_comboBoxUpdateDueTo),
f.get("value"),f.set("value",q.get("value")));k();b.destroy()}});g=!0;dijit.focus(b.containerNode)}})()()}})})},"davinci/ve/widgets/ColorStore":function(){define(["dojo/_base/declare","dojo/data/ItemFileReadStore","davinci/lang/ve","dijit/lang/_common"],function(p,m){return p("davinci.ve.widgets.ColorStore",m,{constructor:function(h){this.clearValues();h.noncolors&&(this.noncolors=h.noncolors);h.values&&this.setValues(h.values)},setValues:function(h){var g=[];h&&(this._values=h);dojo.forEach(this._values,
dojo.hitch(this,function(f){for(var e=!1,c=0;!e&&c<this.noncolors.length;c++)this.noncolors[c]==f&&(e=!0);e?g.push({name:f,value:f,label:f}):g.push({value:f,name:f,label:"\x3ctable\x3e\x3ctr\x3e\x3ctd style\x3d'width:10em'\x3e"+f+"\x3c/td\x3e\x3ctd style\x3d'width:10px;height:10px;background-color:"+f+"'\x3e\x3c/td\x3e\x3c/tr\x3e\x3c/table\x3e"})}));this._jsonData={identifier:"value",items:g};this._loadFinished=!1},insert:function(h,g){this._values.splice(h,0,g);this.setValues()},contains:function(h){for(var g=
0;g<this._values.length;g++)if(this._values[g]==h)return!0;return!1},getItemNumber:function(h){return this._values[h]},clearValues:function(){this._loadFinished=!1}})})},"davinci/ve/widgets/MutableStore":function(){define(["dojo/_base/declare","dojo/data/ItemFileReadStore","davinci/lang/ve","dijit/lang/_common"],function(p,m,h,g){return p("davinci.ve.widgets.MutableStore",m,{constructor:function(f){this.clearValues();f.divider&&(this.divider=f.divider);f.values&&this.setValues(f.values)},setValues:function(f){var e=
[],c=0;f&&(this._values=f);dojo.forEach(this._values,dojo.hitch(this,function(a){e.push({name:a,value:a,id:c++})}));this._jsonData={identifier:"id",items:e};this._loadFinished=!1},modifyItem:function(f,e){for(var c=0;c<this._values.length;c++)this._values[c]==f&&(this._values[c]=e);this.setValues()},insert:function(f,e){this._values.splice(f,0,e);this.setValues()},contains:function(f){for(var e=0;e<this._values.length;e++)if(this._values[e]==f)return!0;return!1},findSimilar:function(f){if(f=(new RegExp(/(\D*)(-?)(\d+)(\D*)/)).exec(f)){f=
new RegExp((0<f.length?f[1]:"")+"(-?)(\\d+)"+(3<f.length?f[4]:""));for(var e=0;e<this._values.length;e++)if(f.test(this._values[e]))return this._values[e]}},getItemNumber:function(f){return this._values[f]},clearValues:function(){this._loadFinished=!1}})})},"davinci/ve/widgets/BackgroundDialog":function(){define("dojo/_base/declare dijit/_WidgetBase dijit/_TemplatedMixin dijit/_WidgetsInTemplateMixin davinci/ve/widgets/MutableStore davinci/ve/widgets/ColorStore xide/utils dojo/text!./templates/BackgroundDialog.html davinci/ve/utils/CssUtils davinci/lang/ve dijit/lang/_common davinci/ve/utils/URLRewrite dojo/parser dojo/_base/lang davinci/model/Path dijit/form/Button davinci/ve/widgets/ColorPicker davinci/ve/widgets/ColorPickerFlat dijit/form/Textarea davinci/ui/widgets/FileFieldDialog".split(" "),
function(p,m,h,g,f,e,c,a,q,k,d,b,n,r){n._clearCache();var v=function(a,b){return"url('"+b+"')"};p=p("davinci.ve.widgets.BackgroundDialog",[m,h,g],{templateString:a,widgetsInTemplate:!0,_filePicker:null,context:null,veNLS:k,stopRowTemplate:"\x3ctr class\x3d'bgdGradOptRow bgdStopRow' style\x3d'display:none;'\x3e\x3ctd class\x3d'bgdCol1'\x3e\x3c/td\x3e\x3ctd class\x3d'bgdOptsLabel bdgStopLabel'\x3e"+k.bgdTemplate+"\x3c/td\x3e\x3ctd class\x3d'bgdStopColorTD'\x3e\x3cselect class\x3d'bgdColor' dojoType\x3d'dijit.form.ComboBox'\x3e\x3c/select\x3e\x3c/td\x3e\x3ctd\x3e\x3cselect class\x3d'bgdPosition' dojoType\x3d'dijit.form.ComboBox'\x3e\x3c/select\x3e\x3c/td\x3e\x3ctd class\x3d'bgdPlusMinusButtons'\x3e\x3cspan class\x3d'bgdPlusButton' dojoType\x3d'dijit.form.Button'\x3e+\x3c/span\x3e\x3cspan class\x3d'bgdMinusButton' dojoType\x3d'dijit.form.Button'\x3e-\x3c/span\x3e\x3c/td\x3e\x3c/tr\x3e",
postMixInProperties:function(){this.inherited(arguments);dojo.mixin(this,d)},postCreate:function(){this.inherited(arguments);var a=this.langObj=k;this.stoppos_store=new f({values:"0% 100% 10% 20% 30% 40% 50% 60% 70% 80% 90%".split(" ")});var b=davinci.ve._BackgroundWidgets;this._statics=["",davinci.ve.widgets.ColorPicker.divider,a.colorPicker,a.removeValue];var d=[{value:this._statics[0]}];d.push({value:this._statics[2],action:"_colorpicker"});d.push({value:this._statics[3],action:"_removevalue"});
d.push({value:this._statics[1],action:"_donothing"});d.push({value:"transparent"});d.push({value:"black"});d.push({value:"white"});d.push({value:"red"});d.push({value:"green"});d.push({value:"blue"});var c=[];this._bgcolor_action={};var g=[];this._stops_action={};for(var h=0;h<d.length;h++)c.push(d[h].value),d[h].action&&(this._bgcolor_action[d[h].value]=d[h].action),""!=d[h].value&&"_removevalue"!=d[h].action&&(g.push(d[h].value),d[h].action&&(this._stops_action[d[h].value]=d[h].action));this._bgcolor_store=
new e({values:c,noncolors:this._statics});this._stops_store=new e({values:g,noncolors:this._statics});var d=b["background-image"].comboBox.get("value"),n,r;"string"==typeof d&&0<d.length?(n=q.parseBackgroundImage(d),r=n.type):n={};this.bgddata=n;this.bgdOtherTA.set("value",d);var m=[];"emptystring url linear radial none other".split(" ").forEach(function(b){m.push({value:b,label:a["bgdType_"+b]})});this.bgdTypeSelect.addOption(m);this._updateBackgroundImageType(r);this.connect(this.bgdTypeSelect,
"onChange",dojo.hitch(this,function(){var a=this.bgdTypeSelect.get("value");this._updateBackgroundImageType(a);this._onFieldChanged()}));d=b["background-color"].comboBox.get("value");r=this.bgdColorCB;r.set("store",this._bgcolor_store);r.set("value",d);n.backgroundColor=d;this.connect(this.bgdColorCB,"onChange",dojo.hitch(this,function(a){this._onChangeColor(a,this.bgdColorCB,this._bgcolor_action)}));b["background-color"].bgdWidget=this.bgdColorCB;r=b["background-repeat"].comboBox;d=r.get("value");
c=this.bgdRepeatCB;c.set("store",r.store);c.set("regExp","repeat|repeat-x|repeat-y|no-repeat");c.set("value",d);n.backgroundRepeat=d;this.connect(this.bgdRepeatCB,"onChange",dojo.hitch(this,function(){n.backgroundRepeat=this.bgdRepeatCB.get("value");this._onFieldChanged()}));b["background-repeat"].bgdWidget=this.bgdRepeatCB;r=b["background-position"].comboBox;d=r.get("value");c=this.bgdPositionCB;c.set("store",r.store);c.set("regExp","auto|contain|cover|"+q.regstr_posn);c.set("value",d);n.backgroundPosition=
d;this.connect(this.bgdPositionCB,"onChange",dojo.hitch(this,function(){n.backgroundPosition=this.bgdPositionCB.get("value");this._onFieldChanged()}));b["background-position"].bgdWidget=this.bgdPositionCB;r=b["background-size"].comboBox;d=r.get("value");c=this.bgdSizeCB;c.set("store",r.store);c.set("regExp","auto|contain|cover|"+q.regstr_len_or_pct);c.set("value",d);n.backgroundSize=d;this.connect(this.bgdSizeCB,"onChange",dojo.hitch(this,function(){n.backgroundSize=this.bgdSizeCB.get("value");this._onFieldChanged()}));
b["background-size"].bgdWidget=this.bgdSizeCB;r=b["background-origin"].comboBox;d=r.get("value");c=this.bgdOriginCB;c.set("store",r.store);c.set("regExp","border-box|padding-box|content-box");c.set("value",d);n.backgroundOrigin=d;this.connect(this.bgdOriginCB,"onChange",dojo.hitch(this,function(){n.backgroundOrigin=this.bgdOriginCB.get("value");this._onFieldChanged()}));b["background-origin"].bgdWidget=this.bgdOriginCB;r=b["background-clip"].comboBox;d=r.get("value");c=this.bgdClipCB;c.set("store",
r.store);c.set("regExp","border-box|padding-box|content-box");c.set("value",d);n.backgroundClip=d;this.connect(this.bgdClipCB,"onChange",dojo.hitch(this,function(){n.backgroundClip=this.bgdClipCB.get("value");this._onFieldChanged()}));b["background-clip"].bgdWidget=this.bgdClipCB;b=new f({values:"to bottom;to top;to right;to left;45deg;-45deg".split(";")});this.bgdLinearAngleCB.set("store",b);this.bgdLinearAngleCB.set("regExp",q.regstr_angle);this.bgdLinearAngleCB.set("value",n&&n.angle?n.angle:"to bottom");
this.connect(this.bgdLinearAngleCB,"onChange",dojo.hitch(this,function(){n.angle=this.bgdLinearAngleCB.get("value");this._onFieldChanged()}));b=new f({values:"center;left top;center center;right bottom;0% 0%;0px 0px".split(";")});this.bgdRadialPosCB.set("store",b);this.bgdRadialPosCB.set("regExp",q.regstr_posn);this.bgdRadialPosCB.set("value",n&&n.posn?n.posn:"center");this.connect(this.bgdRadialPosCB,"onChange",dojo.hitch(this,function(){n.posn=this.bgdRadialPosCB.get("value");this._onFieldChanged()}));
b=new f({values:["circle","ellipse"]});this.bgdRadialShapeCB.set("store",b);this.bgdRadialShapeCB.set("regExp",q.regstr_shape);this.bgdRadialShapeCB.set("value",n&&n.shape?n.shape:"circle");this.connect(this.bgdRadialShapeCB,"onChange",dojo.hitch(this,function(){n.shape=this.bgdRadialShapeCB.get("value");this._onFieldChanged()}));b=new f({values:["farthest-corner","farthest-side","closest-corner","closest-side"]});this.bgdRadialExtentCB.set("store",b);this.bgdRadialExtentCB.set("regExp",q.regstr_extent);
this.bgdRadialExtentCB.set("value",n&&n.extent?n.extent:"farthest-corner");this.connect(this.bgdRadialExtentCB,"onChange",dojo.hitch(this,function(){n.extent=this.bgdRadialExtentCB.get("value");this._onFieldChanged()}));this._initializeStops(n&&n.stops&&2<=n.stops.length?n.stops:[{color:"white",pos:"0%"},{color:"black",pos:"100%"}])},startup:function(){this.inherited(arguments);var a=this.bgddata&&this.bgddata.url?this.bgddata.url:"";this._filePicker.set("value",a);this._filePicker.owner=this;this.bgddata.url=
a;this.connect(this._filePicker,"onChange",dojo.hitch(this,function(){var a=this._filePicker.get("value");this.bgddata.url=a;this._onFieldChanged()}))},_updateBackgroundImageType:function(a){var b=this.domNode;if(!a||"none"!=a&&"url"!=a&&"linear"!=a&&"radial"!=a&&"other"!=a)a="emptystring";this.bgddata.type=a;this.bgdTypeSelect.set("value",a);var d=dojo.query(".bgdOptionsLabelRow",b),c=dojo.query(".bgdImageOptRow",b),e=dojo.query(".bgdGradOptRow",b),f=dojo.query(".bgdLinearOptRow",b),g=dojo.query(".bgdRadialOptRow",
b),b=dojo.query(".bgdOtherRow",b);"url"==a?(c.concat(d).forEach(function(a){dojo.removeClass(a,"dijitHidden")}),e.concat(b).forEach(function(a){dojo.addClass(a,"dijitHidden")})):"linear"==a?(e.concat(d).forEach(function(a){dojo.removeClass(a,"dijitHidden")}),c.concat(g).concat(b).forEach(function(a){dojo.addClass(a,"dijitHidden")})):"radial"==a?(e.concat(d).forEach(function(a){dojo.removeClass(a,"dijitHidden")}),c.concat(f).concat(b).forEach(function(a){dojo.addClass(a,"dijitHidden")})):"other"==
a?(b.forEach(function(a){dojo.removeClass(a,"dijitHidden")}),c.concat(e).concat(d).forEach(function(a){dojo.addClass(a,"dijitHidden")})):c.concat(e).concat(d).concat(b).forEach(function(a){dojo.addClass(a,"dijitHidden")})},_initializeStops:function(a){var b=this.langObj;a||(a=this.bgddata.stops);for(var d=this.bgdTypeSelect.get("value"),c=dojo.query(".bgdStopRow",this.domNode),e=c.length-1;0<e;e--){var f=c[e],g=dojo.query(".bgdColor",f),g=dijit.byNode(g[0]);g.destroyRecursive();g=dojo.query(".bgdPosition",
f);g=dijit.byNode(g[0]);g.destroyRecursive();dojo.destroy(f)}e=c[0];c=e.parentNode;f=e.nextSibling;for(e=0;e<a.length;e++){var h=a[e],k=dojo.create("tr",{className:"bgdGradOptRow bgdStopRow"});k.innerHTML=this.stopRowTemplate;"linear"!=d&&"radial"!=d&&dojo.addClass(k,"dijitHidden");c.insertBefore(k,f);dojo.parser.parse(k);dojo.query(".bdgStopLabel",k)[0].innerHTML=this.langObj.bgdStop+" #"+(e+1)+":";g=dojo.query(".bgdColor",k);g=dijit.byNode(g[0]);g.set("store",this._stops_store);g.set("regExp",q.regstr_stop_color);
g.set("value",h.color);this.connect(g,"onChange",dojo.hitch(this,function(a,b){this._onChangeColor(b,a,this._stops_action)},g));g=dojo.query(".bgdPosition",k);g=dijit.byNode(g[0]);g.set("store",this.stoppos_store);h="string"==typeof h.pos&&0<h.pos.length?h.pos:0==e?"0%":"100%";g.set("regExp",q.regstr_stop_pos);g.set("value",h);this.connect(g,"onChange",dojo.hitch(this,function(){this._updateDataStructureStops();this._onFieldChanged()}));g=dojo.query(".bgdPlusButton",k)[0];g=dijit.byNode(g);g.set("title",
b.bgdAddStop);this.connect(g,"onClick",dojo.hitch(this,function(a){var b=this.bgddata.stops[a];this.bgddata.stops.splice(a+1,0,{color:b.color,pos:b.pos});this._initializeStops()},e));h=dojo.query(".bgdMinusButton",k)[0];h=dijit.byNode(h);h.set("title",b.bgdRemoveStop);this.connect(h,"onClick",dojo.hitch(this,function(a){this.bgddata.stops.splice(a,1);this._initializeStops()},e));k=dojo.query(".bgdMinusButton",this.domNode);for(g=0;g<k.length;g++)h=k[g],h=dijit.byNode(h),2>=a.length?h.set("disabled",
!0):h.set("disabled",!1)}this._updateDataStructureStops()},_onFieldChanged:function(){this._updateDialogValidity();this._updateBackgroundPreview()},_setBaseLocationAttr:function(a){this._baseLocation=a;this._filePicker.set("baseLocation",a)},_updateDialogValidity:function(){var a=this.bgddata;if(a&&a.type){var b=this.domNode,a=a.type,d=[],c=!0;"url"==a?d=dojo.query(".bgdImageOptRow",b):"linear"==a?d=dojo.query(".bgdStopRow",b).concat(dojo.query(".bgdLinearOptRow",b)):"radial"==a&&(d=dojo.query(".bgdStopRow",
b).concat(dojo.query(".bgdRadialOptRow",b)));d.forEach(function(a){dojo.query("[widgetid]",a).forEach(function(a){"function"!=typeof a.isValid||a.isValid()||(c=!1)})});this.bdgValid=c}},_updateBackgroundPreview:function(){function a(a,b){b=f[b];"string"==typeof b&&0<b.length&&(e+=";"+a+":"+b)}var d=dojo.query(".bgdPreview",this.domNode)[0],e="",f=this.bgddata;a("background-color","backgroundColor");a("background-repeat","backgroundRepeat");a("background-position","backgroundPosition");a("background-size",
"backgroundSize");a("background-origin","backgroundOrigin");a("background-clip","backgroundClip");for(var g=q.buildBackgroundImage(this.bgddata),h=0;h<g.length;h++){var k=g[h];if(b.containsUrl(k)&&!b.isAbsolute(k)&&this.context){var n=b.getUrl(k),n=c.parse_url(n);(n=this.context.ctx.getFileManager().getImageUrl({path:n.host+(n.path||""),mount:n.scheme},!1))&&(k=v(this._baseLocation,n))}e+=";background-image:"+k}d.setAttribute("style",e);this.bgdOtherTA.set("value",g[g.length-1])},_updateDataStructureStops:function(){var a=
this.bgddata;a.stops=[];for(var b=dojo.query(".bgdStopRow",this.domNode),d=1;d<b.length;d++){var c=b[d],e=dojo.query(".bgdColor",c),e=dijit.byNode(e[0]),c=dojo.query(".bgdPosition",c),c=dijit.byNode(c[0]);a.stops.push({color:e.get("value"),pos:c.get("value")})}},_setValueAttr:function(a){a&&this._colorPickerTargetWidget.set("value",a)},_onChangeColor:function(a,b,d){if(a=d[a])if("_removevalue"==a?b.set("value",""):b.set("value",b._currentcolorvalue),"_colorpicker"==a){a=new davinci.ve.widgets.ColorPickerFlat({});
d=b.get("value");var c=this.isLeftToRight();this._colorPickerTargetWidget=b;davinci.ve.widgets.ColorPickerFlat.show(a,d,this,c)}b._currentcolorvalue=b.get("value");this.bgddata.backgroundColor=this.bgdColorCB.get("value");this._updateDataStructureStops();this._onFieldChanged()},okButton:function(){},cancelButton:function(){this.onClose()}});p.getCSSForWorkspaceURL=v;r.setObject("davinci.ve.widgets.BackgroundDialog",p);return p})},"davinci/ve/utils/CssUtils":function(){define(["dojo/_base/Color","davinci/ve/utils/URLRewrite"],
function(p,m){var h=[],g;for(g in p.named)"transparent"!=g&&h.push(g);h.sort(function(a,b){return 0==b.indexOf(a)?1:0==a.indexOf(b)?-1:a<b?-1:1});var f=[];h.forEach(function(a){f.push(a);a=p.named[a];a="#"+(16777216+(a[0]<<16)+(a[1]<<8)+a[2]).toString(16).slice(1);f.push(a)});var e=/^\-?(?:\d*\.\d+|\d+)$/,h="(?:";for(g=0;g<f.length;g+=2)0!=g&&(h+="|"),h+=f[g];h="(?:"+(h+")")+"|\\#(?:[0-9A-Fa-f]{6}|[0-9A-Fa-f]{3})|(?:rgb|hsl)\\s*\\(\\s*(?:(?:\\d*\\.\\d+|\\d+)%?)\\s*,\\s*(?:(?:\\d*\\.\\d+|\\d+)%?)\\s*,\\s*(?:(?:\\d*\\.\\d+|\\d+)%?)\\s*\\)|(?:rgba|hsla)\\s*\\(\\s*(?:(?:\\d*\\.\\d+|\\d+)%?)\\s*,\\s*(?:(?:\\d*\\.\\d+|\\d+)%?)\\s*,\\s*(?:(?:\\d*\\.\\d+|\\d+)%?)\\s*,\\s*(?:\\d*\\.\\d+|\\d+)\\s*\\))";
g="(?:"+h+"(?:\\s+(?:\\-?(?:\\d*\\.\\d+|\\d+)(?:in|cm|mm|pt|pc|px|%)|0))?)";var c=new RegExp("(?:\\s*("+h+")\\s*((?:\\-?(?:\\d*\\.\\d+|\\d+)(?:in|cm|mm|pt|pc|px|%)|0))?\\s*,?(.*))");g="("+g+"(?:\\s*,\\s*"+g+")*)";var a=/^\s*(url)\s*\(\s*(?:\'([^\']*)\'*|\"([^\"]*)\"|([^\'\"]*))\s*\)\s*$/,q=new RegExp("^\\s*((?:-moz-linear-gradient|-webkit-linear-gradient|-ms-linear-gradient|-o-linear-gradient|linear-gradient))\\s*\\(\\s*(?:(?:to\\s+((?:\\s*left\\s*|\\s*right\\s*|\\s*top\\s*|\\s*bottom\\s*){1,2})|((?:\\s*left\\s*|\\s*right\\s*|\\s*top\\s*|\\s*bottom\\s*){1,2})|((?:\\-?(?:\\d*\\.\\d+|\\d+)deg)))\\s*,\\s*)?\\s*"+
g+"\\s*\\)\\s*$"),k=new RegExp("^\\s*((?:-moz-radial-gradient|-webkit-radial-gradient|-ms-radial-gradient|-o-radial-gradient|radial-gradient))\\s*\\(\\s*(?:\\s*(?:\\s*(\\s*(?:(?:\\-?(?:\\d*\\.\\d+|\\d+)(?:in|cm|mm|pt|pc|px|%)|0)|(?:left|center|right|top|bottom))(?:\\s*(?:(?:\\-?(?:\\d*\\.\\d+|\\d+)(?:in|cm|mm|pt|pc|px|%)|0)|(?:left|center|right|top|bottom)))?)\\s*((?:\\-?(?:\\d*\\.\\d+|\\d+)deg))\\s*|\\s*(\\s*(?:(?:\\-?(?:\\d*\\.\\d+|\\d+)(?:in|cm|mm|pt|pc|px|%)|0)|(?:left|center|right|top|bottom))(?:\\s*(?:(?:\\-?(?:\\d*\\.\\d+|\\d+)(?:in|cm|mm|pt|pc|px|%)|0)|(?:left|center|right|top|bottom)))?)\\s*|\\s*((?:\\-?(?:\\d*\\.\\d+|\\d+)deg))\\s*)\\s*,\\s*)?\\s*(?:\\s*(?:\\s*(circle|ellipse)\\s*((?:(?:closest-side|farthest-side|closest-corner|farthest-corner|contain|cover)|(?:(?:\\-?(?:\\d*\\.\\d+|\\d+)(?:in|cm|mm|pt|pc|px|%)|0)(?:\\s+(?:\\-?(?:\\d*\\.\\d+|\\d+)(?:in|cm|mm|pt|pc|px|%)|0)\\s*)?)))\\s*|\\s*((?:(?:closest-side|farthest-side|closest-corner|farthest-corner|contain|cover)|(?:(?:\\-?(?:\\d*\\.\\d+|\\d+)(?:in|cm|mm|pt|pc|px|%)|0)(?:\\s+(?:\\-?(?:\\d*\\.\\d+|\\d+)(?:in|cm|mm|pt|pc|px|%)|0)\\s*)?)))\\s*(circle|ellipse)\\s*|\\s*(circle|ellipse)\\s*|\\s*((?:(?:closest-side|farthest-side|closest-corner|farthest-corner|contain|cover)|(?:(?:\\-?(?:\\d*\\.\\d+|\\d+)(?:in|cm|mm|pt|pc|px|%)|0)(?:\\s+(?:\\-?(?:\\d*\\.\\d+|\\d+)(?:in|cm|mm|pt|pc|px|%)|0)\\s*)?)))\\s*)\\s*,\\s*)?\\s*"+
g+"\\s*\\)\\s*$"),d=/(?:\s*((?:top|bottom|left|right|center|(?:\-?(?:\d*\.\d+|\d+)%?)))\s+((?:top|bottom|left|right|center|(?:\-?(?:\d*\.\d+|\d+)%?)))\s*)/;g="("+("(?:\\s*,\\s*"+("(?:"+("(?:color-stop\\s*\\(\\s*(?:\\-?(?:\\d*\\.\\d+|\\d+)%?)\\s*,\\s*"+h+"\\s*\\)\\s*)")+"|"+("(?:from\\s*\\(\\s*"+h+"\\s*\\)\\s*)")+"|"+("(?:to\\s*\\(\\s*"+h+"\\s*\\)\\s*)")+")")+"\\s*)")+"+)";var b=new RegExp("(?:\\s*,\\s*"+("(?:"+("(?:(color-stop)\\s*\\(\\s*((?:\\-?(?:\\d*\\.\\d+|\\d+)%?))\\s*,\\s*("+h+")\\s*\\)\\s*)")+
"|"+("(?:(from)\\s*\\(\\s*("+h+")\\s*\\)\\s*)")+"|"+("(?:(to)\\s*\\(\\s*("+h+")\\s*\\)\\s*)")+")")+"\\s*)(.*)"),n=new RegExp("(?:\\s*(-webkit-gradient)\\s*\\(\\s*(linear)\\s*(?:\\s*,\\s*((?:\\s*(?:top|bottom|left|right|center|(?:\\-?(?:\\d*\\.\\d+|\\d+)%?))\\s+(?:top|bottom|left|right|center|(?:\\-?(?:\\d*\\.\\d+|\\d+)%?))\\s*))\\s*)(?:\\s*,\\s*((?:\\s*(?:top|bottom|left|right|center|(?:\\-?(?:\\d*\\.\\d+|\\d+)%?))\\s+(?:top|bottom|left|right|center|(?:\\-?(?:\\d*\\.\\d+|\\d+)%?))\\s*))\\s*)"+g+"\\s*\\)\\s*)"),
r=new RegExp("(?:\\s*(-webkit-gradient)\\s*\\(\\s*(radial)\\s*(?:(?:\\s*,\\s*((?:\\s*(?:top|bottom|left|right|center|(?:\\-?(?:\\d*\\.\\d+|\\d+)%?))\\s+(?:top|bottom|left|right|center|(?:\\-?(?:\\d*\\.\\d+|\\d+)%?))\\s*))\\s*)(?:\\s*,\\s*((?:\\d*\\.\\d+|\\d+))\\s*)(?:\\s*,\\s*((?:\\s*(?:top|bottom|left|right|center|(?:\\-?(?:\\d*\\.\\d+|\\d+)%?))\\s+(?:top|bottom|left|right|center|(?:\\-?(?:\\d*\\.\\d+|\\d+)%?))\\s*))\\s*)(?:\\s*,\\s*((?:\\d*\\.\\d+|\\d+))\\s*)?)"+g+"\\s*\\)\\s*)"),v=function(a){var b=
[];do{var d=a.match(c);d&&(b.push({color:d[1],pos:d[2]}),a=d[3])}while(d);return b},z=function(a){var d=[],c=[],f,g;do{var h=a.match(b);h&&(h[4]?f={color:h[5]}:h[6]?g={color:h[7]}:(a=h[2].match(e)?100*h[2]+"%":h[2],c.push({color:h[3],pos:a})),a=h[8])}while(h);f&&d.push(f);for(f=0;f<c.length;f++)d.push(c[f]);g&&d.push(g);return d};return{regstr_posn:"^\\s*\\s*(?:(?:\\-?(?:\\d*\\.\\d+|\\d+)(?:in|cm|mm|pt|pc|px|%)|0)|(?:left|center|right|top|bottom))(?:\\s*(?:(?:\\-?(?:\\d*\\.\\d+|\\d+)(?:in|cm|mm|pt|pc|px|%)|0)|(?:left|center|right|top|bottom)))?\\s*$",
regstr_len_or_pct:"^\\s*(?:\\-?(?:\\d*\\.\\d+|\\d+)(?:in|cm|mm|pt|pc|px|%)|0)\\s*$",regstr_angle:"^\\s*(?:to\\s+((?:\\s*left\\s*|\\s*right\\s*|\\s*top\\s*|\\s*bottom\\s*){1,2})|((?:\\-?(?:\\d*\\.\\d+|\\d+)deg)))\\s*$",regstr_shape:"^\\s*circle|ellipse\\s*$",regstr_extent:"^\\s*(?:(?:closest-side|farthest-side|closest-corner|farthest-corner|contain|cover)|(?:(?:\\-?(?:\\d*\\.\\d+|\\d+)(?:in|cm|mm|pt|pc|px|%)|0)(?:\\s+(?:\\-?(?:\\d*\\.\\d+|\\d+)(?:in|cm|mm|pt|pc|px|%)|0)\\s*)?))\\s*$",regstr_stop_color:"\\s*"+
h+"\\s*",regstr_stop_pos:"\\s*(?:\\-?(?:\\d*\\.\\d+|\\d+)(?:in|cm|mm|pt|pc|px|%)|0)\\s*",parseBackgroundImage:function(b){var c={},e=b.match(/^\s*$/);if(e)c.type="emptystring";else if(e=b.match(/^\s*none\s*$/))c.type="none";else if(e=b.match(a))c.type="url",c.func=e[1],c.url=e[2]?e[2]:e[3]?e[3]:e[4];else if(e=b.match(n)){c.type="linear";c.func=e[1];c.webkitGradType=e[2];c.webKitPosn1=e[3];c.webKitPosn2=e[4];var f=c.webKitPosn1,g=c.webKitPosn2;b=0<=f.indexOf("left");var h=0<=f.indexOf("top"),m=0<=
f.indexOf("right"),f=0<=f.indexOf("bottom"),y=0<=g.indexOf("left"),p=0<=g.indexOf("top"),A=0<=g.indexOf("right"),g=0<=g.indexOf("bottom");h&&g&&(b&&y||m&&A)?c.angle="to bottom":f&&p&&(b&&y||m&&A)?c.angle="to top":b&&A&&(h&&p||f&&g)?c.angle="to right":y&&m&&(h&&p||f&&g)?c.angle="to left":b&&h&&A&&g?c.angle="to bottom right":b&&f&&A&&p?c.angle="to top right":m&&h&&y&&g?c.angle="to bottom left":m&&f&&y&&p&&(c.angle="to top left");c.stops=z(e[5])}else if(e=b.match(r))c.type="radial",c.func=e[1],c.webkitGradType=
e[2],c.webKitPosn1=e[3],c.webKitRadius1=e[4],c.webKitPosn2=e[5],c.webKitRadius2=e[6],c.shape=c.webKitPosn1==c.webKitPosn2?"circle":"ellipse",h=c.webKitPosn1,(b=h.match(d))?(h=b[1],h.match(/^\d+$/)&&(h+="px"),b=b[2],b.match(/^\d+$/)&&(b+="px"),b=h+" "+b):b=h,c.posn=b,c.extent=c.webKitRadius2?c.webKitRadius2+"px":c.webKitRadius1?c.webKitRadius1+"px":"farthest-corner",c.stops=z(e[7]);else if(e=b.match(q))c.type="linear",c.func=e[1],c.angle=e[2]?"to "+e[2]:e[3]?"to "+e[3]:e[4],c.stops=v(e[5]);else if(e=
b.match(k))c.type="radial",c.func=e[1],c.posn=e[2]?e[2]:e[4],c.angle=e[3]?e[3]:e[5],c.shape=e[6]?e[6]:e[9]?e[9]:e[10],c.extent=e[7]?e[7]:e[8]?e[8]:e[11],c.stops=v(e[12]);e||(c.type="unknown");return c},buildBackgroundImage:function(a){var b=[];if("emptystring"==a.type)b.push("");else if("none"==a.type)b.push("none");else if("url"==a.type){if("string"==typeof a.url&&0<a.url.length){var d=m.getUrl(a.url);d||(d=m.stripQuotes(a.url));b.push("url('"+d+"')")}}else if("linear"==a.type||"radial"==a.type){for(var d=
"",c,e,f=[],g=0;g<a.stops.length;g++){var h=a.stops[g],k="string"==typeof h.pos&&0<h.pos.length?h.pos:"";0<g&&(d+=", ");d+=h.color;if(0<g&&g<a.stops.length-1||0==g&&0!=k.length&&"0%"!=k&&0!=k-0||g==a.stops.length-1&&0!=k.length&&"100%"!=k&&1!=k-0)d+=" "+k;0!=g||0!=k.length&&"0%"!=k&&0!=k-0?g!=a.stops.length-1||0!=k.length&&"100%"!=k&&1!=k-0?f.push("color-stop("+k+", "+h.color+")"):e="to("+h.color+")":c="from("+h.color+")"}h="";k=!1;c&&(h+=c,k=!0);e&&(k&&(h+=", "),h+=e,k=!0);for(g=0;g<f.length;g++)k&&
(h+=", "),h+=f[g],k=!0;if("linear"==a.type){c="(";var n=a.angle;(e="string"==typeof n&&0<n.length?n.match(/^\s*(?:to\s+((?:\s*left\s*|\s*right\s*|\s*top\s*|\s*bottom\s*){1,2})|((?:\-?(?:\d*\.\d+|\d+)deg)))\s*$/):null)||(n="to bottom");"to bottom"!=n&&(c+=n+",");a="(linear,";f=0<=n.indexOf("left");g=0<=n.indexOf("top");k=0<=n.indexOf("right");n=0<=n.indexOf("bottom");f&&g?a+=" right bottom, left top, ":f&&n?a+=" right top, left bottom, ":k&&g?a+=" left bottom, right top, ":k&&n?a+=" left top, right bottom, ":
f?a+=" right top, left top, ":k?a+=" left top, right top, ":g?a+=" left bottom, left top, ":n?a+=" left top, left bottom, ":(f=180*(90-parseFloat(e[4]))/Math.PI,e=Math.cos(f),f=Math.sin(f),0<=e&&0<=f?(a+="0% 100%,",a=Math.abs(e)>Math.abs(f)?a+("100% "+100*(1-Math.abs(f)/Math.abs(e))+"%"):a+(Math.abs(e)/Math.abs(f)*100+"% 100%")):0<=e&&0>f?(a+="0% 0%,",a=Math.abs(e)>Math.abs(f)?a+("100% "+Math.abs(-f)/Math.abs(e)*100+"%"):a+(Math.abs(e)/Math.abs(f)*100+"% 100%")):0>e&&0<=f?(a+="100% 100%,",a=Math.abs(e)>
Math.abs(f)?a+("0% "+100*(1-Math.abs(f)/Math.abs(e))+"%"):a+(Math.abs(e)/Math.abs(f)*100+"% 100%")):(a+="100% 0%,",a=Math.abs(e)>Math.abs(f)?a+("0% "+Math.abs(-f)/Math.abs(e)*100+"%"):a+(Math.abs(e)/Math.abs(f)*100+"% 100%")),a+=", ");c+=d+")";b.push("-webkit-gradient"+(a+(h+")")));b.push("-o-linear-gradient"+c);b.push("-ms-linear-gradient"+c);b.push("-moz-linear-gradient"+c);b.push("-webkit-linear-gradient"+c);b.push("linear-gradient"+c)}else c="(","center"!=a.posn&&"center center"!=a.posn&&(c+=
a.posn+", "),"circle"!=a.shape&&(c+=a.shape+", "),"farthest-corner"!=a.extent&&(c+=a.extent+", "),c+=d+")",b.push("-webkit-gradient(radial, center center, 10, center center, "+(h+")")),b.push("-o-radial-gradient"+c),b.push("-ms-radial-gradient"+c),b.push("-moz-radial-gradient"+c),b.push("-webkit-radial-gradient"+c),b.push("radial-gradient"+c)}return b}}})},"davinci/ve/utils/URLRewrite":function(){define([],function(){var p=/^\s*url\s*\(\s*(\'[^\'\"]*\'|\"[^\'\"]*\"|[^\'\"]*)\s*\)\s*$/,m=/^[\'\"]?([^\'\"]*)[\'\"]?$/,
h=/^(http|ftp)/;return{isAbsolute:function(g){return"string"!=typeof g?!1:(g=this.getUrl(g))?h.test(g):!1},containsUrl:function(g){return"string"!=typeof g?!1:p.test(g)},replaceUrl:function(g,f){return"string"!=typeof g||"string"!=typeof f?null:this.getUrl(g)?"url('"+f+"')":null},stripQuotes:function(g){return g.replace(m,"$1")},encodeURI:function(g){return encodeURI(g).replace(/#/g,"%23")},getUrl:function(g){return"string"!=typeof g?null:(g=g.match(p))&&1<g.length?this.stripQuotes(g[1]):null}}})},
"davinci/ui/widgets/FileFieldDialog":function(){define("dojo/_base/declare dijit/_WidgetBase dijit/_TemplatedMixin dijit/_WidgetsInTemplateMixin davinci/Workbench davinci/ui/widgets/OpenFile dijit/form/Button davinci/model/Path davinci/lang/ui dijit/lang/_common dojo/text!./templates/FileFieldDialog.html dijit/form/TextBox xide/views/_PanelDialog xide/utils xide/types xfile/views/FileGrid xfile/FileActions".split(" "),function(p,m,h,g,f,e,c,a,q,k,d,b,n,r,v,z,y){return p("davinci.ui.widgets.FileFieldDialog",
[m,h,g],{templateString:d,widgetsInTemplate:!0,_fileSelectionDialog:null,_showFileSelectionDialog:function(){var a=this;this.ctx=f.ctx;y.createFilePicker(this,"",function(b){var d=r.buildPath(b.mount,b.path,!1);a.ctx.getFileManager().getImageUrl(b,!0,{oriPath:d});a.textField.set("value",d);a._onChange()},q.selectFile,null,{mount:"workspace_user",selection:"."},null,z,{micromatch:"(*.png)|(*.jpg)|!(*.*)"})},_setBaseLocationAttr:function(a){this._baseLocation=a},_setValueAttr:function(a){this.value!=
a&&(this.value=a,this.textField.set("value",a))},_setDisabledAttr:function(a){this.textField.set("disabled",a);this.button.set("disabled",a);this.inherited(arguments)},_setIntermediateChangesAttr:function(a){this.textField.set("intermediateChanges",a);this.inherited(arguments)},_onChange:function(){var a=this.textField.get("value");this.value!=a&&(this.value=a,this.textField.set("value",this.value),this.onChange(a))},onChange:function(a){},_getValueAttr:function(){return this.textField.get("value")}})})},
"davinci/ui/widgets/OpenFile":function(){define("dojo/_base/declare dijit/_Templated dijit/_Widget davinci/library system/resource davinci/workbench/Preferences davinci/Runtime davinci/Workbench dijit/Menu dijit/MenuItem davinci/model/Path dijit/form/DropDownButton davinci/lang/ui dijit/lang/_common dijit/form/Button dijit/form/TextBox dijit/form/RadioButton dijit/layout/ContentPane dijit/Tree".split(" "),function(p,m,h,g,f,e,c,a,q,k,d,b,n,r){return p("davinci.ui.widgets.OpenFile",[h,m],{widgetsInTemplate:!0,
fileDialogFileName:null,fileDialogParentFolder:null,postMixInProperties:function(){dojo.mixin(this,n);dojo.mixin(this,r);this.inherited(arguments)},postCreate:function(){this.inherited(arguments);this.fileTree.watch("selectedItem",dojo.hitch(this,this._updateFields));this._value||this._setValueAttr(this._getForcedRootAttr())},startup:function(){this.fileTree.startup()},_setValueAttr:function(a){a!=this._value&&(this._value=a,this.fileTree.set("selectedItems",[a]))},_getForcedRootAttr:function(){return this._forcedRoot||
f.findResource(a.getProject())},_setForcedRootAttr:function(a){this._forcedRoot=a},_updateFields:function(){var a=this.fileTree.get("selectedItems"),a=null!=a&&0<a.length?a[0]:null;dojo.attr(this._okButton,"disabled",!0);null!=a&&"File"==a.elementType&&dojo.attr(this._okButton,"disabled",!1)},_okButton:function(){this.value=this.fileTree.get("selectedItems")[0]},_onDblClick:function(a){this._okButton();this.onExecute()},_onKeyPress:function(a){a.which==dojo.keys.ENTER&&(this._okButton(),this.onExecute())},
_getValueAttr:function(){return this.value},_cancelButton:function(){this.onClose()},resize:function(a){this.contentpane.resize(a)},onExecute:function(){},onClose:function(){}})})},"davinci/lang/ui":function(){define([],function(){return{dontShowAgain:"Don't show again",selectFile:"Select a file",openFile:"Open File",aboutMaqetta:"About Maqetta",productVersion:"Version: ${0}",productDate:"Date: ${0}",build:"Build: ${0}",library:"Library",version:"Version",include:"Include",source:"Source",baseLocation:"Base Location",
invalidDownloadFileName:"File name may only contain letters, numbers, \x26#8216;_\x26#8216;, and \x26#8216;.\x26#8216;.",selectedFiles:"Selected Files",noFilesSelected:"No files selected!",downloadButtonLabel:"Download",themeAlreadyExists:"Theme already Exists!",invalidThemeName:"Invalid theme name",errorCreatingTheme:"Error creating theme: ",creatingTheme:"Creating theme",noUserThemes:"No user themes found in workspace. Please create a new theme before editing.",themeSetsDialog:"Manage theme sets",
renameThemeSet:"Rename theme set",themeSets:"Theme sets:",currentlySelectedThemeSet:"Currently selected theme set:",themeSetName:"Name:",desktopTheme:"Dojo desktop 1.7 theme:",mobileTheme:"Dojo mobile 1.7 theme:",android:"Android:",blackberry:"Blackberry:",ipad:"iPad:",iphone:"iPhone:",other:"Other:",selectTheme:"Select theme",themeSet:"Theme set:",themeVersionMessage:"Theme version does not match workspace version this could produce unexpected results. We suggest recreating the custom theme using the current version of Maqetta and deleting the existing theme.",
addThemeSet:"Add theme set",deleteThemeSet:"Delete theme set",workspaceLocation:"Workspace Location",savingReadonlyFile:"This file is a read-only file. Please save it to a writeable location.",create:"Create",open:"Open",save:"Save",select:"Select",update:"Update",unknown:"unknown",fileName:"File name",folderName:"Folder name",parentFolder:"Parent folder: ",newFolderLabel:"New folder",cancelButtonLabel:"Cancel",newFolderName:"Name:",createFolder:"Create Folder",createNewFile:"Create New File",createMobileApplication:"Create a Mobile Application",
createDesktopApplication:"Create a Desktop Application",createSketchHiFi:"Create a Sketch (high-fidelity)",createSketchLoFi:"Create a Sketch (low-fidelity)",createNewCSSFile:"Create New CSS File",createNewJSFile:"Create New JavaScript File",createNewFolder:"Create New Folder",saveFileAs:"Save File As",downloadFile:"Download",selectFiles:"Select Files...",selectZip:"Select ZIP file...",upload:"Upload",addFiles:"Upload",uploading:"Uploading...",completed:"completed: ${0} \n",done:"Done",explodeZipWarning:"Warning: Contents of .zip files will overwrite any conflicting files in your workspace",
mustEnterFileName:"You must enter a file name.",cannotSelect:"Cannot select ${0}. It is a folder.",fileAlreadyExistsOverwrite:"File ${0} already exists. OK to overwrite?",cannotCreate:"Cannot create ${0}. It already Exists.",fileNameSlashCharacter:"File names cannot contain a slash character (/). Your file name is: ${0}",doesNotHaveExtension:"The name ${0} does not have an extension (e.g., .html, .css or .js) and will be treated as a plain text file. OK to proceed?",areYouSureDelete:"Are you sure you want to delete ${0}?",
areYouSureDeleteProject:"Are you sure you want to delete project ${0}?",noResourcesSelected:"No resources are currently selected.",optimizeOption:"Use Dojo Web Builder (experimental)",downloadFullSource:"Download uncompressed source for selected libraries (if available)",selectAll:"All",selectNone:"None",themeToClone:"Theme to clone",newName:"New Name",selectTheme:"Select a Theme",newProject:"New Project",renameProjectDialogTitle:"Rename Project To...",deleteProjectButtonTitle:"Delete Project",renameProjectButtonTitle:"Rename Project...",
deleteOnlyProjectError:"You can't delete the only project in your workspace!",newFileShowFiles:"Show file picker",newFileHideFiles:"Hide file picker",root:"(root)",nhfoDevice:"Device:",nhfoDeviceTooltip:"Select an initial mobile device",nhfoThemeButtonLabel:"Theme...",nhfoThemeButtonTitle:"Select themes or theme set for new HTML file",renameNewLabel:"Name:",renameButtonLabel:"Rename",renameDialogTitle:"Rename To...",createProject:"New project",createProjectMenuItem:"New project...",deleteProjectMenuItem:"Delete this project...",
renameProjectMenuItem:"Rename this project...",saveAsProjectTemplateMenuItem:"Save as project template...",manageProjectTemplatesMenuItem:"Manage project templates...",modifyLibrariesMenuItem:"Modify libraries...",modifyLibraries:"Modify libraries",projectColon:"Project:",ProjectMenu:"Project menu",newProjectName:"Name:",newProjectTemplate:"Template:",newProjectUseProjectTemplate:"Use project template",newProjectCloneExistingProject:"Copy files from current project into new project",newProjectEclipseSupport:"New project should be Eclipse-compatible",
newProjectNameExists:"A project with this name already exists",saveAsProjectTemplate:"Save as project template",newProjectTemplateName:"Project template name:",newProjectTemplateShareLabel:"Share with everyone",newProjectTemplateOverwrite:"Project template {0} already exists. OK to overwrite?",newProjectTemplateCreationSuccess:"Project template {0} has been saved",newProjectTemplateCreationFailure:"Error: Project template {0} save operation failed",newProjectTemplateCancelled:"Operation cancelled",
manageProjectTemplates:"Manage project templates",ManageProjectTemplatesHeaderName:"Project template name",ManageProjectTemplatesHeaderShared:"Share with everyone?",ManageProjectTemplatesHeaderCreatedBy:"Created by",ManageProjectTemplatesHeaderCreatedOn:"Created on",ManageProjectTemplatesHeaderLastModified:"Last updated",ManageProjectTemplatesNoTemplates:"You have no project templates.",ManageProjectTemplatesDuplicateNames:"Invalid entries - two project templates have the same name",ManageProjectTemplateAboutToOccur:"The following actions are about to occur:",
ManageProjectTemplateDeletions:"project template deletions",ManageProjectTemplateModifications:"project template modifications",ManageProjectTemplateOKToProceed:"OK to proceed?",ManageProjectTemplatesInitializing:"Initializing...",modify:"Modify",User:"Account",currentProject:"Current Project:",selectProject:"Select a Project:",NoteOperationNotUndoable:"Note: this operation is not undoable."}})},"davinci/actions/UndoAction":function(){define(["dojo/_base/declare","./Action","../Workbench"],function(p,
m,h){return p("davinci.actions.UndoAction",m,{run:function(g){(g=h.getOpenEditor())&&g.getContext&&g.getContext().getCommandStack().undo()},isEnabled:function(g){var f=(g=h.getOpenEditor())&&g.getContext&&g.getContext();if(g&&f){if(f=f.getCommandStack().canUndo(),"davinci.ve.PageEditor"==g.declaredClass||"davinci.ve.themeEditor.ThemeEditor"==g.declaredClass)return f}else return!1}})})},"davinci/actions/Action":function(){define(["dojo/_base/declare"],function(p){return p("davinci.actions.Action",
null,{item:null,run:function(m){},isEnabled:function(m){return!0},getName:function(){return this.item.label}})})},"davinci/actions/SelectLayoutAction":function(){define(["dojo/_base/declare","./Action","../Workbench","davinci/lang/actions"],function(p,m,h,g){return p("davinci.actions.SelectLayoutAction",m,{_changeLayoutCommand:function(f){var e=dijit.byId("selectLayout");e&&e.destroyRecursive(!1);if((e=h.getOpenEditor())&&e.getContext){var c=!0;if("absolute"===f||"Absolute positioning"===f)c=!1;e.getContext().setFlowLayout(c);
e._visualChanged()}}})})},"davinci/lang/actions":function(){define([],function(){return{select:"Select",save:"Save",selectDirectory:"Select Directory to link to",parentFolder:"Parent Folder:",localName:"Local Name:",link:"Link",downloadResources:"Download Resources",downloadFileName:"Download File Name: ",downloadNow:"Download now",titleDownload:"Download",invalidFileName:"File names may only contain letters. numbers, and '_'.",editTheme:"Edit Theme",noEditableThemes:"No editable themes found in your workspace. Please create a new theme from one of the Read Only themes.",
newWidgetsShouldUse:"New widgets should use: ",selectTheme:"Select a theme",switchingThemes:"Switching themes",filesHasUnsavedChanges:"The file '${0}' has unsaved changes, \"Save\" changes and continue with switching themes.",abs:"Absolute positioning",flow:"Flow positioning"}})},"davinci/actions/RedoAction":function(){define(["dojo/_base/declare","./Action","../Workbench"],function(p,m,h){return p("davinci.actions.RedoAction",m,{run:function(g){(g=h.getOpenEditor())&&g.getContext&&g.getContext().getCommandStack().redo()},
isEnabled:function(g){var f=(g=h.getOpenEditor())&&g.getContext&&g.getContext();if(g&&f){if(f=f.getCommandStack().canRedo(),"davinci.ve.PageEditor"==g.declaredClass||"davinci.ve.themeEditor.ThemeEditor"==g.declaredClass)return f}else return!1}})})},"davinci/ve/actions/CopyAction":function(){define(["dojo/_base/declare","./_CutCopyAction","../../Runtime"],function(p,m,h){return p("davinci.ve.actions.CopyAction",[m],{_invokeSourceEditorAction:function(g){g.htmlEditor.copyAction.run()},_executeAction:function(g,
f,e,c){c=h.clipboard;h.clipboard=e;if(!c)g.onSelectionChange(f)}})})},"davinci/ve/actions/_CutCopyAction":function(){define("dojo/_base/declare davinci/Workbench davinci/ve/actions/ContextAction davinci/commands/CompoundCommand davinci/ve/commands/RemoveCommand davinci/ve/widget".split(" "),function(p,m,h,g,f,e){return p("davinci.ve.actions.CutAction",[h],{run:function(c){if(c=this.fixupContext(c))if("davinci.ve.PageEditor"==c.declaredClass&&"source"==c._displayMode)this._invokeSourceEditorAction(c);
else{var a=this._normalizeSelection(c);if(0<a.length){var h=new g,k=[],d=c.reorderPreserveSiblingOrder(a);dojo.forEach(d,function(a){var b=a.getData({identify:!1});b&&k.push(b);var d=a.getHelper();if(d&&d.getRemoveCommand){if(a=d.getRemoveCommand(a),"compound"===a.name){for(var d=[],c=a._commands,g=c.length-1;0<g;g--){var q=c[g];"remove"===q.name&&(q=e.byId(q._id).getData({identify:!1}),d.push(q))}b.associatedCopiedWidgetData=d}}else a=new f(a);h.add(a)});this._executeAction(c,a,k,h)}}},isEnabled:function(c){c=
this.fixupContext(c);var a=m.getOpenEditor();return a&&c?(c=0<c.getSelection().length,"davinci.ve.PageEditor"==a.declaredClass?(a=a.getDisplayMode(),c&&"source"!=a):c):!1},shouldShow:function(c){return(c=(c=this.fixupContext(c))?c.editor:null)&&"davinci.ve.PageEditor"==c.declaredClass},_invokeSourceEditorAction:function(c){},_executeAction:function(c,a,e,f){}})})},"davinci/ve/actions/ContextAction":function(){define(["dojo/_base/declare","davinci/actions/Action","davinci/Runtime"],function(p,m,h){return p("davinci.ve.actions.ContextAction",
[m],{_normalizeSelection:function(g){var f=g.getSelection();if(2>f.length)return f;var e=g.rootWidget,c=[];dojo.forEach(f,function(a){for(var h=a.getParent();h&&h!=e;){for(var k=0;k<f.length;k++)if(f[k]==h){g.deselect(a);return}h=h.getParent()}c.push(a)});return c},_getContext:function(g){return g?g:(g=h.currentEditor)&&(g.getContext&&g.getContext()||g.context)},fixupContext:function(g){g=this._getContext(g);return"davinci.ve.Context"==g.declaredClass||"xideve/delite/Context"==g.declaredClass?g:"function"==
typeof g.getContext?g.getContext():null}})})},"davinci/commands/CompoundCommand":function(){define(["dojo/_base/declare"],function(p){return p("davinci.commands.CompoundCommand",null,{name:"compound",_commands:[],constructor:function(m){this._commands=[];m&&(this._commands=[m])},add:function(m){if(m)if(this._commands)if("compound"==m.name)dojo.forEach(m._commands,function(e){this.add(e)},this);else{if("modify"==m.name)for(var h=m._oldId,g=0;g<this._commands.length;g++){var f=this._commands[g];if("modify"==
f.name&&f._oldId==h){f.add(m);return}}this._commands.push(m)}else this._commands="compound"==m.name?m._commands:[m]},setContext:function(m){for(var h=0;h<this._commands.length;h++)this._commands[h].setContext&&this._commands[h].setContext(m)},isEmpty:function(){return!this._commands||0===this._commands.length},execute:function(){if(this._commands)for(var m=0;m<this._commands.length;m++)this._commands[m].execute(),this._commands[m]._oldId&&this._commands[m]._newId&&(this._oldId=this._commands[m]._oldId,
this._newId=this._commands[m]._newId)},undo:function(){if(this._commands)for(var m=this._commands.length-1;0<=m;m--)this._commands[m].undo()}})})},"davinci/ve/commands/RemoveCommand":function(){define(["dojo/_base/declare","davinci/ve/commands/_hierarchyCommand","davinci/ve/widget","davinci/ve/States","davinci/ve/commands/ModifyCommand"],function(p,m,h,g,f){return p("davinci.ve.commands.RemoveCommand",[m],{name:"remove",constructor:function(e){this._id=e?e.id:void 0},execute:function(){if(this._id){var e=
h.byId(this._id);if(e){var c=e.getContext(),a=e.getParent()||c.getContainerNode(),q,k=e.getHelper();k&&k.onRemove&&(q=k.onRemove(e));if(!this._data){this._index=dojo.indexOf(a.getChildren(),e);if(0>this._index)return;this._data=e.getData();this._parentId=a.id}this._data.context=c;k=this._isRefreshOnDescendantChange(e);c&&c.detach(e);a.removeChild(e);c&&c.widgetChanged(c.WIDGET_REMOVED,e);e.destroyWidget();c&&c.widgetAddedOrDeleted();k&&(new f(k,null,null,a._edit_context)).execute();g.resetState(e.domNode);
q&&q()}}},undo:function(){if(this._data&&this._parentId){var e=h.byId(this._parentId);if(e){var c=h.createWidget(this._data);if(c){e.addChild(c,this._index);var a=e.getContext();a&&(a.attach(c),c.startup(),c.renderWidget(),a.widgetAddedOrDeleted(),a.widgetChanged(a.WIDGET_ADDED,c),(a=this._isRefreshOnDescendantChange(c))&&(new f(a,null,null,e._edit_context)).execute(),g.resetState(c.domNode))}}}}})})},"davinci/ve/commands/_hierarchyCommand":function(){define(["dojo/_base/declare"],function(p){return p("davinci.ve.commands._hierarchyCommand",
null,{_isRefreshOnDescendantChange:function(m){for(var h;m&&m.domNode&&"BODY"!=m.domNode.tagName;)(m=m.getParent())&&davinci.ve.metadata.queryDescriptor(m.type,"refreshOnDescendantChange")&&(h=m);return h}})})},"davinci/ve/commands/ModifyCommand":function(){define(["dojo/_base/declare","davinci/ve/commands/_hierarchyCommand","../widget","../utils/ImageUtils","../States"],function(p,m,h,g,f){return p("davinci.ve.commands.ModifyCommand",[m],{name:"modify",constructor:function(e,c,a,f,g){this._oldId=
e?e.id:void 0;this._properties=c=c||{};this._children=a||"string"==typeof a?a:c._children;this._context=f||e.getContext();this._scripts=g;delete this._properties._children},setContext:function(e){this._context=e},add:function(e){e&&e._oldId==this._oldId&&(e._properties&&dojo.mixin(this._properties,e._properties),e._children&&(this._children=e._children))},execute:function(){if(this._oldId&&this._properties){var e=h.byId(this._oldId),c=this._context;if(e){this._oldData=e.getData();this._oldData.context=
c;this._newData={type:this._oldData.type,properties:dojo.mixin({},this._oldData.properties,this._properties),children:this._children||"string"==typeof this._children?this._children:this._oldData.children,scripts:dojo.mixin({},this._oldData.scripts,this._scripts),maqAppStates:this._oldData.maqAppStates,maqDeltas:this._oldData.maqDeltas,context:c};for(var a in this._newData.properties)"$MAQ_MODIFYCOMMAND_DELETE_PROPERTY$"===this._newData.properties[a]&&delete this._newData.properties[a];if(this._doRefreshFromSource(e))e.setProperties(this._newData.properties,
!0),setTimeout(function(){c.visualEditor.refresh()},0);else{c&&c.detach(e);this._oldData.properties.isTempID&&!this._properties.id||delete this._newData.properties.isTempID;a=e.getParent();var q=null,k=a.indexOf(e);a.removeChild(e);e.destroyWidget();if(q=h.createWidget(this._newData)){"IMG"===q.domNode.tagName&&g.ImageUpdateFocus(q,c);a.addChild(q,k);this._newId=q.id;c&&(c.attach(q),q.startup(),q.renderWidget(),c.widgetAddedOrDeleted(),this._oldId!=this._newId&&c.widgetChanged(c.WIDGET_ID_CHANGED,
q,this._oldId),c.widgetChanged(c.WIDGET_MODIFIED,q));this.newWidget=q;dojo.publish("/davinci/ui/widget/replaced",[q,e]);f.resetState(q.domNode);var d;if(e=this._isRefreshParentOnPropChange(q))if("string"==typeof e)for(d=a;d&&d.domNode&&d.type!=e&&"BODY"!=d.domNode.tagName;){if(!d.domNode||"BODY"==d.domNode.tagName){d=null;break}d=d.getParent()}else d=a;(e=this._isRefreshOnDescendantChange(q))&&(d=e);d&&(new davinci.ve.commands.ModifyCommand(d,null,null,a._edit_context)).execute();dojo.publish("/davinci/ui/widgetPropertiesChanged",
[[q]])}}}}},_doRefreshFromSource:function(e){var c=this._properties,a,f,g=!1;for(a in c)if(c.hasOwnProperty(a)&&(f=e.metadata.property[a])&&f.refreshFromSource){g=!0;break}return g},_isRefreshParentOnPropChange:function(e){return davinci.ve.metadata.queryDescriptor(e.type,"refreshParentOnPropChange")},undo:function(){if(this._newId&&this._oldData){var e=h.byId(this._newId);if(e){var c=e.getParent();if(c){var a=c.indexOf(e);if(!(0>a)){var g=c.getContext();g&&g.detach(e);c.removeChild(e);e.destroyWidget();
if(newWidget=h.createWidget(this._oldData)){this._oldData=newWidget.getData();this._oldData.context=this._context;c.addChild(newWidget,a);g&&(g.attach(newWidget),newWidget.startup(),newWidget.renderWidget(),g.widgetAddedOrDeleted(),g.widgetChanged(g.WIDGET_MODIFIED,newWidget));dojo.publish("/davinci/ui/widget/replaced",[newWidget,e]);f.resetState(newWidget.domNode);var k;if(this._isRefreshParentOnPropChange(e))if("string"==typeof refreshParent)for(k=c;k&&k.domNode&&k.type!=refreshParent&&"BODY"!=
k.domNode.tagName;){if(!k.domNode||"BODY"==k.domNode.tagName){k=null;break}k=k.getParent()}else k=c;(e=this._isRefreshOnDescendantChange(newWidget))&&(k=e);k&&(new davinci.ve.commands.ModifyCommand(k,null,null,c._edit_context)).execute();dojo.publish("/davinci/ui/widgetPropertiesChanged",[[newWidget]])}}}}}}})})},"davinci/ve/utils/ImageUtils":function(){define([],function(){return{ImageUpdateFocus:function(p,m){if(m&&p&&p.domNode&&"IMG"===p.domNode.tagName)var h=dojo.connect(p.domNode,"onload",function(){for(var g=
m.getSelection(),f=0;f<g.length;f++)if(g[f]==p){m.updateFocus(p,f);break}dojo.disconnect(h)})}}})},"davinci/ve/actions/CutAction":function(){define(["dojo/_base/declare","./_CutCopyAction","../../Runtime"],function(p,m,h){return p("davinci.ve.actions.CutAction",[m],{_invokeSourceEditorAction:function(g){g.htmlEditor.cutAction.run()},_executeAction:function(g,f,e,c){h.clipboard=e;g.select(null);g.getCommandStack().execute(c)}})})},"davinci/ve/actions/DeleteAction":function(){define(["dojo/_base/declare",
"davinci/Workbench","davinci/ve/actions/ContextAction","davinci/commands/CompoundCommand","davinci/ve/commands/RemoveCommand"],function(p,m,h,g,f){return p("davinci.ve.actions.DeleteAction",[h],{run:function(e){if(e=this.fixupContext(e)){var c=this._normalizeSelection(e);if(0<c.length){var a=void 0;if(1===c.length)var c=c[0],h=c.getHelper(),a=h&&h.getRemoveCommand?h.getRemoveCommand(c):new f(c);else a=new g,dojo.forEach(c,function(c){var d=c.getHelper();c=d&&d.getRemoveCommand?d.getRemoveCommand(c):
new f(c);a.add(c)});e.select(null);e.getCommandStack().execute(a)}}},isEnabled:function(e){e=this.fixupContext(e);var c=m.getOpenEditor();return c&&e?(e=0<e.getSelection().length,"davinci.ve.PageEditor"==c.declaredClass?(c=c.getDisplayMode(),e&&"source"!=c):e):!1},shouldShow:function(e){return(e=(e=this.fixupContext(e))?e.editor:null)&&"davinci.ve.PageEditor"==e.declaredClass}})})},"davinci/ve/actions/PasteAction":function(){define(["dojo/_base/declare","../../Workbench","./ContextAction","../tools/PasteTool",
"../../Runtime"],function(p,m,h,g,f){return p("davinci.ve.actions.PasteAction",[h],{shortcut:{keyCode:86,ctrlKey:!0},run:function(e){if(e=this.fixupContext(e))if("davinci.ve.PageEditor"==e.declaredClass&&"source"==e._displayMode)e.htmlEditor.pasteAction.run();else{var c=f.clipboard;c&&e.setActiveTool(new g(c))}},isEnabled:function(e){e=this.fixupContext(e);var c=m.getOpenEditor();return c&&e?"davinci.ve.PageEditor"==c.declaredClass?(e=c.getDisplayMode(),f.clipboard&&"source"!=e):f.clipboard:!1},shouldShow:function(e){return(e=
(e=this.fixupContext(e))?e.editor:null)&&"davinci.ve.PageEditor"==e.declaredClass}})})},"davinci/ve/tools/PasteTool":function(){define("dojo/_base/declare ./CreateTool ../widget ../metadata ../../commands/CompoundCommand ../commands/AddCommand ../commands/MoveCommand ../commands/StyleCommand dojo/Deferred dojo/promise/all".split(" "),function(p,m,h,g,f,e,c,a,q,k){return p("davinci.ve.tools.PasteTool",m,{constructor:function(a){this.inherited(arguments);this._position_prop=null;var b=a[0];b&&b.properties&&
(b=h.parseStyleValues(b.properties.style),this._position_prop=h.retrieveStyleProperty(b,"position",""))},_create:function(d){var b=d.index,n,r,m=new f,z,p=[],w=new q,B=this._data.map(function(f){var u=new q,v=[];if(!this._loadType(f,v))return u.reject(),u;k(v).then(function(){var k=h.parseStyleValues(f.properties&&f.properties.style);if("absolute"==this._position_prop){var q=parseInt(h.retrieveStyleProperty(k,"left","0px")),k=parseInt(h.retrieveStyleProperty(k,"top","0px"));n?r={x:q+n.x,y:k+n.y}:
d.position?(r=d.position,n={x:d.position.x-q,y:d.position.y-k}):(r={x:q,y:k},n={x:0,y:0})}dojo.withDoc(this._context.getDocument(),function(){var k=function(d){void 0!==b&&0<=b&&b++;p.push(d);if(r){var e=this._context.getPreference("absoluteWidgetsZindex");m.add(new a(d,[{position:"absolute"},{"z-index":e}]));d=new c(d,r.x,r.y,z,null,null,z);z||(z=d);m.add(d)}u.resolve()}.bind(this);f.context=this._context;g.getHelper(f.type,"tool").then(function(a){var c;a&&(c=new a(f));if(c&&c.addPasteCreateCommand)a=
{parent:d.parent||this._context.getContainerNode(),position:r,index:b},c.addPasteCreateCommand(m,a).then(function(a){if(!a)return u.reject(),u;k(a)});else{c=h.createWidget(f);if(!c)return u.reject(),u;m.add(new e(c,d.parent||this._context.getContainerNode(),b));this.checkAddToCurrentState(m,c);k(c)}}.bind(this))}.bind(this))}.bind(this));return u}.bind(this));k(B).then(function(){m.isEmpty()||(this._context.getCommandStack().execute(m),setTimeout(function(){p.forEach(function(a,b){this._context.select(a,
0<b)}.bind(this))}.bind(this),0));w.resolve()}.bind(this));return w},createWithFlowLayout:function(){return"absolute"!=this._position_prop}})})},"davinci/ve/tools/CreateTool":function(){define("dojo/_base/declare dojo/dom-style ../tools/_Tool davinci/Workbench davinci/workbench/Preferences ../metadata ../widget dojo/Deferred dojo/promise/all davinci/ve/States davinci/commands/CompoundCommand ../commands/AddCommand ../commands/MoveCommand ../commands/ResizeCommand ../commands/StyleCommand".split(" "),
function(p,m,h,g,f,e,c,a,q,k,d,b,n,r,v){return p("davinci.ve.tools.CreateTool",h,{constructor:function(a,b){this._data=a;this._userData=b;a&&a.type&&(b=e.queryDescriptor(a.type,"resizableOnCreate")||e.queryDescriptor(a.type,"resizable"),"none"!==b&&(this._resizable=b),this._dropCursor=e.queryDescriptor(a.type,"dropCursor"));this._requireHelpers(a)},activate:function(a){(this._context=a)&&a.rootNode&&(this._oldCursor=a.rootNode.style.cursor);a.rootNode.style.cursor="crosshair"},deactivate:function(){this._context&&
this._context.rootNode&&(this._context.rootNode.style.cursor=this._oldCursor);this._setTarget(null);delete this._mdPosition;this._context.dragMoveCleanup()},_getContentPosition:function(a){if(a)return a.target&&(a={x:a.pageX,y:a.pageY}),a},onMouseDown:function(a){this._target=c.getEnclosingWidget(a.target);this._mdPosition=this._getContentPosition(a);this._dragRect=null},onMouseMove:function(a){var b=this._context,d=b._chooseParent;a.target!=this._lastEventTarget&&d.setProposedParentWidget(null);
this._lastEventTarget=a.target;if(this._mdPosition){if(this._resizable){b.deselect();var c=this._getContentPosition(a),e,h,k=!0,n=!0;c.x>=this._mdPosition.x?(d=this._mdPosition.x,h=c.x-this._mdPosition.x):(d=c.x,h=this._mdPosition.x-c.x,k=!1);c.y>=this._mdPosition.y?(e=this._mdPosition.y,c=c.y-this._mdPosition.y):(e=c.y,c=this._mdPosition.y-c.y,n=!1);a.shiftKey&&(h>=c?(c=h,n||(e=this._mdPosition.y-c)):(h=c,k||(d=this._mdPosition.x-h)));this._dragSizeRect||(a=b.getDocument().body,this._dragSizeRect=
dojo.create("div",{style:"border:1px dashed black;z-index:1000001;position:absolute;"},a));a=this._dragSizeRect.style;a.left=d+"px";a.top=e+"px";a.width=h+"px";a.height=c+"px"}}else d=!this.createWithFlowLayout(),this._setTarget(a.target,a),e=b.getPreference("showPossibleParents"),e=!e&&this._spaceKeyDown||e&&!this._spaceKeyDown,h={x:a.pageX,y:a.pageY},c={l:a.pageX,t:a.pageY,w:0,h:0},k=f.getPreferences("davinci.ve.editorPrefs",g.getProject()).snap&&d,n=!d,"object"==typeof this._dropCursor&&!1===this._dropCursor.show&&
(n=!1),b.dragMoveUpdate({data:this._data,position:h,absolute:d,currentParent:null,eventTarget:a.target,rect:c,doSnapLinesX:k,doSnapLinesY:k,doFindParentsXY:e,doCursor:n,beforeAfter:this._dropCursor&&this._dropCursor.beforeAfter})},onMouseUp:function(a){var b=this._context,d=b._chooseParent,f=!this.createWithFlowLayout();this._dragSizeRect&&(this._dragSizeRect.parentNode.removeChild(this._dragSizeRect),this._dragSizeRect=null);var h=b.getActiveDragDiv();h&&(h=dojo.query(".maqCandidateParents",h),1==
h.length&&(h[0].innerHTML=""));this._lastEventTarget=null;var k,n,q,r,h=this._getContentPosition(a);if(this._mdPosition){var m=!0,v=!0;this._position=dojo.mixin({},this._mdPosition);h.x<this._mdPosition.x&&(this._position.x=h.x);"height"==this._resizable?q=0:0<=h.x-this._mdPosition.x?q=h.x-this._mdPosition.x:(q=this._mdPosition.x-h.x,m=!1);h.y<this._mdPosition.y&&(this._position.y=h.y);"width"==this._resizable?r=0:0<=h.y-this._mdPosition.y?r=h.y-this._mdPosition.y:(r=this._mdPosition.y-h.y,v=!1);
a.shiftKey&&(q>=r?(r=q,v||(t=this._mdPosition.y-r)):(q=r,m||(l=this._mdPosition.x-q)))}else this._position=h;this._resizable&&this._position&&(4<q||4<r)&&(k={w:0<q?q:void 0,h:0<r?r:void 0});if(q=d.getProposedParentWidget()){if(n=q.parent,q.refChild){var z=q.parent.getChildren().indexOf(q.refChild);0<=z?q.refAfter&&z++:z=null}}else{a=this._getTarget()||c.getEnclosingWidget(a.target);var p=this._data;q=d.getAllowedTargetWidget(a,p,!0,{absolute:f});var L=dojo.isArray(p)?p[0].type:p.type,J=c.getWidgetHelper(L);
1<q.length&&J&&J.chooseParent?n=J.chooseParent(q):0<q.length&&(n=0<=q.indexOf(a)?a:q[0])}d.setProposedParentWidget(null);d=function(a){this.prototype=Error.prototype;this.name="InvalidTargetWidgetError";this.message=a?a:"The selected target is not a valid parent for the given widget."};try{p=this._data instanceof Array?this._data:[this._data];if(!n){var G=p.map(function(a){return a.type}).join(", "),E=p.map(function(a){var b=e.getAllowedParent(a.type);a=a.type;var d=e.queryDescriptor(a,"class");a=
d?d.split(/\s+/).push(a):[a];return{allowedParent:b,classList:a}});k="The selected target is not a valid parent for the given widget.";1===E.length&&E[0].allowedParent&&(k+=['The widget \x3cspan style\x3d"font-family: monospace"\x3e',G,"\x3c/span\x3e requires ",1<E[0].allowedParent.length?"one of the following parent types":"the parent type",' \x3cspan style\x3d"font-family: monospace"\x3e',E[0].allowedParent.join(", "),"\x3c/span\x3e."].join(""),L=p[0].type,(J=c.getWidgetHelper(L))&&J.isAllowedError&&
(k=J.isAllowedError({errorMsg:k,type:L,allowedParent:E[0].allowedParent,absolute:f})));throw new d(k);}for(f=0;f<p.length;f++){var K=p[f].type,O=e.getLibraryForType(K),P=O.name,L=[K,b];b._widgets.hasOwnProperty(P)||(b._widgets[P]=0);1==++b._widgets[P]&&e.invokeCallback(O,"onFirstAdd",L);e.invokeCallback(O,"onAdd",L)}this.create({target:n,index:z,directTarget:this._getTarget(),size:k,userData:this._userData})}catch(R){var Q,M;R instanceof d?(Q=R.message,M="Invalid Target"):(Q="The action was interrupted by an internal error.",
M="Error",console.error(R));g.showMessage(M,Q)}finally{this.exitCreateToolOnMouseUp()&&b.setActiveTool(null),this._cleanupActions()}},_cleanupActions:function(){var a=this._context;a.dragMoveCleanup();a.inlineEditActive()||this._context.getDocument().defaultView.focus()},onKeyDown:function(a){dojo.stopEvent(a);var b=this._context;if(a.keyCode==dojo.keys.ESCAPE)b.setActiveTool(null),this._cleanupActions();else{var d=this._context.getPreference("showPossibleParents");a.keyCode==dojo.keys.SPACE?this._spaceKeyDown=
!0:this._processKeyDown(a.keyCode);a=!d&&this._spaceKeyDown||d&&!this._spaceKeyDown;var d=this._data,d=dojo.isArray(d)?d[0].type:d.type,b=b._chooseParent,c=!this.createWithFlowLayout(),e=!c;"object"==typeof this._dropCursor&&!1===this._dropCursor.show&&(e=!1);b.dragUpdateCandidateParents({widgetType:d,showCandidateParents:a,absolute:c,doCursor:e,beforeAfter:this._dropCursor&&this._dropCursor.beforeAfter,currentParent:null})}},_processKeyDown:function(a){if(49<=a&&57>=a){var b=this._context._chooseParent,
d=b.getProposedParentsList();d&&1<d.length&&(a=d.length-(a-48),0<=a&&b.setProposedParentWidget(d[a]))}},onKeyUp:function(a){a.keyCode==dojo.keys.SPACE&&(this._spaceKeyDown=!1);dojo.stopEvent(a);a=this._context.getPreference("showPossibleParents");a=!a&&this._spaceKeyDown||a&&!this._spaceKeyDown;var b=this._data,b=dojo.isArray(b)?b[0].type:b.type,d=this._context._chooseParent,c=!this.createWithFlowLayout(),e=!c;"object"==typeof this._dropCursor&&!1===this._dropCursor.show&&(e=!1);d.dragUpdateCandidateParents({widgetType:b,
showCandidateParents:a,absolute:c,doCursor:e,beforeAfter:this._dropCursor&&this._dropCursor.beforeAfter,currentParent:null})},_requireHelpers:function(a){var b=[];if(!a||!a.type)return a instanceof Array&&a.forEach(function(a){b.concat(this._requireHelpers(a))},this),b;b.push(c.requireWidgetHelper(a.type));a.children&&!dojo.isString(a.children)&&dojo.every(a.children,function(a){return b.concat(this._requireHelpers(a))},this);return b},create:function(a){if(a&&this._data){for(var b=a.target,d,c;b&&
!(d=b.getContainerNode());)c=b,b=b.getParent();var e=a.index,f;d=!1;this._data.properties&&this._data.properties.style&&0<this._data.properties.style.indexOf("absolute")&&(d=!0);!d&&this.createWithFlowLayout()?c&&(e=b.indexOf(c)):a.position?f=a.position:this._position&&(f=this._position);this._data.context=this._context;q(this._requireHelpers(this._data)).then(function(){this._create({parent:b,index:e,position:f,size:a.size,userData:this._userData})}.bind(this))}},_create:function(e){var f=this._context,
g=[],h=new a;if(!this._loadType(this._data,g))return h.reject(),h;q(g).then(function(){var a;this.createNewWidget()?dojo.withDoc(this._context.getDocument(),function(){a=c.createWidget(this._data,this._userData,e.parent)},this):a=this._widget;a||h.reject(Error("Failed to create widget"));var g=new d;if(this.createNewWidget()){e.size=this._getInitialSize(a,e);g.add(new b(a,e.parent||this._context.getContainerNode(),e.index));var k=!0;a&&a.properties&&1==a.properties.ignorePosition&&(k=!1);a&&a.metadata&&
1==a.metadata.ignorePosition&&(k=!1);e.position&&k&&(k=f.getPreference("absoluteWidgetsZindex"),"xblox/RunScript"!==a.type&&"xblox/CSSState"!==a.type&&(g.add(new v(a,[{position:"absolute"},{"z-index":k}])),g.add(new n(a,e.position.x,e.position.y))));if(e.size){var q=e.size.w,m=e.size.h;if(null!==q&&null!==m&&(g.add(new r(a,q,m)),(k=c.getWidgetHelper(a.type))&&k.onCreateResize))k.onCreateResize(g,a,q,m)}this.checkAddToCurrentState(g,a)}k=a.id;this.addToCommandStack&&this.addToCommandStack(g,{widget:a});
g.isEmpty()||this._context.getCommandStack().execute(g);a.isLayoutContainer&&a.resize();a=c.byId(k);k=c.getWidgetHelper(a.type);g=null;k&&k.onAdded&&(g=k.onAdded(e.parent,a));this._select(g||a);this._widget=a;h.resolve(a);this.mouseUpProcessingCompleted()}.bind(this));return h},_loadType:function(a,b){if(!a||!a.type)return!1;b.push(this._context.loadRequires(a.type,!0));a.children&&!dojo.isString(a.children)&&dojo.forEach(a.children,function(a){this._loadType(a,b)}.bind(this));return!0},_getInitialSize:function(a,
b){var d=b.size,c=a.getHelper();c&&c.initialSize&&(c=c.initialSize(b))&&(d=c);!d&&(a=e.queryDescriptor(a.type,"initialSize"))&&(b&&!b.position?(b=b.parent,"html.body"==b.type?d="auto"==a||"auto"==a.flow?{w:"100%",h:"auto"}:this._getExplicitFlowSizeFromMetadata(a):this._isTypeContainer(b.type)?"auto"==a||"auto"==a.flow?(b=b.getData().children,d={w:"100%",h:b&&b.length?"auto":"100%"}):d=this._getExplicitFlowSizeFromMetadata(a):d=this._getExplicitFlowSizeFromMetadata(a)):d="auto"==a||"auto"==a.absolute?
{w:"300px",h:"300px"}:this._getExplicitAbsoluteSizeFromMetadata(a));return d},_getExplicitFlowSizeFromMetadata:function(a){var b=null;return b=a.flow?{w:a.flow.width?a.flow.width:"100%",h:a.flow.height?a.flow.height:"auto"}:{w:a.width?a.width:"100%",h:a.height?a.height:"auto"}},_getExplicitAbsoluteSizeFromMetadata:function(a){var b=null;return b=a.absolute?{w:a.absolute.width?a.absolute.width:"300px",h:a.absolute.height?a.absolute.height:"300px"}:{w:a.width?a.width:"300px",h:a.height?a.height:"300px"}},
_isTypeContainer:function(a){return a&&("dijit/layout/ContentPane"==a||"html.div"==a||"html.form"==a||"html.fieldset"==a)},_select:function(a){if(a)if(a.type){var b=e.getSmartInput(a.type);b&&b.then?b.then(function(b){!this._data.fileDragCreate&&b&&b.displayOnCreate?(a.inLineEdit_displayOnCreate=b.displayOnCreate,this._context.select(a,null,!0)):this._context.select(a)}.bind(this)):(console.error("create tool failed::_select smart input is null"),this._context.select(a))}else console.error("create tool failed::_select w.type is null");
else console.error("create tool failed::_select w is null")},createWithFlowLayout:function(){return e.queryDescriptor(this._data.type,"forceAbsolute")?!1:this._context.getFlowLayout()},createNewWidget:function(){return!0},exitCreateToolOnMouseUp:function(){return!0},mouseUpProcessingCompleted:function(){},checkAddToCurrentState:function(a,b){var d=k.getFocus(b._edit_context.rootNode);if(d&&d.stateContainerNode){var d=k.getState(d.stateContainerNode),c=f.getPreferences("davinci.ve.editorPrefs",g.getProject());
d&&c.newWidgetsCurrentState&&(c=m.get(b.domNode,"display"),a.add(new v(b,[{display:"none"}])),a.add(new v(b,[{display:c}],d)))}}})})},"davinci/ve/tools/_Tool":function(){define(["dojo/_base/declare","davinci/ve/widget","davinci/ve/utils/GeomUtils"],function(p,m,h){return p("davinci.ve.tools._Tool",null,{_getTarget:function(){return this._target},_setTarget:function(g,f){this._targetOverlays||(this._targetOverlays=[]);if(!this._matchesTargetOverlay(g)){for(var e=this._context.getContainerNode(),c;g&&
g!=e;)if((c=m.getEnclosingWidget(g))&&!c.getContext())g=c.domNode.parentNode,c=null;else{c&&davinci.ve.metadata.queryDescriptor(c.type,"enablePointerEvents")?c=null:c&&c.getContainerNode()&&(davinci.ve.metadata.queryDescriptor(c.type,"isControl")||(c=null));break}c?(this._target=c,this._updateTargetOverlays(f),this._insertTargetOverlays()):(this._removeTargetOverlays(),this._target=null)}},_updateTargetOverlays:function(g){this._removeTargetOverlays();if(this._target){var f=this._target.domNode,e=
this._getMaxZIndex(f);if(this._targetOverlays){var c=this._target.getHelper();if(c&&c.getTargetOverlays&&(c=c.getTargetOverlays(this._target))&&0<c.length){dojo.forEach(c,function(a){a=this._getNewTargetOverlay(a,a.x,a.y,a.width,a.height,e);this._targetOverlays.push(a)},this);return}var c=f.offsetLeft,a=f.offsetTop,q=f.offsetWidth,k=f.offsetHeight;if(g){var d,b=h.getBorderBoxPageCoordsCached(f);g.pageX<b.l&&(d=b.l-g.pageX,c-=d,q+=d);g.pageY<b.t&&(d=b.t-g.pageY,a-=d,k+=d);g.pageX>b.l+b.w&&(d=g.pageX-
(b.l+b.w),q+=d);g.pageY>b.t+b.h&&(d=g.pageY-(b.t+b.h),k+=d)}g=this._getNewTargetOverlay(f,c,a,q,k,e);this._targetOverlays.push(g)}}},_getMaxZIndex:function(g){var f=dojo.style(g,"zIndex");dojo.query("*",g).forEach(function(e){e=dojo.style(e,"zIndex");var c=Number(e),a=Number(f);isNaN(c)||(isNaN(a)?f=e:c>a&&(f=e))});return f},_getNewTargetOverlay:function(g,f,e,c,a,h){return this._context.getDojo().create("div",{className:"editFeedback",style:{position:"absolute",opacity:.1,left:f+"px",top:e+"px",
width:c+"px",height:a+"px",zIndex:h}})},_insertTargetOverlays:function(){if(this._targetOverlays&&this._target){var g=this._target.domNode,f=g.parentNode;dojo.forEach(this._targetOverlays,function(e){f.insertBefore(e,g.nextSibling)},this)}},_removeTargetOverlays:function(){if(this._targetOverlays&&this._target)for(var g=this._targetOverlays.length-1;0<=g;g--)dojo.destroy(this._targetOverlays[g]),this._targetOverlays.pop()},_matchesTargetOverlay:function(g){return dojo.some(this._targetOverlays,function(f){return g==
f},this)}})})},"davinci/ve/commands/AddCommand":function(){define("dojo/_base/declare davinci/ve/commands/_hierarchyCommand davinci/ve/widget davinci/ve/utils/ImageUtils davinci/ve/States davinci/ve/commands/ModifyCommand".split(" "),function(p,m,h,g,f,e){return p("davinci.ve.commands.AddCommand",[m],{name:"add",constructor:function(c,a,e){c&&(c.domNode?this._id=c.id:this._data=c);this._parentId=a.id;this._index=e},execute:function(){var c=h.byId(this._parentId);if(c){var a=c.getContext(),q=void 0;
this._data?(this._id&&this._data.properties&&(this._data.properties.id=this._id),q=h.createWidget(this._data),this._id=q.id):this._id&&(q=h.byId(this._id,a));if(q){this._data=q.getData();this._data.properties.id=this._id;this._data.context=a;if(this._index&&"number"!=typeof this._index)if(this._index.domNode)this._index=c.indexOf(this._index);else{var k=h.byId(this._index.id,a);this._index=c.indexOf(k)}"IMG"===q.domNode.tagName&&g.ImageUpdateFocus(q,a);c.addChild(q,this._index);a&&(a.attach(q),q.startup(),
q.renderWidget(),a.widgetAddedOrDeleted(),a.widgetChanged(a.WIDGET_ADDED,q));(a=this._isRefreshOnDescendantChange(q))&&(new e(a,null,null,c._edit_context)).execute();f.resetState(q.domNode)}}},undo:function(){if(this._id&&this._parentId){var c=h.byId(this._id);if(c){var a=h.byId(this._parentId);if(a){var g=this._isRefreshOnDescendantChange(c),k=c.getContext();k&&(k.detach(c),k.deselect(c));a.removeChild(c);k.widgetChanged(k.WIDGET_REMOVED,c);c.destroyWidget();k&&k.widgetAddedOrDeleted();g&&(new e(g,
null,null,a._edit_context)).execute();f.resetState(c.domNode)}}}}})})},"davinci/ve/commands/MoveCommand":function(){define("dojo/_base/declare dojo/dom-geometry davinci/ve/widget davinci/ve/States davinci/ve/utils/StyleArray davinci/ve/utils/GeomUtils".split(" "),function(p,m,h,g,f,e){return p("davinci.ve.commands.MoveCommand",null,{name:"move",constructor:function(c,a,e,f,d,b,g){this._id=c?c.id:void 0;this._context=c.getContext();this._newBox={l:a,t:e};this._commandForXYDeltas=f;this._oldBox=d;this._applyToStateIndex=
b&&"Normal"!=b&&"undefined"!=b?b:"undefined";this._disableSnapping=g},execute:function(){if(this._id){var c=h.byId(this._id);if(c&&c.domNode){var a=this._context;if(!this._oldBox){var q=c.getMarginBox();this._oldBox={l:q.l,t:q.t,w:q.w,h:q.h}}if(!c.domNode.offsetParent)console.error("maeh");else if(dojo.position(c.domNode.offsetParent,!0)){this._commandForXYDeltas?(this._newBox.l=this._oldBox.l+this._commandForXYDeltas._deltaX,this._newBox.t=this._oldBox.t+this._commandForXYDeltas._deltaY):(!this._disableSnapping&&
a&&a._snapX&&(q=this._oldBox.w,"left"==a._snapX.typeRefObj?this._newBox.l=a._snapX.x:q&&"right"==a._snapX.typeRefObj?this._newBox.l=a._snapX.x-q:q&&"center"==a._snapX.typeRefObj&&(this._newBox.l=a._snapX.x-q/2)),!this._disableSnapping&&a&&a._snapY&&(q=this._oldBox.h,"top"==a._snapY.typeRefObj?this._newBox.t=a._snapY.y:q&&"bottom"==a._snapY.typeRefObj?this._newBox.t=a._snapY.y-q:q&&"middle"==a._snapY.typeRefObj&&(this._newBox.t=a._snapY.y-q/2)));this._deltaX=this._newBox.l-this._oldBox.l;this._deltaY=
this._newBox.t-this._oldBox.t;var q=e.getBorderBoxPageCoords(c.domNode.offsetParent),k=m.getBorderExtents(c.domNode.offsetParent),d=this._newBox.l-q.l-k.l,b=this._newBox.t-q.t-k.t;a.getScrollOffset();d=[{left:d+"px"},{top:b+"px"}];a=c.getStyleValuesAllStates();this._oldStyleValuesAllStates=dojo.clone(a);this._oldBox&&(this._oldStyleValuesAllStates[this._applyToStateIndex]=f.mergeStyleArrays(this._oldStyleValuesAllStates[this._applyToStateIndex],[{left:this._oldBox.l-q.l-k.l+"px"},{top:this._oldBox.t-
q.t-k.t+"px"}]));a[this._applyToStateIndex]=a[this._applyToStateIndex]?f.mergeStyleArrays(a[this._applyToStateIndex],d):d;c.setStyleValuesAllStates(a);q=g.getStatesListCurrent(c.domNode);k=f.mergeStyleArrays([],a.undefined);for(d=0;d<q.length;d++)a[q[d]]&&(k=f.mergeStyleArrays(k,a[q[d]]));c.setStyleValuesCanvas(k);c.setStyleValuesModel(a.undefined);c.refresh();g.resetState(c.domNode);dojo.publish("/davinci/ui/widgetPropertiesChanged",[[c]])}}else console.error("no widget")}},undo:function(){if(this._id){var c=
h.byId(this._id);if(c){var a=this._oldStyleValuesAllStates,e=this._applyToStateIndex;c.setStyleValuesAllStates(a);a=f.mergeStyleArrays(a.undefined,a[e]);c.setStyleValuesCanvas(a);c.setStyleValuesModel(this._oldStyleValuesAllStates.undefined);c.refresh();davinci.ve.states.resetState(c.domNode);dojo.publish("/davinci/ui/widgetPropertiesChanged",[[c]])}}}})})},"davinci/ve/commands/ResizeCommand":function(){define(["dojo/_base/declare","dojo/dom-geometry","davinci/ve/widget","davinci/ve/States","davinci/ve/utils/StyleArray"],
function(p,m,h,g,f){return p("davinci.ve.commands.ResizeCommand",null,{name:"resize",constructor:function(e,c,a,f){this._id=e?e.id:void 0;e=/^\s*[-+]?[0-9]*\.?[0-9]+\s*$/;e.test(c)&&(c=parseFloat(c));e.test(a)&&(a=parseFloat(a));this._newBox={w:c,h:a};this._applyToStateIndex=f&&"Normal"!=f&&"undefined"!=f?f:"undefined"},execute:function(){if(this._id&&this._newBox){var e=h.byId(this._id);if(e&&e.domNode){var c=e.domNode,a=c.ownerDocument.defaultView.getComputedStyle(c),q=m.getContentBox(c,a);this._oldBox=
{w:q.w,h:q.h};var q=this._newBox.w,k=this._newBox.h;this._usesBorderBox(c)&&(c=m.getPadBorderExtents(c,a),"number"==typeof q&&0<=q&&(q+=c.w),"number"==typeof k&&0<=k&&(k+=c.h));c=[{}];"number"==typeof q?c[0].width=q+"px":"string"==typeof q&&(c[0].width=q);"number"==typeof k?c[0].height=k+"px":"string"==typeof k&&(c[0].height=k);q=e.getStyleValuesAllStates();this._oldStyleValuesAllStates=dojo.clone(q);this._oldBox&&(this._oldStyleValuesAllStates[this._applyToStateIndex]=f.mergeStyleArrays(this._oldStyleValuesAllStates[this._applyToStateIndex],
[{width:this._oldBox.w+"px"},{height:this._oldBox.h+"px"}]));q[this._applyToStateIndex]=q[this._applyToStateIndex]?f.mergeStyleArrays(q[this._applyToStateIndex],c):c;e.setStyleValuesAllStates(q);k=g.getStatesListCurrent(e.domNode);c=f.mergeStyleArrays([],q.undefined);for(a=0;a<k.length;a++)q[k[a]]&&(c=f.mergeStyleArrays(c,q[k[a]]));e.setStyleValuesCanvas(c);e.setStyleValuesModel(q.undefined);this._resize(e);g.resetState(e.domNode);dojo.publish("/davinci/ui/widgetPropertiesChanged",[[e]])}}},setContext:function(e){this._context=
e},undo:function(){if(this._id){var e=h.byId(this._id);if(e){var c=this._oldStyleValuesAllStates,a=this._applyToStateIndex;e.setStyleValuesAllStates(c);c=f.mergeStyleArrays(c.undefined,c[a]);e.setStyleValuesCanvas(c);e.setStyleValuesModel(this._oldStyleValuesAllStates.undefined);this._resize(e);g.resetState(e.domNode);dojo.publish("/davinci/ui/widgetPropertiesChanged",[[e]])}}},_usesBorderBox:function(e){var c=e.tagName.toLowerCase();(e=e.getAttribute("type"))&&(e=e.toLowerCase(e));return"table"==
c||"button"==c||"input"==c&&"button"==e},_resize:function(e){var c=e.getParent();c&&c.dijitWidget&&c.dijitWidget.isLayoutContainer?c.resize():e.resize&&e.resize();e.renderWidget();e._updateSrcStyle()}})})},"davinci/ve/commands/StyleCommand":function(){define(["dojo/_base/declare","davinci/ve/utils/StyleArray"],function(p,m){return p("davinci.ve.commands.StyleCommand",null,{name:"style",constructor:function(h,g,f){this._newValues=g;this._id=h?h.id:void 0;this._applyToStateIndex=f&&"Normal"!=f&&"undefined"!=
f?f:"undefined"},add:function(h){h&&h._id==this._id&&h._newValues&&dojo.mixin(this._newValues,h._newValues)},execute:function(h,g){if(this._id&&this._newValues&&(h=require("davinci/ve/widget").byId(this._id))&&h.domNode){var f=require("davinci/ve/States"),e=h.getStyleValuesAllStates();this._oldStyleValuesAllStates=dojo.clone(e);e[this._applyToStateIndex]=e[this._applyToStateIndex]?m.mergeStyleArrays(e[this._applyToStateIndex],this._newValues):this._newValues;for(var c=e[this._applyToStateIndex],a=
c.length-1;0<=a;a--){var q=c[a],k=!1,d;for(d in q)"$MAQ_DELETE_PROPERTY$"==q[d]?delete q[d]:k=!0;k||c.splice(a,1)}h.setStyleValuesAllStates(e);d=f.getStatesListCurrent(h.domNode);c=m.mergeStyleArrays([],e.undefined);for(a=0;a<d.length;a++)e[d[a]]&&(c=m.mergeStyleArrays(c,e[d[a]]));h.setStyleValuesCanvas(c);h.setStyleValuesModel(e.undefined);h.refresh();f.resetState(h.domNode);!0!==g&&dojo.publish("/davinci/ui/widgetPropertiesChanged",[[h]])}},undo:function(){if(this._id&&this._oldStyleValuesAllStates){var h=
require("davinci/ve/widget").byId(this._id);if(h){require("davinci/ve/States");var g=this._oldStyleValuesAllStates,f=this._applyToStateIndex;h.setStyleValuesAllStates(g);g=m.mergeStyleArrays(g.undefined,g[f]);h.setStyleValuesCanvas(g);h.setStyleValuesModel(this._oldStyleValuesAllStates.undefined);h.refresh();require("davinci/ve/States").resetState(h.domNode);dojo.publish("/davinci/ui/widgetPropertiesChanged",[[h]])}}}})})},"davinci/ve/actions/DuplicateAction":function(){define("dojo/_base/declare dojo/dom-style davinci/ve/actions/ContextAction davinci/commands/CompoundCommand davinci/ve/commands/AddCommand davinci/ve/commands/MoveCommand davinci/ve/tools/CreateTool davinci/ve/widget davinci/ve/utils/GeomUtils".split(" "),
function(p,m,h,g,f,e,c,a,q){return p("davinci.ve.actions.DuplicateAction",[h],{run:function(h){if((h=this.fixupContext(h))&&"davinci.ve.Context"===h.declaredClass&&"davinci/delite/Context"===h.declaredClass){var d=this._normalizeSelection(h);if(this.selectionSameParent(d)){var b=[];if(0<d.length){var k=new g;dojo.forEach(d,function(d){var g,n=d.getData({identify:!1});n&&(n.context=h,dojo.withDoc(h.getDocument(),function(){g=a.createWidget(n)},this),g&&(k.add(new f(g,d.getParent(),void 0)),c.prototype.checkAddToCurrentState(k,
g),b.push(g),"absolute"==(d&&d.domNode?m.get(d.domNode,"position"):null)&&(d=q.getMarginBoxPageCoords(d.domNode),d.l+=25,k.add(new e(g,d.l,d.t,void 0,void 0,void 0,!0)))))});h.getCommandStack().execute(k);dojo.forEach(b,function(a,b){h.select(a,0<b)},this)}}}},isEnabled:function(a){a=(a=this.fixupContext(a))&&a.getSelection?a.getSelection():[];return 0===a.length?!1:this.selectionSameParent(a)},shouldShow:function(a){return(a=(a=this.fixupContext(a))?a.editor:null)&&"davinci.ve.PageEditor"==a.declaredClass},
selectionSameParent:function(a){if(0===a.length)return!1;for(var d=a[0].getParent(),b=0;b<a.length;b++)if(a[b].getParent()!=d)return!1;return!0}})})},"davinci/ve/actions/EditValueAction":function(){define(["dojo/_base/declare","davinci/ve/actions/ContextAction"],function(p,m){return p("davinci.ve.actions.EditValueAction",[m],{run:function(h){if((h=this.fixupContext(h))&&"davinci.ve.Context"===h.declaredClass&&"davinci/delite/Context"===h.declaredClass){var g=h.getSelection();1===g.length&&h.select(g[0],
!1,!0)}},isEnabled:function(h){return(h=this.fixupContext(h))&&0<h.getSelection().length},shouldShow:function(h){return(h=(h=this.fixupContext(h))?h.editor:null)&&"davinci.ve.PageEditor"==h.declaredClass}})})},"davinci/ve/actions/EditPropertiesAction":function(){define(["dojo/_base/declare","davinci/ve/actions/ContextAction"],function(p,m){return p("davinci.ve.actions.EditPropertiesAction",[m],{run:function(h){(h=this.fixupContext(h))&&h.editor&&h.editor.editorContainer&&h.editor.editorContainer.hideShowProperties&&
h.editor.editorContainer.hideShowProperties()},isEnabled:function(h){h=this.fixupContext(h);return!0}})})},"davinci/ve/actions/SurroundAction":function(){define("dojo/_base/declare dojo/_base/array dojo/dom-style davinci/ve/actions/ContextAction davinci/commands/CompoundCommand davinci/ve/commands/AddCommand davinci/ve/commands/StyleCommand davinci/ve/commands/MoveCommand davinci/ve/commands/ResizeCommand davinci/ve/commands/ReparentCommand davinci/ve/tools/CreateTool davinci/ve/widget davinci/ve/utils/GeomUtils".split(" "),
function(p,m,h,g,f,e,c,a,q,k,d,b,n){return p("davinci.ve.actions.SurroundAction",[g],{run:function(g){g=this.fixupContext(g);var r,p,y,w,B=[],u,x=this.item.surroundWithTagName;if(x){dojo.withDoc(g.getDocument(),function(){u=b.createWidget({type:"html."+x,properties:{},children:[],context:g})});var D=new f,F=[].concat(g.getSelection()),C=F[0],I=C.getParent();n.getMarginBoxPageCoords(I.domNode);F.sort(function(a,b){return I.indexOf(a)-I.indexOf(b)});var A=g.getDocument(),H=A.defaultView&&A.defaultView.dojo;
H.style||(H.style=h);(A=m.every(F,function(a){if(H)return position_prop=H.style(a.domNode,"position"),"absolute"==position_prop}))&&F.forEach(function(b,d){B.push(n.getMarginBoxPageCoordsCached(b.domNode));D.add(new a(b,B[d].l,B[d].t,null,B[d]))});D.add(new e(u,I,I.indexOf(C)));d.prototype.checkAddToCurrentState(D,u);A&&(D.add(new c(u,[{position:"absolute"}])),m.forEach(F,function(a,b){a=B[b].l+B[b].w;var d=B[b].t+B[b].h;if(0==b||B[b].l<r)r=B[b].l;if(0==b||B[b].t<p)p=B[b].t;if(0==b||a>y)y=a;if(0==
b||d>w)w=d}),D.add(new a(u,r,p)),D.add(new q(u,y-r,w-p)));m.forEach(F,function(a){D.add(new k(a,u,"last"))});A&&m.forEach(F,function(b,d){D.add(new a(b,B[d].l,B[d].t,null,B[d]))});g.getCommandStack().execute(D);g.select(u)}else console.error("missing surroundWithTagName")},isEnabled:function(a){if((a=this.fixupContext(a))&&a.getSelection().length){var b=a.getSelection()[0].getParent(),d=[];if(!b||!b.length)return!1;if(m.every(a.getSelection(),function(a){var c=a.getParent();if(!c)return!1;d.push(b.indexOf(a));
return b.id==c.id})){d.sort();var c;for(a=d.shift();d.length;a=c)if(c=d.shift(),c!=a+1)return!1;return!0}}return!1}})})},"davinci/ve/commands/ReparentCommand":function(){define(["dojo/_base/declare","davinci/ve/commands/_hierarchyCommand","../widget","../States","davinci/ve/commands/ModifyCommand"],function(p,m,h,g,f){return p("davinci.ve.commands.ReparentCommand",[m],{name:"reparent",constructor:function(e,c,a){this._id=e?e.id:void 0;this._newParentId=c?c.id:"myapp";this._newIndex=a},execute:function(){if(this._id&&
this._newParentId){var e=h.byId(this._id);if(e){var c=e.getParent();c||(c=dojo.byId("myapp"));var a=h.byId(this._newParentId);a||(a=dojo.byId("myapp"));var q=this._isRefreshOnDescendantChange(e);this._oldParentId||(this._oldParentId=c.id,this._oldIndex=dojo.indexOf(c.getChildren(),e),this._newIndex&&this._newIndex.domNode&&(this._newIndex=a.indexOf(this._newIndex)));c.removeChild(e);var k=a.getContext();a.addChild(e,a==c&&this._oldIndex<this._newIndex?this._newIndex-1:this._newIndex);if(k){var d=
e.getHelper();d&&d.reparent&&d.reparent(e);e.startup();e.renderWidget();k.widgetChanged(k.WIDGET_REPARENTED,e,[c,a]);c=this._isRefreshOnDescendantChange(e);q&&(q=new f(q,null,null,k),q.execute());c&&(q=new f(c,null,null,k),q.execute())}g.resetState(e.domNode)}}},undo:function(){if(this._id&&this._oldParentId&&this._newParentId){var e=h.byId(this._id);if(e){var c=h.byId(this._oldParentId);if(c){var a=h.byId(this._newParentId);if(a){var q=this._isRefreshOnDescendantChange(e),k=c.getContext();a.removeChild(e);
c.addChild(e,this._oldIndex);if(k){var d=e.getHelper();d&&d.reparent&&d.reparent(e);e.startup();e.renderWidget();k.widgetChanged(k.WIDGET_REPARENTED,e,[c,a]);c=this._isRefreshOnDescendantChange(e);q&&(q=new f(q,null,null,k),q.execute());c&&(q=new f(c,null,null,k),q.execute())}g.resetState(e.domNode)}}}}}})})},"davinci/ve/actions/SelectParentAction":function(){define(["dojo/_base/declare","davinci/ve/actions/_SelectAncestorAction"],function(p,m){return p("davinci.ve.actions.SelectParentAction",[m],
{run:function(h){var g=(h=this.fixupContext(h))&&h.getSelection();this.selectionSameParentNotBody(g)&&h.select(g[0].getParent())},isEnabled:function(h){h=(h=this.fixupContext(h))&&h.getSelection();return this.selectionSameParentNotBody(h)}})})},"davinci/ve/actions/_SelectAncestorAction":function(){define(["dojo/_base/declare","davinci/ve/actions/ContextAction"],function(p,m){return p("davinci.ve.actions._SelectAncestorAction",[m],{shouldShow:function(h){return(h=this.fixupContext(h))&&h.editor&&"davinci.ve.HTMLPageEditor"==
h.editor.editorID},selectionSameParentNotBody:function(h){if(!h||0===h.length)return!1;var g=h[0].getParent();if(!g||!g.domNode)return!1;for(var f=0;f<h.length;f++)if(h[f].getParent()!=g)return!1;return!0}})})},"davinci/ve/actions/SelectAncestorAction":function(){define("dojo/_base/declare davinci/ve/actions/_SelectAncestorAction xide/views/_CIPanelDialog xide/utils xide/types xide/lodash".split(" "),function(p,m,h,g,f,e){return p("davinci.ve.actions.SelectAncestorAction",[m],{run:function(c){var a=
(c=this.fixupContext(c))&&c.getSelection();if(this.selectionSameParentNotBody(a)){for(var q=[],a=a[0].getParent();"BODY"!=a.domNode.tagName;)q.push(a),a=a.getParent();"BODY"===a.domNode.tagName&&q.push(a);for(var k=[],a=0;a<q.length;a++){var d=require("davinci/ve/widget").getLabel(q[a]);k.push({value:e.unescape(d),label:d,widget:q[a]})}var b=[g.createCI("New Parent",f.ECIType.ENUMERATION,"",{options:k})];(new h({title:"Select new parent",resizeable:!0,onOk:function(a){a=e.find(k,{value:b[0].value});
c.select(a.widget)},cis:b})).show()}},isEnabled:function(c){c=(c=this.fixupContext(c))&&c.getSelection();return this.selectionSameParentNotBody(c)}})})},"davinci/ve/actions/UnselectAllAction":function(){define(["dojo/_base/declare","davinci/ve/actions/ContextAction"],function(p,m){return p("davinci.ve.actions.SelectParentAction",[m],{run:function(h){h=this.fixupContext(h);0<(h&&h.getSelection()).length&&h.deselect()},isEnabled:function(h){return(h=(h=this.fixupContext(h))&&h.getSelection())&&0<h.length}})})},
"davinci/ve/actions/ArrangeAction":function(){define(["dojo/_base/declare","./_ReorderAction"],function(p,m){return p("davinci.ve.actions.ArrangeAction",[m],{run:function(h){},isEnabled:function(h){return!0},shouldShow:function(h){return(h=(h=this.fixupContext(h))?h.editor:null)&&"davinci.ve.PageEditor"==h.declaredClass}})})},"davinci/ve/actions/_ReorderAction":function(){define(["dojo/_base/declare","dojo/_base/array","dojo/dom-style","davinci/ve/actions/ContextAction"],function(p,m,h,g){return p("davinci.ve.actions._ReorderAction",
[g],{shouldShow:function(f){return(f=this.fixupContext(f))&&f.editor&&"davinci.ve.HTMLPageEditor"==f.editor.editorID},selectionSameParentAllAbsolute:function(f){if(0===f.length)return!1;var e=f[0].getParent();if(!e)return!1;for(var c=0;c<f.length;c++){var a=f[c];if(a.getParent()!=e||"absolute"!=(a&&a.domNode?h.get(a.domNode,"position"):null))return!1}return!0},selectionSameParentAllAbsoluteAdjacent:function(f){if(!f||0===f.length||!this.selectionSameParentAllAbsolute(f))return!1;var e=f[0].getParent();
if(!e||!e.length)return!1;for(var e=e.getChildren(),c=Number.MAX_VALUE,a=Number.MIN_VALUE,g=0;g<e.length;g++)0<=f.indexOf(e[g])&&(c=g<c?g:c,a=g>a?g:a);return a-c+1===f.length},getAbsoluteSiblings:function(f){f=f&&f.getParent&&f.getParent();return f?(f=f.getChildren&&f.getChildren())?m.filter(f,function(e){return"absolute"==(e&&e.domNode?h.get(e.domNode,"position"):null)}):[]:[]}})})},"davinci/ve/actions/MoveToFrontAction":function(){define(["dojo/_base/declare","./_ReorderAction","davinci/commands/CompoundCommand",
"davinci/ve/commands/ReparentCommand"],function(p,m,h,g){return p("davinci.ve.actions.MoveToFrontAction",[m],{name:"MoveToFront",iconClass:"editActionIcon editMoveToFrontIcon",run:function(f){if(f=this.fixupContext(f)){var e=f&&f.getSelection?f.getSelection():[];if(0!==e.length&&this.selectionSameParentAllAbsolute(e)){for(var c=e[0].getParent(),a=this.getAbsoluteSiblings(e[0]),q=new h,k=0;k<a.length;k++){var d=a[k];0<=e.indexOf(d)&&q.add(new g(d,c,null))}f.getCommandStack().execute(q)}}},isEnabled:function(f){f=
(f=this.fixupContext(f))&&f.getSelection?f.getSelection():[];if(0===f.length||!this.selectionSameParentAllAbsolute(f))return!1;for(var e=this.getAbsoluteSiblings(f[0]),c=0;c<f.length;c++)if(e.indexOf(f[c])<e.length-f.length)return!0;return!1}})})},"davinci/ve/actions/MoveToBackAction":function(){define(["dojo/_base/declare","./_ReorderAction","davinci/commands/CompoundCommand","davinci/ve/commands/ReparentCommand"],function(p,m,h,g){return p("davinci.ve.actions.MoveToBackAction",[m],{name:"MoveToBack",
iconClass:"editActionIcon editMoveToBackIcon",run:function(f){if(f=this.fixupContext(f)){var e=f&&f.getSelection?f.getSelection():[];if(0!==e.length&&this.selectionSameParentAllAbsolute(e)){for(var c=e[0].getParent(),a=this.getAbsoluteSiblings(e[0]),q=new h,k=a.length-1;0<=k;k--){var d=a[k];0<=e.indexOf(d)&&q.add(new g(d,c,0))}f.getCommandStack().execute(q)}}},isEnabled:function(f){f=(f=this.fixupContext(f))&&f.getSelection?f.getSelection():[];if(0===f.length||!this.selectionSameParentAllAbsolute(f))return!1;
for(var e=this.getAbsoluteSiblings(f[0]),c=0;c<f.length;c++)if(e.indexOf(f[c])>f.length-1)return!0;return!1}})})},"davinci/ve/actions/MoveForwardAction":function(){define(["dojo/_base/declare","./_ReorderAction","davinci/commands/CompoundCommand","davinci/ve/commands/ReparentCommand"],function(p,m,h,g){return p("davinci.ve.actions.MoveForwardAction",[m],{name:"MoveForward",iconClass:"editActionIcon editMoveForwardIcon",run:function(f){if(f=this.fixupContext(f)){var e=f&&f.getSelection?f.getSelection():
[];if(0!==e.length&&this.selectionSameParentAllAbsoluteAdjacent(e)){for(var c,a=e[0].getParent(),q=a.getChildren(),k=this.getAbsoluteSiblings(e[0]),d=new h,b=e.slice(0),n=0;n<k.length;n++){c=k[n];var r=b.indexOf(c);if(0<=r)b.splice(r,1);else if(0===b.length)break}q=q.indexOf(c)+1;for(b=0;b<k.length;b++)c=k[b],0<=e.indexOf(c)&&d.add(new g(c,a,q));f.getCommandStack().execute(d)}}},isEnabled:function(f){f=(f=this.fixupContext(f))&&f.getSelection?f.getSelection():[];if(0===f.length||!this.selectionSameParentAllAbsoluteAdjacent(f))return!1;
for(var e=this.getAbsoluteSiblings(f[0]),c=0;c<f.length;c++)if(e.indexOf(f[c])<e.length-f.length)return!0;return!1}})})},"davinci/ve/actions/MoveBackwardAction":function(){define(["dojo/_base/declare","./_ReorderAction","davinci/commands/CompoundCommand","davinci/ve/commands/ReparentCommand"],function(p,m,h,g){return p("davinci.ve.actions.MoveBackwardAction",[m],{name:"MoveBackward",iconClass:"editActionIcon editMoveBackwardIcon",run:function(f){if(f=this.fixupContext(f)){var e=f&&f.getSelection?
f.getSelection():[];if(0!==e.length&&this.selectionSameParentAllAbsoluteAdjacent(e)){for(var c,a=e[0].getParent(),q=a.getChildren(),k=this.getAbsoluteSiblings(e[0]),d=new h,b=e.slice(0),n=k.length-1;0<=n;n--){c=k[n];var r=b.indexOf(c);if(0<=r)b.splice(r,1);else if(0===b.length)break}q=q.indexOf(c);for(b=k.length-1;0<=b;b--)c=k[b],0<=e.indexOf(c)&&d.add(new g(c,a,q));f.getCommandStack().execute(d)}}},isEnabled:function(f){f=(f=this.fixupContext(f))&&f.getSelection?f.getSelection():[];if(0===f.length||
!this.selectionSameParentAllAbsoluteAdjacent(f))return!1;for(var e=this.getAbsoluteSiblings(f[0]),c=0;c<f.length;c++)if(e.indexOf(f[c])>f.length-1)return!0;return!1}})})},"davinci/ve/actions/OtherAction":function(){define(["dojo/_base/declare","./_ReorderAction"],function(p,m){return p("davinci.ve.actions.OtherAction",[m],{run:function(h){},isEnabled:function(h){return!0},shouldShow:function(h){return(h=(h=this.fixupContext(h))?h.editor:null)&&"davinci.ve.PageEditor"==h.declaredClass}})})},"davinci/ve/actions/AddState":function(){define("dojo/_base/declare davinci/Runtime davinci/Workbench davinci/ve/States davinci/actions/Action davinci/lang/ve".split(" "),
function(p,m,h,g,f,e){return p("davinci.ve.actions.AddState",[f],{run:function(){var c;m.currentEditor&&m.currentEditor.currentEditor&&m.currentEditor.currentEditor.context&&(c=m.currentEditor.currentEditor.context,(c=g.getFocus(c.rootNode))&&c.stateContainerNode&&(c=new davinci.ve.actions._AddManageStatesWidget({node:c.stateContainerNode}),c._calledBy="AddState",h.showModal(c,e.createNewState,null,null,!0),c.okButton.set("disabled",!0)))}})})},"davinci/ve/actions/RemoveState":function(){define("dojo/_base/declare davinci/Runtime davinci/ve/States davinci/actions/Action davinci/commands/CompoundCommand davinci/ve/commands/AppStateCommand".split(" "),
function(p,m,h,g,f,e){return p("davinci.ve.actions.RemoveState",[g],{run:function(){var c;if(m.currentEditor&&m.currentEditor.currentEditor&&m.currentEditor.currentEditor.context){c=m.currentEditor.currentEditor.context;var a=h.getFocus(c.rootNode);if(a&&a.state&&a.state!==h.NORMAL){var a=a.stateContainerNode,g=davinci.ve.states.getState(a);if(g){var k=new f;k.add(new e({action:"remove",state:g,stateContainerNode:a,context:c}));c.getCommandStack().execute(k)}}}}})})},"davinci/ve/commands/AppStateCommand":function(){define("dojo/_base/declare dojo/_base/lang dojo/topic davinci/XPathUtils davinci/html/HtmlFileXPathAdapter davinci/ve/States".split(" "),
function(p,m,h,g,f,e){return p("davinci.ve.commands.AppStateCommand",null,{name:"AppStateCommand",_actions:["add","remove","modify","reorder"],constructor:function(c){if(c){this._params=m.mixin({},c);var a=c.stateContainerNode;a&&a._dvWidget&&(this._params.stateContainerId=a.id,this._params.stateContainerXpath=g.getXPath(a._dvWidget._srcElement,f));"reorder"==this._params.action&&((a=this._getStateContainerNode())&&c.newStatesList.length?(this._oldStatesList=e.getStates(a),this._oldStatesList.shift()):
this._params=null)}},_validParams:function(){return this._params&&0<=this._actions.indexOf(this._params.action)&&this._params.stateContainerNode&&this._params.stateContainerId&&this._params.stateContainerXpath&&this._params.context},_getStateContainerNode:function(){var c,a=this._params.context;if(!a)return c;var e=a.getDocument();if(!e)return c;var f=this._params.stateContainerXpath;c=e.getElementById(this._params.stateContainerId);c||(a=a.model.evaluate(f))&&(c=e.getElementById(a.getAttribute("id")));
return c},execute:function(){if(this._validParams()){var c=this._params.action,a=this._params.state,f=this._getStateContainerNode();f&&("add"==c?(e.add(f,a),this._setStateAndFocus(f)):"remove"==c?(this._stateIndex=f._maqAppStates&&f._maqAppStates.states&&f._maqAppStates.states.indexOf(a),this._preservedNodesId=[],this._preservedNodesXpath=[],this._preservedStateValues=[],this._preserveStateFromNodeRecursive(f,a),e.remove(f,a),this._setStateAndFocus(f)):"modify"==c?(this._params.newState&&(this._traverseRenameState(this._params.state,
this._params.newState),h.publish("/davinci/states/state/renamed",{node:f,oldName:this._params.state,newName:this._params.newState,stateContainerNode:f})),"string"==typeof this._params.initialState&&(this._oldInitialState=e.getInitial(f),c="undefined"==this._params.initialState?void 0:this._params.initialState,this._params.newState&&c==this._params.state&&(c=this._params.newState),e.setState(c,f,{initial:c,updateWhenCurrent:!0})),this._setStateAndFocus(f)):"reorder"==c&&f&&f._maqAppStates&&f._dvWidget&&
(f._maqAppStates.states=this._params.newStatesList,c=e.stringifyWithQuotes(f._maqAppStates),f.setAttribute(e.APPSTATES_ATTRIBUTE,c),srcElement=f._dvWidget._srcElement,srcElement.setAttribute(e.APPSTATES_ATTRIBUTE,c),h.publish("/davinci/states/statesReordered",[f,this._params.newStatesList])))}},undo:function(){if(this._validParams()){var c=this._params.action,a=this._params.state,f=this._getStateContainerNode();f&&("add"==c?(e.remove(f,a),this._setStateAndFocus(f)):"remove"==c?(e.add(f,a,{index:this._stateIndex}),
this._restoreState(a),e.setState(a,f,{focus:!0}),this._setStateAndFocus(f)):"modify"==c?("string"==typeof this._params.initialState&&e.setState(this._oldInitialState,f,{initial:this._oldInitialState,updateWhenCurrent:!0}),this._params.newState&&this._traverseRenameState(this._params.newState,this._params.state),this._setStateAndFocus(f)):"reorder"==c&&f&&f._maqAppStates&&f._dvWidget&&(f._maqAppStates.states=this._oldStatesList,c=e.stringifyWithQuotes(f._maqAppStates),f.setAttribute(e.APPSTATES_ATTRIBUTE,
c),srcElement=f._dvWidget._srcElement,srcElement.setAttribute(e.APPSTATES_ATTRIBUTE,c),h.publish("/davinci/states/statesReordered",[f,this._params.newStatesList])))}},_setStateAndFocus:function(c){var a=e.getState(c);e.setState(a,c,{focus:a,updateWhenCurrent:!0})},_preserveStateFromNodeRecursive:function(c,a){var e=c._dvWidget;if(c&&e&&a)for(this._preserveStateFromNode(c,a),c=e.getChildren(),e=0;e<c.length;e++)this._preserveStateFromNodeRecursive(c[e].domNode,a)},_preserveStateFromNode:function(c,
a){c&&c._maqDeltas&&c._maqDeltas[a]&&c._dvWidget&&c._dvWidget._srcElement&&(this._preservedNodesId.push(c.id),this._preservedNodesXpath.push(g.getXPath(c._dvWidget._srcElement,f)),this._preservedStateValues.push(m.clone(c._maqDeltas[a])))},_restoreState:function(c){var a=this._params.context;if(a&&this._preservedNodesId){var f=a.getDocument();if(f)for(var g=0;g<this._preservedNodesId.length;g++){var d=this._preservedNodesXpath[g],b=f.getElementById(this._preservedNodesId[g]);b||(d=a.model.evaluate(d))&&
(b=f.getElementById(d.getAttribute("id")));b&&(b._maqDeltas||(b._maqDeltas={}),b._maqDeltas[c]=m.clone(this._preservedStateValues[g]),e._updateSrcState(b))}}},_traverseRenameState:function(c,a){var f=this._getStateContainerNode();if(f&&(e.rename(f,{oldName:c,newName:a}),f=f._dvWidget&&f._dvWidget._srcElement)){var g=null,d=!1,b=/^(.*davinci.states.setState\s*\(\s*)('[^']*'|"[^"]*")([^\)]*\).*)$/,h=/^(['"])(.*)(['"])$/;f.visit({visit:dojo.hitch(this,function(e){if("HTMLElement"==e.elementType)g=e;
else if("HTMLAttribute"==e.elementType){var f=e.name;if(f&&"on"==f.substr(0,2).toLowerCase()&&(e=e.value.match(b))){var k=e[2].match(h);k&&k[2]==c&&(g.setAttribute(f,e[1]+k[1]+a+k[3]+e[3]),d=!0)}}})});d&&(f=this._params&&this._params.context&&this._params.context.editor)&&f._visualChanged()}}})})},"davinci/XPathUtils":function(){define(function(){function p(h){this.node=h}p.prototype={name:function(){return this.node.nodeName},parent:function(){var h=this.node.parentNode;if(h!==this.node.ownerDocument)return new p(h)},
index:function(){var h=this.node.nodeName,g=this.node.parentNode,f=!1,e=0;g.id||(g.id="__XPATH_UTILS_TEMP_ID__"+Date.now(),f=!0);h=g.querySelectorAll("#"+g.id+"\x3e"+h);if(1<h.length)for(var c=0,a=h.length;c<a;c++)if(h[c]===this.node){e=c+1;break}f&&(g.id="");return e}};var m=/(\w+)(?:\[(\d+)\])?/;return{getXPath:function(h,g){function f(e,c){var a=c.name(),g=c.parent();return g?(c=c.index(),f((c?a+("["+c+"]"):a+"[1]")+(e?"/"+e:""),g)):"/"+a+"/"+e}g=g||p;h=new g(h);return f("",h).toLowerCase()},toCssPath:function(h){"/"===
h.charAt(0)&&(h=h.substr(1));var g="";h.split("/").forEach(function(f){f=f.match(m);var e=f[2];g+=(g?"\x3e":"")+f[1];e&&(g+=":nth-of-type("+e+")")});return g}}})},"davinci/html/HtmlFileXPathAdapter":function(){define(function(){function p(m){this.elem=m}p.prototype={name:function(){return this.elem.tag},parent:function(){var m=this.elem.parent;if("HTMLFile"!==m.elementType)return new p(m)},index:function(){var m=this.elem.tag,h=this.elem.parent.children,g=0;if(1===h.length)return 0;h=h.filter(function(f){return f.tag===
m});1<h.length&&h.some(function(f,e){if(f===this.elem)return g=e+1,!0},this);return g}};return p})},"davinci/ve/actions/ModifyState":function(){define("dojo/_base/declare dojo/Deferred dojo/_base/connect dijit/_WidgetBase dijit/_TemplatedMixin dijit/_WidgetsInTemplateMixin dijit/popup dijit/focus davinci/ve/States davinci/Runtime davinci/Workbench davinci/actions/Action davinci/lang/ve dijit/lang/_common dojo/text!./templates/ModifyState.html davinci/commands/CompoundCommand davinci/ve/commands/AppStateCommand".split(" "),
function(p,m,h,g,f,e,c,a,q,k,d,b,n,r,v,z,y){var w=null;p("davinci.ve.actions.ModifyStateWidget",[g,f,e],{templateString:v,widgetsInTemplate:!0,veNls:n,commonNls:r,isNormalState:!1,newName:null,oldInitialStateOn:null,postCreate:function(){this._connections=[];dijit.byId("state_rename_tooltip_dialog");w.then(function(){this._statesFocus.state&&this._statesFocus.state!==q.NORMAL||(this.isNormalState=!0);var a=dojo.byId("modify_state_old_name");a&&(this._statesFocus&&this._statesFocus.state&&!this.isNormalState?
a.innerHTML=this._statesFocus.state:(a.innerHTML="\x3ci\x3e"+q.NORMAL+"\x3c/i\x3e",this.renameButton.set("disabled",!0)));this.oldInitialStateOn=a=q.getInitial(this._statesFocus.stateContainerNode)===this._statesFocus.state;this.initialState.set("checked",a);a&&this.isNormalState&&this.initialState.set("disabled",!0);this._dialog.connect(this._dialog,"hide",function(a){this.onClose()}.bind(this));this.okButton.connect(this.okButton,"onClick",dojo.hitch(this,function(a){this.onOk(a)}));this.cancelButton.connect(this.cancelButton,
"onClick",dojo.hitch(this,function(a){this.onCancel(a)}));if(a=dijit.byId("state_rename_tooltip_dialog"))a.connect(a,"onShow",function(a){this.renameStateShowTooltipDialog(a)}.bind(this)),a.connect(a,"onHide",function(a){this.renameStateHideTooltipDialog(a)}.bind(this))}.bind(this))},renameStateShowTooltipDialog:function(b){b=dojo.byId("modify_state_old_name");var d=dojo.byId("state_rename_new_name"),e=dijit.byId("state_rename_new_name");b&&e&&e.set("value",b.innerText);a.focus(d);b=dijit.byId("state_rename_do_it");
d=dijit.byId("state_rename_cancel");b.connect(b,"onMouseDown",function(a){a.stopPropagation()});d.connect(b,"onMouseDown",function(a){a.stopPropagation()});b.connect(b,"onClick",function(a){this.renameStateDoIt(a)}.bind(this));d.connect(d,"onClick",function(a){a=dijit.byId("state_rename_tooltip_dialog");c.close(a)}.bind(this))},renameStateDoIt:function(a){a=dojo.byId("modify_state_old_name");var b=dijit.byId("state_rename_new_name"),b=b?b.get("value"):null,d=dijit.byId("state_rename_tooltip_dialog");
a&&b&&(this.newName=a.innerHTML=b);d&&c.close(d)},renameStateHideTooltipDialog:function(a){},onOk:function(a){if(k.currentEditor&&k.currentEditor.currentEditor&&k.currentEditor.currentEditor.context){a=k.currentEditor.currentEditor.context;var b=q.getFocus(a.rootNode);if(b&&b.stateContainerNode){var d;this.newName&&this.newName!==this._statesFocus.state&&(d=this.newName);var c,e=this.initialState.get("checked");e!==this.oldInitialStateOn&&(c=b.state?b.state:"undefined",c=e?c:null);if(d||c)e=new z,
e.add(new y({action:"modify",state:b.state,stateContainerNode:b.stateContainerNode,context:a,newState:d,initialState:c})),a.getCommandStack().execute(e);this.onClose()}}},onCancel:function(){this.onClose()},onClose:function(a){for(;a=this._connections.pop();)h.disconnect(a)}});return p("davinci.ve.actions.ModifyState",[b],{run:function(){var a;if(k.currentEditor&&k.currentEditor.currentEditor&&k.currentEditor.currentEditor.context&&(a=k.currentEditor.currentEditor.context,a=q.getFocus(a.rootNode))){w=
new m;var b=new davinci.ve.actions.ModifyStateWidget,c=d.showModal(b,n.modifyState);this._dialog=b._dialog=c;b._statesFocus=a;w.resolve()}}})})},"davinci/ve/actions/ManageStates":function(){define("dojo/_base/declare davinci/Runtime davinci/Workbench davinci/ve/actions/ContextAction davinci/ve/States davinci/lang/ve".split(" "),function(p,m,h,g,f,e){return p("davinci.ve.actions.ManageStates",[g],{run:function(){var c;m.currentEditor&&m.currentEditor.currentEditor&&m.currentEditor.currentEditor.context&&
(c=m.currentEditor.currentEditor.context,(c=f.getFocus(c.rootNode))&&c.stateContainerNode&&(c=new davinci.ve.actions._ManageStatesWidget({node:c.stateContainerNode}),c._calledBy="ManageStates",c.okButton.set("label",e.updateLabel),c.updateDialog(),h.showModal(c,e.manageStates,{width:400},null,!0)))},isEnabled:function(c){c=this.fixupContext(c);var a=h.getOpenEditor();return a&&c?"davinci.ve.PageEditor"==a.declaredClass?0<c.getSelection().length:!1:!1},shouldShow:function(c){return(c=(c=this.fixupContext(c))?
c.editor:null)&&"davinci.ve.PageEditor"==c.declaredClass}})})},"davinci/ve/actions/NewWidgetsCurrentState":function(){define("dojo/_base/declare davinci/Runtime davinci/Workbench davinci/ve/States davinci/actions/Action davinci/workbench/Preferences".split(" "),function(p,m,h,g,f,e){return p("davinci.ve.actions.NewWidgetsCurrentState",[f],{run:function(){var c;if(m.currentEditor&&m.currentEditor.currentEditor&&m.currentEditor.currentEditor.context){c=m.currentEditor.currentEditor.context;var a=h.getProject(),
f=e.getPreferences("davinci.ve.editorPrefs",a);f.newWidgetsCurrentState=f.newWidgetsCurrentState?!1:!0;e.savePreferences("davinci.ve.editorPrefs",a,f);g.updateStateIcons(c)}}})})},"davinci/ve/actions/HighlightBaseWidgets":function(){define(["dojo/_base/declare","davinci/Runtime","davinci/Workbench","davinci/actions/Action","davinci/workbench/Preferences"],function(p,m,h,g,f){return p("davinci.ve.actions.HighlightBaseWidgets",[g],{run:function(){var e;if(m.currentEditor&&m.currentEditor.currentEditor&&
m.currentEditor.currentEditor.context){e=m.currentEditor.currentEditor.context;var c=h.getProject(),a=f.getPreferences("davinci.ve.editorPrefs",c);a.highlightBaseWidgets=a.highlightBaseWidgets?!1:!0;f.savePreferences("davinci.ve.editorPrefs",c,a);e.updateFocusAll()}}})})},"davinci/ve/actions/ShowInOutline":function(){define(["dojo/_base/declare","davinci/Runtime","davinci/Workbench","davinci/ve/actions/ContextAction"],function(p,m,h,g){return p("davinci.ve.actions.ManageStates",[g],{run:function(){var f=
m.currentEditor;f&&f.delegate.showInOutline()},isEnabled:function(f){f=this.fixupContext(f);var e=h.getOpenEditor();return e&&f?"davinci.ve.PageEditor"==e.declaredClass?0<f.getSelection().length:!1:!1},shouldShow:function(f){return(f=(f=this.fixupContext(f))?f.editor:null)&&"davinci.ve.PageEditor"==f.declaredClass}})})},"davinci/ve/PageEditor":function(){define("require dojo/_base/declare ../ui/ModelEditor ../Runtime ../commands/CommandStack ../html/ui/HTMLEditor ./VisualEditor ./VisualEditorOutline ./widget ./States ../XPathUtils ../html/HtmlFileXPathAdapter ./utils/GeomUtils xide/mixins/EventedMixin xide/mixins/ReloadMixin xide/utils xide/types xideve/views/BlocksFileEditor xide/widgets/_Widget xide/views/_LayoutMixin xdocker/Docker2 wcDocker/iframe dijit/form/Select".split(" "),
function(p,m,h,g,f,e,c,a,q,k,d,b,n,r,v,z,y,w,B,u,x){m=m("davinci.ve.PageEditor",[h,B,r,v,u],{_latestSourceMode:"source",_latestLayoutMode:"flow",item:null,delegate:null,template:null,bottomTabContainer:null,textEditorPane:null,didBlockViews:!1,_propCP:null,createTab:function(a,b){var d=y.DOCKER;return this._docker.addTab(a||"DefaultTab",z.mixin({icon:!1,closeable:!1,moveable:!0,tabOrientation:d.TAB.TOP,location:d.DOCK.STACKED},b))},createLayout:function(){},constructor:function(a,b,d,e,g,h){var k=
this;b=y.DOCKER;this.item=d;this.template=g;var n=this;this._commandStack=new f(this);this.savePoint=0;this._docker=x.createDefault(a,{});this.domNode=this._docker.$container[0];this._designCP=this.createTab(null,{title:"Design",icon:"fa-eye"});var q=function(a){setTimeout(function(){var a=n.getContext();a&&a.frameNode&&$(a.frameNode).css("pointer-events","initial")},a||4E3)};this._docker.on(y.DOCKER.EVENT.BEGIN_RESIZE,function(a){(a=n.getContext())&&a.frameNode&&$(a.frameNode).css("pointer-events",
"none");q()});this._docker.on(y.DOCKER.EVENT.MOVE_STARTED,function(a){(a=n.getContext())&&a.frameNode&&$(a.frameNode).css("pointer-events","none");q()});this._docker.on(y.DOCKER.EVENT.MOVE_ENDED,function(){return q(1)});this._docker.on(y.DOCKER.EVENT.END_RESIZE,function(){return q(1)});this._docker.on(y.DOCKER.EVENT.BEGIN_FLOAT_RESIZE,function(a){a=n.getContext();$(a.frameNode).css("pointer-events","none");q()});this._docker.on(y.DOCKER.EVENT.END_FLOAT_RESIZE,function(){return q(1)});this._designCP.$container[0].domNode=
this._designCP.$container[0];this._designCP.domNode=this._designCP.$container[0];this._designCP.minSize(400,400);this.currentEditor=this.visualEditor=new c(this._designCP.$container[0],this,this.template);this.currentEditor._commandStack=this._commandStack;this.initReload();try{this._propCP=this.createTab(null,{title:"Props",icon:"fa-cogs",tabOrientation:b.TAB.TOP,location:b.TAB.RIGHT,target:this._designCP});this._propCP.maxSize(400);this._propCP.minSize(350);this._propCP.closeable(!1);a=null;if(h.length){this._srcCP=
a=this.createTab(null,{title:"HTML",icon:"fa-code",tabOrientation:b.TAB.TOP,location:b.TAB.BOTTOM});var m=this.createTab(null,{title:"States",icon:"fa-eye",tabOrientation:b.TAB.RIGHT,target:a,location:b.TAB.RIGHT});m.maxSize(400);m.minSize(350);m.initSize(400,null);this.statesTab=m}else console.error("have no editors, ");h=null;try{h=this.htmlEditor=e(a)}catch(E){debugger}this.model=h.model;h._on(y.EVENTS.ON_FILE_CONTENT_CHANGED,function(a){n.delegate.onEditorContentChanged(a)});this._displayMode=
"design";this._connect(this.visualEditor,"onContentChange","_visualChanged");this.subscribe("/davinci/ui/styleValuesChange",this._stylePropertiesChange);this.subscribe("/davinci/ui/widgetSelected",this._widgetSelectionChange);this.subscribe("/davinci/ui/selectionChanged",this._modelSelectionChange);this.subscribe("/davinci/ui/editorSelected",this._editorSelected.bind(this));this.subscribe("/davinci/ui/context/loaded",this._contextLoaded.bind(this));this.subscribe("/davinci/ui/deviceChanged",this._deviceChanged.bind(this));
this._designCP.getSplitter().pos(.5);setTimeout(function(){k._srcCP.getSplitter().pos(.5);k._propCP.maxSize(500)},1500);this.resize()}catch(E){this.visualEditor._connectCallback(E),console.error("page editor crash : "+E)}this.add(this._docker)},getPropertyPane:function(){return this._propCP},getDesignPane:function(){return this._designCP},getSourcePane:function(){return this._srcCP},getVisualEditor:function(){return this.visualEditor},getBlocksPane:function(){return this._blocksTab},onSceneBlocksLoaded:function(a,
b){if(0!=b.showBlocks&&!this.didBlockViews){this.didBlockViews=!0;var d=a.blockScopes;a=a.ctx;var c=y.DOCKER;this._blocksTab=this.createTab(null,{title:"Blocks",icon:"fa-eye",target:this._srcCP,tabOrientation:c.TAB.TOP,location:c.DOCK.STACKED});d=d[0];c=this._blocksTab;a=z.addWidget(w,{style:"height:inherit;width:inherit;padding:0px;",ctx:a,pageEditor:this,visualEditor:b,editorContext:this.getContext(),item:{path:d.path,mount:d.mount}},this,c,!0);a.initWithScope(d);c.add(a);this._blockEditor=a;(b=
b.getItem())&&this._blockEditor._widgetSelectionChanged({selection:[b]})}},getBlockEditor:function(){return this._blockEditor},setRootElement:function(a){this._rootElement=a},supports:function(a){return a.match(/^palette|properties|style|states|inline-style|MultiPropTarget|propsect_common|propsect_widgetSpecific|propsect_events|propsect_layout|propsect_paddingMargins|propsect_background|propsect_border|propsect_fontsAndText|propsect_shapesSVG$/)},focus:function(){},_editorSelected:function(a){var b=
this.getContext();b&&(this==a.oldEditor&&b.hideFocusAll(),a.editor&&a.editor.editorContainer&&("davinci.ve.PageEditor"==a.editor.declaredClass||"davinci.ve.themeEditor.ThemeEditor"==a.editor.declaredClass)&&this==a.editor&&(a=b.getFlowLayout(),this._updateLayoutDropDownButton(a?"flow":"absolute"),b.clearCachedWidgetBounds()))},_contextLoaded:function(){},_deviceChanged:function(){if(g.currentEditor==this&&this.editorContainer){var a=this.getContext();a&&a.updateFocusAll&&setTimeout(function(){a.updateFocusAll()},
1E3)}},_updateLayoutDropDownButton:function(a){(a=dojo.query(".maqLayoutDropDownButton"))&&a[0]&&dijit.byNode(a[0])},_selectLayout:function(a){this._latestLayoutMode=a;p(["davinci/actions/SelectLayoutAction"],function(b){b=new b;b._changeLayoutCommand(a)});this._updateLayoutDropDownButton(a)},selectLayoutFlow:function(){this._selectLayout("flow")},selectLayoutAbsolute:function(){this._selectLayout("absolute")},getDisplayMode:function(){return this._displayMode},getSourceDisplayMode:function(){return this._latestSourceMode},
_switchDisplayModeSource:function(a){this._latestSourceMode=a;this.switchDisplayMode(a)},switchDisplayModeSource:function(){this._switchDisplayModeSource("source")},switchDisplayModeSplitVertical:function(){this._switchDisplayModeSource("splitVertical")},switchDisplayModeSplitHorizontal:function(){this._switchDisplayModeSource("splitHorizontal")},switchDisplayModeSourceLatest:function(){this.switchDisplayMode(this._latestSourceMode)},switchDisplayModeDesign:function(){this.switchDisplayMode("design")},
switchDisplayMode:function(a){},hidePropertyPane:function(a){this.getPropertyPane()},_modelSelectionChange:function(a){if("source"!=this._displayMode&&p("davinci/Runtime").currentEditor===this&&(this._selectionCssRules=null,a.length&&(a=a[0].model)&&"HTMLElement"==a.elementType&&(a=a.getAttribute("id"))&&"source"!=this._displayMode)){a=q.byId(a,this.visualEditor.context.getDocument());var b=n.getMarginBoxPageCoords(a.domNode);this.getContext().getGlobal().scroll(b.l,b.t);this.visualEditor.context.select(a)}},
_widgetSelectionChange:function(a){!0===a.isFake||!this.visualEditor.context||a&&a.length&&a[0]._edit_context!=this.visualEditor.context||(a=this.visualEditor.context.getSelection())&&a.length&&"design"!=this._displayMode&&this.htmlEditor.selectModel([{model:a[0]._srcElement}])},_stylePropertiesChange:function(a){if(!(a&&a.cascade&&a.cascade._widget&&1==a.cascade._widget.isFake)){this.visualEditor._stylePropertiesChange(a);var b=this.visualEditor.context.getSelection();if(b&&b[0]&&(b=z.getNode(b[0]))&&
b.onChanged)b.onChanged();a=a.cascade._topWidgetDom;$(a).attr("style");this.getContext().updateBackground(a)}},_setDirty:function(){this.setDirty(!0)},setDirty:function(a){if(this.isDirty=a)this.lastModifiedTime=Date.now();this.editorContainer&&this.editorContainer.setDirty(a)},_visualChanged:function(a){this.delegate.shouldUpdateTextEditor()&&(a||this._setDirty(),this.htmlEditor.set("value",this.model.getText(),!0),this.getContext().visualEditorChanged())},_srcChanged:function(){dojo.withDoc(window.document,
function(){this.htmlEditor.isTyping&&(this.visualEditor.skipSave=!0);var a=this.visualEditor.context,b=a&&this._getStatesScenes(a);this.visualEditor.setContent(this.fileName,this.htmlEditor.model);this.editorContainer.updateToolbars();dojo.publish("/davinci/ui/context/pagerebuilt",[a]);b&&this._setStatesScenes(a,b);delete this.visualEditor.skipSave;this._setDirty()},this)},_getStatesScenes:function(a){return[]},_setStatesScenes:function(a,b){},getContext:function(){return this.visualEditor.context},
getOutline:function(){this.outline||(this.outline=new a(this));return this.outline},getPropertiesView:function(){return this.currentEditor.getPropertiesView()},setContent:function(a,b,d){this.fileName=a;this.htmlEditor.setContent(a,b);this.visualEditor.setContent(a,this.htmlEditor.model,d);this._connect(this.htmlEditor.model,"onChange","_themeChange")},_themeChange:function(a){a&&"CSSRule"===a.elementType&&(this.setDirty(!0),this.visualEditor.context.hotModifyCssRule(a))},getDefaultContent:function(){this._isNewFile=
!0;return this.visualEditor.getDefaultContent()},selectModel:function(a,b){this.publishingSelect||b&&this!=b||(b=a&&a[0])&&(b.elementType?this.htmlEditor.selectModel(a):b.model&&b.model.isWidget&&this.visualEditor.context.select(b.model,b.add))},save:function(a){if(this.delegate&&this.delegate.save){var b=this.visualEditor.context.getModel(),d=b.getText();this.delegate.save(this,this.visualEditor,b,d)}else this.savePoint=this._commandStack.getUndoCount(),(b=this.visualEditor.save(a))&&b.then&&b.then(function(b){this.isDirty=
a;this.editorContainer&&this.editorContainer.domNode&&this.editorContainer.setDirty(a)}.bind(this),function(a){})},removeWorkingCopy:function(){},previewInBrowser:function(){this.visualEditor.previewInBrowser()},destroy:function(){this.inherited(arguments);this.visualEditor.destroy();this.htmlEditor.destroy();z.destroy(this.bottomTabContainer)},getText:function(){return this.htmlEditor.getText()},onResize:function(){for(var a=this.getContext(),b=a.getSelection(),d=0;d<b.length;d++)a.select(b[d],0!=
d)},handleKeyEvent:function(a){},getFocusContainerBounds:function(){if("source"==this._displayMode)return{l:0,t:0,w:0,h:0};var a=n.getBorderBoxPageCoords(this._designCP.domNode);a.l-=8;a.t-=8;"none"==(this.visualEditor&&this.visualEditor.getDevice?this.visualEditor.getDevice():"none")?(a.w+="splitVertical"==this._displayMode?8:16,a.h+="splitHorizontal"==this._displayMode?8:16):(a.w+=8,a.h+=8);return a},getCommandStack:function(){return this.getContext().getCommandStack()}});m.__test="asd2f";return m})},
"davinci/ui/ModelEditor":function(){define(["dojo/_base/declare","../Runtime","./TextEditor","../commands/SourceChangeCommand"],function(p,m,h,g){return p(h,{constructor:function(f,e){this.subscribe("/davinci/ui/selectionChanged",this.selectModel)},colorize:function(f){return null},setContent:function(f,e){this.inherited(arguments);this.model.fileName=f;this.model.setText(e)},getHoverText:function(f,e){f=this.convertMouseToLine(f,e);return this.model.findChildAtPosition({startOffset:f.row,endOffset:f.col}).getLabel()},
handleChange:function(f){this.inherited(arguments);var e=this.model.getText(),c=m.currentEditor;c&&c.getCommandStack?(c=c.getCommandStack(),e=new g({model:this.model,oldText:e,newText:f}),c.execute(e)):(this.model.setText(f),dojo.publish("/davinci/ui/modelChanged",[{newModel:this.model}]))},selectModel:function(f,e){this.publishingSelect||e&&this!=e||!f.length||!f[0].model||(f=f[0].model,f.elementType&&(f=this.model.mapPositions(f),this.select(f)))},selectionChange:function(f){var e=this.model.mapPositions(this.model),
e=this.model.endOffset-e.endOffset,e=this.model.findChildAtPosition({startOffset:f.startOffset+e,endOffset:f.endOffset+e-1});f.model=e;if(e!=this._selectedModel)try{this.publishingSelect=!0,dojo.publish("/davinci/ui/selectionChanged",[[f],this])}finally{this.publishingSelect=!1}this._selectedModel=e},getSyntaxPositions:function(f,e){this.model.setText(f);if(this.model.getSyntaxPositions)return this.model.getSyntaxPositions(e).sort(function(c,a){return c.line!=a.line?c.line-a.line:c.col-a.col})},save:function(){this.model.setText(this.getText());
this.inherited(arguments)},getErrors:function(){return this.model.errors||[]}})})},"davinci/ui/TextEditor":function(){define(["dojo/_base/declare","./Editor","../Runtime"],function(p,m,h){return p(m,{constructor:function(g,f){this.subscriptions=[];this._handles=[]},isActiveEditor:function(){return h.currentEditor==this},handleChange:function(g){this.editorContainer&&this.editorContainer.setDirty(!0);this.isDirty=!0;this.lastModifiedTime=Date.now()},_onKey:function(g){davinci.Workbench.currentContext=
this.editorID;return davinci.Workbench.handleKey(g)},subscribe:function(g,f){this.subscriptions.push(dojo.subscribe(g,this,f))},destroy:function(){this.inherited(arguments);this.subscriptions.forEach(dojo.unsubscribe);this._handles.forEach(dojo.disconnect)},getDefaultContent:function(){return null},getErrors:function(){return[]},save:function(g){var f=this.getText();if(this.resourceFile){this.resourceFile.clearMarkers();for(var e=this.getErrors(),c=0;c<e.length;c++){var a;switch(e[c].id){case "(error)":a=
"error";break;case "(warning)":a="warning"}a&&this.resourceFile.addMarker(a,e[c].line+1,e[c].reason)}this.resourceFile.setContents(f,g);this.editorContainer&&this.editorContainer.setDirty(g);this.isDirty=!1;this.lastModifiedTime=0}},supports:function(g){return!1},_connect:function(g,f,e){this._handles.push(dojo.connect(g,f,this,e))}})})},"davinci/ui/Editor":function(){define(["../commands/CommandStack","dojo/_base/declare"],function(p,m,h){var g=function(f){this._progSelect||this.selectionChange({startOffset:f.newValue.start,
endOffset:f.newValue.end})};return m(null,{constructor:function(f,e,c){this.contentDiv=f;this.commandStack=new p;this._existWhenVisible=c;this._isVisible=!c},setContent:function(f,e){this.editor||this._existWhenVisible&&!this._isVisible||this._createEditor();this._textModel||(this._textModel=this.editor?this.editor.getModel():new mProjectionTextModel.ProjectionTextModel(new mTextModel.TextModel));this.fileName=f;this.setValue(e,!0);this._textModel&&(dojo.disconnect(this._textModelConnection),this._textModelConnection=
dojo.connect(this._textModel,"onChanged",this,onTextChanged))},setVisible:function(f){f!=this._isVisible&&this._existWhenVisible&&(f&&this._existWhenVisible?(this._createEditor(),this._updateStyler()):(this.editor.getTextView().removeEventListener("Selection",dojo.hitch(this,g)),delete this.editor));this._isVisible=f},setValue:function(f,e){this._dontNotifyChange=e;this.editor?this.editor.setText(f):this._textModel.setText(f)},_createEditor:function(){},_updateStyler:function(){},selectionChange:function(f){},
destroy:function(){},select:function(f){if(this.editor)try{this._progSelect=!0,this.editor.setSelection(f.endOffset,f.startOffset)}finally{delete this._progSelect}},getText:function(){return this._textModel.getText(0)},getOnUnloadWarningMessage:function(){return null}})})},"davinci/commands/SourceChangeCommand":function(){define(["dojo/_base/declare","davinci/Runtime"],function(p,m){return p("davinci.commands.SourceChangeCommand",null,{name:"SourceChange",constructor:function(h){this._model=h.model;
this._oldText=h.oldText;this._newText=h.newText},incrementalUpdate:function(h){this._newText=h.newText},execute:function(){this._model.setText(this._newText);dojo.publish("/davinci/ui/modelChanged",[{newModel:this._model}]);var h=m.currentEditor;"davinci.ve.PageEditor"==h.declaredClass&&h.handleChange&&require(["davinci/ve/PageEditor"],function(g){g.prototype._srcChanged.call(h,this._newText)}.bind(this));if(!this.established)return this.established=!0},undo:function(){this._model.setText(this._oldText);
dojo.publish("/davinci/ui/modelChanged",[{newModel:this._model}]);var h=m.currentEditor;"davinci.ve.PageEditor"==h.declaredClass&&h.handleChange&&require(["davinci/ve/PageEditor"],function(g){g.prototype._srcChanged.call(h,this._oldText)}.bind(this))}})})},"davinci/html/ui/HTMLEditor":function(){define(["dojo/_base/declare","davinci/ui/ModelEditor","davinci/model/Factory","davinci/html/ui/HTMLOutline"],function(p,m,h,g){return p("davinci.html.ui.HTMLEditor",m,{constructor:function(f,e){this.model=
this.htmlFile=h.getModel({url:e});this._handle=dojo.connect(this.htmlFile.getDocumentElement(),"onkeydown",this,"onKeyDown")},destroy:function(){this.htmlFile.close();dojo.disconnect(this._handle);this.inherited(arguments)},getOutline:function(){this.outline||(this.outline=new g(this.model));return this.outline},getDefaultContent:function(){return"\x3chtml\x3e\n \x3chead\x3e\x3c/head\x3e\n \x3cbody\x3e\x3c/body\x3e\n\x3c/html\x3e"},onKeyDown:function(f){}})})},"davinci/model/Factory":function(){define(["../html/CSSFile",
"../js/JSFile","../html/HTMLFile","system/resource"],function(p,m,h,g){var f=[],e=[],c={getModel:function(a){var g=a.url;if(!g)return null;for(var h=0;h<e.length;h++)if(e[h].url==g)return f[h]++,this.incrementImports(e[h]),e[h];if(/\.html?$/i.test(g)||/\.cfhtml?$/i.test(g))return c.newHTML(a);if(/\.css$/i.test(g))return c.newCSS(a);if(/\.js$/i.test(g))return c.newJS(a)},closeModel:function(a){a=a.url;if(!a)return null;for(var c=0;c<e.length;c++)e[c].url==a&&(f[c]--,0===f[c]&&(e.splice(c,1),f.splice(c,
1)))},newHTML:function(a){a=new h(a.url);e.push(a);f[e.length-1]=1;return a},newCSS:function(a){a=new p(a);e.push(a);f[e.length-1]=1;return a},newJS:function(a){a=new m(a);e.push(a);f[e.length-1]=1;return a},getNewFromResource:function(a){a=a.extension;if(!a)return new h;switch(a){case "html":return new h;case "css":return new p;case "js":case "json":return new m;default:return new h}},incrementImports:function(a){var c={visit:function(a){if("CSSImport"==a.elementType){a=a.cssFile.url;for(var d=0;d<
e.length;d++)e[d].url==a&&f[d]++}return!1}};a&&a.visit(c)},log:function(){for(var a=0;a<e.length;a++);}};require(["dojo/_base/connect"],function(a){a.subscribe("davinci/model/closeModel",c,c.closeModel)});return c})},"davinci/html/CSSFile":function(){define("dojo/_base/declare dojo/_base/lang davinci/html/CSSElement davinci/html/CSSRule davinci/html/CSSSelector system/resource davinci/Workbench".split(" "),function(p,m,h,g,f,e,c){return p("davinci.html.CSSFile",h,{constructor:function(a){this.elementType=
"CSSFile";m.mixin(this,a);this.options||(this.options={xmode:"style",css:!0,expandShorthand:!1});a=null;this.url&&this.loader?a=this.loader(this.url):this.url&&"app.css"===this.url&&this.setText("BODY {background-color: red!important;}");a&&this.setText(a)},save:function(a){return e.findResourceAsync(this.url).then(function(c){return c.setContents(this.getText(),a)}.bind(this))},close:function(){this.visit({visit:function(a){"CSSImport"==a.elementType&&a.close()}});require(["dojo/_base/connect"],
function(a){a.publish("davinci/model/closeModel",[this])})},addRule:function(a){var c=new g;c.setText(a);this.addChild(c);this.setDirty(!0);return c},setText:function(a){var c=this.children;this.children=[];this.errors=require("davinci/html/CSSParser").parse(a,this).errors;0<this.errors.length&&this.errors[this.errors.length-1].isException&&(this.children=c);this.includeImports&&this.children.forEach(function(a){"CSSImport"==a.elementType&&a.load()});this.onChange()},getText:function(a){a=a||{};a.indent=
0;return this.children.map(function(c){return c.getText(a)}).join("")},getCSSFile:function(){return this},getID:function(){return this.fileName},getMatchingRules:function(a,c,e){a=this._convertNode(a);c=c||[];e=e||[];for(var d=0;d<this.children.length;d++){var b=this.children[d];if("CSSRule"==b.elementType){var f=b.matches(a);if(f){for(var g=!1,h=0;h<e.length;h++)if(f>=e[h]){c.splice(h,0,b);e.splice(h,0,f);g=!0;break}g||(c.splice(0,0,b),e.splice(0,0,f))}}else"CSSImport"==b.elementType&&b.cssFile&&
b.cssFile.getMatchingRules(a,c,e)}return c},getRule:function(a){var c;if(!a)return[];a=f.parseSelectors(a);for(var e=0;e<this.children.length;e++){var d=this.children[e];if("CSSRule"==d.elementType){if(d.matchesSelectors(a)){c=d;break}}else"CSSImport"==d.elementType&&d.cssFile&&(c=d.cssFile.getRule(a)||c)}return c},getRules:function(a){a=f.parseSelectors(a);for(var c=[],e=0;e<this.children.length;e++){var d=this.children[e];"CSSRule"==d.elementType?d.matchesSelectors(a)&&c.push(d):"CSSImport"==d.elementType&&
d.cssFile&&(c=c.concat(d.cssFile.getRules(a)))}return c},getStyleValue:function(a,c){var e=[],d=[];c=this._convertNode(c);this.getMatchingRules(c,e,d);"string"==typeof a&&(a=[a]);return a.map(function(a){for(var b=0,c,f,g=0;g<e.length;g++)(f=e[g].getProperty(a))&&d[g]>b&&(c=f,b=d[g]);return c})}})})},"davinci/html/CSSElement":function(){define(["dojo/_base/declare","davinci/model/Model"],function(p,m){return p("davinci.html.CSSElement",m,{constructor:function(){"undefined"!=typeof pushComment&&null!==
pushComment&&(this.comment=pushComment,pushComment=null);this.elementType="CSSElement"},getLabel:function(){context={indent:0,noComments:!0};return this.getText(context)},onChange:function(h){if(this.parent)if(h)this.parent.onChange(h);else this.parent.onChange(this)},close:function(h){for(h=0;h<this.children;h++)this.children[h].close()},getCSSFile:function(){var h=this.getCSSRule();if(h)return h.parent},getCSSRule:function(){},_convertNode:function(h){if(dojo.isArray(h))return h;for(var g=[];h&&
"HTML"!=h.tagName;)g.push({tagName:h.tagName,id:h.id,classes:h.className&&h.className.split(" ")}),h=h.parentNode;return g},getID:function(){return this.parent.getID()+":"+this.startOffset+":"+this.getLabel()}})})},"davinci/html/CSSRule":function(){define(["dojo/_base/declare","davinci/html/CSSElement","davinci/html/CSSParser","davinci/html/CSSProperty"],function(p,m,h,g){return p("davinci.html.CSSRule",m,{constructor:function(){this.elementType="CSSRule";this.selectors=[];this.properties=[]},getText:function(f){var e=
"";f=f||[];this.comment&&!f.noComments&&(e+=this.comment.getText(f));for(var e=e+this.getSelectorText(f),e=e+" {",c=0;c<this.properties.length;c++)e=e+"\n    "+this.properties[c].getText(f);e+="\n}\n";this.postComment&&!f.noComments&&(e+=this.postComment.getText(f));return e},setText:function(f){require("davinci/html/CSSParser").parse(f,this);dojo.mixin(this,this.children[0]);this.startOffset=(this.parent?this.parent.endOffset:0)+1;this.setDirty(!0)},addProperty:function(f,e){f=new g(f,e,this);this.properties.push(f);
this.setDirty(!0);this.onChange()},insertProperty:function(f,e,c){var a;(a=this.getProperty(f))&&this.removeProperty(f);a=new g(f,e,this);this.properties.splice(c,0,a);this.setDirty(!0);this.onChange()},getSelectorText:function(f){for(var e="",c=0;c<this.selectors.length;c++)0<c&&(e+=", "),e+=this.selectors[c].getText(f);return e},matches:function(f){f=this._convertNode(f);for(var e,c=0;c<this.selectors.length;c++)if(0<=(e=this.selectors[c].matches(f)))return e},visit:function(f){if(!f.visit(this)){for(var e=
0;e<this.children.length;e++)this.children[e].visit(f);for(e=0;e<this.selectors.length;e++)this.selectors[e].visit(f)}f.endVisit&&f.endVisit(this)},hasSelector:function(f){for(var e=0;e<this.selectors.length;e++)if(this.selectors[e].getLabel()==f)return!0;return!1},matchesSelectors:function(f){for(var e=0;e<f.length;e++)for(var c=0;c<this.selectors.length;c++)if(this.selectors[c].matchesSelector(f[e]))return!0;return!1},getCSSRule:function(){return this},getLabel:function(){return this.getSelectorText({})},
getProperty:function(f){for(var e=0;e<this.properties.length;e++)if(f==this.properties[e].name)return this.properties[e]},hasProperty:function(f){for(var e=0;e<this.properties.length;e++)if(f==this.properties[e].name)return!0},getProperties:function(f){for(var e=[],c=0;c<this.properties.length;c++)f&&f!=this.properties[c].name||e.push(this.properties[c]);return e},setProperty:function(f,e){var c=this.getProperty(f);e?c?c.value=e:(c=new g,c.name=f,c.value=e,this.properties.push(c),c.parent=this):this.removeProperty(f);
this.setDirty(!0);this.onChange()},removeProperty:function(f){for(var e=0;e<this.properties.length;e++)f==this.properties[e].name&&this.properties.splice(e,1);this.setDirty(!0);this.onChange()},removeAllProperties:function(){this.properties=[];this.setDirty(!0);this.onChange()},removeStyleValues:function(f){for(var e=[],c=0;c<this.properties.length;c++){for(var a,g=0;g<f.length&&!a;g++)a=f[g]==this.properties[c].name;a||(e=this.properties[c])}this.properties=e;this.setDirty(!0);this.onChange()}})})},
"davinci/html/CSSParser":function(){define("dojo/_base/declare davinci/html/CSSSelector davinci/html/CSSCombinedSelector davinci/html/CSSRule davinci/html/CSSProperty davinci/html/CSSAtRule davinci/html/CSSImport davinci/model/parser/Tokenizer davinci/model/Comment".split(" "),function(p,m,h,g,f,e,c,a,q){var k=null,d=function(){function b(a,b,d){return function(c){return!a||/^\}/.test(c)?d:b?d+2*indentUnit:d+indentUnit}}var d=function(){function b(a,b){var f=a.next();if("@"==f)return a.nextWhileMatches(/[a-zA-Z0-9_-]/),
"css-at";if("/"==f&&a.equals("*"))return b(d),null;if("\x3c"==f&&a.equals("!"))return b(c),null;if("\x3d"==f)return"css-compare";if(!a.equals("\x3d")||"~"!=f&&"|"!=f){if('"'==f||"'"==f)return b(e(f)),null;if("#"==f)return a.nextWhileMatches(/[\w-]/),"css-hash";if("!"==f)return a.nextWhileMatches(/[ \t]/),a.nextWhileMatches(/\w/),"css-important";if(/\d/.test(f))return a.nextWhileMatches(/[\w.%]/),"css-unit";if(/[,.+>*\/]/.test(f))return"css-select-op";if(/[;{}:\[\]]/.test(f))return"css-punctuation";
a.nextWhileMatches(/[\w\\\-_]/);return"css-identifier"}a.next();return"css-compare"}function d(a,d){for(var c=!1;!a.endOfLine();){var e=a.next();if(c&&"/"==e){d(b);break}c="*"==e}return"css-comment"}function c(a,d){for(var c=0;!a.endOfLine();){var e=a.next();if(2<=c&&"\x3e"==e){d(b);break}c="-"==e?c+1:0}return"css-comment"}function e(a){return function(d,c){for(var e=!1;!d.endOfLine();){var f=d.next();if(f==a&&!e)break;e=!e&&"\\"==f}e||c(b);return"css-string"}}return function(d,c){return a.tokenizer(d,
c||b)}}();return{make:function(a,c){c=c||0;var e=d(a),f=!1,g=!1,h=!1,k={next:function(){var a=e.next(),d=a.style,k=a.content;"css-hash"==d&&(d=a.style=g?"css-colorcode":"css-identifier");"css-identifier"==d&&(g?a.style="css-value":f||h||(a.style="css-selector"));"\n"==k&&(a.indentation=b(f,g,c));"{"==k&&"@media"==h?h=!1:"{"==k?f=!0:"}"==k?f=g=h=!1:";"==k?g=h=!1:f&&"css-comment"!=d&&"whitespace"!=d?g=!0:f||"css-at"!=d||(h=k);return a},copy:function(){var a=f,b=g,c=e.state;return function(h){e=d(h,
c);f=a;g=b;return k}}};return k},electricChars:"}"}}();d.parse=function(b,n){function r(){var a;u=B.next();for(var b=!1;"css-comment"==u.style||"whitespace"==u.style;){if("css-comment"==u.style||b)k||(k=new q),a=u.content,0===u.content.indexOf("/*")&&(a=a.substring(2),b=!0,k.addComment("block",void 0,void 0,"")),-1<a.lastIndexOf("*/")&&a.lastIndexOf("*/")==a.length-2&&(a=a.substring(0,a.length-2),b=!1),k.appendComment(a);u=B.next()}return u}function v(){x=new m;x.startOffset=u.offset;x.parent=A;D?
(D.selectors.push(x),x.parent=D):A.selectors.push(x)}function p(){var a=x;a.endOffset=u.offset-1;D||(D=new h,D.parent=A,D.selectors.push(a),x.startOffset=a.startOffset,A.selectors[A.selectors.length-1]=D);v();D.combiners.push(F);F=" "}var y,w;"string"==typeof b?y=a.stringStream({next:function(){if(1==++this.count)return b;throw StopIteration;},count:0,text:b}):(y=b,w=!0);var B=d.make(y),u,x,D,F=" ",C=[],I=[],A,H;try{do switch(r(),u.style){case "css-selector":case "css-select-op":if(w&&"\x3c"==u.content)throw y.push("\x3c"),
StopIteration;A=new g;I.push(A);A.startOffset=u.offset;n&&n.addChild(A,void 0,!0);H=!1;D=void 0;F=" ";v();a:for(;;){switch(u.style){case "css-select-op":switch(u.content){case ",":D=void 0;v();break;case ".":H&&p();r();x.cls=x.cls?x.cls+"."+u.content:u.content;H=u.value.length>u.content.length;break;case "*":(x.element||x.cls)&&p();x.element="*";break;case "+":case "\x3e":F=u.content,p()}break;case "css-selector":"css-identifier"==u.type?((x.element||x.cls||H)&&p(),x.element=u.content):"css-hash"==
u.type&&((x.id||H)&&p(),x.id=u.content.substring(1));H=u.value.length>u.content.length;break;case "css-punctuation":if("{"==u.content)break a;else":"==u.content?(r(),":"==u.content?(r(),x.pseudoElement=u.content):(x.pseudoRule=u.content,H=!0)):"["==u.content&&(r(),x.attribute={name:u.content},r(),"\x3d"===u.content||"~\x3d"===u.content||"|\x3d"===u.content)&&(x.attribute.type=u.content,r(),x.attribute.value=u.content.substring(1,u.content.length-1),r())}r()}k&&(A.comment=k,k=null);for(x.endOffset=
u.offset-1;"}"!=r().content;){var N=u.offset,L=u.content,J=!1;"css-hash"==u.type?(r(),"css-identifier"==u.type?L+=u.content:J=!0):"css-identifier"!=u.type&&("*"!=u.content?C.push("expecting identifier around "+x.getText()+"{ "+G.name+": "+propery.value):(r(),L+=u.content));var G=new f;G.startOffset=N;G.parent=A;k&&(G.comment=k,k=null);A.properties.push(G);A.addChild(G,void 0,!0);G.name=L;J||":"!=r().content&&C.push("expecting ':' "+x.getText()+"{ "+G.name+": "+propery.value);r();G.value=u.value;if("url"==
G.value){for(;")"!=r().content;)G.value+=u.value;G.value+=u.value}for(;";"!=r().content&&"}"!=u.content;)G.value+=u.value;k&&(G.postComment=k,k=null);G.endOffset=u.offset-1;if("}"==u.content)break}k&&(G.postComment=k,k=null);A.endOffset=u.offset;break;case "css-at":var E=u.content.substring(1),K="import"==E?new c:new e;K.startOffset=u.offset;n&&n.addChild(K,void 0,!0);if("import"==E)J=K,r(),"url"==u.content&&(J.isURL=!0,r(),r()),J.url=u.content.substring(1,u.content.length-1),J.isURL&&r(),r();else if(0<=
E.indexOf("keyframes")){var O=J="",P=!1,Q="\t\t";r();J=u.content;"."==J&&(r(),J+=u.content);r();K.value=u.content+"\n";r();if(0<=u.content.indexOf("from")||0<=u.content.indexOf("to")||0<=u.content.indexOf("%"))a:for(;;){K.value+="\t"+u.content+" ";r();for(K.value+=u.content+"\n";"}"!=r().content;){P&&(Q="\t\t",P=!1);if(";"==u.content)O="\n",P=!0;else if(":"==u.content||")"==u.content)O=" ";K.value+=Q+u.content+O;Q=O=""}K.value+="\t"+u.content+"\n";r();if("}"==u.content)break a}else C.push("inside keyframes decl expecting from/to blocks or nn% blocks");
K.value+=u.content;K.name=E+" "+J}else for(K.name=E,K.value="";";"!=r().content;)K.value+=u.content;K.endOffset=u.offset}while(1)}catch(M){k&&A&&(A.postComment=k,k=null)}return{errors:C,model:I}};return d})},"davinci/html/CSSSelector":function(){define(["require","dojo/_base/declare","davinci/html/CSSElement"],function(p,m,h){m=m("davinci.html.CSSSelector",h,{constructor:function(){this.elementType="CSSSelector"},matchesSelector:function(g){if(g.elementType==this.elementType&&this.id==g.id&&this.cls==
g.cls&&this.element==g.element&&this.pseudoRule==g.pseudoRule)return!0},getText:function(g){g="";this.element&&(g+=this.element);this.id&&(g=g+"#"+this.id);this.cls&&(g=g+"."+this.cls);this.pseudoRule&&(g=g+":"+this.pseudoRule);this.pseudoElement&&(g=g+"::"+this.pseudoElement);this.attribute&&(g=g+"["+this.attribute.name,this.attribute.type&&(g=g+this.attribute.type+'"'+this.attribute.value+'"'),g+="]");return g},matches:function(g,f){f=g[f||0];g=0;var e=!1;if(this.id){if(this.id!=f.id)return-1;g+=
100;e=!0}if(this.element){if("*"!=this.element){if(this.element!=f.tagName&&this.element.toUpperCase()!=f.tagName)return-1;g+=1}e=!0}if(this.cls&&f.classes){f=f.classes;if(0<=this.cls.indexOf(".")){for(var e=this.cls.split("."),c=0;c<e.length;c++){for(var a=!1,h=0;h<f.length&&!(a=f[h]==e[c]);h++);if(!a)return-1}g+=10*e.length}else{a=!1;for(h=0;h<f.length&&!(a=f[h]==this.cls&&!this.pseudoRule);h++);if(!a)return-1;g+=10}e=!0}return e?g:-1},getCSSRule:function(){return"CSSRule"==this.parent.elementType?
this.parent:this.parent.parent}});m.parseSelectors=function(g){if("string"==typeof g){g+="{}";var f=new (p("davinci/html/CSSFile"));f.setText(g);return f.children[0].selectors}return g};return m})},"davinci/html/CSSCombinedSelector":function(){define(["dojo/_base/declare","davinci/html/CSSElement"],function(p,m){return p("davinci.html.CSSCombinedSelector",m,{constructor:function(){this.selectors=[];this.combiners=[];this.elementType="CSSCombinedSelector"},matchesSelector:function(h){if(h.elementType==
this.elementType&&h.selectors.length==this.selectors.length){for(var g=0;g<this.selectors.length;g++)if(this.combiners[g]!=h.combiners[g]||!this.selectors[g].matchesSelector(h.selectors[g]))return!1;return!0}},getText:function(h){for(var g="",f=0;f<this.selectors.length-1;f++)g+=this.selectors[f].getText(h),g=" "!=this.combiners[f]?g+(" "+this.combiners[f]+" "):g+this.combiners[f];return g+=this.selectors[this.selectors.length-1].getText(h)},matches:function(h){for(var g=this.selectors.length-1,f=
0,e=0;e<h.length;e++){var c;if(0<=(c=this.selectors[g].matches(h,e))&&(f+=c,g--,0>g))return f;if(0==e&&0>c)return-1}},visit:function(h){if(!h.visit(this)){for(var g=0;g<this.children.length;g++)this.children[g].visit(h);for(g=0;g<this.selectors.length;g++)this.selectors[g].visit(h)}h.endVisit&&h.endVisit(this)},getCSSRule:function(){return this.parent}})})},"davinci/html/CSSProperty":function(){define(["dojo/_base/declare","davinci/html/CSSElement"],function(p,m){return p("davinci.html.CSSProperty",
m,{constructor:function(h,g,f){this.elementType="CSSProperty";this.name=h||"";this.value=g||"";this.parent=f;this.expanded=[];this.lengthValues=[]},getValue:function(){return this.value},getText:function(h){var g="";this.comment&&!h.noComments&&(g+="\n  "+this.comment.getText(h));g+=this.name+" : "+this.value;this.isNotImportant&&(g+=" !important");g+=";";this.postComment&&!h.noComments&&(g+=this.postComment.getText(h));return g},getCSSRule:function(){return this.parent},addProperty:function(h,g){h=
new CSSProperty(h,g,this);this.properties.push(h)},getURL:function(){if(this.url){var h=new davinci.model.Path(this.getCSSFile().url),h=h.getParentPath().append(this.url);return h.toString()}}})})},"davinci/html/CSSAtRule":function(){define(["dojo/_base/declare","davinci/html/CSSElement"],function(p,m){return p("davinci.html.CSSAtRule",m,{constructor:function(){this.elementType="CSSAtRule"},getCSSFile:function(){return this.parent},getText:function(h){s="@";return s=s+this.name+" "+this.value+"\n"}})})},
"davinci/html/CSSImport":function(){define(["dojo/_base/declare","davinci/html/CSSElement","davinci/model/Path","davinci/html/CSSFile"],function(p,m,h,g){return p("davinci.html.CSSImport",m,{constructor:function(){this.elementType="CSSImport"},getCSSFile:function(){return this.parent},setUrl:function(f){this.url=f},visit:function(f){if(!f.visit(this)){for(var e=0;e<this.children.length;e++)this.children[e].visit(f);this.cssFile&&this.cssFile.visit(f)}f.endVisit&&f.endVisit(this)},getText:function(f){s=
"@import ";return s=this.isURL?s+('url("'+this.url+'");'):s+('"'+this.url+'";')},close:function(f){require("davinci/model/Factory").closeModel(this.cssFile);this.connection&&dojo.disconnect(this.connection);delete this.connection},load:function(f){for(var e=this.parent;e&&!e.url&&!e.fileName;)e=e.parent;e=new h(e.url||e.fileName);e=e.getParentPath().append(this.url);e=e.toString();this.cssFile=require("davinci/model/Factory").getModel({url:e,loader:this.parent.loader,includeImports:this.parent.includeImports||
f});this.cssFile.relativeURL=this.url;this.connection=dojo.connect(this.cssFile,"onChange",this.parent,"onChange")}})})},"davinci/model/parser/Tokenizer":function(){define(["dojo/_base/declare","davinci/js/JSExpression"],function(p,m){return{stringStream:function(h){function g(){for(;e==f.length;){a+=f;f="";e=0;try{f=h.next()}catch(q){if(q!=StopIteration)throw q;return!1}}return!0}var f="",e=0,c=0,a="";return{peek:function(){return g()?f.charAt(e):null},next:function(){if(!g()){if(0<a.length)throw"End of stringstream reached without emptying buffer ('"+
a+"').";throw StopIteration;}return f.charAt(e++)},get:function(){var g=a;a="";0<e&&(g+=f.slice(0,e),f=f.slice(e),e=0);c+=g.length;return g},getOffset:function(){return c},push:function(a){f=f.slice(0,e)+a+f.slice(e);c-=a.length},lookAhead:function(c,g,d,b){function k(a){return b?a.toLowerCase():a}c=k(c);var q=!1,m=a,p=e;for(d&&this.nextWhileMatches(/[\s\u00a0]/);;){d=e+c.length;var y=f.length-e;if(d<=f.length){q=c==k(f.slice(e,d));e=d;break}else if(c.slice(0,y)==k(f.slice(e))){a+=f;f="";try{f=h.next()}catch(w){if(w!=
StopIteration)throw w;break}e=0;c=c.slice(y)}else break}q&&g||(f=a.slice(m.length)+f,e=p,a=m);return q},lookAheadRegex:function(a,c){if("^"!=a.source.charAt(0))throw Error("Regexps passed to lookAheadRegex must start with ^");for(;-1==f.indexOf("\n",e);)try{f+=h.next()}catch(d){if(d!=StopIteration)throw d;}(a=f.slice(e).match(a))&&c&&(e+=a[0].length);return a},more:function(){return null!==this.peek()},applies:function(a){var c=this.peek();return null!==c&&a(c)},nextWhile:function(a){for(var c;null!==
(c=this.peek())&&a(c);)this.next()},matches:function(a){var c=this.peek();return null!==c&&a.test(c)},nextWhileMatches:function(a){for(var c;null!==(c=this.peek())&&a.test(c);)this.next()},equals:function(a){return a===this.peek()},endOfLine:function(){var a=this.peek();return null==a||"\n"==a}}},tokenizer:function(h,g){function f(c){return"\n"!=c&&/^[\s\u00a0]*$/.test(c)}var e={state:g,take:function(c){"string"==typeof c&&(c={style:c,type:c});c.offset=h.getOffset();c.content=(c.content||"")+h.get();
/\n$/.test(c.content)||h.nextWhile(f);c.value=c.content+h.get();return c},next:function(){if(!h.more())throw StopIteration;var c;if(h.equals("\n"))return h.next(),this.take("whitespace");if(h.applies(f))c="whitespace";else for(;!c;)c=this.state(h,function(a){e.state=a});return this.take(c)}};return e}}})},"davinci/js/JSExpression":function(){define(["dojo/_base/declare","davinci/js/JSElement"],function(p,m){return p("davinci.js.JSExpression",m,{constructor:function(){this.elementType="JSExpression"},
getText:function(){var h="";this.comment&&(h+=this.printNewLine(context)+this.comment.getText(context));this.label&&(h+=this.printNewLine(context)+this.label.getText(context));return h},add:function(h){}})})},"davinci/js/JSElement":function(){define(["dojo/_base/declare","davinci/js/JSModel"],function(p,m){var h=null,g=null;return p("davinci.js.JSElement",m,{constructor:function(){this.elementType="JSElement";null!==h&&(this.comment=h,h=null);null!==g&&(this.label=g,g=null)},printNewLine:function(f){for(var e=
"\n",c=0;c<f.indent;c++)e+=" ";return e},printStatement:function(f,e){return this.printNewLine(f)+e.getText(f)+(e.nosemicolon?"":";")},add:function(f){this.addChild(f)},init:function(f,e,c){},getLabel:function(){context={indent:0};return this.getText(context)},getID:function(){return this.parent.getID()+":"+this.startLine+":"+this.getLabel()},getSyntaxPositions:function(f){function e(c,e,d,b){"undefined"!=typeof f&&f!=c||a.push({line:c,col:e,length:d,type:b})}function c(c,e,d){"undefined"!=typeof f&&
f!=c[0]||a.push({line:c[0],col:c[1],length:e,type:d})}var a=[];this.visit({visit:function(a){"JSFunction"==a.elementType?(e(a.startLine,a.startCol,8,"keyword"),c(a.leftParenPos,1,"delimiter"),c(a.rightParenPos,1,"delimiter"),c(a.leftBracePos,1,"delimiter"),c(a.rightBracePos,1,"delimiter")):"JSVariableDeclaration"==a.elementType?e(a.startLine,a.startCol,3,"keyword"):"JSVariableFragment"==a.elementType?a.equalPos?c(a.equalPos,1,"operator"):e(a.startLine,a.startCol,1,"name"):"JSNameReference"==a.elementType&&
e(a.startLine,a.startCol,a.endCol-a.startCol,"name")},endVisit:function(a){return!0}});return a}})})},"davinci/js/JSModel":function(){define(["dojo/_base/declare","davinci/model/Model"],function(p,m){davinci.js||(davinci.js={});return p("davinci.js.JSModel",m,{})})},"davinci/model/Comment":function(){define(["dojo/_base/declare","davinci/model/Model"],function(p,m){return p("davinci.model.Comment",m,{constructor:function(){this.elementType="Comment";this.nosemicolon=!0},addComment:function(h,g,f,
e){null==this.comments&&(this.comments=[]);this.comments[this.comments.length]={commentType:h,start:g,stop:f,s:e}},appendComment:function(h){var g=this.comments[this.comments.length-1];g.s+=h;g.stop+=h.length},getText:function(h){h="";for(var g=0;g<this.comments.length;g++)"line"==this.comments[g].commentType?h+="//"+this.comments[g].s+"\n":"block"==this.comments[g].commentType&&(h+="/*"+this.comments[g].s+"*/\n");return h}})})},"davinci/js/JSFile":function(){define(["dojo/_base/declare","davinci/js/JSElement"],
function(p,m){return p("davinci.js.JSFile",m,{constructor:function(h){this.elementType="JSFile";this.nosemicolon=!0;this._textContent="";h&&(this.origin=h)},getText:function(h){return this._textContent},setText:function(h){this._textContent=h},getLabel:function(){return this.fileName},getID:function(){return this.fileName},visit:function(h){if(!h.visit(this))for(var g=0;g<this.children.length;g++)this.children[g].visit(h);h.endVisit&&h.endVisit(this)}})})},"davinci/html/HTMLFile":function(){define("dojo/_base/declare davinci/html/HTMLItem davinci/html/HTMLParser davinci/html/CSSSelector davinci/html/HTMLElement davinci/html/CSSImport davinci/html/CSSFile davinci/model/Model davinci/model/Path".split(" "),
function(p,m,h,g,f,e,c,a,q){return p("davinci.html.HTMLFile",m,{constructor:function(a){this.url=this.fileName=a;this.elementType="HTMLFile";this._loadedCSS={};this._styleElem=null},save:function(a){var d,b=system.resource.findResource(this.fileName);this.getText();b?(d=this.getText(),d=b.setContents(d,a)):console.error("couldnt find file in resources : "+this.fileName);return d},getText:function(a){a=a||{};a.indent=0;for(var d="",b=0;b<this.children.length;b++){var c=this.children[b],d=d+c.getText(a);
"HTMLComment"==c.elementType&&(d+=this._addWS(c._fmLine,c._fmIndent))}return d},getDocumentElement:function(a){for(a=0;a<this.children.length;a++)if("html"==this.children[a].tag)return this.children[a]},findElement:function(a){var d=this.getDocumentElement();if(d)return d.findElement(a)},getMatchingRules:function(a,d){var b={visit:function(b){if("CSSFile"==b.elementType){var d=[];b=b.getMatchingRules(a,[],d);for(var c=0;c<b.length;c++)for(var e=0;e<this.matchLevels.length;e++)if(d[c]>this.matchLevels[e]){this.matchLevels.splice(e,
0,d[c]);this.rules.splice(e,0,b[c]);break}0==this.rules.length&&(this.rules=b,this.matchLevels=d);return!0}return!1},matchLevels:[],rules:[]};this.visit(b);return d?{rules:b.rules,matchLevels:b.matchLevels}:b.rules},getRule:function(a){if(!a)return[];var d=g.parseSelectors(a);a={visit:function(a){return"CSSFile"==a.elementType?(a=a.getRule(d),this.rules=this.rules.concat(a||[]),!0):!1},rules:[]};this.visit(a);return a.rules},setText:function(a,d){this.visit({visit:function(a){"CSSImport"==a.elementType&&
a.close()}});this.children=[];this._styleElem=null;a=h.parse(a||"",this);var b="";d||0!=a.errors.length||(b=this.getText(),this.children=[],a=h.parse(b,this));this.endOffset=a.endOffset;this.errors=a.errors;var c=this;d||this.visit({visit:function(a){"CSSImport"!=a.elementType||a.cssFile||(a.load(!0),dojo.connect(a.cssFile,"onChange",null,dojo.hitch(c,"onChange")))}});this.onChange()},hasStyleSheet:function(a){for(var d=this.find({elementType:"CSSImport"}),b=0;b<d.length;b++)if(d[b].url==a)return!0;
return!1},addStyleSheet:function(a,d,b,c,g){var h=new q(this.url||this.fileName),h=h.getParentPath().append(a),h=h.toString();b||(this._loadedCSS[h]=require("davinci/model/Factory").getModel({url:h,includeImports:!0,loader:g}));d&&this._loadedCSS[h].setText(d);this.onChange();this._styleElem||(d=this.find({elementType:"HTMLElement",tag:"head"},!0),g=d.getChildElement("style"),g||(g=new f("style"),d.addChild(g)),this._styleElem=g);d=new e;d.parent=this;d.url=a;c?this._styleElem.insertBefore(d,c):this._styleElem.addChild(d);
b||d.load(!0)},close:function(){this.visit({visit:function(a){"CSSImport"==a.elementType&&a.close()}});require("davinci/model/Factory").closeModel(this)},getLabel:function(){return"\x3c\x3e"},getID:function(){return this.fileName},updatePositions:function(c,d){(new a(this)).updatePositions(this,c,d);this.visit({visit:function(a){if(a.endOffset<c)return!0;"HTMLElement"==a.elementType&&a.startTagOffset>c&&(a.startTagOffset+=d)}})},mapPositions:function(a){var d=this.getText();a=a.getText();d=d.indexOf(a);
a=d+a.lastIndexOf("\x3e")+1;return{startOffset:d,endOffset:a}},reportPositions:function(){this.visit({visit:function(a){}})},evaluate:function(a){if("/"!==a.charAt(0))console.error("invalid XPath string");else{var d=this;a.substr(1).split("/").forEach(function(a){a=a.match(this._RE_XPATH);var b=a[1];a=a[2];var c;c=d.children.filter(function(a){return a.tag===b});!a&&1<c.length?console.error("invalid XPath string; no index specified for multiple elements"):d=a?c[a-1]:c[0]},this);return d}},_RE_XPATH:/(\w+)(?:\[(\d+)\])?/})})},
"davinci/html/HTMLParser":function(){define("dojo/_base/declare davinci/html/HTMLText davinci/html/HTMLElement davinci/html/HTMLAttribute davinci/html/HTMLComment davinci/html/PHPBlock davinci/model/parser/Tokenizer davinci/html/CSSParser".split(" "),function(p,m,h,g,f,e,c,a){var q=function(){var a={autoSelfClosers:{br:!0,img:!0,hr:!0,link:!0,input:!0,meta:!0,col:!0,frame:!0,base:!0,area:!0},doNotIndent:{pre:!0,"!cdata":!0}},d={autoSelfClosers:{},doNotIndent:{"!cdata":!0}},b=a,e=!1,f=function(){function a(a,
d){var c=a.next();if("\x3c"==c){if(a.equals("!"))return a.next(),a.equals("[")?a.lookAhead("[CDATA[",!0)?(d(e("xml-cdata","]]\x3e")),null):"xml-text":a.lookAhead("--",!0)?(d(e("xml-comment","--\x3e")),null):a.lookAhead("DOCTYPE",!0)?(a.nextWhileMatches(/[\w\._\-]/),d(e("xml-doctype","\x3e")),"xml-doctype"):"xml-text";if(a.equals("?")){a.next();if(a.lookAhead("php",!0,!1,!0))return d(f("php-block","?\x3e")),null;a.nextWhileMatches(/[\w\._\-]/);d(e("xml-processing","?\x3e"));return"xml-processing"}a.equals("/")&&
a.next();d(b);return"xml-punctuation"}if("\x26"==c){for(;!a.endOfLine()&&";"!=a.next(););return"xml-entity"}a.nextWhileMatches(/[^&<\n]/);return"xml-text"}function b(b,c){var e=b.next();if("\x3e"==e)return c(a),"xml-punctuation";if(/[?\/]/.test(e)&&b.equals("\x3e"))return b.next(),c(a),"xml-punctuation";if("\x3d"==e)return"xml-punctuation";if(/[\'\"]/.test(e))return c(d(e)),null;b.nextWhileMatches(/[^\s\u00a0=<>\"\'\/?]/);return"xml-name"}function d(a){return function(d,c){for(;!d.endOfLine();)if(d.next()==
a){c(b);break}return"xml-attribute"}}function e(b,d){return function(c,e){for(;!c.endOfLine();){if(c.lookAhead(d,!0)){e(a);break}c.next()}return b}}function f(b,d){return function(c,e){for(var f=!1;!c.endOfLine();){if(c.lookAhead(d,!0)){f=!0;e(a);break}c.next()}if(!f&&c.endOfLine())c.next();else{for(;c.lookAheadRegex(/^[\ \t]/,!0););c.endOfLine()&&c.next()}return b}}return function(b,d){return c.tokenizer(b,d||a)}}();return{make:function(a){function d(a){for(var b=a.length-1;0<=b;b--)K.push(a[b])}
function c(){d(arguments);R=!0}function g(){d(arguments);R=!1}function h(){E.style+=" xml-error"}function k(a){return function(b,d){d==a?c():(h(),c(arguments.callee))}}function n(a,c){var d=b.doNotIndent.hasOwnProperty(a)||M&&M.noIndent;M={prev:M,name:a,indent:P,startOfLine:c,noIndent:d}}function q(a){return function(b,c){var d=a;if(d&&d.noIndent)return c;if(e&&/<!\[CDATA\[/.test(b))return 0;d&&/^<\//.test(b)&&(d=d.prev);for(;d&&!d.startOfLine;)d=d.prev;return d?d.indent+indentUnit:0}}function m(){return g(r,
m)}function r(a,b){"\x3c"==b?c(v,N,H(1==O)):"\x3c/"==b?c(p,k("\x3e")):("xml-cdata"==a?(M&&"!cdata"==M.name||n("!cdata"),/\]\]>$/.test(b)&&(M=M.prev)):T.hasOwnProperty(a)||h(),c())}function v(a,b){"xml-name"==a?(Q=b.toLowerCase(),E.style="xml-tagname",c()):(Q=null,g())}function p(a,b){"xml-name"==a&&(E.style="xml-tagname",M&&b.toLowerCase()==M.name?M=M.prev:h());c()}function H(a){return function(d,e){"/\x3e"==e||"\x3e"==e&&b.autoSelfClosers.hasOwnProperty(Q)?c():"\x3e"==e?(n(Q,a),c()):(h(),c(arguments.callee))}}
function N(a){"xml-name"==a?(E.style="xml-attname",c(L,N)):g()}function L(a,b){"\x3d"==b?c(J):"\x3e"==b||"/\x3e"==b?g(H):g()}function J(a){"xml-attribute"==a?c(J):g()}var G=f(a),E,K=[m],O=0,P=0,Q=null,M=null,R,T={"xml-text":!0,"xml-entity":!0,"xml-comment":!0,"xml-processing":!0,"xml-doctype":!0,"php-block":!0};return{indentation:function(){return P},next:function(){E=G.next();"whitespace"==E.style&&0==O?P=E.value.length:O++;"\n"==E.content&&(P=O=0,E.indentation=q(M));if("whitespace"==E.style||"xml-comment"==
E.type||"php-block"==E.type)return E;for(;;)if(R=!1,K.pop()(E.style,E.content),R)return E},copy:function(){var a=K.concat([]),b=G.state,d=M,c=this;return function(e){K=a.concat([]);O=P=0;M=d;G=f(e,b);return c}}}},electricChars:"/",configure:function(c){null!=c.useHTMLKludges&&(b=c.useHTMLKludges?a:d);c.alignCDATA&&(e=c.alignCDATA)}}}();return{parse:function(k,d){function b(a,b){F=new m;F.wasParsed=!0;F.startOffset=b;D[D.length-1].addChild(F,void 0,!0);F.value=a}function n(a){a.content!=a.value&&b(a.value.substring(a.content.length),
a.offset+a.value.length)}function r(a,b){a=a.split("\n");var d=a[a.length-1].length;b.children.length?(lastElement=b.children[b.children.length-1],lastElement._fmLine=a.length-1,lastElement._fmIndent=d):(b._fmChildLine=a.length-1,b._fmChildIndent=d)}function v(){if(null!=F&&!F.value.match(/\S/)){var a=D[D.length-1];a.children.pop();r(F.value,a)}F=null}function p(){var b=D[D.length-1];w.nextWhileMatches(/[\s\u00a0]/);var d=w.get();null!=F?(F.value+=d,v()):r(d,b);a.parse(w,b)}function y(a){for(u=B.next();a&&
"whitespace"==u.style;)u=B.next();return u}var w=c.stringStream({next:function(){if(1==++this.count)return k;throw StopIteration;},count:0,text:k}),B=q.make(w),u,x=[],D=[];D.push(d);var F,C,I;try{do switch(u=B.next(),u.style){case "xml-punctuation":v();if("\x3c"==u.content){var A=new h;A.wasParsed=!0;A.startOffset=u.offset;D[D.length-1].addChild(A,void 0,!0);y(!0);for("xml-tagname"==u.style?A.tag=u.content:x.push("expecting tag name");"xml-attname"==(u=y(!0)).style;){var H=new g;H.wasParsed=!0;A.attributes.push(H);
H.name=u.content;H.startOffset=u.offset;y(!0);if("\x3d"==u.content)if(u=B.next(),"xml-attribute"==u.style){var N=u.content;H.setValue(N.substring(1,N.length-1))}else x.push("expecting attribute value");else H.noValue=!0,H.setValue(!0);H.endOffset=u.offset-1;if(H.noValue&&"xml-attname"!=u.style)break}"xml-punctuation"!=u.style?x.push("expecting \x3e"):(A.startTagOffset=u.offset,"\x3e"==u.content?D.push(A):(A.noEndTag=!0,A=D[D.length-1]),n(u));"style"==A.tag&&p()}else"\x3c/"==u.value&&(d=A,u=B.next(),
"script"==A.tag&&(A.script=A.getElementText()),D.pop(),A=D[D.length-1],u=B.next(),d.endOffset=u.offset,n(u));I=null;break;case "xml-text":case "whitespace":case "xml-entity":C?C.value+=u.value:I?I.value+=u.value:F?F.value+=u.value:b(u.value,u.offset);I=null;break;case "xml-comment":v();var L=new f;L.wasParsed=!0;L.startOffset=u.offset;L.value=u.content.substring(4,u.content.length-3);L.endOffset=u.offset+u.content.length;D[D.length-1].addChild(L,void 0,!0);I=null;break;case "php-block":v();var J=
new e;J.wasParsed=!0;J.startOffset=u.offset;J.value=u.content;J.endOffset=u.offset+u.content.length;D[D.length-1].addChild(J,void 0,!0);I=J;break;case "xml-doctype":C||(v(),L=new f,L.wasParsed=!0,L.startOffset=u.offset,L.value=u.value.substring(2),D[D.length-1].addChild(L,void 0,!0),L.isProcessingInstruction=!0,u=B.next());var G=u.content.length-1;"\x3e"==u.content.charAt(u.content.length-1)?(L.endOffset=u.offset+u.content.length,L.value+=u.content.substring(0,G),n(u),C=void 0):(C=L,L.value+=u.content);
I=null}while(1)}catch(E){}return{errors:x,endOffset:u?u.offset:0}}}})},"davinci/html/PHPBlock":function(){define(["dojo/_base/declare","davinci/html/HTMLItem"],function(p,m){return p("davinci.html.PHPBlock",m,{constructor:function(h){this.elementType="PHPBlock";this.value=h||""},getText:function(h){return h.excludeIgnoredContent?"":this.value}})})},"davinci/html/ui/HTMLOutline":function(){define(["dojo/_base/declare","davinci/html/ui/HTMLOutlineModel"],function(p,m){return p("davinci/html/ui/HTMLOutline",
null,{constructor:function(h){this._htmlModel=h},getModel:function(){return this._model=new m(this._htmlModel)}})})},"davinci/html/ui/HTMLOutlineModel":function(){define(["dojo/_base/declare"],function(p){return p("davinci.html.ui.HTMLOutlineModel",null,{constructor:function(m){this.root=m;this.subscription=dojo.subscribe("/davinci/ui/modelChanged",this,this._modelChanged)},getRoot:function(m,h){m(this.root)},getIdentity:function(m){return m.getID()},getLabel:function(m){return m.getLabel().replace("\x3c",
"\x26lt")},_getChildren:function(m){var h=[];"HTMLFile"!=m.elementType&&"HTMLElement"!=m.elementType||dojo.forEach(m.children,function(g){"HTMLElement"==g.elementType&&h.push(g)});return h},mayHaveChildren:function(m){return 0<m.children.length},getChildren:function(m,h,g){h(this._getChildren(m))},_modelChanged:function(){this.onChildrenChange(this.root,this._getChildren(this.root))},destroy:function(){dojo.unsubscribe(this.subscription)}})})},"davinci/ve/VisualEditor":function(){define("dojo/_base/declare dojo/dom-class dojo/dom-construct dojo/promise/all ../Runtime ../Workbench ../model/Path ./metadata ./Context preview/silhouetteiframe preview/loadIndicator ./widget ../XPathUtils ../html/HtmlFileXPathAdapter ./utils/GeomUtils xide/utils xide/registry".split(" "),
function(p,m,h,g,f,e,c,a,q,k,d,b,n,r,v,z,y){return p("davinci.ve.VisualEditor",null,{deviceName:"none",_orientation:"portrait",_subscriptions:[],delite:!1,context:null,getContext:function(){return this.context},template:{},constructor2:function(b,d,c){this._pageEditor=d;this.template=c||{};this.contentPane=dijit.getEnclosingWidget(b)||y.byId(b.id);this.loadingDiv=h.create("div",{className:"loading",innerHTML:dojo.replace("\x3ctable\x3e\x3ctr\x3e\x3ctd\x3e\x3cspan\x3e\x26nbsp;\x26nbsp;\x26nbsp;\x26nbsp;\x26nbsp;\x3c/span\x3e\x26nbsp;{0}\x3c/td\x3e\x3c/tr\x3e\x3c/table\x3e",
["Loading..."])},this.contentPane.domNode.parentNode,"first");m.add(this.contentPane.domNode,"fullPane");b=h.create("div",{className:"silhouette_div_container"},this.contentPane.domNode);h.create("span",{className:"silhouetteiframe_object_container"},b);this.silhouetteiframe=new k({rootNode:b,margin:20});var e=this;this.contentPane.connect(this.contentPane,"resize",function(a){var b=dojo.query(".designCP iframe",this._pageEditor.domNode)[0];b&&b.contentDocument&&b.contentDocument.body&&(e._resizeBody(b.contentDocument.body,
a),setTimeout(function(){var a=e.getContext();a.clearCachedWidgetBounds();a.updateFocusAll();e._registerScrollHandlers()},100))}.bind(this));this._pageEditor.deferreds=g(a.getDeferreds());this._subscriptions.push(dojo.subscribe("/davinci/ui/editorSelected",this._editorSelected.bind(this)));this._subscriptions.push(dojo.subscribe("/davinci/ui/context/loaded",this._contextLoaded.bind(this)))},_setContentRaw:function(a,b,d){this.fileName=a;this.basePath=new c(a);if(this.initialSet)this.context.setSource(b,
this.context._restoreStates,this.context);else{var e=f.getUserWorkspaceUrl();0==a.indexOf("./")&&(a=a.substring(2,a.length));a=e+a;a=e;this._handles=[];e=dojo.query(".silhouette_div_container",this.contentPane.containerNode)[0];$(this.contentPane.containerNode).find(".silhouette_div_container");e={editor:this._pageEditor,visualEditor:this,containerNode:e,model:b,template:this.template,baseURL:a,iframeattrs:{"class":"silhouetteiframe_iframe"},ctx:this._pageEditor.ctx};this.context=this.template&&this.template.contextClass?
new (z.getObject(this.template.contextClass))(e):new q(e);this.context._commandStack=this._commandStack;this._commandStack._context=this.context;try{this._handles.push(dojo.connect(this.context,"activate",this,this.update))}catch(D){debugger}this._handles.push(dojo.connect(this.context,"onContentChange",this,this.onContentChange));this._handles.push(dojo.connect(this.context,"onSelectionChange",this,this.onContentChange));this.title=dojo.doc.title;this.context._setSource(b,this._connectCallback,this,
d);this.context.getFlowLayout();this.initialSet=!0}},constructor:function(b,d,c){this._pageEditor=d;this.template=c||{};this.contentPane=dijit.getEnclosingWidget(b)||y.byId(b.id);b=this.contentPane.containerNode;this.loadingDiv=h.create("div",{className:"loading",innerHTML:dojo.replace("\x3ctable\x3e\x3ctr\x3e\x3ctd\x3e\x3cspan\x3e\x26nbsp;\x26nbsp;\x26nbsp;\x26nbsp;\x26nbsp;\x3c/span\x3e\x26nbsp;{0}\x3c/td\x3e\x3c/tr\x3e\x3c/table\x3e",["Loading..."])},b.parentNode,"first");m.add(b,"fullPane");b=
h.create("div",{className:"silhouette_div_container"},b);h.create("span",{className:"silhouetteiframe_object_container"},b);this.silhouetteiframe=new k({rootNode:b,margin:20});this._pageEditor.deferreds=g(a.getDeferreds());this._subscriptions.push(dojo.subscribe("/davinci/ui/editorSelected",this._editorSelected.bind(this)));this._subscriptions.push(dojo.subscribe("/davinci/ui/context/loaded",this._contextLoaded.bind(this)))},getDevice:function(){return this.deviceName},setDevice:function(a,b){this.deviceName=
a;var d=this.getContext();d.setMobileMeta(a);b||d.setMobileTheme(a);this.silhouetteiframe.setSVGFilename("none"==a?null:"app/preview/images/"+a+".svg");d.clearCachedWidgetBounds();dojo.publish("/davinci/ui/deviceChanged",[a]);dojo.publish("/davinci/ui/repositionFocusContainer",[])},toggleOrientation:function(){"none"!=this.deviceName&&this.setOrientation("landscape"==this._orientation?"portrait":"landscape");this.getContext().clearCachedWidgetBounds()},getOrientation:function(a){return this._orientation},
setOrientation:function(a){if("none"!=this.deviceName&&this._orientation!=a){this._orientation=a;a=e.getOpenEditor();a.editorContainer&&a.editorContainer.updateToolbars&&a.editorContainer.updateToolbars();var b=this.getContext();b.setMobileOrientation(this._orientation);this.silhouetteiframe.setOrientation(this._orientation);a._visualChanged();setTimeout(function(){b.clearCachedWidgetBounds();b.updateFocusAll()},100)}},_objectPropertiesChange:function(a){if(this.isActiveEditor()){var d=this.getContext(),
c=a.command;d.getCommandStack().execute(a.compoundCommand||c);c._newId?(a=b.byId(c._newId,d.getDocument()),d.select(a)):(c=d.getSelection(),a=c.length?c[c.length-1]:void 0,1<c.length&&d.select(a));this._srcChanged()}},isActiveEditor:function(){var a=f.currentEditor;return a&&"davinci.ve.PageEditor"==a.declaredClass&&a.visualEditor==this},_stylePropertiesChange:function(a){if(this.isActiveEditor()){var d=this.getContext().getCommandForStyleChange(a);d&&(this.getContext().getCommandStack().execute(d),
d._newId&&(d=b.byId(d._newId,context.getDocument()),this.context.select(d)),this._srcChanged(),dojo.publish("/davinci/ui/widgetValuesChanged",[a]))}},_srcChanged:function(){this.isDirty=!0},getTemplate:function(){return template},destroy:function(){this._handles&&(this._focusPopup&&this._focusPopup.destroyRecursive(),delete this._focusPopup,this.context.destroy(),this._handles.forEach(dojo.disconnect),this._iframeScrollHandler&&(dojo.disconnect(this._iframeScrollHandler),delete this._iframeScrollHandler),
this._designCPScrollHandler&&(dojo.disconnect(this._designCPScrollHandler),delete this._designCPScrollHandler),this._subscriptions.forEach(dojo.unsubscribe),this._subscriptions=[])},setContent:function(a,b,d){this._onloadMessages=[];this._setContent(a,b,d)},saveAs:function(a,b,d){this._setContent(a,d)},_setContent:function(a,b,d){this._setContentRaw(a,b,d)},_connectCallback:function(a){try{if(a instanceof Error)throw a;var b=this.context,d;this.savePoint=0;try{b.activate2()}catch(x){console.error("crash in context activation! : "+
x),logError(x,"crash in context activation! : ")}d=e.createPopup({partID:"davinci.ve.visualEditor",domNode:b.getContainerNode(),keysDomNode:b.getDocument(),context:b});b.getDocument();d&&(d.adjustPosition=function(a){var d=dojo.position(b.frameNode);dojo.withDoc(b.getDocument(),function(){var a=dojo.docScroll();d.x-=a.x;d.y-=a.y});return d});this._focusPopup=e.createPopup({partID:"davinci.ve.visualEditor",domNode:b.getFocusContainer(),keysDomNode:b.getDocument(),context:b});b.getTopWidgets().forEach(function(a){a.resize&&
a.resize()});b.anyDojoxMobileWidgets=void 0;dojo.publish("/davinci/ui/context/pagebuilt",[b])}catch(x){a=x}finally{a.errorMessage?(this.loadingDiv.innerHTML=a.errorMessage||"(unknown)",console.error("error! ",a.errorMessage)):a instanceof Error?(this.loadingDiv.parentNode&&this.loadingDiv.parentNode.removeChild(this.loadingDiv),delete this.loadingDiv,dojo.publish("/davinci/ui/context/pagebuilt",[b]),console.error("error! ",a)):(this.loadingDiv.parentNode&&this.loadingDiv.parentNode.removeChild(this.loadingDiv),
delete this.loadingDiv)}},getSelectedWidget:function(){var a=this.getContext(),b=a.getSelection(),d=b.length?b[b.length-1]:void 0;1<b.length&&a.select(d);return d},getSelectedSubWidget:function(){return this._selectedSubWidget},save:function(a){if(this.context){var b=[],d=this.context.getModel();d.getText();d.setDirty(!0);d.visit({visit:function(d){"HTMLFile"!=d.elementType&&"CSSFile"!=d.elementType||!d.isDirty()||b.push(d.save(a));return!1}});b=b.concat(this.getContext().saveDynamicCssFiles(this.context.cssFiles,
a));b.length?this.savePromise=g(b):delete this.savePromise;return this.savePromise}},removeWorkingCopy:function(){},getDefaultContent:function(){return this.getTemplate()},previewInBrowser:function(){var a=this.deviceName,b=e.getOpenEditor().resourceFile.getURL(),c=[];"none"!=a&&(c=["preview\x3d1","device\x3d"+encodeURIComponent(a),"file\x3d"+encodeURIComponent(b)],b=e.location(),b+="/maqetta/preview.html?","landscape"==this._orientation&&c.push("orientation\x3d"+this._orientation));this.context.getPreference("zazl")&&
c.push("zazl\x3dtrue");c.length&&(b+="?"+c.join("\x26"));a=function(){var a=window.open(b,"preview_"+b);d(a,f.location()+require.toUrl("dojox/image/resources/images/loading.gif"),"gray")};this.savePromise?this.savePromise.then(a):a()},refresh:function(){var a=this.context,d=n.getXPath(a.getSelection()[0]._srcElement,r);a.setSource(a.model);var d=a.model.evaluate(d).getAttribute("id"),c=b.byId(d,a.getDocument());setTimeout(function(){a.select(c)},0)},_contextLoaded:function(a){a==this.getContext()&&
this._registerScrollHandlers()},_editorSelected:function(a){var b=this.getContext(),b=b?b.getFocusContainer():null;a.oldEditor==this._pageEditor&&b&&this._focusPopup&&this._focusPopup.unBindDomNode(b);a.editor==this._pageEditor&&(this._registerScrollHandlers(),b&&this._focusPopup&&this._focusPopup.bindDomNode(b));if(b=document.getElementById("visualEditorBorder"))b.style.display=a.editor&&"davinci.ve.PageEditor"==a.editor.declaredClass?"block":"none"},_resizeBody:function(a,b){var d=v.getScrollLeft(a),
c=v.getScrollTop(a);a.style.width=0<d?b.w+d+"px":"100%";a.style.height=0<c?b.h+c+"px":"100%"},_scrollHandler:function(a){(a=dojo.query(".designCP iframe",this._pageEditor.domNode)[0])&&a.contentDocument&&a.contentDocument.body&&(this._resizeBody(a.contentDocument.body,{w:dojo.style(this.contentPane.domNode,"width"),h:dojo.style(this.contentPane.domNode,"height")}),setTimeout(function(){var a=this.getContext();a.clearCachedWidgetBounds();a.updateFocusAll()}.bind(this),100))},_registerScrollHandlers:function(){if(!this._iframeScrollHandler){var a=
dojo.query(".designCP iframe",this._pageEditor.domNode)[0];a&&a.contentDocument&&a.contentDocument.body&&(this._iframeScrollHandler=dojo.connect(a.contentDocument.body.ownerDocument,"onscroll",this,this._scrollHandler))}!this._designCPScrollHandler&&(a=dojo.query(".designCP",this._pageEditor.domNode)[0])&&(this._designCPScrollHandler=dojo.connect(a,"onscroll",this,this._scrollHandler))}})})},"davinci/ve/Context":function(){define([],function(){})},"davinci/ve/VisualEditorOutline":function(){define("dojo/_base/declare dojo/_base/connect ./commands/ReparentCommand ./commands/StyleCommand ./widget ./States ../Runtime xide/factory xide/types".split(" "),
function(p,m,h,g,f,e,c,a,q){var k=p(null,{toggleMode:!0,betweenThreshold:4,showRoot:!0,dndController:"dijit.tree.dndSource",onChange:function(a){},constructor:function(a){this._context=a;this._handles=[];this._connect("activate","_rebuild");this._connect("widgetChanged","_widgetChanged")},getRoot:function(a,b){a(this._context.rootWidget||{id:"myapp",label:"application"})},getLabel:function(a){if("myapp"==a.id)return this._context.model.fileName;var b="",d=this._getWidget(a);if("xblox/RunScript"===
a.type&&d)return(b=d.domNode)&&b.script?"XBlox::"+b.script:"XBlox::"+d.dijitWidget.targetEvent;if(d.isWidget)return b=f.getLabel(d);if(b=d.type){a=this.useRichTextLabel?"\x26lt;":"\x3c";var c=this.useRichTextLabel?"\x26gt;":"\x3e",b=0===b.indexOf("html.")?a+b.substring(5)+c:0===b.indexOf("OpenAjax.")?a+b.substring(9)+c:0<b.indexOf(".")?b.substring(b.lastIndexOf(".")+1):d.label||b;(d=f.byId(d.id,this._context.getDocument()))&&(d=d.getId())&&(b+=" id\x3d"+d);return b}},_getChildren:function(a){var b=
[];this._context.rootWidget||console.error("editor context has no root widget yet!");if(!this._context.rootWidget||!a||"state"==a.type||"html.stickynote"==a.type||"html.richtext"==a.type)return[];if("myapp"==a.id||a===this._context.rootNode)b=this._context.getTopWidgets();else{var d=this._getWidget(a);d&&d.getChildren&&(b=this._getWidget(a).getChildren())}return b.filter(function(a){return"xblox/RunScript"==a.type||"xblox/CSSState"==a.type||"xblox/StyleState"==a.type?!0:a&&a.getContext&&a.getContext()&&
!a.internal&&a._srcElement}).map(this._buildItem)},__getChildren:function(a){return[]},mayHaveChildren:function(a){return(a=this._getWidget(a))&&a.type&&0===a.type.indexOf("OpenAjax.")?!1:0<this._getChildren(a).length},getIdentity:function(a){return a?a.id:null},getChildren:function(a,b,c){b(this._getChildren(a))},put:function(a,b){a=this._getWidget(a);b=a.getParent();this.onChildrenChange(b,this._getChildren(b));return this.getIdentity(a)},add:function(a,b){(b=b||{}).overwrite=!1;return this.put(a,
b)},onDelete:function(a){},remove:function(a){this.onDelete(a)},newItem:function(a,b){},pasteItem:function(a,b,c,e,f,g){a&&c&&b&&(c="myapp"==c.id?this._context.rootWidget:this._getWidget(c),b="myapp"==b.id?this._context.rootWidget:this._getWidget(b),a=this._getWidget(a),b!=c||e||dojo.indexOf(b.getChildren(),a)<f&&f++,a=new h(a,c,f),this._context.getCommandStack().execute(a))},checkItemAcceptance:function(a,b,c){switch(c){case "before":case "after":return!0;default:return a=dijit.getEnclosingWidget(a).item,
a=this.tree.model._getWidget(a),a.getContainerNode&&a.getContainerNode()||"myapp"==a.id}},onChildrenChange:function(a,b){},_rebuild:function(){if(!this._skipRefresh){var a=this._context.rootNode;if(a)this.onChildrenChange(this._buildItem(a),this._getChildren(a))}},_widgetChanged:function(c,b,e){try{c===this._context.WIDGET_ADDED?this.add(b):c===this._context.WIDGET_REMOVED?this.remove(b):c===this._context.WIDGET_MODIFIED?(this.onChange(b),this.onChildrenChange(b,this._getChildren(b))):c===this._context.WIDGET_REPARENTED?
(this.remove(b),this.put(b,{overwrite:!0,parent:e[1]})):c===this._context.WIDGET_ID_CHANGED&&(this.remove({id:e}),this.add(b))}catch(r){console.error("VisualEditorOutline._widgetChanged: e \x3d "+r)}a.publish(q.EVENTS.ON_WIDGET_CHANGED,{type:c,widget:b,args:e},this)},toggle:function(a,b,c){a=this._getWidget(a);var d=a.getHelper(),e=!0;d&&d.onToggleVisibility&&(e=d.onToggleVisibility(a,b));return e?(this._toggle(a,b,c),!0):!1},_toggle:function(a,b,c){b=b?"none":"";var d;if(c=e.getFocus(a.domNode.ownerDocument.body))d=
c.state;else{c=e.getStatesListCurrent(a.domNode);for(var f=0;f<c.length;f++)if(c[f]){d=c[f];break}}a=new g(a,[{display:b}],d);this._context.getCommandStack().execute(a)},shouldShowElement:function(a,b){return"toggleNode"==a?"states"!=b.type&&"myapp"!=b.id:!0},_getToggledItemsAttr:function(){var a=[],b;for(b in this.toggledItems)a.push(b);return a},isToggleOn:function(a){a=this._getWidget(a);var b=a.getHelper();return b&&b.isToggleOn?b.isToggleOn(a):"none"===a.domNode.style.display},_getWidget:function(a){return a?
f.byId(a.id):null},_buildItem:function(a){if(a)return{id:a.id,type:a.type}},_connect:function(a,b){this._handles.push(m.connect(this._context,a,this,b))},destroy:function(){this._handles.forEach(m.disconnect)}});return p("davinci.ve.VisualEditorOutline",null,{toolbarID:"davinci.ve.outline",_outlineMode:"design",constructor:function(a){this._editor=a;this._context=a.visualEditor.context;this._handles=[];this._connect("onSelectionChange","onSelectionChange");this._connect("deselect","deselect");this._widgetModel=
new k(this._context);m.subscribe("/maqetta/appstates/state/changed/end",this,function(a){if("davinci.themeEditor.ThemeEditor"!==("undefined"!==typeof davinci&&c.currentEditor&&c.currentEditor.declaredClass)&&this._tree&&(a=a&&a.node&&a.node._dvWidget))for(a=a.getChildren();a.length;){var b=a.shift();if(b){var d="none"!==b.domNode.style.display;this._tree&&this._tree.toggleNode(b,!d);a=a.concat(b.getChildren())}}})},getActionsID:function(){if("design"===this._outlineMode)return"davinci.ve.VisualEditorOutline"},
_connect:function(a,b){this._handles.push(m.connect(this._context,a,this,b))},switchDisplayMode:function(a){this._outlineMode=a;this._outlineView.createTree()},getModel:function(){switch(this._outlineMode){case "design":this._model=this._widgetModel;break;case "source":this._model=this._srcModel}return this._model},getSelectedItem:function(){return this._tree&&this._tree._getSelectedItemAttr()},onSelectionChange:function(a,b){"design"==this._outlineMode&&(a=a||this._context.getSelection())&&this._tree&&
this._tree.selectNode(a,b)},deselect:function(){this._tree&&this._tree&&this._tree.deselectAll()},getIconClass:function(a,b){return(a=a.type)?"xblox/RunScript"==a?"fa fa-play-circle-o":b?"fa fa-circle-thin":"fa fa-circle":b?"fa fa-circle-thin":"fa fa-circle"}})})},"davinci/ve/prefs/HTMLEditPreferences":function(){define("dojo/_base/declare dijit/layout/ContentPane dijit/_TemplatedMixin dijit/form/CheckBox dijit/form/TextBox davinci/lang/ve/common dojo/text!./HtmlEditPreferences.html".split(" "),function(p,
m,h,g,f,e,c){return p([m,h],{templateString:c,postMixInProperties:function(){this._loc=e},postCreate:function(){this._snap=new g({},this.snapNode);this._showPossibleParents=new g({},this.showPossibleParentsNode);this._cssOverrideWarn=new g({},this.cssOverrideWarn);this._absoluteWidgetsZindex=new f({},this.absoluteWidgetsZindex);this._zazl=new g({},this.zazl);this.containerNode||(this.containerNode=this.domNode)},getDefaults:function(){},setDefaults:function(){},doApply:function(){},getPreferences:function(){return{snap:this._snap.checked,
showPossibleParents:this._showPossibleParents.checked,cssOverrideWarn:this._cssOverrideWarn.checked,absoluteWidgetsZindex:this._absoluteWidgetsZindex.value,zazl:this._zazl.checked}},setPreferences:function(a){a=a||{};this._check(this._snap,!!a.snap);this._check(this._showPossibleParents,!!a.showPossibleParents);this._check(this._cssOverrideWarn,!!a.cssOverrideWarn);this._absoluteWidgetsZindex.set("value",a.absoluteWidgetsZindex);this._check(this._zazl,!!a.zazl)},_check:function(a,c){a.set("checked",
c)},save:function(a){davinci.ve._preferences=a}})})},"davinci/lang/ve/common":function(){define([],function(){return{search:"Search",filter:"Filter","new":"New",errorSavingFile:"Error saving file: ${0} details: ${1}",palette:"palette",closeAllEditors:"Close all tabs",undo:"Undo",redo:"Redo",copy:"Copy",paste:"Paste",cut:"Cut","delete":"Delete",surround:"Surround",properties:"Properties",styles:"Styles",events:"Events",preferences:"Preferences",addPane:"Add Pane",addColumn:"Add Column",addRow:"Add Row",
removeColumn:"Remove Column",removeRow:"Remove Row",joinColumn:"Join Column",joinRow:"Join Row",splitColumn:"Split Column",splitRow:"Split Row",alignLeft:"Align Left",alignRight:"Align Right",alignTop:"Align Top",alignBottom:"Align Bottom",show:"Show",hide:"Hide",addMenuItem:"Add Menu Item",addSubMenu:"Add Sub Menu",addMenuBarItem:"Add MenuBar Item",addPopupMenuBar:"Add Popup MenuBarItem",ok:"OK",cancel:"Cancel",page:"Page",title:"Title",metaInfo:"Meta Info",httpEquiv:"HTTP Equiv",style:"Style",theme:"Theme",
styleSheets:"Style Sheets",rules:"Rules",url:"URL",externalScripts:"External Scripts",modules:"Modules",name:"Name",value:"Value",add:"Add",remove:"Remove",staticOptions:"Static Options",axisOptions:"Axis Options",series:"Series",axis:"Axis",option:"Option",selected:"Selected",staticItems:"Static Items",dataStore:"Data Store",query:"Query",fields:"Fields",field:"Field",label:"Label",width:"Width",edit:"Edit",key:"Key",rootId:"Root ID",rootLabel:"Root Label",childrenAttrs:"Children Attributes",items:"Items",
type:"Type",widget:"Widget",position:"Position",size:"Size",layout:"Layout",visual:"Visual",text:"Text",border:"Border",table:"Table",list:"List",aural:"Aural",others:"Others",onLoad:"Load",onUnload:"Unload",script:"Script",methodCall:"Method Call",serviceCall:"Service Call",object:"Object",method:"Method",parameters:"Parameters",result:"Result",service:"Service",content:"Content",source:"Source",target:"Target",property:"Property",flowLayout:"Flow Layout",snapToNearestWidget:"Snap to nearest widget",
showPossibleParents:"When dragging, show possible parents",warnOnCSSOverride:"Warn on CSS Override",absoluteWidgetsZindex:"z-index for sketch mode",widgetPaletteLayout:"In Palette, display widgets as",widgetPaletteShow_Icons:"icons",widgetPaletteShow_List:"list",liveEdit:"Live Edit",zazl:"Enable \x3ca href\x3d'http://zazl.org' target\x3d'_blank'\x3eZazl Optimizer\x3c/a\x3e",selectorPrefix:"Selector Prefix",component:"Component",alternates:"Alternates",alternateWidgets:"Alternate widgets:",howToChooseAlternate:"To choose alternate widget, click-select current widget, then click on up arrow icon.",
summary:"Summary:",description:"Description:",showSuggestedWidgets:"Suggested Widgets",showAllWidgets:"All Widgets",MoreIconTitleString:"Click here to see alternative similar widgets",HelpIconTitleString:"Click here to see descriptive info about this widget",__dummy__:""}})},"davinci/commands/OrderedCompoundCommand":function(){define(["dojo/_base/declare","davinci/commands/CompoundCommand"],function(p,m){return p("davinci.commands.OrderedCompoundCommand",m,{undo:function(){if(this._commands)for(var h=
0;h<this._commands.length;h++)this._commands[h].undo()}})})},"davinci/version":function(){define([],"10")},"davinci/ve/utils/pseudoClass":function(){define([],function(){return{MAQETTA_PSEUDO_CLASS:"maqettaPseudoClass",replace:function(p){return"hover link visited active focus first-letter first-line first-child before after".split(" ").reduce(function(m,h){return m.replace(new RegExp(":"+h,"g"),".maqettaPseudoClass"+h[0].toUpperCase()+h.slice(1))},p)}}})},"davinci/ui/dnd/DragManager":function(){define(["dojo/_base/declare",
"dojo/_base/array","dojo/_base/connect","dojo/mouse"],function(p,m,h){p=p("",null,{disabled:!1,currentDragSource:null,currentDropTarget:null,dropAcceptable:!1,dropTargets:null,dragTriggered:!1,currentDomElement:null,_connectors:null,_moveConnector:null,document:null,documentX:0,documentY:0,_ABSOLUTE_THRESHOLD:3,_STATIC_THRESHOLD:40,constructor:function(){this.dropTargets=[];this._connectors=[h.connect(dojo.doc,"onkeydown",this,"onKeyDown"),h.connect(dojo.doc,"onmouseover",this,"onMouseOver"),h.connect(dojo.doc,
"onmouseout",this,"onMouseOut"),h.connect(dojo.doc,"onmousedown",this,"onMouseDown"),h.connect(dojo.doc,"onmouseup",this,"onMouseUp")]},destroy:function(){m.forEach(this._connectors,dojo.disconnect)},onKeyDown:function(f){27==f.keyCode&&this.currentDragSource&&(this.dropAcceptable=!1,this.onMouseUp(f))},onMouseDown:function(f,e){if(!(this.disabled||this.dragTriggered||!dojo.mouseButtons.isLeft(f)||f.metaKey||f.ctrlKey||this.dragTriggered)&&(e=this.currentDragSource=e||this.findDragSource(f))){e.onDragDown(f);
e=0;for(var c=this.dropTargets.length;e<c;e++){var a=this.dropTargets[e];if(!a.disabled)a.onDragDown(f)}f.preventDefault();this._moveConnectors=[h.connect(dojo.doc,"onmousemove",this,"onMouseMove")];this.document&&this.document!=dojo.doc&&(this._moveConnectors.push(h.connect(this.document,"onmousemove",this,"onMouseMove")),this._moveConnectors.push(h.connect(this.document,"onmouseover",this,"onMouseOver")),this._moveConnectors.push(h.connect(this.document,"onmouseout",this,"onMouseOut")),this._moveConnectors.push(h.connect(this.document,
"onmouseup",this,"onMouseUp")))}},onMouseMove:function(f){f.preventDefault();dojo.isIE&&(f.pageX-=2,f.pageY-=2);if(f.target==this.document||f.target.ownerDocument==this.document)f.documentX=this.documentX,f.documentY=this.documentY,f.documentX-=this.document.documentElement.scrollLeft,f.documentY-=this.document.documentElement.scrollTop;var e=f.dragSource=this.currentDragSource;if(!this.dragTriggered){var c=f.pageX-e.pageX,a=f.pageY-e.pageY,c=Math.sqrt(c*c+a*a);if("absolute"==e.positioning){if(c<
this._ABSOLUTE_THRESHOLD)return}else if(c<this._STATIC_THRESHOLD)return;this.dragTriggered=!0;e.onDragStart(f);c=0;for(a=this.dropTargets.length;c<a;c++){var g=this.dropTargets[c];g.disabled||(f.dropTarget=g,g.onDragStart(f))}this.onMouseOver(f)}e.onDragMove(f);(g=this.currentDropTarget)?this.dropAcceptable&&(f.dropTarget=g,g.onDragMove(f,this.dragObjects)):this.dropAcceptable=!1},onMouseOver:function(f){this.currentDomElement=f.target;if(this.dragTriggered){var e=this.currentDragSource;if(e){f.dragSource=
e;var c=this.findDropTarget(this.currentDomElement,e);c&&e.domNode==c.domNode||(c!=this.currentDropTarget&&(this.currentDropTarget&&(f.dropTarget=this.currentDropTarget,this.currentDropTarget.onDragOut(f)),c&&(f.dropTarget=c,this.dropAcceptable=c.onDragOver(f))),this.currentDropTarget=c)}}},onMouseOut:function(f){},onMouseUp:function(f){if(!this.ignoreMouseUp){m.forEach(this._moveConnectors,dojo.disconnect);if(this.dragTriggered){for(var e=0,c=this.dropTargets.length;e<c;e++){var a=this.dropTargets[e];
a.disabled||(f.dropTarget=a,a.onDragEnd(f))}e=this.currentDragSource;c=this.currentDropTarget;f.dragSource=e;f.dropTarget=c;if(e&&(c?(c.onDropStart(f),this.dropAcceptable?(a=c.onDrop(f),c.onDragOut(f),void 0==a||f.dragStatus||(f.dragStatus=a?"dropSuccess":"dropFailure")):(c.onDragOut(f),f.dragStatus="dropFailure")):f.dragStatus="dropFailure",e.onDragEnd(f),c))c.onDropEnd(f)}this._resetStatus()}},_resetStatus:function(){this.currentDragSource=this.currentDropTarget=null;this.dragTriggered=this.dropAcceptable=
!1;this.currentDomElement=null},findDragSource:function(f){for(f=f.target;f&&f!=dojo.doc.body;f=f.parentNode)if(f.dragSource&&!f.dragSource.disabled)return f.dragSource;return null},findDropTarget:function(f,e){for(var c=null,a=null;null!=f&&f!=dojo.doc.body;f=f.parentNode){var g=f.dropTarget;if(g&&!g.disabled&&g.accepts(e)){c=g;c.nodeUnderMouse=a;break}f.dragSource&&!f.dragSource.disabled&&(a=f)}return c},registerDropTarget:function(f){this.dropTargets.push(f)},unregisterDropTarget:function(f){for(var e=
0,c=this.dropTargets.length;e<c;e++)if(this.dropTargets[e]==f){this.dropTargets.splice(e,1);break}}});var g=new p;g.Module=p;return g})},"davinci/model/resource/Folder":function(){define(["dojo/_base/declare","dojo/_base/xhr","davinci/Runtime","davinci/model/resource/Resource","davinci/model/resource/File"],function(p,m,h,g,f){var e=p("davinci.model.resource.Folder",g,{serviceClass:"XIDE_Directory_Service",workspaceMount:"/ws/",constructor:function(c,a){this.elementType="Folder";this.name=c;this.parent=
a},reload:function(){this._isLoaded=!1},createResource:function(c,a,g,h){var d;null!=c?d=a?new e(c,this):new f(c,this):(d=this,a="Folder"==this.elementType);var b=this;if(!g){g=""+this.getPath();"."==g&&(g=""+this.workspaceMount);g=g.replace("./",this.workspaceMount);g=this.serviceClass;a=a?"mkDir":"mkFile";if(!this.serviceObject[g][a])return console.error("_createResource : server doesnt support :"+a),this;this.serviceObject[g][a](this.workspaceMount,d.getPath()).then(function(a){if(!0===a&&null!=
c||"The file already exists"===a)return b.children.push(d),delete d.libraryId,delete d.libVersion,delete d._readOnly,dojo.publish("/davinci/resource/resourceChanged",["created",d]),h&&h(d),d;if("OK"!=a)throw"Folder.createResource failed: name\x3d"+c+"response\x3d"+a;delete d.libraryId;delete d.libVersion;delete d._readOnly;h(b);if(!h)debugger})}},getChildren2:function(c,a){if(this._isLoaded)c(this.children);else if(this._loadingCallbacks)this._loadingCallbacks.push(c);else{this._loadingCallbacks=
[];this._loadingCallbacks.push(c);c=""+this.getPath();"."==c&&(c="/ws/");var e=this.serviceClass;if(!this.serviceObject)debugger;if(!this.serviceObject[e])debugger;this.serviceObject.sync=!0;this.serviceObject[e].ls(this.workspaceMount,c).then(function(a){this.setChildrenSync(a);dojo.forEach(this._loadingCallbacks,function(a){a(this.children)},this);delete this._loadingCallbacks}.bind(this),a)}},getChildren:function(c,a){if(this._isLoaded)c.call(null,this.children);else if(this._loading)this._loading.then(function(){c.call(null,
this.children)}.bind(this),a);else{console.error("list files : "+this.getPath());var e=""+this.getPath();"."==e&&(e="/ws/");e=e.replace("./",this.workspaceMount);this.serviceObject[this.serviceClass].ls(e).then(function(a){this.setChildren(a);this._isLoaded=!0;c.call(null,this.children);delete this._loading}.bind(this),a)}},getChildrenSync:function(c,a){this._isLoaded?c(this.children):this._loadingCallbacks?this._loadingCallbacks.push(c):(this._loadingCallbacks=[],this._loadingCallbacks.push(c),console.error("list files : "+
this.getPath()),c=this.getPath(),"./project1"===c&&console.error("gotcha"),c=""+c,"."==c&&(c="/ws/"),c=c.replace("./","/ws/"),h.serverJSONRequest({url:"cmd/listFiles.php",content:{path:this.getPath(),basePath:"./"},sync:a,load:dojo.hitch(this,function(a,c){this.setChildrenSync(a);dojo.forEach(this._loadingCallbacks,function(a){a(this.children)},this);delete this._loadingCallbacks})}))},setChildren:function(c){this.children=[];this._appendFiles(c)},setChildrenSync:function(c){this.children=[];this._appendFiles(c,
!0)},_appendFiles:function(c,a){c.forEach(function(c){var g=a?this.getChildSync(c.name):this._getChild(c.name),d=null!=g;c.isDir||c.isLib?(d||(g=new e(c.name,this)),c.isLib&&(g.isLibrary=!0)):d||(g=new f(c.name,this));g.link=c.link;g.isNew=c.isNew;g._readOnly=c.readOnly;g.setDirty(c.isDirty);c.libraryId&&(g.libraryId=c.libraryId,g.libVersion=c.libVersion);d||this.children.push(g)},this);this._isLoaded=!0},getMarkers:function(c,a){var e=[];this.visit({visit:function(f){if("File"==f.elementType)markers=
f.getMarkers(c),e.concat(markers);else if(!a)return!0}},!0);return e},getChildSync:function(c){if(!this._isLoaded||1>this.children.length)this._isLoaded=!1,this.getChildrenSync(function(a){this.children=a},!0);return this._getChild(c)},getChild:function(c){if(!this._isLoaded||1>this.children.length)this._isLoaded=!1,this.getChildren2(function(a){this.children=a},!0);return this._getChild(c)},_getChild:function(c){if(!this.__CASE_SENSITIVE){if(!c||null==c.toLowerCase)debugger;c=c.toLowerCase()}var a;
this.children.some(function(e){var f=e.getName();this.__CASE_SENSITIVE||(f=f.toLowerCase());(f=f==c)&&(a=e);return f});return a}});return e})},"davinci/model/resource/Resource":function(){define("dojo/_base/declare dojo/_base/xhr dojo/_base/connect dojo/Deferred davinci/Runtime davinci/model/Model davinci/model/Path xide/manager/ServerActionBase".split(" "),function(p,m,h,g,f,e,c,a){return p("davinci.model.resource.Resource",[e,a],{singleton:!0,sync:!1,workspaceMount:"/ws/",_initService:function(){var a=
this.findServiceUrl(this.declaredClass);a&&(this.serviceUrl=a);this.inherited(arguments)},constructor:function(){this.elementType="Resource";this.name="";this.parent=null;this._id=dijit.getUniqueId("maqFileResource");this.init()},getName:function(){return this.name},getPath:function(){return this.parent?this.parent.getPath()+"/"+this.name:this.name},readOnly:function(){return this.hasOwnProperty("_readOnly")?this._readOnly||null!=this.parent&&this.parent.readOnly():this.parent?this.parent.readOnly():
!1},getURL:function(){var a=this.getPath();0==a.indexOf("./")&&(a=a.substring(2,a.length));return f.getUserWorkspaceUrl()+a},rename:function(a){var e=(new c(this.getPath())).removeLastSegments().append(a);return m.get({url:"cmd/rename",handleAs:"text",content:{oldName:this.getPath(),newName:e.toString()}}).then(function(){this.name=a;h.publish("/davinci/resource/resourceChanged",["renamed",this])}.bind(this))},getParentFolder:function(){return"File"==this.elementType?this.parent:this},isVirtual:function(){return!!this.libraryId},
visit:function(a,c){var d=a.visit(this);this._isLoaded||"Folder"!=this.elementType||c?this.children&&!d&&dojo.forEach(this.children,function(b){b.visit(a,c)}):this.getChildren(dojo.hitch(this,function(){dojo.forEach(this.children,function(b){b.visit(a,c)})}))},deleteResource:function(a){var c=""+this.getPath();"."==c&&(c=""+this.workspaceMount);var c=c.replace("./",this.workspaceMount),d=this.serviceClass,b="Folder"==this.elementType?"deleteDirectory":"deleteFile",e=function(){var a=this.getName();
this.parent.children.some(function(b,c,d){if(b.getName()==a)return d.splice(c,1),!0});h.publish("/davinci/resource/resourceChanged",["deleted",this])}.bind(this);a?(a=new g,e(),a.resolve()):a=this.serviceObject[d][b](c).then(e,function(){});return a},getId:function(){return this._id}})})},"davinci/model/resource/File":function(){define("dojo/_base/declare davinci/Runtime davinci/model/resource/Resource davinci/model/resource/Marker davinci/ve/utils/URLRewrite xide/utils".split(" "),function(p,m,h,
g,f,e){return p("davinci.model.resource.File",h,{serviceClass:"XIDE_Directory_Service",mount:"/ws/",getMountPoint:function(){return this.mount},constructor:function(c,a){this.elementType="File";this.name=c;this.parent=a;this.markers=[];this.extension=c.substr(c.lastIndexOf(".")+1)},getExtension:function(){return this.extension},clearMarkers:function(){this.markers=[]},addMarker:function(c,a,e){this.markers.push(new g(this,c,a,e))},getMarkers:function(c){var a=[];if(this.markers)for(var e=0;e<this.markers.length;e++){var f=
this.markers[e];c?"string"==typeof c?f.type==c&&a.push(f):dojo.forEach(c,function(c){c==f.type&&a.push(f)}):a.push(f)}return a},setContents:function(c,a){this.isNew&&!a&&(this.isNew=!1);var e=(a=!1,""),f=encodeURI(this.getPath()+e);return this.serviceObject[this.serviceClass].set(this.getMountPoint(),f,c).then(function(c){this.dirtyResource=a;dojo.publish("/davinci/resource/resourceChanged",["modified",this]);return this}.bind(this),function(a){console.error("An error occurred: davinci.model.resource.File.prototype.setContents "+
a+" : "+f);return a})},getContentSync:function(){return m.serverJSONRequest({url:f.encodeURI(this.getURL()),handleAs:"text",sync:!0})},getContent:function(){return this.serviceObject[this.serviceClass].get(e.buildPath(this.getMountPoint(),encodeURI(this.getPath())),!1,!1)},removeWorkingCopy:function(){m.serverJSONRequest({url:m.cmdOffset+"cmd/removeWorkingCopy",handleAs:"text",content:{path:this.getPath()},sync:!0});this.isNew&&this.deleteResource(!0)}})})},"davinci/model/resource/Marker":function(){define(["dojo/_base/declare",
"davinci/model/resource/Resource"],function(p,m){return p("davinci.model.resource.Marker",m,{constructor:function(h,g,f,e){this.resource=h;this.type=g;this.line=f;this.text=e}})})},"davinci/ve/input/SmartInput":function(){define("dojo/_base/declare dojo/dom-geometry davinci/ve/commands/ModifyRichTextCommand dojox/html/entities davinci/lang/ve dijit/lang/_common xide/registry".split(" "),function(p,m,h,g,f,e,c){return p("davinci.ve.input.SmartInput",null,{property:null,_X_MOVE_RANGE:10,_Y_MOVE_RANGE:10,
_POINTER_TOP_OFFSET:-13,multiLine:"false",displayOnCreate:"true",_connection:[],getHelpText:function(){return this.helpText?this.helpText:this.isHtmlSupported()?f.smartInputHelp1:f.smartInputHelp2},isHtmlSupported:function(){this.supportsHTML||("html"==this._widget.type.match("^html")?this.supportsHTML="true":this.supportsHTML="false");return"boolean"===typeof this.supportsHTML?this.supportsHTML:"true"===this.supportsHTML},parse:function(a){return a},parseItems:function(a){this.trim&&(a=dojo.trim(a));
return a.match(/[^\\][\r\n]/)?this.parseItemsInRows(a):this.parseItemsInColumns(a)},parseItemsInRows:function(a){a=this.splitRows(a);for(var c=a.length,e=0;e<c;e++){var d=a[e],d=this.parseItem(d);a[e]=d}return a},parseItemsInColumns:function(a){a=this.splitColumns(a);for(var c=a.length,e=0;e<c;e++){var d=a[e],d=this.parseItem(d);a[e]=d}return a},parseGrid:function(a){a=this.splitRows(a);for(var c=a.length,e=0;e<c;e++){var d=this.parseItemsInColumns(a[e]);a[e]=d}return a},parseItem:function(a){var c=
null,e=a,d=a.match(/^([-~!>|(*)[+\]]*) ?(.*)$/);d&&(c=d[1],e=d[2]);var d=0,b=!1,f=!1;if(c)for(var g=0;g<c.length;g++)switch(c[g]){case "-":case "~":case "!":b=!0;break;case "\x3e":d++;break;case "*":case "+":f=!0}return{original:a,specialChars:c,text:e,indent:d,disabled:b,selected:f}},splitRows:function(a){var c=[],e,d="",b=!1;for(e=0;e<a.length;e++){var f=a.charAt(e);switch(f){case "\\":b&&(d+=f);b=!b;break;case "r":b?(d+="\r",b=!1):d+=f;break;case "n":b?(d+="\n",b=!1):d+=f;break;case "\r":case "\n":b?
(d+=f,b=!1):(this.trim&&(d=dojo.trim(d)),c.push(d),d="");break;default:d+=f,b=!1}}d&&(this.trim&&(d=dojo.trim(d)),c.push(d));return c},splitColumns:function(a){var c=[],e,d="",b=!1;for(e=0;e<a.length;e++){var f=a.charAt(e);switch(f){case "\\":b&&(d+=f);b=!b;break;case "r":b?(d+="\r",b=!1):d+=f;break;case "n":b?(d+="\n",b=!1):d+=f;break;case ",":b?(d+=f,b=!1):(this.trim&&(d=dojo.trim(d)),c.push(d),d="");break;default:d+=f,b=!1}}d&&(this.trim&&(d=dojo.trim(d)),c.push(d));return c},serializeItems:function(a){return"columns"==
this.format?this.serializeColumns(a):this.serializeRows(a)},serializeColumns:function(a){for(var c=0;c<a.length;c++){var e=a[c],e=e.replace(/\\/g,"\\\\");a[c]=e.replace(/,/g,"\\,")}return a.join(", ")},serializeRows:function(a){for(var c=0;c<a.length;c++){var e=a[c],e=e.replace(/\\/g,"\\\\");a[c]=e.replace(/\n/g,"\\\n")}return a.join("\n")},inlineEditActive:function(){return!(!this._inline||"none"==this._inline.style.display||!this._inline.eb)},show:function(a){this._widget=davinci.ve.widget.byId(a);
this._inline||this._createInline();a=dojo.hitch(this,function(a){this._inline.style.display="block";this.setFormat(a);a=g.decode(a,[["\x26","amp"],['"',"quot"],["\x3c","lt"],["\x3e","gt"]]);this._inline.eb.set("value",String(a));this.updateFormats();this.help(!1);dijit.selectInputText(this._inline.eb.textbox);this.updateSimStyle();this._inline.eb.textbox.focus()});var c=this._node(this._widget),e=this.property,d="maq_innerText"===e?"innerHTML":e,b;e&&(c?b=dojo.attr(c,d):"innerHTML"===d||"textContent"==
d?(b=this._widget._srcElement.getElementText(this._context),b=b.replace(/\s+/g," ")):b=this._widget.attr(e));this.serialize?this.serialize(c||this._widget,a,b):e&&a(b)},_createInline:function(){},_connectHelpDiv:function(){var a=dojo.byId("davinci.ve.input.SmartInput_img_help");this._connection.push(dojo.connect(a,"onclick",this,"toggleHelp"));this._connection.push(dojo.connect(dijit.byId("davinci.ve.input.SmartInput_ok"),"_onSubmit",this,"onOk"));this._connection.push(dojo.connect(dijit.byId("davinci.ve.input.SmartInput_cancel"),
"onClick",this,"onCancel"))},_findSmartInputContainer:function(a){return document.body},_loading:function(a,e){this._widget&&this._widget._edit_context||console.error("have no widget");var f=this._widget._edit_context.frameNode,d=f.ownerDocument,b=d.createElement("div"),g=this._findSmartInputContainer(f);if(g){g.appendChild(b);this._loadingDiv=b;dojo.addClass(b,"smartInputLoading");b=d.createElement("div");b.id="ieb";dojo.addClass(b,"inlineEdit dijitTooltipContainer");d=d.createElement("div");d.id=
"iebPointer";this._inline=b;g.appendChild(b);g.appendChild(d);var h=new dojo.dnd.Moveable("ieb");this._connection.push(dojo.connect(h,"onMoveStart",this,"onMoveStart"));this._connection.push(dojo.connect(h,"onMoveStop",this,"onMoveStop"));this._inline=new ContentPane({},b);b=c.byId("editorsStackContainer").domNode;c.byId("editorsStackContainer");b=m.position(b);this._loadingDiv.style.position="absolute";this._loadingDiv.style.left=b.x+"px";this._loadingDiv.style.top=b.y+"px";this._loadingDiv.style.width=
b.w+"px";this._loadingDiv.style.height=b.h+"px";var b=this._widget.getMarginBox(),h=dojo.position(f),q=dojo.position(g),f=h.x-q.x+g.scrollLeft-1,h=h.y-q.y+g.scrollTop-1,p=g.clientWidth,q=26,y=0;b.y+a+26<g.clientHeight?(q=b.y+26,dojo.addClass(d,"inlineEditConnectorBelow")):0<b.y-a?(q=b.y-a,y=a+12):q=26;a="0";b.x+e+20<p?a=b.x:b.x+e>p&&(e=b.x-e+b.w,0>e&&(e=0),a=e);a+=f;q+=h;this._inline._setStyleAttr({display:"block",top:q+"px",left:a+"px",padding:"1px",overflow:"hidden",backgroundImage:"none"});this._startTop=
q;this._startLeft=a;dojo.style(d,"left",b.x+20+f+"px");dojo.style(d,"top",q+y+this._POINTER_TOP_OFFSET+"px")}},handleEvent:function(a){switch(a.keyCode){case 13:var c=this.multiLine;if(!c||"false"==c||13==this._lastKeyCode||a.ctrlKey)this.onOk();else if(a.which==dojo.keys.ENTER&&a.ctrlKey)this.onOk();break;case 27:this.onCancel();break;default:this.updateFormats()}this._lastKeyCode=a.keyCode;this.updateSimStyle()},onOk:function(a){this.hide()},onCancel:function(a){this.hide(!0)},onMoveStart:function(a){dojo.style("iebPointer",
"display","none")},onMoveStop:function(a){var c=dojo.style("ieb","left");a=dojo.style("ieb","top");c=this._startLeft-c;a-=this._startTop;a<this._Y_MOVE_RANGE&&a>-this._Y_MOVE_RANGE?(dojo.style("iebPointer","display",""),dojo.style("iebPointer","top",this._startTop+this._POINTER_TOP_OFFSET+a+"px"),c<this._X_MOVE_RANGE&&c>-this._X_MOVE_RANGE?dojo.style("iebPointer","display",""):dojo.style("iebPointer","display","none")):dojo.style("iebPointer","display","none")},stopEvent:function(a){a.stopPropagation();
this.updateSimStyle()},stopEvent_Intercept_Enter:function(a){this.stopEvent(a);13!=a.keyCode||this.multiLine||a.preventDefault()},_node:function(){var a,c=this.path,e=this.selector;if(c||e)a=this._widget.domNode,c&&(a=dojo.getObject(c,!1,this._widget)),e&&(a=dojo.query(e,a)[0]);return a},updateWidget:function(a){if(!this._widget._destroyed){this.parse&&(a=this.parse(a));var c=this._node(this._widget),e=this._widget.getContext(),d=this.property,b="maq_innerText"===d?"innerHTML":d;if(this.update){if(a=
this.update(c||this._widget,a,d))this._widget=a;e.select(this._widget,null,!1)}else if(d){if(c)dojo.attr(c,b,a);else{c={};a&&"string"==typeof a&&(a=a.replace(/\n/g,""));var f=null;"textContent"==d?f=a:c[d]=a;"innerHTML"===b?(c.richText=c[d],delete c[d],a=new h(this._widget,c,null,e)):a=new davinci.ve.commands.ModifyCommand(this._widget,c,f,e);this._widget._edit_context.getCommandStack().execute(a);this._widget=a.newWidget;this._widget._edit_context._focuses[0]._selectedWidget=this._widget}e.select(this._widget,
null,!1)}}},hide:function(a){if(this._inline){for(var c;connection=this._connection.pop();)connection&&dojo.disconnect(connection);var e=this._findSmartInputContainer(this._widget._edit_context.frameNode);if(e&&(this._loadingDiv&&e.removeChild(this._loadingDiv),"none"!=this._inline.style.display&&this._inline.eb)){this._value=c=this._inline.eb.get("value");this._format=this.getFormat();this._inline.style.display="none";this._inline.eb&&(this._inline.eb.destroyRecursive(),delete this._inline.eb);this._inline.destroyRecursive();
delete this._inline;var d=e.ownerDocument.getElementById("iebPointer");e.removeChild(d);null==c||a||(this.disableEncode||"text"!==this._format||(c=g.encode(c)),this.updateWidget(c));this._widget.getContext().getDocument().defaultView.focus()}}},getFormat:function(){var a=dijit.byId("davinci.ve.input.SmartInput_radio_html"),c="text";a&&a.checked&&(c="html");return c},containsHtmlMarkUp:function(a){return 0<dojo.create("div",{innerHTML:a}).children.length},toggleHelp:function(){var a=dojo.byId("davinci.ve.input.SmartInput_img_help");
dojo.hasClass(a,"inlineEditHelpSelected")?this.help(!1):this.help(!0);dojo.toggleClass(a,"inlineEditHelpSelected")},setFormat:function(a){var c=dijit.byId("davinci.ve.input.SmartInput_radio_html"),e=dijit.byId("davinci.ve.input.SmartInput_radio_text");a=dojo.create("div",{innerHTML:a}).children.length?"html":"text";"html"===a?(c.set("checked",!0),e.set("checked",!1)):(c.set("checked",!1),e.set("checked",!0));this._format=a},help:function(a){var c=dojo.byId("davinci.ve.input.SmartInput_div_help");
dojo.byId("davinci.ve.input.SmartInput_radio_div");a?dojo.style(c,"display",""):dojo.style(c,"display","none")},updateFormats:function(){var a=this._inline.eb.get("value"),c=!0;this.containsHtmlMarkUp(a)&&(c=!1);this._widget.getContext().getDojo();var e=dojo.byId("davinci.ve.input.SmartInput_radio_text_width_div"),a=g.encode(a);e.innerHTML='\x3cdiv class\x3d"dojoxEllipsis"\x3e'+dojo.replace("Plain text ({0})",[a])+"\x3c/div\x3e";a=dojo.byId("davinci.ve.input.SmartInput_radio_html_width_div");a.innerHTML=
'\x3cdiv id\x3d"davinci.ve.input.SmartInput_radio_html_div" class\x3d"dojoxEllipsis"\x3e'+f.htmlMarkup+"\x3c/div\x3e";var d=dijit.byId("davinci.ve.input.SmartInput_radio_html"),b=dijit.byId("davinci.ve.input.SmartInput_radio_text"),h=dojo.byId("davinci.ve.input.SmartInput_table");d.setDisabled(c);b.setDisabled(c);c?(dojo.addClass(e,"inlineEditDisabled"),dojo.addClass(a,"inlineEditDisabled"),d.set("checked",!1),b.set("checked",!0)):(dojo.removeClass(e,"inlineEditDisabled"),dojo.removeClass(a,"inlineEditDisabled"));
!c&&this.isHtmlSupported()?(dojo.style(b.domNode,"display",""),dojo.style(d.domNode,"display",""),dojo.style(a,"display",""),dojo.style(e,"display",""),dojo.style(h,"display","")):(dojo.style(b.domNode,"display","none"),dojo.style(d.domNode,"display","none"),dojo.style(a,"display","none"),dojo.style(e,"display","none"),dojo.style(h,"display","none"))},resize:function(a){a=dojo.byId("iedResizeDiv");var c=dijit.byId("davinciIleb"),e=a.clientWidth-5,d=a.clientHeight-6,b=a.clientWidth-10,e=a.clientWidth-
8,d=a.clientHeight-20,b=a.clientWidth-9,f=dojo.byId("smartInputSim");dojo.style(f,"width",e+10+"px");this.updateSimStyle();c&&(c._setStyleAttr({width:e+"px",height:d+"px",maxHeight:d+"px"}),c._setStyleAttr({width:a.clientWidth+"px"}));c=dojo.byId("davinci.ve.input.SmartInput_radio_div");dojo.style(c,"width",b+2+"px");c=dojo.byId("davinci.ve.input.SmartInput_radio_text_width_div");dojo.style(c,"width",a.clientWidth-50+"px");c=dojo.byId("davinci.ve.input.SmartInput_radio_html_width_div");dojo.style(c,
"width",a.clientWidth-50+"px")},onBlur:function(a){this.updateSimStyle(a)},updateSimStyle:function(a){var c=dijit.byId("davinciIleb");if(a=dojo.byId("smartInputSim"))c=dojo.style(c.domNode),dojo.style(a,"borderColor",c.borderTopColor),dojo.style(a,"backgroundColor",c.backgroundColor)},_getTemplate:function(){var a='\x3cdiv id\x3d"iedResizeDiv" class\x3d"iedResizeDiv" \x3e\x3ctextarea  dojoType\x3d"dijit.form.SimpleTextarea" name\x3d"davinciIleb" trim\x3d"true" id\x3d"davinciIleb" class\x3d"smartInputTextArea" \x3e\x3c/textarea\x3e\x3cdiv id\x3d"smartInputSim" class\x3d"smartInputSim" \x3e\x3c/div\x3e\x3c/div\x3e';
"true"===this.multiLine&&(a='\x3cdiv id\x3d"iedResizeDiv" class\x3d"iedResizeDiv" \x3e\x3ctextarea  dojoType\x3d"dijit.form.SimpleTextarea" name\x3d"davinciIleb" trim\x3d"true" id\x3d"davinciIleb" class\x3d"smartInputTextAreaMulti" \x3e\x3c/textarea\x3e\x3cdiv id\x3d"smartInputSim" class\x3d"smartInputSim" \x3e\x3c/div\x3e\x3c/div\x3e');return""+a+'\x3cdiv  id\x3d"davinci.ve.input.SmartInput_div"  class\x3d"davinciVeInputSmartInputDiv" \x3e\x3cdiv id\x3d"davinci.ve.input.SmartInput_radio_div" class\x3d"smartInputRadioDiv" \x3e\x3ctable id\x3d"davinci.ve.input.SmartInput_table"\x3e \x3ctbody\x3e\x3ctr\x3e \x3ctd class\x3d"smartInputTd1" \x3e \x3cinput id\x3d"davinci.ve.input.SmartInput_radio_text" showlabel\x3d"true" type\x3d"radio" dojoType\x3d"dijit.form.RadioButton" disabled\x3d"false" readOnly\x3d"false" intermediateChanges\x3d"false" checked\x3d"true"\x3e \x3c/input\x3e \x3c/td\x3e \x3ctd class\x3d"smartInputTd2" \x3e\x3cdiv id\x3d"davinci.ve.input.SmartInput_radio_text_width_div" class\x3d"smartInputRadioTextDiv"\x3e\x3c/div\x3e\x3c/td\x3e \x3c/tr\x3e\x3ctr\x3e \x3ctd class\x3d"smartInputTd1"\x3e \x3cinput id\x3d"davinci.ve.input.SmartInput_radio_html" showlabel\x3d"true" type\x3d"radio" dojoType\x3d"dijit.form.RadioButton"\x3e \x3c/input\x3e  \x3c/td\x3e \x3ctd class\x3d"smartInputTd2"\x3e\x3cdiv id\x3d"davinci.ve.input.SmartInput_radio_html_width_div" class\x3d"smartInputRadioTextDiv"\x3e\x3c/div\x3e\x3c/td\x3e \x3c/tr\x3e \x3c/tbody\x3e\x3c/table\x3e \x3cdiv class\x3d"smartInputHelpDiv" \x3e \x3cspan id\x3d"davinci.ve.input.SmartInput_img_help"  title\x3d"Help" class\x3d"inlineEditHelp" \x3e \x3c/span\x3e\x3cspan class\x3d"smartInputSpacerSpan" \x3e\x3cbutton id\x3d"davinci.ve.input.SmartInput_ok"  dojoType\x3d"dijit.form.Button" type\x3d"submit" class\x3d"inlineEditHelpOk" \x3e'+
e.buttonOk+'\x3c/button\x3e \x3cbutton id\x3ddavinci.ve.input.SmartInput_cancel dojoType\x3d"dijit.form.Button" class\x3d"inlineEditHelpCancel"\x3e '+e.buttonCancel+'\x3c/button\x3e  \x3c/span\x3e   \x3c/div\x3e \x3cdiv id\x3d"davinci.ve.input.SmartInput_div_help" style\x3d"display:none;" class\x3d"smartInputHelpTextDiv" \x3e \x3cdiv dojoType\x3d"dijit.layout.ContentPane" class\x3d"smartInputHelpTextDivContentPane "style\x3d"padding:0;" \x3e'+this.getHelpText()+'\x3c/div\x3e \x3cdiv style\x3d"text-align: left; padding:0; height:2px;" \x3e\x3c/div\x3e \x3c/div\x3e \x3c/div\x3e\x3c/div\x3e '},
_connectResizeHandle:function(){},_connectSimDiv:function(){this._connection.push(dojo.connect(this._inline.eb,"onFocus",this,"updateSimStyle"));this._connection.push(dojo.connect(this._inline.eb,"onMouseOver",this,"updateSimStyle"));this._connection.push(dojo.connect(this._inline.eb,"onMouseOut",this,"updateSimStyle"));this._connection.push(dojo.connect(dojo.byId(" davinci.ve.input.SmartInput_div"),"onclick",this,"updateSimStyle"))}})})},"davinci/ve/commands/ModifyRichTextCommand":function(){define(["dojo/_base/declare"],
function(p){return p("davinci.ve.commands.ModifyRichTextCommand",null,{name:"modify",constructor:function(m,h,g,f){this._oldId=m?m.id:void 0;this._properties=h=h||{};h.richText?(this._richText=!0,this._children=this._newText=h.richText,delete h.richText):this._children=h._children;this._context=f||m.getContext()},setContext:function(m){this._context=m},add:function(m){m&&m._oldId==this._oldId&&(m._properties&&dojo.mixin(this._properties,m._properties),m._children&&(this._children=m._children))},execute:function(){if(this._oldId&&
this._properties){var m=require("davinci/ve/widget"),h=m.byId(this._oldId);if(h){this._parentWidget=h.getParent();this._oldText||(this._oldText=h._srcElement.getElementText(this._context))&&"string"==typeof this._oldText&&(this._oldText=this._oldText.replace(/\n/g,""));this._oldData||(this._oldData=h.getData(),this._oldData.context=this._context,this._newData={type:this._oldData.type,properties:dojo.mixin({},this._oldData.properties,this._properties),children:this._newText,maqStates:this._oldData.maqStates,
maqDeltas:this._oldData.maqDeltas,context:this._context},this._oldData={type:this._oldData.type,properties:dojo.mixin({},this._oldData.properties,this._properties),children:this._oldText,maqStates:this._oldData.maqStates,maqDeltas:this._oldData.maqDeltas,context:this._context});var g=this._context;g&&g.detach(h);this._properties.id&&delete this._newData.properties.isTempID;this._newId_isTempID||(this._newId_isTempID=this._newData.properties.isTempID);this._oldId_isTempID||(this._oldId_isTempID=this._oldData.properties.isTempID);
var f=null,e=this._parentWidget.indexOf(h);this._parentWidget.removeChild(h);h.destroyWidget();this._newId&&(this._newData.properties.id=this._newId);this._newId_isTempID&&(this._newData.properties.isTempID=this._newId_isTempID);if(f=m.createWidget(this._newData))this._parentWidget.addChild(f,e),this._newId=f.id,this._context&&this._refresh(f),g&&(g.widgetAddedOrDeleted(),this._oldId!=this._newId&&g.widgetChanged(g.WIDGET_ID_CHANGED,f,this._oldId),g.widgetChanged(g.WIDGET_MODIFIED,f)),this.newWidget=
f,dojo.publish("/davinci/ui/widget/replaced",[f,h]),require("davinci/ve/States").resetState(f.domNode)}}},undo:function(){if(this._newId&&this._oldData){var m=require("davinci/ve/widget"),h=m.byId(this._newId);if(h){var g=dojo.indexOf(this._parentWidget.getChildren(),h);if(!(0>g)){var f=this._parentWidget.getContext();f&&f.detach(h);this._parentWidget.removeChild(h);h.destroyWidget();this._oldData.children=this._oldText;this._oldData.properties.id=this._oldId;m=m.createWidget(this._oldData);this._parentWidget.addChild(m,
g);f&&this._refresh(m);f.widgetAddedOrDeleted();f.widgetChanged(f.WIDGET_MODIFIED,m);dojo.publish("/davinci/ui/widget/replaced",[m,h]);require("davinci/ve/States").resetState(m.domNode)}}}},_refresh:function(m){var h=m.getContainerNode();h&&this._context.getGlobal().require("dojo/parser").parse(h);this._context.attach(m);m.startup();m.renderWidget();h&&this._context._attachChildren(h)}})})},"davinci/ui/dnd/DragSource":function(){define(["dojo/_base/declare","dojo/fx"],function(p,m){return p("davinci.ui.dnd.DragSource",
null,{disabled:!1,dragObject:null,dragClone:null,offsetParent:null,offsetParentCoords:null,parentCoords:null,refNode:null,positioning:null,useCurrentPositioning:!0,targetShouldShowCaret:!1,draggingMousePosition:"TopLeft",data:null,returnCloneOnFailure:!0,constructor:function(h,g,f,e){this.data=f;h=dojo.byId(h);h.dragSource=this;this.domNode=h;this.dragObject=e?e:h;this.refNode=h;this.type=g;this.offsetParent=dojo.doc.body},onDragDown:function(h){this.useCurrentPositioning&&(this.positioning=dojo.style(this.refNode,
"position"));this.storeMouseDownInfo(h);this.initDrag(h)},onDragStart:function(h){this.createDragClone(h);return h._dragClone=this.dragClone},onDragMove:function(h){"TopLeft"==this.draggingMousePosition?(this.dragClone.style.top=h.pageY+4+(h.documentY||0)+"px",this.dragClone.style.left=h.pageX+4+(h.documentX||0)+"px"):"ClickedPosition"==this.draggingMousePosition&&(this.dragClone.style.top=h.pageY-this.dragOffset.y+(h.documentY||0)+"px",this.dragClone.style.left=h.pageX-this.dragOffset.x+(h.documentX||
0)+"px");"none"==this.dragClone.style.display&&(this.dragClone.style.display="")},onDragEnd:function(h){"dropSuccess"!=h.dragStatus&&this.returnCloneOnFailure?"dropFailure"==h.dragStatus?this.returnClone():console.error("DragSource#onDragEnd: internal error: e.dragStatus is not set"):this.removeClone();this.cleanupDrag()},unregister:function(){this.domNode.dragSource=null;this.cleanupDrag()},reregister:function(){this.domNode.dragSource=this;this.initDrag()},storeMouseDownInfo:function(h){this.layerX=
h.layerX-1;this.layerY=h.layerY-1;this.pageX=h.pageX;this.pageY=h.pageY;this.scrollOffset=dojo._docScroll();window.__x&&window.__x.apply(this);this.dragStartPosition=dojo.position(this.refNode,!0);this.dragStartCssPosition={y:this.refNode.offsetTop,x:this.refNode.offsetLeft};this.dragOffset={y:h.pageY-this.dragStartPosition.y,x:h.pageX-this.dragStartPosition.x};this.offsetParentCoords=dojo.position(this.offsetParent,!0);h=dojo.position(this.domNode.parentNode,!0);this.parentCoords={y:h.y-this.offsetParentCoords.y,
x:h.x-this.offsetParentCoords.x};this.fixMouseDownInfo&&this.fixMouseDownInfo(this)},initDrag:function(){},cleanupDrag:function(){},createDragClone:function(h){this.dragClone=h=h.dragSource.dragHandler&&h.dragSource.dragHandler.createDragClone?h.dragSource.dragHandler.createDragClone():this.dragObject.cloneNode(!0);dojo.style(h,"opacity",.5);h.style.zIndex=1001E3;var g=dojo.contentBox(this.dragObject);h.style.width=g.w+"px";h.style.height=g.h+"px";h.style.top=this.dragObject.offsetTop+4+"px";h.style.left=
this.dragObject.offsetLeft+4+"px";h.style.position="absolute";h.style.clear="both";h.style.display="none";this.offsetParent.appendChild(h)},setDragTarget:function(h){this.dragObject=h},cancelEvent:function(h){h.stopPropagation();h.preventDefault()},removeClone:function(){setTimeout(dojo.hitch(this,"removeClone_1"),0)},removeClone_1:function(){try{this.dragClone.parentNode.removeChild(this.dragClone),this.dragClone=null}catch(h){logError(h)}},returnClone:function(){var h=dojo.position(this.dragClone,
!0),g=this.dragStartPosition,f=this;m.slideTo({node:this.dragClone,top:h.y>g.y?g.y-10:g.y+10,left:h.x>g.x?g.x-10:g.x+10,duration:400,onEnd:function(){m.slideTo({node:f.dragClone,top:g.y,left:g.x,duration:100,onEnd:function(){f.dragClone.parentNode.removeChild(f.dragClone);f.dragClone=null;f.onCloneReturned()}}).play()}}).play()},onCloneReturned:function(){},globalChangeCursor:function(h){var g=dojo.doc.styleSheets[0];if(g)if(h){if(this._showingCursor){if(this._showingCursor==h)return;this.globalChangeCursor(null)}this._showingCursor=
h;this._ruleIndex=g.cssRules.length;g.insertRule("*{cursor:"+h+" ! important;}",g.cssRules.length)}else this._showingCursor&&(this._showingCursor=null,g.deleteRule(this._ruleIndex))}})})},"dojo/fx":function(){define("./_base/lang ./Evented ./_base/kernel ./_base/array ./aspect ./_base/fx ./dom ./dom-style ./dom-geometry ./ready require".split(" "),function(p,m,h,g,f,e,c,a,q,k,d){h.isAsync||k(0,function(){d(["./fx/Toggler"])});h=h.fx={};k={_fire:function(a,b){this[a]&&this[a].apply(this,b||[]);return this}};
var b=function(a){this._index=-1;this._animations=a||[];this._current=this._onAnimateCtx=this._onEndCtx=null;this.duration=0;g.forEach(this._animations,function(a){this.duration+=a.duration;a.delay&&(this.duration+=a.delay)},this)};b.prototype=new m;p.extend(b,{_onAnimate:function(){this._fire("onAnimate",arguments)},_onEnd:function(){this._onAnimateCtx.remove();this._onEndCtx.remove();this._onAnimateCtx=this._onEndCtx=null;this._index+1==this._animations.length?this._fire("onEnd"):(this._current=
this._animations[++this._index],this._onAnimateCtx=f.after(this._current,"onAnimate",p.hitch(this,"_onAnimate"),!0),this._onEndCtx=f.after(this._current,"onEnd",p.hitch(this,"_onEnd"),!0),this._current.play(0,!0))},play:function(a,b){this._current||(this._current=this._animations[this._index=0]);if(!b&&"playing"==this._current.status())return this;var c=f.after(this._current,"beforeBegin",p.hitch(this,function(){this._fire("beforeBegin")}),!0),d=f.after(this._current,"onBegin",p.hitch(this,function(a){this._fire("onBegin",
arguments)}),!0),e=f.after(this._current,"onPlay",p.hitch(this,function(a){this._fire("onPlay",arguments);c.remove();d.remove();e.remove()}));this._onAnimateCtx&&this._onAnimateCtx.remove();this._onAnimateCtx=f.after(this._current,"onAnimate",p.hitch(this,"_onAnimate"),!0);this._onEndCtx&&this._onEndCtx.remove();this._onEndCtx=f.after(this._current,"onEnd",p.hitch(this,"_onEnd"),!0);this._current.play.apply(this._current,arguments);return this},pause:function(){if(this._current){var a=f.after(this._current,
"onPause",p.hitch(this,function(b){this._fire("onPause",arguments);a.remove()}),!0);this._current.pause()}return this},gotoPercent:function(a,b){this.pause();var c=this.duration*a;this._current=null;g.some(this._animations,function(a){if(a.duration<=c)return this._current=a,!0;c-=a.duration;return!1});this._current&&this._current.gotoPercent(c/this._current.duration,b);return this},stop:function(a){if(this._current){if(a){for(;this._index+1<this._animations.length;++this._index)this._animations[this._index].stop(!0);
this._current=this._animations[this._index]}var b=f.after(this._current,"onStop",p.hitch(this,function(a){this._fire("onStop",arguments);b.remove()}),!0);this._current.stop()}return this},status:function(){return this._current?this._current.status():"stopped"},destroy:function(){this._onAnimateCtx&&this._onAnimateCtx.remove();this._onEndCtx&&this._onEndCtx.remove()}});p.extend(b,k);h.chain=function(a){return new b(a)};var n=function(a){this._animations=a||[];this._connects=[];this.duration=this._finished=
0;g.forEach(a,function(a){var b=a.duration;a.delay&&(b+=a.delay);this.duration<b&&(this.duration=b);this._connects.push(f.after(a,"onEnd",p.hitch(this,"_onEnd"),!0))},this);this._pseudoAnimation=new e.Animation({curve:[0,1],duration:this.duration});var b=this;g.forEach("beforeBegin onBegin onPlay onAnimate onPause onStop onEnd".split(" "),function(a){b._connects.push(f.after(b._pseudoAnimation,a,function(){b._fire(a,arguments)},!0))})};p.extend(n,{_doAction:function(a,b){g.forEach(this._animations,
function(c){c[a].apply(c,b)});return this},_onEnd:function(){++this._finished>this._animations.length&&this._fire("onEnd")},_call:function(a,b){var c=this._pseudoAnimation;c[a].apply(c,b)},play:function(a,b){this._finished=0;this._doAction("play",arguments);this._call("play",arguments);return this},pause:function(){this._doAction("pause",arguments);this._call("pause",arguments);return this},gotoPercent:function(a,b){var c=this.duration*a;g.forEach(this._animations,function(a){a.gotoPercent(a.duration<
c?1:c/a.duration,b)});this._call("gotoPercent",arguments);return this},stop:function(a){this._doAction("stop",arguments);this._call("stop",arguments);return this},status:function(){return this._pseudoAnimation.status()},destroy:function(){g.forEach(this._connects,function(a){a.remove()})}});p.extend(n,k);h.combine=function(a){return new n(a)};h.wipeIn=function(b){var d=b.node=c.byId(b.node),g=d.style,h;b=e.animateProperty(p.mixin({properties:{height:{start:function(){h=g.overflow;g.overflow="hidden";
if("hidden"==g.visibility||"none"==g.display)return g.height="1px",g.display="",g.visibility="",1;var b=a.get(d,"height");return Math.max(b,1)},end:function(){return d.scrollHeight}}}},b));var n=function(){g.height="auto";g.overflow=h};f.after(b,"onStop",n,!0);f.after(b,"onEnd",n,!0);return b};h.wipeOut=function(a){var b=(a.node=c.byId(a.node)).style,d;a=e.animateProperty(p.mixin({properties:{height:{end:1}}},a));f.after(a,"beforeBegin",function(){d=b.overflow;b.overflow="hidden";b.display=""},!0);
var g=function(){b.overflow=d;b.height="auto";b.display="none"};f.after(a,"onStop",g,!0);f.after(a,"onEnd",g,!0);return a};h.slideTo=function(b){var d=null,g=null,h=function(b){return function(){var c=a.getComputedStyle(b),e=c.position;d="absolute"==e?b.offsetTop:parseInt(c.top)||0;g="absolute"==e?b.offsetLeft:parseInt(c.left)||0;"absolute"!=e&&"relative"!=e&&(c=q.position(b,!0),d=c.y,g=c.x,b.style.position="absolute",b.style.top=d+"px",b.style.left=g+"px")}}(b.node=c.byId(b.node));h();b=e.animateProperty(p.mixin({properties:{top:b.top||
0,left:b.left||0}},b));f.after(b,"beforeBegin",h,!0);return b};return h})},"davinci/ve/commands/ModifyRuleCommand":function(){define(["dojo/_base/declare","../States","../../html/CSSModel"],function(p,m,h){var g=function(f,e){f.removeAllProperties();e.forEach(function(c){f.addProperty(c.name,c.value)})};return p("davinci.ve.commands.ModifyRuleCommand",null,{name:"modify rule",constructor:function(f,e,c){this.cssRule=f;this.values=e;this.context=c},execute:function(f){this.context||(this.context=f);
if(this.cssRule&&this.values&&this.context){this._oldValues=this.cssRule.getProperties();f=this.cssRule;var e=this.values,c,a,g=[],k=[];for(c=0;c<e.length;c++)for(var d in e[c])(a=f.getProperty(d))&&k.push(a),f.removeProperty(d);for(c=0;c<f.properties.length;c++){a=f.properties[c];var b={};b[a.name]=a.value;g.push(b)}e=g.concat(dojo.clone(e));a=h.shorthand;for(c=g=0;c<a.length;c++){a:{for(var b=a[c][0],n=0;n<e.length;n++)if(e[n].hasOwnProperty(b)){b=n;break a}b=-1}-1<b&&(n=e[b],e.splice(b,1),e.splice(g,
0,n),g++)}for(c=f.properties.length-1;0<=c;c--)if(a=f.properties[c])k.push(f.getProperty(a.name)),f.removeProperty(a.name);for(c=0;c<e.length;c++)for(d in e[c])if(e[c][d]&&""!==e[c][d])for(f.addProperty(d,e[c][d]),a=0;a<k.length;a++)if(k[a].name===d){g=f.getProperty(d,e[c][d]);k[a].comment&&(g.comment=k[a].comment);k[a].postComment&&(g.postComment=k[a].postComment);k.splice(a,1);break}this._setDirty()}},undo:function(){this.cssRule&&this._oldValues&&this.context&&(g(this.cssRule,this._oldValues),
this._setDirty())},_setDirty:function(){this.cssRule.getCSSFile().setDirty(!0);this.context.editor.setDirty(!0);m.resetState(this.context.rootNode);this.context._selection&&(this.context._forceSelectionChange=!0)}})})},"davinci/ve/widgets/WidgetToolBar":function(){define("dojo/_base/declare dijit/_Templated dijit/_Widget davinci/Runtime davinci/workbench/ViewLite davinci/ve/commands/ModifyCommand dojo/store/Memory davinci/lang/ve davinci/ve/widget dojo/text!./templates/WidgetToolBar.html".split(" "),
function(p,m,h,g,f,e,c,a,q,k){return p("davinci.ve.widgets.WidgetToolBar",[f,h,m],{templateString:k,widgetsInTemplate:!0,descNode:null,idTextBox:null,classComboBox:null,blockGroupComboBox:null,widgetDescStart:"",widgetDescUnselectEnd:"",_oldIDName:null,_oldClassName:null,_oldBlockGroup:null,veNLS:a,cssRules:null,postCreate:function(){this.idTextBox.validator=dojo.hitch(this,function(b,c){this.invalidMessage=null;return b&&this._widget&&!this.changing?(b=q.byId(b))&&b!==this._widget?(this.invalidMessage=
a.idAlreadyUsed,!1):!0:!0});dojo.subscribe("/davinci/ui/widget/replaced",dojo.hitch(this,this._widgetReplaced));var c=this;this.subscribe("CSSRulesUpdated",function(a){c.cssRules=a.names;c.onWidgetSelectionChange()})},initialize:function(){if((this._editor=g.currentEditor)&&this._editor.visualEditor&&this._editor.visualEditor.context){var a=this._editor.visualEditor.context.getSelection();this._widget=0==a.length?null:a[0]}else this._widget=null;this.onWidgetSelectionChange()},cssSelect:null,startup:function(){this.inherited(arguments);
if(!this.cssSelect){this.cssSelect=$(this.cssClasses).selectize({delimiter:",",persist:!0,inputClass:"selectize-input form-control input-transparent",plugins:["restore_on_backspace"],createOnBlur:!0,dropdownParent:"body",create:function(a){return{value:a,text:a}}}).data().selectize;var a=this;this.cssSelect.on("change",function(){var b=a.cssSelect.getValue();a._widget&&!a.changing&&(a.context&&a.context.blockChange(!1),b=b.split(",").join(" "),b!==a._oldClassName&&(a._oldClassName=b,b=new davinci.ve.commands.ModifyCommand(a._widget,
{"class":b},null),dojo.publish("/davinci/ui/widgetPropertiesChanges",[{source:a._editor.editor_id,command:b}])))})}},onEditorSelected:function(){this.initialize();this.domNode.style.display=this._editor&&"davinci.ve.HTMLPageEditor"==this._editor.editorID?"block":"none"},_widgetReplaced:function(a,b){this._widget===b&&(this._widget=a,this.onWidgetSelectionChange())},onWidgetSelectionChangeBak:function(){var d="";if(this._widget){d=q.getLabel(this._widget);this.context=this._widget.getContext();this.classComboBox.set("disabled",
!1);this.idTextBox.attr("disabled",!1);this.changing=!0;this._oldBlockGroup=this._oldClassName=this._oldIDName=null;dojo.addClass(this.domNode,"propertiesSelection");this.descNode.innerHTML=d;if(this._editor&&"davinci.ve.PageEditor"===this._editor.declaredClass&&(d=this._widget._srcElement)){var b=[],e=this._widget.getContext().getModel().getDocumentElement();if(e){var f={visit:function(a){"HTMLElement"==a.elementType&&"body"!=a.tag&&"html"!=a.tag&&(a=a.getAttribute("class"))&&(a=dojo.trim(a).split(" "),
dojo.forEach(a,dojo.hitch(this,function(a){-1==dojo.indexOf(this.classes,a)&&this.classes.push(a)})))},classes:[]};e.visit(f);dojo.forEach(f.classes,function(a){b.push({name:a})})}this.cssRules&&_.each(this.cssRules,function(a){_.find(b,{name:a})||b.push({name:a})});e=new c({data:b});this.classComboBox.set("store",e);d=(d=d.getAttribute("class"))&&dojo.trim(d)||"";this.cssSelect&&(_.each(b,function(a){this.cssSelect.addOption({value:a.name,text:a.name})},this),this.cssSelect.setValue(d.split(" "),
!0));this.classComboBox.set("value",d);this._oldClassName=d;this._oldIDName=d=(d=this._widget.getId())&&dojo.trim(d)||"";this.idTextBox.attr("value",d);this._widget.domNode&&this._widget.domNode&&((d=this._widget.domNode.blockGroup)||(d=this._widget.domNode.getAttribute("blockGroup")),this._oldBlockGroup=d)}this.changing=!1}else this.descNode.innerHTML=a.noSelection,dojo.removeClass(this.domNode,"propertiesSelection"),this.context=null,this.classComboBox.set("value",""),this.classComboBox.set("disabled",
!0),this.idTextBox.attr("value",""),this.idTextBox.attr("disabled",!0)},onWidgetSelectionChange:function(){var c="";if(!this._widget||!this._widget.isFake)if(this._widget&&this._widget.getContext){c=q.getLabel(this._widget);this.context=this._widget.getContext();this.idTextBox.attr("disabled",!1);this.cssSelect&&this.cssSelect.enable();this.changing=!0;this._oldBlockGroup=this._oldClassName=this._oldIDName=null;dojo.addClass(this.domNode,"propertiesSelection");this.descNode.innerHTML=c;if(this._editor&&
"davinci.ve.PageEditor"===this._editor.declaredClass&&(c=this._widget._srcElement)){var b=[],e=this._widget.getContext().getModel().getDocumentElement();if(e){var f={visit:function(a){"HTMLElement"==a.elementType&&"body"!=a.tag&&"html"!=a.tag&&(a=a.getAttribute("class"))&&(a=dojo.trim(a).split(" "),dojo.forEach(a,dojo.hitch(this,function(a){-1==dojo.indexOf(this.classes,a)&&this.classes.push(a)})))},classes:[]};e.visit(f);dojo.forEach(f.classes,function(a){b.push({name:a})})}this.cssRules&&_.each(this.cssRules,
function(a){_.find(b,{name:a})||b.push({name:a})});c=(c=c.getAttribute("class"))&&dojo.trim(c)||"";this.cssSelect&&(_.each(b,function(a){this.cssSelect.addOption({value:a.name,text:a.name})},this),this.cssSelect.setValue(c.split(" "),!0));this._oldClassName=c;this._oldIDName=c=(c=this._widget.getId())&&dojo.trim(c)||"";this.idTextBox.attr("value",c);this._widget.domNode&&this._widget.domNode&&((c=this._widget.domNode.blockGroup)||(c=this._widget.domNode.getAttribute("blockGroup")),this._oldBlockGroup=
c)}this.changing=!1}else this.descNode.innerHTML=a.noSelection,dojo.removeClass(this.domNode,"propertiesSelection"),this.context=null,this.cssSelect&&this.cssSelect.disable(),this.cssSelect&&this.cssSelect.setValue([]),this.idTextBox.attr("value",""),this.idTextBox.attr("disabled",!0)},_onChangeIDAttribute:function(){if(this._widget&&!this.changing){var a=this.idTextBox;a&&a.isValid()&&(this.context&&this.context.blockChange(!1),a=a.attr("value"),a!==this._oldIDName&&(this._oldIDName=a,a=new e(this._widget,
{id:a},null),dojo.publish("/davinci/ui/widgetPropertiesChanges",[{source:this._editor.editor_id,command:a}])))}},_onChangeClassAttribute:function(){if(this._widget&&!this.changing){var a=this.classComboBox;a&&(this.context&&this.context.blockChange(!1),a=a.attr("value"),a!==this._oldClassName&&(this._oldClassName=a,a=new davinci.ve.commands.ModifyCommand(this._widget,{"class":a},null),dojo.publish("/davinci/ui/widgetPropertiesChanges",[{source:this._editor.editor_id,command:a}])))}},_onChangeBlockGroupAttribute:function(){if(this._widget&&
!this.changing){var a=this.blockGroupComboBox;a&&(this.context&&this.context.blockChange(!1),a=a.attr("value"),a!==this._oldBlockGroup&&(this._oldBlockGroup=a,a=new davinci.ve.commands.ModifyCommand(this._widget,{blockGroup:a},null),this.publish("/davinci/ui/widgetPropertiesChanges",[{source:this._editor.editor_id,command:a}])))}},_onFieldFocus:function(){this.context&&this.context.blockChange(!0)},_onFieldBlur:function(){this.context&&this.context.blockChange(!1)},_onKeyPress:function(a){a.keyCode==
dojo.keys.ENTER&&this._onChangeIDAttribute()}})})},"davinci/workbench/ViewLite":function(){define(["dojo/_base/declare","./WidgetLite","../ve/States"],function(p,m){return p("davinci.workbench.ViewLite",[m],{_editor:null,_widget:null,_subWidget:null,constructor:function(h,g){this.subscriptions=[];this.publishing={};this.subscribe("/davinci/ui/editorSelected",dojo.hitch(this,this._editorSelected));this.subscribe("/davinci/ui/widgetSelected",dojo.hitch(this,this._widgetSelectionChanged))},_widgetSelectionChanged:function(h){if(!h.done&&
this._editor&&h.selection){var g=h.selection[0];if(g&&this._widget==g&&this._subwidget==g.subwidget)return!1;this._subwidget=(this._widget=g)&&g.subwidget;this.onWidgetSelectionChange&&!h.done&&(h.done=!0,this.onWidgetSelectionChange(h))}},_editorSelected:function(h){this._editor=h.editor;if(this.onEditorSelected)this.onEditorSelected(this._editor)},_subscribe:function(h,g){this.subscriptions.push(dojo.subscribe(h,this,g))},publish:function(h,g){this.publishing[h]=!0;try{dojo.publish(h,g)}catch(f){console.error(f)}delete this.publishing[h]},
destroy:function(){dojo.forEach(this.subscriptions,dojo.unsubscribe);delete this.subscriptions;this._destroyHandles()}})})},"dojo/store/Memory":function(){define(["../_base/declare","./util/QueryResults","./util/SimpleQueryEngine"],function(p,m,h){return p("dojo.store.Memory",null,{constructor:function(g){for(var f in g)this[f]=g[f];this.setData(this.data||[])},data:null,idProperty:"id",index:null,queryEngine:h,get:function(g){return this.data[this.index[g]]},getIdentity:function(g){return g[this.idProperty]},
put:function(g,f){var e=this.data,c=this.index,a=this.idProperty,a=g[a]=f&&"id"in f?f.id:a in g?g[a]:Math.random();if(a in c){if(f&&!1===f.overwrite)throw Error("Object already exists");e[c[a]]=g}else c[a]=e.push(g)-1;return a},add:function(g,f){(f=f||{}).overwrite=!1;return this.put(g,f)},remove:function(g){var f=this.index,e=this.data;if(g in f)return e.splice(f[g],1),this.setData(e),!0},query:function(g,f){return m(this.queryEngine(g,f)(this.data))},setData:function(g){g.items?(this.idProperty=
g.identifier,g=this.data=g.items):this.data=g;this.index={};for(var f=0,e=g.length;f<e;f++)this.index[g[f][this.idProperty]]=f}})})},"dojo/store/util/QueryResults":function(){define(["../../_base/array","../../_base/lang","../../when"],function(p,m,h){var g=function(f){function e(c){f[c]||(f[c]=function(){var a=arguments;return h(f,function(e){Array.prototype.unshift.call(a,e);return g(p[c].apply(p,a))})})}if(!f)return f;f.then&&(f=m.delegate(f));e("forEach");e("filter");e("map");f.total||(f.total=
h(f,function(c){return c.length}));return f};m.setObject("dojo.store.util.QueryResults",g);return g})},"dojo/store/util/SimpleQueryEngine":function(){define(["../../_base/array"],function(p){return function(m,h){function g(e){e=p.filter(e,m);var c=h&&h.sort;c&&e.sort("function"==typeof c?c:function(a,e){for(var d,b=0;d=c[b];b++){var f=a[d.attribute],g=e[d.attribute];if(f!=g)return!!d.descending==(null==f||f>g)?-1:1}return 0});if(h&&(h.start||h.count)){var a=e.length;e=e.slice(h.start||0,(h.start||
0)+(h.count||Infinity));e.total=a}return e}switch(typeof m){default:throw Error("Can not query with a "+typeof m);case "object":case "undefined":var f=m;m=function(e){for(var c in f){var a=f[c];if(a&&a.test){if(!a.test(e[c],e))return!1}else if(a!=e[c])return!1}return!0};break;case "string":if(!this[m])throw Error("No filter function "+m+" was found in store");m=this[m];case "function":}g.matches=m;return g}})},"davinci/ve/widgets/Cascade":function(){define("dojo/_base/declare ../../workbench/WidgetLite ../../workbench/Preferences ../../Workbench ../../html/CSSModel ../../library ../../Theme ../../html/CSSRule ../States davinci/lang/ve/ve system/resource".split(" "),
function(p,m,h,g,f,e,c,a,q,k,d){p=p("davinci.ve.widgets.Cascade",[m],{target:null,targetField:null,toggleClasses:null,_regex_combinators:/[\s\~\+\>]+/,_regex_not_pseudoclass:/(.*)\:not\((.*)\)(.*)/,_regex_pseudoelement:/(.*)(\:\:[^\:\.\#\[]*)(.*)/,_regex_id:/(.*)(\#[^\:\.\#\[]*)(.*)/,_regex_class:/(.*)(\.[^\:\.\#\[]*)(.*)/,_regex_attribute:/(.*)(\[[^\]]*\])(.*)/,_regex_pseudoclass:/(.*)(\:[^\:\.\#\[]*)(.*)/,_regex_univeral:/(.*)(\*[^\:\.\#\[]*)(.*)/,delegate:null,constructor:function(a,c){this.subscriptions=
[];this.publishing={};this._radioGroupName="davinci_ve_widgets_Cascade"+davinci.ve.widgets.Cascade.__id++;this._handles=[];this._values=[];this.inherited(arguments)},buildRendering:function(){this.domNode=dojo.doc.createElement("div");this.container=dojo.doc.createElement("div");dojo.addClass(this.container,"showCascade");this.domNode.appendChild(this.container);this.topDiv=dojo.create("div",{"class":"cascadeTopDiv"},this.container);this.cascadeTableDiv=dojo.create("div",{"class":"cascadeTableDiv widget"},
this.container);dojo.removeClass(this.container,"showAllValues");dojo.isArray(this.target)||(this.target=[this.target]);dojo.addClass(this.domNode,"CascadeTop");this.inherited(arguments)},startup:function(){var a=dijit.byId(this.targetField);if(a)a._cascade=this,this._getFieldValue=function(){return a.get("value")},this._setFieldValue=function(b,c){a.set&&(this._value=b||"",this._loc=c,a._setBaseLocationAttr&&a.set("baseLocation",c&&c.getPath?c.getPath():null),a.set("value",this._value,!0))},dojo.connect(a,
"onChange",this,"_onFieldChange"),dojo.connect(a,"onFocus",this,"_onFieldFocus"),dojo.connect(a,"onBlur",this,"_onFieldBlur");else{var c=dojo.byId(this.targetField);this._getFieldValue=function(){return dojo.attr(c,"value")};this._setFieldValue=function(a,b){this._value=a||"";this._loc=b;dojo.attr(c,"value",this._value)};dojo.connect(c,"onchange",this,"_onFieldChange",!0);dojo.connect(c,"onfocus",this,"_onFieldFocus",!0);dojo.connect(c,"onblur",this,"_onFieldBlur",!0)}this._value=this._getFieldValue();
this._started=!0},_canModifyRule:function(a){return a&&a.getCSSFile?(a=a.getCSSFile())?!d.findResource(a.url).readOnly():!0:!0},_onFieldChange:function(a){function b(){e&&q&&q[e]&&q[e].resolve()}function c(a){a._value=a._getFieldValue();a._valueArray=a._valueArrayNew;var b=a._valueArray&&dojo.isArray(a._valueArray)&&0<a._valueArray.length?a._valueArray:a._value;a._changeValue(a._targetValueIndex,b)}a=function(a,b){if(!a&&!b)return!0;if(!a&&b||a&&!b||a.length!=b.length)return!1;for(var c=0;c<a.length;c++)if(a[c]!==
b[c])return!1;return!0};this.context&&this.context.blockChange(!1);if(!(this._value==this._getFieldValue()&&a(this._valueArray,this._valueArrayNew)||1>this._values.length))if("(overrides)"==this._getFieldValue())this._setFieldValue&&this._setFieldValue("(overrides)",null);else if("number"==typeof this._targetValueIndex){var d=h.getPreferences("davinci.ve.editorPrefs",g.getProject());if(this._widget&&this.target&&0<this.target.length){var e=this.target[0];a=this._widget.getContext();var f;a&&(f=a.cascadeBatch);
if(f){var m=f.askUserResponse;if(f.deferreds)var q=f.deferreds}}!1===m?(this._setFieldValue(this._value,this._loc),b()):!0===m?(c(this),b()):(m=null,this._values[this._targetValueIndex].readOnly&&"davinci.themeEdit.ThemeEditor"!=this._editor.editorID?(m=k.propChangeCannotComplete+"\x3cbr\x3e\x3cbr\x3e"+dojo.string.substitute(k.toChangeProperty,["\x3ca href\x3d'app/docs/index.html#CreatingStyleRulesWithAppCss' target\x3d'_blank'\x3e"+k.creatingStyleRules+"\x3c/a\x3e"])+"\x3cbr/\x3e\x3cbr/\x3e",davinci.Workbench.showMessage(k.errorModifyingValue,
m,{width:350},dojo.hitch(this,function(){b();return!0})),f&&(f.askUserResponse=!1),this._setFieldValue(this._value,this._loc)):("theme"==this._values[this._targetValueIndex].type||"theme"==this._values[this._targetValueIndex].proposalTarget)&&d.cssOverrideWarn&&this._editor.supports("MultiPropTarget")?require(["davinci/ve/widgets/ChangeWillModify"],dojo.hitch(this,function(a){var e=new a;a=davinci.Workbench.showDialog({title:"",content:e,style:{width:350},okCallback:dojo.hitch(this,function(){f&&
(f.askUserResponse=!0);c(this);b();e.checkbox.get("checked")&&(d.cssOverrideWarn=!1,h.savePreferences("davinci.ve.editorPrefs",null,d))}),okLabel:null,hideCancel:null,submitOnEnter:!0});dojo.connect(a,"onCancel",dojo.hitch(this,function(){f&&(f.askUserResponse=!1);this._setFieldValue(this._value,this._loc);b();e.checkbox.get("checked")&&(d.cssOverrideWarn=!1,h.savePreferences("davinci.ve.editorPrefs",null,d))}))})):(c(this),b()))}},_changeValue:function(a,c){var b=void 0;this._whichStateInputElement&&
this._whichStateInputElement.checked&&(b=this._whichState);var d=this._values[a];a=[];for(var e=0;e<this.target.length;e++)if(dojo.isArray(c))for(var f=0;f<c.length;f++){var g={};g[this.target[e]]=c[f];a.push(g)}else g={},g[this.target[e]]=c,a.push(g);this._dirtyCascadeList=!0;"element.style"==d.type?("position"==this.target[0]&&1==a.length&&("absolute"==a[0].position?(c=this.context.getPreference("absoluteWidgetsZindex"),a.push({"z-index":c})):a.push({"z-index":""})),dojo.publish("/davinci/ui/styleValuesChange",
[{values:a,appliesTo:"inline",applyToWhichStates:b,cascade:this}])):dojo.publish("/davinci/ui/styleValuesChange",[{values:a,appliesTo:d,applyToWhichStates:b}])},_getAttribStyleValue:function(){return this.context.getStyleAttributeValues(this._widget)},_getShortHands:function(){if(this._shorthands)return this._shorthands;this._shorthands=[];for(var a=0;a<this.target.length;a++)this._buildShortHands(this.target[a]);return this._shorthands},_buildShortHands:function(a){for(var b=!1,c=0;c<f.shorthand.length;c++)if(a==
f.shorthand[c][0]){b=!0;break}if(b)for(a=f.shorthand[c][1],b=0;b<a.length;b++){for(var d=!1,c=0;c<this._shorthands.length&&!d;c++)this._shorthands[c]==a[b]&&(d=!0);d||this._shorthands.push(a[b]);this._buildShortHands(a[b])}return this._shorthands},_onChangeOverride:function(a){alert(k.valueIsOverriden);return!1},_getSelector:function(a,c){var b=this.context.getThemeMeta();if(!b)return[];a=b.loader.getType(a);if(b=b.metadata.getStyleSelectors(a,"Normal"))for(var d in b)for(a=0;a<b[d].length;a++)for(var e=
0;e<c.length;e++)if(c[e]==b[d][a])return d},_getMetaTargets:function(a,c){var b=this._getSelector(a,c);return this.context.getModel().getRule(b).filter(function(a){return a.getSelectorText()==b})},_getSelectionCssRules:function(a){this.context._cssCache=this.context._cssCache||{};var b=this.context.getSelection();if(!a&&!b.length)return{rules:null,matchLevels:null};var c=a||b[0].domNode||b[0],d=c.id+"_"+c.className;if(b.length){var e=this.context._cssCache[d]=this.context.model.getMatchingRules(c,
!0);this.context.cssFiles&&this.context.cssFiles.forEach(function(a){a.getMatchingRules(c,e.rules,e.matchLevels)});e.rules.forEach(function(a){var b=dojo.hitch(a,"onChange",this,function(){delete this.context._cssCache[d];connect.unsubscribe(b)})},this);return e}return{rules:null,matchLevels:null}},_getAllRules:function(){function a(a){if(a&&a.parent&&a.parent.url)return a=a.parent.url,/^themes\//.test(a)||/\/themes\//.test(a)?"theme":"queried"}var c=[];if("davinci.themeEdit.ThemeEditor"!=this._editor.editorID){var d=
this._getDefaultSelection();if(this._editor.supports("inline-style")&&"element.style"==d){for(var d=this._getAttribStyleValue(),e=null,f=0;f<d.length;f++)for(var g=d[f],h=0;h<this.target.length;h++){var k=this.target[h];void 0!==g[k]&&(e=g[k])}c.push({rule:d,value:e,matchLevel:"element.style",type:"element.style"})}if((d=this._getSelectionCssRules(this._topWidgetDom))&&d.rules)for(h=0;h<d.rules.length;h++){e="";f=d.rules[h];for(g=0;g<f.selectors.length;g++)0!=g&&(e+=", "),e+=f.selectors[g].getLabel();
f=a(f);c.push({rule:d.rules[h],ruleString:e,matchLevel:d.matchLevels[h],type:f})}this._addDeltaRules(this._widget,c);for(var d=this._getClasses(this._widget),m=0,e={},h=0;h<d.length;e={thisClass:e.thisClass},h++)e.thisClass=d[h],"string"==typeof e.thisClass&&0<e.thisClass.length&&this._getClassSelector(e.thisClass).forEach(function(a){return function(b){for(var d=!1,e=0;e<c.length;e++)if(this._compareSelectors(c[e].ruleString,b)){c[e].className=a.thisClass;d=!0;break}d||(d=this._computeMatchLevelSelector(b),
c.splice(m,0,{rule:null,ruleString:b,targetFile:this.targetFile,className:a.thisClass,value:null,matchLevel:d,type:"proposal"}),m++)}}(e).bind(this))}if("davinci.themeEdit.ThemeEditor"==this._editor.editorID){if(d=this._editor._getCssRules(this._widget,this._editor._selectedSubWidget,this._editor._currentState)){h=[];for(e=d.length-1;-1<e;--e)h.push(d[e]);d=h}}else d=this._widget?this._getMetaTargets(this._widget,this.target):[];for(h=0;h<d.length;h++){e=!1;for(f=0;!e&&f<c.length;f++)c[f].rule==d[h]&&
(e=!0,c[f].type="theme");e||c.push({rule:d[h],matchLevel:"theme",type:"theme"})}return c},_buildCssRuleset:function(){var a=this._getAllRules();this._values=[];this._hasOverride=!1;for(var c=this._getShortHands(),d=0;d<a.length;d++){var e=a[d].rule;if(e){for(var f=0;f<c.length;f++)if("element.style"!=a[d].type&&null!=a[d].rule.getProperty(c[f])){a[d].shorthand=c[f];var g=e.getProperty(c[f]);a[d].value=g&&g.value;this._hasOverride=!0}else"element.style"==a[d].type&&-1<dojo.indexOf(a[d].rule,c[f])&&
(a[d].shorthand=c[f],g=dojo.indexOf(a[d].rule,c[f]),a[d].value=e[g],this._hasOverride=!0);if(!a[d].shorthand&&"element.style"!=a[d].type)a[d].value=this._getRuleTargetValue(e);else if(!a[d].shorthand&&"element.style"==a[d].type)for(f=0;f<e.length;f++)e[f].hasOwnProperty(this.target[0])&&(a[d].value=e[f][this.target[0]])}}a=this._sortRules(a);this._addClasses(a);this._values=a},_sortRules:function(a){for(var b=[],c=0;c<a.length;c++){var d=!1;"element.style"==a[c].type&&(b.splice(0,0,a[c]),d=!0);for(var e=
0;!d&&e<b.length;e++)"element.style"!=b[e].matchLevel&&b[e].matchLevel<a[c].matchLevel&&(d=!0,b.splice(e,0,a[c]));d||b.push(a[c])}return b},_addClasses:function(a){for(var b=!1,c=0;c<a.length;c++)a[c].extraClass=[],b&&a[c].extraClass.push("cssShorthandOverRidden"),a[c].value||"element.style"!=a[c].type&&this._getRuleTargetValue(a[c].rule)?b=!0:a[c].value||"element.style"==a[c].type||a[c].extraClass.push("hiddenCascadeNode"),"element.style"!=a[c].type||a[c].value||a[c].extraClass.push("elementStyleNode"),
this._canModifyRule(a[c].rule)||(a[c].extraClass.push("readOnlyRule"),a[c].readOnly=!0)},_updateCascadeList:function(){function a(a){return function(){return this._onChange({target:a})}}function c(a){return function(){return this._onChangeRemove({target:a})}}this._setFieldValue&&this._setFieldValue("",null);if(this._widget&&this._widget.domNode){dojo.removeClass(this.container,"dijitHidden");this._buildCssRuleset();this._destroy();var d=dojo.doc.createElement("table");dojo.addClass(d,"cascadeTable");
var e=null,f=null,e=dojo.doc.createElement("tr");e.className="propApplyToLabelRow";f=dojo.doc.createElement("td");f.colSpan="3";f.innerHTML=k.applyToWhich;f.className="propApplyToLabelCell";e.appendChild(f);d.appendChild(e);this._radio=[];for(var g=0;g<this._values.length;g++){var h=this._formatRuleString(this._values[g]);this._radio.push(dojo.create("input",{type:"radio",name:this._radioGroupName}));for(var e=dojo.doc.createElement("tr"),m=0;m<this._values[g].extraClass.length;m++)dojo.addClass(e,
this._values[g].extraClass[m]);f=dojo.doc.createElement("td");e.appendChild(f);dojo.addClass(f,"cascadeSpacer");f=dojo.doc.createElement("td");dojo.addClass(f,"cascadeButton");f.appendChild(this._radio[this._radio.length-1]);e.appendChild(f);f=dojo.doc.createElement("td");dojo.addClass(f,"cascadText");f.innerHTML="\x3cdiv class\x3d'cascadeRuleText'\x3e"+h+"\x3c/div\x3e";this._values[g].shorthand?this._handles.push(dojo.connect(this._radio[this._radio.length-1],"onclick",this,"_onChangeOverride")):
this._handles.push(dojo.connect(this._radio[this._radio.length-1],"onclick",this,a(g)));if(this._values[g].shorthand)f.innerHTML+="\x3cdiv\x3e"+this._values[g].shorthand+":"+this._values[g].value+";\x3c/div\x3e";else if(this._values[g].value){for(m=0;m<this.target.length;m++);f.innerHTML+="\x3cdiv class\x3d'ruleValue'\x3e"+this.target[0]+":"+this._values[g].value+";\x3c/div\x3e"}e.appendChild(f);f=dojo.doc.createElement("td");dojo.addClass(f,"cascadRemove");h=dojo.doc.createElement("button");this._values[g].readOnly&&
dojo.attr(h,"disabled","true");dojo.addClass(h,"cascadeRemoveButton");f.appendChild(h);this._handles.push(dojo.connect(h,"onclick",this,c(g)));e.appendChild(f);f=dojo.doc.createElement("td");f.className="cascadeSpacer";e.appendChild(f);d.appendChild(e)}this._widgetState=this._whichStateInputElement=void 0;e=q.getStatesListCurrent(this._widget.domNode);for(g=0;g<e.length;g++)if(e[g]){g=e[g];e=dojo.doc.createElement("tr");e.className="propWhichStateRow";f=dojo.doc.createElement("td");f.colSpan="3";
h=dojo.create("input",{type:"checkbox",checked:!1,className:"propWhichStateInput"});this._whichState=g;this._whichStateInputElement=h;f.appendChild(h);h=dojo.create("label",{className:"propWhichStateLabel"});h.innerHTML=dojo.string.substitute(k.onlyApplyToState,[g]);f.appendChild(h);f.className="propWhichStateCell";e.appendChild(f);d.appendChild(e);break}this.cascadeTableDiv.appendChild(d);this._updateFieldValue()}else dojo.addClass(this.container,"dijitHidden")},selectRule:function(a){for(var b=
0;b<this._values.length;b++)if("element.style"!=a&&this._values[b].rule==a){dojo.removeClass(this._radio[b].parentNode.parentNode,"hiddenCascadeNode");dojo.attr(this._radio[b],"checked",!0);this._onChange({target:b});break}else if("element.style"==a&&"element.style"==this._values[b].type){dojo.removeClass(this._radio[b].parentNode.parentNode,"hiddenCascadeNode");dojo.attr(this._radio[b],"checked",!0);this._onChange({target:b});break}},selectRuleBySelector:function(a){if("element.style"==a)this._targetValueIndex=
0,0<this._values.length&&(dojo.attr(this._radio[0],"checked",!0),this._values[0].shorthand?dojo.addClass(this._radio[0].parentNode.parentNode,"cssShorthandOverRidden"):(a=this._getBaseLocation(),this._setFieldValue(this._values[0].value,a)));else for(var b=0;b<this._values.length;b++)if("element.style"!=this._values[b].type&&this._values[b].rule&&this._values[b].rule.hasSelector(a)){dojo.removeClass(this._radio[b].parentNode.parentNode,"hiddenCascadeNode");dojo.attr(this._radio[b],"checked",!0);this._onChange({target:b});
break}},_isTarget:function(a){if("$std_10"===a)return!0;for(var b=0;b<this.target.length;b++)if(this.target[b]==a)return!0;return!1},_targetIsRootProperty:function(){for(var a=["left","top","right","bottom"],c=0;c<this.target.length;c++)if(-1<a.indexOf(this.target[c]))return!0;return!1},_updateFieldValue:function(){null==this._widget&&this._setFieldValue("",this._getBaseLocation());var a=this._getDefaultSelection();this._targetValueIndex=0;for(var c=!1,d=!1,e=0;e<this._values.length;e++){var f="davinci.ve.HTMLPageEditor"==
this._editor.editorID,g="davinci.themeEdit.ThemeEditor"==this._editor.editorID;this._values[e].value&&!c&&g||this._values[e].value&&!c&&f&&!this._values[e].readOnly||!c&&!d&&"element.style"!=this._values[e].type&&this._values[e].rule&&this._values[e].rule.hasSelector(a)||"element.style"==a&&"element.style"==this._values[e].type?(this.selectRule("element.style"==this._values[e].type?"element.style":this._values[e].rule),this._values[e].value&&(c=!0),d=!0):c&&!d&&dojo.addClass(this._radio[e].parentNode.parentNode,
"cssOverRidden")}c||d||!f||this.selectRuleBySelector("element.style")},_getThemeMetaDataByWidget:function(a){var b=this.context.getThemeMeta();if(!b)return null;a=b.loader.getType(a);var b=b.loader.getMetaData(a),d=!1,f="string"==typeof a?a.split("."):null;f&&"html"==f[0]&&(d=!0);if(!b&&this.context.cssFiles&&!d)for(d=0;d<this.context.cssFiles.length;d++)if(f=c.getThemeByCssFile(this.context.cssFiles[d]))if(b=e.getThemeMetadata(f).loader.getMetaData(a))break;return b},_getDefaultSelection:function(){var a=
"Normal";"davinci.themeEdit.ThemeEditor"==this._editor.editorID&&(a=a||q.getState());var c=this._getThemeMetaDataByWidget(this._widget);if(!c||!c.states||this._targetIsRootProperty())return"element.style";if(c&&c.states[a]&&c.states[a].elements){var d=c.states[a].elements,e;for(e in d)for(var f=0;f<d[e].length;f++)if(this._isTarget(d[e][f]))return"$root"==e?"element.style":e}if(c&&c.states[a]&&(d=this.context.getThemeMeta())&&(f=d.loader.getType(this._widget),d=d.metadata.getStyleSelectors(f,a,null)))for(e in d)for(a=
0;a<d[e].length;a++)if(this._isTarget(d[e][a])){if(c.rootSelectors)for(a=0;a<c.rootSelectors.length;a++)if(e==c.rootSelectors[a])return"element.style";return e}return null},_addDeltaRules:function(a,c){var b="Normal",e=-1,f=[],g=this.context._getCssFiles(),g=g&&0<g.length?g[0].url:null,h=!1;g&&(h=(h=d.findResource(g))?h._readOnly:!0);"davinci.themeEdit.ThemeEditor"==this._editor.editorID&&(b=b||q.getState());if((a=this._getThemeMetaDataByWidget(a))&&a.states[b]&&a.states[b].selectors){var b=a.states[b].selectors,
k;for(k in b){b=!1;for(a=0;a<c.length;a++){var n=c[a];"element.style"===n.type&&(e=a);if("theme"===n.type&&n.ruleString===k&&(n.rule.parent.relativeURL==this.context._themeUrl||n.rule.parent.url==g)){b=!0;break}}b||(b=this._computeMatchLevelSelector(k),g&&!h&&f.push({rule:null,ruleString:k,targetFile:g,className:null,value:null,matchLevel:b,type:"proposal"}),this.context._themeUrl&&!this.context.theme.getFile().readOnly()&&f.push({rule:null,ruleString:k,targetFile:this.context._themeUrl,className:null,
value:null,matchLevel:b,type:"proposal",proposalTarget:"theme"}))}}var m=e+1;f.forEach(function(a){c.splice(m++,0,a)});return c},_getRuleTargetValue:function(a){var b=null;if(a)for(var c=0;!b&&c<this.target.length;c++)b=a.getProperties(this.target[c]);if(null!=b){if(1<b.length){a=[];for(c=0;c<b.length;c++)a.push(b[c].value);return a}if(1==b.length)return b[0].value}return null},_onChangeRemove:function(a){this._changeValue(a.target,null);this._updateCascadeList()},_onChange:function(a){var b=null;
if("element.style"==this._values[a.target].type)b=this._getBaseLocation();else if("proposal"==this._values[a.target].type){var c=this.context.getModel().find({elementType:"CSSFile",relativeURL:this._values[a.target].targetFile},!0),e=this.context._getCssFiles();c?b=d.findResource(c.url):e[0].url==this._values[a.target].targetFile&&(b=d.findResource(e[0].url))}else b=d.findResource(this._values[a.target].rule.getCSSFile().url);this._setFieldValue&&this._setFieldValue(this._values[a.target].value||
"",b);this._targetValueIndex=a.target},_widgetValuesChanged:function(a){if(this._dirtyCascadeList)this._updateCascadeList(),this._dirtyCascadeList=!1;else{var b=this._getShortHands();a=a.values;for(var c in a)for(a=0;a<b.length;a++)if(b[a]==c){this._updateCascadeList();return}}},_formatRuleString:function(a){if("element.style"==a.type)return"element.style";var b="";if("proposal"==a.type)b=a.className?b+dojo.string.substitute(k.newRule,[a.className,a.targetFile]):b+dojo.string.substitute(k.newThemeRule,
[a.targetFile]),b+=a.ruleString;else{var c=a.rule;a.className?b+=dojo.string.substitute(k.existingRule,[a.className,this.targetFile]):"theme"==a.type&&(b+="["+a.type+"] ");if(a.ruleString)b+=a.ruleString;else for(var d=0;d<c.selectors.length;d++)0!=d&&(b+=", "),b+=c.selectors[d].getLabel();(d=c.searchUp("CSSFile"))&&(b+="  ("+d.url||d.relativeURL);b=a.property?b+dojo.string.substitute(k.line,[a.property.startLine]):b+dojo.string.substitute(k.line,[c.startLine||k.propUndefined])}return b},_getWidgetTopDom:function(b,
c){c=this._getSelector(b,c);var d=function(a,b){if(b.matches(a))return a;for(;0<a.children.length;)return d(a.children[0],b)};if(c){var e=new a;e.setText(c+"{}");return d(b.domNode||b,e)}return null},_widgetSelectionChanged:function(a){(this._widget=a=a[0])?(this.context=a.getContext(),this.targetFile=this.context.getAppCssRelativeFile(),this._editor=this.context.editor,this._topWidgetDom=this._getWidgetTopDom(this._widget,this.target)||this._widget.domNode||this._widget):this._topWidgetDom=null;
this._updateCascadeList()},_getBaseLocation:function(){return{}},_editorSelected:function(a){this._editor=a.editor;var b;this._editor&&this._editor.getContext&&(b=this._editor.getContext());b&&this._editor.supports("style")?(this.context=b,this.targetFile=b.getAppCssRelativeFile(),a=b.getSelection(),0<a.length?this._widgetSelectionChanged(a):this._widgetSelectionChanged([])):(this._widget=this.context=null,this._setFieldValue&&this._setFieldValue("",null));this._updateCascadeList()},_onFieldFocus:function(){this.context&&
this.context.blockChange(!0)},_destroy:function(){var a=this.cascadeTableDiv;for(dojo.forEach(dojo.query("[widgetId]",a).map(dijit.byNode),function(a){a.destroy()});a.firstChild;)dojo._destroyElement(a.firstChild);dojo.forEach(this._handles,dojo.disconnect);this._handles=[]},_onFieldBlur:function(){this.context&&this.context.blockChange(!1)},_getClasses:function(a){a=a.getClassNames("class")||"";a=a.split(" ");for(var b=0;b<a.length;b++)for(var c=b+1;c<a.length;c++)a[c]==a[b]&&a.splice(c,1);return a},
_getRelativeMetaTargetSelector:function(a){var b=this.context.getThemeMeta();if(!b)return[];var c=this.context.getSelection();if(!c.length)return[];c=c[0];c=b.loader.getType(c);return b.metadata.getRelativeStyleSelectorsText(c,"Normal",null,a,this.context.getTheme().className)},_getClassSelector:function(a){var b=this._getRelativeMetaTargetSelector(this.target),b=b.length?b[0]:"";bodyId=this.context.model.find({elementType:"HTMLElement",tag:"body"},!0).find({elementType:"HTMLAttribute",name:"id"},
!0).value;var c=this.context.getTheme(),d=[];if(!c)return d;var e=c.className;b.split(",").forEach(function(b){b=b.trim();d.push("#"+bodyId+"."+e+" ."+a+b)}.bind(this));return d},_computeMatchLevelSelector:function(a){a=a.split(this._regex_combinators);for(var b=0,c=0;c<a.length;c++){for(var d=a[c];;){var e=d.match(this._regex_not_pseudoclass);if(null!=e)b+=this._computeMatchLevelSimpleSelector(e[2]),d=e[1]+e[3];else break}b+=this._computeMatchLevelSimpleSelector(d)}return b},_computeMatchLevelSimpleSelector:function(a){var b=
0;do{var c=function(c,e){c=a.match(c);null!=c&&(d=!0,b+=e,a=c[1]+c[3])},d=!1;c(this._regex_pseudoelement,1);d||(c(this._regex_id,100),c(this._regex_class,10),c(this._regex_attribute,10),c(this._regex_pseudoclass,10),c(this._regex_univeral,0))}while(d);0<a.length&&(b+=1);return b},_compareSelectors:function(a,c){if(!(a&&c||a==c))return!1;a=a.split(this._regex_combinators);c=c.split(this._regex_combinators);if(a.length!=a.length)return!1;for(var b=0;b<a.length;b++)if(a[b]!=c[b])return!1;return!0},_compareSimpleSelectors:function(a,
c){}});return dojo.mixin(p,{__id:0})})},"davinci/Theme":function(){define("dojo/_base/declare dojo/promise/all ./Workbench ./Runtime ./library ./workbench/Preferences ./model/Path ./html/HTMLFile ./model/Factory system/resource".split(" "),function(p,m,h,g,f,e,c,a,q,k){var d={TEMP_CLONE_PRE:"clone_",desktop_default:"desktop_default",mobile_default:"custom_default",default_theme:"(device-specific)",none_themeset_name:"(none)",other_device:"other",none_theme:"none",dojoMobileDefault:[{theme:"android",
device:"Android"},{theme:"blackberry",device:"BlackBerry"},{theme:"ipad",device:"iPad"},{theme:"iphone",device:"iPhone"},{theme:"iphone",device:"other"}],dojoMobileCustom:[{theme:"custom",device:"Android"},{theme:"custom",device:"BlackBerry"},{theme:"custom",device:"iPad"},{theme:"custom",device:"iPhone"},{theme:"custom",device:"other"}],isThemeHTML:function(a){return-1<a.getName().indexOf("dojo-theme-editor.html")},CloneTheme:function(a,d,e,f,g,h){function b(a){var b=[];a.forEach(function(a){a=k.findResource(r+
"/"+a);a=(new c(a.getPath())).relativeTo("./"+p,!0);for(var d="..",e=0;e<a.segments.length;e++)d=d+"/"+a.segments[e];b.push(d)});return b}e=[];g.getFile();h=(new c(f)).removeLastSegments(0);h=k.findResource(h.toString());h.readOnly()&&h.createResource();k.createResource(f,!0);var n=k.findResource(f);g.getFile().getName();var q=(new c(n.getPath())).lastSegment();f=n.createResource(q+".theme");h=n.createResource(q+".css");var p=this.getThemeLocation(),r=g.getFile().parent.getPath(),v=b(g.themeEditorHtmls),
y=b(g.meta),z=" ";b(g.files).forEach(function(a){z=z+'@import url("'+a+'");'});a={className:g.className,name:a,version:d||g.version,specVersion:g.specVersion,files:[""+q+".css"],meta:y,themeEditorHtmls:v,useBodyFontBackgroundClass:g.useBodyFontBackgroundClass};g.helper&&(a.helper=g.helper.declaredClass?g.helper.declaredClass:g.helper);g.base&&(a.base=g.base);g.type&&(a.type=g.type);if(g.conditionalFiles)for(a.conditionalFiles=g.conditionalFiles,g=b(g.conditionalFiles),d=0;d<a.conditionalFiles.length;d++)q=
n.createResource(a.conditionalFiles[d]),e.push(q.setContents('@import url("'+g[d]+'");'));g=f.setContents(JSON.stringify(a));g.themeFile=f;e.push(g);e.push(h.setContents(z));return{promise:m(e),themeFile:f}},getHelper:function(a){if(a){if(a.helper&&"string"!=typeof a.helper)return a.helper;var b=a.helper;if(b){var c=new dojo.Deferred;require([b],function(a){a.declaredClass=b;b=a;c.resolve({helper:b})});return c}}},getThemeSet:function(a){var b=d.getThemeSets(h.getProject()),c=dojo.clone(this.dojoMobileDefault),
e;b||(b=this.dojoThemeSets);b=dojo.clone(b);if(a){if(e=a._getDojoJsElem().getAttribute("data-dojo-config"))e=require.eval("({ "+e+" })","data-dojo-config"),e.themeMap&&(c=d.getDojoxMobileThemesFromThemeMap(a,e.themeMap));var f=a.getTheme();if(null==f)console.error("have no desktop theme, abort!");else for(var g=0,k=b.themeSets.length;g<k;g++)if(e=b.themeSets[g],e.desktopTheme===f.name&&this.themeSetEquals(c,e.mobileTheme))return e}f||(console.error("maq hack, restore desktop theme"),f={name:"claro"});
e={name:this.none_themeset_name,desktopTheme:a?f.name:"claro",mobileTheme:c};b.themeSets.push(e);return e},getBase:function(){if(h.singleProjectMode())return h.getProject()},getThemeLocation:function(){var a=this.getBase(),d=e.getPreferences("davinci.ui.ProjectPrefs",a);return(new c(a)).append(d.themeFolder)},getTheme:function(a,c){c=f.getThemes(h.getProject(),this.workspaceOnly);for(var b=0;b<c.length;b++)if(c[b]&&c[b].name===a)return c[b]},getThemeByCssFile:function(a){var b=f.getThemes(h.getProject(),
this.workspaceOnly);a=k.findResource(a.url).getPath();for(var c=0;c<b.length;c++)for(var d=b[c].getFile().getParentFolder().getPath(),e=0;e<b[c].files.length;e++)if(d+"/"+b[c].files[e]===a)return b[c];return null},getDojoxMobileThemeMap:function(a,d){for(var b=[],e=[".*","iphone",[]],f=0;f<d.length;f++)if(d[f].theme!=this.none_theme&&d[f].theme!=this.default_theme){var g=this.getTheme(d[f].theme);if(g){var h;g.path&&g.path[0]?(h=g.path[0].lastIndexOf("/"),h=new c(g.path[0].substring(0,h+1)+g.files[0])):
h=(new c(g.getFile().parent.getPath())).append(g.files[0]);var k=a.getFullResourcePath();h=h.relativeTo(k,!0).toString();d[f].device===this.other_device?e=[".*",g.base,[h]]:b.push([d[f].device,g.base,[h]])}}b.push(e);return b},getDojoxMobileThemesFromThemeMap:function(a,d){var b=f.getThemes(h.getProject(),this.workspaceOnly),e=[];d.forEach(function(d,f,g){for(g=0;g<b.length;g++){f=b[g];var h=(new c(f.getFile().parent.getPath())).append(f.files[0]),k=a.getFullResourcePath();if(h.relativeTo(k,!0).toString()==
d[2][0]){g={};g.device=d[0];g.theme=f.name;".*"===g.device&&(g.device="other");e.push(g);break}}},this);return e},themeSetEquals:function(a,c){function b(a){var b=0,c;for(c in a)a.hasOwnProperty(c)&&b++;return b}if(typeof a!==typeof c)return!1;if("function"===typeof a)return a.toString()===c.toString();if(a instanceof Object&&c instanceof Object){if(b(a)!==b(c))return!1;var d=!0,e;for(e in a)if(d=this.themeSetEquals(a[e],c[e]),!d)return!1;return!0}return a===c},themeMapsEqual:function(a,c){a=JSON.stringify(a);
c=JSON.stringify(c);return a===c},singleMobileTheme:function(a){for(var b=a.mobileTheme[0].theme,c=1;c<a.mobileTheme.length;c++)if(a.mobileTheme[c].theme!=b)return!1;return!0},getThemeSets:function(a){var b=g.getDefaultThemeSet(),c=null;if(b){var f=!1;if(c=e.getPreferences("maqetta.dojo.themesets",a)){for(var h=!1,k=0;k<c.themeSets.length;k++)if(c.themeSets[k].name===b.name){h=!0;d.themeSetEquals(c.themeSets[k],b)||(c.themeSets[k]=b,f=!0);break}h||(c.themeSets.push(b),f=!0)}else c=d.dojoThemeSets,
c.themeSets[0]=b,f=!0;f&&d.saveThemeSets(a,c)}return c},saveThemeSets:function(a,c){e.savePreferences("maqetta.dojo.themesets",a,c)}};d.none_themeset={name:d.none_themeset_name,desktopTheme:"claro",mobileTheme:dojo.clone(d.dojoMobileDefault)};d.default_themeset={name:d.desktop_default,desktopTheme:"claro",mobileTheme:dojo.clone(d.dojoMobileDefault)};d.custom_themeset={name:d.mobile_default,desktopTheme:"claro",mobileTheme:d.dojoMobileCustom};d.dojoThemeSets={version:"1.7",specVersion:"0.8",helper:"maq-metadata-dojo/dojox/mobile/ThemeHelper",
themeSets:[d.custom_themeset]};return d})},"davinci/lang/ve/ve":function(){define([],function(){return{common:"Common",widgetSpecific:"Widget",events:"Events",layout:"Layout",showMinMax:"show min/max",padding:"Padding",margins:"Margins",showtrbl:"show t/r/b/l",background:"Background",border:"Border",showDetails:"show details",fontsAndText:"Fonts/Text",shapesSVG:"SVG",properties:"properties",Scenes:"Scenes",States:"States",ActiveScene:"This scene is currently visible",AppStateFocus:"This application state is the target for application-state-specific visibility or styling changes",
InitialScene:"This scene will show initially when the page runs",chooseDeviceSilhouette:"Choose a device silhouette: ",filesHasUnsavedChanges:"The file '${0}' has unsaved changes, \"Save\" changes and continue with switch device silhouette.",selectAncestorTitle:"Select ancestor",selectAncestorLabel:"Select ancestor (closest ancestor listed first):",createNewState:"Create New State",updateCurrentState:"Update Current State",createLabel:"Create",updateLabel:"Update",modifyState:"Modify State",modifyLabel:"Update",
stateLabel:"Name",enterStateName:"Please enter a state name.",stateNameExists:"State name '${name}' already exists. Please enter a different state name.",renameState:"Rename State",renameLabel:"Rename",cancelLabel:"Cancel",newStateLabel:"New name:",manageStates:"Manage Widget Visibility for Different States",manageStatesCheckLabel:"Check:",manageStatesCheckCurrentStateOnly:"Current state",manageStatesCheckAll:"All",manageStatesUncheckAll:"None",manageStatesCheckBackgroundOnly:"Background only",manageStatesAllVisibleFromBackground:"(Visible from Background)",
manageStatesSomeVisibleFromBackground:"(Some visible from Background)",manageStatesSomeVisibleSomeHidden:"(Some visible, some hidden)",initialStateCheckBoxLabel:"Initial state at document load time",EnableApplicationStates:"Enable/disable application states",EnableAsStateContainerDescription:"Setting the check box below and clicking OK will allow custom application states to be defined on the currently selected widget.",DisableAsStateContainerDescription:"Unsetting the check box below and clicking OK will disallow custom application states on the currently selected widget.",
DisableAsStateContainerDataLoss:"Any existing interactivity based on existing application states will be lost.",EnableAsStateContainerWidgetLabel:"Application states are enabled on this widget",EnableApplicationStatesCurrentWidget:"Currently selected widget",EnableApplicationStatesCurrentStates:"Current application states",EnableApplicationStatesNone:"(none)",NewWidgetsCurrentStateTitleBackground:"Toggle whether new widgets go to Background or selected state (current value: Background)",NewWidgetsCurrentStateTitleCurrentState:"Toggle whether new widgets go to Background or selected state (current value: selected state)",
richTextInputHelp:"Provides Rich Text (word processor-like) editing of HTML.",smartInputHelp1:"If you use any markup characters (\x26lt;,\x26gt;,\x26amp;), you need to specify whether the text represents literal (plain) text or HTML markup that should be parsed (using an innerHTML assignment).",smartInputHelp2:"Text represents literal (plain) text.",loading:"Loading...",htmlMarkup:"HTML markup",creatingStyleRules:"Creating Style Rules with app.css",propChangeCannotComplete:"This property change cannot be completed because the operation attempts to modify a read-only theme CSS file.",
toChangeProperty:"To change this property, one technique is to add a class to this widget (at top of Properties palette)  and then open up the CSS Details pane to target a style rule within your app.css file, as described at ${0}.",errorModifyingValue:"Error modifying value",changeWillModify:"This change will modify one of the CSS style rules defined within a 'CSS theme' and will therefore probably impact other widgets on a global basis.",insteadOfChanging:"Instead of changing the theme CSS files, it is usually better to add a class to this widget (at the top of the Properties palette) and then open up the CSS Details pane to target a style rule within your app.css file, as described at ${0}.",
okToProceed:"OK to proceed with this change?",valueIsOverriden:"This value is overriden and can not be changed.",applyToWhich:"Apply to which style rule:",onlyApplyToState:" Only apply to current state (${0})",newRule:"[class: ${0} - New rule in ${1}] ",newThemeRule:"[theme: - New rule in ${0}] ",existingRule:"[class: ${0} - Existing rule in ${1}] ",line:" line: ${0})",propUndefined:"undefined",bgdType_emptystring:"",bgdType_none:"none",bgdType_url:"image",bgdType_linear:"linear gradient",bgdType_radial:"radial gradient",
bgdType_other:"other",bgdPickFile:"Choose...",bgdStop:"Stop",bgdAddStop:"Add a new gradient stop after this stop",bgdRemoveStop:"Remove this gradient stop",bgdBackgroundColor:"background-color:",bgdBackgroundImageType:"background-image type:",bgdImageUrl:"Image URL:",bgdUrl:"URL:",bgdColorStops:"Color stops:",bgdColor:"color",bgdPosition:"position",bgdOptions:"Options:",bgdAngle:"Angle:",bgdPosition2:"Position:",bgdShape:"Shape:",bgdExtent:"Extent:",bgdBackgroundRepeat:"background-repeat:",bgdBackgroundPosition:"background-position:",
bgdBackgroundSize:"background-size:",bgdBackgroundOrigin:"background-origin:",bgdBackgroundClip:"background-clip:",bgdBackgroundImageValue:"'background-image' value:",bgdTemplate:"Template:",colorPicker:"Color picker...",removeValue:"Remove Value",selectColor:"select a color",toolBarFor:"",noSelection:"(no selection)",toolBarClass:"class:",toolBarId:"ID:",idAlreadyUsed:"This id is already used by another widget",noValidParents:"No valid parents at this position",willBeChildOf:"Will become a child of:",
candidateParents:"Candidate parents:",toChangePress:"To change, press numbers",vteWarningTitle:"Theme Version Warning",vteWarningMessage:"Theme version does not match Maqetta version this could produce unexpected results. We suggest recreating the custom theme using the current version of Maqetta and deleting the existing theme.",vteWarningUnsuportedBrowserTitle:"Unsupported brower",vteWarningUnsuportedBrowserMessage:"Editing mobile themes is only supported on webkit browsers, we sugguest using Chrome or Safari to customize mobile themes.",
vteWarningToolkitMessage:"Theme version does not match workspace library version this could produce unexpected results. We suggest recreating the custom theme using the current version of Maqetta and deleting the existing theme.",vteErrorTitle:"Theme Version Error",vteErrorMessage:"Theme version is not supported by this version of Maqetta. You must recreating custom theme using the current version of Maqetta and deleting the existing theme..",vteErrorSavingResourceMessage:"error saving resource\n",
"SourceComboButton-source":"Source","SourceComboButton-splitHorizontal":"Split-H","SourceComboButton-splitVertical":"Split-V","LayoutDropDownButton-flow":"Flow","LayoutDropDownButton-absolute":"Absolute"}})},"davinci/ve/widgets/CommonProperties":function(){define(["dojo/_base/declare","davinci/workbench/ViewLite","davinci/ve/commands/ModifyCommand"],function(p,m,h){return p("davinci.ve.widgets.CommonProperties",[m],{buildRendering:function(){var g=["title"],f;f="\x3ctable width\x3d'100%' class\x3d'property_table_stretchable' border\x3d'0' cellspacing\x3d'0' cellpadding\x3d'0'\x3e\x3ccolgroup\x3e\x3ccol style\x3d'width:15px;' /\x3e\x3ccol class\x3d'gap02' /\x3e\x3ccol class\x3d'gap03' /\x3e\x3ccol style\x3d'width:15px;' /\x3e\x3c/colgroup\x3e";
var e=0;this._boxes={};for(var c=0;c<g.length;c++)this._boxes[g[c]]={value:""},this._boxes[g[c]].id="davinci_properties_event_"+e++ +"_combo",f+="\x3ctr\x3e",f+="\x3ctd/\x3e",f+="\x3ctd class\x3d'propertyDisplayName'\x3e",f+=g[c]+":",f+="\x3c/td\x3e",f+="\x3ctd\x3e",f+="\x3cinput type\x3d'text' id\x3d'"+this._boxes[g[c]].id+"'\x3e\x3c/input\x3e",f+="\x3c/td\x3e",f+="\x3ctd/\x3e",f+="\x3c/tr\x3e";f+="\x3c/table\x3e";this.domNode=dojo.doc.createElement("div");this.domNode.innerHTML=f;dojo.subscribe("/davinci/ui/widgetValuesChanged",
dojo.hitch(this,this.onWidgetSelectionChange));dojo.subscribe("/davinci/ui/widget/replaced",dojo.hitch(this,this._widgetReplaced));this.inherited(arguments)},onEditorSelected:function(g){this._editor&&this._editor.getContext?(this.context=this._editor.getContext(),this._setValues()):(this.context=this._widget=this._subwidget=null,this._clearValues())},startup:function(){function g(e){return function(){return this._onChange({target:e})}}this.inherited(arguments);for(var f in this._boxes)this._boxes[f].domNode=
dojo.byId(this._boxes[f].id),dojo.connect(this._boxes[f].domNode,"onchange",this,g(f)),dojo.connect(this._boxes[f].domNode,"onfocus",this,"_onFocus"),dojo.connect(this._boxes[f].domNode,"onblur",this,"_onBlur")},_onFocus:function(){this.context&&this.context.blockChange(!0)},_onBlur:function(){this.context&&this.context.blockChange(!1)},_onChange:function(g){g=g.target;var f=dojo.attr(this._boxes[g].domNode,"value");this.context&&this.context.blockChange(!1);if(this._boxes[g].value!=f){this._boxes[g].value=
f;var e={};e[g]=f;g=new h(this._widget,e,null);dojo.publish("/davinci/ui/widgetPropertiesChanges",[{source:this._editor.editor_id,command:g}])}},_widgetReplaced:function(g,f){this._widget===f&&(this._widget=g,this.onWidgetSelectionChange())},onWidgetSelectionChange:function(){this._widget?(this._setValues(),this.set("readOnly",!1)):(this.set("readOnly",!0),this._clearValues())},_clearValues:function(){for(name in this._boxes)this._boxes[name].domNode&&dojo.attr(this._boxes[name].domNode,"value",""),
this._boxes[name].value=null},_setValues:function(){if(this._widget)for(var g in this._boxes){var f=this._widget,e=this._boxes[g];e.domNode&&e.domNode.ownerDocument&&(f.getPropertyValue?(f=f.getPropertyValue(g),e.value!=f&&(e.value=f,dojo.attr(e.domNode,"value",e.value))):(e.value="",dojo.attr(e.domNode,"value","")))}}})})},"davinci/ve/widgets/WidgetProperties":function(){define("dojo/_base/declare dojo/_base/connect davinci/workbench/ViewLite davinci/ve/metadata davinci/commands/CompoundCommand davinci/ve/commands/ModifyCommand ./HTMLStringUtil dijit/form/DateTextBox dijit/form/TimeTextBox xide/types xide/factory".split(" "),
function(p,m,h,g,f,e,c,a,q,k,d){return p("davinci.ve.widgets.WidgetProperties",[h],{key:"widgetSpecific",_connects:null,buildRendering:function(){this.domNode=this.propDom=dojo.doc.createElement("div");dojo.addClass(this.domNode,"propGroup");dojo.attr(this.domNode,"propGroup",this.key);this._connects=[];this.inherited(arguments)},onWidgetSelectionChange:function(){if(this._widget&&this._editor&&"davinci.ve.HTMLPageEditor"==this._editor.editorID){var a=davinci.ve.metadata.query(this._widget),c=this._widget.getParent();
if(c&&c.isWidget&&(c=g.query(c))&&c.childProperties)if(a.$ownproperty)for(var d in c.childProperties)a.$ownproperty[d]=c.childProperties[d];else a.$ownproperty=c.childProperties;if(a&&a.$ownproperty){this._disconnectAll();this._destroyProperties();c={};a.$ownproperty.title||(c.title={datatype:"string"});for(d in a.$ownproperty)c[d]=a.$ownproperty[d];a=this.propDom.innerHTML=this._createWidgetRows(c);-1===a.indexOf("data-dojo-type")&&-1===a.indexOf("dojoType")||dojo.parser.parse(this.propDom);this._setValues();
this._connectAll()}}else this._disconnectAll(),this._destroyProperties()},onEditorSelected:function(a){if((this._editor=a)&&"davinci.ve.HTMLPageEditor"==a.editorID){if(this.context=a.getContext())this._widget=this.context.getSelection()[0]}else this._widget=this.context=null;this.onWidgetSelectionChange()},_createWidgetRows:function(a){this._pageLayout=[];var b={},d;for(d in a)if(b.property=a[d],!b.property.hidden){var e={display:b.property.title||d,type:b.property.datatype,format:b.property.format,
target:d,hideCascade:!0,data:b.property};b.property.dropdownQueryValues&&b.property.dropdownQueryAttribute&&(b.values=[],dojo.forEach(b.property.dropdownQueryValues,dojo.hitch(this,function(a){return function(b){b=dojo.query(b,this.context.rootNode);dojo.forEach(b,function(b){a.values.push(b.getAttribute(a.property.dropdownQueryAttribute))})}}(b))),e.values=b.values,e.type="comboEdit");if(dojo.isArray(b.property.mustHaveAncestor)){for(var f=!1,g=this._widget;!f&&g&&g.getParent()!=this.context.rootWidget;)(g=
g.getParent())&&-1<dojo.indexOf(b.property.mustHaveAncestor,g.type)&&(f=!0);f||(e.disabled=!0)}this._pageLayout.push(e);b.property.option&&(this._pageLayout[this._pageLayout.length-1].values=dojo.map(b.property.option,function(a){return a}),this._pageLayout[this._pageLayout.length-1].type=b.property.unconstrained?"comboEdit":"combo");b={values:b.values,property:b.property}}return c.generateTable(this._pageLayout)},_destroyProperties:function(){var a=this.propDom;for(dojo.forEach(dojo.query("[widgetId]",
a).map(dijit.byNode),function(a){a.destroy()});a.firstChild;)dojo._destroyElement(a.firstChild)},_connectAll:function(){function a(a){return function(){return this._onChange({target:a})}}for(var c=0,e=this._pageLayout.length;c<e;c++){var f=this._pageLayout[c],g=dijit.byId(f.id),h=g||dojo.byId(f.id),m=g?"onChange":"change",q=g?"onFocus":"focus",p=g?"onBlur":"blur";h?(h.pageIndex=c,this._connect(h,m,this,a(c)),this._connect(h,q,this,"_onFieldFocus"),this._connect(h,p,this,"_onFieldBlur"),h.owner=this,
h.row=c,d.publish(k.EVENTS.WIDGET_PROPERTY_RENDERED,{view:this,row:f,widget:g,node:h},this)):console.error("cant find "+f.id+" node",f)}},_connect:function(a,c,d,e,f){this._connects.push(m.connect.apply(null,arguments))},_disconnectAll:function(){this._connects.forEach(m.disconnect);this._connects=[]},_onChange:function(b){b=this._pageLayout[b.target];var c=dijit.byId(b.id),d;this.context&&this.context.blockChange(!1);c?(d=c.get("value"))&&d instanceof Date&&(c instanceof a?d=d.toISOString().substring(0,
10):c instanceof q&&(d="T"+d.toTimeString().substring(0,8))):(d=dojo.byId(b.id),d=dojo.attr(d,"checkbox"===d.type?"checked":"value"));if(b.value!=d){b.value=d;c={};c[b.target]=d;b=new f;d=new e(this._widget,c,null);b.add(d);if((c=this._widget.getHelper())&&c.onWidgetPropertyChange)c.onWidgetPropertyChange({widget:this._widget,compoundCommand:b,modifyCommand:d});dojo.publish("/davinci/ui/widgetPropertiesChanges",[{source:this._editor.editor_id,compoundCommand:b,command:d}])}},_onFieldFocus:function(){this.context&&
this.context.blockChange(!0)},_onFieldBlur:function(){this.context&&this.context.blockChange(!1)},_setValues:function(){try{for(var a=0,c=this._pageLayout.length;a<c;a++){var d=this._pageLayout[a],e=dojo.byId(d.id);if(e){var f=this._widget,g=d.target,h=void 0;h="_children"===g?(h=f.getChildrenData())&&1===h.length?h[0]:f.getPropertyValue(g):f.getPropertyValue(g);if(h&&h.toISOString){var k=f.metadata.property[g].format;k&&("date"==k?h=h.toISOString().substring(0,10):"time"==k&&(h="T"+h.toTimeString().substring(0,
8)))}if(d.value!=h){d.value=h;var m="boolean"===d.type?"checked":"value",q=dijit.byId(d.id);q?q.attr(m,d.value):dojo.attr(e,m,d.value)}}}}catch(D){debugger}}})})},"davinci/ve/widgets/EventSelection":function(){define("dojo/_base/declare dojo/_base/connect dojo/dom-class davinci/Runtime ../../workbench/ViewLite ../commands/EventCommand ./HTMLStringUtil ../States xide/types xide/factory".split(" "),function(p,m,h,g,f,e,c,a,q,k){var d=/^State:.*/,b=/^\s*davinci\.states\.setState\s*\(\s*([\'"])((?:(?!\1).)*)\1\s*\)\s*$/,
n=/^File:.*/,r=/^\s*location\.href\s*\=\s*([\'"])((?:(?!\1).)*)\1\s*$/,v=function(b){b&&a.getAllStateContainers(b);return[""]},z=function(a){a&&a.match(d)&&(a=a.substring(6),a="davinci.states.setState('"+("Background"==a?"Normal":a)+"')");a&&a.match(n)&&(a="location.href\x3d'"+a.substring(5)+"'");return a},y=function(a){var c;a&&((c=a.match(b))&&(a="State:"+c[2]),(c=a.match(r))&&(a="File:"+c[2]));return a};p=p("davinci.ve.widgets.EventSelection",[f],{pageTemplate:[{display:"onclick",target:"onclick",
type:"state",hideCascade:!0},{display:"ondblclick",target:"ondblclick",type:"state",hideCascade:!0},{display:"onmousedown",target:"onmousedown",type:"state",hideCascade:!0},{display:"onmouseup",target:"onmouseup",type:"state",hideCascade:!0},{display:"onmouseover",target:"onmouseover",type:"state",hideCascade:!0},{display:"onmousemove",target:"onmousemove",type:"state",hideCascade:!0},{display:"onmouseout",target:"onmouseout",type:"state",hideCascade:!0},{display:"onkeypress",target:"onkeypress",
type:"state",hideCascade:!0},{display:"onkeydown",target:"onkeydown",type:"state",hideCascade:!0},{display:"onkeyup",target:"onkeyup",type:"state",hideCascade:!0},{display:"onfocus",target:"onfocus",type:"state",hideCascade:!0},{display:"onblur",target:"onblur",type:"state",hideCascade:!0},{display:"onchange",target:"onchange",type:"state",hideCascade:!0}],buildRendering:function(){this.domNode=dojo.doc.createElement("div");this.domNode.innerHTML=c.generateTable(this.pageTemplate,{zeroSpaceForIncrDecr:!0});
h.add(this.domNode,"EventSelection");this.inherited(arguments)},setReadOnly:function(a){for(var b=0;b<this.pageTemplate.length;b++){var c=this.pageTemplate[b].widget;c?c.set("readOnly",a):(c=this.pageTemplate[b].domNode)&&dojo.attr(c,"disabled",a)}},startup:function(){this.inherited(arguments);for(var a=0;a<this.pageTemplate.length;a++){var b=this.pageTemplate[a],c=dijit.byId(b.id),d=c||dojo.byId(b.id);k.publish(q.EVENTS.WIDGET_PROPERTY_RENDERED,{view:this,row:b,widget:c,node:d},this)}},onEditorSelected:function(){this._editor&&
this._editor.supports("states")||delete this._editor;this._buildSelectionValues()},_onChange:function(a){a=a.target;var b=dijit.byId(this.pageTemplate[a].id),c=b.get("value"),c=z(c),d={};d[this.pageTemplate[a].target]=c;d=new e(this._widget,d);dojo.publish("/davinci/ui/widgetPropertiesChanges",[{source:this._editor.editor_id,command:d}]);this.publish(q.EVENTS.ON_WIDGET_PROPERTY_CHANGED,{widget:b,editor:this._editor,eventSelection:this,pageTemplate:this.pageTemplate,widgetProperty:this.pageTemplate[a].target,
value:c,target:this._widget})},_getRoot:function(){var a=this._editor,b;a&&a.getContext&&(b=(a=a.getContext())&&a.rootNode);return b},_updateValues:function(a){a&&a.node&&a.node._dvWidget&&(a=(a=a.node._dvWidget.getContext())&&a.editor)&&a==g.currentEditor&&(this._buildSelectionValues(),this._widget&&this._setValues())},onWidgetSelectionChange:function(){this._widget?(this._setValues(),this.setReadOnly(!1)):(this.setReadOnly(!0),this._clearValues())},_clearValues:function(){},_buildSelectionValues:function(){var a=
this._getRoot();v(a)},_setValues:function(){for(var a=0;a<this.pageTemplate.length;a++){var b=this.pageTemplate[a].target,c=this._widget,d="";c.properties&&c.properties[b]?d=c.properties[b]:c._srcElement&&(d=c._srcElement.getAttribute(b));d=y(d);(b=dijit.byId(this.pageTemplate[a].id))&&b.set("value",d,!1)}},_widgetPropertiesChanged:function(a){this._updateValues({widget:a[0]})}});p.getEventSelectionValues=v;p.getEventScriptFromValue=z;p.getValueFromEventScript=y;return p})},"davinci/ve/actions/_AddManageStatesWidget":function(){define("dojo/_base/declare dojo/dom-style dijit/_WidgetBase dijit/_TemplatedMixin dijit/_WidgetsInTemplateMixin davinci/Runtime davinci/ve/States davinci/commands/CompoundCommand davinci/ve/commands/AppStateCommand davinci/lang/ve dijit/lang/_common dojo/text!./templates/AddState.html".split(" "),
function(p,m,h,g,f,e,c,a,q,k,d,b){return p("davinci.ve.actions._AddManageStatesWidget",[h,g,f],{templateString:b,widgetsInTemplate:!0,veNls:k,commonNls:d,_isValid:function(){var a=this.domNode.querySelector(".addStateNameDiv");if(a&&"none"==m.get(a,"display"))return!0;a=this.input.get("value");return a?davinci.ve.states.hasState(this.node,a)?(alert(dojo.string.substitute(k.stateNameExists,{name:a})),!1):!0:!1},_onKeyPress:function(a){a.keyCode!=dojo.keys.ENTER&&(this._isValid()?this.okButton.set("disabled",
!1):this.okButton.set("disabled",!0))},onOk:function(){var b;if(e.currentEditor&&e.currentEditor.currentEditor&&e.currentEditor.currentEditor.context){if(b=e.currentEditor.currentEditor.context,(b=c.getFocus(b.rootNode))&&b.stateContainerNode){c.getState(b.stateContainerNode);var d=this.input.get("value");if(d)if(e.currentEditor&&e.currentEditor.currentEditor&&e.currentEditor.currentEditor.context){b=e.currentEditor.currentEditor.context;var f=new a;d&&f.add(new q({action:"add",state:d,stateContainerNode:this.node,
context:b}));b.getCommandStack().execute(f)}else console.error("AddState.js - cannot determine context.")}}else console.error("_AddManageStatesWidget.js (from "+this._calledBy+" - cannot determine context.")},onCancel:function(){this.onClose()}})})},"davinci/ve/actions/_ManageStatesWidget":function(){define("dojo/_base/declare dojo/dom-construct dojo/on dojo/dom-class dojo/_base/event dijit/_WidgetBase dijit/_TemplatedMixin dijit/_WidgetsInTemplateMixin davinci/Runtime davinci/ve/States davinci/commands/CompoundCommand davinci/ve/commands/StyleCommand davinci/lang/ve dijit/lang/_common dojo/text!./templates/ManageStates.html".split(" "),
function(p,m,h,g,f,e,c,a,q,k,d,b,n,r,v){return p("davinci.ve.actions._ManageStatesWidget",[e,c,a],{templateString:v,widgetsInTemplate:!0,anyCheckBoxChanges:!1,_states:[],_stateContainers:[],_checkBoxes:[],_overrideDisplayValue:[],_notes:[],_handlers:[],veNls:n,commonNls:r,constructor:function(){this.handlers=[]},postCreate:function(){if(this._getContext()){var a=this.domNode.querySelector(".manageStatesStatesListDiv");if(a){var b=this._getAllStatesInDoc();this._states=b.states;this._stateContainers=
b.stateContainers;if(b=this.domNode.querySelector(".manageStatesCheckAcceleratorsTable"))b.style.width="100%";if(b=this.domNode.querySelector(".manageStatesCheckCurrentStateOnlyCell"))b.style.textAlign="left";if(b=this.domNode.querySelector(".manageStatesCheckAllCell"))b.style.textAlign="center";if(b=this.domNode.querySelector(".manageStatesUncheckAllCell"))b.style.textAlign="right";for(var c,a=m.create("table",{"class":"manageStatesStatesListTable",style:"width:100%",border:0,cellspacing:0,cellpadding:3},
a),d=0;d<this._states.length;d++)b=m.create("tr",{},a),c=m.create("td",{"class":"manageStatesCheckboxCell"},b),this._checkBoxes[d]=m.create("div",{id:"manageStatesCheckBox_"+d,"class":"manageStatesCheckbox"},c),this._handlers.push(h(this._checkBoxes[d],"click",function(a,b){b=this._checkBoxes[a];this.anyCheckBoxChanges=!0;g.remove(b,"manageStatesCheckboxNoneVisible");g.remove(b,"manageStatesCheckboxAllVisible");g.remove(b,"manageStatesCheckboxAllVisibleBackgroundAll");g.remove(b,"manageStatesCheckboxAllVisibleBackgroundSome");
g.remove(b,"manageStatesCheckboxSomeVisible");1==b._checkValue?(b._checkValue=0,g.add(b,"manageStatesCheckboxNoneVisible"),this._overrideDisplayValue[a]="none"):(b._checkValue=1,g.add(b,"manageStatesCheckboxAllVisible"),this._overrideDisplayValue[a]="");this.updateDialog()}.bind(this,d))),this._overrideDisplayValue[d]=null,c=this._states[d],m.create("td",{"class":"manageStatesStateNameCell",innerHTML:"Normal"==c?"Background":c},b),c=m.create("td",{"class":"manageStatesNotesCell"},b),this._notes[d]=
m.create("span",{"class":"manageStatesNotesSpan"},c)}(a=this.domNode.querySelector(".manageStatesCheckCurrentStateOnly"))&&this._handlers.push(h(a,"click",function(a){f.stop(a);this._acceleratorClicked("current")}.bind(this)));(a=this.domNode.querySelector(".manageStatesCheckAll"))&&this._handlers.push(h(a,"click",function(a){f.stop(a);this._acceleratorClicked("all")}.bind(this)));(a=this.domNode.querySelector(".manageStatesUncheckAll"))&&this._handlers.push(h(a,"click",function(a){f.stop(a);this._acceleratorClicked("none")}.bind(this)));
(a=this.domNode.querySelector(".manageStatesCheckBackgroundOnly"))&&this._handlers.push(h(a,"click",function(a){f.stop(a);this._acceleratorClicked("background")}.bind(this)));this.anyCheckBoxChanges=!1;setTimeout(function(){this.okButton.focus()}.bind(this),500)}},_acceleratorClicked:function(a){var b=this._getContext();if(b&&(b=k.getFocus(b.rootNode))&&b.stateContainerNode){for(var c=k.getState(b.stateContainerNode),d=0;d<this._states.length;d++){var e=this._states[d];if("undefined"==e||e==k.NORMAL)e=
void 0;var f=this._checkBoxes[d];g.remove(f,"manageStatesCheckboxNoneVisible");g.remove(f,"manageStatesCheckboxAllVisible");g.remove(f,"manageStatesCheckboxAllVisibleBackgroundAll");g.remove(f,"manageStatesCheckboxAllVisibleBackgroundSome");g.remove(f,"manageStatesCheckboxSomeVisible");"current"==a?e==c&&b.stateContainerNode==this._stateContainers[d]?(f._checkValue=1,g.add(f,"manageStatesCheckboxAllVisible"),this._overrideDisplayValue[d]=""):(f._checkValue=0,g.add(f,"manageStatesCheckboxNoneVisible"),
this._overrideDisplayValue[d]="none"):"all"==a?(f._checkValue=1,g.add(f,"manageStatesCheckboxAllVisible"),this._overrideDisplayValue[d]=""):"none"==a?(f._checkValue=0,g.add(f,"manageStatesCheckboxNoneVisible"),this._overrideDisplayValue[d]="none"):"background"==a&&(f._checkValue=1,g.add(f,"manageStatesCheckboxAllVisible"),this._overrideDisplayValue[d]=0==d?"":"$MAQ_DELETE_PROPERTY$")}this.anyCheckBoxChanges=!0;this.updateDialog()}},_isValid:function(){return!0},_onKeyPress:function(a){a.keyCode!=
dojo.keys.ENTER&&(this._isValid()?this.okButton.set("disabled",!1):this.okButton.set("disabled",!0))},_getAllStatesInDoc:function(){var a;if(q.currentEditor&&q.currentEditor.currentEditor&&q.currentEditor.currentEditor.context){a=q.currentEditor.currentEditor.context;var b=[],c=[];if(a=k.getAllStateContainers(a.rootNode))for(var d=0;d<a.length;d++)for(var e=k.getStates(a[d]),f=0;f<e.length;f++)b.push(e[f]),c.push(a[d]);return{states:b,stateContainers:c}}console.error("_ManageStatesWidget.js (from "+
this._calledBy+" - cannot determine context.")},_getContext:function(){var a;q.currentEditor&&q.currentEditor.currentEditor&&q.currentEditor.currentEditor.context?a=q.currentEditor.currentEditor.context:console.error("_ManageStatesWidget.js (from "+this._calledBy+" - cannot determine context.");return a},_getAllEffectedWidgets:function(){var a=this._getContext();if(!a)return[];var b=k.getFocus(a.rootNode);if(b&&b.stateContainerNode)return a.getSelection().slice(0)},updateDialog:function(){var a=this._getContext();
if(a){var b=k.getFocus(a.rootNode);if(b&&b.stateContainerNode)for(var b=this._getAllEffectedWidgets(),c=this._overrideDisplayValue[0],d=0;d<this._states.length;d++){var e=this._states[d];if(e==k.NORMAL||"undefined"==e)e=void 0;for(var f=0,h=0,m=0;m<b.length;m++){var q=b[m],p={undefined:c};p[void 0===e?"undefined":e]=this._overrideDisplayValue[d];q=k.getEffectiveDisplayValue(a,q,e,p);0!=q.effectiveDisplayValue.indexOf("none")&&(f++,e||"undefined"!=q.effectiveState?e&&q.effectiveState==e&&h++:h++)}e=
this._checkBoxes[d];m=this._notes[d];g.remove(e,"manageStatesCheckboxNoneVisible");g.remove(e,"manageStatesCheckboxAllVisible");g.remove(e,"manageStatesCheckboxAllVisibleBackgroundAll");g.remove(e,"manageStatesCheckboxAllVisibleBackgroundSome");g.remove(e,"manageStatesCheckboxSomeVisible");m.innerHTML="";0==f?(e._checkValue=0,g.add(e,"manageStatesCheckboxNoneVisible")):f==b.length?(e._checkValue=1,h==b.length?g.add(e,"manageStatesCheckboxAllVisible"):0<h?(g.add(e,"manageStatesCheckboxAllVisibleBackgroundSome"),
m.innerHTML=n.manageStatesSomeVisibleFromBackground):(g.add(e,"manageStatesCheckboxAllVisibleBackgroundAll"),m.innerHTML=n.manageStatesAllVisibleFromBackground)):(e._checkValue=2,g.add(e,"manageStatesCheckboxSomeVisible"),m.innerHTML=n.manageStatesSomeVisibleSomeHidden)}}},onOk:function(){if(this.anyCheckBoxChanges){var a=this._getContext();if(a){for(var c,e=this._getAllEffectedWidgets(),f=0;f<this._states.length;f++){var g=this._states[f];if(g==k.NORMAL||"undefined"==g)g=void 0;var h=this._checkBoxes[f]._checkValue;
if(0===h||1===h)for(var m=0;m<e.length;m++){var q=e[m];c||(c=new d);c.add(new b(q,[{display:this._overrideDisplayValue[f]?this._overrideDisplayValue[f]:1==h?"":"none"}],g))}}c&&a.getCommandStack().execute(c)}}},onCancel:function(){this.onClose()},destroy:function(){this.inherited(arguments);for(var a=0;a<this._handlers.length;a++)this._handlers[a].remove();this._handlers=[]}})})},"davinci/ve/widgets/Background":function(){define("dojo/_base/declare dojo/Deferred davinci/workbench/WidgetLite davinci/ve/widgets/ColorPickerFlat davinci/ve/widgets/ColorStore davinci/ve/widgets/MutableStore dijit/form/ComboBox davinci/ve/widgets/BackgroundDialog davinci/ve/utils/URLRewrite davinci/model/Path davinci/lang/ve davinci/ve/utils/CssUtils xide/views/_PanelDialog xide/utils".split(" "),
function(p,m,h,g,f,e,c,a,q,k,d,b,n,r){return p("davinci.ve.widgets.Background",[h],{__id:0,data:null,buildRendering:function(){this.domNode=dojo.doc.createElement("div",{style:"width:100%"});this._textFieldId=getId();this._buttonId=getId();var a=dojo.create("div",{className:"bgPropButtonDiv",style:"float:right; width:28px;"});dojo.create("button",{innerHTML:"...",id:this._buttonId,className:"bgPropButton btn-info",style:"font-size:1em;"},a);var b=38,h=this._colorswatch="true"==this.colorswatch;if(h){var b=
56,k=dojo.doc.createElement("div");dojo.addClass(k,"colorPicker");this._selectedColor=dojo.doc.createElement("div");this._selectedColor.innerHTML="\x26nbsp;";dojo.addClass(this._selectedColor,"colorPickerSelected");dojo.addClass(this._selectedColor,"colorPickerSelectedSkinny");this._colorPickerFlat=new g({})}var b=dojo.create("div",{className:"bgPropComboDiv",style:"margin-right:"+b+"px;padding:1px 0;"}),m=dojo.isArray(this.data)?this.data:[""],q=this.langObjVE=d;if(h){this._statics=["",davinci.ve.widgets.ColorPicker.divider,
q.colorPicker,q.removeValue];this._run={};this.data?(this.data.push({value:davinci.ve.widgets.ColorPicker.divider}),this.data.push({value:langObj.removeValue,run:function(){this.set("value","")}})):(this.data=[{value:this._statics[0]}],this.data.push({value:this._statics[2],run:this._chooseColorValue}),this.data.push({value:this._statics[3],run:function(){this.set("value","")}}),this.data.push({value:this._statics[1]}),this.data.push({value:"transparent"}),this.data.push({value:"black"}),this.data.push({value:"white"}),
this.data.push({value:"red"}),this.data.push({value:"green"}),this.data.push({value:"blue"}));m=[];for(q=0;q<this.data.length;q++)m.push(this.data[q].value),this.data[q].run&&(this._run[this.data[q].value]=this.data[q].run);this._store=new f({values:m,noncolors:this._statics})}else this._store=new e({values:m});this._comboBox=new c({store:this._store,id:this._textFieldId,style:"width:100%;"});b.appendChild(this._comboBox.domNode);this.domNode.appendChild(a);h&&(this.domNode.appendChild(k),dojo.connect(k,
"onclick",dojo.hitch(this,function(a){dojo.stopEvent(a);this._chooseColorValue()})),k.appendChild(this._selectedColor),this._colorPickerFlat_comboBoxUpdateDueTo="colorSwatch");this.domNode.appendChild(b);"string"==typeof this.propname&&this._comboBox&&(davinci.ve._BackgroundWidgets||(davinci.ve._BackgroundWidgets={}),davinci.ve._BackgroundWidgets[this.propname]={propPaletteWidget:this,comboBox:this._comboBox});this.inherited(arguments)},startup:function(){this.inherited(arguments);this._button=dojo.byId(this._buttonId);
dojo.connect(this._button,"onclick",this,function(){var c=this._cascade&&this._cascade._widget&&this._cascade._widget.getContext?this._cascade._widget.getContext():null,d=new a({context:c}),e=dojo.hitch(this,function(a){c||(console.error("Background.js. no context"),c={});var d=c.cascadeBatch={},e=d.propList=[],f=d.actions={},g=d.deferreds={};d.askUserResponse=void 0;if(!a.cancel){var h=davinci.ve._BackgroundWidgets,n;for(n in h){var p=h[n];if(p.bgdWidget){var d=p.bgdWidget.get("value"),u=p.propPaletteWidget.get("value");
d!==u&&(e.push(n),f[n]=dojo.hitch(this,function(a,b){a.propPaletteWidget._comboBoxUpdateDueTo="backgroundDialog";a.propPaletteWidget.set("value",b)},p,d),g[n]=new m)}}n="background-image";p=h[n];a=b.buildBackgroundImage(a.bgddata);for(d=0;d<a.length;d++)u=a[d],q.containsUrl(u)&&!q.isAbsolute(u)&&((h=q.getUrl(u))&&(u="url('"+(new k(h)).toString()+"')"),a[d]=u);d=0==a.length?"":a[a.length-1];u=p.propPaletteWidget.get("value");d!==u&&(p.propPaletteWidget._cascade&&(p.propPaletteWidget._cascade._valueArrayNew=
a),e.push(n),f[n]=dojo.hitch(this,function(a,b){p.propPaletteWidget._comboBoxUpdateDueTo="backgroundDialog";p.propPaletteWidget.set("value",b)},p,d),g[n]=new m);for(d=0;d<e.length;d++)n=e[d],g[n].then(dojo.hitch(this,function(a){(a=e[a+1])?f[a].apply():delete c.cascadeBatch},d));0<e.length&&(n=e[0],f[n].apply())}return!0},d),f=davinci.ve._BackgroundWidgets,g;for(g in f){var h=f[g].propPaletteWidget._cascade;h&&(h._valueArrayNew=h._valueArray)}d.set("baseLocation",this._baseLocation);(new n({onOk:function(){e()},
onShow:function(a,b,c){r.addChild(b,d,!0);this.add(d,null,!1);this.startDfd.resolve();return[d]}})).show()});this.connect(this._comboBox,"onChange",dojo.hitch(this,function(a){a!=davinci.ve.widgets.ColorPicker.divider&&a!=this.langObjVE.colorPicker||this._comboBox.set("value",this.value);var b=this._comboBoxUpdateDueTo;this._comboBoxUpdateDueTo=void 0;"setAttr"!=b&&this._onChange(a)}));this.connect(this._comboBox,"onFocus",dojo.hitch(this,function(a){a=davinci.ve._BackgroundWidgets;for(var b in a){var c=
a[b].propPaletteWidget._cascade;c&&(c._valueArrayNew=void 0)}(b=this._cascade&&this._cascade._widget&&this._cascade._widget.getContext?this._cascade._widget.getContext():null)&&delete b.cascadeBatch}));this._maqStartupComplete=!0},_setBaseLocationAttr:function(a){this._baseLocation=a},_setValueAttr:function(a){var b=this._comboBox.get("value");this._colorswatch&&dojo.style(this._selectedColor,"backgroundColor",a);a=dojo.isArray(a)?0<a.length?a[a.length-1]:"":a;b!==a&&("backgroundDialog"!==this._comboBoxUpdateDueTo&&
"colorSwatch"!==this._comboBoxUpdateDueTo&&(this._comboBoxUpdateDueTo="setAttr"),this._comboBox.set("value",a))},_onChange:function(a){this._colorswatch&&"string"==typeof a&&(a in this._run?dojo.hitch(this,this._run[a])():a==davinci.ve.widgets.ColorPicker.divider?this._comboBox.set("value",this._store.getItemNumber(0)):dojo.style(this._selectedColor,"backgroundColor",a));this.value=this._comboBox.get("value");this.onChange(a)},onChange:function(a){},_getValueAttr:function(){return this._comboBox.get("value")},
_setReadOnlyAttr:function(a){this._maqStartupComplete&&(this._isReadOnly=a,this._comboBox.set("disabled",a),this._button.disabled=a)},_chooseColorValue:function(){if(!this._isReadOnly){var a=this._comboBox.get("value"),b=this.isLeftToRight();davinci.ve.widgets.ColorPickerFlat.show(this._colorPickerFlat,a,this,b)}}})})},"davinci/ve/widgets/MultiInputDropDown":function(){define("dojo/_base/declare xide/widgets/TemplatedWidgetBase xide/form/Select dcl/dcl xide/data/TreeMemory xide/data/ObservableStore dstore/Trackable xide/factory dojo/_base/lang".split(" "),
function(p,m,h,g,f,e,c,a,q){var k=g(m,{numberDelta:1,templateString:"\x3cdiv \x3e\x3c/div\x3e",insertPosition:1,declaredClass:"davinci.ve.widgets.MultiInputDropDown",data:null,divider:"---",postCreate:function(){},get:function(a){return"value"===a&&this._dropDown?this._getValueAttr():""},startup:function(){var d=dojo.doc.createElement("div");this._run={};var b=this;this.data?(this.data.push({value:k.divider}),this.data.push({label:"Remove Value",value:"Remove Value",run:function(){this.set("value",
"",!1);b._dropDown.set("value","",!0)}})):this.data=[{value:"auto"},{value:"0px"},{value:k.divider},{value:"Remove Value",run:function(){this.set("value","",!1);b._dropDown.set("value","")}},{value:k.divider},{value:"Help",run:function(){alert("help!")}}];for(var g=[],m=0;m<this.data.length;m++)g.push(this.data[m].value),this.data[m].run&&(this._run[this.data[m].value]=this.data[m].run);var q=[];_.each(this.data,function(a){q.push({label:a.label||a.value,value:a.value,run:a.run})});this._dropDown=
new h({EDITABLE_CLASS:h.TYPEAHEAD,storeClass:p("driverStore",[f,c,e],{setValues:function(a){var b=[],c=0;a&&(this._values=a);dojo.forEach(this.data,dojo.hitch(this,function(a){b.push({label:a.label,value:a.value,id:c++})}));this._jsonData={identifier:"id",items:b};this.setData(b);this.root._emit("update",{target:null})},modifyItem:function(a,c){for(var d=0;d<this.data.length;d++)this.data[d].value===a&&(this.data[d].value=c);b._dropDown.set("value",c);this.setValues()},insert:function(a,b){this.data.splice(a,
0,{value:b,label:b});this.setValues()},contains:function(a){for(var b=0;b<this.data.length;b++)if(this.data[b].value==a)return!0;return!1},findSimilar:function(a){if(a=(new RegExp(/(\D*)(-?)(\d+)(\D*)/)).exec(a)){a=new RegExp((0<a.length?a[1]:"")+"(-?)(\\d+)"+(3<a.length?a[4]:""));for(var b=0;b<this.data.length;b++)if(a.test(this.data[b].value))return this.data[b].value}},getItemNumber:function(a){return this.data[a]},clearValues:function(){this._loadFinished=!1}}),required:!1,title:"",editable:!0,
options:q,selectOptions:{container:"body",liveSearch:!0,createItem:!0,createItemText:"Create: {0}"},userData:{}});this._dropDown.startup();this._store=this._dropDown.store;this._plus=a.createButton(this._dropDown.previewNode,"fa-plus","btn-default btn-xs2",null,"");this._minus=a.createButton(this._dropDown.button0,"fa-minus","btn-default btn-xs2",null,"");g=dojo.create("div",{"class":"propInputWithIncrDecrButtons"});g.appendChild(this._dropDown.domNode);d.appendChild(g);g=dojo.doc.createElement("div");
dojo.style(g,"clear","both");d.appendChild(g);this._currentValue=this._store.data[0];dojo.connect(this._dropDown,"onKeyUp",this,"_updateSpinner");var z=this;this._dropDown._on?this._dropDown._on("change",function(a){z._onChange(a)}):dojo.connect(this._dropDown,"onChange",this,"_onChange");dojo.connect(this._plus,"onclick",this,"_plusButton",!1);dojo.connect(this._minus,"onclick",this,"_minusButton",!1);this._updateSpinner();this.domNode.appendChild(d);this.add(this._dropDown);this.add(this._store)},
_setReadOnlyAttr:function(a){this._isReadOnly=a;this._dropDown&&(this._dropDown.set("disabled",a),dojo.attr(this._plus,"disabled",a),dojo.attr(this._minus,"disabled",a))},onChange:function(a){},_getValueAttr:function(){return this._dropDown.get("value")},_setValueAttr:function(a,b){this._dropDown.set("value",a,!0);this._currentValue=this._dropDown.get("value");!1!==b&&this._onChange(this._currentValue);if(!b)this.onChange()},_changeValue:function(a,b){a=a.split(" ");for(var c="",d=0;d<a.length;d++){0<
d&&(c+=" ");var e=a[d].match(/([-\d\.]+)([a-zA-Z%]*)/);if(e)if(1==e.length)c+=e[0];else for(var f=1;f<e.length;f++)c=isNaN(e[f])||""==e[f]?c+e[f]:c+(parseFloat(e[f])+b);else c+=a[d]}return c},_plusButton:function(){var a=this._dropDown.get("value"),b=this._changeValue(a,this.numberDelta);this._store.modifyItem(a,b);this._dropDown.set("value",b);this._onChange(b)},_minusButton:function(){var a=this._dropDown.get("value"),b=this._changeValue(a,-1*this.numberDelta);this._store.modifyItem(a,b);this._dropDown.set("value",
b);this._onChange(b)},_updateSpinner:function(){var a=this._dropDown.get("value"),a=/(-?)(\d+){1}/.exec(a);this._minus.disabled=a&&a.length?this._plus.disabled=!1:this._plus.disabled=!0;return!0},_onChange:function(a){var b;a in this._run?(this._dropDown.get("value",this._store.getItemNumber(0)),dojo.hitch(this,this._run[a])()):a==k.divider?this._dropDown.get("value",this._store.getItemNumber(0)):(b=this._store.findSimilar(a))?this._store.modifyItem(b,a):this._store.contains(a)||this._store.insert(this.insertPosition,
a);this._currentValue!=this._dropDown.get("value")&&(this._currentValue=this._dropDown.get("value"),this.onChange(a));this._updateSpinner()}});k.divider="---";q.setObject("davinci.ve.widgets.MultiInputDropDown",k);return k})},"davinci/ve/ThemeModifier":function(){define("dojo/_base/declare ../model/Path ../model/Factory ./utils/URLRewrite ./commands/ModifyRuleCommand ./commands/StyleCommand davinci/_common system/resource".split(" "),function(p,m,h,g,f,e,c,a){return p("davinci.ve.ThemeModifier",null,
{_getCssFiles:function(){if(this.cssFiles)return this.cssFiles;this.cssFiles=[];if(this.themeCssFiles){var a=this._themePath.getParentPath();this.cssFiles=this.themeCssFiles.map(function(c){return h.getModel({url:a.append(c).toString(),includeImports:!0})})}return this.cssFiles},_getThemeResource:function(a){a=this._themePath.getParentPath().append(a).toString();return system.resource.findResource(a)},getDeltaRule:function(a){var c=null,d=this.cssFiles[0],b=a.getSelectorText();this.cssFiles.forEach(function(a){var e=
a.getRules(b);0<e.length&&(d=a);e.forEach(function(b){b.parent.url==a.url&&(c=b)}.bind(this))}.bind(this));!c&&d&&(c=d.addRule(b+" {}"));return c},_markDirty:function(a,c){this._dirtyResource||(this._dirtyResource={});this._dirtyResource[a]={time:Date.now(),modelObject:c};this._srcChanged()},getCommandForStyleChange:function(a,c){var d=c||this.getSelection();c=d.length?d[d.length-1]:void 0;1<d.length&&this.select(c);if("inline"==a.appliesTo){for(var b=[],h=new m(this.fileName),d=0;d<a.values.length;d++)for(var k in a.values[d]){if(g.containsUrl(a.values[d][k])&&
!g.isAbsolute(a.values[d][k])){var q=new m(g.getUrl(a.values[d][k]));if(q.isAbsolute){var p={};p[k]=a.values[d][k]}else q=q.relativeTo(h).toString(),g.replaceUrl(a.values[d][k],q)}else p={},p[k]=a.values[d][k];b.push(p)}a=new e(c,b,a.applyToWhichStates)}else{if("proposal"==a.appliesTo.type){k=this.model.find({elementType:"CSSFile",relativeURL:a.appliesTo.targetFile},!0);if(!k&&this.cssFiles){for(d=0;this.cssFiles.length;d++)if(this.cssFiles[d].url===a.appliesTo.targetFile){k=this.cssFiles[d];break}if(!k)return}k=
k.addRule(a.appliesTo.ruleString+" {}")}else k=a.appliesTo.rule;a=new f(k,a.values,this)}return a},saveDynamicCssFiles:function(e,f){var d=[],b={visit:function(b){"CSSFile"==b.elementType&&b.isDirty()&&d.push(b.save(f).then(function(c){f||a.findResource(b.url).removeWorkingCopy();b.dirtyResource=f;return b},function(a){console.error(dojo.string.substitute(c.errorSavingFile,[b.url,a]));return a}));return!1}};e&&e.forEach(function(a){a.visit(b)});return d},dirtyDynamicCssFiles:function(a){if(null==
a)return console.error("dirtyDynamicCssFiles:invalid arg"),!1;var c=!1,d={visit:function(a){"CSSFile"==a.elementType&&a.isDirty()&&(c=!0);return c}};a&&a.forEach(function(a){if(c)return c;a.visit(d)});return c},close:function(){this.cssFiles&&this.cssFiles.forEach(function(a){a.close();require("davinci/model/Factory").closeModel(a)}.bind(this));delete this.cssFiles},destroy:function(){this.close()}})})},"davinci/ve/tools/SelectTool":function(){define("dojo/_base/declare dojo/dom-geometry ../../Workbench ../../workbench/Preferences ./_Tool ../widget ../metadata dojo/dnd/Mover ../../XPathUtils ../../html/HtmlFileXPathAdapter ../Snap ../../commands/CompoundCommand ../commands/AddCommand ../commands/ReparentCommand ../commands/MoveCommand ../commands/ResizeCommand ../tools/CreateTool ../States ../utils/GeomUtils".split(" "),
function(p,m,h,g,f,e,c,a,q,k,d,b,n,r,v,z,y,w,B){return p("davinci.ve.tools.SelectTool",f,{CONSTRAIN_MIN_DIST:3,activate:function(a){this._context=a},deactivate:function(){this._setTarget(null)},onMouseDown:function(b){var d=this._context;if(!d.isFocusNode(b.target)){this._shiftKey=b.shiftKey;this._sKey=this._spaceKey=!1;this._areaSelectClear();var f=this._checkFocusXY(b.pageX,b.pageY);f&&"NONE"!==c.getAllowedChild(f.type)[0]&&(f=null);var g=this._getTarget()||e.getEnclosingWidget(b.target);for(f||
(f=g);f&&!f.getContext();)f=e.getEnclosingWidget(f.domNode.parentNode);if(f)if("NONE"===c.getCanSelect(f.type)[0]&&g&&(g=f),dojo.isMac&&b.ctrlKey||2==b.button)d.select(f);else{for(var h=d.getSelection(),k=null,q=0;q<h.length;q++){for(var n=h[q],p=f;p&&p!=d.rootWidget;){if(p==n){k=n;break}p=p.getParent()}if(k)break}p=null;q=dojo.isMac?b.metaKey:b.ctrlKey;this._mouseDownInfo=null;if(0<=dojo.indexOf(h,f))q?d.deselect(f):(p=f,this._mouseDownInfo={widget:f,eventTargetWidget:g,pageX:b.pageX,pageY:b.pageY,
dateValue:Date.now()});else if(q){if(f==d.rootWidget)return;d.select(f,q)}else if(k)p=k,this._mouseDownInfo={widget:f,eventTargetWidget:g,pageX:b.pageX,pageY:b.pageY,dateValue:Date.now()};else{if(f==d.rootWidget){d.deselect();this._areaSelectInit(b.pageX,b.pageY);return}"NONE"===c.getAllowedChild(f.type)[0]?(d.select(f,q),p=f):(this._mouseDownInfo={widget:f,eventTargetWidget:g,pageX:b.pageX,pageY:b.pageY,dateValue:Date.now()},this._areaSelectInit(b.pageX,b.pageY))}if(p&&(f=d.getDocument(),h=f.defaultView&&
f.defaultView.dojo)&&(h=h.style(p.domNode,"position"),this._moverAbsolute="absolute"==h,h=p.getParent(),g=p.getHelper(),!(g&&g.disableDragging&&g.disableDragging(p)||h&&h.isLayout&&h.isLayout()))){this._moverWidget=p;this._moverWidgets=[p];this._moverLastEventTarget=null;d._chooseParent.setProposedParentWidget(null);h=d.getSelection();this._moverStartLocations=[];this._moverStartLocationsRel=[];for(q=0;q<h.length;q++){h[q]!=p&&this._moverWidgets.push(h[q]);k=null;k=(k=h[q].getHelper())&&k.getMarginBoxPageCoords?
k.getMarginBoxPageCoords(h[q]):B.getMarginBoxPageCoordsCached(h[q].domNode);this._moverStartLocations.push(k);var u=n=void 0;if((n=h[q].domNode.offsetParent)&&"BODY"!=n.tagName)var u=B.getBorderBoxPageCoordsCached(n),r=m.getBorderExtents(n),n=k.l-(u.l+r.l),u=k.t-(u.t+r.t);else n=k.l,u=k.t;this._moverStartLocationsRel.push({l:n,t:u})}q=p.domNode;k=q.offsetWidth;h=q.offsetHeight;n=null;g&&g.getMarginBoxPageCoords?(n=g.getMarginBoxPageCoords(p),k=n.w,h=n.h):n=B.getMarginBoxPageCoordsCached(q);q=n.l;
g=n.t;p=n.w;n=n.h;u=d.getScrollOffset();q+=u.x;g+=u.y;this._moverAbsolute?this._moverDragDiv=dojo.create("div",{className:"selectToolDragDiv",style:"left:"+q+"px;top:"+g+"px;width:"+p+"px;height:"+n+"px"},d.rootNode):(p=k+10,h+=10,k=p-8,n=h-8,this._moverDragDiv=dojo.create("div",{className:"flowDragOuter",style:"left:"+(q-5)+"px;top:"+(g-5)+"px;width:"+p+"px;height:"+h+"px"},d.rootNode),dojo.create("div",{className:"flowDragInner",style:"width:"+k+"px;height:"+n+"px"},this._moverDragDiv));this._mover=
new a(this._moverDragDiv,b,this);this._altKey=b.altKey;this._updateMoveCursor();(b=document.getElementById("maqetta_project_select"))&&b.focus();f.defaultView.focus()}}}},onMouseUp:function(a){var b=this._context;if(!b.isFocusNode(a.target)){var c=1===a.which,d=Date.now();this._mouseDownInfo&&(10>=Math.abs(a.pageX-this._mouseDownInfo.pageX)&&10>=Math.abs(a.pageY-this._mouseDownInfo.pageY)&&750>=d-this._mouseDownInfo.dateValue&&(this._context.select(this._mouseDownInfo.eventTargetWidget?this._mouseDownInfo.eventTargetWidget:
this._mouseDownInfo.widget),c=!1),this._mouseDownInfo=null);if(this._lastMouseUp&&10>=Math.abs(a.pageX-this._lastMouseUp.pageX)&&10>=Math.abs(a.pageY-this._lastMouseUp.pageY)&&750>=d-this._lastMouseUp.dateValue)this.onDblClick(a);this._lastMouseUp={pageX:a.pageX,pageY:a.pageY,dateValue:d};b.getScrollOffset();this._areaSelect&&c&&this._areaSelectSelectWidgets(a.pageX,a.pageY);this._areaSelectClear()}},onDblClick:function(a){if(!this._context.isFocusNode(a.target)){for(var b="selectToolDragDiv"===a.target.getAttribute("class")?
this._context.getSelection()[0]:this._getTarget()||e.getEnclosingWidget(a.target);b&&!b.getContext();)b=e.getEnclosingWidget(b.domNode.parentNode);if(b){var c=this._context.getSelection(),d=dojo.isMac?a.ctrlKey:a.metaKey;0<=dojo.indexOf(c,b)?d&&2!==a.button?this._context.deselect(b):2!==a.button&&this._context.select(b,null,!0):this._context.select(b,d,!0)}}},onMouseMove:function(a){this._context.isFocusNode(a.target)||(this._setTarget(a.target,a),this._areaSelect&&(1===a.which?this._areaSelectUpdate(a.pageX,
a.pageY):this._areaSelectClear()))},onMouseOver:function(a){try{dojo.hasClass(a.target,"editFeedback")||dojo.hasClass(a.target,"selectToolDragDiv")||(this._onMouseOverEventTargetXPath=q.getXPath(a.target)),this._setTarget(a.target,a)}catch(x){}},onMouseOut:function(a){try{this._setTarget(a.relatedTarget,a)}catch(x){}},onExtentChange:function(a){var d=a.index,f=a.newBox,g=a.copy,h=a.oldBoxes,k=a.applyToWhichStates,q,p=this._context,u=p._chooseParent,w=p.getSelection(),J=[];if(!(w.length<=d)){var G=
w[d],E=void 0;if("w"in f||"h"in f){var d=c.queryDescriptor(G.type,"resizable"),K,O;a=G.domNode;var P=a.ownerDocument.defaultView.getComputedStyle(a),u=B.getMarginExtents(a,P),Q=m.getBorderExtents(a,P);a=m.getPadExtents(a,P);"number"==typeof f.w&&(f.w-=u.w+Q.w+a.w);"number"==typeof f.h&&(f.h-=u.h+Q.h+a.h);switch(d){case "width":K=f.w;break;case "height":O=f.h;case "both":K=f.w,O=f.h}d=new z(G,K,O,k);E||(E=new b);E.add(d);d=dojo.style(G.domNode,"position");"l"in f&&"t"in f&&"absolute"==d&&(K=f.l,f=
f.t,f=new v(G,K,f,null,null,k),E.add(f))}else if(a=G.getStyleNode(),"absolute"!=dojo.style(a,"position")){var M=u.getProposedParentWidget();if(M){E||(E=new b);var R=null;a=p.reorderPreserveSiblingOrder(w);dojo.forEach(a,function(a){M.refChild&&(null!==R?q=R+1:(q=M.parent.getChildren().indexOf(M.refChild),0<=q?M.refAfter&&q++:q=null),R=q);if(g){var b,c=a.getData({identify:!1});c.context=p;dojo.withDoc(p.getDocument(),function(){b=e.createWidget(c)},this);b&&(E.add(new n(b,M.parent,q)),y.prototype.checkAddToCurrentState(E,
b),J.push(b))}else E.add(new r(a,M.parent,q)),J.push(a)},this);p.select(null)}else console.error("SelectTool: ppw is null")}else{var T=[],V=[];dojo.forEach(w,function(a,b){T[b]=w[b].getParent();T[b].indexOf&&(V[b]=T[b].indexOf(a))});K=f.l;f=f.t;E||(E=new b);var S=(M=u.getProposedParentWidget())?M.parent:null;a=G.getParent();O=void 0;S&&S!=a&&(O=S);var X=K-h[0].l,Y=f-h[0].t;g&&(a=p.reorderPreserveSiblingOrder(w),dojo.forEach(a,function(a){var b=a.getParent();if(b){for(var c=b.getChildren(),d=0;d<c.length&&
c[d]!=a;d++);var f,g=a.getData({identify:!1});g.context=p;dojo.withDoc(p.getDocument(),function(){f=e.createWidget(g)},this);f&&(S?E.add(new n(f,S,-1)):E.add(new n(f,b,d)),y.prototype.checkAddToCurrentState(E,f),J.push(f))}},this),newWidget=J[d]);var U=g?newWidget:G,W=new v(U,K,f,null,h[d],k);E.add(W);O&&(E.add(new r(U,S,"last")),E.add(new v(U,K,f,null,null,k)));dojo.forEach(w,dojo.hitch(this,function(a,b){U=g?J[b]:a;if(a!=G){var c=h[b].l+X,d=h[b].t+Y;"absolute"==a.getStyleNode().style.position&&
(b=new v(U,c,d,W,h[b],k,!0),E.add(b));a=a.getParent();S&&S!=a&&(E.add(new r(U,S,"last")),E.add(new v(U,c,d,null,null,k,!0)))}}));g&&dojo.forEach(w,dojo.hitch(this,function(a,b){E.add(new r(w[b],T[b],V[b]));E.add(new v(w[b],h[b].l,h[b].t,null,h[b],k,!0))}))}E?(p.getCommandStack().execute(E),dojo.forEach(J,function(a,b){p.select(a,0<b)},this)):p.select(G)}},_updateMoveCursor:function(){var a=this._context.getDocument().body;this._moverDragDiv&&(this._altKey?dojo.addClass(a,"selectToolDragCopy"):dojo.addClass(a,
"selectToolDragMove"))},onKeyDown:function(a){if(a)switch(dojo.stopEvent(a),a.keyCode){case dojo.keys.SHIFT:this._shiftKey=!0;d.clearSnapLines(this._context);break;case dojo.keys.ALT:this._altKey=!0;this._updateMoveCursor();break;case dojo.keys.SPACE:this._spaceKey=!0;break;case 83:this._sKey=!0;break;case dojo.keys.TAB:this._moveFocus(a)&&dojo.stopEvent(a);break;case dojo.keys.RIGHT_ARROW:case dojo.keys.LEFT_ARROW:case dojo.keys.DOWN_ARROW:case dojo.keys.UP_ARROW:this._move(a)}},onKeyUp:function(a){if(a&&
this._moverWidget)switch(dojo.stopEvent(a),a.keyCode){case dojo.keys.SHIFT:this._shiftKey=!1;break;case dojo.keys.ALT:this._altKey=!1;this._updateMoveCursor();break;case dojo.keys.SPACE:this._spaceKey=!1;break;case 83:this._sKey=!1}},_move:function(a){var c=this._context.getSelection();if(0!==c.length){var d=0,e=0,f=a.shiftKey?10:1;switch(a.keyCode){case dojo.keys.RIGHT_ARROW:d=f;break;case dojo.keys.LEFT_ARROW:d=-f;break;case dojo.keys.DOWN_ARROW:e=f;break;case dojo.keys.UP_ARROW:e=-f}var g=new b;
dojo.forEach(c,function(a){var b=null,b=(b=a.getHelper())&&b.getMarginBoxPageCoords?b.getMarginBoxPageCoords(a):B.getMarginBoxPageCoords(a.domNode);g.add(new v(a,b.l+d,b.t+e))},this);g.isEmpty()||(this._context.getCommandStack().execute(g),this._updateTargetOverlays())}},_moveFocus:function(a){a=a.shiftKey?-1:1;for(var b=this._context.getSelection()[0],c=this._context.getTopWidgets(),b=b?dojo.indexOf(c,b)+a:0<a?0:c.length-1,d=c[b];d&&!d.getContext();)b+=a,d=c[b];d&&this._context.select(d);return d},
onMove:function(a,b,c){this._mouseDownInfo=null;a=this._context;var d=a._chooseParent,e=a.getSelection(),f=e.indexOf(this._moverWidget);if(0>f)console.error("SelectTool.js onMove error. move widget is not selected");else{this._selectionHideFocus();var k=!1,m=d.getProposedParentWidget();if(m&&m.parent&&m.parent.domNode){var q=m.parent.domNode;if("BODY"==m.parent.domNode.tagName)k=!0;else for(m=c.target;m&&"BODY"!=m.tagName;){if(m==q){k=!0;break}m=m.parentNode}}k&&c.target==this._moverLastEventTarget||
d.setProposedParentWidget(null);this._moverLastEventTarget=c.target;this._moverBox=b;this._moverDragDiv.style.left=b.l+"px";this._moverDragDiv.style.top=b.t+"px";if(this._moverAbsolute)for(k=b.l-this._moverStartLocations[f].l,b=b.t-this._moverStartLocations[f].t,f=Math.abs(k),q=Math.abs(b),this._shiftKey&&(f>=this.CONSTRAIN_MIN_DIST||q>=this.CONSTRAIN_MIN_DIST)&&(f>q?b=0:k=0),f=0;f<e.length;f++)q=e[f],m=this._moverStartLocationsRel[f].t,q.domNode.style.left=this._moverStartLocationsRel[f].l+k+"px",
q.domNode.style.top=m+b+"px";k=this._moverWidget.type;e=this._moverWidget.getParent();(b=d.parentListDivGet())||(b=d.parentListDivCreate({widgetType:k,absolute:this._moverAbsolute,doCursor:!this._moverAbsolute,beforeAfter:null,currentParent:e}));if(f=a.getParentIframe()){offsetTop=offsetLeft=0;for(offsetNode=f;offsetNode&&"BODY"!=offsetNode.tagName;)offsetLeft+=offsetNode.offsetLeft,offsetTop+=offsetNode.offsetTop,offsetNode=offsetNode.offsetParent;f=B.getScrollLeft(a.rootNode.parentNode);q=B.getScrollTop(a.rootNode.parentNode);
b.style.left=offsetLeft+c.pageX-f+"px";b.style.top=offsetTop+c.pageY-q+"px"}b=g.getPreferences("davinci.ve.editorPrefs",h.getProject());b=!this._shiftKey&&b.snap&&this._moverAbsolute;f=a.getPreference("showPossibleParents");f=!0;d=d.isSpaceKeyDown()||this._spaceKey;d=!f&&d||f&&!d;k={type:k};f={x:c.pageX,y:c.pageY};q=null;q=(q=this._moverWidget.getHelper())&&q.getMarginBoxPageCoords?q.getMarginBoxPageCoords(this._moverWidget):B.getMarginBoxPageCoords(this._moverWidget.domNode);a.dragMoveUpdate({widgets:this._moverWidgets,
data:k,eventTarget:c.target,position:f,absolute:this._moverAbsolute,currentParent:e,rect:q,doSnapLinesX:b,doSnapLinesY:b,doFindParentsXY:d,doCursor:!this._moverAbsolute})}},onFirstMove:function(a){},onMoveStart:function(a){},onMoveStop:function(a){a=this._context;var b=this._context._chooseParent;this._moverWidget&&this._moverWidget._srcElement&&q.getXPath(this._moverWidget._srcElement,k);var c=!0,d,e;this._moverBox&&this._moverWidget&&this._moverWidget.domNode?(e={l:this._moverBox.l,t:this._moverBox.t},
d=a.getSelection().indexOf(this._moverWidget),0>d&&(c=!1)):c=!1;if(c){c=void 0;if(this._sKey)for(var f=w.getStatesListCurrent(this._moverWidget.domNode),g=0;g<f.length;g++){if(f[g]){c=f[g];break}}else c=w.propertyDefinedForAnyCurrentState(this._moverWidget.domNode,["left","top","right","bottom"]);var h=this._getPageLeftTop(this._moverWidget.domNode.offsetParent),f=a.getScrollOffset(),g=Math.abs(e.l-h.l-this._moverStartLocations[d].l),h=Math.abs(e.t-h.t-this._moverStartLocations[d].t);this._shiftKey&&
(g>=this.CONSTRAIN_MIN_DIST||h>=this.CONSTRAIN_MIN_DIST)&&(g>h?e.t=this._moverStartLocations[d].t:e.l=this._moverStartLocations[d].l);e.t-=f.y;e.l-=f.x;this.onExtentChange({index:d,newBox:e,oldBoxes:this._moverStartLocations,copy:this._altKey,applyToWhichStates:c})}this._moverDragDiv&&((d=this._moverDragDiv.parentNode)&&d.removeChild(this._moverDragDiv),this._moverDragDiv=null);this._mover=this._moverBox=this._moverWidget=this._moverWidgets=this._moverLastEventTarget=null;this._updateMoveCursor();
a.dragMoveCleanup();b.parentListDivDelete();this._selectionShowFocus();b=q.toCssPath(this._onMouseOverEventTargetXPath);a=a.getDocument();(a=b?a.querySelector(b):null)&&this._setTarget(a)},_getPageLeftTop:function(a){if(a){var b=a.offsetLeft,c=a.offsetTop;for(a=a.offsetParent;a&&"BODY"!=a.tagName;)b+=a.offsetLeft,c+=a.offsetTop,a=a.offsetParent;return{l:b,t:c}}return{l:0,t:0}},_areaSelectInit:function(a,b){this._areaSelect={x:a,y:b,attached:!1};this._areaSelectDiv=dojo.create("div",{className:"areaSelectDiv",
style:"display:none"})},_areaSelectUpdate:function(a,b){this._areaSelect&&this._areaSelectDiv&&(a=this._getBounds(this._areaSelect.x,this._areaSelect.y,a,b),b=this._areaSelectDiv.style,b.display="block",b.left=a.l+"px",b.top=a.t+"px",b.width=a.w+"px",b.height=a.h+"px",this._areaSelect.attached||(this._context.rootNode.appendChild(this._areaSelectDiv),this._areaSelect.attached=!0))},_areaSelectClear:function(){this._areaSelect=null;if(this._areaSelectDiv){var a=this._areaSelectDiv.parentNode;a&&a.removeChild(this._areaSelectDiv);
this._areaSelectDiv=null}},_areaSelectSelectWidgets:function(a,b){if(this._areaSelect){var c=this._getBounds(this._areaSelect.x,this._areaSelect.y,a,b);a=c.l;b=c.t;var d=c.w,c=c.h,e=this._context;e.deselect();for(var e=e.getTopWidgets(),f=0;f<e.length;f++)this._areaSelectRecursive(e[f],a,b,d,c)}},_areaSelectRecursive:function(a,b,c,d,e){if(a&&a.domNode){var f=B.getBorderBoxPageCoordsCached(a.domNode);if(f.l>=b&&f.t>=c&&f.l+f.w<=b+d&&f.t+f.h<=c+e)this._context.select(a,!0);else for(a=a.getChildren(),
f=0;f<a.length;f++)this._areaSelectRecursive(a[f],b,c,d,e)}},_getBounds:function(a,b,c,d){var e={};a<=c?(e.l=a,e.w=c-a):(e.l=c,e.w=a-c);b<=d?(e.t=b,e.h=d-b):(e.t=d,e.h=b-d);return e},_checkFocusXY:function(a,b){for(var c=this._context,d=c.getSelection(),e=0;e<d.length;e++){var f=c._focuses[e].getBounds();if(a>=f.l&&a<=f.l+f.w&&b>=f.t&&b<=f.t+f.h)return d[e]}return null},_selectionHideFocus:function(){for(var a=this._context,b=a.getSelection(),c=0;c<b.length;c++)a._focuses[c].hide()},_selectionShowFocus:function(){for(var a=
this._context,b=a.getSelection(),c=0;c<b.length;c++)a._focuses[c].show(b[c],{})}})})},"dojo/dnd/Mover":function(){define("../_base/array ../_base/declare ../_base/lang ../sniff ../_base/window ../dom ../dom-geometry ../dom-style ../Evented ../on ../touch ./common ./autoscroll".split(" "),function(p,m,h,g,f,e,c,a,q,k,d,b,n){return m("dojo.dnd.Mover",[q],{constructor:function(a,b,c){function f(a){a.preventDefault();a.stopPropagation()}this.node=e.byId(a);this.marginBox={l:b.pageX,t:b.pageY};this.mouseButton=
b.button;b=this.host=c;a=a.ownerDocument;this.events=[k(a,d.move,h.hitch(this,"onFirstMove")),k(a,d.move,h.hitch(this,"onMouseMove")),k(a,d.release,h.hitch(this,"onMouseUp")),k(a,"dragstart",f),k(a.body,"selectstart",f)];n.autoScrollStart(a);if(b&&b.onMoveStart)b.onMoveStart(this)},onMouseMove:function(a){n.autoScroll(a);var b=this.marginBox;this.host.onMove(this,{l:b.l+a.pageX,t:b.t+a.pageY},a);a.preventDefault();a.stopPropagation()},onMouseUp:function(a){(g("webkit")&&g("mac")&&2==this.mouseButton?
0==a.button:this.mouseButton==a.button)&&this.destroy();a.preventDefault();a.stopPropagation()},onFirstMove:function(b){var d=this.node.style,e,g=this.host;switch(d.position){case "relative":case "absolute":e=Math.round(parseFloat(d.left))||0;d=Math.round(parseFloat(d.top))||0;break;default:d.position="absolute";d=c.getMarginBox(this.node);e=f.doc.body;var h=a.getComputedStyle(e),k=c.getMarginBox(e,h),h=c.getContentBox(e,h);e=d.l-(h.l-k.l);d=d.t-(h.t-k.t)}this.marginBox.l=e-this.marginBox.l;this.marginBox.t=
d-this.marginBox.t;if(g&&g.onFirstMove)g.onFirstMove(this,b);this.events.shift().remove()},destroy:function(){p.forEach(this.events,function(a){a.remove()});var a=this.host;if(a&&a.onMoveStop)a.onMoveStop(this);this.events=this.node=this.host=null}})})},"dojo/touch":function(){define("./_base/kernel ./aspect ./dom ./dom-class ./_base/lang ./on ./has ./mouse ./domReady ./_base/window".split(" "),function(p,m,h,g,f,e,c,a,q,k){function d(a,b,c){return z&&c?function(a,b){return e(a,c,b)}:r?function(c,
d){var f=e(c,b,d),g=e(c,a,function(a){(!I||(new Date).getTime()>I+1E3)&&d.call(this,a)});return{remove:function(){f.remove();g.remove()}}}:function(b,c){return e(b,a,c)}}function b(a){do if(a.dojoClick)return a.dojoClick;while(a=a.parentNode)}function n(a,c,d){if(w=!a.target.disabled&&b(a.target))B=a.target,u=a.touches?a.touches[0].pageX:a.clientX,x=a.touches?a.touches[0].pageY:a.clientY,D=("object"==typeof w?w.x:"number"==typeof w?w:0)||4,F=("object"==typeof w?w.y:"number"==typeof w?w:0)||4,y||(a=
function(a){k.doc.addEventListener(a,function(b){b._dojo_click||!((new Date).getTime()<=C+1E3)||"INPUT"==b.target.tagName&&g.contains(b.target,"dijitOffScreen")||(b.stopPropagation(),b.stopImmediatePropagation&&b.stopImmediatePropagation(),"click"!=a||"INPUT"==b.target.tagName&&"radio"!=b.target.type&&"checkbox"!=b.target.type||"TEXTAREA"==b.target.tagName||"AUDIO"==b.target.tagName||"VIDEO"==b.target.tagName||b.preventDefault())},!0)},y=!0,k.doc.addEventListener(c,function(a){w=w&&a.target==B&&Math.abs((a.touches?
a.touches[0].pageX:a.clientX)-u)<=D&&Math.abs((a.touches?a.touches[0].pageY:a.clientY)-x)<=F},!0),k.doc.addEventListener(d,function(a){if(w){C=(new Date).getTime();var b=a.target;"LABEL"===b.tagName&&(b=h.byId(b.getAttribute("for"))||b);setTimeout(function(){e.emit(b,"click",{bubbles:!0,cancelable:!0,_dojo_click:!0})})}},!0),a("click"),a("mousedown"),a("mouseup"))}var r=c("touch"),v=5>c("ios"),z=navigator.msPointerEnabled,y,w,B,u,x,D,F,C,I,A;r&&(z?q(function(){k.doc.addEventListener("MSPointerDown",
function(a){n(a,"MSPointerMove","MSPointerUp")},!0)}):q(function(){function a(a){var b=f.delegate(a,{bubbles:!0});6<=c("ios")&&(b.touches=a.touches,b.altKey=a.altKey,b.changedTouches=a.changedTouches,b.ctrlKey=a.ctrlKey,b.metaKey=a.metaKey,b.shiftKey=a.shiftKey,b.targetTouches=a.targetTouches);return b}A=k.body();k.doc.addEventListener("touchstart",function(a){I=(new Date).getTime();var b=A;A=a.target;e.emit(b,"dojotouchout",{relatedTarget:A,bubbles:!0});e.emit(A,"dojotouchover",{relatedTarget:b,
bubbles:!0});n(a,"touchmove","touchend")},!0);e(k.doc,"touchmove",function(b){I=(new Date).getTime();var c=k.doc.elementFromPoint(b.pageX-(v?0:k.global.pageXOffset),b.pageY-(v?0:k.global.pageYOffset));c&&(A!==c&&(e.emit(A,"dojotouchout",{relatedTarget:c,bubbles:!0}),e.emit(c,"dojotouchover",{relatedTarget:A,bubbles:!0}),A=c),e.emit(c,"dojotouchmove",a(b))||b.preventDefault())});e(k.doc,"touchend",function(b){I=(new Date).getTime();var c=k.doc.elementFromPoint(b.pageX-(v?0:k.global.pageXOffset),b.pageY-
(v?0:k.global.pageYOffset))||k.body();e.emit(c,"dojotouchend",a(b))})}));m={press:d("mousedown","touchstart","MSPointerDown"),move:d("mousemove","dojotouchmove","MSPointerMove"),release:d("mouseup","dojotouchend","MSPointerUp"),cancel:d(a.leave,"touchcancel",r?"MSPointerCancel":null),over:d("mouseover","dojotouchover","MSPointerOver"),out:d("mouseout","dojotouchout","MSPointerOut"),enter:a._eventHandler(d("mouseover","dojotouchover","MSPointerOver")),leave:a._eventHandler(d("mouseout","dojotouchout",
"MSPointerOut"))};return p.touch=m})},"dojo/dnd/common":function(){define(["../sniff","../_base/kernel","../_base/lang","../dom"],function(p,m,h,g){var f=h.getObject("dojo.dnd",!0);f.getCopyKeyState=function(e){return e[p("mac")?"metaKey":"ctrlKey"]};f._uniqueId=0;f.getUniqueId=function(){var e;do e=m._scopeName+"Unique"+ ++f._uniqueId;while(g.byId(e));return e};f._empty={};f.isFormElement=function(e){e=e.target;3==e.nodeType&&(e=e.parentNode);return 0<=" a button textarea input select option ".indexOf(" "+
e.tagName.toLowerCase()+" ")};return f})},"dojo/dnd/autoscroll":function(){define("../_base/lang ../sniff ../_base/window ../dom-geometry ../dom-style ../window".split(" "),function(p,m,h,g,f,e){var c={};p.setObject("dojo.dnd.autoscroll",c);c.getViewport=e.getBox;c.V_TRIGGER_AUTOSCROLL=32;c.H_TRIGGER_AUTOSCROLL=32;c.V_AUTOSCROLL_VALUE=16;c.H_AUTOSCROLL_VALUE=16;var a,q=h.doc,k=Infinity,d=Infinity;c.autoScrollStart=function(b){q=b;a=e.getBox(q);b=h.body(q).parentNode;k=Math.max(b.scrollHeight-a.h,
0);d=Math.max(b.scrollWidth-a.w,0)};c.autoScroll=function(b){var f=a||e.getBox(q),g=h.body(q).parentNode,m=0,p=0;b.clientX<c.H_TRIGGER_AUTOSCROLL?m=-c.H_AUTOSCROLL_VALUE:b.clientX>f.w-c.H_TRIGGER_AUTOSCROLL&&(m=Math.min(c.H_AUTOSCROLL_VALUE,d-g.scrollLeft));b.clientY<c.V_TRIGGER_AUTOSCROLL?p=-c.V_AUTOSCROLL_VALUE:b.clientY>f.h-c.V_TRIGGER_AUTOSCROLL&&(p=Math.min(c.V_AUTOSCROLL_VALUE,k-g.scrollTop));window.scrollBy(m,p)};c._validNodes={div:1,p:1,td:1};c._validOverflow={auto:1,scroll:1};c.autoScrollNodes=
function(a){for(var b,d,e,k,q,p=0,B=0,u=a.target;u;){if(1==u.nodeType&&u.tagName.toLowerCase()in c._validNodes){e=f.getComputedStyle(u);q=e.overflowX.toLowerCase()in c._validOverflow;k=e.overflowY.toLowerCase()in c._validOverflow;if(q||k)b=g.getContentBox(u,e),d=g.position(u,!0);if(q){e=Math.min(c.H_TRIGGER_AUTOSCROLL,b.w/2);q=a.pageX-d.x;if(m("webkit")||m("opera"))q+=h.body().scrollLeft;p=0;0<q&&q<b.w&&(q<e?p=-e:q>b.w-e&&(p=e),u.scrollLeft+=p)}if(k){k=Math.min(c.V_TRIGGER_AUTOSCROLL,b.h/2);e=a.pageY-
d.y;if(m("webkit")||m("opera"))e+=h.body().scrollTop;B=0;0<e&&e<b.h&&(e<k?B=-k:e>b.h-k&&(B=k),u.scrollTop+=B)}if(p||B)return}try{u=u.parentNode}catch(x){u=null}}c.autoScroll(a)};return c})},"davinci/ve/Snap":function(){define(["davinci/ve/utils/GeomUtils"],function(p){dojo.getObject("davinci.ve.Snap",!0);return davinci.ve.Snap={updateSnapLinesBeforeTraversal:function(m,h){m._snapX=null;m._snapY=null;if(m._lastSnapBox&&m._lastSnapBox.l==h.l&&m._lastSnapBox.t==h.t&&m._lastSnapBox.w==h.w&&m._lastSnapBox.h==
h.h)return!1;snapBox={l:h.l,t:h.t,w:h.w,h:h.h,c:h.l+h.w/2,r:h.l+h.w,m:h.t+h.h/2,b:h.t+h.h};m._lastSnapBox=snapBox;return!0},findSnapOpportunities:function(m,h,g,f,e){function c(a,c,d,e){e<b&&(m._snapX={type:a,typeRefObj:a,typeCurrObj:c,x:d,widget:h,delta:e},b=e,m._snapXLast=m._snapX)}function a(a,b,c,d){d<n&&(m._snapY={type:a,typeRefObj:a,typeCurrObj:b,y:c,widget:h,delta:d},n=d,m._snapYLast=m._snapY)}g=m._lastSnapBox;var q=h.domNode;if("BODY"!=q.tagName){var k=null,d=h.getHelper(),k=d&&d.getMarginBoxPageCoords?
d.getMarginBoxPageCoords(h):p.getMarginBoxPageCoordsCached(q);m.getScrollOffset();k.x=k.l;k.y=k.t;var b=m._snapX?m._snapX.delta:6,n=m._snapY?m._snapY.delta:6,q={snapRect:{l:k.x,c:k.x+k.w/2,r:k.x+k.w,t:k.y,m:k.y+k.h/2,b:k.y+k.h}};d&&d.getSnapInfo&&(q=d.getSnapInfo(h,q));var d=q.snapRect,r;if(d){if(f){f=m._snapXLast&&m._snapXLast.widget===h?Infinity:75;k=Math.abs(d.t-g.b);r=Math.abs(d.b-g.t);var v=Math.abs(d.b-g.b);if(Math.abs(d.t-g.t)<=f||k<=f||r<=f||v<=f)f=Math.abs(d.l-g.l),k=Math.abs(d.c-g.c),r=
Math.abs(d.r-g.r),c("left","left",d.l,f),c("center","center",d.c,k),c("right","right",d.r,r),c("left","center",d.c,Math.abs(d.c-g.l)),c("left","right",d.r,Math.abs(d.r-g.l)),c("right","left",d.l,Math.abs(d.l-g.r)),c("right","center",d.c,Math.abs(d.c-g.r)),c("center","left",d.l,Math.abs(d.l-g.c)),c("center","right",d.r,Math.abs(d.r-g.c))}e&&(e=m._snapYLast&&m._snapYLast.widget===h?Infinity:75,f=Math.abs(d.l-g.r),k=Math.abs(d.r-g.l),r=Math.abs(d.r-g.r),Math.abs(d.l-g.l)<=e||f<=e||k<=e||r<=e)&&(f=Math.abs(d.t-
g.t),k=Math.abs(d.m-g.m),r=Math.abs(d.b-g.b),a("top","top",d.t,f),a("middle","middle",d.m,k),a("bottom","bottom",d.b,r),a("top","middle",d.m,Math.abs(d.m-g.t)),a("top","bottom",d.b,Math.abs(d.b-g.t)),a("bottom","top",d.t,Math.abs(d.t-g.b)),a("bottom","middle",d.m,Math.abs(d.m-g.b)),a("middle","top",d.t,Math.abs(d.t-g.m)),a("middle","bottom",d.b,Math.abs(d.b-g.m)))}if(q=q.snapPoints)for(d=0;d<q.length;d++)e=q[d],f=Math.abs(e.x-g.l),k=Math.abs(e.x-g.c),r=Math.abs(e.x-g.r),c("point",e.x,f),c("point",
e.x,k),c("point",e.x,r),f=Math.abs(e.y-g.t),k=Math.abs(e.y-g.m),r=Math.abs(e.y-g.b),a("point",e.y,f),a("point",e.y,k),a("point",e.y,r)}},updateSnapLinesAfterTraversal:function(m){function h(a,c,d,b){d.style.display="block";b.style.display="block";f=(b=c.getHelper())&&b.getMarginBoxPageCoords?b.getMarginBoxPageCoords(c):p.getMarginBoxPageCoordsCached(c.domNode);a.getScrollOffset();f.x=f.l;f.y=f.t;f.r=f.x+f.w;f.b=f.y+f.h;f.c=f.x+f.w/2;f.m=f.y+f.h/2;d.style.left=f.x+"px";d.style.top=f.y+"px";d.style.width=
f.w+"px";d.style.height=f.h+"px";d.style.backgroundColor="rgba(255,0,255,.05)"}var g=m.getContainerNode();m._snapLinesDiv||(m._snapLinesDiv=dojo.create("div",{"class":"snaplines",style:"position:absolute;top:0px;left:0px;z-index:1000001;pointer-events:none;"},g),m._snapLinesDivWidgetX=dojo.create("div",{"class":"snaplinesWidgetX",style:"position:absolute;pointer-events:none;"},m._snapLinesDiv),m._snapLinesDivAlignX=dojo.create("div",{"class":"snaplinesAlignX",style:"position:absolute;pointer-events:none;"},
m._snapLinesDiv),m._snapLinesDivWidgetY=dojo.create("div",{"class":"snaplinesWidgetY",style:"position:absolute;pointer-events:none;"},m._snapLinesDiv),m._snapLinesDivAlignY=dojo.create("div",{"class":"snaplinesAlignY",style:"position:absolute;pointer-events:none;"},m._snapLinesDiv));m._snapLinesDiv.style.display="block";var f,g=m._snapLinesDivAlignX.style,e=m._snapLinesDivWidgetX.style;if(m._snapX){e=m._snapX;h(m,e.widget,m._snapLinesDivWidgetX,m._snapLinesDivAlignX);var c,a;f.y<snapBox.t?(c=f.y,
a=snapBox.t-f.y):(c=snapBox.t,a=f.y-snapBox.t);g.left="point"==e.typeCurrObj?m._snapX.x+"px":"left"==e.typeCurrObj?f.x+"px":"center"==e.typeCurrObj?f.c+"px":f.r+"px";g.top=c+"px";g.width="1px";g.height=a+"px";g.backgroundColor="rgba(255,0,255,.75)"}else g.display="none",e.display="none";g=m._snapLinesDivAlignY.style;e=m._snapLinesDivWidgetY.style;m._snapY?(e=m._snapY,h(m,e.widget,m._snapLinesDivWidgetY,m._snapLinesDivAlignY),f.x<snapBox.l?(m=f.x,c=snapBox.l-f.x):(m=snapBox.l,c=f.x-snapBox.l),g.top=
"point"==e.type?e.y+"px":"top"==e.typeCurrObj?f.y+"px":"middle"==e.typeCurrObj?f.m+"px":f.b+"px",g.left=m+"px",g.height="1px",g.width=c+"px",g.backgroundColor="rgba(255,0,255,.75)"):(g.display="none",e.display="none")},clearSnapLines:function(m){m._snapLinesDiv&&(m._snapLinesDiv.style.display="none");m._snapX=m._snapY=null}}})},"davinci/ve/ChooseParent":function(){define("dojo/_base/declare davinci/Runtime ./widget ./_Widget ./metadata davinci/ve/utils/GeomUtils".split(" "),function(p,m,h,g,f,e){return p("davinci.ve.ChooseParent",
null,{constructor:function(c){this._context=c.context},getAllowedTargetWidget:function(c,a,e,k){var d=h.getEnclosingWidget,b=[],m=[];a=a.length?a:[a];var q=this;a.forEach(function(a){m.push({type:a.type,allowedParent:f.getAllowedParent(a.type),classList:q.getClassList(a.type)})});do{a=c instanceof g?c.type:c._dvWidget.type;var p=this.getClassList(a);this.isAllowed(m,c,a,p,k)&&b.push(c);c=d(c)}while(c&&e);return b},isAllowed:function(c,a,e,g,d){function b(a,b){return b.some(function(b){return-1!==
a.indexOf(b)})}var k=f.getAllowedChild(e);"html.body"===e&&(k=["ANY"]);return c.every(function(a){var c="NONE"!==k[0]&&("ANY"===k[0]||"BLOCK"===k[0]||b(k,a.classList)),f="ANY"===a.allowedParent[0]||b(a.allowedParent,g),m=h.getWidgetHelper(a.type);return m&&m.isAllowed?m.isAllowed({childType:a.type,childClassList:a.classList,parentType:e,parentClassList:g,absolute:d.absolute,isAllowedChild:c,isAllowedParent:f}):c&&f})},getClassList:function(c){var a=f.queryDescriptor(c,"class");return a?(a=a.split(/\s+/),
a.push(c),a):[c]},dragUpdateCandidateParents:function(c){var a=c.widgetType,f=c.showCandidateParents,g=c.doCursor,d=c.absolute,b=c.currentParent;c=this._XYParent;this._proposedParentWidget||(this._proposedParentWidget=this._getDefaultParent(a,c,d,b));(f||g)&&this.highlightNewWidgetParent(this._proposedParentWidget);var a=this._context,d=a.getActiveDragDiv(),n;d&&(d=dojo.query(".maqCandidateParents",d),1==d.length&&(n=d[0]));if(n)if(f){f=!0;if(this._lastProposedParentWidget!=this._proposedParentWidget)f=
!1;else if("undefined"==typeof this._lastAllowedParentList||null===this._lastAllowedParentList)f=!1;else if(this._lastAllowedParentList.length!=c.length)f=!1;else for(d=0;d<c.length;d++)if(this._lastAllowedParentList[d]!=c[d]){f=!1;break}this._lastProposedParentWidget=this._proposedParentWidget;if(!f)if(f=dojo.i18n.getLocalization("davinci.ve","ve"),n.innerHTML="","undefined"==typeof c||null===c)this._lastAllowedParentList=null,b=0;else{this._lastAllowedParentList=c.slice();var b=c.length,p=dojo.create("div",
{className:"maqCandidateParentsHeader"},n),d=dojo.create("div",{className:"maqCandidateParentsList"},n);n=dojo.create("div",{className:"maqCandidateParentsHelp"},n);if(0===b)p.innerHTML=f.noValidParents;else if(1==b)p.innerHTML=f.willBeChildOf,dojo.create("div",{className:"maqCandidateListItem maqCandidateCurrent",innerHTML:h.getLabel(c[0])},d);else{p.innerHTML=f.candidateParents;for(var b="\x3ctable\x3e",p=c.length-1,v=1;0<=p;p--,v++){var z="maqCandidateListItem";c[p]==this._proposedParentWidget&&
(z+=" maqCandidateCurrent");b+='\x3ctr class\x3d"'+z+'"\x3e\x3ctd class\x3d"maqCandidateCheckedColumn"\x3e\x26rarr;\x3c/td\x3e\x3ctd class\x3d"maqCandidateNumberColumn"\x3e'+v+'\x3c/td\x3e\x3ctd class\x3d"maqCandidateParentColumn"\x3e'+h.getLabel(c[p])+"\x3c/td\x3e\x3c/tr\x3e"}d.innerHTML=b+"\x3c/table\x3e";n.innerHTML=f.toChangePress}}}else n.innerHTML="",this._lastAllowedParentList=null;if(g){for(var y,d=0;d<this._XYParent.length;d++)if(this._XYParent[d]===this._proposedParentWidget){y=d;break}void 0!==
y&&(!this._cursorSpan&&(this._cursorSpan=dojo.create("span",{className:"editCursor"}),g=a.getGlobal())&&(this._timer=g.setInterval(function(a,b){var c=m.currentEditor;(c.getContext&&c.getContext())!==b?this.cleanup():dojo.toggleClass(a,"editCursorBlink")}.bind(this),400,this._cursorSpan,a)),g=this._XYParent[y].domNode,c=(c=this._XYRefChild[y])?c.domNode:null,y=this._XYRefAfter[y],c?(y?c.nextSibling&&c.nextSibling._dvWidget?(a=e.getBorderBoxPageCoordsCached(c.nextSibling),y=a.l):(a=e.getBorderBoxPageCoordsCached(c),
y=a.l+a.w):(a=e.getBorderBoxPageCoordsCached(c),y=a.l),c=a.t,a=a.h):(a=e.getBorderBoxPageCoordsCached(g),y=a.l,c=a.t,a=16),n=this._cursorSpan.style,n.height=a+"px",n.left=y+"px",n.top=c+"px",g.ownerDocument.body.appendChild(this._cursorSpan))}},_getDefaultParent:function(c,a,e,f){var d;a&&(c=h.getWidgetHelper(c),d=1<a.length&&c&&c.chooseParent?c.chooseParent(a):0===a.length?null:e&&f?f:a[a.length-1]);return d},cleanup:function(){this._cursorSpan&&(this._cursorSpan.parentNode.removeChild(this._cursorSpan),
this._cursorSpan=null);if(this._timer){var c=this._context.getGlobal();c&&(c.clearInterval(this._timer),this._timer=null)}this.highlightNewWidgetParent(null);this._lastAllowedParentList=null},highlightNewWidgetParent:function(c){c!=this.newWidgetParent&&(this.newWidgetParent&&(this.newWidgetParent.domNode.style.outline=""),(this.newWidgetParent=c)&&c.domNode&&(c.domNode.style.outline="1px solid rgba(165,42,42,.7)"))},getProposedParentWidget:function(){var c=null;if(this._XYParent){var a=this._XYParent.indexOf(this._proposedParentWidget);
0<=a&&(c={},c.parent=this._XYParent[a],c.refChild=this._XYRefChild[a],c.refAfter=this._XYRefAfter[a])}return c},setProposedParentWidget:function(c){this._proposedParentWidget=c},getProposedParentsList:function(){return this._XYParent},findParentsXYBeforeTraversal:function(c){c=c.position;this._XYParent=[];this._XYRefChild=[];this._XYRefAfter=[];"undefined"==typeof this.findParentsXYLastPosition&&(this.findParentsXYLastPosition={});var a=this.findParentsXYLastPosition;if(c.x===a.x&&c.y===a.y)return!1;
a.x=c.x;a.y=c.y;return!0},findParentsXY:function(c){var a=c.data,f=c.widget,g=c.absolute,d=c.position;c=c.beforeAfter;this._context.getScrollOffset();var b=d.x,d=d.y,h=f.getHelper(),m=null,m=h&&h.getMarginBoxPageCoords?h.getMarginBoxPageCoords(f):e.getMarginBoxPageCoordsCached(f.domNode),p=m.l,z=m.t,h=m.w,y=m.h,w;if(b>=p&&b<=p+h&&d>=z&&d<=z+y&&1===this.getAllowedTargetWidget(f,a,!1,{absolute:g}).length)if(!0===g)this._XYParent.push(f),this._XYRefChild.push(null),this._XYRefAfter.push(!0);else{g=f.getChildren();
m=[];for(a=0;a<g.length;a++)h=g[a],p=h.domNode,z=e.getBorderBoxPageCoordsCached(p),h=p.offsetWidth,y=p.offsetHeight,p=z.l,z=z.t,w=p+h,y=z+y,m.push({l:p,t:z,r:w,b:y,c:p+h/2});for(var B,u,x,a=0;a<m.length;a++){p=m[a];h=g[a];if(b>=p.l&&b<=p.r&&d>=p.t&&d<=p.b){B=h;u=b>=p.c?!0:!1;break}0===a?(B=h,u=d>p.b||b>=p.c?!0:!1,x=p.b):(d>=p.t||d>=x)&&b>=p.l?(B=h,u=d>p.b||b>=p.c?!0:!1):d>=x&&d>=p.b&&(B=h,u=!0);p.b>x&&(x=p.b)}this._XYParent.push(f);this._XYRefChild.push(B);this._XYRefAfter.push("after"===c?!0:"before"===
c?!1:u)}},findParentsXYAfterTraversal:function(c){var a=c.widgets,e=c.currentParent,f=c.eventTarget.ownerDocument.body._dvWidget;if(c.absolute&&e&&e!=f){var d=!1;this._XYParent.forEach(function(a){a==e&&(d=!0)});d||(this._XYParent.push(e),this._XYRefChild.push(a[0]),this._XYRefAfter.push(!0))}this.findParentsXYLastPosition={};for(c=0;c<this._XYRefAfter.length-1;c++)this._XYRefAfter[c]=!0},findParentsXYCleanup:function(c){this.findParentsXYLastPosition={}},parentListDivCreate:function(c){var a=c.widgetType,
e=c.absolute,f=c.doCursor,d=c.beforeAfter,b=c.currentParent;c=this._context;if(a){var g=c.getDocument();this._oldActiveElement=document.activeElement;g.defaultView.focus();this._keyDownHandler=dojo.connect(g,"onkeydown",dojo.hitch(this,function(a,b){this.onKeyDown(b,a[0],a[1],a[2],a[3],a[4])},[a,e,f,d,b]));this._keyUpHandler=dojo.connect(g,"onkeyup",dojo.hitch(this,function(a,b){this.onKeyUp(b,a[0],a[1],a[2],a[3],a[4])},[a,e,f,d,b]));a=this._parentListDiv=dojo.create("div",{className:"maqParentListDiv"},
document.body);c.setActiveDragDiv(a);dojo.create("div",{className:"maqCandidateParents"},a);return a}},parentListDivGet:function(){return this._parentListDiv},parentListDivDelete:function(){var c=this._context,a=this._parentListDiv;a&&(this._oldActiveElement&&(this._oldActiveElement.focus(),this._oldActiveElement=null),dojo.disconnect(this._keyDownHandler),dojo.disconnect(this._keyUpHandler),this._keyDownHandler=this._keyUpHandler=null,a.parentNode.removeChild(a),c.setActiveDragDiv(null),this._parentListDiv=
null)},_keyEventDoUpdate:function(c,a,e,f,d){var b=this._context.getPreference("showPossibleParents");this.dragUpdateCandidateParents({widgetType:c,showCandidateParents:!b&&this._spaceKeyDown||b&&!this._spaceKeyDown,doCursor:e,beforeAfter:f,absolute:a,currentParent:d})},onKeyDown:function(c,a,e,f,d,b){dojo.stopEvent(c);c.keyCode==dojo.keys.SPACE?this._spaceKeyDown=!0:this._processKeyDown(c.keyCode);this._keyEventDoUpdate(a,e,f,d,b)},onKeyUp:function(c,a,e,f,d,b){dojo.stopEvent(c);c.keyCode==dojo.keys.SPACE&&
(this._spaceKeyDown=!1);this._keyEventDoUpdate(a,e,f,d,b)},_processKeyDown:function(c){if(49<=c&&57>=c){var a=this.getProposedParentsList();1<a.length&&(c=a.length-(c-48),0<=c&&this.setProposedParentWidget(a[c]))}},isSpaceKeyDown:function(){return this._spaceKeyDown}})})},"davinci/ve/Focus":function(){define("dojo/_base/declare dijit/_WidgetBase dojo/dnd/Mover ../Runtime ./metadata ./States ./utils/GeomUtils".split(" "),function(p,m,h,g,f,e,c){return p(m,{nobSize:11,frameSize:6,postCreate:function(){dojo.addClass(this.domNode,
"maqFocus");dojo.style(this.domNode,{position:"absolute",display:"none"});this._stdChrome=dojo.create("div",{"class":"editFocusStdChrome"},this.domNode);this._frames=[];for(var a=0;4>a;a++){var c=dojo.create("div",{"class":"editFocusFrame"},this._stdChrome);this._frames.push(c);this.connect(c,"onmousedown","onMouseDown")}dojo.addClass(this._frames[0],"editFocusFrameLEFT");dojo.addClass(this._frames[1],"editFocusFrameRIGHT");dojo.addClass(this._frames[2],"editFocusFrameTOP");dojo.addClass(this._frames[3],
"editFocusFrameBOTTOM");this._nobs=[];for(a=0;8>a;a++)c=dojo.create("div",{"class":"editFocusNob"},this._stdChrome),this._nobs.push(c),this.connect(c,"onmousedown","onMouseDown");this._frameIndex=this._nobIndex=-1;this._custom=dojo.create("div",{"class":"editFocusCustom"},this.domNode);window.fframe=this},resize:function(a,c){c&&(this._selectedWidget=c);this._moverCurrent=dojo.mixin({},a);this._moverCurrentConstrained=dojo.mixin({},this._moverCurrent);this._updateFocusChrome(this._moverCurrent,!0);
this._contexDiv&&(this._contexDiv.style.left=a.w+10+"px",this._updateSubwidgetList());this._box=a},getBounds:function(){return this._moverCurrent},show:function(a,c){c=c&&c.inline;if(a){this._custom.innerHTML="";var e=f.queryDescriptor(a.type,"showStandardSelectionChrome");this._stdChrome.style.display=!1===e?"none":"block";this.domNode.style.display="block";this._selectedWidget=a;var e=a.getHelper(),d=!0;if(e&&e.onShowSelection)e.onShowSelection({widget:a,customDiv:this._custom});c&&(this.showInline(a),
d=!1);d&&delete this._inline}},showInline:function(a){this._selectedWidget=a;var c=this._context,e=this;f.getSmartInput(a.type).then(function(d){if(d)if(e._inline=d,d.useParent){if(d=a.getParent())c.deselect(a),c.select(d),c.getFocus(d).showInline(d)}else d.show&&d.show(a.id)})},inlineEditActive:function(){return this._inline&&this._inline.inlineEditActive?this._inline.inlineEditActive():!1},hide:function(a){var c=(a=this._selectedWidget)?a.getHelper():void 0;if(c&&c.onHideSelection)c.onHideSelection({widget:a,
customDiv:this._custom});this.domNode.style.display="none";this._displayedWidget=this._selectedWidget=null;this._inline&&(this._inline.hide(),delete this._inline)},allow:function(a){if(a){this._op=a;var c={},e=this._selectedWidget.getHelper();e&&e.resizeAllowWhich?(e.resizeAllowWhich(this._selectedWidget,c),this._resizeLeft=c.resizeLeft,this._resizeRight=c.resizeRight,this._resizeTop=c.resizeTop,this._resizeBottom=c.resizeBottom):(this._resizeLeft=this._resizeRight=a.resizeWidth,this._resizeTop=this._resizeBottom=
a.resizeHeight);c.left=!this._resizeLeft||this._resizeTop||this._resizeBottom?"none":"block";c.right=!this._resizeRight||this._resizeTop||this._resizeBottom?"none":"block";c.top=!this._resizeTop||this._resizeLeft||this._resizeRight?"none":"block";c.bottom=!this._resizeBottom||this._resizeLeft||this._resizeRight?"none":"block";c.left_top=this._resizeLeft&&this._resizeTop?"block":"none";c.left_bottom=this._resizeLeft&&this._resizeBottom?"block":"none";c.right_top=this._resizeRight&&this._resizeTop?
"block":"none";c.right_bottom=this._resizeRight&&this._resizeBottom?"block":"none";this._nobs[0].style.display=c.left;this._nobs[1].style.display=c.right;this._nobs[2].style.display=c.top;this._nobs[3].style.display=c.bottom;this._nobs[4].style.display=c.left_top;this._nobs[5].style.display=c.left_bottom;this._nobs[6].style.display=c.right_top;this._nobs[7].style.display=c.right_bottom;this._nobs[0].style.cursor=this._frames[0].style.cursor=this._resizeLeft?"w-resize":"auto";this._nobs[1].style.cursor=
this._frames[1].style.cursor=this._resizeRight?"e-resize":"auto";this._nobs[2].style.cursor=this._frames[2].style.cursor=this._resizeTop?"n-resize":"auto";this._nobs[3].style.cursor=this._frames[3].style.cursor=this._resizeBottom?"s-resize":"auto";this._nobs[4].style.cursor="none"!=c.left_top?"nw-resize":"auto";this._nobs[5].style.cursor="none"!=c.left_bottom?"sw-resize":"auto";this._nobs[6].style.cursor="none"!=c.right_top?"ne-resize":"auto";this._nobs[7].style.cursor="none"!=c.right_bottom?"se-resize":
"auto"}},_updateFocusChrome:function(a,e){"moverLeft"in a&&(this._context.isResizing=!0);if(e=dojo.byId("focusContainer")){e=c.getBorderBoxPageCoords(e);var f=this._context.getParentIframe(),d=c.getBorderBoxPageCoords(f);a.l+=d.l;a.t+=d.t;if(f)if(f.contentDocument)if(f.contentDocument.body){f=f.contentDocument.body;a.l-=c.getScrollLeft(f);a.t-=c.getScrollTop(f);this.domNode.style.left=a.l-e.l+"px";this.domNode.style.top=a.t-e.t+"px";e=a.w;var f=a.h,b=a.w,d=a.h,g=a.w,h=a.h,m=a.w+4+4;a=a.h+4+4;this._frames[0].style.left=
this._frames[2].style.left=this._frames[3].style.left="-6px";this._frames[0].style.top=this._frames[2].style.top=this._frames[1].style.top="-6px";this._frames[0].style.height=a+"px";this._frames[1].style.height=a+"px";this._frames[1].style.left=g+"px";this._frames[2].style.width=m+"px";this._frames[3].style.top=h+"px";this._frames[3].style.width=m+"px";a=Math.round(b/2-this.nobSize/2);d=Math.round(d/2-this.nobSize/2);this._nobs[0].style.left=this._nobs[4].style.left=this._nobs[5].style.left="-11px";
this._nobs[2].style.top=this._nobs[4].style.top=this._nobs[6].style.top="-11px";this._nobs[0].style.top=d+"px";this._nobs[1].style.left=e+"px";this._nobs[1].style.top=d+"px";this._nobs[2].style.left=a+"px";this._nobs[3].style.left=a+"px";this._nobs[3].style.top=f+"px";this._nobs[5].style.top=f+"px";this._nobs[6].style.left=e+"px";this._nobs[7].style.left=e+"px";this._nobs[7].style.top=f+"px"}else console.error("have no body");else console.error("have no contentDocument");else console.error("have no parent iframe")}},
onMouseDown:function(a){this._removeKeyHandlers();if(this._selectedWidget&&this._selectedWidget.domNode&&2!==a.button&&!a.ctrlKey&&"davinci.ve.tools.SelectTool"==this._context._activeTool.declaredClass){this._shiftKey=a.shiftKey;this._sKey=!1;this._nobIndex=dojo.indexOf(this._nobs,a.target);this._frameIndex=dojo.indexOf(this._frames,a.target);var e=a.pageX-400,f=a.pageY-400,d=null,b=this._selectedWidget.getHelper(),d=b&&b.getMarginBoxPageCoords?b.getMarginBoxPageCoords(this._selectedWidget):c.getMarginBoxPageCoords(this._selectedWidget.domNode),
b=c.getBorderBoxPageCoords(this._context.getParentIframe());this._moverStart={moverLeft:e,moverTop:f,l:d.l+b.l,t:d.t+b.t,w:d.w,h:d.h};d=document.body;this._moverCurrent=dojo.mixin({},this._moverStart);this._moverDragDiv=dojo.create("div",{className:"focusDragDiv",style:"position:absolute;left:"+e+"px;top:"+f+"px;width:800px;height:800px"},d);this._mover=new h(this._moverDragDiv,a,this);dojo.stopEvent(a);this._mouseDownInfo={widget:this._selectedWidget,pageX:a.pageX+b.l,pageY:a.pageY+b.t,dateValue:Date.now()};
this._moverMouseDownEvent=a;this._moverMouseUpEvent=null;this._moverMouseUpHandler=dojo.connect(this._moverDragDiv,"onmouseup",dojo.hitch(this,function(a){this.onMouseUp(a)}));a=this._context.getDocument();(e=document.getElementById("maqetta_project_select"))&&e.focus();a.defaultView.focus();this._keyDownHandler=dojo.connect(a,"onkeydown",dojo.hitch(this,function(a){this.onKeyDown(a)}));this._keyUpHandler=dojo.connect(a,"onkeyup",dojo.hitch(this,function(a){this.onKeyUp(a)}))}},onMove:function(a,
e,f){this._mouseDownInfo=null;this._moverDragDiv&&(this._moverDragDiv.style.left=e.l+"px",this._moverDragDiv.style.top=e.t+"px");if(!(0===this._frameIndex&&!this._resizeLeft||1===this._frameIndex&&!this._resizeRight||2===this._frameIndex&&!this._resizeTop||3===this._frameIndex&&!this._resizeBottom)){a=this._moverStart;f=e.l-a.moverLeft;e=e.t-a.moverTop;if(0===this._frameIndex||4===this._nobIndex||0===this._nobIndex||5===this._nobIndex)this._moverCurrent.l=a.l+f,this._moverCurrent.w=a.w-f;else if(1===
this._frameIndex||6===this._nobIndex||1===this._nobIndex||7===this._nobIndex)this._moverCurrent.w=a.w+f;if(2===this._frameIndex||4===this._nobIndex||2===this._nobIndex||6===this._nobIndex)this._moverCurrent.t=a.t+e,this._moverCurrent.h=a.h-e;else if(3===this._frameIndex||5===this._nobIndex||3===this._nobIndex||7===this._nobIndex)this._moverCurrent.h=a.h+e;e=this._moverCurrent.w;a=this._moverCurrent.h;f=!1;if(this._selectedWidget&&"IMG"===this._selectedWidget.domNode.nodeName){var d=this._selectedWidget.domNode,
b=d.naturalWidth,d=d.naturalHeight;"number"==typeof d&&0<d&&"number"==typeof b&&0<b&&(f=b/d,e<f*a?e=a*f:a=e/f,f=!0)}f||(0===this._frameIndex||0===this._nobIndex||1===this._frameIndex||1===this._nobIndex?a=e:2===this._frameIndex||2===this._nobIndex||3===this._frameIndex||3===this._nobIndex?e=a:e>a?a=e:e=a);this._moverCurrentConstrained={l:this._moverCurrent.l,t:this._moverCurrent.t,w:e,h:a};if(0===this._frameIndex||0===this._nobIndex||1===this._frameIndex||1===this._nobIndex)this._moverCurrentConstrained.t-=
(this._moverCurrentConstrained.h-this._moverCurrent.h)/2;if(2===this._frameIndex||2===this._nobIndex||3===this._frameIndex||3===this._nobIndex)this._moverCurrentConstrained.l-=(this._moverCurrentConstrained.w-this._moverCurrent.w)/2;e=dojo.mixin({},this._shiftKey?this._moverCurrentConstrained:this._moverCurrent);a=c.getBorderBoxPageCoords(this._context.getParentIframe());e.l-=a.l;e.t-=a.t;this._updateFocusChrome(e,!1)}},onFirstMove:function(a){},onMoveStart:function(a){},_moverDoneCleanup:function(){var a=
this._context,c=a._chooseParent;this._lastEventTarget=null;this._removeKeyHandlers();a.dragMoveCleanup();c.parentListDivDelete();this._mover=void 0;this._frameIndex=this._nobIndex=-1;a.isResizing=!1},onMoveStop:function(a){if(this._moverDragDiv&&((a=this._moverDragDiv.parentNode)&&a.removeChild(this._moverDragDiv),this._moverDragDiv=null,this._moverCurrent.l!=this._moverStart.l||this._moverCurrent.t!=this._moverStart.t||this._moverCurrent.w!=this._moverStart.w||this._moverCurrent.h!=this._moverStart.h)){a=
void 0;if(this._selectedWidget&&this._selectedWidget.domNode)if(this._sKey)for(var f=e.getStatesListCurrent(this._selectedWidget.domNode),g=0;g<f.length;g++){if(f[g]){a=f[g];break}}else a=e.propertyDefinedForAnyCurrentState(this._selectedWidget.domNode,["width","height"]);f=this._shiftKey?this._moverCurrentConstrained:this._moverCurrent;f.w==this._moverStart.w&&delete f.w;f.h==this._moverStart.h&&delete f.h;"number"!=typeof f.l&&(f.l=this._moverStart.l);"number"!=typeof f.t&&(f.t=this._moverStart.t);
f.l==this._moverStart.l&&f.t==this._moverStart.t&&(delete f.l,delete f.t);f=dojo.mixin({},f);f.hasOwnProperty("l")&&(g=c.getBorderBoxPageCoords(this._context.getParentIframe()),f.l-=g.l,f.t-=g.t);this.onExtentChange(this,this._moverStart,f,a)}this._moverDoneCleanup();a=this._moverMouseUpEvent||this._moverMouseDownEvent;this._moverMouseUpEvent=this._moverMouseDownEvent=null;if(a&&a.target){f=Date.now();this._mouseDownInfo=null;if(this._lastMouseUp&&10>=Math.abs(a.pageX-this._lastMouseUp.pageX)&&10>=
Math.abs(a.pageY-this._lastMouseUp.pageY)&&750>=f-this._lastMouseUp.dateValue)this.onDblClick(a);this._lastMouseUp={pageX:a.pageX,pageY:a.pageY,dateValue:f};dojo.stopEvent(a)}},onMouseUp:function(a){this._moverMouseUpEvent=a},onDblClick:function(a){this.showInline(this._selectedWidget);a.stopPropagation()},onKeyDown:function(a){a&&this._moverDragDiv?(dojo.stopEvent(a),a.keyCode==dojo.keys.SHIFT?(this._shiftKey=!0,this._updateFocusChrome(this._shiftKey?this._moverCurrentConstrained:this._moverCurrent,
!1)):83==a.keyCode&&(this._sKey=!0)):this._removeKeyHandlers()},onKeyUp:function(a){a&&this._moverDragDiv?(dojo.stopEvent(a),a.keyCode==dojo.keys.SHIFT?(this._shiftKey=!1,this._updateFocusChrome(this._shiftKey?this._moverCurrentConstrained:this._moverCurrent,!1)):83==a.keyCode&&(this._sKey=!1)):this._removeKeyHandlers()},_removeKeyHandlers:function(){this._keyDownHandler&&(dojo.disconnect(this._keyDownHandler),this._keyDownHandler=null);this._keyUpHandler&&(dojo.disconnect(this._keyUpHandler),this._keyUpHandler=
null)},onExtentChange:function(a,c,e,d){},isFocusNode:function(a){return dojo.hasClass(a,"focusDragDiv")||dojo.hasClass(a,"editFocusNob")||dojo.hasClass(a,"editFocusFrame")||dojo.hasClass(a,"maqFocus")||dojo.hasClass(a,"editFocusStdChrome")},showContext:function(a,c){"davinci.ve.themeEditor.ThemeEditor"==this._context.editor.declaredClass&&(this._contexDiv||(this._context=a,this._createContextPopUp()),this._contexDiv.style.display="block")},hideContext:function(){"davinci.ve.themeEditor.ThemeEditor"==
this._context.editor.declaredClass&&this._contexDiv&&(this._contexDiv.style.display="none")},_createContextPopUp:function(){var a=dojo.doc.createElement("div");a.id="ieb";this._contexDiv=a;this.domNode.appendChild(a)},_createSubwidgetList:function(){var a=this._context._selectedWidget;if(a){var c=this._context.getThemeMeta().metadata,e=c.getWidgetType(a),c=(c=c.getMetadata(e))?c.subwidgets:null;this._displayedWidget=a;if(c){e=this._contexDiv;e.innerHTML="\x3cspan\x3e\x3c/span\x3e";e.style.position=
"absolute";e.style.left=this._box.w+10+"px";e.className="themeSubwidgetMenu";dojo.connect(e,"onmousedown",this,"stopPropagation");e.style.display="none";this._contexDiv=e;this.domNode.appendChild(e);var d=this._contexDiv.firstElementChild,b=this._context.theme.name+"_subwidgetmenu";(e=dijit.byId(b))&&e.destroyRecursive(!1);var f=this._context.getDijit(),e=new f.Menu({id:b},d),d=!1;a.subwidget||(d=!0);d=new f.CheckedMenuItem({label:"WidgetOuterContainer",id:this._context.theme.name+"_WidgetOuterContainer",
checked:d,onClick:dojo.hitch(this,"_subwidgetSelected",this._context.theme.name+"_WidgetOuterContainer")});d.domNode.children[0].children[0].setAttribute("src",d.domNode.children[0].children[0].src);e.addChild(d);this._currentItem=d;for(var g in c)d=a.subwidget===g,c=new f.CheckedMenuItem({label:g,id:this._context.theme.name+"_"+g,checked:d,onClick:dojo.hitch(this,"_subwidgetSelected",this._context.theme.name+"_"+g)}),c.domNode.children[0].children[0].setAttribute("src",c.domNode.children[0].children[0].src),
e.addChild(c),d&&(this._currentItem=c);e.startup();this._cm=e;this._updateSubwidgetListForState();this._connections=[];this._connections.push(dojo.subscribe("/davinci/ui/subwidgetSelectionChanged",dojo.hitch(this,this._subwidgetSelectedChange)));this._connections.push(dojo.subscribe("/davinci/states/state/changed",dojo.hitch(this,this._updateSubwidgetListForState)))}else this._contexDiv.innerHTML=""}},stopPropagation:function(a){a.stopPropagation()},_subwidgetSelected:function(a,c){c.stopPropagation();
var e=this._context.getDijit();a=e.byId(a);a.checked?(this._currentItem&&a!=this._currentItem&&this._currentItem.set("checked",!1),this._currentItem=a,e=this._currentItem.label):((this._currentItem=e.byId(this._context.theme.name+"_WidgetOuterContainer"))&&this._currentItem.set("checked",!0),e=null);c.currentTarget.id===this._context.theme.name+"_WidgetOuterContainer"&&(e=null);dojo.publish("/davinci/ui/subwidgetSelectionChanged",[{subwidget:e,origin:this.declaredClass}])},_subwidgetSelectedChange:function(a){var c=
this._context.getDijit();a.origin!==this.declaredClass&&(this._currentItem&&this._currentItem.set("checked",!1),(this._currentItem=a.subwidget?c.byId(this._context.theme.name+"_"+a.subwidget):c.byId(this._context.theme.name+"_WidgetOuterContainer"))&&this._currentItem.set("checked",!0))},_updateSubwidgetListForState:function(){if(this._context.editor==g.currentEditor)if(this._context._selectedWidget&&this._displayedWidget===this._context._selectedWidget&&this._cm){var a=g.currentEditor,c=a._theme;
this._cm.getChildren().forEach(function(e){var d=e.label;"WidgetOuterContainer"===d&&(d=null);e.setDisabled(!c.isStateValid(this._displayedWidget,a._currentState,d))},this)}else this._clearList(),this._createSubwidgetList()},_updateSubwidgetList:function(){this._displayedWidget!==this._context._selectedWidget&&(this._clearList(),this._createSubwidgetList())},_clearList:function(){if(this._cm)for(this._cm.destroyRecursive(!1),delete this._cm;connection=this._connections.pop();)dojo.unsubscribe(connection);
this._currentItem=null},dojoStyle:function(a,c,e){if(a&&a.ownerDocument&&a.ownerDocument.defaultView&&a.ownerDocument.defaultView.getComputedStyle(a))return dojo.style.apply(dojo,arguments)}})})},"url:davinci/workbench/templates/Preferences.html":"\x3cdiv style\x3d'width:100%; height: 100%'\x3e\n\t\x3cdiv class\x3d\"dijitDialogPaneContentArea\"\x3e\n\t\t\x3cdiv dojoType\x3d'dijit.layout.BorderContainer' dojoAttachPoint\x3d\"borderContainer\" style\x3d'width:100%; height: 100%' gutters\x3d'false' liveSplitters\x3d'true' id\x3d'preferencesContainer'\x3e\n\t\t\t\x3cdiv dojoType\x3d'dijit.layout.ContentPane' id\x3d'pref.TreePane' splitter\x3d'true' region\x3d'leading' style\x3d'width: 200px;' minSize\x3d'100' maxSize\x3d'300'\x3e\x3c/div\x3e\n\t\t\t\x3cdiv dojoType\x3d'dijit.layout.ContentPane' region\x3d'center' id\x3d'pref.RightPane'\x3e\x3c/div\x3e\n\t\t\x3c/div\x3e\n\t\x3c/div\x3e\n\t\x3cdiv class\x3d\"dijitDialogPaneActionBar\"\x3e\n\t\t\x3c!-- FIXME: we don't have logic to yet implement restoreDefaults() yet. See #627\n\t\t\x3cbutton dojoType\x3ddijit.form.Button type\x3d\"button\" onclick\x3d\"davinci.workbench.Preferences.restoreDefaults();\"\x3e\x3c/button\x3e--\x3e\n\t\t\x3cbutton dojoType\x3d\"dijit.form.Button\" type\x3d\"button\" onclick\x3d\"davinci.workbench.Preferences.save();\" class\x3d\"maqPrimaryButton\" type\x3d\"submit\"\x3e${commonStrings.buttonSave}\x3c/button\x3e\n\t\t\x3cbutton dojoType\x3d\"dijit.form.Button\" type\x3d\"button\" onclick\x3d\"davinci.workbench.Preferences.finish();\" class\x3d\"maqSecondaryButton\"\x3e${commonStrings.buttonCancel}\x3c/button\x3e\n\t\x3c/div\x3e\n\x3c/div\x3e\n\n\n",
"url:davinci/ve/widgets/templates/BackgroundDialog.html":"\x3cdiv class\x3d\"backgroundDialog\" style\x3d\"position:relative\" dojoAttachPoint\x3d\"_fileDialog\"\x3e\n\t\x3cstyle type\x3d\"text/css\"\x3e\n\t\t.backgroundDialog {\n\t\t\twidth:31em;\n\t\t}\n\t\t.bgdTopDiv {\n\t\t\tmargin-top: 4px;\n\t\t\tpadding-left: .75em;\n\t\t}\n\t\t.bgdTopTable {\n\t\t\twidth:100%;\n\t\t\tborder-collapse:collapse;\n\t\t}\n\t\t.bgdTopLabel, .bgdTopField, .bgdTopPreview {\n\t\t\twidth:1px;\n\t\t\twhite-space:nowrap;\n\t\t}\n\t\t.bgdTopLabel {\n\t\t\ttext-align:right;\n\t\t\tpadding-right:6px;\n\t\t}\n\t\t.bgdTopTable .dijitSelect .dijitButtonContents {\n\t\t\twidth:8em;\n\t\t}\n\t\t.bgdTopTable .dijitTextBox {\n\t\t\twidth: 9.8em;\n\t\t}\n\t\t.bgdPreview {\n\t\t\tdisplay:inline-block;\n\t\t\twidth: 6em;\n\t\t\theight: 2.8em;\n\t\t\tmargin-left:12px;\n\t\t\tborder:1px solid gray;\n\t\t\tvertical-align: middle;\n\t\t}\n\t\t.bgdOptionsDiv {\n\t\t\tmargin:0.3em 0em 1em 1em;\n\t\t}\n\t\t.bgdOptionsDiv \x3e table {\n\t\t\twidth:27em;\n\t\t}\n\t\t.bgdSection {\n\t\t\tbackground-color:#d8d8d8;\n\t\t}\n\t\tdiv.bgdSection, .bgdSection td, .bgdSection.bgdUrlSectionLabel {\n\t\t\tpadding:2px 5px;\n\t\t}\n\t\t.bgdBeforeStopsLabel {\n\t\t\theight:6px;\n\t\t}\n\t\t.bgdStopsLabel {\n\t\t\tmargin-top:1em;\n\t\t}\n\t\t.bgdAfterStopsLabel {\n\t\t\theight:0px;\n\t\t}\n\t\t.bgdBeforeOptionsLabel {\n\t\t\theight:16px;\n\t\t}\n\t\t.bgdOptionsLabel {\n\t\t\tmargin-top:1em;\n\t\t}\n\t\t.bgdAfterOptionsLabel {\n\t\t\theight:4px;\n\t\t}\n\t\t.bgdCol1 {\n\t\t\twidth:10px;\n\t\t}\n\t\t.bgdPlusMinusButtons {\n\t\t\twhite-space:nowrap;\n\t\t\twidth:51px;\n\t\t}\n\t\t.bgdOptionsDiv th {\n\t\t\ttext-align:center;\n\t\t\tfont-style:italic;\n\t\t}\n\t\t.bgdOptsLabel {\n\t\t\ttext-align:right;\n\t\t\tpadding-right: 6px;\n\t\t\twhite-space:nowrap;\n\t\t}\n\t\t.bgdColor.dijitTextBox {\n\t\t\twidth:9em;\n\t\t}\n\t\t.bgdOptionsDiv .bgdPosition.dijitTextBox {\n\t\t\twidth:5em;\n\t\t}\n\t\t.bgdOptionsDiv .dijitTextBox {\n\t\t\twidth:10.6em;\n\t\t}\n\t\t.bgdStopColorTD .dijitTextBox {\n\t\t\twidth:14em;\n\t\t}\n\t\t.bgdOptionsDiv .dijitSelect {\n\t\t\tmargin:0;\n\t\t}\n\t\t.bgdOptionsDiv .dijitSelect .dijitButtonContents {\n\t\t\twidth:9em;\n\t\t}\n\t\t.bgdUrlContainerOuter {\n\t\t\tmargin-top:1em;\n\t\t\tmargin-left:1em;\n\t\t}\n\t\t.bgdUrlContainerInner {\n\t\t\tmargin:0 1em;\n\t\t}\n\t\t.bgdUrlSectionLabel {\n\t\t\tmargin:1em 0 .25em;\n\t\t}\n\t\t.bgdFileTreeContainer {\n\t\t\tmargin: 0 0 0 3px;\n\t\t\tborder: 1px solid #26A;\n\t\t}\n\t\t.bgdFileTreeContainer .dijitTree {\n\t\t\theight:125px;\n\t\t}\t\t\n\t\t.backgroundDialog .fileNameRow  {\n\t\t\tmargin:8px 0 .4em;\n\t\t}\n\t\t.backgroundDialog .fileNameRow label {\n\t\t\tvertical-align:middle;\n\t\t\tmargin-right:4px;\n\t\t}\n\t\t.backgroundDialog .fileNameRow .dijitTextBox {\n\t\t\twidth:16em;\n\t\t}\n\t\t.bgdOptionsDiv .bgdOtherRow .dijitTextBox {\n\t\t\twidth:15em;\n\t\t}\n\t\t\n\t\x3c/style\x3e\n\n\t\x3cdiv class\x3d\"dijitDialogPaneContentArea\"\x3e\n\t\t\x3cdiv class\x3d'bgdTopDiv'\x3e\n\t\t\t\x3ctable class\x3d'bgdTopTable'\x3e\n\t\t\t\t\x3ctr\x3e\n\t\t\t\t\t\x3ctd class\x3d'bgdTopLabel'\x3e\x3clabel class\x3d'bgdTypeDivTypeLabel'\x3e${veNLS.bgdBackgroundColor}\x3c/label\x3e\x3c/td\x3e\n\t\t\t\t\t\x3ctd class\x3d'bgdTopField'\x3e\n\t\t\t\t\t\t\x3cselect dojoType\x3d\"dijit.form.ComboBox\" dojoAttachPoint\x3d'bgdColorCB'\x3e\n\t\t\t\t\t\t\t\x3c!--  values added dynamically --\x3e\n\t\t\t\t\t\t\x3c/select\x3e\n\t\t\t\t\t\x3c/td\x3e\n\t\t\t\t\t\x3ctd rowspan\x3d'2' class\x3d'bgdTopPreview' style\x3d'border-collapse:collapse'\x3e\x3cspan class\x3d'bgdPreview'\x3e\x3c/span\x3e\x3c/td\x3e\n\t\t\t\t\t\x3ctd class\x3d'bgdTopExpando'\x3e\x26nbsp;\x3c/td\x3e\n\t\t\t\t\x3c/tr\x3e\n\t\t\t\t\x3ctr\x3e\n\t\t\t\t\t\x3ctd class\x3d'bgdTopLabel'\x3e\x3clabel class\x3d'bgdTypeDivTypeLabel'\x3e${veNLS.bgdBackgroundImageType}\x3c/label\x3e\x3c/td\x3e\n\t\t\t\t\t\x3ctd class\x3d'bgdTopField'\x3e\n\t\t\t\t\t\t\x3cselect dojoType\x3d'dijit.form.Select' value\x3d'linear' dojoAttachPoint\x3d'bgdTypeSelect'\x3e\n\t\t\t\t\t\t\t\x3c!--  values added dynamically --\x3e\n\t\x3c!-- FIXME: Add plain text type-in box if unrecognized syntax --\x3e\n\t\t\t\t\t\t\x3c/select\x3e\n\t\t\t\t\t\x3c/td\x3e\n\t\t\t\t\t\x3ctd class\x3d'bgdTopExpando'\x3e\x26nbsp;\x3c/td\x3e\n\t\t\t\t\x3c/tr\x3e\n\t\t\t\x3c/table\x3e\n\t\t\x3c/div\x3e\n\t\t\n\t\t\x3cdiv class\x3d\"bgdUrlContainerOuter bgdImageOptRow\"\x3e\n\t\t\t\x3cdiv class\x3d\"bgdSection bgdOptionsLabel\"\x3e${veNLS.bgdImageUrl}\x3c/div\x3e\n\t\t\t\x3cdiv class\x3d\"bgdUrlContainerInner\"\x3e\n\t\t\t\t\x3cdiv class\x3d'fileNameRow'\x3e\n\t\t\t\t\t\x3ctd class\x3d\"fileDialogLabelCell\"\x3e\n\t\t\t\t\t\x3clabel\x3e${veNLS.bgdUrl}\x3c/label\x3e\n\t\t\t\t\t\x3c/td\x3e\n\t\t\t\t\t\x3ctd\x3e\n\t\t\t\t\t\x3cdiv dojoType\x3d'davinci.ui.widgets.FileFieldDialog' dojoAttachPoint\x3d\"_filePicker\"\x3e\x3c/div\x3e\n\t\t\t\t\t\x3c/td\x3e\n\t\t\t\t\x3c/div\x3e\n\t\t\t\x3c/div\x3e\n\t\t\x3c/div\x3e\n\t\t\x3cdiv class\x3d\"bgdOptionsDiv\"\x3e\n\t\t\t\x3ctable\x3e\n\t\t\t\t\x3ctr class\x3d\"bgdGradOptRow bgdBeforeStopsLabel\"\x3e\x3c/tr\x3e\n\t\t\t\t\x3ctr class\x3d\"bgdGradOptRow bgdSection bgdStopsLabel\"\x3e\n\t\t\t\t\t\x3ctd colspan\x3d\"5\"\x3e${veNLS.bgdColorStops}\x3c/td\x3e\n\t\t\t\t\x3c/tr\x3e\n\t\t\t\t\x3ctr class\x3d\"bgdGradOptRow bgdAfterStopsLabel\"\x3e\x3c/tr\x3e\n\t\t\t\t\x3ctr class\x3d'bgdGradOptRow bgdStopRow'\x3e\n\t\t\t\t\t\x3cth\x3e\x3c/th\x3e\x3cth\x3e\x3c/th\x3e\x3cth\x3e${veNLS.bgdColor}\x3c/th\x3e\x3cth\x3e${veNLS.bgdPosition}\x3c/th\x3e\x3cth\x3e\x3c/th\x3e\n\t\t\t\t\x3c/tr\x3e\n\t\t\t\t\x3c!--  gradient stop rows added dynamically --\x3e\n\t\t\t\t\x3ctr class\x3d\"bgdBeforeOptionsLabel bgdOptionsLabelRow\"\x3e\x3c/tr\x3e\n\t\t\t\t\x3ctr class\x3d\"bgdSection bgdOptionsLabel bgdOptionsLabelRow\"\x3e\n\t\t\t\t\t\x3ctd colspan\x3d\"5\"\x3e${veNLS.bgdOptions}\x3c/td\x3e\n\t\t\t\t\x3c/tr\x3e\n\t\t\t\t\x3ctr class\x3d\"bgdAfterOptionsLabel bgdOptionsLabelRow\"\x3e\x3c/tr\x3e\n\t\t\t\t\x3ctr class\x3d\"bgdGradOptRow bgdLinearOptRow\"\x3e\t\n\t\t\t\t\t\x3ctd class\x3d'bgdCol1'\x3e\x3c/td\x3e\n\t\t\t\t\t\x3ctd class\x3d'bgdOptsLabel'\x3e\x3clabel\x3e${veNLS.bgdAngle}\x3c/label\x3e\x3c/td\x3e\n\t\t\t\t\t\x3ctd colspan\x3d'3'\x3e\n\t\t\t\t\t\t\x3cselect dojoType\x3d\"dijit.form.ComboBox\" dojoAttachPoint\x3d'bgdLinearAngleCB'\x3e\n\t\t\t\t\t\t\t\x3c!--  values added dynamically --\x3e\n\t\t\t\t\t\t\x3c/select\x3e\n\t\t\t\t\t\x3c/td\x3e\n\t\t\t\t\x3c/tr\x3e\n\t\t\t\t\x3ctr class\x3d\"bgdGradOptRow bgdRadialOptRow\"\x3e\t\n\t\t\t\t\t\x3ctd class\x3d'bgdCol1'\x3e\x3c/td\x3e\n\t\t\t\t\t\x3ctd class\x3d'bgdOptsLabel'\x3e${veNLS.bgdPosition2}\x3c/td\x3e\n\t\t\t\t\t\x3ctd colspan\x3d'3'\x3e\n\t\t\t\t\t\t\x3cselect dojoType\x3d\"dijit.form.ComboBox\" dojoAttachPoint\x3d'bgdRadialPosCB'\x3e\n\t\t\t\t\t\t\t\x3c!--  values added dynamically --\x3e\n\t\t\t\t\t\t\x3c/select\x3e\n\t\t\t\t\t\x3c/td\x3e\n\t\t\t\t\x3c/tr\x3e\n\t\t\t\t\x3ctr dojoAttachPoint\x3d\"bgdShapeRow\" class\x3d\"bgdGradOptRow bgdRadialOptRow\"\x3e\t\n\t\t\t\t\t\x3ctd class\x3d'bgdCol1'\x3e\x3c/td\x3e\n\t\t\t\t\t\x3ctd class\x3d'bgdOptsLabel'\x3e\x3clabel\x3e${veNLS.bgdShape}\x3c/label\x3e\x3c/td\x3e\n\t\t\t\t\t\x3ctd colspan\x3d'3'\x3e\n\t\t\t\t\t\t\x3cselect dojoType\x3d\"dijit.form.ComboBox\" dojoAttachPoint\x3d'bgdRadialShapeCB'\x3e\n\t\t\t\t\t\t\t\x3c!--  values added dynamically --\x3e\n\t\t\t\t\t\t\x3c/select\x3e\n\t\t\t\t\t\x3c/td\x3e\n\t\t\t\t\x3c/tr\x3e\n\t\t\t\t\x3ctr dojoAttachPoint\x3d\"bgdExtentRow\" class\x3d\"bgdGradOptRow bgdRadialOptRow\"\x3e\t\n\t\t\t\t\t\x3ctd class\x3d'bgdCol1'\x3e\x3c/td\x3e\n\t\t\t\t\t\x3ctd class\x3d'bgdOptsLabel'\x3e\x3clabel\x3e${veNLS.bgdExtent}\x3c/label\x3e\x3c/td\x3e\n\t\t\t\t\t\x3ctd colspan\x3d'3'\x3e\n\t\t\t\t\t\t\x3cselect dojoType\x3d\"dijit.form.ComboBox\" dojoAttachPoint\x3d'bgdRadialExtentCB'\x3e\n\t\t\t\t\t\t\t\x3c!--  values added dynamically --\x3e\n\t\t\t\t\t\t\x3c/select\x3e\n\t\t\t\t\t\x3c/td\x3e\n\t\t\t\t\x3c/tr\x3e\n\t\t\t\t\x3ctr dojoAttachPoint\x3d\"bgdRepeatRow\" class\x3d\"bgdImageOptRow\"\x3e\t\n\t\t\t\t\t\x3ctd class\x3d'bgdCol1'\x3e\x3c/td\x3e\n\t\t\t\t\t\x3ctd class\x3d'bgdOptsLabel'\x3e\x3clabel\x3e${veNLS.bgdBackgroundRepeat}\x3c/label\x3e\x3c/td\x3e\n\t\t\t\t\t\x3ctd colspan\x3d'3'\x3e\n\t\t\t\t\t\t\x3cselect dojoType\x3d\"dijit.form.ComboBox\" dojoAttachPoint\x3d'bgdRepeatCB'\x3e\n\t\t\t\t\t\t\t\x3c!--  values added dynamically --\x3e\n\t\t\t\t\t\t\x3c/select\x3e\n\t\t\t\t\t\x3c/td\x3e\n\t\t\t\t\x3c/tr\x3e\n\t\t\t\t\x3ctr dojoAttachPoint\x3d\"bgdPositionRow\" class\x3d\"bgdImageOptRow\"\x3e\t\n\t\t\t\t\t\x3ctd class\x3d'bgdCol1'\x3e\x3c/td\x3e\n\t\t\t\t\t\x3ctd class\x3d'bgdOptsLabel'\x3e${veNLS.bgdBackgroundPosition}\x3c/td\x3e\n\t\t\t\t\t\x3ctd colspan\x3d'3'\x3e\n\t\x3c!-- FIXME: regExp, invalidMessage --\x3e\n\t\t\t\t\t\t\x3cselect dojoType\x3d\"dijit.form.ComboBox\" dojoAttachPoint\x3d'bgdPositionCB'\x3e\n\t\t\t\t\t\t\t\x3c!--  values added dynamically --\x3e\n\t\t\t\t\t\t\x3c/select\x3e\n\t\t\t\t\t\x3c/td\x3e\n\t\t\t\t\x3c/tr\x3e\n\t\t\t\t\x3ctr dojoAttachPoint\x3d\"bgdSizeRow\" class\x3d\"bgdImageOptRow\"\x3e\t\n\t\t\t\t\t\x3ctd class\x3d'bgdCol1'\x3e\x3c/td\x3e\n\t\t\t\t\t\x3ctd class\x3d'bgdOptsLabel'\x3e${veNLS.bgdBackgroundSize}\x3c/td\x3e\n\t\t\t\t\t\x3ctd colspan\x3d'3'\x3e\n\t\x3c!-- FIXME: regExp, invalidMessage --\x3e\n\t\t\t\t\t\t\x3cselect dojoType\x3d\"dijit.form.ComboBox\" dojoAttachPoint\x3d'bgdSizeCB'\x3e\n\t\t\t\t\t\t\t\x3c!--  values added dynamically --\x3e\n\t\t\t\t\t\t\x3c/select\x3e\n\t\t\t\t\t\x3c/td\x3e\n\t\t\t\t\x3c/tr\x3e\n\t\t\t\t\x3ctr dojoAttachPoint\x3d\"bgdOriginRow\" class\x3d\"bgdImageOptRow\"\x3e\t\n\t\t\t\t\t\x3ctd class\x3d'bgdCol1'\x3e\x3c/td\x3e\n\t\t\t\t\t\x3ctd class\x3d'bgdOptsLabel'\x3e\x3clabel\x3e${veNLS.bgdBackgroundOrigin}\x3c/label\x3e\x3c/td\x3e\n\t\t\t\t\t\x3ctd colspan\x3d'3'\x3e\n\t\t\t\t\t\t\x3cselect dojoType\x3d\"dijit.form.ComboBox\" dojoAttachPoint\x3d'bgdOriginCB'\x3e\n\t\t\t\t\t\t\t\x3c!--  values added dynamically --\x3e\n\t\t\t\t\t\t\x3c/select\x3e\n\t\t\t\t\t\x3c/td\x3e\n\t\t\t\t\x3c/tr\x3e\n\t\t\t\t\x3ctr dojoAttachPoint\x3d\"bgdClipRow\" class\x3d\"bgdImageOptRow\"\x3e\t\n\t\t\t\t\t\x3ctd class\x3d'bgdCol1'\x3e\x3c/td\x3e\n\t\t\t\t\t\x3ctd class\x3d'bgdOptsLabel'\x3e\x3clabel\x3e${veNLS.bgdBackgroundClip}\x3c/label\x3e\x3c/td\x3e\n\t\t\t\t\t\x3ctd colspan\x3d'3'\x3e\n\t\t\t\t\t\t\x3cselect dojoType\x3d\"dijit.form.ComboBox\" dojoAttachPoint\x3d'bgdClipCB'\x3e\n\t\t\t\t\t\t\t\x3c!--  values added dynamically --\x3e\n\t\t\t\t\t\t\x3c/select\x3e\n\t\t\t\t\t\x3c/td\x3e\n\t\t\t\t\x3c/tr\x3e\n\t\t\t\t\x3ctr dojoAttachPoint\x3d\"bgdOtherTypeInRow\" class\x3d\"bgdOtherRow\"\x3e\t\n\t\n\t\t\t\t\t\x3ctd class\x3d'bgdCol1'\x3e\x3c/td\x3e\n\t\t\t\t\t\x3ctd class\x3d'bgdOptsLabel'\x3e\x3clabel\x3e${veNLS.bgdBackgroundImageValue}\x3c/label\x3e\x3c/td\x3e\n\t\t\t\t\t\x3ctd colspan\x3d'3'\x3e\n\t\t\t\t\t\t\x3ctextarea dojoType\x3d\"dijit.form.Textarea\" dojoAttachPoint\x3d'bgdOtherTA'\x3e\x3c/textarea\x3e\n\t\t\t\t\t\x3c/td\x3e\n\t\n\t\t\t\t\x3c/tr\x3e\n\t\n\t\t\t\x3c/table\x3e\n\t\t\x3c/div\x3e\n\t\x3c/div\x3e\n\n\t\x3c!--div class\x3d\"dijitDialogPaneActionBar\"\x3e\n\t\t\x3cspan dojoType\x3d'dijit.form.Button' dojoAttachPoint\x3d\"_okButton\" dojoAttachEvent\x3d'onClick:okButton' label\x3d'${buttonOk}' class\x3d\"maqPrimaryButton\" type\x3d\"submit\"\x3e\x3c/span\x3e \n\t\t\x3cspan dojoType\x3d'dijit.form.Button' dojoAttachEvent\x3d'onClick:cancelButton' label\x3d'${buttonCancel}' class\x3d\"maqSecondaryButton\"/\x3e\x3c/span\x3e \n\t\x3c/div--\x3e\n\x3c/div\x3e\n",
"url:davinci/ui/widgets/templates/FileFieldDialog.html":"\x3cdiv\x3e\n\t\x3cdiv style\x3d'float:right;'\x3e\n\t\t\x3cbutton type\x3d'button' style\x3d'font-size:.75em;float:right;' dojoType\x3d\"dijit.form.Button\" dojoAttachPoint\x3d\"button\" dojoAttachEvent\x3d\"onClick:_showFileSelectionDialog\"\x3e...\x3c/button\x3e\n\t\x3c/div\x3e\n\t\x3cdiv style\x3d'margin-right:35px;'\x3e\n\t\t\x3cinput style\x3d'width:100%;' type\x3d'text' dojoType\x3d\"dijit.form.TextBox\" dojoAttachPoint\x3d\"textField\" dojoAttachEvent\x3d\"onChange:_onChange\"\x3e\x3c/input\x3e\n\t\x3c/div\x3e\n\x3c/div\x3e\n\n",
"url:davinci/ve/actions/templates/ModifyState.html":'\x3cdiv\x3e\n\t\x3cdiv class\x3d"dijitDialogPaneContentArea"\x3e\n\t\t\x3cdiv class\x3d\'modify_state_container\'\x3e\n\t\t\t\x3cdiv data-dojo-type\x3d"dijit.form.DropDownButton" label\x3d\'${veNls.renameLabel}\' dojoAttachPoint\x3d"renameButton" class\x3d"modify_state_rename_button"\x3e\n\t\t\t\t\t\x3cdiv data-dojo-type\x3d"dijit.TooltipDialog" class\x3d\'modify_state_rename_container\' id\x3d\'state_rename_tooltip_dialog\'\x3e\n\t\t\t\t\t\t\x3cdiv\x3e\n\t\t\t\t\t\t\t\x3clabel for\x3d"state_rename_new_name"\x3e${veNls.newStateLabel}\x3c/label\x3e\n\t\t\t\t\t\t\t\x3cinput data-dojo-type\x3d"dijit.form.ValidationTextBox" id\x3d"state_rename_new_name" name\x3d"state_rename_new_name"\x3e\x3c/input\x3e\n\t\t\t\t\t\t\x3c/div\x3e\n\t\t\t\t\t\t\x3cdiv\x3e\n\t\t\t\t\t\t\t\x3cbutton id\x3d"state_rename_do_it" dojoType\x3d\'dijit.form.Button\' label\x3d\'${veNls.renameLabel}\'\x3e\x3c/button\x3e\n\t\t\t\t\t\t\t\x3cbutton id\x3d"state_rename_cancel" dojoType\x3d\'dijit.form.Button\' label\x3d\'${veNls.cancelLabel}\'\x3e\x3c/button\x3e\n\t\t\t\t\t\t\x3c/div\x3e\n\t\t\t\t\t\x3c/div\x3e\n\t\t\t\t\x3c/div\x3e\n\t\t\t${veNls.stateLabel}: \x3cspan id\x3d\'modify_state_old_name\'\x3eaaa\x3c/span\x3e\n\t\t\x3c/div\x3e\n\t\t\x3cdiv class\x3d\'initial_state_row\'\x3e\n\t\t\t\x3cinput data-dojo-type\x3d"dijit.form.CheckBox" dojoAttachPoint\x3d"initialState" id\x3d"modify_state_initial_state" name\x3d"modify_state_initial_state"\x3e\x3c/input\x3e\n\t\t\t\x3clabel for\x3d\'modify_state_initial_state\'\x3e${veNls.initialStateCheckBoxLabel}\x3c/label\x3e\n\t\t\x3c/div\x3e\n\t\x3c/div\x3e\n\t\t\t\t\n\t\x3cdiv class\x3d"dijitDialogPaneActionBar"\x3e\n\t\t\x3cbutton dojoType\x3d\'dijit.form.Button\' dojoAttachPoint\x3d"okButton" label\x3d\'${veNls.modifyLabel}\' class\x3d"maqPrimaryButton"\x3e\x3c/button\x3e\n\t\t\x3cbutton dojoType\x3d\'dijit.form.Button\' dojoAttachPoint\x3d"cancelButton" label\x3d\'${commonNls.buttonCancel}\' class\x3d"maqSecondaryButton"\x3e\x3c/button\x3e\n\t\x3c/div\x3e\n\x3c/div\x3e\n',
"url:davinci/ve/prefs/HtmlEditPreferences.html":"\x3cdiv\x3e\n\t\x3ctable style\x3d'margin: 4px;' cellspacing\x3d'4'\x3e\n\t\t\x3ctbody\x3e\n\t\t\t\x3c!--\n\t\t\t\x3ctr\x3e\n\t\t\t\t\x3ctd\x3e${_loc.flowLayout}:\x3c/td\x3e\n\t\t\t\t\x3ctd\x3e\n\t\t\t\t\t\x3cdiv dojoAttachPoint\x3d'flowBoxNode'\x3e\x3c/div\x3e\n\t\t\t\t\x3c/td\x3e\n\t\t\t\x3c/tr\x3e\n\t\t\t--\x3e\n\t\t\t\x3ctr\x3e\n\t\t\t\t\x3ctd\x3e${_loc.snapToNearestWidget}:\x3c/td\x3e\n\t\t\t\t\x3ctd\x3e\n\t\t\t\t\t\x3cdiv dojoAttachPoint\x3d'snapNode'\x3e\x3c/div\x3e\n\t\t\t\t\x3c/td\x3e\n\t\t\t\x3c/tr\x3e\n\t\t\t\x3ctr\x3e\n\t\t\t\t\x3ctd\x3e${_loc.showPossibleParents}:\x3c/td\x3e\n\t\t\t\t\x3ctd\x3e\n\t\t\t\t\t\x3cdiv dojoAttachPoint\x3d'showPossibleParentsNode'\x3e\x3c/div\x3e\n\t\t\t\t\x3c/td\x3e\n\t\t\t\x3c/tr\x3e\n\t\t\t\x3ctr\x3e\n\t\t\t\t\x3ctd\x3e${_loc.warnOnCSSOverride}:\x3c/td\x3e\n\t\t\t\t\x3ctd\x3e\n\t\t\t\t\t\x3cdiv dojoAttachPoint\x3d'cssOverrideWarn'\x3e\x3c/div\x3e\n\t\t\t\t\x3c/td\x3e\n\t\t\t\x3c/tr\x3e\n\t\t\t\x3ctr\x3e\n\t\t\t\t\x3ctd\x3e${_loc.absoluteWidgetsZindex}:\x3c/td\x3e\n\t\t\t\t\x3ctd\x3e\n\t\t\t\t\t\x3cdiv dojoAttachPoint\x3d'absoluteWidgetsZindex'\x3e\x3c/div\x3e\n\t\t\t\t\x3c/td\x3e\n\t\t\t\x3c/tr\x3e\n\t\t\t\x3c!-- FIXME: Disabled for now. Ultimately, UI for this option should go to widget palette\n\t\t\t\x3ctr\x3e\n\t\t\t\t\x3ctd\x3e${_loc.widgetPaletteLayout}:\x3c/td\x3e\n\t\t\t\t\x3ctd\x3e\n\t\t\t\t\t\x3cdiv dojoAttachPoint\x3d'widgetPaletteLayout'\x3e\x3c/div\x3e\n\t\t\t\t\x3c/td\x3e\n\t\t\t\x3c/tr\x3e\n\t\t\t--\x3e\n\t\t\t\x3ctr\x3e\n\t\t\t\t\x3ctd\x3e${_loc.zazl}:\x3c/td\x3e\n\t\t\t\t\x3ctd\x3e\n\t\t\t\t\t\x3cdiv dojoAttachPoint\x3d'zazl'\x3e\x3c/div\x3e\n\t\t\t\t\x3c/td\x3e\n\t\t\t\x3c/tr\x3e\n\t\t\x3c/tbody\x3e\n\t\x3c/table\x3e\n\x3c/div\x3e",
"url:davinci/ve/widgets/templates/WidgetToolBar.html":'\x3cdiv class\x3d"propertiesTitleBar ui-widget-content" style\x3d"display: none"\x3e\n    \x3cdiv class\x3d\'propertiesWidgetDescription\'\x3e\n        \x3cspan class\x3d\'propertiesWidgetDescriptionFor\'\x3e${veNLS.toolBarFor}\x3c/span\x3e\n        \x3cspan data-dojo-attach-point\x3d"descNode"\x3e${veNLS.noSelection}\x3c/span\x3e\n    \x3c/div\x3e\n    \x3cdiv class\x3d"propertiesTitleBarPropertiesContainer"\x3e\n        \x3ctable width\x3d"100%" cellspacing\x3d"0" cellpadding\x3d"0" border\x3d"0" align\x3d"center"\n               class\x3d"propertiesTitleBarProperties property_table_stretchable"\x3e\n            \x3ccolgroup\x3e\n                \x3ccol style\x3d"width:10px;"\x3e\n                \x3ccol class\x3d"gap02"\x3e\n                \x3ccol class\x3d"gap03"\x3e\n                \x3ccol style\x3d"width:10px;"\x3e\n                \x3ccol style\x3d"width:6px;"\x3e\n            \x3c/colgroup\x3e\n            \x3ctbody\x3e\n            \x3c!--tr class\x3d"cssPropertySection"\x3e\n                \x3ctd\x3e\x3c/td\x3e\n                \x3ctd class\x3d"propertyDisplayName"\x3e${veNLS.toolBarClass}\x26nbsp;\x3c/td\x3e\n                \x3ctd class\x3d"propertyInputField"\x3e\n                  \x3cinput data-dojo-type\x3d"dijit.form.ComboBox" data-dojo-attach-point\x3d"classComboBox" label\x3d"" data-dojo-attach-event\x3d"onChange:_onChangeClassAttribute,onFocus:_onFieldFocus,onBlur:_onFieldBlur" style\x3d"width: 100%" searchAttr\x3d"name"/\x3e\n                \x3c/td\x3e\n                \x3ctd nowrap\x3d"true" class\x3d"propertyExtra"\x3e\x3c/td\x3e\n                \x3ctd\x3e\x3c/td\x3e\n            \x3c/tr--\x3e\n            \x3ctr class\x3d"cssPropertySection"\x3e\n                \x3ctd\x3e\x3c/td\x3e\n                \x3ctd class\x3d"propertyDisplayName"\x3e${veNLS.toolBarId}\x26nbsp;\x3c/td\x3e\n                \x3ctd class\x3d"propertyInputField"\x3e\n                    \x3cinput class\x3d"form-control input-transparent" data-dojo-type\x3d"dijit.form.ValidationTextBox" data-dojo-attach-point\x3d"idTextBox" label\x3d"" data-dojo-attach-event\x3d"onChange:_onChangeIDAttribute,onKeyPress:_onKeyPress,onFocus:_onFieldFocus,onBlur:_onFieldBlur" style\x3d"width: 100%"/\x3e\n                \x3c/td\x3e\n                \x3ctd nowrap\x3d"true" class\x3d"propertyExtra"\x3e\x3c/td\x3e\n                \x3ctd\x3e\x3c/td\x3e\n            \x3c/tr\x3e\n\n            \x3ctr class\x3d"cssPropertySection"\x3e\n                \x3ctd\x3e\x3c/td\x3e\n                \x3ctd class\x3d"propertyDisplayName"\x3eClass\x3c/td\x3e\n                \x3ctd class\x3d"propertyInputField"\x3e\n                    \x3cinput data-dojo-attach-point\x3d"cssClasses" type\x3d"text" class\x3d"" value\x3d"" style\x3d"width: 100%"\x3e\n                \x3c/td\x3e\n                \x3ctd nowrap\x3d"true" class\x3d"propertyExtra"\x3e\x3c/td\x3e\n                \x3ctd\x3e\x3c/td\x3e\n            \x3c/tr\x3e\n            \x3c!--tr class\x3d"cssPropertySection"\x3e\n                \x3ctd\x3e\x3c/td\x3e\n                \x3ctd class\x3d"propertyDisplayName"\x3eBlock Group\x26nbsp;\x3c/td\x3e\n                \x3ctd class\x3d"propertyInputField"\x3e\n                    \x3cinput data-dojo-type\x3d"dijit.form.ComboBox" data-dojo-attach-point\x3d"blockGroupComboBox" label\x3d"" data-dojo-attach-event\x3d"onChange:_onChangeBlockGroupAttribute,onFocus:_onFieldFocus,onBlur:_onFieldBlur" style\x3d"width: 100%" searchAttr\x3d"name"/\x3e\n                \x3c/td\x3e\n                \x3ctd nowrap\x3d"true" class\x3d"propertyExtra"\x3e\x3c/td\x3e\n                \x3ctd\x3e\x3c/td\x3e\n            \x3c/tr--\x3e\n            \x3c/tbody\x3e\n        \x3c/table\x3e\n    \x3c/div\x3e\n\x3c/div\x3e\n',
"url:davinci/ve/actions/templates/AddState.html":'\x3cdiv\x3e\n\t\x3cdiv class\x3d"dijitDialogPaneContentArea"\x3e\n\t\t\x3cdiv class\x3d\'addStateNameDiv\'\x3e\n\t\t\t\x3clabel\x3e${veNls.stateLabel}:\x3c/label\x3e\x3cinput dojoAttachPoint\x3d"input" dojoType\x3d"dijit.form.TextBox" dojoAttachEvent\x3d"onKeyUp:_onKeyPress" type\x3d"text"\x3e\x3c/input\x3e\n\t\t\x3c/div\x3e\n\t\x3c/div\x3e\n\t\x3cdiv class\x3d"dijitDialogPaneActionBar"\x3e\n\t\t\x3cbutton dojoType\x3d\'dijit.form.Button\' dojoAttachPoint\x3d"okButton" dojoAttachEvent\x3d\'onClick:onOk\' label\x3d\'${veNls.createLabel}\' class\x3d"maqPrimaryButton" type\x3d"submit"\x3e\x3c/button\x3e\n\t\t\x3cbutton dojoType\x3d\'dijit.form.Button\' dojoAttachEvent\x3d\'onClick:onCancel\' label\x3d\'${commonNls.buttonCancel}\' class\x3d"maqSecondaryButton"\x3e\x3c/button\x3e\n\t\x3c/div\x3e\n\x3c/div\x3e\n',
"url:davinci/ve/actions/templates/ManageStates.html":"\x3cdiv\x3e\n\t\x3cdiv class\x3d\"dijitDialogPaneContentArea\"\x3e\n\t\t\x3cdiv class\x3d\"addStateDialogOptions\"\x3e\n\t\t\t\x3cdiv class\x3d'manageStatesStatesListDiv'\x3e\n\t\t\t\t\x3c!-- Filled in by JavaScript --\x3e\n\t\t\t\x3c/div\x3e\n\t\t\t\x3cdiv class\x3d'manageStatesCheckAcceleratorsDiv'\x3e\n\t\t\t\t${veNls.manageStatesCheckLabel}\n\t\t\t\t\x3ca href\x3d'' class\x3d'manageStatesCheckCurrentStateOnly'\x3e${veNls.manageStatesCheckCurrentStateOnly}\x3c/a\x3e\n\t\t\t\t/\n\t\t\t\t\x3ca href\x3d'' class\x3d'manageStatesCheckAll'\x3e${veNls.manageStatesCheckAll}\x3c/a\x3e\n\t\t\t\t/\n\t\t\t\t\x3ca href\x3d'' class\x3d'manageStatesUncheckAll'\x3e${veNls.manageStatesUncheckAll}\x3c/a\x3e\n\t\t\t\t/\n\t\t\t\t\x3ca href\x3d'' class\x3d'manageStatesCheckBackgroundOnly'\x3e${veNls.manageStatesCheckBackgroundOnly}\x3c/a\x3e\n\t\t\t\x3c/div\x3e\n\t\t\t\n\t\t\x3c/div\x3e\t\n\t\x3c/div\x3e\n\t\x3cdiv class\x3d\"dijitDialogPaneActionBar\"\x3e\n\t\t\x3cbutton dojoType\x3d'dijit.form.Button' dojoAttachPoint\x3d\"okButton\" dojoAttachEvent\x3d'onClick:onOk' label\x3d'${veNls.createLabel}' class\x3d\"maqPrimaryButton\" type\x3d\"submit\"\x3e\x3c/button\x3e\n\t\t\x3cbutton dojoType\x3d'dijit.form.Button' dojoAttachEvent\x3d'onClick:onCancel' label\x3d'${commonNls.buttonCancel}' class\x3d\"maqSecondaryButton\"\x3e\x3c/button\x3e\n\t\x3c/div\x3e\n\x3c/div\x3e\n"}});
define("davinci/davinci",[],function(){});
//# sourceMappingURL=davinci.js.map