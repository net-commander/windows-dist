//>>built
require({cache:{"davinci/main":function(){define("dojo/_base/kernel dojo/_base/declare davinci/davinci davinci/ve/metadata davinci/Runtime davinci/Workbench davinci/ve/metadata davinci/ui/widgets/OutlineTree".split(" "),function(n){return n.davinci})},"davinci/ve/metadata":function(){define("require dojo/Deferred dojo/promise/all dojo/_base/lang dojo/_base/connect ../library ../model/Path ../repositoryinfo xide/types".split(" "),function(n,m,g,e,c,f,k,a,d){function h(a,b){a=a||{};for(var p=1,d=arguments.length;p<
d;p++){var f=arguments[p],c=void 0,k=void 0;for(c in f)f.hasOwnProperty(c)&&(k=f[c],c in a&&("object"===typeof k||a[c]===k)?h(a[c],k):a[c]=k)}return a}function b(b,d,f){D[b.name]=b;d=new k(d);var c=b.overlays,z;for(z in c)c.hasOwnProperty(z)&&("oam"!==z&&"maqetta"!==z||h(b,c[z]));delete b.overlays;b.__metadataModuleId="maq-metadata-"+b.name;c=new k(location.href);c.path=""+f;"dojo"!==b.name&&"xide"!==b.name&&"xblox"!==b.name&&(b.__libraryModuleId=b.name,c.append("app/static/lib/"+b.name+"/"+b.version));
var g;if(e.exists("scripts.widget_metadata",b))if("string"===typeof b.scripts.widget_metadata){var w=d.append(b.scripts.widget_metadata);g=dojo.xhrGet({url:f+"/"+w.toString()+(0<a.revision.length?"?"+a.revision:""),handleAs:"json"}).then(function(a){if(a){var h=w.getParentPath();return p(b.name,a,h,h,f)}})}else g=p(b.name,b.scripts.widget_metadata,d,f);if(e.exists("scripts.callbacks",b)){var y=new m;n([b.scripts.callbacks],function(a){b.$callbacks=a;y.resolve()});E.push(y)}return g}function p(a,b,
h,p){function d(b,a,h){"undefined"==typeof b.$providedTags[a]&&(b.$providedTags[a]=[]);b.$providedTags[a].push(h)}var f=D[a];b.$descriptorFolderPath=h.toString();b.$moduleFolderPath=p.toString();if(f)if(f.$widgets){b.widgets.forEach(function(b){f.$wm.widgets.push(b)});for(var c in b.categories)f.$wm.categories.hasOwnProperty(c)||(f.$wm.categories[c]=b.categories[c])}else if(f.$wm)for(p=0;p<b.widgets.length;p++){c=!1;for(var k=0;!c&&k<f.$wm.widgets.length;k++)f.$wm.widgets[k].type==b.widgets[p].type&&
(c=!0);c||f.$wm.widgets.push(b.widgets[p])}else f.$wm||(f.$wm=b);else D[a]={$wm:b,name:b.name,version:b.version},b.__metadataModuleId&&(D[a].__metadataModuleId=b.__metadataModuleId),f=D[a];var e=f.$wm;e.$providedTypes=e.$providedTypes||{};e.$providedTags=e.$providedTags||{};e.widgets.forEach(function(b){e.$providedTypes[b.type]=b;if("string"==typeof b.tags)d(e,b.tags,b);else if(b.tags&&b.tags.length)for(var a=0;a<b.tags.length;a++)d(e,b.tags[a],b);b.icon&&!b.iconLocal&&(b.icon=h.append(b.icon).toString());
b.iconLarge&&!b.iconLargeLocal&&(b.iconLarge=h.append(b.iconLarge).toString());b.widgetClass=e.categories[b.category].widgetClass});dojo.mixin(e,{_maqGetString:w});if(e.extend)for(var g in e.extend)e.extend.hasOwnProperty(g)&&(D[g]&&D[g].$wm?z(D[g].$wm,[e.extend[g]]):(b=M[g]||[],b.push(e.extend[g]),M[g]=b));M[a]&&z(e,M[a]);return f}function z(b,a){var h=b.$providedTypes;a.forEach(function(b){for(var a in b)if(b.hasOwnProperty(a)){var p=b[a],d=h[a];p.mixin&&e.mixin(d,p.mixin);if(p.concat)for(var f in p.concat)if(p.concat.hasOwnProperty(f)){var c=
p.concat[f];if(d[f]){var k=d[f];"string"===typeof k?c=k+","+c:k instanceof Array?c=k.concat(c):(console.error('Unhandled type for "concat()"'),c=void 0)}d[f]=c}}})}function r(b){if(b)for(var a in D)if(D.hasOwnProperty(a)){var h=D[a];if(h.$wm&&h.$wm.$providedTypes[b])return h}return null}function w(b){J||(J=!0);return null}function A(b){if(b){if(F.hasOwnProperty(b))return F[b];var a=r(b),p,f;a&&(f=a.$wm.$descriptorFolderPath);if(!f)return null;p=a.$wm;var c=null,k,a=I.getResourceManager().getVariable(d.RESOURCE_VARIABLES.APP_URL);
if(p.localPath){if(f=b.replace(/\./g,"/").split("/"),f.shift(),f=f.join("/"),k=[p.$moduleFolderPath,"/",f,"_oam.json"].join(""),-1!==k.indexOf("lib/custom")){var e=I.getFileManager().getStore("workspace_user",!1);return new Promise(function(a){e._loadItem({path:k,mount:"workspace_user"},!0).then(function(d){I.getFileManager().getContent(d.mount,d.path).then(function(d){c=dojo.fromJson(d);c.$ownproperty=dojo.mixin({},c.property);c.property=dojo.mixin({},G,c.property);c.$src=k;F[b]=c;h(c,p.$providedTypes[b].metadata);
a(c)})})})}}else k=[f,"/",b.replace(/\./g,"/"),"_oam.json"].join(""),k=a+"/lib/xideve/metadata/"+k,dojo.xhrGet({url:k,handleAs:"json",sync:!0}).then(function(b){c=b});if(!c)return console.error("ERROR: Could not load metadata for type: "+b),null;c.$ownproperty=dojo.mixin({},c.property);c.property=dojo.mixin({},G,c.property);c.$src=k;F[b]=c;h(c,p.$providedTypes[b].metadata);return c}}function x(b,a){if(!a)return b;dojo.every(a.split("."),function(a){if(void 0===b[a])return b=void 0,!1;b=b[a];return!0});
return b}function y(b,a){(a=v.queryDescriptor(a,"allowed"+b))||(a="Parent"===b?"ANY":"NONE");return a.split(/\s*,\s*/)}function u(b,a){a=v.queryDescriptor(b,a);if(!a)return null;b=r(b);return q(b,a)}function q(b,a){return b&&a?"string"===typeof a&&"./"===a.substr(0,2)?(new k(b.__metadataModuleId)).append(a).toString():a:null}var v,B,I,D={},F={},C={},E=[],M={},G={id:{datatype:"string",hidden:!0},lang:{datatype:"string",hidden:!0},dir:{datatype:"string",hidden:!0},"class":{datatype:"string",hidden:!0},
style:{datatype:"string",hidden:!0},title:{datatype:"string",hidden:!0}};dojo.subscribe("/davinci/ui/libraryChanged/start",function(){D={};F={};C={};v.init().then(function(){dojo.publish("/davinci/ui/libraryChanged")})});var J=!1;v={prefix:"",ctx:null,init:function(h,p){n({cacheBust:null});this.ctx=I=h;var c=[];B=n("../Workbench");h=I.getResourceManager().getVariable(d.RESOURCE_VARIABLES.APP_URL);p=p.replace(h,"");p=n.toUrl("xideve/metadata/");f.getUserLibs(B.getProject()).forEach(function(h){var d=
h.metaRoot;if(d=d.replace("app/metadata/","")){var f=null,k=null;try{h.getRoot&&(f=h.getRoot()),h.getMetaPath&&(k=h.getMetaPath()),c.push(dojo.xhrGet({url:(f||p)+"/"+(k||d)+"/package.json?"+a.revision,handleAs:"json"}).then(function(a){return b(a,k||d,f||p)}))}catch(S){console.error("error parsing library "+h.id,S)}}});return g(c)},parseMetaData:function(b,a,h,d){return p(b,a,h,d)},getLibrary:function(b){return b?D[b]:D},getLibraryActions:function(b,a){var h=[],p={},d;for(d in D){if(D.hasOwnProperty(d)){p.lib=
D[d];if(!p.lib.$wm)continue;var f=p.lib.$wm["davinci.actionSets"];if(!f)continue;dojo.forEach(f,function(p){return function(d){d.id!=b||a&&d.targetID!==a||(d=dojo.clone(d.actions),dojo.forEach(d,function(b){if(b.action){var a=q(p.lib,b.action);b.action=a}b.menu&&b.menu.forEach(function(b){if(b.action){var a=q(p.lib,b.action);b.action=a}});h.push(b)}))}}(p))}p={lib:p.lib}}return h},loadThemeMeta:function(b){for(var a=b.find({elementType:"HTMLElement",tag:"style"}),h=[],p,d=0;d<a.length;d++)for(var c=
0;c<a[d].children.length;c++)"CSSImport"==a[d].children[c].elementType&&h.push(a[d].children[c]);new k(b.fileName);d=f.getThemes(B.getProject());a={};for(c=0;c<d.length;c++)if(d[c].files)for(var e=0;e<d[c].files.length;e++)a[d[c].files[e]]=d[c];for(c=0;c<h.length;c++){var d=h[c].url,z;for(z in a)if(-1<z.indexOf("claro")&&(p=z),-1<d.indexOf(z))return{themeUrl:d,themeMetaCache:f.getThemeMetadata(a[z]),theme:a[z]}}if(c=v._loadThemeMetaDojoxMobile(b,a))return c;if(p){for(var g,c=0;c<h.length;c++)if((z=
h[c].url.match(/\/([^\/]*)\.css$/))&&2==z.length&&(z=z[1],h[c].url.match(new RegExp("themes/"+z+"/"+z+".css$")))){g=z;break}if(g)return z=b.getDocumentElement(),b=z.getChildElement("head"),z=z.getChildElement("body"),(d=z.getAttribute("class"))&&z.setAttribute("class",d.replace(new RegExp("\\b"+g+"\\b","g"),"claro")),b=b.getChildElements("style"),dojo.forEach(b,function(b){dojo.forEach(b.children,function(b){"CSSImport"==b.elementType&&(b.url=b.url.replace(new RegExp("/"+g,"g"),"/claro"))})}),d=h[c].url.replace(new RegExp("/"+
g,"g"),"/claro"),h={themeUrl:d,themeMetaCache:f.getThemeMetadata(a[p]),theme:a[p]},h.themeMetaCache.usingSubstituteTheme={oldThemeName:g,newThemeName:"claro"},h}},_loadThemeMetaDojoxMobile:function(b,a){b=b.find({elementType:"HTMLElement",tag:"script"});for(var h=0;h<b.length;h++){var d=b[h].getElementText();if(d.length){var p=d.indexOf("dojoxMobile.themeMap");if(0<p){var p=d.indexOf("\x3d",p),c=d.indexOf(";",p);if(c>p){var d=dojo.fromJson(d.substring(p+1,c))[0][2][0],k;for(k in a)if(-1<d.indexOf(k))return{themeUrl:d,
themeMetaCache:f.getThemeMetadata(a[k]),theme:a[k]}}}}}},getLibraryForType:function(b){return r(b)},getLibraryMetadataForType:function(b){return(b=r(b))?b.$wm:null},getWidgetDescriptorForType:function(b){var a=r(b);b=a?a.$wm.$providedTypes[b]:void 0;return b},getOamDescriptivePropertyForType:function(b,a){return(b=A(b))&&b[a]?(a=b[a],"string"==typeof a?{type:"text/plain",value:a}:"string"==typeof a.value?{type:a.type?a.type:"text/plain",value:a.value}:null):null},getWidgetsWithTag:function(b){var a=
[];if(b)for(var h in D)if(D.hasOwnProperty(h)){var d=D[h];d.$wm&&d.$wm.$providedTags[b]&&(a=a.concat(d.$wm.$providedTags[b]))}return a},getLibraryBase:function(b){if(b=r(b))return b.$wm.$descriptorFolderPath},invokeCallback:function(b,a,h){var d=b;"string"===typeof b&&(d=r(type));if(d&&d.$callbacks&&(b=d.$callbacks[a]))return b.apply(d.$callbacks,h)},query:function(b,a){if(b){var h,d;b.declaredClass?(b.metadata&&(d=b.metadata),h=b.type):h=b;if(!d){d=A(h);if(!d)return;b.declaredClass&&(b.metadata=
d)}return x(d,a)}},queryDescriptorByName:function(b,a,h){a=r(a);var d;if(a){a=a.$wm.widgets;for(var p=0;p<a.length;p++)if(a[p].name==b){d=a[p];break}}return this._queryDescriptor(d,h)},queryDescriptor:function(b,a){var h=r(b),d;h&&(d=h.$wm.$providedTypes[b]);return this._queryDescriptor(d,a)},_queryDescriptor:function(b,a){if(b&&"object"===typeof b)return b=x(b,a),"resizable"===a&&(b||(b="both")),b},getAllowedParent:function(b){return y("Parent",b)},getAllowedChild:function(b){return y("Child",b)},
getCanSelect:function(b){return(b=v.queryDescriptor(b,"canSelect"))?b.split(/\s*,\s*/):[]},getMetadata:A,getHelper:function(b,a){var h=new m,d=b+":"+a;if(d in C)return h.resolve(C[d]),h;(b=u(b,a))?n([b],function(b){h.resolve(b);C[d]=b}):h.resolve();return h},getSmartInput:function(b){var a=new m;if(b in H)a.resolve(H[b]);else{var h=u(b,"inlineEdit");h?"string"===typeof h?n([h],function(h){a.resolve(H[b]=new h)}):"[object Array]"===Object.prototype.toString.call(h.property)?n(["davinci/ve/input/MultiFieldSmartInput"],
function(d){d=new d;e.mixin(d,h);a.resolve(H[b]=d)}):n(["davinci/ve/input/SmartInput"],function(d){d=new d;e.mixin(d,h);a.resolve(H[b]=d)}):a.resolve(null)}return a},getDeferreds:function(){return E}};var H={};c.subscribe("/davinci/ui/libraryChanged/start",function(){H={}});dojo.setObject("davinci.ve.metadata",v);return v})},"davinci/library":function(){define("dojo/_base/xhr dojo/Deferred ./Runtime ./model/Path ./workbench/Preferences dojo/_base/kernel dojo/promise/all xide/model/Path xide/types xide/utils davinci/ve/metadata".split(" "),
function(n,m,g,e,c,f,k,a,d,h,b){var p=[{userLibs:[{id:"html",version:"0.8",metaRoot:"app/metadata/html/0.8",required:!0,hasSource:!1},{id:"delite",version:"0.8",metaRoot:"app/metadata/delite/0.8",required:!1,hasSource:!0},{id:"xblox",version:"1.0",metaRoot:"app/metadata/xblox/1.0",required:!1,hasSource:!1,root:"lib/xblox"}]}],z=[{specVersion:"1.0",files:["blackberry.css"],useBodyFontBackgroundClass:"useBodyFontBg",helper:"maq-metadata-dojo/dojox/mobile/ThemeHelper",themeEditorHtmls:["../custom/dojo-theme-editor.html"],
name:"blackberry",path:["project1/themes/blackberry/blackberry.theme"],base:"",className:"blackberry",type:"dojox.mobile",meta:["../custom/custom.json"],version:"1.8"},{specVersion:"1.0",files:["claro.css"],helper:"maq-metadata-dojo/dijit/ThemeHelper",themeEditorHtmls:["dojo-theme-editor.html"],name:"claro",path:["project1/themes/claro/claro.theme"],conditionalFiles:["document.css"],className:"claro",meta:["claro.json"],version:"1.8"},{specVersion:"1.0",files:["ipad.css"],useBodyFontBackgroundClass:"useBodyFontBg",
helper:"maq-metadata-dojo/dojox/mobile/ThemeHelper",themeEditorHtmls:["dojo-theme-editor.html"],name:"ipad",path:["project1/themes/ipad/ipad.theme"],base:"",className:"ipad",type:"dojox.mobile",meta:["ipad.json"],version:"1.8"},{specVersion:"1.0",files:["android.css"],useBodyFontBackgroundClass:"useBodyFontBg",helper:"maq-metadata-dojo/dojox/mobile/ThemeHelper",themeEditorHtmls:["../custom/dojo-theme-editor.html"],name:"android",path:["project1/themes/android/android.theme"],base:"",className:"android",
type:"dojox.mobile",meta:["../custom/custom.json"],version:"1.8"},{specVersion:"1.0",files:["custom.css"],useBodyFontBackgroundClass:"useBodyFontBg",helper:"maq-metadata-dojo/dojox/mobile/ThemeHelper",themeEditorHtmls:["dojo-theme-editor.html"],name:"custom",path:["project1/themes/custom/custom.theme"],base:"",className:"custom",type:"dojox.mobile",meta:["custom.json"],version:"1.8"},{specVersion:"1.0",files:["iphone.css"],useBodyFontBackgroundClass:"useBodyFontBg",helper:"maq-metadata-dojo/dojox/mobile/ThemeHelper",
themeEditorHtmls:["../custom/dojo-theme-editor.html"],name:"iphone",path:["project1/themes/iphone/iphone.theme"],base:"",className:"iphone",type:"dojox.mobile",meta:["../custom/custom.json"],version:"1.8"},{specVersion:"1.0",files:["sketch.css"],themeEditorHtmls:["../claro/dojo-theme-editor.html"],name:"Sketch",path:["project1/themes/sketch/sketch.theme"],className:"claro",meta:["../claro/claro.json"],version:"1.8"}],r={_customWidgets:{}},w={},A={},x={},y={};f.subscribe("/davinci/ui/libraryChanged/start",
this,function(){y={};x={}});return r={themesChanged:function(b){w[b]=b?null:[]},getThemes:function(b,a,h){function d(){var h=[];w[b]&&(h=a?w[b].filter(function(b){return!b.getFile().isVirtual()}):w[b]);return h}h&&delete w[b];if(w[b])return d();h=c.getPreferences("davinci.ui.ProjectPrefs",b);h.themeFolder="themes";(new e(b)).append(h.themeFolder);z.forEach(function(b){b.getFile=function(){return system.resource.findResource(this.path[0])}.bind(b)}.bind(this));w[b]=z;return d()},getThemeMetadata:function(b){return A[b.name]?
A[b.name]:null},addCustomWidgets:function(b,a,h){new m;b=b.getParent().getPath();b=new e(b);a=require("davinci/ve/metadata").parseMetaData(h.name,h,b,a);r._customWidgets||(r._customWidgets={});r._customWidgets.project1||(r._customWidgets.project1={});r._customWidgets.project1.hasOwnProperty("name")||(r._customWidgets.project1.name="custom",r._customWidgets.project1.metaPath="./lib/custom",r._customWidgets.project1.localPath=!0);r._customWidgets.project1=a;f.publish("/davinci/ui/addedCustomWidget",
[a]);return a},_getCustomWidgets:function(b){if(!r._customWidgets||!r._customWidgets[b]){r._customWidgets||(r._customWidgets={});r._customWidgets[b]||(r._customWidgets[b]=[]);var a=c.getPreferences("davinci.ui.ProjectPrefs",b);a.widgetFolder||(a.widgetFolder="./lib/custom",c.savePreferences("davinci.ui.ProjectPrefs",b,a));for(var h=(new e(b)).append(a.widgetFolder).getSegments(),a=system.resource.findResource(h[0]),d=1;d<h.length;d++)var p=a.getChild(h[d]),a=p?p:a.createResource(h[d],!0);var k;a.getChildren(function(b){k=
b},!0);this._customWidgetPackages=[];null==k&&(k=[]);h={};for(d=0;d<k.length;d++)if(p=k[d],"Folder"==p.elementType){h[p.name]=p.getPath();var z="maq-lib-custom-"+p.name,g=p.getURL();require({packages:[{name:z,location:g}]});this._customWidgetPackages.push({name:p.name,location:g})}p=system.resource.findResource("*_widgets.json",!1,a);this._customWidgetDescriptors={};for(d=0;d<p.length;d++){var w=p[d],A=w.getParentFolder(),g=a.getURL(),z=A.getURL(),x=z.substr(g.length+1),g=null;try{g=f.fromJson(w.getContentSync())}catch(J){}if(g&&
g.customWidgetSpec&&(x=x.split("/").shift(),g.__metadataModuleId="maq-lib-custom-"+x,r.addCustomWidgets(b,w,h[x],g),y[b]||(y[b]={}),y[b][A.name]||(y[b][A.name]={}),y[b][A.name][g.version]=z,g&&g.widgets))for(w=0;w<g.widgets.length;w++)(A=g.widgets[w].type)&&(this._customWidgetDescriptors[A]={name:x,location:z,descriptor:g})}}return{custom:r._customWidgets[b]}},getCustomWidgets:function(){var b=this;this._customWidgetPackages=[];var a={},d=[],p=r.ctx.getFileManager(),f=p.getStore("workspace_user"),
c=[],e=require("davinci/ve/metadata"),z=[],g=new m;p.mkdir("workspace_user","./lib/custom").then(function(){f.getItem("./lib/custom",!0).then(function(p){p.getChildren().forEach(function(p){!0===p.directory&&z.push(f._loadItem(p,!0).then(function(h){a[p.name]=p.getPath();h="maq-lib-custom-"+p.name;var d=require.toUrl("workspace")+"/lib/custom/"+p.name;require({packages:[{name:h,location:d}]});b._customWidgetPackages.push({name:p.name,location:d});c.push(p)}));k(z).then(function(){c.forEach(function(b){var p=
b.getPath()+"/"+b.name+"_widgets.json",c=f.getSync(p),k=new m;d.push(k);r.ctx.getFileManager().getContent(c.mount,c.path).then(function(d){d=h.getJson(d);var p=b.name;d.__metadataModuleId="maq-lib-custom-"+p;try{r.addCustomWidgets(c,a[p],d)}catch(P){console.error("error parsing custom widget "+b.name,P)}d=e.getMetadata(d.name+"/"+d.name);d.then?d.then(function(){k.resolve()}):k.resolve()})});k(d).then(function(){g.resolve({custom:r._customWidgets.project1})})})})})});return g},getCustomWidgetPackages:function(){return this._customWidgetPackages||
[]},getCustomWidgetDescriptors:function(){return this._customWidgetDescriptors?this._customWidgetDescriptors:{}},getInstalledLibs:function(){r._serverLibs||(r._serverLibs=g.serverJSONRequest({url:"cmd/listLibs",handleAs:"json",content:{},sync:!0})[0].userLibs);return r._serverLibs},getUserLibs:function(b){if(x.base)return x.base;x.base=p[0].userLibs;return x.base},getLibRoot:function(b,a,h){var d=new m,p=y;if(p[h]&&p[h][b]&&void 0!==p[h][b][a])return d.resolve(p[h][b][a]||"");p[h]||(p[h]={});p[h][b]||
(p[h][b]={});p[b]||(p[b]={});var f=null;switch(b){case "xblox":f="lib/xblox";break;case "dojo":f="lib/dojo";break;case "maqetta":f="lib/maqetta";break;case "delite":f="lib/ibm-js/delite";break;case "deliteful":f="lib/ibm-js/deliteful";break;case "requirejs":f="lib/ibm-js/requirejs";break;case "requirejs":f="lib/ibm-js/requirejs";break;case "user":f="workspace_user/"}p[h][b][a]=f;return d.resolve(f||"")},getlibraryId:function(b,a){return{sketch:"sketch",claro:"claro"}[b]+(a||"")},getlibraryName:function(b){var a,
h;for(h in b)a=h;return a}}})},"davinci/Runtime":function(){define("davinci/lang/webContent ./commands/CommandStack ./ui.plugin ./html/html.plugin ./js/js.plugin ./ve/ve.plugin".split(" "),function(n,m,g,e,c,f){var k=[g,e,f],a={plugins:[],extensionPoints:[],subscriptions:[],currentSelection:[],commandStack:new m,getUser:function(){return this._initializationInfo.userInfo},getWorkbenchState:function(){return this._initializationInfo?this._initializationInfo.workbenchState:{activeEditor:null,editors:[],
nhfo:{project1:{device:"iphone",layout:"flow",themeSet:{name:"(none)",desktopTheme:"claro",mobileTheme:[{theme:"android",device:"Android"},{theme:"blackberry",device:"BlackBerry"},{theme:"ipad",device:"iPad"},{theme:"iphone",device:"iPhone"},{theme:"iphone",device:"other"}]}}},project:"project1",id:"",Fields:[]}},getSiteConfigData:function(a){return"widgetPalette"==a?{name:"widgetPalette_dojo_default",defs:{$XBLOXSection:{id:"xblox",name:"xblox",iconBase64:"data:image/gif;base64,R0lGODlhEAAQAKIAAFhYWtXV1v///0BAQP///wAAAAAAAAAAACH5BAEAAAQALAAAAAAQABAAAAMuSLo0w5CNIF6EM9grN2+Z82WCEGjcVJbopa5tlJ2nh4W2XH9LyCu+X/AHAPyOCQA7",
subsections:["$XBLOXSection_Controls"]},$XBLOXSection_Controls:{id:"Controls",name:"Controls",iconBase64:"data:image/gif;base64,R0lGODlhEAAQALMAAN7e4oyMjtXV1sDAwf///+Dg4MvLyzMzM////wAAAAAAAAAAAAAAAAAAAAAAAAAAACH5BAEAAAgALAAAAAAQABAAAAQ3EMlJq704a3RO2NIhBIexHYRgeFTndkQ8HmER33g60EcB/ECcYBd6wWSkDErFUs5Mms4HRK1SIwA7",includes:["RunScript","CSSState","StyleState","Script"]},$ClipartSection_Arrows:{id:"Arrows",name:"Arrows",iconBase64:"data:image/gif;base64,R0lGODlhEAAQALMAAN7e4oyMjtXV1sDAwf///+Dg4MvLyzMzM////wAAAAAAAAAAAAAAAAAAAAAAAAAAACH5BAEAAAgALAAAAAAQABAAAAQ3EMlJq704a3RO2NIhBIexHYRgeFTndkQ8HmER33g60EcB/ECcYBd6wWSkDErFUs5Mms4HRK1SIwA7",
includes:["ArrowDown","ArrowLeft","ArrowRight","ArrowUp"]},$ClipartSection_Community:{id:"Community",name:"Community",iconBase64:"data:image/gif;base64,R0lGODlhEAAQAMQAANXV1v///9HR0cXFxbm5uaKiooyMjHR0dGlpaVJSUkZGRkREREJCQkFBQT09PTo6OjMzM////wAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAACH5BAEAABEALAAAAAAQABAAAAVdIJEoZGmSiTgAbOuywwgEdAAY5WyTul0gAYFCB+DRWJCAqFArDo+QRcDRgBCNu1rgueMWG4FHw4u1Maa9bg8AdqSd6/a7zEZr4U35vRw4KA5aOwkrL4UxIieJCikhADs\x3d",includes:["Facebook","Rss","Twitter"]},$ClipartSection_Devices:{id:"Devices",
name:"Devices",iconBase64:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAMAAAAoLQ9TAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAA2hpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuMC1jMDYxIDY0LjE0MDk0OSwgMjAxMC8xMi8wNy0xMDo1NzowMSAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wTU09Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9tbS8iIHhtbG5zOnN0UmVmPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvc1R5cGUvUmVzb3VyY2VSZWYjIiB4bWxuczp4bXA9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC8iIHhtcE1NOk9yaWdpbmFsRG9jdW1lbnRJRD0ieG1wLmRpZDowMTgwMTE3NDA3MjA2ODExOTJCMEJDQTgxOTc0RDYxMiIgeG1wTU06RG9jdW1lbnRJRD0ieG1wLmRpZDo4NTQ0QUU2NjhCMzMxMUUyOTQ3N0ExRTg0NEJENzk4RiIgeG1wTU06SW5zdGFuY2VJRD0ieG1wLmlpZDo4NTQ0QUU2NThCMzMxMUUyOTQ3N0ExRTg0NEJENzk4RiIgeG1wOkNyZWF0b3JUb29sPSJBZG9iZSBQaG90b3Nob3AgQ1M1LjEgTWFjaW50b3NoIj4gPHhtcE1NOkRlcml2ZWRGcm9tIHN0UmVmOmluc3RhbmNlSUQ9InhtcC5paWQ6MDM4MDExNzQwNzIwNjgxMTkyQjBCQ0E4MTk3NEQ2MTIiIHN0UmVmOmRvY3VtZW50SUQ9InhtcC5kaWQ6MDE4MDExNzQwNzIwNjgxMTkyQjBCQ0E4MTk3NEQ2MTIiLz4gPC9yZGY6RGVzY3JpcHRpb24+IDwvcmRmOlJERj4gPC94OnhtcG1ldGE+IDw/eHBhY2tldCBlbmQ9InIiPz7l5plaAAAAIVBMVEX///8zMzP3+PnV1dZ+fn7ExMZ9fX4sKis1NTVZWVmgoKKPJ3BhAAAARElEQVR42mJgIAIwM8IBM1iAkRkO2KECTFBAiQCaoZjWsrKxcgIxEHKA+BysbGysQIKLi5OVEyjCiAYYWNAAYa8CBBgA3BQB3Pw68r4AAAAASUVORK5CYII\x3d",
includes:["Cellphone","Computer","Laptop","Server","Tablet"]},$ClipartSection_DeviceSilhouettes:{id:"DeviceSilhouettes",name:"Device Silhouettes",iconBase64:"data:image/gif;base64,R0lGODlhEAAQAKIAAGZmaNXV1v///0BAQP///wAAAAAAAAAAACH5BAEAAAQALAAAAAAQABAAAAM6SErT3iu+EF5UL4/LqPfbNQRCaVbcaJ6hRK4CKr6r7MJxu6iwvX8fHUbjSDUAFEBR5AAol0wNZzpNAAA7",includes:"Android_340x480 Android_480x800 AndroidTablet Blackberry iPad iPhone".split(" ")},$ClipartSection_Media:{id:"Media",name:"Media",iconBase64:"data:image/gif;base64,R0lGODlhEAAQALMAANXV1v////z8/Pr6+vn5+fj4+Ojo6MrKyre3t6urq4iIiHV1dUdHR0BAQDMzM////yH5BAEAAA8ALAAAAAAQABAAAARZ8MlJq6Ut36c5+E3VOGAGBEAWeif6DULghk0rB8jCLAhK2zjFoXBQIFKeW2BxSDQShwWypmQUGoZGgTEFMp1Q6U+JEBKN3RsBp+P5WJ+4HCRR2e+rjX5PiQAAOw\x3d\x3d",
includes:"Camera Chat GraphBar GraphLine GraphPie Image Map Microphone PlayControl Record StreetMap Table VideoCamera VideoPlayer".split(" ")},$ClipartSection_UserInterfaceControls:{id:"UserInterfaceControls",name:"User Interface Controls",iconBase64:"data:image/gif;base64,R0lGODlhEAAQALMAAFhYWtXV1qurrKGhooKCg/////X19TMzM////wAAAAAAAAAAAAAAAAAAAAAAAAAAACH5BAEAAAgALAAAAAAQABAAAARSEElwqrUyHxG678KRIVthDoNZhGNZBFVgsppQGId5GKtYF5dKr8X5eGiSoNKXJAie0CeBSbKprsgqMDj84XS8rAt2kHWT1gJKJS4aA1nSspKJAAA7",includes:"File Folder FormattingToolbox HScrollBar HSplit ProgressBar SpinInput VScrollBar VSplit WaitingPending".split(" ")},
$ClipartSection_UserInterfaceIcons:{id:"UserInterfaceIcons",name:"User Interface Icons",iconBase64:"data:image/gif;base64,R0lGODlhEAAQANUAANXT1vj4+eLi49/f4Nra29nZ2tbW19XV1tTU1dDQ0c3NzpCQkf////7+/vX19fLy8vDw8O/v7+zs7OTk5OPj49nZ2dHR0c/Pz87Ozs3NzczMzKWlpaOjo6KioqGhoZ6enp2dnZycnJubm5mZmY+Pj4aGhoWFhYGBgX5+fnR0dHNzc2lpaWZmZllZWVdXV1VVVVNTU1FRUU5OTk1NTUxMTEJCQkBAQDY2NjMzMzIyMi8vLyoqKiYmJiMjI////wAAACH5BAEAAD4ALAAAAAAQABAAAAa8QJ/Qd0HRdD0dDXUZDj8ykqJgKGBIso/zs9IIIoFGICLQrLREWUZSmeHetookI2ueFgIGC6fSqHAzDAILJz4yFhF6LA8MD28MEQkyPjkEAQyYjS04LAwBBDk+PAYNmQ+bLYwNBjw+OJaZGzipmA4EOD4xB4mYIzgjmREHMT4mIhSZyZgUIiZELwgSvb+YEggvTT4eKQgDEB01HRATCCkcThwuIAcEAAQHIS/nTj4WJTA3OzcwJRb0/wB9BAEAOw\x3d\x3d",
includes:"Close Copy Delete Edit Error Fatal Help Home Info Lock Mail Minus Next Paste Plus Previous Print Refresh Save Search ShoppingCart Trash Warning".split(" ")},$ClipartSection_Other:{id:"Other",name:"Other",iconBase64:"data:image/gif;base64,R0lGODlhEAAQAJEAAHx8fDMzM////wAAACH5BAEAAAIALAAAAAAQABAAAAImlI9pAYoQDGxuHpvwZY8rrH1MWAWes53oRHZUK4Rkq8Gxp4roXgAAOw\x3d\x3d",includes:["Browser","Person","ProfilePicture","X"]},$ClipartSection:{id:"Clipart",name:"Clip Art",iconBase64:"data:image/gif;base64,R0lGODlhEAAQAKIAAFhYWtXV1v///0BAQP///wAAAAAAAAAAACH5BAEAAAQALAAAAAAQABAAAAMuSLo0w5CNIF6EM9grN2+Z82WCEGjcVJbopa5tlJ2nh4W2XH9LyCu+X/AHAPyOCQA7",
subsections:"$ClipartSection_Arrows $ClipartSection_Community $ClipartSection_Devices $ClipartSection_DeviceSilhouettes $ClipartSection_Media $ClipartSection_UserInterfaceControls $ClipartSection_UserInterfaceIcons $ClipartSection_Other".split(" ")},$DrawingToolsSection:{id:"DrawingTools",name:"Drawing Tools",iconBase64:"data:image/gif;base64,R0lGODlhEAAQAKIAAL+/v5aWlmNjYzMzMxwcHBYWFv///wAAACH5BAEAAAYALAAAAAAQABAAAAMgaLrc/jBKFsBcg9g7iuaFZwlhaZrD1Ikqq35Xdc10PScAOw\x3d\x3d",includes:"Text Line Arrow Polyline PolylineArrow Circle Rectangle RoundedRectangle".split(" ")},
$ViewsSection:{id:"Views",name:"Views",_COMMENT1_:"Mobile-only view widgets, often representing a single screen of UI",iconBase64:"data:image/gif;base64,R0lGODlhEAAQANUAAC5KhTFOiPj6/jJRijRTjTRUjTdXkTdXkLrH3+Hp+OHp9zdakzZYkDdYkDlbkzlck97o+ODp+N/o9ztflj5km/L2/Pj6/T5mnD9mnT5lm0FqoENupENuo0Ruo0ZxpvL2+0l3rEl4rEh2qkl3q0l2qk6BtE1+sU+BtFCDtVCFt1CEtlSLvVOJulOHuVaOv7nW78/t+////////wAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAACH5BAEAADIALAAAAAAQABAAAAaAQJlwSCwKXcikcilzxZ5QaApGVclWMUAWMFhgYiRYACGStaJoDKzyuchQr7hc3jAwGAeZCR1lKRIRLDIjWVtdXyUSEhAnMh58UCCKECEyGnOYHRsbHBwyFJBPGVQwFDIThQBcXjEOYggOMg+hMQUwFgIEsg+8vb0BwMBGw8TFQkEAOw\x3d\x3d",
includes:[]},$HeadingSection:{id:"Heading, Section Labels",name:"Heading",_COMMENT1_:"Mobile-only Heading widgets, often titles at top of a screen",iconBase64:"data:image/gif;base64,R0lGODlhEAAQAMQAAEh1qkd2q0d2qkh2q0h2qkt7r0t8r0+BtU6CtFGGuVGHuVSLvFaNv1WLvKzM6a3M6a3M6LfS7DJlklaOv4y64Iy635zD5J3E5KzN6azM6IK13Iy734273////////wAAACH5BAEAAB4ALAAAAAAQABAAAAVQoCeOZGmeaKqqU+u+LdN6U2Tf+D15S5ZJwIzjgXFkIJmGJ2GRtCSbTWc6vSg8hw0HCN1UKFotwlPQmM/os8FDIADcgYGAIJgD3qu8fs/nhwAAOw\x3d\x3d",includes:[]},$ContainersSection_Dojo:{id:"ContainersSection_Dojo",
name:"Dojo",iconBase64:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAACXBIWXMAAAsTAAALEwEAmpwYAAAKT2lDQ1BQaG90b3Nob3AgSUNDIHByb2ZpbGUAAHjanVNnVFPpFj333vRCS4iAlEtvUhUIIFJCi4AUkSYqIQkQSoghodkVUcERRUUEG8igiAOOjoCMFVEsDIoK2AfkIaKOg6OIisr74Xuja9a89+bN/rXXPues852zzwfACAyWSDNRNYAMqUIeEeCDx8TG4eQuQIEKJHAAEAizZCFz/SMBAPh+PDwrIsAHvgABeNMLCADATZvAMByH/w/qQplcAYCEAcB0kThLCIAUAEB6jkKmAEBGAYCdmCZTAKAEAGDLY2LjAFAtAGAnf+bTAICd+Jl7AQBblCEVAaCRACATZYhEAGg7AKzPVopFAFgwABRmS8Q5ANgtADBJV2ZIALC3AMDOEAuyAAgMADBRiIUpAAR7AGDIIyN4AISZABRG8lc88SuuEOcqAAB4mbI8uSQ5RYFbCC1xB1dXLh4ozkkXKxQ2YQJhmkAuwnmZGTKBNA/g88wAAKCRFRHgg/P9eM4Ors7ONo62Dl8t6r8G/yJiYuP+5c+rcEAAAOF0ftH+LC+zGoA7BoBt/qIl7gRoXgugdfeLZrIPQLUAoOnaV/Nw+H48PEWhkLnZ2eXk5NhKxEJbYcpXff5nwl/AV/1s+X48/Pf14L7iJIEyXYFHBPjgwsz0TKUcz5IJhGLc5o9H/LcL//wd0yLESWK5WCoU41EScY5EmozzMqUiiUKSKcUl0v9k4t8s+wM+3zUAsGo+AXuRLahdYwP2SycQWHTA4vcAAPK7b8HUKAgDgGiD4c93/+8//UegJQCAZkmScQAAXkQkLlTKsz/HCAAARKCBKrBBG/TBGCzABhzBBdzBC/xgNoRCJMTCQhBCCmSAHHJgKayCQiiGzbAdKmAv1EAdNMBRaIaTcA4uwlW4Dj1wD/phCJ7BKLyBCQRByAgTYSHaiAFiilgjjggXmYX4IcFIBBKLJCDJiBRRIkuRNUgxUopUIFVIHfI9cgI5h1xGupE7yAAygvyGvEcxlIGyUT3UDLVDuag3GoRGogvQZHQxmo8WoJvQcrQaPYw2oefQq2gP2o8+Q8cwwOgYBzPEbDAuxsNCsTgsCZNjy7EirAyrxhqwVqwDu4n1Y8+xdwQSgUXACTYEd0IgYR5BSFhMWE7YSKggHCQ0EdoJNwkDhFHCJyKTqEu0JroR+cQYYjIxh1hILCPWEo8TLxB7iEPENyQSiUMyJ7mQAkmxpFTSEtJG0m5SI+ksqZs0SBojk8naZGuyBzmULCAryIXkneTD5DPkG+Qh8lsKnWJAcaT4U+IoUspqShnlEOU05QZlmDJBVaOaUt2ooVQRNY9aQq2htlKvUYeoEzR1mjnNgxZJS6WtopXTGmgXaPdpr+h0uhHdlR5Ol9BX0svpR+iX6AP0dwwNhhWDx4hnKBmbGAcYZxl3GK+YTKYZ04sZx1QwNzHrmOeZD5lvVVgqtip8FZHKCpVKlSaVGyovVKmqpqreqgtV81XLVI+pXlN9rkZVM1PjqQnUlqtVqp1Q61MbU2epO6iHqmeob1Q/pH5Z/YkGWcNMw09DpFGgsV/jvMYgC2MZs3gsIWsNq4Z1gTXEJrHN2Xx2KruY/R27iz2qqaE5QzNKM1ezUvOUZj8H45hx+Jx0TgnnKKeX836K3hTvKeIpG6Y0TLkxZVxrqpaXllirSKtRq0frvTau7aedpr1Fu1n7gQ5Bx0onXCdHZ4/OBZ3nU9lT3acKpxZNPTr1ri6qa6UbobtEd79up+6Ynr5egJ5Mb6feeb3n+hx9L/1U/W36p/VHDFgGswwkBtsMzhg8xTVxbzwdL8fb8VFDXcNAQ6VhlWGX4YSRudE8o9VGjUYPjGnGXOMk423GbcajJgYmISZLTepN7ppSTbmmKaY7TDtMx83MzaLN1pk1mz0x1zLnm+eb15vft2BaeFostqi2uGVJsuRaplnutrxuhVo5WaVYVVpds0atna0l1rutu6cRp7lOk06rntZnw7Dxtsm2qbcZsOXYBtuutm22fWFnYhdnt8Wuw+6TvZN9un2N/T0HDYfZDqsdWh1+c7RyFDpWOt6azpzuP33F9JbpL2dYzxDP2DPjthPLKcRpnVOb00dnF2e5c4PziIuJS4LLLpc+Lpsbxt3IveRKdPVxXeF60vWdm7Obwu2o26/uNu5p7ofcn8w0nymeWTNz0MPIQ+BR5dE/C5+VMGvfrH5PQ0+BZ7XnIy9jL5FXrdewt6V3qvdh7xc+9j5yn+M+4zw33jLeWV/MN8C3yLfLT8Nvnl+F30N/I/9k/3r/0QCngCUBZwOJgUGBWwL7+Hp8Ib+OPzrbZfay2e1BjKC5QRVBj4KtguXBrSFoyOyQrSH355jOkc5pDoVQfujW0Adh5mGLw34MJ4WHhVeGP45wiFga0TGXNXfR3ENz30T6RJZE3ptnMU85ry1KNSo+qi5qPNo3ujS6P8YuZlnM1VidWElsSxw5LiquNm5svt/87fOH4p3iC+N7F5gvyF1weaHOwvSFpxapLhIsOpZATIhOOJTwQRAqqBaMJfITdyWOCnnCHcJnIi/RNtGI2ENcKh5O8kgqTXqS7JG8NXkkxTOlLOW5hCepkLxMDUzdmzqeFpp2IG0yPTq9MYOSkZBxQqohTZO2Z+pn5mZ2y6xlhbL+xW6Lty8elQfJa7OQrAVZLQq2QqboVFoo1yoHsmdlV2a/zYnKOZarnivN7cyzytuQN5zvn//tEsIS4ZK2pYZLVy0dWOa9rGo5sjxxedsK4xUFK4ZWBqw8uIq2Km3VT6vtV5eufr0mek1rgV7ByoLBtQFr6wtVCuWFfevc1+1dT1gvWd+1YfqGnRs+FYmKrhTbF5cVf9go3HjlG4dvyr+Z3JS0qavEuWTPZtJm6ebeLZ5bDpaql+aXDm4N2dq0Dd9WtO319kXbL5fNKNu7g7ZDuaO/PLi8ZafJzs07P1SkVPRU+lQ27tLdtWHX+G7R7ht7vPY07NXbW7z3/T7JvttVAVVN1WbVZftJ+7P3P66Jqun4lvttXa1ObXHtxwPSA/0HIw6217nU1R3SPVRSj9Yr60cOxx++/p3vdy0NNg1VjZzG4iNwRHnk6fcJ3/ceDTradox7rOEH0x92HWcdL2pCmvKaRptTmvtbYlu6T8w+0dbq3nr8R9sfD5w0PFl5SvNUyWna6YLTk2fyz4ydlZ19fi753GDborZ752PO32oPb++6EHTh0kX/i+c7vDvOXPK4dPKy2+UTV7hXmq86X23qdOo8/pPTT8e7nLuarrlca7nuer21e2b36RueN87d9L158Rb/1tWeOT3dvfN6b/fF9/XfFt1+cif9zsu72Xcn7q28T7xf9EDtQdlD3YfVP1v+3Njv3H9qwHeg89HcR/cGhYPP/pH1jw9DBY+Zj8uGDYbrnjg+OTniP3L96fynQ89kzyaeF/6i/suuFxYvfvjV69fO0ZjRoZfyl5O/bXyl/erA6xmv28bCxh6+yXgzMV70VvvtwXfcdx3vo98PT+R8IH8o/2j5sfVT0Kf7kxmTk/8EA5jz/GMzLdsAAAAgY0hSTQAAeiUAAICDAAD5/wAAgOkAAHUwAADqYAAAOpgAABdvkl/FRgAAAg9JREFUeNp8ks1rE0EYxn9bE/xqikI0lITiQW+VImoONmCQtoonUbAglFDEUtlLxdo/wUNRD0Iw1kOIEmj6D9ir2FRQi4j0lILQJoimRfJB9mNmOx42iWsT+8Iw7DwPv32feUdTSuGtyeQKaT3GZHJlGEgA40AOyKT1WL6lt0rbC2hC9IFg7/a1c5HAib5Dc+WqOb/8pVjb3K4H03os6fVqXToYHgj2RiYun34KhD1S6c27jYeb2/ViWo/lW4c9dFYiPtgfMIQTNoRDw3YwbIeGcMLxwf5AM1a7fF0A436fL15pSNAUGqCUhqYp/P4Dc0AImNoPkNvaqX8MHDn4SkOBiwA0Kg1rHoh6zd0iZD4VyrWaKUpVQ1I1bSqGpGKI0udCuQZk/gu4+XhZpfXY2amRM88vnjq2vlMz7xn2biF41L8+FAl8f5a4cFw4u/mrj3KqK0BYNkDqzv3UyR6N32uFn9H334qhtY1fhyf0lzEgVd76oQDaEKVUe43NLirP97Rnn97rG5tdRCnldrCw9EFd0TNKNEwARmayCkg1tRdAavRBVo3OZAFwpMQR8m+E12+/YjcMzW4CpBsFF7AKgG1aCNM9l4bd9vjc7FZ73gDCtDpGIw27Oc5/9R6AuzeiSFsqRwjX7DH0hYK0fiKbHSSuDyEtq/MSu63zt56o/fRuL5HWxS4srTJ1+xL71Z8BAL+kU+9a36VRAAAAAElFTkSuQmCC",
includes:[]},$ContainersSection_HTML:{id:"ContainersSection_HTML",name:"HTML",iconBase64:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyBpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuMC1jMDYwIDYxLjEzNDc3NywgMjAxMC8wMi8xMi0xNzozMjowMCAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENTNSBXaW5kb3dzIiB4bXBNTTpJbnN0YW5jZUlEPSJ4bXAuaWlkOjVFNUZFNTNBNTk0QjExRTBBNkY0ODEzNDdCMzkxNTdDIiB4bXBNTTpEb2N1bWVudElEPSJ4bXAuZGlkOjVFNUZFNTNCNTk0QjExRTBBNkY0ODEzNDdCMzkxNTdDIj4gPHhtcE1NOkRlcml2ZWRGcm9tIHN0UmVmOmluc3RhbmNlSUQ9InhtcC5paWQ6NUU1RkU1Mzg1OTRCMTFFMEE2RjQ4MTM0N0IzOTE1N0MiIHN0UmVmOmRvY3VtZW50SUQ9InhtcC5kaWQ6NUU1RkU1Mzk1OTRCMTFFMEE2RjQ4MTM0N0IzOTE1N0MiLz4gPC9yZGY6RGVzY3JpcHRpb24+IDwvcmRmOlJERj4gPC94OnhtcG1ldGE+IDw/eHBhY2tldCBlbmQ9InIiPz5wB++kAAABAklEQVR42qRToQ7CMBC9LYhK5Bz9AyaHYhIHEomcYxI5iRwOOYkcDgkKWxxyuElwnSq5hpJ2tAvJXnK5vuvd60u7eUII6IOBTo67SafafH31foroQEWZR8IFVibis2/M+G3BV9NYTydkCJSGPy59WzOKtMMlYghUTwLsXsMsLQA4yIwc10GUyaBxLvusAuGigM3+BHFIJceMnFW182K/ApfbQ6jhdBnjoTLrIljjLgF9WIcu0ulgm8zgzCrID2ejATnWcV+htt3BdDzydBHOzWEaBLLGucMB4lQkXycIffivTxmBzYdsJdcqd8GHnmg5ILDfLrXHIpaHIwbz+v7ObwEGADGQtFOesBZAAAAAAElFTkSuQmCC",
includes:["\x3ca\x3e","\x3cdiv\x3e","\x3cspan\x3e","\x3ctable\x3e","\x3cstyle\x3e"]},$ContainersSection:{id:"Containers",name:"Containers",_COMMENT1_:"Desktop and mobile containers",_COMMENT2_:"Note that default desktop preset only include desktop widgets",_COMMENT3_:"and mobile preset only include mobile widgets",iconBase64:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAARJJREFUeNqkUzFuhEAMNFHqHAUEiU9Q0PKS3BNo6O9aJMQDqHkM4iG05CJdGgpgfXhvvVqyECHdSNaO7PWMsRYHEaGua+z7Hgi+7wPzLZh14kACZVniPM8yTM4xTZMOqpv8nZSEENqB+e/9DmIRJ6A6Xddd3aW8FFhcrFE/TifdaEHllymeAkQYQRBAURS7OwjDEFh2U6DrOrheLrDjDXmea64FxnHU4w7DIJt/bt+AAtVenqf36cs6/DcBc2piAUSxriszMn6DF2FNcAR45BM8z9tc5N+7lkAURZBl2a57HMe2gHxIajFt20JVVasHY06Spimcv87AfS8v0eG/sWkamUiSBJhvwawTd3bf+0E8BBgAL2nsdz3dOk4AAAAASUVORK5CYII\x3d",
subsections:["$ContainersSection_HTML"]},$ControlsSection_Buttons:{id:"Buttons",name:"Buttons",iconBase64:"data:image/gif;base64,R0lGODlhEAAQANUAAC5KhTFPijZXkDZYkDxhmTtimUJsouHr9/D1+0h2q0l3q7XQ7bbQ7bbQ7MLX79vo9k6AtE6Bs6TH6bbR7NLj9FKJu1OJulaNv5C95aTH6KTI6LXR7L/Z8Mje8laOv36z4X604JC95LnW77/a8Nzr9////wAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAACH5BAEAACUALAAAAAAQABAAAAZiwJJwSCwaj8hk0cP0XJpQj9ByqFqvVUSlFDk4vuCw4wApKR6MxmLCbm8mj0TJQNFI7nh8hmIoFTohGIKDgyEdBCUDHCAfHyCPkI0jAiUBIpeYmZckAUIAn6ChoEqkpaanRUEAOw\x3d\x3d",
includes:[["Button","\x3cbutton\x3e"]]},$ControlsSection_CheckboxesRadios:{id:"CheckboxesRadios",name:"Checkboxes, RadioButtons, Switch",iconBase64:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAP9JREFUeNpi/P//P8PGnQf/M5AJWGAMf3d7kjUDLUYYAAITd94kWnO+uzqqC2DAQkGAgYEDwpbg4ICLv/jxA8IAUicefMD0Agw8+ABRCNL7geEHXBwkHG4uD2avuPAAtwEQS4Cqf3DAtX8A2p5urw6Xv3DjBZzNhMuPP6Da0TUHdu5ksNCQwG0ASEO8uToYv/iAqtmxcSODAjCMBAQ48BuAHtIwzQZAmzUkBIBhzIHfCyBnIgNkzQJIMYPVAJACkDNBmghpxhoLEkD/CXBIgBUXzjzI4GCgAHE2B4GkDE8HLxDpQACq8cWHH4TzAnqgkZyZQBmDHMAIys6UAIAAAwBz81X4fS5oMgAAAABJRU5ErkJggg\x3d\x3d",
includes:[]},$ControlsSection_IconContainer:{id:"IconContainer",name:"IconContainer",_COMMENT1_:"Mobile-only",iconBase64:"data:image/gif;base64,R0lGODlhEAAQAMQAACVLiiVLiDlck/P2+zxhlzpppj9mnDh3xUJtokdzp3ak21ON0FCDvEp6rU6As1SKvFaOv////wAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAACH5BAEAABEALAAAAAAQABAAAAVoYBRBZGmWIjSsbMtC0TMo9FzTyvBEzrD8PuBvMXBEGoODMrlUHgaNSMJFXSUiiAGgwNByvV1ExFClGiIEWw6nHhAigiBxKB8I4MynM2/Hl1t3cQFfg12FfXF/LHdwAo6PkI4ik5SVkyEAOw\x3d\x3d",includes:[]},$ControlsSection_Pickers:{id:"Pickers",
name:"Pickers",iconBase64:"data:image/gif;base64,R0lGODlhEAAQANUAAKFMUiI5ZjxsuTlckz1jmj1jmVyL0T1kmUNvpERvpERuo0Rvo16W2jx7wEeO4Et7r0x7r26ayUt8r0x8rqrS+lGHuVKHuZXN/1aOv6u7yJypq+38++v6+aiysJ6uqWpNK5RcON6CV+esnbq2tf/X0t26tuxmXtaJhL+Zmf///wAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAACH5BAEAACkALAAAAAAQABAAAAZswJRwSCwSA8YhUrlMBpbPpjEqfCarUmlRezVivmBMKgweXyIMgUGMOafXKcvog2o4LKnKvH5PTUIgIh0UECkPgIIUEikLGQAnGxoJKQiOkBoKKQUcJSYkHgUpBJyeHgcpA6mqA6irqV2wsUJBADs\x3d",
includes:[]},$ControlsSection_Select:{id:"Select",name:"Select",iconBase64:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAVJJREFUeNpi/P//PwMlgAVEhPcf+E+RAb++fWeoz3QlqLhxxh6G+gwXBH/6bgYmEOPHp69gAVGGvwxijH8ZhP/9AbNhWJwRgn9+/AxWl5TYy/D61hOgvi8QF3z/8Akswc/JjGLjfwZGMM0IZIHY3z5ADDi4ogQs+23+XgZGUCBaRE4EByUjRBeUATOEASoANe4/0DhGqOh/aBjIm+kzfn37/n+IkxZJAbhm3zWIAX9//WHg4OVlMDBQZhD6+5doA7aceQQx4M/PnwywePRN6IVEDzsrAysnJwMHDxcDGxCDaFZODoZJqfZwA/78+AWLxh9wf+9cWkK0C359/wEx4DeQAXOBe3QPXhfAwKwsJ3D6gSckmAGHV5cT7YLf36AuADkFBmxDO4lyweJCZ7DLIbEADIz/0DA4vaGSeBcA9YETkpF/JyLNMGBJTXgAI6XZGSDAAJsyjhMJL+H/AAAAAElFTkSuQmCC",
includes:["Select","\x3cselect\x3e"]},$ControlsSection_SlidersSpinners:{id:"SlidersSpinners",name:"Sliders, Spinners",iconBase64:"data:image/gif;base64,R0lGODlhEAAQANUAAM7W5DdYkDteljpfloOcwUBonkBonUFonkdzqEdzp3CUv+Tt+EZzp9Xk9Njm9dvo9kx+sU1+sZ/E6K3M68re8tDh89fm9VKHuYO14pC95ZG95Z/F6KzM663N68ne8tDi89Xl9FaOv4O24pG+5aDJ6tXj76nR7v///wAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAACH5BAEAACcALAAAAAAQABAAAAZZwJNwSCwaj8ikcjkMOZ/J0KJBbSxCyMtnwulMPpdiKcSIUDZoiSfCCJWEERIB8RhpMppHglCBCA0mJgoHFiIYDgYKgQVCAAGPAQIgIAOQAQBIj0ybnJ2eJ0EAOw\x3d\x3d",
includes:[]},$ControlsSection_TextBox:{id:"TextBox",name:"TextBox",iconBase64:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAM1JREFUeNpi/P//PwMlgImBQkCxASzIHIvIif/lzfQZHp66yHBieT4jUSaAwgAZm0dM+I8uhg+DXRDefwAckqGWCmBD15x48H/18QcELV9Z6MAINuDPz98MtWmODBKcTAw9QL6NvhyDipoMXs0ts/chwuD39+9gDjfDfzgtyvAXe6hDQ+bXtx8IA94+eArmsLMywml+Bmbc4cbAyPD24VOEAX9//WLIyJ7KkBJiARZctPE0w5w1JxjoEgtM2NIBiCY2ITEO/bxAsQEAAQYAGVGarS2fPq4AAAAASUVORK5CYII\x3d",
includes:[["TextBox","\x3cinput\x3e"]]},$ControlsSection_Toolbars:{id:"Toolbars",name:"Toolbars, ButtonBars",iconBase64:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAOtJREFUeNpi/P//PwMlgAVEhPcf+E+RAX9+/mKoTXMiWXPTzH0MTCDGzy9f4YIxmZOIokHg19dvDIygMHAtWPq/vjQYLPgfCHecf8ngaSTOsP0cHtpQgqGxey3ECyCT3n/9CdINNsJCTZDh/ZdfcNoSRH9G8C1UBYDqfyBcYJowg7JAlJCVYGgu9CFZc+2ErRAD/v39BxZQ4STNgL9//kBi4R+QQQ749+cvzIC/ZBoAdcFfSl3w69t3sgwA6QMb8PsfeVH4599/aCwA00Jy2QIG5n+YJv1lYgKLw+h/QBqUaCBizJCERAkACDAAug6MMt3XrLUAAAAASUVORK5CYII\x3d",
includes:[]},$ControlsSection_Other:{id:"Other",name:"Other",iconBase64:"data:image/gif;base64,R0lGODlhEAAQANUAADlckzthmDxhl0BonkBonUVwpUp6rU+BtU+CtFOJu1OKu1aOv/b8//n9/8/t++/6//L7/+v5/+76//X8//j9/+v6/+77/+/7//L8//b9//X9//n+//j+///ovfvcsvTKofTJofbKo/TJo/TKo+20kOegfeeffuegfuWfff///wAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAACH5BAEAACkALAAAAAAQABAAAAZfwJRwSCwaj8ikUrloOp/QVIJErZIc2Kwiheh4v9dKpEI+pAyetPp6eVgsEkOq8AGNRKAQyoGB9DEFKQRWVHsTGgwaGQMpAiclJiYoJ3sNDRwbFAEpAJ2en6BLoqOkpEEAOw\x3d\x3d",
includes:[]},$ControlsSection:{id:"Controls",name:"Controls",_COMMENT1_:"each section can either have an array of subsections or an array of includes",iconBase64:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAIAAACQkWg2AAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyBpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuMC1jMDYwIDYxLjEzNDc3NywgMjAxMC8wMi8xMi0xNzozMjowMCAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENTNSBXaW5kb3dzIiB4bXBNTTpJbnN0YW5jZUlEPSJ4bXAuaWlkOjgyQUEwNTdCNTk1MTExRTBCODIzOTk0QzIzMzdBNkNGIiB4bXBNTTpEb2N1bWVudElEPSJ4bXAuZGlkOjgyQUEwNTdDNTk1MTExRTBCODIzOTk0QzIzMzdBNkNGIj4gPHhtcE1NOkRlcml2ZWRGcm9tIHN0UmVmOmluc3RhbmNlSUQ9InhtcC5paWQ6ODJBQTA1Nzk1OTUxMTFFMEI4MjM5OTRDMjMzN0E2Q0YiIHN0UmVmOmRvY3VtZW50SUQ9InhtcC5kaWQ6ODJBQTA1N0E1OTUxMTFFMEI4MjM5OTRDMjMzN0E2Q0YiLz4gPC9yZGY6RGVzY3JpcHRpb24+IDwvcmRmOlJERj4gPC94OnhtcG1ldGE+IDw/eHBhY2tldCBlbmQ9InIiPz7ZOYfnAAABBUlEQVR42pRSKxCDMAztdgjkJBKJnKxETk5WIpGTlcjKykpk5SSyEolETk4iI9eRrpSud7tF5NK8vHweHHoz38cHSdmVlhFkM5lN9W2dJDTKRJDNZBgxrum5oOdynB7j9NSC+aJhXjC4VCfrHQErLO0dsN2cBUDwjosOn0fyy2y19+8JsMDWjMA3QSkRPjMCW9GJ5CFWFzllu+qW1RmsXfHoW0OlNv7oYX52XRsS+rtVCbajrdGq9EeH2/rMQfZGaRPNxYwPdivpYRo1D8W+tAo3kVJ/Q+478Bt32UH5PSAFHWFVqVllRr/ploLc0VWRCyl2nT9BBDlZ8T8hKUYE/a3SS4ABAP4rm5Sxt9t9AAAAAElFTkSuQmCC",
subsections:"$ControlsSection_Buttons $ControlsSection_CheckboxesRadios $ControlsSection_Pickers $ControlsSection_Select $ControlsSection_TextBox $ControlsSection_Toolbars $ControlsSection_Other".split(" ")},$HTMLSection_Common:{id:"Common",name:"Common",iconBase64:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAALNJREFUeNpi/P//P4NUxvb/DGQCFhjj2QxPkjUDLWZgYqAQgA34//8fmNO74TIcwwCMjU2MAagPbADTv79wyeIAXTBG1oALMAL1gcOA8f9vgoqRDQWxIfr+QF3w9w95/v/7C+qCf78x/AezBa8XgC5gAKUDhZh5/8kBIH3QQPxNlhdALqdOOmD8+5vMQIS6gPH/X/K8ANQHDQMyoxEYC9CE9I9BI6SHdBeA9f7/T1EgAgQYAMdnhUefY5wVAAAAAElFTkSuQmCC",
includes:["\x3ca\x3e","\x3cdiv\x3e","\x3clabel\x3e","\x3cspan\x3e","\x3cstyle\x3e"]},$HTMLSection_Forms:{id:"Forms",name:"Forms",iconBase64:"data:image/png;base64,R0lGODlhEAAQAOYAAPT2/PH0+/n6/Iaavoyfwt/o+OLq+Onv+pOmxt/o9+bt+N7k7unv+e3y+sbT59/p+OLr+PD0+t/p9/D1+/f5+5DDvKfMxgBZSqfNxgJbSqjNxqjMxQZeSqjNxQZfSgpiSgphSg9mSrXSyRNrShNqSb3Vy5zKtp3Ktr3Wy5zKtZ3KtR1zSaDMtSJ3ScTYzSZ6SSZ7SSl+SSl9SSp+SSp9SaTNtCyASXt0T392ToV5TIx8SpOASKOIQ5yEReDIj97WwbSQPbCOPquLQNSyaNSyadq9fObav9Wyaf///////wAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAACH5BAEAAEkALAAAAAAQABAAAAeQgEmCg4SFhoeIhECLi4g2NklASEgCRECHNi40RpMURUdBgjAxMzIzKCUvSAgAPkVDQkktIrS1Ii0RExERATxJKx0bGhYdGMIrDgQDDT1JJBXQ0dAjDAwHDDtJISYnKSom3CEOCMoKOkkgHOoeLCwfCxAG8hA5hRk1HD8J+w8SBTiFLlxIcqOgwYKJEipcaCgQADs\x3d",
includes:"\x3cbutton\x3e \x3cfieldset\x3e \x3cform\x3e \x3cinput\x3e \x3cselect\x3e \x3ctextarea\x3e".split(" ")},$HTMLSection_Headers:{id:"Headers",name:"Headers",iconBase64:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAIpJREFUeNpi/P//PwMlgImBQkCxASwggtW3bzeQcgFiVx5NrT0gsS/Xr2GIwQBQbiaQSgPJkewCoOZyqGaEC4jUqASkQK5SIjcMlKC4Aoj34HLBbqBNuAy4B8TKwPC4B1TjgsuAs0D8Hso2BmJBmARIIzHRWAFUCAp1V6hhQyAhUWwA49DPTAABBgDGmykkJRol4AAAAABJRU5ErkJggg\x3d\x3d",
includes:["\x3ch1\x3e","\x3ch2\x3e","\x3ch3\x3e"]},$HTMLSection_ImagesMediaIframes:{id:"ImagesMediaIframes",name:"Media",iconBase64:"data:image/gif;base64,R0lGODlhEAAQANUAAOnn6f////7+/v39/fz8/Pr6+vn5+ff39/X19fT09PLy8vHx8e/v7+fn59/f397e3tvb29bW1sfHx8LCwsHBwby8vLq6urm5uba2trS0tLKysq2traKioqCgoJycnJSUlJKSkpGRkYuLi4qKiomJiYSEhHh4eHV1dXR0dGlpaWhoaFxcXP///wAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAACH5BAEAACwALAAAAAAQABAAAAaPQBYLNAQZjcJk0mgJOBeEkXI5jEwmHMJCNC1uIBNKxzTwEJWhocPxkAQIBgY3+QFpAJTJxnRarU5KRCANVxkcFygsJIEfGAx5eQoZSFQgCQkIlwREaUsgFwdXYQIXlEJpIAWiFAEfQ4EgFQFheQEWpq8gTrsBnLBNkBO2dWhDsxTIrSydQioqKc7P0iolQkEAOw\x3d\x3d",
includes:["\x3caudio\x3e","\x3cembed\x3e","\x3cimg\x3e","\x3ciframe\x3e","\x3cvideo\x3e"]},$HTMLSection_ParagraphsFormatting:{id:"ParagraphsFormatting",name:"Paragraphs",iconBase64:"data:image/gif;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAIAAACQkWg2AAAACXBIWXMAAAsTAAALEwEAmpwYAAAKT2lDQ1BQaG90b3Nob3AgSUNDIHByb2ZpbGUAAHjanVNnVFPpFj333vRCS4iAlEtvUhUIIFJCi4AUkSYqIQkQSoghodkVUcERRUUEG8igiAOOjoCMFVEsDIoK2AfkIaKOg6OIisr74Xuja9a89+bN/rXXPues852zzwfACAyWSDNRNYAMqUIeEeCDx8TG4eQuQIEKJHAAEAizZCFz/SMBAPh+PDwrIsAHvgABeNMLCADATZvAMByH/w/qQplcAYCEAcB0kThLCIAUAEB6jkKmAEBGAYCdmCZTAKAEAGDLY2LjAFAtAGAnf+bTAICd+Jl7AQBblCEVAaCRACATZYhEAGg7AKzPVopFAFgwABRmS8Q5ANgtADBJV2ZIALC3AMDOEAuyAAgMADBRiIUpAAR7AGDIIyN4AISZABRG8lc88SuuEOcqAAB4mbI8uSQ5RYFbCC1xB1dXLh4ozkkXKxQ2YQJhmkAuwnmZGTKBNA/g88wAAKCRFRHgg/P9eM4Ors7ONo62Dl8t6r8G/yJiYuP+5c+rcEAAAOF0ftH+LC+zGoA7BoBt/qIl7gRoXgugdfeLZrIPQLUAoOnaV/Nw+H48PEWhkLnZ2eXk5NhKxEJbYcpXff5nwl/AV/1s+X48/Pf14L7iJIEyXYFHBPjgwsz0TKUcz5IJhGLc5o9H/LcL//wd0yLESWK5WCoU41EScY5EmozzMqUiiUKSKcUl0v9k4t8s+wM+3zUAsGo+AXuRLahdYwP2SycQWHTA4vcAAPK7b8HUKAgDgGiD4c93/+8//UegJQCAZkmScQAAXkQkLlTKsz/HCAAARKCBKrBBG/TBGCzABhzBBdzBC/xgNoRCJMTCQhBCCmSAHHJgKayCQiiGzbAdKmAv1EAdNMBRaIaTcA4uwlW4Dj1wD/phCJ7BKLyBCQRByAgTYSHaiAFiilgjjggXmYX4IcFIBBKLJCDJiBRRIkuRNUgxUopUIFVIHfI9cgI5h1xGupE7yAAygvyGvEcxlIGyUT3UDLVDuag3GoRGogvQZHQxmo8WoJvQcrQaPYw2oefQq2gP2o8+Q8cwwOgYBzPEbDAuxsNCsTgsCZNjy7EirAyrxhqwVqwDu4n1Y8+xdwQSgUXACTYEd0IgYR5BSFhMWE7YSKggHCQ0EdoJNwkDhFHCJyKTqEu0JroR+cQYYjIxh1hILCPWEo8TLxB7iEPENyQSiUMyJ7mQAkmxpFTSEtJG0m5SI+ksqZs0SBojk8naZGuyBzmULCAryIXkneTD5DPkG+Qh8lsKnWJAcaT4U+IoUspqShnlEOU05QZlmDJBVaOaUt2ooVQRNY9aQq2htlKvUYeoEzR1mjnNgxZJS6WtopXTGmgXaPdpr+h0uhHdlR5Ol9BX0svpR+iX6AP0dwwNhhWDx4hnKBmbGAcYZxl3GK+YTKYZ04sZx1QwNzHrmOeZD5lvVVgqtip8FZHKCpVKlSaVGyovVKmqpqreqgtV81XLVI+pXlN9rkZVM1PjqQnUlqtVqp1Q61MbU2epO6iHqmeob1Q/pH5Z/YkGWcNMw09DpFGgsV/jvMYgC2MZs3gsIWsNq4Z1gTXEJrHN2Xx2KruY/R27iz2qqaE5QzNKM1ezUvOUZj8H45hx+Jx0TgnnKKeX836K3hTvKeIpG6Y0TLkxZVxrqpaXllirSKtRq0frvTau7aedpr1Fu1n7gQ5Bx0onXCdHZ4/OBZ3nU9lT3acKpxZNPTr1ri6qa6UbobtEd79up+6Ynr5egJ5Mb6feeb3n+hx9L/1U/W36p/VHDFgGswwkBtsMzhg8xTVxbzwdL8fb8VFDXcNAQ6VhlWGX4YSRudE8o9VGjUYPjGnGXOMk423GbcajJgYmISZLTepN7ppSTbmmKaY7TDtMx83MzaLN1pk1mz0x1zLnm+eb15vft2BaeFostqi2uGVJsuRaplnutrxuhVo5WaVYVVpds0atna0l1rutu6cRp7lOk06rntZnw7Dxtsm2qbcZsOXYBtuutm22fWFnYhdnt8Wuw+6TvZN9un2N/T0HDYfZDqsdWh1+c7RyFDpWOt6azpzuP33F9JbpL2dYzxDP2DPjthPLKcRpnVOb00dnF2e5c4PziIuJS4LLLpc+Lpsbxt3IveRKdPVxXeF60vWdm7Obwu2o26/uNu5p7ofcn8w0nymeWTNz0MPIQ+BR5dE/C5+VMGvfrH5PQ0+BZ7XnIy9jL5FXrdewt6V3qvdh7xc+9j5yn+M+4zw33jLeWV/MN8C3yLfLT8Nvnl+F30N/I/9k/3r/0QCngCUBZwOJgUGBWwL7+Hp8Ib+OPzrbZfay2e1BjKC5QRVBj4KtguXBrSFoyOyQrSH355jOkc5pDoVQfujW0Adh5mGLw34MJ4WHhVeGP45wiFga0TGXNXfR3ENz30T6RJZE3ptnMU85ry1KNSo+qi5qPNo3ujS6P8YuZlnM1VidWElsSxw5LiquNm5svt/87fOH4p3iC+N7F5gvyF1weaHOwvSFpxapLhIsOpZATIhOOJTwQRAqqBaMJfITdyWOCnnCHcJnIi/RNtGI2ENcKh5O8kgqTXqS7JG8NXkkxTOlLOW5hCepkLxMDUzdmzqeFpp2IG0yPTq9MYOSkZBxQqohTZO2Z+pn5mZ2y6xlhbL+xW6Lty8elQfJa7OQrAVZLQq2QqboVFoo1yoHsmdlV2a/zYnKOZarnivN7cyzytuQN5zvn//tEsIS4ZK2pYZLVy0dWOa9rGo5sjxxedsK4xUFK4ZWBqw8uIq2Km3VT6vtV5eufr0mek1rgV7ByoLBtQFr6wtVCuWFfevc1+1dT1gvWd+1YfqGnRs+FYmKrhTbF5cVf9go3HjlG4dvyr+Z3JS0qavEuWTPZtJm6ebeLZ5bDpaql+aXDm4N2dq0Dd9WtO319kXbL5fNKNu7g7ZDuaO/PLi8ZafJzs07P1SkVPRU+lQ27tLdtWHX+G7R7ht7vPY07NXbW7z3/T7JvttVAVVN1WbVZftJ+7P3P66Jqun4lvttXa1ObXHtxwPSA/0HIw6217nU1R3SPVRSj9Yr60cOxx++/p3vdy0NNg1VjZzG4iNwRHnk6fcJ3/ceDTradox7rOEH0x92HWcdL2pCmvKaRptTmvtbYlu6T8w+0dbq3nr8R9sfD5w0PFl5SvNUyWna6YLTk2fyz4ydlZ19fi753GDborZ752PO32oPb++6EHTh0kX/i+c7vDvOXPK4dPKy2+UTV7hXmq86X23qdOo8/pPTT8e7nLuarrlca7nuer21e2b36RueN87d9L158Rb/1tWeOT3dvfN6b/fF9/XfFt1+cif9zsu72Xcn7q28T7xf9EDtQdlD3YfVP1v+3Njv3H9qwHeg89HcR/cGhYPP/pH1jw9DBY+Zj8uGDYbrnjg+OTniP3L96fynQ89kzyaeF/6i/suuFxYvfvjV69fO0ZjRoZfyl5O/bXyl/erA6xmv28bCxh6+yXgzMV70VvvtwXfcdx3vo98PT+R8IH8o/2j5sfVT0Kf7kxmTk/8EA5jz/GMzLdsAAAAEZ0FNQQAAsY58+1GTAAAAIGNIUk0AAHolAACAgwAA+f8AAIDpAAB1MAAA6mAAADqYAAAXb5JfxUYAAAHGSURBVHjaZFLJbhNREKx+b2Yc7xs2EEVZlEgR4oKEOHLiH/gEfokP4EM4I0UcEApCkYAoIDlWGC9je2ymFw4zA9jUqaWu6up6r+nT1XWn1QDAnMEU2/BB5HxoxjAAmM4XQb/TGtzrcBprfOXC2l8ugVnHox+9w6eN7kGhdy4QVQCrZB7WjqOykYMZy9E0vXg9fPKqOzgCIKou76kZs6w2WbL6laRZkmarDXNmlfqg2xvefngzGX/NbYNimkFU3328niTrMKrA+Ua18vzRg73W4ab20iq38eimOzwBSoGamWLQaVSj0PuAnAO591/uWG2/1z46aU++X+bMPw7GgpvxLJ4tgzByPiDnyXkxNKt7+83Iygd0JR/MCjgiclTAERHBDBmriG05qGrG+uLZuUk5oIQYVou5qm4JzCCii1QlYxBgAIEAGMg7EdUdBzMTsbcXn+N5EoYR+ZCcd96z4Pygd9orvuvfDMZS7GEglBUoNzfV3Qym8I/PjjebdZ4WRCAyo2atwpLuCgDcfbvsCwfCO6GXoFUyrQfrQuCdA/Dw+CyKIsDyRXZg9xvt/rA4vp/TuagSka8PczL9JyDQbC26jKezxe8BAJ6U+/2r7MIJAAAAAElFTkSuQmCC",
includes:"\x3cb\x3e \x3cbr\x3e \x3cem\x3e \x3chr\x3e \x3ci\x3e \x3cp\x3e \x3cs\x3e \x3cstrong\x3e \x3cu\x3e".split(" ")},$HTMLSection_Tables:{id:"Tables",name:"Tables",iconBase64:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAXhJREFUeNrEUz1LA0EQnTvzO/wPYsBOrQW109ImpLPIL9DWKqQQRESEFGKjYmGwEyQggUTBRn+BIhFFTXK53Z1xZi53ulcpKdxjmXnD7Lv39iMgIhhnhDDmKKTJavXyz1KOKvNBRkCIsFWe09wxFbI1iTEy5ppB0shB69v1K18BOdTYvHvUZm1k0oi7rUwhIIkAs8VJQESfwMQxVGoXv5Le7jxAwF/yZ2aVubRxRjKYmWJrqXZyQ/3I0HtvSG8fA8Xd1z49v/ToqftJi5va/30KJhqOyGQ/WL6xCcZkCkakrMcOopyFKGKvCGLNslFrDMTGqX8hECz7AKN7YwZDnwC5uXp47XndPW17uN64zXK0zidwzsH6yozKNKxg57gFpeUi11EtHZx3YG1hKiNoNO9zx8iMcjRigWQFYuJfVAMp/jmcRf8qG90sUAWoEWUZpG8FcwRICQ7ShunSniYToiIMIb3XguXELdcKnEtM6639chD8+2v8EmAA9/wqJKl9P7kAAAAASUVORK5CYII\x3d",
includes:["\x3ctable\x3e"]},$HTMLSection:{id:"HTML",name:"HTML",iconBase64:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyBpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuMC1jMDYwIDYxLjEzNDc3NywgMjAxMC8wMi8xMi0xNzozMjowMCAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENTNSBXaW5kb3dzIiB4bXBNTTpJbnN0YW5jZUlEPSJ4bXAuaWlkOjVFNUZFNTNBNTk0QjExRTBBNkY0ODEzNDdCMzkxNTdDIiB4bXBNTTpEb2N1bWVudElEPSJ4bXAuZGlkOjVFNUZFNTNCNTk0QjExRTBBNkY0ODEzNDdCMzkxNTdDIj4gPHhtcE1NOkRlcml2ZWRGcm9tIHN0UmVmOmluc3RhbmNlSUQ9InhtcC5paWQ6NUU1RkU1Mzg1OTRCMTFFMEE2RjQ4MTM0N0IzOTE1N0MiIHN0UmVmOmRvY3VtZW50SUQ9InhtcC5kaWQ6NUU1RkU1Mzk1OTRCMTFFMEE2RjQ4MTM0N0IzOTE1N0MiLz4gPC9yZGY6RGVzY3JpcHRpb24+IDwvcmRmOlJERj4gPC94OnhtcG1ldGE+IDw/eHBhY2tldCBlbmQ9InIiPz5wB++kAAABAklEQVR42qRToQ7CMBC9LYhK5Bz9AyaHYhIHEomcYxI5iRwOOYkcDgkKWxxyuElwnSq5hpJ2tAvJXnK5vuvd60u7eUII6IOBTo67SafafH31foroQEWZR8IFVibis2/M+G3BV9NYTydkCJSGPy59WzOKtMMlYghUTwLsXsMsLQA4yIwc10GUyaBxLvusAuGigM3+BHFIJceMnFW182K/ApfbQ6jhdBnjoTLrIljjLgF9WIcu0ulgm8zgzCrID2ejATnWcV+htt3BdDzydBHOzWEaBLLGucMB4lQkXycIffivTxmBzYdsJdcqd8GHnmg5ILDfLrXHIpaHIwbz+v7ObwEGADGQtFOesBZAAAAAAElFTkSuQmCC",
subsections:"$HTMLSection_Common $HTMLSection_Forms $HTMLSection_Headers $HTMLSection_ImagesMediaIframes $HTMLSection_ParagraphsFormatting $HTMLSection_Tables".split(" ")},$AppOtherSection:{id:"Other",name:"Other",iconBase64:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAcFJREFUeNqcUj1IQlEUPjfc+llqCEKwpaCgrJZqKOhnqiChsbQhF+f2moqgpaH2rDEqiiCwBB2sRbJArYa0hohSCLTQ93rvds95710VHaIDx/P5ne+ce869j3HOAW039MCPr9PwV5sddIBntJPZLAKLV+eHCDMpY2UlnP5bvyv7V9gA6qx04bMAmbwKmZwiXIWPvAI9bY0iFikSh7m8QhrUo9nKx8IknsTFGYyXcwDvohHDgbgxhWUVDbJfijE23osIO+Fnmnw79CKKzTJswEot5Aq+uV6Ix+6FJ8HewCESjJIjTtwmKWev5xAXOCEw6o2G4jR039Y5z+WK5H/FWCdX4HppLEykMtkqrJu4vaWZML2T9R2cRtP8LJygS5wa6QYDg8BdNbChmRlwMLmCd/NUjmfhu9Qr4enlALl384Q4S4N18hJ1XYeaWNMk1rRqTcUKR4Ebwq7JPiAsnss10Q9HFyY/YfKmpmKFpY0T/v2tkrvXDig+vWX54vohRXTUYMScR2gqXqGoFEqvYI7X2tQkxv6hSBq1IHHVCoHII/cHY/QJL4w7wX8ZI94t8J7gUYYYNcSPOWFyuIPJBv+1XwEGAJJgewSkj0bcAAAAAElFTkSuQmCC",
includes:["$$AllOthers$$"]},$SketchOtherSection:{id:"Other",name:"Other",iconBase64:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAcFJREFUeNqcUj1IQlEUPjfc+llqCEKwpaCgrJZqKOhnqiChsbQhF+f2moqgpaH2rDEqiiCwBB2sRbJArYa0hohSCLTQ93rvds95710VHaIDx/P5ne+ce869j3HOAW039MCPr9PwV5sddIBntJPZLAKLV+eHCDMpY2UlnP5bvyv7V9gA6qx04bMAmbwKmZwiXIWPvAI9bY0iFikSh7m8QhrUo9nKx8IknsTFGYyXcwDvohHDgbgxhWUVDbJfijE23osIO+Fnmnw79CKKzTJswEot5Aq+uV6Ix+6FJ8HewCESjJIjTtwmKWev5xAXOCEw6o2G4jR039Y5z+WK5H/FWCdX4HppLEykMtkqrJu4vaWZML2T9R2cRtP8LJygS5wa6QYDg8BdNbChmRlwMLmCd/NUjmfhu9Qr4enlALl384Q4S4N18hJ1XYeaWNMk1rRqTcUKR4Ebwq7JPiAsnss10Q9HFyY/YfKmpmKFpY0T/v2tkrvXDig+vWX54vohRXTUYMScR2gqXqGoFEqvYI7X2tQkxv6hSBq1IHHVCoHII/cHY/QJL4w7wX8ZI94t8J7gUYYYNcSPOWFyuIPJBv+1XwEGAJJgewSkj0bcAAAAAElFTkSuQmCC",
includes:"Calendar ColorPalette GridX RichText StickyNote Tree $$AllOthers$$".split(" ")},$mobileSections:"$ControlsSection $ContainersSection $HTMLSection $ClipartSection $XBLOXSection $DrawingToolsSection $AppOtherSection".split(" "),$desktopSections:"$ContainersSection $ControlsSection $ViewsSection $HeadingSection $HTMLSection $ClipartSection $XBLOXSection $DrawingToolsSection $AppOtherSection".split(" "),$sketchSections:"$DrawingToolsSection $ClipartSection $ControlsSection $ContainersSection $HTMLSection $HeadingSection $SketchOtherSection".split(" "),
$sketchExcludes:[],$ALLMOBILE_Sections:[],$ALLDESKTOP_Sections:"$ContainersSection $ControlsSection $ViewsSection $HeadingSection $HTMLSection $ClipartSection $XBLOXSection $DrawingToolsSection $AppOtherSection".split(" "),$deliteSections:["$HTMLSection","$XBLOXSection","$DELITESection"],$ALLDELITE_Sections:["$HTMLSection","$XBLOXSection","$DELITESection"],$DELITESection_Controls:{id:"delite",name:"Controls",iconBase64:"data:image/gif;base64,R0lGODlhEAAQALMAAN7e4oyMjtXV1sDAwf///+Dg4MvLyzMzM////wAAAAAAAAAAAAAAAAAAAAAAAAAAACH5BAEAAAgALAAAAAAQABAAAAQ3EMlJq704a3RO2NIhBIexHYRgeFTndkQ8HmER33g60EcB/ECcYBd6wWSkDErFUs5Mms4HRK1SIwA7",
includes:"Button Slider Combobox Select Checkbox RadioButton Switch ToggleButton MediaPlayer".split(" ")},$DELITESection_Containers:{id:"delite",name:"Containers",iconBase64:"data:image/gif;base64,R0lGODlhEAAQALMAAN7e4oyMjtXV1sDAwf///+Dg4MvLyzMzM////wAAAAAAAAAAAAAAAAAAAAAAAAAAACH5BAEAAAgALAAAAAAQABAAAAQ3EMlJq704a3RO2NIhBIexHYRgeFTndkQ8HmER33g60EcB/ECcYBd6wWSkDErFUs5Mms4HRK1SIwA7",includes:["ViewStack","Panel","TabBar","Accordion"]},$DELITESection:{id:"delite",name:"Deliteful",iconBase64:"data:image/gif;base64,R0lGODlhEAAQAKIAAFhYWtXV1v///0BAQP///wAAAAAAAAAAACH5BAEAAAQALAAAAAAQABAAAAMuSLo0w5CNIF6EM9grN2+Z82WCEGjcVJbopa5tlJ2nh4W2XH9LyCu+X/AHAPyOCQA7",
subsections:["$DELITESection_Controls","$DELITESection_Containers"],includes:[]}},_COMMENT11_:"Should have one each for mobile, desktop, sketchhifi, sketchlofi",_COMMENT12_:"For each preset, collections is list of each widget collection in order of precedence",_COMMENT13_:"and sections is the array of sections for this preset (or $desktopSections)",presets:{desktop:{collections:[{id:"html",show:!0},{id:"clipart",show:!0},{id:"xblox",show:!0},{id:"shapes",show:!0},{id:"delite",show:!0}],sections:"$desktopSections"},
delite:{collections:[{id:"html",show:!0},{id:"xblox",show:!0},{id:"delite",show:!0},{id:"shapes",show:!0},{id:"clipart",show:!0}],sections:"$deliteSections"},$ALLDESKTOP:{_COMMENT1_:"$ALLDESKTOP is a special preset which shows all widgets",_COMMENT2_:"regardless of the current composition type",_COMMENT3_:"ranking desktop widgets above mobile widgets",collections:[{id:"html",show:!0},{id:"clipart",show:!0},{id:"xblox",show:!0},{id:"shapes",show:!0}],sections:"$ALLDESKTOP_Sections"},$ALLDELITE:{_COMMENT1_:"$ALLDESKTOP is a special preset which shows all widgets",
_COMMENT2_:"regardless of the current composition type",_COMMENT3_:"ranking desktop widgets above mobile widgets",collections:[{id:"html",show:!0},{id:"clipart",show:!0},{id:"xblox",show:!0},{id:"shapes",show:!0},{id:"delite",show:!0}],sections:"$ALLDELITE_Sections"}}}:this._initializationInfo[a]},getDefaultThemeSet:function(){return this.getSiteConfigData("defaultThemeSet")},getUserDisplayName:function(a){a||(a=this.getUser());var h=a.userDisplayName;a.userDisplayName||(h=a.email);return h},getUserEmail:function(a){a||
(a=this.getUser());return a.email},getUserDisplayNamePlusEmail:function(a){a||(a=this.getUser());var h=this.getUserDisplayName(a);h!=a.email&&(h+=" \x26lt;"+a.email+"\x26gt;");return h},loadPlugins:function(){k.forEach(function(d){var h=d.id;a.plugins[h]=d;for(var b in d){var p=d[b];"string"!=typeof p&&(p instanceof Array?p.forEach(function(d){a._addExtension(b,d,h)}):a._addExtension(b,p,h))}})},singleUserMode:function(){return a.isLocalInstall},_stripMaqetta:!0,location:function(){var a=document.location.href.split("?")[0],
a=a.replace("index.php",""),a=a.replace("maqetta.html",""),a=a.replace("xui.php",""),a=a.replace("xui.php?debug\x3dtrue",""),a=a.replace("maqettar.html",""),a=a.replace("index.html",""),a=a.replace("?",""),a=a.replace("debug\x3dtrue",""),a=a.replace("\x26isDesktop\x3dtrue","");this._stripMaqetta&&(a=a.replace("maqetta/",""));return a},getUserWorkspaceUrl:function(){if(this.userBaseUrl)return this.userBaseUrl},run:function(){dojo.isMac&&dojo.addClass(document.documentElement,"isMac");var d=document.body.style;
a.supportsCSS3Transitions=void 0!==d.WebkitTransition||void 0!==d.MozTransition||void 0!==d.OTransition||void 0!==d.transition;a.subscribe("/davinci/ui/selectionChanged",a._selectionChanged);dojo.connect(dojo.doc.documentElement,"onkeypress",function(a){8==a.charOrCode&&(window.davinciBackspaceKeyTime=Date.now())});dojo.connect(dojo.doc.documentElement,"onkeydown",this,"_handleGlobalDocumentKeyEvent");dojo.addOnUnload(function(a){for(var b=null,h=davinci.Workbench&&davinci.Workbench.editorTabs?davinci.Workbench.editorTabs.getChildren():
[],d=0,f=0;f<h.length;f++){var c=h[f];c.editor&&(c=c.editor.getOnUnloadWarningMessage())&&(b||(b=c),d++)}1<d&&(b=dojo.string.substitute(n.multipleFilesUnsaved,[b,d]));!b&&100>Date.now()-window.davinciBackspaceKeyTime&&(b=n.careful);if(b){if(a=a||window.event)a.returnValue=b;return b}})},subscribe:function(d,h){a.subscriptions.push(dojo.subscribe(d,this,h))},destroy:function(){dojo.forEach(a.subscriptions,dojo.unsubscribe)},_addExtension:function(d,h,b){h.id&&(h.id=b+"."+h.id);a.extensionPoints[d]=
a.extensionPoints[d]||[];b=a.extensionPoints[d];b.push(h);a.extensionPoints[d]=b},getExtensions:function(d,h){d=a.extensionPoints[d];if(h){var b=h instanceof Function;if(d)return d.filter(function(a){return b&&h(a)||a.id==h})}return d},getExtension:function(d,h){return a.getExtensions(d,h)[0]},handleError:function(d){var h="welcome";a.singleUserMode()&&(h=".");window.document.body.innerHTML=dojo.string.substitute(n.serverConnectError,{redirectUrl:h,error:d})},executeCommand:function(d){(d=a.getExtension("davinci.commands",
d))&&d.run&&d.run()},_selectionChanged:function(d){a.currentSelection=d},getSelection:function(){return a.currentSelection},serverJSONRequest:function(a){var h,b={handleAs:"json"};dojo.mixin(b,a);dojo.xhrGet(b).then(function(b){b&&(h=b)});return h},registerKeyBinding:function(a,h){this._globalKeyBindings||(this._globalKeyBindings=[]);this._globalKeyBindings.push({keyBinding:a,action:h})},handleKeyEvent:function(a){this._handleKeyEvent(a,!0)},_handleGlobalDocumentKeyEvent:function(a){this._handleKeyEvent(a)},
_handleKeyEvent:function(d,h){if(this._globalKeyBindings){var b=!1;(b=dojo.some(this._globalKeyBindings,dojo.hitch(this,function(b){if(a.isKeyEqualToEvent(b.keyBinding,d))return davinci.Workbench._runAction(b.action),!0})))?dojo.stopEvent(d):h||this.currentEditor&&this.currentEditor.handleKeyEvent&&this.currentEditor.handleKeyEvent(d,!0)}},isKeyEqualToEvent:function(a,h){var b=!0,p=h.altKey&&!dojo.isMac||dojo.isMac&&h.ctrlKey;!!a.accel!==(h.ctrlKey&&!dojo.isMac||dojo.isMac&&h.metaKey)&&(b=!1);!!a.meta!==
p&&(b=!1);!!a.shift!==h.shiftKey&&(b=!1);b&&a.charOrCode&&h.which&&(b=dojo.isArray(a.charOrCode)?dojo.some(a.charOrCode,dojo.hitch(this,function(b){return this._comparecharOrCode(b,h)})):this._comparecharOrCode(a.charOrCode,h));return b},_comparecharOrCode:function(a,h){return dojo.isString(a)?a.toLowerCase()===String.fromCharCode(h.which).toLowerCase():a===h.which}};return a})},"davinci/lang/webContent":function(){define([],function(){return{designer:"Designer,",welcome:"Welcome",loadingMaqetta:"\x26nbsp;Loading Maqetta...",
startupError:"Error starting Maqetta: ${0}",logOff:"Log Out",unsupportedBrowser:"Unsupported Browser",unsupportedNote:'Maqetta supports Firefox 4, Chrome 5, and Safari 5.1 or greater. If you wish to continue with an unsupported browser, click "Continue."',buttonContinue:"Continue",pageDesignerTitle:"Maqetta Designer",maqettaUser:"Maqetta User",localhostUser:"localhost user",sessionTimedOut:"Session timed out",sessionTimedOutMsg:"The session has timed out, please \x3ca href\x3d'${hrefLoc}'\x3elog in\x3c/a\x3e again. (Auto-redirect within 10 seconds)",
devicePreviewError:"Maqetta device previewer error. Must supply URL parameter 'file\x3d'",devicePreviewPreviewing:"Previewing:",help:"Help",tutorials:"Tutorials",aboutMaqetta:"About Maqetta",review:"Review and Commenting,",reviewPageTitle:"Maqetta Review Board",careful:"Warning: You are about to leave Maqetta.",errorLoadingPlugin:"error loading plugin ${0}, response\x3d${1}",errorLoadingPlugins:"error loading plugins",multipleFilesUnsaved:"${0} (NOTE: This is one of ${1} files with unsaved changes.)",
idleSessionMessage:"Your session will timeout in ${seconds} seconds, click anywhere in the page to continue using Maqetta.",fileHasUnsavedChanges:"Save changes to ${0}?",perspectiveNotFound:"perspective not found: ${0}",scopeNotDefined:"scope not defined for action: ${0}",funcNotDefined:"function not defined for action: ${0}",serverConnectError:"\x3ch3\x3eError connecting to the Maqetta Server.\x3c/h3\x3e\x3cbr\x3e\x3cdiv\x3ePlease click here to \x3ca href\x3d'${redirectUrl}'\x3ereturn to Maqetta\x3c/a\x3e\x3cdiv\x3e\x3cdiv\x3eError description: ${error}\x3c/div\x3e"}})},
"davinci/commands/CommandStack":function(){define(["dojo/_base/declare"],function(n){return n("davinci.commands.CommandStack",null,{constructor:function(m){this._context=m;this._undoStack=[];this._redoStack=[]},execute:function(m,g){if(m&&(g=this._context&&"davinci.ve.themeEditor.Context"!=this._context.declaredClass?dojo.withDoc(this._context.getDocument(),"execute",m,[this._context,g]):m.execute(g),this._undoStack.push(m),this._redoStack=[],!g))this.onExecute(m,"execute")},undo:function(){if(this.canUndo()){var m=
this._undoStack.pop();m._runDelegate?m._runDelegate.undoDelegate(m):this._context&&"davinci.ve.themeEditor.Context"!=this._context.declaredClass?dojo.withDoc(this._context.getDocument(),"undo",m):m.undo();this._redoStack.push(m);this.onExecute(m,"undo")}},redo:function(){if(this.canRedo()){var m=this._redoStack.pop();m._runDelegate?m._runDelegate.redoDelegate(m):this._context&&"davinci.ve.themeEditor.Context"!=this._context.declaredClass?dojo.withDoc(this._context.getDocument(),"execute",m):m.execute();
this._undoStack.push(m);this.onExecute(m,"redo")}},canUndo:function(){return 0<this._undoStack.length},canRedo:function(){return 0<this._redoStack.length},getUndoCount:function(){return this._undoStack.length},getRedoCount:function(){return this._redoStack.length},clear:function(){this._undoStack=[];this._redoStack=[]},jump:function(m,g){var e=this.getUndoCount(),c=this.getRedoCount();if(m==e)return m;if(0>m||m>e+c)return-1;e=m-e;if(g)if(0>e)for(;0>e;)this._redoStack.push(this._undoStack.pop()),e++;
else for(;0<e;)this._undoStack.push(this._redoStack.pop()),e--;else if(0>e)for(;0>e;)this.undo(),e++;else for(;0<e;)this.redo(),e--;return m},onExecute:function(m,g){},undoDelegate:function(m){},redoDelegate:function(m){}})})},"davinci/ui.plugin":function(){define(["require"],function(n){return{id:"davinci.ui","davinci.view":[{id:"navigator",title:"Files",viewClass:"davinci/workbench/Explorer",iconClass:"paletteIcon paletteIconFiles"},{id:"hierarchy",title:"Hierarchy"},{id:"devices",title:"Devices",
viewClass:"davinci/workbench/DeviceTreeView",iconClass:"paletteIcon paletteIconOutline"},{id:"files",title:"XFiles",viewClass:"davinci/workbench/FileView",iconClass:"paletteIcon paletteIconOutline"},{id:"comment",title:"Comments",viewClass:"davinci/review/view/CommentView",iconClass:"paletteIcon paletteIconComments"},{id:"scope",title:"Scope"},{id:"properties",title:"Properties",viewClass:"davinci/workbench/PropertyEditor"},{id:"console",title:"Console"},{id:"history",title:"History"},{id:"search",
title:"Search"}],"davinci.preferences":[{name:"Project",id:"project",hide:!0,category:"",pageContent:"Project Settings here"},{name:"Project Settings",id:"ProjectPrefs",category:"davinci.ui.project",pane:"davinci/ui/ProjectPreferences",defaultValues:{webContentFolder:"",themeFolder:"themes",widgetFolder:"lib/custom"}}],"davinci.perspective":{id:"main",title:"AJAX IDE",views:[{viewID:"davinci.ui.navigator",position:"left-bottom"},{viewID:"davinci.ui.outline",position:"right"},{viewID:"davinci.ui.properties",
position:"right-bottom"}]},"davinci.actionSets":[{id:"editorActions",visible:!0,menu:[],actions:[]},{id:"main",visible:!0,menu:[{__mainMenu:!0,separator:["usersettings",!1,"settings",!1,"additions",!1,"help",!1]},{label:"User settings",path:"usersettings",id:"davinci.usersettings",className:"userSettingsMenu",iconClass:"userSettingsMenuIcon",showLabel:!1,separator:["username",!0,"logout",!0,"additions",!1]},{label:"Settings",path:"settings",id:"davinci.settings",className:"appSettingsMenu",iconClass:"appSettingsMenuIcon",
showLabel:!1,separator:["settings",!0,"additions",!1]}],actions:[{id:"editPreferences",run:function(){n(["davinci/workbench/Preferences"],function(m){m.showPreferencePage()})},label:"Preferences...",menubarPath:"davinci.settings/settings"}]},{id:"explorerActions",visible:!0,actions:[{id:"davinci.ui.rename",label:"Rename...",iconClass:"renameIcon",run:function(){n(["./ui/Resource"],function(m){m.renameAction()})},isEnabled:function(m){return n("./ui/Resource").canModify(m)},menubarPath:"addFiles"},
{id:"davinci.ui.delete",label:"Delete",iconClass:"deleteIcon",isEnabled:function(m){return n("./ui/Resource").canModify(m)},run:function(){n(["./ui/Resource"],function(m){m.deleteAction()})},menubarPath:"delete",keyBinding:{charOrCode:[dojo.keys.DELETE,dojo.keys.BACKSPACE]}},{id:"davinci.ui.download",label:"Download",iconClass:"downloadSomeIcon",action:"davinci/actions/DownloadAction",isEnabled:function(m){return n("./ui/Resource").canModify(m)},menubarPath:"delete"}]}],"davinci.actionSetPartAssociations":[{targetID:"davinci.ui.editorActions",
parts:["davinci.ui.editorMenuBar"]},{targetID:"davinci.ui.explorerActions",parts:["davinci.ui.navigator"]}],"davinci.viewActions":[{viewContribution:{targetID:"davinci.ui.problems",actions:[{id:"Copy2",iconClass:"copyIcon",run:function(){alert("view toolbar")},label:"Copy",toolbarPath:"davinci.toolbar.main/edit",menubarPath:"davinci.edit/cut"}]}},{viewContribution:{targetID:"workbench.Explorer",actions:[{id:"davinci.ui.newfile",label:"New folder...",iconClass:"newFolderIcon",className:"FilesToolbarNewFolder",
run:function(){n(["./ui/Resource"],function(m){m.newFolder()})},toolbarPath:"download"},{id:"davinci.ui.deletefile",label:"Delete file...",iconClass:"FilesToolbarDeleteFileIcon",className:"FilesToolbarDeleteFile",run:function(){n(["./ui/Resource"],function(m){m.deleteAction()})},toolbarPath:"download"},{id:"davinci.ui.renamefile",label:"Rename file...",iconClass:"FilesToolbarRenameFileIcon",className:"FilesToolbarRenameFile",run:function(){n(["./ui/Resource"],function(m){m.renameAction()})},toolbarPath:"download"},
{id:"download",iconClass:"downloadSomeIcon",className:"FilesToolbarDownloadSelected",run:function(){n(["./Workbench","./ui/DownloadSelected"],function(m,g){m.showModal(new g,"Download",{width:440})})},label:"Download Selected Files",toolbarPath:"download"},{id:"download",iconClass:"downloadAllIcon",className:"FilesToolbarDownloadAll",run:function(){n(["./Workbench","./ui/Download"],function(m,g){m.showModal(new g,"Download",{width:440})})},label:"Download Entire Project",toolbarPath:"download"}]}}]}})},
"davinci/html/html.plugin":function(){define(["require"],function(n){return{id:"davinci.html","davinci.editor":[{id:"HTMLEditor",name:"HTML Editor",extensions:"html",isDefault:!1,editorClass:"davinci/html/ui/HTMLEditor",palettePerspective:"davinci.html.htmlEditor",expandPalettes:["left"]},{id:"CSSEditor",name:"CSS Editor",extensions:"css",isDefault:!1,editorClass:"davinci/html/ui/CSSEditor",palettePerspective:"davinci.html.htmlEditor",expandPalettes:["left"]},{id:"ImageViewer",name:"Image Viewer",
extensions:"jpg,gif,jpeg,png",isDefault:!0,editorClass:"davinci/html/ui/ImageViewer",palettePerspective:"davinci.html.htmlEditor",expandPalettes:["left"]}],"davinci.editorActions":{editorContribution:{targetID:"davinci.html.CSSEditor",actions:[{id:"savecombo",className:"maqLabelButton",showLabel:!0,label:"Save",toolbarPath:"save",type:"ComboButton",run:function(){n(["../Workbench"],function(m){n("../ui/Resource").save()})},isEnabled:function(m){return n("../Workbench").getOpenEditor()},menu:[{iconClass:"saveIcon",
run:function(){n("../ui/Resource").save()},isEnabled:function(m){return n("../Workbench").getOpenEditor()},label:"Save",keyBinding:{accel:!0,charOrCode:"s",allowGlobal:!0}},{iconClass:"saveAsIcon",run:function(){n("../ui/Resource").saveAs("html")},isEnabled:function(m){return n("../Workbench").getOpenEditor()},label:"Save As",keyBinding:{accel:!0,shift:!0,charOrCode:"s",allowGlobal:!0}}]}]}},"davinci.preferences":[{name:"HTML",id:"general",category:""}],"davinci.fileType":[{extension:"html",iconClass:"htmlFileIcon",
type:"text"},{extension:"css",iconClass:"cssFileIcon",type:"text"},{extension:"jpeg",iconClass:"imageFileIcon",type:"image"},{extension:"jpg",iconClass:"imageFileIcon",type:"image"},{extension:"png",iconClass:"imageFileIcon",type:"image"},{extension:"gif",iconClass:"imageFileIcon",type:"image"}],"davinci.perspective":[{id:"htmlEditor",title:"HTML Editor",views:[{viewID:"davinci.ve.Palette",position:"left",hidden:!0},{viewID:"davinci.ui.outline",position:"left",hidden:!0},{viewID:"davinci.ve.style",
position:"right"},{viewID:"davinci.ui.comment",position:"right",hidden:!0},{viewID:"davinci.ve.states",position:"right-bottom",hidden:!0},{viewID:"davinci.ui.navigator",position:"left-bottom",selected:!0},{viewID:"davinci.review.reviewNavigator",position:"left"}]}]}})},"davinci/js/js.plugin":function(){define(["require"],function(n){return{id:"davinci.js","davinci.editor":[{id:"JSEditor",name:"JavaScript Editor",extensions:"js,json",isDefault:!1,editorClass:"davinci/js/ui/JavaScriptEditor",palettePerspective:"davinci.html.htmlEditor",
expandPalettes:["left"]},{id:"XIDEEditor",name:"Editor",extensions:"js,json",isDefault:!0,editorClass:"davinci/xide/Editor",palettePerspective:"davinci.html.htmlEditor",expandPalettes:["left"]}],"davinci.actionSets":[{id:"jsSource",visible:!0,menu:[{label:"Source",path:"edit",id:"davinci.js.source",separator:["commentGroup",!0,"editGroup",!0,"codeGroup",!0,"additions",!1]}],actions:[{id:"davinci.js.comment",icon:null,run:function(){alert("toggle comment")},label:"Toggle Comment",menubarPath:"davinci.js.source/commentGroup"}]},
{id:"jsEdit",visible:!0,actions:[{id:"davinci.js.cut",icon:null,label:"cut",commandID:"davinci.js.cut",menubarPath:"davinci.edit/cut"},{id:"davinci.js.add",icon:null,label:"add",commandID:"davinci.js.add",menubarPath:"davinci.edit/add"},{id:"davinci.js.delete",icon:null,label:"delete",commandID:"davinci.js.delete",menubarPath:"davinci.edit/delete"}]}],"davinci.actionSetPartAssociations":[{targetID:"davinci.js.jsEdit",parts:["davinci.ui.outline","davinci.js.JSEditor"]}],"davinci.editorActions":{editorContribution:{targetID:"davinci.js.JSEditor",
actions:[{id:"savecombo",className:"maqLabelButton",showLabel:!0,label:"Save",toolbarPath:"save",type:"ComboButton",run:function(){n(["../Workbench"],function(m){n("../ui/Resource").save()})},isEnabled:function(m){return n("../Workbench").getOpenEditor()},menu:[{iconClass:"saveIcon",run:function(){n("../ui/Resource").save()},isEnabled:function(m){return n("../Workbench").getOpenEditor()},label:"Save",keyBinding:{accel:!0,charOrCode:"s",allowGlobal:!0}},{iconClass:"saveAsIcon",run:function(){n("../ui/Resource").saveAs("html")},
isEnabled:function(m){return n("../Workbench").getOpenEditor()},label:"Save As",keyBinding:{accel:!0,shift:!0,charOrCode:"s",allowGlobal:!0}}]}]}},"davinci.commands":[{id:"cut",run:function(){}},{id:"add",run:function(){}},{id:"delete",run:function(){}}],"davinci.keyBindings":[{platform:"win",sequence:"M1+C",commandID:"davinci.js.copy",contextID:"davinci.js.JSEditor"}],"davinci.preferences":[{name:"JavaScript",id:"general",category:""},{name:"Formatting",id:"format",category:"davinci.js.general",
pane:"davinci/js/ui/FormatOptions",defaultValues:{blockNewLine:!1,blockIndent:3,functionNewLine:!1,functionIndent:5,functionParamSpaceing:1,labelSpace:1,forParamSpacing:0,breakOnLabel:!0,ifStmtSpacing:0,varAssignmentSpaceing:0,switchSpacing:3,objectLitFieldSpace:1}}],"davinci.fileType":[{extension:"js",iconClass:"jsFileIcon",type:"text"},{extension:"json",iconClass:"jsFileIcon",type:"text"}]}})},"davinci/ve/ve.plugin":function(){define(["require"],function(n){return{id:"davinci.ve","davinci.view":[{id:"states",
title:"Scenes",viewClass:"davinci/ve/views/StatesView",iconClass:"paletteIcon paletteIconStates"},{id:"datastores",title:"DataStores",viewClass:"davinci/ve/views/DataStoresView"},{id:"object",title:"Object",viewClass:"davinci/ve/views/ObjectView"},{id:"style",title:"",viewClass:"davinci/ve/views/SwitchingStyleView"}],"davinci.perspective":[{id:"pageDesign",title:"Page Design",views:[{viewID:"davinci.ui.outline",position:"left"},{viewID:"davinci.ui.devices",position:"left"},{viewID:"davinci.ui.files",
position:"left"},{viewID:"davinci.ve.style",position:"right"},{viewID:"davinci.ui.comment",position:"right",hidden:!0},{viewID:"davinci.ve.states",position:"right-bottom",selected:!0},{viewID:"davinci.ui.navigator",position:"left-bottom",selected:!0},{viewID:"davinci.review.reviewNavigator",position:"left-bottom"}]}],"davinci.editor":[{id:"HTMLPageEditor",name:"HTML Visual Editor",extensions:["html","htm","php"],isDefault:!0,editorClass:"davinci/ve/PageEditor",palettePerspective:"davinci.ve.pageDesign",
expandPalettes:["left"]}],"davinci.actionSets":[{id:"cutCopyPaste",visible:!0,actions:[{label:"Cut",keySequence:"M1+X",iconClass:"editActionIcon editCutIconSmall",action:"davinci/ve/actions/CutAction",menubarPath:"davinci.edit/cut"},{label:"Copy",keySequence:"M1+C",iconClass:"editActionIcon editCopyIconSmall",action:"davinci/ve/actions/CopyAction",menubarPath:"davinci.edit/cut"},{keySequence:"M1+V",iconClass:"editActionIcon editPasteIconSmall",label:"Paste",action:"davinci/ve/actions/PasteAction",
menubarPath:"davinci.edit/cut"},{keySequence:"DEL",iconClass:"editActionIcon editDeleteIconSmall",label:"Delete",action:"davinci/ve/actions/DeleteAction",menubarPath:"davinci.edit/cut"},{iconClass:"fa-crosshairs",label:"Show in Outline",action:"davinci/ve/actions/ShowInOutline",menubarPath:"davinci.edit/cut"},{iconClass:"editActionIcon selectParentIconSmall",label:"Select parent",action:"davinci/ve/actions/SelectParentAction",menubarPath:"davinci.edit/cut"},{iconClass:"editActionIcon selectAncestorIconSmall",
label:"Select ancestor...",action:"davinci/ve/actions/SelectAncestorAction",menubarPath:"davinci.edit/cut"},{iconClass:"editActionIcon unselectAllIconSmall",label:"Unselect all",action:"davinci/ve/actions/UnselectAllAction",menubarPath:"davinci.edit/cut"},{iconClass:"editActionIcon",label:"Surround with \x26lt;A\x26gt;",action:"davinci/ve/actions/SurroundAction",surroundWithTagName:"a",menubarPath:"davinci.edit/cut"},{iconClass:"editActionIcon",label:"Surround with \x26lt;DIV\x26gt;",action:"davinci/ve/actions/SurroundAction",
surroundWithTagName:"div",menubarPath:"davinci.edit/cut"},{iconClass:"editActionIcon",label:"Surround with \x26lt;SPAN\x26gt;",action:"davinci/ve/actions/SurroundAction",surroundWithTagName:"span",menubarPath:"davinci.edit/cut"},{iconClass:"editActionIcon moveToFrontIconSmall",label:"Move to front",action:"davinci/ve/actions/MoveToFrontAction",menubarPath:"davinci.edit/cut"},{iconClass:"editActionIcon moveForwardIconSmall",label:"Move forward",action:"davinci/ve/actions/MoveForwardAction",menubarPath:"davinci.edit/cut"},
{iconClass:"editActionIcon moveBackwardIconSmall",label:"Move backward",action:"davinci/ve/actions/MoveBackwardAction",menubarPath:"davinci.edit/cut"},{iconClass:"editActionIcon moveToBackIconSmall",label:"Move to back",action:"davinci/ve/actions/MoveToBackAction",menubarPath:"davinci.edit/cut"}]}],"davinci.viewActions":[{viewContribution:{targetID:"davinci.ve.outline",actions:[{id:"design",iconClass:"designModeIcon editActionIcon",radioGroup:"displayMode",method:"switchDisplayMode",label:"Widgets",
toolbarPath:"displayMode"},{id:"source",iconClass:"sourceModeIcon editActionIcon",method:"switchDisplayMode",radioGroup:"displayMode",label:"Source",toolbarPath:"displayMode"}]}},{viewContribution:{targetID:"davinci.ve.states",actions:[{id:"addState",iconClass:"viewActionIcon addStateIcon",action:"davinci/ve/actions/AddState",label:"Add state",toolbarPath:"states1"},{id:"removeState",iconClass:"viewActionIcon removeStateIcon",action:"davinci/ve/actions/RemoveState",label:"Remove state",toolbarPath:"states1"},
{id:"modifyState",iconClass:"viewActionIcon modifyStateIcon",action:"davinci/ve/actions/ModifyState",label:"Modify state",toolbarPath:"states1"},{id:"NewWidgetsCurrentState",className:"newWidgetsCurrentStateButton",iconClass:"viewActionIcon newWidgetsCurrentStateIcon",action:"davinci/ve/actions/NewWidgetsCurrentState",label:"Toggle whether new widgets go to Background or current state",toolbarPath:"states2"},{id:"highlightBaseWidgets",className:"highlightBaseWidgetsButton",iconClass:"viewActionIcon highlightBaseWidgetsIcon",
action:"davinci/ve/actions/HighlightBaseWidgets",label:"When in custom state, highlight widgets from Background state",toolbarPath:"states2"}]}}],"davinci.actionSetPartAssociations":[{targetID:"davinci.ve.cutCopyPaste",parts:["davinci.ve.visualEditor","davinci.ve.VisualEditorOutline"]}],"davinci.editorActions":{editorContribution:{targetID:"davinci.ve.HTMLPageEditor",actions:[{id:"savecombo",className:"maqLabelButton",showLabel:!0,label:"Save",toolbarPath:"save",type:"ComboButton",run:function(){n(["../Workbench"],
function(m){n("../ui/Resource").save()})},isEnabled:function(m){return n("../Workbench").getOpenEditor()},menu:[{iconClass:"saveIcon",run:function(){n("../ui/Resource").save()},isEnabled:function(m){return n("../Workbench").getOpenEditor()},label:"Save",keyBinding:{accel:!0,charOrCode:"s",allowGlobal:!0}},{iconClass:"saveAsIcon",run:function(){n("../ui/Resource").saveAs("html")},isEnabled:function(m){return n("../Workbench").getOpenEditor()},label:"Save As",keyBinding:{accel:!0,shift:!0,charOrCode:"s",
allowGlobal:!0}},{id:"saveasdijit",iconClass:"fa-save",run:function(){return n(["davinci/de/resource"],function(m){m.createDijiFromNewDialog()})},isEnabled:function(m){return!0},label:"Save As Widget",command:"File/Save As Widget",group:"File",tab:"Home"}]},{id:"undo",iconClass:"editActionIcon undoIcon",action:"davinci/actions/UndoAction",label:"Undo",toolbarPath:"undoredo",keyBinding:{accel:!0,charOrCode:"z"},command:"Edit/Undo"},{id:"redo",iconClass:"editActionIcon redoIcon",action:"davinci/actions/RedoAction",
label:"Redo",toolbarPath:"undoredo",keyBinding:{accel:!0,shift:!0,charOrCode:"z"},command:"Edit/Redo"},{id:"cut",label:"Cut",iconClass:"editActionIcon editCutIcon",action:"davinci/ve/actions/CutAction",toolbarPath:"cutcopypaste",keyBinding:{accel:!0,charOrCode:"x"}},{id:"copy",label:"Copy",iconClass:"editActionIcon editCopyIcon",action:"davinci/ve/actions/CopyAction",toolbarPath:"cutcopypaste",keyBinding:{accel:!0,charOrCode:"c"}},{id:"paste",label:"Paste",iconClass:"editActionIcon editPasteIcon",
action:"davinci/ve/actions/PasteAction",toolbarPath:"cutcopypaste",keyBinding:{accel:!0,charOrCode:"v"}},{id:"delete",iconClass:"editActionIcon editDeleteIcon",label:"Delete",action:"davinci/ve/actions/DeleteAction",toolbarPath:"delete",keyBinding:{charOrCode:[dojo.keys.DELETE,dojo.keys.BACKSPACE]}},{id:"outline",iconClass:"fa-crosshairs",label:"Show in Outline",action:"davinci/ve/actions/ShowInOutline",toolbarPath:"outline"},{id:"openBrowser",iconClass:"text-success fa-play",className:"davinciFloatRight openBrowser",
run:function(){n(["../Workbench"],function(m){(m=m.getOpenEditor())&&m.resourceFile?m.previewInBrowser():console.error("ERROR. Cannot launch browser window. No editor info.")})},label:"Preview in Browser",toolbarPath:"undoredo",iconClass:"text-success fa-play",keyBinding:{accel:!0,charOrCode:"0",allowGlobal:!0},command:"File/Open In Browser",group:"File",tab:"Home"},{id:"documentSettings",iconClass:"documentSettingsIcon",className:"documentSettings davinciFloatRight",label:"Document settings",toolbarPath:"undoredo",
type:"DropDownButton",menu:[{iconClass:"editActionIcon",label:"Select parent",action:"davinci/ve/actions/SelectParentAction",command:"Widget/Select/SelectParent",group:"Widget"},{iconClass:"editActionIcon",label:"Select ancestor",action:"davinci/ve/actions/SelectAncestorAction",command:"Widget/Select/SelectAnchestor",group:"Widget"},{iconClass:"editActionIcon",label:"Unselect all",action:"davinci/ve/actions/UnselectAllAction"},{iconClass:"editActionIcon moveToFrontIconSmall",label:"Move to front",
action:"davinci/ve/actions/MoveToFrontAction",command:"Widget/Move/MoveToFront",group:"Widget"},{iconClass:"editActionIcon moveForwardIconSmall",label:"Move forward",action:"davinci/ve/actions/MoveForwardAction",command:"Widget/Move/MoveToForward",group:"Widget"},{iconClass:"editActionIcon moveBackwardIconSmall",label:"Move backward",action:"davinci/ve/actions/MoveBackwardAction",command:"Widget/Move/MoveToBackward",group:"Widget"},{iconClass:"editActionIcon moveToBackIconSmall",label:"Move to back",
action:"davinci/ve/actions/MoveToBackAction",command:"Widget/Move/MoveToBack",group:"Widget"},{iconClass:"editActionIcon",label:"Surround with \x26lt;A\x26gt;",action:"davinci/ve/actions/SurroundAction",surroundWithTagName:"a",command:"Widget/SourroundWithA",group:"Widget",tab:"Tools"},{iconClass:"editActionIcon",label:"Surround with \x26lt;DIV\x26gt;",action:"davinci/ve/actions/SurroundAction",surroundWithTagName:"div",command:"Widget/SourroundWithDIV",group:"Widget",tab:"Tools"},{iconClass:"editActionIcon",
label:"Surround with \x26lt;SPAN\x26gt;",action:"davinci/ve/actions/SurroundAction",surroundWithTagName:"span",command:"Widget/SourroundWithSPAN",group:"Widget",tab:"Tools"}]},{id:"layout",className:"maqLabelButton davinciFloatRight maqLayoutDropDownButton",showLabel:!0,label:"Flow",toolbarPath:"undoredo",type:"DropDownButton",menu:[{label:"Flow",iconClass:"flowLayoutIcon",method:"selectLayoutFlow"},{label:"Absolute",iconClass:"absoluteLayoutIcon",method:"selectLayoutAbsolute"}]},{id:"closeactiveeditor",
run:function(){n(["../Workbench"],function(m){m.closeActiveEditor()})},keyBinding:{accel:!0,shift:!0,charOrCode:"w",allowGlobal:!0}},{id:"showWidgetsPalette",run:function(){var m=dijit.byId("davinci.ve.Palette");if(m){var g=m.getParent();g&&g.selectChild(m)}},keyBinding:{meta:!0,charOrCode:"p",allowGlobal:!0}}]}},"davinci.preferences":[{name:"Visual Editor",id:"editorPrefs",category:"davinci.html.general",pane:"davinci/ve/prefs/HTMLEditPreferences",defaultValues:{flowLayout:!1,snap:!0,showPossibleParents:!0,
cssOverrideWarn:!0,absoluteWidgetsZindex:900,widgetPaletteLayout:"icons"}}],"davinci.dnd":[{parts:["davinci.ui.navigator"],dragSource:function(m){if("File"==m.elementType)return/gif|jpeg|jpg|png|svg|json/i.test(m.getExtension())},dragHandler:"davinci/ve/palette/ImageDragSource"}],"davinci.fileType":[{extension:"theme",iconClass:"themeFileIcon",type:"text"}],"davinci.defaultEditorActions":{editorContribution:{actions:[{id:"save",run:function(){n("../Workbench").getOpenEditor().save()},isEnabled:function(m){return!0},
className:"maqLabelButton",showLabel:!0,label:"Save",toolbarPath:"save",keyBinding:{accel:!0,charOrCode:"s"}},{id:"undo",iconClass:"editActionIcon undoIcon",action:"davinci/actions/UndoAction",label:"Undo",toolbarPath:"undoredo",keyBinding:{accel:!0,charOrCode:"z"}},{id:"redo",iconClass:"editActionIcon redoIcon",action:"davinci/actions/RedoAction",label:"Redo",toolbarPath:"undoredo",keyBinding:{accel:!0,shift:!0,charOrCode:"z"}}]}}}})},"davinci/model/Path":function(){define(["dojo/_base/declare"],
function(n){"undefined"===typeof davinci.model&&(davinci.model={});"undefined"===typeof davinci.model.Path&&(davinci.model.Path={});var m=n("davinci.model.Path",null,{constructor:function(g,e,c){g=g||".";"string"==typeof g?(this.path=g,this.getSegments()):(this.segments=g,this.hasLeading=e,this.hasTrailing=c)},endsWith:function(g){var e=dojo.clone(this.segments);for(g=(new m(g)).getSegments();0<g.length&&0<e.length;)if(g.pop()!=e.pop())return!1;return!0},getExtension:function(){this.extension||(this.extension=
this.path.substr(this.path.lastIndexOf(".")+1));return this.extension},segment:function(g){var e=this.getSegments();return e.length<g?null:e[g]},getSegments:function(){if(!this.segments){var g=this.path;this.segments=g.split("/");"/"==g.charAt(0)&&(this.hasLeading=!0);"/"==g.charAt(g.length-1)&&(this.hasTrailing=!0,this.segments.pop());this._canonicalize()}return this.segments},isAbsolute:function(){return this.hasLeading},getParentPath:function(){if(!this._parentPath){var g=dojo.clone(this.segments);
g.pop();this._parentPath=new m(g,this.hasLeading)}return dojo.clone(this._parentPath)},_clone:function(){return new m(dojo.clone(this.segments),this.hasLeading,this.hasTrailing)},append:function(g){g=g||"";"string"==typeof g&&(g=new m(g));if(g.isAbsolute())return g;var e=this.segments,c=g.getSegments(),e=e.concat(c);g=new m(e,this.hasLeading,g.hasTrailing);".."!=c[0]&&"."!=c[0]||g._canonicalize();return g},toString:function(){var g=[];this.hasLeading&&g.push("/");for(var e=0;e<this.segments.length;e++)0<
e&&g.push("/"),g.push(this.segments[e]);this.hasTrailing&&g.push("/");return g.join("")},removeRelative:function(){var g=this.getSegments();return 0<g.length&&"."==g[1]?this.removeFirstSegments(1):this},relativeTo:function(g,e){"string"==typeof g&&(g=new m(g));var c=this.segments;if(this.isAbsolute())return this;var f=g.getSegments();g=this.matchingFirstSegments(g);f=f.length;e&&--f;e=f-g;if(0==e+c.length-g)return davinci.model.Path.EMPTY;for(var f=[],k=0;k<e;k++)f.push("..");for(k=g;k<c.length;k++)f.push(c[k]);
return new m(f,!1,this.hasTrailing)},startsWith:function(g){var e=this.matchingFirstSegments(g);return g._length()==e},_length:function(g){return this.segments.length},matchingFirstSegments:function(g){var e=this.segments;g=g.getSegments();for(var c=Math.min(e.length,g.length),f=0,k=0;k<c&&e[k]==g[k];k++)f++;return f},removeFirstSegments:function(g){return new m(this.segments.slice(g,this.segments.length),this.hasLeading,this.hasTrailing)},removeMatchingLastSegments:function(g){g=this.matchingFirstSegments(g);
return this.removeLastSegments(g)},removeMatchingFirstSegments:function(g){g=this.matchingFirstSegments(g);return this._clone().removeFirstSegments(g)},removeLastSegments:function(g){g||(g=1);return new m(this.segments.slice(0,this.segments.length-g),this.hasLeading,this.hasTrailing)},lastSegment:function(){return this.segments[this.segments.length-1]},firstSegment:function(g){return this.segments[g||0]},equals:function(g){if(this.segments.length!=g.segments.length)return!1;for(var e=0;e<this.segments.length;e++)if(g.segments[e]!=
this.segments[e])return!1;return!0},_canonicalize:function(){for(var g,e=this.segments,c=0;c<e.length;c++)if("."==e[c]||".."==e[c]){g=!0;break}if(g){g=[];for(c=0;c<e.length;c++)".."==e[c]?0==g.length?this.hasLeading||g.push(e[c]):".."==g[g.length-1]?g.push(".."):g.pop():"."==e[c]&&1!=this.segments.length||g.push(e[c]);g.length!=e.length&&(this.segments=g)}}});davinci.model.Path.EMPTY=new m("");return m})},"davinci/workbench/Preferences":function(){define("dojo/_base/declare dojo/_base/xhr dojo/_base/lang dojo/topic dojo/dom ../Runtime dijit/_WidgetBase dijit/_TemplatedMixin dijit/_WidgetsInTemplateMixin dijit/registry davinci/ui/Dialog dijit/Tree dijit/tree/ForestStoreModel dojo/data/ItemFileReadStore davinci/lang/workbench dijit/lang/_common dojo/text!davinci/workbench/templates/Preferences.html dijit/form/Button".split(" "),
function(n,m,g,e,c,f,k,a,d,h,b,p,z,r,w,A,x){var y=n([k,a,d],{templateString:x,commonStrings:A,resize:function(){this.borderContainer.resize()}}),u={_allPrefs:{},savePreferences:function(b,a,h){},_loadExtensions:function(){u._extensions||(u._extensions=f.getExtensions("davinci.preferences"))},showPreferencePage:function(){u._loadExtensions();var a=u.getPrefJson();if(a.items)for(var d=a.items.length-1;0<=d;d--){var f=a.items[d];f.hide&&a.items.splice(d,1)}if(!a||1>a.length)alert(w.noUserPref);else{this.dialog=
b.showModal(new y({}),w.preferences,{width:650,height:350});var f=new r({data:a,jsId:"prefTreeDataStore"}),d=new z({jsId:"fileModel",labelAttr:"name",store:f,rootId:"root"}),k=["root"];if(a=a.items){do f=a[0],k.push(f.id),a=f.children;while(a)}var e=h.byId("prefTree");e||(e=new p({model:d,id:"prefTree",persist:!1,query:"{type:'directory'}",label:"Preferences",labelAttr:"name",showRoot:!1,childrenAttrs:"children",openOnClick:!0,autoExpand:!0}));e.onClick=function(b){u.setPaneContent(b)};c.byId("pref.TreePane").appendChild(e.domNode);
e.startup();e.onLoadDeferred.then(function(){e.set("paths",[k]).then(function(){e.focusNode(e.selectedNode);u.setPaneContent(e.selectedItem)})})}},getPrefJson:function(){var b=u._extensions;if(!b)return[];for(var a=[],h=0;h<b.length;h++)b[h]._index=h,b[h].category?(a[b[h].category]||(a[b[h].category]=[]),a[b[h].category].push(b[h])):(a.root||(a.root=[]),a.root.push(b[h]));return{identifier:"id",items:a.root.map(function(b){return{id:b.id,name:b.name,hide:b.hide,index:b._index,children:u._getPrefJsonChildren(b.id,
a)}})}},_getPrefJsonChildren:function(b,a){b=a[b];if(!b)return[];for(var h=[],p=0;p<b.length;p++)h[p]={id:b[p].id,name:b[p].name,index:b[p]._index},a[b[p].id]&&(h[p].children=u._getPrefJsonChildren(b[p].id,a));return h},setPaneContent:function(b){var a;delete u._currentPane;var p=u._extensions[b.index[0]],d=u.getPreferences(p.id,davinci.Workbench.getProject());p.pane?require([p.pane],function(b){b=new b;u._currentPane=b;u._currentPane._extension=p;u._currentPane.setPreferences(d);h.byId("pref.RightPane").setContent(b.domNode)}):
a=p.pageContent?document.createTextNode(p.pageContent):document.createTextNode("");a&&h.byId("pref.RightPane").setContent(a)},_save:function(b){if(u._currentPane){var a=u._currentPane.getPreferences(),h=u._currentPane._extension.id,p=davinci.Workbench.getProject();u.savePreferences(h,p,a);u._currentPane.save&&u._currentPane.save(a)}for(a=0;a<b.length;a++){try{b[a].save&&b[a].save()}catch(D){}b[a].children&&0<b[a].children.length&&u._save(b[a].children)}},save:function(){u._save(u._extensions);u.finish()},
finish:function(){u._extensions=null;u._currentPane=null;this.dialog.destroyRecursive(!1);this.dialog=null},getPreferences:function(b,a){u._allPrefs[a]||(u._allPrefs[a]={});return{version:"1.7",specVersion:"0.8",snap:!0,helper:"maq-metadata-dojo/dojox/mobile/ThemeHelper",themeSets:[{_COMMENT_:"Defines site-specific default theme sets",desktopTheme:"claro",mobileTheme:[{device:"Android",theme:"android"},{device:"BlackBerry",theme:"blackberry"},{device:"iPad",theme:"ipad"},{device:"iPhone",theme:"iphone"},
{device:"other",theme:"iphone"}],name:"site_dojo_default"}]}},getDefaultPreferences:function(b){u._loadExtensions();for(var a=0;a<u._extensions.length;a++)if(u._extensions[a].id==b)return"string"===typeof u._extensions[a].defaultValues?f.serverJSONRequest({url:u._extensions[a].defaultValues,handleAs:"json",sync:!0}).defaultValues:u._extensions[a].defaultValues}};return g.setObject("davinci.workbench.Preferences",u)})},"davinci/ui/Dialog":function(){define("dojo/_base/declare dijit/form/Button dijit/Dialog dojo/dom-geometry dojo/dom-style dojo/_base/connect dojo/window dojo/parser davinci/_common".split(" "),
function(n,m,g,e,c,f,k,a,d){var h=n(g,{contentStyle:null,buildRendering:function(){this.inherited(arguments);dojo.addClass(this.domNode,"resizableDialog");dojo.addClass(this.domNode,"ui-widget-content");this.submitOnEnter&&dojo.addClass(this.domNode,"submitOnEnter")},_setContent:function(b,a){this.inherited(arguments);var h=dojo.doc.createElement("div");this.containerNode.appendChild(h);(h=dojo.query(".dijitDialogPaneContentArea",this.containerNode)[0])?dojo.connect(h,"onkeydown",this,"_onKeyDown"):
dojo.connect(this.domNode,"onkeydown",this,"_onKeyDown")},resize:function(b){if(b){var a=c.getComputedStyle(this.containerNode),a=e.getPadExtents(this.containerNode,a),h=b.w-a.w,d=b.h-a.h,d=d-e.getMarginBox(this.titleBar).h;b=dojo.query(".dijitDialogPaneContentArea",this.containerNode)[0];a=dojo.query(".dijitDialogPaneActionBar",this.containerNode)[0];d-=e.getMarginBox(a).h;h&&dojo.style(b,"width",h+"px");d&&dojo.style(b,"height",d+"px");dojo.forEach(this.getChildren(),dojo.hitch(this,function(b){b.resize&&
b.resize({w:h,h:d})}))}},show:function(){var b=this.inherited(arguments);if(this.contentStyle){if("object"==typeof this.contentStyle){var a={};this.contentStyle.width&&(a.w=parseInt(this.contentStyle.width));this.contentStyle.height&&(a.h=parseInt(this.contentStyle.height));var h=k.getBox(this.ownerDocument);h.w*=this.maxRatio;h.h*=this.maxRatio;a.h>h.h&&(e.position(this.containerNode),a.h=h.h);this.resize(a)}this._size();this._position();dojo.style(this.containerNode,"width","auto");dojo.style(this.containerNode,
"height","auto")}return b},_onKeyDown:function(b){var a=b.ctrlKey&&!dojo.isMac||dojo.isMac&&b.metaKey;b.which==dojo.keys.ENTER&&(a||this.submitOnEnter)&&(b=dojo.query("input[type\x3dsubmit]",this.containerNode),0<b.length&&(b=dijit.getEnclosingWidget(b[0]),a=document.createEvent("MouseEvents"),a.initMouseEvent("click",!0,!0,window,0,0,0,0,0,!1,!1,!1,!1,0,null),b._onClick(a)))}});h._timedDestroy=function(b,a){a&&a.forEach(f.disconnect);var h=f.connect(b,"onHide",function(){f.disconnect(h);b.destroyRecursive()});
b.hide()};h.showModal=function(b,a,d,c,k,e){var p=[];a={title:a,content:b,contentStyle:d,submitOnEnter:k};e&&(a.onShow=e);var g=new h(a);e=dojo.hitch(this,function(){var b=!1;c&&(b=c());b||this._timedDestroy(g,p)});p.push(f.connect(g,"onExecute",b,e));b.onExecute&&p.push(f.connect(b,"onExecute",b,e));p.push(f.connect(b,"onClose",dojo.hitch(this,function(){this._timedDestroy(g,p)})));p.push(f.connect(g,"onCancel",dojo.hitch(this,function(){this._timedDestroy(g,p)})));g.show();return g};h.showMessage=
function(b,a,h,d,f){return this.showDialog({title:b,content:a,style:h,okCallback:d,okLabel:null,hideCancel:!0})};h.showDialog=function(b){var p=b.title,c=b.content,k=b.style,e=b.okCallback,g=b.okLabel,x=b.hideCancel,y=b.submitOnEnter,u=b.extendLabels,q=b.extendCallbacks,v,B=[];b=document.createElement("div");var n=document.createElement("div");dojo.addClass(n,"dijitDialogPaneContentArea");b.appendChild(n);var D=document.createElement("div");dojo.addClass(D,"dijitDialogPaneActionBar");g=new m({label:g?
g:d.ok,type:"submit","class":"maqPrimaryButton"});D.appendChild(g.domNode);var F=dojo.hitch(this,function(){this._timedDestroy(v,B)});if(u&&q&&0<u.length&&u.length===q.length)for(g=0;g<u.length;g++){var C=function(b){if(q[b])q[b]();v.onCancel()}.bind(this,g);D.appendChild((new m({label:u[g],onClick:C,"class":"maqSecondaryButton"})).domNode)}x||D.appendChild((new m({label:d.cancel,onClick:function(){v.onCancel()},"class":"maqSecondaryButton"})).domNode);b.appendChild(D);v=new h({title:p,content:b,
contentStyle:k,submitOnEnter:y});dojo.isString(c)?(n.innerHTML=c,a.parse(n)):c.domNode?n.appendChild(c.domNode):n.appendChild(c);B.push(f.connect(v,"onExecute",dojo.hitch(this,function(){e&&e();F()})));B.push(f.connect(v,"onCancel",dojo.hitch(this,function(){F()})));v.show();return v};return h})},"dojo/window":function(){define("./_base/lang ./sniff ./_base/window ./dom ./dom-geometry ./dom-style ./dom-construct".split(" "),function(n,m,g,e,c,f,k){m.add("rtl-adjust-position-for-verticalScrollBar",
function(a,h){a=g.body(h);h=k.create("div",{style:{overflow:"scroll",overflowX:"visible",direction:"rtl",visibility:"hidden",position:"absolute",left:"0",top:"0",width:"64px",height:"64px"}},a,"last");var b=k.create("div",{style:{overflow:"hidden",direction:"ltr"}},h,"last"),d=0!=c.position(b).x;h.removeChild(b);a.removeChild(h);return d});m.add("position-fixed-support",function(a,h){a=g.body(h);h=k.create("span",{style:{visibility:"hidden",position:"fixed",left:"1px",top:"1px"}},a,"last");var b=
k.create("span",{style:{position:"fixed",left:"0",top:"0"}},h,"last"),d=c.position(b).x!=c.position(h).x;h.removeChild(b);a.removeChild(h);return d});var a={getBox:function(d){d=d||g.doc;var h="BackCompat"==d.compatMode?g.body(d):d.documentElement,b=c.docScroll(d);if(m("touch")){var p=a.get(d);d=p.innerWidth||h.clientWidth;h=p.innerHeight||h.clientHeight}else d=h.clientWidth,h=h.clientHeight;return{l:b.x,t:b.y,w:d,h:h}},get:function(d){if(9>m("ie")&&a!==document.parentWindow){d.parentWindow.execScript("document._parentWindow \x3d window;",
"Javascript");var h=d._parentWindow;d._parentWindow=null;return h}return d.parentWindow||d.defaultView},scrollIntoView:function(a,h){try{a=e.byId(a);var b=a.ownerDocument||g.doc,p=g.body(b),d=b.documentElement||p.parentNode,k=m("ie"),w=m("webkit");if(a!=p&&a!=d)if(!(m("mozilla")||k||w||m("opera"))&&"scrollIntoView"in a)a.scrollIntoView(!1);else{var A="BackCompat"==b.compatMode,x=Math.min(p.clientWidth||d.clientWidth,d.clientWidth||p.clientWidth),y=Math.min(p.clientHeight||d.clientHeight,d.clientHeight||
p.clientHeight),b=w||A?p:d,u=h||c.position(a),q=a.parentNode;h=function(a){return 6>=k||7==k&&A?!1:m("position-fixed-support")&&"fixed"==f.get(a,"position").toLowerCase()};if(!h(a))for(;q;){q==p&&(q=b);var v=c.position(q),B=h(q),n="rtl"==f.getComputedStyle(q).direction.toLowerCase();if(q==b){v.w=x;v.h=y;b==d&&k&&n&&(v.x+=b.offsetWidth-v.w);if(0>v.x||!k||9<=k)v.x=0;if(0>v.y||!k||9<=k)v.y=0}else{var D=c.getPadBorderExtents(q);v.w-=D.w;v.h-=D.h;v.x+=D.l;v.y+=D.t;var F=q.clientWidth,C=v.w-F;0<F&&0<C&&
(n&&m("rtl-adjust-position-for-verticalScrollBar")&&(v.x+=C),v.w=F);F=q.clientHeight;C=v.h-F;0<F&&0<C&&(v.h=F)}B&&(0>v.y&&(v.h+=v.y,v.y=0),0>v.x&&(v.w+=v.x,v.x=0),v.y+v.h>y&&(v.h=y-v.y),v.x+v.w>x&&(v.w=x-v.x));var E=u.x-v.x,M=u.y-v.y,G=E+u.w-v.w,J=M+u.h-v.h,H,K;0<G*E&&(q.scrollLeft||q==b||q.scrollWidth>q.offsetHeight)&&(H=Math[0>E?"max":"min"](E,G),n&&(8==k&&!A||9<=k)&&(H=-H),K=q.scrollLeft,q.scrollLeft+=H,H=q.scrollLeft-K,u.x-=H);0<J*M&&(q.scrollTop||q==b||q.scrollHeight>q.offsetHeight)&&(H=Math.ceil(Math[0>
M?"max":"min"](M,J)),K=q.scrollTop,q.scrollTop+=H,H=q.scrollTop-K,u.y-=H);q=q!=b&&!B&&q.parentNode}}}catch(L){console.error("scrollIntoView: "+L),a.scrollIntoView(!1)}}};n.setObject("dojo.window",a);return a})},"davinci/_common":function(){define([],function(){return{search:"Search",filter:"Filter","new":"New",errorSavingFile:"Error saving file: ${0} details: ${1}",palette:"palette",closeAllEditors:"Close all tabs",undo:"Undo",redo:"Redo",copy:"Copy",paste:"Paste",cut:"Cut","delete":"Delete",surround:"Surround",
properties:"Properties",styles:"Styles",events:"Events",preferences:"Preferences",addPane:"Add Pane",addColumn:"Add Column",addRow:"Add Row",removeColumn:"Remove Column",removeRow:"Remove Row",joinColumn:"Join Column",joinRow:"Join Row",splitColumn:"Split Column",splitRow:"Split Row",alignLeft:"Align Left",alignRight:"Align Right",alignTop:"Align Top",alignBottom:"Align Bottom",show:"Show",hide:"Hide",addMenuItem:"Add Menu Item",addSubMenu:"Add Sub Menu",addMenuBarItem:"Add MenuBar Item",addPopupMenuBar:"Add Popup MenuBarItem",
ok:"OK",cancel:"Cancel",page:"Page",title:"Title",metaInfo:"Meta Info",httpEquiv:"HTTP Equiv",style:"Style",theme:"Theme",styleSheets:"Style Sheets",rules:"Rules",url:"URL",externalScripts:"External Scripts",modules:"Modules",name:"Name",value:"Value",add:"Add",remove:"Remove",staticOptions:"Static Options",axisOptions:"Axis Options",series:"Series",axis:"Axis",option:"Option",selected:"Selected",staticItems:"Static Items",dataStore:"Data Store",query:"Query",fields:"Fields",field:"Field",label:"Label",
width:"Width",edit:"Edit",key:"Key",rootId:"Root ID",rootLabel:"Root Label",childrenAttrs:"Children Attributes",items:"Items",type:"Type",widget:"Widget",position:"Position",size:"Size",layout:"Layout",visual:"Visual",text:"Text",border:"Border",table:"Table",list:"List",aural:"Aural",others:"Others",onLoad:"Load",onUnload:"Unload",script:"Script",methodCall:"Method Call",serviceCall:"Service Call",object:"Object",method:"Method",parameters:"Parameters",result:"Result",service:"Service",content:"Content",
source:"Source",target:"Target",property:"Property",flowLayout:"Flow Layout",snapToNearestWidget:"Snap to nearest widget",showPossibleParents:"When dragging, show possible parents",warnOnCSSOverride:"Warn on CSS Override",absoluteWidgetsZindex:"z-index for sketch mode",widgetPaletteLayout:"In Palette, display widgets as",widgetPaletteShow_Icons:"icons",widgetPaletteShow_List:"list",liveEdit:"Live Edit",zazl:"Enable \x3ca href\x3d'http://zazl.org' target\x3d'_blank'\x3eZazl Optimizer\x3c/a\x3e",selectorPrefix:"Selector Prefix",
component:"Component",alternates:"Alternates",alternateWidgets:"Alternate widgets:",howToChooseAlternate:"To choose alternate widget, click-select current widget, then click on up arrow icon.",summary:"Summary:",description:"Description:",showSuggestedWidgets:"Suggested Widgets",showAllWidgets:"All Widgets",MoreIconTitleString:"Click here to see alternative similar widgets",HelpIconTitleString:"Click here to see descriptive info about this widget",__dummy__:""}})},"dojo/data/ItemFileReadStore":function(){define("../_base/kernel ../_base/lang ../_base/declare ../_base/array ../_base/xhr ../Evented ./util/filter ./util/simpleFetch ../date/stamp".split(" "),
function(n,m,g,e,c,f,k,a,d){g=g("dojo.data.ItemFileReadStore",[f],{constructor:function(a){this._arrayOfAllItems=[];this._arrayOfTopLevelItems=[];this._loadFinished=!1;this.url=this._ccUrl=this._jsonFileUrl=a.url;this._jsonData=a.data;this.data=null;this._datatypeMap=a.typeMap||{};this._datatypeMap.Date||(this._datatypeMap.Date={type:Date,deserialize:function(a){return d.fromISOString(a)}});this._features={"dojo.data.api.Read":!0,"dojo.data.api.Identity":!0};this._itemsByIdentity=null;this._storeRefPropName=
"_S";this._itemNumPropName="_0";this._rootItemPropName="_RI";this._reverseRefMap="_RRM";this._loadInProgress=!1;this._queuedFetches=[];void 0!==a.urlPreventCache&&(this.urlPreventCache=a.urlPreventCache?!0:!1);void 0!==a.hierarchical&&(this.hierarchical=a.hierarchical?!0:!1);a.clearOnClose&&(this.clearOnClose=!0);"failOk"in a&&(this.failOk=a.failOk?!0:!1)},url:"",_ccUrl:"",data:null,typeMap:null,clearOnClose:!1,urlPreventCache:!1,failOk:!1,hierarchical:!0,_assertIsItem:function(a){if(!this.isItem(a))throw Error(this.declaredClass+
": Invalid item argument.");},_assertIsAttribute:function(a){if("string"!==typeof a)throw Error(this.declaredClass+": Invalid attribute argument.");},getValue:function(a,b,d){a=this.getValues(a,b);return 0<a.length?a[0]:d},getValues:function(a,b){this._assertIsItem(a);this._assertIsAttribute(b);return(a[b]||[]).slice(0)},getAttributes:function(a){this._assertIsItem(a);var b=[],h;for(h in a)h!==this._storeRefPropName&&h!==this._itemNumPropName&&h!==this._rootItemPropName&&h!==this._reverseRefMap&&
b.push(h);return b},hasAttribute:function(a,b){this._assertIsItem(a);this._assertIsAttribute(b);return b in a},containsValue:function(a,b,d){var h=void 0;"string"===typeof d&&(h=k.patternToRegExp(d,!1));return this._containsValue(a,b,d,h)},_containsValue:function(a,b,d,f){return e.some(this.getValues(a,b),function(a){if(null!==a&&!m.isObject(a)&&f){if(a.toString().match(f))return!0}else if(d===a)return!0})},isItem:function(a){return a&&a[this._storeRefPropName]===this&&this._arrayOfAllItems[a[this._itemNumPropName]]===
a?!0:!1},isItemLoaded:function(a){return this.isItem(a)},loadItem:function(a){this._assertIsItem(a.item)},getFeatures:function(){return this._features},getLabel:function(a){if(this._labelAttr&&this.isItem(a))return this.getValue(a,this._labelAttr)},getLabelAttributes:function(a){return this._labelAttr?[this._labelAttr]:null},filter:function(a,b,d){var h=[],p,f;if(a.query){var c;p=a.queryOptions?a.queryOptions.ignoreCase:!1;var e={};for(f in a.query)c=a.query[f],"string"===typeof c?e[f]=k.patternToRegExp(c,
p):c instanceof RegExp&&(e[f]=c);for(p=0;p<b.length;++p){var g=!0,m=b[p];if(null===m)g=!1;else for(f in a.query)c=a.query[f],this._containsValue(m,f,c,e[f])||(g=!1);g&&h.push(m)}}else for(p=0;p<b.length;++p)f=b[p],null!==f&&h.push(f);d(h,a)},_fetchItems:function(a,b,d){var h=this;if(this._loadFinished)this.filter(a,this._getItemsArray(a.queryOptions),b);else if(this._jsonFileUrl!==this._ccUrl?(n.deprecated(this.declaredClass+": ","To change the url, set the url property of the store, not _jsonFileUrl.  _jsonFileUrl support will be removed in 2.0"),
this.url=this._ccUrl=this._jsonFileUrl):this.url!==this._ccUrl&&(this._ccUrl=this._jsonFileUrl=this.url),null!=this.data&&(this._jsonData=this.data,this.data=null),this._jsonFileUrl)if(this._loadInProgress)this._queuedFetches.push({args:a,filter:m.hitch(h,"filter"),findCallback:m.hitch(h,b)});else{this._loadInProgress=!0;var p=c.get({url:h._jsonFileUrl,handleAs:"json-comment-optional",preventCache:this.urlPreventCache,failOk:this.failOk});p.addCallback(function(p){try{h._getItemsFromLoadedData(p),
h._loadFinished=!0,h._loadInProgress=!1,h.filter(a,h._getItemsArray(a.queryOptions),b),h._handleQueuedFetches()}catch(x){h._loadFinished=!0,h._loadInProgress=!1,d(x,a)}});p.addErrback(function(b){h._loadInProgress=!1;d(b,a)});var f=null;a.abort&&(f=a.abort);a.abort=function(){var b=p;b&&-1===b.fired&&(b.cancel(),b=null);f&&f.call(a)}}else if(this._jsonData)try{this._loadFinished=!0,this._getItemsFromLoadedData(this._jsonData),this._jsonData=null,h.filter(a,this._getItemsArray(a.queryOptions),b)}catch(A){d(A,
a)}else d(Error(this.declaredClass+": No JSON source data was provided as either URL or a nested Javascript object."),a)},_handleQueuedFetches:function(){if(0<this._queuedFetches.length){for(var a=0;a<this._queuedFetches.length;a++){var b=this._queuedFetches[a],d=b.args,f=b.filter,b=b.findCallback;f?f(d,this._getItemsArray(d.queryOptions),b):this.fetchItemByIdentity(d)}this._queuedFetches=[]}},_getItemsArray:function(a){return a&&a.deep?this._arrayOfAllItems:this._arrayOfTopLevelItems},close:function(a){this.clearOnClose&&
this._loadFinished&&!this._loadInProgress&&(this._arrayOfAllItems=[],this._arrayOfTopLevelItems=[],this._loadFinished=!1,this._itemsByIdentity=null,this._loadInProgress=!1,this._queuedFetches=[])},_getItemsFromLoadedData:function(a){function b(a){return null!==a&&"object"===typeof a&&(!m.isArray(a)||d)&&!m.isFunction(a)&&(a.constructor==Object||m.isArray(a))&&"undefined"===typeof a._reference&&"undefined"===typeof a._type&&"undefined"===typeof a._value&&f.hierarchical}function h(a){f._arrayOfAllItems.push(a);
for(var d in a){var p=a[d];if(p)if(m.isArray(p))for(var c=0;c<p.length;++c){var k=p[c];b(k)&&h(k)}else b(p)&&h(p)}}var d=!1,f=this;this._labelAttr=a.label;var c,k;this._arrayOfAllItems=[];this._arrayOfTopLevelItems=a.items;for(c=0;c<this._arrayOfTopLevelItems.length;++c)k=this._arrayOfTopLevelItems[c],m.isArray(k)&&(d=!0),h(k),k[this._rootItemPropName]=!0;var e={},g;for(c=0;c<this._arrayOfAllItems.length;++c)for(g in k=this._arrayOfAllItems[c],k){if(g!==this._rootItemPropName){var u=k[g];null!==u?
m.isArray(u)||(k[g]=[u]):k[g]=[null]}e[g]=g}for(;e[this._storeRefPropName];)this._storeRefPropName+="_";for(;e[this._itemNumPropName];)this._itemNumPropName+="_";for(;e[this._reverseRefMap];)this._reverseRefMap+="_";if(e=a.identifier)for(this._itemsByIdentity={},this._features["dojo.data.api.Identity"]=e,c=0;c<this._arrayOfAllItems.length;++c)if(k=this._arrayOfAllItems[c],a=k[e],a=a[0],Object.hasOwnProperty.call(this._itemsByIdentity,a)){if(this._jsonFileUrl)throw Error(this.declaredClass+":  The json data as specified by: ["+
this._jsonFileUrl+"] is malformed.  Items within the list have identifier: ["+e+"].  Value collided: ["+a+"]");if(this._jsonData)throw Error(this.declaredClass+":  The json data provided by the creation arguments is malformed.  Items within the list have identifier: ["+e+"].  Value collided: ["+a+"]");}else this._itemsByIdentity[a]=k;else this._features["dojo.data.api.Identity"]=Number;for(c=0;c<this._arrayOfAllItems.length;++c)k=this._arrayOfAllItems[c],k[this._storeRefPropName]=this,k[this._itemNumPropName]=
c;for(c=0;c<this._arrayOfAllItems.length;++c)for(g in k=this._arrayOfAllItems[c],k)for(a=k[g],e=0;e<a.length;++e)if(u=a[e],null!==u&&"object"==typeof u){if("_type"in u&&"_value"in u){var q=u._type,v=this._datatypeMap[q];if(v)if(m.isFunction(v))a[e]=new v(u._value);else if(m.isFunction(v.deserialize))a[e]=v.deserialize(u._value);else throw Error("dojo.data.ItemFileReadStore: Value provided in typeMap was neither a constructor, nor a an object with a deserialize function");else throw Error("dojo.data.ItemFileReadStore: in the typeMap constructor arg, no object class was specified for the datatype '"+
q+"'");}if(u._reference){u=u._reference;if(m.isObject(u))for(q=0;q<this._arrayOfAllItems.length;++q){var v=this._arrayOfAllItems[q],B=!0,n;for(n in u)v[n]!=u[n]&&(B=!1);B&&(a[e]=v)}else a[e]=this._getItemByIdentity(u);this.referenceIntegrity&&(u=a[e],this.isItem(u)&&this._addReferenceToMap(u,k,g))}else this.isItem(u)&&this.referenceIntegrity&&this._addReferenceToMap(u,k,g)}},_addReferenceToMap:function(a,b,d){},getIdentity:function(a){var b=this._features["dojo.data.api.Identity"];return b===Number?
a[this._itemNumPropName]:(a=a[b])?a[0]:null},fetchItemByIdentity:function(a){var b,d;if(this._loadFinished)b=this._getItemByIdentity(a.identity),a.onItem&&(d=a.scope?a.scope:n.global,a.onItem.call(d,b));else{var h=this;this._jsonFileUrl!==this._ccUrl?(n.deprecated(this.declaredClass+": ","To change the url, set the url property of the store, not _jsonFileUrl.  _jsonFileUrl support will be removed in 2.0"),this.url=this._ccUrl=this._jsonFileUrl):this.url!==this._ccUrl&&(this._ccUrl=this._jsonFileUrl=
this.url);null!=this.data&&null==this._jsonData&&(this._jsonData=this.data,this.data=null);this._jsonFileUrl?this._loadInProgress?this._queuedFetches.push({args:a}):(this._loadInProgress=!0,d=c.get({url:h._jsonFileUrl,handleAs:"json-comment-optional",preventCache:this.urlPreventCache,failOk:this.failOk}),d.addCallback(function(d){var p=a.scope?a.scope:n.global;try{h._getItemsFromLoadedData(d),h._loadFinished=!0,h._loadInProgress=!1,b=h._getItemByIdentity(a.identity),a.onItem&&a.onItem.call(p,b),h._handleQueuedFetches()}catch(A){h._loadInProgress=
!1,a.onError&&a.onError.call(p,A)}}),d.addErrback(function(b){h._loadInProgress=!1;a.onError&&a.onError.call(a.scope?a.scope:n.global,b)})):this._jsonData&&(h._getItemsFromLoadedData(h._jsonData),h._jsonData=null,h._loadFinished=!0,b=h._getItemByIdentity(a.identity),a.onItem&&(d=a.scope?a.scope:n.global,a.onItem.call(d,b)))}},_getItemByIdentity:function(a){var b=null;this._itemsByIdentity?Object.hasOwnProperty.call(this._itemsByIdentity,a)&&(b=this._itemsByIdentity[a]):Object.hasOwnProperty.call(this._arrayOfAllItems,
a)&&(b=this._arrayOfAllItems[a]);void 0===b&&(b=null);return b},getIdentityAttributes:function(a){a=this._features["dojo.data.api.Identity"];return a===Number?null:[a]},_forceLoad:function(){var a=this;this._jsonFileUrl!==this._ccUrl?(n.deprecated(this.declaredClass+": ","To change the url, set the url property of the store, not _jsonFileUrl.  _jsonFileUrl support will be removed in 2.0"),this.url=this._ccUrl=this._jsonFileUrl):this.url!==this._ccUrl&&(this._ccUrl=this._jsonFileUrl=this.url);null!=
this.data&&(this._jsonData=this.data,this.data=null);if(this._jsonFileUrl){var b=c.get({url:this._jsonFileUrl,handleAs:"json-comment-optional",preventCache:this.urlPreventCache,failOk:this.failOk,sync:!0});b.addCallback(function(b){try{if(!0!==a._loadInProgress&&!a._loadFinished)a._getItemsFromLoadedData(b),a._loadFinished=!0;else if(a._loadInProgress)throw Error(this.declaredClass+":  Unable to perform a synchronous load, an async load is in progress.");}catch(z){throw z;}});b.addErrback(function(a){throw a;
})}else this._jsonData&&(a._getItemsFromLoadedData(a._jsonData),a._jsonData=null,a._loadFinished=!0)}});m.extend(g,a);return g})},"dojo/data/util/filter":function(){define(["../../_base/lang"],function(n){var m={};n.setObject("dojo.data.util.filter",m);m.patternToRegExp=function(g,e){for(var c="^",f=null,k=0;k<g.length;k++)switch(f=g.charAt(k),f){case "\\":c+=f;k++;c+=g.charAt(k);break;case "*":c+=".*";break;case "?":c+=".";break;case "$":case "^":case "/":case "+":case ".":case "|":case "(":case ")":case "{":case "}":case "[":case "]":c+=
"\\";default:c+=f}c+="$";return e?new RegExp(c,"mi"):new RegExp(c,"m")};return m})},"dojo/data/util/simpleFetch":function(){define(["../../_base/lang","../../_base/kernel","./sorter"],function(n,m,g){var e={};n.setObject("dojo.data.util.simpleFetch",e);e.errorHandler=function(c,f){f.onError&&f.onError.call(f.scope||m.global,c,f)};e.fetchHandler=function(c,f){var k=f.abort||null,a=!1,d=f.start?f.start:0,h=f.count&&Infinity!==f.count?d+f.count:c.length;f.abort=function(){a=!0;k&&k.call(f)};var b=f.scope||
m.global;f.store||(f.store=this);f.onBegin&&f.onBegin.call(b,c.length,f);f.sort&&c.sort(g.createSortFunction(f.sort,this));if(f.onItem)for(var p=d;p<c.length&&p<h;++p){var e=c[p];a||f.onItem.call(b,e,f)}f.onComplete&&!a&&(p=null,f.onItem||(p=c.slice(d,h)),f.onComplete.call(b,p,f))};e.fetch=function(c){c=c||{};c.store||(c.store=this);this._fetchItems(c,n.hitch(this,"fetchHandler"),n.hitch(this,"errorHandler"));return c};return e})},"dojo/data/util/sorter":function(){define(["../../_base/lang"],function(n){var m=
{};n.setObject("dojo.data.util.sorter",m);m.basicComparator=function(g,e){var c=-1;null===g&&(g=void 0);null===e&&(e=void 0);if(g==e)c=0;else if(g>e||null==g)c=1;return c};m.createSortFunction=function(g,e){function c(a,b,d,h){return function(p,f){p=h.getValue(p,a);f=h.getValue(f,a);return b*d(p,f)}}for(var f=[],k,a=e.comparatorMap,d=m.basicComparator,h=0;h<g.length;h++){k=g[h];var b=k.attribute;if(b){k=k.descending?-1:1;var p=d;a&&("string"!==typeof b&&"toString"in b&&(b=b.toString()),p=a[b]||d);
f.push(c(b,k,p,e))}}return function(a,b){for(var d=0;d<f.length;){var h=f[d++](a,b);if(0!==h)return h}return 0}};return m})},"davinci/lang/workbench":function(){define([],function(){return{fileHasUnsavedChanges:"The file '${0}' has unsaved changes. Are you sure you want to close WITHOUT saving?",outlineNotAvailable:"An outline is not available",preferences:"Preferences",noUserPref:"no user preferences...",restoreDefaults:"Restore Defaults"}})},"davinci/repositoryinfo":function(){define({revision:"",
buildtime:"@buildtime@"})},"davinci/Workbench":function(){define("dcl/dcl dojo/_base/lang require ./Runtime ./ui/Dialog ./ve/metadata ./ve/utils/GeomUtils davinci/_WokbenchEditors davinci/_WokbenchMisc davinci/_Workbench_Menu davinci/_Workbench_Palette xide/widgets/ContextMenu xide/utils xide/types".split(" "),function(n,m,g,e,c,f,k,a,d,h,b,p,z,r){Function.prototype.bind=Function.prototype.bind||function(a){return dojo.hitch(a,this)};window.setInterval(function(){w.saveState&&w.updateWorkbenchState()},
5E3);var w=new (n([a,d,h,b],{declaredClass:"davinci.Workbench",_XX_last_member:!0,activePerspective:"",actionScope:[],_DEFAULT_PROJECT:"project1",_baseTitle:"Control-Freak ",hideEditorTabs:!0,_editorTabClosing:{},_shadowTabClosing:{},service:null,serviceClass:"XApp_XIDE_Workbench_Service",currentEditor:null,run2:function(){e.subscribe("/davinci/ui/widgetPropertiesChanges",function(){var a=e.currentEditor.visualEditor;a._objectPropertiesChange.apply(a,arguments)})},onResize:function(a){var b=a.explicitOriginalTarget?
a.explicitOriginalTarget:a.srcElement;if(("resize"==a.type||b.id&&-1<b.id.indexOf("dijit_layout__Splitter_")||b.nextSibling&&b.nextSibling.id&&-1<b.nextSibling.id.indexOf("dijit_layout__Splitter_"))&&(a=davinci&&e.currentEditor)&&a.onResize)a.onResize();w._originalOnResize&&w._originalOnResize();w._repositionFocusContainer()},showModal:function(a,b,d,h,p,f){return c.showModal(a,b,d,h,p,f)},showMessage:function(a,b,d,h,p){return c.showMessage(a,b,d,h,p)},showDialog:function(a){return c.showDialog(a)},
_loadActionClass:function(a){a&&"string"==typeof a.action&&g([a.action],function(b){try{if(b)a.action=new b,a.action.item=a;else debugger}catch(y){console.error("action class creation failed : "+a.action)}})},_toggleButton:function(a,b,d,h){a.checked&&(d.forEach(function(b){b!=a&&b.set("checked",!1)}),w._runAction(a.item,b,a.item.id))},_runAction:function(a,b,d){b&&e.currentEditor&&(b=e.currentEditor);if(a.run)a.run();else if(a.action)dojo.isString(a.action)&&this._loadActionClass(a),a.action.run(b);
else if(a.method&&b&&b[a.method]instanceof Function)b[a.method](d);else a.commandID&&e.executeCommand(a.commandID)},createPopup:function(a){function b(a){var b=this.contextMenuArgs||{};z.mixin(b,{owner:this,delegate:this,actionFilter:{quick:!0}});var d=new p(b,a);d.openTarget=a;d.init({preventDoubleContext:!1});d._registerActionEmitter(this);$(a).one("contextmenu",function(a){a.preventDefault();this.store||d.setActionStore(this.getActionStore(),this)}.bind(this));this.contextMenu=d}var d=a.partID,
h=a.domNode,f=a.context,c=a.openCallback;if("davinci.ve.visualEditor"===d)f.cMenu||(f.cMenu=b.apply(f.getVisualEditor(),[h]),f.getVisualEditor().add(f.cMenu));else{var k=this.getActionSets(d),e=k.clonedActionSets,k=k.actionSets;try{if(0<e.length){var g=w._createMenuTree(e,!0);w._initActionsKeys(k,a);var r=w._createMenu(g,f);r&&h&&r.bindDomNode(h);r._widgetCallback=c;r._partID=d;return r}}catch(C){logError(C,"creating popup")}}},getActionSets:function(a){var b=[];e.getExtension("davinci.actionSetPartAssociations",
function(d){return d.parts.some(function(h){if(h==a)return b.push(d.targetID),!0})});var d,h=[];b.length&&(d=e.getExtensions("davinci.actionSets",function(a){return b.some(function(b){return b==a.id})}),d.length&&d.forEach(function(a){var b=f.getLibraryActions(a.id);b.length&&(a=m.mixin({},a),a.actions=a.actions.concat(b));h.push(a)}));return{actionSets:d,clonedActionSets:h}},getFocusContainer:function(){var a=document.getElementById("focusContainer");a||(a=dojo.create("div",{"class":"focusContainer",
id:"focusContainer"},document.body),davinci.Workbench.focusContainer=a);return a},_repositionFocusContainer:function(){var a=dojo.byId("editorsStackContainer"),b=this.getFocusContainer();if(a&&b){var d=e.currentEditor;if(a=d&&d.getFocusContainerBounds?d.getFocusContainerBounds():k.getBorderBoxPageCoords(a))b.style.left=a.l+"px",b.style.top=a.t+"px",b.style.width=a.w+"px",b.style.height=a.h+"px",d&&d.getContext&&(b=d.getContext())&&b.updateFocusAll&&b.updateFocusAll()}},_removeFocusContainerChildren:function(){davinci.Workbench.focusContainer&&
(davinci.Workbench.focusContainer.innerHTML="")}}));dojo.setObject("davinci.Workbench",w);return w})},"davinci/ve/utils/GeomUtils":function(){define(["dojo/_base/window","dojo/dom-geometry","dojo/dom-style","dojo/has"],function(n,m,g,e){var c=["TABLE","TBODY","TR","TD","TH"];return{getMarginBoxPageCoords:function(f){var c;n.withDoc(f.ownerDocument,function(){var a=this.getBorderBoxPageCoords(f),d=this.getMarginExtents(f);c={l:a.l-d.l,t:a.t-d.t,w:a.w+d.l+d.r,h:a.h+d.t+d.b}}.bind(this));return c},getMarginBoxPageCoordsCached:function(f){f._maqMarginBoxPageCoords||
(f._maqMarginBoxPageCoords=this.getMarginBoxPageCoords(f));return f._maqMarginBoxPageCoords},getBorderBoxPageCoords:function(f){var k;n.withDoc(f.ownerDocument,function(){if(c.indexOf(f.tagName)){var a=f.getBoundingClientRect(),d=this.getScrollLeft(f),h=this.getScrollTop(f);k={l:a.left+d,t:a.top+h,w:a.width,h:a.height}}else{for(var a=f.offsetLeft,d=f.offsetTop,h=f.parentNode,b=f.offsetParent;h&&"BODY"!=h.tagName;){"number"==typeof h.scrollLeft&&"number"==typeof h.scrollTop&&(a-=h.scrollLeft,d-=h.scrollTop);
if(h==b)var p=m.getBorderExtents(b),a=a+(b.offsetLeft+p.l),d=d+(b.offsetTop+p.t),b=b.offsetParent;h=h.parentNode}k={l:a,t:d,w:f.offsetWidth,h:f.offsetHeight}}}.bind(this));return k},getBorderBoxPageCoordsCached:function(f){f._maqBorderBoxPageCoords||(f._maqBorderBoxPageCoords=this.getBorderBoxPageCoords(f));return f._maqBorderBoxPageCoords},getScrollLeft:function(f){f=f&&f.ownerDocument;return e("mozilla")?(f=f&&f.defaultView)?f.pageXOffset:0:(f=f&&f.body)?f.scrollLeft:0},getScrollTop:function(f){f=
f&&f.ownerDocument;return e("mozilla")?(f=f&&f.defaultView)?f.pageYOffset:0:(f=f&&f.body)?f.scrollTop:0},getMarginExtents:function(f,c){var a=c||g.getComputedStyle(f),d;a?(f=parseFloat(a.marginLeft)||0,c=parseFloat(a.marginTop)||0,d=parseFloat(a.marginRight)||0,a=parseFloat(a.marginBottom)||0):f=c=d=a=0;return{l:f,t:c,r:d,b:a,w:f+d,h:c+a}},clearGeomCache:function(f){delete f._maqBorderBoxPageCoords;delete f._maqMarginBoxPageCoords}}})},"davinci/_WokbenchEditors":function(){define(["dcl/dcl","./Runtime",
"dojo/promise/all"],function(n,m,g){return n(null,{closeAllEditors:function(){var e=dijit.byId("editors_container");e&&e.getChildren().forEach(function(c){e.closeChild(c)})},getOpenEditor:function(e){return this.currentEditor?this.currentEditor:null!=e?(e=dijit.byId(filename2id(e.getPath())))?e.editor:null:(e=dijit.byId("editors_container"))&&e.selectedChildWidget&&e.selectedChildWidget.editor?e.selectedChildWidget.editor:null},closeActiveEditor:function(){var e=dijit.byId("editors_container"),c=
dijit.byId("davinci_file_tabs");if(e&&e.selectedChildWidget&&e.selectedChildWidget.editor){var f=selectedChildWidget.id.replace(/^editor/,"shadow");e.closeChild(e.selectedChildWidget);(e=dijit.byId(f))&&c.closeChild(e)}},getAllOpenEditorIds:function(){},_showEditorTopPanes:function(){this._hideShowEditorTopPanes("block")},_hideEditorTopPanes:function(){this._hideShowEditorTopPanes("none")},_hideShowEditorTopPanes:function(e){},_editorTabClosed:function(e){if(!davinci.Workbench._editorTabClosing[e.id]){davinci.Workbench._editorTabClosing[e.id]=
!0;if(e&&e.editor&&e.editor.fileName){var c=e.id.replace(/^editor/,"shadow"),f=dijit.byId("davinci_file_tabs"),k=dijit.byId(c),a=Workbench._state.editors.indexOf(e.editor.fileName);-1!=a&&Workbench._state.editors.splice(a,1);Workbench.saveState=!0;davinci.Workbench._shadowTabClosing[c]||(f.removeChild(k),k.destroyRecursive())}dijit.byId("editors_container").getChildren().length||(Workbench._switchEditor(null),this._expandCollapsePaletteContainers(null),c=dijit.byId("editorsStackContainer"),f=dijit.byId("editorsWelcomePage"),
c&&f&&c.selectChild(f),this._hideEditorTopPanes());delete davinci.Workbench._editorTabClosing[e.id]}},openEditor:function(e,c){try{var f=e.fileName,k;"string"==typeof f?k=f.substr(f.lastIndexOf(".")+1):(k=f.getExtension(),f=f.getPath());var a=dijit.byId(filename2id(f)),d=dijit.byId("editors_container");if(a){d.selectChild(a);var h=a.editor;e.startOffset&&h.select(e)}else{var b=e.editorCreateCallback,p=m.getExtensions("davinci.editor",function(a){"string"==typeof a.extensions&&(a.extensions=a.extensions.split(","));
return dojo.some(a.extensions,function(a){return a.toLowerCase()==k.toLowerCase()})}),g=p[0];1<p.length&&dojo.some(p,function(a){g=a;return a.isDefault});Workbench._createEditor(g,f,e,c).then(function(a){b&&b.call(window,a);e.noSelect||(m.currentEditor=a)},function(a){console.error("Error opening editor for filename: "+f,a)})}}catch(r){console.error("Exception opening editor for filename: "+e&&e.fileName),console.error(r)}},_switchEditor:function(e,c){var f=m.currentEditor;m.currentEditor=e;var k=
davinci.Workbench;k._state&&(k._state.activeEditor=e?e.fileName:null);this._removeFocusContainerChildren();this._showEditorTopPanes();try{dojo.publish("/davinci/ui/editorSelected",[{editor:e,oldEditor:f}])}catch(a){console.error(a)}k._updateTitle(e);setTimeout(function(){e&&e.visualEditor&&e.visualEditor.context&&e.visualEditor.context.isActive()&&e.visualEditor.context.getTopWidgets().forEach(function(a){a.resize&&a.resize()});this._repositionFocusContainer()}.bind(this),1E3);g(this._showViewPromises).then(function(){e&&
e.focus&&e.focus();this._rearrangePalettes(e);this._expandCollapsePaletteContainers(e)}.bind(this));c||(k.saveState=!0)}})})},"davinci/_WokbenchMisc":function(){define("dcl/dcl require ./Runtime ./ui/Dialog davinci/lang/webContent ./ve/metadata dojo/_base/connect xide/manager/ServerActionBase".split(" "),function(n,m,g,e,c,f,k,a){var d=function(a,d){401==d.status||403==d.status?h():!0===a.canceled&&(a=a.ioArgs.url,(new RegExp("(^|\\.\\/|"+document.baseURI+"\\/)cmd\\/")).test(a)&&(0<=a.indexOf("getBluePageInfo")||
g.handleError(d.message)))},h=function(){var a=new e({title:c.sessionTimedOut}),d=dojo.string.substitute(c.sessionTimedOutMsg,{hrefLoc:"welcome"});a.set("content",d);dojo.connect(a,"onCancel",null,function(){window.location.href="welcome"});setTimeout(function(){window.location.href="welcome"},1E4);a.show()};return n(null,{run:function(){var a=davinci.Workbench;console.error("run ");g.run();a._initKeys();a._baseTitle=dojo.doc.title;try{a.initService()}catch(z){debugger}window.maqetta&&maqetta.TopBanner&&
maqetta.TopBanner.setup&&maqetta.TopBanner.setup();g.subscribe("/davinci/resource/resourceChanged",function(a,b){if("deleted"==a&&(a="editor-"+encodeURIComponent(b.getPath().replace(/[\/| |\t]/g,"_")).replace(/%/g,":"),b=editorIdToShadowId(a),a=dijit.byId(a),b=dijit.byId(b),a&&!a._isClosing)){var d=dijit.byId("editors_container"),h=dijit.byId("davinci_file_tabs");d.removeChild(a);a.destroyRecursive();h.removeChild(b);b.destroyRecursive()}});g.subscribe("/dojo/io/error",d);g.subscribe("/davinci/states/state/changed",
function(a){var b=g.currentEditor;"davinci.ve.themeEditor.ThemeEditor"!=b.declaredClass&&"davinci.review.editor.ReviewEditor"!=b.declaredClass&&b.visualEditor.onContentChange.apply(b.visualEditor,arguments)});g.subscribe("/davinci/ui/widgetPropertiesChanges",function(){var a=g.currentEditor.visualEditor;a._objectPropertiesChange.apply(a,arguments)});k.subscribe("/davinci/states/state/changed",function(a){var b=g.currentEditor&&"davinci.ve.PageEditor"==g.currentEditor.declaredClass&&g.currentEditor.visualEditor&&
g.currentEditor.visualEditor.context;if(b){var d,h,b=b?b.getDijit():null,f=m("davinci/ve/widget");a.newState&&!a.newState.indexOf("_show:")&&(d=b.byId(a.newState.substring(6)),d=f.getWidget(d.domNode),(h=d.getHelper())&&h.popup&&h.popup(d));a.oldState&&!a.oldState.indexOf("_show:")&&(d=b.byId(a.oldState.substring(6)),d=f.getWidget(d.domNode),(h=d.getHelper())&&h.tearDown&&h.tearDown(d))}});k.subscribe("/davinci/ui/repositionFocusContainer",function(b){a._repositionFocusContainer()});var h=this.service.serviceObject[this.serviceClass].getInfo().then(function(a){g._initializationInfo=
a;a=a.userInfo;g.isLocalInstall="maqettaUser"==a.userId;g.userName=a.userId;g.userEmail=a.email;return f.init()}).then(function(){var b=g.initialPerspective||"davinci.ui.main";dojo.query(".loading").orphan();a.showPerspective(b);a._updateTitle();initializeWorkbenchState()}).otherwise(function(a){dojo.query("#load_screen").addContent(dojo.string.substitute(c.startupError,[a.message]),"only")});a._lastAutoSave=Date.now();setInterval(dojo.hitch(this,"_autoSave"),3E4);return h},initService:function(){this.service||
(this.service=new a({serviceClass:"XApp_XIDE_Workbench_Service",serviceUrl:"./xcf/xui.php?debug\x3dtrue\x26view\x3drpc",singleton:!1}),this.service.init())},findView:function(a){if(a=dijit.byId(a))return a},location:function(){return g.location()},logoff:function(a){},unload:function(){davinci.Workbench._autoSave()},singleProjectMode:function(){return!0},getProject:function(){var a=davinci.Workbench;return a.getActiveProject()||a._DEFAULT_PROJECT},loadProject:function(a){var b=davinci.Workbench;b.setActiveProject(a);
return b.updateWorkbenchState().then(function(){location.href="cmd/configProject?configOnly\x3dtrue\x26project\x3d"+encodeURIComponent(a)})},getActiveProject:function(){return"project1"},setActiveProject:function(a){var b=davinci.Workbench;b._state||(b._state={});b._state.project=a;b.saveState=!0},setActionScope:function(a,d){davinci.Workbench.actionScope[a]=d},clearWorkbenchState:function(){var a=davinci.Workbench;a._state={};return a.updateWorkbenchState()},updateWorkbenchState:function(){delete davinci.Workbench.saveState;
return null},getDefaultMount:function(){},workbenchStateCustomPropGet:function(a){var b=davinci.Workbench;if("string"==typeof a)return b._state[a]},workbenchStateCustomPropSet:function(a,d){var b=davinci.Workbench;"string"==typeof a&&("undefined"==typeof d?delete b._state[a]:b._state[a]=d,b.saveState=!0)},_autoSave:function(){var a=davinci.Workbench,d=!1;if(this.currentEditor){var h=this.currentEditor;if(h.isReadOnly)console.error("workbench : autosave failed : isReadyOnly or is not dirty");else try{h.save(!0)}catch(r){console.error("Error while autosaving file:"+
r),d=!0}}d||(a._lastAutoSave=Date.now())},_updateTitle:function(a){var b=davinci.Workbench._baseTitle||"";a&&(b+="",a.isDirty&&(b+="*"),b+=a.item.name);dojo.doc.title=b},_initActionsKeys:function(a,d){var b=davinci.Workbench,h=d.keysDomNode||d.domNode,f={},c;dojo.forEach(a,function(a){dojo.forEach(a.actions,function(a){a.keySequence&&(f[a.keySequence]=a,c=!0)})});if(c){var p=d.context;dojo.connect(h,"onkeydown",function(a){a=b._keySequence(a);a=f[a];!a||a.action.shouldShow&&!a.action.shouldShow(p)||
a.action.isEnabled(p)&&b._runAction(a,p)})}},_initKeys:function(){var a=davinci.Workbench,d={all:[]},h=g.getExtensions("davinci.keyBindings");dojo.forEach(h,function(a){var b=a.contextID||"all",h=d[b];h||(h=d[b]=[]);h[a.sequence]=a.commandID});a.keyBindings=d},handleKey:function(a){var b=davinci.Workbench;if(b.keyBindings){a=b._keySequence(a);var d;b.currentContext&&b.keyBindings[b.currentContext]&&(d=b.keyBindings[b.currentContext][a]);d||(d=b.keyBindings.all[a]);if(d)return g.executeCommand(d),
!0}},_keySequence:function(a){var b=[];window.event?(window.event.ctrlKey&&b.push("M1"),window.event.shiftKey&&b.push("M2"),window.event.altKey&&b.push("M3")):((a.ctrlKey||2==a.modifiers||3==a.modifiers||5<a.modifiers)&&b.push("M1"),(a.shiftKey||3<a.modifiers)&&b.push("M2"),a.modifiers?(a.altKey||a.modifiers%2)&&b.push("M3"):a.altKey&&b.push("M3"));var d=String.fromCharCode(a.keyCode);/[A-Z0-9]/.test(d)||(d={46:"del",114:"f3"}[a.keyCode]||"xxxxxxxxxx");d=d.toUpperCase();" "==d&&(d="' '");b.push(d);
return b.join("+")},setupGlobalKeyboardHandler:function(){var a=g.getExtensions("davinci.actionSets");dojo.forEach(a,function(a){"davinci.ui.main"!=a.id&&"davinci.ui.editorActions"!=a.id||dojo.forEach(a.actions,function(a){a.keyBinding&&g.registerKeyBinding(a.keyBinding,a)})})}})})},"davinci/_Workbench_Menu":function(){define("dcl/dcl dojo/_base/declare ./Runtime dijit/Menu dijit/MenuBar dijit/MenuItem dijit/MenuSeparator dijit/PopupMenuBarItem dijit/form/DropDownButton davinci/_WokbenchEditors davinci/_WokbenchMisc".split(" "),
function(n,m,g,e,c,f,k,a,d){var h=m(e,{menuOpened:function(a){},_openMyself:function(a){this.menuOpened(a);var b;try{var d=document.getElementById("menuOverlayDiv");d||(d=dojo.create("div",{id:"menuOverlayDiv",style:"left:0px; top:0px; width:100%; height:100%; position:absolute; z-index:10;"},document.body));if(this.adjustPosition){var h=this.adjustPosition(a);b=dijit.popup.open;dijit.popup.open=function(a){a.x+=h.x;a.y+=h.y;b.call(dijit.popup,a)}}this.onClose=function(){var a=document.getElementById("menuOverlayDiv");
a&&a.parentNode.removeChild(a)}.bind(this);this.inherited(arguments)}finally{b&&(dijit.popup.open=b)}}});return n(null,{declaredClass:"davinci.Workbench_Menu",updateMenubar:function(a,d){console.error("updateMenubar")},_updateMainMenubar:function(a,d){console.error("_updateMainMenubar")},_addItemsToMenubar:function(a,d){console.error("_addItemsToMenubar")},_createMenu:function(a,d){var b,f;a.menus?(b=new e({parentMenu:a}),f=a.menus,a="onOpen"):(b=new h({}),f=a,a="menuOpened");b.domNode.style.display=
"none";b.actionContext=d;this._rebuildMenu(b,f);dojo.connect(b,a,this,function(a){b._widgetCallback&&b._widgetCallback(a);this._rebuildMenu(b,f).focus()});return b},_rebuildMenu:function(a,d){dojo.forEach(a.getChildren(),function(b){a.removeChild(b);b.destroy()});a.focusedChild=null;var b,h;d.forEach(function(d,c){d.menus.length&&(d.isSeparator&&0<c&&(b=!0),d.menus.forEach(function(d){b&&h&&(a.addChild(new k({})),b=!1);h=!0;var c=d.label;d.action&&d.action.getName&&(c=d.action.getName());if(d.separator)d=
davinci.Workbench._createMenu(d),d=new f({label:c,popup:d,id:d.id+"item"}),d.actionContext=a.actionContext,a.addChild(d);else{var p=!0;d.isEnabled&&(p=g.getSelection(),p=(p=p[0]&&p[0].resource)?d.isEnabled(p):!1);if(d.action){if(d.action.shouldShow&&!d.action.shouldShow(a.actionContext,{menu:a}))return;p=d.action.isEnabled&&d.action.isEnabled(a.actionContext)}c={label:c,id:d.id,disabled:!p,onClick:dojo.hitch(this,"_runAction",d,a.actionContext)};d.iconClass&&(c.iconClass=d.iconClass);a.addChild(new f(c))}},
this))},this);return a},_createMenuTree:function(a,d){function b(a,b,d){b=(b||"additions").split("/");var f=h;davinci.Workbench._loadActionClass(a);var c=b[b.length-1];if(1<b.length)for(var p=0,k=b.length-1;p<k;p++){var e;a:{e=0;for(var g=f.length;e<g;e++)for(var z=0,y=f[e].menus.length;z<y;z++)if(b[p]==f[e].menus[z].id){e=f[e].menus[z].menus;break a}e=void 0}e&&(f=e)}p=0;for(k=f.length;p<k;p++)if(f[p].id==c){b=f[p].menus;b.push(a);if(a.separator){d=!1;b=a.menus=[];for(f=0;f<a.separator.length;f+=
2)c=a.separator[f],d="additions"==c,b.push({id:c,isSeparator:a.separator[f+1],menus:[]});d||b.push({id:"additions",isSeparator:!1,menus:[]})}return}d&&h.push({id:c,isSeparator:!1,menus:[a]})}a||(a=g.getExtensions("davinci.actionSets",function(a){return 0==g.getExtensions("davinci.actionSetPartAssociations",function(b){return b.targetID==a.id}).length}));for(var h=[],f=0,c=a.length;f<c;f++){var p=a[f];if(p.visible&&p.menu)for(var k=0,e=p.menu.length;k<e;k++){var m=p.menu[k];if(m.__mainMenu)for(var v=
0;v<m.separator.length;v+=2)h.push({id:m.separator[v],isSeparator:m.separator[v+1],menus:[]});else if(b(m,m.path,d),m.populate instanceof Function){var m=m.populate(),B;for(B in m)b(m[B],m[B].menubarPath)}}}f=0;for(c=a.length;f<c;f++)if(p=a[f],p.visible)for(k=0,e=p.actions.length;k<e;k++)B=p.actions[k],B.menubarPath&&b(B,B.menubarPath,d);return h}})})},"davinci/_Workbench_Palette":function(){define(["dcl/dcl","davinci/Runtime"],function(n,m){var g={};return n(null,{declaredClass:"davinci.Workbench_Menu",
_rearrangePalettes:function(e){var c,f,k;e?((f=m.getExtensions("davinci.editor",function(a){return e?a.id===e.editorID:!1}))&&0<f.length&&(c=f[0].palettePerspective),f=e._rightPaletteExpanded,k=e._leftPaletteExpanded):c=m.initialPerspective||"davinci.ui.main";c&&((c=m.getExtension("davinci.perspective",c))||console.error("---error"),dojo.forEach(c.views,function(a){var d=a.viewID,h=a.position;0>h.indexOf("bottom")&&(h+="-top");if(d=dijit.byId(d)){var b=d.getParent(),h=mainBody.tabs.perspective[h];
b!=h&&(b&&b.removeChild(d),a.hidden||(h.addChild(d),b=h));b&&(a.hidden?b.removeChild(d):a.selected&&(b._maqDontExpandCollapse=!0,b.selectChild(d),delete b._maqDontExpandCollapse))}}));e&&(e.hasOwnProperty("_rightPaletteExpanded")&&(e._rightPaletteExpanded=f),e.hasOwnProperty("_leftPaletteExpanded")&&(e._leftPaletteExpanded=k))},_nearlyCollapsed:function(e){e=dojo.style(e,"width");"string"==typeof e&&(e=parseInt(e));return 91>e},_expandCollapsePaletteContainer:function(e){if(e&&e.domNode&&(e=davinci.Workbench.findPaletteContainerNode(e.domNode),
e.id)){var c=e._maqExpanded,f;this._nearlyCollapsed(e)&&(c=!1,f=91<=g[e.id].expandToSize?g[e.id].expandToSize:g[e.id].initialExpandToSize);c?this.collapsePaletteContainer(e):this.expandPaletteContainer(e,{expandToSize:f})}},_expandCollapsePaletteContainers:function(e,c){var f=dijit.byId("left_mainBody"),k=dijit.byId("right_mainBody");if(e){var a=m.getExtensions("davinci.editor",function(a){return a.id===e.editorID});if(a&&0<a.length){var a=a[0].expandPalettes,d;f&&((d=e&&e.hasOwnProperty("_leftPaletteExpanded")?
e._leftPaletteExpanded:a&&0<=a.indexOf("left"))?this.expandPaletteContainer(f.domNode,c):this.collapsePaletteContainer(f.domNode,c));k&&((d=e&&e.hasOwnProperty("_rightPaletteExpanded")?e._rightPaletteExpanded:a&&0<=a.indexOf("right"))?this.expandPaletteContainer(k.domNode,c):this.collapsePaletteContainer(k.domNode,c))}}else f&&this.collapsePaletteContainer(f.domNode,c),k&&this.collapsePaletteContainer(k.domNode,c)},findPaletteContainerNode:function(e){for(var c;e&&"BODY"!=e.tagName;){if(dojo.hasClass(e,
"davinciPaletteContainer")){c=e;break}e=e.parentNode}return c},collapsePaletteContainer:function(e,c){if((e=davinci.Workbench.findPaletteContainerNode(e))&&e.id){var f=e.id,k=dojo.style(e,"width"),a=dijit.byNode(e),d=dojo.query("[role\x3dtablist]",e);if(a&&0<d.length){var d=dojo.marginBox(d[0]),h=a.getParent();h&&h.resize&&d&&d.w&&(this._nearlyCollapsed(e)||c&&c.dontPreserveWidth||(g[f].expandToSize=k),e.style.width=d.w+"px",h.resize(),a._isCollapsed=!0)}dojo.removeClass(e,"maqPaletteExpanded");e._maqExpanded=
!1;davinci.Workbench._repositionFocusContainer();if(c=m.currentEditor)"left_mainBody"==e.id?c._leftPaletteExpanded=!1:"right_mainBody"==e.id&&(c._rightPaletteExpanded=!1)}},expandPaletteContainer:function(e,c){c=c&&c.expandToSize;if((e=davinci.Workbench.findPaletteContainerNode(e))&&e.id){var f=e.id,k=dijit.byNode(e);c&&(g[f].expandToSize=c);k&&g[f].expandToSize&&(c=k.getParent())&&c.resize&&(e.style.width=g[f].expandToSize+"px",c.resize(),delete k._isCollapsed);dojo.addClass(e,"maqPaletteExpanded");
e._maqExpanded=!0;davinci.Workbench._repositionFocusContainer();if(c=m.currentEditor)"left_mainBody"==e.id?c._leftPaletteExpanded=!0:"right_mainBody"==e.id&&(c._rightPaletteExpanded=!0)}}})})},"davinci/ui/widgets/OutlineTree":function(){define(["dojo/_base/declare"],function(n){return n(null,{})})},"davinci/davinci_":function(){define("dijit/dijit ./Workbench ./ve/palette/HtmlWidgets ./ve/views/StatesView ./ve/views/SwitchingStyleView ./actions/UndoAction ./actions/SelectLayoutAction ./actions/RedoAction ./ve/actions/CopyAction ./ve/actions/CutAction ./ve/actions/DeleteAction ./ve/actions/PasteAction ./ve/actions/DuplicateAction ./ve/actions/EditValueAction ./ve/actions/EditPropertiesAction ./ve/actions/SurroundAction ./ve/actions/SelectParentAction ./ve/actions/SelectAncestorAction ./ve/actions/UnselectAllAction ./ve/actions/ArrangeAction ./ve/actions/MoveToFrontAction ./ve/actions/MoveToBackAction ./ve/actions/MoveForwardAction ./ve/actions/MoveBackwardAction ./ve/actions/OtherAction ./ve/actions/AddState ./ve/actions/RemoveState ./ve/actions/ModifyState ./ve/actions/ManageStates ./ve/actions/NewWidgetsCurrentState ./ve/actions/HighlightBaseWidgets ./ve/actions/ShowInOutline ./ve/PageEditor ./html/ui/HTMLEditor ./ve/prefs/HTMLEditPreferences dijit/layout/LayoutContainer ./commands/OrderedCompoundCommand ./version".split(" "),
function(){})},"davinci/ve/palette/HtmlWidgets":function(){define(["dojo/_base/declare","davinci/workbench/ViewPart"],function(n,m,g){return n("davinci.ve.palette.HtmlWidgets",m,{constructor:function(e,c){dojo.subscribe("/davinci/ui/editorSelected",dojo.hitch(this,this._editorSelected))},_editorSelected:function(e){e.editor&&e.editor.supports("palette")?(this.setContext([e.editor.getContext()]),dojo.removeClass(this.palette.domNode,"dijitHidden")):(this.palette.domNode.scrollTop=0,dojo.addClass(this.palette.domNode,
"dijitHidden"))},postCreate:function(){this.inherited(arguments);this.attachToolbar();this.palette=new g({toolbarDiv:this.toolbarDiv});this.palette.descriptors="dijit,dojox,html,OpenAjax";this.setContent(this.palette);this.palette._loadPalette();dojo.addClass(this.palette.domNode,"dijitHidden")},setContext:function(e){this.palette.setContext(e[0])}})})},"davinci/workbench/ViewPart":function(){define(["dojo/_base/declare","./_ToolbaredContainer","../ve/States","../Runtime"],function(n,m,g,e){return n("davinci.workbench.ViewPart",
m,{constructor:function(c,f){this.viewExt=c.view;this.subscriptions=[];this.publishing={}},startup:function(){this.inherited(arguments);this.domNode.view=this;this.viewExt.startup&&this.viewExt.startup()},subscribe:function(c,f){this.subscriptions.push(dojo.subscribe(c,this,f))},publish:function(c,f){this.publishing[c]=!0;try{dojo.publish(c,f)}catch(k){console.error(k)}delete this.publishing[c]},destroy:function(){dojo.forEach(this.subscriptions,dojo.unsubscribe);delete this.subscriptions},_getViewActions:function(){var c=
this.toolbarID||this.viewExt.id,f=[];e.getExtensions("davinci.viewActions",function(k){if(c==k.viewContribution.targetID)return f.push(k.viewContribution),!0});return f}})})},"davinci/workbench/_ToolbaredContainer":function(){define(["dojo/_base/declare","dijit/layout/_LayoutWidget","dijit/_Templated"],function(n,m,g){return n("davinci.workbench._ToolbaredContainer",[m,g],{templateString:"\x3cdiv\x3e\x3cdiv dojoAttachPoint\x3d'titleBarDiv' class\x3d'palette_titleBarDiv'\x3e\x3c/div\x3e\x3cdiv dojoAttachPoint\x3d'toolbarDiv' class\x3d'toolbaredContainer_toolbarDiv'\x3e\x3c/div\x3e\x3cdiv dojoAttachPoint\x3d'containerNode'\x3e\x3c/div\x3e\x3c/div\x3e",
gutters:!1,_toolbarCreated:{},layout:function(){var e=[{domNode:this.titleBarDiv,layoutAlign:"top"},{domNode:this.toolbarDiv,layoutAlign:"top"},{domNode:this.containerNode,layoutAlign:"client"}];dijit.layout.layoutChildren(this.domNode,this._contentBox,e);this._containerContentBox=dijit.layout.marginBox2contentBox(this.containerNode,e[2]);var c=dijit.byNode(this.containerNode);c&&c.resize&&c.resize(this._containerContentBox);dojo.marginBox(this.containerNode,e[2])},setContent:function(e){this.mainWidget=
e;e=e.domNode||e;dojo.place(e,this.containerNode,"replace");this.containerNode=e;this.toolbarCreated(this.declaredClass)||this._createToolbar(this.declaredClass);this.titleBarDiv.innerHTML='\x3cspan class\x3d"paletteCloseBox"\x3e\x3c/span\x3e\x3cspan class\x3d"titleBarDivTitle"\x3e'+this.title+"\x3c/span\x3e";e=dojo.query(".paletteCloseBox",this.titleBarDiv);0<e.length&&dojo.connect(e[0],"click",this,function(c){davinci.Workbench.collapsePaletteContainer(c.currentTarget)});this._started&&this.layout()},
removeContent:function(){var e=dojo.doc.createElement("div");dojo.place(e,this.containerNode,"replace");this.containerNode=e;this.mainWidget&&this.mainWidget.destroy();delete this.mainWidget},_getViewActions:function(){},getTopAdditions:function(){},_createToolbar:function(e){var c=require("davinci/Workbench"),f=this.getToolbarDiv(),k=this.getTopAdditions();k&&f.appendChild(k);this.toolbarMenuActionSets&&(k="m"+Date.now(),f=dojo.create("span",{id:k+"_menucontainer","class":"paletteDropdown"},f),f=
dojo.create("span",{id:k+"_menu"},f),c.updateMenubar(f,this.toolbarMenuActionSets));(f=this._getViewActions())&&f.length&&(k=dojo.create("div",{"class":"toolbaredContainer_toolbarDiv"}),k=dojo.create("span",{style:{display:"inline-block"}},k),c=c._createToolBar("toolbarPath",k,f,this._getViewContext()),dojo.style(c.domNode,{display:"inline-block","float":"left"}),this.toolbarCreated(e,c))},_getViewContext:function(){return this},getToolbarDiv:function(){return this.toolbarDiv},toolbarCreated:function(e,
c){1<arguments.length&&(this._toolbarCreated[e]=c);return this._toolbarCreated[e]},attachToolbar:function(){var e=this.toolbarCreated(this.declaredClass),c=this.getToolbarDiv();e&&e.domNode&&c&&(c.innerHTML="",c.appendChild(e.domNode))}})})},"davinci/ve/States":function(){"undefined"===typeof davinci&&(davinci={});davinci.AppStatesDontInitialize=!0;define("dojo/_base/declare dojo/query dojo/dom-class dojo/dom-style dojo/_base/window dijit/registry davinci/Runtime davinci/maqetta/AppStates ./commands/EventCommand davinci/workbench/Preferences davinci/lang/ve".split(" "),
function(n,m,g,e,c,f,k,a,d,h,b){var p=document;n=n(a,{_update:function(a,b){k.currentEditor&&"davinci.ve.PageEditor"==k.currentEditor.declaredClass&&a&&a._dvWidget&&(a._maqAppStates||!a._maqDeltas)&&this._refresh(a._dvWidget)},_refresh:function(a){var b=a.getParent();b.dijitWidget?this._refresh(b):a&&a.resize&&a.resize()},_updateEvents:function(a,b,h){if(a&&a._dvWidget){a=a._dvWidget;var f=["onclick","onmouseover","onmouseout","onfocus","onblur"],c,p;for(p in f){var k=f[p],e=a&&a.properties&&a.properties[k];
if("string"==typeof e&&0<=e.indexOf("davinci.states.setState")){var g=e,e=e.replace("'"+b+"'","'"+h+"'");e!==g&&(c=c||{},c[k]=e)}}if(b=this.getContext())c=new d(a,c),b.getCommandStack().execute(c)}},normalize:function(a,b,d,h){switch(a){case "style":var f=this.getStatesListCurrent(b);for(a=0;a<f.length;a++)f[a]="Normal";if(b=this.getStyle(b,f,d))for(a=0;a<b.length;a++)b[a][d]&&(h=b[a][d])}return h},normalizeArray:function(a,b,d,h){h=dojo.clone(h);switch(a){case "style":var f=this.getStatesListCurrent(b);
for(a=0;a<f.length;a++)f[a]="Normal";if(b=this.getStyle(b,f,d)){for(a=0;a<b.length;a++){d=b[a];for(var c in d)for(d=h.length-1;0<=d;d--){var f=h[d],p;for(p in f)if(p==c){h.splice(d,1);break}}}h=h.concat(b)}}return h},getEditor:function(){return k.currentEditor},getContext:function(){var a=this.getEditor();return a&&(a.getContext&&a.getContext()||a.context)},getDocument:function(){var a=this.getContext();return a&&a.getDocument&&a.getDocument()},resetState:function(a){if(a){var b=this.getStateContainersForNode(a);
a=this.getFocus(a.ownerDocument.body);for(var d=0;d<b.length;d++){var h=b[d],f=this.getState(h);this.setState(f,h,{focus:a&&h==a.stateContainerNode&&f==a.state,updateWhenCurrent:!0,silent:!1})}}},_updateSrcState:function(a,b){var d=a&&a._dvWidget;if(d){var h=d._srcElement.getAttribute(davinci.states.APPSTATES_ATTRIBUTE),f=d._srcElement.getAttribute(davinci.states.DELTAS_ATTRIBUTE);d&&d._srcElement&&(a=this.serialize(a),a.maqAppStates&&a.maqAppStates.trim(),a.maqAppStates?d._srcElement.addAttribute(davinci.states.APPSTATES_ATTRIBUTE,
a.maqAppStates):d._srcElement.removeAttribute(davinci.states.APPSTATES_ATTRIBUTE),a.maqDeltas&&a.maqDeltas.trim(),a.maqDeltas?d._srcElement.addAttribute(davinci.states.DELTAS_ATTRIBUTE,a.maqDeltas):d._srcElement.removeAttribute(davinci.states.DELTAS_ATTRIBUTE),a=d._srcElement.getAttribute(davinci.states.APPSTATES_ATTRIBUTE),d=d._srcElement.getAttribute(davinci.states.DELTAS_ATTRIBUTE),(h!==a||f!==d)&&(h=this.getEditor())&&h._visualChanged&&h._visualChanged(b))}},_removeStateFromNodeRecursive:function(a,
b){var d=a._dvWidget;if(a&&d&&b)for(this._removeStateFromNode(a,b),a=d.getChildren(),d=0;d<a.length;d++)this._removeStateFromNodeRecursive(a[d].domNode,b)},_removeStateFromNode:function(a,b){if(a&&a._maqDeltas&&a._maqDeltas[b]){delete a._maqDeltas[b];b=!1;for(var d in a._maqDeltas)if("undefined"!==d){b=!0;break}b||delete a._maqDeltas;this._updateSrcState(a)}},removeUnusedStates:function(a){if(a){a=a.getAllWidgets();for(var b=0;b<a.length;b++){var d=a[b].domNode;if("BODY"!==d.tagName&&d&&d._maqDeltas){var h=
this.getAllStatesForNode(d),f;for(f in d._maqDeltas)"undefined"!==f&&0>h.indexOf(f)&&this._removeStateFromNode(d,f)}}}},_getStateIndex:function(a){return a&&"Normal"!=a&&"undefined"!=a?a:"undefined"},getCurrentStateIndex:function(){return this._getStateIndex(this.getState())},getApplyToStateIndex:function(a){var b=this.getState();return this._getStateIndex("current"===a&&b&&"Normal"!=b&&"undefined"!=b?b:void 0)},getEffectiveDisplayValue:function(a,b,d,h){a=b?b.domNode:null;b="none";var f=d||"undefined";
if(h&&"string"==typeof h[f]&&"$MAQ_DELETE_PROPERTY$"!=h[f])b=h[f],c=!0;else if(a){var c=!1;if(a._maqDeltas&&(!h||"$MAQ_DELETE_PROPERTY$"!=h[f])){var p=a._maqDeltas[d]&&a._maqDeltas[d].style;if(p)for(d=0;d<p.length;d++){var k=p[d],g;for(g in k)"display"==g&&(b=k[g],c=!0)}}if(!c){if(h&&"string"==typeof h.undefined)b=h.undefined;else{h=a._maqDeltas&&a._maqDeltas.undefined&&a._maqDeltas.undefined.style;f=!1;if(h)for(d=0;d<h.length;d++)for(g in k=h[d],k)"display"==g&&(b=k[g],f=!0);f||(b=e.get(a,"display"))}f=
"undefined"}if(0==a.offsetLeft&&0==a.offsetTop&&0==a.offsetWidth&&0==a.offsetHeight)b="none";else for(;a&&"BODY"!=a.tagName.toUpperCase();){if(a&&a.ownerDocument&&a.ownerDocument.defaultView&&"none"==e.get(a,"display")){b="none";break}a=a.parentNode}}else b="none";return{effectiveDisplayValue:b,effectiveState:f}},propertyDefinedForAnyCurrentState:function(a,b){var d,h=a._maqDeltas;if(h){a=this.getStateContainersForNode(a);var f=a.length-1;a:for(;0<=f;f--){var c=this.getState(a[f]),p=c&&c!=this.NORMAL?
c:"undefined";if(p=h[p]&&h[p].style)for(var k=0;k<p.length;k++)for(var e=p[k],g=0;g<b.length;g++)if(e.hasOwnProperty(b[g])){d=c;break a}}}return d},_customStateActive:function(a){return a?this.getState(a.rootNode):!1},updateStateIcons:function(a){a&&a.editor&&a.editor==k.currentEditor&&"davinci.ve.PageEditor"==a.editor.declaredClass&&c.withDoc(p,function(){var d=m(".manageStatesButton")[0],c=f.byNode(d),d=m(".manageStatesIcon")[0];c&&d&&(this.manageStatesActive(a)?(g.remove(d,"manageStatesIconDisabled"),
c.set("disabled",!1)):(g.add(d,"manageStatesIconDisabled"),c.set("disabled",!0)));var c=h.getPreferences("davinci.ve.editorPrefs",davinci.Workbench.getProject()).newWidgetsCurrentState,d=m(".newWidgetsCurrentStateButton")[0],p=f.byNode(d),d=m(".newWidgetsCurrentStateIcon")[0];p&&d&&(this.newWidgetsCurrentStateActive(a)?g.remove(d,"newWidgetsCurrentStateIconDisabled"):g.add(d,"newWidgetsCurrentStateIconDisabled"),c?(g.remove(d,"newWidgetsCurrentStateIconOff"),g.add(d,"newWidgetsCurrentStateIconOn"),
p.set("title",b.NewWidgetsCurrentStateTitleCurrentState)):(g.remove(d,"newWidgetsCurrentStateIconOn"),g.add(d,"newWidgetsCurrentStateIconOff"),p.set("title",b.NewWidgetsCurrentStateTitleBackground)))}.bind(this))},manageStatesActive:function(a){return a&&a.getSelection().length},newWidgetsCurrentStateActive:function(a){return this._customStateActive(a)},highlightBaseWidgetsActive:function(a){return this._customStateActive(a)},updateHighlightsBaseStateWidgets:function(a){},initialize:function(){this.subscribed=
!0}});davinci.ve.states=new n;davinci.ve.states.initialize();return davinci.ve.states})},"davinci/maqetta/AppStates":function(){define("dojo/_base/connect dojo/dom-style dojo/dom dojo/_base/html dojo/_base/window dojo/_base/array dojo/parser require dojo/json dojo/_base/lang".split(" "),function(n,m,g,e,c,f,k,a,d,h){m=function(){};m.prototype={NORMAL:"Normal",DELTAS_ATTRIBUTE:"data-maq-deltas",DELTAS_ATTRIBUTE_P6:"dvStates",APPSTATES_ATTRIBUTE:"data-maq-appstates",APPSTATES_ATTRIBUTE_P6:"dvStates",
reImportant:/^(.*)(!\ *important)(.*)/,isStateContainer:function(a){return!(!a||!a._maqAppStates)},getStateContainersForNode:function(a){for(var b=[];a;){a._maqAppStates&&b.splice(0,0,a);if("BODY"==a.tagName)break;a=a.parentNode}return b},getAllStateContainers:function(a){function b(a){a._maqAppStates&&d.push(a);a=h._getChildrenOfNode(a);for(var f=0;f<a.length;f++)b(a[f])}var d=[],h=this;b(a);return d},getStatesArray:function(a,b,d,h){var f=[];if(a)for(a=a.parentNode;a;){if(a._maqAppStates)if(a==
h)f.splice(0,0,{node:a,oldState:b,newState:d});else{var c=a._maqAppStates.states?a._maqAppStates.states.current:void 0;f.splice(0,0,{node:a,oldState:c,newState:c})}if("BODY"==a.tagName)break;a=a.parentNode}return f},findStateContainer:function(a,b){if(a)for(a=a.parentNode;a;){if(a._maqAppStates&&(!b||b==this.NORMAL||a._maqAppStates.states&&0<=a._maqAppStates.states.indexOf(b)))return a;if("BODY"==a.tagName)break;a=a.parentNode}},getAllStatesForNode:function(a){var b=[this.NORMAL];if(a)for(a=a.parentNode;a;){if(a._maqAppStates&&
a._maqAppStates.states)for(var d=a._maqAppStates.states?a._maqAppStates.states:[],h=0;h<d.length;h++)b.push(d[h]);if("BODY"==a.tagName)break;a=a.parentNode}return b},getStatesListCurrent:function(a){var b=[];if(a)for(a=a.parentNode;a;){a._maqAppStates&&b.splice(0,0,a._maqAppStates.current);if("BODY"==a.tagName)break;a=a.parentNode}return b},getAllCurrentStates:function(a){a=this.getAllStateContainers(a);for(var b=[],d=0;d<a.length;d++){var h=a[d],f=this.getState(h);b.push({stateContainerNode:h,state:f})}return b},
getStates:function(a){var b=a&&a._maqAppStates;a=["Normal"];if(b)for(var b=b.states?b.states:[],d=0;d<b.length;d++){var h=b[d];"Normal"!=h&&a.push(h)}return a},_getSCNodeFromElemOrEvent:function(a,b){b&&b.tagName&&b.nodeName?b=b._maqAppStates?b:this.findStateContainer(b,a):b&&b.target&&b.currentTarget?(b=b.currentTarget,b._maqAppStates||(b=this.findStateContainer(b,a))):b=this.getContainer();return b},_updateSrcState:function(a){},hasState:function(a,b){return!!(a&&a._maqAppStates&&a._maqAppStates.states&&
0<=a._maqAppStates.states.indexOf(b))},getState:function(a){return a&&a._maqAppStates&&a._maqAppStates.current},setState:function(a,b,d){var h=d?d.updateWhenCurrent:!1,f=d?d.silent:!1,c=d?d.focus:!1;(b=this._getSCNodeFromElemOrEvent(a,b))&&b._maqAppStates&&(h||b._maqAppStates.current!=a)&&(h=b._maqAppStates.current,this.isNormalState(a)?(b._maqAppStates.hasOwnProperty("current")&&delete b._maqAppStates.current,a=void 0):b._maqAppStates.current=a,c&&this._setFocus(a,b),d&&d.hasOwnProperty("initial")&&
(d.initial?b._maqAppStates.initial=a:b._maqAppStates.initial&&delete b._maqAppStates.initial),f||n.publish("/maqetta/appstates/state/changed",[{node:b,newState:a,oldState:h,stateContainerNode:b}]),this._updateSrcState(b,!a))},getInitial:function(a){return a&&a._maqAppStates&&a._maqAppStates.initial},getFocus:function(a){if(!a)return null;a=this.getAllStateContainers(a);for(var b=0;b<a.length;b++){var d=a[b]._maqAppStates;if(d&&d.hasOwnProperty("focus"))return{stateContainerNode:a[b],state:d.focus}}return null},
_setFocus:function(a,b){if(b&&b._maqAppStates){var d=b.ownerDocument&&b.ownerDocument.body;if(d){var h=this.getFocus(d);if(!h||h.stateContainerNode!=b||h.state!=a){for(var h=this.getAllStateContainers(d),f=0;f<h.length;f++)(d=h[f]._maqAppStates)&&delete d.focus;b._maqAppStates.focus=a}}}},isNormalState:function(a){0==arguments.length&&(a=this.getState());return!a||a==this.NORMAL},_styleArrayMixin:function(a,b){if(b){for(var d=0;d<b.length;d++){var h=b[d],f;for(f in h)for(h=a.length-1;0<=h;h--)a[h].hasOwnProperty(f)&&
a.splice(h,1)}for(d=0;d<b.length;d++)a.push(b[d])}},getStyle:function(a,b,d){for(var h,f=[],c=0;c<b.length;c++)if(h=b[c],h=a&&a._maqDeltas&&a._maqDeltas[h]&&a._maqDeltas[h].style,this._styleArrayMixin(f,h),2<arguments.length&&f)for(h=f.length-1;0<=h;h--){var k=f[h],p;for(p in k)if(p!=d){f.splice(h,1);break}}return f},hasStyle:function(a,b,d){if(a&&d)if(a._maqDeltas&&a._maqDeltas[b]&&a._maqDeltas[b].style)for(a=a._maqDeltas[b].style,b=0;b<a[b];b++){if(a[b].hasProperty(d))return!0}else return!1},setStyle:function(a,
b,d,h){if(a&&d){a._maqDeltas=a._maqDeltas||{};a._maqDeltas[b]=a._maqDeltas[b]||{};a._maqDeltas[b].style=a._maqDeltas[b].style||[];var f=a._maqDeltas[b].style;if(d)for(var c=0;c<d.length;c++){var k=d[c],e;for(e in k)for(k=f.length-1;0<=k;k--){var p=f[k],g;for(g in p)if(e==g){f.splice(k,1);break}}}var m;if(d)for(k=0;k<d.length;k++)for(var w in d[k])c=d[k][w],"undefined"!=typeof c&&null!==c&&("undefined"==typeof m&&(m=[]),e={},e[w]=this._getFormattedValue(w,c),m.push(e));a._maqDeltas[b].style=f&&m?f.concat(m):
f?f:m?m:void 0;h||n.publish("/davinci/states/state/style/changed",[{node:a,state:b,style:d}]);this._updateSrcState(a)}},_convertStyleName:function(a){if(0<=a.indexOf("-")){var b=a.split("-");a=b[0];for(var d=1;d<b.length;d++){var h=b[d];a+=h.charAt(0).toUpperCase()+h.substring(1)}}return a},_DYNAMIC_PROPERTIES:{width:1,height:1,top:1,right:1,bottom:1,left:1},_getFormattedValue:function(b,d){if(b in this._DYNAMIC_PROPERTIES){if("string"!=typeof d)return d+"px";b=a("dojo/_base/lang").trim(d);/^[-+]?[0-9]*\.?[0-9]+$/.test(b)&&
(d=b+"px")}return d},_getStatesListUsingPropName:function(a,b){var d=[];if(a)for(var h=0;h<a.length;h++)d.push(a[h][b]);return d},_resetAndCacheNormalStyle:function(a,b){if(a&&b)for(var d=0;d<b.length;d++){var f=this._getStatesListUsingPropName(b,"oldState"),c=this.getStyle(a,f),f=this._getStatesListUsingPropName(b),f=this.getStyle(a,f);if(c)for(var k=0;k<c.length;k++){var e=c[k],p;for(p in e)e=this._convertStyleName(p),a.style[e]=""}if(f)for(c=0;c<f.length;c++){var k=f[c],g;for(g in k){var e=this._convertStyleName(g),
m=a.style,z=this._getFormattedValue(g,k[g])+"",n=z?z.match(this.reImportant):null;n?(z=n[1]+n[3],z=h.trim(z),m.setProperty?m.setProperty(g,z,"important"):a.style[e]=z):a.style[e]=z}}}},_update:function(a,b){if(a&&a._maqDeltas){var d=this._getStatesListUsingPropName(b,"newState"),d=this.getStyle(a,d);this._resetAndCacheNormalStyle(a,b);if(d)for(b=0;b<d.length;b++){var f=d[b],c;for(c in f){var k=this._convertStyleName(c),e=f[c]+"",p=e?e.match(this.reImportant):null;p?(e=p[1]+p[3],e=h.trim(e),f.setProperty?
f.setProperty(c,e,"important"):a.style[k]=e):a.style[k]=e}}}},isContainer:function(a){var b=!1;if(a){var d=this.getDocument();if(a===(d&&d.body)||"BODY"==a.tagName)b=!0}return b},getContainer:function(){return document.body},add:function(a,b,d){a&&!this.hasState(a,b)&&(d=d&&d.index,a._maqAppStates=a._maqAppStates||{},a._maqAppStates.states=a._maqAppStates.states||[],"number"==typeof d&&0<=d?a._maqAppStates.states.splice(d,0,b):a._maqAppStates.states.push(b),n.publish("/davinci/states/state/added",
[{node:a,state:b}]),this._updateSrcState(a))},remove:function(a,b){if(a&&a._maqAppStates&&a._maqAppStates.states&&this.hasState(a,b)){var d=a._maqAppStates.states.indexOf(b);if(!(0>d)){var h=this.getState(a),f=this.getFocus(a.ownerDocument.body);a._maqAppStates.states.splice(d,1);d={};f&&f.stateContainerNode==a&&f.state==b&&(d.focus=!0,d.updateWhenCurrent=!0);b==h&&this.setState(void 0,a,d);n.publish("/davinci/states/state/removed",[{node:a,state:b}]);this._updateSrcState(a)}}},rename:function(a,
b){if(!b)return!1;var d=b.oldName;b=b.newName;if(!(a&&a._maqAppStates&&a._maqAppStates.states&&a._maqAppStates.states.length))return!1;var h=a._maqAppStates.states;if(0>h.indexOf(d)||0<=h.indexOf(b))return!1;h.splice(h.indexOf(d),1,b);a._maqAppStates.focus===d&&(a._maqAppStates.focus=b);a._maqAppStates.current===d&&(a._maqAppStates.current=b);h=[a];this.getState(a);for(h=h.concat(this._getChildrenOfNode(a));h.length;){var f=h.shift();f._maqDeltas&&f._maqDeltas[d]&&(f._maqDeltas[b]=f._maqDeltas[d],
delete f._maqDeltas[d]);var h=h.concat(this._getChildrenOfNode(f)),c=this.getStatesArray(f,null,b,a);this._update(f,c);this._updateSrcState(f)}n.publish("/davinci/states/state/renamed",[{node:f,oldName:d,newName:b,stateContainerNode:f}]);return!0},_isEmpty:function(a){for(var b in a)if(a.hasOwnProperty(b))return!1;return!0},stringifyWithQuotes:function(a){str=d.stringify(a);str=str.replace(/(\\)?'/g,function(a,b){return b?a:"\\'"});return str=str.replace(/"/g,"'")},serialize:function(b){var d=this,
h=function(h){var f=null;b[h]&&(h=a("dojo/_base/lang").clone(b[h]),delete h.undefined,d._isEmpty(h)||(f=this.stringifyWithQuotes(h)));return f}.bind(this),f={};if(!b)return f;var c=h("_maqAppStates");"string"==typeof c&&(f.maqAppStates=c);h=h("_maqDeltas");"string"==typeof h&&(f.maqDeltas=h);return f},deserialize:function(a,b){"string"==typeof a&&(a=a.replace(/(\\)?'/g,function(a,b){return b?"'":'"'}),a=d.parse(a),this._migrate_m4_m5(a),a=this._migrate_m6_m7(a,b&&b.isBody));return a},_migrate_m4_m5:function(a){for(var b in a){var d=
a[b];if(d){var h=d.style;if(h&&!h.length){var f=[],c;for(c in h){var k={};k[c]=h[c];f.push(k)}d.style=f}}}},_migrate_m6_m7:function(a,b){if(!a||a.states)return a;if(b){b=[];for(var d in a)"current"!=d&&b.push(d);if(0<b.length)return{states:b}}else return delete a.current,a},store:function(a,b,d){if(a){this.clear(a);var h="BODY"==a.tagName;b&&(a._maqAppStates=this.deserialize(b,{isBody:h}));d&&(a._maqDeltas=this.deserialize(d,{isBody:h}));n.publish("/davinci/states/stored",[])}},retrieve:function(a){if(a){var b=
a.getAttribute(this.APPSTATES_ATTRIBUTE);b||"BODY"!==a.tagName||(b=a.getAttribute(this.APPSTATES_ATTRIBUTE_P6));var d=a.getAttribute(this.DELTAS_ATTRIBUTE);d||"BODY"===a.tagName||(d=a.getAttribute(this.DELTAS_ATTRIBUTE_P6));return{maqAppStates:b,maqDeltas:d}}},clear:function(a){a&&(a._maqAppStates&&delete a._maqAppStates,a._maqDeltas&&delete a._maqDeltas)},_parseStyleValues:function(a){var b=[];a&&f.forEach(a.split(";"),function(a){var d=a.indexOf(":");if(0<d){var h=a.substring(0,d).trim();a=a.substring(d+
1).trim();d={};d[h]=a;b.push(d)}});return b},transferElementStyle:function(a,b){a&&(a=a._maqDeltas,b=this._parseStyleValues(b),a.undefined||(a.undefined={}),a.undefined.style=b)},getDocument:function(){return document},shouldInitialize:function(){return!davinci.AppStatesDontInitialize},_getChildrenOfNode:function(a){for(var b=[],d=0;d<a.childNodes.length;d++){var h=a.childNodes[d];1===h.nodeType&&b.push(h)}return b},initialize:function(){this.subscribed||(n.subscribe("/maqetta/appstates/state/changed",
this,function(a){if(!a.editorClass)for(var b=davinci.states._getChildrenOfNode(a.node);b.length;){var d=b.shift();davinci.states.isContainer(d)||(b=b.concat(davinci.states._getChildrenOfNode(d)));var h=this.getStatesArray(d,a.oldState,a.newState,a.stateContainerNode);davinci.states._update(d,h)}}),this.subscribed=!0)}};"undefined"===typeof davinci&&(davinci={});var b=davinci.states=new m;(function(){b.initialize();b.shouldInitialize()&&"undefined"!=typeof a&&a(["dojo/_base/lang","dojo/query","dojo/aspect"],
function(d,h,f){var g=0,p=!1;d=function(a){p||(f.around(a,"parse",function(a){var d={};return function(h,f){var k;k=(k=!f&&h&&h.rootNode?h.rootNode:h)?e.byId(k):c.body();y(d);k=a.apply(this,arguments);var g=b.getDocument(),p,m,q,u,B;for(B in d){var w;if(w="body"==B?g.body:g.querySelectorAll("."+B)[0]){var x="BODY"==w.tagName;p=m=q=u=null;x?p=d[B]:(p=d[B].maqAppStates,m=d[B].maqDeltas);p&&(q=b.deserialize(p,{isBody:x}));m&&(u=b.deserialize(m,{isBody:x}));q&&(q.initial?q.current=q.initial:(q.focus&&
delete q.focus,delete q.current));b.store(w,q,u);m&&davinci.states.transferElementStyle(w,d[B].style)}}B=b.getAllStateContainers(g.body);for(g=0;g<B.length;g++)p=B[g],p._maqAppStates&&"string"==typeof p._maqAppStates.current&&b.setState(p._maqAppStates.current,p,{updateWhenCurrent:!0,focus:p._maqAppStates.focus});return k}}),dojo.parser.parse=a.parse,p=!0)};try{var m=a("dojox/mobile/parser");d.apply(m)}catch(u){}m||d.call(null,k);var y=function(a){var d=b.getDocument();if(!d.body._maqAlreadyPreserved){var f=
davinci.states.retrieve(d.body);f&&f.maqAppStates&&(a.body=f.maqAppStates);d.body._maqAlreadyPreserved=!0}h("*",d).forEach(function(d){var h=d.getAttribute("class");h||(h="");if(!d._maqAlreadyPreserved&&0>h.indexOf("maqTempClass")){d._maqAlreadyPreserved=!0;var f=b.retrieve(d);if("BODY"!=d.tagName&&f&&(f.maqAppStates||f.maqDeltas)){var c="maqTempClass"+g;d.setAttribute("class",h+" "+c);g++;a[c]={};f.maqAppStates&&(a[c].maqAppStates=f.maqAppStates);f.maqDeltas&&(a[c].maqDeltas=f.maqDeltas);d.style?
a[c].style=d.style.cssText:console.error("States.js _preserveStates. No value for node.style.")}}})}})})();davinci.Workbench||"undefined"==typeof dijit||n.subscribe("/maqetta/appstates/state/changed",function(a){var b=a&&a.node&&a.node.ownerDocument&&a.node.ownerDocument.defaultView&&a.node.ownerDocument.defaultView.dijit.byId;b&&(a.newState&&!a.newState.indexOf("_show:")?(a=b(a.newState.substring(6)))&&a.show&&a.show():a.oldState&&!a.oldState.indexOf("_show:")&&(a=b(a.oldState.substring(6)))&&a.hide&&
a.hide())});return m})},"davinci/ve/commands/EventCommand":function(){define(["dojo/_base/declare","davinci/ve/widget"],function(n,m){return n("davinci.ve.commands.EventCommand",null,{name:"EventCommand",constructor:function(g,e){this._oldId=g?g.id:void 0;this._properties=e||{}},setContext:function(g){this._context=g},execute:function(){if(this._oldId&&this._properties){var g=m.byId(this._oldId);this._oldProps=g.properties||{};g.setProperties(this._properties,!0);if(g.isHtmlWidget){var e=g.domNode,
c;for(c in this._properties)this._properties[c]||e.removeAttribute(c)}this._newId=this._oldId;dojo.publish("/davinci/ui/widgetPropertiesChanged",[[g]])}},undo:function(){if(this._newId){var g=m.byId(this._newId),e=g.domNode,c=g._srcElement,f;for(f in this._properties)this._oldProps[f]||(e.removeAttribute(f),c.removeAttribute(f));g.setProperties(this._oldProps);dojo.publish("/davinci/ui/widgetPropertiesChanged",[[g]])}}})})},"davinci/ve/widget":function(){define("davinci/html/HTMLElement ../Runtime ./metadata dojo/Deferred dojo/_base/lang ./DijitWidget ./GenericWidget ./DeliteWidget ./HTMLWidget ./ObjectWidget dojo/window".split(" "),
function(n,m,g,e,c,f,k,a,d,h,b){var p={},z=function(a,b,d){for(var h=0;h<d.children.length;h++){var f=b.childNodes[h],c=d.children[h];f&&1==f.nodeType&&"HTMLElement"==c.elementType&&(f.id=a.getUniqueID(c),z(a,f,c))}},r={_dojo:function(a){a=(a=a?a.ownerDocument||a:dojo.doc)||dojo.doc;return b.get(a).dojo||dojo},_dijit:function(a){return b.get(a?a.ownerDocument||a:dojo.doc).dijit||dijit},parseStyleValues:function(a){var b=[];a&&dojo.forEach(a.split(";"),function(a){var d=a.indexOf(":");if(0<d){var h=
a.substring(0,d).trim();a=a.substring(d+1).trim();d={};d[h]=a;b.push(d)}});return b},retrieveStyleProperty:function(a,b,d){var h=d;a&&dojo.some(a,function(a){if(a.hasOwnProperty(b))return h=a[b],!0});return h},setStyleProperty:function(a,b,d){var h=!1;a&&dojo.some(a,function(a){if(a.hasOwnProperty(b))return a[b]=d,h=!0});if(!h){var f={};f[b]=d;a.push(f)}},getStyleString:function(a){var b="";dojo.forEach(a,function(a){for(var d in a)a[d]&&(b=b+d+":"+a[d]+";")});return b},getEnclosingWidget:function(a){var b=
r.getEnclosingWidgetForRichText(a);if(b)return b;for(;a;){if(a._dvWidget)return a._dvWidget;a=a.parentNode||a.domNode&&a.domNode.parentNode}},getEnclosingWidgetForRichText:function(a){if(a&&a._dvWidget)return"html.stickynote"===a._dvWidget.type||"html.richtext"===a._dvWidget.type?a._dvWidget:a.parentNode?r.getEnclosingWidgetForRichText(a.parentNode):null},getUniqueObjectId:function(a,b){if(a){a=a.substring((a.lastIndexOf("/")||a.lastIndexOf("."))+1);var d=1,h=a+"_"+d++;for(b=r._dojo(b);b.getObject(h)||
b.byId(h);)h=a+"_"+d++;return h}},_remove_prefix:function(a){if(a){for(var b=a,d="dijit/form/ dijit/layout/ dijit/ dojox/mobile/ html. html/ OpenAjax. OpenAjax/".split(" "),h=0;h<d.length;h++)if(0==a.indexOf(d[h])){b=a.substr(d[h].length);"html."==d[h]&&(b="\x26lt;"+b+"\x26gt;");break}return b}return""},_getWidgetNameText:function(a){return"\x3cspan class\x3d'propertiesTitleWidgetName'\x3e"+this._remove_prefix(a)+"\x3c/span\x3e"},_getWidgetNameRaw:function(a){return""+this._remove_prefix(a)},_getWidgetClassText:function(a,
b){var d="\x3cspan class\x3d'propertiesTitleClassName'\x3e";a&&(d+="#"+a);b&&(d+="."+b.replace(/\s+/g,"."));return d+"\x3c/span\x3e"},getLabelForNode:function(a){var b=a.getAttribute("data-dojo-type")||a.getAttribute("dojoType");b||(b=a.tagName.toLowerCase());b=b.replace(/\./g,"/");b=this._getWidgetNameText(b);a.id&&(b+=this._getWidgetClassText(a.id));return b},getLabel:function(a){var b=this._getWidgetNameText(a.type),d,h=r.getWidgetHelper(a.type);h&&h.getWidgetText&&(d=h.getWidgetText(a));h&&h.getWidgetNameText&&
(b=h.getWidgetNameText(a));var f=a.domNode;if(!a.type)return"unknown type";switch(a.type.replace(/\//g,".")){case "dijit.form.ComboBox":case "dijit.form.Button":d=a.attr("label");break;case "dijit.layout.ContentPane":d=a.attr("title");break;case "html.label":d=f.innerHTML;break;case "html.img":d=f.alt,d||(d=f.title)}d&&(b+="\x3cspan class\x3d'propertiesTitleWidgetText'\x3e"+d+"\x3c/span\x3e ");h&&h.getWidgetDescriptor&&(b+=" \x3cspan class\x3d'propertiesTitleWidgetDescriptor'\x3e"+h.getWidgetDescriptor(a)+
"\x3c/span\x3e ");var c=a._srcElement;d=a.getId();c=(c=c&&c.getAttribute("class"))&&c.trim();if(d||c)b=h&&h._getWidgetClassText?b+h._getWidgetClassText(d,c):b+this._getWidgetClassText(d,c);h&&h.getWidgetTextExtra&&(b+=h.getWidgetTextExtra(a));"html.img"==a.type&&(b+="\x3cspan\x3e"+f.src.substr(f.src.lastIndexOf("/")+1)+"\x3c/span\x3e");return b},byId:function(a,b){if(b=dojo.byId(a,b&&b.body?b:void 0)){if(b._dvWidget)return b._dvWidget;if((b=r.getEnclosingWidget(b))&&b.id==a)return b}if(m.currentEditor&&
m.currentEditor.currentEditor&&m.currentEditor.currentEditor.context)return m.currentEditor.currentEditor.context.widgetHash[a]},byNode:function(a){if(a._dvWidget)return a._dvWidget},createWidget:function(e,p,m){if(e&&e.type){var y=dojo.mixin({},e),u=!1;"xblox/RunScript"===y.type&&"xblox/CSSState"===y.type&&(u=!0,delete e.properties.style);y.properties&&(y.properties=dojo.mixin({},e.properties));var q=y.type,v,B,x=g.query(q);if(x){y.properties&&("content"in y.properties&&!y.properties.content&&delete y.properties.content,
y.properties.theme&&(B=y.properties.theme.themeName));m&&m.metadata&&m.metadata.childOverride&&c.mixin(y.properties,m.metadata.childOverride);e=g.queryDescriptor(q,"widgetClass");!e&&p&&p.widgetClass&&(e=p.widgetClass);if(!0===x.delite||"xblox/RunScript"===q||"xblox/CSSState"===q||"xblox/Script"===q||"xblox/StyleSate"===q)e="delite";"delite"==e?v=a:"object"==e?(v=h,x.attributes=x.attributes||{},x.attributes.dojoType=q):"html"==e?v=d:"dijit"==e?v=f:null==v&&(v=k);if(v){e=x.content.trim().replace(/\s+/g,
" ");b.get(dojo.doc);var A=b.get(dojo.doc).dojo._toDom(e);A.fromWidgetData&&A.fromWidgetData(y);if(11===A.nodeType){m=0;var w=null;e=A.childNodes;for(var C=0;C<e.length&&!(8!==e[C].nodeType&&(m++,w=e[C],1<m));C++);if(1<m){console.error("ERROR: complex widget content not supported");return}A=w}if(!A)return null;var E=new n(A.tagName.toLowerCase());if(A.hasAttributes())for(e=A.attributes,m=e.length-1;0<=m;--m)u&&"style"===e[m].name||E.addAttribute(e[m].name,e[m].value);A.innerHTML&&E.addText(A.innerHTML);
u=g.queryDescriptor(q,"requiresId");e=g.queryDescriptor(q,"name");u=u&&e.match(/^[A-Za-z]\w*$/)?e:void 0;A.id=y.properties&&y.properties.id||(y.context?y.context.getUniqueID(E,u):"");if(e=y.children)dojo.isString(e)?(A.innerHTML=e,A.nodeName.toLowerCase(),u=E._getAttribute("id"),E.addText(e),e=E.getText(y.context),E.children=[],E.setText(e),u&&E.addAttribute(u.name,u.value,u.noPersist),z(y.context,A,E)):dojo.forEach(e,function(a){if(a)if(dojo.isString(a))7<a.length&&"\x3c!--"==a.substring(0,4)&&"--\x3e"==
a.substring(a.length-3)?(A.appendChild(dojo.doc.createComment(a.substring(4,a.length-3))),E.addComment(a.substring(4,a.length-3))):(A.appendChild(dojo.doc.createTextNode(a)),E.addText(a));else if(a.context=y.context,a=r.createWidget(a))A.appendChild(a.domNode),E.addChild(a._srcElement)});(u=r.getWidgetHelper(q))&&u.preProcessData&&(y=u.preProcessData(y));u={};e={};for(var M in y.properties)m=y.properties[M],null!=m&&("on"==M.substr(0,2).toLowerCase()||"a"==E.tag.toLowerCase()&&"href"==M.toLowerCase()?
e[M]=m:u[M]=m);x=new v(u,A,q,x,E,q);x._srcElement=E;x.chart&&y.properties&&y.properties.theme&&(x.chart.theme.themeName=B);y.scripts&&(x.scripts=y.scripts);y.context&&(x._edit_context=y.context);y.properties&&(x.setProperties(u),x.setProperties(e,!0));if(y.maqAppStates||y.maqDeltas)y.maqAppStates&&(x.domNode._maqAppStates=dojo.clone(y.maqAppStates)),y.maqDeltas&&(x.domNode._maqDeltas=dojo.clone(y.maqDeltas)),B=davinci.states.serialize(x.domNode),B.maqAppStates&&x._srcElement.addAttribute(davinci.states.APPSTATES_ATTRIBUTE,
B.maqAppStates),B.maqDeltas&&x._srcElement.addAttribute(davinci.states.DELTAS_ATTRIBUTE,B.maqDeltas);(u=r.getWidgetHelper(q))&&u.cleanSrcElement&&u.cleanSrcElement(x._srcElement,p);u&&u.postCreateWidget&&u.postCreateWidget(x,p);return x}}else console.error("cant get widget meta data : ",e)}},_createSrcElement:function(a){var b=new n(a.tagName.toLowerCase());if(a.hasAttributes()){a=a.attributes;for(var d=a.length-1;0<=d;--d)b.addAttribute(a[d].name,a[d].value)}return b},getWidgetHelper:function(a){return p[a]},
requireWidgetHelper:function(a){var b=new e;g.getHelper(a,"helper").then(function(d){d?b.resolve(p[a]=new d):b.resolve()});return b},getWidget:function(b,c){if(b&&1==b.nodeType){var e=r.byNode(b);if(!e){if(b){for(var e={properties:{}},g=0;g<b.attributes.length;g++){var p=b.attributes[g];if(p.specified&&p.nodeValue){var m=p.nodeName.toLowerCase();if("id"!=m&&"widgetid"!=m&&"style"!=m&&"_"!=m.charAt(0)){if((p=p.nodeValue)&&"class"==m&&(p=p.replace("HtmlWidget","").trim(),!p))continue;e.properties[m]=
p}}}"script"==b.tagName.toLowerCase()&&(e.children=b.innerHTML||void 0)}else e=void 0;if(e.properties.is||null!=b.render||-1!==b.tagName.indexOf("D-"))return e=new a(e,b);g=b.getAttribute("dvwidget");if(b.hasAttribute("widgetid")||b.hasAttribute("data-dojo-type")||b.hasAttribute("dojotype"))c=r._dijit(b).byNode(b),g=b.getAttribute("data-dojo-type")||b.getAttribute("dojotype"),e=c?new f(e,b,c,null,null,g):new h(e,b);else if(g)e=new k(e,b,g);else{if("svg"==b.nodeName)return;e=new d(e,b,c)}}return e}}};
dojo.setObject("davinci.ve.widget",r);return r})},"davinci/html/HTMLElement":function(){define(["dojo/_base/declare","davinci/html/HTMLItem","davinci/html/HTMLText","davinci/html/HTMLComment","davinci/html/HTMLAttribute"],function(n,m,g,e,c){return n("davinci.html.HTMLElement",m,{constructor:function(f){this.elementType="HTMLElement";this.attributes=[];this.tag=f||"";this._fmChildIndent=this._fmChildLine=0},add:function(f){this.statements||(this.statements=[]);this.statements.push(f);this.onChange()},
getText:function(f){f=f||{};var c;f.indent+=2;c="\x3c"+this.tag;for(var a=0;a<this.attributes.length;a++){var d=this.attributes[a].getText(f);0<d.length&&(c=c+" "+d)}if(this.noEndTag)c+="/\x3e";else{c=c+"\x3e"+this._addWS(this._fmChildLine,this._fmChildIndent);if(this.statements)for(a=0;a<this.statements.length;a++)c+=this.statements[a].printStatement(f,this.statements[a]);else if(this.script)c+=this.script;else if(0<this.children.length)for(d="style"==this.tag,a=0;a<this.children.length;a++)if(c+=
this.children[a].getText(f),d){var h=this._fmChildLine,b=this._fmChildIndent||0;a+1==this.children.length&&(h=this._fmLine,b=this._fmIndent);c+=this._addWS(h,b)}c=c+"\x3c/"+this.tag+"\x3e"}f.indent-=2;return c+=this._addWS(this._fmLine,this._fmIndent)},_formatModel:function(f,c,a){function d(d,h,f){b+=1+d;h?(h._fmChildLine=1,h._fmChildIndent=a.indent):(f._fmLine=1,f._fmIndent=a.indent)}function h(a,f){a.startOffset=b;a.wasParsed=!0;b+=a.tag.length+2;for(var c=0;c<a.attributes.length;c++){a.attributes[c].startOffset=
b;var k=a.attributes[c].getText(f);0<k.length&&(b+=1+k.length);a.attributes[c].endOffset=b-1}a.noEndTag&&b++;a.startTagOffset=b;k="";if(a.statements)for(c=0;c<a.statements.length;c++)k+=a.statements[c].printStatement(f,a.statements[c]);else a.script&&(k=a.script);if(k)b+=k.length;else if(0<a.children.length){var e;davinci.html._noFormatElements[a.tag]||(f.indent+=2,d(f.indent,a),e=!0);for(var g,c=0;c<a.children.length;c++){k=a.children[c];switch(k.elementType){case "HTMLElement":g&&"HTMLText"!=g.elementType&&
!davinci.html._noFormatElements[k.tag]&&d(f.indent,null,g);h(k,f);break;case "HTMLText":k.startOffset=b;b+=k.value.length;break;case "HTMLComment":k.startOffset=b,b+=k.value.length,b++,k.isProcessingInstruction&&(b+=2)}g=k}e&&(f.indent-=2);g&&"HTMLText"!=g.elementType&&d(f.indent,null,g)}b+=a.tag.length+3;a.endOffset=b-1}var b=0;void 0==c&&(c=this.children.length);var k,e;this.children.length&&0!=c?(e=this.children[c-1],b=e.endOffset+1):(k=this,b=this.startTagOffset+1);var g=b;davinci.html._noFormatElements[f.tag]||
(d(a.indent,k,e),f._fmLine=1,f._fmIndent=c<this.children.length?a.indent:a.indent-2);h(f,a);return b>g?b-g:0},getElementText:function(f){f=f||{};var c="";if(0<this.children.length)for(var a=0;a<this.children.length;a++)"HTMLComment"!=this.children[a].elementType&&(c+=this.children[a].getText(f));else{if(this.script)return this.script;if(this.statements)for(a=0;a<this.statements.length;a++)c+=this.statements[a].printStatement(f,this.statements[a])}return c},getChildElements:function(f,c,a){a=a||[];
for(var d=0;d<this.children.length;d++)this.children[d].tag==f&&a.push(this.children[d]),c&&"HTMLElement"==this.children[d].elementType&&this.children[d].getChildElements(f,c,a);return a},getChildElement:function(f){for(var c=0;c<this.children.length;c++)if(this.children[c].tag==f)return this.children[c]},hasAttribute:function(f){for(var c=0;c<this.attributes.length;c++)if(this.attributes[c].name==f)return!0;return!1},getAttribute:function(f){if(f=this._getAttribute(f))return f.value},_getAttribute:function(f){for(var c=
0;c<this.attributes.length;c++)if(this.attributes[c].name==f)return this.attributes[c]},addText:function(f){this.addChild(new g(f));this.onChange()},addComment:function(f){this.addChild(new e(f));this.onChange()},getLabel:function(){return"\x3c"+this.tag+"\x3e"},addAttribute:function(f,k,a){if("textContent"==f)this.children=[],this.addText(k);else{var d,h=0<this.attributes.length?this.attributes[this.attributes.length-1].endOffset+1:this.startTagOffset-(this.noEndTag?2:1),b=this._getAttribute(f),
e;b?d=k.length-b.value.length:(b=new c,e=!0,d=f.length+k.length+4,b.startOffset=h,b.endOffset=h+d-1);b.name=f;b.setValue(k);b.noPersist=a;this.wasParsed&&!a&&0<d&&this.getHTMLFile().updatePositions(h,d);e&&this.attributes.push(b);this.onChange()}},removeAttribute:function(f){this.attributes.every(function(c,a,d){return c.name===f?(d.splice(a,1),a=this.getHTMLFile(),!c.noPersist&&a&&(d=c.getText(),a.updatePositions(c.startOffest,0-(d.length+1))),!1):!0},this);this.onChange()},setAttribute:function(f,
c){this.removeAttribute(f);this.addAttribute(f,c)},getUniqueID:function(f){if(!this.getAttribute("id")){var c=this.getHTMLFile();c.uniqueIDs||(c.uniqueIDs={});c=c.uniqueIDs.hasOwnProperty(this.tag)?++c.uniqueIDs[this.tag]:c.uniqueIDs[this.tag]=0;this.addAttribute("id",this.tag+"_"+c,f)}},findElement:function(f){var c=this.getAttribute("id");if(f==c)return this;for(c=0;c<this.children.length;c++)if("HTMLElement"==this.children[c].elementType){var a=this.children[c].findElement(f);if(a)return a}},insertBefore:function(f,
c){c=dojo.indexOf(this.children,c);0>c&&(c=void 0);this.addChild(f,c);this.onChange()},addChild:function(f,c,a){if(!a&&this.wasParsed)if("HTMLElement"==f.elementType){var d=this._getIndent(),h;c<this.children.length&&"HTMLElement"==this.children[c].elementType?h=this.children[c]._getIndent():this.children.length?dojo.forEach(this.children,function(a){"HTMLElement"==a.elementType&&(h=a._getIndent())}):h=d+1;d=this._formatModel(f,c,{indent:h});this.getHTMLFile().updatePositions(f.startOffset,d)}else if("HTMLText"==
f.elementType||"CSS"==f.elementType.substring(0,3)){var d=f.getText(),b=this.children.length?this.children[this.children.length-1].endOffset:this.startTagOffset,e=d.length;0<e&&("HTMLText"!=f.elementType&&(e+=this._fmChildIndent+1),this.getHTMLFile().updatePositions(b+1,e));f.startOffset=b+1;f.endOffset=f.startOffset+d.length-1}m.prototype.addChild.apply(this,arguments)},removeChild:function(f){var c=dojo.indexOf(this.children,f);if(0<=c){var a=1+f.endOffset-f.startOffset;if("HTMLElement"==f.elementType)if(1==
this.children.length)a+=1*this._fmChildLine+this._fmChildIndent,this._fmChildIndent-=2;else{if(0<c&&"HTMLElement"==this.children[c-1].elementType)var d=this.children[c-1],a=a+(1*d._fmLine+d._fmIndent);c+1==this.children.length&&"HTMLElement"==this.children[c-1].elementType&&(this.children[c-1]._fmChildIndent-=2)}0<a&&this.wasParsed&&this.getHTMLFile().updatePositions(f.startOffset,0-a)}m.prototype.removeChild.apply(this,arguments)},_textModify:function(f,c){f=f.length-c.length;0!=f&&this.wasParsed&&
this.getHTMLFile().updatePositions(this.startOffset,f)},setScript:function(c){this._textModify(c,this.script);this.script=c},_previous:function(){var c=dojo.indexOf(this.parent.children,this);if(0<c)return this.parent.children[c-1]},_getIndent:function(){var c=this._previous();return c?" HTMLText"==c.elementType?(c=c.value.split("\n"),c[c.length-1].length):c._fmIndent:this.parent._fmChildIndent},visit:function(c){if(!c.visit(this)){for(var f=0;f<this.attributes.length;f++)this.attributes[f].visit(c);
for(f=0;f<this.children.length;f++)this.children[f].visit(c)}c.endVisit&&c.endVisit(this)},setText:function(c){this.script="";var f=this.parent;this.errors=require("davinci/html/HTMLParser").parse(c,this).errors;dojo.mixin(this,this.children[0]);this.parent=f;this.visit({visit:function(a){delete a.wasParsed},rules:[]});this.onChange()}})})},"davinci/html/HTMLItem":function(){define(["dojo/_base/declare","davinci/html/HTMLModel"],function(n,m){return n("davinci.html.HTMLItem",m,{constructor:function(){this.elementType=
"HTMLItem"},getLabel:function(){return this.getText({indent:0})},onChange:function(g){if(this.parent&&g)this.parent.onChange(g)},_addWS:function(g,e){g=g||0;e=e||0;for(var c=[],f=0;f<g;f++)c.push("\n");c.push("                                          ".substring(0,e));return c.join("")},close:function(){for(var g=0;g<this.children.length;g++)this.children[g].close()},getID:function(){return this.parent.getID()+":"+this.startOffset+":"+this.getLabel()},getHTMLFile:function(){for(var g=this;g&&"HTMLFile"!=
g.elementType;)g=g.parent;return g}})})},"davinci/html/HTMLModel":function(){define(["dojo/_base/declare","davinci/model/Model"],function(n,m){davinci.html||(davinci.html={});davinci.html._noFormatElements={span:!0,b:!0,it:!0};davinci.html.escapeXml=function(g){return g?g.replace(/&/g,"\x26amp;").replace(/</g,"\x26lt;").replace(/>/g,"\x26gt;").replace(/"/g,"\x26quot;"):g};davinci.html.unEscapeXml=function(g){return g&&"string"===typeof g?g.replace(/&quot;/g,'"').replace(/&gt;/g,"\x3e").replace(/&lt;/g,
"\x3c").replace(/&amp;/g,"\x26"):g};return n("davinci.html.HTMLModel",m,{})})},"davinci/model/Model":function(){define(["dojo/_base/declare"],function(n){return n("davinci.model.Model",null,{constructor:function(){this.name=this.elementType="";this.endOffset=this.startOffset=0;this.parent=null;this.children=[]},inherits:function(m){1<arguments.length?m.apply(this,Array.prototype.slice.call(arguments,1)):m.call(this)},getText:function(){},setText:function(m){},addChild:function(m,g,e){m.parent=this;
void 0!=g?this.children.splice(g,0,m):this.children.push(m)},setStart:function(m){this.startOffset=m},setEnd:function(m){this.endOffset=m},getLabel:function(){return null},getID:function(){return null},mapPositions:function(m){return{startOffset:m.startOffset,endOffset:m.endOffset}},findChildAtPosition:function(m){m.endOffset||(m.endOffset=m.startOffset);if(m.startOffset>=this.startOffset&&m.endOffset<=this.endOffset){for(var g=0;g<this.children.length;g++){var e=this.children[g].findChildAtPosition(m);
if(null!=e)return e}return this}return null},removeChild:function(m){for(var g=0;g<this.children.length;g++)if(this.children[g]==m){this.children.splice(g,1);break}},find:function(m,g){var e={visit:function(c){if(0<this.found.length&&g)return!0;var f=null;for(f in m)if(c[f]!=m[f])break;c[f]==m[f]&&this.found.push(c);return!1},found:[]};this.visit(e);return g?0<e.found.length?e.found[0]:null:e.found},setDirty:function(m){this.dirtyResource=m},isDirty:function(){return this.dirtyResource},searchUp:function(m){if(this.elementType==
m)return this;for(var g=this.parent;g&&g.elementType!=m;)g=g.parent;return g},visit:function(m){if(!m.visit(this))for(var g=0;g<this.children.length;g++)this.children[g].visit(m);m.endVisit&&m.endVisit(this)},updatePositions:function(m,g,e){visitor={visit:function(c){if(c.endOffset<g)return!0;c.startOffset>=g?(c.startOffset+=e,c.endOffset+=e):c.endOffset>=g&&(c.endOffset+=e)}};m.visit(visitor)}})})},"davinci/html/HTMLText":function(){define(["dojo/_base/declare","davinci/html/HTMLItem"],function(n,
m){return n("davinci.html.HTMLText",m,{constructor:function(g){this.elementType="HTMLText";this.value=g||""},getText:function(g){return this.value},setText:function(g){if(this.wasParsed||this.parent&&this.parent.wasParsed){var e=g.length-this.value.length;0<e&&this.getHTMLFile().updatePositions(this.startOffset+1,e)}this.value=g},getLabel:function(){return 15>this.value.length?this.value:this.value.substring(0,15)+"..."}})})},"davinci/html/HTMLComment":function(){define(["dojo/_base/declare","davinci/html/HTMLItem"],
function(n,m){return n("davinci.html.HTMLComment",m,{constructor:function(g){this.elementType="HTMLComment";this.value=g||""},getText:function(g){g=this.isProcessingInstruction?"":"--";return"\x3c!"+g+this.value+g+"\x3e"}})})},"davinci/html/HTMLAttribute":function(){define(["dojo/_base/declare","davinci/html/HTMLItem"],function(n,m){return n("davinci.html.HTMLAttribute",m,{constructor:function(){this.elementType="HTMLAttribute";this.value=this.name=""},getText:function(g){if(this.noPersist&&!g.includeNoPersist)return"";
g=this.name;({checked:1,selected:1,disabled:1,readonly:1,multiple:1,ismap:1,autofocus:1,autoplay:1,controls:1,formnovalidate:1,loop:1,muted:1,required:1})[this.name.toLowerCase()]?g=this.value&&"false"!==this.value?g+('\x3d"'+this.value+'"'):"":this.noValue||(g=g+'\x3d"'+davinci.html.escapeXml(String(this.value))+'"');return g},setValue:function(g){this.value=davinci.html.unEscapeXml(g);this.onChange()}})})},"davinci/ve/DijitWidget":function(){define(["require","dojo/_base/declare","dojo/dom-attr",
"./_Widget"],function(n,m,g,e){return m("davinci.ve.DijitWidget",e,{isDijitWidget:!0,constructor:function(c,f,e,a,d,h){if("string"===typeof e){g.get(f,"data-dojo-type")||g.get(f,"dojoType")||g.set(f,"data-dojo-type",e);d&&d.addAttribute("data-dojo-type",e);e=f.ownerDocument;d=e.defaultView;(a=e.__DijitWidgetScratchSpace)||(a=e.__DijitWidgetScratchSpace=e.createElement("div"));a.appendChild(f);e=d.require("dojo/parser").instantiate([f],c,{noStart:!0})[0];a.firstChild&&a.removeChild(a.firstChild);if(this.domNode=
e.domNode)e.domNode._dvWidget=this;this.isLayoutContainer=e.isLayoutContainer}else this.type=h?h.replace(/\./g,"/"):e.declaredClass.replace(/\./g,"/");c=davinci.ve.metadata.getAllowedChild(this.type);this.acceptsHTMLChildren="ANY"===c[0]||-1!==c.toString().toUpperCase().indexOf("HTML");this.dijitWidget=e;this.containerNode=e.containerNode;this.styleNode=e.styleNode;this.id=e.id},getParent:function(){if(this.dijitWidget&&this.dijitWidget.domNode&&this.dijitWidget.domNode.parentNode){var c=n("davinci/ve/widget"),
f=this.dijitWidget;do f=c.getEnclosingWidget(f.domNode.parentNode);while(f&&f.dijitWidget&&"_"==f.dijitWidget.declaredClass.split(".").pop().charAt(0));return f}},_getChildren:function(c){if(this.acceptsHTMLChildren)return this.inherited(arguments);var f=[];"NONE"!==davinci.ve.metadata.getAllowedChild(this.type)[0]&&(this.dijitWidget.getChildren(),this.dijitWidget.getChildren().forEach(function(e){e._maqNotDVWidget||(c?f.push(n("davinci/ve/widget").getWidget(e.domNode)):(e=e.domNode&&e.domNode._dvWidget)&&
f.push(e))}));return f},_getContainerNode:function(){return this.containerNode||this.domNode},selectChild:function(c){this.dijitWidget.selectChild&&this.dijitWidget.selectChild(c.dijitWidget)},_addChildToDom:function(c,f){if(this.acceptsHTMLChildren){this.inherited(arguments);var e=c.dijitWidget;e&&this.dijitWidget._started&&!e._started&&c.startup()}else c.dijitWidget&&this.dijitWidget.addChild?this.dijitWidget.addChild(c.dijitWidget,f):("xblox/RunScript"===c.type&&c.getHelper()&&c.getHelper().addChildToDom&&
c.getHelper().addChildToDom(this.dijitWidget,c,f),this.inherited(arguments))},_removeChildFromDom:function(c){this.dijitWidget.removeChild&&c.dijitWidget?this.dijitWidget.removeChild(c.dijitWidget):this.inherited(arguments)},_getPropertyValue:function(c){return this.dijitWidget.get(c)},startup:function(){this.dijitWidget.startup()},isLayout:function(){var c=this.getContext().getDijit();return c.layout?this.dijitWidget.isInstanceOf(c.layout._LayoutWidget):!1},resize:function(){var c=this.getHelper();
c&&c.resize?c.resize(this):this.dijitWidget.resize&&this.dijitWidget.resize()},renderWidget:function(){if(this.dijitWidget.render)this.dijitWidget.render();else if(this.dijitWidget.chart){var c=dojo.marginBox(this.dijitWidget.domNode);this.dijitWidget.resize(c)}this.domNode.parentNode._dvWidget&&this.domNode.parentNode._dvWidget.isDijitWidget&&this._refresh(this.domNode.parentNode)},_refresh:function(c){var f=c.parentNode;f._dvWidget&&f._dvWidget.isDijitWidget?this._refresh(f):c._dvWidget.resize&&
c._dvWidget.resize()},_attr:function(c,f){return this.dijitWidget.get.apply(this.dijitWidget,arguments)}})})},"davinci/ve/_Widget":function(){define("davinci/ve/_Widget","dojo/_base/declare ./metadata ../html/CSSModel dojox/html/entities davinci/ve/utils/StyleArray davinci/ve/utils/GeomUtils xide/mixins/EventedMixin xide/mixins/ReloadMixin".split(" "),function(n,m,g,e,c,f,k,a){var d=function(a,b,d){if(a==b)return!0;if(!a||!b||a.length!=b.length)return!1;for(var h=0;h<a.length;h++)if(d){if(!d(a[h],
b[h]))return!1}else if(a[h]!=b[h])return!1;return!0};return n("davinci.ve._Widget",[k,a],{isWidget:!0,acceptsHTMLChildren:!1,_skipAttrs:"id style class dir lang _children".split(" "),constructor:function(a,b,d,c){this.domNode=b;this.id=b.id;b._dvWidget=this;this._params=dojo.mixin({},a);this.type=d;this.metadata=c},postscript:function(){var a;if(this.domNode){var b=this.domNode.ownerDocument;b.body._edit_context?a=b.body._edit_context:b.body._dvWidget&&b.body._dvWidget._edit_context&&(a=b.body._dvWidget._edit_context)}this.id&&
a&&(a.widgetHash[this.id]=this);this.buildRendering();this.postCreate()},buildRendering:function(){},postCreate:function(){},getObjectType:function(){},getContext:function(){return this._edit_context},getChildren:function(a){var b=this.getHelper();return b&&b.getChildren?b.getChildren(this,a):this._getChildren(a)},indexOf:function(a){var b=this.getHelper();return b&&b.indexOf?b.indexOf(this,a):dojo.indexOf(this.getChildren(),a)},_getChildrenForTree:function(a){a=this.getContainerNode();var b=[];a&&
!a.children.length&&this.domNode.children.length&&(a=this.domNode);a&&dojo.forEach(a.children,function(a){a=dijit.registry.getEnclosingWidget(a);a!=this&&b.push(a)});return b},_getChildren:function(a){var b=this.getContainerNode(),d=[];b&&dojo.forEach(b.children,function(b){a?d.push(require("davinci/ve/widget").getWidget(b)):(b=b._dvWidget)&&d.push(b)});return d},getContainerNode:function(){var a=this.getHelper();return a&&a.getContainerNode?a.getContainerNode(this):"NONE"!==m.getAllowedChild(this.type)[0]?
this._getContainerNode():null},_getContainerNode:function(){return this.domNode},getMetadata:function(){this.metadata||(this.metadata=m.query(this));return this.metadata},getHelper:function(){this._edit_helper||(this._edit_helper=require("davinci/ve/widget").getWidgetHelper(this.type));return this._edit_helper},attr:function(a,b){var d=this._attr.apply(this,arguments);if(1<arguments.length)b=this._stringValue(a,b),this._srcElement.addAttribute(a,b);else return d},_attr:function(a,b){},indexOf:function(a){var b=
this.getHelper();return b&&b.indexOf?b.indexOf(this,a):dojo.indexOf(this.getChildren(),a)},getStyleNode:function(){return this.styleNode||this.domNode},addChild:function(a,b){if(this.getContainerNode()){if(void 0===b||null===b||-1===b)this._srcElement.addChild(a._srcElement);else{var d=this.getChildren();b<d.length?this._srcElement.insertBefore(a._srcElement,d[b]._srcElement):this._srcElement.addChild(a._srcElement)}(d=this.getHelper())&&d.addChild?d.addChild(this,a,b):this._addChildToDom.apply(this,
arguments)}},_addChildToDom:function(a,b){try{var d=a.domNode,h=this.getContainerNode();if(void 0===b||null===b||-1===b)h.appendChild(d);else{var c=this.getChildren();b<c.length?h.insertBefore(d,c[b].domNode):h.appendChild(d)}}catch(w){debugger}},getParent:function(){return require("davinci/ve/widget").getEnclosingWidget(this.domNode.parentNode)||this.domNode.parentNode},getObjectId:function(a){a=a||this;var b=a._edit_object_id;if(b)return b;if(a.domNode)return a.domNode.getAttribute("jsId")},addClass:function(a){var b=
this.getClassNames(),b=b?b.split(/\s+/):[];-1===b.indexOf(a)&&(b.push(a),this._srcElement.setAttribute("class",b.join(" ")),dojo.addClass(this.domNode,a))},getId:function(){if(!this.id){if(!this.domNode.id||!this.type)return;var a=this.domNode.id,b=(this.isHtmlWidget?this.getTagName():this.type).replace(/\./g,"_")+"_";if(a.length>b.length&&a.substring(0,b.length)==b)return}if(!(this._srcElement&&this._srcElement._getAttribute("id")&&this._srcElement._getAttribute("id").noPersist))return this.id},
setMarginBox:function(a){var b=this.getStyleNode();b&&(dojo.marginBox(b,a),this._updateSrcStyle())},getMarginBox:function(){var a=this.domNode,b=null,b=(b=this.getHelper())&&b.getMarginBoxPageCoords?b.getMarginBoxPageCoords(this):f.getMarginBoxPageCoords(a);b.l-=f.getScrollLeft(a);b.t-=f.getScrollTop(a);b.x=b.l;b.y=b.t;return b},getStyle:function(a){return(a=this.getStyleValues(a))?this._styleText(a):""},_sortStyleValues:function(a){a=dojo.clone(a);for(var b=g.shorthand,d=0,c=0;c<b.length;c++){var h;
a:{h=b[c][0];for(var f=0;f<a.length;f++)if(a[f]&&a[f].hasOwnProperty(h)){h=f;break a}h=-1}-1<h&&(f=a[h],a.splice(h,1),a.splice(d,0,f),d++)}return a},_styleText:function(a){var b="";if(dojo.isArray(a)){a=davinci.ve.states.normalizeArray("style",this.domNode,c,a);for(var d=0;d<a.length;d++)for(var c in a[d])value=a[d][c],void 0!==value&&""!=value&&null!=value&&(b+=c+": "+a[d][c]+"; ")}else for(c in a)value=davinci.ve.states.normalize("style",this.domNode,c,a[c]),void 0!==value&&""!=value&&null!=value&&
(b+=c+": "+a[c]+"; ");return b.trim()},getChildrenData:function(a){a=a||{identify:!0};var b=this.getHelper();return b&&b.getChildrenData?b.getChildrenData.apply(b,[this,a]):this._getChildrenData(a)},_getChildrenData:function(a){return this.getChildren().map(function(b){return b.getData(a)})},getClassNames:function(){return this._srcElement.getAttribute("class")||""},_getData:function(a){var b={type:this.type,properties:{}},c=require("davinci/ve/widget");if(a.identify){this._srcElement||(this._srcElement=
c._createSrcElement(this.domNode));var f=this._srcElement._getAttribute("id");f&&f.noPersist&&(b.properties.isTempID=!0);b.properties.id=this.id}!1!==a.preserveTagName&&this.id&&(b.tagName=this._srcElement.tag);f=m.query(this,"property");this.domNode&&this.domNode.parentNode&&(c=c.getEnclosingWidget(this.domNode.parentNode),(c=m.query(c,"childProperties"))&&(f=f?dojo.mixin({},f,c):c));if(f)for(var h in f)if(-1===this._skipAttrs.indexOf(h.toLowerCase())){var c=f[h],e=this.getPropertyValue(h);e&&e.length?
"array"==c.datatype?d(e,c.defaultValue)||(b.properties[h]=e):e!=c.defaultValue&&(b.properties[h]=e):"boolean"!=c.datatype&&"number"!=c.datatype||e==c.defaultValue?c.datatype&&(0==c.datatype.indexOf("dijit")||"object"==c.datatype&&c.isData)&&(b.properties[h]=e):b.properties[h]=e}b.properties.style=this.getStyle(a);(h=this.getClassNames(a))&&(b.properties["class"]=h);b.children=this.getChildrenData(a);b.type.indexOf("delite");return b},getData:function(a){a=a||{identify:!0,preserveStates:!0};var b=
this.getHelper();a=b&&b.getData?b.getData.apply(b,[this,a]):this._getData(a);a.maqAppStates=dojo.clone(this.domNode._maqAppStates);a.maqDeltas=dojo.clone(this.domNode._maqDeltas);a.properties||(a.properties={});if(this.properties)for(var d in this.properties)d in a.properties||(a.properties[d]=this.properties[d]);d=this._srcElement;for(var b=d.attributes,c=0;c<b.length;c++){var f=b[c];"on"==f.name.substr(0,2).toLowerCase()?a.properties[f.name]=f.value:"a"==d.tag.toLowerCase()&&"href"==f.name.toLowerCase()&&
(a.properties[f.name]=f.value)}return a},getPropertyValue:function(a){if("id"===a)return this.getId();if("jsId"===a)return this.getObjectId();var b=this.getHelper();return b&&b.getPropertyValue?b.getPropertyValue(this,a):this._getPropertyValue(a)},_getPropertyValue:function(a){return this.domNode.getAttribute(a)},getTagName:function(){return this.domNode.nodeName.toLowerCase()},getStyleValues:function(){function a(a){for(var b=c.length-1;0<=b;b--)void 0!==c[b][a]&&c.splice(b,1)}var b=this.getStyleNode().style,
d=this._srcElement.getAttribute("style"),c=require("davinci/ve/widget").parseStyleValues(d),d=this.getParent();b&&d&&d.dijitWidget&&d.dijitWidget.addChild&&!d.acceptsHTMLChildren&&(a("position"),a("left"),a("top"));return c},getStyleValuesAllStates:function(){var a=this.getStyleValues(),b={undefined:a},d=this.domNode._maqDeltas;if(d)for(var f in d)d[f].style&&(b[f]="undefined"==f?c.mergeStyleArrays(a,d[f].style):d[f].style);return b},_updateSrcStyle:function(){var a=this.getStyle();a.length?this._srcElement.addAttribute("style",
a):this._srcElement.removeAttribute("style")},_getStyleString:function(a){if(!a)return"";a=this._sortStyleValues(a);return this._styleText(a)},setStyleValuesCanvas:function(a){if(a){a=this._getStyleString(a);var b=this.getStyleNode();dojo.attr(b,"style",a);this.dijitWidget&&(this.dijitWidget.style=a)}},setStyleValuesModel:function(a){a=this._getStyleString(a);0<a.length?this._srcElement.addAttribute("style",a):this._srcElement.removeAttribute("style")},setStyleValuesAllStates:function(a){this.domNode._maqDeltas=
void 0;if(a)for(var b in a){var d=a[b];"undefined"===b&&(b=void 0);davinci.ve.states.setStyle(this.domNode,b,d,!0)}},isLayout:function(){return!1},resize:function(){},refresh:function(){var a=this.getParent();a&&a.dijitWidget?a.refresh():this.resize&&this.resize()},removeChild:function(a){this._srcElement?this._srcElement.removeChild(a._srcElement):console.error("cant remove child! this._srcElement is null",this);var b=this.getHelper();b&&b.removeChild?b.removeChild(this,a):this._removeChildFromDom.apply(this,
arguments)},_removeChildFromDom:function(a){(a=a.domNode)&&a.parentNode&&a.parentNode.removeChild(a)},setProperties:function(a,b){this.properties||(this.properties={});b=b||!1;a.id&&(this._srcElement.addAttribute("id",a.id,a.isTempID),delete a.id,delete a.isTempID);a.isTempID&&delete a.isTempID;for(var d in a){var c=a[d];c||"boolean"==typeof c||"number"==typeof c?(c=this._stringValue(d,c),b||(this.properties[d]=c),this._srcElement.addAttribute(d,c)):(delete this.properties[d],this._srcElement.removeAttribute(d))}},
startup:function(){this.initReload()},renderWidget:function(){},destroyWidget:function(a){(a=this.getHelper())&&a.destroy?a.destroy(this):this.dijitWidget?this.dijitWidget.destroyRecursive():dojo.forEach(this.getChildren(),function(a){a.destroyWidget()})},destroy:function(){this.inherited(arguments);console.error("destry")},selectChild:function(a){},attach:function(){var a=this.getHelper();a&&a.create&&(this._srcElement?a.create(this,this._srcElement):console.error("widget attach : have no src element",
this))},_stringValue:function(a,b){var d=this.getMetadata();a=d.property&&d.property[a];if(!a)return b;if("object"==a.datatype)if(b.getObjectId)b=b.getObjectId();else{if(a=b._edit_object_id)return a;if(b.domNode)return b.domNode.getAttribute("jsId")}else if("json"==a.datatype)a=(a=this.getContext())&&a.getDojo()||dojo,(d=this.getHelper())&&d.checkValue&&(b=d.checkValue(b)),a.isObject(b)&&(b=a.toJson(b));else if("string"==a.datatype)switch(a.format){case "date":case "time":isFinite(b)&&(b=dojo.date.stamp.toISOString(b,
{selector:a.format}));break;default:b=e.encode(b)}return b}})})},"davinci/html/CSSModel":function(){define({shorthand:[["border","border-width border-style border-color border-top border-left border-right border-bottom".split(" ")],["border-width",["border-top-width","border-right-width","border-bottom-width","border-left-width"]],["border-style",["border-top-style","border-right-style","border-bottom-style","border-left-style"]],["border-color",["border-top-color","border-right-color","border-bottom-color",
"border-left-color"]],["border-bottom",["border-bottom-width","border-bottom-style","border-bottom-color"]],["border-top",["border-top-width","border-top-style","border-top-color"]],["border-left",["border-left-width","border-left-style","border-left-color"]],["border-right",["border-right-width","border-right-style","border-right-color"]],["font","font-size line-height font-weight font-style font-family line-height".split(" ")],["border-radius",["border-top-left-radius","border-top-right-radius",
"border-bottom-right-radius","border-bottom-left-radius"]],["-moz-border-radius",["-moz-border-radius-topleft","-moz-border-radius-topright","-moz-border-radius-bottomright","-moz-border-radius-bottomleft"]],["margin",["margin-top","margin-right","margin-bottom","margin-left"]],["padding",["padding-top","padding-right","padding-bottom","padding-left"]],["background",["background-color","background-image","background-repeat","background-position","background-attachment"]]]})},"davinci/ve/utils/StyleArray":function(){define([],
function(){return{mergeStyleArrays:function(n,m){n||(n=[]);m||(m=[]);n=dojo.clone(n);for(var g=0;g<m.length;g++)for(var e in m[g])for(j=n.length-1;0<=j;j--){var c=n[j],f;for(f in c)if(e==f){n.splice(j,1);break}}return n.concat(m)}}})},"davinci/ve/GenericWidget":function(){define(["dojo/_base/declare","./_Widget"],function(n,m){return n("davinci.ve.GenericWidget",m,{isGenericWidget:!0,constructor:function(g,e,c,f,k){dojo.attr(e,"dvwidget",c);k&&k.addAttribute("dvwidget",c)},buildRendering:function(){this.containerNode=
this.domNode;if(this._params){for(var g in this._params)this.domNode.setAttribute(g,this._params[g]);this._params=void 0}},_getChildrenData:function(g){for(var e=[],c=this.domNode.childNodes,f=0;f<c.length;f++){var k=c[f],a=void 0;switch(k.nodeType){case 1:(k=require("davinci/ve/widget").byNode(k))&&(a=k.getData(g));break;case 3:(a=k.nodeValue.trim())&&g.serialize&&(a=davinci.html.escapeXml(a));break;case 8:a="\x3c!--"+k.nodeValue+"--\x3e"}a&&e.push(a)}if(0!==e.length)return e},setProperties:function(g){var e=
this.domNode,c;for(c in g)"style"===c?dojo.style(e,g[c]):g[c]?e[c]=g[c]:e.removeAttribute(c);this.inherited(arguments)},_attr:function(g,e){if(1<arguments.length)this.domNode.setAttribute(g,e);else return this.domNode.getAttribute(g)},getTagName:function(){return this.domNode.nodeName.toLowerCase()}})})},"davinci/ve/DeliteWidget":function(){define("dojo/_base/declare ./_Widget ./widget require xide/registry xide/utils".split(" "),function(n,m,g,e,c,f){function k(a){a.declaredClass&&"davinci.ve.DeliteWidget"!==
a.declaredClass?a.type=a.declaredClass:a.domNode&&a.domNode.declaredClass&&-1==a.domNode.declaredClass.indexOf("uniq")&&(a.type=a.domNode.declaredClass);if(!a.type&&a.domNode.baseClass)switch("delite/"+f.capitalize(a.domNode.baseClass.replace("d-",""))){case "delite/Radio-button":a.type="delite/RadioButton";break;case "delite/Checkbox":a.type="delite/Checkbox";break;case "delite/Accordion-header":a.type="delite/AccordionHeader";break;case "delite/Combobox":a.type="delite/Combobox";break;case "delite/Toggle-button":a.type=
"delite/ToggleButton";break;case "delite/Tab-bar":a.type="delite/TabBar";break;case "delite/View-stack":a.type="delite/ViewStack";break;case "delite/MediaPlayer":a.type="delite/MediaPlayer";break;case "delite/Panel":a.type="delite/Panel";break;case "delite/Select":a.type="delite/Select";break;case "delite/Button":a.type="delite/Button";break;case "delite/Accordion":a.type="delite/Accordion";break;case "delite/Slider":a.type="delite/Slider"}if(!a.type&&a.domNode&&a.domNode.getAttribute("is")){var d=
a.domNode.getAttribute("is");a.type=d}a.type?c.add(a.domNode):console.error("have no widget type ",a)}n=n("davinci.ve.DeliteWidget",m,{isGenericWidget:!0,helper:g,getData:function(a){a=a||{identify:!0,preserveStates:!0};var d;d=(d=this.getHelper())&&d.getData?d.getData.apply(d,[this,a]):this._getData(a);var f=!1;"no_id"===this.id&&(f=dijit.getUniqueId(this.type.toLowerCase().replace("/","-").replace(/\./g,"_")),this.id=f=f.replace("delite/","d-").toLowerCase(),d.properties.id=f,d.properties.id=f,
this.domNode.id=f,f=!0);a.identify&&!f&&c.byId(this.id);c.add(this.domNode);d.maqAppStates=dojo.clone(this.domNode._maqAppStates);d.maqDeltas=dojo.clone(this.domNode._maqDeltas);d.properties||(d.properties={});if(this.properties)for(var b in this.properties)b in d.properties||(d.properties[b]=this.properties[b]);a=this._srcElement;for(var f=a.attributes,e=0;e<f.length;e++){var k=f[e];b=k.name;if("on"==k.name.substr(0,2).toLowerCase())d.properties[k.name]=k.value;else if("a"==a.tag.toLowerCase()&&
"href"==k.name.toLowerCase())d.properties[k.name]=k.value;else if("stop"===b||"bidirectional"===b||"block"===b||"targetevent"===b)d.properties[k.name]=k.value}return d},_fixType:function(a){return k(a)},_getChildren:function(a){function d(a){dojo.forEach(a.children,function(a){(a=f.getWidget(a,!1))&&!a.type&&b._fixType(a);b.metadata&&b.metadata.ignore&&a.type&&-1!==b.metadata.ignore.indexOf(a.type)||a&&a.type&&(-1==a.type.indexOf("html.")||b.metadata&&1==b.metadata.htmlContent)&&c.push(a)})}var c=
[],b=this;a=this.container||this.domNode;a.containerNode&&null==this.domNode.render&&(a=a.containerNode);this.domNode&&null!=this.domNode.render&&(a=this.domNode);var f=e("davinci/ve/widget");a&&(d(a),0==c.length&&this.domNode.containerNode&&d(this.domNode.containerNode));return b.metadata&&b.metadata.noChildren?[]:c},getChildren:function(a){var d=this.getHelper();return d&&d.getChildren?d.getChildren(this,a):this._getChildren(a)},constructor:function(a,d,c,b,f){this.acceptsHTMLChildren=!0},buildRendering:function(){this.containerNode=
this.domNode;if(this._params){for(var a in this._params)this.domNode.setAttribute(a,this._params[a]);this._params=void 0}},_getChildrenData:function(a){var d=this.domNode;if(!d.hasChildNodes())return null;if(d&&d.getChildrenData)return d.getChildrenData();var d=[],c=this.domNode.childNodes,b=e("davinci/ve/widget");this.metadata&&this.metadata.noChildren&&(c=[]);for(var f=0;f<c.length;f++){var k=c[f],g=void 0;switch(k.nodeType){case 1:if((k=b.byNode(k))&&k.type&&-1!==k.type.indexOf("html.")&&!0!==
this.metadata.htmlContent)break;if(this.metadata&&this.metadata.ignore&&k.type&&-1!==this.metadata.ignore.indexOf(k.type))break;k&&(g=k.getData(a));break;case 3:(g=k.nodeValue.trim())&&(a.serialize||!0===this.metadata.htmlContent)&&(g=davinci.html.escapeXml(g));break;case 8:g="\x3c!--"+k.nodeValue+"--\x3e"}(g&&g.type&&-1==g.type.indexOf("html.")||g&&!0===this.metadata.htmlContent)&&d.push(g)}if(0!==d.length)return d},_getPropertyValue:function(a){if(this.domNode._get){var d=this.domNode._get(a);null==
d&&(d=this.domNode.getAttribute(a));return d}if(this.containerNode&&a in this.containerNode)return this.containerNode[a]},setProperties:function(a){var d=this.domNode,c;for(c in a)"style"===c?dojo.style(d,a[c]):a[c]?(d[c]=a[c],d._set&&d._set(c,a[c]),dojo.attr(d,c,a[c])):d.removeAttribute(c);this.inherited(arguments)},_attr:function(a,d){},getTagName:function(){return this.domNode.nodeName.toLowerCase()},getParent:function(){if("xblox/RunScript"==this.type){var a=this.domNode;if(a&&a._targetReference&&
a._targetReference._dvWidget)return a._targetReference._dvWidget}return this.inherited(arguments)}});n.fixType=k;return n})},"davinci/ve/HTMLWidget":function(){define(["dojo/_base/declare","./_Widget"],function(n,m){return n("davinci.ve.HTMLWidget",m,{isHtmlWidget:!0,addHTMLClasses:!0,constructor:function(g,e,c){this.type="html."+e.tagName.toLowerCase();this.acceptsHTMLChildren=!0;null!=c&&(this.addHTMLClasses=c)},buildRendering:function(){this.containerNode=this.domNode;if(this._params){for(var g in this._params)this.domNode.setAttribute(g,
this._params[g]);this._params=void 0}try{!1!==this.addHTMLClasses&&dojo.addClass(this.domNode,"HtmlWidget")}catch(e){}},_getChildrenData:function(g){function e(c){(c=c.nodeValue.trim())&&(c=davinci.html.escapeXml(c));return c}var c=this.domNode;if(!c.hasChildNodes())return null;if(1===c.childNodes.length&&3===c.firstChild.nodeType)return e(c.firstChild);var f=[];dojo.forEach(c.childNodes,function(c){var a;switch(c.nodeType){case 1:(c=require("davinci/ve/widget").byNode(c))&&(a=c.getData(g));break;
case 3:a=e(c);break;case 8:a="\x3c!--"+c.nodeValue+"--\x3e"}a&&f.push(a)});return f},setProperties:function(g,e){var c=this.domNode;e=e||!1;for(var f in g)if("style"===f)dojo.style(c,g[f]);else if(!e){var k=g[f];k||"boolean"==typeof k||"number"==typeof k?c.setAttribute(f,k):c.removeAttribute(f)}this.inherited(arguments)},resize:function(){this.getChildren().forEach(function(g){g.resize&&g.resize()})},_attr:function(g,e){if(1<arguments.length)this.domNode[g]=e;else return this.domNode[g]},getTagName:function(){return this.domNode.nodeName.toLowerCase()}})})},
"davinci/ve/ObjectWidget":function(){define(["dojo/_base/declare","dojo/dom-attr","./_Widget"],function(n,m,g){return n("davinci.ve.ObjectWidget",g,{isObjectWidget:!0,constructor:function(e,c,f,k,a){"string"===typeof f&&(m.set(c,"data-dojo-type",f),a&&a.addAttribute("data-dojo-type",f))},postCreate:function(){var e=this._params.jsId,c=require("davinci/ve/widget")._dojo(this.domNode),f;if(e){if(m.set(this.domNode,"jsId",e),f=this.getObjectType())if(f=c.getObject(f.replace(/\//g,".")))if(f=f.markupFactory?
f.markupFactory(this._params,this.domNode,f):f.prototype&&f.prototype.markupFactory?f.prototype.markupFactory(this._params,this.domNode,f):new f(this._params,this.domNode))f._edit_object_id=e,c.setObject(e,f)}else if(e=this.getObjectId())if(f=c.getObject(e))f._edit_object_id=e},getObjectType:function(){var e=this.domNode,e=m.get(e,"data-dojo-type")||m.get(e,"dojoType");return e=e.replace(/\./g,"/")},getObjectId:function(){return m.get(this.domNode,"jsId")},_getChildren:function(){return[]}})})},"davinci/lang/ve":function(){define([],
function(){return{common:"Common",widgetSpecific:"Widget",events:"Events",layout:"Layout",showMinMax:"show min/max",padding:"Padding",margins:"Margins",showtrbl:"show t/r/b/l",background:"Background",border:"Border",showDetails:"show details",fontsAndText:"Fonts/Text",shapesSVG:"SVG",properties:"properties",Scenes:"Scenes",States:"States",ActiveScene:"This scene is currently visible",AppStateFocus:"This application state is the target for application-state-specific visibility or styling changes",
InitialScene:"This scene will show initially when the page runs",chooseDeviceSilhouette:"Choose a device silhouette: ",filesHasUnsavedChanges:"The file '${0}' has unsaved changes, \"Save\" changes and continue with switch device silhouette.",selectAncestorTitle:"Select ancestor",selectAncestorLabel:"Select ancestor (closest ancestor listed first):",createNewState:"Create New State",updateCurrentState:"Update Current State",createLabel:"Create",updateLabel:"Update",modifyState:"Modify State",modifyLabel:"Update",
stateLabel:"Name",enterStateName:"Please enter a state name.",stateNameExists:"State name '${name}' already exists. Please enter a different state name.",renameState:"Rename State",renameLabel:"Rename",cancelLabel:"Cancel",newStateLabel:"New name:",manageStates:"Manage Widget Visibility for Different States",manageStatesCheckLabel:"Check:",manageStatesCheckCurrentStateOnly:"Current state",manageStatesCheckAll:"All",manageStatesUncheckAll:"None",manageStatesCheckBackgroundOnly:"Background only",manageStatesAllVisibleFromBackground:"(Visible from Background)",
manageStatesSomeVisibleFromBackground:"(Some visible from Background)",manageStatesSomeVisibleSomeHidden:"(Some visible, some hidden)",initialStateCheckBoxLabel:"Initial state at document load time",EnableApplicationStates:"Enable/disable application states",EnableAsStateContainerDescription:"Setting the check box below and clicking OK will allow custom application states to be defined on the currently selected widget.",DisableAsStateContainerDescription:"Unsetting the check box below and clicking OK will disallow custom application states on the currently selected widget.",
DisableAsStateContainerDataLoss:"Any existing interactivity based on existing application states will be lost.",EnableAsStateContainerWidgetLabel:"Application states are enabled on this widget",EnableApplicationStatesCurrentWidget:"Currently selected widget",EnableApplicationStatesCurrentStates:"Current application states",EnableApplicationStatesNone:"(none)",NewWidgetsCurrentStateTitleBackground:"Toggle whether new widgets go to Background or selected state (current value: Background)",NewWidgetsCurrentStateTitleCurrentState:"Toggle whether new widgets go to Background or selected state (current value: selected state)",
richTextInputHelp:"Provides Rich Text (word processor-like) editing of HTML.",smartInputHelp1:"If you use any markup characters (\x26lt;,\x26gt;,\x26amp;), you need to specify whether the text represents literal (plain) text or HTML markup that should be parsed (using an innerHTML assignment).",smartInputHelp2:"Text represents literal (plain) text.",loading:"Loading...",htmlMarkup:"HTML markup",creatingStyleRules:"Creating Style Rules with app.css",propChangeCannotComplete:"This property change cannot be completed because the operation attempts to modify a read-only theme CSS file.",
toChangeProperty:"To change this property, one technique is to add a class to this widget (at top of Properties palette)  and then open up the CSS Details pane to target a style rule within your app.css file, as described at ${0}.",errorModifyingValue:"Error modifying value",changeWillModify:"This change will modify one of the CSS style rules defined within a 'CSS theme' and will therefore probably impact other widgets on a global basis.",insteadOfChanging:"Instead of changing the theme CSS files, it is usually better to add a class to this widget (at the top of the Properties palette) and then open up the CSS Details pane to target a style rule within your app.css file, as described at ${0}.",
okToProceed:"OK to proceed with this change?",valueIsOverriden:"This value is overriden and can not be changed.",applyToWhich:"Apply to which style rule:",onlyApplyToState:" Only apply to current state (${0})",newRule:"[class: ${0} - New rule in ${1}] ",newThemeRule:"[theme: - New rule in ${0}] ",existingRule:"[class: ${0} - Existing rule in ${1}] ",line:" line: ${0})",propUndefined:"undefined",bgdType_emptystring:"",bgdType_none:"none",bgdType_url:"image",bgdType_linear:"linear gradient",bgdType_radial:"radial gradient",
bgdType_other:"other",bgdPickFile:"Choose...",bgdStop:"Stop",bgdAddStop:"Add a new gradient stop after this stop",bgdRemoveStop:"Remove this gradient stop",bgdBackgroundColor:"background-color:",bgdBackgroundImageType:"background-image type:",bgdImageUrl:"Image URL:",bgdUrl:"URL:",bgdColorStops:"Color stops:",bgdColor:"color",bgdPosition:"position",bgdOptions:"Options:",bgdAngle:"Angle:",bgdPosition2:"Position:",bgdShape:"Shape:",bgdExtent:"Extent:",bgdBackgroundRepeat:"background-repeat:",bgdBackgroundPosition:"background-position:",
bgdBackgroundSize:"background-size:",bgdBackgroundOrigin:"background-origin:",bgdBackgroundClip:"background-clip:",bgdBackgroundImageValue:"'background-image' value:",bgdTemplate:"Template:",colorPicker:"Color picker...",removeValue:"Remove Value",selectColor:"select a color",toolBarFor:"",noSelection:"(no selection)",toolBarClass:"class:",toolBarId:"ID:",idAlreadyUsed:"This id is already used by another widget",noValidParents:"No valid parents at this position",willBeChildOf:"Will become a child of:",
candidateParents:"Candidate parents:",toChangePress:"To change, press numbers",vteWarningTitle:"Theme Version Warning",vteWarningMessage:"Theme version does not match Maqetta version this could produce unexpected results. We suggest recreating the custom theme using the current version of Maqetta and deleting the existing theme.",vteWarningUnsuportedBrowserTitle:"Unsupported brower",vteWarningUnsuportedBrowserMessage:"Editing mobile themes is only supported on webkit browsers, we sugguest using Chrome or Safari to customize mobile themes.",
vteWarningToolkitMessage:"Theme version does not match workspace library version this could produce unexpected results. We suggest recreating the custom theme using the current version of Maqetta and deleting the existing theme.",vteErrorTitle:"Theme Version Error",vteErrorMessage:"Theme version is not supported by this version of Maqetta. You must recreating custom theme using the current version of Maqetta and deleting the existing theme..",vteErrorSavingResourceMessage:"error saving resource\n",
"SourceComboButton-source":"Source","SourceComboButton-splitHorizontal":"Split-H","SourceComboButton-splitVertical":"Split-V","LayoutDropDownButton-flow":"Flow","LayoutDropDownButton-absolute":"Absolute"}})},"davinci/ve/views/StatesView":function(){define("dojo/_base/declare dojo/query dojo/dom-class dojo/_base/connect dojo/aspect davinci/lang/ve/ve davinci/workbench/ViewPart dijit/layout/BorderContainer dijit/layout/ContentPane davinci/XPathUtils davinci/ve/States davinci/ve/widget davinci/ve/_Widget davinci/ve/commands/AppStateCommand dojo/data/ItemFileWriteStore dijit/tree/ForestStoreModel dijit/Tree dojo/_base/window".split(" "),
function(n,m,g,e,c,f,k,a,d,h,b,p,z,r,w,A,x,y){n(x._TreeNode,{});var u=n(x._TreeNode,{_setLabelAttr:{node:"labelNode",type:"innerHTML"}}),q="sceneId category node sceneContainerNode isCurrent isFocus isInitial".split(" ");return n("davinci.ve.views.StatesView",[k],{nextId:0,_lastSelectedId:null,postCreate:function(){this.inherited(arguments);this._themeState=null;this.container=new a({design:"headline",gutters:!1,liveSplitters:!1});this.centerPane=new d({region:"center"});this.container.addChild(this.centerPane);
this.container.layout();this.container.startup();this.setContent(this.container);this.subscribe("/davinci/ui/editorSelected",this._editorSelected.bind(this));this.subscribe("/davinci/ui/context/loaded",this._contextLoaded.bind(this));this.subscribe("/davinci/ui/context/statesLoaded",this._statesLoaded.bind(this));this.subscribe("/davinci/ui/context/pagebuilt",this._pagebuilt.bind(this));this.subscribe("/davinci/ui/context/pagerebuilt",this._pagerebuilt.bind(this));this.subscribe("/davinci/states/statesReordered",
this._statesReordered.bind(this));this.subscribe("/davinci/ui/deviceChanged",this._deviceChanged.bind(this));this.subscribe("/davinci/states/state/added",this._addState.bind(this));this.subscribe("/davinci/states/state/removed",this._removeState.bind(this));this.subscribe("/davinci/states/state/renamed",this._renameState.bind(this));this.subscribe("/davinci/states/state/changed",this._changeState.bind(this));this.subscribe("/maqetta/appstates/state/changed",this._changeState.bind(this));this.subscribe("/maqetta/appstates/state/containerChange",
this._containerChange.bind(this));this.subscribe("/davinci/ui/context/registerSceneManager",this._registerSceneManager.bind(this));this.subscribe("/davinci/scene/scenesLoaded",this._scenesLoaded.bind(this));this.subscribe("/davinci/scene/added",this._addScene.bind(this));this.subscribe("/davinci/scene/removed",this._removeScene.bind(this));this.subscribe("/davinci/scene/renamed",this._renameScene.bind(this));this.subscribe("/davinci/scene/selectionChanged",this._sceneSelectionChanged.bind(this));
dojo.subscribe("/davinci/ui/widgetPropertiesChanged",dojo.hitch(this,this._widgetPropertiesChanged));this.subscribe("/davinci/ui/widgetSelected",dojo.hitch(this,this._widgetSelectionChanged));this.attachToolbar();dojo.style(this.toolbarDiv,"display","none")},_contextLoaded:function(){},_pagebuilt:function(){this._statesLoaded.apply(this,arguments)},_pagerebuilt:function(){this._destroyTree();this._statesLoaded.apply(this,arguments)},_statesReordered:function(){this._destroyTree();this._statesLoaded.apply(this,
arguments)},_statesLoaded:function(){this._editor&&"davinci.ve.themeEditor.ThemeEditor"!=this._editor.declaredClass&&this._updateView();this._hideShowToolBar()},_deviceChanged:function(){this._updateView()},_addState:function(){this._updateView()},_removeState:function(){this._updateView()},_renameState:function(){this._updateView()},_changeState:function(a){this.isThemeEditor()?this._updateThemeSelection(a.newState):this._updateView()},_containerChange:function(){this._updateView()},_registerSceneManager:function(a){},
_scenesLoaded:function(a){this._updateView()},_addScene:function(a,b,d){this._updateView()},_removeScene:function(a,b,d){this._updateView()},_renameScene:function(a,b,d){this._updateView()},_widgetPropertiesChanged:function(){this._updateView()},_widgetSelectionChanged:function(a){this._editor&&this._editor.getContext&&this._tree&&this._sceneStore&&(a=this._editor.getContext().getSelection(),1==a.length&&(a=a[0].domNode)&&a._maqAppStates&&this._sceneStore.fetch({query:{node:a},queryOptions:{deep:!0},
onComplete:dojo.hitch(this,function(a,b){0<a.length&&(a=this._getTreeSelectionPath(a[0]),this._tree.set("path",a))})}))},_sceneSelectionChanged:function(a,b){a&&a.category&&b&&this._updateView()},_editorSelected:function(a){a=a.editor;this._destroyTree();this._unregisterForContextEvents();a&&a.supports("states")?(this._editor=a,dojo.style(this.container.domNode,"display","block"),"davinci.ve.themeEditor.ThemeEditor"===a.declaredClass?(this.set("title",f.States),this._updateViewForThemeEditor(),this._themeState?
this._updateThemeSelection(this._themeState):this._updateThemeSelection("Normal")):(this.set("title",f.Scenes),this._registerForContextEvents(),this._updateView()),this.container.layout()):(delete this._editor,dojo.style(this.container.domNode,"display","none"));this._hideShowToolBar()},_getRootNode:function(){var a=this._editor,b;a&&a.getContext&&(b=(a=a.getContext())&&a.rootNode);return b},_updateView:function(){if(this._editor&&this._editor.getContext&&!this.isThemeEditor()){var a=this._editor.getContext();
a&&a._statesLoaded&&y.withDoc(document,function(){this._updateList();this._updateSelection()},this)}},isThemeEditor:function(){return this._editor&&"davinci.ve.themeEditor.ThemeEditor"===this._editor.declaredClass},_updateViewForThemeEditor:function(){var a=this._editor._theme.getStatesForAllWidgets(),b={Normal:"Normal"};if(a)for(var d=0;d<a.length;d++){var c=a[d];"Normal"!=c&&(b[c]=c)}window.latestStates=b;var a=this._getScenes(),b={name:this._editor&&this._editor.getFileNameToDisplay?this._editor.getFileNameToDisplay():
this._editor&&this._editor.fileName?this._editor.fileName:"file",type:"file",category:"file",children:[]},d=[],c=[b],f;for(f in latestStates)d.push({name:f,sceneId:f,type:"AppState"});b.children=b.children.concat(d);this._compareStructures(c,a)||(this._destroyTree(),this._createTree(c))},_updateList:function(){function a(d,c){var m,y=d.declaredClass&&d.isInstanceOf&&d.isInstanceOf(z);y?(m=d,d=m.domNode):m=null;var q=b.isStateContainer(d),u=!1,B;for(B in f){var n=f[B];if(n.getSceneChildren&&n.name&&
n.category&&(u=n.isSceneContainer(d)))break}if("BODY"==d.tagName||q||u){for(var x=null,v=0;v<e.length;v++)if(n=e[v],n.node==d){x=n;break}var A=null;if(!x){var r=d.parentNode;a:for(;r;){for(v=0;v<e.length;v++)if(n=e[v],n.node==r){A=n;break a}if("BODY"==r.tagName)break;r=r.parentNode}}if(x)c=x;else{var w=y?p.getLabel(m):p.getLabelForNode(d),v=h.getXPath(d),w={name:w,type:"file",category:"file",node:d,children:[]};A?(w.maqid=A.maqid+"$"+v,A.children.push(w)):(w.maqid=c.maqid+"$"+v,c.children.push(w));
e.push(w);c=w}if(q){v=b.getStates(d);n=b.getState(d);n||(n=b.NORMAL);r=b.getInitial(d);r||(r=b.NORMAL);for(var I={maqid:c.maqid+"$AppStates",name:"Application States",type:"SceneManagerRoot",category:"AppStates",sceneContainerNode:d,parentItem:c,children:[]},D=0;D<v.length;D++){var F=v[D],w=k._treeNodeContent("Normal"==F?"Background":F),q=g&&g.stateContainerNode==d&&g.state==n,A=F===n,x=F===r,w={maqid:I.maqid+"$"+F,name:w,sceneId:F,type:"AppState",isFocus:q,isCurrent:A,isInitial:x,sceneContainerNode:d,
parentItem:I};I.children.push(w);e.push(w)}c.children.push(I);e.push(I)}if(u)for(B in f)if(n=f[B],n.getSceneChildren&&n.getCurrentScene&&n.getInitialScenes&&n.name&&n.category&&(u=n.getSceneChildren(d),0<u.length)){r=n.getCurrentScene(d);I=n.getInitialScenes(d);v=h.getXPath(d);D={maqid:c.maqid+"$"+v,name:n.name,type:"SceneManagerRoot",category:n.category,parentItem:c,children:[]};for(F=0;F<u.length;F++){var G=u[F],w=y?p.getLabel(G._dvWidget):p.getLabelForNode(G),w=k._treeNodeContent(w),q=!1,A=G===
r,x=0<=I.indexOf(G),v=h.getXPath(G),w={maqid:D.maqid+"$"+v,name:w,sceneId:G.id,type:n.category,isFocus:q,isCurrent:A,isInitial:x,sceneContainerNode:d,parentItem:D,node:G,children:[]};D.children.push(w);e.push(w)}c.children.push(D);e.push(w)}}m=y?m.getChildren():b._getChildrenOfNode(d);for(y=0;y<m.length;y++)a(m[y],c)}var d=this._getScenes();if(this._editor&&d){var c=this._editor.getContext();if(c&&c.rootWidget&&c.rootNode&&c._statesLoaded){var f=c.sceneManagers,e=[],k=this,g=b.getFocus(c.rootNode);
g&&!g.state&&(g.state=b.NORMAL);var m={maqid:"root",children:[]};a(c.rootWidget,m);c=[m.children[0]];if(!this._compareStructures(c,d)){var y=null;this._tree&&this._sceneStore&&(d=this._tree.get("path"),0<d.length&&(y=d[d.length-1].maqid[0]));this._destroyTree();this._createTree(c);y&&this._tree.onLoadDeferred.then(function(){this._sceneStore.fetch({query:{maqid:y},queryOptions:{deep:!0},onComplete:dojo.hitch(this,function(a,b){1===a.length&&(a=this._getTreeSelectionPath(a[0]),0<a.length&&this._tree.set("path",
a))})})}.bind(this))}this._hideShowToolBar()}}},_getTreeSelectionPath:function(a){var b=[];b.splice(0,0,a.id[0]);for(a=a.parentItem&&a.parentItem[0];a;)b.splice(0,0,a.id[0]),a=a.parentItem&&a.parentItem[0];b.splice(0,0,"StoryRoot");return b},_updateSelection:function(){if(this._editor&&this._tree){var a=this._editor.getContext();a&&a._statesLoaded&&this._tree.onLoadDeferred.then(function(){var d=this._tree.get("path"),d=0<d.length?d[d.length-1].maqid[0]:null,c=a.sceneManagers,f={},h;for(h in c){var e=
c[h];if(e.getAllSceneContainers&&e.getSceneChildren&&e.getCurrentScene)for(e.getAllSceneContainers(),f.allSceneItems=void 0,this._sceneStore.fetch({query:{type:e.category},queryOptions:{deep:!0},onComplete:dojo.hitch(this,function(a){return function(b,d){a.allSceneItems=b}}(f))}),e=0;e<f.allSceneItems.length;e++){var k=f.allSceneItems[e],p=this._findTreeNodeSpanByClass(k,"ScenesPaletteCurrent"),m=this._findTreeNodeSpanByClass(k,"ScenesPaletteInitial");k.isCurrent&&k.isCurrent[0]?p&&g.remove(p,"ScenesPaletteCurrentHidden"):
p&&g.add(p,"ScenesPaletteCurrentHidden");k.isInitial&&k.isInitial[0]?m&&g.remove(m,"ScenesPaletteInitialHidden"):m&&g.add(m,"ScenesPaletteInitialHidden");k.maqId&&k.maqId[0]==d&&(p=k.node&&k.node[0])&&p._maqAppStates&&(m=b.getState(p),b.setState(m,p,{focus:!0,updateWhenCurrent:!0}))}f={allSceneItems:f.allSceneItems}}var y=[];this._sceneStore.fetch({query:{type:"AppState"},queryOptions:{deep:!0},onComplete:dojo.hitch(this,function(a,b){y=a})});for(e=0;e<y.length;e++)h=y[e],p=this._findTreeNodeSpanByClass(h,
"ScenesPaletteCurrent"),m=this._findTreeNodeSpanByClass(h,"ScenesPaletteInitial"),h.isCurrent&&h.isCurrent[0]?p&&g.remove(p,"ScenesPaletteCurrentHidden"):p&&g.add(p,"ScenesPaletteCurrentHidden"),h.isInitial&&h.isInitial[0]?m&&g.remove(m,"ScenesPaletteInitialHidden"):m&&g.add(m,"ScenesPaletteInitialHidden")}.bind(this))}},_updateThemeSelection:function(a){if(this._sceneStore){var b;a||(a="Normal");this._sceneStore.fetch({query:{type:"AppState",sceneId:a},queryOptions:{deep:!0},onComplete:dojo.hitch(this,
function(a,d){1===a.length&&(b=a[0].sceneId[0])})});b&&this._updateSelectedScene("AppState",b)}},_getScenes:function(){var a=[];this._sceneStore&&this._sceneStore.fetch({query:{},queryOptions:{},onComplete:dojo.hitch(this,function(b,d){function c(a,b){for(var d={name:a.name[0],type:a.type[0]},f=0;f<q.length;f++){var h=q[f];a[h]&&(d[h]=a[h][0])}b.push(d);a.children&&0<a.children.length&&(d.children=[],a.children.forEach(function(a){c(a,d.children)}))}b.forEach(function(b){c(b,a)})})});return a},_compareStructures:function(a,
b){function d(a,b){if(a.length!=b.length)return!1;for(var c=0;c<a.length;c++){var f;a:{f=a[c];for(var h=b[c],e=0;e<q.length;e++){var k=q[e];k=f[k]&&!h[k]||!f[k]&&h[k]?!1:f[k]&&f[k]!==h[k]?!1:!0;if(!k){f=!1;break a}}e=f.children&&f.children.length;k=h.children&&h.children.length;f=e&&!k||!e&&k||e&&!d(f.children,h.children)?!1:!0}if(!f)return!1}return!0}return d(a,b)},_destroyTree:function(){this._tree&&(this._tree.destroyRecursive(),this._forest.destroy(),this._tree=this._forest=this._sceneStore=null)},
_createTree:function(a){require(["dijit/tree/dndSource"],function(d){d=function(a,b,d){if(a&&b){var c,f,h;b.forInSelectedItems(function(a){if(c=a.data&&a.data.item)f=c.parentItem&&c.parentItem[0],h=f.children&&f.children.indexOf(c)});var e,k;(a=dijit.getEnclosingWidget(a).item)&&(e=a.parentItem&&a.parentItem[0])&&(k=e.children&&e.children.indexOf(a));return"over"!=d&&c&&a&&f&&e&&"AppState"==c.type[0]&&"AppState"==a.type[0]&&f==e&&0!==h&&!("before"==d&&0===k)&&!("before"==d&&h+1==k)&&!("after"==d&&
h==k+1)}}.bind(this);var f=function(a,b,d){if(a.tree==this._tree){var c,f;a.forInSelectedItems(function(a){(c=a.data&&a.data.item)&&(f=c.parentItem&&c.parentItem[0])});if((a=f.sceneContainerNode&&f.sceneContainerNode[0])&&a._maqAppStates&&a._maqAppStates.states){b=[];for(d=1;d<f.children.length;d++)b.push(f.children[d].sceneId[0]);a=new r({action:"reorder",newStatesList:b,stateContainerNode:a,context:h});h.getCommandStack().execute(a)}}}.bind(this);if(this._editor){var h=this._editor.getContext(),
e=h.sceneManagers;this._sceneStore=new w({data:{identifier:"id",label:"name",items:[]},clearOnClose:!0});this._forest=new A({store:this._sceneStore,query:{type:"file"},rootId:"StoryRoot",rootLabel:"All",childrenAttrs:["children"]});this._tree=new x({model:this._forest,persist:!1,showRoot:!1,autoExpand:!0,dndController:"dijit.tree.dndSource",dragThreshold:8,betweenThreshold:5,checkItemAcceptance:d,className:"StatesViewTree",style:"height:150px; overflow-x:hidden; overflow-y:auto;",_createTreeNode:function(a){return new u(a)},
getIconClass:function(a,b){return"dijitLeaf"}});this._tree.tree&&this._tree.tree.dndController&&c.after(this._tree.tree.dndController,"onDndDrop",f,!0);this.centerPane.domNode.appendChild(this._tree.domNode);dojo.connect(this._tree,"onClick",this,function(a){var d=this._editor,c=d?d.getContext():null,f=null,h=null,k=null;a&&a.type&&(h=a.type[0],k=a.category&&a.category[0],"AppState"==h||"SceneManagerRoot"==h&&"AppStates"==k?f=a.sceneContainerNode?a.sceneContainerNode[0]:null:a.node&&a.node[0]._maqAppStates&&
(f=a.node[0]));if(this.isThemeEditor())this.publish("/davinci/states/state/changed",[{editorClass:d.declaredClass,widget:"$all",newState:a.sceneId[0],oldState:this._themeState,context:this._editor.context}]),this._themeState=a.sceneId[0];else{c&&f&&(k="AppState"==h?a.sceneId?a.sceneId[0]:null:b.getState(f),b.setState(k,f,{focus:!0,updateWhenCurrent:!0}),"davinci.ve.PageEditor"===this._editor.declaredClass&&(c.deselectInvisible(),c.clearCachedWidgetBounds(),c.updateFocusAll()));if(a.sceneId)for(var g in e){if(d=
e[g],d.selectScene&&d.selectScene({sceneId:a.sceneId[0]}))break}else a.type&&"file"==a.type[0]&&a.node&&a.node[0]._dvWidget&&c.select(a.node[0]._dvWidget);this._updateSelection()}});var k=function(a,b){var d=dojo.mixin({},a),c=this.nextId+"";this.nextId++;d.id=c;d.parentItem=b;delete d.children;var f;f=b?this._sceneStore.newItem(d,{parent:b,attribute:"children"}):this._sceneStore.newItem(d);a.children&&a.children.forEach(function(a){k(a,f)})}.bind(this);a.forEach(function(a){k(a)});this._sceneStore.save();
if(this._tree.getParent){var g=this._tree.getParent();g.resize&&window.setTimeout(function(){g.resize()},0)}}}.bind(this))},_updateSelectedScene:function(a,b){if(this._sceneStore){for(var d=b,c=[];d;)this._sceneStore.fetch({query:{type:a,sceneId:d},queryOptions:{deep:!0},onComplete:dojo.hitch(this,function(a,b){if(1!==a.length)console.error("_sceneSelectionChanged error. currentSceneId\x3d"+d+",items.length\x3d"+a.length),d=null;else for(a=a[0],c.splice(0,0,a.id[0]),d=a.parentSceneId?a.parentSceneId[0]:
null,a=a.parentItem&&a.parentItem[0];a;)c.splice(0,0,a.id[0]),a=a.parentItem&&a.parentItem[0]})});c.splice(0,0,"StoryRoot");this._tree.set("paths",[c])}},_hideShowToolBar:function(){function a(a,b){var d=a+"Disabled";a=m("."+a);a.length&&(b?g.remove(a[0],d):g.add(a[0],d))}if(this._editor){var d=this._editor.getContext&&this._editor.getContext();dojo.style(this.toolbarDiv,"display","davinci.ve.PageEditor"===this._editor.declaredClass?"block":"none");var c,f,h;c=f=h=!1;d&&d.rootNode&&((d=b.getFocus(d.rootNode))&&
d.stateContainerNode&&(c=h=!0),d&&d.state&&d.state!==b.NORMAL&&(f=h=!0));a("addStateIcon",c);a("removeStateIcon",f);a("modifyStateIcon",h)}},_treeNodeContent:function(a){var b;b=""+('\x3cspan title\x3d"'+f.InitialScene+'" class\x3d"ScenesPaletteAppStateIcon ScenesPaletteInitial"\x3e\x26#x2713;\x3c/span\x3e');b+='\x3cspan title\x3d"'+f.ActiveScene+'" class\x3d"ScenesPaletteAppStateIcon ScenesPaletteCurrent"\x3e\x3c/span\x3e';return b+("\x3cspan\x3e"+a+"\x3c/span\x3e")},_findTreeNodeSpanByClass:function(a,
b){var d=(a=(a=this._tree.getNodesByItem(a))&&0<a.length?a[0]:null)?a.domNode:null;return(b=a?dojo.query("."+b,d):[])&&0<b.length?b[0]:null},_contextEventHandler:function(){this._updateView()},_unregisterForContextEvents:function(){this._contextConnects&&(this._contextConnects.forEach(e.disconnect),this._contextConnects=null)},_registerForContextEvents:function(){var a=["widgetChanged","widgetAddedOrDeleted"];this._unregisterForContextEvents();var b=this._editor&&this._editor.getContext&&this._editor.getContext();
b&&(this._contextConnects=[],a.forEach(function(a){b[a]&&this._contextConnects.push(e.connect(b,a,this,"_contextEventHandler"))}.bind(this)))}})})},"davinci/lang/ve/ve":function(){define([],function(){return{common:"Common",widgetSpecific:"Widget",events:"Events",layout:"Layout",showMinMax:"show min/max",padding:"Padding",margins:"Margins",showtrbl:"show t/r/b/l",background:"Background",border:"Border",showDetails:"show details",fontsAndText:"Fonts/Text",shapesSVG:"SVG",properties:"properties",Scenes:"Scenes",
States:"States",ActiveScene:"This scene is currently visible",AppStateFocus:"This application state is the target for application-state-specific visibility or styling changes",InitialScene:"This scene will show initially when the page runs",chooseDeviceSilhouette:"Choose a device silhouette: ",filesHasUnsavedChanges:"The file '${0}' has unsaved changes, \"Save\" changes and continue with switch device silhouette.",selectAncestorTitle:"Select ancestor",selectAncestorLabel:"Select ancestor (closest ancestor listed first):",
createNewState:"Create New State",updateCurrentState:"Update Current State",createLabel:"Create",updateLabel:"Update",modifyState:"Modify State",modifyLabel:"Update",stateLabel:"Name",enterStateName:"Please enter a state name.",stateNameExists:"State name '${name}' already exists. Please enter a different state name.",renameState:"Rename State",renameLabel:"Rename",cancelLabel:"Cancel",newStateLabel:"New name:",manageStates:"Manage Widget Visibility for Different States",manageStatesCheckLabel:"Check:",
manageStatesCheckCurrentStateOnly:"Current state",manageStatesCheckAll:"All",manageStatesUncheckAll:"None",manageStatesCheckBackgroundOnly:"Background only",manageStatesAllVisibleFromBackground:"(Visible from Background)",manageStatesSomeVisibleFromBackground:"(Some visible from Background)",manageStatesSomeVisibleSomeHidden:"(Some visible, some hidden)",initialStateCheckBoxLabel:"Initial state at document load time",EnableApplicationStates:"Enable/disable application states",EnableAsStateContainerDescription:"Setting the check box below and clicking OK will allow custom application states to be defined on the currently selected widget.",
DisableAsStateContainerDescription:"Unsetting the check box below and clicking OK will disallow custom application states on the currently selected widget.",DisableAsStateContainerDataLoss:"Any existing interactivity based on existing application states will be lost.",EnableAsStateContainerWidgetLabel:"Application states are enabled on this widget",EnableApplicationStatesCurrentWidget:"Currently selected widget",EnableApplicationStatesCurrentStates:"Current application states",EnableApplicationStatesNone:"(none)",
NewWidgetsCurrentStateTitleBackground:"Toggle whether new widgets go to Background or selected state (current value: Background)",NewWidgetsCurrentStateTitleCurrentState:"Toggle whether new widgets go to Background or selected state (current value: selected state)",richTextInputHelp:"Provides Rich Text (word processor-like) editing of HTML.",smartInputHelp1:"If you use any markup characters (\x26lt;,\x26gt;,\x26amp;), you need to specify whether the text represents literal (plain) text or HTML markup that should be parsed (using an innerHTML assignment).",
smartInputHelp2:"Text represents literal (plain) text.",loading:"Loading...",htmlMarkup:"HTML markup",creatingStyleRules:"Creating Style Rules with app.css",propChangeCannotComplete:"This property change cannot be completed because the operation attempts to modify a read-only theme CSS file.",toChangeProperty:"To change this property, one technique is to add a class to this widget (at top of Properties palette)  and then open up the CSS Details pane to target a style rule within your app.css file, as described at ${0}.",
errorModifyingValue:"Error modifying value",changeWillModify:"This change will modify one of the CSS style rules defined within a 'CSS theme' and will therefore probably impact other widgets on a global basis.",insteadOfChanging:"Instead of changing the theme CSS files, it is usually better to add a class to this widget (at the top of the Properties palette) and then open up the CSS Details pane to target a style rule within your app.css file, as described at ${0}.",okToProceed:"OK to proceed with this change?",
valueIsOverriden:"This value is overriden and can not be changed.",applyToWhich:"Apply to which style rule:",onlyApplyToState:" Only apply to current state (${0})",newRule:"[class: ${0} - New rule in ${1}] ",newThemeRule:"[theme: - New rule in ${0}] ",existingRule:"[class: ${0} - Existing rule in ${1}] ",line:" line: ${0})",propUndefined:"undefined",bgdType_emptystring:"",bgdType_none:"none",bgdType_url:"image",bgdType_linear:"linear gradient",bgdType_radial:"radial gradient",bgdType_other:"other",
bgdPickFile:"Choose...",bgdStop:"Stop",bgdAddStop:"Add a new gradient stop after this stop",bgdRemoveStop:"Remove this gradient stop",bgdBackgroundColor:"background-color:",bgdBackgroundImageType:"background-image type:",bgdImageUrl:"Image URL:",bgdUrl:"URL:",bgdColorStops:"Color stops:",bgdColor:"color",bgdPosition:"position",bgdOptions:"Options:",bgdAngle:"Angle:",bgdPosition2:"Position:",bgdShape:"Shape:",bgdExtent:"Extent:",bgdBackgroundRepeat:"background-repeat:",bgdBackgroundPosition:"background-position:",
bgdBackgroundSize:"background-size:",bgdBackgroundOrigin:"background-origin:",bgdBackgroundClip:"background-clip:",bgdBackgroundImageValue:"'background-image' value:",bgdTemplate:"Template:",colorPicker:"Color picker...",removeValue:"Remove Value",selectColor:"select a color",toolBarFor:"",noSelection:"(no selection)",toolBarClass:"class:",toolBarId:"ID:",idAlreadyUsed:"This id is already used by another widget",noValidParents:"No valid parents at this position",willBeChildOf:"Will become a child of:",
candidateParents:"Candidate parents:",toChangePress:"To change, press numbers",vteWarningTitle:"Theme Version Warning",vteWarningMessage:"Theme version does not match Maqetta version this could produce unexpected results. We suggest recreating the custom theme using the current version of Maqetta and deleting the existing theme.",vteWarningUnsuportedBrowserTitle:"Unsupported brower",vteWarningUnsuportedBrowserMessage:"Editing mobile themes is only supported on webkit browsers, we sugguest using Chrome or Safari to customize mobile themes.",
vteWarningToolkitMessage:"Theme version does not match workspace library version this could produce unexpected results. We suggest recreating the custom theme using the current version of Maqetta and deleting the existing theme.",vteErrorTitle:"Theme Version Error",vteErrorMessage:"Theme version is not supported by this version of Maqetta. You must recreating custom theme using the current version of Maqetta and deleting the existing theme..",vteErrorSavingResourceMessage:"error saving resource\n",
"SourceComboButton-source":"Source","SourceComboButton-splitHorizontal":"Split-H","SourceComboButton-splitVertical":"Split-V","LayoutDropDownButton-flow":"Flow","LayoutDropDownButton-absolute":"Absolute"}})},"davinci/XPathUtils":function(){define(function(){function n(g){this.node=g}n.prototype={name:function(){return this.node.nodeName},parent:function(){var g=this.node.parentNode;if(g!==this.node.ownerDocument)return new n(g)},index:function(){var g=this.node.nodeName,e=this.node.parentNode,c=!1,
f=0;e.id||(e.id="__XPATH_UTILS_TEMP_ID__"+Date.now(),c=!0);g=e.querySelectorAll("#"+e.id+"\x3e"+g);if(1<g.length)for(var k=0,a=g.length;k<a;k++)if(g[k]===this.node){f=k+1;break}c&&(e.id="");return f}};var m=/(\w+)(?:\[(\d+)\])?/;return{getXPath:function(g,e){function c(f,e){var a=e.name(),d=e.parent();return d?(e=e.index(),c((e?a+("["+e+"]"):a+"[1]")+(f?"/"+f:""),d)):"/"+a+"/"+f}e=e||n;g=new e(g);return c("",g).toLowerCase()},toCssPath:function(g){"/"===g.charAt(0)&&(g=g.substr(1));var e="";g.split("/").forEach(function(c){c=
c.match(m);var f=c[2];e+=(e?"\x3e":"")+c[1];f&&(e+=":nth-of-type("+f+")")});return e}}})},"davinci/ve/commands/AppStateCommand":function(){define("dojo/_base/declare dojo/_base/lang dojo/topic davinci/XPathUtils davinci/html/HtmlFileXPathAdapter davinci/ve/States".split(" "),function(n,m,g,e,c,f){return n("davinci.ve.commands.AppStateCommand",null,{name:"AppStateCommand",_actions:["add","remove","modify","reorder"],constructor:function(k){if(k){this._params=m.mixin({},k);var a=k.stateContainerNode;
a&&a._dvWidget&&(this._params.stateContainerId=a.id,this._params.stateContainerXpath=e.getXPath(a._dvWidget._srcElement,c));"reorder"==this._params.action&&((a=this._getStateContainerNode())&&k.newStatesList.length?(this._oldStatesList=f.getStates(a),this._oldStatesList.shift()):this._params=null)}},_validParams:function(){return this._params&&0<=this._actions.indexOf(this._params.action)&&this._params.stateContainerNode&&this._params.stateContainerId&&this._params.stateContainerXpath&&this._params.context},
_getStateContainerNode:function(){var c,a=this._params.context;if(!a)return c;var d=a.getDocument();if(!d)return c;var f=this._params.stateContainerXpath;c=d.getElementById(this._params.stateContainerId);c||(a=a.model.evaluate(f))&&(c=d.getElementById(a.getAttribute("id")));return c},execute:function(){if(this._validParams()){var c=this._params.action,a=this._params.state,d=this._getStateContainerNode();d&&("add"==c?(f.add(d,a),this._setStateAndFocus(d)):"remove"==c?(this._stateIndex=d._maqAppStates&&
d._maqAppStates.states&&d._maqAppStates.states.indexOf(a),this._preservedNodesId=[],this._preservedNodesXpath=[],this._preservedStateValues=[],this._preserveStateFromNodeRecursive(d,a),f.remove(d,a),this._setStateAndFocus(d)):"modify"==c?(this._params.newState&&(this._traverseRenameState(this._params.state,this._params.newState),g.publish("/davinci/states/state/renamed",{node:d,oldName:this._params.state,newName:this._params.newState,stateContainerNode:d})),"string"==typeof this._params.initialState&&
(this._oldInitialState=f.getInitial(d),c="undefined"==this._params.initialState?void 0:this._params.initialState,this._params.newState&&c==this._params.state&&(c=this._params.newState),f.setState(c,d,{initial:c,updateWhenCurrent:!0})),this._setStateAndFocus(d)):"reorder"==c&&d&&d._maqAppStates&&d._dvWidget&&(d._maqAppStates.states=this._params.newStatesList,c=f.stringifyWithQuotes(d._maqAppStates),d.setAttribute(f.APPSTATES_ATTRIBUTE,c),srcElement=d._dvWidget._srcElement,srcElement.setAttribute(f.APPSTATES_ATTRIBUTE,
c),g.publish("/davinci/states/statesReordered",[d,this._params.newStatesList])))}},undo:function(){if(this._validParams()){var c=this._params.action,a=this._params.state,d=this._getStateContainerNode();d&&("add"==c?(f.remove(d,a),this._setStateAndFocus(d)):"remove"==c?(f.add(d,a,{index:this._stateIndex}),this._restoreState(a),f.setState(a,d,{focus:!0}),this._setStateAndFocus(d)):"modify"==c?("string"==typeof this._params.initialState&&f.setState(this._oldInitialState,d,{initial:this._oldInitialState,
updateWhenCurrent:!0}),this._params.newState&&this._traverseRenameState(this._params.newState,this._params.state),this._setStateAndFocus(d)):"reorder"==c&&d&&d._maqAppStates&&d._dvWidget&&(d._maqAppStates.states=this._oldStatesList,c=f.stringifyWithQuotes(d._maqAppStates),d.setAttribute(f.APPSTATES_ATTRIBUTE,c),srcElement=d._dvWidget._srcElement,srcElement.setAttribute(f.APPSTATES_ATTRIBUTE,c),g.publish("/davinci/states/statesReordered",[d,this._params.newStatesList])))}},_setStateAndFocus:function(c){var a=
f.getState(c);f.setState(a,c,{focus:a,updateWhenCurrent:!0})},_preserveStateFromNodeRecursive:function(c,a){var d=c._dvWidget;if(c&&d&&a)for(this._preserveStateFromNode(c,a),c=d.getChildren(),d=0;d<c.length;d++)this._preserveStateFromNodeRecursive(c[d].domNode,a)},_preserveStateFromNode:function(f,a){f&&f._maqDeltas&&f._maqDeltas[a]&&f._dvWidget&&f._dvWidget._srcElement&&(this._preservedNodesId.push(f.id),this._preservedNodesXpath.push(e.getXPath(f._dvWidget._srcElement,c)),this._preservedStateValues.push(m.clone(f._maqDeltas[a])))},
_restoreState:function(c){var a=this._params.context;if(a&&this._preservedNodesId){var d=a.getDocument();if(d)for(var h=0;h<this._preservedNodesId.length;h++){var b=this._preservedNodesXpath[h],e=d.getElementById(this._preservedNodesId[h]);e||(b=a.model.evaluate(b))&&(e=d.getElementById(b.getAttribute("id")));e&&(e._maqDeltas||(e._maqDeltas={}),e._maqDeltas[c]=m.clone(this._preservedStateValues[h]),f._updateSrcState(e))}}},_traverseRenameState:function(c,a){var d=this._getStateContainerNode();if(d&&
(f.rename(d,{oldName:c,newName:a}),d=d._dvWidget&&d._dvWidget._srcElement)){var h=null,b=!1,e=/^(.*davinci.states.setState\s*\(\s*)('[^']*'|"[^"]*")([^\)]*\).*)$/,g=/^(['"])(.*)(['"])$/;d.visit({visit:dojo.hitch(this,function(d){if("HTMLElement"==d.elementType)h=d;else if("HTMLAttribute"==d.elementType){var f=d.name;if(f&&"on"==f.substr(0,2).toLowerCase()&&(d=d.value.match(e))){var k=d[2].match(g);k&&k[2]==c&&(h.setAttribute(f,d[1]+k[1]+a+k[3]+d[3]),b=!0)}}})});b&&(d=this._params&&this._params.context&&
this._params.context.editor)&&d._visualChanged()}}})})},"davinci/html/HtmlFileXPathAdapter":function(){define(function(){function n(m){this.elem=m}n.prototype={name:function(){return this.elem.tag},parent:function(){var m=this.elem.parent;if("HTMLFile"!==m.elementType)return new n(m)},index:function(){var m=this.elem.tag,g=this.elem.parent.children,e=0;if(1===g.length)return 0;g=g.filter(function(c){return c.tag===m});1<g.length&&g.some(function(c,f){if(c===this.elem)return e=f+1,!0},this);return e}};
return n})},"dojo/data/ItemFileWriteStore":function(){define("../_base/lang ../_base/declare ../_base/array ../_base/json ../_base/kernel ./ItemFileReadStore ../date/stamp".split(" "),function(n,m,g,e,c,f,k){return m("dojo.data.ItemFileWriteStore",f,{constructor:function(a){this._features["dojo.data.api.Write"]=!0;this._features["dojo.data.api.Notification"]=!0;this._pending={_newItems:{},_modifiedItems:{},_deletedItems:{}};this._datatypeMap.Date.serialize||(this._datatypeMap.Date.serialize=function(a){return k.toISOString(a,
{zulu:!0})});a&&!1===a.referenceIntegrity&&(this.referenceIntegrity=!1);this._saveInProgress=!1},referenceIntegrity:!0,_assert:function(a){if(!a)throw Error("assertion failed in ItemFileWriteStore");},_getIdentifierAttribute:function(){return this.getFeatures()["dojo.data.api.Identity"]},newItem:function(a,d){this._assert(!this._saveInProgress);this._loadFinished||this._forceLoad();if("object"!=typeof a&&"undefined"!=typeof a)throw Error("newItem() was passed something other than an object");var c=
null,b=this._getIdentifierAttribute();if(b===Number)c=this._arrayOfAllItems.length;else{c=a[b];if("undefined"===typeof c)throw Error("newItem() was not passed an identity for the new item");if(n.isArray(c))throw Error("newItem() was not passed an single-valued identity");}this._itemsByIdentity&&this._assert("undefined"===typeof this._itemsByIdentity[c]);this._assert("undefined"===typeof this._pending._newItems[c]);this._assert("undefined"===typeof this._pending._deletedItems[c]);var f={};f[this._storeRefPropName]=
this;f[this._itemNumPropName]=this._arrayOfAllItems.length;this._itemsByIdentity&&(this._itemsByIdentity[c]=f,f[b]=[c]);this._arrayOfAllItems.push(f);b=null;if(d&&d.parent&&d.attribute){var b={item:d.parent,attribute:d.attribute,oldValue:void 0},e=this.getValues(d.parent,d.attribute);if(e&&0<e.length){var g=e.slice(0,e.length);b.oldValue=1===e.length?e[0]:e.slice(0,e.length);g.push(f);this._setValueOrValues(d.parent,d.attribute,g,!1);b.newValue=this.getValues(d.parent,d.attribute)}else this._setValueOrValues(d.parent,
d.attribute,f,!1),b.newValue=f}else f[this._rootItemPropName]=!0,this._arrayOfTopLevelItems.push(f);this._pending._newItems[c]=f;for(var k in a){if(k===this._storeRefPropName||k===this._itemNumPropName)throw Error("encountered bug in ItemFileWriteStore.newItem");d=a[k];n.isArray(d)||(d=[d]);f[k]=d;if(this.referenceIntegrity)for(c=0;c<d.length;c++)e=d[c],this.isItem(e)&&this._addReferenceToMap(e,f,k)}this.onNew(f,b);return f},_removeArrayElement:function(a,d){d=g.indexOf(a,d);return-1!=d?(a.splice(d,
1),!0):!1},deleteItem:function(a){this._assert(!this._saveInProgress);this._assertIsItem(a);var d=a[this._itemNumPropName],c=this.getIdentity(a);if(this.referenceIntegrity){var b=this.getAttributes(a);a[this._reverseRefMap]&&(a["backup_"+this._reverseRefMap]=n.clone(a[this._reverseRefMap]));g.forEach(b,function(b){g.forEach(this.getValues(a,b),function(d){this.isItem(d)&&(a["backupRefs_"+this._reverseRefMap]||(a["backupRefs_"+this._reverseRefMap]=[]),a["backupRefs_"+this._reverseRefMap].push({id:this.getIdentity(d),
attr:b}),this._removeReferenceFromMap(d,a,b))},this)},this);if(b=a[this._reverseRefMap])for(var f in b){var e=null;if(e=this._itemsByIdentity?this._itemsByIdentity[f]:this._arrayOfAllItems[f])for(var k in b[f]){var m=this.getValues(e,k)||[],A=g.filter(m,function(a){return!(this.isItem(a)&&this.getIdentity(a)==c)},this);this._removeReferenceFromMap(a,e,k);A.length<m.length&&this._setValueOrValues(e,k,A,!0)}}}this._arrayOfAllItems[d]=null;a[this._storeRefPropName]=null;this._itemsByIdentity&&delete this._itemsByIdentity[c];
this._pending._deletedItems[c]=a;a[this._rootItemPropName]&&this._removeArrayElement(this._arrayOfTopLevelItems,a);this.onDelete(a);return!0},setValue:function(a,d,c){return this._setValueOrValues(a,d,c,!0)},setValues:function(a,d,c){return this._setValueOrValues(a,d,c,!0)},unsetAttribute:function(a,d){return this._setValueOrValues(a,d,[],!0)},_setValueOrValues:function(a,d,c,b){this._assert(!this._saveInProgress);this._assertIsItem(a);this._assert(n.isString(d));this._assert("undefined"!==typeof c);
var f=this._getIdentifierAttribute();if(d==f)throw Error("ItemFileWriteStore does not have support for changing the value of an item's identifier.");var f=this._getValueOrValues(a,d),h=this.getIdentity(a);if(!this._pending._modifiedItems[h]){var e={},k;for(k in a)e[k]=k===this._storeRefPropName||k===this._itemNumPropName||k===this._rootItemPropName?a[k]:k===this._reverseRefMap?n.clone(a[k]):a[k].slice(0,a[k].length);this._pending._modifiedItems[h]=e}h=!1;if(n.isArray(c)&&0===c.length){if(h=delete a[d],
c=void 0,this.referenceIntegrity&&f){k=f;n.isArray(k)||(k=[k]);for(var m=0;m<k.length;m++)e=k[m],this.isItem(e)&&this._removeReferenceFromMap(e,a,d)}}else{h=n.isArray(c)?c.slice(0,c.length):[c];if(this.referenceIntegrity)if(f){k=f;n.isArray(k)||(k=[k]);var x={};g.forEach(k,function(a){this.isItem(a)&&(a=this.getIdentity(a),x[a.toString()]=!0)},this);g.forEach(h,function(b){if(this.isItem(b)){var c=this.getIdentity(b);x[c.toString()]?delete x[c.toString()]:this._addReferenceToMap(b,a,d)}},this);for(m in x)this._removeReferenceFromMap(this._itemsByIdentity?
this._itemsByIdentity[m]:this._arrayOfAllItems[m],a,d)}else for(m=0;m<h.length;m++)e=h[m],this.isItem(e)&&this._addReferenceToMap(e,a,d);a[d]=h;h=!0}if(b)this.onSet(a,d,f,c);return h},_addReferenceToMap:function(a,d,c){d=this.getIdentity(d);var b=a[this._reverseRefMap];b||(b=a[this._reverseRefMap]={});(a=b[d])||(a=b[d]={});a[c]=!0},_removeReferenceFromMap:function(a,d,c){d=this.getIdentity(d);var b=a[this._reverseRefMap],f;if(b){for(f in b)f==d&&(delete b[f][c],this._isEmpty(b[f])&&delete b[f]);this._isEmpty(b)&&
delete a[this._reverseRefMap]}},_dumpReferenceMap:function(){var a;for(a=0;a<this._arrayOfAllItems.length;a++);},_getValueOrValues:function(a,d){var c=void 0;this.hasAttribute(a,d)&&(a=this.getValues(a,d),c=1==a.length?a[0]:a);return c},_flatten:function(a){if(this.isItem(a))return{_reference:this.getIdentity(a)};if("object"===typeof a)for(var d in this._datatypeMap){var c=this._datatypeMap[d];if(n.isObject(c)&&!n.isFunction(c)){if(a instanceof c.type){if(!c.serialize)throw Error("ItemFileWriteStore:  No serializer defined for type mapping: ["+
d+"]");return{_type:d,_value:c.serialize(a)}}}else if(a instanceof c)return{_type:d,_value:a.toString()}}return a},_getNewFileContentString:function(){var a={},d=this._getIdentifierAttribute();d!==Number&&(a.identifier=d);this._labelAttr&&(a.label=this._labelAttr);a.items=[];for(d=0;d<this._arrayOfAllItems.length;++d){var c=this._arrayOfAllItems[d];if(null!==c){var b={},f;for(f in c)if(f!==this._storeRefPropName&&f!==this._itemNumPropName&&f!==this._reverseRefMap&&f!==this._rootItemPropName){var k=
this.getValues(c,f);if(1==k.length)b[f]=this._flatten(k[0]);else for(var g=[],m=0;m<k.length;++m)g.push(this._flatten(k[m])),b[f]=g}a.items.push(b)}}return e.toJson(a,!0)},_isEmpty:function(a){var d=!0;if(n.isObject(a))for(var c in a){d=!1;break}else n.isArray(a)&&0<a.length&&(d=!1);return d},save:function(a){this._assert(!this._saveInProgress);this._saveInProgress=!0;var d=this,f=function(){d._pending={_newItems:{},_modifiedItems:{},_deletedItems:{}};d._saveInProgress=!1;a&&a.onComplete&&a.onComplete.call(a.scope||
c.global)},b=function(b){d._saveInProgress=!1;a&&a.onError&&a.onError.call(a.scope||c.global,b)};if(this._saveEverything){var e=this._getNewFileContentString();this._saveEverything(f,b,e)}this._saveCustom&&this._saveCustom(f,b);this._saveEverything||this._saveCustom||f()},revert:function(){this._assert(!this._saveInProgress);for(var a in this._pending._modifiedItems){var d=this._pending._modifiedItems[a],c=null,c=this._itemsByIdentity?this._itemsByIdentity[a]:this._arrayOfAllItems[a];d[this._storeRefPropName]=
this;for(var b in c)delete c[b];n.mixin(c,d)}var f;for(a in this._pending._deletedItems)f=this._pending._deletedItems[a],f[this._storeRefPropName]=this,d=f[this._itemNumPropName],f["backup_"+this._reverseRefMap]&&(f[this._reverseRefMap]=f["backup_"+this._reverseRefMap],delete f["backup_"+this._reverseRefMap]),this._arrayOfAllItems[d]=f,this._itemsByIdentity&&(this._itemsByIdentity[a]=f),f[this._rootItemPropName]&&this._arrayOfTopLevelItems.push(f);for(a in this._pending._deletedItems)f=this._pending._deletedItems[a],
f["backupRefs_"+this._reverseRefMap]&&(g.forEach(f["backupRefs_"+this._reverseRefMap],function(a){this._addReferenceToMap(this._itemsByIdentity?this._itemsByIdentity[a.id]:this._arrayOfAllItems[a.id],f,a.attr)},this),delete f["backupRefs_"+this._reverseRefMap]);for(a in this._pending._newItems)d=this._pending._newItems[a],d[this._storeRefPropName]=null,this._arrayOfAllItems[d[this._itemNumPropName]]=null,d[this._rootItemPropName]&&this._removeArrayElement(this._arrayOfTopLevelItems,d),this._itemsByIdentity&&
delete this._itemsByIdentity[a];this._pending={_newItems:{},_modifiedItems:{},_deletedItems:{}};return!0},isDirty:function(a){return a?(a=this.getIdentity(a),(new Boolean(this._pending._newItems[a]||this._pending._modifiedItems[a]||this._pending._deletedItems[a])).valueOf()):!this._isEmpty(this._pending._newItems)||!this._isEmpty(this._pending._modifiedItems)||!this._isEmpty(this._pending._deletedItems)},onSet:function(a,d,c,b){},onNew:function(a,d){},onDelete:function(a){},close:function(a){if(this.clearOnClose){if(this.isDirty())throw Error("dojo.data.ItemFileWriteStore: There are unsaved changes present in the store.  Please save or revert the changes before invoking close.");
this.inherited(arguments)}}})})},"davinci/ve/views/SwitchingStyleView":function(){define("dojo/_base/declare dojo/_base/kernel davinci/lang/ve xide/utils dijit/layout/ContentPane davinci/Runtime davinci/workbench/WidgetLite davinci/ve/widgets/HTMLStringUtil".split(" "),function(n,m,g,e,c,f,k,a){return n("davinci.ve.views.SwitchingStyleView",[k],{_editor:null,_widget:null,_subWidget:null,_titleBarDiv:"\x3cdiv class\x3d'palette_titleBarDiv'\x3e\x3cspan class\x3d'paletteCloseBox'\x3e\x3c/span\x3e\x3cspan class\x3d'titleBarDivTitle'\x3e\x3c/span\x3e\x3c/div\x3e",
constructor:function(a,c){},pageTemplate:[{key:"widgetSpecific",className:"maqPropertySection page_editor_only",addCommonPropertiesAtTop:!1,html:"\x3cdiv dojoType\x3d'davinci.ve.widgets.WidgetProperties'\x3e\x3c/div\x3e"},{key:"events",className:"maqPropertySection page_editor_only",addCommonPropertiesAtTop:!1,pageTemplate:{html:"\x3cdiv dojoType\x3d'davinci.ve.widgets.EventSelection'\x3e\x3c/div\x3e"}},{key:"layout",className:"maqPropertySection",addCommonPropertiesAtTop:!0,pageTemplate:[{display:"width",
type:"multi",target:["width"],values:["","auto","100%","200px","10em"]},{display:"height",type:"multi",target:["height"],values:["","auto","100%","200px","10em"]},{html:"\x26nbsp;"},{key:"showMinMax",display:"\x26nbsp;\x26nbsp;\x26nbsp;",type:"toggleSection",pageTemplate:[{display:"min-height",type:"multi",target:["min-height"],rowClass:"propertiesSectionHidden"},{display:"max-height",type:"multi",target:["max-height"],rowClass:"propertiesSectionHidden"},{display:"min-width",type:"multi",target:["min-width"],
rowClass:"propertiesSectionHidden"},{display:"max-width",type:"multi",target:["max-width"],rowClass:"propertiesSectionHidden"},{html:"\x26nbsp;",rowClass:"propertiesSectionHidden"}]},{display:"position",type:"combo",target:["position"],values:["","absolute","relative"]},{display:"left",type:"multi",target:["left"],values:["","0px","1em"]},{display:"top",type:"multi",target:["top"],values:["","0px","1em"]},{display:"right",type:"multi",target:["right"],values:["","0px","1em"]},{display:"bottom",type:"multi",
target:["bottom"],values:["","0px","1em"]},{display:"display",type:"combo",target:["display"],values:["","none","block","inline","inline-block"]},{display:"opacity",type:"multi",target:["opacity"],values:["0","0.5","1.0"]},{display:"box-shadow",type:"text",target:["box-shadow"],value:["","none","1px 1px rgba(0,0,0,.5)"]},{display:"float",type:"combo",target:["float"],values:["","none","left","right"]},{display:"clear",type:"combo",target:["clear"],values:["","none","left","right","both"]},{display:"overflow",
type:"combo",target:["overflow"],values:["","visible","hidden","scroll","auto"]},{display:"z-index",type:"multi",target:["z-index"],values:" auto 0 1 100 -1 -100".split(" ")},{display:"box-sizing",type:"combo",target:["box-sizing","-webkit-box-sizing","-ms-box-sizing","-moz-box-sizing"],values:["","content-box","border-box"]}]},{key:"padding",className:"maqPropertySection",addCommonPropertiesAtTop:!0,pageTemplate:[{display:"\x3cb\x3e(padding)\x3c/b\x3e",type:"multi",target:["padding"],values:["",
"0px","1em"]},{key:"showtrbl",display:"\x26nbsp;\x26nbsp;\x26nbsp;",type:"toggleSection",pageTemplate:[{display:"padding-top",type:"multi",target:["padding-top"],values:["","0px","1em"],rowClass:"propertiesSectionHidden"},{display:"padding-right",type:"multi",target:["padding-right"],values:["","0px","1em"],rowClass:"propertiesSectionHidden"},{display:"padding-bottom",type:"multi",target:["padding-bottom"],values:["","0px","1em"],rowClass:"propertiesSectionHidden"},{display:"padding-left",type:"multi",
target:["padding-left"],values:["","0px","1em"],rowClass:"propertiesSectionHidden"}]}]},{key:"margins",className:"maqPropertySection",addCommonPropertiesAtTop:!0,pageTemplate:[{display:"\x3cb\x3e(margin)\x3c/b\x3e",type:"multi",target:["margin"],values:["","0px","1em"]},{key:"showtrbl",display:"\x26nbsp;\x26nbsp;\x26nbsp;",type:"toggleSection",pageTemplate:[{display:"margin-top",type:"multi",target:["margin-top"],values:["","0px","1em"],rowClass:"propertiesSectionHidden"},{display:"margin-right",
type:"multi",target:["margin-right"],values:["","0px","1em"],rowClass:"propertiesSectionHidden"},{display:"margin-bottom",type:"multi",target:["margin-bottom"],values:["","0px","1em"],rowClass:"propertiesSectionHidden"},{display:"margin-left",type:"multi",target:["margin-left"],values:["","0px","1em"],rowClass:"propertiesSectionHidden"}]}]},{key:"background",className:"maqPropertySection",addCommonPropertiesAtTop:!0,pageTemplate:[{display:"background-color",type:"background",target:["background-color"],
colorswatch:!0},{display:"background-image",type:"background",target:["background-image"],values:["","none"]},{display:"background-repeat",type:"background",values:["","repeat","repeat-x","repeat-y","no-repeat"],target:["background-repeat"]},{display:"background-position",type:"background",target:["background-position"],values:";0px 0px;0% 0%;left top;center center;right bottom".split(";")},{display:"background-size",type:"background",target:["background-size"],values:["","auto","contain","cover",
"100%"]},{display:"background-origin",type:"background",target:["background-origin"],values:["","border-box","padding-box","content-box"]},{display:"background-clip",type:"background",target:["background-clip"],values:["","border-box","padding-box","content-box"]}]},{key:"border",className:"maqPropertySection",addCommonPropertiesAtTop:!0,pageTemplate:[{display:"\x3cb\x3e(border)\x3c/b\x3e",type:"multi",target:["border"],values:["","none","1px solid black"]},{display:"show",type:"combo",values:["none",
"props","sides","all"],id:"properties_show_select",onchange:function(a){if("number"==typeof a){var d=function(a,b,d,c,f){for(;b<=d;b++){var e=m.byId(a[b].rowId);b>=c&&b<=f?m.removeClass(e,"propertiesSectionHidden"):m.addClass(e,"propertiesSectionHidden")}};if(this.pageTemplate){a=this.pageTemplate[a];var b;a&&a.id&&(a=m.byId(a.id))&&(b=a.value);m.isString(b)&&("none"===b?d(this.pageTemplate,2,20,-1,-1):"sides"===b?d(this.pageTemplate,2,20,2,5):"props"===b?d(this.pageTemplate,2,20,6,8):"all"===b&&
d(this.pageTemplate,2,20,9,20))}}}},{display:"border-top",type:"multi",target:["border-top"],values:["","none","1px solid black"],rowClass:"propertiesSectionHidden"},{display:"border-right",type:"multi",target:["border-right"],values:["","none","1px solid black"],rowClass:"propertiesSectionHidden"},{display:"border-bottom",type:"multi",target:["border-bottom"],values:["","none","1px solid black"],rowClass:"propertiesSectionHidden"},{display:"border-left",type:"multi",target:["border-left"],values:["",
"none","1px solid black"],rowClass:"propertiesSectionHidden"},{display:"border-width",type:"multi",target:["border-width"],values:["","1px","1em"],rowClass:"propertiesSectionHidden"},{display:"border-style",type:"multi",target:["border-style"],values:["","none","solid","dotted","dashed"],rowClass:"propertiesSectionHidden"},{display:"border-color",type:"color",target:["border-color"],rowClass:"propertiesSectionHidden"},{display:"border-top-width",type:"multi",target:["border-top-width"],values:["",
"1px","1em"],rowClass:"propertiesSectionHidden"},{display:"border-top-style",type:"multi",target:["border-top-style"],values:["","none","solid","dotted","dashed"],rowClass:"propertiesSectionHidden"},{display:"border-top-color",type:"color",target:["border-top-color"],rowClass:"propertiesSectionHidden"},{display:"border-right-width",type:"multi",target:["border-right-width"],values:["","1px","1em"],rowClass:"propertiesSectionHidden"},{display:"border-right-style",type:"multi",target:["border-right-style"],
values:["","none","solid","dotted","dashed"],rowClass:"propertiesSectionHidden"},{display:"border-right-color",type:"color",target:["border-right-color"],rowClass:"propertiesSectionHidden"},{display:"border-bottom-width",type:"multi",target:["border-bottom-width"],values:["","1px","1em"],rowClass:"propertiesSectionHidden"},{display:"border-bottom-style",type:"multi",target:["border-bottom-style"],values:["","none","solid","dotted","dashed"],rowClass:"propertiesSectionHidden"},{display:"border-bottom-color",
type:"color",target:["border-bottom-color"],rowClass:"propertiesSectionHidden"},{display:"border-left-width",type:"multi",target:["border-left-width"],values:["","1px","1em"],rowClass:"propertiesSectionHidden"},{display:"border-left-style",type:"multi",target:["border-left-style"],values:["","none","solid","dotted","dashed"],rowClass:"propertiesSectionHidden"},{display:"border-left-color",type:"color",target:["border-left-color"],rowClass:"propertiesSectionHidden"},{display:"border-collapse",type:"combo",
target:["border-collapse"],values:["","separate","collapse"]},{display:"\x3cb\x3e(border-radius)\x3c/b\x3e",type:"multi",target:["border-radius","-moz-border-radius"],values:["","0px","6px"]},{key:"showDetails",display:"",type:"toggleSection",pageTemplate:[{display:"border-top-left-radius",type:"multi",target:["border-top-left-radius","-moz-border-radius-topleft"],values:["","0px","6px"],rowClass:"propertiesSectionHidden"},{display:"border-top-right-radius",type:"multi",target:["border-top-right-radius",
"-moz-border-radius-topright"],values:["","0px","6px"],rowClass:"propertiesSectionHidden"},{display:"border-bottom-right-radius",type:"multi",target:["border-bottom-right-radius","-moz-border-radius-bottomright"],values:["","0px","6px"],rowClass:"propertiesSectionHidden"},{display:"border-bottom-left-radius",type:"multi",target:["border-bottom-left-radius","-moz-border-radius-bottomleft"],values:["","0px","6px"],rowClass:"propertiesSectionHidden"}]}]},{key:"fontsAndText",className:"maqPropertySection",
addCommonPropertiesAtTop:!0,pageTemplate:[{display:"font",type:"text",target:["font"]},{display:"font-family",type:"font",target:["font-family"]},{display:"size",type:"multi",target:["font-size"],values:["","100%","1em","10px","10pt"]},{display:"color",type:"color",target:["color"]},{display:"font-weight",type:"combo",target:["font-weight"],values:["","normal","bold"]},{display:"font-style",type:"combo",target:["font-style"],values:["","normal","italic"]},{display:"text-decoration",type:"combo",target:["text-decoration"],
values:["","none","underline","line-through"]},{display:"text-align",type:"combo",target:["text-align"],values:["","left","center","right","justify"]},{display:"vertical-align",type:"combo",target:["vertical-align"],values:["","baseline","top","middle","bottom"]},{display:"white-space",type:"combo",target:["white-space"],values:" normal nowrap pre pre-line pre-wrap".split(" ")},{display:"text-indent",type:"multi",target:["text-indent"],values:["","0","1em","10px"]},{display:"line-height",type:"multi",
target:["line-height"],values:["","normal","1.2","120%"]}]}],buildRendering:function(){this.domNode=m.doc.createElement("div");m.addClass(this.domNode,"propertiesContent");var a;a=""+this._titleBarDiv;for(var c=0;c<this.pageTemplate.length;c++)if(this.pageTemplate[c].title=g[this.pageTemplate[c].key]?g[this.pageTemplate[c].key]:"Key not found",this.pageTemplate[c].pageTemplate)for(var b=0;b<this.pageTemplate[c].pageTemplate.length;b++)this.pageTemplate[c].pageTemplate[b].key&&(this.pageTemplate[c].pageTemplate[b].display+=
g[this.pageTemplate[c].pageTemplate[b].key]?g[this.pageTemplate[c].pageTemplate[b].key]:"Key not found");this.domNode.innerHTML=a+"\x3cdiv class\x3d'propertiesToolBar' dojoType\x3d'davinci.ve.widgets.WidgetToolBar'\x3e\x3c/div\x3e\x3cdiv dojoType\x3d'davinci.ve.widgets.WidgetProperties'\x3e\x3c/div\x3e\x3cdiv class\x3d'propScrollableArea'\x3e\x3ctable class\x3d'propRootDetailsContainer'\x3e\x3ctr\x3e\x3ctd class\x3d'propPaletteRoot'\x3e";this.inherited(arguments)},_widgetValuesChanged:function(a){var d=
this._currentPropSection;if(d){for(var b=!1,c=0;c<this.pageTemplate.length;c++)if(this.pageTemplate[c].key==d){b=!0;break}if(b)for(d=this._getVisibleCascade(c),b=0;b<d.length;b++)d[b]._widgetValuesChanged(a)}},_getVisibleCascade:function(a){if(a)return this.pageTemplate[a].cascade;a=[];var d=this._currentPropSection;if(d)for(var b=0;b<this.pageTemplate.length;b++)if(this.pageTemplate[b].key==d){a=a.concat(this.pageTemplate[b].cascade);break}return a},_updatePaletteValues:function(a){if(this._editor){var d=
a[0];this._subwidget=(this._widget=d)&&d.subwidget;this.setReadOnly(!(this._widget||this._subwidget));for(var d=this._getVisibleCascade(),b=0;b<d.length;b++)d[b]._widgetSelectionChanged(a)}},_widgetSelectionChanged:function(a){!0!==a.isFake&&this._updatePaletteValues(a.selection)},_stateChanged:function(){this._updatePaletteValues(this._widget?[this._widget]:[])},_widgetPropertiesChanged:function(a){this._widget&&this._widget.type!==a[0].type||this._updatePaletteValues(a)},_titlePaneOpen:function(a){a=
this._getVisibleCascade(a);for(var d=0;d<a.length;d++)a[d]._editorSelected({editor:this._editor})},startup:function(){this.domNode.style.height="100%";this._editor=f.currentEditor;this.inherited(arguments);for(var a=0;a<this.pageTemplate.length;a++){var c=this.pageTemplate[a];if(c.pageTemplate)for(var b=0;b<c.pageTemplate.length;b++){var e=c.pageTemplate[b];e.onchange&&e.id&&this.addHandle("onchange",m.connect(m.byId(e.id),"onchange",m.hitch(c,e.onchange,b)))}}for(a=0;a<this.pageTemplate.length;a++)this.pageTemplate[a].cascade=
[];try{this.setReadOnly(!0)}catch(z){logError(z,"set read only crashed ! "+z)}this.onEditorSelected();this.subscribe("/davinci/ui/widgetValuesChanged",m.hitch(this,this._widgetValuesChanged));this.subscribe("/davinci/ui/widgetPropertiesChanged",m.hitch(this,this._widgetPropertiesChanged));this.subscribe("/davinci/ui/editorSelected",m.hitch(this,this._editorSelected));this.subscribe("/davinci/ui/widgetSelected",m.hitch(this,this._widgetSelectionChanged));this.subscribe("/davinci/states/state/changed",
m.hitch(this,this._stateChanged));this.subscribe("/maqetta/appstates/state/changed",m.hitch(this,this._stateChanged));this.subscribe("/davinci/ui/initialPerspectiveReady",m.hitch(this,this._initialPerspectiveReady));this.subscribe("/davinci/workbench/ready",m.hitch(this,this._workbenchReady))},setReadOnly:function(a){for(var d=0;d<this.pageTemplate.length;d++){var b=this.pageTemplate[d].pageTemplate;if(b)for(var c=0;c<b.length;c++){var f=b[c].widget;f?f.set("readOnly",a):(f=b[c].domNode)&&m.attr(f,
"disabled",a)}}},_modelEntryById:function(a){for(var d=0;d<this.pageTemplate.length;d++){var b=this.pageTemplate[d].pageTemplate;if(b)for(var c=0;c<b.length;c++)if(a==b[c].id)return b[c]}},_editorSelected:function(a){this._editor=a.editor;this.onEditorSelected(this._editor);a=this.tabContainer;this.getParent();var d=a.selectedChildWidget||a.getSelected(),b=!1,c=m.query(".maqPropertySection",a.domNode);this._editor?"davinci.ve.PageEditor"!=this._editor.declaredClass&&"davinci.ve.themeEditor.ThemeEditor"!=
this._editor.declaredClass?c.forEach(function(a){dijit.byNode(a)==d&&(b=!0)}):(c.forEach(function(a){}),"davinci.ve.themeEditor.ThemeEditor"==this._editor.declaredClass&&m.query(".page_editor_only",a.domNode).forEach(function(a){dijit.byNode(a)==d&&(b=!0)})):(c.forEach(function(a){dijit.byNode(a)}),b=!0);b&&this._selectFirstVisibleTab()},onEditorSelected:function(){this._subWidget=this._widget=null;if(this._oldClassName)if(this.domNode)m.removeClass(this.domNode.parentNode.parentNode,this._oldClassName);
else{console.error("have no dom node ! : "+this.id);return}if(this._editor)if(this._editor&&this._editor.editorID&&(this._oldClassName=this._editor.editorID.replace(/\./g,"_"),this.domNode?m.addClass(this.domNode.parentNode.parentNode,this._oldClassName):console.error("have no dom node !")),this.domNode){for(var d=this._currentPropSection,c=m.query(".propSectionButton",this.domNode),b=0;b<c.length;b++){var f=c[b];this._editor&&this._editor.supports&&this._editor.supports("propsect_"+this.pageTemplate[b].key)?
m.removeClass(f,"dijitHidden"):(m.addClass(f,"dijitHidden"),d==this.pageTemplate[b].key&&a.showRoot())}d=[];for(b=0;b<this.pageTemplate.length;b++)(c=this.pageTemplate[b].cascade)&&(d=d.concat(c));for(b=0;b<d.length;b++)c=d[b],c._editorSelected&&c._editorSelected({editor:this._editor})}else console.error("have no dom node !")},_destroyContent:function(){var a=this.containerNode||this.domNode;for(m.forEach(m.query("[widgetId]",a).map(dijit.byNode),function(a){a.destroy()});a.firstChild;)m._destroyElement(a.firstChild);
m.forEach(this._tooltips,function(a){a.destroy()});this._tooltips=void 0;this._destroyHandles()},sectionTitleFromKey:function(a){for(var d=0;d<this.pageTemplate.length;d++)if(this.pageTemplate[d].key==a)return this.pageTemplate[d].title},_initialPerspectiveReady:function(){var d=null;if(!this._alreadySplitIntoMultipleTabs){var f=this.tabContainer;m.addClass(f.domNode,"propRootDetailsContainer");m.addClass(f.domNode,"propertiesContent");for(var b=0;b<this.pageTemplate.length;b++){var d=this.pageTemplate[b].key,
k=this.pageTemplate[b].title,n=this.pageTemplate[b].className;n||(n="");var r=this._titleBarDiv,r=r+"\x3cdiv class\x3d'propertiesToolBar' dojoType\x3d'davinci.ve.widgets.WidgetToolBar'\x3e\x3c/div\x3e",r=r+("\x3cdiv class\x3d'cascadeBackButtonDiv'\x3e\x3cbutton class\x3d'btn btn-xs btn-info' onclick\x3d'davinci.ve.widgets.HTMLStringUtil.showSection(\""+d+'","'+k+"\")'\x3e"+k+" "+g.properties+"\x3c/button\x3e\x3c/div\x3e"),d=a.generateTemplate(this.pageTemplate[b]),d=r+d;0==b?(d=this,d.set("title",
k),m.addClass(d.domNode,n)):(r=f.createTab(k,null,null,null,{"class":n,delegate:this}),d=e.addWidget(c,{title:k,content:d,"class":n,delegate:this},null,r,!1),r.cp=d,r._maqPropGroup=this.pageTemplate[b].key,r.add(d,null,!1));d._maqPropGroup=this.pageTemplate[b].key;k=m.query(".paletteCloseBox",d.domNode);0<k.length&&m.connect(k[0],"click",this,function(a){davinci.Workbench.collapsePaletteContainer(a.currentTarget)})}for(k=0;k<this.pageTemplate.length;k++)if(this.pageTemplate[k].cascade=[],n=this.pageTemplate[k].pageTemplate){for(b=
0;b<n.length;b++)r=n[b].id,(d=dijit.byId(r))?n[b].widget=d:(d=m.byId(r))&&(n[b].domNode=d);m.query("#"+this.pageTemplate[k].id+" .CascadeTop").forEach(function(a){return function(b){b=dijit.byId(b.id);a.cascade.push(b)}}(this.pageTemplate[k]))}f._on("selectChild",function(b){b._maqPropGroup&&(this._currentPropSection=b._maqPropGroup,b=(b=this._editor&&this._editor.getContext?this._editor.getContext():null)&&b.getSelection?b.getSelection():[],this._updatePaletteValues(b),a._initSection(this._currentPropSection))}.bind(this));
this._alreadySplitIntoMultipleTabs=!0}},_workbenchReady:function(){this._updateToolBars()},_updateToolBars:function(){m.query(".propertiesToolBar").forEach(function(a){this._editor&&"davinci.ve.PageEditor"==this._editor.declaredClass?(m.removeClass(a,"dijitHidden"),a.style.display=""):m.addClass(a,"dijitHidden")}.bind(this))},_selectFirstVisibleTab:function(){var a=this.getParent();if(a&&a.getChildren)for(var c=a.getChildren(),b=0;b<c.length;b++){var f=c[b];if("none"!=f.controlButton.domNode.style.display){a._maqDontExpandCollapse=
!0;a.selectChild(f);delete a._maqDontExpandCollapse;break}}}})})},"davinci/workbench/WidgetLite":function(){define(["dojo/_base/declare","dijit/_WidgetBase","dojo/parser","xide/mixins/EventedMixin"],function(n,m,g,e){return n("davinci.workbench.WidgetLite",[m,e],{buildRendering:function(){this.inherited(arguments);/dojotype/i.test(this.domNode.innerHTML||"")&&(this._startupWidgets=dojo.parser.parse(this.domNode,{noStart:!this._earlyTemplatedStartup,inherited:{dir:this.dir,lang:this.lang}}))},_destroyContent:function(){var c=
this.containerNode||this.domNode;for(dojo.forEach(dojo.query("[widgetId]",c).map(dijit.byNode),function(c){c.destroy()});c.firstChild;)dojo._destroyElement(c.firstChild);dojo.forEach(this._tooltips,function(c){c.destroy()});delete this._tooltips;this._destroyHandles()},destroy:function(){this._destroyHandles();this.inherited(arguments)},startup:function(){dojo.forEach(this._startupWidgets,function(c){c&&!c._started&&c.startup&&c.startup()});this.inherited(arguments)}})})},"davinci/ve/widgets/HTMLStringUtil":function(){define("davinci/Runtime ./FontDataStore ./FontComboBox ./DropDown dijit/form/ComboBox ./MetaDataStore ./ColorPicker ./Background2".split(" "),
function(n,m){var g=dojo.getObject("davinci.ve.widgets.HTMLStringUtil",!0);dojo.mixin(g,{__id:0,idPrefix:"davinci_ve_widgets_properties_generated",_currentPropSection:null,animSS:null,animRuleIndex:{},getCurrentPropSection:function(){return this._currentPropSection},getId:function(){return this.idPrefix+this.__id++},injectId:function(e,c){var f=e.indexOf("\x3e");return f?e.substring(0,f)+" id\x3d'"+c+"'"+e.substring(f,e.length):"\x3cspan id\x3d'"+c+"'\x3e"+e+"\x3c/span\x3e"},getEditor:function(e){function c(a){var d=
{};d.value="undefined"!=typeof a.value&&null!==a.value?a.value:a;d.title=a.title||d.value;return d}var f=e.type,k=this.getId();e.id=k;var a=e.disabled?" disabled\x3d'true' ":"";switch(f){case "multi":return f="",e.values&&(f="data\x3d'"+dojo.toJson(dojo.map(e.values,function(a){return{value:a}}))+"'"),"\x3cdiv dojoType\x3d'davinci.ve.widgets.MultiInputDropDown' "+f+"  class\x3d'propertyPaneEditablevalue' style\x3d'display:inline-block; width:100%;' id\x3d'"+k+"'"+a+"\x3e\x3c/div\x3e";case "boolean":return"\x3cinput type\x3d'checkbox' class\x3d'propertyPaneEditablevalue' style\x3d'display:inline-block;margin-left:5px' id\x3d'"+
k+"'\x3e\x3c/input\x3e";case "comboEdit":e=e.values;k="\x3cselect dojoType\x3d'dijit.form.ComboBox' autoComplete\x3d'false' style\x3d'display:inline-block; width:100%;' id\x3d'"+k+"'"+a+"\x3e";for(a=0;a<e.length;a++)f=c(e[a]),k+="\x3coption class\x3d'option' value\x3d'"+f.value+"'\x3e"+f.title+"\x3c/option\x3e";return k+"\x3c/select\x3e";case "combo":e=e.values;k="\x3cselect class\x3d'form-control input-transparent' style\x3d'display:inline-block; width:100%;' id\x3d'"+k+"'"+a+"\x3e";for(a=0;a<e.length;a++)f=
c(e[a]),k+="\x3coption class\x3d'option' value\x3d'"+f.value+"'\x3e"+f.title+"\x3c/option\x3e";return k+"\x3c/select\x3e";case "font":return k="\x3cdiv dojoType\x3d'davinci.ve.widgets.FontDataStore' jsId\x3d'"+k+"_fontStore'\x3e"+("\x3cdiv dojoType\x3d'davinci.ve.widgets.FontComboBox' value\x3d'"+m.fonts[0].value+"' store\x3d'"+k+"_fontStore'  id\x3d'"+k+"' class\x3d'propertyPaneEditablevalue' style\x3d'display:inline-block; width:100%;'\x3e\x3c/div\x3e");case "stateold":return"\x3cdiv dojoType\x3d'davinci.ve.widgets.MetaDataStore' jsId\x3d'davinci.properties.event"+
k+"_Store'\x3e"+("\x3cdiv dojoType\x3d'dijit.form.ComboBox' id\x3d'"+k+"'store\x3d'davinci.properties.event"+k+"_Store' class\x3d'propertyPaneEditablevalue' style\x3d'display:inline-block; width:100%;' autoComplete\x3d'false'\x3e\x3c/div\x3e");case "color":return"\x3cdiv class\x3d'propertyPaneEditablevalue' dojoType\x3d'davinci.ve.widgets.ColorPicker' id\x3d'"+k+"' \x3e\x3c/div\x3e";case "background":return f=dojo.isArray(e.values)?" data\x3d'"+dojo.toJson(e.values)+"'":"",a=dojo.isArray(e.target)?
e.target[0]:e.target,k="\x3cdiv dojoType\x3d'davinci.ve.widgets.Background' id\x3d'"+k+"'"+f+(" propname\x3d'"+a+"'")+(e.colorswatch?" colorswatch\x3d'true'":"")+"\x3e\x3c/div\x3e";case "border":case "number":case "object":case "text":case "array":case "widgetState":case "iconClass":case "state":case "string":if("date"==e.format)return"\x3cdiv class\x3d'propertyPaneEditablevalue' dojoType\x3d'dijit.form.DateTextBox' id\x3d'"+k+"'\x3e\x3c/input\x3e";if("time"==e.format)return"\x3cdiv class\x3d'propertyPaneEditablevalue' dojoType\x3d'dijit.form.TimeTextBox' id\x3d'"+
k+"'\x3e\x3c/input\x3e";default:return k=e.data&&!0===e.data.readonly?"\x3cinput readonly type\x3d'text' class\x3d'form-control input-transparent propertyPaneEditablevalue' style\x3d'display:inline-block; width:100%;' id\x3d'"+k+"'\x3e\x3c/input\x3e":"\x3cinput type\x3d'text' class\x3d'form-control input-transparent propertyPaneEditablevalue' style\x3d'display:inline-block; width:100%;' id\x3d'"+k+"'\x3e\x3c/input\x3e"}},generateTable:function(e,c){var f=c?c.rowsOnly:!1,k=c&&c.zeroSpaceForIncrDecr?
"0px":"20px";c="";if(e.html)return e.id=this.getId(),this.injectId(e.html,e.id);k="\x3ctable class\x3d'property_table_stretchable' border\x3d'0' width\x3d'100%' align\x3d'center' cellspacing\x3d'0' cellpadding\x3d'0'\x3e\x3ccolgroup\x3e\x3ccol style\x3d'width:6px;' /\x3e\x3ccol class\x3d'gap02' /\x3e\x3ccol class\x3d'gap03' /\x3e"+("\x3ccol style\x3d'width:"+k+";' /\x3e")+"\x3ccol style\x3d'width:6px;' /\x3e\x3c/colgroup\x3e";f||(c+=k);for(var a=0;a<e.length;a++)if(e[a].widgetHtml)e[a].id=this.getId(),
e[a].rowId=this.getId(),c+="\x3ctr id\x3d'"+e[a].rowId+"'",e[a].rowClass&&(c+=" class\x3d'"+e[a].rowClass+"'"),c+="\x3e",c+="\x3ctd colspan\x3d'5' width\x3d'100%'\x3e",c+=this.injectId(e[a].widgetHtml,e[a].id),c+="\x3c/td\x3e",c+="\x3c/tr\x3e";else if(e[a].html)e[a].id=this.getId(),e[a].rowId=this.getId(),c+="\x3ctr id\x3d'"+e[a].rowId+"'",c+=" class\x3d'cssPropertySection",e[a].rowClass&&(c+=" "+e[a].rowClass),c+="'\x3e",c+="\x3ctd colspan\x3d'5' width\x3d'100%'\x3e",c+=e[a].html,c+="\x3c/td\x3e",
c+="\x3c/tr\x3e";else if("toggleSection"==e[a].type){c+="\x3ctr id\x3d'"+e[a].id+"'  class\x3d'cssPropertySection'\x3e\x3ctd colspan\x3d'5'\x3e";for(var d="",h=this.generateTable(e[a].pageTemplate,{rowsOnly:!0}),b=0;b<e[a].pageTemplate.length;b++)e[a].pageTemplate[b].rowId&&(d+="dojo.toggleClass('"+e[a].pageTemplate[b].rowId+"','propertiesSectionHidden');"),e[a].pageTemplate[b].cascadeSectionRowId&&(d+="if(this.checked){dojo.removeClass('"+e[a].pageTemplate[b].cascadeSectionRowId+"','propertiesSectionHidden');}else{{dojo.addClass('"+
e[a].pageTemplate[b].cascadeSectionRowId+"','propertiesSectionHidden');}}");c+="\x3cinput type\x3d'checkbox' onclick\x3d\""+d+'"\x3e\x3c/input\x3e';c+=e[a].display;c+="\x3c/td\x3e\x3c/tr\x3e";c+=h}else e[a].display?(e[a].toggleCascade=this.getId(),e[a].cascadeSection=this.getId(),e[a].rowId=this.getId(),e[a].cascadeSectionRowId=this.getId(),c+="\x3ctr id\x3d'"+e[a].rowId+"'",c+=" class\x3d'cssPropertySection",e[a].rowClass&&(c+=" "+e[a].rowClass),c+="'",c+=" propName\x3d'"+e[a].display+"'",c+="\x3e",
c+="\x3ctd/\x3e",c+="\x3ctd class\x3d'propertyDisplayName'\x3e"+e[a].display+":\x26nbsp;\x3c/td\x3e",c+="\x3ctd class\x3d'propertyInputField propertyInputField"+e[a].type+"' \x3e"+this.getEditor(e[a])+"\x3c/td\x3e",c+="\x3ctd class\x3d'propertyExtra' nowrap\x3d'true'\x3e",c+="\x3ctd class\x3d'propertyExtra2' nowrap\x3d'true'\x3e",e[a].target&&!e[a].hideCascade&&(c+="\x3cdiv width\x3d'100%'\x3e\x3cbutton class\x3d'showCss propertyButton' id\x3d'"+e[a].toggleCascade+"'",c+=' onClick\x3d"davinci.ve.widgets.HTMLStringUtil.showProperty(',
c+="'"+e[a].rowId+"'",c+=')"\x3e\x26gt;\x3c/button\x3e',c+="\x3c/div\x3e"),c+="\x3ctd/\x3e",c+="\x3c/tr\x3e",e[a].target&&!e[a].hideCascade&&(d="{'cascadeSectionRowId':\""+e[a].cascadeSectionRowId+"\",'toggleCascade':\""+e[a].toggleCascade+'"}',c+="\x3ctr id\x3d'"+e[a].cascadeSectionRowId+"' class\x3d'cssCascadeSection cascadeRowHidden'\x3e",c+="\x3ctd colspan\x3d'5' width\x3d'100%' class\x3d'showCascadeDiv'\x3e\x3cdiv dojoType\x3d'davinci.ve.widgets.Cascade' toggleClasses\x3d"+d+" target\x3d'"+dojo.toJson(e[a].target)+
"' targetField\x3d'\""+e[a].id+"\"' id\x3d'"+e[a].cascadeSection+"'\x3e\x3c/div\x3e\x3c/td\x3e\x3c/tr\x3e")):(c+="\x3c/table\x3e",c+=this.getEditor(e[a]),c+=k);f||(c+="\x3c/table\x3e");return c},generateTemplate:function(e){var c="";e.pageTemplate?(e.key&&(e.id=this.getId(),c="\x3cdiv class\x3d'propGroup' id\x3d'"+e.id+"' propGroup\x3d'"+e.key+"'\x3e"),c+=this.generateTable(e.pageTemplate),c+="\x3c/div\x3e"):e.html?c+=e.html:e.widgetHtml&&(e.id=this.getId(),c+=this.injectId(e.widgetHtml,e.id));return c},
stylesheetHref:"propview.css",animShowSectionClass:"propRootDetailsContainer",animShowSectionClassSelector:".propRootDetailsContainer",animShowDetailsClass:"property_table_stretchable",animShowDetailsClassSelector:".property_table_stretchable",showPropAnimClasses:["propRowFadeIn","propRowFadeOut","propRowTransparent","propRowOpaque","propRowHidden"],showRoot:function(){this._hideSectionShowRoot();this._currentPropSection=null;return!1},showSection:function(e,c){this._initSection(e);return!1},showProperty:function(e){function c(b){dojo.disconnect(A);
dojo.disconnect(x);f();var d=a._findRule(a.animShowDetailsClassSelector);d?(b=d.ss,d=d.ruleIndex,b.deleteRule(d),b.insertRule(a.animShowDetailsClassSelector+" { margin-top:0px; }",d),k()):console.error("HTMLStringUtil showProperty: transEnd: rule not found")}var f=function(){for(var c=0;c<b.children.length;c++){var f=b.children[c];1==f.nodeType&&dojo.hasClass(f,"cssPropertySection")&&(f==h?a._addRemoveClasses(f,d,[]):a._addRemoveClasses(f,d,["propRowHidden"]))}},k=function(){m&&(dojo.removeClass(m,
"cascadeRowHidden"),dojo.addClass(m,"cascadeRowTransparent"),setTimeout(function(){dojo.removeClass(m,"cascadeRowTransparent");dojo.addClass(m,"cascadeRowFadeIn")},1))};dojo.addClass(dojo.byId("root"),"showingCascade");var a=this,d=this.showPropAnimClasses,h=dojo.byId(e),b=h.parentNode,g=a._searchSiblingsByTagClass(b.children[0],"TR","cssPropertySection"),m=a._searchSiblingsByTagClass(h.nextSibling,"TR","cssCascadeSection");e=a._searchUpByTagClass(b,"TABLE",a.animShowDetailsClass);var r=a._searchUpByTagClass(h,
"DIV","propGroup"),r=dojo.attr(r,"propGroup");dojo.attr(h,"propName");require("davinci/ve/views/SwitchingStyleView").prototype.sectionTitleFromKey(r);if(n.supportsCSS3Transitions){var g=dojo.marginBox(g),g=dojo.marginBox(h).t-g.t,w=a._findRule(a.animShowDetailsClassSelector);if(w){var r=w.ss,w=w.ruleIndex,A=dojo.connect(e,"webkitTransitionEnd",c),x=dojo.connect(e,"transitionend",c);r.deleteRule(w);r.insertRule(a.animShowDetailsClassSelector+" { margin-top:-"+g+"px; opacity:.99; -webkit-transition: all .6s ease; -moz-transition: all .6s ease; }",
w);e=!1;for(g=0;g<b.children.length;g++)r=b.children[g],1==r.nodeType&&dojo.hasClass(r,"cssPropertySection")&&(r==h?(a._addRemoveClasses(r,d,["propRowFadeIn"]),e=!0):e?a._addRemoveClasses(r,d,["propRowHidden"]):a._addRemoveClasses(r,d,["propRowTransparent"]))}else console.error("HTMLStringUtil showProperty: transEnd: rule not found")}else f(),k()},_initSection:function(e){for(var c=this.showPropAnimClasses,f=this._getRootTD(),k=dojo.query(".propGroup",f),a,f=0;f<k.length;f++){var d=k[f];dojo.attr(d,
"propGroup")==e?(dojo.removeClass(d,"dijitHidden"),a=d):dojo.addClass(d,"dijitHidden")}k=dojo.query(".cssPropertySection",a);for(f=0;f<k.length;f++)this._addRemoveClasses(k[f],c,[]);c=dojo.query(".cssCascadeSection",a);for(f=0;f<c.length;f++)dojo.addClass(c[f],"cascadeRowHidden");this._currentPropSection=e;dojo.removeClass(dojo.byId("root"),"showingCascade")},_hideSectionShowRoot:function(){var e=this._getRootTD();dojo.removeClass(e,"dijitHidden")},_findRule:function(e){function c(a,d){for(var f=
0;f<a.cssRules.length;f++){var b=a.cssRules[f];if(3===b.type){if(b=c(b.styleSheet,d))return b}else if(b.selectorText==d)return{ss:a,ruleIndex:f}}}if(this.animSS&&"number"==typeof this.animRuleIndex[e]){var f=this.animRuleIndex[e];if(this.animSS.cssRules[f].selectorText==e)return{ss:this.animSS,ruleIndex:f}}for(f=0;f<document.styleSheets.length;f++){var k=c(document.styleSheets[f],e);if(k)return this.animSS=k.ss,this.animRuleIndex[e]=k.ruleIndex,k}return null},_addRemoveClasses:function(e,c,f){for(var k=
[],a=0;a<c.length;a++){for(var d=!1,h=0;h<f.length;h++)if(c[a]==f[h]){d=!0;break}d||k.push(c[a])}for(a=0;a<k.length;a++)dojo.removeClass(e,k[a]);for(a=0;a<f.length;a++)dojo.addClass(e,f[a])},_searchUpByTagClass:function(e,c,f){for(;null!=e&&"BODY"!=e.nodeName;){if(e.nodeName==c&&(!f||dojo.hasClass(e,f)))return e;e=e.parentNode}return null},_searchSiblingsByTagClass:function(e,c,f){for(;null!=e;){if(e.nodeName==c&&(!f||dojo.hasClass(e,f)))return e;e=e.nextSibling}return null},_getRootDetailsContainer:function(){this._rootDetailsContainer||
(this._rootDetailsContainer=dojo.query(this.animShowSectionClassSelector)[0]);return this._rootDetailsContainer},_getRootTD:function(){var e=this._getRootDetailsContainer();this._rootTD||(this._rootTD=dojo.query(".propPaletteRoot",e)[0]);return this._rootTD}});return g})},"davinci/ve/widgets/FontDataStore":function(){define(["dojo/_base/declare","dojo/data/ItemFileReadStore","davinci/lang/ve","dijit/lang/_common"],function(n,m){n=n("davinci.ve.widgets.FontDataStore",m,{_allValues:[],constructor:function(g){this.setValues(g.values||
davinci.ve.widgets.FontDataStore.fonts)},setValues:function(g){this._allValues=this._allValues.concat(g);this._jsonData={label:"name",identifier:"value",items:this._allValues};this._loadFinished=!1},contains:function(g){for(var e=0;e<this._allValues.length;e++)if(this._allValues[e].value==g||this._allValues[e].name==g)return e;return!1},clearValues:function(){this._allValues=[];this._loadFinished=!1},lookupValue:function(g){g=this.contains(g);return this._allValues[g].value[0]}});return dojo.mixin(n,
{fonts:[{name:"",value:""},{name:"Arial,Helvetica,sans-serif",value:"Arial,Helvetica,sans-serif"},{name:"'Arial Black,Gadget',sans-serif",value:"'Arial Black,Gadget',sans-serif"},{name:"'Comic Sans MS',cursive",value:"'Comic Sans MS',cursive"},{name:"'Courier New',Courier,monospace",value:"'Courier New',Courier,monospace"},{name:"Geneva,Tahoma,sans-serif",value:"Geneva,Tahoma,sans-serif"},{name:"Georgia,serif",value:"Georgia,serif"},{name:"'Helvetica,Trebuchet MS',sans-serif",value:"'Helvetica,Trebuchet MS',sans-serif"},
{name:"Impact,Charcoal,sans-serif",value:"Impact,Charcoal,sans-serif"},{name:"'Lucida Console',Monaco,monospace",value:"'Lucida Console',Monaco,monospace"},{name:"'Lucida Sans Unicode','Lucida Grande',sans-serif",value:"'Lucida Sans Unicode','Lucida Grande',sans-serif"},{name:"'Lucida Console', Monaco, monospace",value:"'Lucida Console', Monaco, monospace"},{name:"'Palatino Linotype','Book Antiqua',Palatino,serif",value:"'Palatino Linotype','Book Antiqua',Palatino,serif"},{name:"Symbol",value:"Symbol"},
{name:"Tahoma,Geneva,sans-serif",value:"Tahoma,Geneva,sans-serif"},{name:"'Times New Roman',Times,serif",value:"'Times New Roman',Times,serif"},{name:"'Trebuchet MS',Helvetica,sans-serif",value:"'Trebuchet MS',Helvetica,sans-serif"},{name:"Verdana,Geneva,sans-serif",value:"Verdana,Geneva,sans-serif"},{name:"Webdings",value:"Webdings"},{name:"Wingdings, 'Zapf Dingbats'",value:"Wingdings, 'Zapf Dingbats'"},{name:"'Zapf Dingbats', Wingdings",value:"'Zapf Dingbats', Wingdings"},{name:"sans-serif",value:"sans-serif"},
{name:"serif",value:"serif"},{name:"monospace",value:"monospace"},{name:"cursive",value:"cursive"},{name:"LCD",value:"LCD"}]})})},"davinci/ve/widgets/FontComboBox":function(){define(["dojo/_base/declare","dijit/form/ComboBox","davinci/lang/ve","dijit/lang/_common"],function(n,m){return n("davinci.ve.widgets.FontComboBox",m,{_getValueAttr:function(){if(this.store)for(var g=0;g<this.store._allValues.length;g++){var e=this.store._allValues[g];if(e.name[0]==this.value)return e.value[0]}return this.value},
_setValueAttr:function(g){this.store&&g?this.store.fetch({query:{value:g},onComplete:function(e,c){1>e.length?this.inherited("_setValueAttr",[g]):(this.inherited("_setValueAttr",[e[0].name[0]]),this.item=e[0])}.bind(this),onError:function(){this.inherited("_setValueAttr",[g])}.bind(this)}):this.inherited("_setValueAttr",[g])}})})},"davinci/ve/widgets/DropDown":function(){define("dcl/dcl xdojo/declare xide/factory dojo/_base/lang dojo/_base/kernel xide/widgets/TemplatedWidgetBase xide/form/Select xide/data/TreeMemory xide/data/ObservableStore dstore/Trackable".split(" "),
function(n,m,g,e,c,f,k,a,d,h){var b=n(f,{numberDelta:1,templateString:"\x3cdiv \x3e\x3c/div\x3e",insertPosition:1,declaredClass:"davinci.ve.widgets.MultiInputDropDown",data:null,divider:"---",postCreate:function(){},get:function(a){return"value"===a&&this._dropDown?this._getValueAttr():""},startup:function(){var f=c.doc.createElement("div");this._run={};var e=this;this.data?(this.data.push({value:b.divider}),this.data.push({label:"Remove Value",value:"Remove Value",run:function(){this.set("value",
"",!1);e._dropDown.set("value","",!0)}})):this.data=[{value:"auto"},{value:"0px"},{value:b.divider},{value:"Remove Value",run:function(){this.set("value","",!1);e._dropDown.set("value","")}},{value:b.divider},{value:"Help",run:function(){alert("help!")}}];for(var n=[],w=0;w<this.data.length;w++)n.push(this.data[w].value),this.data[w].run&&(this._run[this.data[w].value]=this.data[w].run);var A=[];_.each(this.data,function(a){(a.value||"Remove Value"===a.label)&&A.push({label:a.label||a.value,value:a.value,
run:a.run})});this._dropDown=new k({EDITABLE_CLASS:k.TYPEAHEAD,storeClass:m("driverStore",[a,h,d],{setValues:function(a){var b=[],d=0;a&&(this._values=a);c.forEach(this.data,c.hitch(this,function(a){b.push({label:a.label,value:a.value,id:d++})}));this._jsonData={identifier:"id",items:b};this.setData(b);this.root._emit("update",{target:null})},modifyItem:function(a,b){for(var d=0;d<this.data.length;d++)this.data[d].value===a&&(this.data[d].value=b);e._dropDown.set("value",b);this.setValues()},insert:function(a,
b){this.data.splice(a,0,{value:b,label:b});this.setValues()},contains:function(a){for(var b=0;b<this.data.length;b++)if(this.data[b].value==a)return!0;return!1},findSimilar:function(a){if(a=(new RegExp(/(\D*)(-?)(\d+)(\D*)/)).exec(a)){a=new RegExp((0<a.length?a[1]:"")+"(-?)(\\d+)"+(3<a.length?a[4]:""));for(var b=0;b<this.data.length;b++)if(a.test(this.data[b].value))return this.data[b].value}},getItemNumber:function(a){return this.data[a]},clearValues:function(){this._loadFinished=!1}}),required:!1,
title:"",editable:!0,options:A,userData:{}});this._dropDown.startup();this._store=this._dropDown.store;this._plus=n=g.createButton(this._dropDown.previewNode,"fa-plus","btn-default btn-xs2",null,"");c.style(n,"float","right");this._minus=g.createButton(this._dropDown.button0,"fa-minus","btn-default btn-xs2",null,"");n=c.create("div",{"class":"propInputWithIncrDecrButtons"});n.appendChild(this._dropDown.domNode);f.appendChild(n);n=c.doc.createElement("div");c.style(n,"clear","both");f.appendChild(n);
this._currentValue=this._store.data[0];c.connect(this._dropDown,"onKeyUp",this,"_updateSpinner");var x=this;this._dropDown._on?this._dropDown._on("change",function(a){x._onChange(a)}):c.connect(this._dropDown,"onChange",this,"_onChange");c.connect(this._plus,"onclick",this,"_plusButton",!1);c.connect(this._minus,"onclick",this,"_minusButton",!1);this._updateSpinner();this.domNode.appendChild(f);this.add(this._dropDown);this.add(this._store)},_setReadOnlyAttr:function(a){this._isReadOnly=a;this._dropDown&&
(this._dropDown.set("disabled",a),c.attr(this._plus,"disabled",a),c.attr(this._minus,"disabled",a))},onChange:function(a){},_getValueAttr:function(){return this._dropDown.get("value")},_setValueAttr:function(a,b){this._dropDown.set("value",a,!0);this._currentValue=this._dropDown.get("value");!1!==b&&this._onChange(this._currentValue);if(!b)this.onChange()},_changeValue:function(a,b){a=a.split(" ");for(var d="",c=0;c<a.length;c++){0<c&&(d+=" ");var f=a[c].match(/([-\d\.]+)([a-zA-Z%]*)/);if(f)if(1==
f.length)d+=f[0];else for(var e=1;e<f.length;e++)d=isNaN(f[e])||""==f[e]?d+f[e]:d+(parseFloat(f[e])+b);else d+=a[c]}return d},_plusButton:function(){var a=this._dropDown.get("value"),b=this._changeValue(a,this.numberDelta);this._store.modifyItem(a,b);this._dropDown.set("value",b);this._onChange(b)},_minusButton:function(){var a=this._dropDown.get("value"),b=this._changeValue(a,-1*this.numberDelta);this._store.modifyItem(a,b);this._dropDown.set("value",b);this._onChange(b)},_updateSpinner:function(){var a=
this._dropDown.get("value"),a=/(-?)(\d+){1}/.exec(a);this._minus.disabled=a&&a.length?this._plus.disabled=!1:this._plus.disabled=!0;return!0},_onChange:function(a){var d;a in this._run?(this._dropDown.get("value",this._store.getItemNumber(0)),c.hitch(this,this._run[a])()):a==b.divider?this._dropDown.get("value",this._store.getItemNumber(0)):(d=this._store.findSimilar(a))?this._store.modifyItem(d,a):this._store.contains(a)||this._store.insert(this.insertPosition,a);this._currentValue!=this._dropDown.get("value")&&
(this._currentValue=this._dropDown.get("value"),this.onChange(a));this._updateSpinner()}});e.setObject("davinci.ve.widgets.MultiInputDropDown",b);return b})},"davinci/ve/widgets/MetaDataStore":function(){define(["dojo/_base/declare","dojo/data/ItemFileReadStore","davinci/lang/ve","dijit/lang/_common"],function(n,m){return n("davinci.ve.widgets.MetaDataStore",m,{_allValues:[],constructor:function(g){this.setValues(g&&g.values||[])},setValues:function(g){dojo.mixin(this._allValues,g);var e=[];dojo.forEach(this._allValues,
function(c){e.push({name:c,value:c})});this._jsonData={identifier:"name",items:e};this._loadFinished=!1},contains:function(g){return-1!=dojo.indexOf(this._allValues,g)},clearValues:function(){this._allValues=[];this._loadFinished=!1}})})},"davinci/ve/widgets/ColorPicker":function(){define(["davinci/ve/widgets/ColorPicker2"],function(n){return n})},"davinci/ve/widgets/ColorPicker2":function(){define(["xide/widgets/ColorPickerWidget","xide/utils","dcl/dcl","xide/widgets/TemplatedWidgetBase","dojo/_base/lang"],
function(n,m,g,e,c){g=g(e,{templateString:"\x3cdiv \x3e\x3c/div\x3e",numberDelta:1,insertPosition:9,data:null,_onChange:function(c){},_setValueAttr:function(c,e){if(this._dropDown&&(this._dropDown.set("value",c.replace("#",""),!0),this._currentValue=this._dropDown.get("value"),!1!==e&&this._onChange(this._currentValue),!e&&c!==this._currentValue))this.onChange()},set:function(c,e){if("value"===c&&this._dropDown)return this._setValueAttr(e)},get:function(c){return"value"===c&&this._dropDown?this._getValueAttr():
""},postCreate:function(){},startup:function(){var c=m.addWidget(n,{title:""},null,this.domNode,!0);this._dropDown=c;this._value=this._value||"";this._dropDown.set("value",this._value.replace("#",""),!0);var e=this;this._dropDown._on("change",function(a){e._value=e._getValueAttr();e.onChange(e._value)});this.add(c)},_setReadOnlyAttr:function(c){this._isReadOnly=c;this._dropDown.set("disabled",c)},onChange:function(){this._value=this._dropDown.get("value")},_getValueAttr:function(){return this._dropDown.get("value")}});
dojo.mixin(g,{divider:"---"});c.setObject("davinci.ve.widgets.ColorPicker",g);return g})},"davinci/ve/widgets/Background2":function(){define("dcl/dcl xdojo/declare xide/utils xide/widgets/TemplatedWidgetBase xide/data/TreeMemory xide/data/ObservableStore dstore/Trackable dojo/_base/lang davinci/ve/widgets/ColorPickerFlat davinci/lang/ve davinci/ve/widgets/ColorStore xide/form/Select davinci/ve/widgets/MutableStore davinci/ve/widgets/BackgroundDialog xide/views/_PanelDialog davinci/ve/utils/CssUtils dojo/Deferred davinci/ve/utils/URLRewrite davinci/model/Path".split(" "),
function(n,m,g,e,c,f,k,a,d,h,b,p,z,r,w,A,x,y,u){var q=0;n=n(e,{declaredClass:"davinci.ve.widgets.Background",templateString:"\x3cdiv \x3e\x3c/div\x3e",__id:0,data:null,get:function(a){if(this._comboBox)return this._comboBox.get("value")},startup:function(){this._textFieldId="davinci_ve_widgets_properties_border_generated"+q++;this._buttonId="davinci_ve_widgets_properties_border_generated"+q++;var a=dojo.create("div",{className:"bgPropButtonDiv",style:"float:right; width:28px;"});dojo.create("button",
{innerHTML:"...",id:this._buttonId,className:"bgPropButton btn-info",style:"font-size:1em;"},a);var e=38,n=this._colorswatch="true"==this.colorswatch;if(n){var e=56,D=dojo.doc.createElement("div");dojo.addClass(D,"colorPicker");this._selectedColor=dojo.doc.createElement("div");this._selectedColor.innerHTML="\x26nbsp;";dojo.addClass(this._selectedColor,"colorPickerSelected");dojo.addClass(this._selectedColor,"colorPickerSelectedSkinny");this._colorPickerFlat=new d({})}var e=dojo.create("div",{className:"bgPropComboDiv",
style:"margin-right:"+e+"px;padding:1px 0;"}),F=dojo.isArray(this.data)?this.data:[""],C=this.langObjVE=h;if(n){this._statics=["",davinci.ve.widgets.ColorPicker.divider,C.colorPicker,C.removeValue];this._run={};this.data?(this.data.push({value:davinci.ve.widgets.ColorPicker.divider}),this.data.push({value:langObj.removeValue,run:function(){this.set("value","")}})):(this.data=[{value:this._statics[0]}],this.data.push({value:this._statics[2],run:this._chooseColorValue}),this.data.push({value:this._statics[3],
run:function(){this.set("value","")}}),this.data.push({value:this._statics[1]}),this.data.push({value:"transparent"}),this.data.push({value:"black"}),this.data.push({value:"white"}),this.data.push({value:"red"}),this.data.push({value:"green"}),this.data.push({value:"blue"}));F=[];for(C=0;C<this.data.length;C++)F.push(this.data[C].value),this.data[C].run&&(this._run[this.data[C].value]=this.data[C].run);this._store=new b({values:F,noncolors:this._statics})}else this._store=new z({values:F});var E=
[];_.each(this.data,function(a){a&&(_.isString(a)&&a.length?E.push({label:a,value:a,run:a.run}):!_.isObject(a)||_.isString(a.value)&&!a.value.length||E.push({label:a.label||a.value,value:a.value,run:a.run}))});this._comboBox=new p({EDITABLE_CLASS:p.TYPEAHEAD,storeClass:m("driverStore",[c,k,f],{setValues:function(a){var b=[],d=0;a&&(this._values=a);dojo.forEach(this.data,dojo.hitch(this,function(a){b.push({label:a.label,value:a.value,id:d++})}));this._jsonData={identifier:"id",items:b};this.setData(b);
this.root._emit("update",{target:null})},modifyItem:function(a,b){for(var d=0;d<this.data.length;d++)this.data[d].value===a&&(this.data[d].value=b);M._dropDown.set("value",b);this.setValues()},insert:function(a,b){this.data.splice(a,0,{value:b,label:b});this.setValues()},contains:function(a){for(var b=0;b<this.data.length;b++)if(this.data[b].value==a)return!0;return!1},findSimilar:function(a){if(a=(new RegExp(/(\D*)(-?)(\d+)(\D*)/)).exec(a)){a=new RegExp((0<a.length?a[1]:"")+"(-?)(\\d+)"+(3<a.length?
a[4]:""));for(var b=0;b<this.data.length;b++)if(a.test(this.data[b].value))return this.data[b].value}},getItemNumber:function(a){return this.data[a]},clearValues:function(){this._loadFinished=!1}}),required:!1,title:"",editable:!0,options:E,userData:{},id:this._textFieldId});this._comboBox.startup();e.appendChild(this._comboBox.domNode);this.domNode.appendChild(a);n&&(this.domNode.appendChild(D),dojo.connect(D,"onclick",dojo.hitch(this,function(a){dojo.stopEvent(a);this._chooseColorValue()})),D.appendChild(this._selectedColor),
this._colorPickerFlat_comboBoxUpdateDueTo="colorSwatch");this.domNode.appendChild(e);"string"==typeof this.propname&&this._comboBox&&(davinci.ve._BackgroundWidgets||(davinci.ve._BackgroundWidgets={}),davinci.ve._BackgroundWidgets[this.propname]={propPaletteWidget:this,comboBox:this._comboBox});this._button=dojo.byId(this._buttonId);dojo.connect(this._button,"onclick",this,function(){var a=this._cascade&&this._cascade._widget&&this._cascade._widget.getContext?this._cascade._widget.getContext():null,
b=new r({context:a}),d=dojo.hitch(this,function(b){a||(console.error("Background.js. no context"),a={});var d=a.cascadeBatch={},c=d.propList=[],f=d.actions={},e=d.deferreds={};d.askUserResponse=void 0;if(!b.cancel){var h=davinci.ve._BackgroundWidgets,k;for(k in h){var g=h[k];if(g.bgdWidget){var d=g.bgdWidget.get("value"),m=g.propPaletteWidget.get("value");d!==m&&(c.push(k),f[k]=dojo.hitch(this,function(a,b){a.propPaletteWidget._comboBoxUpdateDueTo="backgroundDialog";a.propPaletteWidget.set("value",
b)},g,d),e[k]=new x)}}k="background-image";g=h[k];b=A.buildBackgroundImage(b.bgddata);for(d=0;d<b.length;d++)m=b[d],y.containsUrl(m)&&!y.isAbsolute(m)&&((h=y.getUrl(m))&&(m="url('"+(new u(h)).toString()+"')"),b[d]=m);d=0==b.length?"":b[b.length-1];m=g.propPaletteWidget.get("value");d!==m&&(g.propPaletteWidget._cascade&&(g.propPaletteWidget._cascade._valueArrayNew=b),c.push(k),f[k]=dojo.hitch(this,function(a,b){g.propPaletteWidget._comboBoxUpdateDueTo="backgroundDialog";g.propPaletteWidget.set("value",
b)},g,d),e[k]=new x);for(d=0;d<c.length;d++)k=c[d],e[k].then(dojo.hitch(this,function(b){(b=c[b+1])?f[b].apply():delete a.cascadeBatch},d));0<c.length&&(k=c[0],f[k].apply())}return!0},b),c=davinci.ve._BackgroundWidgets,f;for(f in c){var e=c[f].propPaletteWidget._cascade;e&&(e._valueArrayNew=e._valueArray)}b.set("baseLocation",this._baseLocation);(new w({onOk:function(){d()},onShow:function(a,d,c){g.addChild(d,b,!0);this.add(b,null,!1);this.startDfd.resolve();return[b]}})).show()});var M=this;this._comboBox._on("change",
function(a){M._onChange(a)});this.add(this._comboBox);this._maqStartupComplete=!0},_setBaseLocationAttr:function(a){this._baseLocation=a},_setValueAttr:function(a){var b=this._comboBox.get("value");this._colorswatch&&dojo.style(this._selectedColor,"backgroundColor",a);a=dojo.isArray(a)?0<a.length?a[a.length-1]:"":a;b!==a&&("backgroundDialog"!==this._comboBoxUpdateDueTo&&"colorSwatch"!==this._comboBoxUpdateDueTo&&(this._comboBoxUpdateDueTo="setAttr"),this._comboBox.set("value",a))},_onChange:function(a){this._colorswatch&&
"string"==typeof a&&(a in this._run?dojo.hitch(this,this._run[a])():a==davinci.ve.widgets.ColorPicker.divider?this._comboBox.set("value",this._store.getItemNumber(0)):dojo.style(this._selectedColor,"backgroundColor",a));this.value=this._comboBox.get("value");this.onChange(a)},onChange:function(a){},_getValueAttr:function(){return this._comboBox.get("value")},_setReadOnlyAttr:function(a){this._maqStartupComplete&&(this._isReadOnly=a,this._comboBox.set("disabled",a),this._button.disabled=a)},isLeftToRight:function(){return!0},
_chooseColorValue:function(){if(!this._isReadOnly){var a=this._comboBox.get("value");davinci.ve.widgets.ColorPickerFlat.show(this._colorPickerFlat,a,this,!0)}}});a.setObject("davinci.ve.widgets.Background",n);return n})},"davinci/ve/widgets/ColorPickerFlat":function(){define("dojo/_base/declare dijit/_Widget dijit/TooltipDialog dijit/form/Button dojox/widget/ColorPicker davinci/lang/ve dijit/lang/_common".split(" "),function(n,m,g,e,c,f,k){n=n("davinci.ve.widgets.ColorPickerFlat",[m],{numberDelta:1,
insertPosition:1,data:null,postCreate:function(){this.inherited(arguments);var a=dojo.doc.createElement("div");this._colorPicker=new c({});a.appendChild(this._colorPicker.domNode);var d=dojo.doc.createElement("div"),f=e({label:k.buttonOk});f.innerHtml="OK";d.appendChild(f.domNode);var b=e({label:k.buttonCancel});d.appendChild(b.domNode);a.appendChild(d);this.domNode.appendChild(a);dojo.connect(f,"onClick",this,"_onOk");dojo.connect(b,"onClick",this,"onCancel");delete this.canceled},onClose:function(){},
onCancel:function(){this._value=null;this.canceled=!0},_onOk:function(){delete this.canceled;this._value=this._colorPicker.get("value");this.onClose()},_getValueAttr:function(){return this._value},_setValueAttr:function(a){a=new dojo.Color(a);this._colorPicker.setColor(a.toHex())}});return dojo.mixin(n,{show:function(a,d,c,b){var e=new g({id:"maqetta_prop_tooltip_color_picker",title:f.selectColor,content:a});dijit.popup.moveOffScreen(e.domNode);var h=!1,k=function(a){return function(){h&&(h=!1,dijit.popup.close(e))}}();
e.connect(a,"onCancel",k);e.connect(a,"onClose",k);var m=dijit.byNode(dojo.query("[widgetId]",e.domNode)[0]);d in dojo.Color.named?(d=dojo.colorFromString(d),a.set("value",d.toHex())):a.set("value",d||"",!0);(function(a){return function(){dijit.popup.open({parent:c,popup:e,around:c.domNode,orient:b?{BL:"TL",BR:"TR",TL:"BL",TR:"BR"}:{BR:"TR",BL:"TL",TR:"BR",TL:"BL"},onClose:function(){m.canceled||(c._colorPickerFlat_comboBoxUpdateDueTo&&(c._comboBoxUpdateDueTo=c._colorPickerFlat_comboBoxUpdateDueTo),
c.get("value"),c.set("value",m.get("value")));k();e.destroy()}});h=!0;dijit.focus(e.containerNode)}})()()}})})},"davinci/ve/widgets/ColorStore":function(){define(["dojo/_base/declare","dojo/data/ItemFileReadStore","davinci/lang/ve","dijit/lang/_common"],function(n,m){return n("davinci.ve.widgets.ColorStore",m,{constructor:function(g){this.clearValues();g.noncolors&&(this.noncolors=g.noncolors);g.values&&this.setValues(g.values)},setValues:function(g){var e=[];g&&(this._values=g);dojo.forEach(this._values,
dojo.hitch(this,function(c){for(var f=!1,k=0;!f&&k<this.noncolors.length;k++)this.noncolors[k]==c&&(f=!0);f?e.push({name:c,value:c,label:c}):e.push({value:c,name:c,label:"\x3ctable\x3e\x3ctr\x3e\x3ctd style\x3d'width:10em'\x3e"+c+"\x3c/td\x3e\x3ctd style\x3d'width:10px;height:10px;background-color:"+c+"'\x3e\x3c/td\x3e\x3c/tr\x3e\x3c/table\x3e"})}));this._jsonData={identifier:"value",items:e};this._loadFinished=!1},insert:function(g,e){this._values.splice(g,0,e);this.setValues()},contains:function(g){for(var e=
0;e<this._values.length;e++)if(this._values[e]==g)return!0;return!1},getItemNumber:function(g){return this._values[g]},clearValues:function(){this._loadFinished=!1}})})},"davinci/ve/widgets/MutableStore":function(){define(["dojo/_base/declare","dojo/data/ItemFileReadStore","davinci/lang/ve","dijit/lang/_common"],function(n,m,g,e){return n("davinci.ve.widgets.MutableStore",m,{constructor:function(c){this.clearValues();c.divider&&(this.divider=c.divider);c.values&&this.setValues(c.values)},setValues:function(c){var f=
[],e=0;c&&(this._values=c);dojo.forEach(this._values,dojo.hitch(this,function(a){f.push({name:a,value:a,id:e++})}));this._jsonData={identifier:"id",items:f};this._loadFinished=!1},modifyItem:function(c,f){for(var e=0;e<this._values.length;e++)this._values[e]==c&&(this._values[e]=f);this.setValues()},insert:function(c,f){this._values.splice(c,0,f);this.setValues()},contains:function(c){for(var f=0;f<this._values.length;f++)if(this._values[f]==c)return!0;return!1},findSimilar:function(c){if(c=(new RegExp(/(\D*)(-?)(\d+)(\D*)/)).exec(c)){c=
new RegExp((0<c.length?c[1]:"")+"(-?)(\\d+)"+(3<c.length?c[4]:""));for(var f=0;f<this._values.length;f++)if(c.test(this._values[f]))return this._values[f]}},getItemNumber:function(c){return this._values[c]},clearValues:function(){this._loadFinished=!1}})})},"davinci/ve/widgets/BackgroundDialog":function(){define("dojo/_base/declare dijit/_WidgetBase dijit/_TemplatedMixin dijit/_WidgetsInTemplateMixin davinci/ve/widgets/MutableStore davinci/ve/widgets/ColorStore xide/utils dojo/text!./templates/BackgroundDialog.html davinci/ve/utils/CssUtils davinci/lang/ve dijit/lang/_common davinci/ve/utils/URLRewrite dojo/parser dojo/_base/lang davinci/model/Path dijit/form/Button davinci/ve/widgets/ColorPicker davinci/ve/widgets/ColorPickerFlat dijit/form/Textarea davinci/ui/widgets/FileFieldDialog".split(" "),
function(n,m,g,e,c,f,k,a,d,h,b,p,z,r){z._clearCache();var w=function(a,b){return"url('"+b+"')"};n=n("davinci.ve.widgets.BackgroundDialog",[m,g,e],{templateString:a,widgetsInTemplate:!0,_filePicker:null,context:null,veNLS:h,stopRowTemplate:"\x3ctr class\x3d'bgdGradOptRow bgdStopRow' style\x3d'display:none;'\x3e\x3ctd class\x3d'bgdCol1'\x3e\x3c/td\x3e\x3ctd class\x3d'bgdOptsLabel bdgStopLabel'\x3e"+h.bgdTemplate+"\x3c/td\x3e\x3ctd class\x3d'bgdStopColorTD'\x3e\x3cselect class\x3d'bgdColor' dojoType\x3d'dijit.form.ComboBox'\x3e\x3c/select\x3e\x3c/td\x3e\x3ctd\x3e\x3cselect class\x3d'bgdPosition' dojoType\x3d'dijit.form.ComboBox'\x3e\x3c/select\x3e\x3c/td\x3e\x3ctd class\x3d'bgdPlusMinusButtons'\x3e\x3cspan class\x3d'bgdPlusButton' dojoType\x3d'dijit.form.Button'\x3e+\x3c/span\x3e\x3cspan class\x3d'bgdMinusButton' dojoType\x3d'dijit.form.Button'\x3e-\x3c/span\x3e\x3c/td\x3e\x3c/tr\x3e",
postMixInProperties:function(){this.inherited(arguments);dojo.mixin(this,b)},postCreate:function(){this.inherited(arguments);var a=this.langObj=h;this.stoppos_store=new c({values:"0% 100% 10% 20% 30% 40% 50% 60% 70% 80% 90%".split(" ")});var b=davinci.ve._BackgroundWidgets;this._statics=["",davinci.ve.widgets.ColorPicker.divider,a.colorPicker,a.removeValue];var e=[{value:this._statics[0]}];e.push({value:this._statics[2],action:"_colorpicker"});e.push({value:this._statics[3],action:"_removevalue"});
e.push({value:this._statics[1],action:"_donothing"});e.push({value:"transparent"});e.push({value:"black"});e.push({value:"white"});e.push({value:"red"});e.push({value:"green"});e.push({value:"blue"});var k=[];this._bgcolor_action={};var g=[];this._stops_action={};for(var m=0;m<e.length;m++)k.push(e[m].value),e[m].action&&(this._bgcolor_action[e[m].value]=e[m].action),""!=e[m].value&&"_removevalue"!=e[m].action&&(g.push(e[m].value),e[m].action&&(this._stops_action[e[m].value]=e[m].action));this._bgcolor_store=
new f({values:k,noncolors:this._statics});this._stops_store=new f({values:g,noncolors:this._statics});var e=b["background-image"].comboBox.get("value"),p,n;"string"==typeof e&&0<e.length?(p=d.parseBackgroundImage(e),n=p.type):p={};this.bgddata=p;this.bgdOtherTA.set("value",e);var r=[];"emptystring url linear radial none other".split(" ").forEach(function(b){r.push({value:b,label:a["bgdType_"+b]})});this.bgdTypeSelect.addOption(r);this._updateBackgroundImageType(n);this.connect(this.bgdTypeSelect,
"onChange",dojo.hitch(this,function(){var a=this.bgdTypeSelect.get("value");this._updateBackgroundImageType(a);this._onFieldChanged()}));e=b["background-color"].comboBox.get("value");n=this.bgdColorCB;n.set("store",this._bgcolor_store);n.set("value",e);p.backgroundColor=e;this.connect(this.bgdColorCB,"onChange",dojo.hitch(this,function(a){this._onChangeColor(a,this.bgdColorCB,this._bgcolor_action)}));b["background-color"].bgdWidget=this.bgdColorCB;n=b["background-repeat"].comboBox;e=n.get("value");
k=this.bgdRepeatCB;k.set("store",n.store);k.set("regExp","repeat|repeat-x|repeat-y|no-repeat");k.set("value",e);p.backgroundRepeat=e;this.connect(this.bgdRepeatCB,"onChange",dojo.hitch(this,function(){p.backgroundRepeat=this.bgdRepeatCB.get("value");this._onFieldChanged()}));b["background-repeat"].bgdWidget=this.bgdRepeatCB;n=b["background-position"].comboBox;e=n.get("value");k=this.bgdPositionCB;k.set("store",n.store);k.set("regExp","auto|contain|cover|"+d.regstr_posn);k.set("value",e);p.backgroundPosition=
e;this.connect(this.bgdPositionCB,"onChange",dojo.hitch(this,function(){p.backgroundPosition=this.bgdPositionCB.get("value");this._onFieldChanged()}));b["background-position"].bgdWidget=this.bgdPositionCB;n=b["background-size"].comboBox;e=n.get("value");k=this.bgdSizeCB;k.set("store",n.store);k.set("regExp","auto|contain|cover|"+d.regstr_len_or_pct);k.set("value",e);p.backgroundSize=e;this.connect(this.bgdSizeCB,"onChange",dojo.hitch(this,function(){p.backgroundSize=this.bgdSizeCB.get("value");this._onFieldChanged()}));
b["background-size"].bgdWidget=this.bgdSizeCB;n=b["background-origin"].comboBox;e=n.get("value");k=this.bgdOriginCB;k.set("store",n.store);k.set("regExp","border-box|padding-box|content-box");k.set("value",e);p.backgroundOrigin=e;this.connect(this.bgdOriginCB,"onChange",dojo.hitch(this,function(){p.backgroundOrigin=this.bgdOriginCB.get("value");this._onFieldChanged()}));b["background-origin"].bgdWidget=this.bgdOriginCB;n=b["background-clip"].comboBox;e=n.get("value");k=this.bgdClipCB;k.set("store",
n.store);k.set("regExp","border-box|padding-box|content-box");k.set("value",e);p.backgroundClip=e;this.connect(this.bgdClipCB,"onChange",dojo.hitch(this,function(){p.backgroundClip=this.bgdClipCB.get("value");this._onFieldChanged()}));b["background-clip"].bgdWidget=this.bgdClipCB;b=new c({values:"to bottom;to top;to right;to left;45deg;-45deg".split(";")});this.bgdLinearAngleCB.set("store",b);this.bgdLinearAngleCB.set("regExp",d.regstr_angle);this.bgdLinearAngleCB.set("value",p&&p.angle?p.angle:"to bottom");
this.connect(this.bgdLinearAngleCB,"onChange",dojo.hitch(this,function(){p.angle=this.bgdLinearAngleCB.get("value");this._onFieldChanged()}));b=new c({values:"center;left top;center center;right bottom;0% 0%;0px 0px".split(";")});this.bgdRadialPosCB.set("store",b);this.bgdRadialPosCB.set("regExp",d.regstr_posn);this.bgdRadialPosCB.set("value",p&&p.posn?p.posn:"center");this.connect(this.bgdRadialPosCB,"onChange",dojo.hitch(this,function(){p.posn=this.bgdRadialPosCB.get("value");this._onFieldChanged()}));
b=new c({values:["circle","ellipse"]});this.bgdRadialShapeCB.set("store",b);this.bgdRadialShapeCB.set("regExp",d.regstr_shape);this.bgdRadialShapeCB.set("value",p&&p.shape?p.shape:"circle");this.connect(this.bgdRadialShapeCB,"onChange",dojo.hitch(this,function(){p.shape=this.bgdRadialShapeCB.get("value");this._onFieldChanged()}));b=new c({values:["farthest-corner","farthest-side","closest-corner","closest-side"]});this.bgdRadialExtentCB.set("store",b);this.bgdRadialExtentCB.set("regExp",d.regstr_extent);
this.bgdRadialExtentCB.set("value",p&&p.extent?p.extent:"farthest-corner");this.connect(this.bgdRadialExtentCB,"onChange",dojo.hitch(this,function(){p.extent=this.bgdRadialExtentCB.get("value");this._onFieldChanged()}));this._initializeStops(p&&p.stops&&2<=p.stops.length?p.stops:[{color:"white",pos:"0%"},{color:"black",pos:"100%"}])},startup:function(){this.inherited(arguments);var a=this.bgddata&&this.bgddata.url?this.bgddata.url:"";this._filePicker.set("value",a);this._filePicker.owner=this;this.bgddata.url=
a;this.connect(this._filePicker,"onChange",dojo.hitch(this,function(){var a=this._filePicker.get("value");this.bgddata.url=a;this._onFieldChanged()}))},_updateBackgroundImageType:function(a){var b=this.domNode;if(!a||"none"!=a&&"url"!=a&&"linear"!=a&&"radial"!=a&&"other"!=a)a="emptystring";this.bgddata.type=a;this.bgdTypeSelect.set("value",a);var d=dojo.query(".bgdOptionsLabelRow",b),c=dojo.query(".bgdImageOptRow",b),f=dojo.query(".bgdGradOptRow",b),e=dojo.query(".bgdLinearOptRow",b),h=dojo.query(".bgdRadialOptRow",
b),b=dojo.query(".bgdOtherRow",b);"url"==a?(c.concat(d).forEach(function(a){dojo.removeClass(a,"dijitHidden")}),f.concat(b).forEach(function(a){dojo.addClass(a,"dijitHidden")})):"linear"==a?(f.concat(d).forEach(function(a){dojo.removeClass(a,"dijitHidden")}),c.concat(h).concat(b).forEach(function(a){dojo.addClass(a,"dijitHidden")})):"radial"==a?(f.concat(d).forEach(function(a){dojo.removeClass(a,"dijitHidden")}),c.concat(e).concat(b).forEach(function(a){dojo.addClass(a,"dijitHidden")})):"other"==
a?(b.forEach(function(a){dojo.removeClass(a,"dijitHidden")}),c.concat(f).concat(d).forEach(function(a){dojo.addClass(a,"dijitHidden")})):c.concat(f).concat(d).concat(b).forEach(function(a){dojo.addClass(a,"dijitHidden")})},_initializeStops:function(a){var b=this.langObj;a||(a=this.bgddata.stops);for(var c=this.bgdTypeSelect.get("value"),f=dojo.query(".bgdStopRow",this.domNode),e=f.length-1;0<e;e--){var h=f[e],k=dojo.query(".bgdColor",h),k=dijit.byNode(k[0]);k.destroyRecursive();k=dojo.query(".bgdPosition",
h);k=dijit.byNode(k[0]);k.destroyRecursive();dojo.destroy(h)}e=f[0];f=e.parentNode;h=e.nextSibling;for(e=0;e<a.length;e++){var g=a[e],m=dojo.create("tr",{className:"bgdGradOptRow bgdStopRow"});m.innerHTML=this.stopRowTemplate;"linear"!=c&&"radial"!=c&&dojo.addClass(m,"dijitHidden");f.insertBefore(m,h);dojo.parser.parse(m);dojo.query(".bdgStopLabel",m)[0].innerHTML=this.langObj.bgdStop+" #"+(e+1)+":";k=dojo.query(".bgdColor",m);k=dijit.byNode(k[0]);k.set("store",this._stops_store);k.set("regExp",d.regstr_stop_color);
k.set("value",g.color);this.connect(k,"onChange",dojo.hitch(this,function(a,b){this._onChangeColor(b,a,this._stops_action)},k));k=dojo.query(".bgdPosition",m);k=dijit.byNode(k[0]);k.set("store",this.stoppos_store);g="string"==typeof g.pos&&0<g.pos.length?g.pos:0==e?"0%":"100%";k.set("regExp",d.regstr_stop_pos);k.set("value",g);this.connect(k,"onChange",dojo.hitch(this,function(){this._updateDataStructureStops();this._onFieldChanged()}));k=dojo.query(".bgdPlusButton",m)[0];k=dijit.byNode(k);k.set("title",
b.bgdAddStop);this.connect(k,"onClick",dojo.hitch(this,function(a){var b=this.bgddata.stops[a];this.bgddata.stops.splice(a+1,0,{color:b.color,pos:b.pos});this._initializeStops()},e));g=dojo.query(".bgdMinusButton",m)[0];g=dijit.byNode(g);g.set("title",b.bgdRemoveStop);this.connect(g,"onClick",dojo.hitch(this,function(a){this.bgddata.stops.splice(a,1);this._initializeStops()},e));m=dojo.query(".bgdMinusButton",this.domNode);for(k=0;k<m.length;k++)g=m[k],g=dijit.byNode(g),2>=a.length?g.set("disabled",
!0):g.set("disabled",!1)}this._updateDataStructureStops()},_onFieldChanged:function(){this._updateDialogValidity();this._updateBackgroundPreview()},_setBaseLocationAttr:function(a){this._baseLocation=a;this._filePicker.set("baseLocation",a)},_updateDialogValidity:function(){var a=this.bgddata;if(a&&a.type){var b=this.domNode,a=a.type,d=[],c=!0;"url"==a?d=dojo.query(".bgdImageOptRow",b):"linear"==a?d=dojo.query(".bgdStopRow",b).concat(dojo.query(".bgdLinearOptRow",b)):"radial"==a&&(d=dojo.query(".bgdStopRow",
b).concat(dojo.query(".bgdRadialOptRow",b)));d.forEach(function(a){dojo.query("[widgetid]",a).forEach(function(a){"function"!=typeof a.isValid||a.isValid()||(c=!1)})});this.bdgValid=c}},_updateBackgroundPreview:function(){function a(a,b){b=f[b];"string"==typeof b&&0<b.length&&(c+=";"+a+":"+b)}var b=dojo.query(".bgdPreview",this.domNode)[0],c="",f=this.bgddata;a("background-color","backgroundColor");a("background-repeat","backgroundRepeat");a("background-position","backgroundPosition");a("background-size",
"backgroundSize");a("background-origin","backgroundOrigin");a("background-clip","backgroundClip");for(var e=d.buildBackgroundImage(this.bgddata),h=0;h<e.length;h++){var g=e[h];if(p.containsUrl(g)&&!p.isAbsolute(g)&&this.context){var m=p.getUrl(g),m=k.parse_url(m);(m=this.context.ctx.getFileManager().getImageUrl({path:m.host+(m.path||""),mount:m.scheme},!1))&&(g=w(this._baseLocation,m))}c+=";background-image:"+g}b.setAttribute("style",c);this.bgdOtherTA.set("value",e[e.length-1])},_updateDataStructureStops:function(){var a=
this.bgddata;a.stops=[];for(var b=dojo.query(".bgdStopRow",this.domNode),d=1;d<b.length;d++){var c=b[d],f=dojo.query(".bgdColor",c),f=dijit.byNode(f[0]),c=dojo.query(".bgdPosition",c),c=dijit.byNode(c[0]);a.stops.push({color:f.get("value"),pos:c.get("value")})}},_setValueAttr:function(a){a&&this._colorPickerTargetWidget.set("value",a)},_onChangeColor:function(a,b,d){if(a=d[a])if("_removevalue"==a?b.set("value",""):b.set("value",b._currentcolorvalue),"_colorpicker"==a){a=new davinci.ve.widgets.ColorPickerFlat({});
d=b.get("value");var c=this.isLeftToRight();this._colorPickerTargetWidget=b;davinci.ve.widgets.ColorPickerFlat.show(a,d,this,c)}b._currentcolorvalue=b.get("value");this.bgddata.backgroundColor=this.bgdColorCB.get("value");this._updateDataStructureStops();this._onFieldChanged()},okButton:function(){},cancelButton:function(){this.onClose()}});n.getCSSForWorkspaceURL=w;r.setObject("davinci.ve.widgets.BackgroundDialog",n);return n})},"davinci/ve/utils/CssUtils":function(){define(["dojo/_base/Color","davinci/ve/utils/URLRewrite"],
function(n,m){var g=[],e;for(e in n.named)"transparent"!=e&&g.push(e);g.sort(function(a,b){return 0==b.indexOf(a)?1:0==a.indexOf(b)?-1:a<b?-1:1});var c=[];g.forEach(function(a){c.push(a);a=n.named[a];a="#"+(16777216+(a[0]<<16)+(a[1]<<8)+a[2]).toString(16).slice(1);c.push(a)});var f=/^\-?(?:\d*\.\d+|\d+)$/,g="(?:";for(e=0;e<c.length;e+=2)0!=e&&(g+="|"),g+=c[e];g="(?:"+(g+")")+"|\\#(?:[0-9A-Fa-f]{6}|[0-9A-Fa-f]{3})|(?:rgb|hsl)\\s*\\(\\s*(?:(?:\\d*\\.\\d+|\\d+)%?)\\s*,\\s*(?:(?:\\d*\\.\\d+|\\d+)%?)\\s*,\\s*(?:(?:\\d*\\.\\d+|\\d+)%?)\\s*\\)|(?:rgba|hsla)\\s*\\(\\s*(?:(?:\\d*\\.\\d+|\\d+)%?)\\s*,\\s*(?:(?:\\d*\\.\\d+|\\d+)%?)\\s*,\\s*(?:(?:\\d*\\.\\d+|\\d+)%?)\\s*,\\s*(?:\\d*\\.\\d+|\\d+)\\s*\\))";
e="(?:"+g+"(?:\\s+(?:\\-?(?:\\d*\\.\\d+|\\d+)(?:in|cm|mm|pt|pc|px|%)|0))?)";var k=new RegExp("(?:\\s*("+g+")\\s*((?:\\-?(?:\\d*\\.\\d+|\\d+)(?:in|cm|mm|pt|pc|px|%)|0))?\\s*,?(.*))");e="("+e+"(?:\\s*,\\s*"+e+")*)";var a=/^\s*(url)\s*\(\s*(?:\'([^\']*)\'*|\"([^\"]*)\"|([^\'\"]*))\s*\)\s*$/,d=new RegExp("^\\s*((?:-moz-linear-gradient|-webkit-linear-gradient|-ms-linear-gradient|-o-linear-gradient|linear-gradient))\\s*\\(\\s*(?:(?:to\\s+((?:\\s*left\\s*|\\s*right\\s*|\\s*top\\s*|\\s*bottom\\s*){1,2})|((?:\\s*left\\s*|\\s*right\\s*|\\s*top\\s*|\\s*bottom\\s*){1,2})|((?:\\-?(?:\\d*\\.\\d+|\\d+)deg)))\\s*,\\s*)?\\s*"+
e+"\\s*\\)\\s*$"),h=new RegExp("^\\s*((?:-moz-radial-gradient|-webkit-radial-gradient|-ms-radial-gradient|-o-radial-gradient|radial-gradient))\\s*\\(\\s*(?:\\s*(?:\\s*(\\s*(?:(?:\\-?(?:\\d*\\.\\d+|\\d+)(?:in|cm|mm|pt|pc|px|%)|0)|(?:left|center|right|top|bottom))(?:\\s*(?:(?:\\-?(?:\\d*\\.\\d+|\\d+)(?:in|cm|mm|pt|pc|px|%)|0)|(?:left|center|right|top|bottom)))?)\\s*((?:\\-?(?:\\d*\\.\\d+|\\d+)deg))\\s*|\\s*(\\s*(?:(?:\\-?(?:\\d*\\.\\d+|\\d+)(?:in|cm|mm|pt|pc|px|%)|0)|(?:left|center|right|top|bottom))(?:\\s*(?:(?:\\-?(?:\\d*\\.\\d+|\\d+)(?:in|cm|mm|pt|pc|px|%)|0)|(?:left|center|right|top|bottom)))?)\\s*|\\s*((?:\\-?(?:\\d*\\.\\d+|\\d+)deg))\\s*)\\s*,\\s*)?\\s*(?:\\s*(?:\\s*(circle|ellipse)\\s*((?:(?:closest-side|farthest-side|closest-corner|farthest-corner|contain|cover)|(?:(?:\\-?(?:\\d*\\.\\d+|\\d+)(?:in|cm|mm|pt|pc|px|%)|0)(?:\\s+(?:\\-?(?:\\d*\\.\\d+|\\d+)(?:in|cm|mm|pt|pc|px|%)|0)\\s*)?)))\\s*|\\s*((?:(?:closest-side|farthest-side|closest-corner|farthest-corner|contain|cover)|(?:(?:\\-?(?:\\d*\\.\\d+|\\d+)(?:in|cm|mm|pt|pc|px|%)|0)(?:\\s+(?:\\-?(?:\\d*\\.\\d+|\\d+)(?:in|cm|mm|pt|pc|px|%)|0)\\s*)?)))\\s*(circle|ellipse)\\s*|\\s*(circle|ellipse)\\s*|\\s*((?:(?:closest-side|farthest-side|closest-corner|farthest-corner|contain|cover)|(?:(?:\\-?(?:\\d*\\.\\d+|\\d+)(?:in|cm|mm|pt|pc|px|%)|0)(?:\\s+(?:\\-?(?:\\d*\\.\\d+|\\d+)(?:in|cm|mm|pt|pc|px|%)|0)\\s*)?)))\\s*)\\s*,\\s*)?\\s*"+
e+"\\s*\\)\\s*$"),b=/(?:\s*((?:top|bottom|left|right|center|(?:\-?(?:\d*\.\d+|\d+)%?)))\s+((?:top|bottom|left|right|center|(?:\-?(?:\d*\.\d+|\d+)%?)))\s*)/;e="("+("(?:\\s*,\\s*"+("(?:"+("(?:color-stop\\s*\\(\\s*(?:\\-?(?:\\d*\\.\\d+|\\d+)%?)\\s*,\\s*"+g+"\\s*\\)\\s*)")+"|"+("(?:from\\s*\\(\\s*"+g+"\\s*\\)\\s*)")+"|"+("(?:to\\s*\\(\\s*"+g+"\\s*\\)\\s*)")+")")+"\\s*)")+"+)";var p=new RegExp("(?:\\s*,\\s*"+("(?:"+("(?:(color-stop)\\s*\\(\\s*((?:\\-?(?:\\d*\\.\\d+|\\d+)%?))\\s*,\\s*("+g+")\\s*\\)\\s*)")+
"|"+("(?:(from)\\s*\\(\\s*("+g+")\\s*\\)\\s*)")+"|"+("(?:(to)\\s*\\(\\s*("+g+")\\s*\\)\\s*)")+")")+"\\s*)(.*)"),z=new RegExp("(?:\\s*(-webkit-gradient)\\s*\\(\\s*(linear)\\s*(?:\\s*,\\s*((?:\\s*(?:top|bottom|left|right|center|(?:\\-?(?:\\d*\\.\\d+|\\d+)%?))\\s+(?:top|bottom|left|right|center|(?:\\-?(?:\\d*\\.\\d+|\\d+)%?))\\s*))\\s*)(?:\\s*,\\s*((?:\\s*(?:top|bottom|left|right|center|(?:\\-?(?:\\d*\\.\\d+|\\d+)%?))\\s+(?:top|bottom|left|right|center|(?:\\-?(?:\\d*\\.\\d+|\\d+)%?))\\s*))\\s*)"+e+"\\s*\\)\\s*)"),
r=new RegExp("(?:\\s*(-webkit-gradient)\\s*\\(\\s*(radial)\\s*(?:(?:\\s*,\\s*((?:\\s*(?:top|bottom|left|right|center|(?:\\-?(?:\\d*\\.\\d+|\\d+)%?))\\s+(?:top|bottom|left|right|center|(?:\\-?(?:\\d*\\.\\d+|\\d+)%?))\\s*))\\s*)(?:\\s*,\\s*((?:\\d*\\.\\d+|\\d+))\\s*)(?:\\s*,\\s*((?:\\s*(?:top|bottom|left|right|center|(?:\\-?(?:\\d*\\.\\d+|\\d+)%?))\\s+(?:top|bottom|left|right|center|(?:\\-?(?:\\d*\\.\\d+|\\d+)%?))\\s*))\\s*)(?:\\s*,\\s*((?:\\d*\\.\\d+|\\d+))\\s*)?)"+e+"\\s*\\)\\s*)"),w=function(a){var b=
[];do{var d=a.match(k);d&&(b.push({color:d[1],pos:d[2]}),a=d[3])}while(d);return b},A=function(a){var b=[],d=[],c,e;do{var k=a.match(p);k&&(k[4]?c={color:k[5]}:k[6]?e={color:k[7]}:(a=k[2].match(f)?100*k[2]+"%":k[2],d.push({color:k[3],pos:a})),a=k[8])}while(k);c&&b.push(c);for(c=0;c<d.length;c++)b.push(d[c]);e&&b.push(e);return b};return{regstr_posn:"^\\s*\\s*(?:(?:\\-?(?:\\d*\\.\\d+|\\d+)(?:in|cm|mm|pt|pc|px|%)|0)|(?:left|center|right|top|bottom))(?:\\s*(?:(?:\\-?(?:\\d*\\.\\d+|\\d+)(?:in|cm|mm|pt|pc|px|%)|0)|(?:left|center|right|top|bottom)))?\\s*$",
regstr_len_or_pct:"^\\s*(?:\\-?(?:\\d*\\.\\d+|\\d+)(?:in|cm|mm|pt|pc|px|%)|0)\\s*$",regstr_angle:"^\\s*(?:to\\s+((?:\\s*left\\s*|\\s*right\\s*|\\s*top\\s*|\\s*bottom\\s*){1,2})|((?:\\-?(?:\\d*\\.\\d+|\\d+)deg)))\\s*$",regstr_shape:"^\\s*circle|ellipse\\s*$",regstr_extent:"^\\s*(?:(?:closest-side|farthest-side|closest-corner|farthest-corner|contain|cover)|(?:(?:\\-?(?:\\d*\\.\\d+|\\d+)(?:in|cm|mm|pt|pc|px|%)|0)(?:\\s+(?:\\-?(?:\\d*\\.\\d+|\\d+)(?:in|cm|mm|pt|pc|px|%)|0)\\s*)?))\\s*$",regstr_stop_color:"\\s*"+
g+"\\s*",regstr_stop_pos:"\\s*(?:\\-?(?:\\d*\\.\\d+|\\d+)(?:in|cm|mm|pt|pc|px|%)|0)\\s*",parseBackgroundImage:function(c){var f={},e=c.match(/^\s*$/);if(e)f.type="emptystring";else if(e=c.match(/^\s*none\s*$/))f.type="none";else if(e=c.match(a))f.type="url",f.func=e[1],f.url=e[2]?e[2]:e[3]?e[3]:e[4];else if(e=c.match(z)){f.type="linear";f.func=e[1];f.webkitGradType=e[2];f.webKitPosn1=e[3];f.webKitPosn2=e[4];var k=f.webKitPosn1,g=f.webKitPosn2;c=0<=k.indexOf("left");var m=0<=k.indexOf("top"),p=0<=
k.indexOf("right"),k=0<=k.indexOf("bottom"),n=0<=g.indexOf("left"),x=0<=g.indexOf("top"),C=0<=g.indexOf("right"),g=0<=g.indexOf("bottom");m&&g&&(c&&n||p&&C)?f.angle="to bottom":k&&x&&(c&&n||p&&C)?f.angle="to top":c&&C&&(m&&x||k&&g)?f.angle="to right":n&&p&&(m&&x||k&&g)?f.angle="to left":c&&m&&C&&g?f.angle="to bottom right":c&&k&&C&&x?f.angle="to top right":p&&m&&n&&g?f.angle="to bottom left":p&&k&&n&&x&&(f.angle="to top left");f.stops=A(e[5])}else if(e=c.match(r))f.type="radial",f.func=e[1],f.webkitGradType=
e[2],f.webKitPosn1=e[3],f.webKitRadius1=e[4],f.webKitPosn2=e[5],f.webKitRadius2=e[6],f.shape=f.webKitPosn1==f.webKitPosn2?"circle":"ellipse",m=f.webKitPosn1,(c=m.match(b))?(m=c[1],m.match(/^\d+$/)&&(m+="px"),c=c[2],c.match(/^\d+$/)&&(c+="px"),c=m+" "+c):c=m,f.posn=c,f.extent=f.webKitRadius2?f.webKitRadius2+"px":f.webKitRadius1?f.webKitRadius1+"px":"farthest-corner",f.stops=A(e[7]);else if(e=c.match(d))f.type="linear",f.func=e[1],f.angle=e[2]?"to "+e[2]:e[3]?"to "+e[3]:e[4],f.stops=w(e[5]);else if(e=
c.match(h))f.type="radial",f.func=e[1],f.posn=e[2]?e[2]:e[4],f.angle=e[3]?e[3]:e[5],f.shape=e[6]?e[6]:e[9]?e[9]:e[10],f.extent=e[7]?e[7]:e[8]?e[8]:e[11],f.stops=w(e[12]);e||(f.type="unknown");return f},buildBackgroundImage:function(a){var b=[];if("emptystring"==a.type)b.push("");else if("none"==a.type)b.push("none");else if("url"==a.type){if("string"==typeof a.url&&0<a.url.length){var d=m.getUrl(a.url);d||(d=m.stripQuotes(a.url));b.push("url('"+d+"')")}}else if("linear"==a.type||"radial"==a.type){for(var d=
"",c,f,e=[],k=0;k<a.stops.length;k++){var h=a.stops[k],g="string"==typeof h.pos&&0<h.pos.length?h.pos:"";0<k&&(d+=", ");d+=h.color;if(0<k&&k<a.stops.length-1||0==k&&0!=g.length&&"0%"!=g&&0!=g-0||k==a.stops.length-1&&0!=g.length&&"100%"!=g&&1!=g-0)d+=" "+g;0!=k||0!=g.length&&"0%"!=g&&0!=g-0?k!=a.stops.length-1||0!=g.length&&"100%"!=g&&1!=g-0?e.push("color-stop("+g+", "+h.color+")"):f="to("+h.color+")":c="from("+h.color+")"}h="";g=!1;c&&(h+=c,g=!0);f&&(g&&(h+=", "),h+=f,g=!0);for(k=0;k<e.length;k++)g&&
(h+=", "),h+=e[k],g=!0;if("linear"==a.type){c="(";var p=a.angle;(f="string"==typeof p&&0<p.length?p.match(/^\s*(?:to\s+((?:\s*left\s*|\s*right\s*|\s*top\s*|\s*bottom\s*){1,2})|((?:\-?(?:\d*\.\d+|\d+)deg)))\s*$/):null)||(p="to bottom");"to bottom"!=p&&(c+=p+",");a="(linear,";e=0<=p.indexOf("left");k=0<=p.indexOf("top");g=0<=p.indexOf("right");p=0<=p.indexOf("bottom");e&&k?a+=" right bottom, left top, ":e&&p?a+=" right top, left bottom, ":g&&k?a+=" left bottom, right top, ":g&&p?a+=" left top, right bottom, ":
e?a+=" right top, left top, ":g?a+=" left top, right top, ":k?a+=" left bottom, left top, ":p?a+=" left top, left bottom, ":(e=180*(90-parseFloat(f[4]))/Math.PI,f=Math.cos(e),e=Math.sin(e),0<=f&&0<=e?(a+="0% 100%,",a=Math.abs(f)>Math.abs(e)?a+("100% "+100*(1-Math.abs(e)/Math.abs(f))+"%"):a+(Math.abs(f)/Math.abs(e)*100+"% 100%")):0<=f&&0>e?(a+="0% 0%,",a=Math.abs(f)>Math.abs(e)?a+("100% "+Math.abs(-e)/Math.abs(f)*100+"%"):a+(Math.abs(f)/Math.abs(e)*100+"% 100%")):0>f&&0<=e?(a+="100% 100%,",a=Math.abs(f)>
Math.abs(e)?a+("0% "+100*(1-Math.abs(e)/Math.abs(f))+"%"):a+(Math.abs(f)/Math.abs(e)*100+"% 100%")):(a+="100% 0%,",a=Math.abs(f)>Math.abs(e)?a+("0% "+Math.abs(-e)/Math.abs(f)*100+"%"):a+(Math.abs(f)/Math.abs(e)*100+"% 100%")),a+=", ");c+=d+")";b.push("-webkit-gradient"+(a+(h+")")));b.push("-o-linear-gradient"+c);b.push("-ms-linear-gradient"+c);b.push("-moz-linear-gradient"+c);b.push("-webkit-linear-gradient"+c);b.push("linear-gradient"+c)}else c="(","center"!=a.posn&&"center center"!=a.posn&&(c+=
a.posn+", "),"circle"!=a.shape&&(c+=a.shape+", "),"farthest-corner"!=a.extent&&(c+=a.extent+", "),c+=d+")",b.push("-webkit-gradient(radial, center center, 10, center center, "+(h+")")),b.push("-o-radial-gradient"+c),b.push("-ms-radial-gradient"+c),b.push("-moz-radial-gradient"+c),b.push("-webkit-radial-gradient"+c),b.push("radial-gradient"+c)}return b}}})},"davinci/ve/utils/URLRewrite":function(){define([],function(){var n=/^\s*url\s*\(\s*(\'[^\'\"]*\'|\"[^\'\"]*\"|[^\'\"]*)\s*\)\s*$/,m=/^[\'\"]?([^\'\"]*)[\'\"]?$/,
g=/^(http|ftp)/;return{isAbsolute:function(e){return"string"!=typeof e?!1:(e=this.getUrl(e))?g.test(e):!1},containsUrl:function(e){return"string"!=typeof e?!1:n.test(e)},replaceUrl:function(e,c){return"string"!=typeof e||"string"!=typeof c?null:this.getUrl(e)?"url('"+c+"')":null},stripQuotes:function(e){return e.replace(m,"$1")},encodeURI:function(e){return encodeURI(e).replace(/#/g,"%23")},getUrl:function(e){return"string"!=typeof e?null:(e=e.match(n))&&1<e.length?this.stripQuotes(e[1]):null}}})},
"davinci/ui/widgets/FileFieldDialog":function(){define("dojo/_base/declare dijit/_WidgetBase dijit/_TemplatedMixin dijit/_WidgetsInTemplateMixin davinci/Workbench davinci/ui/widgets/OpenFile dijit/form/Button davinci/model/Path davinci/lang/ui dijit/lang/_common dojo/text!./templates/FileFieldDialog.html dijit/form/TextBox xide/views/_PanelDialog xide/utils xide/types xfile/views/FileGrid xfile/FileActions".split(" "),function(n,m,g,e,c,f,k,a,d,h,b,p,z,r,w,A,x){return n("davinci.ui.widgets.FileFieldDialog",
[m,g,e],{templateString:b,widgetsInTemplate:!0,_fileSelectionDialog:null,_showFileSelectionDialog:function(){var a=this;this.ctx=c.ctx;x.createFilePicker(this,"",function(b){var d=r.buildPath(b.mount,b.path,!1);a.ctx.getFileManager().getImageUrl(b,!0,{oriPath:d});a.textField.set("value",d);a._onChange()},d.selectFile,null,{mount:"workspace_user",selection:"."},null,A,{micromatch:"(*.png)|(*.jpg)|!(*.*)"})},_setBaseLocationAttr:function(a){this._baseLocation=a},_setValueAttr:function(a){this.value!=
a&&(this.value=a,this.textField.set("value",a))},_setDisabledAttr:function(a){this.textField.set("disabled",a);this.button.set("disabled",a);this.inherited(arguments)},_setIntermediateChangesAttr:function(a){this.textField.set("intermediateChanges",a);this.inherited(arguments)},_onChange:function(){var a=this.textField.get("value");this.value!=a&&(this.value=a,this.textField.set("value",this.value),this.onChange(a))},onChange:function(a){},_getValueAttr:function(){return this.textField.get("value")}})})},
"davinci/ui/widgets/OpenFile":function(){define("dojo/_base/declare dijit/_Templated dijit/_Widget davinci/library system/resource davinci/workbench/Preferences davinci/Runtime davinci/Workbench dijit/Menu dijit/MenuItem davinci/model/Path dijit/form/DropDownButton davinci/lang/ui dijit/lang/_common dijit/form/Button dijit/form/TextBox dijit/form/RadioButton dijit/layout/ContentPane dijit/Tree".split(" "),function(n,m,g,e,c,f,k,a,d,h,b,p,z,r){return n("davinci.ui.widgets.OpenFile",[g,m],{widgetsInTemplate:!0,
fileDialogFileName:null,fileDialogParentFolder:null,postMixInProperties:function(){dojo.mixin(this,z);dojo.mixin(this,r);this.inherited(arguments)},postCreate:function(){this.inherited(arguments);this.fileTree.watch("selectedItem",dojo.hitch(this,this._updateFields));this._value||this._setValueAttr(this._getForcedRootAttr())},startup:function(){this.fileTree.startup()},_setValueAttr:function(a){a!=this._value&&(this._value=a,this.fileTree.set("selectedItems",[a]))},_getForcedRootAttr:function(){return this._forcedRoot||
c.findResource(a.getProject())},_setForcedRootAttr:function(a){this._forcedRoot=a},_updateFields:function(){var a=this.fileTree.get("selectedItems"),a=null!=a&&0<a.length?a[0]:null;dojo.attr(this._okButton,"disabled",!0);null!=a&&"File"==a.elementType&&dojo.attr(this._okButton,"disabled",!1)},_okButton:function(){this.value=this.fileTree.get("selectedItems")[0]},_onDblClick:function(a){this._okButton();this.onExecute()},_onKeyPress:function(a){a.which==dojo.keys.ENTER&&(this._okButton(),this.onExecute())},
_getValueAttr:function(){return this.value},_cancelButton:function(){this.onClose()},resize:function(a){this.contentpane.resize(a)},onExecute:function(){},onClose:function(){}})})},"davinci/lang/ui":function(){define([],function(){return{dontShowAgain:"Don't show again",selectFile:"Select a file",openFile:"Open File",aboutMaqetta:"About Maqetta",productVersion:"Version: ${0}",productDate:"Date: ${0}",build:"Build: ${0}",library:"Library",version:"Version",include:"Include",source:"Source",baseLocation:"Base Location",
invalidDownloadFileName:"File name may only contain letters, numbers, \x26#8216;_\x26#8216;, and \x26#8216;.\x26#8216;.",selectedFiles:"Selected Files",noFilesSelected:"No files selected!",downloadButtonLabel:"Download",themeAlreadyExists:"Theme already Exists!",invalidThemeName:"Invalid theme name",errorCreatingTheme:"Error creating theme: ",creatingTheme:"Creating theme",noUserThemes:"No user themes found in workspace. Please create a new theme before editing.",themeSetsDialog:"Manage theme sets",
renameThemeSet:"Rename theme set",themeSets:"Theme sets:",currentlySelectedThemeSet:"Currently selected theme set:",themeSetName:"Name:",desktopTheme:"Dojo desktop 1.7 theme:",mobileTheme:"Dojo mobile 1.7 theme:",android:"Android:",blackberry:"Blackberry:",ipad:"iPad:",iphone:"iPhone:",other:"Other:",selectTheme:"Select theme",themeSet:"Theme set:",themeVersionMessage:"Theme version does not match workspace version this could produce unexpected results. We suggest recreating the custom theme using the current version of Maqetta and deleting the existing theme.",
addThemeSet:"Add theme set",deleteThemeSet:"Delete theme set",workspaceLocation:"Workspace Location",savingReadonlyFile:"This file is a read-only file. Please save it to a writeable location.",create:"Create",open:"Open",save:"Save",select:"Select",update:"Update",unknown:"unknown",fileName:"File name",folderName:"Folder name",parentFolder:"Parent folder: ",newFolderLabel:"New folder",cancelButtonLabel:"Cancel",newFolderName:"Name:",createFolder:"Create Folder",createNewFile:"Create New File",createMobileApplication:"Create a Mobile Application",
createDesktopApplication:"Create a Desktop Application",createSketchHiFi:"Create a Sketch (high-fidelity)",createSketchLoFi:"Create a Sketch (low-fidelity)",createNewCSSFile:"Create New CSS File",createNewJSFile:"Create New JavaScript File",createNewFolder:"Create New Folder",saveFileAs:"Save File As",downloadFile:"Download",selectFiles:"Select Files...",selectZip:"Select ZIP file...",upload:"Upload",addFiles:"Upload",uploading:"Uploading...",completed:"completed: ${0} \n",done:"Done",explodeZipWarning:"Warning: Contents of .zip files will overwrite any conflicting files in your workspace",
mustEnterFileName:"You must enter a file name.",cannotSelect:"Cannot select ${0}. It is a folder.",fileAlreadyExistsOverwrite:"File ${0} already exists. OK to overwrite?",cannotCreate:"Cannot create ${0}. It already Exists.",fileNameSlashCharacter:"File names cannot contain a slash character (/). Your file name is: ${0}",doesNotHaveExtension:"The name ${0} does not have an extension (e.g., .html, .css or .js) and will be treated as a plain text file. OK to proceed?",areYouSureDelete:"Are you sure you want to delete ${0}?",
areYouSureDeleteProject:"Are you sure you want to delete project ${0}?",noResourcesSelected:"No resources are currently selected.",optimizeOption:"Use Dojo Web Builder (experimental)",downloadFullSource:"Download uncompressed source for selected libraries (if available)",selectAll:"All",selectNone:"None",themeToClone:"Theme to clone",newName:"New Name",selectTheme:"Select a Theme",newProject:"New Project",renameProjectDialogTitle:"Rename Project To...",deleteProjectButtonTitle:"Delete Project",renameProjectButtonTitle:"Rename Project...",
deleteOnlyProjectError:"You can't delete the only project in your workspace!",newFileShowFiles:"Show file picker",newFileHideFiles:"Hide file picker",root:"(root)",nhfoDevice:"Device:",nhfoDeviceTooltip:"Select an initial mobile device",nhfoThemeButtonLabel:"Theme...",nhfoThemeButtonTitle:"Select themes or theme set for new HTML file",renameNewLabel:"Name:",renameButtonLabel:"Rename",renameDialogTitle:"Rename To...",createProject:"New project",createProjectMenuItem:"New project...",deleteProjectMenuItem:"Delete this project...",
renameProjectMenuItem:"Rename this project...",saveAsProjectTemplateMenuItem:"Save as project template...",manageProjectTemplatesMenuItem:"Manage project templates...",modifyLibrariesMenuItem:"Modify libraries...",modifyLibraries:"Modify libraries",projectColon:"Project:",ProjectMenu:"Project menu",newProjectName:"Name:",newProjectTemplate:"Template:",newProjectUseProjectTemplate:"Use project template",newProjectCloneExistingProject:"Copy files from current project into new project",newProjectEclipseSupport:"New project should be Eclipse-compatible",
newProjectNameExists:"A project with this name already exists",saveAsProjectTemplate:"Save as project template",newProjectTemplateName:"Project template name:",newProjectTemplateShareLabel:"Share with everyone",newProjectTemplateOverwrite:"Project template {0} already exists. OK to overwrite?",newProjectTemplateCreationSuccess:"Project template {0} has been saved",newProjectTemplateCreationFailure:"Error: Project template {0} save operation failed",newProjectTemplateCancelled:"Operation cancelled",
manageProjectTemplates:"Manage project templates",ManageProjectTemplatesHeaderName:"Project template name",ManageProjectTemplatesHeaderShared:"Share with everyone?",ManageProjectTemplatesHeaderCreatedBy:"Created by",ManageProjectTemplatesHeaderCreatedOn:"Created on",ManageProjectTemplatesHeaderLastModified:"Last updated",ManageProjectTemplatesNoTemplates:"You have no project templates.",ManageProjectTemplatesDuplicateNames:"Invalid entries - two project templates have the same name",ManageProjectTemplateAboutToOccur:"The following actions are about to occur:",
ManageProjectTemplateDeletions:"project template deletions",ManageProjectTemplateModifications:"project template modifications",ManageProjectTemplateOKToProceed:"OK to proceed?",ManageProjectTemplatesInitializing:"Initializing...",modify:"Modify",User:"Account",currentProject:"Current Project:",selectProject:"Select a Project:",NoteOperationNotUndoable:"Note: this operation is not undoable."}})},"davinci/actions/UndoAction":function(){define(["dojo/_base/declare","./Action","../Workbench"],function(n,
m,g){return n("davinci.actions.UndoAction",m,{run:function(e){(e=g.getOpenEditor())&&e.getContext&&e.getContext().getCommandStack().undo()},isEnabled:function(e){var c=(e=g.getOpenEditor())&&e.getContext&&e.getContext();if(e&&c){if(c=c.getCommandStack().canUndo(),"davinci.ve.PageEditor"==e.declaredClass||"davinci.ve.themeEditor.ThemeEditor"==e.declaredClass)return c}else return!1}})})},"davinci/actions/Action":function(){define(["dojo/_base/declare"],function(n){return n("davinci.actions.Action",
null,{item:null,run:function(m){},isEnabled:function(m){return!0},getName:function(){return this.item.label}})})},"davinci/actions/SelectLayoutAction":function(){define(["dojo/_base/declare","./Action","../Workbench","davinci/lang/actions"],function(n,m,g,e){return n("davinci.actions.SelectLayoutAction",m,{_changeLayoutCommand:function(c){var f=dijit.byId("selectLayout");f&&f.destroyRecursive(!1);if((f=g.getOpenEditor())&&f.getContext){var e=!0;if("absolute"===c||"Absolute positioning"===c)e=!1;f.getContext().setFlowLayout(e);
f._visualChanged()}}})})},"davinci/lang/actions":function(){define([],function(){return{select:"Select",save:"Save",selectDirectory:"Select Directory to link to",parentFolder:"Parent Folder:",localName:"Local Name:",link:"Link",downloadResources:"Download Resources",downloadFileName:"Download File Name: ",downloadNow:"Download now",titleDownload:"Download",invalidFileName:"File names may only contain letters. numbers, and '_'.",editTheme:"Edit Theme",noEditableThemes:"No editable themes found in your workspace. Please create a new theme from one of the Read Only themes.",
newWidgetsShouldUse:"New widgets should use: ",selectTheme:"Select a theme",switchingThemes:"Switching themes",filesHasUnsavedChanges:"The file '${0}' has unsaved changes, \"Save\" changes and continue with switching themes.",abs:"Absolute positioning",flow:"Flow positioning"}})},"davinci/actions/RedoAction":function(){define(["dojo/_base/declare","./Action","../Workbench"],function(n,m,g){return n("davinci.actions.RedoAction",m,{run:function(e){(e=g.getOpenEditor())&&e.getContext&&e.getContext().getCommandStack().redo()},
isEnabled:function(e){var c=(e=g.getOpenEditor())&&e.getContext&&e.getContext();if(e&&c){if(c=c.getCommandStack().canRedo(),"davinci.ve.PageEditor"==e.declaredClass||"davinci.ve.themeEditor.ThemeEditor"==e.declaredClass)return c}else return!1}})})},"davinci/ve/actions/CopyAction":function(){define(["dojo/_base/declare","./_CutCopyAction","../../Runtime"],function(n,m,g){return n("davinci.ve.actions.CopyAction",[m],{_invokeSourceEditorAction:function(e){e.htmlEditor.copyAction.run()},_executeAction:function(e,
c,f,k){k=g.clipboard;g.clipboard=f;if(!k)e.onSelectionChange(c)}})})},"davinci/ve/actions/_CutCopyAction":function(){define("dojo/_base/declare davinci/Workbench davinci/ve/actions/ContextAction davinci/commands/CompoundCommand davinci/ve/commands/RemoveCommand davinci/ve/widget".split(" "),function(n,m,g,e,c,f){return n("davinci.ve.actions.CutAction",[g],{run:function(k){if(k=this.fixupContext(k))if("davinci.ve.PageEditor"==k.declaredClass&&"source"==k._displayMode)this._invokeSourceEditorAction(k);
else{var a=this._normalizeSelection(k);if(0<a.length){var d=new e,h=[],b=k.reorderPreserveSiblingOrder(a);dojo.forEach(b,function(a){var b=a.getData({identify:!1});b&&h.push(b);var e=a.getHelper();if(e&&e.getRemoveCommand){if(a=e.getRemoveCommand(a),"compound"===a.name){for(var e=[],k=a._commands,g=k.length-1;0<g;g--){var m=k[g];"remove"===m.name&&(m=f.byId(m._id).getData({identify:!1}),e.push(m))}b.associatedCopiedWidgetData=e}}else a=new c(a);d.add(a)});this._executeAction(k,a,h,d)}}},isEnabled:function(c){c=
this.fixupContext(c);var a=m.getOpenEditor();return a&&c?(c=0<c.getSelection().length,"davinci.ve.PageEditor"==a.declaredClass?(a=a.getDisplayMode(),c&&"source"!=a):c):!1},shouldShow:function(c){return(c=(c=this.fixupContext(c))?c.editor:null)&&"davinci.ve.PageEditor"==c.declaredClass},_invokeSourceEditorAction:function(c){},_executeAction:function(c,a,d,f){}})})},"davinci/ve/actions/ContextAction":function(){define(["dojo/_base/declare","davinci/actions/Action","davinci/Runtime"],function(n,m,g){return n("davinci.ve.actions.ContextAction",
[m],{_normalizeSelection:function(e){var c=e.getSelection();if(2>c.length)return c;var f=e.rootWidget,k=[];dojo.forEach(c,function(a){for(var d=a.getParent();d&&d!=f;){for(var h=0;h<c.length;h++)if(c[h]==d){e.deselect(a);return}d=d.getParent()}k.push(a)});return k},_getContext:function(e){return e?e:(e=g.currentEditor)&&(e.getContext&&e.getContext()||e.context)},fixupContext:function(e){e=this._getContext(e);return"davinci.ve.Context"==e.declaredClass||"xideve/delite/Context"==e.declaredClass?e:"function"==
typeof e.getContext?e.getContext():null}})})},"davinci/commands/CompoundCommand":function(){define(["dojo/_base/declare"],function(n){return n("davinci.commands.CompoundCommand",null,{name:"compound",_commands:[],constructor:function(m){this._commands=[];m&&(this._commands=[m])},add:function(m){if(m)if(this._commands)if("compound"==m.name)dojo.forEach(m._commands,function(c){this.add(c)},this);else{if("modify"==m.name)for(var g=m._oldId,e=0;e<this._commands.length;e++){var c=this._commands[e];if("modify"==
c.name&&c._oldId==g){c.add(m);return}}this._commands.push(m)}else this._commands="compound"==m.name?m._commands:[m]},setContext:function(m){for(var g=0;g<this._commands.length;g++)this._commands[g].setContext&&this._commands[g].setContext(m)},isEmpty:function(){return!this._commands||0===this._commands.length},execute:function(){if(this._commands)for(var m=0;m<this._commands.length;m++)this._commands[m].execute(),this._commands[m]._oldId&&this._commands[m]._newId&&(this._oldId=this._commands[m]._oldId,
this._newId=this._commands[m]._newId)},undo:function(){if(this._commands)for(var m=this._commands.length-1;0<=m;m--)this._commands[m].undo()}})})},"davinci/ve/commands/RemoveCommand":function(){define(["dojo/_base/declare","davinci/ve/commands/_hierarchyCommand","davinci/ve/widget","davinci/ve/States","davinci/ve/commands/ModifyCommand"],function(n,m,g,e,c){return n("davinci.ve.commands.RemoveCommand",[m],{name:"remove",constructor:function(c){this._id=c?c.id:void 0},execute:function(){if(this._id){var f=
g.byId(this._id);if(f){var k=f.getContext(),a=f.getParent()||k.getContainerNode(),d,h=f.getHelper();h&&h.onRemove&&(d=h.onRemove(f));if(!this._data){this._index=dojo.indexOf(a.getChildren(),f);if(0>this._index)return;this._data=f.getData();this._parentId=a.id}this._data.context=k;h=this._isRefreshOnDescendantChange(f);k&&k.detach(f);a.removeChild(f);k&&k.widgetChanged(k.WIDGET_REMOVED,f);f.destroyWidget();k&&k.widgetAddedOrDeleted();h&&(new c(h,null,null,a._edit_context)).execute();e.resetState(f.domNode);
d&&d()}}},undo:function(){if(this._data&&this._parentId){var f=g.byId(this._parentId);if(f){var k=g.createWidget(this._data);if(k){f.addChild(k,this._index);var a=f.getContext();a&&(a.attach(k),k.startup(),k.renderWidget(),a.widgetAddedOrDeleted(),a.widgetChanged(a.WIDGET_ADDED,k),(a=this._isRefreshOnDescendantChange(k))&&(new c(a,null,null,f._edit_context)).execute(),e.resetState(k.domNode))}}}}})})},"davinci/ve/commands/_hierarchyCommand":function(){define(["dojo/_base/declare"],function(n){return n("davinci.ve.commands._hierarchyCommand",
null,{_isRefreshOnDescendantChange:function(m){for(var g;m&&m.domNode&&"BODY"!=m.domNode.tagName;)(m=m.getParent())&&davinci.ve.metadata.queryDescriptor(m.type,"refreshOnDescendantChange")&&(g=m);return g}})})},"davinci/ve/commands/ModifyCommand":function(){define(["dojo/_base/declare","davinci/ve/commands/_hierarchyCommand","../widget","../utils/ImageUtils","../States"],function(n,m,g,e,c){return n("davinci.ve.commands.ModifyCommand",[m],{name:"modify",constructor:function(c,e,a,d,h){this._oldId=
c?c.id:void 0;this._properties=e=e||{};this._children=a||"string"==typeof a?a:e._children;this._context=d||c.getContext();this._scripts=h;delete this._properties._children},setContext:function(c){this._context=c},add:function(c){c&&c._oldId==this._oldId&&(c._properties&&dojo.mixin(this._properties,c._properties),c._children&&(this._children=c._children))},execute:function(){if(this._oldId&&this._properties){var f=g.byId(this._oldId),k=this._context;if(f){this._oldData=f.getData();this._oldData.context=
k;this._newData={type:this._oldData.type,properties:dojo.mixin({},this._oldData.properties,this._properties),children:this._children||"string"==typeof this._children?this._children:this._oldData.children,scripts:dojo.mixin({},this._oldData.scripts,this._scripts),maqAppStates:this._oldData.maqAppStates,maqDeltas:this._oldData.maqDeltas,context:k};for(var a in this._newData.properties)"$MAQ_MODIFYCOMMAND_DELETE_PROPERTY$"===this._newData.properties[a]&&delete this._newData.properties[a];if(this._doRefreshFromSource(f))f.setProperties(this._newData.properties,
!0),setTimeout(function(){k.visualEditor.refresh()},0);else{k&&k.detach(f);this._oldData.properties.isTempID&&!this._properties.id||delete this._newData.properties.isTempID;a=f.getParent();var d=null,h=a.indexOf(f);a.removeChild(f);f.destroyWidget();if(d=g.createWidget(this._newData)){"IMG"===d.domNode.tagName&&e.ImageUpdateFocus(d,k);a.addChild(d,h);this._newId=d.id;k&&(k.attach(d),d.startup(),d.renderWidget(),k.widgetAddedOrDeleted(),this._oldId!=this._newId&&k.widgetChanged(k.WIDGET_ID_CHANGED,
d,this._oldId),k.widgetChanged(k.WIDGET_MODIFIED,d));this.newWidget=d;dojo.publish("/davinci/ui/widget/replaced",[d,f]);c.resetState(d.domNode);var b;if(f=this._isRefreshParentOnPropChange(d))if("string"==typeof f)for(b=a;b&&b.domNode&&b.type!=f&&"BODY"!=b.domNode.tagName;){if(!b.domNode||"BODY"==b.domNode.tagName){b=null;break}b=b.getParent()}else b=a;(f=this._isRefreshOnDescendantChange(d))&&(b=f);b&&(new davinci.ve.commands.ModifyCommand(b,null,null,a._edit_context)).execute();dojo.publish("/davinci/ui/widgetPropertiesChanged",
[[d]])}}}}},_doRefreshFromSource:function(c){var f=this._properties,a,d,e=!1;for(a in f)if(f.hasOwnProperty(a)&&(d=c.metadata.property[a])&&d.refreshFromSource){e=!0;break}return e},_isRefreshParentOnPropChange:function(c){return davinci.ve.metadata.queryDescriptor(c.type,"refreshParentOnPropChange")},undo:function(){if(this._newId&&this._oldData){var f=g.byId(this._newId);if(f){var e=f.getParent();if(e){var a=e.indexOf(f);if(!(0>a)){var d=e.getContext();d&&d.detach(f);e.removeChild(f);f.destroyWidget();
if(newWidget=g.createWidget(this._oldData)){this._oldData=newWidget.getData();this._oldData.context=this._context;e.addChild(newWidget,a);d&&(d.attach(newWidget),newWidget.startup(),newWidget.renderWidget(),d.widgetAddedOrDeleted(),d.widgetChanged(d.WIDGET_MODIFIED,newWidget));dojo.publish("/davinci/ui/widget/replaced",[newWidget,f]);c.resetState(newWidget.domNode);var h;if(this._isRefreshParentOnPropChange(f))if("string"==typeof refreshParent)for(h=e;h&&h.domNode&&h.type!=refreshParent&&"BODY"!=
h.domNode.tagName;){if(!h.domNode||"BODY"==h.domNode.tagName){h=null;break}h=h.getParent()}else h=e;(f=this._isRefreshOnDescendantChange(newWidget))&&(h=f);h&&(new davinci.ve.commands.ModifyCommand(h,null,null,e._edit_context)).execute();dojo.publish("/davinci/ui/widgetPropertiesChanged",[[newWidget]])}}}}}}})})},"davinci/ve/utils/ImageUtils":function(){define([],function(){return{ImageUpdateFocus:function(n,m){if(m&&n&&n.domNode&&"IMG"===n.domNode.tagName)var g=dojo.connect(n.domNode,"onload",function(){for(var e=
m.getSelection(),c=0;c<e.length;c++)if(e[c]==n){m.updateFocus(n,c);break}dojo.disconnect(g)})}}})},"davinci/ve/actions/CutAction":function(){define(["dojo/_base/declare","./_CutCopyAction","../../Runtime"],function(n,m,g){return n("davinci.ve.actions.CutAction",[m],{_invokeSourceEditorAction:function(e){e.htmlEditor.cutAction.run()},_executeAction:function(e,c,f,k){g.clipboard=f;e.select(null);e.getCommandStack().execute(k)}})})},"davinci/ve/actions/DeleteAction":function(){define(["dojo/_base/declare",
"davinci/Workbench","davinci/ve/actions/ContextAction","davinci/commands/CompoundCommand","davinci/ve/commands/RemoveCommand"],function(n,m,g,e,c){return n("davinci.ve.actions.DeleteAction",[g],{run:function(f){if(f=this.fixupContext(f)){var k=this._normalizeSelection(f);if(0<k.length){var a=void 0;if(1===k.length)var k=k[0],d=k.getHelper(),a=d&&d.getRemoveCommand?d.getRemoveCommand(k):new c(k);else a=new e,dojo.forEach(k,function(d){var b=d.getHelper();d=b&&b.getRemoveCommand?b.getRemoveCommand(d):
new c(d);a.add(d)});f.select(null);f.getCommandStack().execute(a)}}},isEnabled:function(c){c=this.fixupContext(c);var f=m.getOpenEditor();return f&&c?(c=0<c.getSelection().length,"davinci.ve.PageEditor"==f.declaredClass?(f=f.getDisplayMode(),c&&"source"!=f):c):!1},shouldShow:function(c){return(c=(c=this.fixupContext(c))?c.editor:null)&&"davinci.ve.PageEditor"==c.declaredClass}})})},"davinci/ve/actions/PasteAction":function(){define(["dojo/_base/declare","../../Workbench","./ContextAction","../tools/PasteTool",
"../../Runtime"],function(n,m,g,e,c){return n("davinci.ve.actions.PasteAction",[g],{shortcut:{keyCode:86,ctrlKey:!0},run:function(f){if(f=this.fixupContext(f))if("davinci.ve.PageEditor"==f.declaredClass&&"source"==f._displayMode)f.htmlEditor.pasteAction.run();else{var k=c.clipboard;k&&f.setActiveTool(new e(k))}},isEnabled:function(f){f=this.fixupContext(f);var e=m.getOpenEditor();return e&&f?"davinci.ve.PageEditor"==e.declaredClass?(f=e.getDisplayMode(),c.clipboard&&"source"!=f):c.clipboard:!1},shouldShow:function(c){return(c=
(c=this.fixupContext(c))?c.editor:null)&&"davinci.ve.PageEditor"==c.declaredClass}})})},"davinci/ve/tools/PasteTool":function(){define("dojo/_base/declare ./CreateTool ../widget ../metadata ../../commands/CompoundCommand ../commands/AddCommand ../commands/MoveCommand ../commands/StyleCommand dojo/Deferred dojo/promise/all".split(" "),function(n,m,g,e,c,f,k,a,d,h){return n("davinci.ve.tools.PasteTool",m,{constructor:function(a){this.inherited(arguments);this._position_prop=null;var b=a[0];b&&b.properties&&
(b=g.parseStyleValues(b.properties.style),this._position_prop=g.retrieveStyleProperty(b,"position",""))},_create:function(b){var m=b.index,n,r,w=new c,A,x=[],y=new d,u=this._data.map(function(c){var p=new d,q=[];if(!this._loadType(c,q))return p.reject(),p;h(q).then(function(){var d=g.parseStyleValues(c.properties&&c.properties.style);if("absolute"==this._position_prop){var h=parseInt(g.retrieveStyleProperty(d,"left","0px")),d=parseInt(g.retrieveStyleProperty(d,"top","0px"));n?r={x:h+n.x,y:d+n.y}:
b.position?(r=b.position,n={x:b.position.x-h,y:b.position.y-d}):(r={x:h,y:d},n={x:0,y:0})}dojo.withDoc(this._context.getDocument(),function(){var d=function(b){void 0!==m&&0<=m&&m++;x.push(b);if(r){var d=this._context.getPreference("absoluteWidgetsZindex");w.add(new a(b,[{position:"absolute"},{"z-index":d}]));b=new k(b,r.x,r.y,A,null,null,A);A||(A=b);w.add(b)}p.resolve()}.bind(this);c.context=this._context;e.getHelper(c.type,"tool").then(function(a){var e;a&&(e=new a(c));if(e&&e.addPasteCreateCommand)a=
{parent:b.parent||this._context.getContainerNode(),position:r,index:m},e.addPasteCreateCommand(w,a).then(function(a){if(!a)return p.reject(),p;d(a)});else{e=g.createWidget(c);if(!e)return p.reject(),p;w.add(new f(e,b.parent||this._context.getContainerNode(),m));this.checkAddToCurrentState(w,e);d(e)}}.bind(this))}.bind(this))}.bind(this));return p}.bind(this));h(u).then(function(){w.isEmpty()||(this._context.getCommandStack().execute(w),setTimeout(function(){x.forEach(function(a,b){this._context.select(a,
0<b)}.bind(this))}.bind(this),0));y.resolve()}.bind(this));return y},createWithFlowLayout:function(){return"absolute"!=this._position_prop}})})},"davinci/ve/tools/CreateTool":function(){define("dojo/_base/declare dojo/dom-style ../tools/_Tool davinci/Workbench davinci/workbench/Preferences ../metadata ../widget dojo/Deferred dojo/promise/all davinci/ve/States davinci/commands/CompoundCommand ../commands/AddCommand ../commands/MoveCommand ../commands/ResizeCommand ../commands/StyleCommand".split(" "),
function(n,m,g,e,c,f,k,a,d,h,b,p,z,r,w){return n("davinci.ve.tools.CreateTool",g,{constructor:function(a,b){this._data=a;this._userData=b;a&&a.type&&(b=f.queryDescriptor(a.type,"resizableOnCreate")||f.queryDescriptor(a.type,"resizable"),"none"!==b&&(this._resizable=b),this._dropCursor=f.queryDescriptor(a.type,"dropCursor"));this._requireHelpers(a)},activate:function(a){(this._context=a)&&a.rootNode&&(this._oldCursor=a.rootNode.style.cursor);a.rootNode.style.cursor="crosshair"},deactivate:function(){this._context&&
this._context.rootNode&&(this._context.rootNode.style.cursor=this._oldCursor);this._setTarget(null);delete this._mdPosition;this._context.dragMoveCleanup()},_getContentPosition:function(a){if(a)return a.target&&(a={x:a.pageX,y:a.pageY}),a},onMouseDown:function(a){this._target=k.getEnclosingWidget(a.target);this._mdPosition=this._getContentPosition(a);this._dragRect=null},onMouseMove:function(a){var b=this._context,d=b._chooseParent;a.target!=this._lastEventTarget&&d.setProposedParentWidget(null);
this._lastEventTarget=a.target;if(this._mdPosition){if(this._resizable){b.deselect();var f=this._getContentPosition(a),h,k,g=!0,m=!0;f.x>=this._mdPosition.x?(d=this._mdPosition.x,k=f.x-this._mdPosition.x):(d=f.x,k=this._mdPosition.x-f.x,g=!1);f.y>=this._mdPosition.y?(h=this._mdPosition.y,f=f.y-this._mdPosition.y):(h=f.y,f=this._mdPosition.y-f.y,m=!1);a.shiftKey&&(k>=f?(f=k,m||(h=this._mdPosition.y-f)):(k=f,g||(d=this._mdPosition.x-k)));this._dragSizeRect||(a=b.getDocument().body,this._dragSizeRect=
dojo.create("div",{style:"border:1px dashed black;z-index:1000001;position:absolute;"},a));a=this._dragSizeRect.style;a.left=d+"px";a.top=h+"px";a.width=k+"px";a.height=f+"px"}}else d=!this.createWithFlowLayout(),this._setTarget(a.target,a),h=b.getPreference("showPossibleParents"),h=!h&&this._spaceKeyDown||h&&!this._spaceKeyDown,k={x:a.pageX,y:a.pageY},f={l:a.pageX,t:a.pageY,w:0,h:0},g=c.getPreferences("davinci.ve.editorPrefs",e.getProject()).snap&&d,m=!d,"object"==typeof this._dropCursor&&!1===this._dropCursor.show&&
(m=!1),b.dragMoveUpdate({data:this._data,position:k,absolute:d,currentParent:null,eventTarget:a.target,rect:f,doSnapLinesX:g,doSnapLinesY:g,doFindParentsXY:h,doCursor:m,beforeAfter:this._dropCursor&&this._dropCursor.beforeAfter})},onMouseUp:function(a){var b=this._context,d=b._chooseParent,c=!this.createWithFlowLayout();this._dragSizeRect&&(this._dragSizeRect.parentNode.removeChild(this._dragSizeRect),this._dragSizeRect=null);var h=b.getActiveDragDiv();h&&(h=dojo.query(".maqCandidateParents",h),1==
h.length&&(h[0].innerHTML=""));this._lastEventTarget=null;var g,m,p,n,h=this._getContentPosition(a);if(this._mdPosition){var r=!0,z=!0;this._position=dojo.mixin({},this._mdPosition);h.x<this._mdPosition.x&&(this._position.x=h.x);"height"==this._resizable?p=0:0<=h.x-this._mdPosition.x?p=h.x-this._mdPosition.x:(p=this._mdPosition.x-h.x,r=!1);h.y<this._mdPosition.y&&(this._position.y=h.y);"width"==this._resizable?n=0:0<=h.y-this._mdPosition.y?n=h.y-this._mdPosition.y:(n=this._mdPosition.y-h.y,z=!1);
a.shiftKey&&(p>=n?(n=p,z||(t=this._mdPosition.y-n)):(p=n,r||(l=this._mdPosition.x-p)))}else this._position=h;this._resizable&&this._position&&(4<p||4<n)&&(g={w:0<p?p:void 0,h:0<n?n:void 0});if(p=d.getProposedParentWidget()){if(m=p.parent,p.refChild){var A=p.parent.getChildren().indexOf(p.refChild);0<=A?p.refAfter&&A++:A=null}}else{a=this._getTarget()||k.getEnclosingWidget(a.target);var w=this._data;p=d.getAllowedTargetWidget(a,w,!0,{absolute:c});var G=dojo.isArray(w)?w[0].type:w.type,J=k.getWidgetHelper(G);
1<p.length&&J&&J.chooseParent?m=J.chooseParent(p):0<p.length&&(m=0<=p.indexOf(a)?a:p[0])}d.setProposedParentWidget(null);d=function(a){this.prototype=Error.prototype;this.name="InvalidTargetWidgetError";this.message=a?a:"The selected target is not a valid parent for the given widget."};try{w=this._data instanceof Array?this._data:[this._data];if(!m){var H=w.map(function(a){return a.type}).join(", "),K=w.map(function(a){var b=f.getAllowedParent(a.type);a=a.type;var d=f.queryDescriptor(a,"class");a=
d?d.split(/\s+/).push(a):[a];return{allowedParent:b,classList:a}});g="The selected target is not a valid parent for the given widget.";1===K.length&&K[0].allowedParent&&(g+=['The widget \x3cspan style\x3d"font-family: monospace"\x3e',H,"\x3c/span\x3e requires ",1<K[0].allowedParent.length?"one of the following parent types":"the parent type",' \x3cspan style\x3d"font-family: monospace"\x3e',K[0].allowedParent.join(", "),"\x3c/span\x3e."].join(""),G=w[0].type,(J=k.getWidgetHelper(G))&&J.isAllowedError&&
(g=J.isAllowedError({errorMsg:g,type:G,allowedParent:K[0].allowedParent,absolute:c})));throw new d(g);}for(c=0;c<w.length;c++){var L=w[c].type,O=f.getLibraryForType(L),Q=O.name,G=[L,b];b._widgets.hasOwnProperty(Q)||(b._widgets[Q]=0);1==++b._widgets[Q]&&f.invokeCallback(O,"onFirstAdd",G);f.invokeCallback(O,"onAdd",G)}this.create({target:m,index:A,directTarget:this._getTarget(),size:g,userData:this._userData})}catch(R){var P,N;R instanceof d?(P=R.message,N="Invalid Target"):(P="The action was interrupted by an internal error.",
N="Error",console.error(R));e.showMessage(N,P)}finally{this.exitCreateToolOnMouseUp()&&b.setActiveTool(null),this._cleanupActions()}},_cleanupActions:function(){var a=this._context;a.dragMoveCleanup();a.inlineEditActive()||this._context.getDocument().defaultView.focus()},onKeyDown:function(a){dojo.stopEvent(a);var b=this._context;if(a.keyCode==dojo.keys.ESCAPE)b.setActiveTool(null),this._cleanupActions();else{var d=this._context.getPreference("showPossibleParents");a.keyCode==dojo.keys.SPACE?this._spaceKeyDown=
!0:this._processKeyDown(a.keyCode);a=!d&&this._spaceKeyDown||d&&!this._spaceKeyDown;var d=this._data,d=dojo.isArray(d)?d[0].type:d.type,b=b._chooseParent,c=!this.createWithFlowLayout(),f=!c;"object"==typeof this._dropCursor&&!1===this._dropCursor.show&&(f=!1);b.dragUpdateCandidateParents({widgetType:d,showCandidateParents:a,absolute:c,doCursor:f,beforeAfter:this._dropCursor&&this._dropCursor.beforeAfter,currentParent:null})}},_processKeyDown:function(a){if(49<=a&&57>=a){var b=this._context._chooseParent,
d=b.getProposedParentsList();d&&1<d.length&&(a=d.length-(a-48),0<=a&&b.setProposedParentWidget(d[a]))}},onKeyUp:function(a){a.keyCode==dojo.keys.SPACE&&(this._spaceKeyDown=!1);dojo.stopEvent(a);a=this._context.getPreference("showPossibleParents");a=!a&&this._spaceKeyDown||a&&!this._spaceKeyDown;var b=this._data,b=dojo.isArray(b)?b[0].type:b.type,d=this._context._chooseParent,c=!this.createWithFlowLayout(),f=!c;"object"==typeof this._dropCursor&&!1===this._dropCursor.show&&(f=!1);d.dragUpdateCandidateParents({widgetType:b,
showCandidateParents:a,absolute:c,doCursor:f,beforeAfter:this._dropCursor&&this._dropCursor.beforeAfter,currentParent:null})},_requireHelpers:function(a){var b=[];if(!a||!a.type)return a instanceof Array&&a.forEach(function(a){b.concat(this._requireHelpers(a))},this),b;b.push(k.requireWidgetHelper(a.type));a.children&&!dojo.isString(a.children)&&dojo.every(a.children,function(a){return b.concat(this._requireHelpers(a))},this);return b},create:function(a){if(a&&this._data){for(var b=a.target,c,f;b&&
!(c=b.getContainerNode());)f=b,b=b.getParent();var e=a.index,h;c=!1;this._data.properties&&this._data.properties.style&&0<this._data.properties.style.indexOf("absolute")&&(c=!0);!c&&this.createWithFlowLayout()?f&&(e=b.indexOf(f)):a.position?h=a.position:this._position&&(h=this._position);this._data.context=this._context;d(this._requireHelpers(this._data)).then(function(){this._create({parent:b,index:e,position:h,size:a.size,userData:this._userData})}.bind(this))}},_create:function(c){var f=this._context,
e=[],h=new a;if(!this._loadType(this._data,e))return h.reject(),h;d(e).then(function(){var a;this.createNewWidget()?dojo.withDoc(this._context.getDocument(),function(){a=k.createWidget(this._data,this._userData,c.parent)},this):a=this._widget;a||h.reject(Error("Failed to create widget"));var d=new b;if(this.createNewWidget()){c.size=this._getInitialSize(a,c);d.add(new p(a,c.parent||this._context.getContainerNode(),c.index));var e=!0;a&&a.properties&&1==a.properties.ignorePosition&&(e=!1);a&&a.metadata&&
1==a.metadata.ignorePosition&&(e=!1);c.position&&e&&(e=f.getPreference("absoluteWidgetsZindex"),"xblox/RunScript"!==a.type&&"xblox/CSSState"!==a.type&&(d.add(new w(a,[{position:"absolute"},{"z-index":e}])),d.add(new z(a,c.position.x,c.position.y))));if(c.size){var g=c.size.w,m=c.size.h;if(null!==g&&null!==m&&(d.add(new r(a,g,m)),(e=k.getWidgetHelper(a.type))&&e.onCreateResize))e.onCreateResize(d,a,g,m)}this.checkAddToCurrentState(d,a)}e=a.id;this.addToCommandStack&&this.addToCommandStack(d,{widget:a});
d.isEmpty()||this._context.getCommandStack().execute(d);a.isLayoutContainer&&a.resize();a=k.byId(e);e=k.getWidgetHelper(a.type);d=null;e&&e.onAdded&&(d=e.onAdded(c.parent,a));this._select(d||a);this._widget=a;h.resolve(a);this.mouseUpProcessingCompleted()}.bind(this));return h},_loadType:function(a,b){if(!a||!a.type)return!1;b.push(this._context.loadRequires(a.type,!0));a.children&&!dojo.isString(a.children)&&dojo.forEach(a.children,function(a){this._loadType(a,b)}.bind(this));return!0},_getInitialSize:function(a,
b){var d=b.size,c=a.getHelper();c&&c.initialSize&&(c=c.initialSize(b))&&(d=c);!d&&(a=f.queryDescriptor(a.type,"initialSize"))&&(b&&!b.position?(b=b.parent,"html.body"==b.type?d="auto"==a||"auto"==a.flow?{w:"100%",h:"auto"}:this._getExplicitFlowSizeFromMetadata(a):this._isTypeContainer(b.type)?"auto"==a||"auto"==a.flow?(b=b.getData().children,d={w:"100%",h:b&&b.length?"auto":"100%"}):d=this._getExplicitFlowSizeFromMetadata(a):d=this._getExplicitFlowSizeFromMetadata(a)):d="auto"==a||"auto"==a.absolute?
{w:"300px",h:"300px"}:this._getExplicitAbsoluteSizeFromMetadata(a));return d},_getExplicitFlowSizeFromMetadata:function(a){var b=null;return b=a.flow?{w:a.flow.width?a.flow.width:"100%",h:a.flow.height?a.flow.height:"auto"}:{w:a.width?a.width:"100%",h:a.height?a.height:"auto"}},_getExplicitAbsoluteSizeFromMetadata:function(a){var b=null;return b=a.absolute?{w:a.absolute.width?a.absolute.width:"300px",h:a.absolute.height?a.absolute.height:"300px"}:{w:a.width?a.width:"300px",h:a.height?a.height:"300px"}},
_isTypeContainer:function(a){return a&&("dijit/layout/ContentPane"==a||"html.div"==a||"html.form"==a||"html.fieldset"==a)},_select:function(a){if(a)if(a.type){var b=f.getSmartInput(a.type);b&&b.then?b.then(function(b){!this._data.fileDragCreate&&b&&b.displayOnCreate?(a.inLineEdit_displayOnCreate=b.displayOnCreate,this._context.select(a,null,!0)):this._context.select(a)}.bind(this)):(console.error("create tool failed::_select smart input is null"),this._context.select(a))}else console.error("create tool failed::_select w.type is null");
else console.error("create tool failed::_select w is null")},createWithFlowLayout:function(){return f.queryDescriptor(this._data.type,"forceAbsolute")?!1:this._context.getFlowLayout()},createNewWidget:function(){return!0},exitCreateToolOnMouseUp:function(){return!0},mouseUpProcessingCompleted:function(){},checkAddToCurrentState:function(a,b){var d=h.getFocus(b._edit_context.rootNode);if(d&&d.stateContainerNode){var d=h.getState(d.stateContainerNode),f=c.getPreferences("davinci.ve.editorPrefs",e.getProject());
d&&f.newWidgetsCurrentState&&(f=m.get(b.domNode,"display"),a.add(new w(b,[{display:"none"}])),a.add(new w(b,[{display:f}],d)))}}})})},"davinci/ve/tools/_Tool":function(){define(["dojo/_base/declare","davinci/ve/widget","davinci/ve/utils/GeomUtils"],function(n,m,g){return n("davinci.ve.tools._Tool",null,{_getTarget:function(){return this._target},_setTarget:function(e,c){this._targetOverlays||(this._targetOverlays=[]);if(!this._matchesTargetOverlay(e)){for(var f=this._context.getContainerNode(),k;e&&
e!=f;)if((k=m.getEnclosingWidget(e))&&!k.getContext())e=k.domNode.parentNode,k=null;else{k&&davinci.ve.metadata.queryDescriptor(k.type,"enablePointerEvents")?k=null:k&&k.getContainerNode()&&(davinci.ve.metadata.queryDescriptor(k.type,"isControl")||(k=null));break}k?(this._target=k,this._updateTargetOverlays(c),this._insertTargetOverlays()):(this._removeTargetOverlays(),this._target=null)}},_updateTargetOverlays:function(e){this._removeTargetOverlays();if(this._target){var c=this._target.domNode,f=
this._getMaxZIndex(c);if(this._targetOverlays){var k=this._target.getHelper();if(k&&k.getTargetOverlays&&(k=k.getTargetOverlays(this._target))&&0<k.length){dojo.forEach(k,function(a){a=this._getNewTargetOverlay(a,a.x,a.y,a.width,a.height,f);this._targetOverlays.push(a)},this);return}var k=c.offsetLeft,a=c.offsetTop,d=c.offsetWidth,h=c.offsetHeight;if(e){var b,m=g.getBorderBoxPageCoordsCached(c);e.pageX<m.l&&(b=m.l-e.pageX,k-=b,d+=b);e.pageY<m.t&&(b=m.t-e.pageY,a-=b,h+=b);e.pageX>m.l+m.w&&(b=e.pageX-
(m.l+m.w),d+=b);e.pageY>m.t+m.h&&(b=e.pageY-(m.t+m.h),h+=b)}e=this._getNewTargetOverlay(c,k,a,d,h,f);this._targetOverlays.push(e)}}},_getMaxZIndex:function(e){var c=dojo.style(e,"zIndex");dojo.query("*",e).forEach(function(f){f=dojo.style(f,"zIndex");var e=Number(f),a=Number(c);isNaN(e)||(isNaN(a)?c=f:e>a&&(c=f))});return c},_getNewTargetOverlay:function(e,c,f,g,a,d){return this._context.getDojo().create("div",{className:"editFeedback",style:{position:"absolute",opacity:.1,left:c+"px",top:f+"px",
width:g+"px",height:a+"px",zIndex:d}})},_insertTargetOverlays:function(){if(this._targetOverlays&&this._target){var e=this._target.domNode,c=e.parentNode;dojo.forEach(this._targetOverlays,function(f){c.insertBefore(f,e.nextSibling)},this)}},_removeTargetOverlays:function(){if(this._targetOverlays&&this._target)for(var e=this._targetOverlays.length-1;0<=e;e--)dojo.destroy(this._targetOverlays[e]),this._targetOverlays.pop()},_matchesTargetOverlay:function(e){return dojo.some(this._targetOverlays,function(c){return e==
c},this)}})})},"davinci/ve/commands/AddCommand":function(){define("dojo/_base/declare davinci/ve/commands/_hierarchyCommand davinci/ve/widget davinci/ve/utils/ImageUtils davinci/ve/States davinci/ve/commands/ModifyCommand".split(" "),function(n,m,g,e,c,f){return n("davinci.ve.commands.AddCommand",[m],{name:"add",constructor:function(c,a,d){c&&(c.domNode?this._id=c.id:this._data=c);this._parentId=a.id;this._index=d},execute:function(){var k=g.byId(this._parentId);if(k){var a=k.getContext(),d=void 0;
this._data?(this._id&&this._data.properties&&(this._data.properties.id=this._id),d=g.createWidget(this._data),this._id=d.id):this._id&&(d=g.byId(this._id,a));if(d){this._data=d.getData();this._data.properties.id=this._id;this._data.context=a;if(this._index&&"number"!=typeof this._index)if(this._index.domNode)this._index=k.indexOf(this._index);else{var h=g.byId(this._index.id,a);this._index=k.indexOf(h)}"IMG"===d.domNode.tagName&&e.ImageUpdateFocus(d,a);k.addChild(d,this._index);a&&(a.attach(d),d.startup(),
d.renderWidget(),a.widgetAddedOrDeleted(),a.widgetChanged(a.WIDGET_ADDED,d));(a=this._isRefreshOnDescendantChange(d))&&(new f(a,null,null,k._edit_context)).execute();c.resetState(d.domNode)}}},undo:function(){if(this._id&&this._parentId){var e=g.byId(this._id);if(e){var a=g.byId(this._parentId);if(a){var d=this._isRefreshOnDescendantChange(e),h=e.getContext();h&&(h.detach(e),h.deselect(e));a.removeChild(e);h.widgetChanged(h.WIDGET_REMOVED,e);e.destroyWidget();h&&h.widgetAddedOrDeleted();d&&(new f(d,
null,null,a._edit_context)).execute();c.resetState(e.domNode)}}}}})})},"davinci/ve/commands/MoveCommand":function(){define("dojo/_base/declare dojo/dom-geometry davinci/ve/widget davinci/ve/States davinci/ve/utils/StyleArray davinci/ve/utils/GeomUtils".split(" "),function(n,m,g,e,c,f){return n("davinci.ve.commands.MoveCommand",null,{name:"move",constructor:function(c,a,d,f,b,e,g){this._id=c?c.id:void 0;this._context=c.getContext();this._newBox={l:a,t:d};this._commandForXYDeltas=f;this._oldBox=b;this._applyToStateIndex=
e&&"Normal"!=e&&"undefined"!=e?e:"undefined";this._disableSnapping=g},execute:function(){if(this._id){var k=g.byId(this._id);if(k&&k.domNode){var a=this._context;if(!this._oldBox){var d=k.getMarginBox();this._oldBox={l:d.l,t:d.t,w:d.w,h:d.h}}if(!k.domNode.offsetParent)console.error("maeh");else if(dojo.position(k.domNode.offsetParent,!0)){this._commandForXYDeltas?(this._newBox.l=this._oldBox.l+this._commandForXYDeltas._deltaX,this._newBox.t=this._oldBox.t+this._commandForXYDeltas._deltaY):(!this._disableSnapping&&
a&&a._snapX&&(d=this._oldBox.w,"left"==a._snapX.typeRefObj?this._newBox.l=a._snapX.x:d&&"right"==a._snapX.typeRefObj?this._newBox.l=a._snapX.x-d:d&&"center"==a._snapX.typeRefObj&&(this._newBox.l=a._snapX.x-d/2)),!this._disableSnapping&&a&&a._snapY&&(d=this._oldBox.h,"top"==a._snapY.typeRefObj?this._newBox.t=a._snapY.y:d&&"bottom"==a._snapY.typeRefObj?this._newBox.t=a._snapY.y-d:d&&"middle"==a._snapY.typeRefObj&&(this._newBox.t=a._snapY.y-d/2)));this._deltaX=this._newBox.l-this._oldBox.l;this._deltaY=
this._newBox.t-this._oldBox.t;var d=f.getBorderBoxPageCoords(k.domNode.offsetParent),h=m.getBorderExtents(k.domNode.offsetParent),b=this._newBox.l-d.l-h.l,p=this._newBox.t-d.t-h.t;a.getScrollOffset();b=[{left:b+"px"},{top:p+"px"}];a=k.getStyleValuesAllStates();this._oldStyleValuesAllStates=dojo.clone(a);this._oldBox&&(this._oldStyleValuesAllStates[this._applyToStateIndex]=c.mergeStyleArrays(this._oldStyleValuesAllStates[this._applyToStateIndex],[{left:this._oldBox.l-d.l-h.l+"px"},{top:this._oldBox.t-
d.t-h.t+"px"}]));a[this._applyToStateIndex]=a[this._applyToStateIndex]?c.mergeStyleArrays(a[this._applyToStateIndex],b):b;k.setStyleValuesAllStates(a);d=e.getStatesListCurrent(k.domNode);h=c.mergeStyleArrays([],a.undefined);for(b=0;b<d.length;b++)a[d[b]]&&(h=c.mergeStyleArrays(h,a[d[b]]));k.setStyleValuesCanvas(h);k.setStyleValuesModel(a.undefined);k.refresh();e.resetState(k.domNode);dojo.publish("/davinci/ui/widgetPropertiesChanged",[[k]])}}else console.error("no widget")}},undo:function(){if(this._id){var f=
g.byId(this._id);if(f){var a=this._oldStyleValuesAllStates,d=this._applyToStateIndex;f.setStyleValuesAllStates(a);a=c.mergeStyleArrays(a.undefined,a[d]);f.setStyleValuesCanvas(a);f.setStyleValuesModel(this._oldStyleValuesAllStates.undefined);f.refresh();davinci.ve.states.resetState(f.domNode);dojo.publish("/davinci/ui/widgetPropertiesChanged",[[f]])}}}})})},"davinci/ve/commands/ResizeCommand":function(){define(["dojo/_base/declare","dojo/dom-geometry","davinci/ve/widget","davinci/ve/States","davinci/ve/utils/StyleArray"],
function(n,m,g,e,c){return n("davinci.ve.commands.ResizeCommand",null,{name:"resize",constructor:function(c,e,a,d){this._id=c?c.id:void 0;c=/^\s*[-+]?[0-9]*\.?[0-9]+\s*$/;c.test(e)&&(e=parseFloat(e));c.test(a)&&(a=parseFloat(a));this._newBox={w:e,h:a};this._applyToStateIndex=d&&"Normal"!=d&&"undefined"!=d?d:"undefined"},execute:function(){if(this._id&&this._newBox){var f=g.byId(this._id);if(f&&f.domNode){var k=f.domNode,a=k.ownerDocument.defaultView.getComputedStyle(k),d=m.getContentBox(k,a);this._oldBox=
{w:d.w,h:d.h};var d=this._newBox.w,h=this._newBox.h;this._usesBorderBox(k)&&(k=m.getPadBorderExtents(k,a),"number"==typeof d&&0<=d&&(d+=k.w),"number"==typeof h&&0<=h&&(h+=k.h));k=[{}];"number"==typeof d?k[0].width=d+"px":"string"==typeof d&&(k[0].width=d);"number"==typeof h?k[0].height=h+"px":"string"==typeof h&&(k[0].height=h);d=f.getStyleValuesAllStates();this._oldStyleValuesAllStates=dojo.clone(d);this._oldBox&&(this._oldStyleValuesAllStates[this._applyToStateIndex]=c.mergeStyleArrays(this._oldStyleValuesAllStates[this._applyToStateIndex],
[{width:this._oldBox.w+"px"},{height:this._oldBox.h+"px"}]));d[this._applyToStateIndex]=d[this._applyToStateIndex]?c.mergeStyleArrays(d[this._applyToStateIndex],k):k;f.setStyleValuesAllStates(d);h=e.getStatesListCurrent(f.domNode);k=c.mergeStyleArrays([],d.undefined);for(a=0;a<h.length;a++)d[h[a]]&&(k=c.mergeStyleArrays(k,d[h[a]]));f.setStyleValuesCanvas(k);f.setStyleValuesModel(d.undefined);this._resize(f);e.resetState(f.domNode);dojo.publish("/davinci/ui/widgetPropertiesChanged",[[f]])}}},setContext:function(c){this._context=
c},undo:function(){if(this._id){var f=g.byId(this._id);if(f){var k=this._oldStyleValuesAllStates,a=this._applyToStateIndex;f.setStyleValuesAllStates(k);k=c.mergeStyleArrays(k.undefined,k[a]);f.setStyleValuesCanvas(k);f.setStyleValuesModel(this._oldStyleValuesAllStates.undefined);this._resize(f);e.resetState(f.domNode);dojo.publish("/davinci/ui/widgetPropertiesChanged",[[f]])}}},_usesBorderBox:function(c){var f=c.tagName.toLowerCase();(c=c.getAttribute("type"))&&(c=c.toLowerCase(c));return"table"==
f||"button"==f||"input"==f&&"button"==c},_resize:function(c){var f=c.getParent();f&&f.dijitWidget&&f.dijitWidget.isLayoutContainer?f.resize():c.resize&&c.resize();c.renderWidget();c._updateSrcStyle()}})})},"davinci/ve/commands/StyleCommand":function(){define(["dojo/_base/declare","davinci/ve/utils/StyleArray"],function(n,m){return n("davinci.ve.commands.StyleCommand",null,{name:"style",constructor:function(g,e,c){this._newValues=e;this._id=g?g.id:void 0;this._applyToStateIndex=c&&"Normal"!=c&&"undefined"!=
c?c:"undefined"},add:function(g){g&&g._id==this._id&&g._newValues&&dojo.mixin(this._newValues,g._newValues)},execute:function(g,e){if(this._id&&this._newValues&&(g=require("davinci/ve/widget").byId(this._id))&&g.domNode){var c=require("davinci/ve/States"),f=g.getStyleValuesAllStates();this._oldStyleValuesAllStates=dojo.clone(f);f[this._applyToStateIndex]=f[this._applyToStateIndex]?m.mergeStyleArrays(f[this._applyToStateIndex],this._newValues):this._newValues;for(var k=f[this._applyToStateIndex],a=
k.length-1;0<=a;a--){var d=k[a],h=!1,b;for(b in d)"$MAQ_DELETE_PROPERTY$"==d[b]?delete d[b]:h=!0;h||k.splice(a,1)}g.setStyleValuesAllStates(f);b=c.getStatesListCurrent(g.domNode);k=m.mergeStyleArrays([],f.undefined);for(a=0;a<b.length;a++)f[b[a]]&&(k=m.mergeStyleArrays(k,f[b[a]]));g.setStyleValuesCanvas(k);g.setStyleValuesModel(f.undefined);g.refresh();c.resetState(g.domNode);!0!==e&&dojo.publish("/davinci/ui/widgetPropertiesChanged",[[g]])}},undo:function(){if(this._id&&this._oldStyleValuesAllStates){var g=
require("davinci/ve/widget").byId(this._id);if(g){require("davinci/ve/States");var e=this._oldStyleValuesAllStates,c=this._applyToStateIndex;g.setStyleValuesAllStates(e);e=m.mergeStyleArrays(e.undefined,e[c]);g.setStyleValuesCanvas(e);g.setStyleValuesModel(this._oldStyleValuesAllStates.undefined);g.refresh();require("davinci/ve/States").resetState(g.domNode);dojo.publish("/davinci/ui/widgetPropertiesChanged",[[g]])}}}})})},"davinci/ve/actions/DuplicateAction":function(){define("dojo/_base/declare dojo/dom-style davinci/ve/actions/ContextAction davinci/commands/CompoundCommand davinci/ve/commands/AddCommand davinci/ve/commands/MoveCommand davinci/ve/tools/CreateTool davinci/ve/widget davinci/ve/utils/GeomUtils".split(" "),
function(n,m,g,e,c,f,k,a,d){return n("davinci.ve.actions.DuplicateAction",[g],{run:function(h){if((h=this.fixupContext(h))&&"davinci.ve.Context"===h.declaredClass&&"davinci/delite/Context"===h.declaredClass){var b=this._normalizeSelection(h);if(this.selectionSameParent(b)){var g=[];if(0<b.length){var n=new e;dojo.forEach(b,function(b){var e,p=b.getData({identify:!1});p&&(p.context=h,dojo.withDoc(h.getDocument(),function(){e=a.createWidget(p)},this),e&&(n.add(new c(e,b.getParent(),void 0)),k.prototype.checkAddToCurrentState(n,
e),g.push(e),"absolute"==(b&&b.domNode?m.get(b.domNode,"position"):null)&&(b=d.getMarginBoxPageCoords(b.domNode),b.l+=25,n.add(new f(e,b.l,b.t,void 0,void 0,void 0,!0)))))});h.getCommandStack().execute(n);dojo.forEach(g,function(a,b){h.select(a,0<b)},this)}}}},isEnabled:function(a){a=(a=this.fixupContext(a))&&a.getSelection?a.getSelection():[];return 0===a.length?!1:this.selectionSameParent(a)},shouldShow:function(a){return(a=(a=this.fixupContext(a))?a.editor:null)&&"davinci.ve.PageEditor"==a.declaredClass},
selectionSameParent:function(a){if(0===a.length)return!1;for(var b=a[0].getParent(),d=0;d<a.length;d++)if(a[d].getParent()!=b)return!1;return!0}})})},"davinci/ve/actions/EditValueAction":function(){define(["dojo/_base/declare","davinci/ve/actions/ContextAction"],function(n,m){return n("davinci.ve.actions.EditValueAction",[m],{run:function(g){if((g=this.fixupContext(g))&&"davinci.ve.Context"===g.declaredClass&&"davinci/delite/Context"===g.declaredClass){var e=g.getSelection();1===e.length&&g.select(e[0],
!1,!0)}},isEnabled:function(g){return(g=this.fixupContext(g))&&0<g.getSelection().length},shouldShow:function(g){return(g=(g=this.fixupContext(g))?g.editor:null)&&"davinci.ve.PageEditor"==g.declaredClass}})})},"davinci/ve/actions/EditPropertiesAction":function(){define(["dojo/_base/declare","davinci/ve/actions/ContextAction"],function(n,m){return n("davinci.ve.actions.EditPropertiesAction",[m],{run:function(g){(g=this.fixupContext(g))&&g.editor&&g.editor.editorContainer&&g.editor.editorContainer.hideShowProperties&&
g.editor.editorContainer.hideShowProperties()},isEnabled:function(g){g=this.fixupContext(g);return!0}})})},"davinci/ve/actions/SurroundAction":function(){define("dojo/_base/declare dojo/_base/array dojo/dom-style davinci/ve/actions/ContextAction davinci/commands/CompoundCommand davinci/ve/commands/AddCommand davinci/ve/commands/StyleCommand davinci/ve/commands/MoveCommand davinci/ve/commands/ResizeCommand davinci/ve/commands/ReparentCommand davinci/ve/tools/CreateTool davinci/ve/widget davinci/ve/utils/GeomUtils".split(" "),
function(n,m,g,e,c,f,k,a,d,h,b,p,z){return n("davinci.ve.actions.SurroundAction",[e],{run:function(e){e=this.fixupContext(e);var n,r,x,y,u=[],q,v=this.item.surroundWithTagName;if(v){dojo.withDoc(e.getDocument(),function(){q=p.createWidget({type:"html."+v,properties:{},children:[],context:e})});var B=new c,I=[].concat(e.getSelection()),D=I[0],F=D.getParent();z.getMarginBoxPageCoords(F.domNode);I.sort(function(a,b){return F.indexOf(a)-F.indexOf(b)});var C=e.getDocument(),E=C.defaultView&&C.defaultView.dojo;
E.style||(E.style=g);(C=m.every(I,function(a){if(E)return position_prop=E.style(a.domNode,"position"),"absolute"==position_prop}))&&I.forEach(function(b,d){u.push(z.getMarginBoxPageCoordsCached(b.domNode));B.add(new a(b,u[d].l,u[d].t,null,u[d]))});B.add(new f(q,F,F.indexOf(D)));b.prototype.checkAddToCurrentState(B,q);C&&(B.add(new k(q,[{position:"absolute"}])),m.forEach(I,function(a,b){a=u[b].l+u[b].w;var d=u[b].t+u[b].h;if(0==b||u[b].l<n)n=u[b].l;if(0==b||u[b].t<r)r=u[b].t;if(0==b||a>x)x=a;if(0==
b||d>y)y=d}),B.add(new a(q,n,r)),B.add(new d(q,x-n,y-r)));m.forEach(I,function(a){B.add(new h(a,q,"last"))});C&&m.forEach(I,function(b,d){B.add(new a(b,u[d].l,u[d].t,null,u[d]))});e.getCommandStack().execute(B);e.select(q)}else console.error("missing surroundWithTagName")},isEnabled:function(a){if((a=this.fixupContext(a))&&a.getSelection().length){var b=a.getSelection()[0].getParent(),d=[];if(!b||!b.length)return!1;if(m.every(a.getSelection(),function(a){var c=a.getParent();if(!c)return!1;d.push(b.indexOf(a));
return b.id==c.id})){d.sort();var c;for(a=d.shift();d.length;a=c)if(c=d.shift(),c!=a+1)return!1;return!0}}return!1}})})},"davinci/ve/commands/ReparentCommand":function(){define(["dojo/_base/declare","davinci/ve/commands/_hierarchyCommand","../widget","../States","davinci/ve/commands/ModifyCommand"],function(n,m,g,e,c){return n("davinci.ve.commands.ReparentCommand",[m],{name:"reparent",constructor:function(c,e,a){this._id=c?c.id:void 0;this._newParentId=e?e.id:"myapp";this._newIndex=a},execute:function(){if(this._id&&
this._newParentId){var f=g.byId(this._id);if(f){var k=f.getParent();k||(k=dojo.byId("myapp"));var a=g.byId(this._newParentId);a||(a=dojo.byId("myapp"));var d=this._isRefreshOnDescendantChange(f);this._oldParentId||(this._oldParentId=k.id,this._oldIndex=dojo.indexOf(k.getChildren(),f),this._newIndex&&this._newIndex.domNode&&(this._newIndex=a.indexOf(this._newIndex)));k.removeChild(f);var h=a.getContext();a.addChild(f,a==k&&this._oldIndex<this._newIndex?this._newIndex-1:this._newIndex);if(h){var b=
f.getHelper();b&&b.reparent&&b.reparent(f);f.startup();f.renderWidget();h.widgetChanged(h.WIDGET_REPARENTED,f,[k,a]);k=this._isRefreshOnDescendantChange(f);d&&(d=new c(d,null,null,h),d.execute());k&&(d=new c(k,null,null,h),d.execute())}e.resetState(f.domNode)}}},undo:function(){if(this._id&&this._oldParentId&&this._newParentId){var f=g.byId(this._id);if(f){var k=g.byId(this._oldParentId);if(k){var a=g.byId(this._newParentId);if(a){var d=this._isRefreshOnDescendantChange(f),h=k.getContext();a.removeChild(f);
k.addChild(f,this._oldIndex);if(h){var b=f.getHelper();b&&b.reparent&&b.reparent(f);f.startup();f.renderWidget();h.widgetChanged(h.WIDGET_REPARENTED,f,[k,a]);k=this._isRefreshOnDescendantChange(f);d&&(d=new c(d,null,null,h),d.execute());k&&(d=new c(k,null,null,h),d.execute())}e.resetState(f.domNode)}}}}}})})},"davinci/ve/actions/SelectParentAction":function(){define(["dojo/_base/declare","davinci/ve/actions/_SelectAncestorAction"],function(n,m){return n("davinci.ve.actions.SelectParentAction",[m],
{run:function(g){var e=(g=this.fixupContext(g))&&g.getSelection();this.selectionSameParentNotBody(e)&&g.select(e[0].getParent())},isEnabled:function(g){g=(g=this.fixupContext(g))&&g.getSelection();return this.selectionSameParentNotBody(g)}})})},"davinci/ve/actions/_SelectAncestorAction":function(){define(["dojo/_base/declare","davinci/ve/actions/ContextAction"],function(n,m){return n("davinci.ve.actions._SelectAncestorAction",[m],{shouldShow:function(g){return(g=this.fixupContext(g))&&g.editor&&"davinci.ve.HTMLPageEditor"==
g.editor.editorID},selectionSameParentNotBody:function(g){if(!g||0===g.length)return!1;var e=g[0].getParent();if(!e||!e.domNode)return!1;for(var c=0;c<g.length;c++)if(g[c].getParent()!=e)return!1;return!0}})})},"davinci/ve/actions/SelectAncestorAction":function(){define("dojo/_base/declare davinci/ve/actions/_SelectAncestorAction xide/views/_CIPanelDialog xide/utils xide/types xide/lodash".split(" "),function(n,m,g,e,c,f){return n("davinci.ve.actions.SelectAncestorAction",[m],{run:function(k){var a=
(k=this.fixupContext(k))&&k.getSelection();if(this.selectionSameParentNotBody(a)){for(var d=[],a=a[0].getParent();"BODY"!=a.domNode.tagName;)d.push(a),a=a.getParent();"BODY"===a.domNode.tagName&&d.push(a);for(var h=[],a=0;a<d.length;a++){var b=require("davinci/ve/widget").getLabel(d[a]);h.push({value:f.unescape(b),label:b,widget:d[a]})}var m=[e.createCI("New Parent",c.ECIType.ENUMERATION,"",{options:h})];(new g({title:"Select new parent",resizeable:!0,onOk:function(a){a=f.find(h,{value:m[0].value});
k.select(a.widget)},cis:m})).show()}},isEnabled:function(c){c=(c=this.fixupContext(c))&&c.getSelection();return this.selectionSameParentNotBody(c)}})})},"davinci/ve/actions/UnselectAllAction":function(){define(["dojo/_base/declare","davinci/ve/actions/ContextAction"],function(n,m){return n("davinci.ve.actions.SelectParentAction",[m],{run:function(g){g=this.fixupContext(g);0<(g&&g.getSelection()).length&&g.deselect()},isEnabled:function(g){return(g=(g=this.fixupContext(g))&&g.getSelection())&&0<g.length}})})},
"davinci/ve/actions/ArrangeAction":function(){define(["dojo/_base/declare","./_ReorderAction"],function(n,m){return n("davinci.ve.actions.ArrangeAction",[m],{run:function(g){},isEnabled:function(g){return!0},shouldShow:function(g){return(g=(g=this.fixupContext(g))?g.editor:null)&&"davinci.ve.PageEditor"==g.declaredClass}})})},"davinci/ve/actions/_ReorderAction":function(){define(["dojo/_base/declare","dojo/_base/array","dojo/dom-style","davinci/ve/actions/ContextAction"],function(n,m,g,e){return n("davinci.ve.actions._ReorderAction",
[e],{shouldShow:function(c){return(c=this.fixupContext(c))&&c.editor&&"davinci.ve.HTMLPageEditor"==c.editor.editorID},selectionSameParentAllAbsolute:function(c){if(0===c.length)return!1;var f=c[0].getParent();if(!f)return!1;for(var e=0;e<c.length;e++){var a=c[e];if(a.getParent()!=f||"absolute"!=(a&&a.domNode?g.get(a.domNode,"position"):null))return!1}return!0},selectionSameParentAllAbsoluteAdjacent:function(c){if(!c||0===c.length||!this.selectionSameParentAllAbsolute(c))return!1;var f=c[0].getParent();
if(!f||!f.length)return!1;for(var f=f.getChildren(),e=Number.MAX_VALUE,a=Number.MIN_VALUE,d=0;d<f.length;d++)0<=c.indexOf(f[d])&&(e=d<e?d:e,a=d>a?d:a);return a-e+1===c.length},getAbsoluteSiblings:function(c){c=c&&c.getParent&&c.getParent();return c?(c=c.getChildren&&c.getChildren())?m.filter(c,function(c){return"absolute"==(c&&c.domNode?g.get(c.domNode,"position"):null)}):[]:[]}})})},"davinci/ve/actions/MoveToFrontAction":function(){define(["dojo/_base/declare","./_ReorderAction","davinci/commands/CompoundCommand",
"davinci/ve/commands/ReparentCommand"],function(n,m,g,e){return n("davinci.ve.actions.MoveToFrontAction",[m],{name:"MoveToFront",iconClass:"editActionIcon editMoveToFrontIcon",run:function(c){if(c=this.fixupContext(c)){var f=c&&c.getSelection?c.getSelection():[];if(0!==f.length&&this.selectionSameParentAllAbsolute(f)){for(var k=f[0].getParent(),a=this.getAbsoluteSiblings(f[0]),d=new g,h=0;h<a.length;h++){var b=a[h];0<=f.indexOf(b)&&d.add(new e(b,k,null))}c.getCommandStack().execute(d)}}},isEnabled:function(c){c=
(c=this.fixupContext(c))&&c.getSelection?c.getSelection():[];if(0===c.length||!this.selectionSameParentAllAbsolute(c))return!1;for(var f=this.getAbsoluteSiblings(c[0]),e=0;e<c.length;e++)if(f.indexOf(c[e])<f.length-c.length)return!0;return!1}})})},"davinci/ve/actions/MoveToBackAction":function(){define(["dojo/_base/declare","./_ReorderAction","davinci/commands/CompoundCommand","davinci/ve/commands/ReparentCommand"],function(n,m,g,e){return n("davinci.ve.actions.MoveToBackAction",[m],{name:"MoveToBack",
iconClass:"editActionIcon editMoveToBackIcon",run:function(c){if(c=this.fixupContext(c)){var f=c&&c.getSelection?c.getSelection():[];if(0!==f.length&&this.selectionSameParentAllAbsolute(f)){for(var k=f[0].getParent(),a=this.getAbsoluteSiblings(f[0]),d=new g,h=a.length-1;0<=h;h--){var b=a[h];0<=f.indexOf(b)&&d.add(new e(b,k,0))}c.getCommandStack().execute(d)}}},isEnabled:function(c){c=(c=this.fixupContext(c))&&c.getSelection?c.getSelection():[];if(0===c.length||!this.selectionSameParentAllAbsolute(c))return!1;
for(var f=this.getAbsoluteSiblings(c[0]),e=0;e<c.length;e++)if(f.indexOf(c[e])>c.length-1)return!0;return!1}})})},"davinci/ve/actions/MoveForwardAction":function(){define(["dojo/_base/declare","./_ReorderAction","davinci/commands/CompoundCommand","davinci/ve/commands/ReparentCommand"],function(n,m,g,e){return n("davinci.ve.actions.MoveForwardAction",[m],{name:"MoveForward",iconClass:"editActionIcon editMoveForwardIcon",run:function(c){if(c=this.fixupContext(c)){var f=c&&c.getSelection?c.getSelection():
[];if(0!==f.length&&this.selectionSameParentAllAbsoluteAdjacent(f)){for(var k,a=f[0].getParent(),d=a.getChildren(),h=this.getAbsoluteSiblings(f[0]),b=new g,m=f.slice(0),n=0;n<h.length;n++){k=h[n];var r=m.indexOf(k);if(0<=r)m.splice(r,1);else if(0===m.length)break}d=d.indexOf(k)+1;for(m=0;m<h.length;m++)k=h[m],0<=f.indexOf(k)&&b.add(new e(k,a,d));c.getCommandStack().execute(b)}}},isEnabled:function(c){c=(c=this.fixupContext(c))&&c.getSelection?c.getSelection():[];if(0===c.length||!this.selectionSameParentAllAbsoluteAdjacent(c))return!1;
for(var f=this.getAbsoluteSiblings(c[0]),e=0;e<c.length;e++)if(f.indexOf(c[e])<f.length-c.length)return!0;return!1}})})},"davinci/ve/actions/MoveBackwardAction":function(){define(["dojo/_base/declare","./_ReorderAction","davinci/commands/CompoundCommand","davinci/ve/commands/ReparentCommand"],function(n,m,g,e){return n("davinci.ve.actions.MoveBackwardAction",[m],{name:"MoveBackward",iconClass:"editActionIcon editMoveBackwardIcon",run:function(c){if(c=this.fixupContext(c)){var f=c&&c.getSelection?
c.getSelection():[];if(0!==f.length&&this.selectionSameParentAllAbsoluteAdjacent(f)){for(var k,a=f[0].getParent(),d=a.getChildren(),h=this.getAbsoluteSiblings(f[0]),b=new g,m=f.slice(0),n=h.length-1;0<=n;n--){k=h[n];var r=m.indexOf(k);if(0<=r)m.splice(r,1);else if(0===m.length)break}d=d.indexOf(k);for(m=h.length-1;0<=m;m--)k=h[m],0<=f.indexOf(k)&&b.add(new e(k,a,d));c.getCommandStack().execute(b)}}},isEnabled:function(c){c=(c=this.fixupContext(c))&&c.getSelection?c.getSelection():[];if(0===c.length||
!this.selectionSameParentAllAbsoluteAdjacent(c))return!1;for(var f=this.getAbsoluteSiblings(c[0]),e=0;e<c.length;e++)if(f.indexOf(c[e])>c.length-1)return!0;return!1}})})},"davinci/ve/actions/OtherAction":function(){define(["dojo/_base/declare","./_ReorderAction"],function(n,m){return n("davinci.ve.actions.OtherAction",[m],{run:function(g){},isEnabled:function(g){return!0},shouldShow:function(g){return(g=(g=this.fixupContext(g))?g.editor:null)&&"davinci.ve.PageEditor"==g.declaredClass}})})},"davinci/ve/actions/AddState":function(){define("dojo/_base/declare davinci/Runtime davinci/Workbench davinci/ve/States davinci/actions/Action davinci/lang/ve".split(" "),
function(n,m,g,e,c,f){return n("davinci.ve.actions.AddState",[c],{run:function(){var c;m.currentEditor&&m.currentEditor.currentEditor&&m.currentEditor.currentEditor.context&&(c=m.currentEditor.currentEditor.context,(c=e.getFocus(c.rootNode))&&c.stateContainerNode&&(c=new davinci.ve.actions._AddManageStatesWidget({node:c.stateContainerNode}),c._calledBy="AddState",g.showModal(c,f.createNewState,null,null,!0),c.okButton.set("disabled",!0)))}})})},"davinci/ve/actions/RemoveState":function(){define("dojo/_base/declare davinci/Runtime davinci/ve/States davinci/actions/Action davinci/commands/CompoundCommand davinci/ve/commands/AppStateCommand".split(" "),
function(n,m,g,e,c,f){return n("davinci.ve.actions.RemoveState",[e],{run:function(){var e;if(m.currentEditor&&m.currentEditor.currentEditor&&m.currentEditor.currentEditor.context){e=m.currentEditor.currentEditor.context;var a=g.getFocus(e.rootNode);if(a&&a.state&&a.state!==g.NORMAL){var a=a.stateContainerNode,d=davinci.ve.states.getState(a);if(d){var h=new c;h.add(new f({action:"remove",state:d,stateContainerNode:a,context:e}));e.getCommandStack().execute(h)}}}}})})},"davinci/ve/actions/ModifyState":function(){define("dojo/_base/declare dojo/Deferred dojo/_base/connect dijit/_WidgetBase dijit/_TemplatedMixin dijit/_WidgetsInTemplateMixin dijit/popup dijit/focus davinci/ve/States davinci/Runtime davinci/Workbench davinci/actions/Action davinci/lang/ve dijit/lang/_common dojo/text!./templates/ModifyState.html davinci/commands/CompoundCommand davinci/ve/commands/AppStateCommand".split(" "),
function(n,m,g,e,c,f,k,a,d,h,b,p,z,r,w,A,x){var y=null;n("davinci.ve.actions.ModifyStateWidget",[e,c,f],{templateString:w,widgetsInTemplate:!0,veNls:z,commonNls:r,isNormalState:!1,newName:null,oldInitialStateOn:null,postCreate:function(){this._connections=[];dijit.byId("state_rename_tooltip_dialog");y.then(function(){this._statesFocus.state&&this._statesFocus.state!==d.NORMAL||(this.isNormalState=!0);var a=dojo.byId("modify_state_old_name");a&&(this._statesFocus&&this._statesFocus.state&&!this.isNormalState?
a.innerHTML=this._statesFocus.state:(a.innerHTML="\x3ci\x3e"+d.NORMAL+"\x3c/i\x3e",this.renameButton.set("disabled",!0)));this.oldInitialStateOn=a=d.getInitial(this._statesFocus.stateContainerNode)===this._statesFocus.state;this.initialState.set("checked",a);a&&this.isNormalState&&this.initialState.set("disabled",!0);this._dialog.connect(this._dialog,"hide",function(a){this.onClose()}.bind(this));this.okButton.connect(this.okButton,"onClick",dojo.hitch(this,function(a){this.onOk(a)}));this.cancelButton.connect(this.cancelButton,
"onClick",dojo.hitch(this,function(a){this.onCancel(a)}));if(a=dijit.byId("state_rename_tooltip_dialog"))a.connect(a,"onShow",function(a){this.renameStateShowTooltipDialog(a)}.bind(this)),a.connect(a,"onHide",function(a){this.renameStateHideTooltipDialog(a)}.bind(this))}.bind(this))},renameStateShowTooltipDialog:function(b){b=dojo.byId("modify_state_old_name");var d=dojo.byId("state_rename_new_name"),c=dijit.byId("state_rename_new_name");b&&c&&c.set("value",b.innerText);a.focus(d);b=dijit.byId("state_rename_do_it");
d=dijit.byId("state_rename_cancel");b.connect(b,"onMouseDown",function(a){a.stopPropagation()});d.connect(b,"onMouseDown",function(a){a.stopPropagation()});b.connect(b,"onClick",function(a){this.renameStateDoIt(a)}.bind(this));d.connect(d,"onClick",function(a){a=dijit.byId("state_rename_tooltip_dialog");k.close(a)}.bind(this))},renameStateDoIt:function(a){a=dojo.byId("modify_state_old_name");var b=dijit.byId("state_rename_new_name"),b=b?b.get("value"):null,d=dijit.byId("state_rename_tooltip_dialog");
a&&b&&(this.newName=a.innerHTML=b);d&&k.close(d)},renameStateHideTooltipDialog:function(a){},onOk:function(a){if(h.currentEditor&&h.currentEditor.currentEditor&&h.currentEditor.currentEditor.context){a=h.currentEditor.currentEditor.context;var b=d.getFocus(a.rootNode);if(b&&b.stateContainerNode){var c;this.newName&&this.newName!==this._statesFocus.state&&(c=this.newName);var f,e=this.initialState.get("checked");e!==this.oldInitialStateOn&&(f=b.state?b.state:"undefined",f=e?f:null);if(c||f)e=new A,
e.add(new x({action:"modify",state:b.state,stateContainerNode:b.stateContainerNode,context:a,newState:c,initialState:f})),a.getCommandStack().execute(e);this.onClose()}}},onCancel:function(){this.onClose()},onClose:function(a){for(;a=this._connections.pop();)g.disconnect(a)}});return n("davinci.ve.actions.ModifyState",[p],{run:function(){var a;if(h.currentEditor&&h.currentEditor.currentEditor&&h.currentEditor.currentEditor.context&&(a=h.currentEditor.currentEditor.context,a=d.getFocus(a.rootNode))){y=
new m;var c=new davinci.ve.actions.ModifyStateWidget,f=b.showModal(c,z.modifyState);this._dialog=c._dialog=f;c._statesFocus=a;y.resolve()}}})})},"davinci/ve/actions/ManageStates":function(){define("dojo/_base/declare davinci/Runtime davinci/Workbench davinci/ve/actions/ContextAction davinci/ve/States davinci/lang/ve".split(" "),function(n,m,g,e,c,f){return n("davinci.ve.actions.ManageStates",[e],{run:function(){var e;m.currentEditor&&m.currentEditor.currentEditor&&m.currentEditor.currentEditor.context&&
(e=m.currentEditor.currentEditor.context,(e=c.getFocus(e.rootNode))&&e.stateContainerNode&&(e=new davinci.ve.actions._ManageStatesWidget({node:e.stateContainerNode}),e._calledBy="ManageStates",e.okButton.set("label",f.updateLabel),e.updateDialog(),g.showModal(e,f.manageStates,{width:400},null,!0)))},isEnabled:function(c){c=this.fixupContext(c);var a=g.getOpenEditor();return a&&c?"davinci.ve.PageEditor"==a.declaredClass?0<c.getSelection().length:!1:!1},shouldShow:function(c){return(c=(c=this.fixupContext(c))?
c.editor:null)&&"davinci.ve.PageEditor"==c.declaredClass}})})},"davinci/ve/actions/NewWidgetsCurrentState":function(){define("dojo/_base/declare davinci/Runtime davinci/Workbench davinci/ve/States davinci/actions/Action davinci/workbench/Preferences".split(" "),function(n,m,g,e,c,f){return n("davinci.ve.actions.NewWidgetsCurrentState",[c],{run:function(){var c;if(m.currentEditor&&m.currentEditor.currentEditor&&m.currentEditor.currentEditor.context){c=m.currentEditor.currentEditor.context;var a=g.getProject(),
d=f.getPreferences("davinci.ve.editorPrefs",a);d.newWidgetsCurrentState=d.newWidgetsCurrentState?!1:!0;f.savePreferences("davinci.ve.editorPrefs",a,d);e.updateStateIcons(c)}}})})},"davinci/ve/actions/HighlightBaseWidgets":function(){define(["dojo/_base/declare","davinci/Runtime","davinci/Workbench","davinci/actions/Action","davinci/workbench/Preferences"],function(n,m,g,e,c){return n("davinci.ve.actions.HighlightBaseWidgets",[e],{run:function(){var f;if(m.currentEditor&&m.currentEditor.currentEditor&&
m.currentEditor.currentEditor.context){f=m.currentEditor.currentEditor.context;var e=g.getProject(),a=c.getPreferences("davinci.ve.editorPrefs",e);a.highlightBaseWidgets=a.highlightBaseWidgets?!1:!0;c.savePreferences("davinci.ve.editorPrefs",e,a);f.updateFocusAll()}}})})},"davinci/ve/actions/ShowInOutline":function(){define(["dojo/_base/declare","davinci/Runtime","davinci/Workbench","davinci/ve/actions/ContextAction"],function(n,m,g,e){return n("davinci.ve.actions.ManageStates",[e],{run:function(){var c=
m.currentEditor;c&&c.delegate.showInOutline()},isEnabled:function(c){c=this.fixupContext(c);var f=g.getOpenEditor();return f&&c?"davinci.ve.PageEditor"==f.declaredClass?0<c.getSelection().length:!1:!1},shouldShow:function(c){return(c=(c=this.fixupContext(c))?c.editor:null)&&"davinci.ve.PageEditor"==c.declaredClass}})})},"davinci/ve/PageEditor":function(){define("require dojo/_base/declare ../ui/ModelEditor ../Runtime ../commands/CommandStack ../html/ui/HTMLEditor ./VisualEditor ./VisualEditorOutline ./widget ./States ../XPathUtils ../html/HtmlFileXPathAdapter ./utils/GeomUtils xide/mixins/EventedMixin xide/mixins/ReloadMixin xide/utils xide/types xideve/views/BlocksFileEditor xide/widgets/_Widget xide/views/_LayoutMixin xdocker/Docker2 wcDocker/iframe".split(" "),
function(n,m,g,e,c,f,k,a,d,h,b,p,z,r,w,A,x,y,u,q,v){m=m("davinci.ve.PageEditor",[g,u,r,w,q],{_latestSourceMode:"source",_latestLayoutMode:"flow",item:null,delegate:null,template:null,bottomTabContainer:null,textEditorPane:null,didBlockViews:!1,_propCP:null,createTab:function(a,b){var c=x.DOCKER;return this._docker.addTab(a||"DefaultTab",A.mixin({icon:!1,closeable:!0,moveable:!0,tabOrientation:c.TAB.TOP,location:c.DOCK.STACKED},b))},createLayout:function(){},constructor:function(a,b,d,f,e,h){function g(a){setTimeout(function(){var a=
m.getContext();a&&a.frameNode&&$(a.frameNode).css("pointer-events","initial")},a||4E3)}b=x.DOCKER;this.item=d;this.template=e;var m=this;this._commandStack=new c(this);this.savePoint=0;this._docker=v.createDefault(a,{});this.domNode=this._docker.$container[0];this._designCP=this.createTab(null,{title:"Design",icon:"fa-eye"});this._docker.on(x.DOCKER.EVENT.BEGIN_RESIZE,function(a){(a=m.getContext())&&a.frameNode&&$(a.frameNode).css("pointer-events","none");g()});this._docker.on(x.DOCKER.EVENT.MOVE_STARTED,
function(a){(a=m.getContext())&&a.frameNode&&$(a.frameNode).css("pointer-events","none");g()});this._docker.on(x.DOCKER.EVENT.MOVE_ENDED,function(a){g(1)});this._docker.on(x.DOCKER.EVENT.END_RESIZE,function(a){g(1)});this._docker.on(x.DOCKER.EVENT.BEGIN_FLOAT_RESIZE,function(a){a=m.getContext();$(a.frameNode).css("pointer-events","none");g()});this._docker.on(x.DOCKER.EVENT.END_FLOAT_RESIZE,function(a){g(1)});this._designCP.$container[0].domNode=this._designCP.$container[0];this._designCP.domNode=
this._designCP.$container[0];this._designCP.minSize(400,400);this.currentEditor=this.visualEditor=new k(this._designCP.$container[0],this,this.template);this.currentEditor._commandStack=this._commandStack;this.initReload();try{this._propCP=this.createTab(null,{title:"Props",icon:"fa-cogs",tabOrientation:b.TAB.TOP,location:b.TAB.RIGHT,target:this._designCP});this._propCP.maxSize(400);this._propCP.minSize(350);this._propCP.closeable(!1);a=null;h.length?this._srcCP=a=this.createTab(null,{title:"HTML",
icon:"fa-code",tabOrientation:b.TAB.TOP,location:b.TAB.BOTTOM}):console.error("have no editors, ");h=null;try{h=this.htmlEditor=f(a)}catch(J){debugger}this.model=h.model;h._on(x.EVENTS.ON_FILE_CONTENT_CHANGED,function(a){m.delegate.onEditorContentChanged(a)});this._displayMode="design";this._connect(this.visualEditor,"onContentChange","_visualChanged");this.subscribe("/davinci/ui/styleValuesChange",this._stylePropertiesChange);this.subscribe("/davinci/ui/widgetSelected",this._widgetSelectionChange);
this.subscribe("/davinci/ui/selectionChanged",this._modelSelectionChange);this.subscribe("/davinci/ui/editorSelected",this._editorSelected.bind(this));this.subscribe("/davinci/ui/context/loaded",this._contextLoaded.bind(this));this.subscribe("/davinci/ui/deviceChanged",this._deviceChanged.bind(this));this._designCP.getSplitter().pos(.5);setTimeout(function(){m._srcCP.getSplitter().pos(.5);m._propCP.maxSize(500)},1500);this.resize()}catch(J){this.visualEditor._connectCallback(J),console.error("page editor crash : "+
J)}this.add(this._docker)},getPropertyPane:function(){return this._propCP},getDesignPane:function(){return this._designCP},getSourcePane:function(){return this._srcCP},getVisualEditor:function(){return this.visualEditor},getBlocksPane:function(){return this._blocksTab},onSceneBlocksLoaded:function(a,b){if(0!=b.showBlocks&&!this.didBlockViews){this.didBlockViews=!0;var c=a.blockScopes;a=a.ctx;var d=x.DOCKER;this._blocksTab=this.createTab(null,{title:"Blocks",icon:"fa-eye",target:this._srcCP,tabOrientation:d.TAB.TOP,
location:d.DOCK.STACKED});c=c[0];d=this._blocksTab;a=A.addWidget(y,{style:"height:inherit;width:inherit;padding:0px;",ctx:a,pageEditor:this,visualEditor:b,editorContext:this.getContext(),item:{path:c.path,mount:c.mount}},this,d,!0);a.initWithScope(c);d.add(a);this._blockEditor=a;(b=b.getItem())&&this._blockEditor._widgetSelectionChanged({selection:[b]})}},getBlockEditor:function(){return this._blockEditor},setRootElement:function(a){this._rootElement=a},supports:function(a){return a.match(/^palette|properties|style|states|inline-style|MultiPropTarget|propsect_common|propsect_widgetSpecific|propsect_events|propsect_layout|propsect_paddingMargins|propsect_background|propsect_border|propsect_fontsAndText|propsect_shapesSVG$/)},
focus:function(){},_editorSelected:function(a){var b=this.getContext();b&&(this==a.oldEditor&&b.hideFocusAll(),a.editor&&a.editor.editorContainer&&("davinci.ve.PageEditor"==a.editor.declaredClass||"davinci.ve.themeEditor.ThemeEditor"==a.editor.declaredClass)&&this==a.editor&&(a=b.getFlowLayout(),this._updateLayoutDropDownButton(a?"flow":"absolute"),b.clearCachedWidgetBounds()))},_contextLoaded:function(){},_deviceChanged:function(){if(e.currentEditor==this&&this.editorContainer){var a=this.getContext();
a&&a.updateFocusAll&&setTimeout(function(){a.updateFocusAll()},1E3)}},_updateLayoutDropDownButton:function(a){(a=dojo.query(".maqLayoutDropDownButton"))&&a[0]&&dijit.byNode(a[0])},_selectLayout:function(a){this._latestLayoutMode=a;n(["davinci/actions/SelectLayoutAction"],function(b){b=new b;b._changeLayoutCommand(a)});this._updateLayoutDropDownButton(a)},selectLayoutFlow:function(){this._selectLayout("flow")},selectLayoutAbsolute:function(){this._selectLayout("absolute")},getDisplayMode:function(){return this._displayMode},
getSourceDisplayMode:function(){return this._latestSourceMode},_switchDisplayModeSource:function(a){this._latestSourceMode=a;this.switchDisplayMode(a)},switchDisplayModeSource:function(){this._switchDisplayModeSource("source")},switchDisplayModeSplitVertical:function(){this._switchDisplayModeSource("splitVertical")},switchDisplayModeSplitHorizontal:function(){this._switchDisplayModeSource("splitHorizontal")},switchDisplayModeSourceLatest:function(){this.switchDisplayMode(this._latestSourceMode)},
switchDisplayModeDesign:function(){this.switchDisplayMode("design")},switchDisplayMode:function(a){},hidePropertyPane:function(a){this.getPropertyPane()},_modelSelectionChange:function(a){if("source"!=this._displayMode&&n("davinci/Runtime").currentEditor===this&&(this._selectionCssRules=null,a.length&&(a=a[0].model)&&"HTMLElement"==a.elementType&&(a=a.getAttribute("id"))&&"source"!=this._displayMode)){a=d.byId(a,this.visualEditor.context.getDocument());var b=z.getMarginBoxPageCoords(a.domNode);this.getContext().getGlobal().scroll(b.l,
b.t);this.visualEditor.context.select(a)}},_widgetSelectionChange:function(a){!0===a.isFake||!this.visualEditor.context||a&&a.length&&a[0]._edit_context!=this.visualEditor.context||(a=this.visualEditor.context.getSelection())&&a.length&&"design"!=this._displayMode&&this.htmlEditor.selectModel([{model:a[0]._srcElement}])},_stylePropertiesChange:function(a){if(!(a&&a.cascade&&a.cascade._widget&&1==a.cascade._widget.isFake)){this.visualEditor._stylePropertiesChange(a);var b=this.visualEditor.context.getSelection();
if(b&&b[0]&&(b=A.getNode(b[0]))&&b.onChanged)b.onChanged();a=a.cascade._topWidgetDom;$(a).attr("style");this.getContext().updateBackground(a)}},_setDirty:function(){this.setDirty(!0)},setDirty:function(a){if(this.isDirty=a)this.lastModifiedTime=Date.now();this.editorContainer&&this.editorContainer.setDirty(a)},_visualChanged:function(a){this.delegate.shouldUpdateTextEditor()&&(a||this._setDirty(),this.htmlEditor.set("value",this.model.getText(),!0),this.getContext().visualEditorChanged())},_srcChanged:function(){dojo.withDoc(window.document,
function(){this.htmlEditor.isTyping&&(this.visualEditor.skipSave=!0);var a=this.visualEditor.context,b=a&&this._getStatesScenes(a);this.visualEditor.setContent(this.fileName,this.htmlEditor.model);this.editorContainer.updateToolbars();dojo.publish("/davinci/ui/context/pagerebuilt",[a]);b&&this._setStatesScenes(a,b);delete this.visualEditor.skipSave;this._setDirty()},this)},_getStatesScenes:function(a){return[]},_setStatesScenes:function(a,b){},getContext:function(){return this.visualEditor.context},
getOutline:function(){this.outline||(this.outline=new a(this));return this.outline},getPropertiesView:function(){return this.currentEditor.getPropertiesView()},setContent:function(a,b,c){this.fileName=a;this.htmlEditor.setContent(a,b);this.visualEditor.setContent(a,this.htmlEditor.model,c);this._connect(this.htmlEditor.model,"onChange","_themeChange")},_themeChange:function(a){a&&"CSSRule"===a.elementType&&(this.setDirty(!0),this.visualEditor.context.hotModifyCssRule(a))},getDefaultContent:function(){this._isNewFile=
!0;return this.visualEditor.getDefaultContent()},selectModel:function(a,b){this.publishingSelect||b&&this!=b||(b=a&&a[0])&&(b.elementType?this.htmlEditor.selectModel(a):b.model&&b.model.isWidget&&this.visualEditor.context.select(b.model,b.add))},save:function(a){if(this.delegate&&this.delegate.save){var b=this.visualEditor.context.getModel(),c=b.getText();this.delegate.save(this,this.visualEditor,b,c)}else this.savePoint=this._commandStack.getUndoCount(),(b=this.visualEditor.save(a))&&b.then&&b.then(function(b){this.isDirty=
a;this.editorContainer&&this.editorContainer.domNode&&this.editorContainer.setDirty(a)}.bind(this),function(a){})},removeWorkingCopy:function(){},previewInBrowser:function(){this.visualEditor.previewInBrowser()},destroy:function(){this.inherited(arguments);this.visualEditor.destroy();this.htmlEditor.destroy();A.destroy(this.bottomTabContainer)},getText:function(){return this.htmlEditor.getText()},onResize:function(){for(var a=this.getContext(),b=a.getSelection(),c=0;c<b.length;c++)a.select(b[c],0!=
c)},handleKeyEvent:function(a){},getFocusContainerBounds:function(){if("source"==this._displayMode)return{l:0,t:0,w:0,h:0};var a=z.getBorderBoxPageCoords(this._designCP.domNode);a.l-=8;a.t-=8;"none"==(this.visualEditor&&this.visualEditor.getDevice?this.visualEditor.getDevice():"none")?(a.w+="splitVertical"==this._displayMode?8:16,a.h+="splitHorizontal"==this._displayMode?8:16):(a.w+=8,a.h+=8);return a},getCommandStack:function(){return this.getContext().getCommandStack()}});m.__test="asd2f";return m})},
"davinci/ui/ModelEditor":function(){define(["dojo/_base/declare","../Runtime","./TextEditor","../commands/SourceChangeCommand"],function(n,m,g,e){return n(g,{constructor:function(c,f){this.subscribe("/davinci/ui/selectionChanged",this.selectModel)},colorize:function(c){return null},setContent:function(c,f){this.inherited(arguments);this.model.fileName=c;this.model.setText(f)},getHoverText:function(c,f){c=this.convertMouseToLine(c,f);return this.model.findChildAtPosition({startOffset:c.row,endOffset:c.col}).getLabel()},
handleChange:function(c){this.inherited(arguments);var f=this.model.getText(),g=m.currentEditor;g&&g.getCommandStack?(g=g.getCommandStack(),f=new e({model:this.model,oldText:f,newText:c}),g.execute(f)):(this.model.setText(c),dojo.publish("/davinci/ui/modelChanged",[{newModel:this.model}]))},selectModel:function(c,f){this.publishingSelect||f&&this!=f||!c.length||!c[0].model||(c=c[0].model,c.elementType&&(c=this.model.mapPositions(c),this.select(c)))},selectionChange:function(c){var f=this.model.mapPositions(this.model),
f=this.model.endOffset-f.endOffset,f=this.model.findChildAtPosition({startOffset:c.startOffset+f,endOffset:c.endOffset+f-1});c.model=f;if(f!=this._selectedModel)try{this.publishingSelect=!0,dojo.publish("/davinci/ui/selectionChanged",[[c],this])}finally{this.publishingSelect=!1}this._selectedModel=f},getSyntaxPositions:function(c,f){this.model.setText(c);if(this.model.getSyntaxPositions)return this.model.getSyntaxPositions(f).sort(function(c,a){return c.line!=a.line?c.line-a.line:c.col-a.col})},save:function(){this.model.setText(this.getText());
this.inherited(arguments)},getErrors:function(){return this.model.errors||[]}})})},"davinci/ui/TextEditor":function(){define(["dojo/_base/declare","./Editor","../Runtime"],function(n,m,g){return n(m,{constructor:function(e,c){this.subscriptions=[];this._handles=[]},isActiveEditor:function(){return g.currentEditor==this},handleChange:function(e){this.editorContainer&&this.editorContainer.setDirty(!0);this.isDirty=!0;this.lastModifiedTime=Date.now()},_onKey:function(e){davinci.Workbench.currentContext=
this.editorID;return davinci.Workbench.handleKey(e)},subscribe:function(e,c){this.subscriptions.push(dojo.subscribe(e,this,c))},destroy:function(){this.inherited(arguments);this.subscriptions.forEach(dojo.unsubscribe);this._handles.forEach(dojo.disconnect)},getDefaultContent:function(){return null},getErrors:function(){return[]},save:function(e){var c=this.getText();if(this.resourceFile){this.resourceFile.clearMarkers();for(var f=this.getErrors(),g=0;g<f.length;g++){var a;switch(f[g].id){case "(error)":a=
"error";break;case "(warning)":a="warning"}a&&this.resourceFile.addMarker(a,f[g].line+1,f[g].reason)}this.resourceFile.setContents(c,e);this.editorContainer&&this.editorContainer.setDirty(e);this.isDirty=!1;this.lastModifiedTime=0}},supports:function(e){return!1},_connect:function(e,c,f){this._handles.push(dojo.connect(e,c,this,f))}})})},"davinci/ui/Editor":function(){define(["../commands/CommandStack","dojo/_base/declare"],function(n,m,g){var e=function(c){this._progSelect||this.selectionChange({startOffset:c.newValue.start,
endOffset:c.newValue.end})};return m(null,{constructor:function(c,f,e){this.contentDiv=c;this.commandStack=new n;this._existWhenVisible=e;this._isVisible=!e},setContent:function(c,f){this.editor||this._existWhenVisible&&!this._isVisible||this._createEditor();this._textModel||(this._textModel=this.editor?this.editor.getModel():new mProjectionTextModel.ProjectionTextModel(new mTextModel.TextModel));this.fileName=c;this.setValue(f,!0);this._textModel&&(dojo.disconnect(this._textModelConnection),this._textModelConnection=
dojo.connect(this._textModel,"onChanged",this,onTextChanged))},setVisible:function(c){c!=this._isVisible&&this._existWhenVisible&&(c&&this._existWhenVisible?(this._createEditor(),this._updateStyler()):(this.editor.getTextView().removeEventListener("Selection",dojo.hitch(this,e)),delete this.editor));this._isVisible=c},setValue:function(c,f){this._dontNotifyChange=f;this.editor?this.editor.setText(c):this._textModel.setText(c)},_createEditor:function(){},_updateStyler:function(){},selectionChange:function(c){},
destroy:function(){},select:function(c){if(this.editor)try{this._progSelect=!0,this.editor.setSelection(c.endOffset,c.startOffset)}finally{delete this._progSelect}},getText:function(){return this._textModel.getText(0)},getOnUnloadWarningMessage:function(){return null}})})},"davinci/commands/SourceChangeCommand":function(){define(["dojo/_base/declare","davinci/Runtime"],function(n,m){return n("davinci.commands.SourceChangeCommand",null,{name:"SourceChange",constructor:function(g){this._model=g.model;
this._oldText=g.oldText;this._newText=g.newText},incrementalUpdate:function(g){this._newText=g.newText},execute:function(){this._model.setText(this._newText);dojo.publish("/davinci/ui/modelChanged",[{newModel:this._model}]);var g=m.currentEditor;"davinci.ve.PageEditor"==g.declaredClass&&g.handleChange&&require(["davinci/ve/PageEditor"],function(e){e.prototype._srcChanged.call(g,this._newText)}.bind(this));if(!this.established)return this.established=!0},undo:function(){this._model.setText(this._oldText);
dojo.publish("/davinci/ui/modelChanged",[{newModel:this._model}]);var g=m.currentEditor;"davinci.ve.PageEditor"==g.declaredClass&&g.handleChange&&require(["davinci/ve/PageEditor"],function(e){e.prototype._srcChanged.call(g,this._oldText)}.bind(this))}})})},"davinci/html/ui/HTMLEditor":function(){define(["dojo/_base/declare","davinci/ui/ModelEditor","davinci/model/Factory","davinci/html/ui/HTMLOutline"],function(n,m,g,e){return n("davinci.html.ui.HTMLEditor",m,{constructor:function(c,f){this.model=
this.htmlFile=g.getModel({url:f});this._handle=dojo.connect(this.htmlFile.getDocumentElement(),"onkeydown",this,"onKeyDown")},destroy:function(){this.htmlFile.close();dojo.disconnect(this._handle);this.inherited(arguments)},getOutline:function(){this.outline||(this.outline=new e(this.model));return this.outline},getDefaultContent:function(){return"\x3chtml\x3e\n \x3chead\x3e\x3c/head\x3e\n \x3cbody\x3e\x3c/body\x3e\n\x3c/html\x3e"},onKeyDown:function(c){}})})},"davinci/model/Factory":function(){define(["../html/CSSFile",
"../js/JSFile","../html/HTMLFile","system/resource"],function(n,m,g,e){var c=[],f=[],k={getModel:function(a){var d=a.url;if(!d)return null;for(var e=0;e<f.length;e++)if(f[e].url==d)return c[e]++,this.incrementImports(f[e]),f[e];if(/\.html?$/i.test(d)||/\.cfhtml?$/i.test(d))return k.newHTML(a);if(/\.css$/i.test(d))return k.newCSS(a);if(/\.js$/i.test(d))return k.newJS(a)},closeModel:function(a){a=a.url;if(!a)return null;for(var d=0;d<f.length;d++)f[d].url==a&&(c[d]--,0===c[d]&&(f.splice(d,1),c.splice(d,
1)))},newHTML:function(a){a=new g(a.url);f.push(a);c[f.length-1]=1;return a},newCSS:function(a){a=new n(a);f.push(a);c[f.length-1]=1;return a},newJS:function(a){a=new m(a);f.push(a);c[f.length-1]=1;return a},getNewFromResource:function(a){a=a.extension;if(!a)return new g;switch(a){case "html":return new g;case "css":return new n;case "js":case "json":return new m;default:return new g}},incrementImports:function(a){var d={visit:function(a){if("CSSImport"==a.elementType){a=a.cssFile.url;for(var b=0;b<
f.length;b++)f[b].url==a&&c[b]++}return!1}};a&&a.visit(d)},log:function(){for(var a=0;a<f.length;a++);}};require(["dojo/_base/connect"],function(a){a.subscribe("davinci/model/closeModel",k,k.closeModel)});return k})},"davinci/html/CSSFile":function(){define("dojo/_base/declare dojo/_base/lang davinci/html/CSSElement davinci/html/CSSRule davinci/html/CSSSelector system/resource davinci/Workbench".split(" "),function(n,m,g,e,c,f,k){return n("davinci.html.CSSFile",g,{constructor:function(a){this.elementType=
"CSSFile";m.mixin(this,a);this.options||(this.options={xmode:"style",css:!0,expandShorthand:!1});a=null;this.url&&this.loader?a=this.loader(this.url):this.url&&"app.css"===this.url&&this.setText("BODY {background-color: red!important;}");a&&this.setText(a)},save:function(a){return f.findResourceAsync(this.url).then(function(c){return c.setContents(this.getText(),a)}.bind(this))},close:function(){this.visit({visit:function(a){"CSSImport"==a.elementType&&a.close()}});require(["dojo/_base/connect"],
function(a){a.publish("davinci/model/closeModel",[this])})},addRule:function(a){var c=new e;c.setText(a);this.addChild(c);this.setDirty(!0);return c},setText:function(a){var c=this.children;this.children=[];this.errors=require("davinci/html/CSSParser").parse(a,this).errors;0<this.errors.length&&this.errors[this.errors.length-1].isException&&(this.children=c);this.includeImports&&this.children.forEach(function(a){"CSSImport"==a.elementType&&a.load()});this.onChange()},getText:function(a){a=a||{};a.indent=
0;return this.children.map(function(c){return c.getText(a)}).join("")},getCSSFile:function(){return this},getID:function(){return this.fileName},getMatchingRules:function(a,c,f){a=this._convertNode(a);c=c||[];f=f||[];for(var b=0;b<this.children.length;b++){var d=this.children[b];if("CSSRule"==d.elementType){var e=d.matches(a);if(e){for(var g=!1,h=0;h<f.length;h++)if(e>=f[h]){c.splice(h,0,d);f.splice(h,0,e);g=!0;break}g||(c.splice(0,0,d),f.splice(0,0,e))}}else"CSSImport"==d.elementType&&d.cssFile&&
d.cssFile.getMatchingRules(a,c,f)}return c},getRule:function(a){var d;if(!a)return[];a=c.parseSelectors(a);for(var f=0;f<this.children.length;f++){var b=this.children[f];if("CSSRule"==b.elementType){if(b.matchesSelectors(a)){d=b;break}}else"CSSImport"==b.elementType&&b.cssFile&&(d=b.cssFile.getRule(a)||d)}return d},getRules:function(a){a=c.parseSelectors(a);for(var d=[],f=0;f<this.children.length;f++){var b=this.children[f];"CSSRule"==b.elementType?b.matchesSelectors(a)&&d.push(b):"CSSImport"==b.elementType&&
b.cssFile&&(d=d.concat(b.cssFile.getRules(a)))}return d},getStyleValue:function(a,c){var d=[],b=[];c=this._convertNode(c);this.getMatchingRules(c,d,b);"string"==typeof a&&(a=[a]);return a.map(function(a){for(var c=0,f,e,g=0;g<d.length;g++)(e=d[g].getProperty(a))&&b[g]>c&&(f=e,c=b[g]);return f})}})})},"davinci/html/CSSElement":function(){define(["dojo/_base/declare","davinci/model/Model"],function(n,m){return n("davinci.html.CSSElement",m,{constructor:function(){"undefined"!=typeof pushComment&&null!==
pushComment&&(this.comment=pushComment,pushComment=null);this.elementType="CSSElement"},getLabel:function(){context={indent:0,noComments:!0};return this.getText(context)},onChange:function(g){if(this.parent)if(g)this.parent.onChange(g);else this.parent.onChange(this)},close:function(g){for(g=0;g<this.children;g++)this.children[g].close()},getCSSFile:function(){var g=this.getCSSRule();if(g)return g.parent},getCSSRule:function(){},_convertNode:function(g){if(dojo.isArray(g))return g;for(var e=[];g&&
"HTML"!=g.tagName;)e.push({tagName:g.tagName,id:g.id,classes:g.className&&g.className.split(" ")}),g=g.parentNode;return e},getID:function(){return this.parent.getID()+":"+this.startOffset+":"+this.getLabel()}})})},"davinci/html/CSSRule":function(){define(["dojo/_base/declare","davinci/html/CSSElement","davinci/html/CSSParser","davinci/html/CSSProperty"],function(n,m,g,e){return n("davinci.html.CSSRule",m,{constructor:function(){this.elementType="CSSRule";this.selectors=[];this.properties=[]},getText:function(c){var f=
"";c=c||[];this.comment&&!c.noComments&&(f+=this.comment.getText(c));for(var f=f+this.getSelectorText(c),f=f+" {",e=0;e<this.properties.length;e++)f=f+"\n    "+this.properties[e].getText(c);f+="\n}\n";this.postComment&&!c.noComments&&(f+=this.postComment.getText(c));return f},setText:function(c){require("davinci/html/CSSParser").parse(c,this);dojo.mixin(this,this.children[0]);this.startOffset=(this.parent?this.parent.endOffset:0)+1;this.setDirty(!0)},addProperty:function(c,f){c=new e(c,f,this);this.properties.push(c);
this.setDirty(!0);this.onChange()},insertProperty:function(c,f,g){var a;(a=this.getProperty(c))&&this.removeProperty(c);a=new e(c,f,this);this.properties.splice(g,0,a);this.setDirty(!0);this.onChange()},getSelectorText:function(c){for(var f="",e=0;e<this.selectors.length;e++)0<e&&(f+=", "),f+=this.selectors[e].getText(c);return f},matches:function(c){c=this._convertNode(c);for(var f,e=0;e<this.selectors.length;e++)if(0<=(f=this.selectors[e].matches(c)))return f},visit:function(c){if(!c.visit(this)){for(var f=
0;f<this.children.length;f++)this.children[f].visit(c);for(f=0;f<this.selectors.length;f++)this.selectors[f].visit(c)}c.endVisit&&c.endVisit(this)},hasSelector:function(c){for(var f=0;f<this.selectors.length;f++)if(this.selectors[f].getLabel()==c)return!0;return!1},matchesSelectors:function(c){for(var f=0;f<c.length;f++)for(var e=0;e<this.selectors.length;e++)if(this.selectors[e].matchesSelector(c[f]))return!0;return!1},getCSSRule:function(){return this},getLabel:function(){return this.getSelectorText({})},
getProperty:function(c){for(var f=0;f<this.properties.length;f++)if(c==this.properties[f].name)return this.properties[f]},hasProperty:function(c){for(var f=0;f<this.properties.length;f++)if(c==this.properties[f].name)return!0},getProperties:function(c){for(var f=[],e=0;e<this.properties.length;e++)c&&c!=this.properties[e].name||f.push(this.properties[e]);return f},setProperty:function(c,f){var g=this.getProperty(c);f?g?g.value=f:(g=new e,g.name=c,g.value=f,this.properties.push(g),g.parent=this):this.removeProperty(c);
this.setDirty(!0);this.onChange()},removeProperty:function(c){for(var f=0;f<this.properties.length;f++)c==this.properties[f].name&&this.properties.splice(f,1);this.setDirty(!0);this.onChange()},removeAllProperties:function(){this.properties=[];this.setDirty(!0);this.onChange()},removeStyleValues:function(c){for(var f=[],e=0;e<this.properties.length;e++){for(var a,d=0;d<c.length&&!a;d++)a=c[d]==this.properties[e].name;a||(f=this.properties[e])}this.properties=f;this.setDirty(!0);this.onChange()}})})},
"davinci/html/CSSParser":function(){define("dojo/_base/declare davinci/html/CSSSelector davinci/html/CSSCombinedSelector davinci/html/CSSRule davinci/html/CSSProperty davinci/html/CSSAtRule davinci/html/CSSImport davinci/model/parser/Tokenizer davinci/model/Comment".split(" "),function(n,m,g,e,c,f,k,a,d){var h=null,b=function(){function b(a,b,c){return function(d){return!a||/^\}/.test(d)?c:b?c+2*indentUnit:c+indentUnit}}var c=function(){function b(a,b){var e=a.next();if("@"==e)return a.nextWhileMatches(/[a-zA-Z0-9_-]/),
"css-at";if("/"==e&&a.equals("*"))return b(c),null;if("\x3c"==e&&a.equals("!"))return b(d),null;if("\x3d"==e)return"css-compare";if(!a.equals("\x3d")||"~"!=e&&"|"!=e){if('"'==e||"'"==e)return b(f(e)),null;if("#"==e)return a.nextWhileMatches(/[\w-]/),"css-hash";if("!"==e)return a.nextWhileMatches(/[ \t]/),a.nextWhileMatches(/\w/),"css-important";if(/\d/.test(e))return a.nextWhileMatches(/[\w.%]/),"css-unit";if(/[,.+>*\/]/.test(e))return"css-select-op";if(/[;{}:\[\]]/.test(e))return"css-punctuation";
a.nextWhileMatches(/[\w\\\-_]/);return"css-identifier"}a.next();return"css-compare"}function c(a,c){for(var d=!1;!a.endOfLine();){var f=a.next();if(d&&"/"==f){c(b);break}d="*"==f}return"css-comment"}function d(a,c){for(var d=0;!a.endOfLine();){var f=a.next();if(2<=d&&"\x3e"==f){c(b);break}d="-"==f?d+1:0}return"css-comment"}function f(a){return function(c,d){for(var f=!1;!c.endOfLine();){var e=c.next();if(e==a&&!f)break;f=!f&&"\\"==e}f||d(b);return"css-string"}}return function(c,d){return a.tokenizer(c,
d||b)}}();return{make:function(a,d){d=d||0;var f=c(a),e=!1,g=!1,h=!1,k={next:function(){var a=f.next(),c=a.style,k=a.content;"css-hash"==c&&(c=a.style=g?"css-colorcode":"css-identifier");"css-identifier"==c&&(g?a.style="css-value":e||h||(a.style="css-selector"));"\n"==k&&(a.indentation=b(e,g,d));"{"==k&&"@media"==h?h=!1:"{"==k?e=!0:"}"==k?e=g=h=!1:";"==k?g=h=!1:e&&"css-comment"!=c&&"whitespace"!=c?g=!0:e||"css-at"!=c||(h=k);return a},copy:function(){var a=e,b=g,d=f.state;return function(h){f=c(h,
d);e=a;g=b;return k}}};return k},electricChars:"}"}}();b.parse=function(p,n){function r(){var a;q=u.next();for(var b=!1;"css-comment"==q.style||"whitespace"==q.style;){if("css-comment"==q.style||b)h||(h=new d),a=q.content,0===q.content.indexOf("/*")&&(a=a.substring(2),b=!0,h.addComment("block",void 0,void 0,"")),-1<a.lastIndexOf("*/")&&a.lastIndexOf("*/")==a.length-2&&(a=a.substring(0,a.length-2),b=!1),h.appendComment(a);q=u.next()}return q}function z(){v=new m;v.startOffset=q.offset;v.parent=C;B?
(B.selectors.push(v),v.parent=B):C.selectors.push(v)}function A(){var a=v;a.endOffset=q.offset-1;B||(B=new g,B.parent=C,B.selectors.push(a),v.startOffset=a.startOffset,C.selectors[C.selectors.length-1]=B);z();B.combiners.push(I);I=" "}var x,y;"string"==typeof p?x=a.stringStream({next:function(){if(1==++this.count)return p;throw StopIteration;},count:0,text:p}):(x=p,y=!0);var u=b.make(x),q,v,B,I=" ",D=[],F=[],C,E;try{do switch(r(),q.style){case "css-selector":case "css-select-op":if(y&&"\x3c"==q.content)throw x.push("\x3c"),
StopIteration;C=new e;F.push(C);C.startOffset=q.offset;n&&n.addChild(C,void 0,!0);E=!1;B=void 0;I=" ";z();a:for(;;){switch(q.style){case "css-select-op":switch(q.content){case ",":B=void 0;z();break;case ".":E&&A();r();v.cls=v.cls?v.cls+"."+q.content:q.content;E=q.value.length>q.content.length;break;case "*":(v.element||v.cls)&&A();v.element="*";break;case "+":case "\x3e":I=q.content,A()}break;case "css-selector":"css-identifier"==q.type?((v.element||v.cls||E)&&A(),v.element=q.content):"css-hash"==
q.type&&((v.id||E)&&A(),v.id=q.content.substring(1));E=q.value.length>q.content.length;break;case "css-punctuation":if("{"==q.content)break a;else":"==q.content?(r(),":"==q.content?(r(),v.pseudoElement=q.content):(v.pseudoRule=q.content,E=!0)):"["==q.content&&(r(),v.attribute={name:q.content},r(),"\x3d"===q.content||"~\x3d"===q.content||"|\x3d"===q.content)&&(v.attribute.type=q.content,r(),v.attribute.value=q.content.substring(1,q.content.length-1),r())}r()}h&&(C.comment=h,h=null);for(v.endOffset=
q.offset-1;"}"!=r().content;){var M=q.offset,G=q.content,J=!1;"css-hash"==q.type?(r(),"css-identifier"==q.type?G+=q.content:J=!0):"css-identifier"!=q.type&&("*"!=q.content?D.push("expecting identifier around "+v.getText()+"{ "+H.name+": "+propery.value):(r(),G+=q.content));var H=new c;H.startOffset=M;H.parent=C;h&&(H.comment=h,h=null);C.properties.push(H);C.addChild(H,void 0,!0);H.name=G;J||":"!=r().content&&D.push("expecting ':' "+v.getText()+"{ "+H.name+": "+propery.value);r();H.value=q.value;if("url"==
H.value){for(;")"!=r().content;)H.value+=q.value;H.value+=q.value}for(;";"!=r().content&&"}"!=q.content;)H.value+=q.value;h&&(H.postComment=h,h=null);H.endOffset=q.offset-1;if("}"==q.content)break}h&&(H.postComment=h,h=null);C.endOffset=q.offset;break;case "css-at":var K=q.content.substring(1),L="import"==K?new k:new f;L.startOffset=q.offset;n&&n.addChild(L,void 0,!0);if("import"==K)J=L,r(),"url"==q.content&&(J.isURL=!0,r(),r()),J.url=q.content.substring(1,q.content.length-1),J.isURL&&r(),r();else if(0<=
K.indexOf("keyframes")){var O=J="",Q=!1,P="\t\t";r();J=q.content;"."==J&&(r(),J+=q.content);r();L.value=q.content+"\n";r();if(0<=q.content.indexOf("from")||0<=q.content.indexOf("to")||0<=q.content.indexOf("%"))a:for(;;){L.value+="\t"+q.content+" ";r();for(L.value+=q.content+"\n";"}"!=r().content;){Q&&(P="\t\t",Q=!1);if(";"==q.content)O="\n",Q=!0;else if(":"==q.content||")"==q.content)O=" ";L.value+=P+q.content+O;P=O=""}L.value+="\t"+q.content+"\n";r();if("}"==q.content)break a}else D.push("inside keyframes decl expecting from/to blocks or nn% blocks");
L.value+=q.content;L.name=K+" "+J}else for(L.name=K,L.value="";";"!=r().content;)L.value+=q.content;L.endOffset=q.offset}while(1)}catch(N){h&&C&&(C.postComment=h,h=null)}return{errors:D,model:F}};return b})},"davinci/html/CSSSelector":function(){define(["require","dojo/_base/declare","davinci/html/CSSElement"],function(n,m,g){m=m("davinci.html.CSSSelector",g,{constructor:function(){this.elementType="CSSSelector"},matchesSelector:function(e){if(e.elementType==this.elementType&&this.id==e.id&&this.cls==
e.cls&&this.element==e.element&&this.pseudoRule==e.pseudoRule)return!0},getText:function(e){e="";this.element&&(e+=this.element);this.id&&(e=e+"#"+this.id);this.cls&&(e=e+"."+this.cls);this.pseudoRule&&(e=e+":"+this.pseudoRule);this.pseudoElement&&(e=e+"::"+this.pseudoElement);this.attribute&&(e=e+"["+this.attribute.name,this.attribute.type&&(e=e+this.attribute.type+'"'+this.attribute.value+'"'),e+="]");return e},matches:function(e,c){c=e[c||0];e=0;var f=!1;if(this.id){if(this.id!=c.id)return-1;e+=
100;f=!0}if(this.element){if("*"!=this.element){if(this.element!=c.tagName&&this.element.toUpperCase()!=c.tagName)return-1;e+=1}f=!0}if(this.cls&&c.classes){c=c.classes;if(0<=this.cls.indexOf(".")){for(var f=this.cls.split("."),g=0;g<f.length;g++){for(var a=!1,d=0;d<c.length&&!(a=c[d]==f[g]);d++);if(!a)return-1}e+=10*f.length}else{a=!1;for(d=0;d<c.length&&!(a=c[d]==this.cls&&!this.pseudoRule);d++);if(!a)return-1;e+=10}f=!0}return f?e:-1},getCSSRule:function(){return"CSSRule"==this.parent.elementType?
this.parent:this.parent.parent}});m.parseSelectors=function(e){if("string"==typeof e){e+="{}";var c=new (n("davinci/html/CSSFile"));c.setText(e);return c.children[0].selectors}return e};return m})},"davinci/html/CSSCombinedSelector":function(){define(["dojo/_base/declare","davinci/html/CSSElement"],function(n,m){return n("davinci.html.CSSCombinedSelector",m,{constructor:function(){this.selectors=[];this.combiners=[];this.elementType="CSSCombinedSelector"},matchesSelector:function(g){if(g.elementType==
this.elementType&&g.selectors.length==this.selectors.length){for(var e=0;e<this.selectors.length;e++)if(this.combiners[e]!=g.combiners[e]||!this.selectors[e].matchesSelector(g.selectors[e]))return!1;return!0}},getText:function(g){for(var e="",c=0;c<this.selectors.length-1;c++)e+=this.selectors[c].getText(g),e=" "!=this.combiners[c]?e+(" "+this.combiners[c]+" "):e+this.combiners[c];return e+=this.selectors[this.selectors.length-1].getText(g)},matches:function(g){for(var e=this.selectors.length-1,c=
0,f=0;f<g.length;f++){var k;if(0<=(k=this.selectors[e].matches(g,f))&&(c+=k,e--,0>e))return c;if(0==f&&0>k)return-1}},visit:function(g){if(!g.visit(this)){for(var e=0;e<this.children.length;e++)this.children[e].visit(g);for(e=0;e<this.selectors.length;e++)this.selectors[e].visit(g)}g.endVisit&&g.endVisit(this)},getCSSRule:function(){return this.parent}})})},"davinci/html/CSSProperty":function(){define(["dojo/_base/declare","davinci/html/CSSElement"],function(n,m){return n("davinci.html.CSSProperty",
m,{constructor:function(g,e,c){this.elementType="CSSProperty";this.name=g||"";this.value=e||"";this.parent=c;this.expanded=[];this.lengthValues=[]},getValue:function(){return this.value},getText:function(g){var e="";this.comment&&!g.noComments&&(e+="\n  "+this.comment.getText(g));e+=this.name+" : "+this.value;this.isNotImportant&&(e+=" !important");e+=";";this.postComment&&!g.noComments&&(e+=this.postComment.getText(g));return e},getCSSRule:function(){return this.parent},addProperty:function(g,e){g=
new CSSProperty(g,e,this);this.properties.push(g)},getURL:function(){if(this.url){var g=new davinci.model.Path(this.getCSSFile().url),g=g.getParentPath().append(this.url);return g.toString()}}})})},"davinci/html/CSSAtRule":function(){define(["dojo/_base/declare","davinci/html/CSSElement"],function(n,m){return n("davinci.html.CSSAtRule",m,{constructor:function(){this.elementType="CSSAtRule"},getCSSFile:function(){return this.parent},getText:function(g){s="@";return s=s+this.name+" "+this.value+"\n"}})})},
"davinci/html/CSSImport":function(){define(["dojo/_base/declare","davinci/html/CSSElement","davinci/model/Path","davinci/html/CSSFile"],function(n,m,g,e){return n("davinci.html.CSSImport",m,{constructor:function(){this.elementType="CSSImport"},getCSSFile:function(){return this.parent},setUrl:function(c){this.url=c},visit:function(c){if(!c.visit(this)){for(var f=0;f<this.children.length;f++)this.children[f].visit(c);this.cssFile&&this.cssFile.visit(c)}c.endVisit&&c.endVisit(this)},getText:function(c){s=
"@import ";return s=this.isURL?s+('url("'+this.url+'");'):s+('"'+this.url+'";')},close:function(c){require("davinci/model/Factory").closeModel(this.cssFile);this.connection&&dojo.disconnect(this.connection);delete this.connection},load:function(c){for(var f=this.parent;f&&!f.url&&!f.fileName;)f=f.parent;f=new g(f.url||f.fileName);f=f.getParentPath().append(this.url);f=f.toString();this.cssFile=require("davinci/model/Factory").getModel({url:f,loader:this.parent.loader,includeImports:this.parent.includeImports||
c});this.cssFile.relativeURL=this.url;this.connection=dojo.connect(this.cssFile,"onChange",this.parent,"onChange")}})})},"davinci/model/parser/Tokenizer":function(){define(["dojo/_base/declare","davinci/js/JSExpression"],function(n,m){return{stringStream:function(g){function e(){for(;f==c.length;){a+=c;c="";f=0;try{c=g.next()}catch(d){if(d!=StopIteration)throw d;return!1}}return!0}var c="",f=0,k=0,a="";return{peek:function(){return e()?c.charAt(f):null},next:function(){if(!e()){if(0<a.length)throw"End of stringstream reached without emptying buffer ('"+
a+"').";throw StopIteration;}return c.charAt(f++)},get:function(){var d=a;a="";0<f&&(d+=c.slice(0,f),c=c.slice(f),f=0);k+=d.length;return d},getOffset:function(){return k},push:function(a){c=c.slice(0,f)+a+c.slice(f);k-=a.length},lookAhead:function(d,e,b,k){function h(a){return k?a.toLowerCase():a}d=h(d);var m=!1,p=a,n=f;for(b&&this.nextWhileMatches(/[\s\u00a0]/);;){b=f+d.length;var x=c.length-f;if(b<=c.length){m=d==h(c.slice(f,b));f=b;break}else if(d.slice(0,x)==h(c.slice(f))){a+=c;c="";try{c=g.next()}catch(y){if(y!=
StopIteration)throw y;break}f=0;d=d.slice(x)}else break}m&&e||(c=a.slice(p.length)+c,f=n,a=p);return m},lookAheadRegex:function(a,e){if("^"!=a.source.charAt(0))throw Error("Regexps passed to lookAheadRegex must start with ^");for(;-1==c.indexOf("\n",f);)try{c+=g.next()}catch(b){if(b!=StopIteration)throw b;}(a=c.slice(f).match(a))&&e&&(f+=a[0].length);return a},more:function(){return null!==this.peek()},applies:function(a){var c=this.peek();return null!==c&&a(c)},nextWhile:function(a){for(var c;null!==
(c=this.peek())&&a(c);)this.next()},matches:function(a){var c=this.peek();return null!==c&&a.test(c)},nextWhileMatches:function(a){for(var c;null!==(c=this.peek())&&a.test(c);)this.next()},equals:function(a){return a===this.peek()},endOfLine:function(){var a=this.peek();return null==a||"\n"==a}}},tokenizer:function(g,e){function c(c){return"\n"!=c&&/^[\s\u00a0]*$/.test(c)}var f={state:e,take:function(f){"string"==typeof f&&(f={style:f,type:f});f.offset=g.getOffset();f.content=(f.content||"")+g.get();
/\n$/.test(f.content)||g.nextWhile(c);f.value=f.content+g.get();return f},next:function(){if(!g.more())throw StopIteration;var e;if(g.equals("\n"))return g.next(),this.take("whitespace");if(g.applies(c))e="whitespace";else for(;!e;)e=this.state(g,function(a){f.state=a});return this.take(e)}};return f}}})},"davinci/js/JSExpression":function(){define(["dojo/_base/declare","davinci/js/JSElement"],function(n,m){return n("davinci.js.JSExpression",m,{constructor:function(){this.elementType="JSExpression"},
getText:function(){var g="";this.comment&&(g+=this.printNewLine(context)+this.comment.getText(context));this.label&&(g+=this.printNewLine(context)+this.label.getText(context));return g},add:function(g){}})})},"davinci/js/JSElement":function(){define(["dojo/_base/declare","davinci/js/JSModel"],function(n,m){var g=null,e=null;return n("davinci.js.JSElement",m,{constructor:function(){this.elementType="JSElement";null!==g&&(this.comment=g,g=null);null!==e&&(this.label=e,e=null)},printNewLine:function(c){for(var f=
"\n",e=0;e<c.indent;e++)f+=" ";return f},printStatement:function(c,f){return this.printNewLine(c)+f.getText(c)+(f.nosemicolon?"":";")},add:function(c){this.addChild(c)},init:function(c,f,e){},getLabel:function(){context={indent:0};return this.getText(context)},getID:function(){return this.parent.getID()+":"+this.startLine+":"+this.getLabel()},getSyntaxPositions:function(c){function f(d,f,b,e){"undefined"!=typeof c&&c!=d||a.push({line:d,col:f,length:b,type:e})}function e(d,f,b){"undefined"!=typeof c&&
c!=d[0]||a.push({line:d[0],col:d[1],length:f,type:b})}var a=[];this.visit({visit:function(a){"JSFunction"==a.elementType?(f(a.startLine,a.startCol,8,"keyword"),e(a.leftParenPos,1,"delimiter"),e(a.rightParenPos,1,"delimiter"),e(a.leftBracePos,1,"delimiter"),e(a.rightBracePos,1,"delimiter")):"JSVariableDeclaration"==a.elementType?f(a.startLine,a.startCol,3,"keyword"):"JSVariableFragment"==a.elementType?a.equalPos?e(a.equalPos,1,"operator"):f(a.startLine,a.startCol,1,"name"):"JSNameReference"==a.elementType&&
f(a.startLine,a.startCol,a.endCol-a.startCol,"name")},endVisit:function(a){return!0}});return a}})})},"davinci/js/JSModel":function(){define(["dojo/_base/declare","davinci/model/Model"],function(n,m){davinci.js||(davinci.js={});return n("davinci.js.JSModel",m,{})})},"davinci/model/Comment":function(){define(["dojo/_base/declare","davinci/model/Model"],function(n,m){return n("davinci.model.Comment",m,{constructor:function(){this.elementType="Comment";this.nosemicolon=!0},addComment:function(g,e,c,
f){null==this.comments&&(this.comments=[]);this.comments[this.comments.length]={commentType:g,start:e,stop:c,s:f}},appendComment:function(g){var e=this.comments[this.comments.length-1];e.s+=g;e.stop+=g.length},getText:function(g){g="";for(var e=0;e<this.comments.length;e++)"line"==this.comments[e].commentType?g+="//"+this.comments[e].s+"\n":"block"==this.comments[e].commentType&&(g+="/*"+this.comments[e].s+"*/\n");return g}})})},"davinci/js/JSFile":function(){define(["dojo/_base/declare","davinci/js/JSElement"],
function(n,m){return n("davinci.js.JSFile",m,{constructor:function(g){this.elementType="JSFile";this.nosemicolon=!0;this._textContent="";g&&(this.origin=g)},getText:function(g){return this._textContent},setText:function(g){this._textContent=g},getLabel:function(){return this.fileName},getID:function(){return this.fileName},visit:function(g){if(!g.visit(this))for(var e=0;e<this.children.length;e++)this.children[e].visit(g);g.endVisit&&g.endVisit(this)}})})},"davinci/html/HTMLFile":function(){define("dojo/_base/declare davinci/html/HTMLItem davinci/html/HTMLParser davinci/html/CSSSelector davinci/html/HTMLElement davinci/html/CSSImport davinci/html/CSSFile davinci/model/Model davinci/model/Path".split(" "),
function(n,m,g,e,c,f,k,a,d){return n("davinci.html.HTMLFile",m,{constructor:function(a){this.url=this.fileName=a;this.elementType="HTMLFile";this._loadedCSS={};this._styleElem=null},save:function(a){var b,c=system.resource.findResource(this.fileName);this.getText();c?(b=this.getText(),b=c.setContents(b,a)):console.error("couldnt find file in resources : "+this.fileName);return b},getText:function(a){a=a||{};a.indent=0;for(var b="",c=0;c<this.children.length;c++){var d=this.children[c],b=b+d.getText(a);
"HTMLComment"==d.elementType&&(b+=this._addWS(d._fmLine,d._fmIndent))}return b},getDocumentElement:function(a){for(a=0;a<this.children.length;a++)if("html"==this.children[a].tag)return this.children[a]},findElement:function(a){var b=this.getDocumentElement();if(b)return b.findElement(a)},getMatchingRules:function(a,b){var c={visit:function(b){if("CSSFile"==b.elementType){var c=[];b=b.getMatchingRules(a,[],c);for(var d=0;d<b.length;d++)for(var f=0;f<this.matchLevels.length;f++)if(c[d]>this.matchLevels[f]){this.matchLevels.splice(f,
0,c[d]);this.rules.splice(f,0,b[d]);break}0==this.rules.length&&(this.rules=b,this.matchLevels=c);return!0}return!1},matchLevels:[],rules:[]};this.visit(c);return b?{rules:c.rules,matchLevels:c.matchLevels}:c.rules},getRule:function(a){if(!a)return[];var b=e.parseSelectors(a);a={visit:function(a){return"CSSFile"==a.elementType?(a=a.getRule(b),this.rules=this.rules.concat(a||[]),!0):!1},rules:[]};this.visit(a);return a.rules},setText:function(a,b){this.visit({visit:function(a){"CSSImport"==a.elementType&&
a.close()}});this.children=[];this._styleElem=null;a=g.parse(a||"",this);var c="";b||0!=a.errors.length||(c=this.getText(),this.children=[],a=g.parse(c,this));this.endOffset=a.endOffset;this.errors=a.errors;var d=this;b||this.visit({visit:function(a){"CSSImport"!=a.elementType||a.cssFile||(a.load(!0),dojo.connect(a.cssFile,"onChange",null,dojo.hitch(d,"onChange")))}});this.onChange()},hasStyleSheet:function(a){for(var b=this.find({elementType:"CSSImport"}),c=0;c<b.length;c++)if(b[c].url==a)return!0;
return!1},addStyleSheet:function(a,b,e,g,k){var h=new d(this.url||this.fileName),h=h.getParentPath().append(a),h=h.toString();e||(this._loadedCSS[h]=require("davinci/model/Factory").getModel({url:h,includeImports:!0,loader:k}));b&&this._loadedCSS[h].setText(b);this.onChange();this._styleElem||(b=this.find({elementType:"HTMLElement",tag:"head"},!0),k=b.getChildElement("style"),k||(k=new c("style"),b.addChild(k)),this._styleElem=k);b=new f;b.parent=this;b.url=a;g?this._styleElem.insertBefore(b,g):this._styleElem.addChild(b);
e||b.load(!0)},close:function(){this.visit({visit:function(a){"CSSImport"==a.elementType&&a.close()}});require("davinci/model/Factory").closeModel(this)},getLabel:function(){return"\x3c\x3e"},getID:function(){return this.fileName},updatePositions:function(c,b){(new a(this)).updatePositions(this,c,b);this.visit({visit:function(a){if(a.endOffset<c)return!0;"HTMLElement"==a.elementType&&a.startTagOffset>c&&(a.startTagOffset+=b)}})},mapPositions:function(a){var b=this.getText();a=a.getText();b=b.indexOf(a);
a=b+a.lastIndexOf("\x3e")+1;return{startOffset:b,endOffset:a}},reportPositions:function(){this.visit({visit:function(a){}})},evaluate:function(a){if("/"!==a.charAt(0))console.error("invalid XPath string");else{var b=this;a.substr(1).split("/").forEach(function(a){a=a.match(this._RE_XPATH);var c=a[1];a=a[2];var d;d=b.children.filter(function(a){return a.tag===c});!a&&1<d.length?console.error("invalid XPath string; no index specified for multiple elements"):b=a?d[a-1]:d[0]},this);return b}},_RE_XPATH:/(\w+)(?:\[(\d+)\])?/})})},
"davinci/html/HTMLParser":function(){define("dojo/_base/declare davinci/html/HTMLText davinci/html/HTMLElement davinci/html/HTMLAttribute davinci/html/HTMLComment davinci/html/PHPBlock davinci/model/parser/Tokenizer davinci/html/CSSParser".split(" "),function(n,m,g,e,c,f,k,a){var d=function(){var a={autoSelfClosers:{br:!0,img:!0,hr:!0,link:!0,input:!0,meta:!0,col:!0,frame:!0,base:!0,area:!0},doNotIndent:{pre:!0,"!cdata":!0}},b={autoSelfClosers:{},doNotIndent:{"!cdata":!0}},c=a,d=!1,f=function(){function a(a,
c){var e=a.next();if("\x3c"==e){if(a.equals("!"))return a.next(),a.equals("[")?a.lookAhead("[CDATA[",!0)?(c(d("xml-cdata","]]\x3e")),null):"xml-text":a.lookAhead("--",!0)?(c(d("xml-comment","--\x3e")),null):a.lookAhead("DOCTYPE",!0)?(a.nextWhileMatches(/[\w\._\-]/),c(d("xml-doctype","\x3e")),"xml-doctype"):"xml-text";if(a.equals("?")){a.next();if(a.lookAhead("php",!0,!1,!0))return c(f("php-block","?\x3e")),null;a.nextWhileMatches(/[\w\._\-]/);c(d("xml-processing","?\x3e"));return"xml-processing"}a.equals("/")&&
a.next();c(b);return"xml-punctuation"}if("\x26"==e){for(;!a.endOfLine()&&";"!=a.next(););return"xml-entity"}a.nextWhileMatches(/[^&<\n]/);return"xml-text"}function b(b,d){var f=b.next();if("\x3e"==f)return d(a),"xml-punctuation";if(/[?\/]/.test(f)&&b.equals("\x3e"))return b.next(),d(a),"xml-punctuation";if("\x3d"==f)return"xml-punctuation";if(/[\'\"]/.test(f))return d(c(f)),null;b.nextWhileMatches(/[^\s\u00a0=<>\"\'\/?]/);return"xml-name"}function c(a){return function(c,d){for(;!c.endOfLine();)if(c.next()==
a){d(b);break}return"xml-attribute"}}function d(b,c){return function(d,f){for(;!d.endOfLine();){if(d.lookAhead(c,!0)){f(a);break}d.next()}return b}}function f(b,c){return function(d,f){for(var e=!1;!d.endOfLine();){if(d.lookAhead(c,!0)){e=!0;f(a);break}d.next()}if(!e&&d.endOfLine())d.next();else{for(;d.lookAheadRegex(/^[\ \t]/,!0););d.endOfLine()&&d.next()}return b}}return function(b,c){return k.tokenizer(b,c||a)}}();return{make:function(a){function b(a){for(var b=a.length-1;0<=b;b--)L.push(a[b])}
function e(){b(arguments);R=!0}function g(){b(arguments);R=!1}function h(){K.style+=" xml-error"}function k(a){return function(b,c){c==a?e():(h(),e(arguments.callee))}}function m(a,b){var d=c.doNotIndent.hasOwnProperty(a)||N&&N.noIndent;N={prev:N,name:a,indent:Q,startOfLine:b,noIndent:d}}function p(a){return function(b,c){var f=a;if(f&&f.noIndent)return c;if(d&&/<!\[CDATA\[/.test(b))return 0;f&&/^<\//.test(b)&&(f=f.prev);for(;f&&!f.startOfLine;)f=f.prev;return f?f.indent+indentUnit:0}}function n(){return g(r,
n)}function r(a,b){"\x3c"==b?e(z,M,E(1==O)):"\x3c/"==b?e(w,k("\x3e")):("xml-cdata"==a?(N&&"!cdata"==N.name||m("!cdata"),/\]\]>$/.test(b)&&(N=N.prev)):S.hasOwnProperty(a)||h(),e())}function z(a,b){"xml-name"==a?(P=b.toLowerCase(),K.style="xml-tagname",e()):(P=null,g())}function w(a,b){"xml-name"==a&&(K.style="xml-tagname",N&&b.toLowerCase()==N.name?N=N.prev:h());e()}function E(a){return function(b,d){"/\x3e"==d||"\x3e"==d&&c.autoSelfClosers.hasOwnProperty(P)?e():"\x3e"==d?(m(P,a),e()):(h(),e(arguments.callee))}}
function M(a){"xml-name"==a?(K.style="xml-attname",e(G,M)):g()}function G(a,b){"\x3d"==b?e(J):"\x3e"==b||"/\x3e"==b?g(E):g()}function J(a){"xml-attribute"==a?e(J):g()}var H=f(a),K,L=[n],O=0,Q=0,P=null,N=null,R,S={"xml-text":!0,"xml-entity":!0,"xml-comment":!0,"xml-processing":!0,"xml-doctype":!0,"php-block":!0};return{indentation:function(){return Q},next:function(){K=H.next();"whitespace"==K.style&&0==O?Q=K.value.length:O++;"\n"==K.content&&(Q=O=0,K.indentation=p(N));if("whitespace"==K.style||"xml-comment"==
K.type||"php-block"==K.type)return K;for(;;)if(R=!1,L.pop()(K.style,K.content),R)return K},copy:function(){var a=L.concat([]),b=H.state,c=N,d=this;return function(e){L=a.concat([]);O=Q=0;N=c;H=f(e,b);return d}}}},electricChars:"/",configure:function(f){null!=f.useHTMLKludges&&(c=f.useHTMLKludges?a:b);f.alignCDATA&&(d=f.alignCDATA)}}}();return{parse:function(h,b){function p(a,b){I=new m;I.wasParsed=!0;I.startOffset=b;B[B.length-1].addChild(I,void 0,!0);I.value=a}function n(a){a.content!=a.value&&p(a.value.substring(a.content.length),
a.offset+a.value.length)}function r(a,b){a=a.split("\n");var c=a[a.length-1].length;b.children.length?(lastElement=b.children[b.children.length-1],lastElement._fmLine=a.length-1,lastElement._fmIndent=c):(b._fmChildLine=a.length-1,b._fmChildIndent=c)}function w(){if(null!=I&&!I.value.match(/\S/)){var a=B[B.length-1];a.children.pop();r(I.value,a)}I=null}function A(){var b=B[B.length-1];y.nextWhileMatches(/[\s\u00a0]/);var c=y.get();null!=I?(I.value+=c,w()):r(c,b);a.parse(y,b)}function x(a){for(q=u.next();a&&
"whitespace"==q.style;)q=u.next();return q}var y=k.stringStream({next:function(){if(1==++this.count)return h;throw StopIteration;},count:0,text:h}),u=d.make(y),q,v=[],B=[];B.push(b);var I,D,F;try{do switch(q=u.next(),q.style){case "xml-punctuation":w();if("\x3c"==q.content){var C=new g;C.wasParsed=!0;C.startOffset=q.offset;B[B.length-1].addChild(C,void 0,!0);x(!0);for("xml-tagname"==q.style?C.tag=q.content:v.push("expecting tag name");"xml-attname"==(q=x(!0)).style;){var E=new e;E.wasParsed=!0;C.attributes.push(E);
E.name=q.content;E.startOffset=q.offset;x(!0);if("\x3d"==q.content)if(q=u.next(),"xml-attribute"==q.style){var M=q.content;E.setValue(M.substring(1,M.length-1))}else v.push("expecting attribute value");else E.noValue=!0,E.setValue(!0);E.endOffset=q.offset-1;if(E.noValue&&"xml-attname"!=q.style)break}"xml-punctuation"!=q.style?v.push("expecting \x3e"):(C.startTagOffset=q.offset,"\x3e"==q.content?B.push(C):(C.noEndTag=!0,C=B[B.length-1]),n(q));"style"==C.tag&&A()}else"\x3c/"==q.value&&(b=C,q=u.next(),
"script"==C.tag&&(C.script=C.getElementText()),B.pop(),C=B[B.length-1],q=u.next(),b.endOffset=q.offset,n(q));F=null;break;case "xml-text":case "whitespace":case "xml-entity":D?D.value+=q.value:F?F.value+=q.value:I?I.value+=q.value:p(q.value,q.offset);F=null;break;case "xml-comment":w();var G=new c;G.wasParsed=!0;G.startOffset=q.offset;G.value=q.content.substring(4,q.content.length-3);G.endOffset=q.offset+q.content.length;B[B.length-1].addChild(G,void 0,!0);F=null;break;case "php-block":w();var J=
new f;J.wasParsed=!0;J.startOffset=q.offset;J.value=q.content;J.endOffset=q.offset+q.content.length;B[B.length-1].addChild(J,void 0,!0);F=J;break;case "xml-doctype":D||(w(),G=new c,G.wasParsed=!0,G.startOffset=q.offset,G.value=q.value.substring(2),B[B.length-1].addChild(G,void 0,!0),G.isProcessingInstruction=!0,q=u.next());var H=q.content.length-1;"\x3e"==q.content.charAt(q.content.length-1)?(G.endOffset=q.offset+q.content.length,G.value+=q.content.substring(0,H),n(q),D=void 0):(D=G,G.value+=q.content);
F=null}while(1)}catch(K){}return{errors:v,endOffset:q?q.offset:0}}}})},"davinci/html/PHPBlock":function(){define(["dojo/_base/declare","davinci/html/HTMLItem"],function(n,m){return n("davinci.html.PHPBlock",m,{constructor:function(g){this.elementType="PHPBlock";this.value=g||""},getText:function(g){return g.excludeIgnoredContent?"":this.value}})})},"davinci/html/ui/HTMLOutline":function(){define(["dojo/_base/declare","davinci/html/ui/HTMLOutlineModel"],function(n,m){return n("davinci/html/ui/HTMLOutline",
null,{constructor:function(g){this._htmlModel=g},getModel:function(){return this._model=new m(this._htmlModel)}})})},"davinci/html/ui/HTMLOutlineModel":function(){define(["dojo/_base/declare"],function(n){return n("davinci.html.ui.HTMLOutlineModel",null,{constructor:function(m){this.root=m;this.subscription=dojo.subscribe("/davinci/ui/modelChanged",this,this._modelChanged)},getRoot:function(m,g){m(this.root)},getIdentity:function(m){return m.getID()},getLabel:function(m){return m.getLabel().replace("\x3c",
"\x26lt")},_getChildren:function(m){var g=[];"HTMLFile"!=m.elementType&&"HTMLElement"!=m.elementType||dojo.forEach(m.children,function(e){"HTMLElement"==e.elementType&&g.push(e)});return g},mayHaveChildren:function(m){return 0<m.children.length},getChildren:function(m,g,e){g(this._getChildren(m))},_modelChanged:function(){this.onChildrenChange(this.root,this._getChildren(this.root))},destroy:function(){dojo.unsubscribe(this.subscription)}})})},"davinci/ve/VisualEditor":function(){define("dojo/_base/declare dojo/dom-class dojo/dom-construct dojo/promise/all ../Runtime ../Workbench ../model/Path ./metadata ./Context preview/silhouetteiframe preview/loadIndicator ./widget ../XPathUtils ../html/HtmlFileXPathAdapter ./utils/GeomUtils xide/utils xide/registry".split(" "),
function(n,m,g,e,c,f,k,a,d,h,b,p,z,r,w,A,x){return n("davinci.ve.VisualEditor",null,{deviceName:"none",_orientation:"portrait",_subscriptions:[],delite:!1,context:null,getContext:function(){return this.context},template:{},constructor2:function(b,c,d){this._pageEditor=c;this.template=d||{};this.contentPane=dijit.getEnclosingWidget(b)||x.byId(b.id);this.loadingDiv=g.create("div",{className:"loading",innerHTML:dojo.replace("\x3ctable\x3e\x3ctr\x3e\x3ctd\x3e\x3cspan\x3e\x26nbsp;\x26nbsp;\x26nbsp;\x26nbsp;\x26nbsp;\x3c/span\x3e\x26nbsp;{0}\x3c/td\x3e\x3c/tr\x3e\x3c/table\x3e",
["Loading..."])},this.contentPane.domNode.parentNode,"first");m.add(this.contentPane.domNode,"fullPane");b=g.create("div",{className:"silhouette_div_container"},this.contentPane.domNode);g.create("span",{className:"silhouetteiframe_object_container"},b);this.silhouetteiframe=new h({rootNode:b,margin:20});var f=this;this.contentPane.connect(this.contentPane,"resize",function(a){var b=dojo.query(".designCP iframe",this._pageEditor.domNode)[0];b&&b.contentDocument&&b.contentDocument.body&&(f._resizeBody(b.contentDocument.body,
a),setTimeout(function(){var a=f.getContext();a.clearCachedWidgetBounds();a.updateFocusAll();f._registerScrollHandlers()},100))}.bind(this));this._pageEditor.deferreds=e(a.getDeferreds());this._subscriptions.push(dojo.subscribe("/davinci/ui/editorSelected",this._editorSelected.bind(this)));this._subscriptions.push(dojo.subscribe("/davinci/ui/context/loaded",this._contextLoaded.bind(this)))},_setContentRaw:function(a,b,f){this.fileName=a;this.basePath=new k(a);if(this.initialSet)this.context.setSource(b,
this.context._restoreStates,this.context);else{var e=c.getUserWorkspaceUrl();0==a.indexOf("./")&&(a=a.substring(2,a.length));a=e+a;a=e;this._handles=[];e=dojo.query(".silhouette_div_container",this.contentPane.containerNode)[0];$(this.contentPane.containerNode).find(".silhouette_div_container");e={editor:this._pageEditor,visualEditor:this,containerNode:e,model:b,template:this.template,baseURL:a,iframeattrs:{"class":"silhouetteiframe_iframe"},ctx:this._pageEditor.ctx};this.context=this.template&&this.template.contextClass?
new (A.getObject(this.template.contextClass))(e):new d(e);this.context._commandStack=this._commandStack;this._commandStack._context=this.context;try{this._handles.push(dojo.connect(this.context,"activate",this,this.update))}catch(B){debugger}this._handles.push(dojo.connect(this.context,"onContentChange",this,this.onContentChange));this._handles.push(dojo.connect(this.context,"onSelectionChange",this,this.onContentChange));this.title=dojo.doc.title;this.context._setSource(b,this._connectCallback,this,
f);this.context.getFlowLayout();this.initialSet=!0}},constructor:function(b,c,d){this._pageEditor=c;this.template=d||{};this.contentPane=dijit.getEnclosingWidget(b)||x.byId(b.id);b=this.contentPane.containerNode;this.loadingDiv=g.create("div",{className:"loading",innerHTML:dojo.replace("\x3ctable\x3e\x3ctr\x3e\x3ctd\x3e\x3cspan\x3e\x26nbsp;\x26nbsp;\x26nbsp;\x26nbsp;\x26nbsp;\x3c/span\x3e\x26nbsp;{0}\x3c/td\x3e\x3c/tr\x3e\x3c/table\x3e",["Loading..."])},b.parentNode,"first");m.add(b,"fullPane");b=
g.create("div",{className:"silhouette_div_container"},b);g.create("span",{className:"silhouetteiframe_object_container"},b);this.silhouetteiframe=new h({rootNode:b,margin:20});this._pageEditor.deferreds=e(a.getDeferreds());this._subscriptions.push(dojo.subscribe("/davinci/ui/editorSelected",this._editorSelected.bind(this)));this._subscriptions.push(dojo.subscribe("/davinci/ui/context/loaded",this._contextLoaded.bind(this)))},getDevice:function(){return this.deviceName},setDevice:function(a,b){this.deviceName=
a;var c=this.getContext();c.setMobileMeta(a);b||c.setMobileTheme(a);this.silhouetteiframe.setSVGFilename("none"==a?null:"app/preview/images/"+a+".svg");c.clearCachedWidgetBounds();dojo.publish("/davinci/ui/deviceChanged",[a]);dojo.publish("/davinci/ui/repositionFocusContainer",[])},toggleOrientation:function(){"none"!=this.deviceName&&this.setOrientation("landscape"==this._orientation?"portrait":"landscape");this.getContext().clearCachedWidgetBounds()},getOrientation:function(a){return this._orientation},
setOrientation:function(a){if("none"!=this.deviceName&&this._orientation!=a){this._orientation=a;a=f.getOpenEditor();a.editorContainer&&a.editorContainer.updateToolbars&&a.editorContainer.updateToolbars();var b=this.getContext();b.setMobileOrientation(this._orientation);this.silhouetteiframe.setOrientation(this._orientation);a._visualChanged();setTimeout(function(){b.clearCachedWidgetBounds();b.updateFocusAll()},100)}},_objectPropertiesChange:function(a){if(this.isActiveEditor()){var b=this.getContext(),
c=a.command;b.getCommandStack().execute(a.compoundCommand||c);c._newId?(a=p.byId(c._newId,b.getDocument()),b.select(a)):(c=b.getSelection(),a=c.length?c[c.length-1]:void 0,1<c.length&&b.select(a));this._srcChanged()}},isActiveEditor:function(){var a=c.currentEditor;return a&&"davinci.ve.PageEditor"==a.declaredClass&&a.visualEditor==this},_stylePropertiesChange:function(a){if(this.isActiveEditor()){var b=this.getContext().getCommandForStyleChange(a);b&&(this.getContext().getCommandStack().execute(b),
b._newId&&(b=p.byId(b._newId,context.getDocument()),this.context.select(b)),this._srcChanged(),dojo.publish("/davinci/ui/widgetValuesChanged",[a]))}},_srcChanged:function(){this.isDirty=!0},getTemplate:function(){return template},destroy:function(){this._handles&&(this._focusPopup&&this._focusPopup.destroyRecursive(),delete this._focusPopup,this.context.destroy(),this._handles.forEach(dojo.disconnect),this._iframeScrollHandler&&(dojo.disconnect(this._iframeScrollHandler),delete this._iframeScrollHandler),
this._designCPScrollHandler&&(dojo.disconnect(this._designCPScrollHandler),delete this._designCPScrollHandler),this._subscriptions.forEach(dojo.unsubscribe),this._subscriptions=[])},setContent:function(a,b,c){this._onloadMessages=[];this._setContent(a,b,c)},saveAs:function(a,b,c){this._setContent(a,c)},_setContent:function(a,b,c){this._setContentRaw(a,b,c)},_connectCallback:function(a){try{if(a instanceof Error)throw a;var b=this.context,c;this.savePoint=0;try{b.activate2()}catch(v){console.error("crash in context activation! : "+
v),logError(v,"crash in context activation! : ")}c=f.createPopup({partID:"davinci.ve.visualEditor",domNode:b.getContainerNode(),keysDomNode:b.getDocument(),context:b});b.getDocument();c&&(c.adjustPosition=function(a){var c=dojo.position(b.frameNode);dojo.withDoc(b.getDocument(),function(){var a=dojo.docScroll();c.x-=a.x;c.y-=a.y});return c});this._focusPopup=f.createPopup({partID:"davinci.ve.visualEditor",domNode:b.getFocusContainer(),keysDomNode:b.getDocument(),context:b});b.getTopWidgets().forEach(function(a){a.resize&&
a.resize()});b.anyDojoxMobileWidgets=void 0;dojo.publish("/davinci/ui/context/pagebuilt",[b])}catch(v){a=v}finally{a.errorMessage?(this.loadingDiv.innerHTML=a.errorMessage||"(unknown)",console.error("error! ",a.errorMessage)):a instanceof Error?(this.loadingDiv.parentNode&&this.loadingDiv.parentNode.removeChild(this.loadingDiv),delete this.loadingDiv,dojo.publish("/davinci/ui/context/pagebuilt",[b]),console.error("error! ",a)):(this.loadingDiv.parentNode&&this.loadingDiv.parentNode.removeChild(this.loadingDiv),
delete this.loadingDiv)}},getSelectedWidget:function(){var a=this.getContext(),b=a.getSelection(),c=b.length?b[b.length-1]:void 0;1<b.length&&a.select(c);return c},getSelectedSubWidget:function(){return this._selectedSubWidget},save:function(a){if(this.context){var b=[],c=this.context.getModel();c.getText();c.setDirty(!0);c.visit({visit:function(c){"HTMLFile"!=c.elementType&&"CSSFile"!=c.elementType||!c.isDirty()||b.push(c.save(a));return!1}});b=b.concat(this.getContext().saveDynamicCssFiles(this.context.cssFiles,
a));b.length?this.savePromise=e(b):delete this.savePromise;return this.savePromise}},removeWorkingCopy:function(){},getDefaultContent:function(){return this.getTemplate()},previewInBrowser:function(){var a=this.deviceName,d=f.getOpenEditor().resourceFile.getURL(),e=[];"none"!=a&&(e=["preview\x3d1","device\x3d"+encodeURIComponent(a),"file\x3d"+encodeURIComponent(d)],d=f.location(),d+="/maqetta/preview.html?","landscape"==this._orientation&&e.push("orientation\x3d"+this._orientation));this.context.getPreference("zazl")&&
e.push("zazl\x3dtrue");e.length&&(d+="?"+e.join("\x26"));a=function(){var a=window.open(d,"preview_"+d);b(a,c.location()+require.toUrl("dojox/image/resources/images/loading.gif"),"gray")};this.savePromise?this.savePromise.then(a):a()},refresh:function(){var a=this.context,b=z.getXPath(a.getSelection()[0]._srcElement,r);a.setSource(a.model);var b=a.model.evaluate(b).getAttribute("id"),c=p.byId(b,a.getDocument());setTimeout(function(){a.select(c)},0)},_contextLoaded:function(a){a==this.getContext()&&
this._registerScrollHandlers()},_editorSelected:function(a){var b=this.getContext(),b=b?b.getFocusContainer():null;a.oldEditor==this._pageEditor&&b&&this._focusPopup&&this._focusPopup.unBindDomNode(b);a.editor==this._pageEditor&&(this._registerScrollHandlers(),b&&this._focusPopup&&this._focusPopup.bindDomNode(b));if(b=document.getElementById("visualEditorBorder"))b.style.display=a.editor&&"davinci.ve.PageEditor"==a.editor.declaredClass?"block":"none"},_resizeBody:function(a,b){var c=w.getScrollLeft(a),
d=w.getScrollTop(a);a.style.width=0<c?b.w+c+"px":"100%";a.style.height=0<d?b.h+d+"px":"100%"},_scrollHandler:function(a){(a=dojo.query(".designCP iframe",this._pageEditor.domNode)[0])&&a.contentDocument&&a.contentDocument.body&&(this._resizeBody(a.contentDocument.body,{w:dojo.style(this.contentPane.domNode,"width"),h:dojo.style(this.contentPane.domNode,"height")}),setTimeout(function(){var a=this.getContext();a.clearCachedWidgetBounds();a.updateFocusAll()}.bind(this),100))},_registerScrollHandlers:function(){if(!this._iframeScrollHandler){var a=
dojo.query(".designCP iframe",this._pageEditor.domNode)[0];a&&a.contentDocument&&a.contentDocument.body&&(this._iframeScrollHandler=dojo.connect(a.contentDocument.body.ownerDocument,"onscroll",this,this._scrollHandler))}!this._designCPScrollHandler&&(a=dojo.query(".designCP",this._pageEditor.domNode)[0])&&(this._designCPScrollHandler=dojo.connect(a,"onscroll",this,this._scrollHandler))}})})},"davinci/ve/Context":function(){define([],function(){})},"davinci/ve/VisualEditorOutline":function(){define("dojo/_base/declare dojo/_base/connect ./commands/ReparentCommand ./commands/StyleCommand ./widget ./States ../Runtime xide/factory xide/types".split(" "),
function(n,m,g,e,c,f,k,a,d){var h=n(null,{toggleMode:!0,betweenThreshold:4,showRoot:!0,dndController:"dijit.tree.dndSource",onChange:function(a){},constructor:function(a){this._context=a;this._handles=[];this._connect("activate","_rebuild");this._connect("widgetChanged","_widgetChanged")},getRoot:function(a,c){a(this._context.rootWidget||{id:"myapp",label:"application"})},getLabel:function(a){if("myapp"==a.id)return this._context.model.fileName;var b="",d=this._getWidget(a);if("xblox/RunScript"===
a.type&&d)return(b=d.domNode)&&b.script?"XBlox::"+b.script:"XBlox::"+d.dijitWidget.targetEvent;if(d.isWidget)return b=c.getLabel(d);if(b=d.type){a=this.useRichTextLabel?"\x26lt;":"\x3c";var f=this.useRichTextLabel?"\x26gt;":"\x3e",b=0===b.indexOf("html.")?a+b.substring(5)+f:0===b.indexOf("OpenAjax.")?a+b.substring(9)+f:0<b.indexOf(".")?b.substring(b.lastIndexOf(".")+1):d.label||b;(d=c.byId(d.id,this._context.getDocument()))&&(d=d.getId())&&(b+=" id\x3d"+d);return b}},_getChildren:function(a){var b=
[];this._context.rootWidget||console.error("editor context has no root widget yet!");if(!this._context.rootWidget||!a||"state"==a.type||"html.stickynote"==a.type||"html.richtext"==a.type)return[];if("myapp"==a.id||a===this._context.rootNode)b=this._context.getTopWidgets();else{var c=this._getWidget(a);c&&c.getChildren&&(b=this._getWidget(a).getChildren())}return b.filter(function(a){return"xblox/RunScript"==a.type||"xblox/CSSState"==a.type||"xblox/StyleState"==a.type?!0:a&&a.getContext&&a.getContext()&&
!a.internal&&a._srcElement}).map(this._buildItem)},__getChildren:function(a){return[]},mayHaveChildren:function(a){return(a=this._getWidget(a))&&a.type&&0===a.type.indexOf("OpenAjax.")?!1:0<this._getChildren(a).length},getIdentity:function(a){return a?a.id:null},getChildren:function(a,c,d){c(this._getChildren(a))},put:function(a,c){a=this._getWidget(a);c=a.getParent();this.onChildrenChange(c,this._getChildren(c));return this.getIdentity(a)},add:function(a,c){(c=c||{}).overwrite=!1;return this.put(a,
c)},onDelete:function(a){},remove:function(a){this.onDelete(a)},newItem:function(a,c){},pasteItem:function(a,c,d,f,e,h){a&&d&&c&&(d="myapp"==d.id?this._context.rootWidget:this._getWidget(d),c="myapp"==c.id?this._context.rootWidget:this._getWidget(c),a=this._getWidget(a),c!=d||f||dojo.indexOf(c.getChildren(),a)<e&&e++,a=new g(a,d,e),this._context.getCommandStack().execute(a))},checkItemAcceptance:function(a,c,d){switch(d){case "before":case "after":return!0;default:return a=dijit.getEnclosingWidget(a).item,
a=this.tree.model._getWidget(a),a.getContainerNode&&a.getContainerNode()||"myapp"==a.id}},onChildrenChange:function(a,c){},_rebuild:function(){if(!this._skipRefresh){var a=this._context.rootNode;if(a)this.onChildrenChange(this._buildItem(a),this._getChildren(a))}},_widgetChanged:function(b,c,f){try{b===this._context.WIDGET_ADDED?this.add(c):b===this._context.WIDGET_REMOVED?this.remove(c):b===this._context.WIDGET_MODIFIED?(this.onChange(c),this.onChildrenChange(c,this._getChildren(c))):b===this._context.WIDGET_REPARENTED?
(this.remove(c),this.put(c,{overwrite:!0,parent:f[1]})):b===this._context.WIDGET_ID_CHANGED&&(this.remove({id:f}),this.add(c))}catch(r){console.error("VisualEditorOutline._widgetChanged: e \x3d "+r)}a.publish(d.EVENTS.ON_WIDGET_CHANGED,{type:b,widget:c,args:f},this)},toggle:function(a,c,d){a=this._getWidget(a);var b=a.getHelper(),f=!0;b&&b.onToggleVisibility&&(f=b.onToggleVisibility(a,c));return f?(this._toggle(a,c,d),!0):!1},_toggle:function(a,c,d){c=c?"none":"";var b;if(d=f.getFocus(a.domNode.ownerDocument.body))b=
d.state;else{d=f.getStatesListCurrent(a.domNode);for(var g=0;g<d.length;g++)if(d[g]){b=d[g];break}}a=new e(a,[{display:c}],b);this._context.getCommandStack().execute(a)},shouldShowElement:function(a,c){return"toggleNode"==a?"states"!=c.type&&"myapp"!=c.id:!0},_getToggledItemsAttr:function(){var a=[],c;for(c in this.toggledItems)a.push(c);return a},isToggleOn:function(a){a=this._getWidget(a);var b=a.getHelper();return b&&b.isToggleOn?b.isToggleOn(a):"none"===a.domNode.style.display},_getWidget:function(a){return a?
c.byId(a.id):null},_buildItem:function(a){if(a)return{id:a.id,type:a.type}},_connect:function(a,c){this._handles.push(m.connect(this._context,a,this,c))},destroy:function(){this._handles.forEach(m.disconnect)}});return n("davinci.ve.VisualEditorOutline",null,{toolbarID:"davinci.ve.outline",_outlineMode:"design",constructor:function(a){this._editor=a;this._context=a.visualEditor.context;this._handles=[];this._connect("onSelectionChange","onSelectionChange");this._connect("deselect","deselect");this._widgetModel=
new h(this._context);m.subscribe("/maqetta/appstates/state/changed/end",this,function(a){if("davinci.themeEditor.ThemeEditor"!==("undefined"!==typeof davinci&&k.currentEditor&&k.currentEditor.declaredClass)&&this._tree&&(a=a&&a.node&&a.node._dvWidget))for(a=a.getChildren();a.length;){var b=a.shift();if(b){var c="none"!==b.domNode.style.display;this._tree&&this._tree.toggleNode(b,!c);a=a.concat(b.getChildren())}}})},getActionsID:function(){if("design"===this._outlineMode)return"davinci.ve.VisualEditorOutline"},
_connect:function(a,c){this._handles.push(m.connect(this._context,a,this,c))},switchDisplayMode:function(a){this._outlineMode=a;this._outlineView.createTree()},getModel:function(){switch(this._outlineMode){case "design":this._model=this._widgetModel;break;case "source":this._model=this._srcModel}return this._model},getSelectedItem:function(){return this._tree&&this._tree._getSelectedItemAttr()},onSelectionChange:function(a,c){"design"==this._outlineMode&&(a=a||this._context.getSelection())&&this._tree&&
this._tree.selectNode(a,c)},deselect:function(){this._tree&&this._tree&&this._tree.deselectAll()},getIconClass:function(a,c){return(a=a.type)?"xblox/RunScript"==a?"fa fa-play-circle-o":c?"fa fa-circle-thin":"fa fa-circle":c?"fa fa-circle-thin":"fa fa-circle"}})})},"davinci/ve/prefs/HTMLEditPreferences":function(){define("dojo/_base/declare dijit/layout/ContentPane dijit/_TemplatedMixin dijit/form/CheckBox dijit/form/TextBox davinci/lang/ve/common dojo/text!./HtmlEditPreferences.html".split(" "),function(n,
m,g,e,c,f,k){return n([m,g],{templateString:k,postMixInProperties:function(){this._loc=f},postCreate:function(){this._snap=new e({},this.snapNode);this._showPossibleParents=new e({},this.showPossibleParentsNode);this._cssOverrideWarn=new e({},this.cssOverrideWarn);this._absoluteWidgetsZindex=new c({},this.absoluteWidgetsZindex);this._zazl=new e({},this.zazl);this.containerNode||(this.containerNode=this.domNode)},getDefaults:function(){},setDefaults:function(){},doApply:function(){},getPreferences:function(){return{snap:this._snap.checked,
showPossibleParents:this._showPossibleParents.checked,cssOverrideWarn:this._cssOverrideWarn.checked,absoluteWidgetsZindex:this._absoluteWidgetsZindex.value,zazl:this._zazl.checked}},setPreferences:function(a){a=a||{};this._check(this._snap,!!a.snap);this._check(this._showPossibleParents,!!a.showPossibleParents);this._check(this._cssOverrideWarn,!!a.cssOverrideWarn);this._absoluteWidgetsZindex.set("value",a.absoluteWidgetsZindex);this._check(this._zazl,!!a.zazl)},_check:function(a,c){a.set("checked",
c)},save:function(a){davinci.ve._preferences=a}})})},"davinci/lang/ve/common":function(){define([],function(){return{search:"Search",filter:"Filter","new":"New",errorSavingFile:"Error saving file: ${0} details: ${1}",palette:"palette",closeAllEditors:"Close all tabs",undo:"Undo",redo:"Redo",copy:"Copy",paste:"Paste",cut:"Cut","delete":"Delete",surround:"Surround",properties:"Properties",styles:"Styles",events:"Events",preferences:"Preferences",addPane:"Add Pane",addColumn:"Add Column",addRow:"Add Row",
removeColumn:"Remove Column",removeRow:"Remove Row",joinColumn:"Join Column",joinRow:"Join Row",splitColumn:"Split Column",splitRow:"Split Row",alignLeft:"Align Left",alignRight:"Align Right",alignTop:"Align Top",alignBottom:"Align Bottom",show:"Show",hide:"Hide",addMenuItem:"Add Menu Item",addSubMenu:"Add Sub Menu",addMenuBarItem:"Add MenuBar Item",addPopupMenuBar:"Add Popup MenuBarItem",ok:"OK",cancel:"Cancel",page:"Page",title:"Title",metaInfo:"Meta Info",httpEquiv:"HTTP Equiv",style:"Style",theme:"Theme",
styleSheets:"Style Sheets",rules:"Rules",url:"URL",externalScripts:"External Scripts",modules:"Modules",name:"Name",value:"Value",add:"Add",remove:"Remove",staticOptions:"Static Options",axisOptions:"Axis Options",series:"Series",axis:"Axis",option:"Option",selected:"Selected",staticItems:"Static Items",dataStore:"Data Store",query:"Query",fields:"Fields",field:"Field",label:"Label",width:"Width",edit:"Edit",key:"Key",rootId:"Root ID",rootLabel:"Root Label",childrenAttrs:"Children Attributes",items:"Items",
type:"Type",widget:"Widget",position:"Position",size:"Size",layout:"Layout",visual:"Visual",text:"Text",border:"Border",table:"Table",list:"List",aural:"Aural",others:"Others",onLoad:"Load",onUnload:"Unload",script:"Script",methodCall:"Method Call",serviceCall:"Service Call",object:"Object",method:"Method",parameters:"Parameters",result:"Result",service:"Service",content:"Content",source:"Source",target:"Target",property:"Property",flowLayout:"Flow Layout",snapToNearestWidget:"Snap to nearest widget",
showPossibleParents:"When dragging, show possible parents",warnOnCSSOverride:"Warn on CSS Override",absoluteWidgetsZindex:"z-index for sketch mode",widgetPaletteLayout:"In Palette, display widgets as",widgetPaletteShow_Icons:"icons",widgetPaletteShow_List:"list",liveEdit:"Live Edit",zazl:"Enable \x3ca href\x3d'http://zazl.org' target\x3d'_blank'\x3eZazl Optimizer\x3c/a\x3e",selectorPrefix:"Selector Prefix",component:"Component",alternates:"Alternates",alternateWidgets:"Alternate widgets:",howToChooseAlternate:"To choose alternate widget, click-select current widget, then click on up arrow icon.",
summary:"Summary:",description:"Description:",showSuggestedWidgets:"Suggested Widgets",showAllWidgets:"All Widgets",MoreIconTitleString:"Click here to see alternative similar widgets",HelpIconTitleString:"Click here to see descriptive info about this widget",__dummy__:""}})},"davinci/commands/OrderedCompoundCommand":function(){define(["dojo/_base/declare","davinci/commands/CompoundCommand"],function(n,m){return n("davinci.commands.OrderedCompoundCommand",m,{undo:function(){if(this._commands)for(var g=
0;g<this._commands.length;g++)this._commands[g].undo()}})})},"davinci/version":function(){define([],"10")},"davinci/ve/utils/pseudoClass":function(){define([],function(){return{MAQETTA_PSEUDO_CLASS:"maqettaPseudoClass",replace:function(n){return"hover link visited active focus first-letter first-line first-child before after".split(" ").reduce(function(m,g){return m.replace(new RegExp(":"+g,"g"),".maqettaPseudoClass"+g[0].toUpperCase()+g.slice(1))},n)}}})},"davinci/ui/dnd/DragManager":function(){define(["dojo/_base/declare",
"dojo/_base/array","dojo/_base/connect","dojo/mouse"],function(n,m,g){n=n("",null,{disabled:!1,currentDragSource:null,currentDropTarget:null,dropAcceptable:!1,dropTargets:null,dragTriggered:!1,currentDomElement:null,_connectors:null,_moveConnector:null,document:null,documentX:0,documentY:0,_ABSOLUTE_THRESHOLD:3,_STATIC_THRESHOLD:40,constructor:function(){this.dropTargets=[];this._connectors=[g.connect(dojo.doc,"onkeydown",this,"onKeyDown"),g.connect(dojo.doc,"onmouseover",this,"onMouseOver"),g.connect(dojo.doc,
"onmouseout",this,"onMouseOut"),g.connect(dojo.doc,"onmousedown",this,"onMouseDown"),g.connect(dojo.doc,"onmouseup",this,"onMouseUp")]},destroy:function(){m.forEach(this._connectors,dojo.disconnect)},onKeyDown:function(c){27==c.keyCode&&this.currentDragSource&&(this.dropAcceptable=!1,this.onMouseUp(c))},onMouseDown:function(c,f){if(!(this.disabled||this.dragTriggered||!dojo.mouseButtons.isLeft(c)||c.metaKey||c.ctrlKey||this.dragTriggered)&&(f=this.currentDragSource=f||this.findDragSource(c))){f.onDragDown(c);
f=0;for(var e=this.dropTargets.length;f<e;f++){var a=this.dropTargets[f];if(!a.disabled)a.onDragDown(c)}c.preventDefault();this._moveConnectors=[g.connect(dojo.doc,"onmousemove",this,"onMouseMove")];this.document&&this.document!=dojo.doc&&(this._moveConnectors.push(g.connect(this.document,"onmousemove",this,"onMouseMove")),this._moveConnectors.push(g.connect(this.document,"onmouseover",this,"onMouseOver")),this._moveConnectors.push(g.connect(this.document,"onmouseout",this,"onMouseOut")),this._moveConnectors.push(g.connect(this.document,
"onmouseup",this,"onMouseUp")))}},onMouseMove:function(c){c.preventDefault();dojo.isIE&&(c.pageX-=2,c.pageY-=2);if(c.target==this.document||c.target.ownerDocument==this.document)c.documentX=this.documentX,c.documentY=this.documentY,c.documentX-=this.document.documentElement.scrollLeft,c.documentY-=this.document.documentElement.scrollTop;var f=c.dragSource=this.currentDragSource;if(!this.dragTriggered){var e=c.pageX-f.pageX,a=c.pageY-f.pageY,e=Math.sqrt(e*e+a*a);if("absolute"==f.positioning){if(e<
this._ABSOLUTE_THRESHOLD)return}else if(e<this._STATIC_THRESHOLD)return;this.dragTriggered=!0;f.onDragStart(c);e=0;for(a=this.dropTargets.length;e<a;e++){var d=this.dropTargets[e];d.disabled||(c.dropTarget=d,d.onDragStart(c))}this.onMouseOver(c)}f.onDragMove(c);(d=this.currentDropTarget)?this.dropAcceptable&&(c.dropTarget=d,d.onDragMove(c,this.dragObjects)):this.dropAcceptable=!1},onMouseOver:function(c){this.currentDomElement=c.target;if(this.dragTriggered){var f=this.currentDragSource;if(f){c.dragSource=
f;var e=this.findDropTarget(this.currentDomElement,f);e&&f.domNode==e.domNode||(e!=this.currentDropTarget&&(this.currentDropTarget&&(c.dropTarget=this.currentDropTarget,this.currentDropTarget.onDragOut(c)),e&&(c.dropTarget=e,this.dropAcceptable=e.onDragOver(c))),this.currentDropTarget=e)}}},onMouseOut:function(c){},onMouseUp:function(c){if(!this.ignoreMouseUp){m.forEach(this._moveConnectors,dojo.disconnect);if(this.dragTriggered){for(var f=0,e=this.dropTargets.length;f<e;f++){var a=this.dropTargets[f];
a.disabled||(c.dropTarget=a,a.onDragEnd(c))}f=this.currentDragSource;e=this.currentDropTarget;c.dragSource=f;c.dropTarget=e;if(f&&(e?(e.onDropStart(c),this.dropAcceptable?(a=e.onDrop(c),e.onDragOut(c),void 0==a||c.dragStatus||(c.dragStatus=a?"dropSuccess":"dropFailure")):(e.onDragOut(c),c.dragStatus="dropFailure")):c.dragStatus="dropFailure",f.onDragEnd(c),e))e.onDropEnd(c)}this._resetStatus()}},_resetStatus:function(){this.currentDragSource=this.currentDropTarget=null;this.dragTriggered=this.dropAcceptable=
!1;this.currentDomElement=null},findDragSource:function(c){for(c=c.target;c&&c!=dojo.doc.body;c=c.parentNode)if(c.dragSource&&!c.dragSource.disabled)return c.dragSource;return null},findDropTarget:function(c,f){for(var e=null,a=null;null!=c&&c!=dojo.doc.body;c=c.parentNode){var d=c.dropTarget;if(d&&!d.disabled&&d.accepts(f)){e=d;e.nodeUnderMouse=a;break}c.dragSource&&!c.dragSource.disabled&&(a=c)}return e},registerDropTarget:function(c){this.dropTargets.push(c)},unregisterDropTarget:function(c){for(var f=
0,e=this.dropTargets.length;f<e;f++)if(this.dropTargets[f]==c){this.dropTargets.splice(f,1);break}}});var e=new n;e.Module=n;return e})},"davinci/model/resource/Folder":function(){define(["dojo/_base/declare","dojo/_base/xhr","davinci/Runtime","davinci/model/resource/Resource","davinci/model/resource/File"],function(n,m,g,e,c){var f=n("davinci.model.resource.Folder",e,{serviceClass:"XIDE_Directory_Service",workspaceMount:"/ws/",constructor:function(c,a){this.elementType="Folder";this.name=c;this.parent=
a},reload:function(){this._isLoaded=!1},createResource:function(e,a,d,g){var b;null!=e?b=a?new f(e,this):new c(e,this):(b=this,a="Folder"==this.elementType);var h=this;if(!d){d=""+this.getPath();"."==d&&(d=""+this.workspaceMount);d=d.replace("./",this.workspaceMount);d=this.serviceClass;a=a?"mkDir":"mkFile";if(!this.serviceObject[d][a])return console.error("_createResource : server doesnt support :"+a),this;this.serviceObject[d][a](this.workspaceMount,b.getPath()).then(function(a){if(!0===a&&null!=
e||"The file already exists"===a)return h.children.push(b),delete b.libraryId,delete b.libVersion,delete b._readOnly,dojo.publish("/davinci/resource/resourceChanged",["created",b]),g&&g(b),b;if("OK"!=a)throw"Folder.createResource failed: name\x3d"+e+"response\x3d"+a;delete b.libraryId;delete b.libVersion;delete b._readOnly;g(h);if(!g)debugger})}},getChildren2:function(c,a){if(this._isLoaded)c(this.children);else if(this._loadingCallbacks)this._loadingCallbacks.push(c);else{this._loadingCallbacks=
[];this._loadingCallbacks.push(c);c=""+this.getPath();"."==c&&(c="/ws/");var d=this.serviceClass;if(!this.serviceObject)debugger;if(!this.serviceObject[d])debugger;this.serviceObject.sync=!0;this.serviceObject[d].ls(this.workspaceMount,c).then(function(a){this.setChildrenSync(a);dojo.forEach(this._loadingCallbacks,function(a){a(this.children)},this);delete this._loadingCallbacks}.bind(this),a)}},getChildren:function(c,a){if(this._isLoaded)c.call(null,this.children);else if(this._loading)this._loading.then(function(){c.call(null,
this.children)}.bind(this),a);else{console.error("list files : "+this.getPath());var d=""+this.getPath();"."==d&&(d="/ws/");d=d.replace("./",this.workspaceMount);this.serviceObject[this.serviceClass].ls(d).then(function(a){this.setChildren(a);this._isLoaded=!0;c.call(null,this.children);delete this._loading}.bind(this),a)}},getChildrenSync:function(c,a){this._isLoaded?c(this.children):this._loadingCallbacks?this._loadingCallbacks.push(c):(this._loadingCallbacks=[],this._loadingCallbacks.push(c),console.error("list files : "+
this.getPath()),c=this.getPath(),"./project1"===c&&console.error("gotcha"),c=""+c,"."==c&&(c="/ws/"),c=c.replace("./","/ws/"),g.serverJSONRequest({url:"cmd/listFiles.php",content:{path:this.getPath(),basePath:"./"},sync:a,load:dojo.hitch(this,function(a,c){this.setChildrenSync(a);dojo.forEach(this._loadingCallbacks,function(a){a(this.children)},this);delete this._loadingCallbacks})}))},setChildren:function(c){this.children=[];this._appendFiles(c)},setChildrenSync:function(c){this.children=[];this._appendFiles(c,
!0)},_appendFiles:function(e,a){e.forEach(function(d){var e=a?this.getChildSync(d.name):this._getChild(d.name),b=null!=e;d.isDir||d.isLib?(b||(e=new f(d.name,this)),d.isLib&&(e.isLibrary=!0)):b||(e=new c(d.name,this));e.link=d.link;e.isNew=d.isNew;e._readOnly=d.readOnly;e.setDirty(d.isDirty);d.libraryId&&(e.libraryId=d.libraryId,e.libVersion=d.libVersion);b||this.children.push(e)},this);this._isLoaded=!0},getMarkers:function(c,a){var d=[];this.visit({visit:function(e){if("File"==e.elementType)markers=
e.getMarkers(c),d.concat(markers);else if(!a)return!0}},!0);return d},getChildSync:function(c){if(!this._isLoaded||1>this.children.length)this._isLoaded=!1,this.getChildrenSync(function(a){this.children=a},!0);return this._getChild(c)},getChild:function(c){if(!this._isLoaded||1>this.children.length)this._isLoaded=!1,this.getChildren2(function(a){this.children=a},!0);return this._getChild(c)},_getChild:function(c){if(!this.__CASE_SENSITIVE){if(!c||null==c.toLowerCase)debugger;c=c.toLowerCase()}var a;
this.children.some(function(d){var e=d.getName();this.__CASE_SENSITIVE||(e=e.toLowerCase());(e=e==c)&&(a=d);return e});return a}});return f})},"davinci/model/resource/Resource":function(){define("dojo/_base/declare dojo/_base/xhr dojo/_base/connect dojo/Deferred davinci/Runtime davinci/model/Model davinci/model/Path xide/manager/ServerActionBase".split(" "),function(n,m,g,e,c,f,k,a){return n("davinci.model.resource.Resource",[f,a],{singleton:!0,sync:!1,workspaceMount:"/ws/",_initService:function(){var a=
this.findServiceUrl(this.declaredClass);a&&(this.serviceUrl=a);this.inherited(arguments)},constructor:function(){this.elementType="Resource";this.name="";this.parent=null;this._id=dijit.getUniqueId("maqFileResource");this.init()},getName:function(){return this.name},getPath:function(){return this.parent?this.parent.getPath()+"/"+this.name:this.name},readOnly:function(){return this.hasOwnProperty("_readOnly")?this._readOnly||null!=this.parent&&this.parent.readOnly():this.parent?this.parent.readOnly():
!1},getURL:function(){var a=this.getPath();0==a.indexOf("./")&&(a=a.substring(2,a.length));return c.getUserWorkspaceUrl()+a},rename:function(a){var c=(new k(this.getPath())).removeLastSegments().append(a);return m.get({url:"cmd/rename",handleAs:"text",content:{oldName:this.getPath(),newName:c.toString()}}).then(function(){this.name=a;g.publish("/davinci/resource/resourceChanged",["renamed",this])}.bind(this))},getParentFolder:function(){return"File"==this.elementType?this.parent:this},isVirtual:function(){return!!this.libraryId},
visit:function(a,c){var b=a.visit(this);this._isLoaded||"Folder"!=this.elementType||c?this.children&&!b&&dojo.forEach(this.children,function(b){b.visit(a,c)}):this.getChildren(dojo.hitch(this,function(){dojo.forEach(this.children,function(b){b.visit(a,c)})}))},deleteResource:function(a){var c=""+this.getPath();"."==c&&(c=""+this.workspaceMount);var c=c.replace("./",this.workspaceMount),b=this.serviceClass,d="Folder"==this.elementType?"deleteDirectory":"deleteFile",f=function(){var a=this.getName();
this.parent.children.some(function(b,c,d){if(b.getName()==a)return d.splice(c,1),!0});g.publish("/davinci/resource/resourceChanged",["deleted",this])}.bind(this);a?(a=new e,f(),a.resolve()):a=this.serviceObject[b][d](c).then(f,function(){});return a},getId:function(){return this._id}})})},"davinci/model/resource/File":function(){define("dojo/_base/declare davinci/Runtime davinci/model/resource/Resource davinci/model/resource/Marker davinci/ve/utils/URLRewrite xide/utils".split(" "),function(n,m,g,
e,c,f){return n("davinci.model.resource.File",g,{serviceClass:"XIDE_Directory_Service",mount:"/ws/",getMountPoint:function(){return this.mount},constructor:function(c,a){this.elementType="File";this.name=c;this.parent=a;this.markers=[];this.extension=c.substr(c.lastIndexOf(".")+1)},getExtension:function(){return this.extension},clearMarkers:function(){this.markers=[]},addMarker:function(c,a,d){this.markers.push(new e(this,c,a,d))},getMarkers:function(c){var a=[];if(this.markers)for(var d=0;d<this.markers.length;d++){var e=
this.markers[d];c?"string"==typeof c?e.type==c&&a.push(e):dojo.forEach(c,function(b){b==e.type&&a.push(e)}):a.push(e)}return a},setContents:function(c,a){this.isNew&&!a&&(this.isNew=!1);var d=(a=!1,""),e=encodeURI(this.getPath()+d);return this.serviceObject[this.serviceClass].set(this.getMountPoint(),e,c).then(function(b){this.dirtyResource=a;dojo.publish("/davinci/resource/resourceChanged",["modified",this]);return this}.bind(this),function(a){console.error("An error occurred: davinci.model.resource.File.prototype.setContents "+
a+" : "+e);return a})},getContentSync:function(){return m.serverJSONRequest({url:c.encodeURI(this.getURL()),handleAs:"text",sync:!0})},getContent:function(){return this.serviceObject[this.serviceClass].get(f.buildPath(this.getMountPoint(),encodeURI(this.getPath())),!1,!1)},removeWorkingCopy:function(){m.serverJSONRequest({url:m.cmdOffset+"cmd/removeWorkingCopy",handleAs:"text",content:{path:this.getPath()},sync:!0});this.isNew&&this.deleteResource(!0)}})})},"davinci/model/resource/Marker":function(){define(["dojo/_base/declare",
"davinci/model/resource/Resource"],function(n,m){return n("davinci.model.resource.Marker",m,{constructor:function(g,e,c,f){this.resource=g;this.type=e;this.line=c;this.text=f}})})},"davinci/ve/input/SmartInput":function(){define("dojo/_base/declare dojo/dom-geometry davinci/ve/commands/ModifyRichTextCommand dojox/html/entities davinci/lang/ve dijit/lang/_common xide/registry".split(" "),function(n,m,g,e,c,f,k){return n("davinci.ve.input.SmartInput",null,{property:null,_X_MOVE_RANGE:10,_Y_MOVE_RANGE:10,
_POINTER_TOP_OFFSET:-13,multiLine:"false",displayOnCreate:"true",_connection:[],getHelpText:function(){return this.helpText?this.helpText:this.isHtmlSupported()?c.smartInputHelp1:c.smartInputHelp2},isHtmlSupported:function(){this.supportsHTML||("html"==this._widget.type.match("^html")?this.supportsHTML="true":this.supportsHTML="false");return"boolean"===typeof this.supportsHTML?this.supportsHTML:"true"===this.supportsHTML},parse:function(a){return a},parseItems:function(a){this.trim&&(a=dojo.trim(a));
return a.match(/[^\\][\r\n]/)?this.parseItemsInRows(a):this.parseItemsInColumns(a)},parseItemsInRows:function(a){a=this.splitRows(a);for(var c=a.length,e=0;e<c;e++){var b=a[e],b=this.parseItem(b);a[e]=b}return a},parseItemsInColumns:function(a){a=this.splitColumns(a);for(var c=a.length,e=0;e<c;e++){var b=a[e],b=this.parseItem(b);a[e]=b}return a},parseGrid:function(a){a=this.splitRows(a);for(var c=a.length,e=0;e<c;e++){var b=this.parseItemsInColumns(a[e]);a[e]=b}return a},parseItem:function(a){var c=
null,e=a,b=a.match(/^([-~!>|(*)[+\]]*) ?(.*)$/);b&&(c=b[1],e=b[2]);var b=0,f=!1,g=!1;if(c)for(var k=0;k<c.length;k++)switch(c[k]){case "-":case "~":case "!":f=!0;break;case "\x3e":b++;break;case "*":case "+":g=!0}return{original:a,specialChars:c,text:e,indent:b,disabled:f,selected:g}},splitRows:function(a){var c=[],e,b="",f=!1;for(e=0;e<a.length;e++){var g=a.charAt(e);switch(g){case "\\":f&&(b+=g);f=!f;break;case "r":f?(b+="\r",f=!1):b+=g;break;case "n":f?(b+="\n",f=!1):b+=g;break;case "\r":case "\n":f?
(b+=g,f=!1):(this.trim&&(b=dojo.trim(b)),c.push(b),b="");break;default:b+=g,f=!1}}b&&(this.trim&&(b=dojo.trim(b)),c.push(b));return c},splitColumns:function(a){var c=[],e,b="",f=!1;for(e=0;e<a.length;e++){var g=a.charAt(e);switch(g){case "\\":f&&(b+=g);f=!f;break;case "r":f?(b+="\r",f=!1):b+=g;break;case "n":f?(b+="\n",f=!1):b+=g;break;case ",":f?(b+=g,f=!1):(this.trim&&(b=dojo.trim(b)),c.push(b),b="");break;default:b+=g,f=!1}}b&&(this.trim&&(b=dojo.trim(b)),c.push(b));return c},serializeItems:function(a){return"columns"==
this.format?this.serializeColumns(a):this.serializeRows(a)},serializeColumns:function(a){for(var c=0;c<a.length;c++){var e=a[c],e=e.replace(/\\/g,"\\\\");a[c]=e.replace(/,/g,"\\,")}return a.join(", ")},serializeRows:function(a){for(var c=0;c<a.length;c++){var e=a[c],e=e.replace(/\\/g,"\\\\");a[c]=e.replace(/\n/g,"\\\n")}return a.join("\n")},inlineEditActive:function(){return!(!this._inline||"none"==this._inline.style.display||!this._inline.eb)},show:function(a){this._widget=davinci.ve.widget.byId(a);
this._inline||this._createInline();a=dojo.hitch(this,function(a){this._inline.style.display="block";this.setFormat(a);a=e.decode(a,[["\x26","amp"],['"',"quot"],["\x3c","lt"],["\x3e","gt"]]);this._inline.eb.set("value",String(a));this.updateFormats();this.help(!1);dijit.selectInputText(this._inline.eb.textbox);this.updateSimStyle();this._inline.eb.textbox.focus()});var c=this._node(this._widget),f=this.property,b="maq_innerText"===f?"innerHTML":f,g;f&&(c?g=dojo.attr(c,b):"innerHTML"===b||"textContent"==
b?(g=this._widget._srcElement.getElementText(this._context),g=g.replace(/\s+/g," ")):g=this._widget.attr(f));this.serialize?this.serialize(c||this._widget,a,g):f&&a(g)},_createInline:function(){},_connectHelpDiv:function(){var a=dojo.byId("davinci.ve.input.SmartInput_img_help");this._connection.push(dojo.connect(a,"onclick",this,"toggleHelp"));this._connection.push(dojo.connect(dijit.byId("davinci.ve.input.SmartInput_ok"),"_onSubmit",this,"onOk"));this._connection.push(dojo.connect(dijit.byId("davinci.ve.input.SmartInput_cancel"),
"onClick",this,"onCancel"))},_findSmartInputContainer:function(a){return document.body},_loading:function(a,c){this._widget&&this._widget._edit_context||console.error("have no widget");var d=this._widget._edit_context.frameNode,b=d.ownerDocument,e=b.createElement("div"),f=this._findSmartInputContainer(d);if(f){f.appendChild(e);this._loadingDiv=e;dojo.addClass(e,"smartInputLoading");e=b.createElement("div");e.id="ieb";dojo.addClass(e,"inlineEdit dijitTooltipContainer");b=b.createElement("div");b.id=
"iebPointer";this._inline=e;f.appendChild(e);f.appendChild(b);var g=new dojo.dnd.Moveable("ieb");this._connection.push(dojo.connect(g,"onMoveStart",this,"onMoveStart"));this._connection.push(dojo.connect(g,"onMoveStop",this,"onMoveStop"));this._inline=new ContentPane({},e);e=k.byId("editorsStackContainer").domNode;k.byId("editorsStackContainer");e=m.position(e);this._loadingDiv.style.position="absolute";this._loadingDiv.style.left=e.x+"px";this._loadingDiv.style.top=e.y+"px";this._loadingDiv.style.width=
e.w+"px";this._loadingDiv.style.height=e.h+"px";var e=this._widget.getMarginBox(),g=dojo.position(d),n=dojo.position(f),d=g.x-n.x+f.scrollLeft-1,g=g.y-n.y+f.scrollTop-1,A=f.clientWidth,n=26,x=0;e.y+a+26<f.clientHeight?(n=e.y+26,dojo.addClass(b,"inlineEditConnectorBelow")):0<e.y-a?(n=e.y-a,x=a+12):n=26;a="0";e.x+c+20<A?a=e.x:e.x+c>A&&(c=e.x-c+e.w,0>c&&(c=0),a=c);a+=d;n+=g;this._inline._setStyleAttr({display:"block",top:n+"px",left:a+"px",padding:"1px",overflow:"hidden",backgroundImage:"none"});this._startTop=
n;this._startLeft=a;dojo.style(b,"left",e.x+20+d+"px");dojo.style(b,"top",n+x+this._POINTER_TOP_OFFSET+"px")}},handleEvent:function(a){switch(a.keyCode){case 13:var c=this.multiLine;if(!c||"false"==c||13==this._lastKeyCode||a.ctrlKey)this.onOk();else if(a.which==dojo.keys.ENTER&&a.ctrlKey)this.onOk();break;case 27:this.onCancel();break;default:this.updateFormats()}this._lastKeyCode=a.keyCode;this.updateSimStyle()},onOk:function(a){this.hide()},onCancel:function(a){this.hide(!0)},onMoveStart:function(a){dojo.style("iebPointer",
"display","none")},onMoveStop:function(a){var c=dojo.style("ieb","left");a=dojo.style("ieb","top");c=this._startLeft-c;a-=this._startTop;a<this._Y_MOVE_RANGE&&a>-this._Y_MOVE_RANGE?(dojo.style("iebPointer","display",""),dojo.style("iebPointer","top",this._startTop+this._POINTER_TOP_OFFSET+a+"px"),c<this._X_MOVE_RANGE&&c>-this._X_MOVE_RANGE?dojo.style("iebPointer","display",""):dojo.style("iebPointer","display","none")):dojo.style("iebPointer","display","none")},stopEvent:function(a){a.stopPropagation();
this.updateSimStyle()},stopEvent_Intercept_Enter:function(a){this.stopEvent(a);13!=a.keyCode||this.multiLine||a.preventDefault()},_node:function(){var a,c=this.path,e=this.selector;if(c||e)a=this._widget.domNode,c&&(a=dojo.getObject(c,!1,this._widget)),e&&(a=dojo.query(e,a)[0]);return a},updateWidget:function(a){if(!this._widget._destroyed){this.parse&&(a=this.parse(a));var c=this._node(this._widget),e=this._widget.getContext(),b=this.property,f="maq_innerText"===b?"innerHTML":b;if(this.update){if(a=
this.update(c||this._widget,a,b))this._widget=a;e.select(this._widget,null,!1)}else if(b){if(c)dojo.attr(c,f,a);else{c={};a&&"string"==typeof a&&(a=a.replace(/\n/g,""));var k=null;"textContent"==b?k=a:c[b]=a;"innerHTML"===f?(c.richText=c[b],delete c[b],a=new g(this._widget,c,null,e)):a=new davinci.ve.commands.ModifyCommand(this._widget,c,k,e);this._widget._edit_context.getCommandStack().execute(a);this._widget=a.newWidget;this._widget._edit_context._focuses[0]._selectedWidget=this._widget}e.select(this._widget,
null,!1)}}},hide:function(a){if(this._inline){for(var c;connection=this._connection.pop();)connection&&dojo.disconnect(connection);var f=this._findSmartInputContainer(this._widget._edit_context.frameNode);if(f&&(this._loadingDiv&&f.removeChild(this._loadingDiv),"none"!=this._inline.style.display&&this._inline.eb)){this._value=c=this._inline.eb.get("value");this._format=this.getFormat();this._inline.style.display="none";this._inline.eb&&(this._inline.eb.destroyRecursive(),delete this._inline.eb);this._inline.destroyRecursive();
delete this._inline;var b=f.ownerDocument.getElementById("iebPointer");f.removeChild(b);null==c||a||(this.disableEncode||"text"!==this._format||(c=e.encode(c)),this.updateWidget(c));this._widget.getContext().getDocument().defaultView.focus()}}},getFormat:function(){var a=dijit.byId("davinci.ve.input.SmartInput_radio_html"),c="text";a&&a.checked&&(c="html");return c},containsHtmlMarkUp:function(a){return 0<dojo.create("div",{innerHTML:a}).children.length},toggleHelp:function(){var a=dojo.byId("davinci.ve.input.SmartInput_img_help");
dojo.hasClass(a,"inlineEditHelpSelected")?this.help(!1):this.help(!0);dojo.toggleClass(a,"inlineEditHelpSelected")},setFormat:function(a){var c=dijit.byId("davinci.ve.input.SmartInput_radio_html"),e=dijit.byId("davinci.ve.input.SmartInput_radio_text");a=dojo.create("div",{innerHTML:a}).children.length?"html":"text";"html"===a?(c.set("checked",!0),e.set("checked",!1)):(c.set("checked",!1),e.set("checked",!0));this._format=a},help:function(a){var c=dojo.byId("davinci.ve.input.SmartInput_div_help");
dojo.byId("davinci.ve.input.SmartInput_radio_div");a?dojo.style(c,"display",""):dojo.style(c,"display","none")},updateFormats:function(){var a=this._inline.eb.get("value"),d=!0;this.containsHtmlMarkUp(a)&&(d=!1);this._widget.getContext().getDojo();var f=dojo.byId("davinci.ve.input.SmartInput_radio_text_width_div"),a=e.encode(a);f.innerHTML='\x3cdiv class\x3d"dojoxEllipsis"\x3e'+dojo.replace("Plain text ({0})",[a])+"\x3c/div\x3e";a=dojo.byId("davinci.ve.input.SmartInput_radio_html_width_div");a.innerHTML=
'\x3cdiv id\x3d"davinci.ve.input.SmartInput_radio_html_div" class\x3d"dojoxEllipsis"\x3e'+c.htmlMarkup+"\x3c/div\x3e";var b=dijit.byId("davinci.ve.input.SmartInput_radio_html"),g=dijit.byId("davinci.ve.input.SmartInput_radio_text"),k=dojo.byId("davinci.ve.input.SmartInput_table");b.setDisabled(d);g.setDisabled(d);d?(dojo.addClass(f,"inlineEditDisabled"),dojo.addClass(a,"inlineEditDisabled"),b.set("checked",!1),g.set("checked",!0)):(dojo.removeClass(f,"inlineEditDisabled"),dojo.removeClass(a,"inlineEditDisabled"));
!d&&this.isHtmlSupported()?(dojo.style(g.domNode,"display",""),dojo.style(b.domNode,"display",""),dojo.style(a,"display",""),dojo.style(f,"display",""),dojo.style(k,"display","")):(dojo.style(g.domNode,"display","none"),dojo.style(b.domNode,"display","none"),dojo.style(a,"display","none"),dojo.style(f,"display","none"),dojo.style(k,"display","none"))},resize:function(a){a=dojo.byId("iedResizeDiv");var c=dijit.byId("davinciIleb"),e=a.clientWidth-5,b=a.clientHeight-6,f=a.clientWidth-10,e=a.clientWidth-
8,b=a.clientHeight-20,f=a.clientWidth-9,g=dojo.byId("smartInputSim");dojo.style(g,"width",e+10+"px");this.updateSimStyle();c&&(c._setStyleAttr({width:e+"px",height:b+"px",maxHeight:b+"px"}),c._setStyleAttr({width:a.clientWidth+"px"}));c=dojo.byId("davinci.ve.input.SmartInput_radio_div");dojo.style(c,"width",f+2+"px");c=dojo.byId("davinci.ve.input.SmartInput_radio_text_width_div");dojo.style(c,"width",a.clientWidth-50+"px");c=dojo.byId("davinci.ve.input.SmartInput_radio_html_width_div");dojo.style(c,
"width",a.clientWidth-50+"px")},onBlur:function(a){this.updateSimStyle(a)},updateSimStyle:function(a){var c=dijit.byId("davinciIleb");if(a=dojo.byId("smartInputSim"))c=dojo.style(c.domNode),dojo.style(a,"borderColor",c.borderTopColor),dojo.style(a,"backgroundColor",c.backgroundColor)},_getTemplate:function(){var a='\x3cdiv id\x3d"iedResizeDiv" class\x3d"iedResizeDiv" \x3e\x3ctextarea  dojoType\x3d"dijit.form.SimpleTextarea" name\x3d"davinciIleb" trim\x3d"true" id\x3d"davinciIleb" class\x3d"smartInputTextArea" \x3e\x3c/textarea\x3e\x3cdiv id\x3d"smartInputSim" class\x3d"smartInputSim" \x3e\x3c/div\x3e\x3c/div\x3e';
"true"===this.multiLine&&(a='\x3cdiv id\x3d"iedResizeDiv" class\x3d"iedResizeDiv" \x3e\x3ctextarea  dojoType\x3d"dijit.form.SimpleTextarea" name\x3d"davinciIleb" trim\x3d"true" id\x3d"davinciIleb" class\x3d"smartInputTextAreaMulti" \x3e\x3c/textarea\x3e\x3cdiv id\x3d"smartInputSim" class\x3d"smartInputSim" \x3e\x3c/div\x3e\x3c/div\x3e');return""+a+'\x3cdiv  id\x3d"davinci.ve.input.SmartInput_div"  class\x3d"davinciVeInputSmartInputDiv" \x3e\x3cdiv id\x3d"davinci.ve.input.SmartInput_radio_div" class\x3d"smartInputRadioDiv" \x3e\x3ctable id\x3d"davinci.ve.input.SmartInput_table"\x3e \x3ctbody\x3e\x3ctr\x3e \x3ctd class\x3d"smartInputTd1" \x3e \x3cinput id\x3d"davinci.ve.input.SmartInput_radio_text" showlabel\x3d"true" type\x3d"radio" dojoType\x3d"dijit.form.RadioButton" disabled\x3d"false" readOnly\x3d"false" intermediateChanges\x3d"false" checked\x3d"true"\x3e \x3c/input\x3e \x3c/td\x3e \x3ctd class\x3d"smartInputTd2" \x3e\x3cdiv id\x3d"davinci.ve.input.SmartInput_radio_text_width_div" class\x3d"smartInputRadioTextDiv"\x3e\x3c/div\x3e\x3c/td\x3e \x3c/tr\x3e\x3ctr\x3e \x3ctd class\x3d"smartInputTd1"\x3e \x3cinput id\x3d"davinci.ve.input.SmartInput_radio_html" showlabel\x3d"true" type\x3d"radio" dojoType\x3d"dijit.form.RadioButton"\x3e \x3c/input\x3e  \x3c/td\x3e \x3ctd class\x3d"smartInputTd2"\x3e\x3cdiv id\x3d"davinci.ve.input.SmartInput_radio_html_width_div" class\x3d"smartInputRadioTextDiv"\x3e\x3c/div\x3e\x3c/td\x3e \x3c/tr\x3e \x3c/tbody\x3e\x3c/table\x3e \x3cdiv class\x3d"smartInputHelpDiv" \x3e \x3cspan id\x3d"davinci.ve.input.SmartInput_img_help"  title\x3d"Help" class\x3d"inlineEditHelp" \x3e \x3c/span\x3e\x3cspan class\x3d"smartInputSpacerSpan" \x3e\x3cbutton id\x3d"davinci.ve.input.SmartInput_ok"  dojoType\x3d"dijit.form.Button" type\x3d"submit" class\x3d"inlineEditHelpOk" \x3e'+
f.buttonOk+'\x3c/button\x3e \x3cbutton id\x3ddavinci.ve.input.SmartInput_cancel dojoType\x3d"dijit.form.Button" class\x3d"inlineEditHelpCancel"\x3e '+f.buttonCancel+'\x3c/button\x3e  \x3c/span\x3e   \x3c/div\x3e \x3cdiv id\x3d"davinci.ve.input.SmartInput_div_help" style\x3d"display:none;" class\x3d"smartInputHelpTextDiv" \x3e \x3cdiv dojoType\x3d"dijit.layout.ContentPane" class\x3d"smartInputHelpTextDivContentPane "style\x3d"padding:0;" \x3e'+this.getHelpText()+'\x3c/div\x3e \x3cdiv style\x3d"text-align: left; padding:0; height:2px;" \x3e\x3c/div\x3e \x3c/div\x3e \x3c/div\x3e\x3c/div\x3e '},
_connectResizeHandle:function(){},_connectSimDiv:function(){this._connection.push(dojo.connect(this._inline.eb,"onFocus",this,"updateSimStyle"));this._connection.push(dojo.connect(this._inline.eb,"onMouseOver",this,"updateSimStyle"));this._connection.push(dojo.connect(this._inline.eb,"onMouseOut",this,"updateSimStyle"));this._connection.push(dojo.connect(dojo.byId(" davinci.ve.input.SmartInput_div"),"onclick",this,"updateSimStyle"))}})})},"davinci/ve/commands/ModifyRichTextCommand":function(){define(["dojo/_base/declare"],
function(n){return n("davinci.ve.commands.ModifyRichTextCommand",null,{name:"modify",constructor:function(m,g,e,c){this._oldId=m?m.id:void 0;this._properties=g=g||{};g.richText?(this._richText=!0,this._children=this._newText=g.richText,delete g.richText):this._children=g._children;this._context=c||m.getContext()},setContext:function(m){this._context=m},add:function(m){m&&m._oldId==this._oldId&&(m._properties&&dojo.mixin(this._properties,m._properties),m._children&&(this._children=m._children))},execute:function(){if(this._oldId&&
this._properties){var m=require("davinci/ve/widget"),g=m.byId(this._oldId);if(g){this._parentWidget=g.getParent();this._oldText||(this._oldText=g._srcElement.getElementText(this._context))&&"string"==typeof this._oldText&&(this._oldText=this._oldText.replace(/\n/g,""));this._oldData||(this._oldData=g.getData(),this._oldData.context=this._context,this._newData={type:this._oldData.type,properties:dojo.mixin({},this._oldData.properties,this._properties),children:this._newText,maqStates:this._oldData.maqStates,
maqDeltas:this._oldData.maqDeltas,context:this._context},this._oldData={type:this._oldData.type,properties:dojo.mixin({},this._oldData.properties,this._properties),children:this._oldText,maqStates:this._oldData.maqStates,maqDeltas:this._oldData.maqDeltas,context:this._context});var e=this._context;e&&e.detach(g);this._properties.id&&delete this._newData.properties.isTempID;this._newId_isTempID||(this._newId_isTempID=this._newData.properties.isTempID);this._oldId_isTempID||(this._oldId_isTempID=this._oldData.properties.isTempID);
var c=null,f=this._parentWidget.indexOf(g);this._parentWidget.removeChild(g);g.destroyWidget();this._newId&&(this._newData.properties.id=this._newId);this._newId_isTempID&&(this._newData.properties.isTempID=this._newId_isTempID);if(c=m.createWidget(this._newData))this._parentWidget.addChild(c,f),this._newId=c.id,this._context&&this._refresh(c),e&&(e.widgetAddedOrDeleted(),this._oldId!=this._newId&&e.widgetChanged(e.WIDGET_ID_CHANGED,c,this._oldId),e.widgetChanged(e.WIDGET_MODIFIED,c)),this.newWidget=
c,dojo.publish("/davinci/ui/widget/replaced",[c,g]),require("davinci/ve/States").resetState(c.domNode)}}},undo:function(){if(this._newId&&this._oldData){var m=require("davinci/ve/widget"),g=m.byId(this._newId);if(g){var e=dojo.indexOf(this._parentWidget.getChildren(),g);if(!(0>e)){var c=this._parentWidget.getContext();c&&c.detach(g);this._parentWidget.removeChild(g);g.destroyWidget();this._oldData.children=this._oldText;this._oldData.properties.id=this._oldId;m=m.createWidget(this._oldData);this._parentWidget.addChild(m,
e);c&&this._refresh(m);c.widgetAddedOrDeleted();c.widgetChanged(c.WIDGET_MODIFIED,m);dojo.publish("/davinci/ui/widget/replaced",[m,g]);require("davinci/ve/States").resetState(m.domNode)}}}},_refresh:function(m){var g=m.getContainerNode();g&&this._context.getGlobal().require("dojo/parser").parse(g);this._context.attach(m);m.startup();m.renderWidget();g&&this._context._attachChildren(g)}})})},"url:davinci/workbench/templates/Preferences.html":"\x3cdiv style\x3d'width:100%; height: 100%'\x3e\n\t\x3cdiv class\x3d\"dijitDialogPaneContentArea\"\x3e\n\t\t\x3cdiv dojoType\x3d'dijit.layout.BorderContainer' dojoAttachPoint\x3d\"borderContainer\" style\x3d'width:100%; height: 100%' gutters\x3d'false' liveSplitters\x3d'true' id\x3d'preferencesContainer'\x3e\n\t\t\t\x3cdiv dojoType\x3d'dijit.layout.ContentPane' id\x3d'pref.TreePane' splitter\x3d'true' region\x3d'leading' style\x3d'width: 200px;' minSize\x3d'100' maxSize\x3d'300'\x3e\x3c/div\x3e\n\t\t\t\x3cdiv dojoType\x3d'dijit.layout.ContentPane' region\x3d'center' id\x3d'pref.RightPane'\x3e\x3c/div\x3e\n\t\t\x3c/div\x3e\n\t\x3c/div\x3e\n\t\x3cdiv class\x3d\"dijitDialogPaneActionBar\"\x3e\n\t\t\x3c!-- FIXME: we don't have logic to yet implement restoreDefaults() yet. See #627\n\t\t\x3cbutton dojoType\x3ddijit.form.Button type\x3d\"button\" onclick\x3d\"davinci.workbench.Preferences.restoreDefaults();\"\x3e\x3c/button\x3e--\x3e\n\t\t\x3cbutton dojoType\x3d\"dijit.form.Button\" type\x3d\"button\" onclick\x3d\"davinci.workbench.Preferences.save();\" class\x3d\"maqPrimaryButton\" type\x3d\"submit\"\x3e${commonStrings.buttonSave}\x3c/button\x3e\n\t\t\x3cbutton dojoType\x3d\"dijit.form.Button\" type\x3d\"button\" onclick\x3d\"davinci.workbench.Preferences.finish();\" class\x3d\"maqSecondaryButton\"\x3e${commonStrings.buttonCancel}\x3c/button\x3e\n\t\x3c/div\x3e\n\x3c/div\x3e\n\n\n",
"url:davinci/ve/widgets/templates/BackgroundDialog.html":"\x3cdiv class\x3d\"backgroundDialog\" style\x3d\"position:relative\" dojoAttachPoint\x3d\"_fileDialog\"\x3e\n\t\x3cstyle type\x3d\"text/css\"\x3e\n\t\t.backgroundDialog {\n\t\t\twidth:31em;\n\t\t}\n\t\t.bgdTopDiv {\n\t\t\tmargin-top: 4px;\n\t\t\tpadding-left: .75em;\n\t\t}\n\t\t.bgdTopTable {\n\t\t\twidth:100%;\n\t\t\tborder-collapse:collapse;\n\t\t}\n\t\t.bgdTopLabel, .bgdTopField, .bgdTopPreview {\n\t\t\twidth:1px;\n\t\t\twhite-space:nowrap;\n\t\t}\n\t\t.bgdTopLabel {\n\t\t\ttext-align:right;\n\t\t\tpadding-right:6px;\n\t\t}\n\t\t.bgdTopTable .dijitSelect .dijitButtonContents {\n\t\t\twidth:8em;\n\t\t}\n\t\t.bgdTopTable .dijitTextBox {\n\t\t\twidth: 9.8em;\n\t\t}\n\t\t.bgdPreview {\n\t\t\tdisplay:inline-block;\n\t\t\twidth: 6em;\n\t\t\theight: 2.8em;\n\t\t\tmargin-left:12px;\n\t\t\tborder:1px solid gray;\n\t\t\tvertical-align: middle;\n\t\t}\n\t\t.bgdOptionsDiv {\n\t\t\tmargin:0.3em 0em 1em 1em;\n\t\t}\n\t\t.bgdOptionsDiv \x3e table {\n\t\t\twidth:27em;\n\t\t}\n\t\t.bgdSection {\n\t\t\tbackground-color:#d8d8d8;\n\t\t}\n\t\tdiv.bgdSection, .bgdSection td, .bgdSection.bgdUrlSectionLabel {\n\t\t\tpadding:2px 5px;\n\t\t}\n\t\t.bgdBeforeStopsLabel {\n\t\t\theight:6px;\n\t\t}\n\t\t.bgdStopsLabel {\n\t\t\tmargin-top:1em;\n\t\t}\n\t\t.bgdAfterStopsLabel {\n\t\t\theight:0px;\n\t\t}\n\t\t.bgdBeforeOptionsLabel {\n\t\t\theight:16px;\n\t\t}\n\t\t.bgdOptionsLabel {\n\t\t\tmargin-top:1em;\n\t\t}\n\t\t.bgdAfterOptionsLabel {\n\t\t\theight:4px;\n\t\t}\n\t\t.bgdCol1 {\n\t\t\twidth:10px;\n\t\t}\n\t\t.bgdPlusMinusButtons {\n\t\t\twhite-space:nowrap;\n\t\t\twidth:51px;\n\t\t}\n\t\t.bgdOptionsDiv th {\n\t\t\ttext-align:center;\n\t\t\tfont-style:italic;\n\t\t}\n\t\t.bgdOptsLabel {\n\t\t\ttext-align:right;\n\t\t\tpadding-right: 6px;\n\t\t\twhite-space:nowrap;\n\t\t}\n\t\t.bgdColor.dijitTextBox {\n\t\t\twidth:9em;\n\t\t}\n\t\t.bgdOptionsDiv .bgdPosition.dijitTextBox {\n\t\t\twidth:5em;\n\t\t}\n\t\t.bgdOptionsDiv .dijitTextBox {\n\t\t\twidth:10.6em;\n\t\t}\n\t\t.bgdStopColorTD .dijitTextBox {\n\t\t\twidth:14em;\n\t\t}\n\t\t.bgdOptionsDiv .dijitSelect {\n\t\t\tmargin:0;\n\t\t}\n\t\t.bgdOptionsDiv .dijitSelect .dijitButtonContents {\n\t\t\twidth:9em;\n\t\t}\n\t\t.bgdUrlContainerOuter {\n\t\t\tmargin-top:1em;\n\t\t\tmargin-left:1em;\n\t\t}\n\t\t.bgdUrlContainerInner {\n\t\t\tmargin:0 1em;\n\t\t}\n\t\t.bgdUrlSectionLabel {\n\t\t\tmargin:1em 0 .25em;\n\t\t}\n\t\t.bgdFileTreeContainer {\n\t\t\tmargin: 0 0 0 3px;\n\t\t\tborder: 1px solid #26A;\n\t\t}\n\t\t.bgdFileTreeContainer .dijitTree {\n\t\t\theight:125px;\n\t\t}\t\t\n\t\t.backgroundDialog .fileNameRow  {\n\t\t\tmargin:8px 0 .4em;\n\t\t}\n\t\t.backgroundDialog .fileNameRow label {\n\t\t\tvertical-align:middle;\n\t\t\tmargin-right:4px;\n\t\t}\n\t\t.backgroundDialog .fileNameRow .dijitTextBox {\n\t\t\twidth:16em;\n\t\t}\n\t\t.bgdOptionsDiv .bgdOtherRow .dijitTextBox {\n\t\t\twidth:15em;\n\t\t}\n\t\t\n\t\x3c/style\x3e\n\n\t\x3cdiv class\x3d\"dijitDialogPaneContentArea\"\x3e\n\t\t\x3cdiv class\x3d'bgdTopDiv'\x3e\n\t\t\t\x3ctable class\x3d'bgdTopTable'\x3e\n\t\t\t\t\x3ctr\x3e\n\t\t\t\t\t\x3ctd class\x3d'bgdTopLabel'\x3e\x3clabel class\x3d'bgdTypeDivTypeLabel'\x3e${veNLS.bgdBackgroundColor}\x3c/label\x3e\x3c/td\x3e\n\t\t\t\t\t\x3ctd class\x3d'bgdTopField'\x3e\n\t\t\t\t\t\t\x3cselect dojoType\x3d\"dijit.form.ComboBox\" dojoAttachPoint\x3d'bgdColorCB'\x3e\n\t\t\t\t\t\t\t\x3c!--  values added dynamically --\x3e\n\t\t\t\t\t\t\x3c/select\x3e\n\t\t\t\t\t\x3c/td\x3e\n\t\t\t\t\t\x3ctd rowspan\x3d'2' class\x3d'bgdTopPreview' style\x3d'border-collapse:collapse'\x3e\x3cspan class\x3d'bgdPreview'\x3e\x3c/span\x3e\x3c/td\x3e\n\t\t\t\t\t\x3ctd class\x3d'bgdTopExpando'\x3e\x26nbsp;\x3c/td\x3e\n\t\t\t\t\x3c/tr\x3e\n\t\t\t\t\x3ctr\x3e\n\t\t\t\t\t\x3ctd class\x3d'bgdTopLabel'\x3e\x3clabel class\x3d'bgdTypeDivTypeLabel'\x3e${veNLS.bgdBackgroundImageType}\x3c/label\x3e\x3c/td\x3e\n\t\t\t\t\t\x3ctd class\x3d'bgdTopField'\x3e\n\t\t\t\t\t\t\x3cselect dojoType\x3d'dijit.form.Select' value\x3d'linear' dojoAttachPoint\x3d'bgdTypeSelect'\x3e\n\t\t\t\t\t\t\t\x3c!--  values added dynamically --\x3e\n\t\x3c!-- FIXME: Add plain text type-in box if unrecognized syntax --\x3e\n\t\t\t\t\t\t\x3c/select\x3e\n\t\t\t\t\t\x3c/td\x3e\n\t\t\t\t\t\x3ctd class\x3d'bgdTopExpando'\x3e\x26nbsp;\x3c/td\x3e\n\t\t\t\t\x3c/tr\x3e\n\t\t\t\x3c/table\x3e\n\t\t\x3c/div\x3e\n\t\t\n\t\t\x3cdiv class\x3d\"bgdUrlContainerOuter bgdImageOptRow\"\x3e\n\t\t\t\x3cdiv class\x3d\"bgdSection bgdOptionsLabel\"\x3e${veNLS.bgdImageUrl}\x3c/div\x3e\n\t\t\t\x3cdiv class\x3d\"bgdUrlContainerInner\"\x3e\n\t\t\t\t\x3cdiv class\x3d'fileNameRow'\x3e\n\t\t\t\t\t\x3ctd class\x3d\"fileDialogLabelCell\"\x3e\n\t\t\t\t\t\x3clabel\x3e${veNLS.bgdUrl}\x3c/label\x3e\n\t\t\t\t\t\x3c/td\x3e\n\t\t\t\t\t\x3ctd\x3e\n\t\t\t\t\t\x3cdiv dojoType\x3d'davinci.ui.widgets.FileFieldDialog' dojoAttachPoint\x3d\"_filePicker\"\x3e\x3c/div\x3e\n\t\t\t\t\t\x3c/td\x3e\n\t\t\t\t\x3c/div\x3e\n\t\t\t\x3c/div\x3e\n\t\t\x3c/div\x3e\n\t\t\x3cdiv class\x3d\"bgdOptionsDiv\"\x3e\n\t\t\t\x3ctable\x3e\n\t\t\t\t\x3ctr class\x3d\"bgdGradOptRow bgdBeforeStopsLabel\"\x3e\x3c/tr\x3e\n\t\t\t\t\x3ctr class\x3d\"bgdGradOptRow bgdSection bgdStopsLabel\"\x3e\n\t\t\t\t\t\x3ctd colspan\x3d\"5\"\x3e${veNLS.bgdColorStops}\x3c/td\x3e\n\t\t\t\t\x3c/tr\x3e\n\t\t\t\t\x3ctr class\x3d\"bgdGradOptRow bgdAfterStopsLabel\"\x3e\x3c/tr\x3e\n\t\t\t\t\x3ctr class\x3d'bgdGradOptRow bgdStopRow'\x3e\n\t\t\t\t\t\x3cth\x3e\x3c/th\x3e\x3cth\x3e\x3c/th\x3e\x3cth\x3e${veNLS.bgdColor}\x3c/th\x3e\x3cth\x3e${veNLS.bgdPosition}\x3c/th\x3e\x3cth\x3e\x3c/th\x3e\n\t\t\t\t\x3c/tr\x3e\n\t\t\t\t\x3c!--  gradient stop rows added dynamically --\x3e\n\t\t\t\t\x3ctr class\x3d\"bgdBeforeOptionsLabel bgdOptionsLabelRow\"\x3e\x3c/tr\x3e\n\t\t\t\t\x3ctr class\x3d\"bgdSection bgdOptionsLabel bgdOptionsLabelRow\"\x3e\n\t\t\t\t\t\x3ctd colspan\x3d\"5\"\x3e${veNLS.bgdOptions}\x3c/td\x3e\n\t\t\t\t\x3c/tr\x3e\n\t\t\t\t\x3ctr class\x3d\"bgdAfterOptionsLabel bgdOptionsLabelRow\"\x3e\x3c/tr\x3e\n\t\t\t\t\x3ctr class\x3d\"bgdGradOptRow bgdLinearOptRow\"\x3e\t\n\t\t\t\t\t\x3ctd class\x3d'bgdCol1'\x3e\x3c/td\x3e\n\t\t\t\t\t\x3ctd class\x3d'bgdOptsLabel'\x3e\x3clabel\x3e${veNLS.bgdAngle}\x3c/label\x3e\x3c/td\x3e\n\t\t\t\t\t\x3ctd colspan\x3d'3'\x3e\n\t\t\t\t\t\t\x3cselect dojoType\x3d\"dijit.form.ComboBox\" dojoAttachPoint\x3d'bgdLinearAngleCB'\x3e\n\t\t\t\t\t\t\t\x3c!--  values added dynamically --\x3e\n\t\t\t\t\t\t\x3c/select\x3e\n\t\t\t\t\t\x3c/td\x3e\n\t\t\t\t\x3c/tr\x3e\n\t\t\t\t\x3ctr class\x3d\"bgdGradOptRow bgdRadialOptRow\"\x3e\t\n\t\t\t\t\t\x3ctd class\x3d'bgdCol1'\x3e\x3c/td\x3e\n\t\t\t\t\t\x3ctd class\x3d'bgdOptsLabel'\x3e${veNLS.bgdPosition2}\x3c/td\x3e\n\t\t\t\t\t\x3ctd colspan\x3d'3'\x3e\n\t\t\t\t\t\t\x3cselect dojoType\x3d\"dijit.form.ComboBox\" dojoAttachPoint\x3d'bgdRadialPosCB'\x3e\n\t\t\t\t\t\t\t\x3c!--  values added dynamically --\x3e\n\t\t\t\t\t\t\x3c/select\x3e\n\t\t\t\t\t\x3c/td\x3e\n\t\t\t\t\x3c/tr\x3e\n\t\t\t\t\x3ctr dojoAttachPoint\x3d\"bgdShapeRow\" class\x3d\"bgdGradOptRow bgdRadialOptRow\"\x3e\t\n\t\t\t\t\t\x3ctd class\x3d'bgdCol1'\x3e\x3c/td\x3e\n\t\t\t\t\t\x3ctd class\x3d'bgdOptsLabel'\x3e\x3clabel\x3e${veNLS.bgdShape}\x3c/label\x3e\x3c/td\x3e\n\t\t\t\t\t\x3ctd colspan\x3d'3'\x3e\n\t\t\t\t\t\t\x3cselect dojoType\x3d\"dijit.form.ComboBox\" dojoAttachPoint\x3d'bgdRadialShapeCB'\x3e\n\t\t\t\t\t\t\t\x3c!--  values added dynamically --\x3e\n\t\t\t\t\t\t\x3c/select\x3e\n\t\t\t\t\t\x3c/td\x3e\n\t\t\t\t\x3c/tr\x3e\n\t\t\t\t\x3ctr dojoAttachPoint\x3d\"bgdExtentRow\" class\x3d\"bgdGradOptRow bgdRadialOptRow\"\x3e\t\n\t\t\t\t\t\x3ctd class\x3d'bgdCol1'\x3e\x3c/td\x3e\n\t\t\t\t\t\x3ctd class\x3d'bgdOptsLabel'\x3e\x3clabel\x3e${veNLS.bgdExtent}\x3c/label\x3e\x3c/td\x3e\n\t\t\t\t\t\x3ctd colspan\x3d'3'\x3e\n\t\t\t\t\t\t\x3cselect dojoType\x3d\"dijit.form.ComboBox\" dojoAttachPoint\x3d'bgdRadialExtentCB'\x3e\n\t\t\t\t\t\t\t\x3c!--  values added dynamically --\x3e\n\t\t\t\t\t\t\x3c/select\x3e\n\t\t\t\t\t\x3c/td\x3e\n\t\t\t\t\x3c/tr\x3e\n\t\t\t\t\x3ctr dojoAttachPoint\x3d\"bgdRepeatRow\" class\x3d\"bgdImageOptRow\"\x3e\t\n\t\t\t\t\t\x3ctd class\x3d'bgdCol1'\x3e\x3c/td\x3e\n\t\t\t\t\t\x3ctd class\x3d'bgdOptsLabel'\x3e\x3clabel\x3e${veNLS.bgdBackgroundRepeat}\x3c/label\x3e\x3c/td\x3e\n\t\t\t\t\t\x3ctd colspan\x3d'3'\x3e\n\t\t\t\t\t\t\x3cselect dojoType\x3d\"dijit.form.ComboBox\" dojoAttachPoint\x3d'bgdRepeatCB'\x3e\n\t\t\t\t\t\t\t\x3c!--  values added dynamically --\x3e\n\t\t\t\t\t\t\x3c/select\x3e\n\t\t\t\t\t\x3c/td\x3e\n\t\t\t\t\x3c/tr\x3e\n\t\t\t\t\x3ctr dojoAttachPoint\x3d\"bgdPositionRow\" class\x3d\"bgdImageOptRow\"\x3e\t\n\t\t\t\t\t\x3ctd class\x3d'bgdCol1'\x3e\x3c/td\x3e\n\t\t\t\t\t\x3ctd class\x3d'bgdOptsLabel'\x3e${veNLS.bgdBackgroundPosition}\x3c/td\x3e\n\t\t\t\t\t\x3ctd colspan\x3d'3'\x3e\n\t\x3c!-- FIXME: regExp, invalidMessage --\x3e\n\t\t\t\t\t\t\x3cselect dojoType\x3d\"dijit.form.ComboBox\" dojoAttachPoint\x3d'bgdPositionCB'\x3e\n\t\t\t\t\t\t\t\x3c!--  values added dynamically --\x3e\n\t\t\t\t\t\t\x3c/select\x3e\n\t\t\t\t\t\x3c/td\x3e\n\t\t\t\t\x3c/tr\x3e\n\t\t\t\t\x3ctr dojoAttachPoint\x3d\"bgdSizeRow\" class\x3d\"bgdImageOptRow\"\x3e\t\n\t\t\t\t\t\x3ctd class\x3d'bgdCol1'\x3e\x3c/td\x3e\n\t\t\t\t\t\x3ctd class\x3d'bgdOptsLabel'\x3e${veNLS.bgdBackgroundSize}\x3c/td\x3e\n\t\t\t\t\t\x3ctd colspan\x3d'3'\x3e\n\t\x3c!-- FIXME: regExp, invalidMessage --\x3e\n\t\t\t\t\t\t\x3cselect dojoType\x3d\"dijit.form.ComboBox\" dojoAttachPoint\x3d'bgdSizeCB'\x3e\n\t\t\t\t\t\t\t\x3c!--  values added dynamically --\x3e\n\t\t\t\t\t\t\x3c/select\x3e\n\t\t\t\t\t\x3c/td\x3e\n\t\t\t\t\x3c/tr\x3e\n\t\t\t\t\x3ctr dojoAttachPoint\x3d\"bgdOriginRow\" class\x3d\"bgdImageOptRow\"\x3e\t\n\t\t\t\t\t\x3ctd class\x3d'bgdCol1'\x3e\x3c/td\x3e\n\t\t\t\t\t\x3ctd class\x3d'bgdOptsLabel'\x3e\x3clabel\x3e${veNLS.bgdBackgroundOrigin}\x3c/label\x3e\x3c/td\x3e\n\t\t\t\t\t\x3ctd colspan\x3d'3'\x3e\n\t\t\t\t\t\t\x3cselect dojoType\x3d\"dijit.form.ComboBox\" dojoAttachPoint\x3d'bgdOriginCB'\x3e\n\t\t\t\t\t\t\t\x3c!--  values added dynamically --\x3e\n\t\t\t\t\t\t\x3c/select\x3e\n\t\t\t\t\t\x3c/td\x3e\n\t\t\t\t\x3c/tr\x3e\n\t\t\t\t\x3ctr dojoAttachPoint\x3d\"bgdClipRow\" class\x3d\"bgdImageOptRow\"\x3e\t\n\t\t\t\t\t\x3ctd class\x3d'bgdCol1'\x3e\x3c/td\x3e\n\t\t\t\t\t\x3ctd class\x3d'bgdOptsLabel'\x3e\x3clabel\x3e${veNLS.bgdBackgroundClip}\x3c/label\x3e\x3c/td\x3e\n\t\t\t\t\t\x3ctd colspan\x3d'3'\x3e\n\t\t\t\t\t\t\x3cselect dojoType\x3d\"dijit.form.ComboBox\" dojoAttachPoint\x3d'bgdClipCB'\x3e\n\t\t\t\t\t\t\t\x3c!--  values added dynamically --\x3e\n\t\t\t\t\t\t\x3c/select\x3e\n\t\t\t\t\t\x3c/td\x3e\n\t\t\t\t\x3c/tr\x3e\n\t\t\t\t\x3ctr dojoAttachPoint\x3d\"bgdOtherTypeInRow\" class\x3d\"bgdOtherRow\"\x3e\t\n\t\n\t\t\t\t\t\x3ctd class\x3d'bgdCol1'\x3e\x3c/td\x3e\n\t\t\t\t\t\x3ctd class\x3d'bgdOptsLabel'\x3e\x3clabel\x3e${veNLS.bgdBackgroundImageValue}\x3c/label\x3e\x3c/td\x3e\n\t\t\t\t\t\x3ctd colspan\x3d'3'\x3e\n\t\t\t\t\t\t\x3ctextarea dojoType\x3d\"dijit.form.Textarea\" dojoAttachPoint\x3d'bgdOtherTA'\x3e\x3c/textarea\x3e\n\t\t\t\t\t\x3c/td\x3e\n\t\n\t\t\t\t\x3c/tr\x3e\n\t\n\t\t\t\x3c/table\x3e\n\t\t\x3c/div\x3e\n\t\x3c/div\x3e\n\n\t\x3c!--div class\x3d\"dijitDialogPaneActionBar\"\x3e\n\t\t\x3cspan dojoType\x3d'dijit.form.Button' dojoAttachPoint\x3d\"_okButton\" dojoAttachEvent\x3d'onClick:okButton' label\x3d'${buttonOk}' class\x3d\"maqPrimaryButton\" type\x3d\"submit\"\x3e\x3c/span\x3e \n\t\t\x3cspan dojoType\x3d'dijit.form.Button' dojoAttachEvent\x3d'onClick:cancelButton' label\x3d'${buttonCancel}' class\x3d\"maqSecondaryButton\"/\x3e\x3c/span\x3e \n\t\x3c/div--\x3e\n\x3c/div\x3e\n",
"url:davinci/ui/widgets/templates/FileFieldDialog.html":"\x3cdiv\x3e\n\t\x3cdiv style\x3d'float:right;'\x3e\n\t\t\x3cbutton type\x3d'button' style\x3d'font-size:.75em;float:right;' dojoType\x3d\"dijit.form.Button\" dojoAttachPoint\x3d\"button\" dojoAttachEvent\x3d\"onClick:_showFileSelectionDialog\"\x3e...\x3c/button\x3e\n\t\x3c/div\x3e\n\t\x3cdiv style\x3d'margin-right:35px;'\x3e\n\t\t\x3cinput style\x3d'width:100%;' type\x3d'text' dojoType\x3d\"dijit.form.TextBox\" dojoAttachPoint\x3d\"textField\" dojoAttachEvent\x3d\"onChange:_onChange\"\x3e\x3c/input\x3e\n\t\x3c/div\x3e\n\x3c/div\x3e\n\n",
"url:davinci/ve/actions/templates/ModifyState.html":'\x3cdiv\x3e\n\t\x3cdiv class\x3d"dijitDialogPaneContentArea"\x3e\n\t\t\x3cdiv class\x3d\'modify_state_container\'\x3e\n\t\t\t\x3cdiv data-dojo-type\x3d"dijit.form.DropDownButton" label\x3d\'${veNls.renameLabel}\' dojoAttachPoint\x3d"renameButton" class\x3d"modify_state_rename_button"\x3e\n\t\t\t\t\t\x3cdiv data-dojo-type\x3d"dijit.TooltipDialog" class\x3d\'modify_state_rename_container\' id\x3d\'state_rename_tooltip_dialog\'\x3e\n\t\t\t\t\t\t\x3cdiv\x3e\n\t\t\t\t\t\t\t\x3clabel for\x3d"state_rename_new_name"\x3e${veNls.newStateLabel}\x3c/label\x3e\n\t\t\t\t\t\t\t\x3cinput data-dojo-type\x3d"dijit.form.ValidationTextBox" id\x3d"state_rename_new_name" name\x3d"state_rename_new_name"\x3e\x3c/input\x3e\n\t\t\t\t\t\t\x3c/div\x3e\n\t\t\t\t\t\t\x3cdiv\x3e\n\t\t\t\t\t\t\t\x3cbutton id\x3d"state_rename_do_it" dojoType\x3d\'dijit.form.Button\' label\x3d\'${veNls.renameLabel}\'\x3e\x3c/button\x3e\n\t\t\t\t\t\t\t\x3cbutton id\x3d"state_rename_cancel" dojoType\x3d\'dijit.form.Button\' label\x3d\'${veNls.cancelLabel}\'\x3e\x3c/button\x3e\n\t\t\t\t\t\t\x3c/div\x3e\n\t\t\t\t\t\x3c/div\x3e\n\t\t\t\t\x3c/div\x3e\n\t\t\t${veNls.stateLabel}: \x3cspan id\x3d\'modify_state_old_name\'\x3eaaa\x3c/span\x3e\n\t\t\x3c/div\x3e\n\t\t\x3cdiv class\x3d\'initial_state_row\'\x3e\n\t\t\t\x3cinput data-dojo-type\x3d"dijit.form.CheckBox" dojoAttachPoint\x3d"initialState" id\x3d"modify_state_initial_state" name\x3d"modify_state_initial_state"\x3e\x3c/input\x3e\n\t\t\t\x3clabel for\x3d\'modify_state_initial_state\'\x3e${veNls.initialStateCheckBoxLabel}\x3c/label\x3e\n\t\t\x3c/div\x3e\n\t\x3c/div\x3e\n\t\t\t\t\n\t\x3cdiv class\x3d"dijitDialogPaneActionBar"\x3e\n\t\t\x3cbutton dojoType\x3d\'dijit.form.Button\' dojoAttachPoint\x3d"okButton" label\x3d\'${veNls.modifyLabel}\' class\x3d"maqPrimaryButton"\x3e\x3c/button\x3e\n\t\t\x3cbutton dojoType\x3d\'dijit.form.Button\' dojoAttachPoint\x3d"cancelButton" label\x3d\'${commonNls.buttonCancel}\' class\x3d"maqSecondaryButton"\x3e\x3c/button\x3e\n\t\x3c/div\x3e\n\x3c/div\x3e\n',
"url:davinci/ve/prefs/HtmlEditPreferences.html":"\x3cdiv\x3e\n\t\x3ctable style\x3d'margin: 4px;' cellspacing\x3d'4'\x3e\n\t\t\x3ctbody\x3e\n\t\t\t\x3c!--\n\t\t\t\x3ctr\x3e\n\t\t\t\t\x3ctd\x3e${_loc.flowLayout}:\x3c/td\x3e\n\t\t\t\t\x3ctd\x3e\n\t\t\t\t\t\x3cdiv dojoAttachPoint\x3d'flowBoxNode'\x3e\x3c/div\x3e\n\t\t\t\t\x3c/td\x3e\n\t\t\t\x3c/tr\x3e\n\t\t\t--\x3e\n\t\t\t\x3ctr\x3e\n\t\t\t\t\x3ctd\x3e${_loc.snapToNearestWidget}:\x3c/td\x3e\n\t\t\t\t\x3ctd\x3e\n\t\t\t\t\t\x3cdiv dojoAttachPoint\x3d'snapNode'\x3e\x3c/div\x3e\n\t\t\t\t\x3c/td\x3e\n\t\t\t\x3c/tr\x3e\n\t\t\t\x3ctr\x3e\n\t\t\t\t\x3ctd\x3e${_loc.showPossibleParents}:\x3c/td\x3e\n\t\t\t\t\x3ctd\x3e\n\t\t\t\t\t\x3cdiv dojoAttachPoint\x3d'showPossibleParentsNode'\x3e\x3c/div\x3e\n\t\t\t\t\x3c/td\x3e\n\t\t\t\x3c/tr\x3e\n\t\t\t\x3ctr\x3e\n\t\t\t\t\x3ctd\x3e${_loc.warnOnCSSOverride}:\x3c/td\x3e\n\t\t\t\t\x3ctd\x3e\n\t\t\t\t\t\x3cdiv dojoAttachPoint\x3d'cssOverrideWarn'\x3e\x3c/div\x3e\n\t\t\t\t\x3c/td\x3e\n\t\t\t\x3c/tr\x3e\n\t\t\t\x3ctr\x3e\n\t\t\t\t\x3ctd\x3e${_loc.absoluteWidgetsZindex}:\x3c/td\x3e\n\t\t\t\t\x3ctd\x3e\n\t\t\t\t\t\x3cdiv dojoAttachPoint\x3d'absoluteWidgetsZindex'\x3e\x3c/div\x3e\n\t\t\t\t\x3c/td\x3e\n\t\t\t\x3c/tr\x3e\n\t\t\t\x3c!-- FIXME: Disabled for now. Ultimately, UI for this option should go to widget palette\n\t\t\t\x3ctr\x3e\n\t\t\t\t\x3ctd\x3e${_loc.widgetPaletteLayout}:\x3c/td\x3e\n\t\t\t\t\x3ctd\x3e\n\t\t\t\t\t\x3cdiv dojoAttachPoint\x3d'widgetPaletteLayout'\x3e\x3c/div\x3e\n\t\t\t\t\x3c/td\x3e\n\t\t\t\x3c/tr\x3e\n\t\t\t--\x3e\n\t\t\t\x3ctr\x3e\n\t\t\t\t\x3ctd\x3e${_loc.zazl}:\x3c/td\x3e\n\t\t\t\t\x3ctd\x3e\n\t\t\t\t\t\x3cdiv dojoAttachPoint\x3d'zazl'\x3e\x3c/div\x3e\n\t\t\t\t\x3c/td\x3e\n\t\t\t\x3c/tr\x3e\n\t\t\x3c/tbody\x3e\n\t\x3c/table\x3e\n\x3c/div\x3e"}});
define("davinci/davinci",[],function(){});
//# sourceMappingURL=davinci.js.map