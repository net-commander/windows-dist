//>>built
require({cache:{"davinci/main":function(){define("dojo/_base/kernel dojo/_base/declare davinci/davinci davinci/ve/metadata davinci/Runtime davinci/Workbench davinci/ve/metadata davinci/ui/widgets/OutlineTree".split(" "),function(n){return n.davinci})},"davinci/ve/metadata":function(){define("require dojo/Deferred dojo/promise/all dojo/_base/lang dojo/_base/connect ../library ../model/Path ../repositoryinfo xide/types xide/utils".split(" "),function(n,k,g,e,b,d,h,a,m,f){function q(c,f){c=c||{};for(var a=
1,p=arguments.length;a<p;a++){var b=arguments[a],m=void 0,d=void 0;for(m in b)b.hasOwnProperty(m)&&(d=b[m],m in c&&("object"===typeof d||c[m]===d)?q(c[m],d):c[m]=d)}return c}function c(c,f,b){E[c.name]=c;f=new h(f);var m=c.overlays,d;for(d in m)m.hasOwnProperty(d)&&("oam"!==d&&"maqetta"!==d||q(c,m[d]));delete c.overlays;c.__metadataModuleId="maq-metadata-"+c.name;m=new h(location.href);m.path=""+b;"dojo"!==c.name&&"xide"!==c.name&&"xblox"!==c.name&&(c.__libraryModuleId=c.name,m.append("app/static/lib/"+
c.name+"/"+c.version));var u;if(e.exists("scripts.widget_metadata",c))if("string"===typeof c.scripts.widget_metadata){var y=f.append(c.scripts.widget_metadata);u=dojo.xhrGet({url:b+"/"+y.toString()+(0<a.revision.length?"?"+a.revision:""),handleAs:"json"}).then(function(f){if(f){var a=y.getParentPath();return p(c.name,f,a,a,b)}})}else u=p(c.name,c.scripts.widget_metadata,f,b);if(e.exists("scripts.callbacks",c)){var z=new k;n([c.scripts.callbacks],function(f){c.$callbacks=f;z.resolve()});M.push(z)}return u}
function p(c,f,a,q){function p(c,f,a){"undefined"==typeof c.$providedTags[f]&&(c.$providedTags[f]=[]);c.$providedTags[f].push(a)}var b=E[c];f.$descriptorFolderPath=a.toString();f.$moduleFolderPath=q.toString();if(b)if(b.$widgets){f.widgets.forEach(function(c){b.$wm.widgets.push(c)});for(var m in f.categories)b.$wm.categories.hasOwnProperty(m)||(b.$wm.categories[m]=f.categories[m])}else if(b.$wm)for(q=0;q<f.widgets.length;q++){m=!1;for(var d=0;!m&&d<b.$wm.widgets.length;d++)b.$wm.widgets[d].type==
f.widgets[q].type&&(m=!0);m||b.$wm.widgets.push(f.widgets[q])}else b.$wm||(b.$wm=f);else E[c]={$wm:f,name:f.name,version:f.version},f.__metadataModuleId&&(E[c].__metadataModuleId=f.__metadataModuleId),b=E[c];var h=b.$wm;h.$providedTypes=h.$providedTypes||{};h.$providedTags=h.$providedTags||{};h.widgets.forEach(function(c){h.$providedTypes[c.type]=c;if("string"==typeof c.tags)p(h,c.tags,c);else if(c.tags&&c.tags.length)for(var f=0;f<c.tags.length;f++)p(h,c.tags[f],c);c.icon&&!c.iconLocal&&(c.icon=
a.append(c.icon).toString());c.iconLarge&&!c.iconLargeLocal&&(c.iconLarge=a.append(c.iconLarge).toString());c.widgetClass=h.categories[c.category].widgetClass});dojo.mixin(h,{_maqGetString:z});if(h.extend)for(var u in h.extend)h.extend.hasOwnProperty(u)&&(E[u]&&E[u].$wm?y(E[u].$wm,[h.extend[u]]):(f=J[u]||[],f.push(h.extend[u]),J[u]=f));J[c]&&y(h,J[c]);return b}function y(c,f){var a=c.$providedTypes;f.forEach(function(c){for(var f in c)if(c.hasOwnProperty(f)){var q=c[f],b=a[f];q.mixin&&e.mixin(b,q.mixin);
if(q.concat)for(var p in q.concat)if(q.concat.hasOwnProperty(p)){var m=q.concat[p];if(b[p]){var d=b[p];"string"===typeof d?m=d+","+m:d instanceof Array?m=d.concat(m):(console.error('Unhandled type for "concat()"'),m=void 0)}b[p]=m}}})}function u(c){if(c)for(var f in E)if(E.hasOwnProperty(f)){var a=E[f];if(a.$wm&&a.$wm.$providedTypes[c])return a}return null}function z(c){I||(I=!0);return null}function A(c){if(c){if(D.hasOwnProperty(c))return D[c];var f=u(c),a,b;f&&(b=f.$wm.$descriptorFolderPath);if(!b)return null;
a=f.$wm;var p=null,d,f=F.getResourceManager().getVariable(m.RESOURCE_VARIABLES.APP_URL);if(a.localPath){if(b=c.replace(/\./g,"/").split("/"),b.shift(),b=b.join("/"),d=[a.$moduleFolderPath,"/",b,"_oam.json"].join(""),-1!==d.indexOf("lib/custom")){var h=F.getFileManager().getStore("workspace_user",!1);return new Promise(function(f){h._loadItem({path:d,mount:"workspace_user"},!0).then(function(b){F.getFileManager().getContent(b.mount,b.path).then(function(b){p=dojo.fromJson(b);p.$ownproperty=dojo.mixin({},
p.property);p.property=dojo.mixin({},K,p.property);p.$src=d;D[c]=p;q(p,a.$providedTypes[c].metadata);f(p)})})})}}else d=[b,"/",c.replace(/\./g,"/"),"_oam.json"].join(""),d=f+"/lib/xideve/metadata/"+d,dojo.xhrGet({url:d,handleAs:"json",sync:!0}).then(function(c){p=c});if(!p)return console.error("ERROR: Could not load metadata for type: "+c),null;p.$ownproperty=dojo.mixin({},p.property);p.property=dojo.mixin({},K,p.property);p.$src=d;D[c]=p;q(p,a.$providedTypes[c].metadata);return p}}function x(c,f){if(!f)return c;
dojo.every(f.split("."),function(f){if(void 0===c[f])return c=void 0,!1;c=c[f];return!0});return c}function w(c,f){(f=B.queryDescriptor(f,"allowed"+c))||(f="Parent"===c?"ANY":"NONE");return f.split(/\s*,\s*/)}function r(c,f){f=B.queryDescriptor(c,f);if(!f)return null;c=u(c);return v(c,f)}function v(c,f){return c&&f?"string"===typeof f&&"./"===f.substr(0,2)?(new h(c.__metadataModuleId)).append(f).toString():f:null}var B,C,F,E={},D={},G={},M=[],J={},K={id:{datatype:"string",hidden:!0},lang:{datatype:"string",
hidden:!0},dir:{datatype:"string",hidden:!0},"class":{datatype:"string",hidden:!0},style:{datatype:"string",hidden:!0},title:{datatype:"string",hidden:!0}};dojo.subscribe("/davinci/ui/libraryChanged/start",function(){E={};D={};G={};B.init().then(function(){dojo.publish("/davinci/ui/libraryChanged")})});var I=!1;B={prefix:"",ctx:null,init:function(f,q){n({cacheBust:null});this.ctx=F=f;var b=[];C=n("../Workbench");f=F.getResourceManager().getVariable(m.RESOURCE_VARIABLES.APP_URL);q=q.replace(f,"");
q=n.toUrl("xideve/metadata/");d.getUserLibs(C.getProject()).forEach(function(f){var p=f.metaRoot;if(p=p.replace("app/metadata/","")){var m=null,d=null;try{f.getRoot&&(m=f.getRoot()),f.getMetaPath&&(d=f.getMetaPath()),b.push(dojo.xhrGet({url:(m||q)+"/"+(d||p)+"/package.json?"+a.revision,handleAs:"json"}).then(function(f){return c(f,d||p,m||q)}))}catch(T){console.error("error parsing library "+f.id,T)}}});return g(b)},parseMetaData:function(c,f,a,q){return p(c,f,a,q)},getLibrary:function(c){return c?
E[c]:E},getLibraryActions:function(c,f){var a=[],q={},b;for(b in E){if(E.hasOwnProperty(b)){q.lib=E[b];if(!q.lib.$wm)continue;var p=q.lib.$wm["davinci.actionSets"];if(!p)continue;dojo.forEach(p,function(q){return function(b){b.id!=c||f&&b.targetID!==f||(b=dojo.clone(b.actions),dojo.forEach(b,function(c){if(c.action){var f=v(q.lib,c.action);c.action=f}c.menu&&c.menu.forEach(function(c){if(c.action){var f=v(q.lib,c.action);c.action=f}});a.push(c)}))}}(q))}q={lib:q.lib}}return a},loadThemeMeta:function(c){for(var f=
c.find({elementType:"HTMLElement",tag:"style"}),a=[],q,b=0;b<f.length;b++)for(var p=0;p<f[b].children.length;p++)"CSSImport"==f[b].children[p].elementType&&a.push(f[b].children[p]);new h(c.fileName);b=d.getThemes(C.getProject());f={};for(p=0;p<b.length;p++)if(b[p].files)for(var m=0;m<b[p].files.length;m++)f[b[p].files[m]]=b[p];for(p=0;p<a.length;p++){var b=a[p].url,u;for(u in f)if(-1<u.indexOf("claro")&&(q=u),-1<b.indexOf(u))return{themeUrl:b,themeMetaCache:d.getThemeMetadata(f[u]),theme:f[u]}}if(p=
B._loadThemeMetaDojoxMobile(c,f))return p;if(q){for(var e,p=0;p<a.length;p++)if((u=a[p].url.match(/\/([^\/]*)\.css$/))&&2==u.length&&(u=u[1],a[p].url.match(new RegExp("themes/"+u+"/"+u+".css$")))){e=u;break}if(e)return u=c.getDocumentElement(),c=u.getChildElement("head"),u=u.getChildElement("body"),(b=u.getAttribute("class"))&&u.setAttribute("class",b.replace(new RegExp("\\b"+e+"\\b","g"),"claro")),c=c.getChildElements("style"),dojo.forEach(c,function(c){dojo.forEach(c.children,function(c){"CSSImport"==
c.elementType&&(c.url=c.url.replace(new RegExp("/"+e,"g"),"/claro"))})}),b=a[p].url.replace(new RegExp("/"+e,"g"),"/claro"),a={themeUrl:b,themeMetaCache:d.getThemeMetadata(f[q]),theme:f[q]},a.themeMetaCache.usingSubstituteTheme={oldThemeName:e,newThemeName:"claro"},a}},_loadThemeMetaDojoxMobile:function(c,f){c=c.find({elementType:"HTMLElement",tag:"script"});for(var a=0;a<c.length;a++){var b=c[a].getElementText();if(b.length){var p=b.indexOf("dojoxMobile.themeMap");if(0<p){var p=b.indexOf("\x3d",
p),q=b.indexOf(";",p);if(q>p){var b=dojo.fromJson(b.substring(p+1,q))[0][2][0],m;for(m in f)if(-1<b.indexOf(m))return{themeUrl:b,themeMetaCache:d.getThemeMetadata(f[m]),theme:f[m]}}}}}},getLibraryForType:function(c){return u(c)},getLibraryMetadataForType:function(c){return(c=u(c))?c.$wm:null},getWidgetDescriptorForType:function(c){var f=u(c);c=f?f.$wm.$providedTypes[c]:void 0;return c},getOamDescriptivePropertyForType:function(c,f){return(c=A(c))&&c[f]?(f=c[f],"string"==typeof f?{type:"text/plain",
value:f}:"string"==typeof f.value?{type:f.type?f.type:"text/plain",value:f.value}:null):null},getWidgetsWithTag:function(c){var f=[];if(c)for(var a in E)if(E.hasOwnProperty(a)){var b=E[a];b.$wm&&b.$wm.$providedTags[c]&&(f=f.concat(b.$wm.$providedTags[c]))}return f},getLibraryBase:function(c){if(c=u(c))return c.$wm.$descriptorFolderPath},invokeCallback:function(c,f,a){var b=c;"string"===typeof c&&(b=u(type));if(b&&b.$callbacks&&(c=b.$callbacks[f]))return c.apply(b.$callbacks,a)},query:function(c,f){if(c){var a,
b;c.declaredClass?(c.metadata&&(b=c.metadata),a=c.type):a=c;if(!b){b=A(a);if(!b)return;c.declaredClass&&(c.metadata=b)}return x(b,f)}},queryDescriptorByName:function(c,f,b){f=u(f);var a;if(f){f=f.$wm.widgets;for(var p=0;p<f.length;p++)if(f[p].name==c){a=f[p];break}}return this._queryDescriptor(a,b)},queryDescriptor:function(c,f){var b=u(c),a;b&&(a=b.$wm.$providedTypes[c]);return this._queryDescriptor(a,f)},_queryDescriptor:function(c,f){if(c&&"object"===typeof c)return c=x(c,f),"resizable"===f&&(c||
(c="both")),c},getAllowedParent:function(c){return w("Parent",c)},getAllowedChild:function(c){return w("Child",c)},getCanSelect:function(c){return(c=B.queryDescriptor(c,"canSelect"))?c.split(/\s*,\s*/):[]},getMetadata:A,getHelper:function(c,f){var b=new k,a=c+":"+f;if(a in G)return b.resolve(G[a]),b;(c=r(c,f))?n([c],function(c){b.resolve(c);G[a]=c}):b.resolve();return b},getSmartInput:function(c){var f=new k;if(c in H)f.resolve(H[c]);else{var b=r(c,"inlineEdit");b?"string"===typeof b?n([b],function(b){f.resolve(H[c]=
new b)}):"[object Array]"===Object.prototype.toString.call(b.property)?n(["davinci/ve/input/MultiFieldSmartInput"],function(a){a=new a;e.mixin(a,b);f.resolve(H[c]=a)}):n(["davinci/ve/input/SmartInput"],function(a){a=new a;e.mixin(a,b);f.resolve(H[c]=a)}):f.resolve(null)}return f},getDeferreds:function(){return M}};var H={};b.subscribe("/davinci/ui/libraryChanged/start",function(){H={}});dojo.setObject("davinci.ve.metadata",B);return B})},"davinci/library":function(){define("dojo/_base/xhr dojo/Deferred ./Runtime ./model/Path ./workbench/Preferences dojo/_base/kernel dojo/promise/all xide/model/Path xide/types xide/utils davinci/ve/metadata".split(" "),
function(n,k,g,e,b,d,h,a,m,f,q){var c=[{userLibs:[{id:"html",version:"0.8",metaRoot:"app/metadata/html/0.8",required:!0,hasSource:!1},{id:"delite",version:"0.8",metaRoot:"app/metadata/delite/0.8",required:!1,hasSource:!0},{id:"xblox",version:"1.0",metaRoot:"app/metadata/xblox/1.0",required:!1,hasSource:!1,root:"lib/xblox"}]}],p=[{specVersion:"1.0",files:["blackberry.css"],useBodyFontBackgroundClass:"useBodyFontBg",helper:"maq-metadata-dojo/dojox/mobile/ThemeHelper",themeEditorHtmls:["../custom/dojo-theme-editor.html"],
name:"blackberry",path:["project1/themes/blackberry/blackberry.theme"],base:"",className:"blackberry",type:"dojox.mobile",meta:["../custom/custom.json"],version:"1.8"},{specVersion:"1.0",files:["claro.css"],helper:"maq-metadata-dojo/dijit/ThemeHelper",themeEditorHtmls:["dojo-theme-editor.html"],name:"claro",path:["project1/themes/claro/claro.theme"],conditionalFiles:["document.css"],className:"claro",meta:["claro.json"],version:"1.8"},{specVersion:"1.0",files:["ipad.css"],useBodyFontBackgroundClass:"useBodyFontBg",
helper:"maq-metadata-dojo/dojox/mobile/ThemeHelper",themeEditorHtmls:["dojo-theme-editor.html"],name:"ipad",path:["project1/themes/ipad/ipad.theme"],base:"",className:"ipad",type:"dojox.mobile",meta:["ipad.json"],version:"1.8"},{specVersion:"1.0",files:["android.css"],useBodyFontBackgroundClass:"useBodyFontBg",helper:"maq-metadata-dojo/dojox/mobile/ThemeHelper",themeEditorHtmls:["../custom/dojo-theme-editor.html"],name:"android",path:["project1/themes/android/android.theme"],base:"",className:"android",
type:"dojox.mobile",meta:["../custom/custom.json"],version:"1.8"},{specVersion:"1.0",files:["custom.css"],useBodyFontBackgroundClass:"useBodyFontBg",helper:"maq-metadata-dojo/dojox/mobile/ThemeHelper",themeEditorHtmls:["dojo-theme-editor.html"],name:"custom",path:["project1/themes/custom/custom.theme"],base:"",className:"custom",type:"dojox.mobile",meta:["custom.json"],version:"1.8"},{specVersion:"1.0",files:["iphone.css"],useBodyFontBackgroundClass:"useBodyFontBg",helper:"maq-metadata-dojo/dojox/mobile/ThemeHelper",
themeEditorHtmls:["../custom/dojo-theme-editor.html"],name:"iphone",path:["project1/themes/iphone/iphone.theme"],base:"",className:"iphone",type:"dojox.mobile",meta:["../custom/custom.json"],version:"1.8"},{specVersion:"1.0",files:["sketch.css"],themeEditorHtmls:["../claro/dojo-theme-editor.html"],name:"Sketch",path:["project1/themes/sketch/sketch.theme"],className:"claro",meta:["../claro/claro.json"],version:"1.8"}],y={_customWidgets:{}},u={},z={},A={},x={};d.subscribe("/davinci/ui/libraryChanged/start",
this,function(){x={};A={}});return y={themesChanged:function(c){u[c]=c?null:[]},getThemes:function(c,f,a){function q(){var a=[];u[c]&&(a=f?u[c].filter(function(c){return!c.getFile().isVirtual()}):u[c]);return a}a&&delete u[c];if(u[c])return q();a=b.getPreferences("davinci.ui.ProjectPrefs",c);a.themeFolder="themes";(new e(c)).append(a.themeFolder);p.forEach(function(c){c.getFile=function(){return system.resource.findResource(this.path[0])}.bind(c)}.bind(this));u[c]=p;return q()},getThemeMetadata:function(c){return z[c.name]?
z[c.name]:null},addCustomWidgets:function(c,f,a){new k;c=c.getParent().getPath();c=new e(c);f=require("davinci/ve/metadata").parseMetaData(a.name,a,c,f);y._customWidgets||(y._customWidgets={});y._customWidgets.project1||(y._customWidgets.project1={});y._customWidgets.project1.hasOwnProperty("name")||(y._customWidgets.project1.name="custom",y._customWidgets.project1.metaPath="./lib/custom",y._customWidgets.project1.localPath=!0);y._customWidgets.project1=f;d.publish("/davinci/ui/addedCustomWidget",
[f]);return f},_getCustomWidgets:function(c){if(!y._customWidgets||!y._customWidgets[c]){y._customWidgets||(y._customWidgets={});y._customWidgets[c]||(y._customWidgets[c]=[]);var f=b.getPreferences("davinci.ui.ProjectPrefs",c);f.widgetFolder||(f.widgetFolder="./lib/custom",b.savePreferences("davinci.ui.ProjectPrefs",c,f));for(var a=(new e(c)).append(f.widgetFolder).getSegments(),f=system.resource.findResource(a[0]),p=1;p<a.length;p++)var q=f.getChild(a[p]),f=q?q:f.createResource(a[p],!0);var m;f.getChildren(function(c){m=
c},!0);this._customWidgetPackages=[];null==m&&(m=[]);a={};for(p=0;p<m.length;p++)if(q=m[p],"Folder"==q.elementType){a[q.name]=q.getPath();var h="maq-lib-custom-"+q.name,u=q.getURL();require({packages:[{name:h,location:u}]});this._customWidgetPackages.push({name:q.name,location:u})}q=system.resource.findResource("*_widgets.json",!1,f);this._customWidgetDescriptors={};for(p=0;p<q.length;p++){var z=q[p],g=z.getParentFolder(),u=f.getURL(),h=g.getURL(),A=h.substr(u.length+1),u=null;try{u=d.fromJson(z.getContentSync())}catch(K){}if(u&&
u.customWidgetSpec&&(A=A.split("/").shift(),u.__metadataModuleId="maq-lib-custom-"+A,y.addCustomWidgets(c,z,a[A],u),x[c]||(x[c]={}),x[c][g.name]||(x[c][g.name]={}),x[c][g.name][u.version]=h,u&&u.widgets))for(z=0;z<u.widgets.length;z++)(g=u.widgets[z].type)&&(this._customWidgetDescriptors[g]={name:A,location:h,descriptor:u})}}return{custom:y._customWidgets[c]}},getCustomWidgets:function(){var c=this;this._customWidgetPackages=[];var a={},b=[],p=y.ctx.getFileManager(),q=p.getStore("workspace_user"),
m=[],d=require("davinci/ve/metadata"),u=[],e=new k;p.mkdir("workspace_user","./lib/custom").then(function(){q.getItem("./lib/custom",!0).then(function(p){p.getChildren().forEach(function(p){!0===p.directory&&u.push(q._loadItem(p,!0).then(function(f){a[p.name]=p.getPath();f="maq-lib-custom-"+p.name;var b=require.toUrl("workspace")+"/lib/custom/"+p.name;require({packages:[{name:f,location:b}]});c._customWidgetPackages.push({name:p.name,location:b});m.push(p)}));h(u).then(function(){m.forEach(function(c){var p=
c.getPath()+"/"+c.name+"_widgets.json",m=q.getSync(p),h=new k;b.push(h);y.ctx.getFileManager().getContent(m.mount,m.path).then(function(b){b=f.getJson(b);var p=c.name;b.__metadataModuleId="maq-lib-custom-"+p;try{y.addCustomWidgets(m,a[p],b)}catch(P){console.error("error parsing custom widget "+c.name,P)}b=d.getMetadata(b.name+"/"+b.name);b.then?b.then(function(){h.resolve()}):h.resolve()})});h(b).then(function(){e.resolve({custom:y._customWidgets.project1})})})})})});return e},getCustomWidgetPackages:function(){return this._customWidgetPackages||
[]},getCustomWidgetDescriptors:function(){return this._customWidgetDescriptors?this._customWidgetDescriptors:{}},getInstalledLibs:function(){y._serverLibs||(y._serverLibs=g.serverJSONRequest({url:"cmd/listLibs",handleAs:"json",content:{},sync:!0})[0].userLibs);return y._serverLibs},getUserLibs:function(f){if(A.base)return A.base;A.base=c[0].userLibs;return A.base},getLibRoot:function(c,f,a){var b=new k,p=x;if(p[a]&&p[a][c]&&void 0!==p[a][c][f])return b.resolve(p[a][c][f]||"");p[a]||(p[a]={});p[a][c]||
(p[a][c]={});p[c]||(p[c]={});var q=null;switch(c){case "xblox":q="lib/xblox";break;case "dojo":q="lib/dojo";break;case "maqetta":q="lib/maqetta";break;case "delite":q="lib/ibm-js/delite";break;case "deliteful":q="lib/ibm-js/deliteful";break;case "requirejs":q="lib/ibm-js/requirejs";break;case "requirejs":q="lib/ibm-js/requirejs";break;case "user":q="workspace_user/"}p[a][c][f]=q;return b.resolve(q||"")},getlibraryId:function(c,f){return{sketch:"sketch",claro:"claro"}[c]+(f||"")},getlibraryName:function(c){var f,
a;for(a in c)f=a;return f}}})},"davinci/Runtime":function(){define("davinci/lang/webContent ./commands/CommandStack ./ui.plugin ./html/html.plugin ./js/js.plugin ./ve/ve.plugin".split(" "),function(n,k,g,e,b,d){var h=[g,e,d],a={plugins:[],extensionPoints:[],subscriptions:[],currentSelection:[],commandStack:new k,getUser:function(){return this._initializationInfo.userInfo},getWorkbenchState:function(){return this._initializationInfo?this._initializationInfo.workbenchState:{activeEditor:null,editors:[],
nhfo:{project1:{device:"iphone",layout:"flow",themeSet:{name:"(none)",desktopTheme:"claro",mobileTheme:[{theme:"android",device:"Android"},{theme:"blackberry",device:"BlackBerry"},{theme:"ipad",device:"iPad"},{theme:"iphone",device:"iPhone"},{theme:"iphone",device:"other"}]}}},project:"project1",id:"",Fields:[]}},getSiteConfigData:function(a){return"widgetPalette"==a?{name:"widgetPalette_dojo_default",defs:{$XBLOXSection:{id:"xblox",name:"xblox",iconBase64:"data:image/gif;base64,R0lGODlhEAAQAKIAAFhYWtXV1v///0BAQP///wAAAAAAAAAAACH5BAEAAAQALAAAAAAQABAAAAMuSLo0w5CNIF6EM9grN2+Z82WCEGjcVJbopa5tlJ2nh4W2XH9LyCu+X/AHAPyOCQA7",
subsections:["$XBLOXSection_Controls"]},$XBLOXSection_Controls:{id:"Controls",name:"Controls",iconBase64:"data:image/gif;base64,R0lGODlhEAAQALMAAN7e4oyMjtXV1sDAwf///+Dg4MvLyzMzM////wAAAAAAAAAAAAAAAAAAAAAAAAAAACH5BAEAAAgALAAAAAAQABAAAAQ3EMlJq704a3RO2NIhBIexHYRgeFTndkQ8HmER33g60EcB/ECcYBd6wWSkDErFUs5Mms4HRK1SIwA7",includes:["RunScript","CSSState","StyleState","Script"]},$ClipartSection_Arrows:{id:"Arrows",name:"Arrows",iconBase64:"data:image/gif;base64,R0lGODlhEAAQALMAAN7e4oyMjtXV1sDAwf///+Dg4MvLyzMzM////wAAAAAAAAAAAAAAAAAAAAAAAAAAACH5BAEAAAgALAAAAAAQABAAAAQ3EMlJq704a3RO2NIhBIexHYRgeFTndkQ8HmER33g60EcB/ECcYBd6wWSkDErFUs5Mms4HRK1SIwA7",
includes:["ArrowDown","ArrowLeft","ArrowRight","ArrowUp"]},$ClipartSection_Community:{id:"Community",name:"Community",iconBase64:"data:image/gif;base64,R0lGODlhEAAQAMQAANXV1v///9HR0cXFxbm5uaKiooyMjHR0dGlpaVJSUkZGRkREREJCQkFBQT09PTo6OjMzM////wAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAACH5BAEAABEALAAAAAAQABAAAAVdIJEoZGmSiTgAbOuywwgEdAAY5WyTul0gAYFCB+DRWJCAqFArDo+QRcDRgBCNu1rgueMWG4FHw4u1Maa9bg8AdqSd6/a7zEZr4U35vRw4KA5aOwkrL4UxIieJCikhADs\x3d",includes:["Facebook","Rss","Twitter"]},$ClipartSection_Devices:{id:"Devices",
name:"Devices",iconBase64:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAMAAAAoLQ9TAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAA2hpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuMC1jMDYxIDY0LjE0MDk0OSwgMjAxMC8xMi8wNy0xMDo1NzowMSAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wTU09Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9tbS8iIHhtbG5zOnN0UmVmPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvc1R5cGUvUmVzb3VyY2VSZWYjIiB4bWxuczp4bXA9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC8iIHhtcE1NOk9yaWdpbmFsRG9jdW1lbnRJRD0ieG1wLmRpZDowMTgwMTE3NDA3MjA2ODExOTJCMEJDQTgxOTc0RDYxMiIgeG1wTU06RG9jdW1lbnRJRD0ieG1wLmRpZDo4NTQ0QUU2NjhCMzMxMUUyOTQ3N0ExRTg0NEJENzk4RiIgeG1wTU06SW5zdGFuY2VJRD0ieG1wLmlpZDo4NTQ0QUU2NThCMzMxMUUyOTQ3N0ExRTg0NEJENzk4RiIgeG1wOkNyZWF0b3JUb29sPSJBZG9iZSBQaG90b3Nob3AgQ1M1LjEgTWFjaW50b3NoIj4gPHhtcE1NOkRlcml2ZWRGcm9tIHN0UmVmOmluc3RhbmNlSUQ9InhtcC5paWQ6MDM4MDExNzQwNzIwNjgxMTkyQjBCQ0E4MTk3NEQ2MTIiIHN0UmVmOmRvY3VtZW50SUQ9InhtcC5kaWQ6MDE4MDExNzQwNzIwNjgxMTkyQjBCQ0E4MTk3NEQ2MTIiLz4gPC9yZGY6RGVzY3JpcHRpb24+IDwvcmRmOlJERj4gPC94OnhtcG1ldGE+IDw/eHBhY2tldCBlbmQ9InIiPz7l5plaAAAAIVBMVEX///8zMzP3+PnV1dZ+fn7ExMZ9fX4sKis1NTVZWVmgoKKPJ3BhAAAARElEQVR42mJgIAIwM8IBM1iAkRkO2KECTFBAiQCaoZjWsrKxcgIxEHKA+BysbGysQIKLi5OVEyjCiAYYWNAAYa8CBBgA3BQB3Pw68r4AAAAASUVORK5CYII\x3d",
includes:["Cellphone","Computer","Laptop","Server","Tablet"]},$ClipartSection_DeviceSilhouettes:{id:"DeviceSilhouettes",name:"Device Silhouettes",iconBase64:"data:image/gif;base64,R0lGODlhEAAQAKIAAGZmaNXV1v///0BAQP///wAAAAAAAAAAACH5BAEAAAQALAAAAAAQABAAAAM6SErT3iu+EF5UL4/LqPfbNQRCaVbcaJ6hRK4CKr6r7MJxu6iwvX8fHUbjSDUAFEBR5AAol0wNZzpNAAA7",includes:"Android_340x480 Android_480x800 AndroidTablet Blackberry iPad iPhone".split(" ")},$ClipartSection_Media:{id:"Media",name:"Media",iconBase64:"data:image/gif;base64,R0lGODlhEAAQALMAANXV1v////z8/Pr6+vn5+fj4+Ojo6MrKyre3t6urq4iIiHV1dUdHR0BAQDMzM////yH5BAEAAA8ALAAAAAAQABAAAARZ8MlJq6Ut36c5+E3VOGAGBEAWeif6DULghk0rB8jCLAhK2zjFoXBQIFKeW2BxSDQShwWypmQUGoZGgTEFMp1Q6U+JEBKN3RsBp+P5WJ+4HCRR2e+rjX5PiQAAOw\x3d\x3d",
includes:"Camera Chat GraphBar GraphLine GraphPie Image Map Microphone PlayControl Record StreetMap Table VideoCamera VideoPlayer".split(" ")},$ClipartSection_UserInterfaceControls:{id:"UserInterfaceControls",name:"User Interface Controls",iconBase64:"data:image/gif;base64,R0lGODlhEAAQALMAAFhYWtXV1qurrKGhooKCg/////X19TMzM////wAAAAAAAAAAAAAAAAAAAAAAAAAAACH5BAEAAAgALAAAAAAQABAAAARSEElwqrUyHxG678KRIVthDoNZhGNZBFVgsppQGId5GKtYF5dKr8X5eGiSoNKXJAie0CeBSbKprsgqMDj84XS8rAt2kHWT1gJKJS4aA1nSspKJAAA7",includes:"File Folder FormattingToolbox HScrollBar HSplit ProgressBar SpinInput VScrollBar VSplit WaitingPending".split(" ")},
$ClipartSection_UserInterfaceIcons:{id:"UserInterfaceIcons",name:"User Interface Icons",iconBase64:"data:image/gif;base64,R0lGODlhEAAQANUAANXT1vj4+eLi49/f4Nra29nZ2tbW19XV1tTU1dDQ0c3NzpCQkf////7+/vX19fLy8vDw8O/v7+zs7OTk5OPj49nZ2dHR0c/Pz87Ozs3NzczMzKWlpaOjo6KioqGhoZ6enp2dnZycnJubm5mZmY+Pj4aGhoWFhYGBgX5+fnR0dHNzc2lpaWZmZllZWVdXV1VVVVNTU1FRUU5OTk1NTUxMTEJCQkBAQDY2NjMzMzIyMi8vLyoqKiYmJiMjI////wAAACH5BAEAAD4ALAAAAAAQABAAAAa8QJ/Qd0HRdD0dDXUZDj8ykqJgKGBIso/zs9IIIoFGICLQrLREWUZSmeHetookI2ueFgIGC6fSqHAzDAILJz4yFhF6LA8MD28MEQkyPjkEAQyYjS04LAwBBDk+PAYNmQ+bLYwNBjw+OJaZGzipmA4EOD4xB4mYIzgjmREHMT4mIhSZyZgUIiZELwgSvb+YEggvTT4eKQgDEB01HRATCCkcThwuIAcEAAQHIS/nTj4WJTA3OzcwJRb0/wB9BAEAOw\x3d\x3d",
includes:"Close Copy Delete Edit Error Fatal Help Home Info Lock Mail Minus Next Paste Plus Previous Print Refresh Save Search ShoppingCart Trash Warning".split(" ")},$ClipartSection_Other:{id:"Other",name:"Other",iconBase64:"data:image/gif;base64,R0lGODlhEAAQAJEAAHx8fDMzM////wAAACH5BAEAAAIALAAAAAAQABAAAAImlI9pAYoQDGxuHpvwZY8rrH1MWAWes53oRHZUK4Rkq8Gxp4roXgAAOw\x3d\x3d",includes:["Browser","Person","ProfilePicture","X"]},$ClipartSection:{id:"Clipart",name:"Clip Art",iconBase64:"data:image/gif;base64,R0lGODlhEAAQAKIAAFhYWtXV1v///0BAQP///wAAAAAAAAAAACH5BAEAAAQALAAAAAAQABAAAAMuSLo0w5CNIF6EM9grN2+Z82WCEGjcVJbopa5tlJ2nh4W2XH9LyCu+X/AHAPyOCQA7",
subsections:"$ClipartSection_Arrows $ClipartSection_Community $ClipartSection_Devices $ClipartSection_DeviceSilhouettes $ClipartSection_Media $ClipartSection_UserInterfaceControls $ClipartSection_UserInterfaceIcons $ClipartSection_Other".split(" ")},$DrawingToolsSection:{id:"DrawingTools",name:"Drawing Tools",iconBase64:"data:image/gif;base64,R0lGODlhEAAQAKIAAL+/v5aWlmNjYzMzMxwcHBYWFv///wAAACH5BAEAAAYALAAAAAAQABAAAAMgaLrc/jBKFsBcg9g7iuaFZwlhaZrD1Ikqq35Xdc10PScAOw\x3d\x3d",includes:"Text Line Arrow Polyline PolylineArrow Circle Rectangle RoundedRectangle".split(" ")},
$ViewsSection:{id:"Views",name:"Views",_COMMENT1_:"Mobile-only view widgets, often representing a single screen of UI",iconBase64:"data:image/gif;base64,R0lGODlhEAAQANUAAC5KhTFOiPj6/jJRijRTjTRUjTdXkTdXkLrH3+Hp+OHp9zdakzZYkDdYkDlbkzlck97o+ODp+N/o9ztflj5km/L2/Pj6/T5mnD9mnT5lm0FqoENupENuo0Ruo0ZxpvL2+0l3rEl4rEh2qkl3q0l2qk6BtE1+sU+BtFCDtVCFt1CEtlSLvVOJulOHuVaOv7nW78/t+////////wAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAACH5BAEAADIALAAAAAAQABAAAAaAQJlwSCwKXcikcilzxZ5QaApGVclWMUAWMFhgYiRYACGStaJoDKzyuchQr7hc3jAwGAeZCR1lKRIRLDIjWVtdXyUSEhAnMh58UCCKECEyGnOYHRsbHBwyFJBPGVQwFDIThQBcXjEOYggOMg+hMQUwFgIEsg+8vb0BwMBGw8TFQkEAOw\x3d\x3d",
includes:[]},$HeadingSection:{id:"Heading, Section Labels",name:"Heading",_COMMENT1_:"Mobile-only Heading widgets, often titles at top of a screen",iconBase64:"data:image/gif;base64,R0lGODlhEAAQAMQAAEh1qkd2q0d2qkh2q0h2qkt7r0t8r0+BtU6CtFGGuVGHuVSLvFaNv1WLvKzM6a3M6a3M6LfS7DJlklaOv4y64Iy635zD5J3E5KzN6azM6IK13Iy734273////////wAAACH5BAEAAB4ALAAAAAAQABAAAAVQoCeOZGmeaKqqU+u+LdN6U2Tf+D15S5ZJwIzjgXFkIJmGJ2GRtCSbTWc6vSg8hw0HCN1UKFotwlPQmM/os8FDIADcgYGAIJgD3qu8fs/nhwAAOw\x3d\x3d",includes:[]},$ContainersSection_Dojo:{id:"ContainersSection_Dojo",
name:"Dojo",iconBase64:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAACXBIWXMAAAsTAAALEwEAmpwYAAAKT2lDQ1BQaG90b3Nob3AgSUNDIHByb2ZpbGUAAHjanVNnVFPpFj333vRCS4iAlEtvUhUIIFJCi4AUkSYqIQkQSoghodkVUcERRUUEG8igiAOOjoCMFVEsDIoK2AfkIaKOg6OIisr74Xuja9a89+bN/rXXPues852zzwfACAyWSDNRNYAMqUIeEeCDx8TG4eQuQIEKJHAAEAizZCFz/SMBAPh+PDwrIsAHvgABeNMLCADATZvAMByH/w/qQplcAYCEAcB0kThLCIAUAEB6jkKmAEBGAYCdmCZTAKAEAGDLY2LjAFAtAGAnf+bTAICd+Jl7AQBblCEVAaCRACATZYhEAGg7AKzPVopFAFgwABRmS8Q5ANgtADBJV2ZIALC3AMDOEAuyAAgMADBRiIUpAAR7AGDIIyN4AISZABRG8lc88SuuEOcqAAB4mbI8uSQ5RYFbCC1xB1dXLh4ozkkXKxQ2YQJhmkAuwnmZGTKBNA/g88wAAKCRFRHgg/P9eM4Ors7ONo62Dl8t6r8G/yJiYuP+5c+rcEAAAOF0ftH+LC+zGoA7BoBt/qIl7gRoXgugdfeLZrIPQLUAoOnaV/Nw+H48PEWhkLnZ2eXk5NhKxEJbYcpXff5nwl/AV/1s+X48/Pf14L7iJIEyXYFHBPjgwsz0TKUcz5IJhGLc5o9H/LcL//wd0yLESWK5WCoU41EScY5EmozzMqUiiUKSKcUl0v9k4t8s+wM+3zUAsGo+AXuRLahdYwP2SycQWHTA4vcAAPK7b8HUKAgDgGiD4c93/+8//UegJQCAZkmScQAAXkQkLlTKsz/HCAAARKCBKrBBG/TBGCzABhzBBdzBC/xgNoRCJMTCQhBCCmSAHHJgKayCQiiGzbAdKmAv1EAdNMBRaIaTcA4uwlW4Dj1wD/phCJ7BKLyBCQRByAgTYSHaiAFiilgjjggXmYX4IcFIBBKLJCDJiBRRIkuRNUgxUopUIFVIHfI9cgI5h1xGupE7yAAygvyGvEcxlIGyUT3UDLVDuag3GoRGogvQZHQxmo8WoJvQcrQaPYw2oefQq2gP2o8+Q8cwwOgYBzPEbDAuxsNCsTgsCZNjy7EirAyrxhqwVqwDu4n1Y8+xdwQSgUXACTYEd0IgYR5BSFhMWE7YSKggHCQ0EdoJNwkDhFHCJyKTqEu0JroR+cQYYjIxh1hILCPWEo8TLxB7iEPENyQSiUMyJ7mQAkmxpFTSEtJG0m5SI+ksqZs0SBojk8naZGuyBzmULCAryIXkneTD5DPkG+Qh8lsKnWJAcaT4U+IoUspqShnlEOU05QZlmDJBVaOaUt2ooVQRNY9aQq2htlKvUYeoEzR1mjnNgxZJS6WtopXTGmgXaPdpr+h0uhHdlR5Ol9BX0svpR+iX6AP0dwwNhhWDx4hnKBmbGAcYZxl3GK+YTKYZ04sZx1QwNzHrmOeZD5lvVVgqtip8FZHKCpVKlSaVGyovVKmqpqreqgtV81XLVI+pXlN9rkZVM1PjqQnUlqtVqp1Q61MbU2epO6iHqmeob1Q/pH5Z/YkGWcNMw09DpFGgsV/jvMYgC2MZs3gsIWsNq4Z1gTXEJrHN2Xx2KruY/R27iz2qqaE5QzNKM1ezUvOUZj8H45hx+Jx0TgnnKKeX836K3hTvKeIpG6Y0TLkxZVxrqpaXllirSKtRq0frvTau7aedpr1Fu1n7gQ5Bx0onXCdHZ4/OBZ3nU9lT3acKpxZNPTr1ri6qa6UbobtEd79up+6Ynr5egJ5Mb6feeb3n+hx9L/1U/W36p/VHDFgGswwkBtsMzhg8xTVxbzwdL8fb8VFDXcNAQ6VhlWGX4YSRudE8o9VGjUYPjGnGXOMk423GbcajJgYmISZLTepN7ppSTbmmKaY7TDtMx83MzaLN1pk1mz0x1zLnm+eb15vft2BaeFostqi2uGVJsuRaplnutrxuhVo5WaVYVVpds0atna0l1rutu6cRp7lOk06rntZnw7Dxtsm2qbcZsOXYBtuutm22fWFnYhdnt8Wuw+6TvZN9un2N/T0HDYfZDqsdWh1+c7RyFDpWOt6azpzuP33F9JbpL2dYzxDP2DPjthPLKcRpnVOb00dnF2e5c4PziIuJS4LLLpc+Lpsbxt3IveRKdPVxXeF60vWdm7Obwu2o26/uNu5p7ofcn8w0nymeWTNz0MPIQ+BR5dE/C5+VMGvfrH5PQ0+BZ7XnIy9jL5FXrdewt6V3qvdh7xc+9j5yn+M+4zw33jLeWV/MN8C3yLfLT8Nvnl+F30N/I/9k/3r/0QCngCUBZwOJgUGBWwL7+Hp8Ib+OPzrbZfay2e1BjKC5QRVBj4KtguXBrSFoyOyQrSH355jOkc5pDoVQfujW0Adh5mGLw34MJ4WHhVeGP45wiFga0TGXNXfR3ENz30T6RJZE3ptnMU85ry1KNSo+qi5qPNo3ujS6P8YuZlnM1VidWElsSxw5LiquNm5svt/87fOH4p3iC+N7F5gvyF1weaHOwvSFpxapLhIsOpZATIhOOJTwQRAqqBaMJfITdyWOCnnCHcJnIi/RNtGI2ENcKh5O8kgqTXqS7JG8NXkkxTOlLOW5hCepkLxMDUzdmzqeFpp2IG0yPTq9MYOSkZBxQqohTZO2Z+pn5mZ2y6xlhbL+xW6Lty8elQfJa7OQrAVZLQq2QqboVFoo1yoHsmdlV2a/zYnKOZarnivN7cyzytuQN5zvn//tEsIS4ZK2pYZLVy0dWOa9rGo5sjxxedsK4xUFK4ZWBqw8uIq2Km3VT6vtV5eufr0mek1rgV7ByoLBtQFr6wtVCuWFfevc1+1dT1gvWd+1YfqGnRs+FYmKrhTbF5cVf9go3HjlG4dvyr+Z3JS0qavEuWTPZtJm6ebeLZ5bDpaql+aXDm4N2dq0Dd9WtO319kXbL5fNKNu7g7ZDuaO/PLi8ZafJzs07P1SkVPRU+lQ27tLdtWHX+G7R7ht7vPY07NXbW7z3/T7JvttVAVVN1WbVZftJ+7P3P66Jqun4lvttXa1ObXHtxwPSA/0HIw6217nU1R3SPVRSj9Yr60cOxx++/p3vdy0NNg1VjZzG4iNwRHnk6fcJ3/ceDTradox7rOEH0x92HWcdL2pCmvKaRptTmvtbYlu6T8w+0dbq3nr8R9sfD5w0PFl5SvNUyWna6YLTk2fyz4ydlZ19fi753GDborZ752PO32oPb++6EHTh0kX/i+c7vDvOXPK4dPKy2+UTV7hXmq86X23qdOo8/pPTT8e7nLuarrlca7nuer21e2b36RueN87d9L158Rb/1tWeOT3dvfN6b/fF9/XfFt1+cif9zsu72Xcn7q28T7xf9EDtQdlD3YfVP1v+3Njv3H9qwHeg89HcR/cGhYPP/pH1jw9DBY+Zj8uGDYbrnjg+OTniP3L96fynQ89kzyaeF/6i/suuFxYvfvjV69fO0ZjRoZfyl5O/bXyl/erA6xmv28bCxh6+yXgzMV70VvvtwXfcdx3vo98PT+R8IH8o/2j5sfVT0Kf7kxmTk/8EA5jz/GMzLdsAAAAgY0hSTQAAeiUAAICDAAD5/wAAgOkAAHUwAADqYAAAOpgAABdvkl/FRgAAAg9JREFUeNp8ks1rE0EYxn9bE/xqikI0lITiQW+VImoONmCQtoonUbAglFDEUtlLxdo/wUNRD0Iw1kOIEmj6D9ir2FRQi4j0lILQJoimRfJB9mNmOx42iWsT+8Iw7DwPv32feUdTSuGtyeQKaT3GZHJlGEgA40AOyKT1WL6lt0rbC2hC9IFg7/a1c5HAib5Dc+WqOb/8pVjb3K4H03os6fVqXToYHgj2RiYun34KhD1S6c27jYeb2/ViWo/lW4c9dFYiPtgfMIQTNoRDw3YwbIeGcMLxwf5AM1a7fF0A436fL15pSNAUGqCUhqYp/P4Dc0AImNoPkNvaqX8MHDn4SkOBiwA0Kg1rHoh6zd0iZD4VyrWaKUpVQ1I1bSqGpGKI0udCuQZk/gu4+XhZpfXY2amRM88vnjq2vlMz7xn2biF41L8+FAl8f5a4cFw4u/mrj3KqK0BYNkDqzv3UyR6N32uFn9H334qhtY1fhyf0lzEgVd76oQDaEKVUe43NLirP97Rnn97rG5tdRCnldrCw9EFd0TNKNEwARmayCkg1tRdAavRBVo3OZAFwpMQR8m+E12+/YjcMzW4CpBsFF7AKgG1aCNM9l4bd9vjc7FZ73gDCtDpGIw27Oc5/9R6AuzeiSFsqRwjX7DH0hYK0fiKbHSSuDyEtq/MSu63zt56o/fRuL5HWxS4srTJ1+xL71Z8BAL+kU+9a36VRAAAAAElFTkSuQmCC",
includes:[]},$ContainersSection_HTML:{id:"ContainersSection_HTML",name:"HTML",iconBase64:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyBpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuMC1jMDYwIDYxLjEzNDc3NywgMjAxMC8wMi8xMi0xNzozMjowMCAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENTNSBXaW5kb3dzIiB4bXBNTTpJbnN0YW5jZUlEPSJ4bXAuaWlkOjVFNUZFNTNBNTk0QjExRTBBNkY0ODEzNDdCMzkxNTdDIiB4bXBNTTpEb2N1bWVudElEPSJ4bXAuZGlkOjVFNUZFNTNCNTk0QjExRTBBNkY0ODEzNDdCMzkxNTdDIj4gPHhtcE1NOkRlcml2ZWRGcm9tIHN0UmVmOmluc3RhbmNlSUQ9InhtcC5paWQ6NUU1RkU1Mzg1OTRCMTFFMEE2RjQ4MTM0N0IzOTE1N0MiIHN0UmVmOmRvY3VtZW50SUQ9InhtcC5kaWQ6NUU1RkU1Mzk1OTRCMTFFMEE2RjQ4MTM0N0IzOTE1N0MiLz4gPC9yZGY6RGVzY3JpcHRpb24+IDwvcmRmOlJERj4gPC94OnhtcG1ldGE+IDw/eHBhY2tldCBlbmQ9InIiPz5wB++kAAABAklEQVR42qRToQ7CMBC9LYhK5Bz9AyaHYhIHEomcYxI5iRwOOYkcDgkKWxxyuElwnSq5hpJ2tAvJXnK5vuvd60u7eUII6IOBTo67SafafH31foroQEWZR8IFVibis2/M+G3BV9NYTydkCJSGPy59WzOKtMMlYghUTwLsXsMsLQA4yIwc10GUyaBxLvusAuGigM3+BHFIJceMnFW182K/ApfbQ6jhdBnjoTLrIljjLgF9WIcu0ulgm8zgzCrID2ejATnWcV+htt3BdDzydBHOzWEaBLLGucMB4lQkXycIffivTxmBzYdsJdcqd8GHnmg5ILDfLrXHIpaHIwbz+v7ObwEGADGQtFOesBZAAAAAAElFTkSuQmCC",
includes:["\x3ca\x3e","\x3cdiv\x3e","\x3cspan\x3e","\x3ctable\x3e","\x3cstyle\x3e"]},$ContainersSection:{id:"Containers",name:"Containers",_COMMENT1_:"Desktop and mobile containers",_COMMENT2_:"Note that default desktop preset only include desktop widgets",_COMMENT3_:"and mobile preset only include mobile widgets",iconBase64:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAARJJREFUeNqkUzFuhEAMNFHqHAUEiU9Q0PKS3BNo6O9aJMQDqHkM4iG05CJdGgpgfXhvvVqyECHdSNaO7PWMsRYHEaGua+z7Hgi+7wPzLZh14kACZVniPM8yTM4xTZMOqpv8nZSEENqB+e/9DmIRJ6A6Xddd3aW8FFhcrFE/TifdaEHllymeAkQYQRBAURS7OwjDEFh2U6DrOrheLrDjDXmea64FxnHU4w7DIJt/bt+AAtVenqf36cs6/DcBc2piAUSxriszMn6DF2FNcAR45BM8z9tc5N+7lkAURZBl2a57HMe2gHxIajFt20JVVasHY06Spimcv87AfS8v0eG/sWkamUiSBJhvwawTd3bf+0E8BBgAL2nsdz3dOk4AAAAASUVORK5CYII\x3d",
subsections:["$ContainersSection_HTML"]},$ControlsSection_Buttons:{id:"Buttons",name:"Buttons",iconBase64:"data:image/gif;base64,R0lGODlhEAAQANUAAC5KhTFPijZXkDZYkDxhmTtimUJsouHr9/D1+0h2q0l3q7XQ7bbQ7bbQ7MLX79vo9k6AtE6Bs6TH6bbR7NLj9FKJu1OJulaNv5C95aTH6KTI6LXR7L/Z8Mje8laOv36z4X604JC95LnW77/a8Nzr9////wAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAACH5BAEAACUALAAAAAAQABAAAAZiwJJwSCwaj8hk0cP0XJpQj9ByqFqvVUSlFDk4vuCw4wApKR6MxmLCbm8mj0TJQNFI7nh8hmIoFTohGIKDgyEdBCUDHCAfHyCPkI0jAiUBIpeYmZckAUIAn6ChoEqkpaanRUEAOw\x3d\x3d",
includes:[["Button","\x3cbutton\x3e"]]},$ControlsSection_CheckboxesRadios:{id:"CheckboxesRadios",name:"Checkboxes, RadioButtons, Switch",iconBase64:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAP9JREFUeNpi/P//P8PGnQf/M5AJWGAMf3d7kjUDLUYYAAITd94kWnO+uzqqC2DAQkGAgYEDwpbg4ICLv/jxA8IAUicefMD0Agw8+ABRCNL7geEHXBwkHG4uD2avuPAAtwEQS4Cqf3DAtX8A2p5urw6Xv3DjBZzNhMuPP6Da0TUHdu5ksNCQwG0ASEO8uToYv/iAqtmxcSODAjCMBAQ48BuAHtIwzQZAmzUkBIBhzIHfCyBnIgNkzQJIMYPVAJACkDNBmghpxhoLEkD/CXBIgBUXzjzI4GCgAHE2B4GkDE8HLxDpQACq8cWHH4TzAnqgkZyZQBmDHMAIys6UAIAAAwBz81X4fS5oMgAAAABJRU5ErkJggg\x3d\x3d",
includes:[]},$ControlsSection_IconContainer:{id:"IconContainer",name:"IconContainer",_COMMENT1_:"Mobile-only",iconBase64:"data:image/gif;base64,R0lGODlhEAAQAMQAACVLiiVLiDlck/P2+zxhlzpppj9mnDh3xUJtokdzp3ak21ON0FCDvEp6rU6As1SKvFaOv////wAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAACH5BAEAABEALAAAAAAQABAAAAVoYBRBZGmWIjSsbMtC0TMo9FzTyvBEzrD8PuBvMXBEGoODMrlUHgaNSMJFXSUiiAGgwNByvV1ExFClGiIEWw6nHhAigiBxKB8I4MynM2/Hl1t3cQFfg12FfXF/LHdwAo6PkI4ik5SVkyEAOw\x3d\x3d",includes:[]},$ControlsSection_Pickers:{id:"Pickers",
name:"Pickers",iconBase64:"data:image/gif;base64,R0lGODlhEAAQANUAAKFMUiI5ZjxsuTlckz1jmj1jmVyL0T1kmUNvpERvpERuo0Rvo16W2jx7wEeO4Et7r0x7r26ayUt8r0x8rqrS+lGHuVKHuZXN/1aOv6u7yJypq+38++v6+aiysJ6uqWpNK5RcON6CV+esnbq2tf/X0t26tuxmXtaJhL+Zmf///wAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAACH5BAEAACkALAAAAAAQABAAAAZswJRwSCwSA8YhUrlMBpbPpjEqfCarUmlRezVivmBMKgweXyIMgUGMOafXKcvog2o4LKnKvH5PTUIgIh0UECkPgIIUEikLGQAnGxoJKQiOkBoKKQUcJSYkHgUpBJyeHgcpA6mqA6irqV2wsUJBADs\x3d",
includes:[]},$ControlsSection_Select:{id:"Select",name:"Select",iconBase64:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAVJJREFUeNpi/P//PwMlgAVEhPcf+E+RAb++fWeoz3QlqLhxxh6G+gwXBH/6bgYmEOPHp69gAVGGvwxijH8ZhP/9AbNhWJwRgn9+/AxWl5TYy/D61hOgvi8QF3z/8Akswc/JjGLjfwZGMM0IZIHY3z5ADDi4ogQs+23+XgZGUCBaRE4EByUjRBeUATOEASoANe4/0DhGqOh/aBjIm+kzfn37/n+IkxZJAbhm3zWIAX9//WHg4OVlMDBQZhD6+5doA7aceQQx4M/PnwywePRN6IVEDzsrAysnJwMHDxcDGxCDaFZODoZJqfZwA/78+AWLxh9wf+9cWkK0C359/wEx4DeQAXOBe3QPXhfAwKwsJ3D6gSckmAGHV5cT7YLf36AuADkFBmxDO4lyweJCZ7DLIbEADIz/0DA4vaGSeBcA9YETkpF/JyLNMGBJTXgAI6XZGSDAAJsyjhMJL+H/AAAAAElFTkSuQmCC",
includes:["Select","\x3cselect\x3e"]},$ControlsSection_SlidersSpinners:{id:"SlidersSpinners",name:"Sliders, Spinners",iconBase64:"data:image/gif;base64,R0lGODlhEAAQANUAAM7W5DdYkDteljpfloOcwUBonkBonUFonkdzqEdzp3CUv+Tt+EZzp9Xk9Njm9dvo9kx+sU1+sZ/E6K3M68re8tDh89fm9VKHuYO14pC95ZG95Z/F6KzM663N68ne8tDi89Xl9FaOv4O24pG+5aDJ6tXj76nR7v///wAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAACH5BAEAACcALAAAAAAQABAAAAZZwJNwSCwaj8ikcjkMOZ/J0KJBbSxCyMtnwulMPpdiKcSIUDZoiSfCCJWEERIB8RhpMppHglCBCA0mJgoHFiIYDgYKgQVCAAGPAQIgIAOQAQBIj0ybnJ2eJ0EAOw\x3d\x3d",
includes:[]},$ControlsSection_TextBox:{id:"TextBox",name:"TextBox",iconBase64:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAM1JREFUeNpi/P//PwMlgImBQkCxASzIHIvIif/lzfQZHp66yHBieT4jUSaAwgAZm0dM+I8uhg+DXRDefwAckqGWCmBD15x48H/18QcELV9Z6MAINuDPz98MtWmODBKcTAw9QL6NvhyDipoMXs0ts/chwuD39+9gDjfDfzgtyvAXe6hDQ+bXtx8IA94+eArmsLMywml+Bmbc4cbAyPD24VOEAX9//WLIyJ7KkBJiARZctPE0w5w1JxjoEgtM2NIBiCY2ITEO/bxAsQEAAQYAGVGarS2fPq4AAAAASUVORK5CYII\x3d",
includes:[["TextBox","\x3cinput\x3e"]]},$ControlsSection_Toolbars:{id:"Toolbars",name:"Toolbars, ButtonBars",iconBase64:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAOtJREFUeNpi/P//PwMlgAVEhPcf+E+RAX9+/mKoTXMiWXPTzH0MTCDGzy9f4YIxmZOIokHg19dvDIygMHAtWPq/vjQYLPgfCHecf8ngaSTOsP0cHtpQgqGxey3ECyCT3n/9CdINNsJCTZDh/ZdfcNoSRH9G8C1UBYDqfyBcYJowg7JAlJCVYGgu9CFZc+2ErRAD/v39BxZQ4STNgL9//kBi4R+QQQ749+cvzIC/ZBoAdcFfSl3w69t3sgwA6QMb8PsfeVH4599/aCwA00Jy2QIG5n+YJv1lYgKLw+h/QBqUaCBizJCERAkACDAAug6MMt3XrLUAAAAASUVORK5CYII\x3d",
includes:[]},$ControlsSection_Other:{id:"Other",name:"Other",iconBase64:"data:image/gif;base64,R0lGODlhEAAQANUAADlckzthmDxhl0BonkBonUVwpUp6rU+BtU+CtFOJu1OKu1aOv/b8//n9/8/t++/6//L7/+v5/+76//X8//j9/+v6/+77/+/7//L8//b9//X9//n+//j+///ovfvcsvTKofTJofbKo/TJo/TKo+20kOegfeeffuegfuWfff///wAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAACH5BAEAACkALAAAAAAQABAAAAZfwJRwSCwaj8ikUrloOp/QVIJErZIc2Kwiheh4v9dKpEI+pAyetPp6eVgsEkOq8AGNRKAQyoGB9DEFKQRWVHsTGgwaGQMpAiclJiYoJ3sNDRwbFAEpAJ2en6BLoqOkpEEAOw\x3d\x3d",
includes:[]},$ControlsSection:{id:"Controls",name:"Controls",_COMMENT1_:"each section can either have an array of subsections or an array of includes",iconBase64:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAIAAACQkWg2AAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyBpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuMC1jMDYwIDYxLjEzNDc3NywgMjAxMC8wMi8xMi0xNzozMjowMCAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENTNSBXaW5kb3dzIiB4bXBNTTpJbnN0YW5jZUlEPSJ4bXAuaWlkOjgyQUEwNTdCNTk1MTExRTBCODIzOTk0QzIzMzdBNkNGIiB4bXBNTTpEb2N1bWVudElEPSJ4bXAuZGlkOjgyQUEwNTdDNTk1MTExRTBCODIzOTk0QzIzMzdBNkNGIj4gPHhtcE1NOkRlcml2ZWRGcm9tIHN0UmVmOmluc3RhbmNlSUQ9InhtcC5paWQ6ODJBQTA1Nzk1OTUxMTFFMEI4MjM5OTRDMjMzN0E2Q0YiIHN0UmVmOmRvY3VtZW50SUQ9InhtcC5kaWQ6ODJBQTA1N0E1OTUxMTFFMEI4MjM5OTRDMjMzN0E2Q0YiLz4gPC9yZGY6RGVzY3JpcHRpb24+IDwvcmRmOlJERj4gPC94OnhtcG1ldGE+IDw/eHBhY2tldCBlbmQ9InIiPz7ZOYfnAAABBUlEQVR42pRSKxCDMAztdgjkJBKJnKxETk5WIpGTlcjKykpk5SSyEolETk4iI9eRrpSud7tF5NK8vHweHHoz38cHSdmVlhFkM5lN9W2dJDTKRJDNZBgxrum5oOdynB7j9NSC+aJhXjC4VCfrHQErLO0dsN2cBUDwjosOn0fyy2y19+8JsMDWjMA3QSkRPjMCW9GJ5CFWFzllu+qW1RmsXfHoW0OlNv7oYX52XRsS+rtVCbajrdGq9EeH2/rMQfZGaRPNxYwPdivpYRo1D8W+tAo3kVJ/Q+478Bt32UH5PSAFHWFVqVllRr/ploLc0VWRCyl2nT9BBDlZ8T8hKUYE/a3SS4ABAP4rm5Sxt9t9AAAAAElFTkSuQmCC",
subsections:"$ControlsSection_Buttons $ControlsSection_CheckboxesRadios $ControlsSection_Pickers $ControlsSection_Select $ControlsSection_TextBox $ControlsSection_Toolbars $ControlsSection_Other".split(" ")},$HTMLSection_Common:{id:"Common",name:"Common",iconBase64:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAALNJREFUeNpi/P//P4NUxvb/DGQCFhjj2QxPkjUDLWZgYqAQgA34//8fmNO74TIcwwCMjU2MAagPbADTv79wyeIAXTBG1oALMAL1gcOA8f9vgoqRDQWxIfr+QF3w9w95/v/7C+qCf78x/AezBa8XgC5gAKUDhZh5/8kBIH3QQPxNlhdALqdOOmD8+5vMQIS6gPH/X/K8ANQHDQMyoxEYC9CE9I9BI6SHdBeA9f7/T1EgAgQYAMdnhUefY5wVAAAAAElFTkSuQmCC",
includes:["\x3ca\x3e","\x3cdiv\x3e","\x3clabel\x3e","\x3cspan\x3e","\x3cstyle\x3e"]},$HTMLSection_Forms:{id:"Forms",name:"Forms",iconBase64:"data:image/png;base64,R0lGODlhEAAQAOYAAPT2/PH0+/n6/Iaavoyfwt/o+OLq+Onv+pOmxt/o9+bt+N7k7unv+e3y+sbT59/p+OLr+PD0+t/p9/D1+/f5+5DDvKfMxgBZSqfNxgJbSqjNxqjMxQZeSqjNxQZfSgpiSgphSg9mSrXSyRNrShNqSb3Vy5zKtp3Ktr3Wy5zKtZ3KtR1zSaDMtSJ3ScTYzSZ6SSZ7SSl+SSl9SSp+SSp9SaTNtCyASXt0T392ToV5TIx8SpOASKOIQ5yEReDIj97WwbSQPbCOPquLQNSyaNSyadq9fObav9Wyaf///////wAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAACH5BAEAAEkALAAAAAAQABAAAAeQgEmCg4SFhoeIhECLi4g2NklASEgCRECHNi40RpMURUdBgjAxMzIzKCUvSAgAPkVDQkktIrS1Ii0RExERATxJKx0bGhYdGMIrDgQDDT1JJBXQ0dAjDAwHDDtJISYnKSom3CEOCMoKOkkgHOoeLCwfCxAG8hA5hRk1HD8J+w8SBTiFLlxIcqOgwYKJEipcaCgQADs\x3d",
includes:"\x3cbutton\x3e \x3cfieldset\x3e \x3cform\x3e \x3cinput\x3e \x3cselect\x3e \x3ctextarea\x3e".split(" ")},$HTMLSection_Headers:{id:"Headers",name:"Headers",iconBase64:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAIpJREFUeNpi/P//PwMlgImBQkCxASwggtW3bzeQcgFiVx5NrT0gsS/Xr2GIwQBQbiaQSgPJkewCoOZyqGaEC4jUqASkQK5SIjcMlKC4Aoj34HLBbqBNuAy4B8TKwPC4B1TjgsuAs0D8Hso2BmJBmARIIzHRWAFUCAp1V6hhQyAhUWwA49DPTAABBgDGmykkJRol4AAAAABJRU5ErkJggg\x3d\x3d",
includes:["\x3ch1\x3e","\x3ch2\x3e","\x3ch3\x3e"]},$HTMLSection_ImagesMediaIframes:{id:"ImagesMediaIframes",name:"Media",iconBase64:"data:image/gif;base64,R0lGODlhEAAQANUAAOnn6f////7+/v39/fz8/Pr6+vn5+ff39/X19fT09PLy8vHx8e/v7+fn59/f397e3tvb29bW1sfHx8LCwsHBwby8vLq6urm5uba2trS0tLKysq2traKioqCgoJycnJSUlJKSkpGRkYuLi4qKiomJiYSEhHh4eHV1dXR0dGlpaWhoaFxcXP///wAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAACH5BAEAACwALAAAAAAQABAAAAaPQBYLNAQZjcJk0mgJOBeEkXI5jEwmHMJCNC1uIBNKxzTwEJWhocPxkAQIBgY3+QFpAJTJxnRarU5KRCANVxkcFygsJIEfGAx5eQoZSFQgCQkIlwREaUsgFwdXYQIXlEJpIAWiFAEfQ4EgFQFheQEWpq8gTrsBnLBNkBO2dWhDsxTIrSydQioqKc7P0iolQkEAOw\x3d\x3d",
includes:["\x3caudio\x3e","\x3cembed\x3e","\x3cimg\x3e","\x3ciframe\x3e","\x3cvideo\x3e"]},$HTMLSection_ParagraphsFormatting:{id:"ParagraphsFormatting",name:"Paragraphs",iconBase64:"data:image/gif;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAIAAACQkWg2AAAACXBIWXMAAAsTAAALEwEAmpwYAAAKT2lDQ1BQaG90b3Nob3AgSUNDIHByb2ZpbGUAAHjanVNnVFPpFj333vRCS4iAlEtvUhUIIFJCi4AUkSYqIQkQSoghodkVUcERRUUEG8igiAOOjoCMFVEsDIoK2AfkIaKOg6OIisr74Xuja9a89+bN/rXXPues852zzwfACAyWSDNRNYAMqUIeEeCDx8TG4eQuQIEKJHAAEAizZCFz/SMBAPh+PDwrIsAHvgABeNMLCADATZvAMByH/w/qQplcAYCEAcB0kThLCIAUAEB6jkKmAEBGAYCdmCZTAKAEAGDLY2LjAFAtAGAnf+bTAICd+Jl7AQBblCEVAaCRACATZYhEAGg7AKzPVopFAFgwABRmS8Q5ANgtADBJV2ZIALC3AMDOEAuyAAgMADBRiIUpAAR7AGDIIyN4AISZABRG8lc88SuuEOcqAAB4mbI8uSQ5RYFbCC1xB1dXLh4ozkkXKxQ2YQJhmkAuwnmZGTKBNA/g88wAAKCRFRHgg/P9eM4Ors7ONo62Dl8t6r8G/yJiYuP+5c+rcEAAAOF0ftH+LC+zGoA7BoBt/qIl7gRoXgugdfeLZrIPQLUAoOnaV/Nw+H48PEWhkLnZ2eXk5NhKxEJbYcpXff5nwl/AV/1s+X48/Pf14L7iJIEyXYFHBPjgwsz0TKUcz5IJhGLc5o9H/LcL//wd0yLESWK5WCoU41EScY5EmozzMqUiiUKSKcUl0v9k4t8s+wM+3zUAsGo+AXuRLahdYwP2SycQWHTA4vcAAPK7b8HUKAgDgGiD4c93/+8//UegJQCAZkmScQAAXkQkLlTKsz/HCAAARKCBKrBBG/TBGCzABhzBBdzBC/xgNoRCJMTCQhBCCmSAHHJgKayCQiiGzbAdKmAv1EAdNMBRaIaTcA4uwlW4Dj1wD/phCJ7BKLyBCQRByAgTYSHaiAFiilgjjggXmYX4IcFIBBKLJCDJiBRRIkuRNUgxUopUIFVIHfI9cgI5h1xGupE7yAAygvyGvEcxlIGyUT3UDLVDuag3GoRGogvQZHQxmo8WoJvQcrQaPYw2oefQq2gP2o8+Q8cwwOgYBzPEbDAuxsNCsTgsCZNjy7EirAyrxhqwVqwDu4n1Y8+xdwQSgUXACTYEd0IgYR5BSFhMWE7YSKggHCQ0EdoJNwkDhFHCJyKTqEu0JroR+cQYYjIxh1hILCPWEo8TLxB7iEPENyQSiUMyJ7mQAkmxpFTSEtJG0m5SI+ksqZs0SBojk8naZGuyBzmULCAryIXkneTD5DPkG+Qh8lsKnWJAcaT4U+IoUspqShnlEOU05QZlmDJBVaOaUt2ooVQRNY9aQq2htlKvUYeoEzR1mjnNgxZJS6WtopXTGmgXaPdpr+h0uhHdlR5Ol9BX0svpR+iX6AP0dwwNhhWDx4hnKBmbGAcYZxl3GK+YTKYZ04sZx1QwNzHrmOeZD5lvVVgqtip8FZHKCpVKlSaVGyovVKmqpqreqgtV81XLVI+pXlN9rkZVM1PjqQnUlqtVqp1Q61MbU2epO6iHqmeob1Q/pH5Z/YkGWcNMw09DpFGgsV/jvMYgC2MZs3gsIWsNq4Z1gTXEJrHN2Xx2KruY/R27iz2qqaE5QzNKM1ezUvOUZj8H45hx+Jx0TgnnKKeX836K3hTvKeIpG6Y0TLkxZVxrqpaXllirSKtRq0frvTau7aedpr1Fu1n7gQ5Bx0onXCdHZ4/OBZ3nU9lT3acKpxZNPTr1ri6qa6UbobtEd79up+6Ynr5egJ5Mb6feeb3n+hx9L/1U/W36p/VHDFgGswwkBtsMzhg8xTVxbzwdL8fb8VFDXcNAQ6VhlWGX4YSRudE8o9VGjUYPjGnGXOMk423GbcajJgYmISZLTepN7ppSTbmmKaY7TDtMx83MzaLN1pk1mz0x1zLnm+eb15vft2BaeFostqi2uGVJsuRaplnutrxuhVo5WaVYVVpds0atna0l1rutu6cRp7lOk06rntZnw7Dxtsm2qbcZsOXYBtuutm22fWFnYhdnt8Wuw+6TvZN9un2N/T0HDYfZDqsdWh1+c7RyFDpWOt6azpzuP33F9JbpL2dYzxDP2DPjthPLKcRpnVOb00dnF2e5c4PziIuJS4LLLpc+Lpsbxt3IveRKdPVxXeF60vWdm7Obwu2o26/uNu5p7ofcn8w0nymeWTNz0MPIQ+BR5dE/C5+VMGvfrH5PQ0+BZ7XnIy9jL5FXrdewt6V3qvdh7xc+9j5yn+M+4zw33jLeWV/MN8C3yLfLT8Nvnl+F30N/I/9k/3r/0QCngCUBZwOJgUGBWwL7+Hp8Ib+OPzrbZfay2e1BjKC5QRVBj4KtguXBrSFoyOyQrSH355jOkc5pDoVQfujW0Adh5mGLw34MJ4WHhVeGP45wiFga0TGXNXfR3ENz30T6RJZE3ptnMU85ry1KNSo+qi5qPNo3ujS6P8YuZlnM1VidWElsSxw5LiquNm5svt/87fOH4p3iC+N7F5gvyF1weaHOwvSFpxapLhIsOpZATIhOOJTwQRAqqBaMJfITdyWOCnnCHcJnIi/RNtGI2ENcKh5O8kgqTXqS7JG8NXkkxTOlLOW5hCepkLxMDUzdmzqeFpp2IG0yPTq9MYOSkZBxQqohTZO2Z+pn5mZ2y6xlhbL+xW6Lty8elQfJa7OQrAVZLQq2QqboVFoo1yoHsmdlV2a/zYnKOZarnivN7cyzytuQN5zvn//tEsIS4ZK2pYZLVy0dWOa9rGo5sjxxedsK4xUFK4ZWBqw8uIq2Km3VT6vtV5eufr0mek1rgV7ByoLBtQFr6wtVCuWFfevc1+1dT1gvWd+1YfqGnRs+FYmKrhTbF5cVf9go3HjlG4dvyr+Z3JS0qavEuWTPZtJm6ebeLZ5bDpaql+aXDm4N2dq0Dd9WtO319kXbL5fNKNu7g7ZDuaO/PLi8ZafJzs07P1SkVPRU+lQ27tLdtWHX+G7R7ht7vPY07NXbW7z3/T7JvttVAVVN1WbVZftJ+7P3P66Jqun4lvttXa1ObXHtxwPSA/0HIw6217nU1R3SPVRSj9Yr60cOxx++/p3vdy0NNg1VjZzG4iNwRHnk6fcJ3/ceDTradox7rOEH0x92HWcdL2pCmvKaRptTmvtbYlu6T8w+0dbq3nr8R9sfD5w0PFl5SvNUyWna6YLTk2fyz4ydlZ19fi753GDborZ752PO32oPb++6EHTh0kX/i+c7vDvOXPK4dPKy2+UTV7hXmq86X23qdOo8/pPTT8e7nLuarrlca7nuer21e2b36RueN87d9L158Rb/1tWeOT3dvfN6b/fF9/XfFt1+cif9zsu72Xcn7q28T7xf9EDtQdlD3YfVP1v+3Njv3H9qwHeg89HcR/cGhYPP/pH1jw9DBY+Zj8uGDYbrnjg+OTniP3L96fynQ89kzyaeF/6i/suuFxYvfvjV69fO0ZjRoZfyl5O/bXyl/erA6xmv28bCxh6+yXgzMV70VvvtwXfcdx3vo98PT+R8IH8o/2j5sfVT0Kf7kxmTk/8EA5jz/GMzLdsAAAAEZ0FNQQAAsY58+1GTAAAAIGNIUk0AAHolAACAgwAA+f8AAIDpAAB1MAAA6mAAADqYAAAXb5JfxUYAAAHGSURBVHjaZFLJbhNREKx+b2Yc7xs2EEVZlEgR4oKEOHLiH/gEfokP4EM4I0UcEApCkYAoIDlWGC9je2ymFw4zA9jUqaWu6up6r+nT1XWn1QDAnMEU2/BB5HxoxjAAmM4XQb/TGtzrcBprfOXC2l8ugVnHox+9w6eN7kGhdy4QVQCrZB7WjqOykYMZy9E0vXg9fPKqOzgCIKou76kZs6w2WbL6laRZkmarDXNmlfqg2xvefngzGX/NbYNimkFU3328niTrMKrA+Ua18vzRg73W4ab20iq38eimOzwBSoGamWLQaVSj0PuAnAO591/uWG2/1z46aU++X+bMPw7GgpvxLJ4tgzByPiDnyXkxNKt7+83Iygd0JR/MCjgiclTAERHBDBmriG05qGrG+uLZuUk5oIQYVou5qm4JzCCii1QlYxBgAIEAGMg7EdUdBzMTsbcXn+N5EoYR+ZCcd96z4Pygd9orvuvfDMZS7GEglBUoNzfV3Qym8I/PjjebdZ4WRCAyo2atwpLuCgDcfbvsCwfCO6GXoFUyrQfrQuCdA/Dw+CyKIsDyRXZg9xvt/rA4vp/TuagSka8PczL9JyDQbC26jKezxe8BAJ6U+/2r7MIJAAAAAElFTkSuQmCC",
includes:"\x3cb\x3e \x3cbr\x3e \x3cem\x3e \x3chr\x3e \x3ci\x3e \x3cp\x3e \x3cs\x3e \x3cstrong\x3e \x3cu\x3e".split(" ")},$HTMLSection_Tables:{id:"Tables",name:"Tables",iconBase64:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAXhJREFUeNrEUz1LA0EQnTvzO/wPYsBOrQW109ImpLPIL9DWKqQQRESEFGKjYmGwEyQggUTBRn+BIhFFTXK53Z1xZi53ulcpKdxjmXnD7Lv39iMgIhhnhDDmKKTJavXyz1KOKvNBRkCIsFWe09wxFbI1iTEy5ppB0shB69v1K18BOdTYvHvUZm1k0oi7rUwhIIkAs8VJQESfwMQxVGoXv5Le7jxAwF/yZ2aVubRxRjKYmWJrqXZyQ/3I0HtvSG8fA8Xd1z49v/ToqftJi5va/30KJhqOyGQ/WL6xCcZkCkakrMcOopyFKGKvCGLNslFrDMTGqX8hECz7AKN7YwZDnwC5uXp47XndPW17uN64zXK0zidwzsH6yozKNKxg57gFpeUi11EtHZx3YG1hKiNoNO9zx8iMcjRigWQFYuJfVAMp/jmcRf8qG90sUAWoEWUZpG8FcwRICQ7ShunSniYToiIMIb3XguXELdcKnEtM6639chD8+2v8EmAA9/wqJKl9P7kAAAAASUVORK5CYII\x3d",
includes:["\x3ctable\x3e"]},$HTMLSection:{id:"HTML",name:"HTML",iconBase64:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyBpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuMC1jMDYwIDYxLjEzNDc3NywgMjAxMC8wMi8xMi0xNzozMjowMCAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENTNSBXaW5kb3dzIiB4bXBNTTpJbnN0YW5jZUlEPSJ4bXAuaWlkOjVFNUZFNTNBNTk0QjExRTBBNkY0ODEzNDdCMzkxNTdDIiB4bXBNTTpEb2N1bWVudElEPSJ4bXAuZGlkOjVFNUZFNTNCNTk0QjExRTBBNkY0ODEzNDdCMzkxNTdDIj4gPHhtcE1NOkRlcml2ZWRGcm9tIHN0UmVmOmluc3RhbmNlSUQ9InhtcC5paWQ6NUU1RkU1Mzg1OTRCMTFFMEE2RjQ4MTM0N0IzOTE1N0MiIHN0UmVmOmRvY3VtZW50SUQ9InhtcC5kaWQ6NUU1RkU1Mzk1OTRCMTFFMEE2RjQ4MTM0N0IzOTE1N0MiLz4gPC9yZGY6RGVzY3JpcHRpb24+IDwvcmRmOlJERj4gPC94OnhtcG1ldGE+IDw/eHBhY2tldCBlbmQ9InIiPz5wB++kAAABAklEQVR42qRToQ7CMBC9LYhK5Bz9AyaHYhIHEomcYxI5iRwOOYkcDgkKWxxyuElwnSq5hpJ2tAvJXnK5vuvd60u7eUII6IOBTo67SafafH31foroQEWZR8IFVibis2/M+G3BV9NYTydkCJSGPy59WzOKtMMlYghUTwLsXsMsLQA4yIwc10GUyaBxLvusAuGigM3+BHFIJceMnFW182K/ApfbQ6jhdBnjoTLrIljjLgF9WIcu0ulgm8zgzCrID2ejATnWcV+htt3BdDzydBHOzWEaBLLGucMB4lQkXycIffivTxmBzYdsJdcqd8GHnmg5ILDfLrXHIpaHIwbz+v7ObwEGADGQtFOesBZAAAAAAElFTkSuQmCC",
subsections:"$HTMLSection_Common $HTMLSection_Forms $HTMLSection_Headers $HTMLSection_ImagesMediaIframes $HTMLSection_ParagraphsFormatting $HTMLSection_Tables".split(" ")},$AppOtherSection:{id:"Other",name:"Other",iconBase64:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAcFJREFUeNqcUj1IQlEUPjfc+llqCEKwpaCgrJZqKOhnqiChsbQhF+f2moqgpaH2rDEqiiCwBB2sRbJArYa0hohSCLTQ93rvds95710VHaIDx/P5ne+ce869j3HOAW039MCPr9PwV5sddIBntJPZLAKLV+eHCDMpY2UlnP5bvyv7V9gA6qx04bMAmbwKmZwiXIWPvAI9bY0iFikSh7m8QhrUo9nKx8IknsTFGYyXcwDvohHDgbgxhWUVDbJfijE23osIO+Fnmnw79CKKzTJswEot5Aq+uV6Ix+6FJ8HewCESjJIjTtwmKWev5xAXOCEw6o2G4jR039Y5z+WK5H/FWCdX4HppLEykMtkqrJu4vaWZML2T9R2cRtP8LJygS5wa6QYDg8BdNbChmRlwMLmCd/NUjmfhu9Qr4enlALl384Q4S4N18hJ1XYeaWNMk1rRqTcUKR4Ebwq7JPiAsnss10Q9HFyY/YfKmpmKFpY0T/v2tkrvXDig+vWX54vohRXTUYMScR2gqXqGoFEqvYI7X2tQkxv6hSBq1IHHVCoHII/cHY/QJL4w7wX8ZI94t8J7gUYYYNcSPOWFyuIPJBv+1XwEGAJJgewSkj0bcAAAAAElFTkSuQmCC",
includes:["$$AllOthers$$"]},$SketchOtherSection:{id:"Other",name:"Other",iconBase64:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAcFJREFUeNqcUj1IQlEUPjfc+llqCEKwpaCgrJZqKOhnqiChsbQhF+f2moqgpaH2rDEqiiCwBB2sRbJArYa0hohSCLTQ93rvds95710VHaIDx/P5ne+ce869j3HOAW039MCPr9PwV5sddIBntJPZLAKLV+eHCDMpY2UlnP5bvyv7V9gA6qx04bMAmbwKmZwiXIWPvAI9bY0iFikSh7m8QhrUo9nKx8IknsTFGYyXcwDvohHDgbgxhWUVDbJfijE23osIO+Fnmnw79CKKzTJswEot5Aq+uV6Ix+6FJ8HewCESjJIjTtwmKWev5xAXOCEw6o2G4jR039Y5z+WK5H/FWCdX4HppLEykMtkqrJu4vaWZML2T9R2cRtP8LJygS5wa6QYDg8BdNbChmRlwMLmCd/NUjmfhu9Qr4enlALl384Q4S4N18hJ1XYeaWNMk1rRqTcUKR4Ebwq7JPiAsnss10Q9HFyY/YfKmpmKFpY0T/v2tkrvXDig+vWX54vohRXTUYMScR2gqXqGoFEqvYI7X2tQkxv6hSBq1IHHVCoHII/cHY/QJL4w7wX8ZI94t8J7gUYYYNcSPOWFyuIPJBv+1XwEGAJJgewSkj0bcAAAAAElFTkSuQmCC",
includes:"Calendar ColorPalette GridX RichText StickyNote Tree $$AllOthers$$".split(" ")},$mobileSections:"$ControlsSection $ContainersSection $HTMLSection $ClipartSection $XBLOXSection $DrawingToolsSection $AppOtherSection".split(" "),$desktopSections:"$ContainersSection $ControlsSection $ViewsSection $HeadingSection $HTMLSection $ClipartSection $XBLOXSection $DrawingToolsSection $AppOtherSection".split(" "),$sketchSections:"$DrawingToolsSection $ClipartSection $ControlsSection $ContainersSection $HTMLSection $HeadingSection $SketchOtherSection".split(" "),
$sketchExcludes:[],$ALLMOBILE_Sections:[],$ALLDESKTOP_Sections:"$ContainersSection $ControlsSection $ViewsSection $HeadingSection $HTMLSection $ClipartSection $XBLOXSection $DrawingToolsSection $AppOtherSection".split(" "),$deliteSections:["$HTMLSection","$XBLOXSection","$DELITESection"],$ALLDELITE_Sections:["$HTMLSection","$XBLOXSection","$DELITESection"],$DELITESection_Controls:{id:"delite",name:"Controls",iconBase64:"data:image/gif;base64,R0lGODlhEAAQALMAAN7e4oyMjtXV1sDAwf///+Dg4MvLyzMzM////wAAAAAAAAAAAAAAAAAAAAAAAAAAACH5BAEAAAgALAAAAAAQABAAAAQ3EMlJq704a3RO2NIhBIexHYRgeFTndkQ8HmER33g60EcB/ECcYBd6wWSkDErFUs5Mms4HRK1SIwA7",
includes:"Button Slider Combobox Select Checkbox RadioButton Switch ToggleButton MediaPlayer".split(" ")},$DELITESection_Containers:{id:"delite",name:"Containers",iconBase64:"data:image/gif;base64,R0lGODlhEAAQALMAAN7e4oyMjtXV1sDAwf///+Dg4MvLyzMzM////wAAAAAAAAAAAAAAAAAAAAAAAAAAACH5BAEAAAgALAAAAAAQABAAAAQ3EMlJq704a3RO2NIhBIexHYRgeFTndkQ8HmER33g60EcB/ECcYBd6wWSkDErFUs5Mms4HRK1SIwA7",includes:["ViewStack","Panel","TabBar","Accordion"]},$DELITESection:{id:"delite",name:"Deliteful",iconBase64:"data:image/gif;base64,R0lGODlhEAAQAKIAAFhYWtXV1v///0BAQP///wAAAAAAAAAAACH5BAEAAAQALAAAAAAQABAAAAMuSLo0w5CNIF6EM9grN2+Z82WCEGjcVJbopa5tlJ2nh4W2XH9LyCu+X/AHAPyOCQA7",
subsections:["$DELITESection_Controls","$DELITESection_Containers"],includes:[]}},_COMMENT11_:"Should have one each for mobile, desktop, sketchhifi, sketchlofi",_COMMENT12_:"For each preset, collections is list of each widget collection in order of precedence",_COMMENT13_:"and sections is the array of sections for this preset (or $desktopSections)",presets:{desktop:{collections:[{id:"html",show:!0},{id:"clipart",show:!0},{id:"xblox",show:!0},{id:"shapes",show:!0},{id:"delite",show:!0}],sections:"$desktopSections"},
delite:{collections:[{id:"html",show:!0},{id:"xblox",show:!0},{id:"delite",show:!0},{id:"shapes",show:!0},{id:"clipart",show:!0}],sections:"$deliteSections"},$ALLDESKTOP:{_COMMENT1_:"$ALLDESKTOP is a special preset which shows all widgets",_COMMENT2_:"regardless of the current composition type",_COMMENT3_:"ranking desktop widgets above mobile widgets",collections:[{id:"html",show:!0},{id:"clipart",show:!0},{id:"xblox",show:!0},{id:"shapes",show:!0}],sections:"$ALLDESKTOP_Sections"},$ALLDELITE:{_COMMENT1_:"$ALLDESKTOP is a special preset which shows all widgets",
_COMMENT2_:"regardless of the current composition type",_COMMENT3_:"ranking desktop widgets above mobile widgets",collections:[{id:"html",show:!0},{id:"clipart",show:!0},{id:"xblox",show:!0},{id:"shapes",show:!0},{id:"delite",show:!0}],sections:"$ALLDELITE_Sections"}}}:this._initializationInfo[a]},getDefaultThemeSet:function(){return this.getSiteConfigData("defaultThemeSet")},getUserDisplayName:function(a){a||(a=this.getUser());var f=a.userDisplayName;a.userDisplayName||(f=a.email);return f},getUserEmail:function(a){a||
(a=this.getUser());return a.email},getUserDisplayNamePlusEmail:function(a){a||(a=this.getUser());var f=this.getUserDisplayName(a);f!=a.email&&(f+=" \x26lt;"+a.email+"\x26gt;");return f},loadPlugins:function(){h.forEach(function(b){var f=b.id;a.plugins[f]=b;for(var q in b){var c=b[q];"string"!=typeof c&&(c instanceof Array?c.forEach(function(c){a._addExtension(q,c,f)}):a._addExtension(q,c,f))}})},singleUserMode:function(){return a.isLocalInstall},_stripMaqetta:!0,location:function(){var a=document.location.href.split("?")[0],
a=a.replace("index.php",""),a=a.replace("maqetta.html",""),a=a.replace("xui.php",""),a=a.replace("xui.php?debug\x3dtrue",""),a=a.replace("maqettar.html",""),a=a.replace("index.html",""),a=a.replace("?",""),a=a.replace("debug\x3dtrue",""),a=a.replace("\x26isDesktop\x3dtrue","");this._stripMaqetta&&(a=a.replace("maqetta/",""));return a},getUserWorkspaceUrl:function(){if(this.userBaseUrl)return this.userBaseUrl},run:function(){dojo.isMac&&dojo.addClass(document.documentElement,"isMac");var b=document.body.style;
a.supportsCSS3Transitions=void 0!==b.WebkitTransition||void 0!==b.MozTransition||void 0!==b.OTransition||void 0!==b.transition;a.subscribe("/davinci/ui/selectionChanged",a._selectionChanged);dojo.connect(dojo.doc.documentElement,"onkeypress",function(f){8==f.charOrCode&&(window.davinciBackspaceKeyTime=Date.now())});dojo.connect(dojo.doc.documentElement,"onkeydown",this,"_handleGlobalDocumentKeyEvent");dojo.addOnUnload(function(f){for(var a=null,c=davinci.Workbench&&davinci.Workbench.editorTabs?davinci.Workbench.editorTabs.getChildren():
[],b=0,d=0;d<c.length;d++){var m=c[d];m.editor&&(m=m.editor.getOnUnloadWarningMessage())&&(a||(a=m),b++)}1<b&&(a=dojo.string.substitute(n.multipleFilesUnsaved,[a,b]));!a&&100>Date.now()-window.davinciBackspaceKeyTime&&(a=n.careful);if(a){if(f=f||window.event)f.returnValue=a;return a}})},subscribe:function(b,f){a.subscriptions.push(dojo.subscribe(b,this,f))},destroy:function(){dojo.forEach(a.subscriptions,dojo.unsubscribe)},_addExtension:function(b,f,q){f.id&&(f.id=q+"."+f.id);a.extensionPoints[b]=
a.extensionPoints[b]||[];q=a.extensionPoints[b];q.push(f);a.extensionPoints[b]=q},getExtensions:function(b,f){b=a.extensionPoints[b];if(f){var q=f instanceof Function;if(b)return b.filter(function(c){return q&&f(c)||c.id==f})}return b},getExtension:function(b,f){return a.getExtensions(b,f)[0]},handleError:function(b){var f="welcome";a.singleUserMode()&&(f=".");window.document.body.innerHTML=dojo.string.substitute(n.serverConnectError,{redirectUrl:f,error:b})},executeCommand:function(b){(b=a.getExtension("davinci.commands",
b))&&b.run&&b.run()},_selectionChanged:function(b){a.currentSelection=b},getSelection:function(){return a.currentSelection},serverJSONRequest:function(a){var f,b={handleAs:"json"};dojo.mixin(b,a);dojo.xhrGet(b).then(function(c){c&&(f=c)});return f},registerKeyBinding:function(a,f){this._globalKeyBindings||(this._globalKeyBindings=[]);this._globalKeyBindings.push({keyBinding:a,action:f})},handleKeyEvent:function(a){this._handleKeyEvent(a,!0)},_handleGlobalDocumentKeyEvent:function(a){this._handleKeyEvent(a)},
_handleKeyEvent:function(b,f){if(this._globalKeyBindings){var q=!1;(q=dojo.some(this._globalKeyBindings,dojo.hitch(this,function(c){if(a.isKeyEqualToEvent(c.keyBinding,b))return davinci.Workbench._runAction(c.action),!0})))?dojo.stopEvent(b):f||this.currentEditor&&this.currentEditor.handleKeyEvent&&this.currentEditor.handleKeyEvent(b,!0)}},isKeyEqualToEvent:function(a,f){var b=!0,c=f.altKey&&!dojo.isMac||dojo.isMac&&f.ctrlKey;!!a.accel!==(f.ctrlKey&&!dojo.isMac||dojo.isMac&&f.metaKey)&&(b=!1);!!a.meta!==
c&&(b=!1);!!a.shift!==f.shiftKey&&(b=!1);b&&a.charOrCode&&f.which&&(b=dojo.isArray(a.charOrCode)?dojo.some(a.charOrCode,dojo.hitch(this,function(c){return this._comparecharOrCode(c,f)})):this._comparecharOrCode(a.charOrCode,f));return b},_comparecharOrCode:function(a,f){return dojo.isString(a)?a.toLowerCase()===String.fromCharCode(f.which).toLowerCase():a===f.which}};return a})},"davinci/lang/webContent":function(){define([],function(){return{designer:"Designer,",welcome:"Welcome",loadingMaqetta:"\x26nbsp;Loading Maqetta...",
startupError:"Error starting Maqetta: ${0}",logOff:"Log Out",unsupportedBrowser:"Unsupported Browser",unsupportedNote:'Maqetta supports Firefox 4, Chrome 5, and Safari 5.1 or greater. If you wish to continue with an unsupported browser, click "Continue."',buttonContinue:"Continue",pageDesignerTitle:"Maqetta Designer",maqettaUser:"Maqetta User",localhostUser:"localhost user",sessionTimedOut:"Session timed out",sessionTimedOutMsg:"The session has timed out, please \x3ca href\x3d'${hrefLoc}'\x3elog in\x3c/a\x3e again. (Auto-redirect within 10 seconds)",
devicePreviewError:"Maqetta device previewer error. Must supply URL parameter 'file\x3d'",devicePreviewPreviewing:"Previewing:",help:"Help",tutorials:"Tutorials",aboutMaqetta:"About Maqetta",review:"Review and Commenting,",reviewPageTitle:"Maqetta Review Board",careful:"Warning: You are about to leave Maqetta.",errorLoadingPlugin:"error loading plugin ${0}, response\x3d${1}",errorLoadingPlugins:"error loading plugins",multipleFilesUnsaved:"${0} (NOTE: This is one of ${1} files with unsaved changes.)",
idleSessionMessage:"Your session will timeout in ${seconds} seconds, click anywhere in the page to continue using Maqetta.",fileHasUnsavedChanges:"Save changes to ${0}?",perspectiveNotFound:"perspective not found: ${0}",scopeNotDefined:"scope not defined for action: ${0}",funcNotDefined:"function not defined for action: ${0}",serverConnectError:"\x3ch3\x3eError connecting to the Maqetta Server.\x3c/h3\x3e\x3cbr\x3e\x3cdiv\x3ePlease click here to \x3ca href\x3d'${redirectUrl}'\x3ereturn to Maqetta\x3c/a\x3e\x3cdiv\x3e\x3cdiv\x3eError description: ${error}\x3c/div\x3e"}})},
"davinci/commands/CommandStack":function(){define(["dojo/_base/declare"],function(n){return n("davinci.commands.CommandStack",null,{constructor:function(k){this._context=k;this._undoStack=[];this._redoStack=[]},execute:function(k,g){if(k&&(g=this._context&&"davinci.ve.themeEditor.Context"!=this._context.declaredClass?dojo.withDoc(this._context.getDocument(),"execute",k,[this._context,g]):k.execute(g),this._undoStack.push(k),this._redoStack=[],!g))this.onExecute(k,"execute")},undo:function(){if(this.canUndo()){var k=
this._undoStack.pop();k._runDelegate?k._runDelegate.undoDelegate(k):this._context&&"davinci.ve.themeEditor.Context"!=this._context.declaredClass?dojo.withDoc(this._context.getDocument(),"undo",k):k.undo();this._redoStack.push(k);this.onExecute(k,"undo")}},redo:function(){if(this.canRedo()){var k=this._redoStack.pop();k._runDelegate?k._runDelegate.redoDelegate(k):this._context&&"davinci.ve.themeEditor.Context"!=this._context.declaredClass?dojo.withDoc(this._context.getDocument(),"execute",k):k.execute();
this._undoStack.push(k);this.onExecute(k,"redo")}},canUndo:function(){return 0<this._undoStack.length},canRedo:function(){return 0<this._redoStack.length},getUndoCount:function(){return this._undoStack.length},getRedoCount:function(){return this._redoStack.length},clear:function(){this._undoStack=[];this._redoStack=[]},jump:function(k,g){var e=this.getUndoCount(),b=this.getRedoCount();if(k==e)return k;if(0>k||k>e+b)return-1;e=k-e;if(g)if(0>e)for(;0>e;)this._redoStack.push(this._undoStack.pop()),e++;
else for(;0<e;)this._undoStack.push(this._redoStack.pop()),e--;else if(0>e)for(;0>e;)this.undo(),e++;else for(;0<e;)this.redo(),e--;return k},onExecute:function(k,g){},undoDelegate:function(k){},redoDelegate:function(k){}})})},"davinci/ui.plugin":function(){define(["require"],function(n){return{id:"davinci.ui","davinci.view":[{id:"navigator",title:"Files",viewClass:"davinci/workbench/Explorer",iconClass:"paletteIcon paletteIconFiles"},{id:"hierarchy",title:"Hierarchy"},{id:"devices",title:"Devices",
viewClass:"davinci/workbench/DeviceTreeView",iconClass:"paletteIcon paletteIconOutline"},{id:"files",title:"XFiles",viewClass:"davinci/workbench/FileView",iconClass:"paletteIcon paletteIconOutline"},{id:"comment",title:"Comments",viewClass:"davinci/review/view/CommentView",iconClass:"paletteIcon paletteIconComments"},{id:"scope",title:"Scope"},{id:"properties",title:"Properties",viewClass:"davinci/workbench/PropertyEditor"},{id:"console",title:"Console"},{id:"history",title:"History"},{id:"search",
title:"Search"}],"davinci.preferences":[{name:"Project",id:"project",hide:!0,category:"",pageContent:"Project Settings here"},{name:"Project Settings",id:"ProjectPrefs",category:"davinci.ui.project",pane:"davinci/ui/ProjectPreferences",defaultValues:{webContentFolder:"",themeFolder:"themes",widgetFolder:"lib/custom"}}],"davinci.perspective":{id:"main",title:"AJAX IDE",views:[{viewID:"davinci.ui.navigator",position:"left-bottom"},{viewID:"davinci.ui.outline",position:"right"},{viewID:"davinci.ui.properties",
position:"right-bottom"}]},"davinci.actionSets":[{id:"editorActions",visible:!0,menu:[],actions:[]},{id:"main",visible:!0,menu:[{__mainMenu:!0,separator:["usersettings",!1,"settings",!1,"additions",!1,"help",!1]},{label:"User settings",path:"usersettings",id:"davinci.usersettings",className:"userSettingsMenu",iconClass:"userSettingsMenuIcon",showLabel:!1,separator:["username",!0,"logout",!0,"additions",!1]},{label:"Settings",path:"settings",id:"davinci.settings",className:"appSettingsMenu",iconClass:"appSettingsMenuIcon",
showLabel:!1,separator:["settings",!0,"additions",!1]}],actions:[{id:"editPreferences",run:function(){n(["davinci/workbench/Preferences"],function(k){k.showPreferencePage()})},label:"Preferences...",menubarPath:"davinci.settings/settings"}]},{id:"explorerActions",visible:!0,actions:[{id:"davinci.ui.rename",label:"Rename...",iconClass:"renameIcon",run:function(){n(["./ui/Resource"],function(k){k.renameAction()})},isEnabled:function(k){return n("./ui/Resource").canModify(k)},menubarPath:"addFiles"},
{id:"davinci.ui.delete",label:"Delete",iconClass:"deleteIcon",isEnabled:function(k){return n("./ui/Resource").canModify(k)},run:function(){n(["./ui/Resource"],function(k){k.deleteAction()})},menubarPath:"delete",keyBinding:{charOrCode:[dojo.keys.DELETE,dojo.keys.BACKSPACE]}},{id:"davinci.ui.download",label:"Download",iconClass:"downloadSomeIcon",action:"davinci/actions/DownloadAction",isEnabled:function(k){return n("./ui/Resource").canModify(k)},menubarPath:"delete"}]}],"davinci.actionSetPartAssociations":[{targetID:"davinci.ui.editorActions",
parts:["davinci.ui.editorMenuBar"]},{targetID:"davinci.ui.explorerActions",parts:["davinci.ui.navigator"]}],"davinci.viewActions":[{viewContribution:{targetID:"davinci.ui.problems",actions:[{id:"Copy2",iconClass:"copyIcon",run:function(){alert("view toolbar")},label:"Copy",toolbarPath:"davinci.toolbar.main/edit",menubarPath:"davinci.edit/cut"}]}},{viewContribution:{targetID:"workbench.Explorer",actions:[{id:"davinci.ui.newfile",label:"New folder...",iconClass:"newFolderIcon",className:"FilesToolbarNewFolder",
run:function(){n(["./ui/Resource"],function(k){k.newFolder()})},toolbarPath:"download"},{id:"davinci.ui.deletefile",label:"Delete file...",iconClass:"FilesToolbarDeleteFileIcon",className:"FilesToolbarDeleteFile",run:function(){n(["./ui/Resource"],function(k){k.deleteAction()})},toolbarPath:"download"},{id:"davinci.ui.renamefile",label:"Rename file...",iconClass:"FilesToolbarRenameFileIcon",className:"FilesToolbarRenameFile",run:function(){n(["./ui/Resource"],function(k){k.renameAction()})},toolbarPath:"download"},
{id:"download",iconClass:"downloadSomeIcon",className:"FilesToolbarDownloadSelected",run:function(){n(["./Workbench","./ui/DownloadSelected"],function(k,g){k.showModal(new g,"Download",{width:440})})},label:"Download Selected Files",toolbarPath:"download"},{id:"download",iconClass:"downloadAllIcon",className:"FilesToolbarDownloadAll",run:function(){n(["./Workbench","./ui/Download"],function(k,g){k.showModal(new g,"Download",{width:440})})},label:"Download Entire Project",toolbarPath:"download"}]}}]}})},
"davinci/html/html.plugin":function(){define(["require"],function(n){return{id:"davinci.html","davinci.editor":[{id:"HTMLEditor",name:"HTML Editor",extensions:"html",isDefault:!1,editorClass:"davinci/html/ui/HTMLEditor",palettePerspective:"davinci.html.htmlEditor",expandPalettes:["left"]},{id:"CSSEditor",name:"CSS Editor",extensions:"css",isDefault:!1,editorClass:"davinci/html/ui/CSSEditor",palettePerspective:"davinci.html.htmlEditor",expandPalettes:["left"]},{id:"ImageViewer",name:"Image Viewer",
extensions:"jpg,gif,jpeg,png",isDefault:!0,editorClass:"davinci/html/ui/ImageViewer",palettePerspective:"davinci.html.htmlEditor",expandPalettes:["left"]}],"davinci.editorActions":{editorContribution:{targetID:"davinci.html.CSSEditor",actions:[{id:"savecombo",className:"maqLabelButton",showLabel:!0,label:"Save",toolbarPath:"save",type:"ComboButton",run:function(){n(["../Workbench"],function(k){n("../ui/Resource").save()})},isEnabled:function(k){return n("../Workbench").getOpenEditor()},menu:[{iconClass:"saveIcon",
run:function(){n("../ui/Resource").save()},isEnabled:function(k){return n("../Workbench").getOpenEditor()},label:"Save",keyBinding:{accel:!0,charOrCode:"s",allowGlobal:!0}},{iconClass:"saveAsIcon",run:function(){n("../ui/Resource").saveAs("html")},isEnabled:function(k){return n("../Workbench").getOpenEditor()},label:"Save As",keyBinding:{accel:!0,shift:!0,charOrCode:"s",allowGlobal:!0}}]}]}},"davinci.preferences":[{name:"HTML",id:"general",category:""}],"davinci.fileType":[{extension:"html",iconClass:"htmlFileIcon",
type:"text"},{extension:"css",iconClass:"cssFileIcon",type:"text"},{extension:"jpeg",iconClass:"imageFileIcon",type:"image"},{extension:"jpg",iconClass:"imageFileIcon",type:"image"},{extension:"png",iconClass:"imageFileIcon",type:"image"},{extension:"gif",iconClass:"imageFileIcon",type:"image"}],"davinci.perspective":[{id:"htmlEditor",title:"HTML Editor",views:[{viewID:"davinci.ve.Palette",position:"left",hidden:!0},{viewID:"davinci.ui.outline",position:"left",hidden:!0},{viewID:"davinci.ve.style",
position:"right"},{viewID:"davinci.ui.comment",position:"right",hidden:!0},{viewID:"davinci.ve.states",position:"right-bottom",hidden:!0},{viewID:"davinci.ui.navigator",position:"left-bottom",selected:!0},{viewID:"davinci.review.reviewNavigator",position:"left"}]}]}})},"davinci/js/js.plugin":function(){define(["require"],function(n){return{id:"davinci.js","davinci.editor":[{id:"JSEditor",name:"JavaScript Editor",extensions:"js,json",isDefault:!1,editorClass:"davinci/js/ui/JavaScriptEditor",palettePerspective:"davinci.html.htmlEditor",
expandPalettes:["left"]},{id:"XIDEEditor",name:"Editor",extensions:"js,json",isDefault:!0,editorClass:"davinci/xide/Editor",palettePerspective:"davinci.html.htmlEditor",expandPalettes:["left"]}],"davinci.actionSets":[{id:"jsSource",visible:!0,menu:[{label:"Source",path:"edit",id:"davinci.js.source",separator:["commentGroup",!0,"editGroup",!0,"codeGroup",!0,"additions",!1]}],actions:[{id:"davinci.js.comment",icon:null,run:function(){alert("toggle comment")},label:"Toggle Comment",menubarPath:"davinci.js.source/commentGroup"}]},
{id:"jsEdit",visible:!0,actions:[{id:"davinci.js.cut",icon:null,label:"cut",commandID:"davinci.js.cut",menubarPath:"davinci.edit/cut"},{id:"davinci.js.add",icon:null,label:"add",commandID:"davinci.js.add",menubarPath:"davinci.edit/add"},{id:"davinci.js.delete",icon:null,label:"delete",commandID:"davinci.js.delete",menubarPath:"davinci.edit/delete"}]}],"davinci.actionSetPartAssociations":[{targetID:"davinci.js.jsEdit",parts:["davinci.ui.outline","davinci.js.JSEditor"]}],"davinci.editorActions":{editorContribution:{targetID:"davinci.js.JSEditor",
actions:[{id:"savecombo",className:"maqLabelButton",showLabel:!0,label:"Save",toolbarPath:"save",type:"ComboButton",run:function(){n(["../Workbench"],function(k){n("../ui/Resource").save()})},isEnabled:function(k){return n("../Workbench").getOpenEditor()},menu:[{iconClass:"saveIcon",run:function(){n("../ui/Resource").save()},isEnabled:function(k){return n("../Workbench").getOpenEditor()},label:"Save",keyBinding:{accel:!0,charOrCode:"s",allowGlobal:!0}},{iconClass:"saveAsIcon",run:function(){n("../ui/Resource").saveAs("html")},
isEnabled:function(k){return n("../Workbench").getOpenEditor()},label:"Save As",keyBinding:{accel:!0,shift:!0,charOrCode:"s",allowGlobal:!0}}]}]}},"davinci.commands":[{id:"cut",run:function(){}},{id:"add",run:function(){}},{id:"delete",run:function(){}}],"davinci.keyBindings":[{platform:"win",sequence:"M1+C",commandID:"davinci.js.copy",contextID:"davinci.js.JSEditor"}],"davinci.preferences":[{name:"JavaScript",id:"general",category:""},{name:"Formatting",id:"format",category:"davinci.js.general",
pane:"davinci/js/ui/FormatOptions",defaultValues:{blockNewLine:!1,blockIndent:3,functionNewLine:!1,functionIndent:5,functionParamSpaceing:1,labelSpace:1,forParamSpacing:0,breakOnLabel:!0,ifStmtSpacing:0,varAssignmentSpaceing:0,switchSpacing:3,objectLitFieldSpace:1}}],"davinci.fileType":[{extension:"js",iconClass:"jsFileIcon",type:"text"},{extension:"json",iconClass:"jsFileIcon",type:"text"}]}})},"davinci/ve/ve.plugin":function(){define(["require"],function(n){return{id:"davinci.ve","davinci.view":[{id:"states",
title:"Scenes",viewClass:"davinci/ve/views/StatesView",iconClass:"paletteIcon paletteIconStates"},{id:"datastores",title:"DataStores",viewClass:"davinci/ve/views/DataStoresView"},{id:"object",title:"Object",viewClass:"davinci/ve/views/ObjectView"},{id:"style",title:"",viewClass:"davinci/ve/views/SwitchingStyleView"}],"davinci.perspective":[{id:"pageDesign",title:"Page Design",views:[{viewID:"davinci.ui.outline",position:"left"},{viewID:"davinci.ui.devices",position:"left"},{viewID:"davinci.ui.files",
position:"left"},{viewID:"davinci.ve.style",position:"right"},{viewID:"davinci.ui.comment",position:"right",hidden:!0},{viewID:"davinci.ve.states",position:"right-bottom",selected:!0},{viewID:"davinci.ui.navigator",position:"left-bottom",selected:!0},{viewID:"davinci.review.reviewNavigator",position:"left-bottom"}]}],"davinci.editor":[{id:"HTMLPageEditor",name:"HTML Visual Editor",extensions:["html","htm","php"],isDefault:!0,editorClass:"davinci/ve/PageEditor",palettePerspective:"davinci.ve.pageDesign",
expandPalettes:["left"]}],"davinci.actionSets":[{id:"cutCopyPaste",visible:!0,actions:[{label:"Cut",keySequence:"M1+X",iconClass:"editActionIcon editCutIconSmall",action:"davinci/ve/actions/CutAction",menubarPath:"davinci.edit/cut"},{label:"Copy",keySequence:"M1+C",iconClass:"editActionIcon editCopyIconSmall",action:"davinci/ve/actions/CopyAction",menubarPath:"davinci.edit/cut"},{keySequence:"M1+V",iconClass:"editActionIcon editPasteIconSmall",label:"Paste",action:"davinci/ve/actions/PasteAction",
menubarPath:"davinci.edit/cut"},{keySequence:"DEL",iconClass:"editActionIcon editDeleteIconSmall",label:"Delete",action:"davinci/ve/actions/DeleteAction",menubarPath:"davinci.edit/cut"},{iconClass:"fa-crosshairs",label:"Show in Outline",action:"davinci/ve/actions/ShowInOutline",menubarPath:"davinci.edit/cut"},{iconClass:"editActionIcon selectParentIconSmall",label:"Select parent",action:"davinci/ve/actions/SelectParentAction",menubarPath:"davinci.edit/cut"},{iconClass:"editActionIcon selectAncestorIconSmall",
label:"Select ancestor...",action:"davinci/ve/actions/SelectAncestorAction",menubarPath:"davinci.edit/cut"},{iconClass:"editActionIcon unselectAllIconSmall",label:"Unselect all",action:"davinci/ve/actions/UnselectAllAction",menubarPath:"davinci.edit/cut"},{iconClass:"editActionIcon",label:"Surround with \x26lt;A\x26gt;",action:"davinci/ve/actions/SurroundAction",surroundWithTagName:"a",menubarPath:"davinci.edit/cut"},{iconClass:"editActionIcon",label:"Surround with \x26lt;DIV\x26gt;",action:"davinci/ve/actions/SurroundAction",
surroundWithTagName:"div",menubarPath:"davinci.edit/cut"},{iconClass:"editActionIcon",label:"Surround with \x26lt;SPAN\x26gt;",action:"davinci/ve/actions/SurroundAction",surroundWithTagName:"span",menubarPath:"davinci.edit/cut"},{iconClass:"editActionIcon moveToFrontIconSmall",label:"Move to front",action:"davinci/ve/actions/MoveToFrontAction",menubarPath:"davinci.edit/cut"},{iconClass:"editActionIcon moveForwardIconSmall",label:"Move forward",action:"davinci/ve/actions/MoveForwardAction",menubarPath:"davinci.edit/cut"},
{iconClass:"editActionIcon moveBackwardIconSmall",label:"Move backward",action:"davinci/ve/actions/MoveBackwardAction",menubarPath:"davinci.edit/cut"},{iconClass:"editActionIcon moveToBackIconSmall",label:"Move to back",action:"davinci/ve/actions/MoveToBackAction",menubarPath:"davinci.edit/cut"}]}],"davinci.viewActions":[{viewContribution:{targetID:"davinci.ve.outline",actions:[{id:"design",iconClass:"designModeIcon editActionIcon",radioGroup:"displayMode",method:"switchDisplayMode",label:"Widgets",
toolbarPath:"displayMode"},{id:"source",iconClass:"sourceModeIcon editActionIcon",method:"switchDisplayMode",radioGroup:"displayMode",label:"Source",toolbarPath:"displayMode"}]}},{viewContribution:{targetID:"davinci.ve.states",actions:[{id:"addState",iconClass:"viewActionIcon addStateIcon",action:"davinci/ve/actions/AddState",label:"Add state",toolbarPath:"states1"},{id:"removeState",iconClass:"viewActionIcon removeStateIcon",action:"davinci/ve/actions/RemoveState",label:"Remove state",toolbarPath:"states1"},
{id:"modifyState",iconClass:"viewActionIcon modifyStateIcon",action:"davinci/ve/actions/ModifyState",label:"Modify state",toolbarPath:"states1"},{id:"NewWidgetsCurrentState",className:"newWidgetsCurrentStateButton",iconClass:"viewActionIcon newWidgetsCurrentStateIcon",action:"davinci/ve/actions/NewWidgetsCurrentState",label:"Toggle whether new widgets go to Background or current state",toolbarPath:"states2"},{id:"highlightBaseWidgets",className:"highlightBaseWidgetsButton",iconClass:"viewActionIcon highlightBaseWidgetsIcon",
action:"davinci/ve/actions/HighlightBaseWidgets",label:"When in custom state, highlight widgets from Background state",toolbarPath:"states2"}]}}],"davinci.actionSetPartAssociations":[{targetID:"davinci.ve.cutCopyPaste",parts:["davinci.ve.visualEditor","davinci.ve.VisualEditorOutline"]}],"davinci.editorActions":{editorContribution:{targetID:"davinci.ve.HTMLPageEditor",actions:[{id:"savecombo",className:"maqLabelButton",showLabel:!0,label:"Save",toolbarPath:"save",type:"ComboButton",run:function(){n(["../Workbench"],
function(k){n("../ui/Resource").save()})},isEnabled:function(k){return n("../Workbench").getOpenEditor()},menu:[{iconClass:"saveIcon",run:function(){n("../ui/Resource").save()},isEnabled:function(k){return n("../Workbench").getOpenEditor()},label:"Save",keyBinding:{accel:!0,charOrCode:"s",allowGlobal:!0}},{iconClass:"saveAsIcon",run:function(){n("../ui/Resource").saveAs("html")},isEnabled:function(k){return n("../Workbench").getOpenEditor()},label:"Save As",keyBinding:{accel:!0,shift:!0,charOrCode:"s",
allowGlobal:!0}},{id:"saveasdijit",iconClass:"fa-save",run:function(){return n(["davinci/de/resource"],function(k){k.createDijiFromNewDialog()})},isEnabled:function(k){return!0},label:"Save As Widget",command:"File/Save As Widget",group:"File",tab:"Home"}]},{id:"undo",iconClass:"editActionIcon undoIcon",action:"davinci/actions/UndoAction",label:"Undo",toolbarPath:"undoredo",keyBinding:{accel:!0,charOrCode:"z"},command:"Edit/Undo"},{id:"redo",iconClass:"editActionIcon redoIcon",action:"davinci/actions/RedoAction",
label:"Redo",toolbarPath:"undoredo",keyBinding:{accel:!0,shift:!0,charOrCode:"z"},command:"Edit/Redo"},{id:"cut",label:"Cut",iconClass:"editActionIcon editCutIcon",action:"davinci/ve/actions/CutAction",toolbarPath:"cutcopypaste",keyBinding:{accel:!0,charOrCode:"x"}},{id:"copy",label:"Copy",iconClass:"editActionIcon editCopyIcon",action:"davinci/ve/actions/CopyAction",toolbarPath:"cutcopypaste",keyBinding:{accel:!0,charOrCode:"c"}},{id:"paste",label:"Paste",iconClass:"editActionIcon editPasteIcon",
action:"davinci/ve/actions/PasteAction",toolbarPath:"cutcopypaste",keyBinding:{accel:!0,charOrCode:"v"}},{id:"delete",iconClass:"editActionIcon editDeleteIcon",label:"Delete",action:"davinci/ve/actions/DeleteAction",toolbarPath:"delete",keyBinding:{charOrCode:[dojo.keys.DELETE,dojo.keys.BACKSPACE]}},{id:"outline",iconClass:"fa-crosshairs",label:"Show in Outline",action:"davinci/ve/actions/ShowInOutline",toolbarPath:"outline"},{id:"openBrowser",iconClass:"text-success fa-play",className:"davinciFloatRight openBrowser",
run:function(){n(["../Workbench"],function(k){(k=k.getOpenEditor())&&k.resourceFile?k.previewInBrowser():console.error("ERROR. Cannot launch browser window. No editor info.")})},label:"Preview in Browser",toolbarPath:"undoredo",iconClass:"text-success fa-play",keyBinding:{accel:!0,charOrCode:"0",allowGlobal:!0},command:"File/Open In Browser",group:"File",tab:"Home"},{id:"documentSettings",iconClass:"documentSettingsIcon",className:"documentSettings davinciFloatRight",label:"Document settings",toolbarPath:"undoredo",
type:"DropDownButton",menu:[{iconClass:"editActionIcon",label:"Select parent",action:"davinci/ve/actions/SelectParentAction",command:"Widget/Select/SelectParent",group:"Widget"},{iconClass:"editActionIcon",label:"Select ancestor",action:"davinci/ve/actions/SelectAncestorAction",command:"Widget/Select/SelectAnchestor",group:"Widget"},{iconClass:"editActionIcon",label:"Unselect all",action:"davinci/ve/actions/UnselectAllAction"},{iconClass:"editActionIcon moveToFrontIconSmall",label:"Move to front",
action:"davinci/ve/actions/MoveToFrontAction",command:"Widget/Move/MoveToFront",group:"Widget"},{iconClass:"editActionIcon moveForwardIconSmall",label:"Move forward",action:"davinci/ve/actions/MoveForwardAction",command:"Widget/Move/MoveToForward",group:"Widget"},{iconClass:"editActionIcon moveBackwardIconSmall",label:"Move backward",action:"davinci/ve/actions/MoveBackwardAction",command:"Widget/Move/MoveToBackward",group:"Widget"},{iconClass:"editActionIcon moveToBackIconSmall",label:"Move to back",
action:"davinci/ve/actions/MoveToBackAction",command:"Widget/Move/MoveToBack",group:"Widget"},{iconClass:"editActionIcon",label:"Surround with \x26lt;A\x26gt;",action:"davinci/ve/actions/SurroundAction",surroundWithTagName:"a",command:"Widget/SourroundWithA",group:"Widget",tab:"Tools"},{iconClass:"editActionIcon",label:"Surround with \x26lt;DIV\x26gt;",action:"davinci/ve/actions/SurroundAction",surroundWithTagName:"div",command:"Widget/SourroundWithDIV",group:"Widget",tab:"Tools"},{iconClass:"editActionIcon",
label:"Surround with \x26lt;SPAN\x26gt;",action:"davinci/ve/actions/SurroundAction",surroundWithTagName:"span",command:"Widget/SourroundWithSPAN",group:"Widget",tab:"Tools"}]},{id:"layout",className:"maqLabelButton davinciFloatRight maqLayoutDropDownButton",showLabel:!0,label:"Flow",toolbarPath:"undoredo",type:"DropDownButton",menu:[{label:"Flow",iconClass:"flowLayoutIcon",method:"selectLayoutFlow"},{label:"Absolute",iconClass:"absoluteLayoutIcon",method:"selectLayoutAbsolute"}]},{id:"closeactiveeditor",
run:function(){n(["../Workbench"],function(k){k.closeActiveEditor()})},keyBinding:{accel:!0,shift:!0,charOrCode:"w",allowGlobal:!0}},{id:"showWidgetsPalette",run:function(){var k=dijit.byId("davinci.ve.Palette");if(k){var g=k.getParent();g&&g.selectChild(k)}},keyBinding:{meta:!0,charOrCode:"p",allowGlobal:!0}}]}},"davinci.preferences":[{name:"Visual Editor",id:"editorPrefs",category:"davinci.html.general",pane:"davinci/ve/prefs/HTMLEditPreferences",defaultValues:{flowLayout:!1,snap:!0,showPossibleParents:!0,
cssOverrideWarn:!0,absoluteWidgetsZindex:900,widgetPaletteLayout:"icons"}}],"davinci.dnd":[{parts:["davinci.ui.navigator"],dragSource:function(k){if("File"==k.elementType)return/gif|jpeg|jpg|png|svg|json/i.test(k.getExtension())},dragHandler:"davinci/ve/palette/ImageDragSource"}],"davinci.fileType":[{extension:"theme",iconClass:"themeFileIcon",type:"text"}],"davinci.defaultEditorActions":{editorContribution:{actions:[{id:"save",run:function(){n("../Workbench").getOpenEditor().save()},isEnabled:function(k){return!0},
className:"maqLabelButton",showLabel:!0,label:"Save",toolbarPath:"save",keyBinding:{accel:!0,charOrCode:"s"}},{id:"undo",iconClass:"editActionIcon undoIcon",action:"davinci/actions/UndoAction",label:"Undo",toolbarPath:"undoredo",keyBinding:{accel:!0,charOrCode:"z"}},{id:"redo",iconClass:"editActionIcon redoIcon",action:"davinci/actions/RedoAction",label:"Redo",toolbarPath:"undoredo",keyBinding:{accel:!0,shift:!0,charOrCode:"z"}}]}}}})},"davinci/model/Path":function(){define(["dojo/_base/declare"],
function(n){"undefined"===typeof davinci.model&&(davinci.model={});"undefined"===typeof davinci.model.Path&&(davinci.model.Path={});var k=n("davinci.model.Path",null,{constructor:function(g,e,b){g=g||".";"string"==typeof g?(this.path=g,this.getSegments()):(this.segments=g,this.hasLeading=e,this.hasTrailing=b)},endsWith:function(g){var e=dojo.clone(this.segments);for(g=(new k(g)).getSegments();0<g.length&&0<e.length;)if(g.pop()!=e.pop())return!1;return!0},getExtension:function(){this.extension||(this.extension=
this.path.substr(this.path.lastIndexOf(".")+1));return this.extension},segment:function(g){var e=this.getSegments();return e.length<g?null:e[g]},getSegments:function(){if(!this.segments){var g=this.path;this.segments=g.split("/");"/"==g.charAt(0)&&(this.hasLeading=!0);"/"==g.charAt(g.length-1)&&(this.hasTrailing=!0,this.segments.pop());this._canonicalize()}return this.segments},isAbsolute:function(){return this.hasLeading},getParentPath:function(){if(!this._parentPath){var g=dojo.clone(this.segments);
g.pop();this._parentPath=new k(g,this.hasLeading)}return dojo.clone(this._parentPath)},_clone:function(){return new k(dojo.clone(this.segments),this.hasLeading,this.hasTrailing)},append:function(g){g=g||"";"string"==typeof g&&(g=new k(g));if(g.isAbsolute())return g;var e=this.segments,b=g.getSegments(),e=e.concat(b);g=new k(e,this.hasLeading,g.hasTrailing);".."!=b[0]&&"."!=b[0]||g._canonicalize();return g},toString:function(){var g=[];this.hasLeading&&g.push("/");for(var e=0;e<this.segments.length;e++)0<
e&&g.push("/"),g.push(this.segments[e]);this.hasTrailing&&g.push("/");return g.join("")},removeRelative:function(){var g=this.getSegments();return 0<g.length&&"."==g[1]?this.removeFirstSegments(1):this},relativeTo:function(g,e){"string"==typeof g&&(g=new k(g));var b=this.segments;if(this.isAbsolute())return this;var d=g.getSegments();g=this.matchingFirstSegments(g);d=d.length;e&&--d;e=d-g;if(0==e+b.length-g)return davinci.model.Path.EMPTY;for(var d=[],h=0;h<e;h++)d.push("..");for(h=g;h<b.length;h++)d.push(b[h]);
return new k(d,!1,this.hasTrailing)},startsWith:function(g){var e=this.matchingFirstSegments(g);return g._length()==e},_length:function(g){return this.segments.length},matchingFirstSegments:function(g){var e=this.segments;g=g.getSegments();for(var b=Math.min(e.length,g.length),d=0,h=0;h<b&&e[h]==g[h];h++)d++;return d},removeFirstSegments:function(g){return new k(this.segments.slice(g,this.segments.length),this.hasLeading,this.hasTrailing)},removeMatchingLastSegments:function(g){g=this.matchingFirstSegments(g);
return this.removeLastSegments(g)},removeMatchingFirstSegments:function(g){g=this.matchingFirstSegments(g);return this._clone().removeFirstSegments(g)},removeLastSegments:function(g){g||(g=1);return new k(this.segments.slice(0,this.segments.length-g),this.hasLeading,this.hasTrailing)},lastSegment:function(){return this.segments[this.segments.length-1]},firstSegment:function(g){return this.segments[g||0]},equals:function(g){if(this.segments.length!=g.segments.length)return!1;for(var e=0;e<this.segments.length;e++)if(g.segments[e]!=
this.segments[e])return!1;return!0},_canonicalize:function(){for(var g,e=this.segments,b=0;b<e.length;b++)if("."==e[b]||".."==e[b]){g=!0;break}if(g){g=[];for(b=0;b<e.length;b++)".."==e[b]?0==g.length?this.hasLeading||g.push(e[b]):".."==g[g.length-1]?g.push(".."):g.pop():"."==e[b]&&1!=this.segments.length||g.push(e[b]);g.length!=e.length&&(this.segments=g)}}});davinci.model.Path.EMPTY=new k("");return k})},"davinci/workbench/Preferences":function(){define("dojo/_base/declare dojo/_base/xhr dojo/_base/lang dojo/topic dojo/dom ../Runtime dijit/_WidgetBase dijit/_TemplatedMixin dijit/_WidgetsInTemplateMixin dijit/registry davinci/ui/Dialog dijit/Tree dijit/tree/ForestStoreModel dojo/data/ItemFileReadStore davinci/lang/workbench dijit/lang/_common dojo/text!davinci/workbench/templates/Preferences.html dijit/form/Button".split(" "),
function(n,k,g,e,b,d,h,a,m,f,q,c,p,y,u,z,A){var x=n([h,a,m],{templateString:A,commonStrings:z,resize:function(){this.borderContainer.resize()}}),w={_allPrefs:{},savePreferences:function(c,f,a){},_loadExtensions:function(){w._extensions||(w._extensions=d.getExtensions("davinci.preferences"))},showPreferencePage:function(){w._loadExtensions();var a=w.getPrefJson();if(a.items)for(var d=a.items.length-1;0<=d;d--){var h=a.items[d];h.hide&&a.items.splice(d,1)}if(!a||1>a.length)alert(u.noUserPref);else{this.dialog=
q.showModal(new x({}),u.preferences,{width:650,height:350});var h=new y({data:a,jsId:"prefTreeDataStore"}),d=new p({jsId:"fileModel",labelAttr:"name",store:h,rootId:"root"}),m=["root"];if(a=a.items){do h=a[0],m.push(h.id),a=h.children;while(a)}var e=f.byId("prefTree");e||(e=new c({model:d,id:"prefTree",persist:!1,query:"{type:'directory'}",label:"Preferences",labelAttr:"name",showRoot:!1,childrenAttrs:"children",openOnClick:!0,autoExpand:!0}));e.onClick=function(c){w.setPaneContent(c)};b.byId("pref.TreePane").appendChild(e.domNode);
e.startup();e.onLoadDeferred.then(function(){e.set("paths",[m]).then(function(){e.focusNode(e.selectedNode);w.setPaneContent(e.selectedItem)})})}},getPrefJson:function(){var c=w._extensions;if(!c)return[];for(var f=[],a=0;a<c.length;a++)c[a]._index=a,c[a].category?(f[c[a].category]||(f[c[a].category]=[]),f[c[a].category].push(c[a])):(f.root||(f.root=[]),f.root.push(c[a]));return{identifier:"id",items:f.root.map(function(c){return{id:c.id,name:c.name,hide:c.hide,index:c._index,children:w._getPrefJsonChildren(c.id,
f)}})}},_getPrefJsonChildren:function(c,f){c=f[c];if(!c)return[];for(var a=[],b=0;b<c.length;b++)a[b]={id:c[b].id,name:c[b].name,index:c[b]._index},f[c[b].id]&&(a[b].children=w._getPrefJsonChildren(c[b].id,f));return a},setPaneContent:function(c){var a;delete w._currentPane;var b=w._extensions[c.index[0]],p=w.getPreferences(b.id,davinci.Workbench.getProject());b.pane?require([b.pane],function(c){c=new c;w._currentPane=c;w._currentPane._extension=b;w._currentPane.setPreferences(p);f.byId("pref.RightPane").setContent(c.domNode)}):
a=b.pageContent?document.createTextNode(b.pageContent):document.createTextNode("");a&&f.byId("pref.RightPane").setContent(a)},_save:function(c){if(w._currentPane){var f=w._currentPane.getPreferences(),a=w._currentPane._extension.id,b=davinci.Workbench.getProject();w.savePreferences(a,b,f);w._currentPane.save&&w._currentPane.save(f)}for(f=0;f<c.length;f++){try{c[f].save&&c[f].save()}catch(F){}c[f].children&&0<c[f].children.length&&w._save(c[f].children)}},save:function(){w._save(w._extensions);w.finish()},
finish:function(){w._extensions=null;w._currentPane=null;this.dialog.destroyRecursive(!1);this.dialog=null},getPreferences:function(c,f){w._allPrefs[f]||(w._allPrefs[f]={});return{version:"1.7",specVersion:"0.8",snap:!0,helper:"maq-metadata-dojo/dojox/mobile/ThemeHelper",themeSets:[{_COMMENT_:"Defines site-specific default theme sets",desktopTheme:"claro",mobileTheme:[{device:"Android",theme:"android"},{device:"BlackBerry",theme:"blackberry"},{device:"iPad",theme:"ipad"},{device:"iPhone",theme:"iphone"},
{device:"other",theme:"iphone"}],name:"site_dojo_default"}]}},getDefaultPreferences:function(c){w._loadExtensions();for(var f=0;f<w._extensions.length;f++)if(w._extensions[f].id==c)return"string"===typeof w._extensions[f].defaultValues?d.serverJSONRequest({url:w._extensions[f].defaultValues,handleAs:"json",sync:!0}).defaultValues:w._extensions[f].defaultValues}};return g.setObject("davinci.workbench.Preferences",w)})},"davinci/ui/Dialog":function(){define("dojo/_base/declare dijit/form/Button dijit/Dialog dojo/dom-geometry dojo/dom-style dojo/_base/connect dojo/window dojo/parser davinci/_common".split(" "),
function(n,k,g,e,b,d,h,a,m){var f=n(g,{contentStyle:null,buildRendering:function(){this.inherited(arguments);dojo.addClass(this.domNode,"resizableDialog");dojo.addClass(this.domNode,"ui-widget-content");this.submitOnEnter&&dojo.addClass(this.domNode,"submitOnEnter")},_setContent:function(f,c){this.inherited(arguments);var a=dojo.doc.createElement("div");this.containerNode.appendChild(a);(a=dojo.query(".dijitDialogPaneContentArea",this.containerNode)[0])?dojo.connect(a,"onkeydown",this,"_onKeyDown"):
dojo.connect(this.domNode,"onkeydown",this,"_onKeyDown")},resize:function(f){if(f){var c=b.getComputedStyle(this.containerNode),c=e.getPadExtents(this.containerNode,c),a=f.w-c.w,q=f.h-c.h,q=q-e.getMarginBox(this.titleBar).h;f=dojo.query(".dijitDialogPaneContentArea",this.containerNode)[0];c=dojo.query(".dijitDialogPaneActionBar",this.containerNode)[0];q-=e.getMarginBox(c).h;a&&dojo.style(f,"width",a+"px");q&&dojo.style(f,"height",q+"px");dojo.forEach(this.getChildren(),dojo.hitch(this,function(c){c.resize&&
c.resize({w:a,h:q})}))}},show:function(){var f=this.inherited(arguments);if(this.contentStyle){if("object"==typeof this.contentStyle){var c={};this.contentStyle.width&&(c.w=parseInt(this.contentStyle.width));this.contentStyle.height&&(c.h=parseInt(this.contentStyle.height));var a=h.getBox(this.ownerDocument);a.w*=this.maxRatio;a.h*=this.maxRatio;c.h>a.h&&(e.position(this.containerNode),c.h=a.h);this.resize(c)}this._size();this._position();dojo.style(this.containerNode,"width","auto");dojo.style(this.containerNode,
"height","auto")}return f},_onKeyDown:function(f){var c=f.ctrlKey&&!dojo.isMac||dojo.isMac&&f.metaKey;f.which==dojo.keys.ENTER&&(c||this.submitOnEnter)&&(f=dojo.query("input[type\x3dsubmit]",this.containerNode),0<f.length&&(f=dijit.getEnclosingWidget(f[0]),c=document.createEvent("MouseEvents"),c.initMouseEvent("click",!0,!0,window,0,0,0,0,0,!1,!1,!1,!1,0,null),f._onClick(c)))}});f._timedDestroy=function(f,c){c&&c.forEach(d.disconnect);var a=d.connect(f,"onHide",function(){d.disconnect(a);f.destroyRecursive()});
f.hide()};f.showModal=function(a,c,b,h,m,e){var p=[];c={title:c,content:a,contentStyle:b,submitOnEnter:m};e&&(c.onShow=e);var q=new f(c);e=dojo.hitch(this,function(){var c=!1;h&&(c=h());c||this._timedDestroy(q,p)});p.push(d.connect(q,"onExecute",a,e));a.onExecute&&p.push(d.connect(a,"onExecute",a,e));p.push(d.connect(a,"onClose",dojo.hitch(this,function(){this._timedDestroy(q,p)})));p.push(d.connect(q,"onCancel",dojo.hitch(this,function(){this._timedDestroy(q,p)})));q.show();return q};f.showMessage=
function(f,c,a,b,d){return this.showDialog({title:f,content:c,style:a,okCallback:b,okLabel:null,hideCancel:!0})};f.showDialog=function(b){var c=b.title,p=b.content,q=b.style,h=b.okCallback,e=b.okLabel,g=b.hideCancel,x=b.submitOnEnter,w=b.extendLabels,r=b.extendCallbacks,v,B=[];b=document.createElement("div");var C=document.createElement("div");dojo.addClass(C,"dijitDialogPaneContentArea");b.appendChild(C);var n=document.createElement("div");dojo.addClass(n,"dijitDialogPaneActionBar");e=new k({label:e?
e:m.ok,type:"submit","class":"maqPrimaryButton"});n.appendChild(e.domNode);var E=dojo.hitch(this,function(){this._timedDestroy(v,B)});if(w&&r&&0<w.length&&w.length===r.length)for(e=0;e<w.length;e++){var D=function(c){if(r[c])r[c]();v.onCancel()}.bind(this,e);n.appendChild((new k({label:w[e],onClick:D,"class":"maqSecondaryButton"})).domNode)}g||n.appendChild((new k({label:m.cancel,onClick:function(){v.onCancel()},"class":"maqSecondaryButton"})).domNode);b.appendChild(n);v=new f({title:c,content:b,
contentStyle:q,submitOnEnter:x});dojo.isString(p)?(C.innerHTML=p,a.parse(C)):p.domNode?C.appendChild(p.domNode):C.appendChild(p);B.push(d.connect(v,"onExecute",dojo.hitch(this,function(){h&&h();E()})));B.push(d.connect(v,"onCancel",dojo.hitch(this,function(){E()})));v.show();return v};return f})},"dojo/window":function(){define("./_base/lang ./sniff ./_base/window ./dom ./dom-geometry ./dom-style ./dom-construct".split(" "),function(n,k,g,e,b,d,h){k.add("rtl-adjust-position-for-verticalScrollBar",
function(a,f){a=g.body(f);f=h.create("div",{style:{overflow:"scroll",overflowX:"visible",direction:"rtl",visibility:"hidden",position:"absolute",left:"0",top:"0",width:"64px",height:"64px"}},a,"last");var q=h.create("div",{style:{overflow:"hidden",direction:"ltr"}},f,"last"),c=0!=b.position(q).x;f.removeChild(q);a.removeChild(f);return c});k.add("position-fixed-support",function(a,f){a=g.body(f);f=h.create("span",{style:{visibility:"hidden",position:"fixed",left:"1px",top:"1px"}},a,"last");var q=
h.create("span",{style:{position:"fixed",left:"0",top:"0"}},f,"last"),c=b.position(q).x!=b.position(f).x;f.removeChild(q);a.removeChild(f);return c});var a={getBox:function(d){d=d||g.doc;var f="BackCompat"==d.compatMode?g.body(d):d.documentElement,q=b.docScroll(d);if(k("touch")){var c=a.get(d);d=c.innerWidth||f.clientWidth;f=c.innerHeight||f.clientHeight}else d=f.clientWidth,f=f.clientHeight;return{l:q.x,t:q.y,w:d,h:f}},get:function(b){if(9>k("ie")&&a!==document.parentWindow){b.parentWindow.execScript("document._parentWindow \x3d window;",
"Javascript");var f=b._parentWindow;b._parentWindow=null;return f}return b.parentWindow||b.defaultView},scrollIntoView:function(a,f){try{a=e.byId(a);var q=a.ownerDocument||g.doc,c=g.body(q),p=q.documentElement||c.parentNode,h=k("ie"),u=k("webkit");if(a!=c&&a!=p)if(!(k("mozilla")||h||u||k("opera"))&&"scrollIntoView"in a)a.scrollIntoView(!1);else{var m="BackCompat"==q.compatMode,A=Math.min(c.clientWidth||p.clientWidth,p.clientWidth||c.clientWidth),x=Math.min(c.clientHeight||p.clientHeight,p.clientHeight||
c.clientHeight),q=u||m?c:p,w=f||b.position(a),r=a.parentNode;f=function(c){return 6>=h||7==h&&m?!1:k("position-fixed-support")&&"fixed"==d.get(c,"position").toLowerCase()};if(!f(a))for(;r;){r==c&&(r=q);var v=b.position(r),B=f(r),C="rtl"==d.getComputedStyle(r).direction.toLowerCase();if(r==q){v.w=A;v.h=x;q==p&&h&&C&&(v.x+=q.offsetWidth-v.w);if(0>v.x||!h||9<=h)v.x=0;if(0>v.y||!h||9<=h)v.y=0}else{var n=b.getPadBorderExtents(r);v.w-=n.w;v.h-=n.h;v.x+=n.l;v.y+=n.t;var E=r.clientWidth,D=v.w-E;0<E&&0<D&&
(C&&k("rtl-adjust-position-for-verticalScrollBar")&&(v.x+=D),v.w=E);E=r.clientHeight;D=v.h-E;0<E&&0<D&&(v.h=E)}B&&(0>v.y&&(v.h+=v.y,v.y=0),0>v.x&&(v.w+=v.x,v.x=0),v.y+v.h>x&&(v.h=x-v.y),v.x+v.w>A&&(v.w=A-v.x));var G=w.x-v.x,M=w.y-v.y,J=G+w.w-v.w,K=M+w.h-v.h,I,H;0<J*G&&(r.scrollLeft||r==q||r.scrollWidth>r.offsetHeight)&&(I=Math[0>G?"max":"min"](G,J),C&&(8==h&&!m||9<=h)&&(I=-I),H=r.scrollLeft,r.scrollLeft+=I,I=r.scrollLeft-H,w.x-=I);0<K*M&&(r.scrollTop||r==q||r.scrollHeight>r.offsetHeight)&&(I=Math.ceil(Math[0>
M?"max":"min"](M,K)),H=r.scrollTop,r.scrollTop+=I,I=r.scrollTop-H,w.y-=I);r=r!=q&&!B&&r.parentNode}}}catch(L){console.error("scrollIntoView: "+L),a.scrollIntoView(!1)}}};n.setObject("dojo.window",a);return a})},"davinci/_common":function(){define([],function(){return{search:"Search",filter:"Filter","new":"New",errorSavingFile:"Error saving file: ${0} details: ${1}",palette:"palette",closeAllEditors:"Close all tabs",undo:"Undo",redo:"Redo",copy:"Copy",paste:"Paste",cut:"Cut","delete":"Delete",surround:"Surround",
properties:"Properties",styles:"Styles",events:"Events",preferences:"Preferences",addPane:"Add Pane",addColumn:"Add Column",addRow:"Add Row",removeColumn:"Remove Column",removeRow:"Remove Row",joinColumn:"Join Column",joinRow:"Join Row",splitColumn:"Split Column",splitRow:"Split Row",alignLeft:"Align Left",alignRight:"Align Right",alignTop:"Align Top",alignBottom:"Align Bottom",show:"Show",hide:"Hide",addMenuItem:"Add Menu Item",addSubMenu:"Add Sub Menu",addMenuBarItem:"Add MenuBar Item",addPopupMenuBar:"Add Popup MenuBarItem",
ok:"OK",cancel:"Cancel",page:"Page",title:"Title",metaInfo:"Meta Info",httpEquiv:"HTTP Equiv",style:"Style",theme:"Theme",styleSheets:"Style Sheets",rules:"Rules",url:"URL",externalScripts:"External Scripts",modules:"Modules",name:"Name",value:"Value",add:"Add",remove:"Remove",staticOptions:"Static Options",axisOptions:"Axis Options",series:"Series",axis:"Axis",option:"Option",selected:"Selected",staticItems:"Static Items",dataStore:"Data Store",query:"Query",fields:"Fields",field:"Field",label:"Label",
width:"Width",edit:"Edit",key:"Key",rootId:"Root ID",rootLabel:"Root Label",childrenAttrs:"Children Attributes",items:"Items",type:"Type",widget:"Widget",position:"Position",size:"Size",layout:"Layout",visual:"Visual",text:"Text",border:"Border",table:"Table",list:"List",aural:"Aural",others:"Others",onLoad:"Load",onUnload:"Unload",script:"Script",methodCall:"Method Call",serviceCall:"Service Call",object:"Object",method:"Method",parameters:"Parameters",result:"Result",service:"Service",content:"Content",
source:"Source",target:"Target",property:"Property",flowLayout:"Flow Layout",snapToNearestWidget:"Snap to nearest widget",showPossibleParents:"When dragging, show possible parents",warnOnCSSOverride:"Warn on CSS Override",absoluteWidgetsZindex:"z-index for sketch mode",widgetPaletteLayout:"In Palette, display widgets as",widgetPaletteShow_Icons:"icons",widgetPaletteShow_List:"list",liveEdit:"Live Edit",zazl:"Enable \x3ca href\x3d'http://zazl.org' target\x3d'_blank'\x3eZazl Optimizer\x3c/a\x3e",selectorPrefix:"Selector Prefix",
component:"Component",alternates:"Alternates",alternateWidgets:"Alternate widgets:",howToChooseAlternate:"To choose alternate widget, click-select current widget, then click on up arrow icon.",summary:"Summary:",description:"Description:",showSuggestedWidgets:"Suggested Widgets",showAllWidgets:"All Widgets",MoreIconTitleString:"Click here to see alternative similar widgets",HelpIconTitleString:"Click here to see descriptive info about this widget",__dummy__:""}})},"dojo/data/ItemFileReadStore":function(){define("../_base/kernel ../_base/lang ../_base/declare ../_base/array ../_base/xhr ../Evented ./util/filter ./util/simpleFetch ../date/stamp".split(" "),
function(n,k,g,e,b,d,h,a,m){g=g("dojo.data.ItemFileReadStore",[d],{constructor:function(f){this._arrayOfAllItems=[];this._arrayOfTopLevelItems=[];this._loadFinished=!1;this.url=this._ccUrl=this._jsonFileUrl=f.url;this._jsonData=f.data;this.data=null;this._datatypeMap=f.typeMap||{};this._datatypeMap.Date||(this._datatypeMap.Date={type:Date,deserialize:function(f){return m.fromISOString(f)}});this._features={"dojo.data.api.Read":!0,"dojo.data.api.Identity":!0};this._itemsByIdentity=null;this._storeRefPropName=
"_S";this._itemNumPropName="_0";this._rootItemPropName="_RI";this._reverseRefMap="_RRM";this._loadInProgress=!1;this._queuedFetches=[];void 0!==f.urlPreventCache&&(this.urlPreventCache=f.urlPreventCache?!0:!1);void 0!==f.hierarchical&&(this.hierarchical=f.hierarchical?!0:!1);f.clearOnClose&&(this.clearOnClose=!0);"failOk"in f&&(this.failOk=f.failOk?!0:!1)},url:"",_ccUrl:"",data:null,typeMap:null,clearOnClose:!1,urlPreventCache:!1,failOk:!1,hierarchical:!0,_assertIsItem:function(f){if(!this.isItem(f))throw Error(this.declaredClass+
": Invalid item argument.");},_assertIsAttribute:function(f){if("string"!==typeof f)throw Error(this.declaredClass+": Invalid attribute argument.");},getValue:function(f,a,c){f=this.getValues(f,a);return 0<f.length?f[0]:c},getValues:function(f,a){this._assertIsItem(f);this._assertIsAttribute(a);return(f[a]||[]).slice(0)},getAttributes:function(f){this._assertIsItem(f);var a=[],c;for(c in f)c!==this._storeRefPropName&&c!==this._itemNumPropName&&c!==this._rootItemPropName&&c!==this._reverseRefMap&&
a.push(c);return a},hasAttribute:function(a,b){this._assertIsItem(a);this._assertIsAttribute(b);return b in a},containsValue:function(a,b,c){var f=void 0;"string"===typeof c&&(f=h.patternToRegExp(c,!1));return this._containsValue(a,b,c,f)},_containsValue:function(a,b,c,p){return e.some(this.getValues(a,b),function(a){if(null!==a&&!k.isObject(a)&&p){if(a.toString().match(p))return!0}else if(c===a)return!0})},isItem:function(a){return a&&a[this._storeRefPropName]===this&&this._arrayOfAllItems[a[this._itemNumPropName]]===
a?!0:!1},isItemLoaded:function(a){return this.isItem(a)},loadItem:function(a){this._assertIsItem(a.item)},getFeatures:function(){return this._features},getLabel:function(a){if(this._labelAttr&&this.isItem(a))return this.getValue(a,this._labelAttr)},getLabelAttributes:function(a){return this._labelAttr?[this._labelAttr]:null},filter:function(a,b,c){var f=[],q,d;if(a.query){var m;q=a.queryOptions?a.queryOptions.ignoreCase:!1;var e={};for(d in a.query)m=a.query[d],"string"===typeof m?e[d]=h.patternToRegExp(m,
q):m instanceof RegExp&&(e[d]=m);for(q=0;q<b.length;++q){var x=!0,g=b[q];if(null===g)x=!1;else for(d in a.query)m=a.query[d],this._containsValue(g,d,m,e[d])||(x=!1);x&&f.push(g)}}else for(q=0;q<b.length;++q)d=b[q],null!==d&&f.push(d);c(f,a)},_fetchItems:function(a,q,c){var f=this;if(this._loadFinished)this.filter(a,this._getItemsArray(a.queryOptions),q);else if(this._jsonFileUrl!==this._ccUrl?(n.deprecated(this.declaredClass+": ","To change the url, set the url property of the store, not _jsonFileUrl.  _jsonFileUrl support will be removed in 2.0"),
this.url=this._ccUrl=this._jsonFileUrl):this.url!==this._ccUrl&&(this._ccUrl=this._jsonFileUrl=this.url),null!=this.data&&(this._jsonData=this.data,this.data=null),this._jsonFileUrl)if(this._loadInProgress)this._queuedFetches.push({args:a,filter:k.hitch(f,"filter"),findCallback:k.hitch(f,q)});else{this._loadInProgress=!0;var d=b.get({url:f._jsonFileUrl,handleAs:"json-comment-optional",preventCache:this.urlPreventCache,failOk:this.failOk});d.addCallback(function(b){try{f._getItemsFromLoadedData(b),
f._loadFinished=!0,f._loadInProgress=!1,f.filter(a,f._getItemsArray(a.queryOptions),q),f._handleQueuedFetches()}catch(A){f._loadFinished=!0,f._loadInProgress=!1,c(A,a)}});d.addErrback(function(b){f._loadInProgress=!1;c(b,a)});var h=null;a.abort&&(h=a.abort);a.abort=function(){var c=d;c&&-1===c.fired&&(c.cancel(),c=null);h&&h.call(a)}}else if(this._jsonData)try{this._loadFinished=!0,this._getItemsFromLoadedData(this._jsonData),this._jsonData=null,f.filter(a,this._getItemsArray(a.queryOptions),q)}catch(z){c(z,
a)}else c(Error(this.declaredClass+": No JSON source data was provided as either URL or a nested Javascript object."),a)},_handleQueuedFetches:function(){if(0<this._queuedFetches.length){for(var a=0;a<this._queuedFetches.length;a++){var b=this._queuedFetches[a],c=b.args,p=b.filter,b=b.findCallback;p?p(c,this._getItemsArray(c.queryOptions),b):this.fetchItemByIdentity(c)}this._queuedFetches=[]}},_getItemsArray:function(a){return a&&a.deep?this._arrayOfAllItems:this._arrayOfTopLevelItems},close:function(a){this.clearOnClose&&
this._loadFinished&&!this._loadInProgress&&(this._arrayOfAllItems=[],this._arrayOfTopLevelItems=[],this._loadFinished=!1,this._itemsByIdentity=null,this._loadInProgress=!1,this._queuedFetches=[])},_getItemsFromLoadedData:function(a){function f(c){return null!==c&&"object"===typeof c&&(!k.isArray(c)||b)&&!k.isFunction(c)&&(c.constructor==Object||k.isArray(c))&&"undefined"===typeof c._reference&&"undefined"===typeof c._type&&"undefined"===typeof c._value&&d.hierarchical}function c(a){d._arrayOfAllItems.push(a);
for(var b in a){var p=a[b];if(p)if(k.isArray(p))for(var q=0;q<p.length;++q){var h=p[q];f(h)&&c(h)}else f(p)&&c(p)}}var b=!1,d=this;this._labelAttr=a.label;var h,m;this._arrayOfAllItems=[];this._arrayOfTopLevelItems=a.items;for(h=0;h<this._arrayOfTopLevelItems.length;++h)m=this._arrayOfTopLevelItems[h],k.isArray(m)&&(b=!0),c(m),m[this._rootItemPropName]=!0;var e={},x;for(h=0;h<this._arrayOfAllItems.length;++h)for(x in m=this._arrayOfAllItems[h],m){if(x!==this._rootItemPropName){var g=m[x];null!==g?
k.isArray(g)||(m[x]=[g]):m[x]=[null]}e[x]=x}for(;e[this._storeRefPropName];)this._storeRefPropName+="_";for(;e[this._itemNumPropName];)this._itemNumPropName+="_";for(;e[this._reverseRefMap];)this._reverseRefMap+="_";if(e=a.identifier)for(this._itemsByIdentity={},this._features["dojo.data.api.Identity"]=e,h=0;h<this._arrayOfAllItems.length;++h)if(m=this._arrayOfAllItems[h],a=m[e],a=a[0],Object.hasOwnProperty.call(this._itemsByIdentity,a)){if(this._jsonFileUrl)throw Error(this.declaredClass+":  The json data as specified by: ["+
this._jsonFileUrl+"] is malformed.  Items within the list have identifier: ["+e+"].  Value collided: ["+a+"]");if(this._jsonData)throw Error(this.declaredClass+":  The json data provided by the creation arguments is malformed.  Items within the list have identifier: ["+e+"].  Value collided: ["+a+"]");}else this._itemsByIdentity[a]=m;else this._features["dojo.data.api.Identity"]=Number;for(h=0;h<this._arrayOfAllItems.length;++h)m=this._arrayOfAllItems[h],m[this._storeRefPropName]=this,m[this._itemNumPropName]=
h;for(h=0;h<this._arrayOfAllItems.length;++h)for(x in m=this._arrayOfAllItems[h],m)for(a=m[x],e=0;e<a.length;++e)if(g=a[e],null!==g&&"object"==typeof g){if("_type"in g&&"_value"in g){var r=g._type,v=this._datatypeMap[r];if(v)if(k.isFunction(v))a[e]=new v(g._value);else if(k.isFunction(v.deserialize))a[e]=v.deserialize(g._value);else throw Error("dojo.data.ItemFileReadStore: Value provided in typeMap was neither a constructor, nor a an object with a deserialize function");else throw Error("dojo.data.ItemFileReadStore: in the typeMap constructor arg, no object class was specified for the datatype '"+
r+"'");}if(g._reference){g=g._reference;if(k.isObject(g))for(r=0;r<this._arrayOfAllItems.length;++r){var v=this._arrayOfAllItems[r],B=!0,C;for(C in g)v[C]!=g[C]&&(B=!1);B&&(a[e]=v)}else a[e]=this._getItemByIdentity(g);this.referenceIntegrity&&(g=a[e],this.isItem(g)&&this._addReferenceToMap(g,m,x))}else this.isItem(g)&&this.referenceIntegrity&&this._addReferenceToMap(g,m,x)}},_addReferenceToMap:function(a,b,c){},getIdentity:function(a){var b=this._features["dojo.data.api.Identity"];return b===Number?
a[this._itemNumPropName]:(a=a[b])?a[0]:null},fetchItemByIdentity:function(a){var f,c;if(this._loadFinished)f=this._getItemByIdentity(a.identity),a.onItem&&(c=a.scope?a.scope:n.global,a.onItem.call(c,f));else{var p=this;this._jsonFileUrl!==this._ccUrl?(n.deprecated(this.declaredClass+": ","To change the url, set the url property of the store, not _jsonFileUrl.  _jsonFileUrl support will be removed in 2.0"),this.url=this._ccUrl=this._jsonFileUrl):this.url!==this._ccUrl&&(this._ccUrl=this._jsonFileUrl=
this.url);null!=this.data&&null==this._jsonData&&(this._jsonData=this.data,this.data=null);this._jsonFileUrl?this._loadInProgress?this._queuedFetches.push({args:a}):(this._loadInProgress=!0,c=b.get({url:p._jsonFileUrl,handleAs:"json-comment-optional",preventCache:this.urlPreventCache,failOk:this.failOk}),c.addCallback(function(c){var b=a.scope?a.scope:n.global;try{p._getItemsFromLoadedData(c),p._loadFinished=!0,p._loadInProgress=!1,f=p._getItemByIdentity(a.identity),a.onItem&&a.onItem.call(b,f),p._handleQueuedFetches()}catch(z){p._loadInProgress=
!1,a.onError&&a.onError.call(b,z)}}),c.addErrback(function(c){p._loadInProgress=!1;a.onError&&a.onError.call(a.scope?a.scope:n.global,c)})):this._jsonData&&(p._getItemsFromLoadedData(p._jsonData),p._jsonData=null,p._loadFinished=!0,f=p._getItemByIdentity(a.identity),a.onItem&&(c=a.scope?a.scope:n.global,a.onItem.call(c,f)))}},_getItemByIdentity:function(a){var b=null;this._itemsByIdentity?Object.hasOwnProperty.call(this._itemsByIdentity,a)&&(b=this._itemsByIdentity[a]):Object.hasOwnProperty.call(this._arrayOfAllItems,
a)&&(b=this._arrayOfAllItems[a]);void 0===b&&(b=null);return b},getIdentityAttributes:function(a){a=this._features["dojo.data.api.Identity"];return a===Number?null:[a]},_forceLoad:function(){var a=this;this._jsonFileUrl!==this._ccUrl?(n.deprecated(this.declaredClass+": ","To change the url, set the url property of the store, not _jsonFileUrl.  _jsonFileUrl support will be removed in 2.0"),this.url=this._ccUrl=this._jsonFileUrl):this.url!==this._ccUrl&&(this._ccUrl=this._jsonFileUrl=this.url);null!=
this.data&&(this._jsonData=this.data,this.data=null);if(this._jsonFileUrl){var d=b.get({url:this._jsonFileUrl,handleAs:"json-comment-optional",preventCache:this.urlPreventCache,failOk:this.failOk,sync:!0});d.addCallback(function(c){try{if(!0!==a._loadInProgress&&!a._loadFinished)a._getItemsFromLoadedData(c),a._loadFinished=!0;else if(a._loadInProgress)throw Error(this.declaredClass+":  Unable to perform a synchronous load, an async load is in progress.");}catch(p){throw p;}});d.addErrback(function(c){throw c;
})}else this._jsonData&&(a._getItemsFromLoadedData(a._jsonData),a._jsonData=null,a._loadFinished=!0)}});k.extend(g,a);return g})},"dojo/data/util/filter":function(){define(["../../_base/lang"],function(n){var k={};n.setObject("dojo.data.util.filter",k);k.patternToRegExp=function(g,e){for(var b="^",d=null,h=0;h<g.length;h++)switch(d=g.charAt(h),d){case "\\":b+=d;h++;b+=g.charAt(h);break;case "*":b+=".*";break;case "?":b+=".";break;case "$":case "^":case "/":case "+":case ".":case "|":case "(":case ")":case "{":case "}":case "[":case "]":b+=
"\\";default:b+=d}b+="$";return e?new RegExp(b,"mi"):new RegExp(b,"m")};return k})},"dojo/data/util/simpleFetch":function(){define(["../../_base/lang","../../_base/kernel","./sorter"],function(n,k,g){var e={};n.setObject("dojo.data.util.simpleFetch",e);e.errorHandler=function(b,d){d.onError&&d.onError.call(d.scope||k.global,b,d)};e.fetchHandler=function(b,d){var h=d.abort||null,a=!1,m=d.start?d.start:0,f=d.count&&Infinity!==d.count?m+d.count:b.length;d.abort=function(){a=!0;h&&h.call(d)};var q=d.scope||
k.global;d.store||(d.store=this);d.onBegin&&d.onBegin.call(q,b.length,d);d.sort&&b.sort(g.createSortFunction(d.sort,this));if(d.onItem)for(var c=m;c<b.length&&c<f;++c){var p=b[c];a||d.onItem.call(q,p,d)}d.onComplete&&!a&&(c=null,d.onItem||(c=b.slice(m,f)),d.onComplete.call(q,c,d))};e.fetch=function(b){b=b||{};b.store||(b.store=this);this._fetchItems(b,n.hitch(this,"fetchHandler"),n.hitch(this,"errorHandler"));return b};return e})},"dojo/data/util/sorter":function(){define(["../../_base/lang"],function(n){var k=
{};n.setObject("dojo.data.util.sorter",k);k.basicComparator=function(g,e){var b=-1;null===g&&(g=void 0);null===e&&(e=void 0);if(g==e)b=0;else if(g>e||null==g)b=1;return b};k.createSortFunction=function(g,e){function b(c,a,b,f){return function(p,d){p=f.getValue(p,c);d=f.getValue(d,c);return a*b(p,d)}}for(var d=[],h,a=e.comparatorMap,m=k.basicComparator,f=0;f<g.length;f++){h=g[f];var q=h.attribute;if(q){h=h.descending?-1:1;var c=m;a&&("string"!==typeof q&&"toString"in q&&(q=q.toString()),c=a[q]||m);
d.push(b(q,h,c,e))}}return function(c,a){for(var b=0;b<d.length;){var f=d[b++](c,a);if(0!==f)return f}return 0}};return k})},"davinci/lang/workbench":function(){define([],function(){return{fileHasUnsavedChanges:"The file '${0}' has unsaved changes. Are you sure you want to close WITHOUT saving?",outlineNotAvailable:"An outline is not available",preferences:"Preferences",noUserPref:"no user preferences...",restoreDefaults:"Restore Defaults"}})},"davinci/repositoryinfo":function(){define({revision:"",
buildtime:"@buildtime@"})},"davinci/Workbench":function(){define("dcl/dcl dojo/_base/lang require ./Runtime ./ui/Dialog ./ve/metadata ./ve/utils/GeomUtils davinci/_WokbenchEditors davinci/_WokbenchMisc davinci/_Workbench_Menu davinci/_Workbench_Palette xide/widgets/ContextMenu xide/utils xide/types".split(" "),function(n,k,g,e,b,d,h,a,m,f,q,c,p,y){Function.prototype.bind=Function.prototype.bind||function(c){return dojo.hitch(c,this)};window.setInterval(function(){u.saveState&&u.updateWorkbenchState()},
5E3);var u=new (n([a,m,f,q],{declaredClass:"davinci.Workbench",_XX_last_member:!0,activePerspective:"",actionScope:[],_DEFAULT_PROJECT:"project1",_baseTitle:"Control-Freak ",hideEditorTabs:!0,_editorTabClosing:{},_shadowTabClosing:{},service:null,serviceClass:"XApp_XIDE_Workbench_Service",currentEditor:null,run2:function(){e.subscribe("/davinci/ui/widgetPropertiesChanges",function(){var c=e.currentEditor.visualEditor;c._objectPropertiesChange.apply(c,arguments)})},onResize:function(c){var a=c.explicitOriginalTarget?
c.explicitOriginalTarget:c.srcElement;if(("resize"==c.type||a.id&&-1<a.id.indexOf("dijit_layout__Splitter_")||a.nextSibling&&a.nextSibling.id&&-1<a.nextSibling.id.indexOf("dijit_layout__Splitter_"))&&(c=davinci&&e.currentEditor)&&c.onResize)c.onResize();u._originalOnResize&&u._originalOnResize();u._repositionFocusContainer()},showModal:function(c,a,f,p,d,h){return b.showModal(c,a,f,p,d,h)},showMessage:function(c,a,f,p,d){return b.showMessage(c,a,f,p,d)},showDialog:function(c){return b.showDialog(c)},
_loadActionClass:function(c){c&&"string"==typeof c.action&&g([c.action],function(a){try{if(a)c.action=new a,c.action.item=c;else debugger}catch(x){console.error("action class creation failed : "+c.action)}})},_toggleButton:function(c,a,b,f){c.checked&&(b.forEach(function(a){a!=c&&a.set("checked",!1)}),u._runAction(c.item,a,c.item.id))},_runAction:function(c,a,b){a&&e.currentEditor&&(a=e.currentEditor);if(c.run)c.run();else if(c.action)dojo.isString(c.action)&&this._loadActionClass(c),c.action.run(a);
else if(c.method&&a&&a[c.method]instanceof Function)a[c.method](b);else c.commandID&&e.executeCommand(c.commandID)},createPopup:function(a){function b(a){var b=this.contextMenuArgs||{};p.mixin(b,{owner:this,delegate:this,actionFilter:{quick:!0}});var f=new c(b,a);f.openTarget=a;f.init({preventDoubleContext:!1});f._registerActionEmitter(this);$(a).one("contextmenu",function(c){c.preventDefault();this.store||f.setActionStore(this.getActionStore(),this)}.bind(this));this.contextMenu=f}var f=a.partID,
d=a.domNode,h=a.context,q=a.openCallback;if("davinci.ve.visualEditor"===f)h.cMenu||(h.cMenu=b.apply(h.getVisualEditor(),[d]),h.getVisualEditor().add(h.cMenu));else{var m=this.getActionSets(f),e=m.clonedActionSets,m=m.actionSets;try{if(0<e.length){var g=u._createMenuTree(e,!0);u._initActionsKeys(m,a);var y=u._createMenu(g,h);y&&d&&y.bindDomNode(d);y._widgetCallback=q;y._partID=f;return y}}catch(D){logError(D,"creating popup")}}},getActionSets:function(c){var a=[];e.getExtension("davinci.actionSetPartAssociations",
function(b){return b.parts.some(function(f){if(f==c)return a.push(b.targetID),!0})});var b,f=[];a.length&&(b=e.getExtensions("davinci.actionSets",function(c){return a.some(function(a){return a==c.id})}),b.length&&b.forEach(function(c){var a=d.getLibraryActions(c.id);a.length&&(c=k.mixin({},c),c.actions=c.actions.concat(a));f.push(c)}));return{actionSets:b,clonedActionSets:f}},getFocusContainer:function(){var c=document.getElementById("focusContainer");c||(c=dojo.create("div",{"class":"focusContainer",
id:"focusContainer"},document.body),davinci.Workbench.focusContainer=c);return c},_repositionFocusContainer:function(){var c=dojo.byId("editorsStackContainer"),a=this.getFocusContainer();if(c&&a){var b=e.currentEditor;if(c=b&&b.getFocusContainerBounds?b.getFocusContainerBounds():h.getBorderBoxPageCoords(c))a.style.left=c.l+"px",a.style.top=c.t+"px",a.style.width=c.w+"px",a.style.height=c.h+"px",b&&b.getContext&&(a=b.getContext())&&a.updateFocusAll&&a.updateFocusAll()}},_removeFocusContainerChildren:function(){davinci.Workbench.focusContainer&&
(davinci.Workbench.focusContainer.innerHTML="")}}));dojo.setObject("davinci.Workbench",u);return u})},"davinci/ve/utils/GeomUtils":function(){define(["dojo/_base/window","dojo/dom-geometry","dojo/dom-style","dojo/has","dojo/_base/sniff"],function(n,k,g,e,b){var d=["TABLE","TBODY","TR","TD","TH"];return{getMarginBoxPageCoords:function(b){var a;n.withDoc(b.ownerDocument,function(){var d=this.getBorderBoxPageCoords(b),f=this.getMarginExtents(b);a={l:d.l-f.l,t:d.t-f.t,w:d.w+f.l+f.r,h:d.h+f.t+f.b}}.bind(this));
return a},getMarginBoxPageCoordsCached:function(b){b._maqMarginBoxPageCoords||(b._maqMarginBoxPageCoords=this.getMarginBoxPageCoords(b));return b._maqMarginBoxPageCoords},getBorderBoxPageCoords:function(b){var a;n.withDoc(b.ownerDocument,function(){if(d.indexOf(b.tagName)){var h=b.getBoundingClientRect(),f=this.getScrollLeft(b),q=this.getScrollTop(b);a={l:h.left+f,t:h.top+q,w:h.width,h:h.height}}else{for(var h=b.offsetLeft,f=b.offsetTop,q=b.parentNode,c=b.offsetParent;q&&"BODY"!=q.tagName;){"number"==
typeof q.scrollLeft&&"number"==typeof q.scrollTop&&(h-=q.scrollLeft,f-=q.scrollTop);if(q==c)var p=k.getBorderExtents(c),h=h+(c.offsetLeft+p.l),f=f+(c.offsetTop+p.t),c=c.offsetParent;q=q.parentNode}a={l:h,t:f,w:b.offsetWidth,h:b.offsetHeight}}}.bind(this));return a},getBorderBoxPageCoordsCached:function(b){b._maqBorderBoxPageCoords||(b._maqBorderBoxPageCoords=this.getBorderBoxPageCoords(b));return b._maqBorderBoxPageCoords},getScrollLeft:function(b){b=b&&b.ownerDocument;return e("mozilla")?(b=b&&b.defaultView)?
b.pageXOffset:0:(b=b&&b.body)?b.scrollLeft:0},getScrollTop:function(b){b=b&&b.ownerDocument;return e("mozilla")?(b=b&&b.defaultView)?b.pageYOffset:0:(b=b&&b.body)?b.scrollTop:0},getMarginExtents:function(b,a){var d=a||g.getComputedStyle(b),f;d?(b=parseFloat(d.marginLeft)||0,a=parseFloat(d.marginTop)||0,f=parseFloat(d.marginRight)||0,d=parseFloat(d.marginBottom)||0):b=a=f=d=0;return{l:b,t:a,r:f,b:d,w:b+f,h:a+d}},clearGeomCache:function(b){delete b._maqBorderBoxPageCoords;delete b._maqMarginBoxPageCoords}}})},
"davinci/_WokbenchEditors":function(){define(["dcl/dcl","./Runtime","dojo/promise/all"],function(n,k,g){return n(null,{closeAllEditors:function(){var e=dijit.byId("editors_container");e&&e.getChildren().forEach(function(b){e.closeChild(b)})},getOpenEditor:function(e){return this.currentEditor?this.currentEditor:null!=e?(e=dijit.byId(filename2id(e.getPath())))?e.editor:null:(e=dijit.byId("editors_container"))&&e.selectedChildWidget&&e.selectedChildWidget.editor?e.selectedChildWidget.editor:null},closeActiveEditor:function(){var e=
dijit.byId("editors_container"),b=dijit.byId("davinci_file_tabs");if(e&&e.selectedChildWidget&&e.selectedChildWidget.editor){var d=selectedChildWidget.id.replace(/^editor/,"shadow");e.closeChild(e.selectedChildWidget);(e=dijit.byId(d))&&b.closeChild(e)}},getAllOpenEditorIds:function(){},_showEditorTopPanes:function(){this._hideShowEditorTopPanes("block")},_hideEditorTopPanes:function(){this._hideShowEditorTopPanes("none")},_hideShowEditorTopPanes:function(e){},_editorTabClosed:function(e){if(!davinci.Workbench._editorTabClosing[e.id]){davinci.Workbench._editorTabClosing[e.id]=
!0;if(e&&e.editor&&e.editor.fileName){var b=e.id.replace(/^editor/,"shadow"),d=dijit.byId("davinci_file_tabs"),h=dijit.byId(b),a=Workbench._state.editors.indexOf(e.editor.fileName);-1!=a&&Workbench._state.editors.splice(a,1);Workbench.saveState=!0;davinci.Workbench._shadowTabClosing[b]||(d.removeChild(h),h.destroyRecursive())}dijit.byId("editors_container").getChildren().length||(Workbench._switchEditor(null),this._expandCollapsePaletteContainers(null),b=dijit.byId("editorsStackContainer"),d=dijit.byId("editorsWelcomePage"),
b&&d&&b.selectChild(d),this._hideEditorTopPanes());delete davinci.Workbench._editorTabClosing[e.id]}},openEditor:function(e,b){try{var d=e.fileName,h;"string"==typeof d?h=d.substr(d.lastIndexOf(".")+1):(h=d.getExtension(),d=d.getPath());var a=dijit.byId(filename2id(d)),m=dijit.byId("editors_container");if(a){m.selectChild(a);var f=a.editor;e.startOffset&&f.select(e)}else{var q=e.editorCreateCallback,c=k.getExtensions("davinci.editor",function(c){"string"==typeof c.extensions&&(c.extensions=c.extensions.split(","));
return dojo.some(c.extensions,function(c){return c.toLowerCase()==h.toLowerCase()})}),p=c[0];1<c.length&&dojo.some(c,function(c){p=c;return c.isDefault});Workbench._createEditor(p,d,e,b).then(function(c){q&&q.call(window,c);e.noSelect||(k.currentEditor=c)},function(c){console.error("Error opening editor for filename: "+d,c)})}}catch(y){console.error("Exception opening editor for filename: "+e&&e.fileName),console.error(y)}},_switchEditor:function(e,b){var d=k.currentEditor;k.currentEditor=e;var h=
davinci.Workbench;h._state&&(h._state.activeEditor=e?e.fileName:null);this._removeFocusContainerChildren();this._showEditorTopPanes();try{dojo.publish("/davinci/ui/editorSelected",[{editor:e,oldEditor:d}])}catch(a){console.error(a)}h._updateTitle(e);setTimeout(function(){e&&e.visualEditor&&e.visualEditor.context&&e.visualEditor.context.isActive()&&e.visualEditor.context.getTopWidgets().forEach(function(a){a.resize&&a.resize()});this._repositionFocusContainer()}.bind(this),1E3);g(this._showViewPromises).then(function(){e&&
e.focus&&e.focus();this._rearrangePalettes(e);this._expandCollapsePaletteContainers(e)}.bind(this));b||(h.saveState=!0)}})})},"davinci/_WokbenchMisc":function(){define("dcl/dcl require ./Runtime ./ui/Dialog davinci/lang/webContent ./ve/metadata dojo/_base/connect xide/manager/ServerActionBase".split(" "),function(n,k,g,e,b,d,h,a){var m=function(a,c){401==c.status||403==c.status?f():!0===a.canceled&&(a=a.ioArgs.url,(new RegExp("(^|\\.\\/|"+document.baseURI+"\\/)cmd\\/")).test(a)&&(0<=a.indexOf("getBluePageInfo")||
g.handleError(c.message)))},f=function(){var a=new e({title:b.sessionTimedOut}),c=dojo.string.substitute(b.sessionTimedOutMsg,{hrefLoc:"welcome"});a.set("content",c);dojo.connect(a,"onCancel",null,function(){window.location.href="welcome"});setTimeout(function(){window.location.href="welcome"},1E4);a.show()};return n(null,{run:function(){var a=davinci.Workbench;console.error("run ");g.run();a._initKeys();a._baseTitle=dojo.doc.title;try{a.initService()}catch(p){debugger}window.maqetta&&maqetta.TopBanner&&
maqetta.TopBanner.setup&&maqetta.TopBanner.setup();g.subscribe("/davinci/resource/resourceChanged",function(c,a){if("deleted"==c&&(c="editor-"+encodeURIComponent(a.getPath().replace(/[\/| |\t]/g,"_")).replace(/%/g,":"),a=editorIdToShadowId(c),c=dijit.byId(c),a=dijit.byId(a),c&&!c._isClosing)){var b=dijit.byId("editors_container"),f=dijit.byId("davinci_file_tabs");b.removeChild(c);c.destroyRecursive();f.removeChild(a);a.destroyRecursive()}});g.subscribe("/dojo/io/error",m);g.subscribe("/davinci/states/state/changed",
function(c){var a=g.currentEditor;"davinci.ve.themeEditor.ThemeEditor"!=a.declaredClass&&"davinci.review.editor.ReviewEditor"!=a.declaredClass&&a.visualEditor.onContentChange.apply(a.visualEditor,arguments)});g.subscribe("/davinci/ui/widgetPropertiesChanges",function(){var c=g.currentEditor.visualEditor;c._objectPropertiesChange.apply(c,arguments)});h.subscribe("/davinci/states/state/changed",function(c){var a=g.currentEditor&&"davinci.ve.PageEditor"==g.currentEditor.declaredClass&&g.currentEditor.visualEditor&&
g.currentEditor.visualEditor.context;if(a){var b,f,a=a?a.getDijit():null,p=k("davinci/ve/widget");c.newState&&!c.newState.indexOf("_show:")&&(b=a.byId(c.newState.substring(6)),b=p.getWidget(b.domNode),(f=b.getHelper())&&f.popup&&f.popup(b));c.oldState&&!c.oldState.indexOf("_show:")&&(b=a.byId(c.oldState.substring(6)),b=p.getWidget(b.domNode),(f=b.getHelper())&&f.tearDown&&f.tearDown(b))}});h.subscribe("/davinci/ui/repositionFocusContainer",function(c){a._repositionFocusContainer()});var c=this.service.serviceObject[this.serviceClass].getInfo().then(function(c){g._initializationInfo=
c;c=c.userInfo;g.isLocalInstall="maqettaUser"==c.userId;g.userName=c.userId;g.userEmail=c.email;return d.init()}).then(function(){var c=g.initialPerspective||"davinci.ui.main";dojo.query(".loading").orphan();a.showPerspective(c);a._updateTitle();initializeWorkbenchState()}).otherwise(function(c){dojo.query("#load_screen").addContent(dojo.string.substitute(b.startupError,[c.message]),"only")});a._lastAutoSave=Date.now();setInterval(dojo.hitch(this,"_autoSave"),3E4);return c},initService:function(){this.service||
(this.service=new a({serviceClass:"XApp_XIDE_Workbench_Service",serviceUrl:"./xcf/xui.php?debug\x3dtrue\x26view\x3drpc",singleton:!1}),this.service.init())},findView:function(a){if(a=dijit.byId(a))return a},location:function(){return g.location()},logoff:function(a){},unload:function(){davinci.Workbench._autoSave()},singleProjectMode:function(){return!0},getProject:function(){var a=davinci.Workbench;return a.getActiveProject()||a._DEFAULT_PROJECT},loadProject:function(a){var c=davinci.Workbench;c.setActiveProject(a);
return c.updateWorkbenchState().then(function(){location.href="cmd/configProject?configOnly\x3dtrue\x26project\x3d"+encodeURIComponent(a)})},getActiveProject:function(){return"project1"},setActiveProject:function(a){var c=davinci.Workbench;c._state||(c._state={});c._state.project=a;c.saveState=!0},setActionScope:function(a,c){davinci.Workbench.actionScope[a]=c},clearWorkbenchState:function(){var a=davinci.Workbench;a._state={};return a.updateWorkbenchState()},updateWorkbenchState:function(){delete davinci.Workbench.saveState;
return null},getDefaultMount:function(){},workbenchStateCustomPropGet:function(a){var c=davinci.Workbench;if("string"==typeof a)return c._state[a]},workbenchStateCustomPropSet:function(a,c){var b=davinci.Workbench;"string"==typeof a&&("undefined"==typeof c?delete b._state[a]:b._state[a]=c,b.saveState=!0)},_autoSave:function(){var a=davinci.Workbench,c=!1;if(this.currentEditor){var b=this.currentEditor;if(b.isReadOnly)console.error("workbench : autosave failed : isReadyOnly or is not dirty");else try{b.save(!0)}catch(y){console.error("Error while autosaving file:"+
y),c=!0}}c||(a._lastAutoSave=Date.now())},_updateTitle:function(a){var c=davinci.Workbench._baseTitle||"";a&&(c+="",a.isDirty&&(c+="*"),c+=a.item.name);dojo.doc.title=c},_initActionsKeys:function(a,c){var b=davinci.Workbench,f=c.keysDomNode||c.domNode,d={},h;dojo.forEach(a,function(c){dojo.forEach(c.actions,function(c){c.keySequence&&(d[c.keySequence]=c,h=!0)})});if(h){var q=c.context;dojo.connect(f,"onkeydown",function(c){c=b._keySequence(c);c=d[c];!c||c.action.shouldShow&&!c.action.shouldShow(q)||
c.action.isEnabled(q)&&b._runAction(c,q)})}},_initKeys:function(){var a=davinci.Workbench,c={all:[]},b=g.getExtensions("davinci.keyBindings");dojo.forEach(b,function(a){var b=a.contextID||"all",f=c[b];f||(f=c[b]=[]);f[a.sequence]=a.commandID});a.keyBindings=c},handleKey:function(a){var c=davinci.Workbench;if(c.keyBindings){a=c._keySequence(a);var b;c.currentContext&&c.keyBindings[c.currentContext]&&(b=c.keyBindings[c.currentContext][a]);b||(b=c.keyBindings.all[a]);if(b)return g.executeCommand(b),
!0}},_keySequence:function(a){var c=[];window.event?(window.event.ctrlKey&&c.push("M1"),window.event.shiftKey&&c.push("M2"),window.event.altKey&&c.push("M3")):((a.ctrlKey||2==a.modifiers||3==a.modifiers||5<a.modifiers)&&c.push("M1"),(a.shiftKey||3<a.modifiers)&&c.push("M2"),a.modifiers?(a.altKey||a.modifiers%2)&&c.push("M3"):a.altKey&&c.push("M3"));var b=String.fromCharCode(a.keyCode);/[A-Z0-9]/.test(b)||(b={46:"del",114:"f3"}[a.keyCode]||"xxxxxxxxxx");b=b.toUpperCase();" "==b&&(b="' '");c.push(b);
return c.join("+")},setupGlobalKeyboardHandler:function(){var a=g.getExtensions("davinci.actionSets");dojo.forEach(a,function(c){"davinci.ui.main"!=c.id&&"davinci.ui.editorActions"!=c.id||dojo.forEach(c.actions,function(c){c.keyBinding&&g.registerKeyBinding(c.keyBinding,c)})})}})})},"davinci/_Workbench_Menu":function(){define("dcl/dcl dojo/_base/declare ./Runtime dijit/Menu dijit/MenuBar dijit/MenuItem dijit/MenuSeparator dijit/PopupMenuBarItem dijit/form/DropDownButton davinci/_WokbenchEditors davinci/_WokbenchMisc".split(" "),
function(n,k,g,e,b,d,h,a,m){var f=k(e,{menuOpened:function(a){},_openMyself:function(a){this.menuOpened(a);var c;try{var b=document.getElementById("menuOverlayDiv");b||(b=dojo.create("div",{id:"menuOverlayDiv",style:"left:0px; top:0px; width:100%; height:100%; position:absolute; z-index:10;"},document.body));if(this.adjustPosition){var f=this.adjustPosition(a);c=dijit.popup.open;dijit.popup.open=function(a){a.x+=f.x;a.y+=f.y;c.call(dijit.popup,a)}}this.onClose=function(){var c=document.getElementById("menuOverlayDiv");
c&&c.parentNode.removeChild(c)}.bind(this);this.inherited(arguments)}finally{c&&(dijit.popup.open=c)}}});return n(null,{declaredClass:"davinci.Workbench_Menu",updateMenubar:function(a,c){console.error("updateMenubar")},_updateMainMenubar:function(a,c){console.error("_updateMainMenubar")},_addItemsToMenubar:function(a,c){console.error("_addItemsToMenubar")},_createMenu:function(a,c){var b,d;a.menus?(b=new e({parentMenu:a}),d=a.menus,a="onOpen"):(b=new f({}),d=a,a="menuOpened");b.domNode.style.display=
"none";b.actionContext=c;this._rebuildMenu(b,d);dojo.connect(b,a,this,function(c){b._widgetCallback&&b._widgetCallback(c);this._rebuildMenu(b,d).focus()});return b},_rebuildMenu:function(a,c){dojo.forEach(a.getChildren(),function(c){a.removeChild(c);c.destroy()});a.focusedChild=null;var b,f;c.forEach(function(c,p){c.menus.length&&(c.isSeparator&&0<p&&(b=!0),c.menus.forEach(function(c){b&&f&&(a.addChild(new h({})),b=!1);f=!0;var p=c.label;c.action&&c.action.getName&&(p=c.action.getName());if(c.separator)c=
davinci.Workbench._createMenu(c),c=new d({label:p,popup:c,id:c.id+"item"}),c.actionContext=a.actionContext,a.addChild(c);else{var e=!0;c.isEnabled&&(e=g.getSelection(),e=(e=e[0]&&e[0].resource)?c.isEnabled(e):!1);if(c.action){if(c.action.shouldShow&&!c.action.shouldShow(a.actionContext,{menu:a}))return;e=c.action.isEnabled&&c.action.isEnabled(a.actionContext)}p={label:p,id:c.id,disabled:!e,onClick:dojo.hitch(this,"_runAction",c,a.actionContext)};c.iconClass&&(p.iconClass=c.iconClass);a.addChild(new d(p))}},
this))},this);return a},_createMenuTree:function(a,c){function b(c,a,b){a=(a||"additions").split("/");var d=f;davinci.Workbench._loadActionClass(c);var p=a[a.length-1];if(1<a.length)for(var h=0,e=a.length-1;h<e;h++){var m;a:{m=0;for(var q=d.length;m<q;m++)for(var u=0,g=d[m].menus.length;u<g;u++)if(a[h]==d[m].menus[u].id){m=d[m].menus[u].menus;break a}m=void 0}m&&(d=m)}h=0;for(e=d.length;h<e;h++)if(d[h].id==p){a=d[h].menus;a.push(c);if(c.separator){b=!1;a=c.menus=[];for(d=0;d<c.separator.length;d+=
2)p=c.separator[d],b="additions"==p,a.push({id:p,isSeparator:c.separator[d+1],menus:[]});b||a.push({id:"additions",isSeparator:!1,menus:[]})}return}b&&f.push({id:p,isSeparator:!1,menus:[c]})}a||(a=g.getExtensions("davinci.actionSets",function(c){return 0==g.getExtensions("davinci.actionSetPartAssociations",function(a){return a.targetID==c.id}).length}));for(var f=[],d=0,h=a.length;d<h;d++){var e=a[d];if(e.visible&&e.menu)for(var m=0,q=e.menu.length;m<q;m++){var r=e.menu[m];if(r.__mainMenu)for(var k=
0;k<r.separator.length;k+=2)f.push({id:r.separator[k],isSeparator:r.separator[k+1],menus:[]});else if(b(r,r.path,c),r.populate instanceof Function){var r=r.populate(),B;for(B in r)b(r[B],r[B].menubarPath)}}}d=0;for(h=a.length;d<h;d++)if(e=a[d],e.visible)for(m=0,q=e.actions.length;m<q;m++)B=e.actions[m],B.menubarPath&&b(B,B.menubarPath,c);return f}})})},"davinci/_Workbench_Palette":function(){define(["dcl/dcl","davinci/Runtime"],function(n,k){var g={};return n(null,{declaredClass:"davinci.Workbench_Menu",
_rearrangePalettes:function(e){var b,d,h;e?((d=k.getExtensions("davinci.editor",function(a){return e?a.id===e.editorID:!1}))&&0<d.length&&(b=d[0].palettePerspective),d=e._rightPaletteExpanded,h=e._leftPaletteExpanded):b=k.initialPerspective||"davinci.ui.main";b&&((b=k.getExtension("davinci.perspective",b))||console.error("---error"),dojo.forEach(b.views,function(a){var b=a.viewID,f=a.position;0>f.indexOf("bottom")&&(f+="-top");if(b=dijit.byId(b)){var d=b.getParent(),f=mainBody.tabs.perspective[f];
d!=f&&(d&&d.removeChild(b),a.hidden||(f.addChild(b),d=f));d&&(a.hidden?d.removeChild(b):a.selected&&(d._maqDontExpandCollapse=!0,d.selectChild(b),delete d._maqDontExpandCollapse))}}));e&&(e.hasOwnProperty("_rightPaletteExpanded")&&(e._rightPaletteExpanded=d),e.hasOwnProperty("_leftPaletteExpanded")&&(e._leftPaletteExpanded=h))},_nearlyCollapsed:function(e){e=dojo.style(e,"width");"string"==typeof e&&(e=parseInt(e));return 91>e},_expandCollapsePaletteContainer:function(e){if(e&&e.domNode&&(e=davinci.Workbench.findPaletteContainerNode(e.domNode),
e.id)){var b=e._maqExpanded,d;this._nearlyCollapsed(e)&&(b=!1,d=91<=g[e.id].expandToSize?g[e.id].expandToSize:g[e.id].initialExpandToSize);b?this.collapsePaletteContainer(e):this.expandPaletteContainer(e,{expandToSize:d})}},_expandCollapsePaletteContainers:function(e,b){var d=dijit.byId("left_mainBody"),h=dijit.byId("right_mainBody");if(e){var a=k.getExtensions("davinci.editor",function(a){return a.id===e.editorID});if(a&&0<a.length){var a=a[0].expandPalettes,m;d&&((m=e&&e.hasOwnProperty("_leftPaletteExpanded")?
e._leftPaletteExpanded:a&&0<=a.indexOf("left"))?this.expandPaletteContainer(d.domNode,b):this.collapsePaletteContainer(d.domNode,b));h&&((m=e&&e.hasOwnProperty("_rightPaletteExpanded")?e._rightPaletteExpanded:a&&0<=a.indexOf("right"))?this.expandPaletteContainer(h.domNode,b):this.collapsePaletteContainer(h.domNode,b))}}else d&&this.collapsePaletteContainer(d.domNode,b),h&&this.collapsePaletteContainer(h.domNode,b)},findPaletteContainerNode:function(e){for(var b;e&&"BODY"!=e.tagName;){if(dojo.hasClass(e,
"davinciPaletteContainer")){b=e;break}e=e.parentNode}return b},collapsePaletteContainer:function(e,b){if((e=davinci.Workbench.findPaletteContainerNode(e))&&e.id){var d=e.id,h=dojo.style(e,"width"),a=dijit.byNode(e),m=dojo.query("[role\x3dtablist]",e);if(a&&0<m.length){var m=dojo.marginBox(m[0]),f=a.getParent();f&&f.resize&&m&&m.w&&(this._nearlyCollapsed(e)||b&&b.dontPreserveWidth||(g[d].expandToSize=h),e.style.width=m.w+"px",f.resize(),a._isCollapsed=!0)}dojo.removeClass(e,"maqPaletteExpanded");e._maqExpanded=
!1;davinci.Workbench._repositionFocusContainer();if(b=k.currentEditor)"left_mainBody"==e.id?b._leftPaletteExpanded=!1:"right_mainBody"==e.id&&(b._rightPaletteExpanded=!1)}},expandPaletteContainer:function(e,b){b=b&&b.expandToSize;if((e=davinci.Workbench.findPaletteContainerNode(e))&&e.id){var d=e.id,h=dijit.byNode(e);b&&(g[d].expandToSize=b);h&&g[d].expandToSize&&(b=h.getParent())&&b.resize&&(e.style.width=g[d].expandToSize+"px",b.resize(),delete h._isCollapsed);dojo.addClass(e,"maqPaletteExpanded");
e._maqExpanded=!0;davinci.Workbench._repositionFocusContainer();if(b=k.currentEditor)"left_mainBody"==e.id?b._leftPaletteExpanded=!0:"right_mainBody"==e.id&&(b._rightPaletteExpanded=!0)}}})})},"davinci/ui/widgets/OutlineTree":function(){define(["dojo/_base/declare"],function(n){return n(null,{})})},"davinci/davinci_":function(){define("dijit/dijit ./Workbench ./ve/palette/HtmlWidgets ./ve/views/StatesView ./ve/views/SwitchingStyleView ./actions/UndoAction ./actions/SelectLayoutAction ./actions/RedoAction ./ve/actions/CopyAction ./ve/actions/CutAction ./ve/actions/DeleteAction ./ve/actions/PasteAction ./ve/actions/DuplicateAction ./ve/actions/EditValueAction ./ve/actions/EditPropertiesAction ./ve/actions/SurroundAction ./ve/actions/SelectParentAction ./ve/actions/SelectAncestorAction ./ve/actions/UnselectAllAction ./ve/actions/ArrangeAction ./ve/actions/MoveToFrontAction ./ve/actions/MoveToBackAction ./ve/actions/MoveForwardAction ./ve/actions/MoveBackwardAction ./ve/actions/OtherAction ./ve/actions/AddState ./ve/actions/RemoveState ./ve/actions/ModifyState ./ve/actions/ManageStates ./ve/actions/NewWidgetsCurrentState ./ve/actions/HighlightBaseWidgets ./ve/actions/ShowInOutline ./ve/PageEditor ./html/ui/HTMLEditor ./ve/prefs/HTMLEditPreferences dijit/layout/LayoutContainer ./commands/OrderedCompoundCommand ./version".split(" "),
function(){})},"davinci/ve/palette/HtmlWidgets":function(){define(["dojo/_base/declare","davinci/workbench/ViewPart"],function(n,k,g){return n("davinci.ve.palette.HtmlWidgets",k,{constructor:function(e,b){dojo.subscribe("/davinci/ui/editorSelected",dojo.hitch(this,this._editorSelected))},_editorSelected:function(e){e.editor&&e.editor.supports("palette")?(this.setContext([e.editor.getContext()]),dojo.removeClass(this.palette.domNode,"dijitHidden")):(this.palette.domNode.scrollTop=0,dojo.addClass(this.palette.domNode,
"dijitHidden"))},postCreate:function(){this.inherited(arguments);this.attachToolbar();this.palette=new g({toolbarDiv:this.toolbarDiv});this.palette.descriptors="dijit,dojox,html,OpenAjax";this.setContent(this.palette);this.palette._loadPalette();dojo.addClass(this.palette.domNode,"dijitHidden")},setContext:function(e){this.palette.setContext(e[0])}})})},"davinci/workbench/ViewPart":function(){define(["dojo/_base/declare","./_ToolbaredContainer","../ve/States","../Runtime"],function(n,k,g,e){return n("davinci.workbench.ViewPart",
k,{constructor:function(b,d){this.viewExt=b.view;this.subscriptions=[];this.publishing={}},startup:function(){this.inherited(arguments);this.domNode.view=this;this.viewExt.startup&&this.viewExt.startup()},subscribe:function(b,d){this.subscriptions.push(dojo.subscribe(b,this,d))},publish:function(b,d){this.publishing[b]=!0;try{dojo.publish(b,d)}catch(h){console.error(h)}delete this.publishing[b]},destroy:function(){dojo.forEach(this.subscriptions,dojo.unsubscribe);delete this.subscriptions},_getViewActions:function(){var b=
this.toolbarID||this.viewExt.id,d=[];e.getExtensions("davinci.viewActions",function(h){if(b==h.viewContribution.targetID)return d.push(h.viewContribution),!0});return d}})})},"davinci/workbench/_ToolbaredContainer":function(){define(["dojo/_base/declare","dijit/layout/_LayoutWidget","dijit/_Templated"],function(n,k,g){return n("davinci.workbench._ToolbaredContainer",[k,g],{templateString:"\x3cdiv\x3e\x3cdiv dojoAttachPoint\x3d'titleBarDiv' class\x3d'palette_titleBarDiv'\x3e\x3c/div\x3e\x3cdiv dojoAttachPoint\x3d'toolbarDiv' class\x3d'toolbaredContainer_toolbarDiv'\x3e\x3c/div\x3e\x3cdiv dojoAttachPoint\x3d'containerNode'\x3e\x3c/div\x3e\x3c/div\x3e",
gutters:!1,_toolbarCreated:{},layout:function(){var e=[{domNode:this.titleBarDiv,layoutAlign:"top"},{domNode:this.toolbarDiv,layoutAlign:"top"},{domNode:this.containerNode,layoutAlign:"client"}];dijit.layout.layoutChildren(this.domNode,this._contentBox,e);this._containerContentBox=dijit.layout.marginBox2contentBox(this.containerNode,e[2]);var b=dijit.byNode(this.containerNode);b&&b.resize&&b.resize(this._containerContentBox);dojo.marginBox(this.containerNode,e[2])},setContent:function(e){this.mainWidget=
e;e=e.domNode||e;dojo.place(e,this.containerNode,"replace");this.containerNode=e;this.toolbarCreated(this.declaredClass)||this._createToolbar(this.declaredClass);this.titleBarDiv.innerHTML='\x3cspan class\x3d"paletteCloseBox"\x3e\x3c/span\x3e\x3cspan class\x3d"titleBarDivTitle"\x3e'+this.title+"\x3c/span\x3e";e=dojo.query(".paletteCloseBox",this.titleBarDiv);0<e.length&&dojo.connect(e[0],"click",this,function(b){davinci.Workbench.collapsePaletteContainer(b.currentTarget)});this._started&&this.layout()},
removeContent:function(){var e=dojo.doc.createElement("div");dojo.place(e,this.containerNode,"replace");this.containerNode=e;this.mainWidget&&this.mainWidget.destroy();delete this.mainWidget},_getViewActions:function(){},getTopAdditions:function(){},_createToolbar:function(e){var b=require("davinci/Workbench"),d=this.getToolbarDiv(),h=this.getTopAdditions();h&&d.appendChild(h);this.toolbarMenuActionSets&&(h="m"+Date.now(),d=dojo.create("span",{id:h+"_menucontainer","class":"paletteDropdown"},d),d=
dojo.create("span",{id:h+"_menu"},d),b.updateMenubar(d,this.toolbarMenuActionSets));(d=this._getViewActions())&&d.length&&(h=dojo.create("div",{"class":"toolbaredContainer_toolbarDiv"}),h=dojo.create("span",{style:{display:"inline-block"}},h),b=b._createToolBar("toolbarPath",h,d,this._getViewContext()),dojo.style(b.domNode,{display:"inline-block","float":"left"}),this.toolbarCreated(e,b))},_getViewContext:function(){return this},getToolbarDiv:function(){return this.toolbarDiv},toolbarCreated:function(e,
b){1<arguments.length&&(this._toolbarCreated[e]=b);return this._toolbarCreated[e]},attachToolbar:function(){var e=this.toolbarCreated(this.declaredClass),b=this.getToolbarDiv();e&&e.domNode&&b&&(b.innerHTML="",b.appendChild(e.domNode))}})})},"davinci/ve/States":function(){"undefined"===typeof davinci&&(davinci={});davinci.AppStatesDontInitialize=!0;define("dojo/_base/declare dojo/_base/connect dojo/query dojo/dom-class dojo/dom-style dojo/_base/window dijit/registry davinci/Runtime davinci/Workbench davinci/maqetta/AppStates ./utils/GeomUtils ./commands/EventCommand ./commands/StyleCommand davinci/ve/utils/StyleArray davinci/workbench/Preferences davinci/lang/ve".split(" "),
function(n,k,g,e,b,d,h,a,m,f,q,c,p,y,u,z){var A=document;n=n(f,{_update:function(c,b){a.currentEditor&&"davinci.ve.PageEditor"==a.currentEditor.declaredClass&&c&&c._dvWidget&&(c._maqAppStates||!c._maqDeltas)&&this._refresh(c._dvWidget)},_refresh:function(c){var a=c.getParent();a.dijitWidget?this._refresh(a):c&&c.resize&&c.resize()},_updateEvents:function(a,b,f){if(a&&a._dvWidget){a=a._dvWidget;var d=["onclick","onmouseover","onmouseout","onfocus","onblur"],p,h;for(h in d){var e=d[h],m=a&&a.properties&&
a.properties[e];if("string"==typeof m&&0<=m.indexOf("davinci.states.setState")){var q=m,m=m.replace("'"+b+"'","'"+f+"'");m!==q&&(p=p||{},p[e]=m)}}if(b=this.getContext())p=new c(a,p),b.getCommandStack().execute(p)}},normalize:function(c,a,b,f){switch(c){case "style":var d=this.getStatesListCurrent(a);for(c=0;c<d.length;c++)d[c]="Normal";if(a=this.getStyle(a,d,b))for(c=0;c<a.length;c++)a[c][b]&&(f=a[c][b])}return f},normalizeArray:function(c,a,b,f){f=dojo.clone(f);switch(c){case "style":var d=this.getStatesListCurrent(a);
for(c=0;c<d.length;c++)d[c]="Normal";if(a=this.getStyle(a,d,b)){for(c=0;c<a.length;c++){b=a[c];for(var p in b)for(b=f.length-1;0<=b;b--){var d=f[b],h;for(h in d)if(h==p){f.splice(b,1);break}}}f=f.concat(a)}}return f},getEditor:function(){return a.currentEditor},getContext:function(){var c=this.getEditor();return c&&(c.getContext&&c.getContext()||c.context)},getDocument:function(){var c=this.getContext();return c&&c.getDocument&&c.getDocument()},resetState:function(c){if(c){var a=this.getStateContainersForNode(c);
c=this.getFocus(c.ownerDocument.body);for(var b=0;b<a.length;b++){var f=a[b],d=this.getState(f);this.setState(d,f,{focus:c&&f==c.stateContainerNode&&d==c.state,updateWhenCurrent:!0,silent:!1})}}},_updateSrcState:function(c,a){var b=c&&c._dvWidget;if(b){var f=b._srcElement.getAttribute(davinci.states.APPSTATES_ATTRIBUTE),d=b._srcElement.getAttribute(davinci.states.DELTAS_ATTRIBUTE);b&&b._srcElement&&(c=this.serialize(c),c.maqAppStates&&c.maqAppStates.trim(),c.maqAppStates?b._srcElement.addAttribute(davinci.states.APPSTATES_ATTRIBUTE,
c.maqAppStates):b._srcElement.removeAttribute(davinci.states.APPSTATES_ATTRIBUTE),c.maqDeltas&&c.maqDeltas.trim(),c.maqDeltas?b._srcElement.addAttribute(davinci.states.DELTAS_ATTRIBUTE,c.maqDeltas):b._srcElement.removeAttribute(davinci.states.DELTAS_ATTRIBUTE),c=b._srcElement.getAttribute(davinci.states.APPSTATES_ATTRIBUTE),b=b._srcElement.getAttribute(davinci.states.DELTAS_ATTRIBUTE),(f!==c||d!==b)&&(f=this.getEditor())&&f._visualChanged&&f._visualChanged(a))}},_removeStateFromNodeRecursive:function(c,
a){var b=c._dvWidget;if(c&&b&&a)for(this._removeStateFromNode(c,a),c=b.getChildren(),b=0;b<c.length;b++)this._removeStateFromNodeRecursive(c[b].domNode,a)},_removeStateFromNode:function(c,a){if(c&&c._maqDeltas&&c._maqDeltas[a]){delete c._maqDeltas[a];a=!1;for(var b in c._maqDeltas)if("undefined"!==b){a=!0;break}a||delete c._maqDeltas;this._updateSrcState(c)}},removeUnusedStates:function(c){if(c){c=c.getAllWidgets();for(var a=0;a<c.length;a++){var b=c[a].domNode;if("BODY"!==b.tagName&&b&&b._maqDeltas){var f=
this.getAllStatesForNode(b),d;for(d in b._maqDeltas)"undefined"!==d&&0>f.indexOf(d)&&this._removeStateFromNode(b,d)}}}},_getStateIndex:function(c){return c&&"Normal"!=c&&"undefined"!=c?c:"undefined"},getCurrentStateIndex:function(){return this._getStateIndex(this.getState())},getApplyToStateIndex:function(c){var a=this.getState();return this._getStateIndex("current"===c&&a&&"Normal"!=a&&"undefined"!=a?a:void 0)},getEffectiveDisplayValue:function(c,a,f,d){c=a?a.domNode:null;a="none";var p=f||"undefined";
if(d&&"string"==typeof d[p]&&"$MAQ_DELETE_PROPERTY$"!=d[p])a=d[p],h=!0;else if(c){var h=!1;if(c._maqDeltas&&(!d||"$MAQ_DELETE_PROPERTY$"!=d[p])){var e=c._maqDeltas[f]&&c._maqDeltas[f].style;if(e)for(f=0;f<e.length;f++){var m=e[f],q;for(q in m)"display"==q&&(a=m[q],h=!0)}}if(!h){if(d&&"string"==typeof d.undefined)a=d.undefined;else{d=c._maqDeltas&&c._maqDeltas.undefined&&c._maqDeltas.undefined.style;p=!1;if(d)for(f=0;f<d.length;f++)for(q in m=d[f],m)"display"==q&&(a=m[q],p=!0);p||(a=b.get(c,"display"))}p=
"undefined"}if(0==c.offsetLeft&&0==c.offsetTop&&0==c.offsetWidth&&0==c.offsetHeight)a="none";else for(;c&&"BODY"!=c.tagName.toUpperCase();){if(c&&c.ownerDocument&&c.ownerDocument.defaultView&&"none"==b.get(c,"display")){a="none";break}c=c.parentNode}}else a="none";return{effectiveDisplayValue:a,effectiveState:p}},propertyDefinedForAnyCurrentState:function(c,a){var b,f=c._maqDeltas;if(f){c=this.getStateContainersForNode(c);var d=c.length-1;a:for(;0<=d;d--){var p=this.getState(c[d]),h=p&&p!=this.NORMAL?
p:"undefined";if(h=f[h]&&f[h].style)for(var e=0;e<h.length;e++)for(var m=h[e],q=0;q<a.length;q++)if(m.hasOwnProperty(a[q])){b=p;break a}}}return b},_customStateActive:function(c){return c?this.getState(c.rootNode):!1},updateStateIcons:function(c){c&&c.editor&&c.editor==a.currentEditor&&"davinci.ve.PageEditor"==c.editor.declaredClass&&d.withDoc(A,function(){var a=g(".manageStatesButton")[0],b=h.byNode(a),a=g(".manageStatesIcon")[0];b&&a&&(this.manageStatesActive(c)?(e.remove(a,"manageStatesIconDisabled"),
b.set("disabled",!1)):(e.add(a,"manageStatesIconDisabled"),b.set("disabled",!0)));var b=u.getPreferences("davinci.ve.editorPrefs",davinci.Workbench.getProject()).newWidgetsCurrentState,a=g(".newWidgetsCurrentStateButton")[0],f=h.byNode(a),a=g(".newWidgetsCurrentStateIcon")[0];f&&a&&(this.newWidgetsCurrentStateActive(c)?e.remove(a,"newWidgetsCurrentStateIconDisabled"):e.add(a,"newWidgetsCurrentStateIconDisabled"),b?(e.remove(a,"newWidgetsCurrentStateIconOff"),e.add(a,"newWidgetsCurrentStateIconOn"),
f.set("title",z.NewWidgetsCurrentStateTitleCurrentState)):(e.remove(a,"newWidgetsCurrentStateIconOn"),e.add(a,"newWidgetsCurrentStateIconOff"),f.set("title",z.NewWidgetsCurrentStateTitleBackground)))}.bind(this))},manageStatesActive:function(c){return c&&c.getSelection().length},newWidgetsCurrentStateActive:function(c){return this._customStateActive(c)},highlightBaseWidgetsActive:function(c){return this._customStateActive(c)},updateHighlightsBaseStateWidgets:function(c){},initialize:function(){this.subscribed=
!0}});davinci.ve.states=new n;davinci.ve.states.initialize();return davinci.ve.states})},"davinci/maqetta/AppStates":function(){define("dojo/_base/connect dojo/dom-style dojo/dom dojo/_base/html dojo/_base/window dojo/_base/array dojo/parser require dojo/json dojo/_base/lang".split(" "),function(n,k,g,e,b,d,h,a,m,f){k=function(){};k.prototype={NORMAL:"Normal",DELTAS_ATTRIBUTE:"data-maq-deltas",DELTAS_ATTRIBUTE_P6:"dvStates",APPSTATES_ATTRIBUTE:"data-maq-appstates",APPSTATES_ATTRIBUTE_P6:"dvStates",
reImportant:/^(.*)(!\ *important)(.*)/,isStateContainer:function(c){return!(!c||!c._maqAppStates)},getStateContainersForNode:function(c){for(var a=[];c;){c._maqAppStates&&a.splice(0,0,c);if("BODY"==c.tagName)break;c=c.parentNode}return a},getAllStateContainers:function(c){function a(c){c._maqAppStates&&b.push(c);c=f._getChildrenOfNode(c);for(var d=0;d<c.length;d++)a(c[d])}var b=[],f=this;a(c);return b},getStatesArray:function(c,a,b,f){var d=[];if(c)for(c=c.parentNode;c;){if(c._maqAppStates)if(c==
f)d.splice(0,0,{node:c,oldState:a,newState:b});else{var p=c._maqAppStates.states?c._maqAppStates.states.current:void 0;d.splice(0,0,{node:c,oldState:p,newState:p})}if("BODY"==c.tagName)break;c=c.parentNode}return d},findStateContainer:function(c,a){if(c)for(c=c.parentNode;c;){if(c._maqAppStates&&(!a||a==this.NORMAL||c._maqAppStates.states&&0<=c._maqAppStates.states.indexOf(a)))return c;if("BODY"==c.tagName)break;c=c.parentNode}},getAllStatesForNode:function(c){var a=[this.NORMAL];if(c)for(c=c.parentNode;c;){if(c._maqAppStates&&
c._maqAppStates.states)for(var b=c._maqAppStates.states?c._maqAppStates.states:[],f=0;f<b.length;f++)a.push(b[f]);if("BODY"==c.tagName)break;c=c.parentNode}return a},getStatesListCurrent:function(c){var a=[];if(c)for(c=c.parentNode;c;){c._maqAppStates&&a.splice(0,0,c._maqAppStates.current);if("BODY"==c.tagName)break;c=c.parentNode}return a},getAllCurrentStates:function(c){c=this.getAllStateContainers(c);for(var a=[],b=0;b<c.length;b++){var f=c[b],d=this.getState(f);a.push({stateContainerNode:f,state:d})}return a},
getStates:function(c){var a=c&&c._maqAppStates;c=["Normal"];if(a)for(var a=a.states?a.states:[],b=0;b<a.length;b++){var f=a[b];"Normal"!=f&&c.push(f)}return c},_getSCNodeFromElemOrEvent:function(c,a){a&&a.tagName&&a.nodeName?a=a._maqAppStates?a:this.findStateContainer(a,c):a&&a.target&&a.currentTarget?(a=a.currentTarget,a._maqAppStates||(a=this.findStateContainer(a,c))):a=this.getContainer();return a},_updateSrcState:function(c){},hasState:function(c,a){return!!(c&&c._maqAppStates&&c._maqAppStates.states&&
0<=c._maqAppStates.states.indexOf(a))},getState:function(c){return c&&c._maqAppStates&&c._maqAppStates.current},setState:function(c,a,b){var f=b?b.updateWhenCurrent:!1,d=b?b.silent:!1,h=b?b.focus:!1;(a=this._getSCNodeFromElemOrEvent(c,a))&&a._maqAppStates&&(f||a._maqAppStates.current!=c)&&(f=a._maqAppStates.current,this.isNormalState(c)?(a._maqAppStates.hasOwnProperty("current")&&delete a._maqAppStates.current,c=void 0):a._maqAppStates.current=c,h&&this._setFocus(c,a),b&&b.hasOwnProperty("initial")&&
(b.initial?a._maqAppStates.initial=c:a._maqAppStates.initial&&delete a._maqAppStates.initial),d||n.publish("/maqetta/appstates/state/changed",[{node:a,newState:c,oldState:f,stateContainerNode:a}]),this._updateSrcState(a,!c))},getInitial:function(c){return c&&c._maqAppStates&&c._maqAppStates.initial},getFocus:function(c){if(!c)return null;c=this.getAllStateContainers(c);for(var a=0;a<c.length;a++){var b=c[a]._maqAppStates;if(b&&b.hasOwnProperty("focus"))return{stateContainerNode:c[a],state:b.focus}}return null},
_setFocus:function(c,a){if(a&&a._maqAppStates){var b=a.ownerDocument&&a.ownerDocument.body;if(b){var f=this.getFocus(b);if(!f||f.stateContainerNode!=a||f.state!=c){for(var f=this.getAllStateContainers(b),d=0;d<f.length;d++)(b=f[d]._maqAppStates)&&delete b.focus;a._maqAppStates.focus=c}}}},isNormalState:function(c){0==arguments.length&&(c=this.getState());return!c||c==this.NORMAL},_styleArrayMixin:function(c,a){if(a){for(var b=0;b<a.length;b++){var f=a[b],d;for(d in f)for(f=c.length-1;0<=f;f--)c[f].hasOwnProperty(d)&&
c.splice(f,1)}for(b=0;b<a.length;b++)c.push(a[b])}},getStyle:function(c,a,b){for(var f,d=[],h=0;h<a.length;h++)if(f=a[h],f=c&&c._maqDeltas&&c._maqDeltas[f]&&c._maqDeltas[f].style,this._styleArrayMixin(d,f),2<arguments.length&&d)for(f=d.length-1;0<=f;f--){var p=d[f],e;for(e in p)if(e!=b){d.splice(f,1);break}}return d},hasStyle:function(c,a,b){if(c&&b)if(c._maqDeltas&&c._maqDeltas[a]&&c._maqDeltas[a].style)for(c=c._maqDeltas[a].style,a=0;a<c[a];a++){if(c[a].hasProperty(b))return!0}else return!1},setStyle:function(c,
a,b,f){if(c&&b){c._maqDeltas=c._maqDeltas||{};c._maqDeltas[a]=c._maqDeltas[a]||{};c._maqDeltas[a].style=c._maqDeltas[a].style||[];var d=c._maqDeltas[a].style;if(b)for(var h=0;h<b.length;h++){var e=b[h],p;for(p in e)for(e=d.length-1;0<=e;e--){var m=d[e],q;for(q in m)if(p==q){d.splice(e,1);break}}}var g;if(b)for(e=0;e<b.length;e++)for(var u in b[e])h=b[e][u],"undefined"!=typeof h&&null!==h&&("undefined"==typeof g&&(g=[]),p={},p[u]=this._getFormattedValue(u,h),g.push(p));c._maqDeltas[a].style=d&&g?d.concat(g):
d?d:g?g:void 0;f||n.publish("/davinci/states/state/style/changed",[{node:c,state:a,style:b}]);this._updateSrcState(c)}},_convertStyleName:function(c){if(0<=c.indexOf("-")){var a=c.split("-");c=a[0];for(var b=1;b<a.length;b++){var f=a[b];c+=f.charAt(0).toUpperCase()+f.substring(1)}}return c},_DYNAMIC_PROPERTIES:{width:1,height:1,top:1,right:1,bottom:1,left:1},_getFormattedValue:function(c,b){if(c in this._DYNAMIC_PROPERTIES){if("string"!=typeof b)return b+"px";c=a("dojo/_base/lang").trim(b);/^[-+]?[0-9]*\.?[0-9]+$/.test(c)&&
(b=c+"px")}return b},_getStatesListUsingPropName:function(c,a){var b=[];if(c)for(var f=0;f<c.length;f++)b.push(c[f][a]);return b},_resetAndCacheNormalStyle:function(c,a){if(c&&a)for(var b=0;b<a.length;b++){var d=this._getStatesListUsingPropName(a,"oldState"),h=this.getStyle(c,d),d=this._getStatesListUsingPropName(a),d=this.getStyle(c,d);if(h)for(var e=0;e<h.length;e++){var m=h[e],p;for(p in m)m=this._convertStyleName(p),c.style[m]=""}if(d)for(h=0;h<d.length;h++){var e=d[h],q;for(q in e){var m=this._convertStyleName(q),
g=c.style,k=this._getFormattedValue(q,e[q])+"",n=k?k.match(this.reImportant):null;n?(k=n[1]+n[3],k=f.trim(k),g.setProperty?g.setProperty(q,k,"important"):c.style[m]=k):c.style[m]=k}}}},_update:function(c,a){if(c&&c._maqDeltas){var b=this._getStatesListUsingPropName(a,"newState"),b=this.getStyle(c,b);this._resetAndCacheNormalStyle(c,a);if(b)for(a=0;a<b.length;a++){var d=b[a],h;for(h in d){var e=this._convertStyleName(h),m=d[h]+"",p=m?m.match(this.reImportant):null;p?(m=p[1]+p[3],m=f.trim(m),d.setProperty?
d.setProperty(h,m,"important"):c.style[e]=m):c.style[e]=m}}}},isContainer:function(c){var a=!1;if(c){var b=this.getDocument();if(c===(b&&b.body)||"BODY"==c.tagName)a=!0}return a},getContainer:function(){return document.body},add:function(c,a,b){c&&!this.hasState(c,a)&&(b=b&&b.index,c._maqAppStates=c._maqAppStates||{},c._maqAppStates.states=c._maqAppStates.states||[],"number"==typeof b&&0<=b?c._maqAppStates.states.splice(b,0,a):c._maqAppStates.states.push(a),n.publish("/davinci/states/state/added",
[{node:c,state:a}]),this._updateSrcState(c))},remove:function(c,a){if(c&&c._maqAppStates&&c._maqAppStates.states&&this.hasState(c,a)){var b=c._maqAppStates.states.indexOf(a);if(!(0>b)){var f=this.getState(c),d=this.getFocus(c.ownerDocument.body);c._maqAppStates.states.splice(b,1);b={};d&&d.stateContainerNode==c&&d.state==a&&(b.focus=!0,b.updateWhenCurrent=!0);a==f&&this.setState(void 0,c,b);n.publish("/davinci/states/state/removed",[{node:c,state:a}]);this._updateSrcState(c)}}},rename:function(c,
a){if(!a)return!1;var b=a.oldName;a=a.newName;if(!(c&&c._maqAppStates&&c._maqAppStates.states&&c._maqAppStates.states.length))return!1;var f=c._maqAppStates.states;if(0>f.indexOf(b)||0<=f.indexOf(a))return!1;f.splice(f.indexOf(b),1,a);c._maqAppStates.focus===b&&(c._maqAppStates.focus=a);c._maqAppStates.current===b&&(c._maqAppStates.current=a);f=[c];this.getState(c);for(f=f.concat(this._getChildrenOfNode(c));f.length;){var d=f.shift();d._maqDeltas&&d._maqDeltas[b]&&(d._maqDeltas[a]=d._maqDeltas[b],
delete d._maqDeltas[b]);var f=f.concat(this._getChildrenOfNode(d)),h=this.getStatesArray(d,null,a,c);this._update(d,h);this._updateSrcState(d)}n.publish("/davinci/states/state/renamed",[{node:d,oldName:b,newName:a,stateContainerNode:d}]);return!0},_isEmpty:function(c){for(var a in c)if(c.hasOwnProperty(a))return!1;return!0},stringifyWithQuotes:function(c){str=m.stringify(c);str=str.replace(/(\\)?'/g,function(c,a){return a?c:"\\'"});return str=str.replace(/"/g,"'")},serialize:function(c){var b=this,
f=function(f){var d=null;c[f]&&(f=a("dojo/_base/lang").clone(c[f]),delete f.undefined,b._isEmpty(f)||(d=this.stringifyWithQuotes(f)));return d}.bind(this),d={};if(!c)return d;var h=f("_maqAppStates");"string"==typeof h&&(d.maqAppStates=h);f=f("_maqDeltas");"string"==typeof f&&(d.maqDeltas=f);return d},deserialize:function(c,a){"string"==typeof c&&(c=c.replace(/(\\)?'/g,function(c,a){return a?"'":'"'}),c=m.parse(c),this._migrate_m4_m5(c),c=this._migrate_m6_m7(c,a&&a.isBody));return c},_migrate_m4_m5:function(c){for(var a in c){var b=
c[a];if(b){var f=b.style;if(f&&!f.length){var d=[],h;for(h in f){var e={};e[h]=f[h];d.push(e)}b.style=d}}}},_migrate_m6_m7:function(c,a){if(!c||c.states)return c;if(a){a=[];for(var b in c)"current"!=b&&a.push(b);if(0<a.length)return{states:a}}else return delete c.current,c},store:function(c,a,b){if(c){this.clear(c);var f="BODY"==c.tagName;a&&(c._maqAppStates=this.deserialize(a,{isBody:f}));b&&(c._maqDeltas=this.deserialize(b,{isBody:f}));n.publish("/davinci/states/stored",[])}},retrieve:function(c){if(c){var a=
c.getAttribute(this.APPSTATES_ATTRIBUTE);a||"BODY"!==c.tagName||(a=c.getAttribute(this.APPSTATES_ATTRIBUTE_P6));var b=c.getAttribute(this.DELTAS_ATTRIBUTE);b||"BODY"===c.tagName||(b=c.getAttribute(this.DELTAS_ATTRIBUTE_P6));return{maqAppStates:a,maqDeltas:b}}},clear:function(c){c&&(c._maqAppStates&&delete c._maqAppStates,c._maqDeltas&&delete c._maqDeltas)},_parseStyleValues:function(c){var a=[];c&&d.forEach(c.split(";"),function(c){var b=c.indexOf(":");if(0<b){var f=c.substring(0,b).trim();c=c.substring(b+
1).trim();b={};b[f]=c;a.push(b)}});return a},transferElementStyle:function(c,a){c&&(c=c._maqDeltas,a=this._parseStyleValues(a),c.undefined||(c.undefined={}),c.undefined.style=a)},getDocument:function(){return document},shouldInitialize:function(){return!davinci.AppStatesDontInitialize},_getChildrenOfNode:function(c){for(var a=[],b=0;b<c.childNodes.length;b++){var f=c.childNodes[b];1===f.nodeType&&a.push(f)}return a},initialize:function(){this.subscribed||(n.subscribe("/maqetta/appstates/state/changed",
this,function(c){if(!c.editorClass)for(var a=davinci.states._getChildrenOfNode(c.node);a.length;){var b=a.shift();davinci.states.isContainer(b)||(a=a.concat(davinci.states._getChildrenOfNode(b)));var f=this.getStatesArray(b,c.oldState,c.newState,c.stateContainerNode);davinci.states._update(b,f)}}),this.subscribed=!0)}};"undefined"===typeof davinci&&(davinci={});var q=davinci.states=new k;(function(){q.initialize();q.shouldInitialize()&&"undefined"!=typeof a&&a(["dojo/_base/lang","dojo/query","dojo/aspect"],
function(c,f,d){var m=0,p=!1;c=function(c){p||(d.around(c,"parse",function(c){var a={};return function(f,d){var h;h=(h=!d&&f&&f.rootNode?f.rootNode:f)?e.byId(h):b.body();y(a);h=c.apply(this,arguments);var m=q.getDocument(),p,g,u,z,x;for(x in a){var A;if(A="body"==x?m.body:m.querySelectorAll("."+x)[0]){var k="BODY"==A.tagName;p=g=u=z=null;k?p=a[x]:(p=a[x].maqAppStates,g=a[x].maqDeltas);p&&(u=q.deserialize(p,{isBody:k}));g&&(z=q.deserialize(g,{isBody:k}));u&&(u.initial?u.current=u.initial:(u.focus&&
delete u.focus,delete u.current));q.store(A,u,z);g&&davinci.states.transferElementStyle(A,a[x].style)}}x=q.getAllStateContainers(m.body);for(m=0;m<x.length;m++)p=x[m],p._maqAppStates&&"string"==typeof p._maqAppStates.current&&q.setState(p._maqAppStates.current,p,{updateWhenCurrent:!0,focus:p._maqAppStates.focus});return h}}),dojo.parser.parse=c.parse,p=!0)};try{var g=a("dojox/mobile/parser");c.apply(g)}catch(w){}g||c.call(null,h);var y=function(c){var a=q.getDocument();if(!a.body._maqAlreadyPreserved){var b=
davinci.states.retrieve(a.body);b&&b.maqAppStates&&(c.body=b.maqAppStates);a.body._maqAlreadyPreserved=!0}f("*",a).forEach(function(a){var b=a.getAttribute("class");b||(b="");if(!a._maqAlreadyPreserved&&0>b.indexOf("maqTempClass")){a._maqAlreadyPreserved=!0;var f=q.retrieve(a);if("BODY"!=a.tagName&&f&&(f.maqAppStates||f.maqDeltas)){var d="maqTempClass"+m;a.setAttribute("class",b+" "+d);m++;c[d]={};f.maqAppStates&&(c[d].maqAppStates=f.maqAppStates);f.maqDeltas&&(c[d].maqDeltas=f.maqDeltas);a.style?
c[d].style=a.style.cssText:console.error("States.js _preserveStates. No value for node.style.")}}})}})})();davinci.Workbench||"undefined"==typeof dijit||n.subscribe("/maqetta/appstates/state/changed",function(c){var a=c&&c.node&&c.node.ownerDocument&&c.node.ownerDocument.defaultView&&c.node.ownerDocument.defaultView.dijit.byId;a&&(c.newState&&!c.newState.indexOf("_show:")?(c=a(c.newState.substring(6)))&&c.show&&c.show():c.oldState&&!c.oldState.indexOf("_show:")&&(c=a(c.oldState.substring(6)))&&c.hide&&
c.hide())});return k})},"davinci/ve/commands/EventCommand":function(){define(["dojo/_base/declare","davinci/ve/widget"],function(n,k){return n("davinci.ve.commands.EventCommand",null,{name:"EventCommand",constructor:function(g,e){this._oldId=g?g.id:void 0;this._properties=e||{}},setContext:function(g){this._context=g},execute:function(){if(this._oldId&&this._properties){var g=k.byId(this._oldId);this._oldProps=g.properties||{};g.setProperties(this._properties,!0);if(g.isHtmlWidget){var e=g.domNode,
b;for(b in this._properties)this._properties[b]||e.removeAttribute(b)}this._newId=this._oldId;dojo.publish("/davinci/ui/widgetPropertiesChanged",[[g]])}},undo:function(){if(this._newId){var g=k.byId(this._newId),e=g.domNode,b=g._srcElement,d;for(d in this._properties)this._oldProps[d]||(e.removeAttribute(d),b.removeAttribute(d));g.setProperties(this._oldProps);dojo.publish("/davinci/ui/widgetPropertiesChanged",[[g]])}}})})},"davinci/ve/widget":function(){define("davinci/html/HTMLElement ../Runtime ./metadata dojo/Deferred dojo/_base/lang ./DijitWidget ./GenericWidget ./DeliteWidget ./HTMLWidget ./ObjectWidget dojo/window".split(" "),
function(n,k,g,e,b,d,h,a,m,f,q){var c={},p=function(c,a,b){for(var f=0;f<b.children.length;f++){var d=a.childNodes[f],h=b.children[f];d&&1==d.nodeType&&"HTMLElement"==h.elementType&&(d.id=c.getUniqueID(h),p(c,d,h))}},y={_dojo:function(c){c=(c=c?c.ownerDocument||c:dojo.doc)||dojo.doc;return q.get(c).dojo||dojo},_dijit:function(c){return q.get(c?c.ownerDocument||c:dojo.doc).dijit||dijit},parseStyleValues:function(c){var a=[];c&&dojo.forEach(c.split(";"),function(c){var b=c.indexOf(":");if(0<b){var f=
c.substring(0,b).trim();c=c.substring(b+1).trim();b={};b[f]=c;a.push(b)}});return a},retrieveStyleProperty:function(c,a,b){var f=b;c&&dojo.some(c,function(c){if(c.hasOwnProperty(a))return f=c[a],!0});return f},setStyleProperty:function(c,a,b){var f=!1;c&&dojo.some(c,function(c){if(c.hasOwnProperty(a))return c[a]=b,f=!0});if(!f){var d={};d[a]=b;c.push(d)}},getStyleString:function(c){var a="";dojo.forEach(c,function(c){for(var b in c)c[b]&&(a=a+b+":"+c[b]+";")});return a},getEnclosingWidget:function(c){var a=
y.getEnclosingWidgetForRichText(c);if(a)return a;for(;c;){if(c._dvWidget)return c._dvWidget;c=c.parentNode||c.domNode&&c.domNode.parentNode}},getEnclosingWidgetForRichText:function(c){if(c&&c._dvWidget)return"html.stickynote"===c._dvWidget.type||"html.richtext"===c._dvWidget.type?c._dvWidget:c.parentNode?y.getEnclosingWidgetForRichText(c.parentNode):null},getUniqueObjectId:function(c,a){if(c){c=c.substring((c.lastIndexOf("/")||c.lastIndexOf("."))+1);var b=1,f=c+"_"+b++;for(a=y._dojo(a);a.getObject(f)||
a.byId(f);)f=c+"_"+b++;return f}},_remove_prefix:function(c){if(c){for(var a=c,b="dijit/form/ dijit/layout/ dijit/ dojox/mobile/ html. html/ OpenAjax. OpenAjax/".split(" "),f=0;f<b.length;f++)if(0==c.indexOf(b[f])){a=c.substr(b[f].length);"html."==b[f]&&(a="\x26lt;"+a+"\x26gt;");break}return a}return""},_getWidgetNameText:function(c){return"\x3cspan class\x3d'propertiesTitleWidgetName'\x3e"+this._remove_prefix(c)+"\x3c/span\x3e"},_getWidgetNameRaw:function(c){return""+this._remove_prefix(c)},_getWidgetClassText:function(c,
a){var b="\x3cspan class\x3d'propertiesTitleClassName'\x3e";c&&(b+="#"+c);a&&(b+="."+a.replace(/\s+/g,"."));return b+"\x3c/span\x3e"},getLabelForNode:function(c){var a=c.getAttribute("data-dojo-type")||c.getAttribute("dojoType");a||(a=c.tagName.toLowerCase());a=a.replace(/\./g,"/");a=this._getWidgetNameText(a);c.id&&(a+=this._getWidgetClassText(c.id));return a},getLabel:function(c){var a=this._getWidgetNameText(c.type),b,f=y.getWidgetHelper(c.type);f&&f.getWidgetText&&(b=f.getWidgetText(c));f&&f.getWidgetNameText&&
(a=f.getWidgetNameText(c));var d=c.domNode;if(!c.type)return"unknown type";switch(c.type.replace(/\//g,".")){case "dijit.form.ComboBox":case "dijit.form.Button":b=c.attr("label");break;case "dijit.layout.ContentPane":b=c.attr("title");break;case "html.label":b=d.innerHTML;break;case "html.img":b=d.alt,b||(b=d.title)}b&&(a+="\x3cspan class\x3d'propertiesTitleWidgetText'\x3e"+b+"\x3c/span\x3e ");f&&f.getWidgetDescriptor&&(a+=" \x3cspan class\x3d'propertiesTitleWidgetDescriptor'\x3e"+f.getWidgetDescriptor(c)+
"\x3c/span\x3e ");var h=c._srcElement;b=c.getId();h=(h=h&&h.getAttribute("class"))&&h.trim();if(b||h)a=f&&f._getWidgetClassText?a+f._getWidgetClassText(b,h):a+this._getWidgetClassText(b,h);f&&f.getWidgetTextExtra&&(a+=f.getWidgetTextExtra(c));"html.img"==c.type&&(a+="\x3cspan\x3e"+d.src.substr(d.src.lastIndexOf("/")+1)+"\x3c/span\x3e");return a},byId:function(c,a){if(a=dojo.byId(c,a&&a.body?a:void 0)){if(a._dvWidget)return a._dvWidget;if((a=y.getEnclosingWidget(a))&&a.id==c)return a}if(k.currentEditor&&
k.currentEditor.currentEditor&&k.currentEditor.currentEditor.context)return k.currentEditor.currentEditor.context.widgetHash[c]},byNode:function(c){if(c._dvWidget)return c._dvWidget},createWidget:function(c,e,k){if(c&&c.type){var u=dojo.mixin({},c),z=!1;"xblox/RunScript"===u.type&&"xblox/CSSState"===u.type&&(z=!0,delete c.properties.style);u.properties&&(u.properties=dojo.mixin({},c.properties));var A=u.type,v,B,C=g.query(A);if(C){u.properties&&("content"in u.properties&&!u.properties.content&&delete u.properties.content,
u.properties.theme&&(B=u.properties.theme.themeName));k&&k.metadata&&k.metadata.childOverride&&b.mixin(u.properties,k.metadata.childOverride);c=g.queryDescriptor(A,"widgetClass");!c&&e&&e.widgetClass&&(c=e.widgetClass);if(!0===C.delite||"xblox/RunScript"===A||"xblox/CSSState"===A||"xblox/Script"===A||"xblox/StyleSate"===A)c="delite";"delite"==c?v=a:"object"==c?(v=f,C.attributes=C.attributes||{},C.attributes.dojoType=A):"html"==c?v=m:"dijit"==c?v=d:null==v&&(v=h);if(v){c=C.content.trim().replace(/\s+/g,
" ");q.get(dojo.doc);var F=q.get(dojo.doc).dojo._toDom(c);F.fromWidgetData&&F.fromWidgetData(u);if(11===F.nodeType){k=0;var E=null;c=F.childNodes;for(var D=0;D<c.length&&!(8!==c[D].nodeType&&(k++,E=c[D],1<k));D++);if(1<k){console.error("ERROR: complex widget content not supported");return}F=E}if(!F)return null;var G=new n(F.tagName.toLowerCase());if(F.hasAttributes())for(c=F.attributes,k=c.length-1;0<=k;--k)z&&"style"===c[k].name||G.addAttribute(c[k].name,c[k].value);F.innerHTML&&G.addText(F.innerHTML);
z=g.queryDescriptor(A,"requiresId");c=g.queryDescriptor(A,"name");z=z&&c.match(/^[A-Za-z]\w*$/)?c:void 0;F.id=u.properties&&u.properties.id||(u.context?u.context.getUniqueID(G,z):"");if(c=u.children)dojo.isString(c)?(F.innerHTML=c,F.nodeName.toLowerCase(),z=G._getAttribute("id"),G.addText(c),c=G.getText(u.context),G.children=[],G.setText(c),z&&G.addAttribute(z.name,z.value,z.noPersist),p(u.context,F,G)):dojo.forEach(c,function(c){if(c)if(dojo.isString(c))7<c.length&&"\x3c!--"==c.substring(0,4)&&"--\x3e"==
c.substring(c.length-3)?(F.appendChild(dojo.doc.createComment(c.substring(4,c.length-3))),G.addComment(c.substring(4,c.length-3))):(F.appendChild(dojo.doc.createTextNode(c)),G.addText(c));else if(c.context=u.context,c=y.createWidget(c))F.appendChild(c.domNode),G.addChild(c._srcElement)});(z=y.getWidgetHelper(A))&&z.preProcessData&&(u=z.preProcessData(u));z={};c={};for(var M in u.properties)k=u.properties[M],null!=k&&("on"==M.substr(0,2).toLowerCase()||"a"==G.tag.toLowerCase()&&"href"==M.toLowerCase()?
c[M]=k:z[M]=k);C=new v(z,F,A,C,G,A);C._srcElement=G;C.chart&&u.properties&&u.properties.theme&&(C.chart.theme.themeName=B);u.scripts&&(C.scripts=u.scripts);u.context&&(C._edit_context=u.context);u.properties&&(C.setProperties(z),C.setProperties(c,!0));if(u.maqAppStates||u.maqDeltas)u.maqAppStates&&(C.domNode._maqAppStates=dojo.clone(u.maqAppStates)),u.maqDeltas&&(C.domNode._maqDeltas=dojo.clone(u.maqDeltas)),B=davinci.states.serialize(C.domNode),B.maqAppStates&&C._srcElement.addAttribute(davinci.states.APPSTATES_ATTRIBUTE,
B.maqAppStates),B.maqDeltas&&C._srcElement.addAttribute(davinci.states.DELTAS_ATTRIBUTE,B.maqDeltas);(z=y.getWidgetHelper(A))&&z.cleanSrcElement&&z.cleanSrcElement(C._srcElement,e);z&&z.postCreateWidget&&z.postCreateWidget(C,e);return C}}else console.error("cant get widget meta data : ",c)}},_createSrcElement:function(c){var a=new n(c.tagName.toLowerCase());if(c.hasAttributes()){c=c.attributes;for(var b=c.length-1;0<=b;--b)a.addAttribute(c[b].name,c[b].value)}return a},getWidgetHelper:function(a){return c[a]},
requireWidgetHelper:function(a){var b=new e;g.getHelper(a,"helper").then(function(f){f?b.resolve(c[a]=new f):b.resolve()});return b},getWidget:function(c,b){if(c&&1==c.nodeType){var e=y.byNode(c);if(!e){if(c){for(var e={properties:{}},q=0;q<c.attributes.length;q++){var p=c.attributes[q];if(p.specified&&p.nodeValue){var g=p.nodeName.toLowerCase();if("id"!=g&&"widgetid"!=g&&"style"!=g&&"_"!=g.charAt(0)){if((p=p.nodeValue)&&"class"==g&&(p=p.replace("HtmlWidget","").trim(),!p))continue;e.properties[g]=
p}}}"script"==c.tagName.toLowerCase()&&(e.children=c.innerHTML||void 0)}else e=void 0;if(e.properties.is||null!=c.render||-1!==c.tagName.indexOf("D-"))return e=new a(e,c);q=c.getAttribute("dvwidget");if(c.hasAttribute("widgetid")||c.hasAttribute("data-dojo-type")||c.hasAttribute("dojotype"))b=y._dijit(c).byNode(c),q=c.getAttribute("data-dojo-type")||c.getAttribute("dojotype"),e=b?new d(e,c,b,null,null,q):new f(e,c);else if(q)e=new h(e,c,q);else{if("svg"==c.nodeName)return;e=new m(e,c,b)}}return e}}};
dojo.setObject("davinci.ve.widget",y);return y})},"davinci/html/HTMLElement":function(){define(["dojo/_base/declare","davinci/html/HTMLItem","davinci/html/HTMLText","davinci/html/HTMLComment","davinci/html/HTMLAttribute"],function(n,k,g,e,b){return n("davinci.html.HTMLElement",k,{constructor:function(b){this.elementType="HTMLElement";this.attributes=[];this.tag=b||"";this._fmChildIndent=this._fmChildLine=0},add:function(b){this.statements||(this.statements=[]);this.statements.push(b);this.onChange()},
getText:function(b){b=b||{};var d;b.indent+=2;d="\x3c"+this.tag;for(var a=0;a<this.attributes.length;a++){var e=this.attributes[a].getText(b);0<e.length&&(d=d+" "+e)}if(this.noEndTag)d+="/\x3e";else{d=d+"\x3e"+this._addWS(this._fmChildLine,this._fmChildIndent);if(this.statements)for(a=0;a<this.statements.length;a++)d+=this.statements[a].printStatement(b,this.statements[a]);else if(this.script)d+=this.script;else if(0<this.children.length)for(e="style"==this.tag,a=0;a<this.children.length;a++)if(d+=
this.children[a].getText(b),e){var f=this._fmChildLine,q=this._fmChildIndent||0;a+1==this.children.length&&(f=this._fmLine,q=this._fmIndent);d+=this._addWS(f,q)}d=d+"\x3c/"+this.tag+"\x3e"}b.indent-=2;return d+=this._addWS(this._fmLine,this._fmIndent)},_formatModel:function(b,h,a){function d(c,b,f){e+=1+c;b?(b._fmChildLine=1,b._fmChildIndent=a.indent):(f._fmLine=1,f._fmIndent=a.indent)}function f(c,a){c.startOffset=e;c.wasParsed=!0;e+=c.tag.length+2;for(var b=0;b<c.attributes.length;b++){c.attributes[b].startOffset=
e;var h=c.attributes[b].getText(a);0<h.length&&(e+=1+h.length);c.attributes[b].endOffset=e-1}c.noEndTag&&e++;c.startTagOffset=e;h="";if(c.statements)for(b=0;b<c.statements.length;b++)h+=c.statements[b].printStatement(a,c.statements[b]);else c.script&&(h=c.script);if(h)e+=h.length;else if(0<c.children.length){var m;davinci.html._noFormatElements[c.tag]||(a.indent+=2,d(a.indent,c),m=!0);for(var q,b=0;b<c.children.length;b++){h=c.children[b];switch(h.elementType){case "HTMLElement":q&&"HTMLText"!=q.elementType&&
!davinci.html._noFormatElements[h.tag]&&d(a.indent,null,q);f(h,a);break;case "HTMLText":h.startOffset=e;e+=h.value.length;break;case "HTMLComment":h.startOffset=e,e+=h.value.length,e++,h.isProcessingInstruction&&(e+=2)}q=h}m&&(a.indent-=2);q&&"HTMLText"!=q.elementType&&d(a.indent,null,q)}e+=c.tag.length+3;c.endOffset=e-1}var e=0;void 0==h&&(h=this.children.length);var c,p;this.children.length&&0!=h?(p=this.children[h-1],e=p.endOffset+1):(c=this,e=this.startTagOffset+1);var g=e;davinci.html._noFormatElements[b.tag]||
(d(a.indent,c,p),b._fmLine=1,b._fmIndent=h<this.children.length?a.indent:a.indent-2);f(b,a);return e>g?e-g:0},getElementText:function(b){b=b||{};var d="";if(0<this.children.length)for(var a=0;a<this.children.length;a++)"HTMLComment"!=this.children[a].elementType&&(d+=this.children[a].getText(b));else{if(this.script)return this.script;if(this.statements)for(a=0;a<this.statements.length;a++)d+=this.statements[a].printStatement(b,this.statements[a])}return d},getChildElements:function(b,h,a){a=a||[];
for(var d=0;d<this.children.length;d++)this.children[d].tag==b&&a.push(this.children[d]),h&&"HTMLElement"==this.children[d].elementType&&this.children[d].getChildElements(b,h,a);return a},getChildElement:function(b){for(var d=0;d<this.children.length;d++)if(this.children[d].tag==b)return this.children[d]},hasAttribute:function(b){for(var d=0;d<this.attributes.length;d++)if(this.attributes[d].name==b)return!0;return!1},getAttribute:function(b){if(b=this._getAttribute(b))return b.value},_getAttribute:function(b){for(var d=
0;d<this.attributes.length;d++)if(this.attributes[d].name==b)return this.attributes[d]},addText:function(b){this.addChild(new g(b));this.onChange()},addComment:function(b){this.addChild(new e(b));this.onChange()},getLabel:function(){return"\x3c"+this.tag+"\x3e"},addAttribute:function(d,h,a){if("textContent"==d)this.children=[],this.addText(h);else{var e,f=0<this.attributes.length?this.attributes[this.attributes.length-1].endOffset+1:this.startTagOffset-(this.noEndTag?2:1),q=this._getAttribute(d),
c;q?e=h.length-q.value.length:(q=new b,c=!0,e=d.length+h.length+4,q.startOffset=f,q.endOffset=f+e-1);q.name=d;q.setValue(h);q.noPersist=a;this.wasParsed&&!a&&0<e&&this.getHTMLFile().updatePositions(f,e);c&&this.attributes.push(q);this.onChange()}},removeAttribute:function(b){this.attributes.every(function(d,a,e){return d.name===b?(e.splice(a,1),a=this.getHTMLFile(),!d.noPersist&&a&&(e=d.getText(),a.updatePositions(d.startOffest,0-(e.length+1))),!1):!0},this);this.onChange()},setAttribute:function(b,
e){this.removeAttribute(b);this.addAttribute(b,e)},getUniqueID:function(b){if(!this.getAttribute("id")){var d=this.getHTMLFile();d.uniqueIDs||(d.uniqueIDs={});d=d.uniqueIDs.hasOwnProperty(this.tag)?++d.uniqueIDs[this.tag]:d.uniqueIDs[this.tag]=0;this.addAttribute("id",this.tag+"_"+d,b)}},findElement:function(b){var d=this.getAttribute("id");if(b==d)return this;for(d=0;d<this.children.length;d++)if("HTMLElement"==this.children[d].elementType){var a=this.children[d].findElement(b);if(a)return a}},insertBefore:function(b,
e){e=dojo.indexOf(this.children,e);0>e&&(e=void 0);this.addChild(b,e);this.onChange()},addChild:function(b,e,a){if(!a&&this.wasParsed)if("HTMLElement"==b.elementType){var d=this._getIndent(),f;e<this.children.length&&"HTMLElement"==this.children[e].elementType?f=this.children[e]._getIndent():this.children.length?dojo.forEach(this.children,function(c){"HTMLElement"==c.elementType&&(f=c._getIndent())}):f=d+1;d=this._formatModel(b,e,{indent:f});this.getHTMLFile().updatePositions(b.startOffset,d)}else if("HTMLText"==
b.elementType||"CSS"==b.elementType.substring(0,3)){var d=b.getText(),h=this.children.length?this.children[this.children.length-1].endOffset:this.startTagOffset,c=d.length;0<c&&("HTMLText"!=b.elementType&&(c+=this._fmChildIndent+1),this.getHTMLFile().updatePositions(h+1,c));b.startOffset=h+1;b.endOffset=b.startOffset+d.length-1}k.prototype.addChild.apply(this,arguments)},removeChild:function(b){var d=dojo.indexOf(this.children,b);if(0<=d){var a=1+b.endOffset-b.startOffset;if("HTMLElement"==b.elementType)if(1==
this.children.length)a+=1*this._fmChildLine+this._fmChildIndent,this._fmChildIndent-=2;else{if(0<d&&"HTMLElement"==this.children[d-1].elementType)var e=this.children[d-1],a=a+(1*e._fmLine+e._fmIndent);d+1==this.children.length&&"HTMLElement"==this.children[d-1].elementType&&(this.children[d-1]._fmChildIndent-=2)}0<a&&this.wasParsed&&this.getHTMLFile().updatePositions(b.startOffset,0-a)}k.prototype.removeChild.apply(this,arguments)},_textModify:function(b,e){b=b.length-e.length;0!=b&&this.wasParsed&&
this.getHTMLFile().updatePositions(this.startOffset,b)},setScript:function(b){this._textModify(b,this.script);this.script=b},_previous:function(){var b=dojo.indexOf(this.parent.children,this);if(0<b)return this.parent.children[b-1]},_getIndent:function(){var b=this._previous();return b?" HTMLText"==b.elementType?(b=b.value.split("\n"),b[b.length-1].length):b._fmIndent:this.parent._fmChildIndent},visit:function(b){if(!b.visit(this)){for(var d=0;d<this.attributes.length;d++)this.attributes[d].visit(b);
for(d=0;d<this.children.length;d++)this.children[d].visit(b)}b.endVisit&&b.endVisit(this)},setText:function(b){this.script="";var d=this.parent;this.errors=require("davinci/html/HTMLParser").parse(b,this).errors;dojo.mixin(this,this.children[0]);this.parent=d;this.visit({visit:function(a){delete a.wasParsed},rules:[]});this.onChange()}})})},"davinci/html/HTMLItem":function(){define(["dojo/_base/declare","davinci/html/HTMLModel"],function(n,k){return n("davinci.html.HTMLItem",k,{constructor:function(){this.elementType=
"HTMLItem"},getLabel:function(){return this.getText({indent:0})},onChange:function(g){if(this.parent&&g)this.parent.onChange(g)},_addWS:function(g,e){g=g||0;e=e||0;for(var b=[],d=0;d<g;d++)b.push("\n");b.push("                                          ".substring(0,e));return b.join("")},close:function(){for(var g=0;g<this.children.length;g++)this.children[g].close()},getID:function(){return this.parent.getID()+":"+this.startOffset+":"+this.getLabel()},getHTMLFile:function(){for(var g=this;g&&"HTMLFile"!=
g.elementType;)g=g.parent;return g}})})},"davinci/html/HTMLModel":function(){define(["dojo/_base/declare","davinci/model/Model"],function(n,k){davinci.html||(davinci.html={});davinci.html._noFormatElements={span:!0,b:!0,it:!0};davinci.html.escapeXml=function(g){return g?g.replace(/&/g,"\x26amp;").replace(/</g,"\x26lt;").replace(/>/g,"\x26gt;").replace(/"/g,"\x26quot;"):g};davinci.html.unEscapeXml=function(g){return g&&"string"===typeof g?g.replace(/&quot;/g,'"').replace(/&gt;/g,"\x3e").replace(/&lt;/g,
"\x3c").replace(/&amp;/g,"\x26"):g};return n("davinci.html.HTMLModel",k,{})})},"davinci/model/Model":function(){define(["dojo/_base/declare"],function(n){return n("davinci.model.Model",null,{constructor:function(){this.name=this.elementType="";this.endOffset=this.startOffset=0;this.parent=null;this.children=[]},inherits:function(k){1<arguments.length?k.apply(this,Array.prototype.slice.call(arguments,1)):k.call(this)},getText:function(){},setText:function(k){},addChild:function(k,g,e){k.parent=this;
void 0!=g?this.children.splice(g,0,k):this.children.push(k)},setStart:function(k){this.startOffset=k},setEnd:function(k){this.endOffset=k},getLabel:function(){return null},getID:function(){return null},mapPositions:function(k){return{startOffset:k.startOffset,endOffset:k.endOffset}},findChildAtPosition:function(k){k.endOffset||(k.endOffset=k.startOffset);if(k.startOffset>=this.startOffset&&k.endOffset<=this.endOffset){for(var g=0;g<this.children.length;g++){var e=this.children[g].findChildAtPosition(k);
if(null!=e)return e}return this}return null},removeChild:function(k){for(var g=0;g<this.children.length;g++)if(this.children[g]==k){this.children.splice(g,1);break}},find:function(k,g){var e={visit:function(b){if(0<this.found.length&&g)return!0;var d=null;for(d in k)if(b[d]!=k[d])break;b[d]==k[d]&&this.found.push(b);return!1},found:[]};this.visit(e);return g?0<e.found.length?e.found[0]:null:e.found},setDirty:function(k){this.dirtyResource=k},isDirty:function(){return this.dirtyResource},searchUp:function(k){if(this.elementType==
k)return this;for(var g=this.parent;g&&g.elementType!=k;)g=g.parent;return g},visit:function(k){if(!k.visit(this))for(var g=0;g<this.children.length;g++)this.children[g].visit(k);k.endVisit&&k.endVisit(this)},updatePositions:function(k,g,e){visitor={visit:function(b){if(b.endOffset<g)return!0;b.startOffset>=g?(b.startOffset+=e,b.endOffset+=e):b.endOffset>=g&&(b.endOffset+=e)}};k.visit(visitor)}})})},"davinci/html/HTMLText":function(){define(["dojo/_base/declare","davinci/html/HTMLItem"],function(n,
k){return n("davinci.html.HTMLText",k,{constructor:function(g){this.elementType="HTMLText";this.value=g||""},getText:function(g){return this.value},setText:function(g){if(this.wasParsed||this.parent&&this.parent.wasParsed){var e=g.length-this.value.length;0<e&&this.getHTMLFile().updatePositions(this.startOffset+1,e)}this.value=g},getLabel:function(){return 15>this.value.length?this.value:this.value.substring(0,15)+"..."}})})},"davinci/html/HTMLComment":function(){define(["dojo/_base/declare","davinci/html/HTMLItem"],
function(n,k){return n("davinci.html.HTMLComment",k,{constructor:function(g){this.elementType="HTMLComment";this.value=g||""},getText:function(g){g=this.isProcessingInstruction?"":"--";return"\x3c!"+g+this.value+g+"\x3e"}})})},"davinci/html/HTMLAttribute":function(){define(["dojo/_base/declare","davinci/html/HTMLItem"],function(n,k){return n("davinci.html.HTMLAttribute",k,{constructor:function(){this.elementType="HTMLAttribute";this.value=this.name=""},getText:function(g){if(this.noPersist&&!g.includeNoPersist)return"";
g=this.name;({checked:1,selected:1,disabled:1,readonly:1,multiple:1,ismap:1,autofocus:1,autoplay:1,controls:1,formnovalidate:1,loop:1,muted:1,required:1})[this.name.toLowerCase()]?g=this.value&&"false"!==this.value?g+('\x3d"'+this.value+'"'):"":this.noValue||(g=g+'\x3d"'+davinci.html.escapeXml(String(this.value))+'"');return g},setValue:function(g){this.value=davinci.html.unEscapeXml(g);this.onChange()}})})},"davinci/ve/DijitWidget":function(){define("require dojo/_base/declare dojo/_base/window dojo/_base/lang dojo/dom-attr dojo/parser ./_Widget ./metadata".split(" "),
function(n,k,g,e,b,d,h,a){return k("davinci.ve.DijitWidget",h,{isDijitWidget:!0,constructor:function(a,f,d,c,e,h){if("string"===typeof d){b.get(f,"data-dojo-type")||b.get(f,"dojoType")||b.set(f,"data-dojo-type",d);e&&e.addAttribute("data-dojo-type",d);d=f.ownerDocument;e=d.defaultView;(c=d.__DijitWidgetScratchSpace)||(c=d.__DijitWidgetScratchSpace=d.createElement("div"));c.appendChild(f);d=e.require("dojo/parser").instantiate([f],a,{noStart:!0})[0];c.firstChild&&c.removeChild(c.firstChild);if(this.domNode=
d.domNode)d.domNode._dvWidget=this;this.isLayoutContainer=d.isLayoutContainer}else this.type=h?h.replace(/\./g,"/"):d.declaredClass.replace(/\./g,"/");a=davinci.ve.metadata.getAllowedChild(this.type);this.acceptsHTMLChildren="ANY"===a[0]||-1!==a.toString().toUpperCase().indexOf("HTML");this.dijitWidget=d;this.containerNode=d.containerNode;this.styleNode=d.styleNode;this.id=d.id},getParent:function(){if(this.dijitWidget&&this.dijitWidget.domNode&&this.dijitWidget.domNode.parentNode){var a=n("davinci/ve/widget"),
b=this.dijitWidget;do b=a.getEnclosingWidget(b.domNode.parentNode);while(b&&b.dijitWidget&&"_"==b.dijitWidget.declaredClass.split(".").pop().charAt(0));return b}},_getChildren:function(a){if(this.acceptsHTMLChildren)return this.inherited(arguments);var b=[];"NONE"!==davinci.ve.metadata.getAllowedChild(this.type)[0]&&(this.dijitWidget.getChildren(),this.dijitWidget.getChildren().forEach(function(f){f._maqNotDVWidget||(a?b.push(n("davinci/ve/widget").getWidget(f.domNode)):(f=f.domNode&&f.domNode._dvWidget)&&
b.push(f))}));return b},_getContainerNode:function(){return this.containerNode||this.domNode},selectChild:function(a){this.dijitWidget.selectChild&&this.dijitWidget.selectChild(a.dijitWidget)},_addChildToDom:function(a,b){if(this.acceptsHTMLChildren){this.inherited(arguments);var f=a.dijitWidget;f&&this.dijitWidget._started&&!f._started&&a.startup()}else a.dijitWidget&&this.dijitWidget.addChild?this.dijitWidget.addChild(a.dijitWidget,b):("xblox/RunScript"===a.type&&a.getHelper()&&a.getHelper().addChildToDom&&
a.getHelper().addChildToDom(this.dijitWidget,a,b),this.inherited(arguments))},_removeChildFromDom:function(a){this.dijitWidget.removeChild&&a.dijitWidget?this.dijitWidget.removeChild(a.dijitWidget):this.inherited(arguments)},_getPropertyValue:function(a){return this.dijitWidget.get(a)},startup:function(){this.dijitWidget.startup()},isLayout:function(){var a=this.getContext().getDijit();return a.layout?this.dijitWidget.isInstanceOf(a.layout._LayoutWidget):!1},resize:function(){var a=this.getHelper();
a&&a.resize?a.resize(this):this.dijitWidget.resize&&this.dijitWidget.resize()},renderWidget:function(){if(this.dijitWidget.render)this.dijitWidget.render();else if(this.dijitWidget.chart){var a=dojo.marginBox(this.dijitWidget.domNode);this.dijitWidget.resize(a)}this.domNode.parentNode._dvWidget&&this.domNode.parentNode._dvWidget.isDijitWidget&&this._refresh(this.domNode.parentNode)},_refresh:function(a){var b=a.parentNode;b._dvWidget&&b._dvWidget.isDijitWidget?this._refresh(b):a._dvWidget.resize&&
a._dvWidget.resize()},_attr:function(a,b){return this.dijitWidget.get.apply(this.dijitWidget,arguments)}})})},"davinci/ve/_Widget":function(){define("davinci/ve/_Widget","dojo/_base/declare ./metadata ../html/CSSModel dojox/html/entities davinci/ve/utils/StyleArray davinci/ve/utils/GeomUtils xide/mixins/EventedMixin xide/mixins/ReloadMixin".split(" "),function(n,k,g,e,b,d,h,a){var m=function(a,b,c){if(a==b)return!0;if(!a||!b||a.length!=b.length)return!1;for(var f=0;f<a.length;f++)if(c){if(!c(a[f],
b[f]))return!1}else if(a[f]!=b[f])return!1;return!0};return n("davinci.ve._Widget",[h,a],{isWidget:!0,acceptsHTMLChildren:!1,_skipAttrs:"id style class dir lang _children".split(" "),constructor:function(a,b,c,d){this.domNode=b;this.id=b.id;b._dvWidget=this;this._params=dojo.mixin({},a);this.type=c;this.metadata=d},postscript:function(){var a;if(this.domNode){var b=this.domNode.ownerDocument;b.body._edit_context?a=b.body._edit_context:b.body._dvWidget&&b.body._dvWidget._edit_context&&(a=b.body._dvWidget._edit_context)}this.id&&
a&&(a.widgetHash[this.id]=this);this.buildRendering();this.postCreate()},buildRendering:function(){},postCreate:function(){},getObjectType:function(){},getContext:function(){return this._edit_context},getChildren:function(a){var b=this.getHelper();return b&&b.getChildren?b.getChildren(this,a):this._getChildren(a)},indexOf:function(a){var b=this.getHelper();return b&&b.indexOf?b.indexOf(this,a):dojo.indexOf(this.getChildren(),a)},_getChildrenForTree:function(a){a=this.getContainerNode();var b=[];a&&
!a.children.length&&this.domNode.children.length&&(a=this.domNode);a&&dojo.forEach(a.children,function(c){c=dijit.registry.getEnclosingWidget(c);c!=this&&b.push(c)});return b},_getChildren:function(a){var b=this.getContainerNode(),c=[];b&&dojo.forEach(b.children,function(b){a?c.push(require("davinci/ve/widget").getWidget(b)):(b=b._dvWidget)&&c.push(b)});return c},getContainerNode:function(){var a=this.getHelper();return a&&a.getContainerNode?a.getContainerNode(this):"NONE"!==k.getAllowedChild(this.type)[0]?
this._getContainerNode():null},_getContainerNode:function(){return this.domNode},getMetadata:function(){this.metadata||(this.metadata=k.query(this));return this.metadata},getHelper:function(){this._edit_helper||(this._edit_helper=require("davinci/ve/widget").getWidgetHelper(this.type));return this._edit_helper},attr:function(a,b){var c=this._attr.apply(this,arguments);if(1<arguments.length)b=this._stringValue(a,b),this._srcElement.addAttribute(a,b);else return c},_attr:function(a,b){},indexOf:function(a){var b=
this.getHelper();return b&&b.indexOf?b.indexOf(this,a):dojo.indexOf(this.getChildren(),a)},getStyleNode:function(){return this.styleNode||this.domNode},addChild:function(a,b){if(this.getContainerNode()){if(void 0===b||null===b||-1===b)this._srcElement.addChild(a._srcElement);else{var c=this.getChildren();b<c.length?this._srcElement.insertBefore(a._srcElement,c[b]._srcElement):this._srcElement.addChild(a._srcElement)}(c=this.getHelper())&&c.addChild?c.addChild(this,a,b):this._addChildToDom.apply(this,
arguments)}},_addChildToDom:function(a,b){try{var c=a.domNode,f=this.getContainerNode();if(void 0===b||null===b||-1===b)f.appendChild(c);else{var d=this.getChildren();b<d.length?f.insertBefore(c,d[b].domNode):f.appendChild(c)}}catch(u){debugger}},getParent:function(){return require("davinci/ve/widget").getEnclosingWidget(this.domNode.parentNode)||this.domNode.parentNode},getObjectId:function(a){a=a||this;var b=a._edit_object_id;if(b)return b;if(a.domNode)return a.domNode.getAttribute("jsId")},addClass:function(a){var b=
this.getClassNames(),b=b?b.split(/\s+/):[];-1===b.indexOf(a)&&(b.push(a),this._srcElement.setAttribute("class",b.join(" ")),dojo.addClass(this.domNode,a))},getId:function(){if(!this.id){if(!this.domNode.id||!this.type)return;var a=this.domNode.id,b=(this.isHtmlWidget?this.getTagName():this.type).replace(/\./g,"_")+"_";if(a.length>b.length&&a.substring(0,b.length)==b)return}if(!(this._srcElement&&this._srcElement._getAttribute("id")&&this._srcElement._getAttribute("id").noPersist))return this.id},
setMarginBox:function(a){var b=this.getStyleNode();b&&(dojo.marginBox(b,a),this._updateSrcStyle())},getMarginBox:function(){var a=this.domNode,b=null,b=(b=this.getHelper())&&b.getMarginBoxPageCoords?b.getMarginBoxPageCoords(this):d.getMarginBoxPageCoords(a);b.l-=d.getScrollLeft(a);b.t-=d.getScrollTop(a);b.x=b.l;b.y=b.t;return b},getStyle:function(a){return(a=this.getStyleValues(a))?this._styleText(a):""},_sortStyleValues:function(a){a=dojo.clone(a);for(var b=g.shorthand,c=0,f=0;f<b.length;f++){var d;
a:{d=b[f][0];for(var e=0;e<a.length;e++)if(a[e]&&a[e].hasOwnProperty(d)){d=e;break a}d=-1}-1<d&&(e=a[d],a.splice(d,1),a.splice(c,0,e),c++)}return a},_styleText:function(a){var b="";if(dojo.isArray(a)){a=davinci.ve.states.normalizeArray("style",this.domNode,f,a);for(var c=0;c<a.length;c++)for(var f in a[c])value=a[c][f],void 0!==value&&""!=value&&null!=value&&(b+=f+": "+a[c][f]+"; ")}else for(f in a)value=davinci.ve.states.normalize("style",this.domNode,f,a[f]),void 0!==value&&""!=value&&null!=value&&
(b+=f+": "+a[f]+"; ");return b.trim()},getChildrenData:function(a){a=a||{identify:!0};var b=this.getHelper();return b&&b.getChildrenData?b.getChildrenData.apply(b,[this,a]):this._getChildrenData(a)},_getChildrenData:function(a){return this.getChildren().map(function(b){return b.getData(a)})},getClassNames:function(){return this._srcElement.getAttribute("class")||""},_getData:function(a){var b={type:this.type,properties:{}},c=require("davinci/ve/widget");if(a.identify){this._srcElement||(this._srcElement=
c._createSrcElement(this.domNode));var f=this._srcElement._getAttribute("id");f&&f.noPersist&&(b.properties.isTempID=!0);b.properties.id=this.id}!1!==a.preserveTagName&&this.id&&(b.tagName=this._srcElement.tag);f=k.query(this,"property");this.domNode&&this.domNode.parentNode&&(c=c.getEnclosingWidget(this.domNode.parentNode),(c=k.query(c,"childProperties"))&&(f=f?dojo.mixin({},f,c):c));if(f)for(var d in f)if(-1===this._skipAttrs.indexOf(d.toLowerCase())){var c=f[d],e=this.getPropertyValue(d);e&&e.length?
"array"==c.datatype?m(e,c.defaultValue)||(b.properties[d]=e):e!=c.defaultValue&&(b.properties[d]=e):"boolean"!=c.datatype&&"number"!=c.datatype||e==c.defaultValue?c.datatype&&(0==c.datatype.indexOf("dijit")||"object"==c.datatype&&c.isData)&&(b.properties[d]=e):b.properties[d]=e}b.properties.style=this.getStyle(a);(d=this.getClassNames(a))&&(b.properties["class"]=d);b.children=this.getChildrenData(a);b.type.indexOf("delite");return b},getData:function(a){a=a||{identify:!0,preserveStates:!0};var b=
this.getHelper();a=b&&b.getData?b.getData.apply(b,[this,a]):this._getData(a);a.maqAppStates=dojo.clone(this.domNode._maqAppStates);a.maqDeltas=dojo.clone(this.domNode._maqDeltas);a.properties||(a.properties={});if(this.properties)for(var c in this.properties)c in a.properties||(a.properties[c]=this.properties[c]);c=this._srcElement;for(var b=c.attributes,f=0;f<b.length;f++){var d=b[f];"on"==d.name.substr(0,2).toLowerCase()?a.properties[d.name]=d.value:"a"==c.tag.toLowerCase()&&"href"==d.name.toLowerCase()&&
(a.properties[d.name]=d.value)}return a},getPropertyValue:function(a){if("id"===a)return this.getId();if("jsId"===a)return this.getObjectId();var b=this.getHelper();return b&&b.getPropertyValue?b.getPropertyValue(this,a):this._getPropertyValue(a)},_getPropertyValue:function(a){return this.domNode.getAttribute(a)},getTagName:function(){return this.domNode.nodeName.toLowerCase()},getStyleValues:function(){function a(c){for(var a=d.length-1;0<=a;a--)void 0!==d[a][c]&&d.splice(a,1)}var b=this.getStyleNode().style,
c=this._srcElement.getAttribute("style"),d=require("davinci/ve/widget").parseStyleValues(c),c=this.getParent();b&&c&&c.dijitWidget&&c.dijitWidget.addChild&&!c.acceptsHTMLChildren&&(a("position"),a("left"),a("top"));return d},getStyleValuesAllStates:function(){var a=this.getStyleValues(),d={undefined:a},c=this.domNode._maqDeltas;if(c)for(var e in c)c[e].style&&(d[e]="undefined"==e?b.mergeStyleArrays(a,c[e].style):c[e].style);return d},_updateSrcStyle:function(){var a=this.getStyle();a.length?this._srcElement.addAttribute("style",
a):this._srcElement.removeAttribute("style")},_getStyleString:function(a){if(!a)return"";a=this._sortStyleValues(a);return this._styleText(a)},setStyleValuesCanvas:function(a){if(a){a=this._getStyleString(a);var b=this.getStyleNode();dojo.attr(b,"style",a);this.dijitWidget&&(this.dijitWidget.style=a)}},setStyleValuesModel:function(a){a=this._getStyleString(a);0<a.length?this._srcElement.addAttribute("style",a):this._srcElement.removeAttribute("style")},setStyleValuesAllStates:function(a){this.domNode._maqDeltas=
void 0;if(a)for(var b in a){var c=a[b];"undefined"===b&&(b=void 0);davinci.ve.states.setStyle(this.domNode,b,c,!0)}},isLayout:function(){return!1},resize:function(){},refresh:function(){var a=this.getParent();a&&a.dijitWidget?a.refresh():this.resize&&this.resize()},removeChild:function(a){this._srcElement?this._srcElement.removeChild(a._srcElement):console.error("cant remove child! this._srcElement is null",this);var b=this.getHelper();b&&b.removeChild?b.removeChild(this,a):this._removeChildFromDom.apply(this,
arguments)},_removeChildFromDom:function(a){(a=a.domNode)&&a.parentNode&&a.parentNode.removeChild(a)},setProperties:function(a,b){this.properties||(this.properties={});b=b||!1;a.id&&(this._srcElement.addAttribute("id",a.id,a.isTempID),delete a.id,delete a.isTempID);a.isTempID&&delete a.isTempID;for(var c in a){var f=a[c];f||"boolean"==typeof f||"number"==typeof f?(f=this._stringValue(c,f),b||(this.properties[c]=f),this._srcElement.addAttribute(c,f)):(delete this.properties[c],this._srcElement.removeAttribute(c))}},
startup:function(){this.initReload()},renderWidget:function(){},destroyWidget:function(a){(a=this.getHelper())&&a.destroy?a.destroy(this):this.dijitWidget?this.dijitWidget.destroyRecursive():dojo.forEach(this.getChildren(),function(a){a.destroyWidget()})},destroy:function(){this.inherited(arguments);console.error("destry")},selectChild:function(a){},attach:function(){var a=this.getHelper();a&&a.create&&(this._srcElement?a.create(this,this._srcElement):console.error("widget attach : have no src element",
this))},_stringValue:function(a,b){var c=this.getMetadata();a=c.property&&c.property[a];if(!a)return b;if("object"==a.datatype)if(b.getObjectId)b=b.getObjectId();else{if(a=b._edit_object_id)return a;if(b.domNode)return b.domNode.getAttribute("jsId")}else if("json"==a.datatype)a=(a=this.getContext())&&a.getDojo()||dojo,(c=this.getHelper())&&c.checkValue&&(b=c.checkValue(b)),a.isObject(b)&&(b=a.toJson(b));else if("string"==a.datatype)switch(a.format){case "date":case "time":isFinite(b)&&(b=dojo.date.stamp.toISOString(b,
{selector:a.format}));break;default:b=e.encode(b)}return b}})})},"davinci/html/CSSModel":function(){define({shorthand:[["border","border-width border-style border-color border-top border-left border-right border-bottom".split(" ")],["border-width",["border-top-width","border-right-width","border-bottom-width","border-left-width"]],["border-style",["border-top-style","border-right-style","border-bottom-style","border-left-style"]],["border-color",["border-top-color","border-right-color","border-bottom-color",
"border-left-color"]],["border-bottom",["border-bottom-width","border-bottom-style","border-bottom-color"]],["border-top",["border-top-width","border-top-style","border-top-color"]],["border-left",["border-left-width","border-left-style","border-left-color"]],["border-right",["border-right-width","border-right-style","border-right-color"]],["font","font-size line-height font-weight font-style font-family line-height".split(" ")],["border-radius",["border-top-left-radius","border-top-right-radius",
"border-bottom-right-radius","border-bottom-left-radius"]],["-moz-border-radius",["-moz-border-radius-topleft","-moz-border-radius-topright","-moz-border-radius-bottomright","-moz-border-radius-bottomleft"]],["margin",["margin-top","margin-right","margin-bottom","margin-left"]],["padding",["padding-top","padding-right","padding-bottom","padding-left"]],["background",["background-color","background-image","background-repeat","background-position","background-attachment"]]]})},"davinci/ve/utils/StyleArray":function(){define([],
function(){return{mergeStyleArrays:function(n,k){n||(n=[]);k||(k=[]);n=dojo.clone(n);for(var g=0;g<k.length;g++)for(var e in k[g])for(j=n.length-1;0<=j;j--){var b=n[j],d;for(d in b)if(e==d){n.splice(j,1);break}}return n.concat(k)}}})},"davinci/ve/GenericWidget":function(){define(["dojo/_base/declare","./_Widget"],function(n,k){return n("davinci.ve.GenericWidget",k,{isGenericWidget:!0,constructor:function(g,e,b,d,h){dojo.attr(e,"dvwidget",b);h&&h.addAttribute("dvwidget",b)},buildRendering:function(){this.containerNode=
this.domNode;if(this._params){for(var g in this._params)this.domNode.setAttribute(g,this._params[g]);this._params=void 0}},_getChildrenData:function(g){for(var e=[],b=this.domNode.childNodes,d=0;d<b.length;d++){var h=b[d],a=void 0;switch(h.nodeType){case 1:(h=require("davinci/ve/widget").byNode(h))&&(a=h.getData(g));break;case 3:(a=h.nodeValue.trim())&&g.serialize&&(a=davinci.html.escapeXml(a));break;case 8:a="\x3c!--"+h.nodeValue+"--\x3e"}a&&e.push(a)}if(0!==e.length)return e},setProperties:function(g){var e=
this.domNode,b;for(b in g)"style"===b?dojo.style(e,g[b]):g[b]?e[b]=g[b]:e.removeAttribute(b);this.inherited(arguments)},_attr:function(g,e){if(1<arguments.length)this.domNode.setAttribute(g,e);else return this.domNode.getAttribute(g)},getTagName:function(){return this.domNode.nodeName.toLowerCase()}})})},"davinci/ve/DeliteWidget":function(){define("dojo/_base/declare ./_Widget ./widget require xide/registry xide/utils".split(" "),function(n,k,g,e,b,d){function h(a){a.declaredClass&&"davinci.ve.DeliteWidget"!==
a.declaredClass?a.type=a.declaredClass:a.domNode&&a.domNode.declaredClass&&-1==a.domNode.declaredClass.indexOf("uniq")&&(a.type=a.domNode.declaredClass);if(!a.type&&a.domNode.baseClass)switch("delite/"+d.capitalize(a.domNode.baseClass.replace("d-",""))){case "delite/Radio-button":a.type="delite/RadioButton";break;case "delite/Checkbox":a.type="delite/Checkbox";break;case "delite/Accordion-header":a.type="delite/AccordionHeader";break;case "delite/Combobox":a.type="delite/Combobox";break;case "delite/Toggle-button":a.type=
"delite/ToggleButton";break;case "delite/Tab-bar":a.type="delite/TabBar";break;case "delite/View-stack":a.type="delite/ViewStack";break;case "delite/MediaPlayer":a.type="delite/MediaPlayer";break;case "delite/Panel":a.type="delite/Panel";break;case "delite/Select":a.type="delite/Select";break;case "delite/Button":a.type="delite/Button";break;case "delite/Accordion":a.type="delite/Accordion";break;case "delite/Slider":a.type="delite/Slider"}if(!a.type&&a.domNode&&a.domNode.getAttribute("is")){var e=
a.domNode.getAttribute("is");a.type=e}a.type?b.add(a.domNode):console.error("have no widget type ",a)}n=n("davinci.ve.DeliteWidget",k,{isGenericWidget:!0,helper:g,getData:function(a){a=a||{identify:!0,preserveStates:!0};var d;d=(d=this.getHelper())&&d.getData?d.getData.apply(d,[this,a]):this._getData(a);var f=!1;"no_id"===this.id&&(f=dijit.getUniqueId(this.type.toLowerCase().replace("/","-").replace(/\./g,"_")),this.id=f=f.replace("delite/","d-").toLowerCase(),d.properties.id=f,d.properties.id=f,
this.domNode.id=f,f=!0);a.identify&&!f&&b.byId(this.id);b.add(this.domNode);d.maqAppStates=dojo.clone(this.domNode._maqAppStates);d.maqDeltas=dojo.clone(this.domNode._maqDeltas);d.properties||(d.properties={});if(this.properties)for(var e in this.properties)e in d.properties||(d.properties[e]=this.properties[e]);a=this._srcElement;for(var f=a.attributes,c=0;c<f.length;c++){var h=f[c];e=h.name;if("on"==h.name.substr(0,2).toLowerCase())d.properties[h.name]=h.value;else if("a"==a.tag.toLowerCase()&&
"href"==h.name.toLowerCase())d.properties[h.name]=h.value;else if("stop"===e||"bidirectional"===e||"block"===e||"targetevent"===e)d.properties[h.name]=h.value}return d},_fixType:function(a){return h(a)},_getChildren:function(a){function b(a){dojo.forEach(a.children,function(a){(a=c.getWidget(a,!1))&&!a.type&&h._fixType(a);h.metadata&&h.metadata.ignore&&a.type&&-1!==h.metadata.ignore.indexOf(a.type)||a&&a.type&&(-1==a.type.indexOf("html.")||h.metadata&&1==h.metadata.htmlContent)&&d.push(a)})}var d=
[],h=this;a=this.container||this.domNode;a.containerNode&&null==this.domNode.render&&(a=a.containerNode);this.domNode&&null!=this.domNode.render&&(a=this.domNode);var c=e("davinci/ve/widget");a&&(b(a),0==d.length&&this.domNode.containerNode&&b(this.domNode.containerNode));return h.metadata&&h.metadata.noChildren?[]:d},getChildren:function(a){var b=this.getHelper();return b&&b.getChildren?b.getChildren(this,a):this._getChildren(a)},constructor:function(a,b,d,e,c){this.acceptsHTMLChildren=!0},buildRendering:function(){this.containerNode=
this.domNode;if(this._params){for(var a in this._params)this.domNode.setAttribute(a,this._params[a]);this._params=void 0}},_getChildrenData:function(a){var b=this.domNode;if(!b.hasChildNodes())return null;if(b&&b.getChildrenData)return b.getChildrenData();var b=[],d=this.domNode.childNodes,h=e("davinci/ve/widget");this.metadata&&this.metadata.noChildren&&(d=[]);for(var c=0;c<d.length;c++){var g=d[c],k=void 0;switch(g.nodeType){case 1:if((g=h.byNode(g))&&g.type&&-1!==g.type.indexOf("html.")&&!0!==
this.metadata.htmlContent)break;if(this.metadata&&this.metadata.ignore&&g.type&&-1!==this.metadata.ignore.indexOf(g.type))break;g&&(k=g.getData(a));break;case 3:(k=g.nodeValue.trim())&&(a.serialize||!0===this.metadata.htmlContent)&&(k=davinci.html.escapeXml(k));break;case 8:k="\x3c!--"+g.nodeValue+"--\x3e"}(k&&k.type&&-1==k.type.indexOf("html.")||k&&!0===this.metadata.htmlContent)&&b.push(k)}if(0!==b.length)return b},_getPropertyValue:function(a){if(this.domNode._get){var b=this.domNode._get(a);null==
b&&(b=this.domNode.getAttribute(a));return b}if(this.containerNode&&a in this.containerNode)return this.containerNode[a]},setProperties:function(a){var b=this.domNode,d;for(d in a)"style"===d?dojo.style(b,a[d]):a[d]?(b[d]=a[d],b._set&&b._set(d,a[d]),dojo.attr(b,d,a[d])):b.removeAttribute(d);this.inherited(arguments)},_attr:function(a,b){},getTagName:function(){return this.domNode.nodeName.toLowerCase()},getParent:function(){if("xblox/RunScript"==this.type){var a=this.domNode;if(a&&a._targetReference&&
a._targetReference._dvWidget)return a._targetReference._dvWidget}return this.inherited(arguments)}});n.fixType=h;return n})},"davinci/ve/HTMLWidget":function(){define(["dojo/_base/declare","./_Widget"],function(n,k){return n("davinci.ve.HTMLWidget",k,{isHtmlWidget:!0,addHTMLClasses:!0,constructor:function(g,e,b){this.type="html."+e.tagName.toLowerCase();this.acceptsHTMLChildren=!0;null!=b&&(this.addHTMLClasses=b)},buildRendering:function(){this.containerNode=this.domNode;if(this._params){for(var g in this._params)this.domNode.setAttribute(g,
this._params[g]);this._params=void 0}try{!1!==this.addHTMLClasses&&dojo.addClass(this.domNode,"HtmlWidget")}catch(e){}},_getChildrenData:function(g){function e(b){(b=b.nodeValue.trim())&&(b=davinci.html.escapeXml(b));return b}var b=this.domNode;if(!b.hasChildNodes())return null;if(1===b.childNodes.length&&3===b.firstChild.nodeType)return e(b.firstChild);var d=[];dojo.forEach(b.childNodes,function(b){var a;switch(b.nodeType){case 1:(b=require("davinci/ve/widget").byNode(b))&&(a=b.getData(g));break;
case 3:a=e(b);break;case 8:a="\x3c!--"+b.nodeValue+"--\x3e"}a&&d.push(a)});return d},setProperties:function(g,e){var b=this.domNode;e=e||!1;for(var d in g)if("style"===d)dojo.style(b,g[d]);else if(!e){var h=g[d];h||"boolean"==typeof h||"number"==typeof h?b.setAttribute(d,h):b.removeAttribute(d)}this.inherited(arguments)},resize:function(){this.getChildren().forEach(function(g){g.resize&&g.resize()})},_attr:function(g,e){if(1<arguments.length)this.domNode[g]=e;else return this.domNode[g]},getTagName:function(){return this.domNode.nodeName.toLowerCase()}})})},
"davinci/ve/ObjectWidget":function(){define(["dojo/_base/declare","dojo/dom-attr","./_Widget"],function(n,k,g){return n("davinci.ve.ObjectWidget",g,{isObjectWidget:!0,constructor:function(e,b,d,h,a){"string"===typeof d&&(k.set(b,"data-dojo-type",d),a&&a.addAttribute("data-dojo-type",d))},postCreate:function(){var e=this._params.jsId,b=require("davinci/ve/widget")._dojo(this.domNode),d;if(e){if(k.set(this.domNode,"jsId",e),d=this.getObjectType())if(d=b.getObject(d.replace(/\//g,".")))if(d=d.markupFactory?
d.markupFactory(this._params,this.domNode,d):d.prototype&&d.prototype.markupFactory?d.prototype.markupFactory(this._params,this.domNode,d):new d(this._params,this.domNode))d._edit_object_id=e,b.setObject(e,d)}else if(e=this.getObjectId())if(d=b.getObject(e))d._edit_object_id=e},getObjectType:function(){var e=this.domNode,e=k.get(e,"data-dojo-type")||k.get(e,"dojoType");return e=e.replace(/\./g,"/")},getObjectId:function(){return k.get(this.domNode,"jsId")},_getChildren:function(){return[]}})})},"davinci/ve/commands/StyleCommand":function(){define(["dojo/_base/declare",
"davinci/ve/widget","davinci/ve/utils/StyleArray"],function(n,k,g){return n("davinci.ve.commands.StyleCommand",null,{name:"style",constructor:function(e,b,d){this._newValues=b;this._id=e?e.id:void 0;this._applyToStateIndex=d&&"Normal"!=d&&"undefined"!=d?d:"undefined"},add:function(e){e&&e._id==this._id&&e._newValues&&dojo.mixin(this._newValues,e._newValues)},execute:function(e,b){if(this._id&&this._newValues&&(e=require("davinci/ve/widget").byId(this._id))&&e.domNode){var d=require("davinci/ve/States"),
h=e.getStyleValuesAllStates();this._oldStyleValuesAllStates=dojo.clone(h);h[this._applyToStateIndex]=h[this._applyToStateIndex]?g.mergeStyleArrays(h[this._applyToStateIndex],this._newValues):this._newValues;for(var a=h[this._applyToStateIndex],m=a.length-1;0<=m;m--){var f=a[m],q=!1,c;for(c in f)"$MAQ_DELETE_PROPERTY$"==f[c]?delete f[c]:q=!0;q||a.splice(m,1)}e.setStyleValuesAllStates(h);c=d.getStatesListCurrent(e.domNode);a=g.mergeStyleArrays([],h.undefined);for(m=0;m<c.length;m++)h[c[m]]&&(a=g.mergeStyleArrays(a,
h[c[m]]));e.setStyleValuesCanvas(a);e.setStyleValuesModel(h.undefined);e.refresh();d.resetState(e.domNode);!0!==b&&dojo.publish("/davinci/ui/widgetPropertiesChanged",[[e]])}},undo:function(){if(this._id&&this._oldStyleValuesAllStates){var e=require("davinci/ve/widget").byId(this._id);if(e){require("davinci/ve/States");var b=this._oldStyleValuesAllStates,d=this._applyToStateIndex;e.setStyleValuesAllStates(b);b=g.mergeStyleArrays(b.undefined,b[d]);e.setStyleValuesCanvas(b);e.setStyleValuesModel(this._oldStyleValuesAllStates.undefined);
e.refresh();require("davinci/ve/States").resetState(e.domNode);dojo.publish("/davinci/ui/widgetPropertiesChanged",[[e]])}}}})})},"davinci/lang/ve":function(){define([],function(){return{common:"Common",widgetSpecific:"Widget",events:"Events",layout:"Layout",showMinMax:"show min/max",padding:"Padding",margins:"Margins",showtrbl:"show t/r/b/l",background:"Background",border:"Border",showDetails:"show details",fontsAndText:"Fonts/Text",shapesSVG:"SVG",properties:"properties",Scenes:"Scenes",States:"States",
ActiveScene:"This scene is currently visible",AppStateFocus:"This application state is the target for application-state-specific visibility or styling changes",InitialScene:"This scene will show initially when the page runs",chooseDeviceSilhouette:"Choose a device silhouette: ",filesHasUnsavedChanges:"The file '${0}' has unsaved changes, \"Save\" changes and continue with switch device silhouette.",selectAncestorTitle:"Select ancestor",selectAncestorLabel:"Select ancestor (closest ancestor listed first):",
createNewState:"Create New State",updateCurrentState:"Update Current State",createLabel:"Create",updateLabel:"Update",modifyState:"Modify State",modifyLabel:"Update",stateLabel:"Name",enterStateName:"Please enter a state name.",stateNameExists:"State name '${name}' already exists. Please enter a different state name.",renameState:"Rename State",renameLabel:"Rename",cancelLabel:"Cancel",newStateLabel:"New name:",manageStates:"Manage Widget Visibility for Different States",manageStatesCheckLabel:"Check:",
manageStatesCheckCurrentStateOnly:"Current state",manageStatesCheckAll:"All",manageStatesUncheckAll:"None",manageStatesCheckBackgroundOnly:"Background only",manageStatesAllVisibleFromBackground:"(Visible from Background)",manageStatesSomeVisibleFromBackground:"(Some visible from Background)",manageStatesSomeVisibleSomeHidden:"(Some visible, some hidden)",initialStateCheckBoxLabel:"Initial state at document load time",EnableApplicationStates:"Enable/disable application states",EnableAsStateContainerDescription:"Setting the check box below and clicking OK will allow custom application states to be defined on the currently selected widget.",
DisableAsStateContainerDescription:"Unsetting the check box below and clicking OK will disallow custom application states on the currently selected widget.",DisableAsStateContainerDataLoss:"Any existing interactivity based on existing application states will be lost.",EnableAsStateContainerWidgetLabel:"Application states are enabled on this widget",EnableApplicationStatesCurrentWidget:"Currently selected widget",EnableApplicationStatesCurrentStates:"Current application states",EnableApplicationStatesNone:"(none)",
NewWidgetsCurrentStateTitleBackground:"Toggle whether new widgets go to Background or selected state (current value: Background)",NewWidgetsCurrentStateTitleCurrentState:"Toggle whether new widgets go to Background or selected state (current value: selected state)",richTextInputHelp:"Provides Rich Text (word processor-like) editing of HTML.",smartInputHelp1:"If you use any markup characters (\x26lt;,\x26gt;,\x26amp;), you need to specify whether the text represents literal (plain) text or HTML markup that should be parsed (using an innerHTML assignment).",
smartInputHelp2:"Text represents literal (plain) text.",loading:"Loading...",htmlMarkup:"HTML markup",creatingStyleRules:"Creating Style Rules with app.css",propChangeCannotComplete:"This property change cannot be completed because the operation attempts to modify a read-only theme CSS file.",toChangeProperty:"To change this property, one technique is to add a class to this widget (at top of Properties palette)  and then open up the CSS Details pane to target a style rule within your app.css file, as described at ${0}.",
errorModifyingValue:"Error modifying value",changeWillModify:"This change will modify one of the CSS style rules defined within a 'CSS theme' and will therefore probably impact other widgets on a global basis.",insteadOfChanging:"Instead of changing the theme CSS files, it is usually better to add a class to this widget (at the top of the Properties palette) and then open up the CSS Details pane to target a style rule within your app.css file, as described at ${0}.",okToProceed:"OK to proceed with this change?",
valueIsOverriden:"This value is overriden and can not be changed.",applyToWhich:"Apply to which style rule:",onlyApplyToState:" Only apply to current state (${0})",newRule:"[class: ${0} - New rule in ${1}] ",newThemeRule:"[theme: - New rule in ${0}] ",existingRule:"[class: ${0} - Existing rule in ${1}] ",line:" line: ${0})",propUndefined:"undefined",bgdType_emptystring:"",bgdType_none:"none",bgdType_url:"image",bgdType_linear:"linear gradient",bgdType_radial:"radial gradient",bgdType_other:"other",
bgdPickFile:"Choose...",bgdStop:"Stop",bgdAddStop:"Add a new gradient stop after this stop",bgdRemoveStop:"Remove this gradient stop",bgdBackgroundColor:"background-color:",bgdBackgroundImageType:"background-image type:",bgdImageUrl:"Image URL:",bgdUrl:"URL:",bgdColorStops:"Color stops:",bgdColor:"color",bgdPosition:"position",bgdOptions:"Options:",bgdAngle:"Angle:",bgdPosition2:"Position:",bgdShape:"Shape:",bgdExtent:"Extent:",bgdBackgroundRepeat:"background-repeat:",bgdBackgroundPosition:"background-position:",
bgdBackgroundSize:"background-size:",bgdBackgroundOrigin:"background-origin:",bgdBackgroundClip:"background-clip:",bgdBackgroundImageValue:"'background-image' value:",bgdTemplate:"Template:",colorPicker:"Color picker...",removeValue:"Remove Value",selectColor:"select a color",toolBarFor:"",noSelection:"(no selection)",toolBarClass:"class:",toolBarId:"ID:",idAlreadyUsed:"This id is already used by another widget",noValidParents:"No valid parents at this position",willBeChildOf:"Will become a child of:",
candidateParents:"Candidate parents:",toChangePress:"To change, press numbers",vteWarningTitle:"Theme Version Warning",vteWarningMessage:"Theme version does not match Maqetta version this could produce unexpected results. We suggest recreating the custom theme using the current version of Maqetta and deleting the existing theme.",vteWarningUnsuportedBrowserTitle:"Unsupported brower",vteWarningUnsuportedBrowserMessage:"Editing mobile themes is only supported on webkit browsers, we sugguest using Chrome or Safari to customize mobile themes.",
vteWarningToolkitMessage:"Theme version does not match workspace library version this could produce unexpected results. We suggest recreating the custom theme using the current version of Maqetta and deleting the existing theme.",vteErrorTitle:"Theme Version Error",vteErrorMessage:"Theme version is not supported by this version of Maqetta. You must recreating custom theme using the current version of Maqetta and deleting the existing theme..",vteErrorSavingResourceMessage:"error saving resource\n",
"SourceComboButton-source":"Source","SourceComboButton-splitHorizontal":"Split-H","SourceComboButton-splitVertical":"Split-V","LayoutDropDownButton-flow":"Flow","LayoutDropDownButton-absolute":"Absolute"}})},"davinci/ve/views/StatesView":function(){define("dojo/_base/declare dojo/query dojo/dom-class dojo/_base/connect dojo/aspect davinci/lang/ve/ve davinci/workbench/ViewPart dijit/layout/BorderContainer dijit/layout/ContentPane davinci/XPathUtils davinci/ve/States davinci/ve/widget davinci/ve/_Widget davinci/ve/commands/AppStateCommand dojo/data/ItemFileWriteStore dijit/tree/ForestStoreModel dijit/Tree dojo/_base/window".split(" "),
function(n,k,g,e,b,d,h,a,m,f,q,c,p,y,u,z,A,x){n(A._TreeNode,{});var w=n(A._TreeNode,{_setLabelAttr:{node:"labelNode",type:"innerHTML"}}),r="sceneId category node sceneContainerNode isCurrent isFocus isInitial".split(" ");return n("davinci.ve.views.StatesView",[h],{nextId:0,_lastSelectedId:null,postCreate:function(){this.inherited(arguments);this._themeState=null;this.container=new a({design:"headline",gutters:!1,liveSplitters:!1});this.centerPane=new m({region:"center"});this.container.addChild(this.centerPane);
this.container.layout();this.container.startup();this.setContent(this.container);this.subscribe("/davinci/ui/editorSelected",this._editorSelected.bind(this));this.subscribe("/davinci/ui/context/loaded",this._contextLoaded.bind(this));this.subscribe("/davinci/ui/context/statesLoaded",this._statesLoaded.bind(this));this.subscribe("/davinci/ui/context/pagebuilt",this._pagebuilt.bind(this));this.subscribe("/davinci/ui/context/pagerebuilt",this._pagerebuilt.bind(this));this.subscribe("/davinci/states/statesReordered",
this._statesReordered.bind(this));this.subscribe("/davinci/ui/deviceChanged",this._deviceChanged.bind(this));this.subscribe("/davinci/states/state/added",this._addState.bind(this));this.subscribe("/davinci/states/state/removed",this._removeState.bind(this));this.subscribe("/davinci/states/state/renamed",this._renameState.bind(this));this.subscribe("/davinci/states/state/changed",this._changeState.bind(this));this.subscribe("/maqetta/appstates/state/changed",this._changeState.bind(this));this.subscribe("/maqetta/appstates/state/containerChange",
this._containerChange.bind(this));this.subscribe("/davinci/ui/context/registerSceneManager",this._registerSceneManager.bind(this));this.subscribe("/davinci/scene/scenesLoaded",this._scenesLoaded.bind(this));this.subscribe("/davinci/scene/added",this._addScene.bind(this));this.subscribe("/davinci/scene/removed",this._removeScene.bind(this));this.subscribe("/davinci/scene/renamed",this._renameScene.bind(this));this.subscribe("/davinci/scene/selectionChanged",this._sceneSelectionChanged.bind(this));
dojo.subscribe("/davinci/ui/widgetPropertiesChanged",dojo.hitch(this,this._widgetPropertiesChanged));this.subscribe("/davinci/ui/widgetSelected",dojo.hitch(this,this._widgetSelectionChanged));this.attachToolbar();dojo.style(this.toolbarDiv,"display","none")},_contextLoaded:function(){},_pagebuilt:function(){this._statesLoaded.apply(this,arguments)},_pagerebuilt:function(){this._destroyTree();this._statesLoaded.apply(this,arguments)},_statesReordered:function(){this._destroyTree();this._statesLoaded.apply(this,
arguments)},_statesLoaded:function(){this._editor&&"davinci.ve.themeEditor.ThemeEditor"!=this._editor.declaredClass&&this._updateView();this._hideShowToolBar()},_deviceChanged:function(){this._updateView()},_addState:function(){this._updateView()},_removeState:function(){this._updateView()},_renameState:function(){this._updateView()},_changeState:function(a){this.isThemeEditor()?this._updateThemeSelection(a.newState):this._updateView()},_containerChange:function(){this._updateView()},_registerSceneManager:function(a){},
_scenesLoaded:function(a){this._updateView()},_addScene:function(a,c,b){this._updateView()},_removeScene:function(a,c,b){this._updateView()},_renameScene:function(a,c,b){this._updateView()},_widgetPropertiesChanged:function(){this._updateView()},_widgetSelectionChanged:function(a){this._editor&&this._editor.getContext&&this._tree&&this._sceneStore&&(a=this._editor.getContext().getSelection(),1==a.length&&(a=a[0].domNode)&&a._maqAppStates&&this._sceneStore.fetch({query:{node:a},queryOptions:{deep:!0},
onComplete:dojo.hitch(this,function(a,c){0<a.length&&(a=this._getTreeSelectionPath(a[0]),this._tree.set("path",a))})}))},_sceneSelectionChanged:function(a,c){a&&a.category&&c&&this._updateView()},_editorSelected:function(a){a=a.editor;this._destroyTree();this._unregisterForContextEvents();a&&a.supports("states")?(this._editor=a,dojo.style(this.container.domNode,"display","block"),"davinci.ve.themeEditor.ThemeEditor"===a.declaredClass?(this.set("title",d.States),this._updateViewForThemeEditor(),this._themeState?
this._updateThemeSelection(this._themeState):this._updateThemeSelection("Normal")):(this.set("title",d.Scenes),this._registerForContextEvents(),this._updateView()),this.container.layout()):(delete this._editor,dojo.style(this.container.domNode,"display","none"));this._hideShowToolBar()},_getRootNode:function(){var a=this._editor,c;a&&a.getContext&&(c=(a=a.getContext())&&a.rootNode);return c},_updateView:function(){if(this._editor&&this._editor.getContext&&!this.isThemeEditor()){var a=this._editor.getContext();
a&&a._statesLoaded&&x.withDoc(document,function(){this._updateList();this._updateSelection()},this)}},isThemeEditor:function(){return this._editor&&"davinci.ve.themeEditor.ThemeEditor"===this._editor.declaredClass},_updateViewForThemeEditor:function(){var a=this._editor._theme.getStatesForAllWidgets(),c={Normal:"Normal"};if(a)for(var b=0;b<a.length;b++){var d=a[b];"Normal"!=d&&(c[d]=d)}window.latestStates=c;var a=this._getScenes(),c={name:this._editor&&this._editor.getFileNameToDisplay?this._editor.getFileNameToDisplay():
this._editor&&this._editor.fileName?this._editor.fileName:"file",type:"file",category:"file",children:[]},b=[],d=[c],f;for(f in latestStates)b.push({name:f,sceneId:f,type:"AppState"});c.children=c.children.concat(b);this._compareStructures(d,a)||(this._destroyTree(),this._createTree(d))},_updateList:function(){function a(b,d){var k,u=b.declaredClass&&b.isInstanceOf&&b.isInstanceOf(p);u?(k=b,b=k.domNode):k=null;var y=q.isStateContainer(b),z=!1,A;for(A in e){var x=e[A];if(x.getSceneChildren&&x.name&&
x.category&&(z=x.isSceneContainer(b)))break}if("BODY"==b.tagName||y||z){for(var r=null,B=0;B<h.length;B++)if(x=h[B],x.node==b){r=x;break}var v=null;if(!r){var w=b.parentNode;a:for(;w;){for(B=0;B<h.length;B++)if(x=h[B],x.node==w){v=x;break a}if("BODY"==w.tagName)break;w=w.parentNode}}if(r)d=r;else{var n=u?c.getLabel(k):c.getLabelForNode(b),B=f.getXPath(b),n={name:n,type:"file",category:"file",node:b,children:[]};v?(n.maqid=v.maqid+"$"+B,v.children.push(n)):(n.maqid=d.maqid+"$"+B,d.children.push(n));
h.push(n);d=n}if(y){B=q.getStates(b);x=q.getState(b);x||(x=q.NORMAL);w=q.getInitial(b);w||(w=q.NORMAL);for(var C={maqid:d.maqid+"$AppStates",name:"Application States",type:"SceneManagerRoot",category:"AppStates",sceneContainerNode:b,parentItem:d,children:[]},D=0;D<B.length;D++){var F=B[D],n=m._treeNodeContent("Normal"==F?"Background":F),y=g&&g.stateContainerNode==b&&g.state==x,v=F===x,r=F===w,n={maqid:C.maqid+"$"+F,name:n,sceneId:F,type:"AppState",isFocus:y,isCurrent:v,isInitial:r,sceneContainerNode:b,
parentItem:C};C.children.push(n);h.push(n)}d.children.push(C);h.push(C)}if(z)for(A in e)if(x=e[A],x.getSceneChildren&&x.getCurrentScene&&x.getInitialScenes&&x.name&&x.category&&(z=x.getSceneChildren(b),0<z.length)){w=x.getCurrentScene(b);C=x.getInitialScenes(b);B=f.getXPath(b);D={maqid:d.maqid+"$"+B,name:x.name,type:"SceneManagerRoot",category:x.category,parentItem:d,children:[]};for(F=0;F<z.length;F++){var E=z[F],n=u?c.getLabel(E._dvWidget):c.getLabelForNode(E),n=m._treeNodeContent(n),y=!1,v=E===
w,r=0<=C.indexOf(E),B=f.getXPath(E),n={maqid:D.maqid+"$"+B,name:n,sceneId:E.id,type:x.category,isFocus:y,isCurrent:v,isInitial:r,sceneContainerNode:b,parentItem:D,node:E,children:[]};D.children.push(n);h.push(n)}d.children.push(D);h.push(n)}}k=u?k.getChildren():q._getChildrenOfNode(b);for(u=0;u<k.length;u++)a(k[u],d)}var b=this._getScenes();if(this._editor&&b){var d=this._editor.getContext();if(d&&d.rootWidget&&d.rootNode&&d._statesLoaded){var e=d.sceneManagers,h=[],m=this,g=q.getFocus(d.rootNode);
g&&!g.state&&(g.state=q.NORMAL);var k={maqid:"root",children:[]};a(d.rootWidget,k);d=[k.children[0]];if(!this._compareStructures(d,b)){var u=null;this._tree&&this._sceneStore&&(b=this._tree.get("path"),0<b.length&&(u=b[b.length-1].maqid[0]));this._destroyTree();this._createTree(d);u&&this._tree.onLoadDeferred.then(function(){this._sceneStore.fetch({query:{maqid:u},queryOptions:{deep:!0},onComplete:dojo.hitch(this,function(a,c){1===a.length&&(a=this._getTreeSelectionPath(a[0]),0<a.length&&this._tree.set("path",
a))})})}.bind(this))}this._hideShowToolBar()}}},_getTreeSelectionPath:function(a){var c=[];c.splice(0,0,a.id[0]);for(a=a.parentItem&&a.parentItem[0];a;)c.splice(0,0,a.id[0]),a=a.parentItem&&a.parentItem[0];c.splice(0,0,"StoryRoot");return c},_updateSelection:function(){if(this._editor&&this._tree){var a=this._editor.getContext();a&&a._statesLoaded&&this._tree.onLoadDeferred.then(function(){var c=this._tree.get("path"),c=0<c.length?c[c.length-1].maqid[0]:null,b=a.sceneManagers,d={},f;for(f in b){var e=
b[f];if(e.getAllSceneContainers&&e.getSceneChildren&&e.getCurrentScene)for(e.getAllSceneContainers(),d.allSceneItems=void 0,this._sceneStore.fetch({query:{type:e.category},queryOptions:{deep:!0},onComplete:dojo.hitch(this,function(a){return function(c,b){a.allSceneItems=c}}(d))}),e=0;e<d.allSceneItems.length;e++){var h=d.allSceneItems[e],m=this._findTreeNodeSpanByClass(h,"ScenesPaletteCurrent"),p=this._findTreeNodeSpanByClass(h,"ScenesPaletteInitial");h.isCurrent&&h.isCurrent[0]?m&&g.remove(m,"ScenesPaletteCurrentHidden"):
m&&g.add(m,"ScenesPaletteCurrentHidden");h.isInitial&&h.isInitial[0]?p&&g.remove(p,"ScenesPaletteInitialHidden"):p&&g.add(p,"ScenesPaletteInitialHidden");h.maqId&&h.maqId[0]==c&&(m=h.node&&h.node[0])&&m._maqAppStates&&(p=q.getState(m),q.setState(p,m,{focus:!0,updateWhenCurrent:!0}))}d={allSceneItems:d.allSceneItems}}var k=[];this._sceneStore.fetch({query:{type:"AppState"},queryOptions:{deep:!0},onComplete:dojo.hitch(this,function(a,c){k=a})});for(e=0;e<k.length;e++)f=k[e],m=this._findTreeNodeSpanByClass(f,
"ScenesPaletteCurrent"),p=this._findTreeNodeSpanByClass(f,"ScenesPaletteInitial"),f.isCurrent&&f.isCurrent[0]?m&&g.remove(m,"ScenesPaletteCurrentHidden"):m&&g.add(m,"ScenesPaletteCurrentHidden"),f.isInitial&&f.isInitial[0]?p&&g.remove(p,"ScenesPaletteInitialHidden"):p&&g.add(p,"ScenesPaletteInitialHidden")}.bind(this))}},_updateThemeSelection:function(a){if(this._sceneStore){var c;a||(a="Normal");this._sceneStore.fetch({query:{type:"AppState",sceneId:a},queryOptions:{deep:!0},onComplete:dojo.hitch(this,
function(a,b){1===a.length&&(c=a[0].sceneId[0])})});c&&this._updateSelectedScene("AppState",c)}},_getScenes:function(){var a=[];this._sceneStore&&this._sceneStore.fetch({query:{},queryOptions:{},onComplete:dojo.hitch(this,function(c,b){function d(a,c){for(var b={name:a.name[0],type:a.type[0]},f=0;f<r.length;f++){var e=r[f];a[e]&&(b[e]=a[e][0])}c.push(b);a.children&&0<a.children.length&&(b.children=[],a.children.forEach(function(a){d(a,b.children)}))}c.forEach(function(c){d(c,a)})})});return a},_compareStructures:function(a,
c){function b(a,c){if(a.length!=c.length)return!1;for(var d=0;d<a.length;d++){var f;a:{f=a[d];for(var e=c[d],h=0;h<r.length;h++){var m=r[h];m=f[m]&&!e[m]||!f[m]&&e[m]?!1:f[m]&&f[m]!==e[m]?!1:!0;if(!m){f=!1;break a}}h=f.children&&f.children.length;m=e.children&&e.children.length;f=h&&!m||!h&&m||h&&!b(f.children,e.children)?!1:!0}if(!f)return!1}return!0}return b(a,c)},_destroyTree:function(){this._tree&&(this._tree.destroyRecursive(),this._forest.destroy(),this._tree=this._forest=this._sceneStore=null)},
_createTree:function(a){require(["dijit/tree/dndSource"],function(c){c=function(a,c,b){if(a&&c){var d,f,e;c.forInSelectedItems(function(a){if(d=a.data&&a.data.item)f=d.parentItem&&d.parentItem[0],e=f.children&&f.children.indexOf(d)});var h,m;(a=dijit.getEnclosingWidget(a).item)&&(h=a.parentItem&&a.parentItem[0])&&(m=h.children&&h.children.indexOf(a));return"over"!=b&&d&&a&&f&&h&&"AppState"==d.type[0]&&"AppState"==a.type[0]&&f==h&&0!==e&&!("before"==b&&0===m)&&!("before"==b&&e+1==m)&&!("after"==b&&
e==m+1)}}.bind(this);var d=function(a,c,b){if(a.tree==this._tree){var d,e;a.forInSelectedItems(function(a){(d=a.data&&a.data.item)&&(e=d.parentItem&&d.parentItem[0])});if((a=e.sceneContainerNode&&e.sceneContainerNode[0])&&a._maqAppStates&&a._maqAppStates.states){c=[];for(b=1;b<e.children.length;b++)c.push(e.children[b].sceneId[0]);a=new y({action:"reorder",newStatesList:c,stateContainerNode:a,context:f});f.getCommandStack().execute(a)}}}.bind(this);if(this._editor){var f=this._editor.getContext(),
e=f.sceneManagers;this._sceneStore=new u({data:{identifier:"id",label:"name",items:[]},clearOnClose:!0});this._forest=new z({store:this._sceneStore,query:{type:"file"},rootId:"StoryRoot",rootLabel:"All",childrenAttrs:["children"]});this._tree=new A({model:this._forest,persist:!1,showRoot:!1,autoExpand:!0,dndController:"dijit.tree.dndSource",dragThreshold:8,betweenThreshold:5,checkItemAcceptance:c,className:"StatesViewTree",style:"height:150px; overflow-x:hidden; overflow-y:auto;",_createTreeNode:function(a){return new w(a)},
getIconClass:function(a,c){return"dijitLeaf"}});this._tree.tree&&this._tree.tree.dndController&&b.after(this._tree.tree.dndController,"onDndDrop",d,!0);this.centerPane.domNode.appendChild(this._tree.domNode);dojo.connect(this._tree,"onClick",this,function(a){var c=this._editor,b=c?c.getContext():null,d=null,f=null,h=null;a&&a.type&&(f=a.type[0],h=a.category&&a.category[0],"AppState"==f||"SceneManagerRoot"==f&&"AppStates"==h?d=a.sceneContainerNode?a.sceneContainerNode[0]:null:a.node&&a.node[0]._maqAppStates&&
(d=a.node[0]));if(this.isThemeEditor())this.publish("/davinci/states/state/changed",[{editorClass:c.declaredClass,widget:"$all",newState:a.sceneId[0],oldState:this._themeState,context:this._editor.context}]),this._themeState=a.sceneId[0];else{b&&d&&(h="AppState"==f?a.sceneId?a.sceneId[0]:null:q.getState(d),q.setState(h,d,{focus:!0,updateWhenCurrent:!0}),"davinci.ve.PageEditor"===this._editor.declaredClass&&(b.deselectInvisible(),b.clearCachedWidgetBounds(),b.updateFocusAll()));if(a.sceneId)for(var m in e){if(c=
e[m],c.selectScene&&c.selectScene({sceneId:a.sceneId[0]}))break}else a.type&&"file"==a.type[0]&&a.node&&a.node[0]._dvWidget&&b.select(a.node[0]._dvWidget);this._updateSelection()}});var h=function(a,c){var b=dojo.mixin({},a),d=this.nextId+"";this.nextId++;b.id=d;b.parentItem=c;delete b.children;var f;f=c?this._sceneStore.newItem(b,{parent:c,attribute:"children"}):this._sceneStore.newItem(b);a.children&&a.children.forEach(function(a){h(a,f)})}.bind(this);a.forEach(function(a){h(a)});this._sceneStore.save();
if(this._tree.getParent){var m=this._tree.getParent();m.resize&&window.setTimeout(function(){m.resize()},0)}}}.bind(this))},_updateSelectedScene:function(a,c){if(this._sceneStore){for(var b=c,d=[];b;)this._sceneStore.fetch({query:{type:a,sceneId:b},queryOptions:{deep:!0},onComplete:dojo.hitch(this,function(a,c){if(1!==a.length)console.error("_sceneSelectionChanged error. currentSceneId\x3d"+b+",items.length\x3d"+a.length),b=null;else for(a=a[0],d.splice(0,0,a.id[0]),b=a.parentSceneId?a.parentSceneId[0]:
null,a=a.parentItem&&a.parentItem[0];a;)d.splice(0,0,a.id[0]),a=a.parentItem&&a.parentItem[0]})});d.splice(0,0,"StoryRoot");this._tree.set("paths",[d])}},_hideShowToolBar:function(){function a(a,c){var b=a+"Disabled";a=k("."+a);a.length&&(c?g.remove(a[0],b):g.add(a[0],b))}if(this._editor){var c=this._editor.getContext&&this._editor.getContext();dojo.style(this.toolbarDiv,"display","davinci.ve.PageEditor"===this._editor.declaredClass?"block":"none");var b,d,f;b=d=f=!1;c&&c.rootNode&&((c=q.getFocus(c.rootNode))&&
c.stateContainerNode&&(b=f=!0),c&&c.state&&c.state!==q.NORMAL&&(d=f=!0));a("addStateIcon",b);a("removeStateIcon",d);a("modifyStateIcon",f)}},_treeNodeContent:function(a){var c;c=""+('\x3cspan title\x3d"'+d.InitialScene+'" class\x3d"ScenesPaletteAppStateIcon ScenesPaletteInitial"\x3e\x26#x2713;\x3c/span\x3e');c+='\x3cspan title\x3d"'+d.ActiveScene+'" class\x3d"ScenesPaletteAppStateIcon ScenesPaletteCurrent"\x3e\x3c/span\x3e';return c+("\x3cspan\x3e"+a+"\x3c/span\x3e")},_findTreeNodeSpanByClass:function(a,
c){var b=(a=(a=this._tree.getNodesByItem(a))&&0<a.length?a[0]:null)?a.domNode:null;return(c=a?dojo.query("."+c,b):[])&&0<c.length?c[0]:null},_contextEventHandler:function(){this._updateView()},_unregisterForContextEvents:function(){this._contextConnects&&(this._contextConnects.forEach(e.disconnect),this._contextConnects=null)},_registerForContextEvents:function(){var a=["widgetChanged","widgetAddedOrDeleted"];this._unregisterForContextEvents();var c=this._editor&&this._editor.getContext&&this._editor.getContext();
c&&(this._contextConnects=[],a.forEach(function(a){c[a]&&this._contextConnects.push(e.connect(c,a,this,"_contextEventHandler"))}.bind(this)))}})})},"davinci/lang/ve/ve":function(){define([],function(){return{common:"Common",widgetSpecific:"Widget",events:"Events",layout:"Layout",showMinMax:"show min/max",padding:"Padding",margins:"Margins",showtrbl:"show t/r/b/l",background:"Background",border:"Border",showDetails:"show details",fontsAndText:"Fonts/Text",shapesSVG:"SVG",properties:"properties",Scenes:"Scenes",
States:"States",ActiveScene:"This scene is currently visible",AppStateFocus:"This application state is the target for application-state-specific visibility or styling changes",InitialScene:"This scene will show initially when the page runs",chooseDeviceSilhouette:"Choose a device silhouette: ",filesHasUnsavedChanges:"The file '${0}' has unsaved changes, \"Save\" changes and continue with switch device silhouette.",selectAncestorTitle:"Select ancestor",selectAncestorLabel:"Select ancestor (closest ancestor listed first):",
createNewState:"Create New State",updateCurrentState:"Update Current State",createLabel:"Create",updateLabel:"Update",modifyState:"Modify State",modifyLabel:"Update",stateLabel:"Name",enterStateName:"Please enter a state name.",stateNameExists:"State name '${name}' already exists. Please enter a different state name.",renameState:"Rename State",renameLabel:"Rename",cancelLabel:"Cancel",newStateLabel:"New name:",manageStates:"Manage Widget Visibility for Different States",manageStatesCheckLabel:"Check:",
manageStatesCheckCurrentStateOnly:"Current state",manageStatesCheckAll:"All",manageStatesUncheckAll:"None",manageStatesCheckBackgroundOnly:"Background only",manageStatesAllVisibleFromBackground:"(Visible from Background)",manageStatesSomeVisibleFromBackground:"(Some visible from Background)",manageStatesSomeVisibleSomeHidden:"(Some visible, some hidden)",initialStateCheckBoxLabel:"Initial state at document load time",EnableApplicationStates:"Enable/disable application states",EnableAsStateContainerDescription:"Setting the check box below and clicking OK will allow custom application states to be defined on the currently selected widget.",
DisableAsStateContainerDescription:"Unsetting the check box below and clicking OK will disallow custom application states on the currently selected widget.",DisableAsStateContainerDataLoss:"Any existing interactivity based on existing application states will be lost.",EnableAsStateContainerWidgetLabel:"Application states are enabled on this widget",EnableApplicationStatesCurrentWidget:"Currently selected widget",EnableApplicationStatesCurrentStates:"Current application states",EnableApplicationStatesNone:"(none)",
NewWidgetsCurrentStateTitleBackground:"Toggle whether new widgets go to Background or selected state (current value: Background)",NewWidgetsCurrentStateTitleCurrentState:"Toggle whether new widgets go to Background or selected state (current value: selected state)",richTextInputHelp:"Provides Rich Text (word processor-like) editing of HTML.",smartInputHelp1:"If you use any markup characters (\x26lt;,\x26gt;,\x26amp;), you need to specify whether the text represents literal (plain) text or HTML markup that should be parsed (using an innerHTML assignment).",
smartInputHelp2:"Text represents literal (plain) text.",loading:"Loading...",htmlMarkup:"HTML markup",creatingStyleRules:"Creating Style Rules with app.css",propChangeCannotComplete:"This property change cannot be completed because the operation attempts to modify a read-only theme CSS file.",toChangeProperty:"To change this property, one technique is to add a class to this widget (at top of Properties palette)  and then open up the CSS Details pane to target a style rule within your app.css file, as described at ${0}.",
errorModifyingValue:"Error modifying value",changeWillModify:"This change will modify one of the CSS style rules defined within a 'CSS theme' and will therefore probably impact other widgets on a global basis.",insteadOfChanging:"Instead of changing the theme CSS files, it is usually better to add a class to this widget (at the top of the Properties palette) and then open up the CSS Details pane to target a style rule within your app.css file, as described at ${0}.",okToProceed:"OK to proceed with this change?",
valueIsOverriden:"This value is overriden and can not be changed.",applyToWhich:"Apply to which style rule:",onlyApplyToState:" Only apply to current state (${0})",newRule:"[class: ${0} - New rule in ${1}] ",newThemeRule:"[theme: - New rule in ${0}] ",existingRule:"[class: ${0} - Existing rule in ${1}] ",line:" line: ${0})",propUndefined:"undefined",bgdType_emptystring:"",bgdType_none:"none",bgdType_url:"image",bgdType_linear:"linear gradient",bgdType_radial:"radial gradient",bgdType_other:"other",
bgdPickFile:"Choose...",bgdStop:"Stop",bgdAddStop:"Add a new gradient stop after this stop",bgdRemoveStop:"Remove this gradient stop",bgdBackgroundColor:"background-color:",bgdBackgroundImageType:"background-image type:",bgdImageUrl:"Image URL:",bgdUrl:"URL:",bgdColorStops:"Color stops:",bgdColor:"color",bgdPosition:"position",bgdOptions:"Options:",bgdAngle:"Angle:",bgdPosition2:"Position:",bgdShape:"Shape:",bgdExtent:"Extent:",bgdBackgroundRepeat:"background-repeat:",bgdBackgroundPosition:"background-position:",
bgdBackgroundSize:"background-size:",bgdBackgroundOrigin:"background-origin:",bgdBackgroundClip:"background-clip:",bgdBackgroundImageValue:"'background-image' value:",bgdTemplate:"Template:",colorPicker:"Color picker...",removeValue:"Remove Value",selectColor:"select a color",toolBarFor:"",noSelection:"(no selection)",toolBarClass:"class:",toolBarId:"ID:",idAlreadyUsed:"This id is already used by another widget",noValidParents:"No valid parents at this position",willBeChildOf:"Will become a child of:",
candidateParents:"Candidate parents:",toChangePress:"To change, press numbers",vteWarningTitle:"Theme Version Warning",vteWarningMessage:"Theme version does not match Maqetta version this could produce unexpected results. We suggest recreating the custom theme using the current version of Maqetta and deleting the existing theme.",vteWarningUnsuportedBrowserTitle:"Unsupported brower",vteWarningUnsuportedBrowserMessage:"Editing mobile themes is only supported on webkit browsers, we sugguest using Chrome or Safari to customize mobile themes.",
vteWarningToolkitMessage:"Theme version does not match workspace library version this could produce unexpected results. We suggest recreating the custom theme using the current version of Maqetta and deleting the existing theme.",vteErrorTitle:"Theme Version Error",vteErrorMessage:"Theme version is not supported by this version of Maqetta. You must recreating custom theme using the current version of Maqetta and deleting the existing theme..",vteErrorSavingResourceMessage:"error saving resource\n",
"SourceComboButton-source":"Source","SourceComboButton-splitHorizontal":"Split-H","SourceComboButton-splitVertical":"Split-V","LayoutDropDownButton-flow":"Flow","LayoutDropDownButton-absolute":"Absolute"}})},"davinci/XPathUtils":function(){define(function(){function n(g){this.node=g}n.prototype={name:function(){return this.node.nodeName},parent:function(){var g=this.node.parentNode;if(g!==this.node.ownerDocument)return new n(g)},index:function(){var g=this.node.nodeName,e=this.node.parentNode,b=!1,
d=0;e.id||(e.id="__XPATH_UTILS_TEMP_ID__"+Date.now(),b=!0);g=e.querySelectorAll("#"+e.id+"\x3e"+g);if(1<g.length)for(var h=0,a=g.length;h<a;h++)if(g[h]===this.node){d=h+1;break}b&&(e.id="");return d}};var k=/(\w+)(?:\[(\d+)\])?/;return{getXPath:function(g,e){function b(d,e){var a=e.name(),h=e.parent();return h?(e=e.index(),b((e?a+("["+e+"]"):a+"[1]")+(d?"/"+d:""),h)):"/"+a+"/"+d}e=e||n;g=new e(g);return b("",g).toLowerCase()},toCssPath:function(g){"/"===g.charAt(0)&&(g=g.substr(1));var e="";g.split("/").forEach(function(b){b=
b.match(k);var d=b[2];e+=(e?"\x3e":"")+b[1];d&&(e+=":nth-of-type("+d+")")});return e}}})},"davinci/ve/commands/AppStateCommand":function(){define("dojo/_base/declare dojo/_base/lang dojo/topic davinci/XPathUtils davinci/html/HtmlFileXPathAdapter davinci/ve/States".split(" "),function(n,k,g,e,b,d){return n("davinci.ve.commands.AppStateCommand",null,{name:"AppStateCommand",_actions:["add","remove","modify","reorder"],constructor:function(h){if(h){this._params=k.mixin({},h);var a=h.stateContainerNode;
a&&a._dvWidget&&(this._params.stateContainerId=a.id,this._params.stateContainerXpath=e.getXPath(a._dvWidget._srcElement,b));"reorder"==this._params.action&&((a=this._getStateContainerNode())&&h.newStatesList.length?(this._oldStatesList=d.getStates(a),this._oldStatesList.shift()):this._params=null)}},_validParams:function(){return this._params&&0<=this._actions.indexOf(this._params.action)&&this._params.stateContainerNode&&this._params.stateContainerId&&this._params.stateContainerXpath&&this._params.context},
_getStateContainerNode:function(){var b,a=this._params.context;if(!a)return b;var d=a.getDocument();if(!d)return b;var f=this._params.stateContainerXpath;b=d.getElementById(this._params.stateContainerId);b||(a=a.model.evaluate(f))&&(b=d.getElementById(a.getAttribute("id")));return b},execute:function(){if(this._validParams()){var b=this._params.action,a=this._params.state,e=this._getStateContainerNode();e&&("add"==b?(d.add(e,a),this._setStateAndFocus(e)):"remove"==b?(this._stateIndex=e._maqAppStates&&
e._maqAppStates.states&&e._maqAppStates.states.indexOf(a),this._preservedNodesId=[],this._preservedNodesXpath=[],this._preservedStateValues=[],this._preserveStateFromNodeRecursive(e,a),d.remove(e,a),this._setStateAndFocus(e)):"modify"==b?(this._params.newState&&(this._traverseRenameState(this._params.state,this._params.newState),g.publish("/davinci/states/state/renamed",{node:e,oldName:this._params.state,newName:this._params.newState,stateContainerNode:e})),"string"==typeof this._params.initialState&&
(this._oldInitialState=d.getInitial(e),b="undefined"==this._params.initialState?void 0:this._params.initialState,this._params.newState&&b==this._params.state&&(b=this._params.newState),d.setState(b,e,{initial:b,updateWhenCurrent:!0})),this._setStateAndFocus(e)):"reorder"==b&&e&&e._maqAppStates&&e._dvWidget&&(e._maqAppStates.states=this._params.newStatesList,b=d.stringifyWithQuotes(e._maqAppStates),e.setAttribute(d.APPSTATES_ATTRIBUTE,b),srcElement=e._dvWidget._srcElement,srcElement.setAttribute(d.APPSTATES_ATTRIBUTE,
b),g.publish("/davinci/states/statesReordered",[e,this._params.newStatesList])))}},undo:function(){if(this._validParams()){var b=this._params.action,a=this._params.state,e=this._getStateContainerNode();e&&("add"==b?(d.remove(e,a),this._setStateAndFocus(e)):"remove"==b?(d.add(e,a,{index:this._stateIndex}),this._restoreState(a),d.setState(a,e,{focus:!0}),this._setStateAndFocus(e)):"modify"==b?("string"==typeof this._params.initialState&&d.setState(this._oldInitialState,e,{initial:this._oldInitialState,
updateWhenCurrent:!0}),this._params.newState&&this._traverseRenameState(this._params.newState,this._params.state),this._setStateAndFocus(e)):"reorder"==b&&e&&e._maqAppStates&&e._dvWidget&&(e._maqAppStates.states=this._oldStatesList,b=d.stringifyWithQuotes(e._maqAppStates),e.setAttribute(d.APPSTATES_ATTRIBUTE,b),srcElement=e._dvWidget._srcElement,srcElement.setAttribute(d.APPSTATES_ATTRIBUTE,b),g.publish("/davinci/states/statesReordered",[e,this._params.newStatesList])))}},_setStateAndFocus:function(b){var a=
d.getState(b);d.setState(a,b,{focus:a,updateWhenCurrent:!0})},_preserveStateFromNodeRecursive:function(b,a){var d=b._dvWidget;if(b&&d&&a)for(this._preserveStateFromNode(b,a),b=d.getChildren(),d=0;d<b.length;d++)this._preserveStateFromNodeRecursive(b[d].domNode,a)},_preserveStateFromNode:function(d,a){d&&d._maqDeltas&&d._maqDeltas[a]&&d._dvWidget&&d._dvWidget._srcElement&&(this._preservedNodesId.push(d.id),this._preservedNodesXpath.push(e.getXPath(d._dvWidget._srcElement,b)),this._preservedStateValues.push(k.clone(d._maqDeltas[a])))},
_restoreState:function(b){var a=this._params.context;if(a&&this._preservedNodesId){var e=a.getDocument();if(e)for(var f=0;f<this._preservedNodesId.length;f++){var h=this._preservedNodesXpath[f],c=e.getElementById(this._preservedNodesId[f]);c||(h=a.model.evaluate(h))&&(c=e.getElementById(h.getAttribute("id")));c&&(c._maqDeltas||(c._maqDeltas={}),c._maqDeltas[b]=k.clone(this._preservedStateValues[f]),d._updateSrcState(c))}}},_traverseRenameState:function(b,a){var e=this._getStateContainerNode();if(e&&
(d.rename(e,{oldName:b,newName:a}),e=e._dvWidget&&e._dvWidget._srcElement)){var f=null,h=!1,c=/^(.*davinci.states.setState\s*\(\s*)('[^']*'|"[^"]*")([^\)]*\).*)$/,g=/^(['"])(.*)(['"])$/;e.visit({visit:dojo.hitch(this,function(d){if("HTMLElement"==d.elementType)f=d;else if("HTMLAttribute"==d.elementType){var e=d.name;if(e&&"on"==e.substr(0,2).toLowerCase()&&(d=d.value.match(c))){var m=d[2].match(g);m&&m[2]==b&&(f.setAttribute(e,d[1]+m[1]+a+m[3]+d[3]),h=!0)}}})});h&&(e=this._params&&this._params.context&&
this._params.context.editor)&&e._visualChanged()}}})})},"davinci/html/HtmlFileXPathAdapter":function(){define(function(){function n(k){this.elem=k}n.prototype={name:function(){return this.elem.tag},parent:function(){var k=this.elem.parent;if("HTMLFile"!==k.elementType)return new n(k)},index:function(){var k=this.elem.tag,g=this.elem.parent.children,e=0;if(1===g.length)return 0;g=g.filter(function(b){return b.tag===k});1<g.length&&g.some(function(b,d){if(b===this.elem)return e=d+1,!0},this);return e}};
return n})},"dojo/data/ItemFileWriteStore":function(){define("../_base/lang ../_base/declare ../_base/array ../_base/json ../_base/kernel ./ItemFileReadStore ../date/stamp".split(" "),function(n,k,g,e,b,d,h){return k("dojo.data.ItemFileWriteStore",d,{constructor:function(a){this._features["dojo.data.api.Write"]=!0;this._features["dojo.data.api.Notification"]=!0;this._pending={_newItems:{},_modifiedItems:{},_deletedItems:{}};this._datatypeMap.Date.serialize||(this._datatypeMap.Date.serialize=function(a){return h.toISOString(a,
{zulu:!0})});a&&!1===a.referenceIntegrity&&(this.referenceIntegrity=!1);this._saveInProgress=!1},referenceIntegrity:!0,_assert:function(a){if(!a)throw Error("assertion failed in ItemFileWriteStore");},_getIdentifierAttribute:function(){return this.getFeatures()["dojo.data.api.Identity"]},newItem:function(a,b){this._assert(!this._saveInProgress);this._loadFinished||this._forceLoad();if("object"!=typeof a&&"undefined"!=typeof a)throw Error("newItem() was passed something other than an object");var d=
null,e=this._getIdentifierAttribute();if(e===Number)d=this._arrayOfAllItems.length;else{d=a[e];if("undefined"===typeof d)throw Error("newItem() was not passed an identity for the new item");if(n.isArray(d))throw Error("newItem() was not passed an single-valued identity");}this._itemsByIdentity&&this._assert("undefined"===typeof this._itemsByIdentity[d]);this._assert("undefined"===typeof this._pending._newItems[d]);this._assert("undefined"===typeof this._pending._deletedItems[d]);var c={};c[this._storeRefPropName]=
this;c[this._itemNumPropName]=this._arrayOfAllItems.length;this._itemsByIdentity&&(this._itemsByIdentity[d]=c,c[e]=[d]);this._arrayOfAllItems.push(c);e=null;if(b&&b.parent&&b.attribute){var e={item:b.parent,attribute:b.attribute,oldValue:void 0},h=this.getValues(b.parent,b.attribute);if(h&&0<h.length){var g=h.slice(0,h.length);e.oldValue=1===h.length?h[0]:h.slice(0,h.length);g.push(c);this._setValueOrValues(b.parent,b.attribute,g,!1);e.newValue=this.getValues(b.parent,b.attribute)}else this._setValueOrValues(b.parent,
b.attribute,c,!1),e.newValue=c}else c[this._rootItemPropName]=!0,this._arrayOfTopLevelItems.push(c);this._pending._newItems[d]=c;for(var m in a){if(m===this._storeRefPropName||m===this._itemNumPropName)throw Error("encountered bug in ItemFileWriteStore.newItem");b=a[m];n.isArray(b)||(b=[b]);c[m]=b;if(this.referenceIntegrity)for(d=0;d<b.length;d++)h=b[d],this.isItem(h)&&this._addReferenceToMap(h,c,m)}this.onNew(c,e);return c},_removeArrayElement:function(a,b){b=g.indexOf(a,b);return-1!=b?(a.splice(b,
1),!0):!1},deleteItem:function(a){this._assert(!this._saveInProgress);this._assertIsItem(a);var b=a[this._itemNumPropName],d=this.getIdentity(a);if(this.referenceIntegrity){var e=this.getAttributes(a);a[this._reverseRefMap]&&(a["backup_"+this._reverseRefMap]=n.clone(a[this._reverseRefMap]));g.forEach(e,function(c){g.forEach(this.getValues(a,c),function(b){this.isItem(b)&&(a["backupRefs_"+this._reverseRefMap]||(a["backupRefs_"+this._reverseRefMap]=[]),a["backupRefs_"+this._reverseRefMap].push({id:this.getIdentity(b),
attr:c}),this._removeReferenceFromMap(b,a,c))},this)},this);if(e=a[this._reverseRefMap])for(var c in e){var h=null;if(h=this._itemsByIdentity?this._itemsByIdentity[c]:this._arrayOfAllItems[c])for(var k in e[c]){var u=this.getValues(h,k)||[],z=g.filter(u,function(a){return!(this.isItem(a)&&this.getIdentity(a)==d)},this);this._removeReferenceFromMap(a,h,k);z.length<u.length&&this._setValueOrValues(h,k,z,!0)}}}this._arrayOfAllItems[b]=null;a[this._storeRefPropName]=null;this._itemsByIdentity&&delete this._itemsByIdentity[d];
this._pending._deletedItems[d]=a;a[this._rootItemPropName]&&this._removeArrayElement(this._arrayOfTopLevelItems,a);this.onDelete(a);return!0},setValue:function(a,b,d){return this._setValueOrValues(a,b,d,!0)},setValues:function(a,b,d){return this._setValueOrValues(a,b,d,!0)},unsetAttribute:function(a,b){return this._setValueOrValues(a,b,[],!0)},_setValueOrValues:function(a,b,d,e){this._assert(!this._saveInProgress);this._assertIsItem(a);this._assert(n.isString(b));this._assert("undefined"!==typeof d);
var c=this._getIdentifierAttribute();if(b==c)throw Error("ItemFileWriteStore does not have support for changing the value of an item's identifier.");var c=this._getValueOrValues(a,b),f=this.getIdentity(a);if(!this._pending._modifiedItems[f]){var h={},m;for(m in a)h[m]=m===this._storeRefPropName||m===this._itemNumPropName||m===this._rootItemPropName?a[m]:m===this._reverseRefMap?n.clone(a[m]):a[m].slice(0,a[m].length);this._pending._modifiedItems[f]=h}f=!1;if(n.isArray(d)&&0===d.length){if(f=delete a[b],
d=void 0,this.referenceIntegrity&&c){m=c;n.isArray(m)||(m=[m]);for(var q=0;q<m.length;q++)h=m[q],this.isItem(h)&&this._removeReferenceFromMap(h,a,b)}}else{f=n.isArray(d)?d.slice(0,d.length):[d];if(this.referenceIntegrity)if(c){m=c;n.isArray(m)||(m=[m]);var k={};g.forEach(m,function(a){this.isItem(a)&&(a=this.getIdentity(a),k[a.toString()]=!0)},this);g.forEach(f,function(c){if(this.isItem(c)){var d=this.getIdentity(c);k[d.toString()]?delete k[d.toString()]:this._addReferenceToMap(c,a,b)}},this);for(q in k)this._removeReferenceFromMap(this._itemsByIdentity?
this._itemsByIdentity[q]:this._arrayOfAllItems[q],a,b)}else for(q=0;q<f.length;q++)h=f[q],this.isItem(h)&&this._addReferenceToMap(h,a,b);a[b]=f;f=!0}if(e)this.onSet(a,b,c,d);return f},_addReferenceToMap:function(a,b,d){b=this.getIdentity(b);var f=a[this._reverseRefMap];f||(f=a[this._reverseRefMap]={});(a=f[b])||(a=f[b]={});a[d]=!0},_removeReferenceFromMap:function(a,b,d){b=this.getIdentity(b);var f=a[this._reverseRefMap],c;if(f){for(c in f)c==b&&(delete f[c][d],this._isEmpty(f[c])&&delete f[c]);this._isEmpty(f)&&
delete a[this._reverseRefMap]}},_dumpReferenceMap:function(){var a;for(a=0;a<this._arrayOfAllItems.length;a++);},_getValueOrValues:function(a,b){var d=void 0;this.hasAttribute(a,b)&&(a=this.getValues(a,b),d=1==a.length?a[0]:a);return d},_flatten:function(a){if(this.isItem(a))return{_reference:this.getIdentity(a)};if("object"===typeof a)for(var b in this._datatypeMap){var d=this._datatypeMap[b];if(n.isObject(d)&&!n.isFunction(d)){if(a instanceof d.type){if(!d.serialize)throw Error("ItemFileWriteStore:  No serializer defined for type mapping: ["+
b+"]");return{_type:b,_value:d.serialize(a)}}}else if(a instanceof d)return{_type:b,_value:a.toString()}}return a},_getNewFileContentString:function(){var a={},b=this._getIdentifierAttribute();b!==Number&&(a.identifier=b);this._labelAttr&&(a.label=this._labelAttr);a.items=[];for(b=0;b<this._arrayOfAllItems.length;++b){var d=this._arrayOfAllItems[b];if(null!==d){var h={},c;for(c in d)if(c!==this._storeRefPropName&&c!==this._itemNumPropName&&c!==this._reverseRefMap&&c!==this._rootItemPropName){var g=
this.getValues(d,c);if(1==g.length)h[c]=this._flatten(g[0]);else for(var k=[],u=0;u<g.length;++u)k.push(this._flatten(g[u])),h[c]=k}a.items.push(h)}}return e.toJson(a,!0)},_isEmpty:function(a){var b=!0;if(n.isObject(a))for(var d in a){b=!1;break}else n.isArray(a)&&0<a.length&&(b=!1);return b},save:function(a){this._assert(!this._saveInProgress);this._saveInProgress=!0;var d=this,f=function(){d._pending={_newItems:{},_modifiedItems:{},_deletedItems:{}};d._saveInProgress=!1;a&&a.onComplete&&a.onComplete.call(a.scope||
b.global)},e=function(c){d._saveInProgress=!1;a&&a.onError&&a.onError.call(a.scope||b.global,c)};if(this._saveEverything){var c=this._getNewFileContentString();this._saveEverything(f,e,c)}this._saveCustom&&this._saveCustom(f,e);this._saveEverything||this._saveCustom||f()},revert:function(){this._assert(!this._saveInProgress);for(var a in this._pending._modifiedItems){var b=this._pending._modifiedItems[a],d=null,d=this._itemsByIdentity?this._itemsByIdentity[a]:this._arrayOfAllItems[a];b[this._storeRefPropName]=
this;for(var e in d)delete d[e];n.mixin(d,b)}var c;for(a in this._pending._deletedItems)c=this._pending._deletedItems[a],c[this._storeRefPropName]=this,b=c[this._itemNumPropName],c["backup_"+this._reverseRefMap]&&(c[this._reverseRefMap]=c["backup_"+this._reverseRefMap],delete c["backup_"+this._reverseRefMap]),this._arrayOfAllItems[b]=c,this._itemsByIdentity&&(this._itemsByIdentity[a]=c),c[this._rootItemPropName]&&this._arrayOfTopLevelItems.push(c);for(a in this._pending._deletedItems)c=this._pending._deletedItems[a],
c["backupRefs_"+this._reverseRefMap]&&(g.forEach(c["backupRefs_"+this._reverseRefMap],function(a){this._addReferenceToMap(this._itemsByIdentity?this._itemsByIdentity[a.id]:this._arrayOfAllItems[a.id],c,a.attr)},this),delete c["backupRefs_"+this._reverseRefMap]);for(a in this._pending._newItems)b=this._pending._newItems[a],b[this._storeRefPropName]=null,this._arrayOfAllItems[b[this._itemNumPropName]]=null,b[this._rootItemPropName]&&this._removeArrayElement(this._arrayOfTopLevelItems,b),this._itemsByIdentity&&
delete this._itemsByIdentity[a];this._pending={_newItems:{},_modifiedItems:{},_deletedItems:{}};return!0},isDirty:function(a){return a?(a=this.getIdentity(a),(new Boolean(this._pending._newItems[a]||this._pending._modifiedItems[a]||this._pending._deletedItems[a])).valueOf()):!this._isEmpty(this._pending._newItems)||!this._isEmpty(this._pending._modifiedItems)||!this._isEmpty(this._pending._deletedItems)},onSet:function(a,b,d,e){},onNew:function(a,b){},onDelete:function(a){},close:function(a){if(this.clearOnClose){if(this.isDirty())throw Error("dojo.data.ItemFileWriteStore: There are unsaved changes present in the store.  Please save or revert the changes before invoking close.");
this.inherited(arguments)}}})})},"davinci/ve/views/SwitchingStyleView":function(){define("dojo/_base/declare dojo/_base/kernel davinci/lang/ve dijit/lang/_common xide/utils dijit/layout/ContentPane davinci/Runtime davinci/workbench/WidgetLite davinci/ve/widgets/HTMLStringUtil davinci/ve/widgets/WidgetToolBar davinci/ve/widgets/Cascade davinci/ve/widgets/CommonProperties davinci/ve/widgets/WidgetProperties davinci/ve/widgets/EventSelection xide/registry".split(" "),function(n,k,g,e,b,d,h,a,m,f,q,c,
p,y,u){return n("davinci.ve.views.SwitchingStyleView",[a],{_editor:null,_widget:null,_subWidget:null,_titleBarDiv:"\x3cdiv class\x3d'palette_titleBarDiv'\x3e\x3cspan class\x3d'paletteCloseBox'\x3e\x3c/span\x3e\x3cspan class\x3d'titleBarDivTitle'\x3e\x3c/span\x3e\x3c/div\x3e",constructor:function(a,c){},pageTemplate:[{key:"widgetSpecific",className:"maqPropertySection page_editor_only",addCommonPropertiesAtTop:!1,html:"\x3cdiv dojoType\x3d'davinci.ve.widgets.WidgetProperties'\x3e\x3c/div\x3e"},{key:"events",
className:"maqPropertySection page_editor_only",addCommonPropertiesAtTop:!1,pageTemplate:{html:"\x3cdiv dojoType\x3d'davinci.ve.widgets.EventSelection'\x3e\x3c/div\x3e"}},{key:"layout",className:"maqPropertySection",addCommonPropertiesAtTop:!0,pageTemplate:[{display:"width",type:"multi",target:["width"],values:["","auto","100%","200px","10em"]},{display:"height",type:"multi",target:["height"],values:["","auto","100%","200px","10em"]},{html:"\x26nbsp;"},{key:"showMinMax",display:"\x26nbsp;\x26nbsp;\x26nbsp;",
type:"toggleSection",pageTemplate:[{display:"min-height",type:"multi",target:["min-height"],rowClass:"propertiesSectionHidden"},{display:"max-height",type:"multi",target:["max-height"],rowClass:"propertiesSectionHidden"},{display:"min-width",type:"multi",target:["min-width"],rowClass:"propertiesSectionHidden"},{display:"max-width",type:"multi",target:["max-width"],rowClass:"propertiesSectionHidden"},{html:"\x26nbsp;",rowClass:"propertiesSectionHidden"}]},{display:"position",type:"combo",target:["position"],
values:["","absolute","relative"]},{display:"left",type:"multi",target:["left"],values:["","0px","1em"]},{display:"top",type:"multi",target:["top"],values:["","0px","1em"]},{display:"right",type:"multi",target:["right"],values:["","0px","1em"]},{display:"bottom",type:"multi",target:["bottom"],values:["","0px","1em"]},{display:"display",type:"combo",target:["display"],values:["","none","block","inline","inline-block"]},{display:"opacity",type:"multi",target:["opacity"],values:["0","0.5","1.0"]},{display:"box-shadow",
type:"text",target:["box-shadow"],value:["","none","1px 1px rgba(0,0,0,.5)"]},{display:"float",type:"combo",target:["float"],values:["","none","left","right"]},{display:"clear",type:"combo",target:["clear"],values:["","none","left","right","both"]},{display:"overflow",type:"combo",target:["overflow"],values:["","visible","hidden","scroll","auto"]},{display:"z-index",type:"multi",target:["z-index"],values:" auto 0 1 100 -1 -100".split(" ")},{display:"box-sizing",type:"combo",target:["box-sizing","-webkit-box-sizing",
"-ms-box-sizing","-moz-box-sizing"],values:["","content-box","border-box"]}]},{key:"padding",className:"maqPropertySection",addCommonPropertiesAtTop:!0,pageTemplate:[{display:"\x3cb\x3e(padding)\x3c/b\x3e",type:"multi",target:["padding"],values:["","0px","1em"]},{key:"showtrbl",display:"\x26nbsp;\x26nbsp;\x26nbsp;",type:"toggleSection",pageTemplate:[{display:"padding-top",type:"multi",target:["padding-top"],values:["","0px","1em"],rowClass:"propertiesSectionHidden"},{display:"padding-right",type:"multi",
target:["padding-right"],values:["","0px","1em"],rowClass:"propertiesSectionHidden"},{display:"padding-bottom",type:"multi",target:["padding-bottom"],values:["","0px","1em"],rowClass:"propertiesSectionHidden"},{display:"padding-left",type:"multi",target:["padding-left"],values:["","0px","1em"],rowClass:"propertiesSectionHidden"}]}]},{key:"margins",className:"maqPropertySection",addCommonPropertiesAtTop:!0,pageTemplate:[{display:"\x3cb\x3e(margin)\x3c/b\x3e",type:"multi",target:["margin"],values:["",
"0px","1em"]},{key:"showtrbl",display:"\x26nbsp;\x26nbsp;\x26nbsp;",type:"toggleSection",pageTemplate:[{display:"margin-top",type:"multi",target:["margin-top"],values:["","0px","1em"],rowClass:"propertiesSectionHidden"},{display:"margin-right",type:"multi",target:["margin-right"],values:["","0px","1em"],rowClass:"propertiesSectionHidden"},{display:"margin-bottom",type:"multi",target:["margin-bottom"],values:["","0px","1em"],rowClass:"propertiesSectionHidden"},{display:"margin-left",type:"multi",target:["margin-left"],
values:["","0px","1em"],rowClass:"propertiesSectionHidden"}]}]},{key:"background",className:"maqPropertySection",addCommonPropertiesAtTop:!0,pageTemplate:[{display:"background-color",type:"background",target:["background-color"],colorswatch:!0},{display:"background-image",type:"background",target:["background-image"],values:["","none"]},{display:"background-repeat",type:"background",values:["","repeat","repeat-x","repeat-y","no-repeat"],target:["background-repeat"]},{display:"background-position",
type:"background",target:["background-position"],values:";0px 0px;0% 0%;left top;center center;right bottom".split(";")},{display:"background-size",type:"background",target:["background-size"],values:["","auto","contain","cover","100%"]},{display:"background-origin",type:"background",target:["background-origin"],values:["","border-box","padding-box","content-box"]},{display:"background-clip",type:"background",target:["background-clip"],values:["","border-box","padding-box","content-box"]}]},{key:"border",
className:"maqPropertySection",addCommonPropertiesAtTop:!0,pageTemplate:[{display:"\x3cb\x3e(border)\x3c/b\x3e",type:"multi",target:["border"],values:["","none","1px solid black"]},{display:"show",type:"combo",values:["none","props","sides","all"],id:"properties_show_select",onchange:function(a){if("number"==typeof a){var c=function(a,c,b,d,f){for(;c<=b;c++){var e=k.byId(a[c].rowId);c>=d&&c<=f?k.removeClass(e,"propertiesSectionHidden"):k.addClass(e,"propertiesSectionHidden")}};if(this.pageTemplate){a=
this.pageTemplate[a];var b;a&&a.id&&(a=k.byId(a.id))&&(b=a.value);k.isString(b)&&("none"===b?c(this.pageTemplate,2,20,-1,-1):"sides"===b?c(this.pageTemplate,2,20,2,5):"props"===b?c(this.pageTemplate,2,20,6,8):"all"===b&&c(this.pageTemplate,2,20,9,20))}}}},{display:"border-top",type:"multi",target:["border-top"],values:["","none","1px solid black"],rowClass:"propertiesSectionHidden"},{display:"border-right",type:"multi",target:["border-right"],values:["","none","1px solid black"],rowClass:"propertiesSectionHidden"},
{display:"border-bottom",type:"multi",target:["border-bottom"],values:["","none","1px solid black"],rowClass:"propertiesSectionHidden"},{display:"border-left",type:"multi",target:["border-left"],values:["","none","1px solid black"],rowClass:"propertiesSectionHidden"},{display:"border-width",type:"multi",target:["border-width"],values:["","1px","1em"],rowClass:"propertiesSectionHidden"},{display:"border-style",type:"multi",target:["border-style"],values:["","none","solid","dotted","dashed"],rowClass:"propertiesSectionHidden"},
{display:"border-color",type:"color",target:["border-color"],rowClass:"propertiesSectionHidden"},{display:"border-top-width",type:"multi",target:["border-top-width"],values:["","1px","1em"],rowClass:"propertiesSectionHidden"},{display:"border-top-style",type:"multi",target:["border-top-style"],values:["","none","solid","dotted","dashed"],rowClass:"propertiesSectionHidden"},{display:"border-top-color",type:"color",target:["border-top-color"],rowClass:"propertiesSectionHidden"},{display:"border-right-width",
type:"multi",target:["border-right-width"],values:["","1px","1em"],rowClass:"propertiesSectionHidden"},{display:"border-right-style",type:"multi",target:["border-right-style"],values:["","none","solid","dotted","dashed"],rowClass:"propertiesSectionHidden"},{display:"border-right-color",type:"color",target:["border-right-color"],rowClass:"propertiesSectionHidden"},{display:"border-bottom-width",type:"multi",target:["border-bottom-width"],values:["","1px","1em"],rowClass:"propertiesSectionHidden"},
{display:"border-bottom-style",type:"multi",target:["border-bottom-style"],values:["","none","solid","dotted","dashed"],rowClass:"propertiesSectionHidden"},{display:"border-bottom-color",type:"color",target:["border-bottom-color"],rowClass:"propertiesSectionHidden"},{display:"border-left-width",type:"multi",target:["border-left-width"],values:["","1px","1em"],rowClass:"propertiesSectionHidden"},{display:"border-left-style",type:"multi",target:["border-left-style"],values:["","none","solid","dotted",
"dashed"],rowClass:"propertiesSectionHidden"},{display:"border-left-color",type:"color",target:["border-left-color"],rowClass:"propertiesSectionHidden"},{display:"border-collapse",type:"combo",target:["border-collapse"],values:["","separate","collapse"]},{display:"\x3cb\x3e(border-radius)\x3c/b\x3e",type:"multi",target:["border-radius","-moz-border-radius"],values:["","0px","6px"]},{key:"showDetails",display:"",type:"toggleSection",pageTemplate:[{display:"border-top-left-radius",type:"multi",target:["border-top-left-radius",
"-moz-border-radius-topleft"],values:["","0px","6px"],rowClass:"propertiesSectionHidden"},{display:"border-top-right-radius",type:"multi",target:["border-top-right-radius","-moz-border-radius-topright"],values:["","0px","6px"],rowClass:"propertiesSectionHidden"},{display:"border-bottom-right-radius",type:"multi",target:["border-bottom-right-radius","-moz-border-radius-bottomright"],values:["","0px","6px"],rowClass:"propertiesSectionHidden"},{display:"border-bottom-left-radius",type:"multi",target:["border-bottom-left-radius",
"-moz-border-radius-bottomleft"],values:["","0px","6px"],rowClass:"propertiesSectionHidden"}]}]},{key:"fontsAndText",className:"maqPropertySection",addCommonPropertiesAtTop:!0,pageTemplate:[{display:"font",type:"text",target:["font"]},{display:"font-family",type:"font",target:["font-family"]},{display:"size",type:"multi",target:["font-size"],values:["","100%","1em","10px","10pt"]},{display:"color",type:"color",target:["color"]},{display:"font-weight",type:"combo",target:["font-weight"],values:["",
"normal","bold"]},{display:"font-style",type:"combo",target:["font-style"],values:["","normal","italic"]},{display:"text-decoration",type:"combo",target:["text-decoration"],values:["","none","underline","line-through"]},{display:"text-align",type:"combo",target:["text-align"],values:["","left","center","right","justify"]},{display:"vertical-align",type:"combo",target:["vertical-align"],values:["","baseline","top","middle","bottom"]},{display:"white-space",type:"combo",target:["white-space"],values:" normal nowrap pre pre-line pre-wrap".split(" ")},
{display:"text-indent",type:"multi",target:["text-indent"],values:["","0","1em","10px"]},{display:"line-height",type:"multi",target:["line-height"],values:["","normal","1.2","120%"]}]}],buildRendering:function(){this.domNode=k.doc.createElement("div");k.addClass(this.domNode,"propertiesContent");var a;a=""+this._titleBarDiv;for(var c=0;c<this.pageTemplate.length;c++)if(this.pageTemplate[c].title=g[this.pageTemplate[c].key]?g[this.pageTemplate[c].key]:"Key not found",this.pageTemplate[c].pageTemplate)for(var b=
0;b<this.pageTemplate[c].pageTemplate.length;b++)this.pageTemplate[c].pageTemplate[b].key&&(this.pageTemplate[c].pageTemplate[b].display+=g[this.pageTemplate[c].pageTemplate[b].key]?g[this.pageTemplate[c].pageTemplate[b].key]:"Key not found");this.domNode.innerHTML=a+"\x3cdiv class\x3d'propertiesToolBar' dojoType\x3d'davinci.ve.widgets.WidgetToolBar'\x3e\x3c/div\x3e\x3cdiv dojoType\x3d'davinci.ve.widgets.WidgetProperties'\x3e\x3c/div\x3e\x3cdiv class\x3d'propScrollableArea'\x3e\x3ctable class\x3d'propRootDetailsContainer'\x3e\x3ctr\x3e\x3ctd class\x3d'propPaletteRoot'\x3e";
this.inherited(arguments)},_widgetValuesChanged:function(a){var c=this._currentPropSection;if(c){for(var b=!1,d=0;d<this.pageTemplate.length;d++)if(this.pageTemplate[d].key==c){b=!0;break}if(b)for(c=this._getVisibleCascade(d),b=0;b<c.length;b++)c[b]._widgetValuesChanged(a)}},_getVisibleCascade:function(a){if(a)return this.pageTemplate[a].cascade;a=[];var c=this._currentPropSection;if(c)for(var b=0;b<this.pageTemplate.length;b++)if(this.pageTemplate[b].key==c){a=a.concat(this.pageTemplate[b].cascade);
break}return a},_updatePaletteValues:function(a){if(this._editor){var c=a[0];this._subwidget=(this._widget=c)&&c.subwidget;this.setReadOnly(!(this._widget||this._subwidget));for(var c=this._getVisibleCascade(),b=0;b<c.length;b++)c[b]._widgetSelectionChanged(a)}},_widgetSelectionChanged:function(a){!0!==a.isFake&&this._updatePaletteValues(a.selection)},_stateChanged:function(){this._updatePaletteValues(this._widget?[this._widget]:[])},_widgetPropertiesChanged:function(a){this._widget&&this._widget.type!==
a[0].type||this._updatePaletteValues(a)},_titlePaneOpen:function(a){a=this._getVisibleCascade(a);for(var c=0;c<a.length;c++)a[c]._editorSelected({editor:this._editor})},startup:function(){this.domNode.style.height="100%";this._editor=h.currentEditor;this.inherited(arguments);for(var a=0;a<this.pageTemplate.length;a++){var c=this.pageTemplate[a];if(c.pageTemplate)for(var b=0;b<c.pageTemplate.length;b++){var d=c.pageTemplate[b];d.onchange&&d.id&&this.addHandle("onchange",k.connect(k.byId(d.id),"onchange",
k.hitch(c,d.onchange,b)))}}for(a=0;a<this.pageTemplate.length;a++)this.pageTemplate[a].cascade=[];try{this.setReadOnly(!0)}catch(r){logError(r,"set read only crashed ! "+r)}this.onEditorSelected();this.subscribe("/davinci/ui/widgetValuesChanged",k.hitch(this,this._widgetValuesChanged));this.subscribe("/davinci/ui/widgetPropertiesChanged",k.hitch(this,this._widgetPropertiesChanged));this.subscribe("/davinci/ui/editorSelected",k.hitch(this,this._editorSelected));this.subscribe("/davinci/ui/widgetSelected",
k.hitch(this,this._widgetSelectionChanged));this.subscribe("/davinci/states/state/changed",k.hitch(this,this._stateChanged));this.subscribe("/maqetta/appstates/state/changed",k.hitch(this,this._stateChanged));this.subscribe("/davinci/ui/initialPerspectiveReady",k.hitch(this,this._initialPerspectiveReady));this.subscribe("/davinci/workbench/ready",k.hitch(this,this._workbenchReady))},setReadOnly:function(a){for(var c=0;c<this.pageTemplate.length;c++){var b=this.pageTemplate[c].pageTemplate;if(b)for(var d=
0;d<b.length;d++){var f=b[d].widget;f?f.set("readOnly",a):(f=b[d].domNode)&&k.attr(f,"disabled",a)}}},_modelEntryById:function(a){for(var c=0;c<this.pageTemplate.length;c++){var b=this.pageTemplate[c].pageTemplate;if(b)for(var d=0;d<b.length;d++)if(a==b[d].id)return b[d]}},_editorSelected:function(a){this._editor=a.editor;this.onEditorSelected(this._editor);a=this.tabContainer;this.getParent();var c=a.selectedChildWidget||a.getSelected(),b=!1,d=k.query(".maqPropertySection",a.domNode);this._editor?
"davinci.ve.PageEditor"!=this._editor.declaredClass&&"davinci.ve.themeEditor.ThemeEditor"!=this._editor.declaredClass?d.forEach(function(a){dijit.byNode(a)==c&&(b=!0)}):(d.forEach(function(a){}),"davinci.ve.themeEditor.ThemeEditor"==this._editor.declaredClass&&k.query(".page_editor_only",a.domNode).forEach(function(a){dijit.byNode(a)==c&&(b=!0)})):(d.forEach(function(a){dijit.byNode(a)}),b=!0);b&&this._selectFirstVisibleTab()},onEditorSelected:function(){this._subWidget=this._widget=null;if(this._oldClassName)if(this.domNode)k.removeClass(this.domNode.parentNode.parentNode,
this._oldClassName);else{console.error("have no dom node ! : "+this.id);return}if(this._editor)if(this._editor&&this._editor.editorID&&(this._oldClassName=this._editor.editorID.replace(/\./g,"_"),this.domNode?k.addClass(this.domNode.parentNode.parentNode,this._oldClassName):console.error("have no dom node !")),this.domNode){for(var a=this._currentPropSection,c=k.query(".propSectionButton",this.domNode),b=0;b<c.length;b++){var d=c[b];this._editor&&this._editor.supports&&this._editor.supports("propsect_"+
this.pageTemplate[b].key)?k.removeClass(d,"dijitHidden"):(k.addClass(d,"dijitHidden"),a==this.pageTemplate[b].key&&m.showRoot())}a=[];for(b=0;b<this.pageTemplate.length;b++)(c=this.pageTemplate[b].cascade)&&(a=a.concat(c));for(b=0;b<a.length;b++)c=a[b],c._editorSelected&&c._editorSelected({editor:this._editor})}else console.error("have no dom node !")},_destroyContent:function(){var a=this.containerNode||this.domNode;for(k.forEach(k.query("[widgetId]",a).map(dijit.byNode),function(a){a.destroy()});a.firstChild;)k._destroyElement(a.firstChild);
k.forEach(this._tooltips,function(a){a.destroy()});this._tooltips=void 0;this._destroyHandles()},sectionTitleFromKey:function(a){for(var c=0;c<this.pageTemplate.length;c++)if(this.pageTemplate[c].key==a)return this.pageTemplate[c].title},_initialPerspectiveReady:function(){var a=null;if(!this._alreadySplitIntoMultipleTabs){var c=this.tabContainer;k.addClass(c.domNode,"propRootDetailsContainer");k.addClass(c.domNode,"propertiesContent");for(var f=0;f<this.pageTemplate.length;f++){var a=this.pageTemplate[f].key,
e=this.pageTemplate[f].title,h=this.pageTemplate[f].className;h||(h="");var p=this._titleBarDiv,p=p+"\x3cdiv class\x3d'propertiesToolBar' dojoType\x3d'davinci.ve.widgets.WidgetToolBar'\x3e\x3c/div\x3e",p=p+("\x3cdiv class\x3d'cascadeBackButtonDiv'\x3e\x3cbutton class\x3d'btn btn-xs btn-info' onclick\x3d'davinci.ve.widgets.HTMLStringUtil.showSection(\""+a+'","'+e+"\")'\x3e"+e+" "+g.properties+"\x3c/button\x3e\x3c/div\x3e"),a=m.generateTemplate(this.pageTemplate[f]),a=p+a;0==f?(a=this,a.set("title",
e),k.addClass(a.domNode,h)):(p=c.createTab(e,null,null,null,{"class":h,delegate:this}),a=b.addWidget(d,{title:e,content:a,"class":h,delegate:this},null,p,!1),p.cp=a,p._maqPropGroup=this.pageTemplate[f].key,p.add(a,null,!1));a._maqPropGroup=this.pageTemplate[f].key;e=k.query(".paletteCloseBox",a.domNode);0<e.length&&k.connect(e[0],"click",this,function(a){davinci.Workbench.collapsePaletteContainer(a.currentTarget)})}for(e=0;e<this.pageTemplate.length;e++)if(this.pageTemplate[e].cascade=[],h=this.pageTemplate[e].pageTemplate){for(f=
0;f<h.length;f++)p=h[f].id,(a=dijit.byId(p))?h[f].widget=a:(a=k.byId(p))&&(h[f].domNode=a);k.query("#"+this.pageTemplate[e].id+" .CascadeTop").forEach(function(a){return function(c){c=dijit.byId(c.id);a.cascade.push(c)}}(this.pageTemplate[e]))}c._on("selectChild",function(a){a._maqPropGroup&&(this._currentPropSection=a._maqPropGroup,a=(a=this._editor&&this._editor.getContext?this._editor.getContext():null)&&a.getSelection?a.getSelection():[],this._updatePaletteValues(a),m._initSection(this._currentPropSection))}.bind(this));
this._alreadySplitIntoMultipleTabs=!0}},_workbenchReady:function(){this._updateToolBars()},_updateToolBars:function(){k.query(".propertiesToolBar").forEach(function(a){this._editor&&"davinci.ve.PageEditor"==this._editor.declaredClass?(k.removeClass(a,"dijitHidden"),a.style.display=""):k.addClass(a,"dijitHidden")}.bind(this))},_selectFirstVisibleTab:function(){var a=this.getParent();if(a&&a.getChildren)for(var c=a.getChildren(),b=0;b<c.length;b++){var d=c[b];if("none"!=d.controlButton.domNode.style.display){a._maqDontExpandCollapse=
!0;a.selectChild(d);delete a._maqDontExpandCollapse;break}}}})})},"davinci/workbench/WidgetLite":function(){define(["dojo/_base/declare","dijit/_WidgetBase","dojo/parser","xide/mixins/EventedMixin"],function(n,k,g,e){return n("davinci.workbench.WidgetLite",[k,e],{buildRendering:function(){this.inherited(arguments);/dojotype/i.test(this.domNode.innerHTML||"")&&(this._startupWidgets=dojo.parser.parse(this.domNode,{noStart:!this._earlyTemplatedStartup,inherited:{dir:this.dir,lang:this.lang}}))},_destroyContent:function(){var b=
this.containerNode||this.domNode;for(dojo.forEach(dojo.query("[widgetId]",b).map(dijit.byNode),function(b){b.destroy()});b.firstChild;)dojo._destroyElement(b.firstChild);dojo.forEach(this._tooltips,function(b){b.destroy()});delete this._tooltips;this._destroyHandles()},destroy:function(){this._destroyHandles();this.inherited(arguments)},startup:function(){dojo.forEach(this._startupWidgets,function(b){b&&!b._started&&b.startup&&b.startup()});this.inherited(arguments)}})})},"davinci/ve/widgets/HTMLStringUtil":function(){define("davinci/Runtime ./FontDataStore ./FontComboBox ./DropDown dijit/form/ComboBox ./MetaDataStore ./ColorPicker ./Background2".split(" "),
function(n,k){var g=dojo.getObject("davinci.ve.widgets.HTMLStringUtil",!0);dojo.mixin(g,{__id:0,idPrefix:"davinci_ve_widgets_properties_generated",_currentPropSection:null,animSS:null,animRuleIndex:{},getCurrentPropSection:function(){return this._currentPropSection},getId:function(){return this.idPrefix+this.__id++},injectId:function(e,b){var d=e.indexOf("\x3e");return d?e.substring(0,d)+" id\x3d'"+b+"'"+e.substring(d,e.length):"\x3cspan id\x3d'"+b+"'\x3e"+e+"\x3c/span\x3e"},getEditor:function(e){function b(a){var b=
{};b.value="undefined"!=typeof a.value&&null!==a.value?a.value:a;b.title=a.title||b.value;return b}var d=e.type,h=this.getId();e.id=h;var a=e.disabled?" disabled\x3d'true' ":"";switch(d){case "multi":return d="",e.values&&(d="data\x3d'"+dojo.toJson(dojo.map(e.values,function(a){return{value:a}}))+"'"),"\x3cdiv dojoType\x3d'davinci.ve.widgets.MultiInputDropDown' "+d+"  class\x3d'propertyPaneEditablevalue' style\x3d'display:inline-block; width:100%;' id\x3d'"+h+"'"+a+"\x3e\x3c/div\x3e";case "boolean":return"\x3cinput type\x3d'checkbox' class\x3d'propertyPaneEditablevalue' style\x3d'display:inline-block;margin-left:5px' id\x3d'"+
h+"'\x3e\x3c/input\x3e";case "comboEdit":e=e.values;h="\x3cselect dojoType\x3d'dijit.form.ComboBox' autoComplete\x3d'false' style\x3d'display:inline-block; width:100%;' id\x3d'"+h+"'"+a+"\x3e";for(a=0;a<e.length;a++)d=b(e[a]),h+="\x3coption class\x3d'option' value\x3d'"+d.value+"'\x3e"+d.title+"\x3c/option\x3e";return h+"\x3c/select\x3e";case "combo":e=e.values;h="\x3cselect class\x3d'form-control input-transparent' style\x3d'display:inline-block; width:100%;' id\x3d'"+h+"'"+a+"\x3e";for(a=0;a<e.length;a++)d=
b(e[a]),h+="\x3coption class\x3d'option' value\x3d'"+d.value+"'\x3e"+d.title+"\x3c/option\x3e";return h+"\x3c/select\x3e";case "font":return h="\x3cdiv dojoType\x3d'davinci.ve.widgets.FontDataStore' jsId\x3d'"+h+"_fontStore'\x3e"+("\x3cdiv dojoType\x3d'davinci.ve.widgets.FontComboBox' value\x3d'"+k.fonts[0].value+"' store\x3d'"+h+"_fontStore'  id\x3d'"+h+"' class\x3d'propertyPaneEditablevalue' style\x3d'display:inline-block; width:100%;'\x3e\x3c/div\x3e");case "stateold":return"\x3cdiv dojoType\x3d'davinci.ve.widgets.MetaDataStore' jsId\x3d'davinci.properties.event"+
h+"_Store'\x3e"+("\x3cdiv dojoType\x3d'dijit.form.ComboBox' id\x3d'"+h+"'store\x3d'davinci.properties.event"+h+"_Store' class\x3d'propertyPaneEditablevalue' style\x3d'display:inline-block; width:100%;' autoComplete\x3d'false'\x3e\x3c/div\x3e");case "color":return"\x3cdiv class\x3d'propertyPaneEditablevalue' dojoType\x3d'davinci.ve.widgets.ColorPicker' id\x3d'"+h+"' \x3e\x3c/div\x3e";case "background":return d=dojo.isArray(e.values)?" data\x3d'"+dojo.toJson(e.values)+"'":"",a=dojo.isArray(e.target)?
e.target[0]:e.target,h="\x3cdiv dojoType\x3d'davinci.ve.widgets.Background' id\x3d'"+h+"'"+d+(" propname\x3d'"+a+"'")+(e.colorswatch?" colorswatch\x3d'true'":"")+"\x3e\x3c/div\x3e";case "border":case "number":case "object":case "text":case "array":case "widgetState":case "iconClass":case "state":case "string":if("date"==e.format)return"\x3cdiv class\x3d'propertyPaneEditablevalue' dojoType\x3d'dijit.form.DateTextBox' id\x3d'"+h+"'\x3e\x3c/input\x3e";if("time"==e.format)return"\x3cdiv class\x3d'propertyPaneEditablevalue' dojoType\x3d'dijit.form.TimeTextBox' id\x3d'"+
h+"'\x3e\x3c/input\x3e";default:return h=e.data&&!0===e.data.readonly?"\x3cinput readonly type\x3d'text' class\x3d'form-control input-transparent propertyPaneEditablevalue' style\x3d'display:inline-block; width:100%;' id\x3d'"+h+"'\x3e\x3c/input\x3e":"\x3cinput type\x3d'text' class\x3d'form-control input-transparent propertyPaneEditablevalue' style\x3d'display:inline-block; width:100%;' id\x3d'"+h+"'\x3e\x3c/input\x3e"}},generateTable:function(e,b){var d=b?b.rowsOnly:!1,h=b&&b.zeroSpaceForIncrDecr?
"0px":"20px";b="";if(e.html)return e.id=this.getId(),this.injectId(e.html,e.id);h="\x3ctable class\x3d'property_table_stretchable' border\x3d'0' width\x3d'100%' align\x3d'center' cellspacing\x3d'0' cellpadding\x3d'0'\x3e\x3ccolgroup\x3e\x3ccol style\x3d'width:6px;' /\x3e\x3ccol class\x3d'gap02' /\x3e\x3ccol class\x3d'gap03' /\x3e"+("\x3ccol style\x3d'width:"+h+";' /\x3e")+"\x3ccol style\x3d'width:6px;' /\x3e\x3c/colgroup\x3e";d||(b+=h);for(var a=0;a<e.length;a++)if(e[a].widgetHtml)e[a].id=this.getId(),
e[a].rowId=this.getId(),b+="\x3ctr id\x3d'"+e[a].rowId+"'",e[a].rowClass&&(b+=" class\x3d'"+e[a].rowClass+"'"),b+="\x3e",b+="\x3ctd colspan\x3d'5' width\x3d'100%'\x3e",b+=this.injectId(e[a].widgetHtml,e[a].id),b+="\x3c/td\x3e",b+="\x3c/tr\x3e";else if(e[a].html)e[a].id=this.getId(),e[a].rowId=this.getId(),b+="\x3ctr id\x3d'"+e[a].rowId+"'",b+=" class\x3d'cssPropertySection",e[a].rowClass&&(b+=" "+e[a].rowClass),b+="'\x3e",b+="\x3ctd colspan\x3d'5' width\x3d'100%'\x3e",b+=e[a].html,b+="\x3c/td\x3e",
b+="\x3c/tr\x3e";else if("toggleSection"==e[a].type){b+="\x3ctr id\x3d'"+e[a].id+"'  class\x3d'cssPropertySection'\x3e\x3ctd colspan\x3d'5'\x3e";for(var g="",f=this.generateTable(e[a].pageTemplate,{rowsOnly:!0}),q=0;q<e[a].pageTemplate.length;q++)e[a].pageTemplate[q].rowId&&(g+="dojo.toggleClass('"+e[a].pageTemplate[q].rowId+"','propertiesSectionHidden');"),e[a].pageTemplate[q].cascadeSectionRowId&&(g+="if(this.checked){dojo.removeClass('"+e[a].pageTemplate[q].cascadeSectionRowId+"','propertiesSectionHidden');}else{{dojo.addClass('"+
e[a].pageTemplate[q].cascadeSectionRowId+"','propertiesSectionHidden');}}");b+="\x3cinput type\x3d'checkbox' onclick\x3d\""+g+'"\x3e\x3c/input\x3e';b+=e[a].display;b+="\x3c/td\x3e\x3c/tr\x3e";b+=f}else e[a].display?(e[a].toggleCascade=this.getId(),e[a].cascadeSection=this.getId(),e[a].rowId=this.getId(),e[a].cascadeSectionRowId=this.getId(),b+="\x3ctr id\x3d'"+e[a].rowId+"'",b+=" class\x3d'cssPropertySection",e[a].rowClass&&(b+=" "+e[a].rowClass),b+="'",b+=" propName\x3d'"+e[a].display+"'",b+="\x3e",
b+="\x3ctd/\x3e",b+="\x3ctd class\x3d'propertyDisplayName'\x3e"+e[a].display+":\x26nbsp;\x3c/td\x3e",b+="\x3ctd class\x3d'propertyInputField propertyInputField"+e[a].type+"' \x3e"+this.getEditor(e[a])+"\x3c/td\x3e",b+="\x3ctd class\x3d'propertyExtra' nowrap\x3d'true'\x3e",b+="\x3ctd class\x3d'propertyExtra2' nowrap\x3d'true'\x3e",e[a].target&&!e[a].hideCascade&&(b+="\x3cdiv width\x3d'100%'\x3e\x3cbutton class\x3d'showCss propertyButton' id\x3d'"+e[a].toggleCascade+"'",b+=' onClick\x3d"davinci.ve.widgets.HTMLStringUtil.showProperty(',
b+="'"+e[a].rowId+"'",b+=')"\x3e\x26gt;\x3c/button\x3e',b+="\x3c/div\x3e"),b+="\x3ctd/\x3e",b+="\x3c/tr\x3e",e[a].target&&!e[a].hideCascade&&(g="{'cascadeSectionRowId':\""+e[a].cascadeSectionRowId+"\",'toggleCascade':\""+e[a].toggleCascade+'"}',b+="\x3ctr id\x3d'"+e[a].cascadeSectionRowId+"' class\x3d'cssCascadeSection cascadeRowHidden'\x3e",b+="\x3ctd colspan\x3d'5' width\x3d'100%' class\x3d'showCascadeDiv'\x3e\x3cdiv dojoType\x3d'davinci.ve.widgets.Cascade' toggleClasses\x3d"+g+" target\x3d'"+dojo.toJson(e[a].target)+
"' targetField\x3d'\""+e[a].id+"\"' id\x3d'"+e[a].cascadeSection+"'\x3e\x3c/div\x3e\x3c/td\x3e\x3c/tr\x3e")):(b+="\x3c/table\x3e",b+=this.getEditor(e[a]),b+=h);d||(b+="\x3c/table\x3e");return b},generateTemplate:function(e){var b="";e.pageTemplate?(e.key&&(e.id=this.getId(),b="\x3cdiv class\x3d'propGroup' id\x3d'"+e.id+"' propGroup\x3d'"+e.key+"'\x3e"),b+=this.generateTable(e.pageTemplate),b+="\x3c/div\x3e"):e.html?b+=e.html:e.widgetHtml&&(e.id=this.getId(),b+=this.injectId(e.widgetHtml,e.id));return b},
stylesheetHref:"propview.css",animShowSectionClass:"propRootDetailsContainer",animShowSectionClassSelector:".propRootDetailsContainer",animShowDetailsClass:"property_table_stretchable",animShowDetailsClassSelector:".property_table_stretchable",showPropAnimClasses:["propRowFadeIn","propRowFadeOut","propRowTransparent","propRowOpaque","propRowHidden"],showRoot:function(){this._hideSectionShowRoot();this._currentPropSection=null;return!1},showSection:function(e,b){this._initSection(e);return!1},showProperty:function(e){function b(c){dojo.disconnect(z);
dojo.disconnect(A);d();var b=a._findRule(a.animShowDetailsClassSelector);b?(c=b.ss,b=b.ruleIndex,c.deleteRule(b),c.insertRule(a.animShowDetailsClassSelector+" { margin-top:0px; }",b),h()):console.error("HTMLStringUtil showProperty: transEnd: rule not found")}var d=function(){for(var c=0;c<q.children.length;c++){var b=q.children[c];1==b.nodeType&&dojo.hasClass(b,"cssPropertySection")&&(b==f?a._addRemoveClasses(b,g,[]):a._addRemoveClasses(b,g,["propRowHidden"]))}},h=function(){p&&(dojo.removeClass(p,
"cascadeRowHidden"),dojo.addClass(p,"cascadeRowTransparent"),setTimeout(function(){dojo.removeClass(p,"cascadeRowTransparent");dojo.addClass(p,"cascadeRowFadeIn")},1))};dojo.addClass(dojo.byId("root"),"showingCascade");var a=this,g=this.showPropAnimClasses,f=dojo.byId(e),q=f.parentNode,c=a._searchSiblingsByTagClass(q.children[0],"TR","cssPropertySection"),p=a._searchSiblingsByTagClass(f.nextSibling,"TR","cssCascadeSection");e=a._searchUpByTagClass(q,"TABLE",a.animShowDetailsClass);var k=a._searchUpByTagClass(f,
"DIV","propGroup"),k=dojo.attr(k,"propGroup");dojo.attr(f,"propName");require("davinci/ve/views/SwitchingStyleView").prototype.sectionTitleFromKey(k);if(n.supportsCSS3Transitions){var c=dojo.marginBox(c),c=dojo.marginBox(f).t-c.t,u=a._findRule(a.animShowDetailsClassSelector);if(u){var k=u.ss,u=u.ruleIndex,z=dojo.connect(e,"webkitTransitionEnd",b),A=dojo.connect(e,"transitionend",b);k.deleteRule(u);k.insertRule(a.animShowDetailsClassSelector+" { margin-top:-"+c+"px; opacity:.99; -webkit-transition: all .6s ease; -moz-transition: all .6s ease; }",
u);e=!1;for(c=0;c<q.children.length;c++)k=q.children[c],1==k.nodeType&&dojo.hasClass(k,"cssPropertySection")&&(k==f?(a._addRemoveClasses(k,g,["propRowFadeIn"]),e=!0):e?a._addRemoveClasses(k,g,["propRowHidden"]):a._addRemoveClasses(k,g,["propRowTransparent"]))}else console.error("HTMLStringUtil showProperty: transEnd: rule not found")}else d(),h()},_initSection:function(e){for(var b=this.showPropAnimClasses,d=this._getRootTD(),h=dojo.query(".propGroup",d),a,d=0;d<h.length;d++){var g=h[d];dojo.attr(g,
"propGroup")==e?(dojo.removeClass(g,"dijitHidden"),a=g):dojo.addClass(g,"dijitHidden")}h=dojo.query(".cssPropertySection",a);for(d=0;d<h.length;d++)this._addRemoveClasses(h[d],b,[]);b=dojo.query(".cssCascadeSection",a);for(d=0;d<b.length;d++)dojo.addClass(b[d],"cascadeRowHidden");this._currentPropSection=e;dojo.removeClass(dojo.byId("root"),"showingCascade")},_hideSectionShowRoot:function(){var e=this._getRootTD();dojo.removeClass(e,"dijitHidden")},_findRule:function(e){function b(a,d){for(var f=
0;f<a.cssRules.length;f++){var e=a.cssRules[f];if(3===e.type){if(e=b(e.styleSheet,d))return e}else if(e.selectorText==d)return{ss:a,ruleIndex:f}}}if(this.animSS&&"number"==typeof this.animRuleIndex[e]){var d=this.animRuleIndex[e];if(this.animSS.cssRules[d].selectorText==e)return{ss:this.animSS,ruleIndex:d}}for(d=0;d<document.styleSheets.length;d++){var h=b(document.styleSheets[d],e);if(h)return this.animSS=h.ss,this.animRuleIndex[e]=h.ruleIndex,h}return null},_addRemoveClasses:function(e,b,d){for(var h=
[],a=0;a<b.length;a++){for(var g=!1,f=0;f<d.length;f++)if(b[a]==d[f]){g=!0;break}g||h.push(b[a])}for(a=0;a<h.length;a++)dojo.removeClass(e,h[a]);for(a=0;a<d.length;a++)dojo.addClass(e,d[a])},_searchUpByTagClass:function(e,b,d){for(;null!=e&&"BODY"!=e.nodeName;){if(e.nodeName==b&&(!d||dojo.hasClass(e,d)))return e;e=e.parentNode}return null},_searchSiblingsByTagClass:function(e,b,d){for(;null!=e;){if(e.nodeName==b&&(!d||dojo.hasClass(e,d)))return e;e=e.nextSibling}return null},_getRootDetailsContainer:function(){this._rootDetailsContainer||
(this._rootDetailsContainer=dojo.query(this.animShowSectionClassSelector)[0]);return this._rootDetailsContainer},_getRootTD:function(){var e=this._getRootDetailsContainer();this._rootTD||(this._rootTD=dojo.query(".propPaletteRoot",e)[0]);return this._rootTD}});return g})},"davinci/ve/widgets/FontDataStore":function(){define(["dojo/_base/declare","dojo/data/ItemFileReadStore","davinci/lang/ve","dijit/lang/_common"],function(n,k){n=n("davinci.ve.widgets.FontDataStore",k,{_allValues:[],constructor:function(g){this.setValues(g.values||
davinci.ve.widgets.FontDataStore.fonts)},setValues:function(g){this._allValues=this._allValues.concat(g);this._jsonData={label:"name",identifier:"value",items:this._allValues};this._loadFinished=!1},contains:function(g){for(var e=0;e<this._allValues.length;e++)if(this._allValues[e].value==g||this._allValues[e].name==g)return e;return!1},clearValues:function(){this._allValues=[];this._loadFinished=!1},lookupValue:function(g){g=this.contains(g);return this._allValues[g].value[0]}});return dojo.mixin(n,
{fonts:[{name:"",value:""},{name:"Arial,Helvetica,sans-serif",value:"Arial,Helvetica,sans-serif"},{name:"'Arial Black,Gadget',sans-serif",value:"'Arial Black,Gadget',sans-serif"},{name:"'Comic Sans MS',cursive",value:"'Comic Sans MS',cursive"},{name:"'Courier New',Courier,monospace",value:"'Courier New',Courier,monospace"},{name:"Geneva,Tahoma,sans-serif",value:"Geneva,Tahoma,sans-serif"},{name:"Georgia,serif",value:"Georgia,serif"},{name:"'Helvetica,Trebuchet MS',sans-serif",value:"'Helvetica,Trebuchet MS',sans-serif"},
{name:"Impact,Charcoal,sans-serif",value:"Impact,Charcoal,sans-serif"},{name:"'Lucida Console',Monaco,monospace",value:"'Lucida Console',Monaco,monospace"},{name:"'Lucida Sans Unicode','Lucida Grande',sans-serif",value:"'Lucida Sans Unicode','Lucida Grande',sans-serif"},{name:"'Lucida Console', Monaco, monospace",value:"'Lucida Console', Monaco, monospace"},{name:"'Palatino Linotype','Book Antiqua',Palatino,serif",value:"'Palatino Linotype','Book Antiqua',Palatino,serif"},{name:"Symbol",value:"Symbol"},
{name:"Tahoma,Geneva,sans-serif",value:"Tahoma,Geneva,sans-serif"},{name:"'Times New Roman',Times,serif",value:"'Times New Roman',Times,serif"},{name:"'Trebuchet MS',Helvetica,sans-serif",value:"'Trebuchet MS',Helvetica,sans-serif"},{name:"Verdana,Geneva,sans-serif",value:"Verdana,Geneva,sans-serif"},{name:"Webdings",value:"Webdings"},{name:"Wingdings, 'Zapf Dingbats'",value:"Wingdings, 'Zapf Dingbats'"},{name:"'Zapf Dingbats', Wingdings",value:"'Zapf Dingbats', Wingdings"},{name:"sans-serif",value:"sans-serif"},
{name:"serif",value:"serif"},{name:"monospace",value:"monospace"},{name:"cursive",value:"cursive"},{name:"LCD",value:"LCD"}]})})},"davinci/ve/widgets/FontComboBox":function(){define(["dojo/_base/declare","dijit/form/ComboBox","davinci/lang/ve","dijit/lang/_common"],function(n,k){return n("davinci.ve.widgets.FontComboBox",k,{_getValueAttr:function(){if(this.store)for(var g=0;g<this.store._allValues.length;g++){var e=this.store._allValues[g];if(e.name[0]==this.value)return e.value[0]}return this.value},
_setValueAttr:function(g){this.store&&g?this.store.fetch({query:{value:g},onComplete:function(e,b){1>e.length?this.inherited("_setValueAttr",[g]):(this.inherited("_setValueAttr",[e[0].name[0]]),this.item=e[0])}.bind(this),onError:function(){this.inherited("_setValueAttr",[g])}.bind(this)}):this.inherited("_setValueAttr",[g])}})})},"davinci/ve/widgets/DropDown":function(){define("dcl/dcl xdojo/declare xide/types xide/utils xide/factory dojo/_base/lang dojo/_base/kernel xide/widgets/TemplatedWidgetBase xide/form/Select xide/data/TreeMemory xide/data/ObservableStore dstore/Trackable".split(" "),
function(n,k,g,e,b,d,h,a,m,f,q,c){var p=n(a,{numberDelta:1,templateString:"\x3cdiv \x3e\x3c/div\x3e",insertPosition:1,declaredClass:"davinci.ve.widgets.MultiInputDropDown",data:null,divider:"---",postCreate:function(){},get:function(a){return"value"===a&&this._dropDown?this._getValueAttr():""},startup:function(){var a=h.doc.createElement("div");this._run={};var d=this;this.data?(this.data.push({value:p.divider}),this.data.push({label:"Remove Value",value:"Remove Value",run:function(){this.set("value",
"",!1);d._dropDown.set("value","",!0)}})):this.data=[{value:"auto"},{value:"0px"},{value:p.divider},{value:"Remove Value",run:function(){this.set("value","",!1);d._dropDown.set("value","")}},{value:p.divider},{value:"Help",run:function(){alert("help!")}}];for(var e=[],g=0;g<this.data.length;g++)e.push(this.data[g].value),this.data[g].run&&(this._run[this.data[g].value]=this.data[g].run);var x=[];_.each(this.data,function(a){(a.value||"Remove Value"===a.label)&&x.push({label:a.label||a.value,value:a.value,
run:a.run})});this._dropDown=new m({EDITABLE_CLASS:m.TYPEAHEAD,storeClass:k("driverStore",[f,c,q],{setValues:function(a){var c=[],b=0;a&&(this._values=a);h.forEach(this.data,h.hitch(this,function(a){c.push({label:a.label,value:a.value,id:b++})}));this._jsonData={identifier:"id",items:c};this.setData(c);this.root._emit("update",{target:null})},modifyItem:function(a,c){for(var b=0;b<this.data.length;b++)this.data[b].value===a&&(this.data[b].value=c);d._dropDown.set("value",c);this.setValues()},insert:function(a,
c){this.data.splice(a,0,{value:c,label:c});this.setValues()},contains:function(a){for(var c=0;c<this.data.length;c++)if(this.data[c].value==a)return!0;return!1},findSimilar:function(a){if(a=(new RegExp(/(\D*)(-?)(\d+)(\D*)/)).exec(a)){a=new RegExp((0<a.length?a[1]:"")+"(-?)(\\d+)"+(3<a.length?a[4]:""));for(var c=0;c<this.data.length;c++)if(a.test(this.data[c].value))return this.data[c].value}},getItemNumber:function(a){return this.data[a]},clearValues:function(){this._loadFinished=!1}}),required:!1,
title:"",editable:!0,options:x,userData:{}});this._dropDown.startup();this._store=this._dropDown.store;this._plus=e=b.createButton(this._dropDown.previewNode,"fa-plus","btn-default btn-xs2",null,"");h.style(e,"float","right");this._minus=b.createButton(this._dropDown.button0,"fa-minus","btn-default btn-xs2",null,"");e=h.create("div",{"class":"propInputWithIncrDecrButtons"});e.appendChild(this._dropDown.domNode);a.appendChild(e);e=h.doc.createElement("div");h.style(e,"clear","both");a.appendChild(e);
this._currentValue=this._store.data[0];h.connect(this._dropDown,"onKeyUp",this,"_updateSpinner");var n=this;this._dropDown._on?this._dropDown._on("change",function(a){n._onChange(a)}):h.connect(this._dropDown,"onChange",this,"_onChange");h.connect(this._plus,"onclick",this,"_plusButton",!1);h.connect(this._minus,"onclick",this,"_minusButton",!1);this._updateSpinner();this.domNode.appendChild(a);this.add(this._dropDown);this.add(this._store)},_setReadOnlyAttr:function(a){this._isReadOnly=a;this._dropDown&&
(this._dropDown.set("disabled",a),h.attr(this._plus,"disabled",a),h.attr(this._minus,"disabled",a))},onChange:function(a){},_getValueAttr:function(){return this._dropDown.get("value")},_setValueAttr:function(a,c){this._dropDown.set("value",a,!0);this._currentValue=this._dropDown.get("value");!1!==c&&this._onChange(this._currentValue);if(!c)this.onChange()},_changeValue:function(a,c){a=a.split(" ");for(var b="",d=0;d<a.length;d++){0<d&&(b+=" ");var f=a[d].match(/([-\d\.]+)([a-zA-Z%]*)/);if(f)if(1==
f.length)b+=f[0];else for(var e=1;e<f.length;e++)b=isNaN(f[e])||""==f[e]?b+f[e]:b+(parseFloat(f[e])+c);else b+=a[d]}return b},_plusButton:function(){var a=this._dropDown.get("value"),c=this._changeValue(a,this.numberDelta);this._store.modifyItem(a,c);this._dropDown.set("value",c);this._onChange(c)},_minusButton:function(){var a=this._dropDown.get("value"),c=this._changeValue(a,-1*this.numberDelta);this._store.modifyItem(a,c);this._dropDown.set("value",c);this._onChange(c)},_updateSpinner:function(){var a=
this._dropDown.get("value"),a=/(-?)(\d+){1}/.exec(a);this._minus.disabled=a&&a.length?this._plus.disabled=!1:this._plus.disabled=!0;return!0},_onChange:function(a){var c;a in this._run?(this._dropDown.get("value",this._store.getItemNumber(0)),h.hitch(this,this._run[a])()):a==p.divider?this._dropDown.get("value",this._store.getItemNumber(0)):(c=this._store.findSimilar(a))?this._store.modifyItem(c,a):this._store.contains(a)||this._store.insert(this.insertPosition,a);this._currentValue!=this._dropDown.get("value")&&
(this._currentValue=this._dropDown.get("value"),this.onChange(a));this._updateSpinner()}});d.setObject("davinci.ve.widgets.MultiInputDropDown",p);return p})},"davinci/ve/widgets/MetaDataStore":function(){define(["dojo/_base/declare","dojo/data/ItemFileReadStore","davinci/lang/ve","dijit/lang/_common"],function(n,k){return n("davinci.ve.widgets.MetaDataStore",k,{_allValues:[],constructor:function(g){this.setValues(g&&g.values||[])},setValues:function(g){dojo.mixin(this._allValues,g);var e=[];dojo.forEach(this._allValues,
function(b){e.push({name:b,value:b})});this._jsonData={identifier:"name",items:e};this._loadFinished=!1},contains:function(g){return-1!=dojo.indexOf(this._allValues,g)},clearValues:function(){this._allValues=[];this._loadFinished=!1}})})},"davinci/ve/widgets/ColorPicker":function(){define(["davinci/ve/widgets/ColorPicker2","dijit/popup"],function(n){return n})},"davinci/ve/widgets/ColorPicker2":function(){define(["xide/widgets/ColorPickerWidget","xide/utils","dcl/dcl","xide/widgets/TemplatedWidgetBase",
"dojo/_base/lang"],function(n,k,g,e,b){g=g(e,{templateString:"\x3cdiv \x3e\x3c/div\x3e",numberDelta:1,insertPosition:9,data:null,_onChange:function(b){},_setValueAttr:function(b,e){if(this._dropDown&&(this._dropDown.set("value",b.replace("#",""),!0),this._currentValue=this._dropDown.get("value"),!1!==e&&this._onChange(this._currentValue),!e&&b!==this._currentValue))this.onChange()},set:function(b,e){if("value"===b&&this._dropDown)return this._setValueAttr(e)},get:function(b){return"value"===b&&this._dropDown?
this._getValueAttr():""},postCreate:function(){},startup:function(){var b=k.addWidget(n,{title:""},null,this.domNode,!0);this._dropDown=b;this._value=this._value||"";this._dropDown.set("value",this._value.replace("#",""),!0);var e=this;this._dropDown._on("change",function(a){e._value=e._getValueAttr();e.onChange(e._value)});this.add(b)},_setReadOnlyAttr:function(b){this._isReadOnly=b;this._dropDown.set("disabled",b)},onChange:function(){this._value=this._dropDown.get("value")},_getValueAttr:function(){return this._dropDown.get("value")}});
dojo.mixin(g,{divider:"---"});b.setObject("davinci.ve.widgets.ColorPicker",g);return g})},"davinci/ve/widgets/Background2":function(){define("dcl/dcl xdojo/declare xide/types xide/utils xide/factory xgrid/Grid dojo/dom-class dojo/dom-attr xide/widgets/TemplatedWidgetBase xide/data/TreeMemory xide/data/ObservableStore dstore/Trackable dojo/_base/lang davinci/ve/widgets/ColorPickerFlat davinci/lang/ve davinci/ve/widgets/ColorStore xide/form/Select davinci/ve/widgets/MutableStore davinci/ve/widgets/BackgroundDialog xide/views/_PanelDialog davinci/ve/utils/CssUtils dojo/Deferred davinci/ve/utils/URLRewrite davinci/model/Path".split(" "),
function(n,k,g,e,b,d,h,a,m,f,q,c,p,y,u,z,A,x,w,r,v,B,C,F){var E=0;n=n(m,{declaredClass:"davinci.ve.widgets.Background",templateString:"\x3cdiv \x3e\x3c/div\x3e",__id:0,data:null,get:function(a){if(this._comboBox)return this._comboBox.get("value")},startup:function(){this._textFieldId="davinci_ve_widgets_properties_border_generated"+E++;this._buttonId="davinci_ve_widgets_properties_border_generated"+E++;var a=dojo.create("div",{className:"bgPropButtonDiv",style:"float:right; width:28px;"});dojo.create("button",
{innerHTML:"...",id:this._buttonId,className:"bgPropButton btn-info",style:"font-size:1em;"},a);var b=38,d=this._colorswatch="true"==this.colorswatch;if(d){var b=56,h=dojo.doc.createElement("div");dojo.addClass(h,"colorPicker");this._selectedColor=dojo.doc.createElement("div");this._selectedColor.innerHTML="\x26nbsp;";dojo.addClass(this._selectedColor,"colorPickerSelected");dojo.addClass(this._selectedColor,"colorPickerSelectedSkinny");this._colorPickerFlat=new y({})}var b=dojo.create("div",{className:"bgPropComboDiv",
style:"margin-right:"+b+"px;padding:1px 0;"}),g=dojo.isArray(this.data)?this.data:[""],p=this.langObjVE=u;if(d){this._statics=["",davinci.ve.widgets.ColorPicker.divider,p.colorPicker,p.removeValue];this._run={};this.data?(this.data.push({value:davinci.ve.widgets.ColorPicker.divider}),this.data.push({value:langObj.removeValue,run:function(){this.set("value","")}})):(this.data=[{value:this._statics[0]}],this.data.push({value:this._statics[2],run:this._chooseColorValue}),this.data.push({value:this._statics[3],
run:function(){this.set("value","")}}),this.data.push({value:this._statics[1]}),this.data.push({value:"transparent"}),this.data.push({value:"black"}),this.data.push({value:"white"}),this.data.push({value:"red"}),this.data.push({value:"green"}),this.data.push({value:"blue"}));g=[];for(p=0;p<this.data.length;p++)g.push(this.data[p].value),this.data[p].run&&(this._run[this.data[p].value]=this.data[p].run);this._store=new z({values:g,noncolors:this._statics})}else this._store=new x({values:g});var m=
[];_.each(this.data,function(a){a&&(_.isString(a)&&a.length?m.push({label:a,value:a,run:a.run}):!_.isObject(a)||_.isString(a.value)&&!a.value.length||m.push({label:a.label||a.value,value:a.value,run:a.run}))});this._comboBox=new A({EDITABLE_CLASS:A.TYPEAHEAD,storeClass:k("driverStore",[f,c,q],{setValues:function(a){var c=[],b=0;a&&(this._values=a);dojo.forEach(this.data,dojo.hitch(this,function(a){c.push({label:a.label,value:a.value,id:b++})}));this._jsonData={identifier:"id",items:c};this.setData(c);
this.root._emit("update",{target:null})},modifyItem:function(a,c){for(var b=0;b<this.data.length;b++)this.data[b].value===a&&(this.data[b].value=c);n._dropDown.set("value",c);this.setValues()},insert:function(a,c){this.data.splice(a,0,{value:c,label:c});this.setValues()},contains:function(a){for(var c=0;c<this.data.length;c++)if(this.data[c].value==a)return!0;return!1},findSimilar:function(a){if(a=(new RegExp(/(\D*)(-?)(\d+)(\D*)/)).exec(a)){a=new RegExp((0<a.length?a[1]:"")+"(-?)(\\d+)"+(3<a.length?
a[4]:""));for(var c=0;c<this.data.length;c++)if(a.test(this.data[c].value))return this.data[c].value}},getItemNumber:function(a){return this.data[a]},clearValues:function(){this._loadFinished=!1}}),required:!1,title:"",editable:!0,options:m,userData:{},id:this._textFieldId});this._comboBox.startup();b.appendChild(this._comboBox.domNode);this.domNode.appendChild(a);d&&(this.domNode.appendChild(h),dojo.connect(h,"onclick",dojo.hitch(this,function(a){dojo.stopEvent(a);this._chooseColorValue()})),h.appendChild(this._selectedColor),
this._colorPickerFlat_comboBoxUpdateDueTo="colorSwatch");this.domNode.appendChild(b);"string"==typeof this.propname&&this._comboBox&&(davinci.ve._BackgroundWidgets||(davinci.ve._BackgroundWidgets={}),davinci.ve._BackgroundWidgets[this.propname]={propPaletteWidget:this,comboBox:this._comboBox});this._button=dojo.byId(this._buttonId);dojo.connect(this._button,"onclick",this,function(){var a=this._cascade&&this._cascade._widget&&this._cascade._widget.getContext?this._cascade._widget.getContext():null,
c=new w({context:a}),b=dojo.hitch(this,function(c){a||(console.error("Background.js. no context"),a={});var b=a.cascadeBatch={},d=b.propList=[],f=b.actions={},e=b.deferreds={};b.askUserResponse=void 0;if(!c.cancel){var h=davinci.ve._BackgroundWidgets,g;for(g in h){var p=h[g];if(p.bgdWidget){var b=p.bgdWidget.get("value"),m=p.propPaletteWidget.get("value");b!==m&&(d.push(g),f[g]=dojo.hitch(this,function(a,c){a.propPaletteWidget._comboBoxUpdateDueTo="backgroundDialog";a.propPaletteWidget.set("value",
c)},p,b),e[g]=new B)}}g="background-image";p=h[g];c=v.buildBackgroundImage(c.bgddata);for(b=0;b<c.length;b++)m=c[b],C.containsUrl(m)&&!C.isAbsolute(m)&&((h=C.getUrl(m))&&(m="url('"+(new F(h)).toString()+"')"),c[b]=m);b=0==c.length?"":c[c.length-1];m=p.propPaletteWidget.get("value");b!==m&&(p.propPaletteWidget._cascade&&(p.propPaletteWidget._cascade._valueArrayNew=c),d.push(g),f[g]=dojo.hitch(this,function(a,c){p.propPaletteWidget._comboBoxUpdateDueTo="backgroundDialog";p.propPaletteWidget.set("value",
c)},p,b),e[g]=new B);for(b=0;b<d.length;b++)g=d[b],e[g].then(dojo.hitch(this,function(c){(c=d[c+1])?f[c].apply():delete a.cascadeBatch},b));0<d.length&&(g=d[0],f[g].apply())}return!0},c),d=davinci.ve._BackgroundWidgets,f;for(f in d){var h=d[f].propPaletteWidget._cascade;h&&(h._valueArrayNew=h._valueArray)}c.set("baseLocation",this._baseLocation);(new r({onOk:function(){b()},onShow:function(a,b,d){e.addChild(b,c,!0);this.add(c,null,!1);this.startDfd.resolve();return[c]}})).show()});var n=this;this._comboBox._on("change",
function(a){n._onChange(a)});this.add(this._comboBox);this._maqStartupComplete=!0},_setBaseLocationAttr:function(a){this._baseLocation=a},_setValueAttr:function(a){var c=this._comboBox.get("value");this._colorswatch&&dojo.style(this._selectedColor,"backgroundColor",a);a=dojo.isArray(a)?0<a.length?a[a.length-1]:"":a;c!==a&&("backgroundDialog"!==this._comboBoxUpdateDueTo&&"colorSwatch"!==this._comboBoxUpdateDueTo&&(this._comboBoxUpdateDueTo="setAttr"),this._comboBox.set("value",a))},_onChange:function(a){this._colorswatch&&
"string"==typeof a&&(a in this._run?dojo.hitch(this,this._run[a])():a==davinci.ve.widgets.ColorPicker.divider?this._comboBox.set("value",this._store.getItemNumber(0)):dojo.style(this._selectedColor,"backgroundColor",a));this.value=this._comboBox.get("value");this.onChange(a)},onChange:function(a){},_getValueAttr:function(){return this._comboBox.get("value")},_setReadOnlyAttr:function(a){this._maqStartupComplete&&(this._isReadOnly=a,this._comboBox.set("disabled",a),this._button.disabled=a)},isLeftToRight:function(){return!0},
_chooseColorValue:function(){if(!this._isReadOnly){var a=this._comboBox.get("value");davinci.ve.widgets.ColorPickerFlat.show(this._colorPickerFlat,a,this,!0)}}});p.setObject("davinci.ve.widgets.Background",n);return n})},"davinci/ve/widgets/ColorPickerFlat":function(){define("dojo/_base/declare dijit/_Widget dijit/TooltipDialog dijit/form/Button dojox/widget/ColorPicker davinci/lang/ve dijit/lang/_common".split(" "),function(n,k,g,e,b,d,h){n=n("davinci.ve.widgets.ColorPickerFlat",[k],{numberDelta:1,
insertPosition:1,data:null,postCreate:function(){this.inherited(arguments);var a=dojo.doc.createElement("div");this._colorPicker=new b({});a.appendChild(this._colorPicker.domNode);var d=dojo.doc.createElement("div"),f=e({label:h.buttonOk});f.innerHtml="OK";d.appendChild(f.domNode);var g=e({label:h.buttonCancel});d.appendChild(g.domNode);a.appendChild(d);this.domNode.appendChild(a);dojo.connect(f,"onClick",this,"_onOk");dojo.connect(g,"onClick",this,"onCancel");delete this.canceled},onClose:function(){},
onCancel:function(){this._value=null;this.canceled=!0},_onOk:function(){delete this.canceled;this._value=this._colorPicker.get("value");this.onClose()},_getValueAttr:function(){return this._value},_setValueAttr:function(a){a=new dojo.Color(a);this._colorPicker.setColor(a.toHex())}});return dojo.mixin(n,{show:function(a,b,f,e){var c=new g({id:"maqetta_prop_tooltip_color_picker",title:d.selectColor,content:a});dijit.popup.moveOffScreen(c.domNode);var h=!1,m=function(a){return function(){h&&(h=!1,dijit.popup.close(c))}}();
c.connect(a,"onCancel",m);c.connect(a,"onClose",m);var q=dijit.byNode(dojo.query("[widgetId]",c.domNode)[0]);b in dojo.Color.named?(b=dojo.colorFromString(b),a.set("value",b.toHex())):a.set("value",b||"",!0);(function(a){return function(){dijit.popup.open({parent:f,popup:c,around:f.domNode,orient:e?{BL:"TL",BR:"TR",TL:"BL",TR:"BR"}:{BR:"TR",BL:"TL",TR:"BR",TL:"BL"},onClose:function(){q.canceled||(f._colorPickerFlat_comboBoxUpdateDueTo&&(f._comboBoxUpdateDueTo=f._colorPickerFlat_comboBoxUpdateDueTo),
f.get("value"),f.set("value",q.get("value")));m();c.destroy()}});h=!0;dijit.focus(c.containerNode)}})()()}})})},"davinci/ve/widgets/ColorStore":function(){define(["dojo/_base/declare","dojo/data/ItemFileReadStore","davinci/lang/ve","dijit/lang/_common"],function(n,k){return n("davinci.ve.widgets.ColorStore",k,{constructor:function(g){this.clearValues();g.noncolors&&(this.noncolors=g.noncolors);g.values&&this.setValues(g.values)},setValues:function(g){var e=[];g&&(this._values=g);dojo.forEach(this._values,
dojo.hitch(this,function(b){for(var d=!1,h=0;!d&&h<this.noncolors.length;h++)this.noncolors[h]==b&&(d=!0);d?e.push({name:b,value:b,label:b}):e.push({value:b,name:b,label:"\x3ctable\x3e\x3ctr\x3e\x3ctd style\x3d'width:10em'\x3e"+b+"\x3c/td\x3e\x3ctd style\x3d'width:10px;height:10px;background-color:"+b+"'\x3e\x3c/td\x3e\x3c/tr\x3e\x3c/table\x3e"})}));this._jsonData={identifier:"value",items:e};this._loadFinished=!1},insert:function(g,e){this._values.splice(g,0,e);this.setValues()},contains:function(g){for(var e=
0;e<this._values.length;e++)if(this._values[e]==g)return!0;return!1},getItemNumber:function(g){return this._values[g]},clearValues:function(){this._loadFinished=!1}})})},"davinci/ve/widgets/MutableStore":function(){define(["dojo/_base/declare","dojo/data/ItemFileReadStore","davinci/lang/ve","dijit/lang/_common"],function(n,k,g,e){return n("davinci.ve.widgets.MutableStore",k,{constructor:function(b){this.clearValues();b.divider&&(this.divider=b.divider);b.values&&this.setValues(b.values)},setValues:function(b){var d=
[],e=0;b&&(this._values=b);dojo.forEach(this._values,dojo.hitch(this,function(a){d.push({name:a,value:a,id:e++})}));this._jsonData={identifier:"id",items:d};this._loadFinished=!1},modifyItem:function(b,d){for(var e=0;e<this._values.length;e++)this._values[e]==b&&(this._values[e]=d);this.setValues()},insert:function(b,d){this._values.splice(b,0,d);this.setValues()},contains:function(b){for(var d=0;d<this._values.length;d++)if(this._values[d]==b)return!0;return!1},findSimilar:function(b){if(b=(new RegExp(/(\D*)(-?)(\d+)(\D*)/)).exec(b)){b=
new RegExp((0<b.length?b[1]:"")+"(-?)(\\d+)"+(3<b.length?b[4]:""));for(var d=0;d<this._values.length;d++)if(b.test(this._values[d]))return this._values[d]}},getItemNumber:function(b){return this._values[b]},clearValues:function(){this._loadFinished=!1}})})},"davinci/ve/widgets/BackgroundDialog":function(){define("dojo/_base/declare dijit/_WidgetBase dijit/_TemplatedMixin dijit/_WidgetsInTemplateMixin davinci/Runtime davinci/ve/widgets/MutableStore davinci/ve/widgets/ColorStore xide/utils dojo/text!./templates/BackgroundDialog.html davinci/ve/utils/CssUtils davinci/lang/ve dijit/lang/_common davinci/ve/utils/URLRewrite dojo/parser dojo/_base/lang davinci/model/Path dijit/form/Button davinci/ve/widgets/ColorPicker davinci/ve/widgets/ColorPickerFlat dijit/form/Textarea davinci/ui/widgets/FileFieldDialog".split(" "),
function(n,k,g,e,b,d,h,a,m,f,q,c,p,y,u){y._clearCache();var z=function(a,c){return"url('"+c+"')"};n=n("davinci.ve.widgets.BackgroundDialog",[k,g,e],{templateString:m,widgetsInTemplate:!0,_filePicker:null,context:null,veNLS:q,stopRowTemplate:"\x3ctr class\x3d'bgdGradOptRow bgdStopRow' style\x3d'display:none;'\x3e\x3ctd class\x3d'bgdCol1'\x3e\x3c/td\x3e\x3ctd class\x3d'bgdOptsLabel bdgStopLabel'\x3e"+q.bgdTemplate+"\x3c/td\x3e\x3ctd class\x3d'bgdStopColorTD'\x3e\x3cselect class\x3d'bgdColor' dojoType\x3d'dijit.form.ComboBox'\x3e\x3c/select\x3e\x3c/td\x3e\x3ctd\x3e\x3cselect class\x3d'bgdPosition' dojoType\x3d'dijit.form.ComboBox'\x3e\x3c/select\x3e\x3c/td\x3e\x3ctd class\x3d'bgdPlusMinusButtons'\x3e\x3cspan class\x3d'bgdPlusButton' dojoType\x3d'dijit.form.Button'\x3e+\x3c/span\x3e\x3cspan class\x3d'bgdMinusButton' dojoType\x3d'dijit.form.Button'\x3e-\x3c/span\x3e\x3c/td\x3e\x3c/tr\x3e",
postMixInProperties:function(){this.inherited(arguments);dojo.mixin(this,c)},postCreate:function(){this.inherited(arguments);var a=this.langObj=q;this.stoppos_store=new d({values:"0% 100% 10% 20% 30% 40% 50% 60% 70% 80% 90%".split(" ")});var c=davinci.ve._BackgroundWidgets;this._statics=["",davinci.ve.widgets.ColorPicker.divider,a.colorPicker,a.removeValue];var b=[{value:this._statics[0]}];b.push({value:this._statics[2],action:"_colorpicker"});b.push({value:this._statics[3],action:"_removevalue"});
b.push({value:this._statics[1],action:"_donothing"});b.push({value:"transparent"});b.push({value:"black"});b.push({value:"white"});b.push({value:"red"});b.push({value:"green"});b.push({value:"blue"});var e=[];this._bgcolor_action={};var g=[];this._stops_action={};for(var p=0;p<b.length;p++)e.push(b[p].value),b[p].action&&(this._bgcolor_action[b[p].value]=b[p].action),""!=b[p].value&&"_removevalue"!=b[p].action&&(g.push(b[p].value),b[p].action&&(this._stops_action[b[p].value]=b[p].action));this._bgcolor_store=
new h({values:e,noncolors:this._statics});this._stops_store=new h({values:g,noncolors:this._statics});var b=c["background-image"].comboBox.get("value"),m,k;"string"==typeof b&&0<b.length?(m=f.parseBackgroundImage(b),k=m.type):m={};this.bgddata=m;this.bgdOtherTA.set("value",b);var u=[];"emptystring url linear radial none other".split(" ").forEach(function(c){u.push({value:c,label:a["bgdType_"+c]})});this.bgdTypeSelect.addOption(u);this._updateBackgroundImageType(k);this.connect(this.bgdTypeSelect,
"onChange",dojo.hitch(this,function(){var a=this.bgdTypeSelect.get("value");this._updateBackgroundImageType(a);this._onFieldChanged()}));b=c["background-color"].comboBox.get("value");k=this.bgdColorCB;k.set("store",this._bgcolor_store);k.set("value",b);m.backgroundColor=b;this.connect(this.bgdColorCB,"onChange",dojo.hitch(this,function(a){this._onChangeColor(a,this.bgdColorCB,this._bgcolor_action)}));c["background-color"].bgdWidget=this.bgdColorCB;k=c["background-repeat"].comboBox;b=k.get("value");
e=this.bgdRepeatCB;e.set("store",k.store);e.set("regExp","repeat|repeat-x|repeat-y|no-repeat");e.set("value",b);m.backgroundRepeat=b;this.connect(this.bgdRepeatCB,"onChange",dojo.hitch(this,function(){m.backgroundRepeat=this.bgdRepeatCB.get("value");this._onFieldChanged()}));c["background-repeat"].bgdWidget=this.bgdRepeatCB;k=c["background-position"].comboBox;b=k.get("value");e=this.bgdPositionCB;e.set("store",k.store);e.set("regExp","auto|contain|cover|"+f.regstr_posn);e.set("value",b);m.backgroundPosition=
b;this.connect(this.bgdPositionCB,"onChange",dojo.hitch(this,function(){m.backgroundPosition=this.bgdPositionCB.get("value");this._onFieldChanged()}));c["background-position"].bgdWidget=this.bgdPositionCB;k=c["background-size"].comboBox;b=k.get("value");e=this.bgdSizeCB;e.set("store",k.store);e.set("regExp","auto|contain|cover|"+f.regstr_len_or_pct);e.set("value",b);m.backgroundSize=b;this.connect(this.bgdSizeCB,"onChange",dojo.hitch(this,function(){m.backgroundSize=this.bgdSizeCB.get("value");this._onFieldChanged()}));
c["background-size"].bgdWidget=this.bgdSizeCB;k=c["background-origin"].comboBox;b=k.get("value");e=this.bgdOriginCB;e.set("store",k.store);e.set("regExp","border-box|padding-box|content-box");e.set("value",b);m.backgroundOrigin=b;this.connect(this.bgdOriginCB,"onChange",dojo.hitch(this,function(){m.backgroundOrigin=this.bgdOriginCB.get("value");this._onFieldChanged()}));c["background-origin"].bgdWidget=this.bgdOriginCB;k=c["background-clip"].comboBox;b=k.get("value");e=this.bgdClipCB;e.set("store",
k.store);e.set("regExp","border-box|padding-box|content-box");e.set("value",b);m.backgroundClip=b;this.connect(this.bgdClipCB,"onChange",dojo.hitch(this,function(){m.backgroundClip=this.bgdClipCB.get("value");this._onFieldChanged()}));c["background-clip"].bgdWidget=this.bgdClipCB;c=new d({values:"to bottom;to top;to right;to left;45deg;-45deg".split(";")});this.bgdLinearAngleCB.set("store",c);this.bgdLinearAngleCB.set("regExp",f.regstr_angle);this.bgdLinearAngleCB.set("value",m&&m.angle?m.angle:"to bottom");
this.connect(this.bgdLinearAngleCB,"onChange",dojo.hitch(this,function(){m.angle=this.bgdLinearAngleCB.get("value");this._onFieldChanged()}));c=new d({values:"center;left top;center center;right bottom;0% 0%;0px 0px".split(";")});this.bgdRadialPosCB.set("store",c);this.bgdRadialPosCB.set("regExp",f.regstr_posn);this.bgdRadialPosCB.set("value",m&&m.posn?m.posn:"center");this.connect(this.bgdRadialPosCB,"onChange",dojo.hitch(this,function(){m.posn=this.bgdRadialPosCB.get("value");this._onFieldChanged()}));
c=new d({values:["circle","ellipse"]});this.bgdRadialShapeCB.set("store",c);this.bgdRadialShapeCB.set("regExp",f.regstr_shape);this.bgdRadialShapeCB.set("value",m&&m.shape?m.shape:"circle");this.connect(this.bgdRadialShapeCB,"onChange",dojo.hitch(this,function(){m.shape=this.bgdRadialShapeCB.get("value");this._onFieldChanged()}));c=new d({values:["farthest-corner","farthest-side","closest-corner","closest-side"]});this.bgdRadialExtentCB.set("store",c);this.bgdRadialExtentCB.set("regExp",f.regstr_extent);
this.bgdRadialExtentCB.set("value",m&&m.extent?m.extent:"farthest-corner");this.connect(this.bgdRadialExtentCB,"onChange",dojo.hitch(this,function(){m.extent=this.bgdRadialExtentCB.get("value");this._onFieldChanged()}));this._initializeStops(m&&m.stops&&2<=m.stops.length?m.stops:[{color:"white",pos:"0%"},{color:"black",pos:"100%"}])},startup:function(){this.inherited(arguments);var a=this.bgddata&&this.bgddata.url?this.bgddata.url:"";this._filePicker.set("value",a);this._filePicker.owner=this;this.bgddata.url=
a;this.connect(this._filePicker,"onChange",dojo.hitch(this,function(){var a=this._filePicker.get("value");this.bgddata.url=a;this._onFieldChanged()}))},_updateBackgroundImageType:function(a){var c=this.domNode;if(!a||"none"!=a&&"url"!=a&&"linear"!=a&&"radial"!=a&&"other"!=a)a="emptystring";this.bgddata.type=a;this.bgdTypeSelect.set("value",a);var b=dojo.query(".bgdOptionsLabelRow",c),d=dojo.query(".bgdImageOptRow",c),f=dojo.query(".bgdGradOptRow",c),e=dojo.query(".bgdLinearOptRow",c),h=dojo.query(".bgdRadialOptRow",
c),c=dojo.query(".bgdOtherRow",c);"url"==a?(d.concat(b).forEach(function(a){dojo.removeClass(a,"dijitHidden")}),f.concat(c).forEach(function(a){dojo.addClass(a,"dijitHidden")})):"linear"==a?(f.concat(b).forEach(function(a){dojo.removeClass(a,"dijitHidden")}),d.concat(h).concat(c).forEach(function(a){dojo.addClass(a,"dijitHidden")})):"radial"==a?(f.concat(b).forEach(function(a){dojo.removeClass(a,"dijitHidden")}),d.concat(e).concat(c).forEach(function(a){dojo.addClass(a,"dijitHidden")})):"other"==
a?(c.forEach(function(a){dojo.removeClass(a,"dijitHidden")}),d.concat(f).concat(b).forEach(function(a){dojo.addClass(a,"dijitHidden")})):d.concat(f).concat(b).concat(c).forEach(function(a){dojo.addClass(a,"dijitHidden")})},_initializeStops:function(a){var c=this.langObj;a||(a=this.bgddata.stops);for(var b=this.bgdTypeSelect.get("value"),d=dojo.query(".bgdStopRow",this.domNode),e=d.length-1;0<e;e--){var h=d[e],g=dojo.query(".bgdColor",h),g=dijit.byNode(g[0]);g.destroyRecursive();g=dojo.query(".bgdPosition",
h);g=dijit.byNode(g[0]);g.destroyRecursive();dojo.destroy(h)}e=d[0];d=e.parentNode;h=e.nextSibling;for(e=0;e<a.length;e++){var p=a[e],m=dojo.create("tr",{className:"bgdGradOptRow bgdStopRow"});m.innerHTML=this.stopRowTemplate;"linear"!=b&&"radial"!=b&&dojo.addClass(m,"dijitHidden");d.insertBefore(m,h);dojo.parser.parse(m);dojo.query(".bdgStopLabel",m)[0].innerHTML=this.langObj.bgdStop+" #"+(e+1)+":";g=dojo.query(".bgdColor",m);g=dijit.byNode(g[0]);g.set("store",this._stops_store);g.set("regExp",f.regstr_stop_color);
g.set("value",p.color);this.connect(g,"onChange",dojo.hitch(this,function(a,c){this._onChangeColor(c,a,this._stops_action)},g));g=dojo.query(".bgdPosition",m);g=dijit.byNode(g[0]);g.set("store",this.stoppos_store);p="string"==typeof p.pos&&0<p.pos.length?p.pos:0==e?"0%":"100%";g.set("regExp",f.regstr_stop_pos);g.set("value",p);this.connect(g,"onChange",dojo.hitch(this,function(){this._updateDataStructureStops();this._onFieldChanged()}));g=dojo.query(".bgdPlusButton",m)[0];g=dijit.byNode(g);g.set("title",
c.bgdAddStop);this.connect(g,"onClick",dojo.hitch(this,function(a){var c=this.bgddata.stops[a];this.bgddata.stops.splice(a+1,0,{color:c.color,pos:c.pos});this._initializeStops()},e));p=dojo.query(".bgdMinusButton",m)[0];p=dijit.byNode(p);p.set("title",c.bgdRemoveStop);this.connect(p,"onClick",dojo.hitch(this,function(a){this.bgddata.stops.splice(a,1);this._initializeStops()},e));m=dojo.query(".bgdMinusButton",this.domNode);for(g=0;g<m.length;g++)p=m[g],p=dijit.byNode(p),2>=a.length?p.set("disabled",
!0):p.set("disabled",!1)}this._updateDataStructureStops()},_onFieldChanged:function(){this._updateDialogValidity();this._updateBackgroundPreview()},_setBaseLocationAttr:function(a){this._baseLocation=a;this._filePicker.set("baseLocation",a)},_updateDialogValidity:function(){var a=this.bgddata;if(a&&a.type){var c=this.domNode,a=a.type,b=[],d=!0;"url"==a?b=dojo.query(".bgdImageOptRow",c):"linear"==a?b=dojo.query(".bgdStopRow",c).concat(dojo.query(".bgdLinearOptRow",c)):"radial"==a&&(b=dojo.query(".bgdStopRow",
c).concat(dojo.query(".bgdRadialOptRow",c)));b.forEach(function(a){dojo.query("[widgetid]",a).forEach(function(a){"function"!=typeof a.isValid||a.isValid()||(d=!1)})});this.bdgValid=d}},_updateBackgroundPreview:function(){function c(a,c){c=e[c];"string"==typeof c&&0<c.length&&(d+=";"+a+":"+c)}var b=dojo.query(".bgdPreview",this.domNode)[0],d="",e=this.bgddata;c("background-color","backgroundColor");c("background-repeat","backgroundRepeat");c("background-position","backgroundPosition");c("background-size",
"backgroundSize");c("background-origin","backgroundOrigin");c("background-clip","backgroundClip");for(var h=f.buildBackgroundImage(this.bgddata),g=0;g<h.length;g++){var m=h[g];if(p.containsUrl(m)&&!p.isAbsolute(m)&&this.context){var q=p.getUrl(m),q=a.parse_url(q);(q=this.context.ctx.getFileManager().getImageUrl({path:q.host+(q.path||""),mount:q.scheme},!1))&&(m=z(this._baseLocation,q))}d+=";background-image:"+m}b.setAttribute("style",d);this.bgdOtherTA.set("value",h[h.length-1])},_updateDataStructureStops:function(){var a=
this.bgddata;a.stops=[];for(var c=dojo.query(".bgdStopRow",this.domNode),b=1;b<c.length;b++){var d=c[b],e=dojo.query(".bgdColor",d),e=dijit.byNode(e[0]),d=dojo.query(".bgdPosition",d),d=dijit.byNode(d[0]);a.stops.push({color:e.get("value"),pos:d.get("value")})}},_setValueAttr:function(a){a&&this._colorPickerTargetWidget.set("value",a)},_onChangeColor:function(a,c,b){if(a=b[a])if("_removevalue"==a?c.set("value",""):c.set("value",c._currentcolorvalue),"_colorpicker"==a){a=new davinci.ve.widgets.ColorPickerFlat({});
b=c.get("value");var d=this.isLeftToRight();this._colorPickerTargetWidget=c;davinci.ve.widgets.ColorPickerFlat.show(a,b,this,d)}c._currentcolorvalue=c.get("value");this.bgddata.backgroundColor=this.bgdColorCB.get("value");this._updateDataStructureStops();this._onFieldChanged()},okButton:function(){},cancelButton:function(){this.onClose()}});n.getCSSForWorkspaceURL=z;u.setObject("davinci.ve.widgets.BackgroundDialog",n);return n})},"davinci/ve/utils/CssUtils":function(){define(["dojo/_base/Color","davinci/ve/utils/URLRewrite"],
function(n,k){var g=[],e;for(e in n.named)"transparent"!=e&&g.push(e);g.sort(function(a,c){return 0==c.indexOf(a)?1:0==a.indexOf(c)?-1:a<c?-1:1});var b=[];g.forEach(function(a){b.push(a);a=n.named[a];a="#"+(16777216+(a[0]<<16)+(a[1]<<8)+a[2]).toString(16).slice(1);b.push(a)});var d=/^\-?(?:\d*\.\d+|\d+)$/,g="(?:";for(e=0;e<b.length;e+=2)0!=e&&(g+="|"),g+=b[e];g="(?:"+(g+")")+"|\\#(?:[0-9A-Fa-f]{6}|[0-9A-Fa-f]{3})|(?:rgb|hsl)\\s*\\(\\s*(?:(?:\\d*\\.\\d+|\\d+)%?)\\s*,\\s*(?:(?:\\d*\\.\\d+|\\d+)%?)\\s*,\\s*(?:(?:\\d*\\.\\d+|\\d+)%?)\\s*\\)|(?:rgba|hsla)\\s*\\(\\s*(?:(?:\\d*\\.\\d+|\\d+)%?)\\s*,\\s*(?:(?:\\d*\\.\\d+|\\d+)%?)\\s*,\\s*(?:(?:\\d*\\.\\d+|\\d+)%?)\\s*,\\s*(?:\\d*\\.\\d+|\\d+)\\s*\\))";
e="(?:"+g+"(?:\\s+(?:\\-?(?:\\d*\\.\\d+|\\d+)(?:in|cm|mm|pt|pc|px|%)|0))?)";var h=new RegExp("(?:\\s*("+g+")\\s*((?:\\-?(?:\\d*\\.\\d+|\\d+)(?:in|cm|mm|pt|pc|px|%)|0))?\\s*,?(.*))");e="("+e+"(?:\\s*,\\s*"+e+")*)";var a=/^\s*(url)\s*\(\s*(?:\'([^\']*)\'*|\"([^\"]*)\"|([^\'\"]*))\s*\)\s*$/,m=new RegExp("^\\s*((?:-moz-linear-gradient|-webkit-linear-gradient|-ms-linear-gradient|-o-linear-gradient|linear-gradient))\\s*\\(\\s*(?:(?:to\\s+((?:\\s*left\\s*|\\s*right\\s*|\\s*top\\s*|\\s*bottom\\s*){1,2})|((?:\\s*left\\s*|\\s*right\\s*|\\s*top\\s*|\\s*bottom\\s*){1,2})|((?:\\-?(?:\\d*\\.\\d+|\\d+)deg)))\\s*,\\s*)?\\s*"+
e+"\\s*\\)\\s*$"),f=new RegExp("^\\s*((?:-moz-radial-gradient|-webkit-radial-gradient|-ms-radial-gradient|-o-radial-gradient|radial-gradient))\\s*\\(\\s*(?:\\s*(?:\\s*(\\s*(?:(?:\\-?(?:\\d*\\.\\d+|\\d+)(?:in|cm|mm|pt|pc|px|%)|0)|(?:left|center|right|top|bottom))(?:\\s*(?:(?:\\-?(?:\\d*\\.\\d+|\\d+)(?:in|cm|mm|pt|pc|px|%)|0)|(?:left|center|right|top|bottom)))?)\\s*((?:\\-?(?:\\d*\\.\\d+|\\d+)deg))\\s*|\\s*(\\s*(?:(?:\\-?(?:\\d*\\.\\d+|\\d+)(?:in|cm|mm|pt|pc|px|%)|0)|(?:left|center|right|top|bottom))(?:\\s*(?:(?:\\-?(?:\\d*\\.\\d+|\\d+)(?:in|cm|mm|pt|pc|px|%)|0)|(?:left|center|right|top|bottom)))?)\\s*|\\s*((?:\\-?(?:\\d*\\.\\d+|\\d+)deg))\\s*)\\s*,\\s*)?\\s*(?:\\s*(?:\\s*(circle|ellipse)\\s*((?:(?:closest-side|farthest-side|closest-corner|farthest-corner|contain|cover)|(?:(?:\\-?(?:\\d*\\.\\d+|\\d+)(?:in|cm|mm|pt|pc|px|%)|0)(?:\\s+(?:\\-?(?:\\d*\\.\\d+|\\d+)(?:in|cm|mm|pt|pc|px|%)|0)\\s*)?)))\\s*|\\s*((?:(?:closest-side|farthest-side|closest-corner|farthest-corner|contain|cover)|(?:(?:\\-?(?:\\d*\\.\\d+|\\d+)(?:in|cm|mm|pt|pc|px|%)|0)(?:\\s+(?:\\-?(?:\\d*\\.\\d+|\\d+)(?:in|cm|mm|pt|pc|px|%)|0)\\s*)?)))\\s*(circle|ellipse)\\s*|\\s*(circle|ellipse)\\s*|\\s*((?:(?:closest-side|farthest-side|closest-corner|farthest-corner|contain|cover)|(?:(?:\\-?(?:\\d*\\.\\d+|\\d+)(?:in|cm|mm|pt|pc|px|%)|0)(?:\\s+(?:\\-?(?:\\d*\\.\\d+|\\d+)(?:in|cm|mm|pt|pc|px|%)|0)\\s*)?)))\\s*)\\s*,\\s*)?\\s*"+
e+"\\s*\\)\\s*$"),q=/(?:\s*((?:top|bottom|left|right|center|(?:\-?(?:\d*\.\d+|\d+)%?)))\s+((?:top|bottom|left|right|center|(?:\-?(?:\d*\.\d+|\d+)%?)))\s*)/;e="("+("(?:\\s*,\\s*"+("(?:"+("(?:color-stop\\s*\\(\\s*(?:\\-?(?:\\d*\\.\\d+|\\d+)%?)\\s*,\\s*"+g+"\\s*\\)\\s*)")+"|"+("(?:from\\s*\\(\\s*"+g+"\\s*\\)\\s*)")+"|"+("(?:to\\s*\\(\\s*"+g+"\\s*\\)\\s*)")+")")+"\\s*)")+"+)";var c=new RegExp("(?:\\s*,\\s*"+("(?:"+("(?:(color-stop)\\s*\\(\\s*((?:\\-?(?:\\d*\\.\\d+|\\d+)%?))\\s*,\\s*("+g+")\\s*\\)\\s*)")+
"|"+("(?:(from)\\s*\\(\\s*("+g+")\\s*\\)\\s*)")+"|"+("(?:(to)\\s*\\(\\s*("+g+")\\s*\\)\\s*)")+")")+"\\s*)(.*)"),p=new RegExp("(?:\\s*(-webkit-gradient)\\s*\\(\\s*(linear)\\s*(?:\\s*,\\s*((?:\\s*(?:top|bottom|left|right|center|(?:\\-?(?:\\d*\\.\\d+|\\d+)%?))\\s+(?:top|bottom|left|right|center|(?:\\-?(?:\\d*\\.\\d+|\\d+)%?))\\s*))\\s*)(?:\\s*,\\s*((?:\\s*(?:top|bottom|left|right|center|(?:\\-?(?:\\d*\\.\\d+|\\d+)%?))\\s+(?:top|bottom|left|right|center|(?:\\-?(?:\\d*\\.\\d+|\\d+)%?))\\s*))\\s*)"+e+"\\s*\\)\\s*)"),
y=new RegExp("(?:\\s*(-webkit-gradient)\\s*\\(\\s*(radial)\\s*(?:(?:\\s*,\\s*((?:\\s*(?:top|bottom|left|right|center|(?:\\-?(?:\\d*\\.\\d+|\\d+)%?))\\s+(?:top|bottom|left|right|center|(?:\\-?(?:\\d*\\.\\d+|\\d+)%?))\\s*))\\s*)(?:\\s*,\\s*((?:\\d*\\.\\d+|\\d+))\\s*)(?:\\s*,\\s*((?:\\s*(?:top|bottom|left|right|center|(?:\\-?(?:\\d*\\.\\d+|\\d+)%?))\\s+(?:top|bottom|left|right|center|(?:\\-?(?:\\d*\\.\\d+|\\d+)%?))\\s*))\\s*)(?:\\s*,\\s*((?:\\d*\\.\\d+|\\d+))\\s*)?)"+e+"\\s*\\)\\s*)"),u=function(a){var c=
[];do{var b=a.match(h);b&&(c.push({color:b[1],pos:b[2]}),a=b[3])}while(b);return c},z=function(a){var b=[],e=[],f,h;do{var g=a.match(c);g&&(g[4]?f={color:g[5]}:g[6]?h={color:g[7]}:(a=g[2].match(d)?100*g[2]+"%":g[2],e.push({color:g[3],pos:a})),a=g[8])}while(g);f&&b.push(f);for(f=0;f<e.length;f++)b.push(e[f]);h&&b.push(h);return b};return{regstr_posn:"^\\s*\\s*(?:(?:\\-?(?:\\d*\\.\\d+|\\d+)(?:in|cm|mm|pt|pc|px|%)|0)|(?:left|center|right|top|bottom))(?:\\s*(?:(?:\\-?(?:\\d*\\.\\d+|\\d+)(?:in|cm|mm|pt|pc|px|%)|0)|(?:left|center|right|top|bottom)))?\\s*$",
regstr_len_or_pct:"^\\s*(?:\\-?(?:\\d*\\.\\d+|\\d+)(?:in|cm|mm|pt|pc|px|%)|0)\\s*$",regstr_angle:"^\\s*(?:to\\s+((?:\\s*left\\s*|\\s*right\\s*|\\s*top\\s*|\\s*bottom\\s*){1,2})|((?:\\-?(?:\\d*\\.\\d+|\\d+)deg)))\\s*$",regstr_shape:"^\\s*circle|ellipse\\s*$",regstr_extent:"^\\s*(?:(?:closest-side|farthest-side|closest-corner|farthest-corner|contain|cover)|(?:(?:\\-?(?:\\d*\\.\\d+|\\d+)(?:in|cm|mm|pt|pc|px|%)|0)(?:\\s+(?:\\-?(?:\\d*\\.\\d+|\\d+)(?:in|cm|mm|pt|pc|px|%)|0)\\s*)?))\\s*$",regstr_stop_color:"\\s*"+
g+"\\s*",regstr_stop_pos:"\\s*(?:\\-?(?:\\d*\\.\\d+|\\d+)(?:in|cm|mm|pt|pc|px|%)|0)\\s*",parseBackgroundImage:function(c){var b={},d=c.match(/^\s*$/);if(d)b.type="emptystring";else if(d=c.match(/^\s*none\s*$/))b.type="none";else if(d=c.match(a))b.type="url",b.func=d[1],b.url=d[2]?d[2]:d[3]?d[3]:d[4];else if(d=c.match(p)){b.type="linear";b.func=d[1];b.webkitGradType=d[2];b.webKitPosn1=d[3];b.webKitPosn2=d[4];var e=b.webKitPosn1,h=b.webKitPosn2;c=0<=e.indexOf("left");var g=0<=e.indexOf("top"),k=0<=
e.indexOf("right"),e=0<=e.indexOf("bottom"),n=0<=h.indexOf("left"),A=0<=h.indexOf("top"),D=0<=h.indexOf("right"),h=0<=h.indexOf("bottom");g&&h&&(c&&n||k&&D)?b.angle="to bottom":e&&A&&(c&&n||k&&D)?b.angle="to top":c&&D&&(g&&A||e&&h)?b.angle="to right":n&&k&&(g&&A||e&&h)?b.angle="to left":c&&g&&D&&h?b.angle="to bottom right":c&&e&&D&&A?b.angle="to top right":k&&g&&n&&h?b.angle="to bottom left":k&&e&&n&&A&&(b.angle="to top left");b.stops=z(d[5])}else if(d=c.match(y))b.type="radial",b.func=d[1],b.webkitGradType=
d[2],b.webKitPosn1=d[3],b.webKitRadius1=d[4],b.webKitPosn2=d[5],b.webKitRadius2=d[6],b.shape=b.webKitPosn1==b.webKitPosn2?"circle":"ellipse",g=b.webKitPosn1,(c=g.match(q))?(g=c[1],g.match(/^\d+$/)&&(g+="px"),c=c[2],c.match(/^\d+$/)&&(c+="px"),c=g+" "+c):c=g,b.posn=c,b.extent=b.webKitRadius2?b.webKitRadius2+"px":b.webKitRadius1?b.webKitRadius1+"px":"farthest-corner",b.stops=z(d[7]);else if(d=c.match(m))b.type="linear",b.func=d[1],b.angle=d[2]?"to "+d[2]:d[3]?"to "+d[3]:d[4],b.stops=u(d[5]);else if(d=
c.match(f))b.type="radial",b.func=d[1],b.posn=d[2]?d[2]:d[4],b.angle=d[3]?d[3]:d[5],b.shape=d[6]?d[6]:d[9]?d[9]:d[10],b.extent=d[7]?d[7]:d[8]?d[8]:d[11],b.stops=u(d[12]);d||(b.type="unknown");return b},buildBackgroundImage:function(a){var c=[];if("emptystring"==a.type)c.push("");else if("none"==a.type)c.push("none");else if("url"==a.type){if("string"==typeof a.url&&0<a.url.length){var b=k.getUrl(a.url);b||(b=k.stripQuotes(a.url));c.push("url('"+b+"')")}}else if("linear"==a.type||"radial"==a.type){for(var b=
"",d,e,f=[],h=0;h<a.stops.length;h++){var g=a.stops[h],p="string"==typeof g.pos&&0<g.pos.length?g.pos:"";0<h&&(b+=", ");b+=g.color;if(0<h&&h<a.stops.length-1||0==h&&0!=p.length&&"0%"!=p&&0!=p-0||h==a.stops.length-1&&0!=p.length&&"100%"!=p&&1!=p-0)b+=" "+p;0!=h||0!=p.length&&"0%"!=p&&0!=p-0?h!=a.stops.length-1||0!=p.length&&"100%"!=p&&1!=p-0?f.push("color-stop("+p+", "+g.color+")"):e="to("+g.color+")":d="from("+g.color+")"}g="";p=!1;d&&(g+=d,p=!0);e&&(p&&(g+=", "),g+=e,p=!0);for(h=0;h<f.length;h++)p&&
(g+=", "),g+=f[h],p=!0;if("linear"==a.type){d="(";var m=a.angle;(e="string"==typeof m&&0<m.length?m.match(/^\s*(?:to\s+((?:\s*left\s*|\s*right\s*|\s*top\s*|\s*bottom\s*){1,2})|((?:\-?(?:\d*\.\d+|\d+)deg)))\s*$/):null)||(m="to bottom");"to bottom"!=m&&(d+=m+",");a="(linear,";f=0<=m.indexOf("left");h=0<=m.indexOf("top");p=0<=m.indexOf("right");m=0<=m.indexOf("bottom");f&&h?a+=" right bottom, left top, ":f&&m?a+=" right top, left bottom, ":p&&h?a+=" left bottom, right top, ":p&&m?a+=" left top, right bottom, ":
f?a+=" right top, left top, ":p?a+=" left top, right top, ":h?a+=" left bottom, left top, ":m?a+=" left top, left bottom, ":(f=180*(90-parseFloat(e[4]))/Math.PI,e=Math.cos(f),f=Math.sin(f),0<=e&&0<=f?(a+="0% 100%,",a=Math.abs(e)>Math.abs(f)?a+("100% "+100*(1-Math.abs(f)/Math.abs(e))+"%"):a+(Math.abs(e)/Math.abs(f)*100+"% 100%")):0<=e&&0>f?(a+="0% 0%,",a=Math.abs(e)>Math.abs(f)?a+("100% "+Math.abs(-f)/Math.abs(e)*100+"%"):a+(Math.abs(e)/Math.abs(f)*100+"% 100%")):0>e&&0<=f?(a+="100% 100%,",a=Math.abs(e)>
Math.abs(f)?a+("0% "+100*(1-Math.abs(f)/Math.abs(e))+"%"):a+(Math.abs(e)/Math.abs(f)*100+"% 100%")):(a+="100% 0%,",a=Math.abs(e)>Math.abs(f)?a+("0% "+Math.abs(-f)/Math.abs(e)*100+"%"):a+(Math.abs(e)/Math.abs(f)*100+"% 100%")),a+=", ");d+=b+")";c.push("-webkit-gradient"+(a+(g+")")));c.push("-o-linear-gradient"+d);c.push("-ms-linear-gradient"+d);c.push("-moz-linear-gradient"+d);c.push("-webkit-linear-gradient"+d);c.push("linear-gradient"+d)}else d="(","center"!=a.posn&&"center center"!=a.posn&&(d+=
a.posn+", "),"circle"!=a.shape&&(d+=a.shape+", "),"farthest-corner"!=a.extent&&(d+=a.extent+", "),d+=b+")",c.push("-webkit-gradient(radial, center center, 10, center center, "+(g+")")),c.push("-o-radial-gradient"+d),c.push("-ms-radial-gradient"+d),c.push("-moz-radial-gradient"+d),c.push("-webkit-radial-gradient"+d),c.push("radial-gradient"+d)}return c}}})},"davinci/ve/utils/URLRewrite":function(){define([],function(){var n=/^\s*url\s*\(\s*(\'[^\'\"]*\'|\"[^\'\"]*\"|[^\'\"]*)\s*\)\s*$/,k=/^[\'\"]?([^\'\"]*)[\'\"]?$/,
g=/^(http|ftp)/;return{isAbsolute:function(e){return"string"!=typeof e?!1:(e=this.getUrl(e))?g.test(e):!1},containsUrl:function(e){return"string"!=typeof e?!1:n.test(e)},replaceUrl:function(e,b){return"string"!=typeof e||"string"!=typeof b?null:this.getUrl(e)?"url('"+b+"')":null},stripQuotes:function(e){return e.replace(k,"$1")},encodeURI:function(e){return encodeURI(e).replace(/#/g,"%23")},getUrl:function(e){return"string"!=typeof e?null:(e=e.match(n))&&1<e.length?this.stripQuotes(e[1]):null}}})},
"davinci/ui/widgets/FileFieldDialog":function(){define("dojo/_base/declare dijit/_WidgetBase dijit/_TemplatedMixin dijit/_WidgetsInTemplateMixin davinci/Workbench davinci/ui/widgets/OpenFile dijit/form/Button davinci/model/Path davinci/lang/ui dijit/lang/_common dojo/text!./templates/FileFieldDialog.html dijit/form/TextBox xide/views/_PanelDialog xide/utils xide/types xfile/views/FileGrid xfile/FileActions".split(" "),function(n,k,g,e,b,d,h,a,m,f,q,c,p,y,u,z,A){return n("davinci.ui.widgets.FileFieldDialog",
[k,g,e],{templateString:q,widgetsInTemplate:!0,_fileSelectionDialog:null,_showFileSelectionDialog:function(){var a=this;this.ctx=b.ctx;A.createFilePicker(this,"",function(c){var b=y.buildPath(c.mount,c.path,!1);a.ctx.getFileManager().getImageUrl(c,!0,{oriPath:b});a.textField.set("value",b);a._onChange()},m.selectFile,null,{mount:"workspace_user",selection:"."},null,z,{micromatch:"(*.png)|(*.jpg)|!(*.*)"})},_setBaseLocationAttr:function(a){this._baseLocation=a},_setValueAttr:function(a){this.value!=
a&&(this.value=a,this.textField.set("value",a))},_setDisabledAttr:function(a){this.textField.set("disabled",a);this.button.set("disabled",a);this.inherited(arguments)},_setIntermediateChangesAttr:function(a){this.textField.set("intermediateChanges",a);this.inherited(arguments)},_onChange:function(){var a=this.textField.get("value");this.value!=a&&(this.value=a,this.textField.set("value",this.value),this.onChange(a))},onChange:function(a){},_getValueAttr:function(){return this.textField.get("value")}})})},
"davinci/ui/widgets/OpenFile":function(){define("dojo/_base/declare dijit/_Templated dijit/_Widget davinci/library system/resource davinci/workbench/Preferences davinci/Runtime davinci/Workbench dijit/Menu dijit/MenuItem davinci/model/Path dijit/form/DropDownButton davinci/lang/ui dijit/lang/_common dijit/form/Button dijit/form/TextBox dijit/form/RadioButton dijit/layout/ContentPane dijit/Tree".split(" "),function(n,k,g,e,b,d,h,a,m,f,q,c,p,y){return n("davinci.ui.widgets.OpenFile",[g,k],{widgetsInTemplate:!0,
fileDialogFileName:null,fileDialogParentFolder:null,postMixInProperties:function(){dojo.mixin(this,p);dojo.mixin(this,y);this.inherited(arguments)},postCreate:function(){this.inherited(arguments);this.fileTree.watch("selectedItem",dojo.hitch(this,this._updateFields));this._value||this._setValueAttr(this._getForcedRootAttr())},startup:function(){this.fileTree.startup()},_setValueAttr:function(a){a!=this._value&&(this._value=a,this.fileTree.set("selectedItems",[a]))},_getForcedRootAttr:function(){return this._forcedRoot||
b.findResource(a.getProject())},_setForcedRootAttr:function(a){this._forcedRoot=a},_updateFields:function(){var a=this.fileTree.get("selectedItems"),a=null!=a&&0<a.length?a[0]:null;dojo.attr(this._okButton,"disabled",!0);null!=a&&"File"==a.elementType&&dojo.attr(this._okButton,"disabled",!1)},_okButton:function(){this.value=this.fileTree.get("selectedItems")[0]},_onDblClick:function(a){this._okButton();this.onExecute()},_onKeyPress:function(a){a.which==dojo.keys.ENTER&&(this._okButton(),this.onExecute())},
_getValueAttr:function(){return this.value},_cancelButton:function(){this.onClose()},resize:function(a){this.contentpane.resize(a)},onExecute:function(){},onClose:function(){}})})},"davinci/lang/ui":function(){define([],function(){return{dontShowAgain:"Don't show again",selectFile:"Select a file",openFile:"Open File",aboutMaqetta:"About Maqetta",productVersion:"Version: ${0}",productDate:"Date: ${0}",build:"Build: ${0}",library:"Library",version:"Version",include:"Include",source:"Source",baseLocation:"Base Location",
invalidDownloadFileName:"File name may only contain letters, numbers, \x26#8216;_\x26#8216;, and \x26#8216;.\x26#8216;.",selectedFiles:"Selected Files",noFilesSelected:"No files selected!",downloadButtonLabel:"Download",themeAlreadyExists:"Theme already Exists!",invalidThemeName:"Invalid theme name",errorCreatingTheme:"Error creating theme: ",creatingTheme:"Creating theme",noUserThemes:"No user themes found in workspace. Please create a new theme before editing.",themeSetsDialog:"Manage theme sets",
renameThemeSet:"Rename theme set",themeSets:"Theme sets:",currentlySelectedThemeSet:"Currently selected theme set:",themeSetName:"Name:",desktopTheme:"Dojo desktop 1.7 theme:",mobileTheme:"Dojo mobile 1.7 theme:",android:"Android:",blackberry:"Blackberry:",ipad:"iPad:",iphone:"iPhone:",other:"Other:",selectTheme:"Select theme",themeSet:"Theme set:",themeVersionMessage:"Theme version does not match workspace version this could produce unexpected results. We suggest recreating the custom theme using the current version of Maqetta and deleting the existing theme.",
addThemeSet:"Add theme set",deleteThemeSet:"Delete theme set",workspaceLocation:"Workspace Location",savingReadonlyFile:"This file is a read-only file. Please save it to a writeable location.",create:"Create",open:"Open",save:"Save",select:"Select",update:"Update",unknown:"unknown",fileName:"File name",folderName:"Folder name",parentFolder:"Parent folder: ",newFolderLabel:"New folder",cancelButtonLabel:"Cancel",newFolderName:"Name:",createFolder:"Create Folder",createNewFile:"Create New File",createMobileApplication:"Create a Mobile Application",
createDesktopApplication:"Create a Desktop Application",createSketchHiFi:"Create a Sketch (high-fidelity)",createSketchLoFi:"Create a Sketch (low-fidelity)",createNewCSSFile:"Create New CSS File",createNewJSFile:"Create New JavaScript File",createNewFolder:"Create New Folder",saveFileAs:"Save File As",downloadFile:"Download",selectFiles:"Select Files...",selectZip:"Select ZIP file...",upload:"Upload",addFiles:"Upload",uploading:"Uploading...",completed:"completed: ${0} \n",done:"Done",explodeZipWarning:"Warning: Contents of .zip files will overwrite any conflicting files in your workspace",
mustEnterFileName:"You must enter a file name.",cannotSelect:"Cannot select ${0}. It is a folder.",fileAlreadyExistsOverwrite:"File ${0} already exists. OK to overwrite?",cannotCreate:"Cannot create ${0}. It already Exists.",fileNameSlashCharacter:"File names cannot contain a slash character (/). Your file name is: ${0}",doesNotHaveExtension:"The name ${0} does not have an extension (e.g., .html, .css or .js) and will be treated as a plain text file. OK to proceed?",areYouSureDelete:"Are you sure you want to delete ${0}?",
areYouSureDeleteProject:"Are you sure you want to delete project ${0}?",noResourcesSelected:"No resources are currently selected.",optimizeOption:"Use Dojo Web Builder (experimental)",downloadFullSource:"Download uncompressed source for selected libraries (if available)",selectAll:"All",selectNone:"None",themeToClone:"Theme to clone",newName:"New Name",selectTheme:"Select a Theme",newProject:"New Project",renameProjectDialogTitle:"Rename Project To...",deleteProjectButtonTitle:"Delete Project",renameProjectButtonTitle:"Rename Project...",
deleteOnlyProjectError:"You can't delete the only project in your workspace!",newFileShowFiles:"Show file picker",newFileHideFiles:"Hide file picker",root:"(root)",nhfoDevice:"Device:",nhfoDeviceTooltip:"Select an initial mobile device",nhfoThemeButtonLabel:"Theme...",nhfoThemeButtonTitle:"Select themes or theme set for new HTML file",renameNewLabel:"Name:",renameButtonLabel:"Rename",renameDialogTitle:"Rename To...",createProject:"New project",createProjectMenuItem:"New project...",deleteProjectMenuItem:"Delete this project...",
renameProjectMenuItem:"Rename this project...",saveAsProjectTemplateMenuItem:"Save as project template...",manageProjectTemplatesMenuItem:"Manage project templates...",modifyLibrariesMenuItem:"Modify libraries...",modifyLibraries:"Modify libraries",projectColon:"Project:",ProjectMenu:"Project menu",newProjectName:"Name:",newProjectTemplate:"Template:",newProjectUseProjectTemplate:"Use project template",newProjectCloneExistingProject:"Copy files from current project into new project",newProjectEclipseSupport:"New project should be Eclipse-compatible",
newProjectNameExists:"A project with this name already exists",saveAsProjectTemplate:"Save as project template",newProjectTemplateName:"Project template name:",newProjectTemplateShareLabel:"Share with everyone",newProjectTemplateOverwrite:"Project template {0} already exists. OK to overwrite?",newProjectTemplateCreationSuccess:"Project template {0} has been saved",newProjectTemplateCreationFailure:"Error: Project template {0} save operation failed",newProjectTemplateCancelled:"Operation cancelled",
manageProjectTemplates:"Manage project templates",ManageProjectTemplatesHeaderName:"Project template name",ManageProjectTemplatesHeaderShared:"Share with everyone?",ManageProjectTemplatesHeaderCreatedBy:"Created by",ManageProjectTemplatesHeaderCreatedOn:"Created on",ManageProjectTemplatesHeaderLastModified:"Last updated",ManageProjectTemplatesNoTemplates:"You have no project templates.",ManageProjectTemplatesDuplicateNames:"Invalid entries - two project templates have the same name",ManageProjectTemplateAboutToOccur:"The following actions are about to occur:",
ManageProjectTemplateDeletions:"project template deletions",ManageProjectTemplateModifications:"project template modifications",ManageProjectTemplateOKToProceed:"OK to proceed?",ManageProjectTemplatesInitializing:"Initializing...",modify:"Modify",User:"Account",currentProject:"Current Project:",selectProject:"Select a Project:",NoteOperationNotUndoable:"Note: this operation is not undoable."}})},"davinci/ve/widgets/WidgetToolBar":function(){define("dojo/_base/declare dijit/_Templated dijit/_Widget davinci/Runtime davinci/workbench/ViewLite davinci/ve/commands/ModifyCommand dijit/form/ComboBox dijit/form/ValidationTextBox dijit/form/TextBox dojo/store/Memory davinci/lang/ve dijit/lang/_common davinci/ve/widget dojo/text!./templates/WidgetToolBar.html".split(" "),
function(n,k,g,e,b,d,h,a,m,f,q,c,p,y){return n("davinci.ve.widgets.WidgetToolBar",[b,g,k],{templateString:y,widgetsInTemplate:!0,descNode:null,idTextBox:null,classComboBox:null,blockGroupComboBox:null,widgetDescStart:"",widgetDescUnselectEnd:"",_oldIDName:null,_oldClassName:null,_oldBlockGroup:null,veNLS:q,cssRules:null,postCreate:function(){this.idTextBox.validator=dojo.hitch(this,function(a,c){this.invalidMessage=null;return a&&this._widget&&!this.changing?(a=p.byId(a))&&a!==this._widget?(this.invalidMessage=
q.idAlreadyUsed,!1):!0:!0});dojo.subscribe("/davinci/ui/widget/replaced",dojo.hitch(this,this._widgetReplaced));var a=this;this.subscribe("CSSRulesUpdated",function(c){a.cssRules=c.names;a.onWidgetSelectionChange()})},initialize:function(){if((this._editor=e.currentEditor)&&this._editor.visualEditor&&this._editor.visualEditor.context){var a=this._editor.visualEditor.context.getSelection();this._widget=0==a.length?null:a[0]}else this._widget=null;this.onWidgetSelectionChange()},cssSelect:null,startup:function(){this.inherited(arguments);
if(!this.cssSelect){this.cssSelect=$(this.cssClasses).selectize({delimiter:",",persist:!0,inputClass:"selectize-input form-control input-transparent",plugins:["restore_on_backspace"],createOnBlur:!0,dropdownParent:"body",create:function(a){return{value:a,text:a}}}).data().selectize;var a=this;this.cssSelect.on("change",function(){var c=a.cssSelect.getValue();a._widget&&!a.changing&&(a.context&&a.context.blockChange(!1),c=c.split(",").join(" "),c!==a._oldClassName&&(a._oldClassName=c,c=new davinci.ve.commands.ModifyCommand(a._widget,
{"class":c},null),dojo.publish("/davinci/ui/widgetPropertiesChanges",[{source:a._editor.editor_id,command:c}])))})}},onEditorSelected:function(){this.initialize();this.domNode.style.display=this._editor&&"davinci.ve.HTMLPageEditor"==this._editor.editorID?"block":"none"},_widgetReplaced:function(a,c){this._widget===c&&(this._widget=a,this.onWidgetSelectionChange())},onWidgetSelectionChangeBak:function(){var a="";if(this._widget){a=p.getLabel(this._widget);this.context=this._widget.getContext();this.classComboBox.set("disabled",
!1);this.idTextBox.attr("disabled",!1);this.changing=!0;this._oldBlockGroup=this._oldClassName=this._oldIDName=null;dojo.addClass(this.domNode,"propertiesSelection");this.descNode.innerHTML=a;if(this._editor&&"davinci.ve.PageEditor"===this._editor.declaredClass&&(a=this._widget._srcElement)){var c=[],b=this._widget.getContext().getModel().getDocumentElement();if(b){var d={visit:function(a){"HTMLElement"==a.elementType&&"body"!=a.tag&&"html"!=a.tag&&(a=a.getAttribute("class"))&&(a=dojo.trim(a).split(" "),
dojo.forEach(a,dojo.hitch(this,function(a){-1==dojo.indexOf(this.classes,a)&&this.classes.push(a)})))},classes:[]};b.visit(d);dojo.forEach(d.classes,function(a){c.push({name:a})})}this.cssRules&&_.each(this.cssRules,function(a){_.find(c,{name:a})||c.push({name:a})});b=new f({data:c});this.classComboBox.set("store",b);a=(a=a.getAttribute("class"))&&dojo.trim(a)||"";this.cssSelect&&(_.each(c,function(a){this.cssSelect.addOption({value:a.name,text:a.name})},this),this.cssSelect.setValue(a.split(" "),
!0));this.classComboBox.set("value",a);this._oldClassName=a;this._oldIDName=a=(a=this._widget.getId())&&dojo.trim(a)||"";this.idTextBox.attr("value",a);this._widget.domNode&&this._widget.domNode&&((a=this._widget.domNode.blockGroup)||(a=this._widget.domNode.getAttribute("blockGroup")),this._oldBlockGroup=a)}this.changing=!1}else this.descNode.innerHTML=q.noSelection,dojo.removeClass(this.domNode,"propertiesSelection"),this.context=null,this.classComboBox.set("value",""),this.classComboBox.set("disabled",
!0),this.idTextBox.attr("value",""),this.idTextBox.attr("disabled",!0)},onWidgetSelectionChange:function(){var a="";if(this._widget){a=p.getLabel(this._widget);this.context=this._widget.getContext();this.idTextBox.attr("disabled",!1);this.cssSelect&&this.cssSelect.enable();this.changing=!0;this._oldBlockGroup=this._oldClassName=this._oldIDName=null;dojo.addClass(this.domNode,"propertiesSelection");this.descNode.innerHTML=a;if(this._editor&&"davinci.ve.PageEditor"===this._editor.declaredClass&&(a=
this._widget._srcElement)){var c=[],b=this._widget.getContext().getModel().getDocumentElement();if(b){var d={visit:function(a){"HTMLElement"==a.elementType&&"body"!=a.tag&&"html"!=a.tag&&(a=a.getAttribute("class"))&&(a=dojo.trim(a).split(" "),dojo.forEach(a,dojo.hitch(this,function(a){-1==dojo.indexOf(this.classes,a)&&this.classes.push(a)})))},classes:[]};b.visit(d);dojo.forEach(d.classes,function(a){c.push({name:a})})}this.cssRules&&_.each(this.cssRules,function(a){_.find(c,{name:a})||c.push({name:a})});
a=(a=a.getAttribute("class"))&&dojo.trim(a)||"";this.cssSelect&&(_.each(c,function(a){this.cssSelect.addOption({value:a.name,text:a.name})},this),this.cssSelect.setValue(a.split(" "),!0));this._oldClassName=a;this._oldIDName=a=(a=this._widget.getId())&&dojo.trim(a)||"";this.idTextBox.attr("value",a);this._widget.domNode&&this._widget.domNode&&((a=this._widget.domNode.blockGroup)||(a=this._widget.domNode.getAttribute("blockGroup")),this._oldBlockGroup=a)}this.changing=!1}else this.descNode.innerHTML=
q.noSelection,dojo.removeClass(this.domNode,"propertiesSelection"),this.context=null,this.cssSelect&&this.cssSelect.disable(),this.cssSelect&&this.cssSelect.setValue([]),this.idTextBox.attr("value",""),this.idTextBox.attr("disabled",!0)},_onChangeIDAttribute:function(){if(this._widget&&!this.changing){var a=this.idTextBox;a&&a.isValid()&&(this.context&&this.context.blockChange(!1),a=a.attr("value"),a!==this._oldIDName&&(this._oldIDName=a,a=new d(this._widget,{id:a},null),dojo.publish("/davinci/ui/widgetPropertiesChanges",
[{source:this._editor.editor_id,command:a}])))}},_onChangeClassAttribute:function(){if(this._widget&&!this.changing){var a=this.classComboBox;a&&(this.context&&this.context.blockChange(!1),a=a.attr("value"),a!==this._oldClassName&&(this._oldClassName=a,a=new davinci.ve.commands.ModifyCommand(this._widget,{"class":a},null),dojo.publish("/davinci/ui/widgetPropertiesChanges",[{source:this._editor.editor_id,command:a}])))}},_onChangeBlockGroupAttribute:function(){if(this._widget&&!this.changing){var a=
this.blockGroupComboBox;a&&(this.context&&this.context.blockChange(!1),a=a.attr("value"),a!==this._oldBlockGroup&&(this._oldBlockGroup=a,a=new davinci.ve.commands.ModifyCommand(this._widget,{blockGroup:a},null),this.publish("/davinci/ui/widgetPropertiesChanges",[{source:this._editor.editor_id,command:a}])))}},_onFieldFocus:function(){this.context&&this.context.blockChange(!0)},_onFieldBlur:function(){this.context&&this.context.blockChange(!1)},_onKeyPress:function(a){a.keyCode==dojo.keys.ENTER&&this._onChangeIDAttribute()}})})},
"davinci/workbench/ViewLite":function(){define(["dojo/_base/declare","./WidgetLite","../ve/States"],function(n,k){return n("davinci.workbench.ViewLite",[k],{_editor:null,_widget:null,_subWidget:null,constructor:function(g,e){this.subscriptions=[];this.publishing={};this.subscribe("/davinci/ui/editorSelected",dojo.hitch(this,this._editorSelected));this.subscribe("/davinci/ui/widgetSelected",dojo.hitch(this,this._widgetSelectionChanged))},_widgetSelectionChanged:function(g){if(this._editor)if(g.selection){var e=
g.selection[0];if(e&&this._widget==e&&this._subwidget==e.subwidget)return!1;this._subwidget=(this._widget=e)&&e.subwidget;if(this.onWidgetSelectionChange)this.onWidgetSelectionChange(g)}else console.error("have no selection")},_editorSelected:function(g){this._editor=g.editor;if(this.onEditorSelected)this.onEditorSelected(this._editor)},_subscribe:function(g,e){this.subscriptions.push(dojo.subscribe(g,this,e))},publish:function(g,e){this.publishing[g]=!0;try{dojo.publish(g,e)}catch(b){console.error(b)}delete this.publishing[g]},
destroy:function(){dojo.forEach(this.subscriptions,dojo.unsubscribe);delete this.subscriptions;this._destroyHandles()}})})},"davinci/ve/commands/ModifyCommand":function(){define(["dojo/_base/declare","davinci/ve/commands/_hierarchyCommand","../widget","../utils/ImageUtils","../States"],function(n,k,g,e,b){return n("davinci.ve.commands.ModifyCommand",[k],{name:"modify",constructor:function(b,e,a,g,f){this._oldId=b?b.id:void 0;this._properties=e=e||{};this._children=a||"string"==typeof a?a:e._children;
this._context=g||b.getContext();this._scripts=f;delete this._properties._children},setContext:function(b){this._context=b},add:function(b){b&&b._oldId==this._oldId&&(b._properties&&dojo.mixin(this._properties,b._properties),b._children&&(this._children=b._children))},execute:function(){if(this._oldId&&this._properties){var d=g.byId(this._oldId),h=this._context;if(d){this._oldData=d.getData();this._oldData.context=h;this._newData={type:this._oldData.type,properties:dojo.mixin({},this._oldData.properties,
this._properties),children:this._children||"string"==typeof this._children?this._children:this._oldData.children,scripts:dojo.mixin({},this._oldData.scripts,this._scripts),maqAppStates:this._oldData.maqAppStates,maqDeltas:this._oldData.maqDeltas,context:h};for(var a in this._newData.properties)"$MAQ_MODIFYCOMMAND_DELETE_PROPERTY$"===this._newData.properties[a]&&delete this._newData.properties[a];if(this._doRefreshFromSource(d))d.setProperties(this._newData.properties,!0),setTimeout(function(){h.visualEditor.refresh()},
0);else{h&&h.detach(d);this._oldData.properties.isTempID&&!this._properties.id||delete this._newData.properties.isTempID;a=d.getParent();var m=null,f=a.indexOf(d);a.removeChild(d);d.destroyWidget();if(m=g.createWidget(this._newData)){"IMG"===m.domNode.tagName&&e.ImageUpdateFocus(m,h);a.addChild(m,f);this._newId=m.id;h&&(h.attach(m),m.startup(),m.renderWidget(),h.widgetAddedOrDeleted(),this._oldId!=this._newId&&h.widgetChanged(h.WIDGET_ID_CHANGED,m,this._oldId),h.widgetChanged(h.WIDGET_MODIFIED,m));
this.newWidget=m;dojo.publish("/davinci/ui/widget/replaced",[m,d]);b.resetState(m.domNode);var q;if(d=this._isRefreshParentOnPropChange(m))if("string"==typeof d)for(q=a;q&&q.domNode&&q.type!=d&&"BODY"!=q.domNode.tagName;){if(!q.domNode||"BODY"==q.domNode.tagName){q=null;break}q=q.getParent()}else q=a;(d=this._isRefreshOnDescendantChange(m))&&(q=d);q&&(new davinci.ve.commands.ModifyCommand(q,null,null,a._edit_context)).execute();dojo.publish("/davinci/ui/widgetPropertiesChanged",[[m]])}}}}},_doRefreshFromSource:function(b){var d=
this._properties,a,e,f=!1;for(a in d)if(d.hasOwnProperty(a)&&(e=b.metadata.property[a])&&e.refreshFromSource){f=!0;break}return f},_isRefreshParentOnPropChange:function(b){return davinci.ve.metadata.queryDescriptor(b.type,"refreshParentOnPropChange")},undo:function(){if(this._newId&&this._oldData){var d=g.byId(this._newId);if(d){var e=d.getParent();if(e){var a=e.indexOf(d);if(!(0>a)){var m=e.getContext();m&&m.detach(d);e.removeChild(d);d.destroyWidget();if(newWidget=g.createWidget(this._oldData)){this._oldData=
newWidget.getData();this._oldData.context=this._context;e.addChild(newWidget,a);m&&(m.attach(newWidget),newWidget.startup(),newWidget.renderWidget(),m.widgetAddedOrDeleted(),m.widgetChanged(m.WIDGET_MODIFIED,newWidget));dojo.publish("/davinci/ui/widget/replaced",[newWidget,d]);b.resetState(newWidget.domNode);var f;if(this._isRefreshParentOnPropChange(d))if("string"==typeof refreshParent)for(f=e;f&&f.domNode&&f.type!=refreshParent&&"BODY"!=f.domNode.tagName;){if(!f.domNode||"BODY"==f.domNode.tagName){f=
null;break}f=f.getParent()}else f=e;(d=this._isRefreshOnDescendantChange(newWidget))&&(f=d);f&&(new davinci.ve.commands.ModifyCommand(f,null,null,e._edit_context)).execute();dojo.publish("/davinci/ui/widgetPropertiesChanged",[[newWidget]])}}}}}}})})},"davinci/ve/commands/_hierarchyCommand":function(){define(["dojo/_base/declare"],function(n){return n("davinci.ve.commands._hierarchyCommand",null,{_isRefreshOnDescendantChange:function(k){for(var g;k&&k.domNode&&"BODY"!=k.domNode.tagName;)(k=k.getParent())&&
davinci.ve.metadata.queryDescriptor(k.type,"refreshOnDescendantChange")&&(g=k);return g}})})},"davinci/ve/utils/ImageUtils":function(){define([],function(){return{ImageUpdateFocus:function(n,k){if(k&&n&&n.domNode&&"IMG"===n.domNode.tagName)var g=dojo.connect(n.domNode,"onload",function(){for(var e=k.getSelection(),b=0;b<e.length;b++)if(e[b]==n){k.updateFocus(n,b);break}dojo.disconnect(g)})}}})},"dojo/store/Memory":function(){define(["../_base/declare","./util/QueryResults","./util/SimpleQueryEngine"],
function(n,k,g){return n("dojo.store.Memory",null,{constructor:function(e){for(var b in e)this[b]=e[b];this.setData(this.data||[])},data:null,idProperty:"id",index:null,queryEngine:g,get:function(e){return this.data[this.index[e]]},getIdentity:function(e){return e[this.idProperty]},put:function(e,b){var d=this.data,h=this.index,a=this.idProperty,a=e[a]=b&&"id"in b?b.id:a in e?e[a]:Math.random();if(a in h){if(b&&!1===b.overwrite)throw Error("Object already exists");d[h[a]]=e}else h[a]=d.push(e)-1;
return a},add:function(e,b){(b=b||{}).overwrite=!1;return this.put(e,b)},remove:function(e){var b=this.index,d=this.data;if(e in b)return d.splice(b[e],1),this.setData(d),!0},query:function(e,b){return k(this.queryEngine(e,b)(this.data))},setData:function(e){e.items?(this.idProperty=e.identifier,e=this.data=e.items):this.data=e;this.index={};for(var b=0,d=e.length;b<d;b++)this.index[e[b][this.idProperty]]=b}})})},"dojo/store/util/QueryResults":function(){define(["../../_base/array","../../_base/lang",
"../../when"],function(n,k,g){var e=function(b){function d(d){b[d]||(b[d]=function(){var a=arguments;return g(b,function(b){Array.prototype.unshift.call(a,b);return e(n[d].apply(n,a))})})}if(!b)return b;b.then&&(b=k.delegate(b));d("forEach");d("filter");d("map");b.total||(b.total=g(b,function(b){return b.length}));return b};k.setObject("dojo.store.util.QueryResults",e);return e})},"dojo/store/util/SimpleQueryEngine":function(){define(["../../_base/array"],function(n){return function(k,g){function e(b){b=
n.filter(b,k);var d=g&&g.sort;d&&b.sort("function"==typeof d?d:function(a,b){for(var e,c=0;e=d[c];c++){var f=a[e.attribute],h=b[e.attribute];if(f!=h)return!!e.descending==(null==f||f>h)?-1:1}return 0});if(g&&(g.start||g.count)){var a=b.length;b=b.slice(g.start||0,(g.start||0)+(g.count||Infinity));b.total=a}return b}switch(typeof k){default:throw Error("Can not query with a "+typeof k);case "object":case "undefined":var b=k;k=function(d){for(var e in b){var a=b[e];if(a&&a.test){if(!a.test(d[e],d))return!1}else if(a!=
d[e])return!1}return!0};break;case "string":if(!this[k])throw Error("No filter function "+k+" was found in store");k=this[k];case "function":}e.matches=k;return e}})},"davinci/ve/widgets/Cascade":function(){define("dojo/_base/declare ../../workbench/WidgetLite ../../workbench/Preferences ../../Workbench ../../html/CSSModel ../../library ../../Theme ../../html/CSSRule ../States davinci/lang/ve/ve system/resource".split(" "),function(n,k,g,e,b,d,h,a,m,f,q){n=n("davinci.ve.widgets.Cascade",[k],{target:null,
targetField:null,toggleClasses:null,_regex_combinators:/[\s\~\+\>]+/,_regex_not_pseudoclass:/(.*)\:not\((.*)\)(.*)/,_regex_pseudoelement:/(.*)(\:\:[^\:\.\#\[]*)(.*)/,_regex_id:/(.*)(\#[^\:\.\#\[]*)(.*)/,_regex_class:/(.*)(\.[^\:\.\#\[]*)(.*)/,_regex_attribute:/(.*)(\[[^\]]*\])(.*)/,_regex_pseudoclass:/(.*)(\:[^\:\.\#\[]*)(.*)/,_regex_univeral:/(.*)(\*[^\:\.\#\[]*)(.*)/,delegate:null,constructor:function(a,b){this.subscriptions=[];this.publishing={};this._radioGroupName="davinci_ve_widgets_Cascade"+
davinci.ve.widgets.Cascade.__id++;this._handles=[];this._values=[];this.inherited(arguments)},buildRendering:function(){this.domNode=dojo.doc.createElement("div");this.container=dojo.doc.createElement("div");dojo.addClass(this.container,"showCascade");this.domNode.appendChild(this.container);this.topDiv=dojo.create("div",{"class":"cascadeTopDiv"},this.container);this.cascadeTableDiv=dojo.create("div",{"class":"cascadeTableDiv widget"},this.container);dojo.removeClass(this.container,"showAllValues");
dojo.isArray(this.target)||(this.target=[this.target]);dojo.addClass(this.domNode,"CascadeTop");this.inherited(arguments)},startup:function(){var a=dijit.byId(this.targetField);if(a)a._cascade=this,this._getFieldValue=function(){return a.get("value")},this._setFieldValue=function(c,b){a.set&&(this._value=c||"",this._loc=b,a._setBaseLocationAttr&&a.set("baseLocation",b&&b.getPath?b.getPath():null),a.set("value",this._value,!0))},dojo.connect(a,"onChange",this,"_onFieldChange"),dojo.connect(a,"onFocus",
this,"_onFieldFocus"),dojo.connect(a,"onBlur",this,"_onFieldBlur");else{var b=dojo.byId(this.targetField);this._getFieldValue=function(){return dojo.attr(b,"value")};this._setFieldValue=function(a,c){this._value=a||"";this._loc=c;dojo.attr(b,"value",this._value)};dojo.connect(b,"onchange",this,"_onFieldChange",!0);dojo.connect(b,"onfocus",this,"_onFieldFocus",!0);dojo.connect(b,"onblur",this,"_onFieldBlur",!0)}this._value=this._getFieldValue();this._started=!0},_canModifyRule:function(a){return a&&
a.getCSSFile?(a=a.getCSSFile())?!q.findResource(a.url).readOnly():!0:!0},_onFieldChange:function(a){function c(){h&&k&&k[h]&&k[h].resolve()}function b(a){a._value=a._getFieldValue();a._valueArray=a._valueArrayNew;var c=a._valueArray&&dojo.isArray(a._valueArray)&&0<a._valueArray.length?a._valueArray:a._value;a._changeValue(a._targetValueIndex,c)}a=function(a,c){if(!a&&!c)return!0;if(!a&&c||a&&!c||a.length!=c.length)return!1;for(var b=0;b<a.length;b++)if(a[b]!==c[b])return!1;return!0};this.context&&
this.context.blockChange(!1);if(!(this._value==this._getFieldValue()&&a(this._valueArray,this._valueArrayNew)||1>this._values.length))if("(overrides)"==this._getFieldValue())this._setFieldValue&&this._setFieldValue("(overrides)",null);else if("number"==typeof this._targetValueIndex){var d=g.getPreferences("davinci.ve.editorPrefs",e.getProject());if(this._widget&&this.target&&0<this.target.length){var h=this.target[0];a=this._widget.getContext();var m;a&&(m=a.cascadeBatch);if(m){var q=m.askUserResponse;
if(m.deferreds)var k=m.deferreds}}!1===q?(this._setFieldValue(this._value,this._loc),c()):!0===q?(b(this),c()):(q=null,this._values[this._targetValueIndex].readOnly&&"davinci.themeEdit.ThemeEditor"!=this._editor.editorID?(q=f.propChangeCannotComplete+"\x3cbr\x3e\x3cbr\x3e"+dojo.string.substitute(f.toChangeProperty,["\x3ca href\x3d'app/docs/index.html#CreatingStyleRulesWithAppCss' target\x3d'_blank'\x3e"+f.creatingStyleRules+"\x3c/a\x3e"])+"\x3cbr/\x3e\x3cbr/\x3e",davinci.Workbench.showMessage(f.errorModifyingValue,
q,{width:350},dojo.hitch(this,function(){c();return!0})),m&&(m.askUserResponse=!1),this._setFieldValue(this._value,this._loc)):("theme"==this._values[this._targetValueIndex].type||"theme"==this._values[this._targetValueIndex].proposalTarget)&&d.cssOverrideWarn&&this._editor.supports("MultiPropTarget")?require(["davinci/ve/widgets/ChangeWillModify"],dojo.hitch(this,function(a){var e=new a;a=davinci.Workbench.showDialog({title:"",content:e,style:{width:350},okCallback:dojo.hitch(this,function(){m&&
(m.askUserResponse=!0);b(this);c();e.checkbox.get("checked")&&(d.cssOverrideWarn=!1,g.savePreferences("davinci.ve.editorPrefs",null,d))}),okLabel:null,hideCancel:null,submitOnEnter:!0});dojo.connect(a,"onCancel",dojo.hitch(this,function(){m&&(m.askUserResponse=!1);this._setFieldValue(this._value,this._loc);c();e.checkbox.get("checked")&&(d.cssOverrideWarn=!1,g.savePreferences("davinci.ve.editorPrefs",null,d))}))})):(b(this),c()))}},_changeValue:function(a,b){var c=void 0;this._whichStateInputElement&&
this._whichStateInputElement.checked&&(c=this._whichState);var d=this._values[a];a=[];for(var e=0;e<this.target.length;e++)if(dojo.isArray(b))for(var f=0;f<b.length;f++){var h={};h[this.target[e]]=b[f];a.push(h)}else h={},h[this.target[e]]=b,a.push(h);this._dirtyCascadeList=!0;"element.style"==d.type?("position"==this.target[0]&&1==a.length&&("absolute"==a[0].position?(b=this.context.getPreference("absoluteWidgetsZindex"),a.push({"z-index":b})):a.push({"z-index":""})),dojo.publish("/davinci/ui/styleValuesChange",
[{values:a,appliesTo:"inline",applyToWhichStates:c,cascade:this}])):dojo.publish("/davinci/ui/styleValuesChange",[{values:a,appliesTo:d,applyToWhichStates:c}])},_getAttribStyleValue:function(){return this.context.getStyleAttributeValues(this._widget)},_getShortHands:function(){if(this._shorthands)return this._shorthands;this._shorthands=[];for(var a=0;a<this.target.length;a++)this._buildShortHands(this.target[a]);return this._shorthands},_buildShortHands:function(a){for(var c=!1,d=0;d<b.shorthand.length;d++)if(a==
b.shorthand[d][0]){c=!0;break}if(c)for(a=b.shorthand[d][1],c=0;c<a.length;c++){for(var e=!1,d=0;d<this._shorthands.length&&!e;d++)this._shorthands[d]==a[c]&&(e=!0);e||this._shorthands.push(a[c]);this._buildShortHands(a[c])}return this._shorthands},_onChangeOverride:function(a){alert(f.valueIsOverriden);return!1},_getSelector:function(a,b){var c=this.context.getThemeMeta();if(!c)return[];a=c.loader.getType(a);if(c=c.metadata.getStyleSelectors(a,"Normal"))for(var d in c)for(a=0;a<c[d].length;a++)for(var e=
0;e<b.length;e++)if(b[e]==c[d][a])return d},_getMetaTargets:function(a,b){var c=this._getSelector(a,b);return this.context.getModel().getRule(c).filter(function(a){return a.getSelectorText()==c})},_getSelectionCssRules:function(a){this.context._cssCache=this.context._cssCache||{};var b=this.context.getSelection();if(!a&&!b.length)return{rules:null,matchLevels:null};var c=a||b[0].domNode||b[0],d=c.id+"_"+c.className;if(b.length){var e=this.context._cssCache[d]=this.context.model.getMatchingRules(c,
!0);this.context.cssFiles&&this.context.cssFiles.forEach(function(a){a.getMatchingRules(c,e.rules,e.matchLevels)});e.rules.forEach(function(a){var b=dojo.hitch(a,"onChange",this,function(){delete this.context._cssCache[d];connect.unsubscribe(b)})},this);return e}return{rules:null,matchLevels:null}},_getAllRules:function(){function a(a){if(a&&a.parent&&a.parent.url)return a=a.parent.url,/^themes\//.test(a)||/\/themes\//.test(a)?"theme":"queried"}var b=[];if("davinci.themeEdit.ThemeEditor"!=this._editor.editorID){var d=
this._getDefaultSelection();if(this._editor.supports("inline-style")&&"element.style"==d){for(var d=this._getAttribStyleValue(),e=null,f=0;f<d.length;f++)for(var h=d[f],g=0;g<this.target.length;g++){var m=this.target[g];void 0!==h[m]&&(e=h[m])}b.push({rule:d,value:e,matchLevel:"element.style",type:"element.style"})}if((d=this._getSelectionCssRules(this._topWidgetDom))&&d.rules)for(g=0;g<d.rules.length;g++){e="";f=d.rules[g];for(h=0;h<f.selectors.length;h++)0!=h&&(e+=", "),e+=f.selectors[h].getLabel();
f=a(f);b.push({rule:d.rules[g],ruleString:e,matchLevel:d.matchLevels[g],type:f})}this._addDeltaRules(this._widget,b);for(var d=this._getClasses(this._widget),q=0,e={},g=0;g<d.length;e={thisClass:e.thisClass},g++)e.thisClass=d[g],"string"==typeof e.thisClass&&0<e.thisClass.length&&this._getClassSelector(e.thisClass).forEach(function(a){return function(c){for(var d=!1,e=0;e<b.length;e++)if(this._compareSelectors(b[e].ruleString,c)){b[e].className=a.thisClass;d=!0;break}d||(d=this._computeMatchLevelSelector(c),
b.splice(q,0,{rule:null,ruleString:c,targetFile:this.targetFile,className:a.thisClass,value:null,matchLevel:d,type:"proposal"}),q++)}}(e).bind(this))}if("davinci.themeEdit.ThemeEditor"==this._editor.editorID){if(d=this._editor._getCssRules(this._widget,this._editor._selectedSubWidget,this._editor._currentState)){g=[];for(e=d.length-1;-1<e;--e)g.push(d[e]);d=g}}else d=this._widget?this._getMetaTargets(this._widget,this.target):[];for(g=0;g<d.length;g++){e=!1;for(f=0;!e&&f<b.length;f++)b[f].rule==d[g]&&
(e=!0,b[f].type="theme");e||b.push({rule:d[g],matchLevel:"theme",type:"theme"})}return b},_buildCssRuleset:function(){var a=this._getAllRules();this._values=[];this._hasOverride=!1;for(var b=this._getShortHands(),d=0;d<a.length;d++){var e=a[d].rule;if(e){for(var f=0;f<b.length;f++)if("element.style"!=a[d].type&&null!=a[d].rule.getProperty(b[f])){a[d].shorthand=b[f];var h=e.getProperty(b[f]);a[d].value=h&&h.value;this._hasOverride=!0}else"element.style"==a[d].type&&-1<dojo.indexOf(a[d].rule,b[f])&&
(a[d].shorthand=b[f],h=dojo.indexOf(a[d].rule,b[f]),a[d].value=e[h],this._hasOverride=!0);if(!a[d].shorthand&&"element.style"!=a[d].type)a[d].value=this._getRuleTargetValue(e);else if(!a[d].shorthand&&"element.style"==a[d].type)for(f=0;f<e.length;f++)e[f].hasOwnProperty(this.target[0])&&(a[d].value=e[f][this.target[0]])}}a=this._sortRules(a);this._addClasses(a);this._values=a},_sortRules:function(a){for(var b=[],c=0;c<a.length;c++){var d=!1;"element.style"==a[c].type&&(b.splice(0,0,a[c]),d=!0);for(var e=
0;!d&&e<b.length;e++)"element.style"!=b[e].matchLevel&&b[e].matchLevel<a[c].matchLevel&&(d=!0,b.splice(e,0,a[c]));d||b.push(a[c])}return b},_addClasses:function(a){for(var b=!1,c=0;c<a.length;c++)a[c].extraClass=[],b&&a[c].extraClass.push("cssShorthandOverRidden"),a[c].value||"element.style"!=a[c].type&&this._getRuleTargetValue(a[c].rule)?b=!0:a[c].value||"element.style"==a[c].type||a[c].extraClass.push("hiddenCascadeNode"),"element.style"!=a[c].type||a[c].value||a[c].extraClass.push("elementStyleNode"),
this._canModifyRule(a[c].rule)||(a[c].extraClass.push("readOnlyRule"),a[c].readOnly=!0)},_updateCascadeList:function(){function a(a){return function(){return this._onChange({target:a})}}function b(a){return function(){return this._onChangeRemove({target:a})}}this._setFieldValue&&this._setFieldValue("",null);if(this._widget&&this._widget.domNode){dojo.removeClass(this.container,"dijitHidden");this._buildCssRuleset();this._destroy();var d=dojo.doc.createElement("table");dojo.addClass(d,"cascadeTable");
var e=null,h=null,e=dojo.doc.createElement("tr");e.className="propApplyToLabelRow";h=dojo.doc.createElement("td");h.colSpan="3";h.innerHTML=f.applyToWhich;h.className="propApplyToLabelCell";e.appendChild(h);d.appendChild(e);this._radio=[];for(var g=0;g<this._values.length;g++){var q=this._formatRuleString(this._values[g]);this._radio.push(dojo.create("input",{type:"radio",name:this._radioGroupName}));for(var e=dojo.doc.createElement("tr"),k=0;k<this._values[g].extraClass.length;k++)dojo.addClass(e,
this._values[g].extraClass[k]);h=dojo.doc.createElement("td");e.appendChild(h);dojo.addClass(h,"cascadeSpacer");h=dojo.doc.createElement("td");dojo.addClass(h,"cascadeButton");h.appendChild(this._radio[this._radio.length-1]);e.appendChild(h);h=dojo.doc.createElement("td");dojo.addClass(h,"cascadText");h.innerHTML="\x3cdiv class\x3d'cascadeRuleText'\x3e"+q+"\x3c/div\x3e";this._values[g].shorthand?this._handles.push(dojo.connect(this._radio[this._radio.length-1],"onclick",this,"_onChangeOverride")):
this._handles.push(dojo.connect(this._radio[this._radio.length-1],"onclick",this,a(g)));if(this._values[g].shorthand)h.innerHTML+="\x3cdiv\x3e"+this._values[g].shorthand+":"+this._values[g].value+";\x3c/div\x3e";else if(this._values[g].value){for(k=0;k<this.target.length;k++);h.innerHTML+="\x3cdiv class\x3d'ruleValue'\x3e"+this.target[0]+":"+this._values[g].value+";\x3c/div\x3e"}e.appendChild(h);h=dojo.doc.createElement("td");dojo.addClass(h,"cascadRemove");q=dojo.doc.createElement("button");this._values[g].readOnly&&
dojo.attr(q,"disabled","true");dojo.addClass(q,"cascadeRemoveButton");h.appendChild(q);this._handles.push(dojo.connect(q,"onclick",this,b(g)));e.appendChild(h);h=dojo.doc.createElement("td");h.className="cascadeSpacer";e.appendChild(h);d.appendChild(e)}this._widgetState=this._whichStateInputElement=void 0;e=m.getStatesListCurrent(this._widget.domNode);for(g=0;g<e.length;g++)if(e[g]){g=e[g];e=dojo.doc.createElement("tr");e.className="propWhichStateRow";h=dojo.doc.createElement("td");h.colSpan="3";
q=dojo.create("input",{type:"checkbox",checked:!1,className:"propWhichStateInput"});this._whichState=g;this._whichStateInputElement=q;h.appendChild(q);q=dojo.create("label",{className:"propWhichStateLabel"});q.innerHTML=dojo.string.substitute(f.onlyApplyToState,[g]);h.appendChild(q);h.className="propWhichStateCell";e.appendChild(h);d.appendChild(e);break}this.cascadeTableDiv.appendChild(d);this._updateFieldValue()}else dojo.addClass(this.container,"dijitHidden")},selectRule:function(a){for(var b=
0;b<this._values.length;b++)if("element.style"!=a&&this._values[b].rule==a){dojo.removeClass(this._radio[b].parentNode.parentNode,"hiddenCascadeNode");dojo.attr(this._radio[b],"checked",!0);this._onChange({target:b});break}else if("element.style"==a&&"element.style"==this._values[b].type){dojo.removeClass(this._radio[b].parentNode.parentNode,"hiddenCascadeNode");dojo.attr(this._radio[b],"checked",!0);this._onChange({target:b});break}},selectRuleBySelector:function(a){if("element.style"==a)this._targetValueIndex=
0,0<this._values.length&&(dojo.attr(this._radio[0],"checked",!0),this._values[0].shorthand?dojo.addClass(this._radio[0].parentNode.parentNode,"cssShorthandOverRidden"):(a=this._getBaseLocation(),this._setFieldValue(this._values[0].value,a)));else for(var b=0;b<this._values.length;b++)if("element.style"!=this._values[b].type&&this._values[b].rule&&this._values[b].rule.hasSelector(a)){dojo.removeClass(this._radio[b].parentNode.parentNode,"hiddenCascadeNode");dojo.attr(this._radio[b],"checked",!0);this._onChange({target:b});
break}},_isTarget:function(a){if("$std_10"===a)return!0;for(var b=0;b<this.target.length;b++)if(this.target[b]==a)return!0;return!1},_targetIsRootProperty:function(){for(var a=["left","top","right","bottom"],b=0;b<this.target.length;b++)if(-1<a.indexOf(this.target[b]))return!0;return!1},_updateFieldValue:function(){null==this._widget&&this._setFieldValue("",this._getBaseLocation());var a=this._getDefaultSelection();this._targetValueIndex=0;for(var b=!1,d=!1,e=0;e<this._values.length;e++){var f="davinci.ve.HTMLPageEditor"==
this._editor.editorID,h="davinci.themeEdit.ThemeEditor"==this._editor.editorID;this._values[e].value&&!b&&h||this._values[e].value&&!b&&f&&!this._values[e].readOnly||!b&&!d&&"element.style"!=this._values[e].type&&this._values[e].rule&&this._values[e].rule.hasSelector(a)||"element.style"==a&&"element.style"==this._values[e].type?(this.selectRule("element.style"==this._values[e].type?"element.style":this._values[e].rule),this._values[e].value&&(b=!0),d=!0):b&&!d&&dojo.addClass(this._radio[e].parentNode.parentNode,
"cssOverRidden")}b||d||!f||this.selectRuleBySelector("element.style")},_getThemeMetaDataByWidget:function(a){var b=this.context.getThemeMeta();if(!b)return null;a=b.loader.getType(a);var b=b.loader.getMetaData(a),c=!1,e="string"==typeof a?a.split("."):null;e&&"html"==e[0]&&(c=!0);if(!b&&this.context.cssFiles&&!c)for(c=0;c<this.context.cssFiles.length;c++)if(e=h.getThemeByCssFile(this.context.cssFiles[c]))if(b=d.getThemeMetadata(e).loader.getMetaData(a))break;return b},_getDefaultSelection:function(){var a=
"Normal";"davinci.themeEdit.ThemeEditor"==this._editor.editorID&&(a=a||m.getState());var b=this._getThemeMetaDataByWidget(this._widget);if(!b||!b.states||this._targetIsRootProperty())return"element.style";if(b&&b.states[a]&&b.states[a].elements){var d=b.states[a].elements,e;for(e in d)for(var f=0;f<d[e].length;f++)if(this._isTarget(d[e][f]))return"$root"==e?"element.style":e}if(b&&b.states[a]&&(d=this.context.getThemeMeta())&&(f=d.loader.getType(this._widget),d=d.metadata.getStyleSelectors(f,a,null)))for(e in d)for(a=
0;a<d[e].length;a++)if(this._isTarget(d[e][a])){if(b.rootSelectors)for(a=0;a<b.rootSelectors.length;a++)if(e==b.rootSelectors[a])return"element.style";return e}return null},_addDeltaRules:function(a,b){var c="Normal",d=-1,e=[],f=this.context._getCssFiles(),f=f&&0<f.length?f[0].url:null,h=!1;f&&(h=(h=q.findResource(f))?h._readOnly:!0);"davinci.themeEdit.ThemeEditor"==this._editor.editorID&&(c=c||m.getState());if((a=this._getThemeMetaDataByWidget(a))&&a.states[c]&&a.states[c].selectors){var c=a.states[c].selectors,
g;for(g in c){c=!1;for(a=0;a<b.length;a++){var p=b[a];"element.style"===p.type&&(d=a);if("theme"===p.type&&p.ruleString===g&&(p.rule.parent.relativeURL==this.context._themeUrl||p.rule.parent.url==f)){c=!0;break}}c||(c=this._computeMatchLevelSelector(g),f&&!h&&e.push({rule:null,ruleString:g,targetFile:f,className:null,value:null,matchLevel:c,type:"proposal"}),this.context._themeUrl&&!this.context.theme.getFile().readOnly()&&e.push({rule:null,ruleString:g,targetFile:this.context._themeUrl,className:null,
value:null,matchLevel:c,type:"proposal",proposalTarget:"theme"}))}}var k=d+1;e.forEach(function(a){b.splice(k++,0,a)});return b},_getRuleTargetValue:function(a){var b=null;if(a)for(var c=0;!b&&c<this.target.length;c++)b=a.getProperties(this.target[c]);if(null!=b){if(1<b.length){a=[];for(c=0;c<b.length;c++)a.push(b[c].value);return a}if(1==b.length)return b[0].value}return null},_onChangeRemove:function(a){this._changeValue(a.target,null);this._updateCascadeList()},_onChange:function(a){var b=null;
if("element.style"==this._values[a.target].type)b=this._getBaseLocation();else if("proposal"==this._values[a.target].type){var c=this.context.getModel().find({elementType:"CSSFile",relativeURL:this._values[a.target].targetFile},!0),d=this.context._getCssFiles();c?b=q.findResource(c.url):d[0].url==this._values[a.target].targetFile&&(b=q.findResource(d[0].url))}else b=q.findResource(this._values[a.target].rule.getCSSFile().url);this._setFieldValue&&this._setFieldValue(this._values[a.target].value||
"",b);this._targetValueIndex=a.target},_widgetValuesChanged:function(a){if(this._dirtyCascadeList)this._updateCascadeList(),this._dirtyCascadeList=!1;else{var b=this._getShortHands();a=a.values;for(var c in a)for(a=0;a<b.length;a++)if(b[a]==c){this._updateCascadeList();return}}},_formatRuleString:function(a){if("element.style"==a.type)return"element.style";var b="";if("proposal"==a.type)b=a.className?b+dojo.string.substitute(f.newRule,[a.className,a.targetFile]):b+dojo.string.substitute(f.newThemeRule,
[a.targetFile]),b+=a.ruleString;else{var c=a.rule;a.className?b+=dojo.string.substitute(f.existingRule,[a.className,this.targetFile]):"theme"==a.type&&(b+="["+a.type+"] ");if(a.ruleString)b+=a.ruleString;else for(var d=0;d<c.selectors.length;d++)0!=d&&(b+=", "),b+=c.selectors[d].getLabel();(d=c.searchUp("CSSFile"))&&(b+="  ("+d.url||d.relativeURL);b=a.property?b+dojo.string.substitute(f.line,[a.property.startLine]):b+dojo.string.substitute(f.line,[c.startLine||f.propUndefined])}return b},_getWidgetTopDom:function(b,
d){d=this._getSelector(b,d);var c=function(a,b){if(b.matches(a))return a;for(;0<a.children.length;)return c(a.children[0],b)};if(d){var e=new a;e.setText(d+"{}");return c(b.domNode||b,e)}return null},_widgetSelectionChanged:function(a){(this._widget=a=a[0])?(this.context=a.getContext(),this.targetFile=this.context.getAppCssRelativeFile(),this._editor=this.context.editor,this._topWidgetDom=this._getWidgetTopDom(this._widget,this.target)||this._widget.domNode||this._widget):this._topWidgetDom=null;
this._updateCascadeList()},_getBaseLocation:function(){return{}},_editorSelected:function(a){this._editor=a.editor;var b;this._editor&&this._editor.getContext&&(b=this._editor.getContext());b&&this._editor.supports("style")?(this.context=b,this.targetFile=b.getAppCssRelativeFile(),a=b.getSelection(),0<a.length?this._widgetSelectionChanged(a):this._widgetSelectionChanged([])):(this._widget=this.context=null,this._setFieldValue&&this._setFieldValue("",null));this._updateCascadeList()},_onFieldFocus:function(){this.context&&
this.context.blockChange(!0)},_destroy:function(){var a=this.cascadeTableDiv;for(dojo.forEach(dojo.query("[widgetId]",a).map(dijit.byNode),function(a){a.destroy()});a.firstChild;)dojo._destroyElement(a.firstChild);dojo.forEach(this._handles,dojo.disconnect);this._handles=[]},_onFieldBlur:function(){this.context&&this.context.blockChange(!1)},_getClasses:function(a){a=a.getClassNames("class")||"";a=a.split(" ");for(var b=0;b<a.length;b++)for(var c=b+1;c<a.length;c++)a[c]==a[b]&&a.splice(c,1);return a},
_getRelativeMetaTargetSelector:function(a){var b=this.context.getThemeMeta();if(!b)return[];var c=this.context.getSelection();if(!c.length)return[];c=c[0];c=b.loader.getType(c);return b.metadata.getRelativeStyleSelectorsText(c,"Normal",null,a,this.context.getTheme().className)},_getClassSelector:function(a){var b=this._getRelativeMetaTargetSelector(this.target),b=b.length?b[0]:"";bodyId=this.context.model.find({elementType:"HTMLElement",tag:"body"},!0).find({elementType:"HTMLAttribute",name:"id"},
!0).value;var c=this.context.getTheme(),d=[];if(!c)return d;var e=c.className;b.split(",").forEach(function(b){b=b.trim();d.push("#"+bodyId+"."+e+" ."+a+b)}.bind(this));return d},_computeMatchLevelSelector:function(a){a=a.split(this._regex_combinators);for(var b=0,c=0;c<a.length;c++){for(var d=a[c];;){var e=d.match(this._regex_not_pseudoclass);if(null!=e)b+=this._computeMatchLevelSimpleSelector(e[2]),d=e[1]+e[3];else break}b+=this._computeMatchLevelSimpleSelector(d)}return b},_computeMatchLevelSimpleSelector:function(a){var b=
0;do{var c=function(c,e){c=a.match(c);null!=c&&(d=!0,b+=e,a=c[1]+c[3])},d=!1;c(this._regex_pseudoelement,1);d||(c(this._regex_id,100),c(this._regex_class,10),c(this._regex_attribute,10),c(this._regex_pseudoclass,10),c(this._regex_univeral,0))}while(d);0<a.length&&(b+=1);return b},_compareSelectors:function(a,b){if(!(a&&b||a==b))return!1;a=a.split(this._regex_combinators);b=b.split(this._regex_combinators);if(a.length!=a.length)return!1;for(var c=0;c<a.length;c++)if(a[c]!=b[c])return!1;return!0},_compareSimpleSelectors:function(a,
b){}});return dojo.mixin(n,{__id:0})})},"davinci/Theme":function(){define("dojo/_base/declare dojo/promise/all ./Workbench ./Runtime ./library ./workbench/Preferences ./model/Path ./html/HTMLFile ./model/Factory system/resource".split(" "),function(n,k,g,e,b,d,h,a,m,f){var q={TEMP_CLONE_PRE:"clone_",desktop_default:"desktop_default",mobile_default:"custom_default",default_theme:"(device-specific)",none_themeset_name:"(none)",other_device:"other",none_theme:"none",dojoMobileDefault:[{theme:"android",
device:"Android"},{theme:"blackberry",device:"BlackBerry"},{theme:"ipad",device:"iPad"},{theme:"iphone",device:"iPhone"},{theme:"iphone",device:"other"}],dojoMobileCustom:[{theme:"custom",device:"Android"},{theme:"custom",device:"BlackBerry"},{theme:"custom",device:"iPad"},{theme:"custom",device:"iPhone"},{theme:"custom",device:"other"}],isThemeHTML:function(a){return-1<a.getName().indexOf("dojo-theme-editor.html")},CloneTheme:function(a,b,d,e,g,m){function c(a){var b=[];a.forEach(function(a){a=f.findResource(u+
"/"+a);a=(new h(a.getPath())).relativeTo("./"+n,!0);for(var c="..",d=0;d<a.segments.length;d++)c=c+"/"+a.segments[d];b.push(c)});return b}d=[];g.getFile();m=(new h(e)).removeLastSegments(0);m=f.findResource(m.toString());m.readOnly()&&m.createResource();f.createResource(e,!0);var q=f.findResource(e);g.getFile().getName();var p=(new h(q.getPath())).lastSegment();e=q.createResource(p+".theme");m=q.createResource(p+".css");var n=this.getThemeLocation(),u=g.getFile().parent.getPath(),y=c(g.themeEditorHtmls),
z=c(g.meta),A=" ";c(g.files).forEach(function(a){A=A+'@import url("'+a+'");'});a={className:g.className,name:a,version:b||g.version,specVersion:g.specVersion,files:[""+p+".css"],meta:z,themeEditorHtmls:y,useBodyFontBackgroundClass:g.useBodyFontBackgroundClass};g.helper&&(a.helper=g.helper.declaredClass?g.helper.declaredClass:g.helper);g.base&&(a.base=g.base);g.type&&(a.type=g.type);if(g.conditionalFiles)for(a.conditionalFiles=g.conditionalFiles,g=c(g.conditionalFiles),b=0;b<a.conditionalFiles.length;b++)p=
q.createResource(a.conditionalFiles[b]),d.push(p.setContents('@import url("'+g[b]+'");'));g=e.setContents(JSON.stringify(a));g.themeFile=e;d.push(g);d.push(m.setContents(A));return{promise:k(d),themeFile:e}},getHelper:function(a){if(a){if(a.helper&&"string"!=typeof a.helper)return a.helper;var b=a.helper;if(b){var c=new dojo.Deferred;require([b],function(a){a.declaredClass=b;b=a;c.resolve({helper:b})});return c}}},getThemeSet:function(a){var b=q.getThemeSets(g.getProject()),c=dojo.clone(this.dojoMobileDefault),
d;b||(b=this.dojoThemeSets);b=dojo.clone(b);if(a){if(d=a._getDojoJsElem().getAttribute("data-dojo-config"))d=require.eval("({ "+d+" })","data-dojo-config"),d.themeMap&&(c=q.getDojoxMobileThemesFromThemeMap(a,d.themeMap));var e=a.getTheme();if(null==e)console.error("have no desktop theme, abort!");else for(var f=0,h=b.themeSets.length;f<h;f++)if(d=b.themeSets[f],d.desktopTheme===e.name&&this.themeSetEquals(c,d.mobileTheme))return d}e||(console.error("maq hack, restore desktop theme"),e={name:"claro"});
d={name:this.none_themeset_name,desktopTheme:a?e.name:"claro",mobileTheme:c};b.themeSets.push(d);return d},getBase:function(){if(g.singleProjectMode())return g.getProject()},getThemeLocation:function(){var a=this.getBase(),b=d.getPreferences("davinci.ui.ProjectPrefs",a);return(new h(a)).append(b.themeFolder)},getTheme:function(a,d){d=b.getThemes(g.getProject(),this.workspaceOnly);for(var c=0;c<d.length;c++)if(d[c]&&d[c].name===a)return d[c]},getThemeByCssFile:function(a){var c=b.getThemes(g.getProject(),
this.workspaceOnly);a=f.findResource(a.url).getPath();for(var d=0;d<c.length;d++)for(var e=c[d].getFile().getParentFolder().getPath(),h=0;h<c[d].files.length;h++)if(e+"/"+c[d].files[h]===a)return c[d];return null},getDojoxMobileThemeMap:function(a,b){for(var c=[],d=[".*","iphone",[]],e=0;e<b.length;e++)if(b[e].theme!=this.none_theme&&b[e].theme!=this.default_theme){var f=this.getTheme(b[e].theme);if(f){var g;f.path&&f.path[0]?(g=f.path[0].lastIndexOf("/"),g=new h(f.path[0].substring(0,g+1)+f.files[0])):
g=(new h(f.getFile().parent.getPath())).append(f.files[0]);var m=a.getFullResourcePath();g=g.relativeTo(m,!0).toString();b[e].device===this.other_device?d=[".*",f.base,[g]]:c.push([b[e].device,f.base,[g]])}}c.push(d);return c},getDojoxMobileThemesFromThemeMap:function(a,d){var c=b.getThemes(g.getProject(),this.workspaceOnly),e=[];d.forEach(function(b,d,f){for(f=0;f<c.length;f++){d=c[f];var g=(new h(d.getFile().parent.getPath())).append(d.files[0]),m=a.getFullResourcePath();if(g.relativeTo(m,!0).toString()==
b[2][0]){f={};f.device=b[0];f.theme=d.name;".*"===f.device&&(f.device="other");e.push(f);break}}},this);return e},themeSetEquals:function(a,b){function c(a){var b=0,c;for(c in a)a.hasOwnProperty(c)&&b++;return b}if(typeof a!==typeof b)return!1;if("function"===typeof a)return a.toString()===b.toString();if(a instanceof Object&&b instanceof Object){if(c(a)!==c(b))return!1;var d=!0,e;for(e in a)if(d=this.themeSetEquals(a[e],b[e]),!d)return!1;return!0}return a===b},themeMapsEqual:function(a,b){a=JSON.stringify(a);
b=JSON.stringify(b);return a===b},singleMobileTheme:function(a){for(var b=a.mobileTheme[0].theme,c=1;c<a.mobileTheme.length;c++)if(a.mobileTheme[c].theme!=b)return!1;return!0},getThemeSets:function(a){var b=e.getDefaultThemeSet(),c=null;if(b){var f=!1;if(c=d.getPreferences("maqetta.dojo.themesets",a)){for(var h=!1,g=0;g<c.themeSets.length;g++)if(c.themeSets[g].name===b.name){h=!0;q.themeSetEquals(c.themeSets[g],b)||(c.themeSets[g]=b,f=!0);break}h||(c.themeSets.push(b),f=!0)}else c=q.dojoThemeSets,
c.themeSets[0]=b,f=!0;f&&q.saveThemeSets(a,c)}return c},saveThemeSets:function(a,b){d.savePreferences("maqetta.dojo.themesets",a,b)}};q.none_themeset={name:q.none_themeset_name,desktopTheme:"claro",mobileTheme:dojo.clone(q.dojoMobileDefault)};q.default_themeset={name:q.desktop_default,desktopTheme:"claro",mobileTheme:dojo.clone(q.dojoMobileDefault)};q.custom_themeset={name:q.mobile_default,desktopTheme:"claro",mobileTheme:q.dojoMobileCustom};q.dojoThemeSets={version:"1.7",specVersion:"0.8",helper:"maq-metadata-dojo/dojox/mobile/ThemeHelper",
themeSets:[q.custom_themeset]};return q})},"davinci/html/HTMLFile":function(){define("dojo/_base/declare davinci/html/HTMLItem davinci/html/HTMLParser davinci/html/CSSSelector davinci/html/HTMLElement davinci/html/CSSImport davinci/html/CSSFile davinci/model/Model davinci/model/Path".split(" "),function(n,k,g,e,b,d,h,a,m){return n("davinci.html.HTMLFile",k,{constructor:function(a){this.url=this.fileName=a;this.elementType="HTMLFile";this._loadedCSS={};this._styleElem=null},save:function(a){var b,
c=system.resource.findResource(this.fileName);this.getText();c?(b=this.getText(),b=c.setContents(b,a)):console.error("couldnt find file in resources : "+this.fileName);return b},getText:function(a){a=a||{};a.indent=0;for(var b="",c=0;c<this.children.length;c++){var d=this.children[c],b=b+d.getText(a);"HTMLComment"==d.elementType&&(b+=this._addWS(d._fmLine,d._fmIndent))}return b},getDocumentElement:function(a){for(a=0;a<this.children.length;a++)if("html"==this.children[a].tag)return this.children[a]},
findElement:function(a){var b=this.getDocumentElement();if(b)return b.findElement(a)},getMatchingRules:function(a,b){var c={visit:function(b){if("CSSFile"==b.elementType){var c=[];b=b.getMatchingRules(a,[],c);for(var d=0;d<b.length;d++)for(var e=0;e<this.matchLevels.length;e++)if(c[d]>this.matchLevels[e]){this.matchLevels.splice(e,0,c[d]);this.rules.splice(e,0,b[d]);break}0==this.rules.length&&(this.rules=b,this.matchLevels=c);return!0}return!1},matchLevels:[],rules:[]};this.visit(c);return b?{rules:c.rules,
matchLevels:c.matchLevels}:c.rules},getRule:function(a){if(!a)return[];var b=e.parseSelectors(a);a={visit:function(a){return"CSSFile"==a.elementType?(a=a.getRule(b),this.rules=this.rules.concat(a||[]),!0):!1},rules:[]};this.visit(a);return a.rules},setText:function(a,b){this.visit({visit:function(a){"CSSImport"==a.elementType&&a.close()}});this.children=[];this._styleElem=null;a=g.parse(a||"",this);var c="";b||0!=a.errors.length||(c=this.getText(),this.children=[],a=g.parse(c,this));this.endOffset=
a.endOffset;this.errors=a.errors;var d=this;b||this.visit({visit:function(a){"CSSImport"!=a.elementType||a.cssFile||(a.load(!0),dojo.connect(a.cssFile,"onChange",null,dojo.hitch(d,"onChange")))}});this.onChange()},hasStyleSheet:function(a){for(var b=this.find({elementType:"CSSImport"}),c=0;c<b.length;c++)if(b[c].url==a)return!0;return!1},addStyleSheet:function(a,e,c,h,g){var f=new m(this.url||this.fileName),f=f.getParentPath().append(a),f=f.toString();c||(this._loadedCSS[f]=require("davinci/model/Factory").getModel({url:f,
includeImports:!0,loader:g}));e&&this._loadedCSS[f].setText(e);this.onChange();this._styleElem||(e=this.find({elementType:"HTMLElement",tag:"head"},!0),g=e.getChildElement("style"),g||(g=new b("style"),e.addChild(g)),this._styleElem=g);e=new d;e.parent=this;e.url=a;h?this._styleElem.insertBefore(e,h):this._styleElem.addChild(e);c||e.load(!0)},close:function(){this.visit({visit:function(a){"CSSImport"==a.elementType&&a.close()}});require("davinci/model/Factory").closeModel(this)},getLabel:function(){return"\x3c\x3e"},
getID:function(){return this.fileName},updatePositions:function(b,d){(new a(this)).updatePositions(this,b,d);this.visit({visit:function(a){if(a.endOffset<b)return!0;"HTMLElement"==a.elementType&&a.startTagOffset>b&&(a.startTagOffset+=d)}})},mapPositions:function(a){var b=this.getText();a=a.getText();b=b.indexOf(a);a=b+a.lastIndexOf("\x3e")+1;return{startOffset:b,endOffset:a}},reportPositions:function(){this.visit({visit:function(a){}})},evaluate:function(a){if("/"!==a.charAt(0))console.error("invalid XPath string");
else{var b=this;a.substr(1).split("/").forEach(function(a){a=a.match(this._RE_XPATH);var c=a[1];a=a[2];var d;d=b.children.filter(function(a){return a.tag===c});!a&&1<d.length?console.error("invalid XPath string; no index specified for multiple elements"):b=a?d[a-1]:d[0]},this);return b}},_RE_XPATH:/(\w+)(?:\[(\d+)\])?/})})},"davinci/html/HTMLParser":function(){define("dojo/_base/declare davinci/html/HTMLText davinci/html/HTMLElement davinci/html/HTMLAttribute davinci/html/HTMLComment davinci/html/PHPBlock davinci/model/parser/Tokenizer davinci/html/CSSParser".split(" "),
function(n,k,g,e,b,d,h,a){var m=function(){var a={autoSelfClosers:{br:!0,img:!0,hr:!0,link:!0,input:!0,meta:!0,col:!0,frame:!0,base:!0,area:!0},doNotIndent:{pre:!0,"!cdata":!0}},b={autoSelfClosers:{},doNotIndent:{"!cdata":!0}},c=a,d=!1,e=function(){function a(a,c){var f=a.next();if("\x3c"==f){if(a.equals("!"))return a.next(),a.equals("[")?a.lookAhead("[CDATA[",!0)?(c(d("xml-cdata","]]\x3e")),null):"xml-text":a.lookAhead("--",!0)?(c(d("xml-comment","--\x3e")),null):a.lookAhead("DOCTYPE",!0)?(a.nextWhileMatches(/[\w\._\-]/),
c(d("xml-doctype","\x3e")),"xml-doctype"):"xml-text";if(a.equals("?")){a.next();if(a.lookAhead("php",!0,!1,!0))return c(e("php-block","?\x3e")),null;a.nextWhileMatches(/[\w\._\-]/);c(d("xml-processing","?\x3e"));return"xml-processing"}a.equals("/")&&a.next();c(b);return"xml-punctuation"}if("\x26"==f){for(;!a.endOfLine()&&";"!=a.next(););return"xml-entity"}a.nextWhileMatches(/[^&<\n]/);return"xml-text"}function b(b,d){var e=b.next();if("\x3e"==e)return d(a),"xml-punctuation";if(/[?\/]/.test(e)&&b.equals("\x3e"))return b.next(),
d(a),"xml-punctuation";if("\x3d"==e)return"xml-punctuation";if(/[\'\"]/.test(e))return d(c(e)),null;b.nextWhileMatches(/[^\s\u00a0=<>\"\'\/?]/);return"xml-name"}function c(a){return function(c,d){for(;!c.endOfLine();)if(c.next()==a){d(b);break}return"xml-attribute"}}function d(b,c){return function(d,e){for(;!d.endOfLine();){if(d.lookAhead(c,!0)){e(a);break}d.next()}return b}}function e(b,c){return function(d,e){for(var f=!1;!d.endOfLine();){if(d.lookAhead(c,!0)){f=!0;e(a);break}d.next()}if(!f&&d.endOfLine())d.next();
else{for(;d.lookAheadRegex(/^[\ \t]/,!0););d.endOfLine()&&d.next()}return b}}return function(b,c){return h.tokenizer(b,c||a)}}();return{make:function(a){function b(a){for(var b=a.length-1;0<=b;b--)L.push(a[b])}function f(){b(arguments);R=!0}function h(){b(arguments);R=!1}function g(){H.style+=" xml-error"}function m(a){return function(b,c){c==a?f():(g(),f(arguments.callee))}}function k(a,b){var d=c.doNotIndent.hasOwnProperty(a)||N&&N.noIndent;N={prev:N,name:a,indent:Q,startOfLine:b,noIndent:d}}function q(a){return function(b,
c){var e=a;if(e&&e.noIndent)return c;if(d&&/<!\[CDATA\[/.test(b))return 0;e&&/^<\//.test(b)&&(e=e.prev);for(;e&&!e.startOfLine;)e=e.prev;return e?e.indent+indentUnit:0}}function p(){return h(n,p)}function n(a,b){"\x3c"==b?f(u,M,G(1==O)):"\x3c/"==b?f(y,m("\x3e")):("xml-cdata"==a?(N&&"!cdata"==N.name||k("!cdata"),/\]\]>$/.test(b)&&(N=N.prev)):S.hasOwnProperty(a)||g(),f())}function u(a,b){"xml-name"==a?(P=b.toLowerCase(),H.style="xml-tagname",f()):(P=null,h())}function y(a,b){"xml-name"==a&&(H.style=
"xml-tagname",N&&b.toLowerCase()==N.name?N=N.prev:g());f()}function G(a){return function(b,d){"/\x3e"==d||"\x3e"==d&&c.autoSelfClosers.hasOwnProperty(P)?f():"\x3e"==d?(k(P,a),f()):(g(),f(arguments.callee))}}function M(a){"xml-name"==a?(H.style="xml-attname",f(J,M)):h()}function J(a,b){"\x3d"==b?f(K):"\x3e"==b||"/\x3e"==b?h(G):h()}function K(a){"xml-attribute"==a?f(K):h()}var I=e(a),H,L=[p],O=0,Q=0,P=null,N=null,R,S={"xml-text":!0,"xml-entity":!0,"xml-comment":!0,"xml-processing":!0,"xml-doctype":!0,
"php-block":!0};return{indentation:function(){return Q},next:function(){H=I.next();"whitespace"==H.style&&0==O?Q=H.value.length:O++;"\n"==H.content&&(Q=O=0,H.indentation=q(N));if("whitespace"==H.style||"xml-comment"==H.type||"php-block"==H.type)return H;for(;;)if(R=!1,L.pop()(H.style,H.content),R)return H},copy:function(){var a=L.concat([]),b=I.state,c=N,d=this;return function(f){L=a.concat([]);O=Q=0;N=c;I=e(f,b);return d}}}},electricChars:"/",configure:function(e){null!=e.useHTMLKludges&&(c=e.useHTMLKludges?
a:b);e.alignCDATA&&(d=e.alignCDATA)}}}();return{parse:function(f,q){function c(a,b){C=new k;C.wasParsed=!0;C.startOffset=b;B[B.length-1].addChild(C,void 0,!0);C.value=a}function p(a){a.content!=a.value&&c(a.value.substring(a.content.length),a.offset+a.value.length)}function n(a,b){a=a.split("\n");var c=a[a.length-1].length;b.children.length?(lastElement=b.children[b.children.length-1],lastElement._fmLine=a.length-1,lastElement._fmIndent=c):(b._fmChildLine=a.length-1,b._fmChildIndent=c)}function u(){if(null!=
C&&!C.value.match(/\S/)){var a=B[B.length-1];a.children.pop();n(C.value,a)}C=null}function z(){var b=B[B.length-1];x.nextWhileMatches(/[\s\u00a0]/);var c=x.get();null!=C?(C.value+=c,u()):n(c,b);a.parse(x,b)}function A(a){for(r=w.next();a&&"whitespace"==r.style;)r=w.next();return r}var x=h.stringStream({next:function(){if(1==++this.count)return f;throw StopIteration;},count:0,text:f}),w=m.make(x),r,v=[],B=[];B.push(q);var C,F,E;try{do switch(r=w.next(),r.style){case "xml-punctuation":u();if("\x3c"==
r.content){var D=new g;D.wasParsed=!0;D.startOffset=r.offset;B[B.length-1].addChild(D,void 0,!0);A(!0);for("xml-tagname"==r.style?D.tag=r.content:v.push("expecting tag name");"xml-attname"==(r=A(!0)).style;){var G=new e;G.wasParsed=!0;D.attributes.push(G);G.name=r.content;G.startOffset=r.offset;A(!0);if("\x3d"==r.content)if(r=w.next(),"xml-attribute"==r.style){var M=r.content;G.setValue(M.substring(1,M.length-1))}else v.push("expecting attribute value");else G.noValue=!0,G.setValue(!0);G.endOffset=
r.offset-1;if(G.noValue&&"xml-attname"!=r.style)break}"xml-punctuation"!=r.style?v.push("expecting \x3e"):(D.startTagOffset=r.offset,"\x3e"==r.content?B.push(D):(D.noEndTag=!0,D=B[B.length-1]),p(r));"style"==D.tag&&z()}else"\x3c/"==r.value&&(q=D,r=w.next(),"script"==D.tag&&(D.script=D.getElementText()),B.pop(),D=B[B.length-1],r=w.next(),q.endOffset=r.offset,p(r));E=null;break;case "xml-text":case "whitespace":case "xml-entity":F?F.value+=r.value:E?E.value+=r.value:C?C.value+=r.value:c(r.value,r.offset);
E=null;break;case "xml-comment":u();var J=new b;J.wasParsed=!0;J.startOffset=r.offset;J.value=r.content.substring(4,r.content.length-3);J.endOffset=r.offset+r.content.length;B[B.length-1].addChild(J,void 0,!0);E=null;break;case "php-block":u();var K=new d;K.wasParsed=!0;K.startOffset=r.offset;K.value=r.content;K.endOffset=r.offset+r.content.length;B[B.length-1].addChild(K,void 0,!0);E=K;break;case "xml-doctype":F||(u(),J=new b,J.wasParsed=!0,J.startOffset=r.offset,J.value=r.value.substring(2),B[B.length-
1].addChild(J,void 0,!0),J.isProcessingInstruction=!0,r=w.next());var I=r.content.length-1;"\x3e"==r.content.charAt(r.content.length-1)?(J.endOffset=r.offset+r.content.length,J.value+=r.content.substring(0,I),p(r),F=void 0):(F=J,J.value+=r.content);E=null}while(1)}catch(H){}return{errors:v,endOffset:r?r.offset:0}}}})},"davinci/html/PHPBlock":function(){define(["dojo/_base/declare","davinci/html/HTMLItem"],function(n,k){return n("davinci.html.PHPBlock",k,{constructor:function(g){this.elementType="PHPBlock";
this.value=g||""},getText:function(g){return g.excludeIgnoredContent?"":this.value}})})},"davinci/model/parser/Tokenizer":function(){define(["dojo/_base/declare","davinci/js/JSExpression"],function(n,k){return{stringStream:function(g){function e(){for(;d==b.length;){a+=b;b="";d=0;try{b=g.next()}catch(m){if(m!=StopIteration)throw m;return!1}}return!0}var b="",d=0,h=0,a="";return{peek:function(){return e()?b.charAt(d):null},next:function(){if(!e()){if(0<a.length)throw"End of stringstream reached without emptying buffer ('"+
a+"').";throw StopIteration;}return b.charAt(d++)},get:function(){var e=a;a="";0<d&&(e+=b.slice(0,d),b=b.slice(d),d=0);h+=e.length;return e},getOffset:function(){return h},push:function(a){b=b.slice(0,d)+a+b.slice(d);h-=a.length},lookAhead:function(e,f,h,c){function m(a){return c?a.toLowerCase():a}e=m(e);var k=!1,q=a,n=d;for(h&&this.nextWhileMatches(/[\s\u00a0]/);;){h=d+e.length;var A=b.length-d;if(h<=b.length){k=e==m(b.slice(d,h));d=h;break}else if(e.slice(0,A)==m(b.slice(d))){a+=b;b="";try{b=g.next()}catch(x){if(x!=
StopIteration)throw x;break}d=0;e=e.slice(A)}else break}k&&f||(b=a.slice(q.length)+b,d=n,a=q);return k},lookAheadRegex:function(a,e){if("^"!=a.source.charAt(0))throw Error("Regexps passed to lookAheadRegex must start with ^");for(;-1==b.indexOf("\n",d);)try{b+=g.next()}catch(q){if(q!=StopIteration)throw q;}(a=b.slice(d).match(a))&&e&&(d+=a[0].length);return a},more:function(){return null!==this.peek()},applies:function(a){var b=this.peek();return null!==b&&a(b)},nextWhile:function(a){for(var b;null!==
(b=this.peek())&&a(b);)this.next()},matches:function(a){var b=this.peek();return null!==b&&a.test(b)},nextWhileMatches:function(a){for(var b;null!==(b=this.peek())&&a.test(b);)this.next()},equals:function(a){return a===this.peek()},endOfLine:function(){var a=this.peek();return null==a||"\n"==a}}},tokenizer:function(g,e){function b(b){return"\n"!=b&&/^[\s\u00a0]*$/.test(b)}var d={state:e,take:function(d){"string"==typeof d&&(d={style:d,type:d});d.offset=g.getOffset();d.content=(d.content||"")+g.get();
/\n$/.test(d.content)||g.nextWhile(b);d.value=d.content+g.get();return d},next:function(){if(!g.more())throw StopIteration;var e;if(g.equals("\n"))return g.next(),this.take("whitespace");if(g.applies(b))e="whitespace";else for(;!e;)e=this.state(g,function(a){d.state=a});return this.take(e)}};return d}}})},"davinci/js/JSExpression":function(){define(["dojo/_base/declare","davinci/js/JSElement"],function(n,k){return n("davinci.js.JSExpression",k,{constructor:function(){this.elementType="JSExpression"},
getText:function(){var g="";this.comment&&(g+=this.printNewLine(context)+this.comment.getText(context));this.label&&(g+=this.printNewLine(context)+this.label.getText(context));return g},add:function(g){}})})},"davinci/js/JSElement":function(){define(["dojo/_base/declare","davinci/js/JSModel"],function(n,k){var g=null,e=null;return n("davinci.js.JSElement",k,{constructor:function(){this.elementType="JSElement";null!==g&&(this.comment=g,g=null);null!==e&&(this.label=e,e=null)},printNewLine:function(b){for(var d=
"\n",e=0;e<b.indent;e++)d+=" ";return d},printStatement:function(b,d){return this.printNewLine(b)+d.getText(b)+(d.nosemicolon?"":";")},add:function(b){this.addChild(b)},init:function(b,d,e){},getLabel:function(){context={indent:0};return this.getText(context)},getID:function(){return this.parent.getID()+":"+this.startLine+":"+this.getLabel()},getSyntaxPositions:function(b){function d(d,e,h,c){"undefined"!=typeof b&&b!=d||a.push({line:d,col:e,length:h,type:c})}function e(d,e,h){"undefined"!=typeof b&&
b!=d[0]||a.push({line:d[0],col:d[1],length:e,type:h})}var a=[];this.visit({visit:function(a){"JSFunction"==a.elementType?(d(a.startLine,a.startCol,8,"keyword"),e(a.leftParenPos,1,"delimiter"),e(a.rightParenPos,1,"delimiter"),e(a.leftBracePos,1,"delimiter"),e(a.rightBracePos,1,"delimiter")):"JSVariableDeclaration"==a.elementType?d(a.startLine,a.startCol,3,"keyword"):"JSVariableFragment"==a.elementType?a.equalPos?e(a.equalPos,1,"operator"):d(a.startLine,a.startCol,1,"name"):"JSNameReference"==a.elementType&&
d(a.startLine,a.startCol,a.endCol-a.startCol,"name")},endVisit:function(a){return!0}});return a}})})},"davinci/js/JSModel":function(){define(["dojo/_base/declare","davinci/model/Model"],function(n,k){davinci.js||(davinci.js={});return n("davinci.js.JSModel",k,{})})},"davinci/html/CSSParser":function(){define("dojo/_base/declare davinci/html/CSSSelector davinci/html/CSSCombinedSelector davinci/html/CSSRule davinci/html/CSSProperty davinci/html/CSSAtRule davinci/html/CSSImport davinci/model/parser/Tokenizer davinci/model/Comment".split(" "),
function(n,k,g,e,b,d,h,a,m){var f=null,q=function(){function b(a,b,c){return function(d){return!a||/^\}/.test(d)?c:b?c+2*indentUnit:c+indentUnit}}var d=function(){function b(a,b){var f=a.next();if("@"==f)return a.nextWhileMatches(/[a-zA-Z0-9_-]/),"css-at";if("/"==f&&a.equals("*"))return b(c),null;if("\x3c"==f&&a.equals("!"))return b(d),null;if("\x3d"==f)return"css-compare";if(!a.equals("\x3d")||"~"!=f&&"|"!=f){if('"'==f||"'"==f)return b(e(f)),null;if("#"==f)return a.nextWhileMatches(/[\w-]/),"css-hash";
if("!"==f)return a.nextWhileMatches(/[ \t]/),a.nextWhileMatches(/\w/),"css-important";if(/\d/.test(f))return a.nextWhileMatches(/[\w.%]/),"css-unit";if(/[,.+>*\/]/.test(f))return"css-select-op";if(/[;{}:\[\]]/.test(f))return"css-punctuation";a.nextWhileMatches(/[\w\\\-_]/);return"css-identifier"}a.next();return"css-compare"}function c(a,c){for(var d=!1;!a.endOfLine();){var e=a.next();if(d&&"/"==e){c(b);break}d="*"==e}return"css-comment"}function d(a,c){for(var d=0;!a.endOfLine();){var e=a.next();
if(2<=d&&"\x3e"==e){c(b);break}d="-"==e?d+1:0}return"css-comment"}function e(a){return function(c,d){for(var e=!1;!c.endOfLine();){var f=c.next();if(f==a&&!e)break;e=!e&&"\\"==f}e||d(b);return"css-string"}}return function(c,d){return a.tokenizer(c,d||b)}}();return{make:function(a,c){c=c||0;var e=d(a),f=!1,h=!1,g=!1,m={next:function(){var a=e.next(),d=a.style,m=a.content;"css-hash"==d&&(d=a.style=h?"css-colorcode":"css-identifier");"css-identifier"==d&&(h?a.style="css-value":f||g||(a.style="css-selector"));
"\n"==m&&(a.indentation=b(f,h,c));"{"==m&&"@media"==g?g=!1:"{"==m?f=!0:"}"==m?f=h=g=!1:";"==m?h=g=!1:f&&"css-comment"!=d&&"whitespace"!=d?h=!0:f||"css-at"!=d||(g=m);return a},copy:function(){var a=f,b=h,c=e.state;return function(g){e=d(g,c);f=a;h=b;return m}}};return m},electricChars:"}"}}();q.parse=function(c,p){function n(){var a;r=w.next();for(var b=!1;"css-comment"==r.style||"whitespace"==r.style;){if("css-comment"==r.style||b)f||(f=new m),a=r.content,0===r.content.indexOf("/*")&&(a=a.substring(2),
b=!0,f.addComment("block",void 0,void 0,"")),-1<a.lastIndexOf("*/")&&a.lastIndexOf("*/")==a.length-2&&(a=a.substring(0,a.length-2),b=!1),f.appendComment(a);r=w.next()}return r}function u(){v=new k;v.startOffset=r.offset;v.parent=D;B?(B.selectors.push(v),v.parent=B):D.selectors.push(v)}function z(){var a=v;a.endOffset=r.offset-1;B||(B=new g,B.parent=D,B.selectors.push(a),v.startOffset=a.startOffset,D.selectors[D.selectors.length-1]=B);u();B.combiners.push(C);C=" "}var A,x;"string"==typeof c?A=a.stringStream({next:function(){if(1==
++this.count)return c;throw StopIteration;},count:0,text:c}):(A=c,x=!0);var w=q.make(A),r,v,B,C=" ",F=[],E=[],D,G;try{do switch(n(),r.style){case "css-selector":case "css-select-op":if(x&&"\x3c"==r.content)throw A.push("\x3c"),StopIteration;D=new e;E.push(D);D.startOffset=r.offset;p&&p.addChild(D,void 0,!0);G=!1;B=void 0;C=" ";u();a:for(;;){switch(r.style){case "css-select-op":switch(r.content){case ",":B=void 0;u();break;case ".":G&&z();n();v.cls=v.cls?v.cls+"."+r.content:r.content;G=r.value.length>
r.content.length;break;case "*":(v.element||v.cls)&&z();v.element="*";break;case "+":case "\x3e":C=r.content,z()}break;case "css-selector":"css-identifier"==r.type?((v.element||v.cls||G)&&z(),v.element=r.content):"css-hash"==r.type&&((v.id||G)&&z(),v.id=r.content.substring(1));G=r.value.length>r.content.length;break;case "css-punctuation":if("{"==r.content)break a;else":"==r.content?(n(),":"==r.content?(n(),v.pseudoElement=r.content):(v.pseudoRule=r.content,G=!0)):"["==r.content&&(n(),v.attribute=
{name:r.content},n(),"\x3d"===r.content||"~\x3d"===r.content||"|\x3d"===r.content)&&(v.attribute.type=r.content,n(),v.attribute.value=r.content.substring(1,r.content.length-1),n())}n()}f&&(D.comment=f,f=null);for(v.endOffset=r.offset-1;"}"!=n().content;){var M=r.offset,J=r.content,K=!1;"css-hash"==r.type?(n(),"css-identifier"==r.type?J+=r.content:K=!0):"css-identifier"!=r.type&&("*"!=r.content?F.push("expecting identifier around "+v.getText()+"{ "+I.name+": "+propery.value):(n(),J+=r.content));var I=
new b;I.startOffset=M;I.parent=D;f&&(I.comment=f,f=null);D.properties.push(I);D.addChild(I,void 0,!0);I.name=J;K||":"!=n().content&&F.push("expecting ':' "+v.getText()+"{ "+I.name+": "+propery.value);n();I.value=r.value;if("url"==I.value){for(;")"!=n().content;)I.value+=r.value;I.value+=r.value}for(;";"!=n().content&&"}"!=r.content;)I.value+=r.value;f&&(I.postComment=f,f=null);I.endOffset=r.offset-1;if("}"==r.content)break}f&&(I.postComment=f,f=null);D.endOffset=r.offset;break;case "css-at":var H=
r.content.substring(1),L="import"==H?new h:new d;L.startOffset=r.offset;p&&p.addChild(L,void 0,!0);if("import"==H)K=L,n(),"url"==r.content&&(K.isURL=!0,n(),n()),K.url=r.content.substring(1,r.content.length-1),K.isURL&&n(),n();else if(0<=H.indexOf("keyframes")){var O=K="",Q=!1,P="\t\t";n();K=r.content;"."==K&&(n(),K+=r.content);n();L.value=r.content+"\n";n();if(0<=r.content.indexOf("from")||0<=r.content.indexOf("to")||0<=r.content.indexOf("%"))a:for(;;){L.value+="\t"+r.content+" ";n();for(L.value+=
r.content+"\n";"}"!=n().content;){Q&&(P="\t\t",Q=!1);if(";"==r.content)O="\n",Q=!0;else if(":"==r.content||")"==r.content)O=" ";L.value+=P+r.content+O;P=O=""}L.value+="\t"+r.content+"\n";n();if("}"==r.content)break a}else F.push("inside keyframes decl expecting from/to blocks or nn% blocks");L.value+=r.content;L.name=H+" "+K}else for(L.name=H,L.value="";";"!=n().content;)L.value+=r.content;L.endOffset=r.offset}while(1)}catch(N){f&&D&&(D.postComment=f,f=null)}return{errors:F,model:E}};return q})},
"davinci/html/CSSSelector":function(){define(["require","dojo/_base/declare","davinci/html/CSSElement"],function(n,k,g){k=k("davinci.html.CSSSelector",g,{constructor:function(){this.elementType="CSSSelector"},matchesSelector:function(e){if(e.elementType==this.elementType&&this.id==e.id&&this.cls==e.cls&&this.element==e.element&&this.pseudoRule==e.pseudoRule)return!0},getText:function(e){e="";this.element&&(e+=this.element);this.id&&(e=e+"#"+this.id);this.cls&&(e=e+"."+this.cls);this.pseudoRule&&(e=
e+":"+this.pseudoRule);this.pseudoElement&&(e=e+"::"+this.pseudoElement);this.attribute&&(e=e+"["+this.attribute.name,this.attribute.type&&(e=e+this.attribute.type+'"'+this.attribute.value+'"'),e+="]");return e},matches:function(e,b){b=e[b||0];e=0;var d=!1;if(this.id){if(this.id!=b.id)return-1;e+=100;d=!0}if(this.element){if("*"!=this.element){if(this.element!=b.tagName&&this.element.toUpperCase()!=b.tagName)return-1;e+=1}d=!0}if(this.cls&&b.classes){b=b.classes;if(0<=this.cls.indexOf(".")){for(var d=
this.cls.split("."),h=0;h<d.length;h++){for(var a=!1,g=0;g<b.length&&!(a=b[g]==d[h]);g++);if(!a)return-1}e+=10*d.length}else{a=!1;for(g=0;g<b.length&&!(a=b[g]==this.cls&&!this.pseudoRule);g++);if(!a)return-1;e+=10}d=!0}return d?e:-1},getCSSRule:function(){return"CSSRule"==this.parent.elementType?this.parent:this.parent.parent}});k.parseSelectors=function(e){if("string"==typeof e){e+="{}";var b=new (n("davinci/html/CSSFile"));b.setText(e);return b.children[0].selectors}return e};return k})},"davinci/html/CSSElement":function(){define(["dojo/_base/declare",
"davinci/model/Model"],function(n,k){return n("davinci.html.CSSElement",k,{constructor:function(){"undefined"!=typeof pushComment&&null!==pushComment&&(this.comment=pushComment,pushComment=null);this.elementType="CSSElement"},getLabel:function(){context={indent:0,noComments:!0};return this.getText(context)},onChange:function(g){if(this.parent)if(g)this.parent.onChange(g);else this.parent.onChange(this)},close:function(g){for(g=0;g<this.children;g++)this.children[g].close()},getCSSFile:function(){var g=
this.getCSSRule();if(g)return g.parent},getCSSRule:function(){},_convertNode:function(g){if(dojo.isArray(g))return g;for(var e=[];g&&"HTML"!=g.tagName;)e.push({tagName:g.tagName,id:g.id,classes:g.className&&g.className.split(" ")}),g=g.parentNode;return e},getID:function(){return this.parent.getID()+":"+this.startOffset+":"+this.getLabel()}})})},"davinci/html/CSSCombinedSelector":function(){define(["dojo/_base/declare","davinci/html/CSSElement"],function(n,k){return n("davinci.html.CSSCombinedSelector",
k,{constructor:function(){this.selectors=[];this.combiners=[];this.elementType="CSSCombinedSelector"},matchesSelector:function(g){if(g.elementType==this.elementType&&g.selectors.length==this.selectors.length){for(var e=0;e<this.selectors.length;e++)if(this.combiners[e]!=g.combiners[e]||!this.selectors[e].matchesSelector(g.selectors[e]))return!1;return!0}},getText:function(g){for(var e="",b=0;b<this.selectors.length-1;b++)e+=this.selectors[b].getText(g),e=" "!=this.combiners[b]?e+(" "+this.combiners[b]+
" "):e+this.combiners[b];return e+=this.selectors[this.selectors.length-1].getText(g)},matches:function(g){for(var e=this.selectors.length-1,b=0,d=0;d<g.length;d++){var h;if(0<=(h=this.selectors[e].matches(g,d))&&(b+=h,e--,0>e))return b;if(0==d&&0>h)return-1}},visit:function(g){if(!g.visit(this)){for(var e=0;e<this.children.length;e++)this.children[e].visit(g);for(e=0;e<this.selectors.length;e++)this.selectors[e].visit(g)}g.endVisit&&g.endVisit(this)},getCSSRule:function(){return this.parent}})})},
"davinci/html/CSSRule":function(){define(["dojo/_base/declare","davinci/html/CSSElement","davinci/html/CSSParser","davinci/html/CSSProperty"],function(n,k,g,e){return n("davinci.html.CSSRule",k,{constructor:function(){this.elementType="CSSRule";this.selectors=[];this.properties=[]},getText:function(b){var d="";b=b||[];this.comment&&!b.noComments&&(d+=this.comment.getText(b));for(var d=d+this.getSelectorText(b),d=d+" {",e=0;e<this.properties.length;e++)d=d+"\n    "+this.properties[e].getText(b);d+=
"\n}\n";this.postComment&&!b.noComments&&(d+=this.postComment.getText(b));return d},setText:function(b){require("davinci/html/CSSParser").parse(b,this);dojo.mixin(this,this.children[0]);this.startOffset=(this.parent?this.parent.endOffset:0)+1;this.setDirty(!0)},addProperty:function(b,d){b=new e(b,d,this);this.properties.push(b);this.setDirty(!0);this.onChange()},insertProperty:function(b,d,h){var a;(a=this.getProperty(b))&&this.removeProperty(b);a=new e(b,d,this);this.properties.splice(h,0,a);this.setDirty(!0);
this.onChange()},getSelectorText:function(b){for(var d="",e=0;e<this.selectors.length;e++)0<e&&(d+=", "),d+=this.selectors[e].getText(b);return d},matches:function(b){b=this._convertNode(b);for(var d,e=0;e<this.selectors.length;e++)if(0<=(d=this.selectors[e].matches(b)))return d},visit:function(b){if(!b.visit(this)){for(var d=0;d<this.children.length;d++)this.children[d].visit(b);for(d=0;d<this.selectors.length;d++)this.selectors[d].visit(b)}b.endVisit&&b.endVisit(this)},hasSelector:function(b){for(var d=
0;d<this.selectors.length;d++)if(this.selectors[d].getLabel()==b)return!0;return!1},matchesSelectors:function(b){for(var d=0;d<b.length;d++)for(var e=0;e<this.selectors.length;e++)if(this.selectors[e].matchesSelector(b[d]))return!0;return!1},getCSSRule:function(){return this},getLabel:function(){return this.getSelectorText({})},getProperty:function(b){for(var d=0;d<this.properties.length;d++)if(b==this.properties[d].name)return this.properties[d]},hasProperty:function(b){for(var d=0;d<this.properties.length;d++)if(b==
this.properties[d].name)return!0},getProperties:function(b){for(var d=[],e=0;e<this.properties.length;e++)b&&b!=this.properties[e].name||d.push(this.properties[e]);return d},setProperty:function(b,d){var g=this.getProperty(b);d?g?g.value=d:(g=new e,g.name=b,g.value=d,this.properties.push(g),g.parent=this):this.removeProperty(b);this.setDirty(!0);this.onChange()},removeProperty:function(b){for(var d=0;d<this.properties.length;d++)b==this.properties[d].name&&this.properties.splice(d,1);this.setDirty(!0);
this.onChange()},removeAllProperties:function(){this.properties=[];this.setDirty(!0);this.onChange()},removeStyleValues:function(b){for(var d=[],e=0;e<this.properties.length;e++){for(var a,g=0;g<b.length&&!a;g++)a=b[g]==this.properties[e].name;a||(d=this.properties[e])}this.properties=d;this.setDirty(!0);this.onChange()}})})},"davinci/html/CSSProperty":function(){define(["dojo/_base/declare","davinci/html/CSSElement"],function(n,k){return n("davinci.html.CSSProperty",k,{constructor:function(g,e,b){this.elementType=
"CSSProperty";this.name=g||"";this.value=e||"";this.parent=b;this.expanded=[];this.lengthValues=[]},getValue:function(){return this.value},getText:function(g){var e="";this.comment&&!g.noComments&&(e+="\n  "+this.comment.getText(g));e+=this.name+" : "+this.value;this.isNotImportant&&(e+=" !important");e+=";";this.postComment&&!g.noComments&&(e+=this.postComment.getText(g));return e},getCSSRule:function(){return this.parent},addProperty:function(g,e){g=new CSSProperty(g,e,this);this.properties.push(g)},
getURL:function(){if(this.url){var g=new davinci.model.Path(this.getCSSFile().url),g=g.getParentPath().append(this.url);return g.toString()}}})})},"davinci/html/CSSAtRule":function(){define(["dojo/_base/declare","davinci/html/CSSElement"],function(n,k){return n("davinci.html.CSSAtRule",k,{constructor:function(){this.elementType="CSSAtRule"},getCSSFile:function(){return this.parent},getText:function(g){s="@";return s=s+this.name+" "+this.value+"\n"}})})},"davinci/html/CSSImport":function(){define(["dojo/_base/declare",
"davinci/html/CSSElement","davinci/model/Path","davinci/html/CSSFile"],function(n,k,g,e){return n("davinci.html.CSSImport",k,{constructor:function(){this.elementType="CSSImport"},getCSSFile:function(){return this.parent},setUrl:function(b){this.url=b},visit:function(b){if(!b.visit(this)){for(var d=0;d<this.children.length;d++)this.children[d].visit(b);this.cssFile&&this.cssFile.visit(b)}b.endVisit&&b.endVisit(this)},getText:function(b){s="@import ";return s=this.isURL?s+('url("'+this.url+'");'):s+
('"'+this.url+'";')},close:function(b){require("davinci/model/Factory").closeModel(this.cssFile);this.connection&&dojo.disconnect(this.connection);delete this.connection},load:function(b){for(var d=this.parent;d&&!d.url&&!d.fileName;)d=d.parent;d=new g(d.url||d.fileName);d=d.getParentPath().append(this.url);d=d.toString();this.cssFile=require("davinci/model/Factory").getModel({url:d,loader:this.parent.loader,includeImports:this.parent.includeImports||b});this.cssFile.relativeURL=this.url;this.connection=
dojo.connect(this.cssFile,"onChange",this.parent,"onChange")}})})},"davinci/html/CSSFile":function(){define("dojo/_base/declare dojo/_base/lang davinci/html/CSSElement davinci/html/CSSRule davinci/html/CSSSelector system/resource davinci/Workbench".split(" "),function(n,k,g,e,b,d,h){return n("davinci.html.CSSFile",g,{constructor:function(a){this.elementType="CSSFile";k.mixin(this,a);this.options||(this.options={xmode:"style",css:!0,expandShorthand:!1});a=null;this.url&&this.loader?a=this.loader(this.url):
this.url&&"app.css"===this.url&&this.setText("BODY {background-color: red!important;}");a&&this.setText(a)},save:function(a){return d.findResourceAsync(this.url).then(function(b){return b.setContents(this.getText(),a)}.bind(this))},close:function(){this.visit({visit:function(a){"CSSImport"==a.elementType&&a.close()}});require(["dojo/_base/connect"],function(a){a.publish("davinci/model/closeModel",[this])})},addRule:function(a){var b=new e;b.setText(a);this.addChild(b);this.setDirty(!0);return b},
setText:function(a){var b=this.children;this.children=[];this.errors=require("davinci/html/CSSParser").parse(a,this).errors;0<this.errors.length&&this.errors[this.errors.length-1].isException&&(this.children=b);this.includeImports&&this.children.forEach(function(a){"CSSImport"==a.elementType&&a.load()});this.onChange()},getText:function(a){a=a||{};a.indent=0;return this.children.map(function(b){return b.getText(a)}).join("")},getCSSFile:function(){return this},getID:function(){return this.fileName},
getMatchingRules:function(a,b,d){a=this._convertNode(a);b=b||[];d=d||[];for(var e=0;e<this.children.length;e++){var c=this.children[e];if("CSSRule"==c.elementType){var f=c.matches(a);if(f){for(var g=!1,h=0;h<d.length;h++)if(f>=d[h]){b.splice(h,0,c);d.splice(h,0,f);g=!0;break}g||(b.splice(0,0,c),d.splice(0,0,f))}}else"CSSImport"==c.elementType&&c.cssFile&&c.cssFile.getMatchingRules(a,b,d)}return b},getRule:function(a){var d;if(!a)return[];a=b.parseSelectors(a);for(var e=0;e<this.children.length;e++){var g=
this.children[e];if("CSSRule"==g.elementType){if(g.matchesSelectors(a)){d=g;break}}else"CSSImport"==g.elementType&&g.cssFile&&(d=g.cssFile.getRule(a)||d)}return d},getRules:function(a){a=b.parseSelectors(a);for(var d=[],e=0;e<this.children.length;e++){var g=this.children[e];"CSSRule"==g.elementType?g.matchesSelectors(a)&&d.push(g):"CSSImport"==g.elementType&&g.cssFile&&(d=d.concat(g.cssFile.getRules(a)))}return d},getStyleValue:function(a,b){var d=[],e=[];b=this._convertNode(b);this.getMatchingRules(b,
d,e);"string"==typeof a&&(a=[a]);return a.map(function(a){for(var b=0,c,f,g=0;g<d.length;g++)(f=d[g].getProperty(a))&&e[g]>b&&(c=f,b=e[g]);return c})}})})},"davinci/model/Comment":function(){define(["dojo/_base/declare","davinci/model/Model"],function(n,k){return n("davinci.model.Comment",k,{constructor:function(){this.elementType="Comment";this.nosemicolon=!0},addComment:function(g,e,b,d){null==this.comments&&(this.comments=[]);this.comments[this.comments.length]={commentType:g,start:e,stop:b,s:d}},
appendComment:function(g){var e=this.comments[this.comments.length-1];e.s+=g;e.stop+=g.length},getText:function(g){g="";for(var e=0;e<this.comments.length;e++)"line"==this.comments[e].commentType?g+="//"+this.comments[e].s+"\n":"block"==this.comments[e].commentType&&(g+="/*"+this.comments[e].s+"*/\n");return g}})})},"davinci/model/Factory":function(){define(["../html/CSSFile","../js/JSFile","../html/HTMLFile","system/resource"],function(n,k,g,e){var b=[],d=[],h={getModel:function(a){var e=a.url;if(!e)return null;
for(var f=0;f<d.length;f++)if(d[f].url==e)return b[f]++,this.incrementImports(d[f]),d[f];if(/\.html?$/i.test(e)||/\.cfhtml?$/i.test(e))return h.newHTML(a);if(/\.css$/i.test(e))return h.newCSS(a);if(/\.js$/i.test(e))return h.newJS(a)},closeModel:function(a){a=a.url;if(!a)return null;for(var e=0;e<d.length;e++)d[e].url==a&&(b[e]--,0===b[e]&&(d.splice(e,1),b.splice(e,1)))},newHTML:function(a){a=new g(a.url);d.push(a);b[d.length-1]=1;return a},newCSS:function(a){a=new n(a);d.push(a);b[d.length-1]=1;return a},
newJS:function(a){a=new k(a);d.push(a);b[d.length-1]=1;return a},getNewFromResource:function(a){a=a.extension;if(!a)return new g;switch(a){case "html":return new g;case "css":return new n;case "js":case "json":return new k;default:return new g}},incrementImports:function(a){var e={visit:function(a){if("CSSImport"==a.elementType){a=a.cssFile.url;for(var e=0;e<d.length;e++)d[e].url==a&&b[e]++}return!1}};a&&a.visit(e)},log:function(){for(var a=0;a<d.length;a++);}};require(["dojo/_base/connect"],function(a){a.subscribe("davinci/model/closeModel",
h,h.closeModel)});return h})},"davinci/js/JSFile":function(){define(["dojo/_base/declare","davinci/js/JSElement"],function(n,k){return n("davinci.js.JSFile",k,{constructor:function(g){this.elementType="JSFile";this.nosemicolon=!0;this._textContent="";g&&(this.origin=g)},getText:function(g){return this._textContent},setText:function(g){this._textContent=g},getLabel:function(){return this.fileName},getID:function(){return this.fileName},visit:function(g){if(!g.visit(this))for(var e=0;e<this.children.length;e++)this.children[e].visit(g);
g.endVisit&&g.endVisit(this)}})})},"davinci/ve/widgets/CommonProperties":function(){define(["dojo/_base/declare","davinci/workbench/ViewLite","davinci/ve/commands/ModifyCommand"],function(n,k,g){return n("davinci.ve.widgets.CommonProperties",[k],{buildRendering:function(){var e=["title"],b;b="\x3ctable width\x3d'100%' class\x3d'property_table_stretchable' border\x3d'0' cellspacing\x3d'0' cellpadding\x3d'0'\x3e\x3ccolgroup\x3e\x3ccol style\x3d'width:15px;' /\x3e\x3ccol class\x3d'gap02' /\x3e\x3ccol class\x3d'gap03' /\x3e\x3ccol style\x3d'width:15px;' /\x3e\x3c/colgroup\x3e";
var d=0;this._boxes={};for(var g=0;g<e.length;g++)this._boxes[e[g]]={value:""},this._boxes[e[g]].id="davinci_properties_event_"+d++ +"_combo",b+="\x3ctr\x3e",b+="\x3ctd/\x3e",b+="\x3ctd class\x3d'propertyDisplayName'\x3e",b+=e[g]+":",b+="\x3c/td\x3e",b+="\x3ctd\x3e",b+="\x3cinput type\x3d'text' id\x3d'"+this._boxes[e[g]].id+"'\x3e\x3c/input\x3e",b+="\x3c/td\x3e",b+="\x3ctd/\x3e",b+="\x3c/tr\x3e";b+="\x3c/table\x3e";this.domNode=dojo.doc.createElement("div");this.domNode.innerHTML=b;dojo.subscribe("/davinci/ui/widgetValuesChanged",
dojo.hitch(this,this.onWidgetSelectionChange));dojo.subscribe("/davinci/ui/widget/replaced",dojo.hitch(this,this._widgetReplaced));this.inherited(arguments)},onEditorSelected:function(e){this._editor&&this._editor.getContext?(this.context=this._editor.getContext(),this._setValues()):(this.context=this._widget=this._subwidget=null,this._clearValues())},startup:function(){function e(b){return function(){return this._onChange({target:b})}}this.inherited(arguments);for(var b in this._boxes)this._boxes[b].domNode=
dojo.byId(this._boxes[b].id),dojo.connect(this._boxes[b].domNode,"onchange",this,e(b)),dojo.connect(this._boxes[b].domNode,"onfocus",this,"_onFocus"),dojo.connect(this._boxes[b].domNode,"onblur",this,"_onBlur")},_onFocus:function(){this.context&&this.context.blockChange(!0)},_onBlur:function(){this.context&&this.context.blockChange(!1)},_onChange:function(e){e=e.target;var b=dojo.attr(this._boxes[e].domNode,"value");this.context&&this.context.blockChange(!1);if(this._boxes[e].value!=b){this._boxes[e].value=
b;var d={};d[e]=b;e=new g(this._widget,d,null);dojo.publish("/davinci/ui/widgetPropertiesChanges",[{source:this._editor.editor_id,command:e}])}},_widgetReplaced:function(e,b){this._widget===b&&(this._widget=e,this.onWidgetSelectionChange())},onWidgetSelectionChange:function(){this._widget?(this._setValues(),this.set("readOnly",!1)):(this.set("readOnly",!0),this._clearValues())},_clearValues:function(){for(name in this._boxes)this._boxes[name].domNode&&dojo.attr(this._boxes[name].domNode,"value",""),
this._boxes[name].value=null},_setValues:function(){if(this._widget)for(var e in this._boxes){var b=this._widget,d=this._boxes[e];d.domNode&&d.domNode.ownerDocument&&(b.getPropertyValue?(b=b.getPropertyValue(e),d.value!=b&&(d.value=b,dojo.attr(d.domNode,"value",d.value))):(d.value="",dojo.attr(d.domNode,"value","")))}}})})},"davinci/ve/widgets/WidgetProperties":function(){define("dojo/_base/declare dojo/_base/connect davinci/workbench/ViewLite davinci/ve/metadata davinci/commands/CompoundCommand davinci/ve/commands/ModifyCommand ./HTMLStringUtil dijit/form/DateTextBox dijit/form/TimeTextBox xide/types xide/factory".split(" "),
function(n,k,g,e,b,d,h,a,m,f,q){return n("davinci.ve.widgets.WidgetProperties",[g],{key:"widgetSpecific",_connects:null,buildRendering:function(){this.domNode=this.propDom=dojo.doc.createElement("div");dojo.addClass(this.domNode,"propGroup");dojo.attr(this.domNode,"propGroup",this.key);this._connects=[];this.inherited(arguments)},onWidgetSelectionChange:function(){if(this._widget&&this._editor&&"davinci.ve.HTMLPageEditor"==this._editor.editorID){var a=davinci.ve.metadata.query(this._widget),b=this._widget.getParent();
if(b&&b.isWidget&&(b=e.query(b))&&b.childProperties)if(a.$ownproperty)for(var d in b.childProperties)a.$ownproperty[d]=b.childProperties[d];else a.$ownproperty=b.childProperties;if(a&&a.$ownproperty){this._disconnectAll();this._destroyProperties();b={};a.$ownproperty.title||(b.title={datatype:"string"});for(d in a.$ownproperty)b[d]=a.$ownproperty[d];a=this.propDom.innerHTML=this._createWidgetRows(b);-1===a.indexOf("data-dojo-type")&&-1===a.indexOf("dojoType")||dojo.parser.parse(this.propDom);this._setValues();
this._connectAll()}}else this._disconnectAll(),this._destroyProperties()},onEditorSelected:function(a){if((this._editor=a)&&"davinci.ve.HTMLPageEditor"==a.editorID){if(this.context=a.getContext())this._widget=this.context.getSelection()[0]}else this._widget=this.context=null;this.onWidgetSelectionChange()},_createWidgetRows:function(a){this._pageLayout=[];var b={},c;for(c in a)if(b.property=a[c],!b.property.hidden){var d={display:b.property.title||c,type:b.property.datatype,format:b.property.format,
target:c,hideCascade:!0,data:b.property};b.property.dropdownQueryValues&&b.property.dropdownQueryAttribute&&(b.values=[],dojo.forEach(b.property.dropdownQueryValues,dojo.hitch(this,function(a){return function(b){b=dojo.query(b,this.context.rootNode);dojo.forEach(b,function(b){a.values.push(b.getAttribute(a.property.dropdownQueryAttribute))})}}(b))),d.values=b.values,d.type="comboEdit");if(dojo.isArray(b.property.mustHaveAncestor)){for(var e=!1,f=this._widget;!e&&f&&f.getParent()!=this.context.rootWidget;)(f=
f.getParent())&&-1<dojo.indexOf(b.property.mustHaveAncestor,f.type)&&(e=!0);e||(d.disabled=!0)}this._pageLayout.push(d);b.property.option&&(this._pageLayout[this._pageLayout.length-1].values=dojo.map(b.property.option,function(a){return a}),this._pageLayout[this._pageLayout.length-1].type=b.property.unconstrained?"comboEdit":"combo");b={values:b.values,property:b.property}}return h.generateTable(this._pageLayout)},_destroyProperties:function(){var a=this.propDom;for(dojo.forEach(dojo.query("[widgetId]",
a).map(dijit.byNode),function(a){a.destroy()});a.firstChild;)dojo._destroyElement(a.firstChild)},_connectAll:function(){function a(a){return function(){return this._onChange({target:a})}}for(var b=0,d=this._pageLayout.length;b<d;b++){var e=this._pageLayout[b],g=dijit.byId(e.id),h=g||dojo.byId(e.id),m=g?"onChange":"change",k=g?"onFocus":"focus",n=g?"onBlur":"blur";h?(h.pageIndex=b,this._connect(h,m,this,a(b)),this._connect(h,k,this,"_onFieldFocus"),this._connect(h,n,this,"_onFieldBlur"),h.owner=this,
h.row=b,q.publish(f.EVENTS.WIDGET_PROPERTY_RENDERED,{view:this,row:e,widget:g,node:h},this)):console.error("cant find "+e.id+" node",e)}},_connect:function(a,b,d,e,f){this._connects.push(k.connect.apply(null,arguments))},_disconnectAll:function(){this._connects.forEach(k.disconnect);this._connects=[]},_onChange:function(c){c=this._pageLayout[c.target];var e=dijit.byId(c.id),f;this.context&&this.context.blockChange(!1);e?(f=e.get("value"))&&f instanceof Date&&(e instanceof a?f=f.toISOString().substring(0,
10):e instanceof m&&(f="T"+f.toTimeString().substring(0,8))):(f=dojo.byId(c.id),f=dojo.attr(f,"checkbox"===f.type?"checked":"value"));if(c.value!=f){c.value=f;e={};e[c.target]=f;c=new b;f=new d(this._widget,e,null);c.add(f);if((e=this._widget.getHelper())&&e.onWidgetPropertyChange)e.onWidgetPropertyChange({widget:this._widget,compoundCommand:c,modifyCommand:f});dojo.publish("/davinci/ui/widgetPropertiesChanges",[{source:this._editor.editor_id,compoundCommand:c,command:f}])}},_onFieldFocus:function(){this.context&&
this.context.blockChange(!0)},_onFieldBlur:function(){this.context&&this.context.blockChange(!1)},_setValues:function(){try{for(var a=0,b=this._pageLayout.length;a<b;a++){var d=this._pageLayout[a],e=dojo.byId(d.id);if(e){var f=this._widget,g=d.target,h=void 0;h="_children"===g?(h=f.getChildrenData())&&1===h.length?h[0]:f.getPropertyValue(g):f.getPropertyValue(g);if(h&&h.toISOString){var m=f.metadata.property[g].format;m&&("date"==m?h=h.toISOString().substring(0,10):"time"==m&&(h="T"+h.toTimeString().substring(0,
8)))}if(d.value!=h){d.value=h;var k="boolean"===d.type?"checked":"value",q=dijit.byId(d.id);q?q.attr(k,d.value):dojo.attr(e,k,d.value)}}}}catch(B){debugger}}})})},"davinci/commands/CompoundCommand":function(){define(["dojo/_base/declare"],function(n){return n("davinci.commands.CompoundCommand",null,{name:"compound",_commands:[],constructor:function(k){this._commands=[];k&&(this._commands=[k])},add:function(k){if(k)if(this._commands)if("compound"==k.name)dojo.forEach(k._commands,function(b){this.add(b)},
this);else{if("modify"==k.name)for(var g=k._oldId,e=0;e<this._commands.length;e++){var b=this._commands[e];if("modify"==b.name&&b._oldId==g){b.add(k);return}}this._commands.push(k)}else this._commands="compound"==k.name?k._commands:[k]},setContext:function(k){for(var g=0;g<this._commands.length;g++)this._commands[g].setContext&&this._commands[g].setContext(k)},isEmpty:function(){return!this._commands||0===this._commands.length},execute:function(){if(this._commands)for(var k=0;k<this._commands.length;k++)this._commands[k].execute(),
this._commands[k]._oldId&&this._commands[k]._newId&&(this._oldId=this._commands[k]._oldId,this._newId=this._commands[k]._newId)},undo:function(){if(this._commands)for(var k=this._commands.length-1;0<=k;k--)this._commands[k].undo()}})})},"davinci/ve/widgets/EventSelection":function(){define("dojo/_base/declare dojo/_base/connect dojo/dom-class system/resource davinci/Runtime davinci/Workbench davinci/model/Path ../../workbench/Preferences ../../workbench/ViewLite ../commands/EventCommand ./HTMLStringUtil ../States xide/types xide/factory".split(" "),
function(n,k,g,e,b,d,h,a,m,f,q,c,p,y){var u=/^State:.*/,z=/^\s*davinci\.states\.setState\s*\(\s*([\'"])((?:(?!\1).)*)\1\s*\)\s*$/,A=/^File:.*/,x=/^\s*location\.href\s*\=\s*([\'"])((?:(?!\1).)*)\1\s*$/,w=function(a){a&&c.getAllStateContainers(a);return[""]},r=function(a){a&&a.match(u)&&(a=a.substring(6),a="davinci.states.setState('"+("Background"==a?"Normal":a)+"')");a&&a.match(A)&&(a="location.href\x3d'"+a.substring(5)+"'");return a},v=function(a){var b;a&&((b=a.match(z))&&(a="State:"+b[2]),(b=a.match(x))&&
(a="File:"+b[2]));return a};n=n("davinci.ve.widgets.EventSelection",[m],{pageTemplate:[{display:"onclick",target:"onclick",type:"state",hideCascade:!0},{display:"ondblclick",target:"ondblclick",type:"state",hideCascade:!0},{display:"onmousedown",target:"onmousedown",type:"state",hideCascade:!0},{display:"onmouseup",target:"onmouseup",type:"state",hideCascade:!0},{display:"onmouseover",target:"onmouseover",type:"state",hideCascade:!0},{display:"onmousemove",target:"onmousemove",type:"state",hideCascade:!0},
{display:"onmouseout",target:"onmouseout",type:"state",hideCascade:!0},{display:"onkeypress",target:"onkeypress",type:"state",hideCascade:!0},{display:"onkeydown",target:"onkeydown",type:"state",hideCascade:!0},{display:"onkeyup",target:"onkeyup",type:"state",hideCascade:!0},{display:"onfocus",target:"onfocus",type:"state",hideCascade:!0},{display:"onblur",target:"onblur",type:"state",hideCascade:!0},{display:"onchange",target:"onchange",type:"state",hideCascade:!0}],buildRendering:function(){this.domNode=
dojo.doc.createElement("div");this.domNode.innerHTML=q.generateTable(this.pageTemplate,{zeroSpaceForIncrDecr:!0});g.add(this.domNode,"EventSelection");this.inherited(arguments)},setReadOnly:function(a){for(var b=0;b<this.pageTemplate.length;b++){var c=this.pageTemplate[b].widget;c?c.set("readOnly",a):(c=this.pageTemplate[b].domNode)&&dojo.attr(c,"disabled",a)}},startup:function(){this.inherited(arguments);for(var a=0;a<this.pageTemplate.length;a++){var b=this.pageTemplate[a],c=dijit.byId(b.id),d=
c||dojo.byId(b.id);y.publish(p.EVENTS.WIDGET_PROPERTY_RENDERED,{view:this,row:b,widget:c,node:d},this)}},onEditorSelected:function(){this._editor&&this._editor.supports("states")||delete this._editor;this._buildSelectionValues()},_onChange:function(a){a=a.target;var b=dijit.byId(this.pageTemplate[a].id),c=b.get("value"),c=r(c),d={};d[this.pageTemplate[a].target]=c;d=new f(this._widget,d);dojo.publish("/davinci/ui/widgetPropertiesChanges",[{source:this._editor.editor_id,command:d}]);this.publish(p.EVENTS.ON_WIDGET_PROPERTY_CHANGED,
{widget:b,editor:this._editor,eventSelection:this,pageTemplate:this.pageTemplate,widgetProperty:this.pageTemplate[a].target,value:c,target:this._widget})},_getRoot:function(){var a=this._editor,b;a&&a.getContext&&(b=(a=a.getContext())&&a.rootNode);return b},_updateValues:function(a){a&&a.node&&a.node._dvWidget&&(a=(a=a.node._dvWidget.getContext())&&a.editor)&&a==b.currentEditor&&(this._buildSelectionValues(),this._widget&&this._setValues())},onWidgetSelectionChange:function(){this._widget?(this._setValues(),
this.setReadOnly(!1)):(this.setReadOnly(!0),this._clearValues())},_clearValues:function(){},_buildSelectionValues:function(){var a=this._getRoot();w(a)},_setValues:function(){for(var a=0;a<this.pageTemplate.length;a++){var b=this.pageTemplate[a].target,c=this._widget,d="";c.properties&&c.properties[b]?d=c.properties[b]:c._srcElement&&(d=c._srcElement.getAttribute(b));d=v(d);(b=dijit.byId(this.pageTemplate[a].id))&&b.set("value",d,!1)}},_widgetPropertiesChanged:function(a){this._updateValues({widget:a[0]})}});
n.getEventSelectionValues=w;n.getEventScriptFromValue=r;n.getValueFromEventScript=v;return n})},"davinci/actions/UndoAction":function(){define(["dojo/_base/declare","./Action","../Workbench"],function(n,k,g){return n("davinci.actions.UndoAction",k,{run:function(e){(e=g.getOpenEditor())&&e.getContext&&e.getContext().getCommandStack().undo()},isEnabled:function(e){var b=(e=g.getOpenEditor())&&e.getContext&&e.getContext();if(e&&b){if(b=b.getCommandStack().canUndo(),"davinci.ve.PageEditor"==e.declaredClass||
"davinci.ve.themeEditor.ThemeEditor"==e.declaredClass)return b}else return!1}})})},"davinci/actions/Action":function(){define(["dojo/_base/declare"],function(n){return n("davinci.actions.Action",null,{item:null,run:function(k){},isEnabled:function(k){return!0},getName:function(){return this.item.label}})})},"davinci/actions/SelectLayoutAction":function(){define(["dojo/_base/declare","./Action","../Workbench","davinci/lang/actions"],function(n,k,g,e){return n("davinci.actions.SelectLayoutAction",k,
{_changeLayoutCommand:function(b){var d=dijit.byId("selectLayout");d&&d.destroyRecursive(!1);if((d=g.getOpenEditor())&&d.getContext){var e=!0;if("absolute"===b||"Absolute positioning"===b)e=!1;d.getContext().setFlowLayout(e);d._visualChanged()}}})})},"davinci/lang/actions":function(){define([],function(){return{select:"Select",save:"Save",selectDirectory:"Select Directory to link to",parentFolder:"Parent Folder:",localName:"Local Name:",link:"Link",downloadResources:"Download Resources",downloadFileName:"Download File Name: ",
downloadNow:"Download now",titleDownload:"Download",invalidFileName:"File names may only contain letters. numbers, and '_'.",editTheme:"Edit Theme",noEditableThemes:"No editable themes found in your workspace. Please create a new theme from one of the Read Only themes.",newWidgetsShouldUse:"New widgets should use: ",selectTheme:"Select a theme",switchingThemes:"Switching themes",filesHasUnsavedChanges:"The file '${0}' has unsaved changes, \"Save\" changes and continue with switching themes.",abs:"Absolute positioning",
flow:"Flow positioning"}})},"davinci/actions/RedoAction":function(){define(["dojo/_base/declare","./Action","../Workbench"],function(n,k,g){return n("davinci.actions.RedoAction",k,{run:function(e){(e=g.getOpenEditor())&&e.getContext&&e.getContext().getCommandStack().redo()},isEnabled:function(e){var b=(e=g.getOpenEditor())&&e.getContext&&e.getContext();if(e&&b){if(b=b.getCommandStack().canRedo(),"davinci.ve.PageEditor"==e.declaredClass||"davinci.ve.themeEditor.ThemeEditor"==e.declaredClass)return b}else return!1}})})},
"davinci/ve/actions/CopyAction":function(){define(["dojo/_base/declare","./_CutCopyAction","../../Runtime"],function(n,k,g){return n("davinci.ve.actions.CopyAction",[k],{_invokeSourceEditorAction:function(e){e.htmlEditor.copyAction.run()},_executeAction:function(e,b,d,h){h=g.clipboard;g.clipboard=d;if(!h)e.onSelectionChange(b)}})})},"davinci/ve/actions/_CutCopyAction":function(){define("dojo/_base/declare davinci/Workbench davinci/ve/actions/ContextAction davinci/commands/CompoundCommand davinci/ve/commands/RemoveCommand davinci/ve/widget".split(" "),
function(n,k,g,e,b,d){return n("davinci.ve.actions.CutAction",[g],{run:function(g){if(g=this.fixupContext(g))if("davinci.ve.PageEditor"==g.declaredClass&&"source"==g._displayMode)this._invokeSourceEditorAction(g);else{var a=this._normalizeSelection(g);if(0<a.length){var h=new e,f=[],k=g.reorderPreserveSiblingOrder(a);dojo.forEach(k,function(a){var c=a.getData({identify:!1});c&&f.push(c);var e=a.getHelper();if(e&&e.getRemoveCommand){if(a=e.getRemoveCommand(a),"compound"===a.name){for(var e=[],g=a._commands,
m=g.length-1;0<m;m--){var k=g[m];"remove"===k.name&&(k=d.byId(k._id).getData({identify:!1}),e.push(k))}c.associatedCopiedWidgetData=e}}else a=new b(a);h.add(a)});this._executeAction(g,a,f,h)}}},isEnabled:function(b){b=this.fixupContext(b);var a=k.getOpenEditor();return a&&b?(b=0<b.getSelection().length,"davinci.ve.PageEditor"==a.declaredClass?(a=a.getDisplayMode(),b&&"source"!=a):b):!1},shouldShow:function(b){return(b=(b=this.fixupContext(b))?b.editor:null)&&"davinci.ve.PageEditor"==b.declaredClass},
_invokeSourceEditorAction:function(b){},_executeAction:function(b,a,d,e){}})})},"davinci/ve/actions/ContextAction":function(){define(["dojo/_base/declare","davinci/actions/Action","davinci/Runtime"],function(n,k,g){return n("davinci.ve.actions.ContextAction",[k],{_normalizeSelection:function(e){var b=e.getSelection();if(2>b.length)return b;var d=e.rootWidget,g=[];dojo.forEach(b,function(a){for(var h=a.getParent();h&&h!=d;){for(var f=0;f<b.length;f++)if(b[f]==h){e.deselect(a);return}h=h.getParent()}g.push(a)});
return g},_getContext:function(e){return e?e:(e=g.currentEditor)&&(e.getContext&&e.getContext()||e.context)},fixupContext:function(e){e=this._getContext(e);return"davinci.ve.Context"==e.declaredClass||"xideve/delite/Context"==e.declaredClass?e:"function"==typeof e.getContext?e.getContext():null}})})},"davinci/ve/commands/RemoveCommand":function(){define(["dojo/_base/declare","davinci/ve/commands/_hierarchyCommand","davinci/ve/widget","davinci/ve/States","davinci/ve/commands/ModifyCommand"],function(n,
k,g,e,b){return n("davinci.ve.commands.RemoveCommand",[k],{name:"remove",constructor:function(b){this._id=b?b.id:void 0},execute:function(){if(this._id){var d=g.byId(this._id);if(d){var h=d.getContext(),a=d.getParent()||h.getContainerNode(),m,f=d.getHelper();f&&f.onRemove&&(m=f.onRemove(d));if(!this._data){this._index=dojo.indexOf(a.getChildren(),d);if(0>this._index)return;this._data=d.getData();this._parentId=a.id}this._data.context=h;f=this._isRefreshOnDescendantChange(d);h&&h.detach(d);a.removeChild(d);
h&&h.widgetChanged(h.WIDGET_REMOVED,d);d.destroyWidget();h&&h.widgetAddedOrDeleted();f&&(new b(f,null,null,a._edit_context)).execute();e.resetState(d.domNode);m&&m()}}},undo:function(){if(this._data&&this._parentId){var d=g.byId(this._parentId);if(d){var h=g.createWidget(this._data);if(h){d.addChild(h,this._index);var a=d.getContext();a&&(a.attach(h),h.startup(),h.renderWidget(),a.widgetAddedOrDeleted(),a.widgetChanged(a.WIDGET_ADDED,h),(a=this._isRefreshOnDescendantChange(h))&&(new b(a,null,null,
d._edit_context)).execute(),e.resetState(h.domNode))}}}}})})},"davinci/ve/actions/CutAction":function(){define(["dojo/_base/declare","./_CutCopyAction","../../Runtime"],function(n,k,g){return n("davinci.ve.actions.CutAction",[k],{_invokeSourceEditorAction:function(e){e.htmlEditor.cutAction.run()},_executeAction:function(e,b,d,h){g.clipboard=d;e.select(null);e.getCommandStack().execute(h)}})})},"davinci/ve/actions/DeleteAction":function(){define(["dojo/_base/declare","davinci/Workbench","davinci/ve/actions/ContextAction",
"davinci/commands/CompoundCommand","davinci/ve/commands/RemoveCommand"],function(n,k,g,e,b){return n("davinci.ve.actions.DeleteAction",[g],{run:function(d){if(d=this.fixupContext(d)){var g=this._normalizeSelection(d);if(0<g.length){var a=void 0;if(1===g.length)var g=g[0],m=g.getHelper(),a=m&&m.getRemoveCommand?m.getRemoveCommand(g):new b(g);else a=new e,dojo.forEach(g,function(d){var e=d.getHelper();d=e&&e.getRemoveCommand?e.getRemoveCommand(d):new b(d);a.add(d)});d.select(null);d.getCommandStack().execute(a)}}},
isEnabled:function(b){b=this.fixupContext(b);var d=k.getOpenEditor();return d&&b?(b=0<b.getSelection().length,"davinci.ve.PageEditor"==d.declaredClass?(d=d.getDisplayMode(),b&&"source"!=d):b):!1},shouldShow:function(b){return(b=(b=this.fixupContext(b))?b.editor:null)&&"davinci.ve.PageEditor"==b.declaredClass}})})},"davinci/ve/actions/PasteAction":function(){define(["dojo/_base/declare","../../Workbench","./ContextAction","../tools/PasteTool","../../Runtime"],function(n,k,g,e,b){return n("davinci.ve.actions.PasteAction",
[g],{shortcut:{keyCode:86,ctrlKey:!0},run:function(d){if(d=this.fixupContext(d))if("davinci.ve.PageEditor"==d.declaredClass&&"source"==d._displayMode)d.htmlEditor.pasteAction.run();else{var g=b.clipboard;g&&d.setActiveTool(new e(g))}},isEnabled:function(d){d=this.fixupContext(d);var e=k.getOpenEditor();return e&&d?"davinci.ve.PageEditor"==e.declaredClass?(d=e.getDisplayMode(),b.clipboard&&"source"!=d):b.clipboard:!1},shouldShow:function(b){return(b=(b=this.fixupContext(b))?b.editor:null)&&"davinci.ve.PageEditor"==
b.declaredClass}})})},"davinci/ve/tools/PasteTool":function(){define("dojo/_base/declare ./CreateTool ../widget ../metadata ../../commands/CompoundCommand ../commands/AddCommand ../commands/MoveCommand ../commands/StyleCommand dojo/Deferred dojo/promise/all".split(" "),function(n,k,g,e,b,d,h,a,m,f){return n("davinci.ve.tools.PasteTool",k,{constructor:function(a){this.inherited(arguments);this._position_prop=null;var b=a[0];b&&b.properties&&(b=g.parseStyleValues(b.properties.style),this._position_prop=
g.retrieveStyleProperty(b,"position",""))},_create:function(k){var c=k.index,q,n,u=new b,z,A=[],x=new m,w=this._data.map(function(b){var p=new m,B=[];if(!this._loadType(b,B))return p.reject(),p;f(B).then(function(){var f=g.parseStyleValues(b.properties&&b.properties.style);if("absolute"==this._position_prop){var m=parseInt(g.retrieveStyleProperty(f,"left","0px")),f=parseInt(g.retrieveStyleProperty(f,"top","0px"));q?n={x:m+q.x,y:f+q.y}:k.position?(n=k.position,q={x:k.position.x-m,y:k.position.y-f}):
(n={x:m,y:f},q={x:0,y:0})}dojo.withDoc(this._context.getDocument(),function(){var f=function(b){void 0!==c&&0<=c&&c++;A.push(b);if(n){var d=this._context.getPreference("absoluteWidgetsZindex");u.add(new a(b,[{position:"absolute"},{"z-index":d}]));b=new h(b,n.x,n.y,z,null,null,z);z||(z=b);u.add(b)}p.resolve()}.bind(this);b.context=this._context;e.getHelper(b.type,"tool").then(function(a){var e;a&&(e=new a(b));if(e&&e.addPasteCreateCommand)a={parent:k.parent||this._context.getContainerNode(),position:n,
index:c},e.addPasteCreateCommand(u,a).then(function(a){if(!a)return p.reject(),p;f(a)});else{e=g.createWidget(b);if(!e)return p.reject(),p;u.add(new d(e,k.parent||this._context.getContainerNode(),c));this.checkAddToCurrentState(u,e);f(e)}}.bind(this))}.bind(this))}.bind(this));return p}.bind(this));f(w).then(function(){u.isEmpty()||(this._context.getCommandStack().execute(u),setTimeout(function(){A.forEach(function(a,b){this._context.select(a,0<b)}.bind(this))}.bind(this),0));x.resolve()}.bind(this));
return x},createWithFlowLayout:function(){return"absolute"!=this._position_prop}})})},"davinci/ve/tools/CreateTool":function(){define("dojo/_base/declare dojo/dom-style ../tools/_Tool davinci/Workbench davinci/workbench/Preferences ../metadata ../widget dojo/Deferred dojo/promise/all davinci/ve/States davinci/commands/CompoundCommand ../commands/AddCommand ../commands/MoveCommand ../commands/ResizeCommand ../commands/StyleCommand".split(" "),function(n,k,g,e,b,d,h,a,m,f,q,c,p,y,u){return n("davinci.ve.tools.CreateTool",
g,{constructor:function(a,b){this._data=a;this._userData=b;a&&a.type&&(b=d.queryDescriptor(a.type,"resizableOnCreate")||d.queryDescriptor(a.type,"resizable"),"none"!==b&&(this._resizable=b),this._dropCursor=d.queryDescriptor(a.type,"dropCursor"));this._requireHelpers(a)},activate:function(a){(this._context=a)&&a.rootNode&&(this._oldCursor=a.rootNode.style.cursor);a.rootNode.style.cursor="crosshair"},deactivate:function(){this._context&&this._context.rootNode&&(this._context.rootNode.style.cursor=
this._oldCursor);this._setTarget(null);delete this._mdPosition;this._context.dragMoveCleanup()},_getContentPosition:function(a){if(a)return a.target&&(a={x:a.pageX,y:a.pageY}),a},onMouseDown:function(a){this._target=h.getEnclosingWidget(a.target);this._mdPosition=this._getContentPosition(a);this._dragRect=null},onMouseMove:function(a){var c=this._context,d=c._chooseParent;a.target!=this._lastEventTarget&&d.setProposedParentWidget(null);this._lastEventTarget=a.target;if(this._mdPosition){if(this._resizable){c.deselect();
var f=this._getContentPosition(a),g,h,m=!0,k=!0;f.x>=this._mdPosition.x?(d=this._mdPosition.x,h=f.x-this._mdPosition.x):(d=f.x,h=this._mdPosition.x-f.x,m=!1);f.y>=this._mdPosition.y?(g=this._mdPosition.y,f=f.y-this._mdPosition.y):(g=f.y,f=this._mdPosition.y-f.y,k=!1);a.shiftKey&&(h>=f?(f=h,k||(g=this._mdPosition.y-f)):(h=f,m||(d=this._mdPosition.x-h)));this._dragSizeRect||(a=c.getDocument().body,this._dragSizeRect=dojo.create("div",{style:"border:1px dashed black;z-index:1000001;position:absolute;"},
a));a=this._dragSizeRect.style;a.left=d+"px";a.top=g+"px";a.width=h+"px";a.height=f+"px"}}else d=!this.createWithFlowLayout(),this._setTarget(a.target,a),g=c.getPreference("showPossibleParents"),g=!g&&this._spaceKeyDown||g&&!this._spaceKeyDown,h={x:a.pageX,y:a.pageY},f={l:a.pageX,t:a.pageY,w:0,h:0},m=b.getPreferences("davinci.ve.editorPrefs",e.getProject()).snap&&d,k=!d,"object"==typeof this._dropCursor&&!1===this._dropCursor.show&&(k=!1),c.dragMoveUpdate({data:this._data,position:h,absolute:d,currentParent:null,
eventTarget:a.target,rect:f,doSnapLinesX:m,doSnapLinesY:m,doFindParentsXY:g,doCursor:k,beforeAfter:this._dropCursor&&this._dropCursor.beforeAfter})},onMouseUp:function(a){var b=this._context,c=b._chooseParent,f=!this.createWithFlowLayout();this._dragSizeRect&&(this._dragSizeRect.parentNode.removeChild(this._dragSizeRect),this._dragSizeRect=null);var g=b.getActiveDragDiv();g&&(g=dojo.query(".maqCandidateParents",g),1==g.length&&(g[0].innerHTML=""));this._lastEventTarget=null;var m,k,q,p,g=this._getContentPosition(a);
if(this._mdPosition){var n=!0,u=!0;this._position=dojo.mixin({},this._mdPosition);g.x<this._mdPosition.x&&(this._position.x=g.x);"height"==this._resizable?q=0:0<=g.x-this._mdPosition.x?q=g.x-this._mdPosition.x:(q=this._mdPosition.x-g.x,n=!1);g.y<this._mdPosition.y&&(this._position.y=g.y);"width"==this._resizable?p=0:0<=g.y-this._mdPosition.y?p=g.y-this._mdPosition.y:(p=this._mdPosition.y-g.y,u=!1);a.shiftKey&&(q>=p?(p=q,u||(t=this._mdPosition.y-p)):(q=p,n||(l=this._mdPosition.x-q)))}else this._position=
g;this._resizable&&this._position&&(4<q||4<p)&&(m={w:0<q?q:void 0,h:0<p?p:void 0});if(q=c.getProposedParentWidget()){if(k=q.parent,q.refChild){var z=q.parent.getChildren().indexOf(q.refChild);0<=z?q.refAfter&&z++:z=null}}else{a=this._getTarget()||h.getEnclosingWidget(a.target);var y=this._data;q=c.getAllowedTargetWidget(a,y,!0,{absolute:f});var J=dojo.isArray(y)?y[0].type:y.type,K=h.getWidgetHelper(J);1<q.length&&K&&K.chooseParent?k=K.chooseParent(q):0<q.length&&(k=0<=q.indexOf(a)?a:q[0])}c.setProposedParentWidget(null);
c=function(a){this.prototype=Error.prototype;this.name="InvalidTargetWidgetError";this.message=a?a:"The selected target is not a valid parent for the given widget."};try{y=this._data instanceof Array?this._data:[this._data];if(!k){var I=y.map(function(a){return a.type}).join(", "),H=y.map(function(a){var b=d.getAllowedParent(a.type);a=a.type;var c=d.queryDescriptor(a,"class");a=c?c.split(/\s+/).push(a):[a];return{allowedParent:b,classList:a}});m="The selected target is not a valid parent for the given widget.";
1===H.length&&H[0].allowedParent&&(m+=['The widget \x3cspan style\x3d"font-family: monospace"\x3e',I,"\x3c/span\x3e requires ",1<H[0].allowedParent.length?"one of the following parent types":"the parent type",' \x3cspan style\x3d"font-family: monospace"\x3e',H[0].allowedParent.join(", "),"\x3c/span\x3e."].join(""),J=y[0].type,(K=h.getWidgetHelper(J))&&K.isAllowedError&&(m=K.isAllowedError({errorMsg:m,type:J,allowedParent:H[0].allowedParent,absolute:f})));throw new c(m);}for(f=0;f<y.length;f++){var L=
y[f].type,O=d.getLibraryForType(L),Q=O.name,J=[L,b];b._widgets.hasOwnProperty(Q)||(b._widgets[Q]=0);1==++b._widgets[Q]&&d.invokeCallback(O,"onFirstAdd",J);d.invokeCallback(O,"onAdd",J)}this.create({target:k,index:z,directTarget:this._getTarget(),size:m,userData:this._userData})}catch(R){var P,N;R instanceof c?(P=R.message,N="Invalid Target"):(P="The action was interrupted by an internal error.",N="Error",console.error(R));e.showMessage(N,P)}finally{this.exitCreateToolOnMouseUp()&&b.setActiveTool(null),
this._cleanupActions()}},_cleanupActions:function(){var a=this._context;a.dragMoveCleanup();a.inlineEditActive()||this._context.getDocument().defaultView.focus()},onKeyDown:function(a){dojo.stopEvent(a);var b=this._context;if(a.keyCode==dojo.keys.ESCAPE)b.setActiveTool(null),this._cleanupActions();else{var c=this._context.getPreference("showPossibleParents");a.keyCode==dojo.keys.SPACE?this._spaceKeyDown=!0:this._processKeyDown(a.keyCode);a=!c&&this._spaceKeyDown||c&&!this._spaceKeyDown;var c=this._data,
c=dojo.isArray(c)?c[0].type:c.type,b=b._chooseParent,d=!this.createWithFlowLayout(),e=!d;"object"==typeof this._dropCursor&&!1===this._dropCursor.show&&(e=!1);b.dragUpdateCandidateParents({widgetType:c,showCandidateParents:a,absolute:d,doCursor:e,beforeAfter:this._dropCursor&&this._dropCursor.beforeAfter,currentParent:null})}},_processKeyDown:function(a){if(49<=a&&57>=a){var b=this._context._chooseParent,c=b.getProposedParentsList();c&&1<c.length&&(a=c.length-(a-48),0<=a&&b.setProposedParentWidget(c[a]))}},
onKeyUp:function(a){a.keyCode==dojo.keys.SPACE&&(this._spaceKeyDown=!1);dojo.stopEvent(a);a=this._context.getPreference("showPossibleParents");a=!a&&this._spaceKeyDown||a&&!this._spaceKeyDown;var b=this._data,b=dojo.isArray(b)?b[0].type:b.type,c=this._context._chooseParent,d=!this.createWithFlowLayout(),e=!d;"object"==typeof this._dropCursor&&!1===this._dropCursor.show&&(e=!1);c.dragUpdateCandidateParents({widgetType:b,showCandidateParents:a,absolute:d,doCursor:e,beforeAfter:this._dropCursor&&this._dropCursor.beforeAfter,
currentParent:null})},_requireHelpers:function(a){var b=[];if(!a||!a.type)return a instanceof Array&&a.forEach(function(a){b.concat(this._requireHelpers(a))},this),b;b.push(h.requireWidgetHelper(a.type));a.children&&!dojo.isString(a.children)&&dojo.every(a.children,function(a){return b.concat(this._requireHelpers(a))},this);return b},create:function(a){if(a&&this._data){for(var b=a.target,c,d;b&&!(c=b.getContainerNode());)d=b,b=b.getParent();var e=a.index,f;c=!1;this._data.properties&&this._data.properties.style&&
0<this._data.properties.style.indexOf("absolute")&&(c=!0);!c&&this.createWithFlowLayout()?d&&(e=b.indexOf(d)):a.position?f=a.position:this._position&&(f=this._position);this._data.context=this._context;m(this._requireHelpers(this._data)).then(function(){this._create({parent:b,index:e,position:f,size:a.size,userData:this._userData})}.bind(this))}},_create:function(b){var d=this._context,e=[],f=new a;if(!this._loadType(this._data,e))return f.reject(),f;m(e).then(function(){var a;this.createNewWidget()?
dojo.withDoc(this._context.getDocument(),function(){a=h.createWidget(this._data,this._userData,b.parent)},this):a=this._widget;a||f.reject(Error("Failed to create widget"));var e=new q;if(this.createNewWidget()){b.size=this._getInitialSize(a,b);e.add(new c(a,b.parent||this._context.getContainerNode(),b.index));var g=!0;a&&a.properties&&1==a.properties.ignorePosition&&(g=!1);a&&a.metadata&&1==a.metadata.ignorePosition&&(g=!1);b.position&&g&&(g=d.getPreference("absoluteWidgetsZindex"),"xblox/RunScript"!==
a.type&&"xblox/CSSState"!==a.type&&(e.add(new u(a,[{position:"absolute"},{"z-index":g}])),e.add(new p(a,b.position.x,b.position.y))));if(b.size){var m=b.size.w,k=b.size.h;if(null!==m&&null!==k&&(e.add(new y(a,m,k)),(g=h.getWidgetHelper(a.type))&&g.onCreateResize))g.onCreateResize(e,a,m,k)}this.checkAddToCurrentState(e,a)}g=a.id;this.addToCommandStack&&this.addToCommandStack(e,{widget:a});e.isEmpty()||this._context.getCommandStack().execute(e);a.isLayoutContainer&&a.resize();a=h.byId(g);g=h.getWidgetHelper(a.type);
e=null;g&&g.onAdded&&(e=g.onAdded(b.parent,a));this._select(e||a);this._widget=a;f.resolve(a);this.mouseUpProcessingCompleted()}.bind(this));return f},_loadType:function(a,b){if(!a||!a.type)return!1;b.push(this._context.loadRequires(a.type,!0));a.children&&!dojo.isString(a.children)&&dojo.forEach(a.children,function(a){this._loadType(a,b)}.bind(this));return!0},_getInitialSize:function(a,b){var c=b.size,e=a.getHelper();e&&e.initialSize&&(e=e.initialSize(b))&&(c=e);!c&&(a=d.queryDescriptor(a.type,
"initialSize"))&&(b&&!b.position?(b=b.parent,"html.body"==b.type?c="auto"==a||"auto"==a.flow?{w:"100%",h:"auto"}:this._getExplicitFlowSizeFromMetadata(a):this._isTypeContainer(b.type)?"auto"==a||"auto"==a.flow?(b=b.getData().children,c={w:"100%",h:b&&b.length?"auto":"100%"}):c=this._getExplicitFlowSizeFromMetadata(a):c=this._getExplicitFlowSizeFromMetadata(a)):c="auto"==a||"auto"==a.absolute?{w:"300px",h:"300px"}:this._getExplicitAbsoluteSizeFromMetadata(a));return c},_getExplicitFlowSizeFromMetadata:function(a){var b=
null;return b=a.flow?{w:a.flow.width?a.flow.width:"100%",h:a.flow.height?a.flow.height:"auto"}:{w:a.width?a.width:"100%",h:a.height?a.height:"auto"}},_getExplicitAbsoluteSizeFromMetadata:function(a){var b=null;return b=a.absolute?{w:a.absolute.width?a.absolute.width:"300px",h:a.absolute.height?a.absolute.height:"300px"}:{w:a.width?a.width:"300px",h:a.height?a.height:"300px"}},_isTypeContainer:function(a){return a&&("dijit/layout/ContentPane"==a||"html.div"==a||"html.form"==a||"html.fieldset"==a)},
_select:function(a){if(a)if(a.type){var b=d.getSmartInput(a.type);b&&b.then?b.then(function(b){!this._data.fileDragCreate&&b&&b.displayOnCreate?(a.inLineEdit_displayOnCreate=b.displayOnCreate,this._context.select(a,null,!0)):this._context.select(a)}.bind(this)):(console.error("create tool failed::_select smart input is null"),this._context.select(a))}else console.error("create tool failed::_select w.type is null");else console.error("create tool failed::_select w is null")},createWithFlowLayout:function(){return d.queryDescriptor(this._data.type,
"forceAbsolute")?!1:this._context.getFlowLayout()},createNewWidget:function(){return!0},exitCreateToolOnMouseUp:function(){return!0},mouseUpProcessingCompleted:function(){},checkAddToCurrentState:function(a,c){var d=f.getFocus(c._edit_context.rootNode);if(d&&d.stateContainerNode){var d=f.getState(d.stateContainerNode),g=b.getPreferences("davinci.ve.editorPrefs",e.getProject());d&&g.newWidgetsCurrentState&&(g=k.get(c.domNode,"display"),a.add(new u(c,[{display:"none"}])),a.add(new u(c,[{display:g}],
d)))}}})})},"davinci/ve/tools/_Tool":function(){define(["dojo/_base/declare","davinci/ve/widget","davinci/ve/metadata","davinci/ve/utils/GeomUtils"],function(n,k,g,e){return n("davinci.ve.tools._Tool",null,{_getTarget:function(){return this._target},_setTarget:function(b,d){this._targetOverlays||(this._targetOverlays=[]);if(!this._matchesTargetOverlay(b)){for(var e=this._context.getContainerNode(),a;b&&b!=e;)if((a=k.getEnclosingWidget(b))&&!a.getContext())b=a.domNode.parentNode,a=null;else{a&&davinci.ve.metadata.queryDescriptor(a.type,
"enablePointerEvents")?a=null:a&&a.getContainerNode()&&(davinci.ve.metadata.queryDescriptor(a.type,"isControl")||(a=null));break}a?(this._target=a,this._updateTargetOverlays(d),this._insertTargetOverlays()):(this._removeTargetOverlays(),this._target=null)}},_updateTargetOverlays:function(b){this._removeTargetOverlays();if(this._target){var d=this._target.domNode,g=this._getMaxZIndex(d);if(this._targetOverlays){var a=this._target.getHelper();if(a&&a.getTargetOverlays&&(a=a.getTargetOverlays(this._target))&&
0<a.length){dojo.forEach(a,function(a){a=this._getNewTargetOverlay(a,a.x,a.y,a.width,a.height,g);this._targetOverlays.push(a)},this);return}var a=d.offsetLeft,m=d.offsetTop,f=d.offsetWidth,k=d.offsetHeight;if(b){var c,p=e.getBorderBoxPageCoordsCached(d);b.pageX<p.l&&(c=p.l-b.pageX,a-=c,f+=c);b.pageY<p.t&&(c=p.t-b.pageY,m-=c,k+=c);b.pageX>p.l+p.w&&(c=b.pageX-(p.l+p.w),f+=c);b.pageY>p.t+p.h&&(c=b.pageY-(p.t+p.h),k+=c)}b=this._getNewTargetOverlay(d,a,m,f,k,g);this._targetOverlays.push(b)}}},_getMaxZIndex:function(b){var d=
dojo.style(b,"zIndex");dojo.query("*",b).forEach(function(b){b=dojo.style(b,"zIndex");var a=Number(b),e=Number(d);isNaN(a)||(isNaN(e)?d=b:a>e&&(d=b))});return d},_getNewTargetOverlay:function(b,d,e,a,g,f){return this._context.getDojo().create("div",{className:"editFeedback",style:{position:"absolute",opacity:.1,left:d+"px",top:e+"px",width:a+"px",height:g+"px",zIndex:f}})},_insertTargetOverlays:function(){if(this._targetOverlays&&this._target){var b=this._target.domNode,d=b.parentNode;dojo.forEach(this._targetOverlays,
function(e){d.insertBefore(e,b.nextSibling)},this)}},_removeTargetOverlays:function(){if(this._targetOverlays&&this._target)for(var b=this._targetOverlays.length-1;0<=b;b--)dojo.destroy(this._targetOverlays[b]),this._targetOverlays.pop()},_matchesTargetOverlay:function(b){return dojo.some(this._targetOverlays,function(d){return b==d},this)}})})},"davinci/ve/commands/AddCommand":function(){define("dojo/_base/declare davinci/ve/commands/_hierarchyCommand davinci/ve/widget davinci/ve/utils/ImageUtils davinci/ve/States davinci/ve/commands/ModifyCommand".split(" "),
function(n,k,g,e,b,d){return n("davinci.ve.commands.AddCommand",[k],{name:"add",constructor:function(b,a,d){b&&(b.domNode?this._id=b.id:this._data=b);this._parentId=a.id;this._index=d},execute:function(){var h=g.byId(this._parentId);if(h){var a=h.getContext(),m=void 0;this._data?(this._id&&this._data.properties&&(this._data.properties.id=this._id),m=g.createWidget(this._data),this._id=m.id):this._id&&(m=g.byId(this._id,a));if(m){this._data=m.getData();this._data.properties.id=this._id;this._data.context=
a;if(this._index&&"number"!=typeof this._index)if(this._index.domNode)this._index=h.indexOf(this._index);else{var f=g.byId(this._index.id,a);this._index=h.indexOf(f)}"IMG"===m.domNode.tagName&&e.ImageUpdateFocus(m,a);h.addChild(m,this._index);a&&(a.attach(m),m.startup(),m.renderWidget(),a.widgetAddedOrDeleted(),a.widgetChanged(a.WIDGET_ADDED,m));(a=this._isRefreshOnDescendantChange(m))&&(new d(a,null,null,h._edit_context)).execute();b.resetState(m.domNode)}}},undo:function(){if(this._id&&this._parentId){var e=
g.byId(this._id);if(e){var a=g.byId(this._parentId);if(a){var m=this._isRefreshOnDescendantChange(e),f=e.getContext();f&&(f.detach(e),f.deselect(e));a.removeChild(e);f.widgetChanged(f.WIDGET_REMOVED,e);e.destroyWidget();f&&f.widgetAddedOrDeleted();m&&(new d(m,null,null,a._edit_context)).execute();b.resetState(e.domNode)}}}}})})},"davinci/ve/commands/MoveCommand":function(){define("dojo/_base/declare dojo/dom-geometry davinci/ve/widget davinci/ve/States davinci/ve/utils/StyleArray davinci/ve/utils/GeomUtils".split(" "),
function(n,k,g,e,b,d){return n("davinci.ve.commands.MoveCommand",null,{name:"move",constructor:function(b,a,d,e,g,c,k){this._id=b?b.id:void 0;this._context=b.getContext();this._newBox={l:a,t:d};this._commandForXYDeltas=e;this._oldBox=g;this._applyToStateIndex=c&&"Normal"!=c&&"undefined"!=c?c:"undefined";this._disableSnapping=k},execute:function(){if(this._id){var h=g.byId(this._id);if(h&&h.domNode){var a=this._context;if(!this._oldBox){var m=h.getMarginBox();this._oldBox={l:m.l,t:m.t,w:m.w,h:m.h}}if(!h.domNode.offsetParent)console.error("maeh");
else if(dojo.position(h.domNode.offsetParent,!0)){this._commandForXYDeltas?(this._newBox.l=this._oldBox.l+this._commandForXYDeltas._deltaX,this._newBox.t=this._oldBox.t+this._commandForXYDeltas._deltaY):(!this._disableSnapping&&a&&a._snapX&&(m=this._oldBox.w,"left"==a._snapX.typeRefObj?this._newBox.l=a._snapX.x:m&&"right"==a._snapX.typeRefObj?this._newBox.l=a._snapX.x-m:m&&"center"==a._snapX.typeRefObj&&(this._newBox.l=a._snapX.x-m/2)),!this._disableSnapping&&a&&a._snapY&&(m=this._oldBox.h,"top"==
a._snapY.typeRefObj?this._newBox.t=a._snapY.y:m&&"bottom"==a._snapY.typeRefObj?this._newBox.t=a._snapY.y-m:m&&"middle"==a._snapY.typeRefObj&&(this._newBox.t=a._snapY.y-m/2)));this._deltaX=this._newBox.l-this._oldBox.l;this._deltaY=this._newBox.t-this._oldBox.t;var m=d.getBorderBoxPageCoords(h.domNode.offsetParent),f=k.getBorderExtents(h.domNode.offsetParent),q=this._newBox.l-m.l-f.l,c=this._newBox.t-m.t-f.t;a.getScrollOffset();q=[{left:q+"px"},{top:c+"px"}];a=h.getStyleValuesAllStates();this._oldStyleValuesAllStates=
dojo.clone(a);this._oldBox&&(this._oldStyleValuesAllStates[this._applyToStateIndex]=b.mergeStyleArrays(this._oldStyleValuesAllStates[this._applyToStateIndex],[{left:this._oldBox.l-m.l-f.l+"px"},{top:this._oldBox.t-m.t-f.t+"px"}]));a[this._applyToStateIndex]=a[this._applyToStateIndex]?b.mergeStyleArrays(a[this._applyToStateIndex],q):q;h.setStyleValuesAllStates(a);m=e.getStatesListCurrent(h.domNode);f=b.mergeStyleArrays([],a.undefined);for(q=0;q<m.length;q++)a[m[q]]&&(f=b.mergeStyleArrays(f,a[m[q]]));
h.setStyleValuesCanvas(f);h.setStyleValuesModel(a.undefined);h.refresh();e.resetState(h.domNode);dojo.publish("/davinci/ui/widgetPropertiesChanged",[[h]])}}else console.error("no widget")}},undo:function(){if(this._id){var d=g.byId(this._id);if(d){var a=this._oldStyleValuesAllStates,e=this._applyToStateIndex;d.setStyleValuesAllStates(a);a=b.mergeStyleArrays(a.undefined,a[e]);d.setStyleValuesCanvas(a);d.setStyleValuesModel(this._oldStyleValuesAllStates.undefined);d.refresh();davinci.ve.states.resetState(d.domNode);
dojo.publish("/davinci/ui/widgetPropertiesChanged",[[d]])}}}})})},"davinci/ve/commands/ResizeCommand":function(){define(["dojo/_base/declare","dojo/dom-geometry","davinci/ve/widget","davinci/ve/States","davinci/ve/utils/StyleArray"],function(n,k,g,e,b){return n("davinci.ve.commands.ResizeCommand",null,{name:"resize",constructor:function(b,e,a,g){this._id=b?b.id:void 0;b=/^\s*[-+]?[0-9]*\.?[0-9]+\s*$/;b.test(e)&&(e=parseFloat(e));b.test(a)&&(a=parseFloat(a));this._newBox={w:e,h:a};this._applyToStateIndex=
g&&"Normal"!=g&&"undefined"!=g?g:"undefined"},execute:function(){if(this._id&&this._newBox){var d=g.byId(this._id);if(d&&d.domNode){var h=d.domNode,a=h.ownerDocument.defaultView.getComputedStyle(h),m=k.getContentBox(h,a);this._oldBox={w:m.w,h:m.h};var m=this._newBox.w,f=this._newBox.h;this._usesBorderBox(h)&&(h=k.getPadBorderExtents(h,a),"number"==typeof m&&0<=m&&(m+=h.w),"number"==typeof f&&0<=f&&(f+=h.h));h=[{}];"number"==typeof m?h[0].width=m+"px":"string"==typeof m&&(h[0].width=m);"number"==typeof f?
h[0].height=f+"px":"string"==typeof f&&(h[0].height=f);m=d.getStyleValuesAllStates();this._oldStyleValuesAllStates=dojo.clone(m);this._oldBox&&(this._oldStyleValuesAllStates[this._applyToStateIndex]=b.mergeStyleArrays(this._oldStyleValuesAllStates[this._applyToStateIndex],[{width:this._oldBox.w+"px"},{height:this._oldBox.h+"px"}]));m[this._applyToStateIndex]=m[this._applyToStateIndex]?b.mergeStyleArrays(m[this._applyToStateIndex],h):h;d.setStyleValuesAllStates(m);f=e.getStatesListCurrent(d.domNode);
h=b.mergeStyleArrays([],m.undefined);for(a=0;a<f.length;a++)m[f[a]]&&(h=b.mergeStyleArrays(h,m[f[a]]));d.setStyleValuesCanvas(h);d.setStyleValuesModel(m.undefined);this._resize(d);e.resetState(d.domNode);dojo.publish("/davinci/ui/widgetPropertiesChanged",[[d]])}}},setContext:function(b){this._context=b},undo:function(){if(this._id){var d=g.byId(this._id);if(d){var h=this._oldStyleValuesAllStates,a=this._applyToStateIndex;d.setStyleValuesAllStates(h);h=b.mergeStyleArrays(h.undefined,h[a]);d.setStyleValuesCanvas(h);
d.setStyleValuesModel(this._oldStyleValuesAllStates.undefined);this._resize(d);e.resetState(d.domNode);dojo.publish("/davinci/ui/widgetPropertiesChanged",[[d]])}}},_usesBorderBox:function(b){var d=b.tagName.toLowerCase();(b=b.getAttribute("type"))&&(b=b.toLowerCase(b));return"table"==d||"button"==d||"input"==d&&"button"==b},_resize:function(b){var d=b.getParent();d&&d.dijitWidget&&d.dijitWidget.isLayoutContainer?d.resize():b.resize&&b.resize();b.renderWidget();b._updateSrcStyle()}})})},"davinci/ve/actions/DuplicateAction":function(){define("dojo/_base/declare dojo/dom-style davinci/ve/actions/ContextAction davinci/commands/CompoundCommand davinci/ve/commands/AddCommand davinci/ve/commands/MoveCommand davinci/ve/tools/CreateTool davinci/ve/widget davinci/ve/utils/GeomUtils".split(" "),
function(n,k,g,e,b,d,h,a,m){return n("davinci.ve.actions.DuplicateAction",[g],{run:function(f){if((f=this.fixupContext(f))&&"davinci.ve.Context"===f.declaredClass&&"davinci/delite/Context"===f.declaredClass){var g=this._normalizeSelection(f);if(this.selectionSameParent(g)){var c=[];if(0<g.length){var p=new e;dojo.forEach(g,function(e){var g,q=e.getData({identify:!1});q&&(q.context=f,dojo.withDoc(f.getDocument(),function(){g=a.createWidget(q)},this),g&&(p.add(new b(g,e.getParent(),void 0)),h.prototype.checkAddToCurrentState(p,
g),c.push(g),"absolute"==(e&&e.domNode?k.get(e.domNode,"position"):null)&&(e=m.getMarginBoxPageCoords(e.domNode),e.l+=25,p.add(new d(g,e.l,e.t,void 0,void 0,void 0,!0)))))});f.getCommandStack().execute(p);dojo.forEach(c,function(a,b){f.select(a,0<b)},this)}}}},isEnabled:function(a){a=(a=this.fixupContext(a))&&a.getSelection?a.getSelection():[];return 0===a.length?!1:this.selectionSameParent(a)},shouldShow:function(a){return(a=(a=this.fixupContext(a))?a.editor:null)&&"davinci.ve.PageEditor"==a.declaredClass},
selectionSameParent:function(a){if(0===a.length)return!1;for(var b=a[0].getParent(),c=0;c<a.length;c++)if(a[c].getParent()!=b)return!1;return!0}})})},"davinci/ve/actions/EditValueAction":function(){define(["dojo/_base/declare","davinci/ve/actions/ContextAction"],function(n,k){return n("davinci.ve.actions.EditValueAction",[k],{run:function(g){if((g=this.fixupContext(g))&&"davinci.ve.Context"===g.declaredClass&&"davinci/delite/Context"===g.declaredClass){var e=g.getSelection();1===e.length&&g.select(e[0],
!1,!0)}},isEnabled:function(g){return(g=this.fixupContext(g))&&0<g.getSelection().length},shouldShow:function(g){return(g=(g=this.fixupContext(g))?g.editor:null)&&"davinci.ve.PageEditor"==g.declaredClass}})})},"davinci/ve/actions/EditPropertiesAction":function(){define(["dojo/_base/declare","davinci/ve/actions/ContextAction"],function(n,k){return n("davinci.ve.actions.EditPropertiesAction",[k],{run:function(g){(g=this.fixupContext(g))&&g.editor&&g.editor.editorContainer&&g.editor.editorContainer.hideShowProperties&&
g.editor.editorContainer.hideShowProperties()},isEnabled:function(g){g=this.fixupContext(g);return!0}})})},"davinci/ve/actions/SurroundAction":function(){define("dojo/_base/declare dojo/_base/array dojo/dom-style davinci/ve/actions/ContextAction davinci/commands/CompoundCommand davinci/ve/commands/AddCommand davinci/ve/commands/StyleCommand davinci/ve/commands/MoveCommand davinci/ve/commands/ResizeCommand davinci/ve/commands/ReparentCommand davinci/ve/tools/CreateTool davinci/ve/widget davinci/ve/utils/GeomUtils".split(" "),
function(n,k,g,e,b,d,h,a,m,f,q,c,p){return n("davinci.ve.actions.SurroundAction",[e],{run:function(e){e=this.fixupContext(e);var n,y,A,x,w=[],r,v=this.item.surroundWithTagName;if(v){dojo.withDoc(e.getDocument(),function(){r=c.createWidget({type:"html."+v,properties:{},children:[],context:e})});var B=new b,C=[].concat(e.getSelection()),F=C[0],E=F.getParent();p.getMarginBoxPageCoords(E.domNode);C.sort(function(a,b){return E.indexOf(a)-E.indexOf(b)});var D=e.getDocument(),G=D.defaultView&&D.defaultView.dojo;
G.style||(G.style=g);(D=k.every(C,function(a){if(G)return position_prop=G.style(a.domNode,"position"),"absolute"==position_prop}))&&k.forEach(C,function(b,c){w.push(p.getMarginBoxPageCoordsCached(b.domNode));B.add(new a(b,w[c].l,w[c].t,null,w[c]))});B.add(new d(r,E,E.indexOf(F)));q.prototype.checkAddToCurrentState(B,r);D&&(B.add(new h(r,[{position:"absolute"}])),k.forEach(C,function(a,b){a=w[b].l+w[b].w;var c=w[b].t+w[b].h;if(0==b||w[b].l<n)n=w[b].l;if(0==b||w[b].t<y)y=w[b].t;if(0==b||a>A)A=a;if(0==
b||c>x)x=c}),B.add(new a(r,n,y)),B.add(new m(r,A-n,x-y)));k.forEach(C,function(a){B.add(new f(a,r,"last"))});D&&k.forEach(C,function(b,c){B.add(new a(b,w[c].l,w[c].t,null,w[c]))});e.getCommandStack().execute(B);e.select(r)}else console.error("missing surroundWithTagName")},isEnabled:function(a){if((a=this.fixupContext(a))&&a.getSelection().length){var b=a.getSelection()[0].getParent(),c=[];if(!b||!b.length)return!1;if(k.every(a.getSelection(),function(a){var d=a.getParent();if(!d)return!1;c.push(b.indexOf(a));
return b.id==d.id})){c.sort();var d;for(a=c.shift();c.length;a=d)if(d=c.shift(),d!=a+1)return!1;return!0}}return!1}})})},"davinci/ve/commands/ReparentCommand":function(){define(["dojo/_base/declare","davinci/ve/commands/_hierarchyCommand","../widget","../States","davinci/ve/commands/ModifyCommand"],function(n,k,g,e,b){return n("davinci.ve.commands.ReparentCommand",[k],{name:"reparent",constructor:function(b,e,a){this._id=b?b.id:void 0;this._newParentId=e?e.id:"myapp";this._newIndex=a},execute:function(){if(this._id&&
this._newParentId){var d=g.byId(this._id);if(d){var h=d.getParent();h||(h=dojo.byId("myapp"));var a=g.byId(this._newParentId);a||(a=dojo.byId("myapp"));var m=this._isRefreshOnDescendantChange(d);this._oldParentId||(this._oldParentId=h.id,this._oldIndex=dojo.indexOf(h.getChildren(),d),this._newIndex&&this._newIndex.domNode&&(this._newIndex=a.indexOf(this._newIndex)));h.removeChild(d);var f=a.getContext();a.addChild(d,a==h&&this._oldIndex<this._newIndex?this._newIndex-1:this._newIndex);if(f){var k=
d.getHelper();k&&k.reparent&&k.reparent(d);d.startup();d.renderWidget();f.widgetChanged(f.WIDGET_REPARENTED,d,[h,a]);h=this._isRefreshOnDescendantChange(d);m&&(m=new b(m,null,null,f),m.execute());h&&(m=new b(h,null,null,f),m.execute())}e.resetState(d.domNode)}}},undo:function(){if(this._id&&this._oldParentId&&this._newParentId){var d=g.byId(this._id);if(d){var h=g.byId(this._oldParentId);if(h){var a=g.byId(this._newParentId);if(a){var m=this._isRefreshOnDescendantChange(d),f=h.getContext();a.removeChild(d);
h.addChild(d,this._oldIndex);if(f){var k=d.getHelper();k&&k.reparent&&k.reparent(d);d.startup();d.renderWidget();f.widgetChanged(f.WIDGET_REPARENTED,d,[h,a]);h=this._isRefreshOnDescendantChange(d);m&&(m=new b(m,null,null,f),m.execute());h&&(m=new b(h,null,null,f),m.execute())}e.resetState(d.domNode)}}}}}})})},"davinci/ve/actions/SelectParentAction":function(){define(["dojo/_base/declare","davinci/ve/actions/_SelectAncestorAction"],function(n,k){return n("davinci.ve.actions.SelectParentAction",[k],
{run:function(g){var e=(g=this.fixupContext(g))&&g.getSelection();this.selectionSameParentNotBody(e)&&g.select(e[0].getParent())},isEnabled:function(g){g=(g=this.fixupContext(g))&&g.getSelection();return this.selectionSameParentNotBody(g)}})})},"davinci/ve/actions/_SelectAncestorAction":function(){define(["dojo/_base/declare","davinci/ve/actions/ContextAction"],function(n,k){return n("davinci.ve.actions._SelectAncestorAction",[k],{shouldShow:function(g){return(g=this.fixupContext(g))&&g.editor&&"davinci.ve.HTMLPageEditor"==
g.editor.editorID},selectionSameParentNotBody:function(g){if(!g||0===g.length)return!1;var e=g[0].getParent();if(!e||!e.domNode)return!1;for(var b=0;b<g.length;b++)if(g[b].getParent()!=e)return!1;return!0}})})},"davinci/ve/actions/SelectAncestorAction":function(){define("dojo/_base/declare davinci/ve/actions/_SelectAncestorAction davinci/Workbench davinci/lang/ve xide/views/_CIPanelDialog xide/utils xide/types xide/lodash".split(" "),function(n,k,g,e,b,d,h,a){return n("davinci.ve.actions.SelectAncestorAction",
[k],{run:function(e){var f=(e=this.fixupContext(e))&&e.getSelection();if(this.selectionSameParentNotBody(f)){for(var g=[],f=f[0].getParent();"BODY"!=f.domNode.tagName;)g.push(f),f=f.getParent();"BODY"===f.domNode.tagName&&g.push(f);for(var c=[],f=0;f<g.length;f++){var m=require("davinci/ve/widget").getLabel(g[f]);c.push({value:a.unescape(m),label:m,widget:g[f]})}var k=[d.createCI("New Parent",h.ECIType.ENUMERATION,"",{options:c})];(new b({title:"Select new parent",resizeable:!0,onOk:function(b){b=
a.find(c,{value:k[0].value});e.select(b.widget)},cis:k})).show()}},isEnabled:function(a){a=(a=this.fixupContext(a))&&a.getSelection();return this.selectionSameParentNotBody(a)}})})},"davinci/ve/actions/UnselectAllAction":function(){define(["dojo/_base/declare","davinci/ve/actions/ContextAction"],function(n,k){return n("davinci.ve.actions.SelectParentAction",[k],{run:function(g){g=this.fixupContext(g);0<(g&&g.getSelection()).length&&g.deselect()},isEnabled:function(g){return(g=(g=this.fixupContext(g))&&
g.getSelection())&&0<g.length}})})},"davinci/ve/actions/ArrangeAction":function(){define(["dojo/_base/declare","./_ReorderAction","davinci/commands/CompoundCommand","davinci/ve/commands/ReparentCommand"],function(n,k,g,e){return n("davinci.ve.actions.ArrangeAction",[k],{run:function(b){},isEnabled:function(b){return!0},shouldShow:function(b){return(b=(b=this.fixupContext(b))?b.editor:null)&&"davinci.ve.PageEditor"==b.declaredClass}})})},"davinci/ve/actions/_ReorderAction":function(){define(["dojo/_base/declare",
"dojo/_base/array","dojo/dom-style","davinci/ve/actions/ContextAction"],function(n,k,g,e){return n("davinci.ve.actions._ReorderAction",[e],{shouldShow:function(b){return(b=this.fixupContext(b))&&b.editor&&"davinci.ve.HTMLPageEditor"==b.editor.editorID},selectionSameParentAllAbsolute:function(b){if(0===b.length)return!1;var d=b[0].getParent();if(!d)return!1;for(var e=0;e<b.length;e++){var a=b[e];if(a.getParent()!=d||"absolute"!=(a&&a.domNode?g.get(a.domNode,"position"):null))return!1}return!0},selectionSameParentAllAbsoluteAdjacent:function(b){if(!b||
0===b.length||!this.selectionSameParentAllAbsolute(b))return!1;var d=b[0].getParent();if(!d||!d.length)return!1;for(var d=d.getChildren(),e=Number.MAX_VALUE,a=Number.MIN_VALUE,g=0;g<d.length;g++)0<=b.indexOf(d[g])&&(e=g<e?g:e,a=g>a?g:a);return a-e+1===b.length},getAbsoluteSiblings:function(b){b=b&&b.getParent&&b.getParent();return b?(b=b.getChildren&&b.getChildren())?k.filter(b,function(b){return"absolute"==(b&&b.domNode?g.get(b.domNode,"position"):null)}):[]:[]}})})},"davinci/ve/actions/MoveToFrontAction":function(){define(["dojo/_base/declare",
"./_ReorderAction","davinci/commands/CompoundCommand","davinci/ve/commands/ReparentCommand"],function(n,k,g,e){return n("davinci.ve.actions.MoveToFrontAction",[k],{name:"MoveToFront",iconClass:"editActionIcon editMoveToFrontIcon",run:function(b){if(b=this.fixupContext(b)){var d=b&&b.getSelection?b.getSelection():[];if(0!==d.length&&this.selectionSameParentAllAbsolute(d)){for(var h=d[0].getParent(),a=this.getAbsoluteSiblings(d[0]),m=new g,f=0;f<a.length;f++){var k=a[f];0<=d.indexOf(k)&&m.add(new e(k,
h,null))}b.getCommandStack().execute(m)}}},isEnabled:function(b){b=(b=this.fixupContext(b))&&b.getSelection?b.getSelection():[];if(0===b.length||!this.selectionSameParentAllAbsolute(b))return!1;for(var d=this.getAbsoluteSiblings(b[0]),e=0;e<b.length;e++)if(d.indexOf(b[e])<d.length-b.length)return!0;return!1}})})},"davinci/ve/actions/MoveToBackAction":function(){define(["dojo/_base/declare","./_ReorderAction","davinci/commands/CompoundCommand","davinci/ve/commands/ReparentCommand"],function(n,k,g,
e){return n("davinci.ve.actions.MoveToBackAction",[k],{name:"MoveToBack",iconClass:"editActionIcon editMoveToBackIcon",run:function(b){if(b=this.fixupContext(b)){var d=b&&b.getSelection?b.getSelection():[];if(0!==d.length&&this.selectionSameParentAllAbsolute(d)){for(var h=d[0].getParent(),a=this.getAbsoluteSiblings(d[0]),m=new g,f=a.length-1;0<=f;f--){var k=a[f];0<=d.indexOf(k)&&m.add(new e(k,h,0))}b.getCommandStack().execute(m)}}},isEnabled:function(b){b=(b=this.fixupContext(b))&&b.getSelection?
b.getSelection():[];if(0===b.length||!this.selectionSameParentAllAbsolute(b))return!1;for(var d=this.getAbsoluteSiblings(b[0]),e=0;e<b.length;e++)if(d.indexOf(b[e])>b.length-1)return!0;return!1}})})},"davinci/ve/actions/MoveForwardAction":function(){define(["dojo/_base/declare","./_ReorderAction","davinci/commands/CompoundCommand","davinci/ve/commands/ReparentCommand"],function(n,k,g,e){return n("davinci.ve.actions.MoveForwardAction",[k],{name:"MoveForward",iconClass:"editActionIcon editMoveForwardIcon",
run:function(b){if(b=this.fixupContext(b)){var d=b&&b.getSelection?b.getSelection():[];if(0!==d.length&&this.selectionSameParentAllAbsoluteAdjacent(d)){for(var h,a=d[0].getParent(),m=a.getChildren(),f=this.getAbsoluteSiblings(d[0]),k=new g,c=d.slice(0),p=0;p<f.length;p++){h=f[p];var n=c.indexOf(h);if(0<=n)c.splice(n,1);else if(0===c.length)break}m=m.indexOf(h)+1;for(c=0;c<f.length;c++)h=f[c],0<=d.indexOf(h)&&k.add(new e(h,a,m));b.getCommandStack().execute(k)}}},isEnabled:function(b){b=(b=this.fixupContext(b))&&
b.getSelection?b.getSelection():[];if(0===b.length||!this.selectionSameParentAllAbsoluteAdjacent(b))return!1;for(var d=this.getAbsoluteSiblings(b[0]),e=0;e<b.length;e++)if(d.indexOf(b[e])<d.length-b.length)return!0;return!1}})})},"davinci/ve/actions/MoveBackwardAction":function(){define(["dojo/_base/declare","./_ReorderAction","davinci/commands/CompoundCommand","davinci/ve/commands/ReparentCommand"],function(n,k,g,e){return n("davinci.ve.actions.MoveBackwardAction",[k],{name:"MoveBackward",iconClass:"editActionIcon editMoveBackwardIcon",
run:function(b){if(b=this.fixupContext(b)){var d=b&&b.getSelection?b.getSelection():[];if(0!==d.length&&this.selectionSameParentAllAbsoluteAdjacent(d)){for(var h,a=d[0].getParent(),k=a.getChildren(),f=this.getAbsoluteSiblings(d[0]),q=new g,c=d.slice(0),p=f.length-1;0<=p;p--){h=f[p];var n=c.indexOf(h);if(0<=n)c.splice(n,1);else if(0===c.length)break}k=k.indexOf(h);for(c=f.length-1;0<=c;c--)h=f[c],0<=d.indexOf(h)&&q.add(new e(h,a,k));b.getCommandStack().execute(q)}}},isEnabled:function(b){b=(b=this.fixupContext(b))&&
b.getSelection?b.getSelection():[];if(0===b.length||!this.selectionSameParentAllAbsoluteAdjacent(b))return!1;for(var d=this.getAbsoluteSiblings(b[0]),e=0;e<b.length;e++)if(d.indexOf(b[e])>b.length-1)return!0;return!1}})})},"davinci/ve/actions/OtherAction":function(){define(["dojo/_base/declare","./_ReorderAction","davinci/commands/CompoundCommand","davinci/ve/commands/ReparentCommand"],function(n,k,g,e){return n("davinci.ve.actions.OtherAction",[k],{run:function(b){},isEnabled:function(b){return!0},
shouldShow:function(b){return(b=(b=this.fixupContext(b))?b.editor:null)&&"davinci.ve.PageEditor"==b.declaredClass}})})},"davinci/ve/actions/AddState":function(){define("dojo/_base/declare davinci/Runtime davinci/Workbench davinci/workbench/Preferences davinci/ve/States davinci/actions/Action davinci/lang/ve davinci/ve/actions/_AddManageStatesWidget".split(" "),function(n,k,g,e,b,d,h,a){return n("davinci.ve.actions.AddState",[d],{run:function(){var a;k.currentEditor&&k.currentEditor.currentEditor&&
k.currentEditor.currentEditor.context&&(a=k.currentEditor.currentEditor.context,(a=b.getFocus(a.rootNode))&&a.stateContainerNode&&(a=new davinci.ve.actions._AddManageStatesWidget({node:a.stateContainerNode}),a._calledBy="AddState",g.showModal(a,h.createNewState,null,null,!0),a.okButton.set("disabled",!0)))}})})},"davinci/ve/actions/_AddManageStatesWidget":function(){define("dojo/_base/declare dojo/dom-style dojo/_base/event dijit/_WidgetBase dijit/_TemplatedMixin dijit/_WidgetsInTemplateMixin davinci/Runtime davinci/Workbench davinci/workbench/Preferences davinci/ve/States davinci/commands/CompoundCommand davinci/ve/commands/StyleCommand davinci/ve/commands/AppStateCommand davinci/actions/Action davinci/lang/ve dijit/lang/_common dojo/text!./templates/AddState.html dijit/form/TextBox dijit/form/Select dijit/form/CheckBox dijit/form/Button".split(" "),
function(n,k,g,e,b,d,h,a,m,f,q,c,p,y,u,z,A,x,w,r,v){return n("davinci.ve.actions._AddManageStatesWidget",[e,b,d],{templateString:A,widgetsInTemplate:!0,veNls:u,commonNls:z,_isValid:function(){var a=this.domNode.querySelector(".addStateNameDiv");if(a&&"none"==k.get(a,"display"))return!0;a=this.input.get("value");return a?davinci.ve.states.hasState(this.node,a)?(alert(dojo.string.substitute(u.stateNameExists,{name:a})),!1):!0:!1},_onKeyPress:function(a){a.keyCode!=dojo.keys.ENTER&&(this._isValid()?
this.okButton.set("disabled",!1):this.okButton.set("disabled",!0))},onOk:function(){var a;if(h.currentEditor&&h.currentEditor.currentEditor&&h.currentEditor.currentEditor.context){if(a=h.currentEditor.currentEditor.context,(a=f.getFocus(a.rootNode))&&a.stateContainerNode){f.getState(a.stateContainerNode);var b=this.input.get("value");if(b)if(h.currentEditor&&h.currentEditor.currentEditor&&h.currentEditor.currentEditor.context){a=h.currentEditor.currentEditor.context;var c=new q;b&&c.add(new p({action:"add",
state:b,stateContainerNode:this.node,context:a}));a.getCommandStack().execute(c)}else console.error("AddState.js - cannot determine context.")}}else console.error("_AddManageStatesWidget.js (from "+this._calledBy+" - cannot determine context.")},onCancel:function(){this.onClose()}})})},"davinci/ve/actions/RemoveState":function(){define("dojo/_base/declare davinci/Runtime davinci/ve/States davinci/actions/Action davinci/commands/CompoundCommand davinci/ve/commands/AppStateCommand".split(" "),function(n,
k,g,e,b,d){return n("davinci.ve.actions.RemoveState",[e],{run:function(){var e;if(k.currentEditor&&k.currentEditor.currentEditor&&k.currentEditor.currentEditor.context){e=k.currentEditor.currentEditor.context;var a=g.getFocus(e.rootNode);if(a&&a.state&&a.state!==g.NORMAL){var a=a.stateContainerNode,m=davinci.ve.states.getState(a);if(m){var f=new b;f.add(new d({action:"remove",state:m,stateContainerNode:a,context:e}));e.getCommandStack().execute(f)}}}}})})},"davinci/ve/actions/ModifyState":function(){define("dojo/_base/declare dojo/Deferred dojo/_base/connect dijit/_WidgetBase dijit/_TemplatedMixin dijit/_WidgetsInTemplateMixin dijit/popup dijit/focus davinci/ve/States davinci/ui/Dialog davinci/Runtime davinci/Workbench davinci/actions/Action davinci/lang/ve dijit/lang/_common dojo/text!./templates/ModifyState.html dijit/form/TextBox dijit/form/ValidationTextBox davinci/commands/CompoundCommand davinci/ve/commands/AppStateCommand".split(" "),
function(n,k,g,e,b,d,h,a,m,f,q,c,p,y,u,z,A,x,w,r){var v=null;n("davinci.ve.actions.ModifyStateWidget",[e,b,d],{templateString:z,widgetsInTemplate:!0,veNls:y,commonNls:u,isNormalState:!1,newName:null,oldInitialStateOn:null,postCreate:function(){this._connections=[];dijit.byId("state_rename_tooltip_dialog");v.then(function(){this._statesFocus.state&&this._statesFocus.state!==m.NORMAL||(this.isNormalState=!0);var a=dojo.byId("modify_state_old_name");a&&(this._statesFocus&&this._statesFocus.state&&!this.isNormalState?
a.innerHTML=this._statesFocus.state:(a.innerHTML="\x3ci\x3e"+m.NORMAL+"\x3c/i\x3e",this.renameButton.set("disabled",!0)));this.oldInitialStateOn=a=m.getInitial(this._statesFocus.stateContainerNode)===this._statesFocus.state;this.initialState.set("checked",a);a&&this.isNormalState&&this.initialState.set("disabled",!0);this._dialog.connect(this._dialog,"hide",function(a){this.onClose()}.bind(this));this.okButton.connect(this.okButton,"onClick",dojo.hitch(this,function(a){this.onOk(a)}));this.cancelButton.connect(this.cancelButton,
"onClick",dojo.hitch(this,function(a){this.onCancel(a)}));if(a=dijit.byId("state_rename_tooltip_dialog"))a.connect(a,"onShow",function(a){this.renameStateShowTooltipDialog(a)}.bind(this)),a.connect(a,"onHide",function(a){this.renameStateHideTooltipDialog(a)}.bind(this))}.bind(this))},renameStateShowTooltipDialog:function(b){b=dojo.byId("modify_state_old_name");var c=dojo.byId("state_rename_new_name"),d=dijit.byId("state_rename_new_name");b&&d&&d.set("value",b.innerText);a.focus(c);b=dijit.byId("state_rename_do_it");
c=dijit.byId("state_rename_cancel");b.connect(b,"onMouseDown",function(a){a.stopPropagation()});c.connect(b,"onMouseDown",function(a){a.stopPropagation()});b.connect(b,"onClick",function(a){this.renameStateDoIt(a)}.bind(this));c.connect(c,"onClick",function(a){a=dijit.byId("state_rename_tooltip_dialog");h.close(a)}.bind(this))},renameStateDoIt:function(a){a=dojo.byId("modify_state_old_name");var b=dijit.byId("state_rename_new_name"),b=b?b.get("value"):null,c=dijit.byId("state_rename_tooltip_dialog");
a&&b&&(this.newName=a.innerHTML=b);c&&h.close(c)},renameStateHideTooltipDialog:function(a){},onOk:function(a){if(q.currentEditor&&q.currentEditor.currentEditor&&q.currentEditor.currentEditor.context){a=q.currentEditor.currentEditor.context;var b=m.getFocus(a.rootNode);if(b&&b.stateContainerNode){var c;this.newName&&this.newName!==this._statesFocus.state&&(c=this.newName);var d,e=this.initialState.get("checked");e!==this.oldInitialStateOn&&(d=b.state?b.state:"undefined",d=e?d:null);if(c||d)e=new w,
e.add(new r({action:"modify",state:b.state,stateContainerNode:b.stateContainerNode,context:a,newState:c,initialState:d})),a.getCommandStack().execute(e);this.onClose()}}},onCancel:function(){this.onClose()},onClose:function(a){for(;a=this._connections.pop();)g.disconnect(a)}});return n("davinci.ve.actions.ModifyState",[p],{run:function(){var a;if(q.currentEditor&&q.currentEditor.currentEditor&&q.currentEditor.currentEditor.context&&(a=q.currentEditor.currentEditor.context,a=m.getFocus(a.rootNode))){v=
new k;var b=new davinci.ve.actions.ModifyStateWidget,d=c.showModal(b,y.modifyState);this._dialog=b._dialog=d;b._statesFocus=a;v.resolve()}}})})},"davinci/ve/actions/ManageStates":function(){define("dojo/_base/declare davinci/Runtime davinci/Workbench davinci/ve/actions/ContextAction davinci/workbench/Preferences dijit/registry davinci/ve/States davinci/actions/Action davinci/lang/ve davinci/ve/actions/_ManageStatesWidget".split(" "),function(n,k,g,e,b,d,h,a,m,f){return n("davinci.ve.actions.ManageStates",
[e],{run:function(){var a;k.currentEditor&&k.currentEditor.currentEditor&&k.currentEditor.currentEditor.context&&(a=k.currentEditor.currentEditor.context,(a=h.getFocus(a.rootNode))&&a.stateContainerNode&&(a=new davinci.ve.actions._ManageStatesWidget({node:a.stateContainerNode}),a._calledBy="ManageStates",a.okButton.set("label",m.updateLabel),a.updateDialog(),g.showModal(a,m.manageStates,{width:400},null,!0)))},isEnabled:function(a){a=this.fixupContext(a);var b=g.getOpenEditor();return b&&a?"davinci.ve.PageEditor"==
b.declaredClass?0<a.getSelection().length:!1:!1},shouldShow:function(a){return(a=(a=this.fixupContext(a))?a.editor:null)&&"davinci.ve.PageEditor"==a.declaredClass}})})},"davinci/ve/actions/_ManageStatesWidget":function(){define("dojo/_base/declare dojo/dom-construct dojo/on dojo/dom-style dojo/dom-class dojo/_base/event dijit/_WidgetBase dijit/_TemplatedMixin dijit/_WidgetsInTemplateMixin davinci/Runtime davinci/Workbench davinci/workbench/Preferences davinci/ve/States davinci/commands/CompoundCommand davinci/ve/commands/StyleCommand davinci/actions/Action davinci/lang/ve dijit/lang/_common dojo/text!./templates/ManageStates.html dijit/form/Button".split(" "),
function(n,k,g,e,b,d,h,a,m,f,q,c,p,y,u,z,A,x,w,r){return n("davinci.ve.actions._ManageStatesWidget",[h,a,m],{templateString:w,widgetsInTemplate:!0,anyCheckBoxChanges:!1,_states:[],_stateContainers:[],_checkBoxes:[],_overrideDisplayValue:[],_notes:[],_handlers:[],veNls:A,commonNls:x,constructor:function(){this.handlers=[]},postCreate:function(){if(this._getContext()){var a=this.domNode.querySelector(".manageStatesStatesListDiv");if(a){var c=this._getAllStatesInDoc();this._states=c.states;this._stateContainers=
c.stateContainers;if(c=this.domNode.querySelector(".manageStatesCheckAcceleratorsTable"))c.style.width="100%";if(c=this.domNode.querySelector(".manageStatesCheckCurrentStateOnlyCell"))c.style.textAlign="left";if(c=this.domNode.querySelector(".manageStatesCheckAllCell"))c.style.textAlign="center";if(c=this.domNode.querySelector(".manageStatesUncheckAllCell"))c.style.textAlign="right";for(var e,a=k.create("table",{"class":"manageStatesStatesListTable",style:"width:100%",border:0,cellspacing:0,cellpadding:3},
a),f=0;f<this._states.length;f++)c=k.create("tr",{},a),e=k.create("td",{"class":"manageStatesCheckboxCell"},c),this._checkBoxes[f]=k.create("div",{id:"manageStatesCheckBox_"+f,"class":"manageStatesCheckbox"},e),this._handlers.push(g(this._checkBoxes[f],"click",function(a,c){c=this._checkBoxes[a];this.anyCheckBoxChanges=!0;b.remove(c,"manageStatesCheckboxNoneVisible");b.remove(c,"manageStatesCheckboxAllVisible");b.remove(c,"manageStatesCheckboxAllVisibleBackgroundAll");b.remove(c,"manageStatesCheckboxAllVisibleBackgroundSome");
b.remove(c,"manageStatesCheckboxSomeVisible");1==c._checkValue?(c._checkValue=0,b.add(c,"manageStatesCheckboxNoneVisible"),this._overrideDisplayValue[a]="none"):(c._checkValue=1,b.add(c,"manageStatesCheckboxAllVisible"),this._overrideDisplayValue[a]="");this.updateDialog()}.bind(this,f))),this._overrideDisplayValue[f]=null,e=this._states[f],k.create("td",{"class":"manageStatesStateNameCell",innerHTML:"Normal"==e?"Background":e},c),e=k.create("td",{"class":"manageStatesNotesCell"},c),this._notes[f]=
k.create("span",{"class":"manageStatesNotesSpan"},e)}(a=this.domNode.querySelector(".manageStatesCheckCurrentStateOnly"))&&this._handlers.push(g(a,"click",function(a){d.stop(a);this._acceleratorClicked("current")}.bind(this)));(a=this.domNode.querySelector(".manageStatesCheckAll"))&&this._handlers.push(g(a,"click",function(a){d.stop(a);this._acceleratorClicked("all")}.bind(this)));(a=this.domNode.querySelector(".manageStatesUncheckAll"))&&this._handlers.push(g(a,"click",function(a){d.stop(a);this._acceleratorClicked("none")}.bind(this)));
(a=this.domNode.querySelector(".manageStatesCheckBackgroundOnly"))&&this._handlers.push(g(a,"click",function(a){d.stop(a);this._acceleratorClicked("background")}.bind(this)));this.anyCheckBoxChanges=!1;setTimeout(function(){this.okButton.focus()}.bind(this),500)}},_acceleratorClicked:function(a){var c=this._getContext();if(c&&(c=p.getFocus(c.rootNode))&&c.stateContainerNode){for(var d=p.getState(c.stateContainerNode),e=0;e<this._states.length;e++){var f=this._states[e];if("undefined"==f||f==p.NORMAL)f=
void 0;var g=this._checkBoxes[e];b.remove(g,"manageStatesCheckboxNoneVisible");b.remove(g,"manageStatesCheckboxAllVisible");b.remove(g,"manageStatesCheckboxAllVisibleBackgroundAll");b.remove(g,"manageStatesCheckboxAllVisibleBackgroundSome");b.remove(g,"manageStatesCheckboxSomeVisible");"current"==a?f==d&&c.stateContainerNode==this._stateContainers[e]?(g._checkValue=1,b.add(g,"manageStatesCheckboxAllVisible"),this._overrideDisplayValue[e]=""):(g._checkValue=0,b.add(g,"manageStatesCheckboxNoneVisible"),
this._overrideDisplayValue[e]="none"):"all"==a?(g._checkValue=1,b.add(g,"manageStatesCheckboxAllVisible"),this._overrideDisplayValue[e]=""):"none"==a?(g._checkValue=0,b.add(g,"manageStatesCheckboxNoneVisible"),this._overrideDisplayValue[e]="none"):"background"==a&&(g._checkValue=1,b.add(g,"manageStatesCheckboxAllVisible"),this._overrideDisplayValue[e]=0==e?"":"$MAQ_DELETE_PROPERTY$")}this.anyCheckBoxChanges=!0;this.updateDialog()}},_isValid:function(){return!0},_onKeyPress:function(a){a.keyCode!=
dojo.keys.ENTER&&(this._isValid()?this.okButton.set("disabled",!1):this.okButton.set("disabled",!0))},_getAllStatesInDoc:function(){var a;if(f.currentEditor&&f.currentEditor.currentEditor&&f.currentEditor.currentEditor.context){a=f.currentEditor.currentEditor.context;var b=[],c=[];if(a=p.getAllStateContainers(a.rootNode))for(var d=0;d<a.length;d++)for(var e=p.getStates(a[d]),g=0;g<e.length;g++)b.push(e[g]),c.push(a[d]);return{states:b,stateContainers:c}}console.error("_ManageStatesWidget.js (from "+
this._calledBy+" - cannot determine context.")},_getContext:function(){var a;f.currentEditor&&f.currentEditor.currentEditor&&f.currentEditor.currentEditor.context?a=f.currentEditor.currentEditor.context:console.error("_ManageStatesWidget.js (from "+this._calledBy+" - cannot determine context.");return a},_getAllEffectedWidgets:function(){var a=this._getContext();if(!a)return[];var b=p.getFocus(a.rootNode);if(b&&b.stateContainerNode)return a.getSelection().slice(0)},updateDialog:function(){var a=this._getContext();
if(a){var c=p.getFocus(a.rootNode);if(c&&c.stateContainerNode)for(var c=this._getAllEffectedWidgets(),d=this._overrideDisplayValue[0],e=0;e<this._states.length;e++){var f=this._states[e];if(f==p.NORMAL||"undefined"==f)f=void 0;for(var g=0,h=0,k=0;k<c.length;k++){var m=c[k],q={undefined:d};q[void 0===f?"undefined":f]=this._overrideDisplayValue[e];m=p.getEffectiveDisplayValue(a,m,f,q);0!=m.effectiveDisplayValue.indexOf("none")&&(g++,f||"undefined"!=m.effectiveState?f&&m.effectiveState==f&&h++:h++)}f=
this._checkBoxes[e];k=this._notes[e];b.remove(f,"manageStatesCheckboxNoneVisible");b.remove(f,"manageStatesCheckboxAllVisible");b.remove(f,"manageStatesCheckboxAllVisibleBackgroundAll");b.remove(f,"manageStatesCheckboxAllVisibleBackgroundSome");b.remove(f,"manageStatesCheckboxSomeVisible");k.innerHTML="";0==g?(f._checkValue=0,b.add(f,"manageStatesCheckboxNoneVisible")):g==c.length?(f._checkValue=1,h==c.length?b.add(f,"manageStatesCheckboxAllVisible"):0<h?(b.add(f,"manageStatesCheckboxAllVisibleBackgroundSome"),
k.innerHTML=A.manageStatesSomeVisibleFromBackground):(b.add(f,"manageStatesCheckboxAllVisibleBackgroundAll"),k.innerHTML=A.manageStatesAllVisibleFromBackground)):(f._checkValue=2,b.add(f,"manageStatesCheckboxSomeVisible"),k.innerHTML=A.manageStatesSomeVisibleSomeHidden)}}},onOk:function(){if(this.anyCheckBoxChanges){var a=this._getContext();if(a){for(var b,c=this._getAllEffectedWidgets(),d=0;d<this._states.length;d++){var e=this._states[d];if(e==p.NORMAL||"undefined"==e)e=void 0;var f=this._checkBoxes[d]._checkValue;
if(0===f||1===f)for(var g=0;g<c.length;g++){var h=c[g];b||(b=new y);b.add(new u(h,[{display:this._overrideDisplayValue[d]?this._overrideDisplayValue[d]:1==f?"":"none"}],e))}}b&&a.getCommandStack().execute(b)}}},onCancel:function(){this.onClose()},destroy:function(){this.inherited(arguments);for(var a=0;a<this._handlers.length;a++)this._handlers[a].remove();this._handlers=[]}})})},"davinci/ve/actions/NewWidgetsCurrentState":function(){define("dojo/_base/declare davinci/Runtime davinci/Workbench davinci/ve/States davinci/actions/Action davinci/workbench/Preferences".split(" "),
function(n,k,g,e,b,d){return n("davinci.ve.actions.NewWidgetsCurrentState",[b],{run:function(){var b;if(k.currentEditor&&k.currentEditor.currentEditor&&k.currentEditor.currentEditor.context){b=k.currentEditor.currentEditor.context;var a=g.getProject(),m=d.getPreferences("davinci.ve.editorPrefs",a);m.newWidgetsCurrentState=m.newWidgetsCurrentState?!1:!0;d.savePreferences("davinci.ve.editorPrefs",a,m);e.updateStateIcons(b)}}})})},"davinci/ve/actions/HighlightBaseWidgets":function(){define("dojo/_base/declare davinci/Runtime davinci/Workbench davinci/ve/States davinci/actions/Action davinci/workbench/Preferences".split(" "),
function(n,k,g,e,b,d){return n("davinci.ve.actions.HighlightBaseWidgets",[b],{run:function(){var b;if(k.currentEditor&&k.currentEditor.currentEditor&&k.currentEditor.currentEditor.context){b=k.currentEditor.currentEditor.context;var a=g.getProject(),e=d.getPreferences("davinci.ve.editorPrefs",a);e.highlightBaseWidgets=e.highlightBaseWidgets?!1:!0;d.savePreferences("davinci.ve.editorPrefs",a,e);b.updateFocusAll()}}})})},"davinci/ve/actions/ShowInOutline":function(){define(["dojo/_base/declare","davinci/Runtime",
"davinci/Workbench","davinci/ve/actions/ContextAction"],function(n,k,g,e){return n("davinci.ve.actions.ManageStates",[e],{run:function(){var b=k.currentEditor;b&&b.delegate.showInOutline()},isEnabled:function(b){b=this.fixupContext(b);var d=g.getOpenEditor();return d&&b?"davinci.ve.PageEditor"==d.declaredClass?0<b.getSelection().length:!1:!1},shouldShow:function(b){return(b=(b=this.fixupContext(b))?b.editor:null)&&"davinci.ve.PageEditor"==b.declaredClass}})})},"davinci/ve/PageEditor":function(){define("require dojo/_base/declare ../ui/ModelEditor dojo/dnd/Moveable ../Runtime ../commands/CommandStack ../html/ui/HTMLEditor ./VisualEditor ./VisualEditorOutline ./widget ./States ../XPathUtils ../html/HtmlFileXPathAdapter ./utils/GeomUtils davinci/model/Factory xide/mixins/EventedMixin xide/mixins/ReloadMixin xide/utils xide/types xide/factory xideve/views/BlocksFileEditor xide/widgets/_Widget xide/views/_LayoutMixin xdocker/Docker2 xdocker/types wcDocker/iframe".split(" "),
function(n,k,g,e,b,d,h,a,m,f,q,c,p,y,u,z,A,x,w,r,v,B,C,F,E){k=k("davinci.ve.PageEditor",[g,B,z,A,C],{_latestSourceMode:"source",_latestLayoutMode:"flow",item:null,delegate:null,template:null,bottomTabContainer:null,textEditorPane:null,didBlockViews:!1,_propCP:null,createTab:function(a,b){var c=w.DOCKER;return this._docker.addTab(a||"DefaultTab",x.mixin({icon:!1,closeable:!0,moveable:!0,tabOrientation:c.TAB.TOP,location:c.DOCK.STACKED},b))},createLayout:function(){},constructor:function(b,c,e,f,g,
h){function k(a){setTimeout(function(){var a=m.getContext();a&&a.frameNode&&$(a.frameNode).css("pointer-events","initial")},a||4E3)}c=w.DOCKER;this.item=e;this.template=g;var m=this;this._commandStack=new d(this);this.savePoint=0;this._docker=F.createDefault(b,{});this.domNode=this._docker.$container[0];this._designCP=this.createTab(null,{title:"Design",icon:"fa-eye"});this._docker.on(w.DOCKER.EVENT.BEGIN_RESIZE,function(a){(a=m.getContext())&&a.frameNode&&$(a.frameNode).css("pointer-events","none");
k()});this._docker.on(w.DOCKER.EVENT.MOVE_STARTED,function(a){(a=m.getContext())&&a.frameNode&&$(a.frameNode).css("pointer-events","none");k()});this._docker.on(w.DOCKER.EVENT.MOVE_ENDED,function(a){k(1)});this._docker.on(w.DOCKER.EVENT.END_RESIZE,function(a){k(1)});this._docker.on(w.DOCKER.EVENT.BEGIN_FLOAT_RESIZE,function(a){a=m.getContext();$(a.frameNode).css("pointer-events","none");k()});this._docker.on(w.DOCKER.EVENT.END_FLOAT_RESIZE,function(a){k(1)});this._designCP.$container[0].domNode=this._designCP.$container[0];
this._designCP.domNode=this._designCP.$container[0];this._designCP.minSize(400,400);this.currentEditor=this.visualEditor=new a(this._designCP.$container[0],this,this.template);this.currentEditor._commandStack=this._commandStack;this.initReload();try{this._propCP=this.createTab(null,{title:"Props",icon:"fa-cogs",tabOrientation:c.TAB.TOP,location:c.TAB.RIGHT,target:this._designCP});this._propCP.maxSize(400);this._propCP.minSize(350);this._propCP.closeable(!1);b=null;h.length?this._srcCP=b=this.createTab(null,
{title:"HTML",icon:"fa-code",tabOrientation:c.TAB.TOP,location:c.TAB.BOTTOM}):console.error("have no editors, ");h=null;try{h=this.htmlEditor=f(b)}catch(O){debugger}this.model=h.model;h._on(w.EVENTS.ON_FILE_CONTENT_CHANGED,function(a){m.delegate.onEditorContentChanged(a)});this._displayMode="design";this._connect(this.visualEditor,"onContentChange","_visualChanged");this.subscribe("/davinci/ui/styleValuesChange",this._stylePropertiesChange);this.subscribe("/davinci/ui/widgetSelected",this._widgetSelectionChange);
this.subscribe("/davinci/ui/selectionChanged",this._modelSelectionChange);this.subscribe("/davinci/ui/editorSelected",this._editorSelected.bind(this));this.subscribe("/davinci/ui/context/loaded",this._contextLoaded.bind(this));this.subscribe("/davinci/ui/deviceChanged",this._deviceChanged.bind(this));this._designCP.getSplitter().pos(.5);setTimeout(function(){m._srcCP.getSplitter().pos(.5);m._propCP.maxSize(500)},1500);this.resize()}catch(O){this.visualEditor._connectCallback(O),console.error("page editor crash : "+
O)}this.add(this._docker)},getPropertyPane:function(){return this._propCP},getDesignPane:function(){return this._designCP},getSourcePane:function(){return this._srcCP},getVisualEditor:function(){return this.visualEditor},getBlocksPane:function(){return this._blocksTab},onSceneBlocksLoaded:function(a,b){if(0!=b.showBlocks&&!this.didBlockViews){this.didBlockViews=!0;var c=a.blockScopes;a=a.ctx;var d=w.DOCKER;this._blocksTab=this.createTab(null,{title:"Blocks",icon:"fa-eye",target:this._srcCP,tabOrientation:d.TAB.TOP,
location:d.DOCK.STACKED});c=c[0];d=this._blocksTab;a=x.addWidget(v,{style:"height:inherit;width:inherit;padding:0px;",ctx:a,pageEditor:this,visualEditor:b,editorContext:this.getContext(),item:{path:c.path,mount:c.mount}},this,d,!0);a.initWithScope(c);d.add(a);this._blockEditor=a;(b=b.getItem())&&this._blockEditor._widgetSelectionChanged({selection:[b]})}},getBlockEditor:function(){return this._blockEditor},setRootElement:function(a){this._rootElement=a},supports:function(a){return a.match(/^palette|properties|style|states|inline-style|MultiPropTarget|propsect_common|propsect_widgetSpecific|propsect_events|propsect_layout|propsect_paddingMargins|propsect_background|propsect_border|propsect_fontsAndText|propsect_shapesSVG$/)},
focus:function(){},_editorSelected:function(a){var b=this.getContext();b&&(this==a.oldEditor&&b.hideFocusAll(),a.editor&&a.editor.editorContainer&&("davinci.ve.PageEditor"==a.editor.declaredClass||"davinci.ve.themeEditor.ThemeEditor"==a.editor.declaredClass)&&this==a.editor&&(a=b.getFlowLayout(),this._updateLayoutDropDownButton(a?"flow":"absolute"),b.clearCachedWidgetBounds()))},_contextLoaded:function(){},_deviceChanged:function(){if(b.currentEditor==this&&this.editorContainer){var a=this.getContext();
a&&a.updateFocusAll&&setTimeout(function(){a.updateFocusAll()},1E3)}},_updateLayoutDropDownButton:function(a){(a=dojo.query(".maqLayoutDropDownButton"))&&a[0]&&dijit.byNode(a[0])},_selectLayout:function(a){this._latestLayoutMode=a;n(["davinci/actions/SelectLayoutAction"],function(b){b=new b;b._changeLayoutCommand(a)});this._updateLayoutDropDownButton(a)},selectLayoutFlow:function(){this._selectLayout("flow")},selectLayoutAbsolute:function(){this._selectLayout("absolute")},getDisplayMode:function(){return this._displayMode},
getSourceDisplayMode:function(){return this._latestSourceMode},_switchDisplayModeSource:function(a){this._latestSourceMode=a;this.switchDisplayMode(a)},switchDisplayModeSource:function(){this._switchDisplayModeSource("source")},switchDisplayModeSplitVertical:function(){this._switchDisplayModeSource("splitVertical")},switchDisplayModeSplitHorizontal:function(){this._switchDisplayModeSource("splitHorizontal")},switchDisplayModeSourceLatest:function(){this.switchDisplayMode(this._latestSourceMode)},
switchDisplayModeDesign:function(){this.switchDisplayMode("design")},switchDisplayMode:function(a){},hidePropertyPane:function(a){this.getPropertyPane()},_modelSelectionChange:function(a){if("source"!=this._displayMode&&n("davinci/Runtime").currentEditor===this&&(this._selectionCssRules=null,a.length&&(a=a[0].model)&&"HTMLElement"==a.elementType&&(a=a.getAttribute("id"))&&"source"!=this._displayMode)){a=f.byId(a,this.visualEditor.context.getDocument());var b=y.getMarginBoxPageCoords(a.domNode);this.getContext().getGlobal().scroll(b.l,
b.t);this.visualEditor.context.select(a)}},_widgetSelectionChange:function(a){!0===a.isFake||!this.visualEditor.context||a&&a.length&&a[0]._edit_context!=this.visualEditor.context||(a=this.visualEditor.context.getSelection())&&a.length&&"design"!=this._displayMode&&this.htmlEditor.selectModel([{model:a[0]._srcElement}])},_stylePropertiesChange:function(a){if(!(a&&a.cascade&&a.cascade._widget&&1==a.cascade._widget.isFake)){this.visualEditor._stylePropertiesChange(a);var b=this.visualEditor.context.getSelection();
if(b&&b[0]&&(b=x.getNode(b[0]))&&b.onChanged)b.onChanged();a=a.cascade._topWidgetDom;$(a).attr("style");this.getContext().updateBackground(a)}},_setDirty:function(){this.setDirty(!0)},setDirty:function(a){if(this.isDirty=a)this.lastModifiedTime=Date.now();this.editorContainer&&this.editorContainer.setDirty(a)},_visualChanged:function(a){this.delegate.shouldUpdateTextEditor()&&(a||this._setDirty(),this.htmlEditor.set("value",this.model.getText(),!0),this.getContext().visualEditorChanged())},_srcChanged:function(){dojo.withDoc(window.document,
function(){this.htmlEditor.isTyping&&(this.visualEditor.skipSave=!0);var a=this.visualEditor.context,b=a&&this._getStatesScenes(a);this.visualEditor.setContent(this.fileName,this.htmlEditor.model);this.editorContainer.updateToolbars();dojo.publish("/davinci/ui/context/pagerebuilt",[a]);b&&this._setStatesScenes(a,b);delete this.visualEditor.skipSave;this._setDirty()},this)},_getStatesScenes:function(a){return[]},_setStatesScenes:function(a,b){},getContext:function(){return this.visualEditor.context},
getOutline:function(){this.outline||(this.outline=new m(this));return this.outline},getPropertiesView:function(){return this.currentEditor.getPropertiesView()},setContent:function(a,b,c){this.fileName=a;this.htmlEditor.setContent(a,b);this.visualEditor.setContent(a,this.htmlEditor.model,c);this._connect(this.htmlEditor.model,"onChange","_themeChange")},_themeChange:function(a){a&&"CSSRule"===a.elementType&&(this.setDirty(!0),this.visualEditor.context.hotModifyCssRule(a))},getDefaultContent:function(){this._isNewFile=
!0;return this.visualEditor.getDefaultContent()},selectModel:function(a,b){this.publishingSelect||b&&this!=b||(b=a&&a[0])&&(b.elementType?this.htmlEditor.selectModel(a):b.model&&b.model.isWidget&&this.visualEditor.context.select(b.model,b.add))},save:function(a){if(this.delegate&&this.delegate.save){var b=this.visualEditor.context.getModel(),c=b.getText();this.delegate.save(this,this.visualEditor,b,c)}else this.savePoint=this._commandStack.getUndoCount(),(b=this.visualEditor.save(a))&&b.then&&b.then(function(b){this.isDirty=
a;this.editorContainer&&this.editorContainer.domNode&&this.editorContainer.setDirty(a)}.bind(this),function(a){})},removeWorkingCopy:function(){},previewInBrowser:function(){this.visualEditor.previewInBrowser()},destroy:function(){this.inherited(arguments);this.visualEditor.destroy();this.htmlEditor.destroy();x.destroy(this.bottomTabContainer)},getText:function(){return this.htmlEditor.getText()},onResize:function(){for(var a=this.getContext(),b=a.getSelection(),c=0;c<b.length;c++)a.select(b[c],0!=
c)},handleKeyEvent:function(a){},getFocusContainerBounds:function(){if("source"==this._displayMode)return{l:0,t:0,w:0,h:0};var a=y.getBorderBoxPageCoords(this._designCP.domNode);a.l-=8;a.t-=8;"none"==(this.visualEditor&&this.visualEditor.getDevice?this.visualEditor.getDevice():"none")?(a.w+="splitVertical"==this._displayMode?8:16,a.h+="splitHorizontal"==this._displayMode?8:16):(a.w+=8,a.h+=8);return a},getCommandStack:function(){return this.getContext().getCommandStack()}});k.__test="asd2f";return k})},
"davinci/ui/ModelEditor":function(){define(["dojo/_base/declare","../Runtime","./TextEditor","../commands/SourceChangeCommand"],function(n,k,g,e){return n(g,{constructor:function(b,d){this.subscribe("/davinci/ui/selectionChanged",this.selectModel)},colorize:function(b){return null},setContent:function(b,d){this.inherited(arguments);this.model.fileName=b;this.model.setText(d)},getHoverText:function(b,d){b=this.convertMouseToLine(b,d);return this.model.findChildAtPosition({startOffset:b.row,endOffset:b.col}).getLabel()},
handleChange:function(b){this.inherited(arguments);var d=this.model.getText(),g=k.currentEditor;g&&g.getCommandStack?(g=g.getCommandStack(),d=new e({model:this.model,oldText:d,newText:b}),g.execute(d)):(this.model.setText(b),dojo.publish("/davinci/ui/modelChanged",[{newModel:this.model}]))},selectModel:function(b,d){this.publishingSelect||d&&this!=d||!b.length||!b[0].model||(b=b[0].model,b.elementType&&(b=this.model.mapPositions(b),this.select(b)))},selectionChange:function(b){var d=this.model.mapPositions(this.model),
d=this.model.endOffset-d.endOffset,d=this.model.findChildAtPosition({startOffset:b.startOffset+d,endOffset:b.endOffset+d-1});b.model=d;if(d!=this._selectedModel)try{this.publishingSelect=!0,dojo.publish("/davinci/ui/selectionChanged",[[b],this])}finally{this.publishingSelect=!1}this._selectedModel=d},getSyntaxPositions:function(b,d){this.model.setText(b);if(this.model.getSyntaxPositions)return this.model.getSyntaxPositions(d).sort(function(b,a){return b.line!=a.line?b.line-a.line:b.col-a.col})},save:function(){this.model.setText(this.getText());
this.inherited(arguments)},getErrors:function(){return this.model.errors||[]}})})},"davinci/ui/TextEditor":function(){define(["dojo/_base/declare","./Editor","../Runtime"],function(n,k,g){return n(k,{constructor:function(e,b){this.subscriptions=[];this._handles=[]},isActiveEditor:function(){return g.currentEditor==this},handleChange:function(e){this.editorContainer&&this.editorContainer.setDirty(!0);this.isDirty=!0;this.lastModifiedTime=Date.now()},_onKey:function(e){davinci.Workbench.currentContext=
this.editorID;return davinci.Workbench.handleKey(e)},subscribe:function(e,b){this.subscriptions.push(dojo.subscribe(e,this,b))},destroy:function(){this.inherited(arguments);this.subscriptions.forEach(dojo.unsubscribe);this._handles.forEach(dojo.disconnect)},getDefaultContent:function(){return null},getErrors:function(){return[]},save:function(e){var b=this.getText();if(this.resourceFile){this.resourceFile.clearMarkers();for(var d=this.getErrors(),g=0;g<d.length;g++){var a;switch(d[g].id){case "(error)":a=
"error";break;case "(warning)":a="warning"}a&&this.resourceFile.addMarker(a,d[g].line+1,d[g].reason)}this.resourceFile.setContents(b,e);this.editorContainer&&this.editorContainer.setDirty(e);this.isDirty=!1;this.lastModifiedTime=0}},supports:function(e){return!1},_connect:function(e,b,d){this._handles.push(dojo.connect(e,b,this,d))}})})},"davinci/ui/Editor":function(){define(["../commands/CommandStack","dojo/_base/declare"],function(n,k,g){var e=function(b){this._progSelect||this.selectionChange({startOffset:b.newValue.start,
endOffset:b.newValue.end})};return k(null,{constructor:function(b,d,e){this.contentDiv=b;this.commandStack=new n;this._existWhenVisible=e;this._isVisible=!e},setContent:function(b,d){this.editor||this._existWhenVisible&&!this._isVisible||this._createEditor();this._textModel||(this._textModel=this.editor?this.editor.getModel():new mProjectionTextModel.ProjectionTextModel(new mTextModel.TextModel));this.fileName=b;this.setValue(d,!0);this._textModel&&(dojo.disconnect(this._textModelConnection),this._textModelConnection=
dojo.connect(this._textModel,"onChanged",this,onTextChanged))},setVisible:function(b){b!=this._isVisible&&this._existWhenVisible&&(b&&this._existWhenVisible?(this._createEditor(),this._updateStyler()):(this.editor.getTextView().removeEventListener("Selection",dojo.hitch(this,e)),delete this.editor));this._isVisible=b},setValue:function(b,d){this._dontNotifyChange=d;this.editor?this.editor.setText(b):this._textModel.setText(b)},_createEditor:function(){},_updateStyler:function(){},selectionChange:function(b){},
destroy:function(){},select:function(b){if(this.editor)try{this._progSelect=!0,this.editor.setSelection(b.endOffset,b.startOffset)}finally{delete this._progSelect}},getText:function(){return this._textModel.getText(0)},getOnUnloadWarningMessage:function(){return null}})})},"davinci/commands/SourceChangeCommand":function(){define(["dojo/_base/declare","davinci/Runtime"],function(n,k){return n("davinci.commands.SourceChangeCommand",null,{name:"SourceChange",constructor:function(g){this._model=g.model;
this._oldText=g.oldText;this._newText=g.newText},incrementalUpdate:function(g){this._newText=g.newText},execute:function(){this._model.setText(this._newText);dojo.publish("/davinci/ui/modelChanged",[{newModel:this._model}]);var g=k.currentEditor;"davinci.ve.PageEditor"==g.declaredClass&&g.handleChange&&require(["davinci/ve/PageEditor"],function(e){e.prototype._srcChanged.call(g,this._newText)}.bind(this));if(!this.established)return this.established=!0},undo:function(){this._model.setText(this._oldText);
dojo.publish("/davinci/ui/modelChanged",[{newModel:this._model}]);var g=k.currentEditor;"davinci.ve.PageEditor"==g.declaredClass&&g.handleChange&&require(["davinci/ve/PageEditor"],function(e){e.prototype._srcChanged.call(g,this._oldText)}.bind(this))}})})},"dojo/dnd/Moveable":function(){define("../_base/array ../_base/declare ../_base/lang ../dom ../dom-class ../Evented ../on ../topic ../touch ./common ./Mover ../_base/window".split(" "),function(n,k,g,e,b,d,h,a,m,f,q,c){return k("dojo.dnd.Moveable",
[d],{handle:"",delay:0,skip:!1,constructor:function(a,b){this.node=e.byId(a);b||(b={});this.handle=b.handle?e.byId(b.handle):null;this.handle||(this.handle=this.node);this.delay=0<b.delay?b.delay:0;this.skip=b.skip;this.mover=b.mover?b.mover:q;this.events=[h(this.handle,m.press,g.hitch(this,"onMouseDown")),h(this.handle,"dragstart",g.hitch(this,"onSelectStart")),h(this.handle,"selectstart",g.hitch(this,"onSelectStart"))]},markupFactory:function(a,b,c){return new c(b,a)},destroy:function(){n.forEach(this.events,
function(a){a.remove()});this.events=this.node=this.handle=null},onMouseDown:function(a){if(!this.skip||!f.isFormElement(a)){if(this.delay)this.events.push(h(this.handle,m.move,g.hitch(this,"onMouseMove")),h(this.handle.ownerDocument,m.release,g.hitch(this,"onMouseUp"))),this._lastX=a.pageX,this._lastY=a.pageY;else this.onDragDetected(a);a.stopPropagation();a.preventDefault()}},onMouseMove:function(a){if(Math.abs(a.pageX-this._lastX)>this.delay||Math.abs(a.pageY-this._lastY)>this.delay)this.onMouseUp(a),
this.onDragDetected(a);a.stopPropagation();a.preventDefault()},onMouseUp:function(a){for(var b=0;2>b;++b)this.events.pop().remove();a.stopPropagation();a.preventDefault()},onSelectStart:function(a){this.skip&&f.isFormElement(a)||(a.stopPropagation(),a.preventDefault())},onDragDetected:function(a){new this.mover(this.node,a,this)},onMoveStart:function(d){a.publish("/dnd/move/start",d);b.add(c.body(),"dojoMove");b.add(this.node,"dojoMoveItem")},onMoveStop:function(d){a.publish("/dnd/move/stop",d);b.remove(c.body(),
"dojoMove");b.remove(this.node,"dojoMoveItem")},onFirstMove:function(){},onMove:function(a,b){this.onMoving(a,b);var c=a.node.style;c.left=b.l+"px";c.top=b.t+"px";this.onMoved(a,b)},onMoving:function(){},onMoved:function(){}})})},"dojo/touch":function(){define("./_base/kernel ./aspect ./dom ./dom-class ./_base/lang ./on ./has ./mouse ./domReady ./_base/window".split(" "),function(n,k,g,e,b,d,h,a,m,f){function q(a,b,c){return z&&c?function(a,b){return d(a,c,b)}:y?function(c,e){var f=d(c,b,e),g=d(c,
a,function(a){(!E||(new Date).getTime()>E+1E3)&&e.call(this,a)});return{remove:function(){f.remove();g.remove()}}}:function(b,c){return d(b,a,c)}}function c(a){do if(a.dojoClick)return a.dojoClick;while(a=a.parentNode)}function p(a,b,h){if(x=!a.target.disabled&&c(a.target))w=a.target,r=a.touches?a.touches[0].pageX:a.clientX,v=a.touches?a.touches[0].pageY:a.clientY,B=("object"==typeof x?x.x:"number"==typeof x?x:0)||4,C=("object"==typeof x?x.y:"number"==typeof x?x:0)||4,A||(a=function(a){f.doc.addEventListener(a,
function(b){b._dojo_click||!((new Date).getTime()<=F+1E3)||"INPUT"==b.target.tagName&&e.contains(b.target,"dijitOffScreen")||(b.stopPropagation(),b.stopImmediatePropagation&&b.stopImmediatePropagation(),"click"!=a||"INPUT"==b.target.tagName&&"radio"!=b.target.type&&"checkbox"!=b.target.type||"TEXTAREA"==b.target.tagName||"AUDIO"==b.target.tagName||"VIDEO"==b.target.tagName||b.preventDefault())},!0)},A=!0,f.doc.addEventListener(b,function(a){x=x&&a.target==w&&Math.abs((a.touches?a.touches[0].pageX:
a.clientX)-r)<=B&&Math.abs((a.touches?a.touches[0].pageY:a.clientY)-v)<=C},!0),f.doc.addEventListener(h,function(a){if(x){F=(new Date).getTime();var b=a.target;"LABEL"===b.tagName&&(b=g.byId(b.getAttribute("for"))||b);setTimeout(function(){d.emit(b,"click",{bubbles:!0,cancelable:!0,_dojo_click:!0})})}},!0),a("click"),a("mousedown"),a("mouseup"))}var y=h("touch"),u=5>h("ios"),z=navigator.msPointerEnabled,A,x,w,r,v,B,C,F,E,D;y&&(z?m(function(){f.doc.addEventListener("MSPointerDown",function(a){p(a,
"MSPointerMove","MSPointerUp")},!0)}):m(function(){function a(a){var c=b.delegate(a,{bubbles:!0});6<=h("ios")&&(c.touches=a.touches,c.altKey=a.altKey,c.changedTouches=a.changedTouches,c.ctrlKey=a.ctrlKey,c.metaKey=a.metaKey,c.shiftKey=a.shiftKey,c.targetTouches=a.targetTouches);return c}D=f.body();f.doc.addEventListener("touchstart",function(a){E=(new Date).getTime();var b=D;D=a.target;d.emit(b,"dojotouchout",{relatedTarget:D,bubbles:!0});d.emit(D,"dojotouchover",{relatedTarget:b,bubbles:!0});p(a,
"touchmove","touchend")},!0);d(f.doc,"touchmove",function(b){E=(new Date).getTime();var c=f.doc.elementFromPoint(b.pageX-(u?0:f.global.pageXOffset),b.pageY-(u?0:f.global.pageYOffset));c&&(D!==c&&(d.emit(D,"dojotouchout",{relatedTarget:c,bubbles:!0}),d.emit(c,"dojotouchover",{relatedTarget:D,bubbles:!0}),D=c),d.emit(c,"dojotouchmove",a(b))||b.preventDefault())});d(f.doc,"touchend",function(b){E=(new Date).getTime();var c=f.doc.elementFromPoint(b.pageX-(u?0:f.global.pageXOffset),b.pageY-(u?0:f.global.pageYOffset))||
f.body();d.emit(c,"dojotouchend",a(b))})}));k={press:q("mousedown","touchstart","MSPointerDown"),move:q("mousemove","dojotouchmove","MSPointerMove"),release:q("mouseup","dojotouchend","MSPointerUp"),cancel:q(a.leave,"touchcancel",y?"MSPointerCancel":null),over:q("mouseover","dojotouchover","MSPointerOver"),out:q("mouseout","dojotouchout","MSPointerOut"),enter:a._eventHandler(q("mouseover","dojotouchover","MSPointerOver")),leave:a._eventHandler(q("mouseout","dojotouchout","MSPointerOut"))};return n.touch=
k})},"dojo/dnd/common":function(){define(["../sniff","../_base/kernel","../_base/lang","../dom"],function(n,k,g,e){var b=g.getObject("dojo.dnd",!0);b.getCopyKeyState=function(b){return b[n("mac")?"metaKey":"ctrlKey"]};b._uniqueId=0;b.getUniqueId=function(){var d;do d=k._scopeName+"Unique"+ ++b._uniqueId;while(e.byId(d));return d};b._empty={};b.isFormElement=function(b){b=b.target;3==b.nodeType&&(b=b.parentNode);return 0<=" a button textarea input select option ".indexOf(" "+b.tagName.toLowerCase()+
" ")};return b})},"dojo/dnd/Mover":function(){define("../_base/array ../_base/declare ../_base/lang ../sniff ../_base/window ../dom ../dom-geometry ../dom-style ../Evented ../on ../touch ./common ./autoscroll".split(" "),function(n,k,g,e,b,d,h,a,m,f,q,c,p){return k("dojo.dnd.Mover",[m],{constructor:function(a,b,c){function e(a){a.preventDefault();a.stopPropagation()}this.node=d.byId(a);this.marginBox={l:b.pageX,t:b.pageY};this.mouseButton=b.button;b=this.host=c;a=a.ownerDocument;this.events=[f(a,
q.move,g.hitch(this,"onFirstMove")),f(a,q.move,g.hitch(this,"onMouseMove")),f(a,q.release,g.hitch(this,"onMouseUp")),f(a,"dragstart",e),f(a.body,"selectstart",e)];p.autoScrollStart(a);if(b&&b.onMoveStart)b.onMoveStart(this)},onMouseMove:function(a){p.autoScroll(a);var b=this.marginBox;this.host.onMove(this,{l:b.l+a.pageX,t:b.t+a.pageY},a);a.preventDefault();a.stopPropagation()},onMouseUp:function(a){(e("webkit")&&e("mac")&&2==this.mouseButton?0==a.button:this.mouseButton==a.button)&&this.destroy();
a.preventDefault();a.stopPropagation()},onFirstMove:function(c){var d=this.node.style,e,f=this.host;switch(d.position){case "relative":case "absolute":e=Math.round(parseFloat(d.left))||0;d=Math.round(parseFloat(d.top))||0;break;default:d.position="absolute";d=h.getMarginBox(this.node);e=b.doc.body;var g=a.getComputedStyle(e),k=h.getMarginBox(e,g),g=h.getContentBox(e,g);e=d.l-(g.l-k.l);d=d.t-(g.t-k.t)}this.marginBox.l=e-this.marginBox.l;this.marginBox.t=d-this.marginBox.t;if(f&&f.onFirstMove)f.onFirstMove(this,
c);this.events.shift().remove()},destroy:function(){n.forEach(this.events,function(a){a.remove()});var a=this.host;if(a&&a.onMoveStop)a.onMoveStop(this);this.events=this.node=this.host=null}})})},"dojo/dnd/autoscroll":function(){define("../_base/lang ../sniff ../_base/window ../dom-geometry ../dom-style ../window".split(" "),function(n,k,g,e,b,d){var h={};n.setObject("dojo.dnd.autoscroll",h);h.getViewport=d.getBox;h.V_TRIGGER_AUTOSCROLL=32;h.H_TRIGGER_AUTOSCROLL=32;h.V_AUTOSCROLL_VALUE=16;h.H_AUTOSCROLL_VALUE=
16;var a,m=g.doc,f=Infinity,q=Infinity;h.autoScrollStart=function(b){m=b;a=d.getBox(m);b=g.body(m).parentNode;f=Math.max(b.scrollHeight-a.h,0);q=Math.max(b.scrollWidth-a.w,0)};h.autoScroll=function(b){var c=a||d.getBox(m),e=g.body(m).parentNode,k=0,n=0;b.clientX<h.H_TRIGGER_AUTOSCROLL?k=-h.H_AUTOSCROLL_VALUE:b.clientX>c.w-h.H_TRIGGER_AUTOSCROLL&&(k=Math.min(h.H_AUTOSCROLL_VALUE,q-e.scrollLeft));b.clientY<h.V_TRIGGER_AUTOSCROLL?n=-h.V_AUTOSCROLL_VALUE:b.clientY>c.h-h.V_TRIGGER_AUTOSCROLL&&(n=Math.min(h.V_AUTOSCROLL_VALUE,
f-e.scrollTop));window.scrollBy(k,n)};h._validNodes={div:1,p:1,td:1};h._validOverflow={auto:1,scroll:1};h.autoScrollNodes=function(a){for(var c,d,f,m,q,n=0,w=0,r=a.target;r;){if(1==r.nodeType&&r.tagName.toLowerCase()in h._validNodes){f=b.getComputedStyle(r);q=f.overflowX.toLowerCase()in h._validOverflow;m=f.overflowY.toLowerCase()in h._validOverflow;if(q||m)c=e.getContentBox(r,f),d=e.position(r,!0);if(q){f=Math.min(h.H_TRIGGER_AUTOSCROLL,c.w/2);q=a.pageX-d.x;if(k("webkit")||k("opera"))q+=g.body().scrollLeft;
n=0;0<q&&q<c.w&&(q<f?n=-f:q>c.w-f&&(n=f),r.scrollLeft+=n)}if(m){m=Math.min(h.V_TRIGGER_AUTOSCROLL,c.h/2);f=a.pageY-d.y;if(k("webkit")||k("opera"))f+=g.body().scrollTop;w=0;0<f&&f<c.h&&(f<m?w=-m:f>c.h-m&&(w=m),r.scrollTop+=w)}if(n||w)return}try{r=r.parentNode}catch(v){r=null}}h.autoScroll(a)};return h})},"davinci/html/ui/HTMLEditor":function(){define(["dojo/_base/declare","davinci/ui/ModelEditor","davinci/model/Factory","davinci/html/ui/HTMLOutline"],function(n,k,g,e){return n("davinci.html.ui.HTMLEditor",
k,{constructor:function(b,d){this.model=this.htmlFile=g.getModel({url:d});this._handle=dojo.connect(this.htmlFile.getDocumentElement(),"onkeydown",this,"onKeyDown")},destroy:function(){this.htmlFile.close();dojo.disconnect(this._handle);this.inherited(arguments)},getOutline:function(){this.outline||(this.outline=new e(this.model));return this.outline},getDefaultContent:function(){return"\x3chtml\x3e\n \x3chead\x3e\x3c/head\x3e\n \x3cbody\x3e\x3c/body\x3e\n\x3c/html\x3e"},onKeyDown:function(b){}})})},
"davinci/html/ui/HTMLOutline":function(){define(["dojo/_base/declare","davinci/html/ui/HTMLOutlineModel"],function(n,k){return n("davinci/html/ui/HTMLOutline",null,{constructor:function(g){this._htmlModel=g},getModel:function(){return this._model=new k(this._htmlModel)}})})},"davinci/html/ui/HTMLOutlineModel":function(){define(["dojo/_base/declare"],function(n){return n("davinci.html.ui.HTMLOutlineModel",null,{constructor:function(k){this.root=k;this.subscription=dojo.subscribe("/davinci/ui/modelChanged",
this,this._modelChanged)},getRoot:function(k,g){k(this.root)},getIdentity:function(k){return k.getID()},getLabel:function(k){return k.getLabel().replace("\x3c","\x26lt")},_getChildren:function(k){var g=[];"HTMLFile"!=k.elementType&&"HTMLElement"!=k.elementType||dojo.forEach(k.children,function(e){"HTMLElement"==e.elementType&&g.push(e)});return g},mayHaveChildren:function(k){return 0<k.children.length},getChildren:function(k,g,e){g(this._getChildren(k))},_modelChanged:function(){this.onChildrenChange(this.root,
this._getChildren(this.root))},destroy:function(){dojo.unsubscribe(this.subscription)}})})},"davinci/ve/VisualEditor":function(){define("dojo/_base/declare dojo/_base/lang dojo/_base/connect dojo/dom-class dojo/dom-construct dojo/promise/all ../Runtime ../Workbench ../model/Path ./metadata ./Context preview/silhouetteiframe preview/loadIndicator ../workbench/Preferences ./widget ../XPathUtils ../html/HtmlFileXPathAdapter ./utils/GeomUtils xide/utils xide/registry".split(" "),function(n,k,g,e,b,d,
h,a,m,f,q,c,p,y,u,z,A,x,w,r){return n("davinci.ve.VisualEditor",null,{deviceName:"none",_orientation:"portrait",_subscriptions:[],delite:!1,context:null,getContext:function(){return this.context},template:{},constructor2:function(a,g,h){this._pageEditor=g;this.template=h||{};this.contentPane=dijit.getEnclosingWidget(a)||r.byId(a.id);this.loadingDiv=b.create("div",{className:"loading",innerHTML:dojo.replace("\x3ctable\x3e\x3ctr\x3e\x3ctd\x3e\x3cspan\x3e\x26nbsp;\x26nbsp;\x26nbsp;\x26nbsp;\x26nbsp;\x3c/span\x3e\x26nbsp;{0}\x3c/td\x3e\x3c/tr\x3e\x3c/table\x3e",
["Loading..."])},this.contentPane.domNode.parentNode,"first");e.add(this.contentPane.domNode,"fullPane");a=b.create("div",{className:"silhouette_div_container"},this.contentPane.domNode);b.create("span",{className:"silhouetteiframe_object_container"},a);this.silhouetteiframe=new c({rootNode:a,margin:20});var k=this;this.contentPane.connect(this.contentPane,"resize",function(a){var b=dojo.query(".designCP iframe",this._pageEditor.domNode)[0];b&&b.contentDocument&&b.contentDocument.body&&(k._resizeBody(b.contentDocument.body,
a),setTimeout(function(){var a=k.getContext();a.clearCachedWidgetBounds();a.updateFocusAll();k._registerScrollHandlers()},100))}.bind(this));this._pageEditor.deferreds=d(f.getDeferreds());this._subscriptions.push(dojo.subscribe("/davinci/ui/editorSelected",this._editorSelected.bind(this)));this._subscriptions.push(dojo.subscribe("/davinci/ui/context/loaded",this._contextLoaded.bind(this)))},_setContentRaw:function(a,b,c){this.fileName=a;this.basePath=new m(a);if(this.initialSet)this.context.setSource(b,
this.context._restoreStates,this.context);else{var d=h.getUserWorkspaceUrl();0==a.indexOf("./")&&(a=a.substring(2,a.length));a=d+a;a=d;this._handles=[];d=dojo.query(".silhouette_div_container",this.contentPane.containerNode)[0];$(this.contentPane.containerNode).find(".silhouette_div_container");d={editor:this._pageEditor,visualEditor:this,containerNode:d,model:b,template:this.template,baseURL:a,iframeattrs:{"class":"silhouetteiframe_iframe"},ctx:this._pageEditor.ctx};this.context=this.template&&this.template.contextClass?
new (w.getObject(this.template.contextClass))(d):new q(d);this.context._commandStack=this._commandStack;this._commandStack._context=this.context;try{this._handles.push(dojo.connect(this.context,"activate",this,this.update))}catch(E){debugger}this._handles.push(dojo.connect(this.context,"onContentChange",this,this.onContentChange));this._handles.push(dojo.connect(this.context,"onSelectionChange",this,this.onContentChange));this.title=dojo.doc.title;this.context._setSource(b,this._connectCallback,this,
c);this.context.getFlowLayout();this.initialSet=!0}},constructor:function(a,g,h){this._pageEditor=g;this.template=h||{};this.contentPane=dijit.getEnclosingWidget(a)||r.byId(a.id);a=this.contentPane.containerNode;this.loadingDiv=b.create("div",{className:"loading",innerHTML:dojo.replace("\x3ctable\x3e\x3ctr\x3e\x3ctd\x3e\x3cspan\x3e\x26nbsp;\x26nbsp;\x26nbsp;\x26nbsp;\x26nbsp;\x3c/span\x3e\x26nbsp;{0}\x3c/td\x3e\x3c/tr\x3e\x3c/table\x3e",["Loading..."])},a.parentNode,"first");e.add(a,"fullPane");a=
b.create("div",{className:"silhouette_div_container"},a);b.create("span",{className:"silhouetteiframe_object_container"},a);this.silhouetteiframe=new c({rootNode:a,margin:20});this._pageEditor.deferreds=d(f.getDeferreds());this._subscriptions.push(dojo.subscribe("/davinci/ui/editorSelected",this._editorSelected.bind(this)));this._subscriptions.push(dojo.subscribe("/davinci/ui/context/loaded",this._contextLoaded.bind(this)))},getDevice:function(){return this.deviceName},setDevice:function(a,b){this.deviceName=
a;var c=this.getContext();c.setMobileMeta(a);b||c.setMobileTheme(a);this.silhouetteiframe.setSVGFilename("none"==a?null:"app/preview/images/"+a+".svg");c.clearCachedWidgetBounds();dojo.publish("/davinci/ui/deviceChanged",[a]);dojo.publish("/davinci/ui/repositionFocusContainer",[])},toggleOrientation:function(){"none"!=this.deviceName&&this.setOrientation("landscape"==this._orientation?"portrait":"landscape");this.getContext().clearCachedWidgetBounds()},getOrientation:function(a){return this._orientation},
setOrientation:function(b){if("none"!=this.deviceName&&this._orientation!=b){this._orientation=b;b=a.getOpenEditor();b.editorContainer&&b.editorContainer.updateToolbars&&b.editorContainer.updateToolbars();var c=this.getContext();c.setMobileOrientation(this._orientation);this.silhouetteiframe.setOrientation(this._orientation);b._visualChanged();setTimeout(function(){c.clearCachedWidgetBounds();c.updateFocusAll()},100)}},_objectPropertiesChange:function(a){if(this.isActiveEditor()){var b=this.getContext(),
c=a.command;b.getCommandStack().execute(a.compoundCommand||c);c._newId?(a=u.byId(c._newId,b.getDocument()),b.select(a)):(c=b.getSelection(),a=c.length?c[c.length-1]:void 0,1<c.length&&b.select(a));this._srcChanged()}},isActiveEditor:function(){var a=h.currentEditor;return a&&"davinci.ve.PageEditor"==a.declaredClass&&a.visualEditor==this},_stylePropertiesChange:function(a){if(this.isActiveEditor()){var b=this.getContext().getCommandForStyleChange(a);b&&(this.getContext().getCommandStack().execute(b),
b._newId&&(b=u.byId(b._newId,context.getDocument()),this.context.select(b)),this._srcChanged(),dojo.publish("/davinci/ui/widgetValuesChanged",[a]))}},_srcChanged:function(){this.isDirty=!0},getTemplate:function(){return template},destroy:function(){this._handles&&(this._focusPopup&&this._focusPopup.destroyRecursive(),delete this._focusPopup,this.context.destroy(),this._handles.forEach(dojo.disconnect),this._iframeScrollHandler&&(dojo.disconnect(this._iframeScrollHandler),delete this._iframeScrollHandler),
this._designCPScrollHandler&&(dojo.disconnect(this._designCPScrollHandler),delete this._designCPScrollHandler),this._subscriptions.forEach(dojo.unsubscribe),this._subscriptions=[])},setContent:function(a,b,c){this._onloadMessages=[];this._setContent(a,b,c)},saveAs:function(a,b,c){this._setContent(a,c)},_setContent:function(a,b,c){this._setContentRaw(a,b,c)},_connectCallback:function(b){try{if(b instanceof Error)throw b;var c=this.context,d;this.savePoint=0;try{c.activate2()}catch(F){console.error("crash in context activation! : "+
F),logError(F,"crash in context activation! : ")}d=a.createPopup({partID:"davinci.ve.visualEditor",domNode:c.getContainerNode(),keysDomNode:c.getDocument(),context:c});c.getDocument();d&&(d.adjustPosition=function(a){var b=dojo.position(c.frameNode);dojo.withDoc(c.getDocument(),function(){var a=dojo.docScroll();b.x-=a.x;b.y-=a.y});return b});this._focusPopup=a.createPopup({partID:"davinci.ve.visualEditor",domNode:c.getFocusContainer(),keysDomNode:c.getDocument(),context:c});c.getTopWidgets().forEach(function(a){a.resize&&
a.resize()});c.anyDojoxMobileWidgets=void 0;dojo.publish("/davinci/ui/context/pagebuilt",[c])}catch(F){b=F}finally{b.errorMessage?(this.loadingDiv.innerHTML=b.errorMessage||"(unknown)",console.error("error! ",b.errorMessage)):b instanceof Error?(this.loadingDiv.parentNode&&this.loadingDiv.parentNode.removeChild(this.loadingDiv),delete this.loadingDiv,dojo.publish("/davinci/ui/context/pagebuilt",[c]),console.error("error! ",b)):(this.loadingDiv.parentNode&&this.loadingDiv.parentNode.removeChild(this.loadingDiv),
delete this.loadingDiv)}},getSelectedWidget:function(){var a=this.getContext(),b=a.getSelection(),c=b.length?b[b.length-1]:void 0;1<b.length&&a.select(c);return c},getSelectedSubWidget:function(){return this._selectedSubWidget},save:function(a){if(this.context){var b=[],c=this.context.getModel();c.getText();c.setDirty(!0);c.visit({visit:function(c){"HTMLFile"!=c.elementType&&"CSSFile"!=c.elementType||!c.isDirty()||b.push(c.save(a));return!1}});b=b.concat(this.getContext().saveDynamicCssFiles(this.context.cssFiles,
a));b.length?this.savePromise=d(b):delete this.savePromise;return this.savePromise}},removeWorkingCopy:function(){},getDefaultContent:function(){return this.getTemplate()},previewInBrowser:function(){var b=this.deviceName,c=a.getOpenEditor().resourceFile.getURL(),d=[];"none"!=b&&(d=["preview\x3d1","device\x3d"+encodeURIComponent(b),"file\x3d"+encodeURIComponent(c)],c=a.location(),c+="/maqetta/preview.html?","landscape"==this._orientation&&d.push("orientation\x3d"+this._orientation));this.context.getPreference("zazl")&&
d.push("zazl\x3dtrue");d.length&&(c+="?"+d.join("\x26"));b=function(){var a=window.open(c,"preview_"+c);p(a,h.location()+require.toUrl("dojox/image/resources/images/loading.gif"),"gray")};this.savePromise?this.savePromise.then(b):b()},refresh:function(){var a=this.context,b=z.getXPath(a.getSelection()[0]._srcElement,A);a.setSource(a.model);var b=a.model.evaluate(b).getAttribute("id"),c=u.byId(b,a.getDocument());setTimeout(function(){a.select(c)},0)},_contextLoaded:function(a){a==this.getContext()&&
this._registerScrollHandlers()},_editorSelected:function(a){var b=this.getContext(),b=b?b.getFocusContainer():null;a.oldEditor==this._pageEditor&&b&&this._focusPopup&&this._focusPopup.unBindDomNode(b);a.editor==this._pageEditor&&(this._registerScrollHandlers(),b&&this._focusPopup&&this._focusPopup.bindDomNode(b));if(b=document.getElementById("visualEditorBorder"))b.style.display=a.editor&&"davinci.ve.PageEditor"==a.editor.declaredClass?"block":"none"},_resizeBody:function(a,b){var c=x.getScrollLeft(a),
d=x.getScrollTop(a);a.style.width=0<c?b.w+c+"px":"100%";a.style.height=0<d?b.h+d+"px":"100%"},_scrollHandler:function(a){(a=dojo.query(".designCP iframe",this._pageEditor.domNode)[0])&&a.contentDocument&&a.contentDocument.body&&(this._resizeBody(a.contentDocument.body,{w:dojo.style(this.contentPane.domNode,"width"),h:dojo.style(this.contentPane.domNode,"height")}),setTimeout(function(){var a=this.getContext();a.clearCachedWidgetBounds();a.updateFocusAll()}.bind(this),100))},_registerScrollHandlers:function(){if(!this._iframeScrollHandler){var a=
dojo.query(".designCP iframe",this._pageEditor.domNode)[0];a&&a.contentDocument&&a.contentDocument.body&&(this._iframeScrollHandler=dojo.connect(a.contentDocument.body.ownerDocument,"onscroll",this,this._scrollHandler))}!this._designCPScrollHandler&&(a=dojo.query(".designCP",this._pageEditor.domNode)[0])&&(this._designCPScrollHandler=dojo.connect(a,"onscroll",this,this._scrollHandler))}})})},"davinci/ve/Context":function(){define([],function(){})},"davinci/ve/VisualEditorOutline":function(){define("dojo/_base/declare dojo/_base/connect ./commands/ReparentCommand ./commands/StyleCommand ./widget ./States ../Runtime xide/factory xide/types".split(" "),
function(n,k,g,e,b,d,h,a,m){var f=n(null,{toggleMode:!0,betweenThreshold:4,showRoot:!0,dndController:"dijit.tree.dndSource",onChange:function(a){},constructor:function(a){this._context=a;this._handles=[];this._connect("activate","_rebuild");this._connect("widgetChanged","_widgetChanged")},getRoot:function(a,b){a(this._context.rootWidget||{id:"myapp",label:"application"})},getLabel:function(a){if("myapp"==a.id)return this._context.model.fileName;var c="",d=this._getWidget(a);if("xblox/RunScript"===
a.type&&d)return(c=d.domNode)&&c.script?"XBlox::"+c.script:"XBlox::"+d.dijitWidget.targetEvent;if(d.isWidget)return c=b.getLabel(d);if(c=d.type){a=this.useRichTextLabel?"\x26lt;":"\x3c";var e=this.useRichTextLabel?"\x26gt;":"\x3e",c=0===c.indexOf("html.")?a+c.substring(5)+e:0===c.indexOf("OpenAjax.")?a+c.substring(9)+e:0<c.indexOf(".")?c.substring(c.lastIndexOf(".")+1):d.label||c;(d=b.byId(d.id,this._context.getDocument()))&&(d=d.getId())&&(c+=" id\x3d"+d);return c}},_getChildren:function(a){var b=
[];this._context.rootWidget||console.error("editor context has no root widget yet!");if(!this._context.rootWidget||!a||"state"==a.type||"html.stickynote"==a.type||"html.richtext"==a.type)return[];if("myapp"==a.id||a===this._context.rootNode)b=this._context.getTopWidgets();else{var d=this._getWidget(a);d&&d.getChildren&&(b=this._getWidget(a).getChildren())}return b.filter(function(a){return"xblox/RunScript"==a.type||"xblox/CSSState"==a.type||"xblox/StyleState"==a.type?!0:a&&a.getContext&&a.getContext()&&
!a.internal&&a._srcElement}).map(this._buildItem)},__getChildren:function(a){var b=[];a&&"dijit/form/Button"==a.type&&a.dijitWidget&&dojo.forEach(a.dijitWidget.domNode.children,function(a){(a=davinci.ve.widget.getWidget(a))&&"xblox/RunScript"==a.type&&b.push(a)});return b},mayHaveChildren:function(a){return(a=this._getWidget(a))&&a.type&&0===a.type.indexOf("OpenAjax.")?!1:0<this._getChildren(a).length},getIdentity:function(a){return a?a.id:null},getChildren:function(a,b,d){b(this._getChildren(a))},
put:function(a,b){a=this._getWidget(a);b=a.getParent();this.onChildrenChange(b,this._getChildren(b));return this.getIdentity(a)},add:function(a,b){(b=b||{}).overwrite=!1;return this.put(a,b)},onDelete:function(a){},remove:function(a){this.onDelete(a)},newItem:function(a,b){},pasteItem:function(a,b,d,e,f,h){a&&d&&b&&(d="myapp"==d.id?this._context.rootWidget:this._getWidget(d),b="myapp"==b.id?this._context.rootWidget:this._getWidget(b),a=this._getWidget(a),b!=d||e||dojo.indexOf(b.getChildren(),a)<f&&
f++,a=new g(a,d,f),this._context.getCommandStack().execute(a))},checkItemAcceptance:function(a,b,d){switch(d){case "before":case "after":return!0;default:return a=dijit.getEnclosingWidget(a).item,a=this.tree.model._getWidget(a),a.getContainerNode&&a.getContainerNode()||"myapp"==a.id}},onChildrenChange:function(a,b){},_rebuild:function(){if(!this._skipRefresh){var a=this._context.rootNode;if(a)this.onChildrenChange(this._buildItem(a),this._getChildren(a))}},_widgetChanged:function(b,c,d){try{b===this._context.WIDGET_ADDED?
this.add(c):b===this._context.WIDGET_REMOVED?this.remove(c):b===this._context.WIDGET_MODIFIED?(this.onChange(c),this.onChildrenChange(c,this._getChildren(c))):b===this._context.WIDGET_REPARENTED?(this.remove(c),this.put(c,{overwrite:!0,parent:d[1]})):b===this._context.WIDGET_ID_CHANGED&&(this.remove({id:d}),this.add(c))}catch(y){console.error("VisualEditorOutline._widgetChanged: e \x3d "+y)}a.publish(m.EVENTS.ON_WIDGET_CHANGED,{type:b,widget:c,args:d},this)},toggle:function(a,b,d){a=this._getWidget(a);
var c=a.getHelper(),e=!0;c&&c.onToggleVisibility&&(e=c.onToggleVisibility(a,b));return e?(this._toggle(a,b,d),!0):!1},_toggle:function(a,b,f){b=b?"none":"";var c;if(f=d.getFocus(a.domNode.ownerDocument.body))c=f.state;else{f=d.getStatesListCurrent(a.domNode);for(var g=0;g<f.length;g++)if(f[g]){c=f[g];break}}a=new e(a,[{display:b}],c);this._context.getCommandStack().execute(a)},shouldShowElement:function(a,b){return"toggleNode"==a?"states"!=b.type&&"myapp"!=b.id:!0},_getToggledItemsAttr:function(){var a=
[],b;for(b in this.toggledItems)a.push(b);return a},isToggleOn:function(a){a=this._getWidget(a);var b=a.getHelper();return b&&b.isToggleOn?b.isToggleOn(a):"none"===a.domNode.style.display},_getWidget:function(a){return a?b.byId(a.id):null},_buildItem:function(a){if(a)return{id:a.id,type:a.type}},_connect:function(a,b){this._handles.push(k.connect(this._context,a,this,b))},destroy:function(){this._handles.forEach(k.disconnect)}});return n("davinci.ve.VisualEditorOutline",null,{toolbarID:"davinci.ve.outline",
_outlineMode:"design",constructor:function(a){this._editor=a;this._context=a.visualEditor.context;this._handles=[];this._connect("onSelectionChange","onSelectionChange");this._connect("deselect","deselect");this._widgetModel=new f(this._context);k.subscribe("/maqetta/appstates/state/changed/end",this,function(a){if("davinci.themeEditor.ThemeEditor"!==("undefined"!==typeof davinci&&h.currentEditor&&h.currentEditor.declaredClass)&&this._tree&&(a=a&&a.node&&a.node._dvWidget))for(a=a.getChildren();a.length;){var b=
a.shift();if(b){var c="none"!==b.domNode.style.display;this._tree&&this._tree.toggleNode(b,!c);a=a.concat(b.getChildren())}}})},getActionsID:function(){if("design"===this._outlineMode)return"davinci.ve.VisualEditorOutline"},_connect:function(a,b){this._handles.push(k.connect(this._context,a,this,b))},switchDisplayMode:function(a){this._outlineMode=a;this._outlineView.createTree()},getModel:function(){switch(this._outlineMode){case "design":this._model=this._widgetModel;break;case "source":this._model=
this._srcModel}return this._model},getSelectedItem:function(){return this._tree&&this._tree._getSelectedItemAttr()},onSelectionChange:function(a,b){"design"==this._outlineMode&&(a=a||this._context.getSelection())&&this._tree&&this._tree.selectNode(a,b)},deselect:function(){this._tree&&this._tree&&this._tree.deselectAll()},getIconClass:function(a,b){return(a=a.type)?"xblox/RunScript"==a?"fa fa-play-circle-o":b?"fa fa-circle-thin":"fa fa-circle":b?"fa fa-circle-thin":"fa fa-circle"}})})},"davinci/ve/prefs/HTMLEditPreferences":function(){define("dojo/_base/declare dijit/layout/ContentPane dijit/_TemplatedMixin dijit/form/CheckBox dijit/form/TextBox dijit/form/Select davinci/lang/ve/common dojo/text!./HtmlEditPreferences.html".split(" "),
function(n,k,g,e,b,d,h,a){return n([k,g],{templateString:a,postMixInProperties:function(){this._loc=h},postCreate:function(){this._snap=new e({},this.snapNode);this._showPossibleParents=new e({},this.showPossibleParentsNode);this._cssOverrideWarn=new e({},this.cssOverrideWarn);this._absoluteWidgetsZindex=new b({},this.absoluteWidgetsZindex);this._zazl=new e({},this.zazl);this.containerNode||(this.containerNode=this.domNode)},getDefaults:function(){},setDefaults:function(){},doApply:function(){},getPreferences:function(){return{snap:this._snap.checked,
showPossibleParents:this._showPossibleParents.checked,cssOverrideWarn:this._cssOverrideWarn.checked,absoluteWidgetsZindex:this._absoluteWidgetsZindex.value,zazl:this._zazl.checked}},setPreferences:function(a){a=a||{};this._check(this._snap,!!a.snap);this._check(this._showPossibleParents,!!a.showPossibleParents);this._check(this._cssOverrideWarn,!!a.cssOverrideWarn);this._absoluteWidgetsZindex.set("value",a.absoluteWidgetsZindex);this._check(this._zazl,!!a.zazl)},_check:function(a,b){a.set("checked",
b)},save:function(a){davinci.ve._preferences=a}})})},"davinci/lang/ve/common":function(){define([],function(){return{search:"Search",filter:"Filter","new":"New",errorSavingFile:"Error saving file: ${0} details: ${1}",palette:"palette",closeAllEditors:"Close all tabs",undo:"Undo",redo:"Redo",copy:"Copy",paste:"Paste",cut:"Cut","delete":"Delete",surround:"Surround",properties:"Properties",styles:"Styles",events:"Events",preferences:"Preferences",addPane:"Add Pane",addColumn:"Add Column",addRow:"Add Row",
removeColumn:"Remove Column",removeRow:"Remove Row",joinColumn:"Join Column",joinRow:"Join Row",splitColumn:"Split Column",splitRow:"Split Row",alignLeft:"Align Left",alignRight:"Align Right",alignTop:"Align Top",alignBottom:"Align Bottom",show:"Show",hide:"Hide",addMenuItem:"Add Menu Item",addSubMenu:"Add Sub Menu",addMenuBarItem:"Add MenuBar Item",addPopupMenuBar:"Add Popup MenuBarItem",ok:"OK",cancel:"Cancel",page:"Page",title:"Title",metaInfo:"Meta Info",httpEquiv:"HTTP Equiv",style:"Style",theme:"Theme",
styleSheets:"Style Sheets",rules:"Rules",url:"URL",externalScripts:"External Scripts",modules:"Modules",name:"Name",value:"Value",add:"Add",remove:"Remove",staticOptions:"Static Options",axisOptions:"Axis Options",series:"Series",axis:"Axis",option:"Option",selected:"Selected",staticItems:"Static Items",dataStore:"Data Store",query:"Query",fields:"Fields",field:"Field",label:"Label",width:"Width",edit:"Edit",key:"Key",rootId:"Root ID",rootLabel:"Root Label",childrenAttrs:"Children Attributes",items:"Items",
type:"Type",widget:"Widget",position:"Position",size:"Size",layout:"Layout",visual:"Visual",text:"Text",border:"Border",table:"Table",list:"List",aural:"Aural",others:"Others",onLoad:"Load",onUnload:"Unload",script:"Script",methodCall:"Method Call",serviceCall:"Service Call",object:"Object",method:"Method",parameters:"Parameters",result:"Result",service:"Service",content:"Content",source:"Source",target:"Target",property:"Property",flowLayout:"Flow Layout",snapToNearestWidget:"Snap to nearest widget",
showPossibleParents:"When dragging, show possible parents",warnOnCSSOverride:"Warn on CSS Override",absoluteWidgetsZindex:"z-index for sketch mode",widgetPaletteLayout:"In Palette, display widgets as",widgetPaletteShow_Icons:"icons",widgetPaletteShow_List:"list",liveEdit:"Live Edit",zazl:"Enable \x3ca href\x3d'http://zazl.org' target\x3d'_blank'\x3eZazl Optimizer\x3c/a\x3e",selectorPrefix:"Selector Prefix",component:"Component",alternates:"Alternates",alternateWidgets:"Alternate widgets:",howToChooseAlternate:"To choose alternate widget, click-select current widget, then click on up arrow icon.",
summary:"Summary:",description:"Description:",showSuggestedWidgets:"Suggested Widgets",showAllWidgets:"All Widgets",MoreIconTitleString:"Click here to see alternative similar widgets",HelpIconTitleString:"Click here to see descriptive info about this widget",__dummy__:""}})},"davinci/commands/OrderedCompoundCommand":function(){define(["dojo/_base/declare","davinci/commands/CompoundCommand"],function(n,k){return n("davinci.commands.OrderedCompoundCommand",k,{undo:function(){if(this._commands)for(var g=
0;g<this._commands.length;g++)this._commands[g].undo()}})})},"davinci/version":function(){define([],"10")},"davinci/ve/utils/pseudoClass":function(){define([],function(){return{MAQETTA_PSEUDO_CLASS:"maqettaPseudoClass",replace:function(n){return"hover link visited active focus first-letter first-line first-child before after".split(" ").reduce(function(k,g){return k.replace(new RegExp(":"+g,"g"),".maqettaPseudoClass"+g[0].toUpperCase()+g.slice(1))},n)}}})},"davinci/ui/dnd/DragManager":function(){define(["dojo/_base/declare",
"dojo/_base/array","dojo/_base/connect","dojo/mouse"],function(n,k,g){n=n("",null,{disabled:!1,currentDragSource:null,currentDropTarget:null,dropAcceptable:!1,dropTargets:null,dragTriggered:!1,currentDomElement:null,_connectors:null,_moveConnector:null,document:null,documentX:0,documentY:0,_ABSOLUTE_THRESHOLD:3,_STATIC_THRESHOLD:40,constructor:function(){this.dropTargets=[];this._connectors=[g.connect(dojo.doc,"onkeydown",this,"onKeyDown"),g.connect(dojo.doc,"onmouseover",this,"onMouseOver"),g.connect(dojo.doc,
"onmouseout",this,"onMouseOut"),g.connect(dojo.doc,"onmousedown",this,"onMouseDown"),g.connect(dojo.doc,"onmouseup",this,"onMouseUp")]},destroy:function(){k.forEach(this._connectors,dojo.disconnect)},onKeyDown:function(b){27==b.keyCode&&this.currentDragSource&&(this.dropAcceptable=!1,this.onMouseUp(b))},onMouseDown:function(b,d){if(!(this.disabled||this.dragTriggered||!dojo.mouseButtons.isLeft(b)||b.metaKey||b.ctrlKey||this.dragTriggered)&&(d=this.currentDragSource=d||this.findDragSource(b))){d.onDragDown(b);
d=0;for(var e=this.dropTargets.length;d<e;d++){var a=this.dropTargets[d];if(!a.disabled)a.onDragDown(b)}b.preventDefault();this._moveConnectors=[g.connect(dojo.doc,"onmousemove",this,"onMouseMove")];this.document&&this.document!=dojo.doc&&(this._moveConnectors.push(g.connect(this.document,"onmousemove",this,"onMouseMove")),this._moveConnectors.push(g.connect(this.document,"onmouseover",this,"onMouseOver")),this._moveConnectors.push(g.connect(this.document,"onmouseout",this,"onMouseOut")),this._moveConnectors.push(g.connect(this.document,
"onmouseup",this,"onMouseUp")))}},onMouseMove:function(b){b.preventDefault();dojo.isIE&&(b.pageX-=2,b.pageY-=2);if(b.target==this.document||b.target.ownerDocument==this.document)b.documentX=this.documentX,b.documentY=this.documentY,b.documentX-=this.document.documentElement.scrollLeft,b.documentY-=this.document.documentElement.scrollTop;var d=b.dragSource=this.currentDragSource;if(!this.dragTriggered){var e=b.pageX-d.pageX,a=b.pageY-d.pageY,e=Math.sqrt(e*e+a*a);if("absolute"==d.positioning){if(e<
this._ABSOLUTE_THRESHOLD)return}else if(e<this._STATIC_THRESHOLD)return;this.dragTriggered=!0;d.onDragStart(b);e=0;for(a=this.dropTargets.length;e<a;e++){var g=this.dropTargets[e];g.disabled||(b.dropTarget=g,g.onDragStart(b))}this.onMouseOver(b)}d.onDragMove(b);(g=this.currentDropTarget)?this.dropAcceptable&&(b.dropTarget=g,g.onDragMove(b,this.dragObjects)):this.dropAcceptable=!1},onMouseOver:function(b){this.currentDomElement=b.target;if(this.dragTriggered){var d=this.currentDragSource;if(d){b.dragSource=
d;var e=this.findDropTarget(this.currentDomElement,d);e&&d.domNode==e.domNode||(e!=this.currentDropTarget&&(this.currentDropTarget&&(b.dropTarget=this.currentDropTarget,this.currentDropTarget.onDragOut(b)),e&&(b.dropTarget=e,this.dropAcceptable=e.onDragOver(b))),this.currentDropTarget=e)}}},onMouseOut:function(b){},onMouseUp:function(b){if(!this.ignoreMouseUp){k.forEach(this._moveConnectors,dojo.disconnect);if(this.dragTriggered){for(var d=0,e=this.dropTargets.length;d<e;d++){var a=this.dropTargets[d];
a.disabled||(b.dropTarget=a,a.onDragEnd(b))}d=this.currentDragSource;e=this.currentDropTarget;b.dragSource=d;b.dropTarget=e;if(d&&(e?(e.onDropStart(b),this.dropAcceptable?(a=e.onDrop(b),e.onDragOut(b),void 0==a||b.dragStatus||(b.dragStatus=a?"dropSuccess":"dropFailure")):(e.onDragOut(b),b.dragStatus="dropFailure")):b.dragStatus="dropFailure",d.onDragEnd(b),e))e.onDropEnd(b)}this._resetStatus()}},_resetStatus:function(){this.currentDragSource=this.currentDropTarget=null;this.dragTriggered=this.dropAcceptable=
!1;this.currentDomElement=null},findDragSource:function(b){for(b=b.target;b&&b!=dojo.doc.body;b=b.parentNode)if(b.dragSource&&!b.dragSource.disabled)return b.dragSource;return null},findDropTarget:function(b,d){for(var e=null,a=null;null!=b&&b!=dojo.doc.body;b=b.parentNode){var g=b.dropTarget;if(g&&!g.disabled&&g.accepts(d)){e=g;e.nodeUnderMouse=a;break}b.dragSource&&!b.dragSource.disabled&&(a=b)}return e},registerDropTarget:function(b){this.dropTargets.push(b)},unregisterDropTarget:function(b){for(var d=
0,e=this.dropTargets.length;d<e;d++)if(this.dropTargets[d]==b){this.dropTargets.splice(d,1);break}}});var e=new n;e.Module=n;return e})},"davinci/model/resource/Folder":function(){define(["dojo/_base/declare","dojo/_base/xhr","davinci/Runtime","davinci/model/resource/Resource","davinci/model/resource/File"],function(n,k,g,e,b){var d=n("davinci.model.resource.Folder",e,{serviceClass:"XIDE_Directory_Service",workspaceMount:"/ws/",constructor:function(b,a){this.elementType="Folder";this.name=b;this.parent=
a},reload:function(){this._isLoaded=!1},createResource:function(e,a,g,f){var h;null!=e?h=a?new d(e,this):new b(e,this):(h=this,a="Folder"==this.elementType);var c=this;if(!g){g=""+this.getPath();"."==g&&(g=""+this.workspaceMount);g=g.replace("./",this.workspaceMount);g=this.serviceClass;a=a?"mkDir":"mkFile";if(!this.serviceObject[g][a])return console.error("_createResource : server doesnt support :"+a),this;this.serviceObject[g][a](this.workspaceMount,h.getPath()).then(function(a){if(!0===a&&null!=
e||"The file already exists"===a)return c.children.push(h),delete h.libraryId,delete h.libVersion,delete h._readOnly,dojo.publish("/davinci/resource/resourceChanged",["created",h]),f&&f(h),h;if("OK"!=a)throw"Folder.createResource failed: name\x3d"+e+"response\x3d"+a;delete h.libraryId;delete h.libVersion;delete h._readOnly;f(c);if(!f)debugger})}},getChildren2:function(b,a){if(this._isLoaded)b(this.children);else if(this._loadingCallbacks)this._loadingCallbacks.push(b);else{this._loadingCallbacks=
[];this._loadingCallbacks.push(b);b=""+this.getPath();"."==b&&(b="/ws/");var d=this.serviceClass;if(!this.serviceObject)debugger;if(!this.serviceObject[d])debugger;this.serviceObject.sync=!0;this.serviceObject[d].ls(this.workspaceMount,b).then(function(a){this.setChildrenSync(a);dojo.forEach(this._loadingCallbacks,function(a){a(this.children)},this);delete this._loadingCallbacks}.bind(this),a)}},getChildren:function(b,a){if(this._isLoaded)b.call(null,this.children);else if(this._loading)this._loading.then(function(){b.call(null,
this.children)}.bind(this),a);else{console.error("list files : "+this.getPath());var d=""+this.getPath();"."==d&&(d="/ws/");d=d.replace("./",this.workspaceMount);this.serviceObject[this.serviceClass].ls(d).then(function(a){this.setChildren(a);this._isLoaded=!0;b.call(null,this.children);delete this._loading}.bind(this),a)}},getChildrenSync:function(b,a){this._isLoaded?b(this.children):this._loadingCallbacks?this._loadingCallbacks.push(b):(this._loadingCallbacks=[],this._loadingCallbacks.push(b),console.error("list files : "+
this.getPath()),b=this.getPath(),"./project1"===b&&console.error("gotcha"),b=""+b,"."==b&&(b="/ws/"),b=b.replace("./","/ws/"),g.serverJSONRequest({url:"cmd/listFiles.php",content:{path:this.getPath(),basePath:"./"},sync:a,load:dojo.hitch(this,function(a,b){this.setChildrenSync(a);dojo.forEach(this._loadingCallbacks,function(a){a(this.children)},this);delete this._loadingCallbacks})}))},setChildren:function(b){this.children=[];this._appendFiles(b)},setChildrenSync:function(b){this.children=[];this._appendFiles(b,
!0)},_appendFiles:function(e,a){e.forEach(function(e){var f=a?this.getChildSync(e.name):this._getChild(e.name),g=null!=f;e.isDir||e.isLib?(g||(f=new d(e.name,this)),e.isLib&&(f.isLibrary=!0)):g||(f=new b(e.name,this));f.link=e.link;f.isNew=e.isNew;f._readOnly=e.readOnly;f.setDirty(e.isDirty);e.libraryId&&(f.libraryId=e.libraryId,f.libVersion=e.libVersion);g||this.children.push(f)},this);this._isLoaded=!0},getMarkers:function(b,a){var d=[];this.visit({visit:function(e){if("File"==e.elementType)markers=
e.getMarkers(b),d.concat(markers);else if(!a)return!0}},!0);return d},getChildSync:function(b){if(!this._isLoaded||1>this.children.length)this._isLoaded=!1,this.getChildrenSync(function(a){this.children=a},!0);return this._getChild(b)},getChild:function(b){if(!this._isLoaded||1>this.children.length)this._isLoaded=!1,this.getChildren2(function(a){this.children=a},!0);return this._getChild(b)},_getChild:function(b){if(!this.__CASE_SENSITIVE){if(!b||null==b.toLowerCase)debugger;b=b.toLowerCase()}var a;
this.children.some(function(d){var e=d.getName();this.__CASE_SENSITIVE||(e=e.toLowerCase());(e=e==b)&&(a=d);return e});return a}});return d})},"davinci/model/resource/Resource":function(){define("dojo/_base/declare dojo/_base/xhr dojo/_base/connect dojo/Deferred davinci/Runtime davinci/model/Model davinci/model/Path xide/manager/ServerActionBase".split(" "),function(n,k,g,e,b,d,h,a){return n("davinci.model.resource.Resource",[d,a],{singleton:!0,sync:!1,workspaceMount:"/ws/",_initService:function(){var a=
this.findServiceUrl(this.declaredClass);a&&(this.serviceUrl=a);this.inherited(arguments)},constructor:function(){this.elementType="Resource";this.name="";this.parent=null;this._id=dijit.getUniqueId("maqFileResource");this.init()},getName:function(){return this.name},getPath:function(){return this.parent?this.parent.getPath()+"/"+this.name:this.name},readOnly:function(){return this.hasOwnProperty("_readOnly")?this._readOnly||null!=this.parent&&this.parent.readOnly():this.parent?this.parent.readOnly():
!1},getURL:function(){var a=this.getPath();0==a.indexOf("./")&&(a=a.substring(2,a.length));return b.getUserWorkspaceUrl()+a},rename:function(a){var b=(new h(this.getPath())).removeLastSegments().append(a);return k.get({url:"cmd/rename",handleAs:"text",content:{oldName:this.getPath(),newName:b.toString()}}).then(function(){this.name=a;g.publish("/davinci/resource/resourceChanged",["renamed",this])}.bind(this))},getParentFolder:function(){return"File"==this.elementType?this.parent:this},isVirtual:function(){return!!this.libraryId},
visit:function(a,b){var d=a.visit(this);this._isLoaded||"Folder"!=this.elementType||b?this.children&&!d&&dojo.forEach(this.children,function(c){c.visit(a,b)}):this.getChildren(dojo.hitch(this,function(){dojo.forEach(this.children,function(c){c.visit(a,b)})}))},deleteResource:function(a){var b=""+this.getPath();"."==b&&(b=""+this.workspaceMount);var b=b.replace("./",this.workspaceMount),d=this.serviceClass,c="Folder"==this.elementType?"deleteDirectory":"deleteFile",h=function(){var a=this.getName();
this.parent.children.some(function(b,c,d){if(b.getName()==a)return d.splice(c,1),!0});g.publish("/davinci/resource/resourceChanged",["deleted",this])}.bind(this);a?(a=new e,h(),a.resolve()):a=this.serviceObject[d][c](b).then(h,function(){});return a},getId:function(){return this._id}})})},"davinci/model/resource/File":function(){define("dojo/_base/declare davinci/Runtime davinci/model/resource/Resource davinci/model/resource/Marker davinci/ve/utils/URLRewrite xide/utils".split(" "),function(n,k,g,
e,b,d){return n("davinci.model.resource.File",g,{serviceClass:"XIDE_Directory_Service",mount:"/ws/",getMountPoint:function(){return this.mount},constructor:function(b,a){this.elementType="File";this.name=b;this.parent=a;this.markers=[];this.extension=b.substr(b.lastIndexOf(".")+1)},getExtension:function(){return this.extension},clearMarkers:function(){this.markers=[]},addMarker:function(b,a,d){this.markers.push(new e(this,b,a,d))},getMarkers:function(b){var a=[];if(this.markers)for(var d=0;d<this.markers.length;d++){var e=
this.markers[d];b?"string"==typeof b?e.type==b&&a.push(e):dojo.forEach(b,function(b){b==e.type&&a.push(e)}):a.push(e)}return a},setContents:function(b,a){this.isNew&&!a&&(this.isNew=!1);var d=(a=!1,""),e=encodeURI(this.getPath()+d);return this.serviceObject[this.serviceClass].set(this.getMountPoint(),e,b).then(function(b){this.dirtyResource=a;dojo.publish("/davinci/resource/resourceChanged",["modified",this]);return this}.bind(this),function(a){console.error("An error occurred: davinci.model.resource.File.prototype.setContents "+
a+" : "+e);return a})},getContentSync:function(){return k.serverJSONRequest({url:b.encodeURI(this.getURL()),handleAs:"text",sync:!0})},getContent:function(){return this.serviceObject[this.serviceClass].get(d.buildPath(this.getMountPoint(),encodeURI(this.getPath())),!1,!1)},removeWorkingCopy:function(){k.serverJSONRequest({url:k.cmdOffset+"cmd/removeWorkingCopy",handleAs:"text",content:{path:this.getPath()},sync:!0});this.isNew&&this.deleteResource(!0)}})})},"davinci/model/resource/Marker":function(){define(["dojo/_base/declare",
"davinci/model/resource/Resource"],function(n,k){return n("davinci.model.resource.Marker",k,{constructor:function(g,e,b,d){this.resource=g;this.type=e;this.line=b;this.text=d}})})},"davinci/ve/input/SmartInput":function(){define("dojo/_base/declare dojo/dom-geometry davinci/ve/commands/ModifyRichTextCommand dojox/html/entities davinci/lang/ve dijit/lang/_common xide/registry".split(" "),function(n,k,g,e,b,d,h){return n("davinci.ve.input.SmartInput",null,{property:null,_X_MOVE_RANGE:10,_Y_MOVE_RANGE:10,
_POINTER_TOP_OFFSET:-13,multiLine:"false",displayOnCreate:"true",_connection:[],getHelpText:function(){return this.helpText?this.helpText:this.isHtmlSupported()?b.smartInputHelp1:b.smartInputHelp2},isHtmlSupported:function(){this.supportsHTML||("html"==this._widget.type.match("^html")?this.supportsHTML="true":this.supportsHTML="false");return"boolean"===typeof this.supportsHTML?this.supportsHTML:"true"===this.supportsHTML},parse:function(a){return a},parseItems:function(a){this.trim&&(a=dojo.trim(a));
return a.match(/[^\\][\r\n]/)?this.parseItemsInRows(a):this.parseItemsInColumns(a)},parseItemsInRows:function(a){a=this.splitRows(a);for(var b=a.length,d=0;d<b;d++){var e=a[d],e=this.parseItem(e);a[d]=e}return a},parseItemsInColumns:function(a){a=this.splitColumns(a);for(var b=a.length,d=0;d<b;d++){var e=a[d],e=this.parseItem(e);a[d]=e}return a},parseGrid:function(a){a=this.splitRows(a);for(var b=a.length,d=0;d<b;d++){var e=this.parseItemsInColumns(a[d]);a[d]=e}return a},parseItem:function(a){var b=
null,d=a,e=a.match(/^([-~!>|(*)[+\]]*) ?(.*)$/);e&&(b=e[1],d=e[2]);var e=0,c=!1,g=!1;if(b)for(var h=0;h<b.length;h++)switch(b[h]){case "-":case "~":case "!":c=!0;break;case "\x3e":e++;break;case "*":case "+":g=!0}return{original:a,specialChars:b,text:d,indent:e,disabled:c,selected:g}},splitRows:function(a){var b=[],d,e="",c=!1;for(d=0;d<a.length;d++){var g=a.charAt(d);switch(g){case "\\":c&&(e+=g);c=!c;break;case "r":c?(e+="\r",c=!1):e+=g;break;case "n":c?(e+="\n",c=!1):e+=g;break;case "\r":case "\n":c?
(e+=g,c=!1):(this.trim&&(e=dojo.trim(e)),b.push(e),e="");break;default:e+=g,c=!1}}e&&(this.trim&&(e=dojo.trim(e)),b.push(e));return b},splitColumns:function(a){var b=[],d,e="",c=!1;for(d=0;d<a.length;d++){var g=a.charAt(d);switch(g){case "\\":c&&(e+=g);c=!c;break;case "r":c?(e+="\r",c=!1):e+=g;break;case "n":c?(e+="\n",c=!1):e+=g;break;case ",":c?(e+=g,c=!1):(this.trim&&(e=dojo.trim(e)),b.push(e),e="");break;default:e+=g,c=!1}}e&&(this.trim&&(e=dojo.trim(e)),b.push(e));return b},serializeItems:function(a){return"columns"==
this.format?this.serializeColumns(a):this.serializeRows(a)},serializeColumns:function(a){for(var b=0;b<a.length;b++){var d=a[b],d=d.replace(/\\/g,"\\\\");a[b]=d.replace(/,/g,"\\,")}return a.join(", ")},serializeRows:function(a){for(var b=0;b<a.length;b++){var d=a[b],d=d.replace(/\\/g,"\\\\");a[b]=d.replace(/\n/g,"\\\n")}return a.join("\n")},inlineEditActive:function(){return!(!this._inline||"none"==this._inline.style.display||!this._inline.eb)},show:function(a){this._widget=davinci.ve.widget.byId(a);
this._inline||this._createInline();a=dojo.hitch(this,function(a){this._inline.style.display="block";this.setFormat(a);a=e.decode(a,[["\x26","amp"],['"',"quot"],["\x3c","lt"],["\x3e","gt"]]);this._inline.eb.set("value",String(a));this.updateFormats();this.help(!1);dijit.selectInputText(this._inline.eb.textbox);this.updateSimStyle();this._inline.eb.textbox.focus()});var b=this._node(this._widget),d=this.property,g="maq_innerText"===d?"innerHTML":d,c;d&&(b?c=dojo.attr(b,g):"innerHTML"===g||"textContent"==
g?(c=this._widget._srcElement.getElementText(this._context),c=c.replace(/\s+/g," ")):c=this._widget.attr(d));this.serialize?this.serialize(b||this._widget,a,c):d&&a(c)},_createInline:function(){},_connectHelpDiv:function(){var a=dojo.byId("davinci.ve.input.SmartInput_img_help");this._connection.push(dojo.connect(a,"onclick",this,"toggleHelp"));this._connection.push(dojo.connect(dijit.byId("davinci.ve.input.SmartInput_ok"),"_onSubmit",this,"onOk"));this._connection.push(dojo.connect(dijit.byId("davinci.ve.input.SmartInput_cancel"),
"onClick",this,"onCancel"))},_findSmartInputContainer:function(a){return document.body},_loading:function(a,b){this._widget&&this._widget._edit_context||console.error("have no widget");var d=this._widget._edit_context.frameNode,e=d.ownerDocument,c=e.createElement("div"),g=this._findSmartInputContainer(d);if(g){g.appendChild(c);this._loadingDiv=c;dojo.addClass(c,"smartInputLoading");c=e.createElement("div");c.id="ieb";dojo.addClass(c,"inlineEdit dijitTooltipContainer");e=e.createElement("div");e.id=
"iebPointer";this._inline=c;g.appendChild(c);g.appendChild(e);var m=new dojo.dnd.Moveable("ieb");this._connection.push(dojo.connect(m,"onMoveStart",this,"onMoveStart"));this._connection.push(dojo.connect(m,"onMoveStop",this,"onMoveStop"));this._inline=new ContentPane({},c);c=h.byId("editorsStackContainer").domNode;h.byId("editorsStackContainer");c=k.position(c);this._loadingDiv.style.position="absolute";this._loadingDiv.style.left=c.x+"px";this._loadingDiv.style.top=c.y+"px";this._loadingDiv.style.width=
c.w+"px";this._loadingDiv.style.height=c.h+"px";var c=this._widget.getMarginBox(),m=dojo.position(d),n=dojo.position(g),d=m.x-n.x+g.scrollLeft-1,m=m.y-n.y+g.scrollTop-1,z=g.clientWidth,n=26,A=0;c.y+a+26<g.clientHeight?(n=c.y+26,dojo.addClass(e,"inlineEditConnectorBelow")):0<c.y-a?(n=c.y-a,A=a+12):n=26;a="0";c.x+b+20<z?a=c.x:c.x+b>z&&(b=c.x-b+c.w,0>b&&(b=0),a=b);a+=d;n+=m;this._inline._setStyleAttr({display:"block",top:n+"px",left:a+"px",padding:"1px",overflow:"hidden",backgroundImage:"none"});this._startTop=
n;this._startLeft=a;dojo.style(e,"left",c.x+20+d+"px");dojo.style(e,"top",n+A+this._POINTER_TOP_OFFSET+"px")}},handleEvent:function(a){switch(a.keyCode){case 13:var b=this.multiLine;if(!b||"false"==b||13==this._lastKeyCode||a.ctrlKey)this.onOk();else if(a.which==dojo.keys.ENTER&&a.ctrlKey)this.onOk();break;case 27:this.onCancel();break;default:this.updateFormats()}this._lastKeyCode=a.keyCode;this.updateSimStyle()},onOk:function(a){this.hide()},onCancel:function(a){this.hide(!0)},onMoveStart:function(a){dojo.style("iebPointer",
"display","none")},onMoveStop:function(a){var b=dojo.style("ieb","left");a=dojo.style("ieb","top");b=this._startLeft-b;a-=this._startTop;a<this._Y_MOVE_RANGE&&a>-this._Y_MOVE_RANGE?(dojo.style("iebPointer","display",""),dojo.style("iebPointer","top",this._startTop+this._POINTER_TOP_OFFSET+a+"px"),b<this._X_MOVE_RANGE&&b>-this._X_MOVE_RANGE?dojo.style("iebPointer","display",""):dojo.style("iebPointer","display","none")):dojo.style("iebPointer","display","none")},stopEvent:function(a){a.stopPropagation();
this.updateSimStyle()},stopEvent_Intercept_Enter:function(a){this.stopEvent(a);13!=a.keyCode||this.multiLine||a.preventDefault()},_node:function(){var a,b=this.path,d=this.selector;if(b||d)a=this._widget.domNode,b&&(a=dojo.getObject(b,!1,this._widget)),d&&(a=dojo.query(d,a)[0]);return a},updateWidget:function(a){if(!this._widget._destroyed){this.parse&&(a=this.parse(a));var b=this._node(this._widget),d=this._widget.getContext(),e=this.property,c="maq_innerText"===e?"innerHTML":e;if(this.update){if(a=
this.update(b||this._widget,a,e))this._widget=a;d.select(this._widget,null,!1)}else if(e){if(b)dojo.attr(b,c,a);else{b={};a&&"string"==typeof a&&(a=a.replace(/\n/g,""));var h=null;"textContent"==e?h=a:b[e]=a;"innerHTML"===c?(b.richText=b[e],delete b[e],a=new g(this._widget,b,null,d)):a=new davinci.ve.commands.ModifyCommand(this._widget,b,h,d);this._widget._edit_context.getCommandStack().execute(a);this._widget=a.newWidget;this._widget._edit_context._focuses[0]._selectedWidget=this._widget}d.select(this._widget,
null,!1)}}},hide:function(a){if(this._inline){for(var b;connection=this._connection.pop();)connection&&dojo.disconnect(connection);var d=this._findSmartInputContainer(this._widget._edit_context.frameNode);if(d&&(this._loadingDiv&&d.removeChild(this._loadingDiv),"none"!=this._inline.style.display&&this._inline.eb)){this._value=b=this._inline.eb.get("value");this._format=this.getFormat();this._inline.style.display="none";this._inline.eb&&(this._inline.eb.destroyRecursive(),delete this._inline.eb);this._inline.destroyRecursive();
delete this._inline;var g=d.ownerDocument.getElementById("iebPointer");d.removeChild(g);null==b||a||(this.disableEncode||"text"!==this._format||(b=e.encode(b)),this.updateWidget(b));this._widget.getContext().getDocument().defaultView.focus()}}},getFormat:function(){var a=dijit.byId("davinci.ve.input.SmartInput_radio_html"),b="text";a&&a.checked&&(b="html");return b},containsHtmlMarkUp:function(a){return 0<dojo.create("div",{innerHTML:a}).children.length},toggleHelp:function(){var a=dojo.byId("davinci.ve.input.SmartInput_img_help");
dojo.hasClass(a,"inlineEditHelpSelected")?this.help(!1):this.help(!0);dojo.toggleClass(a,"inlineEditHelpSelected")},setFormat:function(a){var b=dijit.byId("davinci.ve.input.SmartInput_radio_html"),d=dijit.byId("davinci.ve.input.SmartInput_radio_text");a=dojo.create("div",{innerHTML:a}).children.length?"html":"text";"html"===a?(b.set("checked",!0),d.set("checked",!1)):(b.set("checked",!1),d.set("checked",!0));this._format=a},help:function(a){var b=dojo.byId("davinci.ve.input.SmartInput_div_help");
dojo.byId("davinci.ve.input.SmartInput_radio_div");a?dojo.style(b,"display",""):dojo.style(b,"display","none")},updateFormats:function(){var a=this._inline.eb.get("value"),d=!0;this.containsHtmlMarkUp(a)&&(d=!1);this._widget.getContext().getDojo();var f=dojo.byId("davinci.ve.input.SmartInput_radio_text_width_div"),a=e.encode(a);f.innerHTML='\x3cdiv class\x3d"dojoxEllipsis"\x3e'+dojo.replace("Plain text ({0})",[a])+"\x3c/div\x3e";a=dojo.byId("davinci.ve.input.SmartInput_radio_html_width_div");a.innerHTML=
'\x3cdiv id\x3d"davinci.ve.input.SmartInput_radio_html_div" class\x3d"dojoxEllipsis"\x3e'+b.htmlMarkup+"\x3c/div\x3e";var g=dijit.byId("davinci.ve.input.SmartInput_radio_html"),c=dijit.byId("davinci.ve.input.SmartInput_radio_text"),h=dojo.byId("davinci.ve.input.SmartInput_table");g.setDisabled(d);c.setDisabled(d);d?(dojo.addClass(f,"inlineEditDisabled"),dojo.addClass(a,"inlineEditDisabled"),g.set("checked",!1),c.set("checked",!0)):(dojo.removeClass(f,"inlineEditDisabled"),dojo.removeClass(a,"inlineEditDisabled"));
!d&&this.isHtmlSupported()?(dojo.style(c.domNode,"display",""),dojo.style(g.domNode,"display",""),dojo.style(a,"display",""),dojo.style(f,"display",""),dojo.style(h,"display","")):(dojo.style(c.domNode,"display","none"),dojo.style(g.domNode,"display","none"),dojo.style(a,"display","none"),dojo.style(f,"display","none"),dojo.style(h,"display","none"))},resize:function(a){a=dojo.byId("iedResizeDiv");var b=dijit.byId("davinciIleb"),d=a.clientWidth-5,e=a.clientHeight-6,c=a.clientWidth-10,d=a.clientWidth-
8,e=a.clientHeight-20,c=a.clientWidth-9,g=dojo.byId("smartInputSim");dojo.style(g,"width",d+10+"px");this.updateSimStyle();b&&(b._setStyleAttr({width:d+"px",height:e+"px",maxHeight:e+"px"}),b._setStyleAttr({width:a.clientWidth+"px"}));b=dojo.byId("davinci.ve.input.SmartInput_radio_div");dojo.style(b,"width",c+2+"px");b=dojo.byId("davinci.ve.input.SmartInput_radio_text_width_div");dojo.style(b,"width",a.clientWidth-50+"px");b=dojo.byId("davinci.ve.input.SmartInput_radio_html_width_div");dojo.style(b,
"width",a.clientWidth-50+"px")},onBlur:function(a){this.updateSimStyle(a)},updateSimStyle:function(a){var b=dijit.byId("davinciIleb");if(a=dojo.byId("smartInputSim"))b=dojo.style(b.domNode),dojo.style(a,"borderColor",b.borderTopColor),dojo.style(a,"backgroundColor",b.backgroundColor)},_getTemplate:function(){var a='\x3cdiv id\x3d"iedResizeDiv" class\x3d"iedResizeDiv" \x3e\x3ctextarea  dojoType\x3d"dijit.form.SimpleTextarea" name\x3d"davinciIleb" trim\x3d"true" id\x3d"davinciIleb" class\x3d"smartInputTextArea" \x3e\x3c/textarea\x3e\x3cdiv id\x3d"smartInputSim" class\x3d"smartInputSim" \x3e\x3c/div\x3e\x3c/div\x3e';
"true"===this.multiLine&&(a='\x3cdiv id\x3d"iedResizeDiv" class\x3d"iedResizeDiv" \x3e\x3ctextarea  dojoType\x3d"dijit.form.SimpleTextarea" name\x3d"davinciIleb" trim\x3d"true" id\x3d"davinciIleb" class\x3d"smartInputTextAreaMulti" \x3e\x3c/textarea\x3e\x3cdiv id\x3d"smartInputSim" class\x3d"smartInputSim" \x3e\x3c/div\x3e\x3c/div\x3e');return""+a+'\x3cdiv  id\x3d"davinci.ve.input.SmartInput_div"  class\x3d"davinciVeInputSmartInputDiv" \x3e\x3cdiv id\x3d"davinci.ve.input.SmartInput_radio_div" class\x3d"smartInputRadioDiv" \x3e\x3ctable id\x3d"davinci.ve.input.SmartInput_table"\x3e \x3ctbody\x3e\x3ctr\x3e \x3ctd class\x3d"smartInputTd1" \x3e \x3cinput id\x3d"davinci.ve.input.SmartInput_radio_text" showlabel\x3d"true" type\x3d"radio" dojoType\x3d"dijit.form.RadioButton" disabled\x3d"false" readOnly\x3d"false" intermediateChanges\x3d"false" checked\x3d"true"\x3e \x3c/input\x3e \x3c/td\x3e \x3ctd class\x3d"smartInputTd2" \x3e\x3cdiv id\x3d"davinci.ve.input.SmartInput_radio_text_width_div" class\x3d"smartInputRadioTextDiv"\x3e\x3c/div\x3e\x3c/td\x3e \x3c/tr\x3e\x3ctr\x3e \x3ctd class\x3d"smartInputTd1"\x3e \x3cinput id\x3d"davinci.ve.input.SmartInput_radio_html" showlabel\x3d"true" type\x3d"radio" dojoType\x3d"dijit.form.RadioButton"\x3e \x3c/input\x3e  \x3c/td\x3e \x3ctd class\x3d"smartInputTd2"\x3e\x3cdiv id\x3d"davinci.ve.input.SmartInput_radio_html_width_div" class\x3d"smartInputRadioTextDiv"\x3e\x3c/div\x3e\x3c/td\x3e \x3c/tr\x3e \x3c/tbody\x3e\x3c/table\x3e \x3cdiv class\x3d"smartInputHelpDiv" \x3e \x3cspan id\x3d"davinci.ve.input.SmartInput_img_help"  title\x3d"Help" class\x3d"inlineEditHelp" \x3e \x3c/span\x3e\x3cspan class\x3d"smartInputSpacerSpan" \x3e\x3cbutton id\x3d"davinci.ve.input.SmartInput_ok"  dojoType\x3d"dijit.form.Button" type\x3d"submit" class\x3d"inlineEditHelpOk" \x3e'+
d.buttonOk+'\x3c/button\x3e \x3cbutton id\x3ddavinci.ve.input.SmartInput_cancel dojoType\x3d"dijit.form.Button" class\x3d"inlineEditHelpCancel"\x3e '+d.buttonCancel+'\x3c/button\x3e  \x3c/span\x3e   \x3c/div\x3e \x3cdiv id\x3d"davinci.ve.input.SmartInput_div_help" style\x3d"display:none;" class\x3d"smartInputHelpTextDiv" \x3e \x3cdiv dojoType\x3d"dijit.layout.ContentPane" class\x3d"smartInputHelpTextDivContentPane "style\x3d"padding:0;" \x3e'+this.getHelpText()+'\x3c/div\x3e \x3cdiv style\x3d"text-align: left; padding:0; height:2px;" \x3e\x3c/div\x3e \x3c/div\x3e \x3c/div\x3e\x3c/div\x3e '},
_connectResizeHandle:function(){},_connectSimDiv:function(){this._connection.push(dojo.connect(this._inline.eb,"onFocus",this,"updateSimStyle"));this._connection.push(dojo.connect(this._inline.eb,"onMouseOver",this,"updateSimStyle"));this._connection.push(dojo.connect(this._inline.eb,"onMouseOut",this,"updateSimStyle"));this._connection.push(dojo.connect(dojo.byId(" davinci.ve.input.SmartInput_div"),"onclick",this,"updateSimStyle"))}})})},"davinci/ve/commands/ModifyRichTextCommand":function(){define(["dojo/_base/declare"],
function(n){return n("davinci.ve.commands.ModifyRichTextCommand",null,{name:"modify",constructor:function(k,g,e,b){this._oldId=k?k.id:void 0;this._properties=g=g||{};g.richText?(this._richText=!0,this._children=this._newText=g.richText,delete g.richText):this._children=g._children;this._context=b||k.getContext()},setContext:function(k){this._context=k},add:function(k){k&&k._oldId==this._oldId&&(k._properties&&dojo.mixin(this._properties,k._properties),k._children&&(this._children=k._children))},execute:function(){if(this._oldId&&
this._properties){var k=require("davinci/ve/widget"),g=k.byId(this._oldId);if(g){this._parentWidget=g.getParent();this._oldText||(this._oldText=g._srcElement.getElementText(this._context))&&"string"==typeof this._oldText&&(this._oldText=this._oldText.replace(/\n/g,""));this._oldData||(this._oldData=g.getData(),this._oldData.context=this._context,this._newData={type:this._oldData.type,properties:dojo.mixin({},this._oldData.properties,this._properties),children:this._newText,maqStates:this._oldData.maqStates,
maqDeltas:this._oldData.maqDeltas,context:this._context},this._oldData={type:this._oldData.type,properties:dojo.mixin({},this._oldData.properties,this._properties),children:this._oldText,maqStates:this._oldData.maqStates,maqDeltas:this._oldData.maqDeltas,context:this._context});var e=this._context;e&&e.detach(g);this._properties.id&&delete this._newData.properties.isTempID;this._newId_isTempID||(this._newId_isTempID=this._newData.properties.isTempID);this._oldId_isTempID||(this._oldId_isTempID=this._oldData.properties.isTempID);
var b=null,d=this._parentWidget.indexOf(g);this._parentWidget.removeChild(g);g.destroyWidget();this._newId&&(this._newData.properties.id=this._newId);this._newId_isTempID&&(this._newData.properties.isTempID=this._newId_isTempID);if(b=k.createWidget(this._newData))this._parentWidget.addChild(b,d),this._newId=b.id,this._context&&this._refresh(b),e&&(e.widgetAddedOrDeleted(),this._oldId!=this._newId&&e.widgetChanged(e.WIDGET_ID_CHANGED,b,this._oldId),e.widgetChanged(e.WIDGET_MODIFIED,b)),this.newWidget=
b,dojo.publish("/davinci/ui/widget/replaced",[b,g]),require("davinci/ve/States").resetState(b.domNode)}}},undo:function(){if(this._newId&&this._oldData){var k=require("davinci/ve/widget"),g=k.byId(this._newId);if(g){var e=dojo.indexOf(this._parentWidget.getChildren(),g);if(!(0>e)){var b=this._parentWidget.getContext();b&&b.detach(g);this._parentWidget.removeChild(g);g.destroyWidget();this._oldData.children=this._oldText;this._oldData.properties.id=this._oldId;k=k.createWidget(this._oldData);this._parentWidget.addChild(k,
e);b&&this._refresh(k);b.widgetAddedOrDeleted();b.widgetChanged(b.WIDGET_MODIFIED,k);dojo.publish("/davinci/ui/widget/replaced",[k,g]);require("davinci/ve/States").resetState(k.domNode)}}}},_refresh:function(k){var g=k.getContainerNode();g&&this._context.getGlobal().require("dojo/parser").parse(g);this._context.attach(k);k.startup();k.renderWidget();g&&this._context._attachChildren(g)}})})},"url:davinci/workbench/templates/Preferences.html":"\x3cdiv style\x3d'width:100%; height: 100%'\x3e\n\t\x3cdiv class\x3d\"dijitDialogPaneContentArea\"\x3e\n\t\t\x3cdiv dojoType\x3d'dijit.layout.BorderContainer' dojoAttachPoint\x3d\"borderContainer\" style\x3d'width:100%; height: 100%' gutters\x3d'false' liveSplitters\x3d'true' id\x3d'preferencesContainer'\x3e\n\t\t\t\x3cdiv dojoType\x3d'dijit.layout.ContentPane' id\x3d'pref.TreePane' splitter\x3d'true' region\x3d'leading' style\x3d'width: 200px;' minSize\x3d'100' maxSize\x3d'300'\x3e\x3c/div\x3e\n\t\t\t\x3cdiv dojoType\x3d'dijit.layout.ContentPane' region\x3d'center' id\x3d'pref.RightPane'\x3e\x3c/div\x3e\n\t\t\x3c/div\x3e\n\t\x3c/div\x3e\n\t\x3cdiv class\x3d\"dijitDialogPaneActionBar\"\x3e\n\t\t\x3c!-- FIXME: we don't have logic to yet implement restoreDefaults() yet. See #627\n\t\t\x3cbutton dojoType\x3ddijit.form.Button type\x3d\"button\" onclick\x3d\"davinci.workbench.Preferences.restoreDefaults();\"\x3e\x3c/button\x3e--\x3e\n\t\t\x3cbutton dojoType\x3d\"dijit.form.Button\" type\x3d\"button\" onclick\x3d\"davinci.workbench.Preferences.save();\" class\x3d\"maqPrimaryButton\" type\x3d\"submit\"\x3e${commonStrings.buttonSave}\x3c/button\x3e\n\t\t\x3cbutton dojoType\x3d\"dijit.form.Button\" type\x3d\"button\" onclick\x3d\"davinci.workbench.Preferences.finish();\" class\x3d\"maqSecondaryButton\"\x3e${commonStrings.buttonCancel}\x3c/button\x3e\n\t\x3c/div\x3e\n\x3c/div\x3e\n\n\n",
"url:davinci/ve/widgets/templates/BackgroundDialog.html":"\x3cdiv class\x3d\"backgroundDialog\" style\x3d\"position:relative\" dojoAttachPoint\x3d\"_fileDialog\"\x3e\n\t\x3cstyle type\x3d\"text/css\"\x3e\n\t\t.backgroundDialog {\n\t\t\twidth:31em;\n\t\t}\n\t\t.bgdTopDiv {\n\t\t\tmargin-top: 4px;\n\t\t\tpadding-left: .75em;\n\t\t}\n\t\t.bgdTopTable {\n\t\t\twidth:100%;\n\t\t\tborder-collapse:collapse;\n\t\t}\n\t\t.bgdTopLabel, .bgdTopField, .bgdTopPreview {\n\t\t\twidth:1px;\n\t\t\twhite-space:nowrap;\n\t\t}\n\t\t.bgdTopLabel {\n\t\t\ttext-align:right;\n\t\t\tpadding-right:6px;\n\t\t}\n\t\t.bgdTopTable .dijitSelect .dijitButtonContents {\n\t\t\twidth:8em;\n\t\t}\n\t\t.bgdTopTable .dijitTextBox {\n\t\t\twidth: 9.8em;\n\t\t}\n\t\t.bgdPreview {\n\t\t\tdisplay:inline-block;\n\t\t\twidth: 6em;\n\t\t\theight: 2.8em;\n\t\t\tmargin-left:12px;\n\t\t\tborder:1px solid gray;\n\t\t\tvertical-align: middle;\n\t\t}\n\t\t.bgdOptionsDiv {\n\t\t\tmargin:0.3em 0em 1em 1em;\n\t\t}\n\t\t.bgdOptionsDiv \x3e table {\n\t\t\twidth:27em;\n\t\t}\n\t\t.bgdSection {\n\t\t\tbackground-color:#d8d8d8;\n\t\t}\n\t\tdiv.bgdSection, .bgdSection td, .bgdSection.bgdUrlSectionLabel {\n\t\t\tpadding:2px 5px;\n\t\t}\n\t\t.bgdBeforeStopsLabel {\n\t\t\theight:6px;\n\t\t}\n\t\t.bgdStopsLabel {\n\t\t\tmargin-top:1em;\n\t\t}\n\t\t.bgdAfterStopsLabel {\n\t\t\theight:0px;\n\t\t}\n\t\t.bgdBeforeOptionsLabel {\n\t\t\theight:16px;\n\t\t}\n\t\t.bgdOptionsLabel {\n\t\t\tmargin-top:1em;\n\t\t}\n\t\t.bgdAfterOptionsLabel {\n\t\t\theight:4px;\n\t\t}\n\t\t.bgdCol1 {\n\t\t\twidth:10px;\n\t\t}\n\t\t.bgdPlusMinusButtons {\n\t\t\twhite-space:nowrap;\n\t\t\twidth:51px;\n\t\t}\n\t\t.bgdOptionsDiv th {\n\t\t\ttext-align:center;\n\t\t\tfont-style:italic;\n\t\t}\n\t\t.bgdOptsLabel {\n\t\t\ttext-align:right;\n\t\t\tpadding-right: 6px;\n\t\t\twhite-space:nowrap;\n\t\t}\n\t\t.bgdColor.dijitTextBox {\n\t\t\twidth:9em;\n\t\t}\n\t\t.bgdOptionsDiv .bgdPosition.dijitTextBox {\n\t\t\twidth:5em;\n\t\t}\n\t\t.bgdOptionsDiv .dijitTextBox {\n\t\t\twidth:10.6em;\n\t\t}\n\t\t.bgdStopColorTD .dijitTextBox {\n\t\t\twidth:14em;\n\t\t}\n\t\t.bgdOptionsDiv .dijitSelect {\n\t\t\tmargin:0;\n\t\t}\n\t\t.bgdOptionsDiv .dijitSelect .dijitButtonContents {\n\t\t\twidth:9em;\n\t\t}\n\t\t.bgdUrlContainerOuter {\n\t\t\tmargin-top:1em;\n\t\t\tmargin-left:1em;\n\t\t}\n\t\t.bgdUrlContainerInner {\n\t\t\tmargin:0 1em;\n\t\t}\n\t\t.bgdUrlSectionLabel {\n\t\t\tmargin:1em 0 .25em;\n\t\t}\n\t\t.bgdFileTreeContainer {\n\t\t\tmargin: 0 0 0 3px;\n\t\t\tborder: 1px solid #26A;\n\t\t}\n\t\t.bgdFileTreeContainer .dijitTree {\n\t\t\theight:125px;\n\t\t}\t\t\n\t\t.backgroundDialog .fileNameRow  {\n\t\t\tmargin:8px 0 .4em;\n\t\t}\n\t\t.backgroundDialog .fileNameRow label {\n\t\t\tvertical-align:middle;\n\t\t\tmargin-right:4px;\n\t\t}\n\t\t.backgroundDialog .fileNameRow .dijitTextBox {\n\t\t\twidth:16em;\n\t\t}\n\t\t.bgdOptionsDiv .bgdOtherRow .dijitTextBox {\n\t\t\twidth:15em;\n\t\t}\n\t\t\n\t\x3c/style\x3e\n\n\t\x3cdiv class\x3d\"dijitDialogPaneContentArea\"\x3e\n\t\t\x3cdiv class\x3d'bgdTopDiv'\x3e\n\t\t\t\x3ctable class\x3d'bgdTopTable'\x3e\n\t\t\t\t\x3ctr\x3e\n\t\t\t\t\t\x3ctd class\x3d'bgdTopLabel'\x3e\x3clabel class\x3d'bgdTypeDivTypeLabel'\x3e${veNLS.bgdBackgroundColor}\x3c/label\x3e\x3c/td\x3e\n\t\t\t\t\t\x3ctd class\x3d'bgdTopField'\x3e\n\t\t\t\t\t\t\x3cselect dojoType\x3d\"dijit.form.ComboBox\" dojoAttachPoint\x3d'bgdColorCB'\x3e\n\t\t\t\t\t\t\t\x3c!--  values added dynamically --\x3e\n\t\t\t\t\t\t\x3c/select\x3e\n\t\t\t\t\t\x3c/td\x3e\n\t\t\t\t\t\x3ctd rowspan\x3d'2' class\x3d'bgdTopPreview' style\x3d'border-collapse:collapse'\x3e\x3cspan class\x3d'bgdPreview'\x3e\x3c/span\x3e\x3c/td\x3e\n\t\t\t\t\t\x3ctd class\x3d'bgdTopExpando'\x3e\x26nbsp;\x3c/td\x3e\n\t\t\t\t\x3c/tr\x3e\n\t\t\t\t\x3ctr\x3e\n\t\t\t\t\t\x3ctd class\x3d'bgdTopLabel'\x3e\x3clabel class\x3d'bgdTypeDivTypeLabel'\x3e${veNLS.bgdBackgroundImageType}\x3c/label\x3e\x3c/td\x3e\n\t\t\t\t\t\x3ctd class\x3d'bgdTopField'\x3e\n\t\t\t\t\t\t\x3cselect dojoType\x3d'dijit.form.Select' value\x3d'linear' dojoAttachPoint\x3d'bgdTypeSelect'\x3e\n\t\t\t\t\t\t\t\x3c!--  values added dynamically --\x3e\n\t\x3c!-- FIXME: Add plain text type-in box if unrecognized syntax --\x3e\n\t\t\t\t\t\t\x3c/select\x3e\n\t\t\t\t\t\x3c/td\x3e\n\t\t\t\t\t\x3ctd class\x3d'bgdTopExpando'\x3e\x26nbsp;\x3c/td\x3e\n\t\t\t\t\x3c/tr\x3e\n\t\t\t\x3c/table\x3e\n\t\t\x3c/div\x3e\n\t\t\n\t\t\x3cdiv class\x3d\"bgdUrlContainerOuter bgdImageOptRow\"\x3e\n\t\t\t\x3cdiv class\x3d\"bgdSection bgdOptionsLabel\"\x3e${veNLS.bgdImageUrl}\x3c/div\x3e\n\t\t\t\x3cdiv class\x3d\"bgdUrlContainerInner\"\x3e\n\t\t\t\t\x3cdiv class\x3d'fileNameRow'\x3e\n\t\t\t\t\t\x3ctd class\x3d\"fileDialogLabelCell\"\x3e\n\t\t\t\t\t\x3clabel\x3e${veNLS.bgdUrl}\x3c/label\x3e\n\t\t\t\t\t\x3c/td\x3e\n\t\t\t\t\t\x3ctd\x3e\n\t\t\t\t\t\x3cdiv dojoType\x3d'davinci.ui.widgets.FileFieldDialog' dojoAttachPoint\x3d\"_filePicker\"\x3e\x3c/div\x3e\n\t\t\t\t\t\x3c/td\x3e\n\t\t\t\t\x3c/div\x3e\n\t\t\t\x3c/div\x3e\n\t\t\x3c/div\x3e\n\t\t\x3cdiv class\x3d\"bgdOptionsDiv\"\x3e\n\t\t\t\x3ctable\x3e\n\t\t\t\t\x3ctr class\x3d\"bgdGradOptRow bgdBeforeStopsLabel\"\x3e\x3c/tr\x3e\n\t\t\t\t\x3ctr class\x3d\"bgdGradOptRow bgdSection bgdStopsLabel\"\x3e\n\t\t\t\t\t\x3ctd colspan\x3d\"5\"\x3e${veNLS.bgdColorStops}\x3c/td\x3e\n\t\t\t\t\x3c/tr\x3e\n\t\t\t\t\x3ctr class\x3d\"bgdGradOptRow bgdAfterStopsLabel\"\x3e\x3c/tr\x3e\n\t\t\t\t\x3ctr class\x3d'bgdGradOptRow bgdStopRow'\x3e\n\t\t\t\t\t\x3cth\x3e\x3c/th\x3e\x3cth\x3e\x3c/th\x3e\x3cth\x3e${veNLS.bgdColor}\x3c/th\x3e\x3cth\x3e${veNLS.bgdPosition}\x3c/th\x3e\x3cth\x3e\x3c/th\x3e\n\t\t\t\t\x3c/tr\x3e\n\t\t\t\t\x3c!--  gradient stop rows added dynamically --\x3e\n\t\t\t\t\x3ctr class\x3d\"bgdBeforeOptionsLabel bgdOptionsLabelRow\"\x3e\x3c/tr\x3e\n\t\t\t\t\x3ctr class\x3d\"bgdSection bgdOptionsLabel bgdOptionsLabelRow\"\x3e\n\t\t\t\t\t\x3ctd colspan\x3d\"5\"\x3e${veNLS.bgdOptions}\x3c/td\x3e\n\t\t\t\t\x3c/tr\x3e\n\t\t\t\t\x3ctr class\x3d\"bgdAfterOptionsLabel bgdOptionsLabelRow\"\x3e\x3c/tr\x3e\n\t\t\t\t\x3ctr class\x3d\"bgdGradOptRow bgdLinearOptRow\"\x3e\t\n\t\t\t\t\t\x3ctd class\x3d'bgdCol1'\x3e\x3c/td\x3e\n\t\t\t\t\t\x3ctd class\x3d'bgdOptsLabel'\x3e\x3clabel\x3e${veNLS.bgdAngle}\x3c/label\x3e\x3c/td\x3e\n\t\t\t\t\t\x3ctd colspan\x3d'3'\x3e\n\t\t\t\t\t\t\x3cselect dojoType\x3d\"dijit.form.ComboBox\" dojoAttachPoint\x3d'bgdLinearAngleCB'\x3e\n\t\t\t\t\t\t\t\x3c!--  values added dynamically --\x3e\n\t\t\t\t\t\t\x3c/select\x3e\n\t\t\t\t\t\x3c/td\x3e\n\t\t\t\t\x3c/tr\x3e\n\t\t\t\t\x3ctr class\x3d\"bgdGradOptRow bgdRadialOptRow\"\x3e\t\n\t\t\t\t\t\x3ctd class\x3d'bgdCol1'\x3e\x3c/td\x3e\n\t\t\t\t\t\x3ctd class\x3d'bgdOptsLabel'\x3e${veNLS.bgdPosition2}\x3c/td\x3e\n\t\t\t\t\t\x3ctd colspan\x3d'3'\x3e\n\t\t\t\t\t\t\x3cselect dojoType\x3d\"dijit.form.ComboBox\" dojoAttachPoint\x3d'bgdRadialPosCB'\x3e\n\t\t\t\t\t\t\t\x3c!--  values added dynamically --\x3e\n\t\t\t\t\t\t\x3c/select\x3e\n\t\t\t\t\t\x3c/td\x3e\n\t\t\t\t\x3c/tr\x3e\n\t\t\t\t\x3ctr dojoAttachPoint\x3d\"bgdShapeRow\" class\x3d\"bgdGradOptRow bgdRadialOptRow\"\x3e\t\n\t\t\t\t\t\x3ctd class\x3d'bgdCol1'\x3e\x3c/td\x3e\n\t\t\t\t\t\x3ctd class\x3d'bgdOptsLabel'\x3e\x3clabel\x3e${veNLS.bgdShape}\x3c/label\x3e\x3c/td\x3e\n\t\t\t\t\t\x3ctd colspan\x3d'3'\x3e\n\t\t\t\t\t\t\x3cselect dojoType\x3d\"dijit.form.ComboBox\" dojoAttachPoint\x3d'bgdRadialShapeCB'\x3e\n\t\t\t\t\t\t\t\x3c!--  values added dynamically --\x3e\n\t\t\t\t\t\t\x3c/select\x3e\n\t\t\t\t\t\x3c/td\x3e\n\t\t\t\t\x3c/tr\x3e\n\t\t\t\t\x3ctr dojoAttachPoint\x3d\"bgdExtentRow\" class\x3d\"bgdGradOptRow bgdRadialOptRow\"\x3e\t\n\t\t\t\t\t\x3ctd class\x3d'bgdCol1'\x3e\x3c/td\x3e\n\t\t\t\t\t\x3ctd class\x3d'bgdOptsLabel'\x3e\x3clabel\x3e${veNLS.bgdExtent}\x3c/label\x3e\x3c/td\x3e\n\t\t\t\t\t\x3ctd colspan\x3d'3'\x3e\n\t\t\t\t\t\t\x3cselect dojoType\x3d\"dijit.form.ComboBox\" dojoAttachPoint\x3d'bgdRadialExtentCB'\x3e\n\t\t\t\t\t\t\t\x3c!--  values added dynamically --\x3e\n\t\t\t\t\t\t\x3c/select\x3e\n\t\t\t\t\t\x3c/td\x3e\n\t\t\t\t\x3c/tr\x3e\n\t\t\t\t\x3ctr dojoAttachPoint\x3d\"bgdRepeatRow\" class\x3d\"bgdImageOptRow\"\x3e\t\n\t\t\t\t\t\x3ctd class\x3d'bgdCol1'\x3e\x3c/td\x3e\n\t\t\t\t\t\x3ctd class\x3d'bgdOptsLabel'\x3e\x3clabel\x3e${veNLS.bgdBackgroundRepeat}\x3c/label\x3e\x3c/td\x3e\n\t\t\t\t\t\x3ctd colspan\x3d'3'\x3e\n\t\t\t\t\t\t\x3cselect dojoType\x3d\"dijit.form.ComboBox\" dojoAttachPoint\x3d'bgdRepeatCB'\x3e\n\t\t\t\t\t\t\t\x3c!--  values added dynamically --\x3e\n\t\t\t\t\t\t\x3c/select\x3e\n\t\t\t\t\t\x3c/td\x3e\n\t\t\t\t\x3c/tr\x3e\n\t\t\t\t\x3ctr dojoAttachPoint\x3d\"bgdPositionRow\" class\x3d\"bgdImageOptRow\"\x3e\t\n\t\t\t\t\t\x3ctd class\x3d'bgdCol1'\x3e\x3c/td\x3e\n\t\t\t\t\t\x3ctd class\x3d'bgdOptsLabel'\x3e${veNLS.bgdBackgroundPosition}\x3c/td\x3e\n\t\t\t\t\t\x3ctd colspan\x3d'3'\x3e\n\t\x3c!-- FIXME: regExp, invalidMessage --\x3e\n\t\t\t\t\t\t\x3cselect dojoType\x3d\"dijit.form.ComboBox\" dojoAttachPoint\x3d'bgdPositionCB'\x3e\n\t\t\t\t\t\t\t\x3c!--  values added dynamically --\x3e\n\t\t\t\t\t\t\x3c/select\x3e\n\t\t\t\t\t\x3c/td\x3e\n\t\t\t\t\x3c/tr\x3e\n\t\t\t\t\x3ctr dojoAttachPoint\x3d\"bgdSizeRow\" class\x3d\"bgdImageOptRow\"\x3e\t\n\t\t\t\t\t\x3ctd class\x3d'bgdCol1'\x3e\x3c/td\x3e\n\t\t\t\t\t\x3ctd class\x3d'bgdOptsLabel'\x3e${veNLS.bgdBackgroundSize}\x3c/td\x3e\n\t\t\t\t\t\x3ctd colspan\x3d'3'\x3e\n\t\x3c!-- FIXME: regExp, invalidMessage --\x3e\n\t\t\t\t\t\t\x3cselect dojoType\x3d\"dijit.form.ComboBox\" dojoAttachPoint\x3d'bgdSizeCB'\x3e\n\t\t\t\t\t\t\t\x3c!--  values added dynamically --\x3e\n\t\t\t\t\t\t\x3c/select\x3e\n\t\t\t\t\t\x3c/td\x3e\n\t\t\t\t\x3c/tr\x3e\n\t\t\t\t\x3ctr dojoAttachPoint\x3d\"bgdOriginRow\" class\x3d\"bgdImageOptRow\"\x3e\t\n\t\t\t\t\t\x3ctd class\x3d'bgdCol1'\x3e\x3c/td\x3e\n\t\t\t\t\t\x3ctd class\x3d'bgdOptsLabel'\x3e\x3clabel\x3e${veNLS.bgdBackgroundOrigin}\x3c/label\x3e\x3c/td\x3e\n\t\t\t\t\t\x3ctd colspan\x3d'3'\x3e\n\t\t\t\t\t\t\x3cselect dojoType\x3d\"dijit.form.ComboBox\" dojoAttachPoint\x3d'bgdOriginCB'\x3e\n\t\t\t\t\t\t\t\x3c!--  values added dynamically --\x3e\n\t\t\t\t\t\t\x3c/select\x3e\n\t\t\t\t\t\x3c/td\x3e\n\t\t\t\t\x3c/tr\x3e\n\t\t\t\t\x3ctr dojoAttachPoint\x3d\"bgdClipRow\" class\x3d\"bgdImageOptRow\"\x3e\t\n\t\t\t\t\t\x3ctd class\x3d'bgdCol1'\x3e\x3c/td\x3e\n\t\t\t\t\t\x3ctd class\x3d'bgdOptsLabel'\x3e\x3clabel\x3e${veNLS.bgdBackgroundClip}\x3c/label\x3e\x3c/td\x3e\n\t\t\t\t\t\x3ctd colspan\x3d'3'\x3e\n\t\t\t\t\t\t\x3cselect dojoType\x3d\"dijit.form.ComboBox\" dojoAttachPoint\x3d'bgdClipCB'\x3e\n\t\t\t\t\t\t\t\x3c!--  values added dynamically --\x3e\n\t\t\t\t\t\t\x3c/select\x3e\n\t\t\t\t\t\x3c/td\x3e\n\t\t\t\t\x3c/tr\x3e\n\t\t\t\t\x3ctr dojoAttachPoint\x3d\"bgdOtherTypeInRow\" class\x3d\"bgdOtherRow\"\x3e\t\n\t\n\t\t\t\t\t\x3ctd class\x3d'bgdCol1'\x3e\x3c/td\x3e\n\t\t\t\t\t\x3ctd class\x3d'bgdOptsLabel'\x3e\x3clabel\x3e${veNLS.bgdBackgroundImageValue}\x3c/label\x3e\x3c/td\x3e\n\t\t\t\t\t\x3ctd colspan\x3d'3'\x3e\n\t\t\t\t\t\t\x3ctextarea dojoType\x3d\"dijit.form.Textarea\" dojoAttachPoint\x3d'bgdOtherTA'\x3e\x3c/textarea\x3e\n\t\t\t\t\t\x3c/td\x3e\n\t\n\t\t\t\t\x3c/tr\x3e\n\t\n\t\t\t\x3c/table\x3e\n\t\t\x3c/div\x3e\n\t\x3c/div\x3e\n\n\t\x3c!--div class\x3d\"dijitDialogPaneActionBar\"\x3e\n\t\t\x3cspan dojoType\x3d'dijit.form.Button' dojoAttachPoint\x3d\"_okButton\" dojoAttachEvent\x3d'onClick:okButton' label\x3d'${buttonOk}' class\x3d\"maqPrimaryButton\" type\x3d\"submit\"\x3e\x3c/span\x3e \n\t\t\x3cspan dojoType\x3d'dijit.form.Button' dojoAttachEvent\x3d'onClick:cancelButton' label\x3d'${buttonCancel}' class\x3d\"maqSecondaryButton\"/\x3e\x3c/span\x3e \n\t\x3c/div--\x3e\n\x3c/div\x3e\n",
"url:davinci/ui/widgets/templates/FileFieldDialog.html":"\x3cdiv\x3e\n\t\x3cdiv style\x3d'float:right;'\x3e\n\t\t\x3cbutton type\x3d'button' style\x3d'font-size:.75em;float:right;' dojoType\x3d\"dijit.form.Button\" dojoAttachPoint\x3d\"button\" dojoAttachEvent\x3d\"onClick:_showFileSelectionDialog\"\x3e...\x3c/button\x3e\n\t\x3c/div\x3e\n\t\x3cdiv style\x3d'margin-right:35px;'\x3e\n\t\t\x3cinput style\x3d'width:100%;' type\x3d'text' dojoType\x3d\"dijit.form.TextBox\" dojoAttachPoint\x3d\"textField\" dojoAttachEvent\x3d\"onChange:_onChange\"\x3e\x3c/input\x3e\n\t\x3c/div\x3e\n\x3c/div\x3e\n\n",
"url:davinci/ve/widgets/templates/WidgetToolBar.html":'\x3cdiv class\x3d"propertiesTitleBar ui-widget-content" style\x3d"display: none"\x3e\n    \x3cdiv class\x3d\'propertiesWidgetDescription\'\x3e\n        \x3cspan class\x3d\'propertiesWidgetDescriptionFor\'\x3e${veNLS.toolBarFor}\x3c/span\x3e\n        \x3cspan data-dojo-attach-point\x3d"descNode"\x3e${veNLS.noSelection}\x3c/span\x3e\n    \x3c/div\x3e\n    \x3cdiv class\x3d"propertiesTitleBarPropertiesContainer"\x3e\n        \x3ctable width\x3d"100%" cellspacing\x3d"0" cellpadding\x3d"0" border\x3d"0" align\x3d"center"\n               class\x3d"propertiesTitleBarProperties property_table_stretchable"\x3e\n            \x3ccolgroup\x3e\n                \x3ccol style\x3d"width:10px;"\x3e\n                \x3ccol class\x3d"gap02"\x3e\n                \x3ccol class\x3d"gap03"\x3e\n                \x3ccol style\x3d"width:10px;"\x3e\n                \x3ccol style\x3d"width:6px;"\x3e\n            \x3c/colgroup\x3e\n            \x3ctbody\x3e\n            \x3c!--tr class\x3d"cssPropertySection"\x3e\n                \x3ctd\x3e\x3c/td\x3e\n                \x3ctd class\x3d"propertyDisplayName"\x3e${veNLS.toolBarClass}\x26nbsp;\x3c/td\x3e\n                \x3ctd class\x3d"propertyInputField"\x3e\n                  \x3cinput data-dojo-type\x3d"dijit.form.ComboBox" data-dojo-attach-point\x3d"classComboBox" label\x3d"" data-dojo-attach-event\x3d"onChange:_onChangeClassAttribute,onFocus:_onFieldFocus,onBlur:_onFieldBlur" style\x3d"width: 100%" searchAttr\x3d"name"/\x3e\n                \x3c/td\x3e\n                \x3ctd nowrap\x3d"true" class\x3d"propertyExtra"\x3e\x3c/td\x3e\n                \x3ctd\x3e\x3c/td\x3e\n            \x3c/tr--\x3e\n            \x3ctr class\x3d"cssPropertySection"\x3e\n                \x3ctd\x3e\x3c/td\x3e\n                \x3ctd class\x3d"propertyDisplayName"\x3e${veNLS.toolBarId}\x26nbsp;\x3c/td\x3e\n                \x3ctd class\x3d"propertyInputField"\x3e\n                    \x3cinput class\x3d"form-control input-transparent" data-dojo-type\x3d"dijit.form.ValidationTextBox" data-dojo-attach-point\x3d"idTextBox" label\x3d"" data-dojo-attach-event\x3d"onChange:_onChangeIDAttribute,onKeyPress:_onKeyPress,onFocus:_onFieldFocus,onBlur:_onFieldBlur" style\x3d"width: 100%"/\x3e\n                \x3c/td\x3e\n                \x3ctd nowrap\x3d"true" class\x3d"propertyExtra"\x3e\x3c/td\x3e\n                \x3ctd\x3e\x3c/td\x3e\n            \x3c/tr\x3e\n\n            \x3ctr class\x3d"cssPropertySection"\x3e\n                \x3ctd\x3e\x3c/td\x3e\n                \x3ctd class\x3d"propertyDisplayName"\x3eClass\x3c/td\x3e\n                \x3ctd class\x3d"propertyInputField"\x3e\n                    \x3cinput data-dojo-attach-point\x3d"cssClasses" type\x3d"text" class\x3d"" value\x3d"" style\x3d"width: 100%"\x3e\n                \x3c/td\x3e\n                \x3ctd nowrap\x3d"true" class\x3d"propertyExtra"\x3e\x3c/td\x3e\n                \x3ctd\x3e\x3c/td\x3e\n            \x3c/tr\x3e\n            \x3c!--tr class\x3d"cssPropertySection"\x3e\n                \x3ctd\x3e\x3c/td\x3e\n                \x3ctd class\x3d"propertyDisplayName"\x3eBlock Group\x26nbsp;\x3c/td\x3e\n                \x3ctd class\x3d"propertyInputField"\x3e\n                    \x3cinput data-dojo-type\x3d"dijit.form.ComboBox" data-dojo-attach-point\x3d"blockGroupComboBox" label\x3d"" data-dojo-attach-event\x3d"onChange:_onChangeBlockGroupAttribute,onFocus:_onFieldFocus,onBlur:_onFieldBlur" style\x3d"width: 100%" searchAttr\x3d"name"/\x3e\n                \x3c/td\x3e\n                \x3ctd nowrap\x3d"true" class\x3d"propertyExtra"\x3e\x3c/td\x3e\n                \x3ctd\x3e\x3c/td\x3e\n            \x3c/tr--\x3e\n            \x3c/tbody\x3e\n        \x3c/table\x3e\n    \x3c/div\x3e\n\x3c/div\x3e\n',
"url:davinci/ve/actions/templates/AddState.html":'\x3cdiv\x3e\n\t\x3cdiv class\x3d"dijitDialogPaneContentArea"\x3e\n\t\t\x3cdiv class\x3d\'addStateNameDiv\'\x3e\n\t\t\t\x3clabel\x3e${veNls.stateLabel}:\x3c/label\x3e\x3cinput dojoAttachPoint\x3d"input" dojoType\x3d"dijit.form.TextBox" dojoAttachEvent\x3d"onKeyUp:_onKeyPress" type\x3d"text"\x3e\x3c/input\x3e\n\t\t\x3c/div\x3e\n\t\x3c/div\x3e\n\t\x3cdiv class\x3d"dijitDialogPaneActionBar"\x3e\n\t\t\x3cbutton dojoType\x3d\'dijit.form.Button\' dojoAttachPoint\x3d"okButton" dojoAttachEvent\x3d\'onClick:onOk\' label\x3d\'${veNls.createLabel}\' class\x3d"maqPrimaryButton" type\x3d"submit"\x3e\x3c/button\x3e\n\t\t\x3cbutton dojoType\x3d\'dijit.form.Button\' dojoAttachEvent\x3d\'onClick:onCancel\' label\x3d\'${commonNls.buttonCancel}\' class\x3d"maqSecondaryButton"\x3e\x3c/button\x3e\n\t\x3c/div\x3e\n\x3c/div\x3e\n',
"url:davinci/ve/actions/templates/ModifyState.html":'\x3cdiv\x3e\n\t\x3cdiv class\x3d"dijitDialogPaneContentArea"\x3e\n\t\t\x3cdiv class\x3d\'modify_state_container\'\x3e\n\t\t\t\x3cdiv data-dojo-type\x3d"dijit.form.DropDownButton" label\x3d\'${veNls.renameLabel}\' dojoAttachPoint\x3d"renameButton" class\x3d"modify_state_rename_button"\x3e\n\t\t\t\t\t\x3cdiv data-dojo-type\x3d"dijit.TooltipDialog" class\x3d\'modify_state_rename_container\' id\x3d\'state_rename_tooltip_dialog\'\x3e\n\t\t\t\t\t\t\x3cdiv\x3e\n\t\t\t\t\t\t\t\x3clabel for\x3d"state_rename_new_name"\x3e${veNls.newStateLabel}\x3c/label\x3e\n\t\t\t\t\t\t\t\x3cinput data-dojo-type\x3d"dijit.form.ValidationTextBox" id\x3d"state_rename_new_name" name\x3d"state_rename_new_name"\x3e\x3c/input\x3e\n\t\t\t\t\t\t\x3c/div\x3e\n\t\t\t\t\t\t\x3cdiv\x3e\n\t\t\t\t\t\t\t\x3cbutton id\x3d"state_rename_do_it" dojoType\x3d\'dijit.form.Button\' label\x3d\'${veNls.renameLabel}\'\x3e\x3c/button\x3e\n\t\t\t\t\t\t\t\x3cbutton id\x3d"state_rename_cancel" dojoType\x3d\'dijit.form.Button\' label\x3d\'${veNls.cancelLabel}\'\x3e\x3c/button\x3e\n\t\t\t\t\t\t\x3c/div\x3e\n\t\t\t\t\t\x3c/div\x3e\n\t\t\t\t\x3c/div\x3e\n\t\t\t${veNls.stateLabel}: \x3cspan id\x3d\'modify_state_old_name\'\x3eaaa\x3c/span\x3e\n\t\t\x3c/div\x3e\n\t\t\x3cdiv class\x3d\'initial_state_row\'\x3e\n\t\t\t\x3cinput data-dojo-type\x3d"dijit.form.CheckBox" dojoAttachPoint\x3d"initialState" id\x3d"modify_state_initial_state" name\x3d"modify_state_initial_state"\x3e\x3c/input\x3e\n\t\t\t\x3clabel for\x3d\'modify_state_initial_state\'\x3e${veNls.initialStateCheckBoxLabel}\x3c/label\x3e\n\t\t\x3c/div\x3e\n\t\x3c/div\x3e\n\t\t\t\t\n\t\x3cdiv class\x3d"dijitDialogPaneActionBar"\x3e\n\t\t\x3cbutton dojoType\x3d\'dijit.form.Button\' dojoAttachPoint\x3d"okButton" label\x3d\'${veNls.modifyLabel}\' class\x3d"maqPrimaryButton"\x3e\x3c/button\x3e\n\t\t\x3cbutton dojoType\x3d\'dijit.form.Button\' dojoAttachPoint\x3d"cancelButton" label\x3d\'${commonNls.buttonCancel}\' class\x3d"maqSecondaryButton"\x3e\x3c/button\x3e\n\t\x3c/div\x3e\n\x3c/div\x3e\n',
"url:davinci/ve/actions/templates/ManageStates.html":"\x3cdiv\x3e\n\t\x3cdiv class\x3d\"dijitDialogPaneContentArea\"\x3e\n\t\t\x3cdiv class\x3d\"addStateDialogOptions\"\x3e\n\t\t\t\x3cdiv class\x3d'manageStatesStatesListDiv'\x3e\n\t\t\t\t\x3c!-- Filled in by JavaScript --\x3e\n\t\t\t\x3c/div\x3e\n\t\t\t\x3cdiv class\x3d'manageStatesCheckAcceleratorsDiv'\x3e\n\t\t\t\t${veNls.manageStatesCheckLabel}\n\t\t\t\t\x3ca href\x3d'' class\x3d'manageStatesCheckCurrentStateOnly'\x3e${veNls.manageStatesCheckCurrentStateOnly}\x3c/a\x3e\n\t\t\t\t/\n\t\t\t\t\x3ca href\x3d'' class\x3d'manageStatesCheckAll'\x3e${veNls.manageStatesCheckAll}\x3c/a\x3e\n\t\t\t\t/\n\t\t\t\t\x3ca href\x3d'' class\x3d'manageStatesUncheckAll'\x3e${veNls.manageStatesUncheckAll}\x3c/a\x3e\n\t\t\t\t/\n\t\t\t\t\x3ca href\x3d'' class\x3d'manageStatesCheckBackgroundOnly'\x3e${veNls.manageStatesCheckBackgroundOnly}\x3c/a\x3e\n\t\t\t\x3c/div\x3e\n\t\t\t\n\t\t\x3c/div\x3e\t\n\t\x3c/div\x3e\n\t\x3cdiv class\x3d\"dijitDialogPaneActionBar\"\x3e\n\t\t\x3cbutton dojoType\x3d'dijit.form.Button' dojoAttachPoint\x3d\"okButton\" dojoAttachEvent\x3d'onClick:onOk' label\x3d'${veNls.createLabel}' class\x3d\"maqPrimaryButton\" type\x3d\"submit\"\x3e\x3c/button\x3e\n\t\t\x3cbutton dojoType\x3d'dijit.form.Button' dojoAttachEvent\x3d'onClick:onCancel' label\x3d'${commonNls.buttonCancel}' class\x3d\"maqSecondaryButton\"\x3e\x3c/button\x3e\n\t\x3c/div\x3e\n\x3c/div\x3e\n",
"url:davinci/ve/prefs/HtmlEditPreferences.html":"\x3cdiv\x3e\n\t\x3ctable style\x3d'margin: 4px;' cellspacing\x3d'4'\x3e\n\t\t\x3ctbody\x3e\n\t\t\t\x3c!--\n\t\t\t\x3ctr\x3e\n\t\t\t\t\x3ctd\x3e${_loc.flowLayout}:\x3c/td\x3e\n\t\t\t\t\x3ctd\x3e\n\t\t\t\t\t\x3cdiv dojoAttachPoint\x3d'flowBoxNode'\x3e\x3c/div\x3e\n\t\t\t\t\x3c/td\x3e\n\t\t\t\x3c/tr\x3e\n\t\t\t--\x3e\n\t\t\t\x3ctr\x3e\n\t\t\t\t\x3ctd\x3e${_loc.snapToNearestWidget}:\x3c/td\x3e\n\t\t\t\t\x3ctd\x3e\n\t\t\t\t\t\x3cdiv dojoAttachPoint\x3d'snapNode'\x3e\x3c/div\x3e\n\t\t\t\t\x3c/td\x3e\n\t\t\t\x3c/tr\x3e\n\t\t\t\x3ctr\x3e\n\t\t\t\t\x3ctd\x3e${_loc.showPossibleParents}:\x3c/td\x3e\n\t\t\t\t\x3ctd\x3e\n\t\t\t\t\t\x3cdiv dojoAttachPoint\x3d'showPossibleParentsNode'\x3e\x3c/div\x3e\n\t\t\t\t\x3c/td\x3e\n\t\t\t\x3c/tr\x3e\n\t\t\t\x3ctr\x3e\n\t\t\t\t\x3ctd\x3e${_loc.warnOnCSSOverride}:\x3c/td\x3e\n\t\t\t\t\x3ctd\x3e\n\t\t\t\t\t\x3cdiv dojoAttachPoint\x3d'cssOverrideWarn'\x3e\x3c/div\x3e\n\t\t\t\t\x3c/td\x3e\n\t\t\t\x3c/tr\x3e\n\t\t\t\x3ctr\x3e\n\t\t\t\t\x3ctd\x3e${_loc.absoluteWidgetsZindex}:\x3c/td\x3e\n\t\t\t\t\x3ctd\x3e\n\t\t\t\t\t\x3cdiv dojoAttachPoint\x3d'absoluteWidgetsZindex'\x3e\x3c/div\x3e\n\t\t\t\t\x3c/td\x3e\n\t\t\t\x3c/tr\x3e\n\t\t\t\x3c!-- FIXME: Disabled for now. Ultimately, UI for this option should go to widget palette\n\t\t\t\x3ctr\x3e\n\t\t\t\t\x3ctd\x3e${_loc.widgetPaletteLayout}:\x3c/td\x3e\n\t\t\t\t\x3ctd\x3e\n\t\t\t\t\t\x3cdiv dojoAttachPoint\x3d'widgetPaletteLayout'\x3e\x3c/div\x3e\n\t\t\t\t\x3c/td\x3e\n\t\t\t\x3c/tr\x3e\n\t\t\t--\x3e\n\t\t\t\x3ctr\x3e\n\t\t\t\t\x3ctd\x3e${_loc.zazl}:\x3c/td\x3e\n\t\t\t\t\x3ctd\x3e\n\t\t\t\t\t\x3cdiv dojoAttachPoint\x3d'zazl'\x3e\x3c/div\x3e\n\t\t\t\t\x3c/td\x3e\n\t\t\t\x3c/tr\x3e\n\t\t\x3c/tbody\x3e\n\t\x3c/table\x3e\n\x3c/div\x3e"}});
define("davinci/davinci",[],function(){});
//# sourceMappingURL=davinci.js.map