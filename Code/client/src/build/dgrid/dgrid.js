//>>built
require({cache:{"dgrid/main":function(){define("dgrid/Tree dgrid/Selection dgrid/OnDemandList dgrid/OnDemandGrid dgrid/extensions/ColumnReorder dgrid/extensions/ColumnResizer dgrid/extensions/CompoundColumns dgrid/extensions/Pagination dgrid/extensions/DnD dgrid/Editor dstore/Store dstore/Memory dstore/Tree dstore/Cache dstore/Trackable dstore/legacy/DstoreAdapter".split(" "),function(){})},"dgrid/Tree":function(){define("dojo/_base/declare dojo/_base/lang dojo/_base/array dojo/aspect dojo/dom-construct dojo/dom-class dojo/on dojo/query dojo/when ./util/has-css3 ./Grid xdojo/has!touch?./util/touch".split(" "),
function(r,h,q,p,f,m,n,e,u,a,b,c){return r(null,{collapseOnRefresh:!1,enableTreeTransitions:!1,treeIndentWidth:9,constructor:function(){this._treeColumnListeners=[]},shouldExpand:function(a,b,g){return g},expand:function(b,c,g){if(this._treeColumn){var k=this,t=b.element?b:this.row(b),z=!!this._expanded[t.id],B=a("transitionend"),A;if(b=t.element){b=-1<b.className.indexOf("dgrid-expando-icon")?b:e(".dgrid-expando-icon",b)[0];g=g||!this.enableTreeTransitions;if(b&&b.mayHaveChildren&&(g||c!==z)){var C=
void 0===c?!this._expanded[t.id]:c;m.replace(b,"ui-icon-triangle-1-"+(C?"se":"e"),"ui-icon-triangle-1-"+(C?"e":"se"));m.toggle(t.element,"dgrid-row-expanded",C);c=t.element;var x=c.connected,v,q,w={};if(!x){var x=w.container=c.connected=f.create("div",{className:"dgrid-tree-container"},c,"after"),p=function(g){var a=k._renderedCollection.getChildren(t.data);k.sort&&(a=a.sort(k.sort));a.track&&k.shouldTrackCollection&&(x._rows=g.rows=[],a=a.track(),x._handles=[a.tracking,k._observeCollection(a,x,g)]);
return"start"in g?a.fetchRange({start:g.start,end:g.start+g.count}):a.fetch()};"level"in b&&(p.level=b.level);if(this.renderQuery)A=this.renderQuery(p,w);else{var r=f.create("div",null,x);A=this._trackError(function(){return k.renderQueryResults(p(w),r,h.mixin({rows:w.rows},"level"in p?{queryLevel:p.level}:null)).then(function(k){f.destroy(r);return k})})}B&&n(x,B,this._onTreeTransitionEnd)}x.hidden=!C;v=x.style;!B||g?(v.display=C?"block":"none",v.height=""):(C?(v.display="block",q=x.scrollHeight,
v.height="0px"):(m.add(x,"dgrid-tree-resetting"),v.height=x.scrollHeight+"px"),setTimeout(function(){m.remove(x,"dgrid-tree-resetting");v.height=C?q?q+"px":"auto":"0px"},0));C?this._expanded[t.id]=!0:delete this._expanded[t.id]}return u(A)}}},_configColumns:function(){var a=this.inherited(arguments);this._expanded={};for(var b=0,g=a.length;b<g;b++)if(a[b].renderExpando){this._configureTreeColumn(a[b]);break}return a},insertRow:function(a){var b=this.inherited(arguments),g=this.row(b);(g=this.shouldExpand(g,
this._currentLevel,this._expanded[g.id]))&&this.expand(b,!0,!0);(g||!this.collection.mayHaveChildren||this.collection.mayHaveChildren(a))&&m.add(b,"dgrid-row-expandable");return b},removeRow:function(a,b){var g=a.connected,k={};g&&(g._handles&&(q.forEach(g._handles,function(k){k.remove()}),delete g._handles),g._rows&&(k.rows=g._rows),e("\x3e.dgrid-row",g).forEach(function(g){this.removeRow(g,!0,k)},this),g._rows&&(g._rows.length=0,delete g._rows),b||f.destroy(g));this.inherited(arguments)},_refreshCellFromItem:function(a,
b){if(!a.column.renderExpando)return this.inherited(arguments);this.inherited(arguments,[a,b,{queryLevel:e(".dgrid-expando-icon",a.element)[0].level-1}])},cleanup:function(){this.inherited(arguments);this.collapseOnRefresh&&(this._expanded={})},_destroyColumns:function(){this.inherited(arguments);for(var a=this._treeColumnListeners,b=a.length;b--;)a[b].remove();this._treeColumnListeners=[];this._treeColumn=null},_calcRowHeight:function(a){var b=a.connected;return this.inherited(arguments)+(b?b.offsetHeight:
0)},_configureTreeColumn:function(b){var l=this,g=this.collection,k=".dgrid-content .dgrid-column-"+b.id,t;this._treeColumn=b;if(!b._isConfiguredTreeColumn){var z=b.renderCell||this._defaultRenderCell;b._isConfiguredTreeColumn=!0;b.renderCell=function(k,a,c,t){if(g){var e=Number(t&&t.queryLevel)+1,f=!g.mayHaveChildren||g.mayHaveChildren(k),m,e=l._currentLevel=isNaN(e)?0:e;m=b.renderExpando(e,f,l._expanded[g.getIdentity(k)],k);m.level=e;m.mayHaveChildren=f;(k=z.call(b,k,a,c,t))&&k.nodeType?(c.appendChild(m),
c.appendChild(k)):c.insertBefore(m,c.firstChild)}};"function"!==typeof b.renderExpando&&(b.renderExpando=this._defaultRenderExpando)}var e=this._treeColumnListeners;0===e.length&&(e.push(this.on(b.expandOn||".dgrid-expando-icon:click,"+k+":dblclick,"+k+":keydown",function(k){var a=l.row(k);l.collection.mayHaveChildren&&!l.collection.mayHaveChildren(a.data)||"keydown"===k.type&&32!==k.keyCode||"dblclick"===k.type&&t&&1<t.count&&a.id===t.id&&-1<k.target.className.indexOf("dgrid-expando-icon")||l.expand(a);
-1<k.target.className.indexOf("dgrid-expando-icon")&&(t&&t.id===l.row(k).id?t.count++:t={id:l.row(k).id,count:1})})),a("touch")&&e.push(this.on(c.selector(k,c.dbltap),function(){l.expand(this)})))},_defaultRenderExpando:function(a,b,g){var k=this.grid.isRTL?"right":"left",c="dgrid-expando-icon";b&&(c+=" ui-icon ui-icon-triangle-1-"+(g?"se":"e"));return f.create("div",{className:c,innerHTML:"\x26nbsp;",style:"margin-"+k+": "+a*this.grid.treeIndentWidth+"px; float: "+k+";"})},_onNotification:function(a,
b){"delete"===b.type&&delete this._expanded[b.id];this.inherited(arguments)},_onTreeTransitionEnd:function(a){var b=this,g=this.style.height;g&&(this.style.display="0px"===g?"none":"block");a&&(m.add(this,"dgrid-tree-resetting"),setTimeout(function(){m.remove(b,"dgrid-tree-resetting")},0));this.style.height=""}})})},"dgrid/util/has-css3":function(){define(["dojo/has"],function(r){function h(h,f){var m=h.style,n;if(f in m)return!0;f=f.slice(0,1).toUpperCase()+f.slice(1);for(n=q.length;n--;)if(q[n]+
f in m)return q[n];return!1}var q=["ms","O","Moz","Webkit"];r.add("css-transitions",function(q,f,m){return h(m,"transitionProperty")});r.add("css-transforms",function(q,f,m){return h(m,"transform")});r.add("css-transforms3d",function(q,f,m){return h(m,"perspective")});r.add("transitionend",function(){var h=r("css-transitions");return h?!0===h?"transitionend":{ms:"MSTransitionEnd",O:"oTransitionEnd",Moz:"transitionend",Webkit:"webkitTransitionEnd"}[h]:!1});return r})},"dgrid/Grid":function(){define("dojo/_base/declare dojo/_base/lang dojo/dom-construct dojo/dom-class dojo/on dojo/has ./List ./util/misc dojo/_base/sniff".split(" "),
function(r,h,q,p,f,m,n,e){function u(a,b){b&&b.nodeType&&a.appendChild(b)}r=r(n,{columns:null,hasNeutralSort:!1,cellNavigation:!0,tabableHeader:!0,showHeader:!0,column:function(a){return"object"!==typeof a?this.columns[a]:this.cell(a).column},listType:"grid",cell:function(a,b){if(a.column&&a.element)return a;a.target&&a.target.nodeType&&(a=a.target);var c;if(a.nodeType){do{if(this._rowIdToObject[a.id])break;var d=a.columnId;if(d){b=d;c=a;break}a=a.parentNode}while(a&&a!==this.domNode)}if(!c&&"undefined"!==
typeof b){var l=this.row(a);if(d=l&&l.element)for(var d=d.getElementsByTagName("td"),g=0;g<d.length;g++)if(d[g].columnId===b){c=d[g];break}}if(null!=a)return{row:l||this.row(a),column:b&&this.column(b),element:c}},createRowCells:function(a,b,c,d,l){var g=q.create("table",{className:"dgrid-row-table",role:"presentation"}),k=9>m("ie")?q.create("tbody",null,g):g,t,z,f,n,u,x,v,h,w,p;c=c||this.subRows;z=0;for(f=c.length;z<f;z++)for(x=c[z],t=q.create("tr",null,k),x.className&&(t.className=x.className),
n=0,u=x.length;n<u;n++){v=x[n];h=v.id;w=v.field?" field-"+e.escapeCssIdentifier(v.field,"-"):"";(p="function"===typeof v.className?v.className(d):v.className)&&(w+=" "+p);w=q.create(a,{className:"dgrid-cell"+(h?" dgrid-column-"+e.escapeCssIdentifier(h,"-"):"")+w,role:"th"===a?"columnheader":"gridcell"});w.columnId=h;if(h=v.colSpan)w.colSpan=h;if(h=v.rowSpan)w.rowSpan=h;b(w,v,d,l);t.appendChild(w)}return g},_createBodyRowCell:function(a,b,c,d){var l=c;b.get?l=b.get(c):"field"in b&&"_item"!==b.field&&
(l=c[b.field]);b.renderCell?u(a,b.renderCell(c,l,a,d)):this._defaultRenderCell.call(b,c,l,a,d)},_createHeaderRowCell:function(a,b){var c=b.headerNode=a,d=b.field;d&&(a.field=d);b.renderHeaderCell?u(c,b.renderHeaderCell(c)):("label"in b||b.field)&&c.appendChild(document.createTextNode("label"in b?b.label:b.field));!1!==b.sortable&&d&&"_item"!==d&&(a.sortable=!0,a.className+=" dgrid-sortable")},left:function(a,b){a.element||(a=this.cell(a));return this.cell(this._move(a,-(b||1),"dgrid-cell"))},right:function(a,
b){a.element||(a=this.cell(a));return this.cell(this._move(a,b||1,"dgrid-cell"))},_defaultRenderCell:function(a,b,c){if(this.formatter){var d=this.formatter,l=this.grid.formatterScope;c.innerHTML="string"===typeof d&&l?l[d](b,a):this.formatter(b,a)}else null!=b&&c.appendChild(document.createTextNode(b))},renderRow:function(a,b){var c=this.createRowCells("td",h.hitch(this,"_createBodyRowCell"),b&&b.subRows,a,b),d=q.create("div",{role:"row"});d.appendChild(c);return d},renderHeader:function(){var a=
this,b=this.headerNode;b.setAttribute("role","row");q.empty(b);var c=this.createRowCells("th",h.hitch(this,"_createHeaderRowCell"),this.subRows&&this.subRows.headerRows);this._rowIdToObject[c.id=this.id+"-header"]=this.columns;b.appendChild(c);this._sortListener&&this._sortListener.remove();this._sortListener=f(c,"click,keydown",function(c){if("click"===c.type||32===c.keyCode||!m("opera")&&13===c.keyCode){var l=c.target,g,k;do if(l.sortable){g=l.field||l.columnId;k=a.sort[0];g=a.hasNeutralSort&&k&&
k.property===g&&k.descending?[]:[{property:g,descending:k&&k.property===g&&!k.descending}];k={bubbles:!0,cancelable:!0,grid:a,parentType:c.type,sort:g};f.emit(c.target,"dgrid-sort",k)&&(a._sortNode=l,a.set("sort",g));break}while((l=l.parentNode)&&l!==b)}})},resize:function(){if(this.headerNode){var a=this.headerNode.firstChild,b=this.contentNode,c;this.inherited(arguments);b.style.width="";b&&a&&(c=a.offsetWidth)>b.offsetWidth&&(b.style.width=c+"px")}},destroy:function(){this._destroyColumns();this._sortListener&&
this._sortListener.remove();this.inherited(arguments)},_setSort:function(){this.inherited(arguments);this.updateSortArrow(this.sort)},_findSortArrowParent:function(a){var b=this.columns,c;for(c in b){var d=b[c];if(d.field===a)return d.headerNode}},updateSortArrow:function(a,b){this._lastSortedArrow&&(p.remove(this._lastSortedArrow.parentNode,"dgrid-sort-up dgrid-sort-down"),q.destroy(this._lastSortedArrow),delete this._lastSortedArrow);b&&(this.sort=a);if(a[0]){var c=a[0].property,d=a[0].descending,
c=this._sortNode||this._findSortArrowParent(c);delete this._sortNode;c&&(c=c.contents||c,this._lastSortedArrow=q.create("div",{className:"dgrid-sort-arrow ui-icon",innerHTML:"\x26nbsp;",role:"presentation"},c,"first"),p.add(c,"dgrid-sort-"+(d?"down":"up")),this.resize())}},styleColumn:function(a,b){return this.addCssRule("#"+e.escapeCssIdentifier(this.domNode.id)+" .dgrid-column-"+e.escapeCssIdentifier(a,"-"),b)},_configColumns:function(a,b){var c=[],d=b instanceof Array;e.each(b,function(l,g){"string"===
typeof l&&(b[g]=l={label:l});d||l.field||(l.field=g);g=l.id=l.id||(isNaN(g)?g:a+g);this._configColumn&&(this._configColumn(l,b,a),g=l.id);d&&(this.columns[g]=l);l.grid=this;c.push(l)},this);return d?b:c},_destroyColumns:function(){this.cleanup()},configStructure:function(){var a=this.subRows,b=this._columns=this.columns;this.columns=!b||b instanceof Array?{}:b;if(a)for(b=0;b<a.length;b++)a[b]=this._configColumns(b+"-",a[b]);else this.subRows=[this._configColumns("",b)]},_getColumns:function(){return this._columns||
this.columns},_setColumns:function(a){this._destroyColumns();this.subRows=null;this.columns=a;this._updateColumns()},_setSubRows:function(a){this._destroyColumns();this.subRows=a;this._updateColumns()},_updateColumns:function(){this.configStructure();this.renderHeader();this.refresh();this._lastCollection&&this.renderArray(this._lastCollection);this._started&&(this.sort.length?(this._lastSortedArrow=null,this.updateSortArrow(this.sort)):this.resize())}});r.appendIfNode=u;return r})},"dgrid/List":function(){define("dojo/_base/declare dojo/dom-construct dojo/dom-class dojo/on dojo/has ./util/misc xide/$".split(" "),
function(r,h,q,p,f,m,n){function e(k,a){k.className="dgrid-scrollbar-measure";document.body.appendChild(k);var g=k["offset"+a]-k["client"+a];k.className="";k.parentNode&&document.body.removeChild(k);return g}function u(k){q.replace(this.domNode,k,this._class||"");this._class=k}function a(){return this._class}var b=[];f("mozilla")&&b.push("has-mozilla");f("touch")&&b.push("has-touch");q.add(document.documentElement,b);f.add("pointer",function(k){return"PointerEvent"in k?"pointer":"MSPointerEvent"in
k?"MSPointer":!1});var c,d;f.add("dom-scrollbar-width",function(k,a,g){return e(g,"Width")});f.add("dom-scrollbar-height",function(k,a,g){return e(g,"Height")});f.add("dom-rtl-scrollbar-left",function(k,a,g){k=document.createElement("div");g.className="dgrid-scrollbar-measure";g.setAttribute("dir","rtl");g.appendChild(k);document.body.appendChild(g);a=!!f("ie")||!!f("trident")||/\bEdge\//.test(navigator.userAgent)||k.offsetLeft>=f("dom-scrollbar-width");g.className="";g.parentNode&&document.body.removeChild(g);
h.destroy(k);g.removeAttribute("dir");return a});var l=0,g=r(null,{tabableHeader:!1,showHeader:!1,showFooter:!1,maintainOddEven:!0,cleanAddedRules:!0,addUiClasses:!1,highlightDuration:250,postscript:function(k,a){var g=this;(this._Row=function(k,a,g){this.id=k;this.data=a;this.element=g}).prototype.remove=function(){g.removeRow(this.element)};a&&(this.srcNodeRef=a=a.nodeType?a:document.getElementById(a));this.create(k,a)},listType:"list",create:function(k,a){var b=this.domNode=a||document.createElement("div"),
c;k&&(this.params=k,r.safeMixin(this,k),c=k["class"]||k.className||b.className);this.sort=this.sort||[];this._listeners=[];this._rowIdToObject={};this.postMixInProperties&&this.postMixInProperties();this.id=b.id=b.id||this.id||g.autoIdPrefix+l++;this.buildRendering();c&&u.call(this,c);this.postCreate();delete this.srcNodeRef},buildRendering:function(){var k=this.domNode,a=this.addUiClasses,g=this,b,c,d;d=this.isRTL="rtl"===(document.body.dir||document.documentElement.dir||document.body.style.direction).toLowerCase();
k.className="";k.setAttribute("role","grid");q.add(k,"dgrid dgrid-"+this.listType+(a?" ui-widget":""));b=this.headerNode=h.create("div",{tabIndex:-1,className:"dgrid-header dgrid-header-row"+(a?" ui-widget-header":"")+(this.showHeader?"":" dgrid-header-hidden")},k);c=this.bodyNode=h.create("div",{className:"dgrid-scroller"},k);f("ff")&&(c.tabIndex=-1);this.headerScrollNode=h.create("div",{className:"dgrid-header dgrid-header-scroll dgrid-scrollbar-width"+(a?" widget":"")},k);this.footerNode=h.create("div",
{className:"dgrid-footer"+(this.showFooter?"":" dgrid-footer-hidden")},k);d&&(k.className+=" dgrid-rtl"+(f("dom-rtl-scrollbar-left")?" dgrid-rtl-swap":""));p(c,"scroll",function(a){g.showHeader&&(b.scrollLeft=a.scrollLeft||c.scrollLeft);a.stopPropagation();p.emit(k,"scroll",{scrollTarget:c})});this.configStructure();this.renderHeader();this.contentNode=this.touchNode=h.create("div",{className:"dgrid-content"+(a?" widget":"")},this.bodyNode)},startup:function(){this._started||(this.inherited(arguments),
this._started=!0,this.set("sort",this.sort))},configStructure:function(){},resize:function(){var k=this.bodyNode,a=this.footerNode,a=this.showFooter?a.offsetHeight:0;this.headerScrollNode.style.height=k.style.marginTop=this.headerNode.offsetHeight+"px";k.style.marginBottom=a+"px";c||(c=f("dom-scrollbar-width"),d=f("dom-scrollbar-height"),f("ie")&&(c++,d++),17!==c&&m.addCssRule(".dgrid-rtl-swap .dgrid-header-row","left: "+c+"px"))},addCssRule:function(k,a){var g=m.addCssRule(k,a);this.cleanAddedRules&&
this._listeners.push(g);return g},on:function(k,a){var g=p(this.domNode,k,a);f("dom-addeventlistener")||this._listeners.push(g);return g},cleanup:function(){for(var k in this._rowIdToObject)if(this._rowIdToObject[k]!==this.columns){var a=document.getElementById(k);a&&this.removeRow(a,!0)}},destroy:function(){if(this._listeners){for(var k=this._listeners.length;k--;)this._listeners[k].remove();this._listeners=null}this._started=!1;this.cleanup();n(this.domNode).remove()},refresh:function(){this.cleanup();
this._rowIdToObject={};this._autoRowId=0;n(this.contentNode).empty()},adjustRowIndices:function(k){var a=k.rowIndex;if(-1<a){do-1<k.rowIndex&&(this.maintainOddEven&&q.contains(k,"dgrid-row")&&q.replace(k,1===a%2?"dgrid-row-odd":"dgrid-row-even",0===a%2?"dgrid-row-odd":"dgrid-row-even"),k.rowIndex=a++);while((k=k.nextSibling)&&k.rowIndex!==a)}},renderArray:function(k,a,g){g=g||{};var b=g.start||0,c=document.createDocumentFragment(),d=[],l=0,e=k.length;a||(this._lastCollection=k);for(;l<e;)d[l]=this.insertRow(k[l],
c,null,b++,g),l++;(k=a?a.parentNode:this.contentNode)&&k.parentNode&&(k!==this.contentNode||e)&&(k.insertBefore(c,a||null),e&&this.adjustRowIndices(d[e-1]));return d},renderHeader:function(){},_autoRowId:0,insertRow:function(k,a,g,b,c){var d=this.id+"-row-"+(this.collection&&this.collection.getIdentity?this.collection.getIdentity(k):this._autoRowId++),l=document.getElementById(d),e=l&&l.previousSibling;l&&(l===g&&(g=(g.connected||g).nextSibling),this.removeRow(l,!1,c));l=this.renderRow(k,c);l.className=
(l.className||"")+" dgrid-row "+(1===b%2?"dgrid-row-odd":"dgrid-row-even");this._rowIdToObject[l.id=d]=k;a.insertBefore(l,g||null);l.rowIndex=b;e&&e.rowIndex!==l.rowIndex-1&&this.adjustRowIndices(e);return l},renderRow:function(a){var g=document.createElement("div");g.appendChild(document.createTextNode(a));return g},removeRow:function(a,g){a=a.element||a;delete this._rowIdToObject[a.id];g||n(a).remove()},row:function(a){var g;if(a instanceof this._Row)return a;if(!a)return null;a.target&&a.target.nodeType&&
(a=a.target);if(a.nodeType){do{var b=a.id;if(g=this._rowIdToObject[b])return new this._Row(b.substring(this.id.length+5),g,a);a=a.parentNode}while(a&&a!==this.domNode)}else return"object"===typeof a?g=this.collection.getIdentity(a):(g=a,a=this._rowIdToObject[this.id+"-row-"+g]),new this._Row(g,a,document.getElementById(this.id+"-row-"+g))},cell:function(a){return{row:this.row(a)}},_move:function(a,g,b,c){var d,l;l=d=a.element;g=g||1;do if(a=d[0>g?"previousSibling":"nextSibling"]){do if((d=a)&&-1<
(d.className+" ").indexOf(b+" ")){l=d;g+=0>g?1:-1;break}while(a=(!c||!d.hidden)&&d[0>g?"lastChild":"firstChild"])}else if(d=d.parentNode,!d||d===this.bodyNode||d===this.headerNode)break;while(g);return l},up:function(a,g,b){a.element||(a=this.row(a));return this.row(this._move(a,-(g||1),"dgrid-row",b))},down:function(a,g,b){a.element||(a=this.row(a));return this.row(this._move(a,g||1,"dgrid-row",b))},scrollTo:function(a){"undefined"!==typeof a.x&&(this.bodyNode.scrollLeft=a.x);"undefined"!==typeof a.y&&
(this.bodyNode.scrollTop=a.y)},getScrollPosition:function(){return{x:this.bodyNode.scrollLeft,y:this.bodyNode.scrollTop}},get:function(a){var g="_get"+a.charAt(0).toUpperCase()+a.slice(1);return"function"===typeof this[g]?this[g].apply(this,[].slice.call(arguments,1)):this[a]},set:function(a,g){if("object"===typeof a)for(var b in a)this.set(b,a[b]);else b="_set"+a.charAt(0).toUpperCase()+a.slice(1),"function"===typeof this[b]?this[b].apply(this,[].slice.call(arguments,1)):this[a]=g;return this},_getClass:a,
_setClass:u,_getClassName:a,_setClassName:u,_setSort:function(a,g){this.sort="string"!==typeof a?a:[{property:a,descending:g}];this._applySort()},_applySort:function(){this.refresh();if(this._lastCollection){var a=this.sort;if(a&&0<a.length){var g=a[0].property,b=!!a[0].descending;this._lastCollection.sort(function(a,k){var c=a[g],d=k[g];void 0===c&&(c="");void 0===d&&(d="");return c===d?0:c>d!==b?1:-1})}this.renderArray(this._lastCollection)}},_setShowHeader:function(a){var g=this.headerNode;this.showHeader=
a;q.toggle(g,"dgrid-header-hidden",!a);this.renderHeader();this.resize();a&&(g.scrollLeft=this.getScrollPosition().x)},_setShowFooter:function(a){this.showFooter=a;q.toggle(this.footerNode,"dgrid-footer-hidden",!a);this.resize()}});g.autoIdPrefix="dgrid_";return g})},"dgrid/util/misc":function(){define(["dojo/has"],function(r){r.add("dom-contains",function(e,f,a){return!!a.contains});var h=[],q,p,f,m=/([^A-Za-z0-9_\u00A0-\uFFFF-])/g,n={defaultDelay:15,throttle:function(e,f,a){var b=!1;a=a||n.defaultDelay;
return function(){b||(b=!0,e.apply(f,arguments),setTimeout(function(){b=!1},a))}},throttleDelayed:function(e,f,a){var b=!1;a=a||n.defaultDelay;return function(){if(!b){b=!0;var c=arguments;setTimeout(function(){b=!1;e.apply(f,c)},a)}}},debounce:function(e,f,a){var b;a=a||n.defaultDelay;return function(){b&&(clearTimeout(b),b=null);var c=arguments;b=setTimeout(function(){e.apply(f,c)},a)}},each:function(e,f,a){var b,c;if(e)if("number"===typeof e.length)for(b=0,c=e.length;b<c;b++)f.call(a,e[b],b,e);
else for(b in e)f.call(a,e[b],b,e)},contains:function(e,f){return r("dom-contains")?e.contains(f):e.compareDocumentPosition(f)&8},addCssRule:function(e,m){q||(q=document.createElement("style"),document.getElementsByTagName("head")[0].appendChild(q),q=q.sheet||q.styleSheet,p=q.deleteRule?"deleteRule":"removeRule",f=q.cssRules?"cssRules":"rules");var a=h.length;h[a]=(q.cssRules||q.rules).length;q.addRule?q.addRule(e,m):q.insertRule(e+"{"+m+"}",h[a]);return{get:function(b){return q[f][h[a]].style[b]},
set:function(b,c){"undefined"!==typeof h[a]&&(q[f][h[a]].style[b]=c)},remove:function(){var b=h[a],c,d;if(void 0!==b)for(q[p](b),h[a]=void 0,c=a+1,d=h.length;c<d;c++)h[c]>b&&h[c]--}}},escapeCssIdentifier:function(e,f){return"string"===typeof e?e.replace(m,f||"\\$1"):e}};return n})},"dgrid/Selection":function(){define("dojo/_base/declare dojo/dom-class dojo/on dojo/has dojo/aspect ./List dgrid/util/touch dojo/query dojo/_base/sniff dojo/dom".split(" "),function(r,h,q,p,f,m,n){function e(a,b){for(var c=
a.unselectable=b?"on":"",d=a.getElementsByTagName("*"),l=d.length;--l;)"INPUT"!==d[l].tagName&&"TEXTAREA"!==d[l].tagName&&(d[l].unselectable=c)}function u(a,k){var c=a.bodyNode,d=k?"text":21>p("ff")?"-moz-none":"none";b&&"msUserSelect"!==b?c.style[b]=d:p("dom-selectstart")?k||a._selectstartHandle?k&&a._selectstartHandle&&(a._selectstartHandle.remove(),delete a._selectstartHandle):a._selectstartHandle=q(c,"selectstart",function(a){var g=a.target&&a.target.tagName;"INPUT"!==g&&"TEXTAREA"!==g&&a.preventDefault()}):
(e(c,!k),k||a._unselectableHandle)?k&&a._unselectableHandle&&(a._unselectableHandle.remove(),delete a._unselectableHandle):a._unselectableHandle=f.after(a,"renderRow",function(a){e(a,!0);return a})}p.add("dom-comparedocumentposition",function(a,b,c){return!!c.compareDocumentPosition});p.add("dom-selectstart","undefined"!==typeof document.onselectstart);var a=p("mac")?"metaKey":"ctrlKey",b=p("css-user-select"),c=(m=p("pointer"))&&"MS"===m.slice(0,2),d=m?m+(c?"Down":"down"):"mousedown",l=m?m+(c?"Up":
"up"):"mouseup";"WebkitUserSelect"===b&&"undefined"!==typeof document.documentElement.style.msUserSelect&&(b=!1);return r(null,{selectionDelegate:".dgrid-row",selectionEvents:d+","+l+",dgrid-cellfocusin",selectionTouchEvents:p("touch")?n.tap:null,deselectOnRefresh:!0,allowSelectAll:!1,selection:{},selectionMode:"extended",allowTextSelection:void 0,_selectionTargetType:"rows",create:function(){this.selection={};return this.inherited(arguments)},postCreate:function(){this.inherited(arguments);this._initSelectionEvents();
var a=this.selectionMode;this.selectionMode="";this._setSelectionMode(a)},destroy:function(){this.inherited(arguments);this._selectstartHandle&&this._selectstartHandle.remove();this._unselectableHandle&&this._unselectableHandle.remove();this._removeDeselectSignals&&this._removeDeselectSignals()},_setSelectionMode:function(a){a!==this.selectionMode&&(this.clearSelection(),this.selectionMode=a,this._selectionHandlerName="_"+a+"SelectionHandler",this._setAllowTextSelection(this.allowTextSelection))},
_setAllowTextSelection:function(a){"undefined"!==typeof a?u(this,a):u(this,"none"===this.selectionMode);this.allowTextSelection=a},_handleSelect:function(a,b){if(this[this._selectionHandlerName]&&this.allowSelect(this.row(b))&&("dgrid-cellfocusin"!==a.type||"mousedown"!==a.parentType)&&(a.type!==l||b===this._waitForMouseUp)){this._waitForMouseUp=null;this._selectionTriggerEvent=a;if(!a.keyCode||!a.ctrlKey||32===a.keyCode)if(!a.shiftKey&&a.type===d&&this.isSelected(b))this._waitForMouseUp=b;else this[this._selectionHandlerName](a,
b);this._selectionTriggerEvent=null}},_singleSelectionHandler:function(g,b){var c=g.keyCode?g.ctrlKey:g[a];this._lastSelected===b?this.select(b,null,!c||!this.isSelected(b)):(this.clearSelection(),this.select(b),this._lastSelected=b)},_multipleSelectionHandler:function(g,b){var c=this._lastSelected,d=g.keyCode?g.ctrlKey:g[a],l;g.shiftKey||(l=d?null:!0,c=null);this.select(b,c,l,null,-1!==g.type.indexOf("mouse")?"mouse":g.type);c||(this._lastSelected=b)},_extendedSelectionHandler:function(g,b){(2===
g.button?this.isSelected(b):g.keyCode?g.ctrlKey:g[a])||this.clearSelection(null,!0);this._multipleSelectionHandler(g,b)},_toggleSelectionHandler:function(a,b){this.select(b,null,null)},_initSelectionEvents:function(){var g=this,b=this.contentNode,c=this.selectionDelegate;this._selectionEventQueues={deselect:[],select:[]};p("touch")&&!p("pointer")&&this.selectionTouchEvents?(q(b,n.selector(c,this.selectionTouchEvents),function(a){g._handleSelect(a,this);g._ignoreMouseSelect=this}),q(b,q.selector(c,
this.selectionEvents),function(a){g._ignoreMouseSelect!==this?g._handleSelect(a,this):a.type===l&&(g._ignoreMouseSelect=null)})):q(b,q.selector(c,this.selectionEvents),function(a){g._handleSelect(a,this)});this.addKeyHandler&&this.addKeyHandler(32,function(a){g._handleSelect(a,a.target)});if(this.allowSelectAll)this.on("keydown",function(b){b[a]&&65===b.keyCode&&!/\bdgrid-input\b/.test(b.target.className)&&(b.preventDefault(),g[g.allSelected?"clearSelection":"selectAll"]())});this._setCollection&&
f.before(this,"_setCollection",function(a){g._updateDeselectionAspect(a)});this._updateDeselectionAspect()},_updateDeselectionAspect:function(a){function b(a,g,k){if((a=c.row(a))&&c.selection[a.id])c[g](a,null,!0,null,k)}var c=this,d;this._removeDeselectSignals&&this._removeDeselectSignals();d=a&&a.track&&this._observeCollection?[f.before(this,"_observeCollection",function(a){d.push(a.on("delete",function(a){"undefined"===typeof a.index&&b(a.id,"deselect")}))}),f.after(this,"_observeCollection",function(a){d.push(a.on("update",
function(g){"undefined"!==typeof g.index&&b(a.getIdentity(g.target),"select","update")}))},!0)]:[f.before(this,"removeRow",function(a,b){var g;b||(g=this.row(a))&&g.id in this.selection&&this.deselect(g)})];this._removeDeselectSignals=function(){for(var a=d.length;a--;)d[a].remove();d=[]}},allowSelect:function(){return!0},_fireSelectionEvent:function(a){var b=this._selectionEventQueues[a],c=this._selectionTriggerEvent,d;d={bubbles:!0,grid:this};c&&(d.parentType=c.type);d[this._selectionTargetType]=
b;this._selectionEventQueues[a]=[];q.emit(this.contentNode,"dgrid-"+a,d)},_fireSelectionEvents:function(){var a=this._selectionEventQueues,b;for(b in a)a[b].length&&this._fireSelectionEvent(b)},_select:function(a,b,c){var d,l,f;"undefined"===typeof c&&(c=!0);a.element||(a=this.row(a));if(!1===c||this.allowSelect(a))if(d=this.selection,l=!!d[a.id],null===c&&(c=!l),f=a.element,c||this.allSelected?d[a.id]=c:delete this.selection[a.id],f&&(c?h.add(f,"dgrid-selected"+(this.addUiClasses?" ui-state-active":
"")):h.remove(f,"dgrid-selected ui-state-active")),c!==l&&f&&this._selectionEventQueues[(c?"":"de")+"select"].push(a),b)if(b.element||(b=this.row(b)),b){if(b=b.element)for(d=this._determineSelectionDirection(f,b),d||(b=document.getElementById(b.id),d=this._determineSelectionDirection(f,b));a.element!==b&&(a=this[d](a));)this._select(a,null,c)}else this._lastSelected=f},_determineSelectionDirection:p("dom-comparedocumentposition")?function(a,b){var c=b.compareDocumentPosition(a);return c&1?!1:2===
c?"down":"up"}:function(a,b){return 1>b.sourceIndex?!1:b.sourceIndex>a.sourceIndex?"down":"up"},select:function(a,b,c){this._select(a,b,c);this._fireSelectionEvents()},deselect:function(a,b){this.select(a,b,!1)},clearSelection:function(a,b){this.allSelected=!1;for(var c in this.selection)a!==c&&this._select(c,null,!1);b||(this._lastSelected=null);this._fireSelectionEvents()},selectAll:function(){this.allSelected=!0;this.selection={};for(var a in this._rowIdToObject){var b=this.row(this._rowIdToObject[a]);
this._select(b.id,null,!0)}this._fireSelectionEvents()},isSelected:function(a){if("undefined"===typeof a||null===a)return!1;a.element||(a=this.row(a));return a.id in this.selection?!!this.selection[a.id]:this.allSelected&&(!a.data||this.allowSelect(a))},refresh:function(){this.deselectOnRefresh&&this.clearSelection();this._lastSelected=null;return this.inherited(arguments)},renderArray:function(){var a=this.inherited(arguments),b=this.selection,c,d,l;for(c=0;c<a.length;c++)d=this.row(a[c]),(l=d.id in
b?b[d.id]:this.allSelected)&&this.select(d,null,l,null,"renderArray");this._fireSelectionEvents();return a}})})},"dgrid/util/touch":function(){define(["dojo/on"],function(r,h){function q(f,m,n,e){if(!(1<n.targetTouches.length)){var u=n.changedTouches[0],a=u.screenX,b=u.screenY;e&&n.preventDefault();var c=r(f,"touchend",function(d){var l=d.changedTouches[0];d.targetTouches.length||(Math.abs(l.screenX-a)<p.tapRadius&&Math.abs(l.screenY-b)<p.tapRadius&&(e&&d.preventDefault(),m.call(this,d)),c.remove())})}}
var p={tapRadius:10,dbltapTime:250,selector:function(f,m,n){return function(e,u){var a=m.bubble;a?m=a:!1!==n&&(n=!0);return r(e,m,function(a){var c=a.target;3===c.nodeType&&(c=c.parentNode);for(;!h.matches(c,f,e);)if(c===e||!n||!(c=c.parentNode))return;return u.call(c,a)})}},countCurrentTouches:function(f,m){if(!("touches"in f))return-1;var n,e,u;for(e=n=0;u=f.touches[n];++n)m.contains(u.target)&&++e;return e},tap:function(f,m){return r(f,"touchstart",function(n){q(f,m,n)})},dbltap:function(f,m){var n,
e;return r(f,"touchstart",function(u){n?q(f,function(a){if(n){var b=a.changedTouches[0];Math.abs(b.screenX-n.screenX)<p.tapRadius&&Math.abs(b.screenY-n.screenY)<p.tapRadius&&(e&&clearTimeout(e),n=e=null,m.call(this,a))}},u,!0):q(f,function(a){n=a.changedTouches[0];e=setTimeout(function(){n=e=null},p.dbltapTime)},u)})}};return p})},"dgrid/OnDemandList":function(){define("./List ./_StoreMixin dojo/_base/declare dojo/_base/lang dojo/dom-construct dojo/on dojo/when ./util/misc".split(" "),function(r,
h,q,p,f,m,n,e){return q([r,h],{minRowsPerPage:2500,maxRowsPerPage:250,maxEmptySpace:Infinity,bufferRows:10,farOffRemoval:2E3,queryRowsOverlap:0,pagingMethod:"debounce",pagingDelay:e.defaultDelay,keepScrollPosition:!0,rowHeight:0,postCreate:function(){this.inherited(arguments);var f=this;m(this.bodyNode,"scroll",e[this.pagingMethod](function(a){f._processScroll(a)},null,this.pagingDelay))},destroy:function(){this.inherited(arguments);this._refreshTimeout&&clearTimeout(this._refreshTimeout)},renderQuery:function(e,
a){var b=this,c=a&&a.container||this.contentNode,d={query:e,count:0},l,g=this.preload,k={node:f.create("div",{className:"dgrid-preload",style:{height:"0"}},c),count:0,query:e,next:d};k.node.rowIndex=0;d.node=l=f.create("div",{className:"dgrid-preload"},c);d.previous=k;l.rowIndex=this.minRowsPerPage;g?((d.next=g.next)&&l.offsetTop>=g.node.offsetTop?d.previous=g:(d.next=g,d.previous=g.previous),d.previous.next=d,d.next.previous=d):this.preload=d;var t=f.create("div",{className:"dgrid-loading"},l,"before");
f.create("div",{className:"dgrid-below"},t).innerHTML=this.loadingMessage;a=p.mixin({start:0,count:this.minRowsPerPage},"level"in e?{queryLevel:e.level}:null);return this._trackError(function(){var g=e(a);return b.renderQueryResults(g,l,a).then(function(c){return g.totalLength.then(function(g){var k=c.length,e=l.parentNode,m=b.noDataNode;b._rows&&(b._rows.min=0,b._rows.max=k===g?Infinity:k-1);f.destroy(t);"queryLevel"in a||(b._total=g);0===g&&e&&(m&&(f.destroy(m),delete b.noDataNode),b.noDataNode=
m=f.create("div",{className:"dgrid-no-data",innerHTML:b.noDataMessage}),b._emit("noData"),e.insertBefore(m,b._getFirstRowSibling(e)));for(m=e=0;m<k;m++)e+=b._calcRowHeight(c[m]);k&&e&&(b.rowHeight=e/k);g-=k;d.count=g;l.rowIndex=k;g?l.style.height=Math.min(g*b.rowHeight,b.maxEmptySpace)+"px":l.style.display="none";b._previousScrollPosition&&(b.scrollTo(b._previousScrollPosition),delete b._previousScrollPosition);return n(b._processScroll()).then(function(){return c})})}).otherwise(function(a){f.destroy(t);
throw a;})})},refresh:function(e){var a=this;e&&e.keepScrollPosition&&(this._previousScrollPosition=this.getScrollPosition());this.inherited(arguments);if(this._renderedCollection)return this.renderQuery(function(b){return a._renderedCollection.fetchRange({start:b.start,end:b.start+b.count})}).then(function(){a._refreshTimeout=setTimeout(function(){m.emit(a.domNode,"dgrid-refresh-complete",{bubbles:!0,cancelable:!1,grid:a});a._refreshTimeout=null},0)})},resize:function(){this.inherited(arguments);
this._processScroll()},cleanup:function(){this.inherited(arguments);this.preload=null},renderQueryResults:function(e){var a=this.inherited(arguments),b=this._renderedCollection;b&&b.releaseRange&&a.then(function(a){a[0]&&!a[0].parentNode.tagName&&e.totalLength.then(function(){b.releaseRange(a[0].rowIndex,a[a.length-1].rowIndex+1)})});return a},_getFirstRowSibling:function(e){return e.lastChild},_calcRowHeight:function(e){var a=e.nextSibling;return a&&!/\bdgrid-preload\b/.test(a.className)?a.offsetTop-
e.offsetTop:e.offsetHeight},lastScrollTop:0,_processScroll:function(e){function a(a,g,c,k){var l=d.farOffRemoval,e=a.node;if(g>2*l){for(var t,m=e[c],n=0,z=0,u=[],v=m&&m.rowIndex,h;t=m;){var p=d._calcRowHeight(t);if(n+p+l>g||0>m.className.indexOf("dgrid-row")&&0>m.className.indexOf("dgrid-loading"))break;m=t[c];n+=p;z+=t.count||1;d.removeRow(t,!0);u.push(t);"rowIndex"in t&&(h=t.rowIndex)}d._renderedCollection.releaseRange&&"number"===typeof v&&"number"===typeof h&&(k?d._renderedCollection.releaseRange(h,
v+1):d._renderedCollection.releaseRange(v,h+1),d._rows[k?"max":"min"]=h,d._rows.max>=d._total-1&&(d._rows.max=Infinity));a.count+=z;k?(e.rowIndex-=z,b(a)):e.style.height=e.offsetHeight+n+"px";var B=document.createElement("div");for(a=u.length;a--;)B.appendChild(u[a]);setTimeout(function(){f.destroy(B)},1)}}function b(a,b){a.node.style.height=Math.min(a.count*d.rowHeight,b?Infinity:d.maxEmptySpace)+"px"}function c(a,b){do a=b?a.next:a.previous;while(a&&!a.node.offsetWidth);return a}if(this.rowHeight){var d=
this,l=d.bodyNode;e=e&&e.scrollTop||this.getScrollPosition().y;var l=l.offsetHeight+e,g,k,t=d.preload,m=d.lastScrollTop,n=d.bufferRows*d.rowHeight,h=n-d.rowHeight,q,x=!0;for(d.lastScrollTop=e;t&&!t.node.offsetWidth;)t=t.previous;for(;t&&t!==g;){g=d.preload;d.preload=t;k=t.node;var v=k.offsetTop;if(l+1+h<v)t=c(t,x=!1);else if(e-1-h>v+k.offsetHeight)t=c(t,x=!0);else{var v=((k.rowIndex?e-n:l)-v)/d.rowHeight,p=(l-e+2*n)/d.rowHeight,w=Math.max(Math.min((e-m)*d.rowHeight,d.maxRowsPerPage/2),d.maxRowsPerPage/
-2),p=p+Math.min(Math.abs(w),10);0===k.rowIndex&&(v-=p);v=Math.max(v,0);10>v&&0<v&&p+v<d.maxRowsPerPage&&(p+=Math.max(0,v),v=0);p=Math.min(Math.max(p,d.minRowsPerPage),d.maxRowsPerPage,t.count);if(0===p)t=c(t,x);else{var p=Math.ceil(p),v=Math.min(Math.floor(v),t.count-p),y={};t.count-=p;var r=k,F,w=d.queryRowsOverlap,G=(0<k.rowIndex||k.offsetTop>e)&&t;if(G){var D=t.previous;D&&(a(D,e-(D.node.offsetTop+D.node.offsetHeight),"nextSibling"),0<v&&D.node===k.previousSibling?(v=Math.min(t.count,v),t.previous.count+=
v,b(t.previous,!0),k.rowIndex+=v,w=0):p+=v,t.count-=v);y.start=k.rowIndex-w;y.count=Math.min(p+w,d.maxRowsPerPage);k.rowIndex=y.start+y.count}else t.next&&(a(t.next,t.next.node.offsetTop-l,"previousSibling",!0),r=k.nextSibling,r===t.next.node?(t.next.count+=t.count-v,t.next.node.rowIndex=v+p,b(t.next),t.count=v,w=0):F=!0),y.start=t.count,y.count=Math.min(p+w,d.maxRowsPerPage);F&&r&&r.offsetWidth&&(F=r.offsetTop);b(t);"level"in t.query&&(y.queryLevel=t.query.level);if("queryLevel"in y||!(y.start>d._total||
0>y.count)){var E=f.create("div",{className:"dgrid-loading",style:{height:p*d.rowHeight+"px"}},r,"before");f.create("div",{className:"dgrid-"+(G?"below":"above"),innerHTML:d.loadingMessage},E);E.count=p;d._trackError(function(){(function(a,g,c){var k=t.query(y);q=d.renderQueryResults(k,a,y).then(function(l){var e=d._rows;!e||"queryLevel"in y||!l.length||(g?(e.max<=e.min&&(e.min=l[0].rowIndex),e.max=l[l.length-1].rowIndex):(e.max<=e.min&&(e.max=l[l.length-1].rowIndex),e.min=l[0].rowIndex));r=a.nextSibling;
f.destroy(a);c&&r&&r.offsetWidth&&(e=d.getScrollPosition(),d.scrollTo({x:e.x,y:e.y+r.offsetTop-c,preserveMomentum:!0}));k.totalLength.then(function(a){"queryLevel"in y||(d._total=a,d._rows&&d._rows.max>=d._total-1&&(d._rows.max=Infinity));g&&(g.count=a-g.node.rowIndex,b(g))});d._processScroll();return l},function(b){f.destroy(a);throw b;})})(E,G,F)});t=t.previous}}}}return q}}})})},"dgrid/_StoreMixin":function(){define("dojo/_base/declare dojo/_base/lang dojo/Deferred dojo/aspect dojo/dom-construct dojo/has dojo/on dojo/when".split(" "),
function(r,h,q,p,f,m,n,e){function u(a){if("object"!==typeof a)a=Error(a);else if("cancel"===a.dojoType)return;n.emit(this.domNode,"dgrid-error",{grid:this,error:a,cancelable:!0,bubbles:!0})&&console.error(a)}return r(null,{collection:null,_renderedCollection:null,_rows:null,_observerHandle:null,shouldTrackCollection:!1,getBeforePut:!0,noDataMessage:"",loadingMessage:"",_total:0,constructor:function(){this.dirty={};this._updating={};this._columnsWithSet={};p.before(this,"configStructure",h.hitch(this,
function(){this._columnsWithSet={}}))},destroy:function(){this.inherited(arguments);this._renderedCollection&&this._cleanupCollection()},_configColumn:function(a){a.set&&(this._columnsWithSet[a.field]=a);this.inherited(arguments)},_setCollection:function(a){this._renderedCollection&&(this.cleanup(),this._cleanupCollection({shouldRevert:!a||a.storage!==this._renderedCollection.storage}));this.collection=a;if(this._started){if(a){var b=a;this.sort&&0<this.sort.length&&(b=a.sort(this.sort));b.track&&
this.shouldTrackCollection&&(b=b.track(),this._rows=[],this._observerHandle=this._observeCollection(b,this.contentNode,{rows:this._rows}));this._renderedCollection=b}this.refresh()}},_setStore:function(){},_getTotal:function(){return this._total},_cleanupCollection:function(a){a=a||{};this._renderedCollection.tracking&&this._renderedCollection.tracking.remove();this._observerHandle&&(this._observerHandle.remove(),this._observerHandle=this._rows=null);!1!==a.shouldRevert&&(this.dirty={});this._renderedCollection=
this.collection=null},_applySort:function(){this.collection&&this.set("collection",this.collection)},row:function(){var a=this.inherited(arguments);a&&a.data&&"undefined"!==typeof a.id&&(this.collection?a.id=this.collection.getIdentity(a.data):console.error("_StoreMixin:have no collection!"));return a},refresh:function(){var a=this.inherited(arguments);this.collection||(this.noDataNode=f.create("div",{className:"dgrid-no-data",innerHTML:this.noDataMessage},this.contentNode),this._emit("noData"));
return a},refreshCell:function(a){if(!this.collection||!this._createBodyRowCell)return!1;if(a.column){if(a.column&&a.column.selector)return(new q).resolve();this.inherited(arguments);return this.collection.get(a.row.id).then(h.hitch(this,"_refreshCellFromItem",a))}},_refreshCellFromItem:function(a,b,c){if(a&&a.element){var d=a.element;d.widget&&d.widget.destroyRecursive();f.empty(d);var l=this.dirty&&this.dirty[a.row.id];l&&(b=h.delegate(b,l));this._createBodyRowCell(d,a.column,b,c)}},renderArray:function(){var a=
this.inherited(arguments);this.collection||a.length&&this.noDataNode&&f.destroy(this.noDataNode);return a},insertRow:function(a,b,c,d,l){var g=this.collection,k=this.dirty,g=g&&g.getIdentity(a),e;g in k&&!(g in this._updating)&&(e=k[g]);e&&(a=h.delegate(a,e));k=this.inherited(arguments);l&&l.rows&&(l.rows[d]=k);this.noDataNode&&(f.destroy(this.noDataNode),this.noDataNode=null);return k},updateDirty:function(a,b,c){var d=this.dirty,l=d[a];l||(l=d[a]={});l[b]=c},save:function(){function a(a,k){return function(l){var e=
b._columnsWithSet,f=b._updating,t,m;if("function"===typeof l.set)l.set(k);else for(t in k)l[t]=k[t];for(t in e)m=e[t].set(l),void 0!==m&&(l[t]=m);f[a]=!0;return c.put(l).then(function(b){delete d[a];delete f[a];g[a]=b;return g})}}var b=this,c=this.collection,d=this.dirty,l=new q,g={},k=function(a){var g;return b.getBeforePut||!(g=b.row(a).data)?function(){return c.get(a)}:function(){return g}},e=l.then(function(){return g}),f;for(f in d)var m=a(f,d[f]),e=e.then(k(f)).then(m);l.resolve();return e},
revert:function(){this.dirty={};this.refresh()},_trackError:function(a){"string"===typeof a&&(a=h.hitch(this,a));var b=this,c;try{c=e(a())}catch(d){a=new q,a.reject(d),c=a.promise}c.otherwise(function(a){u.call(b,a)});return c},removeRow:function(a,b,c){var d={element:a};!b&&this.noDataMessage&&this.up(d).element===a&&this.down(d).element===a&&(this.noDataNode=f.create("div",{className:"dgrid-no-data",innerHTML:this.noDataMessage},this.contentNode),this._emit("noData"));(d=c&&c.rows||this._rows)&&
delete d[a.rowIndex];return this.inherited(arguments)},renderQueryResults:function(a,b,c){c=h.mixin({rows:this._rows},c);var d=this;return a.then(function(a){a=d.renderArray(a,b,c);delete d._lastCollection;return a})},_observeCollection:function(a,b,c){var d=this,l=c.rows,g,k=[a.on("delete, update",function(a){var k=a.previousIndex,e=a.index;void 0!==k&&l[k]&&("max"in l&&(void 0===e||e<l.min||e>l.max)&&l.max--,g=l[k],g.parentNode===b&&d.removeRow(g,!1,c),l.splice(k,1),("delete"===a.type||"update"===
a.type&&(k<e||void 0===e))&&l[k]&&l[k].rowIndex--);"delete"===a.type&&(g=null)}),a.on("add, update",function(a){var k=a.previousIndex,e=a.index;if(void 0!==e&&(!("max"in l)||e>=l.min&&e<=l.max)){"max"in l&&(void 0===k||k<l.min||k>l.max)&&l.max++;if(l.length){if(k=l[e],!k&&(k=l[e-1]))k=(k.connected||k).nextSibling}else k=d._getFirstRowSibling&&d._getFirstRowSibling(b);g&&k&&g.id===k.id&&(k=(k.connected||k).nextSibling);k&&!k.parentNode&&(k=document.getElementById(k.id));l.splice(e,0,void 0);g=d.insertRow(a.target,
b,k,e,c);d.highlightRow(g)}g=null}),a.on("add, delete, update",function(b){var g="undefined"!==typeof b.previousIndex?b.previousIndex:Infinity,c="undefined"!==typeof b.index?b.index:Infinity,k=Math.min(g,c);g!==c&&l[k]&&d.adjustRowIndices(l[k]);Infinity!==g&&d._processScroll&&(l[g]||l[g-1])&&d._processScroll();d._onNotification(l,b,a);a===d._renderedCollection&&"totalLength"in b&&(d._total=b.totalLength)})];return{remove:function(){for(;0<k.length;)k.pop().remove()}}},_onNotification:function(){}})})},
"dgrid/OnDemandGrid":function(){define(["dojo/_base/declare","./Grid","./OnDemandList"],function(r,h,q){return r([h,q],{})})},"dgrid/extensions/ColumnReorder":function(){define("dojo/_base/lang dojo/_base/declare dojo/_base/array dojo/dom-class dojo/on dojo/query dojo/dnd/Source".split(" "),function(r,h,q,p,f,m){function n(a,c){var d=c[2],l=a[d?"columnSets":"subRows"][c[1]];return d?l[c[2]]:l}function e(a,c,d){c[2]?a.columnSets[c[1]][c[2]]=d:a.subRows[c[1]]=d}function u(a,c){return c.slice(("dgrid-"+
a+"-").length)}var a=/(\d+)(?:-(\d+))?$/;r=h(m,{copyState:function(){return!1},checkAcceptance:function(a){return a===this},_legalMouseDown:function(a){return-1<a.target.className.indexOf("dgrid-resize-handle")?!1:this.inherited(arguments)},onDropInternal:function(b){var c=this.grid,d=a.exec(u(c.id,b[0].getAttribute("dndType"))),l=d[2]?"columnSets":"subRows",g=n(c,d),k=c.columns;this.inherited(arguments);d&&setTimeout(function(){var a=q.map(b[0].parentNode.childNodes,function(a){return k[a.columnId]});
e(c,d,a);a={grid:c,subRow:a,column:k[b[0].columnId],bubbles:!0,cancelable:!0,parentType:"dnd"};a[l]=c[l];f.emit(c.domNode,"dgrid-columnreorder",a)?c.set(l,c[l]):(e(c,d,g),c.renderHeader(),c.sort.length&&c.updateSortArrow(c.sort))},0)}});h=h("dgrid.ColumnReorder",null,{columnDndConstructor:r,_initSubRowDnd:function(a,c){var d,l,g,k;l=0;for(g=a.length;l<g;l++)k=a[l],!1!==k.reorderable&&(k=k.headerNode,p.add(k,"dojoDndItem"),k.setAttribute("dndType",c),d||(d=k.parentNode));d&&this._columnDndSources.push(new this.columnDndConstructor(d,
{horizontal:!0,grid:this}))},renderHeader:function(){var a="dgrid-"+this.id+"-",c,d;this.inherited(arguments);this._columnDndSources=[];if(this.columnSets)for(d=0,c=this.columnSets.length;d<c;d++)q.forEach(this.columnSets[d],function(c,g){this._initSubRowDnd(c,a+d+"-"+g)},this);else q.forEach(this.subRows,function(c,g){this._initSubRowDnd(c,a+g)},this)},_destroyColumns:function(){this._columnDndSources&&q.forEach(this._columnDndSources,function(a){a&&a.destroy&&a.destroy()});this.inherited(arguments)}});
h.ColumnDndSource=r;return h})},"dgrid/extensions/ColumnResizer":function(){define("dojo/_base/declare dojo/on dojo/query dojo/_base/lang dojo/dom dojo/dom-construct dojo/dom-geometry dojo/has ../util/misc dojo/_base/html".split(" "),function(r,h,q,p,f,m,n,e,u){function a(a){for(var b=a.length,c=b,d=a[0].length,l=Array(b);b--;)l[b]=Array(d);for(var e={},b=0;b<c;b++)for(var f=l[b],m=a[b],n=0,u=0;n<d;n++){var h=m[u],p;if("undefined"===typeof f[n]){f[n]=h.id;if(h.rowSpan&&1<h.rowSpan){p=l;for(var q=
h.rowSpan,r=b,G=n,D=h.id,E=1;E<q;E++)p[r+E][G]=D}if(0<b&&h.colSpan&&1<h.colSpan)for(p=1;p<h.colSpan;p++)if(f[++n]=h.id,h.rowSpan&&1<h.rowSpan)for(var q=l,r=h.rowSpan,G=b,D=n,E=h.id,I=1;I<r;I++)q[G+I][D]=E;e[h.id]=a[0][n].id;u++}}return e}function b(a,b,c,d,l){if(!(0>=c)){var e=a.columns[b],f;if(e&&(f={grid:a,columnId:b,width:c,bubbles:!0,cancelable:!0},d&&(f.parentType=d),!a._resizedColumns||h.emit(a.headerNode,"dgrid-columnresize",f)))return"auto"===c?delete e.width:(e.width=c,c+="px"),(d=a._columnSizes[b])?
d.set("width",c):d=u.addCssRule("#"+u.escapeCssIdentifier(a.domNode.id)+" .dgrid-column-"+u.escapeCssIdentifier(b,"-"),"width: "+c+";"),a._columnSizes[b]=d,!1!==l&&a.resize(),!0}}var c,d=0,l={create:function(){c=m.create("div",{className:"dgrid-column-resizer"})},destroy:function(){m.destroy(c);c=null},show:function(a){a=n.position(a.domNode,!0);c.style.top=a.y+"px";c.style.height=a.h+"px";document.body.appendChild(c)},move:function(a){c.style.left=a+"px"},hide:function(){c.parentNode.removeChild(c)}};
return r("dgrid.ColumnResizer",null,{resizeNode:null,minWidth:40,adjustLastColumn:!0,_resizedColumns:!1,buildRendering:function(){this.inherited(arguments);d||l.create();d++},destroy:function(){this.inherited(arguments);for(var a in this._columnSizes)this._columnSizes[a].remove();--d||l.destroy()},resizeColumnWidth:function(a,c){return b(this,a,c)},configStructure:function(){var a=this._oldColumnSizes=p.mixin({},this._columnSizes),b;this._resizedColumns=!1;this._columnSizes={};this.inherited(arguments);
for(b in a)b in this._columnSizes||a[b].remove();delete this._oldColumnSizes},_configColumn:function(a){this.inherited(arguments);var b=a.id,c;"width"in a&&((c=this._oldColumnSizes[b])?c.set("width",a.width+"px"):c=u.addCssRule("#"+u.escapeCssIdentifier(this.domNode.id)+" .dgrid-column-"+u.escapeCssIdentifier(b,"-"),"width: "+a.width+"px;"),this._columnSizes[b]=c)},renderHeader:function(){this.inherited(arguments);var b=this,c;if(this.columnSets&&this.columnSets.length)for(var d=this.columnSets.length;d--;)c=
p.mixin(c||{},a(this.columnSets[d]));else this.subRows&&1<this.subRows.length&&(c=a(this.subRows));for(var d=q(".dgrid-cell",b.headerNode),l=d.length;l--;){var f=d[l],n=f.columnId,r=b.columns[n],x=f.childNodes;if(r&&!1!==r.resizable){r=m.create("div",{className:"dgrid-resize-header-container"});for(f.contents=r;0<x.length;)r.appendChild(x[0]);x=m.create("div",{className:"dgrid-resize-handle resizeNode-"+u.escapeCssIdentifier(n,"-")},r);f.appendChild(r);x.columnId=c&&c[n]||n}}b.mouseMoveListen||(h(b.headerNode,
".dgrid-resize-handle:mousedown"+(e("touch")?",.dgrid-resize-handle:touchstart":""),function(a){b._resizeMouseDown(a,this);b.mouseMoveListen.resume();b.mouseUpListen.resume()}),b._listeners.push(b.mouseMoveListen=h.pausable(document,"mousemove"+(e("touch")?",touchmove":""),u.throttleDelayed(function(a){b._updateResizerPosition(a)}))),b._listeners.push(b.mouseUpListen=h.pausable(document,"mouseup"+(e("touch")?",touchend":""),function(a){b._resizeMouseUp(a);b.mouseMoveListen.pause();b.mouseUpListen.pause()})),
b.mouseMoveListen.pause(),b.mouseUpListen.pause())},_resizeMouseDown:function(a,b){a.preventDefault();f.setSelectable(this.domNode,!1);this._startX=this._getResizeMouseLocation(a);this._targetCell=q(".dgrid-column-"+u.escapeCssIdentifier(b.columnId,"-"),this.headerNode)[0];this._updateResizerPosition(a);l.show(this)},_resizeMouseUp:function(a){var c=this._columnSizes,d,e,m;this.adjustLastColumn&&(m=this.headerNode.clientWidth-1);this._resizedColumns||(d=q(".dgrid-cell",this.headerNode),this.columnSets&&
this.columnSets.length?d=d.filter(function(a){return"0"===a.columnId.split("-")[0]&&!(a.columnId in c)}):this.subRows&&1<this.subRows.length&&(d=d.filter(function(a){return"0"===a.columnId.charAt(0)&&!(a.columnId in c)})),e=d.map(function(a){return a.offsetWidth}),d.forEach(function(a,c){b(this,a.columnId,e[c],null,!1)},this),this._resizedColumns=!0);f.setSelectable(this.domNode,!0);d=this._targetCell;var n=this._getResizeMouseLocation(a)-this._startX,h=d.offsetWidth+n,p=this._getResizedColumnWidths(),
v=p.totalWidth,p=p.lastColId,r=q(".dgrid-column-"+u.escapeCssIdentifier(p,"-"),this.headerNode)[0].offsetWidth;h<this.minWidth&&(h=this.minWidth);b(this,d.columnId,h,a.type)&&d.columnId!==p&&this.adjustLastColumn&&(v+n<m?b(this,p,"auto",a.type):r-n<=this.minWidth&&b(this,p,this.minWidth,a.type));l.hide();delete this._startX;delete this._targetCell},_updateResizerPosition:function(a){if(this._targetCell){a=this._getResizeMouseLocation(a);var b=this._targetCell.offsetWidth,c=a;b+(a-this._startX)<this.minWidth&&
(c=this._startX-(b-this.minWidth));l.move(c)}},_getResizeMouseLocation:function(a){var b=0;a.pageX?b=a.pageX:a.clientX&&(b=a.clientX+document.body.scrollLeft+document.documentElement.scrollLeft);return b},_getResizedColumnWidths:function(){var a=0,b=q((this.columnSets?".dgrid-column-set-cell ":"")+"tr:first-child .dgrid-cell",this.headerNode),c=b.length;if(!c)return{};for(var d=b[c-1].columnId;c--;)a+=b[c].offsetWidth;return{totalWidth:a,lastColId:d}}})})},"dgrid/extensions/CompoundColumns":function(){define(["dojo/_base/lang",
"dojo/_base/declare","dojo/sniff","dojo/query","../util/misc"],function(r,h,q,p,f){return h(null,{configStructure:function(){function m(b,c,d,l){var n=0,p=function(){},q,x;f.each(b,function(f,K){"string"===typeof f&&(f={label:f});b instanceof Array||f.field||(f.field=K);x=(q=f.children)&&!1!==f.showChildHeaders;f.parentColumn=l;q?null==f.id?f.id=(l&&l.id||c-1)+"-"+h.length:l&&l.id&&(f.id=l.id+"-"+f.id):(a.push(f),h.push(r.delegate(f,{renderHeaderCell:p})),n++);x||(f=r.delegate(f,{rowSpan:-c}));q&&
(n+=f.colSpan=m(q,c+1,x,f));d&&(e[c]||(e[c]=[])).push(f)},this);return n}var n=this.subRows&&this.subRows[0]||this.columns,e=[[]],h=e[0],a=[];e[0].className="dgrid-spacer-row";m(n,1,!0);var n=e.length,b,c,d,l;for(b=0;b<n;b++)for(d=e[b],c=0;c<d.length;c++)l=d[c],1>l.rowSpan&&(l.rowSpan+=n);a=[a];a.headerRows=e;this.subRows=a;this.inherited(arguments)},renderHeader:function(){var f,n=this.subRows[0],e=this.subRows.headerRows[0];this.inherited(arguments);for(f=n.length;f--;)n[f].headerNode=e[f].headerNode},
_findSortArrowParent:function(){var m=this.inherited(arguments);if(m&&f.contains(p(".dgrid-spacer-row",this.headerNode)[0],m))return m=m.columnId||m.parentNode.columnId,m=p(".dgrid-column-"+m,this.headerNode),m[m.length-1]},_configColumn:function(f,n,e){var h=f.parentColumn,a=f.id;h&&(a=0===a.indexOf(e)?a.substring(e.length):a,e=h.id+"-",f.id=e+a);this.inherited(arguments,[f,n,e])},cell:function(f,n){if("object"!==typeof n){var e=this.column(n);e&&(n=e.id)}return this.inherited(arguments,[f,n])},
column:function(f){var n=this.inherited(arguments);if(null==n&&"object"!==typeof f){var e="-"+f,h=e.length,a;for(a in this.columns)if(-1!==a.indexOf(e,a.length-h))return this.columns[a]}return n},_updateCompoundHiddenStates:function(f,n){var e=this.columns[f],h;if(!e||e.hidden!==n)for(;e&&e.parentColumn;){e=e.parentColumn;if(h=e.colSpan+=n?-1:1)e.headerNode.colSpan=h;1!==h||n?!h&&n&&this._hideColumn(e.id):this._showColumn(e.id)}},_hideColumn:function(f){var n=this;this._updateCompoundHiddenStates(f,
!0);this.inherited(arguments);q("ff")&&(this.headerNode.style.display="none",setTimeout(function(){n.headerNode.style.display="";n.resize()},0))},_showColumn:function(f){this._updateCompoundHiddenStates(f,!1);this.inherited(arguments)},_getResizedColumnWidths:function(){var f=0,n=this.columns,e;for(e in n)f+=n[e].headerNode.offsetWidth;return{totalWidth:f,lastColId:this.subRows[0][this.subRows[0].length-1].id}}})})},"dgrid/extensions/Pagination":function(){define("../_StoreMixin dojo/_base/declare dojo/_base/array dojo/_base/lang dojo/dom-construct dojo/dom-class dojo/on dojo/query dojo/string dojo/has dojo/when ../util/misc dojo/_base/sniff".split(" "),
function(r,h,q,p,f,m,n,e,u,a,b,c){function d(a){a.noDataNode?(f.destroy(a.noDataNode),delete a.noDataNode):a.cleanup();a.contentNode.innerHTML=""}function l(a){if(a.loadingNode)f.destroy(a.loadingNode),delete a.loadingNode;else if(a._oldPageNodes){for(var b in a._oldPageNodes)a.removeRow(a._oldPageNodes[b]);delete a._oldPageNodes}delete a._isLoading}return h(r,{rowsPerPage:10,pagingTextBox:!1,previousNextArrows:!0,firstLastArrows:!1,pagingLinks:2,pageSizeOptions:null,showLoadingMessage:!0,i18nPagination:{status:"${start} - ${end} of ${total} results",
gotoFirst:"Go to first page",gotoNext:"Go to next page",gotoPrev:"Go to previous page",gotoLast:"Go to last page",gotoPage:"Go to page",jumpPage:"Jump to page",rowsPerPage:"Number of rows per page"},showFooter:!0,_currentPage:1,buildRendering:function(){this.inherited(arguments);var a=this,b=this.paginationNode=f.create("div",{className:"dgrid-pagination"},this.footerNode),c=this.paginationStatusNode=f.create("div",{className:"dgrid-status"},b),d=this.i18nPagination;c.tabIndex=0;this.addUiClasses&&
m.add(this.footerNode,"ui-widget-content");this._updatePaginationSizeSelect();this._updateRowsPerPageOption();this._updatePaginationStatus(this._total);b=this.paginationNavigationNode=f.create("div",{className:"dgrid-navigation"},b);this.firstLastArrows&&(this.paginationFirstNode=f.create("span",{"aria-label":d.gotoFirst,className:"dgrid-first dgrid-page-link",innerHTML:"\u00ab",tabIndex:0},b));this.previousNextArrows&&(this.paginationPreviousNode=f.create("span",{"aria-label":d.gotoPrev,className:"dgrid-previous dgrid-page-link",
innerHTML:"\u2039",tabIndex:0},b));this.paginationLinksNode=f.create("span",{className:"dgrid-pagination-links"},b);this.previousNextArrows&&(this.paginationNextNode=f.create("span",{"aria-label":d.gotoNext,className:"dgrid-next dgrid-page-link",innerHTML:"\u203a",tabIndex:0},b));this.firstLastArrows&&(this.paginationLastNode=f.create("span",{"aria-label":d.gotoLast,className:"dgrid-last dgrid-page-link",innerHTML:"\u00bb",tabIndex:0},b));this._listeners.push(n(b,".dgrid-page-link:click,.dgrid-page-link:keydown",
function(b){if("keydown"!==b.type||13===b.keyCode){b=this.className;var c,d;a._isLoading||-1<b.indexOf("dgrid-page-disabled")||(c=a._currentPage,d=Math.ceil(a._total/a.rowsPerPage),this===a.paginationPreviousNode?a.gotoPage(c-1):this===a.paginationNextNode?a.gotoPage(c+1):this===a.paginationFirstNode?a.gotoPage(1):this===a.paginationLastNode?a.gotoPage(d):"dgrid-page-link"===b&&a.gotoPage(+this.innerHTML))}}))},destroy:function(){this.inherited(arguments);this._pagingTextBoxHandle&&this._pagingTextBoxHandle.remove()},
_updatePaginationSizeSelect:function(){var a=this.pageSizeOptions,b=this.paginationSizeSelect,c;if(a&&a.length){b||(b=this.paginationSizeSelect=f.create("select",{"aria-label":this.i18nPagination.rowsPerPage,className:"dgrid-page-size"},this.paginationNode),c=this._paginationSizeChangeHandle=n(b,"change",p.hitch(this,function(){this.set("rowsPerPage",+this.paginationSizeSelect.value)})),this._listeners.push(c));for(c=b.options.length=0;c<a.length;c++)f.create("option",{innerHTML:a[c],selected:this.rowsPerPage===
a[c],value:a[c]},b);this._updateRowsPerPageOption()}else a&&a.length||!b||(f.destroy(b),this.paginationSizeSelect=null,this._paginationSizeChangeHandle.remove())},_setPageSizeOptions:function(a){this.pageSizeOptions=a&&a.sort(function(a,b){return a-b});this._updatePaginationSizeSelect()},_updateRowsPerPageOption:function(){var a=this.rowsPerPage,b=this.pageSizeOptions,c=this.paginationSizeSelect;c&&(0>q.indexOf(b,a)?this._setPageSizeOptions(b.concat([a])):c.value=""+a)},_setRowsPerPage:function(a){this.rowsPerPage=
a;this._updateRowsPerPageOption();this.gotoPage(1)},_updateNavigation:function(a){function b(a,c){var d,g;h.pagingTextBox&&a===q&&1<w?(d=f.create("input",{"aria-label":p.jumpPage,className:"dgrid-page-input",type:"text",value:q},u),h._pagingTextBoxHandle=n(d,"change",function(){var a=+this.value;!isNaN(a)&&0<a&&a<=w&&h.gotoPage(+this.value)}),y&&"INPUT"===y.tagName&&d.focus()):(g=a===q,d=f.create("span",{"aria-label":p.gotoPage,className:"dgrid-page-link"+(g?" dgrid-page-disabled":""),innerHTML:a+
(c?" ":""),tabIndex:g?-1:0},u),H===a&&(g?a<w?H++:F.focus():d.focus()),g||(F=d))}function d(a,b){m.toggle(a,"dgrid-page-disabled",b);a.tabIndex=b?-1:0}function l(){f.create("span",{className:"dgrid-page-skip",innerHTML:"..."},u)}var h=this,p=this.i18nPagination,u=this.paginationLinksNode,q=this._currentPage,v=this.pagingLinks,r=this.paginationNavigationNode,w=Math.ceil(a/this.rowsPerPage);a=this._pagingTextBoxHandle;var y=document.activeElement,H,F;y&&c.contains(this.paginationNavigationNode,y)?"dgrid-page-link"===
y.className&&(H=+y.innerHTML):y=null;a&&a.remove();u.innerHTML="";e(".dgrid-first, .dgrid-previous",r).forEach(function(a){d(a,1===q)});e(".dgrid-last, .dgrid-next",r).forEach(function(a){d(a,q>=w)});if(v&&0<w){b(1,!0);r=q-v;for(2<r?l():r=2;r<Math.min(q+v+1,w);r++)b(r,!0);q+v+1<w&&l();1<w&&b(w)}else h.pagingTextBox&&b(q);y&&-1===y.tabIndex&&(v=e('[tabindex\x3d"0"]',this.paginationNavigationNode),y===this.paginationPreviousNode||y===this.paginationFirstNode?y=v[0]:v.length&&(y=v[v.length-1]),y&&y.focus())},
_updatePaginationStatus:function(a){var b=this.rowsPerPage,c=Math.min(a,(this._currentPage-1)*b+1);this.paginationStatusNode.innerHTML=u.substitute(this.i18nPagination.status,{start:c,end:Math.min(a,c+b-1),total:a})},refresh:function(a){var b=this,c=a&&a.keepCurrentPage?Math.min(this._currentPage,Math.ceil(this._total/this.rowsPerPage)):1;this.inherited(arguments);return this.gotoPage(c).then(function(a){setTimeout(function(){n.emit(b.domNode,"dgrid-refresh-complete",{bubbles:!0,cancelable:!1,grid:b})},
0);return a})},_onNotification:function(a,b,c){a=this.rowsPerPage;var d=this._currentPage*a;"add"===b.type&&b.index<d||"delete"===b.type&&b.previousIndex<d||"update"===b.type&&Math.floor(b.index/a)!==Math.floor(b.previousIndex/a)?this.gotoPage(Math.min(this._currentPage,Math.ceil(b.totalLength/this.rowsPerPage))):c===this._renderedCollection&&b.totalLength!==this._total&&(this._updatePaginationStatus(b.totalLength),this._updateNavigation(b.totalLength))},renderQueryResults:function(a,b){var c=this,
d=this.inherited(arguments);b||(this._topLevelRequest&&(this._topLevelRequest.cancel(),delete this._topLevelRequest),"function"===typeof d.cancel&&(this._topLevelRequest=d),d.then(function(){c._topLevelRequest&&delete c._topLevelRequest}));return d},insertRow:function(){var a=this._oldPageNodes,b=this.inherited(arguments);a&&b===a[b.id]&&delete a[b.id];return b},gotoPage:function(a){var c=this,e=(this._currentPage-1)*this.rowsPerPage;if(!this._renderedCollection)return b([]);this._renderedCollection.releaseRange&&
this._renderedCollection.releaseRange(e,e+this.rowsPerPage);return this._trackError(function(){var b=c.rowsPerPage,e=(a-1)*b,n={start:e,count:b},m,h=c.contentNode,t,p,u;if(c.showLoadingMessage)d(c),c.loadingNode=f.create("div",{className:"dgrid-loading",innerHTML:c.loadingMessage},h);else for(c._oldPageNodes=t={},h=h.children,p=0,u=h.length;p<u;p++)t[h[p].id]=h[p];c._isLoading=!0;m=c._renderedCollection.fetchRange({start:e,end:e+b});return c.renderQueryResults(m,null,n).then(function(d){l(c);c.scrollTo({y:0});
c._rows&&(c._rows.min=e,c._rows.max=e+b-1);m.totalLength.then(function(b){b||(c.noDataNode&&(f.destroy(c.noDataNode),delete c.noDataNode),c.noDataNode=f.create("div",{className:"dgrid-no-data",innerHTML:c.noDataMessage},c.contentNode));c._total=b;c._currentPage=a;c._rowsOnPage=d.length;c._updatePaginationStatus(b);c._updateNavigation(b)});return m},function(a){l(c);throw a;})})}})})},"dgrid/extensions/DnD":function(){define("dojo/_base/declare dojo/_base/lang dojo/_base/array dojo/aspect dojo/dom-class dojo/on dojo/topic dojo/has dojo/when dojo/dnd/Source dojo/dnd/Manager dojo/_base/NodeList ../Selection dojo/has!touch?../util/touch dojo/has!touch?./_DnD-touch-autoscroll".split(" "),
function(r,h,q,p,f,m,n,e,u,a,b,c,d,l){var g=r(a,{grid:null,getObject:function(a){var b=this.grid;return b.collection.get(a.id.slice(b.id.length+5))},_legalMouseDown:function(a){return this.inherited(arguments)&&a.target!==this.grid.bodyNode},onDrop:function(a,b,c){var d=this,g=this._targetAnchor=this.targetAnchor,l=this.grid,e=l.collection;!this.before&&g&&(g=g.nextSibling);g=g&&l.row(g);u(g&&e.get(g.id),function(g){if(d!==a)d.onDropExternal(a,b,c,g);else d.onDropInternal(b,c,g)})},onDropInternal:function(a,
b,c){var d=this.grid,g=d.collection,l=this,e=l._targetAnchor,f;e&&(f=this.before?e.previousSibling:e.nextSibling);e=d.row(a[0]);(b||f!==a[0]&&(c||!e||d.down(e).element!==a[0]))&&a.forEach(function(a){u(l.getObject(a),function(a){var e=g.getIdentity(a);g[b&&g.copy?"copy":"put"](a,{beforeId:c?g.getIdentity(c):null});l._selectedNodes[e]&&(l._selectedNodes[e]=d.row(e).element)})})},onDropExternal:function(a,b,c,d){var g=this.grid.collection,e=a.grid;b.forEach(function(b,l){u(a.getObject(b),function(f){c||
(e?u(e.collection.getIdentity(f),function(c){!l&&a.selectNone();a.delItem(b.id);e.collection.remove(c)}):a.deleteSelectedNodes());g[g.copy?"copy":"put"](f,{beforeId:d?g.getIdentity(d):null})})})},onDndStart:function(a){this.inherited(arguments);a===this&&(this.grid.cancelTouchScroll&&this.grid.cancelTouchScroll(),b.manager().avatar.node.style.width=this.grid.domNode.offsetWidth/2+"px")},onMouseDown:function(a){e("touch")&&this.isDragging&&1<l.countCurrentTouches(a,this.grid.touchNode)?(n.publish("/dnd/cancel"),
b.manager().stopDrag()):this.inherited(arguments)},onMouseMove:function(a){(!e("touch")||1>=l.countCurrentTouches(a,this.grid.touchNode))&&this.inherited(arguments)},checkAcceptance:function(b){return b.getObject&&a.prototype.checkAcceptance.apply(this,arguments)},getSelectedNodes:function(){if(!this.grid.selection)return this.inherited(arguments);var a=new c,b;for(b in this.grid.selection)a.push(this._selectedNodes[b]);return a}});r=r(d,{dndSourceType:"dgrid-row",dndParams:null,dndConstructor:g,
postMixInProperties:function(){this.inherited(arguments);this.dndParams=h.mixin({accept:[this.dndSourceType]},this.dndParams)},postCreate:function(){function a(b){c[b.id]=b.element}function b(a){delete c[a.id];f.remove(a.element,"dojoDndItemSelected dojoDndItemAnchor")}this.inherited(arguments);this.dndSource=new (this.dndConstructor||g)(this.bodyNode,h.mixin(this.dndParams,{grid:this,dropParent:this.contentNode}));var c=this.dndSource._selectedNodes={};this.on("dgrid-select",function(b){q.forEach(b.rows,
a)});this.on("dgrid-deselect",function(a){q.forEach(a.rows,b)});p.after(this,"destroy",function(){delete this.dndSource._selectedNodes;c=null;this.dndSource.destroy()},!0)},insertRow:function(a){var b=this.inherited(arguments),c="function"===typeof this.getObjectDndType?this.getObjectDndType(a):[this.dndSourceType];f.add(b,"dojoDndItem");this.dndSource.setItem(b.id,{data:a,type:c instanceof Array?c:[c]});return b},removeRow:function(a){this.dndSource.delItem(this.row(a));this.inherited(arguments)}});
r.GridSource=g;return r})},"dgrid/Editor":function(){define("dojo/_base/declare dojo/_base/lang dojo/Deferred dojo/dom-construct dojo/dom-class dojo/on dojo/has dojo/query ./Grid dojo/_base/sniff".split(" "),function(r,h,q,p,f,m,n,e,u){return r(null,{constructor:function(){this._editorInstances={};this._editorColumnListeners=[];this._editorCellListeners={};this._editorsPendingStartup=[]},postCreate:function(){var a=this;this.inherited(arguments);this.on(".dgrid-input:focusin",function(){a._focusedEditorCell=
a.cell(this)});this._editorFocusoutHandle=m.pausable(this.domNode,".dgrid-input:focusout",function(){a._focusedEditorCell=null});this._listeners.push(this._editorFocusoutHandle)},insertRow:function(){this._editorRowListeners={};var a=this.inherited(arguments),b=this.row(a),c=this._editorCellListeners[a.id]=this._editorCellListeners[a.id]||{},d;for(d in this._editorRowListeners)c[d]=this._editorRowListeners[d];this._editorRowListeners=null;(c=this._previouslyFocusedEditorCell)&&c.row.id===b.id&&this.edit(this.cell(b,
c.column.id));return a},refresh:function(){for(var a in this._editorInstances){var b=this._editorInstances[a].domNode;b&&b.parentNode&&b.parentNode.removeChild(b)}this.inherited(arguments)},removeRow:function(a){var b=this,c=this._focusedEditorCell;c&&c.row.id===this.row(a).id&&(this._previouslyFocusedEditorCell=c,this._editorFocusoutHandle.pause(),setTimeout(function(){b._editorFocusoutHandle.resume();b._previouslyFocusedEditorCell=null},0));if(this._editorCellListeners[a.id]){for(var d in this._editorCellListeners[a.id])this._editorCellListeners[a.id][d].remove();
delete this._editorCellListeners[a.id]}for(c=this._alwaysOnWidgetColumns.length;c--;)if(d=(d=this.cell(a,this._alwaysOnWidgetColumns[c].id).element)&&(d.contents||d).widget)this._editorFocusoutHandle.pause(),d.destroyRecursive();return this.inherited(arguments)},renderArray:function(){var a=this.inherited(arguments);a.length?this._startupPendingEditors():this._editorsPendingStartup=[];return a},_onNotification:function(){this.inherited(arguments);this._startupPendingEditors()},_destroyColumns:function(){this._editorStructureCleanup();
this.inherited(arguments)},_editorStructureCleanup:function(){var a=this._editorInstances,b=this._editorColumnListeners;this._editTimer&&clearTimeout(this._editTimer);for(var c in a){var d=a[c];d.domNode&&d.destroyRecursive()}this._editorInstances={};for(a=b.length;a--;)b[a].remove();for(var e in this._editorCellListeners)for(c in this._editorCellListeners[e])this._editorCellListeners[e][c].remove();for(a=0;a<this._editorColumnListeners.length;a++)this._editorColumnListeners[a].remove();this._editorCellListeners=
{};this._editorColumnListeners=[];this._editorsPendingStartup=[]},_configColumns:function(){var a=this.inherited(arguments);this._alwaysOnWidgetColumns=[];for(var b=0,c=a.length;b<c;b++)a[b].editor&&this._configureEditorColumn(a[b]);return a},_configureEditorColumn:function(a){var b=this,c=a.renderCell||this._defaultRenderCell,d=a.editOn,e="string"!==typeof a.editor;d?this._editorInstances[a.id]=this._createSharedEditor(a,c):e&&this._alwaysOnWidgetColumns.push(a);a.renderCell=d?function(g,e,l,f){if(!f||
!f.alreadyHooked){var n=m(l,d,function(){b._activeOptions=f;b.edit(this)});if(b._editorRowListeners)b._editorRowListeners[a.id]=n;else{var h=b.row(g);b._editorCellListeners[h.element.id][a.id]=n}}return c.call(a,g,e,l,f)}:function(d,f,n,m){if(!a.canEdit||a.canEdit(d,f))m=b._createEditor(a),m.object=d,b._showEditor(m,a,n,f),n[e?"widget":"input"]=m;else return c.call(a,d,f,n,m)}},edit:function(a){function b(a){c._activeCell=e;c._showEditor(m,d,e,n);c._editTimer=setTimeout(function(){m.focus&&m.focus();
d._editorBlurHandle&&d._editorBlurHandle.resume();c._editTimer=null;a.resolve(m)},0)}var c=this,d,e,g,f,n,m,h;a.column||(a=this.cell(a));if(!a||!a.element)return null;d=a.column;f=d.field;e=a.element.contents||a.element;if(m=this._editorInstances[d.id]){if(this._activeCell!==e){var p=a.row;n=(g=this.dirty&&this.dirty[p.id])&&f in g?g[f]:d.get?d.get(p.data):p.data[f];if(!d.canEdit||d.canEdit(a.row.data,n))return h=new q,a=m.domNode||m,a.offsetWidth?(a.blur(),setTimeout(function(){b(h)},0)):b(h),h.promise}}else if(d.editor&&
(m=e.widget||e.input))return h=new q,m.focus&&m.focus(),h.resolve(m),h.promise;return null},refreshCell:function(a){var b=a.row.element.id,c=a.column.id;this._editorCellListeners[b]&&this._editorCellListeners[b][c]&&(this._editorCellListeners[b][c].remove(),this._editorCellListeners[b][c]=null);return this.inherited(arguments)},_showEditor:function(a,b,c,d){var e=a.domNode;e||this._updateInputValue(a,d);c.innerHTML="";f.add(c,"dgrid-cell-editing");e&&b.editOn&&a.validate&&a.reset&&a.reset();c.appendChild(a.domNode||
a);e&&!b.editOn?this._editorsPendingStartup.push([a,b,c,d]):this._startupEditor(a,b,c,d)},_startupEditor:function(a,b,c,d){a.domNode&&(a._started||a.startup(),a._dgridIgnoreChange=!0,a.set("value",d),setTimeout(function(){a._dgridIgnoreChange=!1},0));a._dgridLastValue=d;this._activeCell&&(this._activeValue=d,m.emit(c,"dgrid-editor-show",{grid:this,cell:this.cell(c),column:b,editor:a,bubbles:!0,cancelable:!1}))},_startupPendingEditors:function(){for(var a=this._editorsPendingStartup,b=a.length;b--;)this._startupEditor.apply(this,
a[b]);this._editorsPendingStartup=[]},_handleEditorChange:function(a,b){var c=a.target;"_dgridLastValue"in c&&-1<c.className.indexOf("dgrid-input")&&this._updatePropertyFromEditor(b||this.cell(c).column,c,a)},_createEditor:function(a){var b=a.editor,c=a.editOn,d=this,e="string"!==typeof b&&b,g,f,u={};g=a.editorArgs||{};"function"===typeof g&&(g=g.call(this,a));e?(f=new e(g),g=f.focusNode||f.domNode,g.className+=" dgrid-input",f.on(c?"blur":"change",function(){f._dgridIgnoreChange||d._updatePropertyFromEditor(a,
this,{type:"widget"})})):(this._hasInputListener||(this._hasInputListener=!0,this.on("change",function(a){d._handleEditorChange(a)})),"textarea"===b?e="textarea":(e="input",u.type=b),f=g=p.create(e,h.mixin(u,{className:"dgrid-input",name:a.field,tabIndex:isNaN(a.tabIndex)?-1:a.tabIndex},g)),9>n("ie")&&(b="radio"===b||"checkbox"===b?m(f,"click",function(b){d._handleEditorChange(b,a)}):m(f,"change",function(b){d._handleEditorChange(b,a)}),c?this._editorColumnListeners.push(b):this._editorRowListeners?
this._editorRowListeners[a.id]=b:this._editorCellListeners[this.row(object).element.id][a.id]=b));if(a.autoSelect){var q=f.focusNode||f;q.select&&m(q,"focus",function(){setTimeout(function(){q.select()},0)})}return f},_createSharedEditor:function(a){function b(){var a=d._activeCell;k.blur();"function"===typeof d.focus&&setTimeout(function(){d.focus(a)},e&&9>n("ie")?15:0)}var c=this._createEditor(a),d=this,e=c.domNode,g=c.domNode||c,k=c.focusNode||g,q=e?function(){c.set("value",c._dgridLastValue)}:
function(){d._updateInputValue(c,c._dgridLastValue);d._updatePropertyFromEditor(a,c)};this._editorColumnListeners.push(m(k,"keydown",function(g){g=g.keyCode||g.which;27===g?(q(),d._activeValue=c._dgridLastValue,b()):13===g&&!1!==a.dismissOnEnter&&b()}));(a._editorBlurHandle=m.pausable(c,"blur",function(){var b=g.parentNode,e={alreadyHooked:!0},l=d.cell(g);m.emit(l.element,"dgrid-editor-hide",{grid:d,cell:l,column:a,editor:c,bubbles:!0,cancelable:!1});a._editorBlurHandle.pause();b.removeChild(g);l.row&&
(f.remove(l.element,"dgrid-cell-editing"),p.empty(b),u.appendIfNode(b,a.renderCell(l.row.data,d._activeValue,b,d._activeOptions?h.delegate(e,d._activeOptions):e)));d._focusedEditorCell=d._activeCell=d._activeValue=d._activeOptions=null})).pause();this._editorColumnListeners.push(a._editorBlurHandle);return c},_updatePropertyFromEditor:function(a,b,c){var d;if(!b.isValid||b.isValid())if(c=this._updateProperty((b.domNode||b).parentNode,this._activeCell?this._activeValue:b._dgridLastValue,this._retrieveEditorValue(a,
b),c),this._activeCell?this._activeValue=c:b._dgridLastValue=c,"radio"===b.type&&b.name&&!a.editOn&&a.field)for(d in c=this.row(b),e("input[type\x3dradio][name\x3d"+b.name+"]",this.contentNode).forEach(function(c){var d=this.row(c);c!==b&&c._dgridLastValue&&(c._dgridLastValue=!1,this.updateDirty?this.updateDirty(d.id,a.field,!1):d.data[a.field]=!1)},this),this.dirty)c.id.toString()!==d&&this.dirty[d][a.field]&&this.updateDirty(d,a.field,!1)},_updateProperty:function(a,b,c,d){var e=this;if((b&&b.valueOf())!==
(c&&c.valueOf())){var g=this.cell(a),f=g.row,n=g.column;a=g.element;if(n.field&&f)if(g={grid:this,cell:g,oldValue:b,value:c,bubbles:!0,cancelable:!0},d&&d.type&&(g.parentType=d.type),m.emit(a,"dgrid-datachange",g))this.updateDirty?(this.updateDirty(f.id,n.field,c),n.autoSave&&setTimeout(function(){e._trackError("save")},0)):f.data[n.field]=c;else{var h;(h=a.widget)?(h._dgridIgnoreChange=!0,h.set("value",b),setTimeout(function(){h._dgridIgnoreChange=!1},0)):(h=a.input)&&this._updateInputValue(h,b);
return b}}return c},_updateInputValue:function(a,b){a.value=b;if("radio"===a.type||"checkbox"===a.type)a.checked=a.defaultChecked=!!b},_retrieveEditorValue:function(a,b){return"function"===typeof b.get?this._convertEditorValue(b.get("value")):this._convertEditorValue(b["checkbox"===b.type||"radio"===b.type?"checked":"value"])},_convertEditorValue:function(a,b){if("number"===typeof b)a=isNaN(a)?a:parseFloat(a);else if("boolean"===typeof b)a="true"===a?!0:"false"===a?!1:a;else if(b instanceof Date){var c=
new Date(a);a=isNaN(c.getTime())?a:c}return a}})})},"dstore/Store":function(){define("dojo/_base/lang dojo/_base/array dojo/aspect dojo/has dojo/when dojo/_base/declare dstore/QueryMethod dstore/Filter dojo/Evented".split(" "),function(r,h,q,p,f,m,n,e,u){function a(a){return function(b,e){var g=this;f(b,function(b){b={target:b};var d=e[1]||{};"beforeId"in d&&(b.beforeId=d.beforeId);g.emit(a,b)});return b}}p.add("object-proto",!!{}.__proto__&&!{}.watch);var b=p("object-proto");return m(u,{constructor:function(b){b&&
m.safeMixin(this,b);this.Model&&this.Model.createSubclass&&(this.Model=this.Model.createSubclass([],{}).extend({_store:this}));this.storage=new u;var d=this;this.autoEmitEvents&&(q.after(this,"add",a("add")),q.after(this,"put",a("update")),q.after(this,"remove",function(a,b){f(a,function(){d.emit("delete",{id:b[0]})});return a}))},autoEmitEvents:!0,idProperty:"id",queryAccessors:!0,getIdentity:function(a){return a.get?a.get(this.idProperty):a[this.idProperty]},_setIdentity:function(a,b){a.set?a.set(this.idProperty,
b):a[this.idProperty]=b},forEach:function(a,b){var e=this;return f(this.fetch(),function(g){for(var f=0,n;void 0!==(n=g[f]);f++)a.call(b,n,f,e);return g})},on:function(a,b){return this.storage.on(a,b)},emit:function(a,b){b=b||{};b.type=a;try{return this.storage.emit(a,b)}finally{return b.cancelable}},parse:null,stringify:null,Model:null,_restore:function(a,d){var e=this.Model;if(e&&a){var g=e.prototype,f=g._restore;f?a=f.call(a,e,d):b&&d?a.__proto__=g:a=r.delegate(g,a)}return a},create:function(a){return new this.Model(a)},
_createSubCollection:function(a){var b=r.delegate(this.constructor.prototype),e;for(e in this)this._includePropertyInSubCollection(e,b)&&(b[e]=this[e]);return m.safeMixin(b,a)},_includePropertyInSubCollection:function(a,b){return!(a in b)||b[a]!==this[a]},queryLog:[],filter:new n({type:"filter",normalizeArguments:function(a){var b=this.Filter;return a instanceof b?[a]:[new b(a)]}}),Filter:e,sort:new n({type:"sort",normalizeArguments:function(a,b){var e;"function"===typeof a?e=[a]:(e=a instanceof Array?
a.slice():"object"===typeof a?[].slice.call(arguments):[{property:a,descending:b}],e=h.map(e,function(a){a=r.mixin({},a);a.descending=!!a.descending;return a}),e=[e]);return e}}),select:new n({type:"select"}),_getQuerierFactory:function(a){return this["_create"+(a[0].toUpperCase()+a.substr(1))+"Querier"]}})})},"dstore/QueryMethod":function(){define([],function(){return function(r){var h=r.type,q=r.normalizeArguments,p=r.applyQuery,f=r.querierFactory;return function(){var m=Array.prototype.slice.call(arguments),
n=q?q.apply(this,m):m,m={type:h,arguments:m,normalizedArguments:n},e=this._getQuerierFactory(h)||f;e&&(m.querier=e.apply(this,n));n=this._createSubCollection({queryLog:this.queryLog.concat(m)});return p?p.call(this,n,m):n}}})},"dstore/Filter":function(){define(["dojo/_base/declare"],function(r){function h(p){return function(){var f=this.constructor,m=new f;m.type=p;m.args=Array.prototype.slice.call(arguments);return this.type?h("and").call(f.prototype,this,m):m}}function q(h){return function(){for(var f=
this.constructor,m=[],n=0;n<arguments.length;n++){var e=arguments[n];m.push(e instanceof f?e:new f(e))}f=new f;f.type=h;f.args=m;this.type===h?f.args=this.args.concat(m):this.type?m.unshift(this):1===m.length&&(f.type=m[0].type,f.args=m[0].args.slice());return f}}r=r(null,{constructor:function(h){var f=typeof h;switch(f){case "object":var f=this,m;for(m in h)var n=h[m],f=n instanceof this.constructor?f[n.type](m,n.args[0]):n&&n.test?f.match(m,n):f.eq(m,n);this.type=f.type;this.args=f.args;break;case "function":case "string":this.type=
f,this.args=[h]}},and:q("and"),or:q("or"),eq:h("eq"),ne:h("ne"),lt:h("lt"),lte:h("lte"),gt:h("gt"),gte:h("gte"),contains:h("contains"),"in":h("in"),match:h("match")});r.filterCreator=h;r.logicalOperatorCreator=q;return r})},"dstore/Memory":function(){define("dojo/_base/declare dojo/_base/array ./Store ./Promised ./SimpleQuery ./QueryResults".split(" "),function(r,h,q,p,f,m){return r([q,p,f],{constructor:function(){this.storage.version=0},postscript:function(){this.inherited(arguments);this.setData(this.data||
[])},data:null,autoEmitEvents:!1,getSync:function(f){return this.storage.fullData[this.storage.index[f]]},putSync:function(f,e){e=e||{};var m=this.storage,a=m.index,b=m.fullData,c=this.Model;!c||f instanceof c||(f=this._restore(f));var d=this.getIdentity(f);null==d&&(this._setIdentity(f,"id"in e?e.id:Math.random()),d=this.getIdentity(f));m.version++;var m=d in a?"update":"add",c={target:f},l;if("update"===m){if(!1===e.overwrite)throw Error("Object already exists");b.splice(l=a[d],1);d=l}else d=this.defaultNewToStart?
0:b.length;var g;if("beforeId"in e){var k=e.beforeId;null===k?g=b.length:(g=a[k],l<g&&--g);void 0!==g?c.beforeId=k:(console.error("options.beforeId was specified but no corresponding index was found"),g=d)}else g=d;b.splice(g,0,f);l=isFinite(l)?Math.min(l,g):g;for(d=b.length;l<d;++l)a[this.getIdentity(b[l])]=l;this.emit(m,c);return f},addSync:function(f,e){(e=e||{}).overwrite=!1;return this.putSync(f,e)},removeSync:function(f){var e=this.storage,m=e.index,e=e.fullData;if(f in m)return m=e.splice(m[f],
1)[0],this._reindex(),!0!==this._ignoreChangeEvents&&this.emit("delete",{id:f,target:m}),!0},setData:function(f){this.parse&&(f=this.parse(f));f.items&&(this.idProperty=f.identifier||this.idProperty,f=f.items);this.storage.fullData=this.data=f;this._reindex()},_reindex:function(){for(var f=this.storage,e=f.index={},m=f.fullData,a=this.Model,b=Object.prototype,c=0,d=m.length;c<d;c++){var l=m[c];if(a&&!(l instanceof a)){var g=this._restore(l,l.__proto__===b);l!==g&&(m[c]=l=g)}e[this.getIdentity(l)]=
c}f.version++},fetchSync:function(){var f=this.data;if(!f||f._version!==this.storage.version){for(var f=this.storage.fullData,e=this.queryLog,h=0,a=e.length;h<a;h++)f=e[h].querier(f);f._version=this.storage.version;this.data=f}return new m(f)},fetchRangeSync:function(f){var e=this.fetchSync();return new m(e.slice(f.start,f.end),{totalLength:e.length})},_includePropertyInSubCollection:function(f){return"data"!==f&&this.inherited(arguments)}})})},"dstore/Promised":function(){define(["dojo/_base/declare",
"dojo/Deferred","./QueryResults","dojo/when"],function(r,h,q,p){function f(f,n){return function(){var e=new h;try{e.resolve(this[f].apply(this,arguments))}catch(u){e.reject(u)}return n?(e=new q(e.promise),e.totalLength=p(e.totalLength),e):e.promise}}return r(null,{get:f("getSync"),put:f("putSync"),add:f("addSync"),remove:f("removeSync"),fetch:f("fetchSync",!0),fetchRange:f("fetchRangeSync",!0)})})},"dstore/QueryResults":function(){define(["dojo/_base/lang","dojo/when"],function(r,h){function q(p,
f){return h(this,function(m){for(var h=0,e=m.length;h<e;h++)p.call(f,m[h],h,m)})}return function(h,f){var m=f&&"totalLength"in f;if(h.then){h=r.delegate(h);var n=h.then(function(e){var h=m?f.totalLength:e.totalLength||e.length;e.totalLength=h;return!m&&h});h.totalLength=m?f.totalLength:n;h.response=f&&f.response}else h.totalLength=m?f.totalLength:h.length;h.forEach=q;return h}})},"dstore/SimpleQuery":function(){define(["dojo/_base/declare","dojo/_base/array"],function(r,h){function q(f,m){if(-1<f.indexOf(".")){var h=
f.split("."),e=h.length;return function(f){for(var a=0;a<e;a++)f=f&&(m&&f.get?f.get(h[a]):f[h[a]]);return f}}return function(e){return e.get?e.get(f):e[f]}}var p={eq:function(f,m){return f===m},"in":function(f,m){return-1<h.indexOf(m.data||m,f)},ne:function(f,m){return f!==m},lt:function(f,m){return f<m},lte:function(f,m){return f<=m},gt:function(f,m){return f>m},gte:function(f,m){return f>=m},match:function(f,m,h){return m.test(f,h)},contains:function(f,m,n,e){var q=this;return h.every(m.data||m,
function(a){if("object"===typeof a&&a.type){var b=q._getFilterComparator(a.type);return h.some(f,function(c){return b.call(q,c,a.args[1],n,e)})}return-1<h.indexOf(f,a)})}};return r(null,{_createFilterQuerier:function(f){function m(a){var b=a.type;a=a.args;var c=e._getFilterComparator(b);if(c){var d=a[0],f=q(d,n),g=a[1];g&&g.fetchSync&&(g=g.fetchSync());return function(a){return c.call(e,f(a),g,a,d)}}switch(b){case "and":case "or":for(var k=0,h=a.length;k<h;k++){var r=m(a[k]);p=p?function(a,c){return"and"===
b?function(b){return a(b)&&c(b)}:function(b){return a(b)||c(b)}}(p,r):r}return p;case "function":return a[0];case "string":k=e[a[0]];if(!k)throw Error("No filter function "+a[0]+" was found in the collection");return k;case void 0:return function(){return!0};default:throw Error('Unknown filter operation "'+b+'"');}}var n=this.queryAccessors,e=this,p=m(f);return function(a){return h.filter(a,p)}},_getFilterComparator:function(f){return p[f]||this.inherited(arguments)},_createSelectQuerier:function(f){return function(m){var n=
f.length;return h.map(m,f instanceof Array?function(e){for(var m={},a=0;a<n;a++){var b=f[a];m[b]=e[b]}return m}:function(e){return e[f]})}},_createSortQuerier:function(f){var m=this.queryAccessors;return function(h){h=h.slice();h.sort("function"==typeof f?f:function(e,h){for(var a=0;a<f.length;a++){var b,c=f[a];if("function"==typeof c)b=c(e,h);else{b=c.get||(c.get=q(c.property,m));var c=c.descending,d=b(e);b=b(h);null!=d&&(d=d.valueOf());null!=b&&(b=b.valueOf());b=d===b?0:!!c===(null===d||d>b&&null!==
b)?-1:1}if(0!==b)return b}return 0});return h}}})})},"dstore/Tree":function(){define(["dojo/_base/declare"],function(r){return r(null,{constructor:function(){this.root=this},mayHaveChildren:function(h){return"hasChildren"in h?h.hasChildren:!0},getRootCollection:function(){return this.root.filter({parent:null})},getChildren:function(h){return this.root.filter({parent:this.getIdentity(h)})}})})},"dstore/Cache":function(){define("dojo/_base/array dojo/when dojo/_base/declare dojo/_base/lang ./Store ./Memory ./QueryResults".split(" "),
function(r,h,q,p,f,m,n){function e(a){return function(){var c=this.inherited(arguments),d=this.cachingCollection||this.cachingStore;c.cachingCollection=d[a].apply(d,arguments);c.isValidFetchCache=!0===this.canCacheQuery||this.canCacheQuery(a,arguments);return c}}function u(a){a.cachingStore||(a.cachingStore=new m);a.cachingStore.Model=a.Model;a.cachingStore.idProperty=a.idProperty}var a={cachingStore:null,constructor:function(){u(this)},canCacheQuery:function(a,c){return!1},isAvailableInCache:function(){return this.isValidFetchCache&&
(this.allLoaded||this.fetchRequest)||this._parent&&this._parent.isAvailableInCache()},fetch:function(){return this._fetch(arguments)},fetchRange:function(){return this._fetch(arguments,!0)},_fetch:function(a,c){var d=this.cachingStore,f=this.cachingCollection||d,e=this,k=this.isAvailableInCache();if(k)return new n(h(k,function(){return e.isAvailableInCache()?c?f.fetchRange(a[0]):f.fetch():e.inherited(a)}));k=this.fetchRequest=this.inherited(a);h(k,function(a){var b=!c;e.fetchRequest=null;r.forEach(a,
function(a){!e.isLoaded||e.isLoaded(a)?d.put(a):b=!1});b&&(e.allLoaded=!0);return a});return k},isValidFetchCache:!1,get:function(a,c){var d=this.cachingStore,e=this.getInherited(arguments),f=this;return h(this.fetchRequest,function(){return h(d.get(a),function(k){if(void 0!==k)return k;if(e)return h(e.call(f,a,c),function(c){c&&d.put(c,{id:a});return c})})})},add:function(a,c){var d=this.cachingStore;return h(this.inherited(arguments),function(e){var f=d.put(e&&"object"===typeof e?e:a,c);return e||
f})},put:function(a,c){var d=this.cachingStore;d.remove(c&&c.id||this.getIdentity(a));return h(this.inherited(arguments),function(e){var f=d.put(e&&"object"===typeof e?e:a,c);return e||f})},remove:function(a,c){var d=this.cachingStore;return h(this.inherited(arguments),function(e){return h(d.remove(a,c),function(){return e})})},evict:function(a){this.allLoaded=!1;return this.cachingStore.remove(a)},invalidate:function(){this.allLoaded=!1},_createSubCollection:function(){var a=this.inherited(arguments);
a._parent=this;return a},sort:e("sort"),filter:e("filter"),select:e("select"),_getQuerierFactory:function(a){var c=this.cachingStore;return this.inherited(arguments)||p.hitch(c,c._getQuerierFactory(a))}};f=q(null,a);f.create=function(b,c){b=q.safeMixin(p.delegate(b),a);q.safeMixin(b,c);u(b);return b};return f})},"dstore/Trackable":function(){define("dojo/_base/lang dojo/_base/declare dojo/aspect dojo/when dojo/promise/all dojo/_base/array dojo/on".split(" "),function(r,h,q,p,f,m,n){function e(a,c,
d){for(var e=a.length-1;0<=e;--e){var f=a[e],k=f.start,f=k+f.count;if(c>f){a.splice(e+1,0,{start:c,count:d-c});return}d>=k&&(c=Math.min(c,k),d=Math.max(d,f),a.splice(e,1))}a.unshift({start:c,count:d-c})}var u=0,a={track:function(){function a(){return function(){var a=this,b=this.inherited(arguments);p(b,function(b){b=a._results=b.slice();a._partialResults&&(a._partialResults=null);a._ranges=[];e(a._ranges,0,b.length)});return b}}function c(){return function(a){var b=this,c=a.start,d=a.end,f=this.inherited(arguments);
this._results||p(f,function(a){return p(a.totalLength,function(f){var g=b._partialResults||(b._partialResults=[]);d=Math.min(d,c+a.length);g.length=f;f=[c,d-c].concat(a);g.splice.apply(g,f);e(b._ranges,c,d);return a})});return f}}function d(a,b){u++;var c=b.target;b=r.delegate(b,A[a]);p(z._results||z._partialResults,function(d){if(d){var e,g,k,h=z._ranges,n,q="id"in b?b.id:f.getIdentity(c),p=-1,r=-1,u=-1,t=-1;if("delete"===a||"update"===a)for(e=0;-1===p&&e<h.length;++e)for(n=h[e],g=n.start,k=g+n.count;g<
k;++g)if(f.getIdentity(d[g])==q){p=b.previousIndex=g;r=e;d.splice(p,1);n.count--;for(g=e+1;g<h.length;++g)h[g].start--;break}if("add"===a||"update"===a){if(B){if(B([c]).length){var A=0;k=h.length-1;g=-1;for(var J;A<=k&&-1===u;)e=A+Math.round((k-A)/2),n=h[e],r=d.slice(n.start,n.start+n.count),"beforeId"in b&&(g=null===b.beforeId?r.length:C(r,b.beforeId)),-1===g&&(g=p>=Math.max(0,n.start-1)&&p<=n.start+n.count?p:f.defaultNewToStart?0:r.length),r.splice(g,0,c),q=m.indexOf(B(r),c),J=n.start+q,0===q&&
0!==n.start?k=e-1:q>=r.length-1&&J<d.length?A=e+1:(u=J,t=e);if(-1===u&&0<A&&A<h.length)var L=!0}}else{g=-1;if("beforeId"in b)if(null===b.beforeId)u=d.length,g=h.length-1;else for(e=0,k=h.length;-1===t&&e<k;++e)n=h[e],u=C(d,b.beforeId,n.start,n.start+n.count),-1!==u&&(t=e);else"update"===a?(u=p,t=r):f.defaultNewToStart?g=u=0:(u=d.length,g=h.length-1);-1!==g&&-1===t&&(n=h[g])&&n.start<=u&&u<=n.start+n.count&&(t=g)}if(-1<u&&-1<t)for(b.index=u,d.splice(u,0,c),h[t].count++,e=t+1;e<h.length;++e)h[e].start++;
else if(L)for(b.beforeIndex=h[A].start,e=A;e<h.length;++e)h[e].start++}b.totalLength=d.length}(d=z["on_tracked"+a])&&d.call(z,b)})}var f=this.store||this,g=[],k={add:1,update:1,"delete":1},t;for(t in k)g.push(this.on(t,function(a){return function(b){d(a,b)}}(t)));var z=h.safeMixin(r.delegate(this),{_ranges:[],fetch:a(),fetchRange:c(),releaseRange:function(a,b){if(this._partialResults){a:for(var c=this._ranges,d=0,e;e=c[d];++d){var f=e.start,g=f+e.count;if(a<=f)if(b>=g)c.splice(d,1);else{e.start=b;
e.count=g-e.start;break a}else if(a<g)if(b>f){c.splice(d,1,{start:f,count:a-f},{start:b,count:g-b});break a}else e.count=a-e.start}for(c=a;c<b;++c)delete this._partialResults[c]}},on:function(a,b){var c=this,d=this.getInherited(arguments);return n.parse(z,a,b,function(a,e){return e in k?q.after(z,"on_tracked"+e,b,!0):d.call(c,e,b)})},tracking:{remove:function(){for(;0<g.length;)g.pop().remove();this.remove=function(){}}},track:null});this.fetchSync&&(h.safeMixin(z,{fetchSync:a(),fetchRangeSync:c()}),
z.fetchSync());var B;m.forEach(this.queryLog,function(a){var b=B,c=a.querier;c&&(B=b?function(a){return c(b(a))}:c)});var A={add:{index:void 0},update:{previousIndex:void 0,index:void 0},"delete":{previousIndex:void 0}},C=function(a,b,c,d){d=void 0!==d?d:a.length;for(c=void 0!==c?c:0;c<d;++c)if(f.getIdentity(a[c])===b)return c;return-1};return z}};f=h(null,a);f.create=function(b,c){b=h.safeMixin(r.delegate(b),a);h.safeMixin(b,c);return b};return f})},"dstore/legacy/DstoreAdapter":function(){define(["dojo/_base/declare",
"dojo/_base/array","dojo/store/util/QueryResults"],function(r,h,q){function p(f){return f}var f={store:null,constructor:function(f){this.store=f;if(f._getQuerierFactory("filter")||f._getQuerierFactory("sort"))this.queryEngine=function(e,n){n=n||{};var a=f._getQuerierFactory("filter"),b=a?a(e):p,a=f._getQuerierFactory("sort"),c=p;a&&(c=a(h.map(n.sort,function(a){return{property:a.attribute,descending:a.descending}})));var d=p;isNaN(n.start)&&isNaN(n.count)||(d=function(a){var b=n.start||0,b=a.slice(b,
b+(n.count||Infinity));b.total=a.length;return b});return function(a){return d(c(b(a)))}};var n=this;f.on("add,update,delete",function(e){var h=e.type,a=e.target;n.notify("add"===h||"update"===h?a:void 0,"delete"===h||"update"===h?"id"in e?e.id:f.getIdentity(a):void 0)})},labelAttr:"title",getLabel:function(f){return this.store.getLabel(f)},query:function(f,h){h=h||{};var e=this.store.filter(f),p,a,b;if(b=h.sort)if("[object Array]"===Object.prototype.toString.call(b))for(var c;c=b.pop();)e=e.sort(c.attribute,
c.descending);else e=e.sort(b);e.track&&!e.tracking&&(e=e.track(),a=!0);"start"in h&&(p=h.start||0,p=e[e.fetchRangeSync?"fetchRangeSync":"fetchRange"]({start:p,end:h.count?p+h.count:Infinity}));p=p||e[e.fetchSync?"fetchSync":"fetch"]();b=p.totalLength;p=new q(p);p.total=b;p.observe=function(b,c){function f(b){return void 0===b&&a?-1:b}var h=e.on("add",function(a){b(a.target,-1,f(a.index))}),m=e.on("update",function(a){!c&&a.previousIndex===a.index&&isFinite(a.index)||b(a.target,f(a.previousIndex),
f(a.index))}),n=e.on("delete",function(a){b(a.target,f(a.previousIndex),-1)}),p={remove:function(){h.remove();m.remove();n.remove()}};p.cancel=p.remove;return p};return p},notify:function(){}};h.forEach(["get","put","add","remove","getIdentity"],function(h){f[h]=function(){var f=this.store;return(f[h+"Sync"]||f[h]).apply(f,arguments)}});return r(null,f)})}}});
//# sourceMappingURL=dgrid.js.map