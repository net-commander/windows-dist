//>>built
require({cache:{"xgrid/main":function(){define("xide/data/ObservableStore xide/data/Reference xide/data/Source xgrid/Actions xgrid/Base xgrid/Clipboard xgrid/ColumnHider xgrid/ContextMenu xgrid/Defaults xgrid/DnD xgrid/Focus xgrid/Grid xgrid/Keyboard xgrid/KeyboardNavigation xgrid/Layout xgrid/ListRenderer xgrid/MultiRenderer xgrid/Renderer xgrid/Search xgrid/ThumbRenderer xgrid/component xgrid/Toolbar xgrid/TreeRenderer xgrid/types xgrid/Noob xgrid/GridLite".split(" "),function(){})},"xgrid/Actions":function(){define("xdojo/declare xide/types xaction/ActionProvider xaction/DefaultActions xide/lodash xide/$ xide/console".split(" "),
function(b,h,l,n,g,k,a){a={_ActionContextState:null,onActivateActionContext:function(a,c){},onDeactivateActionContext:function(a,c){},onBeforeAction:function(a){},onAfterAction:function(a,c){a=this.getAction(a);if(null!=c&&g.isObject(c)){var f=c.select,k=c.focus||!0;if(f)return this.select(f,null,!0,{append:c.append,focus:k,delay:c.delay||1,expand:c.expand})}this._emit(h.EVENTS.ON_AFTER_ACTION,a)},hasPermission:function(a){return n.hasAction(this.permissions,a)},addAction:function(a,c){if(c.keyCombo&&
g.isArray(c.keyCombo)&&-1!==c.keyCombo.indexOf("dblclick")){var f=this;this.addHandle("dbclick",this.on("dblclick",function(a){(a=f.row(a))&&f.runAction(c,a.data)}))}return this.inherited(arguments)},_onSelectionChanged:function(a){this.inherited(arguments);this.refreshActions()},updateActions:function(a,c){var f,k=this.getSelection();a&&c&&(f=a.getItemActions(),f=this._filterActions(k,f,a),c.setItemActions({},f))},startup:function(){function a(e){e&&e.target&&k(e.target).hasClass("dgrid-content")&&
(c.select([],null,!1),c.deselectAll(),"contextmenu"!==e.type&&setTimeout(function(){c.domNode.focus();document.activeElement=c.domNode;k(c.domNode).focus()},1))}if(!this._started){var c=this;c.domNode.tabIndex=-1;this.on("contextmenu",a.bind(this));this._on("selectionChanged",function(a){this._onSelectionChanged(a)}.bind(this));this._on("onAddActions",function(a){a=a.actions;var e=h.ACTION.HEADER;c.getAction(e)||a.push(c.createAction({label:"Header",command:e,icon:"fa-hdd-o",tab:"View",group:"Show",
mixin:{actionType:"multiToggle"},onCreate:function(a){a.set("value",c.showHeader)},onChange:function(a,e){c._setShowHeader(e);c.showHeader=e;c.onAfterAction(h.ACTION.HEADER)}}))});return this.inherited(arguments)}}};b=b("xgrid.Actions",l,a);b.Implementation=a;return b})},"xgrid/Base":function(){define("xdojo/declare xide/types xgrid/types xide/utils/ObjectUtils xide/utils dgrid/OnDemandGrid xgrid/Defaults xgrid/Layout xgrid/Focus xgrid/ListRenderer xgrid/ThumbRenderer xgrid/TreeRenderer dgrid/util/misc".split(" "),
function(b,h,l,n,g,k,a,e,c,f,v,r,y){function m(a,d,c,e){return b.classFactory(a,d,c,e,w)}function p(a,d){return d.some(function(d){return 0<=a.indexOf(d)})}function d(a,d,c,e,k,f){var x=!1;d=d||A;if(!d&&!c)return A;d&&(x=p(q,_.keys(e)),f=g.cloneKeys(f||w),x&&(g.mixin(f,e),f=_.pick(f,_.identity)),d=m(a,f,[A],d));e=[];x={};if(d&&c){f=g.cloneKeys(u);g.mixin(f,c);for(var b in f)if(c=f[b],f[b]){var B=null;!0===c?B=u[b]:u[b]?(B=u[b],B=p(["CLASS","CLASSES","IMPLEMENTATION"],_.keys(c))?g.mixin(g.cloneKeys(B),
c):B):B=c;B&&(c=m(b,B.CLASSES||[],[B.CLASS],B.IMPLEMENTATION),e.push(c),x[b]=c)}0<e.length&&(d=m(a,[d],e,k));d.prototype._featureMap=x}return d}var q="EVENTED GRID EDITOR RENDERER DEFAULTS LAYOUT FOCUS i18".split(" "),u=h.DEFAULT_GRID_FEATURES,w=h.GRID_BASES;l=h.DEFAULT_GRID_OPTIONS;var A=b("xgrid.Default",null,{_isHighlighting:!1,_featureMap:{},isRendered:function(d){if(!d)return null!=this.bodyNode;d=this._normalize(d);var a=this.collection;if(d){d=d.data;var a=a.idProperty,c=this.getRows(!0);if(c)for(var e=
0;e<c.length;e++){var f=this.row(c[e]);if(f&&f.data&&f.data&&d&&f.data[a]===d[a])return!0}}return!1},highlightRow:function(){},getParent:function(){return this._parent},get:function(d){var a=this.getParent();return"iconClass"===d&&a&&a.icon?a.icon():this.inherited(arguments)},set:function(d,a){var c=this.getParent();if("iconClass"===d){var e=c.set;if(e)e.apply(c,[d,a]);else if(c&&c.icon)return c.icon(a),!0}"title"===d&&a&&c&&((e=c.set)?e.apply(c,[d,a]):c&&c.title&&c.title(a));if("loading"===d&&c&&
c){if(c.startLoading)return e=c._options.icon,!0===a?(c.startLoading("",.5),c.icon("fa-spinner fa-spin")):(c.finishLoading(),c.icon(e)),!0;c.set&&c.set("loading",a)}return this.inherited(arguments)},runAction:function(d){d.command==h.ACTION.HEADER&&this._setShowHeader(!this.showHeader);return this.inherited(arguments)},highlight:function(d){var a=$(this.domNode.parentNode);d?this._isHighlighting||(this._isHighlighting=!0,a.addClass("highlight")):(this._isHighlighting=!1,a.removeClass("highlight"))},
getState:function(d){d=this.inherited(arguments)||{};d.showHeader=this.showHeader;return d},postMixInProperties:function(){var d=this.state;d&&(this.showHeader=d.showHeader);return this.inherited(arguments)},renderArray:function(d){this._lastData=d;return this.inherited(arguments)},getData:function(){return this._lastData},refreshItem:function(d,a){a&&(this._muteSelectionEvents=!0);this.collection.emit("update",{target:d});a&&(this._muteSelectionEvents=!1)},onShow:function(){this._emit(h.EVENTS.ON_VIEW_SHOW,
this);return this.inherited(arguments)},isActive:function(d){return g.isDescendant(this.domNode,d||document.activeElement)},_showHeader:function(d){$(this.domNode).find(".dgrid-header").each(function(a,c){$(c).css("display",d?"":"none")});$(this.domNode).find(".dgrid-scroller").each(function(a,c){$(c).css("margin-top",d?26:0)})},destroy:function(){this._emit("destroy",this);return this.inherited(arguments)},hasFeature:function(d){return p(["name"],_.keys(this._featureMap))},getRows:function(d,a){var c=
[],e=this,f=$(e.domNode).find(".dgrid-row");_.each(f,function(a){(a=e.row(a))&&a.element&&c.push(a[d?"element":"data"])});return a?c.filter(a):c},startup:function(){var d=this.inherited(arguments);this.columns&&_.each(this.columns,function(d){d.width&&this.styleColumn(parseInt(d.id),"width:"+d.width)},this);var a=this;this.showExtraSpace&&this.on("dgrid-refresh-complete",function(){if(a.getRows().length){var d=$(a.contentNode).find(".dgrid-extra");d.length||(d=$('\x3cdiv class\x3d"dgrid-extra" style\x3d"width:100%;height:80px"\x3e\x3c/div\x3e'),
$(a.contentNode).append(d),d.on("click",function(){a.deselectAll()}),d.on("contextmenu",function(){a.deselectAll()}))}});return d}});n=d("xgrid/Base",{options:g.clone(l)},{SELECTION:!0,KEYBOARD_SELECTION:!0,PAGINATION:!1,COLUMN_HIDER:!1},null,{});n.createGridClass=d;n.classFactory=m;n.DEFAULT_GRID_FEATURES=u;n.DEFAULT_GRID_BASES=w;n.DEFAULT_GRID_OPTIONS=l;n.DEFAULT_GRID_OPTION_KEYS=h.DEFAULT_GRID_OPTION_KEYS;return n})},"xgrid/types":function(){define("xdojo/declare xide/types xgrid/ColumnHider dgrid/extensions/ColumnReorder dgrid/extensions/ColumnResizer dgrid/extensions/Pagination xgrid/Selection xgrid/Toolbar xgrid/ContextMenu xgrid/Keyboard xide/mixins/EventedMixin dgrid/OnDemandGrid xgrid/Defaults xgrid/Layout xgrid/Focus xgrid/ListRenderer xgrid/Clipboard xgrid/Actions xlang/i18".split(" "),
function(b,h,l,n,g,k,a,e,c,f,v,r,y,m,p,d,q,u,w){h.GRID_BASES={GRID:r,LAYOUT:m,DEFAULTS:y,RENDERER:d,EVENTED:v,FOCUS:p,i18:w};h.DEFAULT_GRID_OPTIONS={USE_JQUERY_CSS:!0,DESELECT_SELECTED:!0,CLEAR_SELECTION_ON_CLICK:!0,ITEM_ACTIONS:{},GRID_ACTIONS:{},PUBLISH_SELECTION:!1};h.GRID_OPTION={USE_JQUERY_CSS:"USE_JQUERY_CSS",DESELECT_SELECTED:"DESELECT_SELECTED",CLEAR_SELECTION_ON_CLICK:"CLEAR_SELECTION_ON_CLICK",ITEM_ACTIONS:"ITEM_ACTIONS",GRID_ACTIONS:"GRID_ACTIONS"};h.DEFAULT_GRID_FEATURES={SELECTION:{CLASS:a,
IMPLEMENTATION:{},CLASSES:null},KEYBOARD_SELECTION:{CLASS:f,IMPLEMENTATION:{},CLASSES:null},COLUMN_HIDER:{CLASS:l,IMPLEMENTATION:{},CLASSES:null},COLUMN_REORDER:{CLASS:n,IMPLEMENTATION:{},CLASSES:null},COLUMN_RESIZER:{CLASS:g,IMPLEMENTATION:{},CLASSES:null}};h.GRID_FEATURES={SELECTION:{CLASS:a,IMPLEMENTATION:{},CLASSES:null},KEYBOARD_SELECTION:{CLASS:f,IMPLEMENTATION:{},CLASSES:null},COLUMN_HIDER:{CLASS:l,IMPLEMENTATION:{},CLASSES:null},COLUMN_REORDER:{CLASS:n,IMPLEMENTATION:{},CLASSES:null},COLUMN_RESIZER:{CLASS:g,
IMPLEMENTATION:{},CLASSES:null},PAGINATION:{CLASS:k,IMPLEMENTATION:{},CLASSES:null},TOOLBAR:{CLASS:e,IMPLEMENTATION:{},CLASSES:null},CONTEXT_MENU:{CLASS:c,IMPLEMENTATION:{},CLASSES:null},ACTIONS:{CLASS:u,IMPLEMENTATION:{},CLASSES:null},CLIPBOARD:{CLASS:q,IMPLEMENTATION:{},CLASSES:null}};return b(null,[],{})})},"xgrid/ColumnHider":function(){define(["xdojo/declare","dojo/has","dgrid/util/misc","xide/types","xide/utils"],function(b,h,l,n,g){return b("xgrid.ColumnHider",null,{columnHiderActionRootCommand:"View/Columns",
i18nColumnHider:{},_columnHiderRules:null,_runAction:function(k,a,e){if(k&&-1!=k.command.indexOf(this.columnHiderActionRootCommand)){var c=k.column,f=this.isColumnHidden(c.id);this.showColumn(c.id,f);!1!==a&&k.set("value",!this.isColumnHidden(c.id))}return this.inherited(arguments)},getColumnHiderActions:function(k,a){function e(d){var a="Show "+(d.label||d.field||""),e=d.icon||"fa-cogs";if(!d.unhidable){var q=f.createAction(a,c+"/"+a,e,null,"View","Columns","item|view",function(c){var f={widgetArgs:{checked:!d.hidden,
iconClass:e,style:"float:inherit;"},actionType:"multiToggle"};c.actionType="multiToggle";c.setVisibility(n.ACTION_VISIBILITY_ALL,g.cloneKeys(f,!1));a=c.label.replace("Show ","")},null,{column:d,filterGroup:"item|view",tab:"View",value:!d.hidden,addPermission:!0},null,null,k,l,f,f);q&&b.push(q)}}var c=this.columnHiderActionRootCommand,f=this,b=[],h=n.ACTION_VISIBILITY,l=this.domNode;a=a||[];_.find(a,{command:c})||b.push(this.createAction({label:"Columns",command:c,icon:"fa-columns",tab:"View",group:"Columns",
toggleGroup:f.id+"Columns",onCreate:function(d){d.setVisibility(h.RIBBON,{expand:!0}).setVisibility(h.ACTION_TOOLBAR,!1)}}));var m=this.subRows,p=!0,d,q,u,w;u=0;for(d=m.length;u<d;u++)for(w=0,q=m[u].length;w<q;w++)e(m[u][w]),p&&(p=!1);return b},resize:function(){this.inherited(arguments);this._checkHiddenColumns()},_checkHiddenColumns:function(){var k=this.subRows,a,e,c,f,b=$(this.domNode).width();c=0;for(a=k.length;c<a;c++)for(f=0,e=k[c].length;f<e;f++){var g=k[c][f];g.minWidth&&(b<g.minWidth?g.unhidable||
this.showColumn(g.id,!1):this.showColumn(g.id,!0))}},startup:function(){if(!this._started){this._columnHiderCheckboxes={};this._columnHiderRules={};var k=this.inherited(arguments);this._checkHiddenColumns();var a=this.subRows,e,c,f,b,g=this;f=0;for(e=a.length;f<e;f++)for(b=0,c=a[f].length;b<c;b++){var h=a[f][b],m=h.id;!0===h.hidden&&(h.hidden=!1,g._hideColumn(m),h.hidden=!0)}if(this.getActionStore)this.getActionStore().on("update",function(a){a=a.target;-1!==a.command.indexOf("View/Columns")&&(g.showColumn(a.column.id,
a.get("value")),g.onAfterAction(a))});return k}},left:function(b,a){return this.right(b,-a)},right:function(b,a){b.element||(b=this.cell(b));for(var e=this.inherited(arguments),c=b;e.column.hidden;){e=this.inherited(arguments,[e,0<a?1:-1]);if(c.element===e.element)return b;c=e}return e},isColumnHidden:function(b){return!!this._columnHiderRules[b]},_hideColumn:function(b){var a=this,e="#"+l.escapeCssIdentifier(this.template?this.template.id:this.domNode.id)+" .dgrid-column-",c;this._columnHiderRules[b]||
(this._columnHiderRules[b]=l.addCssRule(e+l.escapeCssIdentifier(b,"-"),"display: none;"),8!==h("ie")&&10!==h("ie"))||(c=l.addCssRule(".dgrid-row-table","display: inline-table;"),window.setTimeout(function(){c.remove();a.resize()},0))},_showColumn:function(b){this._columnHiderRules[b]&&(this._columnHiderRules[b].remove(),delete this._columnHiderRules[b])},showColumn:function(b,a){this.isColumnHidden(b)?a&&this._showColumn(b):a||this._hideColumn(b)}})})},"xgrid/Selection":function(){define("xdojo/declare xdojo/has xide/types xide/utils dgrid/Selection dojo/dom-class dojo/on dojo/Deferred xide/lodash xide/$".split(" "),
function(b,h,l,n,g,k,a,e,c,f){function v(d){var a=[];d&&d.rows&&d.rows.forEach(function(d){a.push(d.id)});return a}function r(d){return c.all(d,function(a){return a.length==d[0].length&&0==c.difference(a,d[0]).length})}function y(d,a,c){d=(d?d.map(function(d){return d?d.data||d:{}}):[]).map(function(d){return d[c]});a=a.map(function(d){return d[c]});return d.join(",")===a.join(",")}function m(d){f(d.domNode).find(".dgrid-focus").each(function(d,a){f(a).removeClass("dgrid-focus")})}var p={_lastSelection:null,
_lastFocused:null,_refreshInProgress:null,__lastLast:null,__lastFirst:null,_muteSelectionEvents:!0,selectAll:function(d){this.select(this.getRows(d),null,!0,{append:!1,delay:1})},setState:function(d){d&&d.selection&&d.selection.selection&&this.select(d.selection.selection,null,!0,{expand:!0,append:!1,scrollInto:!0},"restore");return this.inherited(arguments)},getState:function(d){d=this.inherited(arguments)||{};var a=this._preserveSelection(),e={selection:[]},b=this.collection.idProperty;a.selection&&
b&&c.each(a.selection,function(d){d&&d[b]&&e.selection.push(d[b])});a.focused&&(e.focused=a.focused.path);d.selection=e;return d},refresh:function(d){if(!this.isRendered())return!1;if(this._refreshInProgress)return this._refreshInProgress;var a=!1!==d?this._preserveSelection():null,c=this,e=this.isActive(),b=this.inherited(arguments);(this._refreshInProgress=b)&&b.then&&b.then(function(){c._refreshInProgress=null;e&&a&&c._restoreSelection(a,1,!e,"restore")});return b},_normalize:function(d){if(!d)return null;
d.element||(d=this.cell(d));d&&d.row&&(d=d.row);return d},deselectAll:function(){this._lastSelection&&(this.clearSelection(),this._lastFocused=this._lastSelection=null,f(this.domNode).find(".dgrid-focus").each(function(d,a){f(a).removeClass("dgrid-focus")}),this._emit("selectionChanged",{selection:[],why:"clear",source:"code"}))},invertSelection:function(d){var a=d||this._getSelection()||[],e=[];d=this.getRows();c.each(d,function(d){-1===a.indexOf(d)&&e.push(d)});return this.select(e,null,!0,{append:!1})},
runAction:function(d){c.isString(d)&&(d=this.getActionStore().getSync(d));return"File/Select/None"===d.command?(this.deselectAll(),!0):"File/Select/All"===d.command?(this.selectAll(),!0):"File/Select/Invert"===d.command?this.invertSelection():this.inherited(arguments)},_preserveSelection:function(){this.__lastSelection=this._getSelection();this._lastFocused=this.getFocused();return{selection:this._getSelection(),focused:this.getFocused()}},_restoreSelection:function(d,a,e,b){var f=d?d.focused:this._lastFocused;
d=d?d.selection:this.__lastSelection;if(c.isEmpty(d))this._lastFocused=null;else return a=this.select(d,null,!0,{silent:null!=e?e:!0,append:!1,delay:null!=a?a:0},b),f&&this.isActive()&&this.focus(this.row(f)),a},getPrevious:function(d,a,c){d=d||this.getFocused(a);d=this._normalize(d);var e=this.cell(this._move(d,-1,"dgrid-row"));if(e&&e.row&&(e=e.row[a?"element":"data"],!0===c&&this.isSelected(e))){if(d&&d.data&&d.data==e)return null;if(d=this.getPrevious(e,a,c))return d}return e},getNext:function(d,
a,c){d=d||this.getFocused(a);d=this._normalize(d);var e=this.cell(this._move(d,1,"dgrid-row"));if(e&&e.row&&(e=e.row[a?"element":"data"],!0===c&&this.isSelected(e))){if(d&&d.data&&d.data==e)return null;if(d=this.getNext(e,a,c))return d}return e},getSelection:function(a){return this._getSelection(a)},_getSelection:function(a){var c=[];if(this.collection){for(var e in this.selection){var b=this.collection.getSync(e);b&&c.push(b)}if(a)return c.filter(a)}return c},getSelectedItem:function(a){a=this.getSelection(a);
return 1===a.length?a[0]:null},postCreate:function(){var a=this;if(!0===this.options[l.GRID_OPTION.CLEAR_SELECTION_ON_CLICK]){var c=function(a){a&&a.target&&k.contains(a.target,"dgrid-content")&&this.deselectAll()}.bind(this);this.on("click",function(a){c(a)}.bind(this))}this.on("dgrid-select",function(c){var e=v(a._lastSelection),b=v(c);r([e,b])||(a._lastSelection=c,a._emit("selectionChanged",{selection:a._getSelection(),why:"select",source:c.parentType}))});return this.inherited(arguments)},_fireSelectionEvents:function(){if(!0!==
this._muteSelectionEvents)return this.inherited(arguments)},__select:function(a,e,b,f,g){c.each(a,function(a){a&&(a=this.row(a))&&this._select(a,e,b)},this);f&&f.resolve(a);this._muteSelectionEvents=!1;this._fireSelectionEvents();if((f=this.getRows())&&f.length&&a&&a.length&&b&&g&&"mouse"!==g){var k=a[a.length-1];if(f[f.length-1]==k){if(this.__lastLast&&this.__lastLast==k){-1===g.indexOf("pointer")&&this._emit("bounced",{direction:1,item:k});return}this.__lastLast=k}else this.__lastLast=null;a=a[0];
f[0]==a?this.__lastFirst&&this.__lastFirst==a?-1===g.indexOf("pointer")&&this._emit("bounced",{direction:-1,item:a}):this.__lastFirst=a:this.__lastFirst=null}else this.__lastFirst=null},select:function(a,b,f,g,k){clearTimeout(this._selectTimer);this._selectTimer=null;var l="mouse"===k;this.isActive();var v=new e;k=k||"";g=g||{};l&&(g.focus=!0);f=null===f?!0:f;var l=g.delay||0,r=this,p=this.collection,F=p.idProperty;!0===g.silent&&(r._muteSelectionEvents=!0);var t=n.isArray(a)?a:[a];if(!c.isEmpty(t)){var x=
[];if(c.isNumber(t[0])){var G=r.getRows();c.each(t,function(a){x.push(G[a])});t=x}else c.isString(t[0])?(c.each(t,function(a){(a=p.getSync(a))&&x.push(a)}),t=x):t&&t[0]&&t[0].tagName&&(c.each(t,function(a){x.push(r.row(a).data)}),t=x);if(!t.length)return h("debug"),v.resolve(),v;h("debug");a=(this._lastSelection?this._lastSelection.rows:[]).map(function(a){return a.data});a=y(t,a,F);"update"===k&&f&&(g.focus=!0,g.append=!1,g.delay=1);"dgrid-cellfocusin"===k&&(g.focus=!0);!1===g.append&&f&&!a&&(r.clearSelection(t),
m(r));if(!a||"update"!==k&&"dgrid-cellfocusin"!==k)return!0===g.focus&&g.expand&&(r.isRendered(t[0])||r._expandTo(t[0])),g.expand&&(r.isRendered(t[0])||r._expandTo(t[0])),g.scrollInto&&"restore"!==k&&(a=this.row(t[0]),a.element&&a.element.scrollIntoView()),l&&t.length?this._selectTimer=setTimeout(function(){!r.destroyed&&r.collection&&(!1===g.append&&r.clearSelection(),m(r),r.focus(t[0],!1),r.__select(t,b,f,v,k))},l):r.__select(t,b,f,v,k),v;g.focus&&(m(r),r.focus(t[0]))}},_setLast:function(a){for(var c=
[],e=0;e<a.length;e++)c.push(this.collection.getIdentity(a[e]))},isExpanded:function(a){a=this._normalize("root");return!!this._expanded[a.id]},_expandTo:function(a){if(a){var e=this.collection;c.isString(a)&&(a=e.getSync(a));if(e=e.getSync(a[e.parentField])||a.getParent?a.getParent():null)this.isRendered(e)?(this.isExpanded(e)||this.expand(e,!0,!0),this.isExpanded(a)||this.expand(a,!0,!0)):this._expandTo(e)}},startup:function(){var d=this.inherited(arguments);this.addHandle("keyup",a(this.domNode,
"keyup",function(a){if(!a.metaKey&&!a.altKey){var d=this.keyMap[a.keyCode],c;if(c=d)c=!(a.target.type&&32===a.keyCode);c&&0==this._getSelection().length&&d.call(this,a)}}.bind(this)));return d}};b=b("xgrid.Selection",g,p);b.Implementation=p;return b})},"xgrid/Toolbar":function(){define(["xdojo/declare","xide/utils","xide/types","xide/widgets/ActionToolbar"],function(b,h,l,n){var g={_toolbar:null,toolbarClass:null,toolbarInitiallyHidden:!1,runAction:function(b){return b.command==l.ACTION.TOOLBAR?(this.showToolbar(null==
this._toolbar),!0):this.inherited(arguments)},getToolbar:function(){return this._toolbar},showToolbar:function(b,a,e,c,f){if(a=a||this.toolbarClass)this.toolbarClass=a;null==b&&(b=null==this._toolbar);b&&!this._toolbar&&(a=h.addWidget(a||n,h.mixin({style:"min-height:30px;height:auto;width:100%"},f),this,e||this.header,!0),!1!==c&&(a.addActionEmitter(this),a.setActionEmitter(this),this.refreshActions&&this.refreshActions()),this._toolbar=a,this.add&&this.add(a),this._emit("showToolbar",a));!b&&this._toolbar&&
(h.destroy(this._toolbar,!0,this),$(e||this.header).css("height","auto"));this.resize();return this._toolbar},getState:function(b){b=this.inherited(arguments)||{};b.toolbar=null!==this._toolbar;return b},setState:function(b){b&&b.toolbar&&this.showToolbar(b.toolbar);return this.inherited(arguments)},startup:function(){var b=this;this._started||(this._on("onAddActions",function(a){var e=a.actions,c=l.ACTION.TOOLBAR;!a.store.getSync(c)&&this.hasPermission(c)&&e.push(b.createAction({label:"Toolbar",
command:c,icon:l.ACTION_ICON.TOOLBAR,tab:"View",group:"Show",keycombo:["ctrl b"],mixin:{actionType:"multiToggle",value:!1,id:h.createUUID()},onCreate:function(a){a.value=null!==b._toolbar},onChange:function(a,c){b.showToolbar(c);b.onAfterAction(l.ACTION.TOOLBAR)}}))}),this.inherited(arguments),this.showToolbar(!this.toolbarInitiallyHidden))}};b=b("xgrid.Toolbar",null,g);b.Implementation=g;return b})},"xgrid/ContextMenu":function(){define(["dojo/_base/declare","xide/utils","xide/widgets/ContextMenu",
"xide/types"],function(b,h,l,n){return b("xgrid.ContextMenu",null,{contextMenu:null,getContextMenu:function(){return this.contextMenu},_createContextMenu:function(){var b=this.contextMenuArgs||{};h.mixin(b,{owner:this,delegate:this,_actionFilter:{quick:!0}});var k=this.contentNode,b=new l(b,k);b.openTarget=k;b.init({preventDoubleContext:!1});b._registerActionEmitter(this);this.contextMenu=b;this.add?this.add(b):console.error("have no add!")},startup:function(){this._started||(this.inherited(arguments),
this.hasPermission(n.ACTION.CONTEXT_MENU)&&this._createContextMenu())}})})},"xgrid/Keyboard":function(){define("dojo/_base/declare dojo/aspect dojo/dom-class dojo/on dojo/_base/lang dojo/has dgrid/util/misc dojo/_base/sniff dcl/dcl".split(" "),function(b,h,l,n,g,k,a,e){function c(a){a.preventDefault()}var f={checkbox:1,radio:1,button:1},v=/\bdgrid-cell\b/,r=/\bdgrid-row\b/;k.add("dom-contains",function(a,d,c){return!!c.contains});var y=function(a,d,c){function e(a,d){return a[d+"All"]("[id]:not(.ui-state-disabled):not(.dgrid-content-parent):first")}
c=0>c;var b,f;a=d.row(a).element;a=$(a);if(a.length)if(b=d.up(d._focusedNode,1,!0),b=$(b.element),b.length)if(d=a.position().top,f=a.position().left,b=a,c){do b=b.prev("[id]");while(b.length&&!(b.position().top<d&&b.position().left<=f));b.is(".ui-state-disabled")&&(b=e(b,"next"))}else{do b=b.next("[id]");while(b.length&&!(b.position().top>d&&b.position().left>=f));b.is(".ui-state-disabled")&&(b=e(b,"prev"))}else b=a;return b},m={pageSkip:10,tabIndex:-1,keyMap:null,headerKeyMap:null,postMixInProperties:function(){this.inherited(arguments);
this.keyMap||(this.keyMap=g.mixin({},m.defaultKeyMap));this.headerKeyMap||(this.headerKeyMap=g.mixin({},m.defaultHeaderKeyMap))},postCreate:function(){function d(a){var c=a.target;return c.type&&(!f[c.type]||32===a.keyCode)}function c(e){function f(){b._focusedHeaderNode&&(b._focusedHeaderNode.tabIndex=-1);if(b.showHeader){if(g)for(var a=b.headerNode.getElementsByTagName("th"),d=0,c;c=a[d];++d){if(k.test(c.className)){b._focusedHeaderNode=m=c;break}}else b._focusedHeaderNode=m=b.headerNode;m&&(m.tabIndex=
b.tabIndex)}}var g=b.cellNavigation,k=g?v:r,l=e===b.headerNode,m=e;l?(f(),h.after(b,"renderHeader",f,!0)):h.after(b,"renderArray",function(d){var c=b._focusedNode||m;if(k.test(c.className)&&a.contains(e,c))return d;for(var f=e.getElementsByTagName("*"),g=0,x;x=f[g];++g)if(k.test(x.className)){c=b._focusedNode=x;break}c.tabIndex=b.tabIndex;return d});b._listeners.push(n(e,"mousedown",function(a){d(a)||b._focusOnNode(a.target,l,a)}));b._listeners.push(n(e,"keydown",function(a){if(!a.metaKey&&!a.altKey){var c=
b[l?"headerKeyMap":"keyMap"][a.keyCode];c&&!d(a)&&c.call(b,a)}}))}this.inherited(arguments);var b=this;this.tabableHeader&&(c(this.headerNode),n(this.headerNode,"dgrid-cellfocusin",function(){b.scrollTo({x:this.scrollLeft})}));c(this.contentNode);this._debouncedEnsureScroll=a.debounce(this._ensureScroll,this)},removeRow:function(a){if(!this._focusedNode)return this.inherited(arguments);var c=this,d=document.activeElement===this._focusedNode,b=this[this.cellNavigation?"cell":"row"](this._focusedNode);
if(!b)return console.error("no focus target"),this.inherited(arguments);var e=b.row||b,f;a=a.element||a;a===e.element&&((f=this.down(e,!0))&&f.element!==a||(f=this.up(e,!0)),this._removedFocus={active:d,rowId:e.id,columnId:b.column&&b.column.id,siblingId:f&&f.element!==a?f.id:void 0},setTimeout(function(){c._removedFocus&&c._restoreFocus(e.id)},0),this._focusedNode=null);this.inherited(arguments)},insertRow:function(){var a=this.inherited(arguments);this._removedFocus&&!this._removedFocus.wait&&this._restoreFocus(a);
return a},_restoreFocus:function(a){var c=this._removedFocus,d;if((a=(a=a&&this.row(a))&&a.element&&a.id===c.rowId?a:"undefined"!==typeof c.siblingId&&this.row(c.siblingId))&&a.element){if(!a.element.parentNode.parentNode){c.wait=!0;return}"undefined"!==typeof c.columnId&&(d=this.cell(a,c.columnId))&&d.element&&(a=d);c.active&&0!==a.element.offsetHeight?this._focusOnNode(a,!1,null):(l.add(a.element,"dgrid-focus"),a.element.tabIndex=this.tabIndex,this._focusedNode=a.element)}delete this._removedFocus},
addKeyHandler:function(a,c,d){return h.after(this[d?"headerKeyMap":"keyMap"],a,c,!0)},_ensureRowScroll:function(a){var c=this.getScrollPosition().y;c>a.offsetTop?this.scrollTo({y:a.offsetTop}):c+this.contentNode.offsetHeight<a.offsetTop+a.offsetHeight&&this.scrollTo({y:a.offsetTop-this.contentNode.offsetHeight+a.offsetHeight})},_ensureColumnScroll:function(a){var c=this.getScrollPosition().x,d=a.offsetLeft;if(c>d)this.scrollTo({x:d});else{var b=this.bodyNode.clientWidth;a=a.offsetWidth;var e=d+a;
c+b<e&&this.scrollTo({x:b>a?e-b:d})}},_ensureScroll:function(a,c){this.cellNavigation&&(this.columnSets||1<this.subRows.length)&&!c&&this._ensureRowScroll(a.row.element);this.bodyNode.clientWidth<this.contentNode.offsetWidth&&this._ensureColumnScroll(a.element)},_focusOnNode:function(a,c,d,b){var e="_focused"+(c?"Header":"")+"Node",f=this[e],k=this.cellNavigation?"cell":"row",h=this[k](a),m,q,p,u,y;if(a=h&&h.element){if(this.cellNavigation)for(m=a.getElementsByTagName("input"),y=0,p=m.length;y<p;y++)if(q=
m[y],(-1!==q.tabIndex||"_dgridLastValue"in q)&&!q.disabled){q.focus();u=!0;break}null!==d&&(d=g.mixin({grid:this},d),d.type&&(d.parentType=d.type),d.bubbles||(d.bubbles=!0));f&&(l.remove(f,"dgrid-focus"),f.removeAttribute("tabindex"),d&&(d[k]=this[k](f),n.emit(f,"dgrid-cellfocusout",d)));f=this[e]=a;d&&(d[k]=h);e=this.cellNavigation?v:r;!u&&e.test(a.className)&&(a.tabIndex=this.tabIndex,a.focus());l.add(a,"dgrid-focus");d&&!1!==b&&n.emit(f,"dgrid-cellfocusin",d);this._debouncedEnsureScroll(h,c)}},
focusHeader:function(a){this._focusOnNode(a||this._focusedHeaderNode,!0)},focus:function(a,d){var c=a||this._focusedNode;c?this._focusOnNode(c,!1,null,d):this.contentNode.focus()}},p=m.moveFocusVertical=function(a,d){if(this.isThumbGrid){var c=y(a,this,d);if(c&&c.length){this._focusOnNode(c[0],!1,a);a.preventDefault();return}}var b=this.cellNavigation,c=this[b?"cell":"row"](a),e=b&&c.column.id,c=this.down(this._focusedNode,d,!0);b&&(c=this.cell(c,e));this._focusOnNode(c,!1,a);a.preventDefault()},
d=m.moveFocusUp=function(a){p.call(this,a,-1)},q=m.moveFocusDown=function(a){p.call(this,a,1)},u=m.moveFocusPageUp=function(a){p.call(this,a,-this.pageSkip)},w=m.moveFocusPageDown=function(a){p.call(this,a,this.pageSkip)},A=m.moveFocusHorizontal=function(a,c){if(this.cellNavigation||!0===this.isThumbGrid){var d=!this.row(a),b=this["_focused"+(d?"Header":"")+"Node"];1==this.isThumbGrid?(d=this.down(this._focusedNode,c,!0),this._focusOnNode(d,!1,a)):this._focusOnNode(this.right(b,c),d,a);a.preventDefault()}},
D=m.moveFocusLeft=function(a){A.call(this,a,-1)},C=m.moveFocusRight=function(a){A.call(this,a,1)},z=m.moveHeaderFocusEnd=function(a,c){var d;this.cellNavigation&&(d=this.headerNode.getElementsByTagName("th"),this._focusOnNode(d[c?0:d.length-1],!0,a));a.preventDefault()},E=m.moveHeaderFocusHome=function(a){z.call(this,a,!0)},F=m.moveFocusEnd=function(a,d){var c=this.cellNavigation,b=this.contentNode,e=b.scrollTop+(d?0:b.scrollHeight),b=b[d?"firstChild":"lastChild"];-1<b.className.indexOf("dgrid-extra")&&
(b=b.previousSibling);var f=-1<b.className.indexOf("dgrid-preload"),m=f?b[(d?"next":"previous")+"Sibling"]:b,l=m.offsetTop+(d?0:m.offsetHeight),v;if(f){for(;m&&0>m.className.indexOf("dgrid-row");)m=m[(d?"next":"previous")+"Sibling"];if(!m)return}!f||1>b.offsetHeight?(c&&(m=this.cell(m,this.cell(a).column.id)),this._focusOnNode(m,!1,a)):(k("dom-addeventlistener")||(a=g.mixin({},a)),v=h.after(this,"renderArray",function(b){var e=b[d?0:b.length-1];c&&(e=this.cell(e,this.cell(a).column.id));this._focusOnNode(e,
!1,a);v.remove();return b}));e===l&&a.preventDefault()},t=m.moveFocusHome=function(a){F.call(this,a,!0)};m.defaultKeyMap={32:c,33:u,34:w,35:F,36:t,37:D,38:d,39:C,40:q};m.defaultHeaderKeyMap={32:c,35:z,36:E,37:D,39:C};b=b(null,m);b.dcl=e(null,m);return b})},"xgrid/Defaults":function(){define(["xdojo/declare"],function(b){return b("xgrid/Defaults",null,{minRowsPerPage:100,keepScrollPosition:!0,rowsPerPage:30,deselectOnRefresh:!1,cellNavigation:!1,_skipFirstRender:!1,loadingMessage:null,preload:null,
childSelector:".dgrid-row",addUiClasses:!1,noDataMessage:'\x3cspan class\x3d"textWarning"\x3eNo data....\x3c/span\x3e',showExtraSpace:!0})})},"xgrid/Layout":function(){define(["xdojo/declare","xide/utils","xide/widgets/TemplatedWidgetBase","xide/registry","xide/$"],function(b,h,l,n,g){var k={template:null,attachDirect:!0,destroy:function(){this.template&&this.template.remove(this)&&h.destroy(this.template,!0,this);this.inherited(arguments)},getTemplateNode:function(){return this.template.domNode},
getHeaderNode:function(){return this.template.header},getBodyNode:function(){return this.template.grid},getFooterNode:function(){return this.template.footer},resize:function(){this.inherited(arguments);var a=this.template?this.template.domNode:this.domNode,b=!1;this.__masterPanel&&(a=this.__masterPanel.containerNode,b=!0);var c=g(a).height(),f=this.template;if(f){var k=g(f.header),h=k?k.height():0,l=this._toolbar?this._toolbar._height:0;0<l&&0===h&&(h+=l);l&&k&&k.css("height","auto");k=f.footer?g(f.footer).height():
0;c=c-h-k;50<c?(g(f.grid).height(c+"px"),b&&g(f.domNode).width(g(a).width())):g(f.grid).height("inherited")}},buildRendering:function(){if(!this.template){this._domNode=this.domNode;var a=h.addWidget(l,{templateString:'\x3cdiv tabindex\x3d"-1" attachTo\x3d"template" class\x3d"grid-template" style\x3d"width: 100%;height: 100%;overflow: hidden;position: relative;padding: 0px;margin: 0px"\x3e\x3cdiv tabindex\x3d"-1" attachTo\x3d"header" class\x3d"grid-header row" style\x3d"width: 100%;height: auto"\x3e\x3c/div\x3e\x3cdiv tabindex\x3d"0" attachTo\x3d"grid" class\x3d"grid-body row"\x3e\x3c/div\x3e\x3cdiv attachTo\x3d"footer" class\x3d"grid-footer" style\x3d"position: absolute;bottom: 0px;width: 100%"\x3e\x3c/div\x3e\x3c/div\x3e',
declaredClass:"xgrid/_BaseParent_"+this.declaredClass},null,this.domNode,!0);g(a.domNode).attr("tabIndex",-1);this.template=a;this.header=a.header;this.footer=a.footer;this.domNode=this.gridBody=a.grid;this.id=this.template.id;this.domNode.id=this.id;a.domNode.id=this.id;n._hash[this.id]=this;a.add(this);return this.inherited(arguments)}}};b=b("xgrid.Layout",null,k);b.Implementation=k;return b})},"xgrid/Focus":function(){define(["xdojo/declare","xide/types","xide/utils"],function(b,h,l){l={_focused:!1,
_detectFocus:null,_detectBlur:null,destroy:function(){this.inherited(arguments);window.removeEventListener("focus",this._detectFocus,!0);window.removeEventListener("blur",this._detectBlur,!0)},_onBlur:function(){},set:function(b,g){"focused"==b&&this._onFocusChanged(g);return this.inherited(arguments)},_onFocusChanged:function(b,g){this._focused&&!b&&this._onBlur();!this._focused&&b&&this._emit(h.EVENTS.ON_VIEW_SHOW,this);this._focused=b;this.highlight&&this.highlight(b)},getFocused:function(b){if(this._focusedNode){var g=
this.row(this._focusedNode);if(g)return g[b?"element":"data"]}return null},startup:function(){this.inherited(arguments);this.headerNode.tabIndex=-1;this._focused=!0}};b=b("xgrid.Focus",null,l);b.Implementation=l;return b})},"xgrid/ListRenderer":function(){define(["xdojo/declare","xide/types","./Renderer","dojo/dom-construct","dgrid/Grid"],function(b,h,l,n,g){h={_getLabel:function(){return"List"},_getIcon:function(){return"fa-th-list"},activateRenderer:function(b){this._showHeader(!0)},deactivateRenderer:function(b){},
_configColumns:function(){return g.prototype._configColumns.apply(this,arguments)},insertRow:function(b,a){return g.prototype.insertRow.apply(this,arguments)},renderRow:function(b,a){var e=this,c=this.createRowCells("td",function(c,f){var g=b;f.get?g=f.get(b):"field"in f&&"_item"!==f.field&&(g=g[f.field]);e._defaultRenderCell.call(f,b,g,c,a)},a&&a.subRows,b),f=n.create("div",{role:"row"});f.appendChild(c);return f}};b=b("xgrid.ListRenderer",[l],h);b.Implementation=h;return b})},"xgrid/Renderer":function(){define(["xdojo/declare",
"xide/types"],function(b,h){var l={_renderIndex:0,_lastRenderedArray:null,publishRendering:!1,_getLabel:function(){return""},activateRenderer:function(b){},deactivateRenderer:function(b){},runAction:function(b){},delegate:{onDidRenderCollection:function(){}},renderRow:function(b){return b.render?b.render(b,this.inherited):this.inherited(arguments)},renderArray:function(){this._lastRenderedArray=this.inherited(arguments);this._onDidRenderCollection(arguments);return this._lastRenderedArray},_onDidRenderCollection:function(){this._renderIndex++},
didRender:function(){return 0<=this._renderIndex}},n=b("xgrid.Renderer",null,l);n.Implementation=l;return n})},"xgrid/Clipboard":function(){define(["xdojo/declare","xide/types"],function(b,h){var l={runAction:function(b){switch(b.command){case h.ACTION.CLIPBOARD_COPY:return this.clipboardCopy(),this.refreshActions(),!0;case h.ACTION.CLIPBOARD_PASTE:return this.clipboardPaste();case h.ACTION.CLIPBOARD_CUT:return this.clipboardCut(),!0}return this.inherited(arguments)},clipboardPaste:function(){return this.inherited(arguments)},
clipboardCopy:function(){this.currentCutSelection=null;this.currentCopySelection=this.getSelection();this.publish(h.EVENTS.ON_CLIPBOARD_COPY,{selection:this.currentCopySelection,owner:this,type:this.itemType})},clipboardCut:function(){this.currentCopySelection=null;this.currentCutSelection=this.getSelection()},getClipboardActions:function(b){function k(){var a=c.getSelection();return a&&a.length?a[0]?a:(console.error("have no item"),null):null}function a(){switch(this.title){case "Cut":case "Copy":var a;
a=k()?!1:!0;return!1!==a;case "Paste":return null==c.currentCopySelection}return!1}function e(b,e,g,k){f.push(c.createAction({label:b,command:e,icon:g,tab:"Home",group:"Clipboard",keycombo:k,mixin:{addPermission:!0,quick:!0},shouldDisable:a}))}var c=this,f=[];b=h.ACTION;e("Copy",b.CLIPBOARD_COPY,"fa-copy","ctrl c");e("Paste",b.CLIPBOARD_PASTE,"fa-paste","ctrl v");e("Cut",b.CLIPBOARD_CUT,"fa-cut","ctrl x");return f}},n=b("xgrid.Clipboard",null,l);n.Implementation=l;return n})},"xgrid/ThumbRenderer":function(){define(["xdojo/declare",
"xide/types","dojo/dom-construct","./Renderer"],function(b,h,l,n){h={isThumbGrid:!1,_getLabel:function(){return"Thumb"},_getIcon:function(){return"fa-th-large"},activateRenderer:function(b){this._showHeader(!1);this.isThumbGrid=!0},deactivateRenderer:function(b){this.isThumbGrid=!1},renderRow:function(b){return b.render?b.render(b,this.inherited):l.create("span",{className:"fileGridCell",innerHTML:'\x3cspan class\x3d"fa-cube fa-5x""\x3e\x3c/span\x3e \x3cdiv class\x3d"name"\x3e'+b.name+"\x3c/div\x3e",
style:"color:blue;max-width:200px;float:left;margin:18px;padding:18px;"})}};b=b("xgrid.ThumbRenderer",[n],h);b.Implementation=h;return b})},"xgrid/TreeRenderer":function(){define("xdojo/declare ./Renderer dgrid/Tree dojo/keys xide/utils dojo/on".split(" "),function(b,h,l,n,g,k){function a(a){function c(a,d){_.each(a,function(a){(a=b.row(a))&&a.element&&b.expand(a,d,!0)})}this.onTreeKey(a);var b=this;if(!b.isThumbGrid&&(a.keyCode==n.LEFT_ARROW||a.keyCode==n.RIGHT_ARROW||a.keyCode==n.HOME||a.keyCode==
n.END)){var g=a.target;if((!g||-1==g.className.indexOf("InputInner")&&-1==g.className.indexOf("input")&&"text"!==a.target.type)&&(g=this.row(a))&&g.data){var h=g.data,l=this._isExpanded(h),m=this.collection,p=m.getSync(h[m.idProperty]),d=h.getChildren?h.getChildren():p&&p.children?p.children:null,q=!1;null==d&&m.getChildrenSync&&p&&((d=m.getChildrenSync(p))&&d.length?q=!0:d=null);var u=p?p.isDir||p.directory:!1;!u&&q&&d&&(u=!0);var q=d?d[0]:!1,w=this._focusedNode,A=w?this.down(w,d?d.length:0,!0):
null,d=!0===p._EX||null==p._EX,p=this.getSelection?this.getSelection():[p],D=this.down(w,-1,!0),C=this.down(w,1,!0),z={focus:!0,append:!1,delay:1};if(q&&q._reference){var E=m.getSync(q._reference);E&&(q=E)}if(a.keyCode==n.END&&l&&u&&A&&A.element!==w)this.select(A,null,!0,z);else{if(a.keyCode==n.LEFT_ARROW){a.preventDefault();if(h[m.parentField]&&(h=g.data,!l)){h=(m=m.getSync(h[m.parentField]))?this.row(m):null;if(m&&h.element)return this.select([m],null,!0,z);if(D)return this.select(D,null,!0,z);
k.emit(this.contentNode,"keydown",{keyCode:36,force:!0})}g&&(l?c(p,!1):this.select(D,null,!0,z))}if(a.keyCode==n.RIGHT_ARROW){a.preventDefault();if(u&&d&&l&&!q&&C)return this.select(C,null,!0,z);d&&l?q&&this.select([q],null,!0,z):q||!d||u?c(p,!0):C&&this.select(C,null,!0,z)}}}}}g={_getLabel:function(){return"Tree"},_getIcon:function(){return"fa-tree"},deactivateRenderer:function(a){},activateRenderer:function(){this._showHeader(!0)},__getParent:function(a){if(a&&a.getParent){var b=a.getParent();if(b)return this.row(b).element?
this.__getParent(b):b||a}return a},getCurrentFolder:function(){return this.__getParent(this.getRows()[0])},_isExpanded:function(a){return!!this._expanded[this.row(a).id]},onTreeKey:function(){this.inherited(arguments)},startup:function(){if(!this._started){var b=this.inherited(arguments);this.on("keydown",a.bind(this));return b}}};b=b("xgrid.TreeRenderer",[h,l],g);b.Implementation=g;b.KEYBOARD_HANDLER=a;return b})},"xgrid/DnD":function(){define("dojo/_base/declare dojo/_base/lang dojo/_base/array dojo/aspect dojo/dom-class dojo/on dojo/topic dojo/has dojo/when dojo/dnd/Source dojo/dnd/Manager dojo/_base/NodeList xgrid/Selection dojo/has!touch?../util/touch".split(" "),
function(b,h,l,n,g,k,a,e,c,f,v,r,y,m){var p=b(f,{grid:null,getObject:function(a){var b=this.grid;return b._trackError(function(){return b.collection.get(a.id.slice(b.id.length+5))})},_legalMouseDown:function(a){return this.inherited(arguments)&&a.target!==this.grid.bodyNode},onDrop:function(a,b,e){var f=this,g=this._targetAnchor=this.targetAnchor,h=this.grid,k=h.collection;!this.before&&g&&(g=g.nextSibling);g=g&&h.row(g);c(g&&k.get(g.id),function(c){if(f!==a)f.onDropExternal(a,b,e,c);else f.onDropInternal(b,
e,c)})},onDropInternal:function(a,b,e){var f=this.grid,g=f.collection,h=this,k=h._targetAnchor,m;k&&(m=this.before?k.previousSibling:k.nextSibling);k=f.row(a[0]);(b||m!==a[0]&&(e||!k||f.down(k).element!==a[0]))&&a.forEach(function(a){c(h.getObject(a),function(a){var c=g.getIdentity(a);f._trackError(function(){return g[b&&g.copy?"copy":"put"](a,{beforeId:e?g.getIdentity(e):null}).then(function(){h._selectedNodes[c]&&(h._selectedNodes[c]=f.row(c).element)})})})})},onDropExternal:function(a,b,e,f){var g=
this.grid,h=this.grid.collection,k=a.grid;b.forEach(function(b,m){c(a.getObject(b),function(c){g._trackError(function(){return h[h.copy?"copy":"put"](c,{beforeId:f?h.getIdentity(f):null}).then(function(){if(!e){if(k){var f=k.collection.getIdentity(c);!m&&a.selectNone();a.delItem(b.id);return k.collection.remove(f)}a.deleteSelectedNodes()}})})})})},onDndStart:function(a){this.inherited(arguments);a===this&&(v.manager().avatar.node.style.width=this.grid.domNode.offsetWidth/2+"px")},onMouseDown:function(b){e("touch")&&
this.isDragging&&1<m.countCurrentTouches(b,this.grid.touchNode)?(a.publish("/dnd/cancel"),v.manager().stopDrag()):this.inherited(arguments)},onMouseMove:function(a){(!e("touch")||1>=m.countCurrentTouches(a,this.grid.touchNode))&&this.inherited(arguments)},checkAcceptance:function(a){return a.getObject&&f.prototype.checkAcceptance.apply(this,arguments)},getSelectedNodes:function(){if(!this.grid.selection)return this.inherited(arguments);var a=new r,b;for(b in this.grid.selection)a.push(this._selectedNodes[b]);
return a}});b=b(y,{dndSourceType:"dgrid-row",dndParams:null,dndConstructor:p,postMixInProperties:function(){this.inherited(arguments);this.dndParams=h.mixin({accept:[this.dndSourceType]},this.dndParams)},postCreate:function(){function a(b){f[b.id]=b.element}function b(a){delete f[a.id];g.remove(a.element,"dojoDndItemSelected dojoDndItemAnchor")}this.inherited(arguments);var c=this.dndConstructor||p,e=h.mixin(this.dndParams,{grid:this,dropParent:this.contentNode});"function"===typeof this.expand&&
(e.allowNested=!0);this.dndSource=new c(this.bodyNode,e);var f=this.dndSource._selectedNodes={};this.on("dgrid-select",function(b){l.forEach(b.rows,a)});this.on("dgrid-deselect",function(a){l.forEach(a.rows,b)});n.after(this,"destroy",function(){delete this.dndSource._selectedNodes;f=null;this.dndSource.destroy()},!0)},insertRow:function(a){var b=this.inherited(arguments),c="function"===typeof this.getObjectDndType?this.getObjectDndType(a):[this.dndSourceType];g.add(b,"dojoDndItem");this.dndSource.setItem(b.id,
{data:a,type:c instanceof Array?c:[c]});return b},removeRow:function(a){this.dndSource.delItem(this.row(a));this.inherited(arguments)}});b.GridSource=p;return b})},"xgrid/Grid":function(){define(["dojo/_base/declare","xide/types","./Base"],function(b,h,l){b=b("xgrid/Grid",l,{});b.createGridClass=l.createGridClass;b.classFactory=l.classFactory;b.DEFAULT_GRID_FEATURES=h.DEFAULT_GRID_FEATURES;b.DEFAULT_GRID_BASES=l.DEFAULT_GRID_BASES;b.DEFAULT_GRID_OPTIONS=h.DEFAULT_GRID_OPTIONS;b.DEFAULT_GRID_OPTION_KEYS=
h.DEFAULT_GRID_OPTION_KEYS;return b})},"xgrid/KeyboardNavigation":function(){define(["xdojo/declare","dojo/keys","dojo/_base/lang","dojo/on","xide/utils"],function(b,h,l,n,g){var k=l.hitch;return b("xgrid/KeyboardNavigation",null,{childSelector:".dgrid-row",defer:function(a,b){var c=setTimeout(k(this,function(){c=null;this._destroyed||k(this,a)()}),b||0);return{remove:function(){c&&(clearTimeout(c),c=null);return null}}},buildRendering:function(){this.inherited(arguments);if(!this._keyNavCodes){var a=
this._keyNavCodes={};a[h.UP_ARROW]=k(this,"_onUpArrow");a[h.DOWN_ARROW]=k(this,"_onDownArrow")}"string"==typeof this.childSelector||k(this,"childSelector");a=this.domNode;this.__on(a,"keypress",null,k(this,"_onContainerKeypress"));this.__on(a,"keydown",null,k(this,"_onContainerKeydown"))},_onLeftArrow:function(){},_onRightArrow:function(){},_onUpArrow:function(){},_onDownArrow:function(){},___focus:function(){this.focusFirstChild()},_getFirstFocusableChild:function(){return this._getNextFocusableChild(null,
1)},_getLastFocusableChild:function(){return this._getNextFocusableChild(null,-1)},_searchString:"",multiCharSearchDuration:1E3,onKeyboardSearch:function(a,b,c,f){a&&(this.deselectAll(),this.select([this.row(a).data],null,!0,{focus:!0,delay:10,append:!0}))},getSearchableText:function(a){return a.message||a.name||""},_keyboardSearchCompare:function(a,b){if(a&&!a.data){var c=this.row(a);c&&(a.data=c.data)}if(c=a?a.data?this.getSearchableText(a.data):"":""){var c=c.toLowerCase(),f=c.replace(/^\s+/,"").substr(0,
b.length).toLowerCase(),f=b.length&&f==b?-1:0,c=-1!=c.replace(/^\s+/,"").indexOf(b.toLowerCase());return 0==f&&1<b.length&&c?1:f}},_onContainerKeydown:function(a){if(!a.target||-1==a.target.className.indexOf("input")){var b=this._keyNavCodes[a.keyCode];b?(b(a,this.focusedChild),a.stopPropagation(),a.preventDefault(),this._searchString=""):a.keyCode!=h.SPACE||!this._searchTimer||a.ctrlKey||a.altKey||a.metaKey||(a.stopImmediatePropagation(),a.preventDefault(),n.emit(this.domNode,"keypress",{charCode:h.SPACE,
cancelable:!0,bubbles:!0}))}},_onContainerKeypress:function(a){if(!(this.editing||a.target&&-1!=a.target.className.indexOf("input")||32>a.charCode||a.ctrlKey||a.altKey)){var b=null,c,f=0,g=k(this,function(){this._searchTimer&&this._searchTimer.remove();this._searchString+=h;var a=/^(.)\1*$/.test(this._searchString)?1:this._searchString.length;c=this._searchString.substr(0,a);this._searchTimer=this.defer(function(){this._searchTimer=null;this._searchString=""},this.multiCharSearchDuration);var g=this.focusedChildNode||
this.focusedChild||null;if(1==a||!g)if(g=this._getNextFocusableChild(g,1),!g)return;a=g;do{var k=this._keyboardSearchCompare(g,c);k&&0==f++&&(b=g);if(-1==k){f=-1;break}g=this._getNextFocusableChild(g,1)}while(g!=a)}),h=String.fromCharCode(a.charCode).toLowerCase();a.preventDefault();a.stopPropagation();g();this.onKeyboardSearch(b,a,c,f)}},_onChildBlur:function(){},_getNextFocusableChild:function(a,b){var c=a;do{if(a){if(a&&a.node){var f=g.find(".dgrid-cell",a.node,!0);f&&(a=f)}a=this._getNext(a,b)}else if(a=
this[0<b?"_getFirst":"_getLast"](),!a)break;if(null!=a&&a!=c)return a}while(a!=c)},_getFirst:function(){var a=g.find(".dgrid-row",this.domNode,!0);if(a){var b=g.find(".dgrid-cell",a,!0);if(b)return b}return a},_getLast:function(){var a=g.find(".dgrid-row",this.domNode,!1);return a&&(a=g.find(".dgrid-cell",a,!0))?a:null},_getPrev:function(a,b){if(a){var c=this.up(a,1,!0);if(c){var f=null;c.data&&(f=c.data);c.element&&(c=c.element);var h=g.find(".dgrid-cell",c,!0);return h?(h.data||(h.data=f),h):c}}},
_getNext:function(a,b){if(a){var c=this.down(a,1,!0);if(c){c.element&&(c=c.element);var f=g.find(".dgrid-cell",c,!0);return f?f:c}}}})})},"xgrid/MultiRenderer":function(){define(["xdojo/declare","xide/types","xgrid/Renderer","dojo/_base/kernel"],function(b,h,l,n){function g(a,b){k[b]=function(){var a=this.getSelectedRenderer();return a[b]?a[b].apply(this,arguments):this.inherited(arguments)}}var k={renderers:null,selectedRenderer:null,lastRenderer:null,rendererActionRootCommand:"View/Layout",runAction:function(a){a=
this.getAction(a);if(-1!==a.command.indexOf(this.rendererActionRootCommand)){var b=a.getParent?a.getParent():null;a._originEvent="change";this.setRenderer(a.value);b&&(b.set("icon",a.get("icon")),b=b.getChildren(),_.each(b,function(a){a._oldIcon&&a.set("icon",a._oldIcon)}));a.set&&a.set("icon","fa-check");return!0}return this.inherited(arguments)},setState:function(a){var b=a.selectedRenderer?n.getObject(a.selectedRenderer):null;b&&(this.setRenderer(b),this.set("collection",this.collection.getDefaultCollection()));
return this.inherited(arguments)},getState:function(a){a=this.inherited(arguments)||{};this.selectedRenderer&&(a.selectedRenderer=this.getSelectedRenderer.declaredClass);return a},getRendererActions:function(a,b){function c(a,b,c){var e="shift f"+n;n++;var l=null,l=g.createAction({label:a,command:f+"/"+a,icon:b,tab:"View",group:"Layout",mixin:{value:c,addPermission:!0,closeOnClick:!1},keycombo:[e],onCreate:function(a){a._oldIcon=b;a.actionType=h.ACTION_TYPE.SINGLE_TOGGLE;a.value=c}});k.push(l);return k}
var f=this.rendererActionRootCommand,g=this,k=[],l=a||this.getRenderers(),m=h.ACTION_VISIBILITY,n=1;k.push(this.createAction({label:"Layout",command:f,icon:"fa-laptop",tab:"View",group:"Layout",mixin:{closeOnClick:!1},onCreate:function(a){a.value=g.selectedRenderer;a.setVisibility(m.ACTION_TOOLBAR,!1).setVisibility(m.RIBBON,{expand:!0})}}));_.each(l,function(a){var b=a.Implementation||a.prototype;b._getLabel&&c(b._getLabel(),b._getIcon(),a)});return k},getSelectedRenderer:function(){return this.selectedRenderer.prototype},
startup:function(){var a=this;this._on("onAddGridActions",function(b){a.getRendererActions(a.getRenderers(),b.actions).forEach(function(a){b.actions.push(a)})});this.inherited(arguments);this.selectedRenderer&&$(this.domNode).addClass(this.getSelectedRenderer()._getLabel())},getRenderers:function(){return this.renderers},setRenderer:function(a,b){var c=this;c.getSelection();c.getFocused();var f=c.getSelectedRenderer(),g={"new":a,old:c.selectedRenderer},h=$(this.domNode);h.removeClass(f._getLabel());
f.deactivateRenderer.apply(this,g);this._emit("onChangeRenderer",g);this.lastRenderer=this.selectedRenderer;this.selectedRenderer=a;this.selectedRendererClass=a.prototype.declaredClass;h.addClass(a.prototype._getLabel());a.prototype.activateRenderer.apply(this,g);this.collection.reset();(f=this.refresh())&&f.then&&f.then(function(){c._emit("onChangedRenderer",g)});return f}};_.each("row removeRow renderRow insertRow activateRenderer deactivateRenderer".split(" "),function(a){g(k,a)});b=b("xgrid.MultiRenderer",
null,k);b.Implementation=k;return b})},"xgrid/Search":function(){define(["xdojo/declare","xide/widgets/_Search","dojo/on","xide/Keyboard","xide/types"],function(b,h,l,n,g){return b("xgrid/Search",null,{_searchText:null,_search:null,runAction:function(b){b&&b.command==g.ACTION.SEARCH&&this._search&&(this._search.isHidden()?this._search.show("",!1):this._search.hide());return this.inherited(arguments)},buildRendering:function(){this.inherited(arguments);var b=this,a=b.domNode.parentNode,e=new h({});
e.find=function(){b._searchText=this.searchInput.value;b.set("collection",b.collection)};e.showSearchBox(a);e.show("",!1);e.hide();this._search=e;l(e.searchInput,"keydown",function(a){"Escape"===a.code&&(e.hide(),b.focus())});var c=n.defaultMapping(["ctrl f"],function(){e.show("",!1)},g.KEYBOARD_PROFILE.DEFAULT,b.domNode,b,null);this.registerKeyboardMapping(c);this._on("onAddActions",function(c){var e=c.actions,h=c.permissions;action=g.ACTION.SEARCH;c.store.getSync(action)||(c=b.createAction("Search",
action,g.ACTION_ICON.SEARCH,["ctrl f"],"Home","File","item|view",null,null,null,null,null,h,a,b))&&e.push(c)})},_setCollection:function(b){var a=this.inherited(arguments),e=this._searchText,c=this._renderedCollection;if(c&&e){var f=new c.Filter,e=new RegExp(e,"i"),g=this.columns,h=[],l;for(l in g)g.hasOwnProperty(l)&&h.push(f.match(g[l].searchText||g[l].field,e));f=f.or.apply(f,h);this._renderedCollection=c.filter(f);this.refresh()}return a}})})},"xgrid/component":function(){define(["dojo/_base/declare",
"xide/model/Component"],function(b,h){return b("xfile.component",h,{beanType:"",getDependencies:function(){return[]},getLabel:function(){return"xgrid"},getBeanType:function(){return this.beanType}})})},"xgrid/Noob":function(){define(["dojo/_base/declare"],function(b){return b("xgrid.Noob",null,{})})},"xgrid/GridLite":function(){define(["dojo/_base/declare","xide/types","./Base"],function(b,h,l){b=b("xgrid/Grid",l,{});b.createGridClass=l.createGridClass;b.classFactory=l.classFactory;b.DEFAULT_GRID_FEATURES=
h.DEFAULT_GRID_FEATURES;b.DEFAULT_GRID_BASES=l.DEFAULT_GRID_BASES;b.DEFAULT_GRID_OPTIONS=h.DEFAULT_GRID_OPTIONS;b.DEFAULT_GRID_OPTION_KEYS=h.DEFAULT_GRID_OPTION_KEYS;return b})}}});define("xgrid/xgrid",[],function(){return null});
//# sourceMappingURL=xgrid.js.map