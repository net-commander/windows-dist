//>>built
require({cache:{"xgrid/main":function(){define("xide/data/ObservableStore xide/data/Reference xide/data/Source xgrid/Actions xgrid/Base xgrid/Clipboard xgrid/ColumnHider xgrid/ContextMenu xgrid/Defaults xgrid/DnD xgrid/Focus xgrid/Grid xgrid/Keyboard xgrid/KeyboardNavigation xgrid/Layout xgrid/ListRenderer xgrid/MultiRenderer xgrid/Renderer xgrid/Search xgrid/ThumbRenderer xgrid/component xgrid/Toolbar xgrid/TreeRenderer xgrid/types xgrid/Noob xgrid/GridLite".split(" "),function(){})},"xgrid/Actions":function(){define("xdojo/declare xide/types xaction/ActionProvider xaction/DefaultActions xide/lodash xide/$ xide/console".split(" "),
function(e,f,l,p,m,d,a){a={_ActionContextState:null,onActivateActionContext:function(a,b){},onDeactivateActionContext:function(a,b){},onBeforeAction:function(a){},onAfterAction:function(a,b){a=this.getAction(a);if(null!=b&&m.isObject(b)){var k=b.select,d=b.focus||!0;if(k)return this.select(k,null,!0,{append:b.append,focus:d,delay:b.delay||1,expand:b.expand})}this._emit(f.EVENTS.ON_AFTER_ACTION,a)},hasPermission:function(a){return p.hasAction(this.permissions,a)},addAction:function(a,b){if(b.keyCombo&&
m.isArray(b.keyCombo)&&-1!==b.keyCombo.indexOf("dblclick")){var k=this;this.addHandle("dbclick",this.on("dblclick",function(a){(a=k.row(a))&&k.runAction(b,a.data)}))}return this.inherited(arguments)},_onSelectionChanged:function(a){this.inherited(arguments);this.refreshActions()},updateActions:function(a,b){var k,d=this.getSelection();a&&b&&(k=a.getItemActions(),k=this._filterActions(d,k,a),b.setItemActions({},k))},startup:function(){function a(c){c&&c.target&&d(c.target).hasClass("dgrid-content")&&
(b.select([],null,!1),b.deselectAll(),"contextmenu"!==c.type&&setTimeout(function(){b.domNode.focus();document.activeElement=b.domNode;d(b.domNode).focus()},1))}if(!this._started){var b=this;b.domNode.tabIndex=-1;this.on("contextmenu",a.bind(this));this._on("selectionChanged",function(a){this._onSelectionChanged(a)}.bind(this));this._on("onAddActions",function(a){a=a.actions;var c=f.ACTION.HEADER;b.getAction(c)||a.push(b.createAction({label:"Header",command:c,icon:"fa-hdd-o",tab:"View",group:"Show",
mixin:{actionType:"multiToggle"},onCreate:function(a){a.set("value",b.showHeader)},onChange:function(a,c){b._setShowHeader(c);b.showHeader=c;b.onAfterAction(f.ACTION.HEADER)}}))});return this.inherited(arguments)}}};e=e("xgrid.Actions",l,a);e.Implementation=a;return e})},"xgrid/Base":function(){define("xdojo/declare xide/types xgrid/types xide/utils/ObjectUtils xide/utils dgrid/OnDemandGrid xgrid/Defaults xgrid/Layout xgrid/Focus xgrid/ListRenderer xgrid/ThumbRenderer xgrid/TreeRenderer dgrid/util/misc".split(" "),
function(e,f,l,p,m,d,a,c,b,k,r,z,B){function n(a,h,b,c){return e.classFactory(a,h,b,c,g)}function q(a,h){return h.some(function(h){return 0<=a.indexOf(h)})}function h(a,h,b,c,d,k){var w=!1;h=h||y;if(!h&&!b)return y;h&&(w=q(v,_.keys(c)),k=m.cloneKeys(k||g),w&&(m.mixin(k,c),k=_.pick(k,_.identity)),h=n(a,k,[y],h));c=[];w={};if(h&&b){k=m.cloneKeys(u);m.mixin(k,b);for(var e in k)if(b=k[e],k[e]){var A=null;!0===b?A=u[e]:u[e]?(A=u[e],A=q(["CLASS","CLASSES","IMPLEMENTATION"],_.keys(b))?m.mixin(m.cloneKeys(A),
b):A):A=b;A&&(b=n(e,A.CLASSES||[],[A.CLASS],A.IMPLEMENTATION),c.push(b),w[e]=b)}0<c.length&&(h=n(a,[h],c,d));h.prototype._featureMap=w}return h}var v="EVENTED GRID EDITOR RENDERER DEFAULTS LAYOUT FOCUS i18".split(" "),u=f.DEFAULT_GRID_FEATURES,g=f.GRID_BASES;l=f.DEFAULT_GRID_OPTIONS;var y=e("xgrid.Default",null,{_isHighlighting:!1,_featureMap:{},getContextMenu:function(){},getToolbar:function(){},isRendered:function(a){if(!a)return null!=this.bodyNode;a=this._normalize(a);var h=this.collection;if(a){a=
a.data;var h=h.idProperty,b=this.getRows(!0);if(b)for(var g=0;g<b.length;g++){var c=this.row(b[g]);if(c&&c.data&&c.data&&a&&c.data[h]===a[h])return!0}}return!1},highlightRow:function(){},getParent:function(){return this._parent},get:function(a){var h=this.getParent();return"iconClass"===a&&h&&h.icon?h.icon():this.inherited(arguments)},set:function(a,h){var b=this.getParent();if("iconClass"===a){var g=b.set;if(g)g.apply(b,[a,h]);else if(b&&b.icon)return b.icon(h),!0}"title"===a&&h&&b&&((g=b.set)?g.apply(b,
[a,h]):b&&b.title&&b.title(h));if("loading"===a&&b&&b){if(b.startLoading)return g=b._options.icon,!0===h?(b.startLoading("",.5),b.icon("fa-spinner fa-spin")):(b.finishLoading(),b.icon(g)),!0;b.set&&b.set("loading",h)}return this.inherited(arguments)},runAction:function(a){a.command==f.ACTION.HEADER&&this._setShowHeader(!this.showHeader);return this.inherited(arguments)},highlight:function(a){var h=$(this.domNode.parentNode);a?this._isHighlighting||(this._isHighlighting=!0,h.addClass("highlight")):
(this._isHighlighting=!1,h.removeClass("highlight"))},getState:function(a){a=this.inherited(arguments)||{};a.showHeader=this.showHeader;return a},postMixInProperties:function(){var a=this.state;a&&(this.showHeader=a.showHeader);return this.inherited(arguments)},renderArray:function(a){this._lastData=a;return this.inherited(arguments)},getData:function(){return this._lastData},refreshItem:function(a,h){h&&(this._muteSelectionEvents=!0);this.collection.emit("update",{target:a});h&&(this._muteSelectionEvents=
!1)},onShow:function(){this._emit(f.EVENTS.ON_VIEW_SHOW,this);return this.inherited(arguments)},isActive:function(a){return m.isDescendant(this.domNode,a||document.activeElement)},_showHeader:function(a){$(this.domNode).find(".dgrid-header").each(function(h,b){$(b).css("display",a?"":"none")});$(this.domNode).find(".dgrid-scroller").each(function(h,b){$(b).css("margin-top",a?26:0)})},destroy:function(){this._emit("destroy",this);return this.inherited(arguments)},hasFeature:function(a){return q(["name"],
_.keys(this._featureMap))},getRows:function(a,h){var b=[],g=this,c=$(g.domNode).find(".dgrid-row");_.each(c,function(h){(h=g.row(h))&&h.element&&b.push(h[a?"element":"data"])});return h?b.filter(h):b},startup:function(){var a=this.inherited(arguments);this.columns&&_.each(this.columns,function(a){a.width&&this.styleColumn(parseInt(a.id),"width:"+a.width)},this);var h=this;this.showExtraSpace&&this.on("dgrid-refresh-complete",function(){if(h.getRows().length){var a=$(h.contentNode).find(".dgrid-extra");
a.length||(a=$('\x3cdiv class\x3d"dgrid-extra" style\x3d"width:100%;height:80px"\x3e\x3c/div\x3e'),$(h.contentNode).append(a),a.on("click",function(){h.deselectAll()}),a.on("contextmenu",function(){h.deselectAll()}))}});return a}});p=h("xgrid/Base",{options:m.clone(l)},{SELECTION:!0,KEYBOARD_SELECTION:!0,PAGINATION:!1,COLUMN_HIDER:!1},null,{});p.createGridClass=h;p.classFactory=n;p.DEFAULT_GRID_FEATURES=u;p.DEFAULT_GRID_BASES=g;p.DEFAULT_GRID_OPTIONS=l;p.DEFAULT_GRID_OPTION_KEYS=f.DEFAULT_GRID_OPTION_KEYS;
return p})},"xgrid/types":function(){define("xdojo/declare xide/types xgrid/ColumnHider dgrid/extensions/ColumnReorder dgrid/extensions/ColumnResizer dgrid/extensions/Pagination xgrid/Selection xgrid/Toolbar xgrid/ContextMenu xgrid/Keyboard xide/mixins/EventedMixin dgrid/OnDemandGrid xgrid/Defaults xgrid/Layout xgrid/Focus xgrid/ListRenderer xgrid/Clipboard xgrid/Actions xlang/i18".split(" "),function(e,f,l,p,m,d,a,c,b,k,r,z,B,n,q,h,v,u,g){f.GRID_BASES={GRID:z,LAYOUT:n,DEFAULTS:B,RENDERER:h,EVENTED:r,
FOCUS:q,i18:g};f.DEFAULT_GRID_OPTIONS={USE_JQUERY_CSS:!0,DESELECT_SELECTED:!0,CLEAR_SELECTION_ON_CLICK:!0,ITEM_ACTIONS:{},GRID_ACTIONS:{},PUBLISH_SELECTION:!1};f.GRID_OPTION={USE_JQUERY_CSS:"USE_JQUERY_CSS",DESELECT_SELECTED:"DESELECT_SELECTED",CLEAR_SELECTION_ON_CLICK:"CLEAR_SELECTION_ON_CLICK",ITEM_ACTIONS:"ITEM_ACTIONS",GRID_ACTIONS:"GRID_ACTIONS"};f.DEFAULT_GRID_FEATURES={SELECTION:{CLASS:a,IMPLEMENTATION:{},CLASSES:null},KEYBOARD_SELECTION:{CLASS:k,IMPLEMENTATION:{},CLASSES:null},COLUMN_HIDER:{CLASS:l,
IMPLEMENTATION:{},CLASSES:null},COLUMN_REORDER:{CLASS:p,IMPLEMENTATION:{},CLASSES:null},COLUMN_RESIZER:{CLASS:m,IMPLEMENTATION:{},CLASSES:null}};f.GRID_FEATURES={SELECTION:{CLASS:a,IMPLEMENTATION:{},CLASSES:null},KEYBOARD_SELECTION:{CLASS:k,IMPLEMENTATION:{},CLASSES:null},COLUMN_HIDER:{CLASS:l,IMPLEMENTATION:{},CLASSES:null},COLUMN_REORDER:{CLASS:p,IMPLEMENTATION:{},CLASSES:null},COLUMN_RESIZER:{CLASS:m,IMPLEMENTATION:{},CLASSES:null},PAGINATION:{CLASS:d,IMPLEMENTATION:{},CLASSES:null},TOOLBAR:{CLASS:c,
IMPLEMENTATION:{},CLASSES:null},CONTEXT_MENU:{CLASS:b,IMPLEMENTATION:{},CLASSES:null},ACTIONS:{CLASS:u,IMPLEMENTATION:{},CLASSES:null},CLIPBOARD:{CLASS:v,IMPLEMENTATION:{},CLASSES:null}};return e(null,[],{})})},"xgrid/ColumnHider":function(){define(["xdojo/declare","dojo/has","dgrid/util/misc","xide/types","xide/utils"],function(e,f,l,p,m){return e("xgrid.ColumnHider",null,{columnHiderActionRootCommand:"View/Columns",i18nColumnHider:{},_columnHiderRules:null,_runAction:function(d,a,c){if(d&&-1!=d.command.indexOf(this.columnHiderActionRootCommand)){var b=
d.column,k=this.isColumnHidden(b.id);this.showColumn(b.id,k);!1!==a&&d.set("value",!this.isColumnHidden(b.id))}return this.inherited(arguments)},getColumnHiderActions:function(d,a){function c(a){var h="Show "+(a.label||a.field||""),g=a.icon||"fa-cogs";if(!a.unhidable){var c=k.createAction(h,b+"/"+h,g,null,"View","Columns","item|view",function(b){var c={widgetArgs:{checked:!a.hidden,iconClass:g,style:"float:inherit;"},actionType:"multiToggle"};b.actionType="multiToggle";b.setVisibility(p.ACTION_VISIBILITY_ALL,
m.cloneKeys(c,!1));h=b.label.replace("Show ","")},null,{column:a,filterGroup:"item|view",tab:"View",value:!a.hidden,addPermission:!0},null,null,d,l,k,k);c&&e.push(c)}}var b=this.columnHiderActionRootCommand,k=this,e=[],f=p.ACTION_VISIBILITY,l=this.domNode;a=a||[];_.find(a,{command:b})||e.push(this.createAction({label:"Columns",command:b,icon:"fa-columns",tab:"View",group:"Columns",toggleGroup:k.id+"Columns",onCreate:function(a){a.setVisibility(f.RIBBON,{expand:!0}).setVisibility(f.ACTION_TOOLBAR,
!1)}}));var n=this.subRows,q=!0,h,v,u,g;u=0;for(h=n.length;u<h;u++)for(g=0,v=n[u].length;g<v;g++)c(n[u][g]),q&&(q=!1);return e},resize:function(){this.inherited(arguments);this._checkHiddenColumns()},_checkHiddenColumns:function(){var d=this.subRows,a,c,b,k,e=$(this.domNode).width();b=0;for(a=d.length;b<a;b++)for(k=0,c=d[b].length;k<c;k++){var m=d[b][k];m.minWidth&&(e<m.minWidth?m.unhidable||this.showColumn(m.id,!1):this.showColumn(m.id,!0))}},startup:function(){if(!this._started){this._columnHiderCheckboxes=
{};this._columnHiderRules={};var d=this.inherited(arguments);this._checkHiddenColumns();var a=this.subRows,c,b,k,e,m=this;k=0;for(c=a.length;k<c;k++)for(e=0,b=a[k].length;e<b;e++){var f=a[k][e],n=f.id;!0===f.hidden&&(f.hidden=!1,m._hideColumn(n),f.hidden=!0)}if(this.getActionStore)this.getActionStore().on("update",function(a){a=a.target;-1!==a.command.indexOf("View/Columns")&&(m.showColumn(a.column.id,a.get("value")),m.onAfterAction(a))});return d}},left:function(d,a){return this.right(d,-a)},right:function(d,
a){d.element||(d=this.cell(d));for(var c=this.inherited(arguments),b=d;c.column.hidden;){c=this.inherited(arguments,[c,0<a?1:-1]);if(b.element===c.element)return d;b=c}return c},isColumnHidden:function(d){return!!this._columnHiderRules[d]},_hideColumn:function(d){var a=this,c="#"+l.escapeCssIdentifier(this.template?this.template.id:this.domNode.id)+" .dgrid-column-",b;this._columnHiderRules[d]||(this._columnHiderRules[d]=l.addCssRule(c+l.escapeCssIdentifier(d,"-"),"display: none;"),8!==f("ie")&&10!==
f("ie"))||(b=l.addCssRule(".dgrid-row-table","display: inline-table;"),window.setTimeout(function(){b.remove();a.resize()},0))},_showColumn:function(d){this._columnHiderRules[d]&&(this._columnHiderRules[d].remove(),delete this._columnHiderRules[d])},showColumn:function(d,a){this.isColumnHidden(d)?a&&this._showColumn(d):a||this._hideColumn(d)}})})},"xgrid/Selection":function(){define("xdojo/declare xdojo/has xide/types xide/utils dgrid/Selection dojo/dom-class dojo/on dojo/Deferred xide/lodash xide/$".split(" "),
function(e,f,l,p,m,d,a,c,b,k){function r(a){var b=[];a&&a.rows&&a.rows.forEach(function(a){b.push(a.id)});return b}function z(a){return b.all(a,function(c){return c.length==a[0].length&&0==b.difference(c,a[0]).length})}function B(a,b,c){a=(a?a.map(function(a){return a?a.data||a:{}}):[]).map(function(a){return a[c]});b=b.map(function(a){return a[c]});return a.join(",")===b.join(",")}function n(a){k(a.domNode).find(".dgrid-focus").each(function(a,b){k(b).removeClass("dgrid-focus")})}var q={_lastSelection:null,
_lastFocused:null,_refreshInProgress:null,__lastLast:null,__lastFirst:null,_muteSelectionEvents:!0,selectAll:function(a){this.select(this.getRows(a),null,!0,{append:!1,delay:1})},setState:function(a){a&&a.selection&&a.selection.selection&&this.select(a.selection.selection,null,!0,{expand:!0,append:!1,scrollInto:!0},"restore");return this.inherited(arguments)},getState:function(a){a=this.inherited(arguments)||{};var c=this._preserveSelection(),d={selection:[]},g=this.collection.idProperty;c.selection&&
g&&b.each(c.selection,function(a){a&&a[g]&&d.selection.push(a[g])});c.focused&&(d.focused=c.focused.path);a.selection=d;return a},refresh:function(a){if(!this.isRendered())return!1;if(this._refreshInProgress)return this._refreshInProgress;var b=!1!==a?this._preserveSelection():null,c=this,g=this.isActive(),d=this.inherited(arguments);(this._refreshInProgress=d)&&d.then&&d.then(function(){c._refreshInProgress=null;g&&b&&c._restoreSelection(b,1,!g,"restore")});return d},_normalize:function(a){if(!a)return null;
a.element||(a=this.cell(a));a&&a.row&&(a=a.row);return a},deselectAll:function(){this._lastSelection&&(this.clearSelection(),this._lastFocused=this._lastSelection=null,k(this.domNode).find(".dgrid-focus").each(function(a,b){k(b).removeClass("dgrid-focus")}),this._emit("selectionChanged",{selection:[],why:"clear",source:"code"}))},invertSelection:function(a){var c=a||this._getSelection()||[],d=[];a=this.getRows();b.each(a,function(a){-1===c.indexOf(a)&&d.push(a)});return this.select(d,null,!0,{append:!1})},
runAction:function(a){b.isString(a)&&(a=this.getActionStore().getSync(a));return"File/Select/None"===a.command?(this.deselectAll(),!0):"File/Select/All"===a.command?(this.selectAll(),!0):"File/Select/Invert"===a.command?this.invertSelection():this.inherited(arguments)},_preserveSelection:function(){this.__lastSelection=this._getSelection();this._lastFocused=this.getFocused();return{selection:this._getSelection(),focused:this.getFocused()}},_restoreSelection:function(a,c,d,g){var k=a?a.focused:this._lastFocused;
a=a?a.selection:this.__lastSelection;if(b.isEmpty(a))this._lastFocused=null;else return c=this.select(a,null,!0,{silent:null!=d?d:!0,append:!1,delay:null!=c?c:0},g),k&&this.isActive()&&this.focus(this.row(k)),c},getPrevious:function(a,b,c){a=a||this.getFocused(b);a=this._normalize(a);var g=this.cell(this._move(a,-1,"dgrid-row"));if(g&&g.row&&(g=g.row[b?"element":"data"],!0===c&&this.isSelected(g))){if(a&&a.data&&a.data==g)return null;if(a=this.getPrevious(g,b,c))return a}return g},getNext:function(a,
b,c){a=a||this.getFocused(b);a=this._normalize(a);var g=this.cell(this._move(a,1,"dgrid-row"));if(g&&g.row&&(g=g.row[b?"element":"data"],!0===c&&this.isSelected(g))){if(a&&a.data&&a.data==g)return null;if(a=this.getNext(g,b,c))return a}return g},getSelection:function(a){return this._getSelection(a)},_getSelection:function(a){var b=[];if(this.collection){for(var c in this.selection){var g=this.collection.getSync(c);g&&b.push(g)}if(a)return b.filter(a)}return b},getSelectedItem:function(a){a=this.getSelection(a);
return 1===a.length?a[0]:null},postCreate:function(){var a=this;if(!0===this.options[l.GRID_OPTION.CLEAR_SELECTION_ON_CLICK]){var b=function(a){a&&a.target&&d.contains(a.target,"dgrid-content")&&this.deselectAll()}.bind(this);this.on("click",function(a){b(a)}.bind(this))}this.on("dgrid-select",function(b){var c=r(a._lastSelection),d=r(b);z([c,d])||(a._lastSelection=b,a._emit("selectionChanged",{selection:a._getSelection(),why:"select",source:b.parentType}))});return this.inherited(arguments)},_fireSelectionEvents:function(){if(!0!==
this._muteSelectionEvents)return this.inherited(arguments)},__select:function(a,c,d,g,k){b.each(a,function(a){a&&(a=this.row(a))&&this._select(a,c,d)},this);g&&g.resolve(a);this._muteSelectionEvents=!1;this._fireSelectionEvents();if((g=this.getRows())&&g.length&&a&&a.length&&d&&k&&"mouse"!==k){var e=a[a.length-1];if(g[g.length-1]==e){if(this.__lastLast&&this.__lastLast==e){-1===k.indexOf("pointer")&&this._emit("bounced",{direction:1,item:e});return}this.__lastLast=e}else this.__lastLast=null;a=a[0];
g[0]==a?this.__lastFirst&&this.__lastFirst==a?-1===k.indexOf("pointer")&&this._emit("bounced",{direction:-1,item:a}):this.__lastFirst=a:this.__lastFirst=null}else this.__lastFirst=null},select:function(a,d,k,g,e){clearTimeout(this._selectTimer);this._selectTimer=null;var m="mouse"===e;this.isActive();var l=new c;e=e||"";g=g||{};m&&(g.focus=!0);k=null===k?!0:k;var m=g.delay||0,r=this,z=this.collection,q=z.idProperty;!0===g.silent&&(r._muteSelectionEvents=!0);var t=p.isArray(a)?a:[a];if(!b.isEmpty(t)){var w=
[];if(b.isNumber(t[0])){var G=r.getRows();b.each(t,function(a){w.push(G[a])});t=w}else b.isString(t[0])?(b.each(t,function(a){(a=z.getSync(a))&&w.push(a)}),t=w):t&&t[0]&&t[0].tagName&&(b.each(t,function(a){w.push(r.row(a).data)}),t=w);if(!t.length)return f("debug"),l.resolve(),l;f("debug");a=(this._lastSelection?this._lastSelection.rows:[]).map(function(a){return a.data});a=B(t,a,q);"update"===e&&k&&(g.focus=!0,g.append=!1,g.delay=1);"dgrid-cellfocusin"===e&&(g.focus=!0);!1===g.append&&k&&!a&&(r.clearSelection(t),
n(r));if(!a||"update"!==e&&"dgrid-cellfocusin"!==e)return!0===g.focus&&g.expand&&(r.isRendered(t[0])||r._expandTo(t[0])),g.expand&&(r.isRendered(t[0])||r._expandTo(t[0])),g.scrollInto&&"restore"!==e&&(a=this.row(t[0]),a.element&&a.element.scrollIntoView()),m&&t.length?this._selectTimer=setTimeout(function(){!r.destroyed&&r.collection&&(!1===g.append&&r.clearSelection(),n(r),r.focus(t[0],!1),r.__select(t,d,k,l,e))},m):r.__select(t,d,k,l,e),l;g.focus&&(n(r),r.focus(t[0]))}},_setLast:function(a){for(var b=
[],c=0;c<a.length;c++)b.push(this.collection.getIdentity(a[c]))},isExpanded:function(a){a=this._normalize("root");return!!this._expanded[a.id]},_expandTo:function(a){if(a){var c=this.collection;b.isString(a)&&(a=c.getSync(a));if(c=c.getSync(a[c.parentField])||a.getParent?a.getParent():null)this.isRendered(c)?(this.isExpanded(c)||this.expand(c,!0,!0),this.isExpanded(a)||this.expand(a,!0,!0)):this._expandTo(c)}},startup:function(){var b=this.inherited(arguments);this.addHandle("keyup",a(this.domNode,
"keyup",function(a){if(!a.metaKey&&!a.altKey){var b=this.keyMap[a.keyCode],c;if(c=b)c=!(a.target.type&&32===a.keyCode);c&&0==this._getSelection().length&&b.call(this,a)}}.bind(this)));return b}};e=e("xgrid.Selection",m,q);e.Implementation=q;return e})},"xgrid/Toolbar":function(){define(["xdojo/declare","xide/utils","xide/types","xide/widgets/ActionToolbar"],function(e,f,l,p){var m={_toolbar:null,toolbarClass:null,toolbarInitiallyHidden:!1,runAction:function(d){return d.command==l.ACTION.TOOLBAR?(this.showToolbar(null==
this._toolbar),!0):this.inherited(arguments)},getToolbar:function(){return this._toolbar},showToolbar:function(d,a,c,b,k){if(a=a||this.toolbarClass)this.toolbarClass=a;null==d&&(d=null==this._toolbar);d&&!this._toolbar&&(a=f.addWidget(a||p,f.mixin({style:"min-height:30px;height:auto;width:100%"},k),this,c||this.header,!0),!1!==b&&(a.addActionEmitter(this),a.setActionEmitter(this),this.refreshActions&&this.refreshActions()),this._toolbar=a,this.add&&this.add(a),this._emit("showToolbar",a));!d&&this._toolbar&&
(f.destroy(this._toolbar,!0,this),$(c||this.header).css("height","auto"));this.resize();return this._toolbar},getState:function(d){d=this.inherited(arguments)||{};d.toolbar=null!==this._toolbar;return d},setState:function(d){d&&d.toolbar&&this.showToolbar(d.toolbar);return this.inherited(arguments)},startup:function(){var d=this;this._started||(this._on("onAddActions",function(a){var c=a.actions,b=l.ACTION.TOOLBAR;!a.store.getSync(b)&&this.hasPermission(b)&&c.push(d.createAction({label:"Toolbar",
command:b,icon:l.ACTION_ICON.TOOLBAR,tab:"View",group:"Show",keycombo:["ctrl b"],mixin:{actionType:"multiToggle",value:!1,id:f.createUUID()},onCreate:function(a){a.value=null!==d._toolbar},onChange:function(a,b){d.showToolbar(b);d.onAfterAction(l.ACTION.TOOLBAR)}}))}),this.inherited(arguments),this.showToolbar(!this.toolbarInitiallyHidden))}};e=e("xgrid.Toolbar",null,m);e.Implementation=m;return e})},"xgrid/ContextMenu":function(){define(["dojo/_base/declare","xide/utils","xide/widgets/ContextMenu",
"xide/types"],function(e,f,l,p){return e("xgrid.ContextMenu",null,{contextMenu:null,getContextMenu:function(){return this.contextMenu},_createContextMenu:function(){var e=this.contextMenuArgs||{},d=this.contentNode;f.mixin(e,{owner:this,delegate:this,_actionFilter:{quick:!0}});var a=new l(e,d);a.openTarget=d;a.init({preventDoubleContext:!1});a._registerActionEmitter(this);$(d).one("contextmenu",function(c){c.preventDefault();this.store||a.setActionStore(this.getActionStore(),this)}.bind(this));this.contextMenu=
a;this.add(a)},startup:function(){this._started||(this.inherited(arguments),this.hasPermission(p.ACTION.CONTEXT_MENU)&&this._createContextMenu())}})})},"xgrid/Keyboard":function(){define("dojo/_base/declare dojo/aspect dojo/dom-class dojo/on dojo/_base/lang dojo/has dgrid/util/misc dojo/_base/sniff dcl/dcl".split(" "),function(e,f,l,p,m,d,a,c){function b(a){a.preventDefault()}var k={checkbox:1,radio:1,button:1},r=/\bdgrid-cell\b/,z=/\bdgrid-row\b/;d.add("dom-contains",function(a,b,c){return!!c.contains});
var B=function(a,b,c){function g(a,b){return a[b+"All"]("[id]:not(.ui-state-disabled):not(.dgrid-content-parent):first")}c=0>c;var d,e;a=b.row(a).element;a=$(a);if(a.length)if(d=b.up(b._focusedNode,1,!0),d=$(d.element),d.length)if(b=a.position().top,e=a.position().left,d=a,c){do d=d.prev("[id]");while(d.length&&!(d.position().top<b&&d.position().left<=e));d.is(".ui-state-disabled")&&(d=g(d,"next"))}else{do d=d.next("[id]");while(d.length&&!(d.position().top>b&&d.position().left>=e));d.is(".ui-state-disabled")&&
(d=g(d,"prev"))}else d=a;return d},n={pageSkip:10,tabIndex:-1,keyMap:null,headerKeyMap:null,postMixInProperties:function(){this.inherited(arguments);this.keyMap||(this.keyMap=m.mixin({},n.defaultKeyMap));this.headerKeyMap||(this.headerKeyMap=m.mixin({},n.defaultHeaderKeyMap))},postCreate:function(){function b(a){var c=a.target;return c.type&&(!k[c.type]||32===a.keyCode)}function c(g){function e(){d._focusedHeaderNode&&(d._focusedHeaderNode.tabIndex=-1);if(d.showHeader){if(k)for(var a=d.headerNode.getElementsByTagName("th"),
b=0,c;c=a[b];++b){if(m.test(c.className)){d._focusedHeaderNode=l=c;break}}else d._focusedHeaderNode=l=d.headerNode;l&&(l.tabIndex=d.tabIndex)}}var k=d.cellNavigation,m=k?r:z,h=g===d.headerNode,l=g;h?(e(),f.after(d,"renderHeader",e,!0)):f.after(d,"renderArray",function(b){var c=d._focusedNode||l;if(m.test(c.className)&&a.contains(g,c))return b;for(var e=g.getElementsByTagName("*"),k=0,w;w=e[k];++k)if(m.test(w.className)){c=d._focusedNode=w;break}c.tabIndex=d.tabIndex;return b});d._listeners.push(p(g,
"mousedown",function(a){b(a)||d._focusOnNode(a.target,h,a)}));d._listeners.push(p(g,"keydown",function(a){if(!a.metaKey&&!a.altKey){var c=d[h?"headerKeyMap":"keyMap"][a.keyCode];c&&!b(a)&&c.call(d,a)}}))}this.inherited(arguments);var d=this;this.tabableHeader&&(c(this.headerNode),p(this.headerNode,"dgrid-cellfocusin",function(){d.scrollTo({x:this.scrollLeft})}));c(this.contentNode);this._debouncedEnsureScroll=a.debounce(this._ensureScroll,this)},removeRow:function(a){if(!this._focusedNode)return this.inherited(arguments);
var b=this,c=document.activeElement===this._focusedNode,d=this[this.cellNavigation?"cell":"row"](this._focusedNode);if(!d)return console.error("no focus target"),this.inherited(arguments);var g=d.row||d,e;a=a.element||a;a===g.element&&((e=this.down(g,!0))&&e.element!==a||(e=this.up(g,!0)),this._removedFocus={active:c,rowId:g.id,columnId:d.column&&d.column.id,siblingId:e&&e.element!==a?e.id:void 0},setTimeout(function(){b._removedFocus&&b._restoreFocus(g.id)},0),this._focusedNode=null);this.inherited(arguments)},
insertRow:function(){var a=this.inherited(arguments);this._removedFocus&&!this._removedFocus.wait&&this._restoreFocus(a);return a},_restoreFocus:function(a){var b=this._removedFocus,c;if((a=(a=a&&this.row(a))&&a.element&&a.id===b.rowId?a:"undefined"!==typeof b.siblingId&&this.row(b.siblingId))&&a.element){if(!a.element.parentNode.parentNode){b.wait=!0;return}"undefined"!==typeof b.columnId&&(c=this.cell(a,b.columnId))&&c.element&&(a=c);b.active&&0!==a.element.offsetHeight?this._focusOnNode(a,!1,null):
(l.add(a.element,"dgrid-focus"),a.element.tabIndex=this.tabIndex,this._focusedNode=a.element)}delete this._removedFocus},addKeyHandler:function(a,b,c){return f.after(this[c?"headerKeyMap":"keyMap"],a,b,!0)},_ensureRowScroll:function(a){var b=this.getScrollPosition().y;b>a.offsetTop?this.scrollTo({y:a.offsetTop}):b+this.contentNode.offsetHeight<a.offsetTop+a.offsetHeight&&this.scrollTo({y:a.offsetTop-this.contentNode.offsetHeight+a.offsetHeight})},_ensureColumnScroll:function(a){var b=this.getScrollPosition().x,
c=a.offsetLeft;if(b>c)this.scrollTo({x:c});else{var d=this.bodyNode.clientWidth;a=a.offsetWidth;var g=c+a;b+d<g&&this.scrollTo({x:d>a?g-d:c})}},_ensureScroll:function(a,b){this.cellNavigation&&(this.columnSets||1<this.subRows.length)&&!b&&this._ensureRowScroll(a.row.element);this.bodyNode.clientWidth<this.contentNode.offsetWidth&&this._ensureColumnScroll(a.element)},_focusOnNode:function(a,b,c,d){var g="_focused"+(b?"Header":"")+"Node",e=this[g],k=this.cellNavigation?"cell":"row",h=this[k](a),f,n,
y,q,x;if(a=h&&h.element){if(this.cellNavigation)for(f=a.getElementsByTagName("input"),x=0,y=f.length;x<y;x++)if(n=f[x],(-1!==n.tabIndex||"_dgridLastValue"in n)&&!n.disabled){n.focus();q=!0;break}null!==c&&(c=m.mixin({grid:this},c),c.type&&(c.parentType=c.type),c.bubbles||(c.bubbles=!0));e&&(l.remove(e,"dgrid-focus"),e.removeAttribute("tabindex"),c&&(c[k]=this[k](e),p.emit(e,"dgrid-cellfocusout",c)));e=this[g]=a;c&&(c[k]=h);g=this.cellNavigation?r:z;!q&&g.test(a.className)&&(a.tabIndex=this.tabIndex,
a.focus());l.add(a,"dgrid-focus");c&&!1!==d&&p.emit(e,"dgrid-cellfocusin",c);this._debouncedEnsureScroll(h,b)}},focusHeader:function(a){this._focusOnNode(a||this._focusedHeaderNode,!0)},focus:function(a,b){var c=a||this._focusedNode;c?this._focusOnNode(c,!1,null,b):this.contentNode.focus()}},q=n.moveFocusVertical=function(a,b){if(this.isThumbGrid){var c=B(a,this,b);if(c&&c.length){this._focusOnNode(c[0],!1,a);a.preventDefault();return}}var d=this.cellNavigation,c=this[d?"cell":"row"](a),g=d&&c.column.id,
c=this.down(this._focusedNode,b,!0);d&&(c=this.cell(c,g));this._focusOnNode(c,!1,a);a.preventDefault()},h=n.moveFocusUp=function(a){q.call(this,a,-1)},v=n.moveFocusDown=function(a){q.call(this,a,1)},u=n.moveFocusPageUp=function(a){q.call(this,a,-this.pageSkip)},g=n.moveFocusPageDown=function(a){q.call(this,a,this.pageSkip)},y=n.moveFocusHorizontal=function(a,b){if(this.cellNavigation||!0===this.isThumbGrid){var c=!this.row(a),d=this["_focused"+(c?"Header":"")+"Node"];1==this.isThumbGrid?(c=this.down(this._focusedNode,
b,!0),this._focusOnNode(c,!1,a)):this._focusOnNode(this.right(d,b),c,a);a.preventDefault()}},D=n.moveFocusLeft=function(a){y.call(this,a,-1)},C=n.moveFocusRight=function(a){y.call(this,a,1)},x=n.moveHeaderFocusEnd=function(a,b){var c;this.cellNavigation&&(c=this.headerNode.getElementsByTagName("th"),this._focusOnNode(c[b?0:c.length-1],!0,a));a.preventDefault()},E=n.moveHeaderFocusHome=function(a){x.call(this,a,!0)},F=n.moveFocusEnd=function(a,b){var c=this.cellNavigation,g=this.contentNode,e=g.scrollTop+
(b?0:g.scrollHeight),g=g[b?"firstChild":"lastChild"];-1<g.className.indexOf("dgrid-extra")&&(g=g.previousSibling);var k=-1<g.className.indexOf("dgrid-preload"),h=k?g[(b?"next":"previous")+"Sibling"]:g,r=h.offsetTop+(b?0:h.offsetHeight),l;if(k){for(;h&&0>h.className.indexOf("dgrid-row");)h=h[(b?"next":"previous")+"Sibling"];if(!h)return}!k||1>g.offsetHeight?(c&&(h=this.cell(h,this.cell(a).column.id)),this._focusOnNode(h,!1,a)):(d("dom-addeventlistener")||(a=m.mixin({},a)),l=f.after(this,"renderArray",
function(d){var g=d[b?0:d.length-1];c&&(g=this.cell(g,this.cell(a).column.id));this._focusOnNode(g,!1,a);l.remove();return d}));e===r&&a.preventDefault()},t=n.moveFocusHome=function(a){F.call(this,a,!0)};n.defaultKeyMap={32:b,33:u,34:g,35:F,36:t,37:D,38:h,39:C,40:v};n.defaultHeaderKeyMap={32:b,35:x,36:E,37:D,39:C};e=e(null,n);e.dcl=c(null,n);return e})},"xgrid/Defaults":function(){define(["xdojo/declare"],function(e){return e("xgrid/Defaults",null,{minRowsPerPage:100,keepScrollPosition:!0,rowsPerPage:30,
deselectOnRefresh:!1,cellNavigation:!1,_skipFirstRender:!1,loadingMessage:null,preload:null,childSelector:".dgrid-row",addUiClasses:!1,noDataMessage:'\x3cspan class\x3d"textWarning"\x3eNo data....\x3c/span\x3e',showExtraSpace:!0})})},"xgrid/Layout":function(){define(["xdojo/declare","xide/utils","xide/widgets/TemplatedWidgetBase","xide/registry","xide/$"],function(e,f,l,p,m){var d={template:null,attachDirect:!0,destroy:function(){this.template&&this.template.remove(this)&&f.destroy(this.template,
!0,this);this.inherited(arguments)},getTemplateNode:function(){return this.template.domNode},getHeaderNode:function(){return this.template.header},getBodyNode:function(){return this.template.grid},getFooterNode:function(){return this.template.footer},resize:function(){this.inherited(arguments);var a=this.template?this.template.domNode:this.domNode,c=!1;this.__masterPanel&&(a=this.__masterPanel.containerNode,c=!0);var b=m(a).height(),d=this.template;if(d){var e=m(d.header),f=e?e.height():0,l=this._toolbar?
this._toolbar._height:0;0<l&&0===f&&(f+=l);l&&e&&e.css("height","auto");e=d.footer?m(d.footer).height():0;b=b-f-e;50<b?(m(d.grid).height(b+"px"),c&&m(d.domNode).width(m(a).width())):m(d.grid).height("inherited")}},buildRendering:function(){if(!this.template){this._domNode=this.domNode;var a=f.addWidget(l,{templateString:'\x3cdiv tabindex\x3d"-1" attachTo\x3d"template" class\x3d"grid-template" style\x3d"width: 100%;height: 100%;overflow: hidden;position: relative;padding: 0px;margin: 0px"\x3e\x3cdiv tabindex\x3d"-1" attachTo\x3d"header" class\x3d"grid-header row" style\x3d"width: 100%;height: auto"\x3e\x3c/div\x3e\x3cdiv tabindex\x3d"0" attachTo\x3d"grid" class\x3d"grid-body row"\x3e\x3c/div\x3e\x3cdiv attachTo\x3d"footer" class\x3d"grid-footer" style\x3d"position: absolute;bottom: 0px;width: 100%"\x3e\x3c/div\x3e\x3c/div\x3e',
declaredClass:"xgrid/_BaseParent_"+this.declaredClass},null,this.domNode,!0);m(a.domNode).attr("tabIndex",-1);this.template=a;this.header=a.header;this.footer=a.footer;this.domNode=this.gridBody=a.grid;this.id=this.template.id;this.domNode.id=this.id;a.domNode.id=this.id;p._hash[this.id]=this;a.add(this);return this.inherited(arguments)}}};e=e("xgrid.Layout",null,d);e.Implementation=d;return e})},"xgrid/Focus":function(){define(["xdojo/declare","xide/types","xide/utils"],function(e,f,l){l={_focused:!1,
_detectFocus:null,_detectBlur:null,destroy:function(){this.inherited(arguments);window.removeEventListener("focus",this._detectFocus,!0);window.removeEventListener("blur",this._detectBlur,!0)},_onBlur:function(){},set:function(e,m){"focused"==e&&this._onFocusChanged(m);return this.inherited(arguments)},_onFocusChanged:function(e,m){this._focused&&!e&&this._onBlur();!this._focused&&e&&this._emit(f.EVENTS.ON_VIEW_SHOW,this);this._focused=e;this.highlight&&this.highlight(e)},getFocused:function(e){if(this._focusedNode){var m=
this.row(this._focusedNode);if(m)return m[e?"element":"data"]}return null},startup:function(){this.inherited(arguments);this.headerNode.tabIndex=-1;this._focused=!0}};e=e("xgrid.Focus",null,l);e.Implementation=l;return e})},"xgrid/ListRenderer":function(){define(["xdojo/declare","xide/types","./Renderer","dojo/dom-construct","dgrid/Grid"],function(e,f,l,p,m){f={_getLabel:function(){return"List"},_getIcon:function(){return"fa-th-list"},activateRenderer:function(d){this._showHeader(!0)},deactivateRenderer:function(d){},
_configColumns:function(){return m.prototype._configColumns.apply(this,arguments)},insertRow:function(d,a){return m.prototype.insertRow.apply(this,arguments)},renderRow:function(d,a){var c=this,b=this.createRowCells("td",function(b,e){var k=d;e.get?k=e.get(d):"field"in e&&"_item"!==e.field&&(k=k[e.field]);c._defaultRenderCell.call(e,d,k,b,a)},a&&a.subRows,d),e=p.create("div",{role:"row"});e.appendChild(b);return e}};e=e("xgrid.ListRenderer",[l],f);e.Implementation=f;return e})},"xgrid/Renderer":function(){define(["xdojo/declare",
"xide/types"],function(e,f){var l={_renderIndex:0,_lastRenderedArray:null,publishRendering:!1,_getLabel:function(){return""},activateRenderer:function(e){},deactivateRenderer:function(e){},runAction:function(e){},delegate:{onDidRenderCollection:function(){}},renderRow:function(e){return e.render?e.render(e,this.inherited):this.inherited(arguments)},renderArray:function(){this._lastRenderedArray=this.inherited(arguments);this._onDidRenderCollection(arguments);return this._lastRenderedArray},_onDidRenderCollection:function(){this._renderIndex++},
didRender:function(){return 0<=this._renderIndex}},p=e("xgrid.Renderer",null,l);p.Implementation=l;return p})},"xgrid/Clipboard":function(){define(["xdojo/declare","xide/types"],function(e,f){var l={runAction:function(e){switch(e.command){case f.ACTION.CLIPBOARD_COPY:return this.clipboardCopy(),this.refreshActions(),!0;case f.ACTION.CLIPBOARD_PASTE:return this.clipboardPaste();case f.ACTION.CLIPBOARD_CUT:return this.clipboardCut(),!0}return this.inherited(arguments)},clipboardPaste:function(){return this.inherited(arguments)},
clipboardCopy:function(){this.currentCutSelection=null;this.currentCopySelection=this.getSelection();this.publish(f.EVENTS.ON_CLIPBOARD_COPY,{selection:this.currentCopySelection,owner:this,type:this.itemType})},clipboardCut:function(){this.currentCopySelection=null;this.currentCutSelection=this.getSelection()},getClipboardActions:function(e){function d(){var a=b.getSelection();return a&&a.length?a[0]?a:(console.error("have no item"),null):null}function a(){switch(this.title){case "Cut":case "Copy":var a;
a=d()?!1:!0;return!1!==a;case "Paste":return null==b.currentCopySelection}return!1}function c(c,d,e,f){k.push(b.createAction({label:c,command:d,icon:e,tab:"Home",group:"Clipboard",keycombo:f,mixin:{addPermission:!0,quick:!0},shouldDisable:a}))}var b=this,k=[];e=f.ACTION;c("Copy",e.CLIPBOARD_COPY,"fa-copy","ctrl c");c("Paste",e.CLIPBOARD_PASTE,"fa-paste","ctrl v");c("Cut",e.CLIPBOARD_CUT,"fa-cut","ctrl x");return k}},p=e("xgrid.Clipboard",null,l);p.Implementation=l;return p})},"xgrid/ThumbRenderer":function(){define(["xdojo/declare",
"xide/types","dojo/dom-construct","./Renderer"],function(e,f,l,p){f={isThumbGrid:!1,_getLabel:function(){return"Thumb"},_getIcon:function(){return"fa-th-large"},activateRenderer:function(e){this._showHeader(!1);this.isThumbGrid=!0},deactivateRenderer:function(e){this.isThumbGrid=!1},renderRow:function(e){return e.render?e.render(e,this.inherited):l.create("span",{className:"fileGridCell",innerHTML:'\x3cspan class\x3d"fa-cube fa-5x""\x3e\x3c/span\x3e \x3cdiv class\x3d"name"\x3e'+e.name+"\x3c/div\x3e",
style:"color:blue;max-width:200px;float:left;margin:18px;padding:18px;"})}};e=e("xgrid.ThumbRenderer",[p],f);e.Implementation=f;return e})},"xgrid/TreeRenderer":function(){define(["xdojo/declare","./Renderer","dgrid/Tree","dojo/keys","dojo/on"],function(e,f,l,p,m){function d(a){function b(a,b){_.each(a,function(a){(a=d.row(a))&&a.element&&d.expand(a,b,!0)})}this.onTreeKey(a);var d=this;if(!d.isThumbGrid&&(a.keyCode==p.LEFT_ARROW||a.keyCode==p.RIGHT_ARROW||a.keyCode==p.HOME||a.keyCode==p.END)){var e=
a.target;if((!e||-1==e.className.indexOf("InputInner")&&-1==e.className.indexOf("input")&&"text"!==a.target.type)&&(e=this.row(a))&&e.data){var f=e.data,l=this._isExpanded(f),n=this.collection,q=n.getSync(f[n.idProperty]),h=f.getChildren?f.getChildren():q&&q.children?q.children:null,v=!1;null==h&&n.getChildrenSync&&q&&((h=n.getChildrenSync(q))&&h.length?v=!0:h=null);var u=q?q.isDir||q.directory:!1;!u&&v&&h&&(u=!0);var v=h?h[0]:!1,g=this._focusedNode,y=g?this.down(g,h?h.length:0,!0):null,h=!0===q._EX||
null==q._EX,q=this.getSelection?this.getSelection():[q],D=this.down(g,-1,!0),C=this.down(g,1,!0),x={focus:!0,append:!1,delay:1};if(v&&v._reference){var E=n.getSync(v._reference);E&&(v=E)}if(a.keyCode==p.END&&l&&u&&y&&y.element!==g)this.select(y,null,!0,x);else{if(a.keyCode==p.LEFT_ARROW){a.preventDefault();if(f[n.parentField]&&(f=e.data,!l)){f=(n=n.getSync(f[n.parentField]))?this.row(n):null;if(n&&f.element)return this.select([n],null,!0,x);if(D)return this.select(D,null,!0,x);m.emit(this.contentNode,
"keydown",{keyCode:36,force:!0})}e&&(l?b(q,!1):this.select(D,null,!0,x))}if(a.keyCode==p.RIGHT_ARROW){a.preventDefault();if(u&&h&&l&&!v&&C)return this.select(C,null,!0,x);h&&l?v&&this.select([v],null,!0,x):v||!h||u?b(q,!0):C&&this.select(C,null,!0,x)}}}}}var a={_getLabel:function(){return"Tree"},_getIcon:function(){return"fa-tree"},deactivateRenderer:function(a){},activateRenderer:function(){this._showHeader(!0)},__getParent:function(a){if(a&&a.getParent){var b=a.getParent();if(b)return this.row(b).element?
this.__getParent(b):b||a}return a},getCurrentFolder:function(){return this.__getParent(this.getRows()[0])},_isExpanded:function(a){return!!this._expanded[this.row(a).id]},onTreeKey:function(){this.inherited(arguments)},startup:function(){if(!this._started){var a=this.inherited(arguments);this.on("keydown",d.bind(this));return a}}};e=e("xgrid.TreeRenderer",[f,l],a);e.Implementation=a;e.KEYBOARD_HANDLER=d;return e})},"xgrid/DnD":function(){define("dojo/_base/declare dojo/_base/lang dojo/_base/array dojo/aspect dojo/dom-class dojo/topic dojo/has dojo/when dojo/dnd/Source dojo/dnd/Manager dojo/_base/NodeList dojo/dnd/Manager dojo/dnd/common dojo/dom-geometry xide/lodash xide/$ dojo/has!touch?../util/touch".split(" "),
function(e,f,l,p,m,d,a,c,b,k,r,z,B,n,q,h,v){var u=e(b,{grid:null,centerClass:"dgrid-cell",isCenter:function(a){return h(a.target).parent().hasClass(this.centerClass)},getObject:function(a){var b=this.grid;return b._trackError(function(){return b.collection.get(a.id.slice(b.id.length+5))})},_legalMouseDown:function(a){return this.inherited(arguments)&&a.target!==this.grid.bodyNode},onDrop:function(a,b,d){var e=this,k=this._targetAnchor=this.targetAnchor,h=this.grid,f=h.collection,l=a.grid.collection;
!this.before&&k&&(k=k.nextSibling);k=k&&h.row(k);c(k&&f.get(k.id),function(c){if(e!==a&&l.root!=f.root)e.onDropExternal(a,b,d,c);else e.onDropInternal(b,d,c)})},onDropInternal:function(a,b,d){var e=this.grid,k=e.collection,h=this,f=h._targetAnchor,l;f&&(l=this.before?f.previousSibling:f.nextSibling);f=e.row(a[0]);(b||l!==a[0]&&(d||!f||e.down(f).element!==a[0]))&&a.forEach(function(a){c(h.getObject(a),function(a){var c=k.getIdentity(a);e._trackError(function(){return k[b&&k.copy?"copy":"put"](a,{beforeId:d?
k.getIdentity(d):null}).then(function(){h._selectedNodes[c]&&(h._selectedNodes[c]=e.row(c).element)})})})})},onDropExternal:function(a,b,d,e){var k=this.grid,h=this.grid.collection,f=a.grid;b.forEach(function(b,l){c(a.getObject(b),function(c){k._trackError(function(){return h[h.copy?"copy":"put"](c,{beforeId:e?h.getIdentity(e):null}).then(function(){if(!d){if(f){var e=f.collection.getIdentity(c);!l&&a.selectNone();a.delItem(b.id);return f.collection.remove(e)}a.deleteSelectedNodes()}})})})})},onDndStart:function(a){this.inherited(arguments);
a===this&&(k.manager().avatar.node.style.width=this.grid.domNode.offsetWidth/2+"px")},onMouseDown:function(b){a("touch")&&this.isDragging&&1<v.countCurrentTouches(b,this.grid.touchNode)?(d.publish("/dnd/cancel"),k.manager().stopDrag()):this.inherited(arguments)},onMouseMove:function(a){if(!this.isDragging||"Disabled"!=this.targetState){var b=z.manager();if(!this.isDragging&&this.mouseDown&&this.isSource&&(Math.abs(a.pageX-this._lastX)>this.delay||Math.abs(a.pageY-this._lastY)>this.delay)){var c=this.getSelectedNodes();
c.length&&b.startDrag(this,c,this.copyState(B.getCopyKeyState(a),!0))}if(this.isDragging){var e=c=!1;this.current&&(this.targetBox&&this.targetAnchor==this.current||(this.targetBox=n.position(this.current,!0)),c=this.horizontal?a.pageX-this.targetBox.x<this.targetBox.w/2==n.isBodyLtr(this.current.ownerDocument):a.pageY-this.targetBox.y<this.targetBox.h/2);e=this.isCenter(a);if(this.current!=this.targetAnchor||c!=this.before||e!=this.center){var d=this.grid;a=!this.current||b.source!=this||!(this.current.id in
this.selection);var k=d._sourceToModel(b.source),d=d._sourceToModel(this.current);k&&d&&d.canAdd&&e&&(k=d.canAdd(k),!1===k&&(a=k));this._markTargetAnchor(c,e,a);b.canDrop(a)}}}},checkAcceptance:function(a){return a.getObject&&b.prototype.checkAcceptance.apply(this,arguments)},getSelectedNodes:function(){if(!this.grid.selection)return this.inherited(arguments);var a=new r,b;for(b in this.grid.selection)a.push(this._selectedNodes[b]);return a}});e=e("xgrid/views/DnD",null,{dndSourceType:"dgrid-row",
dndParams:null,dndConstructor:u,postMixInProperties:function(){this.inherited(arguments);this.dndParams=f.mixin({accept:[this.dndSourceType]},this.dndParams)},__dndNodesToModel:function(a){return q.map(a,function(a){return(this.row(a)||{}).data},this)},_sourceToModel:function(a,b){var c=null;if(a){var d=a._targetAnchor||a.anchor||a;b=b||a.grid||this;if(!d||!d.ownerDocument)return null;var e=b.row(d);if(e)return e.data;d&&((c=b.collection.getSync(d.id.slice(b.id.length+5)))||(c=b.row(d)))}return c},
postCreate:function(){function a(b){e[b.id]=b.element}function b(a){delete e[a.id];m.remove(a.element,"dojoDndItemSelected dojoDndItemAnchor")}this.inherited(arguments);var c=this.dndConstructor||u,d=f.mixin(this.dndParams,{grid:this,dropParent:this.contentNode});"function"===typeof this.expand&&(d.allowNested=!0);this.dndSource=new c(this.bodyNode,d);var e=this.dndSource._selectedNodes={};this.on("dgrid-select",function(b){l.forEach(b.rows,a)});this.on("dgrid-deselect",function(a){l.forEach(a.rows,
b)});p.after(this,"destroy",function(){delete this.dndSource._selectedNodes;e=null;this.dndSource.destroy()},!0)},insertRow:function(a){var b=this.inherited(arguments),c="function"===typeof this.getObjectDndType?this.getObjectDndType(a):[this.dndSourceType];m.add(b,"dojoDndItem");this.dndSource.setItem(b.id,{data:a,type:c instanceof Array?c:[c]});return b},removeRow:function(a){this.dndSource.delItem(this.row(a));this.inherited(arguments)}});e.GridSource=u;return e})},"xgrid/Grid":function(){define(["dojo/_base/declare",
"xide/types","./Base"],function(e,f,l){e=e("xgrid/Grid",l,{});e.createGridClass=l.createGridClass;e.classFactory=l.classFactory;e.DEFAULT_GRID_FEATURES=f.DEFAULT_GRID_FEATURES;e.DEFAULT_GRID_BASES=l.DEFAULT_GRID_BASES;e.DEFAULT_GRID_OPTIONS=f.DEFAULT_GRID_OPTIONS;e.DEFAULT_GRID_OPTION_KEYS=f.DEFAULT_GRID_OPTION_KEYS;return e})},"xgrid/KeyboardNavigation":function(){define(["xdojo/declare","dojo/keys","dojo/_base/lang","dojo/on","xide/utils"],function(e,f,l,p,m){var d=l.hitch;return e("xgrid/KeyboardNavigation",
null,{childSelector:".dgrid-row",defer:function(a,c){var b=setTimeout(d(this,function(){b=null;this._destroyed||d(this,a)()}),c||0);return{remove:function(){b&&(clearTimeout(b),b=null);return null}}},buildRendering:function(){this.inherited(arguments);if(!this._keyNavCodes){var a=this._keyNavCodes={};a[f.UP_ARROW]=d(this,"_onUpArrow");a[f.DOWN_ARROW]=d(this,"_onDownArrow")}"string"==typeof this.childSelector||d(this,"childSelector");a=this.domNode;this.__on(a,"keypress",null,d(this,"_onContainerKeypress"));
this.__on(a,"keydown",null,d(this,"_onContainerKeydown"))},_onLeftArrow:function(){},_onRightArrow:function(){},_onUpArrow:function(){},_onDownArrow:function(){},___focus:function(){this.focusFirstChild()},_getFirstFocusableChild:function(){return this._getNextFocusableChild(null,1)},_getLastFocusableChild:function(){return this._getNextFocusableChild(null,-1)},_searchString:"",multiCharSearchDuration:1E3,onKeyboardSearch:function(a,c,b,d){a&&(this.deselectAll(),this.select([this.row(a).data],null,
!0,{focus:!0,delay:10,append:!0}))},getSearchableText:function(a){return a.message||a.name||""},_keyboardSearchCompare:function(a,c){if(a&&!a.data){var b=this.row(a);b&&(a.data=b.data)}if(b=a?a.data?this.getSearchableText(a.data):"":""){var b=b.toLowerCase(),d=b.replace(/^\s+/,"").substr(0,c.length).toLowerCase(),d=c.length&&d==c?-1:0,b=-1!=b.replace(/^\s+/,"").indexOf(c.toLowerCase());return 0==d&&1<c.length&&b?1:d}},_onContainerKeydown:function(a){if(!a.target||-1==a.target.className.indexOf("input")){var c=
this._keyNavCodes[a.keyCode];c?(c(a,this.focusedChild),a.stopPropagation(),a.preventDefault(),this._searchString=""):a.keyCode!=f.SPACE||!this._searchTimer||a.ctrlKey||a.altKey||a.metaKey||(a.stopImmediatePropagation(),a.preventDefault(),p.emit(this.domNode,"keypress",{charCode:f.SPACE,cancelable:!0,bubbles:!0}))}},_onContainerKeypress:function(a){if(!(this.editing||a.target&&-1!=a.target.className.indexOf("input")||32>a.charCode||a.ctrlKey||a.altKey)){var c=null,b,e=0,f=d(this,function(){this._searchTimer&&
this._searchTimer.remove();this._searchString+=l;var a=/^(.)\1*$/.test(this._searchString)?1:this._searchString.length;b=this._searchString.substr(0,a);this._searchTimer=this.defer(function(){this._searchTimer=null;this._searchString=""},this.multiCharSearchDuration);var d=this.focusedChildNode||this.focusedChild||null;if(1==a||!d)if(d=this._getNextFocusableChild(d,1),!d)return;a=d;do{var f=this._keyboardSearchCompare(d,b);f&&0==e++&&(c=d);if(-1==f){e=-1;break}d=this._getNextFocusableChild(d,1)}while(d!=
a)}),l=String.fromCharCode(a.charCode).toLowerCase();a.preventDefault();a.stopPropagation();f();this.onKeyboardSearch(c,a,b,e)}},_onChildBlur:function(){},_getNextFocusableChild:function(a,c){var b=a;do{if(a){if(a&&a.node){var d=m.find(".dgrid-cell",a.node,!0);d&&(a=d)}a=this._getNext(a,c)}else if(a=this[0<c?"_getFirst":"_getLast"](),!a)break;if(null!=a&&a!=b)return a}while(a!=b)},_getFirst:function(){var a=m.find(".dgrid-row",this.domNode,!0);if(a){var c=m.find(".dgrid-cell",a,!0);if(c)return c}return a},
_getLast:function(){var a=m.find(".dgrid-row",this.domNode,!1);return a&&(a=m.find(".dgrid-cell",a,!0))?a:null},_getPrev:function(a,c){if(a){var b=this.up(a,1,!0);if(b){var d=null;b.data&&(d=b.data);b.element&&(b=b.element);var e=m.find(".dgrid-cell",b,!0);return e?(e.data||(e.data=d),e):b}}},_getNext:function(a,c){if(a){var b=this.down(a,1,!0);if(b){b.element&&(b=b.element);var d=m.find(".dgrid-cell",b,!0);return d?d:b}}}})})},"xgrid/MultiRenderer":function(){define(["xdojo/declare","xide/types",
"xgrid/Renderer","dojo/_base/kernel"],function(e,f,l,p){function m(a,c){d[c]=function(){var a=this.getSelectedRenderer();return a[c]?a[c].apply(this,arguments):this.inherited(arguments)}}var d={renderers:null,selectedRenderer:null,lastRenderer:null,rendererActionRootCommand:"View/Layout",runAction:function(a){a=this.getAction(a);if(-1!==a.command.indexOf(this.rendererActionRootCommand)){var c=a.getParent?a.getParent():null;a._originEvent="change";this.setRenderer(a.value);c&&(c.set("icon",a.get("icon")),
c=c.getChildren(),_.each(c,function(a){a._oldIcon&&a.set("icon",a._oldIcon)}));a.set&&a.set("icon","fa-check");return!0}return this.inherited(arguments)},setState:function(a){var c=a.selectedRenderer?p.getObject(a.selectedRenderer):null;c&&(this.setRenderer(c),this.set("collection",this.collection.getDefaultCollection()));return this.inherited(arguments)},getState:function(a){a=this.inherited(arguments)||{};this.selectedRenderer&&(a.selectedRenderer=this.getSelectedRenderer.declaredClass);return a},
getRendererActions:function(a,c){function b(a,b,c){var g="shift f"+p;p++;var m=null,m=e.createAction({label:a,command:d+"/"+a,icon:b,tab:"View",group:"Layout",mixin:{value:c,addPermission:!0,closeOnClick:!1},keycombo:[g],onCreate:function(a){a._oldIcon=b;a.actionType=f.ACTION_TYPE.SINGLE_TOGGLE;a.value=c}});l.push(m);return l}var d=this.rendererActionRootCommand,e=this,l=[],m=a||this.getRenderers(),n=f.ACTION_VISIBILITY,p=1;l.push(this.createAction({label:"Layout",command:d,icon:"fa-laptop",tab:"View",
group:"Layout",mixin:{closeOnClick:!1},onCreate:function(a){a.value=e.selectedRenderer;a.setVisibility(n.ACTION_TOOLBAR,!1).setVisibility(n.RIBBON,{expand:!0})}}));_.each(m,function(a){var c=a.Implementation||a.prototype;c._getLabel&&b(c._getLabel(),c._getIcon(),a)});return l},getSelectedRenderer:function(){return this.selectedRenderer.prototype},startup:function(){var a=this;this._on("onAddGridActions",function(c){a.getRendererActions(a.getRenderers(),c.actions).forEach(function(a){c.actions.push(a)})});
this.inherited(arguments);this.selectedRenderer&&$(this.domNode).addClass(this.getSelectedRenderer()._getLabel())},getRenderers:function(){return this.renderers},setRenderer:function(a,c){var b=this;b.getSelection();b.getFocused();var d=b.getSelectedRenderer(),e={"new":a,old:b.selectedRenderer},f=$(this.domNode);f.removeClass(d._getLabel());d.deactivateRenderer.apply(this,e);this._emit("onChangeRenderer",e);this.lastRenderer=this.selectedRenderer;this.selectedRenderer=a;this.selectedRendererClass=
a.prototype.declaredClass;f.addClass(a.prototype._getLabel());a.prototype.activateRenderer.apply(this,e);this.collection.reset();(d=this.refresh())&&d.then&&d.then(function(){b._emit("onChangedRenderer",e)});return d}};_.each("row removeRow renderRow insertRow activateRenderer deactivateRenderer".split(" "),function(a){m(d,a)});e=e("xgrid.MultiRenderer",null,d);e.Implementation=d;return e})},"xgrid/Search":function(){define(["xdojo/declare","xide/widgets/_Search","dojo/on","xide/Keyboard","xide/types"],
function(e,f,l,p,m){return e("xgrid/Search",null,{_searchText:null,_search:null,runAction:function(d){d&&d.command==m.ACTION.SEARCH&&this._search&&(this._search.isHidden()?this._search.show("",!1):this._search.hide());return this.inherited(arguments)},buildRendering:function(){this.inherited(arguments);var d=this,a=d.domNode.parentNode,c=new f({});c.find=function(){d._searchText=this.searchInput.value;d.set("collection",d.collection)};c.showSearchBox(a);c.show("",!1);c.hide();this._search=c;l(c.searchInput,
"keydown",function(a){"Escape"===a.code&&(c.hide(),d.focus())});var b=p.defaultMapping(["ctrl f"],function(){c.show("",!1)},m.KEYBOARD_PROFILE.DEFAULT,d.domNode,d,null);this.registerKeyboardMapping(b);this._on("onAddActions",function(b){var c=b.actions,e=b.permissions;action=m.ACTION.SEARCH;b.store.getSync(action)||(b=d.createAction("Search",action,m.ACTION_ICON.SEARCH,["ctrl f"],"Home","File","item|view",null,null,null,null,null,e,a,d))&&c.push(b)})},_setCollection:function(d){var a=this.inherited(arguments),
c=this._searchText,b=this._renderedCollection;if(b&&c){var e=new b.Filter,c=new RegExp(c,"i"),f=this.columns,l=[],m;for(m in f)f.hasOwnProperty(m)&&l.push(e.match(f[m].searchText||f[m].field,c));e=e.or.apply(e,l);this._renderedCollection=b.filter(e);this.refresh()}return a}})})},"xgrid/component":function(){define(["dojo/_base/declare","xide/model/Component"],function(e,f){return e("xfile.component",f,{beanType:"",getDependencies:function(){return[]},getLabel:function(){return"xgrid"},getBeanType:function(){return this.beanType}})})},
"xgrid/Noob":function(){define(["dojo/_base/declare"],function(e){return e("xgrid.Noob",null,{})})},"xgrid/GridLite":function(){define(["dojo/_base/declare","xide/types","./Base"],function(e,f,l){e=e("xgrid/Grid",l,{});e.createGridClass=l.createGridClass;e.classFactory=l.classFactory;e.DEFAULT_GRID_FEATURES=f.DEFAULT_GRID_FEATURES;e.DEFAULT_GRID_BASES=l.DEFAULT_GRID_BASES;e.DEFAULT_GRID_OPTIONS=f.DEFAULT_GRID_OPTIONS;e.DEFAULT_GRID_OPTION_KEYS=f.DEFAULT_GRID_OPTION_KEYS;return e})}}});
define("xgrid/xgrid",[],function(){return null});
//# sourceMappingURL=xgrid.js.map