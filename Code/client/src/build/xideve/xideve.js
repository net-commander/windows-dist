//>>built
require({cache:{"xideve/types":function(){define(["xide/types","xide/utils"],function(p,u){u.mixin(p,{VE_LAYOUT_RIGHT_CENTER_BOTTOM:"VE_LAYOUT_RIGHT_CENTER_BOTTOM",VE_LAYOUT_CENTER_BOTTOM:"VE_LAYOUT_CENTER_BOTTOM",VE_LAYOUT_CENTER_RIGHT:"VE_LAYOUT_CENTER_RIGHT",VE_LAYOUT_LEFT_CENTER_RIGHT:"VE_LAYOUT_LEFT_CENTER_RIGHT",VE_LAYOUT_LEFT_CENTER_RIGHT_BOTTOM:"VE_LAYOUT_LEFT_CENTER_RIGHT_BOTTOM"});u.mixin(p.EVENTS,{WIDGET_PROPERTIES_RENDERED:"OnWidgetPropertiesRendered",WIDGET_PROPERTY_RENDERED:"onWidgetPropertyRendered",
ON_SET_WIDGET_PROPERTY_ACTIONS:"onSetWidgetPropertyActions",ON_GET_LOADER_PACKAGES:"onGetLoaderPackages",ON_VISUAL_EDITOR_SAVE:"onVisualEditorSave",ON_BUILD_HEADER:"onBuildHeader",ON_BUILD_DOJO_CONFIG:"onBuildDojoConfig",ON_SET_DOJO_URL:"onSetDojoUrl",ON_SET_SOURCE_DATA:"onSetSourceData",ON_EVENT_SELECTION_RENDERED:"onEventSelectionRendered",ON_WIDGET_PROPERTY_CHANGED:"onWidgetPropertyChanged",ON_LIBRARY_CONTAINER_CREATED:"onLibraryContainerCreated",ON_CONTEXT_READY:"onContextReady",ON_CONTEXT_DESTROYED:"onContextDestroyed",
ON_BUILD_WIDGET_BLOCK_LIBRARY:"onBuildWidgetBlockLibrary",ON_SHOW_BLOCK_SMART_INPUT:"onShowBlockSmartInput",ON_WIDGET_CHANGED:"onWidgetChanged"});return p})},"xideve/views/VisualEditor":function(){define("dcl/dcl dojo/dom-construct dojo/Deferred dojo/promise/all require xide/layout/ContentPane xide/layout/_Accordion xide/utils xide/types xide/factory davinci/ve/PageEditor davinci/ve/palette/Palette davinci/Runtime davinci/Workbench dojo/_base/connect dojo/dom-class davinci/ve/metadata davinci/ve/views/SwitchingStyleView xideve/views/OutlineView xideve/views/OutlineGridView xide/registry xide/layout/_TabContainer xideve/views/VisualEditorPalette xideve/views/VisualEditorSourceEditor xideve/views/VisualEditorLayout xideve/views/VisualEditorAction xideve/views/VisualEditorTools xaction/Action davinci/ve/widget xide/editor/Default xide/_base/_Widget xideve/tests/Reload xide/mixins/ReloadMixin xblox/model/html/SetStyle xblox/model/html/SetCSS xblox/model/html/SetState wcDocker/splitter xdocker/Splitter2 wcDocker/types".split(" "),
function(p,u,n,m,d,e,k,g,v,I,q,b,a,c,h,l,A,F,P,C,x,X,D,H,J,K,r,G,U,y,S,w,L,z,B,O,Q,t,M){$.fn.inlineStyle=function(a){var b=this.attr("style"),c;b&&b.split(";").forEach(function(b){b=b.split(":");$.trim(b[0])===a&&(c=b[1])});return c};sctx&&(window.updateBodyFrame=function(a,b,c){console.clear();var h=a.offset(),l=h.top,A=h.left;b&&$(b.rootNode);var d=b?$(b.getDocumentElement().getChildElement("body")):null,h=a.css("width"),x=a.css("height");b.rootNode.scrollLeft=b.rootNode.parentNode.scrollLeft;b=
!1;if(d){d.inlineStyle("max-width");d.inlineStyle("max-height");var v=d.inlineStyle("width");v&&(b=v);d.inlineStyle("height")}$(c).css("display",this._hidden?"none":"block");if(0!=l||0!=A)c.css("top",l),c.css("left",A),"none"!==h&&(c.css("width",h),c.css("height",x),l=$(this.getEditorContext().rootNode),A=l.parent(),b&&(a.css("overflow","auto"),c.css("width",h),c.css("height",x),A.css("width",h),A.css("height",x),l.css("height",h),l.css("width",x)))});t.prototype.collapse2=function(a,b){this._isCollapsed=
!0;this._pane[0].collapsed=0==a;this._pane[1].collapsed=1==a;this._saveProp("pos");this._lastCollapsed=a;console.error("collapse "+a+" pos : "+b);this._lastCollapsed=a;this.pos(b)};t.prototype.expand2=function(){this._isCollapsed=!1;this._pane[0].collapsed=!1;this._pane[1].collapsed=!1;this._restoreProp("pos")};p=p([S,D,H,J,K,r,L.dcl],{updateFrame:function(){var a=this.editor,b=this.getFrame(),c=this;b&&!b._followTimer&&(b._followTimer=setInterval(function(){var h=a._designCP.containerNode,l=$(b),
A=$(h),d=A.offset(),h=d.top,d=d.left,x=c.getEditorContext();x&&$(x.rootNode);var v=x?$(x.getDocumentElement().getChildElement("body")):null,x=A.css("width"),A=A.css("height"),F=!1,C=!1;if(v){v.inlineStyle("max-width");v.inlineStyle("max-height");var r=v.inlineStyle("width");r&&(C=r);(v=v.inlineStyle("height"))&&(F=v)}$(l).css("display",c._hidden?"none":"block");if(0!=h||0!=d)l.css("top",h),l.css("left",d),"none"!==x&&(l.css("width",x),l.css("height",A),h=$(c.getEditorContext().rootNode),l.css("width",
x),l.css("height",A),F&&h.css("height",F),C&&h.css("width",C),F||C||(h.css("width",x),h.css("height",A)))},500))},doSplit:function(a){var b=this.getPageEditor(),c=b.getSourcePane(),b=b.getSourcePane(),c=c.getSplitter(),b=b.getSplitter();switch(a){case v.VIEW_SPLIT_MODE.DESIGN:console.error("splitter ",b);console.error("splitter ",c);b&&(b.isCollapsed()?b.expand():b.collapse(0,.9));break;case v.VIEW_SPLIT_MODE.SOURCE:b._pane[0].collapsed=!0,b._pane[1].collapsed=!1,b&&(b.isCollapsed()?b.expand():b.collapse(1,
.1))}},menuOrder:{File:110,Edit:100,View:90,Widget:80,Block:50,Settings:20,Navigation:10,Step:5,New:4,Window:1},declaredClass:"xideve/views/VisualEditor",templateString:"\x3cdiv style\x3d'height: 100%;width: 100%' attachTo\x3d'containerNode'\x3e\x3c/div\x3e",isVisualEditor:!0,resizeToParent:!0,showLESS:!0,showBehaviours:!1,showStyleView:!0,blockScopes:null,onReload:function(){},leftLayoutContainer:null,rightLayoutContainer:null,palette:null,paletteContainer:null,showPalette:!0,styleView:null,styleViewContainer:null,
addOutline:!0,outlineView:null,outlineContainer:null,outlineGridView:null,outlineGridContainer:null,editor:null,_designMode:!0,_tempLeftContainer:null,textEditor:null,delite:!1,template:null,contextInfo:null,didAddSheetEditors:!1,beanType:v.ITEM_TYPE.WIDGET,_didInitial:!1,ready:!1,destroyed:!1,_skipTextEditorChange:!1,_getHTMLBlocks:function(a,b,c,h,l){l.push({name:"HTML",iconClass:"fa-paint-brush",items:[{name:"Set Style",owner:b,iconClass:"fa-paint-brush",proto:z,target:c,ctrArgs:{scope:a,group:h}},
{name:"Set CSS",owner:b,iconClass:"fa-paint-brush",proto:B,target:c,ctrArgs:{scope:a,group:h}},{name:"Set State",owner:b,iconClass:"fa-paint-brush",proto:O,target:c,ctrArgs:{scope:a,group:h}}]});return l},onBuildBlockInfoListEnd:function(a){var b=a.owner;(b=b?b.visualEditor:null)&&b===this&&this._getHTMLBlocks(a.scope,a.view,a.item,a.group,a.items)},reloadModule:function(){w.reload().then(function(a){a.component.registerEditors()})},updateFocus:function(){var a=this.getEditorContext();a&&(a.clearCachedWidgetBounds(),
a.updateFocusAll())},set:function(a,b){"focused"===a&&this.updateFocus();return this.inherited(arguments)},select:function(a,b){a=_.isArray(a)?a:[a];var c=a[0];if(c){var h=this.getEditorContext();if(h){if(_.isString(c)){var l=[];_.each(a,function(a){(a=h.getWidget(a))&&l.push(a)});a=l}!0!==b&&h.deselect();_.each(a,function(a){h.select(a,!0,!1)})}}},selectAll:function(){var a=this.getEditorContext(),b=a.getAllWidgets();_.each(b,function(b){a.select(b,!0,!1)})},updateToolbars:function(){},getTemplateDirectoryPathItem:function(){return{mount:"workspace",
path:"./templates"}},getSelection:function(){var a=this.getEditorContext(),b=[];if(a)for(var a=a.getSelection(),c=0;c<a.length;c++)b.push(a[c]);return b},ensureSceneFiles:function(a){var b=new n,c=[],h=a._S,l=a.mount,A=g.getFileExtension(a.path),d=this.ctx.getFileManager(),x=this.getTemplateDirectoryPathItem();h.getParent(a).getPath();var v=function(a,b){var c=new n,v=a.getPath().replace("."+A,"."+b);if(a=h.getSync(v))c.resolve(a);else{var F="./"+v,F=F.replace("././","./"),C=x.path+"/newDHTML."+b;
d.mkfile(l,F).then(function(a){d.getContent(l,C,function(a){d.setContent(l,F,a,function(a){c.resolve()})})})}return c};c.push(v(a,"css"));c.push(v(a,"xblox"));c.push(v(a,"js"));m(c).then(function(a){b.resolve()});return b},getActiveItem:function(){return null},hasItemActions:function(){return this.ready},getItem:function(){return this.currentItem},onReloaded:function(){},_createLeftContainer:function(){var a=this.getMainView();return g.addWidget(e,{closable:!0,style:"padding:0px;width:200px",region:"left",
cssClass:"layoutLeft",splitter:!0,parentContainer:a.layoutMain},this,a.layoutMain,!0,"ui-widget-content")},getLeftContainer:function(){var a=this.getMainView(),b=a.leftLayoutContainer;if(b)return b;if(a.leftTabContainer)return a.leftTabContainer;this._tempLeftContainer=this._createLeftContainer();return this.leftLayoutContainer=g.addWidget(k,{persist:!0,doLayout:!0,cssClass:"ui-widget-content"},this,this._tempLeftContainer.containerNode,!0)},restoreStyleView:function(){return x.byId("html_style_view_parent")},
suspendStyleView:function(){},onLastEditorRemoved:function(){this.suspendStyleView();var a=x.byId("html_style_view_parent");a&&a.parentContainer&&(a.parentContainer.removeChild(a),g.destroy(a));(a=x.byId("html_style_view"))&&g.destroy(a);(a=x.byId("palette-tabcontainer-right-top"))&&g.destroy(a)},clearAll:function(){this.editor&&this.editor.visualEditor.context.deselect();c._switchEditor(null);c.currentEditor=null;a.currentEditor=null;this.destroyed=!0;if(this.blockScopes){for(var b=0;b<this.blockScopes.length;b++){var h=
this.blockScopes[b];this.ctx.getBlockManager().removeScope(h.id)}delete this.blockScopes}this.outlineGridView=this.outlineGridContainer=null;this.onLastEditorRemoved()},getFrame:function(){var a=this.getEditorContext();return a&&a.frameNode?a.frameNode:null},destroy:function(){var a=0==this.getEditors().length,b=this.getMainView(),c=this.getLeftContainer();this.getEditorContext();clearInterval(this._frameTimer);g.destroy(this.getFrame());if(null==this.leftLayoutContainer||c.canDestroy&&!c.canDestroy()){g.destroy(this.paletteContainer,
!1);g.destroy(this._cBPalettePane,!1);try{this.outlineGridContainer&&(c.removeChild(this.outlineGridContainer),this.outlineGridView.parentContainer=null),g.destroy(this.outlineGridView,!0),g.destroy(this.palette)}catch(h){debugger}}else g.destroy(this.leftLayoutContainer,!1),b.layoutMain&&b.layoutMain.removeChild&&b.layoutMain.removeChild(this._tempLeftContainer),g.destroy(this.paletteContainer,!1);this&&this.styleViewContainer&&(this.styleViewContainer.keep=!1);g.destroy(this.styleView,!0,this);
g.destroy(this.tabContainer,!0,this);g.destroy(this.styleViewContainer,!0,this);this.publish(v.EVENTS.ON_CONTEXT_DESTROYED,this.getEditorContext());try{this.clearAll()}catch(l){logError(l)}if(a)try{g.destroy(this.editor,!0,this)}catch(A){logError(A)}},getMainView:function(){return this.mainView},addStyleView:function(a){function b(a){a._on("splitterMoveStart",function(a){c.hideFrame(!0)});a._on("splitterMoveEnd",function(a){c.hideFrame(!1)})}var c=this;this.ctx.getApplication();var h=this.getPageEditor(),
A=h.getPropertyPane();if(this.styleView)return this.styleView;b(A);b(h.getDesignPane());h=g.addWidget(X,{region:"center",id:"palette-tabcontainer-right-top",tabPosition:"right-h",tabStrip:!1,"class":"davinciPalette davinciTopPalette widget",style:"",splitter:!1,direction:"right"},null,A.containerNode,!0);l.add(h.domNode,"davinciPalette davinciTopPalette");this.tabContainer=h;this.styleViewContainer=A;var d=h.createTab("Widget","fa-cogs");try{this.styleView=g.addWidget(F,{toolbarDiv:A.containerNode,
context:a,_editor:this.editor,parentContainer:h,tabContainer:h},null,d.containerNode,!0)}catch(x){console.error("html_style_view crash "+x)}this.styleView._initialPerspectiveReady()},addPalette:function(a){this.palette=x.byId("html_palette");if(!this.palette){var c=this.ctx.mainView.leftLayoutContainer;this.paletteContainer=c=c.createTab("Palette","fa-cube",!0,null,{parentContainer:c,open:!1});try{this.palette=g.addWidget(b,{toolbarDiv:c.containerNode,context:a,style:"padding:0px;"},null,c.containerNode,
!0)}catch(h){console.error("palette crash "+h)}try{this.palette.descriptors="dijit,dojox,html,OpenAjax",this.palette.setContext(a)}catch(l){console.error("palette crash "+l)}this.add(c,null,!1);this.add(this.palette,null,!1)}},addOutlineGridView:function(a){var b=this.getLeftContainer();if(!this.outlineGridView&&b){this.outlineGridContainer=b=b.createTab("Outline","fa-cube",!0,null,{parentContainer:b});try{this.outlineGridView=g.addWidget(C,{context:a,resizeToParent:!0,style:"padding:0px;"},null,
b.containerNode,!0),b.add(this.outlineGridView)}catch(c){logError(c,"outline crash ")}this.outlineGridView.startup();this.add(b)}},addOutlineView:function(a){this.outlineView=x.byId("html_outline_view");var b=this.ctx.getApplication().mainView.getLeftLayoutBottomContainer()||this.getLeftContainer();if(!this.outlineView&&b){this.outlineContainer=b=g.addWidget(e,{title:"Outline",closable:!0,iconClass:"fa-cube",parentContainer:b,style:"padding:0px;"},this,b,!0);try{this.outlineView=new P({context:a,
id:"html_outline_view",style:"padding:0px;"})}catch(c){console.error("palette crash "+c)}b.containerNode.appendChild(this.outlineView.domNode);this.outlineView.startup()}},_handleKeyDown:function(b,c){this._handleKey(b,c)||c||a.handleKeyEvent(b)},_handleKey:function(b,c){if(!this.keyBindings)return!1;var h=this.keyBindings.some(function(h){if((!c||h.keyBinding.allowGlobal)&&a.isKeyEqualToEvent(h.keyBinding,b))return d("davinci/Workbench")._runAction(h.action,this.editor,h.action.id),!0},this);h&&
dojo.stopEvent(b);return h},_setupKeyboardHandler:function(a){var b=function(a){this.keyBindings||(this.keyBindings=[]);this.keyBindings.push(a)}.bind(this);this._getViewActions().forEach(function(a){a.actions.forEach(function(a){a.keyBinding&&b({keyBinding:a.keyBinding,action:a});a.menu&&a.menu.forEach(function(a){a.keyBinding&&b({keyBinding:a.keyBinding,action:a})},this)},this)},this);h.connect(a,"handleKeyEvent",this,"_handleKeyDown")},setDirty:function(){},shouldUpdateTextEditor:function(){return this._skipTextEditorChange?
(this._skipTextEditorChange=!0,!1):!0},addPageEditor:function(b){if(!this.editor)try{var h=this;this.editor=new (d("davinci/ve/PageEditor"))(dojo.create("div",{}),b.getPath(),b,function(a,c){return h.createHTMLEditor(a,c,b)},this.template,[{title:"Blocks"}]);this.editor.ctx=this.ctx;this.editor.editorContainer=this;this.editor.delegate=this;this.containerNode.appendChild(this.editor.domNode);this.declaredClass=this.editor.declaredClass;this.editor.editorID="davinci.ve.HTMLPageEditor";a.currentEditor=
this.editor;c.currentEditor=this.editor;this.add(this.editor,null,!1);this._setupKeyboardHandler(this.editor);this.addTextEditor(this.editor.htmlEditor);c._switchEditor(this.editor);setTimeout(function(){dojo.publish("/davinci/ui/editorSelected",[{editor:h.editor,oldEditor:null}])},2E3);return this.editor}catch(l){console.error("crash in visual editor "+l),logError(l,"crash in visual editor ")}},_widgetSelectionChanged:function(a){if(1!=a.isFake){a=a.selection;var b=(a=1==a.length?a[0]:null)||{dummy:!0};
this.currentItem=a||null;this.publish(v.EVENTS.ON_ITEM_SELECTED,{item:b,owner:this,beanType:"widget"});this._emit("selectionChanged",{item:b,owner:this})}},_resume:function(){this.restoreStyleView()},_suspend:function(){this.suspendStyleView()},hideFrame:function(a){this._hidden=a;var b=this.getFrame();b&&$(b).css("display",a?"none":"block")},onHide:function(){this.inherited(arguments);this.hideFrame(!0);this.updateFocus();this.editor&&(c._switchEditor(null),this.publish("/davinci/ui/editorSelected",
[{editor:null,oldEditor:this.editor}]));this._suspend()},onShow:function(){this.inherited(arguments);this.hideFrame(!1);if(this.editor){this.updateFocus();c._switchEditor(this.editor);var a=this;setTimeout(function(){a.publish("/davinci/ui/editorSelected",[{editor:a.editor,oldEditor:null}])},1E3)}this._resume()},openItem:function(a){function b(a){c.ensureSceneFiles(a).then(function(){c.editor||c.addPageEditor(a);c.hideFrame(!1);c.updateFrame();c.ctx.getFileManager().getContent(a.mount,a.path,function(b){c.editor.setContent(a.path,
b);c.showPalette&&c.addPalette(c.editor.visualEditor.context);try{c.styleView||!1===c.showStyleView||c.addStyleView(c.getEditorContext())}catch(l){console.error("error style view "+l),logError(l,"error style view ")}h.resolve()})})}var c=this,h=new n;c.item=a;this.template&&!this.template.isLoaded()?this.template.load().then(function(){b(a)}):b(a);return h},onReady:function(){this.ready=!0;this.hideFrame(!1);this.updateFrame()},onEditorContextLoaded:function(){var a=this;if(this._didInitial)setTimeout(function(){a.outlineGridView&&
(a.outlineGridView.editorChanged({editor:null,oldEditor:a.editor}),a.outlineGridView.editorChanged({editor:a.editor,oldEditor:null}))},800);else{this._didInitial=!0;var b=a.editor.visualEditor.context;if(a.addOutline)try{setTimeout(function(){a.addOutlineGridView(b);dojo.publish("/davinci/ui/editorSelected",[{editor:a.editor,oldEditor:null}]);a.onReady()},800)}catch(c){console.error("outline creation crashed "+c);debugger}}},getNullItem:function(){return this._nullItem?this._nullItem:this._nullItem=
{owner:this,beanType:"widget"}},_editors:null,addTextEditor:function(a){!this._editors&&(this._editors=[]);this._editors.push(a)},publishCSSRules:function(a){a=(new CSSParser).parse(a,!1,!0);var b=[];_.each(a.cssRules,function(a){a.mSelectorText&&"body"!==a.mSelectorText&&b.push(a.mSelectorText.replace(".",""))});this.publish("CSSRulesUpdated",{names:b,editor:this})},loadSceneCSSFile:function(a){var b=this;this.ctx.getFileManager().getContent(a.mount,a.path,function(a){b.publishCSSRules(a)})},onContextReady:function(a){if(a.context==
this.getEditorContext()){this.contextInfo=a;var b=this,c=this.getPageEditor(),h=a.context._extraSheets,l=this.item._S;this.ctx.getWindowManager().registerView(this,!0);!1!==this.showLESS&&l&&!this.didAddSheetEditors&&(this.didAddSheetEditors=!0,_.each(h,function(a,h){var A;A=h.replace("././","./");h=h.replace("././","./");var d=l.getSync(A);d&&(a.storeItem=d,a.cssItem=l.getSync(h));if(d){A={sheetProps:a,closeable:!1,emmet:!0,resizeToParent:!0};var x=v.DOCKER,x=c.createTab(null,{title:d.name,icon:"fa-paint",
tabOrientation:x.TAB.TOP,location:x.DOCK.STACKED,target:c.getSourcePane()});b.cssPane=x;A=y.Implementation.open(d,x,A,!0);a.edior=A;b.addTextEditor(A);x.add(A);b.loadSceneCSSFile(d);A._on(v.EVENTS.ON_FILE_CONTENT_CHANGED,function(a){b.publishCSSRules(a.content)})}else console.error("couldnt find file : ",A)}));this.hideFrame(!1);(h=a.blockScopes)&&h.length&&(this.showBehaviours&&this._buildBlockPalette(a),a.context.eventHandler={click:function(a){b.publish(v.EVENTS.ON_ITEM_SELECTED,{item:b.currentItem||
b.getNullItem(),owner:b,beanType:"widget"});b._emit(v.EVENTS.ON_VIEW_SHOW,{view:b})}})}},onAppReady:function(a){setTimeout(function(){this.outlineView&&a.context&&(this.outlineView.reset(),this.outlineView.createTree())}.bind(this),2E3)},getTextEditor:function(){return this.editor.htmlEditor},getEditor:function(a,b){var c=null;_.each(this._editors,function(h){var l=h.item,A=l.mount.replace("/",""),l=l.path.replace("./","");A===a&&l===b&&(c=h)});return c},onEditorContentChanged:function(a){var b=this;
this.__internUpdate=!0;setTimeout(function(){b.__internUpdate=!1},5E3);return this.reload(a.content)},isSaving:!1,save:function(a,b,c,h){if(!this.isSaving){this.__internUpdate=this.isSaving=!0;var l=this.getTextEditor();l&&l.set("value",h);this.publish(v.EVENTS.ON_VISUAL_EDITOR_SAVE,{pageEditor:a,visualEditor:b,model:c,text:h,item:this.item});var A=this;this.ctx.getFileManager().setContent(this.item.mount,this.item.path,h,function(){A.isSaving=!1})}},fileChanged:function(a){function b(a){a==c.getTextEditor()&&
a.reload().then(function(a){c.reload(a)});a.reload().then(function(){c.onFileChanged({editor:a})})}if(!this.__internUpdate){a=a.data.path;var c=this;if(-1!=a.indexOf("workspace_user")){var h=a.substr(a.indexOf("workspace_user")+15,a.length);if(h=this.getEditor("workspace_user",h))return b(h)}(a=this.ctx.toVFSShort(a,"workspace_user"))&&(h=this.getEditor("workspace_user",a))&&b(h)}},onFileChanged:function(a){if(!a.__did&&(a.__did=!0,a&&a.editor&&a.editor.sheetProps)){var b=a.editor.sheetProps,c=this.contextInfo.document,
h=this;dojo.withDoc(c,function(){var a=c.getElementsByTagName("head")[0];try{b.link&&(a.removeChild(b.link),b.link=null)}catch(l){dojo.destroy(b.link)}var A=h.ctx.getFileManager().getImageUrl(b.cssItem,!0,!1),A=u.create("link",{rel:"stylesheet",type:"text/css",href:A});a.appendChild(A);dojo.place(A,a,"last");b.link=A})}},onUseActionStore:function(a){},getBlockEditor:function(){return this.getPageEditor().getBlockEditor()},resize:function(){this.updateFrame();this.updateFocus();var a=this.getPageEditor();
a&&(g.resizeTo(a.domNode,this.containerNode,!0,!0,null,{}),a.resize())},startup:function(){var a=this,b=v.EVENTS;this._frameTimer=setInterval(function(){a.updateFocus();a.updateFrame()},1E3);A.getSmartInput("xblox/RunScript");this.subscribe([b.ON_BUILD_BLOCK_INFO_LIST_END,b.ON_ACTION_CONTEXT_CHANGED,b.ON_ACTION_CHANGE_CONTEXT,b.ON_ACTION_CHANGE_CONTEXT,b.ON_FILE_CHANGED,b.ON_CONTEXT_READY,b.ON_APP_READY,{key:v.EVENTS.ON_FILE_CONTENT_CHANGED,handler:function(b){var c=b.item;a._skipTextEditorChange=
!0;if(c==a.item&&b.callee==a.textEditor)a.editor.setContent(a.item.getPath(),b.content);else a.onFileChanged(b)}},{key:"/davinci/ui/widgetSelected",handler:a._widgetSelectionChanged},{key:"/davinci/ui/context/loaded",handler:a.onEditorContextLoaded}]);this.initReload();setTimeout(function(){a.resize()},2E3)},setDesignMode:function(a,b){this._designMode=a;if(!0===b){var c=this._designToggleAction;c&&(c=c.getVisibility(v.ACTION_VISIBILITY.ACTION_TOOLBAR).widget)&&c.set("checked",a)}(c=this.getEditorContext())&&
c.setDesignMode(a)},onSceneBlocksLoaded:function(a){this.blockScopes=a.blockScopes;this.getPageEditor().onSceneBlocksLoaded(a,this)}});C.prototype.reloadModule=p.prototype.reloadModule;P.prototype.reloadModule=p.prototype.reloadModule;q.prototype.reloadModule=p.prototype.reloadModule;K.prototype.reloadModule=p.prototype.reloadModule;D.prototype.reloadModule=p.prototype.reloadModule;H.prototype.reloadModule=p.prototype.reloadModule;J.prototype.reloadModule=p.prototype.reloadModule;K.prototype.reloadModule=
p.prototype.reloadModule;r.prototype.reloadModule=p.prototype.reloadModule;return p})},"xideve/views/OutlineView":function(){define("dcl/dcl dojo/_base/declare dojo/dom-class davinci/Workbench davinci/ui/widgets/OutlineTree xide/layout/ContentPane".split(" "),function(p,u,n,m,d,e){return p([e],{declaredClass:"davinci.workbench.OutlineView",startup:function(){n.remove(this.domNode,"ui-widget-content")},reset:function(){this.outlineTree&&this.outlineTree.destroy();delete this.outlineProvider;delete this.outlineTree},
constructor:function(d,g){this.subscribe("/davinci/ui/editorSelected",this.editorChanged);this.subscribe("/davinci/ui/context/pagerebuilt",this._pageRebuilt)},_getViewActions:function(){return[]},editorChanged:function(d){d=d.editor;if(this.currentEditor){if(this.currentEditor==d)return;this.outlineTree&&this.outlineTree.destroy();delete this.outlineProvider;delete this.outlineTree}if(this.currentEditor=d)d.getOutline&&(this.outlineProvider=d.getOutline()),this.outlineProvider?(this.outlineProvider._outlineView=
this,this.createTree()):this.containerNode.innerHTML="no outline aviable"},createTree:function(){this.outlineTree&&this.removeContent();this.popup&&this.popup.destroyRecursive();!this.outlineProvider&&this.currentEditor&&(this.outlineProvider=this.currentEditor.getOutline(),this.outlineProvider._outlineView=this);this.outlineProvider&&this.outlineProvider.getModel&&(this.outlineModel=this.outlineProvider.getModel(this.currentEditor));var k={model:this.outlineModel,showRoot:this.outlineModel.showRoot,
betweenThreshold:this.outlineModel.betweenThreshold,checkItemAcceptance:this.outlineModel.checkItemAcceptance,isMultiSelect:!0,persist:!1,style:"height:inherit;"};this.outlineProvider.getIconClass&&(k.getIconClass=this.outlineProvider.getIconClass);this.currentEditor.getContext&&(k.context=this.currentEditor.getContext());this.outlineModel.dndController&&(k.dndController=this.outlineModel.dndController);this.outlineTree=new d(k);this.container=new e({style:"padding:0"});this.subcontainer=dojo.doc.createElement("div");
this.subcontainer.id="dvOutlineSubcontainer";this.subcontainer.appendChild(this.outlineTree.domNode);this.container.domNode.appendChild(this.subcontainer);this.setContent(this.container);this.outlineTree.startup();this.outlineProvider&&(this.outlineProvider._tree=this.outlineTree);k=this.outlineProvider.getActionsID&&this.outlineProvider.getActionsID()||"davinci.ui.outline";this.popup=m.createPopup({partID:k,domNode:this.outlineTree.domNode,openCallback:this.outlineTree.getMenuOpenCallback?this.outlineTree.getMenuOpenCallback():
null})},_getViewContext:function(){return this.outlineProvider},selectionChanged:function(d){!this.publishing["/davinci/ui/selectionChanged"]&&d.length&&d[0].model&&this.outlineTree&&this.outlineTree.selectNode([d[0].model])},_pageRebuilt:function(){if(this.outlineTree){var d=this.outlineTree.get("paths");this.createTree();this.outlineTree.set("paths",d)}},modelChanged:function(d){this.outlineModel&&this.outlineModel.refresh?this.outlineModel.refresh():this.outlineProvider&&this.outlineProvider.getStore&&
(this.outlineModel.store=this.outlineProvider.getStore(),this.outlineModel.onChange(this.outlineProvider._rootItem))}})})},"xideve/views/OutlineGridView":function(){define("dcl/dcl dojo/dom-class davinci/Workbench davinci/ui/widgets/OutlineTree xide/layout/ContentPane xide/utils xide/types dgrid/Editor xide/data/TreeMemory dijit/form/CheckBox davinci/ve/widget xide/_base/_Widget xide/mixins/ReloadMixin xgrid/Grid xgrid/TreeRenderer xgrid/KeyboardNavigation xide/widgets/_Widget davinci/ve/States davinci/ve/commands/StyleCommand".split(" "),
function(p,u,n,m,d,e,k,g,v,I,q,b,a,c,h,l,A,F,P){var C=c.createGridClass("OutlineGridView",{menuOrder:{File:110,Edit:100,View:90,Block:50,Settings:20,Navigation:10,Step:5,New:4,Window:3,Instance:1},options:e.clone(k.DEFAULT_GRID_OPTIONS)},{SELECTION:!0,KEYBOARD_SELECTION:!0,PAGINATION:!1,KEYBOARD_NAVIGATION:{CLASS:l},WIDGET:{CLASS:A},EDITOR:{CLASS:g}},{RENDERER:h},null,null);return p([b,a.dcl],{templateString:'\x3cdiv attachTo\x3d"domNode"\x3e\x3c/div\x3e',declaredClass:"xideve.views.OutlineGridView",
rootWidget:null,_lastEvent:null,useRichTextLabel:!1,resizeToParent:!0,onItemSelected:function(a,b){var c=this.getContext(),h=this.getStore();if(c){var h=h.model._getWidget(a),l=c.getSelection();dojo.forEach(l,dojo.hitch(this,function(a){c.deselect(a)}));c.select(h,!0)}},_toggle:function(a,b,c){b=b?"none":"";var h;if(c=F.getFocus(a.domNode.ownerDocument.body))h=c.state;else{c=F.getStatesListCurrent(a.domNode);for(var l=0;l<c.length;l++)if(c[l]){h=c[l];break}}a=new P(a,[{display:b}],h);this.getContext().getCommandStack().execute(a)},
getLabel:function(a){if("myapp"==a.id)return this.getContext().model.fileName;var b="",c=this._getWidget(a);if("xblox/RunScript"===a.type&&c)return c=c.domNode,1==c.mode&&c.targetproperty&&c._targetBlock?c._targetBlock.name+"-\x3e"+c.targetproperty:c&&c.script&&"null"!==c.script?"XBlox::"+c.script:c.targetEvent&&0<c.targetEvent.length?"XBlox::"+c.targetEvent:"XBlox";if("xblox/CSSState"===a.type&&c)return c=c.domNode,"CSS State/"+c.name;if("xblox/StyleState"===a.type&&c)return c=c.domNode,"Style State/"+
c.name;if(c.isWidget)return b=q.getLabel(c);if(b=c.type){a=this.useRichTextLabel?"\x26lt;":"\x3c";var h=this.useRichTextLabel?"\x26gt;":"\x3e",b=0===b.indexOf("html.")?a+b.substring(5)+h:0===b.indexOf("OpenAjax.")?a+b.substring(9)+h:0<b.indexOf(".")?b.substring(b.lastIndexOf(".")+1):c.label||b;(c=q.byId(c.id,this.getContext().getDocument()))&&(c=c.getId())&&(b+=" id\x3d"+c);return b}},getColumns:function(){var a=this;return[{label:"Visibile",field:"visible",sortable:!1,set:function(a,b,c){},get:function(b){return(b=
a._getWidget(b))?"none"!==b.domNode.style.display:!0},editorArgs:{},editor:I},{renderExpando:!0,label:"Name",field:"type",sortable:!1,formatter:function(b,c){var h=a.getLabel(c);if("xblox/RunScript"==c.type){var l=a._getWidget(c);if(l&&(l=l.domNode)){var A=l._targetBlock;if(A){if(-1!=A.declaredClass.indexOf("Command"))return'\x3cspan class\x3d"grid-icon '+A.getIconClass()+'"\x3e\x3c/span\x3e'+A.name+" ("+l.targetevent+")";A.declaredClass.indexOf("Variable")}}}return h}}]},createGrid:function(){e.destroy(this.outlineTree);
dojo.empty(this.domNode);var a=this,b={features:{},className:"outlineGridView dgrid dgrid-dgrid ui-widget",cellNavigation:!1,collection:this.store.filter(this.getRootFilter()),deselectOnRefresh:!1,showHeader:!1,owner:this,resizeToParent:!0,columns:this.getColumns()},c=e.addWidget(C,b,null,this,!0);this.grid=c;this.grid.set("collection",this.store.filter({type:"html.body"}));this.outlineTree=c;c.refresh();this.add(c);this._lastState&&(c.setState(this._lastState),delete this._lastState);c._on("selectionChanged",
function(b){a.onItemSelected(b.selection[0])});c.on("dgrid-datachange",function(b){var h=c.row(b.target);b=b.value;var l=a.getContext(),A=a.getStore();l&&(h=A.model._getWidget(h.data))&&a._toggle(h,!b)})},initStore:function(a){return this.store=new v({data:a.items,model:a.model,provider:a.provider,idProperty:"id",getSync:function(a){var b=this.inherited(arguments),c=this.provider.getModel();!b&&(c=c._getWidget({id:a}))&&(this.putSync(c),b=c);return b},getChildrenSync:function(a){var b=this,c=[];this.model.getChildren(a,
function(a){for(var h=0;h<a.length;h++)b.putSync(a[h]);c=a});return c},getChildren:function(a,b){var c=this;this.model.getChildren(a,function(a){for(var b=0;b<a.length;b++)c.putSync(a[b])});return this.inherited(arguments)},mayHaveChildren:function(a){return this.model.mayHaveChildren(a)}})},getContext:function(){return this.currentEditor?this.currentEditor.getContext():null},_getWidget:function(a){return q.byId(a.id)},getStore:function(){return this.store},getModel:function(){return this.outlineModel},
getRootFilter:function(){return{id:this.rootWidget?this.rootWidget.id:""}},hasItemActions:function(){return!1},_getViewContext:function(){return this.outlineProvider},_getViewActions:function(){return[]},onWidgetChanged:function(a){var b=a.type,c=this.getContext();b===c.WIDGET_ADDED?this.getStore().putSync(a.widget):b===c.WIDGET_REMOVED&&this.getStore().removeSync(a.widget);this.grid&&this.grid.refresh()},onWidgetSelected:function(a){},startup:function(){u.remove(this.domNode,"ui-widget-content");
this.subscribe("/davinci/ui/editorSelected",this.editorChanged);this.subscribe("/davinci/ui/context/pagerebuilt",this._pageRebuilt);this.subscribe(k.EVENTS.ON_WIDGET_CHANGED);this.subscribe("/davinci/ui/widgetSelected",this.onWidgetSelected);this.initReload()},onReloaded:function(){this.reset();this._lastEvent&&this.editorChanged(this._lastEvent)},reset:function(){this.currentEditor=null;delete this.outlineProvider;delete this.outlineTree},editorChanged:function(a){this._lastEvent=a;a=a.editor;if(this.currentEditor){if(this.currentEditor==
a)return;this.outlineTree&&(this._lastState=this.outlineTree.getState(),this.outlineTree.destroy());this.store&&(this.store.destroy(),delete this.store);delete this.outlineProvider;delete this.outlineTree}if(this.currentEditor=a)a.getOutline&&(this.outlineProvider=a.getOutline()),this.outlineProvider?this.createTree():this.containerNode.innerHTML="no outline aviable"},createTree:function(){this.popup&&this.popup.destroyRecursive();!this.outlineProvider&&this.currentEditor&&(this.outlineProvider=this.currentEditor.getOutline(),
this.outlineProvider._outlineView=this);this.outlineProvider&&this.outlineProvider.getModel&&(this.outlineModel=this.outlineProvider.getModel(this.currentEditor));var a=this.outlineModel,b=this.outlineProvider,c=b&&b._context?b._context.rootWidget:null;c||console.error("have no root");var h=this.outlineProvider.getActionsID&&this.outlineProvider.getActionsID()||"davinci.ui.outline";this.initStore({items:[c],model:a,provider:b});this.createGrid();this.popup=n.createPopup({partID:h,domNode:this.outlineTree.domNode,
openCallback:function(){}})},selectionChanged:function(a){!this.publishing["/davinci/ui/selectionChanged"]&&a.length&&a[0].model&&this.outlineTree&&this.outlineTree.selectNode([a[0].model])},_pageRebuilt:function(){if(this.outlineTree){var a=this.outlineTree.get("paths");this.createTree();this.outlineTree.set("paths",a)}},_modelChanged:function(a){this.outlineModel&&this.outlineModel.refresh?this.outlineModel.refresh():this.outlineProvider&&this.outlineProvider.getStore&&(this.outlineModel.store=
this.outlineProvider.getStore(),this.outlineModel.onChange(this.outlineProvider._rootItem))}})})},"xideve/views/VisualEditorPalette":function(){define(["dcl/dcl","xide/utils","xide/factory","./Palette"],function(p,u,n,m){return p(null,{declaredClass:"xideve/views/VisualEditorPalette",_cPalette:null,_cBPalettePane:null,_createPaletteSection:function(d,e,k){d={id:"ContainersSection_Dojo",iconBase64:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAACXBIWXMAAAsTAAALEwEAmpwYAAAKT2lDQ1BQaG90b3Nob3AgSUNDIHByb2ZpbGUAAHjanVNnVFPpFj333vRCS4iAlEtvUhUIIFJCi4AUkSYqIQkQSoghodkVUcERRUUEG8igiAOOjoCMFVEsDIoK2AfkIaKOg6OIisr74Xuja9a89+bN/rXXPues852zzwfACAyWSDNRNYAMqUIeEeCDx8TG4eQuQIEKJHAAEAizZCFz/SMBAPh+PDwrIsAHvgABeNMLCADATZvAMByH/w/qQplcAYCEAcB0kThLCIAUAEB6jkKmAEBGAYCdmCZTAKAEAGDLY2LjAFAtAGAnf+bTAICd+Jl7AQBblCEVAaCRACATZYhEAGg7AKzPVopFAFgwABRmS8Q5ANgtADBJV2ZIALC3AMDOEAuyAAgMADBRiIUpAAR7AGDIIyN4AISZABRG8lc88SuuEOcqAAB4mbI8uSQ5RYFbCC1xB1dXLh4ozkkXKxQ2YQJhmkAuwnmZGTKBNA/g88wAAKCRFRHgg/P9eM4Ors7ONo62Dl8t6r8G/yJiYuP+5c+rcEAAAOF0ftH+LC+zGoA7BoBt/qIl7gRoXgugdfeLZrIPQLUAoOnaV/Nw+H48PEWhkLnZ2eXk5NhKxEJbYcpXff5nwl/AV/1s+X48/Pf14L7iJIEyXYFHBPjgwsz0TKUcz5IJhGLc5o9H/LcL//wd0yLESWK5WCoU41EScY5EmozzMqUiiUKSKcUl0v9k4t8s+wM+3zUAsGo+AXuRLahdYwP2SycQWHTA4vcAAPK7b8HUKAgDgGiD4c93/+8//UegJQCAZkmScQAAXkQkLlTKsz/HCAAARKCBKrBBG/TBGCzABhzBBdzBC/xgNoRCJMTCQhBCCmSAHHJgKayCQiiGzbAdKmAv1EAdNMBRaIaTcA4uwlW4Dj1wD/phCJ7BKLyBCQRByAgTYSHaiAFiilgjjggXmYX4IcFIBBKLJCDJiBRRIkuRNUgxUopUIFVIHfI9cgI5h1xGupE7yAAygvyGvEcxlIGyUT3UDLVDuag3GoRGogvQZHQxmo8WoJvQcrQaPYw2oefQq2gP2o8+Q8cwwOgYBzPEbDAuxsNCsTgsCZNjy7EirAyrxhqwVqwDu4n1Y8+xdwQSgUXACTYEd0IgYR5BSFhMWE7YSKggHCQ0EdoJNwkDhFHCJyKTqEu0JroR+cQYYjIxh1hILCPWEo8TLxB7iEPENyQSiUMyJ7mQAkmxpFTSEtJG0m5SI+ksqZs0SBojk8naZGuyBzmULCAryIXkneTD5DPkG+Qh8lsKnWJAcaT4U+IoUspqShnlEOU05QZlmDJBVaOaUt2ooVQRNY9aQq2htlKvUYeoEzR1mjnNgxZJS6WtopXTGmgXaPdpr+h0uhHdlR5Ol9BX0svpR+iX6AP0dwwNhhWDx4hnKBmbGAcYZxl3GK+YTKYZ04sZx1QwNzHrmOeZD5lvVVgqtip8FZHKCpVKlSaVGyovVKmqpqreqgtV81XLVI+pXlN9rkZVM1PjqQnUlqtVqp1Q61MbU2epO6iHqmeob1Q/pH5Z/YkGWcNMw09DpFGgsV/jvMYgC2MZs3gsIWsNq4Z1gTXEJrHN2Xx2KruY/R27iz2qqaE5QzNKM1ezUvOUZj8H45hx+Jx0TgnnKKeX836K3hTvKeIpG6Y0TLkxZVxrqpaXllirSKtRq0frvTau7aedpr1Fu1n7gQ5Bx0onXCdHZ4/OBZ3nU9lT3acKpxZNPTr1ri6qa6UbobtEd79up+6Ynr5egJ5Mb6feeb3n+hx9L/1U/W36p/VHDFgGswwkBtsMzhg8xTVxbzwdL8fb8VFDXcNAQ6VhlWGX4YSRudE8o9VGjUYPjGnGXOMk423GbcajJgYmISZLTepN7ppSTbmmKaY7TDtMx83MzaLN1pk1mz0x1zLnm+eb15vft2BaeFostqi2uGVJsuRaplnutrxuhVo5WaVYVVpds0atna0l1rutu6cRp7lOk06rntZnw7Dxtsm2qbcZsOXYBtuutm22fWFnYhdnt8Wuw+6TvZN9un2N/T0HDYfZDqsdWh1+c7RyFDpWOt6azpzuP33F9JbpL2dYzxDP2DPjthPLKcRpnVOb00dnF2e5c4PziIuJS4LLLpc+Lpsbxt3IveRKdPVxXeF60vWdm7Obwu2o26/uNu5p7ofcn8w0nymeWTNz0MPIQ+BR5dE/C5+VMGvfrH5PQ0+BZ7XnIy9jL5FXrdewt6V3qvdh7xc+9j5yn+M+4zw33jLeWV/MN8C3yLfLT8Nvnl+F30N/I/9k/3r/0QCngCUBZwOJgUGBWwL7+Hp8Ib+OPzrbZfay2e1BjKC5QRVBj4KtguXBrSFoyOyQrSH355jOkc5pDoVQfujW0Adh5mGLw34MJ4WHhVeGP45wiFga0TGXNXfR3ENz30T6RJZE3ptnMU85ry1KNSo+qi5qPNo3ujS6P8YuZlnM1VidWElsSxw5LiquNm5svt/87fOH4p3iC+N7F5gvyF1weaHOwvSFpxapLhIsOpZATIhOOJTwQRAqqBaMJfITdyWOCnnCHcJnIi/RNtGI2ENcKh5O8kgqTXqS7JG8NXkkxTOlLOW5hCepkLxMDUzdmzqeFpp2IG0yPTq9MYOSkZBxQqohTZO2Z+pn5mZ2y6xlhbL+xW6Lty8elQfJa7OQrAVZLQq2QqboVFoo1yoHsmdlV2a/zYnKOZarnivN7cyzytuQN5zvn//tEsIS4ZK2pYZLVy0dWOa9rGo5sjxxedsK4xUFK4ZWBqw8uIq2Km3VT6vtV5eufr0mek1rgV7ByoLBtQFr6wtVCuWFfevc1+1dT1gvWd+1YfqGnRs+FYmKrhTbF5cVf9go3HjlG4dvyr+Z3JS0qavEuWTPZtJm6ebeLZ5bDpaql+aXDm4N2dq0Dd9WtO319kXbL5fNKNu7g7ZDuaO/PLi8ZafJzs07P1SkVPRU+lQ27tLdtWHX+G7R7ht7vPY07NXbW7z3/T7JvttVAVVN1WbVZftJ+7P3P66Jqun4lvttXa1ObXHtxwPSA/0HIw6217nU1R3SPVRSj9Yr60cOxx++/p3vdy0NNg1VjZzG4iNwRHnk6fcJ3/ceDTradox7rOEH0x92HWcdL2pCmvKaRptTmvtbYlu6T8w+0dbq3nr8R9sfD5w0PFl5SvNUyWna6YLTk2fyz4ydlZ19fi753GDborZ752PO32oPb++6EHTh0kX/i+c7vDvOXPK4dPKy2+UTV7hXmq86X23qdOo8/pPTT8e7nLuarrlca7nuer21e2b36RueN87d9L158Rb/1tWeOT3dvfN6b/fF9/XfFt1+cif9zsu72Xcn7q28T7xf9EDtQdlD3YfVP1v+3Njv3H9qwHeg89HcR/cGhYPP/pH1jw9DBY+Zj8uGDYbrnjg+OTniP3L96fynQ89kzyaeF/6i/suuFxYvfvjV69fO0ZjRoZfyl5O/bXyl/erA6xmv28bCxh6+yXgzMV70VvvtwXfcdx3vo98PT+R8IH8o/2j5sfVT0Kf7kxmTk/8EA5jz/GMzLdsAAAAgY0hSTQAAeiUAAICDAAD5/wAAgOkAAHUwAADqYAAAOpgAABdvkl/FRgAAAg9JREFUeNp8ks1rE0EYxn9bE/xqikI0lITiQW+VImoONmCQtoonUbAglFDEUtlLxdo/wUNRD0Iw1kOIEmj6D9ir2FRQi4j0lILQJoimRfJB9mNmOx42iWsT+8Iw7DwPv32feUdTSuGtyeQKaT3GZHJlGEgA40AOyKT1WL6lt0rbC2hC9IFg7/a1c5HAib5Dc+WqOb/8pVjb3K4H03os6fVqXToYHgj2RiYun34KhD1S6c27jYeb2/ViWo/lW4c9dFYiPtgfMIQTNoRDw3YwbIeGcMLxwf5AM1a7fF0A436fL15pSNAUGqCUhqYp/P4Dc0AImNoPkNvaqX8MHDn4SkOBiwA0Kg1rHoh6zd0iZD4VyrWaKUpVQ1I1bSqGpGKI0udCuQZk/gu4+XhZpfXY2amRM88vnjq2vlMz7xn2biF41L8+FAl8f5a4cFw4u/mrj3KqK0BYNkDqzv3UyR6N32uFn9H334qhtY1fhyf0lzEgVd76oQDaEKVUe43NLirP97Rnn97rG5tdRCnldrCw9EFd0TNKNEwARmayCkg1tRdAavRBVo3OZAFwpMQR8m+E12+/YjcMzW4CpBsFF7AKgG1aCNM9l4bd9vjc7FZ73gDCtDpGIw27Oc5/9R6AuzeiSFsqRwjX7DH0hYK0fiKbHSSuDyEtq/MSu63zt56o/fRuL5HWxS4srTJ1+xL71Z8BAL+kU+9a36VRAAAAAElFTkSuQmCC",
includes:["RunScript","BorderContainer"],items:[],name:d,preset:e.preset,presetId:k};e.subsections.push(d);return d},_createPaletteComponent:function(d,e){return{id:"containers",name:d,preset:{collections:[{id:"xblox",show:!0},{id:"delite",show:!0},{id:"dijit",show:!0},{id:"dojo",show:!0}],sections:"$"+e+"Sections"},presetId:e,subsections:[]}},_createPaletteBlockItem:function(d,e){var k=d.shareTitle,g={$library:{_maqGetString:function(d){return k},widgets:[],collections:{}},category:"containers",
allowedChild:"",collection:"xblox",description:"",iconBase64:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAPJJREFUeNpi/P//P8PCgzf/bzv3nIFU4GUkycACYoA01wYZkGxA87oLEAP+//vHsPvWa5IN+P/vP8QAbxNphi0nHzL8R5UGYkY4jxEqgizvay4HMWDj0QcMs4qcgUKMqKqg+hmBYv8ZkYyDmp3WvwdiwL+/f8HiohzMRDv/zY+/DP9+/2VgAhvw5y8DOQBkMdQF/xh+Ac14/u0P3AfIfmaEOvs/VJAR6lOQAYywdLBq5zWSXRDmroVIB53pjuSng98/fpKVDkD6wAb4WykAXfGUZANA+qiTlKnihVU7r4DjC2f0IaVIWFSGumlBopESABBgAGY0fipQlZCHAAAAAElFTkSuQmCC",
iconLarge:"dojo/1.8/resources/imagesLarge/AccordionContainer.png",iconLargeBase64:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADIAAAAyCAIAAACRXR/mAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAANxJREFUeNrs17EKwjAQxvGoIZPdi0N3wcFR6NhNn8Wn8VnqZMeimw6ikyCdSn0BwTSxRRzcuvkvXCD7j+9y5G6Q7vaKd3Rzl8kCZdpmh5ZVVQ9iWkEwJrK898LqzHIOyWrykrQ6s6y1NNZQIQ+6E52k1fe0jpc7jnVTE2gnruYhypSeypaljUHOW0YxO5HJ8kyWkiL2Py3m26odlOWkiH1fMWpmWs9XnV9LCCieht/1ddT+1esk+rtpkxUfDHQhE5awhCUsYQlLWGiW/hkqaKx4FuHSys8FrYhvAQYAB2RPPyLZy+IAAAAASUVORK5CYII\x3d",
iconHTML:d.getBlockIcon(),initialSize:"auto",inlineEdit:"",name:k,properties:{style:"position:relative",ignorePosition:!0,blockid:d.id,scopeid:d.scope.id,targetevent:"click",enabled:!0,stop:!0,script:d.name+"("+d.shareTitle+")",block:d.scope.mount.replace("/","")+"://"+d.scope.path.replace("./",""),sourceevent:"onDriverVariableChanged",sourceeventvaluepath:"item.value",sourceeventnamepath:"item.title",bidirectional:!0,targetvariable:"Volume"},section:{},tags:"Scripts",type:"xblox/RunScript",widgetClass:"dijit",
children:[],helper:"",ignoreMeta:!0,forceShow:!0,userData:{block:d,widgetClass:"dijit"}};g.$library.widgets.push(g);g.$library.collections.dijit={name:"Dijit"};g.$library.collections.xblox={name:"XBLOX"};g.$library.collections.delite={name:"DELITE"};e.items.push(g);return g},_blockScopeToPalette:function(d,e){for(var k=d.getBlockStore(),g=d.allGroups(),v=this._createPaletteComponent(d.path,e),m=0;m<g.length;m++){var q=k.query({group:g[m],shareTitle:/\S+/});if(q.length)for(var b=this._createPaletteSection(g[m],
v,e),a=0;a<q.length;a++)this._createPaletteBlockItem(q[a],b)}return v},_buildBlockPalette:function(d){this.getMainView();var e=this.getLeftContainer();this._cBPalettePane||(this._cBPalettePane=n.createPane("Behaviours","fa-cube",e,{parentContainer:e}));this._cPalette&&u.destroy(this._cPalette);this._cPalette=e=u.addWidget(m,{},this,this._cBPalettePane,!0);e._init();var k=d.context.getCompType(),g=d.blockScopes,v=[];if(g&&g.length)for(var I=0;I<g.length;I++){var q=this._blockScopeToPalette(g[I],k);
q&&v.push(q)}if(v.length)for(I=0;I<v.length;I++)e._createPalette(v[I],k);e._context=d.context;e.context=d.context;e._presetSections={};e._filter();e.updatePaletteVisibility()}})})},"xideve/views/Palette":function(){define("dojo/_base/declare dojo/_base/lang xide/layout/ContentPane xide/views/_EditorBase xide/views/TextEditor xide/utils davinci/ve/palette/Palette".split(" "),function(p,u,n,m,d,e,k){return p("xideve/views/Palette",[k],{_init:function(){delete this._loaded;this._presetSections={};this._createFolderTemplate()}})})},
"xideve/views/VisualEditorSourceEditor":function(){define(["dcl/dcl","xace/views/Editor","xide/utils","davinci/model/Factory"],function(p,u,n,m){return p(null,{declaredClass:"xideve/views/VisualEditorSourceEditor",createHTMLEditor:function(d,e,k){var g=this;e=n.addWidget(u,{__permissions:[],options:{filePath:k.path},config:g.config,delegate:g,owner:g,parentContainer:d,ctx:g.ctx,style:"padding:0px;",item:k,resizeToParent:!0,model:m.newHTML({url:e}),selectModel:function(d){},setVisible:function(){},
setContent:function(d,e){this.model.ctx=g.ctx;this.model.fileName=d;this.model.setText(e)},store:null,storeDelegate:{getContent:function(d){g.ctx.getFileManager().getContent(k.mount,k.path,d)},saveContent:function(d,e,q){g.ctx.getFileManager().setContent(k.mount,k.path,d,e)}},title:"notitle",closable:!0},this,d,!0);g.textEditor=e;d.add(e);return e}})})},"xace/views/Editor":function(){define("dcl/dcl xide/types xide/utils xaction/ActionProvider xace/views/ACEEditor xace/views/_Actions xaction/Toolbar xide/mixins/PersistenceMixin".split(" "),
function(p,u,n,m,d,e,k,g){g=p([g.dcl],{declaredClass:"xace.views.EditorPersistence",defaultPrefenceTheme:"idle_fingers",defaultPrefenceFontSize:14,saveValueInPreferences:!0,getDefaultPreferences:function(){return n.mixin({theme:this.defaultPrefenceTheme,fontSize:this.defaultPrefenceFontSize},this.saveValueInPreferences?{value:this.get("value")}:null)},onAfterAction:function(d){var e=this.getEditor().getTheme();this.savePreferences({theme:e.replace("ace/theme/",""),fontSize:this.getEditor().getFontSize()});
return this.inherited(arguments)},toPreferenceId:function(d){if(!d){var e=$("body");d="xTheme-";var g;_.each(["blue","gray","white","transparent"],function(b){g=d+b;e.hasClass(g)&&(d=g)})}return(d||this.cookiePrefix||"")+"_xace"},getDefaultOptions:function(){var d=this.inherited(arguments),e=this.loadPreferences(null);e&&n.mixin(d,e)||this.savePreferences(this.getDefaultPreferences());return d}});p=p([e,d,m.dcl,g,k.dcl],{toolbarArgs:{actionFilter:{}},getBreadcrumbPath:function(){if(this.item)return{path:n.replaceAll("/",
"",this.item.mount)+":/"+this.item.path.replace("./","/")}},tabOrder:{Home:100,View:50,Settings:20},menuOrder:{File:110,Edit:100,View:90,Block:50,Settings:20,Navigation:10,Editor:9,Step:5,New:4,Window:3,Help:2},declaredClass:"xace/views/Editor",options:null,loadingIcon:"fa-spinner fa-spin",iconClassNormal:"fa-code",templateString:'\x3cdiv attachTo\x3d"template" class\x3d"grid-template widget" style\x3d"width: 100%;height: 100%;overflow: hidden !important;position: relative;padding: 0px;margin: 0px"\x3e\x3cdiv attachTo\x3d"header" class\x3d"view-header row bg-opaque" style\x3d"height: auto;width:inherit;height:auto;min-height: 33px"\x3e\x3c/div\x3e\x3cdiv attachTo\x3d"aceNode" class\x3d"view-body row" style\x3d"height:100%;width: 100%;position: relative;"\x3e\x3c/div\x3e\x3cdiv attachTo\x3d"footer" class\x3d"view-footer" style\x3d"position: absolute;bottom: 0px;width: 100%"\x3e\x3c/div\x3e\x3c/div\x3e',
getContent:function(d,e,g){this.storeDelegate?this.storeDelegate.getContent(function(b){e(b)},d||this.item):g&&g("Editor::getContent : Have no store delegate!")},saveContent:function(d,e,g){var b=this;this.set("iconClass","fa-spinner fa-spin");var a=d||this.get("value");if(this.storeDelegate)return this.storeDelegate.saveContent(a,function(){b.set("iconClass",b.iconClassNormal);b.lastSavedContent=a;b.onContentChange(a);b.publish(u.EVENTS.ON_FILE_CONTENT_CHANGED,{path:b.options.filePath,item:b.item,
content:a,editor:b},b)},null,b.item);g&&g("Editor::saveContent : Have no store delegate!");return!1},addCommands:function(){var d=this.getAce(),e=this;ace.require("ace/config").init();var g=[];this.hasHelp&&g.push({name:"showKeyboardShortcuts",bindKey:{win:"Ctrl-Alt-h",mac:"Command-Alt-h"},exec:function(b){e.showHelp(b)}});this.hasConsole&&g.push({name:"gotoline",bindKey:{win:"Ctrl-L",mac:"Command-L"},exec:function(b,a){if("object"==typeof a){var c=this.name+" "+b.getCursorPosition().row;b.cmdLine.setValue(c,
1);b.cmdLine.focus()}else a=parseInt(a,10),isNaN(a)||b.gotoLine(a)},readOnly:!0});d.commands.addCommands(g)},getWebRoot:function(){return this.ctx.getResourceManager().getVariable(u.RESOURCE_VARIABLES.APP_URL)},resize:function(){return this._resize()},onResize:function(){return this._resize()},_resize:function(){var d=this.getParent();this._isMaximized?n.resizeTo(this,this._maximizeContainer,!0,!0):d&&n.resizeTo(this,d,!0,!0);var d=this.getToolbar(),e=!1,g=$(this.aceNode);this._isMaximized&&d&&n.resizeTo(d,
this.header,!0,!0);!d||d&&d.isEmpty()?e=!0:d&&(n.resizeTo(d,this.header,!1,!0),d.resize(),n.resizeTo(this.header,d,!0,!1));var b=$(this.domNode).height(),e=1==e?0:$(this.header).height(),a=$(this.footer).height(),b=b-e-a;d&&(b-=4);50<b?g.height(b+"px"):g.height("inherited")},__set:function(d,e){var g=this.inherited(arguments);if("iconClass"===d){var b=this._parent;b&&b.icon&&this._parent.icon(e)}return g},__get:function(d){if("value"===d){var e=this.getEditor();return(e=e?e.session:null)?e.getValue():
null}return this.inherited(arguments)}});p.DEFAULT_PERMISSIONS=e.DEFAULT_PERMISSIONS;return p})},"xace/views/ACEEditor":function(){define("dcl/dcl dojo/has dojo/dom-construct xide/utils xide/types xide/widgets/TemplatedWidgetBase xace/views/_Split xaction/DefaultActions xace/views/_AceMultiDocs".split(" "),function(p,u,n,m,d,e,k,g,v){var I={};e=p([e],{resizeToParent:!0,templateString:'\x3cdiv attachTo\x3d"aceNode" style\x3d"width: 100%;height: 100%" class\x3d""\x3e\x3c/div\x3e'});v=p(v,{declaredClass:"xace/views/EditorInterface",
editorSession:null,_lastValue:null,enableMultiDocuments:function(){this.addFileCompleter().addDocument("asdf.js","var xxxTop \x3d 2*3;")},loadScript:function(b,a,c){a=document.createElement("script");a.type="application/javascript";a.src=b;a.onload=function(){c&&c()};document.body.appendChild(a)},setMode:function(b,a,c){if((a=a||this.ctx||window.sctx)&&a.getResourceManager()){var h=this;if(I[b])h.set("mode",b),c&&c(b);else{var l=null;(l=a.getResourceManager().getVariable(d.RESOURCE_VARIABLES.ACE))?
l=l+"/mode-"+b+".js":(a=a.getResourceManager().getVariable(d.RESOURCE_VARIABLES.APP_URL),u("debug"),l=a+"/xfile/ext/ace//mode-"+b+".js");this.loadScript(l,null,function(){I[b]=!0;h.set("mode",b);c&&c(b)})}}else console.error("have no resource manager!")},get:function(b){if("value"===b){var a=this.getEditor();return(a=a?a.session:null)?a.getValue():null}return this.inherited(arguments)},set:function(b,a){var c=this,h=this.getEditor(),l=this.editorSession;if("iconClass"===b){var A=this._parent;A&&A.icon&&
this._parent.icon(a)}if(h&&l)if(A=h.container,"item"==b&&(l.setUseWorker(!1),c.getContent(a,function(b){var h=c._getMode(a.path);c.set("value",b);c.setMode(h);l.setUseWorker(c.options.useWorker)})),"value"==b&&a)l.setValue(a);else if("theme"==b)"string"==typeof a&&(a="ace/theme/"+a),h.setTheme(a),this.split&&this.split.setTheme(a);else if("mode"==b)try{ace.require(["ace/mode/"+a],function(a){a&&a.Mode&&c.split.$editors.forEach(function(b){b.session.setMode(new a.Mode)})})}catch(d){console.error("ace mode failed : "+
a)}else"readOnly"==b?h.setReadOnly(a):"tabSize"==b?l.setTabSize(a):"softTabs"==b?l.setUseSoftTabs(a):"wordWrap"==b?l.setUseWrapMode(a):"printMargin"==b?h.renderer.setPrintMarginColumn(a):"showPrintMargin"==b?h.setShowPrintMargin(a):"highlightActiveLine"==b?h.setHighlightActiveLine(a):"fontSize"==b?$(A).css(b,a):"showIntentGuides"==b?h.setDisplayIndentGuides(a):"elasticTabstops"==b?h.setOption("useElasticTabstops",a):"useIncrementalSearch"==b?h.setOption("useIncrementalSearch",a):"showGutter"==b&&
h.renderer.setShowGutter(a);return this.inherited("set",arguments)},_getMode:function(b){b=b||this.fileName;var a="javascript";if(b){a=m.getFileExtension(b)||"js";if("js"===a||"xblox"===a)a="javascript";if("h"===a||"cpp"===a)a="c_cpp";if("html"===a||"cfhtml"===a||"dhtml"===a)a="html";"cp"===a&&(a="xml");"md"===a&&(a="markdown");"hbs"===a&&(a="handlebars")}return a},setOptions:function(b){this.options=b;_.each(b,function(a,b){this.set(b,a)},this);var a=this.getEditor();a&&b.aceOptions&&(a.setOptions(b.aceOptions),
a.session.setUseWorker(b.useWorker),a.setOptions({enableBasicAutocompletion:!0,enableSnippets:!0,enableLiveAutocompletion:!0}),this.setMode(b.mode));return this.options},getOptions:function(){return this.options},onContentChange:function(b){this._parent&&this._parent.set&&this._parent.set("changed",b!==this.lastSavedContent)},onDidChange:function(){var b=this.get("value");this._lastValue!==b&&(this._lastValue=b,this._emit("change",b),this.onContentChange(b))},getDefaultOptions:function(b,a){var c=
this;return m.mixin({region:"center",style:"margin: 0; padding: 0; position:relative;overflow: auto;height:inherit;width:inherit;text-align:left;",readOnly:!1,tabSize:2,wordWrap:!1,showPrintMargin:!1,highlightActiveLine:!0,fontSize:16,showGutter:!0,showLineNumbers:!0,useWorker:!0,showInvisibles:!1,displayIndentGuides:!0,useSoftTabs:!0,fileName:"none",mode:"javascript",value:b||this.value||"No value",theme:"idle_fingers",splits:1,useElasticTabstops:!1,animatedScroll:!1,highlightActive:!0,aceOptions:{enableBasicAutocompletion:!0,
enableSnippets:!0,enableLiveAutocompletion:!0},onLoad:function(a){a.$blockScrolling=Infinity},onDidChange:function(){var a=c.get("value");if(a!==c.lastSavedContent)c.onContentChange(a)},onPrefsChanged:function(){c.setPreferences&&c.setPreferences()}},a)},getEditor:function(b){if(this.split)return null==b?this.split.getCurrentEditor():this.split.getEditor(null!=b?b:0);if(this.editor)return this.editor},resize:function(b,a,c){b=this.options||{};this.onResize&&this.onResize();return this.debounce("resize",
function(){var a=this.getEditor(),b=this.split||this.editor;if(a&&this.aceNode&&a.container)return a&&m.resizeTo(a.container,this.aceNode,!0,!0),b?b.resize():null;this.resize_debounced.cancel();this.resize_debounced=null}.bind(this),b.resizeDelay||300,null)},getAce:function(){return this.getEditor()},addBasicCommands:function(b){b=b||this.getEditor();var a=this,c=ace.require("ace/ext/whitespace");this._whiteSpaceExt=c;b.commands.addCommands(c.commands);b.commands.addCommands([{name:"gotoline",bindKey:{win:"Ctrl-L",
mac:"Command-L"},exec:function(a,b){if("object"==typeof b){var c=this.name+" "+a.getCursorPosition().row;a.cmdLine.setValue(c,1);a.cmdLine.focus()}else b=parseInt(b,10),isNaN(b)||a.gotoLine(b)},readOnly:!0},{name:"snippet",bindKey:{win:"Alt-C",mac:"Command-Alt-C"},exec:function(a,b){if("object"==typeof b)a.cmdLine.setValue("snippet ",1),a.cmdLine.focus();else{var c=snippetManager.getSnippetByName(b,a);c&&snippetManager.insertSnippet(a,c.content)}},readOnly:!0},{name:"increaseFontSize",bindKey:"Ctrl-+",
exec:function(b){b.setFontSize(b.getFontSize()+1);a.onAfterAction()}},{name:"decreaseFontSize",bindKey:"Ctrl+-",exec:function(b){b.setFontSize(b.getFontSize()-1);a.onAfterAction()}},{name:"resetFontSize",bindKey:"Ctrl+0",exec:function(b){b.setFontSize(12);a.onAfterAction()}}])},onEditorCreated:function(b,a){var c=this;b.getSelectedText=function(){return c.editorSession.getTextRange(this.getSelectionRange())};b.on("change",function(){c.onDidChange(arguments)});this.addBasicCommands(b);b.setFontSize(a.fontSize);
b.$blockScrolling=Infinity;this._whiteSpaceExt&&this._whiteSpaceExt.detectIndentation(b.session)},destroy:function(){var b=this.getEditor();b&&b.destroy();(b=this.resize_debounced)&&b.cancel()},getOptionsMixed:function(b){var a=this.getPreferences?this.getPreferences():{},c=this.getDefaultOptions(this.value,b||this.options);m.mixin(c,b);m.mixin(c,a);c.mode=this._getMode(c.fileName);return c},createEditor:function(b,a){this.set("iconClass",this.iconClassNormal);if(this.editor||this.split)return this.editor||
this.split;var c=this.getPreferences?this.getPreferences():{},h=this.getDefaultOptions(a);m.mixin(h,b);m.mixin(h,c);h.mode=this._getMode(h.fileName);c=h.targetNode||n.create("div");$(c).css({padding:"0",margin:"0",height:"100%",width:"100%"});this.aceNode.appendChild(c);var l=ace.require("ace/config"),A=null,d=null;ace.require("ace/ext/language_tools");try{this.split=A=new (k.getSplitter())(c,null,1),this._aceConfig=l,l.init(),this.editor=d=A.getEditor(0),this.editorSession=this.editor.getSession(),
a&&this.editorSession.setValue(a),A&&A.setSplits(h.splits)}catch(e){logError(e,"error creating editor")}this.setOptions(h);this.onEditorCreated(d,h);return d},addAutoCompleter:function(b){ace.require("ace/ext/language_tools").addCompleter({getCompletions:function(a,c,h,l,A){0===l.length?A(null,[]):b?A(null,b.map(function(a){return{name:a.value,value:a.word,meta:a.meta}})):A(null,[])}})}});var q=p(null,{declaredClass:"xace/views/ACE",onLoaded:function(){this.set("iconClass",this.iconClassNormal)},
getKeyTarget:function(){return this.aceNode},startup:function(){this.aceNode.id=m.createUUID();if(this.permissions){var b=g.getDefaultActions(this.permissions,this,this),b=b.concat(this.getEditorActions(this.permissions));this.addActions(b)}this.iconClassNormal=""+this.iconClass;this.set("iconClass","fa-spinner fa-spin");var a=this,c=this.options||{};if(this.item||null!=this.value)null!=this.value?(this.lastSavedContent=""+this.value,a.createEditor(a.options||null,this.value)):this.getContent(this.item,
function(b){a.lastSavedContent=b;a.createEditor(a.options||c,b)},function(b){a.createEditor(a.options||null,"");logError(b,"error loading content from file")})}});p=p([e,q,v],{});p.EditorImplementation=v;p.Editor=q;p.Container=e;p.Splitter=k;return p})},"xace/views/_Split":function(){define(["dcl/dcl"],function(p){var u=null;p=p(null,{declaredClass:"xace/views/Split"});p.getSplitter=function(){function n(b,a){this.$u=b;this.$doc=a}if(u)return u;var m=ace.require,d=m("ace/lib/oop"),e=m("ace/lib/lang"),
k=m("ace/lib/event_emitter").EventEmitter,g=m("ace/editor").Editor,v=m("ace/virtual_renderer").VirtualRenderer,I=m("ace/edit_session").EditSession,q=m("ace/undomanager").UndoManager;m("ace/keyboard/hash_handler");m=function(b,a,c){this.BELOW=1;this.BESIDE=0;this.$container=b;this.$theme=a;this.$splits=0;this.$editorCSS="";this.$editors=[];this.$orientation=this.BESIDE;this.setSplits(c||1);this.$cEditor=this.$editors[0];this.on("focus",function(a){this.$cEditor=a}.bind(this))};(function(){d.implement(this,
k);this.$createEditor=function(){var b=document.createElement("div");b.className=this.$editorCSS;b.style.cssText="position: absolute; top:0px; bottom:0px";this.$container.appendChild(b);var a=new g(new v(b,this.$theme));a.on("focus",function(){this._emit("focus",a)}.bind(this));this.$editors.push(a);a.session.setUndoManager(new q);a.setFontSize(this.$fontSize);return a};this.setSplits=function(b){var a;if(1>b)throw"The number of splits have to be \x3e 0!";if(b!=this.$splits){if(b>this.$splits){for(;this.$splits<
this.$editors.length&&this.$splits<b;)a=this.$editors[this.$splits],this.$container.appendChild(a.container),a.setFontSize(this.$fontSize),this.$splits++;for(;this.$splits<b;)this.$createEditor(),this.$splits++}else for(;this.$splits>b;)a=this.$editors[this.$splits-1],this.$container.removeChild(a.container),this.$splits--;this.resize()}};this.getSplits=function(){return this.$splits};this.getEditor=function(b){return this.$editors[b]};this.getCurrentEditor=function(){return this.$cEditor};this.focus=
function(){this.$cEditor.focus()};this.blur=function(){this.$cEditor.blur()};this.setSessionOption=function(b,a){this.$editors.forEach(function(c){c=c.session;"mode"==b&&c.setMode(a)})};this.setTheme=function(b){this.$editors.forEach(function(a){a.setTheme(b)})};this.setKeyboardHandler=function(b){this.$editors.forEach(function(a){a.setKeyboardHandler(b)})};this.forEach=function(b,a){this.$editors.forEach(b,a)};this.$fontSize="";this.setFontSize=function(b){this.$fontSize=b;this.forEach(function(a){a.setFontSize(b)})};
this.$cloneSession=function(b){var a=new I(b.getDocument(),b.getMode()),c=b.getUndoManager();c&&(c=new n(c,a),a.setUndoManager(c));a.$informUndoManager=e.delayedCall(function(){a.$deltas=[]});a.setTabSize(b.getTabSize());a.setUseSoftTabs(b.getUseSoftTabs());a.setOverwrite(b.getOverwrite());a.setBreakpoints(b.getBreakpoints());a.setUseWrapMode(b.getUseWrapMode());a.setUseWorker(b.getUseWorker());a.setWrapLimitRange(b.$wrapLimitRange.min,b.$wrapLimitRange.max);a.$foldData=b.$cloneFoldData();return a};
this.setSession=function(b,a){var c;c=null==a?this.$cEditor:this.$editors[a];this.$editors.some(function(a){return a.session===b})&&(b=this.$cloneSession(b));c.setSession(b);return b};this.getOrientation=function(){return this.$orientation};this.setOrientation=function(b){this.$orientation!=b&&(this.$orientation=b,this.resize())};this.resize=function(){var b=this.$container.clientWidth,a=this.$container.clientHeight,c;if(this.$orientation==this.BESIDE){b/=this.$splits;this.diffGutter&&(b-=60/this.$splits);
for(var h=0;h<this.$splits;h++){c=this.$editors[h];c.container.style.width=b+"px";c.container.style.top="0px";c.container.style.left=h*b+"px";1==h&&this.diffGutter&&(c.container.style.left=60+h*b+"px",this.diffGutter.style.left=h*b+"px");if(!a)break;$(c.container).css("height",a+"px");var l=$(c.container).find(".ace_content");c.resize();l.css("height",a+"px")}}else for(a/=this.$splits,h=0;h<this.$splits;h++)c=this.$editors[h],c.container.style.width=b+"px",c.container.style.top=h*a+"px",c.container.style.left=
"0px",c.container.style.height=a+"px",c.resize()}}).call(m.prototype);(function(){this.execute=function(b){this.$u.execute(b)};this.undo=function(){var b=this.$u.undo(!0);b&&this.$doc.selection.setSelectionRange(b)};this.redo=function(){var b=this.$u.redo(!0);b&&this.$doc.selection.setSelectionRange(b)};this.reset=function(){this.$u.reset()};this.hasUndo=function(){return this.$u.hasUndo()};this.hasRedo=function(){return this.$u.hasRedo()}}).call(n.prototype);return u=m};return p})},"xace/views/_AceMultiDocs":function(){define(["dcl/dcl",
"xdojo/declare","module","xace/base_handler","xace/complete_util"],function(p,u,n,m,d){function e(a,b,c,d){b=b.split(/[^a-zA-Z_0-9\$]+/);for(var e=0;e<b.length;e++){var C=b[e];C&&(Object.prototype.hasOwnProperty.call(c,C)?c[C]++:(c[C]=1,d[C]={}),d[C][a]=!0)}return c}function k(a){var b=v[a];if(b){for(var c in b)I[c]-=b[c],delete q[c][a],0===I[c]&&(delete I[c],delete q[c]);delete v[a]}}function g(a,b){v[a]||(8E5<b.size?delete v[a]:(v[a]=e(a,b,{},{}),e(a,b,I,q)))}var v={},I={},q={},b,a,c=n.exports=
Object.create(m);c.handlesLanguage=function(a){return!0};c.handlesEditor=function(){return this.HANDLES_ANY};c.getMaxFileSizeSupported=function(){return 1E6};c.onDocumentOpen=function(a,b,c,d){v[a]||g(a,b.getValue());d()};c.addDocument=function(a,b){v[a]||g(a,b)};c.onDocumentClose=function(c,l){k(c);c==b&&(a=null);l()};c.analyze=function(c,l,d,e){a&&this.path!==b&&(k(b),g(b,a),a=null);b=this.path;a=c;d()};c.complete=function(a,b,c,e,g){a=a.getSession().getLine(c.row);c=d.retrievePrecedingIdentifier(a,
c.column,this.$getIdentifierRegex());var C=I;a=[];for(var x in C)a.push(x);x=d.findCompletions(c,a);var v=this.path;x=x.filter(function(a){return!q[a][v]});x=x.slice(0,100);g(x.filter(function(a){return!a.match(/^[0-9$_\/]/)}).map(function(a){var b=(Object.keys(q[a])[0]||"[unknown]").split("/");return{name:a,value:a,icon:null,score:C[a],meta:b[b.length-1],priority:0,isGeneric:!0}}))};c.getCompletions=function(a,b,d,e,g){var C=null;c.complete(a,null,d,null,function(a){C=a});g(null,C)};p=p(null,{declaredClass:"xide.views._AceMultiDocs",
didAddMCompleter:!1,multiFileCompleter:null,addFileCompleter:function(){var a=null;this.didAddMCompleter||(this.multiFileCompleter=a=c,ace.require("ace/ext/language_tools").addCompleter(a),this.didAddMCompleter=!0);return a}});p.completer=c;return p})},"xace/base_handler":function(){define(function(p,u,n){n.exports={HANDLES_ANY:0,HANDLES_EDITOR:1,HANDLES_IMMEDIATE:2,HANDLES_EDITOR_AND_IMMEDIATE:3,language:null,path:null,workspaceDir:null,doc:null,isFeatureEnabled:function(m){return!disabledFeatures[m]},
$getIdentifierRegex:function(){return null},completeUpdate:function(m){throw Error("Use worker_util.completeUpdate instead()");},handlesLanguage:function(m){throw Error("base_handler.handlesLanguage() is not overridden");},handlesEditor:function(){return this.HANDLES_EDITOR},getMaxFileSizeSupported:function(){return 8E5},isParsingSupported:function(){return!1},getIdentifierRegex:function(){return null},getCompletionRegex:function(){return null},getTooltipRegex:function(){return null},parse:function(m,
d){d()},findNode:function(m,d,e){e()},getPos:function(m,d){d()},init:function(m){m()},onUpdate:function(m,d){d()},onDocumentOpen:function(m,d,e,k){k()},onDocumentClose:function(m,d){d()},onCursorMove:function(m,d,e,k,g){g()},tooltip:function(m,d,e,k,g){g()},highlightOccurrences:function(m,d,e,k,g){g()},getRefactorings:function(m,d,e,k,g){g()},outline:function(m,d,e){e()},hierarchy:function(m,d,e){e()},complete:function(m,d,e,k,g){g()},analyze:function(m,d,e,k){e()},getRenamePositions:function(m,d,
e,k,g){g()},onRenameBegin:function(m,d){d()},commitRename:function(m,d,e,k,g){g()},onRenameCancel:function(m){m()},codeFormat:function(m,d){d()},jumpToDefinition:function(m,d,e,k,g){g()},getResolutions:function(m,d,e,k){k()},hasResolution:function(m,d,e,k){k()},getInspectExpression:function(m,d,e,k,g){g()}};for(f in n.exports)"function"===typeof n.exports[f]&&(n.exports[f].base_handler=!0)})},"xace/complete_util":function(){define(function(p,u,n){function m(d,g,k){k=k||e;var b=[];for(--g;0<=g&&d;g--)if(k.test(d[g]))b.push(d[g]);
else break;return b.reverse().join("")}function d(d,e,g,b,a){if(-1===["javascript","jsx"].indexOf(b.getSession().syntax))return!1;b=null==g?m(d,e,k):g;g=9-(a?1:0);e=e-b.length-g;a=d.substr(e,g)+(a?'"':"");return 0<=e&&a.match(/require\(["']/)||d.substr(e+1,g).match(/require\(["']/)}var e=/[a-zA-Z_0-9\$]/,k=/(?!["'])./,g="../static/lib";u.precededByIdentifier=function(e,g,k,b){var a=m(e,g);k&&(a+=k);if(k=""!==a&&!("0"<=a[0]&&"9">=a[0])){if(-1===["javascript","jsx"].indexOf(b.getSession().syntax))k=
!0;else{k=null;for(var c=0;c<g;c++)'"'!==e[c]||k?'"'===e[c]&&'"'===k&&"\\"!==e[c-1]?k=null:"'"!==e[c]||k?"'"===e[c]&&"'"===k&&"\\"!==e[c-1]?k=null:"/"===e[c]&&"/"===e[c+1]?(k="//",c++):"/"!==e[c]||"*"!==e[c+1]||k?"*"===e[c]&&"/"===e[c+1]&&"/*"===k?(k=null,c++):"/"!==e[c]||k?"/"===e[c]&&"/"===k&&"\\"!==e[c-1]&&(k=null):k="/":"global"!==e.substr(c+2,6)&&(k="/*",c++):k="'":k='"';k="/"!=k}k=k||d(e,g,a,b)}return k};u.isRequireJSCall=d;u.retrievePrecedingIdentifier=m;u.retrieveFollowingIdentifier=function(d,
g,k){k=k||e;for(var b=[];d&&g<d.length;g++)if(k.test(d[g]))b.push(d[g]);else break;return b.join("")};u.findCompletions=function(d,e){e.sort();for(var g=0,b=e.length-1,a=Math.floor((b+g)/2);b>g&&0<=a&&0!==e[a].indexOf(d);)d<e[a]?b=a-1:d>e[a]&&(g=a+1),a=Math.floor((b+g)/2);for(;0<a&&0===e[a-1].indexOf(d);)a--;g=[];for(a=0<=a?a:0;a<e.length&&0===e[a].indexOf(d);a++)g.push(e[a]);return g};u.fetchText=function(d){var e=new XMLHttpRequest;d=g+"/"+d;console.error("fetch text : "+d);e.open("GET",d,!1);try{e.send()}catch(k){return!1}return 200===
e.status||e.responseText?e.responseText:!1};u.setStaticPrefix=function(d){g=d};u.DEFAULT_ID_REGEX=e;u.canCompleteForChangedLine=function(d,e,g,b,a){if(g.row!==b.row||0!==e.indexOf(d))return!1;g=m(d,g.column,a);b=m(e,b.column,a);return e.substr(0,e.length-b.length)===d.substr(0,d.length-g.length)}})},"xace/views/_Actions":function(){define("dcl/dcl xide/utils xide/types xide/types/Types xaction/types xaction/ActionProvider xace/views/ACEEditor xaction/Toolbar xaction/DefaultActions dojo/Deferred xace/formatters".split(" "),
function(p,u,n,m,d,e,k,g,v,I,q){m=n.ACTION;var b=n.VIEW_SPLIT_MODE;m=[m.RELOAD,m.SAVE,m.FIND,m.TOOLBAR,"Editor/Keyboard","View/Increase Font Size","View/Decrease Font Size","View/Themes","Help/Editor Shortcuts","Editor/Snippets","Editor/Console","Editor/Settings",m.FULLSCREEN,"View/Layout","Edit/Format"];e=p([k,g.dcl,e.dcl],{permissions:m,_searchBoxOpen:!1,onSingleView:function(){},setSplitMode:function(a){this.splitMode=a;if(!this.doSplit)if("Diff"==a)this.doDiff();else{var c=a==b.SPLIT_HORIZONTAL||
a==b.SPLIT_VERTICAL,h=this.getEditor(),l=this.split;c?(c=1==l.getSplits(),l.setOrientation(a==b.SPLIT_HORIZONTAL?l.BELOW:l.BESIDE),l.setSplits(2),c&&(a=l.getEditor(0).session,l.setSession(a,1).name=a.name,h=h.getOptions(),l.getEditor(1).setOptions(h))):(l.setSplits(1),this.onSingleView())}},onMaximized:function(a){var b=this.getParent();!1===a&&b&&b.resize&&b.resize();var h=this.getToolbar();h&&(a?$(h.domNode).addClass("bg-opaque"):$(h.domNode).removeClass("bg-opaque"));!1===a&&(this.resize(),b&&
u.resizeTo(this,b,!0,!0),this.publish(n.EVENTS.ON_VIEW_MAXIMIZE_END));this.getEditor().focus()},maximize:function(){var a=this.domNode,b=$(a);this.getToolbar();if(this._isMaximized)this._isMaximized=!1,b.removeClass("AceEditorPaneFullScreen"),this._lastParent.appendChild(a),u.destroy(this._maximizeContainer);else{this.publish(n.EVENTS.ON_VIEW_MAXIMIZE_START);this._isMaximized=!0;var b=$(this.domNode.ownerDocument),h=$("body")[0],l=u.create("div",{className:"ACEContainer bg-opaque",style:"z-index:300;height:100%;width:100%"});
this._maximizeContainer=l;h.appendChild(l);$(a).addClass("AceEditorPaneFullScreen");$(a).css("width",b.width());$(a).css("height",b.height());this.resize();this._lastParent=a.parentNode;l.appendChild(a);$(l).addClass("bg-opaque");$(l).css("width",b.width());$(l).css("height",b.height());$(l).css({position:"absolute",left:"0px",top:"0px",border:"none medium",width:"100%",height:"100%"})}this.onMaximized(this._isMaximized);return!0},save:function(a){var b=this.get("value"),h=this.saveContent(this.get("value"),
a),l=this;this._emit(n.EVENTS.ON_FILE_CONTENT_CHANGED,{content:b,item:a});setTimeout(function(){var a=l.getEditor();a&&a.focus()},600);return h},reload:function(){var a=this,b=new I;this.getContent(this.item,function(h){a.lastSavedContent=h;a.set("value",h);b.resolve(h)},function(a){logError(a,"error loading content from file");b.reject(a)});return b},runAction:function(a){a=this.getAction(a);if(!a)return!1;var b=this,h=a.command,l=n.ACTION,d=this.getEditor(),e=this.editorSession;-1!=h.indexOf("View/Layout")&&
b.setSplitMode(a.option,null);switch(h){case l.RELOAD:return this.reload();case "View/Increase Font Size":return d.setFontSize(d.getFontSize()+1),!0;case "View/Decrease Font Size":return d.setFontSize(d.getFontSize()-1),!0;case l.FULLSCREEN:return this.maximize();case "Help/Editor Shortcuts":b.showHelp();break;case l.SAVE:b.save(this.item);break;case l.FIND:var g=function(a){b._searchBoxOpen?(a.hide(),b._searchBoxOpen=!1):(a.show(d.session.getTextRange(),null),b._searchBoxOpen=!0)},e=ace.require("ace/lib/net"),
h=this.getWebRoot();(l=d.searchBox)?g(l):e.loadScript(h+"/xfile/ext/ace/ext-searchbox.js",function(a){a=ace.require("ace/ext/searchbox");g(new a.SearchBox(d))});return!0}if(-1!==h.indexOf("View/Themes")){b.set("theme",a.theme);if(l=a.getParent?a.getParent():null)l=l.getChildren(),_.each(l,function(a){a.set("icon",a._oldIcon)});a.set("icon","fa fa-check")}-1!==h.indexOf("Edit/Format")&&d&&(l=q.format(d,a.formatter),b.set("value",l));if(-1!==h.indexOf("Editor/Settings")){var h=a.option,l=d.getOption(a.option),
C=_.isBoolean(l);if("highlightActive"===h){d.setHighlightActiveLine(!d.getHighlightActiveLine());return}if(C)d.setOption(a.option,!l);else{if("wordWrap"===h)return e=e.getUseWrapMode(),this.set("wordWrap",!e),!0;"off"===l||"on"===l?d.setOption(h,"off"===l?"on":"off"):d.setOption(a.option,!1)}return!0}return this.inherited(arguments)},getEditorActions:function(a){function c(a,b,c,d,e,A,g,r){e=e||{};b=b||"Editor/Settings/"+a||"Editor/Settings/"+a;e=e||{};a=l.createAction(u.mixin({label:a,command:b,
icon:c||"fa-cogs",group:A||"Settings",mixin:u.mixin({addPermission:!0,option:d,actionType:g,owner:l},e)},r));h.push(a);return a}var h=[],l=this,d=n.ACTION,e=n.ACTION_ICON;h.push(this.createAction({label:"Save",command:d.SAVE,icon:e.SAVE,keycombo:"ctrl s",group:"File"}));h.push(this.createAction({label:"Find",command:d.FIND,icon:e.SEARCH,keycombo:"ctrl f",group:"Search"}));h.push(this.createAction({label:"Fullscreen",command:d.FULLSCREEN,icon:e.MAXIMIZE,keycombo:"ctrl f11",group:"View"}));h.push(this.createAction({label:"Increase Fontsize",
command:"View/Increase Font Size",icon:"fa-text-height",group:"View"}));h.push(this.createAction({label:"Decrease Fontsize",command:"View/Decrease Font Size",icon:"fa-text-height",group:"View"}));v.hasAction(a,"View/Themes")&&(h.push(this.createAction({label:"Themes",command:"View/Themes",icon:"fa-paint-brush",group:"View",mixin:{closeOnClick:!1,value:this.defaultPrefenceTheme},onCreate:function(a){var b=l.getDefaultOptions();a.set("value",b.theme)}})),l._addThemes&&l._addThemes(h));h.push(this.createAction({label:"Help",
command:"Help/Editor Shortcuts",icon:"fa-question",keycombo:"f1"}));h.push(this.createAction({label:"Settings",command:"Editor/Settings",icon:"fa-cogs",group:"Settings"}));d={onCreate:function(a){var b=l.getOptionsMixed()[this.option];null!==b&&a.set("value",b)},onChange:function(a,b){this.value=b;l.runAction(this)}};c("Show Gutters",null,null,"showGutter",null,null,n.ACTION_TYPE.MULTI_TOGGLE,d);c("Show Print Margin",null,null,"showPrintMargin",null,null,n.ACTION_TYPE.MULTI_TOGGLE,d);c("Display Intend Guides",
null,null,"displayIndentGuides",null,null,n.ACTION_TYPE.MULTI_TOGGLE,d);c("Show Line Numbers",null,null,"showLineNumbers",null,null,n.ACTION_TYPE.MULTI_TOGGLE,d);c("Show Indivisibles",null,null,"showInvisibles",null,null,n.ACTION_TYPE.MULTI_TOGGLE,d);c("Use Soft Tabs",null,null,"useSoftTabs",null,null,n.ACTION_TYPE.MULTI_TOGGLE,d);c("Use Elastic Tab Stops",null,null,"useElasticTabstops",null,null,n.ACTION_TYPE.MULTI_TOGGLE,d);c("Animated Scroll",null,null,"animatedScroll",null,null,n.ACTION_TYPE.MULTI_TOGGLE,
d);c("Word Wrap",null,null,"wordWrap",null,null,n.ACTION_TYPE.MULTI_TOGGLE,d);c("Highlight Active Line",null,null,"highlightActive",null,null,n.ACTION_TYPE.MULTI_TOGGLE,d);if(v.hasAction(a,"Edit/Format")){h.push(this.createAction({label:"Format",command:"Edit/Format",icon:"fa-indent",group:"Edit"}));var d=q.modes,e=function(a,b,c){a=l.createAction({label:a,command:"Edit/Format/"+a,icon:"fa-indent",group:"Edit",mixin:{addPermission:!0,formatter:c},onCreate:function(a){}});h.push(a)},g;for(g in d)h.push(e(d[g],
"",g))}v.hasAction(a,"View/Layout")&&(h.push(this.createAction({label:"Split",command:"View/Layout",icon:"fa-columns",group:"View"})),h.push(c("None","View/Layout/None","fa-columns",b.SOURCE,null,"View",n.ACTION_TYPE.SINGLE_TOGGLE)),h.push(c("Horizontal","View/Layout/Horizontal","layoutIcon-horizontalSplit",b.SPLIT_HORIZONTAL,null,"View",n.ACTION_TYPE.SINGLE_TOGGLE)),h.push(c("Vertical","View/Layout/Vertical","layoutIcon-layout293",b.SPLIT_VERTICAL,null,"View",n.ACTION_TYPE.SINGLE_TOGGLE)));return h},
_addThemes:function(a){for(var b=this.getThemeData(),h=this,d=function(a,b,c){return h.createAction({label:a,command:"View/Themes/"+a,group:"View",icon:b,mixin:{addPermission:!0,value:c,theme:c,closeOnClick:!1},onCreate:function(a){a._oldIcon=b;a.set("value",c);a.actionType=n.ACTION_TYPE.SINGLE_TOGGLE}})},e=0;e<b.length;e++){var g=b[e],k=g[1]||g[0].replace(/ /g,"_").toLowerCase(),g=d(g[0]," ",k);a.push(g)}},showHelp:function(a){a=a||this.getEditor();ace.require("ace/config").loadModule("ace/ext/keybinding_menu",
function(b){b.init(a);a.showKeyboardShortcuts()})},getThemeData:function(){return[["Chrome"],["Clouds"],["Crimson Editor"],["Dawn"],["Dreamweaver"],["Eclipse"],["GitHub"],["Solarized Light"],["TextMate"],["Tomorrow"],["XCode"],["Kuroir"],["KatzenMilch"],["Ambiance","ambiance","dark"],["Day","cloud9_day"],["Night","cloud9_night"],["Chaos","chaos","dark"],["Midnight","clouds_midnight","dark"],["Cobalt","cobalt","dark"],["idle Fingers","idle_fingers","dark"],["krTheme","kr_theme","dark"],["Merbivore",
"merbivore","dark"],["Merbivore-Soft","merbivore_soft","dark"],["Mono Industrial","mono_industrial","dark"],["Monokai","monokai","dark"],["Pastel on dark","pastel_on_dark","dark"],["Solarized Dark","solarized_dark","dark"],["Terminal","terminal","dark"],["Tomorrow-Night","tomorrow_night","dark"],["Tomorrow-Night-Blue","tomorrow_night_blue","dark"],["Tomorrow-Night-Bright","tomorrow_night_bright","dark"],["Tomorrow-Night-80s","tomorrow_night_eighties","dark"],["Twilight","twilight","dark"],["Vibrant Ink",
"vibrant_ink","dark"]]}});e.DEFAULT_PERMISSIONS=m;p.chainAfter("runAction",e);return e})},"xace/formatters":function(){define(["xace/lib_jsbeautify"],function(p){return{format:function(u,n){if(!0!==this.disabled){var m=u.session,d=u.selection.getRange(),e={space_before_conditional:!0,keep_array_indentation:!1,preserve_newlines:!0,unescape_strings:!0,jslint_happy:!1,brace_style:"end-expand",indent_char:" "};e.indent_size=m.getTabSize();var k=m.getLine(d.start.row).match(/^\s*/)[0],g=!1;d.start.column<
k.length?d.start.column=0:g=!0;var v=m.getTextRange(d);0==v.length&&(v=m.getValue());m=null;"javascript"==n||"json"==n?m="js":"css"==n||"less"==n?m="css":/^\s*<!?\w/.test(v)?m="html":"xml"==n?m="html":"html"==n?m=/[^<]+?{[\s\-\w]+:[^}]+;/.test(v)?"css":/<\w+[ \/>]/.test(v)?"html":"js":"handlebars"==n&&(e.indent_handlebars=!0,m="html");try{v=p[m+"_beautify"](v,e),g&&(v=v.replace(/^/gm,k).trim()),0===d.end.column&&(v+="\n"+k)}catch(I){return!1}return v}},modes:{javascript:"Javascript (JS Beautify)",
html:"HTML (JS Beautify)",css:"CSS (JS Beautify)",less:"Less (JS Beautify)",xml:"XML (JS Beautify)",json:"JSON (JS Beautify)",handlebars:"Handlebars (JS Beautify)"}}})},"xace/lib_jsbeautify":function(){define(["require","exports","module"],function(p,u,n){var m=n.exports={};(function(){function d(a,b){for(var c=0;c<b.length;c+=1)if(b[c]===a)return!0;return!1}function e(a){return a.replace(/^\s+|\s+$/g,"")}function k(a,b){return(new g(a,b)).beautify()}function g(b,c){function A(a,b){var c=0;a&&(c=
a.indentation_level,!y.just_added_newline()&&a.line_indent_level>c&&(c=a.line_indent_level));return{mode:b,parent:a,last_text:a?a.last_text:"",last_word:a?a.last_word:"",declaration_statement:!1,declaration_assignment:!1,multiline_frame:!1,if_block:!1,else_block:!1,do_block:!1,do_while:!1,in_case_statement:!1,in_case:!1,case_body:!1,indentation_level:c,line_indent_level:a?a.line_indent_level:c,start_line_index:y.get_line_number(),ternary_depth:0}}function g(b){var c=b.newlines;if(E.keep_array_indentation&&
t.mode===a.ArrayLiteral)for(h=0;h<c;h+=1)C(0<h);else if(E.max_preserve_newlines&&c>E.max_preserve_newlines&&(c=E.max_preserve_newlines),E.preserve_newlines&&1<b.newlines){C();for(var h=1;h<c;h+=1)C(!0)}z=b;W[z.type]()}function k(a){a=void 0===a?!1:a;y.just_added_newline()||(E.preserve_newlines&&z.wanted_newline||a?C(!1,!0):E.wrap_line_length&&y.current_line.get_character_count()+z.text.length+(y.space_before_token?1:0)>=E.wrap_line_length&&C(!1,!0))}function C(b,c){if(!c&&";"!==t.last_text&&","!==
t.last_text&&"\x3d"!==t.last_text&&"TK_OPERATOR"!==B)for(;t.mode===a.Statement&&!t.if_block&&!t.do_block;)H();y.add_new_line(b)&&(t.multiline_frame=!0)}function x(b){b=b||z.text;y.just_added_newline()&&(E.keep_array_indentation&&t.mode===a.ArrayLiteral&&z.wanted_newline?(y.current_line.push(z.whitespace_before),y.space_before_token=!1):y.set_indent(t.indentation_level)&&(t.line_indent_level=t.indentation_level));y.add_token(b)}function v(a){t?(T.push(t),M=t):M=A(null,a);t=A(M,a)}function m(b){return d(b,
[a.Expression,a.ForInitializer,a.Conditional])}function H(){0<T.length&&(M=t,t=T.pop(),M.mode===a.Statement&&y.remove_redundant_indentation(M))}function J(){return t.parent.mode===a.ObjectLiteral&&t.mode===a.Statement&&(":"===t.last_text&&0===t.ternary_depth||"TK_RESERVED"===B&&d(t.last_text,["get","set"]))}function K(){return"TK_RESERVED"===B&&d(t.last_text,["var","let","const"])&&"TK_WORD"===z.type||"TK_RESERVED"===B&&"do"===t.last_text||"TK_RESERVED"===B&&"return"===t.last_text&&!z.wanted_newline||
"TK_RESERVED"===B&&"else"===t.last_text&&("TK_RESERVED"!==z.type||"if"!==z.text)||"TK_END_EXPR"===B&&(M.mode===a.ForInitializer||M.mode===a.Conditional)||"TK_WORD"===B&&t.mode===a.BlockStatement&&!t.in_case&&"--"!==z.text&&"++"!==z.text&&"TK_WORD"!==z.type&&"TK_RESERVED"!==z.type||t.mode===a.ObjectLiteral&&(":"===t.last_text&&0===t.ternary_depth||"TK_RESERVED"===B&&d(t.last_text,["get","set"]))?(v(a.Statement),t.indentation_level+=1,"TK_RESERVED"===B&&d(t.last_text,["var","let","const"])&&"TK_WORD"===
z.type&&(t.declaration_statement=!0),J()||k("TK_RESERVED"===z.type&&d(z.text,["do","for","if","while"])),!0):!1}function r(a){return d(a,"case return do if throw else".split(" "))}function G(a){a=w+(a||0);return 0>a||a>=p.length?null:p[a]}function U(){"TK_RESERVED"===z.type&&t.mode!==a.ObjectLiteral&&d(z.text,["set","get"])&&(z.type="TK_WORD");"TK_RESERVED"===z.type&&t.mode===a.ObjectLiteral&&":"==G(1).text&&(z.type="TK_WORD");K()||!z.wanted_newline||m(t.mode)||"TK_OPERATOR"===B&&"--"!==t.last_text&&
"++"!==t.last_text||"TK_EQUALS"===B||!E.preserve_newlines&&"TK_RESERVED"===B&&d(t.last_text,["var","let","const","set","get"])||C();if(t.do_block&&!t.do_while){if("TK_RESERVED"===z.type&&"while"===z.text){y.space_before_token=!0;x();y.space_before_token=!0;t.do_while=!0;return}C();t.do_block=!1}if(t.if_block)if(t.else_block||"TK_RESERVED"!==z.type||"else"!==z.text){for(;t.mode===a.Statement;)H();t.if_block=!1;t.else_block=!1}else t.else_block=!0;if("TK_RESERVED"===z.type&&("case"===z.text||"default"===
z.text&&t.in_case_statement)){C();if(t.case_body||E.jslint_happy)0<t.indentation_level&&(!t.parent||t.indentation_level>t.parent.indentation_level)&&--t.indentation_level,t.case_body=!1;x();t.in_case=!0;t.in_case_statement=!0}else{"TK_RESERVED"===z.type&&"function"===z.text&&(!(d(t.last_text,["}",";"])||y.just_added_newline()&&!d(t.last_text,["[","{",":","\x3d",","]))||y.just_added_blankline()||z.comments_before.length||(C(),C(!0)),"TK_RESERVED"===B||"TK_WORD"===B?"TK_RESERVED"===B&&d(t.last_text,
["get","set","new","return","export"])?y.space_before_token=!0:"TK_RESERVED"===B&&"default"===t.last_text&&"export"===O?y.space_before_token=!0:C():"TK_OPERATOR"===B||"\x3d"===t.last_text?y.space_before_token=!0:(t.multiline_frame||!m(t.mode)&&t.mode!==a.ArrayLiteral)&&C());if("TK_COMMA"===B||"TK_START_EXPR"===B||"TK_EQUALS"===B||"TK_OPERATOR"===B)J()||k();"TK_RESERVED"===z.type&&d(z.text,["function","get","set"])?(x(),t.last_word=z.text):(N="NONE","TK_END_BLOCK"===B?"TK_RESERVED"===z.type&&d(z.text,
["else","catch","finally"])?"expand"===E.brace_style||"end-expand"===E.brace_style||"none"===E.brace_style&&z.wanted_newline?N="NEWLINE":(N="SPACE",y.space_before_token=!0):N="NEWLINE":"TK_SEMICOLON"===B&&t.mode===a.BlockStatement?N="NEWLINE":"TK_SEMICOLON"===B&&m(t.mode)?N="SPACE":"TK_STRING"===B?N="NEWLINE":"TK_RESERVED"===B||"TK_WORD"===B||"*"===t.last_text&&"function"===O?N="SPACE":"TK_START_BLOCK"===B?N="NEWLINE":"TK_END_EXPR"===B&&(y.space_before_token=!0,N="NEWLINE"),"TK_RESERVED"===z.type&&
d(z.text,u.line_starters)&&")"!==t.last_text&&(N="else"===t.last_text||"export"===t.last_text?"SPACE":"NEWLINE"),"TK_RESERVED"===z.type&&d(z.text,["else","catch","finally"])?"TK_END_BLOCK"!==B||"expand"===E.brace_style||"end-expand"===E.brace_style||"none"===E.brace_style&&z.wanted_newline?C():(y.trim(!0),"}"!==y.current_line.last()&&C(),y.space_before_token=!0):"NEWLINE"===N?"TK_RESERVED"===B&&r(t.last_text)?y.space_before_token=!0:"TK_END_EXPR"!==B?"TK_START_EXPR"===B&&"TK_RESERVED"===z.type&&d(z.text,
["var","let","const"])||":"===t.last_text||("TK_RESERVED"===z.type&&"if"===z.text&&"else"===t.last_text?y.space_before_token=!0:C()):"TK_RESERVED"===z.type&&d(z.text,u.line_starters)&&")"!==t.last_text&&C():t.multiline_frame&&t.mode===a.ArrayLiteral&&","===t.last_text&&"}"===O?C():"SPACE"===N&&(y.space_before_token=!0),x(),t.last_word=z.text,"TK_RESERVED"===z.type&&"do"===z.text&&(t.do_block=!0),"TK_RESERVED"===z.type&&"if"===z.text&&(t.if_block=!0))}}var y,p=[],w,u,z,B,O,Q,t,M,T,N,W,E,V="";W={TK_START_EXPR:function(){K();
var b=a.Expression;if("["===z.text){if("TK_WORD"===B||")"===t.last_text){"TK_RESERVED"===B&&d(t.last_text,u.line_starters)&&(y.space_before_token=!0);v(b);x();t.indentation_level+=1;E.space_in_paren&&(y.space_before_token=!0);return}b=a.ArrayLiteral;t.mode!==a.ArrayLiteral||"["!==t.last_text&&(","!==t.last_text||"]"!==O&&"}"!==O)||E.keep_array_indentation||C()}else"TK_RESERVED"===B&&"for"===t.last_text?b=a.ForInitializer:"TK_RESERVED"===B&&d(t.last_text,["if","while"])&&(b=a.Conditional);";"===t.last_text||
"TK_START_BLOCK"===B?C():"TK_END_EXPR"===B||"TK_START_EXPR"===B||"TK_END_BLOCK"===B||"."===t.last_text?k(z.wanted_newline):"TK_RESERVED"===B&&"("===z.text||"TK_WORD"===B||"TK_OPERATOR"===B?"TK_RESERVED"===B&&("function"===t.last_word||"typeof"===t.last_word)||"*"===t.last_text&&"function"===O?E.space_after_anon_function&&(y.space_before_token=!0):"TK_RESERVED"===B&&(d(t.last_text,u.line_starters)||"catch"===t.last_text)&&E.space_before_conditional&&(y.space_before_token=!0):y.space_before_token=!0;
"("!==z.text||"TK_EQUALS"!==B&&"TK_OPERATOR"!==B||J()||k();v(b);x();E.space_in_paren&&(y.space_before_token=!0);t.indentation_level+=1},TK_END_EXPR:function(){for(;t.mode===a.Statement;)H();t.multiline_frame&&k("]"===z.text&&t.mode===a.ArrayLiteral&&!E.keep_array_indentation);E.space_in_paren&&("TK_START_EXPR"!==B||E.space_in_empty_paren?y.space_before_token=!0:(y.trim(),y.space_before_token=!1));"]"===z.text&&E.keep_array_indentation?(x(),H()):(H(),x());y.remove_redundant_indentation(M);t.do_while&&
M.mode===a.Conditional&&(M.mode=a.Expression,t.do_block=!1,t.do_while=!1)},TK_START_BLOCK:function(){var b=G(1),c=G(2);c&&(":"===c.text&&d(b.type,["TK_STRING","TK_WORD","TK_RESERVED"])||d(b.text,["get","set"])&&d(c.type,["TK_WORD","TK_RESERVED"]))?d(O,["class","interface"])?v(a.BlockStatement):v(a.ObjectLiteral):v(a.BlockStatement);b=!b.comments_before.length&&"}"===b.text&&"function"===t.last_word&&"TK_END_EXPR"===B;"expand"===E.brace_style||"none"===E.brace_style&&z.wanted_newline?"TK_OPERATOR"!==
B&&(b||"TK_EQUALS"===B||"TK_RESERVED"===B&&r(t.last_text)&&"else"!==t.last_text)?y.space_before_token=!0:C(!1,!0):"TK_OPERATOR"!==B&&"TK_START_EXPR"!==B?"TK_START_BLOCK"===B?C():y.space_before_token=!0:M.mode===a.ArrayLiteral&&","===t.last_text&&("}"===O?y.space_before_token=!0:C());x();t.indentation_level+=1},TK_END_BLOCK:function(){for(;t.mode===a.Statement;)H();var b="TK_START_BLOCK"===B;"expand"===E.brace_style?b||C():b||(t.mode===a.ArrayLiteral&&E.keep_array_indentation?(E.keep_array_indentation=
!1,C(),E.keep_array_indentation=!0):C());H();x()},TK_WORD:U,TK_RESERVED:U,TK_SEMICOLON:function(){K()&&(y.space_before_token=!1);for(;t.mode===a.Statement&&!t.if_block&&!t.do_block;)H();x()},TK_STRING:function(){K()?y.space_before_token=!0:"TK_RESERVED"===B||"TK_WORD"===B?y.space_before_token=!0:"TK_COMMA"===B||"TK_START_EXPR"===B||"TK_EQUALS"===B||"TK_OPERATOR"===B?J()||k():C();x()},TK_EQUALS:function(){K();t.declaration_statement&&(t.declaration_assignment=!0);y.space_before_token=!0;x();y.space_before_token=
!0},TK_OPERATOR:function(){K();if("TK_RESERVED"===B&&r(t.last_text))y.space_before_token=!0,x();else if("*"===z.text&&"TK_DOT"===B)x();else if(":"===z.text&&t.in_case)t.case_body=!0,t.indentation_level+=1,x(),C(),t.in_case=!1;else if("::"===z.text)x();else{!z.wanted_newline||"--"!==z.text&&"++"!==z.text||C(!1,!0);"TK_OPERATOR"===B&&k();var b=!0,c=!0;d(z.text,["--","++","!","~"])||d(z.text,["-","+"])&&(d(B,["TK_START_BLOCK","TK_START_EXPR","TK_EQUALS","TK_OPERATOR"])||d(t.last_text,u.line_starters)||
","===t.last_text)?(c=b=!1,";"===t.last_text&&m(t.mode)&&(b=!0),"TK_RESERVED"===B||"TK_END_EXPR"===B?b=!0:"TK_OPERATOR"===B&&(b=d(z.text,["--","-"])&&d(t.last_text,["--","-"])||d(z.text,["++","+"])&&d(t.last_text,["++","+"])),t.mode!==a.BlockStatement&&t.mode!==a.Statement||"{"!==t.last_text&&";"!==t.last_text||C()):":"===z.text?0===t.ternary_depth?b=!1:--t.ternary_depth:"?"===z.text?t.ternary_depth+=1:"*"===z.text&&"TK_RESERVED"===B&&"function"===t.last_text&&(c=b=!1);y.space_before_token=y.space_before_token||
b;x();y.space_before_token=c}},TK_COMMA:function(){t.declaration_statement?(m(t.parent.mode)&&(t.declaration_assignment=!1),x(),t.declaration_assignment?(t.declaration_assignment=!1,C(!1,!0)):y.space_before_token=!0):(x(),t.mode===a.ObjectLiteral||t.mode===a.Statement&&t.parent.mode===a.ObjectLiteral?(t.mode===a.Statement&&H(),C()):y.space_before_token=!0)},TK_BLOCK_COMMENT:function(){for(var a=z.text,a=a.replace(/\x0d/g,""),b=[],c=a.indexOf("\n");-1!==c;)b.push(a.substring(0,c)),a=a.substring(c+
1),c=a.indexOf("\n");a.length&&b.push(a);var h,c=a=!1;h=z.whitespace_before;var d=h.length;C(!1,!0);if(1<b.length){var l;a:{l=b.slice(1);for(var g=0;g<l.length;g++)if("*"!==e(l[g]).charAt(0)){l=!1;break a}l=!0}if(l)a=!0;else{a:{l=b.slice(1);for(var g=0,A=l.length,k;g<A;g++)if((k=l[g])&&0!==k.indexOf(h)){h=!1;break a}h=!0}h&&(c=!0)}}x(b[0]);for(h=1;h<b.length;h++)C(!1,!0),a?x(" "+e(b[h])):c&&b[h].length>d?x(b[h].substring(d)):y.add_token(b[h]);C(!1,!0)},TK_INLINE_COMMENT:function(){y.space_before_token=
!0;x();y.space_before_token=!0},TK_COMMENT:function(){z.wanted_newline?C(!1,!0):y.trim(!0);y.space_before_token=!0;x();C(!1,!0)},TK_DOT:function(){K();"TK_RESERVED"===B&&r(t.last_text)?y.space_before_token=!0:k(")"===t.last_text&&E.break_chained_methods);x()},TK_UNKNOWN:function(){x();"\n"===z.text[z.text.length-1]&&C()},TK_EOF:function(){for(;t.mode===a.Statement;)H()}};c=c?c:{};E={};void 0!==c.braces_on_own_line&&(E.brace_style=c.braces_on_own_line?"expand":"collapse");E.brace_style=c.brace_style?
c.brace_style:E.brace_style?E.brace_style:"collapse";"expand-strict"===E.brace_style&&(E.brace_style="expand");E.indent_size=c.indent_size?parseInt(c.indent_size,10):4;E.indent_char=c.indent_char?c.indent_char:" ";E.preserve_newlines=void 0===c.preserve_newlines?!0:c.preserve_newlines;E.break_chained_methods=void 0===c.break_chained_methods?!1:c.break_chained_methods;E.max_preserve_newlines=void 0===c.max_preserve_newlines?0:parseInt(c.max_preserve_newlines,10);E.space_in_paren=void 0===c.space_in_paren?
!1:c.space_in_paren;E.space_in_empty_paren=void 0===c.space_in_empty_paren?!1:c.space_in_empty_paren;E.jslint_happy=void 0===c.jslint_happy?!1:c.jslint_happy;E.space_after_anon_function=void 0===c.space_after_anon_function?!1:c.space_after_anon_function;E.keep_array_indentation=void 0===c.keep_array_indentation?!1:c.keep_array_indentation;E.space_before_conditional=void 0===c.space_before_conditional?!0:c.space_before_conditional;E.unescape_strings=void 0===c.unescape_strings?!1:c.unescape_strings;
E.wrap_line_length=void 0===c.wrap_line_length?0:parseInt(c.wrap_line_length,10);E.e4x=void 0===c.e4x?!1:c.e4x;E.end_with_newline=void 0===c.end_with_newline?!1:c.end_with_newline;E.jslint_happy&&(E.space_after_anon_function=!0);c.indent_with_tabs&&(E.indent_char="\t",E.indent_size=1);for(Q="";0<E.indent_size;)Q+=E.indent_char,--E.indent_size;var R=0;if(b&&b.length){for(;" "===b.charAt(R)||"\t"===b.charAt(R);)V+=b.charAt(R),R+=1;b=b.substring(R)}B="TK_START_BLOCK";O="";y=new n(Q,V);T=[];v(a.BlockStatement);
this.beautify=function(){var a;u=new q(b,E,Q);p=u.tokenize();for(w=0;a=G();){for(var c=0;c<a.comments_before.length;c++)g(a.comments_before[c]);g(a);O=t.last_text;B=a.type;t.last_text=a.text;w+=1}a=y.get_code();E.end_with_newline&&(a+="\n");return a}}function v(a){var b=0,c=-1,d=[],e=!0;this.set_indent=function(d){b=a.baseIndentLength+d*a.indent_length;c=d};this.get_character_count=function(){return b};this.is_empty=function(){return e};this.last=function(){return this._empty?null:d[d.length-1]};
this.push=function(a){d.push(a);b+=a.length;e=!1};this.remove_indent=function(){0<c&&(--c,b-=a.indent_length)};this.trim=function(){for(;" "===this.last();)d.pop(),--b;e=0===d.length};this.toString=function(){var b="";this._empty||(0<=c&&(b=a.indent_cache[c]),b+=d.join(""));return b}}function n(b,c){c=c||"";this.indent_cache=[c];this.baseIndentLength=c.length;this.indent_length=b.length;var d=[];this.baseIndentString=c;this.indent_string=b;this.current_line=null;this.space_before_token=!1;this.get_line_number=
function(){return d.length};this.add_new_line=function(a){return 1===this.get_line_number()&&this.just_added_newline()?!1:a||!this.just_added_newline()?(this.current_line=new v(this),d.push(this.current_line),!0):!1};this.add_new_line(!0);this.get_code=function(){return d.join("\n").replace(/[\r\n\t ]+$/,"")};this.set_indent=function(a){if(1<d.length){for(;a>=this.indent_cache.length;)this.indent_cache.push(this.indent_cache[this.indent_cache.length-1]+this.indent_string);this.current_line.set_indent(a);
return!0}this.current_line.set_indent(0);return!1};this.add_token=function(a){this.add_space_before_token();this.current_line.push(a)};this.add_space_before_token=function(){this.space_before_token&&!this.just_added_newline()&&this.current_line.push(" ");this.space_before_token=!1};this.remove_redundant_indentation=function(b){if(!b.multiline_frame&&b.mode!==a.ForInitializer&&b.mode!==a.Conditional){b=b.start_line_index;for(var c=d.length;b<c;)d[b].remove_indent(),b++}};this.trim=function(a){a=void 0===
a?!1:a;for(this.current_line.trim(b,c);a&&1<d.length&&this.current_line.is_empty();)d.pop(),this.current_line=d[d.length-1],this.current_line.trim()};this.just_added_newline=function(){return this.current_line.is_empty()};this.just_added_blankline=function(){return this.just_added_newline()?1===d.length?!0:d[d.length-2].is_empty():!1}}function q(a,l,g){function k(){var F,y=[];n=0;H="";if(r>=G)return["","TK_EOF"];var q;q=K.length?K[K.length-1]:new c("TK_START_BLOCK","{");var w=a.charAt(r);for(r+=1;d(w,
v);){"\n"===w?(n+=1,y=[]):n&&(w===g?y.push(g):"\r"!==w&&y.push(" "));if(r>=G)return["","TK_EOF"];w=a.charAt(r);r+=1}y.length&&(H=y.join(""));if(C.test(w)){var y=q=!0,p=C;"0"===w&&r<G&&/[Xx]/.test(a.charAt(r))?(y=q=!1,w+=a.charAt(r),r+=1,p=/[0123456789abcdefABCDEF]/):(w="",--r);for(;r<G&&p.test(a.charAt(r));)w+=a.charAt(r),r+=1,q&&r<G&&"."===a.charAt(r)&&(w+=a.charAt(r),r+=1,q=!1),y&&r<G&&/[Ee]/.test(a.charAt(r))&&(w+=a.charAt(r),r+=1,r<G&&/[+-]/.test(a.charAt(r))&&(w+=a.charAt(r),r+=1),q=y=!1);return[w,
"TK_WORD"]}if(b.isIdentifierStart(a.charCodeAt(r-1))){if(r<G)for(;b.isIdentifierChar(a.charCodeAt(r))&&(w+=a.charAt(r),r+=1,r!==G););return"TK_DOT"===q.type||"TK_RESERVED"===q.type&&d(q.text,["set","get"])||!d(w,m)?[w,"TK_WORD"]:"in"===w?[w,"TK_OPERATOR"]:[w,"TK_RESERVED"]}if("("===w||"["===w)return[w,"TK_START_EXPR"];if(")"===w||"]"===w)return[w,"TK_END_EXPR"];if("{"===w)return[w,"TK_START_BLOCK"];if("}"===w)return[w,"TK_END_BLOCK"];if(";"===w)return[w,"TK_SEMICOLON"];if("/"===w){y="";p=!0;if("*"===
a.charAt(r)){r+=1;if(r<G)for(;r<G&&("*"!==a.charAt(r)||!a.charAt(r+1)||"/"!==a.charAt(r+1));){w=a.charAt(r);y+=w;if("\n"===w||"\r"===w)p=!1;r+=1;if(r>=G)break}r+=2;return p&&0===n?["/*"+y+"*/","TK_INLINE_COMMENT"]:["/*"+y+"*/","TK_BLOCK_COMMENT"]}if("/"===a.charAt(r)){for(y=w;"\r"!==a.charAt(r)&&"\n"!==a.charAt(r)&&!(y+=a.charAt(r),r+=1,r>=G););return[y,"TK_COMMENT"]}}if("`"===w||"'"===w||'"'===w||("/"===w||l.e4x&&"\x3c"===w&&a.slice(r-1).match(/^<([-a-zA-Z:0-9_.]+|{[^{}]*}|!\[CDATA\[[\s\S]*?\]\])\s*([-a-zA-Z:0-9_.]+=('[^']*'|"[^"]*"|{[^{}]*})\s*)*\/?\s*>/))&&
("TK_RESERVED"===q.type&&d(q.text,"return case throw else do typeof yield".split(" "))||"TK_END_EXPR"===q.type&&")"===q.text&&q.parent&&"TK_RESERVED"===q.parent.type&&d(q.parent.text,["if","while","for"])||d(q.type,"TK_COMMENT TK_START_EXPR TK_START_BLOCK TK_END_BLOCK TK_OPERATOR TK_EQUALS TK_EOF TK_SEMICOLON TK_COMMA".split(" ")))){q=w;var z=y=!1;F=w;if("/"===q)for(w=!1;r<G&&(y||w||a.charAt(r)!==q)&&!b.newline.test(a.charAt(r));)F+=a.charAt(r),y?y=!1:(y="\\"===a.charAt(r),"["===a.charAt(r)?w=!0:
"]"===a.charAt(r)&&(w=!1)),r+=1;else if(l.e4x&&"\x3c"===q){if(y=/<(\/?)([-a-zA-Z:0-9_.]+|{[^{}]*}|!\[CDATA\[[\s\S]*?\]\])\s*([-a-zA-Z:0-9_.]+=('[^']*'|"[^"]*"|{[^{}]*})\s*)*(\/?)\s*>/g,w=a.slice(r-1),(p=y.exec(w))&&0===p.index){q=p[2];for(F=0;p;){var z=!!p[1],B=p[2],u=!!p[p.length-1]||"![CDATA["===B.slice(0,8);B!==q||u||(z?--F:++F);if(0>=F)break;p=y.exec(w)}q=p?p.index+p[0].length:w.length;r+=q-1;return[w.slice(0,q),"TK_STRING"]}}else for(;r<G&&(y||a.charAt(r)!==q&&("`"===q||!b.newline.test(a.charAt(r))));){F+=
a.charAt(r);if(y){if("x"===a.charAt(r)||"u"===a.charAt(r))z=!0;y=!1}else y="\\"===a.charAt(r);r+=1}if(z&&l.unescape_strings)a:{w=F;y=!1;p="";F=0;z="";for(B=0;y||F<w.length;)if(u=w.charAt(F),F++,y){y=!1;if("x"===u)z=w.substr(F,2),F+=2;else if("u"===u)z=w.substr(F,4),F+=4;else{p+="\\"+u;continue}if(!z.match(/^[0123456789abcdefABCDEF]+$/)){F=w;break a}B=parseInt(z,16);if(0<=B&&32>B)p="x"===u?p+("\\x"+z):p+("\\u"+z);else if(34===B||39===B||92===B)p+="\\"+String.fromCharCode(B);else if("x"===u&&126<B&&
255>=B){F=w;break a}else p+=String.fromCharCode(B)}else"\\"===u?y=!0:p+=u;F=p}if(r<G&&a.charAt(r)===q&&(F+=q,r+=1,"/"===q))for(;r<G&&b.isIdentifierStart(a.charCodeAt(r));)F+=a.charAt(r),r+=1;return[F,"TK_STRING"]}if("#"===w){if(0===K.length&&"!"===a.charAt(r)){for(F=w;r<G&&"\n"!==w;)w=a.charAt(r),F+=w,r+=1;return[e(F)+"\n","TK_UNKNOWN"]}q="#";if(r<G&&C.test(a.charAt(r))){do w=a.charAt(r),q+=w,r+=1;while(r<G&&"#"!==w&&"\x3d"!==w);"#"!==w&&("["===a.charAt(r)&&"]"===a.charAt(r+1)?(q+="[]",r+=2):"{"===
a.charAt(r)&&"}"===a.charAt(r+1)&&(q+="{}",r+=2));return[q,"TK_WORD"]}}if("\x3c"===w&&"\x3c!--"===a.substring(r-1,r+3)){r+=3;for(w="\x3c!--";"\n"!==a.charAt(r)&&r<G;)w+=a.charAt(r),r++;J=!0;return[w,"TK_COMMENT"]}if("-"===w&&J&&"--\x3e"===a.substring(r-1,r+2))return J=!1,r+=2,["--\x3e","TK_COMMENT"];if("."===w)return[w,"TK_DOT"];if(d(w,x)){for(;r<G&&d(w+a.charAt(r),x)&&!(w+=a.charAt(r),r+=1,r>=G););return","===w?[w,"TK_COMMA"]:"\x3d"===w?[w,"TK_EQUALS"]:[w,"TK_OPERATOR"]}return[w,"TK_UNKNOWN"]}var v=
["\n","\r","\t"," "],C=/[0-9]/,x="+ - * / % \x26 ++ -- \x3d +\x3d -\x3d *\x3d /\x3d %\x3d \x3d\x3d \x3d\x3d\x3d !\x3d !\x3d\x3d \x3e \x3c \x3e\x3d \x3c\x3d \x3e\x3e \x3c\x3c \x3e\x3e\x3e \x3e\x3e\x3e\x3d \x3e\x3e\x3d \x3c\x3c\x3d \x26\x26 \x26\x3d | || ! ~ , : ? ^ ^\x3d |\x3d :: \x3d\x3e \x3c%\x3d \x3c% %\x3e \x3c?\x3d \x3c? ?\x3e".split(" ");this.line_starters="continue try throw return var let const if switch case default for while break function yield import export".split(" ");var m=this.line_starters.concat("do in else get set new catch finally typeof".split(" ")),
n,H,J,K,r,G;this.tokenize=function(){G=a.length;r=0;J=!1;K=[];for(var b,d,l=null,e=[],g=[];!d||"TK_EOF"!==d.type;){b=k();for(b=new c(b[1],b[0],n,H);"TK_INLINE_COMMENT"===b.type||"TK_COMMENT"===b.type||"TK_BLOCK_COMMENT"===b.type||"TK_UNKNOWN"===b.type;)g.push(b),b=k(),b=new c(b[1],b[0],n,H);g.length&&(b.comments_before=g,g=[]);"TK_START_BLOCK"===b.type||"TK_START_EXPR"===b.type?(b.parent=d,l=b,e.push(b)):("TK_END_BLOCK"===b.type||"TK_END_EXPR"===b.type)&&l&&("]"===b.text&&"["===l.text||")"===b.text&&
"("===l.text||"}"===b.text&&"}"===l.text)&&(b.parent=l.parent,l=e.pop());K.push(b);d=b}return K}}var b={};(function(a){var b=RegExp("[\u00aa\u00b5\u00ba\u00c0-\u00d6\u00d8-\u00f6\u00f8-\u02c1\u02c6-\u02d1\u02e0-\u02e4\u02ec\u02ee\u0370-\u0374\u0376\u0377\u037a-\u037d\u0386\u0388-\u038a\u038c\u038e-\u03a1\u03a3-\u03f5\u03f7-\u0481\u048a-\u0527\u0531-\u0556\u0559\u0561-\u0587\u05d0-\u05ea\u05f0-\u05f2\u0620-\u064a\u066e\u066f\u0671-\u06d3\u06d5\u06e5\u06e6\u06ee\u06ef\u06fa-\u06fc\u06ff\u0710\u0712-\u072f\u074d-\u07a5\u07b1\u07ca-\u07ea\u07f4\u07f5\u07fa\u0800-\u0815\u081a\u0824\u0828\u0840-\u0858\u08a0\u08a2-\u08ac\u0904-\u0939\u093d\u0950\u0958-\u0961\u0971-\u0977\u0979-\u097f\u0985-\u098c\u098f\u0990\u0993-\u09a8\u09aa-\u09b0\u09b2\u09b6-\u09b9\u09bd\u09ce\u09dc\u09dd\u09df-\u09e1\u09f0\u09f1\u0a05-\u0a0a\u0a0f\u0a10\u0a13-\u0a28\u0a2a-\u0a30\u0a32\u0a33\u0a35\u0a36\u0a38\u0a39\u0a59-\u0a5c\u0a5e\u0a72-\u0a74\u0a85-\u0a8d\u0a8f-\u0a91\u0a93-\u0aa8\u0aaa-\u0ab0\u0ab2\u0ab3\u0ab5-\u0ab9\u0abd\u0ad0\u0ae0\u0ae1\u0b05-\u0b0c\u0b0f\u0b10\u0b13-\u0b28\u0b2a-\u0b30\u0b32\u0b33\u0b35-\u0b39\u0b3d\u0b5c\u0b5d\u0b5f-\u0b61\u0b71\u0b83\u0b85-\u0b8a\u0b8e-\u0b90\u0b92-\u0b95\u0b99\u0b9a\u0b9c\u0b9e\u0b9f\u0ba3\u0ba4\u0ba8-\u0baa\u0bae-\u0bb9\u0bd0\u0c05-\u0c0c\u0c0e-\u0c10\u0c12-\u0c28\u0c2a-\u0c33\u0c35-\u0c39\u0c3d\u0c58\u0c59\u0c60\u0c61\u0c85-\u0c8c\u0c8e-\u0c90\u0c92-\u0ca8\u0caa-\u0cb3\u0cb5-\u0cb9\u0cbd\u0cde\u0ce0\u0ce1\u0cf1\u0cf2\u0d05-\u0d0c\u0d0e-\u0d10\u0d12-\u0d3a\u0d3d\u0d4e\u0d60\u0d61\u0d7a-\u0d7f\u0d85-\u0d96\u0d9a-\u0db1\u0db3-\u0dbb\u0dbd\u0dc0-\u0dc6\u0e01-\u0e30\u0e32\u0e33\u0e40-\u0e46\u0e81\u0e82\u0e84\u0e87\u0e88\u0e8a\u0e8d\u0e94-\u0e97\u0e99-\u0e9f\u0ea1-\u0ea3\u0ea5\u0ea7\u0eaa\u0eab\u0ead-\u0eb0\u0eb2\u0eb3\u0ebd\u0ec0-\u0ec4\u0ec6\u0edc-\u0edf\u0f00\u0f40-\u0f47\u0f49-\u0f6c\u0f88-\u0f8c\u1000-\u102a\u103f\u1050-\u1055\u105a-\u105d\u1061\u1065\u1066\u106e-\u1070\u1075-\u1081\u108e\u10a0-\u10c5\u10c7\u10cd\u10d0-\u10fa\u10fc-\u1248\u124a-\u124d\u1250-\u1256\u1258\u125a-\u125d\u1260-\u1288\u128a-\u128d\u1290-\u12b0\u12b2-\u12b5\u12b8-\u12be\u12c0\u12c2-\u12c5\u12c8-\u12d6\u12d8-\u1310\u1312-\u1315\u1318-\u135a\u1380-\u138f\u13a0-\u13f4\u1401-\u166c\u166f-\u167f\u1681-\u169a\u16a0-\u16ea\u16ee-\u16f0\u1700-\u170c\u170e-\u1711\u1720-\u1731\u1740-\u1751\u1760-\u176c\u176e-\u1770\u1780-\u17b3\u17d7\u17dc\u1820-\u1877\u1880-\u18a8\u18aa\u18b0-\u18f5\u1900-\u191c\u1950-\u196d\u1970-\u1974\u1980-\u19ab\u19c1-\u19c7\u1a00-\u1a16\u1a20-\u1a54\u1aa7\u1b05-\u1b33\u1b45-\u1b4b\u1b83-\u1ba0\u1bae\u1baf\u1bba-\u1be5\u1c00-\u1c23\u1c4d-\u1c4f\u1c5a-\u1c7d\u1ce9-\u1cec\u1cee-\u1cf1\u1cf5\u1cf6\u1d00-\u1dbf\u1e00-\u1f15\u1f18-\u1f1d\u1f20-\u1f45\u1f48-\u1f4d\u1f50-\u1f57\u1f59\u1f5b\u1f5d\u1f5f-\u1f7d\u1f80-\u1fb4\u1fb6-\u1fbc\u1fbe\u1fc2-\u1fc4\u1fc6-\u1fcc\u1fd0-\u1fd3\u1fd6-\u1fdb\u1fe0-\u1fec\u1ff2-\u1ff4\u1ff6-\u1ffc\u2071\u207f\u2090-\u209c\u2102\u2107\u210a-\u2113\u2115\u2119-\u211d\u2124\u2126\u2128\u212a-\u212d\u212f-\u2139\u213c-\u213f\u2145-\u2149\u214e\u2160-\u2188\u2c00-\u2c2e\u2c30-\u2c5e\u2c60-\u2ce4\u2ceb-\u2cee\u2cf2\u2cf3\u2d00-\u2d25\u2d27\u2d2d\u2d30-\u2d67\u2d6f\u2d80-\u2d96\u2da0-\u2da6\u2da8-\u2dae\u2db0-\u2db6\u2db8-\u2dbe\u2dc0-\u2dc6\u2dc8-\u2dce\u2dd0-\u2dd6\u2dd8-\u2dde\u2e2f\u3005-\u3007\u3021-\u3029\u3031-\u3035\u3038-\u303c\u3041-\u3096\u309d-\u309f\u30a1-\u30fa\u30fc-\u30ff\u3105-\u312d\u3131-\u318e\u31a0-\u31ba\u31f0-\u31ff\u3400-\u4db5\u4e00-\u9fcc\ua000-\ua48c\ua4d0-\ua4fd\ua500-\ua60c\ua610-\ua61f\ua62a\ua62b\ua640-\ua66e\ua67f-\ua697\ua6a0-\ua6ef\ua717-\ua71f\ua722-\ua788\ua78b-\ua78e\ua790-\ua793\ua7a0-\ua7aa\ua7f8-\ua801\ua803-\ua805\ua807-\ua80a\ua80c-\ua822\ua840-\ua873\ua882-\ua8b3\ua8f2-\ua8f7\ua8fb\ua90a-\ua925\ua930-\ua946\ua960-\ua97c\ua984-\ua9b2\ua9cf\uaa00-\uaa28\uaa40-\uaa42\uaa44-\uaa4b\uaa60-\uaa76\uaa7a\uaa80-\uaaaf\uaab1\uaab5\uaab6\uaab9-\uaabd\uaac0\uaac2\uaadb-\uaadd\uaae0-\uaaea\uaaf2-\uaaf4\uab01-\uab06\uab09-\uab0e\uab11-\uab16\uab20-\uab26\uab28-\uab2e\uabc0-\uabe2\uac00-\ud7a3\ud7b0-\ud7c6\ud7cb-\ud7fb\uf900-\ufa6d\ufa70-\ufad9\ufb00-\ufb06\ufb13-\ufb17\ufb1d\ufb1f-\ufb28\ufb2a-\ufb36\ufb38-\ufb3c\ufb3e\ufb40\ufb41\ufb43\ufb44\ufb46-\ufbb1\ufbd3-\ufd3d\ufd50-\ufd8f\ufd92-\ufdc7\ufdf0-\ufdfb\ufe70-\ufe74\ufe76-\ufefc\uff21-\uff3a\uff41-\uff5a\uff66-\uffbe\uffc2-\uffc7\uffca-\uffcf\uffd2-\uffd7\uffda-\uffdc]"),
c=RegExp("[\u00aa\u00b5\u00ba\u00c0-\u00d6\u00d8-\u00f6\u00f8-\u02c1\u02c6-\u02d1\u02e0-\u02e4\u02ec\u02ee\u0370-\u0374\u0376\u0377\u037a-\u037d\u0386\u0388-\u038a\u038c\u038e-\u03a1\u03a3-\u03f5\u03f7-\u0481\u048a-\u0527\u0531-\u0556\u0559\u0561-\u0587\u05d0-\u05ea\u05f0-\u05f2\u0620-\u064a\u066e\u066f\u0671-\u06d3\u06d5\u06e5\u06e6\u06ee\u06ef\u06fa-\u06fc\u06ff\u0710\u0712-\u072f\u074d-\u07a5\u07b1\u07ca-\u07ea\u07f4\u07f5\u07fa\u0800-\u0815\u081a\u0824\u0828\u0840-\u0858\u08a0\u08a2-\u08ac\u0904-\u0939\u093d\u0950\u0958-\u0961\u0971-\u0977\u0979-\u097f\u0985-\u098c\u098f\u0990\u0993-\u09a8\u09aa-\u09b0\u09b2\u09b6-\u09b9\u09bd\u09ce\u09dc\u09dd\u09df-\u09e1\u09f0\u09f1\u0a05-\u0a0a\u0a0f\u0a10\u0a13-\u0a28\u0a2a-\u0a30\u0a32\u0a33\u0a35\u0a36\u0a38\u0a39\u0a59-\u0a5c\u0a5e\u0a72-\u0a74\u0a85-\u0a8d\u0a8f-\u0a91\u0a93-\u0aa8\u0aaa-\u0ab0\u0ab2\u0ab3\u0ab5-\u0ab9\u0abd\u0ad0\u0ae0\u0ae1\u0b05-\u0b0c\u0b0f\u0b10\u0b13-\u0b28\u0b2a-\u0b30\u0b32\u0b33\u0b35-\u0b39\u0b3d\u0b5c\u0b5d\u0b5f-\u0b61\u0b71\u0b83\u0b85-\u0b8a\u0b8e-\u0b90\u0b92-\u0b95\u0b99\u0b9a\u0b9c\u0b9e\u0b9f\u0ba3\u0ba4\u0ba8-\u0baa\u0bae-\u0bb9\u0bd0\u0c05-\u0c0c\u0c0e-\u0c10\u0c12-\u0c28\u0c2a-\u0c33\u0c35-\u0c39\u0c3d\u0c58\u0c59\u0c60\u0c61\u0c85-\u0c8c\u0c8e-\u0c90\u0c92-\u0ca8\u0caa-\u0cb3\u0cb5-\u0cb9\u0cbd\u0cde\u0ce0\u0ce1\u0cf1\u0cf2\u0d05-\u0d0c\u0d0e-\u0d10\u0d12-\u0d3a\u0d3d\u0d4e\u0d60\u0d61\u0d7a-\u0d7f\u0d85-\u0d96\u0d9a-\u0db1\u0db3-\u0dbb\u0dbd\u0dc0-\u0dc6\u0e01-\u0e30\u0e32\u0e33\u0e40-\u0e46\u0e81\u0e82\u0e84\u0e87\u0e88\u0e8a\u0e8d\u0e94-\u0e97\u0e99-\u0e9f\u0ea1-\u0ea3\u0ea5\u0ea7\u0eaa\u0eab\u0ead-\u0eb0\u0eb2\u0eb3\u0ebd\u0ec0-\u0ec4\u0ec6\u0edc-\u0edf\u0f00\u0f40-\u0f47\u0f49-\u0f6c\u0f88-\u0f8c\u1000-\u102a\u103f\u1050-\u1055\u105a-\u105d\u1061\u1065\u1066\u106e-\u1070\u1075-\u1081\u108e\u10a0-\u10c5\u10c7\u10cd\u10d0-\u10fa\u10fc-\u1248\u124a-\u124d\u1250-\u1256\u1258\u125a-\u125d\u1260-\u1288\u128a-\u128d\u1290-\u12b0\u12b2-\u12b5\u12b8-\u12be\u12c0\u12c2-\u12c5\u12c8-\u12d6\u12d8-\u1310\u1312-\u1315\u1318-\u135a\u1380-\u138f\u13a0-\u13f4\u1401-\u166c\u166f-\u167f\u1681-\u169a\u16a0-\u16ea\u16ee-\u16f0\u1700-\u170c\u170e-\u1711\u1720-\u1731\u1740-\u1751\u1760-\u176c\u176e-\u1770\u1780-\u17b3\u17d7\u17dc\u1820-\u1877\u1880-\u18a8\u18aa\u18b0-\u18f5\u1900-\u191c\u1950-\u196d\u1970-\u1974\u1980-\u19ab\u19c1-\u19c7\u1a00-\u1a16\u1a20-\u1a54\u1aa7\u1b05-\u1b33\u1b45-\u1b4b\u1b83-\u1ba0\u1bae\u1baf\u1bba-\u1be5\u1c00-\u1c23\u1c4d-\u1c4f\u1c5a-\u1c7d\u1ce9-\u1cec\u1cee-\u1cf1\u1cf5\u1cf6\u1d00-\u1dbf\u1e00-\u1f15\u1f18-\u1f1d\u1f20-\u1f45\u1f48-\u1f4d\u1f50-\u1f57\u1f59\u1f5b\u1f5d\u1f5f-\u1f7d\u1f80-\u1fb4\u1fb6-\u1fbc\u1fbe\u1fc2-\u1fc4\u1fc6-\u1fcc\u1fd0-\u1fd3\u1fd6-\u1fdb\u1fe0-\u1fec\u1ff2-\u1ff4\u1ff6-\u1ffc\u2071\u207f\u2090-\u209c\u2102\u2107\u210a-\u2113\u2115\u2119-\u211d\u2124\u2126\u2128\u212a-\u212d\u212f-\u2139\u213c-\u213f\u2145-\u2149\u214e\u2160-\u2188\u2c00-\u2c2e\u2c30-\u2c5e\u2c60-\u2ce4\u2ceb-\u2cee\u2cf2\u2cf3\u2d00-\u2d25\u2d27\u2d2d\u2d30-\u2d67\u2d6f\u2d80-\u2d96\u2da0-\u2da6\u2da8-\u2dae\u2db0-\u2db6\u2db8-\u2dbe\u2dc0-\u2dc6\u2dc8-\u2dce\u2dd0-\u2dd6\u2dd8-\u2dde\u2e2f\u3005-\u3007\u3021-\u3029\u3031-\u3035\u3038-\u303c\u3041-\u3096\u309d-\u309f\u30a1-\u30fa\u30fc-\u30ff\u3105-\u312d\u3131-\u318e\u31a0-\u31ba\u31f0-\u31ff\u3400-\u4db5\u4e00-\u9fcc\ua000-\ua48c\ua4d0-\ua4fd\ua500-\ua60c\ua610-\ua61f\ua62a\ua62b\ua640-\ua66e\ua67f-\ua697\ua6a0-\ua6ef\ua717-\ua71f\ua722-\ua788\ua78b-\ua78e\ua790-\ua793\ua7a0-\ua7aa\ua7f8-\ua801\ua803-\ua805\ua807-\ua80a\ua80c-\ua822\ua840-\ua873\ua882-\ua8b3\ua8f2-\ua8f7\ua8fb\ua90a-\ua925\ua930-\ua946\ua960-\ua97c\ua984-\ua9b2\ua9cf\uaa00-\uaa28\uaa40-\uaa42\uaa44-\uaa4b\uaa60-\uaa76\uaa7a\uaa80-\uaaaf\uaab1\uaab5\uaab6\uaab9-\uaabd\uaac0\uaac2\uaadb-\uaadd\uaae0-\uaaea\uaaf2-\uaaf4\uab01-\uab06\uab09-\uab0e\uab11-\uab16\uab20-\uab26\uab28-\uab2e\uabc0-\uabe2\uac00-\ud7a3\ud7b0-\ud7c6\ud7cb-\ud7fb\uf900-\ufa6d\ufa70-\ufad9\ufb00-\ufb06\ufb13-\ufb17\ufb1d\ufb1f-\ufb28\ufb2a-\ufb36\ufb38-\ufb3c\ufb3e\ufb40\ufb41\ufb43\ufb44\ufb46-\ufbb1\ufbd3-\ufd3d\ufd50-\ufd8f\ufd92-\ufdc7\ufdf0-\ufdfb\ufe70-\ufe74\ufe76-\ufefc\uff21-\uff3a\uff41-\uff5a\uff66-\uffbe\uffc2-\uffc7\uffca-\uffcf\uffd2-\uffd7\uffda-\uffdc\u0300-\u036f\u0483-\u0487\u0591-\u05bd\u05bf\u05c1\u05c2\u05c4\u05c5\u05c7\u0610-\u061a\u0620-\u0649\u0672-\u06d3\u06e7-\u06e8\u06fb-\u06fc\u0730-\u074a\u0800-\u0814\u081b-\u0823\u0825-\u0827\u0829-\u082d\u0840-\u0857\u08e4-\u08fe\u0900-\u0903\u093a-\u093c\u093e-\u094f\u0951-\u0957\u0962-\u0963\u0966-\u096f\u0981-\u0983\u09bc\u09be-\u09c4\u09c7\u09c8\u09d7\u09df-\u09e0\u0a01-\u0a03\u0a3c\u0a3e-\u0a42\u0a47\u0a48\u0a4b-\u0a4d\u0a51\u0a66-\u0a71\u0a75\u0a81-\u0a83\u0abc\u0abe-\u0ac5\u0ac7-\u0ac9\u0acb-\u0acd\u0ae2-\u0ae3\u0ae6-\u0aef\u0b01-\u0b03\u0b3c\u0b3e-\u0b44\u0b47\u0b48\u0b4b-\u0b4d\u0b56\u0b57\u0b5f-\u0b60\u0b66-\u0b6f\u0b82\u0bbe-\u0bc2\u0bc6-\u0bc8\u0bca-\u0bcd\u0bd7\u0be6-\u0bef\u0c01-\u0c03\u0c46-\u0c48\u0c4a-\u0c4d\u0c55\u0c56\u0c62-\u0c63\u0c66-\u0c6f\u0c82\u0c83\u0cbc\u0cbe-\u0cc4\u0cc6-\u0cc8\u0cca-\u0ccd\u0cd5\u0cd6\u0ce2-\u0ce3\u0ce6-\u0cef\u0d02\u0d03\u0d46-\u0d48\u0d57\u0d62-\u0d63\u0d66-\u0d6f\u0d82\u0d83\u0dca\u0dcf-\u0dd4\u0dd6\u0dd8-\u0ddf\u0df2\u0df3\u0e34-\u0e3a\u0e40-\u0e45\u0e50-\u0e59\u0eb4-\u0eb9\u0ec8-\u0ecd\u0ed0-\u0ed9\u0f18\u0f19\u0f20-\u0f29\u0f35\u0f37\u0f39\u0f41-\u0f47\u0f71-\u0f84\u0f86-\u0f87\u0f8d-\u0f97\u0f99-\u0fbc\u0fc6\u1000-\u1029\u1040-\u1049\u1067-\u106d\u1071-\u1074\u1082-\u108d\u108f-\u109d\u135d-\u135f\u170e-\u1710\u1720-\u1730\u1740-\u1750\u1772\u1773\u1780-\u17b2\u17dd\u17e0-\u17e9\u180b-\u180d\u1810-\u1819\u1920-\u192b\u1930-\u193b\u1951-\u196d\u19b0-\u19c0\u19c8-\u19c9\u19d0-\u19d9\u1a00-\u1a15\u1a20-\u1a53\u1a60-\u1a7c\u1a7f-\u1a89\u1a90-\u1a99\u1b46-\u1b4b\u1b50-\u1b59\u1b6b-\u1b73\u1bb0-\u1bb9\u1be6-\u1bf3\u1c00-\u1c22\u1c40-\u1c49\u1c5b-\u1c7d\u1cd0-\u1cd2\u1d00-\u1dbe\u1e01-\u1f15\u200c\u200d\u203f\u2040\u2054\u20d0-\u20dc\u20e1\u20e5-\u20f0\u2d81-\u2d96\u2de0-\u2dff\u3021-\u3028\u3099\u309a\ua640-\ua66d\ua674-\ua67d\ua69f\ua6f0-\ua6f1\ua7f8-\ua800\ua806\ua80b\ua823-\ua827\ua880-\ua881\ua8b4-\ua8c4\ua8d0-\ua8d9\ua8f3-\ua8f7\ua900-\ua909\ua926-\ua92d\ua930-\ua945\ua980-\ua983\ua9b3-\ua9c0\uaa00-\uaa27\uaa40-\uaa41\uaa4c-\uaa4d\uaa50-\uaa59\uaa7b\uaae0-\uaae9\uaaf2-\uaaf3\uabc0-\uabe1\uabec\uabed\uabf0-\uabf9\ufb20-\ufb28\ufe00-\ufe0f\ufe20-\ufe26\ufe33\ufe34\ufe4d-\ufe4f\uff10-\uff19\uff3f]");
a.newline=/[\n\r\u2028\u2029]/;a.isIdentifierStart=function(a){return 65>a?36===a:91>a?!0:97>a?95===a:123>a?!0:170<=a&&b.test(String.fromCharCode(a))};a.isIdentifierChar=function(a){return 48>a?36===a:58>a?!0:65>a?!1:91>a?!0:97>a?95===a:123>a?!0:170<=a&&c.test(String.fromCharCode(a))}})(b);var a={BlockStatement:"BlockStatement",Statement:"Statement",ObjectLiteral:"ObjectLiteral",ArrayLiteral:"ArrayLiteral",ForInitializer:"ForInitializer",Conditional:"Conditional",Expression:"Expression"},c=function(a,
b,c,d,e,g){this.type=a;this.text=b;this.comments_before=[];this.newlines=c||0;this.wanted_newline=0<c;this.whitespace_before=d||"";this.parent=null};"undefined"!==typeof exports?exports.js_beautify=k:"undefined"!==typeof m?m.js_beautify=k:"undefined"!==typeof global&&(global.js_beautify=k)})();(function(){function d(e,k){function g(){return(D=e.charAt(++p))||""}function v(a){var c=p;a&&b();result=e.charAt(p+1)||"";p=c-1;g();return result}function m(a){for(var b=p;g();)if("\\"===D)g();else if(-1!==
a.indexOf(D))break;else if("\n"===D)break;return e.substring(b,p+1)}function n(a){var b=p;a=m(a);p=b-1;g();return a}function b(){for(var a="";x.test(v());)g(),a+=D;return a}function a(){var a="";for(D&&x.test(D)&&(a=D);x.test(g());)a+=D;return a}function c(a){var b=p;a="/"===v();for(g();g();)if(!a&&"*"===D&&"/"===v()){g();break}else if(a&&"\n"===D)return e.substring(b,p);return e.substring(b,p)+D}function h(a){return e.substring(p-a.length,p).toLowerCase()===a}function l(){for(var a=p+1;a<e.length;a++){var b=
e.charAt(a);if("{"===b)return!0;if(";"===b||"}"===b||")"===b)break}return!1}k=k||{};var A=k.indent_size||4,F=k.indent_char||" ",P=void 0===k.selector_separator_newline?!0:k.selector_separator_newline,C=void 0===k.end_with_newline?!1:k.end_with_newline;"string"===typeof A&&(A=parseInt(A,10));var x=/^\s+$/,p=-1,D,H=e.match(/^[\t ]*/)[0],F=Array(A+1).join(F),J=0,K=0,r={"{":function(a){r.singleSpace();G.push(a);r.newLine()},"}":function(a){r.newLine();G.push(a);r.newLine()},_lastCharWhitespace:function(){return x.test(G[G.length-
1])},newLine:function(a){a||r.trim();G.length&&G.push("\n");H&&G.push(H)},singleSpace:function(){G.length&&!r._lastCharWhitespace()&&G.push(" ")},trim:function(){for(;r._lastCharWhitespace();)G.pop()}},G=[];H&&G.push(H);for(var u=!1,y=!1,S="",w="";;){var w=a(),L=""!==w,z=-1!==w.indexOf("\n"),w=S;if(S=D)"/"===D&&"*"===v()?(L=h(""),r.newLine(),G.push(c()),r.newLine(),L&&r.newLine(!0)):"/"===D&&"/"===v()?(z||"{"===w||r.trim(),r.singleSpace(),G.push(c()),r.newLine()):"@"===D?(L&&r.singleSpace(),G.push(D),
L=n(": ,;{}()[]/\x3d'\"").replace(/\s$/,""),L in d.NESTED_AT_RULE?(K+=1,L in d.CONDITIONAL_GROUP_RULE&&(y=!0)):0<=": ".indexOf(L[L.length-1])&&(g(),L=m(": ").replace(/\s$/,""),G.push(L),r.singleSpace())):"{"===D?"}"===v(!0)?(b(),g(),r.singleSpace(),G.push("{}")):(J++,H+=F,r["{"](D),y?(y=!1,u=J>K):u=J>=K):"}"===D?(J--,H=H.slice(0,-A),r["}"](D),u=!1,K&&K--):":"===D?(b(),!u&&!y||h("\x26")||l()?":"===v()?(g(),G.push("::")):G.push(":"):(G.push(":"),r.singleSpace())):'"'===D||"'"===D?(L&&r.singleSpace(),
G.push(m(D))):";"===D?(G.push(D),r.newLine()):"("===D?h("url")?(G.push(D),b(),g()&&(")"!==D&&'"'!==D&&"'"!==D?G.push(m(")")):p--)):(L&&r.singleSpace(),G.push(D),b()):")"===D?G.push(D):","===D?(G.push(D),b(),!u&&P?r.newLine():r.singleSpace()):("]"!==D&&("["===D?L&&r.singleSpace():"\x3d"===D?b():L&&r.singleSpace()),G.push(D));else break}A=G.join("").replace(/[\r\n\t ]+$/,"");C&&(A+="\n");return A}d.NESTED_AT_RULE={"@page":!0,"@font-face":!0,"@keyframes":!0,"@media":!0,"@supports":!0,"@document":!0};
d.CONDITIONAL_GROUP_RULE={"@media":!0,"@supports":!0,"@document":!0};"undefined"!==typeof exports?exports.css_beautify=d:"undefined"!==typeof m?m.css_beautify=d:"undefined"!==typeof global&&(global.css_beautify=d)})();(function(){function d(d,e,k,m){var b,a,c,h,l,A,F,P,C,x,n;e=e||{};void 0!==e.wrap_line_length&&0!==parseInt(e.wrap_line_length,10)||void 0===e.max_char||0===parseInt(e.max_char,10)||(e.wrap_line_length=e.max_char);a=void 0===e.indent_inner_html?!1:e.indent_inner_html;c=void 0===e.indent_size?
4:parseInt(e.indent_size,10);h=void 0===e.indent_char?" ":e.indent_char;A=void 0===e.brace_style?"collapse":e.brace_style;l=0===parseInt(e.wrap_line_length,10)?32786:parseInt(e.wrap_line_length||250,10);F=e.unformatted||"a span img bdo em strong dfn code samp kbd var cite abbr acronym q sub sup tt i b big small u s strike font ins del pre address dt h1 h2 h3 h4 h5 h6".split(" ");C=(P=void 0===e.preserve_newlines?!0:e.preserve_newlines)?isNaN(parseInt(e.max_preserve_newlines,10))?32786:parseInt(e.max_preserve_newlines,
10):0;x=void 0===e.indent_handlebars?!1:e.indent_handlebars;n=void 0===e.end_with_newline?!1:e.end_with_newline;b=new function(){this.pos=0;this.token="";this.current_mode="CONTENT";this.tags={parent:"parent1",parentcount:1,parent1:""};this.token_text=this.last_token=this.last_text=this.token_type=this.tag_type="";this.newlines=0;this.indent_content=a;this.Utils={whitespace:["\n","\r","\t"," "],single_token:"br input link meta !doctype basefont base area hr wbr param img isindex ?xml embed ?php ? ?\x3d".split(" "),
extra_liners:["head","body","/html"],in_array:function(a,b){for(var c=0;c<b.length;c++)if(a===b[c])return!0;return!1}};this.is_whitespace=function(a){for(;0<a.length;a++)if(!this.Utils.in_array(a.charAt(0),this.Utils.whitespace))return!1;return!0};this.traverse_whitespace=function(){var a="",a=this.input.charAt(this.pos);if(this.Utils.in_array(a,this.Utils.whitespace)){for(this.newlines=0;this.Utils.in_array(a,this.Utils.whitespace);)P&&"\n"===a&&this.newlines<=C&&(this.newlines+=1),this.pos++,a=
this.input.charAt(this.pos);return!0}return!1};this.space_or_wrap=function(a){this.line_char_count>=this.wrap_line_length?(this.print_newline(!1,a),this.print_indentation(a)):(this.line_char_count++,a.push(" "))};this.get_content=function(){for(var a="",b=[];"\x3c"!==this.input.charAt(this.pos);){if(this.pos>=this.input.length)return b.length?b.join(""):["","TK_EOF"];if(this.traverse_whitespace())this.space_or_wrap(b);else{if(x)if(a=this.input.substr(this.pos,3),"{{#"===a||"{{/"===a)break;else if("{{"===
this.input.substr(this.pos,2)&&"{{else}}"===this.get_tag(!0))break;a=this.input.charAt(this.pos);this.pos++;this.line_char_count++;b.push(a)}}return b.length?b.join(""):""};this.get_contents_to=function(a){if(this.pos===this.input.length)return["","TK_EOF"];var b="";a=new RegExp("\x3c/"+a+"\\s*\x3e","igm");a.lastIndex=this.pos;a=(a=a.exec(this.input))?a.index:this.input.length;this.pos<a&&(b=this.input.substring(this.pos,a),this.pos=a);return b};this.record_tag=function(a){this.tags[a+"count"]?this.tags[a+
"count"]++:this.tags[a+"count"]=1;this.tags[a+this.tags[a+"count"]]=this.indent_level;this.tags[a+this.tags[a+"count"]+"parent"]=this.tags.parent;this.tags.parent=a+this.tags[a+"count"]};this.retrieve_tag=function(a){if(this.tags[a+"count"]){for(var b=this.tags.parent;b&&a+this.tags[a+"count"]!==b;)b=this.tags[b+"parent"];b&&(this.indent_level=this.tags[a+this.tags[a+"count"]],this.tags.parent=this.tags[b+"parent"]);delete this.tags[a+this.tags[a+"count"]+"parent"];delete this.tags[a+this.tags[a+
"count"]];1===this.tags[a+"count"]?delete this.tags[a+"count"]:this.tags[a+"count"]--}};this.indent_to_tag=function(a){if(this.tags[a+"count"]){for(var b=this.tags.parent;b&&a+this.tags[a+"count"]!==b;)b=this.tags[b+"parent"];b&&(this.indent_level=this.tags[a+this.tags[a+"count"]])}};this.get_tag=function(a){var b="",c=[],b="",d=!1,h,l,e=this.pos,g=this.line_char_count;a=void 0!==a?a:!1;do{if(this.pos>=this.input.length)return a&&(this.pos=e,this.line_char_count=g),c.length?c.join(""):["","TK_EOF"];
b=this.input.charAt(this.pos);this.pos++;if(this.Utils.in_array(b,this.Utils.whitespace))d=!0;else{if("'"===b||'"'===b)b+=this.get_unformatted(b),d=!0;"\x3d"===b&&(d=!1);c.length&&"\x3d"!==c[c.length-1]&&"\x3e"!==b&&d&&(this.space_or_wrap(c),d=!1);x&&"\x3c"===l&&"{{"===b+this.input.charAt(this.pos)&&(b+=this.get_unformatted("}}"),c.length&&" "!==c[c.length-1]&&"\x3c"!==c[c.length-1]&&(b=" "+b),d=!0);"\x3c"!==b||l||(h=this.pos-1,l="\x3c");x&&!l&&2<=c.length&&"{"===c[c.length-1]&&"{"==c[c.length-2]&&
(h="#"===b||"/"===b?this.pos-3:this.pos-2,l="{");this.line_char_count++;c.push(b);if(c[1]&&"!"===c[1]){c=[this.get_comment(h)];break}if(x&&"{"===l&&2<c.length&&"}"===c[c.length-2]&&"}"===c[c.length-1])break}}while("\x3e"!==b);h=c.join("");l=-1!==h.indexOf(" ")?h.indexOf(" "):"{"===h[0]?h.indexOf("}"):h.indexOf("\x3e");l=h.substring("\x3c"!==h[0]&&x?"#"===h[2]?3:2:1,l).toLowerCase();"/"===h.charAt(h.length-2)||this.Utils.in_array(l,this.Utils.single_token)?a||(this.tag_type="SINGLE"):x&&"{"===h[0]&&
"else"===l?a||(this.indent_to_tag("if"),this.tag_type="HANDLEBARS_ELSE",this.indent_content=!0,this.traverse_whitespace()):this.is_unformatted(l,F)?(b=this.get_unformatted("\x3c/"+l+"\x3e",h),c.push(b),this.tag_type="SINGLE"):"script"===l&&(-1===h.search("type")||-1<h.search("type")&&-1<h.search(/\b(text|application)\/(x-)?(javascript|ecmascript|jscript|livescript)/))?a||(this.record_tag(l),this.tag_type="SCRIPT"):"style"===l&&(-1===h.search("type")||-1<h.search("type")&&-1<h.search("text/css"))?
a||(this.record_tag(l),this.tag_type="STYLE"):"!"===l.charAt(0)?a||(this.tag_type="SINGLE",this.traverse_whitespace()):a||("/"===l.charAt(0)?(this.retrieve_tag(l.substring(1)),this.tag_type="END"):(this.record_tag(l),"html"!==l.toLowerCase()&&(this.indent_content=!0),this.tag_type="START"),this.traverse_whitespace()&&this.space_or_wrap(c),this.Utils.in_array(l,this.Utils.extra_liners)&&(this.print_newline(!1,this.output),this.output.length&&"\n"!==this.output[this.output.length-2]&&this.print_newline(!0,
this.output)));a&&(this.pos=e,this.line_char_count=g);return c.join("")};this.get_comment=function(a){var b="",c="\x3e",d=!1;this.pos=a;input_char=this.input.charAt(this.pos);for(this.pos++;this.pos<=this.input.length;){b+=input_char;if(b[b.length-1]===c[c.length-1]&&-1!==b.indexOf(c))break;!d&&10>b.length&&(0===b.indexOf("\x3c![if")?(c="\x3c![endif]\x3e",d=!0):0===b.indexOf("\x3c![cdata[")?(c="]]\x3e",d=!0):0===b.indexOf("\x3c![")?(c="]\x3e",d=!0):0===b.indexOf("\x3c!--")&&(c="--\x3e",d=!0));input_char=
this.input.charAt(this.pos);this.pos++}return b};this.get_unformatted=function(a,b){if(b&&-1!==b.toLowerCase().indexOf(a))return"";var c="",d="",h=0,l=!0;do{if(this.pos>=this.input.length)break;c=this.input.charAt(this.pos);this.pos++;if(this.Utils.in_array(c,this.Utils.whitespace)){if(!l){this.line_char_count--;continue}if("\n"===c||"\r"===c){d+="\n";this.line_char_count=0;continue}}d+=c;this.line_char_count++;l=!0;x&&"{"===c&&d.length&&"{"===d[d.length-2]&&(d+=this.get_unformatted("}}"),h=d.length)}while(-1===
d.toLowerCase().indexOf(a,h));return d};this.get_token=function(){var a;if("TK_TAG_SCRIPT"===this.last_token||"TK_TAG_STYLE"===this.last_token){var b=this.last_token.substr(7);a=this.get_contents_to(b);return"string"!==typeof a?a:[a,"TK_"+b]}if("CONTENT"===this.current_mode)return a=this.get_content(),"string"!==typeof a?a:[a,"TK_CONTENT"];if("TAG"===this.current_mode)return a=this.get_tag(),"string"!==typeof a?a:[a,"TK_TAG_"+this.tag_type]};this.get_full_indent=function(a){a=this.indent_level+a||
0;return 1>a?"":Array(a+1).join(this.indent_string)};this.is_unformatted=function(a,b){if(!this.Utils.in_array(a,b))return!1;if("a"!==a.toLowerCase()||!this.Utils.in_array("a",b))return!0;var c=(this.get_tag(!0)||"").match(/^\s*<\s*\/?([a-z]*)\s*[^>]*>\s*$/);return!c||this.Utils.in_array(c,b)?!0:!1};this.printer=function(a,b,c,d,h){this.input=a||"";this.output=[];this.indent_character=b;this.indent_string="";this.indent_size=c;this.brace_style=h;this.indent_level=0;this.wrap_line_length=d;for(a=this.line_char_count=
0;a<this.indent_size;a++)this.indent_string+=this.indent_character;this.print_newline=function(a,b){this.line_char_count=0;b&&b.length&&(a||"\n"!==b[b.length-1])&&("\n"!==b[b.length-1]&&(b[b.length-1]=b[b.length-1].replace(/\s+$/g,"")),b.push("\n"))};this.print_indentation=function(a){for(var b=0;b<this.indent_level;b++)a.push(this.indent_string),this.line_char_count+=this.indent_string.length};this.print_token=function(a){if(!this.is_whitespace(a)||this.output.length)(a||""!==a)&&this.output.length&&
"\n"===this.output[this.output.length-1]&&(this.print_indentation(this.output),a=a.replace(/^\s+/g,"")),this.print_token_raw(a)};this.print_token_raw=function(a){0<this.newlines&&(a=a.replace(/\s+$/g,""));a&&""!==a&&(1<a.length&&"\n"===a[a.length-1]?(this.output.push(a.slice(0,-1)),this.print_newline(!1,this.output)):this.output.push(a));for(a=0;a<this.newlines;a++)this.print_newline(0<a,this.output);this.newlines=0};this.indent=function(){this.indent_level++};this.unindent=function(){0<this.indent_level&&
this.indent_level--}};return this};for(b.printer(d,h,c,l,A);;){d=b.get_token();b.token_text=d[0];b.token_type=d[1];if("TK_EOF"===b.token_type)break;switch(b.token_type){case "TK_TAG_START":b.print_newline(!1,b.output);b.print_token(b.token_text);b.indent_content&&(b.indent(),b.indent_content=!1);b.current_mode="CONTENT";break;case "TK_TAG_STYLE":case "TK_TAG_SCRIPT":b.print_newline(!1,b.output);b.print_token(b.token_text);b.current_mode="CONTENT";break;case "TK_TAG_END":"TK_CONTENT"===b.last_token&&
""===b.last_text&&(d=b.token_text.match(/\w+/)[0],c=null,b.output.length&&(c=b.output[b.output.length-1].match(/(?:<|{{#)\s*(\w+)/)),null!==c&&c[1]===d||b.print_newline(!1,b.output));b.print_token(b.token_text);b.current_mode="CONTENT";break;case "TK_TAG_SINGLE":(d=b.token_text.match(/^\s*<([a-z-]+)/i))&&b.Utils.in_array(d[1],F)||b.print_newline(!1,b.output);b.print_token(b.token_text);b.current_mode="CONTENT";break;case "TK_TAG_HANDLEBARS_ELSE":b.print_token(b.token_text);b.indent_content&&(b.indent(),
b.indent_content=!1);b.current_mode="CONTENT";break;case "TK_CONTENT":b.print_token(b.token_text);b.current_mode="TAG";break;case "TK_STYLE":case "TK_SCRIPT":if(""!==b.token_text){b.print_newline(!1,b.output);d=b.token_text;var p;h=1;"TK_SCRIPT"===b.token_type?p="function"===typeof k&&k:"TK_STYLE"===b.token_type&&(p="function"===typeof m&&m);"keep"===e.indent_scripts?h=0:"separate"===e.indent_scripts&&(h=-b.indent_level);c=b.get_full_indent(h);p?d=p(d.replace(/^\s*/,c),e):(l=d.match(/^\s*/)[0].match(/[^\n\r]*$/)[0].split(b.indent_string).length-
1,h=b.get_full_indent(h-l),d=d.replace(/^\s*/,c).replace(/\r\n|\r|\n/g,"\n"+h).replace(/\s+$/,""));d&&(b.print_token_raw(d),b.print_newline(!0,b.output))}b.current_mode="TAG";break;default:""!==b.token_text&&b.print_token(b.token_text)}b.last_token=b.token_type;b.last_text=b.token_text}e=b.output.join("").replace(/[\r\n\t ]+$/,"");n&&(e+="\n");return e}if("undefined"!==typeof exports){var e=require("./beautify.js"),k=require("./beautify-css.js");exports.html_beautify=function(g,m){return d(g,m,e.js_beautify,
k.css_beautify)}}else"undefined"!==typeof m?m.html_beautify=function(e,k){return d(e,k,m.js_beautify,m.css_beautify)}:"undefined"!==typeof global&&(global.html_beautify=function(e,k){return d(e,k,global.js_beautify,global.css_beautify)})})()})},"xideve/views/VisualEditorLayout":function(){define(["dcl/dcl","xaction/Action","xide/types","davinci/Workbench","dojo/dom-style"],function(p,u,n,m,d){return p(null,{declaredClass:"xideve/views/VisualEditorLayout",changeGlobalLayout:function(e){this.getPageEditor();
var k=this.getMainView(),g=k.layoutLeft,k=k.layoutRight,m=this;switch(e){case n.VE_LAYOUT_RIGHT_CENTER_BOTTOM:g._splitterWidget&&g._splitterWidget.set("state","closed");k._splitterWidget&&k._splitterWidget.set("state","full");this.doSplit(n.VIEW_SPLIT_MODE.SPLIT_HORIZONTAL);break;case n.VE_LAYOUT_CENTER_BOTTOM:this.doSplit(n.VIEW_SPLIT_MODE.SPLIT_HORIZONTAL);g._splitterWidget&&g._splitterWidget.set("state","closed");k._splitterWidget&&k._splitterWidget.set("state","closed");break;case n.VE_LAYOUT_CENTER_RIGHT:this.doSplit(n.VIEW_SPLIT_MODE.DESIGN);
g._splitterWidget&&g._splitterWidget.set("state","closed");k._splitterWidget&&k._splitterWidget.set("state","full");break;case n.VE_LAYOUT_LEFT_CENTER_RIGHT:this.doSplit(n.VIEW_SPLIT_MODE.DESIGN);g._splitterWidget&&g._splitterWidget.set("state","full");k._splitterWidget&&k._splitterWidget.set("state","full");break;case n.VE_LAYOUT_LEFT_CENTER_RIGHT_BOTTOM:this.doSplit(n.VIEW_SPLIT_MODE.SPLIT_HORIZONTAL),d.set(g.domNode,{width:"200px"}),g._splitterWidget&&g._splitterWidget.set("state","full"),k._splitterWidget&&
k._splitterWidget.set("state","full")}this.publish(n.EVENTS.RESIZE);setTimeout(function(){m.publish(n.EVENTS.RESIZE)},1E3)},getLayoutActions:function(){function d(a,b,l,e){a=u.create(a,l,"View/"+b+"_"+g,!1,null,n.ITEM_TYPE.WIDGET,"viewActions",null,!1,function(){k.changeGlobalLayout(b)});a.setVisibility(n.ACTION_VISIBILITY.ACTION_TOOLBAR,{label:"",widgetArgs:{style:"text-align:right;float:right;font-size:120%;"},permanent:function(){return 0==k.destroyed}});g++;return a}if(this._layoutActions)return this._layoutActions;
var k=this,g=0,m=d("Center Bottom Right",n.VE_LAYOUT_RIGHT_CENTER_BOTTOM,"layoutIcon-rightCenterBottom"),p=d("Center Bottom",n.VE_LAYOUT_CENTER_BOTTOM,"layoutIcon-centerBottom"),q=d("Center Right",n.VE_LAYOUT_CENTER_RIGHT,"layoutIcon-centerRight"),b=d("Left Center Right",n.VE_LAYOUT_LEFT_CENTER_RIGHT,"layoutIcon-leftCenterRight"),a=d("Left Center Right Bottom",n.VE_LAYOUT_LEFT_CENTER_RIGHT_BOTTOM,"layoutIcon-leftCenterRightBottom");return this._layoutActions=m=[m,p,q,b,a]},doSplit:function(d){},onSplit:function(){this.editor&&
(m._switchEditor(null),this.publish("/davinci/ui/editorSelected",[{editor:null,oldEditor:this.editor}]))},getSplitTarget:function(){return this.containerNode},getSplitContent:function(){return this.editor.domNode}})})},"xideve/views/VisualEditorAction":function(){define("dcl/dcl xdojo/has require xaction/Action xide/types davinci/Runtime davinci/Workbench davinci/ve/metadata xaction/ActionProvider xaction/DefaultActions davinci/ve/widget dojo/Deferred".split(" "),function(p,u,n,m,d,e,k,g,v,I,q,b){q=
d.ACTION;return p(v.dcl,{declaredClass:"xideve/views/VisualEditorAction",_layoutActions:null,_designToggleAction:null,_maqActions:null,_float:function(){var a=this.getPageEditor(),b=a.getDocker(),h=a.getSourcePane();a.getSourcePane();var l=a.getPropertyPane();b.movePanel(h,d.DOCKER.DOCK.FLOAT,null,{x:300,y:300,w:600,h:400});var e=h._parent;e&&e.instanceOf("wcFrame")&&(e.pos(300,300,!0),e._size.x=600,e._size.y=400);e.__update();e&&e.instanceOf("wcFrame")&&e.pos(300,300,!0);e.__update();b.__focus(e);
b.movePanel(l,d.DOCKER.DOCK.STACKED,h);b.movePanel(a.getBlocksPane(),d.DOCKER.DOCK.STACKED,h);b.movePanel(this.cssPane,d.DOCKER.DOCK.STACKED,h);l.maxSize(null,null);l.minSize(null,null);this.cssPane.select()},_dock:function(){var a=this,b=a.getPageEditor(),h=b.getDocker(),l=b.getSourcePane(),e=b.getDesignPane(),g=b.getPropertyPane();h.movePanel(g,d.DOCKER.DOCK.RIGHT,e,{tabOrientation:d.DOCKER.TAB.TOP,location:d.DOCKER.TAB.RIGHT});g.maxSize(400);g.minSize(350);h.movePanel(l,d.DOCKER.DOCK.BOTTOM,null,
{tabOrientation:d.DOCKER.TAB.TOP});h.movePanel(b.getBlocksPane(),d.DOCKER.DOCK.STACKED,l,{});h.movePanel(this.cssPane,d.DOCKER.DOCK.STACKED,l,{});b.resize();h.resize();setTimeout(function(){l.getSplitter().pos(.5);g.maxSize(500);e.getSplitter().pos(.8);a.cssPane.select()},1500)},getWidgetBlockActions:function(){var a=[],b=this;a.push(this.createAction({label:"Add Block",command:"Widget/Add Block",group:"Widget",tab:"Home",icon:"fa-magic",mixin:{addPermission:!0,quick:!0},shouldDisable:function(){return b.getEditorContext()?
1!==b.getSelection().length:!0}}));return a},getMaqettaActions:function(){return this._maqActions},getMaqettaAction:function(a,b,d){b=b||this.getMaqettaActions();var l=_.find(b,{id:a});if(l||!1===d&&l)return l;for(d=0;d<b.length;d++){var e=b[d];if(e.menu&&(l=this.getMaqettaAction(a,e.menu,!1)))break}return l},onReload:function(){this.contextInfo.appContext.destroy()},reload:function(a){var c=this,d=new b;this.onReload();var l=this.getEditorContext(),e=l?$(l.rootNode):null;e&&e[0]&&e[0]._destroyHandles&&
(e[0].__didEmitLoad=!1,e[0]._destroyHandles());if(l=l.appContext)l.didWireWidgets=!1;if(c.blockScopes){for(l=0;l<c.blockScopes.length;l++)e=c.blockScopes[l],c.ctx.getBlockManager().removeScope(e.id);delete this.blockScopes}l=function(a){c.editor.setContent(c.item.path,a);d.resolve(a)};a?l(a):c.ctx.getFileManager().getContent(c.item.mount,c.item.path,l);return d},showInOutline:function(a){this.getEditorContext().getDocument();var b=this.getSelection()[0];this.outlineGridView.grid.select((a||b).id,
null,!0,{focus:!0,append:!1,expand:!0,delay:1})},runAction:function(a){if(a=_.isString(a)?this.getAction(a):a){var b=a.command,d=b.split("/"),l=d[d.length-1],d=this.getEditorContext();if(-1!==b.indexOf("View/Float"))return this._float();if(-1!==b.indexOf("View/Dock"))return this._dock();if(-1!==b.indexOf("Widget/Focus"))(b=(b=this.getSelection())?b[0].domNode:null)&&b.scrollIntoView();else{if(-1!==b.indexOf("View/Split/"))return this.doSplit(parseInt(l)),this.updateFrame(),!0;if("Widget/Add Block"===
b&&(l=this.getBlockEditor()))return l.runAction({command:"File/New Group"});if("View/Layout Mode/Relative"===b)return this.getPageEditor().selectLayoutFlow();if("File/Reload"===b)return this.reload();if("Widget/Show In Outline"===b)return this.showInOutline();if("View/Layout Mode/Absolute"===b)return this.getPageEditor().selectLayoutAbsolute();if("View/Mode/Preview"===b)return this._designMode=!1,this.getPageEditor().getDesignPane().title("\x3cspan class\x3d'text-warning'\x3ePreview\x3c/span\x3e"),
this.getPageEditor().getDesignPane().icon("text-warning fa-eye"),this.setDesignMode(this._designMode);if("View/Mode/Design"===b)return this._designMode=!0,this.getPageEditor().getDesignPane().title("Design"),this.getPageEditor().getDesignPane().icon("text-info fa-edit"),this.setDesignMode(this._designMode);if("File/Open In Browser"===b)return b=this.item.name.replace(".dhtml",".css"),b=this.item.getParent().path+"/"+b,d=this.editor.ctx.getResourceManager().getVariable("VFS_GET_URL"),b=this.editor.ctx.getFileManager().base64_encode(d+
""+this.item.mount+"\x26path\x3d"+b),b={template:u("debug")?"view.template.html":"view.template.release.html",css:b,baseOffset:encodeURIComponent(this.item.getParent().path.replace("./","")),userDirectory:encodeURIComponent(this.editor.ctx.getResourceManager().getVariable("USER_DIRECTORY"))},b=this.ctx.getContextManager().getViewUrl(this.item,null,b),u("electronx")?((d=window.eRequire)||console.error("have no electron"),d("electron").shell.openExternal(b)):window.open(b);if(-1!==b.indexOf("Widget/Align/")){switch(b){case "Widget/Align/Align Left":return this._alignLeftVertical();
case "Widget/Align/Align Center":return this._alignCenterVertical();case "Widget/Align/Align Right":return this._alignRightVertical();case "Widget/Align/Align Top":return this._alignTopHorizontal();case "Widget/Align/Same Size":return this._sameSize();case "Widget/Align/Same Width":return this._sameWidth();case "Widget/Align/Same Height":return this._sameHeight()}return!0}l=a.action;if(!l)switch(b){case "File/Delete":l=this.getMaqettaAction("delete");break;case "Edit/Undo":l=this.getMaqettaAction("undo");
break;case "Edit/Redo":l=this.getMaqettaAction("redo");break;case "Edit/Copy":l=this.getMaqettaAction("copy");break;case "Edit/Paste":l=this.getMaqettaAction("paste");break;case "Edit/Cut":l=this.getMaqettaAction("cut");break;case "File/ManageStates":l=this.getMaqettaAction("manageStates")}return l?k._runAction(l,d):this.inherited(arguments)}}},_getIconClass:function(a){if(!a)return"";switch(a){case "editActionIcon undoIcon":return"fa-undo";case "editActionIcon redoIcon":return"fa-repeat";case "editActionIcon editCutIcon":return"fa-scissors";
case "editActionIcon editCopyIcon":return"fa-copy";case "editActionIcon editPasteIcon":return"fa-paste";case "editActionIcon editDeleteIcon":return"fa-remove"}return a},_toCommand:function(a){switch(a){case "Undo":return"Edit/Undo";case "Redo":return"Edit/Redo";case "Cut":return"Edit/Cut";case "Copy":return"Edit/Copy";case "Paste":return"Edit/Paste";case "Delete":return"Edit/Delete"}},__addAction:function(a){switch(a.id){case "openBrowser":return!1;case "documentSettings":return!1;case "stickynote":return!1;
case "tableCommands":return!1}return!0},_createEditToggleAction:function(){var a=this,b=m.createDefault("Design","fa-toggle-on","View/Design Mode","viewActions",null,{widgetClass:"xide/widgets/ToggleButton",widgetArgs:{icon1:"fa-toggle-on",icon2:"fa-toggle-off",delegate:this,checked:a._designMode},handler:function(b,c,d,e){a._designMode=!a._designMode;e.set("checked",a._designMode);a.setDesignMode(a._designMode)}}).setVisibility(d.ACTION_VISIBILITY.CONTEXT_MENU,null).setVisibility(d.ACTION_VISIBILITY.ACTION_TOOLBAR,
{label:"",permanent:function(){return 0==a.destroyed},widgetArgs:{style:"text-align:right;float:right;font-size:120%;"}}).setVisibility(d.ACTION_VISIBILITY.MAIN_MENU,{show:!1});return this._designToggleAction=b},_getItemActions:function(){try{if(!this.editor||!this.ready)return[];this.restoreStyleView();var a=this._getViewActions();a&&a[0]&&(a=a[0].actions);var b=[],h=this;this._maqActions=a;b.push(this.getSplitViewAction());this._designToggleAction||b.push(this._createEditToggleAction());var l=function(a){a.handler=
function(){try{k._runAction(a.action,e)}catch(b){console.error("action failed "+b,a)}}},e=null,F=null;this.editor&&this.editor.currentEditor&&this.editor.currentEditor.context&&(e=this.editor.currentEditor.context);for(var n=0;n<a.length;n++){var C=a[n];_.isString(C.action)&&k._loadActionClass(C);C.action&&C.action.isEnabled&&C.action.isEnabled(e);"layout"===C.id&&(F=C);var x=this._toAction(C);x&&(x.action=C,l(x),b.push(x))}b.push(m.createDefault("Reload","fa-refresh","File/Reload","viewActions",
null,{addPermission:!0,handler:function(){if(h.blockScopes){for(var a=0;a<h.blockScopes.length;a++){var b=h.blockScopes[a];h.ctx.getBlockManager().removeScope(b.id)}delete this.blockScopes}h.ctx.getFileManager().getContent(h.item.mount,h.item.path,function(a){h.editor.setContent(h.item.path,a)})}}));var p=this.getEditorContext().getSelection();if(p.length){var v=p[0];g.getSmartInput(v.type).then(function(a){a&&a.show&&b.push(m.createDefault("Wizard","fa-magic","Edit/Wizard","viewActions",null,{handler:function(){a.show(v.id)}}))});
b=b.concat(this.getWidgetLayoutActions(b))}if(F){var q=m.create("Layout","fa-crosshairs","View/Layout Mode",!1,null,d.ITEM_TYPE.WIDGET,"docActions",null,!1,function(){},{dummy:!0});b.push(q);var u=m.create("Relative","","View/Layout Mode/Relative",!1,null,d.ITEM_TYPE.WIDGET,"docActions",null,!1,function(){h.getPageEditor().selectLayoutFlow()});b.push(u);var I=m.create("Absolute","","View/Layout Mode/Absolute",!1,null,d.ITEM_TYPE.WIDGET,"docActions",null,!1,function(){h.getPageEditor().selectLayoutAbsolute()});
b.push(I)}this._layoutActions||(b=b.concat(this.getLayoutActions()));b.push(m.createDefault("Preview","fa-eye","File/Preview","viewActions",null,{handler:function(){window.open(h.ctx.getContextManager().getViewUrl(h.item))}}).setVisibility(d.ACTION_VISIBILITY.ACTION_TOOLBAR,{label:"",widgetArgs:{style:"text-align:right;float:right;font-size:120%;"}}));return b}catch(r){return[]}},getSplitViewActions:function(){return[]},getFlowActions:function(){var a=[],b={addPermission:!0,quick:!0};a.push(this.createAction({label:"Flow",
command:"View/Layout Mode",icon:"fa-crosshairs",tab:"Home",group:"View",mixin:b}));a.push(this.createAction({label:"Relative",command:"View/Layout Mode/Relative",tab:"Home",group:"View",mixin:b}));a.push(this.createAction({label:"Absolute",command:"View/Layout Mode/Absolute",tab:"Home",group:"View",mixin:b}));return a},getFloatActions:function(){var a=[];a.push(this.createAction({label:"Float",command:"View/Float",icon:"fa-compress",tab:"Home",group:"View",mixin:{addPermission:!0,quick:!0}}));a.push(this.createAction({label:"Dock",
command:"View/Dock",icon:"fa-expand",tab:"Home",group:"View",mixin:{addPermission:!0,quick:!0}}));return a},getItemActions:function(a){function b(a){var c=l._toAction(a);c&&c.command&&(c.tab="Home",c.mixin=e,c.action=a,d.push(c))}var d=[],l=this,d=d.concat(this.getSplitViewActions()),d=d.concat(this.getFloatActions()),d=d.concat(this.getWidgetBlockActions()),e={addPermission:!0,quick:!0};d.push(this.createAction({label:"Save",command:"File/Save",icon:"fa-save",group:"File",tab:"Home",keycombo:["ctrl s"],
mixin:e}));d.push(this.createAction({label:"Select",command:"Widget/Select",group:"Widget",tab:"Home",icon:"fa-hand-o-up",mixin:e}));d.push(this.createAction({label:"Show In Outline",command:"Widget/Show In Outline",group:"Widget",tab:"Home",icon:"fa-crosshairs",mixin:e}));d.push(this.createAction({label:"Move",command:"Widget/Move",group:"Widget",tab:"Home",icon:"fa-reorder",mixin:e}));d=d.concat(this.getWidgetLayoutActions());d=d.concat(this.getEditToggleActions());d=d.concat(this.getFlowActions());
d.push(this.createAction({label:"Focus",command:"Widget/Focus",group:"Widget",tab:"Home",icon:"fa-crosshairs",mixin:e}));(a=this._getViewActions(a))&&a[0]&&(a=a[0].actions);this._maqActions=a;this.getEditorContext();for(var g=0;g<a.length;g++){var m=a[g];k._loadActionClass(m);["label","showLabel","iconClass"].forEach(function(a){m.hasOwnProperty(a)});if(m.menu&&("DropDownButton"==m.type||"ComboButton"==m.type))for(var C=0;C<m.menu.length;C++){var x=m.menu[C];k._loadActionClass(x);["label","iconClass"].forEach(function(a){});
b(x)}"layout"===m.id&&(layoutAction=m);b(m)}return d},getEditToggleActions:function(){var a=[],b={addPermission:!0,quick:!0};a.push(this.createAction({label:"Mode",command:"View/Mode",icon:"fa-eye",tab:"Home",group:"View",mixin:b}));a.push(this.createAction({label:"Edit",command:"View/Mode/Design",icon:"fa-edit",tab:"Home",group:"View",mixin:b}));a.push(this.createAction({label:"Preview",command:"View/Mode/Preview",icon:"fa-play",tab:"Home",group:"View",mixin:b}));return a},_toAction:function(a){var b=
a.command||this._toCommand(a.label)||a.id;if(!b)return null;var d=this,b=this.createAction({label:a.label,group:a.group||"Ungrouped",icon:this._getIconClass(a.iconClass)||a.iconClass,command:b,tab:a.tab||"Home",mixin:{action:a,addPermission:!0,quick:!0,actionId:a.id},shouldDisable:function(){var b=d.getEditorContext();return b&&a.action&&a.action.isEnabled?!a.action.isEnabled(b):!1}});switch(a.id){case "documentSettings":return null;case "undo":case "outline":b.group="Widget";break;case "redo":b.group=
"Edit";break;case "cut":case "copy":case "paste":b.group="Edit";break;case "delete":b.group="Organize";break;case "theme":case "rotateDevice":case "chooseDevice":case "stickynote":case "savecombo":case "showWidgetsPalette":case "layout":case "sourcecombo":case "design":case "closeactiveeditor":case "tableCommands":return null}return b},getWidgetLayoutActions:function(a){function b(a,c,g,k){e.push(d.createAction({label:a,icon:c,group:"Widget",tab:"Home",command:"Widget/Align/"+g,mixin:{addPermission:!0,
quick:!0}}))}var d=this,e=[];e.push(this.createAction({label:"Align",command:"Widget/Align",icon:"fa-arrows",group:"Widget",tab:"Home",mixin:{addPermission:!0,quick:!0},shouldDisable:function(){if(!d.getEditorContext())return!0;var a=d.getSelection();return 0==a.length||2>a.length}}));b("Align Left","layoutIcon-alignLeftVertical","Align Left",d._alignLeftVertical);b("Align Center","layoutIcon-alignCenterVertical","Align Center",d._alignCenterVertical);b("Align Right","layoutIcon-alignRightVertical",
"Align Right",d._alignRightVertical);b("Align Top","layoutIcon-alignTopHorizontal","Align Top",d._alignTopHorizontal);b("Align Bottom","layoutIcon-alignBottomHorizontal","Align Bottom",d._alignBottomHorizontal);b("Same Size","layoutIcon-sameSize","Same Size",d._sameSize);b("Same Width","layoutIcon-sameWidth","Same Width",d._sameWidth);b("Same Height","layoutIcon-sameHeight","Same Height",d._sameHeight);return e},_getViewActions:function(){var a=[];e.getExtensions("davinci.editorActions",function(b){if("davinci.ve.HTMLPageEditor"==
b.editorContribution.targetID)return a.push(b.editorContribution),!0});0==a.length&&e.getExtension("davinci.defaultEditorActions",function(b){a.push(b.editorContribution);return!0});var b=g.getLibraryActions("davinci.editorActions","davinci.ve.HTMLPageEditor"),a=dojo.clone(a);0<a.length&&b.length&&dojo.forEach(b,function(b){var c=n("davinci/Workbench");b.action&&c._loadActionClass(b);if(b.menu)for(var d=0;d<b.menu.length;d++){var e=b.menu[0];e.action&&c._loadActionClass(e)}a[0].actions.push(b)});
return a},permissions:[q.RENAME,q.UNDO,q.REDO,q.RELOAD,q.DELETE,q.CLIPBOARD,q.LAYOUT,q.COLUMNS,q.SELECTION,q.SAVE,q.SEARCH,q.TOOLBAR,"File/Properties","File/Edit",q.GO_UP,q.HEADER,q.EDIT,q.COPY,q.CLOSE,q.MOVE,q.RENAME,q.RELOAD,q.CLIPBOARD,q.LAYOUT,q.SELECTION,q.OPEN_IN,q.GO_UP,q.SEARCH,q.OPEN_IN_TAB,q.TOOLBAR,q.STATUSBAR,q.SOURCE,q.CONSOLE,q.CLIPBOARD_COPY,q.CLIPBOARD_PASTE,q.CLIPBOARD_CUT],startup:function(){var a=this;if(this.permissions){var b=I.getDefaultActions(this.permissions,this,this),b=
b.concat(this.getItemActions(b));b.push(this.createAction({label:"Edit",command:"Edit",icon:"fa-edit",tab:"Home",group:"View",mixin:{addPermission:!0,quick:!0}}));this.addActions(b)}this._on("selectionChanged",function(b){a.refreshActions();setTimeout(function(){a.updateFocus()},500)})}})})},"xideve/views/VisualEditorTools":function(){define(["dcl/dcl","davinci/ve/widget"],function(p,u){return p(null,{declaredClass:"xideve/views/VisualEditorTools",getEditors:function(){var n=[];if(this.parentContainer)for(var m=
this.parentContainer.getChildren(),d=0;d<m.length;d++){var e=m[d];"davinci.ve.PageEditor"===e.declaredClass&&n.push(e)}return n},getEditorContext:function(){var n=null;this.editor&&this.editor.currentEditor&&this.editor.currentEditor.context&&(n=this.editor.currentEditor.context);return n},getPageEditor:function(){return this.editor},onWidgetAction:function(n){},_sameSize:function(){var n=this.getEditorContext();n.getDocument();var m=this.getSelection(),d=$(m[0].domNode),e=d.css("width"),d=d.css("height");
m.shift();for(var k=0;k<m.length;k++){var g=m[k];$(g.domNode);(g=n.getCommandForStyleChange({appliesTo:"inline",appliesToWhichState:null,cascade:null,values:[{width:e,height:d}]},[g]))&&n.getCommandStack().execute(g)}},_sameWidth:function(){var n=this.getEditorContext();n.getDocument();var m=this.getSelection(),d=$(m[0].domNode),e=d.css("width");d.css("height");m.shift();for(d=0;d<m.length;d++){var k=m[d];$(k.domNode);(k=n.getCommandForStyleChange({appliesTo:"inline",appliesToWhichState:null,cascade:null,
values:[{width:e}]},[k]))&&n.getCommandStack().execute(k)}},_sameHeight:function(){var n=this.getEditorContext();n.getDocument();var m=this.getSelection(),d=$(m[0].domNode);d.css("width");d=d.css("height");m.shift();this.getSelection();for(var e=0;e<m.length;e++){var k=m[e];$(k.domNode);if(k=n.getCommandForStyleChange({appliesTo:"inline",appliesToWhichState:null,cascade:null,values:[{height:d}]},[k]))n.getCommandStack().execute(k,!0),this.getSelection(),k._newId&&u.byId(k._newId,context.getDocument())}},
_alignBottomHorizontal:function(){var n=this.getEditorContext(),m=n.getDocument(),d=this.getSelection(),e=d[0];d.shift();for(var k=0;k<d.length;k++){var g=d[k],p=(new jQuery.PositionCalculator({item:$(e.domNode),target:$(g.domNode),itemAt:"bottom right",targetAt:"bottom left",boundary:$(m.body)})).calculate(),u=$(g.domNode),q=u.position().top;u.position();(g=n.getCommandForStyleChange({appliesTo:"inline",appliesToWhichState:null,cascade:null,values:[{top:q+-1*p.moveBy.y+"px"}]},[g]))&&n.getCommandStack().execute(g)}},
_alignTopHorizontal:function(){var n=this.getEditorContext(),m=n.getDocument(),d=this.getSelection(),e=d[0];d.shift();for(var k=0;k<d.length;k++){var g=d[k],p=(new jQuery.PositionCalculator({item:$(e.domNode),target:$(g.domNode),itemAt:"top right",targetAt:"top left",boundary:$(m.body)})).calculate(),u=$(g.domNode),q=u.position().top;u.position();(g=n.getCommandForStyleChange({appliesTo:"inline",appliesToWhichState:null,cascade:null,values:[{top:q+-1*p.moveBy.y+"px"}]},[g]))&&n.getCommandStack().execute(g)}},
_alignRightVertical:function(){var n=this.getEditorContext(),m=n.getDocument(),d=this.getSelection(),e=d[0];d.shift();for(var k=0;k<d.length;k++){var g=d[k],p=(new jQuery.PositionCalculator({item:$(e.domNode),target:$(g.domNode),itemAt:"bottom right",targetAt:"top right",boundary:$(m.body)})).calculate(),u=$(g.domNode);u.position();p={appliesTo:"inline",appliesToWhichState:null,cascade:null,values:[{left:u.position().left+-1*p.moveBy.x+"px"}]};(g=n.getCommandForStyleChange(p,[g]))&&n.getCommandStack().execute(g)}},
_alignCenterVertical:function(){var n=this.getEditorContext(),m=n.getDocument(),d=this.getSelection(),e=d[0];d.shift();for(var k=0;k<d.length;k++){var g=d[k],p=(new jQuery.PositionCalculator({item:$(e.domNode),target:$(g.domNode),itemAt:"bottom center",targetAt:"top center",boundary:$(m.body)})).calculate(),u=$(g.domNode);u.position();p={appliesTo:"inline",appliesToWhichState:null,cascade:null,values:[{left:u.position().left+-1*p.moveBy.x+"px"}]};(g=n.getCommandForStyleChange(p,[g]))&&n.getCommandStack().execute(g)}},
_alignLeftVertical:function(){var n=this.getEditorContext(),m=n.getDocument(),d=this.getSelection(),e=d[0];d.shift();for(var k=0;k<d.length;k++){var g=d[k],p=(new jQuery.PositionCalculator({item:$(e.domNode),target:$(g.domNode),itemAt:"bottom left",targetAt:"top left",boundary:$(m.body)})).calculate(),u=$(g.domNode);u.position();p={appliesTo:"inline",appliesToWhichState:null,cascade:null,values:[{left:u.position().left+-1*p.moveBy.x+"px"}]};(g=n.getCommandForStyleChange(p,[g]))&&n.getCommandStack().execute(g,
!0)}}})})},"xideve/tests/Reload":function(){define(["xdojo/declare","dojo/Deferred","xide/editor/Registry","xideve/views/VisualEditor"],function(p,u,n,m){var d=window.sctx;p=p("m",null,[]);p.reload=function(){n.getStore();n.unregisterEditor("Visual Editor");n.getEditors({path:"./index.dhtml"});var e=d.reloadModules("davinci/ve/PageEditor davinci/ve/palette/Palette davinci/ve/views/SwitchingStyleView xideve/views/VisualEditorPalette xideve/views/VisualEditorSourceEditor xideve/views/VisualEditorLayout xideve/views/VisualEditorAction xideve/views/VisualEditorTools".split(" ")),
k=new u;e.then(function(){setTimeout(function(){d.reloadModules(["xideve/views/VisualEditor"]).then(function(e){var m=d.getApplication().getComponents().xideve;e[0].component=m;k.resolve({ve:e[0],component:m})})},100)});return k};return p})},"xideve/Embedded":function(){define("dojo/_base/declare davinci/davinci_ dojo/Deferred davinci/ve/metadata davinci/Runtime require dojo/_base/connect davinci/Workbench davinci/ve/metadata xideve/views/StyleView".split(" "),function(p,u,n,m,d,e,k,g,v,I){var q=
function(b,a){if(401!=a.status&&403!=a.status&&!0===b.canceled){var c=b.ioArgs.url;(new RegExp("(^|\\.\\/|"+document.baseURI+"\\/)cmd\\/")).test(c)&&(0<=c.indexOf("getBluePageInfo")||d.handleError(a.message))}};return p("xideve/Embedded",null,{_loadActionClasses:function(){var b=[];d.getExtensions("davinci.editorActions",function(a){if("davinci.ve.HTMLPageEditor"==a.editorContribution.targetID)return b.push(a.editorContribution),!0});0==b.length&&d.getExtension("davinci.defaultEditorActions",function(a){b.push(a.editorContribution);
return!0});var a=v.getLibraryActions("davinci.editorActions","davinci.ve.HTMLPageEditor"),b=dojo.clone(b);0<b.length&&a.length&&dojo.forEach(a,function(a){var d=e("davinci/Workbench");a.action&&d._loadActionClass(a);if(a.menu)for(var l=0;l<a.menu.length;l++){var g=a.menu[0];g.action&&d._loadActionClass(g)}b[0].actions.push(a)});return b},started:function(){},onReady:function(b){this._loadActionClasses();var a=document.getElementById("focusContainer");a||(a=dojo.create("div",{"class":"focusContainer",
id:"focusContainer"},document.body),g.focusContainer=a);g._state={activeEditor:null,editors:[],nhfo:{project1:{device:"iphone",layout:"flow",themeSet:{name:"(none)",desktopTheme:"claro",mobileTheme:[{theme:"android",device:"Android"},{theme:"blackberry",device:"BlackBerry"},{theme:"ipad",device:"iPad"},{theme:"iphone",device:"iPhone"},{theme:"iphone",device:"other"}]}}},project:"project1",id:"",Fields:[]};g.run2();this.started();b.resolve(this)},start:function(b,a,c,h){var l=this,A=new n;d.cmdOffset=
c||"";d.loadPlugins();d.initialPerspective="davinci.ve.pageDesign";if(!0===a)d.isLocalInstall=!0,d.userName="none",d.userEmail="none",d.run(),g.ctx=b,l.onReady();else return b.getFileManager().callMethodEx("XApp_XIDE_Workbench_Service","getInfo",["nada"],function(a){d.userBaseUrl=h;d._initializationInfo=a;a=a.userInfo;d.isLocalInstall="maqettaUser"==a.userId;d.userName=a.userId;d.userEmail=a.email;a=e.toUrl("xideve/metadata/");m.init(b,a);d.run();g.ctx=b;l.onReady(A);d.subscribe("/davinci/states/state/changed",
function(a){var b=d.currentEditor;"davinci.ve.themeEditor.ThemeEditor"!=b.declaredClass&&"davinci.review.editor.ReviewEditor"!=b.declaredClass&&b.visualEditor.onContentChange.apply(b.visualEditor,arguments)});k.subscribe("/davinci/states/state/changed",function(a){var b=d.currentEditor&&"davinci.ve.PageEditor"==d.currentEditor.declaredClass&&d.currentEditor.visualEditor&&d.currentEditor.visualEditor.context;if(b){var c,l,b=b?b.getDijit():null,h=e("davinci/ve/widget");a.newState&&!a.newState.indexOf("_show:")&&
(c=b.byId(a.newState.substring(6)),c=h.getWidget(c.domNode),(l=c.getHelper())&&l.popup&&l.popup(c));a.oldState&&!a.oldState.indexOf("_show:")&&(c=b.byId(a.oldState.substring(6)),c=h.getWidget(c.domNode),(l=c.getHelper())&&l.tearDown&&l.tearDown(c))}});k.subscribe("/davinci/ui/repositionFocusContainer",function(a){g._repositionFocusContainer()})},!0),d.subscribe("/dojo/io/error",q),A}})})},"xideve/views/StyleView":function(){define("dojo/_base/declare dojo/_base/lang davinci/lang/ve dijit/lang/_common dijit/layout/TabContainer xide/layout/ContentPane xideve/widgets/WidgetLite xide/mixins/ReloadMixin davinci/ve/widgets/HTMLStringUtil xide/layout/_TabContainer davinci/ve/widgets/WidgetToolBar davinci/ve/widgets/Cascade davinci/ve/widgets/CommonProperties davinci/ve/widgets/WidgetProperties davinci/ve/widgets/EventSelection".split(" "),
function(p,u,n,m,d,e,k,g,v,I,q,b,a,c,h){return p("xideve/views/StyleView",[k,g],{showWidgetProperties:!0,_editor:null,_widget:null,_widgets:null,_subWidget:null,_titleBarDiv:"\x3cdiv class\x3d'palette_titleBarDiv'\x3e\x3cspan class\x3d'paletteCloseBox'\x3e\x3c/span\x3e\x3cspan class\x3d'titleBarDivTitle'\x3e\x3c/span\x3e\x3c/div\x3e",constructor:function(a,b){this.subscribe("/davinci/ui/editorSelected",dojo.hitch(this,this._editorSelected));this.subscribe("/davinci/ui/widgetSelected",dojo.hitch(this,
this._widgetSelectionChanged));this.subscribe("/davinci/states/state/changed",dojo.hitch(this,this._stateChanged));this.subscribe("/maqetta/appstates/state/changed",dojo.hitch(this,this._stateChanged));this.subscribe("/davinci/ui/initialPerspectiveReady",dojo.hitch(this,this._initialPerspectiveReady));this.subscribe("/davinci/workbench/ready",dojo.hitch(this,this._workbenchReady))},getPageTemplate:function(){return[{key:"widgetSpecific",className:"maqPropertySection page_editor_only",addCommonPropertiesAtTop:!1,
html:"\x3cdiv dojoType\x3d'davinci.ve.widgets.WidgetProperties'\x3e\x3c/div\x3e"},{key:"events",className:"maqPropertySection page_editor_only",addCommonPropertiesAtTop:!1,pageTemplate:{html:"\x3cdiv dojoType\x3d'davinci.ve.widgets.EventSelection'\x3e\x3c/div\x3e"}},{key:"layout",className:"maqPropertySection",addCommonPropertiesAtTop:!0,pageTemplate:[{display:"width",type:"multi",target:["width"],values:["","auto","100%","200px","10em"]},{display:"height",type:"multi",target:["height"],values:["",
"auto","100%","200px","10em"]},{html:"\x26nbsp;"},{key:"showMinMax",display:"\x26nbsp;\x26nbsp;\x26nbsp;",type:"toggleSection",pageTemplate:[{display:"min-height",type:"multi",target:["min-height"],rowClass:"propertiesSectionHidden"},{display:"max-height",type:"multi",target:["max-height"],rowClass:"propertiesSectionHidden"},{display:"min-width",type:"multi",target:["min-width"],rowClass:"propertiesSectionHidden"},{display:"max-width",type:"multi",target:["max-width"],rowClass:"propertiesSectionHidden"},
{html:"\x26nbsp;",rowClass:"propertiesSectionHidden"}]},{display:"position",type:"combo",target:["position"],values:["","absolute","fixed","relative","static"]},{display:"left",type:"multi",target:["left"],values:["","0px","1em"]},{display:"top",type:"multi",target:["top"],values:["","0px","1em"]},{display:"right",type:"multi",target:["right"],values:["","0px","1em"]},{display:"bottom",type:"multi",target:["bottom"],values:["","0px","1em"]},{display:"display",type:"combo",target:["display"],values:["",
"none","block","inline","inline-block"]},{display:"opacity",type:"multi",target:["opacity"],values:["0","0.5","1.0"]},{display:"box-shadow",type:"text",target:["box-shadow"],value:["","none","1px 1px rgba(0,0,0,.5)"]},{display:"float",type:"combo",target:["float"],values:["","none","left","right"]},{display:"clear",type:"combo",target:["clear"],values:["","none","left","right","both"]},{display:"overflow",type:"combo",target:["overflow"],values:["","visible","hidden","scroll","auto"]},{display:"z-index",
type:"multi",target:["z-index"],values:" auto 0 1 100 -1 -100".split(" ")},{display:"box-sizing",type:"combo",target:["box-sizing","-webkit-box-sizing","-ms-box-sizing","-moz-box-sizing"],values:["","content-box","border-box"]}]},{key:"padding",className:"maqPropertySection",addCommonPropertiesAtTop:!0,pageTemplate:[{display:"\x3cb\x3e(padding)\x3c/b\x3e",type:"multi",target:["padding"],values:["","0px","1em"]},{key:"showtrbl",display:"\x26nbsp;\x26nbsp;\x26nbsp;",type:"toggleSection",pageTemplate:[{display:"padding-top",
type:"multi",target:["padding-top"],values:["","0px","1em"],rowClass:"propertiesSectionHidden"},{display:"padding-right",type:"multi",target:["padding-right"],values:["","0px","1em"],rowClass:"propertiesSectionHidden"},{display:"padding-bottom",type:"multi",target:["padding-bottom"],values:["","0px","1em"],rowClass:"propertiesSectionHidden"},{display:"padding-left",type:"multi",target:["padding-left"],values:["","0px","1em"],rowClass:"propertiesSectionHidden"}]}]},{key:"margins",className:"maqPropertySection",
addCommonPropertiesAtTop:!0,pageTemplate:[{display:"\x3cb\x3e(margin)\x3c/b\x3e",type:"multi",target:["margin"],values:["","0px","1em"]},{key:"showtrbl",display:"\x26nbsp;\x26nbsp;\x26nbsp;",type:"toggleSection",pageTemplate:[{display:"margin-top",type:"multi",target:["margin-top"],values:["","0px","1em"],rowClass:"propertiesSectionHidden"},{display:"margin-right",type:"multi",target:["margin-right"],values:["","0px","1em"],rowClass:"propertiesSectionHidden"},{display:"margin-bottom",type:"multi",
target:["margin-bottom"],values:["","0px","1em"],rowClass:"propertiesSectionHidden"},{display:"margin-left",type:"multi",target:["margin-left"],values:["","0px","1em"],rowClass:"propertiesSectionHidden"}]}]},{key:"background",className:"maqPropertySection",addCommonPropertiesAtTop:!0,pageTemplate:[{display:"background-color",type:"background",target:["background-color"],colorswatch:!0},{display:"background-image",type:"background",target:["background-image"],values:["","none"]},{display:"background-repeat",
type:"background",values:["","repeat","repeat-x","repeat-y","no-repeat"],target:["background-repeat"]},{display:"background-position",type:"background",target:["background-position"],values:";0px 0px;0% 0%;left top;center center;right bottom".split(";")},{display:"background-size",type:"background",target:["background-size"],values:["","auto","contain","cover","100%"]},{display:"background-origin",type:"background",target:["background-origin"],values:["","border-box","padding-box","content-box"]},
{display:"background-clip",type:"background",target:["background-clip"],values:["","border-box","padding-box","content-box"]}]},{key:"border",className:"maqPropertySection",addCommonPropertiesAtTop:!0,pageTemplate:[{display:"\x3cb\x3e(border)\x3c/b\x3e",type:"multi",target:["border"],values:["","none","1px solid black"]},{display:"show",type:"combo",values:["none","props","sides","all"],id:"properties_show_select",onchange:function(a){if("number"==typeof a){var b=function(a,b,c,d,e){for(;b<=c;b++){var l=
dojo.byId(a[b].rowId);b>=d&&b<=e?dojo.removeClass(l,"propertiesSectionHidden"):dojo.addClass(l,"propertiesSectionHidden")}};if(this.pageTemplate){a=this.pageTemplate[a];var c;a&&a.id&&(c=dojo.byId(a.id).value);dojo.isString(c)&&("none"===c?b(this.pageTemplate,2,20,-1,-1):"sides"===c?b(this.pageTemplate,2,20,2,5):"props"===c?b(this.pageTemplate,2,20,6,8):"all"===c&&b(this.pageTemplate,2,20,9,20))}}}},{display:"border-top",type:"multi",target:["border-top"],values:["","none","1px solid black"],rowClass:"propertiesSectionHidden"},
{display:"border-right",type:"multi",target:["border-right"],values:["","none","1px solid black"],rowClass:"propertiesSectionHidden"},{display:"border-bottom",type:"multi",target:["border-bottom"],values:["","none","1px solid black"],rowClass:"propertiesSectionHidden"},{display:"border-left",type:"multi",target:["border-left"],values:["","none","1px solid black"],rowClass:"propertiesSectionHidden"},{display:"border-width",type:"multi",target:["border-width"],values:["","1px","1em"],rowClass:"propertiesSectionHidden"},
{display:"border-style",type:"multi",target:["border-style"],values:["","none","solid","dotted","dashed"],rowClass:"propertiesSectionHidden"},{display:"border-color",type:"color",target:["border-color"],rowClass:"propertiesSectionHidden"},{display:"border-top-width",type:"multi",target:["border-top-width"],values:["","1px","1em"],rowClass:"propertiesSectionHidden"},{display:"border-top-style",type:"multi",target:["border-top-style"],values:["","none","solid","dotted","dashed"],rowClass:"propertiesSectionHidden"},
{display:"border-top-color",type:"color",target:["border-top-color"],rowClass:"propertiesSectionHidden"},{display:"border-right-width",type:"multi",target:["border-right-width"],values:["","1px","1em"],rowClass:"propertiesSectionHidden"},{display:"border-right-style",type:"multi",target:["border-right-style"],values:["","none","solid","dotted","dashed"],rowClass:"propertiesSectionHidden"},{display:"border-right-color",type:"color",target:["border-right-color"],rowClass:"propertiesSectionHidden"},
{display:"border-bottom-width",type:"multi",target:["border-bottom-width"],values:["","1px","1em"],rowClass:"propertiesSectionHidden"},{display:"border-bottom-style",type:"multi",target:["border-bottom-style"],values:["","none","solid","dotted","dashed"],rowClass:"propertiesSectionHidden"},{display:"border-bottom-color",type:"color",target:["border-bottom-color"],rowClass:"propertiesSectionHidden"},{display:"border-left-width",type:"multi",target:["border-left-width"],values:["","1px","1em"],rowClass:"propertiesSectionHidden"},
{display:"border-left-style",type:"multi",target:["border-left-style"],values:["","none","solid","dotted","dashed"],rowClass:"propertiesSectionHidden"},{display:"border-left-color",type:"color",target:["border-left-color"],rowClass:"propertiesSectionHidden"},{display:"border-collapse",type:"combo",target:["border-collapse"],values:["","separate","collapse"]},{display:"\x3cb\x3e(border-radius)\x3c/b\x3e",type:"multi",target:["border-radius","-moz-border-radius"],values:["","0px","6px"]},{key:"showDetails",
display:"",type:"toggleSection",pageTemplate:[{display:"border-top-left-radius",type:"multi",target:["border-top-left-radius","-moz-border-radius-topleft"],values:["","0px","6px"],rowClass:"propertiesSectionHidden"},{display:"border-top-right-radius",type:"multi",target:["border-top-right-radius","-moz-border-radius-topright"],values:["","0px","6px"],rowClass:"propertiesSectionHidden"},{display:"border-bottom-right-radius",type:"multi",target:["border-bottom-right-radius","-moz-border-radius-bottomright"],
values:["","0px","6px"],rowClass:"propertiesSectionHidden"},{display:"border-bottom-left-radius",type:"multi",target:["border-bottom-left-radius","-moz-border-radius-bottomleft"],values:["","0px","6px"],rowClass:"propertiesSectionHidden"}]}]},{key:"fontsAndText",className:"maqPropertySection",addCommonPropertiesAtTop:!0,pageTemplate:[{display:"font",type:"text",target:["font"]},{display:"font-family",type:"font",target:["font-family"]},{display:"size",type:"multi",target:["font-size"],values:["",
"100%","1em","10px","10pt"]},{display:"color",type:"color",target:["color"]},{display:"font-weight",type:"combo",target:["font-weight"],values:["","normal","bold"]},{display:"font-style",type:"combo",target:["font-style"],values:["","normal","italic"]},{display:"text-decoration",type:"combo",target:["text-decoration"],values:["","none","underline","line-through"]},{display:"text-align",type:"combo",target:["text-align"],values:["","left","center","right","justify"]},{display:"vertical-align",type:"combo",
target:["vertical-align"],values:["","baseline","top","middle","bottom"]},{display:"white-space",type:"combo",target:["white-space"],values:" normal nowrap pre pre-line pre-wrap".split(" ")},{display:"text-indent",type:"multi",target:["text-indent"],values:["","0","1em","10px"]},{display:"line-height",type:"multi",target:["line-height"],values:["","normal","1.2","120%"]}]}]},buildRendering:function(){this.domNode=dojo.doc.createElement("div");dojo.addClass(this.domNode,"propertiesContent");var a;
a=""+this._titleBarDiv;a+="\x3cdiv class\x3d'propertiesToolBar' dojoType\x3d'davinci.ve.widgets.WidgetToolBar'\x3e\x3c/div\x3e\x3cdiv dojoType\x3d'davinci.ve.widgets.WidgetProperties'\x3e\x3c/div\x3e";a+="\x3cdiv class\x3d'propScrollableArea'\x3e";a+="\x3ctable class\x3d'propRootDetailsContainer'\x3e";a+="\x3ctr\x3e";a+="\x3ctd class\x3d'propPaletteRoot'\x3e";this.pageTemplate=this.getPageTemplate();for(var b=0;b<this.pageTemplate.length;b++)if(this.pageTemplate[b].title=n[this.pageTemplate[b].key]?
n[this.pageTemplate[b].key]:"Key not found",this.pageTemplate[b].pageTemplate)for(var c=0;c<this.pageTemplate[b].pageTemplate.length;c++)this.pageTemplate[b].pageTemplate[c].key&&(this.pageTemplate[b].pageTemplate[c].display+=n[this.pageTemplate[b].pageTemplate[c].key]?n[this.pageTemplate[b].pageTemplate[c].key]:"Key not found");this.domNode.innerHTML=a;this.inherited(arguments)},_widgetValuesChanged:function(a){var b=this._currentPropSection;if(b){for(var c=!1,d=0;d<this.pageTemplate.length;d++)if(this.pageTemplate[d].key==
b){c=!0;break}if(c)for(b=this._getVisibleCascade(d),c=0;c<b.length;c++)b[c]._widgetValuesChanged(a)}},_getVisibleCascade:function(a){if(a)return this.pageTemplate[a].cascade;a=[];var b=this._currentPropSection;if(b)for(var c=0;c<this.pageTemplate.length;c++)if(this.pageTemplate[c].key==b){a=a.concat(this.pageTemplate[c].cascade);break}return a},_updatePaletteValues:function(a){if(this._editor){u.isArray(a)||(a=[a]);var b=a[0];this._subwidget=(this._widget=b)&&b.subwidget;this.setReadOnly(!(this._widget||
this._subwidget));for(var b=this._getVisibleCascade(),c=0;c<b.length;c++)b[c]._widgetSelectionChanged(a)}else console.error("have no editor",a)},_widgetSelectionChanged:function(a){this._updatePaletteValues(a)},_stateChanged:function(){this._updatePaletteValues(this._widget?[this._widget]:[])},_widgetPropertiesChanged:function(a){this._widget||console.error("have no widget");this._widget&&this._widget.type!==a[0].type||this._updatePaletteValues(a)},_titlePaneOpen:function(a){a=this._getVisibleCascade(a);
for(var b=0;b<a.length;b++)a[b]._editorSelected({editor:this._editor})},startup:function(){this.domNode.style.height="100%";this.inherited(arguments);for(var a=0;a<this.pageTemplate.length;a++){var b=this.pageTemplate[a];if(b.pageTemplate)for(var c=0;c<b.pageTemplate.length;c++){var d=b.pageTemplate[c];d.onchange&&d.id&&dojo.connect(dojo.byId(d.id),"onchange",dojo.hitch(b,d.onchange,c))}}for(a=0;a<this.pageTemplate.length;a++)this.pageTemplate[a].cascade=[];this.setReadOnly(!0);this.onEditorSelected();
this.subscribe("/davinci/ui/widgetValuesChanged",dojo.hitch(this,this._widgetValuesChanged));this.subscribe("/davinci/ui/widgetPropertiesChanged",dojo.hitch(this,this._widgetPropertiesChanged));this.subscribe("/davinci/ui/widgetSelected",dojo.hitch(this,this._widgetSelectionChanged))},setReadOnly:function(a){for(var b=0;b<this.pageTemplate.length;b++){var c=this.pageTemplate[b].pageTemplate;if(c)for(var d=0;d<c.length;d++){var e=c[d].widget;e?e.set("readOnly",a):(e=c[d].domNode)&&dojo.attr(e,"disabled",
a)}}},_modelEntryById:function(a){for(var b=0;b<this.pageTemplate.length;b++){var c=this.pageTemplate[b].pageTemplate;if(c)for(var d=0;d<c.length;d++)if(a==c[d].id)return c[d]}},_editorSelected:function(a){this._editor=a.editor;this.onEditorSelected(this._editor);a=this.getParent();var b=a.selectedChildWidget,c=!1,d=dojo.query(".maqPropertySection",a.domNode);this._editor?"davinci.ve.PageEditor"!=this._editor.declaredClass&&"davinci.ve.themeEditor.ThemeEditor"!=this._editor.declaredClass?d.forEach(function(a){a=
dijit.byNode(a);a.controlButton&&(a.controlButton.domNode.style.display="none");a==b&&(c=!0)}):(d.forEach(function(a){a=dijit.byNode(a);a.controlButton&&(a.controlButton.domNode.style.display="")}),"davinci.ve.themeEditor.ThemeEditor"==this._editor.declaredClass&&dojo.query(".page_editor_only",a.domNode).forEach(function(a){a=dijit.byNode(a);a.controlButton&&(a.controlButton.domNode.style.display="none");a==b&&(c=!0)})):(d.forEach(function(a){dijit.byNode(a).controlButton.domNode.style.display=""}),
c=!0);c&&this._selectFirstVisibleTab()},onEditorSelected:function(){this._subWidget=this._widget=null;this._oldClassName&&(this.domNode?dojo.removeClass(this.domNode.parentNode.parentNode,this._oldClassName):console.error("have no dom node !"));if(this._editor)if(this._editor&&this._editor.editorID&&(this._oldClassName=this._editor.editorID.replace(/\./g,"_"),this.domNode?dojo.addClass(this.domNode.parentNode.parentNode,this._oldClassName):console.error("have no dom node !")),this.domNode){for(var a=
this._currentPropSection,b=dojo.query(".propSectionButton",this.domNode),c=0;c<b.length;c++){var d=b[c];this._editor&&this._editor.supports&&this._editor.supports("propsect_"+this.pageTemplate[c].key)?dojo.removeClass(d,"dijitHidden"):(dojo.addClass(d,"dijitHidden"),a==this.pageTemplate[c].key&&v.showRoot())}a=[];for(c=0;c<this.pageTemplate.length;c++)(b=this.pageTemplate[c].cascade)&&(a=a.concat(b));for(c=0;c<a.length;c++)b=a[c],b._editorSelected&&b._editorSelected({editor:this._editor})}else console.error("have no dom node !")},
destroy:function(){this.inherited(arguments)},_destroyContent:function(){var a=this.containerNode||this.domNode;for(dojo.forEach(dojo.query("[widgetId]",a).map(dijit.byNode),function(a){a.destroy()});a.firstChild;)dojo._destroyElement(a.firstChild);dojo.forEach(this._tooltips,function(a){a.destroy()});this._tooltips=void 0},sectionTitleFromKey:function(a){for(var b=0;b<this.pageTemplate.length;b++)if(this.pageTemplate[b].key==a)return this.pageTemplate[b].title},_initialPerspectiveReady:function(){if(!this._alreadySplitIntoMultipleTabs){var a=
this.tabContainer;dojo.addClass(a.domNode,"propRootDetailsContainer");dojo.addClass(a.domNode,"propertiesContent");for(var b=0;b<this.pageTemplate.length;b++){var c=this.pageTemplate[b].key,d=this.pageTemplate[b].title,h=this.pageTemplate[b].className;h||(h="");var g=this._titleBarDiv,g=g+"\x3cdiv class\x3d'propertiesToolBar' dojoType\x3d'davinci.ve.widgets.WidgetToolBar'\x3e\x3c/div\x3e",g=g+("\x3cdiv class\x3d'cascadeBackButtonDiv'\x3e\x3cbutton onclick\x3d'davinci.ve.widgets.HTMLStringUtil.showSection(\""+
c+'","'+d+"\")'\x3e"+d+" "+n.properties+"\x3c/button\x3e\x3c/div\x3e"),c=v.generateTemplate(this.pageTemplate[b]),g=g+c;0==b?(g=this,g.set("title",d),dojo.addClass(g.domNode,h)):g=a.createTab(d,null,null,null,{content:g,"class":h,delegate:this}).add(e,{title:d,content:g,"class":h,delegate:this},null,!0);g._maqPropGroup=this.pageTemplate[b].key;d=dojo.query(".paletteCloseBox",g.domNode);0<d.length&&dojo.connect(d[0],"click",this,function(a){davinci.Workbench.collapsePaletteContainer(a.currentTarget)})}for(d=
0;d<this.pageTemplate.length;d++)if(this.pageTemplate[d].cascade=[],h=this.pageTemplate[d].pageTemplate){for(b=0;b<h.length;b++)g=h[b].id,(c=dijit.byId(g))?h[b].widget=c:(c=dojo.byId(g))&&(h[b].domNode=c);dojo.query("#"+this.pageTemplate[d].id+" .CascadeTop").forEach(function(a){return function(b){b=dijit.byId(b.id);a.cascade.push(b)}}(this.pageTemplate[d]))}dojo.connect(a,"selectChild",this,function(a){"none"!=a.controlButton.domNode.style.display||this._recursiveSelectChildInProcess?a._maqPropGroup&&
(this._currentPropSection=a._maqPropGroup,a=(a=this._editor&&this._editor.getContext?this._editor.getContext():null)&&a.getSelection?a.getSelection():this._widgets,this._updatePaletteValues(a),v._initSection(this._currentPropSection)):(this._recursiveSelectChildInProcess=!0,this._selectFirstVisibleTab(),delete this._recursiveSelectChildInProcess)});this._alreadySplitIntoMultipleTabs=!0}},_workbenchReady:function(){this._updateToolBars()},_updateToolBars:function(){dojo.query(".propertiesToolBar").forEach(function(a){this._editor&&
"davinci.ve.PageEditor"==this._editor.declaredClass?(dojo.removeClass(a,"dijitHidden"),a.style.display=""):dojo.addClass(a,"dijitHidden")}.bind(this))},_selectFirstVisibleTab:function(){for(var a=this.getParent(),b=a.getChildren(),c=0;c<b.length;c++){var d=b[c];if("none"!=d.controlButton.domNode.style.display){a._maqDontExpandCollapse=!0;a.selectChild(d);delete a._maqDontExpandCollapse;break}}}})})},"xideve/widgets/WidgetLite":function(){define(["dojo/_base/declare","dijit/_WidgetBase","dojo/parser",
"xide/mixins/EventedMixin"],function(p,u,n,m){return p("xideve/widgets/WidgetLite",[u,m],{buildRendering:function(){this.inherited(arguments);/dojotype/i.test(this.domNode.innerHTML||"")&&(this._startupWidgets=dojo.parser.parse(this.domNode,{noStart:!this._earlyTemplatedStartup,inherited:{dir:this.dir,lang:this.lang}}))},_destroyContent:function(){var d=this.containerNode||this.domNode;for(dojo.forEach(dojo.query("[widgetId]",d).map(dijit.byNode),function(d){d.destroy()});d.firstChild;)dojo._destroyElement(d.firstChild);
dojo.forEach(this._tooltips,function(d){d.destroy()});delete this._tooltips},startup:function(){dojo.forEach(this._startupWidgets,function(d){d&&!d._started&&d.startup&&d.startup()});this.inherited(arguments)}})})},"xideve/manager/WidgetManager":function(){define("dcl/dcl xdojo/declare dojo/_base/lang dojo/dom-construct xide/manager/ManagerBase xide/mixins/ReloadMixin xide/types xide/utils xide/factory xide/layout/ContentPane xide/widgets/_MenuMixin2 xide/mixins/ActionMixin xaction/Action ./WidgetManagerBlox ./WidgetManagerJS xide/mixins/VariableMixin davinci/ve/metadata".split(" "),
function(p,u,n,m,d,e,k,g,v,I,q,b,a,c,h,l,A){g.mixin(k.ACTION_VISIBILITY,{WIDGET_PROPERTY:"WIDGET_PROPERTY"});var F={onclick:null,ondblclick:null,onmousedown:null,onmouseup:null,onmouseover:null,onmousemove:null,onmouseout:null,onkeypress:null,onkeydown:null,onkeyup:null,onfocus:null,onblur:null,onchange:null};return p([d,e.dcl,c,h,q,l.dcl],{declaredClass:"xideve/manager/WidgetManager",currentContext:null,_currentWidget:null,visibility:k.ACTION_VISIBILITY.WIDGET_PROPERTY,onReloaded:function(){},onLibraryContainerCreated:function(a){},
onContextReady:function(a){},_completeEventInfo:function(a){var b=a.target||null,c=a.widget?a.target.getContext():null;a.editor=c.editor?c.editor:c._edit_context.editor;var d=c?c.getGlobal():null,c=c.appContext,e=c.application,h=b.domNode||b;b.isDijitWidget&&(h=b.dijitWidget.domNode);a.appSettings=e.settings;a.appContext=c;a.app=e;a.global=d;a.node=h;a.widgetContext=b;a.dijitWidget=b.isDijitWidget?b.dijitWidget:null;return a},onWidgetPropertyChanged:function(a){a=this._completeEventInfo(a);var b=
a.widgetProperty,c=a.node,d=a.dijitWidget,e=b in F,h=a.global;b&&c&&e&&d&&d.on&&(c.removeAttribute(b),c[b]&&c.removeEventListener(b,c[b]),c[b]=null,h.dojo.setAttr(a.node,a.widgetProperty,""),h.dojo.setAttr(a.node,a.widgetProperty,a.value))},onWidgetPropertyRendered:function(a){if(!a.wmHandled){a.wmHandled=!0;var b=a.row;switch(b.type){case "widgetState":this.onStatePropertyRendered(b,a.node,a.view,a.row)}}},onStatePropertyRendered:function(a,b,c,d){if(!b._selectize){var e=$(b).selectize({value:"Test,Another",
delimiter:",",persist:!1,maxItems:1,create:!0,sortField:"text"}).data().selectize;b._selectize=e;e.on("change",function(){var a=e.getValue(),b={};b.state=a;a=new davinci.ve.commands.ModifyCommand(e._widget,b,null);dojo.publish("/davinci/ui/widgetPropertiesChanges",[{source:e._context.editor_id,command:a}])})}b._selectize.setValue([],!0);c._widget&&(a=g.getNode(c._widget))&&a.getStates&&(d=a.getStates(),_.each(d,function(a){b._selectize.addOption({value:a.name,text:a.name})}),b._selectize.setValue(a.state,
!0),b._selectize._widget=c._widget,b._selectize._context=c.context)},defaultNumberActions:function(b){var c=this,d=a.createDefault("Javascript","fa-code","Widget/Bind to Javascript","widgetPropertyAction",function(a,b,d,e,h){c.onJavascript(h.context)});d.setVisibility(this.visibility,{});d.context=b;var e=a.createDefault("XBlox","fa-play-circle-o","Widget/Bind to XBlox","widgetPropertyAction",function(a,b,d,e,h){c.onXBlox(h.context)});e.setVisibility(k.ACTION_VISIBILITY.WIDGET_PROPERTY,{});e.context=
b;return[d,e]},_showContextActions:function(a,b,c,d){},_createContextMenu:function(a,b,c,d){},doWidgetPropWizard:function(a,b,c,d,e){this._createContextMenu(d,b,c,e)},renderBlockWidget:function(a,b,c){},onNumberPropertyRendered:function(a,b,c,d){},onContextLoaded:function(a){this.currentContext=a},onEventPropertyRendered:function(a,b,c){},onEventSelectionRendered:function(a){},onSelectionChanged:function(a){},onWidgetSelected:function(a){},renderFileWidget:function(a,b,c){var d=b;b.parentNode&&b.parentNode.nextSibling&&
-1!=b.parentNode.nextSibling.className.indexOf("propertyExtra")&&(d=b.parentNode.nextSibling);var e=v.createButton(m.create("div"),"el-icon-folder-open","elusiveButton","","",function(){this.onSelectFile(b,a,c)}.bind(this),this);dojo.place(e.domNode,d,"after")},init:function(){this.subscribe("/davinci/ui/onSelectionChanged",this.onSelectionChanged);this.subscribe("/davinci/ui/widgetSelected",this.onWidgetSelected);this.subscribe("/davinci/ui/context/loaded",this.onContextLoaded);this.subscribe([k.EVENTS.WIDGET_PROPERTY_RENDERED,
k.EVENTS.ON_EVENT_SELECTION_RENDERED,k.EVENTS.ON_WIDGET_PROPERTY_CHANGED,k.EVENTS.ON_LIBRARY_CONTAINER_CREATED,k.EVENTS.ON_CONTEXT_READY])}})})},"xideve/manager/WidgetManagerBlox":function(){define(["dcl/dcl","xdojo/declare","xide/types","xide/utils","xide/views/CIActionDialog"],function(p,u,n,m,d){return p(null,{declaredClass:"xideve/manager/WidgetManagerBlox",_removeEventHandlers:function(d,k){},_setEventHandler:function(d,k,g){if(d._attachEvents){var m=k.replace("on","");_.each(d._attachEvents,
function(g){g.type===m&&g.remove();d._attachEvents.remove(g)});if(g){var n=new Function("{"+g+"; }");g=d.on(m,function(g){n.call(d,g)});g.type=k;d._attachEvents.push(g)}}},onModifiedXBLOX:function(d){},openBloxWizard:function(e){var k=this;e=this._completeEventInfo(e);var g="min.xblox",p="workspace";if(e.appSettings&&e.appSettings.xbloxScripts&&0<e.appSettings.xbloxScripts.length)var u=e.appSettings.xbloxScripts[0],g=u.path.replace("./",""),p=u.mount;var q=null;this.ctx.getBlockManager().load(p,g).then(function(b){k.ctx.blockManager.ignoreItemSelection=
!0;var a=dojo.subscribe("onItemSelected",function(a){q=a.item}),c=(""+e.value).split(","),h=m.replaceAll("'","",c[1]),c=dojo.fromJson(c[3]);q=b.getBlockById(h);(new d({title:"Select Block and override inputs",style:"width:800px;min-height:600px;",resizeable:!0,delegate:{onOk:function(b,c){var d=m.getCIInputValueByName(c,"Settings");if(q){k.ctx.blockManager.ignoreItemSelection=!1;var h=m.buildPath(p,g,!1);if(q){var n="";d&&(n=","+d);d="runBlox('"+h+"','"+q.id+"',this"+n+")";k._setEventHandler(e.dijitWidget||
e.node,e.widgetProperty,d);e.editor.setDirty(!0);e.widget.set("value",d);k.onModifiedXBLOX(e,q)}a.remove()}}},cis:[m.createCI("Block",n.ECIType.BLOCK_REFERENCE,"",{group:"Block",delegate:null,showDialog:!1,scope:b,block:q}),m.createCI("Settings",n.ECIType.BLOCK_SETTINGS,"",{group:"Settings",scope:b,block:q,settings:c})]})).show()})},onXBlox:function(d){var k=d.row.widget,g="";k||(k=dijit.byId(d.row.id))&&(g=k.get("value"));!k&&(k=dojo.byId(d.row.id))&&(g=k.value);this.openBloxWizard({owner:this,delegate:this,
widget:k,value:g,target:d.widget,widgetProperty:d.row.display,meta:{context:d}})}})})},"xideve/manager/WidgetManagerJS":function(){define(["dcl/dcl","xide/types","xide/utils","xide/views/CIActionDialog"],function(p,u,n,m){return p(null,{declaredClass:"xideve/manager/WidgetManagerJS",onReloaded:function(){console.error("reloadex2:")},onModifiedJS:function(d){},_createView:function(d,e){var k=this,g=e.target||null,p=e.widget?e.target.getContext():null,I=p?p.getGlobal():null;(new m({title:"Javascript",
style:"width:800px;min-height:600px;",resizeable:!0,delegate:{onOk:function(d,b){var a=n.getCIInputValueByName(b,"Expression");p.editor.setDirty(!0);e.widget.set?e.widget.set("value",a):null!=e.widget.value&&(e.widget.value=a,e.widget.owner._onChange({target:e.widget.pageIndex}));k.onModifiedJS(a,e)}},cis:[n.createCI("Settings",u.ECIType.STRING,d,{group:"Settings"}),n.createCI("Expression",u.ECIType.EXPRESSION_EDITOR,d,{group:"Script",delegate:{runExpression:function(d,b,a){var c=null;if(I.runx)try{c=
I.runx(g,d)}catch(e){if(a){a(""+e);return}}else c=I.eval.call(g,d);b&&b("Expression "+d+" evaluates to; "+c)}}})]})).show()},openJSWizard:function(d){this._createView(d.value,d)},onJavascript:function(d){var e=d.row.widget,k="";e||(e=dijit.byId(d.row.id))&&(k=e.get("value"));!e&&(e=dojo.byId(d.row.id))&&(k=e.value);this.openJSWizard({owner:this,delegate:this,widget:e,value:k,target:d.widget,meta:{context:d}})}})})},"xideve/manager/ContextManager":function(){define("dcl/dcl dojo/Deferred xide/manager/ManagerBase xide/mixins/VariableMixin xide/mixins/ReloadMixin xide/types xide/utils xide/mixins/EventedMixin davinci/ve/widget xide/manager/ServerActionBase xide/encoding/SHA1".split(" "),
function(p,u,n,m,d,e,k,g,v,I,q){return p([n,I,m.dcl,d.dcl],{declaredClass:"xideve/manager/ContextManager",serviceClass:"XIDE_VE_Service",singleton:!0,contexts:[],variableDelimiters:{begin:"%%",end:"%%"},onReloaded:function(){},getViewUrl:function(b,a,c){b||console.error("invalid item!");a=this.ctx.getFileManager().config;var d=decodeURIComponent(a.FILE_SERVICE),d=d.replace("view\x3drpc","view\x3dsmdCall");b=k.buildPath(b.mount,b.path,!0);b=this.base64_encode(b);var e=this.serviceClass,d=-1!=d.indexOf("?")?
d+"\x26":d+"?",d=d+("service\x3d"+e+".view\x26file\x3d"+b+"\x26callback\x3dasdf")+"\x26raw\x3dhtml",d=d+"\x26attachment\x3d0",d=d+"\x26send\x3d1",g=k.getUrlArgs(location.href);k.mixin(g,{service:e+".view",path:b,callback:"asdf",raw:"html",attachment:"0",send:"1"});k.mixin(g,c);b=JSON.stringify(g);b=q._hmac(b,a.RPC_PARAMS.rpcSignatureToken,1);d+="\x26"+a.RPC_PARAMS.rpcUserField+"\x3d"+a.RPC_PARAMS.rpcUserValue;d+="\x26"+a.RPC_PARAMS.rpcSignatureField+"\x3d"+b;if(c)for(var m in c)d+="\x26"+m+"\x3d"+
c[m];return d},viewFile:function(b){b={path:"delite.html",mount:"workspace"};this.getViewUrl(b)},onBuildDojoConfig:function(b){b&&b.data&&b.data&&(b=b.data,b.baseUrl&&(b.baseUrl=this.resolve(b.baseUrl)))},onSetDojoUrl:function(b){b&&b.data&&b.data&&b.data.dojoUrl&&(b.data.dojoUrl=this.resolve("%%XIDEVE_DOJO_URL%%"))},onSetSourceData:function(b){b.context.widgetsReadyDfd&&(delete b.context.widgetsReadyDfd,b.context.widgetsReadyDfd=null);b.context.widgetsReadyDfd=new u},onGetLoaderPackages:function(b){var a=
dojo.baseUrl,c=function(b,c,d,e){b.packages.push({name:c,location:!0!==e?a+"/"+(d||"")+c:a+"/"+c+"-release/"+c})};c(b,"xapp");c(b,"dijit");c(b,"dojox");c(b,"xblox");c(b,"dstore");c(b,"xide");c(b,"xfile");c(b,"xwire");c(b,"xlang");c(b,"xaction");c(b,"xgrid");c(b,"xnode");c(b,"delite","ibm-js/");c(b,"deliteful","ibm-js/");c(b,"decor","ibm-js/");c(b,"dpointer","ibm-js/");c(b,"dcl","ibm-js/");c(b,"requirejs-dplugins","ibm-js/");c(b,"requirejs-domready","ibm-js/");c(b,"requirejs-text","ibm-js/");c(b,"jquery",
"ibm-js/")},onContextLoaded:function(b){this.currentContext=b;var a=b.global,c=this;a._=window._;a.Velocity=window.Velocity;a.delegate=this;a.bootx&&a.bootx({delegate:this},u).then(function(a){b.appContext=a.context;c.onContextReady(b,a.context,a.settings)},function(a){console.error("error global.bootx "+a,a)})},onContextReady:function(b,a,c){var d=b.global,g=b.getDocument(),m=this;a.fileManager=this.ctx.fileManager;a.resourceManager=this.ctx.resourceManager;a.driverManager=m.ctx.driverManager;a.deviceManager=
m.ctx.deviceManager;a.nodeServiceManager=m.ctx.nodeServiceManager;a.blockManager=m.ctx.blockManager;a.delegate={isDesignMode:function(){return b.isDesignMode()},getBlockSettings:function(){return b.getBlockSettings()},getEditorContext:function(){return b}};c.delegate=m;c.xbloxScripts=[];a.initVe();a.notifier.publish("onContextReady",a);a.notifier.publish("DevicesConnected");if(c.xbloxScripts){var n=function(){m.ctx.getBlockManager().loadFiles(c.xbloxScripts).then(function(k){c.didXBLOX=!0;var n={context:b,
appContext:a,appSettings:c,ctx:m.ctx,global:d,document:g,blockScopes:k};p.onSceneBlocksLoaded(n);var q=p.item._S,x=p.item.getParent();a.settings=c;a.onReady(c);q.resetQueryLog();q._loadPath(x.path,!0).then(function(){"."===x.path&&q.resetQueryLog();m.publish(e.EVENTS.ON_CONTEXT_READY,n);m.onSceneBlocksLoaded(n)});a.__didv||(a.__didv=!0)})},p=b.getVisualEditor();if(0==c.xbloxScripts.length){var q=b.getVisualEditor().item;if(q){var x=k.replaceAll("/","",q.mount),u=k.getFileExtension(q.path),q=q.path.replace("."+
u,".xblox");c.xbloxScripts.push({mount:x,path:q});this.ctx.getFileManager().mkfile(x,q,JSON.stringify({blocks:[],variables:[]},null,2)).then(function(){n()})}}}a.application.run(c);q={context:b,application:a.application,delegate:this};this.publish(e.EVENTS.ON_APP_READY,q);window.lastVEApp=q;for(x=0;x<this.contexts.length;x++)if(q=this.contexts[x],q.context==b)return;this.contexts.push({context:b,appContext:a,global:d,doc:g})},onBuildHeader:function(b){if(b&&b.data&&b.data.styleSheets)for(var a=b.data.styleSheets,
c=0;c<a.length;c++)b.data.styleSheets[c]=this.resolve(a[c])},onModuleUpdated:function(b){_.each(this.contexts,function(a){a.appContext.onModuleUpdated(b)},this)},onDriverVariableChanged:function(b){_.each(this.contexts,function(a){a.context.isDesignMode()||a.appContext.publish("onDriverVariableChanged",b)},this)},onContextDestroyed:function(b){var a=_.find(this.contexts,{context:b});a&&(b.systemEvents&&_.each(b.systemEvents,function(a){a&&a.remove?a.remove():console.error("have invalid handle!")}),
this.contexts.remove(a))},getVariable:function(b,a,c){a=this.ctx.getDeviceManager();var d=a.getDeviceById(b),g=null;if(!d)return null;(b=d.driver)&&b.blockScope&&(b=b.blockScope);b||(console.error("have no driver, use driver from DB"),d&&(a=a.getMetaValue(d,e.DEVICE_PROPERTY.CF_DEVICE_DRIVER),b=this.ctx.getBlockManager().getScope(a),g=b.getVariableById(a+"/"+c)));return g},getBlock:function(b){return this.ctx.getDeviceManager().getBlock(b)},wireNode:function(b,a,c,d,l,m){var n=this,p=null,q=null;
if(m&&a===e.EVENTS.ON_DRIVER_VARIABLE_CHANGED)var x=m.params[2],p=function(a){a=a.item;var b=n.getBlock(x);return b&&a&&b.id===a.id||a.id===x?!1:!0},q=function(a,b){a.override={variables:{value:b.item.value}}};if(b)if(c)if(a)if(_.isString(a))if(d.systemEvents||(d.systemEvents=[]),"BODY"===b.tagName&&b._destroyHandles&&(b._destroyHandles(),delete b.__setup),b.__setup||(b.__setup={}),b.__setup[c.id])console.error("did wire "+c.name+" to "+b.id+"_"+b["wire id"],b);else{b.__setup[c.id]=!0;b["wire id"]||
(b["wire id"]=k.createUUID());c&&b&&(c.context=b,c._targetReference=b);var u=function(a,b,c,e){"load"!==a&&d&&d.isDesignMode&&d.isDesignMode()||p&&p(b)||c._destroyed||!c.enabled||!c||!e||(c.context=e,c._targetReference=e,q&&q(c,b),c.solve(c.scope,{highlight:!0,args:[b]}))};b.subscribe||k.mixin(b,g.prototype);var v=b.domNode||b;l=a;m=b.declaredClass||b.startup;var H=null!=b.on&&null!=b["on"+k.capitalize(l)],J=null,K=null!=v.render&&null!=v.on;if(m&&b.baseClass&&-1!=b.baseClass.indexOf("dijitContentPane")||
null!=b.render||null!=b.on)m=!1;v&&(K||H&&m?(v=b,K?k.isSystemEvent(a)?J=v.subscribe(a,function(d){u(a,d,c,b)}.bind(this),b):(k.isNativeEvent(a)&&(a=a.replace("on","")),J=v.on(a,function(d){var e=d.target.value;"checked"in d.target&&(e=d.target.checked);u(a,e,c,b)}.bind(this))):(l="on"+k.capitalize(l),b[l]=function(b,c){!0!==v.ignore&&u(a,b)})):k.isSystemEvent(a)?(l=function(d){u(a,d,c,b)}.bind(this),J=b.subscribe(a,l),console.error("add destroy handle "+c.scope.id),c._on("destroy",function(){console.error("block destroyed");
J.remove()})):J=b.__on(v,a,function(d){u(a,d,c,b)}),J?(b.addHandle&&b.addHandle(a,J),c._widgetHandles||(c._widgetHandles=[]),c._widgetHandles.push(J)):console.error("wire widget: have no handle",b))}else console.error("event not string ",a);else console.error("have no event");else console.error("have no block for event "+a);else console.error("have no widget for event "+a)},wireWidget:function(b,a,c,d,e,g,k,m,n){a=c.getBlocks({group:k});for(c=0;c<a.length;c++)this.wireNode(d.domNode,g,a[c],b,m,n)},
wireWidget2:function(b,a,c,d,e){for(var g=c.allGroups(),m=[],n=0;n<g.length;n++){var p=g[n],q;var u=p,u=u||"",D=q=null,u=u.split("__"),H=[];1==u.length&&(q=u[0],D="body",b.rootWidget.domNode.runExpression=b.global.runExpression);if(2==u.length){var J=void 0;-1!==u[1].indexOf("://")?(q=u[0],D="body",J=u[1]):(q=u[1],D=u[0]);J&&(H=k.parse_url(J),H=k.urlArgs(H.host),H=[H.device.value,H.driver.value,J])}3==u.length&&(q=u[1],D=u[0],J=u[2],H=k.parse_url(J),H=k.urlArgs(H.host),H=[H.device.value,H.driver.value,
J]);5==u.length&&(q=u[1],D=u[0],H=[u[2],u[3],u[4]]);q&&D?(u=v.byId(D),"body"===D&&(u=b.rootWidget),q={event:q,widgetId:D,widget:u,params:H}):q=null;q?q.widget==e&&(this.wireWidget(b,a,c,q.widget,q.widget.domNode,q.event,p,d,q),q.widget&&-1==m.indexOf(q.widget)&&m.push(q.widget)):console.error("invalid params for group "+p)}for(n=0;n<m.length;n++){e=m[n];e.domNode&&(e=e.domNode);if(e.__didEmitLoad)break;e.__didEmitLoad=!0;e.emit&&e.emit("load",e)}},wireScope:function(b,a,c,d){for(var g=c.allGroups(),
m=this,n=[],p=function(a){var c=null,d=null;a=(a||"").split("__");var e=[];1==a.length&&(c=a[0],d="body",b.rootWidget.domNode.runExpression=b.global.runExpression);if(2==a.length){var g;-1!==a[1].indexOf("://")?(c=a[0],d="body",g=a[1]):(c=a[1],d=a[0]);g&&(e=k.parse_url(g),e=k.urlArgs(e.host),e=[e.device.value,e.driver.value,g])}3==a.length&&(c=a[1],d=a[0],g=a[2],e=k.parse_url(g),e=k.urlArgs(e.host),e=[e.device.value,e.driver.value,g]);5==a.length&&(c=a[1],d=a[0],e=[a[2],a[3],a[4]]);return c&&d?(a=
v.byId(d),"body"===d&&(a=b.rootWidget),{event:c,widgetId:d,widget:a,params:e}):null},q=function(a){a._on(e.EVENTS.ON_ITEM_REMOVED,function(b){try{if(a._widgetHandles){var c=a._widgetHandles;for(b=0;b<c.length;b++)c[b].remove&&c[b].remove();delete a._widgetHandles}}catch(d){console.error("troubble!"+d,d)}},this)},u=0;u<g.length;u++){var I=g[u],D=p(I);if(D){D.widget&&this.wireWidget(b,a,c,D.widget,D.widget.domNode,D.event,I,d,D);for(var I=c.getBlocks({group:I}),H=0;H<I.length;H++)q(I[H]);D.widget&&
-1==n.indexOf(D.widget)&&n.push(D.widget)}else console.error("invalid params for group "+I)}for(u=0;u<n.length;u++){a=n[u];a.domNode&&(a=a.domNode);if(a.__didEmitLoad)return;a.__didEmitLoad=!0;"BODY"===a.nodeName?$(a.nodeName).trigger("load"):a.emit&&a.emit("load",a)}c._on(e.EVENTS.ON_ITEM_REMOVED,function(a){});c._on(e.EVENTS.ON_ITEM_ADDED,function(a){var c=p(a.item.group);c&&c.widget&&(m.wireNode(c.widget.domNode,c.event,a.item,b,c),q(a.item))})},onSceneBlocksLoaded:function(b){var a=b.context,
c=b.appContext,d=b.global,e=b.blockScopes,g=this;b.context.widgetsReadyDfd&&b.context.widgetsReadyDfd.then(function(){if(!c.didWireWidgets){c.didWireWidgets=!0;for(var b=0;b<e.length;b++){var k=e[b];k.global=d;k.document=a.getDocument();k.editorContext=a;k.appContext=c;g.wireScope(a,g.ctx,k,c)}}})},onItemRemoved:function(b){},init:function(){this.subscribe("/davinci/ui/context/loaded",this.onContextLoaded);this.subscribe([e.EVENTS.ON_GET_LOADER_PACKAGES,e.EVENTS.ON_BUILD_HEADER,e.EVENTS.ON_BUILD_DOJO_CONFIG,
e.EVENTS.ON_SET_SOURCE_DATA,e.EVENTS.ON_SET_DOJO_URL,e.EVENTS.ON_MODULE_UPDATED,e.EVENTS.ON_CONTEXT_DESTROYED,e.EVENTS.ON_DRIVER_VARIABLE_CHANGED,e.EVENTS.ON_ITEM_REMOVED])}})})}}});define("xideve/xideve",["dojo","dijit","dojox"],function(p,u,n){});
//# sourceMappingURL=xideve.js.map