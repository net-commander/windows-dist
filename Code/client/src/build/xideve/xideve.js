//>>built
require({cache:{"xideve/types":function(){define(["xide/types","xide/utils"],function(u,w){w.mixin(u,{VE_LAYOUT_RIGHT_CENTER_BOTTOM:"VE_LAYOUT_RIGHT_CENTER_BOTTOM",VE_LAYOUT_CENTER_BOTTOM:"VE_LAYOUT_CENTER_BOTTOM",VE_LAYOUT_CENTER_RIGHT:"VE_LAYOUT_CENTER_RIGHT",VE_LAYOUT_LEFT_CENTER_RIGHT:"VE_LAYOUT_LEFT_CENTER_RIGHT",VE_LAYOUT_LEFT_CENTER_RIGHT_BOTTOM:"VE_LAYOUT_LEFT_CENTER_RIGHT_BOTTOM"});w.mixin(u.EVENTS,{WIDGET_PROPERTIES_RENDERED:"OnWidgetPropertiesRendered",WIDGET_PROPERTY_RENDERED:"onWidgetPropertyRendered",
ON_SET_WIDGET_PROPERTY_ACTIONS:"onSetWidgetPropertyActions",ON_GET_LOADER_PACKAGES:"onGetLoaderPackages",ON_VISUAL_EDITOR_SAVE:"onVisualEditorSave",ON_BUILD_HEADER:"onBuildHeader",ON_BUILD_DOJO_CONFIG:"onBuildDojoConfig",ON_SET_DOJO_URL:"onSetDojoUrl",ON_SET_SOURCE_DATA:"onSetSourceData",ON_EVENT_SELECTION_RENDERED:"onEventSelectionRendered",ON_WIDGET_PROPERTY_CHANGED:"onWidgetPropertyChanged",ON_LIBRARY_CONTAINER_CREATED:"onLibraryContainerCreated",ON_CONTEXT_READY:"onContextReady",ON_CONTEXT_DESTROYED:"onContextDestroyed",
ON_BUILD_WIDGET_BLOCK_LIBRARY:"onBuildWidgetBlockLibrary",ON_SHOW_BLOCK_SMART_INPUT:"onShowBlockSmartInput",ON_WIDGET_CHANGED:"onWidgetChanged"});return u})},"xideve/views/VisualEditor":function(){define("dcl/dcl dojo/dom-construct dojo/Deferred dojo/promise/all require xide/layout/ContentPane xide/layout/_Accordion xide/utils xide/types davinci/ve/PageEditor davinci/Runtime davinci/Workbench dojo/_base/connect dojo/dom-class davinci/ve/metadata davinci/ve/views/SwitchingStyleView xideve/views/OutlineView xideve/views/OutlineGridView xide/registry xide/layout/_TabContainer xideve/views/VisualEditorSourceEditor xideve/views/VisualEditorLayout xideve/views/VisualEditorAction xideve/views/VisualEditorTools xide/editor/Default xide/_base/_Widget xide/mixins/ReloadMixin xblox/model/html/SetStyle xblox/model/html/SetCSS xblox/model/html/SetState wcDocker/splitter xideve/palette/Palette xdojo/declare xgrid/Grid xgrid/TreeRenderer xgrid/KeyboardNavigation xide/widgets/_Widget dstore/Trackable xide/data/TreeMemory xaction/DefaultActions xide/form/Checkbox dgrid/Editor xide/factory davinci/ve/tools/CreateTool xide/views/SimpleCIDialog xide/widgets/TemplatedWidgetBase".split(" "),
function(u,w,k,q,h,n,p,g,d,t,G,b,c,C,a,e,A,I,D,Q,K,H,B,l,J,v,m,F,R,x,M,L,P,y,z,ba,Z,r,O,S,N,U,E,V,Y,ca){function aa(){var a=this,l=this.getPageEditor().getDesignPane().getFrame().$buttonBar;g.destroy(window._cb);l=g.addWidget(N,{title:"Preview",userData:{value:!1}},null,l[0],!0);$(l.domNode).css("float","right");var b=$(l.domNode).find(".checkbox");b.css("margin-top","3px");b.css("margin-right","10px");b.css("margin-bottom","0");l._on("change",function(l){l?a.runAction("View/Show/Preview"):a.runAction("View/Show/Design")});
this.add(l);this._designToggle=l;window._cb=l}console.clear();if(window.vee)vee.onReload();window.editWidget=function(a,l,b){var e=a.domNode;l.getEditorContext();var c=[g.createCI("Name",d.ECIType.STRING,e.name,{group:"General"}),g.createCI("Style",d.ECIType.DOM_PROPERTIES,"",{group:"Style",widget:{open:!0,widget:a,value:$(e).attr("style"),ctx:l.ctx}})];Y.create("Edit widget",c,function(e){var m={name:c[0].value||"noname",style:c[1].value};u(ca,{templateString:'\x3cdiv class\x3d"CIActionWidget"\x3e\x3c/div\x3e',
widgetClass:""});e=l.getEditorContext();m=new davinci.ve.commands.ModifyCommand(a,m,null);dojo.publish("/davinci/ui/widgetPropertiesChanges",[{source:e.editor_id,command:m}]);b()}).show()};var fa=y.createGridClass("StatesView",{menuOrder:{File:110,Edit:100,View:90,Block:50,Settings:20,Navigation:10,Step:5,New:4,Instance:3,Window:2},options:g.clone(d.DEFAULT_GRID_OPTIONS),getRootFilter:function(){return{parentId:"."}},postMixInProperties:function(){this.columns=[{label:"Visibile",field:"visible",sortable:!1,
get:function(a){return a.widget.isActive(a.state.name)},editorArgs:{title:""},width:"30px",editor:N},{renderExpando:!0,label:"Name",field:"name",sortable:!0}]},runAction:function(l){var b=this,e=this.getSelection(),c=function(l,e){var c=e.getEditorContext(),m=[g.createCI("Name",d.ECIType.STRING,"noname",{group:"General"}),g.createCI("Style",d.ECIType.DOM_PROPERTIES,"",{group:"Style",widget:{open:!0}})];Y.create("Create New Style State",m,function(e){var B={context:c,type:"xblox/StyleState",properties:{name:m[0].value||
"noname",style:m[1].value},userData:{}},d=a.getMetadata(B.type);a.getHelper(l.type,"tool").then(function(a){a=new (a||V)(B,{});a._context=c;c.setActiveTool(a);a._create({position:{x:0,y:0},parent:l,userData:d});c.setActiveTool(null)}.bind(b))}).show()},m=this.editor,B=m.getEditorContext(),v=function(a,l,b){var e=B.toWidget(b);a.removeState(b);B.select(e,null,null,!0);l.runAction("Edit/Delete");B.select(B.toWidget(a))},A=function(a){var l=[g.createCI("Name",d.ECIType.STRING,a.name,{group:"General"})];
Y.create("Edit widget",l,function(b){b=m.ctx.getLibraryManager();var e={type:"xblox/StyleState",properties:{style:$(a).attr("style")}};b.setSetting(l[0].value||a.name,e)}).show()};switch(l.command){case "File/Edit":return e.length?window.editWidget(B.toWidget(e[0].state),m,function(){B.select(B.toWidget(e[0].widget))}):void 0;case "File/Delete":return e.length?v(e[0].widget,this.editor,e[0].state):void 0;case "New/State":return c(this.editor.getSelection()[0],this.editor);case "File/Save":return e.length?
A(e[0].state):void 0}return this.inherited(arguments)},startup:function(){var a=this,l={addPermission:!0,quick:!0},b=[];this.editor.ctx.getLibraryManager().getStore().on("update",function(){a.refresh()});b.push(this.createAction({label:"New State",command:"New/State",icon:"fa-magic",tab:"Home",group:"View",mixin:l}));b.push(this.createAction({label:"Save to Palette",command:"File/Save",icon:"fa-save",tab:"Home",group:"View",mixin:l}));this.addActions(b);l=S.getDefaultActions(this.permissions,this,
this);this.addActions(l);this.inherited(arguments);this._showHeader(!1);var e=function(l,b){var e=a.editor.getEditorContext(),c={};c.state=b;l=new davinci.ve.commands.ModifyCommand(l,c,null);dojo.publish("/davinci/ui/widgetPropertiesChanges",[{source:e.editor_id,command:l}])};this.on("dgrid-datachange",function(l){var b=a.row(l.target).data.state;if(a.widgetSelection.length){var c=a.widgetSelection[0],m=c.domNode;l.value?e(c,m.enableState(b)):e(c,m.disableState(b))}})}},{SELECTION:!0,KEYBOARD_SELECTION:!0,
PAGINATION:!1,ACTIONS:d.GRID_FEATURES.ACTIONS,CONTEXT_MENU:d.GRID_FEATURES.CONTEXT_MENU,TOOLBAR:d.GRID_FEATURES.TOOLBAR,CLIPBOARD:d.GRID_FEATURES.CLIPBOARD,KEYBOARD_NAVIGATION:{CLASS:ba},_WIDGET:{CLASS:Z},EDITOR:{CLASS:U}},{RENDERER:z},null,null);M=d.ACTION;var ga=[M.EDIT,M.RENAME,M.RELOAD,M.DELETE,M.SELECTION,M.TOOLBAR,M.SEARCH,M.CONTEXT_MENU],ha=function(){return new (P("paletteStore",[O,r],{}))({data:[],idProperty:"id",parentProperty:"parentId",id:g.createUUID(),ctx:sctx,mayHaveChildren:function(){return!1},
getRootItem:function(){return{_EX:!0,id:".",name:".",group:!0,virtual:!0,_S:this,getPath:function(){return this.id}}},getParent:function(a){if(!a)return null;var l=a,b=null;_.isString(l)&&(l=this.getSync(a));l&&l.parentId&&(b=this.getSync(l.parentId));return b||this.getRootItem()}})};window.createStatesView=function(a){var l=a.getPageEditor().statesTab,b=a.statesView,e=a.statesStore||ha();a.statesStore=e;b&&(g.destroy(b,!0),g.destroy(b.template),$(b.template).remove(),a.statesView=null);b=g.addWidget(fa,
{ctx:sctx,open:!0,expandOnClick:!0,_parent:l,collection:e,permissions:ga,editor:a,widgetSelection:[]},null,l,!0);a.statesView=b;b.set("collection",e.filter({parentId:"."}));b.refresh();b.resize();b.showToolbar(!0);l.add(b)};var ia=function(a,l){a.statesView.set("collection",a.statesStore.filter({parentId:"."}));a.statesView.widgetSelection=l;a.statesView.editor=a};window.updateStatesView=function(a){var l=a.getStatableWidgetsSelection();a.statesStore.setData([]);if(l.length){var b=l[0].domNode;b.getStates().forEach(function(l){a.statesStore.putSync({id:l.name,
name:l.name,parentId:".",state:l,widget:b})})}ia(a,l)};window.vee&&aa.call(window.vee);v=u([v,K,H,B,l,m.dcl],{updateFrame:function(){var a=this.getEditorContext();if(!a||!a.isResizing){var l=this.editor,b=this.getFrame(),e=this;b&&!b._followTimer&&(b._followTimer=setInterval(function(){var a=l._designCP.containerNode,c=$(b),m=$(a),B=m.offset(),a=B.top,B=B.left,d=e.getEditorContext();d&&$(d.rootNode);var v=d?$(d.getDocumentElement().getChildElement("body")):null,d=m.css("width"),m=m.css("height"),
A=!1,g=!1;if(v){v.inlineStyle("max-width");v.inlineStyle("max-height");var J=v.inlineStyle("width");J&&(g=J);(v=v.inlineStyle("height"))&&(A=v)}$(c).css("display",e._hidden?"none":"block");if(0!=a||0!=B)c.css("top",a),c.css("left",B),"none"!==d&&(c.css("width",d),c.css("height",m),a=$(e.getEditorContext().rootNode),c.css("width",d),c.css("height",m),A&&a.css("height",A),g&&a.css("width",g),A||g||(a.css("width",d),a.css("height",m)))},500))}},menuOrder:{File:110,Edit:100,View:90,Widget:80,Block:50,
Settings:20,Navigation:10,Step:5,New:4,Window:1},declaredClass:"xideve/views/VisualEditor",templateString:"\x3cdiv style\x3d'height: 100%;width: 100%' attachTo\x3d'containerNode'\x3e\x3c/div\x3e",isVisualEditor:!0,resizeToParent:!0,showLESS:!0,showBehaviours:!1,showStyleView:!0,blockScopes:null,onReload:function(){window.createStatesView(this);this.getPageEditor().getDesignPane().getFrame()},leftLayoutContainer:null,rightLayoutContainer:null,palette:null,paletteContainer:null,showPalette:!0,styleView:null,
styleViewContainer:null,addOutline:!0,outlineView:null,outlineContainer:null,outlineGridView:null,outlineGridContainer:null,editor:null,_designMode:!0,_tempLeftContainer:null,textEditor:null,delite:!1,template:null,contextInfo:null,didAddSheetEditors:!1,beanType:d.ITEM_TYPE.WIDGET,_didInitial:!1,ready:!1,destroyed:!1,_skipTextEditorChange:!1,_getHTMLBlocks:function(a,l,b,e,c){c.push({name:"HTML",iconClass:"fa-paint-brush",items:[{name:"Set Style",owner:l,iconClass:"fa-paint-brush",proto:F,target:b,
ctrArgs:{scope:a,group:e}},{name:"Set CSS",owner:l,iconClass:"fa-paint-brush",proto:R,target:b,ctrArgs:{scope:a,group:e}},{name:"Set State",owner:l,iconClass:"fa-paint-brush",proto:x,target:b,ctrArgs:{scope:a,group:e}}]});return c},onBuildBlockInfoListEnd:function(a){this._getHTMLBlocks(a.scope,a.view,a.item,a.group,a.items)},__reloadModule:function(){Reload.reload().then(function(a){a.component.registerEditors()})},updateFocus:function(){var a=this.getEditorContext();a&&!a.isRezing&&(a.clearCachedWidgetBounds(),
a.updateFocusAll())},set:function(a,l){"focused"===a&&this.updateFocus();return this.inherited(arguments)},select:function(a,l){a=_.isArray(a)?a:[a];var b=a[0];if(b){var e=this.getEditorContext();if(e){if(_.isString(b)){var c=[];_.each(a,function(a){(a=e.getWidget(a))&&c.push(a)});a=c}!0!==l&&e.deselect();_.each(a,function(a){e.select(a,!0,!1)})}}},selectAll:function(){var a=this.getEditorContext(),l=a.getAllWidgets();_.each(l,function(l){a.select(l,!0,!1)})},updateToolbars:function(){},getTemplateDirectoryPathItem:function(){return{mount:"workspace",
path:"./templates"}},getSelection:function(){var a=this.getEditorContext(),l=[];if(a)for(var a=a.getSelection(),b=0;b<a.length;b++)l.push(a[b]);return l},ensureSceneFiles:function(a){var l=new k,b=[],e=a._S,c=a.mount,m=g.getFileExtension(a.path),B=this.ctx.getFileManager(),d=this.getTemplateDirectoryPathItem();e.getParent(a).getPath();var v=function(a,l){var b=new k,v=a.getPath().replace("."+m,"."+l);if(a=e.getSync(v))b.resolve(a);else{var A="./"+v,A=A.replace("././","./"),g=d.path+"/newDHTML."+l;
B.mkfile(c,A).then(function(a){B.getContent(c,g,function(a){B.setContent(c,A,a,function(a){b.resolve()})})})}return b};b.push(v(a,"css"));b.push(v(a,"xblox"));b.push(v(a,"js"));q(b).then(function(a){l.resolve()});return l},getActiveItem:function(){return null},hasItemActions:function(){return this.ready},getItem:function(){return this.currentItem},_createLeftContainer:function(){var a=this.getMainView();return g.addWidget(n,{closable:!0,style:"padding:0px;width:200px",region:"left",cssClass:"layoutLeft",
splitter:!0,parentContainer:a.layoutMain},this,a.layoutMain,!0,"ui-widget-content")},getLeftContainer:function(){var a=this.getMainView(),l=a.leftLayoutContainer;if(l)return l;if(a.leftTabContainer)return a.leftTabContainer;this._tempLeftContainer=this._createLeftContainer();return this.leftLayoutContainer=g.addWidget(p,{persist:!0,doLayout:!0,cssClass:"ui-widget-content"},this,this._tempLeftContainer.containerNode,!0)},restoreStyleView:function(){return D.byId("html_style_view_parent")},suspendStyleView:function(){},
onLastEditorRemoved:function(){this.suspendStyleView();var a=D.byId("html_style_view_parent");a&&a.parentContainer&&(a.parentContainer.removeChild(a),g.destroy(a));(a=D.byId("html_style_view"))&&g.destroy(a);(a=D.byId("palette-tabcontainer-right-top"))&&g.destroy(a)},clearAll:function(){this.editor&&this.editor.visualEditor.context.deselect();b._switchEditor(null);b.currentEditor=null;G.currentEditor=null;this.destroyed=!0;if(this.blockScopes){for(var a=0;a<this.blockScopes.length;a++){var l=this.blockScopes[a];
this.ctx.getBlockManager().removeScope(l.id)}delete this.blockScopes}this.outlineGridView=this.outlineGridContainer=null;this.onLastEditorRemoved()},getFrame:function(){var a=this.getEditorContext();return a&&a.frameNode?a.frameNode:null},destroy:function(){var a=0==this.getEditors().length,l=this.getMainView(),b=this.getLeftContainer();this.getEditorContext();clearInterval(this._frameTimer);g.destroy(this.getFrame());g.destroy(this.statesView);if(null==this.leftLayoutContainer||b.canDestroy&&!b.canDestroy()){g.destroy(this.paletteContainer,
!1);g.destroy(this._cBPalettePane,!1);try{this.outlineGridContainer&&(b.removeChild(this.outlineGridContainer),this.outlineGridView.parentContainer=null),g.destroy(this.outlineGridView,!0),g.destroy(this.palette)}catch(X){debugger}}else g.destroy(this.leftLayoutContainer,!1),l.layoutMain&&l.layoutMain.removeChild&&l.layoutMain.removeChild(this._tempLeftContainer),g.destroy(this.paletteContainer,!1);this&&this.styleViewContainer&&(this.styleViewContainer.keep=!1);g.destroy(this.styleView,!0,this);
g.destroy(this.tabContainer,!0,this);g.destroy(this.styleViewContainer,!0,this);this.publish(d.EVENTS.ON_CONTEXT_DESTROYED,this.getEditorContext());try{this.clearAll()}catch(X){logError(X)}if(a)try{g.destroy(this.editor,!0,this)}catch(X){logError(X)}},getMainView:function(){return this.mainView},addStyleView:function(a){function l(a){a._on("splitterMoveStart",function(a){b.hideFrame(!0)});a._on("splitterMoveEnd",function(a){b.hideFrame(!1)})}var b=this;this.ctx.getApplication();var c=this.getPageEditor(),
m=c.getPropertyPane();if(this.styleView)return this.styleView;l(m);l(c.getDesignPane());c=g.addWidget(Q,{region:"center",id:"palette-tabcontainer-right-top",tabPosition:"right-h",tabStrip:!1,"class":"davinciPalette davinciTopPalette widget",style:"",splitter:!1,direction:"right"},null,m.containerNode,!0);C.add(c.domNode,"davinciPalette davinciTopPalette");this.tabContainer=c;this.styleViewContainer=m;var B=c.createTab("Widget","fa-cogs");try{this.styleView=g.addWidget(e,{toolbarDiv:m.containerNode,
context:a,_editor:this.editor,parentContainer:c,tabContainer:c},null,B.containerNode,!0)}catch(T){console.error("html_style_view crash "+T)}this.styleView._initialPerspectiveReady()},addOutlineGridView:function(a){var l=this,b=this.getSettings(),e=this.getLeftContainer();if(!this.outlineGridView&&e){var c=e.createTab("Outline","fa-cube",!0,null,{parentContainer:e,open:b.outlineOpen});this.outlineGridContainer=c;try{this.outlineGridView=g.addWidget(I,{context:a,resizeToParent:!0,style:"padding:0px;",
editor:this},null,c.containerNode,!0),c.add(this.outlineGridView),this.addNavigationGrid(this.outlineGridView),setTimeout(function(){c.resize();l.outlineGridView&&l.outlineGridView.resize()},500)}catch(da){logError(da,"outline crash ")}this.outlineGridView.startup();this.add(c);window.outline=this.outlineGridView}},_handleKeyDown:function(a,l){this._handleKey(a,l)||l||G.handleKeyEvent(a)},_handleKey:function(a,l){if(!this.keyBindings)return!1;var b=this.keyBindings.some(function(b){if((!l||b.keyBinding.allowGlobal)&&
G.isKeyEqualToEvent(b.keyBinding,a))return h("davinci/Workbench")._runAction(b.action,this.editor,b.action.id),!0},this);b&&dojo.stopEvent(a);return b},_setupKeyboardHandler:function(a){var l=function(a){this.keyBindings||(this.keyBindings=[]);this.keyBindings.push(a)}.bind(this);this._getViewActions().forEach(function(a){a.actions.forEach(function(a){a.keyBinding&&l({keyBinding:a.keyBinding,action:a});a.menu&&a.menu.forEach(function(a){a.keyBinding&&l({keyBinding:a.keyBinding,action:a})},this)},
this)},this);c.connect(a,"handleKeyEvent",this,"_handleKeyDown")},setDirty:function(){},shouldUpdateTextEditor:function(){return this._skipTextEditorChange?(this._skipTextEditorChange=!0,!1):!0},addPageEditor:function(a){if(!this.editor)try{var l=this;this.editor=new (h("davinci/ve/PageEditor"))(dojo.create("div",{}),a.getPath(),a,function(b,e){return l.createHTMLEditor(b,e,a)},this.template,[{title:"Blocks"}]);this.editor.ctx=this.ctx;this.editor.editorContainer=this;this.editor.delegate=this;this.containerNode.appendChild(this.editor.domNode);
this.declaredClass=this.editor.declaredClass;this.editor.editorID="davinci.ve.HTMLPageEditor";G.currentEditor=this.editor;b.currentEditor=this.editor;this.add(this.editor,null,!1);this._setupKeyboardHandler(this.editor);this.addTextEditor(this.editor.htmlEditor);b._switchEditor(this.editor);setTimeout(function(){dojo.publish("/davinci/ui/editorSelected",[{editor:l.editor,oldEditor:null}])},2E3);return this.editor}catch(W){console.error("crash in visual editor "+W),logError(W,"crash in visual editor ")}},
_widgetSelectionChanged:function(a){if(this.getEditorContext()==a.context&&1!=a.isFake){a=a.selection;window.updateStatesView(this);var l=(a=1==a.length?a[0]:null)||{dummy:!0};this.currentItem=a||null;this.publish(d.EVENTS.ON_ITEM_SELECTED,{item:l,owner:this,beanType:"widget"});this._emit("selectionChanged",{item:l,owner:this})}},_resume:function(){this.restoreStyleView()},_suspend:function(){this.suspendStyleView()},hideFrame:function(a){this._hidden=a;var l=this.getFrame();l&&$(l).css("display",
a?"none":"block")},onHide:function(){this.inherited(arguments);this.hideFrame(!0);this.updateFocus();this.editor&&(b._switchEditor(null),this.publish("/davinci/ui/editorSelected",[{editor:null,oldEditor:this.editor}]));this._suspend()},onShow:function(){this.inherited(arguments);this.hideFrame(!1);if(this.editor){this.updateFocus();b._switchEditor(this.editor);var a=this;setTimeout(function(){a.publish("/davinci/ui/editorSelected",[{editor:a.editor,oldEditor:null}])},1E3)}this._resume()},addPalette2:function(a,
l,b){var e=this;this.palette=D.byId("html_palette");if(!this.palette){new k;var c=new L.Palette(this.ctx),m=this.ctx;c.initMeta(m);var B=this.getSettings();setTimeout(function(){var a=m.mainView.leftLayoutContainer,a=a.createTab("Palette","fa-cube",!0,null,{parentContainer:a,open:B.paletteOpen});e.paletteContainer=a;try{c.init();var l=c.createStore();e.palette=g.addWidget(L.Grid,{ctx:m,attachDirect:!0,collection:l,open:!0,expandOnClick:!0,sources:[],palette:c},null,a,!0);$(e.palette.bodyNode).addClass("dojoyPalette");
$(e.palette.bodyNode).addClass("paletteLayoutIcons");e.palette.set("collection",l.filter({parentId:"."}));e.add(a,null,!1);e.add(e.palette,null,!1);a.add(e.palette);e.addNavigationGrid(a);setTimeout(function(){e.palette.set("collection",l.filter({parentId:"."}))},1E3)}catch(ea){console.error("palette crash "+ea)}},1E3)}},openItem:function(a){function l(a){b.ensureSceneFiles(a).then(function(){b.editor||b.addPageEditor(a);b.hideFrame(!1);b.updateFrame();b.ctx.getFileManager().getContent(a.mount,a.path,
function(l){b.editor.setContent(a.path,l);b.showPalette&&b.addPalette2(b.editor.visualEditor.context);try{b.styleView||!1===b.showStyleView||b.addStyleView(b.getEditorContext())}catch(T){console.error("error style view "+T),logError(T,"error style view ")}e.resolve()})})}var b=this,e=new k;b.item=a;this.template&&!this.template.isLoaded()?this.template.load().then(function(){l(a)}):l(a);return e},onReady:function(){this.ready=!0;this.hideFrame(!1);this.updateFrame();aa.call(this)},addStatesView:function(){return window.createStatesView(this)},
onEditorContextLoaded:function(){var a=this;this.addStatesView();if(this._didInitial)setTimeout(function(){a.outlineGridView&&(a.outlineGridView.editorChanged({editor:null,oldEditor:a.editor}),a.outlineGridView.editorChanged({editor:a.editor,oldEditor:null}))},800);else{this._didInitial=!0;var l=a.editor.visualEditor.context;if(a.addOutline)try{setTimeout(function(){a.addOutlineGridView(l);dojo.publish("/davinci/ui/editorSelected",[{editor:a.editor,oldEditor:null}]);a.onReady()},500)}catch(W){console.error("outline creation crashed "+
W);debugger}}},getNullItem:function(){return this._nullItem?this._nullItem:this._nullItem={owner:this,beanType:"widget"}},_editors:null,addTextEditor:function(a){!this._editors&&(this._editors=[]);this._editors.push(a)},publishCSSRules:function(a){a=(new CSSParser).parse(a,!1,!0);var l=[];a&&_.each(a.cssRules,function(a){a.mSelectorText&&"body"!==a.mSelectorText&&l.push(a.mSelectorText.replace(".",""))});this.publish("CSSRulesUpdated",{names:l,editor:this})},loadSceneCSSFile:function(a){var l=this;
this.ctx.getFileManager().getContent(a.mount,a.path,function(a){l.publishCSSRules(a)})},onContextReady:function(a){if(a.context==this.getEditorContext()){this.contextInfo=a;var l=this,b=this.getPageEditor(),e=a.context._extraSheets,c=this.item._S;this.ctx.getWindowManager().registerView(this,!0);!1!==this.showLESS&&c&&!this.didAddSheetEditors&&(this.didAddSheetEditors=!0,_.each(e,function(a,e){var m;m=e.replace("././","./");e=e.replace("././","./");var B=c.getSync(m);B&&(a.storeItem=B,a.cssItem=c.getSync(e));
B?(e={sheetProps:a,closeable:!1,emmet:!0,resizeToParent:!0},m=d.DOCKER,m=b.createTab(null,{title:B.name,icon:"fa-paint",tabOrientation:m.TAB.TOP,location:m.DOCK.STACKED,target:b.getSourcePane()}),l.cssPane=m,e=J.Implementation.open(B,m,e,!0),a.edior=e,l.addTextEditor(e),m.add(e),l.loadSceneCSSFile(B),e._on(d.EVENTS.ON_FILE_CONTENT_CHANGED,function(a){l.publishCSSRules(a.content)})):console.error("couldnt find file : ",m)}));this.hideFrame(!1);(e=a.blockScopes)&&e.length&&(this.showBehaviours&&this._buildBlockPalette(a),
a.context.eventHandler={click:function(a){l.publish(d.EVENTS.ON_ITEM_SELECTED,{item:l.currentItem||l.getNullItem(),owner:l,beanType:"widget"});l._emit(d.EVENTS.ON_VIEW_SHOW,{view:l})}})}},onAppReady:function(a){setTimeout(function(){this.outlineView&&a.context&&(this.outlineView.reset(),this.outlineView.createTree())}.bind(this),1E3)},getTextEditor:function(){return this.editor.htmlEditor},getEditor:function(a,l){var b=null;_.each(this._editors,function(e){var c=e.item,m=c.mount.replace("/",""),c=
c.path.replace("./","");m===a&&c===l&&(b=e)});return b},onEditorContentChanged:function(a){var l=this;this.__internUpdate=!0;setTimeout(function(){l.__internUpdate=!1},5E3);return this.reload(a.content)},isSaving:!1,save:function(a,l,b,e){if(!this.isSaving){this.__internUpdate=this.isSaving=!0;var c=this.getTextEditor();c&&c.set("value",e);this.publish(d.EVENTS.ON_VISUAL_EDITOR_SAVE,{pageEditor:a,visualEditor:l,model:b,text:e,item:this.item});var m=this;this.ctx.getFileManager().setContent(this.item.mount,
this.item.path,e,function(){m.isSaving=!1})}},fileChanged:function(a){function l(a){a==b.getTextEditor()&&a.reload().then(function(a){b.reload(a)});a.reload().then(function(){b.onFileChanged({editor:a})})}if(!this.__internUpdate){a=a.data.path;var b=this;if(-1!=a.indexOf("workspace_user")){var e=a.substr(a.indexOf("workspace_user")+15,a.length);if(e=this.getEditor("workspace_user",e))return l(e)}(a=this.ctx.toVFSShort(a,"workspace_user"))&&(e=this.getEditor("workspace_user",a))&&l(e)}},onFileChanged:function(a){if(!a.__did&&
(a.__did=!0,a&&a.editor&&a.editor.sheetProps)){var l=a.editor.sheetProps,b=this.contextInfo.document,e=this;dojo.withDoc(b,function(){var a=b.getElementsByTagName("head")[0];try{l.link&&(a.removeChild(l.link),l.link=null)}catch(T){dojo.destroy(l.link)}var c=e.ctx.getFileManager().getImageUrl(l.cssItem,!0,!1),c=w.create("link",{rel:"stylesheet",type:"text/css",href:c});a.appendChild(c);dojo.place(c,a,"last");l.link=c})}},onUseActionStore:function(a){},getBlockEditor:function(){return this.getPageEditor().getBlockEditor()},
resize:function(){this.updateFrame();this.updateFocus();var a=this.getPageEditor();this.getEditorContext();a&&(g.resizeTo(a.domNode,this.containerNode,!0,!0,null,{}),a.resize())},startup:function(){var l=this,b=this,e=d.EVENTS;this._frameTimer=setInterval(function(){var a=l.getEditorContext();a&&a.isRezing||l.updateFrame()},1E3);a.getSmartInput("xblox/RunScript");this.subscribe([e.ON_BUILD_BLOCK_INFO_LIST_END,e.ON_ACTION_CONTEXT_CHANGED,e.ON_ACTION_CHANGE_CONTEXT,e.ON_ACTION_CHANGE_CONTEXT,e.ON_FILE_CHANGED,
e.ON_CONTEXT_READY,e.ON_APP_READY,{key:d.EVENTS.ON_FILE_CONTENT_CHANGED,handler:function(a){var l=a.item;b._skipTextEditorChange=!0;if(l==b.item&&a.callee==b.textEditor)b.editor.setContent(b.item.getPath(),a.content);else b.onFileChanged(a)}},{key:"/davinci/ui/widgetSelected",handler:b._widgetSelectionChanged},{key:"/davinci/ui/context/loaded",handler:b.onEditorContextLoaded}]);this.initReload();setTimeout(function(){b.resize()},2E3)},setDesignMode:function(a,l){this._designMode=a;!0===l&&(l=this._designToggleAction)&&
(l=l.getVisibility(d.ACTION_VISIBILITY.ACTION_TOOLBAR).widget)&&l.set("checked",a);(l=this.getEditorContext())&&l.setDesignMode(a)},_didHide:!1,getSettings:function(){return((this.ctx.getSettingsManager().getStore()||{getSync:function(){}}).getSync("ve")||{value:{showEditors:!1,selected:"HTML"}}).value},saveSettings:function(){var a=this.ctx.getSettingsManager(),l=((a.getStore()||{getSync:function(){}}).getSync("ve")||{value:this.getSettings()}).value;l.showEditors=this.showCode;var b=this.getPageEditor().getDocker(),
e="HTML";_.each(b.getPanels(),function(a){"Blocks"===a._title&&!0===a.selected&&(e="Blocks");a._title.indexOf&&-1!==a._title.indexOf(".css")&&!0===a.selected&&(e=a._title)});l.selected=e;l.outlineOpen=this.outlineGridView.open;l.paletteOpen=this.palette._parent.open;a.write2(null,".",{id:"ve"},{value:l},!0,null).then(function(){})},restoreSettings:function(){var a=this,l=this.getSettings();l.showEditors||setTimeout(function(){a._didHide?a.getPageEditor().getDocker():(a._didHide=!0,a.toogleCode())},
500);var l=l.selected,b=this.getPageEditor().getDocker();(l=_.find(b.getPanels(),{_title:l}))&&l.select()},didinitSettings:!1,addNavigationGrid:function(a){var l=this;a._on(["hide","show"],function(){l.saveSettings()})},initSettings:function(){var a=this;this.didinitSettings||(this.didinitSettings=!0,this.getPageEditor().getDocker()._on(d.DOCKER.EVENT.SELECT,function(l){l=l.title();a.getSettings().selected=l;a.saveSettings()}))},onSceneBlocksLoaded:function(a){var l=this;this.blockScopes=a.blockScopes;
var b=this.getPageEditor();window.vee=this;b.onSceneBlocksLoaded(a,this);this.initSettings();setTimeout(function(){l.restoreSettings()},500)}});I.prototype.reloadModule=v.prototype.reloadModule;A.prototype.reloadModule=v.prototype.reloadModule;t.prototype.reloadModule=v.prototype.reloadModule;B.prototype.reloadModule=v.prototype.reloadModule;K.prototype.reloadModule=v.prototype.reloadModule;H.prototype.reloadModule=v.prototype.reloadModule;B.prototype.reloadModule=v.prototype.reloadModule;l.prototype.reloadModule=
v.prototype.reloadModule;v.getFileActions=function(a,l){return[a.createAction({label:"Preview in Browser",command:"File/Preview",tab:"Home",icon:"fa-eye",tab:"Home",mixin:{quick:!0,addPermission:!0,handler:function(){window.open(a.getContextManager().getViewUrl(l))}},custom:!0})]};return v})},"xideve/views/OutlineView":function(){define(["dcl/dcl","dojo/dom-class","davinci/Workbench","davinci/ui/widgets/OutlineTree","xide/layout/ContentPane"],function(u,w,k,q,h){return u([h],{declaredClass:"davinci.workbench.OutlineView",
startup:function(){w.remove(this.domNode,"ui-widget-content")},reset:function(){this.outlineTree&&this.outlineTree.destroy();delete this.outlineProvider;delete this.outlineTree},constructor:function(h,p){this.subscribe("/davinci/ui/editorSelected",this.editorChanged);this.subscribe("/davinci/ui/context/pagerebuilt",this._pageRebuilt)},_getViewActions:function(){return[]},editorChanged:function(h){h=h.editor;if(this.currentEditor){if(this.currentEditor==h)return;this.outlineTree&&this.outlineTree.destroy();
delete this.outlineProvider;delete this.outlineTree}if(this.currentEditor=h)h.getOutline&&(this.outlineProvider=h.getOutline()),this.outlineProvider?(this.outlineProvider._outlineView=this,this.createTree()):this.containerNode.innerHTML="no outline aviable"},createTree:function(){this.outlineTree&&this.removeContent();this.popup&&this.popup.destroyRecursive();!this.outlineProvider&&this.currentEditor&&(this.outlineProvider=this.currentEditor.getOutline(),this.outlineProvider._outlineView=this);this.outlineProvider&&
this.outlineProvider.getModel&&(this.outlineModel=this.outlineProvider.getModel(this.currentEditor));var n={model:this.outlineModel,showRoot:this.outlineModel.showRoot,betweenThreshold:this.outlineModel.betweenThreshold,checkItemAcceptance:this.outlineModel.checkItemAcceptance,isMultiSelect:!0,persist:!1,style:"height:inherit;"};this.outlineProvider.getIconClass&&(n.getIconClass=this.outlineProvider.getIconClass);this.currentEditor.getContext&&(n.context=this.currentEditor.getContext());this.outlineModel.dndController&&
(n.dndController=this.outlineModel.dndController);this.outlineTree=new q(n);this.container=new h({style:"padding:0"});this.subcontainer=dojo.doc.createElement("div");this.subcontainer.id="dvOutlineSubcontainer";this.subcontainer.appendChild(this.outlineTree.domNode);this.container.domNode.appendChild(this.subcontainer);this.setContent(this.container);this.outlineTree.startup();this.outlineProvider&&(this.outlineProvider._tree=this.outlineTree);n=this.outlineProvider.getActionsID&&this.outlineProvider.getActionsID()||
"davinci.ui.outline";this.popup=k.createPopup({partID:n,domNode:this.outlineTree.domNode,openCallback:this.outlineTree.getMenuOpenCallback?this.outlineTree.getMenuOpenCallback():null})},_getViewContext:function(){return this.outlineProvider},selectionChanged:function(h){!this.publishing["/davinci/ui/selectionChanged"]&&h.length&&h[0].model&&this.outlineTree&&this.outlineTree.selectNode([h[0].model])},_pageRebuilt:function(){if(this.outlineTree){var h=this.outlineTree.get("paths");this.createTree();
this.outlineTree.set("paths",h)}},modelChanged:function(h){this.outlineModel&&this.outlineModel.refresh?this.outlineModel.refresh():this.outlineProvider&&this.outlineProvider.getStore&&(this.outlineModel.store=this.outlineProvider.getStore(),this.outlineModel.onChange(this.outlineProvider._rootItem))}})})},"xideve/views/OutlineGridView":function(){define("dcl/dcl dojo/dom-class xide/utils xide/types dgrid/Editor xide/data/TreeMemory davinci/ve/widget xide/_base/_Widget xide/mixins/ReloadMixin xgrid/Grid xgrid/TreeRenderer xgrid/KeyboardNavigation xide/widgets/_Widget davinci/ve/States davinci/ve/commands/StyleCommand xideve/views/VisualEditorAction".split(" "),
function(u,w,k,q,h,n,p,g,d,t,G,b,c,C,a,e){var A=q.ACTION,I=t.createGridClass("OutlineGridView",{permissions:[A.RENAME,A.UNDO,A.REDO,A.RELOAD,A.DELETE,A.CLIPBOARD,A.LAYOUT,A.COLUMNS,A.SELECTION,A.SAVE,A.SEARCH,A.TOOLBAR,"File/Properties","File/Edit",A.GO_UP,A.HEADER,A.EDIT,A.COPY,A.CLOSE,A.MOVE,A.RENAME,A.RELOAD,A.CLIPBOARD,A.LAYOUT,A.SELECTION,A.SEARCH,A.TOOLBAR,A.STATUSBAR,A.SOURCE,A.CLIPBOARD_COPY,A.CLIPBOARD_PASTE,A.CLIPBOARD_CUT],menuOrder:{File:110,Edit:100,View:90,Widget:80,Block:50,Settings:20,
Navigation:10,Step:5,New:4,Window:1},options:k.clone(q.DEFAULT_GRID_OPTIONS),getEditorContext:function(){return this.context},startup:function(){this.inherited(arguments);this._createContextMenu()}},{SELECTION:!0,KEYBOARD_SELECTION:!0,PAGINATION:!1,ACTIONS:q.GRID_FEATURES.ACTIONS,CONTEXT_MENU:q.GRID_FEATURES.CONTEXT_MENU,KEYBOARD_NAVIGATION:{CLASS:b},WIDGET:{CLASS:c},EDITOR:{CLASS:h},EXTRAS:{CLASS:e.GridClass}},{RENDERER:G},null,null);return u([g,d.dcl],{templateString:'\x3cdiv attachTo\x3d"domNode"\x3e\x3c/div\x3e',
declaredClass:"xideve.views.OutlineGridView",rootWidget:null,_lastEvent:null,useRichTextLabel:!1,resizeToParent:!0,onItemSelected:function(a,b){var e=this.getContext();b=this.getStore();e&&(a=b.model._getWidget(a),b=e.getSelection(),dojo.forEach(b,dojo.hitch(this,function(a){e.deselect(a)})),e.select(a,!0))},_toggle:function(b,e,c){e=e?"none":"";var d;if(c=C.getFocus(b.domNode.ownerDocument.body))d=c.state;else{c=C.getStatesListCurrent(b.domNode);for(var B=0;B<c.length;B++)if(c[B]){d=c[B];break}}b=
new a(b,[{display:e}],d);this.getContext().getCommandStack().execute(b)},getLabel:function(a){if("myapp"==a.id)return this.getContext().model.fileName;var b="",e=this._getWidget(a);if("xblox/RunScript"===a.type&&e)return e=e.domNode,1==e.mode&&e.targetproperty&&e._targetBlock?e._targetBlock.name+"-\x3e"+e.targetproperty:e&&e.script&&"null"!==e.script?"XBlox::"+e.script:e.targetEvent&&0<e.targetEvent.length?"XBlox::"+e.targetEvent:"XBlox";if("xblox/CSSState"===a.type&&e)return e=e.domNode,"CSS State/"+
e.name;if("xblox/StyleState"===a.type&&e)return e=e.domNode,"Style State/"+e.name;if(e.isWidget)return b=p.getLabel(e);if(b=e.type){a=this.useRichTextLabel?"\x26lt;":"\x3c";var c=this.useRichTextLabel?"\x26gt;":"\x3e",b=0===b.indexOf("html.")?a+b.substring(5)+c:0===b.indexOf("OpenAjax.")?a+b.substring(9)+c:0<b.indexOf(".")?b.substring(b.lastIndexOf(".")+1):e.label||b;(e=p.byId(e.id,this.getContext().getDocument()))&&(e=e.getId())&&(b+=" id\x3d"+e);return b}},getColumns:function(){var a=this;return[{renderExpando:!0,
label:"Name",field:"type",sortable:!1,formatter:function(b,e){b=a.getLabel(e);if("xblox/RunScript"==e.type&&(e=a._getWidget(e))&&(e=e.domNode)){var c=e._targetBlock;if(c){if(-1!=c.declaredClass.indexOf("Command"))return'\x3cspan class\x3d"grid-icon '+c.getIconClass()+'"\x3e\x3c/span\x3e'+c.name+" ("+e.targetevent+")";c.declaredClass.indexOf("Variable")}}return b}}]},createGrid:function(){k.destroy(this.outlineTree);dojo.empty(this.domNode);var a=this,b={features:{},className:"outlineGridView dgrid dgrid-dgrid",
cellNavigation:!1,collection:this.store.filter(this.getRootFilter()),deselectOnRefresh:!1,showHeader:!1,owner:this,resizeToParent:!0,columns:this.getColumns()},e=k.addWidget(I,b,null,this,!0);this.grid=e;this.grid.editor=this.editor;this.grid.set("collection",this.store.filter({type:"html.body"}));this.outlineTree=e;e.refresh();this.add(e);this._lastState&&(e.setState(this._lastState),delete this._lastState);e._on("selectionChanged",function(b){a.onItemSelected(b.selection[0])});e.on("dgrid-datachange",
function(b){var c=e.row(b.target);b=b.value;var l=a.getContext(),d=a.getStore();l&&(c=d.model._getWidget(c.data))&&a._toggle(c,!b)})},initStore:function(a){return this.store=new n({data:a.items,model:a.model,provider:a.provider,idProperty:"id",parentProperty:"parent",getSync:function(a){var b=this.inherited(arguments),e=this.provider.getModel();!b&&(e=e._getWidget({id:a}))&&(this.putSync(e),b=e);return b},getChildrenSync:function(a){var b=this,e=[];this.model.getChildren(a,function(a){for(var l=0;l<
a.length;l++)b.putSync(a[l]);e=a});return e},getChildren:function(a,b){var e=this;this.model.getChildren(a,function(a){for(var l=0;l<a.length;l++)e.putSync(a[l])});return this.inherited(arguments)},mayHaveChildren:function(a){return this.model.mayHaveChildren(a)}})},getContext:function(){return this.currentEditor?this.currentEditor.getContext():null},_getWidget:function(a){return p.byId(a.id)},getStore:function(){return this.store},getModel:function(){return this.outlineModel},getRootFilter:function(){return{id:this.rootWidget?
this.rootWidget.id:""}},hasItemActions:function(){return!1},_getViewContext:function(){return this.outlineProvider},_getViewActions:function(){return[]},onWidgetChanged:function(a){var b=a.type,e=this.getContext();b===e.WIDGET_ADDED?this.getStore().putSync(a.widget):b===e.WIDGET_REMOVED&&this.getStore().removeSync(a.widget);this.grid&&this.grid.refresh()},onWidgetSelected:function(a){},startup:function(){w.remove(this.domNode,"ui-widget-content");this.subscribe("/davinci/ui/editorSelected",this.editorChanged);
this.subscribe("/davinci/ui/context/pagerebuilt",this._pageRebuilt);this.subscribe(q.EVENTS.ON_WIDGET_CHANGED);this.subscribe("/davinci/ui/widgetSelected",this.onWidgetSelected);this.initReload()},onReloaded:function(){this.reset();this._lastEvent&&this.editorChanged(this._lastEvent)},reset:function(){this.currentEditor=null;delete this.outlineProvider;delete this.outlineTree},editorChanged:function(a){this._lastEvent=a;a=a.editor;if(this.currentEditor){if(this.currentEditor==a)return;this.outlineTree&&
(this._lastState=this.outlineTree.getState(),this.outlineTree.destroy());this.store&&(this.store.destroy(),delete this.store);delete this.outlineProvider;delete this.outlineTree}if(this.currentEditor=a)a.getOutline&&(this.outlineProvider=a.getOutline()),this.outlineProvider?this.createTree():this.containerNode.innerHTML="no outline aviable"},createTree:function(){this.popup&&this.popup.destroyRecursive();!this.outlineProvider&&this.currentEditor&&(this.outlineProvider=this.currentEditor.getOutline(),
this.outlineProvider._outlineView=this);this.outlineProvider&&this.outlineProvider.getModel&&(this.outlineModel=this.outlineProvider.getModel(this.currentEditor));var a=this.outlineModel,b=this.outlineProvider,e=b&&b._context?b._context.rootWidget:null;e||console.error("have no root");this.outlineProvider.getActionsID&&this.outlineProvider.getActionsID();this.initStore({items:[e],model:a,provider:b});this.createGrid()},selectionChanged:function(a){!this.publishing["/davinci/ui/selectionChanged"]&&
a.length&&a[0].model&&this.outlineTree&&this.outlineTree.selectNode([a[0].model])},_pageRebuilt:function(){if(this.outlineTree){var a=this.outlineTree.get("paths");this.createTree();this.outlineTree.set("paths",a)}},_modelChanged:function(a){this.outlineModel&&this.outlineModel.refresh?this.outlineModel.refresh():this.outlineProvider&&this.outlineProvider.getStore&&(this.outlineModel.store=this.outlineProvider.getStore(),this.outlineModel.onChange(this.outlineProvider._rootItem))}})})},"xideve/views/VisualEditorAction":function(){define("dcl/dcl xdojo/has require xaction/Action xide/types xide/utils xide/factory davinci/Runtime davinci/Workbench davinci/ve/metadata xaction/ActionProvider xaction/DefaultActions dojo/Deferred xdojo/declare davinci/ve/tools/CreateTool xide/views/SimpleCIDialog xide/widgets/TemplatedWidgetBase".split(" "),
function(u,w,k,q,h,n,p,g,d,t,G,b,c,C,a,e,A){var I=this,D=h.ACTION;window.__selected=function(a){if(a.getSelection){var l=a.getSelection()[0];l&&a.getEditorContext().getWidgetById(l.id)}};var Q=function(b,l){var c=l.getEditorContext(),d=[n.createCI("Name",h.ECIType.STRING,"noname",{group:"General"}),n.createCI("Style",h.ECIType.DOM_PROPERTIES,"",{group:"Style",widget:{open:!0}})];e.create("Create New Style State",d,function(l){var e={context:c,type:"xblox/StyleState",properties:{name:d[0].value||"noname",
style:d[1].value},userData:{}},m=t.getMetadata(e.type);t.getHelper(b.type,"tool").then(function(l){l=new (l||a)(e,{});l._context=c;c.setActiveTool(l);l._create({position:{x:0,y:0},parent:b,userData:m});c.setActiveTool(null)}.bind(I))}).show()};window._createStyleState=Q;if(window.sctx&&window.vee){var K=window.vee;window._veeHandle&&window._veeHandle.remove();window._runAction=function(a,l){};window._veeHandle=vee._on("selectionChanged",function(a){}.bind(K))}var D={declaredClass:"xideve/views/VisualEditorAction",
_layoutActions:null,_designToggleAction:null,_maqActions:null,_float:function(){var a=this.getPageEditor(),l=a.getDocker(),b=a.getSourcePane();a.getSourcePane();var e=a.getPropertyPane();l.movePanel(b,h.DOCKER.DOCK.FLOAT,null,{x:300,y:300,w:600,h:400});var c=b._parent;c&&c.instanceOf("wcFrame")&&(c.pos(300,300,!0),c._size.x=600,c._size.y=400);c.__update();c&&c.instanceOf("wcFrame")&&c.pos(300,300,!0);c.__update();l.__focus(c);l.movePanel(e,h.DOCKER.DOCK.STACKED,b);l.movePanel(a.getBlocksPane(),h.DOCKER.DOCK.STACKED,
b);l.movePanel(this.cssPane,h.DOCKER.DOCK.STACKED,b);e.maxSize(null,null);e.minSize(null,null);this.cssPane.select()},_dock:function(){var a=this,l=a.getPageEditor(),b=l.getDocker(),e=l.getSourcePane(),c=l.getDesignPane(),d=l.getPropertyPane();b.movePanel(d,h.DOCKER.DOCK.RIGHT,c,{tabOrientation:h.DOCKER.TAB.TOP,location:h.DOCKER.TAB.RIGHT});d.maxSize(400);d.minSize(350);b.movePanel(e,h.DOCKER.DOCK.BOTTOM,null,{tabOrientation:h.DOCKER.TAB.TOP});b.movePanel(l.getBlocksPane(),h.DOCKER.DOCK.STACKED,e,
{});b.movePanel(this.cssPane,h.DOCKER.DOCK.STACKED,e,{});l.resize();b.resize();setTimeout(function(){e.getSplitter().pos(.5);d.maxSize(500);c.getSplitter().pos(.8);a.cssPane.select()},1500)},getWidgetBlockActions:function(){var a=[],l=this;a.push(this.createAction({label:"Add Block",command:"Widget/Add Block",group:"Widget",tab:"Home",icon:"fa-magic",mixin:{addPermission:!0,quick:!0},shouldDisable:function(){return l.getEditorContext()?1!==l.getSelection().length:!0}}));return a},getMaqettaActions:function(){return this._maqActions},
getMaqettaAction:function(a,l,b){l=l||this.getMaqettaActions();var e=_.find(l,{id:a});e||(e=_.find(l,{command:a}));if(e||!1===b&&e)return e;for(b=0;b<l.length;b++){var c=l[b];if(c.menu&&(e=this.getMaqettaAction(a,c.menu,!1)))break}return e},onReload:function(){this.contextInfo.appContext.destroy()},reload:function(a){var l=this,b=new c;this.onReload();var e=this.getEditorContext(),m=e?$(e.rootNode):null;m&&m[0]&&m[0]._destroyHandles&&(m[0].__didEmitLoad=!1,m[0]._destroyHandles());if(e=e.appContext)e.didWireWidgets=
!1;if(l.blockScopes){for(e=0;e<l.blockScopes.length;e++)m=l.blockScopes[e],l.ctx.getBlockManager().removeScope(m.id);delete this.blockScopes}e=function(a){l.editor.setContent(l.item.path,a);b.resolve(a)};a?e(a):l.ctx.getFileManager().getContent(l.item.mount,l.item.path,e);return b},showInOutline:function(a){if(a){this.getEditorContext().getDocument();var b=this.getSelection()[0];this.outlineGridView.grid.select((a||b).id,null,!0,{focus:!0,append:!1,expand:!0,delay:1})}},showCode:!0,toogleCode:function(){},
runAction:function(a){if(a=_.isString(a)?this.getAction(a):a){var b=a.command,e=b.split("/"),c=e[e.length-1],e=this.getEditorContext();if(-1!==b.indexOf("Widget/State/"))switch(b){case "Widget/State/Add":return b=this.getEditorContext(),e=this.getSelection(),(window._createStyleState||Q)(e[0],K,b)}if(-1!==b.indexOf("View/Show/Float"))return this._float();if(-1!==b.indexOf("View/Show/Dock"))return this._dock();if(-1!==b.indexOf("View/Show/Code"))return this.toogleCode();if(-1!==b.indexOf("Widget/Focus"))(b=
(b=this.getSelection())?b[0].domNode:null)&&b.scrollIntoView();else{if(-1!==b.indexOf("View/Split/"))return this.doSplit(parseInt(c)),this.updateFrame(),!0;if("Widget/Add Block"===b&&(c=this.getBlockEditor()))return c.runAction({command:"File/New Group"});if("View/Layout Mode/Relative"===b)return this.getPageEditor().selectLayoutFlow();if("File/Reload"===b)return this.reload();if("Widget/Show In Outline"===b)return this.showInOutline();if("View/Layout Mode/Absolute"===b)return this.getPageEditor().selectLayoutAbsolute();
if("View/Show/Preview"===b)return this._designMode=!1,this.getPageEditor().getDesignPane().title("\x3cspan class\x3d'text-warning'\x3ePreview\x3c/span\x3e"),this.getPageEditor().getDesignPane().icon("text-warning fa-eye"),this._designToggle.set("value",!0),this.setDesignMode(this._designMode);if("View/Show/Design"===b)return this._designMode=!0,this.getPageEditor().getDesignPane().title("Design"),this.getPageEditor().getDesignPane().icon("text-info fa-edit"),this._designToggle.set("value",!1),this.setDesignMode(this._designMode);
if("File/Open In Browser"===b||"File/Preview"===b)return b=this.item.name.replace(".dhtml",".css"),b=this.item.getParent().path+"/"+b,e=this.editor.ctx.getResourceManager().getVariable("VFS_GET_URL"),b=this.editor.ctx.getFileManager().base64_encode(e+""+this.item.mount+"\x26path\x3d"+b),b={template:w("debug")?"view.template.html":"view.template.release.html",css:b,baseOffset:encodeURIComponent(this.item.getParent().path.replace("./","")),userDirectory:encodeURIComponent(this.editor.ctx.getResourceManager().getVariable("USER_DIRECTORY"))},
b=this.ctx.getContextManager().getViewUrl(this.item,null,b),w("electronx")?((e=window.eRequire)||console.error("have no electron"),e("electron").shell.openExternal(b)):window.open(b);if(-1!==b.indexOf("Widget/Align/")){switch(b){case "Widget/Align/Align Left":return this._alignLeftVertical();case "Widget/Align/Align Center":return this._alignCenterVertical();case "Widget/Align/Align Right":return this._alignRightVertical();case "Widget/Align/Align Top":return this._alignTopHorizontal();case "Widget/Align/Same Size":return this._sameSize();
case "Widget/Align/Same Width":return this._sameWidth();case "Widget/Align/Same Height":return this._sameHeight()}return!0}c=a.action;if(!c)switch(b){case "File/Delete":case "Edit/Delete":c=this.getMaqettaAction("delete");break;case "Edit/Undo":c=this.getMaqettaAction("undo");break;case "Edit/Redo":c=this.getMaqettaAction("redo");break;case "Edit/Copy":c=this.getMaqettaAction("copy");break;case "Edit/Paste":c=this.getMaqettaAction("paste");break;case "Edit/Cut":c=this.getMaqettaAction("cut");break;
case "File/ManageStates":c=this.getMaqettaAction("manageStates");break;case "File/Save As Widget":c=this.getMaqettaAction("saveasdijit");break;case "Widget/SourroundWithDIV":c=this.getMaqettaAction("Widget/SourroundWithDIV")}c||(c=this.getMaqettaAction(b));return c?d._runAction(c,e):this.inherited(arguments)}}},_getIconClass:function(a){if(!a)return"";switch(a){case "editActionIcon undoIcon":return"text-info fa-undo";case "editActionIcon redoIcon":return"text-info fa-repeat";case "editActionIcon editCutIcon":return"text-warning fa-scissors";
case "editActionIcon editCopyIcon":return"text-warning fa-copy";case "editActionIcon editPasteIcon":return"text-warning fa-paste";case "editActionIcon editDeleteIcon":return"text-danger fa-remove"}return a},_toCommand:function(a){switch(a){case "Undo":return"Edit/Undo";case "Redo":return"Edit/Redo";case "Cut":return"Edit/Cut";case "Copy":return"Edit/Copy";case "Paste":return"Edit/Paste";case "Delete":return"Edit/Delete"}},__addAction:function(a){switch(a.id){case "openBrowser":return!1;case "documentSettings":return!1;
case "stickynote":return!1;case "tableCommands":return!1}return!0},_createEditToggleAction:function(){var a=this,b=q.createDefault("Design","fa-toggle-on","View/Design Mode","viewActions",null,{widgetClass:"xide/widgets/ToggleButton",widgetArgs:{icon1:"fa-toggle-on",icon2:"fa-toggle-off",delegate:this,checked:a._designMode},handler:function(b,e,l,c){a._designMode=!a._designMode;c.set("checked",a._designMode);a.setDesignMode(a._designMode)}}).setVisibility(h.ACTION_VISIBILITY.CONTEXT_MENU,null).setVisibility(h.ACTION_VISIBILITY.ACTION_TOOLBAR,
{label:"",permanent:function(){return 0==a.destroyed},widgetArgs:{style:"text-align:right;float:right;font-size:120%;"}}).setVisibility(h.ACTION_VISIBILITY.MAIN_MENU,{show:!1});return this._designToggleAction=b},_getItemActions:function(){try{if(!this.editor||!this.ready)return[];this.restoreStyleView();var a=this._getViewActions();a&&a[0]&&(a=a[0].actions);var b=[],e=this;this._maqActions=a;b.push(this.getSplitViewAction());this._designToggleAction||b.push(this._createEditToggleAction());var c=function(a){a.handler=
function(){try{d._runAction(a.action,m)}catch(r){console.error("action failed "+r,a)}}},m=null,A=null;this.editor&&this.editor.currentEditor&&this.editor.currentEditor.context&&(m=this.editor.currentEditor.context);for(var g=0;g<a.length;g++){var C=a[g];_.isString(C.action)&&d._loadActionClass(C);C.action&&C.action.isEnabled&&C.action.isEnabled(m);"layout"===C.id&&(A=C);var n=this._toAction(C);n&&(n.action=C,c(n),b.push(n))}b.push(q.createDefault("Reload","fa-refresh","File/Reload","viewActions",
null,{addPermission:!0,handler:function(){if(e.blockScopes){for(var a=0;a<e.blockScopes.length;a++){var b=e.blockScopes[a];e.ctx.getBlockManager().removeScope(b.id)}delete this.blockScopes}e.ctx.getFileManager().getContent(e.item.mount,e.item.path,function(a){e.editor.setContent(e.item.path,a)})}}));var I=this.getEditorContext().getSelection();if(I.length){var G=I[0];t.getSmartInput(G.type).then(function(a){a&&a.show&&b.push(q.createDefault("Wizard","fa-magic","Edit/Wizard","viewActions",null,{handler:function(){a.show(G.id)}}))});
b=b.concat(this.getWidgetLayoutActions(b))}if(A){var p=q.create("Layout","fa-crosshairs","View/Layout Mode",!1,null,h.ITEM_TYPE.WIDGET,"docActions",null,!1,function(){},{dummy:!0});b.push(p);var D=q.create("Relative","","View/Layout Mode/Relative",!1,null,h.ITEM_TYPE.WIDGET,"docActions",null,!1,function(){e.getPageEditor().selectLayoutFlow()});b.push(D);var k=q.create("Absolute","","View/Layout Mode/Absolute",!1,null,h.ITEM_TYPE.WIDGET,"docActions",null,!1,function(){e.getPageEditor().selectLayoutAbsolute()});
b.push(k)}this._layoutActions||(b=b.concat(this.getLayoutActions()));b.push(q.createDefault("Preview","text-success fa-eye","File/Open In Browser","viewActions",null,{mixin:{quick:!0}}).setVisibility(h.ACTION_VISIBILITY.ACTION_TOOLBAR,{label:"",widgetArgs:{style:"text-align:right;float:right;font-size:120%;"}}));return b}catch(Z){return[]}},getSplitViewActions:function(){return[]},getStatableSelection:function(){var a=[],b=this.getSelection();b&&1===b.length&&(b=b[0].domNode)&&b.getStates&&a.push(b);
return a},getStatableWidgetsSelection:function(){return this.getSelection().filter(function(a){if(a&&a.domNode&&a.domNode.getStates)return a.domNode.getStates})},getFlowActions:function(){var a=[],b={addPermission:!0,quick:!0};a.push(this.createAction({label:"Flow",command:"View/Layout Mode",icon:"fa-crosshairs",tab:"Home",group:"View",mixin:b}));a.push(this.createAction({label:"Relative",command:"View/Layout Mode/Relative",tab:"Home",group:"View",mixin:b}));a.push(this.createAction({label:"Absolute",
command:"View/Layout Mode/Absolute",tab:"Home",group:"View",mixin:b}));return a},getFloatActions:function(){var a=[];a.push(this.createAction({label:"Float",command:"View/Show/Float",icon:"fa-compress",tab:"Home",group:"View",mixin:{addPermission:!0,quick:!0}}));a.push(this.createAction({label:"Dock",command:"View/Show/Dock",icon:"fa-expand",tab:"Home",group:"View",mixin:{addPermission:!0,quick:!0}}));a.push(this.createAction({label:"View/Hide Code",command:"View/Show/Code",icon:"fa-code",tab:"Home",
group:"View",mixin:{addPermission:!0,quick:!0}}));return a},getItemActions:function(a){function b(a){var b=m._toAction(a);b&&b.command&&(b.tab="Home",b.mixin=n.mixin({},g),-1!==b.command.indexOf("Widget/SourroundWith")&&(b.mixin.quick=!1),b.action=a,c.push(b))}var e=this,c=[],m=this;this.getEditorContext();var c=c.concat(this.getSplitViewActions()),c=c.concat(this.getFloatActions()),c=c.concat(this.getWidgetBlockActions()),g={addPermission:!0,quick:!0,localize:!1};c.push(this.createAction({label:"Save",
command:"File/Save",icon:"fa-save",group:"File",tab:"Home",keycombo:["ctrl s"],mixin:g}));c.push(this.createAction({label:"Select",command:"Widget/Select",group:"Widget",tab:"Home",icon:"fa-hand-o-up",mixin:g}));c.push(this.createAction({label:"Show In Outline",command:"Widget/Show In Outline",group:"Widget",tab:"Home",icon:"fa-crosshairs",mixin:g}));c.push(this.createAction({label:"Move",command:"Widget/Move",group:"Widget",tab:"Home",icon:"fa-reorder",mixin:g}));c=c.concat(this.getWidgetLayoutActions());
c=c.concat(this.getEditToggleActions());c=c.concat(this.getFlowActions());c.push(this.createAction({label:"Focus",command:"Widget/Focus",group:"Widget",tab:"Home",icon:"fa-crosshairs",mixin:g}));(a=this._getViewActions(a))&&a[0]&&(a=a[0].actions);this._maqActions=a;this.getEditorContext();for(var B=0;B<a.length;B++){var C=a[B];d._loadActionClass(C);["label","showLabel","iconClass"].forEach(function(a){C.hasOwnProperty(a)});if(C.menu&&("DropDownButton"==C.type||"ComboButton"==C.type))for(var t=0;t<
C.menu.length;t++){var I=C.menu[t];d._loadActionClass(I);["label","iconClass"].forEach(function(a){});b(I)}"layout"===C.id&&(layoutAction=C);b(C)}var G=u(A,{templateString:'\x3cdiv class\x3d"CIActionWidget"\x3e\x3c/div\x3e',widgetClass:""}),y=function(a,b){var l=e.getEditorContext(),c={};c.state=b;c=new davinci.ve.commands.ModifyCommand(a,c,null);dojo.publish("/davinci/ui/widgetPropertiesChanges",[{source:l.editor_id,command:c}]);(a=a.domNode.getState(b))&&(a=l.toWidget(a))&&l.select(a)},q=function(a){return u(G,
{cis:[],action:a,startup:function(){p.renderCIS(this.cis,this.domNode,this).then(function(b){b.forEach(function(b){a.addReference(b);b._on("change",function(b){a.set("value",b);a.refresh();var e=m.getStatableWidgetsSelection();e.forEach(function(a){if("No State"===b)y(a,"");else if("Add State"===b||"Remove State"===b){if("Add State"===b)return Q(e[0],m);if("Remove State"===b){a=e[0];var l=m,c=a.domNode,d=c.state,g=l.getEditorContext();c.getStates();var d=c.getState(d),A=g.toWidget(d);c.removeState(d);
g.select(A);l.runAction("Edit/Delete");g.select(a)}}else y(a,b)})})})});setTimeout(function(){a.refresh()},1E3)},render:function(a,b){}})};c.push(this.createAction({label:"State",command:"Widget/State",icon:"fa-magic",group:"Widget",tab:"Widget",mixin:g,onCreate:function(a){var b=q(a);a.setVisibility(h.ACTION_VISIBILITY.QUICK_LAUNCH,{widgetClass:b,closeOnClick:!1,widgetArgs:{cis:[n.createCI("",h.ECIType.ENUMERATION,"",{widget:{inline:!0,options:[{value:"No state support",label:"No state support"}],
widgetClass:"",action:a}})]}});a.setVisibility(h.ACTION_VISIBILITY.CONTEXT_MENU,!1);a.setVisibility(h.ACTION_VISIBILITY.MAIN_MENU,!1)}}));return c},getEditToggleActions:function(){var a=[],b={addPermission:!0,quick:!0,localize:!1};a.push(this.createAction({label:"Edit",command:"View/Show/Design",icon:"fa-edit",tab:"Home",group:"View",mixin:b}));a.push(this.createAction({label:"Preview",command:"View/Show/Preview",icon:"fa-eye",tab:"Home",group:"View",mixin:b}));return a},_toAction:function(a){var b=
a.command||this._toCommand(a.label)||a.id;if(!b)return null;var e=this,b=this.createAction({label:a.label,group:a.group||"Ungrouped",icon:this._getIconClass(a.iconClass)||a.iconClass,command:b,tab:a.tab||"Home",mixin:{action:a,addPermission:!0,quick:!0,actionId:a.id,localize:!1},shouldDisable:function(){var b=e.getEditorContext();return b&&a.action&&a.action.isEnabled?!a.action.isEnabled(b):!1}});switch(a.id){case "documentSettings":return null;case "outline":b.group="Widget";break;case "undo":case "redo":case "cut":case "copy":case "paste":b.group=
"Edit";break;case "delete":b.group="Organize";break;case "theme":case "rotateDevice":case "chooseDevice":case "stickynote":case "savecombo":case "showWidgetsPalette":case "layout":case "sourcecombo":case "design":case "closeactiveeditor":case "tableCommands":return null}return b},getWidgetLayoutActions:function(a){function b(a,b,l,d){c.push(e.createAction({label:a,icon:b,group:"Widget",tab:"Home",command:"Widget/Align/"+l,mixin:{addPermission:!0,quick:!0}}))}var e=this,c=[];c.push(this.createAction({label:"Align",
command:"Widget/Align",icon:"fa-arrows",group:"Widget",tab:"Home",mixin:{addPermission:!0,quick:!0,localize:!1},shouldDisable:function(){if(!e.getEditorContext())return!0;var a=e.getSelection();return 0==a.length||2>a.length}}));b("Align Left","layoutIcon-alignLeftVertical","Align Left",e._alignLeftVertical);b("Align Center","layoutIcon-alignCenterVertical","Align Center",e._alignCenterVertical);b("Align Right","layoutIcon-alignRightVertical","Align Right",e._alignRightVertical);b("Align Top","layoutIcon-alignTopHorizontal",
"Align Top",e._alignTopHorizontal);b("Align Bottom","layoutIcon-alignBottomHorizontal","Align Bottom",e._alignBottomHorizontal);b("Same Size","layoutIcon-sameSize","Same Size",e._sameSize);b("Same Width","layoutIcon-sameWidth","Same Width",e._sameWidth);b("Same Height","layoutIcon-sameHeight","Same Height",e._sameHeight);return c},_getViewActions:function(){var a=[];g.getExtensions("davinci.editorActions",function(b){if("davinci.ve.HTMLPageEditor"==b.editorContribution.targetID)return a.push(b.editorContribution),
!0});0==a.length&&g.getExtension("davinci.defaultEditorActions",function(b){a.push(b.editorContribution);return!0});var b=t.getLibraryActions("davinci.editorActions","davinci.ve.HTMLPageEditor"),a=dojo.clone(a);0<a.length&&b.length&&dojo.forEach(b,function(b){var e=k("davinci/Workbench");b.action&&e._loadActionClass(b);if(b.menu)for(var c=0;c<b.menu.length;c++){var l=b.menu[0];l.action&&e._loadActionClass(l)}a[0].actions.push(b)});return a},permissions:[D.RENAME,D.UNDO,D.REDO,D.RELOAD,D.CLIPBOARD,
D.LAYOUT,D.COLUMNS,D.SELECTION,D.SAVE,D.SEARCH,D.TOOLBAR,"File/Properties",D.GO_UP,D.HEADER,D.COPY,D.CLOSE,D.MOVE,D.RENAME,D.RELOAD,D.CLIPBOARD,D.LAYOUT,D.SELECTION,D.SEARCH,D.OPEN_IN_TAB,D.TOOLBAR,D.SOURCE,D.CLIPBOARD_COPY,D.CLIPBOARD_PASTE,D.CLIPBOARD_CUT],_stateOptions:function(a){var b=function(a,b){return{label:a,value:b||a}},e=[b("No State"),b("Add State"),b("Remove State")];a.forEach(function(a){e.push(b(a.name))});return e},refreshStateAction:function(){var a=this.getAction("Widget/State"),
b=this.getSelection()||[],a=a.getReferences();if(1===b.length)if((b=b[0].domNode)&&b.getStates){var e=b.getStates(),c=this._stateOptions(e);a.forEach(function(a){a.set("options",c)});var m=b.state||"No State",d=_.find(c,{value:m});a.forEach(function(a){a.set("value",d?m:"No State")})}else a.forEach(function(a){a.set("options",[{label:"No state support",value:-1}]);a.set("value",-1)});else a.forEach(function(a){a.set("options",[{label:"No state support",value:-1}]);a.set("value",-1);a.set("disabled",
!0)})},startup:function(){var a=this,e=this,c=b.getDefaultActions(this.permissions,this,this),c=c.concat(this.getItemActions(c));c.push(this.createAction({label:"Edit",command:"Edit",icon:"fa-edit",tab:"Home",group:"View",mixin:{addPermission:!0,quick:!0}}));this.addActions(c);this._on("selectionChanged",function(b){window._vees=b;b.owner&&b.owner.editor&&b.owner.editor.getSelection?window.__selected(b.owner.editor):window.__selected(e);a.refreshActions();a.refreshStateAction();a.updateFocus&&setTimeout(function(){a.updateFocus()},
500)});if(this.inherited)return this.inherited(arguments)}},H=u(G.dcl,D);H.GridClass=C("Actions",[G],D);H.Impl=D;return H})},"xideve/views/VisualEditorSourceEditor":function(){define(["dcl/dcl","xace/views/Editor","xide/utils","davinci/model/Factory"],function(u,w,k,q){return u(null,{declaredClass:"xideve/views/VisualEditorSourceEditor",createHTMLEditor:function(h,n,p){var g=this;n=k.addWidget(w,{__permissions:[],options:{filePath:p.path},config:g.config,delegate:g,owner:g,parentContainer:h,ctx:g.ctx,
style:"padding:0px;",item:p,resizeToParent:!0,model:q.newHTML({url:n}),selectModel:function(d){},setVisible:function(){},setContent:function(d,h){this.model.ctx=g.ctx;this.model.fileName=d;this.model.setText(h)},store:null,storeDelegate:{getContent:function(d){g.ctx.getFileManager().getContent(p.mount,p.path,d)},saveContent:function(d,h,n){g.ctx.getFileManager().setContent(p.mount,p.path,d,h)}},title:"notitle",closable:!0},this,h,!0);g.textEditor=n;h.add(n);return n}})})},"xace/views/Editor":function(){define("dcl/dcl xide/types xide/utils xaction/ActionProvider xace/views/ACEEditor xace/views/_Actions xaction/Toolbar xide/mixins/PersistenceMixin".split(" "),
function(u,w,k,q,h,n,p,g){g=u([g.dcl],{declaredClass:"xace.views.EditorPersistence",defaultPrefenceTheme:"idle_fingers",defaultPrefenceFontSize:14,saveValueInPreferences:!0,getDefaultPreferences:function(){return k.mixin({theme:this.defaultPrefenceTheme,fontSize:this.defaultPrefenceFontSize},this.saveValueInPreferences?{value:this.get("value")}:null)},onAfterAction:function(d){var g=this.getEditor().getTheme();this.savePreferences({theme:g.replace("ace/theme/",""),fontSize:this.getEditor().getFontSize()});
return this.inherited(arguments)},toPreferenceId:function(d){if(!d){var g=$("body");d="xTheme-";var h;_.each(["blue","gray","white","transparent"],function(b){h=d+b;g.hasClass(h)&&(d=h)})}return(d||this.cookiePrefix||"")+"_xace"},getDefaultOptions:function(){var d=this.inherited(arguments),g=this.loadPreferences(null);g&&k.mixin(d,g)||this.savePreferences(this.getDefaultPreferences());return d}});u=u([n,h,q.dcl,g,p.dcl],{toolbarArgs:{actionFilter:{}},getBreadcrumbPath:function(){if(this.item)return{path:k.replaceAll("/",
"",this.item.mount)+":/"+this.item.path.replace("./","/")}},tabOrder:{Home:100,View:50,Settings:20},menuOrder:{File:110,Edit:100,View:90,Block:50,Settings:20,Navigation:10,Editor:9,Step:5,New:4,Window:3,Help:2},declaredClass:"xace/views/Editor",options:null,loadingIcon:"fa-spinner fa-spin",iconClassNormal:"fa-code",templateString:'\x3cdiv attachTo\x3d"template" class\x3d"grid-template widget" style\x3d"width: 100%;height: 100%;overflow: hidden !important;position: relative;padding: 0px;margin: 0px"\x3e\x3cdiv attachTo\x3d"header" class\x3d"view-header row bg-opaque" style\x3d"height: auto;width:inherit;height:auto;min-height: 33px"\x3e\x3c/div\x3e\x3cdiv attachTo\x3d"aceNode" class\x3d"view-body row" style\x3d"height:100%;width: 100%;position: relative;"\x3e\x3c/div\x3e\x3cdiv attachTo\x3d"footer" class\x3d"view-footer" style\x3d"position: absolute;bottom: 0px;width: 100%"\x3e\x3c/div\x3e\x3c/div\x3e',
getContent:function(d,g,h){this.storeDelegate?this.storeDelegate.getContent(function(b){g(b)},d||this.item):h&&h("Editor::getContent : Have no store delegate!")},saveContent:function(d,g,h){var b=this;this.set("iconClass","fa-spinner fa-spin");var c=d||this.get("value");if(this.storeDelegate)return this.storeDelegate.saveContent(c,function(){b.set("iconClass",b.iconClassNormal);b.lastSavedContent=c;b.onContentChange(c);b.publish(w.EVENTS.ON_FILE_CONTENT_CHANGED,{path:b.options.filePath,item:b.item,
content:c,editor:b},b)},null,b.item);h&&h("Editor::saveContent : Have no store delegate!");return!1},addCommands:function(){var d=this.getAce(),g=this;ace.require("ace/config").init();var h=[];this.hasHelp&&h.push({name:"showKeyboardShortcuts",bindKey:{win:"Ctrl-Alt-h",mac:"Command-Alt-h"},exec:function(b){g.showHelp(b)}});this.hasConsole&&h.push({name:"gotoline",bindKey:{win:"Ctrl-L",mac:"Command-L"},exec:function(b,c){"object"==typeof c?(c=this.name+" "+b.getCursorPosition().row,b.cmdLine.setValue(c,
1),b.cmdLine.focus()):(c=parseInt(c,10),isNaN(c)||b.gotoLine(c))},readOnly:!0});d.commands.addCommands(h)},getWebRoot:function(){return this.ctx.getResourceManager().getVariable(w.RESOURCE_VARIABLES.APP_URL)},resize:function(){return this._resize()},onResize:function(){return this._resize()},_resize:function(){var d=this.getParent();this._isMaximized?k.resizeTo(this,this._maximizeContainer,!0,!0):d&&k.resizeTo(this,d,!0,!0);var d=this.getToolbar(),g=!1,h=$(this.aceNode);this._isMaximized&&d&&k.resizeTo(d,
this.header,!0,!0);!d||d&&d.isEmpty()?g=!0:d&&(k.resizeTo(d,this.header,!1,!0),d.resize(),k.resizeTo(this.header,d,!0,!1));var b=$(this.domNode).height(),g=1==g?0:$(this.header).height(),c=$(this.footer).height(),b=b-g-c;d&&(b-=4);50<b?h.height(b+"px"):h.height("inherited")},__set:function(d,g){var h=this.inherited(arguments);if("iconClass"===d){var b=this._parent;b&&b.icon&&this._parent.icon(g)}return h},__get:function(d){if("value"===d){var g=this.getEditor();return(g=g?g.session:null)?g.getValue():
null}return this.inherited(arguments)}});u.DEFAULT_PERMISSIONS=n.DEFAULT_PERMISSIONS;return u})},"xace/views/ACEEditor":function(){define("dcl/dcl dojo/has dojo/dom-construct xide/utils xide/types xide/widgets/TemplatedWidgetBase xace/views/_Split xaction/DefaultActions xace/views/_AceMultiDocs".split(" "),function(u,w,k,q,h,n,p,g,d){var t={};n=u([n],{resizeToParent:!0,templateString:'\x3cdiv attachTo\x3d"aceNode" style\x3d"width: 100%;height: 100%" class\x3d""\x3e\x3c/div\x3e'});d=u(d,{declaredClass:"xace/views/EditorInterface",
editorSession:null,_lastValue:null,enableMultiDocuments:function(){this.addFileCompleter().addDocument("asdf.js","var xxxTop \x3d 2*3;")},loadScript:function(b,c,d){c=document.createElement("script");c.type="application/javascript";c.src=b;c.onload=function(){d&&d()};document.body.appendChild(c)},setMode:function(b,c,d){if((c=c||this.ctx||window.sctx)&&c.getResourceManager()){var a=this;if(t[b])a.set("mode",b),d&&d(b);else{var e=null;(e=c.getResourceManager().getVariable(h.RESOURCE_VARIABLES.ACE))?
e=e+"/mode-"+b+".js":(c=c.getResourceManager().getVariable(h.RESOURCE_VARIABLES.APP_URL),w("debug"),e=c+"/xfile/ext/ace//mode-"+b+".js");this.loadScript(e,null,function(){t[b]=!0;a.set("mode",b);d&&d(b)})}}else console.error("have no resource manager!")},get:function(b){if("value"===b){var c=this.getEditor();return(c=c?c.session:null)?c.getValue():null}return this.inherited(arguments)},set:function(b,c){var d=this,a=this.getEditor(),e=this.editorSession;if("iconClass"===b){var g=this._parent;g&&g.icon&&
this._parent.icon(c)}if(a&&e)if(g=a.container,"item"==b&&(e.setUseWorker(!1),d.getContent(c,function(a){var b=d._getMode(c.path);d.set("value",a);d.setMode(b);e.setUseWorker(d.options.useWorker)})),"value"==b&&c)e.setValue(c);else if("theme"==b)"string"==typeof c&&(c="ace/theme/"+c),a.setTheme(c),this.split&&this.split.setTheme(c);else if("mode"==b)try{ace.require(["ace/mode/"+c],function(a){a&&a.Mode&&d.split.$editors.forEach(function(b){b.session.setMode(new a.Mode)})})}catch(I){console.error("ace mode failed : "+
c)}else"readOnly"==b?a.setReadOnly(c):"tabSize"==b?e.setTabSize(c):"softTabs"==b?e.setUseSoftTabs(c):"wordWrap"==b?e.setUseWrapMode(c):"printMargin"==b?a.renderer.setPrintMarginColumn(c):"showPrintMargin"==b?a.setShowPrintMargin(c):"highlightActiveLine"==b?a.setHighlightActiveLine(c):"fontSize"==b?$(g).css(b,c):"showIntentGuides"==b?a.setDisplayIndentGuides(c):"elasticTabstops"==b?a.setOption("useElasticTabstops",c):"useIncrementalSearch"==b?a.setOption("useIncrementalSearch",c):"showGutter"==b&&
a.renderer.setShowGutter(c);return this.inherited("set",arguments)},_getMode:function(b){b=b||this.fileName;var c="javascript";if(b){c=q.getFileExtension(b)||"js";if("js"===c||"xblox"===c)c="javascript";if("h"===c||"cpp"===c)c="c_cpp";if("html"===c||"cfhtml"===c||"dhtml"===c)c="html";"cp"===c&&(c="xml");"md"===c&&(c="markdown");"hbs"===c&&(c="handlebars")}return c},setOptions:function(b){this.options=b;var c=this;_.each(b,function(a,b){c.set(b,a)});var d=this.getEditor();d&&b.aceOptions&&(d.setOptions(b.aceOptions),
d.session.setUseWorker(b.useWorker),d.setOptions({enableBasicAutocompletion:!0,enableSnippets:!0,enableLiveAutocompletion:!0}),this.setMode(b.mode));return this.options},getOptions:function(){return this.options},onContentChange:function(b){this._parent&&this._parent.set&&this._parent.set("changed",b!==this.lastSavedContent)},onDidChange:function(){var b=this.get("value");this._lastValue!==b&&(this._lastValue=b,this._emit("change",b),this.onContentChange(b))},getDefaultOptions:function(b,c){var d=
this;return q.mixin({region:"center",style:"margin: 0; padding: 0; position:relative;overflow: auto;height:inherit;width:inherit;text-align:left;",readOnly:!1,tabSize:2,wordWrap:!1,showPrintMargin:!1,highlightActiveLine:!0,fontSize:16,showGutter:!0,showLineNumbers:!0,useWorker:!0,showInvisibles:!1,displayIndentGuides:!0,useSoftTabs:!0,fileName:"none",mode:"javascript",value:b||this.value||"No value",theme:"idle_fingers",splits:1,useElasticTabstops:!1,animatedScroll:!1,highlightActive:!0,aceOptions:{enableBasicAutocompletion:!0,
enableSnippets:!0,enableLiveAutocompletion:!0},onLoad:function(a){a.$blockScrolling=Infinity},onDidChange:function(){var a=d.get("value");if(a!==d.lastSavedContent)d.onContentChange(a)},onPrefsChanged:function(){d.setPreferences&&d.setPreferences()}},c)},getEditor:function(b){if(this.split)return null==b?this.split.getCurrentEditor():this.split.getEditor(null!=b?b:0);if(this.editor)return this.editor},resize:function(b,c,d){b=this.options||{};this.onResize&&this.onResize();return this.debounce("resize",
function(){var a=this.getEditor(),b=this.split||this.editor;if(a&&this.aceNode&&a.container)return a&&q.resizeTo(a.container,this.aceNode,!0,!0),b?b.resize():null;this.resize_debounced.cancel();this.resize_debounced=null}.bind(this),b.resizeDelay||300,null)},getAce:function(){return this.getEditor()},addBasicCommands:function(b){b=b||this.getEditor();var c=this,d=ace.require("ace/ext/whitespace");this._whiteSpaceExt=d;b.commands.addCommands(d.commands);b.commands.addCommands([{name:"gotoline",bindKey:{win:"Ctrl-L",
mac:"Command-L"},exec:function(a,b){"object"==typeof b?(b=this.name+" "+a.getCursorPosition().row,a.cmdLine.setValue(b,1),a.cmdLine.focus()):(b=parseInt(b,10),isNaN(b)||a.gotoLine(b))},readOnly:!0},{name:"snippet",bindKey:{win:"Alt-C",mac:"Command-Alt-C"},exec:function(a,b){"object"==typeof b?(a.cmdLine.setValue("snippet ",1),a.cmdLine.focus()):(b=snippetManager.getSnippetByName(b,a))&&snippetManager.insertSnippet(a,b.content)},readOnly:!0},{name:"increaseFontSize",bindKey:"Ctrl-+",exec:function(a){a.setFontSize(a.getFontSize()+
1);c.onAfterAction()}},{name:"decreaseFontSize",bindKey:"Ctrl+-",exec:function(a){a.setFontSize(a.getFontSize()-1);c.onAfterAction()}},{name:"resetFontSize",bindKey:"Ctrl+0",exec:function(a){a.setFontSize(12);c.onAfterAction()}}])},onEditorCreated:function(b,c){var d=this;b.getSelectedText=function(){return d.editorSession.getTextRange(this.getSelectionRange())};b.on("change",function(){d.onDidChange(arguments)});this.addBasicCommands(b);b.setFontSize(c.fontSize);b.$blockScrolling=Infinity;this._whiteSpaceExt&&
this._whiteSpaceExt.detectIndentation(b.session)},destroy:function(){var b=this.getEditor();b&&b.destroy();(b=this.resize_debounced)&&b.cancel()},getOptionsMixed:function(b){var c=this.getPreferences?this.getPreferences():{},d=this.getDefaultOptions(this.value,b||this.options);q.mixin(d,b);q.mixin(d,c);d.mode=this._getMode(d.fileName);return d},createEditor:function(b,c){this.set("iconClass",this.iconClassNormal);if(this.editor||this.split)return this.editor||this.split;var d=this.getPreferences?
this.getPreferences():{},a=this.getDefaultOptions(c);q.mixin(a,b);q.mixin(a,d);a.mode=this._getMode(a.fileName);b=a.targetNode||k.create("div");$(b).css({padding:"0",margin:"0",height:"100%",width:"100%"});this.aceNode.appendChild(b);var d=ace.require("ace/config"),e=null,g=null;ace.require("ace/ext/language_tools");try{this.split=e=new (p.getSplitter())(b,null,1),this._aceConfig=d,d.init(),this.editor=g=e.getEditor(0),this.editorSession=this.editor.getSession(),c&&this.editorSession.setValue(c),
e&&e.setSplits(a.splits)}catch(I){logError(I,"error creating editor")}this.setOptions(a);this.onEditorCreated(g,a);return g},addAutoCompleter:function(b){ace.require("ace/ext/language_tools").addCompleter({getCompletions:function(c,d,a,e,g){0===e.length?g(null,[]):b?g(null,b.map(function(a){return{name:a.value,value:a.word,meta:a.meta}})):g(null,[])}})}});var G=u(null,{declaredClass:"xace/views/ACE",onLoaded:function(){this.set("iconClass",this.iconClassNormal)},getKeyTarget:function(){return this.aceNode},
startup:function(){this.aceNode.id=q.createUUID();if(this.permissions){var b=g.getDefaultActions(this.permissions,this,this),b=b.concat(this.getEditorActions(this.permissions));this.addActions(b)}this.iconClassNormal=""+this.iconClass;this.set("iconClass","fa-spinner fa-spin");var c=this,d=this.options||{};if(this.item||null!=this.value)null!=this.value?(this.lastSavedContent=""+this.value,c.createEditor(c.options||null,this.value)):this.getContent(this.item,function(a){c.lastSavedContent=a;c.createEditor(c.options||
d,a)},function(a){c.createEditor(c.options||null,"");logError(a,"error loading content from file")})}});u=u([n,G,d],{});u.EditorImplementation=d;u.Editor=G;u.Container=n;u.Splitter=p;return u})},"xace/views/_Split":function(){define(["dcl/dcl"],function(u){var w=null;u=u(null,{declaredClass:"xace/views/Split"});u.getSplitter=function(){function k(b,c){this.$u=b;this.$doc=c}if(w)return w;var q=ace.require,h=q("ace/lib/oop"),n=q("ace/lib/lang"),p=q("ace/lib/event_emitter").EventEmitter,g=q("ace/editor").Editor,
d=q("ace/virtual_renderer").VirtualRenderer,t=q("ace/edit_session").EditSession,G=q("ace/undomanager").UndoManager;q("ace/keyboard/hash_handler");q=function(b,c,d){this.BELOW=1;this.BESIDE=0;this.$container=b;this.$theme=c;this.$splits=0;this.$editorCSS="";this.$editors=[];this.$orientation=this.BESIDE;this.setSplits(d||1);this.$cEditor=this.$editors[0];this.on("focus",function(a){this.$cEditor=a}.bind(this))};(function(){h.implement(this,p);this.$createEditor=function(){var b=document.createElement("div");
b.className=this.$editorCSS;b.style.cssText="position: absolute; top:0px; bottom:0px";this.$container.appendChild(b);var c=new g(new d(b,this.$theme));c.on("focus",function(){this._emit("focus",c)}.bind(this));this.$editors.push(c);c.session.setUndoManager(new G);c.setFontSize(this.$fontSize);return c};this.setSplits=function(b){var c;if(1>b)throw"The number of splits have to be \x3e 0!";if(b!=this.$splits){if(b>this.$splits){for(;this.$splits<this.$editors.length&&this.$splits<b;)c=this.$editors[this.$splits],
this.$container.appendChild(c.container),c.setFontSize(this.$fontSize),this.$splits++;for(;this.$splits<b;)this.$createEditor(),this.$splits++}else for(;this.$splits>b;)c=this.$editors[this.$splits-1],this.$container.removeChild(c.container),this.$splits--;this.resize()}};this.getSplits=function(){return this.$splits};this.getEditor=function(b){return this.$editors[b]};this.getCurrentEditor=function(){return this.$cEditor};this.focus=function(){this.$cEditor.focus()};this.blur=function(){this.$cEditor.blur()};
this.setSessionOption=function(b,c){this.$editors.forEach(function(d){d=d.session;"mode"==b&&d.setMode(c)})};this.setTheme=function(b){this.$editors.forEach(function(c){c.setTheme(b)})};this.setKeyboardHandler=function(b){this.$editors.forEach(function(c){c.setKeyboardHandler(b)})};this.forEach=function(b,c){this.$editors.forEach(b,c)};this.$fontSize="";this.setFontSize=function(b){this.$fontSize=b;this.forEach(function(c){c.setFontSize(b)})};this.$cloneSession=function(b){var c=new t(b.getDocument(),
b.getMode()),d=b.getUndoManager();d&&(d=new k(d,c),c.setUndoManager(d));c.$informUndoManager=n.delayedCall(function(){c.$deltas=[]});c.setTabSize(b.getTabSize());c.setUseSoftTabs(b.getUseSoftTabs());c.setOverwrite(b.getOverwrite());c.setBreakpoints(b.getBreakpoints());c.setUseWrapMode(b.getUseWrapMode());c.setUseWorker(b.getUseWorker());c.setWrapLimitRange(b.$wrapLimitRange.min,b.$wrapLimitRange.max);c.$foldData=b.$cloneFoldData();return c};this.setSession=function(b,c){c=null==c?this.$cEditor:this.$editors[c];
this.$editors.some(function(c){return c.session===b})&&(b=this.$cloneSession(b));c.setSession(b);return b};this.getOrientation=function(){return this.$orientation};this.setOrientation=function(b){this.$orientation!=b&&(this.$orientation=b,this.resize())};this.resize=function(){var b=this.$container.clientWidth,c=this.$container.clientHeight,d;if(this.$orientation==this.BESIDE){b/=this.$splits;this.diffGutter&&(b-=60/this.$splits);for(var a=0;a<this.$splits;a++){d=this.$editors[a];d.container.style.width=
b+"px";d.container.style.top="0px";d.container.style.left=a*b+"px";1==a&&this.diffGutter&&(d.container.style.left=60+a*b+"px",this.diffGutter.style.left=a*b+"px");if(!c)break;$(d.container).css("height",c+"px");var e=$(d.container).find(".ace_content");d.resize();e.css("height",c+"px")}}else for(c/=this.$splits,a=0;a<this.$splits;a++)d=this.$editors[a],d.container.style.width=b+"px",d.container.style.top=a*c+"px",d.container.style.left="0px",d.container.style.height=c+"px",d.resize()}}).call(q.prototype);
(function(){this.execute=function(b){this.$u.execute(b)};this.undo=function(){var b=this.$u.undo(!0);b&&this.$doc.selection.setSelectionRange(b)};this.redo=function(){var b=this.$u.redo(!0);b&&this.$doc.selection.setSelectionRange(b)};this.reset=function(){this.$u.reset()};this.hasUndo=function(){return this.$u.hasUndo()};this.hasRedo=function(){return this.$u.hasRedo()}}).call(k.prototype);return w=q};return u})},"xace/views/_AceMultiDocs":function(){define(["dcl/dcl","xdojo/declare","module","xace/base_handler",
"xace/complete_util"],function(u,w,k,q,h){function n(a,b,c,d){b=b.split(/[^a-zA-Z_0-9\$]+/);for(var e=0;e<b.length;e++){var g=b[e];g&&(Object.prototype.hasOwnProperty.call(c,g)?c[g]++:(c[g]=1,d[g]={}),d[g][a]=!0)}return c}function p(a){var b=d[a];if(b){for(var c in b)t[c]-=b[c],delete G[c][a],0===t[c]&&(delete t[c],delete G[c]);delete d[a]}}function g(a,b){d[a]||(8E5<b.size?delete d[a]:(d[a]=n(a,b,{},{}),n(a,b,t,G)))}var d={},t={},G={},b,c,C=k.exports=Object.create(q);C.handlesLanguage=function(a){return!0};
C.handlesEditor=function(){return this.HANDLES_ANY};C.getMaxFileSizeSupported=function(){return 1E6};C.onDocumentOpen=function(a,b,c,h){d[a]||g(a,b.getValue());h()};C.addDocument=function(a,b){d[a]||g(a,b)};C.onDocumentClose=function(a,e){p(a);a==b&&(c=null);e()};C.analyze=function(a,e,d,h){c&&this.path!==b&&(p(b),g(b,c),c=null);b=this.path;c=a;d()};C.complete=function(a,b,c,d,g){a=a.getSession().getLine(c.row);c=h.retrievePrecedingIdentifier(a,c.column,this.$getIdentifierRegex());var e=t;a=[];for(var A in e)a.push(A);
A=h.findCompletions(c,a);var n=this.path;A=A.filter(function(a){return!G[a][n]});A=A.slice(0,100);g(A.filter(function(a){return!a.match(/^[0-9$_\/]/)}).map(function(a){var b=(Object.keys(G[a])[0]||"[unknown]").split("/");return{name:a,value:a,icon:null,score:e[a],meta:b[b.length-1],priority:0,isGeneric:!0}}))};C.getCompletions=function(a,b,c,d,g){var e=null;C.complete(a,null,c,null,function(a){e=a});g(null,e)};u=u(null,{declaredClass:"xide.views._AceMultiDocs",didAddMCompleter:!1,multiFileCompleter:null,
addFileCompleter:function(){var a=null;this.didAddMCompleter||(this.multiFileCompleter=a=C,ace.require("ace/ext/language_tools").addCompleter(a),this.didAddMCompleter=!0);return a}});u.completer=C;return u})},"xace/base_handler":function(){define(function(u,w,k){k.exports={HANDLES_ANY:0,HANDLES_EDITOR:1,HANDLES_IMMEDIATE:2,HANDLES_EDITOR_AND_IMMEDIATE:3,language:null,path:null,workspaceDir:null,doc:null,isFeatureEnabled:function(q){return!disabledFeatures[q]},$getIdentifierRegex:function(){return null},
completeUpdate:function(q){throw Error("Use worker_util.completeUpdate instead()");},handlesLanguage:function(q){throw Error("base_handler.handlesLanguage() is not overridden");},handlesEditor:function(){return this.HANDLES_EDITOR},getMaxFileSizeSupported:function(){return 8E5},isParsingSupported:function(){return!1},getIdentifierRegex:function(){return null},getCompletionRegex:function(){return null},getTooltipRegex:function(){return null},parse:function(q,h){h()},findNode:function(q,h,n){n()},getPos:function(q,
h){h()},init:function(q){q()},onUpdate:function(q,h){h()},onDocumentOpen:function(q,h,n,p){p()},onDocumentClose:function(q,h){h()},onCursorMove:function(q,h,n,p,g){g()},tooltip:function(q,h,n,p,g){g()},highlightOccurrences:function(q,h,n,p,g){g()},getRefactorings:function(q,h,n,p,g){g()},outline:function(q,h,n){n()},hierarchy:function(q,h,n){n()},complete:function(q,h,n,p,g){g()},analyze:function(q,h,n,p){n()},getRenamePositions:function(q,h,n,p,g){g()},onRenameBegin:function(q,h){h()},commitRename:function(q,
h,n,p,g){g()},onRenameCancel:function(q){q()},codeFormat:function(q,h){h()},jumpToDefinition:function(q,h,n,p,g){g()},getResolutions:function(q,h,n,p){p()},hasResolution:function(q,h,n,p){p()},getInspectExpression:function(q,h,n,p,g){g()}};for(f in k.exports)"function"===typeof k.exports[f]&&(k.exports[f].base_handler=!0)})},"xace/complete_util":function(){define(function(u,w,k){function q(d,g,h){h=h||n;var b=[];for(--g;0<=g&&d;g--)if(h.test(d[g]))b.push(d[g]);else break;return b.reverse().join("")}
function h(d,g,h,b,c){if(-1===["javascript","jsx"].indexOf(b.getSession().syntax))return!1;b=null==h?q(d,g,p):h;h=9-(c?1:0);g=g-b.length-h;c=d.substr(g,h)+(c?'"':"");return 0<=g&&c.match(/require\(["']/)||d.substr(g+1,h).match(/require\(["']/)}var n=/[a-zA-Z_0-9\$]/,p=/(?!["'])./,g="../static/lib";w.precededByIdentifier=function(d,g,n,b){var c=q(d,g);n&&(c+=n);if(n=""!==c&&!("0"<=c[0]&&"9">=c[0])){if(-1===["javascript","jsx"].indexOf(b.getSession().syntax))n=!0;else{n=null;for(var t=0;t<g;t++)'"'!==
d[t]||n?'"'===d[t]&&'"'===n&&"\\"!==d[t-1]?n=null:"'"!==d[t]||n?"'"===d[t]&&"'"===n&&"\\"!==d[t-1]?n=null:"/"===d[t]&&"/"===d[t+1]?(n="//",t++):"/"!==d[t]||"*"!==d[t+1]||n?"*"===d[t]&&"/"===d[t+1]&&"/*"===n?(n=null,t++):"/"!==d[t]||n?"/"===d[t]&&"/"===n&&"\\"!==d[t-1]&&(n=null):n="/":"global"!==d.substr(t+2,6)&&(n="/*",t++):n="'":n='"';n="/"!=n}n=n||h(d,g,c,b)}return n};w.isRequireJSCall=h;w.retrievePrecedingIdentifier=q;w.retrieveFollowingIdentifier=function(d,g,h){h=h||n;for(var b=[];d&&g<d.length;g++)if(h.test(d[g]))b.push(d[g]);
else break;return b.join("")};w.findCompletions=function(d,g){g.sort();for(var h=0,b=g.length-1,c=Math.floor((b+h)/2);b>h&&0<=c&&0!==g[c].indexOf(d);)d<g[c]?b=c-1:d>g[c]&&(h=c+1),c=Math.floor((b+h)/2);for(;0<c&&0===g[c-1].indexOf(d);)c--;h=[];for(c=0<=c?c:0;c<g.length&&0===g[c].indexOf(d);c++)h.push(g[c]);return h};w.fetchText=function(d){var h=new XMLHttpRequest;d=g+"/"+d;console.error("fetch text : "+d);h.open("GET",d,!1);try{h.send()}catch(G){return!1}return 200===h.status||h.responseText?h.responseText:
!1};w.setStaticPrefix=function(d){g=d};w.DEFAULT_ID_REGEX=n;w.canCompleteForChangedLine=function(d,g,h,b,c){if(h.row!==b.row||0!==g.indexOf(d))return!1;h=q(d,h.column,c);b=q(g,b.column,c);return g.substr(0,g.length-b.length)===d.substr(0,d.length-h.length)}})},"xace/views/_Actions":function(){define("dcl/dcl xide/utils xide/types xide/types/Types xaction/types xaction/ActionProvider xace/views/ACEEditor xaction/Toolbar xaction/DefaultActions dojo/Deferred xace/formatters".split(" "),function(u,w,
k,q,h,n,p,g,d,t,G){q=k.ACTION;var b=k.VIEW_SPLIT_MODE;q=[q.RELOAD,q.SAVE,q.FIND,q.TOOLBAR,"Editor/Keyboard","View/Increase Font Size","View/Decrease Font Size","View/Themes","Help/Editor Shortcuts","Editor/Snippets","Editor/Console","Editor/Settings",q.FULLSCREEN,"View/Layout","Edit/Format"];n=u([p,g.dcl,n.dcl],{permissions:q,_searchBoxOpen:!1,onSingleView:function(){},setSplitMode:function(c){this.splitMode=c;if(!this.doSplit)if("Diff"==c)this.doDiff();else{var d=c==b.SPLIT_HORIZONTAL||c==b.SPLIT_VERTICAL,
a=this.getEditor(),e=this.split;d?(d=1==e.getSplits(),e.setOrientation(c==b.SPLIT_HORIZONTAL?e.BELOW:e.BESIDE),e.setSplits(2),d&&(c=e.getEditor(0).session,e.setSession(c,1).name=c.name,a=a.getOptions(),e.getEditor(1).setOptions(a))):(e.setSplits(1),this.onSingleView())}},onMaximized:function(b){var c=this.getParent();!1===b&&c&&c.resize&&c.resize();var a=this.getToolbar();a&&(b?$(a.domNode).addClass("bg-opaque"):$(a.domNode).removeClass("bg-opaque"));!1===b&&(this.resize(),c&&w.resizeTo(this,c,!0,
!0),this.publish(k.EVENTS.ON_VIEW_MAXIMIZE_END));this.getEditor().focus()},maximize:function(){var b=this.domNode,d=$(b);this.getToolbar();if(this._isMaximized)this._isMaximized=!1,d.removeClass("AceEditorPaneFullScreen"),this._lastParent.appendChild(b),w.destroy(this._maximizeContainer);else{this.publish(k.EVENTS.ON_VIEW_MAXIMIZE_START);this._isMaximized=!0;var d=$(this.domNode.ownerDocument),a=$("body")[0],e=w.create("div",{className:"ACEContainer bg-opaque",style:"z-index:300;height:100%;width:100%"});
this._maximizeContainer=e;a.appendChild(e);$(b).addClass("AceEditorPaneFullScreen");$(b).css("width",d.width());$(b).css("height",d.height());this.resize();this._lastParent=b.parentNode;e.appendChild(b);$(e).addClass("bg-opaque");$(e).css("width",d.width());$(e).css("height",d.height());$(e).css({position:"absolute",left:"0px",top:"0px",border:"none medium",width:"100%",height:"100%"})}this.onMaximized(this._isMaximized);return!0},save:function(b){var c=this.get("value"),a=this.saveContent(this.get("value"),
b),e=this;this._emit(k.EVENTS.ON_FILE_CONTENT_CHANGED,{content:c,item:b});setTimeout(function(){var a=e.getEditor();a&&a.focus()},600);return a},reload:function(){var b=this,d=new t;this.getContent(this.item,function(a){b.lastSavedContent=a;b.set("value",a);d.resolve(a)},function(a){logError(a,"error loading content from file");d.reject(a)});return d},runAction:function(b){b=this.getAction(b);if(!b)return!1;var c=this,a=b.command,e=k.ACTION,d=this.getEditor(),g=this.editorSession;-1!=a.indexOf("View/Layout")&&
c.setSplitMode(b.option,null);switch(a){case e.RELOAD:return this.reload();case "View/Increase Font Size":return d.setFontSize(d.getFontSize()+1),!0;case "View/Decrease Font Size":return d.setFontSize(d.getFontSize()-1),!0;case e.FULLSCREEN:return this.maximize();case "Help/Editor Shortcuts":c.showHelp();break;case e.SAVE:c.save(this.item);break;case e.FIND:var h=function(a){c._searchBoxOpen?(a.hide(),c._searchBoxOpen=!1):(a.show(d.session.getTextRange(),null),c._searchBoxOpen=!0)},g=ace.require("ace/lib/net"),
a=this.getWebRoot();(e=d.searchBox)?h(e):g.loadScript(a+"/xfile/ext/ace/ext-searchbox.js",function(a){a=ace.require("ace/ext/searchbox");h(new a.SearchBox(d))});return!0}if(-1!==a.indexOf("View/Themes")){c.set("theme",b.theme);if(e=b.getParent?b.getParent():null)e=e.getChildren(),_.each(e,function(a){a.set("icon",a._oldIcon)});b.set("icon","fa fa-check")}-1!==a.indexOf("Edit/Format")&&d&&(e=G.format(d,b.formatter),c.set("value",e));if(-1!==a.indexOf("Editor/Settings")){var a=b.option,e=d.getOption(b.option),
n=_.isBoolean(e);if("highlightActive"===a){d.setHighlightActiveLine(!d.getHighlightActiveLine());return}if(n)d.setOption(b.option,!e);else{if("wordWrap"===a)return g=g.getUseWrapMode(),this.set("wordWrap",!g),!0;"off"===e||"on"===e?d.setOption(a,"off"===e?"on":"off"):d.setOption(b.option,!1)}return!0}return this.inherited(arguments)},getEditorActions:function(c){function g(b,c,d,g,l,h,A,m){l=l=l||{};b=e.createAction(w.mixin({label:b,command:c||"Editor/Settings/"+b||"Editor/Settings/"+b,icon:d||"fa-cogs",
group:h||"Settings",mixin:w.mixin({addPermission:!0,option:g,actionType:A,owner:e},l)},m));a.push(b);return b}var a=[],e=this,h=k.ACTION,n=k.ACTION_ICON;a.push(this.createAction({label:"Save",command:h.SAVE,icon:n.SAVE,keycombo:"ctrl s",group:"File"}));a.push(this.createAction({label:"Find",command:h.FIND,icon:n.SEARCH,keycombo:"ctrl f",group:"Search"}));a.push(this.createAction({label:"Fullscreen",command:h.FULLSCREEN,icon:n.MAXIMIZE,keycombo:"ctrl f11",group:"View"}));a.push(this.createAction({label:"Increase Fontsize",
command:"View/Increase Font Size",icon:"fa-text-height",group:"View"}));a.push(this.createAction({label:"Decrease Fontsize",command:"View/Decrease Font Size",icon:"fa-text-height",group:"View"}));d.hasAction(c,"View/Themes")&&(a.push(this.createAction({label:"Themes",command:"View/Themes",icon:"fa-paint-brush",group:"View",mixin:{closeOnClick:!1,value:this.defaultPrefenceTheme},onCreate:function(a){var b=e.getDefaultOptions();a.set("value",b.theme)}})),e._addThemes&&e._addThemes(a));a.push(this.createAction({label:"Help",
command:"Help/Editor Shortcuts",icon:"fa-question",keycombo:"f1"}));a.push(this.createAction({label:"Settings",command:"Editor/Settings",icon:"fa-cogs",group:"Settings"}));h={onCreate:function(a){var b=e.getOptionsMixed()[this.option];null!==b&&a.set("value",b)},onChange:function(a,b){this.value=b;e.runAction(this)}};g("Show Gutters",null,null,"showGutter",null,null,k.ACTION_TYPE.MULTI_TOGGLE,h);g("Show Print Margin",null,null,"showPrintMargin",null,null,k.ACTION_TYPE.MULTI_TOGGLE,h);g("Display Intend Guides",
null,null,"displayIndentGuides",null,null,k.ACTION_TYPE.MULTI_TOGGLE,h);g("Show Line Numbers",null,null,"showLineNumbers",null,null,k.ACTION_TYPE.MULTI_TOGGLE,h);g("Show Indivisibles",null,null,"showInvisibles",null,null,k.ACTION_TYPE.MULTI_TOGGLE,h);g("Use Soft Tabs",null,null,"useSoftTabs",null,null,k.ACTION_TYPE.MULTI_TOGGLE,h);g("Use Elastic Tab Stops",null,null,"useElasticTabstops",null,null,k.ACTION_TYPE.MULTI_TOGGLE,h);g("Animated Scroll",null,null,"animatedScroll",null,null,k.ACTION_TYPE.MULTI_TOGGLE,
h);g("Word Wrap",null,null,"wordWrap",null,null,k.ACTION_TYPE.MULTI_TOGGLE,h);g("Highlight Active Line",null,null,"highlightActive",null,null,k.ACTION_TYPE.MULTI_TOGGLE,h);if(d.hasAction(c,"Edit/Format")){a.push(this.createAction({label:"Format",command:"Edit/Format",icon:"fa-indent",group:"Edit"}));var h=G.modes,n=function(b,c,d){b=e.createAction({label:b,command:"Edit/Format/"+b,icon:"fa-indent",group:"Edit",mixin:{addPermission:!0,formatter:d},onCreate:function(a){}});a.push(b)},p;for(p in h)a.push(n(h[p],
"",p))}d.hasAction(c,"View/Layout")&&(a.push(this.createAction({label:"Split",command:"View/Layout",icon:"fa-columns",group:"View"})),a.push(g("None","View/Layout/None","fa-columns",b.SOURCE,null,"View",k.ACTION_TYPE.SINGLE_TOGGLE)),a.push(g("Horizontal","View/Layout/Horizontal","layoutIcon-horizontalSplit",b.SPLIT_HORIZONTAL,null,"View",k.ACTION_TYPE.SINGLE_TOGGLE)),a.push(g("Vertical","View/Layout/Vertical","layoutIcon-layout293",b.SPLIT_VERTICAL,null,"View",k.ACTION_TYPE.SINGLE_TOGGLE)));return a},
_addThemes:function(b){for(var c=this.getThemeData(),a=this,e=function(b,e,c){return a.createAction({label:b,command:"View/Themes/"+b,group:"View",icon:e,mixin:{addPermission:!0,value:c,theme:c,closeOnClick:!1},onCreate:function(a){a._oldIcon=e;a.set("value",c);a.actionType=k.ACTION_TYPE.SINGLE_TOGGLE}})},d=0;d<c.length;d++){var g=c[d],h=g[1]||g[0].replace(/ /g,"_").toLowerCase(),g=e(g[0]," ",h);b.push(g)}},showHelp:function(b){b=b||this.getEditor();ace.require("ace/config").loadModule("ace/ext/keybinding_menu",
function(c){c.init(b);b.showKeyboardShortcuts()})},getThemeData:function(){return[["Chrome"],["Clouds"],["Crimson Editor"],["Dawn"],["Dreamweaver"],["Eclipse"],["GitHub"],["Solarized Light"],["TextMate"],["Tomorrow"],["XCode"],["Kuroir"],["KatzenMilch"],["Ambiance","ambiance","dark"],["Day","cloud9_day"],["Night","cloud9_night"],["Chaos","chaos","dark"],["Midnight","clouds_midnight","dark"],["Cobalt","cobalt","dark"],["idle Fingers","idle_fingers","dark"],["krTheme","kr_theme","dark"],["Merbivore",
"merbivore","dark"],["Merbivore-Soft","merbivore_soft","dark"],["Mono Industrial","mono_industrial","dark"],["Monokai","monokai","dark"],["Pastel on dark","pastel_on_dark","dark"],["Solarized Dark","solarized_dark","dark"],["Terminal","terminal","dark"],["Tomorrow-Night","tomorrow_night","dark"],["Tomorrow-Night-Blue","tomorrow_night_blue","dark"],["Tomorrow-Night-Bright","tomorrow_night_bright","dark"],["Tomorrow-Night-80s","tomorrow_night_eighties","dark"],["Twilight","twilight","dark"],["Vibrant Ink",
"vibrant_ink","dark"]]}});n.DEFAULT_PERMISSIONS=q;u.chainAfter("runAction",n);return n})},"xace/formatters":function(){define(["xace/lib_jsbeautify"],function(u){return{format:function(w,k){if(!0!==this.disabled){var q=w.session;w=w.selection.getRange();var h={space_before_conditional:!0,keep_array_indentation:!1,preserve_newlines:!0,unescape_strings:!0,jslint_happy:!1,brace_style:"end-expand",indent_char:" "};h.indent_size=q.getTabSize();var n=q.getLine(w.start.row).match(/^\s*/)[0],p=!1;w.start.column<
n.length?w.start.column=0:p=!0;var g=q.getTextRange(w);0==g.length&&(g=q.getValue());q=null;"javascript"==k||"json"==k?q="js":"css"==k||"less"==k?q="css":/^\s*<!?\w/.test(g)?q="html":"xml"==k?q="html":"html"==k?q=/[^<]+?{[\s\-\w]+:[^}]+;/.test(g)?"css":/<\w+[ \/>]/.test(g)?"html":"js":"handlebars"==k&&(h.indent_handlebars=!0,q="html");try{g=u[q+"_beautify"](g,h),p&&(g=g.replace(/^/gm,n).trim()),0===w.end.column&&(g+="\n"+n)}catch(d){return!1}return g}},modes:{javascript:"Javascript (JS Beautify)",
html:"HTML (JS Beautify)",css:"CSS (JS Beautify)",less:"Less (JS Beautify)",xml:"XML (JS Beautify)",json:"JSON (JS Beautify)",handlebars:"Handlebars (JS Beautify)"}}})},"xace/lib_jsbeautify":function(){define(["require","exports","module"],function(u,w,k){var q=k.exports={};(function(){function h(a,b){for(var e=0;e<b.length;e+=1)if(b[e]===a)return!0;return!1}function n(a){return a.replace(/^\s+|\s+$/g,"")}function p(a,b){return(new g(a,b)).beautify()}function g(a,b){function e(a,b){var e=0;a&&(e=
a.indentation_level,!x.just_added_newline()&&a.line_indent_level>e&&(e=a.line_indent_level));return{mode:b,parent:a,last_text:a?a.last_text:"",last_word:a?a.last_word:"",declaration_statement:!1,declaration_assignment:!1,multiline_frame:!1,if_block:!1,else_block:!1,do_block:!1,do_while:!1,in_case_statement:!1,in_case:!1,case_body:!1,indentation_level:e,line_indent_level:a?a.line_indent_level:e,start_line_index:x.get_line_number(),ternary_depth:0}}function d(a){var b=a.newlines;if(E.keep_array_indentation&&
r.mode===c.ArrayLiteral)for(e=0;e<b;e+=1)p(0<e);else if(E.max_preserve_newlines&&b>E.max_preserve_newlines&&(b=E.max_preserve_newlines),E.preserve_newlines&&1<a.newlines){p();for(var e=1;e<b;e+=1)p(!0)}y=a;U[y.type]()}function g(a){a=void 0===a?!1:a;x.just_added_newline()||(E.preserve_newlines&&y.wanted_newline||a?p(!1,!0):E.wrap_line_length&&x.current_line.get_character_count()+y.text.length+(x.space_before_token?1:0)>=E.wrap_line_length&&p(!1,!0))}function p(a,b){if(!b&&";"!==r.last_text&&","!==
r.last_text&&"\x3d"!==r.last_text&&"TK_OPERATOR"!==z)for(;r.mode===c.Statement&&!r.if_block&&!r.do_block;)l();x.add_new_line(a)&&(r.multiline_frame=!0)}function q(a){a=a||y.text;x.just_added_newline()&&(E.keep_array_indentation&&r.mode===c.ArrayLiteral&&y.wanted_newline?(x.current_line.push(y.whitespace_before),x.space_before_token=!1):x.set_indent(r.indentation_level)&&(r.line_indent_level=r.indentation_level));x.add_token(a)}function G(a){r?(S.push(r),O=r):O=e(null,a);r=e(O,a)}function B(a){return h(a,
[c.Expression,c.ForInitializer,c.Conditional])}function l(){0<S.length&&(O=r,r=S.pop(),O.mode===c.Statement&&x.remove_redundant_indentation(O))}function J(){return r.parent.mode===c.ObjectLiteral&&r.mode===c.Statement&&(":"===r.last_text&&0===r.ternary_depth||"TK_RESERVED"===z&&h(r.last_text,["get","set"]))}function v(){return"TK_RESERVED"===z&&h(r.last_text,["var","let","const"])&&"TK_WORD"===y.type||"TK_RESERVED"===z&&"do"===r.last_text||"TK_RESERVED"===z&&"return"===r.last_text&&!y.wanted_newline||
"TK_RESERVED"===z&&"else"===r.last_text&&("TK_RESERVED"!==y.type||"if"!==y.text)||"TK_END_EXPR"===z&&(O.mode===c.ForInitializer||O.mode===c.Conditional)||"TK_WORD"===z&&r.mode===c.BlockStatement&&!r.in_case&&"--"!==y.text&&"++"!==y.text&&"TK_WORD"!==y.type&&"TK_RESERVED"!==y.type||r.mode===c.ObjectLiteral&&(":"===r.last_text&&0===r.ternary_depth||"TK_RESERVED"===z&&h(r.last_text,["get","set"]))?(G(c.Statement),r.indentation_level+=1,"TK_RESERVED"===z&&h(r.last_text,["var","let","const"])&&"TK_WORD"===
y.type&&(r.declaration_statement=!0),J()||g("TK_RESERVED"===y.type&&h(y.text,["do","for","if","while"])),!0):!1}function m(a){return h(a,"case return do if throw else".split(" "))}function F(a){a=L+(a||0);return 0>a||a>=M.length?null:M[a]}function R(){"TK_RESERVED"===y.type&&r.mode!==c.ObjectLiteral&&h(y.text,["set","get"])&&(y.type="TK_WORD");"TK_RESERVED"===y.type&&r.mode===c.ObjectLiteral&&":"==F(1).text&&(y.type="TK_WORD");v()||!y.wanted_newline||B(r.mode)||"TK_OPERATOR"===z&&"--"!==r.last_text&&
"++"!==r.last_text||"TK_EQUALS"===z||!E.preserve_newlines&&"TK_RESERVED"===z&&h(r.last_text,["var","let","const","set","get"])||p();if(r.do_block&&!r.do_while){if("TK_RESERVED"===y.type&&"while"===y.text){x.space_before_token=!0;q();x.space_before_token=!0;r.do_while=!0;return}p();r.do_block=!1}if(r.if_block)if(r.else_block||"TK_RESERVED"!==y.type||"else"!==y.text){for(;r.mode===c.Statement;)l();r.if_block=!1;r.else_block=!1}else r.else_block=!0;if("TK_RESERVED"===y.type&&("case"===y.text||"default"===
y.text&&r.in_case_statement)){p();if(r.case_body||E.jslint_happy)0<r.indentation_level&&(!r.parent||r.indentation_level>r.parent.indentation_level)&&--r.indentation_level,r.case_body=!1;q();r.in_case=!0;r.in_case_statement=!0}else{"TK_RESERVED"===y.type&&"function"===y.text&&(!(h(r.last_text,["}",";"])||x.just_added_newline()&&!h(r.last_text,["[","{",":","\x3d",","]))||x.just_added_blankline()||y.comments_before.length||(p(),p(!0)),"TK_RESERVED"===z||"TK_WORD"===z?"TK_RESERVED"===z&&h(r.last_text,
["get","set","new","return","export"])?x.space_before_token=!0:"TK_RESERVED"===z&&"default"===r.last_text&&"export"===w?x.space_before_token=!0:p():"TK_OPERATOR"===z||"\x3d"===r.last_text?x.space_before_token=!0:(r.multiline_frame||!B(r.mode)&&r.mode!==c.ArrayLiteral)&&p());if("TK_COMMA"===z||"TK_START_EXPR"===z||"TK_EQUALS"===z||"TK_OPERATOR"===z)J()||g();"TK_RESERVED"===y.type&&h(y.text,["function","get","set"])?(q(),r.last_word=y.text):(N="NONE","TK_END_BLOCK"===z?"TK_RESERVED"===y.type&&h(y.text,
["else","catch","finally"])?"expand"===E.brace_style||"end-expand"===E.brace_style||"none"===E.brace_style&&y.wanted_newline?N="NEWLINE":(N="SPACE",x.space_before_token=!0):N="NEWLINE":"TK_SEMICOLON"===z&&r.mode===c.BlockStatement?N="NEWLINE":"TK_SEMICOLON"===z&&B(r.mode)?N="SPACE":"TK_STRING"===z?N="NEWLINE":"TK_RESERVED"===z||"TK_WORD"===z||"*"===r.last_text&&"function"===w?N="SPACE":"TK_START_BLOCK"===z?N="NEWLINE":"TK_END_EXPR"===z&&(x.space_before_token=!0,N="NEWLINE"),"TK_RESERVED"===y.type&&
h(y.text,C.line_starters)&&")"!==r.last_text&&(N="else"===r.last_text||"export"===r.last_text?"SPACE":"NEWLINE"),"TK_RESERVED"===y.type&&h(y.text,["else","catch","finally"])?"TK_END_BLOCK"!==z||"expand"===E.brace_style||"end-expand"===E.brace_style||"none"===E.brace_style&&y.wanted_newline?p():(x.trim(!0),"}"!==x.current_line.last()&&p(),x.space_before_token=!0):"NEWLINE"===N?"TK_RESERVED"===z&&m(r.last_text)?x.space_before_token=!0:"TK_END_EXPR"!==z?"TK_START_EXPR"===z&&"TK_RESERVED"===y.type&&h(y.text,
["var","let","const"])||":"===r.last_text||("TK_RESERVED"===y.type&&"if"===y.text&&"else"===r.last_text?x.space_before_token=!0:p()):"TK_RESERVED"===y.type&&h(y.text,C.line_starters)&&")"!==r.last_text&&p():r.multiline_frame&&r.mode===c.ArrayLiteral&&","===r.last_text&&"}"===w?p():"SPACE"===N&&(x.space_before_token=!0),q(),r.last_word=y.text,"TK_RESERVED"===y.type&&"do"===y.text&&(r.do_block=!0),"TK_RESERVED"===y.type&&"if"===y.text&&(r.if_block=!0))}}var x,M=[],L,C,y,z,w,u,r,O,S,N,U,E,V="";U={TK_START_EXPR:function(){v();
var a=c.Expression;if("["===y.text){if("TK_WORD"===z||")"===r.last_text){"TK_RESERVED"===z&&h(r.last_text,C.line_starters)&&(x.space_before_token=!0);G(a);q();r.indentation_level+=1;E.space_in_paren&&(x.space_before_token=!0);return}a=c.ArrayLiteral;r.mode!==c.ArrayLiteral||"["!==r.last_text&&(","!==r.last_text||"]"!==w&&"}"!==w)||E.keep_array_indentation||p()}else"TK_RESERVED"===z&&"for"===r.last_text?a=c.ForInitializer:"TK_RESERVED"===z&&h(r.last_text,["if","while"])&&(a=c.Conditional);";"===r.last_text||
"TK_START_BLOCK"===z?p():"TK_END_EXPR"===z||"TK_START_EXPR"===z||"TK_END_BLOCK"===z||"."===r.last_text?g(y.wanted_newline):"TK_RESERVED"===z&&"("===y.text||"TK_WORD"===z||"TK_OPERATOR"===z?"TK_RESERVED"===z&&("function"===r.last_word||"typeof"===r.last_word)||"*"===r.last_text&&"function"===w?E.space_after_anon_function&&(x.space_before_token=!0):"TK_RESERVED"===z&&(h(r.last_text,C.line_starters)||"catch"===r.last_text)&&E.space_before_conditional&&(x.space_before_token=!0):x.space_before_token=!0;
"("!==y.text||"TK_EQUALS"!==z&&"TK_OPERATOR"!==z||J()||g();G(a);q();E.space_in_paren&&(x.space_before_token=!0);r.indentation_level+=1},TK_END_EXPR:function(){for(;r.mode===c.Statement;)l();r.multiline_frame&&g("]"===y.text&&r.mode===c.ArrayLiteral&&!E.keep_array_indentation);E.space_in_paren&&("TK_START_EXPR"!==z||E.space_in_empty_paren?x.space_before_token=!0:(x.trim(),x.space_before_token=!1));"]"===y.text&&E.keep_array_indentation?(q(),l()):(l(),q());x.remove_redundant_indentation(O);r.do_while&&
O.mode===c.Conditional&&(O.mode=c.Expression,r.do_block=!1,r.do_while=!1)},TK_START_BLOCK:function(){var a=F(1),b=F(2);b&&(":"===b.text&&h(a.type,["TK_STRING","TK_WORD","TK_RESERVED"])||h(a.text,["get","set"])&&h(b.type,["TK_WORD","TK_RESERVED"]))?h(w,["class","interface"])?G(c.BlockStatement):G(c.ObjectLiteral):G(c.BlockStatement);a=!a.comments_before.length&&"}"===a.text&&"function"===r.last_word&&"TK_END_EXPR"===z;"expand"===E.brace_style||"none"===E.brace_style&&y.wanted_newline?"TK_OPERATOR"!==
z&&(a||"TK_EQUALS"===z||"TK_RESERVED"===z&&m(r.last_text)&&"else"!==r.last_text)?x.space_before_token=!0:p(!1,!0):"TK_OPERATOR"!==z&&"TK_START_EXPR"!==z?"TK_START_BLOCK"===z?p():x.space_before_token=!0:O.mode===c.ArrayLiteral&&","===r.last_text&&("}"===w?x.space_before_token=!0:p());q();r.indentation_level+=1},TK_END_BLOCK:function(){for(;r.mode===c.Statement;)l();var a="TK_START_BLOCK"===z;"expand"===E.brace_style?a||p():a||(r.mode===c.ArrayLiteral&&E.keep_array_indentation?(E.keep_array_indentation=
!1,p(),E.keep_array_indentation=!0):p());l();q()},TK_WORD:R,TK_RESERVED:R,TK_SEMICOLON:function(){v()&&(x.space_before_token=!1);for(;r.mode===c.Statement&&!r.if_block&&!r.do_block;)l();q()},TK_STRING:function(){v()?x.space_before_token=!0:"TK_RESERVED"===z||"TK_WORD"===z?x.space_before_token=!0:"TK_COMMA"===z||"TK_START_EXPR"===z||"TK_EQUALS"===z||"TK_OPERATOR"===z?J()||g():p();q()},TK_EQUALS:function(){v();r.declaration_statement&&(r.declaration_assignment=!0);x.space_before_token=!0;q();x.space_before_token=
!0},TK_OPERATOR:function(){v();if("TK_RESERVED"===z&&m(r.last_text))x.space_before_token=!0,q();else if("*"===y.text&&"TK_DOT"===z)q();else if(":"===y.text&&r.in_case)r.case_body=!0,r.indentation_level+=1,q(),p(),r.in_case=!1;else if("::"===y.text)q();else{!y.wanted_newline||"--"!==y.text&&"++"!==y.text||p(!1,!0);"TK_OPERATOR"===z&&g();var a=!0,b=!0;h(y.text,["--","++","!","~"])||h(y.text,["-","+"])&&(h(z,["TK_START_BLOCK","TK_START_EXPR","TK_EQUALS","TK_OPERATOR"])||h(r.last_text,C.line_starters)||
","===r.last_text)?(b=a=!1,";"===r.last_text&&B(r.mode)&&(a=!0),"TK_RESERVED"===z||"TK_END_EXPR"===z?a=!0:"TK_OPERATOR"===z&&(a=h(y.text,["--","-"])&&h(r.last_text,["--","-"])||h(y.text,["++","+"])&&h(r.last_text,["++","+"])),r.mode!==c.BlockStatement&&r.mode!==c.Statement||"{"!==r.last_text&&";"!==r.last_text||p()):":"===y.text?0===r.ternary_depth?a=!1:--r.ternary_depth:"?"===y.text?r.ternary_depth+=1:"*"===y.text&&"TK_RESERVED"===z&&"function"===r.last_text&&(b=a=!1);x.space_before_token=x.space_before_token||
a;q();x.space_before_token=b}},TK_COMMA:function(){r.declaration_statement?(B(r.parent.mode)&&(r.declaration_assignment=!1),q(),r.declaration_assignment?(r.declaration_assignment=!1,p(!1,!0)):x.space_before_token=!0):(q(),r.mode===c.ObjectLiteral||r.mode===c.Statement&&r.parent.mode===c.ObjectLiteral?(r.mode===c.Statement&&l(),p()):x.space_before_token=!0)},TK_BLOCK_COMMENT:function(){for(var a=y.text,a=a.replace(/\x0d/g,""),b=[],e=a.indexOf("\n");-1!==e;)b.push(a.substring(0,e)),a=a.substring(e+
1),e=a.indexOf("\n");a.length&&b.push(a);var c,e=a=!1;c=y.whitespace_before;var l=c.length;p(!1,!0);if(1<b.length){var d;a:{d=b.slice(1);for(var g=0;g<d.length;g++)if("*"!==n(d[g]).charAt(0)){d=!1;break a}d=!0}if(d)a=!0;else{a:{d=b.slice(1);for(var g=0,h=d.length,m;g<h;g++)if((m=d[g])&&0!==m.indexOf(c)){c=!1;break a}c=!0}c&&(e=!0)}}q(b[0]);for(c=1;c<b.length;c++)p(!1,!0),a?q(" "+n(b[c])):e&&b[c].length>l?q(b[c].substring(l)):x.add_token(b[c]);p(!1,!0)},TK_INLINE_COMMENT:function(){x.space_before_token=
!0;q();x.space_before_token=!0},TK_COMMENT:function(){y.wanted_newline?p(!1,!0):x.trim(!0);x.space_before_token=!0;q();p(!1,!0)},TK_DOT:function(){v();"TK_RESERVED"===z&&m(r.last_text)?x.space_before_token=!0:g(")"===r.last_text&&E.break_chained_methods);q()},TK_UNKNOWN:function(){q();"\n"===y.text[y.text.length-1]&&p()},TK_EOF:function(){for(;r.mode===c.Statement;)l()}};b=b?b:{};E={};void 0!==b.braces_on_own_line&&(E.brace_style=b.braces_on_own_line?"expand":"collapse");E.brace_style=b.brace_style?
b.brace_style:E.brace_style?E.brace_style:"collapse";"expand-strict"===E.brace_style&&(E.brace_style="expand");E.indent_size=b.indent_size?parseInt(b.indent_size,10):4;E.indent_char=b.indent_char?b.indent_char:" ";E.preserve_newlines=void 0===b.preserve_newlines?!0:b.preserve_newlines;E.break_chained_methods=void 0===b.break_chained_methods?!1:b.break_chained_methods;E.max_preserve_newlines=void 0===b.max_preserve_newlines?0:parseInt(b.max_preserve_newlines,10);E.space_in_paren=void 0===b.space_in_paren?
!1:b.space_in_paren;E.space_in_empty_paren=void 0===b.space_in_empty_paren?!1:b.space_in_empty_paren;E.jslint_happy=void 0===b.jslint_happy?!1:b.jslint_happy;E.space_after_anon_function=void 0===b.space_after_anon_function?!1:b.space_after_anon_function;E.keep_array_indentation=void 0===b.keep_array_indentation?!1:b.keep_array_indentation;E.space_before_conditional=void 0===b.space_before_conditional?!0:b.space_before_conditional;E.unescape_strings=void 0===b.unescape_strings?!1:b.unescape_strings;
E.wrap_line_length=void 0===b.wrap_line_length?0:parseInt(b.wrap_line_length,10);E.e4x=void 0===b.e4x?!1:b.e4x;E.end_with_newline=void 0===b.end_with_newline?!1:b.end_with_newline;E.jslint_happy&&(E.space_after_anon_function=!0);b.indent_with_tabs&&(E.indent_char="\t",E.indent_size=1);for(u="";0<E.indent_size;)u+=E.indent_char,--E.indent_size;b=0;if(a&&a.length){for(;" "===a.charAt(b)||"\t"===a.charAt(b);)V+=a.charAt(b),b+=1;a=a.substring(b)}z="TK_START_BLOCK";w="";x=new t(u,V);S=[];G(c.BlockStatement);
this.beautify=function(){var b;C=new k(a,E,u);M=C.tokenize();for(L=0;b=F();){for(var e=0;e<b.comments_before.length;e++)d(b.comments_before[e]);d(b);w=r.last_text;z=b.type;r.last_text=b.text;L+=1}b=x.get_code();E.end_with_newline&&(b+="\n");return b}}function d(a){var b=0,c=-1,d=[],g=!0;this.set_indent=function(e){b=a.baseIndentLength+e*a.indent_length;c=e};this.get_character_count=function(){return b};this.is_empty=function(){return g};this.last=function(){return this._empty?null:d[d.length-1]};
this.push=function(a){d.push(a);b+=a.length;g=!1};this.remove_indent=function(){0<c&&(--c,b-=a.indent_length)};this.trim=function(){for(;" "===this.last();)d.pop(),--b;g=0===d.length};this.toString=function(){var b="";this._empty||(0<=c&&(b=a.indent_cache[c]),b+=d.join(""));return b}}function t(a,b){b=b||"";this.indent_cache=[b];this.baseIndentLength=b.length;this.indent_length=a.length;var e=[];this.baseIndentString=b;this.indent_string=a;this.current_line=null;this.space_before_token=!1;this.get_line_number=
function(){return e.length};this.add_new_line=function(a){return 1===this.get_line_number()&&this.just_added_newline()?!1:a||!this.just_added_newline()?(this.current_line=new d(this),e.push(this.current_line),!0):!1};this.add_new_line(!0);this.get_code=function(){return e.join("\n").replace(/[\r\n\t ]+$/,"")};this.set_indent=function(a){if(1<e.length){for(;a>=this.indent_cache.length;)this.indent_cache.push(this.indent_cache[this.indent_cache.length-1]+this.indent_string);this.current_line.set_indent(a);
return!0}this.current_line.set_indent(0);return!1};this.add_token=function(a){this.add_space_before_token();this.current_line.push(a)};this.add_space_before_token=function(){this.space_before_token&&!this.just_added_newline()&&this.current_line.push(" ");this.space_before_token=!1};this.remove_redundant_indentation=function(a){if(!a.multiline_frame&&a.mode!==c.ForInitializer&&a.mode!==c.Conditional){a=a.start_line_index;for(var b=e.length;a<b;)e[a].remove_indent(),a++}};this.trim=function(c){c=void 0===
c?!1:c;for(this.current_line.trim(a,b);c&&1<e.length&&this.current_line.is_empty();)e.pop(),this.current_line=e[e.length-1],this.current_line.trim()};this.just_added_newline=function(){return this.current_line.is_empty()};this.just_added_blankline=function(){return this.just_added_newline()?1===e.length?!0:e[e.length-2].is_empty():!1}}function k(a,e,c){function d(){var d,x=[];B=0;l="";if(m>=F)return["","TK_EOF"];var t;t=v.length?v[v.length-1]:new C("TK_START_BLOCK","{");var k=a.charAt(m);for(m+=1;h(k,
g);){"\n"===k?(B+=1,x=[]):B&&(k===c?x.push(c):"\r"!==k&&x.push(" "));if(m>=F)return["","TK_EOF"];k=a.charAt(m);m+=1}x.length&&(l=x.join(""));if(p.test(k)){var x=t=!0,D=p;"0"===k&&m<F&&/[Xx]/.test(a.charAt(m))?(x=t=!1,k+=a.charAt(m),m+=1,D=/[0123456789abcdefABCDEF]/):(k="",--m);for(;m<F&&D.test(a.charAt(m));)k+=a.charAt(m),m+=1,t&&m<F&&"."===a.charAt(m)&&(k+=a.charAt(m),m+=1,t=!1),x&&m<F&&/[Ee]/.test(a.charAt(m))&&(k+=a.charAt(m),m+=1,m<F&&/[+-]/.test(a.charAt(m))&&(k+=a.charAt(m),m+=1),t=x=!1);return[k,
"TK_WORD"]}if(b.isIdentifierStart(a.charCodeAt(m-1))){if(m<F)for(;b.isIdentifierChar(a.charCodeAt(m))&&(k+=a.charAt(m),m+=1,m!==F););return"TK_DOT"===t.type||"TK_RESERVED"===t.type&&h(t.text,["set","get"])||!h(k,q)?[k,"TK_WORD"]:"in"===k?[k,"TK_OPERATOR"]:[k,"TK_RESERVED"]}if("("===k||"["===k)return[k,"TK_START_EXPR"];if(")"===k||"]"===k)return[k,"TK_END_EXPR"];if("{"===k)return[k,"TK_START_BLOCK"];if("}"===k)return[k,"TK_END_BLOCK"];if(";"===k)return[k,"TK_SEMICOLON"];if("/"===k){x="";D=!0;if("*"===
a.charAt(m)){m+=1;if(m<F)for(;m<F&&("*"!==a.charAt(m)||!a.charAt(m+1)||"/"!==a.charAt(m+1));){k=a.charAt(m);x+=k;if("\n"===k||"\r"===k)D=!1;m+=1;if(m>=F)break}m+=2;return D&&0===B?["/*"+x+"*/","TK_INLINE_COMMENT"]:["/*"+x+"*/","TK_BLOCK_COMMENT"]}if("/"===a.charAt(m)){for(x=k;"\r"!==a.charAt(m)&&"\n"!==a.charAt(m)&&!(x+=a.charAt(m),m+=1,m>=F););return[x,"TK_COMMENT"]}}if("`"===k||"'"===k||'"'===k||("/"===k||e.e4x&&"\x3c"===k&&a.slice(m-1).match(/^<([-a-zA-Z:0-9_.]+|{[^{}]*}|!\[CDATA\[[\s\S]*?\]\])\s*([-a-zA-Z:0-9_.]+=('[^']*'|"[^"]*"|{[^{}]*})\s*)*\/?\s*>/))&&
("TK_RESERVED"===t.type&&h(t.text,"return case throw else do typeof yield".split(" "))||"TK_END_EXPR"===t.type&&")"===t.text&&t.parent&&"TK_RESERVED"===t.parent.type&&h(t.parent.text,["if","while","for"])||h(t.type,"TK_COMMENT TK_START_EXPR TK_START_BLOCK TK_END_BLOCK TK_OPERATOR TK_EQUALS TK_EOF TK_SEMICOLON TK_COMMA".split(" ")))){t=k;var y=x=!1;d=k;if("/"===t)for(k=!1;m<F&&(x||k||a.charAt(m)!==t)&&!b.newline.test(a.charAt(m));)d+=a.charAt(m),x?x=!1:(x="\\"===a.charAt(m),"["===a.charAt(m)?k=!0:
"]"===a.charAt(m)&&(k=!1)),m+=1;else if(e.e4x&&"\x3c"===t){if(x=/<(\/?)([-a-zA-Z:0-9_.]+|{[^{}]*}|!\[CDATA\[[\s\S]*?\]\])\s*([-a-zA-Z:0-9_.]+=('[^']*'|"[^"]*"|{[^{}]*})\s*)*(\/?)\s*>/g,k=a.slice(m-1),(D=x.exec(k))&&0===D.index){t=D[2];for(d=0;D;){var y=!!D[1],z=D[2],I=!!D[D.length-1]||"![CDATA["===z.slice(0,8);z!==t||I||(y?--d:++d);if(0>=d)break;D=x.exec(k)}t=D?D.index+D[0].length:k.length;m+=t-1;return[k.slice(0,t),"TK_STRING"]}}else for(;m<F&&(x||a.charAt(m)!==t&&("`"===t||!b.newline.test(a.charAt(m))));){d+=
a.charAt(m);if(x){if("x"===a.charAt(m)||"u"===a.charAt(m))y=!0;x=!1}else x="\\"===a.charAt(m);m+=1}if(y&&e.unescape_strings)a:{k=d;x=!1;D="";d=0;y="";for(z=0;x||d<k.length;)if(I=k.charAt(d),d++,x){x=!1;if("x"===I)y=k.substr(d,2),d+=2;else if("u"===I)y=k.substr(d,4),d+=4;else{D+="\\"+I;continue}if(!y.match(/^[0123456789abcdefABCDEF]+$/)){d=k;break a}z=parseInt(y,16);if(0<=z&&32>z)D="x"===I?D+("\\x"+y):D+("\\u"+y);else if(34===z||39===z||92===z)D+="\\"+String.fromCharCode(z);else if("x"===I&&126<z&&
255>=z){d=k;break a}else D+=String.fromCharCode(z)}else"\\"===I?x=!0:D+=I;d=D}if(m<F&&a.charAt(m)===t&&(d+=t,m+=1,"/"===t))for(;m<F&&b.isIdentifierStart(a.charCodeAt(m));)d+=a.charAt(m),m+=1;return[d,"TK_STRING"]}if("#"===k){if(0===v.length&&"!"===a.charAt(m)){for(d=k;m<F&&"\n"!==k;)k=a.charAt(m),d+=k,m+=1;return[n(d)+"\n","TK_UNKNOWN"]}t="#";if(m<F&&p.test(a.charAt(m))){do k=a.charAt(m),t+=k,m+=1;while(m<F&&"#"!==k&&"\x3d"!==k);"#"!==k&&("["===a.charAt(m)&&"]"===a.charAt(m+1)?(t+="[]",m+=2):"{"===
a.charAt(m)&&"}"===a.charAt(m+1)&&(t+="{}",m+=2));return[t,"TK_WORD"]}}if("\x3c"===k&&"\x3c!--"===a.substring(m-1,m+3)){m+=3;for(k="\x3c!--";"\n"!==a.charAt(m)&&m<F;)k+=a.charAt(m),m++;J=!0;return[k,"TK_COMMENT"]}if("-"===k&&J&&"--\x3e"===a.substring(m-1,m+2))return J=!1,m+=2,["--\x3e","TK_COMMENT"];if("."===k)return[k,"TK_DOT"];if(h(k,A)){for(;m<F&&h(k+a.charAt(m),A)&&!(k+=a.charAt(m),m+=1,m>=F););return","===k?[k,"TK_COMMA"]:"\x3d"===k?[k,"TK_EQUALS"]:[k,"TK_OPERATOR"]}return[k,"TK_UNKNOWN"]}var g=
["\n","\r","\t"," "],p=/[0-9]/,A="+ - * / % \x26 ++ -- \x3d +\x3d -\x3d *\x3d /\x3d %\x3d \x3d\x3d \x3d\x3d\x3d !\x3d !\x3d\x3d \x3e \x3c \x3e\x3d \x3c\x3d \x3e\x3e \x3c\x3c \x3e\x3e\x3e \x3e\x3e\x3e\x3d \x3e\x3e\x3d \x3c\x3c\x3d \x26\x26 \x26\x3d | || ! ~ , : ? ^ ^\x3d |\x3d :: \x3d\x3e \x3c%\x3d \x3c% %\x3e \x3c?\x3d \x3c? ?\x3e".split(" ");this.line_starters="continue try throw return var let const if switch case default for while break function yield import export".split(" ");var q=this.line_starters.concat("do in else get set new catch finally typeof".split(" ")),
B,l,J,v,m,F;this.tokenize=function(){F=a.length;m=0;J=!1;v=[];for(var b,e,c=null,g=[],h=[];!e||"TK_EOF"!==e.type;){b=d();for(b=new C(b[1],b[0],B,l);"TK_INLINE_COMMENT"===b.type||"TK_COMMENT"===b.type||"TK_BLOCK_COMMENT"===b.type||"TK_UNKNOWN"===b.type;)h.push(b),b=d(),b=new C(b[1],b[0],B,l);h.length&&(b.comments_before=h,h=[]);"TK_START_BLOCK"===b.type||"TK_START_EXPR"===b.type?(b.parent=e,c=b,g.push(b)):("TK_END_BLOCK"===b.type||"TK_END_EXPR"===b.type)&&c&&("]"===b.text&&"["===c.text||")"===b.text&&
"("===c.text||"}"===b.text&&"}"===c.text)&&(b.parent=c.parent,c=g.pop());v.push(b);e=b}return v}}var b={};(function(a){var b=/[\u00aa\u00b5\u00ba\u00c0-\u00d6\u00d8-\u00f6\u00f8-\u02c1\u02c6-\u02d1\u02e0-\u02e4\u02ec\u02ee\u0370-\u0374\u0376\u0377\u037a-\u037d\u0386\u0388-\u038a\u038c\u038e-\u03a1\u03a3-\u03f5\u03f7-\u0481\u048a-\u0527\u0531-\u0556\u0559\u0561-\u0587\u05d0-\u05ea\u05f0-\u05f2\u0620-\u064a\u066e\u066f\u0671-\u06d3\u06d5\u06e5\u06e6\u06ee\u06ef\u06fa-\u06fc\u06ff\u0710\u0712-\u072f\u074d-\u07a5\u07b1\u07ca-\u07ea\u07f4\u07f5\u07fa\u0800-\u0815\u081a\u0824\u0828\u0840-\u0858\u08a0\u08a2-\u08ac\u0904-\u0939\u093d\u0950\u0958-\u0961\u0971-\u0977\u0979-\u097f\u0985-\u098c\u098f\u0990\u0993-\u09a8\u09aa-\u09b0\u09b2\u09b6-\u09b9\u09bd\u09ce\u09dc\u09dd\u09df-\u09e1\u09f0\u09f1\u0a05-\u0a0a\u0a0f\u0a10\u0a13-\u0a28\u0a2a-\u0a30\u0a32\u0a33\u0a35\u0a36\u0a38\u0a39\u0a59-\u0a5c\u0a5e\u0a72-\u0a74\u0a85-\u0a8d\u0a8f-\u0a91\u0a93-\u0aa8\u0aaa-\u0ab0\u0ab2\u0ab3\u0ab5-\u0ab9\u0abd\u0ad0\u0ae0\u0ae1\u0b05-\u0b0c\u0b0f\u0b10\u0b13-\u0b28\u0b2a-\u0b30\u0b32\u0b33\u0b35-\u0b39\u0b3d\u0b5c\u0b5d\u0b5f-\u0b61\u0b71\u0b83\u0b85-\u0b8a\u0b8e-\u0b90\u0b92-\u0b95\u0b99\u0b9a\u0b9c\u0b9e\u0b9f\u0ba3\u0ba4\u0ba8-\u0baa\u0bae-\u0bb9\u0bd0\u0c05-\u0c0c\u0c0e-\u0c10\u0c12-\u0c28\u0c2a-\u0c33\u0c35-\u0c39\u0c3d\u0c58\u0c59\u0c60\u0c61\u0c85-\u0c8c\u0c8e-\u0c90\u0c92-\u0ca8\u0caa-\u0cb3\u0cb5-\u0cb9\u0cbd\u0cde\u0ce0\u0ce1\u0cf1\u0cf2\u0d05-\u0d0c\u0d0e-\u0d10\u0d12-\u0d3a\u0d3d\u0d4e\u0d60\u0d61\u0d7a-\u0d7f\u0d85-\u0d96\u0d9a-\u0db1\u0db3-\u0dbb\u0dbd\u0dc0-\u0dc6\u0e01-\u0e30\u0e32\u0e33\u0e40-\u0e46\u0e81\u0e82\u0e84\u0e87\u0e88\u0e8a\u0e8d\u0e94-\u0e97\u0e99-\u0e9f\u0ea1-\u0ea3\u0ea5\u0ea7\u0eaa\u0eab\u0ead-\u0eb0\u0eb2\u0eb3\u0ebd\u0ec0-\u0ec4\u0ec6\u0edc-\u0edf\u0f00\u0f40-\u0f47\u0f49-\u0f6c\u0f88-\u0f8c\u1000-\u102a\u103f\u1050-\u1055\u105a-\u105d\u1061\u1065\u1066\u106e-\u1070\u1075-\u1081\u108e\u10a0-\u10c5\u10c7\u10cd\u10d0-\u10fa\u10fc-\u1248\u124a-\u124d\u1250-\u1256\u1258\u125a-\u125d\u1260-\u1288\u128a-\u128d\u1290-\u12b0\u12b2-\u12b5\u12b8-\u12be\u12c0\u12c2-\u12c5\u12c8-\u12d6\u12d8-\u1310\u1312-\u1315\u1318-\u135a\u1380-\u138f\u13a0-\u13f4\u1401-\u166c\u166f-\u167f\u1681-\u169a\u16a0-\u16ea\u16ee-\u16f0\u1700-\u170c\u170e-\u1711\u1720-\u1731\u1740-\u1751\u1760-\u176c\u176e-\u1770\u1780-\u17b3\u17d7\u17dc\u1820-\u1877\u1880-\u18a8\u18aa\u18b0-\u18f5\u1900-\u191c\u1950-\u196d\u1970-\u1974\u1980-\u19ab\u19c1-\u19c7\u1a00-\u1a16\u1a20-\u1a54\u1aa7\u1b05-\u1b33\u1b45-\u1b4b\u1b83-\u1ba0\u1bae\u1baf\u1bba-\u1be5\u1c00-\u1c23\u1c4d-\u1c4f\u1c5a-\u1c7d\u1ce9-\u1cec\u1cee-\u1cf1\u1cf5\u1cf6\u1d00-\u1dbf\u1e00-\u1f15\u1f18-\u1f1d\u1f20-\u1f45\u1f48-\u1f4d\u1f50-\u1f57\u1f59\u1f5b\u1f5d\u1f5f-\u1f7d\u1f80-\u1fb4\u1fb6-\u1fbc\u1fbe\u1fc2-\u1fc4\u1fc6-\u1fcc\u1fd0-\u1fd3\u1fd6-\u1fdb\u1fe0-\u1fec\u1ff2-\u1ff4\u1ff6-\u1ffc\u2071\u207f\u2090-\u209c\u2102\u2107\u210a-\u2113\u2115\u2119-\u211d\u2124\u2126\u2128\u212a-\u212d\u212f-\u2139\u213c-\u213f\u2145-\u2149\u214e\u2160-\u2188\u2c00-\u2c2e\u2c30-\u2c5e\u2c60-\u2ce4\u2ceb-\u2cee\u2cf2\u2cf3\u2d00-\u2d25\u2d27\u2d2d\u2d30-\u2d67\u2d6f\u2d80-\u2d96\u2da0-\u2da6\u2da8-\u2dae\u2db0-\u2db6\u2db8-\u2dbe\u2dc0-\u2dc6\u2dc8-\u2dce\u2dd0-\u2dd6\u2dd8-\u2dde\u2e2f\u3005-\u3007\u3021-\u3029\u3031-\u3035\u3038-\u303c\u3041-\u3096\u309d-\u309f\u30a1-\u30fa\u30fc-\u30ff\u3105-\u312d\u3131-\u318e\u31a0-\u31ba\u31f0-\u31ff\u3400-\u4db5\u4e00-\u9fcc\ua000-\ua48c\ua4d0-\ua4fd\ua500-\ua60c\ua610-\ua61f\ua62a\ua62b\ua640-\ua66e\ua67f-\ua697\ua6a0-\ua6ef\ua717-\ua71f\ua722-\ua788\ua78b-\ua78e\ua790-\ua793\ua7a0-\ua7aa\ua7f8-\ua801\ua803-\ua805\ua807-\ua80a\ua80c-\ua822\ua840-\ua873\ua882-\ua8b3\ua8f2-\ua8f7\ua8fb\ua90a-\ua925\ua930-\ua946\ua960-\ua97c\ua984-\ua9b2\ua9cf\uaa00-\uaa28\uaa40-\uaa42\uaa44-\uaa4b\uaa60-\uaa76\uaa7a\uaa80-\uaaaf\uaab1\uaab5\uaab6\uaab9-\uaabd\uaac0\uaac2\uaadb-\uaadd\uaae0-\uaaea\uaaf2-\uaaf4\uab01-\uab06\uab09-\uab0e\uab11-\uab16\uab20-\uab26\uab28-\uab2e\uabc0-\uabe2\uac00-\ud7a3\ud7b0-\ud7c6\ud7cb-\ud7fb\uf900-\ufa6d\ufa70-\ufad9\ufb00-\ufb06\ufb13-\ufb17\ufb1d\ufb1f-\ufb28\ufb2a-\ufb36\ufb38-\ufb3c\ufb3e\ufb40\ufb41\ufb43\ufb44\ufb46-\ufbb1\ufbd3-\ufd3d\ufd50-\ufd8f\ufd92-\ufdc7\ufdf0-\ufdfb\ufe70-\ufe74\ufe76-\ufefc\uff21-\uff3a\uff41-\uff5a\uff66-\uffbe\uffc2-\uffc7\uffca-\uffcf\uffd2-\uffd7\uffda-\uffdc]/,
c=/[\u00aa\u00b5\u00ba\u00c0-\u00d6\u00d8-\u00f6\u00f8-\u02c1\u02c6-\u02d1\u02e0-\u02e4\u02ec\u02ee\u0370-\u0374\u0376\u0377\u037a-\u037d\u0386\u0388-\u038a\u038c\u038e-\u03a1\u03a3-\u03f5\u03f7-\u0481\u048a-\u0527\u0531-\u0556\u0559\u0561-\u0587\u05d0-\u05ea\u05f0-\u05f2\u0620-\u064a\u066e\u066f\u0671-\u06d3\u06d5\u06e5\u06e6\u06ee\u06ef\u06fa-\u06fc\u06ff\u0710\u0712-\u072f\u074d-\u07a5\u07b1\u07ca-\u07ea\u07f4\u07f5\u07fa\u0800-\u0815\u081a\u0824\u0828\u0840-\u0858\u08a0\u08a2-\u08ac\u0904-\u0939\u093d\u0950\u0958-\u0961\u0971-\u0977\u0979-\u097f\u0985-\u098c\u098f\u0990\u0993-\u09a8\u09aa-\u09b0\u09b2\u09b6-\u09b9\u09bd\u09ce\u09dc\u09dd\u09df-\u09e1\u09f0\u09f1\u0a05-\u0a0a\u0a0f\u0a10\u0a13-\u0a28\u0a2a-\u0a30\u0a32\u0a33\u0a35\u0a36\u0a38\u0a39\u0a59-\u0a5c\u0a5e\u0a72-\u0a74\u0a85-\u0a8d\u0a8f-\u0a91\u0a93-\u0aa8\u0aaa-\u0ab0\u0ab2\u0ab3\u0ab5-\u0ab9\u0abd\u0ad0\u0ae0\u0ae1\u0b05-\u0b0c\u0b0f\u0b10\u0b13-\u0b28\u0b2a-\u0b30\u0b32\u0b33\u0b35-\u0b39\u0b3d\u0b5c\u0b5d\u0b5f-\u0b61\u0b71\u0b83\u0b85-\u0b8a\u0b8e-\u0b90\u0b92-\u0b95\u0b99\u0b9a\u0b9c\u0b9e\u0b9f\u0ba3\u0ba4\u0ba8-\u0baa\u0bae-\u0bb9\u0bd0\u0c05-\u0c0c\u0c0e-\u0c10\u0c12-\u0c28\u0c2a-\u0c33\u0c35-\u0c39\u0c3d\u0c58\u0c59\u0c60\u0c61\u0c85-\u0c8c\u0c8e-\u0c90\u0c92-\u0ca8\u0caa-\u0cb3\u0cb5-\u0cb9\u0cbd\u0cde\u0ce0\u0ce1\u0cf1\u0cf2\u0d05-\u0d0c\u0d0e-\u0d10\u0d12-\u0d3a\u0d3d\u0d4e\u0d60\u0d61\u0d7a-\u0d7f\u0d85-\u0d96\u0d9a-\u0db1\u0db3-\u0dbb\u0dbd\u0dc0-\u0dc6\u0e01-\u0e30\u0e32\u0e33\u0e40-\u0e46\u0e81\u0e82\u0e84\u0e87\u0e88\u0e8a\u0e8d\u0e94-\u0e97\u0e99-\u0e9f\u0ea1-\u0ea3\u0ea5\u0ea7\u0eaa\u0eab\u0ead-\u0eb0\u0eb2\u0eb3\u0ebd\u0ec0-\u0ec4\u0ec6\u0edc-\u0edf\u0f00\u0f40-\u0f47\u0f49-\u0f6c\u0f88-\u0f8c\u1000-\u102a\u103f\u1050-\u1055\u105a-\u105d\u1061\u1065\u1066\u106e-\u1070\u1075-\u1081\u108e\u10a0-\u10c5\u10c7\u10cd\u10d0-\u10fa\u10fc-\u1248\u124a-\u124d\u1250-\u1256\u1258\u125a-\u125d\u1260-\u1288\u128a-\u128d\u1290-\u12b0\u12b2-\u12b5\u12b8-\u12be\u12c0\u12c2-\u12c5\u12c8-\u12d6\u12d8-\u1310\u1312-\u1315\u1318-\u135a\u1380-\u138f\u13a0-\u13f4\u1401-\u166c\u166f-\u167f\u1681-\u169a\u16a0-\u16ea\u16ee-\u16f0\u1700-\u170c\u170e-\u1711\u1720-\u1731\u1740-\u1751\u1760-\u176c\u176e-\u1770\u1780-\u17b3\u17d7\u17dc\u1820-\u1877\u1880-\u18a8\u18aa\u18b0-\u18f5\u1900-\u191c\u1950-\u196d\u1970-\u1974\u1980-\u19ab\u19c1-\u19c7\u1a00-\u1a16\u1a20-\u1a54\u1aa7\u1b05-\u1b33\u1b45-\u1b4b\u1b83-\u1ba0\u1bae\u1baf\u1bba-\u1be5\u1c00-\u1c23\u1c4d-\u1c4f\u1c5a-\u1c7d\u1ce9-\u1cec\u1cee-\u1cf1\u1cf5\u1cf6\u1d00-\u1dbf\u1e00-\u1f15\u1f18-\u1f1d\u1f20-\u1f45\u1f48-\u1f4d\u1f50-\u1f57\u1f59\u1f5b\u1f5d\u1f5f-\u1f7d\u1f80-\u1fb4\u1fb6-\u1fbc\u1fbe\u1fc2-\u1fc4\u1fc6-\u1fcc\u1fd0-\u1fd3\u1fd6-\u1fdb\u1fe0-\u1fec\u1ff2-\u1ff4\u1ff6-\u1ffc\u2071\u207f\u2090-\u209c\u2102\u2107\u210a-\u2113\u2115\u2119-\u211d\u2124\u2126\u2128\u212a-\u212d\u212f-\u2139\u213c-\u213f\u2145-\u2149\u214e\u2160-\u2188\u2c00-\u2c2e\u2c30-\u2c5e\u2c60-\u2ce4\u2ceb-\u2cee\u2cf2\u2cf3\u2d00-\u2d25\u2d27\u2d2d\u2d30-\u2d67\u2d6f\u2d80-\u2d96\u2da0-\u2da6\u2da8-\u2dae\u2db0-\u2db6\u2db8-\u2dbe\u2dc0-\u2dc6\u2dc8-\u2dce\u2dd0-\u2dd6\u2dd8-\u2dde\u2e2f\u3005-\u3007\u3021-\u3029\u3031-\u3035\u3038-\u303c\u3041-\u3096\u309d-\u309f\u30a1-\u30fa\u30fc-\u30ff\u3105-\u312d\u3131-\u318e\u31a0-\u31ba\u31f0-\u31ff\u3400-\u4db5\u4e00-\u9fcc\ua000-\ua48c\ua4d0-\ua4fd\ua500-\ua60c\ua610-\ua61f\ua62a\ua62b\ua640-\ua66e\ua67f-\ua697\ua6a0-\ua6ef\ua717-\ua71f\ua722-\ua788\ua78b-\ua78e\ua790-\ua793\ua7a0-\ua7aa\ua7f8-\ua801\ua803-\ua805\ua807-\ua80a\ua80c-\ua822\ua840-\ua873\ua882-\ua8b3\ua8f2-\ua8f7\ua8fb\ua90a-\ua925\ua930-\ua946\ua960-\ua97c\ua984-\ua9b2\ua9cf\uaa00-\uaa28\uaa40-\uaa42\uaa44-\uaa4b\uaa60-\uaa76\uaa7a\uaa80-\uaaaf\uaab1\uaab5\uaab6\uaab9-\uaabd\uaac0\uaac2\uaadb-\uaadd\uaae0-\uaaea\uaaf2-\uaaf4\uab01-\uab06\uab09-\uab0e\uab11-\uab16\uab20-\uab26\uab28-\uab2e\uabc0-\uabe2\uac00-\ud7a3\ud7b0-\ud7c6\ud7cb-\ud7fb\uf900-\ufa6d\ufa70-\ufad9\ufb00-\ufb06\ufb13-\ufb17\ufb1d\ufb1f-\ufb28\ufb2a-\ufb36\ufb38-\ufb3c\ufb3e\ufb40\ufb41\ufb43\ufb44\ufb46-\ufbb1\ufbd3-\ufd3d\ufd50-\ufd8f\ufd92-\ufdc7\ufdf0-\ufdfb\ufe70-\ufe74\ufe76-\ufefc\uff21-\uff3a\uff41-\uff5a\uff66-\uffbe\uffc2-\uffc7\uffca-\uffcf\uffd2-\uffd7\uffda-\uffdc\u0300-\u036f\u0483-\u0487\u0591-\u05bd\u05bf\u05c1\u05c2\u05c4\u05c5\u05c7\u0610-\u061a\u0620-\u0649\u0672-\u06d3\u06e7-\u06e8\u06fb-\u06fc\u0730-\u074a\u0800-\u0814\u081b-\u0823\u0825-\u0827\u0829-\u082d\u0840-\u0857\u08e4-\u08fe\u0900-\u0903\u093a-\u093c\u093e-\u094f\u0951-\u0957\u0962-\u0963\u0966-\u096f\u0981-\u0983\u09bc\u09be-\u09c4\u09c7\u09c8\u09d7\u09df-\u09e0\u0a01-\u0a03\u0a3c\u0a3e-\u0a42\u0a47\u0a48\u0a4b-\u0a4d\u0a51\u0a66-\u0a71\u0a75\u0a81-\u0a83\u0abc\u0abe-\u0ac5\u0ac7-\u0ac9\u0acb-\u0acd\u0ae2-\u0ae3\u0ae6-\u0aef\u0b01-\u0b03\u0b3c\u0b3e-\u0b44\u0b47\u0b48\u0b4b-\u0b4d\u0b56\u0b57\u0b5f-\u0b60\u0b66-\u0b6f\u0b82\u0bbe-\u0bc2\u0bc6-\u0bc8\u0bca-\u0bcd\u0bd7\u0be6-\u0bef\u0c01-\u0c03\u0c46-\u0c48\u0c4a-\u0c4d\u0c55\u0c56\u0c62-\u0c63\u0c66-\u0c6f\u0c82\u0c83\u0cbc\u0cbe-\u0cc4\u0cc6-\u0cc8\u0cca-\u0ccd\u0cd5\u0cd6\u0ce2-\u0ce3\u0ce6-\u0cef\u0d02\u0d03\u0d46-\u0d48\u0d57\u0d62-\u0d63\u0d66-\u0d6f\u0d82\u0d83\u0dca\u0dcf-\u0dd4\u0dd6\u0dd8-\u0ddf\u0df2\u0df3\u0e34-\u0e3a\u0e40-\u0e45\u0e50-\u0e59\u0eb4-\u0eb9\u0ec8-\u0ecd\u0ed0-\u0ed9\u0f18\u0f19\u0f20-\u0f29\u0f35\u0f37\u0f39\u0f41-\u0f47\u0f71-\u0f84\u0f86-\u0f87\u0f8d-\u0f97\u0f99-\u0fbc\u0fc6\u1000-\u1029\u1040-\u1049\u1067-\u106d\u1071-\u1074\u1082-\u108d\u108f-\u109d\u135d-\u135f\u170e-\u1710\u1720-\u1730\u1740-\u1750\u1772\u1773\u1780-\u17b2\u17dd\u17e0-\u17e9\u180b-\u180d\u1810-\u1819\u1920-\u192b\u1930-\u193b\u1951-\u196d\u19b0-\u19c0\u19c8-\u19c9\u19d0-\u19d9\u1a00-\u1a15\u1a20-\u1a53\u1a60-\u1a7c\u1a7f-\u1a89\u1a90-\u1a99\u1b46-\u1b4b\u1b50-\u1b59\u1b6b-\u1b73\u1bb0-\u1bb9\u1be6-\u1bf3\u1c00-\u1c22\u1c40-\u1c49\u1c5b-\u1c7d\u1cd0-\u1cd2\u1d00-\u1dbe\u1e01-\u1f15\u200c\u200d\u203f\u2040\u2054\u20d0-\u20dc\u20e1\u20e5-\u20f0\u2d81-\u2d96\u2de0-\u2dff\u3021-\u3028\u3099\u309a\ua640-\ua66d\ua674-\ua67d\ua69f\ua6f0-\ua6f1\ua7f8-\ua800\ua806\ua80b\ua823-\ua827\ua880-\ua881\ua8b4-\ua8c4\ua8d0-\ua8d9\ua8f3-\ua8f7\ua900-\ua909\ua926-\ua92d\ua930-\ua945\ua980-\ua983\ua9b3-\ua9c0\uaa00-\uaa27\uaa40-\uaa41\uaa4c-\uaa4d\uaa50-\uaa59\uaa7b\uaae0-\uaae9\uaaf2-\uaaf3\uabc0-\uabe1\uabec\uabed\uabf0-\uabf9\ufb20-\ufb28\ufe00-\ufe0f\ufe20-\ufe26\ufe33\ufe34\ufe4d-\ufe4f\uff10-\uff19\uff3f]/;
a.newline=/[\n\r\u2028\u2029]/;a.isIdentifierStart=function(a){return 65>a?36===a:91>a?!0:97>a?95===a:123>a?!0:170<=a&&b.test(String.fromCharCode(a))};a.isIdentifierChar=function(a){return 48>a?36===a:58>a?!0:65>a?!1:91>a?!0:97>a?95===a:123>a?!0:170<=a&&c.test(String.fromCharCode(a))}})(b);var c={BlockStatement:"BlockStatement",Statement:"Statement",ObjectLiteral:"ObjectLiteral",ArrayLiteral:"ArrayLiteral",ForInitializer:"ForInitializer",Conditional:"Conditional",Expression:"Expression"},C=function(a,
b,c,d,g,h){this.type=a;this.text=b;this.comments_before=[];this.newlines=c||0;this.wanted_newline=0<c;this.whitespace_before=d||"";this.parent=null};"undefined"!==typeof exports?exports.js_beautify=p:"undefined"!==typeof q?q.js_beautify=p:"undefined"!==typeof global&&(global.js_beautify=p)})();(function(){function h(k,p){function g(){return(H=k.charAt(++K))||""}function d(a){var e=K;a&&b();result=k.charAt(K+1)||"";K=e-1;g();return result}function n(a){for(var b=K;g();)if("\\"===H)g();else if(-1!==
a.indexOf(H))break;else if("\n"===H)break;return k.substring(b,K+1)}function q(a){var b=K;a=n(a);K=b-1;g();return a}function b(){for(var a="";w.test(d());)g(),a+=H;return a}function c(){var a="";for(H&&w.test(H)&&(a=H);w.test(g());)a+=H;return a}function C(a){var b=K;a="/"===d();for(g();g();)if(!a&&"*"===H&&"/"===d()){g();break}else if(a&&"\n"===H)return k.substring(b,K);return k.substring(b,K)+H}function a(a){return k.substring(K-a.length,K).toLowerCase()===a}function e(){for(var a=K+1;a<k.length;a++){var b=
k.charAt(a);if("{"===b)return!0;if(";"===b||"}"===b||")"===b)break}return!1}p=p||{};var A=p.indent_size||4,I=p.indent_char||" ",D=void 0===p.selector_separator_newline?!0:p.selector_separator_newline;p=void 0===p.end_with_newline?!1:p.end_with_newline;"string"===typeof A&&(A=parseInt(A,10));var w=/^\s+$/,K=-1,H,B=k.match(/^[\t ]*/)[0],I=Array(A+1).join(I),l=0,J=0,v={"{":function(a){v.singleSpace();m.push(a);v.newLine()},"}":function(a){v.newLine();m.push(a);v.newLine()},_lastCharWhitespace:function(){return w.test(m[m.length-
1])},newLine:function(a){a||v.trim();m.length&&m.push("\n");B&&m.push(B)},singleSpace:function(){m.length&&!v._lastCharWhitespace()&&m.push(" ")},trim:function(){for(;v._lastCharWhitespace();)m.pop()}},m=[];B&&m.push(B);for(var F=!1,R=!1,x="",u="";;){var u=c(),L=""!==u,P=-1!==u.indexOf("\n"),u=x;if(x=H)"/"===H&&"*"===d()?(L=a(""),v.newLine(),m.push(C()),v.newLine(),L&&v.newLine(!0)):"/"===H&&"/"===d()?(P||"{"===u||v.trim(),v.singleSpace(),m.push(C()),v.newLine()):"@"===H?(L&&v.singleSpace(),m.push(H),
L=q(": ,;{}()[]/\x3d'\"").replace(/\s$/,""),L in h.NESTED_AT_RULE?(J+=1,L in h.CONDITIONAL_GROUP_RULE&&(R=!0)):0<=": ".indexOf(L[L.length-1])&&(g(),L=n(": ").replace(/\s$/,""),m.push(L),v.singleSpace())):"{"===H?"}"===d(!0)?(b(),g(),v.singleSpace(),m.push("{}")):(l++,B+=I,v["{"](H),R?(R=!1,F=l>J):F=l>=J):"}"===H?(l--,B=B.slice(0,-A),v["}"](H),F=!1,J&&J--):":"===H?(b(),!F&&!R||a("\x26")||e()?":"===d()?(g(),m.push("::")):m.push(":"):(m.push(":"),v.singleSpace())):'"'===H||"'"===H?(L&&v.singleSpace(),
m.push(n(H))):";"===H?(m.push(H),v.newLine()):"("===H?a("url")?(m.push(H),b(),g()&&(")"!==H&&'"'!==H&&"'"!==H?m.push(n(")")):K--)):(L&&v.singleSpace(),m.push(H),b()):")"===H?m.push(H):","===H?(m.push(H),b(),!F&&D?v.newLine():v.singleSpace()):("]"!==H&&("["===H?L&&v.singleSpace():"\x3d"===H?b():L&&v.singleSpace()),m.push(H));else break}A=m.join("").replace(/[\r\n\t ]+$/,"");p&&(A+="\n");return A}h.NESTED_AT_RULE={"@page":!0,"@font-face":!0,"@keyframes":!0,"@media":!0,"@supports":!0,"@document":!0};
h.CONDITIONAL_GROUP_RULE={"@media":!0,"@supports":!0,"@document":!0};"undefined"!==typeof exports?exports.css_beautify=h:"undefined"!==typeof q?q.css_beautify=h:"undefined"!==typeof global&&(global.css_beautify=h)})();(function(){function h(g,d,h,k){var b,c,n,a,e,p,t,q,G,w,H;d=d||{};void 0!==d.wrap_line_length&&0!==parseInt(d.wrap_line_length,10)||void 0===d.max_char||0===parseInt(d.max_char,10)||(d.wrap_line_length=d.max_char);c=void 0===d.indent_inner_html?!1:d.indent_inner_html;n=void 0===d.indent_size?
4:parseInt(d.indent_size,10);a=void 0===d.indent_char?" ":d.indent_char;p=void 0===d.brace_style?"collapse":d.brace_style;e=0===parseInt(d.wrap_line_length,10)?32786:parseInt(d.wrap_line_length||250,10);t=d.unformatted||"a span img bdo em strong dfn code samp kbd var cite abbr acronym q sub sup tt i b big small u s strike font ins del pre address dt h1 h2 h3 h4 h5 h6".split(" ");G=(q=void 0===d.preserve_newlines?!0:d.preserve_newlines)?isNaN(parseInt(d.max_preserve_newlines,10))?32786:parseInt(d.max_preserve_newlines,
10):0;w=void 0===d.indent_handlebars?!1:d.indent_handlebars;H=void 0===d.end_with_newline?!1:d.end_with_newline;b=new function(){this.pos=0;this.token="";this.current_mode="CONTENT";this.tags={parent:"parent1",parentcount:1,parent1:""};this.token_text=this.last_token=this.last_text=this.token_type=this.tag_type="";this.newlines=0;this.indent_content=c;this.Utils={whitespace:["\n","\r","\t"," "],single_token:"br input link meta !doctype basefont base area hr wbr param img isindex ?xml embed ?php ? ?\x3d".split(" "),
extra_liners:["head","body","/html"],in_array:function(a,b){for(var e=0;e<b.length;e++)if(a===b[e])return!0;return!1}};this.is_whitespace=function(a){for(;0<a.length;a++)if(!this.Utils.in_array(a.charAt(0),this.Utils.whitespace))return!1;return!0};this.traverse_whitespace=function(){var a="",a=this.input.charAt(this.pos);if(this.Utils.in_array(a,this.Utils.whitespace)){for(this.newlines=0;this.Utils.in_array(a,this.Utils.whitespace);)q&&"\n"===a&&this.newlines<=G&&(this.newlines+=1),this.pos++,a=
this.input.charAt(this.pos);return!0}return!1};this.space_or_wrap=function(a){this.line_char_count>=this.wrap_line_length?(this.print_newline(!1,a),this.print_indentation(a)):(this.line_char_count++,a.push(" "))};this.get_content=function(){for(var a="",b=[];"\x3c"!==this.input.charAt(this.pos);){if(this.pos>=this.input.length)return b.length?b.join(""):["","TK_EOF"];if(this.traverse_whitespace())this.space_or_wrap(b);else{if(w)if(a=this.input.substr(this.pos,3),"{{#"===a||"{{/"===a)break;else if("{{"===
this.input.substr(this.pos,2)&&"{{else}}"===this.get_tag(!0))break;a=this.input.charAt(this.pos);this.pos++;this.line_char_count++;b.push(a)}}return b.length?b.join(""):""};this.get_contents_to=function(a){if(this.pos===this.input.length)return["","TK_EOF"];var b="";a=new RegExp("\x3c/"+a+"\\s*\x3e","igm");a.lastIndex=this.pos;a=(a=a.exec(this.input))?a.index:this.input.length;this.pos<a&&(b=this.input.substring(this.pos,a),this.pos=a);return b};this.record_tag=function(a){this.tags[a+"count"]?this.tags[a+
"count"]++:this.tags[a+"count"]=1;this.tags[a+this.tags[a+"count"]]=this.indent_level;this.tags[a+this.tags[a+"count"]+"parent"]=this.tags.parent;this.tags.parent=a+this.tags[a+"count"]};this.retrieve_tag=function(a){if(this.tags[a+"count"]){for(var b=this.tags.parent;b&&a+this.tags[a+"count"]!==b;)b=this.tags[b+"parent"];b&&(this.indent_level=this.tags[a+this.tags[a+"count"]],this.tags.parent=this.tags[b+"parent"]);delete this.tags[a+this.tags[a+"count"]+"parent"];delete this.tags[a+this.tags[a+
"count"]];1===this.tags[a+"count"]?delete this.tags[a+"count"]:this.tags[a+"count"]--}};this.indent_to_tag=function(a){if(this.tags[a+"count"]){for(var b=this.tags.parent;b&&a+this.tags[a+"count"]!==b;)b=this.tags[b+"parent"];b&&(this.indent_level=this.tags[a+this.tags[a+"count"]])}};this.get_tag=function(a){var b="",e=[],b="",c=!1,d,g,l=this.pos,h=this.line_char_count;a=void 0!==a?a:!1;do{if(this.pos>=this.input.length)return a&&(this.pos=l,this.line_char_count=h),e.length?e.join(""):["","TK_EOF"];
b=this.input.charAt(this.pos);this.pos++;if(this.Utils.in_array(b,this.Utils.whitespace))c=!0;else{if("'"===b||'"'===b)b+=this.get_unformatted(b),c=!0;"\x3d"===b&&(c=!1);e.length&&"\x3d"!==e[e.length-1]&&"\x3e"!==b&&c&&(this.space_or_wrap(e),c=!1);w&&"\x3c"===g&&"{{"===b+this.input.charAt(this.pos)&&(b+=this.get_unformatted("}}"),e.length&&" "!==e[e.length-1]&&"\x3c"!==e[e.length-1]&&(b=" "+b),c=!0);"\x3c"!==b||g||(d=this.pos-1,g="\x3c");w&&!g&&2<=e.length&&"{"===e[e.length-1]&&"{"==e[e.length-2]&&
(d="#"===b||"/"===b?this.pos-3:this.pos-2,g="{");this.line_char_count++;e.push(b);if(e[1]&&"!"===e[1]){e=[this.get_comment(d)];break}if(w&&"{"===g&&2<e.length&&"}"===e[e.length-2]&&"}"===e[e.length-1])break}}while("\x3e"!==b);d=e.join("");g=-1!==d.indexOf(" ")?d.indexOf(" "):"{"===d[0]?d.indexOf("}"):d.indexOf("\x3e");g=d.substring("\x3c"!==d[0]&&w?"#"===d[2]?3:2:1,g).toLowerCase();"/"===d.charAt(d.length-2)||this.Utils.in_array(g,this.Utils.single_token)?a||(this.tag_type="SINGLE"):w&&"{"===d[0]&&
"else"===g?a||(this.indent_to_tag("if"),this.tag_type="HANDLEBARS_ELSE",this.indent_content=!0,this.traverse_whitespace()):this.is_unformatted(g,t)?(b=this.get_unformatted("\x3c/"+g+"\x3e",d),e.push(b),this.tag_type="SINGLE"):"script"===g&&(-1===d.search("type")||-1<d.search("type")&&-1<d.search(/\b(text|application)\/(x-)?(javascript|ecmascript|jscript|livescript)/))?a||(this.record_tag(g),this.tag_type="SCRIPT"):"style"===g&&(-1===d.search("type")||-1<d.search("type")&&-1<d.search("text/css"))?
a||(this.record_tag(g),this.tag_type="STYLE"):"!"===g.charAt(0)?a||(this.tag_type="SINGLE",this.traverse_whitespace()):a||("/"===g.charAt(0)?(this.retrieve_tag(g.substring(1)),this.tag_type="END"):(this.record_tag(g),"html"!==g.toLowerCase()&&(this.indent_content=!0),this.tag_type="START"),this.traverse_whitespace()&&this.space_or_wrap(e),this.Utils.in_array(g,this.Utils.extra_liners)&&(this.print_newline(!1,this.output),this.output.length&&"\n"!==this.output[this.output.length-2]&&this.print_newline(!0,
this.output)));a&&(this.pos=l,this.line_char_count=h);return e.join("")};this.get_comment=function(a){var b="",e="\x3e",c=!1;this.pos=a;input_char=this.input.charAt(this.pos);for(this.pos++;this.pos<=this.input.length;){b+=input_char;if(b[b.length-1]===e[e.length-1]&&-1!==b.indexOf(e))break;!c&&10>b.length&&(0===b.indexOf("\x3c![if")?(e="\x3c![endif]\x3e",c=!0):0===b.indexOf("\x3c![cdata[")?(e="]]\x3e",c=!0):0===b.indexOf("\x3c![")?(e="]\x3e",c=!0):0===b.indexOf("\x3c!--")&&(e="--\x3e",c=!0));input_char=
this.input.charAt(this.pos);this.pos++}return b};this.get_unformatted=function(a,b){if(b&&-1!==b.toLowerCase().indexOf(a))return"";var e=b="",c=0,d=!0;do{if(this.pos>=this.input.length)break;b=this.input.charAt(this.pos);this.pos++;if(this.Utils.in_array(b,this.Utils.whitespace)){if(!d){this.line_char_count--;continue}if("\n"===b||"\r"===b){e+="\n";this.line_char_count=0;continue}}e+=b;this.line_char_count++;d=!0;w&&"{"===b&&e.length&&"{"===e[e.length-2]&&(e+=this.get_unformatted("}}"),c=e.length)}while(-1===
e.toLowerCase().indexOf(a,c));return e};this.get_token=function(){var a;if("TK_TAG_SCRIPT"===this.last_token||"TK_TAG_STYLE"===this.last_token){var b=this.last_token.substr(7);a=this.get_contents_to(b);return"string"!==typeof a?a:[a,"TK_"+b]}if("CONTENT"===this.current_mode)return a=this.get_content(),"string"!==typeof a?a:[a,"TK_CONTENT"];if("TAG"===this.current_mode)return a=this.get_tag(),"string"!==typeof a?a:[a,"TK_TAG_"+this.tag_type]};this.get_full_indent=function(a){a=this.indent_level+a||
0;return 1>a?"":Array(a+1).join(this.indent_string)};this.is_unformatted=function(a,b){if(!this.Utils.in_array(a,b))return!1;if("a"!==a.toLowerCase()||!this.Utils.in_array("a",b))return!0;a=(this.get_tag(!0)||"").match(/^\s*<\s*\/?([a-z]*)\s*[^>]*>\s*$/);return!a||this.Utils.in_array(a,b)?!0:!1};this.printer=function(a,b,e,c,d){this.input=a||"";this.output=[];this.indent_character=b;this.indent_string="";this.indent_size=e;this.brace_style=d;this.indent_level=0;this.wrap_line_length=c;for(a=this.line_char_count=
0;a<this.indent_size;a++)this.indent_string+=this.indent_character;this.print_newline=function(a,b){this.line_char_count=0;b&&b.length&&(a||"\n"!==b[b.length-1])&&("\n"!==b[b.length-1]&&(b[b.length-1]=b[b.length-1].replace(/\s+$/g,"")),b.push("\n"))};this.print_indentation=function(a){for(var b=0;b<this.indent_level;b++)a.push(this.indent_string),this.line_char_count+=this.indent_string.length};this.print_token=function(a){if(!this.is_whitespace(a)||this.output.length)(a||""!==a)&&this.output.length&&
"\n"===this.output[this.output.length-1]&&(this.print_indentation(this.output),a=a.replace(/^\s+/g,"")),this.print_token_raw(a)};this.print_token_raw=function(a){0<this.newlines&&(a=a.replace(/\s+$/g,""));a&&""!==a&&(1<a.length&&"\n"===a[a.length-1]?(this.output.push(a.slice(0,-1)),this.print_newline(!1,this.output)):this.output.push(a));for(a=0;a<this.newlines;a++)this.print_newline(0<a,this.output);this.newlines=0};this.indent=function(){this.indent_level++};this.unindent=function(){0<this.indent_level&&
this.indent_level--}};return this};for(b.printer(g,a,n,e,p);;){g=b.get_token();b.token_text=g[0];b.token_type=g[1];if("TK_EOF"===b.token_type)break;switch(b.token_type){case "TK_TAG_START":b.print_newline(!1,b.output);b.print_token(b.token_text);b.indent_content&&(b.indent(),b.indent_content=!1);b.current_mode="CONTENT";break;case "TK_TAG_STYLE":case "TK_TAG_SCRIPT":b.print_newline(!1,b.output);b.print_token(b.token_text);b.current_mode="CONTENT";break;case "TK_TAG_END":"TK_CONTENT"===b.last_token&&
""===b.last_text&&(g=b.token_text.match(/\w+/)[0],n=null,b.output.length&&(n=b.output[b.output.length-1].match(/(?:<|{{#)\s*(\w+)/)),null!==n&&n[1]===g||b.print_newline(!1,b.output));b.print_token(b.token_text);b.current_mode="CONTENT";break;case "TK_TAG_SINGLE":(g=b.token_text.match(/^\s*<([a-z-]+)/i))&&b.Utils.in_array(g[1],t)||b.print_newline(!1,b.output);b.print_token(b.token_text);b.current_mode="CONTENT";break;case "TK_TAG_HANDLEBARS_ELSE":b.print_token(b.token_text);b.indent_content&&(b.indent(),
b.indent_content=!1);b.current_mode="CONTENT";break;case "TK_CONTENT":b.print_token(b.token_text);b.current_mode="TAG";break;case "TK_STYLE":case "TK_SCRIPT":if(""!==b.token_text){b.print_newline(!1,b.output);g=b.token_text;var B;a=1;"TK_SCRIPT"===b.token_type?B="function"===typeof h&&h:"TK_STYLE"===b.token_type&&(B="function"===typeof k&&k);"keep"===d.indent_scripts?a=0:"separate"===d.indent_scripts&&(a=-b.indent_level);n=b.get_full_indent(a);B?g=B(g.replace(/^\s*/,n),d):(e=g.match(/^\s*/)[0].match(/[^\n\r]*$/)[0].split(b.indent_string).length-
1,a=b.get_full_indent(a-e),g=g.replace(/^\s*/,n).replace(/\r\n|\r|\n/g,"\n"+a).replace(/\s+$/,""));g&&(b.print_token_raw(g),b.print_newline(!0,b.output))}b.current_mode="TAG";break;default:""!==b.token_text&&b.print_token(b.token_text)}b.last_token=b.token_type;b.last_text=b.token_text}d=b.output.join("").replace(/[\r\n\t ]+$/,"");H&&(d+="\n");return d}if("undefined"!==typeof exports){var k=require("./beautify.js"),p=require("./beautify-css.js");exports.html_beautify=function(g,d){return h(g,d,k.js_beautify,
p.css_beautify)}}else"undefined"!==typeof q?q.html_beautify=function(g,d){return h(g,d,q.js_beautify,q.css_beautify)}:"undefined"!==typeof global&&(global.html_beautify=function(g,d){return h(g,d,global.js_beautify,global.css_beautify)})})()})},"xideve/views/VisualEditorLayout":function(){define(["dcl/dcl","xaction/Action","xide/types","davinci/Workbench","dojo/dom-style"],function(u,w,k,q,h){return u(null,{declaredClass:"xideve/views/VisualEditorLayout",changeGlobalLayout:function(n){this.getPageEditor();
var p=this.getMainView(),g=p.layoutLeft,p=p.layoutRight,d=this;switch(n){case k.VE_LAYOUT_RIGHT_CENTER_BOTTOM:g._splitterWidget&&g._splitterWidget.set("state","closed");p._splitterWidget&&p._splitterWidget.set("state","full");this.doSplit(k.VIEW_SPLIT_MODE.SPLIT_HORIZONTAL);break;case k.VE_LAYOUT_CENTER_BOTTOM:this.doSplit(k.VIEW_SPLIT_MODE.SPLIT_HORIZONTAL);g._splitterWidget&&g._splitterWidget.set("state","closed");p._splitterWidget&&p._splitterWidget.set("state","closed");break;case k.VE_LAYOUT_CENTER_RIGHT:this.doSplit(k.VIEW_SPLIT_MODE.DESIGN);
g._splitterWidget&&g._splitterWidget.set("state","closed");p._splitterWidget&&p._splitterWidget.set("state","full");break;case k.VE_LAYOUT_LEFT_CENTER_RIGHT:this.doSplit(k.VIEW_SPLIT_MODE.DESIGN);g._splitterWidget&&g._splitterWidget.set("state","full");p._splitterWidget&&p._splitterWidget.set("state","full");break;case k.VE_LAYOUT_LEFT_CENTER_RIGHT_BOTTOM:this.doSplit(k.VIEW_SPLIT_MODE.SPLIT_HORIZONTAL),h.set(g.domNode,{width:"200px"}),g._splitterWidget&&g._splitterWidget.set("state","full"),p._splitterWidget&&
p._splitterWidget.set("state","full")}this.publish(k.EVENTS.RESIZE);setTimeout(function(){d.publish(k.EVENTS.RESIZE)},1E3)},getLayoutActions:function(){function h(b,a,e,c){b=w.create(b,e,"View/"+a+"_"+g,!1,null,k.ITEM_TYPE.WIDGET,"viewActions",null,!1,function(){p.changeGlobalLayout(a)});b.setVisibility(k.ACTION_VISIBILITY.ACTION_TOOLBAR,{label:"",widgetArgs:{style:"text-align:right;float:right;font-size:120%;"},permanent:function(){return 0==p.destroyed}});g++;return b}if(this._layoutActions)return this._layoutActions;
var p=this,g=0,d=h("Center Bottom Right",k.VE_LAYOUT_RIGHT_CENTER_BOTTOM,"layoutIcon-rightCenterBottom"),t=h("Center Bottom",k.VE_LAYOUT_CENTER_BOTTOM,"layoutIcon-centerBottom"),q=h("Center Right",k.VE_LAYOUT_CENTER_RIGHT,"layoutIcon-centerRight"),b=h("Left Center Right",k.VE_LAYOUT_LEFT_CENTER_RIGHT,"layoutIcon-leftCenterRight"),c=h("Left Center Right Bottom",k.VE_LAYOUT_LEFT_CENTER_RIGHT_BOTTOM,"layoutIcon-leftCenterRightBottom");return this._layoutActions=d=[d,t,q,b,c]},doSplit:function(h){},onSplit:function(){this.editor&&
(q._switchEditor(null),this.publish("/davinci/ui/editorSelected",[{editor:null,oldEditor:this.editor}]))},getSplitTarget:function(){return this.containerNode},getSplitContent:function(){return this.editor.domNode}})})},"xideve/views/VisualEditorTools":function(){define(["dcl/dcl","davinci/ve/widget"],function(u,w){$.fn.inlineStyle=function(k){var q=this.attr("style"),h;q&&q.split(";").forEach(function(n){n=n.split(":");$.trim(n[0])===k&&(h=n[1])});return h};return u(null,{declaredClass:"xideve/views/VisualEditorTools",
getEditors:function(){var k=[];if(this.parentContainer)for(var q=this.parentContainer.getChildren(),h=0;h<q.length;h++){var n=q[h];"davinci.ve.PageEditor"===n.declaredClass&&k.push(n)}return k},getEditorContext:function(){var k=null;this.editor&&this.editor.currentEditor&&this.editor.currentEditor.context&&(k=this.editor.currentEditor.context);return k},getPageEditor:function(){return this.editor},onWidgetAction:function(k){},_sameSize:function(){var k=this.getEditorContext();k.getDocument();var q=
this.getSelection(),h=$(q[0].domNode),n=h.css("width"),h=h.css("height");q.shift();for(var p=0;p<q.length;p++){var g=q[p];$(g.domNode);(g=k.getCommandForStyleChange({appliesTo:"inline",appliesToWhichState:null,cascade:null,values:[{width:n,height:h}]},[g]))&&k.getCommandStack().execute(g)}},_sameWidth:function(){var k=this.getEditorContext();k.getDocument();var q=this.getSelection(),h=$(q[0].domNode),n=h.css("width");h.css("height");q.shift();for(h=0;h<q.length;h++){var p=q[h];$(p.domNode);(p=k.getCommandForStyleChange({appliesTo:"inline",
appliesToWhichState:null,cascade:null,values:[{width:n}]},[p]))&&k.getCommandStack().execute(p)}},_sameHeight:function(){var k=this.getEditorContext();k.getDocument();var q=this.getSelection(),h=$(q[0].domNode);h.css("width");h=h.css("height");q.shift();this.getSelection();for(var n=0;n<q.length;n++){var p=q[n];$(p.domNode);if(p=k.getCommandForStyleChange({appliesTo:"inline",appliesToWhichState:null,cascade:null,values:[{height:h}]},[p]))k.getCommandStack().execute(p,!0),this.getSelection(),p._newId&&
w.byId(p._newId,context.getDocument())}},_alignBottomHorizontal:function(){var k=this.getEditorContext(),q=k.getDocument(),h=this.getSelection(),n=h[0];h.shift();for(var p=0;p<h.length;p++){var g=h[p],d=(new jQuery.PositionCalculator({item:$(n.domNode),target:$(g.domNode),itemAt:"bottom right",targetAt:"bottom left",boundary:$(q.body)})).calculate(),t=$(g.domNode),G=t.position().top;t.position();(g=k.getCommandForStyleChange({appliesTo:"inline",appliesToWhichState:null,cascade:null,values:[{top:G+
-1*d.moveBy.y+"px"}]},[g]))&&k.getCommandStack().execute(g)}},_alignTopHorizontal:function(){var k=this.getEditorContext(),q=k.getDocument(),h=this.getSelection(),n=h[0];h.shift();for(var p=0;p<h.length;p++){var g=h[p],d=(new jQuery.PositionCalculator({item:$(n.domNode),target:$(g.domNode),itemAt:"top right",targetAt:"top left",boundary:$(q.body)})).calculate(),t=$(g.domNode),G=t.position().top;t.position();(g=k.getCommandForStyleChange({appliesTo:"inline",appliesToWhichState:null,cascade:null,values:[{top:G+
-1*d.moveBy.y+"px"}]},[g]))&&k.getCommandStack().execute(g)}},_alignRightVertical:function(){var k=this.getEditorContext(),q=k.getDocument(),h=this.getSelection(),n=h[0];h.shift();for(var p=0;p<h.length;p++){var g=h[p],d=(new jQuery.PositionCalculator({item:$(n.domNode),target:$(g.domNode),itemAt:"bottom right",targetAt:"top right",boundary:$(q.body)})).calculate(),t=$(g.domNode);t.position();d={appliesTo:"inline",appliesToWhichState:null,cascade:null,values:[{left:t.position().left+-1*d.moveBy.x+
"px"}]};(g=k.getCommandForStyleChange(d,[g]))&&k.getCommandStack().execute(g)}},_alignCenterVertical:function(){var k=this.getEditorContext(),q=k.getDocument(),h=this.getSelection(),n=h[0];h.shift();for(var p=0;p<h.length;p++){var g=h[p],d=(new jQuery.PositionCalculator({item:$(n.domNode),target:$(g.domNode),itemAt:"bottom center",targetAt:"top center",boundary:$(q.body)})).calculate(),t=$(g.domNode);t.position();d={appliesTo:"inline",appliesToWhichState:null,cascade:null,values:[{left:t.position().left+
-1*d.moveBy.x+"px"}]};(g=k.getCommandForStyleChange(d,[g]))&&k.getCommandStack().execute(g)}},_alignLeftVertical:function(){var k=this.getEditorContext(),q=k.getDocument(),h=this.getSelection(),n=h[0];h.shift();for(var p=0;p<h.length;p++){var g=h[p],d=(new jQuery.PositionCalculator({item:$(n.domNode),target:$(g.domNode),itemAt:"bottom left",targetAt:"top left",boundary:$(q.body)})).calculate(),t=$(g.domNode);t.position();d={appliesTo:"inline",appliesToWhichState:null,cascade:null,values:[{left:t.position().left+
-1*d.moveBy.x+"px"}]};(g=k.getCommandForStyleChange(d,[g]))&&k.getCommandStack().execute(g,!0)}}})})},"xideve/palette/Palette":function(){define("xdojo/declare xide/utils davinci/Workbench davinci/library davinci/Runtime xide/lodash xide/$ dstore/Trackable xide/data/TreeMemory davinci/ve/metadata dojo/promise/all dojo/Deferred ./Grid ./Model".split(" "),function(u,w,k,q,h,n,p,g,d,t,G,b,c,C){console.clear();p=u("m",null,[]);var a=function(a){this.ctx=a;this._presetCreated={};this._presetSections={};
this._userWidgetSection={id:"$$UserWidgets$$",name:"User Widgets",includes:[]}};a.prototype._prepareSectionItem=function(a,b,c){var e=t.getLibraryMetadataForType(a.type);a.$library=e;a.section=b;a._paletteItemGroup=c};a.prototype._createSectionItems=function(a,b,c){a.items=[];b=b.collections;for(var e=a.includes||[],d=0;d<e.length;d++){for(var g=e[d],h=n.isArray(g)?g:[g],g=[],k=0;k<h.length;k++){var l=h[k],p=[];if("type:"===l.substr(0,5)){var q=t.getWidgetDescriptorForType(l.substr(5));q&&p.push(q)}else p=
t.getWidgetsWithTag(l);for(l=0;l<p.length;l++)q=p[l],q=dojo.clone(q),this._prepareSectionItem(q,a,this._paletteItemGroupCount),g.push(q)}h=[];if(b&&b.length){for(p=0;p<b.length;p++)for(l=b[p],k=0;k<g.length;)q=g[k],q.collection==l.id?(h.push(q),g.splice(k,1)):k++;for(k=0;k<g.length;k++)h.push(g[k])}else h=g;for(k=0;k<h.length;k++)g=h[k],p=c.indexOf(g.type),0<=p&&c.splice(p,1),a.items.push(g);this._paletteItemGroupCount++}};a.prototype.initMeta=function(a){var b=require.toUrl("xideve/metadata/");return t.init(a||
window.sctx,b)};a.prototype.init=function(){var a=require.toUrl("xideve/metadata/");t.init(sctx,a);var c=t.getLibrary(),d={},a=[];(q.getUserLibs(k.getProject())||{}).forEach(function(a){var b;a:{b=a.id;a=a.version;for(var e in c)if(c.hasOwnProperty(e)){var g=c[e];if(g.name===b&&g.version===a){a={};a[b]=c[e];b=a;break a}}b=null}dojo.mixin(d,b)});var g={},p=new b;a.push(p);var n=q.getCustomWidgets();n&&n.then(function(a){q.getCustomWidgetDescriptors();p.resolve()});var w=[],B;for(B in d)d.hasOwnProperty(B)&&
(n=d[B].$wm)&&n&&n.widgets&&n.widgets.forEach(function(a){"untested"==a.category||a.hidden||w.push(a.type)});this._paletteItemGroupCount=0;this._widgetPalette=h.getSiteConfigData("widgetPalette");B=new b;a.push(B);if(this._widgetPalette){var n=this._widgetPalette.presets||{},l;for(l in n){var J=w.concat();this._presetSections[l]=[];var v=n[l],m,F="string"==typeof v.sections?this._widgetPalette.defs?this._widgetPalette.defs[v.sections]:void 0:v.sections;if(F&&F.length){var C=[],x;for(x in g){var u=
g[x];u.descriptor&&C.push({name:x,value:u})}C.sort(function(a,b){a=a.name.split("/").pop().toLowerCase();b=b.name.split("/").pop().toLowerCase();return a<b?-1:a>b?1:0});for(var u=!1,L,P=0;P<C.length;P++){u||(x=dojo.clone(this._userWidgetSection),F=F.concat(x),u=!0,L=x.includes);var y=C[P].value.descriptor.widgets;for(x=0;x<y.length;x++)L.push("type:"+y[x].type)}for(C=0;C<F.length;C++){u=dojo.clone("string"==typeof F[C]?this._widgetPalette.defs?this._widgetPalette.defs[F[C]]:void 0:F[C]);u.preset=
v;u.presetId=l;if(u.subsections&&u.subsections.length)for(P=u.subsections,y=0;y<P.length;y++){if("string"==typeof P[y]){var z=this._widgetPalette.defs?this._widgetPalette.defs[P[y]]:void 0;z&&(P[y]=dojo.clone(z))}z=P[y];z.includes&&0<=z.includes.indexOf("$$AllOthers$$")&&(m=z);z.preset=v;z.presetId=l;this._createSectionItems(z,v,J)}else this._createSectionItems(u,v,J),u.includes&&0<=u.includes.indexOf("$$AllOthers$$")&&(m=u);this._presetSections[l].push(u)}}for(v=0;v<J.length;v++)F=J[v],m&&(F=t.getWidgetDescriptorForType(F),
F=dojo.clone(F),this._prepareSectionItem(F,m,this._paletteItemGroupCount),m.items.push(F),this._paletteItemGroupCount++)}B.resolve()}else console.error("widgetPalette.json not defined (in siteConfig folder)");return G(a)};a.prototype.createRootItem=function(a){var b=this,e=this.store;a.group=a.subsections.length||a.items.length;a.title=a.name;a.parentId=a.parentId||".";a=e.putSync(a);if(a.subsections&&a.subsections.length)for(e=0;e<a.subsections.length;e++){var c=a.subsections[e];c._id=c.id;c.id=
a.id+"_"+c.name;c.parentId=a.id;c.section=a;c.subsections=c.subsections||[];c.items=c.items||[];c.items.forEach(function(a){b.createItem(a,c)});this.createRootItem(c)}return a};a.prototype.createItem=function(a,b,c){a.id=c||b.id+"_"+a.type;a.parentId=b.id;b=a.name;a.$library&&(b=a.$library._maqGetString(a.type)||a.$library._maqGetString(a.name)||a.name);b=b.replace("\x3c","");b=b.replace("\x3e","");a.title=b;a.name=b;this.store.putSync(a)};a.prototype.createStylesSection=function(){var a=this,b={id:"Styles",
name:"States",includes:[],subsections:[],items:[],group:!0};this.ctx.getLibraryManager().getSetting("styles");this.ctx.getLibraryManager().getStore().data.forEach(function(a){b.items.push({id:"Styles_"+a.id,name:a.id,type:a.value.type,group:!1,properties:w.mixin({},a.value.properties,{name:a.id})})});var c=this.createRootItem(b);c.items.forEach(function(b){a.createItem(b,c,b.id)});return c};a.prototype.createExtras=function(){var a=this,b=this.createStylesSection();this.ctx.getLibraryManager().getStore().on("update",
function(c){c=c.target;var e={id:"Styles_"+c.id,name:c.id,type:c.value.type,group:!1,properties:w.mixin({},c.value.properties,{name:c.id})};a.createItem(e,b,c.id)})};a.prototype.createStore=function(){var a=new (u("paletteStore",[d,g],{}))({data:[],idProperty:"id",parentProperty:"parentId",id:w.createUUID(),ctx:sctx,Model:C,mayHaveChildren:function(){return!0},getRootItem:function(){return{_EX:!0,id:".",name:".",group:!0,virtual:!0,_S:this,getPath:function(){return this.id}}},getParent:function(a){if(!a)return null;
var b=a,c=null;n.isString(b)&&(b=this.getSync(a));b&&b.parentId&&(c=this.getSync(b.parentId));return c||this.getRootItem()}});this.store=a;this._presetCreated.delite=!0;var b=this._presetSections.delite;if(b)for(var c=0;c<b.length;c++){var h=b[c];h._created||(this.createRootItem(h),h._created=!0)}this.createExtras();return a};p.create=function(){var b=new a;b.initMeta();setTimeout(function(){b.init();b.createStore()},2E3)};p.Palette=a;p.Grid=c;return p})},"xideve/palette/Grid":function(){define("xdojo/declare xide/types xide/utils davinci/Workbench davinci/Runtime xide/lodash xgrid/TreeRenderer xgrid/Grid xgrid/MultiRenderer xide/widgets/_Widget xblox/views/ThumbRenderer xblox/views/DnD dojo/dom-construct xgrid/Selection xgrid/Search xgrid/KeyboardNavigation xide/$ dijit/focus davinci/ui/dnd/DragManager davinci/ve/utils/GeomUtils davinci/ui/dnd/DragSource davinci/ve/metadata davinci/ve/tools/CreateTool dojo/_base/lang xaction/DefaultActions".split(" "),
function(u,w,k,q,h,n,p,g,d,t,G,b,c,C,a,e,A,I,D,Q,K,H,B,l,J){b=w.ACTION;b=[b.RELOAD,b.DELETE,b.SEARCH];window.pRunAction=function(a,b){var c=a.getSelection(),e=function(b){var c=a.ctx.getLibraryManager();c.getStore();c.setSetting(b.name,null);a.collection.removeSync(b.id);a.refresh()};switch(b.command){case "File/New Group":c.forEach(e);break;case "File/Delete":c.forEach(e)}};var v=function(){try{return h.currentEditor.getContext()}catch(m){}};l=u("xideve.palette.ThumbRenderer2",[G],{resizeThumb:!0,
__type:"thumb",deactivateRenderer:function(){A(this.domNode.parentNode).removeClass("metro");A(this.domNode).css("padding","");this.isThumbGrid=!1},activateRenderer:function(){A(this.contentNode).css("padding","8px");this.isThumbGrid=!0;this.refresh()},_getIconUri:function(a,b){return a?0===a.indexOf("http")?a:q.location()+a:require.toUrl("davinci/"+b)},_setIconProperties:function(a){a.icon=a.iconBase64||a.icon&&this._getIconUri(a.icon,"ve/resources/images/file_obj.gif")||a.iconLargeBase64||a.iconLarge&&
this._getIconUri(a.iconLarge,"ve/resources/images/file_obj.gif")||this._getIconUri(a.icon,"ve/resources/images/file_obj.gif");a.iconLarge=a.iconLargeBase64||a.iconLarge&&this._getIconUri(a.iconLarge,"ve/resources/images/file_obj.gif")||a.iconBase64||this._getIconUri(a.icon,"ve/resources/images/file_obj.gif")},template2:'\x3cspan class\x3d"paletteItemSelectionContainer"\x3e\x3c/span\x3e\x3cspan class\x3d"paletteItemNormalContainer"\x3e\x3cspan class\x3d"paletteItemImageContainer" style\x3d"margin-top:8px"\x3e\x3cimg class\x3d"paletteItemImage" border\x3d"0"/\x3e\x3c/span\x3e\x3cspan class\x3d"paletteItemLabelContainer"\x3e\x3cspan class\x3d"paletteItemLabel"\x3e\x3c/span\x3e\x3c/span\x3e\x3c/span\x3e',
renderRow:function(a){var b=c.create("div",{className:"tile widget form-control dojoyPaletteCommon dojoyPaletteItem maqPaletteSection_desktop dojoyPaletteItemSunken widgetBase"}),e=a.name;b.innerHTML=this.template2;this._setIconProperties(a);-1!==a.icon.indexOf("base64,iVBORw0KGgoAAAANSUhEUgAAADIAAAAyCAIAAACRXR")&&(a.icon="");e=b.querySelector(".paletteItemLabel");e.appendChild(dojo.doc.createTextNode(a.name));e=b.querySelector("img");a&&a.iconHTML?(dojo.destroy(e),b.querySelector(".paletteItemImageContainer").innerHTML=
item.iconHTML):e.src=a.icon;return b}});G=u("xideve.palette.GroupRenderer",p,{itemClass:l,groupClass:p,renderRow:function(a){return(a.group?this.groupClass:this.itemClass).prototype.renderRow.apply(this,arguments)}});l=[G,l,p];d=u.classFactory("xideve.palette.PaletteGridRenderer",{},l,d.Implementation);g=g.createGridClass("xideve.palette.PaletteGrid",{},{SELECTION:{CLASS:C},KEYBOARD_SELECTION:!0,ACTIONS:w.GRID_FEATURES.ACTIONS,TOOLBAR:w.GRID_FEATURES.TOOLBAR,COLUMN_HIDER:!1,WIDGET:{CLASS:t},KEYBOARD_NAVIGATION:{CLASS:e},
SEARCH:{CLASS:a}},{RENDERER:d},{renderers:l,selectedRenderer:G,permissions:b});return u("ActionGrid",g,{formatColumn:function(a,b,c){var e=this.selectedRenderer?this.selectedRenderer.prototype:this;if(e.formatColumn_&&(e=e.formatColumn.apply(arguments))||c.renderColumn_&&(e=c.renderColumn.apply(this,arguments)))return e;switch(a){case "title":b=c.group?'\x3cspan style\x3d"float:left;margin-right: 10px"\x3e'+b+'\x3c/span\x3e\x3chr style\x3d"margin-top: 13px;margin-left: 4px"/\x3e':b}return b},_columns:{},
postMixInProperties:function(){var a=this.state;a&&a._columns&&(this._columns=a._columns);this.columns=this.getColumns();return this.inherited(arguments)},getColumns:function(a){var b=this;return this.columns=[{renderExpando:!0,label:"Name",field:"title",sortable:!0,formatter:function(a,c){return b.formatColumn("title",a,c)},hidden:!1}]},dragMananager:null,veContext:null,updateDragManager:function(a){if(a){this.dragMananager.document=a.getDocument();var b=a.frameNode;b&&(b=dojo.coords(b),a=a.getContainerNode(),
this.dragMananager.documentX=b.x-Q.getScrollLeft(a),this.dragMananager.documentY=b.y-Q.getScrollTop(a))}},onContextDestroyed:function(a){a.__veDNDDevHandles&&(n.each(a.__veDNDDevHandles,k.destroy),a.__veDNDDevHandles);delete this.editorContext},onAppReady:function(a){this.editorContext&&this.editorContext!=a.context&&(this.editorContext=a.context);this.dragMananager||(this.dragMananager=D);this.editorContext=a.context;this.updateDragManager(a.context)},addCustomWidget:function(a){var b=this;if(a&&
a.$wm&&a.$wm.widgets&&a.$wm.widgets.length){var c=this.palette,e=a.$wm;a=a.$wm.widgets;for(var d=0;d<a.length;d++){var g=a[d],l;for(l in this.palette._presetSections){var h=null,k=this.palette._presetSections[l];if(k){for(var m=0;m<k.length;m++){var n=k[m];if("$$UserWidgets$$"==n.id){h=n;break}}h||(h=dojo.clone(c._userWidgetSection),h.preset=c._presetSections[l],h.presetId=l,h.items=[],k.push(h),this.customSection=h,this.palette._presetCreated[l]&&(h._created=!0,h.subsections=[],h.group=4));k="type:"+
g.type;0>h.includes.indexOf(k)&&(h.includes.push(k),g.$library=e,g.section=h,g._paletteItemGroup=c._paletteItemGroupCount++,h.items.push(g),this.__c||(h._created=!0,h.subsections=[],h.group=4,c.createRootItem(h),this.set("collection",this.collection.filter({parentId:"."})),this.__c=!0),c.createItem(g,h))}else console.error("Palette.js:addCustomWidget - no sections for comptype\x3d"+l)}}setTimeout(function(){b.set("collection",b.collection.filter({parentId:"."}))},1E3)}},runAction:function(a){return pRunAction(this,
a)},_shouldDisableStates:function(){var a=(this.getSelection()||[])[0];if(a){if("Styles"===a.id)return!0;if(a.isChildOfId("Styles")||"Styles"===a.id)return!1}return!0},_getActions:function(){return[]},startup:function(a){var b=this;this.ctx.getLibraryManager().getStore().on("update",function(){b.refresh()});this._on("addAction",function(a){"File/Delete"===a.command&&(a.shouldDisable=function(){return b._shouldDisableStates()})});var c=J.getDefaultActions(this.permissions,this,this);this.addActions(c);
this.addActions(this._getActions());this.subscribe("/davinci/ui/addedCustomWidget",this.addCustomWidget);var e=function(a,b,c,e,d,g,h){d=k.clone(d);k.mixin(d.properties,h);g=e.dragSource.data.userData||g;g.onCreate=function(){};H.getHelper(d.type,"tool").then(function(a){a=new (a||B)(dojo.clone(d),g);c.setActiveTool(a)}.bind(this));c.blockChange(!1);e._dragClone&&(A(e._dragClone).addClass("paletteDragContainer"),dojo.create("div",{className:"maqCandidateParents"},e._dragClone));c.setActiveDragDiv(e._dragClone)};
p.prototype.activateRenderer.apply(this);var d=function(a,b,c,d,g,h){var l=b.domNode,k=new K(b.domNode,"component",b,l);k.targetShouldShowCaret=!0;k.returnCloneOnFailure=!1;var l={handles:[],context:c,node:l,ds:k,destroy:function(){delete this.context;n.each(this.handles,dojo.disconnect);delete this.handles;delete this.node.__vednd;delete this.node;delete this.ds}},m=l.handles;m.push(dojo.connect(k,"onDragStart",dojo.hitch(a,function(l){e(a,b,c,l,d,g,h)})));m.push(dojo.connect(k,"onDragEnd",dojo.hitch(a,
function(a){I.curNode&&I.curNode.blur&&I.curNode.blur()})));m.push(dojo.connect(b.domNode,"onmouseover",function(a){b._mouseover=!0}));m.push(dojo.connect(b.domNode,"onmouseout",function(a){b._mouseover=!1}));m.push(dojo.connect(b.domNode,"onmousedown",function(b){b=a.dragMananager;b.document=c.getDocument();var e=c.frameNode;if(e){var e=dojo.coords(e),d=c.getContainerNode();b.documentX=e.x-Q.getScrollLeft(d);b.documentY=e.y-Q.getScrollTop(d)}}));return l};this._showHeader(!1);c=this.inherited(arguments);
n.each(this.getRows(),function(a){this.expand(a,!1)},this);A(this.domNode).addClass("blockPalette");this.subscribe([w.EVENTS.ON_APP_READY,w.EVENTS.ON_CONTEXT_DESTROYED]);var g=this;this._on("selectionChanged",function(a){if(a=(a=a.selection)&&1==a.length?a[0]:null){var b=g.row(a),c=b.element;if(!b.element.__vednd){c.__vednd=!0;var b={},e=g.editorContext,c={domNode:c};if(e){e.__veDNDDevHandles||(e.__veDNDDevHandles=[]);var h={properties:a.properties||{},type:a.type,userData:{}};a.group||e.__veDNDDevHandles.push(d(this,
c,e,h,a,b))}}}});this.onAppReady({context:v()});return c}})})},"xideve/palette/Model":function(){define(["dcl/dcl","xide/data/Model","xide/utils","xide/types","xide/lodash"],function(u,w,k,q,h){return u(w,{declaredClass:"xideve.palette.model",getFolder:function(){var h=this.getPath();return this.directory?h:k.pathinfo(h,q.PATH_PARTS.ALL).dirname},getChildren:function(){return this.children},isChildOfId:function(h){var k=this.getParent();if(k){if(k.id===h)return k;if(k.isChildOfId)return k.isChildOfId(h)}return null},
getParent:function(){return(this.getStore()||this._S).getParent(this)},getChild:function(k){return h.find(this.getChildren(),{path:k})},getStore:function(){return this._store||this._S}})})},"xideve/Embedded":function(){define("dojo/_base/declare davinci/davinci_ dojo/Deferred davinci/ve/metadata davinci/Runtime require dojo/_base/connect davinci/Workbench davinci/ve/metadata xideve/views/StyleView".split(" "),function(u,w,k,q,h,n,p,g,d,t){var G=function(b,c){401!=c.status&&403!=c.status&&!0===b.canceled&&
(b=b.ioArgs.url,(new RegExp("(^|\\.\\/|"+document.baseURI+"\\/)cmd\\/")).test(b)&&(0<=b.indexOf("getBluePageInfo")||h.handleError(c.message)))};return u("xideve/Embedded",null,{_loadActionClasses:function(){var b=[];h.getExtensions("davinci.editorActions",function(c){if("davinci.ve.HTMLPageEditor"==c.editorContribution.targetID)return b.push(c.editorContribution),!0});0==b.length&&h.getExtension("davinci.defaultEditorActions",function(c){b.push(c.editorContribution);return!0});var c=d.getLibraryActions("davinci.editorActions",
"davinci.ve.HTMLPageEditor"),b=dojo.clone(b);0<b.length&&c.length&&dojo.forEach(c,function(c){var a=n("davinci/Workbench");c.action&&a._loadActionClass(c);if(c.menu)for(var e=0;e<c.menu.length;e++){var d=c.menu[0];d.action&&a._loadActionClass(d)}b[0].actions.push(c)});return b},started:function(){},onReady:function(b){this._loadActionClasses();var c=document.getElementById("focusContainer");c||(c=dojo.create("div",{"class":"focusContainer",id:"focusContainer"},document.body),g.focusContainer=c);g._state=
{activeEditor:null,editors:[],nhfo:{project1:{device:"iphone",layout:"flow",themeSet:{name:"(none)",desktopTheme:"claro",mobileTheme:[{theme:"android",device:"Android"},{theme:"blackberry",device:"BlackBerry"},{theme:"ipad",device:"iPad"},{theme:"iphone",device:"iPhone"},{theme:"iphone",device:"other"}]}}},project:"project1",id:"",Fields:[]};g.run2();this.started();b.resolve(this)},start:function(b,c,d,a){var e=this,t=new k;h.cmdOffset=d||"";h.loadPlugins();h.initialPerspective="davinci.ve.pageDesign";
if(!0===c)h.isLocalInstall=!0,h.userName="none",h.userEmail="none",h.run(),g.ctx=b,e.onReady();else return b.getFileManager().callMethodEx("XApp_XIDE_Workbench_Service","getInfo",["nada"],function(c){h.userBaseUrl=a;h._initializationInfo=c;c=c.userInfo;h.isLocalInstall="maqettaUser"==c.userId;h.userName=c.userId;h.userEmail=c.email;c=n.toUrl("xideve/metadata/");q.init(b,c);h.run();g.ctx=b;e.onReady(t);h.subscribe("/davinci/states/state/changed",function(a){var b=h.currentEditor;"davinci.ve.themeEditor.ThemeEditor"!=
b.declaredClass&&"davinci.review.editor.ReviewEditor"!=b.declaredClass&&b.visualEditor.onContentChange.apply(b.visualEditor,arguments)});p.subscribe("/davinci/states/state/changed",function(a){var b=h.currentEditor&&"davinci.ve.PageEditor"==h.currentEditor.declaredClass&&h.currentEditor.visualEditor&&h.currentEditor.visualEditor.context;if(b){var c,e,b=b?b.getDijit():null,d=n("davinci/ve/widget");a.newState&&!a.newState.indexOf("_show:")&&(c=b.byId(a.newState.substring(6)),c=d.getWidget(c.domNode),
(e=c.getHelper())&&e.popup&&e.popup(c));a.oldState&&!a.oldState.indexOf("_show:")&&(c=b.byId(a.oldState.substring(6)),c=d.getWidget(c.domNode),(e=c.getHelper())&&e.tearDown&&e.tearDown(c))}});p.subscribe("/davinci/ui/repositionFocusContainer",function(a){g._repositionFocusContainer()})},!0),h.subscribe("/dojo/io/error",G),t}})})},"xideve/views/StyleView":function(){define("dojo/_base/declare dojo/_base/lang davinci/lang/ve xide/layout/ContentPane xideve/widgets/WidgetLite xide/mixins/ReloadMixin davinci/ve/widgets/HTMLStringUtil".split(" "),
function(u,w,k,q,h,n,p){return u("xideve/views/StyleView",[h,n],{showWidgetProperties:!0,_editor:null,_widget:null,_widgets:null,_subWidget:null,_titleBarDiv:"\x3cdiv class\x3d'palette_titleBarDiv'\x3e\x3cspan class\x3d'paletteCloseBox'\x3e\x3c/span\x3e\x3cspan class\x3d'titleBarDivTitle'\x3e\x3c/span\x3e\x3c/div\x3e",constructor:function(g,d){this.subscribe("/davinci/ui/editorSelected",dojo.hitch(this,this._editorSelected));this.subscribe("/davinci/ui/widgetSelected",dojo.hitch(this,this._widgetSelectionChanged));
this.subscribe("/davinci/states/state/changed",dojo.hitch(this,this._stateChanged));this.subscribe("/maqetta/appstates/state/changed",dojo.hitch(this,this._stateChanged));this.subscribe("/davinci/ui/initialPerspectiveReady",dojo.hitch(this,this._initialPerspectiveReady));this.subscribe("/davinci/workbench/ready",dojo.hitch(this,this._workbenchReady))},getPageTemplate:function(){return[{key:"widgetSpecific",className:"maqPropertySection page_editor_only",addCommonPropertiesAtTop:!1,html:"\x3cdiv dojoType\x3d'davinci.ve.widgets.WidgetProperties'\x3e\x3c/div\x3e"},
{key:"events",className:"maqPropertySection page_editor_only",addCommonPropertiesAtTop:!1,pageTemplate:{html:"\x3cdiv dojoType\x3d'davinci.ve.widgets.EventSelection'\x3e\x3c/div\x3e"}},{key:"layout",className:"maqPropertySection",addCommonPropertiesAtTop:!0,pageTemplate:[{display:"width",type:"multi",target:["width"],values:["","auto","100%","200px","10em"]},{display:"height",type:"multi",target:["height"],values:["","auto","100%","200px","10em"]},{html:"\x26nbsp;"},{key:"showMinMax",display:"\x26nbsp;\x26nbsp;\x26nbsp;",
type:"toggleSection",pageTemplate:[{display:"min-height",type:"multi",target:["min-height"],rowClass:"propertiesSectionHidden"},{display:"max-height",type:"multi",target:["max-height"],rowClass:"propertiesSectionHidden"},{display:"min-width",type:"multi",target:["min-width"],rowClass:"propertiesSectionHidden"},{display:"max-width",type:"multi",target:["max-width"],rowClass:"propertiesSectionHidden"},{html:"\x26nbsp;",rowClass:"propertiesSectionHidden"}]},{display:"position",type:"combo",target:["position"],
values:["","absolute","fixed","relative","static"]},{display:"left",type:"multi",target:["left"],values:["","0px","1em"]},{display:"top",type:"multi",target:["top"],values:["","0px","1em"]},{display:"right",type:"multi",target:["right"],values:["","0px","1em"]},{display:"bottom",type:"multi",target:["bottom"],values:["","0px","1em"]},{display:"display",type:"combo",target:["display"],values:["","none","block","inline","inline-block"]},{display:"opacity",type:"multi",target:["opacity"],values:["0",
"0.5","1.0"]},{display:"box-shadow",type:"text",target:["box-shadow"],value:["","none","1px 1px rgba(0,0,0,.5)"]},{display:"float",type:"combo",target:["float"],values:["","none","left","right"]},{display:"clear",type:"combo",target:["clear"],values:["","none","left","right","both"]},{display:"overflow",type:"combo",target:["overflow"],values:["","visible","hidden","scroll","auto"]},{display:"z-index",type:"multi",target:["z-index"],values:" auto 0 1 100 -1 -100".split(" ")},{display:"box-sizing",
type:"combo",target:["box-sizing","-webkit-box-sizing","-ms-box-sizing","-moz-box-sizing"],values:["","content-box","border-box"]}]},{key:"padding",className:"maqPropertySection",addCommonPropertiesAtTop:!0,pageTemplate:[{display:"\x3cb\x3e(padding)\x3c/b\x3e",type:"multi",target:["padding"],values:["","0px","1em"]},{key:"showtrbl",display:"\x26nbsp;\x26nbsp;\x26nbsp;",type:"toggleSection",pageTemplate:[{display:"padding-top",type:"multi",target:["padding-top"],values:["","0px","1em"],rowClass:"propertiesSectionHidden"},
{display:"padding-right",type:"multi",target:["padding-right"],values:["","0px","1em"],rowClass:"propertiesSectionHidden"},{display:"padding-bottom",type:"multi",target:["padding-bottom"],values:["","0px","1em"],rowClass:"propertiesSectionHidden"},{display:"padding-left",type:"multi",target:["padding-left"],values:["","0px","1em"],rowClass:"propertiesSectionHidden"}]}]},{key:"margins",className:"maqPropertySection",addCommonPropertiesAtTop:!0,pageTemplate:[{display:"\x3cb\x3e(margin)\x3c/b\x3e",type:"multi",
target:["margin"],values:["","0px","1em"]},{key:"showtrbl",display:"\x26nbsp;\x26nbsp;\x26nbsp;",type:"toggleSection",pageTemplate:[{display:"margin-top",type:"multi",target:["margin-top"],values:["","0px","1em"],rowClass:"propertiesSectionHidden"},{display:"margin-right",type:"multi",target:["margin-right"],values:["","0px","1em"],rowClass:"propertiesSectionHidden"},{display:"margin-bottom",type:"multi",target:["margin-bottom"],values:["","0px","1em"],rowClass:"propertiesSectionHidden"},{display:"margin-left",
type:"multi",target:["margin-left"],values:["","0px","1em"],rowClass:"propertiesSectionHidden"}]}]},{key:"background",className:"maqPropertySection",addCommonPropertiesAtTop:!0,pageTemplate:[{display:"background-color",type:"background",target:["background-color"],colorswatch:!0},{display:"background-image",type:"background",target:["background-image"],values:["","none"]},{display:"background-repeat",type:"background",values:["","repeat","repeat-x","repeat-y","no-repeat"],target:["background-repeat"]},
{display:"background-position",type:"background",target:["background-position"],values:";0px 0px;0% 0%;left top;center center;right bottom".split(";")},{display:"background-size",type:"background",target:["background-size"],values:["","auto","contain","cover","100%"]},{display:"background-origin",type:"background",target:["background-origin"],values:["","border-box","padding-box","content-box"]},{display:"background-clip",type:"background",target:["background-clip"],values:["","border-box","padding-box",
"content-box"]}]},{key:"border",className:"maqPropertySection",addCommonPropertiesAtTop:!0,pageTemplate:[{display:"\x3cb\x3e(border)\x3c/b\x3e",type:"multi",target:["border"],values:["","none","1px solid black"]},{display:"show",type:"combo",values:["none","props","sides","all"],id:"properties_show_select",onchange:function(g){if("number"==typeof g){var d=function(d,b,c,g,a){for(;b<=c;b++){var e=dojo.byId(d[b].rowId);b>=g&&b<=a?dojo.removeClass(e,"propertiesSectionHidden"):dojo.addClass(e,"propertiesSectionHidden")}};
if(this.pageTemplate){g=this.pageTemplate[g];var h;g&&g.id&&(h=dojo.byId(g.id).value);dojo.isString(h)&&("none"===h?d(this.pageTemplate,2,20,-1,-1):"sides"===h?d(this.pageTemplate,2,20,2,5):"props"===h?d(this.pageTemplate,2,20,6,8):"all"===h&&d(this.pageTemplate,2,20,9,20))}}}},{display:"border-top",type:"multi",target:["border-top"],values:["","none","1px solid black"],rowClass:"propertiesSectionHidden"},{display:"border-right",type:"multi",target:["border-right"],values:["","none","1px solid black"],
rowClass:"propertiesSectionHidden"},{display:"border-bottom",type:"multi",target:["border-bottom"],values:["","none","1px solid black"],rowClass:"propertiesSectionHidden"},{display:"border-left",type:"multi",target:["border-left"],values:["","none","1px solid black"],rowClass:"propertiesSectionHidden"},{display:"border-width",type:"multi",target:["border-width"],values:["","1px","1em"],rowClass:"propertiesSectionHidden"},{display:"border-style",type:"multi",target:["border-style"],values:["","none",
"solid","dotted","dashed"],rowClass:"propertiesSectionHidden"},{display:"border-color",type:"color",target:["border-color"],rowClass:"propertiesSectionHidden"},{display:"border-top-width",type:"multi",target:["border-top-width"],values:["","1px","1em"],rowClass:"propertiesSectionHidden"},{display:"border-top-style",type:"multi",target:["border-top-style"],values:["","none","solid","dotted","dashed"],rowClass:"propertiesSectionHidden"},{display:"border-top-color",type:"color",target:["border-top-color"],
rowClass:"propertiesSectionHidden"},{display:"border-right-width",type:"multi",target:["border-right-width"],values:["","1px","1em"],rowClass:"propertiesSectionHidden"},{display:"border-right-style",type:"multi",target:["border-right-style"],values:["","none","solid","dotted","dashed"],rowClass:"propertiesSectionHidden"},{display:"border-right-color",type:"color",target:["border-right-color"],rowClass:"propertiesSectionHidden"},{display:"border-bottom-width",type:"multi",target:["border-bottom-width"],
values:["","1px","1em"],rowClass:"propertiesSectionHidden"},{display:"border-bottom-style",type:"multi",target:["border-bottom-style"],values:["","none","solid","dotted","dashed"],rowClass:"propertiesSectionHidden"},{display:"border-bottom-color",type:"color",target:["border-bottom-color"],rowClass:"propertiesSectionHidden"},{display:"border-left-width",type:"multi",target:["border-left-width"],values:["","1px","1em"],rowClass:"propertiesSectionHidden"},{display:"border-left-style",type:"multi",target:["border-left-style"],
values:["","none","solid","dotted","dashed"],rowClass:"propertiesSectionHidden"},{display:"border-left-color",type:"color",target:["border-left-color"],rowClass:"propertiesSectionHidden"},{display:"border-collapse",type:"combo",target:["border-collapse"],values:["","separate","collapse"]},{display:"\x3cb\x3e(border-radius)\x3c/b\x3e",type:"multi",target:["border-radius","-moz-border-radius"],values:["","0px","6px"]},{key:"showDetails",display:"",type:"toggleSection",pageTemplate:[{display:"border-top-left-radius",
type:"multi",target:["border-top-left-radius","-moz-border-radius-topleft"],values:["","0px","6px"],rowClass:"propertiesSectionHidden"},{display:"border-top-right-radius",type:"multi",target:["border-top-right-radius","-moz-border-radius-topright"],values:["","0px","6px"],rowClass:"propertiesSectionHidden"},{display:"border-bottom-right-radius",type:"multi",target:["border-bottom-right-radius","-moz-border-radius-bottomright"],values:["","0px","6px"],rowClass:"propertiesSectionHidden"},{display:"border-bottom-left-radius",
type:"multi",target:["border-bottom-left-radius","-moz-border-radius-bottomleft"],values:["","0px","6px"],rowClass:"propertiesSectionHidden"}]}]},{key:"fontsAndText",className:"maqPropertySection",addCommonPropertiesAtTop:!0,pageTemplate:[{display:"font",type:"text",target:["font"]},{display:"font-family",type:"font",target:["font-family"]},{display:"size",type:"multi",target:["font-size"],values:["","100%","1em","10px","10pt"]},{display:"color",type:"color",target:["color"]},{display:"font-weight",
type:"combo",target:["font-weight"],values:["","normal","bold"]},{display:"font-style",type:"combo",target:["font-style"],values:["","normal","italic"]},{display:"text-decoration",type:"combo",target:["text-decoration"],values:["","none","underline","line-through"]},{display:"text-align",type:"combo",target:["text-align"],values:["","left","center","right","justify"]},{display:"vertical-align",type:"combo",target:["vertical-align"],values:["","baseline","top","middle","bottom"]},{display:"white-space",
type:"combo",target:["white-space"],values:" normal nowrap pre pre-line pre-wrap".split(" ")},{display:"text-indent",type:"multi",target:["text-indent"],values:["","0","1em","10px"]},{display:"line-height",type:"multi",target:["line-height"],values:["","normal","1.2","120%"]}]}]},buildRendering:function(){this.domNode=dojo.doc.createElement("div");dojo.addClass(this.domNode,"propertiesContent");dojo.addClass(this.domNode,"widget");var g;g=""+this._titleBarDiv;g+="\x3cdiv class\x3d'propertiesToolBar' dojoType\x3d'davinci.ve.widgets.WidgetToolBar'\x3e\x3c/div\x3e\x3cdiv dojoType\x3d'davinci.ve.widgets.WidgetProperties'\x3e\x3c/div\x3e\x3cdiv class\x3d'propScrollableArea'\x3e\x3ctable class\x3d'propRootDetailsContainer'\x3e\x3ctr\x3e\x3ctd class\x3d'propPaletteRoot'\x3e";
this.pageTemplate=this.getPageTemplate();for(var d=0;d<this.pageTemplate.length;d++)if(this.pageTemplate[d].title=k[this.pageTemplate[d].key]?k[this.pageTemplate[d].key]:"Key not found",this.pageTemplate[d].pageTemplate)for(var h=0;h<this.pageTemplate[d].pageTemplate.length;h++)this.pageTemplate[d].pageTemplate[h].key&&(this.pageTemplate[d].pageTemplate[h].display+=k[this.pageTemplate[d].pageTemplate[h].key]?k[this.pageTemplate[d].pageTemplate[h].key]:"Key not found");this.domNode.innerHTML=g;this.inherited(arguments)},
_widgetValuesChanged:function(g){var d=this._currentPropSection;if(d){for(var h=!1,k=0;k<this.pageTemplate.length;k++)if(this.pageTemplate[k].key==d){h=!0;break}if(h)for(d=this._getVisibleCascade(k),h=0;h<d.length;h++)d[h]._widgetValuesChanged(g)}},_getVisibleCascade:function(g){if(g)return this.pageTemplate[g].cascade;g=[];var d=this._currentPropSection;if(d)for(var h=0;h<this.pageTemplate.length;h++)if(this.pageTemplate[h].key==d){g=g.concat(this.pageTemplate[h].cascade);break}return g},_updatePaletteValues:function(g){if(this._editor){w.isArray(g)||
(g=[g]);var d=g[0];this._subwidget=(this._widget=d)&&d.subwidget;this.setReadOnly(!(this._widget||this._subwidget));for(var d=this._getVisibleCascade(),h=0;h<d.length;h++)d[h]._widgetSelectionChanged(g)}else console.error("have no editor",g)},_widgetSelectionChanged:function(g){this._updatePaletteValues(g)},_stateChanged:function(){this._updatePaletteValues(this._widget?[this._widget]:[])},_widgetPropertiesChanged:function(g){this._widget||console.error("have no widget");this._widget&&this._widget.type!==
g[0].type||this._updatePaletteValues(g)},_titlePaneOpen:function(g){g=this._getVisibleCascade(g);for(var d=0;d<g.length;d++)g[d]._editorSelected({editor:this._editor})},startup:function(){this.domNode.style.height="100%";this.inherited(arguments);for(var g=0;g<this.pageTemplate.length;g++){var d=this.pageTemplate[g];if(d.pageTemplate)for(var h=0;h<d.pageTemplate.length;h++){var k=d.pageTemplate[h];k.onchange&&k.id&&dojo.connect(dojo.byId(k.id),"onchange",dojo.hitch(d,k.onchange,h))}}for(g=0;g<this.pageTemplate.length;g++)this.pageTemplate[g].cascade=
[];this.setReadOnly(!0);this.onEditorSelected();this.subscribe("/davinci/ui/widgetValuesChanged",dojo.hitch(this,this._widgetValuesChanged));this.subscribe("/davinci/ui/widgetPropertiesChanged",dojo.hitch(this,this._widgetPropertiesChanged));this.subscribe("/davinci/ui/widgetSelected",dojo.hitch(this,this._widgetSelectionChanged))},setReadOnly:function(g){for(var d=0;d<this.pageTemplate.length;d++){var h=this.pageTemplate[d].pageTemplate;if(h)for(var k=0;k<h.length;k++){var b=h[k].widget;b?b.set("readOnly",
g):(b=h[k].domNode)&&dojo.attr(b,"disabled",g)}}},_modelEntryById:function(g){for(var d=0;d<this.pageTemplate.length;d++){var h=this.pageTemplate[d].pageTemplate;if(h)for(var k=0;k<h.length;k++)if(g==h[k].id)return h[k]}},_editorSelected:function(g){this._editor=g.editor;this.onEditorSelected(this._editor);g=this.getParent();var d=g.selectedChildWidget,h=!1,k=dojo.query(".maqPropertySection",g.domNode);this._editor?"davinci.ve.PageEditor"!=this._editor.declaredClass&&"davinci.ve.themeEditor.ThemeEditor"!=
this._editor.declaredClass?k.forEach(function(b){b=dijit.byNode(b);b.controlButton&&(b.controlButton.domNode.style.display="none");b==d&&(h=!0)}):(k.forEach(function(b){b=dijit.byNode(b);b.controlButton&&(b.controlButton.domNode.style.display="")}),"davinci.ve.themeEditor.ThemeEditor"==this._editor.declaredClass&&dojo.query(".page_editor_only",g.domNode).forEach(function(b){b=dijit.byNode(b);b.controlButton&&(b.controlButton.domNode.style.display="none");b==d&&(h=!0)})):(k.forEach(function(b){dijit.byNode(b).controlButton.domNode.style.display=
""}),h=!0);h&&this._selectFirstVisibleTab()},onEditorSelected:function(){this._subWidget=this._widget=null;this._oldClassName&&(this.domNode?dojo.removeClass(this.domNode.parentNode.parentNode,this._oldClassName):console.error("have no dom node !"));if(this._editor)if(this._editor&&this._editor.editorID&&(this._oldClassName=this._editor.editorID.replace(/\./g,"_"),this.domNode?dojo.addClass(this.domNode.parentNode.parentNode,this._oldClassName):console.error("have no dom node !")),this.domNode){for(var g=
this._currentPropSection,d=dojo.query(".propSectionButton",this.domNode),h=0;h<d.length;h++){var k=d[h];this._editor&&this._editor.supports&&this._editor.supports("propsect_"+this.pageTemplate[h].key)?dojo.removeClass(k,"dijitHidden"):(dojo.addClass(k,"dijitHidden"),g==this.pageTemplate[h].key&&p.showRoot())}g=[];for(h=0;h<this.pageTemplate.length;h++)(d=this.pageTemplate[h].cascade)&&(g=g.concat(d));for(h=0;h<g.length;h++)d=g[h],d._editorSelected&&d._editorSelected({editor:this._editor})}else console.error("have no dom node !")},
destroy:function(){this.inherited(arguments)},_destroyContent:function(){var g=this.containerNode||this.domNode;for(dojo.forEach(dojo.query("[widgetId]",g).map(dijit.byNode),function(d){d.destroy()});g.firstChild;)dojo._destroyElement(g.firstChild);dojo.forEach(this._tooltips,function(d){d.destroy()});this._tooltips=void 0},sectionTitleFromKey:function(g){for(var d=0;d<this.pageTemplate.length;d++)if(this.pageTemplate[d].key==g)return this.pageTemplate[d].title},_initialPerspectiveReady:function(){if(!this._alreadySplitIntoMultipleTabs){var g=
this.tabContainer;dojo.addClass(g.domNode,"propRootDetailsContainer");dojo.addClass(g.domNode,"propertiesContent");for(var d=0;d<this.pageTemplate.length;d++){var h=this.pageTemplate[d].key,n=this.pageTemplate[d].title,b=this.pageTemplate[d].className;b||(b="");var c=this._titleBarDiv,c=c+"\x3cdiv class\x3d'propertiesToolBar' dojoType\x3d'davinci.ve.widgets.WidgetToolBar'\x3e\x3c/div\x3e",c=c+("\x3cdiv class\x3d'cascadeBackButtonDiv'\x3e\x3cbutton onclick\x3d'davinci.ve.widgets.HTMLStringUtil.showSection(\""+
h+'","'+n+"\")'\x3e"+n+" "+k.properties+"\x3c/button\x3e\x3c/div\x3e"),h=p.generateTemplate(this.pageTemplate[d]),c=c+h;0==d?(c=this,c.set("title",n),dojo.addClass(c.domNode,b)):c=g.createTab(n,null,null,null,{content:c,"class":b,delegate:this}).add(q,{title:n,content:c,"class":b,delegate:this},null,!0);c._maqPropGroup=this.pageTemplate[d].key;n=dojo.query(".paletteCloseBox",c.domNode);0<n.length&&dojo.connect(n[0],"click",this,function(b){davinci.Workbench.collapsePaletteContainer(b.currentTarget)})}for(n=
0;n<this.pageTemplate.length;n++)if(this.pageTemplate[n].cascade=[],b=this.pageTemplate[n].pageTemplate){for(d=0;d<b.length;d++)c=b[d].id,(h=dijit.byId(c))?b[d].widget=h:(h=dojo.byId(c))&&(b[d].domNode=h);dojo.query("#"+this.pageTemplate[n].id+" .CascadeTop").forEach(function(b){return function(a){a=dijit.byId(a.id);b.cascade.push(a)}}(this.pageTemplate[n]))}dojo.connect(g,"selectChild",this,function(b){"none"!=b.controlButton.domNode.style.display||this._recursiveSelectChildInProcess?b._maqPropGroup&&
(this._currentPropSection=b._maqPropGroup,b=(b=this._editor&&this._editor.getContext?this._editor.getContext():null)&&b.getSelection?b.getSelection():this._widgets,this._updatePaletteValues(b),p._initSection(this._currentPropSection)):(this._recursiveSelectChildInProcess=!0,this._selectFirstVisibleTab(),delete this._recursiveSelectChildInProcess)});this._alreadySplitIntoMultipleTabs=!0}},_workbenchReady:function(){this._updateToolBars()},_updateToolBars:function(){dojo.query(".propertiesToolBar").forEach(function(g){this._editor&&
"davinci.ve.PageEditor"==this._editor.declaredClass?(dojo.removeClass(g,"dijitHidden"),g.style.display=""):dojo.addClass(g,"dijitHidden")}.bind(this))},_selectFirstVisibleTab:function(){for(var g=this.getParent(),d=g.getChildren(),h=0;h<d.length;h++){var k=d[h];if("none"!=k.controlButton.domNode.style.display){g._maqDontExpandCollapse=!0;g.selectChild(k);delete g._maqDontExpandCollapse;break}}}})})},"xideve/widgets/WidgetLite":function(){define(["dojo/_base/declare","dijit/_WidgetBase","xide/mixins/EventedMixin"],
function(u,w,k){return u("xideve/widgets/WidgetLite",[w,k],{buildRendering:function(){this.inherited(arguments);/dojotype/i.test(this.domNode.innerHTML||"")&&(this._startupWidgets=dojo.parser.parse(this.domNode,{noStart:!this._earlyTemplatedStartup,inherited:{dir:this.dir,lang:this.lang}}))},_destroyContent:function(){var k=this.containerNode||this.domNode;for(dojo.forEach(dojo.query("[widgetId]",k).map(dijit.byNode),function(h){h.destroy()});k.firstChild;)dojo._destroyElement(k.firstChild);dojo.forEach(this._tooltips,
function(h){h.destroy()});delete this._tooltips},startup:function(){dojo.forEach(this._startupWidgets,function(k){k&&!k._started&&k.startup&&k.startup()});this.inherited(arguments)}})})},"xideve/manager/WidgetManager":function(){define("dcl/dcl dojo/_base/lang dojo/dom-construct xide/manager/ManagerBase xide/mixins/ReloadMixin xide/types xide/utils xide/factory xide/layout/ContentPane xide/widgets/_MenuMixin2 xaction/Action ./WidgetManagerBlox ./WidgetManagerJS xide/mixins/VariableMixin davinci/ve/metadata xdojo/has!xtrack?xide/interface/Track xide/interface/Route xide/noob xide/data/Reference xide/data/ReferenceMapping xide/mixins/ActionProvider".split(" "),
function(u,w,k,q,h,n,p,g,d,t,G,b,c,C,a,e,A,I,D,Q,K){u([D,Q],{});d=null;e&&(d={track:function(){return!0},getTrackingCategory:function(){return p.capitalize(this.beanNamespace)},getTrackingEvent:function(){return n.ACTION.OPEN},getTrackingLabel:function(a){return this.getMetaValue(a,n.DRIVER_PROPERTY.CF_DRIVER_NAME)},getActionTrackingUrl:function(a){return w.replace(this.breanScheme+"?action\x3d{action}\x26"+this.beanUrlPattern,{action:a})},getTrackingUrl:function(a){return w.replace(this.breanScheme+
"{view}/"+this.beanUrlPattern,{id:a.id,view:"settings"})}});p.mixin(n.ACTION_VISIBILITY,{WIDGET_PROPERTY:"WIDGET_PROPERTY"});var H={onclick:null,ondblclick:null,onmousedown:null,onmouseup:null,onmouseover:null,onmousemove:null,onmouseout:null,onkeypress:null,onkeydown:null,onkeyup:null,onfocus:null,onblur:null,onchange:null};return u([A.dcl,K.dcl,q,h.dcl,b,c,t,C.dcl,e?u(e.dcl,d):I.dcl],{declaredClass:"xideve/manager/WidgetManager",currentContext:null,_currentWidget:null,visibility:n.ACTION_VISIBILITY.WIDGET_PROPERTY,
onReloaded:function(){},onLibraryContainerCreated:function(a){},onContextReady:function(a){},_completeEventInfo:function(a){var b=a.target||null,c=a.widget?a.target.getContext():null;a.editor=c.editor?c.editor:c._edit_context.editor;var e=c?c.getGlobal():null,c=c.appContext,d=c.application,g=b.domNode||b;b.isDijitWidget&&(g=b.dijitWidget.domNode);a.appSettings=d.settings;a.appContext=c;a.app=d;a.global=e;a.node=g;a.widgetContext=b;a.dijitWidget=b.isDijitWidget?b.dijitWidget:null;return a},onWidgetPropertyChanged:function(a){a=
this._completeEventInfo(a);var b=a.widgetProperty,c=a.node,e=a.dijitWidget,d=b in H,g=a.global;b&&c&&d&&e&&e.on&&(c.removeAttribute(b),c[b]&&c.removeEventListener(b,c[b]),c[b]=null,g.dojo.setAttr(a.node,a.widgetProperty,""),g.dojo.setAttr(a.node,a.widgetProperty,a.value))},onWidgetPropertyRendered:function(a){if(!a.wmHandled){a.wmHandled=!0;var b=a.row;switch(b.type){case "widgetState":this.onStatePropertyRendered(b,a.node,a.view,a.row);break;case "iconClass":this.onIconClassPropertyRendered(b,a.node,
a.view,a.row);break;case "state":this.onEventPropertyRendered2(b,a.node,a.view,a.row)}}},onEventPropertyRendered2:function(){},onIconClassPropertyRendered:function(a,b,c,e){if(!b.iconPicker){var d=$(b).iconpicker({selectedCustomClass:"label label-success",showFooter:!1});b.iconPicker=d;d.on("iconpickerSelected",function(a){var b={};b.iconClass="fa "+a.iconpickerValue;a=new davinci.ve.commands.ModifyCommand(d._widget,b,null);dojo.publish("/davinci/ui/widgetPropertiesChanges",[{source:d._context.editor_id,
command:a}])})}c._widget&&(p.getNode(c._widget),b.iconPicker._widget=c._widget,b.iconPicker._context=c.context)},onStatePropertyRendered:function(a,b,c,e){if(!b._selectize){var d=$(b).selectize({value:"",delimiter:",",persist:!1,maxItems:1,create:!0,sortField:"text"}).data().selectize;b._selectize=d;d.on("change",function(){var a=d.getValue();"None"===a&&(a="");var b={};b.state=a;a=new davinci.ve.commands.ModifyCommand(d._widget,b,null);dojo.publish("/davinci/ui/widgetPropertiesChanges",[{source:d._context.editor_id,
command:a}])})}b._selectize.setValue(["None"],!0);c._widget&&(a=p.getNode(c._widget))&&(a.getStates&&(e=a.getStates(),_.each(e,function(a){b._selectize.addOption({value:a.name,text:a.name})})),b._selectize.addOption({value:"None",text:"None"}),b._selectize.setValue(a.state,!0),b._selectize._widget=c._widget,b._selectize._context=c.context)},defaultNumberActions:function(a){var b=this,c=G.createDefault("Javascript","fa-code","Widget/Bind to Javascript","widgetPropertyAction",function(a,c,e,d,g){b.onJavascript(g.context)});
c.setVisibility(this.visibility,{});c.context=a;var e=G.createDefault("XBlox","fa-play-circle-o","Widget/Bind to XBlox","widgetPropertyAction",function(a,c,e,d,g){b.onXBlox(g.context)});e.setVisibility(n.ACTION_VISIBILITY.WIDGET_PROPERTY,{});e.context=a;return[c,e]},_showContextActions:function(a,b,c,e){},_createContextMenu:function(a,b,c,e){},doWidgetPropWizard:function(a,b,c,e,d){this._createContextMenu(e,b,c,d)},renderBlockWidget:function(a,b,c){},onNumberPropertyRendered:function(a,b,c,e){},onContextLoaded:function(a){this.currentContext=
a},onEventPropertyRendered:function(a,b,c){},onEventSelectionRendered:function(a){},onSelectionChanged:function(a){},onWidgetSelected:function(a){},renderFileWidget:function(a,b,c){var e=b;b.parentNode&&b.parentNode.nextSibling&&-1!=b.parentNode.nextSibling.className.indexOf("propertyExtra")&&(e=b.parentNode.nextSibling);var d=g.createButton(k.create("div"),"el-icon-folder-open","elusiveButton","","",function(){this.onSelectFile(b,a,c)}.bind(this),this);dojo.place(d.domNode,e,"after")},init:function(){this.subscribe("/davinci/ui/onSelectionChanged",
this.onSelectionChanged);this.subscribe("/davinci/ui/widgetSelected",this.onWidgetSelected);this.subscribe("/davinci/ui/context/loaded",this.onContextLoaded);this.subscribe([n.EVENTS.WIDGET_PROPERTY_RENDERED,n.EVENTS.ON_EVENT_SELECTION_RENDERED,n.EVENTS.ON_WIDGET_PROPERTY_CHANGED,n.EVENTS.ON_LIBRARY_CONTAINER_CREATED,n.EVENTS.ON_CONTEXT_READY,n.EVENTS.ON_RENDER_WELCOME_GRID_GROUP]);this.registerRoutes()},handleRoute:function(a){switch(a.parameters.view){case "settings":return this.openItemSettings(this.getDriverById(a.parameters.id))}},
registerRoutes:function(){this.getContext().registerRoute({id:"Scene",path:"scene://{view}/{id}",schemes:["scenes"],delegate:this});this.getContext().registerRoute({id:"New Scene",path:"File/New Scene",schemes:[""],delegate:this})},onRenderWelcomeGridGroup:function(a){var b=this.getContext(),c=b.getTrackingManager();b.getRouter();var e=a.store,d=this;switch(a.item.group){case "New":c=[];c.push(this.createAction({label:"New Scene",command:"File/New Scene",icon:"fa-magic",mixin:{addPermission:!0}}));
_.map(c,function(a){return e.putSync(p.mixin(a,{url:a.command,parent:"New",group:null,label:a.title,owner:d,runAction:function(a,b,c){return DriverTreeView.prototype.runAction.apply(DriverTreeView.prototype,[{command:this.url},b,c])}}))});break;case "Recent":c&&(e.putSync({group:"Scenes",label:"Scenes",url:"Scenes",parent:"Recent",directory:!0}),a=c.filterMin({category:"Driver"},"counter",1),a=c.most(null,a),c.last(a))}},getRouteRenderParams:function(a){return{icon:null}},routeToReference:function(a){return this.getDriverById(a?
a.parameters.id:null)},referenceToRoute:function(a){return w.replace(this.breanScheme+"{view}/"+this.beanUrlPattern,{id:a.id,view:"settings"})}})})},"xideve/manager/WidgetManagerBlox":function(){define(["dcl/dcl","xide/types","xide/utils","xide/views/CIActionDialog"],function(u,w,k,q){return u(null,{declaredClass:"xideve/manager/WidgetManagerBlox",_removeEventHandlers:function(h,k){},_setEventHandler:function(h,k,p){if(h._attachEvents){var g=k.replace("on","");_.each(h._attachEvents,function(d){d.type===
g&&d.remove();h._attachEvents.remove(d)});if(p){var d=new Function("{"+p+"; }");p=h.on(g,function(g){d.call(h,g)});p.type=k;h._attachEvents.push(p)}}},onModifiedXBLOX:function(h){},openBloxWizard:function(h){var n=this;h=this._completeEventInfo(h);var p="min.xblox",g="workspace";if(h.appSettings&&h.appSettings.xbloxScripts&&0<h.appSettings.xbloxScripts.length)var d=h.appSettings.xbloxScripts[0],p=d.path.replace("./",""),g=d.mount;var t=null;this.ctx.getBlockManager().load(g,p).then(function(d){n.ctx.blockManager.ignoreItemSelection=
!0;var b=dojo.subscribe("onItemSelected",function(a){t=a.item}),c=(""+h.value).split(","),u=k.replaceAll("'","",c[1]),c=dojo.fromJson(c[3]);t=d.getBlockById(u);(new q({title:"Select Block and override inputs",style:"width:800px;min-height:600px;",resizeable:!0,delegate:{onOk:function(a,c){a=k.getCIInputValueByName(c,"Settings");if(t){n.ctx.blockManager.ignoreItemSelection=!1;c=k.buildPath(g,p,!1);if(t){var e="";a&&(e=","+a);a="runBlox('"+c+"','"+t.id+"',this"+e+")";n._setEventHandler(h.dijitWidget||
h.node,h.widgetProperty,a);h.editor.setDirty(!0);h.widget.set("value",a);n.onModifiedXBLOX(h,t)}b.remove()}}},cis:[k.createCI("Block",w.ECIType.BLOCK_REFERENCE,"",{group:"Block",delegate:null,showDialog:!1,scope:d,block:t}),k.createCI("Settings",w.ECIType.BLOCK_SETTINGS,"",{group:"Settings",scope:d,block:t,settings:c})]})).show()})},onXBlox:function(h){var k=h.row.widget,p="";k||(k=dijit.byId(h.row.id))&&(p=k.get("value"));!k&&(k=dojo.byId(h.row.id))&&(p=k.value);this.openBloxWizard({owner:this,delegate:this,
widget:k,value:p,target:h.widget,widgetProperty:h.row.display,meta:{context:h}})}})})},"xideve/manager/WidgetManagerJS":function(){define(["dcl/dcl","xide/types","xide/utils","xide/views/CIActionDialog"],function(u,w,k,q){return u(null,{declaredClass:"xideve/manager/WidgetManagerJS",onReloaded:function(){console.error("reloadex2:")},onModifiedJS:function(h){},_createView:function(h,n){var p=this,g=n.target||null,d=n.widget?n.target.getContext():null,t=d?d.getGlobal():null;(new q({title:"Javascript",
style:"width:800px;min-height:600px;",resizeable:!0,delegate:{onOk:function(g,b){g=k.getCIInputValueByName(b,"Expression");d.editor.setDirty(!0);n.widget.set?n.widget.set("value",g):null!=n.widget.value&&(n.widget.value=g,n.widget.owner._onChange({target:n.widget.pageIndex}));p.onModifiedJS(g,n)}},cis:[k.createCI("Settings",w.ECIType.STRING,h,{group:"Settings"}),k.createCI("Expression",w.ECIType.EXPRESSION_EDITOR,h,{group:"Script",delegate:{runExpression:function(d,b,c){var h=null;if(t.runx)try{h=
t.runx(g,d)}catch(a){if(c){c(""+a);return}}else h=t.eval.call(g,d);b&&b("Expression "+d+" evaluates to; "+h)}}})]})).show()},openJSWizard:function(h){this._createView(h.value,h)},onJavascript:function(h){var k=h.row.widget,p="";k||(k=dijit.byId(h.row.id))&&(p=k.get("value"));!k&&(k=dojo.byId(h.row.id))&&(p=k.value);this.openJSWizard({owner:this,delegate:this,widget:k,value:p,target:h.widget,meta:{context:h}})}})})},"xideve/manager/ContextManager":function(){define("dcl/dcl dojo/Deferred xide/manager/ManagerBase xide/mixins/VariableMixin xide/mixins/ReloadMixin xide/types xide/utils xide/mixins/EventedMixin davinci/ve/widget xide/manager/ServerActionBase xdojo/has xaction/ActionProvider xide/lodash xide/$".split(" "),
function(u,w,k,q,h,n,p,g,d,t,G,b,c,C){return u([k,t,q.dcl,h.dcl,b.dcl],{declaredClass:"xideve/manager/ContextManager",serviceClass:"XIDE_VE_Service",singleton:!0,contexts:[],variableDelimiters:{begin:"%%",end:"%%"},onReloaded:function(){},getViewUrl:function(a,b,c){a||console.error("invalid item!");a=this.ctx.getResourceManager().getVariable("ROOT")+"xideve/preview/"+a.mount+"/"+a.path.replace("./","")+(G("debug")?"?debug\x3dtrue":"");a+=-1===a.indexOf("?")?"?":"\x26";return a+="userDirectory\x3d"+
encodeURIComponent(this.ctx.getUserDirectory())},viewFile:function(a){a={path:"delite.html",mount:"workspace"};this.getViewUrl(a)},onBuildDojoConfig:function(a){a&&a.data&&a.data&&(a=a.data,a.baseUrl&&(a.baseUrl=this.resolve(a.baseUrl)))},onSetDojoUrl:function(a){a&&a.data&&a.data&&a.data.dojoUrl&&(a.data.dojoUrl=this.resolve("%%XIDEVE_DOJO_URL%%"))},onSetSourceData:function(a){a.context.widgetsReadyDfd&&(delete a.context.widgetsReadyDfd,a.context.widgetsReadyDfd=null);a.context.widgetsReadyDfd=new w},
onGetLoaderPackages:function(a){var b=dojo.baseUrl,c=function(a,c,e,d){a.packages.push({name:c,location:!0!==d?b+"/"+(e||"")+c:b+"/"+c+"-release/"+c})};c(a,"xapp");c(a,"dijit");c(a,"dojox");c(a,"xblox");c(a,"dstore");c(a,"xide");c(a,"xfile");c(a,"xwire");c(a,"xlang");c(a,"xaction");c(a,"xgrid");c(a,"xnode");c(a,"delite","ibm-js/");c(a,"deliteful","ibm-js/");c(a,"decor","ibm-js/");c(a,"dpointer","ibm-js/");c(a,"dcl","ibm-js/");c(a,"requirejs-dplugins","ibm-js/");c(a,"requirejs-domready","ibm-js/");
c(a,"requirejs-text","ibm-js/");c(a,"jquery","ibm-js/")},onContextLoaded:function(a){this.currentContext=a;var b=a.global,c=this;b._=window._;b.Velocity=window.Velocity;b.delegate=this;b.bootx&&b.bootx({delegate:this},w).then(function(b){a.appContext=b.context;c.onContextReady(a,b.context,b.settings)},function(a){console.error("error global.bootx "+a,a)})},onContextReady:function(a,b,c){var e=a.global,d=a.getDocument(),g=this;b.fileManager=this.ctx.fileManager;b.resourceManager=this.ctx.resourceManager;
b.driverManager=g.ctx.driverManager;b.deviceManager=g.ctx.deviceManager;b.nodeServiceManager=g.ctx.nodeServiceManager;b.blockManager=g.ctx.blockManager;b.delegate={isDesignMode:function(){return a.isDesignMode()},getBlockSettings:function(){return a.getBlockSettings()},getEditorContext:function(){return a}};c.delegate=g;c.xbloxScripts=[];b.initVe();b.notifier.publish("onContextReady",b);b.notifier.publish("DevicesConnected");if(c.xbloxScripts){var h=function(){g.ctx.getBlockManager().loadFiles(c.xbloxScripts).then(function(h){c.didXBLOX=
!0;var l={context:a,appContext:b,appSettings:c,ctx:g.ctx,global:e,document:d,blockScopes:h};k.onSceneBlocksLoaded(l);var p=k.item._S,q=k.item.getParent();b.settings=c;b.onReady(c);p.resetQueryLog();p._loadPath(q.path,!0).then(function(){"."===q.path&&p.resetQueryLog();g.publish(n.EVENTS.ON_CONTEXT_READY,l);g.onSceneBlocksLoaded(l)});b.__didv||(b.__didv=!0)})},k=a.getVisualEditor();if(0==c.xbloxScripts.length){var q=a.getVisualEditor().item;if(q){var l=p.replaceAll("/","",q.mount),t=p.getFileExtension(q.path),
q=q.path.replace("."+t,".xblox");c.xbloxScripts.push({mount:l,path:q});this.ctx.getFileManager().mkfile(l,q,JSON.stringify({blocks:[],variables:[]},null,2)).then(function(){h()})}}}b.application.run(c);this.publish(n.EVENTS.ON_APP_READY,{context:a,application:b.application,delegate:this});for(l=0;l<this.contexts.length;l++)if(q=this.contexts[l],q.context==a)return;this.contexts.push({context:a,appContext:b,global:e,doc:d})},onBuildHeader:function(a){if(a&&a.data&&a.data.styleSheets)for(var b=a.data.styleSheets,
c=0;c<b.length;c++)a.data.styleSheets[c]=this.resolve(b[c])},onModuleUpdated:function(a){c.each(this.contexts,function(b){b.appContext.onModuleUpdated(a)},this)},onDriverVariableChanged:function(a){c.each(this.contexts,function(b){b.context.isDesignMode()||b.appContext.publish("onDriverVariableChanged",a)},this)},onContextDestroyed:function(a){var b=c.find(this.contexts,{context:a});b&&(a.systemEvents&&c.each(a.systemEvents,function(a){a&&a.remove?a.remove():console.error("have invalid handle!")}),
this.contexts.remove(b))},getVariable:function(a,b,c){b=this.ctx.getDeviceManager();var e=b.getDeviceById(a),d=null;if(!e)return null;(a=e.driver)&&a.blockScope&&(a=a.blockScope);!a&&e&&(b=b.getMetaValue(e,n.DEVICE_PROPERTY.CF_DEVICE_DRIVER),a=this.ctx.getBlockManager().getScope(b),d=a.getVariableById(b+"/"+c));return d},getBlock:function(a){return this.ctx.getDeviceManager().getBlock(a)},wireNode:function(a,b,d,h,k,q){var e=this,t=null,w=null;if(q&&b===n.EVENTS.ON_DRIVER_VARIABLE_CHANGED)var l=q.params[2],
t=function(a){a=a.item;var b=e.getBlock(l);return b&&a&&b.id===a.id||a.id===l?!1:!0},w=function(a,b){a.override={variables:{value:b.item.value}}};if(a)if(d)if(b)if(c.isString(b))if(h.systemEvents||(h.systemEvents=[]),"BODY"===a.tagName&&a._destroyHandles&&(a._destroyHandles(),delete a.__setup),a.__setup||(a.__setup={}),a.__setup[d.id])console.error("did wire "+d.name+" to "+a.id+"_"+a["wire id"],a);else{a.__setup[d.id]=!0;a["wire id"]||(a["wire id"]=p.createUUID());d&&a&&(d.context=a,d._targetReference=
a);var u=function(a,b,c,d){!("load"!==a&&h&&h.isDesignMode&&h.isDesignMode()||t&&t(b)||c._destroyed)&&c.enabled&&c&&d&&(c.context=d,c._targetReference=d,w&&w(c,b),c.solve(c.scope,{highlight:!0,args:[b]}))};a.subscribe||p.mixin(a,g.prototype);var v=a.domNode||a;k=b;q=a.declaredClass||a.startup;var m=null!=a.on&&null!=a["on"+p.capitalize(k)],F=null,A=null!=v.render&&null!=v.on;if(q&&a.baseClass&&-1!=a.baseClass.indexOf("dijitContentPane")||null!=a.render||null!=a.on)q=!1;v&&(A||m&&q?(v=a,A?p.isSystemEvent(b)?
F=v.subscribe(b,function(c){u(b,c,d,a)}.bind(this),a):(p.isNativeEvent(b)&&(b=b.replace("on","")),F=v.on(b,function(c){var e=c.target.value;"checked"in c.target&&(e=c.target.checked);u(b,e,d,a)}.bind(this))):(k="on"+p.capitalize(k),a[k]=function(a,c){!0!==v.ignore&&u(b,a)})):p.isSystemEvent(b)?(k=function(c){u(b,c,d,a)}.bind(this),F=a.subscribe(b,k),d._on("destroy",function(){console.error("block destroyed");F.remove()})):F=a.__on(v,b,function(c){u(b,c,d,a)}),F?(a.addHandle&&a.addHandle(b,F),d._widgetHandles||
(d._widgetHandles=[]),d._widgetHandles.push(F)):console.error("wire widget: have no handle",a))}else console.error("event not string ",b);else console.error("have no event");else console.error("have no block for event "+b);else console.error("have no widget for event "+b)},wireWidget:function(a,b,c,d,g,h,k,p,n){b=c.getBlocks({group:k});for(c=0;c<b.length;c++)this.wireNode(d.domNode,h,b[c],a,p,n)},wireWidget2:function(a,b,c,g,h){for(var e=c.allGroups(),k=[],n=0;n<e.length;n++){var q=e[n],l;var t=l=
null,v=(q||"").split("__"),m=[];1==v.length&&(l=v[0],t="body",a.rootWidget.domNode.runExpression=a.global.runExpression);if(2==v.length){var u=void 0;-1!==v[1].indexOf("://")?(l=v[0],t="body",u=v[1]):(l=v[1],t=v[0]);u&&(m=p.parse_url(u),m=p.urlArgs(m.host),m=[m.device.value,m.driver.value,u])}3==v.length&&(l=v[1],t=v[0],u=v[2],m=p.parse_url(u),m=p.urlArgs(m.host),m=[m.device.value,m.driver.value,u]);5==v.length&&(l=v[1],t=v[0],m=[v[2],v[3],v[4]]);l&&t?(v=d.byId(t),"body"===t&&(v=a.rootWidget),l={event:l,
widgetId:t,widget:v,params:m}):l=null;l?l.widget==h&&(this.wireWidget(a,b,c,l.widget,l.widget.domNode,l.event,q,g,l),l.widget&&-1==k.indexOf(l.widget)&&k.push(l.widget)):console.error("invalid params for group "+q)}for(n=0;n<k.length;n++){h=k[n];h.domNode&&(h=h.domNode);if(h.__didEmitLoad)break;h.__didEmitLoad=!0;h.emit&&h.emit("load",h)}},wireScope:function(a,b,c,g){for(var e=c.allGroups(),h=this,k=[],q=function(b){var c=null,e=null;b=(b||"").split("__");var g=[];1==b.length&&(c=b[0],e="body",a.rootWidget.domNode.runExpression=
a.global.runExpression);if(2==b.length){var h;-1!==b[1].indexOf("://")?(c=b[0],e="body",h=b[1]):(c=b[1],e=b[0]);h&&(g=p.parse_url(h),g=p.urlArgs(g.host),g=[g.device.value,g.driver.value,h])}3==b.length&&(c=b[1],e=b[0],h=b[2],g=p.parse_url(h),g=p.urlArgs(g.host),g=[g.device.value,g.driver.value,h]);5==b.length&&(c=b[1],e=b[0],g=[b[2],b[3],b[4]]);return c&&e?(b=d.byId(e),"body"===e&&(b=a.rootWidget),{event:c,widgetId:e,widget:b,params:g}):null},t=function(a){a._on(n.EVENTS.ON_ITEM_REMOVED,function(b){try{if(a._widgetHandles){var c=
a._widgetHandles;for(b=0;b<c.length;b++)c[b].remove&&c[b].remove();delete a._widgetHandles}}catch(M){console.error("troubble!"+M,M)}},this)},l=0;l<e.length;l++){var u=e[l],v=q(u);if(v){v.widget&&this.wireWidget(a,b,c,v.widget,v.widget.domNode,v.event,u,g,v);for(var u=c.getBlocks({group:u}),m=0;m<u.length;m++)t(u[m]);v.widget&&-1==k.indexOf(v.widget)&&k.push(v.widget)}else console.error("invalid params for group "+u)}for(l=0;l<k.length;l++){b=k[l];b.domNode&&(b=b.domNode);if(b.__didEmitLoad)return;
b.__didEmitLoad=!0;"BODY"===b.nodeName?C(b.nodeName).trigger("load"):b.emit&&b.emit("load",b)}c._on(n.EVENTS.ON_ITEM_REMOVED,function(a){});c._on(n.EVENTS.ON_ITEM_ADDED,function(b){var c=q(b.item.group);c&&c.widget&&(h.wireNode(c.widget.domNode,c.event,b.item,a,c),t(b.item))})},onSceneBlocksLoaded:function(a){var b=a.context,c=a.appContext,d=a.global,g=a.blockScopes,h=this;a.context.widgetsReadyDfd&&a.context.widgetsReadyDfd.then(function(){if(!c.didWireWidgets){c.didWireWidgets=!0;for(var a=0;a<
g.length;a++){var e=g[a];e.global=d;e.document=b.getDocument();e.editorContext=b;e.appContext=c;h.wireScope(b,h.ctx,e,c)}}})},onItemRemoved:function(a){},init:function(){this.subscribe("/davinci/ui/context/loaded",this.onContextLoaded);this.subscribe([n.EVENTS.ON_GET_LOADER_PACKAGES,n.EVENTS.ON_BUILD_HEADER,n.EVENTS.ON_BUILD_DOJO_CONFIG,n.EVENTS.ON_SET_SOURCE_DATA,n.EVENTS.ON_SET_DOJO_URL,n.EVENTS.ON_MODULE_UPDATED,n.EVENTS.ON_CONTEXT_DESTROYED,n.EVENTS.ON_DRIVER_VARIABLE_CHANGED,n.EVENTS.ON_ITEM_REMOVED])}})})}}});
define("xideve/xideve",["dojo","dijit","dojox"],function(u,w,k){});
//# sourceMappingURL=xideve.js.map