//>>built
(function(n,m){var k,h=function(){},d=function(a){for(var e in a)return 0;return 1},b={}.toString,c=function(a){return"[object Function]"==b.call(a)},g=function(a){return"[object String]"==b.call(a)},p=function(a){return"[object Array]"==b.call(a)},a=function(a,e){if(a)for(var b=0;b<a.length;)e(a[b++])},e=function(a,e){for(var b in e)a[b]=e[b];return a},q=function(a,b){return e(Error(a),{src:"dojoLoader",info:b})},u=1,w=function(){return"_"+u++},r=function(a,e,b){return ha(a,e,b,0,r)},v=this,x=v.document,
A=x&&x.createElement("DiV"),z=r.has=function(a){return c(y[a])?y[a]=y[a](v,x,A):y[a]},y=z.cache=m.hasCache;z.add=function(a,e,b,c){(void 0===y[a]||c)&&(y[a]=e);return b&&z(a)};z.add("host-webworker","undefined"!==typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope);z("host-webworker")&&(e(m.hasCache,{"host-browser":0,dom:0,"dojo-dom-ready-api":0,"dojo-sniff":0,"dojo-inject-api":1,"host-webworker":1,"dojo-guarantee-console":0}),m.loaderPatch={injectUrl:function(a,e){try{importScripts(a),e()}catch(xa){console.error(xa)}}});
for(var B in n.has)z.add(B,n.has[B],0,1);r.async=1;var C=z("csp-restrictions")?function(){}:new Function("return eval(arguments[0]);");r.eval=function(a,e){return C(a+"\r\n//# sourceURL\x3d"+e)};var E={},F=r.signal=function(e,b){e=E[e];a(e&&e.slice(0),function(a){a.apply(null,p(b)?b:[b])})},G=r.on=function(a,e){var b=E[a]||(E[a]=[]);b.push(e);return{remove:function(){for(var a=0;a<b.length;a++)if(b[a]===e){b.splice(a,1);break}}}},D=[],H={},J=[],Q={},N=r.map={},O=[],P={},L="",K={},M={};B={};var U=
0,V=function(a,e){e=!1!==e;var b,c,g,q;for(b in M)c=M[b],(g=b.match(/^url\:(.+)/))?K["url:"+Ja(g[1],a)]=c:"*now"==b?q=c:"*noref"!=b&&(g=ea(b,a,!0),K[g.mid]=K["url:"+g.url]=c);q&&q(ia(a));e&&(M={})},I=function(a){return a.replace(/([\.$?*|{}\(\)\[\]\\\/\+^])/g,function(a){return"\\"+a})},T=function(a,e){e.splice(0,e.length);for(var b in a)e.push([b,a[b],new RegExp("^"+I(b)+"(/|$)"),b.length]);e.sort(function(a,e){return e[3]-a[3]});return e},Z=function(e,b){a(e,function(a){b.push([g(a[0])?new RegExp("^"+
I(a[0])+"$"):a[0],a[1]])})},S=function(a){var b=a.name;b||(b=a,a={name:b});a=e({main:"main"},a);a.location=a.location?a.location:b;a.packageMap&&(N[b]=a.packageMap);a.main.indexOf("./")||(a.main=a.main.substring(2));Q[b]=a},W=[],R=function(b,c,q){for(var v in b){"waitSeconds"==v&&(r.waitms=1E3*(b[v]||0));"cacheBust"==v&&(L=b[v]?g(b[v])?b[v]:(new Date).getTime()+"":"");if("baseUrl"==v||"combo"==v)r[v]=b[v];b[v]!==y&&(r.rawConfig[v]=b[v],"has"!=v&&z.add("config-"+v,b[v],0,c))}r.baseUrl||(r.baseUrl=
"./");/\/$/.test(r.baseUrl)||(r.baseUrl+="/");for(v in b.has)z.add(v,b.has[v],0,c);a(b.packages,S);for(var p in b.packagePaths)a(b.packagePaths[p],function(a){var e=p+"/"+a;g(a)&&(a={name:a});a.location=e;S(a)});T(e(N,b.map),O);a(O,function(a){a[1]=T(a[1],[]);"*"==a[0]&&(O.star=a)});T(e(H,b.paths),J);Z(b.aliases,D);if(c)W.push({config:b.config});else for(v in b.config)c=fa(v,q),c.config=e(c.config||{},b.config[v]);b.cache&&(V(),M=b.cache,V(0,!!b.cache["*noref"]));F("config",[b,r.rawConfig])};z("dojo-cdn");
var Y=x.getElementsByTagName("script");k=0;for(var X,ba,da,ga;k<Y.length;)if(X=Y[k++],(da=X.getAttribute("src"))&&(ga=da.match(/(((.*)\/)|^)dojo\.js(\W|$)/i))&&(ba=ga[3]||"",m.baseUrl=m.baseUrl||ba,U=X),da=X.getAttribute("data-dojo-config")||X.getAttribute("djConfig"))B=r.eval("({ "+da+" })","data-dojo-config"),U=X;r.rawConfig={};R(m,1);z("dojo-cdn")&&((Q.dojo.location=ba)&&(ba+="/"),Q.dijit.location=ba+"../dijit/",Q.dojox.location=ba+"../dojox/");R(n,1);R(B,1);var ja=function(e){ya(function(){a(e.deps,
Ka)})},ha=function(a,b,c,v,u){var d;if(g(a)){if((d=fa(a,v,!0))&&d.executed)return d.result;-1===a.indexOf("/component")&&console.error("cant get module "+a);throw q("undefinedModule",a);}p(a)||(R(a,0,v),a=b,b=c);if(p(a))if(a.length){c="require*"+w();for(var x,A=[],k=0;k<a.length;)x=a[k++],A.push(fa(x,v));d=e(pa("",c,0,""),{injected:2,deps:A,def:b||h,require:v?v.require:r,gc:1});P[d.mid]=d;ja(d);var z=ma&&!0;ya(function(){za(d,z)});d.executed||aa.push(d);qa()}else b&&b();return u},ia=function(a){if(!a)return r;
var b=a.require;b||(b=function(e,c,g){return ha(e,c,g,a,b)},a.require=e(b,r),b.module=a,b.toUrl=function(b){return Ja(b,a)},b.toAbsMid=function(b){return Aa(b,a)},b.undef=function(b){r.undef(b,a)});return b},aa=[],na=[],ca={},Ra=function(a){a.injected=1;ca[a.mid]=1;a.url&&(ca[a.url]=a.pack||1);La()},oa=function(a){a.injected=2;delete ca[a.mid];a.url&&delete ca[a.url];d(ca)&&ra()},Sa=r.idle=function(){return!na.length&&d(ca)&&!aa.length&&!ma},sa=function(a,b){if(b)for(var e=0;e<b.length;e++)if(b[e][2].test(a))return b[e];
return 0},Ma=function(a){var b=[],e,c;for(a=a.replace(/\\/g,"/").split("/");a.length;)e=a.shift(),".."==e&&b.length&&".."!=c?(b.pop(),c=b[b.length-1]):"."!=e&&b.push(c=e);return b.join("/")},pa=function(a,b,e,c){return{pid:a,mid:b,pack:e,url:c,executed:0,def:0}},ta=function(b,e,g,v,r,p,u,d,w,x){var h,A,k,y;y=/^\./.test(b);if(/(^\/)|(\:)|(\.js$)/.test(b)||y&&!e)return pa(0,b,0,b);b=Ma(y?e.mid+"/../"+b:b);if(/^\./.test(b))throw q("irrationalPath",b);x||y||!p.star||(k=sa(b,p.star[1]));!k&&e&&(k=(k=sa(e.mid,
p))&&sa(b,k[1]));k&&(b=k[1]+b.substring(k[3]));e=(ga=b.match(/^([^\/]+)(\/(.+))?$/))?ga[1]:"";(h=g[e])?b=e+"/"+(A=ga[3]||h.main):e="";var C=0;a(d,function(a){var e=b.match(a[0]);e&&0<e.length&&(C=c(a[1])?b.replace(a[0],a[1]):a[1])});if(C)return ta(C,0,g,v,r,p,u,d,w);if(g=v[b])return w?pa(g.pid,g.mid,g.pack,g.url):v[b];v=(k=sa(b,u))?k[1]+b.substring(k[3]):e?h.location+"/"+A:z("config-tlmSiblingOfDojo")?"../"+b:b;/(^\/)|(\:)/.test(v)||-1!==v.indexOf("http")||(v=r+v);return pa(e,b,h,Ma(v+".js"))},ea=
function(a,b,e){return ta(a,b,Q,P,r.baseUrl,O,J,D,void 0,e)},ka=function(a,b,e){return a.normalize?a.normalize(b,function(a){return Aa(a,e)}):Aa(b,e)},ua=0,fa=function(a,b,e){var c,g;(c=a.match(/^(.+?)\!(.*)$/))?(g=fa(c[1],b,e),5!==g.executed||g.load||Ba(g),g.load?(c=ka(g,c[2],b),a=g.mid+"!"+(g.dynamic?++ua+"!":"")+c):(c=c[2],a=g.mid+"!"+ ++ua+"!waitingForPlugin"),a={plugin:g,mid:a,req:ia(b),prid:c}):a=ea(a,b);return P[a.mid]||!e&&(P[a.mid]=a)},Aa=r.toAbsMid=function(a,b){return ea(a,b).mid},Ja=r.toUrl=
function(a,b){b=ea(a+"/x",b);var e=b.url;return Na(0===b.pid?a:e.substring(0,e.length-5))},Oa={injected:2,executed:5,def:3,result:3};ba=function(a){return P[a]=e({mid:a},Oa)};var Ta=ba("require"),Ua=ba("exports"),Va=ba("module"),va={},Ca=0,Ba=function(a){var b=a.result;a.dynamic=b.dynamic;a.normalize=b.normalize;a.load=b.load;return a},Wa=function(b){var c={};a(b.loadQ,function(a){var g=ka(b,a.prid,a.req.module),q=b.dynamic?a.mid.replace(/waitingForPlugin$/,g):b.mid+"!"+g,g=e(e({},a),{mid:q,prid:g,
injected:0});P[q]||Pa(P[q]=g);c[a.mid]=P[q];oa(a);delete P[a.mid]});b.loadQ=0;var g=function(a){for(var b=a.deps||[],e=0;e<b.length;e++)(a=c[b[e].mid])&&(b[e]=a)},q;for(q in P)g(P[q]);a(aa,g)},Da=function(a){r.trace("loader-finish-exec",[a.mid]);a.executed=5;a.defOrder=Ca++;a.loadQ&&(Ba(a),Wa(a));for(k=0;k<aa.length;)aa[k]===a?aa.splice(k,1):k++;/^require\*/.test(a.mid)&&delete P[a.mid]},Xa=[],za=function(a,b){if(4===a.executed)return r.trace("loader-circular-dependency",[Xa.concat(a.mid).join("-\x3e")]),
!a.def||b?va:a.cjs&&a.cjs.exports;if(!a.executed){if(!a.def)return va;var e=a.mid,g=a.deps||[],v,p=[],u=0;for(a.executed=4;v=g[u++];){v=v===Ta?ia(a):v===Ua?a.cjs.exports:v===Va?a.cjs:za(v,b);if(v===va)return a.executed=0,r.trace("loader-exec-module",["abort",e]),va;p.push(v)}r.trace("loader-run-factory",[a.mid]);b=a.def;var d;if(z("config-dojo-loader-catches"))try{d=c(b)?b.apply(null,p):b}catch(Qa){F("error",a.result=q("factoryThrew",[a,Qa]))}else d=c(b)?b.apply(null,p):b;a.result=void 0===d&&a.cjs?
a.cjs.exports:d;Da(a)}return a.result},ma=0,ya=function(a){try{ma++,a()}catch(Ia){throw"undefined"!==typeof logError&&logError(Ia),Ia;}finally{ma--}Sa()&&F("idle",[])},qa=function(){ma||ya(function(){for(var a,b,e=0;e<aa.length;)a=Ca,b=aa[e],za(b),a!=Ca?e=0:e++})};r.undef=function(a,b){a=fa(a,b);oa(a);e(a,{def:0,executed:0,injected:0,node:0})};void 0===z("dojo-loader-eval-hint-url")&&z.add("dojo-loader-eval-hint-url",1);var Na="function"==typeof n.fixupUrl?n.fixupUrl:function(a){a+="";return a+(L?
(/\?/.test(a)?"\x26":"?")+L:"")},Pa=function(a){var b=a.plugin;5!==b.executed||b.load||Ba(b);var e=function(b){a.result=b;oa(a);Da(a);qa()};b.load?b.load(a.prid,a.req,e):b.loadQ?b.loadQ.push(a):(b.loadQ=[a],aa.unshift(b),Ka(b))},la=0,Ea=0,Fa=0,Ya=function(a,b){Fa=1;if(z("config-dojo-loader-catches"))try{a===la?la.call(null):r.eval(a,z("dojo-loader-eval-hint-url")?b.url:b.mid)}catch(xa){F("error",q("evalModuleThrew",b))}else a===la?la.call(null):r.eval(a,z("dojo-loader-eval-hint-url")?b.url:b.mid);
Fa=0},Ka=function(a){var b=a.mid,c=a.url;if(!(a.executed||a.injected||ca[b]||a.url&&(a.pack&&ca[a.url]===a.pack||1==ca[a.url])))if(Ra(a),a.plugin)Pa(a);else{var g=function(){Za(a);if(2!==a.injected){if(z("dojo-enforceDefine")){F("error",q("noDefine",a));return}oa(a);e(a,Oa);r.trace("loader-define-nonmodule",[a.url])}qa()};(la=K[b]||K["url:"+a.url])?(r.trace("loader-inject",["cache",a.mid,c]),Ya(la,a),g()):(r.trace("loader-inject",["script",a.mid,c]),Ea=a,r.injectUrl(Na(c),g,a),Ea=0)}},Ga=function(a,
b,g){r.trace("loader-define-module",[a.mid,b]);e(a,{deps:b,def:g,cjs:{id:a.mid,uri:a.url,exports:a.result={},setExports:function(b){a.cjs.exports=b},config:function(){return a.config}}});for(var q=0;b[q];q++)b[q]=fa(b[q],a);oa(a);c(g)||b.length||(a.result=g,Da(a));return a},Za=function(b,e){for(var c=[],g,q;na.length;)q=na.shift(),e&&(q[0]=e.shift()),g=q[0]&&fa(q[0])||b,c.push([g,q[1],q[2]]);V(b);a(c,function(a){ja(Ga.apply(null,a))})},wa=0,ra=h,La=h,ra=function(){wa&&clearTimeout(wa);wa=0},La=function(){ra();
r.waitms&&(wa=v.setTimeout(function(){ra();F("error",q("timeout",ca))},r.waitms))};z.add("ie-event-behavior",x.attachEvent&&"undefined"===typeof Windows&&("undefined"===typeof opera||"[object Opera]"!=opera.toString()));var Ha=function(a,b,e,c){if(z("ie-event-behavior"))return a.attachEvent(e,c),function(){a.detachEvent(e,c)};a.addEventListener(b,c,!1);return function(){a.removeEventListener(b,c,!1)}},$a=Ha(window,"load","onload",function(){r.pageLoaded=1;try{"complete"!=x.readyState&&(x.readyState=
"complete")}catch(ab){}$a()}),Y=x.getElementsByTagName("script");for(k=0;!U;)/^dojo/.test((X=Y[k++])&&X.type)||(U=X);r.injectUrl=function(a,b,e){e=e.node=x.createElement("script");var c=Ha(e,"load","onreadystatechange",function(a){a=a||window.event;var e=a.target||a.srcElement;if("load"===a.type||/complete|loaded/.test(e.readyState))c(),g(),b&&b()}),g=Ha(e,"error","onerror",function(b){c();g();F("error",q("scriptError",[a,b]))});e.type="text/javascript";e.charset="utf-8";e.src=a;U.parentNode.insertBefore(e,
U);return e};r.log=h;r.trace=h;X=function(a,b,e){var v=arguments.length,p=["require","exports","module"],u=[0,a,b];1==v?u=[0,c(a)?p:[],a]:2==v&&g(a)?u=[a,c(b)?p:[],b]:3==v&&(u=[a,b,e]);r.trace("loader-define",u.slice(0,2));if((v=u[0]&&fa(u[0]))&&!ca[v.mid])ja(Ga(v,u[1],u[2]));else if(!z("ie-event-behavior")||Fa)na.push(u);else{v=v||Ea;if(!v)for(a in ca)if((p=P[a])&&p.node&&"interactive"===p.node.readyState){v=p;break}v?(V(v),ja(Ga(v,u[1],u[2]))):F("error",q("ieDefineFailed",u[0]));qa()}};X.amd={vendor:"dojotoolkit.org"};
e(e(r,m.loaderPatch),n.loaderPatch);G("error",function(a){try{if(console.error(a),a instanceof Error)for(var b in a);}catch(xa){}});e(r,{uid:w,cache:K,packs:Q});v.define||(v.define=X,v.require=r,a(W,function(a){R(a)}),G=B.deps||n.deps||m.deps,n=B.callback||n.callback||m.callback,r.boot=G||n?[G||[],n]:0)})(this.dojoConfig||this.djConfig||this.require||{},{async:0,hasCache:{"config-selectorEngine":"lite","config-tlmSiblingOfDojo":1,"dojo-built":1,"dojo-loader":1,dom:1,"host-browser":1},packages:[{location:"../xfile",
name:"xfile"},{location:"../xcf",name:"xcf"},{location:"../xide",name:"xide"},{location:"../dgrid",main:"OnDemandGrid",name:"dgrid"},{location:"../xnode",name:"xnode"},{location:"../dcl",main:"dcl.js",name:"dcl"},{location:"../davinci",name:"davinci"},{location:"../xblox",name:"xblox"},{location:"../preview",name:"preview"},{location:"../wcDocker",name:"wcDocker"},{location:"../xwire",name:"xwire"},{location:"../dstore",main:"Store",name:"dstore"},{location:"../xaction",name:"xaction"},{location:"../xtrack",
name:"xtrack"},{location:"../xdocker",name:"xdocker"},{location:"../x-markdown",name:"x-markdown"},{location:"../xideve",name:"xideve"},{location:"../dijit",name:"dijit"},{location:"../xlog",name:"xlog"},{location:"../xconsole",name:"xconsole"},{location:"../system",name:"system"},{location:"../nxapp",name:"nxapp"},{location:"../dojox",name:"dojox"},{location:"../xace",name:"xace"},{location:"../xgrid",name:"xgrid"},{location:"../xdojo",name:"xdojo"},{location:"../xlang",name:"xlang"},{location:".",
name:"dojo"}]});
require({cache:{"xide/model/Bean":function(){define(["dojo/_base/declare","xide/types","xide/model/Base","xide/utils"],function(n,m,k,h){h.mixin(m,{BEAN_FLAGS:{}});return n("xide/model/Bean",[k],{constructor:function(d){h.mixin(this,d)},getLabel:function(){return null},getID:function(){return null}})})},"dojo/_base/lang":function(){define(["./kernel","../has","../sniff"],function(n,m){m.add("bug-for-in-skips-shadowed",function(){for(var a in{toString:1})return 0;return 1});var k=m("bug-for-in-skips-shadowed")?"hasOwnProperty valueOf isPrototypeOf propertyIsEnumerable toLocaleString toString constructor".split(" "):
[],h=k.length,d=function(a,b,c){var e,g=0,q=n.global;if(!c)if(a.length){e=a[g++];try{c=n.scopeMap[e]&&n.scopeMap[e][1]}catch(v){}c=c||(e in q?q[e]:b?q[e]={}:void 0)}else return q;for(;c&&(e=a[g++]);)c=e in c?c[e]:b?c[e]={}:void 0;return c},b=Object.prototype.toString,c=function(a,b,c){return(c||[]).concat(Array.prototype.slice.call(a,b||0))},g=/\{([^\}]+)\}/g,p={_extraNames:k,_mixin:function(a,b,c){var e,g,q,v={};for(e in b)g=b[e],e in a&&(a[e]===g||e in v&&v[e]===g)||(a[e]=c?c(g):g);if(m("bug-for-in-skips-shadowed")&&
b)for(q=0;q<h;++q)e=k[q],g=b[e],e in a&&(a[e]===g||e in v&&v[e]===g)||(a[e]=c?c(g):g);return a},mixin:function(a,b){a||(a={});for(var e=1,c=arguments.length;e<c;e++)p._mixin(a,arguments[e]);return a},setObject:function(a,b,c){var e=a.split(".");a=e.pop();return(c=d(e,!0,c))&&a?c[a]=b:void 0},getObject:function(a,b,c){return d(a.split("."),b,c)},exists:function(a,b){return void 0!==p.getObject(a,!1,b)},isString:function(a){return"string"==typeof a||a instanceof String},isArray:function(a){return a&&
(a instanceof Array||"array"==typeof a)},isFunction:function(a){return"[object Function]"===b.call(a)},isObject:function(a){return void 0!==a&&(null===a||"object"==typeof a||p.isArray(a)||p.isFunction(a))},isArrayLike:function(a){return a&&void 0!==a&&!p.isString(a)&&!p.isFunction(a)&&!(a.tagName&&"form"==a.tagName.toLowerCase())&&(p.isArray(a)||isFinite(a.length))},isAlien:function(a){return a&&!p.isFunction(a)&&/\{\s*\[native code\]\s*\}/.test(String(a))},extend:function(a,b){for(var e=1,c=arguments.length;e<
c;e++)p._mixin(a.prototype,arguments[e]);return a},_hitchArgs:function(a,b){var e=p._toArray(arguments,2),c=p.isString(b);return function(){var g=p._toArray(arguments),q=c?(a||n.global)[b]:b;return q&&q.apply(a||this,e.concat(g))}},hitch:function(a,b){if(2<arguments.length)return p._hitchArgs.apply(n,arguments);b||(b=a,a=null);if(p.isString(b)){a=a||n.global;if(!a[b])throw['lang.hitch: scope["',b,'"] is null (scope\x3d"',a,'")'].join("");return function(){return a[b].apply(a,arguments||[])}}return a?
function(){return b.apply(a,arguments||[])}:b},delegate:function(){function a(){}return function(b,c){a.prototype=b;b=new a;a.prototype=null;c&&p._mixin(b,c);return b}}(),_toArray:m("ie")?function(){function a(a,b,c){c=c||[];for(b=b||0;b<a.length;b++)c.push(a[b]);return c}return function(b){return(b.item?a:c).apply(this,arguments)}}():c,partial:function(a){return p.hitch.apply(n,[null].concat(p._toArray(arguments)))},clone:function(a){if(!a||"object"!=typeof a||p.isFunction(a))return a;if(a.nodeType&&
"cloneNode"in a)return a.cloneNode(!0);if(a instanceof Date)return new Date(a.getTime());if(a instanceof RegExp)return new RegExp(a);var b,c,g;if(p.isArray(a))for(b=[],c=0,g=a.length;c<g;++c)c in a&&b.push(p.clone(a[c]));else b=a.constructor?new a.constructor:{};return p._mixin(b,a,p.clone)},trim:String.prototype.trim?function(a){return a.trim()}:function(a){return a.replace(/^\s\s*/,"").replace(/\s\s*$/,"")},replace:function(a,b,c){return a.replace(c||g,p.isFunction(b)?b:function(a,e){return p.getObject(e,
!1,b)})}};p.mixin(n,p);return p})},"dijit/Tooltip":function(){define(["dojo/_base/declare","./_Widget","./_TemplatedMixin","./main"],function(n,m,k,h){k=n("dijit._MasterTooltip",[m,k],{});h.showTooltip=function(d,b,c,g,p,a,e){};h.hideTooltip=function(d){};n=n("dijit.Tooltip",m,{});n._MasterTooltip=k;n.show=h.showTooltip;n.hide=h.hideTooltip;n.defaultPosition=["after-centered","before-centered"];return n})},"xide/views/_ConsoleWidget":function(){define(["dcl/dcl","xide/utils","xide/_base/_Widget",
"xide/views/History","xide/mixins/PersistenceMixin"],function(n,m,k,h,d){return n([k,d.dcl],{declaredClass:"xide.views._ConsoleWidget",delegate:null,value:null,editNode:null,labelTextNode:null,labelNode:null,type:null,linkToggle:null,edit:null,consoleParent:null,isExpanded:!1,theme:"View/Themes/idle_fingers",consoleEditor:null,jsContext:null,templateString:'\x3cdiv class\x3d"consoleWidget"\x3e\x3cdiv class\x3d"" style\x3d"margin:0"\x3e\x3cdiv class\x3d"input-group border-top-dark"\x3e\x3cdiv attachTo\x3d"consoleParent" class\x3d"form-control input-transparent" style\x3d"height: 2em;padding: 0;margin: 0;overflow-y: auto"\x3e\x3c/div\x3e\x3cdiv class\x3d"input-group-btn btn-toolbar"\x3e\x3cbutton attachTo\x3d"clearButton" type\x3d"button" class\x3d"btn btn-danger btn-sm"\x3e\x3ci class\x3d"fa fa-remove"\x3e\x3c/i\x3e\x3c/button\x3e\x3cbutton attachTo\x3d"expandButton" type\x3d"button" class\x3d"btn btn-danger btn-sm"\x3e\x3ci class\x3d"fa fa-expand"\x3e\x3c/i\x3e\x3c/button\x3e\x3cbutton type\x3d"button" class\x3d"btn btn-danger btn-sm" style\x3d"bottom:0"\x3e\x3ci class\x3d"fa fa-link"\x3e\x3c/i\x3e\x3c/button\x3e\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e',
isLinked:function(){return this.linkToggle?this.linkToggle.get("checked"):!1},getEditor:function(){return this.consoleEditor},resize:function(){this.inherited(arguments);if(this.isExpanded){var b=$(this.domNode.parentNode).height();$(this.consoleParent).css({height:b/2+"px"})}this.aceEditor&&this.aceEditor.resize()},onClear:function(){this.delegate.onButton()},maximize:function(){if(this.delegate&&this.delegate.maximize)return this.delegate.maximize()},expandEditor:function(){var b=this.getEditor(),
c=this.aceEditor;this.isExpanded?($(this.consoleParent).css({height:"2em"}),this.isExpanded=!1,b.renderer.$maxLines=1,b.renderer.setShowGutter(!1),b.renderer.setHighlightGutterLine(!1),c.showToolbar(!1)):($(this.consoleParent).css({height:$(this.domNode.parentNode).height()/2+"px"}),b.renderer.$maxLines=Infinity,this.isExpanded=!0,b.renderer.setShowGutter(!0),b.renderer.setHighlightGutterLine(!0),m.resizeTo(b.renderer.container,this.consoleParent,!0,!0),b.resize(),c.resize(),c.showToolbar(!0),(b=
c.getToolbar())&&$(b.domNode).css({top:"0%",position:"absolute"}));if(this.delegate&&this.delegate.onConsoleExpanded)this.delegate.onConsoleExpanded();this.resize()},createEditor:function(){return createEditor(this.consoleParent,this.value,this,{options:this.options,ctx:this.ctx})},createWidgets:function(){var b=this.createEditor(this.ctx);this.add(b,null,!1);this.aceEditor=b;b.showToolbar(!1);var c=b.getEditor(),g=this;b.maximize=function(){return g.maximize()};this.aceEditorEditor=b;this.consoleEditor=
c;c.renderer.$maxLines=1;c.renderer.setShowGutter(!1);c.renderer.setHighlightGutterLine(!1);c.$mouseHandler.$focusWaitTimout=0;c.setOptions({enableBasicAutocompletion:!0,enableLiveAutocompletion:!0,enableSnippets:!0});b.setMode(this.delegate.type);b.set("value",this.value);b.runAction(this.theme);b.set("value",this.value);$(this.expandButton).click(function(b){return g.expandEditor()});$(this.clearButton).on("click",function(){if(g.delegate&&g.delegate.onButton)g.delegate.onButton()});this.expandEditor();
c.commands.bindKeys({"Ctrl-Return":function(b){c.focus();g.onEnter(c.getValue())},"Shift-Return":function(b){g.onClear()},"Esc|Shift-Esc":function(b){c.focus()},Return:function(b){c.getValue().split(/\s+/);g.isExpanded?c.insert("\n"):(c.focus(),g.onEnter(c.getValue()))}});c.commands.removeCommands(["find","gotoline","findall","replace","replaceall"])},getValue:function(){return this.consoleEditor.getValue()},startup:function(){this.history=new h;this.inherited(arguments);this.createWidgets()},onEnter:function(b){this.delegate.onEnter(b,
0==this.isExpanded);this.history.push(b)}})})},"xgrid/Actions":function(){define("xdojo/declare xide/types xaction/ActionProvider xaction/DefaultActions xide/lodash xide/$ xide/console".split(" "),function(n,m,k,h,d,b,c){c={_ActionContextState:null,onActivateActionContext:function(b,c){},onDeactivateActionContext:function(b,c){},onBeforeAction:function(b){},onAfterAction:function(b,c){b=this.getAction(b);if(null!=c&&d.isObject(c)){var a=c.select,e=c.focus||!0;if(a)return this.select(a,null,!0,{append:c.append,
focus:e,delay:c.delay||1,expand:c.expand})}this._emit(m.EVENTS.ON_AFTER_ACTION,b)},hasPermission:function(b){return h.hasAction(this.permissions,b)},addAction:function(b,c){if(c.keyCombo&&d.isArray(c.keyCombo)&&-1!==c.keyCombo.indexOf("dblclick")){var a=this;this.addHandle("dbclick",this.on("dblclick",function(b){b._inp||(b._inp=!0,(b=a.row(b))&&a.runAction(c,b.data))}))}return this.inherited(arguments)},_onSelectionChanged:function(b){this.inherited(arguments);this.refreshActions()},updateActions:function(b,
c){var a,e=this.getSelection();b&&c&&(a=b.getItemActions(),b=this._filterActions(e,a,b),c.setItemActions({},b))},startup:function(){if(!this._started){var c=this;c.domNode.tabIndex=-1;this.on("contextmenu",function(g){if(g&&g.target){var a=b(g.target);if(a.hasClass("dgrid-content")||a.hasClass("dgrid-extra"))c.select([],null,!1),c.deselectAll(),"contextmenu"!==g.type&&setTimeout(function(){c.domNode.focus();document.activeElement=c.domNode;b(c.domNode).focus()},1)}}.bind(this));this._on("selectionChanged",
function(b){this._onSelectionChanged(b)}.bind(this));this._on("onAddActions",function(b){b=b.actions;var a=m.ACTION.HEADER;c.getAction(a)||b.push(c.createAction({label:"Header",command:a,icon:"fa-hdd-o",tab:"View",group:"Show",mixin:{actionType:"multiToggle"},onCreate:function(a){a.set("value",c.showHeader)},onChange:function(a,b){c._setShowHeader(b);c.showHeader=b;c.onAfterAction(m.ACTION.HEADER)}}))});return this.inherited(arguments)}}};n=n("xgrid.Actions",k,c);n.Implementation=c;return n})},"xfile/views/GridLight":function(){define("xdojo/declare xide/types xgrid/ListRenderer xfile/ThumbRenderer xgrid/TreeRenderer xgrid/GridLite xgrid/MultiRenderer xfile/FileActions xide/views/_LayoutMixin xgrid/KeyboardNavigation xgrid/Selection xide/mixins/_State xide/widgets/_Widget".split(" "),
function(n,m,k,h,d,b,c,g,p,a,e,q,u){k=[k,h,d];n=n.classFactory("multiRenderer",{},k,c.Implementation);m=b.createGridClass("xfile.views.GridLight",{},{SELECTION:{CLASS:e},KEYBOARD_SELECTION:!0,COLUMN_HIDER:!0,COLUMN_REORDER:!1,ACTIONS:m.GRID_FEATURES_LITE.ACTIONS,ITEM_ACTIONS:{CLASS:g},SPLIT:{CLASS:p},KEYBOARD_NAVIGATION:{CLASS:a},STATE:{CLASS:q},WIDGET:{CLASS:u}},{RENDERER:n},{renderers:k,selectedRenderer:d});m.DEFAULT_RENDERERS=k;m.DEFAULT_MULTI_RENDERER=n;return m})},"xfile/manager/FileManager":function(){define("dcl/dcl dojo/_base/kernel xide/manager/ServerActionBase xide/types xfile/types xide/utils xide/encoding/SHA1 xide/manager/RPCService dojo/Deferred xdojo/has xfile/manager/FileManagerActions require xfile/factory/Store xide/lodash xdojo/has!electron?xfile/manager/Electron".split(" "),
function(n,m,k,h,d,b,c,g,p,a,e,q,u,w,r){m=[k,e];a("electronx")&&r&&m.push(r);return n(m,{declaredClass:"xfile.manager.FileManager",getNewName:function(a,b){a=a.name.replace(".meta.json","");for(var e=!1,c=1,g=null;!e;)g=a+"-"+c+".meta.json",w.find(b,{name:g})?c++:e=!0;return g},_uploadXHR:null,store:null,config:null,filesToUpload:null,serviceUrl:"index.php",serviceClass:"XCOM_Directory_Service",settingsStore:null,stores:[],getStore:function(a,b){return(b=w.find(this.stores,{mount:a}))?b:u.createFileStore(a,
null,this.config,null,this.ctx)},addStore:function(a){this.stores.push(a);a._on("destroy",this.removeStore.bind(this))},removeStore:function(a){this.stores.indexOf(a)&&this.stores.remove(a)},download:function(a){[].push(a.path);window.open("/files/"+a.mount+"/"+a.path+"?userDirectory\x3d"+encodeURIComponent(this.ctx.getUserDirectory()))},getImageUrl:function(a,b,e){return"/files/"+a.mount+"/"+a.path+"?userDirectory\x3d"+encodeURIComponent(this.ctx.getUserDirectory())},onFileUploadFailed:function(a){var b=
h.EVENTS;a.dfd&&a.dfd.reject(a);this.filesToUpload.remove(a);this.publish(b.ON_UPLOAD_FAILED,{item:a},this)},onFileUploaded:function(a){var b=this,e=h.EVENTS;setTimeout(function(){b.publish(e.STATUS,{message:""+a.file.name+" uploaded to "+a.dstDir,messageArgs:{}},b);a.dfd&&a.dfd.resolve(a);b.filesToUpload.remove(a);b.publish(e.ON_UPLOAD_FINISH,{item:a})},500)},getUploadUrl:function(){return this.serviceUrl.replace("/smd","/upload/?")},initXHRUpload:function(a,e,c,g){var q=new XMLHttpRequest;e=""+
this.getUploadUrl()+("mount\x3d"+encodeURIComponent(g));e+="\x26dstDir\x3d"+encodeURIComponent(c);var v=this;c=q.upload;c.addEventListener("progress",function(b){if(b.lengthComputable)b={item:a,progress:b},a.isLoading=!0,a.dfd.progress(b);else v.onFileUploaded(a)}.bind(this),!1);q.onreadystatechange=function(){if(4==q.readyState){if(q.responseText&&"OK"!=q.responseText){var e=b.getJson(q.responseText);!e&&q.responseText.indexOf("Fata Error")&&(e={result:[q.responseText],code:1});if(e&&e.result&&w.isArray(e.result)&&
0<e.result.length){for(var c=null,g=0;g<e.result.length;g++)v.publish(h.EVENTS.ERROR,"Error uploading : "+a.name+" "+e.result[g],v),c=e.result[g];c&&(a.error=c);v.onFileUploadFailed(a);v.submitNext();return}e&&e.error&&(v.publish(h.EVENTS.ERROR,"Error uploading : "+a.name+" "+e.error.message,v),v.onFileUploadFailed(a))}v.onFileUploaded(a);v.submitNext()}}.bind(this);c.onerror=function(){v.publish(h.EVENTS.ERROR,"Error uploading : "+a.name,v)};q.open("POST",e,!0);return q},hasLoadingItem:function(){for(var a=
0;a<this.filesToUpload.length;a++)if("loading"==this.filesToUpload[a].status)return this.filesToUpload[a];return!1},upload:function(a,b,e,c,g){g=[];for(var q=0;q<a.length;q++){var v={file:a[q],dstDir:""+e,mount:""+b,callee:c,view:c,dfd:new p};g.push(v.dfd);this.filesToUpload.push(v)}this.submitNext();return g},sendFileUsingFormData:function(a,b){var e=new FormData;e.append("userfile_0",b.file);a.send(e)},sendFileMultipart:function(a){a.status="loading";var b=this.initXHRUpload(a,"",a.dstDir,a.mount);
this.publish(h.EVENTS.ON_UPLOAD_BEGIN,{item:a,name:a.name},this);window.FormData&&this.sendFileUsingFormData(b,a)},submitNext:function(){var a=this.getNextUploadItem();a&&this.sendFileMultipart(a)},getNextUploadItem:function(){for(var a=0;a<this.filesToUpload.length;a++)if(!this.filesToUpload[a].status)return this.filesToUpload[a];return!1},onError:function(a){if(a)if(1===a.code){if(a.message&&w.isArray(a.message)){this.publish(h.EVENTS.ERROR,a.message.join("\x3cbr/\x3e"),this);return}}else 0===a.code&&
this.publish(h.EVENTS.STATUS,"Ok",this);this.publish(h.EVENTS.ERROR,{error:a},this)},addError:function(a){var b=this;a.addCallback(function(){b.onError()})},downloadItem:function(a,b){return this.callMethod(h.OPERATION.DOWNLOAD,[a],b,!0)},downloadTo:function(a,b,e,c,g){if(g){var q=this,v=function(a){var b=!1;a&&a.error&&1==a.error.code&&(b=!0);q.publish(h.EVENTS.ON_DOWNLOAD_TO_END,{terminatorItem:g,failed:b},this);c(arguments)};q.publish(h.EVENTS.ON_DOWNLOAD_TO_BEGIN,{dst:g,url:a,items:[g]},this)}return this.callMethod(h.OPERATION.DOWNLOAD_TO,
[a,b,e],v,!0)},find:function(a,b,e){try{return this.callMethod(h.OPERATION.FIND,[a,b],e,!0)}catch(z){logError(z,"find")}},getContent:function(e,c,g,r){if(this.getContentE){var v=this.getContentE.apply(this,arguments);if(v)return v}return a("php")?(v=b.buildPath(e,c,!1),this.callMethod(h.OPERATION.GET_CONTENT,[v,!1,!1],g,!1)):this._getText(q.toUrl(e).replace("main.js","")+"/"+c,{sync:!1,handleAs:"text"}).then(function(a){try{g&&g(a)}catch(C){logError(C,"error running RPC")}})},setContent:function(a,
b,e,c){this.publish(h.EVENTS.ON_CHANGED_CONTENT,{mount:a,path:b,content:e});this.publish(h.EVENTS.ON_STATUS_MESSAGE,{text:"Did save file : "+a+"://"+b});if(this.setContentE){var g=this.setContentE.apply(this,arguments);if(g)return g}return this.callMethod(h.OPERATION.SET_CONTENT,[a,b,e],c,!0)},onMessages:function(a){if((a=b.getJson(a.events))&&w.isArray(a))for(var e=0;e<a.length;e++){var c={path:a[e].relPath};b.mixin(c,a[e]);this.publish(a[e].clientEvent,c,this)}},onErrors:function(a){},init:function(){this.stores=
[];this.filesToUpload=[]},callMethodEx:function(a,e,c,g,q){var v=a||this.serviceClass,r=this;if(!this.serviceObject[v][e]){if(!0===q)this.onError({code:1,message:["Sorry, server doesnt know "+e]});return null}a={};a=b.mixin(a,this.config.RPC_PARAMS.rpcFixedParams);a[this.config.RPC_PARAMS.rpcUserField]=this.config.RPC_PARAMS.rpcUserValue;this.serviceObject.extraArgs=a;this.serviceObject.signatureField=this.config.RPC_PARAMS.rpcSignatureField;this.serviceObject.signatureToken=this.config.RPC_PARAMS.rpcSignatureToken;
this.serviceObject[v][e](c).then(function(a){try{g&&g(a)}catch(F){console.error("bad news : callback for method "+e+" caused a crash in service class "+v)}a&&a.error&&3==a.error.code&&setTimeout(function(){r.onMessages(a.error)},50);if(a&&a.error&&a.error&&0!==a.error.code)r.onError(a.error);else r.publish(h.EVENTS.STATUS,{message:"Ok!"},this)},function(a){r.onError(a)})},callMethod:function(a,e,c,g){var q=this,v=this.serviceClass;try{if(!this.serviceObject[v][a]){if(!0===g)this.onError({code:1,message:["Sorry, server doesnt know "+
a]});return null}v={};v=b.mixin(v,this.config.RPC_PARAMS.rpcFixedParams);v[this.config.RPC_PARAMS.rpcUserField]=this.config.RPC_PARAMS.rpcUserValue;this.serviceObject.extraArgs=v;this.serviceObject.signatureField=this.config.RPC_PARAMS.rpcSignatureField;this.serviceObject.signatureToken=this.config.RPC_PARAMS.rpcSignatureToken;var r=this.serviceObject[this.serviceClass][a](e);r.then(function(b){try{c&&c(b)}catch(F){console.error("crashed in "+a),logError(F,"error running RPC")}b&&b.error&&3==b.error.code&&
setTimeout(function(){q.onMessages(b.error)},50);if(b&&b.error&&b.error&&1==b.error.code)q.onError(b.error);else!1!==g&&q.publish(h.EVENTS.STATUS,{message:"Ok!"},this)},function(a){q.onError(a)});return r}catch(E){console.error("crash calling method"+E,arguments),q.onError(E),logError(E,"error ")}},__initService:function(){this.filesToUpload=[];!this.serviceObject&&this.serviceUrl&&(this.serviceObject=new g(decodeURIComponent(this.serviceUrl)),this.serviceObject.config=this.config)}})})},"dstore/QueryResults":function(){define(["dojo/_base/lang",
"dojo/when"],function(n,m){function k(h,d){return m(this,function(b){for(var c=0,g=b.length;c<g;c++)h.call(d,b[c],c,b)})}return function(h,d){var b=d&&"totalLength"in d;if(h.then){h=n.delegate(h);var c=h.then(function(c){var g=b?d.totalLength:c.totalLength||c.length;c.totalLength=g;return!b&&g});h.totalLength=b?d.totalLength:c;h.response=d&&d.response}else h.totalLength=b?d.totalLength:h.length;h.forEach=k;return h}})},"dojo/date/stamp":function(){define(["../_base/lang","../_base/array"],function(n,
m){var k={};n.setObject("dojo.date.stamp",k);k.fromISOString=function(h,d){k._isoRegExp||(k._isoRegExp=/^(?:(\d{4})(?:-(\d{2})(?:-(\d{2}))?)?)?(?:T(\d{2}):(\d{2})(?::(\d{2})(.\d+)?)?((?:[+-](\d{2}):(\d{2}))|Z)?)?$/);var b=k._isoRegExp.exec(h);h=null;if(b){b.shift();b[1]&&b[1]--;b[6]&&(b[6]*=1E3);d&&(d=new Date(d),m.forEach(m.map("FullYear Month Date Hours Minutes Seconds Milliseconds".split(" "),function(b){return d["get"+b]()}),function(c,a){b[a]=b[a]||c}));h=new Date(b[0]||1970,b[1]||0,b[2]||1,
b[3]||0,b[4]||0,b[5]||0,b[6]||0);100>b[0]&&h.setFullYear(b[0]||1970);var c=0,g=b[7]&&b[7].charAt(0);"Z"!=g&&(c=60*(b[8]||0)+(Number(b[9])||0),"-"!=g&&(c*=-1));g&&(c-=h.getTimezoneOffset());c&&h.setTime(h.getTime()+6E4*c)}return h};k.toISOString=function(h,d){var b=function(a){return 10>a?"0"+a:a};d=d||{};var c=[],g=d.zulu?"getUTC":"get",p="";"time"!=d.selector&&(p=h[g+"FullYear"](),p=["0000".substr((p+"").length)+p,b(h[g+"Month"]()+1),b(h[g+"Date"]())].join("-"));c.push(p);"date"!=d.selector&&(p=
[b(h[g+"Hours"]()),b(h[g+"Minutes"]()),b(h[g+"Seconds"]())].join(":"),g=h[g+"Milliseconds"](),d.milliseconds&&(p+="."+(100>g?"0":"")+b(g)),d.zulu?p+="Z":"time"!=d.selector&&(h=h.getTimezoneOffset(),d=Math.abs(h),p+=(0<h?"-":"+")+b(Math.floor(d/60))+":"+b(d%60)),c.push(p));return c.join("T")};return k})},"dojo/_base/xhr":function(){define("./kernel ./sniff require ../io-query ../dom ../dom-form ./Deferred ./config ./json ./lang ./array ../on ../aspect ../request/watch ../request/xhr ../request/util".split(" "),
function(n,m,k,h,d,b,c,g,p,a,e,q,u,w,r,v){n._xhrObj=r._create;var x=n.config;n.objectToQuery=h.objectToQuery;n.queryToObject=h.queryToObject;n.fieldToObject=b.fieldToObject;n.formToObject=b.toObject;n.formToQuery=b.toQuery;n.formToJson=b.toJson;n._blockAsync=!1;var A=n._contentHandlers=n.contentHandlers={text:function(a){return a.responseText},json:function(a){return p.fromJson(a.responseText||null)},"json-comment-filtered":function(a){a=a.responseText;var b=a.indexOf("/*"),e=a.lastIndexOf("*/");
if(-1==b||-1==e)throw Error("JSON was not comment filtered");return p.fromJson(a.substring(b+2,e))},javascript:function(a){return n.eval(a.responseText)},xml:function(a){var b=a.responseXML;b&&m("dom-qsa2.1")&&!b.querySelectorAll&&m("dom-parser")&&(b=(new DOMParser).parseFromString(a.responseText,"application/xml"));if(m("ie")&&(!b||!b.documentElement)){var c=function(a){return"MSXML"+a+".DOMDocument"},c=["Microsoft.XMLDOM",c(6),c(4),c(3),c(2)];e.some(c,function(e){try{var c=new ActiveXObject(e);
c.async=!1;c.loadXML(a.responseText);b=c}catch(J){return!1}return!0})}return b},"json-comment-optional":function(a){return a.responseText&&/^[^{\[]*\/\*/.test(a.responseText)?A["json-comment-filtered"](a):A.json(a)}};n._ioSetArgs=function(e,g,q,v){var r={args:e,url:e.url},p=null;if(e.form){var p=d.byId(e.form),u=p.getAttributeNode("action");r.url=r.url||(u?u.value:null);p=b.toObject(p)}u=[{}];p&&u.push(p);e.content&&u.push(e.content);e.preventCache&&u.push({"dojo.preventCache":(new Date).valueOf()});
r.query=h.objectToQuery(a.mixin.apply(null,u));r.handleAs=e.handleAs||"text";var w=new c(function(a){a.canceled=!0;g&&g(a);var b=a.ioArgs.error;b||(b=Error("request cancelled"),b.dojoType="cancel",a.ioArgs.error=b);return b});w.addCallback(q);var A=e.load;A&&a.isFunction(A)&&w.addCallback(function(a){return A.call(e,a,r)});var k=e.error;k&&a.isFunction(k)&&w.addErrback(function(a){return k.call(e,a,r)});var z=e.handle;z&&a.isFunction(z)&&w.addBoth(function(a){return z.call(e,a,r)});w.addErrback(function(a){return v(a,
w)});x.ioPublish&&n.publish&&!1!==r.args.ioPublish&&(w.addCallbacks(function(a){n.publish("/dojo/io/load",[w,a]);return a},function(a){n.publish("/dojo/io/error",[w,a]);return a}),w.addBoth(function(a){n.publish("/dojo/io/done",[w,a]);return a}));w.ioArgs=r;return w};var z=function(a){a=A[a.ioArgs.handleAs](a.ioArgs.xhr);return void 0===a?null:a},y=function(a,b){b.ioArgs.args.failOk||console.error(a);return a},B=function(a){0>=C&&(C=0,x.ioPublish&&n.publish&&(!a||a&&!1!==a.ioArgs.args.ioPublish)&&
n.publish("/dojo/io/stop"))},C=0;u.after(w,"_onAction",function(){--C});u.after(w,"_onInFlight",B);n._ioCancelAll=w.cancelAll;n._ioNotifyStart=function(a){x.ioPublish&&n.publish&&!1!==a.ioArgs.args.ioPublish&&(C||n.publish("/dojo/io/start"),C+=1,n.publish("/dojo/io/send",[a]))};n._ioWatch=function(b,e,c,g){b.ioArgs.options=b.ioArgs.args;a.mixin(b,{response:b.ioArgs,isValid:function(a){return e(b)},isReady:function(a){return c(b)},handleResponse:function(a){return g(b)}});w(b);B(b)};n._ioAddQueryToUrl=
function(a){a.query.length&&(a.url+=(-1==a.url.indexOf("?")?"?":"\x26")+a.query,a.query=null)};n.xhr=function(a,b,e){var c,g=n._ioSetArgs(b,function(a){c&&c.cancel()},z,y),q=g.ioArgs;"postData"in b?q.query=b.postData:"putData"in b?q.query=b.putData:"rawBody"in b?q.query=b.rawBody:(2<arguments.length&&!e||-1==="POST|PUT".indexOf(a.toUpperCase()))&&n._ioAddQueryToUrl(q);var v={method:a,handleAs:"text",timeout:b.timeout,withCredentials:b.withCredentials,ioArgs:q};"undefined"!==typeof b.headers&&(v.headers=
b.headers);"undefined"!==typeof b.contentType&&(v.headers||(v.headers={}),v.headers["Content-Type"]=b.contentType);"undefined"!==typeof q.query&&(v.data=q.query);"undefined"!==typeof b.sync&&(v.sync=b.sync);n._ioNotifyStart(g);try{c=r(q.url,v,!0)}catch(N){return g.cancel(),g}g.ioArgs.xhr=c.response.xhr;c.then(function(){g.resolve(g)}).otherwise(function(a){q.error=a;a.response&&(a.status=a.response.status,a.responseText=a.response.text,a.xhr=a.response.xhr);g.reject(a)});return g};n.xhrGet=function(a){return n.xhr("GET",
a)};n.rawXhrPost=n.xhrPost=function(a){return n.xhr("POST",a,!0)};n.rawXhrPut=n.xhrPut=function(a){return n.xhr("PUT",a,!0)};n.xhrDelete=function(a){return n.xhr("DELETE",a)};n._isDocumentOk=function(a){return v.checkStatus(a.status)};n._getText=function(a){var b;n.xhrGet({url:a,sync:!0,headers:{"X-Requested-With":null},load:function(a){b=a}});return b};n.getText=function(a){return n.xhrGet({url:a,sync:!1,headers:{"X-Requested-With":null}})};a.mixin(n.xhr,{_xhrObj:n._xhrObj,fieldToObject:b.fieldToObject,
formToObject:b.toObject,objectToQuery:h.objectToQuery,formToQuery:b.toQuery,formToJson:b.toJson,queryToObject:h.queryToObject,contentHandlers:A,_ioSetArgs:n._ioSetArgs,_ioCancelAll:n._ioCancelAll,_ioNotifyStart:n._ioNotifyStart,_ioWatch:n._ioWatch,_ioAddQueryToUrl:n._ioAddQueryToUrl,_isDocumentOk:n._isDocumentOk,_getText:n._getText,getText:n.getText,get:n.xhrGet,post:n.xhrPost,put:n.xhrPut,del:n.xhrDelete});return n.xhr})},"xnode/manager/NodeServiceManager":function(){define("dcl/dcl xide/manager/ServerActionBase xide/manager/BeanManager xide/types xide/factory xide/data/Memory xide/client/WebSocket xdojo/has xide/factory/Clients dojo/Deferred xdojo/has!xnode-ui?./NodeServiceManagerUI".split(" "),
function(n,m,k,h,d,b,c,g,p,a,e){m=[m,k];e&&m.push(e);return n(m,{declaredClass:"xnode.manager.NodeServiceManager",serviceClass:"XIDE_NodeJS_Service",cookiePrefix:"nodeJSServices",singleton:!0,serviceView:null,clients:null,beanNamespace:"serviceConsoleView",consoles:{},createClient:function(a){if(a.info){!this.clients&&(this.clients={});var b=this.getViewId(a);if(this.clients[b])return this.clients[b];var e=new c({});this.clients[b]=e;e.init({options:{host:a.info.host,port:a.info.port,debug:{all:!1,
protocol_connection:!0,protocol_messages:!0,socket_server:!0,socket_client:!0,socket_messages:!0,main:!0}}});e.connect();return e}console.error("NodeJs service has no host info")},getStore:function(){return this.store},isValid:function(){return null!=this.store},initStore:function(a){return this.store=new b({data:{identifier:"name",label:"Name",items:a},idProperty:"name"})},init:function(){var b=new a,e=this;if(this.serviceObject&&this.serviceObject.__init)this.serviceObject.__init.then(function(){e.ls().then(function(){b.resolve()})});
else if(this.services)return this.ls();return b},getDefaults:function(a){return this.callMethodEx(null,"getDefaults",null,a,!0)},checkServer:function(a,b){return this.callMethodEx(null,"checkServer",[a],b,!0)},runServer:function(a,b){return this.callMethodEx(null,"runDebugServer",[a],b,!0)},runDebug:function(a,b){return this.callMethodEx(null,"run",[a],b,!0)},stopServer:function(a,b){return this.callMethodEx(null,"stop",[a],b,!0)},startServer:function(a,b){return this.callMethodEx(null,"start",[a],
b,!0)},ls:function(b,e,c){function g(a){q.rawData=a;q.initStore(a);!1!==c&&q.publish(h.EVENTS.ON_NODE_SERVICE_STORE_READY,{store:q.store});b&&b(a)}var q=this;e=null;if(this.services)return e=new a,g(this.services),e.resolve(),e;e=this.runDeferred(null,"ls");try{e.then(function(a){g(a)})}catch(x){logError(x,"error loading store")}return e}})})},"dijit/MenuSeparator":function(){define("dojo/_base/declare dojo/dom ./_WidgetBase ./_TemplatedMixin ./_Contained dojo/text!./templates/MenuSeparator.html".split(" "),
function(n,m,k,h,d,b){return n("dijit.MenuSeparator",[k,h,d],{templateString:b,buildRendering:function(){this.inherited(arguments);m.setSelectable(this.domNode,!1)},isFocusable:function(){return!1}})})},"xide/manager/PluginManager":function(){define("dcl/dcl dojo/has xide/manager/ManagerBase xide/utils xide/types xide/factory dojo/Deferred dojo/promise/all".split(" "),function(n,m,k,h,d,b,c,g){return n(k,{declaredClass:"xide.manager.PluginManager",_defaultPackageLocationPrefix:"../../",_defaultPackageLocationSuffix:"/component",
_defaultComponentFlags:{LOAD:1,RUN:2},defaultComponentMixin:function(b){return{owner:this,ctx:this.ctx,flags:b}},componentBaseClasses:null,ctx:null,pluginResources:null,pluginInstances:null,_componentReady:function(b,a,e){if(a.RUN)try{b.run(this.ctx)}catch(q){}return e.resolve(b)},_componentLoaded:function(c,a,e,g){try{h.mixin(e,this.defaultComponentMixin(a));var q=b.createInstance(c,e,this.componentBaseClasses),p=function(a,b,e){this._componentReady(a,b,e)}.bind(this);a.LOAD?q.load().then(function(){p(q,
a,g)}):p(q,a,g)}catch(r){g.reject(arguments),logError(r)}},loadComponent:function(b,a,e,g,u){e="true"===e?{}:e;b=-1==b.indexOf("/")?this._defaultPackageLocationPrefix+b+this._defaultPackageLocationSuffix:b;a=null!=a?a:this._defaultComponentFlags;var q=new c,r=this;(g=h.getObject(b))?_.isFunction(g.then)?g.then(function(b){r._componentLoaded(b,a,e,q)},function(a){console.error("error in loading component at path "+b,a)}):this._componentLoaded(g,a,e,q):console.error("cant get object at "+b);return q},
loadComponentResources:function(b,a){},reloadComponent:function(b){},loadPlugins:function(b){if(m("plugins")){var a=new c,e=[],q=this;this.pluginResources=b;this.pluginInstances=[];if(this.pluginResources)for(var p=0;p<this.pluginResources.length;p++){var w=this.pluginResources[p];w.type&&"JS-PLUGIN"==w.type&&w.path&&e.push(this.loadComponent(w.path,null,w).then(function(a){a.pluginResources=w;q.pluginInstances.push(a)}))}g(e).then(function(){a.resolve(e);q.publish(d.EVENTS.ALL_PLUGINS_READY,{instances:q.pluginInstances,
resources:b})});return a}}})})},"dijit/_AttachMixin":function(){define("require dojo/_base/array dojo/_base/connect dojo/_base/declare dojo/_base/lang dojo/mouse dojo/on dojo/touch ./_WidgetBase".split(" "),function(n,m,k,h,d,b,c,g,p){var a=d.delegate(g,{mouseenter:b.enter,mouseleave:b.leave,keypress:k._keypress}),e;k=h("dijit._AttachMixin",null,{constructor:function(){this._attachPoints=[];this._attachEvents=[]},buildRendering:function(){this.inherited(arguments);this._attachTemplateNodes(this.domNode);
this._beforeFillContent()},_beforeFillContent:function(){},_attachTemplateNodes:function(a){for(var b=a;;)if(1==b.nodeType&&(this._processTemplateNode(b,function(a,b){return a.getAttribute(b)},this._attach)||this.searchContainerNode)&&b.firstChild)b=b.firstChild;else{if(b==a)break;for(;!b.nextSibling;)if(b=b.parentNode,b==a)return;b=b.nextSibling}},_processTemplateNode:function(a,b,e){var c=!0,g=this.attachScope||this,q=b(a,"dojoAttachPoint")||b(a,"data-dojo-attach-point");if(q)for(var p=q.split(/\s*,\s*/);q=
p.shift();)d.isArray(g[q])?g[q].push(a):g[q]=a,c="containerNode"!=q,this._attachPoints.push(q);if(b=b(a,"dojoAttachEvent")||b(a,"data-dojo-attach-event"))for(q=b.split(/\s*,\s*/),p=d.trim;b=q.shift();)if(b){var u=null;-1!=b.indexOf(":")?(u=b.split(":"),b=p(u[0]),u=p(u[1])):b=p(b);u||(u=b);this._attachEvents.push(e(a,b,d.hitch(g,u)))}return c},_attach:function(b,g,p){g=g.replace(/^on/,"").toLowerCase();g="dijitclick"==g?e||(e=n("./a11yclick")):a[g]||g;return c(b,g,p)},_detachTemplateNodes:function(){var a=
this.attachScope||this;m.forEach(this._attachPoints,function(b){delete a[b]});this._attachPoints=[];m.forEach(this._attachEvents,function(a){a.remove()});this._attachEvents=[]},destroyRendering:function(){this._detachTemplateNodes();this.inherited(arguments)}});d.extend(p,{dojoAttachEvent:"",dojoAttachPoint:""});return k})},"davinci/ve/actions/HighlightBaseWidgets":function(){define("dojo/_base/declare davinci/Runtime davinci/Workbench davinci/ve/States davinci/actions/Action davinci/workbench/Preferences".split(" "),
function(n,m,k,h,d,b){return n("davinci.ve.actions.HighlightBaseWidgets",[d],{run:function(){var c;if(m.currentEditor&&m.currentEditor.currentEditor&&m.currentEditor.currentEditor.context){c=m.currentEditor.currentEditor.context;var g=k.getProject(),p=b.getPreferences("davinci.ve.editorPrefs",g);p.highlightBaseWidgets=p.highlightBaseWidgets?!1:!0;b.savePreferences("davinci.ve.editorPrefs",g,p);c.updateFocusAll()}}})})},"dojo/Evented":function(){define(["./aspect","./on"],function(n,m){function k(){}
var h=n.after;k.prototype={on:function(d,b){return m.parse(this,d,b,function(c,g){return h(c,"on"+g,b,!0)})},emit:function(d,b){var c=[this];c.push.apply(c,arguments);return m.emit.apply(m,c)}};return k})},"dijit/hccss":function(){define([],function(n){return n})},"dijit/PopupMenuItem":function(){define("dojo/_base/declare dojo/dom-style dojo/_base/lang dojo/query ./popup ./registry ./MenuItem ./hccss".split(" "),function(n,m,k,h,d,b,c){return n("dijit.PopupMenuItem",c,{baseClass:"dijitMenuItem dijitPopupMenuItem",
_fillContent:function(){if(this.srcNodeRef){var b=h("*",this.srcNodeRef);this.inherited(arguments,[b[0]]);this.dropDownContainer=this.srcNodeRef}},_openPopup:function(b,c){var a=this.popup;d.open(k.delegate(b,{popup:this.popup,around:this.domNode}));c&&a.focus&&a.focus()},_closePopup:function(){d.close(this.popup);this.popup.parentMenu=null},startup:function(){if(!this._started){this.inherited(arguments);if(!this.popup){var c=h("[widgetId]",this.dropDownContainer)[0];this.popup=b.byNode(c)}this.ownerDocumentBody.appendChild(this.popup.domNode);
this.popup.domNode.setAttribute("aria-labelledby",this.containerNode.id);this.popup.startup();this.popup.domNode.style.display="none";this.arrowWrapper&&m.set(this.arrowWrapper,"visibility","");this.focusNode.setAttribute("aria-haspopup","true")}},destroyDescendants:function(b){this.popup&&(this.popup._destroyed||this.popup.destroyRecursive(b),delete this.popup);this.inherited(arguments)}})})},"dijit/form/_FormSelectWidget":function(){define("dojo/_base/array dojo/_base/Deferred dojo/aspect dojo/data/util/sorter dojo/_base/declare dojo/dom dojo/dom-class dojo/_base/kernel dojo/_base/lang dojo/query dojo/when dojo/store/util/QueryResults ./_FormValueWidget".split(" "),
function(n,m,k,h,d,b,c,g,p,a,e,q,u){return d("dijit.form._FormSelectWidget",u,{multiple:!1,options:null,store:null,_setStoreAttr:function(a){this._created&&this._deprecatedSetStore(a)},query:null,_setQueryAttr:function(a){this._created&&this._deprecatedSetStore(this.store,this.selectedValue,{query:a})},queryOptions:null,_setQueryOptionsAttr:function(a){this._created&&this._deprecatedSetStore(this.store,this.selectedValue,{queryOptions:a})},labelAttr:"",onFetch:null,sortByLabel:!0,loadChildrenOnOpen:!1,
onLoadDeferred:null,getOptions:function(a){var b=this.options||[];if(null==a)return b;if(p.isArray(a))return n.map(a,"return this.getOptions(item);",this);p.isString(a)&&(a={value:a});p.isObject(a)&&(n.some(b,function(b,e){for(var c in a)if(!(c in b)||b[c]!=a[c])return!1;a=e;return!0})||(a=-1));return 0<=a&&a<b.length?b[a]:null},addOption:function(a){n.forEach(p.isArray(a)?a:[a],function(a){a&&p.isObject(a)&&this.options.push(a)},this);this._loadChildren()},removeOption:function(a){a=this.getOptions(p.isArray(a)?
a:[a]);n.forEach(a,function(a){a&&(this.options=n.filter(this.options,function(b){return b.value!==a.value||b.label!==a.label}),this._removeOptionItem(a))},this);this._loadChildren()},updateOption:function(a){n.forEach(p.isArray(a)?a:[a],function(a){var b=this.getOptions({value:a.value}),e;if(b)for(e in a)b[e]=a[e]},this);this._loadChildren()},setStore:function(a,b,e){g.deprecated(this.declaredClass+"::setStore(store, selectedValue, fetchArgs) is deprecated. Use set('query', fetchArgs.query), set('queryOptions', fetchArgs.queryOptions), set('store', store), or set('value', selectedValue) instead.",
"","2.0");this._deprecatedSetStore(a,b,e)},_deprecatedSetStore:function(a,b,c){var g=this.store;c=c||{};if(g!==a){for(var v;v=this._notifyConnections.pop();)v.remove();a.get||(p.mixin(a,{_oldAPI:!0,get:function(a){var b=new m;this.fetchItemByIdentity({identity:a,onItem:function(a){b.resolve(a)},onError:function(a){b.reject(a)}});return b.promise},query:function(a,b){var e=new m(function(){c.abort&&c.abort()});e.total=new m;var c=this.fetch(p.mixin({query:a,onBegin:function(a){e.total.resolve(a)},
onComplete:function(a){e.resolve(a)},onError:function(a){e.reject(a)}},b));return new q(e)}}),a.getFeatures()["dojo.data.api.Notification"]&&(this._notifyConnections=[k.after(a,"onNew",p.hitch(this,"_onNewItem"),!0),k.after(a,"onDelete",p.hitch(this,"_onDeleteItem"),!0),k.after(a,"onSet",p.hitch(this,"_onSetItem"),!0)]));this._set("store",a)}this.options&&this.options.length&&this.removeOption(this.options);this._queryRes&&this._queryRes.close&&this._queryRes.close();this._observeHandle&&this._observeHandle.remove&&
(this._observeHandle.remove(),this._observeHandle=null);c.query&&this._set("query",c.query);c.queryOptions&&this._set("queryOptions",c.queryOptions);a&&a.query&&(this._loadingStore=!0,this.onLoadDeferred=new m,this._queryRes=a.query(this.query,this.queryOptions),e(this._queryRes,p.hitch(this,function(e){if(this.sortByLabel&&!c.sort&&e.length)if(a.getValue)e.sort(h.createSortFunction([{attribute:a.getLabelAttributes(e[0])[0]}],a));else{var g=this.labelAttr;e.sort(function(a,b){return a[g]>b[g]?1:b[g]>
a[g]?-1:0})}c.onFetch&&(e=c.onFetch.call(this,e,c));n.forEach(e,function(a){this._addOptionForItem(a)},this);this._queryRes.observe&&(this._observeHandle=this._queryRes.observe(p.hitch(this,function(a,b,e){b==e?this._onSetItem(a):(-1!=b&&this._onDeleteItem(a),-1!=e&&this._onNewItem(a))}),!0));this._loadingStore=!1;this.set("value","_pendingValue"in this?this._pendingValue:b);delete this._pendingValue;this.loadChildrenOnOpen?this._pseudoLoadChildren(e):this._loadChildren();this.onLoadDeferred.resolve(!0);
this.onSetStore()}),function(a){console.error("dijit.form.Select: "+a.toString());this.onLoadDeferred.reject(a)}));return g},_setValueAttr:function(a,b){this._onChangeActive||(b=null);if(this._loadingStore)this._pendingValue=a;else if(null!=a){a=p.isArray(a)?n.map(a,function(a){return p.isObject(a)?a:{value:a}}):p.isObject(a)?[a]:[{value:a}];a=n.filter(this.getOptions(a),function(a){return a&&a.value});var e=this.getOptions()||[];this.multiple||a[0]&&a[0].value||!e.length||(a[0]=e[0]);n.forEach(e,
function(b){b.selected=n.some(a,function(a){return a.value===b.value})});e=n.map(a,function(a){return a.value});if("undefined"!=typeof e&&"undefined"!=typeof e[0]){var c=n.map(a,function(a){return a.label});this._setDisplay(this.multiple?c:c[0]);this.inherited(arguments,[this.multiple?e:e[0],b]);this._updateSelection()}}},_getDisplayedValueAttr:function(){var a=n.map([].concat(this.get("selectedOptions")),function(a){return a&&"label"in a?a.label:a?a.value:null},this);return this.multiple?a:a[0]},
_setDisplayedValueAttr:function(a){this.set("value",this.getOptions("string"==typeof a?{label:a}:a))},_loadChildren:function(){this._loadingStore||(n.forEach(this._getChildren(),function(a){a.destroyRecursive()}),n.forEach(this.options,this._addOptionItem,this),this._updateSelection())},_updateSelection:function(){this.focusedChild=null;this._set("value",this._getValueFromOpts());var a=[].concat(this.value);if(a&&a[0]){var b=this;n.forEach(this._getChildren(),function(e){var g=n.some(a,function(a){return e.option&&
a===e.option.value});g&&!b.multiple&&(b.focusedChild=e);c.toggle(e.domNode,this.baseClass.replace(/\s+|$/g,"SelectedOption "),g);e.domNode.setAttribute("aria-selected",g?"true":"false")},this)}},_getValueFromOpts:function(){var a=this.getOptions()||[];if(!this.multiple&&a.length){var b=n.filter(a,function(a){return a.selected})[0];if(b&&b.value)return b.value;a[0].selected=!0;return a[0].value}return this.multiple?n.map(n.filter(a,function(a){return a.selected}),function(a){return a.value})||[]:""},
_onNewItem:function(a,b){b&&b.parent||this._addOptionForItem(a)},_onDeleteItem:function(a){this.removeOption({value:this.store.getIdentity(a)})},_onSetItem:function(a){this.updateOption(this._getOptionObjForItem(a))},_getOptionObjForItem:function(a){var b=this.store,e=this.labelAttr&&this.labelAttr in a?a[this.labelAttr]:b.getLabel(a);return{value:e?b.getIdentity(a):null,label:e,item:a}},_addOptionForItem:function(a){var b=this.store;b.isItemLoaded&&!b.isItemLoaded(a)?b.loadItem({item:a,onItem:function(a){this._addOptionForItem(a)},
scope:this}):(a=this._getOptionObjForItem(a),this.addOption(a))},constructor:function(a){this._oValue=(a||{}).value||null;this._notifyConnections=[]},buildRendering:function(){this.inherited(arguments);b.setSelectable(this.focusNode,!1)},_fillContent:function(){this.options||(this.options=this.srcNodeRef?a("\x3e *",this.srcNodeRef).map(function(a){return"separator"===a.getAttribute("type")?{value:"",label:"",selected:!1,disabled:!1}:{value:a.getAttribute("data-"+g._scopeName+"-value")||a.getAttribute("value"),
label:String(a.innerHTML),selected:a.getAttribute("selected")||!1,disabled:a.getAttribute("disabled")||!1}},this):[]);this.value?this.multiple&&"string"==typeof this.value&&this._set("value",this.value.split(",")):this._set("value",this._getValueFromOpts())},postCreate:function(){this.inherited(arguments);k.after(this,"onChange",p.hitch(this,"_updateSelection"));var a=this.store;a&&(a.getIdentity||a.getFeatures()["dojo.data.api.Identity"])&&(this.store=null,this._deprecatedSetStore(a,this._oValue,
{query:this.query,queryOptions:this.queryOptions}));this._storeInitialized=!0},startup:function(){this._loadChildren();this.inherited(arguments)},destroy:function(){for(var a;a=this._notifyConnections.pop();)a.remove();this._queryRes&&this._queryRes.close&&this._queryRes.close();this._observeHandle&&this._observeHandle.remove&&(this._observeHandle.remove(),this._observeHandle=null);this.inherited(arguments)},_addOptionItem:function(){},_removeOptionItem:function(){},_setDisplay:function(){},_getChildren:function(){return[]},
_getSelectedOptionsAttr:function(){return this.getOptions({selected:!0})},_pseudoLoadChildren:function(){},onSetStore:function(){}})})},"xcf/manager/BlockManager":function(){define(["dcl/dcl","xide/types","xide/manager/ManagerBase","xblox/manager/BlockManager","xide/lodash"],function(n,m,k,h,d){return n([k,h],{declaredClass:"xcf.manager.BlockManager",onReady:function(){},addDriverFunctions:function(b,c){for(var g in c)"constructor"!==g&&"inherited"!==g&&d.isFunction(c[g])&&(b[g]=c[g])},setScriptFunctions:function(b,
c,g){var p=g;c.context||(c.context=b);b.blockScope||(b.blockScope=c);c.context&&c.context.instance&&(c.device=c.context.instance);b.callCommand||(b.callCommand=function(a){(a=this.blockScope.getBlockByName(a))&&a.solve(this.blockScope)});b.setVariable||(b.setVariable=function(a,e,g,u,d){if(a=this.blockScope.getVariable(a))a.value=e,a.set("value",e),!1!==u&&p.publish(m.EVENTS.ON_DRIVER_VARIABLE_CHANGED,{item:a,scope:c,driver:b,owner:p,save:!0===g,source:d||m.MESSAGE_SOURCE.BLOX})});b.getVariable||
(b.getVariable=function(a){return(a=this.blockScope.getVariable(a))?a.value:""});this.inherited(arguments)},onReloaded:function(){this.init()},getDeviceVariablesAsEventOptions:function(){},onCreateVariableCI:function(b){}})})},"davinci/ve/widgets/MultiInputDropDown":function(){define("dojo/_base/declare xide/widgets/TemplatedWidgetBase xide/form/Select dcl/dcl xide/data/TreeMemory xide/data/ObservableStore dstore/Trackable xide/factory dojo/_base/lang".split(" "),function(n,m,k,h,d,b,c,g,p){var a=
h(m,{numberDelta:1,templateString:"\x3cdiv \x3e\x3c/div\x3e",insertPosition:1,declaredClass:"davinci.ve.widgets.MultiInputDropDown",data:null,divider:"---",postCreate:function(){},get:function(a){return"value"===a&&this._dropDown?this._getValueAttr():""},startup:function(){var e=dojo.doc.createElement("div");this._run={};var q=this;this.data?(this.data.push({value:a.divider}),this.data.push({label:"Remove Value",value:"Remove Value",run:function(){this.set("value","",!1);q._dropDown.set("value","",
!0)}})):this.data=[{value:"auto"},{value:"0px"},{value:a.divider},{value:"Remove Value",run:function(){this.set("value","",!1);q._dropDown.set("value","")}},{value:a.divider},{value:"Help",run:function(){alert("help!")}}];for(var p=[],w=0;w<this.data.length;w++)p.push(this.data[w].value),this.data[w].run&&(this._run[this.data[w].value]=this.data[w].run);var r=[];_.each(this.data,function(a){r.push({label:a.label||a.value,value:a.value,run:a.run})});this._dropDown=new k({EDITABLE_CLASS:k.TYPEAHEAD,
storeClass:n("driverStore",[d,c,b],{setValues:function(a){var b=[],e=0;a&&(this._values=a);dojo.forEach(this.data,dojo.hitch(this,function(a){b.push({label:a.label,value:a.value,id:e++})}));this._jsonData={identifier:"id",items:b};this.setData(b);this.root._emit("update",{target:null})},modifyItem:function(a,b){for(var e=0;e<this.data.length;e++)this.data[e].value===a&&(this.data[e].value=b);q._dropDown.set("value",b);this.setValues()},insert:function(a,b){this.data.splice(a,0,{value:b,label:b});
this.setValues()},contains:function(a){for(var b=0;b<this.data.length;b++)if(this.data[b].value==a)return!0;return!1},findSimilar:function(a){if(a=(new RegExp(/(\D*)(-?)(\d+)(\D*)/)).exec(a)){a=new RegExp((0<a.length?a[1]:"")+"(-?)(\\d+)"+(3<a.length?a[4]:""));for(var b=0;b<this.data.length;b++)if(a.test(this.data[b].value))return this.data[b].value}},getItemNumber:function(a){return this.data[a]},clearValues:function(){this._loadFinished=!1}}),required:!1,title:"",editable:!0,options:r,selectOptions:{container:"body",
liveSearch:!0,createItem:!0,createItemText:"Create: {0}"},userData:{}});this._dropDown.startup();this._store=this._dropDown.store;this._plus=g.createButton(this._dropDown.previewNode,"fa-plus","btn-default btn-xs2",null,"");this._minus=g.createButton(this._dropDown.button0,"fa-minus","btn-default btn-xs2",null,"");p=dojo.create("div",{"class":"propInputWithIncrDecrButtons"});p.appendChild(this._dropDown.domNode);e.appendChild(p);p=dojo.doc.createElement("div");dojo.style(p,"clear","both");e.appendChild(p);
this._currentValue=this._store.data[0];dojo.connect(this._dropDown,"onKeyUp",this,"_updateSpinner");var v=this;this._dropDown._on?this._dropDown._on("change",function(a){v._onChange(a)}):dojo.connect(this._dropDown,"onChange",this,"_onChange");dojo.connect(this._plus,"onclick",this,"_plusButton",!1);dojo.connect(this._minus,"onclick",this,"_minusButton",!1);this._updateSpinner();this.domNode.appendChild(e);this.add(this._dropDown);this.add(this._store)},_setReadOnlyAttr:function(a){this._isReadOnly=
a;this._dropDown&&(this._dropDown.set("disabled",a),dojo.attr(this._plus,"disabled",a),dojo.attr(this._minus,"disabled",a))},onChange:function(a){},_getValueAttr:function(){return this._dropDown.get("value")},_setValueAttr:function(a,b){this._dropDown.set("value",a,!0);this._currentValue=this._dropDown.get("value");!1!==b&&this._onChange(this._currentValue);if(!b)this.onChange()},_changeValue:function(a,b){a=a.split(" ");for(var e="",c=0;c<a.length;c++){0<c&&(e+=" ");var g=a[c].match(/([-\d\.]+)([a-zA-Z%]*)/);
if(g)if(1==g.length)e+=g[0];else for(var q=1;q<g.length;q++)e=isNaN(g[q])||""==g[q]?e+g[q]:e+(parseFloat(g[q])+b);else e+=a[c]}return e},_plusButton:function(){var a=this._dropDown.get("value"),b=this._changeValue(a,this.numberDelta);this._store.modifyItem(a,b);this._dropDown.set("value",b);this._onChange(b)},_minusButton:function(){var a=this._dropDown.get("value"),b=this._changeValue(a,-1*this.numberDelta);this._store.modifyItem(a,b);this._dropDown.set("value",b);this._onChange(b)},_updateSpinner:function(){var a=
this._dropDown.get("value"),a=/(-?)(\d+){1}/.exec(a);this._minus.disabled=a&&a.length?this._plus.disabled=!1:this._plus.disabled=!0;return!0},_onChange:function(b){var e;b in this._run?(this._dropDown.get("value",this._store.getItemNumber(0)),dojo.hitch(this,this._run[b])()):b==a.divider?this._dropDown.get("value",this._store.getItemNumber(0)):(e=this._store.findSimilar(b))?this._store.modifyItem(e,b):this._store.contains(b)||this._store.insert(this.insertPosition,b);this._currentValue!=this._dropDown.get("value")&&
(this._currentValue=this._dropDown.get("value"),this.onChange(b));this._updateSpinner()}});a.divider="---";p.setObject("davinci.ve.widgets.MultiInputDropDown",a);return a})},"davinci/ve/utils/ImageUtils":function(){define([],function(){return{ImageUpdateFocus:function(n,m){if(m&&n&&n.domNode&&"IMG"===n.domNode.tagName)var k=dojo.connect(n.domNode,"onload",function(){for(var h=m.getSelection(),d=0;d<h.length;d++)if(h[d]==n){m.updateFocus(n,d);break}dojo.disconnect(k)})}}})},"dojo/_base/NodeList":function(){define(["./kernel",
"../query","./array","./html","../NodeList-dom"],function(n,m,k){m=m.NodeList;var h=m.prototype;h.connect=m._adaptAsForEach(function(){return n.connect.apply(this,arguments)});h.coords=m._adaptAsMap(n.coords);m.events="blur focus change click error keydown keypress keyup load mousedown mouseenter mouseleave mousemove mouseout mouseover mouseup submit".split(" ");k.forEach(m.events,function(d){var b="on"+d;h[b]=function(c,g){return this.connect(b,c,g)}});return n.NodeList=m})},"xaction/ActionContext":function(){define(["dcl/dcl",
"xdojo/declare","xide/types","dojo/aspect","xide/views/History"],function(n,m,k,h,d){var b={currentActionEmitter:null,_history:null,isEmpty:function(){var b=this.getCurrentEmitter();return b?0==b.getActionStore().getAll().length:!0},getCurrentEmitter:function(){return this.currentActionEmitter},_onRemoveEmitter:function(b){this._history.remove(b);var c=this._history.getNow();this.currentActionEmitter==b&&(this.currentActionEmitter=null);c&&this.setActionEmitter(c)},refreshActions:function(b){var c=
this;_.each(b,function(b){c.renderAction?c.renderAction(b,null,null,null,null):console.error("renderAction not implemented for refresh actions "+c.declaredClass)})},setActionEmitter:function(b,g,p){if(!b||!b.getActionStore||b.getActionStore())if(this.currentActionEmitter==b)b||this.setActionStore(null);else{try{var a=this.currentActionEmitter;if(a){if(a.getActionStore){var e=a.getActionStore();e&&(e._all=null);this.clearActions()}a&&a.onDeactivateActionContext&&a.onDeactivateActionContext(this,p)}}catch(q){logError(q,
"setActionEmitter crash")}if(!b||b.getActionStore)if(this.currentActionEmitter=b){if(g=b.getActionStore())g.__all=null,b&&b.onUseActionStore&&b.onUseActionStore(g,b),this.setActionStore(g,b),g.addRenderer(this),b&&b.onActivateActionContext&&b.onActivateActionContext(this,p),this._emit("setActionEmitter",{emitter:b}),!this._history&&(this._history=new d),this._history.setNow(b)}else this.setActionStore(null)}},_registerActionEmitter:function(b){if(!this[this.id+"_emitter_"+b.id]&&(this[this.id+"_emitter_"+
b.id]=!0,!b||b.getActionStore)){if(!b||!b.on)return!1;var c=this;b._on("selectionChanged",function(g){c.setActionEmitter(b,"clear"==g.why?"selectionCleared":"selectionChanged",g)});b.on("click",function(g){var a=!0;b.handleActionClick&&(a=b.handleActionClick(g));a&&c.setActionEmitter(b,"click",g)});!this._history&&(this._history=new d);b._on(k.EVENTS.ON_VIEW_SHOW,function(b){c._history.indexOf(b)&&(b.view&&(b=b.view),c.setActionEmitter(b,k.EVENTS.ON_VIEW_SHOW,b))})}},destroy:function(){this.inherited&&
this.inherited(arguments);this._history&&this._history.destroy()&&delete this._history},addActionEmitter:function(b){if(b){var c=this;!this._history&&(this._history=new d);b.getActionStore&&(this._history.push(b),c._registerActionEmitter(b),h.after(b,"destroy",function(){c._onRemoveEmitter(b)},!0),b._on("destroy",function(){try{c._onRemoveEmitter(b)}catch(p){logError(p,"addActionEmitter")}},!0))}}};m=m("xaction/ActionContext",null,b);m.dcl=n(null,b);return m})},"davinci/html/ui/ImageViewer":function(){define([],
function(){var n=function(m){this.element=m};n.prototype={isReadOnly:!0,save:function(){},getDefaultContent:function(){},supports:function(m){return!1},setContent:function(m,k){this.fileName=m;this.element.innerHTML="\x3cdiv style\x3d'overflow:auto'\x3e\x3cimg src\x3d'"+encodeURI(this.resourceFile.getURL())+"'/\x3e\x3c/div\x3e";this.dirty=!1},destroy:function(){},getOnUnloadWarningMessage:function(){return null}};return n})},"xwire/DeviceTarget":function(){define(["dcl/dcl","xide/types","xwire/Target"],
function(n,m,k){return n(k,{declaredClass:"xwire.DeviceTarget",variable:null,command:null,run:function(h){this.inherited(arguments);this.object&&(this.variable&&this.object.setVariable(this.variable,h.value,!1,!1,m.MESSAGE_SOURCE.GUI),this.command&&this.object.callCommand(this.command))}})})},"davinci/ve/DijitWidget":function(){define("require dojo/_base/declare dojo/_base/window dojo/_base/lang dojo/dom-attr dojo/parser ./_Widget ./metadata".split(" "),function(n,m,k,h,d,b,c,g){return m("davinci.ve.DijitWidget",
c,{isDijitWidget:!0,constructor:function(b,a,e,c,g,w){if("string"===typeof e){d.get(a,"data-dojo-type")||d.get(a,"dojoType")||d.set(a,"data-dojo-type",e);g&&g.addAttribute("data-dojo-type",e);e=a.ownerDocument;g=e.defaultView;(c=e.__DijitWidgetScratchSpace)||(c=e.__DijitWidgetScratchSpace=e.createElement("div"));c.appendChild(a);e=g.require("dojo/parser").instantiate([a],b,{noStart:!0})[0];c.firstChild&&c.removeChild(c.firstChild);if(this.domNode=e.domNode)e.domNode._dvWidget=this;this.isLayoutContainer=
e.isLayoutContainer}else this.type=w?w.replace(/\./g,"/"):e.declaredClass.replace(/\./g,"/");b=davinci.ve.metadata.getAllowedChild(this.type);this.acceptsHTMLChildren="ANY"===b[0]||-1!==b.toString().toUpperCase().indexOf("HTML");this.dijitWidget=e;this.containerNode=e.containerNode;this.styleNode=e.styleNode;this.id=e.id},getParent:function(){if(this.dijitWidget&&this.dijitWidget.domNode&&this.dijitWidget.domNode.parentNode){var b=n("davinci/ve/widget"),a=this.dijitWidget;do a=b.getEnclosingWidget(a.domNode.parentNode);
while(a&&a.dijitWidget&&"_"==a.dijitWidget.declaredClass.split(".").pop().charAt(0));return a}},_getChildren:function(b){if(this.acceptsHTMLChildren)return this.inherited(arguments);var a=[];"NONE"!==davinci.ve.metadata.getAllowedChild(this.type)[0]&&(this.dijitWidget.getChildren(),this.dijitWidget.getChildren().forEach(function(e){e._maqNotDVWidget||(b?a.push(n("davinci/ve/widget").getWidget(e.domNode)):(e=e.domNode&&e.domNode._dvWidget)&&a.push(e))}));return a},_getContainerNode:function(){return this.containerNode||
this.domNode},selectChild:function(b){this.dijitWidget.selectChild&&this.dijitWidget.selectChild(b.dijitWidget)},_addChildToDom:function(b,a){if(this.acceptsHTMLChildren){this.inherited(arguments);var e=b.dijitWidget;e&&this.dijitWidget._started&&!e._started&&b.startup()}else b.dijitWidget&&this.dijitWidget.addChild?this.dijitWidget.addChild(b.dijitWidget,a):("xblox/RunScript"===b.type&&b.getHelper()&&b.getHelper().addChildToDom&&b.getHelper().addChildToDom(this.dijitWidget,b,a),this.inherited(arguments))},
_removeChildFromDom:function(b){this.dijitWidget.removeChild&&b.dijitWidget?this.dijitWidget.removeChild(b.dijitWidget):this.inherited(arguments)},_getPropertyValue:function(b){return this.dijitWidget.get(b)},startup:function(){this.dijitWidget.startup()},isLayout:function(){var b=this.getContext().getDijit();return b.layout?this.dijitWidget.isInstanceOf(b.layout._LayoutWidget):!1},resize:function(){var b=this.getHelper();b&&b.resize?b.resize(this):this.dijitWidget.resize&&this.dijitWidget.resize()},
renderWidget:function(){if(this.dijitWidget.render)this.dijitWidget.render();else if(this.dijitWidget.chart){var b=dojo.marginBox(this.dijitWidget.domNode);this.dijitWidget.resize(b)}this.domNode.parentNode._dvWidget&&this.domNode.parentNode._dvWidget.isDijitWidget&&this._refresh(this.domNode.parentNode)},_refresh:function(b){var a=b.parentNode;a._dvWidget&&a._dvWidget.isDijitWidget?this._refresh(a):b._dvWidget.resize&&b._dvWidget.resize()},_attr:function(b,a){return this.dijitWidget.get.apply(this.dijitWidget,
arguments)}})})},"dgrid/List":function(){define("dojo/_base/declare dojo/dom-construct dojo/dom-class dojo/on dojo/has ./util/misc xide/$".split(" "),function(n,m,k,h,d,b,c){function g(a,b){a.className="dgrid-scrollbar-measure";document.body.appendChild(a);b=a["offset"+b]-a["client"+b];a.className="";a.parentNode&&document.body.removeChild(a);return b}function p(a){k.replace(this.domNode,a,this._class||"");this._class=a}function a(){return this._class}var e=[];d("mozilla")&&e.push("has-mozilla");
d("touch")&&e.push("has-touch");k.add(document.documentElement,e);d.add("pointer",function(a){return"PointerEvent"in a?"pointer":"MSPointerEvent"in a?"MSPointer":!1});var q,u;d.add("dom-scrollbar-width",function(a,b,e){return g(e,"Width")});d.add("dom-scrollbar-height",function(a,b,e){return g(e,"Height")});d.add("dom-rtl-scrollbar-left",function(a,b,e){a=document.createElement("div");e.className="dgrid-scrollbar-measure";e.setAttribute("dir","rtl");e.appendChild(a);document.body.appendChild(e);b=
!!d("ie")||!!d("trident")||/\bEdge\//.test(navigator.userAgent)||a.offsetLeft>=d("dom-scrollbar-width");e.className="";e.parentNode&&document.body.removeChild(e);m.destroy(a);e.removeAttribute("dir");return b});var w=0,r=n(null,{tabableHeader:!1,showHeader:!1,showFooter:!1,maintainOddEven:!0,cleanAddedRules:!0,addUiClasses:!1,highlightDuration:250,postscript:function(a,b){var e=this;(this._Row=function(a,b,e){this.id=a;this.data=b;this.element=e}).prototype.remove=function(){e.removeRow(this.element)};
b&&(this.srcNodeRef=b=b.nodeType?b:document.getElementById(b));this.create(a,b)},listType:"list",create:function(a,b){b=this.domNode=b||document.createElement("div");var e;a&&(this.params=a,n.safeMixin(this,a),e=a["class"]||a.className||b.className);this.sort=this.sort||[];this._listeners=[];this._rowIdToObject={};this.postMixInProperties&&this.postMixInProperties();this.id=b.id=b.id||this.id||r.autoIdPrefix+w++;this.buildRendering();e&&p.call(this,e);this.postCreate();delete this.srcNodeRef},buildRendering:function(){var a=
this.domNode,b=this.addUiClasses,e=this,c,g,q;q=this.isRTL="rtl"===(document.body.dir||document.documentElement.dir||document.body.style.direction).toLowerCase();a.className="";a.setAttribute("role","grid");k.add(a,"dgrid dgrid-"+this.listType+(b?" ui-widget":""));c=this.headerNode=m.create("div",{tabIndex:-1,className:"dgrid-header dgrid-header-row"+(b?" ui-widget-header":"")+(this.showHeader?"":" dgrid-header-hidden")},a);g=this.bodyNode=m.create("div",{className:"dgrid-scroller"},a);d("ff")&&(g.tabIndex=
-1);this.headerScrollNode=m.create("div",{className:"dgrid-header dgrid-header-scroll dgrid-scrollbar-width"+(b?" widget":"")},a);this.footerNode=m.create("div",{className:"dgrid-footer"+(this.showFooter?"":" dgrid-footer-hidden")},a);q&&(a.className+=" dgrid-rtl"+(d("dom-rtl-scrollbar-left")?" dgrid-rtl-swap":""));h(g,"scroll",function(b){e.showHeader&&(c.scrollLeft=b.scrollLeft||g.scrollLeft);b.stopPropagation();h.emit(a,"scroll",{scrollTarget:g})});this.configStructure();this.renderHeader();this.contentNode=
this.touchNode=m.create("div",{className:"dgrid-content"+(b?" widget":"")},this.bodyNode)},startup:function(){this._started||(this.inherited(arguments),this._started=!0,this.set("sort",this.sort))},configStructure:function(){},resize:function(){var a=this.bodyNode,e=this.footerNode,e=this.showFooter?e.offsetHeight:0;this.headerScrollNode.style.height=a.style.marginTop=this.headerNode.offsetHeight+"px";a.style.marginBottom=e+"px";q||(q=d("dom-scrollbar-width"),u=d("dom-scrollbar-height"),d("ie")&&
(q++,u++),17!==q&&b.addCssRule(".dgrid-rtl-swap .dgrid-header-row","left: "+q+"px"))},addCssRule:function(a,e){a=b.addCssRule(a,e);this.cleanAddedRules&&this._listeners.push(a);return a},on:function(a,b){a=h(this.domNode,a,b);d("dom-addeventlistener")||this._listeners.push(a);return a},cleanup:function(){for(var a in this._rowIdToObject)if(this._rowIdToObject[a]!==this.columns){var b=document.getElementById(a);b&&this.removeRow(b,!0)}},destroy:function(){if(this._listeners){for(var a=this._listeners.length;a--;)this._listeners[a].remove();
this._listeners=null}this._started=!1;this.cleanup();c(this.domNode).remove()},refresh:function(){this.cleanup();this._rowIdToObject={};this._autoRowId=0;c(this.contentNode).empty()},adjustRowIndices:function(a){var b=a.rowIndex;if(-1<b){do-1<a.rowIndex&&(this.maintainOddEven&&k.contains(a,"dgrid-row")&&k.replace(a,1===b%2?"dgrid-row-odd":"dgrid-row-even",0===b%2?"dgrid-row-odd":"dgrid-row-even"),a.rowIndex=b++);while((a=a.nextSibling)&&a.rowIndex!==b)}},renderArray:function(a,b,e){e=e||{};var c=
e.start||0,g=document.createDocumentFragment(),q=[],r=0,p=a.length;b||(this._lastCollection=a);for(;r<p;)q[r]=this.insertRow(a[r],g,null,c++,e),r++;(a=b?b.parentNode:this.contentNode)&&a.parentNode&&(a!==this.contentNode||p)&&(a.insertBefore(g,b||null),p&&this.adjustRowIndices(q[p-1]));return q},renderHeader:function(){},_autoRowId:0,insertRow:function(a,b,e,c,g){var q=this.id+"-row-"+(this.collection&&this.collection.getIdentity?this.collection.getIdentity(a):this._autoRowId++),r=document.getElementById(q),
p=r&&r.previousSibling;r&&(r===e&&(e=(e.connected||e).nextSibling),this.removeRow(r,!1,g));r=this.renderRow(a,g);r.className=(r.className||"")+" dgrid-row "+(1===c%2?"dgrid-row-odd":"dgrid-row-even");this._rowIdToObject[r.id=q]=a;b.insertBefore(r,e||null);r.rowIndex=c;p&&p.rowIndex!==r.rowIndex-1&&this.adjustRowIndices(p);return r},renderRow:function(a){var b=document.createElement("div");b.appendChild(document.createTextNode(a));return b},removeRow:function(a,b){a=a.element||a;delete this._rowIdToObject[a.id];
b||c(a).remove()},row:function(a){var b;if(a instanceof this._Row)return a;if(!a)return null;a.target&&a.target.nodeType&&(a=a.target);if(a.nodeType){do{var e=a.id;if(b=this._rowIdToObject[e])return new this._Row(e.substring(this.id.length+5),b,a);a=a.parentNode}while(a&&a!==this.domNode)}else return"object"===typeof a?b=this.collection.getIdentity(a):(b=a,a=this._rowIdToObject[this.id+"-row-"+b]),new this._Row(b,a,document.getElementById(this.id+"-row-"+b))},cell:function(a){return{row:this.row(a)}},
_move:function(a,b,e,c){var g,q;q=g=a.element;b=b||1;do if(a=g[0>b?"previousSibling":"nextSibling"]){do if((g=a)&&-1<(g.className+" ").indexOf(e+" ")){q=g;b+=0>b?1:-1;break}while(a=(!c||!g.hidden)&&g[0>b?"lastChild":"firstChild"])}else if(g=g.parentNode,!g||g===this.bodyNode||g===this.headerNode)break;while(b);return q},up:function(a,b,e){a.element||(a=this.row(a));return this.row(this._move(a,-(b||1),"dgrid-row",e))},down:function(a,b,e){a.element||(a=this.row(a));return this.row(this._move(a,b||
1,"dgrid-row",e))},scrollTo:function(a){"undefined"!==typeof a.x&&(this.bodyNode.scrollLeft=a.x);"undefined"!==typeof a.y&&(this.bodyNode.scrollTop=a.y)},getScrollPosition:function(){return{x:this.bodyNode.scrollLeft,y:this.bodyNode.scrollTop}},get:function(a){var b="_get"+a.charAt(0).toUpperCase()+a.slice(1);return"function"===typeof this[b]?this[b].apply(this,[].slice.call(arguments,1)):this[a]},set:function(a,b){if("object"===typeof a)for(var e in a)this.set(e,a[e]);else e="_set"+a.charAt(0).toUpperCase()+
a.slice(1),"function"===typeof this[e]?this[e].apply(this,[].slice.call(arguments,1)):this[a]=b;return this},_getClass:a,_setClass:p,_getClassName:a,_setClassName:p,_setSort:function(a,b){this.sort="string"!==typeof a?a:[{property:a,descending:b}];this._applySort()},_applySort:function(){this.refresh();if(this._lastCollection){var a=this.sort;if(a&&0<a.length){var b=a[0].property,e=!!a[0].descending;this._lastCollection.sort(function(a,c){a=a[b];c=c[b];void 0===a&&(a="");void 0===c&&(c="");return a===
c?0:a>c!==e?1:-1})}this.renderArray(this._lastCollection)}},_setShowHeader:function(a){var b=this.headerNode;this.showHeader=a;k.toggle(b,"dgrid-header-hidden",!a);this.renderHeader();this.resize();a&&(b.scrollLeft=this.getScrollPosition().x)},_setShowFooter:function(a){this.showFooter=a;k.toggle(this.footerNode,"dgrid-footer-hidden",!a);this.resize()}});r.autoIdPrefix="dgrid_";return r})},"xconsole/types":function(){define(["xide/types"],function(n){n.EXPRESSION_LANGUAGE={CUSTOM:"custom",JAVA_SCRIPT:"js",
JERRY_SCRIPT:"qs",PSEUDO:"ps",TYPE_SCRIPT:"ts",RUST:"rs",HASKELL:"hs",FILE_EXTENSION:"mime"};return n})},"dgrid/dgrid":function(){},"davinci/ve/widgets/EventSelection":function(){define("dojo/_base/declare dojo/_base/connect dojo/dom-class system/resource davinci/Runtime davinci/Workbench davinci/model/Path ../../workbench/Preferences ../../workbench/ViewLite ../commands/EventCommand ./HTMLStringUtil ../States xide/types".split(" "),function(n,m,k,h,d,b,c,g,p,a,e,q,u){var w=/^State:.*/,r=/^\s*davinci\.states\.setState\s*\(\s*([\'"])((?:(?!\1).)*)\1\s*\)\s*$/,
v=/^File:.*/,x=/^\s*location\.href\s*\=\s*([\'"])((?:(?!\1).)*)\1\s*$/,A=function(a){a&&q.getAllStateContainers(a);return[""]},z=function(a){a&&a.match(w)&&(a=a.substring(6),a="davinci.states.setState('"+("Background"==a?"Normal":a)+"')");a&&a.match(v)&&(a="location.href\x3d'"+a.substring(5)+"'");return a},y=function(a){var b;a&&((b=a.match(r))&&(a="State:"+b[2]),(b=a.match(x))&&(a="File:"+b[2]));return a};n=n("davinci.ve.widgets.EventSelection",[p],{pageTemplate:[{display:"onclick",target:"onclick",
type:"state",hideCascade:!0},{display:"ondblclick",target:"ondblclick",type:"state",hideCascade:!0},{display:"onmousedown",target:"onmousedown",type:"state",hideCascade:!0},{display:"onmouseup",target:"onmouseup",type:"state",hideCascade:!0},{display:"onmouseover",target:"onmouseover",type:"state",hideCascade:!0},{display:"onmousemove",target:"onmousemove",type:"state",hideCascade:!0},{display:"onmouseout",target:"onmouseout",type:"state",hideCascade:!0},{display:"onkeypress",target:"onkeypress",
type:"state",hideCascade:!0},{display:"onkeydown",target:"onkeydown",type:"state",hideCascade:!0},{display:"onkeyup",target:"onkeyup",type:"state",hideCascade:!0},{display:"onfocus",target:"onfocus",type:"state",hideCascade:!0},{display:"onblur",target:"onblur",type:"state",hideCascade:!0},{display:"onchange",target:"onchange",type:"state",hideCascade:!0}],buildRendering:function(){this.domNode=dojo.doc.createElement("div");this.domNode.innerHTML=e.generateTable(this.pageTemplate,{zeroSpaceForIncrDecr:!0});
k.add(this.domNode,"EventSelection");this.inherited(arguments)},setReadOnly:function(a){for(var b=0;b<this.pageTemplate.length;b++){var e=this.pageTemplate[b].widget;e?e.set("readOnly",a):(e=this.pageTemplate[b].domNode)&&dojo.attr(e,"disabled",a)}},startup:function(){function a(a){return function(){return this._onChange({target:a})}}this.inherited(arguments);for(var b=0;b<this.pageTemplate.length;b++){var e=dijit.byId(this.pageTemplate[b].id);this.pageTemplate[b].widget=e;m.connect(e,"onChange",
this,a(b))}this._buildSelectionValues();this.subscribe("/davinci/ui/context/loaded",dojo.hitch(this,this._buildSelectionValues));this.subscribe("/davinci/states/stored",dojo.hitch(this,this._buildSelectionValues));this.subscribe("/davinci/states/state/added",dojo.hitch(this,this._buildSelectionValues));this.subscribe("/davinci/states/state/removed",dojo.hitch(this,this._updateValues));this.subscribe("/davinci/states/state/renamed",dojo.hitch(this,this._updateValues));this.subscribe("/davinci/ui/widgetPropertiesChanged",
dojo.hitch(this,this._widgetPropertiesChanged));this.publish(u.EVENTS.ON_EVENT_SELECTION_RENDERED,{eventSelection:this,pageTemplate:this.pageTemplate});this.setReadOnly(!0)},onEditorSelected:function(){this._editor&&this._editor.supports("states")||delete this._editor;this._buildSelectionValues()},_onChange:function(b){b=b.target;var e=dijit.byId(this.pageTemplate[b].id),c=e.get("value"),c=z(c),g={};g[this.pageTemplate[b].target]=c;g=new a(this._widget,g);dojo.publish("/davinci/ui/widgetPropertiesChanges",
[{source:this._editor.editor_id,command:g}]);this.publish(u.EVENTS.ON_WIDGET_PROPERTY_CHANGED,{widget:e,editor:this._editor,eventSelection:this,pageTemplate:this.pageTemplate,widgetProperty:this.pageTemplate[b].target,value:c,target:this._widget})},_getRoot:function(){var a=this._editor,b;a&&a.getContext&&(b=(a=a.getContext())&&a.rootNode);return b},_updateValues:function(a){a&&a.node&&a.node._dvWidget&&(a=(a=a.node._dvWidget.getContext())&&a.editor)&&a==d.currentEditor&&(this._buildSelectionValues(),
this._widget&&this._setValues())},onWidgetSelectionChange:function(){this._widget?(this._setValues(),this.setReadOnly(!1)):(this.setReadOnly(!0),this._clearValues())},_clearValues:function(){for(var a=0;a<this.pageTemplate.length;a++)dijit.byId(this.pageTemplate[a].id).set("value","",!1)},_buildSelectionValues:function(){for(var a=this._getRoot(),a=A(a),b=0;b<this.pageTemplate.length;b++){var e=dijit.byId(this.pageTemplate[b].id);e.store.clearValues();e.store.setValues(a)}},_setValues:function(){for(var a=
0;a<this.pageTemplate.length;a++){var b=this.pageTemplate[a].target,e=this._widget,c="";e.properties&&e.properties[b]?c=e.properties[b]:e._srcElement&&(c=e._srcElement.getAttribute(b));c=y(c);(b=dijit.byId(this.pageTemplate[a].id))&&b.set("value",c,!1)}},_widgetPropertiesChanged:function(a){this._updateValues({widget:a[0]})}});n.getEventSelectionValues=A;n.getEventScriptFromValue=z;n.getValueFromEventScript=y;return n})},"xace/views/Editor":function(){define("dcl/dcl xide/types xide/utils xaction/ActionProvider xace/views/ACEEditor xace/views/_Actions xaction/Toolbar xide/mixins/PersistenceMixin".split(" "),
function(n,m,k,h,d,b,c,g){g=n([g.dcl],{declaredClass:"xace.views.EditorPersistence",defaultPrefenceTheme:"idle_fingers",defaultPrefenceFontSize:14,saveValueInPreferences:!0,getDefaultPreferences:function(){return k.mixin({theme:this.defaultPrefenceTheme,fontSize:this.defaultPrefenceFontSize},this.saveValueInPreferences?{value:this.get("value")}:null)},onAfterAction:function(b){var a=this.getEditor().getTheme();this.savePreferences({theme:a.replace("ace/theme/",""),fontSize:this.getEditor().getFontSize()});
return this.inherited(arguments)},toPreferenceId:function(b){if(!b){var a=$("body");b="xTheme-";var e;_.each(["blue","gray","white","transparent"],function(c){e=b+c;a.hasClass(e)&&(b=e)})}return(b||this.cookiePrefix||"")+"_xace"},getDefaultOptions:function(){var b=this.inherited(arguments),a=this.loadPreferences(null);a&&k.mixin(b,a)||this.savePreferences(this.getDefaultPreferences());return b}});n=n([b,d,h.dcl,g,c.dcl],{toolbarArgs:{actionFilter:{}},getBreadcrumbPath:function(){if(this.item)return{path:k.replaceAll("/",
"",this.item.mount)+":/"+this.item.path.replace("./","/")}},tabOrder:{Home:100,View:50,Settings:20},menuOrder:{File:110,Edit:100,View:90,Block:50,Settings:20,Navigation:10,Editor:9,Step:5,New:4,Window:3,Help:2},declaredClass:"xace/views/Editor",options:null,loadingIcon:"fa-spinner fa-spin",iconClassNormal:"fa-code",templateString:'\x3cdiv attachTo\x3d"template" class\x3d"grid-template widget" style\x3d"width: 100%;height: 100%;overflow: hidden !important;position: relative;padding: 0px;margin: 0px"\x3e\x3cdiv attachTo\x3d"header" class\x3d"view-header row bg-opaque" style\x3d"height: auto;width:inherit;height:auto;min-height: 33px"\x3e\x3c/div\x3e\x3cdiv attachTo\x3d"aceNode" class\x3d"view-body row" style\x3d"height:100%;width: 100%;position: relative;"\x3e\x3c/div\x3e\x3cdiv attachTo\x3d"footer" class\x3d"view-footer" style\x3d"position: absolute;bottom: 0px;width: 100%"\x3e\x3c/div\x3e\x3c/div\x3e',
getContent:function(b,a,e){this.storeDelegate?this.storeDelegate.getContent(function(b){a(b)},b||this.item):e&&e("Editor::getContent : Have no store delegate!")},saveContent:function(b,a,e){var c=this;this.set("iconClass","fa-spinner fa-spin");var g=b||this.get("value");if(this.storeDelegate)return this.storeDelegate.saveContent(g,function(){c.set("iconClass",c.iconClassNormal);c.lastSavedContent=g;c.onContentChange(g);c.publish(m.EVENTS.ON_FILE_CONTENT_CHANGED,{path:c.options.filePath,item:c.item,
content:g,editor:c},c)},null,c.item);e&&e("Editor::saveContent : Have no store delegate!");return!1},addCommands:function(){var b=this.getAce(),a=this;ace.require("ace/config").init();var e=[];this.hasHelp&&e.push({name:"showKeyboardShortcuts",bindKey:{win:"Ctrl-Alt-h",mac:"Command-Alt-h"},exec:function(b){a.showHelp(b)}});this.hasConsole&&e.push({name:"gotoline",bindKey:{win:"Ctrl-L",mac:"Command-L"},exec:function(a,b){"object"==typeof b?(b=this.name+" "+a.getCursorPosition().row,a.cmdLine.setValue(b,
1),a.cmdLine.focus()):(b=parseInt(b,10),isNaN(b)||a.gotoLine(b))},readOnly:!0});b.commands.addCommands(e)},getWebRoot:function(){return this.ctx.getResourceManager().getVariable(m.RESOURCE_VARIABLES.APP_URL)},resize:function(){return this._resize()},onResize:function(){return this._resize()},_resize:function(){var b=this.getParent();this._isMaximized?k.resizeTo(this,this._maximizeContainer,!0,!0):b&&k.resizeTo(this,b,!0,!0);var b=this.getToolbar(),a=!1,e=$(this.aceNode);this._isMaximized&&b&&k.resizeTo(b,
this.header,!0,!0);!b||b&&b.isEmpty()?a=!0:b&&(k.resizeTo(b,this.header,!1,!0),b.resize(),k.resizeTo(this.header,b,!0,!1));var c=$(this.domNode).height(),a=1==a?0:$(this.header).height(),g=$(this.footer).height(),c=c-a-g;b&&(c-=4);50<c?e.height(c+"px"):e.height("inherited")},__set:function(b,a){var e=this.inherited(arguments);if("iconClass"===b){var c=this._parent;c&&c.icon&&this._parent.icon(a)}return e},__get:function(b){if("value"===b){var a=this.getEditor();return(a=a?a.session:null)?a.getValue():
null}return this.inherited(arguments)}});n.DEFAULT_PERMISSIONS=b.DEFAULT_PERMISSIONS;return n})},"davinci/ve/actions/EditValueAction":function(){define(["dojo/_base/declare","davinci/ve/actions/ContextAction"],function(n,m){return n("davinci.ve.actions.EditValueAction",[m],{run:function(k){if((k=this.fixupContext(k))&&"davinci.ve.Context"===k.declaredClass&&"davinci/delite/Context"===k.declaredClass){var h=k.getSelection();1===h.length&&k.select(h[0],!1,!0)}},isEnabled:function(k){return(k=this.fixupContext(k))&&
0<k.getSelection().length},shouldShow:function(k){return(k=(k=this.fixupContext(k))?k.editor:null)&&"davinci.ve.PageEditor"==k.declaredClass}})})},"davinci/ve/_ContextJS":function(){define("dojo/_base/declare dojo/_base/xhr dojo/Deferred dojo/promise/all xide/factory xide/types ../html/HTMLElement ../html/HTMLText dojox/html/_base".split(" "),function(n,m,k,h,d,b,c,g){return n(null,{_getAppJsRelativeFile:function(){this._appJsRelativeFile||(this._appJsRelativeFile=this.getRelativeFileString("app.js"));
return this._appJsRelativeFile},addJavaScriptSrc:function(c,a,e,g){var q=/\/dojo.js$/.test(c),p=[];if(!this._didDojo){if(!q&&!g){var r=this;g=(new dojo._Url(this.getDocument().baseURI,c)).toString();p.push(m.get({url:g,sync:!0}).then(function(a){r.getGlobal().eval(a)}))}if(a){g=this.getDocumentElement().getChildElement("head");a={parseOnLoad:!0,async:!0,packages:this._getLoaderPackages()};var v=this;g=g.getChildElements("script").some(function(a){var g=a.getAttribute("src");if(g&&-1<g.indexOf(e))return q&&
(d.publish(b.EVENTS.ON_SET_DOJO_URL,{data:{dojoUrl:c},context:v,editor:v.editor},this),a=a.getAttribute("src"),/\/dojo.js$/.test(a)||v.addHeaderScript(a)),!0;v.addHeaderScript(g)});a.packages=a.packages.concat(this._customWidgetPackages);g?q&&this._updateDojoConfig(a):q?(d.publish(b.EVENTS.ON_SET_DOJO_URL,{data:{dojoUrl:c},context:this,editor:this.editor},this),this.addHeaderScript(c,{"data-dojo-config":JSON.stringify(a).slice(1,-1).replace(/"/g,"'")}),p.push(this.addJavaScriptModule("dijit/dijit",
!0,!0)),p.push(this.addJavaScriptModule("dojo/parser",!0,!0)),this._didDojo=!0):this.addHeaderScript(c)}return h(p)}},addJavaScriptModule:function(b,a,e){var c=new k;e?c.resolve():this.getGlobal().require([b],function(a){c.resolve(a)});if(a){if(!this._requireHtmlElem&&!this.getDocumentElement().getChildElement("head").getChildElements("script").some(function(a){var b=a.find({elementType:"HTMLText"},!0);if(b&&this._reRequire.test(b.getText()))return this._requireHtmlElem=a,!0},this))return this._requireHtmlElem=
this.addHeaderScriptText('require(["'+b+'"]);\n'),c;a=this._requireHtmlElem.find({elementType:"HTMLText"},!0);e=a.getText();var g=e.match(this._reRequire)[1].match(this._reModuleId);-1===g.indexOf(b)&&(g.push(b),e=e.replace(this._reRequire,"require("+JSON.stringify(g,null,"  ")+")"),a.setText(e),a.parent.setScript(e))}return c},addJavaScriptText:function(b,a,e){if(!e)try{this.getGlobal().eval(b)}catch(q){e=b.length,console.error('eval of "'+b.substr(0,20)+(20<e?"...":"")+'" failed')}a&&this.addHeaderScriptText(b)},
addHeaderScript:function(b,a){var e=new c("script");e.addAttribute("type","text/javascript");e.addAttribute("src",b);if(a)for(var g in a)e.addAttribute(g,a[g]);this.getDocumentElement().getChildElement("head").addChild(e)},addHeaderScriptText:function(b){var a=this.getDocumentElement().getChildElement("head"),e,q=a.children,p,d;for(p=q.length-1;0<=p;p--)if(d=q[p],"HTMLElement"===d.elementType&&"script"===d.tag){e=d.find({elementType:"HTMLText"},!0);break}e||(q=new c("script"),q.addAttribute("type",
"text/javascript"),q.script="",a.addChild(q),e=new g,q.addChild(e));a=e.getText();-1===a.indexOf(b)&&(e.setText(a+"\n"+b),e.parent.setScript(a+"\n"+b));return e.parent}})})},"dijit/form/_ListMouseMixin":function(){define(["dojo/_base/declare","dojo/on","dojo/touch","./_ListBase"],function(n,m,k,h){return n("dijit.form._ListMouseMixin",h,{postCreate:function(){this.inherited(arguments);this.domNode.dojoClick=!0;this._listConnect("click","_onClick");this._listConnect("mousedown","_onMouseDown");this._listConnect("mouseup",
"_onMouseUp");this._listConnect("mouseover","_onMouseOver");this._listConnect("mouseout","_onMouseOut")},_onClick:function(d,b){this._setSelectedAttr(b,!1);this._deferredClick&&this._deferredClick.remove();this._deferredClick=this.defer(function(){this._deferredClick=null;this.onClick(b)})},_onMouseDown:function(d,b){this._hoveredNode&&(this.onUnhover(this._hoveredNode),this._hoveredNode=null);this._isDragging=!0;this._setSelectedAttr(b,!1)},_onMouseUp:function(d,b){this._isDragging=!1;var c=this.selected,
g=this._hoveredNode;c&&b==c?this.defer(function(){this._onClick(d,c)}):g&&this.defer(function(){this._onClick(d,g)})},_onMouseOut:function(d,b){this._hoveredNode&&(this.onUnhover(this._hoveredNode),this._hoveredNode=null);this._isDragging&&(this._cancelDrag=(new Date).getTime()+1E3)},_onMouseOver:function(d,b){this._cancelDrag&&((new Date).getTime()>this._cancelDrag&&(this._isDragging=!1),this._cancelDrag=null);this._hoveredNode=b;this.onHover(b);this._isDragging&&this._setSelectedAttr(b,!1)}})})},
"xide/interface/Track":function(){define(["dcl/dcl","xdojo/declare"],function(n,m){var k={declaredClass:"xide.interface.Track",getTrackingGroup:function(){},getTrackingPath:function(){},track:function(){return!1},registerUrls:function(){}};m=m("xide.interface.Track",null,k);m.dcl=n(null,k);return m})},"xblox/manager/BlockManagerUI":function(){define(["dcl/dcl","xide/manager/BeanManager"],function(n,m){return n(m,{declaredClass:"xblox/manager/BlockManagerUI",init:function(){}})})},"dojo/errors/RequestTimeoutError":function(){define(["./create",
"./RequestError"],function(n,m){return n("RequestTimeoutError",null,m,{dojoType:"timeout"})})},"xide/encoding/MD5":function(){define(["./_base"],function(n){function m(b,c){return b<<c|b>>>32-c}function k(b,c,a,e,q,d){return n.addWords(m(n.addWords(n.addWords(c,b),n.addWords(e,d)),q),a)}function h(b,c,a,e,q,d,w){return k(c&a|~c&e,b,c,q,d,w)}function d(b,c,a,e,q,d,w){return k(c&e|a&~e,b,c,q,d,w)}function b(b,c,a,e,q,d,w){return k(a^(c|~e),b,c,q,d,w)}function c(c,p){c[p>>5]|=128<<p%32;c[(p+64>>>9<<
4)+14]=p;p=1732584193;for(var a=-271733879,e=-1732584194,g=271733878,u=0;u<c.length;u+=16){var w=p,r=a,v=e,x=g;p=h(p,a,e,g,c[u+0],7,-680876936);g=h(g,p,a,e,c[u+1],12,-389564586);e=h(e,g,p,a,c[u+2],17,606105819);a=h(a,e,g,p,c[u+3],22,-1044525330);p=h(p,a,e,g,c[u+4],7,-176418897);g=h(g,p,a,e,c[u+5],12,1200080426);e=h(e,g,p,a,c[u+6],17,-1473231341);a=h(a,e,g,p,c[u+7],22,-45705983);p=h(p,a,e,g,c[u+8],7,1770035416);g=h(g,p,a,e,c[u+9],12,-1958414417);e=h(e,g,p,a,c[u+10],17,-42063);a=h(a,e,g,p,c[u+11],22,
-1990404162);p=h(p,a,e,g,c[u+12],7,1804603682);g=h(g,p,a,e,c[u+13],12,-40341101);e=h(e,g,p,a,c[u+14],17,-1502002290);a=h(a,e,g,p,c[u+15],22,1236535329);p=d(p,a,e,g,c[u+1],5,-165796510);g=d(g,p,a,e,c[u+6],9,-1069501632);e=d(e,g,p,a,c[u+11],14,643717713);a=d(a,e,g,p,c[u+0],20,-373897302);p=d(p,a,e,g,c[u+5],5,-701558691);g=d(g,p,a,e,c[u+10],9,38016083);e=d(e,g,p,a,c[u+15],14,-660478335);a=d(a,e,g,p,c[u+4],20,-405537848);p=d(p,a,e,g,c[u+9],5,568446438);g=d(g,p,a,e,c[u+14],9,-1019803690);e=d(e,g,p,a,c[u+
3],14,-187363961);a=d(a,e,g,p,c[u+8],20,1163531501);p=d(p,a,e,g,c[u+13],5,-1444681467);g=d(g,p,a,e,c[u+2],9,-51403784);e=d(e,g,p,a,c[u+7],14,1735328473);a=d(a,e,g,p,c[u+12],20,-1926607734);p=k(a^e^g,p,a,c[u+5],4,-378558);g=k(p^a^e,g,p,c[u+8],11,-2022574463);e=k(g^p^a,e,g,c[u+11],16,1839030562);a=k(e^g^p,a,e,c[u+14],23,-35309556);p=k(a^e^g,p,a,c[u+1],4,-1530992060);g=k(p^a^e,g,p,c[u+4],11,1272893353);e=k(g^p^a,e,g,c[u+7],16,-155497632);a=k(e^g^p,a,e,c[u+10],23,-1094730640);p=k(a^e^g,p,a,c[u+13],4,
681279174);g=k(p^a^e,g,p,c[u+0],11,-358537222);e=k(g^p^a,e,g,c[u+3],16,-722521979);a=k(e^g^p,a,e,c[u+6],23,76029189);p=k(a^e^g,p,a,c[u+9],4,-640364487);g=k(p^a^e,g,p,c[u+12],11,-421815835);e=k(g^p^a,e,g,c[u+15],16,530742520);a=k(e^g^p,a,e,c[u+2],23,-995338651);p=b(p,a,e,g,c[u+0],6,-198630844);g=b(g,p,a,e,c[u+7],10,1126891415);e=b(e,g,p,a,c[u+14],15,-1416354905);a=b(a,e,g,p,c[u+5],21,-57434055);p=b(p,a,e,g,c[u+12],6,1700485571);g=b(g,p,a,e,c[u+3],10,-1894986606);e=b(e,g,p,a,c[u+10],15,-1051523);a=
b(a,e,g,p,c[u+1],21,-2054922799);p=b(p,a,e,g,c[u+8],6,1873313359);g=b(g,p,a,e,c[u+15],10,-30611744);e=b(e,g,p,a,c[u+6],15,-1560198380);a=b(a,e,g,p,c[u+13],21,1309151649);p=b(p,a,e,g,c[u+4],6,-145523070);g=b(g,p,a,e,c[u+11],10,-1120210379);e=b(e,g,p,a,c[u+2],15,718787259);a=b(a,e,g,p,c[u+9],21,-343485551);p=n.addWords(p,w);a=n.addWords(a,r);e=n.addWords(e,v);g=n.addWords(g,x)}return[p,a,e,g]}n.MD5=function(b,p){p=p||n.outputTypes.Base64;b=c(n.stringToWord(b),8*b.length);switch(p){case n.outputTypes.Raw:return b;
case n.outputTypes.Hex:return n.wordToHex(b);case n.outputTypes.String:return n.wordToString(b);default:return n.wordToBase64(b)}};n.MD5._hmac=function(b,p,a){a=a||n.outputTypes.Base64;var e=n.stringToWord(p);16<e.length&&(e=c(e,8*p.length));var g=[];p=[];for(var d=0;16>d;d++)g[d]=e[d]^909522486,p[d]=e[d]^1549556828;b=c(g.concat(n.stringToWord(b)),512+8*b.length);b=c(p.concat(b),640);switch(a){case n.outputTypes.Raw:return b;case n.outputTypes.Hex:return n.wordToHex(b);case n.outputTypes.String:return n.wordToString(b);
default:return n.wordToBase64(b)}};return n.MD5})},"xcf/model/Device":function(){define("dcl/dcl xide/data/Model xide/data/Source xide/types xide/utils xide/mixins/EventedMixin xcf/types/Types".split(" "),function(n,m,k,h,d,b){n=n([m,k.dcl,b.dcl],{declaredClass:"xcf.model.Device",_userStopped:!1,state:h.DEVICE_STATE.DISCONNECTED,driverInstance:null,blockScope:null,getParent:function(){return this.getStore().getSync(this.parentId)},isServerSide:function(){var b=this.getMetaValue(h.DEVICE_PROPERTY.CF_DEVICE_DRIVER_OPTIONS);
return 1<<h.DRIVER_FLAGS.RUNS_ON_SERVER&b?!0:!1},isServer:function(){var b=this.getMetaValue(h.DEVICE_PROPERTY.CF_DEVICE_DRIVER_OPTIONS);return 1<<h.DRIVER_FLAGS.SERVER&b?!0:!1},setServer:function(b){b=this.getMetaValue(h.DEVICE_PROPERTY.CF_DEVICE_DRIVER_OPTIONS);b.value|=1<<h.DRIVER_FLAGS.SERVER;this.setMetaValue(h.DEVICE_PROPERTY.CF_DEVICE_DRIVER_OPTIONS,b.value)},setServerSide:function(b){b=this.getMetaValue(h.DEVICE_PROPERTY.CF_DEVICE_DRIVER_OPTIONS);b|=1<<h.DRIVER_FLAGS.RUNS_ON_SERVER;this.setMetaValue(h.DEVICE_PROPERTY.CF_DEVICE_DRIVER_OPTIONS,
b)},isDebug:function(){var b=this.getMetaValue(h.DEVICE_PROPERTY.CF_DEVICE_DRIVER_OPTIONS);return 1<<h.DRIVER_FLAGS.DEBUG&b?!0:!1},check:function(){this._startDfd&&!0===this._userStopped&&this.reset()},getStore:function(){return this._store},getScope:function(){var b=this.getStore();return b?b.scope:this.scope},isEnabled:function(){return!0===this.getMetaValue(h.DEVICE_PROPERTY.CF_DEVICE_ENABLED)},setEnabled:function(b){return this.setMetaValue(h.DEVICE_PROPERTY.CF_DEVICE_ENABLED,b)},shouldReconnect:function(){return this._userStopped?
!1:this.isEnabled()},reset:function(){delete this._startDfd;this._startDfd=null;delete this.blockScope;this.blockScope=null;delete this.serverVariables;this.serverVariables=null;delete this.driverInstance;this.driverInstance=null;clearTimeout(this.reconnectTimer);delete this.lastReconnectTime;delete this.reconnectRetry;delete this.isReconnecting;this.setState(h.DEVICE_STATE.DISCONNECTED)},constructor:function(){},getBlockScope:function(){return this.driverInstance&&this.driverInstance.blockScope?
this.driverInstance.blockScope:this.blockScope},getDriverInstance:function(){return this.driverInstance},getDriver:function(){var b=this.getBlockScope();return b?b.driver:null},getMetaValue:function(b){return d.getCIInputValueByName(this.user,b)},setMetaValue:function(b,g,p){var a=d.getCIByChainAndName(this.user,0,b);if(!a)return null;var e=this.getMetaValue(b);d.setCIValueByField(a,"value",g);this[b]=g;if(!1!==p&&e!=g)return this.publish(h.EVENTS.ON_CI_UPDATE,{owner:this.owner,ci:a,newValue:g,oldValue:e})},
getStateIcon:function(b){b=b||this.state;switch(b){case h.DEVICE_STATE.READY:case h.DEVICE_STATE.CONNECTED:return"fa-link iconStatusOn";case h.DEVICE_STATE.SYNCHRONIZING:case h.DEVICE_STATE.CONNECTING:return"fa-spinner fa-spin";case h.DEVICE_STATE.LOST_DEVICE_SERVER:return"fa-spinner fa-spin"}return"fa-unlink iconStatusOff"},setState:function(b,g){if(b!==this.state){g=this.state;var c=this.getStateIcon(b);this.state=b;this.set("iconClass",c);this.set("state",b);this._emit(h.EVENTS.ON_DEVICE_STATE_CHANGED,
{old:g,state:b,icon:c,"public":!0});this.refresh("state")}}});n.createSubclass=m.createSubclass;return n})},"xide/editor/Default":function(){define(["xdojo/declare","xide/utils","xdojo/has!xace?xace/views/Editor"],function(n,m,k){var h={ctx:null,open:function(d,b,c,g,p){if(!d||!d.getPath().match(/^(.*\.(?!(zip|tar|gz|bzip2)$))?[^.]*$/i))return null;var a=d.mime,e=["image/png","image/jpg"];if(a&&(-1!==e.indexOf(a)||-1!==a.indexOf("video")||-1!==a.indexOf("audio")||-1!==a.indexOf("image")))return null;
var q=this,u=(a=q.ctx)?a.mainView:null,w=m.toString(d.name)||m.pathinfo(d.path,"PATHINFO_FILENAME")+"."+m.pathinfo(d.path,"PATHINFO_EXTENSION"),e=u?u.getDocker():null;p=p&&!0===p.registerEditors?!0:!1;var r=b||u.layoutCenter,u=null;c=c||{};u=b?r:c.attachTo||e.addTab(null,{title:w,target:r?r._parent:null,icon:"fa-code"});b={item:d,style:"padding:0px;",iconClass:"fa-code",options:m.mixin(c,{filePath:d.path,fileName:d.name}),ctx:a,storeDelegate:{getContent:function(a,b){b=b||d;return q.ctx.getFileManager().getContent(b.mount,
b.path,a)},saveContent:function(a,b,e){return q.ctx.getFileManager().setContent(d.mount,d.path,a,b)}},title:w};m.mixin(b,c);c=m.addWidget(k,b,this,u,!0,null,null,g);u.resize&&u.resize()&&c.resize();!1!==g&&u.selectChild&&u.selectChild(c);e.resize();p&&a.getWindowManager().registerView(c,!1);return c}};n=n("xide.editor.Default",null,h);n.Implementation=h;return n})},"davinci/ve/actions/MoveToBackAction":function(){define(["dojo/_base/declare","./_ReorderAction","davinci/commands/CompoundCommand","davinci/ve/commands/ReparentCommand"],
function(n,m,k,h){return n("davinci.ve.actions.MoveToBackAction",[m],{name:"MoveToBack",iconClass:"editActionIcon editMoveToBackIcon",run:function(d){if(d=this.fixupContext(d)){var b=d&&d.getSelection?d.getSelection():[];if(0!==b.length&&this.selectionSameParentAllAbsolute(b)){for(var c=b[0].getParent(),g=this.getAbsoluteSiblings(b[0]),p=new k,a=g.length-1;0<=a;a--){var e=g[a];0<=b.indexOf(e)&&p.add(new h(e,c,0))}d.getCommandStack().execute(p)}}},isEnabled:function(d){d=(d=this.fixupContext(d))&&
d.getSelection?d.getSelection():[];if(0===d.length||!this.selectionSameParentAllAbsolute(d))return!1;for(var b=this.getAbsoluteSiblings(d[0]),c=0;c<d.length;c++)if(b.indexOf(d[c])>d.length-1)return!0;return!1}})})},"xblox/views/BlockGridPalette":function(){define("dcl/dcl xdojo/declare xide/types xide/utils xgrid/ListRenderer xgrid/TreeRenderer xgrid/Grid xgrid/MultiRenderer dgrid/Editor xgrid/Defaults xgrid/Layout xgrid/Focus dgrid/OnDemandGrid xide/mixins/EventedMixin xblox/views/BlockGrid xblox/BlockActions xide/views/_LayoutMixin xide/widgets/_Widget module xide/factory xblox/views/ThumbRenderer xblox/views/DnD dojo/dom-construct xgrid/Selection xgrid/KeyboardNavigation xaction/ActionStore xlang/i18 xide/$ xide/_base/_Widget xdojo/has require".split(" "),
function(n,m,k,h,d,b,c,g,p,a,e,q,u,w,r,v,x,A,z,y,B,C,E,F,G,D,H,J,Q,N,O){function P(a,b){a=a.mainView.leftLayoutContainer;return a.createTab(b,"fa-cube",!0,null,{parentContainer:a,open:!0,icon:"fa-folder"})}function L(a,b){if(b.blockPalette)b.blockPalette.lastSource=a.view;else{var e=P(b,"Block-Palette"),c=h.addWidget(M,{ctx:b,attachDirect:!0,open:!0,sources:[]},null,e,!0);e.add(c);b.blockPalette=c;c.lastSource=a.view}(function(a){-1===b.blockPalette.sources.indexOf(a)&&(b.blockPalette.sources.push(a),
a._on("destroy",function(){b.blockPalette&&b.blockPalette.sources.remove(a);b.blockPalette&&0===b.blockPalette.sources.length&&(h.destroy(b.blockPalette),h.destroy(b.blockPalette._parent),b.blockPalette=null)}))})(a.view)}p=m("xblox.ThumbRenderer2",[B],{thumbSize:"400",resizeThumb:!0,__type:"thumb",deactivateRenderer:function(){J(this.domNode.parentNode).removeClass("metro");J(this.domNode).css("padding","");this.isThumbGrid=!1},activateRenderer:function(){J(this.contentNode).css("padding","8px");
this.isThumbGrid=!0;this.refresh()},renderRow:function(a){var b=E.create("div",{className:"tile widget form-control",style:"margin-left:8px;margin-top:8px;margin-right:8px;width:150px;height:initial;max-width:200px;float:left;padding:8px"});b.innerHTML='\x3cdiv class\x3d"opacity"\x3e'+('\x3cspan style\x3d"float:left; margin-left:3px;margin-top:3px;margin-right:3px;text-shadow: 2px 2px 5px rgba(0,0,0,0.3);font-size: inherit;opacity: 0.4" class\x3d"'+(a.icon||"fa fa-folder fa-2x")+'"\x3e\x3c/span\x3e')+
'\x3cspan class\x3d"thumbText text opacity ellipsis" style\x3d"text-align:center"\x3e'+a.title+"\x3c/span\x3e\x3c/div\x3e";return b}});d=m("xblox.GroupRenderer",b,{itemClass:p,groupClass:b,renderRow:function(a){return(a.group?this.groupClass:this.itemClass).prototype.renderRow.apply(this,arguments)}});b=[d,p,b];g=m.classFactory("xgrid/MultiRendererGroups",{},b,g.Implementation);c=c.createGridClass("xfile.views.Grid",{},{SELECTION:{CLASS:F},KEYBOARD_SELECTION:!0,CONTEXT_MENU:!1,ACTIONS:k.GRID_FEATURES.ACTIONS,
WIDGET:{CLASS:A},KEYBOARD_NAVIGATION:{CLASS:G},Dnd:{CLASS:C}},{RENDERER:g},{renderers:b,selectedRenderer:d});var K=n(Q,{templateString:'\x3cdiv class\x3d"xbloxHelp"\x3e\x3c/div\x3e',startup:function(){}}),M=m("ActionGrid",c,{dndParams:{allowNested:!1,checkAcceptance:function(a,b){return!1},isSource:!0},formatColumn:function(a,b,e){var c=this.selectedRenderer?this.selectedRenderer.prototype:this;if(c.formatColumn_&&(c=c.formatColumn.apply(arguments))||e.renderColumn_&&(c=e.renderColumn.apply(this,
arguments)))return c;switch(a){case "title":b=e.group?'\x3cspan style\x3d"float:left;margin-right: 10px"\x3e'+b+'\x3c/span\x3e\x3chr style\x3d"margin-top: 13px;margin-left: 4px"/\x3e':b}return b},_columns:{},postMixInProperties:function(){function a(b,q){for(var p=0;p<q.length;p++){var v=q[p];e=v.name;var d=b?b+"/"+e:e,u=!_.isEmpty(v.items);c.push(r.createAction({label:e,command:d,icon:v.iconClass,tab:"Home",mixin:h.mixin({item:v,parent:u?"root":b,quick:!0,title:H.localize(e),group:u,icon:v.iconClass,
toDropObject:function(a,b,e){var c=a.item;a=c.ctrArgs;a.id=null;a.items=null;a.scope=e.targetGrid.blockScope;c=c.proto;if(b=!0===e.center&&b?b:null)return e=y.createBlock(c,a),b.add(e,null,null);a.group=e.targetGrid.blockGroup;return y.createBlock(c,a)}},g)}));u&&a(d,v.items)}}var b=this.state;b&&b._columns&&(this._columns=b._columns);this.columns=this.getColumns();var b=this.getAddActions(),e="",c=[],g={addPermission:!0},r=this;a("",b);var q=new D({parentProperty:"parent",parentField:"parent",idProperty:"command",
mayHaveChildren:function(a){return!1===a._mayHaveChildren?!1:!0}});q.setData(c);b=q.query(null);_.each(b,function(a){a._store=q});J(this.domNode).addClass("xFileGrid metro");this.collection=q.filter({parent:"root"});return this.inherited(arguments)},getColumns:function(a){var b=this;return this.columns=[{renderExpando:!0,label:"Name",field:"title",sortable:!0,formatter:function(a,e){return b.formatColumn("title",a,e)},hidden:!1}]},getAddActions:function(a){a=a||{};var b=y.getAllBlocks(this.blockScope,
this,a,this.blockGroup,!1);this.publish(k.EVENTS.ON_BUILD_BLOCK_INFO_LIST_END,{items:b,view:this,owner:this,item:a,group:this.blockGroup,scope:this.blockScope});this._emit(k.EVENTS.ON_BUILD_BLOCK_INFO_LIST_END,{items:b,view:this,owner:this});return b},startup:function(){this._showHeader(!1);this._on("selectionChanged",function(a){var b=a.selection[0];a=this.lastSource;if(b&&a&&b.item.proto&&b.item.proto.prototype&&(a.clearPropertyPanel(),b=a.getHelp(b.item.proto.prototype))){var e=a.getPropertyStruct();
a=h.addWidget(K,{},null,a.__right.containerNode,!0);J(a.domNode).append(b);e.targetTop=a}});var a=this.inherited(arguments);_.each(this.getRows(),function(a){this.expand(a)},this);J(this.domNode).addClass("blockPalette");return a}});M.init=function(a){function b(b){L(b,a)}a.subscribe("ON_SELECTED_BLOCK",b);a.subscribe("ON_BLOCK_GRID",b)};return M})},"xide/noob":function(){define(["xdojo/declare","dcl/dcl"],function(n,m){n=n("noob",null,{});n.dcl=m(null,{});return n})},"dojo/date/locale":function(){define("../_base/lang ../_base/array ../date ../cldr/supplemental ../i18n ../regexp ../string ../i18n!../cldr/nls/gregorian module".split(" "),
function(n,m,k,h,d,b,c,g,p){function a(a,b,e,g){return g.replace(/([a-z])\1*/ig,function(q){var r,p,v=q.charAt(0);q=q.length;var d=["abbr","wide","narrow"];switch(v){case "G":r=b[4>q?"eraAbbr":"eraNames"][0>a.getFullYear()?0:1];break;case "y":r=a.getFullYear();switch(q){case 1:break;case 2:if(!e.fullYear){r=String(r);r=r.substr(r.length-2);break}default:p=!0}break;case "Q":case "q":r=Math.ceil((a.getMonth()+1)/3);p=!0;break;case "M":case "L":r=a.getMonth();3>q?(r+=1,p=!0):(v=["months","L"==v?"standAlone":
"format",d[q-3]].join("-"),r=b[v][r]);break;case "w":r=u._getWeekOfYear(a,0);p=!0;break;case "d":r=a.getDate();p=!0;break;case "D":r=u._getDayOfYear(a);p=!0;break;case "e":case "c":if(r=a.getDay(),2>q){r=(r-h.getFirstDayOfWeek(e.locale)+8)%7;break}case "E":r=a.getDay();3>q?(r+=1,p=!0):(v=["days","c"==v?"standAlone":"format",d[q-3]].join("-"),r=b[v][r]);break;case "a":v=12>a.getHours()?"am":"pm";r=e[v]||b["dayPeriods-format-wide-"+v];break;case "h":case "H":case "K":case "k":p=a.getHours();switch(v){case "h":r=
p%12||12;break;case "H":r=p;break;case "K":r=p%12;break;case "k":r=p||24}p=!0;break;case "m":r=a.getMinutes();p=!0;break;case "s":r=a.getSeconds();p=!0;break;case "S":r=Math.round(a.getMilliseconds()*Math.pow(10,q-3));p=!0;break;case "v":case "z":if(r=u._getZone(a,!0,e))break;q=4;case "Z":v=u._getZone(a,!1,e);v=[0>=v?"+":"-",c.pad(Math.floor(Math.abs(v)/60),2),c.pad(Math.abs(v)%60,2)];4==q&&(v.splice(0,0,"GMT"),v.splice(3,0,":"));r=v.join("");break;default:throw Error("dojo.date.locale.format: invalid pattern char: "+
g);}p&&(r=c.pad(r,q));return r})}function e(a,b,e,c){var g=function(a){return a};b=b||g;e=e||g;c=c||g;var r=a.match(/(''|[^'])+/g),q="'"==a.charAt(0);m.forEach(r,function(a,c){a?(r[c]=(q?e:b)(a.replace(/''/g,"'")),q=!q):r[c]=""});return c(r.join(""))}function q(a,e,c,g){g=b.escapeString(g);c.strict||(g=g.replace(" a"," ?a"));return g.replace(/([a-z])\1*/ig,function(b){var g;g=b.charAt(0);var r=b.length,q="",p="";c.strict?(1<r&&(q="0{"+(r-1)+"}"),2<r&&(p="0{"+(r-2)+"}")):(q="0?",p="0{0,2}");switch(g){case "y":g=
"\\d{2,4}";break;case "M":case "L":g=2<r?"\\S+?":"1[0-2]|"+q+"[1-9]";break;case "D":g="[12][0-9][0-9]|3[0-5][0-9]|36[0-6]|"+q+"[1-9][0-9]|"+p+"[1-9]";break;case "d":g="3[01]|[12]\\d|"+q+"[1-9]";break;case "w":g="[1-4][0-9]|5[0-3]|"+q+"[1-9]";break;case "E":case "e":case "c":g=".+?";break;case "h":g="1[0-2]|"+q+"[1-9]";break;case "k":g="1[01]|"+q+"\\d";break;case "H":g="1\\d|2[0-3]|"+q+"\\d";break;case "K":g="1\\d|2[0-4]|"+q+"[1-9]";break;case "m":case "s":g="[0-5]\\d";break;case "S":g="\\d{"+r+"}";
break;case "a":r=c.am||e["dayPeriods-format-wide-am"];q=c.pm||e["dayPeriods-format-wide-pm"];g=r+"|"+q;c.strict||(r!=r.toLowerCase()&&(g+="|"+r.toLowerCase()),q!=q.toLowerCase()&&(g+="|"+q.toLowerCase()),-1!=g.indexOf(".")&&(g+="|"+g.replace(/\./g,"")));g=g.replace(/\./g,"\\.");break;default:g=".*"}a&&a.push(b);return"("+g+")"}).replace(/[\xa0 ]/g,"[\\s\\xa0]")}var u={};n.setObject(p.id.replace(/\//g,"."),u);u._getZone=function(a,b,e){return b?k.getTimezoneName(a):a.getTimezoneOffset()};u.format=
function(b,c){c=c||{};var g=d.normalizeLocale(c.locale),r=c.formatLength||"short",g=u._getGregorianBundle(g),q=[];b=n.hitch(this,a,b,g,c);if("year"==c.selector)return e(g["dateFormatItem-yyyy"]||"yyyy",b);var p;"date"!=c.selector&&(p=c.timePattern||g["timeFormat-"+r])&&q.push(e(p,b));"time"!=c.selector&&(p=c.datePattern||g["dateFormat-"+r])&&q.push(e(p,b));return 1==q.length?q[0]:g["dateTimeFormat-"+r].replace(/\'/g,"").replace(/\{(\d+)\}/g,function(a,b){return q[b]})};u.regexp=function(a){return u._parseInfo(a).regexp};
u._parseInfo=function(a){a=a||{};var b=d.normalizeLocale(a.locale),b=u._getGregorianBundle(b),c=a.formatLength||"short",g=a.datePattern||b["dateFormat-"+c],r=a.timePattern||b["timeFormat-"+c],c="date"==a.selector?g:"time"==a.selector?r:b["dateTimeFormat-"+c].replace(/\{(\d+)\}/g,function(a,b){return[r,g][b]}),p=[];return{regexp:e(c,n.hitch(this,q,p,b,a)),tokens:p,bundle:b}};u.parse=function(a,b){var e=/[\u200E\u200F\u202A\u202E]/g,c=u._parseInfo(b),g=c.tokens,q=c.bundle;a=(new RegExp("^"+c.regexp.replace(e,
"")+"$",c.strict?"":"i")).exec(a&&a.replace(e,""));if(!a)return null;var r=["abbr","wide","narrow"],p=[1970,0,1,0,0,0,0],v="";a=m.every(a,function(a,e){if(!e)return!0;var c=g[e-1];e=c.length;c=c.charAt(0);switch(c){case "y":if(2!=e&&b.strict)p[0]=a;else if(100>a)a=Number(a),c=""+(new Date).getFullYear(),e=100*c.substring(0,2),c=Math.min(Number(c.substring(2,4))+20,99),p[0]=a<c?e+a:e-100+a;else{if(b.strict)return!1;p[0]=a}break;case "M":case "L":if(2<e){if(e=q["months-"+("L"==c?"standAlone":"format")+
"-"+r[e-3]].concat(),b.strict||(a=a.replace(".","").toLowerCase(),e=m.map(e,function(a){return a.replace(".","").toLowerCase()})),a=m.indexOf(e,a),-1==a)return!1}else a--;p[1]=a;break;case "E":case "e":case "c":e=q["days-"+("c"==c?"standAlone":"format")+"-"+r[e-3]].concat();b.strict||(a=a.toLowerCase(),e=m.map(e,function(a){return a.toLowerCase()}));a=m.indexOf(e,a);if(-1==a)return!1;break;case "D":p[1]=0;case "d":p[2]=a;break;case "a":e=b.am||q["dayPeriods-format-wide-am"];c=b.pm||q["dayPeriods-format-wide-pm"];
if(!b.strict){var d=/\./g;a=a.replace(d,"").toLowerCase();e=e.replace(d,"").toLowerCase();c=c.replace(d,"").toLowerCase()}if(b.strict&&a!=e&&a!=c)return!1;v=a==c?"p":a==e?"a":"";break;case "K":24==a&&(a=0);case "h":case "H":case "k":if(23<a)return!1;p[3]=a;break;case "m":p[4]=a;break;case "s":p[5]=a;break;case "S":p[6]=a}return!0});e=+p[3];"p"===v&&12>e?p[3]=e+12:"a"===v&&12==e&&(p[3]=0);e=new Date(p[0],p[1],p[2],p[3],p[4],p[5],p[6]);b.strict&&e.setFullYear(p[0]);var d=g.join(""),c=-1!=d.indexOf("d"),
d=-1!=d.indexOf("M");if(!a||d&&e.getMonth()>p[1]||c&&e.getDate()>p[2])return null;if(d&&e.getMonth()<p[1]||c&&e.getDate()<p[2])e=k.add(e,"hour",1);return e};var w=[];u.addCustomFormats=function(a,b){w.push({pkg:a,name:b})};u._getGregorianBundle=function(a){var b={};m.forEach(w,function(e){e=d.getLocalization(e.pkg,e.name,a);b=n.mixin(b,e)},this);return b};u.addCustomFormats(p.id.replace(/\/date\/locale$/,".cldr"),"gregorian");u.getNames=function(a,b,e,c){var g;c=u._getGregorianBundle(c);a=[a,e,b];
"standAlone"==e&&(e=a.join("-"),g=c[e],1==g[0]&&(g=void 0));a[1]="format";return(g||c[a.join("-")]).concat()};u.isWeekend=function(a,b){b=h.getWeekend(b);a=(a||new Date).getDay();b.end<b.start&&(b.end+=7,a<b.start&&(a+=7));return a>=b.start&&a<=b.end};u._getDayOfYear=function(a){return k.difference(new Date(a.getFullYear(),0,1,a.getHours()),a)+1};u._getWeekOfYear=function(a,b){1==arguments.length&&(b=0);var e=(new Date(a.getFullYear(),0,1)).getDay(),c=(e-b+7)%7,c=Math.floor((u._getDayOfYear(a)+c-
1)/7);e==b&&c++;return c};return u})},"xblox/views/ThumbRenderer":function(){define(["xdojo/declare","xide/utils","dojo/dom-construct","xgrid/ThumbRenderer","xide/$"],function(n,m,k,h,d){return n("xblox.views.ThumbRenderer",[h],{thumbSize:"400",resizeThumb:!0,deactivateRenderer:function(){d(this.domNode.parentNode).removeClass("metro");d(this.domNode).css("padding","");this.isThumbGrid=!1},activateRenderer:function(){d(this.domNode.parentNode).addClass("metro");d(this.contentNode).css("padding","8px");
this.isThumbGrid=!0;this.refresh()},renderRow:function(b){if(b.renderRow){var c=b.renderRow.apply(this,[b]);if(c)return c}var c=k.create("div",{className:"tile widget"}),g=!1===b.read&&!1===b.write,p=".."==b.name,a=!1,e="",q=b.icon?b.icon+" fa-5x":"fa fa-folder fa-5x";this._doubleWidthThumbs=!0;q=p?"fa fa-level-up fa-5x itemFolder":g?"fa fa-lock fa-5x itemFolder":"fa fa-folder fa-5x itemFolder";a=!0;e=b.name;q=b.icon?b.icon+" fa-5x":"fa fa-folder fa-5x";b='\x3cdiv title\x3d"'+(e+"\n"+b.modified)+
'" class\x3d"tile-content icon"\x3e'+('\x3cspan style\x3d"text-shadow: 2px 2px 5px rgba(0,0,0,0.3);font-size: 72px;opacity: 0.7" class\x3d"fa fa-6x '+q+'"\x3e\x3c/span\x3e')+'\x3c/div\x3e\x3cdiv class\x3d"brand opacity"\x3e\x3cspan class\x3d"thumbText text opacity ellipsis" style\x3d""\x3e'+e+"\x3c/span\x3e\x3c/div\x3e";this._doubleWidthThumbs&&d(c).addClass("double");if(a)return c.innerHTML=b,c;c.innerHTML=b;return c}})})},"xcf/manager/DeviceManager":function(){define("dcl/dcl xdojo/declare dojo/_base/lang xide/encoding/MD5 xide/types xide/utils xide/factory xcf/manager/BeanManager xide/mixins/ReloadMixin xide/mixins/EventedMixin ./DeviceManager_Server ./DeviceManager_DeviceServer xide/data/Memory xide/data/TreeMemory dojo/has xide/data/ObservableStore dstore/Trackable xcf/model/Device dojo/Deferred xide/manager/ServerActionBase xide/data/Reference xide/utils/StringUtils xcf/mixins/LogMixin xdojo/has!xcf-ui?./DeviceManager_UI xdojo/has!xexpression?xexpression/Expression dojo/promise/all xide/console xide/lodash".split(" "),
function(n,m,k,h,d,b,c,g,p,a,e,q,u,w,r,v,x,A,z,y,B,C,E,F,G,D,H,J,Q,N){c=[y,g,e,q,p.dcl,E];var O=d.DEVICE_PROPERTY;r("runDrivers");var P=d.EVENTS;c.push(F);return n(c,{declaredClass:"xcf.manager.DeviceManager",beanNamespace:"device",beanName:"Device",beanUrlPattern:"{id}",breanScheme:"device://",beanPriority:1,beanIconClass:"fa-sliders",groupType:d.ITEM_TYPE.DEVICE_GROUP,itemType:d.ITEM_TYPE.DEVICE,itemMetaTitleField:O.CF_DEVICE_TITLE,systemScope:"system_devices",userScope:"user_devices",appScope:"app_devices",
defaultScope:"system_devices",serviceClass:"XCF_Device_Service",rawData:null,store:null,treeView:null,deviceServerClient:null,deviceInstances:null,driverScopes:null,autoConnectDevices:!0,consoles:null,lastUpTime:null,reconnectDevice:15E3,reconnectDeviceServer:5E3,onRunClassEvent:function(a){var b=a.args.id||a.id;if(this.running&&this.running[b]){var e=this.running[b].delegate;if(e){a.error&&e.onError&&(e.onError(a.error),delete this.running[b]);a.finish&&e.onFinish&&(e.onFinish(a.finish),delete this.running[b]);
if(a.progress&&e.onProgress)e.onProgress(a.progress);if(a.interrupt&&e.onInterrupt)e.onInterrupt(a.interrupt)}}},getInstanceByName:function(a){var b=this.deviceInstances,e;for(e in b){var c=b[e].device;if(c&&this.getMetaValue(c,O.CF_DEVICE_TITLE)===a)return b[e]}},getFile:function(a){var b=new z,e=this.ctx;J.isString(a)&&(a=this.getItemByPath(a+".meta.json")||this.getItemByPath(a)||a);var c=e.getFileManager().getStore(a.scope);if(e=c._getItem(a.path))return b.resolve(e),b;c.initRoot().then(function(){c._loadPath(".",
!0).then(function(){c.getItem(a.path,!0).then(function(a){b.resolve(a)})})});return b},getSourceHash:function(){return this.ctx.getUserDirectory()||"no_user_directory"},checkDeviceServerConnection:function(){if(!this.ctx.getNodeServiceManager)return!0;var a=this.getContext(),a=r("xnode")&&a.getNodeServiceManager?this.ctx.getNodeServiceManager():null;if(!this.deviceServerClient&&a){a=a.getStore();if(!a)return!1;this.createDeviceServerClient(a)}else return!1;return!0},addDriverFunctions:function(a,
b){for(var e in b)"constructor"!==e&&"inherited"!==e&&"getInherited"!==e&&"isInstanceOf"!==e&&"__inherited"!==e&&"onModuleReloaded"!==e&&"start"!==e&&"publish"!==e&&"subscribe"!==e&&"getInherited"!==e&&"getInherited"!==e&&J.isFunction(b[e])&&!a[e]&&(a[e]=b[e])},addLoggingFunctions:function(a,b){var e=this;b.log=function(a,c,g,q){q=q||{};var r=k.clone(q);q.type=q.type||c||"Driver";b.options&&(q.device=b.options);e.publish(d.EVENTS.ON_SERVER_LOG_MESSAGE,{data:q,level:a||"info",message:g,details:r})}},
completeDriverInstance:function(a,b,e){var c=this,g=b.blockScope.blockStore,q=e.path,r=q+"_commands",p=q+"_variables";g.on("delete",function(a){var b=-1!==a.target.declaredClass.indexOf("Variable")?p:r,c=e._store.getSync(b);c&&c.refresh();(a=e._store.getSync(b+"_reference_"+a.target.id))&&a.refresh()});g.on("added",function(b){var c=b.name,g=b.icon||"fa-exclamation",q=-1!==b.declaredClass.indexOf("Variable"),v=q?p:r;-1!=b.declaredClass.indexOf(q?"Variable":"Command")&&(c=new B({enabled:!0,path:v+
"_reference_"+b.id,name:c,id:b.id,parentId:v,_mayHaveChildren:!1,virtual:!0,tooltip:!0,icon:g,ref:{driver:a,item:b,device:e},type:d.ITEM_TYPE.BLOCK}),c=e._store.putSync(c),b.addReference(c,{properties:{name:!0,enabled:!0,value:!0},onDelete:!0},!0),c.refresh())});b.setVariable=function(b,e,g,q,r){if(b=this.blockScope.getVariable(b))b.value=e,!1===r&&(b.__ignoreChangeMark=!0),b.set("value",e,g,q,r),!1===r&&(b.__ignoreChangeMark=!1),c.publish(d.EVENTS.ON_DRIVER_VARIABLE_CHANGED,{item:b,scope:this.blockScope,
driver:a,owner:c,save:!0===g,publish:q})};b.getVariable=function(a){return(a=this.blockScope.getVariable(a))?a._getArg(a.value,!1):""};b.log=function(a,e,g,q){q=q||{};var r=k.clone(q);q.type=q.type||e||"Driver";b.options&&(q.device=b.options);c.publish(d.EVENTS.ON_SERVER_LOG_MESSAGE,{data:q,level:a||"info",message:g,details:r})};for(var v in a)"constructor"!==v&&"inherited"!==v&&"getInherited"!==v&&"isInstanceOf"!==v&&"__inherited"!==v&&"onModuleReloaded"!==v&&"start"!==v&&"publish"!==v&&"subscribe"!==
v&&"getInherited"!==v&&"getInherited"!==v&&k.isFunction(a[v])&&!b[v]&&(b[v]=a[v])},getDevice:function(a){var b=a;if(J.isString(a)){var e=this.getItemById(a);e?b=e:(a=this.getItemByPath(a))&&(b=a)}return b},stopDevice:function(a){var b=this.getDevice(a)||a;if(b){if(this.checkDeviceServerConnection(),b._userStopped=!0,a=this.toDeviceControlInfo(b)){var e=a.hash;this.deviceInstances[e]&&(this._removeInstance(this.deviceInstances[e],e,b),delete this.deviceInstances[e],this.sendManagerCommand(d.SOCKET_SERVER_COMMANDS.MANAGER_STOP_DRIVER,
a))}}else H.error("cant find device "+a)},getStore:function(a){a=a||"system_devices";var b=this.stores[a];if(b)return b;if(a)return this.ls(a)},getDevices:function(a,e){var c=this.getStore();if(!c)return[];c=b.queryStore(c,{isDir:!1});c._S&&(c=[c]);for(var g=[],q=0;q<c.length;q++){var r=c[q],p=this.getMetaValue(r,O.CF_DEVICE_ENABLED);if(!0===a&&!0===p||null===p||!1===a)if(g.push(r),!0===e&&(p=this.getMetaValue(r,O.CF_DEVICE_DRIVER)))if(p=this.ctx.getDriverManager().getItemById(p))r.driver=p}return g},
getStores:function(){var a=[],b;for(b in this.stores){var e=this.stores[b];e&&a.push(e)}return a},getStorePath:function(a){var b=this.getContext().getResourceManager();if("user_devices"===a)return b.getVariable("USER_DIRECTORY")},connectToAllDevices:function(){function a(a){if(!a)H.error("have no device store");else if(!a.connected){a.connected=!0;a=b.queryStore(a,{isDir:!1});a._S&&(a=[a]);J.isArray(a)||(a=[a]);for(var e=0;e<a.length;e++){var q=a[e],r=c.getMetaValue(q,O.CF_DEVICE_ENABLED);if(1==r||
null==r)q=c.startDevice(q),g.push(q)}}}if(this.deviceServerClient){var e=this.getStores(),c=this;if(this.getStores().length){var g=[];this.deviceServerClient.dfd?this.deviceServerClient.dfd.then(function(){J.each(e,a,this)}.bind(this)):J.each(e,a,this);return g}}else this.checkDeviceServerConnection()},updateDevice:function(a,b){b&&(b.setMetaValue(d.DEVICE_PROPERTY.CF_DEVICE_DRIVER_OPTIONS,a.driverOptions),b.setMetaValue(d.DEVICE_PROPERTY.CF_DEVICE_OPTIONS,a.options),b.setMetaValue(d.DEVICE_PROPERTY.CF_DEVICE_ENABLED,
a.enabled))},debug:function(){J.each(this.stores,function(a){})},_getLogText:function(a){return moment().format("HH:mm:ss:SSS")+" ::   "+a+""},_parse:function(a,b){var e=""+b;0<e.indexOf("{{")||0<e.indexOf("}}")?e=(new G).parse(d.EXPRESSION_PARSER.FILTREX,e,this,{variables:a.getVariablesAsObject(),delimiters:{begin:"{{",end:"}}"}}):(a=a.parseExpression(b))&&(e=a);return e},runCommand:function(a,b){},_lastActions:null,onStoreReloaded:function(a){this.completeDeviceStore()},getInstance:function(a){if(a=
a?a._store?this.toDeviceControlInfo(a):a:null)return this.getDriverInstance(a,!1)},getDriverInstance:function(a,e){if(!a)return H.error("getDriverInstance::have no device info"),null;for(var c in this.deviceInstances){var g=this.deviceInstances[c],q=g.options;if(q&&q.port===a.port&&q.host===a.host&&q.protocol===a.protocol&&q.isServer===a.isServer)return e&&g.sendSettings&&(e=!1),!1!==e&&g&&!g.sendSettings&&(a=this.ctx.getDriverManager().getItemById(a.driverId))&&(a=a.user,(e=b.getCIByChainAndName(a,
0,d.DRIVER_PROPERTY.CF_DRIVER_COMMANDS))&&e.params&&(g.sendSettings=b.getJson(e.params)),(a=b.getCIByChainAndName(a,0,d.DRIVER_PROPERTY.CF_DRIVER_RESPONSES))&&a.params&&(g.responseSettings=b.getJson(a.params))),g}return null},_reconnectServerTimer:null,onDeviceServerConnectionLost:function(){if(!this.deviceServerClient||!this.deviceServerClient.pageUnloaded)if(this.deviceServerClient&&(this.deviceServerClient.destroy(),this.deviceServerClient=null),!this._reconnectServerTimer){var a=this;a.ctx.getNotificationManager().postMessage({message:"Lost connection to device server, try reconnecting in 5 seconds",
type:"error",showCloseButton:!0,duration:1E3});this._reconnectServerTimer=setTimeout(function(){a.checkDeviceServerConnection();a._reconnectServerTimer=null},this.reconnectDeviceServer);J.each(this.deviceInstances,function(a){if(a&&a.device&&!a.domNode){a=a.device;var b=a.driverInstance;b&&b.onLostServer&&b.onLostServer();a.setState(d.DEVICE_STATE.LOST_DEVICE_SERVER)}})}},onMQTTMessage:function(a){var e=b.getJson(a.message),c=!1;if(e){var g=e.sourceHost,q=e.sourcePort,r=a.host,p=a.port;g&&q&&g===
r&&q==p&&(c=!0)}if(!c&&(c=a.topic.split("/"),4==c.length&&"Variable"===c[2]&&e.device))if(this.getDeviceStoreItem(e.device)){if(a=this.toDeviceControlInfo(e.device))if(a=this.getDriverInstance(a))if(a=a.blockScope.getVariable(c[3]))a.set("value",e.value),a.refresh(),this.publish(d.EVENTS.ON_DRIVER_VARIABLE_CHANGED,{item:a,scope:a.scope,owner:this,save:!1,publish:!0,source:"mqtt",publishMQTT:!1})}else H.error("cant find device for : "+a.topic)},getBlock:function(a){for(var b in this.deviceInstances){var e=
this.deviceInstances[b];if(e&&e.device&&(e=e.blockScope)&&(e=e.resolveBlock(a)))return e}return this.ctx.getDriverManager().getBlock(a)},onNodeServiceStoreReady:function(a){if(this.deviceServerClient)return this.deviceServerClient;this.createDeviceServerClient(a.store)},onDriverUpdated:function(a,b){},onModuleReloaded:function(a){if(0!=this.deviceInstances.length){var e=b.replaceAll("//","/",a.module);a=a.newModule;for(var c in this.deviceInstances){var g=this.deviceInstances[c];if(g.modulePath===
e||g.baseClass===e)this.mergeFunctions(g,a.prototype),g.blockScope&&(g.blockScope.expressionModel.expressionCache={}),this.onDriverUpdated(g,e)}}},_removeInstance:function(a,b,e){a.destroy&&a.destroy();a.blockScope&&a.blockScope._destroy();delete this.deviceInstances[b];this.ctx.getBlockManager().removeScope(a.options.id);this.ctx.getDriverManager().removeDriverInstance(a,e);e.reset()},removeDriverInstance:function(a){if(a=this.getDriverInstance(a))this.ctx.getBlockManager().removeScope(a.options.id),
a.blockScope&&a.blockScope.destroy(),a.destroy();for(var b in this.deviceInstances)a==this.deviceInstances[b]&&delete this.deviceInstances[b]},getMetaValue:function(a,e){return(a=a.user)?b.getCIInputValueByName(a,e):null},getDeviceByHost:function(a,e){for(var c=b.queryStore(this.getStore(),{isDir:!1}),g=0;g<c.length;g++){var q=c[g],r=this.getMetaValue(q,O.CF_DEVICE_HOST),p=this.getMetaValue(q,O.CF_DEVICE_PORT);if(r==a&&p==e)return q}return null},getDeviceByUrl:function(a){a=b.parse_url(a);a=b.urlArgs(a.host);
return this.getDeviceById(a.device.value)},getDeviceById:function(a,e){function c(e){e=b.queryStore(e,{isDir:!1});e._S&&(e=[e]);for(var c=0;c<e.length;c++){var q=e[c];if(g.getMetaValue(q,O.CF_DEVICE_ID)==a)return q}return null}var g=this;if(e=J.isString(e)?this.getStore(e):null)return c(e);for(var q in this.stores)if(e=c(this.stores[q]))return e;return null},getDeviceByName:function(a,e){function c(e){e=b.queryStore(e,{isDir:!1});e._S&&(e=[e]);for(var c=0;c<e.length;c++){var q=e[c];if(g.getMetaValue(q,
O.CF_DEVICE_TITLE)==a)return q}return null}var g=this;if(e=J.isString(e)?this.getStore(e):null)return c(e);for(var q in this.stores)if(e=c(this.stores[q]))return e;return null},getDevicesByDriverId:function(a){var e=b.queryStore(this.getStore(),{isDir:!1});e._S&&(e=[e]);for(var c=0;c<e.length;c++){var g=e[c];if(this.getMetaValue(g,O.CF_DEVICE_ID)==a)return g}return null},_cachedItems:null,getDeviceStoreItem:function(a){if(a){if(a.hash&&this._cachedItems){var e=this._cachedItems[a.hash];if(e)return e}if(e=
this.getStore(a.deviceScope)){var c=a.devicePath?this.getItemByPath(a.devicePath):null;if(c)return c;var g=J.filter(e.data,function(a){return!0!==a.isDir});if(!g)return null;g&&!J.isArray(g)&&(g=[g]);for(var q=0;q<g.length;q++){var c=g[q],r=c.user,p=b.getCIInputValueByName(r,O.CF_DEVICE_HOST),v=b.getCIInputValueByName(r,O.CF_DEVICE_PORT),d=b.getCIInputValueByName(r,O.CF_DEVICE_ID),r=b.getCIInputValueByName(r,O.CF_DEVICE_PROTOCOL);if(v===a.port&&p===a.host&&r===a.protocol&&c.isServer()===a.isServer&&
d===a.id)return(e=e.getSync(c.path))&&(c=e),a.hash&&(this._cachedItems||(this._cachedItems={}),this._cachedItems[a.hash]=c),c}}}},onDriverSettingsChanged:function(a,e){for(var c in this.deviceInstances){var g=this.deviceInstances[c];if(g&&g.driver==e){e=e.user;(c=b.getCIByChainAndName(e,0,d.DRIVER_PROPERTY.CF_DRIVER_COMMANDS))&&c.params&&c==a&&(g.sendSettings=b.getJson(c.params));(a=b.getCIByChainAndName(e,0,d.DRIVER_PROPERTY.CF_DRIVER_RESPONSES))&&a.params&&(g.responseSettings=b.getJson(a.params));
break}}},onDeviceStateChanged:function(a,b){!0!==a._userStopped&&!0!==b&&a.info&&a.state&&a.state==d.DEVICE_STATE.DISCONNECTED&&this.ctx.getNotificationManager().postMessage({message:"Lost connection to "+a.info.host+", ...reconnecting",type:"error",showCloseButton:!1,duration:1500});!0!==b&&a.info&&a.state&&a.state==d.DEVICE_STATE.CONNECTED&&this.ctx.getNotificationManager().postMessage({message:"Connected to "+a.info.host+"",type:"success",showCloseButton:!1,duration:2E3})},connectDevice:function(a){this.checkDeviceServerConnection();
var b=this.toDeviceControlInfo(a);if(b){var e=b.hash;if(this.deviceInstances[e])return a.setState(d.DEVICE_STATE.CONNECTED),this.deviceInstances[e];a.setState(d.DEVICE_STATE.CONNECTING);this.publish(d.EVENTS.ON_STATUS_MESSAGE,{text:"Trying to connect to "+b.toString(),type:"info"});this.sendManagerCommand(d.SOCKET_SERVER_COMMANDS.MANAGER_START_DRIVER,b)}else H.error("couldnt start device, invalid control info")},onAppReady:function(a){a=a.context;a.deviceManager=this;a.driverManager=this;a.blockManager&&
b.mixin(a.blockManager.scopes,this.ctx.getBlockManager().scopes)},onHaveNoDeviceServer:function(){if(this.ctx.getNotificationManager())var a=this,b=this.ctx.getNotificationManager().postMessage({message:"Have no device server connection",type:"error",showCloseButton:!0,duration:1500,actions:{reconnect:{label:"Reconnect",action:function(){a.checkDeviceServerConnection();return b.update({message:"Reconnecting...",type:"success",actions:!1,duration:1500})}}}})},setDriverScriptContent:function(a,b,e,
c,g){return this.callMethodEx(null,"setDriverContent",[a,b,e],c,!0)},getDriverScriptContent:function(a,b,e){return this.callMethodEx(null,"getDriverContent",[a,b],e,!0)},createStore:function(a,e,c){var g=this;a=new (m("deviceStore",[w,x,v],{}))({data:a.items,idProperty:"path",parentProperty:"parentId",Model:A,id:b.createUUID(),scope:e,ctx:this.getContext(),mayHaveChildren:function(a){if(!1===a._mayHaveChildren)return!1;if(a.isDevice){if(a.driverInstance)return!0;var b=g.toDeviceControlInfo(a);b?(b=
g.getContext().getDriverManager().getDriverById(b.driverId))&&!b.blockScope&&(this.ctx.getDriverManager().createDriverBlockScope(b),g.completeDevice(a,b)):H.error("cant get device info for ",a)}return!0},observedProperties:["name","state","iconClass","enabled"]});e&&!1!==c&&this.setStore(e,a);return a},initStore:function(a,b,e){return this.createStore(a,b,e)},_deviceInfoCache:null,toDeviceControlInfo:function(a){if(!a)return null;if(!a._store&&a.id){var e=this.getItemById(a.id);e&&(a=e)}if(!a||!a.path)if(e=
this.getDeviceStoreItem(a),!e)return null;var c=a.user,e=b.getCIInputValueByName(c,O.CF_DEVICE_HOST),g=b.getCIInputValueByName(c,O.CF_DEVICE_PORT),q=b.getCIInputValueByName(c,O.CF_DEVICE_ENABLED),r=b.getCIInputValueByName(c,O.CF_DEVICE_TITLE),p=b.getCIInputValueByName(c,O.CF_DEVICE_PROTOCOL),v=b.getCIInputValueByName(c,O.CF_DEVICE_DRIVER),u=b.getCIInputValueByName(c,O.CF_DEVICE_OPTIONS),w=b.getCIInputValueByName(c,O.CF_DEVICE_LOGGING_FLAGS),c=b.getCIInputValueByName(c,O.CF_DEVICE_DRIVER_OPTIONS),
x=a.isServerSide(),A=a.isServer(),k=null;this.fixDeviceCI(a);var z=this.ctx.getDriverManager().getDriverById(v);if(z){var y=z.user,k=b.getCIInputValueByName(y,d.DRIVER_PROPERTY.CF_DRIVER_CLASS),y=b.getCIByChainAndName(y,0,d.DRIVER_PROPERTY.CF_DRIVER_RESPONSES),m={},z=z.scope;y&&y.params&&(m=b.getJson(y.params));k={host:e,port:g,protocol:p,driver:k?k.replace("./",""):"",driverId:v,driverScope:z,id:a.id,devicePath:a.path,deviceScope:a.getScope(),title:r,options:u,enabled:q,driverOptions:c,serverSide:x,
isServer:A,responseSettings:m,source:"ide",user_devices:this.ctx.getMount(a.getScope()),system_devices:this.ctx.getMount("system_devices"),system_drivers:this.ctx.getMount("system_drivers"),user_drivers:this.ctx.getMount("user_drivers"),loggingFlags:w,toString:function(){return a.getScope()+"://"+this.host+":"+this.port+"@"+this.protocol}};k.hash=h(JSON.stringify({host:e,port:g,protocol:p,driverId:v,driverScope:z,id:a.id,devicePath:a.path,deviceScope:a.getScope(),source:"ide",user_devices:this.ctx.getMount(a.getScope()),
system_devices:this.ctx.getMount("system_devices"),system_drivers:this.ctx.getMount("system_drivers"),user_drivers:this.ctx.getMount("user_drivers")}),1);if(e=this.ctx.getUserDirectory())k.userDirectory=e}return a.info=k},getItemById:function(a){for(var b in this.stores){var e;e=this.stores[b];var c=J.find(e.data,{id:a});e=c?e.getSync(c.path):null;if(e)return e}},onStoreCreated:function(a){var e=this,c=e.ctx,g=a.type,q=a.store,r=q?b.queryStore(q,{isDir:!1}):[],p=this.ctx.getDriverManager();r&&!J.isArray(r)&&
(r=[r]);if(g===d.ITEM_TYPE.DEVICE){for(g=0;g<r.length;g++){var v=q.getSync(r[g].path);if(!v)H.error("cant find "+r[g].path);else if(!v._completed){v._completed=!0;v.isDevice=!0;var u=this.getMetaValue(v,d.DEVICE_PROPERTY.CF_DEVICE_DRIVER);u?(u=p.getItemById(u),J.each(v.user.inputs,function(a){a.device=v;a.actionTarget=c.mainView.getToolbar();a.ctx=c}),J.isEmpty(u)||(this.completeDevice(v,u),v.iconClass=v.getStateIcon())):H.error("device has no driver id!")}}D(this.connectToAllDevices()).then(function(){e.publish("DevicesConnected",
a)})}},onClientMessage:function(a){this.checkDeviceServerConnection();this.deviceServerClient&&this.sendManagerCommand(d.SOCKET_SERVER_COMMANDS.WRITE_LOG_MESSAGE,a)},onClientLogMessage:function(a){this.onClientMessage(a)},onVariableChanged:function(a){var b=a.item,e=a.scope,c=b.name,g=!1!==a.publish;"value"!==c&&!1!==g&&b&&(b=b.value,(e=e.device)&&e.info&&(e=e.info,c=e.host+"/"+e.port+"/Variable/"+c,!1!==a.publishMQTT&&this.sendManagerCommand(d.SOCKET_SERVER_COMMANDS.MQTT_PUBLISH,{topic:c,data:{value:b,
device:e}})))},init:function(){var a=this;this.initUI&&this.initUI();this.stores={};this._deviceInfoCache={};this.subscribe(d.EVENTS.ON_DRIVER_VARIABLE_CHANGED,this.onVariableChanged);this.subscribe(d.EVENTS.ON_DEVICE_SERVER_CONNECTED,function(){a.autoConnectDevices&&D(a.connectToAllDevices()).then(function(){a.publish("DevicesConnected")})});this.subscribe([P.ON_NODE_SERVICE_STORE_READY,P.ON_MODULE_RELOADED,P.ON_DEVICE_DISCONNECTED,P.ON_DEVICE_CONNECTED,P.ON_CLIENT_LOG_MESSAGE,P.ON_STORE_CREATED]);
this.deviceInstances=this.consoles={};this.driverScopes={system_drivers:"system_drivers/",user_drivers:"user_drivers/"};this.lastUpTime=(new Date).getTime();setInterval(function(){var b=(new Date).getTime();3E4<b-a.lastUpTime&&(a.lastUpTime=(new Date).getTime());a.lastUpTime=b},1E3);this.initReload()},onDeviceServerConnected:function(){var a=this;this.deviceInstances&&J.each(this.deviceInstances,function(b){b&&b.device&&!b.domNode&&a.startDevice(b.device)})},addDeviceInstance:function(a,b){},ls:function(a,
b){function e(e){try{var g=this.createStore(e,a,b);this.onStoreReady(g);!1!==b&&this.publish(d.EVENTS.ON_STORE_CREATED,{data:e,owner:this,store:g,type:this.itemType});c.resolve(g)}catch(T){logError(T,"error ls drivers")}}var c=new z;if(this.prefetch&&this.prefetch[a])return e.apply(this,[this.prefetch[a]]),delete this.prefetch[a],c;r("php")?this.runDeferred(null,"ls",[a]).then(e.bind(this)):this._getText(require.toUrl(a).replace("main.js","")+a+".json",{sync:!1,handleAs:"json"}).then(e.bind(this));
return c},hasStore:function(a){return this.stores[a]},fixDeviceCI:function(a){var e=d.DEVICE_PROPERTY,c=a.user,g=b.getCIByChainAndName(c,0,e.CF_DEVICE_DRIVER_OPTIONS);g?(g.data=[{value:2,label:"Runs Server Side"},{value:4,label:"Show Debug Messages"},{value:16,label:"Make Server"}],g.group="Common"):c.inputs.push({chainType:0,"class":"cmx.types.ConfigurableInformation",dataRef:"",dataSource:"",description:null,enabled:!0,enumType:"-1",flags:-1,group:"Common",id:e.CF_DEVICE_DRIVER_OPTIONS,name:e.CF_DEVICE_DRIVER_OPTIONS,
order:1,params:null,platform:null,title:"Driver Options",type:5,uid:"-1",value:0,data:[{value:2,label:"Runs Server Side"},{value:4,label:"Show Debug Messages"},{value:16,label:"Make Server"}],visible:!0,device:a});(g=b.getCIByChainAndName(c,0,e.CF_DEVICE_LOGGING_FLAGS))?g.group="Logging":c.inputs.push({chainType:0,"class":"cmx.types.ConfigurableInformation",dataRef:"",dataSource:"",description:null,enabled:!0,enumType:"-1",flags:-1,group:"Logging",id:e.CF_DEVICE_LOGGING_FLAGS,name:e.CF_DEVICE_LOGGING_FLAGS,
order:1,params:null,platform:null,title:"Logging Flags",type:e.CF_DEVICE_LOGGING_FLAGS,uid:"-1",value:0,data:[{value:2,label:"On Connected"},{value:4,label:"On Disconnected"},{value:8,label:"On Error"},{value:16,label:"Commands"},{value:32,label:"Responses"}],visible:!0,device:a});if(e=b.getCIByChainAndName(c,0,e.CF_DEVICE_PROTOCOL))e.type=3,e.options=[{label:"TCP",value:"tcp"},{label:"UDP",value:"udp"},{label:"Driver",value:"driver"},{label:"SSH",value:"ssh"},{label:"Serial",value:"serial"},{label:"MQTT",
value:"mqtt"}];a.id||(a.id=b.getCIInputValueByName(c,d.DEVICE_PROPERTY.CF_DEVICE_ID));(e=b.getCIByChainAndName(c,0,d.DEVICE_PROPERTY.CF_DEVICE_OPTIONS))?e.device=a:c.inputs.push({chainType:0,"class":"cmx.types.ConfigurableInformation",dataRef:"",dataSource:"",description:null,enabled:!0,enumType:"-1",flags:-1,group:"Network",id:"options",name:"options",order:1,params:null,platform:null,title:"Options",type:28,uid:"-1",value:{},visible:!0,device:a})}})})},"davinci/ve/tools/CreateTool":function(){define("dojo/_base/declare dojo/dom-style ../tools/_Tool davinci/Workbench davinci/workbench/Preferences ../metadata ../widget dojo/Deferred dojo/promise/all davinci/ve/States davinci/commands/CompoundCommand ../commands/AddCommand ../commands/MoveCommand ../commands/ResizeCommand ../commands/StyleCommand".split(" "),
function(n,m,k,h,d,b,c,g,p,a,e,q,u,w,r){return n("davinci.ve.tools.CreateTool",k,{constructor:function(a,e){this._data=a;this._userData=e;a&&a.type&&(e=b.queryDescriptor(a.type,"resizableOnCreate")||b.queryDescriptor(a.type,"resizable"),"none"!==e&&(this._resizable=e),this._dropCursor=b.queryDescriptor(a.type,"dropCursor"));this._requireHelpers(a)},activate:function(a){(this._context=a)&&a.rootNode&&(this._oldCursor=a.rootNode.style.cursor);a.rootNode.style.cursor="crosshair"},deactivate:function(){this._context&&
this._context.rootNode&&(this._context.rootNode.style.cursor=this._oldCursor);this._setTarget(null);delete this._mdPosition;this._context.dragMoveCleanup()},_getContentPosition:function(a){if(a)return a.target&&(a={x:a.pageX,y:a.pageY}),a},onMouseDown:function(a){this._target=c.getEnclosingWidget(a.target);this._mdPosition=this._getContentPosition(a);this._dragRect=null},onMouseMove:function(a){var b=this._context,e=b._chooseParent;a.target!=this._lastEventTarget&&e.setProposedParentWidget(null);
this._lastEventTarget=a.target;if(this._mdPosition){if(this._resizable){b.deselect();var c=this._getContentPosition(a),g,q,r=!0,p=!0;c.x>=this._mdPosition.x?(e=this._mdPosition.x,q=c.x-this._mdPosition.x):(e=c.x,q=this._mdPosition.x-c.x,r=!1);c.y>=this._mdPosition.y?(g=this._mdPosition.y,c=c.y-this._mdPosition.y):(g=c.y,c=this._mdPosition.y-c.y,p=!1);a.shiftKey&&(q>=c?(c=q,p||(g=this._mdPosition.y-c)):(q=c,r||(e=this._mdPosition.x-q)));this._dragSizeRect||(a=b.getDocument().body,this._dragSizeRect=
dojo.create("div",{style:"border:1px dashed black;z-index:1000001;position:absolute;"},a));a=this._dragSizeRect.style;a.left=e+"px";a.top=g+"px";a.width=q+"px";a.height=c+"px"}}else e=!this.createWithFlowLayout(),this._setTarget(a.target,a),g=b.getPreference("showPossibleParents"),g=!g&&this._spaceKeyDown||g&&!this._spaceKeyDown,q={x:a.pageX,y:a.pageY},c={l:a.pageX,t:a.pageY,w:0,h:0},r=d.getPreferences("davinci.ve.editorPrefs",h.getProject()).snap&&e,p=!e,"object"==typeof this._dropCursor&&!1===this._dropCursor.show&&
(p=!1),b.dragMoveUpdate({data:this._data,position:q,absolute:e,currentParent:null,eventTarget:a.target,rect:c,doSnapLinesX:r,doSnapLinesY:r,doFindParentsXY:g,doCursor:p,beforeAfter:this._dropCursor&&this._dropCursor.beforeAfter})},onMouseUp:function(a){var e=this._context,g=e._chooseParent,q=!this.createWithFlowLayout();this._dragSizeRect&&(this._dragSizeRect.parentNode.removeChild(this._dragSizeRect),this._dragSizeRect=null);var r=e.getActiveDragDiv();r&&(r=dojo.query(".maqCandidateParents",r),1==
r.length&&(r[0].innerHTML=""));this._lastEventTarget=null;var p,v,d,u,r=this._getContentPosition(a);if(this._mdPosition){var w=!0,k=!0;this._position=dojo.mixin({},this._mdPosition);r.x<this._mdPosition.x&&(this._position.x=r.x);"height"==this._resizable?d=0:0<=r.x-this._mdPosition.x?d=r.x-this._mdPosition.x:(d=this._mdPosition.x-r.x,w=!1);r.y<this._mdPosition.y&&(this._position.y=r.y);"width"==this._resizable?u=0:0<=r.y-this._mdPosition.y?u=r.y-this._mdPosition.y:(u=this._mdPosition.y-r.y,k=!1);
a.shiftKey&&(d>=u?(u=d,k||(t=this._mdPosition.y-u)):(d=u,w||(l=this._mdPosition.x-d)))}else this._position=r;this._resizable&&this._position&&(4<d||4<u)&&(p={w:0<d?d:void 0,h:0<u?u:void 0});if(d=g.getProposedParentWidget()){if(v=d.parent,d.refChild){var m=d.parent.getChildren().indexOf(d.refChild);0<=m?d.refAfter&&m++:m=null}}else{a=this._getTarget()||c.getEnclosingWidget(a.target);var n=this._data;d=g.getAllowedTargetWidget(a,n,!0,{absolute:q});var Q=dojo.isArray(n)?n[0].type:n.type,N=c.getWidgetHelper(Q);
1<d.length&&N&&N.chooseParent?v=N.chooseParent(d):0<d.length&&(v=0<=d.indexOf(a)?a:d[0])}g.setProposedParentWidget(null);g=function(a){this.prototype=Error.prototype;this.name="InvalidTargetWidgetError";this.message=a?a:"The selected target is not a valid parent for the given widget."};try{n=this._data instanceof Array?this._data:[this._data];if(!v){var O=n.map(function(a){return a.type}).join(", "),P=n.map(function(a){var e=b.getAllowedParent(a.type);a=a.type;var c=b.queryDescriptor(a,"class");a=
c?c.split(/\s+/).push(a):[a];return{allowedParent:e,classList:a}});p="The selected target is not a valid parent for the given widget.";1===P.length&&P[0].allowedParent&&(p+=['The widget \x3cspan style\x3d"font-family: monospace"\x3e',O,"\x3c/span\x3e requires ",1<P[0].allowedParent.length?"one of the following parent types":"the parent type",' \x3cspan style\x3d"font-family: monospace"\x3e',P[0].allowedParent.join(", "),"\x3c/span\x3e."].join(""),Q=n[0].type,(N=c.getWidgetHelper(Q))&&N.isAllowedError&&
(p=N.isAllowedError({errorMsg:p,type:Q,allowedParent:P[0].allowedParent,absolute:q})));throw new g(p);}for(q=0;q<n.length;q++){var L=n[q].type,K=b.getLibraryForType(L),M=K.name,Q=[L,e];e._widgets.hasOwnProperty(M)||(e._widgets[M]=0);1==++e._widgets[M]&&b.invokeCallback(K,"onFirstAdd",Q);b.invokeCallback(K,"onAdd",Q)}this.create({target:v,index:m,directTarget:this._getTarget(),size:p,userData:this._userData})}catch(I){var U,V;I instanceof g?(U=I.message,V="Invalid Target"):(U="The action was interrupted by an internal error.",
V="Error",console.error(I));h.showMessage(V,U)}finally{this.exitCreateToolOnMouseUp()&&e.setActiveTool(null),this._cleanupActions()}},_cleanupActions:function(){var a=this._context;a.dragMoveCleanup();a.inlineEditActive()||this._context.getDocument().defaultView.focus()},onKeyDown:function(a){dojo.stopEvent(a);var b=this._context;if(a.keyCode==dojo.keys.ESCAPE)b.setActiveTool(null),this._cleanupActions();else{var e=this._context.getPreference("showPossibleParents");a.keyCode==dojo.keys.SPACE?this._spaceKeyDown=
!0:this._processKeyDown(a.keyCode);a=!e&&this._spaceKeyDown||e&&!this._spaceKeyDown;var e=this._data,e=dojo.isArray(e)?e[0].type:e.type,b=b._chooseParent,c=!this.createWithFlowLayout(),g=!c;"object"==typeof this._dropCursor&&!1===this._dropCursor.show&&(g=!1);b.dragUpdateCandidateParents({widgetType:e,showCandidateParents:a,absolute:c,doCursor:g,beforeAfter:this._dropCursor&&this._dropCursor.beforeAfter,currentParent:null})}},_processKeyDown:function(a){if(49<=a&&57>=a){var b=this._context._chooseParent,
e=b.getProposedParentsList();e&&1<e.length&&(a=e.length-(a-48),0<=a&&b.setProposedParentWidget(e[a]))}},onKeyUp:function(a){a.keyCode==dojo.keys.SPACE&&(this._spaceKeyDown=!1);dojo.stopEvent(a);a=this._context.getPreference("showPossibleParents");a=!a&&this._spaceKeyDown||a&&!this._spaceKeyDown;var b=this._data,b=dojo.isArray(b)?b[0].type:b.type,e=this._context._chooseParent,c=!this.createWithFlowLayout(),g=!c;"object"==typeof this._dropCursor&&!1===this._dropCursor.show&&(g=!1);e.dragUpdateCandidateParents({widgetType:b,
showCandidateParents:a,absolute:c,doCursor:g,beforeAfter:this._dropCursor&&this._dropCursor.beforeAfter,currentParent:null})},_requireHelpers:function(a){var b=[];if(!a||!a.type)return a instanceof Array&&a.forEach(function(a){b.concat(this._requireHelpers(a))},this),b;b.push(c.requireWidgetHelper(a.type));a.children&&!dojo.isString(a.children)&&dojo.every(a.children,function(a){return b.concat(this._requireHelpers(a))},this);return b},create:function(a){if(a&&this._data){for(var b=a.target,e,c;b&&
!(e=b.getContainerNode());)c=b,b=b.getParent();var g=a.index,q;e=!1;this._data.properties&&this._data.properties.style&&0<this._data.properties.style.indexOf("absolute")&&(e=!0);!e&&this.createWithFlowLayout()?c&&(g=b.indexOf(c)):a.position?q=a.position:this._position&&(q=this._position);this._data.context=this._context;p(this._requireHelpers(this._data)).then(function(){this._create({parent:b,index:g,position:q,size:a.size,userData:this._userData})}.bind(this))}},_create:function(a){var b=this._context,
d=[],v=new g;if(!this._loadType(this._data,d))return v.reject(),v;p(d).then(function(){var g;this.createNewWidget()?dojo.withDoc(this._context.getDocument(),function(){g=c.createWidget(this._data,this._userData,a.parent)},this):g=this._widget;g||v.reject(Error("Failed to create widget"));var p=new e;if(this.createNewWidget()){a.size=this._getInitialSize(g,a);p.add(new q(g,a.parent||this._context.getContainerNode(),a.index));var d=!0;g&&g.properties&&1==g.properties.ignorePosition&&(d=!1);g&&g.metadata&&
1==g.metadata.ignorePosition&&(d=!1);a.position&&d&&(d=b.getPreference("absoluteWidgetsZindex"),"xblox/RunScript"!==g.type&&"xblox/CSSState"!==g.type&&(p.add(new r(g,[{position:"absolute"},{"z-index":d}])),p.add(new u(g,a.position.x,a.position.y))));if(a.size){var h=a.size.w,x=a.size.h;if(null!==h&&null!==x&&(p.add(new w(g,h,x)),(d=c.getWidgetHelper(g.type))&&d.onCreateResize))d.onCreateResize(p,g,h,x)}this.checkAddToCurrentState(p,g)}d=g.id;this.addToCommandStack&&this.addToCommandStack(p,{widget:g});
p.isEmpty()||this._context.getCommandStack().execute(p);g.isLayoutContainer&&g.resize();g=c.byId(d);d=c.getWidgetHelper(g.type);p=null;d&&d.onAdded&&(p=d.onAdded(a.parent,g));this._select(p||g);this._widget=g;v.resolve(g);this.mouseUpProcessingCompleted()}.bind(this));return v},_loadType:function(a,b){if(!a||!a.type)return!1;b.push(this._context.loadRequires(a.type,!0));a.children&&!dojo.isString(a.children)&&dojo.forEach(a.children,function(a){this._loadType(a,b)}.bind(this));return!0},_getInitialSize:function(a,
e){var c=e.size,g=a.getHelper();g&&g.initialSize&&(g=g.initialSize(e))&&(c=g);!c&&(a=b.queryDescriptor(a.type,"initialSize"))&&(e&&!e.position?(e=e.parent,"html.body"==e.type?c="auto"==a||"auto"==a.flow?{w:"100%",h:"auto"}:this._getExplicitFlowSizeFromMetadata(a):this._isTypeContainer(e.type)?"auto"==a||"auto"==a.flow?(e=e.getData().children,c={w:"100%",h:e&&e.length?"auto":"100%"}):c=this._getExplicitFlowSizeFromMetadata(a):c=this._getExplicitFlowSizeFromMetadata(a)):c="auto"==a||"auto"==a.absolute?
{w:"300px",h:"300px"}:this._getExplicitAbsoluteSizeFromMetadata(a));return c},_getExplicitFlowSizeFromMetadata:function(a){var b=null;return b=a.flow?{w:a.flow.width?a.flow.width:"100%",h:a.flow.height?a.flow.height:"auto"}:{w:a.width?a.width:"100%",h:a.height?a.height:"auto"}},_getExplicitAbsoluteSizeFromMetadata:function(a){var b=null;return b=a.absolute?{w:a.absolute.width?a.absolute.width:"300px",h:a.absolute.height?a.absolute.height:"300px"}:{w:a.width?a.width:"300px",h:a.height?a.height:"300px"}},
_isTypeContainer:function(a){return a&&("dijit/layout/ContentPane"==a||"html.div"==a||"html.form"==a||"html.fieldset"==a)},_select:function(a){if(a)if(a.type){var e=b.getSmartInput(a.type);e&&e.then?e.then(function(b){!this._data.fileDragCreate&&b&&b.displayOnCreate?(a.inLineEdit_displayOnCreate=b.displayOnCreate,this._context.select(a,null,!0)):this._context.select(a)}.bind(this)):(console.error("create tool failed::_select smart input is null"),this._context.select(a))}else console.error("create tool failed::_select w.type is null");
else console.error("create tool failed::_select w is null")},createWithFlowLayout:function(){return b.queryDescriptor(this._data.type,"forceAbsolute")?!1:this._context.getFlowLayout()},createNewWidget:function(){return!0},exitCreateToolOnMouseUp:function(){return!0},mouseUpProcessingCompleted:function(){},checkAddToCurrentState:function(b,e){var c=a.getFocus(e._edit_context.rootNode);if(c&&c.stateContainerNode){var c=a.getState(c.stateContainerNode),g=d.getPreferences("davinci.ve.editorPrefs",h.getProject());
c&&g.newWidgetsCurrentState&&(g=m.get(e.domNode,"display"),b.add(new r(e,[{display:"none"}])),b.add(new r(e,[{display:g}],c)))}}})})},"xideve/views/Palette":function(){define("dojo/_base/declare dojo/_base/lang xide/layout/ContentPane xide/views/_EditorBase xide/views/TextEditor xide/utils davinci/ve/palette/Palette".split(" "),function(n,m,k,h,d,b,c){return n("xideve/views/Palette",[c],{_init:function(){delete this._loaded;this._presetSections={};this._createFolderTemplate()}})})},"xideve/widgets/WidgetLite":function(){define(["dojo/_base/declare",
"dijit/_WidgetBase","dojo/parser","xide/mixins/EventedMixin"],function(n,m,k,h){return n("xideve/widgets/WidgetLite",[m,h],{buildRendering:function(){this.inherited(arguments);/dojotype/i.test(this.domNode.innerHTML||"")&&(this._startupWidgets=dojo.parser.parse(this.domNode,{noStart:!this._earlyTemplatedStartup,inherited:{dir:this.dir,lang:this.lang}}))},_destroyContent:function(){var d=this.containerNode||this.domNode;for(dojo.forEach(dojo.query("[widgetId]",d).map(dijit.byNode),function(b){b.destroy()});d.firstChild;)dojo._destroyElement(d.firstChild);
dojo.forEach(this._tooltips,function(b){b.destroy()});delete this._tooltips},startup:function(){dojo.forEach(this._startupWidgets,function(d){d&&!d._started&&d.startup&&d.startup()});this.inherited(arguments)}})})},"dojo/request/xhr":function(){define(["../errors/RequestError","./watch","./handlers","./util","../has"],function(n,m,k,h,d){function b(a,b){var e=a.xhr;a.status=a.xhr.status;a.text=e.responseText;"xml"===a.options.handleAs&&(a.data=e.responseXML);if(!b)try{k(a)}catch(A){b=A}b?this.reject(b):
h.checkStatus(e.status)?this.resolve(a):(b=new n("Unable to load "+a.url+" status: "+e.status,a),this.reject(b))}function c(a){return this.xhr.getResponseHeader(a)}function g(r,v,x){var A=h.parseArgs(r,h.deepCreate(w,v),d("native-formdata")&&v&&v.data&&v.data instanceof FormData);r=A.url;v=A.options;var k,y=h.deferred(A,q,p,a,b,function(){k&&k()}),B=A.xhr=g._create();if(!B)return y.cancel(new n("XHR was not created")),x?y:y.promise;A.getHeader=c;e&&(k=e(B,y,A));var C=v.data,E=!v.sync,F=v.method;try{B.open(F,
r,E,v.user||u,v.password||u);v.withCredentials&&(B.withCredentials=v.withCredentials);var G=v.headers;r="application/x-www-form-urlencoded";if(G)for(var D in G)"content-type"===D.toLowerCase()?r=G[D]:G[D]&&B.setRequestHeader(D,G[D]);r&&!1!==r&&B.setRequestHeader("Content-Type",r);G&&"X-Requested-With"in G||B.setRequestHeader("X-Requested-With","XMLHttpRequest");h.notify&&h.notify.emit("send",A,y.promise.cancel);B.send(C)}catch(H){y.reject(H)}m(y);B=null;return x?y:y.promise}d.add("native-xhr",function(){return"undefined"!==
typeof XMLHttpRequest});d.add("dojo-force-activex-xhr",function(){return d("activex")&&!document.addEventListener&&"file:"===window.location.protocol});d.add("native-xhr2",function(){if(d("native-xhr")){var a=new XMLHttpRequest;return"undefined"!==typeof a.addEventListener&&("undefined"===typeof opera||"undefined"!==typeof a.upload)}});d.add("native-formdata",function(){return"function"===typeof FormData});var p,a,e,q;d("native-xhr2")?(p=function(a){return!this.isFulfilled()},q=function(a,b){b.xhr.abort()},
e=function(a,b,e){function c(a){b.handleResponse(e)}function g(a){a=new n("Unable to load "+e.url+" status: "+a.target.status,e);b.handleResponse(e,a)}function q(a){a.lengthComputable&&(e.loaded=a.loaded,e.total=a.total,b.progress(e))}a.addEventListener("load",c,!1);a.addEventListener("error",g,!1);a.addEventListener("progress",q,!1);return function(){a.removeEventListener("load",c,!1);a.removeEventListener("error",g,!1);a.removeEventListener("progress",q,!1);a=null}}):(p=function(a){return a.xhr.readyState},
a=function(a){return 4===a.xhr.readyState},q=function(a,b){a=b.xhr;b=typeof a.abort;"function"!==b&&"object"!==b&&"unknown"!==b||a.abort()});var u,w={data:null,query:null,sync:!1,method:"GET"};g._create=function(){throw Error("XMLHTTP not available");};if(d("native-xhr")&&!d("dojo-force-activex-xhr"))g._create=function(){return new XMLHttpRequest};else if(d("activex"))try{new ActiveXObject("Msxml2.XMLHTTP"),g._create=function(){return new ActiveXObject("Msxml2.XMLHTTP")}}catch(r){try{new ActiveXObject("Microsoft.XMLHTTP"),
g._create=function(){return new ActiveXObject("Microsoft.XMLHTTP")}}catch(v){}}h.addCommonMethods(g);return g})},"davinci/ve/ThemeModifier":function(){define("dojo/_base/declare ../model/Path ../model/Factory ./utils/URLRewrite ./commands/ModifyRuleCommand ./commands/StyleCommand davinci/_common system/resource".split(" "),function(n,m,k,h,d,b,c,g){return n("davinci.ve.ThemeModifier",null,{_getCssFiles:function(){if(this.cssFiles)return this.cssFiles;this.cssFiles=[];if(this.themeCssFiles){var b=
this._themePath.getParentPath();this.cssFiles=this.themeCssFiles.map(function(a){return k.getModel({url:b.append(a).toString(),includeImports:!0})})}return this.cssFiles},_getThemeResource:function(b){b=this._themePath.getParentPath().append(b).toString();return system.resource.findResource(b)},getDeltaRule:function(b){var a=null,e=this.cssFiles[0],c=b.getSelectorText();this.cssFiles.forEach(function(b){var g=b.getRules(c);0<g.length&&(e=b);g.forEach(function(e){e.parent.url==b.url&&(a=e)}.bind(this))}.bind(this));
!a&&e&&(a=e.addRule(c+" {}"));return a},_markDirty:function(b,a){this._dirtyResource||(this._dirtyResource={});this._dirtyResource[b]={time:Date.now(),modelObject:a};this._srcChanged()},getCommandForStyleChange:function(c,a){var e=a||this.getSelection();a=e.length?e[e.length-1]:void 0;1<e.length&&this.select(a);if("inline"==c.appliesTo){for(var g=[],p=new m(this.fileName),e=0;e<c.values.length;e++)for(var w in c.values[e]){if(h.containsUrl(c.values[e][w])&&!h.isAbsolute(c.values[e][w])){var r=new m(h.getUrl(c.values[e][w]));
if(r.isAbsolute){var v={};v[w]=c.values[e][w]}else r=r.relativeTo(p).toString(),h.replaceUrl(c.values[e][w],r)}else v={},v[w]=c.values[e][w];g.push(v)}c=new b(a,g,c.applyToWhichStates)}else{if("proposal"==c.appliesTo.type){w=this.model.find({elementType:"CSSFile",relativeURL:c.appliesTo.targetFile},!0);if(!w&&this.cssFiles){for(e=0;this.cssFiles.length;e++)if(this.cssFiles[e].url===c.appliesTo.targetFile){w=this.cssFiles[e];break}if(!w)return}w=w.addRule(c.appliesTo.ruleString+" {}")}else w=c.appliesTo.rule;
c=new d(w,c.values,this)}return c},saveDynamicCssFiles:function(b,a){var e=[],q={visit:function(b){"CSSFile"==b.elementType&&b.isDirty()&&e.push(b.save(a).then(function(e){a||g.findResource(b.url).removeWorkingCopy();b.dirtyResource=a;return b},function(a){console.error(dojo.string.substitute(c.errorSavingFile,[b.url,a]));return a}));return!1}};b&&b.forEach(function(a){a.visit(q)});return e},dirtyDynamicCssFiles:function(b){if(null==b)return console.error("dirtyDynamicCssFiles:invalid arg"),!1;var a=
!1,e={visit:function(b){"CSSFile"==b.elementType&&b.isDirty()&&(a=!0);return a}};b&&b.forEach(function(b){if(a)return a;b.visit(e)});return a},close:function(){this.cssFiles&&this.cssFiles.forEach(function(b){b.close();require("davinci/model/Factory").closeModel(b)}.bind(this));delete this.cssFiles},destroy:function(){this.close()}})})},"xide/views/_CIDialog":function(){define(["dcl/dcl","xide/types","xide/utils","xide/views/_Dialog","xide/views/CIView"],function(n,m,k,h,d){m=n(h,{declaredClass:"xide/views/_CIDialog",
type:m.DIALOG_TYPE.INFO,size:m.DIALOG_SIZE.SIZE_NORMAL,bodyCSS:{height:"auto","min-height":"200px",padding:"8px","margin-right":"16px"},cssClass:"bootstrap3-dialog CIDialog",failedText:" Failed!",successText:": Success!",showSpinner:!0,spinner:'  \x3cspan class\x3d"fa-spinner fa-spin"/\x3e',notificationMessage:null,cisView:null,getData:function(){for(var b=this.cisView.getCIS(),c=0;c<b.length;c++){var g=b[c];g._widget&&delete g._widget}return b},getField:function(b){var c=(b=k.getCIByChainAndName(this.cisView.cis,
0,b))?b.value:null,g=null;b&&(g=1==b.invalid);return g?null:c},onShow:function(b){this.cisView.startup();this.resize();this.startDfd.resolve()},onReady:function(){},message:function(b){b=b.owner;var c=b.initWithCIS(b.cis);b.cisView=c;return $(c.domNode)},initWithCIS:function(b){b=b||[];b={delegate:this,options:{},cis:b.inputs||b,style:"height:inherit",tabContainerStyle:"height:inherit",resizeToParent:!0};var c=this;k.mixin(b,this.viewArgs);b=k.addWidget(d,b,this.containerNode,null,!1);c.onCIValueChanged&&
b._on("valueChanged",function(b){c.onCIValueChanged(b.ci,b.newValue,b.oldValue)});b._on("widget",function(b){c._emit("widget",b)});this.add(b);return b}});n.chainAfter(m,"onReady");n.chainAfter(m,"onOk");n.chainAfter(m,"onCancel");n.chainAfter(m,"resize");n.chainAfter(m,"onCIValueChanged");n.chainAfter(m,"onShow");return m})},"davinci/js/JSExpression":function(){define(["dojo/_base/declare","davinci/js/JSElement"],function(n,m){return n("davinci.js.JSExpression",m,{constructor:function(){this.elementType=
"JSExpression"},getText:function(){var k="";this.comment&&(k+=this.printNewLine(context)+this.comment.getText(context));this.label&&(k+=this.printNewLine(context)+this.label.getText(context));return k},add:function(k){}})})},"dijit/_MenuBase":function(){define("dojo/_base/array dojo/_base/declare dojo/dom dojo/dom-attr dojo/dom-class dojo/_base/lang dojo/mouse dojo/on dojo/window ./a11yclick ./registry ./_Widget ./_CssStateMixin ./_KeyNavContainer ./_TemplatedMixin".split(" "),function(n,m,k,h,d,
b,c,g,p,a,e,q,u,w,r){return m("dijit._MenuBase",[q,r,w,u],{selected:null,_setSelectedAttr:function(a){this.selected!=a&&(this.selected&&(this.selected._setSelected(!1),this._onChildDeselect(this.selected)),a&&a._setSelected(!0),this._set("selected",a))},activated:!1,_setActivatedAttr:function(a){d.toggle(this.domNode,"dijitMenuActive",a);d.toggle(this.domNode,"dijitMenuPassive",!a);this._set("activated",a)},parentMenu:null,popupDelay:500,passivePopupDelay:Infinity,autoFocus:!1,childSelector:function(a){var b=
e.byNode(a);return a.parentNode==this.containerNode&&b&&b.focus},postCreate:function(){var q=this,r="string"==typeof this.childSelector?this.childSelector:b.hitch(this,"childSelector");this.own(g(this.containerNode,g.selector(r,c.enter),function(){q.onItemHover(e.byNode(this))}),g(this.containerNode,g.selector(r,c.leave),function(){q.onItemUnhover(e.byNode(this))}),g(this.containerNode,g.selector(r,a),function(a){q.onItemClick(e.byNode(this),a);a.stopPropagation()}),g(this.containerNode,g.selector(r,
"focusin"),function(){q._onItemFocus(e.byNode(this))}));this.inherited(arguments)},onKeyboardSearch:function(a,b,e,c){this.inherited(arguments);if(a&&(-1==c||a.popup&&1==c))this.onItemClick(a,b)},_keyboardSearchCompare:function(a,b){return a.shortcutKey?b==a.shortcutKey.toLowerCase()?-1:0:this.inherited(arguments)?1:0},onExecute:function(){},onCancel:function(){},_moveToPopup:function(a){if(this.focusedChild&&this.focusedChild.popup&&!this.focusedChild.disabled)this.onItemClick(this.focusedChild,
a);else(a=this._getTopMenu())&&a._isMenuBar&&a.focusNext()},_onPopupHover:function(){this.set("selected",this.currentPopupItem);this._stopPendingCloseTimer()},onItemHover:function(a){this.activated?(this.set("selected",a),d.add(a.domNode,"ui-state-hover"),!a.popup||a.disabled||this.hover_timer||(this.hover_timer=this.defer(function(){this._openItemPopup(a)},this.popupDelay))):Infinity>this.passivePopupDelay&&(this.passive_hover_timer&&this.passive_hover_timer.remove(),this.passive_hover_timer=this.defer(function(){this.onItemClick(a,
{type:"click"})},this.passivePopupDelay));this._hoveredChild=a;a._set("hovering",!0)},_onChildDeselect:function(a){this._stopPopupTimer();this.currentPopupItem==a&&(this._stopPendingCloseTimer(),this._pendingClose_timer=this.defer(function(){this.currentPopupItem=this._pendingClose_timer=null;a._closePopup()},this.popupDelay))},onItemUnhover:function(a){d.remove(a.domNode,"ui-state-hover");this._hoveredChild==a&&(this._hoveredChild=null);this.passive_hover_timer&&(this.passive_hover_timer.remove(),
this.passive_hover_timer=null);a._set("hovering",!1)},_stopPopupTimer:function(){this.hover_timer&&(this.hover_timer=this.hover_timer.remove())},_stopPendingCloseTimer:function(){this._pendingClose_timer&&(this._pendingClose_timer=this._pendingClose_timer.remove())},_getTopMenu:function(){for(var a=this;a.parentMenu;a=a.parentMenu);return a},onItemClick:function(a,b){this.passive_hover_timer&&this.passive_hover_timer.remove();this.focusChild(a);if(a.disabled)return!1;a.popup?(this.set("selected",
a),this.set("activated",!0),b=/^key/.test(b._origType||b.type)||0==b.clientX&&0==b.clientY,this._openItemPopup(a,b)):(this.onExecute(),a._onClick?a._onClick(b):a.onClick(b))},_openItemPopup:function(a,e){if(a!=this.currentPopupItem){this.currentPopupItem&&(this._stopPendingCloseTimer(),this.currentPopupItem._closePopup());this._stopPopupTimer();var c=a.popup;c.parentMenu=this;this.own(this._mouseoverHandle=g.once(c.domNode,"mouseover",b.hitch(this,"_onPopupHover")));var q=this;a._openPopup({parent:this,
orient:this._orient||["after","before"],onCancel:function(){e&&q.focusChild(a);q._cleanUp()},onExecute:b.hitch(this,"_cleanUp",!0),onClose:function(){q._mouseoverHandle&&(q._mouseoverHandle.remove(),delete q._mouseoverHandle)}},e);this.currentPopupItem=a}},onOpen:function(){this.isShowingNow=!0;this.set("activated",!0)},onClose:function(){this.set("activated",!1);this.set("selected",null);this.isShowingNow=!1;this.parentMenu=null},_closeChild:function(){this._stopPopupTimer();this.currentPopupItem&&
(this.focused&&(h.set(this.selected.focusNode,"tabIndex",this.tabIndex),this.selected.focusNode.focus()),this.currentPopupItem._closePopup(),this.currentPopupItem=null)},_onItemFocus:function(a){if(this._hoveredChild&&this._hoveredChild!=a)this.onItemUnhover(this._hoveredChild);this.set("selected",a)},_onBlur:function(){this._cleanUp(!0);this.inherited(arguments)},_cleanUp:function(a){this._closeChild();"undefined"==typeof this.isShowingNow&&this.set("activated",!1);a&&this.set("selected",null)}})})},
"dijit/layout/_ContentPaneResizeMixin":function(){define("dojo/_base/array dojo/_base/declare dojo/dom-class dojo/dom-geometry dojo/dom-style dojo/_base/lang dojo/query ../registry ../Viewport ./utils".split(" "),function(n,m,k,h,d,b,c,g,p,a){return m("dijit.layout._ContentPaneResizeMixin",null,{doLayout:!0,isLayoutContainer:!0,startup:function(){if(!this._started){var a=this.getParent();this._childOfLayoutWidget=a&&a.isLayoutContainer;this._needLayout=!this._childOfLayoutWidget;this.inherited(arguments);
this._isShown()&&this._onShow();this._childOfLayoutWidget||this.own(p.on("resize",b.hitch(this,"resize")))}},_checkIfSingleChild:function(){if(this.doLayout){var a=[],b=!1;c("\x3e *",this.containerNode).some(function(e){var c=g.byNode(e);c&&c.resize?a.push(c):!/script|link|style/i.test(e.nodeName)&&e.offsetHeight&&(b=!0)});this._singleChild=1!=a.length||b?null:a[0];k.toggle(this.containerNode,this.baseClass+"SingleChild",!!this._singleChild)}},resize:function(a,b){this._resizeCalled=!0;this._scheduleLayout(a,
b)},_scheduleLayout:function(a,b){this._isShown()?this._layout(a,b):(this._needLayout=!0,this._changeSize=a,this._resultSize=b)},_layout:function(e,c){delete this._needLayout;this._wasShown||!1===this.open||this._onShow();e&&h.setMarginBox(this.domNode,e);var g=this.containerNode;g===this.domNode?(c=c||{},b.mixin(c,e||{}),"h"in c&&"w"in c||(c=b.mixin(h.getMarginBox(g),c)),this._contentBox=a.marginBox2contentBox(g,c)):this._contentBox=h.getContentBox(g);this._layoutChildren()},_layoutChildren:function(){this._checkIfSingleChild();
if(this._singleChild&&this._singleChild.resize){var a=this._contentBox||h.getContentBox(this.containerNode);this._singleChild.resize({w:a.w,h:a.h})}else for(var a=this.getChildren(),b,c=0;b=a[c++];)b.resize&&b.resize()},_isShown:function(){if(!this.domNode)return!1;if(this._childOfLayoutWidget)return this._resizeCalled&&"open"in this?this.open:this._resizeCalled;if("open"in this)return this.open;var a=this.domNode,b=this.domNode.parentNode;return"none"!=a.style.display&&"hidden"!=a.style.visibility&&
!k.contains(a,"dijitHidden")&&b&&b.style&&"none"!=b.style.display},_onShow:function(){this._wasShown=!0;this._needLayout&&this._layout(this._changeSize,this._resultSize);this.inherited(arguments)}})})},"davinci/davinci_":function(){define("dijit/dijit ./Workbench ./ve/palette/HtmlWidgets ./ve/views/StatesView ./ve/views/SwitchingStyleView ./actions/UndoAction ./actions/SelectThemeAction ./actions/SelectLayoutAction ./actions/RedoAction ./actions/DownloadAction ./actions/StickyNoteAction ./actions/SaveAsWidget ./actions/UserNameAction ./actions/LogoutAction ./ve/actions/CopyAction ./ve/actions/CutAction ./ve/actions/DeleteAction ./ve/actions/PasteAction ./ve/actions/DuplicateAction ./ve/actions/EditValueAction ./ve/actions/EditPropertiesAction ./ve/actions/SurroundAction ./ve/actions/SelectParentAction ./ve/actions/SelectAncestorAction ./ve/actions/UnselectAllAction ./ve/actions/ArrangeAction ./ve/actions/MoveToFrontAction ./ve/actions/MoveToBackAction ./ve/actions/MoveForwardAction ./ve/actions/MoveBackwardAction ./ve/actions/OtherAction ./ve/actions/EnableApplicationStates ./ve/actions/ViewDesignAction ./ve/actions/ViewSourceAction ./ve/actions/ViewSourceMenuAction ./ve/actions/ViewSplitHMenuAction ./ve/actions/ViewSplitVMenuAction ./ve/actions/AddState ./ve/actions/RemoveState ./ve/actions/ModifyState ./ve/actions/ManageStates ./ve/actions/NewWidgetsCurrentState ./ve/actions/HighlightBaseWidgets ./ve/actions/ShowInOutline ./ve/PageEditor ./html/ui/HTMLEditor ./html/ui/ImageViewer ./ve/prefs/HTMLEditPreferences dijit/layout/LayoutContainer ./commands/OrderedCompoundCommand ./version".split(" "),
function(){})},"xcf/model/Command":function(){define("dcl/dcl xblox/model/Block xblox/model/Contains xide/utils xide/types dojo/Deferred xblox/types/Types xide/lodash".split(" "),function(n,m,k,h,d,b,c,g){return n([m,k],{declaredClass:"xcf.model.Command",startup:!1,auto:null,send:"",name:"No Title",observed:["send"],interval:0,flags:2048,_runningDfd:null,__started:!1,isCommand:!0,getItems:function(b){return this.getItemsByType(b)},onCommandFinish:function(b){var a=null;if(b.params&&b.params.id){var e=
b.params.id,a=this.getDeferred(e);delete this._solving[e];b.lastResponse&&this.storeResult(b.lastResponse);this._emit("finished",{msg:b,result:this._lastResult})}b=this.getItems(d.BLOCK_OUTLET.FINISH);b.length&&this.runFrom(b,0,this._lastSettings);this.resolve({});this.onSuccess(this,this._lastSettings);a&&a.resolve(this._lastResult);return this._lastResult},onCommandPaused:function(b){var a=b.params;a&&a.id&&(b.lastResponse&&this.storeResult(b.lastResponse),this._emit("paused",{msg:b,result:this._lastResult,
id:a.id}));b=this.getItems(d.BLOCK_OUTLET.PAUSED);b.length&&this.runFrom(b,0,this._lastSettings)},onCommandStopped:function(b){this.reset();var a=b.params;a&&a.id&&this._emit("stopped",{msg:b,result:this._lastResult,id:a.id});b=this.getItems(d.BLOCK_OUTLET.STOPPED);b.length&&this.runFrom(b,0,this._lastSettings)},onCommandProgress:function(b){var a=b.params;a&&a.id&&(b.lastResponse&&this.storeResult(b.lastResponse),this._emit("progress",{msg:b,result:this._lastResult,id:a.id}));b=this.getItems(d.BLOCK_OUTLET.PROGRESS);
b.length&&this.runFrom(b,0,this._lastSettings)},storeResult:function(b){var a=h.getJson(b);b=null;if(a&&a.result&&g.isString(a.result)){var e=a.result,c=-1!==e.indexOf("{")||-1!==e.indexOf("["),a=e;c&&(e=h.getJson(e,!0,!1))&&(a=e);this._lastResult=null!==a?b=a:null}return b},resolve:function(b){b=b||this._lastResult;this._runningDfd&&this._runningDfd.resolve(b)},onCommandError:function(b){var a=b.params;a.id&&(b.lastResponse&&this.storeResult(b.lastResponse),this._emit("cmd:"+b.cmd+"_"+a.id,b),this._emit("error",
{msg:b,result:this._lastResult,id:a.id}));this.onFailed(this,this._settings);b=this.getItems(d.BLOCK_OUTLET.ERROR);b.length&&this.runFrom(b,0,this._lastSettings)},sendToDevice:function(b,a,e,c,g){if(!this._destroyed){b=this.replaceAll("'","",b);g=g||h.createUUID();var q=this,r=this.flags&d.CIFLAG.WAIT?!0:!1;this.lastCommand=""+b;if(this.scope.instance)r&&this._on("cmd:"+b+"_"+g,function(b){if(b.error)q.onFailed(q,a);else q.onSuccess(q,a)}),this.scope.instance.sendMessage(b,null,this.id,g,r,e,c,this.getSendOptions());
else return this.publish(d.EVENTS.ON_STATUS_MESSAGE,{text:"Command "+this.name+" : have no device",type:"error",delay:1E3}),!1;return g}},reset:function(){delete this._runningDfd;this._lastSettings={};this._loop&&(clearTimeout(this._loop),this._loop=null);delete this.override;this.override=null;delete this._lastResult;this.override=null;this.override={}},_solving:null,addDeferred:function(c){this._solving||(this._solving={});this._solving[c]=new b;return this._solving[c]},getDeferred:function(b){this._solving||
(this._solving={});return this._solving[b]},getSendOptions:function(){var b={},a=this.getDriverModule();a&&a.getCommandArgs&&(b=a.getCommandArgs(this)||b);return b},_resolve:function(b,a,e){if(g.isNumber(b)||g.isBoolean(b))return b;var c=this.scope;b=b||this._get("send");a=a||{};var p=a.flags||this.flags,w=!(p&d.CIFLAG.DONT_PARSE),r=p&d.CIFLAG.EXPRESSION;p&d.CIFLAG.TO_HEX&&(b=h.to_hex(b));!1!==w&&(b=h.convertAllEscapes(b,"none"));a=a||this._lastSettings||{};if(p=(a=a.override||this.override||{},a.variables)?
a.variables:null)for(var v in p)g.isNumber(p[v])&&(p[v]=Math.round(p[v]));v="";var x=this.getDriverModule();x&&x.resolveBefore&&!1!==e&&(b=x.resolveBefore(this,b)||b);v=r&&!1!==w?c.parseExpression(b,null,p,null,null,null,a.args):""+b;x&&x.resolveAfter&&!1!==e&&(v=x.resolveAfter(this,v)||v);return v},solve:function(b,a,e,c){var g=null;b=b||this.scope;(a=this._lastSettings=a||this._lastSettings||{},a.override)&&a.override.mixin&&h.mixin(this.override,a.override.mixin);var q=c||this._get("send")||this.send,
r=!(this.flags&d.CIFLAG.DONT_PARSE);c=this.flags&d.CIFLAG.WAIT?!0:!1;var p=h.createUUID();this.flags&d.CIFLAG.TO_HEX&&(q=h.to_hex(q));!1!==r&&(q=h.convertAllEscapes(q,"none"));if(this.enabled||!0===e){!0===e&&this._loop&&this.reset();if(!0!==c)this.onRun(this,a);else this.onRun(this,a,{timeout:!1}),g=this.addDeferred(p);if(this.items&&0<this.items.length){if(q&&0<q.length&&(q=this._resolve(this.send,a))&&0<q.length)if(this.sendToDevice(q,a))this.onSuccess(this,a);else this.onFailed(this,a);if(c)return g;
e=[];for(g=0;g<this.items.length;g++)c=this.items[g],c.enabled&&e.push(c.solve(b,a));return e}if(0<q.length){if((q=this._resolve(this.send,a))&&0<q.length&&!this.sendToDevice(q,a,null,null,p))this.onFailed(this,a);if(!0!==c)this.onSuccess(this,a);else this._settings=a;e&&this.auto&&0<this.getInterval()&&this.scope.loopBlock(this,a);return c?g:[q]}return!1}this.reset()},canAdd:function(){return[]},mayHaveChildren:function(){return null!=this.items&&0<this.items.length},getChildren:function(){return this.items},
hasInlineEdits:!0,toText:function(b,a,e,c){var g="";!1!==b&&(g+="\x3cspan class\x3d'text-primary inline-icon'\x3e"+this.getBlockIcon()+"\x3c/span\x3e");!1!==a&&(g+=""+this.makeEditable("name","bottom","text","Enter a unique name","inline")+"");!0===c&&(g+="\x3cbr/\x3e");!1!==e&&(g+="\x3cspan class\x3d'text-muted small'\x3e Send:\x3ckbd class\x3d'text-warning'\x3e"+this.makeEditable("send","bottom","text","Enter the string to send","inline")+"\x3c/kbd\x3e\x3c/span\x3e");!1!==b&&(this.startup&&(g+=
this.getIcon("fa-bell inline-icon text-warning","text-align:right;float:right;","")),this.auto&&0<this.getInterval()&&(g+=this.getIcon("fa-clock-o inline-icon text-warning","text-align:right;float:right","")));return g=this.getDriverToText(g)||g},getInterval:function(){return parseInt(this.interval,10)},start:function(){this.startup&&!this.auto?this.solve(this.scope):this.auto&&0<this.getInterval()&&this.scope.loopBlock(this)},getDriverModule:function(){var b=null,a=this.getInstance();a?b=a.Module:
(a=this.getScope().driver)&&a.Module&&(b=a.Module);return b},getDriverToText:function(b){var a=this.getDriverModule();if(a&&a.toText)return a.toText(this,b)},getDriverFields:function(b){var a=this.getDriverModule(),e=[];a&&a.getFields&&(e=a.getFields(this,b)||[]);return e},getFields:function(){var b=this.inherited(arguments)||this.getDefaultFields(),a=this;b.push(this.utils.createCI("name",13,this.name,{group:"General",title:"Name",dst:"name",order:200}));b.push(this.utils.createCI("startup",0,this.startup,
{group:"General",title:"Send on Startup",dst:"startup",order:199}));b.push(this.utils.createCI("auto",0,this.auto,{group:"General",title:"Auto Send",dst:"auto",order:198}));b.push(this.utils.createCI("interval",13,this.interval,{group:"General",title:"Interval",dst:"interval",order:197}));b.push(this.utils.createCI("send",d.ECIType.EXPRESSION_EDITOR,this.send,{group:"Send",title:"Send",dst:"send",widget:{instantChanges:!1,allowACECache:!0,showBrowser:!1,showSaveButton:!0,style:"height:inherit;",editorOptions:{showGutter:!1,
autoFocus:!1},aceOptions:{hasEmmet:!1,hasLinking:!1,hasMultiDocs:!1},item:this},delegate:{runExpression:function(b,c,g){return a.scope.expressionModel.parse(a.scope,b,!1,c,g)}}}));b.push(this.utils.createCI("flags",5,this.flags,{group:"General",title:"Flags",dst:"flags",data:[{value:4096,label:"Dont parse",title:"Do not parse the string and use it as is"},{value:2048,label:"Expression",title:"Parse it as Javascript"},{value:32768,label:"Wait",title:"Wait for response"}],widget:{hex:!0}}));return b=
b.concat(this.getDriverFields(b))},icon:"fa-exclamation",getIconClass:function(){return"el-icon-play-circle"},getBlockIcon:function(){return'\x3cspan class\x3d"'+this.icon+'"\x3e\x3c/span\x3e '},canEdit:function(){return!0},onChangeField:function(b,a,e){var c=this.getInterval();"auto"===b&&(!0===a?0<c&&this.scope.loopBlock(this):this._loop&&this.reset());"enabled"===b&&(!1===a?this.reset():c&&this.scope.loopBlock(this));"interval"===b&&(0<c&&this.auto?this.scope.loopBlock(this):this.reset());this.inherited(arguments)},
destroy:function(){this.reset()},pause:function(){var b=this.lastCommand||this._resolve(this.send,this._lastSettings);null!==b&&this.sendToDevice(b,this._lastSettings,!1,!0)},stop:function(b){!0!==b&&(this.onSuccess(this,{highlight:!0}),this.resolve(""),b=this.lastCommand||this._resolve(this.send,this._lastSettings),g.isEmpty(b)||this.sendToDevice(b,this._lastSettings,!0,!1),delete this._runningDfd)}})})},"dijit/form/ComboBox":function(){define(["dojo/_base/declare","./ValidationTextBox","./ComboBoxMixin"],
function(n,m,k){return n("dijit.form.ComboBox",[m,k],{})})},"dijit/lang/validate":function(){define([],function(){return{invalidMessage:"The value entered is not valid.",missingMessage:"This value is required.",rangeMessage:"This value is out of range."}})},"dojo/data/util/sorter":function(){define(["../../_base/lang"],function(n){var m={};n.setObject("dojo.data.util.sorter",m);m.basicComparator=function(k,h){var d=-1;null===k&&(k=void 0);null===h&&(h=void 0);if(k==h)d=0;else if(k>h||null==k)d=1;
return d};m.createSortFunction=function(k,h){function d(a,b,e,c){return function(g,q){g=c.getValue(g,a);q=c.getValue(q,a);return b*e(g,q)}}for(var b=[],c,g=h.comparatorMap,p=m.basicComparator,a=0;a<k.length;a++){c=k[a];var e=c.attribute;if(e){c=c.descending?-1:1;var q=p;g&&("string"!==typeof e&&"toString"in e&&(e=e.toString()),q=g[e]||p);b.push(d(e,c,q,h))}}return function(a,e){for(var c=0;c<b.length;){var g=b[c++](a,e);if(0!==g)return g}return 0}};return m})},"xide/manager/Application_XFILE":function(){define(["dcl/dcl",
"xide/utils","xide/types","xdojo/has","dojo/Deferred"],function(n,m,k,h,d){return n(null,{declaredClass:"xide.manager.Application_XFILE",onXFileReady:function(b,c){if(h("showFiles")){var g=require,p=this,a=p.mainView;a.getToolbar();var e=this.leftLayoutContainer,q=a&&a.getBreadcrumb?a.getBreadcrumb():null,d=this.getNavigationState&&this.getNavigationState()||{files:!1};q&&this.subscribe(k.EVENTS.ON_OPEN_VIEW,function(a){var b=a.view;if(b instanceof c){b.addHandle("click",b.on("click",function(){q.setSource(b)}));
q.setSource(b);var e=b.collection;b._on("openFolder",function(a){a=a.item;q.grid!=b&&q.setSource(b);q.clear();q.setPath(".",e.getRootItem(),a.getPath(),e)})}});if(e){var w=a.layoutCenter,r=this.ctx;a.getNewDefaultTab&&(w=function(b){return a.getNewDefaultTab(b)});g(["xfile/factory/Store","xfile/types","xfile/views/Grid","xfile/views/FileGrid","xfile/views/FilePreview"],function(a,c,g,u,h){r.registerEditorExtension("Preview","mp4|ma4|mov|html|pdf|avi|mp3|mkv|ogg|png|jpg","fa-play",this,!0,null,h.EditorClass,
{updateOnSelection:!1,leftLayoutContainer:w,ctx:r});a=a.createFileStore("workspace_user",null,b,null,p.ctx);c=e.createTab("Files","fa-folder",d.files?!0:!1);var v=m.addWidget(u,{newTabArgs:{showHeader:!0},style:"height:100%",newTarget:w,collection:a.getDefaultCollection(),showHeader:!1,registerEditors:!0,open:d.files?!0:!1,resizeToParent:!0,_columns:{Name:!0,Path:!1,Size:!1,Modified:!1},title:"Files",icon:"fa-folder"},null,c,!1);c.add(v);p.ctx.getWindowManager().registerView(v,!0);if(q){q.setSource(v);
var x=v.collection;v._on("openedFolder",function(a){a=a.item;q.grid!=v&&q.setSource(v);q.clear();q.setPath(".",x.getRootItem(),a.getPath(),x)})}p.fileGrid=v;v._on("startup",function(){v.showStatusbar(!1)});p.addNavigationGrid&&p.addNavigationGrid(v);p._saveNavigationState&&d.files&&setTimeout(function(){v.startup()},500)})}}},initXFile:function(){var b={},c=new d;if(b=(k.config=b={},xFileConfig))"undefined"!=typeof xFileConfigMixin&&m.mixin(b,xFileConfigMixin),m.mixin(k.config,b);var g=this,p=this.ctx;
require(["xfile/manager/FileManager","xfile/manager/MountManager","xfile/views/FileGrid"],function(a,b,q){q.prototype.ctx=p;p.doMixins(p.mixins);m.mixin(g.config,k.config);p.fileManager=p.createManager(a,g.config);p.fileManager.init();p.mountManager=p.createManager(b,g.config);p.mountManager.init();p.mountManager.ls().then(function(){g.onXFileReady(g.config,q)});c.resolve()});return c}})})},"davinci/model/Comment":function(){define(["dojo/_base/declare","davinci/model/Model"],function(n,m){return n("davinci.model.Comment",
m,{constructor:function(){this.elementType="Comment";this.nosemicolon=!0},addComment:function(k,h,d,b){null==this.comments&&(this.comments=[]);this.comments[this.comments.length]={commentType:k,start:h,stop:d,s:b}},appendComment:function(k){var h=this.comments[this.comments.length-1];h.s+=k;h.stop+=k.length},getText:function(k){k="";for(var h=0;h<this.comments.length;h++)"line"==this.comments[h].commentType?k+="//"+this.comments[h].s+"\n":"block"==this.comments[h].commentType&&(k+="/*"+this.comments[h].s+
"*/\n");return k}})})},"xideve/views/VisualEditor":function(){define("dcl/dcl dojo/dom-construct dojo/Deferred dojo/promise/all require xide/layout/ContentPane xide/layout/_Accordion xide/utils xide/types xide/factory davinci/ve/PageEditor davinci/ve/palette/Palette davinci/Runtime davinci/Workbench dojo/_base/connect dojo/dom-class davinci/ve/metadata davinci/ve/views/SwitchingStyleView xideve/views/OutlineView xideve/views/OutlineGridView xide/registry xide/layout/_TabContainer xideve/views/VisualEditorPalette xideve/views/VisualEditorSourceEditor xideve/views/VisualEditorLayout xideve/views/VisualEditorAction xideve/views/VisualEditorTools xaction/Action davinci/ve/widget xide/editor/Default xide/_base/_Widget xide/mixins/ReloadMixin xblox/model/html/SetStyle xblox/model/html/SetCSS xblox/model/html/SetState wcDocker/splitter xdocker/Splitter2 wcDocker/types".split(" "),
function(n,m,k,h,d,b,c,g,p,a,e,q,u,w,r,v,x,A,z,y,B,C,E,F,G,D,H,J,Q,N,O,P,L,K,M,U,V,I){$.fn.inlineStyle=function(a){var b=this.attr("style"),e;b&&b.split(";").forEach(function(b){b=b.split(":");$.trim(b[0])===a&&(e=b[1])});return e};sctx&&(window.updateBodyFrame=function(a,b,e){console.clear();var c=a.offset(),g=c.top,q=c.left;b&&$(b.rootNode);var r=b?$(b.getDocumentElement().getChildElement("body")):null,c=a.css("width"),p=a.css("height");b.rootNode.scrollLeft=b.rootNode.parentNode.scrollLeft;b=!1;
if(r){r.inlineStyle("max-width");r.inlineStyle("max-height");var d=r.inlineStyle("width");d&&(b=d);r.inlineStyle("height")}$(e).css("display",this._hidden?"none":"block");if(0!=g||0!=q)e.css("top",g),e.css("left",q),"none"!==c&&(e.css("width",c),e.css("height",p),g=$(this.getEditorContext().rootNode),q=g.parent(),b&&(a.css("overflow","auto"),e.css("width",c),e.css("height",p),q.css("width",c),q.css("height",p),g.css("height",c),g.css("width",p)))});V.prototype.collapse2=function(a,b){this._isCollapsed=
!0;this._pane[0].collapsed=0==a;this._pane[1].collapsed=1==a;this._saveProp("pos");this._lastCollapsed=a;console.error("collapse "+a+" pos : "+b);this._lastCollapsed=a;this.pos(b)};V.prototype.expand2=function(){this._isCollapsed=!1;this._pane[0].collapsed=!1;this._pane[1].collapsed=!1;this._restoreProp("pos")};n=n([O,E,F,G,D,H,P.dcl],{updateFrame:function(){var a=this.getEditorContext();if(!a||!a.isResizing){var b=this.editor,e=this.getFrame(),c=this;e&&!e._followTimer&&(e._followTimer=setInterval(function(){var a=
b._designCP.containerNode,g=$(e),q=$(a),r=q.offset(),a=r.top,r=r.left,p=c.getEditorContext();p&&$(p.rootNode);var d=p?$(p.getDocumentElement().getChildElement("body")):null,p=q.css("width"),q=q.css("height"),u=!1,v=!1;if(d){d.inlineStyle("max-width");d.inlineStyle("max-height");var w=d.inlineStyle("width");w&&(v=w);(d=d.inlineStyle("height"))&&(u=d)}$(g).css("display",c._hidden?"none":"block");if(0!=a||0!=r)g.css("top",a),g.css("left",r),"none"!==p&&(g.css("width",p),g.css("height",q),a=$(c.getEditorContext().rootNode),
g.css("width",p),g.css("height",q),u&&a.css("height",u),v&&a.css("width",v),u||v||(a.css("width",p),a.css("height",q)))},500))}},doSplit:function(a){var b=this.getPageEditor(),e=b.getSourcePane(),b=b.getSourcePane(),e=e.getSplitter(),b=b.getSplitter();switch(a){case p.VIEW_SPLIT_MODE.DESIGN:console.error("splitter ",b);console.error("splitter ",e);b&&(b.isCollapsed()?b.expand():b.collapse(0,.9));break;case p.VIEW_SPLIT_MODE.SOURCE:b._pane[0].collapsed=!0,b._pane[1].collapsed=!1,b&&(b.isCollapsed()?
b.expand():b.collapse(1,.1))}},menuOrder:{File:110,Edit:100,View:90,Widget:80,Block:50,Settings:20,Navigation:10,Step:5,New:4,Window:1},declaredClass:"xideve/views/VisualEditor",templateString:"\x3cdiv style\x3d'height: 100%;width: 100%' attachTo\x3d'containerNode'\x3e\x3c/div\x3e",isVisualEditor:!0,resizeToParent:!0,showLESS:!0,showBehaviours:!1,showStyleView:!0,blockScopes:null,onReload:function(){},leftLayoutContainer:null,rightLayoutContainer:null,palette:null,paletteContainer:null,showPalette:!0,
styleView:null,styleViewContainer:null,addOutline:!0,outlineView:null,outlineContainer:null,outlineGridView:null,outlineGridContainer:null,editor:null,_designMode:!0,_tempLeftContainer:null,textEditor:null,delite:!1,template:null,contextInfo:null,didAddSheetEditors:!1,beanType:p.ITEM_TYPE.WIDGET,_didInitial:!1,ready:!1,destroyed:!1,_skipTextEditorChange:!1,_getHTMLBlocks:function(a,b,e,c,g){g.push({name:"HTML",iconClass:"fa-paint-brush",items:[{name:"Set Style",owner:b,iconClass:"fa-paint-brush",
proto:L,target:e,ctrArgs:{scope:a,group:c}},{name:"Set CSS",owner:b,iconClass:"fa-paint-brush",proto:K,target:e,ctrArgs:{scope:a,group:c}},{name:"Set State",owner:b,iconClass:"fa-paint-brush",proto:M,target:e,ctrArgs:{scope:a,group:c}}]});return g},onBuildBlockInfoListEnd:function(a){var b=a.owner;(b=b?b.visualEditor:null)&&b===this&&this._getHTMLBlocks(a.scope,a.view,a.item,a.group,a.items)},reloadModule:function(){Reload.reload().then(function(a){a.component.registerEditors()})},updateFocus:function(){var a=
this.getEditorContext();a&&!a.isRezing&&(a.clearCachedWidgetBounds(),a.updateFocusAll())},set:function(a,b){"focused"===a&&this.updateFocus();return this.inherited(arguments)},select:function(a,b){a=_.isArray(a)?a:[a];var e=a[0];if(e){var c=this.getEditorContext();if(c){if(_.isString(e)){var g=[];_.each(a,function(a){(a=c.getWidget(a))&&g.push(a)});a=g}!0!==b&&c.deselect();_.each(a,function(a){c.select(a,!0,!1)})}}},selectAll:function(){var a=this.getEditorContext(),b=a.getAllWidgets();_.each(b,function(b){a.select(b,
!0,!1)})},updateToolbars:function(){},getTemplateDirectoryPathItem:function(){return{mount:"workspace",path:"./templates"}},getSelection:function(){var a=this.getEditorContext(),b=[];if(a)for(var a=a.getSelection(),e=0;e<a.length;e++)b.push(a[e]);return b},ensureSceneFiles:function(a){var b=new k,e=[],c=a._S,q=a.mount,r=g.getFileExtension(a.path),p=this.ctx.getFileManager(),d=this.getTemplateDirectoryPathItem();c.getParent(a).getPath();var u=function(a,b){var e=new k,g=a.getPath().replace("."+r,"."+
b);if(a=c.getSync(g))e.resolve(a);else{var u="./"+g,u=u.replace("././","./"),v=d.path+"/newDHTML."+b;p.mkfile(q,u).then(function(a){p.getContent(q,v,function(a){p.setContent(q,u,a,function(a){e.resolve()})})})}return e};e.push(u(a,"css"));e.push(u(a,"xblox"));e.push(u(a,"js"));h(e).then(function(a){b.resolve()});return b},getActiveItem:function(){return null},hasItemActions:function(){return this.ready},getItem:function(){return this.currentItem},onReloaded:function(){},_createLeftContainer:function(){var a=
this.getMainView();return g.addWidget(b,{closable:!0,style:"padding:0px;width:200px",region:"left",cssClass:"layoutLeft",splitter:!0,parentContainer:a.layoutMain},this,a.layoutMain,!0,"ui-widget-content")},getLeftContainer:function(){var a=this.getMainView(),b=a.leftLayoutContainer;if(b)return b;if(a.leftTabContainer)return a.leftTabContainer;this._tempLeftContainer=this._createLeftContainer();return this.leftLayoutContainer=g.addWidget(c,{persist:!0,doLayout:!0,cssClass:"ui-widget-content"},this,
this._tempLeftContainer.containerNode,!0)},restoreStyleView:function(){return B.byId("html_style_view_parent")},suspendStyleView:function(){},onLastEditorRemoved:function(){this.suspendStyleView();var a=B.byId("html_style_view_parent");a&&a.parentContainer&&(a.parentContainer.removeChild(a),g.destroy(a));(a=B.byId("html_style_view"))&&g.destroy(a);(a=B.byId("palette-tabcontainer-right-top"))&&g.destroy(a)},clearAll:function(){this.editor&&this.editor.visualEditor.context.deselect();w._switchEditor(null);
w.currentEditor=null;u.currentEditor=null;this.destroyed=!0;if(this.blockScopes){for(var a=0;a<this.blockScopes.length;a++){var b=this.blockScopes[a];this.ctx.getBlockManager().removeScope(b.id)}delete this.blockScopes}this.outlineGridView=this.outlineGridContainer=null;this.onLastEditorRemoved()},getFrame:function(){var a=this.getEditorContext();return a&&a.frameNode?a.frameNode:null},destroy:function(){var a=0==this.getEditors().length,b=this.getMainView(),e=this.getLeftContainer();this.getEditorContext();
clearInterval(this._frameTimer);g.destroy(this.getFrame());if(null==this.leftLayoutContainer||e.canDestroy&&!e.canDestroy()){g.destroy(this.paletteContainer,!1);g.destroy(this._cBPalettePane,!1);try{this.outlineGridContainer&&(e.removeChild(this.outlineGridContainer),this.outlineGridView.parentContainer=null),g.destroy(this.outlineGridView,!0),g.destroy(this.palette)}catch(W){debugger}}else g.destroy(this.leftLayoutContainer,!1),b.layoutMain&&b.layoutMain.removeChild&&b.layoutMain.removeChild(this._tempLeftContainer),
g.destroy(this.paletteContainer,!1);this&&this.styleViewContainer&&(this.styleViewContainer.keep=!1);g.destroy(this.styleView,!0,this);g.destroy(this.tabContainer,!0,this);g.destroy(this.styleViewContainer,!0,this);this.publish(p.EVENTS.ON_CONTEXT_DESTROYED,this.getEditorContext());try{this.clearAll()}catch(W){logError(W)}if(a)try{g.destroy(this.editor,!0,this)}catch(W){logError(W)}},getMainView:function(){return this.mainView},addStyleView:function(a){function b(a){a._on("splitterMoveStart",function(a){e.hideFrame(!0)});
a._on("splitterMoveEnd",function(a){e.hideFrame(!1)})}var e=this;this.ctx.getApplication();var c=this.getPageEditor(),q=c.getPropertyPane();if(this.styleView)return this.styleView;b(q);b(c.getDesignPane());c=g.addWidget(C,{region:"center",id:"palette-tabcontainer-right-top",tabPosition:"right-h",tabStrip:!1,"class":"davinciPalette davinciTopPalette widget",style:"",splitter:!1,direction:"right"},null,q.containerNode,!0);v.add(c.domNode,"davinciPalette davinciTopPalette");this.tabContainer=c;this.styleViewContainer=
q;var r=c.createTab("Widget","fa-cogs");try{this.styleView=g.addWidget(A,{toolbarDiv:q.containerNode,context:a,_editor:this.editor,parentContainer:c,tabContainer:c},null,r.containerNode,!0)}catch(X){console.error("html_style_view crash "+X)}this.styleView._initialPerspectiveReady()},addPalette:function(a){this.palette=B.byId("html_palette");if(!this.palette){var b=this.ctx.mainView.leftLayoutContainer;this.paletteContainer=b=b.createTab("Palette","fa-cube",!0,null,{parentContainer:b,open:!1});try{this.palette=
g.addWidget(q,{toolbarDiv:b.containerNode,context:a,style:"padding:0px;"},null,b.containerNode,!0)}catch(S){console.error("palette crash "+S)}try{this.palette.descriptors="dijit,dojox,html,OpenAjax",this.palette.setContext(a)}catch(S){console.error("palette crash "+S)}this.add(b,null,!1);this.add(this.palette,null,!1)}},addOutlineGridView:function(a){var b=this.getLeftContainer();if(!this.outlineGridView&&b){var e=b.createTab("Outline","fa-cube",!0,null,{parentContainer:b});this.outlineGridContainer=
e;var c=this;try{this.outlineGridView=g.addWidget(y,{context:a,resizeToParent:!0,style:"padding:0px;"},null,e.containerNode,!0),e.add(this.outlineGridView),setTimeout(function(){e.resize();c.outlineGridView&&c.outlineGridView.resize()},1E3)}catch(R){logError(R,"outline crash ")}this.outlineGridView.startup();this.add(e)}},addOutlineView:function(a){this.outlineView=B.byId("html_outline_view");var e=this.ctx.getApplication().mainView.getLeftLayoutBottomContainer()||this.getLeftContainer();if(!this.outlineView&&
e){this.outlineContainer=e=g.addWidget(b,{title:"Outline",closable:!0,iconClass:"fa-cube",parentContainer:e,style:"padding:0px;"},this,e,!0);try{this.outlineView=new z({context:a,id:"html_outline_view",style:"padding:0px;"})}catch(S){console.error("palette crash "+S)}e.containerNode.appendChild(this.outlineView.domNode);this.outlineView.startup()}},_handleKeyDown:function(a,b){this._handleKey(a,b)||b||u.handleKeyEvent(a)},_handleKey:function(a,b){if(!this.keyBindings)return!1;var e=this.keyBindings.some(function(e){if((!b||
e.keyBinding.allowGlobal)&&u.isKeyEqualToEvent(e.keyBinding,a))return d("davinci/Workbench")._runAction(e.action,this.editor,e.action.id),!0},this);e&&dojo.stopEvent(a);return e},_setupKeyboardHandler:function(a){var b=function(a){this.keyBindings||(this.keyBindings=[]);this.keyBindings.push(a)}.bind(this);this._getViewActions().forEach(function(a){a.actions.forEach(function(a){a.keyBinding&&b({keyBinding:a.keyBinding,action:a});a.menu&&a.menu.forEach(function(a){a.keyBinding&&b({keyBinding:a.keyBinding,
action:a})},this)},this)},this);r.connect(a,"handleKeyEvent",this,"_handleKeyDown")},setDirty:function(){},shouldUpdateTextEditor:function(){return this._skipTextEditorChange?(this._skipTextEditorChange=!0,!1):!0},addPageEditor:function(a){if(!this.editor)try{var b=this;this.editor=new (d("davinci/ve/PageEditor"))(dojo.create("div",{}),a.getPath(),a,function(e,c){return b.createHTMLEditor(e,c,a)},this.template,[{title:"Blocks"}]);this.editor.ctx=this.ctx;this.editor.editorContainer=this;this.editor.delegate=
this;this.containerNode.appendChild(this.editor.domNode);this.declaredClass=this.editor.declaredClass;this.editor.editorID="davinci.ve.HTMLPageEditor";u.currentEditor=this.editor;w.currentEditor=this.editor;this.add(this.editor,null,!1);this._setupKeyboardHandler(this.editor);this.addTextEditor(this.editor.htmlEditor);w._switchEditor(this.editor);setTimeout(function(){dojo.publish("/davinci/ui/editorSelected",[{editor:b.editor,oldEditor:null}])},2E3);return this.editor}catch(S){console.error("crash in visual editor "+
S),logError(S,"crash in visual editor ")}},_widgetSelectionChanged:function(a){if(1!=a.isFake){a=a.selection;var b=(a=1==a.length?a[0]:null)||{dummy:!0};this.currentItem=a||null;this.publish(p.EVENTS.ON_ITEM_SELECTED,{item:b,owner:this,beanType:"widget"});this._emit("selectionChanged",{item:b,owner:this})}},_resume:function(){this.restoreStyleView()},_suspend:function(){this.suspendStyleView()},hideFrame:function(a){this._hidden=a;var b=this.getFrame();b&&$(b).css("display",a?"none":"block")},onHide:function(){this.inherited(arguments);
this.hideFrame(!0);this.updateFocus();this.editor&&(w._switchEditor(null),this.publish("/davinci/ui/editorSelected",[{editor:null,oldEditor:this.editor}]));this._suspend()},onShow:function(){this.inherited(arguments);this.hideFrame(!1);if(this.editor){this.updateFocus();w._switchEditor(this.editor);var a=this;setTimeout(function(){a.publish("/davinci/ui/editorSelected",[{editor:a.editor,oldEditor:null}])},1E3)}this._resume()},openItem:function(a){function b(a){e.ensureSceneFiles(a).then(function(){e.editor||
e.addPageEditor(a);e.hideFrame(!1);e.updateFrame();e.ctx.getFileManager().getContent(a.mount,a.path,function(b){e.editor.setContent(a.path,b);e.showPalette&&e.addPalette(e.editor.visualEditor.context);try{e.styleView||!1===e.showStyleView||e.addStyleView(e.getEditorContext())}catch(X){console.error("error style view "+X),logError(X,"error style view ")}c.resolve()})})}var e=this,c=new k;e.item=a;this.template&&!this.template.isLoaded()?this.template.load().then(function(){b(a)}):b(a);return c},onReady:function(){this.ready=
!0;this.hideFrame(!1);this.updateFrame()},onEditorContextLoaded:function(){var a=this;if(this._didInitial)setTimeout(function(){a.outlineGridView&&(a.outlineGridView.editorChanged({editor:null,oldEditor:a.editor}),a.outlineGridView.editorChanged({editor:a.editor,oldEditor:null}))},800);else{this._didInitial=!0;var b=a.editor.visualEditor.context;if(a.addOutline)try{setTimeout(function(){a.addOutlineGridView(b);dojo.publish("/davinci/ui/editorSelected",[{editor:a.editor,oldEditor:null}]);a.onReady()},
800)}catch(S){console.error("outline creation crashed "+S);debugger}}},getNullItem:function(){return this._nullItem?this._nullItem:this._nullItem={owner:this,beanType:"widget"}},_editors:null,addTextEditor:function(a){!this._editors&&(this._editors=[]);this._editors.push(a)},publishCSSRules:function(a){a=(new CSSParser).parse(a,!1,!0);var b=[];_.each(a.cssRules,function(a){a.mSelectorText&&"body"!==a.mSelectorText&&b.push(a.mSelectorText.replace(".",""))});this.publish("CSSRulesUpdated",{names:b,
editor:this})},loadSceneCSSFile:function(a){var b=this;this.ctx.getFileManager().getContent(a.mount,a.path,function(a){b.publishCSSRules(a)})},onContextReady:function(a){if(a.context==this.getEditorContext()){this.contextInfo=a;var b=this,e=this.getPageEditor(),c=a.context._extraSheets,g=this.item._S;this.ctx.getWindowManager().registerView(this,!0);!1!==this.showLESS&&g&&!this.didAddSheetEditors&&(this.didAddSheetEditors=!0,_.each(c,function(a,c){var q;q=c.replace("././","./");c=c.replace("././",
"./");var r=g.getSync(q);r&&(a.storeItem=r,a.cssItem=g.getSync(c));r?(c={sheetProps:a,closeable:!1,emmet:!0,resizeToParent:!0},q=p.DOCKER,q=e.createTab(null,{title:r.name,icon:"fa-paint",tabOrientation:q.TAB.TOP,location:q.DOCK.STACKED,target:e.getSourcePane()}),b.cssPane=q,c=N.Implementation.open(r,q,c,!0),a.edior=c,b.addTextEditor(c),q.add(c),b.loadSceneCSSFile(r),c._on(p.EVENTS.ON_FILE_CONTENT_CHANGED,function(a){b.publishCSSRules(a.content)})):console.error("couldnt find file : ",q)}));this.hideFrame(!1);
(c=a.blockScopes)&&c.length&&(this.showBehaviours&&this._buildBlockPalette(a),a.context.eventHandler={click:function(a){b.publish(p.EVENTS.ON_ITEM_SELECTED,{item:b.currentItem||b.getNullItem(),owner:b,beanType:"widget"});b._emit(p.EVENTS.ON_VIEW_SHOW,{view:b})}})}},onAppReady:function(a){setTimeout(function(){this.outlineView&&a.context&&(this.outlineView.reset(),this.outlineView.createTree())}.bind(this),2E3)},getTextEditor:function(){return this.editor.htmlEditor},getEditor:function(a,b){var e=
null;_.each(this._editors,function(c){var g=c.item,q=g.mount.replace("/",""),g=g.path.replace("./","");q===a&&g===b&&(e=c)});return e},onEditorContentChanged:function(a){var b=this;this.__internUpdate=!0;setTimeout(function(){b.__internUpdate=!1},5E3);return this.reload(a.content)},isSaving:!1,save:function(a,b,e,c){if(!this.isSaving){this.__internUpdate=this.isSaving=!0;var g=this.getTextEditor();g&&g.set("value",c);this.publish(p.EVENTS.ON_VISUAL_EDITOR_SAVE,{pageEditor:a,visualEditor:b,model:e,
text:c,item:this.item});var q=this;this.ctx.getFileManager().setContent(this.item.mount,this.item.path,c,function(){q.isSaving=!1})}},fileChanged:function(a){function b(a){a==e.getTextEditor()&&a.reload().then(function(a){e.reload(a)});a.reload().then(function(){e.onFileChanged({editor:a})})}if(!this.__internUpdate){a=a.data.path;var e=this;if(-1!=a.indexOf("workspace_user")){var c=a.substr(a.indexOf("workspace_user")+15,a.length);if(c=this.getEditor("workspace_user",c))return b(c)}(a=this.ctx.toVFSShort(a,
"workspace_user"))&&(c=this.getEditor("workspace_user",a))&&b(c)}},onFileChanged:function(a){if(!a.__did&&(a.__did=!0,a&&a.editor&&a.editor.sheetProps)){var b=a.editor.sheetProps,e=this.contextInfo.document,c=this;dojo.withDoc(e,function(){var a=e.getElementsByTagName("head")[0];try{b.link&&(a.removeChild(b.link),b.link=null)}catch(X){dojo.destroy(b.link)}var g=c.ctx.getFileManager().getImageUrl(b.cssItem,!0,!1),g=m.create("link",{rel:"stylesheet",type:"text/css",href:g});a.appendChild(g);dojo.place(g,
a,"last");b.link=g})}},onUseActionStore:function(a){},getBlockEditor:function(){return this.getPageEditor().getBlockEditor()},resize:function(){this.updateFrame();this.updateFocus();var a=this.getPageEditor();this.getEditorContext();a&&(g.resizeTo(a.domNode,this.containerNode,!0,!0,null,{}),a.resize())},startup:function(){var a=this,b=this,e=p.EVENTS;this._frameTimer=setInterval(function(){var b=a.getEditorContext();b&&b.isRezing||a.updateFrame()},1E3);x.getSmartInput("xblox/RunScript");this.subscribe([e.ON_BUILD_BLOCK_INFO_LIST_END,
e.ON_ACTION_CONTEXT_CHANGED,e.ON_ACTION_CHANGE_CONTEXT,e.ON_ACTION_CHANGE_CONTEXT,e.ON_FILE_CHANGED,e.ON_CONTEXT_READY,e.ON_APP_READY,{key:p.EVENTS.ON_FILE_CONTENT_CHANGED,handler:function(a){var e=a.item;b._skipTextEditorChange=!0;if(e==b.item&&a.callee==b.textEditor)b.editor.setContent(b.item.getPath(),a.content);else b.onFileChanged(a)}},{key:"/davinci/ui/widgetSelected",handler:b._widgetSelectionChanged},{key:"/davinci/ui/context/loaded",handler:b.onEditorContextLoaded}]);this.initReload();setTimeout(function(){b.resize()},
2E3)},setDesignMode:function(a,b){this._designMode=a;!0===b&&(b=this._designToggleAction)&&(b=b.getVisibility(p.ACTION_VISIBILITY.ACTION_TOOLBAR).widget)&&b.set("checked",a);(b=this.getEditorContext())&&b.setDesignMode(a)},_didHide:!1,onSceneBlocksLoaded:function(a){var b=this;this.blockScopes=a.blockScopes;var e=this.getPageEditor();window.vee=this;e.onSceneBlocksLoaded(a,this);setTimeout(function(){b._didHide||(b._didHide=!0,b.toogleCode())},1500)}});y.prototype.reloadModule=n.prototype.reloadModule;
z.prototype.reloadModule=n.prototype.reloadModule;e.prototype.reloadModule=n.prototype.reloadModule;D.prototype.reloadModule=n.prototype.reloadModule;E.prototype.reloadModule=n.prototype.reloadModule;F.prototype.reloadModule=n.prototype.reloadModule;G.prototype.reloadModule=n.prototype.reloadModule;D.prototype.reloadModule=n.prototype.reloadModule;H.prototype.reloadModule=n.prototype.reloadModule;n.getFileActions=function(a,b){return[a.createAction({label:"Preview in Browser",command:"File/Preview",
tab:"Home",icon:"fa-eye",tab:"Home",mixin:{quick:!0,addPermission:!0,handler:function(){window.open(a.getContextManager().getViewUrl(b))}},custom:!0})]};return n})},"dijit/form/_FormWidgetMixin":function(){define("dojo/_base/array dojo/_base/declare dojo/dom-attr dojo/dom-style dojo/_base/lang dojo/mouse dojo/on dojo/sniff dojo/window ../a11y".split(" "),function(n,m,k,h,d,b,c,g,p,a){return m("dijit.form._FormWidgetMixin",null,{name:"",alt:"",value:"",type:"text","aria-label":"focusNode",tabIndex:"0",
_setTabIndexAttr:"focusNode",disabled:!1,intermediateChanges:!1,scrollOnFocus:!0,_setIdAttr:"focusNode",_setDisabledAttr:function(b){this.focusNode&&!this.domNode&&(this._set("disabled",b),k.set(this.focusNode,"disabled",b),this.valueNode&&k.set(this.valueNode,"disabled",b),this.focusNode.setAttribute("aria-disabled",b?"true":"false"),b?(this._set("hovering",!1),this._set("active",!1),b="tabIndex"in this.attributeMap?this.attributeMap.tabIndex:"_setTabIndexAttr"in this?this._setTabIndexAttr:"focusNode",
n.forEach(d.isArray(b)?b:[b],function(b){b=this[b];g("webkit")||a.hasDefaultTabStop(b)?b.setAttribute("tabIndex","-1"):b.removeAttribute("tabIndex")},this)):""!=this.tabIndex&&this.set("tabIndex",this.tabIndex))},_onFocus:function(a){if("mouse"==a&&this.isFocusable())var b=this.own(c(this.focusNode,"focus",function(){w.remove();b.remove()}))[0],e=g("pointer-events")?"pointerup":g("MSPointer")?"MSPointerUp":g("touch-events")?"touchend, mouseup":"mouseup",w=this.own(c(this.ownerDocumentBody,e,d.hitch(this,
function(a){w.remove();b.remove();this.focused&&("touchend"==a.type?this.defer("focus"):this.focus())})))[0];this.scrollOnFocus&&this.defer(function(){p.scrollIntoView(this.domNode)});this.inherited(arguments)},isFocusable:function(){return!this.disabled&&this.focusNode&&"none"!=h.get(this.domNode,"display")},focus:function(){if(!this.disabled&&this.focusNode.focus)try{this.focusNode.focus()}catch(e){}},compare:function(a,b){return"number"==typeof a&&"number"==typeof b?isNaN(a)&&isNaN(b)?0:a-b:a>
b?1:a<b?-1:0},onChange:function(){},_onChangeActive:!1,_handleOnChange:function(a,b){void 0!=this._lastValueReported||null!==b&&this._onChangeActive||(this._resetValue=this._lastValueReported=a);this._pendingOnChange=this._pendingOnChange||typeof a!=typeof this._lastValueReported||0!=this.compare(a,this._lastValueReported);(this.intermediateChanges||b||void 0===b)&&this._pendingOnChange&&(this._lastValueReported=a,this._pendingOnChange=!1,this._onChangeActive&&(this._onChangeHandle&&this._onChangeHandle.remove(),
this._onChangeHandle=this.defer(function(){this._onChangeHandle=null;this.onChange(a)})))},create:function(){this.inherited(arguments);this._onChangeActive=!0},destroy:function(){this._onChangeHandle&&(this._onChangeHandle.remove(),this.onChange(this._lastValueReported));this.inherited(arguments)}})})},"xfile/ThumbRenderer":function(){define(["xdojo/declare","xide/utils","dojo/dom-construct","xgrid/ThumbRenderer"],function(n,m,k,h){return n("xfile.ThumbRenderer",[h],{thumbSize:"400",resizeThumb:!0,
__type:"thumb",deactivateRenderer:function(){$(this.domNode.parentNode).removeClass("metro");$(this.domNode).css("padding","");this.isThumbGrid=!1},activateRenderer:function(){$(this.domNode.parentNode).addClass("metro");$(this.contentNode).css("padding","8px");this.isThumbGrid=!0;this.refresh()},_renderUpload:function(d,b,c){b=parseInt(b.replace("%",""));100==b&&(b=90);d='\x3cdiv class\x3d"tile widget uploadItem"\x3e\x3cdiv class\x3d"radial-progress tile widget " data-progress\x3d"'+b+'"\x3e\x3cdiv class\x3d"circle"\x3e\x3cdiv class\x3d"mask full"\x3e\x3cdiv class\x3d"fill"\x3e\x3c/div\x3e\x3c/div\x3e\x3cdiv class\x3d"mask half"\x3e\x3cdiv class\x3d"fill"\x3e\x3c/div\x3e\x3cdiv class\x3d"fill fix"\x3e\x3c/div\x3e\x3c/div\x3e\x3cdiv class\x3d"shadow"\x3e\x3c/div\x3e\x3c/div\x3e\x3cdiv class\x3d"inset"\x3e\x3cdiv class\x3d"percentage"\x3e\x3cdiv class\x3d"numbers"\x3e\x3cspan\x3e-\x3c/span\x3e';
for(b=0;99>b;b++)d+="\x3cspan\x3e"+b+"%\x3c/span\x3e";return d+"\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e"},renderRow:function(d){if(!0===d.isUpload)return $(this._renderUpload(d.name,d.progress+"%",d))[0];if(d.renderRow){var b=d.renderRow.apply(this,[d]);if(b)return b}var b=k.create("div",{className:"tile widget"}),c=!1===d.read&&!1===d.write,g=".."==d.name,p=d&&!!d.directory,a=!1,e="",q="fa fa-folder fa-5x";this._doubleWidthThumbs=!0;var u="icon";p?(q=g?"fa fa-level-up fa-5x itemFolder":
c?"fa fa-lock fa-5x itemFolder":"fa fa-folder fa-5x itemFolder",a=!0):(q="itemIcon",c?(q="fa fa-lock fa-5x itemFolder",a=!0):m.isImage(d.path)?(q=this.getImageUrl(d),d.icon=q?q:this.config.REPO_URL+"/"+d.path,q="imageFile"):(q="fa fa-5x "+m.getIconClass(d.path),a=!0));e=d.name;c='\x3cspan style\x3d"text-shadow: 2px 2px 5px rgba(0,0,0,0.3);font-size: 72px;opacity: 0.7" class\x3d"fa fa-6x '+q+'"\x3e\x3c/span\x3e';this.hideExtensions&&(e=m.pathinfo(e).filename);m.isImage(d.path)&&(q=this.getImageUrl(d),
d.icon=q?q:this.config.REPO_URL+"/"+d.path,q="",u="image",c='\x3cdiv style\x3d"" class\x3d"tile-content image"\x3e\x3cimg class\x3d"'+q+'" src\x3d"'+d.icon+'"/\x3e\x3c/div\x3e',a=!0);e='\x3cdiv title\x3d"'+(e+"\n"+d.modified)+'" class\x3d"tile-content '+u+'"\x3e'+c+'\x3c/div\x3e\x3cdiv class\x3d"brand opacity"\x3e\x3cspan class\x3d"thumbText text opacity ellipsis" style\x3d""\x3e'+e+"\x3c/span\x3e\x3c/div\x3e";if(a)return b.innerHTML=e,b;b.innerHTML=p?e:'\x3cimg class\x3d"'+q+'" src\x3d"'+d.icon+
'"/\x3e\x26nbsp;\x3cdiv class\x3d"name"\x3e'+d.name+"\x3c/div\x3e";return b},getImageUrl:function(d){var b=this.ctx.getFileManager();if(b&&b){var c=null;this.resizeThumb&&(c={width:this.thumbSize});return b.getImageUrl(d,null,c)}return null}})})},"xaction/ActionProvider":function(){define("xdojo/declare dcl/dcl xide/types xide/utils xide/model/Path xaction/ActionStore xaction/Action xide/Keyboard xide/mixins/EventedMixin xaction/DefaultActions xide/lodash".split(" "),function(n,m,k,h,d,b,c,g,p,a,
e){var q={actionStore:null,actions:null,allowActionOverride:!0,sortGroups:function(a,b){return a=a.sort(function(a,e){return null!=b[a]&&null!=b[e]?b[e]-b[a]:100})},getItemsAtBranch:function(a,b){return(new d(b)).getChildren(e.map(a,"command"),!1)},refreshActions:function(){for(var a=this.getActions(),b=0;b<a.length;b++){var e=a[b];e.refresh&&e.refresh()}},getAction:function(a){return e.isString(a)?this.getActionStore().getSync(a):a},clearActions:function(){var a=this.getActionStore(),b=a?a.query():
[];e.each(b,function(b){b&&a.removeSync(b.command)});a&&a.setData([])},destroy:function(){this.clearActions();return this.inherited(arguments)},__createAction:function(a,b,e,q,p,d,z,y,m,C,n){q=q||k.ACTION_ICON[b];d={accelKey:d};h.mixin(d,n);a=c.createDefault(a,q,b,e,p,d);if(z){var r;this.keyboardMappings?r=this.keyboardMappings:a.keyboardMappings=r=[];p=g.defaultMapping(z,p,y||k.KEYBOARD_PROFILE.DEFAULT,m,C,[a]);p=this.registerKeyboardMapping(p);r.push(p);a.keyboardMappings=r}return a},updateAction:function(a,
b,e){if(a=a||this.getAction(a))a.set(b,e),setTimeout(function(){a.getReferences().forEach(function(a){a.set(b,e)})},100)},_completeActions:function(a){for(var b=[],g=this.getKeyTarget?this.getKeyTarget():null,q=0;q<a.length;q++){var p=a[q],d=void 0;p&&(p instanceof c?d=p:(d=this.__createAction(p.title,p.command,p.group,p.icon,p.handler,p.accelKey,p.keyCombo,p.keyProfile,g||p.keyTarget,p.keyScope,p.mixin),d.parameters=p),this._addAction(b,d))}this.keyboardMappings&&console.error("have mappings");e.each(this.keyboardMappings,
function(a){this.registerKeyboardMapping(a)},this);return b},createActionStore:function(){if(!this.actionStore){var a=this._completeActions(this.actions||[]);this.actionStore=new b({id:h.createUUID(),data:a,observedProperties:["value","icon","label"],tabOrder:this.tabOrder,groupOrder:this.groupOrder,tabSettings:this.tabSettings,menuOrder:this.menuOrder})}return this.actionStore},getActions:function(a,b){if(!a&&!1!==b&&this.__actions)return this.__actions;(b=a)||(b={command:/\S+/});return this.__actions=
this.getActionStore().query(b)},getActionStore:function(){return this.createActionStore()},postMixInProperties:function(){this.inherited&&this.inherited(arguments);this.createActionStore()},addActions:function(a){var b=this,c=this.getActionStore();c["subscribedToUpdates_"+this.id]||(c["subscribedToUpdates_"+this.id]=!0,this.addHandle("update",c.on("update",function(a){var b=a.target;if(!b._isCreating&&a.property&&b&&b.onChange)b.onChange(a.property,a.value,b)})));var g=[];this._emit("onAddActions",
{actions:a,permissions:this.permissions,store:c});this.allowActionOverride&&e.each(a,function(a){a&&(a=c.getSync(a.command))&&c.removeSync(a.command)});a=this._completeActions(a);e.each(a,function(a){b.allowActionOverride&&c.getSync(a.command)&&c.removeSync(a.command);a=c.putSync(a);g.push(a);a._isCreating=!0;a.onCreate&&a.onCreate(a);b._emit("onAddAction",a);a._isCreating=!1});return g},createActionShort:function(a,b,c,g,q){return this.createAction(e.extend({label:a,command:b,icon:c,mixin:g&&g.mixin?
g.mixin:q},g))},createAction2:function(b){var c=null,c=b.mixin||{},g=b.owner||c.owner||this,q=b.permissions||this.permissions||[],p=b.command,d=b.keycombo,u=b.label,k=b.icon,m=b.tab,C=b.group,n=b.filterGroup,F=b.onCreate,G=b.handler,D=b.container||this.domNode,H=b.shouldShow,J=b.shouldDisable;h.mixin(c,{owner:g,onChange:b.onChange});if(c.addPermission||a.hasAction(q,p))return G=G||a.defaultHandler,d&&(e.isString(d)&&(d=[d]),c.tooltip=d.join("\x3cbr/\x3e").toUpperCase()),c=a.createAction(u,p,k,d,m,
C,n,F,G,c,H,J,D||this.domNode),g&&c&&g.addAction&&g.addAction(null,c),c},createAction:function(b,c,g,q,p,d,k,y,m,C,n,F,G,D,H){if(1==arguments.length)return this.createAction2(arguments[0]);var r=null;C=C||{};h.mixin(C,{owner:H||this});if(C.addPermission||a.hasAction(G,c))return m||(m=function(a){this.runAction&&this.runAction.apply(this,[a])}),q&&e.isString(q)&&(q=[q]),r=a.createAction(b,c,g,q,p,d,k,y,m,C,n,F,D||this.domNode),H&&r&&H.addAction&&H.addAction(null,r),r},addAction:function(a,b){a=a||
[];var c=this._emit("addAction",b);if(!1===c)return!1;e.isObject(c)&&h.mixin(b,c);a.push(b);return!0},_addAction:function(a,b){a=a||[];var e=this._emit("addAction",b);if(!1===e)return!1;h.isObject(e)&&h.mixin(b,e);a.push(b);return!0},hasAction:function(b){return a.hasAction(this.permissions,b)}};n=n("xaction/ActionProvider",[p,g],q);n.dcl=m([p.dcl,g.dcl],q);return n})},"dstore/Filter":function(){define(["dojo/_base/declare"],function(n){function m(h){return function(){var d=this.constructor,b=new d;
b.type=h;b.args=Array.prototype.slice.call(arguments);return this.type?m("and").call(d.prototype,this,b):b}}function k(h){return function(){for(var d=this.constructor,b=[],c=0;c<arguments.length;c++){var g=arguments[c];b.push(g instanceof d?g:new d(g))}d=new d;d.type=h;d.args=b;this.type===h?d.args=this.args.concat(b):this.type?b.unshift(this):1===b.length&&(d.type=b[0].type,d.args=b[0].args.slice());return d}}n=n(null,{constructor:function(h){var d=typeof h;switch(d){case "object":var d=this,b;for(b in h)var c=
h[b],d=c instanceof this.constructor?d[c.type](b,c.args[0]):c&&c.test?d.match(b,c):d.eq(b,c);this.type=d.type;this.args=d.args;break;case "function":case "string":this.type=d,this.args=[h]}},and:k("and"),or:k("or"),eq:m("eq"),ne:m("ne"),lt:m("lt"),lte:m("lte"),gt:m("gt"),gte:m("gte"),contains:m("contains"),"in":m("in"),match:m("match")});n.filterCreator=m;n.logicalOperatorCreator=k;return n})},"xblox/model/events/OnKey":function(){define("dcl/dcl dojo/_base/lang dojo/_base/array dojo/Deferred xblox/model/Block xide/utils xide/types xide/mixins/EventedMixin xblox/model/Referenced xblox/model/Contains xblox/model/events/OnEvent xide/registry dojo/on".split(" "),
function(n,m,k,h,d,b,c,g,p,a,e,q,u){return n([d,g.dcl,p.dcl,a],{declaredClass:"xblox.model.events.OnKey",name:"On Key",event:"",reference:"",references:null,description:"Triggers when a keyboard sequence "+this.event+" has been entered",listeners:null,sharable:!0,toText:function(){var a=this.getBlockIcon()+" "+this.name+" :: ";this.event&&(a+=this.event);return a},canAdd:function(){return[]},getFields:function(){var a=this.inherited(arguments)||this.getDefaultFields();a.push(b.createCI("Keyboard Sequence",
c.ECIType.STRING,this.event,{group:"General",dst:"event",value:this.event,intermediateChanges:!1}));a.push(b.createCI("Object/Widget",c.ECIType.WIDGET_REFERENCE,this.reference,{group:"General",dst:"reference",value:this.reference}));return a},getBlockIcon:function(){return'\x3cspan class\x3d"fa-keyboard-o"\x3e\x3c/span\x3e'},onEvent:function(a){this._lastResult=a;this.solve(this.scope,this._lastRunSettings)},_addListerner:function(a,b,e){null==this.listeners&&(this.listeners=[]);var c=null,c=new window.keypress.Listener(e,
{is_unordered:!0,prevent_repeat:!1,prevent_default:!1,on_keyup:function(a){},on_keydown:function(a){},on_release:function(a){}});c.simple_combo(a,function(a){b&&b(arguments)});this.listeners.push(c)},_subscribe:function(a,b,e){a&&(e&&e.domNode&&(e=e.domNode),this._addListerner(a,b,e))},_registerEvent:function(a){if(a&&a.length){var b=this.resolveReference(this.deserialize(this.reference)),e=this;if(b&&b.length)for(var c=0;c<b.length;c++){var g=b[c];if(g&&g.id){var p=q.byId(g.id);p=null,this._subscribe(a,
function(){e.onEvent(arguments)},g)}else this._subscribe(a,function(){e.onEvent(arguments)},g)}else this._subscribe(a,function(){e.onEvent(arguments)})}},onLoad:function(){this._onLoaded=!0;this.event&&this.event.length&&this.enabled&&this._registerEvent(this.event)},destroy:function(){this.inherited(arguments)},updateEventSelector:function(a,b){var e=[];if(a&&a.length)for(e=[{label:"onclick",value:"onclick"},{label:"ondblclick",value:"ondblclick"},{label:"onmousedown",value:"onmousedown"},{label:"onmouseup",
value:"onmouseup"},{label:"onmouseover",value:"onmouseover"},{label:"onmousemove",value:"onmousemove"},{label:"onmouseout",value:"onmouseout"},{label:"onkeypress",value:"onkeypress"},{label:"onkeydown",value:"onkeydown"},{label:"onkeyup",value:"onkeyup"},{label:"onfocus",value:"onfocus"},{label:"onblur",value:"onblur"},{label:"onchange",value:"onchange"}],a=0;a<e.length;a++){var g=e[a];if(g.value===this.event){g.selected=!0;break}}else e=this.scope.getEventsAsOptions(this.event);for(a=0;a<b.length;a++)if(g=
b[a],g.widget&&"Event"===g.widget.title){b=g._widget;b.nativeWidget.set("options",e);b.nativeWidget.reset();b.nativeWidget.set("value",this.event);this.publish(c.EVENTS.RESIZE,{});break}},onReferenceChanged:function(a,b){this._destroy();this.reference=a;this.resolveReference(this.deserialize(a));this._registerEvent(this.event)},onChangeField:function(a,b,e){"event"==a&&(this._destroy(),this._onLoaded&&(this.event=b,this._registerEvent(b)));if("reference"==a)this.onReferenceChanged(b,e);this.inherited(arguments)},
activate:function(){this._destroy();this._registerEvent(this.event)},deactivate:function(){this._destroy()},_destroy:function(){if(this.listeners)for(var a=0;a<this.listeners.length;a++){var b=this.listeners[a];b.stop_listening();var e=b.get_registered_combos();e&&b.unregister_many(e);b.reset()}this.listeners=[]},onFieldsRendered:function(a,b){}})})},"dstore/Promised":function(){define(["dojo/_base/declare","dojo/Deferred","./QueryResults","dojo/when"],function(n,m,k,h){function d(b,c){return function(){var g=
new m;try{g.resolve(this[b].apply(this,arguments))}catch(p){g.reject(p)}return c?(g=new k(g.promise),g.totalLength=h(g.totalLength),g):g.promise}}return n(null,{get:d("getSync"),put:d("putSync"),add:d("addSync"),remove:d("removeSync"),fetch:d("fetchSync",!0),fetchRange:d("fetchRangeSync",!0)})})},"xgrid/ListRenderer":function(){define(["xdojo/declare","xide/types","./Renderer","dojo/dom-construct","dgrid/Grid"],function(n,m,k,h,d){m={_getLabel:function(){return"List"},_getIcon:function(){return"fa-th-list"},
activateRenderer:function(b){this._showHeader(!0)},deactivateRenderer:function(b){},_configColumns:function(){return d.prototype._configColumns.apply(this,arguments)},insertRow:function(b,c){return d.prototype.insertRow.apply(this,arguments)},renderRow:function(b,c){var g=this,p=this.createRowCells("td",function(a,q){var e=b;q.get?e=q.get(b):"field"in q&&"_item"!==q.field&&(e=e[q.field]);g._defaultRenderCell.call(q,b,e,a,c)},c&&c.subRows,b),a=h.create("div",{role:"row"});a.appendChild(p);return a}};
n=n("xgrid.ListRenderer",[k],m);n.Implementation=m;return n})},"davinci/ve/commands/AddCommand":function(){define("dojo/_base/declare davinci/ve/commands/_hierarchyCommand davinci/ve/widget davinci/ve/utils/ImageUtils davinci/ve/States davinci/ve/commands/ModifyCommand".split(" "),function(n,m,k,h,d,b){return n("davinci.ve.commands.AddCommand",[m],{name:"add",constructor:function(b,g,p){b&&(b.domNode?this._id=b.id:this._data=b);this._parentId=g.id;this._index=p},execute:function(){var c=k.byId(this._parentId);
if(c){var g=c.getContext(),p=void 0;this._data?(this._id&&this._data.properties&&(this._data.properties.id=this._id),p=k.createWidget(this._data),this._id=p.id):this._id&&(p=k.byId(this._id,g));if(p){this._data=p.getData();this._data.properties.id=this._id;this._data.context=g;if(this._index&&"number"!=typeof this._index)if(this._index.domNode)this._index=c.indexOf(this._index);else{var a=k.byId(this._index.id,g);this._index=c.indexOf(a)}"IMG"===p.domNode.tagName&&h.ImageUpdateFocus(p,g);c.addChild(p,
this._index);g&&(g.attach(p),p.startup(),p.renderWidget(),g.widgetAddedOrDeleted(),g.widgetChanged(g.WIDGET_ADDED,p));(g=this._isRefreshOnDescendantChange(p))&&(new b(g,null,null,c._edit_context)).execute();d.resetState(p.domNode)}}},undo:function(){if(this._id&&this._parentId){var c=k.byId(this._id);if(c){var g=k.byId(this._parentId);if(g){var p=this._isRefreshOnDescendantChange(c),a=c.getContext();a&&(a.detach(c),a.deselect(c));g.removeChild(c);a.widgetChanged(a.WIDGET_REMOVED,c);c.destroyWidget();
a&&a.widgetAddedOrDeleted();p&&(new b(p,null,null,g._edit_context)).execute();d.resetState(c.domNode)}}}}})})},"davinci/ve/actions/_CutCopyAction":function(){define("dojo/_base/declare davinci/Workbench davinci/ve/actions/ContextAction davinci/commands/CompoundCommand davinci/ve/commands/RemoveCommand davinci/ve/widget".split(" "),function(n,m,k,h,d,b){return n("davinci.ve.actions.CutAction",[k],{run:function(c){if(c=this.fixupContext(c))if("davinci.ve.PageEditor"==c.declaredClass&&"source"==c._displayMode)this._invokeSourceEditorAction(c);
else{var g=this._normalizeSelection(c);if(0<g.length){var p=new h,a=[],e=c.reorderPreserveSiblingOrder(g);dojo.forEach(e,function(e){var c=e.getData({identify:!1});c&&a.push(c);var g=e.getHelper();if(g&&g.getRemoveCommand){if(e=g.getRemoveCommand(e),"compound"===e.name){for(var g=[],q=e._commands,v=q.length-1;0<v;v--){var h=q[v];"remove"===h.name&&(h=b.byId(h._id).getData({identify:!1}),g.push(h))}c.associatedCopiedWidgetData=g}}else e=new d(e);p.add(e)});this._executeAction(c,g,a,p)}}},isEnabled:function(b){b=
this.fixupContext(b);var c=m.getOpenEditor();return c&&b?(b=0<b.getSelection().length,"davinci.ve.PageEditor"==c.declaredClass?(c=c.getDisplayMode(),b&&"source"!=c):b):!1},shouldShow:function(b){return(b=(b=this.fixupContext(b))?b.editor:null)&&"davinci.ve.PageEditor"==b.declaredClass},_invokeSourceEditorAction:function(b){},_executeAction:function(b,g,p,a){}})})},"dijit/layout/ContentPane":function(){define("dojo/_base/kernel dojo/_base/lang ../_Widget ../_Container ./_ContentPaneResizeMixin dojo/string dojo/html dijit/lang/loading dojo/_base/array dojo/_base/declare dojo/_base/Deferred dojo/dom dojo/dom-attr dojo/dom-construct dojo/_base/xhr dojo/i18n dojo/when".split(" "),
function(n,m,k,h,d,b,c,g,p,a,e,q,u,w,r,v,x){return a("dijit.layout.ContentPane",[k,h,d],{href:"",content:"",extractContent:!1,parseOnLoad:!0,parserScope:n._scopeName,preventCache:!1,preload:!1,refreshOnShow:!1,loadingMessage:"\x3cspan class\x3d'dijitContentPaneLoading'\x3e\x3cspan class\x3d'dijitInline dijitIconLoading'\x3e\x3c/span\x3e${loadingState}\x3c/span\x3e",errorMessage:"\x3cspan class\x3d'dijitContentPaneError'\x3e\x3cspan class\x3d'dijitInline dijitIconError'\x3e\x3c/span\x3e${errorState}\x3c/span\x3e",
isLoaded:!1,baseClass:"dijitContentPane ui-widget-content",ioArgs:{},onLoadDeferred:null,_setTitleAttr:null,stopParser:!0,template:!1,markupFactory:function(a,b,e){var c=new e(a,b);return!c.href&&c._contentSetter&&c._contentSetter.parseDeferred&&!c._contentSetter.parseDeferred.isFulfilled()?c._contentSetter.parseDeferred.then(function(){return c}):c},create:function(a,b){if(!(a&&a.template||!b||"href"in a||"content"in a)){b=q.byId(b);for(var e=b.ownerDocument.createDocumentFragment();b.firstChild;)e.appendChild(b.firstChild);
a=m.delegate(a,{content:e})}this.inherited(arguments,[a,b])},postMixInProperties:function(){this.inherited(arguments);this.loadingMessage=b.substitute(this.loadingMessage,g);this.errorMessage=b.substitute(this.errorMessage,g)},buildRendering:function(){this.inherited(arguments);this.containerNode||(this.containerNode=this.domNode);this.domNode.removeAttribute("title")},startup:function(){this.inherited(arguments);this._contentSetter&&p.forEach(this._contentSetter.parseResults,function(a){a._started||
a._destroyed||!m.isFunction(a.startup)||(a.startup(),a._started=!0)},this)},_startChildren:function(){p.forEach(this.getChildren(),function(a){a._started||a._destroyed||!m.isFunction(a.startup)||(a.startup(),a._started=!0)});this._contentSetter&&p.forEach(this._contentSetter.parseResults,function(a){a._started||a._destroyed||!m.isFunction(a.startup)||(a.startup(),a._started=!0)},this)},setHref:function(a){n.deprecated("dijit.layout.ContentPane.setHref() is deprecated. Use set('href', ...) instead.",
"","2.0");return this.set("href",a)},_setHrefAttr:function(a){this.cancel();this.onLoadDeferred=new e(m.hitch(this,"cancel"));this.onLoadDeferred.then(m.hitch(this,"onLoad"));this._set("href",a);this.preload||this._created&&this._isShown()?this._load():this._hrefChanged=!0;return this.onLoadDeferred},setContent:function(a){n.deprecated("dijit.layout.ContentPane.setContent() is deprecated.  Use set('content', ...) instead.","","2.0");this.set("content",a)},_setContentAttr:function(a){this._set("href",
"");this.cancel();this.onLoadDeferred=new e(m.hitch(this,"cancel"));this._created&&this.onLoadDeferred.then(m.hitch(this,"onLoad"));this._setContent(a||"");this._isDownloaded=!1;return this.onLoadDeferred},_getContentAttr:function(){return this.containerNode.innerHTML},cancel:function(){this._xhrDfd&&-1==this._xhrDfd.fired&&this._xhrDfd.cancel();delete this._xhrDfd;this.onLoadDeferred=null},destroy:function(){this.cancel();this.inherited(arguments)},destroyRecursive:function(a){this._beingDestroyed||
this.inherited(arguments)},_onShow:function(){this.inherited(arguments);if(this.href&&!this._xhrDfd&&(!this.isLoaded||this._hrefChanged||this.refreshOnShow))return this.refresh()},refresh:function(){this.cancel();this.onLoadDeferred=new e(m.hitch(this,"cancel"));this.onLoadDeferred.then(m.hitch(this,"onLoad"));this._load();return this.onLoadDeferred},_load:function(){this._setContent(this.onDownloadStart(),!0);var a=this,b={preventCache:this.preventCache||this.refreshOnShow,url:this.href,handleAs:"text"};
m.isObject(this.ioArgs)&&m.mixin(b,this.ioArgs);var e=this._xhrDfd=(this.ioMethod||r.get)(b),c;e.then(function(b){c=b;try{return a._isDownloaded=!0,a._setContent(b,!1)}catch(E){a._onError("Content",E)}},function(b){e.canceled||a._onError("Download",b);delete a._xhrDfd;return b}).then(function(){a.onDownloadEnd();delete a._xhrDfd;return c});delete this._hrefChanged},_onLoadHandler:function(a){this._set("isLoaded",!0);try{this.onLoadDeferred.resolve(a)}catch(z){console.error("Error "+this.widgetId+
" running custom onLoad code: "+z.message)}},_onUnloadHandler:function(){this._set("isLoaded",!1);try{this.onUnload()}catch(A){console.error("Error "+this.widgetId+" running custom onUnload code: "+A.message)}},destroyDescendants:function(a){this.isLoaded&&this._onUnloadHandler();var b=this._contentSetter;p.forEach(this.getChildren(),function(b){b.destroyRecursive?b.destroyRecursive(a):b.destroy&&b.destroy(a);b._destroyed=!0});b&&(p.forEach(b.parseResults,function(b){b._destroyed||(b.destroyRecursive?
b.destroyRecursive(a):b.destroy&&b.destroy(a),b._destroyed=!0)}),delete b.parseResults);a||w.empty(this.containerNode);delete this._singleChild},_setContent:function(a,b){this.destroyDescendants();var e=this._contentSetter;e&&e instanceof c._ContentSetter||(e=this._contentSetter=new c._ContentSetter({node:this.containerNode,_onError:m.hitch(this,this._onError),onContentError:m.hitch(this,function(a){a=this.onContentError(a);try{this.containerNode.innerHTML=a}catch(F){console.error("Fatal "+this.id+
" could not change content due to "+F.message,F)}})}));var g=m.mixin({cleanContent:this.cleanContent,extractContent:this.extractContent,parseContent:!a.domNode&&this.parseOnLoad,parserScope:this.parserScope,startup:!1,dir:this.dir,lang:this.lang,textDir:this.textDir},this._contentSetterParams||{}),g=e.set(m.isObject(a)&&a.domNode?a.domNode:a,g),q=this;return x(g&&g.then?g:e.parseDeferred,function(){delete q._contentSetterParams;b||(q._started&&(q._startChildren(),q._scheduleLayout()),q._onLoadHandler(a))})},
_onError:function(a,b,e){this.onLoadDeferred.reject(b);a=this["on"+a+"Error"].call(this,b);e?console.error(e,b):a&&this._setContent(a,!0)},onLoad:function(){},onUnload:function(){},onDownloadStart:function(){return this.loadingMessage},onContentError:function(){},onDownloadError:function(){return this.errorMessage},onDownloadEnd:function(){}})})},"dijit/dijit":function(){define("./main ./_base dojo/parser ./_Widget ./_TemplatedMixin ./_Container ./layout/_LayoutWidget ./form/_FormWidget ./form/_FormValueWidget".split(" "),
function(n){return n})},"xide/manager/Application_XIDEVE":function(){define(["dcl/dcl","xdojo/has","xideve/manager/WidgetManager","dojo/Deferred"],function(n,m,k,h){return n(null,{declaredClass:"xide.manager.Application_XIDEVE",initXIDEVE:function(){var d=new h;this.ctx.getWidgetManager()||(this.ctx.widgetManager=this.ctx.createManager(k,null),this.ctx.widgetManager.init());d.resolve();return d}})})},"davinci/js/JSElement":function(){define(["dojo/_base/declare","davinci/js/JSModel"],function(n,m){var k=
null,h=null;return n("davinci.js.JSElement",m,{constructor:function(){this.elementType="JSElement";null!==k&&(this.comment=k,k=null);null!==h&&(this.label=h,h=null)},printNewLine:function(d){for(var b="\n",c=0;c<d.indent;c++)b+=" ";return b},printStatement:function(d,b){return this.printNewLine(d)+b.getText(d)+(b.nosemicolon?"":";")},add:function(d){this.addChild(d)},init:function(d,b,c){},getLabel:function(){context={indent:0};return this.getText(context)},getID:function(){return this.parent.getID()+
":"+this.startLine+":"+this.getLabel()},getSyntaxPositions:function(d){function b(b,a,e,c){"undefined"!=typeof d&&d!=b||g.push({line:b,col:a,length:e,type:c})}function c(b,a,e){"undefined"!=typeof d&&d!=b[0]||g.push({line:b[0],col:b[1],length:a,type:e})}var g=[];this.visit({visit:function(g){"JSFunction"==g.elementType?(b(g.startLine,g.startCol,8,"keyword"),c(g.leftParenPos,1,"delimiter"),c(g.rightParenPos,1,"delimiter"),c(g.leftBracePos,1,"delimiter"),c(g.rightBracePos,1,"delimiter")):"JSVariableDeclaration"==
g.elementType?b(g.startLine,g.startCol,3,"keyword"):"JSVariableFragment"==g.elementType?g.equalPos?c(g.equalPos,1,"operator"):b(g.startLine,g.startCol,1,"name"):"JSNameReference"==g.elementType&&b(g.startLine,g.startCol,g.endCol-g.startCol,"name")},endVisit:function(b){return!0}});return g}})})},"dojo/mouse":function(){define(["./_base/kernel","./on","./has","./dom","./_base/window"],function(n,m,k,h,d){function b(c,g){var p=function(a,b){return m(a,c,function(e){if(g)return g(e,b);if(!h.isDescendant(e.relatedTarget,
a))return b.call(this,e)})};p.bubble=function(a){return b(c,function(b,c){var e=a(b.target),g=b.relatedTarget;if(e&&e!=(g&&1==g.nodeType&&a(g)))return c.call(e,b)})};return p}k.add("dom-quirks",d.doc&&"BackCompat"==d.doc.compatMode);k.add("events-mouseenter",d.doc&&"onmouseenter"in d.doc.createElement("div"));k.add("events-mousewheel",d.doc&&"onmousewheel"in d.doc);d=k("dom-quirks")&&k("ie")||!k("dom-addeventlistener")?{LEFT:1,MIDDLE:4,RIGHT:2,isButton:function(b,g){return b.button&g},isLeft:function(b){return b.button&
1},isMiddle:function(b){return b.button&4},isRight:function(b){return b.button&2}}:{LEFT:0,MIDDLE:1,RIGHT:2,isButton:function(b,g){return b.button==g},isLeft:function(b){return 0==b.button},isMiddle:function(b){return 1==b.button},isRight:function(b){return 2==b.button}};n.mouseButtons=d;n=k("events-mousewheel")?"mousewheel":function(b,g){return m(b,"DOMMouseScroll",function(b){b.wheelDelta=-b.detail;g.call(this,b)})};return{_eventHandler:b,enter:b("mouseover"),leave:b("mouseout"),wheel:n,isLeft:d.isLeft,
isMiddle:d.isMiddle,isRight:d.isRight}})},"davinci/model/parser/Tokenizer":function(){define(["dojo/_base/declare","davinci/js/JSExpression"],function(n,m){return{stringStream:function(k){function h(){for(;b==d.length;){g+=d;d="";b=0;try{d=k.next()}catch(p){if(p!=StopIteration)throw p;return!1}}return!0}var d="",b=0,c=0,g="";return{peek:function(){return h()?d.charAt(b):null},next:function(){if(!h()){if(0<g.length)throw"End of stringstream reached without emptying buffer ('"+g+"').";throw StopIteration;
}return d.charAt(b++)},get:function(){var p=g;g="";0<b&&(p+=d.slice(0,b),d=d.slice(b),b=0);c+=p.length;return p},getOffset:function(){return c},push:function(g){d=d.slice(0,b)+g+d.slice(b);c-=g.length},lookAhead:function(c,a,e,q){function p(a){return q?a.toLowerCase():a}c=p(c);var w=!1,r=g,v=b;for(e&&this.nextWhileMatches(/[\s\u00a0]/);;){e=b+c.length;var h=d.length-b;if(e<=d.length){w=c==p(d.slice(b,e));b=e;break}else if(c.slice(0,h)==p(d.slice(b))){g+=d;d="";try{d=k.next()}catch(A){if(A!=StopIteration)throw A;
break}b=0;c=c.slice(h)}else break}w&&a||(d=g.slice(r.length)+d,b=v,g=r);return w},lookAheadRegex:function(c,a){if("^"!=c.source.charAt(0))throw Error("Regexps passed to lookAheadRegex must start with ^");for(;-1==d.indexOf("\n",b);)try{d+=k.next()}catch(e){if(e!=StopIteration)throw e;}(c=d.slice(b).match(c))&&a&&(b+=c[0].length);return c},more:function(){return null!==this.peek()},applies:function(b){var a=this.peek();return null!==a&&b(a)},nextWhile:function(b){for(var a;null!==(a=this.peek())&&
b(a);)this.next()},matches:function(b){var a=this.peek();return null!==a&&b.test(a)},nextWhileMatches:function(b){for(var a;null!==(a=this.peek())&&b.test(a);)this.next()},equals:function(b){return b===this.peek()},endOfLine:function(){var b=this.peek();return null==b||"\n"==b}}},tokenizer:function(k,h){function d(b){return"\n"!=b&&/^[\s\u00a0]*$/.test(b)}var b={state:h,take:function(b){"string"==typeof b&&(b={style:b,type:b});b.offset=k.getOffset();b.content=(b.content||"")+k.get();/\n$/.test(b.content)||
k.nextWhile(d);b.value=b.content+k.get();return b},next:function(){if(!k.more())throw StopIteration;var c;if(k.equals("\n"))return k.next(),this.take("whitespace");if(k.applies(d))c="whitespace";else for(;!c;)c=this.state(k,function(c){b.state=c});return this.take(c)}};return b}}})},"nxapp/utils/FileUtils":function(){define("dojo/_base/json dojo/node!path dojo/node!fs dojo/node!util nxapp/utils xdojo/has!host-node?dojo/node!glob-fs xdojo/has!host-node?dojo/node!glob-base xdojo/has!host-node?dojo/node!glob".split(" "),
function(n,m,k,h,d,b,c,g){d.list=function(g){try{var a={},e=c(g);e.base&&(a.cwd=e.base,e.isGlob&&(g=e.glob));var q=(new b).readdirSync(g,a),p=[];_.each(q,function(b){p.push((a.cwd?a.cwd+m.sep:"")+b)})}catch(w){return null}return p};d.__toObject=function(b){try{var a=k.statSync(b,function(a){}),e=a.isDirectory();return{path:b,sizeBytes:a.size,size:e?"Folder":"",owner:a.uid,group:a.gid,mode:a.mode,isDir:e,directory:e,name:m.win32.basename(b),fileType:e?"folder":"file",modified:a.mtime.getTime()/1E3}}catch(q){return{path:b,
sizeBytes:0,size:0,owner:0,group:0,mode:0,directory:!1,mime:"unknown",name:m.win32.basename(b),fileType:"file",modified:0}}};d.ls=function(b){function a(a,e){return a?a=!c||e&&"/"!==e?b.join(e,a):""+a:""}var e={},c="win32"===process.platform;if("/*"===b&&c){var p=[];flop.read("/",function(a,b){_.each(b.files,function(a){p.push({path:"/"+a.name+":",sizeBytes:0,size:0,owner:0,group:0,mode:0,directory:!0,mime:"unknown",name:a.name,fileType:"folder",modified:0,drive:!0})})})}else{var w="";if(c)if(5===
b.length){var r=b.split(":/");2==r.length&&(w=r[0][1]+":/",e={root:w},b="/*")}else r=b.split(":/"),2==r.length&&(w=r[0][1]+":/",e={root:w},b=""+r[1]);e=g.sync(b,e);_.isArray(e)||(e=[e]);p=[];_.each(e,function(b){b=d.__toObject(b);c&&b&&b.path&&(b.path=m.resolve(a(b.path)));b.realPath=m.resolve(b.path);b&&p.push(b)});return p}};d.resolve=function(b){var a=m.resolve(b);try{if(k.statSync(a))return a}catch(q){return a}try{if(k.statSync(b))return b;var e=process.cwd()+m.sep+b;if(k.statSync(e))return e}catch(q){}return null};
d.isDirectory=function(b){return(b=d.resolve(b))&&(b=k.statSync(b))&&b.isDirectory()?!0:!1};d.getExtension=function(b){b=m.extname(b||"").split(".");return b[b.length-1]};d.readFile=function(b){var a=k.statSync(b).size,e=new Buffer(a);b=k.openSync(b,"r");if(!a)return"";k.readSync(b,e,0,a,0);k.closeSync(b);return e.toString()};d.writeFile=function(b,a){k.writeFile(b,a,function(a){})};d.writeJSONFile=function(b,a){a=JSON.stringify(a,null,4);k.writeFile(b,a,function(a){})};return d})},"davinci/ve/actions/ModifyState":function(){define("dojo/_base/declare dojo/Deferred dojo/_base/connect dijit/_WidgetBase dijit/_TemplatedMixin dijit/_WidgetsInTemplateMixin dijit/popup dijit/focus davinci/ve/States davinci/ui/Dialog davinci/Runtime davinci/Workbench davinci/actions/Action davinci/lang/ve dijit/lang/_common dojo/text!./templates/ModifyState.html dijit/form/TextBox dijit/form/ValidationTextBox davinci/commands/CompoundCommand davinci/ve/commands/AppStateCommand".split(" "),
function(n,m,k,h,d,b,c,g,p,a,e,q,u,w,r,v,x,A,z,y){var B=null;n("davinci.ve.actions.ModifyStateWidget",[h,d,b],{templateString:v,widgetsInTemplate:!0,veNls:w,commonNls:r,isNormalState:!1,newName:null,oldInitialStateOn:null,postCreate:function(){this._connections=[];dijit.byId("state_rename_tooltip_dialog");B.then(function(){this._statesFocus.state&&this._statesFocus.state!==p.NORMAL||(this.isNormalState=!0);var a=dojo.byId("modify_state_old_name");a&&(this._statesFocus&&this._statesFocus.state&&!this.isNormalState?
a.innerHTML=this._statesFocus.state:(a.innerHTML="\x3ci\x3e"+p.NORMAL+"\x3c/i\x3e",this.renameButton.set("disabled",!0)));this.oldInitialStateOn=a=p.getInitial(this._statesFocus.stateContainerNode)===this._statesFocus.state;this.initialState.set("checked",a);a&&this.isNormalState&&this.initialState.set("disabled",!0);this._dialog.connect(this._dialog,"hide",function(a){this.onClose()}.bind(this));this.okButton.connect(this.okButton,"onClick",dojo.hitch(this,function(a){this.onOk(a)}));this.cancelButton.connect(this.cancelButton,
"onClick",dojo.hitch(this,function(a){this.onCancel(a)}));if(a=dijit.byId("state_rename_tooltip_dialog"))a.connect(a,"onShow",function(a){this.renameStateShowTooltipDialog(a)}.bind(this)),a.connect(a,"onHide",function(a){this.renameStateHideTooltipDialog(a)}.bind(this))}.bind(this))},renameStateShowTooltipDialog:function(a){a=dojo.byId("modify_state_old_name");var b=dojo.byId("state_rename_new_name"),e=dijit.byId("state_rename_new_name");a&&e&&e.set("value",a.innerText);g.focus(b);a=dijit.byId("state_rename_do_it");
b=dijit.byId("state_rename_cancel");a.connect(a,"onMouseDown",function(a){a.stopPropagation()});b.connect(a,"onMouseDown",function(a){a.stopPropagation()});a.connect(a,"onClick",function(a){this.renameStateDoIt(a)}.bind(this));b.connect(b,"onClick",function(a){a=dijit.byId("state_rename_tooltip_dialog");c.close(a)}.bind(this))},renameStateDoIt:function(a){a=dojo.byId("modify_state_old_name");var b=dijit.byId("state_rename_new_name"),b=b?b.get("value"):null,e=dijit.byId("state_rename_tooltip_dialog");
a&&b&&(this.newName=a.innerHTML=b);e&&c.close(e)},renameStateHideTooltipDialog:function(a){},onOk:function(a){if(e.currentEditor&&e.currentEditor.currentEditor&&e.currentEditor.currentEditor.context){a=e.currentEditor.currentEditor.context;var b=p.getFocus(a.rootNode);if(b&&b.stateContainerNode){var c;this.newName&&this.newName!==this._statesFocus.state&&(c=this.newName);var g,q=this.initialState.get("checked");q!==this.oldInitialStateOn&&(g=b.state?b.state:"undefined",g=q?g:null);if(c||g)q=new z,
q.add(new y({action:"modify",state:b.state,stateContainerNode:b.stateContainerNode,context:a,newState:c,initialState:g})),a.getCommandStack().execute(q);this.onClose()}}},onCancel:function(){this.onClose()},onClose:function(a){for(;a=this._connections.pop();)k.disconnect(a)}});return n("davinci.ve.actions.ModifyState",[u],{run:function(){var a;if(e.currentEditor&&e.currentEditor.currentEditor&&e.currentEditor.currentEditor.context&&(a=e.currentEditor.currentEditor.context,a=p.getFocus(a.rootNode))){B=
new m;var b=new davinci.ve.actions.ModifyStateWidget,c=q.showModal(b,w.modifyState);this._dialog=b._dialog=c;b._statesFocus=a;B.resolve()}}})})},"dojo/dnd/Avatar":function(){define("../_base/declare ../_base/window ../dom ../dom-attr ../dom-class ../dom-construct ../hccss ../query".split(" "),function(n,m,k,h,d,b,c,g){return n("dojo.dnd.Avatar",null,{constructor:function(b){this.manager=b;this.construct()},construct:function(){var c=b.create("table",{"class":"dojoDndAvatar",style:{position:"absolute",
zIndex:"1999",margin:"0px"}}),a=this.manager.source,e,g=b.create("tbody",null,c),d=b.create("tr",null,g),w=b.create("td",null,d),r=Math.min(5,this.manager.nodes.length),v=0;b.create("span",{innerHTML:a.generateText?this._generateText():""},w);for(h.set(d,{"class":"dojoDndAvatarHeader",style:{opacity:.9}});v<r;++v)a.creator?e=a._normalizedCreator(a.getItem(this.manager.nodes[v].id).data,"avatar").node:(e=this.manager.nodes[v].cloneNode(!0),"tr"==e.tagName.toLowerCase()&&(d=b.create("table"),b.create("tbody",
null,d).appendChild(e),e=d)),e.id="",d=b.create("tr",null,g),w=b.create("td",null,d),w.appendChild(e),h.set(d,{"class":"dojoDndAvatarItem",style:{opacity:(9-v)/10}});this.node=c},destroy:function(){b.destroy(this.node);this.node=!1},update:function(){d.toggle(this.node,"dojoDndAvatarCanDrop",this.manager.canDropFlag);g("tr.dojoDndAvatarHeader td span"+(c("highcontrast")?" span":""),this.node).forEach(function(b){b.innerHTML=this.manager.source.generateText?this._generateText():""},this)},_generateText:function(){return this.manager.nodes.length.toString()}})})},
"xideve/views/StyleView":function(){define("dojo/_base/declare dojo/_base/lang davinci/lang/ve dijit/lang/_common dijit/layout/TabContainer xide/layout/ContentPane xideve/widgets/WidgetLite xide/mixins/ReloadMixin davinci/ve/widgets/HTMLStringUtil xide/layout/_TabContainer davinci/ve/widgets/WidgetToolBar davinci/ve/widgets/Cascade davinci/ve/widgets/CommonProperties davinci/ve/widgets/WidgetProperties davinci/ve/widgets/EventSelection".split(" "),function(n,m,k,h,d,b,c,g,p,a,e,q,u,w,r){return n("xideve/views/StyleView",
[c,g],{showWidgetProperties:!0,_editor:null,_widget:null,_widgets:null,_subWidget:null,_titleBarDiv:"\x3cdiv class\x3d'palette_titleBarDiv'\x3e\x3cspan class\x3d'paletteCloseBox'\x3e\x3c/span\x3e\x3cspan class\x3d'titleBarDivTitle'\x3e\x3c/span\x3e\x3c/div\x3e",constructor:function(a,b){this.subscribe("/davinci/ui/editorSelected",dojo.hitch(this,this._editorSelected));this.subscribe("/davinci/ui/widgetSelected",dojo.hitch(this,this._widgetSelectionChanged));this.subscribe("/davinci/states/state/changed",
dojo.hitch(this,this._stateChanged));this.subscribe("/maqetta/appstates/state/changed",dojo.hitch(this,this._stateChanged));this.subscribe("/davinci/ui/initialPerspectiveReady",dojo.hitch(this,this._initialPerspectiveReady));this.subscribe("/davinci/workbench/ready",dojo.hitch(this,this._workbenchReady))},getPageTemplate:function(){return[{key:"widgetSpecific",className:"maqPropertySection page_editor_only",addCommonPropertiesAtTop:!1,html:"\x3cdiv dojoType\x3d'davinci.ve.widgets.WidgetProperties'\x3e\x3c/div\x3e"},
{key:"events",className:"maqPropertySection page_editor_only",addCommonPropertiesAtTop:!1,pageTemplate:{html:"\x3cdiv dojoType\x3d'davinci.ve.widgets.EventSelection'\x3e\x3c/div\x3e"}},{key:"layout",className:"maqPropertySection",addCommonPropertiesAtTop:!0,pageTemplate:[{display:"width",type:"multi",target:["width"],values:["","auto","100%","200px","10em"]},{display:"height",type:"multi",target:["height"],values:["","auto","100%","200px","10em"]},{html:"\x26nbsp;"},{key:"showMinMax",display:"\x26nbsp;\x26nbsp;\x26nbsp;",
type:"toggleSection",pageTemplate:[{display:"min-height",type:"multi",target:["min-height"],rowClass:"propertiesSectionHidden"},{display:"max-height",type:"multi",target:["max-height"],rowClass:"propertiesSectionHidden"},{display:"min-width",type:"multi",target:["min-width"],rowClass:"propertiesSectionHidden"},{display:"max-width",type:"multi",target:["max-width"],rowClass:"propertiesSectionHidden"},{html:"\x26nbsp;",rowClass:"propertiesSectionHidden"}]},{display:"position",type:"combo",target:["position"],
values:["","absolute","fixed","relative","static"]},{display:"left",type:"multi",target:["left"],values:["","0px","1em"]},{display:"top",type:"multi",target:["top"],values:["","0px","1em"]},{display:"right",type:"multi",target:["right"],values:["","0px","1em"]},{display:"bottom",type:"multi",target:["bottom"],values:["","0px","1em"]},{display:"display",type:"combo",target:["display"],values:["","none","block","inline","inline-block"]},{display:"opacity",type:"multi",target:["opacity"],values:["0",
"0.5","1.0"]},{display:"box-shadow",type:"text",target:["box-shadow"],value:["","none","1px 1px rgba(0,0,0,.5)"]},{display:"float",type:"combo",target:["float"],values:["","none","left","right"]},{display:"clear",type:"combo",target:["clear"],values:["","none","left","right","both"]},{display:"overflow",type:"combo",target:["overflow"],values:["","visible","hidden","scroll","auto"]},{display:"z-index",type:"multi",target:["z-index"],values:" auto 0 1 100 -1 -100".split(" ")},{display:"box-sizing",
type:"combo",target:["box-sizing","-webkit-box-sizing","-ms-box-sizing","-moz-box-sizing"],values:["","content-box","border-box"]}]},{key:"padding",className:"maqPropertySection",addCommonPropertiesAtTop:!0,pageTemplate:[{display:"\x3cb\x3e(padding)\x3c/b\x3e",type:"multi",target:["padding"],values:["","0px","1em"]},{key:"showtrbl",display:"\x26nbsp;\x26nbsp;\x26nbsp;",type:"toggleSection",pageTemplate:[{display:"padding-top",type:"multi",target:["padding-top"],values:["","0px","1em"],rowClass:"propertiesSectionHidden"},
{display:"padding-right",type:"multi",target:["padding-right"],values:["","0px","1em"],rowClass:"propertiesSectionHidden"},{display:"padding-bottom",type:"multi",target:["padding-bottom"],values:["","0px","1em"],rowClass:"propertiesSectionHidden"},{display:"padding-left",type:"multi",target:["padding-left"],values:["","0px","1em"],rowClass:"propertiesSectionHidden"}]}]},{key:"margins",className:"maqPropertySection",addCommonPropertiesAtTop:!0,pageTemplate:[{display:"\x3cb\x3e(margin)\x3c/b\x3e",type:"multi",
target:["margin"],values:["","0px","1em"]},{key:"showtrbl",display:"\x26nbsp;\x26nbsp;\x26nbsp;",type:"toggleSection",pageTemplate:[{display:"margin-top",type:"multi",target:["margin-top"],values:["","0px","1em"],rowClass:"propertiesSectionHidden"},{display:"margin-right",type:"multi",target:["margin-right"],values:["","0px","1em"],rowClass:"propertiesSectionHidden"},{display:"margin-bottom",type:"multi",target:["margin-bottom"],values:["","0px","1em"],rowClass:"propertiesSectionHidden"},{display:"margin-left",
type:"multi",target:["margin-left"],values:["","0px","1em"],rowClass:"propertiesSectionHidden"}]}]},{key:"background",className:"maqPropertySection",addCommonPropertiesAtTop:!0,pageTemplate:[{display:"background-color",type:"background",target:["background-color"],colorswatch:!0},{display:"background-image",type:"background",target:["background-image"],values:["","none"]},{display:"background-repeat",type:"background",values:["","repeat","repeat-x","repeat-y","no-repeat"],target:["background-repeat"]},
{display:"background-position",type:"background",target:["background-position"],values:";0px 0px;0% 0%;left top;center center;right bottom".split(";")},{display:"background-size",type:"background",target:["background-size"],values:["","auto","contain","cover","100%"]},{display:"background-origin",type:"background",target:["background-origin"],values:["","border-box","padding-box","content-box"]},{display:"background-clip",type:"background",target:["background-clip"],values:["","border-box","padding-box",
"content-box"]}]},{key:"border",className:"maqPropertySection",addCommonPropertiesAtTop:!0,pageTemplate:[{display:"\x3cb\x3e(border)\x3c/b\x3e",type:"multi",target:["border"],values:["","none","1px solid black"]},{display:"show",type:"combo",values:["none","props","sides","all"],id:"properties_show_select",onchange:function(a){if("number"==typeof a){var b=function(a,b,e,c,g){for(;b<=e;b++){var q=dojo.byId(a[b].rowId);b>=c&&b<=g?dojo.removeClass(q,"propertiesSectionHidden"):dojo.addClass(q,"propertiesSectionHidden")}};
if(this.pageTemplate){a=this.pageTemplate[a];var e;a&&a.id&&(e=dojo.byId(a.id).value);dojo.isString(e)&&("none"===e?b(this.pageTemplate,2,20,-1,-1):"sides"===e?b(this.pageTemplate,2,20,2,5):"props"===e?b(this.pageTemplate,2,20,6,8):"all"===e&&b(this.pageTemplate,2,20,9,20))}}}},{display:"border-top",type:"multi",target:["border-top"],values:["","none","1px solid black"],rowClass:"propertiesSectionHidden"},{display:"border-right",type:"multi",target:["border-right"],values:["","none","1px solid black"],
rowClass:"propertiesSectionHidden"},{display:"border-bottom",type:"multi",target:["border-bottom"],values:["","none","1px solid black"],rowClass:"propertiesSectionHidden"},{display:"border-left",type:"multi",target:["border-left"],values:["","none","1px solid black"],rowClass:"propertiesSectionHidden"},{display:"border-width",type:"multi",target:["border-width"],values:["","1px","1em"],rowClass:"propertiesSectionHidden"},{display:"border-style",type:"multi",target:["border-style"],values:["","none",
"solid","dotted","dashed"],rowClass:"propertiesSectionHidden"},{display:"border-color",type:"color",target:["border-color"],rowClass:"propertiesSectionHidden"},{display:"border-top-width",type:"multi",target:["border-top-width"],values:["","1px","1em"],rowClass:"propertiesSectionHidden"},{display:"border-top-style",type:"multi",target:["border-top-style"],values:["","none","solid","dotted","dashed"],rowClass:"propertiesSectionHidden"},{display:"border-top-color",type:"color",target:["border-top-color"],
rowClass:"propertiesSectionHidden"},{display:"border-right-width",type:"multi",target:["border-right-width"],values:["","1px","1em"],rowClass:"propertiesSectionHidden"},{display:"border-right-style",type:"multi",target:["border-right-style"],values:["","none","solid","dotted","dashed"],rowClass:"propertiesSectionHidden"},{display:"border-right-color",type:"color",target:["border-right-color"],rowClass:"propertiesSectionHidden"},{display:"border-bottom-width",type:"multi",target:["border-bottom-width"],
values:["","1px","1em"],rowClass:"propertiesSectionHidden"},{display:"border-bottom-style",type:"multi",target:["border-bottom-style"],values:["","none","solid","dotted","dashed"],rowClass:"propertiesSectionHidden"},{display:"border-bottom-color",type:"color",target:["border-bottom-color"],rowClass:"propertiesSectionHidden"},{display:"border-left-width",type:"multi",target:["border-left-width"],values:["","1px","1em"],rowClass:"propertiesSectionHidden"},{display:"border-left-style",type:"multi",target:["border-left-style"],
values:["","none","solid","dotted","dashed"],rowClass:"propertiesSectionHidden"},{display:"border-left-color",type:"color",target:["border-left-color"],rowClass:"propertiesSectionHidden"},{display:"border-collapse",type:"combo",target:["border-collapse"],values:["","separate","collapse"]},{display:"\x3cb\x3e(border-radius)\x3c/b\x3e",type:"multi",target:["border-radius","-moz-border-radius"],values:["","0px","6px"]},{key:"showDetails",display:"",type:"toggleSection",pageTemplate:[{display:"border-top-left-radius",
type:"multi",target:["border-top-left-radius","-moz-border-radius-topleft"],values:["","0px","6px"],rowClass:"propertiesSectionHidden"},{display:"border-top-right-radius",type:"multi",target:["border-top-right-radius","-moz-border-radius-topright"],values:["","0px","6px"],rowClass:"propertiesSectionHidden"},{display:"border-bottom-right-radius",type:"multi",target:["border-bottom-right-radius","-moz-border-radius-bottomright"],values:["","0px","6px"],rowClass:"propertiesSectionHidden"},{display:"border-bottom-left-radius",
type:"multi",target:["border-bottom-left-radius","-moz-border-radius-bottomleft"],values:["","0px","6px"],rowClass:"propertiesSectionHidden"}]}]},{key:"fontsAndText",className:"maqPropertySection",addCommonPropertiesAtTop:!0,pageTemplate:[{display:"font",type:"text",target:["font"]},{display:"font-family",type:"font",target:["font-family"]},{display:"size",type:"multi",target:["font-size"],values:["","100%","1em","10px","10pt"]},{display:"color",type:"color",target:["color"]},{display:"font-weight",
type:"combo",target:["font-weight"],values:["","normal","bold"]},{display:"font-style",type:"combo",target:["font-style"],values:["","normal","italic"]},{display:"text-decoration",type:"combo",target:["text-decoration"],values:["","none","underline","line-through"]},{display:"text-align",type:"combo",target:["text-align"],values:["","left","center","right","justify"]},{display:"vertical-align",type:"combo",target:["vertical-align"],values:["","baseline","top","middle","bottom"]},{display:"white-space",
type:"combo",target:["white-space"],values:" normal nowrap pre pre-line pre-wrap".split(" ")},{display:"text-indent",type:"multi",target:["text-indent"],values:["","0","1em","10px"]},{display:"line-height",type:"multi",target:["line-height"],values:["","normal","1.2","120%"]}]}]},buildRendering:function(){this.domNode=dojo.doc.createElement("div");dojo.addClass(this.domNode,"propertiesContent");var a;a=""+this._titleBarDiv;a+="\x3cdiv class\x3d'propertiesToolBar' dojoType\x3d'davinci.ve.widgets.WidgetToolBar'\x3e\x3c/div\x3e\x3cdiv dojoType\x3d'davinci.ve.widgets.WidgetProperties'\x3e\x3c/div\x3e\x3cdiv class\x3d'propScrollableArea'\x3e\x3ctable class\x3d'propRootDetailsContainer'\x3e\x3ctr\x3e\x3ctd class\x3d'propPaletteRoot'\x3e";
this.pageTemplate=this.getPageTemplate();for(var b=0;b<this.pageTemplate.length;b++)if(this.pageTemplate[b].title=k[this.pageTemplate[b].key]?k[this.pageTemplate[b].key]:"Key not found",this.pageTemplate[b].pageTemplate)for(var e=0;e<this.pageTemplate[b].pageTemplate.length;e++)this.pageTemplate[b].pageTemplate[e].key&&(this.pageTemplate[b].pageTemplate[e].display+=k[this.pageTemplate[b].pageTemplate[e].key]?k[this.pageTemplate[b].pageTemplate[e].key]:"Key not found");this.domNode.innerHTML=a;this.inherited(arguments)},
_widgetValuesChanged:function(a){var b=this._currentPropSection;if(b){for(var e=!1,c=0;c<this.pageTemplate.length;c++)if(this.pageTemplate[c].key==b){e=!0;break}if(e)for(b=this._getVisibleCascade(c),e=0;e<b.length;e++)b[e]._widgetValuesChanged(a)}},_getVisibleCascade:function(a){if(a)return this.pageTemplate[a].cascade;a=[];var b=this._currentPropSection;if(b)for(var e=0;e<this.pageTemplate.length;e++)if(this.pageTemplate[e].key==b){a=a.concat(this.pageTemplate[e].cascade);break}return a},_updatePaletteValues:function(a){if(this._editor){m.isArray(a)||
(a=[a]);var b=a[0];this._subwidget=(this._widget=b)&&b.subwidget;this.setReadOnly(!(this._widget||this._subwidget));for(var b=this._getVisibleCascade(),e=0;e<b.length;e++)b[e]._widgetSelectionChanged(a)}else console.error("have no editor",a)},_widgetSelectionChanged:function(a){this._updatePaletteValues(a)},_stateChanged:function(){this._updatePaletteValues(this._widget?[this._widget]:[])},_widgetPropertiesChanged:function(a){this._widget||console.error("have no widget");this._widget&&this._widget.type!==
a[0].type||this._updatePaletteValues(a)},_titlePaneOpen:function(a){a=this._getVisibleCascade(a);for(var b=0;b<a.length;b++)a[b]._editorSelected({editor:this._editor})},startup:function(){this.domNode.style.height="100%";this.inherited(arguments);for(var a=0;a<this.pageTemplate.length;a++){var b=this.pageTemplate[a];if(b.pageTemplate)for(var e=0;e<b.pageTemplate.length;e++){var c=b.pageTemplate[e];c.onchange&&c.id&&dojo.connect(dojo.byId(c.id),"onchange",dojo.hitch(b,c.onchange,e))}}for(a=0;a<this.pageTemplate.length;a++)this.pageTemplate[a].cascade=
[];this.setReadOnly(!0);this.onEditorSelected();this.subscribe("/davinci/ui/widgetValuesChanged",dojo.hitch(this,this._widgetValuesChanged));this.subscribe("/davinci/ui/widgetPropertiesChanged",dojo.hitch(this,this._widgetPropertiesChanged));this.subscribe("/davinci/ui/widgetSelected",dojo.hitch(this,this._widgetSelectionChanged))},setReadOnly:function(a){for(var b=0;b<this.pageTemplate.length;b++){var e=this.pageTemplate[b].pageTemplate;if(e)for(var c=0;c<e.length;c++){var g=e[c].widget;g?g.set("readOnly",
a):(g=e[c].domNode)&&dojo.attr(g,"disabled",a)}}},_modelEntryById:function(a){for(var b=0;b<this.pageTemplate.length;b++){var e=this.pageTemplate[b].pageTemplate;if(e)for(var c=0;c<e.length;c++)if(a==e[c].id)return e[c]}},_editorSelected:function(a){this._editor=a.editor;this.onEditorSelected(this._editor);a=this.getParent();var b=a.selectedChildWidget,e=!1,c=dojo.query(".maqPropertySection",a.domNode);this._editor?"davinci.ve.PageEditor"!=this._editor.declaredClass&&"davinci.ve.themeEditor.ThemeEditor"!=
this._editor.declaredClass?c.forEach(function(a){a=dijit.byNode(a);a.controlButton&&(a.controlButton.domNode.style.display="none");a==b&&(e=!0)}):(c.forEach(function(a){a=dijit.byNode(a);a.controlButton&&(a.controlButton.domNode.style.display="")}),"davinci.ve.themeEditor.ThemeEditor"==this._editor.declaredClass&&dojo.query(".page_editor_only",a.domNode).forEach(function(a){a=dijit.byNode(a);a.controlButton&&(a.controlButton.domNode.style.display="none");a==b&&(e=!0)})):(c.forEach(function(a){dijit.byNode(a).controlButton.domNode.style.display=
""}),e=!0);e&&this._selectFirstVisibleTab()},onEditorSelected:function(){this._subWidget=this._widget=null;this._oldClassName&&(this.domNode?dojo.removeClass(this.domNode.parentNode.parentNode,this._oldClassName):console.error("have no dom node !"));if(this._editor)if(this._editor&&this._editor.editorID&&(this._oldClassName=this._editor.editorID.replace(/\./g,"_"),this.domNode?dojo.addClass(this.domNode.parentNode.parentNode,this._oldClassName):console.error("have no dom node !")),this.domNode){for(var a=
this._currentPropSection,b=dojo.query(".propSectionButton",this.domNode),e=0;e<b.length;e++){var c=b[e];this._editor&&this._editor.supports&&this._editor.supports("propsect_"+this.pageTemplate[e].key)?dojo.removeClass(c,"dijitHidden"):(dojo.addClass(c,"dijitHidden"),a==this.pageTemplate[e].key&&p.showRoot())}a=[];for(e=0;e<this.pageTemplate.length;e++)(b=this.pageTemplate[e].cascade)&&(a=a.concat(b));for(e=0;e<a.length;e++)b=a[e],b._editorSelected&&b._editorSelected({editor:this._editor})}else console.error("have no dom node !")},
destroy:function(){this.inherited(arguments)},_destroyContent:function(){var a=this.containerNode||this.domNode;for(dojo.forEach(dojo.query("[widgetId]",a).map(dijit.byNode),function(a){a.destroy()});a.firstChild;)dojo._destroyElement(a.firstChild);dojo.forEach(this._tooltips,function(a){a.destroy()});this._tooltips=void 0},sectionTitleFromKey:function(a){for(var b=0;b<this.pageTemplate.length;b++)if(this.pageTemplate[b].key==a)return this.pageTemplate[b].title},_initialPerspectiveReady:function(){if(!this._alreadySplitIntoMultipleTabs){var a=
this.tabContainer;dojo.addClass(a.domNode,"propRootDetailsContainer");dojo.addClass(a.domNode,"propertiesContent");for(var e=0;e<this.pageTemplate.length;e++){var c=this.pageTemplate[e].key,g=this.pageTemplate[e].title,q=this.pageTemplate[e].className;q||(q="");var r=this._titleBarDiv,r=r+"\x3cdiv class\x3d'propertiesToolBar' dojoType\x3d'davinci.ve.widgets.WidgetToolBar'\x3e\x3c/div\x3e",r=r+("\x3cdiv class\x3d'cascadeBackButtonDiv'\x3e\x3cbutton onclick\x3d'davinci.ve.widgets.HTMLStringUtil.showSection(\""+
c+'","'+g+"\")'\x3e"+g+" "+k.properties+"\x3c/button\x3e\x3c/div\x3e"),c=p.generateTemplate(this.pageTemplate[e]),r=r+c;0==e?(r=this,r.set("title",g),dojo.addClass(r.domNode,q)):r=a.createTab(g,null,null,null,{content:r,"class":q,delegate:this}).add(b,{title:g,content:r,"class":q,delegate:this},null,!0);r._maqPropGroup=this.pageTemplate[e].key;g=dojo.query(".paletteCloseBox",r.domNode);0<g.length&&dojo.connect(g[0],"click",this,function(a){davinci.Workbench.collapsePaletteContainer(a.currentTarget)})}for(g=
0;g<this.pageTemplate.length;g++)if(this.pageTemplate[g].cascade=[],q=this.pageTemplate[g].pageTemplate){for(e=0;e<q.length;e++)r=q[e].id,(c=dijit.byId(r))?q[e].widget=c:(c=dojo.byId(r))&&(q[e].domNode=c);dojo.query("#"+this.pageTemplate[g].id+" .CascadeTop").forEach(function(a){return function(b){b=dijit.byId(b.id);a.cascade.push(b)}}(this.pageTemplate[g]))}dojo.connect(a,"selectChild",this,function(a){"none"!=a.controlButton.domNode.style.display||this._recursiveSelectChildInProcess?a._maqPropGroup&&
(this._currentPropSection=a._maqPropGroup,a=(a=this._editor&&this._editor.getContext?this._editor.getContext():null)&&a.getSelection?a.getSelection():this._widgets,this._updatePaletteValues(a),p._initSection(this._currentPropSection)):(this._recursiveSelectChildInProcess=!0,this._selectFirstVisibleTab(),delete this._recursiveSelectChildInProcess)});this._alreadySplitIntoMultipleTabs=!0}},_workbenchReady:function(){this._updateToolBars()},_updateToolBars:function(){dojo.query(".propertiesToolBar").forEach(function(a){this._editor&&
"davinci.ve.PageEditor"==this._editor.declaredClass?(dojo.removeClass(a,"dijitHidden"),a.style.display=""):dojo.addClass(a,"dijitHidden")}.bind(this))},_selectFirstVisibleTab:function(){for(var a=this.getParent(),b=a.getChildren(),e=0;e<b.length;e++){var c=b[e];if("none"!=c.controlButton.domNode.style.display){a._maqDontExpandCollapse=!0;a.selectChild(c);delete a._maqDontExpandCollapse;break}}}})})},"dijit/_base/popup":function(){define(["dojo/dom-class","dojo/_base/window","../popup"],function(n,
m,k){var h=k._createWrapper;k._createWrapper=function(b){b.declaredClass||(b={_popupWrapper:b.parentNode&&n.contains(b.parentNode,"dijitPopup")?b.parentNode:null,domNode:b,destroy:function(){},ownerDocument:b.ownerDocument,ownerDocumentBody:m.body(b.ownerDocument)});return h.call(this,b)};var d=k.open;k.open=function(b){if(b.orient&&"string"!=typeof b.orient&&!("length"in b.orient)){var c=[],g;for(g in b.orient)c.push({aroundCorner:g,corner:b.orient[g]});b.orient=c}return d.call(this,b)};return k})},
"wcDocker/splitter":function(){define(["dcl/dcl","wcDocker/types","wcDocker/base"],function(n,m,k){return n(k,{declaredClass:"wcSplitter",constructor:function(h,d,b){this.$container=$(h);this._parent=d;this._orientation=b;this._pane=[!1,!1];this.$pane=[];this.$bar=null;this._posTarget=this._pos=.5;this._pixelPos=-1;this._findBestPos=!1;this._anim=0;this._boundEvents=[];this.__init();this.docker()._splitterList.push(this)},initLayouts:function(h,d){var b=h||"wcLayoutTable";h=new (this.docker().__getClass(b))(this.$pane[0],
this);b=d||"wcLayoutTable";d=new (this.docker().__getClass(b))(this.$pane[1],this);this.pane(0,h);this.pane(1,d)},orientation:function(h){if("undefined"===typeof h)return this._orientation;this._orientation!=h&&((this._orientation=h)?this.$bar.removeClass("wcWide").removeClass("wcSplitterBarH").addClass("wcTall").addClass("wcSplitterBarV"):this.$bar.removeClass("wcTall").removeClass("wcSplitterBarV").addClass("wcWide").addClass("wcSplitterBarH"),this.$pane[0].css("top","").css("left","").css("width",
"").css("height",""),this.$pane[1].css("top","").css("left","").css("width","").css("height",""),this.$bar.css("top","").css("left","").css("width","").css("height",""),this.__update(),this._parent&&this._parent.instanceOf("wcPanel")&&this._parent.__trigger(m.EVENT.UPDATED))},minSize:function(){var h,d;this._pane[0]&&"function"===typeof this._pane[0].minSize&&(h=this._pane[0].minSize());this._pane[1]&&"function"===typeof this._pane[1].minSize&&(d=this._pane[1].minSize());return h&&d?(this._orientation?
(h.x+=d.x,h.y=Math.max(h.y,d.y)):(h.y+=d.y,h.x=Math.max(h.x,d.x)),h):h?h:d?d:!1},maxSize:function(){var h,d;this._pane[0]&&"function"===typeof this._pane[0].maxSize&&(h=this._pane[0].maxSize());this._pane[1]&&"function"===typeof this._pane[1].maxSize&&(d=this._pane[1].maxSize());return h&&d?(this._orientation?(h.x+=d.x,h.y=Math.min(h.y,d.y)):(h.y+=d.y,h.x=Math.min(h.x,d.x)),h):h?h:d?d:!1},pos:function(h){if("undefined"!==typeof h){if(.1>Math.abs(h)&&0!==h)return;this._pos=this._posTarget=h;this.__update();
this._parent&&this._parent.instanceOf("wcPanel")&&this._parent.__trigger(m.EVENT.UPDATED)}return this._posTarget},animPos:function(h,d){this._posTarget=h;var b=this;this.$bar.queue(function(c){b._anim&&clearInterval(b._anim);b._anim=setInterval(function(){b._pos>b._posTarget&&(b._pos-=(b._pos-b._posTarget)/5,b._pos<=b._posTarget+.01&&(b._pos=b._posTarget));b._pos<b._posTarget&&(b._pos+=(b._posTarget-b._pos)/5,b._pos>=b._posTarget-.01&&(b._pos=b._posTarget));b.__update();b._pos==b._posTarget&&(d&&
d(),c(),clearInterval(b._anim),b._anim=0)},5)});this.$bar.dequeue()},pane:function(h,d){if(0<=h&&2>h){if("undefined"===typeof d)return this._pane[h];if(d)return this._pane[h]=d,d._parent=this,d.__container(this.$pane[h]),this._pane[0]&&this._pane[1]&&this.__update(),d;this._pane[h]&&(this._pane[h].__container(null),this._pane[h]=!1)}return!1},left:function(h){return this.pane(0,h)},right:function(h){return this.pane(1,h)},top:function(h){return this.pane(0,h)},bottom:function(h){return this.pane(1,
h)},scrollable:function(h,d,b){"undefined"!==typeof d&&this.$pane[h].toggleClass("wcScrollableX",d);"undefined"!==typeof b&&this.$pane[h].toggleClass("wcScrollableY",b);return{x:this.$pane[h].hasClass("wcScrollableX"),y:this.$pane[h].hasClass("wcScrollableY")}},destroy:function(h){if(this.docker()){var d=this.docker()._splitterList.indexOf(this);-1<d&&this.docker()._splitterList.splice(d,1)}void 0===h||h?this.__destroy():this.__container(null)},__init:function(){this.$pane.push($('\x3cdiv class\x3d"wcLayoutPane wcScrollableX wcScrollableY"\x3e'));
this.$pane.push($('\x3cdiv class\x3d"wcLayoutPane wcScrollableX wcScrollableY"\x3e'));this.$bar=$('\x3cdiv class\x3d"wcSplitterBar"\x3e');this._orientation?this.$bar.addClass("wcTall").addClass("wcSplitterBarV"):this.$bar.addClass("wcWide").addClass("wcSplitterBarH");this.__container(this.$container);if(this._parent&&this._parent.instanceOf("wcPanel")){this._boundEvents.push({event:m.EVENT.UPDATED,handler:this.__update.bind(this)});this._boundEvents.push({event:m.EVENT.CLOSED,handler:this.destroy.bind(this)});
for(var h=0;h<this._boundEvents.length;++h)this._parent.on(this._boundEvents[h].event,this._boundEvents[h].handler)}},__update:function(h){var d=this.$container.outerWidth(),b=this.$container.outerHeight(),c=this.__minPos(),g=this.__maxPos();if(this._findBestPos){this._findBestPos=!1;var p,a;this._pane[0]&&"function"===typeof this._pane[0].initSize&&(p=this._pane[0].initSize())&&(0>p.x&&(p.x=d/2),0>p.y&&(p.y=b/2));this._pane[1]&&"function"===typeof this._pane[1].initSize&&(a=this._pane[1].initSize())&&
(0>a.x&&(a.x=d/2),0>a.y&&(a.y=b/2),a.x=d-a.x,a.y=b-a.y);var e;p&&a?e={x:Math.min(p.x,a.x),y:Math.min(p.y,a.y)}:p?e=p:a&&(e=a);e&&(this._pos=this._orientation?e.x/d:e.y/b)}this.$bar.toggleClass("wcSplitterBarStatic",this.__isStatic());if(this._orientation===m.ORIENTATION.HORIZONTAL){p=this.$bar.outerWidth()/2;a=parseInt(this.$bar.css("border-top-width"))+parseInt(this.$bar.css("border-bottom-width"));h&&(e=this._pixelPos-(this.$container.offset().left+parseInt(this.$container.css("border-left-width")))-
this.$bar.outerWidth()/2,this._pos=e/(d-this.$bar.outerWidth()));this._pos=Math.min(Math.max(this._pos,0),1);e=(d-this.$bar.outerWidth())*this._pos+p;c&&(e=Math.max(c.x,e));g&&(e=Math.min(g.x,e));var q=0,u=0;this._parent&&"wcCollapser"===this._parent.declaredClass&&(c=this.docker().$container,g=this._parent.$container,q=g.offset().top-c.offset().top,u=c.offset().top+c.outerHeight()-(g.offset().top+g.outerHeight()));this.$bar.css("left",e-p);this.$bar.css("top",q);this.$bar.css("height",b-a-u);this.$pane[0].css("width",
e-p);this.$pane[0].css("left","0px");this.$pane[0].css("right","");this.$pane[0].css("top",q);this.$pane[0].css("bottom",u);this.$pane[1].css("left","");this.$pane[1].css("right","0px");this.$pane[1].css("width",d-e-p-2*parseInt(this.$container.css("border-left-width")));this.$pane[1].css("top",q);this.$pane[1].css("bottom",u);this._pixelPos=this.$bar.offset().left+p}else p=this.$bar.outerHeight()/2,a=parseInt(this.$bar.css("border-left-width"))+parseInt(this.$bar.css("border-right-width")),h&&(e=
this._pixelPos-(this.$container.offset().top+parseInt(this.$container.css("border-top-width")))-this.$bar.outerHeight()/2,this._pos=e/(b-this.$bar.outerHeight())),this._pos=Math.min(Math.max(this._pos,0),1),e=(b-this.$bar.outerHeight())*this._pos+p,c&&(e=Math.max(c.y,e)),g&&(e=Math.min(g.y,e)),c=q=0,this._parent&&"wcCollapser"===this._parent.declaredClass&&(c=this.docker().$container,g=this._parent.$container,q=g.offset().left-c.offset().left,c=c.offset().left+c.outerWidth()-(g.offset().left+g.outerWidth())),
this.$bar.css("top",e-p),this.$bar.css("left",q),this.$bar.css("width",d-a-u),this.$pane[0].css("height",e-p),this.$pane[0].css("top","0px"),this.$pane[0].css("bottom",""),this.$pane[0].css("left",q),this.$pane[0].css("right",c),this.$pane[1].css("top",""),this.$pane[1].css("bottom","0px"),this.$pane[1].css("height",b-e-p-2*parseInt(this.$container.css("border-top-width"))),this.$pane[1].css("left",q),this.$pane[1].css("right",c),this._pixelPos=this.$bar.offset().top+p;void 0===h&&(h=!0);this._pane[0]&&
this._pane[0].__update(h);this._pane[1]&&this._pane[1].__update(h)},__save:function(){if(this._pane[0]&&"wcCollapser"===this._pane[0].declaredClass)return this._pane[1].__save();if(this._pane[1]&&"wcCollapser"===this._pane[1].declaredClass)return this._pane[0].__save();var h={type:"wcSplitter"};h.horizontal=this._orientation;h.isDrawer=this.$bar.hasClass("wcDrawerSplitterBar");h.pane0=this._pane[0]?this._pane[0].__save():null;h.pane1=this._pane[1]?this._pane[1].__save():null;h.pos=this._pos;return h},
__restore:function(h,d){this._pos=h.pos;h.isDrawer&&this.$bar.addClass("wcDrawerSplitterBar");h.pane0&&(this._pane[0]=d.__create(h.pane0,this,this.$pane[0]),this._pane[0].__restore(h.pane0,d));h.pane1&&(this._pane[1]=d.__create(h.pane1,this,this.$pane[1]),this._pane[1].__restore(h.pane1,d))},__findBestPos:function(){this._findBestPos=!1},__moveBar:function(h){var d=this.$container.offset();h.x-=d.left;h.y-=d.top;this._orientation===m.ORIENTATION.HORIZONTAL?(d=this.$container.outerWidth()-this.$bar.outerWidth(),
h.x+=1-parseInt(this.$container.css("border-left-width"))-this.$bar.outerWidth()/2,this.pos(h.x/d)):(d=this.$container.outerHeight()-this.$bar.outerHeight(),h.y+=1-parseInt(this.$container.css("border-top-width"))-this.$bar.outerHeight()/2,this.pos(h.y/d))},__minPos:function(){var h=this.$container.outerWidth(),d=this.$container.outerHeight(),b;b=this._pane[0]&&"function"===typeof this._pane[0].minSize?this._pane[0].minSize():{x:50,y:50};var c;c=this._pane[1]&&"function"===typeof this._pane[1].maxSize?
this._pane[1].maxSize():{x:h,y:d};if(this._orientation===m.ORIENTATION.HORIZONTAL){var g=this.$bar.outerWidth()/2;b.x+=g;h-=g}else g=this.$bar.outerHeight()/2,b.y+=g,d-=g;c.x=h-Math.min(c.x,h);c.y=d-Math.min(c.y,d);b.x=Math.max(b.x,c.x);b.y=Math.max(b.y,c.y);return b},__maxPos:function(){var h=this.$container.outerWidth(),d=this.$container.outerHeight(),b;b=this._pane[0]&&"function"===typeof this._pane[0].maxSize?this._pane[0].maxSize():{x:h,y:d};var c;c=this._pane[1]&&"function"===typeof this._pane[1].minSize?
this._pane[1].minSize():{x:50,y:50};if(this._orientation===m.ORIENTATION.HORIZONTAL){var g=this.$bar.outerWidth()/2;b.x+=g;h-=g}else g=this.$bar.outerHeight()/2,b.y+=g,d-=g;c.x=h-c.x;c.y=d-c.y;b.x=Math.min(c.x,b.x);b.y=Math.min(c.y,b.y);return b},__isStatic:function(){for(var h=this._orientation===m.ORIENTATION.HORIZONTAL?"x":"y",d=0;2>d;++d)if(this._pane[d]&&this._pane[d].minSize&&this._pane[d].maxSize&&0===this._pane[d].maxSize()[h]-this._pane[d].minSize()[h])return!0;return!1},__container:function(h){if("undefined"===
typeof h)return this.$container;(this.$container=h)?(this.$container.append(this.$pane[0]),this.$container.append(this.$pane[1]),this.$container.append(this.$bar)):(this.$pane[0].remove(),this.$pane[1].remove(),this.$bar.remove());return this.$container},__removeChild:function(h){if(this._pane[0]===h)this._pane[0]=!1;else if(this._pane[1]===h)this._pane[1]=!1;else return;h&&(h.__container(null),h._parent=null)},__destroy:function(){this._anim&&(clearInterval(this._anim),this._anim=0);for(this.$bar.clearQueue();this._boundEvents.length;)this._parent.off(this._boundEvents[0].event,
this._boundEvents[0].handler),this._boundEvents.shift();this._pane[0]&&(this._pane[0].__destroy(),this._pane[0]=null);this._pane[1]&&(this._pane[1].__destroy(),this._pane[1]=null);this.__container(null);this._parent=!1}})})},"x-markdown/component":function(){define(["dcl/dcl","xide/model/Component"],function(n,m){return n(m,{beanType:"BTFILE",getDependencies:function(){return"xfile/types xfile/manager/FileManager xfile/manager/MountManager xfile/factory/Store xfile/views/FileGrid x-markdown/views/MarkdownGrid".split(" ")},
getLabel:function(){return"x-markdown"},getBeanType:function(){return this.beanType}})})},"xfile/views/UploadMixin":function(){define(["xdojo/declare","xide/utils","xide/types","dojo/promise/all"],function(n,m,k,h){return n("xfiles.views.UploadMixin",null,{cssClass:"uploadFilesList droparea dropareaHover",__currentDragOverRow:null,__currentDragOverTimer:null,__currentDragOverTimeRow:null,buildRendering:function(){this.inherited(arguments);$(this.domNode).addClass(this.cssClass)},_createUploadItemTemplate:function(d,
b,c){return'\x3cdiv class\x3d"" style\x3d"position: relative;margin: 0.1em;height: auto"\x3e\x3cdiv style\x3d"margin:0;vertical-align: middle;padding: 1px;" class\x3d"progress" role\x3d"progressbar" aria-valuemin\x3d"0" aria-valuemax\x3d"100"\x3e\x3cdiv class\x3d"progress-bar progress-bar-info" style\x3d"width:'+b+';background-color: rgba(102, 161, 179, 0.35);height:auto;magin:0;"\x3e\x3cspan class\x3d"'+(c.failed?"text-danger":"text-info")+'" style\x3d"left: 0px"\x3e'+d+"\x3c/span\x3e\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e"},
_createUploadItems:function(d){function b(a){var b={sizeBytes:m.humanFileSize(a.size),size:m.humanFileSize(a.size),name:a.name,type:a.type,path:p.path+"/"+a.name+"__uploading__"+Math.random(2),isDir:!1,mount:p.mount,parent:p.path,progress:0,isUpload:!0,modified:a.lastModified/1E3,renderColumn:function(a,b,e){if("name"===a)return c._createUploadItemTemplate(e.name,e.progress+"%",e);if("sizeBytes"===a&&100>e.progress)return m.humanFileSize(e.loaded)+" of "+m.humanFileSize(e.total)}};g.putSync(b);b=
g.getSync(b.path);return a._item=b}var c=this,g=this.collection,p=this.getCurrentFolder();this.__currentDragOverRow&&(p=this.__currentDragOverRow.data);var a=[];_.each(d,function(e){a.push(b(e))});return a},_onAllUploaded:function(d){d=this._toUploadItems(d);var b=this;_.each(d,function(b){var c=b._store?b:b._item;c&&(c.progress=c.failed?0:100,c.refresh(),setTimeout(function(){c.remove()},1))});setTimeout(function(){b.runAction(k.ACTION.RELOAD).then(function(){})},1)},_onBrowserFilesDropped:function(d,
b,c){var g=this.ctx.getFileManager(),p=d.getCurrentFolder();this.__currentDragOverRow&&(p=this.__currentDragOverRow.data);this._createUploadItems(b);return g.upload(b,p.mount,p?p.path:"./tmp",d,c)},_onUploadFailed:function(d){d&&(d.failed=!0,d.done=!0)},_onSomeFileUploaded:function(d){var b=this;d&&(d.progress=100,d.done=!0,d.renderColumn=null,d.renderRow=null,d.refresh(),setTimeout(function(){b.runAction(k.ACTION.RELOAD).then(function(){});d.remove()},1));return!0},_toUploadItems:function(d){var b=
[];_.each(d,function(c){_.each(c,function(c){b.push(c)})});return b},_toUploadStoreItem:function(d){return d.file._item},onBrowserFilesDropped:function(d,b){function c(){var a=0;_.each(p,function(b){b.done&&a++});a==p.length&&g._onAllUploaded(b)}d=this._onBrowserFilesDropped(this,b,d);var g=this,p=g._toUploadItems(b),a=1==p.length;h(d).then(this._onAllUploaded.bind(this,[b]));_.each(d,function(e){e.then(function(b){!a&&g._onSomeFileUploaded(g._toUploadStoreItem(b))&&c()},function(e){g._onUploadFailed(g._toUploadStoreItem(e));
a&&g._onAllUploaded(b);!a&&c()},function(a){var b=a.progress;a=a.item.file._item;var e=Math.round(100*b.loaded/b.total);a&&(a.progress=e,a.loaded=b.loaded,a.total=b.total,a.refresh())})})},onBrowserUrlDropped:function(d,b){if(this.delegate&&this.delegate.onBrowserUrlDropped)this.delegate.onBrowserUrlDropped(this,b)},dragEnter:function(d){d.preventDefault()},dragLeave:function(d){},dragOver:function(d){d.preventDefault();if(this.row){var b=this;d=this.row(d);var c=this.__currentDragOverRow,g=c?c.data:
null;this.__currentDragOverRow&&$(this.__currentDragOverRow.element).removeClass("dgrid-focus");d&&d.element&&d.data&&!0===d.data.directory?(this.__currentDragOverTimer||(b.__currentDragOverTimeRow=d,b.__currentDragOverTimer=setTimeout(function(){var c=b.__currentDragOverTimeRow.data;c&&g&&c==g?(b.__currentDragOverTimeRow=null,b.__currentDragOverTimer=null,b.openFolder(c)):b.__currentDragOverTimer=null},1550)),this.__currentDragOverRow=d,$(d.element).addClass("dgrid-focus")):this.__currentDragOverRow=
null}},drop:function(d){d.preventDefault();var b=d.dataTransfer;if(b)if((b=b.files)&&b.length){if(this.onBrowserFilesDropped)this.onBrowserFilesDropped(this,b)}else try{var c=d.dataTransfer.getData("text/plain");if(c&&c.length)this.delegate.onBrowserUrlDropped(this,c)}catch(g){console.error("dropping url failed "+g)}},initDND:function(){var d=this,b=this.domNode;b?(b.addEventListener("dragover",function(b){d.dragOver(b)},!1),b.addEventListener("drop",function(b){b.preventDefault();d.drop(b)},!1)):
console.error("have not drop destination")},startup:function(){if(!this._started){var d=this.inherited(arguments);this.initDND();return d}}})})},"dojo/topic":function(){define(["./Evented"],function(n){var m=new n;return{publish:function(k,h){return m.emit.apply(m,arguments)},subscribe:function(k,h){return m.on.apply(m,arguments)}}})},"davinci/html/HTMLText":function(){define(["dojo/_base/declare","davinci/html/HTMLItem"],function(n,m){return n("davinci.html.HTMLText",m,{constructor:function(k){this.elementType=
"HTMLText";this.value=k||""},getText:function(k){return this.value},setText:function(k){if(this.wasParsed||this.parent&&this.parent.wasParsed){var h=k.length-this.value.length;0<h&&this.getHTMLFile().updatePositions(this.startOffset+1,h)}this.value=k},getLabel:function(){return 15>this.value.length?this.value:this.value.substring(0,15)+"..."}})})},"dijit/_KeyNavMixin":function(){define("dojo/_base/array dojo/_base/declare dojo/dom-attr dojo/keys dojo/_base/lang dojo/on dijit/registry dijit/_FocusMixin".split(" "),
function(n,m,k,h,d,b,c,g){return m("dijit._KeyNavMixin",g,{tabIndex:"0",childSelector:null,postCreate:function(){this.inherited(arguments);k.set(this.domNode,"tabIndex",this.tabIndex);if(!this._keyNavCodes){var g=this._keyNavCodes={};g[h.HOME]=d.hitch(this,"focusFirstChild");g[h.END]=d.hitch(this,"focusLastChild");g[this.isLeftToRight()?h.LEFT_ARROW:h.RIGHT_ARROW]=d.hitch(this,"_onLeftArrow");g[this.isLeftToRight()?h.RIGHT_ARROW:h.LEFT_ARROW]=d.hitch(this,"_onRightArrow");g[h.UP_ARROW]=d.hitch(this,
"_onUpArrow");g[h.DOWN_ARROW]=d.hitch(this,"_onDownArrow")}var a=this,g="string"==typeof this.childSelector?this.childSelector:d.hitch(this,"childSelector");this.own(b(this.domNode,"keypress",d.hitch(this,"_onContainerKeypress")),b(this.domNode,"keydown",d.hitch(this,"_onContainerKeydown")),b(this.domNode,"focus",d.hitch(this,"_onContainerFocus")),b(this.containerNode,b.selector(g,"focusin"),function(b){a._onChildFocus(c.getEnclosingWidget(this),b)}))},_onLeftArrow:function(){},_onRightArrow:function(){},
_onUpArrow:function(){},_onDownArrow:function(){},focus:function(){this.focusFirstChild()},_getFirstFocusableChild:function(){return this._getNextFocusableChild(null,1)},_getLastFocusableChild:function(){return this._getNextFocusableChild(null,-1)},focusFirstChild:function(){this.focusChild(this._getFirstFocusableChild())},focusLastChild:function(){this.focusChild(this._getLastFocusableChild())},focusChild:function(b,a){b&&(this.focusedChild&&b!==this.focusedChild&&this._onChildBlur(this.focusedChild),
b.set("tabIndex",this.tabIndex),b.focus(a?"end":"start"))},_onContainerFocus:function(b){b.target!==this.domNode||this.focusedChild||this.focus()},_onFocus:function(){k.set(this.domNode,"tabIndex","-1");this.inherited(arguments)},_onBlur:function(b){k.set(this.domNode,"tabIndex",this.tabIndex);this.focusedChild&&(this.focusedChild.set("tabIndex","-1"),this.lastFocusedChild=this.focusedChild,this._set("focusedChild",null));this.inherited(arguments)},_onChildFocus:function(b){b&&b!=this.focusedChild&&
(this.focusedChild&&!this.focusedChild._destroyed&&this.focusedChild.set("tabIndex","-1"),b.set("tabIndex",this.tabIndex),this.lastFocused=b,this._set("focusedChild",b))},_searchString:"",multiCharSearchDuration:1E3,onKeyboardSearch:function(b,a,e,c){b&&this.focusChild(b)},_keyboardSearchCompare:function(b,a){var e=b.domNode;b=(b.label||(e.focusNode?e.focusNode.label:"")||e.innerText||e.textContent||"").replace(/^\s+/,"").substr(0,a.length).toLowerCase();return a.length&&b==a?-1:0},_onContainerKeydown:function(b){var a=
this._keyNavCodes[b.keyCode];a?(a(b,this.focusedChild),b.stopPropagation(),b.preventDefault(),this._searchString=""):b.keyCode!=h.SPACE||!this._searchTimer||b.ctrlKey||b.altKey||b.metaKey||(b.stopImmediatePropagation(),b.preventDefault(),this._keyboardSearch(b," "))},_onContainerKeypress:function(b){b.charCode<=h.SPACE||b.ctrlKey||b.altKey||b.metaKey||(b.preventDefault(),b.stopPropagation(),this._keyboardSearch(b,String.fromCharCode(b.charCode).toLowerCase()))},_keyboardSearch:function(b,a){var e=
null,c,g=0;d.hitch(this,function(){this._searchTimer&&this._searchTimer.remove();this._searchString+=a;var b=/^(.)\1*$/.test(this._searchString)?1:this._searchString.length;c=this._searchString.substr(0,b);this._searchTimer=this.defer(function(){this._searchTimer=null;this._searchString=""},this.multiCharSearchDuration);var q=this.focusedChild||null;if(1==b||!q)if(q=this._getNextFocusableChild(q,1),!q)return;b=q;do{var d=this._keyboardSearchCompare(q,c);d&&0==g++&&(e=q);if(-1==d){g=-1;break}q=this._getNextFocusableChild(q,
1)}while(q!=b)})();this.onKeyboardSearch(e,b,c,g)},_onChildBlur:function(){},_getNextFocusableChild:function(b,a){var e=b;do{if(b)b=this._getNext(b,a);else if(b=this[0<a?"_getFirst":"_getLast"](),!b)break;if(null!=b&&b!=e&&b.isFocusable())return b}while(b!=e);return null},_getFirst:function(){return null},_getLast:function(){return null},_getNext:function(b,a){if(b)for(b=b.domNode;b;)if((b=b[0>a?"previousSibling":"nextSibling"])&&"getAttribute"in b){var e=c.byNode(b);if(e)return e}return null}})})},
"dojo/uacss":function(){define(["./dom-geometry","./_base/lang","./domReady","./sniff","./_base/window"],function(n,m,k,h,d){var b=d.doc.documentElement;d=h("ie");var c=h("opera"),g=Math.floor,p=h("ff"),a=n.boxModel.replace(/-/,""),c={dj_quirks:h("quirks"),dj_opera:c,dj_khtml:h("khtml"),dj_webkit:h("webkit"),dj_safari:h("safari"),dj_chrome:h("chrome"),dj_gecko:h("mozilla"),dj_ios:h("ios"),dj_android:h("android")};d&&(c.dj_ie=!0,c["dj_ie"+g(d)]=!0,c.dj_iequirks=h("quirks"));p&&(c["dj_ff"+g(p)]=!0);
c["dj_"+a]=!0;var e="",q;for(q in c)c[q]&&(e+=q+" ");b.className=m.trim(b.className+" "+e);k(function(){if(!n.isBodyLtr()){var a="dj_rtl dijitRtl "+e.replace(/ /g,"-rtl ");b.className=m.trim(b.className+" "+a+"dj_rtl dijitRtl "+e.replace(/ /g,"-rtl "))}});return h})},"wcDocker/collapser":function(){define(["dcl/dcl","wcDocker/types","wcDocker/splitter","wcDocker/drawer","wcDocker/base"],function(n,m,k,h,d){return n(d,{declaredClass:"wcCollapser",constructor:function(b,c,g){this.$container=$(b);this.$frame=
null;this._position=g;this._parent=c;this._drawer=this._splitter=null;this._size=0;this._orientation=this._position===m.DOCK.LEFT||this._position===m.DOCK.RIGHT?m.ORIENTATION.HORIZONTAL:m.ORIENTATION.VERTICAL;this.__init()},collapse:function(b){this._drawer.collapse()},expand:function(){this._drawer.expand()},isExpanded:function(){return this._drawer.isExpanded()},minSize:function(){return{x:this._size,y:this._size}},maxSize:function(){var b=this._orientation===m.ORIENTATION.HORIZONTAL?!0:!1;return{x:b?
this._size:Infinity,y:b?Infinity:this._size}},__init:function(){this.$frame=$('\x3cdiv class\x3d"wcCollapserFrame"\x3e');this.__container(this.$container);var b=this.docker();this._splitter=new (this.docker().__getClass("wcSplitter"))(b.$container,this,this._orientation);this._drawer=new (this.docker().__getClass("wcDrawer"))(b.$transition,this._splitter,this._position);switch(this._position){case m.DOCK.LEFT:this._splitter.pane(0,this._drawer);this._splitter.$pane[1].remove();this._splitter.$pane[0].addClass("wcDrawer");
this._splitter.pos(0);break;case m.DOCK.RIGHT:case m.DOCK.BOTTOM:this._splitter.pane(1,this._drawer),this._splitter.$pane[0].remove(),this._splitter.$pane[1].addClass("wcDrawer"),this._splitter.pos(1)}this._parent.$bar.addClass("wcSplitterHidden")},__update:function(b){this._splitter.__update();this.__adjustSize()},__adjustSize:function(){this._size=this._drawer._frame._panelList.length?this._drawer._frame.$tabBar.outerHeight():0},__rect:function(){return this._drawer.__rect()},__save:function(){var b=
{};b.size=this._size;b.drawer=this._drawer.__save();return b},__restore:function(b,c){this._size=b.size;this._drawer.__restore(b.drawer,c);this.__adjustSize()},__container:function(b){if("undefined"===typeof b)return this.$container;(this.$container=b)?this.$container.append(this.$frame):this.$frame.remove();return this.$container},__destroy:function(){this._splitter&&(this._splitter.__destroy(),this._frame=this._splitter=null);this.__container(null);this._parent=null}})})},"xide/utils/CIUtils":function(){define(["xide/utils",
"xide/types","xide/factory","dojo/has","xide/lodash"],function(n,m,k,h,d){n.toOptions=function(b){b=n.flattenCIS(b);for(var c=[],g=0;g<b.length;g++){var d=b[g];c.push({name:n.toString(d.name),value:n.getCIValue(d),type:n.toInt(d.type),enumType:n.toString(d.enumType),visible:n.toBoolean(d.visible),active:n.toBoolean(d.active),changed:n.toBoolean(d.changed),group:n.toString(d.group),user:n.toObject(d.user),dst:n.toString(d.dst),id:n.toString(d.id),params:n.toString(d.params)})}return c};n.getEventsAsOptions=
function(b){var c=[{label:"Select Event",value:""}],g;for(g in m.EVENTS)c.push({label:m.EVENTS[g],value:m.EVENTS[g]});c=c.concat([{label:"onclick",value:"onclick"},{label:"ondblclick",value:"dblclick"},{label:"onmousedown",value:"mousedown"},{label:"onmouseup",value:"mouseup"},{label:"onmouseover",value:"mouseover"},{label:"onmousemove",value:"mousemove"},{label:"onmouseout",value:"mouseout"},{label:"onkeypress",value:"keypress"},{label:"onkeydown",value:"keydown"},{label:"onkeyup",value:"keyup"},
{label:"onfocus",value:"focus"},{label:"onblur",value:"blur"},{label:"On Load",value:"Load"}]);for(g=0;g<c.length;g++){var d=c[g];if(d.value===b){d.selected=!0;break}}return c};n.flattenCIS=function(b){for(var c=[],g=[],d=0;d<b.length;d++){var a=b[d],e=n.toInt(a.type);e>m.ECIType.END&&(e=m.resolveType(e))&&(n.mixin(c,e),g.push(a))}0<c.length&&(b=b.concat(c));if(g)for(d in g)b.remove(g[d]);return b};n.arrayContains=function(b,c){for(var g=0;g<b.length;g++)if(b[g]===c)return!0;return!1};n.setStoreCIValueByField=
function(b,c,g){null==b[c]&&(b[c]=[]);b[c][0]=n.getStringValue(g);return b};n.createOption=function(b,c,g){return n.mixin({label:b,value:null!=c?c:b},g)};n.createCI=function(b,c,g,d,a){b={dataRef:null,dataSource:null,name:b,group:-1,id:b,title:b,type:c,uid:-1,value:null!=g?g:-1,visible:!0,enumType:-1,"class":"cmx.types.ConfigurableInformation"};n.mixin(b,d);a&&a.publish&&k.publish(a.publish,{CI:b,owner:a.owner},a.owner);return b};n.createCIAsArray=function(b,c,g,d){return{chainType:[g?g:0],dataRef:[null],
dataSource:[null],params:[],name:[b],group:[-1],id:[b],title:[b],type:[c],uid:[-1],value:[d?d:-1],visible:[!0],enumType:[-1],parentId:[-1],"class":["cmx.types.ConfigurableInformation"]}};n.hasValue=function(b){return b.value&&null!=b.value[0]&&0<b.value[0].length&&"0"!=b.value[0]&&"undefined"!=b.value[0]&&"Unset"!=b.value[0]};n.hasValueAndDataRef=function(b){return b.value&&null!=b.value[0]&&0<b.value[0].length&&"0"!=b.value[0]&&"undefined"!=b.value[0]&&"Unset"!=b.value[0]&&b.dataRef&&null!=b.dataRef[0]&&
0<b.dataRef[0].length&&"0"!=b.dataRef[0]&&"undefined"!=b.dataRef[0]};n.getInputCIByName=function(b,c){if(!b||!c)return null;var g=b.inputs;g||(g=b);if(null!=g)for(b=0;b<g.length;b++){var d=g[b],a=n.getStringValue(d.name);if(null!=a&&a.toLowerCase()===c.toLowerCase())return d}return null};n.getInputCIById=function(b,c){if(!b)return null;var g=b.inputs;g||(g=b);if(null!=g)for(b=0;b<g.length;b++){var d=g[b],a=n.getStringValue(d.id);if(null!=a&&a.toLowerCase()===c.toLowerCase())return d}return null};
n.getCIByChainAndName=function(b,c,g){if(!b)return null;(c=0==c?b.inputs:1==c?b.outputs:null)||(c=b);if(null!=c)for(b=0;b<c.length;b++){var d=c[b],a=n.getStringValue(d.name);if(null!=a&&a.toLowerCase()===g.toLowerCase())return d}return null};n.getCIByUid=function(b,c){if(null!=b)for(var g=0;g<b.length;g++){var d=b[g],a=n.getStringValue(d.uid);if(null!=a&&a===c)return d}return null};n.getCIById=function(b,c,g){b=0==c?b.inputs:1==c?b.outputs:null;if(null!=b)for(c=0;c<b.length;c++){var d=b[c];if(d.id[0]==
g[0])return d}return null};n.getCIInputValueByName=function(b,c){return(b=n.getCIByChainAndName(b,0,c))?b.value:null};n.getCIValue=function(b){return n.getCIValueByField(b,"value")};n.getStringValue=function(b){return n.toString(b)};n.toString=function(b){return null!=b?d.isArray(b)?b&&1==b.length&&null==b[0]?null:""+(null!=b[0]?b[0]:b):""+b:null};n.setIntegerValue=function(b,c){null!=b&&(dojo.isArray(b)?b[0]=c:b=c)};n.getCIValueByField=function(b,c){return null!=b[c]?d.isArray(b[c])?b[c][0]?b[c][0]:
b[c]:b[c]:null};n.setCIValueByField=function(b,c,g){if(!b)return b;null==b[c]&&(b[c]=[]);b[c]=g;return b};n.setCIValue=function(b,c,g){(b=n.getInputCIByName(b,c))&&n.setCIValueByField(b,"value",g);return b};n.getCIInputValueByNameAndField=function(b,c,g){return(b=n.getCIByChainAndName(b,0,c))?b[""+g]:null};n.getCIInputValueByNameAndFieldStr=function(b,c,g){return(b=n.getCIInputValueByNameAndField(b,c,g))?n.getStringValue(b):null};n.getCIInputValueByNameAndFieldBool=function(b,c,g){return(b=n.getCIInputValueByNameAndField(b,
c,g))?n.toBoolean(b):null};n.getCIWidgetByName=function(b,c){for(var g=0;g<b.length;g++){var d=b[g];if(d._widget&&d.name===c)return d._widget}return null};return n})},"dijit/Viewport":function(){define(["dojo/Evented","dojo/window"],function(n,m){n=new n;n.getEffectiveBox=function(k){return m.getBox(k)};return n})},"xfile/component":function(){define(["dcl/dcl","xide/model/Component"],function(n,m){return n(m,{beanType:"BTFILE",getDependencies:function(){return["xfile/types","xfile/manager/FileManager",
"xfile/manager/MountManager","xfile/factory/Store","xfile/views/FileGrid"]},getLabel:function(){return"xfile"},getBeanType:function(){return this.beanType}})})},"dojo/html":function(){define("./_base/kernel ./_base/lang ./_base/array ./_base/declare ./dom ./dom-construct ./parser".split(" "),function(n,m,k,h,d,b,c){var g=0,p={_secureForInnerHtml:function(a){return a.replace(/(?:\s*<!DOCTYPE\s[^>]+>|<title[^>]*>[\s\S]*?<\/title>)/ig,"")},_emptyNode:b.empty,_setNodeContent:function(a,e){b.empty(a);
if(e)if("number"==typeof e&&(e=e.toString()),"string"==typeof e&&(e=b.toDom(e,a.ownerDocument)),!e.nodeType&&m.isArrayLike(e))for(var c=e.length,g=0;g<e.length;g=c==e.length?g+1:0)b.place(e[g],a,"last");else b.place(e,a,"last");return a},_ContentSetter:h("dojo.html._ContentSetter",null,{node:"",content:"",id:"",cleanContent:!1,extractContent:!1,parseContent:!1,parserScope:n._scopeName,startup:!0,constructor:function(a,b){m.mixin(this,a||{});b=this.node=d.byId(this.node||b);this.id||(this.id=["Setter",
b?b.id||b.tagName:"",g++].join("_"))},set:function(a,b){void 0!==a&&(this.content=a);"number"==typeof a&&(a=a.toString());b&&this._mixin(b);this.onBegin();this.setContent();return(a=this.onEnd())&&a.then?a:this.node},setContent:function(){var a=this.node;if(!a)throw Error(this.declaredClass+": setContent given no node");try{a=p._setNodeContent(a,this.content)}catch(q){var b=this.onContentError(q);try{a.innerHTML=b}catch(u){console.error("Fatal "+this.declaredClass+".setContent could not change content due to "+
u.message,u)}}this.node=a},empty:function(){this.parseDeferred&&(this.parseDeferred.isResolved()||this.parseDeferred.cancel(),delete this.parseDeferred);this.parseResults&&this.parseResults.length&&(k.forEach(this.parseResults,function(a){a.destroy&&a.destroy()}),delete this.parseResults);b.empty(this.node)},onBegin:function(){var a=this.content;if(m.isString(a)&&(this.cleanContent&&(a=p._secureForInnerHtml(a)),this.extractContent)){var b=a.match(/<body[^>]*>\s*([\s\S]+)\s*<\/body>/im);b&&(a=b[1])}this.empty();
this.content=a;return this.node},onEnd:function(){this.parseContent&&this._parse();return this.node},tearDown:function(){delete this.parseResults;delete this.parseDeferred;delete this.node;delete this.content},onContentError:function(a){return"Error occurred setting content: "+a},onExecError:function(a){return"Error occurred executing scripts: "+a},_mixin:function(a){var b={},c;for(c in a)c in b||(this[c]=a[c])},_parse:function(){var a=this.node;try{var b={};k.forEach(["dir","lang","textDir"],function(a){this[a]&&
(b[a]=this[a])},this);var g=this;this.parseDeferred=c.parse({rootNode:a,noStart:!this.startup,inherited:b,scope:this.parserScope}).then(function(a){return g.parseResults=a},function(a){g._onError("Content",a,"Error parsing in _ContentSetter#"+this.id)})}catch(u){this._onError("Content",u,"Error parsing in _ContentSetter#"+this.id)}},_onError:function(a,b,c){a=this["on"+a+"Error"].call(this,b);c?console.error(c,b):a&&p._setNodeContent(this.node,a,!0)}}),set:function(a,b,c){void 0==b&&(b="");"number"==
typeof b&&(b=b.toString());return c?(new p._ContentSetter(m.mixin(c,{content:b,node:a}))).set():p._setNodeContent(a,b,!0)}};m.setObject("dojo.html",p);return p})},"xace/xace":function(){define(["dijit","dojo","dojox"],function(n,m,k){})},"dijit/_base/place":function(){define(["dojo/_base/array","dojo/_base/lang","dojo/window","../place","../main"],function(n,m,k,h,d){var b={getViewport:function(){return k.getBox()}};b.placeOnScreen=h.at;b.placeOnScreenAroundElement=function(b,g,d,a){var e;if(m.isArray(d))e=
d;else{e=[];for(var c in d)e.push({aroundCorner:c,corner:d[c]})}return h.around(b,g,e,!0,a)};b.placeOnScreenAroundNode=b.placeOnScreenAroundElement;b.placeOnScreenAroundRectangle=b.placeOnScreenAroundElement;b.getPopupAroundAlignment=function(b,g){var c={};n.forEach(b,function(a){var b=g;switch(a){case "after":c[g?"BR":"BL"]=g?"BL":"BR";break;case "before":c[g?"BL":"BR"]=g?"BR":"BL";break;case "below-alt":b=!b;case "below":c[b?"BL":"BR"]=b?"TL":"TR";c[b?"BR":"BL"]=b?"TR":"TL";break;case "above-alt":b=
!b;default:c[b?"TL":"TR"]=b?"BL":"BR",c[b?"TR":"TL"]=b?"BR":"BL"}});return c};m.mixin(d,b);return d})},"dojo/touch":function(){define("./_base/kernel ./aspect ./dom ./dom-class ./_base/lang ./on ./has ./mouse ./domReady ./_base/window".split(" "),function(n,m,k,h,d,b,c,g,p,a){function e(a,e,c){return v&&c?function(a,e){return b(a,c,e)}:w?function(c,g){var q=b(c,e,g),r=b(c,a,function(a){(!G||(new Date).getTime()>G+1E3)&&g.call(this,a)});return{remove:function(){q.remove();r.remove()}}}:function(e,
c){return b(e,a,c)}}function q(a){do if(a.dojoClick)return a.dojoClick;while(a=a.parentNode)}function u(e,c,g){if(A=!e.target.disabled&&q(e.target))z=e.target,y=e.touches?e.touches[0].pageX:e.clientX,B=e.touches?e.touches[0].pageY:e.clientY,C=("object"==typeof A?A.x:"number"==typeof A?A:0)||4,E=("object"==typeof A?A.y:"number"==typeof A?A:0)||4,x||(e=function(b){a.doc.addEventListener(b,function(a){a._dojo_click||!((new Date).getTime()<=F+1E3)||"INPUT"==a.target.tagName&&h.contains(a.target,"dijitOffScreen")||
(a.stopPropagation(),a.stopImmediatePropagation&&a.stopImmediatePropagation(),"click"!=b||"INPUT"==a.target.tagName&&"radio"!=a.target.type&&"checkbox"!=a.target.type||"TEXTAREA"==a.target.tagName||"AUDIO"==a.target.tagName||"VIDEO"==a.target.tagName||a.preventDefault())},!0)},x=!0,a.doc.addEventListener(c,function(a){A=A&&a.target==z&&Math.abs((a.touches?a.touches[0].pageX:a.clientX)-y)<=C&&Math.abs((a.touches?a.touches[0].pageY:a.clientY)-B)<=E},!0),a.doc.addEventListener(g,function(a){if(A){F=
(new Date).getTime();var e=a.target;"LABEL"===e.tagName&&(e=k.byId(e.getAttribute("for"))||e);setTimeout(function(){b.emit(e,"click",{bubbles:!0,cancelable:!0,_dojo_click:!0})})}},!0),e("click"),e("mousedown"),e("mouseup"))}var w=c("touch"),r=5>c("ios"),v=navigator.msPointerEnabled,x,A,z,y,B,C,E,F,G,D;w&&(v?p(function(){a.doc.addEventListener("MSPointerDown",function(a){u(a,"MSPointerMove","MSPointerUp")},!0)}):p(function(){function e(a){var b=d.delegate(a,{bubbles:!0});6<=c("ios")&&(b.touches=a.touches,
b.altKey=a.altKey,b.changedTouches=a.changedTouches,b.ctrlKey=a.ctrlKey,b.metaKey=a.metaKey,b.shiftKey=a.shiftKey,b.targetTouches=a.targetTouches);return b}D=a.body();a.doc.addEventListener("touchstart",function(a){G=(new Date).getTime();var e=D;D=a.target;b.emit(e,"dojotouchout",{relatedTarget:D,bubbles:!0});b.emit(D,"dojotouchover",{relatedTarget:e,bubbles:!0});u(a,"touchmove","touchend")},!0);b(a.doc,"touchmove",function(c){G=(new Date).getTime();var g=a.doc.elementFromPoint(c.pageX-(r?0:a.global.pageXOffset),
c.pageY-(r?0:a.global.pageYOffset));g&&(D!==g&&(b.emit(D,"dojotouchout",{relatedTarget:g,bubbles:!0}),b.emit(g,"dojotouchover",{relatedTarget:D,bubbles:!0}),D=g),b.emit(g,"dojotouchmove",e(c))||c.preventDefault())});b(a.doc,"touchend",function(c){G=(new Date).getTime();var g=a.doc.elementFromPoint(c.pageX-(r?0:a.global.pageXOffset),c.pageY-(r?0:a.global.pageYOffset))||a.body();b.emit(g,"dojotouchend",e(c))})}));m={press:e("mousedown","touchstart","MSPointerDown"),move:e("mousemove","dojotouchmove",
"MSPointerMove"),release:e("mouseup","dojotouchend","MSPointerUp"),cancel:e(g.leave,"touchcancel",w?"MSPointerCancel":null),over:e("mouseover","dojotouchover","MSPointerOver"),out:e("mouseout","dojotouchout","MSPointerOut"),enter:g._eventHandler(e("mouseover","dojotouchover","MSPointerOver")),leave:g._eventHandler(e("mouseout","dojotouchout","MSPointerOut"))};return n.touch=m})},"xide/views/_MainView":function(){define("xide/types xdojo/has xdocker/Docker2 dcl/dcl xide/utils xide/views/_LayoutMixin xide/_base/_Widget xaction/ActionProvider xide/widgets/MainMenu xide/widgets/ActionToolbar xide/widgets/Ribbon xide/registry wcDocker/iframe wcDocker/types dojo/text!./welcome.html xide/$".split(" "),
function(n,m,k,h,d,b,c,g,p,a,e,q,u,w,r,v){var x=n.ACTION;e=h(null,{});e=h(e,{welcomePage:null,welcomeWidget:null,getLayoutMain:function(a,b){},getLastTab:function(){var a=this.getDocker().allPanels(),b=this.getLayoutMain();return _.find(a,function(a){var e=a.option("canAdd");return a!=b&&!0===e})},getNewDefaultTab:function(a){var b=this.getDocker(),e=this.getLayoutMain(),c=this.getLastTab(),g=n.DOCKER;if(this.hasAction(x.NAVIGATION))return d.mixin(a,{target:this.layoutCenter,location:g.DOCK.STACKED,
tabOrientation:g.TAB.TOP,dynamic:!0}),this.getDocker().addTab(null,a);e=c||e;d.mixin(a,{target:e,location:g.DOCK.STACKED,tabOrientation:g.TAB.TOP});e&&!0===e.option("autoHideTabBar")&&(e.getFrame().showTitlebar(!0),g=e.option("titleStacked"),e.title(g));a=b.addTab(null,a);setTimeout(function(){b.resize()},100);return a},createWidgets:function(){var b=this.layoutTop;if(this.hasAction(x.MAIN_MENU)){var e={style:"height:auto",resizeToParent:!1,actionStores:[this.ctx.getActionStore()]};this.mainMenu=
d.addWidget(p,e,this,b,!0);v(this.mainMenu.domNode).css({height:"auto","min-height":31})}this.hasAction(x.TOOLBAR)&&(this.toolbar=d.addWidget(a,{visibility:n.ACTION_VISIBILITY.QUICK_LAUNCH,actionFilter:{quick:!0},_hide:!1},null,b,!0),v(this.toolbar.domNode).css({"margin-right":"16px"}),this.toolbar.$navigation.addClass("quickToolbar"));this.hasAction(x.BREADCRUMB)||b&&b.resize()},createBottom:function(){var a=this.getDocker().addPanel("DefaultTab",n.DOCKER.DOCK.BOTTOM,null,{w:"33%",h:"20px",title:"\x26nbsp;\x26nbsp;",
mixin:{_scrollable:{x:!1,y:!1}}});a._minSize.y=40;this.layoutBottom=a;a.minSize(null,30);a.maxSize(null,30);a.closeable(!1);a.resizeToChildren=!1;a.getFrame().showTitlebar(!1);return a},createLayout:function(a,b){var e;if(this.hasAction(x.TOOLBAR)||this.hasAction(x.BREADCRUMB)||this.hasAction(x.MAIN_MENU)||this.hasAction(x.RIBBON))e=this.layoutTop=a.addPanel("DefaultFixed",n.DOCKER.DOCK.TOP,null,{h:50,title:"\x26nbsp;\x26nbsp;",canAdd:!1,mixin:{_scrollable:{x:!1,y:!1}}}),e.title(!1),e.initSize(null,
37),e.maxSize(null,44);this.hasAction(x.NAVIGATION)&&(this.layoutLeft=a.addPanel("DefaultTab",n.DOCKER.DOCK.BOTTOM,e,{title:"\x26nbsp;\x26nbsp;",autoHideTabBar:!0,titleStacked:"Navigation"}),this.layoutLeft.initSize(200,null),this.layoutLeft.closeable(!1),this.layoutLeft.resizeToChildren=!1,this.layoutLeft.getFrame().showTitlebar(!1),v(this.layoutLeft.containerNode).css({"overflow-x":"hidden","overflow-y":"auto"}));this.hasAction(x.NAVIGATION)&&this.hasAction(x.WELCOME)&&(this.layoutCenter=a.addPanel("DefaultTab",
n.DOCKER.DOCK.RIGHT,this.layoutLeft,{w:"80%",title:"Welcome",mixin:{isDefault:!0}}),this.layoutCenter.closeable(!1),this.layoutCenter.containerNode.id="editorsStackContainer",this.layoutCenter.containerNode.domNode=this.layoutCenter.containerNode,q.add(this.layoutCenter.containerNode),this.ctx.getSettingsManager().initStore(),this.welcomePage=this.layoutCenter,this.layoutCenter.resize(),this.welcomeWidget&&(this.welcomeWidget.id="editorsStackContainer",q.add(this.welcomeWidget)));this.hasAction(x.STATUSBAR)&&
(this.createBottom(),this.subscribe(n.EVENTS.ON_STATUS_MESSAGE));a.resize();(a=e?e.getSplitter():null)&&a.$bar.css("display","none")}});u=[x.MAIN_MENU,x.NAVIGATION,x.STATUSBAR,x.WELCOME,x.TOOLBAR];m("phone")&&(u=[x.NAVIGATION]);m=h([c,b.dcl,g.dcl,e],{templateString:'\x3cdiv style\x3d"height: 100%;width: 100%;"\x3e\x3c/div\x3e',_statusMessageTimer:null,permissions:u,createStatusbar:function(a){if(!this.layoutBottom)return null;a=this.layoutBottom.containerNode;var b=this.statusbar,e=this;if(!b){var c=
v('\x3cdiv class\x3d"statusbar widget" style\x3d"width:inherit;padding: 0;margin:0;padding-left: 4px;min-height: 10px;height:100%"\x3e\x3c/div\x3e')[0];a.appendChild(c);b=v('\x3cdiv class\x3d"status-bar-text ellipsis" style\x3d"display: inline-block;"\x3e0 items selected\x3c/div\x3e')[0];c.appendChild(b);var g=v('\x3cdiv class\x3d"status-bar-collapser" style\x3d"" \x3e\x3c/div\x3e');g.click(function(a){e.onStatusbarCollapse(g)});a=g[0];c.appendChild(a);this.statusbar=b;this.statusbarRoot=c;this._emit("createStatusbar",
{root:c,statusbar:b,collapser:a})}return b},onStatusMessage:function(a){this._statusMessageTimer&&(clearTimeout(this._statusMessageTimer),this._statusMessageTimer=null);var b=this.getStatusbar();if(this.layoutBottom){var e=a.text;a.type&&("error"===a.type&&(e='\x3cspan class\x3d"statusbarMessage text-danger"\x3e'+e+"\x3c/span\x3e"),"warning"===a.type&&(e='\x3cspan class\x3d"statusbarMessage text-warning"\x3e'+e+"\x3c/span\x3e"),"info"===a.type&&(e='\x3cspan class\x3d"statusbarMessage text-info"\x3e'+
e+"\x3c/span\x3e"));b.innerHTML=e;this._statusMessageTimer=setTimeout(function(){b.innerHTML=""},a.delay||5E3)}},getStatusbar:function(){return this.statusbar?this.statusbar:this.createStatusbar()},getMainMenu:function(){return this.mainMenu},getBreadcrumb:function(){return this.breadcrumb},initWithConfig:function(){},getLayoutMain:function(){return this.layoutLeft},getLayoutLeft:function(){return this.layoutLeft},getLayoutCenter:function(){return this.layoutCenter},getToolbar:function(){return this.toolbar},
onLastPanelClosed:function(){var a=this.getLayoutMain();a.option("autoHideTabBar")&&(a.title(a.option("title")),a.getFrame().showTitlebar(!1));this.getDocker().resize()},onPanelClosed:function(){var a=this,b=a.getLayoutMain(),e=a.getDocker();setTimeout(function(){var c=e.allPanels().filter(function(a){return!1!==a.option("canAdd")});if(1==c.length&&c[0]==b)a.onLastPanelClosed()},1);this.getDocker().resize()},_resizeToWindow:function(){var a=v("#root")[0],b=v("#staticTopContainer"),e=0;b&&b&&(e=b.height());
d.resizeTo(a,window,!0,!0,null,{h:-e});if(this.layoutMain){d.resizeTo(this.layoutMain,a,!0,!0);this.layoutMain.resize();var a=v("#root").height(),a=a-this.extraBottomHeight,c=c-e,c=v(this.layoutTop.domNode).height();v(this.layoutCenter.domNode).css("height",a-c)}this.getDocker().resize()},_resize:function(){this._resizeToWindow();this.publish(n.EVENTS.RESIZE,{},this);v("window").trigger("resize");this.getDocker().resize()},startup:function(){function a(){e._resize()}var b=k.createDefault(this.domNode);
this.add(b,null,!1);this._docker=b;var e=this;b._on(w.EVENT.CLOSED,function(a){e.onPanelClosed(a)});this.createLayout(b,this.permissions);this.createWidgets();v(window).resize(function(){return e.debounce("resize",a.bind(e),1E3,null)});setTimeout(function(){e._resizeToWindow()},1E3)}});h.chainAfter(m,"startup");h.chainAfter(m,"resize");h.chainAfter(m,"createLayout");h.chainAfter(m,"createWidgets");return m})},"davinci/ve/actions/DeleteAction":function(){define(["dojo/_base/declare","davinci/Workbench",
"davinci/ve/actions/ContextAction","davinci/commands/CompoundCommand","davinci/ve/commands/RemoveCommand"],function(n,m,k,h,d){return n("davinci.ve.actions.DeleteAction",[k],{run:function(b){if(b=this.fixupContext(b)){var c=this._normalizeSelection(b);if(0<c.length){var g=void 0;if(1===c.length)var c=c[0],p=c.getHelper(),g=p&&p.getRemoveCommand?p.getRemoveCommand(c):new d(c);else g=new h,dojo.forEach(c,function(a){var b=a.getHelper();a=b&&b.getRemoveCommand?b.getRemoveCommand(a):new d(a);g.add(a)});
b.select(null);b.getCommandStack().execute(g)}}},isEnabled:function(b){b=this.fixupContext(b);var c=m.getOpenEditor();return c&&b?(b=0<b.getSelection().length,"davinci.ve.PageEditor"==c.declaredClass?(c=c.getDisplayMode(),b&&"source"!=c):b):!1},shouldShow:function(b){return(b=(b=this.fixupContext(b))?b.editor:null)&&"davinci.ve.PageEditor"==b.declaredClass}})})},"xideve/Templates":function(){define("dojo/_base/declare dojo/_base/lang xide/utils dojo/has ./stub require".split(" "),function(n,m,k,h,
d,b){n=n("xideve/Templates",null,{registry:{},register:function(b,g){0==b in this.registry&&(this.registry[b]=g)}});k=new n;m.mixin(n,k);return n})},"dijit/registry":function(){define(["xide/registry"],function(n){return n})},"xide/views/ConsoleView":function(){define("dcl/dcl xide/utils xide/types xide/_base/_Widget xide/views/History xace/views/Editor xide/mixins/PersistenceMixin xide/views/_LayoutMixin".split(" "),function(n,m,k,h,d,b,c,g){function p(){var a=n(null,{owner:null,declaredClass:"xide/views/Console_Handler",
onServerResponse:function(a,b,e){},runBash:function(a,b,e,c){a=this.ctx.fileManager;b=a.serviceObject.base64_encode(b);e=a.runDeferred("XShell","run",["sh",b,e]);e.then(function(a){c&&$(c).find(".consoleRunningCommand").remove()});return e},runPHP:function(a,b,e){var c=this,g=this.ctx.fileManager;b=g.serviceObject.base64_encode(b);g.runDeferred("XShell","run",["php",b,e]).then(function(b){c.onServerResponse(a,b,!1)})},getContext:function(){return m.mixin(this,this.ctx)},print:function(a){this.printCommand("",
a,'\x3cdiv style\x3d"margin-bottom:0px" class\x3d"widget border-top-dark"\x3e${result}\x3c/div\x3e',!1)},runJavascript:function(a,b,e,c){a=(new Function("{"+b+"; }")).call(e||this.getContext(),c);return null!=a?a:b},toHTML:function(a){},onConsoleCommand:function(a,b){var e=this.type;if("sh"===e){var c=this.printCommand(a,"",'\x3cdiv style\x3d"margin-bottom: 6px" class\x3d"widget border-top-dark"\x3e\x3cspan class\x3d"consoleRunningCommand fa-spinner fa-spin"/\x3e# ${command}\x3cbr/\x3e\x3c/div\x3e\x3cbr/\x3e',
!1),e=null;if(this.owner&&this.owner.getCurrentFolder){var g=this.owner.getCurrentFolder();g&&(e=m.buildPath(g.mount,g.path,!1))}a=this.runBash(b,a,e,c);a.then(function(a){var b=!1,e="";-1!=a.indexOf("\x3cbody")||/<[a-z][\s\S]*>/i.test(a)?(b=!0,e=a):e+=a.replace(/\n/g,"\x3cbr/\x3e");b&&(a=$('\x3cdiv class\x3d"html_response"\x3e'+e+"\x3c/div\x3e"),c.append(a),a=$('\x3cdiv class\x3d"border-bottom-dark" \x3e\x26nbsp;\x3c/div\x3e'),c.parent().append(a),a[0].scrollIntoViewIfNeeded())});return a}if("php"===
e)return e=null,b&&b.isLinked()&&(e=this.getCurrentPath()),this.runPHP(b,a,e);if("javascript"===e)return this.runJavascript(b,a)},onConsoleEnter:function(a,b){return this.onConsoleCommand(a,b)}});n.chainAfter(a,"onConsoleEnter");return a}function a(){return n([h,c.dcl],{declaredClass:"xide.views._ConsoleWidget",delegate:null,value:null,editNode:null,labelTextNode:null,labelNode:null,type:null,linkToggle:null,edit:null,consoleParent:null,isExpanded:!0,theme:"View/Themes/idle_fingers",consoleEditor:null,
jsContext:null,resizeToParent:!0,EditorClass:null,templateString:'\x3cdiv class\x3d"" style\x3d"height: 100%;width: 100%"\x3e\x3cdiv attachTo\x3d"consoleParent" class\x3d"" style\x3d"width:inherit;height:inherit;padding: 0;margin:0;"\x3e\x3c/div\x3e\x3c/div\x3e',isLinked:function(){return this.linkToggle?this.linkToggle.get("checked"):!1},getEditor:function(){return this.consoleEditor},getTextEditor:function(){return this.aceEditorEditor},resize:function(){if(this.isExpanded){var a=$(this.domNode.parentNode).height();
$(this.consoleParent).css({height:a+"px"})}this.aceEditor&&this.aceEditor.resize()},onClear:function(){this.delegate.$logView.html("")},maximize:function(a){return this.delegate&&this.delegate.maximize?this.delegate.maximize():!1},expandEditor:function(){var a=this.getEditor();m.resizeTo(a,this.consoleParent,!0,!0)},createEditor:function(){var a=this,b=e.apply(this,[this.consoleParent,this.value,this,m.mixin({options:this.options,ctx:this.ctx,resizeToParent:!0},this.delegate.editorArgs||{}),this.delegate.EditorClass]);
this.add(b);this.delegate.onCreatedEditor&&this.delegate.onCreatedEditor(b);b._on("change",function(b){a._emit("change",b)});return b},onAddEditorActions:function(a){a.owner=this.aceEditor;this.delegate.onAddEditorActions(a)},createWidgets:function(){if(!this.aceEditor){var a=this,b=this.createEditor(this.ctx);this.aceEditor=b;b._on("onAddActions",this.onAddEditorActions,a);b.startup();this.add(b,null,!1);var e=b.getEditor();this.delegate&&this.delegate.maximize&&(b.maximize=function(){return this.delegate.maximize()});
this.aceEditorEditor=b;this.consoleEditor=e;e.renderer.setShowGutter(!1);e.renderer.setHighlightGutterLine(!1);e.$mouseHandler.$focusWaitTimout=0;e.setOptions({enableBasicAutocompletion:!0,enableLiveAutocompletion:!0,enableSnippets:!0});b.setMode(this.delegate.type);b.set("value",this.value);b.runAction(this.theme);b.set("value",this.value);$(this.expandButton).click(function(b){return a.expandEditor()});$(this.clearButton).on("click",function(){if(a.delegate&&a.delegate.onButton)a.delegate.onButton()});
this.expandEditor();e.commands.bindKeys({"Ctrl-Return":function(b){a.isExpanded?(e.focus(),b=e.getSelectedText()||e.getValue(),a.onEnter(b)):(e.focus(),a.onEnter(e.getValue()))},"Shift-Return":function(b){a.onClear()},"Esc|Shift-Esc":function(a){e.focus()},Return:function(b){e.getValue().split(/\s+/);a.isExpanded?e.insert("\n"):(e.focus(),a.onEnter(e.getValue()))}});e.commands.removeCommands(["find","gotoline","findall","replace","replaceall"])}},getValue:function(){return this.consoleEditor.getValue()},
startup:function(){this.history=new d;this.createWidgets()},onEnter:function(a){this.delegate.onConsoleEnter(a,0==this.isExpanded,this);this.history.push(a)}})}function e(a,e,c,g,q){var r={filePath:"",fileName:""};e={_permissions:[],item:r,value:e||"...",style:"padding:0px;top:0 !important",iconClass:"fa-code",options:m.mixin(g,{filePath:r.path,fileName:r.name}),storeDelegate:{},title:"No Title"};m.mixin(e,g);g=b;q&&(g=q);a=m.addWidget(g,e,c,a,!1,null,null,!1);a.resize();return a}b=n([b,c.dcl],{declaredClass:"xace.views.Editor",
defaultPrefenceTheme:"idle_fingers",defaultPrefenceFontSize:14,getDefaultPreferences:function(){return{theme:this.defaultPrefenceTheme,fontSize:this.defaultPrefenceFontSize}},runAction:function(a){if("Console/Clear"===a.command)return this.delegate.onClear();if(this.delegate.delegate&&this.delegate.delegate.runAction){var b=this.delegate.delegate.runAction(a);if(b)return b}return"Console/Send"===a.command?(b=this.get("value"),this.delegate.delegate.onConsoleEnter(b)):this.inherited(arguments)},__onAfterAction:function(a){this.savePreferences({theme:this.get("theme").replace("ace/theme/",
""),fontSize:this.getEditor().getFontSize()});return this.inherited(arguments)},toPreferenceId:function(a){a=a||($("body").hasClass("xTheme-transparent")?"xTheme-transparent":"xTheme-white");return(a||this.cookiePrefix||"")+"_xace"},getDefaultOptions:function(){var a=this.inherited(arguments),b=this.loadPreferences(null);b&&m.mixin(a,b)||this.savePreferences(this.getDefaultPreferences());return a}});var q=function(){return n([h,g.dcl,p()],{declaredClass:"xide.views.ConsoleView",templateString:'\x3cdiv class\x3d"logView" style\x3d"height: 100%;overflow: auto" attachTo\x3d"logView" /\x3e',
printTemplate:'\x3cdiv style\x3d"margin-bottom: 6px" class\x3d"widget border-top-dark"\x3e# ${time} - ${command}\x3cbr/\x3e\t ${result}\x3c/div\x3e\x3cbr/\x3e',defaultPanelOptions:{w:"100%",title:!1},defaultPanelType:"DefaultFixed",resizeToParent:!0,onAddEditorActions:function(a){var b=a.actions;a=a.owner;b.remove(_.find(b,{command:"File/Save"}));b.remove(_.find(b,{command:"File/Reload"}));var e={addPermission:!0};b.push(a.createAction({label:"Send",command:"Console/Send",icon:"fa-paper-plane",group:"Console",
tab:"Home",mixin:e}));b.push(a.createAction({label:"Clear Ouput",command:"Console/Clear",icon:"fa-remove",group:"Console",tab:"Home",mixin:e}));b.push(a.createAction({label:"Fullscreen",command:k.ACTION.FULLSCREEN,icon:k.ACTION_ICON.MAXIMIZE,keycombo:"ctrl f11",group:"View",mixin:e}))},getConsoleClass:function(){return a()},createConsole:function(a){a=m.addWidget(this.getConsoleClass(),{style:"width:inherit",delegate:this,type:this.type,value:this.value,ctx:this.ctx},this,a,!1);this.add(a);return a},
createWidgets:function(a,b){a=this.createConsole(a);a.startup();this.console=a},getConsole:function(){return this.console},getConsoleEditor:function(){return this.getConsole().getTextEditor()},startup:function(){this.createWidgets(this.getBottomPanel("Console"),this.getTop())},maxEntries:100,toDom:function(a){var b=document.createElement("template");b.innerHTML=a;return b.content.firstChild},printCommand:function(a,b,e,c){var g=this.logView,q=g.children.length-this.maxEntries;if(q&&30<q){for(;0<q;)g.children&&
g.children[0]&&g.removeChild(g.children[0]),q--;q=g.children.length-this.maxEntries}c=!1!==c?moment().format("HH:mm:ss:SSS"):"";a=m.substituteString(e||this.printTemplate,{command:a,result:b,time:c});a=[this.toDom(a)];g.appendChild(a[0]);delete this.__lastNode;this.__lastNode=a[0];this.debounce("scroll",function(){this.__lastNode.scrollIntoViewIfNeeded()}.bind(this),200,{maxWait:100});return a},onConsoleEnter:n.superCall(function(a){return function(b){var e=a.call(this,b);e&&e.then||this.printCommand(b,
e)}})})}();q.Editor=b;q.HandlerClass=p();q.ConsoleWidget=a();return q})},"xfile/manager/BlockManager":function(){define(["dcl/dcl","xide/manager/ManagerBase","xide/mixins/ReloadMixin","xblox/manager/BlockManager"],function(n,m,k,h){return n([m,h,k.dcl],{declaredClass:"xfile/manager/BlockManager",currentItem:null,setScriptFunctions:function(d,b,c){this.inherited(arguments)}})})},"xcf/views/DriverConsole":function(){define(["dcl/dcl","xide/types","xide/utils","xide/views/ConsoleView","xblox/model/Expression"],
function(n,m,k,h,d){d=n(h.Editor,{didAddMCompleter:!1,multiFileCompleter:null,blockScope:null,driverInstance:null,onACEReady:function(b){var c=this.blockScope;b=this.driverInstance;var g=c.getVariables({group:"basicVariables"});(c=c.getVariables({group:"processVariables"}))&&c.length&&(g=g.concat(c));c=[];if(g&&0<g.length)for(var d=0;d<g.length;d++){var a=g[d];c.push({word:a.name,value:a.value,meta:"Driver Variable"})}for(var e in b)g=b[e],_.isFunction(g)?c.push({word:e,value:e,meta:"Driver Method"}):
(_.isString(g)||_.isObject(g))&&c.push({word:e,value:e,meta:"Driver Property"});return c.length&&this.addAutoCompleter(c)},onEditorCreated:function(b,c){this.inherited(arguments);this.onACEReady(b)}});return n(h,{EditorClass:d,declaredClass:"xcf/views/DriverConsole",runAction:function(){return this.inherited(arguments)},onAddEditorActions:n.superCall(function(b){return function(c){b.call(this,c);var g=this,d=c.actions;c=c.owner;d.remove(_.find(d,{command:"File/Save"}));d.remove(_.find(d,{command:"File/Reload"}));
var a={addPermission:!0,quick:!0,owner:c},e={onCreate:function(a){a.set("value",a.value)},onChange:function(a,b){this.value=b;g.runAction(this)}};d.push(c.createAction({label:"Settings",command:"Console/Settings",icon:"fa-cogs",group:"Settings",mixin:a}));d.push(c.createAction(k.mixin({label:"%%Construct %%Response",command:"Console/Settings/Split",icon:"fa-filter",group:"Settings",tab:"Home",value:!0,mixin:k.mixin({actionType:m.ACTION_TYPE.MULTI_TOGGLE,value:!0},a),handler:function(){console.error("filter")}},
e)));d.push(c.createAction(k.mixin({label:"Display as Hex",command:"Console/Settings/HEX",icon:"fa-filter",group:"Settings",tab:"Home",value:!1,mixin:k.mixin({actionType:m.ACTION_TYPE.MULTI_TOGGLE,value:!1},a),handler:function(){console.error("filter")}},e)));d.push(c.createAction(k.mixin({label:"%%Replace %%Hex",command:"Console/Settings/ReplaceHEX",icon:"fa-filter",group:"Settings",tab:"Home",value:!0,mixin:k.mixin({actionType:m.ACTION_TYPE.MULTI_TOGGLE,value:!0},a),handler:function(){console.error("filter")}},
e)));d.push(c.createAction(k.mixin({label:"%%Add %%Start/End Constants",command:"Console/Settings/AddConstants",icon:"fa-filter",group:"Settings",tab:"Home",value:!0,mixin:k.mixin({actionType:m.ACTION_TYPE.MULTI_TOGGLE,value:!0},a),handler:function(){console.error("filter")}},e)));d.push(c.createAction(k.mixin({label:"%%Is %%Expression",command:"Console/Settings/Expression",icon:"fa-filter",group:"Settings",tab:"Home",value:!0,mixin:k.mixin({actionType:m.ACTION_TYPE.MULTI_TOGGLE,value:!0},a),handler:function(){console.error("filter")}},
e)))}}),logTemplate:'\x3cpre style\x3d"font-size:100%;padding: 0px;" class\x3d""\x3e    ${time} - ${result}\x3c/pre\x3e',_parse:function(b,c,g){var d=""+c;0<d.indexOf("{{")||0<d.indexOf("}}")?d=_parser.parse(m.EXPRESSION_PARSER.FILTREX,d,this,{variables:b.getVariablesAsObject(),delimiters:{begin:"{{",end:"}}"}}):(b=b.parseExpression(c,null,null,null,g))&&(d=b);return d},parse:function(b,c){var g=this.driverInstance;return g&&g.blockScope?this._parse(g.blockScope,b,c):b},getDeviceString:function(b,
c,g){var d="user_devices"===b.scope?"User Device - ":"System Device - ";return d+="\x3cb\x3e"+b.name+"\x3c/b\x3e - "+c.host+":"+c.port+"@"+c.protocol+'\x3cb\x3e\x3cspan class\x3d"text-default"\x3e'+(g||"")+"\x3c/b\x3e\x3c/span\x3e"},onDeviceCommand:function(b){var c=m.LOG_OUTPUT;if(!b.__d3){b.__d3=!0;var g=b.device,d=b.deviceInfo,a=d.loggingFlags,a=_.isString(a)?k.fromJson(a):a||{};this.hasFlag(d,c.SEND_COMMAND)&&g==this.device&&(b='\x3cspan class\x3d"text-info"\x3e'+(this.getDeviceString(g,d," Command: ")+
"\x3cspan class\x3d'text-default'\x3e\""+b.name+'"\x3c/span\x3e ')+'\x3c/span\x3e\x3cspan\x3e\x3cspan class\x3d"text-warning"\x3e'+b.command+"\x3c/span\x3e",this.log(b,!1,!1))}},startup:function(){this.subscribe(m.EVENTS.ON_DEVICE_COMMAND)}})})},"davinci/ve/actions/RemoveState":function(){define("dojo/_base/declare davinci/Runtime davinci/ve/States davinci/actions/Action davinci/commands/CompoundCommand davinci/ve/commands/AppStateCommand".split(" "),function(n,m,k,h,d,b){return n("davinci.ve.actions.RemoveState",
[h],{run:function(){var c;if(m.currentEditor&&m.currentEditor.currentEditor&&m.currentEditor.currentEditor.context){c=m.currentEditor.currentEditor.context;var g=k.getFocus(c.rootNode);if(g&&g.state&&g.state!==k.NORMAL){var g=g.stateContainerNode,p=p=davinci.ve.states.getState(g);if(p){var a=new d;a.add(new b({action:"remove",state:p,stateContainerNode:g,context:c}));c.getCommandStack().execute(a)}}}}})})},"xide/utils/StoreUtils":function(){define(["xide/utils","xide/data/Memory","dojo/_base/kernel",
"xide/lodash"],function(n,m,k,h){n.removeFromStore=function(d,b,c,g,p,a,e){if(null!=b&&d){b=h.isString(b)?d.getSync(b)||b:b;g=g||d.idProperty;p=p||d.parentProperty;b&&d.removeSync(b[g],a);var q={};q[p]=b[g]?b[g]:b;!0===e&&h.isObject(b)&&n.destroy(b,!0);if(!0===c&&(b=d.query(q))&&b.length)for(q=0;q<b.length;q++)n.removeFromStore(d,b[q],c,g,p,a,e)}};n.toString=function(d){return null!=d?k.isArray(d)?d&&1==d.length&&null==d[0]?null:""+(null!=d[0]?d[0]:d):""+d:null};n.toBoolean=function(d){var b=!1;null!=
d&&(d=d[0]?d[0]:d,null!=d&&(b=!(!0!==d&&"true"!==d&&"1"!==d)));return b};n.toObject=function(d){return null!=d?d[0]?d[0]:d:null};n.toInt=function(d){if(_.isNumber(d))return d;var b=-1;null!=d&&(d=1<d.length?d:d[0]?d[0]:d,null!=d&&(b=parseInt(d,10)));return b};n.getStoreItemById=function(d,b){return n.queryStoreEx(d,{id:b},null,null)};n.getAppDataElementByIdAndType=function(d,b,c){return n.queryStore(d,{uid:b,type:c},null,null)};n.getElementsByType=function(d,b){return n.queryStoreEx(d,{type:b})};
n.queryStoreEx=function(d,b,c,g){if(!d)return console.error("utils.queryStoreEx: store \x3d null"),null;if(d instanceof m)return d=n.queryMemoryStoreEx(d,b),g&&d&&d[0]?d[0]:d;var p=null;d.query&&(p=d.query(b));return!0===c&&p&&0===p.length?null:!0===g&&p&&1==p.length?p[0]:p};n.queryStore=function(d,b,c){return(d=n.queryStoreEx(d,b,null,null))&&1==d.length?d[0]:!0===c&&d&&0===d.length?null:d};n.queryMemoryStoreEx=function(d,b){var c=[];d.query(b).forEach(function(b){c.push(b)});return c};n.queryMemoryStoreSingle=
function(d,b){d=n.queryMemoryStoreEx(d,b);return 1==d.length?d[0]:d};return n})},"xcf/Managers":function(){define("dojo/_base/declare xide/manager/Context xide/manager/Application xide/manager/SettingsManager xide/manager/ManagerBase xide/manager/ServerActionBase xide/manager/Context xide/manager/PluginManager xcf/manager/Context xcf/manager/Application xcf/manager/ProjectManager xcf/manager/DriverManager".split(" "),function(n){return n("xcf.Managers",null,{})})},"davinci/ve/actions/EnableApplicationStates":function(){define("dojo/_base/declare dojo/_base/connect dojo/dom-class dijit/_WidgetBase dijit/_TemplatedMixin dijit/_WidgetsInTemplateMixin davinci/Runtime davinci/Workbench davinci/ve/metadata davinci/ve/widget davinci/ve/States davinci/actions/Action davinci/lang/ve dijit/lang/_common dojo/text!./templates/EnableApplicationStates.html dijit/form/TextBox".split(" "),
function(n,m,k,h,d,b,c,g,p,a,e,q,u,w,r){var v=function(){if(c.currentEditor&&c.currentEditor.currentEditor&&c.currentEditor.currentEditor.context){context=c.currentEditor.currentEditor.context;var a=context.getSelection();if(1==a.length)return"ANY"==p.getAllowedChild(a[0].type)}return!1};n("davinci.ve.actions.EnableApplicationStatesWidget",[h,d,b],{templateString:r,widgetsInTemplate:!0,veNls:u,commonNls:w,oldValue:null,widget:null,postCreate:function(){if(c.currentEditor&&c.currentEditor.currentEditor&&
c.currentEditor.currentEditor.context){editor=this.editor=c.currentEditor;context=this.context=c.currentEditor.currentEditor.context;var b=context.getSelection();if(0<b.length){var b=this.widget=b[0],g=a.getLabel(b);this.widgetLabel.innerHTML=g;this.oldValue=e.isStateContainer(b.domNode);this.checkBoxWidget.set("checked",this.oldValue);this.oldValue?(b=e.getStates(b.domNode),1<b.length?(b.splice(0,1),this.statesListDiv.innerHTML=u.EnableApplicationStatesCurrentStates+": "+b.join(", ")):this.statesListDiv.innerHTML=
u.EnableApplicationStatesCurrentStates+": "+u.EnableApplicationStatesNone,this.description.innerHTML=u.DisableAsStateContainerDescription):(this.description.innerHTML=u.EnableAsStateContainerDescription,this.statesListDiv.innerHTML="")}this.okButton.connect(this.okButton,"onClick",dojo.hitch(this,function(a){this.onOk(a)}));this.cancelButton.connect(this.cancelButton,"onClick",dojo.hitch(this,function(a){this.onCancel(a)}))}},_onKeyPress:function(a){if(a.keyCode==dojo.keys.ENTER)this.onOk()},onOk:function(){var a=
this.checkBoxWidget.get("checked");if(a!=this.oldValue){var b=this.widget.domNode;a?(b._maqAppStates={},a=e.serialize(b),this.widget._srcElement.addAttribute(e.APPSTATES_ATTRIBUTE,a.maqAppStates)):(delete b._maqAppStates,this.widget._srcElement.removeAttribute(e.APPSTATES_ATTRIBUTE),e.removeUnusedStates(this.context));this.editor._visualChanged();m.publish("/maqetta/appstates/state/containerChange",[])}this.onClose()},onCancel:function(){this.onClose()}});return n("davinci.ve.actions.EnableApplicationStates",
[q],{run:function(){if(v()&&c.currentEditor&&c.currentEditor.currentEditor&&c.currentEditor.currentEditor.context){var a=new davinci.ve.actions.EnableApplicationStatesWidget;g.showModal(a,u.EnableApplicationStates,{width:"370px"})}},isEnabled:function(){return v()}})})},"dojox/html/ellipsis":function(){define("dojox/html/ellipsis",["dojo/_base/kernel","dojo/_base/lang","dojo/_base/array","dojo/_base/Color","dojo/colors"],function(n){if(7>n.isFF){var m=1;"dojoxFFEllipsisDelay"in n.config&&(m=Number(n.config.dojoxFFEllipsisDelay),
isNaN(m)&&(m=1));try{var k=function(){var a=document.createElementNS("http://www.mozilla.org/keymaster/gatekeeper/there.is.only.xul","window"),b=document.createElementNS("http://www.mozilla.org/keymaster/gatekeeper/there.is.only.xul","description");b.setAttribute("crop","end");a.appendChild(b);return function(b){var e=a.cloneNode(!0);e.firstChild.setAttribute("value",b.textContent);b.innerHTML="";b.appendChild(e)}}()}catch(r){}var h=n.create,d=n.doc,b=n.place,c=h("iframe",{className:"dojoxEllipsisIFrame",
src:"javascript:'\x3chtml\x3e\x3chead\x3e\x3cscript\x3eif(\"loadFirebugConsole\" in window){window.loadFirebugConsole();}\x3c/script\x3e\x3c/head\x3e\x3cbody\x3e\x3c/body\x3e\x3c/html\x3e'",style:{display:"none"}}),g=function(a,b){if(!a.collapsed)if(0<b){do g(a),b--;while(b)}else 3==a.endContainer.nodeType&&0<a.endOffset?a.setEnd(a.endContainer,a.endOffset-1):3==a.endContainer.nodeType?(a.setEndBefore(a.endContainer),g(a)):a.endOffset&&a.endContainer.childNodes.length>=a.endOffset?(b=a.endContainer.childNodes[a.endOffset-
1],3==b.nodeType?a.setEnd(b,b.length-1):(b.childNodes.length?a.setEnd(b,b.childNodes.length):a.setEndBefore(b),g(a))):(a.setEndBefore(a.endContainer),g(a))},p=function(a){var e=h("div",{className:"dojoxEllipsisContainer"}),q=h("div",{className:"dojoxEllipsisShown",style:{display:"none"}});a.parentNode.replaceChild(e,a);e.appendChild(a);e.appendChild(q);var r=c.cloneNode(!0),p=a.style,u=q.style,w=function(){p.display="";u.display="none";if(!(a.scrollWidth<=a.offsetWidth)){var e=d.createRange();e.selectNodeContents(a);
p.display="none";u.display="";var c=!1;do{var r=1;b(e.cloneContents(),q,"only");var v=q.scrollWidth,w=q.offsetWidth,c=v<=w,v=1-1*w/v;0<v&&(r=Math.max(Math.round(q.textContent.length*v)-1,1));g(e,r)}while(!e.collapsed&&!c)}};r.onload=function(){r.contentWindow.onresize=w;w()};e.appendChild(r)},a=n.hasClass,e=n.doc,q,u,w;e.querySelectorAll?(q=e,u="querySelectorAll",w=".dojoxEllipsis"):e.getElementsByClassName?(q=e,u="getElementsByClassName",w="dojoxEllipsis"):(q=n,u="query",w=".dojoxEllipsis");fx=function(){n.forEach(q[u].apply(q,
[w]),function(b){b&&!b._djx_ellipsis_done&&(b._djx_ellipsis_done=!0,k&&b.textContent==b.innerHTML&&!a(b,"dojoxEllipsisSelectable")?k(b):p(b))})};n.addOnLoad(function(){var a=null,b=null,e=function(){b&&(n.disconnect(b),b=null);a&&clearTimeout(a);a=setTimeout(function(){a=null;fx();b=n.connect(n.body(),"DOMSubtreeModified",e)},m)};e()})}})},"xblox/component":function(){define(["dcl/dcl","xdojo/has","xide/model/Component"],function(n,m,k){return n(k,{beanType:"BLOCK",_load:function(){},hasEditors:function(){return["xblox"]},
getDependencies:function(){return"xide/xide xblox/types/Types xblox/manager/BlockManager xblox/manager/BlockManagerUI xblox/embedded_ui xblox/views/BlockGridPalette xide/widgets/ExpressionJavaScript xide/widgets/Expression xide/widgets/RichTextWidget xide/widgets/ExpressionEditor xide/widgets/WidgetReference".split(" ")},getLabel:function(){return"xblox"},getBeanType:function(){return this.beanType}})})},"dijit/typematic":function(){define(["./main"],function(n){return n.typematic={}})},"xide/widgets/ActionToolbar4":function(){define("dcl/dcl xide/types xide/utils xide/_base/_Widget xide/mixins/ActionMixin xaction/ActionContext xide/model/Path xlang/i18 xide/widgets/_MenuMixin4 xide/popup".split(" "),
function(n,m,k,h,d,b,c,g,p,a){d=n([h,b.dcl,d.dcl],{templateString:'\x3cdiv attachTo\x3d"navigation" class\x3d"actionToolbar"\x3e\x3cnav attachTo\x3d"navigationRoot" class\x3d"" role\x3d"navigation"\x3e\x3cul attachTo\x3d"navBar" class\x3d"nav navbar-nav"/\x3e\x3c/nav\x3e\x3c/div\x3e'});b=n(null,{ITEM_TAG:"div",CONTAINER_TAG:"div",ITEM_CLASS:"actionItem",renderTopLevel:function(a,b){b=b||$(this.getRootContainer());a=$('\x3cli tabindex\x3d"-1" class\x3d"dropdown"\x3e\x3ca href\x3d"#" class\x3d"dropdown-toggle" data-toggle\x3d"dropdown"\x3e'+
g.localize(a)+'\x3cb class\x3d"caret"\x3e\x3c/b\x3e\x3c/a\x3e\x3c/li\x3e');b.append(a);return a},getRootContainer:function(){return this.navBar}});h=n([d,p,b,h.StoreMixin],{declaredClass:"xide.widgets.Actiontoolbar",target:null,hideSubsFirst:!0,visibility:m.ACTION_VISIBILITY.ACTION_TOOLBAR,actionFilter:{quick:!0},_renderItem:function(a,b,c,g,d,p,h,A,k,y){a=this.localize(p);y=A.actionType||g.actionType;d=g.getParent?g.getParent():null;var e=this.getActionProperty(g,A,"closeOnClick");A=" \n";p=null;
g.keyboardMappings&&!1!==k&&(k=g.keyboardMappings[0].keys)&&k.length&&(A+=""+k.join(" | ").toUpperCase()+"");if(y===m.ACTION_TYPE.MULTI_TOGGLE){p='\x3cli class\x3d"" \x3e';h=g._store.id+"_"+g.command+"_"+this.id;k=g.get("value");p=p+'\x3cdiv class\x3d"action-checkbox checkbox checkbox-success "\x3e'+('\x3cinput id\x3d"'+h+'" type\x3d"checkbox" '+(!0===k?"checked":"")+"\x3e")+('\x3clabel for\x3d"'+h+'"\x3e')+this.localize(b.text);p+="\x3c/label\x3e";p+='\x3cspan style\x3d"max-width:100px;margin-right:20px" class\x3d"text-muted pull-right ellipsis keyboardShortCut"\x3e'+
A+"\x3c/span\x3e";p+="\x3c/div\x3e";c.addClass("noclose");c=$(p);var q=c.find("INPUT");q.on("change",function(a){g._originReference=b;g._originEvent=a;g.set("value",q[0].checked);g._originReference=null});this.setVisibilityField(g,"widget",b);return c}!1===e&&c.addClass("noclose");y===m.ACTION_TYPE.SINGLE_TOGGLE&&d&&(c=g.value||g.get("value"),k=d.get("value"),c==k&&(h="fa fa-check"));p='\x3cli class\x3d"" title\x3d"'+(b.text||a||this.localize(g.title))+" "+A+'"\x3e';c=b.icon||h;"undefined"!==typeof c&&
(p=/<[a-z][\s\S]*>/i.test(c)?p+c:p+('\x3cspan style\x3d"" class\x3d"icon '+c+'"/\x3e '));p+='\x3ca class\x3d""\x3e';p+=b.text;p+="\x3c/a\x3e\x3c/li\x3e";this.setVisibilityField(g,"widget",b);return $(p)},init2:function(b){function e(a,b){var e=b.attr("level");e||(e=parseInt(b.parent().attr("level"),10)||0);0===e&&b.css({left:0});a.parent().offset();a.offset();a.position();a.height();b.css({top:-2});a=b.height()+0;var e=$("html").height(),c=b.offset();b.offset();var g=e-(c.top+a);c.top+a>e&&b.css({top:g-
30});a=b.width();e=b.offset().left;a+e>window.innerWidth&&b.addClass("drop-left")}var c=this.getDefaultOptions(),c=$.extend({},c,b),g=this;b=$(document);this.__on(b,"click",null,function(a){g.isOpen&&(g.isOpen=!1,g.onClose(a),$(".dropdown-context").css({display:""}).find(".drop-left").removeClass("drop-left"))});c.preventDoubleContext&&this.__on(b,"contextmenu",".dropdown-context",function(a){a.preventDefault()});this.__on(b,"mouseenter",".dropdown-submenu",function(b){var q=$(b.currentTarget),d=
q.find(".dropdown-context-sub:first");b=!1;if(0===d.length)if(d=q.data("sub"))b=!0;else return;var r=d.data("data"),r=1===(r?r[0].level:0);d.css("display","none");d.data("left",!1);q.data("left",!1);if(r){var p=function(){d.data("open",!1);a.close(d[0])};d.css("display","initial");d.css("position","initial");!0!==q.data("didSetup")&&(q.data("didSetup",!0),q.data("sub",d),q.on("mouseleave",function(a){var b=q.data("sub");a=a.toElement;a==b[0]||$.contains(b[0],a)||p()}));b||(q.data("sub",d),d.data("owner",
g),d.data("didSetup")||(d.data("root",q),d.on("mouseleave",function(){d.data("left",!0);p()}),d.data("didSetup",!0),d.on("mouseenter",function(a){d.data("entered",!0)})));(function(){if(!d.data("open")){d.data("open",!0);var b=a.open({popup:d[0],around:q[0],orient:["below","above"],maxHeight:-1,owner:g,extraClass:"ActionToolbar",onExecute:function(){g.closeDropDown(!0)},onCancel:function(){p()},onClose:function(){q.data("left",!0);p()}});e(q,d,$(b))}})()}else d.css("display","block"),d.data("didSetup")||
(d.data("didSetup",!0),d.on("mouseleave",function(){d.css("display","");d.data("left",!0)})),q.data("didSetup")||(q.data("didSetup",!0),q.on("mouseleave",function(){q.data("left",!0);d.css("display","")}));b=d.height()+0;var r=$("html").height(),u=d.offset(),w=r-(u.top+b);u.top+b>r&&d.css({top:w-30}).fadeIn(c.fadeSpeed);b=d.width();r=d.offset().left;b+r>window.innerWidth&&d.addClass("drop-left")}.bind(this))},resize:function(){this._height=this.$navBar.height();0<this._height&&(this.$navBar.css("width",
this.$navigation.width()),this.$navigationRoot.css("width",this.$navigation.width()),this.$navigation.css("height",this._height),this.$navigationRoot.css("height",this._height))},destroy:function(){k.destroy(this.$navBar[0]);k.destroy(this.$navigation[0])},buildMenu:function(a,b,c,g){var e='\x3cul aria-expanded\x3d"true" role\x3d"menu" class\x3d"dropdown-menu dropdown-context'+(c?" dropdown-context-sub":" scrollable-menu ")+'" id\x3d"dropdown-'+b+'"\x3e\x3c/ul\x3e';g=g?this._rootMenu||this.$navBar||
$(e):$(e);c||(this._rootMenu=g);g.data("data",a);return this.buildMenuItems(g,a,b,c)},setActionStore:function(a,b,g,d,r){!d&&a&&this.store&&a!=this.store&&this.removeCustomActions();d||(this._clear(),this.addActionStore(a));if(a){this.store=a;var e=this,q=$(e.getRootContainer()),p=d?e.lastTree:e.buildActionTree(a,b),u=p.allActionPaths,w=e.menuData;!1===g||this["_handleAdded_"+a.id]||(this.addHandle("added",a._on("onActionsAdded",function(a){e.onActionAdded(a)})),this.addHandle("delete",a.on("delete",
function(a){e.onActionRemoved(a)})),this["_handleAdded_"+a.id]=!0);var h=[];if(!d)_.each(p.root,function(g,d){_.each(g,function(g){var d=e.getAction(g,a);d||(d=e.createAction(g));if(d){var r=function(g,q){g=(new c(g)).getChildren(u,!1);if(g=0<g.length?e.toActions(g,a):null){var d=[];_.each(g,function(a){var g=e.getActionData(a),g=e.toMenuItem(a,b,g.label,g.icon,g.visibility,!1);g.level=(q.level||0)+1;e.addReference(a,g);d.push(g);0<(new c(a.command)).getChildren(u,!1).length&&r(a.command,g)});q.subMenu=
d}},p=e.getActionData(d),v=p.visibility;!1!==v&&(p=e.toMenuItem(d,b,"",p.icon,v||{},!1),h.push(p),p.level=0,v.widget=p,e.addReference(d,p),(new c(g)).getChildren(u,!1),r(g,p),e.buildMenuItems(q,[p],"-"+(new Date).getTime()))}})}),e.onDidRenderActions(a,b),this.menuData=h;else if(r||!_.isEmpty(r))_.each(r,function(a){if(a){var c=e.getAction(a.command);if(c){var g=e.getActionData(c),q=g.visibility,g=e.toMenuItem(c,b,g.label,g.icon,q||{},null,!1);q.widget||(q.widget=g,e.addReference(a,g),c.getParentCommand&&
(a=c.getParentCommand(),(a=e._findParentData(w,a))&&a.subMenu?(a.lazy=!0,a.subMenu.push(g)):w.splice(0,0,g)))}else console.error("cant find action "+a.command)}}),e.buildMenu(w,e.id,null,d);this.resize()}},startup:function(){this.correctSubMenu=!0;this.init2({preventDoubleContext:!1});this.menu=this.$navigation}});n.chainAfter(h,"destroy");return h})},"xide/mixins/Electron":function(){define(["dcl/dcl","xdojo/has","xdojo/declare","xide/utils","dojo/Deferred"],function(n,m,k,h,d){m={declaredClass:"xide.mixins.Electron",
getElectron:function(){return this.require("electron")},require:function(){return window.eRequire?window.eRequire.apply(null,arguments):null},getApp:function(){return this.remote().app},srequire:function(){return this.remote().require.apply(null,arguments)},remote:function(){return(0,window.eRequire)("electron").remote},getClipboard:function(){var b=this.getElectron();return b?b.clipboard:null},cwd:function(){this.srequire("path");this.getApp()}};k=k("xide/mixins/Electron",null,m);k.dcl=n(null,m);
return k})},"davinci/commands/OrderedCompoundCommand":function(){define(["dojo/_base/declare","davinci/commands/CompoundCommand"],function(n,m){return n("davinci.commands.OrderedCompoundCommand",m,{undo:function(){if(this._commands)for(var k=0;k<this._commands.length;k++)this._commands[k].undo()}})})},"davinci/version":function(){define([],"10")},"xide/types":function(){define(["dcl/dcl"],function(n){n=new n(null,{declaredClass:"xide/types"});n.test=22;return n})},"dojo/request/util":function(){define("exports ../errors/RequestError ../errors/CancelError ../Deferred ../io-query ../_base/array ../_base/lang ../promise/Promise".split(" "),
function(n,m,k,h,d,b,c,g){function p(a){return e(a)}function a(a){return a.data||a.text}n.deepCopy=function(a,b){for(var e in b){var c=a[e],g=b[e];c!==g&&(c&&"object"===typeof c&&g&&"object"===typeof g?n.deepCopy(c,g):a[e]=g)}return a};n.deepCreate=function(a,b){b=b||{};var e=c.delegate(a),g,q;for(g in a)(q=a[g])&&"object"===typeof q&&(e[g]=n.deepCreate(q,b[g]));return n.deepCopy(e,b)};var e=Object.freeze||function(a){return a};n.deferred=function(b,d,w,r,v,x){var q=new h(function(a){d&&d(q,b);return a&&
(a instanceof m||a instanceof k)?a:new k("Request canceled",b)});q.response=b;q.isValid=w;q.isReady=r;q.handleResponse=v;w=q.then(p).otherwise(function(a){a.response=b;throw a;});n.notify&&w.then(c.hitch(n.notify,"emit","load"),c.hitch(n.notify,"emit","error"));r=w.then(a);v=new g;for(var u in r)r.hasOwnProperty(u)&&(v[u]=r[u]);v.response=w;e(v);x&&q.then(function(a){x.call(q,a)},function(a){x.call(q,b,a)});q.promise=v;q.then=v.then;return q};n.addCommonMethods=function(a,e){b.forEach(e||["GET","POST",
"PUT","DELETE"],function(b){a[("DELETE"===b?"DEL":b).toLowerCase()]=function(e,g){g=c.delegate(g||{});g.method=b;return a(e,g)}})};n.parseArgs=function(a,b,e){var c=b.data,g=b.query;c&&!e&&"object"===typeof c&&(b.data=d.objectToQuery(c));g?("object"===typeof g&&(g=d.objectToQuery(g)),b.preventCache&&(g+=(g?"\x26":"")+"request.preventCache\x3d"+ +new Date)):b.preventCache&&(g="request.preventCache\x3d"+ +new Date);a&&g&&(a+=(~a.indexOf("?")?"\x26":"?")+g);return{url:a,options:b,getHeader:function(a){return null}}};
n.checkStatus=function(a){a=a||0;return 200<=a&&300>a||304===a||1223===a||!a}})},"xblox/model/Targeted":function(){define(["dojo/_base/declare","./Referenced"],function(n,m){return n("xblox.model.Targeted",[m],{})})},"wcDocker/tabframe":function(){define(["dcl/dcl","wcDocker/types","wcDocker/base"],function(n,m,k){return n(k,{declaredClass:"wcTabFrame",LEFT_TAB_BUFFER:15,constructor:function(h,d){this.$container=$(h);this._parent=d;this.$close=this.$tabRight=this.$tabLeft=this.$center=this.$tabScroll=
this.$tabBar=this.$frame=null;this._tabOrientation=m.TAB.TOP;this._canScrollTabs=!1;this._tabScrollPos=0;this._curTab=-1;this._layoutList=[];this._moveable=!0;this._boundEvents=[];this.__init()},update:function(){var h=this.$center.scrollTop();this.__updateTabs();this.$center.scrollTop(h)},destroy:function(){this.__destroy()},tabCount:function(){return this._layoutList.length},tabOrientation:function(h){void 0!==h&&this._tabOrientation!==h&&this.docker()._canOrientTabs&&(this._tabOrientation=h,this.__updateTabs(),
this.__updateTabs());return this._tabOrientation},addTab:function(h,d,b){b=b||"wcLayoutTable";b=new (this.docker().__getClass(b))(".wcDockerTransition",this._parent);b.name=h;b._scrollable={x:!0,y:!0};b._scroll={x:0,y:0};b._closeable=!1;b._overflowVisible=!1;"undefined"===typeof d||-1>=d?this._layoutList.push(b):this._layoutList.splice(d,0,b);-1===this._curTab&&this._layoutList.length&&(this._curTab=0);this.__updateTabs();return b},removeTab:function(h){if(-1<h&&h<this._layoutList.length){var d=this._layoutList[h].name;
this._layoutList[h].__destroy();this._layoutList.splice(h,1);this._curTab>=h&&(this._curTab--,0>this._curTab&&(this._curTab=0));this.__updateTabs();this._parent.__trigger(m.EVENT.CUSTOM_TAB_CLOSED,{obj:this,name:d,index:h});return!0}return!1},tab:function(h,d){"undefined"!==typeof h&&-1<h&&h<this._layoutList.length&&(this.$tabBar.find('\x3e .wcTabScroller \x3e .wcPanelTab[id\x3d"'+this._curTab+'"]').removeClass("wcPanelTabActive"),this.$center.children('.wcPanelTabContent[id\x3d"'+this._curTab+'"]').addClass("wcPanelTabContentHidden"),
this._curTab=h,this.$tabBar.find('\x3e .wcTabScroller \x3e .wcPanelTab[id\x3d"'+h+'"]').addClass("wcPanelTabActive"),this.$center.children('.wcPanelTabContent[id\x3d"'+h+'"]').removeClass("wcPanelTabContentHidden"),this.__updateTabs(d),this._parent.__trigger(m.EVENT.CUSTOM_TAB_CHANGED,{obj:this,name:this._layoutList[this._curTab].name,index:h}));return this._curTab},layout:function(h){return-1<h&&h<this._layoutList.length?this._layoutList[h]:!1},moveTab:function(h,d){if(0<=h&&h<this._layoutList.length&&
0<=d&&d<this._layoutList.length){var b=this._layoutList.splice(h,1);this._layoutList.splice(d,0,b[0]);this._curTab===h&&(this._curTab=d);this.__updateTabs();return this.$tabBar.find('\x3e .wcTabScroller \x3e .wcPanelTab[id\x3d"'+d+'"]')[0]}return!1},moveable:function(h){"undefined"!==typeof h&&(this._moveable=h);return this._moveable},closeable:function(h,d){return-1<h&&h<this._layoutList.length?(h=this._layoutList[h],"undefined"!==typeof d&&(h._closeable=d),h._closeable):!1},scrollable:function(h,
d,b){if(-1<h&&h<this._layoutList.length){h=this._layoutList[h];var c=!1;"undefined"!==typeof d&&(h._scrollable.x=d,c=!0);"undefined"!==typeof b&&(h._scrollable.y=b,c=!0);c&&this.__onTabChange();return{x:h._scrollable.x,y:h._scrollable.y}}return!1},overflowVisible:function(h,d){return-1<h&&h<this._layoutList.length?(h=this._layoutList[h],"undefined"!==typeof overflow&&(h._overflowVisible=overflow,this.__onTabChange()),h._overflowVisible):!1},fitContents:function(h,d,b){if(-1<h&&h<this._layoutList.length){h=
this._layoutList[h];h.hasOwnProperty("_fitContents")||(h._fitContents={x:!1,y:!1});var c=!1;"undefined"!==typeof d&&(h._fitContents.x=d,c=!0);"undefined"!==typeof b&&(h._fitContents.y=b,c=!0);c&&this.__onTabChange();return{x:h._fitContents.x,y:h._fitContents.y}}return!1},icon:function(h,d){-1<h&&h<this._layoutList.length&&(h=this._layoutList[h],h.$icon||(h.$icon=$("\x3cdiv\x3e")),h.$icon.removeClass(),h.$icon.addClass("wcTabIcon "+d))},faicon:function(h,d){-1<h&&h<this._layoutList.length&&(h=this._layoutList[h],
h.$icon||(h.$icon=$("\x3cdiv\x3e")),h.$icon.removeClass(),h.$icon.addClass("fa fa-fw fa-"+d))},__init:function(){this.$frame=$('\x3cdiv class\x3d"wcCustomTab wcWide wcTall"\x3e');this.$tabBar=$('\x3cdiv class\x3d"wcFrameTitleBar wcCustomTabTitle wcWide"\x3e');this.$tabScroll=$('\x3cdiv class\x3d"wcTabScroller"\x3e');this.$center=$('\x3cdiv class\x3d"wcFrameCenter wcPanelBackground"\x3e');this.$tabLeft=$('\x3cdiv class\x3d"wcFrameButton" title\x3d"Scroll tabs to the left."\x3e\x3cspan class\x3d"fa fa-arrow-left"\x3e\x3c/span\x3e\x26lt;\x3c/div\x3e');
this.$tabRight=$('\x3cdiv class\x3d"wcFrameButton" title\x3d"Scroll tabs to the right."\x3e\x3cspan class\x3d"fa fa-arrow-right"\x3e\x3c/span\x3e\x26gt;\x3c/div\x3e');this.$close=$('\x3cdiv class\x3d"wcFrameButton" title\x3d"Close the currently active panel tab"\x3e\x3cspan class\x3d"fa fa-close"\x3e\x3c/span\x3eX\x3c/div\x3e');this.$buttonBar=$('\x3cdiv class\x3d"wcFrameButtonBar"\x3e');this.$tabBar.append(this.$tabScroll);this.$tabBar.append(this.$buttonBar);this.$buttonBar.append(this.$close);
this.$frame.append(this.$center);this.$frame.append(this.$tabBar);this.__container(this.$container);this._boundEvents.push({event:m.EVENT.UPDATED,handler:this.update.bind(this)});this._boundEvents.push({event:m.EVENT.CLOSED,handler:this.destroy.bind(this)});for(var h=0;h<this._boundEvents.length;++h)this._parent.on(this._boundEvents[h].event,this._boundEvents[h].handler);(h=this.docker())&&h._tabList.push(this)},__updateTabs:function(h){var d=function(a){switch(this._tabOrientation){case m.TAB.BOTTOM:return a.offset().left;
case m.TAB.TOP:return a.offset().left;case m.TAB.LEFT:return a.offset().top;case m.TAB.RIGHT:return a.offset().top}}.bind(this),b=[],c=0,g=d(this.$tabScroll);this.$center.children(".wcPanelTabContent").each(function(){$(this).addClass("wcPanelTabContentHidden wcPanelTabUnused")});for(var p=0;p<this._layoutList.length;++p){var a=$('\x3cdiv id\x3d"'+p+'" class\x3d"wcPanelTab"\x3e\x3cdiv\x3e'+this._layoutList[p].name+"\x3c/div\x3e\x3c/div\x3e");this._moveable&&a.addClass("wcCustomTabMoveable");this.$tabScroll.append(a);
this._layoutList[p].$icon&&a.find("div").prepend(this._layoutList[p].$icon);c=this.$center.children('.wcPanelTabContent[id\x3d"'+p+'"]');c.length||(c=$('\x3cdiv class\x3d"wcPanelTabContent wcPanelTabContentHidden" id\x3d"'+p+'"\x3e'),this.$center.append(c));this._layoutList[p].__container(c);this._layoutList[p]._parent=this;var e=this._curTab===p;c.removeClass("wcPanelTabUnused");e&&(a.addClass("wcPanelTabActive"),c.removeClass("wcPanelTabContentHidden"));c=d(a)-g;b.push(c);c+=a.outerWidth()}a=0;
p=this.$tabBar.height();switch(this._tabOrientation){case m.TAB.TOP:this.$tabBar.addClass("wcTabTop").removeClass("wcTabLeft wcTabRight wcTabBottom");this.$center.css("top",p).css("left",0).css("right",0).css("bottom",0);a=this.$center.width();break;case m.TAB.BOTTOM:this.$tabBar.addClass("wcTabBottom").removeClass("wcTabTop wcTabLeft wcTabRight");this.$center.css("top",0).css("left",0).css("right",0).css("bottom",p);a=this.$center.width();break;case m.TAB.LEFT:this.$tabBar.addClass("wcTabLeft").removeClass("wcTabTop wcTabRight wcTabBottom");
this.$center.css("top",0).css("left",p).css("right",0).css("bottom",0);a=this.$center.height();break;case m.TAB.RIGHT:this.$tabBar.addClass("wcTabRight").removeClass("wcTabTop wcTabLeft wcTabBottom"),this.$center.css("top",0).css("left",0).css("right",p).css("bottom",0),a=this.$center.height()}this.$center.children(".wcPanelTabUnused").each(function(){$(this).remove()});e=this.__onTabChange();if(h)for(p=0;p<b.length;++p)if(p===this._curTab){h=b[p];var q=c;p+1<b.length&&(q=b[p+1]);p=-parseInt(this.$tabScroll.css("left"));
b=a-e;h<p?(this._tabScrollPos=h-this.LEFT_TAB_BUFFER,0>this._tabScrollPos&&(this._tabScrollPos=0)):q-p>b&&(this._tabScrollPos=q-b+this.LEFT_TAB_BUFFER);break}this._canScrollTabs=!1;if(c>a-e){if(this._canScrollTabs=!0,this.$buttonBar.append(this.$tabRight),this.$buttonBar.append(this.$tabLeft),e+=this.$tabRight.outerWidth(),e+=this.$tabLeft.outerWidth(),b=c-(a-e)/2,this._tabScrollPos>b)for(h=this.$tabScroll.children(),p=0;p<h.length;++p)if(a=$(h[p]),c=d(a)-g,c+a.outerWidth()>b){this._tabScrollPos=
c-this.LEFT_TAB_BUFFER;0>this._tabScrollPos&&(this._tabScrollPos=0);break}}else this._tabScrollPos=0,this.$tabLeft.remove(),this.$tabRight.remove();this.$tabScroll.stop().animate({left:-this._tabScrollPos+"px"},"fast")},__onTabChange:function(){var h=0,d=this.layout(this._curTab);if(d){this.$center.toggleClass("wcScrollableX",d._scrollable.x);this.$center.toggleClass("wcScrollableY",d._scrollable.y);this.$center.toggleClass("wcOverflowVisible",d._overflowVisible);this.$tabLeft.remove();this.$tabRight.remove();
d._closeable?(this.$close.show(),h+=this.$close.outerWidth()):this.$close.hide();this._canScrollTabs&&(this.$tabBar.append(this.$tabRight),this.$tabBar.append(this.$tabLeft),h+=this.$tabRight.outerWidth()+this.$tabLeft.outerWidth());var b=this.fitContents(this._curTab);if(b.x){var c=d.scene().outerWidth();if(this._tabOrientation===m.TAB.LEFT||this._tabOrientation===m.TAB.RIGHT)c+=this.$tabScroll.height();this.$container.css("width",c)}else this.$container.css("width","");if(b.y){b=d.scene().outerHeight();
if(this._tabOrientation===m.TAB.TOP||this._tabOrientation===m.TAB.BOTTOM)b+=this.$tabScroll.height();this.$container.css("height",b)}else this.$container.css("height","");switch(this._tabOrientation){case m.TAB.RIGHT:case m.TAB.LEFT:this.$tabBar.css("width",this.$center.height()||"100%");break;case m.TAB.TOP:case m.TAB.BOTTOM:this.$tabBar.css("width",this.$center.width()||"100%")}this.$center.scrollLeft(d._scroll.x);this.$center.scrollTop(d._scroll.y)}this.$buttonBar.css("min-width",h).css("width",
h);return h},__scrolled:function(){var h=this.layout(this._curTab);h._scroll.x=this.$center.scrollLeft();h._scroll.y=this.$center.scrollTop()},__container:function(h){if("undefined"===typeof h)return this.$container;(this.$container=h)?this.$container.append(this.$frame):this.$frame.remove();return this.$container},__destroy:function(){var h=this.docker();if(h){var d=h._tabList.indexOf(this);-1<d&&h._tabList.splice(d,1)}for(;this._boundEvents.length;)this._parent.off(this._boundEvents[0].event,this._boundEvents[0].handler),
this._boundEvents.shift();this._curTab=-1;for(h=0;h<this._layoutList.length;++h)this._layoutList[h].__destroy();for(;this._layoutList.length;)this._layoutList.pop();this.__container(null);this._parent=null}})})},"xide/xide":function(){},"dojo/data/ItemFileReadStore":function(){define("../_base/kernel ../_base/lang ../_base/declare ../_base/array ../_base/xhr ../Evented ./util/filter ./util/simpleFetch ../date/stamp".split(" "),function(n,m,k,h,d,b,c,g,p){k=k("dojo.data.ItemFileReadStore",[b],{constructor:function(a){this._arrayOfAllItems=
[];this._arrayOfTopLevelItems=[];this._loadFinished=!1;this.url=this._ccUrl=this._jsonFileUrl=a.url;this._jsonData=a.data;this.data=null;this._datatypeMap=a.typeMap||{};this._datatypeMap.Date||(this._datatypeMap.Date={type:Date,deserialize:function(a){return p.fromISOString(a)}});this._features={"dojo.data.api.Read":!0,"dojo.data.api.Identity":!0};this._itemsByIdentity=null;this._storeRefPropName="_S";this._itemNumPropName="_0";this._rootItemPropName="_RI";this._reverseRefMap="_RRM";this._loadInProgress=
!1;this._queuedFetches=[];void 0!==a.urlPreventCache&&(this.urlPreventCache=a.urlPreventCache?!0:!1);void 0!==a.hierarchical&&(this.hierarchical=a.hierarchical?!0:!1);a.clearOnClose&&(this.clearOnClose=!0);"failOk"in a&&(this.failOk=a.failOk?!0:!1)},url:"",_ccUrl:"",data:null,typeMap:null,clearOnClose:!1,urlPreventCache:!1,failOk:!1,hierarchical:!0,_assertIsItem:function(a){if(!this.isItem(a))throw Error(this.declaredClass+": Invalid item argument.");},_assertIsAttribute:function(a){if("string"!==
typeof a)throw Error(this.declaredClass+": Invalid attribute argument.");},getValue:function(a,b,c){a=this.getValues(a,b);return 0<a.length?a[0]:c},getValues:function(a,b){this._assertIsItem(a);this._assertIsAttribute(b);return(a[b]||[]).slice(0)},getAttributes:function(a){this._assertIsItem(a);var b=[],c;for(c in a)c!==this._storeRefPropName&&c!==this._itemNumPropName&&c!==this._rootItemPropName&&c!==this._reverseRefMap&&b.push(c);return b},hasAttribute:function(a,b){this._assertIsItem(a);this._assertIsAttribute(b);
return b in a},containsValue:function(a,b,g){var e=void 0;"string"===typeof g&&(e=c.patternToRegExp(g,!1));return this._containsValue(a,b,g,e)},_containsValue:function(a,b,c,g){return h.some(this.getValues(a,b),function(a){if(null!==a&&!m.isObject(a)&&g){if(a.toString().match(g))return!0}else if(c===a)return!0})},isItem:function(a){return a&&a[this._storeRefPropName]===this&&this._arrayOfAllItems[a[this._itemNumPropName]]===a?!0:!1},isItemLoaded:function(a){return this.isItem(a)},loadItem:function(a){this._assertIsItem(a.item)},
getFeatures:function(){return this._features},getLabel:function(a){if(this._labelAttr&&this.isItem(a))return this.getValue(a,this._labelAttr)},getLabelAttributes:function(a){return this._labelAttr?[this._labelAttr]:null},filter:function(a,b,g){var e=[],q,d;if(a.query){var p;q=a.queryOptions?a.queryOptions.ignoreCase:!1;var h={};for(d in a.query)p=a.query[d],"string"===typeof p?h[d]=c.patternToRegExp(p,q):p instanceof RegExp&&(h[d]=p);for(q=0;q<b.length;++q){var k=!0,z=b[q];if(null===z)k=!1;else for(d in a.query)p=
a.query[d],this._containsValue(z,d,p,h[d])||(k=!1);k&&e.push(z)}}else for(q=0;q<b.length;++q)d=b[q],null!==d&&e.push(d);g(e,a)},_fetchItems:function(a,b,c){var e=this;if(this._loadFinished)this.filter(a,this._getItemsArray(a.queryOptions),b);else if(this._jsonFileUrl!==this._ccUrl?(n.deprecated(this.declaredClass+": ","To change the url, set the url property of the store, not _jsonFileUrl.  _jsonFileUrl support will be removed in 2.0"),this.url=this._ccUrl=this._jsonFileUrl):this.url!==this._ccUrl&&
(this._ccUrl=this._jsonFileUrl=this.url),null!=this.data&&(this._jsonData=this.data,this.data=null),this._jsonFileUrl)if(this._loadInProgress)this._queuedFetches.push({args:a,filter:m.hitch(e,"filter"),findCallback:m.hitch(e,b)});else{this._loadInProgress=!0;var g=d.get({url:e._jsonFileUrl,handleAs:"json-comment-optional",preventCache:this.urlPreventCache,failOk:this.failOk});g.addCallback(function(g){try{e._getItemsFromLoadedData(g),e._loadFinished=!0,e._loadInProgress=!1,e.filter(a,e._getItemsArray(a.queryOptions),
b),e._handleQueuedFetches()}catch(x){e._loadFinished=!0,e._loadInProgress=!1,c(x,a)}});g.addErrback(function(b){e._loadInProgress=!1;c(b,a)});var q=null;a.abort&&(q=a.abort);a.abort=function(){var b=g;b&&-1===b.fired&&(b.cancel(),b=null);q&&q.call(a)}}else if(this._jsonData)try{this._loadFinished=!0,this._getItemsFromLoadedData(this._jsonData),this._jsonData=null,e.filter(a,this._getItemsArray(a.queryOptions),b)}catch(v){c(v,a)}else c(Error(this.declaredClass+": No JSON source data was provided as either URL or a nested Javascript object."),
a)},_handleQueuedFetches:function(){if(0<this._queuedFetches.length){for(var a=0;a<this._queuedFetches.length;a++){var b=this._queuedFetches[a],c=b.args,g=b.filter,b=b.findCallback;g?g(c,this._getItemsArray(c.queryOptions),b):this.fetchItemByIdentity(c)}this._queuedFetches=[]}},_getItemsArray:function(a){return a&&a.deep?this._arrayOfAllItems:this._arrayOfTopLevelItems},close:function(a){this.clearOnClose&&this._loadFinished&&!this._loadInProgress&&(this._arrayOfAllItems=[],this._arrayOfTopLevelItems=
[],this._loadFinished=!1,this._itemsByIdentity=null,this._loadInProgress=!1,this._queuedFetches=[])},_getItemsFromLoadedData:function(a){function b(a){return null!==a&&"object"===typeof a&&(!m.isArray(a)||g)&&!m.isFunction(a)&&(a.constructor==Object||m.isArray(a))&&"undefined"===typeof a._reference&&"undefined"===typeof a._type&&"undefined"===typeof a._value&&d.hierarchical}function c(a){d._arrayOfAllItems.push(a);for(var e in a){var g=a[e];if(g)if(m.isArray(g))for(var q=0;q<g.length;++q){var r=g[q];
b(r)&&c(r)}else b(g)&&c(g)}}var g=!1,d=this;this._labelAttr=a.label;var r,p;this._arrayOfAllItems=[];this._arrayOfTopLevelItems=a.items;for(r=0;r<this._arrayOfTopLevelItems.length;++r)p=this._arrayOfTopLevelItems[r],m.isArray(p)&&(g=!0),c(p),p[this._rootItemPropName]=!0;var h={},k;for(r=0;r<this._arrayOfAllItems.length;++r)for(k in p=this._arrayOfAllItems[r],p){if(k!==this._rootItemPropName){var z=p[k];null!==z?m.isArray(z)||(p[k]=[z]):p[k]=[null]}h[k]=k}for(;h[this._storeRefPropName];)this._storeRefPropName+=
"_";for(;h[this._itemNumPropName];)this._itemNumPropName+="_";for(;h[this._reverseRefMap];)this._reverseRefMap+="_";if(h=a.identifier)for(this._itemsByIdentity={},this._features["dojo.data.api.Identity"]=h,r=0;r<this._arrayOfAllItems.length;++r)if(p=this._arrayOfAllItems[r],a=p[h],a=a[0],Object.hasOwnProperty.call(this._itemsByIdentity,a)){if(this._jsonFileUrl)throw Error(this.declaredClass+":  The json data as specified by: ["+this._jsonFileUrl+"] is malformed.  Items within the list have identifier: ["+
h+"].  Value collided: ["+a+"]");if(this._jsonData)throw Error(this.declaredClass+":  The json data provided by the creation arguments is malformed.  Items within the list have identifier: ["+h+"].  Value collided: ["+a+"]");}else this._itemsByIdentity[a]=p;else this._features["dojo.data.api.Identity"]=Number;for(r=0;r<this._arrayOfAllItems.length;++r)p=this._arrayOfAllItems[r],p[this._storeRefPropName]=this,p[this._itemNumPropName]=r;for(r=0;r<this._arrayOfAllItems.length;++r)for(k in p=this._arrayOfAllItems[r],
p)for(a=p[k],h=0;h<a.length;++h)if(z=a[h],null!==z&&"object"==typeof z){if("_type"in z&&"_value"in z){var y=z._type,n=this._datatypeMap[y];if(n)if(m.isFunction(n))a[h]=new n(z._value);else if(m.isFunction(n.deserialize))a[h]=n.deserialize(z._value);else throw Error("dojo.data.ItemFileReadStore: Value provided in typeMap was neither a constructor, nor a an object with a deserialize function");else throw Error("dojo.data.ItemFileReadStore: in the typeMap constructor arg, no object class was specified for the datatype '"+
y+"'");}if(z._reference){z=z._reference;if(m.isObject(z))for(y=0;y<this._arrayOfAllItems.length;++y){var n=this._arrayOfAllItems[y],C=!0,E;for(E in z)n[E]!=z[E]&&(C=!1);C&&(a[h]=n)}else a[h]=this._getItemByIdentity(z);this.referenceIntegrity&&(z=a[h],this.isItem(z)&&this._addReferenceToMap(z,p,k))}else this.isItem(z)&&this.referenceIntegrity&&this._addReferenceToMap(z,p,k)}},_addReferenceToMap:function(a,b,c){},getIdentity:function(a){var b=this._features["dojo.data.api.Identity"];return b===Number?
a[this._itemNumPropName]:(a=a[b])?a[0]:null},fetchItemByIdentity:function(a){var b,c;if(this._loadFinished)b=this._getItemByIdentity(a.identity),a.onItem&&(c=a.scope?a.scope:n.global,a.onItem.call(c,b));else{var g=this;this._jsonFileUrl!==this._ccUrl?(n.deprecated(this.declaredClass+": ","To change the url, set the url property of the store, not _jsonFileUrl.  _jsonFileUrl support will be removed in 2.0"),this.url=this._ccUrl=this._jsonFileUrl):this.url!==this._ccUrl&&(this._ccUrl=this._jsonFileUrl=
this.url);null!=this.data&&null==this._jsonData&&(this._jsonData=this.data,this.data=null);this._jsonFileUrl?this._loadInProgress?this._queuedFetches.push({args:a}):(this._loadInProgress=!0,c=d.get({url:g._jsonFileUrl,handleAs:"json-comment-optional",preventCache:this.urlPreventCache,failOk:this.failOk}),c.addCallback(function(e){var c=a.scope?a.scope:n.global;try{g._getItemsFromLoadedData(e),g._loadFinished=!0,g._loadInProgress=!1,b=g._getItemByIdentity(a.identity),a.onItem&&a.onItem.call(c,b),g._handleQueuedFetches()}catch(v){g._loadInProgress=
!1,a.onError&&a.onError.call(c,v)}}),c.addErrback(function(b){g._loadInProgress=!1;a.onError&&a.onError.call(a.scope?a.scope:n.global,b)})):this._jsonData&&(g._getItemsFromLoadedData(g._jsonData),g._jsonData=null,g._loadFinished=!0,b=g._getItemByIdentity(a.identity),a.onItem&&(c=a.scope?a.scope:n.global,a.onItem.call(c,b)))}},_getItemByIdentity:function(a){var b=null;this._itemsByIdentity?Object.hasOwnProperty.call(this._itemsByIdentity,a)&&(b=this._itemsByIdentity[a]):Object.hasOwnProperty.call(this._arrayOfAllItems,
a)&&(b=this._arrayOfAllItems[a]);void 0===b&&(b=null);return b},getIdentityAttributes:function(a){a=this._features["dojo.data.api.Identity"];return a===Number?null:[a]},_forceLoad:function(){var a=this;this._jsonFileUrl!==this._ccUrl?(n.deprecated(this.declaredClass+": ","To change the url, set the url property of the store, not _jsonFileUrl.  _jsonFileUrl support will be removed in 2.0"),this.url=this._ccUrl=this._jsonFileUrl):this.url!==this._ccUrl&&(this._ccUrl=this._jsonFileUrl=this.url);null!=
this.data&&(this._jsonData=this.data,this.data=null);if(this._jsonFileUrl){var b=d.get({url:this._jsonFileUrl,handleAs:"json-comment-optional",preventCache:this.urlPreventCache,failOk:this.failOk,sync:!0});b.addCallback(function(b){try{if(!0!==a._loadInProgress&&!a._loadFinished)a._getItemsFromLoadedData(b),a._loadFinished=!0;else if(a._loadInProgress)throw Error(this.declaredClass+":  Unable to perform a synchronous load, an async load is in progress.");}catch(u){throw u;}});b.addErrback(function(a){throw a;
})}else this._jsonData&&(a._getItemsFromLoadedData(a._jsonData),a._jsonData=null,a._loadFinished=!0)}});m.extend(k,g);return k})},"dojo/dnd/Selector":function(){define("../_base/array ../_base/declare ../_base/kernel ../_base/lang ../dom ../dom-construct ../mouse ../_base/NodeList ../on ../touch ./common ./Container".split(" "),function(n,m,k,h,d,b,c,g,p,a,e,q){var u=m("dojo.dnd.Selector",q,{constructor:function(b,e){e||(e={});this.singular=e.singular;this.autoSync=e.autoSync;this.selection={};this.anchor=
null;this.simpleSelection=!1;this.events.push(p(this.node,a.press,h.hitch(this,"onMouseDown")),p(this.node,a.release,h.hitch(this,"onMouseUp")))},singular:!1,getSelectedNodes:function(){var a=new g,b=e._empty,c;for(c in this.selection)c in b||a.push(d.byId(c));return a},selectNone:function(){return this._removeSelection()._removeAnchor()},selectAll:function(){this.forInItems(function(a,b){this._addItemClass(d.byId(b),"Selected");this.selection[b]=1},this);return this._removeAnchor()},deleteSelectedNodes:function(){var a=
e._empty,c;for(c in this.selection)if(!(c in a)){var g=d.byId(c);this.delItem(c);b.destroy(g)}this.anchor=null;this.selection={};return this},forInSelectedItems:function(a,b){b=b||k.global;var c=this.selection,g=e._empty,q;for(q in c)q in g||a.call(b,this.getItem(q),q,this)},sync:function(){u.superclass.sync.call(this);this.anchor&&!this.getItem(this.anchor.id)&&(this.anchor=null);var a=[],b=e._empty,c;for(c in this.selection)c in b||this.getItem(c)||a.push(c);n.forEach(a,function(a){delete this.selection[a]},
this);return this},insertNodes:function(a,b,e,c){var g=this._normalizedCreator;this._normalizedCreator=function(b,e){b=g.call(this,b,e);a?(this.anchor?this.anchor!=b.node&&(this._removeItemClass(b.node,"Anchor"),this._addItemClass(b.node,"Selected")):(this.anchor=b.node,this._removeItemClass(b.node,"Selected"),this._addItemClass(this.anchor,"Anchor")),this.selection[b.node.id]=1):(this._removeItemClass(b.node,"Selected"),this._removeItemClass(b.node,"Anchor"));return b};u.superclass.insertNodes.call(this,
b,e,c);this._normalizedCreator=g;return this},destroy:function(){u.superclass.destroy.call(this);this.selection=this.anchor=null},onMouseDown:function(a){this.autoSync&&this.sync();if(this.current)if(!this.singular&&!e.getCopyKeyState(a)&&!a.shiftKey&&this.current.id in this.selection)this.simpleSelection=!0,c.isLeft(a)&&(a.stopPropagation(),a.preventDefault());else{if(!this.singular&&a.shiftKey){e.getCopyKeyState(a)||this._removeSelection();var b=this.getAllNodes();if(b.length&&(this.anchor||(this.anchor=
b[0],this._addItemClass(this.anchor,"Anchor")),this.selection[this.anchor.id]=1,this.anchor!=this.current)){for(var g=0,q;g<b.length&&(q=b[g],q!=this.anchor&&q!=this.current);++g);for(++g;g<b.length;++g){q=b[g];if(q==this.anchor||q==this.current)break;this._addItemClass(q,"Selected");this.selection[q.id]=1}this._addItemClass(this.current,"Selected");this.selection[this.current.id]=1}}else this.singular?this.anchor==this.current?e.getCopyKeyState(a)&&this.selectNone():(this.selectNone(),this.anchor=
this.current,this._addItemClass(this.anchor,"Anchor"),this.selection[this.current.id]=1):e.getCopyKeyState(a)?this.anchor==this.current?(delete this.selection[this.anchor.id],this._removeAnchor()):this.current.id in this.selection?(this._removeItemClass(this.current,"Selected"),delete this.selection[this.current.id]):(this.anchor&&(this._removeItemClass(this.anchor,"Anchor"),this._addItemClass(this.anchor,"Selected")),this.anchor=this.current,this._addItemClass(this.current,"Anchor"),this.selection[this.current.id]=
1):this.current.id in this.selection||(this.selectNone(),this.anchor=this.current,this._addItemClass(this.current,"Anchor"),this.selection[this.current.id]=1);a.stopPropagation();a.preventDefault()}},onMouseUp:function(){this.simpleSelection&&(this.simpleSelection=!1,this.selectNone(),this.current&&(this.anchor=this.current,this._addItemClass(this.anchor,"Anchor"),this.selection[this.current.id]=1))},onMouseMove:function(){this.simpleSelection=!1},onOverEvent:function(){this.onmousemoveEvent=p(this.node,
a.move,h.hitch(this,"onMouseMove"))},onOutEvent:function(){this.onmousemoveEvent&&(this.onmousemoveEvent.remove(),delete this.onmousemoveEvent)},_removeSelection:function(){var a=e._empty,b;for(b in this.selection)if(!(b in a)){var c=d.byId(b);c&&this._removeItemClass(c,"Selected")}this.selection={};return this},_removeAnchor:function(){this.anchor&&(this._removeItemClass(this.anchor,"Anchor"),this.anchor=null);return this}});return u})},"davinci/actions/LogoutAction":function(){define(["dojo/_base/declare",
"./Action","davinci/lang/ui"],function(n,m,k){return n("davinci.actions.LogoutAction",m,{run:function(){dojo.xhrPost({url:"../logout",handleAs:"text",headers:{"Content-Type":"application/x-www-form-urlencoded","Orion-Version":"1"},postData:"",load:function(h,d){location.href="welcome"}.bind(this)})},isEnabled:function(h){return!0}})})},"dgrid/OnDemandList":function(){define("./List ./_StoreMixin dojo/_base/declare dojo/_base/lang dojo/dom-construct dojo/on dojo/when ./util/misc".split(" "),function(n,
m,k,h,d,b,c,g){return k([n,m],{minRowsPerPage:2500,maxRowsPerPage:250,maxEmptySpace:Infinity,bufferRows:10,farOffRemoval:2E3,queryRowsOverlap:0,pagingMethod:"debounce",pagingDelay:g.defaultDelay,keepScrollPosition:!0,rowHeight:0,postCreate:function(){this.inherited(arguments);var c=this;b(this.bodyNode,"scroll",g[this.pagingMethod](function(a){c._processScroll(a)},null,this.pagingDelay))},destroy:function(){this.inherited(arguments);this._refreshTimeout&&clearTimeout(this._refreshTimeout)},renderQuery:function(b,
a){var e=this,g=a&&a.container||this.contentNode,p={query:b,count:0},w,r=this.preload,v={node:d.create("div",{className:"dgrid-preload",style:{height:"0"}},g),count:0,query:b,next:p};v.node.rowIndex=0;p.node=w=d.create("div",{className:"dgrid-preload"},g);p.previous=v;w.rowIndex=this.minRowsPerPage;r?((p.next=r.next)&&w.offsetTop>=r.node.offsetTop?p.previous=r:(p.next=r,p.previous=r.previous),p.previous.next=p,p.next.previous=p):this.preload=p;var x=d.create("div",{className:"dgrid-loading"},w,"before");
d.create("div",{className:"dgrid-below"},x).innerHTML=this.loadingMessage;a=h.mixin({start:0,count:this.minRowsPerPage},"level"in b?{queryLevel:b.level}:null);return this._trackError(function(){var g=b(a);return e.renderQueryResults(g,w,a).then(function(b){return g.totalLength.then(function(g){var q=b.length,r=w.parentNode,u=e.noDataNode;e._rows&&(e._rows.min=0,e._rows.max=q===g?Infinity:q-1);d.destroy(x);"queryLevel"in a||(e._total=g);0===g&&r&&(u&&(d.destroy(u),delete e.noDataNode),e.noDataNode=
u=d.create("div",{className:"dgrid-no-data",innerHTML:e.noDataMessage}),e._emit("noData"),r.insertBefore(u,e._getFirstRowSibling(r)));for(u=r=0;u<q;u++)r+=e._calcRowHeight(b[u]);q&&r&&(e.rowHeight=r/q);g-=q;p.count=g;w.rowIndex=q;g?w.style.height=Math.min(g*e.rowHeight,e.maxEmptySpace)+"px":w.style.display="none";e._previousScrollPosition&&(e.scrollTo(e._previousScrollPosition),delete e._previousScrollPosition);return c(e._processScroll()).then(function(){return b})})}).otherwise(function(a){d.destroy(x);
throw a;})})},refresh:function(c){var a=this;c&&c.keepScrollPosition&&(this._previousScrollPosition=this.getScrollPosition());this.inherited(arguments);if(this._renderedCollection)return this.renderQuery(function(b){return a._renderedCollection.fetchRange({start:b.start,end:b.start+b.count})}).then(function(){a._refreshTimeout=setTimeout(function(){b.emit(a.domNode,"dgrid-refresh-complete",{bubbles:!0,cancelable:!1,grid:a});a._refreshTimeout=null},0)})},resize:function(){this.inherited(arguments);
this._processScroll()},cleanup:function(){this.inherited(arguments);this.preload=null},renderQueryResults:function(b){var a=this.inherited(arguments),e=this._renderedCollection;e&&e.releaseRange&&a.then(function(a){a[0]&&!a[0].parentNode.tagName&&b.totalLength.then(function(){e.releaseRange(a[0].rowIndex,a[a.length-1].rowIndex+1)})});return a},_getFirstRowSibling:function(b){return b.lastChild},_calcRowHeight:function(b){var a=b.nextSibling;return a&&!/\bdgrid-preload\b/.test(a.className)?a.offsetTop-
b.offsetTop:b.offsetHeight},lastScrollTop:0,_processScroll:function(b){function a(a,b,c,q){var r=g.farOffRemoval,p=a.node;if(b>2*r){for(var u,v=p[c],h=0,w=0,x=[],k=v&&v.rowIndex,A;u=v;){var z=g._calcRowHeight(u);if(h+z+r>b||0>v.className.indexOf("dgrid-row")&&0>v.className.indexOf("dgrid-loading"))break;v=u[c];h+=z;w+=u.count||1;g.removeRow(u,!0);x.push(u);"rowIndex"in u&&(A=u.rowIndex)}g._renderedCollection.releaseRange&&"number"===typeof k&&"number"===typeof A&&(q?g._renderedCollection.releaseRange(A,
k+1):g._renderedCollection.releaseRange(k,A+1),g._rows[q?"max":"min"]=A,g._rows.max>=g._total-1&&(g._rows.max=Infinity));a.count+=w;q?(p.rowIndex-=w,e(a)):p.style.height=p.offsetHeight+h+"px";var y=document.createElement("div");for(a=x.length;a--;)y.appendChild(x[a]);setTimeout(function(){d.destroy(y)},1)}}function e(a,b){a.node.style.height=Math.min(a.count*g.rowHeight,b?Infinity:g.maxEmptySpace)+"px"}function c(a,b){do a=b?a.next:a.previous;while(a&&!a.node.offsetWidth);return a}if(this.rowHeight){var g=
this,p=g.bodyNode;b=b&&b.scrollTop||this.getScrollPosition().y;var p=p.offsetHeight+b,r,v,h=g.preload,k=g.lastScrollTop,z=g.bufferRows*g.rowHeight,y=z-g.rowHeight,m,n=!0;for(g.lastScrollTop=b;h&&!h.node.offsetWidth;)h=h.previous;for(;h&&h!==r;){r=g.preload;g.preload=h;v=h.node;var E=v.offsetTop;if(p+1+y<E)h=c(h,n=!1);else if(b-1-y>E+v.offsetHeight)h=c(h,n=!0);else{var E=((v.rowIndex?b-z:p)-E)/g.rowHeight,F=(p-b+2*z)/g.rowHeight,F=F+Math.min(Math.abs(Math.max(Math.min((b-k)*g.rowHeight,g.maxRowsPerPage/
2),g.maxRowsPerPage/-2)),10);0===v.rowIndex&&(E-=F);E=Math.max(E,0);10>E&&0<E&&F+E<g.maxRowsPerPage&&(F+=Math.max(0,E),E=0);F=Math.min(Math.max(F,g.minRowsPerPage),g.maxRowsPerPage,h.count);if(0===F)h=c(h,n);else{var F=Math.ceil(F),E=Math.min(Math.floor(E),h.count-F),G={};h.count-=F;var D=v,H,J=g.queryRowsOverlap,Q=(0<v.rowIndex||v.offsetTop>b)&&h;if(Q){var N=h.previous;N&&(a(N,b-(N.node.offsetTop+N.node.offsetHeight),"nextSibling"),0<E&&N.node===v.previousSibling?(E=Math.min(h.count,E),h.previous.count+=
E,e(h.previous,!0),v.rowIndex+=E,J=0):F+=E,h.count-=E);G.start=v.rowIndex-J;G.count=Math.min(F+J,g.maxRowsPerPage);v.rowIndex=G.start+G.count}else h.next&&(a(h.next,h.next.node.offsetTop-p,"previousSibling",!0),D=v.nextSibling,D===h.next.node?(h.next.count+=h.count-E,h.next.node.rowIndex=E+F,e(h.next),h.count=E,J=0):H=!0),G.start=h.count,G.count=Math.min(F+J,g.maxRowsPerPage);H&&D&&D.offsetWidth&&(H=D.offsetTop);e(h);"level"in h.query&&(G.queryLevel=h.query.level);if("queryLevel"in G||!(G.start>g._total||
0>G.count)){var O=d.create("div",{className:"dgrid-loading",style:{height:F*g.rowHeight+"px"}},D,"before");d.create("div",{className:"dgrid-"+(Q?"below":"above"),innerHTML:g.loadingMessage},O);O.count=F;g._trackError(function(){(function(a,b,c){var q=h.query(G);m=g.renderQueryResults(q,a,G).then(function(r){var p=g._rows;!p||"queryLevel"in G||!r.length||(b?(p.max<=p.min&&(p.min=r[0].rowIndex),p.max=r[r.length-1].rowIndex):(p.max<=p.min&&(p.max=r[r.length-1].rowIndex),p.min=r[0].rowIndex));D=a.nextSibling;
d.destroy(a);c&&D&&D.offsetWidth&&(p=g.getScrollPosition(),g.scrollTo({x:p.x,y:p.y+D.offsetTop-c,preserveMomentum:!0}));q.totalLength.then(function(a){"queryLevel"in G||(g._total=a,g._rows&&g._rows.max>=g._total-1&&(g._rows.max=Infinity));b&&(b.count=a-b.node.rowIndex,e(b))});g._processScroll();return r},function(b){d.destroy(a);throw b;})})(O,Q,H)});h=h.previous}}}}return m}}})})},"xide/Features":function(){define(["xdojo/has","xide/lodash"],function(n,m){"undefined"!==typeof window&&(window.has=
n);m.each("plugins log ribbons xideve files xnode xfile xace drivers debugWidgets consoleError xtrack nserver".split(" "),function(k){n.add(k,function(h,d,b){return-1!==location.href.indexOf(k+"\x3dfalse")?!1:!0},!0,!0)});m.each(["admin"],function(k){n.add(k,function(h,d,b){return-1!==location.href.indexOf(k)?!0:!1},!0,!0)});n.add("phone",function(k,h,d){return/iphone|ipod|android|blackberry|opera|mini|windows\sce|palm|smartphone|iemobile/i.test(navigator.userAgent.toLowerCase())||-1!=location.href.indexOf("forcePhone\x3dtrue")});
n.add("mobile",function(k,h,d){return/iphone|ipod|android|blackberry|opera|mini|windows\sce|palm|smartphone|iemobile/i.test(navigator.userAgent.toLowerCase())})})},"xide/widgets/Ribbon":function(){define("dcl/dcl xide/types xide/utils xide/_base/_Widget xide/mixins/ActionMixin xide/action/ActionContext xide/model/Path xlang/i18 xide/widgets/_MenuMixin4 xide/layout/_TabContainer xide/$ xide/popup".split(" "),function(n,m,k,h,d,b,c,g,p,a,e,q){d=n([h,b.dcl,d.dcl],{templateString:'\x3cdiv class\x3d"mainMenu ribbonToolbar" style\x3d"min-height: 160px"\x3e\x3c/div\x3e',
tabContainer:null,startup:function(){},getRootContainer:function(){this.tabContainer||(this.tabContainer=this.add(k.addWidget(a,{},this,this,!0)));return this.tabContainer}});b=n(null,{renderTopLevel:function(a,b){b=this.getRootContainer();var c=b.getTab("name"),g=null;"window"===a&&console.error("--xxx");c||(c=b.createTab(a),g=e(k.getNode(c)),g.addClass("nav navbar-nav ribbon_tabbar"));return g},renderItem:function(a,b,c,g,q,d,p,h,k,n){a=this.localize(d);n=h.actionType||g.actionType;q=g.getParent?
g.getParent():null;var r=this.getActionProperty(g,h,"closeOnClick");h=" \n";d=null;g.keyboardMappings&&!1!==k&&(k=g.keyboardMappings[0].keys)&&k.length&&(h+=""+k.join(" | ").toUpperCase()+"");if(n===m.ACTION_TYPE.MULTI_TOGGLE){d='\x3cli class\x3d"" \x3e';p=g._store.id+"_"+g.command+"_"+this.id;k=g.get("value");d=d+'\x3cdiv class\x3d"action-checkbox checkbox checkbox-success "\x3e'+('\x3cinput id\x3d"'+p+'" type\x3d"checkbox" '+(!0===k?"checked":"")+"\x3e")+('\x3clabel for\x3d"'+p+'"\x3e')+this.localize(b.text);
d+="\x3c/label\x3e";d+='\x3cspan style\x3d"max-width:100px;margin-right:20px" class\x3d"text-muted pull-right ellipsis keyboardShortCut"\x3e'+h+"\x3c/span\x3e";d+="\x3c/div\x3e";c.addClass("noclose");c=e(d);var u=c.find("INPUT");u.on("change",function(a){g._originReference=b;g._originEvent=a;g.set("value",u[0].checked);g._originReference=null});this.setVisibilityField(g,"widget",b);return c}!1===r&&c.addClass("noclose");n===m.ACTION_TYPE.SINGLE_TOGGLE&&q&&(c=g.value||g.get("value"),k=q.get("value"),
c==k&&(p="fa fa-check"));d='\x3cli class\x3d"ribbon_3rows_button" title\x3d"'+(b.text||a||this.localize(g.title))+" "+h+'"\x3e';c=b.icon||p;"undefined"!==typeof c&&(d=/<[a-z][\s\S]*>/i.test(c)?d+c:d+('\x3cspan style\x3d"" class\x3d"icon '+c+'"/\x3e '));d+='\x3ca class\x3d""\x3e';d+=b.text;d+="\x3c/a\x3e\x3c/li\x3e";this.setVisibilityField(g,"widget",b);return e(d)},onRootAction:function(a,b){return this.renderTopLevel(a,b)}});return n([d,b,p,h.StoreMixin],{target:null,visibility:m.ACTION_VISIBILITY.RIBBON,
attachToGlobal:!1,_tmpActions:null,collapseSmallGroups:3,containerClass:"ribbon_dropdown",init:function(a){if(!this._didInit){this._didInit=!0;var b=this.getDefaultOptions(),b=e.extend({},b,a),c=this;a=e(document);this.__on(a,"click",null,function(a){c.isOpen&&(c.isOpen=!1,c.onClose(a),e(".dropdown-context").css({display:""}).find(".drop-left").removeClass("drop-left"))});b.preventDoubleContext&&this.__on(a,"contextmenu",".dropdown-context",function(a){a.preventDefault()});this.__on(a,"mouseenter",
".dropdown-submenu",function(a){try{var g=e(a.currentTarget),d=g.find(".dropdown-context-sub:first");a=!1;if(0===d.length)if(d=g.data("sub"))a=!0;else return;var r=d.data("data"),p=1===(r?r[0].level:0);if(!c.menu||e.contains(c.menu[0],g[0]))if(g.hasClass("disabled"))d.css("display","none");else if(d.css("display","block"),p){var u=function(){var a=d.data("_popupWrapper");q.close({domNode:d[0],_popupWrapper:a})};d.css("display","initial");d.css("position","initial");a||(g.data("sub",d),d.data("owner",
c),d.on("mouseleave",function(){u()}),g.on("mouseleave",function(){}));q.open({popup:d[0],around:g[0],orient:["below","above"],maxHeight:-1,owner:c,extraClass:"ActionRibbonToolbar",onExecute:function(){c.closeDropDown(!0)},onCancel:function(){u()},onClose:function(){}})}else{d.data("didSetup")||(d.data("didSetup",!0),g.on("mouseleave",function(){d.css("display","")}));d.css({top:0});var v=d.height()+0,h=e("html").height(),w=d.offset(),k=h-(w.top+v);w.top+v>h&&d.css({top:k-30}).fadeIn(b.fadeSpeed);
var m=d.width(),n=d.offset().left;m+n>window.innerWidth&&d.addClass("drop-left")}}catch(J){logError(J)}})}},addContext:function(a,b){var c,g;"undefined"!==typeof b.id&&"undefined"!==typeof b.data?(c=b.id,g=e("body").find("#dropdown-"+c)[0],"undefined"===typeof g&&(g=this.buildMenu(b.data,c),a.append(g))):(c=(new Date).getTime(),g=this.buildMenu(b,c),a.append(g));return g},_did:!1,setActionStore:function(a,b){function q(a,b){var c=e('\x3cdiv class\x3d"ribbon_block_base"\x3e');a.append(c);a=e('\x3cdiv class\x3d"ribbon_block_items"/\x3e');
c.append(a);b=e('\x3cdiv class\x3d"ribbon_block_label_fixed"\x3e'+b+"\x3c/div\x3e");c.append(b);c={root:c,items:a,label:b,count:0};w.push(c);return c}this._clear();this.tabContainer&&(k.destroy(this.tabContainer,!0,this),this.getRootContainer());this._tmpActions=[];this.store=a;this.addActionStore(a);var d=this,p=e(d.getRootContainer()),u=d.buildActionTree(a,b),h=u.allActionPaths,w=[],m="",n=root,E=null,F=[];_.each(u.root,function(a,b){F.push({name:b,size:a.length})});_.each(u.root,function(r,u){u=
d.onRootAction(u,p);m=null;n=u;for(var v=[],w=r.grouped,x=0;x<r.length;x++){var k=r[x],A=d.getAction(k,a),z=!1;A||(z=!0,A=d.createAction(k),d._tmpActions.push(A),d.setVisibilityField(A,"widget",{widget:u,destroy:function(){this.widget.remove()}}));if(A){var y=function(e,g){e=(new c(e)).getChildren(h,!1);if(e=0<e.length?d.toActions(e,a):null){var q=[];_.each(e,function(a){var e=d.getActionData(a),e=d.toMenuItem(a,b,e.label,e.icon,e.visibility,!1);e.level=(g.level||0)+1;d.addReference(a,e);q.push(e);
0<(new c(a.command)).getChildren(h,!1).length&&y(a.command,e)});g.subMenu=q}},C=d.getActionData(A),B=C.icon,F=C.label,G=C.visibility,C=C.group;!z&&C&&w[C]&&m!==C&&(g.localize(C),m=C,E=q(u,C),n=E.items);4<E.count&&(E.target=null,E.count=0);z=E.target;z||(z=e('\x3cdiv class\x3d"dhxrb_3rows_block"/\x3e'),n.append(z),E.target=z);E.count++;B=d.toMenuItem(A,b,F,B,G||{},!1);B.level=0;v.push(B);G.widget=B;d.addReference(A,B);(new c(k)).getChildren(h,!1);y(k,B);d.buildMenuItems(z,[B],"-"+(new Date).getTime())}}});
d.onDidRenderActions(a,b);var G=0;_.each(w,function(a){a=a.root.height();a>G&&(G=a)});G+="px";_.each(w,function(a){a.root.css("height",G)})},startup:function(){this.init({preventDoubleContext:!1})}})})},"davinci/html/CSSFile":function(){define("dojo/_base/declare dojo/_base/lang davinci/html/CSSElement davinci/html/CSSRule davinci/html/CSSSelector system/resource davinci/Workbench".split(" "),function(n,m,k,h,d,b,c){return n("davinci.html.CSSFile",k,{constructor:function(b){this.elementType="CSSFile";
m.mixin(this,b);this.options||(this.options={xmode:"style",css:!0,expandShorthand:!1});b=null;this.url&&this.loader?b=this.loader(this.url):this.url&&"app.css"===this.url&&this.setText("BODY {background-color: red!important;}");b&&this.setText(b)},save:function(c){return b.findResourceAsync(this.url).then(function(b){return b.setContents(this.getText(),c)}.bind(this))},close:function(){this.visit({visit:function(b){"CSSImport"==b.elementType&&b.close()}});require(["dojo/_base/connect"],function(b){b.publish("davinci/model/closeModel",
[this])})},addRule:function(b){var c=new h;c.setText(b);this.addChild(c);this.setDirty(!0);return c},setText:function(b){var c=this.children;this.children=[];this.errors=require("davinci/html/CSSParser").parse(b,this).errors;0<this.errors.length&&this.errors[this.errors.length-1].isException&&(this.children=c);this.includeImports&&this.children.forEach(function(a){"CSSImport"==a.elementType&&a.load()});this.onChange()},getText:function(b){b=b||{};b.indent=0;return this.children.map(function(c){return c.getText(b)}).join("")},
getCSSFile:function(){return this},getID:function(){return this.fileName},getMatchingRules:function(b,c,a){b=this._convertNode(b);c=c||[];a=a||[];for(var e=0;e<this.children.length;e++){var g=this.children[e];if("CSSRule"==g.elementType){var d=g.matches(b);if(d){for(var p=!1,r=0;r<a.length;r++)if(d>=a[r]){c.splice(r,0,g);a.splice(r,0,d);p=!0;break}p||(c.splice(0,0,g),a.splice(0,0,d))}}else"CSSImport"==g.elementType&&g.cssFile&&g.cssFile.getMatchingRules(b,c,a)}return c},getRule:function(b){var c;
if(!b)return[];b=d.parseSelectors(b);for(var a=0;a<this.children.length;a++){var e=this.children[a];if("CSSRule"==e.elementType){if(e.matchesSelectors(b)){c=e;break}}else"CSSImport"==e.elementType&&e.cssFile&&(c=e.cssFile.getRule(b)||c)}return c},getRules:function(b){b=d.parseSelectors(b);for(var c=[],a=0;a<this.children.length;a++){var e=this.children[a];"CSSRule"==e.elementType?e.matchesSelectors(b)&&c.push(e):"CSSImport"==e.elementType&&e.cssFile&&(c=c.concat(e.cssFile.getRules(b)))}return c},
getStyleValue:function(b,c){var a=[],e=[];c=this._convertNode(c);this.getMatchingRules(c,a,e);"string"==typeof b&&(b=[b]);return b.map(function(b){for(var c=0,g,q,d=0;d<a.length;d++)(q=a[d].getProperty(b))&&e[d]>c&&(g=q,c=e[d]);return g})}})})},"dijit/MenuBarItem":function(){define(["dojo/_base/declare","./MenuItem","dojo/text!./templates/MenuBarItem.html"],function(n,m,k){k=n("dijit._MenuBarItemMixin",null,{templateString:k,_setIconClassAttr:null});n=n("dijit.MenuBarItem",[m,k],{});n._MenuBarItemMixin=
k;return n})},"davinci/model/resource/Resource":function(){define("dojo/_base/declare dojo/_base/xhr dojo/_base/connect dojo/Deferred davinci/Runtime davinci/model/Model davinci/model/Path xide/manager/ServerActionBase".split(" "),function(n,m,k,h,d,b,c,g){return n("davinci.model.resource.Resource",[b,g],{singleton:!0,sync:!1,workspaceMount:"/ws/",_initService:function(){var b=this.findServiceUrl(this.declaredClass);b&&(this.serviceUrl=b);this.inherited(arguments)},constructor:function(){this.elementType=
"Resource";this.name="";this.parent=null;this._id=dijit.getUniqueId("maqFileResource");this.init()},getName:function(){return this.name},getPath:function(){return this.parent?this.parent.getPath()+"/"+this.name:this.name},readOnly:function(){return this.hasOwnProperty("_readOnly")?this._readOnly||null!=this.parent&&this.parent.readOnly():this.parent?this.parent.readOnly():!1},getURL:function(){var b=this.getPath();0==b.indexOf("./")&&(b=b.substring(2,b.length));return d.getUserWorkspaceUrl()+b},rename:function(b){var a=
(new c(this.getPath())).removeLastSegments().append(b);return m.get({url:"cmd/rename",handleAs:"text",content:{oldName:this.getPath(),newName:a.toString()}}).then(function(){this.name=b;k.publish("/davinci/resource/resourceChanged",["renamed",this])}.bind(this))},getParentFolder:function(){return"File"==this.elementType?this.parent:this},isVirtual:function(){return!!this.libraryId},visit:function(b,a){var e=b.visit(this);this._isLoaded||"Folder"!=this.elementType||a?this.children&&!e&&dojo.forEach(this.children,
function(e){e.visit(b,a)}):this.getChildren(dojo.hitch(this,function(){dojo.forEach(this.children,function(e){e.visit(b,a)})}))},deleteResource:function(b){var a=""+this.getPath();"."==a&&(a=""+this.workspaceMount);var a=a.replace("./",this.workspaceMount),e=this.serviceClass,c="Folder"==this.elementType?"deleteDirectory":"deleteFile",g=function(){var a=this.getName();this.parent.children.some(function(b,e,c){if(b.getName()==a)return c.splice(e,1),!0});k.publish("/davinci/resource/resourceChanged",
["deleted",this])}.bind(this);b?(b=new h,g(),b.resolve()):b=this.serviceObject[e][c](a).then(g,function(){});return b},getId:function(){return this._id}})})},"dijit/form/CheckBox":function(){define("require dojo/_base/declare dojo/dom-attr dojo/has dojo/query dojo/ready ./ToggleButton ./_CheckBoxMixin dojo/text!./templates/CheckBox.html dojo/NodeList-dom ../a11yclick".split(" "),function(n,m,k,h,d,b,c,g,p){h("dijit-legacy-requires")&&b(0,function(){n(["dijit/form/RadioButton"])});return m("dijit.form.CheckBox",
[c,g],{templateString:p,baseClass:"dijitCheckBox",_setValueAttr:function(a,b){"string"==typeof a&&(this.inherited(arguments),a=!0);this._created&&this.set("checked",a,b)},_getValueAttr:function(){return this.checked&&this._get("value")},_setIconClassAttr:null,_setNameAttr:"focusNode",postMixInProperties:function(){this.inherited(arguments);this.checkedAttrSetting=""},_fillContent:function(){},_onFocus:function(){this.id&&d("label[for\x3d'"+this.id+"']").addClass("dijitFocusedLabel");this.inherited(arguments)},
_onBlur:function(){this.id&&d("label[for\x3d'"+this.id+"']").removeClass("dijitFocusedLabel");this.inherited(arguments)}})})},"xide/manager/WindowManager":function(){define("dcl/dcl xide/utils xide/types xide/manager/ManagerBase xide/editor/Registry xide/registry xdojo/has xide/lodash xace/views/Editor".split(" "),function(n,m,k,h,d,b,c,g,p){function a(a,b,e){b.addActionEmitter(a);!1!==e&&b.setActionEmitter(a)}function e(a){var b=a.getPanels();if(a._lastSelected)for(var e=0;e<b.length;e++){var c=
b[e];if(c==a._lastSelected&&(c=c.getFrame()))return c}}return n(h,{declaredClass:"xide.manager.WindowManager",actionReceivers:null,getActions:function(){var a=[],b=this;a.push(this.ctx.createAction("Next","View/Next","fa-cube",["alt num_add"],"Home","View","global",function(a){},function(){var a=b.ctx.mainView.getDocker(),c=e(a);if(c){var g=c._curTab,q=c.panel(g),c=c.panel(g+1);if(q||c)(c||q).select(),(c||q).resize(),a.resize()}},{addPermission:!0,show:!0},null,null,[],window,this));a.push(this.ctx.createAction("Prev",
"View/Prev","fa-cube",["alt num_subtract"],"Home","View","global",function(a){},function(){var a=b.ctx.mainView.getDocker(),c=e(a);if(c){var g=c._curTab,q=c.panel(g),c=c.panel(g-1);if(q||c)(c||q).select(),(c||q).resize(),a.resize()}},{addPermission:!0,show:!0},null,null,[],window,this));return a},init:function(){this.ctx.addActions(this.getActions());this.actionReceivers=[]},addActionReceiver:function(a){-1==this.actionReceivers.indexOf(a)&&(this.actionReceivers.push(a),a._on("destroy",function(){this.actionReceivers.remove(a)},
this))},registerView:function(b,e){var c=this.getToolbar(),q=this.getMainMenu();this.publish(k.EVENTS.ON_OPEN_VIEW,{view:b,menu:q,toolbar:c,src:this});c&&a(b,c,e);q&&a(b,q,e);g.each(this.actionReceivers,function(c){c&&a(b,c,e)});return!0},clearView:function(a,b){b=this.getToolbar();var e=this.getMainMenu();this.getBreadcrumb();b&&b.setActionEmitter(a);e&&e.setActionEmitter(a);return!0},getBreadcrumb:function(){var a=this.ctx.mainView;return a&&a.getBreadcrumb?a.getBreadcrumb():null},getToolbar:function(){return this.ctx.mainView.getToolbar()},
getMainMenu:function(){return this.ctx.mainView.mainMenu},createTab:function(a,b,e){var c=this.getContext().getMainView().getDocker();return c.addTab(null,{title:a,target:e?e._parent:c.getDefaultPanel(),icon:b||"fa-code"})},getDefaultPanel:function(){return this.getContext().getMainView().getDocker().getDefaultPanel()},createDefaultTab:function(a,b){return this.getContext().getMainView().getDocker().addTab(null,{title:a,icon:b})},openItem:function(a,e,c,d){if(!a||!a.getPath)return console.error("invalid item!"),
null;if(!a||a.getPath().match(/^(.*\.(?!(zip|tar|gz|bzip2)$))?[^.]*$/i)){var q=this,r=this.ctx,u=e||b.byId(this.appendTo),h=r.getMainView().getDocker(),w=m.toString(a.name),u=g.isFunction(e)?e({title:w,icon:"fa-code",location:null,tabOrientation:null}):h.addTab(null,{title:w,target:e?e._parent:null,icon:"fa-code"});e={dataItem:a,item:a,filePath:a.path,config:this.config,delegate:this,parentContainer:u,store:this.store,style:"padding:0px;height:inherit;height:width;",iconClass:"fa-code",autoSelect:!0,
ctx:r,storeDelegate:{getContent:function(b){q.ctx.getFileManager().getContent(a.mount,a.path,b)},saveContent:function(b,e,c){q.ctx.getFileManager().setContent(a.mount,a.path,b,e)}},title:w,closable:!0,fileName:a.path};m.mixin(e,c);e=m.addWidget(p,e,this,u,!0,null,null,d);u.resize();e.resize();!1!==d&&u.selectChild&&u.selectChild(e);h.resize();c&&c.register&&this.registerView(e,d);return e}}})})},"dojox/html/entities":function(){define(["dojo/_base/lang"],function(n){var m=n.getObject("dojox.html.entities",
!0),k=function(d,b){var c,g;if(b._encCache&&b._encCache.regexp&&b._encCache.mapper&&b.length==b._encCache.length)c=b._encCache.mapper,g=b._encCache.regexp;else{c={};g=["["];var p;for(p=0;p<b.length;p++)c[b[p][0]]="\x26"+b[p][1]+";",g.push(b[p][0]);g.push("]");g=new RegExp(g.join(""),"g");b._encCache={mapper:c,regexp:g,length:b.length}}return d=d.replace(g,function(a){return c[a]})},h=function(d,b){var c,g;if(b._decCache&&b._decCache.regexp&&b._decCache.mapper&&b.length==b._decCache.length)c=b._decCache.mapper,
g=b._decCache.regexp;else{c={};g=["("];var p;for(p=0;p<b.length;p++){var a="\x26"+b[p][1]+";";p&&g.push("|");c[a]=b[p][0];g.push(a)}g.push(")");g=new RegExp(g.join(""),"g");b._decCache={mapper:c,regexp:g,length:b.length}}return d=d.replace(g,function(a){return c[a]})};m.html=[["\x26","amp"],['"',"quot"],["\x3c","lt"],["\x3e","gt"],["\u00a0","nbsp"]];m.latin=[["\u00a1","iexcl"],["\u00a2","cent"],["\u00a3","pound"],["\u20ac","euro"],["\u00a4","curren"],["\u00a5","yen"],["\u00a6","brvbar"],["\u00a7",
"sect"],["\u00a8","uml"],["\u00a9","copy"],["\u00aa","ordf"],["\u00ab","laquo"],["\u00ac","not"],["\u00ad","shy"],["\u00ae","reg"],["\u00af","macr"],["\u00b0","deg"],["\u00b1","plusmn"],["\u00b2","sup2"],["\u00b3","sup3"],["\u00b4","acute"],["\u00b5","micro"],["\u00b6","para"],["\u00b7","middot"],["\u00b8","cedil"],["\u00b9","sup1"],["\u00ba","ordm"],["\u00bb","raquo"],["\u00bc","frac14"],["\u00bd","frac12"],["\u00be","frac34"],["\u00bf","iquest"],["\u00c0","Agrave"],["\u00c1","Aacute"],["\u00c2",
"Acirc"],["\u00c3","Atilde"],["\u00c4","Auml"],["\u00c5","Aring"],["\u00c6","AElig"],["\u00c7","Ccedil"],["\u00c8","Egrave"],["\u00c9","Eacute"],["\u00ca","Ecirc"],["\u00cb","Euml"],["\u00cc","Igrave"],["\u00cd","Iacute"],["\u00ce","Icirc"],["\u00cf","Iuml"],["\u00d0","ETH"],["\u00d1","Ntilde"],["\u00d2","Ograve"],["\u00d3","Oacute"],["\u00d4","Ocirc"],["\u00d5","Otilde"],["\u00d6","Ouml"],["\u00d7","times"],["\u00d8","Oslash"],["\u00d9","Ugrave"],["\u00da","Uacute"],["\u00db","Ucirc"],["\u00dc",
"Uuml"],["\u00dd","Yacute"],["\u00de","THORN"],["\u00df","szlig"],["\u00e0","agrave"],["\u00e1","aacute"],["\u00e2","acirc"],["\u00e3","atilde"],["\u00e4","auml"],["\u00e5","aring"],["\u00e6","aelig"],["\u00e7","ccedil"],["\u00e8","egrave"],["\u00e9","eacute"],["\u00ea","ecirc"],["\u00eb","euml"],["\u00ec","igrave"],["\u00ed","iacute"],["\u00ee","icirc"],["\u00ef","iuml"],["\u00f0","eth"],["\u00f1","ntilde"],["\u00f2","ograve"],["\u00f3","oacute"],["\u00f4","ocirc"],["\u00f5","otilde"],["\u00f6",
"ouml"],["\u00f7","divide"],["\u00f8","oslash"],["\u00f9","ugrave"],["\u00fa","uacute"],["\u00fb","ucirc"],["\u00fc","uuml"],["\u00fd","yacute"],["\u00fe","thorn"],["\u00ff","yuml"],["\u0192","fnof"],["\u0391","Alpha"],["\u0392","Beta"],["\u0393","Gamma"],["\u0394","Delta"],["\u0395","Epsilon"],["\u0396","Zeta"],["\u0397","Eta"],["\u0398","Theta"],["\u0399","Iota"],["\u039a","Kappa"],["\u039b","Lambda"],["\u039c","Mu"],["\u039d","Nu"],["\u039e","Xi"],["\u039f","Omicron"],["\u03a0","Pi"],["\u03a1",
"Rho"],["\u03a3","Sigma"],["\u03a4","Tau"],["\u03a5","Upsilon"],["\u03a6","Phi"],["\u03a7","Chi"],["\u03a8","Psi"],["\u03a9","Omega"],["\u03b1","alpha"],["\u03b2","beta"],["\u03b3","gamma"],["\u03b4","delta"],["\u03b5","epsilon"],["\u03b6","zeta"],["\u03b7","eta"],["\u03b8","theta"],["\u03b9","iota"],["\u03ba","kappa"],["\u03bb","lambda"],["\u03bc","mu"],["\u03bd","nu"],["\u03be","xi"],["\u03bf","omicron"],["\u03c0","pi"],["\u03c1","rho"],["\u03c2","sigmaf"],["\u03c3","sigma"],["\u03c4","tau"],["\u03c5",
"upsilon"],["\u03c6","phi"],["\u03c7","chi"],["\u03c8","psi"],["\u03c9","omega"],["\u03d1","thetasym"],["\u03d2","upsih"],["\u03d6","piv"],["\u2022","bull"],["\u2026","hellip"],["\u2032","prime"],["\u2033","Prime"],["\u203e","oline"],["\u2044","frasl"],["\u2118","weierp"],["\u2111","image"],["\u211c","real"],["\u2122","trade"],["\u2135","alefsym"],["\u2190","larr"],["\u2191","uarr"],["\u2192","rarr"],["\u2193","darr"],["\u2194","harr"],["\u21b5","crarr"],["\u21d0","lArr"],["\u21d1","uArr"],["\u21d2",
"rArr"],["\u21d3","dArr"],["\u21d4","hArr"],["\u2200","forall"],["\u2202","part"],["\u2203","exist"],["\u2205","empty"],["\u2207","nabla"],["\u2208","isin"],["\u2209","notin"],["\u220b","ni"],["\u220f","prod"],["\u2211","sum"],["\u2212","minus"],["\u2217","lowast"],["\u221a","radic"],["\u221d","prop"],["\u221e","infin"],["\u2220","ang"],["\u2227","and"],["\u2228","or"],["\u2229","cap"],["\u222a","cup"],["\u222b","int"],["\u2234","there4"],["\u223c","sim"],["\u2245","cong"],["\u2248","asymp"],["\u2260",
"ne"],["\u2261","equiv"],["\u2264","le"],["\u2265","ge"],["\u2282","sub"],["\u2283","sup"],["\u2284","nsub"],["\u2286","sube"],["\u2287","supe"],["\u2295","oplus"],["\u2297","otimes"],["\u22a5","perp"],["\u22c5","sdot"],["\u2308","lceil"],["\u2309","rceil"],["\u230a","lfloor"],["\u230b","rfloor"],["\u2329","lang"],["\u232a","rang"],["\u25ca","loz"],["\u2660","spades"],["\u2663","clubs"],["\u2665","hearts"],["\u2666","diams"],["\u0152","OElig"],["\u0153","oelig"],["\u0160","Scaron"],["\u0161","scaron"],
["\u0178","Yuml"],["\u02c6","circ"],["\u02dc","tilde"],["\u2002","ensp"],["\u2003","emsp"],["\u2009","thinsp"],["\u200c","zwnj"],["\u200d","zwj"],["\u200e","lrm"],["\u200f","rlm"],["\u2013","ndash"],["\u2014","mdash"],["\u2018","lsquo"],["\u2019","rsquo"],["\u201a","sbquo"],["\u201c","ldquo"],["\u201d","rdquo"],["\u201e","bdquo"],["\u2020","dagger"],["\u2021","Dagger"],["\u2030","permil"],["\u2039","lsaquo"],["\u203a","rsaquo"]];m.encode=function(d,b){d&&(b?d=k(d,b):(d=k(d,m.html),d=k(d,m.latin)));
return d};m.decode=function(d,b){d&&(b?d=h(d,b):(d=h(d,m.html),d=h(d,m.latin)));return d};return m})},"xgrid/Grid":function(){define(["dojo/_base/declare","xide/types","./Base"],function(n,m,k){n=n("xgrid/Grid",k,{});n.createGridClass=k.createGridClass;n.classFactory=k.classFactory;n.DEFAULT_GRID_FEATURES=m.DEFAULT_GRID_FEATURES;n.DEFAULT_GRID_BASES=k.DEFAULT_GRID_BASES;n.DEFAULT_GRID_OPTIONS=m.DEFAULT_GRID_OPTIONS;n.DEFAULT_GRID_OPTION_KEYS=m.DEFAULT_GRID_OPTION_KEYS;return n})},"xide/data/Model":function(){define(["dcl/dcl",
"dojo/Deferred","dojo/aspect","dojo/when","xide/utils"],function(n,m,k,h,d){function b(a,b){var e=a.schema[b];void 0===e||e instanceof x||(e=new x(e),e._parent=a);e&&(e.name=b);return e}function c(a){var b,e=1;a(function(a,c,g){a&&a.then?(e++,b||(b=new m),a.then(function(a){c(a,g);e--;e||b.resolve()}).then(null,b.reject)):c(a,g)});if(b)return e--,e||b.resolve(),b.promise}function g(){2>q&&w&&(w(),w=null);q--}function p(){return p}var a=[].slice,e=n(null,{declaredClass:"xide/data/Model",schema:{},
additionalProperties:!0,_scenario:"update",constructor:function(a){this.init(a)},refresh:function(a,b){var e=this._store;e&&e.refreshItem(this,a,b)},getStore:function(){return this._store},getParent:function(){return this._store.getSync(this[this._store.parentProperty])},init:function(a){this._scenario="insert";a=this._setValues(a);for(var b in this.schema){var e=this.schema[b];e&&"object"===typeof e&&"default"in e&&!a.hasOwnProperty(b)&&(e=e["default"],a[b]="function"===typeof e?e.call(this):e)}},
_setValues:function(a){return d.mixin(this,a)},_getValues:function(){return this._values||this},save:function(a){var b=this;return h(a&&a.skipValidation?!0:this.validate(),function(a){if(!a)throw b.createValidationError(b.errors);a=b._scenario;b.prepareForSerialization();return b._store&&h(b._store["insert"===a?"add":"put"](b),function(a){b.set(a);b._scenario="update";return b})})},remove:function(){var a=this._store;return a.remove(a.getIdentity(this))},prepareForSerialization:function(){this._scenario=
void 0;this._inherited&&(this._inherited.toJSON=p)},createValidationError:function(a){return Error("Validation error")},property:function(e,c){var g=this.hasOwnProperty("_properties")?this._properties:this._properties=new v,q=g[e];q||(q=b(this,e),q=g[e]=q?d.delegate(q):new x,q.name=e,q._parent=this);return c?q.property.apply(q,a.call(arguments,1)):q},get:function(a){var e,c=this.schema[a];return(c=e||this.schema[a])&&c.valueOf&&(c.valueOf!==A||c.hasCustomGet)?((e=e||this.hasOwnProperty("_properties")&&
this._properties[a])||(e=d.delegate(b(this,a),{name:a,_parent:this})),e.valueOf()):this._getValues()[a]},set:function(a,b){if("object"===typeof a){q++;try{for(var e in a)b=a[e],!a.hasOwnProperty(e)||b&&b.toJSON===p||this.set(e,b)}finally{g()}}else{e=this.schema[a];if(!e&&!this.additionalProperties)return 0;var c=this.hasOwnProperty("_properties")&&this._properties[a];!c&&(b&&"object"===typeof b||e&&e.put!==z)&&(c=this.property(a));c?c.put(b):(e&&e.coerce&&(b=e.coerce(b)),this._getValues()[a]=b);return b}},
observe:function(a,b,e){return this.property(a).observe(b,e)},validate:function(a){},isValid:function(){var a=!0,b;for(b in this.schema){var e=this.hasOwnProperty("_properties")&&this._properties[b];e&&e.errors&&e.errors.length&&(a=!1)}return a}});e.createSubclass=function(a,b){a=n([this].concat(a),b||{});a.extend=function(a){d.mixin(this.prototype,a);return this};return a};var q=0,u,w;(e.nextTurn=function(a){w=a}).atEnd=!0;var r=n(e,{observe:function(a,b){var e;if("string"===typeof a)return console.error("fff"),
this.inherited(arguments);b&&b.onlyFutureUpdates||(e=new r,this._has()&&(e.value=a(this.valueOf())));var c=this._addListener(function(b){b=a(b);e&&e.put(b)});return e?(e.remove=c.remove,e):c},validateOnSet:!1,validators:null,_addListener:function(a){return k.after(this,"onchange",a,!0)},valueOf:function(){return this._get()},_get:function(){return this.value},_has:function(){return this.hasOwnProperty("value")},setValue:function(a){this.value=a},put:function(a){var b=this._get();a=this.coerce(a);
this.errors&&this.set("errors",void 0);var e=this;q++;return h(this.setValue(a,this._parent),function(c){void 0!==c&&(a=c);e.onchange&&e._queueChange(e.onchange,b);var q,d=b&&"object"===typeof b&&!(b instanceof Array),r=a&&"object"===typeof a&&!(a instanceof Array);if(d||r){c={};if(d)for(q in b=b._getValues?b._getValues():b,b)c[q]={old:b[q]};if(r)for(q in a=a._getValues?a._getValues():a,a)(c[q]=c[q]||{}).value=a[q];e._values=r&&a;for(q in c)d=c[q],(r=e._properties&&e._properties[q])&&r.onchange&&
r._queueChange(r.onchange,d.old)}e.validateOnSet&&e.validate();g()})},coerce:function(a){var b=this.type;b&&("string"===b?a=""+a:"number"===b?a=+a:"boolean"===b?a="false"===a||"0"===a||a instanceof Array&&!a.length?!1:!!a:"function"!==typeof b||a instanceof b||(a=new b(a)));return a},addError:function(a){this.set("errors",(this.errors||[]).concat([a]))},checkForErrors:function(a){var b=[];this.type&&!("function"===typeof this.type?a instanceof this.type:this.type===typeof a)&&b.push(a+" is not a "+
this.type);!this.required||null!=a&&""!==a||b.push("required, and it was not present");return b},validate:function(){var a=this,b=this._parent,e=this.validators,g=this.valueOf(),q=[];return h(c(function(c){function d(a){a&&q.push.apply(q,a)}if(e)for(var r=0;r<e.length;r++)c(e[r].checkForErrors(g,a,b),d);c(a.checkForErrors(g,a,b),d)}),function(){if(q.length)return a.set("errors",q),!1;void 0!==a.get("errors")&&a.set("errors",void 0);return!0})},_queueChange:function(a,b){if(!a._queued){a._queued=!0;
var c=this,g=function(){a._queued=!1;a.call(c,c._get(),b)};u&&u.push(g);u||(!e.nextTurn.atEnd||0<q?(u=[g],e.nextTurn(function(){for(var a=0;a<u.length;a++)u[a]();u=null})):g())}},toJSON:function(){return this._values||this}}),v=function(){};v.prototype.toJSON=p;var x=e.Property=n(r,{init:function(a){if("string"===typeof a||"function"===typeof a)a={type:a};a&&d.mixin(this,a)},_get:function(){return this._parent._getValues()[this.name]},_has:function(){return this.name in this._parent._getValues()},
setValue:function(a,b){b._getValues()[this.name]=a}}),A=x.prototype.valueOf,z=x.prototype.put;return e})},"xcf/views/DriverView2":function(){define("dcl/dcl xdojo/declare xdojo/has dojo/on dojo/debounce dojo/dom-construct xide/types xide/utils xgrid/ListRenderer xgrid/Grid xaction/DefaultActions xgrid/Defaults xgrid/Layout xgrid/Focus dgrid/OnDemandGrid xide/mixins/EventedMixin xide/factory xide/views/CIViewMixin xblox/views/BlockGrid xcf/model/Command xcf/model/Variable xide/layout/_Accordion xide/widgets/TemplatedWidgetBase dojo/promise/all dojo/Deferred xgrid/KeyboardNavigation xgrid/Search xide/_base/_Widget xide/views/_LayoutMixin xdocker/Docker2 xide/views/ConsoleView xlog/views/LogGrid xide/widgets/ExpressionEditor module xcf/views/ExpressionConsole xide/views/History xblox/views/ThumbRenderer xblox/views/BlockEditView xfile/views/FilePreview xide/views/_CIPanelDialog xide/widgets/EditBox xide/views/_CIDialog xdojo/has!debug?xide/tests/TestUtils require xcf/views/DriverView_Layout dojo/when xide/console".split(" "),
function(n,m,k,h,d,b,c,g,p,a,e,q,u,w,r,v,x,A,z,y,B,C,E,F,G,D,H,J,Q,N,O,P,L,K,M,U,V,I,T,Z,S,W,R,Y,X,ba,da){function ga(){return m("DriverBlockGridClass",z,{_console:null,_lastConsoleItem:null,toolbarInitiallyHidden:!0,highlightDelay:1E3,propertyStruct:null,resizeToParent:!1,cssClass:"BlockGrid",saveLayout:function(){return this.owner.saveLayout()},restoreLayout:function(){return this.owner.restoreLayout()},formatOrder:function(a,b){if(b){var e=b.getParent?b.getParent():null;a=b.index?b.index():0;if(e){b=
b.numberOfParents?b.numberOfParents():[];for(var e="\x26nbsp;",c=0;c<b;c++)e+="\x26nbsp;";e+="";for(c=0;c<b;c++)e+="-"}else return"\x26nbsp;"+a;return e+"\x26nbsp;"+a}return""},getHistory:function(){this._history||(this._history=new U);return this._history},editBlock2:function(a,b,e){function c(b){_.each(b,function(b){g.onCIChanged&&g.onCIChanged(b.ci,a,b.oldValue,b.newValue,b.ci.dst,q,b.props)});d.showProperties(a,!0)}if(a&&a.canEdit()){var g=this;b="Edit "+a.name;var q=a.getFields(),d=this;return(new Z({title:b,
containerClass:"CIDialog",onOk:function(a){c(a);this.headDfd.resolve(a)},onCancel:function(a){this.headDfd.resolve(a)},cis:q,CIViewClass:I,CIViewOptions:{delegate:this,resizeToParent:!0,ciSort:!1,options:{groupOrder:{General:1,Send:2,Advanced:4,Description:5}},cis:q}})).show()}},onShowProperties:function(a){var b=this._console;if(b&&a){var e=a.send||a.method;b.getConsoleEditor().set("value",e);this._lastConsoleItem=a}},openTerminal:function(a,b){a=this.getSelectedItem()||{};if(this._console)g.destroy(this._console),
g.destroy(this.__bottom),this._console=this.__bottom=null,this.getDocker().resize();else{var e=this.ctx.getDeviceManager();this.getRightPanel("Properties",null,"DefaultTab",{});b=this.getBottomPanel("Console",null,"DefaultTab",null,!1);e=e.openConsole(this.device,b,{value:a.send||a.method});this._lastConsoleItem=a;b.closeable(!1);this._console=e}},openExpressionConsole:function(a,b,e){a=this.ctx;var c=a.getDeviceManager(),q=a.mainView.getDocker();if(b=this.device)return c=c.toDeviceControlInfo(b),
q=q.addTab(null,{title:c.host,icon:"fa-terminal"}),e=g.addWidget(M,{ctx:a,device:b,value:e.userData.value},this,q,!0),this.add(q,null,!1),e},getTypeMap:function(){if(this.typeMap)return this.typeMap;var a=this,b=n(L,{declaredClass:"xide.widgets.ExpressionEditor2",EditorClass:n(O.Editor,{permissions:[ia.SAVE,ia.TOOLBAR,c.ACTION.FULLSCREEN],runAction:function(b){if("Console/Terminal"===b.command)return a.openTerminal(b,this);if("Console/Editor"===b.command)return a.openExpressionConsole(b,this,this.delegate.delegate);
if("Console/Send"===b.command){var e=this.getEditor().getValue(),c=this.delegate.delegate.item;if(c)return c.solve(null,{highlight:!0},!0,e)}return this.inherited(arguments)}}),onAddEditorActions:function(a){var b=a.actions;a=a.owner;var e=_.find(b,{command:"File/Reload"});b.remove(e);b.push(a.createAction({label:"Wizard",command:"Console/Editor",icon:"fa-magic",group:"Console",tab:"Home",mixin:{addPermission:!0},handler:function(){}}))},onCreatedEditor:function(){},onCreatedConsole:function(){}}),
e={};e["xide.widgets.ExpressionEditor"]=b;this.typeMap=e},showProperties:function(a,b){function e(a,b){a&&(a=a.title,b?p.lastSelectedTopTabTitle=a:b||p.lastSelectedTopTabTitle!==a||(p.lastSelectedTopTabTitle=null))}var q=a||this.getSelection()[0],d=this,r=d.getPanelSplitPosition(c.DOCKER.DOCK.RIGHT);if(q&&1!==r){r=this.getRightPanel("Properties",null,"DefaultTab",{});r.closeable(!1);var p=this.getPropertyStruct();if(q!==p._lastItem||!0===b){p&&(p.currentCIView&&this._widgets.remove(p.currentCIView),
p.targetTop&&this._widgets.remove(p.targetTop));this.clearPropertyPanel();p=this.getPropertyStruct();p._lastItem=a;var u=p.targetTop;u||(u=g.addWidget(C,{scrollable:!0,resizeToParent:!0},null,r.containerNode,!0),$(u.domNode).addClass("CIView Accordion"),p.targetTop=u,u._on("show",function(a){e(a.view,!0)}),u._on("hide",function(a){e(a.view,!1)}),$(r.containerNode).css("overflow-y","auto"),this.add(u),$(u.domNode).css("width",$(r.containerNode).width()-10));_.each(u.getChildren(),function(a){u.removeChild(a)});
p.currentCIView&&p.currentCIView.empty();if(q.getFields){var v=q.getFields();for(a=0;a<v.length;a++)v[a]&&(v[a].vertical=!0);var h=new A({getTypeMap:function(){return d.getTypeMap()},ciSort:!1,tabContainerClass:C,tabContainer:p.targetTop,delegate:this,viewStyle:"padding:0px;",autoSelectLast:!0,item:q,source:this.callee,options:{groupOrder:{General:1,Advanced:2,Script:3,Arguments:4,Description:5,Share:6}},cis:v});h.initWithCIS(v);p.currentCIView=h;this.add(h);if(q.onFieldsRendered)q.onFieldsRendered(q,
v);setTimeout(function(){h._on("valueChanged",function(a){setTimeout(function(){d.onCIChanged&&d.onCIChanged(a.ci,q,a.oldValue,a.newValue,a.ci.dst,v,p)},10)})},100);u.getTab(p.lastSelectedTopTabTitle)?u.selectChild(p.lastSelectedTopTabTitle,!0):p.lastSelectedTopTabTitle=null;this.setPropertyStruct(p);this.onShowProperties(q)}}}},execute:function(a){var b=this,e=[],g=[],q=c.EVENTS;a=_.isArray(a)?a:[a];_.each(a,function(a){var d=a._on(q.ON_RUN_BLOCK,function(e){b.mark(b.toNode(e),"activeBlock",a,e.timeout)}),
r=a._on(q.ON_RUN_BLOCK_SUCCESS,function(e){b.mark(b.toNode(e),"successBlock",a,e.timeout)}),p=a._on(q.ON_RUN_BLOCK_FAILED,function(e){b.mark(b.toNode(e),"failedBlock",a,e.timeout)});if(a&&a.scope){try{var u=a.scope.solveBlock(a,{highlight:!0,force:!0,listener:b},!0);e.push(u)}catch(ka){logError(ka,"executing block -  "+a.name+" failed! : "),b.publish(c.EVENTS.ON_STATUS_MESSAGE,{text:"Error running block:"+ka.message,type:"error"})}return g=g.concat([d,p,r])}da.error("have no scope")});F(e).then(function(){_.invoke(g,
"remove")})},_itemChanged:function(a,b,e){function c(){q.refreshRoot();q.refresh();q.refreshCurrent()}function g(a,b){q.select(a,null,!0,{focus:!0,delay:1,append:!1,expand:!0},b)}e=e||this.getStore(b);var q=this;switch(a){case "added":c();g(b);break;case "enabled":c();g(b);break;case "changed":g(b,"update");break;case "moved":c();break;case "deleted":a=b.getParent();b.next(null,-1)||b.next(null,1);if(a){var d=a.getContainer();d&&_.each(d,function(a){a.id===b.id&&d.remove(a)})}c()}},save:function(){var a=
this._owner.driver,b=this.ctx,e=b.getFileManager(),c=this.blockScope,q=c.instance,d=a.path.replace(".meta.json",".xblox"),r=a.scope;null!==q&&setTimeout(function(){a.blockScope&&a.blockScope.fromScope(c)},0);if(c){var q={blocks:null,variables:null},p=c.blocksToJson();try{g.fromJson(JSON.stringify(p))}catch(ta){da.error("invalid data");return}q.blocks=p;e.setContent(r,d,JSON.stringify(q,null,2),function(){b.getDriverManager().saveDriver(a)});a.blox.blocks=p}},download:function(){var a=this.blockScope.blocksToJson(),
a=JSON.stringify(a);g.download("blocks.json",a)},runAction:function(a){function b(a,b,c){var g=new G;c=null;c=a===B?x.createBlock(a,{name:"No Title",scope:e.blockScope,group:b}):e.addItem({proto:a,ctrArgs:{scope:e.blockScope,group:b}});var q={select:[c],focus:!0,append:!1};(a=e.refresh())&&a.then&&a.then(function(){g.resolve(q)});_.each(e.grids,function(a){a&&a.refreshRoot&&(a.refreshRoot(),a.refresh(),a.refreshCurrent())});return g}var e=this,c=this.getSelection();return"New/Command"===a.command?
b(y,this.blockGroup,c[0]||this.getCurrentParent()):"View/Layout/Save Layout"===a.command?this.saveLayout():"View/Layout/Restore Layout"===a.command?this.restoreLayout():a.command===ia.DOWNLOAD?this.download():"Step/Back"===a.command?this.goBack():"New/Variable"===a.command?b(B,"basicVariables"):"File/Save"===a.command?this.save():"Step/Help"===a.command?this.showHelp(c[0]):this.inherited(arguments)},mark2:function(a,b,e,c){a&&a._currentHighlightClass!==b&&(a._currentHighlightClass=b,a.removeClass("failedBlock successBlock activeBlock"),
a.addClass(b),a.hightlightTimer&&(clearTimeout(a.hightlightTimer),a.hightlightTimer=null),!1!==c&&(a.hightlightTimer=setTimeout(function(){a.removeClass(b);a.removeClass("failedBlock successBlock activeBlock");a.hightlightTimer=null;a._currentHighlightClass=null},this.highlightDelay)))},_observeStore:function(a,b,e){var c=this,g=e.rows,q,d=[a._on("update",function(a){var d=a.previousIndex,r=a.index;void 0!==d&&g[d]&&("max"in g&&(void 0===r||r<g.min||r>g.max)&&g.max--,q=g[d],q.parentNode===b&&c.removeRow(q,
!1,e),g.splice(d,1),("delete"===a.type||"update"===a.type&&(d<r||void 0===r))&&g[d]&&g[d].rowIndex--);"delete"===a.type&&(q=null)}),a._on("update",function(a){var d=a.previousIndex,r=a.index;if(void 0!==r&&(!("max"in g)||r>=g.min&&r<=g.max)){"max"in g&&(void 0===d||d<g.min||d>g.max)&&g.max++;if(g.length){if(d=g[r],!d&&(d=g[r-1]))d=(d.connected||d).nextSibling}else d=c._getFirstRowSibling&&c._getFirstRowSibling(b);q&&d&&q.id===d.id&&(d=(d.connected||d).nextSibling);d&&!d.parentNode&&(d=document.getElementById(d.id));
g.splice(r,0,void 0);q=c.insertRow(a.target,b,d,r,e);c.highlightRow(q)}q=null}),a._on("update",function(b){var e="undefined"!==typeof b.previousIndex?b.previousIndex:Infinity,q="undefined"!==typeof b.index?b.index:Infinity,d=Math.min(e,q);e!==q&&g[d]&&c.adjustRowIndices(g[d]);Infinity!==e&&c._processScroll&&(g[e]||g[e-1])&&c._processScroll();c._onNotification(g,b,a);a===c._renderedCollection&&"totalLength"in b&&(c._total=b.totalLength)})];return{remove:function(){for(;0<d.length;)d.pop().remove()}}},
destroy:function(){if(this.collection){var a=this.collection.query({group:this.blockGroup});_.each(a,function(a){a._lastSettings||(a._lastSettings={});a._lastSettings.highlight=!1})}if(!this._destroyed)return this._destroyed=!0,delete this.typeMap,this._history&&(this._history.destroy(),delete this._history),this.clearPropertyPanel(),this.inherited(arguments)},startup:function(){if(!this._started){var a=this.inherited(arguments),b=this.collection.query({group:this.blockGroup});_.each(b,function(a){a._lastSettings||
(a._lastSettings={});a._lastSettings.highlight=!0});return a}},paste:function(a,b,e){if(a){e=this.getSelection()[0];var c,g,q=this.blockScope;if(b){if(!e){for(b=0;b<a.length;b++)e=a[b],e.parentId&&(e._parentOri=""+e.parentId,e.parentId=null);c=q.flatten(a);b=_.uniq(c,!1,function(a){return a.id});b=q.cloneBlocks2(b,this.newRootItemGroup);q.flatten(b);e=null;for(q=0;q<b.length;q++){var d=b[q];e||(e=d)}for(e=0;e<a.length;e++)q=a[e],q._parentOri&&(q.parentId=q._parentOri,delete q._parentOri);return b}var r=
a[0].scope,d=e.scope;if(r==d){var p=e.canAdd()||!1,u=r.getBlockById(e.parentId);u||(u=e);c=q.flatten(a);a=r.cloneBlocks2(c);c=[];r=e.getTopRoot();for(q=0;q<a.length;q++){g=a[q];g.getTopRoot();if(g.parentId&&!r){var v=d.getBlockById(g.parentId);v&&_.find(a,{id:v.id})||(g.parentId=null)}g.parentId&&r&&(v=g.getTopRoot(),v.id&&r.id&&v.id!==e.id&&(g.parentId=null));g.parentId||(g.parentId=u.id,u.add(g),g=this.onDrop(g,e,!1,b,"Moved",p));c.push(g)}return c}}}}})}function ja(a,b,e){e=R.createTab(null,null,
e||K.id);ha.getDeviceManager();e.set("loading",!0);var q=g.getCIByChainAndName(a.user,0,c.DRIVER_PROPERTY.CF_DRIVER_COMMANDS);a=g.addWidget(aa,{userData:q,driver:a,device:b,ctx:ha},null,e,!0);e.add(a);return a}V.prototype.renderRow=function(a){if(a.renderRow){var e=a.renderRow.apply(this,[a]);if(e)return e}e=b.create("div",{className:"tile widget"});a.getChildren();var c="";this._doubleWidthThumbs=!0;var c=a.name,g='\x3cspan style\x3d"color:inherit;margin-left:auto;float:left;text-align:left;left:10%;top:23%;text-shadow: 2px 2px 5px rgba(0,0,0,0.3);opacity: 0.7" class\x3d" '+
(a.icon?a.icon+" fa-3x":"fa fa-folder fa-5x")+'"\x3e\x3c/span\x3e',q=a.toText(!0,!0,!1,!1),d=a.toText(!1,!1,!0,!1),r="\x3cbr/\x3e \x3cbr/\x3e";-1!==q.indexOf(d)&&(r=d="");var p=a.getStatusIcon?a.getStatusIcon():a._statusIcon;a='\x3cdiv title\x3d"'+c+'" class\x3d"tile-content icon"\x3e'+g+'\x3c/div\x3e\x3cdiv class\x3d"brand bg-dark opacity ellipsis" style\x3d"text-align:left;min-height: 50%;margin-left: 2px;margin-bottom: 2px;margin-right: 2px;padding: 4px;"\x3e'+q+r+d+'\x3c/div\x3e\x3cdiv class\x3d"tile-status"\x3e\x3cspan style\x3d"right:1px" class\x3d"badge bg-transparent text-muted"\x3e'+
a.getChildren().length+'\x3c/span\x3e\x3c/div\x3e\x3cdiv class\x3d"tile-status-top"\x3e\x3cdiv style\x3d"top:1px;right:20px" class\x3d"badge bg-transparent"\x3e\x3cspan style\x3d"font-size: 140%"  class\x3d"text-success fa-play"\x3e\x3c/span\x3e\x3cspan style\x3d"font-size: 140%;margin-left: 8px" class\x3d"text-info fa-cogs "\x3e\x3c/span\x3e'+(p?'\x3cspan style\x3d"font-size: 110%;margin-left: 8px" class\x3d"'+p+'"\x3e\x3c/span\x3e':"")+"\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e";this._doubleWidthThumbs&&
$(e).addClass("double");e.innerHTML=a;return e};var ha=window.sctx,ia=c.ACTION,aa=n([J,X,Q.dcl],{templateString:'\x3cdiv style\x3d"with:inherit;height: inherit"/\x3e',showBasicCommands:!0,showConditionalCommands:!1,showResponseBlocks:!0,showLog:!0,showConsole:!0,showVariables:!0,showSettings:!0,showInitTab:!0,logTab:null,consoleTab:null,basicCommandsTab:null,conditionalTab:null,variablesTab:null,initGrid:null,initTab:null,responseTab:null,settingsTab:null,gridClass:null,cssClass:"Driver",completeGrid:function(a,
b){a.userData=this.userData;(function(a){a._highlight=!0;a.once("onAddActions",function(b){b=b.actions;var e={addPermission:!0};b.push(this.createAction({label:"Highlight",command:"View/Show/Highlight",icon:"fa-on",tab:"View",group:"Show",mixin:{addPermission:!0,closeOnClick:!1,actionType:"multiToggle"},onCreate:function(b){b.value=!0===a._highlight},onChange:function(b,e){a._highlight=e}}));b.push(this.createAction({label:"Command",command:"New/Command",icon:"fa-plus",tab:"Home",group:"Insert",mixin:g.mixin({quick:!0},
e)}));b.push(this.createAction({label:"Variable",command:"New/Variable",icon:"fa-code",tab:"Home",group:"Insert",mixin:g.mixin({quick:!0},e)}));b.push(this.createAction({label:"Save Layout",command:"View/Layout/Save Layout",icon:"fa-save",tab:"Home",group:"View",mixin:e}));b.push(this.createAction({label:"Restore Layout",command:"View/Layout/Restore Layout",icon:"fa-folder-open",tab:"Home",group:"View",mixin:e}))});a._on("selectionChanged",function(b){b=b.selection[0];var e=this.getAction("Step/Insert"),
c=this.getAction("Step/Enable"),g=this.getAction("New/Command");this.getHistory().getNow();b||(b=this.getCurrentParent());var q=b?!1:!0;"conditionalProcess"===a.blockGroup&&(q=!1,g.set("disabled",!0),setTimeout(function(){g.getReferences().forEach(function(a){a.set("disabled",!0)})},100));"conditional"===a.blockGroup&&(q=!1);"basic"===a.blockGroup&&(q=!1);(function(a){e.set("disabled",a);setTimeout(function(){e.getReferences().forEach(function(b){b.set("disabled",a)})},100)})(q);b&&(c.value=b.enabled)})})(a);
this.add(a);a.registerView&&this.ctx.getWindowManager().registerView(a,!1);return a},createGrid:function(a,b,e,q,d,r){var p,u=this.getGridClass(),v=this.grids;if(!a)return da.error("invalid tab",r),null;b=g.mixin({device:this.device,driver:this.driver,owner:this,_owner:this,ctx:this.ctx,blockScope:b,toolbarInitiallyHidden:!0,blockGroup:q,attachDirect:!0,shouldTrackCollection:!0,resizeToParent:!1,testt:"xxxx "+g.createUUID(),propertyStruct:{currentCIView:null,targetTop:null,_lastItem:null},collection:e.filter({group:q}),
onCIChanged:function(a,b,e,q,d,r){e!==q&&(a=this.collection,b=this.collection.getSync(b.id),-1===d.indexOf(".")&&b.set(d,q),this.refreshActions(),g.setAt(b,d,q),a.emit("update",{target:b,type:"update",value:q}),b._store.emit("update",{target:b,type:"update",value:q}),this._itemChanged("changed",b,a),b.onChangeField(d,q,r,this),(q=this.cell(b.id,"1"))&&this.refreshCell(q).then(function(a){}),-1!==b.declaredClass.indexOf("model.Variable")&&this.publish(c.EVENTS.ON_DRIVER_VARIABLE_CHANGED,{item:b,scope:b.scope}))}},
r);try{p=g.addWidget(u,b,null,a,!1),this.completeGrid(p,d),v.push(p)}catch(ea){logError(ea)}a.add(p);return p},getGridClass:function(a){return this.gridClass?this.gridClass:this.gridClass=ga(this)},createConsole:function(a){var b=this.ctx.getDeviceManager().openConsole(this.device,a);this.consoleView=b;this.add(b);a.add(b)},openLog:function(a,b){var e=this,c=e.ctx,q=c.getDeviceManager(),d=c.getLogManager();a=a||this.device;var r=a.info||q.toDeviceControlInfo(a),q=g.replaceAll("/","_",r.host);a=k("windows")?
"\\":"/";var p=null,p=r.deviceScope+a+"logs"+a+q+"_"+r.port+"_"+r.protocol+".json";d.getStore(p).then(function(a){a={ctx:c,storeId:p,delegate:d,collection:a,info:r,isMyLog:function(a){return a.data&&a.data.device&&a.data.device.id===this.info.id},__collection:a.filter({}).sort([{property:"time",descending:!0}])};var q=!1;e.isSingle&&(q=!0);a=g.addWidget(P,a,null,b,q,"logGridView");e.add(a,null,!1);e.grids.push(a);b.add(a,null,!1)})},createSettingsWidget:function(a,b){var e=this;$(b.containerNode).css({"overflow-y":"auto"});
var c=n(E,{templateString:'\x3cdiv style\x3d"height:auto;padding: 16px"/\x3e',_getText:function(a){var b;dojo.xhrGet({url:a,sync:!0,handleAs:"text",load:function(a){b=a}});return""+b+""},resizeToParent:!1,startup:function(){g.getJson(a.params);var b=g.getJson(a.params)||{constants:{start:"",end:""},send:{mode:!1,interval:500,timeout:500,onReply:""}},c=g.templatify(null,this._getText(Y.toUrl("xcf/widgets/templates/commandSettingsNew2.html")),this.domNode,{baseClass:"settings",start:b.constants.start,
end:b.constants.end,interval:b.send.interval,timeout:b.send.timeout,sendMode:b.send.mode,onReply:b.send.onReply,settings:b},null);b.send.mode?$(c.rReply).prop("checked",!0):$(c.rInterval).prop("checked",!0);var q=function(){a.params=JSON.stringify(c.settings);e.ctx.getDeviceManager().onDriverSettingsChanged(a,e.driver)};$(c.start).on("change",function(a){c.settings.constants.start=a.target.value;q()});$(c.end).on("change",function(a){c.settings.constants.end=a.target.value;q()});$(c.rReply).on("change",
function(a){c.settings.send.mode="on"===a.target.value?1:0;q()});$(c.rInterval).on("change",function(a){c.settings.send.mode="on"===a.target.value?0:1;q()});$(c.wInterval).on("change",function(a){c.settings.send.interval=a.target.value;q()});$(c.wOnReply).on("change",function(a){c.settings.send.onReply=a.target.value;q()});$(c.wTimeout).on("change",function(a){c.settings.send.timeout=a.target.value;q()})}}),c=g.addWidget(c,{userData:a,resizeToParent:!1},null,b,!0);b.add(c,null,!1)},createResonseSettingsWidget:function(a,
b){$(b.containerNode).css({"overflow-y":"auto"});var e=n(E,{templateString:'\x3cdiv style\x3d"padding: 16px"/\x3e',_getText:function(a){var b;dojo.xhrGet({url:a,sync:!0,handleAs:"text",load:function(a){b=a}});return""+b+""},startup:function(){g.getJson(a.params);var b=g.getJson(a.params)||{start:!1,startString:"test",cTypeByte:!1,cTypePacket:!1,cTypeDelimiter:!0,cTypeCount:!1,delimiter:"",count:10},e=g.templatify(null,this._getText(Y.toUrl("xcf/widgets/templates/responseSettingsNew2.html")),this.domNode,
{baseClass:"settings",rID:this.id,startString:b.startString,start:b.start?"true":"false",delimiter:b.delimiter,count:b.count,cTypeByte:b.cTypeByte?"true":"false",cTypePacket:b.cTypePacket?"true":"false",cTypeDelimiter:b.cTypeDelimiter?"true":"false",cTypeCount:b.cTypeCount?"true":"false",settings:b},null);b.cTypeByte?$(e.cTypeByte).prop("checked",!0):b.cTypePacket?$(e.cTypePacket).prop("checked",!0):b.cTypeDelimiter?$(e.cTypeDelimiter).prop("checked",!0):b.cTypeCount&&$(e.cTypeCount).prop("checked",
!0);var c=function(){a.params=JSON.stringify(e.settings)};$(e.wStartString).on("change",function(a){e.settings.startString=a.target.value;c()});$(e.wDelimiter).on("change",function(a){e.settings.delimiter=a.target.value;c()});$(e.wCount).on("change",function(a){e.settings.count=a.target.value;c()});$(e.cTypeByte).on("change",function(a){e.settings.cTypeByte="on"===a.target.value?1:0;e.settings.cTypePacket=0;e.settings.cTypeDelimiter=0;e.settings.cTypeCount=0;c()});$(e.cTypePacket).on("change",function(a){e.settings.cTypePacket=
"on"===a.target.value?1:0;e.settings.cTypeByte=0;e.settings.cTypeDelimiter=0;e.settings.cTypeCount=0;c()});$(e.cTypeDelimiter).on("change",function(a){e.settings.cTypeDelimiter="on"===a.target.value?1:0;e.settings.cTypeByte=0;e.settings.cTypePacket=0;e.settings.cTypeCount=0;c()});$(e.cTypeCount).on("change",function(a){e.settings.cTypeCount="on"===a.target.value?1:0;e.settings.cTypeByte=0;e.settings.cTypePacket=0;e.settings.cTypeDelimiter=0;c()})}}),e=g.addWidget(e,{userData:a,resizeToParent:!0},
null,b,!0);b.add(e,null,!1)},getState:function(){return(this.ctx.getSettingsManager().getStore()||{getSync:function(){}}).getSync("driverView")||{value:{layouts:{}}}},createWidgets:function(){function a(){for(var a=this.getState().value,b=[this.basicCommandsGrid,this.responseGrid,this.variablesGrid],e=!0,c=0;c<b.length;c++)b[c]||(e=!1);if(e){for(e=0;e<b.length;e++)c=b[e],a[c.blockGroup]=c.getState();q.getSettingsManager().write2(null,".",{id:"driverView"},{value:a},!0,null).then(function(){})}}var b=
this,e=b.userData,q=this.ctx,d=b.device,r=b.driver,p=d&&d.getBlockScope()?d.getBlockScope():r.blockScope||q.getDriverManager().createDriverBlockScope(r);if(p){var u=p.blockStore;this.driverModule&&this.driverModule.getNewBlocks&&(this.driverModule.getNewBlocks(),this.subscribe(c.EVENTS.ON_BUILD_BLOCK_INFO_LIST_END,function(a){var b=a.owner;b.device==d&&b.driver==r&&this.driverModule.getNewBlocks(a.scope,a.view,a.item,a.group,a.items)}));this.grids=[];this.showBasicCommands&&this.basicCommandsTab&&
(this.basicCommandsGrid=this.createGrid(this.basicCommandsTab,p,u,"basic","Command",{registerView:!0}));this.showConditionalCommands&&this.conditionalTab&&(this.conditionalCommandsGrid=this.createGrid(this.conditionalTab,p,u,"conditional","Command",{registerView:!0}));this.showInitTab&&this.initTab&&(this.initGrid=this.createGrid(this.initTab,p,u,"init",null,{registerView:!0}));this.showVariables&&this.variablesTab&&(this.variablesGrid=this.createGrid(this.variablesTab,p,u,"basicVariables","Command",
{columns:[{label:"Name",field:"name",sortable:!0,width:"20%",editorArgs:{required:!0,promptMessage:"Enter a unique variable name",intermediateChanges:!1},formatter:function(a,b){var e="";return b.toText?(e=b.toText(),"\x3cspan\x3e "+e+"\x3c/span\x3e"):a}},{label:"Value",field:"value",sortable:!1,editOn:"click",formatter:function(a,b){return g.markHex(a,""," ")},editorArgs:{autocomplete:"on",templateString:'\x3cdiv class\x3d"dijit dijitReset dijitInline dijitLeft" id\x3d"widget_${id}" role\x3d"presentation"\x3e\x3cdiv class\x3d"dijitReset dijitInputField dijitInputContainer"\x3e\x3cinput class\x3d"dijitReset dijitInputInner" data-dojo-attach-point\x3d"textbox,focusNode" autocomplete\x3d"on"${!nameAttrSetting} type\x3d"${type}"/\x3e\x3c/div\x3e\x3c/div\x3e'}}],
registerView:!0}),this.variablesTab&&this.variablesTab.select(),$(this.variablesGrid&&this.variablesGrid.domNode).addClass("VariablesGrid"),this.variablesGrid&&this.variablesGrid.on("dgrid-datachange",function(a){da.error("variables changed",a)}));this.responseTab&&(this.responseGrid=this.createGrid(this.responseTab,p,u,"conditionalProcess","Variable",{_columns:[{label:"Name",field:"name",sortable:!0,width:"20%",editorArgs:{required:!0,promptMessage:"Enter a unique variable name",intermediateChanges:!1}},
{label:"Initialize",field:"initial",sortable:!1,editOn:"click"},{label:"Value",field:"value",sortable:!1,editOn:"click",formatter:function(a,b){return a},editorArgs:{autocomplete:"on",templateString:'\x3cdiv class\x3d"dijit dijitReset dijitInline dijitLeft" id\x3d"widget_${id}" role\x3d"presentation"\x3e\x3cdiv class\x3d"dijitReset dijitInputField dijitInputContainer"\x3e\x3cinput class\x3d"dijitReset dijitInputInner" data-dojo-attach-point\x3d"textbox,focusNode" autocomplete\x3d"on"${!nameAttrSetting} type\x3d"${type}"/\x3e\x3c/div\x3e\x3c/div\x3e'}}],
registerView:!0}));if(this.showLog&&!k("fiddle")&&this.logTab&&this.device)try{this.logGrid=this.openLog(this.device,this.logTab)}catch(ta){}this.showBasicCommands&&this.basicCommandsTab&&this.basicCommandsTab.select();this.showSettings&&this.settingsTab&&(this.createSettingsWidget(e,this.settingsTab),e=g.getCIByChainAndName(this.driver.user,0,c.DRIVER_PROPERTY.CF_DRIVER_RESPONSES),this.createResonseSettingsWidget(e,this.settingsTab));this.responseGrid&&b.grids.push(b.responseGrid);this.conditionalCommandsGrid&&
b.grids.push(b.conditionalCommandsGrid);this.variablesGrid&&b.grids.push(b.variablesGrid);this.basicCommandsGrid&&b.grids.push(b.basicCommandsGrid);this.showConsole&&this.device&&!k("fiddle")&&b.consoleTab&&setTimeout(function(){var a=b.createConsole(b.consoleTab);b.add(a,null,!1)},2E3);_.each(this.grids,function(a){a.grids=b.grids});_.each([this.basicCommandsTab,this.responseTab,this.variablesTab,this.logTab],function(a){if(a)a.on(c.DOCKER.EVENT.VISIBILITY_CHANGED,function(b){b&&a._widgets&&(b=a._widgets[0])&&
(b=b.getPropertyStruct?b.getPropertyStruct():{},b.targetTop&&b.targetTop.resize(),b.currentCIView&&b.currentCIView.resize())})});_.each([this.basicCommandsGrid,this.responseGrid,this.variablesGrid],function(e){e&&e._on(c.EVENTS.ON_AFTER_ACTION,function(e){if(e.command===c.ACTION.TOOLBAR||e.command===c.ACTION.HEADER)try{a.apply(b)}catch(ka){}})});e=q.getSettingsManager().getStore()||{getSync:function(){}};this.responseTab&&this.responseTab.select();this.responseGrid&&this.responseGrid._on("showToolbar",
function(a){function b(){var a=g.convertAllEscapes($(e).val(),"none");if(d)q.getDeviceManager().onDeviceServerMessage({data:{data:{device:d.info,driverInstance:d.driverInstance,deviceMessage:a,bytes:g.stringToBufferStr(a)}}})}a.$navBar.append('\x3cinput style\x3d"display: inline-block;width:100px;margin: 2px;" name\x3d"search" placeholder\x3d"Emit value" class\x3d"searchInput form-control input-transparent" type\x3d"text"\x3e');var e=a.$navBar.find(".searchInput");this.searchInput=$(e);a=x.createSimpleButton("",
"fa-play","form-control input-transparent btn-sm btn-warning",null,a.$navBar[0]);$(a).css("display","inline-block");$(a).css("width","25px");$(e).keyup(function(a){13===a.keyCode&&b()});$(a).on("click",function(){b()})});e&&(e=this.getState().value)&&(e.basic&&this.basicCommandsGrid&&this.basicCommandsGrid.setState(e.basic),e.basicVariables&&this.variablesGrid&&this.variablesGrid.setState(e.basicVariables),e.conditionalProcess&&this.responseGrid&&this.responseGrid.setState(e.conditionalProcess));
k("fiddle")&&_.each([this.basicCommandsGrid,this.responseGrid,this.variablesGrid],function(a){a.showToolbar(!0)});this.resize();this._parent&&this._parent.set&&this._parent.set("loading",!1)}else da.error("have no scope!")},startup:function(){this._parent&&this._parent.set&&this._parent.set("loading",!0);var a=this,b=this.ctx;b.getDeviceManager();var b=b.getDriverManager(),e=a.device,g=a.driver,q=this.createLayout();a.isInstance=e&&null!==e.driverInstance;a.lastInstance=e&&null!==e.driverInstance?
e.driverInstance._id:null;this._docker=q;var d=new G,r=!1;e&&e.driverInstance||b.loadDriverModule(g).then(function(b){g.Module=b;a.driverModule=b;r||(r=!0,a.createWidgets(),d.resolve())});b.getDriverModule(g).then(function(b){a.driverModule=b;g.Module=K;r||(r=!0,a.createWidgets(),d.resolve())});(function(a){logError(a)});a.isInstance&&this.subscribe(c.EVENTS.ON_DEVICE_DRIVER_INSTANCE_READY,function(b){if(b.device===a.device&&a.isInstance&&(b=b.device.driverInstance,a.lastInstance!==b._id)){var e=
b.blockScope,c=e.blockStore;a.lastInstance=b._id;_.each(a.grids,function(a){a.blockGroup&&(a.blockScope=e,a.set("collection",c.filter({group:a.blockGroup})))})}});this._emit("startup");return d}});if(ha)return d=ha.getDriverManager(),h=d.getItemById("235eb680-cb87-11e3-9c1a-0800200c9a66"),(d=d.getDriverByPath("Marantz/My Marantz.meta.json_instances_instance_Marantz/Marantz.meta.json"))&&(h=d),ja(h.driver||h,h.device),a;aa.BlockGridClass=ga();return aa})},"xide/cache/Circular":function(){define([],
function(){function n(m){if(!(this instanceof n))return new n(m);if("object"==typeof m&&Array.isArray(m._buffer)&&"number"==typeof m._capacity&&"number"==typeof m._first&&"number"==typeof m._size)for(var k in m)m.hasOwnProperty(k)&&(this[k]=m[k]);else{if("number"!=typeof m||0!=m%1||1>m)throw new TypeError("Invalid capacity");this._buffer=Array(m);this._capacity=m;this._size=this._first=0}}n.prototype={size:function(){return this._size},capacity:function(){return this._capacity},enq:function(m){0<
this._first?this._first--:this._first=this._capacity-1;this._buffer[this._first]=m;this._size<this._capacity&&this._size++},push:function(m){this._size==this._capacity?(this._buffer[this._first]=m,this._first=(this._first+1)%this._capacity):(this._buffer[(this._first+this._size)%this._capacity]=m,this._size++)},deq:function(){if(0==this._size)throw new RangeError("dequeue on empty buffer");var m=this._buffer[(this._first+this._size-1)%this._capacity];this._size--;return m},pop:function(){return this.deq()},
shift:function(){if(0==this._size)throw new RangeError("shift on empty buffer");var m=this._buffer[this._first];this._first==this._capacity-1?this._first=0:this._first++;this._size--;return m},get:function(m,k){if(0==this._size&&0==m&&(void 0==k||0==k))return[];if("number"!=typeof m||0!=m%1||0>m)throw new TypeError("Invalid start");if(m>=this._size)throw new RangeError("Index past end of buffer: "+m);if(void 0==k)return this._buffer[(this._first+m)%this._capacity];if("number"!=typeof k||0!=k%1||0>
k)throw new TypeError("Invalid end");if(k>=this._size)throw new RangeError("Index past end of buffer: "+k);this._first+m>=this._capacity&&(m-=this._capacity,k-=this._capacity);return this._first+k<this._capacity?this._buffer.slice(this._first+m,this._first+k+1):this._buffer.slice(this._first+m,this._capacity).concat(this._buffer.slice(0,this._first+k+1-this._capacity))},toarray:function(){return 0==this._size?[]:this.get(0,this._size-1)}};return n})},"xfile/views/Grid":function(){define("xdojo/declare xide/types xgrid/ListRenderer xfile/ThumbRenderer xgrid/TreeRenderer xgrid/Grid xgrid/MultiRenderer xfile/FileActions xfile/Statusbar xfile/views/UploadMixin xide/views/_LayoutMixin xgrid/KeyboardNavigation xgrid/Search xgrid/Selection xide/mixins/_State xide/widgets/_Widget xdojo/has!FileConsole?xfile/views/FileConsole xfile/FolderSize xide/noob".split(" "),
function(n,m,k,h,d,b,c,g,p,a,e,q,u,w,r,v,x,A,z){k=[k,h,d];n=n.classFactory("multiRenderer",{},k,c.Implementation);m=b.createGridClass("xfile.views.Grid",{},{SELECTION:{CLASS:w},KEYBOARD_SELECTION:!0,CONTEXT_MENU:m.GRID_FEATURES.CONTEXT_MENU,TOOLBAR:m.GRID_FEATURES.TOOLBAR,CLIPBOARD:m.GRID_FEATURES.CLIPBOARD,ACTIONS:m.GRID_FEATURES.ACTIONS,ITEM_ACTIONS:{CLASS:g},STATUS_BAR:{CLASS:p},SPLIT:{CLASS:e},KEYBOARD_NAVIGATION:{CLASS:q},SEARCH:{CLASS:u},STATE:{CLASS:r},UPLOAD:{CLASS:a},WIDGET:{CLASS:v},SIZES:{CLASS:A}},
{RENDERER:n},{renderers:k,selectedRenderer:d});m.DEFAULT_RENDERERS=k;m.DEFAULT_MULTI_RENDERER=n;return m})},"xgrid/ColumnHider":function(){define(["xdojo/declare","dojo/has","dgrid/util/misc","xide/types","xide/utils"],function(n,m,k,h,d){return n("xgrid.ColumnHider",null,{columnHiderActionRootCommand:"View/Columns",i18nColumnHider:{},_columnHiderRules:null,_runAction:function(b,c,g){if(b&&-1!=b.command.indexOf(this.columnHiderActionRootCommand)){var d=b.column,a=this.isColumnHidden(d.id);this.showColumn(d.id,
a);!1!==c&&b.set("value",!this.isColumnHidden(d.id))}return this.inherited(arguments)},getColumnHiderActions:function(b,c){function g(c){var g="Show "+(c.label||c.field||""),q=c.icon||"fa-cogs";if(!c.unhidable){var r=a.createAction(g,p+"/"+g,q,null,"View","Columns","item|view",function(a){var b={widgetArgs:{checked:!c.hidden,iconClass:q,style:"float:inherit;"},actionType:"multiToggle"};a.actionType="multiToggle";a.setVisibility(h.ACTION_VISIBILITY_ALL,d.cloneKeys(b,!1));g=a.label.replace("Show ",
"")},null,{column:c,filterGroup:"item|view",tab:"View",value:!c.hidden,addPermission:!0},null,null,b,u,a,a);r&&e.push(r)}}var p=this.columnHiderActionRootCommand,a=this,e=[],q=h.ACTION_VISIBILITY,u=this.domNode;c=c||[];_.find(c,{command:p})||e.push(this.createAction({label:"Columns",command:p,icon:"fa-columns",tab:"View",group:"Columns",toggleGroup:a.id+"Columns",onCreate:function(a){a.setVisibility(q.RIBBON,{expand:!0}).setVisibility(q.ACTION_TOOLBAR,!1)}}));c=this.subRows;var w=!0,r,v,x,k;x=0;for(r=
c.length;x<r;x++)for(k=0,v=c[x].length;k<v;k++)g(c[x][k]),w&&(w=!1);return e},resize:function(){this.inherited(arguments);this._checkHiddenColumns()},_checkHiddenColumns:function(){var b=this.subRows,c,g,d,a,e=$(this.domNode).width();d=0;for(c=b.length;d<c;d++)for(a=0,g=b[d].length;a<g;a++){var q=b[d][a];q.minWidth&&(e<q.minWidth?q.unhidable||this.showColumn(q.id,!1):this.showColumn(q.id,!0))}},startup:function(){if(!this._started){this._columnHiderCheckboxes={};this._columnHiderRules={};var b=this.inherited(arguments);
this._checkHiddenColumns();var c=this.subRows,g,d,a,e,q=this;a=0;for(g=c.length;a<g;a++)for(e=0,d=c[a].length;e<d;e++){var u=c[a][e],h=u.id;!0===u.hidden&&(u.hidden=!1,q._hideColumn(h),u.hidden=!0)}if(this.getActionStore)this.getActionStore().on("update",function(a){a=a.target;-1!==a.command.indexOf("View/Columns")&&(q.showColumn(a.column.id,a.get("value")),q.onAfterAction(a))});return b}},left:function(b,c){return this.right(b,-c)},right:function(b,c){b.element||(b=this.cell(b));for(var g=this.inherited(arguments),
d=b;g.column.hidden;){g=this.inherited(arguments,[g,0<c?1:-1]);if(d.element===g.element)return b;d=g}return g},isColumnHidden:function(b){return!!this._columnHiderRules[b]},_hideColumn:function(b){var c=this,g="#"+k.escapeCssIdentifier(this.template?this.template.id:this.domNode.id)+" .dgrid-column-",d;this._columnHiderRules[b]||(this._columnHiderRules[b]=k.addCssRule(g+k.escapeCssIdentifier(b,"-"),"display: none;"),8!==m("ie")&&10!==m("ie"))||(d=k.addCssRule(".dgrid-row-table","display: inline-table;"),
window.setTimeout(function(){d.remove();c.resize()},0))},_showColumn:function(b){this._columnHiderRules[b]&&(this._columnHiderRules[b].remove(),delete this._columnHiderRules[b])},showColumn:function(b,c){this.isColumnHidden(b)?c&&this._showColumn(b):c||this._hideColumn(b)}})})},"davinci/ui/widgets/FileFieldDialog":function(){define("dojo/_base/declare dijit/_WidgetBase dijit/_TemplatedMixin dijit/_WidgetsInTemplateMixin davinci/Workbench davinci/ui/widgets/OpenFile dijit/form/Button davinci/model/Path davinci/lang/ui dijit/lang/_common dojo/text!./templates/FileFieldDialog.html dijit/form/TextBox xide/views/_PanelDialog xide/utils xide/types xfile/views/FileGrid xfile/FileActions".split(" "),
function(n,m,k,h,d,b,c,g,p,a,e,q,u,w,r,v,x){return n("davinci.ui.widgets.FileFieldDialog",[m,k,h],{templateString:e,widgetsInTemplate:!0,_fileSelectionDialog:null,_showFileSelectionDialog:function(){var a=this;this.ctx=d.ctx;x.createFilePicker(this,"",function(b){var e=w.buildPath(b.mount,b.path,!1);a.ctx.getFileManager().getImageUrl(b,!0,{oriPath:e});a.textField.set("value",e);a._onChange()},p.selectFile,null,{mount:"workspace_user",selection:"."},null,v,{micromatch:"(*.png)|(*.jpg)|!(*.*)"})},_setBaseLocationAttr:function(a){this._baseLocation=
a},_setValueAttr:function(a){this.value!=a&&(this.value=a,this.textField.set("value",a))},_setDisabledAttr:function(a){this.textField.set("disabled",a);this.button.set("disabled",a);this.inherited(arguments)},_setIntermediateChangesAttr:function(a){this.textField.set("intermediateChanges",a);this.inherited(arguments)},_onChange:function(){var a=this.textField.get("value");this.value!=a&&(this.value=a,this.textField.set("value",this.value),this.onChange(a))},onChange:function(a){},_getValueAttr:function(){return this.textField.get("value")}})})},
"dijit/form/DateTextBox":function(){define(["dojo/_base/declare"],function(n){return n("dijit.form.DateTextBox",[],{})})},"davinci/ve/_ContextDojo":function(){define("require dojo/_base/declare dojo/_base/lang dojo/dom-construct dojo/query dojo/Deferred dojo/promise/all dojo/_base/connect dojo/window xide/factory xide/types ./commands/ChangeThemeCommand ../model/Path ../Runtime ../Workbench ../library ./metadata ../workbench/Preferences dojo/text!./newfile.template.html dojox/html/_base".split(" "),
function(n,m,k,h,d,b,c,g,p,a,e,q,u,w,r,v,x,A,z){return m(null,{_didDojo:!1,_reRequire:/\brequire\s*\(\s*\[\s*([\s\S]*?)\s*\]\s*\)/,_reModuleId:/[\w.\/]+/g,_bootstrapModules:"dijit/dijit,dijit/dijit-all",getDojoUrl:function(){var a=r.location();"/"==a.charAt(a.length-1)&&(a=a.substring(0,a.length-1));if(document&&document.getElementsByTagName)for(var b=document.getElementsByTagName("script"),e=/dojo(\.xd)?\.js(\W|$)/i,c=0;c<b.length;c++){var g=b[c].getAttribute("src");if(g&&g.match(e))return a+"/"+
g}},_getLoaderPackages:function(){var a=this.getBase(),b=v.getUserLibs(a),e,c=[];b.some(function(a){return"dojo"===a.id?(e=new u(a.root+"/dojo"),!0):!1});b=b.concat({id:"widgets",root:function(){var b=A.getPreferences("davinci.ui.ProjectPrefs",a);b.widgetFolder||(b.widgetFolder="WebContent/lib/custom",A.savePreferences("davinci.ui.ProjectPrefs",a,b));for(b=b.widgetFolder;1<b.length&&("."==b.charAt(0)||"/"==b.charAt(0));)b=b.substring(1);return b}()});b.forEach(function(a){var b=a.id;void 0!==a.root&&
"dojo"!==b&&"DojoThemes"!==b&&(b=(new u(a.root)).relativeTo(e).toString(),c.push({name:a.id,location:b}))});dojo.publish("onGetLoaderPackages",{context:this,packages:c,base:a});return c},_setSourcePostLoadRequires:function(a,b,e,c){c&&(c.themeSet&&(new q(c.themeSet,this))._dojoxMobileAddTheme(this,c.themeSet.mobileTheme,!0),this.addModeledStyleSheet(this.getAppCssRelativeFile(),!0),c=this._getAppJsRelativeFile(),this.addHeaderScript(c));a.find({elementType:"HTMLElement",tag:"script"}).forEach(function(a){for(var b=
0;b<a.children.length;b++)if(0<=a.children[b].getText().indexOf("dojo.require")){a.parent.removeChild(a);break}});var x=this._parse(a);if(this.frameNode)this.getGlobal(),d(".loading",this.frameNode.parentNode).orphan(),this._continueLoading(x,b,this,e);else{var A;dojo.some(x.scripts,function(a){if(-1!=a.indexOf("/dojo.js"))return A=a,!0});A=null;c=this.getBase();if(!A){var m=this;dojo.some(v.getUserLibs(c.toString()),function(a){return"dojo"===a.id?(A=(new u(this.getBase())).append(a.root).append("dojo/dojo.js").relativeTo(this.getPath(),
!0).toString(),m.addJavaScriptSrc(A,!0,"",!1),!0):!1},this);A||(A=this.getDojoUrl())}c=this.getFullResourcePath().getParentPath();var y=new u(A);c=c.append(y).getParentPath();for(var y=w.getUserWorkspaceUrl(),n=0;n<this._customWidgetPackages.length;n++){var C=this._customWidgetPackages[n],E=C.location.substr(y.length),E=new u(E);C.location=E.relativeTo(c).toString()}c=this.containerNode;c.style.overflow="hidden";c=h.create("iframe",this.iframeattrs,c);c.dvContext=this;this.frameNode=c;y=r.location()+
"/";this.baseURL&&(y=this.baseURL);var B=c.contentDocument||c.contentWindow.document,P=p.get(B),L={baseUrl:y};A&&(L.dojoUrl=A,L.id=this._id,c={packages:this._getLoaderPackages()},this._getDojoScriptValues(c,L),this._bootstrapModules&&(L.additionalModules=","+this._bootstrapModules.split(",").map(function(a){return"'"+a+"'"}).join(",")));a.themeCssFiles&&(L.themeCssFiles=a.themeCssFiles.map(function(a){return'\x3clink rel\x3d"stylesheet" type\x3d"text/css" href\x3d"'+a+'"\x3e'}).join(""));window["loading"+
this._id]=function(a,c){a=this;try{var g=p.get(B),q=this.rootNode=B.body;if(!q){this._waiting=this._waiting||0;if(10>this._waiting++){setTimeout(window["loading"+this._id],500);return}throw"doc.body is null";}delete window["loading"+this._id];q.id="myapp";q.style.width="100%";q.style.height="100%";q.style.visibility="visible";q.style.margin="0";q._edit_context=this;-1!=this._bootstrapModules.split(",").indexOf("dijit/dijit-all")&&(g.dojo._postLoad=!0);g.require("dojo/_base/lang").isArray=g.dojo.isArray=
function(a){return a&&"[object Array]"==Object.prototype.toString.call(a)};g.require({packages:this._customWidgetPackages})}catch(I){console.error(I.stack||I),a=Error(I.message,I.fileName,I.lineNumber),k.mixin(a,I)}this._continueLoading(x,b,a,e)}.bind(this);B.open();a=k.replace(z,function(a,b){return L.hasOwnProperty(b)?L[b]:""});B.write(a);B.close();g.connect(B.documentElement,"onkeypress",function(a){8==a.charOrCode&&(window.davinciBackspaceKeyTime=P.davinciBackspaceKeyTime=Date.now())});g.connect(B.documentElement,
"onkeydown",dojo.hitch(this,function(a){this.editor.handleKeyEvent(a)}));g.connect(B.documentElement,"onkeyup",dojo.hitch(this,function(a){this.editor.handleKeyEvent(a)}))}},getLibraryBase:function(a,b){return v.getLibRoot(a,b,this.getBase())},loadRequires:function(a,e,g,q){var d=x.query(a,"require");if(!d){var r=new b;r.resolve();return r}var p=x.query(a,"library"),v={},h=this,w=function(a,b){return h.addJavaScriptSrc(b,e,b,q)},k=function(a,e){var c=new b;if(v.hasOwnProperty(a))return c.resolve(),
c;var g=x.getLibrary(a).version||e.version;return h.getLibraryBase(a,g).then(function(b){if(null==b)return console.error("No library found for name \x3d '"+a+"' version \x3d '"+g+"'"),c.reject(),c;v[a]=(new u(h.getBase())).append(b);if(e&&e.src&&".js"===e.src.substr(-3))return b=e.src.match(/((?:\.\.\/)*)(.*)/),w(a,b[2]);c.resolve();return c})},r=[],A;for(A in p)p.hasOwnProperty(A)&&r.push(k(A,p[A]));return c(r).then(function(){var b=[];d.every(function(c){c.$library&&b.push(k(c.$library,p[c.$library]));
switch(c.type){case "javascript":c.src?b.push(w(c.$library,c.src)):this.addJavaScriptText(c.$text,e||g,q);break;case "javascript-module":"amd"!==c.format&&console.error("Unknown javascript-module format");c.src?b.push(this.addJavaScriptModule(c.src,e||g,q)):console.error("Inline 'javascript-module' not handled src\x3d"+c.src);break;case "css":c.src?(c=c.src,e?this.addModeledStyleSheet(c,q):this.loadStyleSheet(c)):console.error("Inline CSS not handled src\x3d"+c.src);break;case "image":break;default:console.error("Unhandled metadata resource type\x3d'"+
c.type+"' for widget '"+a+"'")}return!0},this);return c(b)}.bind(this))},getDojo:function(){var a=this.getGlobal();return a&&a.dojo||dojo},getDijit:function(){var a=this.getGlobal();return a&&a.dijit||dijit},_getDojoJsElem:function(){if(this._dojoScriptElem||this.getDocumentElement().getChildElement("head").getChildElements("script").some(function(a){if(/\/dojo.js$/.test(a.getAttribute("src")))return this._dojoScriptElem=a,!0},this))return this._dojoScriptElem;console.error('"dojo.js" script element not found!')},
_updateDojoConfig:function(b){this.close();var c=this._getDojoJsElem(),g=c.getAttribute("data-dojo-config"),g=g?n.eval("({ "+g+" })","data-dojo-config"):{},q="";g.mblLoadCompatPattern&&(q=", mblLoadCompatPattern: "+g.mblLoadCompatPattern.toString(),delete g.mblLoadCompatPattern);for(var d in b)"mblLoadCompatPattern"==d?q=null===b[d]?"":", 'mblLoadCompatPattern': "+b[d]:null===b[d]?delete g[d]:g[d]=b[d];a.publish(e.EVENTS.ON_BUILD_DOJO_CONFIG,{data:g,context:this,editor:this.editor},this);b=JSON.stringify(g).slice(1,
-1).replace(/"/g,"'");c.setAttribute("data-dojo-config",b+q)},_preserveDojoTypes:function(a){var b=a.getAttribute("data-dojo-type")||a.getAttribute("dojoType");if(b){var e=this._loadFileDojoTypesCache,c=this.maqTypesClassPrefix+this.maqTypesClassCount;a.className=a.className+" "+c;this.maqTypesClassCount++;e[c]=b}},_getDojoScriptValues:function(a,b){var e=this._getDojoJsElem(),c=e.getAttribute("data-dojo-config"),c=c?n.eval("({ "+c+" })","data-dojo-config"):{};k.mixin(c,a,{async:!0,parseOnLoad:!1});
b.dojoConfig=JSON.stringify(c).slice(1,-1).replace(/"/g,"'");var g=[];e.attributes.forEach(function(a){var b=a.name;a=a.value;"src"!==b&&"data-dojo-config"!==b&&g.push(b+'\x3d"'+a+'"')});g.length&&(b.additionalDojoAttrs=g.join(" "))},_restoreDojoTypes:function(){var a=this._loadFileDojoTypesCache,b=this.getDocument(),e;for(e in a)if(node=b.querySelectorAll("."+e)[0])node.className=node.className.replace(" "+e,""),node.setAttribute("data-dojo-type",a[e])},_continueLoading:function(a,b,e,c){var g,q=
{};try{if(e instanceof Error)throw e;g=this._setSourceData(a).then(this.onload.bind(this),function(a){q.errorMessage='Unable to parse HTML source.  See console for error.  Please switch to "Display Source" mode and correct the error.';console.error(a.stack||a.message)})}catch(D){q=D}finally{b&&(g?g.then(function(){b.call(c||this,q)}.bind(this)):b.call(c||this,q))}}})})},"dijit/form/Button":function(){define("require dojo/_base/declare dojo/dom-class dojo/has dojo/_base/kernel dojo/_base/lang dojo/ready ./_FormWidget ./_ButtonMixin dojo/text!./templates/Button.html ../a11yclick".split(" "),
function(n,m,k,h,d,b,c,g,p,a){h("dijit-legacy-requires")&&c(0,function(){n(["dijit/form/DropDownButton","dijit/form/ComboButton","dijit/form/ToggleButton"])});return m("dijit.form.Button",[g,p],{showLabel:!0,iconClass:"dijitNoIcon",_setIconClassAttr:{node:"iconNode",type:"class"},baseClass:"dijitButton",templateString:a,_setValueAttr:"valueNode",_setNameAttr:function(a){this.valueNode&&this.valueNode.setAttribute("name",a)},_fillContent:function(a){!a||this.params&&"label"in this.params||!(a=b.trim(a.innerHTML))||
(this.label=a)},_setShowLabelAttr:function(a){this.containerNode&&k.toggle(this.containerNode,"dijitDisplayNone",!a);this._set("showLabel",a)},setLabel:function(a){d.deprecated("dijit.form.Button.setLabel() is deprecated.  Use set('label', ...) instead.","","2.0");this.set("label",a)},_setLabelAttr:function(a){this.inherited(arguments);this.showLabel||"title"in this.params||(this.titleNode.title=b.trim(this.containerNode.innerText||this.containerNode.textContent||""))}})})},"dojo/main":function(){define("./_base/kernel ./has require ./sniff ./_base/lang ./_base/array ./_base/config ./ready ./_base/declare ./_base/connect ./_base/Deferred ./_base/json ./_base/Color require ./_base/browser require".split(" "),
function(n,m,k,h,d,b,c,g){c.isDebug&&k(["./_firebug/firebug"]);var p=c.require;p&&(p=b.map(d.isArray(p)?p:[p],function(a){return a.replace(/\./g,"/")}),n.isAsync?k(p):g(1,function(){k(p)}));return n})},"davinci/_Workbench_Menu":function(){define("dcl/dcl dojo/_base/declare ./Runtime dijit/Menu dijit/MenuBar dijit/MenuItem dijit/MenuSeparator dijit/PopupMenuBarItem dijit/form/DropDownButton davinci/_WokbenchEditors davinci/_WokbenchMisc".split(" "),function(n,m,k,h,d,b,c,g,p){var a=m(h,{menuOpened:function(a){},
_openMyself:function(a){this.menuOpened(a);var b;try{var e=document.getElementById("menuOverlayDiv");e||(e=dojo.create("div",{id:"menuOverlayDiv",style:"left:0px; top:0px; width:100%; height:100%; position:absolute; z-index:10;"},document.body));if(this.adjustPosition){var c=this.adjustPosition(a);b=dijit.popup.open;dijit.popup.open=function(a){a.x+=c.x;a.y+=c.y;b.call(dijit.popup,a)}}this.onClose=function(){var a=document.getElementById("menuOverlayDiv");a&&a.parentNode.removeChild(a)}.bind(this);
this.inherited(arguments)}finally{b&&(dijit.popup.open=b)}}});return n(null,{declaredClass:"davinci.Workbench_Menu",updateMenubar:function(a,b){console.error("updateMenubar")},_updateMainMenubar:function(a,b){console.error("_updateMainMenubar")},_addItemsToMenubar:function(a,b){console.error("_addItemsToMenubar")},_createMenu:function(b,c){var e,g;b.menus?(e=new h({parentMenu:b}),g=b.menus,b="onOpen"):(e=new a({}),g=b,b="menuOpened");e.domNode.style.display="none";e.actionContext=c;this._rebuildMenu(e,
g);dojo.connect(e,b,this,function(a){e._widgetCallback&&e._widgetCallback(a);this._rebuildMenu(e,g).focus()});return e},_rebuildMenu:function(a,g){dojo.forEach(a.getChildren(),function(b){a.removeChild(b);b.destroy()});a.focusedChild=null;var e,q;g.forEach(function(g,d){g.menus.length&&(g.isSeparator&&0<d&&(e=!0),g.menus.forEach(function(g){e&&q&&(a.addChild(new c({})),e=!1);q=!0;var d=g.label;g.action&&g.action.getName&&(d=g.action.getName());if(g.separator)g=davinci.Workbench._createMenu(g),g=new b({label:d,
popup:g,id:g.id+"item"}),g.actionContext=a.actionContext,a.addChild(g);else{var r=!0;g.isEnabled&&(r=k.getSelection(),r=(r=r[0]&&r[0].resource)?g.isEnabled(r):!1);if(g.action){if(g.action.shouldShow&&!g.action.shouldShow(a.actionContext,{menu:a}))return;r=g.action.isEnabled&&g.action.isEnabled(a.actionContext)}d={label:d,id:g.id,disabled:!r,onClick:dojo.hitch(this,"_runAction",g,a.actionContext)};g.iconClass&&(d.iconClass=g.iconClass);a.addChild(new b(d))}},this))},this);return a},_createMenuTree:function(a,
b){function e(a,b,e){b=(b||"additions").split("/");var g=c;davinci.Workbench._loadActionClass(a);var q=b[b.length-1];if(1<b.length)for(var d=0,r=b.length-1;d<r;d++){var p;a:{p=0;for(var u=g.length;p<u;p++)for(var v=0,h=g[p].menus.length;v<h;v++)if(b[d]==g[p].menus[v].id){p=g[p].menus[v].menus;break a}p=void 0}p&&(g=p)}d=0;for(r=g.length;d<r;d++)if(g[d].id==q){b=g[d].menus;b.push(a);if(a.separator){e=!1;b=a.menus=[];for(g=0;g<a.separator.length;g+=2)q=a.separator[g],e="additions"==q,b.push({id:q,isSeparator:a.separator[g+
1],menus:[]});e||b.push({id:"additions",isSeparator:!1,menus:[]})}return}e&&c.push({id:q,isSeparator:!1,menus:[a]})}a||(a=k.getExtensions("davinci.actionSets",function(a){return 0==k.getExtensions("davinci.actionSetPartAssociations",function(b){return b.targetID==a.id}).length}));for(var c=[],g=0,q=a.length;g<q;g++){var d=a[g];if(d.visible&&d.menu)for(var p=0,h=d.menu.length;p<h;p++){var m=d.menu[p];if(m.__mainMenu)for(var n=0;n<m.separator.length;n+=2)c.push({id:m.separator[n],isSeparator:m.separator[n+
1],menus:[]});else if(e(m,m.path,b),m.populate instanceof Function){var m=m.populate(),C;for(C in m)e(m[C],m[C].menubarPath)}}}g=0;for(q=a.length;g<q;g++)if(d=a[g],d.visible)for(p=0,h=d.actions.length;p<h;p++)C=d.actions[p],C.menubarPath&&e(C,C.menubarPath,b);return c}})})},"dijit/_Contained":function(){define(["dojo/_base/declare","./registry"],function(n,m){return n("dijit._Contained",null,{_getSibling:function(k){var h=this.domNode;do h=h[k+"Sibling"];while(h&&1!=h.nodeType);return h&&m.byNode(h)},
getPreviousSibling:function(){return this._getSibling("previous")},getNextSibling:function(){return this._getSibling("next")},getIndexInParent:function(){var k=this.getParent();return k&&k.getIndexOfChild?k.getIndexOfChild(this):-1}})})},"dcl/inherited":function(){(function(n){"undefined"!=typeof define?define(["./mini","./advise"],n):"undefined"!=typeof module?module.exports=n(require("./mini"),require("./advise")):n(dcl,advise)})(function(n,m){function k(b,c,g){var d=3>arguments.length&&b.callee,
a=h.call(this,d?d.ctr:b,d?d.nom:c);if(a)return a.apply(this,d?b||c:g)}function h(b,c){var g=this.constructor._meta,p,a,e;if(!+g.weaver[c]){if(g){if(g.chains.hasOwnProperty(c)){if(p=g.chains[c])for(e=p.length-1;0<=e;--e)if(a=p[e],a.ctr===b)return 0<e?p[e-1]:0;return}p=g.bases;for(e=p.length-1;0<=e&&p[e]!==b;--e);if(0<=e)for(++e,b=p.length;e<b;++e)if(g=(a=p[e])._meta){if((g=g.ownProps).hasOwnProperty(c))return g[c]}else return a.prototype[c]}return d[c]}}var d={};m.after(n,"_postprocess",function(b,
c){b=c._meta.bases;for(var g=b.length-1,d,a,e;0<=g;--g)if(d=b[g],a=d._meta)a=a.ownProps,n.allKeys(a).some(function(b){e=a[b];if("function"==typeof e){if(e.nom===b)return 1;e.nom=b;e.ctr=d}});c.prototype.inherited=k;c.prototype.getInherited=h});n.getInherited=k.get=h;return n.inherited=k})},"davinci/_common":function(){define([],function(){return{search:"Search",filter:"Filter","new":"New",errorSavingFile:"Error saving file: ${0} details: ${1}",palette:"palette",closeAllEditors:"Close all tabs",undo:"Undo",
redo:"Redo",copy:"Copy",paste:"Paste",cut:"Cut","delete":"Delete",surround:"Surround",properties:"Properties",styles:"Styles",events:"Events",preferences:"Preferences",addPane:"Add Pane",addColumn:"Add Column",addRow:"Add Row",removeColumn:"Remove Column",removeRow:"Remove Row",joinColumn:"Join Column",joinRow:"Join Row",splitColumn:"Split Column",splitRow:"Split Row",alignLeft:"Align Left",alignRight:"Align Right",alignTop:"Align Top",alignBottom:"Align Bottom",show:"Show",hide:"Hide",addMenuItem:"Add Menu Item",
addSubMenu:"Add Sub Menu",addMenuBarItem:"Add MenuBar Item",addPopupMenuBar:"Add Popup MenuBarItem",ok:"OK",cancel:"Cancel",page:"Page",title:"Title",metaInfo:"Meta Info",httpEquiv:"HTTP Equiv",style:"Style",theme:"Theme",styleSheets:"Style Sheets",rules:"Rules",url:"URL",externalScripts:"External Scripts",modules:"Modules",name:"Name",value:"Value",add:"Add",remove:"Remove",staticOptions:"Static Options",axisOptions:"Axis Options",series:"Series",axis:"Axis",option:"Option",selected:"Selected",staticItems:"Static Items",
dataStore:"Data Store",query:"Query",fields:"Fields",field:"Field",label:"Label",width:"Width",edit:"Edit",key:"Key",rootId:"Root ID",rootLabel:"Root Label",childrenAttrs:"Children Attributes",items:"Items",type:"Type",widget:"Widget",position:"Position",size:"Size",layout:"Layout",visual:"Visual",text:"Text",border:"Border",table:"Table",list:"List",aural:"Aural",others:"Others",onLoad:"Load",onUnload:"Unload",script:"Script",methodCall:"Method Call",serviceCall:"Service Call",object:"Object",method:"Method",
parameters:"Parameters",result:"Result",service:"Service",content:"Content",source:"Source",target:"Target",property:"Property",flowLayout:"Flow Layout",snapToNearestWidget:"Snap to nearest widget",showPossibleParents:"When dragging, show possible parents",warnOnCSSOverride:"Warn on CSS Override",absoluteWidgetsZindex:"z-index for sketch mode",widgetPaletteLayout:"In Palette, display widgets as",widgetPaletteShow_Icons:"icons",widgetPaletteShow_List:"list",liveEdit:"Live Edit",zazl:"Enable \x3ca href\x3d'http://zazl.org' target\x3d'_blank'\x3eZazl Optimizer\x3c/a\x3e",
selectorPrefix:"Selector Prefix",component:"Component",alternates:"Alternates",alternateWidgets:"Alternate widgets:",howToChooseAlternate:"To choose alternate widget, click-select current widget, then click on up arrow icon.",summary:"Summary:",description:"Description:",showSuggestedWidgets:"Suggested Widgets",showAllWidgets:"All Widgets",MoreIconTitleString:"Click here to see alternative similar widgets",HelpIconTitleString:"Click here to see descriptive info about this widget",__dummy__:""}})},
"dijit/dijitb":function(){define([],function(){})},"xide/manager/Application":function(){define("dcl/dcl xdojo/has xide/manager/ManagerBase xide/types xide/utils dojo/Deferred dojo/promise/all xide/manager/Application_UI".split(" "),function(n,m,k,h,d,b,c,g){k=[k];k.push(g);return n(k,{declaredClass:"xide.manager.Application",container:null,ctx:null,_debug:!0,_loadedComponents:{},_loadingComponents:null,getComponents:function(){return this._loadedComponents},doComponents:function(){function g(e,c){if(m(e)&&
a[e]&&a[e].dfd){var g=new b;d.push(g);a[e].dfd.then(function(){c(g)})}}var a=this.loadComponents(),e=require,q=this,d=[],w=new b;if(!a||!a.dfd)return console.error("componentsToLoad is null or has no head dfd"),a;var r=h.COMPONENT_NAMES;g(r.XTRACK,function(a){a.resolve()});g(r.XFILE,function(a){q.initXFile().then(function(){a.resolve()})});g(r.XIDEVE,function(a){q.initXIDEVE().then(function(){a.resolve()})});g(r.XNODE,function(a){q.initXNODE().then(function(){a.resolve()})});g(r.XBLOX,function(a){e(["xblox/embedded_ui",
"xfile/manager/BlockManager","xblox/views/BlocksFileEditor"],function(){q.onXBlocksReady().then(function(){a.resolve()})})});a.dfd.then(function(){c(d).then(function(){w.resolve()})});w.then(function(){q.registerEditorExtensions()});return w},loadComponents:function(c){if(this._loadingComponents)return this._loadingComponents;var a=this,e,g;a._loadedComponents={};c=c||d.getJson(this.ctx.getResourceManager().getVariable("COMPONENTS"));_.each(c,function(a,b){!1===m(b)&&delete c[b]});if(!c)return null;
e=function(){var b=_.find(c,{status:0});b?g(b.name,b):(c.dfd.resolve(c),a.publish(h.EVENTS.ON_ALL_COMPONENTS_LOADED,c),c.dfd.resolve())};g=function(b,c){var g=c.settings;!1===m(b)&&console.error("loading component "+b+"which is disabled by has!");a.ctx.getPluginManager().loadComponent(b,null,!0===g?null:g).then(function(g){a._loadedComponents[b]=g;g={component:g,name:b};c.dfd.resolve(g);a.publish(h.EVENTS.ON_COMPONENT_READY,g);c.status=1;e()})};for(var p in c){var w=""+p,r=c[w];c[w]=r?{settings:r,
status:0,name:w,dfd:new b}:{status:1}}c.dfd=new b;e();return this._loadingComponents=c},hasComponent:function(b){var a=d.getJson(this.ctx.getResourceManager().getVariable("COMPONENTS"));return!(!a||!a[b])}})})},"dijit/_FocusMixin":function(){define(["./focus","./_WidgetBase","dojo/_base/declare","dojo/_base/lang"],function(n,m,k,h){h.extend(m,{focused:!1,onFocus:function(){},onBlur:function(){},_onFocus:function(){this.onFocus()},_onBlur:function(){this.onBlur()}});return k("dijit._FocusMixin",null,
{_focusManager:n})})},"xcf/main":function(){define(["dojo/has","require","xide/Features","dojo/_base/lang"],function(n,m,k,h){function d(b,a){"undefined"!==typeof logError&&logError(b,a)}function b(b){var a=b.urlArgs(location.href);if(a=a.start?a.start.value:null){(a=b.replaceAll(".","/",a))&&n.add("x-"+a,function(){return!0});try{var e=b.getObject(m.toUrl(a));e.then&&e.then(function(a){main(a)},function(a){d(a,"custom app failed "+a.message);"err";a});return e}catch(q){d(q,"custom app failed "+q.message)}}return a}
n.add("electronx",function(){return null!=window.getElectronWindow},!0,!1);var c="undefined"!==typeof xcfConfig?xcfConfig:{},g="drivers devices xblox plugins xideve drivers-ui force-electron runDrivers electron xtrack showFiles".split(" ");_.each(g,function(b){n.add(b,function(){return-1==location.href.indexOf(b+"\x3dfalse")})});setTimeout(function(){return m("xdojo/declare dijit/dijit dojox/dojox xcf/types wcDocker/wcDocker xaction/xaction xblox/xblox xace/xace xwire/xwire xfile/xfile dgrid/dgrid xdocker/xdocker xgrid/xgrid xideve/xideve xlog/xlog xnode/xnode xlang/i18 xide/utils/StringUtils xide/types/Types xide/Lang davinci/davinci".split(" "),
function(p,a,e,q,u,h,r,v,x,k,z,y,B,C,E,F,G,D,H,J,Q){J.loadLanguage().then(function(){m("xide/debug xide/types/Types xcf/types/Types xaction/types xcf/Widgets xcf/Managers xcf/Views xcf/XCFCommons xcf/manager/Context xcf/GUIALL dojo/_base/lang xide/utils dojo/domReady!".split(" "),function(a,e,q,r,p,u,v,h,w,x,k,A){try{if(a=function(a){var b=A.urlArgs(location.href),e={};if(n("electronx")){$("body").addClass("electron");var q=(0,window.eRequire)("electron").remote,r=q.Menu,p=q.MenuItem,u=new p({label:"Cut",
click:function(){document.execCommand("cut")}}),v=new p({label:"Copy",click:function(){document.execCommand("copy")}}),p=new p({label:"Paste",click:function(){document.execCommand("paste")}}),h=new r;h.append(u);h.append(v);h.append(p);document.addEventListener("contextmenu",function(a){switch(a.target.nodeName){case "TEXTAREA":case "INPUT":a.preventDefault(),h.popup(q.getCurrentWindow())}},!1);u=q.BrowserWindow;r=u.getFocusedWindow()||u.mainWindow;u=u.args;if(r)r.webContents.on("will-navigate",function(a){try{a.preventDefault()}catch(na){console.error("")}});
2!=u.length&&3!=u.length||-1===u[0].indexOf(".exe")||b.userDirectory||(u[1]="--file\x3d"+u[1]);_.each(u,function(a){-1!==a.indexOf("--")&&(a=a.split("\x3d"),2==a.length&&(e[a[0].replace("--","")]=a[1]))});var r=q.require("yargs-parser")(u),r=A.toArray(r).filter(function(a){return"function"!==typeof a}),x=[];_.each(r,function(a){"true"!==a.value&&"false"!==a.value||x.push({name:a.name,value:"true"===a.value})});_.each(x,function(a){n.cache[a.name]=a.value});b.userDirectory&&(e.userDirectory=b.userDirectory.value)}b.userDirectory&&
(e.userDirectory=b.userDirectory.value);c.APP_FEATURES=g;b=new w(c,e);!window.sctx&&(window.sctx=b);b.prepare();b.getKeyTarget=function(){return $("#root")[0]};b.constructManagers(a);try{b.initManagers()}catch(aa){d(aa,"init managers")}return b.getApplication().start(!0,null,e)},$("body").addClass("claro"),!b(A))return a(null)}catch(W){d(W,"error in main")}})})})},100);k={};k.getCustomApp=b;return k})},"xide/mixins/EventedMixin":function(){define("dojo/_base/array dcl/dcl xdojo/declare xdojo/has xide/types xide/factory".split(" "),
function(n,m,k,h,d,b){h={_didRegisterSubscribers:!1,subscribers:null,subscribes:{},emits:{},__events:null,addPublishFilter:function(b,g){b&&(null!=g?this.emits[b]=g:b in this.emits&&delete this.emits[b])},filterSubscribe:function(b){return this.subscribes?!1!==this.subscribes[b]:!0},filterPublish:function(b){return this.emits?!1!==this.emits[b]:!0},subscribe:function(c,g,d){this.__events||(this.__events={});c=b.subscribe(c,g,d||this,this.filterSubscribe.bind(this));g=this.__events;d=0;for(var a=c.length;d<
a;d++){var e=c[d].type;g[e]||(g[e]=[]);g[e].push(c[d])}return c},publish:function(c,g,d,a){var e=this;0<a?setTimeout(function(){b.publish(c,g,d||e,e.filterPublish.bind(e))}.bind(e),a):b.publish(c,g,d||e,e.filterPublish.bind(e))},_destroyHandle:function(b){},_destroyHandles:function(){if(this.__events){for(var b in this.__events)n.forEach(this.__events[b],function(b){b&&b.remove&&b.remove()});delete this.__events}},destroy:function(){this._emit("destroy");this.inherited&&this.inherited(arguments);
this._destroyHandles()},once:function(b,g){function c(){a.unsubscribe(b,g);return g.apply(a,arguments)}var a=this;c.listener=g;a._on(b,c);return this},_emit:function(b){if(this.__events){if(!this._didRegisterSubscribers&&this.subscribers){for(var c=0;c<this.subscribers.length;c++){var d=this.subscribers[c];this._on(d.event,d.handler,d.owner)}this._didRegisterSubscribers=!0}if(!0===arguments[2])throw Error("Please use emit.sticky() instead of passing sticky\x3dtrue for event: "+b);c=this.__events[b];
d=1<arguments.length?arguments[2]:null;if(c){var a;if("function"==typeof c)switch(arguments.length){case 1:return c.call(this);case 2:return c.call(this,arguments[1]);case 3:return c.call(this,arguments[1],arguments[2]);default:var e=Array.prototype.slice.call(arguments,1);a=c.apply(this,e)}else if(_.isArray(c))for(var e=Array.prototype.slice.call(arguments,1),q=c.slice(),u,h=null,r=null,c=0,v=q.length;c<v;c++)h=q[c],r=h.owner||this,e&&e[0]&&(e[0].owner=e[0]?e[0].owner||r:null),h.handler&&(u=h.handler.apply(r,
e)),void 0!==u&&(a=u),e&&e[0]&&e[0].owner&&(e[0].owner=null);d&&!0===d["public"]&&this.publish(b,e);return a}}},unsubscribe:function(b,g){if(!this.__events||!this.__events[b])return this;if("function"!==typeof g||!g)return n.forEach(this.__events[b],dojo.unsubscribe),delete this.__events[b],this.__events[b]=[],this;var c=this.__events[b];if(_.isArray(c)){var a=[];_.each(c,function(b,c,d){(b.handler==g?b.handler:b.handler.listener==g&&b.handler.listener)&&a.push(b)});_.each(a,function(a){a.remove()});
0===c.length&&delete this.__events[b]}else(this.__events[b].listener||this.__events[b])===g&&delete this.__events[b];return this},listeners:function(b){this.__events||(this.__events={});this.__events[b]||(this.__events[b]=[]);isArray(this.__events[b])||(this.__events[b]=[this.__events[b]]);return this.__events[b]},addHandle:function(b,g){this.__events||(this.__events={});this.__events[b]||(this.__events[b]=[]);g.type=b;this.__events[b].push(g);return g},__on:function(b,g,d,a){var e=a;"function"!=
typeof d||a||(a=d,d=null);b=b.jquery?b:$(b);b.on(g,d,a);this.__events||(this.__events={});this.__events[g]||(this.__events[g]=[]);var c=this.__events[g];b={handler:e,owner:this,type:g,element:b,selector:d,remove:function(){c.remove(this);this.element.off(this.type,this.selector,this.handler)}};c.push(b);return b},_on:function(b,g,d){try{this.__events||(this.__events={});this.__events[b]||(this.__events[b]=[]);var a=this.__events[b];if(!a)this.__events[b]=g;else if(_.isArray(a)){if(-1!=a.indexOf(g))return 0;
g={handler:g,owner:d||this,type:b,remove:function(){a.remove(this);d&&d.__events&&d.__events[b]&&d.__events[b].remove(this);this.handler=this.owner=null;delete this.type}};a.push(g);return g}}catch(e){logError(e)}return this}};k=k(null,h);k.Impl=h;k.dcl=m(null,h);m.chainAfter(k.dcl,"destroy");return k})},"dojo/request/default":function(){define(["exports","require","../has"],function(n,m,k){var h=k("config-requestProvider");h||(h="./xhr");n.getPlatformDefaultId=function(){return"./xhr"};n.load=function(d,
b,c,g){m(["platform"==d?"./xhr":h],function(b){c(b)})}})},"xide/views/CIView":function(){define(["dcl/dcl","xide/views/CIViewMixin","xide/_base/_Widget"],function(n,m,k){n=n([k,m.dcl],{templateString:'\x3cdiv class\x3d"CIView"\x3e\x3c/div\x3e',data:null,widgets:null,delegate:null,helpNodes:null,store:null,groups:null,groupContainer:null,cssClass:"CIView",options:null,tabContainerStyle:null,sortGroups:function(h,d){return h=h.sort(function(b,c){return b.name&&c.name&&null!=d[b.name]&&null!=d[c.name]?
d[c.name]-d[b.name]:100})},getElements:function(h,d){for(var b=[],c=0;c<h.length;c++){var g=h[c];g.group===d&&b.push(g)}return b},startup:function(){this.cis&&(this.startDfd=this.initWithCIS(this.cis))}});n.release=m.release;return n})},"davinci/actions/SelectLayoutAction":function(){define(["dojo/_base/declare","./Action","../Workbench","davinci/lang/actions"],function(n,m,k,h){return n("davinci.actions.SelectLayoutAction",m,{_changeLayoutCommand:function(d){var b=dijit.byId("selectLayout");b&&b.destroyRecursive(!1);
if((b=k.getOpenEditor())&&b.getContext){var c=!0;if("absolute"===d||"Absolute positioning"===d)c=!1;b.getContext().setFlowLayout(c);b._visualChanged()}}})})},"dijit/_Container":function(){define(["dojo/_base/array","dojo/_base/declare","dojo/dom-construct","dojo/_base/kernel"],function(n,m,k,h){return m("dijit._Container",null,{buildRendering:function(){this.inherited(arguments);this.containerNode||(this.containerNode=this.domNode)},addChild:function(d,b){var c=this.containerNode;if(0<b){for(c=c.firstChild;0<
b;)1==c.nodeType&&b--,c=c.nextSibling;c?b="before":(c=this.containerNode,b="last")}k.place(d.domNode,c,b);this._started&&!d._started&&d.startup()},removeChild:function(d){"number"==typeof d&&(d=this.getChildren()[d]);d&&(d=d.domNode)&&d.parentNode&&d.parentNode.removeChild(d)},hasChildren:function(){return 0<this.getChildren().length},_getSiblingOfChild:function(d,b){h.deprecated(this.declaredClass+"::_getSiblingOfChild() is deprecated. Use _KeyNavMixin::_getNext() instead.","","2.0");var c=this.getChildren();
d=n.indexOf(c,d);return c[d+b]},getIndexOfChild:function(d){return n.indexOf(this.getChildren(),d)}})})},"xcf/manager/Application":function(){define("dcl/dcl require xide/manager/Application xide/utils xide/types xdojo/declare xdojo/has xdojo/has!xcf-ui?xcf/manager/Application_UI xdojo/has!xexpression?xexpression/Expression".split(" "),function(n,m,k,h,d,b,c,g,p){return n([k,g],{declaredClass:"xcf.manager.Application",vfsItems:null,onReloaded:function(){},onMountDataReady:function(a){},onPluginLoaded:function(a){this.publish(d.EVENTS.ON_PLUGIN_READY,
{name:a.name,mainView:this.rootView,config:this.config,ctx:this.ctx,panelManager:this,fileManager:this.ctx.getFileManager(),store:this.store,serviceObject:this.ctx.getService()},this)},_onXBlocksReady:function(){m("xfile/manager/BlockManager");var a=this.ctx;if(a.blockManager)a.blockManager.onReady();m(["xcf/manager/BlockManager"],function(b){a.blockManager=new b;a.blockManager.ctx=a;a.blockManager.updatePalette=!1;a.blockManager.init();a.blockManager.onReady();a.blockManager.serviceObject=a.fileManager.serviceObject});
var b=m("xblox/views/BlocksFileEditor");a.registerEditorExtension("xBlocks","xblox","fa-play-circle-o",this,!0,null,b,{ctx:this.ctx,mainView:this.mainView,blockManagerClass:"xfile.manager.BlockManager",registerView:!0})}})})},"davinci/ve/palette/Palette":function(){define("dojo/_base/declare dojo/_base/lang dojo/_base/connect dojo/on dojo/query dojo/dom-class dojo/Deferred dijit/focus dijit/_WidgetBase davinci/Runtime davinci/Workbench dijit/_KeyNavContainer dijit/form/TextBox dijit/form/DropDownButton dijit/DropDownMenu dijit/MenuItem davinci/ui/dnd/DragSource davinci/ve/metadata davinci/library ./PaletteFolder ./PaletteItem davinci/_common davinci/ve/tools/CreateTool davinci/workbench/Preferences".split(" "),
function(n,m,k,h,d,b,c,g,p,a,e,q,u,w,r,v,x,A,z,y,B,C,E,F){return n("davinci.ve.palette.Palette",[p,q],{descriptors:"",_displayShowValue:"block",_presetClassNamePrefix:"maqPaletteSection_",_presetSections:{},_presetCreated:{},raisedItems:[],sunkenItems:[],moreItems:[],helpItems:[],_userWidgetSection:{id:"$$UserWidgets$$",name:"User Widgets",includes:[]},postMixInProperties:function(){this._resource=C},postCreate:function(){dojo.addClass(this.domNode,"dojoyPalette");this.refresh();k.subscribe("/davinci/ui/addedCustomWidget",
this,"addCustomWidget");k.subscribe("/davinci/preferencesChanged",this,"preferencesChanged")},addCustomWidget:function(b){if(this._loaded&&b&&b.$wm&&b.$wm.widgets&&b.$wm.widgets.length){var c=a.currentEditor.getContext().getCompType();F.getPreferences("davinci.ve.editorPrefs",e.getProject()).showAllWidgets&&(c="mobile"==c?"$ALLMOBILE":"$ALLDESKTOP");var g=b.$wm;b=b.$wm.widgets;for(var d=null,q=0;q<b.length;q++){var r=b[q],p;for(p in this._presetSections){var u=null,v=this._presetSections[p];if(v){for(var h=
0;h<v.length;h++){var w=v[h];if("$$UserWidgets$$"==w.id){u=w;break}}u||(u=dojo.clone(this._userWidgetSection),u.preset=this._presetSections[p],u.presetId=p,u.items=[],v.push(u),this._presetCreated[p]&&(this._generateCssRules([u]),this._createPalette(u),u._created=!0));v="type:"+r.type;if(0>u.includes.indexOf(v)){u.includes.push(v);r.$library=g;r.section=u;r._paletteItemGroup=this._paletteItemGroupCount++;u.items.push(r);v=null;h=this.getChildren();for(w=0;w<h.length;w++){var x=h[w];if("davinci.ve.palette.PaletteFolder"==
x.declaredClass&&x.presetId==p&&"$$UserWidgets$$"==x.section.id){v=x;break}}v&&(v.domNode.style.display="none",u={displayName:r.$library._maqGetString(r.type)||r.$library._maqGetString(r.name)||r.name,description:r.$library._maqGetString(r.type+"_description")||r.$library._maqGetString(r.name+"_description")||r.description||r.type,name:r.name,paletteId:this.id,type:r.type,data:r.data||{name:r.name,type:r.type,properties:r.properties,children:r.children},tool:r.tool,category:"custom",section:u,PaletteFolderSection:v,
PaletteFolderSubsection:null,_paletteItemGroup:r._paletteItemGroup,_paletteGroupSelected:!0},this._setIconProperties(r,u),this._createItem(u,v).domNode.style.display="none",c==p&&(d=v))}}else console.error("Palette.js:addCustomWidget - no sections for comptype\x3d"+p)}}d&&d.showHideFolderContents(!0)}},setContext:function(a){this._context=a;try{this._loadPalette()}catch(D){console.error("_loadPalette:crash "+D)}this._filter();this.updatePaletteVisibility()},refresh:function(){delete this._loaded;
this._presetSections={};this._createFolderTemplate();this._createHeader();if(this._context)try{this._loadPalette()}catch(G){console.error("_loadPalette:crash")}},_loadPalette:function(){if(!this._loaded){var b=A.getLibrary(),c={};z.getUserLibs(e.getProject()).forEach(function(a){var e;a:{e=a.id;a=a.version;for(var g in b)if(b.hasOwnProperty(g)){var d=b[g];if(d.name===e&&d.version===a){a={};a[e]=b[g];e=a;break a}}e=null}e&&dojo.mixin(c,e)});var g={},d=[],q;for(q in c)if(c.hasOwnProperty(q)){var r=
c[q].$wm;r&&dojo.forEach(r.widgets,function(a){"untested"==a.category||a.hidden||d.push(a.type)})}this._paletteItemGroupCount=0;if(this._widgetPalette=a.getSiteConfigData("widgetPalette"))if((q=this._widgetPalette.presets)&&"object"==typeof q)for(var p in q){r=d.concat();this._presetSections[p]=[];var u=q[p],v,h="string"==typeof u.sections?this._widgetPalette.defs?this._widgetPalette.defs[u.sections]:void 0:u.sections;if(h&&h.length){var w=[],x;for(x in g){var k=g[x];k.descriptor&&w.push({name:x,
value:k})}w.sort(function(a,b){a=a.name.split("/").pop().toLowerCase();b=b.name.split("/").pop().toLowerCase();return a<b?-1:a>b?1:0});for(var k=!1,m,y=0;y<w.length;y++){k||(x=dojo.clone(this._userWidgetSection),h=h.concat(x),k=!0,m=x.includes);var n=w[y].value.descriptor.widgets;for(x=0;x<n.length;x++)m.push("type:"+n[x].type)}for(w=0;w<h.length;w++){k=dojo.clone("string"==typeof h[w]?this._widgetPalette.defs?this._widgetPalette.defs[h[w]]:void 0:h[w]);k.preset=u;k.presetId=p;if(k.subsections&&k.subsections.length)for(y=
k.subsections,n=0;n<y.length;n++){if("string"==typeof y[n]){var C=this._widgetPalette.defs?this._widgetPalette.defs[y[n]]:void 0;C&&(y[n]=dojo.clone(C))}C=y[n];C.includes&&0<=C.includes.indexOf("$$AllOthers$$")&&(v=C);C.preset=u;C.presetId=p;this._createSectionItems(C,u,r)}else this._createSectionItems(k,u,r),k.includes&&0<=k.includes.indexOf("$$AllOthers$$")&&(v=k);this._presetSections[p].push(k)}}else console.warning("No sections defined for preset "+p+" in widgetPalette.json (in siteConfig folder)");
for(u=0;u<r.length;u++)h=r[u],v&&(h=A.getWidgetDescriptorForType(h),h=dojo.clone(h),this._prepareSectionItem(h,v,this._paletteItemGroupCount),v.items.push(h),this._paletteItemGroupCount++)}else console.warning("No presets defined in widgetPalette.json (in siteConfig folder)");else console.error("widgetPalette.json not defined (in siteConfig folder)");this._loaded=!0}},_generateCssRules:function(a){var b=dojo.doc.styleSheets[0];b&&dojo.forEach(a,function(a){a.items&&dojo.forEach(a.items,function(a){var e=
a.iconBase64||this._getIconUri(a.icon,"ve/resources/images/file_obj.gif");a="img.davinci_"+a.type.replace(/[\.\/]/g,"_");e="{background-image: url("+e+")}";dojo.isIE?b.addRule(a,e):b.insertRule(a+e,b.cssRules.length)},this)},this)},_createPaletteItemsForComponent:function(a,b){if(a.items){var e=null;dojo.forEach(a.items,function(c){if(!c.hidden){var g={displayName:c.$library._maqGetString(c.type)||c.$library._maqGetString(c.name)||c.name,description:c.$library._maqGetString(c.type+"_description")||
c.$library._maqGetString(c.name+"_description")||c.description||c.type,name:c.name,paletteId:this.id,type:c.type,data:c.data||{name:c.name,type:c.type,properties:c.properties,children:c.children},category:a.name,section:a,preset:a.preset,presetId:a.presetId,presetClassName:b.presetClassName,PaletteFolderSection:b.PaletteFolderSection,PaletteFolderSubsection:b.PaletteFolderSubsection,_paletteItemGroup:c._paletteItemGroup,_paletteGroupSelected:c._paletteItemGroup!=e,_collectionName:c.$library&&c.$library.collections&&
c.$library.collections[c.collection]&&c.$library.collections[c.collection].name,ignoreMeta:c.ignoreMeta,userData:c.userData,forceShow:c.forceShow,iconHTML:c.iconHTML};this._setIconProperties(c,g);this._createItem(g);e=c._paletteItemGroup}},this)}},_createPalette:function(a){var b=a.presetId?this._presetClassNamePrefix+a.presetId:null,e={paletteId:this.id,icon:this._getIconUri(a.icon,"ve/resources/images/fldr_obj.gif"),iconBase64:a.iconBase64,displayName:a.name,section:a,subsections:a.subsections,
subsection_container:null,preset:a.preset,presetId:a.presetId,presetClassName:b};this._createFolder(e).then(function(e){if(a.subsections&&a.subsections.length)for(var c=0;c<a.subsections.length;c++){var g=a.subsections[c],g={paletteId:this.id,icon:this._getIconUri(g.icon,"ve/resources/images/fldr_obj.gif"),iconBase64:g.iconBase64,displayName:g.name,section:a,subsection:g,subsection_container:e,preset:a.preset,presetId:a.presetId,presetClassName:b};this._createFolder(g).then(function(g){e._children.push(g);
this._createPaletteItemsForComponent(a.subsections[c],{presetClassName:b,PaletteFolderSection:e,PaletteFolderSubsection:g})}.bind(this))}else this._createPaletteItemsForComponent(a,{presetClassName:b,PaletteFolderSection:e,PaletteFolderSubsection:null})}.bind(this))},_getIconUri:function(a,b){return a?0==a.indexOf("http")?a:e.location()+a:require.toUrl("davinci/"+b)},_createFolder:function(a){var b=new c;require(["davinci/ve/palette/PaletteFolder"],function(e){e=new e(a);this.addChild(e);b.resolve(e)}.bind(this));
return b},_createFolderTemplate:function(){this.folderTemplate=dojo.create("div",{className:"dojoyPaletteCommon dojoyPaletteFolder dojoyPaletteFolderLow ui-widget-header",innerHTML:'\x3ca href\x3d"javascript:void(0)"\x3e\x3cimg border\x3d"0"/\x3e\x3c/a\x3e'})},_createHeader:function(){},_updateShowAllWidgetsPreference:function(a){var b=e.getProject(),c=F.getPreferences("davinci.ve.editorPrefs",b);c.showAllWidgets=a;F.savePreferences("davinci.ve.editorPrefs",b,c)},_updateShowAllWidgetsMenu:function(a){},
_clearFilter:function(){this.filterField&&this.filterField.set("value","");this._filter()},_filter:function(){var a=this.context.getCompType(),b=F.getPreferences("davinci.ve.editorPrefs",e.getProject());b.showAllWidgets=!0;b.showAllWidgets&&(a="mobile"==a?"$ALLMOBILE":"$ALLDESKTOP");dojo.removeClass(this.domNode,"maqWidgetsFiltered");this.toolbarDiv&&dojo.removeClass(this.toolbarDiv,"maqWidgetsToolbarFiltered");this.getChildren().forEach(function(b){"dijit.form.TextBox"!=b.declaredClass&&dojo.style(b.domNode,
"display","davinci.ve.palette.PaletteFolder"===b.declaredClass&&b.presetId==a&&0<b._children.length&&("simple"==b._type||"subsection_container"==b._type)?"block":"none")})},_hasItem:function(a){for(var b=this.getChildren(),e=0;e<b.length;e++)if(b[e].type==a)return!0;return!1},_createItem:function(a,b){if("$$UserWidgets$$"!=a.section.id){var e=A.queryDescriptor(a.type,"collection"),c;if(a.preset&&(c=a.preset.collections,!c||!c.length)){console.error("_create item : presetCollections.l\x3d0");return}if(a.preset&&
a.preset.exclude){var g="string"==typeof a.preset.exclude?this._widgetPalette.defs?this._widgetPalette.defs[a.preset.exclude]:void 0:a.preset.exclude;if(g&&0<=g.indexOf(a.type)){console.error("_create item : exclude \x3d 1");return}}g=!1;if(c&&c.length){for(var q=0;q<c.length;q++)if(c[q].id==e&&c[q].show){g=!0;break}!0===a.ignoreMeta&&(g=!0);if(!g)return}}a.icon=a.iconLarge;e=new B(a);b?b.addChild(e):this.addChild(e);a.paletteItem=e;a.PaletteFolderSubsection?(a.PaletteFolderSubsection._children.push(e),
e.domNode.style.display=a.PaletteFolderSubsection._isOpen&&e._paletteGroupSelected?this._displayShowValue:"none"):a.PaletteFolderSection&&(a.PaletteFolderSection._children.push(e),e.domNode.style.display=a.PaletteFolderSection._isOpen&&e._paletteGroupSelected?this._displayShowValue:"none");b=d(".paletteItemImageContainer",e.domNode)[0];b=new x(e.domNode,"component",e,b);b.targetShouldShowCaret=!0;b.returnCloneOnFailure=!1;this.connect(b,"onDragStart",dojo.hitch(this,function(a){this.onDragStart(a)}));
this.connect(b,"onDragEnd",dojo.hitch(this,function(a){this.onDragEnd(a)}));a.forceShow&&(e.domNode.style.display="inline-block");return e},_prepareSectionItem:function(a,b,e){var c=A.getLibraryMetadataForType(a.type);a.$library=c;a.section=b;a._paletteItemGroup=e},_createSectionItems:function(a,b,e){a.items=[];collections=b.collections;var c=a.includes;if(!c||!c.length)return console.error("No includes property for preset "+b+" in widgetPalette.json (in siteConfig folder)"),[];for(b=0;b<c.length;b++){for(var g=
c[b],d=m.isArray(g)?g:[g],g=[],q=0;q<d.length;q++){var r=d[q],p=[];if("type:"===r.substr(0,5)){var u=A.getWidgetDescriptorForType(r.substr(5));u&&p.push(u)}else p=A.getWidgetsWithTag(r);for(r=0;r<p.length;r++)u=p[r],u=dojo.clone(u),this._prepareSectionItem(u,a,this._paletteItemGroupCount),g.push(u)}d=[];if(collections&&collections.length){for(p=0;p<collections.length;p++)for(r=collections[p],q=0;q<g.length;)u=g[q],u.collection==r.id?(d.push(u),g.splice(q,1)):q++;for(q=0;q<g.length;q++)d.push(g[q])}else d=
g;for(q=0;q<d.length;q++)g=d[q],p=e.indexOf(g.type),0<=p&&e.splice(p,1),a.items.push(g);this._paletteItemGroupCount++}},updatePaletteVisibility:function(){this._clearFilter();this._updateShowAllWidgetsMenu();var b=a.currentEditor.getContext().getCompType();this._presetCreated[b]=!0;dojo.addClass(this.domNode,"paletteLayoutIcons");this._displayShowValue="inline-block";var e=this._presetSections[b];if(e)for(var c=0;c<e.length;c++){var g=e[c];g._created||(this._generateCssRules([g]),this._createPalette(g),
g._created=!0)}e=this.getChildren();c=0;for(g=e.length;c<g;c++){var q=e[c];q&&q.domNode&&q.presetId&&("davinci.ve.palette.PaletteFolder"==q.declaredClass?(q.domNode.style.display=q.presetId==b?0==q._children.length||"subsection"==q._type?"none":"block":"none","subsubsection_container"==q._type&&(q._openSubsection=null),q._isOpen=!1):q.domNode.style.display=q.forceShow?"inline-block":"none")}},preferencesChanged:function(){for(var a=F.getPreferences("davinci.ve.editorPrefs",e.getProject()),a=a.widgetPaletteLayout&&
"icons"!=a.widgetPaletteLayout?"icon":"iconLarge",b=this.getChildren(),c=0;c<b.length;c++){var g=b[c];"davinci.ve.palette.PaletteItem"==g.declaredClass&&g.updateImgSrc(g[a])}this.updatePaletteVisibility()},flattenAll:function(){for(var a=0;a<this.raisedItems.length;a++)this.raisedItems[a].flat(this.raisedItems[a].domNode);this.raisedItems=[];for(a=0;a<this.sunkenItems.length;a++){var b=this.sunkenItems[a];b._tooltipDialog&&(b.paletteItemMoreCloseCleanup(),b.paletteItemHelpCloseCleanup());b.flat(b.domNode);
b._selectionShowing=!1}this.sunkenItems=[]},removeSelectionAll:function(){try{this.flattenAll()}catch(J){console.error("flatten failed")}for(var a=d(".paletteItemSelectionContent",this.domNode),b=0;b<a.length;b++){var e=a[b];e&&e.parentNode&&(e.parentNode.innerHTML="")}},getPaletteItemsSameGroup:function(a){for(var b=[],e=a._paletteItemGroup,c;a&&a._paletteItemGroup;)if(a._paletteItemGroup==e)a=(c=a)&&a.domNode&&a.domNode.previousSibling&&a.domNode.previousSibling._paletteItem;else break;for(a=c;a&&
a._paletteItemGroup==e;)b.push(a),a=a&&a.domNode&&a.domNode.nextSibling&&a.domNode.nextSibling._paletteItem;return b},_setIconProperties:function(a,b){b.icon=a.iconBase64||a.icon&&this._getIconUri(a.icon,"ve/resources/images/file_obj.gif")||a.iconLargeBase64||a.iconLarge&&this._getIconUri(a.iconLarge,"ve/resources/images/file_obj.gif")||this._getIconUri(a.icon,"ve/resources/images/file_obj.gif");b.iconLarge=a.iconLargeBase64||a.iconLarge&&this._getIconUri(a.iconLarge,"ve/resources/images/file_obj.gif")||
a.iconBase64||this._getIconUri(a.icon,"ve/resources/images/file_obj.gif")},onDragStart:function(a){this.removeSelectionAll();this.selectedItem=null;var e=a.dragSource.data;A.getHelper(e.type,"tool").then(function(a){a=new (a||E)(dojo.clone(e.data),e.userData);this._context.setActiveTool(a)}.bind(this));this._context.blockChange(!1);a._dragClone&&(b.add(a._dragClone,"paletteDragContainer"),dojo.create("div",{className:"maqCandidateParents"},a._dragClone));this._context.setActiveDragDiv(a._dragClone);
this._dragKeyDownListener=dojo.connect(document,"onkeydown",dojo.hitch(this,function(a){var b=this._context.getActiveTool();if(b&&b.onKeyDown)b.onKeyDown(a)}));this._dragKeyUpListener=dojo.connect(document,"onkeyup",dojo.hitch(this,function(a){var b=this._context.getActiveTool();if(b&&b.onKeyUp)b.onKeyUp(a)}))},onDragEnd:function(a){this._context.setActiveTool(null);this._context.setActiveDragDiv(null);dojo.disconnect(this._dragKeyDownListener);dojo.disconnect(this._dragKeyUpListener);g.curNode&&
g.curNode.blur&&g.curNode.blur();this.removeSelectionAll();this.selectedItem=null;this.flattenAll()},onDragMove:function(a){},nop:function(){return!1},__dummy__:null})})},"xide/layout/_Accordion":function(){define(["dcl/dcl","xide/types","xide/utils","xide/factory","xide/_base/_Widget"],function(n,m,k,h,d){function b(b){function a(a,b){setTimeout(function(){h.publish(m.EVENTS.RESIZE,{view:a})},1E3)}return n(b||d,{declaredClass:"xide/widgets/TabContainerTab",iconClass:null,_open:!0,titleBar:null,titleNode:null,
toggleNode:null,containerNode:null,height:"400px",padding:"0px",panelNode:null,templateString:"\x3cdiv\x3e\x3c/div\x3e",isContainer:!0,lazy:!0,containerRoot:null,scrollable:!1,unselect:function(){this.hide()},select:function(){return this.show()},set:function(a,b){"loading"===a&&(this.$loading&&k.destroy(this.$loading[0]),!0===b&&(this.$loading=$('\x3cdiv class\x3d"container-fluid center-block panel-spinner" style\x3d"opacity: 1;position: absolute;top:50%;"\x3e\x3cdiv class\x3d""\x3e\x3cdiv class\x3d"offset3 span6 centering center-block"\x3e\x3cdiv class\x3d"fa fa-3x fa-spinner fa-spin "/\x3e\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e'),
this.$containerNode.append(this.$loading)))},show:function(){var a=$(this.containerRoot),b=$(this.toggleNode);b.removeClass("collapsed");b.attr("aria-expanded",!0);a.removeClass("collapse");a.addClass("collapse in");a.attr("aria-expanded",!0);this.open=!0;this._startWidgets()},hide:function(){var a=$(this.containerRoot),b=$(this.toggleNode);b.addClass("collapsed");b.attr("aria-expanded",!1);a.removeClass("collapse in");a.addClass("collapse");a.attr("aria-expanded",!1);this.open=!1},onFirstTimeShown:function(){var b=
this;_.each(this._getChildren(),function(e){if(!e._started&&e.startup){var c=e.startup();e.resizeAfterStartup&&(c.then?c.then(function(){a.apply(b,[e,1])}):a.apply(b,[e,1]))}},this);this.$titleBar.addClass("open")},_onHided:function(){this.open=!1;this._emit("hide",{view:this});this.onHide();this.$titleBar.removeClass("open")},_onShown:function(a){this.open=!0;this._startWidgets();this._onShow(a);this.resize();this._emit("show",{view:this});this.onShow()},_onShow:function(){this.open=!0;this.resize();
this.$titleBar.addClass("open")},getChildren:function(){return this._widgets},shouldResizeWidgets:function(){return this.open},_onHide:function(){this.open=!1},add:n.superCall(function(a){return function(b,e,c,g){this.lazy&&!1!==b.allowLazy&&(e?!1!==e.allowLazy:1)&&(g=!1);return a.apply(this,[b,e,c,g])}}),addChild:function(a,b,c){this.add(a,b);a.domNode&&k.addChild(this.containerNode,a.domNode);!1!==c&&!a._started&&a.startup&&a.startup()},buildRendering:function(){this.inherited(arguments);var a=
this.panelNode;this.__addHandler(a,"hidden.bs.collapse","_onHided");this.__addHandler(a,"hide.bs.collapse","_onHide");this.__addHandler(a,"shown.bs.collapse","_onShown");this.__addHandler(a,"show.bs.collapse","_onShow")},postMixInProperties:function(){var a=!this.open;this.ariaOpen=a?"true":"false";this.containerClass=a?"collapse":"collapse in";this.titleClass=a?"collapsed":"";a=this.iconClass?'\x3cspan attachTo\x3d"iconNode" class\x3d"${!iconClass}"/\x3e':"";this.scrollable=!0;this.templateString=
'\x3cdiv tabindex\x3d"1"  class\x3d"panel " attachTo\x3d"panelNode"\x3e\x3cdiv class\x3d"panel-heading" attachTo\x3d"titleBar"\x3e'+('\x3ca tabIndex\x3d"-1" attachTo\x3d"toggleNode" href\x3d"#${!id}-Collapse" data-toggle\x3d"collapse" class\x3d"accordion-toggle ${!titleClass} ellipsis" aria-expanded\x3d"${!ariaOpen}"\x3e'+a+'\x3cspan attachTo\x3d"titleNode" class\x3d""\x3e ${!title}\x3c/span\x3e\x3c/a\x3e')+'\x3c/div\x3e\x3cdiv attachTo\x3d"containerRoot" class\x3d"containerNode panel-collapse ${!containerClass}" id\x3d"${!id}-Collapse" aria-expanded\x3d"${!ariaOpen}"\x3e\x3cdiv style\x3d"height: ${!height};padding:${!padding};position:relative" class\x3d"panel-body" attachTo\x3d"containerNode"\x3e\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e';
return this.inherited(arguments)},startup:function(){if(this.containerNode){var a=this;this.containerNode.set=function(b,e){"title"===b?a.titleNode.innerHTML="\x26nbsp"+e:"iconClass"===b&&(b=$(a.iconNode),b.removeAttr("class"),b.addClass(e))};this.open&&this.$titleBar.addClass("open")}}})}function c(c,a){return n(c,{scrollable:!1,tabHeight:null,declaredClass:"xide/layout/_Accordion",resizeToParent:!0,defaultIcons:{General:"fa-cogs",Send:"fa-terminal",Description:"fa-info",Files:"fa-folder",Special:"fa-cogs"},
postMixInProperties:n.superCall(function(a){return function(){return a?a.apply(this,arguments):null}}),selectedChildWidget:null,tabClass:a||b(d),templateString:'\x3cdiv class\x3d"panel-group" attachTo\x3d"containerNode"\x3e\x3c/div\x3e',getTab:function(a){return _.find(this._widgets,{title:a})},onShow:function(){},selectChild:function(a,b){if(a&&_.isString(a)){var e=this.getTab(a);e&&e.select&&(this._unselectAll(a),e.select(),this.selectedChildWidget=e,b&&e._onShown())}},addWidget:function(a,b,c,
g,d,p,h,k,z){c=g;a.isContainer||(c=this._createTab(this.tabClass,{title:b.title,iconClass:b.icon||this.defaultIcons[b.title],open:b.open,ignoreAddChild:!0,scrollable:this.scrollable,height:this.tabHeight||"400px"}));return c.add(a,b,null,d)},_unselectAll:function(a){_.each(this._widgets,function(b){a&&a===b.title||b.unselect()})},_createTab:function(a,b){return this.add(a,b,this.containerNode,!0)},createTab:function(a,b,c,g,d){return this._wireTab(this._createTab(g||this.tabClass,k.mixin({iconClass:b||
this.defaultIcons[a],open:c,title:a,scrollable:this.scrollable},d)))},_wireTab:function(a){var b=this;a._on("show",function(a){b._emit("show",a)});a._on("hide",function(a){b._emit("hide",a)});return a},removeChild:function(a,b){if(a=_.isString(a)?this.getTab(a):a){if(a.destroy(),this._widgets||(this._widgets=[]),this._widgets.remove(a),!1!==b&&(a=this._widgets[this._widgets.length-1]))this.resize(),this.selectChild(a)}else console.error("invalid child !")},addChild:function(a,b){if(a){if($(a.domNode||
a.containerNode).hasClass("panel"))return this.add(a);var e=this.createTab(b);e.add(a,b);return e}}})}var g=c(d);g.tabClass=b(d);g.createTabClass=b;g.createTabContainerClass=c;return g})},"davinci/ve/utils/CssUtils":function(){define(["dojo/_base/Color","davinci/ve/utils/URLRewrite"],function(n,m){var k=[],h;for(h in n.named)"transparent"!=h&&k.push(h);k.sort(function(a,b){return 0==b.indexOf(a)?1:0==a.indexOf(b)?-1:a<b?-1:1});var d=[];k.forEach(function(a){d.push(a);a=n.named[a];a="#"+(16777216+
(a[0]<<16)+(a[1]<<8)+a[2]).toString(16).slice(1);d.push(a)});var b=/^\-?(?:\d*\.\d+|\d+)$/,k="(?:";for(h=0;h<d.length;h+=2)0!=h&&(k+="|"),k+=d[h];k="(?:"+(k+")")+"|\\#(?:[0-9A-Fa-f]{6}|[0-9A-Fa-f]{3})|(?:rgb|hsl)\\s*\\(\\s*(?:(?:\\d*\\.\\d+|\\d+)%?)\\s*,\\s*(?:(?:\\d*\\.\\d+|\\d+)%?)\\s*,\\s*(?:(?:\\d*\\.\\d+|\\d+)%?)\\s*\\)|(?:rgba|hsla)\\s*\\(\\s*(?:(?:\\d*\\.\\d+|\\d+)%?)\\s*,\\s*(?:(?:\\d*\\.\\d+|\\d+)%?)\\s*,\\s*(?:(?:\\d*\\.\\d+|\\d+)%?)\\s*,\\s*(?:\\d*\\.\\d+|\\d+)\\s*\\))";h="(?:"+k+"(?:\\s+(?:\\-?(?:\\d*\\.\\d+|\\d+)(?:in|cm|mm|pt|pc|px|%)|0))?)";
var c=new RegExp("(?:\\s*("+k+")\\s*((?:\\-?(?:\\d*\\.\\d+|\\d+)(?:in|cm|mm|pt|pc|px|%)|0))?\\s*,?(.*))");h="("+h+"(?:\\s*,\\s*"+h+")*)";var g=/^\s*(url)\s*\(\s*(?:\'([^\']*)\'*|\"([^\"]*)\"|([^\'\"]*))\s*\)\s*$/,p=new RegExp("^\\s*((?:-moz-linear-gradient|-webkit-linear-gradient|-ms-linear-gradient|-o-linear-gradient|linear-gradient))\\s*\\(\\s*(?:(?:to\\s+((?:\\s*left\\s*|\\s*right\\s*|\\s*top\\s*|\\s*bottom\\s*){1,2})|((?:\\s*left\\s*|\\s*right\\s*|\\s*top\\s*|\\s*bottom\\s*){1,2})|((?:\\-?(?:\\d*\\.\\d+|\\d+)deg)))\\s*,\\s*)?\\s*"+
h+"\\s*\\)\\s*$"),a=new RegExp("^\\s*((?:-moz-radial-gradient|-webkit-radial-gradient|-ms-radial-gradient|-o-radial-gradient|radial-gradient))\\s*\\(\\s*(?:\\s*(?:\\s*(\\s*(?:(?:\\-?(?:\\d*\\.\\d+|\\d+)(?:in|cm|mm|pt|pc|px|%)|0)|(?:left|center|right|top|bottom))(?:\\s*(?:(?:\\-?(?:\\d*\\.\\d+|\\d+)(?:in|cm|mm|pt|pc|px|%)|0)|(?:left|center|right|top|bottom)))?)\\s*((?:\\-?(?:\\d*\\.\\d+|\\d+)deg))\\s*|\\s*(\\s*(?:(?:\\-?(?:\\d*\\.\\d+|\\d+)(?:in|cm|mm|pt|pc|px|%)|0)|(?:left|center|right|top|bottom))(?:\\s*(?:(?:\\-?(?:\\d*\\.\\d+|\\d+)(?:in|cm|mm|pt|pc|px|%)|0)|(?:left|center|right|top|bottom)))?)\\s*|\\s*((?:\\-?(?:\\d*\\.\\d+|\\d+)deg))\\s*)\\s*,\\s*)?\\s*(?:\\s*(?:\\s*(circle|ellipse)\\s*((?:(?:closest-side|farthest-side|closest-corner|farthest-corner|contain|cover)|(?:(?:\\-?(?:\\d*\\.\\d+|\\d+)(?:in|cm|mm|pt|pc|px|%)|0)(?:\\s+(?:\\-?(?:\\d*\\.\\d+|\\d+)(?:in|cm|mm|pt|pc|px|%)|0)\\s*)?)))\\s*|\\s*((?:(?:closest-side|farthest-side|closest-corner|farthest-corner|contain|cover)|(?:(?:\\-?(?:\\d*\\.\\d+|\\d+)(?:in|cm|mm|pt|pc|px|%)|0)(?:\\s+(?:\\-?(?:\\d*\\.\\d+|\\d+)(?:in|cm|mm|pt|pc|px|%)|0)\\s*)?)))\\s*(circle|ellipse)\\s*|\\s*(circle|ellipse)\\s*|\\s*((?:(?:closest-side|farthest-side|closest-corner|farthest-corner|contain|cover)|(?:(?:\\-?(?:\\d*\\.\\d+|\\d+)(?:in|cm|mm|pt|pc|px|%)|0)(?:\\s+(?:\\-?(?:\\d*\\.\\d+|\\d+)(?:in|cm|mm|pt|pc|px|%)|0)\\s*)?)))\\s*)\\s*,\\s*)?\\s*"+
h+"\\s*\\)\\s*$"),e=/(?:\s*((?:top|bottom|left|right|center|(?:\-?(?:\d*\.\d+|\d+)%?)))\s+((?:top|bottom|left|right|center|(?:\-?(?:\d*\.\d+|\d+)%?)))\s*)/;h="("+("(?:\\s*,\\s*"+("(?:"+("(?:color-stop\\s*\\(\\s*(?:\\-?(?:\\d*\\.\\d+|\\d+)%?)\\s*,\\s*"+k+"\\s*\\)\\s*)")+"|"+("(?:from\\s*\\(\\s*"+k+"\\s*\\)\\s*)")+"|"+("(?:to\\s*\\(\\s*"+k+"\\s*\\)\\s*)")+")")+"\\s*)")+"+)";var q=new RegExp("(?:\\s*,\\s*"+("(?:"+("(?:(color-stop)\\s*\\(\\s*((?:\\-?(?:\\d*\\.\\d+|\\d+)%?))\\s*,\\s*("+k+")\\s*\\)\\s*)")+
"|"+("(?:(from)\\s*\\(\\s*("+k+")\\s*\\)\\s*)")+"|"+("(?:(to)\\s*\\(\\s*("+k+")\\s*\\)\\s*)")+")")+"\\s*)(.*)"),u=new RegExp("(?:\\s*(-webkit-gradient)\\s*\\(\\s*(linear)\\s*(?:\\s*,\\s*((?:\\s*(?:top|bottom|left|right|center|(?:\\-?(?:\\d*\\.\\d+|\\d+)%?))\\s+(?:top|bottom|left|right|center|(?:\\-?(?:\\d*\\.\\d+|\\d+)%?))\\s*))\\s*)(?:\\s*,\\s*((?:\\s*(?:top|bottom|left|right|center|(?:\\-?(?:\\d*\\.\\d+|\\d+)%?))\\s+(?:top|bottom|left|right|center|(?:\\-?(?:\\d*\\.\\d+|\\d+)%?))\\s*))\\s*)"+h+"\\s*\\)\\s*)"),
w=new RegExp("(?:\\s*(-webkit-gradient)\\s*\\(\\s*(radial)\\s*(?:(?:\\s*,\\s*((?:\\s*(?:top|bottom|left|right|center|(?:\\-?(?:\\d*\\.\\d+|\\d+)%?))\\s+(?:top|bottom|left|right|center|(?:\\-?(?:\\d*\\.\\d+|\\d+)%?))\\s*))\\s*)(?:\\s*,\\s*((?:\\d*\\.\\d+|\\d+))\\s*)(?:\\s*,\\s*((?:\\s*(?:top|bottom|left|right|center|(?:\\-?(?:\\d*\\.\\d+|\\d+)%?))\\s+(?:top|bottom|left|right|center|(?:\\-?(?:\\d*\\.\\d+|\\d+)%?))\\s*))\\s*)(?:\\s*,\\s*((?:\\d*\\.\\d+|\\d+))\\s*)?)"+h+"\\s*\\)\\s*)"),r=function(a){var b=
[];do{var e=a.match(c);e&&(b.push({color:e[1],pos:e[2]}),a=e[3])}while(e);return b},v=function(a){var e=[],c=[],g,d;do{var r=a.match(q);r&&(r[4]?g={color:r[5]}:r[6]?d={color:r[7]}:(a=r[2].match(b)?100*r[2]+"%":r[2],c.push({color:r[3],pos:a})),a=r[8])}while(r);g&&e.push(g);for(g=0;g<c.length;g++)e.push(c[g]);d&&e.push(d);return e};return{regstr_posn:"^\\s*\\s*(?:(?:\\-?(?:\\d*\\.\\d+|\\d+)(?:in|cm|mm|pt|pc|px|%)|0)|(?:left|center|right|top|bottom))(?:\\s*(?:(?:\\-?(?:\\d*\\.\\d+|\\d+)(?:in|cm|mm|pt|pc|px|%)|0)|(?:left|center|right|top|bottom)))?\\s*$",
regstr_len_or_pct:"^\\s*(?:\\-?(?:\\d*\\.\\d+|\\d+)(?:in|cm|mm|pt|pc|px|%)|0)\\s*$",regstr_angle:"^\\s*(?:to\\s+((?:\\s*left\\s*|\\s*right\\s*|\\s*top\\s*|\\s*bottom\\s*){1,2})|((?:\\-?(?:\\d*\\.\\d+|\\d+)deg)))\\s*$",regstr_shape:"^\\s*circle|ellipse\\s*$",regstr_extent:"^\\s*(?:(?:closest-side|farthest-side|closest-corner|farthest-corner|contain|cover)|(?:(?:\\-?(?:\\d*\\.\\d+|\\d+)(?:in|cm|mm|pt|pc|px|%)|0)(?:\\s+(?:\\-?(?:\\d*\\.\\d+|\\d+)(?:in|cm|mm|pt|pc|px|%)|0)\\s*)?))\\s*$",regstr_stop_color:"\\s*"+
k+"\\s*",regstr_stop_pos:"\\s*(?:\\-?(?:\\d*\\.\\d+|\\d+)(?:in|cm|mm|pt|pc|px|%)|0)\\s*",parseBackgroundImage:function(b){var c={},d=b.match(/^\s*$/);if(d)c.type="emptystring";else if(d=b.match(/^\s*none\s*$/))c.type="none";else if(d=b.match(g))c.type="url",c.func=d[1],c.url=d[2]?d[2]:d[3]?d[3]:d[4];else if(d=b.match(u)){c.type="linear";c.func=d[1];c.webkitGradType=d[2];c.webKitPosn1=d[3];c.webKitPosn2=d[4];var q=c.webKitPosn1,h=c.webKitPosn2;b=0<=q.indexOf("left");var k=0<=q.indexOf("top"),x=0<=
q.indexOf("right"),q=0<=q.indexOf("bottom"),m=0<=h.indexOf("left"),n=0<=h.indexOf("top"),D=0<=h.indexOf("right"),h=0<=h.indexOf("bottom");k&&h&&(b&&m||x&&D)?c.angle="to bottom":q&&n&&(b&&m||x&&D)?c.angle="to top":b&&D&&(k&&n||q&&h)?c.angle="to right":m&&x&&(k&&n||q&&h)?c.angle="to left":b&&k&&D&&h?c.angle="to bottom right":b&&q&&D&&n?c.angle="to top right":x&&k&&m&&h?c.angle="to bottom left":x&&q&&m&&n&&(c.angle="to top left");c.stops=v(d[5])}else if(d=b.match(w))c.type="radial",c.func=d[1],c.webkitGradType=
d[2],c.webKitPosn1=d[3],c.webKitRadius1=d[4],c.webKitPosn2=d[5],c.webKitRadius2=d[6],c.shape=c.webKitPosn1==c.webKitPosn2?"circle":"ellipse",k=c.webKitPosn1,(b=k.match(e))?(k=b[1],k.match(/^\d+$/)&&(k+="px"),b=b[2],b.match(/^\d+$/)&&(b+="px"),b=k+" "+b):b=k,c.posn=b,c.extent=c.webKitRadius2?c.webKitRadius2+"px":c.webKitRadius1?c.webKitRadius1+"px":"farthest-corner",c.stops=v(d[7]);else if(d=b.match(p))c.type="linear",c.func=d[1],c.angle=d[2]?"to "+d[2]:d[3]?"to "+d[3]:d[4],c.stops=r(d[5]);else if(d=
b.match(a))c.type="radial",c.func=d[1],c.posn=d[2]?d[2]:d[4],c.angle=d[3]?d[3]:d[5],c.shape=d[6]?d[6]:d[9]?d[9]:d[10],c.extent=d[7]?d[7]:d[8]?d[8]:d[11],c.stops=r(d[12]);d||(c.type="unknown");return c},buildBackgroundImage:function(a){var b=[];if("emptystring"==a.type)b.push("");else if("none"==a.type)b.push("none");else if("url"==a.type){if("string"==typeof a.url&&0<a.url.length){var e=m.getUrl(a.url);e||(e=m.stripQuotes(a.url));b.push("url('"+e+"')")}}else if("linear"==a.type||"radial"==a.type){for(var e=
"",c,g,d=[],q=0;q<a.stops.length;q++){var r=a.stops[q],p="string"==typeof r.pos&&0<r.pos.length?r.pos:"";0<q&&(e+=", ");e+=r.color;if(0<q&&q<a.stops.length-1||0==q&&0!=p.length&&"0%"!=p&&0!=p-0||q==a.stops.length-1&&0!=p.length&&"100%"!=p&&1!=p-0)e+=" "+p;0!=q||0!=p.length&&"0%"!=p&&0!=p-0?q!=a.stops.length-1||0!=p.length&&"100%"!=p&&1!=p-0?d.push("color-stop("+p+", "+r.color+")"):g="to("+r.color+")":c="from("+r.color+")"}r="";p=!1;c&&(r+=c,p=!0);g&&(p&&(r+=", "),r+=g,p=!0);for(q=0;q<d.length;q++)p&&
(r+=", "),r+=d[q],p=!0;if("linear"==a.type){c="(";var u=a.angle;(g="string"==typeof u&&0<u.length?u.match(/^\s*(?:to\s+((?:\s*left\s*|\s*right\s*|\s*top\s*|\s*bottom\s*){1,2})|((?:\-?(?:\d*\.\d+|\d+)deg)))\s*$/):null)||(u="to bottom");"to bottom"!=u&&(c+=u+",");a="(linear,";d=0<=u.indexOf("left");q=0<=u.indexOf("top");p=0<=u.indexOf("right");u=0<=u.indexOf("bottom");d&&q?a+=" right bottom, left top, ":d&&u?a+=" right top, left bottom, ":p&&q?a+=" left bottom, right top, ":p&&u?a+=" left top, right bottom, ":
d?a+=" right top, left top, ":p?a+=" left top, right top, ":q?a+=" left bottom, left top, ":u?a+=" left top, left bottom, ":(d=180*(90-parseFloat(g[4]))/Math.PI,g=Math.cos(d),d=Math.sin(d),0<=g&&0<=d?(a+="0% 100%,",a=Math.abs(g)>Math.abs(d)?a+("100% "+100*(1-Math.abs(d)/Math.abs(g))+"%"):a+(Math.abs(g)/Math.abs(d)*100+"% 100%")):0<=g&&0>d?(a+="0% 0%,",a=Math.abs(g)>Math.abs(d)?a+("100% "+Math.abs(-d)/Math.abs(g)*100+"%"):a+(Math.abs(g)/Math.abs(d)*100+"% 100%")):0>g&&0<=d?(a+="100% 100%,",a=Math.abs(g)>
Math.abs(d)?a+("0% "+100*(1-Math.abs(d)/Math.abs(g))+"%"):a+(Math.abs(g)/Math.abs(d)*100+"% 100%")):(a+="100% 0%,",a=Math.abs(g)>Math.abs(d)?a+("0% "+Math.abs(-d)/Math.abs(g)*100+"%"):a+(Math.abs(g)/Math.abs(d)*100+"% 100%")),a+=", ");c+=e+")";b.push("-webkit-gradient"+(a+(r+")")));b.push("-o-linear-gradient"+c);b.push("-ms-linear-gradient"+c);b.push("-moz-linear-gradient"+c);b.push("-webkit-linear-gradient"+c);b.push("linear-gradient"+c)}else c="(","center"!=a.posn&&"center center"!=a.posn&&(c+=
a.posn+", "),"circle"!=a.shape&&(c+=a.shape+", "),"farthest-corner"!=a.extent&&(c+=a.extent+", "),c+=e+")",b.push("-webkit-gradient(radial, center center, 10, center center, "+(r+")")),b.push("-o-radial-gradient"+c),b.push("-ms-radial-gradient"+c),b.push("-moz-radial-gradient"+c),b.push("-webkit-radial-gradient"+c),b.push("radial-gradient"+c)}return b}}})},"xblox/model/functions/CallBlock":function(){define("dcl/dcl xide/utils xide/types dojo/Deferred xblox/model/Block xcf/model/Command".split(" "),
function(n,m,k,h,d,b){return n(b,{declaredClass:"xblox.model.functions.CallBlock",command:"Select command please",icon:"",args:null,_timeout:100,isCommand:!0,_commandHandles:null,onCommandProgress:function(b){this.getScope().getContext();var c=b.params;c&&c.id&&(this._emit("cmd:"+b.cmd+"_"+c.id,{msg:b}),b.lastResponse&&this.storeResult(b.lastResponse),this._emit("progress",{msg:b,id:c.id}));this._lastResult=null;this._lastResult=b?b.result:null;b=this.getItems(k.BLOCK_OUTLET.PROGRESS);this._lastSettings||
(this._lastSettings={});this._lastSettings.override={};b.length&&this.runFrom(b,0,this._lastSettings)},stop:function(){this._lastCommand&&this._lastCommand.stop()},pause:function(){this._lastCommand&&this._lastCommand.pause()},destroy:function(){_.invoke(this._commandHandles,"remove");delete this._commandHandles;delete this._lastCommand},solve:function(b,g){this._commandHandles&&_.invoke(this._commandHandles,"remove");this._commandHandles=[];var c=this._timeout||50;_.isString(c)&&(c=parseInt(c));
var a=new h,e=this._commandHandles;g=g||{};setTimeout(function(){if(this.command){var c=null;if(this.args){g.override=g.override||{};var d=b.expressionModel.replaceVariables(b,this.args,!1,!1,null,null,{begin:"%%",end:"%%"});try{c=m.fromJson(d)}catch(w){c=d}g.override.args=_.isArray(c)?c:[d];g.override.mixin=c}if(this._lastCommand=b.resolveBlock(this.command))e.push(this._lastCommand._on("paused",this.onCommandPaused,this)),e.push(this._lastCommand._on("finished",this.onCommandFinish,this)),e.push(this._lastCommand._on("stopped",
this.onCommandStopped,this)),e.push(this._lastCommand._on("error",this.onCommandError,this)),e.push(this._lastCommand._on("progress",this.onCommandProgress,this));if(c=b.solveBlock(this.command,g))this.onSuccess(this,g);else this.onFailed(this,g);a.resolve(c);return c}}.bind(this),c);return a},hasInlineEdits:!0,makeEditable:function(b,g,d,a,e,q,u){return'\x3ca   tabIndex\x3d"-1" pos\x3d\''+g+"' display-mode\x3d'"+(e||"popup")+"' display-type\x3d'"+(d||"text")+"' data-prop\x3d'"+b+"' data-title\x3d'"+
a+"' class\x3d'editable editable-click'  href\x3d'#'\x3e"+this[b]+"\x3c/a\x3e"},getFieldOptions:function(b){if("command"===b)return this.scope.getCommandsAsOptions("text")},toText:function(){var b="Unknown",g=this.scope.getBlock(this.command);g&&(b=g.name);-1!==this.command.indexOf("://")&&(b='\x3cspan class\x3d"text-info"\x3e'+this.scope.toFriendlyName(this,this.command)+"\x3c/span\x3e");return this.getBlockIcon("D")+"Call Command : "+b},getFields:function(){var b=this.getDefaultFields();this.command.indexOf("://")&&
this.scope.toFriendlyName(this,this.command);b.push(m.createCI("value","xcf.widgets.CommandPicker",this.command,{group:"General",title:"Command",dst:"command",options:this.scope.getCommandsAsOptions(),block:this,pickerType:"command",value:this.command}));b.push(m.createCI("arguments",27,this.args,{group:"Arguments",title:"Arguments",dst:"args"}));b.push(m.createCI("timeout",13,this._timeout,{group:"General",title:"Delay",dst:"_timeout"}));return b}})})},"dojo/keys":function(){define(["./_base/kernel",
"./sniff"],function(n,m){return n.keys={BACKSPACE:8,TAB:9,CLEAR:12,ENTER:13,SHIFT:16,CTRL:17,ALT:18,META:m("webkit")?91:224,PAUSE:19,CAPS_LOCK:20,ESCAPE:27,SPACE:32,PAGE_UP:33,PAGE_DOWN:34,END:35,HOME:36,LEFT_ARROW:37,UP_ARROW:38,RIGHT_ARROW:39,DOWN_ARROW:40,INSERT:45,DELETE:46,HELP:47,LEFT_WINDOW:91,RIGHT_WINDOW:92,SELECT:93,NUMPAD_0:96,NUMPAD_1:97,NUMPAD_2:98,NUMPAD_3:99,NUMPAD_4:100,NUMPAD_5:101,NUMPAD_6:102,NUMPAD_7:103,NUMPAD_8:104,NUMPAD_9:105,NUMPAD_MULTIPLY:106,NUMPAD_PLUS:107,NUMPAD_ENTER:108,
NUMPAD_MINUS:109,NUMPAD_PERIOD:110,NUMPAD_DIVIDE:111,F1:112,F2:113,F3:114,F4:115,F5:116,F6:117,F7:118,F8:119,F9:120,F10:121,F11:122,F12:123,F13:124,F14:125,F15:126,NUM_LOCK:144,SCROLL_LOCK:145,UP_DPAD:175,DOWN_DPAD:176,LEFT_DPAD:177,RIGHT_DPAD:178,copyKey:m("mac")&&!m("air")?m("safari")?91:224:17}})},"davinci/Runtime":function(){define("davinci/lang/webContent ./commands/CommandStack ./ui.plugin ./html/html.plugin ./js/js.plugin ./ve/ve.plugin".split(" "),function(n,m,k,h,d,b){var c=[k,h,b],g={plugins:[],
extensionPoints:[],subscriptions:[],currentSelection:[],commandStack:new m,getUser:function(){return this._initializationInfo.userInfo},getWorkbenchState:function(){return this._initializationInfo?this._initializationInfo.workbenchState:{activeEditor:null,editors:[],nhfo:{project1:{device:"iphone",layout:"flow",themeSet:{name:"(none)",desktopTheme:"claro",mobileTheme:[{theme:"android",device:"Android"},{theme:"blackberry",device:"BlackBerry"},{theme:"ipad",device:"iPad"},{theme:"iphone",device:"iPhone"},
{theme:"iphone",device:"other"}]}}},project:"project1",id:"",Fields:[]}},getSiteConfigData:function(b){return"widgetPalette"==b?{_COMMENT1_:"Defines site-specific organization for widget palette",name:"widgetPalette_dojo_default",_COMMENT2_:"One entry for each section (\x3d\x3dfolder) in widget palette",_COMMENT3_:"includes provides ordered list of widgets to appear in each section",_COMMENT4_:"each entry in array causes a new item to appear in that section",_COMMENT5_:"each entry in array can be either a string or an array",
_COMMENT6_:"if a string, can be either a string that begins with type:, which is a particular widget type",_COMMENT7_:"otherwise the string holds a tag, which causes all widgets that match tag to share that item",_COMMENT8_:"if an array, then it holds a list of strings, each of which can start with type: (widget type) or a tag",defs:{$XBLOXSection:{id:"xblox",name:"xblox",iconBase64:"data:image/gif;base64,R0lGODlhEAAQAKIAAFhYWtXV1v///0BAQP///wAAAAAAAAAAACH5BAEAAAQALAAAAAAQABAAAAMuSLo0w5CNIF6EM9grN2+Z82WCEGjcVJbopa5tlJ2nh4W2XH9LyCu+X/AHAPyOCQA7",
subsections:["$XBLOXSection_Controls"]},$XBLOXSection_Controls:{id:"Controls",name:"Controls",iconBase64:"data:image/gif;base64,R0lGODlhEAAQALMAAN7e4oyMjtXV1sDAwf///+Dg4MvLyzMzM////wAAAAAAAAAAAAAAAAAAAAAAAAAAACH5BAEAAAgALAAAAAAQABAAAAQ3EMlJq704a3RO2NIhBIexHYRgeFTndkQ8HmER33g60EcB/ECcYBd6wWSkDErFUs5Mms4HRK1SIwA7",includes:["RunScript","CSSState","StyleState","Script"]},$ClipartSection_Arrows:{id:"Arrows",name:"Arrows",iconBase64:"data:image/gif;base64,R0lGODlhEAAQALMAAN7e4oyMjtXV1sDAwf///+Dg4MvLyzMzM////wAAAAAAAAAAAAAAAAAAAAAAAAAAACH5BAEAAAgALAAAAAAQABAAAAQ3EMlJq704a3RO2NIhBIexHYRgeFTndkQ8HmER33g60EcB/ECcYBd6wWSkDErFUs5Mms4HRK1SIwA7",
includes:["ArrowDown","ArrowLeft","ArrowRight","ArrowUp"]},$ClipartSection_Community:{id:"Community",name:"Community",iconBase64:"data:image/gif;base64,R0lGODlhEAAQAMQAANXV1v///9HR0cXFxbm5uaKiooyMjHR0dGlpaVJSUkZGRkREREJCQkFBQT09PTo6OjMzM////wAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAACH5BAEAABEALAAAAAAQABAAAAVdIJEoZGmSiTgAbOuywwgEdAAY5WyTul0gAYFCB+DRWJCAqFArDo+QRcDRgBCNu1rgueMWG4FHw4u1Maa9bg8AdqSd6/a7zEZr4U35vRw4KA5aOwkrL4UxIieJCikhADs\x3d",includes:["Facebook","Rss","Twitter"]},$ClipartSection_Devices:{id:"Devices",
name:"Devices",iconBase64:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAMAAAAoLQ9TAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAA2hpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuMC1jMDYxIDY0LjE0MDk0OSwgMjAxMC8xMi8wNy0xMDo1NzowMSAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wTU09Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9tbS8iIHhtbG5zOnN0UmVmPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvc1R5cGUvUmVzb3VyY2VSZWYjIiB4bWxuczp4bXA9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC8iIHhtcE1NOk9yaWdpbmFsRG9jdW1lbnRJRD0ieG1wLmRpZDowMTgwMTE3NDA3MjA2ODExOTJCMEJDQTgxOTc0RDYxMiIgeG1wTU06RG9jdW1lbnRJRD0ieG1wLmRpZDo4NTQ0QUU2NjhCMzMxMUUyOTQ3N0ExRTg0NEJENzk4RiIgeG1wTU06SW5zdGFuY2VJRD0ieG1wLmlpZDo4NTQ0QUU2NThCMzMxMUUyOTQ3N0ExRTg0NEJENzk4RiIgeG1wOkNyZWF0b3JUb29sPSJBZG9iZSBQaG90b3Nob3AgQ1M1LjEgTWFjaW50b3NoIj4gPHhtcE1NOkRlcml2ZWRGcm9tIHN0UmVmOmluc3RhbmNlSUQ9InhtcC5paWQ6MDM4MDExNzQwNzIwNjgxMTkyQjBCQ0E4MTk3NEQ2MTIiIHN0UmVmOmRvY3VtZW50SUQ9InhtcC5kaWQ6MDE4MDExNzQwNzIwNjgxMTkyQjBCQ0E4MTk3NEQ2MTIiLz4gPC9yZGY6RGVzY3JpcHRpb24+IDwvcmRmOlJERj4gPC94OnhtcG1ldGE+IDw/eHBhY2tldCBlbmQ9InIiPz7l5plaAAAAIVBMVEX///8zMzP3+PnV1dZ+fn7ExMZ9fX4sKis1NTVZWVmgoKKPJ3BhAAAARElEQVR42mJgIAIwM8IBM1iAkRkO2KECTFBAiQCaoZjWsrKxcgIxEHKA+BysbGysQIKLi5OVEyjCiAYYWNAAYa8CBBgA3BQB3Pw68r4AAAAASUVORK5CYII\x3d",
includes:["Cellphone","Computer","Laptop","Server","Tablet"]},$ClipartSection_DeviceSilhouettes:{id:"DeviceSilhouettes",name:"Device Silhouettes",iconBase64:"data:image/gif;base64,R0lGODlhEAAQAKIAAGZmaNXV1v///0BAQP///wAAAAAAAAAAACH5BAEAAAQALAAAAAAQABAAAAM6SErT3iu+EF5UL4/LqPfbNQRCaVbcaJ6hRK4CKr6r7MJxu6iwvX8fHUbjSDUAFEBR5AAol0wNZzpNAAA7",includes:"Android_340x480 Android_480x800 AndroidTablet Blackberry iPad iPhone".split(" ")},$ClipartSection_Media:{id:"Media",name:"Media",iconBase64:"data:image/gif;base64,R0lGODlhEAAQALMAANXV1v////z8/Pr6+vn5+fj4+Ojo6MrKyre3t6urq4iIiHV1dUdHR0BAQDMzM////yH5BAEAAA8ALAAAAAAQABAAAARZ8MlJq6Ut36c5+E3VOGAGBEAWeif6DULghk0rB8jCLAhK2zjFoXBQIFKeW2BxSDQShwWypmQUGoZGgTEFMp1Q6U+JEBKN3RsBp+P5WJ+4HCRR2e+rjX5PiQAAOw\x3d\x3d",
includes:"Camera Chat GraphBar GraphLine GraphPie Image Map Microphone PlayControl Record StreetMap Table VideoCamera VideoPlayer".split(" ")},$ClipartSection_UserInterfaceControls:{id:"UserInterfaceControls",name:"User Interface Controls",iconBase64:"data:image/gif;base64,R0lGODlhEAAQALMAAFhYWtXV1qurrKGhooKCg/////X19TMzM////wAAAAAAAAAAAAAAAAAAAAAAAAAAACH5BAEAAAgALAAAAAAQABAAAARSEElwqrUyHxG678KRIVthDoNZhGNZBFVgsppQGId5GKtYF5dKr8X5eGiSoNKXJAie0CeBSbKprsgqMDj84XS8rAt2kHWT1gJKJS4aA1nSspKJAAA7",includes:"File Folder FormattingToolbox HScrollBar HSplit ProgressBar SpinInput VScrollBar VSplit WaitingPending".split(" ")},
$ClipartSection_UserInterfaceIcons:{id:"UserInterfaceIcons",name:"User Interface Icons",iconBase64:"data:image/gif;base64,R0lGODlhEAAQANUAANXT1vj4+eLi49/f4Nra29nZ2tbW19XV1tTU1dDQ0c3NzpCQkf////7+/vX19fLy8vDw8O/v7+zs7OTk5OPj49nZ2dHR0c/Pz87Ozs3NzczMzKWlpaOjo6KioqGhoZ6enp2dnZycnJubm5mZmY+Pj4aGhoWFhYGBgX5+fnR0dHNzc2lpaWZmZllZWVdXV1VVVVNTU1FRUU5OTk1NTUxMTEJCQkBAQDY2NjMzMzIyMi8vLyoqKiYmJiMjI////wAAACH5BAEAAD4ALAAAAAAQABAAAAa8QJ/Qd0HRdD0dDXUZDj8ykqJgKGBIso/zs9IIIoFGICLQrLREWUZSmeHetookI2ueFgIGC6fSqHAzDAILJz4yFhF6LA8MD28MEQkyPjkEAQyYjS04LAwBBDk+PAYNmQ+bLYwNBjw+OJaZGzipmA4EOD4xB4mYIzgjmREHMT4mIhSZyZgUIiZELwgSvb+YEggvTT4eKQgDEB01HRATCCkcThwuIAcEAAQHIS/nTj4WJTA3OzcwJRb0/wB9BAEAOw\x3d\x3d",
includes:"Close Copy Delete Edit Error Fatal Help Home Info Lock Mail Minus Next Paste Plus Previous Print Refresh Save Search ShoppingCart Trash Warning".split(" ")},$ClipartSection_Other:{id:"Other",name:"Other",iconBase64:"data:image/gif;base64,R0lGODlhEAAQAJEAAHx8fDMzM////wAAACH5BAEAAAIALAAAAAAQABAAAAImlI9pAYoQDGxuHpvwZY8rrH1MWAWes53oRHZUK4Rkq8Gxp4roXgAAOw\x3d\x3d",includes:["Browser","Person","ProfilePicture","X"]},$ClipartSection:{id:"Clipart",name:"Clip Art",iconBase64:"data:image/gif;base64,R0lGODlhEAAQAKIAAFhYWtXV1v///0BAQP///wAAAAAAAAAAACH5BAEAAAQALAAAAAAQABAAAAMuSLo0w5CNIF6EM9grN2+Z82WCEGjcVJbopa5tlJ2nh4W2XH9LyCu+X/AHAPyOCQA7",
subsections:"$ClipartSection_Arrows $ClipartSection_Community $ClipartSection_Devices $ClipartSection_DeviceSilhouettes $ClipartSection_Media $ClipartSection_UserInterfaceControls $ClipartSection_UserInterfaceIcons $ClipartSection_Other".split(" ")},$DrawingToolsSection:{id:"DrawingTools",name:"Drawing Tools",iconBase64:"data:image/gif;base64,R0lGODlhEAAQAKIAAL+/v5aWlmNjYzMzMxwcHBYWFv///wAAACH5BAEAAAYALAAAAAAQABAAAAMgaLrc/jBKFsBcg9g7iuaFZwlhaZrD1Ikqq35Xdc10PScAOw\x3d\x3d",includes:"Text Line Arrow Polyline PolylineArrow Circle Rectangle RoundedRectangle".split(" ")},
$ViewsSection:{id:"Views",name:"Views",_COMMENT1_:"Mobile-only view widgets, often representing a single screen of UI",iconBase64:"data:image/gif;base64,R0lGODlhEAAQANUAAC5KhTFOiPj6/jJRijRTjTRUjTdXkTdXkLrH3+Hp+OHp9zdakzZYkDdYkDlbkzlck97o+ODp+N/o9ztflj5km/L2/Pj6/T5mnD9mnT5lm0FqoENupENuo0Ruo0ZxpvL2+0l3rEl4rEh2qkl3q0l2qk6BtE1+sU+BtFCDtVCFt1CEtlSLvVOJulOHuVaOv7nW78/t+////////wAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAACH5BAEAADIALAAAAAAQABAAAAaAQJlwSCwKXcikcilzxZ5QaApGVclWMUAWMFhgYiRYACGStaJoDKzyuchQr7hc3jAwGAeZCR1lKRIRLDIjWVtdXyUSEhAnMh58UCCKECEyGnOYHRsbHBwyFJBPGVQwFDIThQBcXjEOYggOMg+hMQUwFgIEsg+8vb0BwMBGw8TFQkEAOw\x3d\x3d",
includes:["ScrollableView","SwapView","View"]},$HeadingSection:{id:"Heading, Section Labels",name:"Heading",_COMMENT1_:"Mobile-only Heading widgets, often titles at top of a screen",iconBase64:"data:image/gif;base64,R0lGODlhEAAQAMQAAEh1qkd2q0d2qkh2q0h2qkt7r0t8r0+BtU6CtFGGuVGHuVSLvFaNv1WLvKzM6a3M6a3M6LfS7DJlklaOv4y64Iy635zD5J3E5KzN6azM6IK13Iy734273////////wAAACH5BAEAAB4ALAAAAAAQABAAAAVQoCeOZGmeaKqqU+u+LdN6U2Tf+D15S5ZJwIzjgXFkIJmGJ2GRtCSbTWc6vSg8hw0HCN1UKFotwlPQmM/os8FDIADcgYGAIJgD3qu8fs/nhwAAOw\x3d\x3d",
includes:["Heading","ToolBarButton"]},$ContainersSection_Dojo:{id:"ContainersSection_Dojo",name:"Dojo",iconBase64:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAACXBIWXMAAAsTAAALEwEAmpwYAAAKT2lDQ1BQaG90b3Nob3AgSUNDIHByb2ZpbGUAAHjanVNnVFPpFj333vRCS4iAlEtvUhUIIFJCi4AUkSYqIQkQSoghodkVUcERRUUEG8igiAOOjoCMFVEsDIoK2AfkIaKOg6OIisr74Xuja9a89+bN/rXXPues852zzwfACAyWSDNRNYAMqUIeEeCDx8TG4eQuQIEKJHAAEAizZCFz/SMBAPh+PDwrIsAHvgABeNMLCADATZvAMByH/w/qQplcAYCEAcB0kThLCIAUAEB6jkKmAEBGAYCdmCZTAKAEAGDLY2LjAFAtAGAnf+bTAICd+Jl7AQBblCEVAaCRACATZYhEAGg7AKzPVopFAFgwABRmS8Q5ANgtADBJV2ZIALC3AMDOEAuyAAgMADBRiIUpAAR7AGDIIyN4AISZABRG8lc88SuuEOcqAAB4mbI8uSQ5RYFbCC1xB1dXLh4ozkkXKxQ2YQJhmkAuwnmZGTKBNA/g88wAAKCRFRHgg/P9eM4Ors7ONo62Dl8t6r8G/yJiYuP+5c+rcEAAAOF0ftH+LC+zGoA7BoBt/qIl7gRoXgugdfeLZrIPQLUAoOnaV/Nw+H48PEWhkLnZ2eXk5NhKxEJbYcpXff5nwl/AV/1s+X48/Pf14L7iJIEyXYFHBPjgwsz0TKUcz5IJhGLc5o9H/LcL//wd0yLESWK5WCoU41EScY5EmozzMqUiiUKSKcUl0v9k4t8s+wM+3zUAsGo+AXuRLahdYwP2SycQWHTA4vcAAPK7b8HUKAgDgGiD4c93/+8//UegJQCAZkmScQAAXkQkLlTKsz/HCAAARKCBKrBBG/TBGCzABhzBBdzBC/xgNoRCJMTCQhBCCmSAHHJgKayCQiiGzbAdKmAv1EAdNMBRaIaTcA4uwlW4Dj1wD/phCJ7BKLyBCQRByAgTYSHaiAFiilgjjggXmYX4IcFIBBKLJCDJiBRRIkuRNUgxUopUIFVIHfI9cgI5h1xGupE7yAAygvyGvEcxlIGyUT3UDLVDuag3GoRGogvQZHQxmo8WoJvQcrQaPYw2oefQq2gP2o8+Q8cwwOgYBzPEbDAuxsNCsTgsCZNjy7EirAyrxhqwVqwDu4n1Y8+xdwQSgUXACTYEd0IgYR5BSFhMWE7YSKggHCQ0EdoJNwkDhFHCJyKTqEu0JroR+cQYYjIxh1hILCPWEo8TLxB7iEPENyQSiUMyJ7mQAkmxpFTSEtJG0m5SI+ksqZs0SBojk8naZGuyBzmULCAryIXkneTD5DPkG+Qh8lsKnWJAcaT4U+IoUspqShnlEOU05QZlmDJBVaOaUt2ooVQRNY9aQq2htlKvUYeoEzR1mjnNgxZJS6WtopXTGmgXaPdpr+h0uhHdlR5Ol9BX0svpR+iX6AP0dwwNhhWDx4hnKBmbGAcYZxl3GK+YTKYZ04sZx1QwNzHrmOeZD5lvVVgqtip8FZHKCpVKlSaVGyovVKmqpqreqgtV81XLVI+pXlN9rkZVM1PjqQnUlqtVqp1Q61MbU2epO6iHqmeob1Q/pH5Z/YkGWcNMw09DpFGgsV/jvMYgC2MZs3gsIWsNq4Z1gTXEJrHN2Xx2KruY/R27iz2qqaE5QzNKM1ezUvOUZj8H45hx+Jx0TgnnKKeX836K3hTvKeIpG6Y0TLkxZVxrqpaXllirSKtRq0frvTau7aedpr1Fu1n7gQ5Bx0onXCdHZ4/OBZ3nU9lT3acKpxZNPTr1ri6qa6UbobtEd79up+6Ynr5egJ5Mb6feeb3n+hx9L/1U/W36p/VHDFgGswwkBtsMzhg8xTVxbzwdL8fb8VFDXcNAQ6VhlWGX4YSRudE8o9VGjUYPjGnGXOMk423GbcajJgYmISZLTepN7ppSTbmmKaY7TDtMx83MzaLN1pk1mz0x1zLnm+eb15vft2BaeFostqi2uGVJsuRaplnutrxuhVo5WaVYVVpds0atna0l1rutu6cRp7lOk06rntZnw7Dxtsm2qbcZsOXYBtuutm22fWFnYhdnt8Wuw+6TvZN9un2N/T0HDYfZDqsdWh1+c7RyFDpWOt6azpzuP33F9JbpL2dYzxDP2DPjthPLKcRpnVOb00dnF2e5c4PziIuJS4LLLpc+Lpsbxt3IveRKdPVxXeF60vWdm7Obwu2o26/uNu5p7ofcn8w0nymeWTNz0MPIQ+BR5dE/C5+VMGvfrH5PQ0+BZ7XnIy9jL5FXrdewt6V3qvdh7xc+9j5yn+M+4zw33jLeWV/MN8C3yLfLT8Nvnl+F30N/I/9k/3r/0QCngCUBZwOJgUGBWwL7+Hp8Ib+OPzrbZfay2e1BjKC5QRVBj4KtguXBrSFoyOyQrSH355jOkc5pDoVQfujW0Adh5mGLw34MJ4WHhVeGP45wiFga0TGXNXfR3ENz30T6RJZE3ptnMU85ry1KNSo+qi5qPNo3ujS6P8YuZlnM1VidWElsSxw5LiquNm5svt/87fOH4p3iC+N7F5gvyF1weaHOwvSFpxapLhIsOpZATIhOOJTwQRAqqBaMJfITdyWOCnnCHcJnIi/RNtGI2ENcKh5O8kgqTXqS7JG8NXkkxTOlLOW5hCepkLxMDUzdmzqeFpp2IG0yPTq9MYOSkZBxQqohTZO2Z+pn5mZ2y6xlhbL+xW6Lty8elQfJa7OQrAVZLQq2QqboVFoo1yoHsmdlV2a/zYnKOZarnivN7cyzytuQN5zvn//tEsIS4ZK2pYZLVy0dWOa9rGo5sjxxedsK4xUFK4ZWBqw8uIq2Km3VT6vtV5eufr0mek1rgV7ByoLBtQFr6wtVCuWFfevc1+1dT1gvWd+1YfqGnRs+FYmKrhTbF5cVf9go3HjlG4dvyr+Z3JS0qavEuWTPZtJm6ebeLZ5bDpaql+aXDm4N2dq0Dd9WtO319kXbL5fNKNu7g7ZDuaO/PLi8ZafJzs07P1SkVPRU+lQ27tLdtWHX+G7R7ht7vPY07NXbW7z3/T7JvttVAVVN1WbVZftJ+7P3P66Jqun4lvttXa1ObXHtxwPSA/0HIw6217nU1R3SPVRSj9Yr60cOxx++/p3vdy0NNg1VjZzG4iNwRHnk6fcJ3/ceDTradox7rOEH0x92HWcdL2pCmvKaRptTmvtbYlu6T8w+0dbq3nr8R9sfD5w0PFl5SvNUyWna6YLTk2fyz4ydlZ19fi753GDborZ752PO32oPb++6EHTh0kX/i+c7vDvOXPK4dPKy2+UTV7hXmq86X23qdOo8/pPTT8e7nLuarrlca7nuer21e2b36RueN87d9L158Rb/1tWeOT3dvfN6b/fF9/XfFt1+cif9zsu72Xcn7q28T7xf9EDtQdlD3YfVP1v+3Njv3H9qwHeg89HcR/cGhYPP/pH1jw9DBY+Zj8uGDYbrnjg+OTniP3L96fynQ89kzyaeF/6i/suuFxYvfvjV69fO0ZjRoZfyl5O/bXyl/erA6xmv28bCxh6+yXgzMV70VvvtwXfcdx3vo98PT+R8IH8o/2j5sfVT0Kf7kxmTk/8EA5jz/GMzLdsAAAAgY0hSTQAAeiUAAICDAAD5/wAAgOkAAHUwAADqYAAAOpgAABdvkl/FRgAAAg9JREFUeNp8ks1rE0EYxn9bE/xqikI0lITiQW+VImoONmCQtoonUbAglFDEUtlLxdo/wUNRD0Iw1kOIEmj6D9ir2FRQi4j0lILQJoimRfJB9mNmOx42iWsT+8Iw7DwPv32feUdTSuGtyeQKaT3GZHJlGEgA40AOyKT1WL6lt0rbC2hC9IFg7/a1c5HAib5Dc+WqOb/8pVjb3K4H03os6fVqXToYHgj2RiYun34KhD1S6c27jYeb2/ViWo/lW4c9dFYiPtgfMIQTNoRDw3YwbIeGcMLxwf5AM1a7fF0A436fL15pSNAUGqCUhqYp/P4Dc0AImNoPkNvaqX8MHDn4SkOBiwA0Kg1rHoh6zd0iZD4VyrWaKUpVQ1I1bSqGpGKI0udCuQZk/gu4+XhZpfXY2amRM88vnjq2vlMz7xn2biF41L8+FAl8f5a4cFw4u/mrj3KqK0BYNkDqzv3UyR6N32uFn9H334qhtY1fhyf0lzEgVd76oQDaEKVUe43NLirP97Rnn97rG5tdRCnldrCw9EFd0TNKNEwARmayCkg1tRdAavRBVo3OZAFwpMQR8m+E12+/YjcMzW4CpBsFF7AKgG1aCNM9l4bd9vjc7FZ73gDCtDpGIw27Oc5/9R6AuzeiSFsqRwjX7DH0hYK0fiKbHSSuDyEtq/MSu63zt56o/fRuL5HWxS4srTJ1+xL71Z8BAL+kU+9a36VRAAAAAElFTkSuQmCC",
includes:[["AccordionContainer","Accordion"],"BorderContainer","Container","ContentPane","FixedSplitter","Form","GridLayout","MenuBar","Pane","RoundRect","ScrollablePane","TabContainer","TitlePane","ToolBar"]},$ContainersSection_HTML:{id:"ContainersSection_HTML",name:"HTML",iconBase64:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyBpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuMC1jMDYwIDYxLjEzNDc3NywgMjAxMC8wMi8xMi0xNzozMjowMCAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENTNSBXaW5kb3dzIiB4bXBNTTpJbnN0YW5jZUlEPSJ4bXAuaWlkOjVFNUZFNTNBNTk0QjExRTBBNkY0ODEzNDdCMzkxNTdDIiB4bXBNTTpEb2N1bWVudElEPSJ4bXAuZGlkOjVFNUZFNTNCNTk0QjExRTBBNkY0ODEzNDdCMzkxNTdDIj4gPHhtcE1NOkRlcml2ZWRGcm9tIHN0UmVmOmluc3RhbmNlSUQ9InhtcC5paWQ6NUU1RkU1Mzg1OTRCMTFFMEE2RjQ4MTM0N0IzOTE1N0MiIHN0UmVmOmRvY3VtZW50SUQ9InhtcC5kaWQ6NUU1RkU1Mzk1OTRCMTFFMEE2RjQ4MTM0N0IzOTE1N0MiLz4gPC9yZGY6RGVzY3JpcHRpb24+IDwvcmRmOlJERj4gPC94OnhtcG1ldGE+IDw/eHBhY2tldCBlbmQ9InIiPz5wB++kAAABAklEQVR42qRToQ7CMBC9LYhK5Bz9AyaHYhIHEomcYxI5iRwOOYkcDgkKWxxyuElwnSq5hpJ2tAvJXnK5vuvd60u7eUII6IOBTo67SafafH31foroQEWZR8IFVibis2/M+G3BV9NYTydkCJSGPy59WzOKtMMlYghUTwLsXsMsLQA4yIwc10GUyaBxLvusAuGigM3+BHFIJceMnFW182K/ApfbQ6jhdBnjoTLrIljjLgF9WIcu0ulgm8zgzCrID2ejATnWcV+htt3BdDzydBHOzWEaBLLGucMB4lQkXycIffivTxmBzYdsJdcqd8GHnmg5ILDfLrXHIpaHIwbz+v7ObwEGADGQtFOesBZAAAAAAElFTkSuQmCC",
includes:["\x3ca\x3e","\x3cdiv\x3e","\x3cspan\x3e","\x3ctable\x3e","\x3cstyle\x3e"]},$ContainersSection:{id:"Containers",name:"Containers",_COMMENT1_:"Desktop and mobile containers",_COMMENT2_:"Note that default desktop preset only include desktop widgets",_COMMENT3_:"and mobile preset only include mobile widgets",iconBase64:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAARJJREFUeNqkUzFuhEAMNFHqHAUEiU9Q0PKS3BNo6O9aJMQDqHkM4iG05CJdGgpgfXhvvVqyECHdSNaO7PWMsRYHEaGua+z7Hgi+7wPzLZh14kACZVniPM8yTM4xTZMOqpv8nZSEENqB+e/9DmIRJ6A6Xddd3aW8FFhcrFE/TifdaEHllymeAkQYQRBAURS7OwjDEFh2U6DrOrheLrDjDXmea64FxnHU4w7DIJt/bt+AAtVenqf36cs6/DcBc2piAUSxriszMn6DF2FNcAR45BM8z9tc5N+7lkAURZBl2a57HMe2gHxIajFt20JVVasHY06Spimcv87AfS8v0eG/sWkamUiSBJhvwawTd3bf+0E8BBgAL2nsdz3dOk4AAAAASUVORK5CYII\x3d",
subsections:["$ContainersSection_Dojo","$ContainersSection_HTML"]},$ListsSection:{id:"Lists",name:"Lists",_COMMENT1_:"Mobile-only List widgets",iconBase64:"data:image/gif;base64,R0lGODlhEAAQAMQAADlck9jf6ra/zGiKukNvpERvo/P3/Ex7r0x9sUx8r1KHuVKHuFaOv3io0bnW78jg8////////wAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAACH5BAEAABEALAAAAAAQABAAAAVWYCSOZGmeptEwbNs2hmgwgWHfd8DETQD9wKAh0IgsDBBEcGlQRBLIpfTwdFiv2CsVKp1GCkhlF2IgRAaC8c8gGEQeAAFuLgA8RI8BYM/nD+4ogYKDgiEAOw\x3d\x3d",includes:"RoundRectCategory RoundRectList RoundRectDataList EdgeToEdgeCategory EdgeToEdgeList EdgeToEdgeDataList ListItem".split(" ")},
$ControlsSection_Buttons:{id:"Buttons",name:"Buttons",iconBase64:"data:image/gif;base64,R0lGODlhEAAQANUAAC5KhTFPijZXkDZYkDxhmTtimUJsouHr9/D1+0h2q0l3q7XQ7bbQ7bbQ7MLX79vo9k6AtE6Bs6TH6bbR7NLj9FKJu1OJulaNv5C95aTH6KTI6LXR7L/Z8Mje8laOv36z4X604JC95LnW77/a8Nzr9////wAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAACH5BAEAACUALAAAAAAQABAAAAZiwJJwSCwaj8hk0cP0XJpQj9ByqFqvVUSlFDk4vuCw4wApKR6MxmLCbm8mj0TJQNFI7nh8hmIoFTohGIKDgyEdBCUDHCAfHyCPkI0jAiUBIpeYmZckAUIAn6ChoEqkpaanRUEAOw\x3d\x3d",
includes:[["Button","\x3cbutton\x3e"],"ComboButton","DropDownButton","ToggleButton"]},$ControlsSection_CheckboxesRadios:{id:"CheckboxesRadios",name:"Checkboxes, RadioButtons, Switch",iconBase64:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAP9JREFUeNpi/P//P8PGnQf/M5AJWGAMf3d7kjUDLUYYAAITd94kWnO+uzqqC2DAQkGAgYEDwpbg4ICLv/jxA8IAUicefMD0Agw8+ABRCNL7geEHXBwkHG4uD2avuPAAtwEQS4Cqf3DAtX8A2p5urw6Xv3DjBZzNhMuPP6Da0TUHdu5ksNCQwG0ASEO8uToYv/iAqtmxcSODAjCMBAQ48BuAHtIwzQZAmzUkBIBhzIHfCyBnIgNkzQJIMYPVAJACkDNBmghpxhoLEkD/CXBIgBUXzjzI4GCgAHE2B4GkDE8HLxDpQACq8cWHH4TzAnqgkZyZQBmDHMAIys6UAIAAAwBz81X4fS5oMgAAAABJRU5ErkJggg\x3d\x3d",
includes:["CheckBox","RadioButton","Switch","TriStateCheckBox"]},$ControlsSection_IconContainer:{id:"IconContainer",name:"IconContainer",_COMMENT1_:"Mobile-only",iconBase64:"data:image/gif;base64,R0lGODlhEAAQAMQAACVLiiVLiDlck/P2+zxhlzpppj9mnDh3xUJtokdzp3ak21ON0FCDvEp6rU6As1SKvFaOv////wAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAACH5BAEAABEALAAAAAAQABAAAAVoYBRBZGmWIjSsbMtC0TMo9FzTyvBEzrD8PuBvMXBEGoODMrlUHgaNSMJFXSUiiAGgwNByvV1ExFClGiIEWw6nHhAigiBxKB8I4MynM2/Hl1t3cQFfg12FfXF/LHdwAo6PkI4ik5SVkyEAOw\x3d\x3d",
includes:["IconContainer","IconItem","IconMenu","IconMenuItem"]},$ControlsSection_Pickers:{id:"Pickers",name:"Pickers",iconBase64:"data:image/gif;base64,R0lGODlhEAAQANUAAKFMUiI5ZjxsuTlckz1jmj1jmVyL0T1kmUNvpERvpERuo0Rvo16W2jx7wEeO4Et7r0x7r26ayUt8r0x8rqrS+lGHuVKHuZXN/1aOv6u7yJypq+38++v6+aiysJ6uqWpNK5RcON6CV+esnbq2tf/X0t26tuxmXtaJhL+Zmf///wAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAACH5BAEAACkALAAAAAAQABAAAAZswJRwSCwSA8YhUrlMBpbPpjEqfCarUmlRezVivmBMKgweXyIMgUGMOafXKcvog2o4LKnKvH5PTUIgIh0UECkPgIIUEikLGQAnGxoJKQiOkBoKKQUcJSYkHgUpBJyeHgcpA6mqA6irqV2wsUJBADs\x3d",
includes:"Carousel CarouselItem DataCarousel DatePicker SpinWheel SpinWheelSlot SpinWheelDatePicker SpinWheelTimePicker TimePicker ValuePicker ValuePickerSlot ValuePickerDatePicker ValuePickerTimePicker".split(" ")},$ControlsSection_Select:{id:"Select",name:"Select",iconBase64:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAVJJREFUeNpi/P//PwMlgAVEhPcf+E+RAb++fWeoz3QlqLhxxh6G+gwXBH/6bgYmEOPHp69gAVGGvwxijH8ZhP/9AbNhWJwRgn9+/AxWl5TYy/D61hOgvi8QF3z/8Akswc/JjGLjfwZGMM0IZIHY3z5ADDi4ogQs+23+XgZGUCBaRE4EByUjRBeUATOEASoANe4/0DhGqOh/aBjIm+kzfn37/n+IkxZJAbhm3zWIAX9//WHg4OVlMDBQZhD6+5doA7aceQQx4M/PnwywePRN6IVEDzsrAysnJwMHDxcDGxCDaFZODoZJqfZwA/78+AWLxh9wf+9cWkK0C359/wEx4DeQAXOBe3QPXhfAwKwsJ3D6gSckmAGHV5cT7YLf36AuADkFBmxDO4lyweJCZ7DLIbEADIz/0DA4vaGSeBcA9YETkpF/JyLNMGBJTXgAI6XZGSDAAJsyjhMJL+H/AAAAAElFTkSuQmCC",
includes:["ComboBox","DropDownButton",["DropDownSelect","\x3cselect\x3e"],"FilteringSelect","MultiSelect","Select","\x3cselect\x3e"]},$ControlsSection_SlidersSpinners:{id:"SlidersSpinners",name:"Sliders, Spinners",iconBase64:"data:image/gif;base64,R0lGODlhEAAQANUAAM7W5DdYkDteljpfloOcwUBonkBonUFonkdzqEdzp3CUv+Tt+EZzp9Xk9Njm9dvo9kx+sU1+sZ/E6K3M68re8tDh89fm9VKHuYO14pC95ZG95Z/F6KzM663N68ne8tDi89Xl9FaOv4O24pG+5aDJ6tXj76nR7v///wAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAACH5BAEAACcALAAAAAAQABAAAAZZwJNwSCwaj8ikcjkMOZ/J0KJBbSxCyMtnwulMPpdiKcSIUDZoiSfCCJWEERIB8RhpMppHglCBCA0mJgoHFiIYDgYKgQVCAAGPAQIgIAOQAQBIj0ybnJ2eJ0EAOw\x3d\x3d",
includes:["HorizontalSlider","NumberSpinner","Slider","TimeSpinner","VerticalSlider"]},$ControlsSection_TextBox:{id:"TextBox",name:"TextBox",iconBase64:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAM1JREFUeNpi/P//PwMlgImBQkCxASzIHIvIif/lzfQZHp66yHBieT4jUSaAwgAZm0dM+I8uhg+DXRDefwAckqGWCmBD15x48H/18QcELV9Z6MAINuDPz98MtWmODBKcTAw9QL6NvhyDipoMXs0ts/chwuD39+9gDjfDfzgtyvAXe6hDQ+bXtx8IA94+eArmsLMywml+Bmbc4cbAyPD24VOEAX9//WLIyJ7KkBJiARZctPE0w5w1JxjoEgtM2NIBiCY2ITEO/bxAsQEAAQYAGVGarS2fPq4AAAAASUVORK5CYII\x3d",
includes:[["TextBox","\x3cinput\x3e"],"ComboBox","CurrencyTextBox","DateTextBox","DateTimeTextBox","NumberTextBox","SimpleTextarea",["Textarea","TextArea","ExpandingTextArea"],"ValidationTextBox","TimeTextBox"]},$ControlsSection_Toolbars:{id:"Toolbars",name:"Toolbars, ButtonBars",iconBase64:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAOtJREFUeNpi/P//PwMlgAVEhPcf+E+RAX9+/mKoTXMiWXPTzH0MTCDGzy9f4YIxmZOIokHg19dvDIygMHAtWPq/vjQYLPgfCHecf8ngaSTOsP0cHtpQgqGxey3ECyCT3n/9CdINNsJCTZDh/ZdfcNoSRH9G8C1UBYDqfyBcYJowg7JAlJCVYGgu9CFZc+2ErRAD/v39BxZQ4STNgL9//kBi4R+QQQ749+cvzIC/ZBoAdcFfSl3w69t3sgwA6QMb8PsfeVH4599/aCwA00Jy2QIG5n+YJv1lYgKLw+h/QBqUaCBizJCERAkACDAAug6MMt3XrLUAAAAASUVORK5CYII\x3d",
includes:["TabBar","TabBarButton","Toolbar"]},$ControlsSection_Other:{id:"Other",name:"Other",iconBase64:"data:image/gif;base64,R0lGODlhEAAQANUAADlckzthmDxhl0BonkBonUVwpUp6rU+BtU+CtFOJu1OKu1aOv/b8//n9/8/t++/6//L7/+v5/+76//X8//j9/+v6/+77/+/7//L8//b9//X9//n+//j+///ovfvcsvTKofTJofbKo/TJo/TKo+20kOegfeeffuegfuWfff///wAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAACH5BAEAACkALAAAAAAQABAAAAZfwJRwSCwaj8ikUrloOp/QVIJErZIc2Kwiheh4v9dKpEI+pAyetPp6eVgsEkOq8AGNRKAQyoGB9DEFKQRWVHsTGgwaGQMpAiclJiYoJ3sNDRwbFAEpAJ2en6BLoqOkpEEAOw\x3d\x3d",
includes:["ProgressIndicator","Rating","SearchBox"]},$ControlsSection:{id:"Controls",name:"Controls",_COMMENT1_:"each section can either have an array of subsections or an array of includes",iconBase64:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAIAAACQkWg2AAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyBpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuMC1jMDYwIDYxLjEzNDc3NywgMjAxMC8wMi8xMi0xNzozMjowMCAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENTNSBXaW5kb3dzIiB4bXBNTTpJbnN0YW5jZUlEPSJ4bXAuaWlkOjgyQUEwNTdCNTk1MTExRTBCODIzOTk0QzIzMzdBNkNGIiB4bXBNTTpEb2N1bWVudElEPSJ4bXAuZGlkOjgyQUEwNTdDNTk1MTExRTBCODIzOTk0QzIzMzdBNkNGIj4gPHhtcE1NOkRlcml2ZWRGcm9tIHN0UmVmOmluc3RhbmNlSUQ9InhtcC5paWQ6ODJBQTA1Nzk1OTUxMTFFMEI4MjM5OTRDMjMzN0E2Q0YiIHN0UmVmOmRvY3VtZW50SUQ9InhtcC5kaWQ6ODJBQTA1N0E1OTUxMTFFMEI4MjM5OTRDMjMzN0E2Q0YiLz4gPC9yZGY6RGVzY3JpcHRpb24+IDwvcmRmOlJERj4gPC94OnhtcG1ldGE+IDw/eHBhY2tldCBlbmQ9InIiPz7ZOYfnAAABBUlEQVR42pRSKxCDMAztdgjkJBKJnKxETk5WIpGTlcjKykpk5SSyEolETk4iI9eRrpSud7tF5NK8vHweHHoz38cHSdmVlhFkM5lN9W2dJDTKRJDNZBgxrum5oOdynB7j9NSC+aJhXjC4VCfrHQErLO0dsN2cBUDwjosOn0fyy2y19+8JsMDWjMA3QSkRPjMCW9GJ5CFWFzllu+qW1RmsXfHoW0OlNv7oYX52XRsS+rtVCbajrdGq9EeH2/rMQfZGaRPNxYwPdivpYRo1D8W+tAo3kVJ/Q+478Bt32UH5PSAFHWFVqVllRr/ploLc0VWRCyl2nT9BBDlZ8T8hKUYE/a3SS4ABAP4rm5Sxt9t9AAAAAElFTkSuQmCC",
subsections:"$ControlsSection_Buttons $ControlsSection_CheckboxesRadios $ControlsSection_IconContainer $ControlsSection_Pickers $ControlsSection_Select $ControlsSection_SlidersSpinners $ControlsSection_TextBox $ControlsSection_Toolbars $ControlsSection_Other".split(" ")},$HTMLSection_Common:{id:"Common",name:"Common",iconBase64:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAALNJREFUeNpi/P//P4NUxvb/DGQCFhjj2QxPkjUDLWZgYqAQgA34//8fmNO74TIcwwCMjU2MAagPbADTv79wyeIAXTBG1oALMAL1gcOA8f9vgoqRDQWxIfr+QF3w9w95/v/7C+qCf78x/AezBa8XgC5gAKUDhZh5/8kBIH3QQPxNlhdALqdOOmD8+5vMQIS6gPH/X/K8ANQHDQMyoxEYC9CE9I9BI6SHdBeA9f7/T1EgAgQYAMdnhUefY5wVAAAAAElFTkSuQmCC",
includes:["\x3ca\x3e","\x3cdiv\x3e","\x3clabel\x3e","\x3cspan\x3e","\x3cstyle\x3e"]},$HTMLSection_Forms:{id:"Forms",name:"Forms",iconBase64:"data:image/png;base64,R0lGODlhEAAQAOYAAPT2/PH0+/n6/Iaavoyfwt/o+OLq+Onv+pOmxt/o9+bt+N7k7unv+e3y+sbT59/p+OLr+PD0+t/p9/D1+/f5+5DDvKfMxgBZSqfNxgJbSqjNxqjMxQZeSqjNxQZfSgpiSgphSg9mSrXSyRNrShNqSb3Vy5zKtp3Ktr3Wy5zKtZ3KtR1zSaDMtSJ3ScTYzSZ6SSZ7SSl+SSl9SSp+SSp9SaTNtCyASXt0T392ToV5TIx8SpOASKOIQ5yEReDIj97WwbSQPbCOPquLQNSyaNSyadq9fObav9Wyaf///////wAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAACH5BAEAAEkALAAAAAAQABAAAAeQgEmCg4SFhoeIhECLi4g2NklASEgCRECHNi40RpMURUdBgjAxMzIzKCUvSAgAPkVDQkktIrS1Ii0RExERATxJKx0bGhYdGMIrDgQDDT1JJBXQ0dAjDAwHDDtJISYnKSom3CEOCMoKOkkgHOoeLCwfCxAG8hA5hRk1HD8J+w8SBTiFLlxIcqOgwYKJEipcaCgQADs\x3d",
includes:"\x3cbutton\x3e \x3cfieldset\x3e \x3cform\x3e \x3cinput\x3e \x3cselect\x3e \x3ctextarea\x3e".split(" ")},$HTMLSection_Headers:{id:"Headers",name:"Headers",iconBase64:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAIpJREFUeNpi/P//PwMlgImBQkCxASwggtW3bzeQcgFiVx5NrT0gsS/Xr2GIwQBQbiaQSgPJkewCoOZyqGaEC4jUqASkQK5SIjcMlKC4Aoj34HLBbqBNuAy4B8TKwPC4B1TjgsuAs0D8Hso2BmJBmARIIzHRWAFUCAp1V6hhQyAhUWwA49DPTAABBgDGmykkJRol4AAAAABJRU5ErkJggg\x3d\x3d",
includes:["\x3ch1\x3e","\x3ch2\x3e","\x3ch3\x3e"]},$HTMLSection_ImagesMediaIframes:{id:"ImagesMediaIframes",name:"Images, Media, Iframes",iconBase64:"data:image/gif;base64,R0lGODlhEAAQANUAAOnn6f////7+/v39/fz8/Pr6+vn5+ff39/X19fT09PLy8vHx8e/v7+fn59/f397e3tvb29bW1sfHx8LCwsHBwby8vLq6urm5uba2trS0tLKysq2traKioqCgoJycnJSUlJKSkpGRkYuLi4qKiomJiYSEhHh4eHV1dXR0dGlpaWhoaFxcXP///wAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAACH5BAEAACwALAAAAAAQABAAAAaPQBYLNAQZjcJk0mgJOBeEkXI5jEwmHMJCNC1uIBNKxzTwEJWhocPxkAQIBgY3+QFpAJTJxnRarU5KRCANVxkcFygsJIEfGAx5eQoZSFQgCQkIlwREaUsgFwdXYQIXlEJpIAWiFAEfQ4EgFQFheQEWpq8gTrsBnLBNkBO2dWhDsxTIrSydQioqKc7P0iolQkEAOw\x3d\x3d",
includes:["\x3caudio\x3e","\x3cembed\x3e","\x3cimg\x3e","\x3ciframe\x3e","\x3cvideo\x3e"]},$HTMLSection_ParagraphsFormatting:{id:"ParagraphsFormatting",name:"Paragraphs, Breaks, Rules",iconBase64:"data:image/gif;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAIAAACQkWg2AAAACXBIWXMAAAsTAAALEwEAmpwYAAAKT2lDQ1BQaG90b3Nob3AgSUNDIHByb2ZpbGUAAHjanVNnVFPpFj333vRCS4iAlEtvUhUIIFJCi4AUkSYqIQkQSoghodkVUcERRUUEG8igiAOOjoCMFVEsDIoK2AfkIaKOg6OIisr74Xuja9a89+bN/rXXPues852zzwfACAyWSDNRNYAMqUIeEeCDx8TG4eQuQIEKJHAAEAizZCFz/SMBAPh+PDwrIsAHvgABeNMLCADATZvAMByH/w/qQplcAYCEAcB0kThLCIAUAEB6jkKmAEBGAYCdmCZTAKAEAGDLY2LjAFAtAGAnf+bTAICd+Jl7AQBblCEVAaCRACATZYhEAGg7AKzPVopFAFgwABRmS8Q5ANgtADBJV2ZIALC3AMDOEAuyAAgMADBRiIUpAAR7AGDIIyN4AISZABRG8lc88SuuEOcqAAB4mbI8uSQ5RYFbCC1xB1dXLh4ozkkXKxQ2YQJhmkAuwnmZGTKBNA/g88wAAKCRFRHgg/P9eM4Ors7ONo62Dl8t6r8G/yJiYuP+5c+rcEAAAOF0ftH+LC+zGoA7BoBt/qIl7gRoXgugdfeLZrIPQLUAoOnaV/Nw+H48PEWhkLnZ2eXk5NhKxEJbYcpXff5nwl/AV/1s+X48/Pf14L7iJIEyXYFHBPjgwsz0TKUcz5IJhGLc5o9H/LcL//wd0yLESWK5WCoU41EScY5EmozzMqUiiUKSKcUl0v9k4t8s+wM+3zUAsGo+AXuRLahdYwP2SycQWHTA4vcAAPK7b8HUKAgDgGiD4c93/+8//UegJQCAZkmScQAAXkQkLlTKsz/HCAAARKCBKrBBG/TBGCzABhzBBdzBC/xgNoRCJMTCQhBCCmSAHHJgKayCQiiGzbAdKmAv1EAdNMBRaIaTcA4uwlW4Dj1wD/phCJ7BKLyBCQRByAgTYSHaiAFiilgjjggXmYX4IcFIBBKLJCDJiBRRIkuRNUgxUopUIFVIHfI9cgI5h1xGupE7yAAygvyGvEcxlIGyUT3UDLVDuag3GoRGogvQZHQxmo8WoJvQcrQaPYw2oefQq2gP2o8+Q8cwwOgYBzPEbDAuxsNCsTgsCZNjy7EirAyrxhqwVqwDu4n1Y8+xdwQSgUXACTYEd0IgYR5BSFhMWE7YSKggHCQ0EdoJNwkDhFHCJyKTqEu0JroR+cQYYjIxh1hILCPWEo8TLxB7iEPENyQSiUMyJ7mQAkmxpFTSEtJG0m5SI+ksqZs0SBojk8naZGuyBzmULCAryIXkneTD5DPkG+Qh8lsKnWJAcaT4U+IoUspqShnlEOU05QZlmDJBVaOaUt2ooVQRNY9aQq2htlKvUYeoEzR1mjnNgxZJS6WtopXTGmgXaPdpr+h0uhHdlR5Ol9BX0svpR+iX6AP0dwwNhhWDx4hnKBmbGAcYZxl3GK+YTKYZ04sZx1QwNzHrmOeZD5lvVVgqtip8FZHKCpVKlSaVGyovVKmqpqreqgtV81XLVI+pXlN9rkZVM1PjqQnUlqtVqp1Q61MbU2epO6iHqmeob1Q/pH5Z/YkGWcNMw09DpFGgsV/jvMYgC2MZs3gsIWsNq4Z1gTXEJrHN2Xx2KruY/R27iz2qqaE5QzNKM1ezUvOUZj8H45hx+Jx0TgnnKKeX836K3hTvKeIpG6Y0TLkxZVxrqpaXllirSKtRq0frvTau7aedpr1Fu1n7gQ5Bx0onXCdHZ4/OBZ3nU9lT3acKpxZNPTr1ri6qa6UbobtEd79up+6Ynr5egJ5Mb6feeb3n+hx9L/1U/W36p/VHDFgGswwkBtsMzhg8xTVxbzwdL8fb8VFDXcNAQ6VhlWGX4YSRudE8o9VGjUYPjGnGXOMk423GbcajJgYmISZLTepN7ppSTbmmKaY7TDtMx83MzaLN1pk1mz0x1zLnm+eb15vft2BaeFostqi2uGVJsuRaplnutrxuhVo5WaVYVVpds0atna0l1rutu6cRp7lOk06rntZnw7Dxtsm2qbcZsOXYBtuutm22fWFnYhdnt8Wuw+6TvZN9un2N/T0HDYfZDqsdWh1+c7RyFDpWOt6azpzuP33F9JbpL2dYzxDP2DPjthPLKcRpnVOb00dnF2e5c4PziIuJS4LLLpc+Lpsbxt3IveRKdPVxXeF60vWdm7Obwu2o26/uNu5p7ofcn8w0nymeWTNz0MPIQ+BR5dE/C5+VMGvfrH5PQ0+BZ7XnIy9jL5FXrdewt6V3qvdh7xc+9j5yn+M+4zw33jLeWV/MN8C3yLfLT8Nvnl+F30N/I/9k/3r/0QCngCUBZwOJgUGBWwL7+Hp8Ib+OPzrbZfay2e1BjKC5QRVBj4KtguXBrSFoyOyQrSH355jOkc5pDoVQfujW0Adh5mGLw34MJ4WHhVeGP45wiFga0TGXNXfR3ENz30T6RJZE3ptnMU85ry1KNSo+qi5qPNo3ujS6P8YuZlnM1VidWElsSxw5LiquNm5svt/87fOH4p3iC+N7F5gvyF1weaHOwvSFpxapLhIsOpZATIhOOJTwQRAqqBaMJfITdyWOCnnCHcJnIi/RNtGI2ENcKh5O8kgqTXqS7JG8NXkkxTOlLOW5hCepkLxMDUzdmzqeFpp2IG0yPTq9MYOSkZBxQqohTZO2Z+pn5mZ2y6xlhbL+xW6Lty8elQfJa7OQrAVZLQq2QqboVFoo1yoHsmdlV2a/zYnKOZarnivN7cyzytuQN5zvn//tEsIS4ZK2pYZLVy0dWOa9rGo5sjxxedsK4xUFK4ZWBqw8uIq2Km3VT6vtV5eufr0mek1rgV7ByoLBtQFr6wtVCuWFfevc1+1dT1gvWd+1YfqGnRs+FYmKrhTbF5cVf9go3HjlG4dvyr+Z3JS0qavEuWTPZtJm6ebeLZ5bDpaql+aXDm4N2dq0Dd9WtO319kXbL5fNKNu7g7ZDuaO/PLi8ZafJzs07P1SkVPRU+lQ27tLdtWHX+G7R7ht7vPY07NXbW7z3/T7JvttVAVVN1WbVZftJ+7P3P66Jqun4lvttXa1ObXHtxwPSA/0HIw6217nU1R3SPVRSj9Yr60cOxx++/p3vdy0NNg1VjZzG4iNwRHnk6fcJ3/ceDTradox7rOEH0x92HWcdL2pCmvKaRptTmvtbYlu6T8w+0dbq3nr8R9sfD5w0PFl5SvNUyWna6YLTk2fyz4ydlZ19fi753GDborZ752PO32oPb++6EHTh0kX/i+c7vDvOXPK4dPKy2+UTV7hXmq86X23qdOo8/pPTT8e7nLuarrlca7nuer21e2b36RueN87d9L158Rb/1tWeOT3dvfN6b/fF9/XfFt1+cif9zsu72Xcn7q28T7xf9EDtQdlD3YfVP1v+3Njv3H9qwHeg89HcR/cGhYPP/pH1jw9DBY+Zj8uGDYbrnjg+OTniP3L96fynQ89kzyaeF/6i/suuFxYvfvjV69fO0ZjRoZfyl5O/bXyl/erA6xmv28bCxh6+yXgzMV70VvvtwXfcdx3vo98PT+R8IH8o/2j5sfVT0Kf7kxmTk/8EA5jz/GMzLdsAAAAEZ0FNQQAAsY58+1GTAAAAIGNIUk0AAHolAACAgwAA+f8AAIDpAAB1MAAA6mAAADqYAAAXb5JfxUYAAAHGSURBVHjaZFLJbhNREKx+b2Yc7xs2EEVZlEgR4oKEOHLiH/gEfokP4EM4I0UcEApCkYAoIDlWGC9je2ymFw4zA9jUqaWu6up6r+nT1XWn1QDAnMEU2/BB5HxoxjAAmM4XQb/TGtzrcBprfOXC2l8ugVnHox+9w6eN7kGhdy4QVQCrZB7WjqOykYMZy9E0vXg9fPKqOzgCIKou76kZs6w2WbL6laRZkmarDXNmlfqg2xvefngzGX/NbYNimkFU3328niTrMKrA+Ua18vzRg73W4ab20iq38eimOzwBSoGamWLQaVSj0PuAnAO591/uWG2/1z46aU++X+bMPw7GgpvxLJ4tgzByPiDnyXkxNKt7+83Iygd0JR/MCjgiclTAERHBDBmriG05qGrG+uLZuUk5oIQYVou5qm4JzCCii1QlYxBgAIEAGMg7EdUdBzMTsbcXn+N5EoYR+ZCcd96z4Pygd9orvuvfDMZS7GEglBUoNzfV3Qym8I/PjjebdZ4WRCAyo2atwpLuCgDcfbvsCwfCO6GXoFUyrQfrQuCdA/Dw+CyKIsDyRXZg9xvt/rA4vp/TuagSka8PczL9JyDQbC26jKezxe8BAJ6U+/2r7MIJAAAAAElFTkSuQmCC",
includes:"\x3cb\x3e \x3cbr\x3e \x3cem\x3e \x3chr\x3e \x3ci\x3e \x3cp\x3e \x3cs\x3e \x3cstrong\x3e \x3cu\x3e".split(" ")},$HTMLSection_Tables:{id:"Tables",name:"Tables",iconBase64:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAXhJREFUeNrEUz1LA0EQnTvzO/wPYsBOrQW109ImpLPIL9DWKqQQRESEFGKjYmGwEyQggUTBRn+BIhFFTXK53Z1xZi53ulcpKdxjmXnD7Lv39iMgIhhnhDDmKKTJavXyz1KOKvNBRkCIsFWe09wxFbI1iTEy5ppB0shB69v1K18BOdTYvHvUZm1k0oi7rUwhIIkAs8VJQESfwMQxVGoXv5Le7jxAwF/yZ2aVubRxRjKYmWJrqXZyQ/3I0HtvSG8fA8Xd1z49v/ToqftJi5va/30KJhqOyGQ/WL6xCcZkCkakrMcOopyFKGKvCGLNslFrDMTGqX8hECz7AKN7YwZDnwC5uXp47XndPW17uN64zXK0zidwzsH6yozKNKxg57gFpeUi11EtHZx3YG1hKiNoNO9zx8iMcjRigWQFYuJfVAMp/jmcRf8qG90sUAWoEWUZpG8FcwRICQ7ShunSniYToiIMIb3XguXELdcKnEtM6639chD8+2v8EmAA9/wqJKl9P7kAAAAASUVORK5CYII\x3d",
includes:["\x3ctable\x3e"]},$HTMLSection:{id:"HTML",name:"HTML",iconBase64:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyBpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuMC1jMDYwIDYxLjEzNDc3NywgMjAxMC8wMi8xMi0xNzozMjowMCAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENTNSBXaW5kb3dzIiB4bXBNTTpJbnN0YW5jZUlEPSJ4bXAuaWlkOjVFNUZFNTNBNTk0QjExRTBBNkY0ODEzNDdCMzkxNTdDIiB4bXBNTTpEb2N1bWVudElEPSJ4bXAuZGlkOjVFNUZFNTNCNTk0QjExRTBBNkY0ODEzNDdCMzkxNTdDIj4gPHhtcE1NOkRlcml2ZWRGcm9tIHN0UmVmOmluc3RhbmNlSUQ9InhtcC5paWQ6NUU1RkU1Mzg1OTRCMTFFMEE2RjQ4MTM0N0IzOTE1N0MiIHN0UmVmOmRvY3VtZW50SUQ9InhtcC5kaWQ6NUU1RkU1Mzk1OTRCMTFFMEE2RjQ4MTM0N0IzOTE1N0MiLz4gPC9yZGY6RGVzY3JpcHRpb24+IDwvcmRmOlJERj4gPC94OnhtcG1ldGE+IDw/eHBhY2tldCBlbmQ9InIiPz5wB++kAAABAklEQVR42qRToQ7CMBC9LYhK5Bz9AyaHYhIHEomcYxI5iRwOOYkcDgkKWxxyuElwnSq5hpJ2tAvJXnK5vuvd60u7eUII6IOBTo67SafafH31foroQEWZR8IFVibis2/M+G3BV9NYTydkCJSGPy59WzOKtMMlYghUTwLsXsMsLQA4yIwc10GUyaBxLvusAuGigM3+BHFIJceMnFW182K/ApfbQ6jhdBnjoTLrIljjLgF9WIcu0ulgm8zgzCrID2ejATnWcV+htt3BdDzydBHOzWEaBLLGucMB4lQkXycIffivTxmBzYdsJdcqd8GHnmg5ILDfLrXHIpaHIwbz+v7ObwEGADGQtFOesBZAAAAAAElFTkSuQmCC",
subsections:"$HTMLSection_Common $HTMLSection_Forms $HTMLSection_Headers $HTMLSection_ImagesMediaIframes $HTMLSection_ParagraphsFormatting $HTMLSection_Tables".split(" ")},$AppOtherSection:{id:"Other",name:"Other",iconBase64:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAcFJREFUeNqcUj1IQlEUPjfc+llqCEKwpaCgrJZqKOhnqiChsbQhF+f2moqgpaH2rDEqiiCwBB2sRbJArYa0hohSCLTQ93rvds95710VHaIDx/P5ne+ce869j3HOAW039MCPr9PwV5sddIBntJPZLAKLV+eHCDMpY2UlnP5bvyv7V9gA6qx04bMAmbwKmZwiXIWPvAI9bY0iFikSh7m8QhrUo9nKx8IknsTFGYyXcwDvohHDgbgxhWUVDbJfijE23osIO+Fnmnw79CKKzTJswEot5Aq+uV6Ix+6FJ8HewCESjJIjTtwmKWev5xAXOCEw6o2G4jR039Y5z+WK5H/FWCdX4HppLEykMtkqrJu4vaWZML2T9R2cRtP8LJygS5wa6QYDg8BdNbChmRlwMLmCd/NUjmfhu9Qr4enlALl384Q4S4N18hJ1XYeaWNMk1rRqTcUKR4Ebwq7JPiAsnss10Q9HFyY/YfKmpmKFpY0T/v2tkrvXDig+vWX54vohRXTUYMScR2gqXqGoFEqvYI7X2tQkxv6hSBq1IHHVCoHII/cHY/QJL4w7wX8ZI94t8J7gUYYYNcSPOWFyuIPJBv+1XwEGAJJgewSkj0bcAAAAAElFTkSuQmCC",
includes:"Calendar ColorPalette GridX RichText StickyNote Tree $$AllOthers$$".split(" ")},$SketchOtherSection:{id:"Other",name:"Other",iconBase64:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAcFJREFUeNqcUj1IQlEUPjfc+llqCEKwpaCgrJZqKOhnqiChsbQhF+f2moqgpaH2rDEqiiCwBB2sRbJArYa0hohSCLTQ93rvds95710VHaIDx/P5ne+ce869j3HOAW039MCPr9PwV5sddIBntJPZLAKLV+eHCDMpY2UlnP5bvyv7V9gA6qx04bMAmbwKmZwiXIWPvAI9bY0iFikSh7m8QhrUo9nKx8IknsTFGYyXcwDvohHDgbgxhWUVDbJfijE23osIO+Fnmnw79CKKzTJswEot5Aq+uV6Ix+6FJ8HewCESjJIjTtwmKWev5xAXOCEw6o2G4jR039Y5z+WK5H/FWCdX4HppLEykMtkqrJu4vaWZML2T9R2cRtP8LJygS5wa6QYDg8BdNbChmRlwMLmCd/NUjmfhu9Qr4enlALl384Q4S4N18hJ1XYeaWNMk1rRqTcUKR4Ebwq7JPiAsnss10Q9HFyY/YfKmpmKFpY0T/v2tkrvXDig+vWX54vohRXTUYMScR2gqXqGoFEqvYI7X2tQkxv6hSBq1IHHVCoHII/cHY/QJL4w7wX8ZI94t8J7gUYYYNcSPOWFyuIPJBv+1XwEGAJJgewSkj0bcAAAAAElFTkSuQmCC",
includes:"Calendar ColorPalette GridX RichText StickyNote Tree $$AllOthers$$".split(" ")},$mobileSections:"$ViewsSection $HeadingSection $ListsSection $ControlsSection $ContainersSection $HTMLSection $ClipartSection $XBLOXSection $DrawingToolsSection $AppOtherSection $StatesSection".split(" "),$desktopSections:"$ContainersSection $ControlsSection $ViewsSection $HeadingSection $ListsSection $HTMLSection $ClipartSection $XBLOXSection $DrawingToolsSection $AppOtherSection $StatesSection".split(" "),
$sketchSections:"$DrawingToolsSection $ClipartSection $ControlsSection $ContainersSection $HTMLSection $HeadingSection $ListsSection $SketchOtherSection".split(" "),$sketchExcludes:["dojox.mobile.ScrollableView","dojox.mobile.SwapView","dojox.mobile.View"],$ALLMOBILE_Sections:"$ViewsSection $HeadingSection $ListsSection $ControlsSection $ContainersSection $HTMLSection $ClipartSection $XBLOXSection $DrawingToolsSection $AppOtherSection $StatesSection".split(" "),$ALLDESKTOP_Sections:"$ContainersSection $ControlsSection $ViewsSection $HeadingSection $ListsSection $HTMLSection $ClipartSection $XBLOXSection $DrawingToolsSection $AppOtherSection $StatesSection".split(" "),
$deliteSections:["$HTMLSection","$XBLOXSection","$DELITESection","$StatesSection"],$ALLDELITE_Sections:["$HTMLSection","$XBLOXSection","$DELITESection"],$DELITESection_Controls:{id:"delite",name:"Controls",iconBase64:"data:image/gif;base64,R0lGODlhEAAQALMAAN7e4oyMjtXV1sDAwf///+Dg4MvLyzMzM////wAAAAAAAAAAAAAAAAAAAAAAAAAAACH5BAEAAAgALAAAAAAQABAAAAQ3EMlJq704a3RO2NIhBIexHYRgeFTndkQ8HmER33g60EcB/ECcYBd6wWSkDErFUs5Mms4HRK1SIwA7",includes:"Button Slider Combobox Select Checkbox RadioButton Switch ToggleButton MediaPlayer".split(" ")},
$DELITESection_Containers:{id:"delite",name:"Containers",iconBase64:"data:image/gif;base64,R0lGODlhEAAQALMAAN7e4oyMjtXV1sDAwf///+Dg4MvLyzMzM////wAAAAAAAAAAAAAAAAAAAAAAAAAAACH5BAEAAAgALAAAAAAQABAAAAQ3EMlJq704a3RO2NIhBIexHYRgeFTndkQ8HmER33g60EcB/ECcYBd6wWSkDErFUs5Mms4HRK1SIwA7",includes:["ViewStack","Panel","TabBar","Accordion"]},$DELITESection_States:{id:"delite",name:"States",iconBase64:"data:image/gif;base64,R0lGODlhEAAQALMAAN7e4oyMjtXV1sDAwf///+Dg4MvLyzMzM////wAAAAAAAAAAAAAAAAAAAAAAAAAAACH5BAEAAAgALAAAAAAQABAAAAQ3EMlJq704a3RO2NIhBIexHYRgeFTndkQ8HmER33g60EcB/ECcYBd6wWSkDErFUs5Mms4HRK1SIwA7",
includes:["CSSState"]},$DELITESection:{id:"delite",name:"Deliteful",iconBase64:"data:image/gif;base64,R0lGODlhEAAQAKIAAFhYWtXV1v///0BAQP///wAAAAAAAAAAACH5BAEAAAQALAAAAAAQABAAAAMuSLo0w5CNIF6EM9grN2+Z82WCEGjcVJbopa5tlJ2nh4W2XH9LyCu+X/AHAPyOCQA7",subsections:["$DELITESection_Controls","$DELITESection_Containers"],includes:[]},$StatesSection:{id:"States",name:"States",iconBase64:"data:image/gif;base64,R0lGODlhEAAQAKIAAL+/v5aWlmNjYzMzMxwcHBYWFv///wAAACH5BAEAAAYALAAAAAAQABAAAAMgaLrc/jBKFsBcg9g7iuaFZwlhaZrD1Ikqq35Xdc10PScAOw\x3d\x3d",
includes:["CSS","Style"]}},_COMMENT11_:"Should have one each for mobile, desktop, sketchhifi, sketchlofi",_COMMENT12_:"For each preset, collections is list of each widget collection in order of precedence",_COMMENT13_:"and sections is the array of sections for this preset (or $desktopSections)",presets:{mobile:{collections:[{id:"dojoxmobile",show:!0},{id:"dijit",show:!1},{id:"html",show:!0},{id:"clipart",show:!0},{id:"shapes",show:!0}],sections:"$mobileSections"},desktop:{collections:[{id:"dijit",
show:!0},{id:"dojoxmobile",show:!1},{id:"html",show:!0},{id:"clipart",show:!0},{id:"xblox",show:!0},{id:"shapes",show:!0},{id:"delite",show:!0}],sections:"$desktopSections"},delite:{collections:[{id:"dijit",show:!1},{id:"dojoxmobile",show:!1},{id:"html",show:!0},{id:"xblox",show:!0},{id:"delite",show:!0},{id:"shapes",show:!0},{id:"clipart",show:!0}],sections:"$deliteSections"},sketchhifi:{collections:[{id:"shapes",show:!0},{id:"clipart",show:!1},{id:"dijit",show:!0},{id:"dojoxmobile",show:!0},{id:"html",
show:!0}],sections:"$sketchSections",exclude:"$sketchExcludes"},sketchlofi:{collections:[{id:"shapes",show:!0},{id:"clipart",show:!1},{id:"dijit",show:!0},{id:"dojoxmobile",show:!1},{id:"html",show:!0}],sections:"$sketchSections",exclude:"$sketchExcludes"},$ALLMOBILE:{_COMMENT1_:"$ALLMOBILE is a special preset which shows all widgets",_COMMENT2_:"regardless of the current composition type",_COMMENT3_:"ranking mobile widgets above desktop widgets",collections:[{id:"dojoxmobile",show:!0},{id:"dijit",
show:!0},{id:"html",show:!0},{id:"clipart",show:!0},{id:"xblox",show:!0},{id:"shapes",show:!0}],sections:"$ALLMOBILE_Sections"},$ALLDESKTOP:{_COMMENT1_:"$ALLDESKTOP is a special preset which shows all widgets",_COMMENT2_:"regardless of the current composition type",_COMMENT3_:"ranking desktop widgets above mobile widgets",collections:[{id:"dijit",show:!0},{id:"dojoxmobile",show:!0},{id:"html",show:!0},{id:"clipart",show:!0},{id:"xblox",show:!0},{id:"shapes",show:!0}],sections:"$ALLDESKTOP_Sections"},
$ALLDELITE:{_COMMENT1_:"$ALLDESKTOP is a special preset which shows all widgets",_COMMENT2_:"regardless of the current composition type",_COMMENT3_:"ranking desktop widgets above mobile widgets",collections:[{id:"dijit",show:!1},{id:"dojoxmobile",show:!1},{id:"html",show:!0},{id:"clipart",show:!0},{id:"xblox",show:!0},{id:"shapes",show:!0},{id:"delite",show:!0}],sections:"$ALLDELITE_Sections"}}}:this._initializationInfo[b]},getDefaultThemeSet:function(){return this.getSiteConfigData("defaultThemeSet")},
getUserDisplayName:function(b){b||(b=this.getUser());var a=b.userDisplayName;b.userDisplayName||(a=b.email);return a},getUserEmail:function(b){b||(b=this.getUser());return b.email},getUserDisplayNamePlusEmail:function(b){b||(b=this.getUser());var a=this.getUserDisplayName(b);a!=b.email&&(a+=" \x26lt;"+b.email+"\x26gt;");return a},loadPlugins:function(){c.forEach(function(b){var a=b.id;g.plugins[a]=b;for(var e in b){var c=b[e];"string"!=typeof c&&(c instanceof Array?c.forEach(function(b){g._addExtension(e,
b,a)}):g._addExtension(e,c,a))}})},singleUserMode:function(){return g.isLocalInstall},_stripMaqetta:!0,location:function(){var b=document.location.href.split("?")[0],b=b.replace("index.php",""),b=b.replace("maqetta.html",""),b=b.replace("xui.php",""),b=b.replace("xui.php?debug\x3dtrue",""),b=b.replace("maqettar.html",""),b=b.replace("index.html",""),b=b.replace("?",""),b=b.replace("debug\x3dtrue",""),b=b.replace("\x26isDesktop\x3dtrue","");this._stripMaqetta&&(b=b.replace("maqetta/",""));return b},
getUserWorkspaceUrl:function(){if(this.userBaseUrl)return this.userBaseUrl},run:function(){dojo.isMac&&dojo.addClass(document.documentElement,"isMac");var b=document.body.style;g.supportsCSS3Transitions=void 0!==b.WebkitTransition||void 0!==b.MozTransition||void 0!==b.OTransition||void 0!==b.transition;g.subscribe("/davinci/ui/selectionChanged",g._selectionChanged);dojo.connect(dojo.doc.documentElement,"onkeypress",function(a){8==a.charOrCode&&(window.davinciBackspaceKeyTime=Date.now())});dojo.connect(dojo.doc.documentElement,
"onkeydown",this,"_handleGlobalDocumentKeyEvent");dojo.addOnUnload(function(a){for(var b=null,c=davinci.Workbench&&davinci.Workbench.editorTabs?davinci.Workbench.editorTabs.getChildren():[],g=0,d=0;d<c.length;d++){var r=c[d];r.editor&&(r=r.editor.getOnUnloadWarningMessage())&&(b||(b=r),g++)}1<g&&(b=dojo.string.substitute(n.multipleFilesUnsaved,[b,g]));!b&&100>Date.now()-window.davinciBackspaceKeyTime&&(b=n.careful);if(b){if(a=a||window.event)a.returnValue=b;return b}})},subscribe:function(b,a){g.subscriptions.push(dojo.subscribe(b,
this,a))},destroy:function(){dojo.forEach(g.subscriptions,dojo.unsubscribe)},_addExtension:function(b,a,e){a.id&&(a.id=e+"."+a.id);g.extensionPoints[b]=g.extensionPoints[b]||[];e=g.extensionPoints[b];e.push(a);g.extensionPoints[b]=e},getExtensions:function(b,a){b=g.extensionPoints[b];if(a){var e=a instanceof Function;if(b)return b.filter(function(b){return e&&a(b)||b.id==a})}return b},getExtension:function(b,a){return g.getExtensions(b,a)[0]},handleError:function(b){var a="welcome";g.singleUserMode()&&
(a=".");window.document.body.innerHTML=dojo.string.substitute(n.serverConnectError,{redirectUrl:a,error:b})},executeCommand:function(b){(b=g.getExtension("davinci.commands",b))&&b.run&&b.run()},_selectionChanged:function(b){g.currentSelection=b},getSelection:function(){return g.currentSelection},serverJSONRequest:function(b){var a,e={handleAs:"json"};dojo.mixin(e,b);dojo.xhrGet(e).then(function(b){b&&(a=b)});return a},registerKeyBinding:function(b,a){this._globalKeyBindings||(this._globalKeyBindings=
[]);this._globalKeyBindings.push({keyBinding:b,action:a})},handleKeyEvent:function(b){this._handleKeyEvent(b,!0)},_handleGlobalDocumentKeyEvent:function(b){this._handleKeyEvent(b)},_handleKeyEvent:function(b,a){if(this._globalKeyBindings){var e=!1;(e=dojo.some(this._globalKeyBindings,dojo.hitch(this,function(a){if(g.isKeyEqualToEvent(a.keyBinding,b))return davinci.Workbench._runAction(a.action),!0})))?dojo.stopEvent(b):a||this.currentEditor&&this.currentEditor.handleKeyEvent&&this.currentEditor.handleKeyEvent(b,
!0)}},isKeyEqualToEvent:function(b,a){var e=!0,c=a.altKey&&!dojo.isMac||dojo.isMac&&a.ctrlKey;!!b.accel!==(a.ctrlKey&&!dojo.isMac||dojo.isMac&&a.metaKey)&&(e=!1);!!b.meta!==c&&(e=!1);!!b.shift!==a.shiftKey&&(e=!1);e&&b.charOrCode&&a.which&&(e=dojo.isArray(b.charOrCode)?dojo.some(b.charOrCode,dojo.hitch(this,function(b){return this._comparecharOrCode(b,a)})):this._comparecharOrCode(b.charOrCode,a));return e},_comparecharOrCode:function(b,a){return dojo.isString(b)?b.toLowerCase()===String.fromCharCode(a.which).toLowerCase():
b===a.which}};return g})},"xwire/EventSource":function(){define(["dcl/dcl","xwire/Source","xide/mixins/EventedMixin"],function(n,m,k){return n([m,k.dcl],{declaredClass:"xwire.EventSource",trigger:null,path:null,filters:null,_started:!1,_matches:function(h,d){for(var b=0;b<d.length;b++)if(this.getValue(h,d[b].path)!==d[b].value)return!1;return!0},onTriggered:function(h){this.filters&&!this._matches(h,this.filters)||!this.path||(h=this.getValue(h,this.path),this.binding&&this.binding.trigger({value:h,
source:this}))},start:function(){this._started||(this.subscribe(this.trigger,this.onTriggered),this._started=!0)}})})},"davinci/ve/_ContextTheme":function(){define("dojo/_base/declare ../Theme ../model/Path ../Workbench ../library ./metadata dojox/html/_base".split(" "),function(n,m,k,h,d,b){return n(null,{getTheme:function(){if(!this.theme){var c=b.loadThemeMeta(this._srcDocument);c&&(this._themeUrl=c.themeUrl,this._themeMetaCache=c.themeMetaCache,this.theme=c.theme,this.theme.helper=m.getHelper(this.theme),
this.theme.helper&&this.theme.helper.then&&this.theme.helper.then(function(b){b.helper&&(this.theme.helper=b.helper)}.bind(this)))}return this.theme},getThemeMeta:function(){this._themeMetaCache||this.getTheme();return this._themeMetaCache},themeChanged:function(){var b=!0,g=this.getModel();this._themeUrl&&g.find({elementType:"CSSImport",url:this._themeUrl},!0)&&(b=!1);b&&(this._themeMetaCache=this.theme=null)},loadTheme:function(b){var c=this.getModel(),p="claro";b&&b.themeSet?p=b.themeSet.desktopTheme:
b&&b.theme&&(p="deviceSpecific"==b.theme?"claro":b.theme);b=c.find({elementType:"CSSImport"});var a={},e;d.getThemes(h.getProject()).forEach(function(b){b.name==p&&(e=b);b.files&&b.files.forEach(function(e){a[e]=b})});if(null==e)return console.error("couldnt find default theme, abort!!"),!1;if(null==e.getFile)return console.error("default theme in invalid state, abort!!"),!1;if(b.some(function(b){for(var e in a)if(-1<b.url.indexOf(e))return!0}))return!0;c.find({elementType:"HTMLElement",tag:"body"},
!0).setAttribute("class",e.className);c=e.getFile();if(null==c||null==c.getPath)return console.error("default theme file in invalid state, abort!!"),!0;var q=e.getFile().getPath();e.files.forEach(function(a){a=(new k(q)).removeLastSegments(1).append(a).relativeTo(this.getPath(),!0);this.addModeledStyleSheet(a.toString(),!0)},this)},_themeChange:function(b){b&&"CSSRule"===b.elementType&&(this.editor.setDirty(!0),this.hotModifyCssRule(b))}})})},"xide/json/SearchBox":function(){define(["dojo/_base/declare",
"./util"],function(n,m){function k(h,d){var b=this;this.editor=h;this.timeout=void 0;this.delay=200;this.lastText=void 0;this.dom={};this.dom.container=d;h=document.createElement("table");this.dom.table=h;h.className="search";d.appendChild(h);var c=document.createElement("tbody");this.dom.tbody=c;h.appendChild(c);d=document.createElement("tr");c.appendChild(d);h=document.createElement("td");d.appendChild(h);c=document.createElement("div");this.dom.results=c;c.className="results";h.appendChild(c);
h=document.createElement("td");d.appendChild(h);d=document.createElement("div");this.dom.input=d;d.className="frame form-control input-transparent";d.title="Search fields and values";h.appendChild(d);h=document.createElement("table");d.appendChild(h);c=document.createElement("tbody");h.appendChild(c);d=document.createElement("tr");c.appendChild(d);c=document.createElement("button");c.className="refresh";h=document.createElement("td");h.appendChild(c);d.appendChild(h);var g=document.createElement("input");
this.dom.search=g;g.oninput=function(c){b._onDelayedSearch(c)};g.onchange=function(c){b._onSearch(c)};g.onkeydown=function(c){b._onKeyDown(c)};g.onkeyup=function(c){b._onKeyUp(c)};c.onclick=function(b){g.select()};h=document.createElement("td");h.appendChild(g);d.appendChild(h);c=document.createElement("button");c.title="Next result (Enter)";c.className="next";c.onclick=function(){b.next()};h=document.createElement("td");h.appendChild(c);d.appendChild(h);c=document.createElement("button");c.title=
"Previous result (Shift+Enter)";c.className="previous";c.onclick=function(){b.previous()};h=document.createElement("td");h.appendChild(c);d.appendChild(h)}k.prototype.next=function(h){if(void 0!=this.results){var d=void 0!=this.resultIndex?this.resultIndex+1:0;d>this.results.length-1&&(d=0);this._setActiveResult(d,h)}};k.prototype.previous=function(h){if(void 0!=this.results){var d=this.results.length-1,b=void 0!=this.resultIndex?this.resultIndex-1:d;0>b&&(b=d);this._setActiveResult(b,h)}};k.prototype._setActiveResult=
function(h,d){if(this.activeResult){var b=this.activeResult.node;"field"==this.activeResult.elem?delete b.searchFieldActive:delete b.searchValueActive;b.updateDom()}if(this.results&&this.results[h]){this.resultIndex=h;var c=this.results[this.resultIndex].node,g=this.results[this.resultIndex].elem;"field"==g?c.searchFieldActive=!0:c.searchValueActive=!0;this.activeResult=this.results[this.resultIndex];c.updateDom();c.scrollTo(function(){d&&c.focus(g)})}else this.activeResult=this.resultIndex=void 0};
k.prototype._clearDelay=function(){void 0!=this.timeout&&(clearTimeout(this.timeout),delete this.timeout)};k.prototype._onDelayedSearch=function(h){this._clearDelay();var d=this;this.timeout=setTimeout(function(b){d._onSearch(b)},this.delay)};k.prototype._onSearch=function(h,d){this._clearDelay();h=this.dom.search.value;h=0<h.length?h:void 0;if(h!=this.lastText||d)if(this.lastText=h,this.results=this.editor.search(h),this._setActiveResult(void 0),void 0!=h)switch(d=this.results.length,d){case 0:this.dom.results.innerHTML=
"no\x26nbsp;results";break;case 1:this.dom.results.innerHTML="1\x26nbsp;result";break;default:this.dom.results.innerHTML=d+"\x26nbsp;results"}else this.dom.results.innerHTML=""};k.prototype._onKeyDown=function(h){var d=h.which;27==d?(this.dom.search.value="",this._onSearch(h),h.preventDefault(),h.stopPropagation()):13==d&&(h.ctrlKey?this._onSearch(h,!0):h.shiftKey?this.previous():this.next(),h.preventDefault(),h.stopPropagation())};k.prototype._onKeyUp=function(h){var d=h.keyCode;27!=d&&13!=d&&this._onDelayedSearch(h)};
return k})},"xide/utils/HTMLUtils":function(){define("xide/utils xide/types dcl/dcl xdojo/declare dojo/dom-construct dojo/has dojo/dom-class dojo/_base/window xide/lodash xide/$".split(" "),function(n,m,k,h,d,b,c,g,p,a){n.getDoc=function(){return g.doc};n.empty=function(a){if(a.getChildren&&a.removeChild){var b=a.getChildren();p.each(b,function(b){a.removeChild(b)})}(b=a.containerNode||a.domNode||p.isElement(a)?a:null)&&d.empty(b)};n.findEmptyNode=function(a,b){if(!a||null==a.children||null==a.children.length)return null;
var e=a.children;null!==b&&(e=n.find(b,a,!1));for(var c in e)if(a=e[c],""===a.innerHTML)return a;return null};n.create=function(b,c,d){var e=g.doc;d&&(e=d.ownerDocument);"string"==typeof b&&(b=e.createElement(b));c&&a(b).attr(c);d&&a(d).append(b);return b};n.isDescendant=function(a,b){for(b=b.parentNode;null!==b;){if(b==a)return!0;b=b.parentNode}return!1};n.find=function(b,c){return a(b,c)[0]};n.hasChild=function(a,b){if(a||!b&&b.getChildren)return p.find(b.getChildren(),{title:a})};n.createInstanceSync=
function(a,b,c,d,r){if(d||r)d=d||[],r&&d.push(h(a,r));d&&(d=p.isArray(d)?d:[d],d.push(a),d.reverse(),a=a.extend?h(d,{}):k(d,{}));return new a(b||{},c||g.doc.createElement("div"))};n.addWidget=function(a,b,u,h,r,v,k,A,z){var e={delegate:u};b=b||{};n.mixin(e,b);if(p.isString(a)){var q=n.getObject(a);q&&(a=q)}h=p.isString(h)?d.create(h):null==h?g.doc.createElement("div"):h;q=b.attachDirect?b.attachDirect:a&&a.prototype?a.prototype.attachDirect:!1;e._parent=h;var w=n.getNode(h);h&&h.finishLoading&&h.finishLoading();
if(e.attachChild&&h.addChild)return delete e.attachChild,h.addChild(a,e,r);if(h.addWidget&&!0!==e.ignoreAddChild)return h.addWidget(a,b,u,h,r,v,k,A,z);e=n.createInstanceSync(a,e,q?w:null,k,z);if(!e)return console.error("widget creation failed! ",arguments),null;if(h)q?r&&e.startup():n.addChild(h,e,r,A);else return e;v&&c.add(e.domNode,v);if(h.resize||h.startup)e._parent=h;e.utils=n;e.types=m;return e};n.addChild=function(a,b,c,g){if(a&&b)try{var e="function"===typeof a.addChild,d=e?a:n.getNode(a),
q=e?b:b.domNode||b;if(d&&q)if(a.addChild){b=-1;a.getChildren&&(b=a.getChildren().length);try{a.addChild(q,b,null!==g?g:c)}catch(A){logError(A,"add child failed for some reason!"+A)}}else q.nodeType?(d.appendChild(q),!0===c&&b.startup&&b.startup()):logError("child is not html")}catch(A){logError(A,"addWidget : crashed : ")}else console.error("error! parent or child is invalid!")};n.templatify=function(a,b,c,g,d,p){var e=a||"xide/widgets/TemplatedWidgetBase",q=null,q=d?h([a].concat(d)):n.getObject(e);
if(!q)return null;a={templateString:b};n.mixin(a,g);g=new q(a,dojo.doc.createElement("div"));n.addChild(c,g,p);return g};n._clearProperty=function(a,b){var c=null;b&&(c=n.getObjectKeyByValue(b,a));c&&(b[c]=null)};n._destroyWidget=function(b,c,g){try{if(p.isString(b)&&(b=a(b)[0]),b)if(b.parentContainer&&b.parentContainer.removeChild&&b.domNode){if(b.destroy&&!1!==c)try{b.destroy()}catch(w){console.error("error destroying view")}b.parentContainer.removeChild(b);g&&n._clearProperty(b,g)}else b.destroyRecursive&&
b.destroyRecursive(),b.destroy&&!0!==b._destroyed&&b.destroy(),b._destroyed=!0,b.domNode||b.domNode?b.domNode&&d.destroy(b.domNode):b.ownerDocument&&d.destroy(b),n._clearProperty(b,g)}catch(w){logError(w,"error in destroying widget "+w)}};n.destroy=function(a,b,c){if(a)if(p.isArray(a))for(var e=0;e<a.length;e++){var g=a[e],d=null;c&&(d=n.getObjectKeyByValue(c,g));n._destroyWidget(g,b);d&&(c[d]=null)}else n._destroyWidget(a,b,c)};n.getNode=function(a){return a?a.containerNode||a.domNode||a:a};n.getHeight=
function(b){p.isArray(b)||(b=[b]);var c=0;p.each(b,function(b){c+=a(n.getNode(b)).outerHeight()});return c};n.resizeTo=function(b,c,g,d,r,p){c=n.getNode(c);b=n.getNode(b);!0===g&&(g=a(c).height(),p&&null!==p.h&&(g+=p.h),a(b).css("height",g+"px"+(!0===r?"!important":"")));!0===d&&(c=a(c).width(),a(b).css("width",c+"px"+(!0===r?"!important":"")))};return n})},"davinci/html/ui/HTMLOutline":function(){define(["dojo/_base/declare","davinci/html/ui/HTMLOutlineModel"],function(n,m){return n("davinci/html/ui/HTMLOutline",
null,{constructor:function(k){this._htmlModel=k},getModel:function(){return this._model=new m(this._htmlModel)}})})},"nxapp/protocols/ProtocolBase":function(){define("dcl/dcl xide/model/Base xide/types xide/utils nxapp/utils/_LogMixin xide/mixins/ReloadMixin dojo/Deferred".split(" "),function(n,m,k,h,d,b,c){m=n([m.dcl,d,b.dcl],{onReloaded:function(){console.error("on reloaded")},options:null,declaredClass:"nxapp.protocols.ProtocolBase",protocolName:"undefined",debug_connection:"protocol_connection",
debug_messages:"protocol_messages",getModule:function(b){var g=new c;try{require(["dojo/node!"+b],function(a){g.resolve(a)})}catch(a){g.reject(a)}return g},delegate:null,connection:null,_setupEventListeners:function(b,c){var a=this,e=a.connection;b.handle=function(a){c.onHandle(e,a)};b.on("data",function(a){c.onData(e,a.toString(),a);for(var b=0;b<a.length;b++);});c||(console.error("have no handler"),h.stack());e||(console.error("have no connection"),h.stack());b.on("error",function(b){a.isDebug()&&
console.error("socket error : ",b);c.onError(e,b)});b.on("drain",function(){c.onDrain(e)});b.on("timeout",function(){c.onTimeout(e)});b.on("close",function(a){c.onClose(e,a)})},isDebug:function(){var b=this.connection;return b&&(b=b.options)&&(b=b.driverOptions)&&b&1<<k.DRIVER_FLAGS.DEBUG?!0:!1},isServer:function(){var b=this.connection;return b&&(b=b.options)&&(b=b.driverOptions)&&b&1<<k.DRIVER_FLAGS.SERVER?!0:!1},runAsServer:function(){var b=this.connection;return b&&(b=b.options)&&(b=b.driverOptions)&&
b&1<<k.DRIVER_FLAGS.RUNS_ON_SERVER?!0:!1},_defaultOptions:function(){return{port:23,text_encoding:"utf8",end_of_command:"\r"}},toString:function(b,c){b=h.bufferFromDecString(b);return(new Buffer(b)).toString(c)},init:function(){this.initLogger(this.options.debug);this.initReload();var b=this;this.subscribe(k.EVENTS.ON_MODULE_RELOADED,function(c){b.modulePath&&c.module&&b.modulePath===c.module&&(b.mergeFunctions(b,c.newModule.prototype),b.onReloaded())})},mergeFunctions:function(b,c){for(var a in c)"constructor"!==
a&&"inherited"!==a&&_.isFunction(c[a])&&(b[a]=null,b[a]=c[a])},logConnection:function(b){this.log(b,this.debug_connection)},logMessages:function(b){this.log(b,this.debug_messages)},send:function(b){},onConnect:function(){},destroy:function(){}});n.chainAfter(m,"onConnect");n.chainAfter(m,"init");n.chainAfter(m,"close");n.chainAfter(m,"destroy");return m})},"xaction/DefaultActions":function(){define("dcl/dcl dcl/inherited xdojo/declare xide/types xide/utils xlang/i18".split(" "),function(n,m,k,h,d,
b){function c(a,b){return _.contains(a,b)}function g(a,b,c){var e=null;this.onAfterAction&&(e=this.onAfterAction(c,a,b));this._emit&&this._emit("onAfterAction",{action:c,result:a,source:this,afterAction:e})}function p(a,b){var c,e=this;e&&e.onBeforeAction&&e.onBeforeAction(a);e.runAction?c=e.runAction.apply(e,[a,null,b]):a.handler&&(c=a.handler.apply(e,[a,null,b]));c&&c.then?c.then(function(c){g.apply(e,[c,b,a])}):g.apply(e,[c,b,a]);return c}var a=k("xaction/DefaultActions",null,{});a.createActionParameters=
function(a,b,c,e,g,d,p,h,k,m,n){return{title:a,command:b,group:c,icon:e,handler:g,accelKey:d,keyCombo:p,keyProfile:h,keyTarget:k,keyScope:m,mixin:n}};var e=function(b,c,e,g,p,h,k,z,m,n,C,E,F){g&&_.isString(g)&&(g=[g]);n=d.mixin({filterGroup:k||"item|view",tab:p||"File",onCreate:z||function(a){},shouldShow:C||function(){return!0},shouldDisable:E||function(){return!1}},n);b=a.createActionParameters(b,c,h||"File",e,m||null,"",g,null,F,null,n);d.mixin(b,n);return b};a.createAction=e;a.hasAction=c;a.getDefaultActions=
function(a,b,g){function q(a,c,e){return(a=a||b?b.getSelection():[])&&a.length?!1:!0}function u(a,c,e){return q.apply(this,arguments)?!0:(a=a||b?b.getSelection():[])&&!0===a[0].isDir?!0:!1}function w(q,r,h,u,v,w,k,x,A,m,n,y){var C=null;m=m||{};d.mixin(m,{owner:g||b});if(m.addPermission||c(a,r))if(A=A||p,C=e(q,r,h,u,v,w,k,x,A,m,n,y,b.domNode))g&&g.addAction&&g.addAction(null,C),z.push(C)}var k=h.ACTION_VISIBILITY,z=[],m=h.ACTION,n=h.ACTION_ICON,C=g||b;c(a,m.CLIPBOARD)&&b.getClipboardActions&&(z.push(C.createAction({label:"Clipboard",
command:"Edit/Clipboard",icon:"fa-clipboard",tab:"Edit",group:"Clipboard",mixin:{addPermission:!0,dynamic:!0,quick:!0},onCreate:function(a){a.setVisibility(k.RIBBON,{expand:!0,tab:"File"})}})),z=z.concat(b.getClipboardActions(w)));z.push(C.createAction({label:"Show",command:"View/Show",icon:"fa-eye",tab:"View",group:"Show",mixin:{addPermission:!0,dynamic:!0},onCreate:function(a){a.setVisibility(k.RIBBON,{expand:!0})}}));c(a,m.LAYOUT)&&b.getRendererActions&&(z=z.concat(b.getRendererActions()));c(a,
m.COLUMNS)&&b.getColumnHiderActions&&(z=z.concat(b.getColumnHiderActions(a)));z.push(C.createAction({label:"Edit",command:"File/Edit",icon:n.EDIT,tab:"Home",group:"Open",keycombo:["f4","enter","dblclick"],mixin:{quick:!0},shouldDisable:u}));z.push(C.createAction({label:"Delete",command:"File/Delete",icon:n.DELETE,tab:"Home",group:"Organize",keycombo:["f8","delete"],mixin:{quick:!0},shouldDisable:q}));w("Rename","File/Rename","fa-edit",["f2"],"Home","Organize","item",null,null,null,null,q);z.push(C.createAction({label:"Reload",
command:"File/Reload",icon:n.RELOAD,tab:"Home",group:"File",keycombo:["ctrl l"],mixin:{quick:!0}}));w("Create archive","File/Compress",n.COMPRESS,["ctrl z"],"Home","Organize","item|view",null,null,null,null,q);w("Extract","File/Extract",n.EXTRACT,["ctrl e"],"Home","File","item|view",null,null,null,null,function(){return!0});z.push(C.createAction({label:"Download",command:"File/Download",icon:n.DOWNLOAD,tab:"Home",group:"File",keycombo:["ctrl down"],mixin:{quick:!0}}));(c(a,m.NEW_DIRECTORY)||c(a,m.NEW_FILE))&&
w("New","File/New","fa-magic",null,"Home","New","item|view",null,null,{},null,null);w("New Folder",m.NEW_DIRECTORY,"fa-folder",["f7"],"Home","New","item|view",null,null,{quick:!0},null,null);w("New File",m.NEW_FILE,"el-icon-file",["ctrl f4"],"Home","New","item|view",null,null,{quick:!0},null,null);c(a,m.PREVIEW)&&z.push(C.createAction({label:"Preview",command:"File/Preview",icon:"fa-eye",tab:"Home",group:"Open",keycombo:["f3"],mixin:{quick:!0},shouldDisable:u}));c(a,m.SELECTION)&&(z.push(e("Select",
"File/Select","fa-hand-o-up",null,"Home","Select","item|view",function(a){a.setVisibility(k.RIBBON,{expand:!0})},null,null,null,null,b.domNode)),m={owner:g||b},n=b.domNode,z.push(e("Select all","File/Select/All","fa-th",["ctrl a"],"Home","Select","item|view",null,function(){b.selectAll()},m,null,null,n)),z.push(e("Select none","File/Select/None","fa-square-o","ctrl d","Home","Select","item|view",null,function(){b.deselectAll()},m,null,null,n)),z.push(e("Invert selection","File/Select/Invert","fa-square",
["ctrl i"],"Home","Select","item|view",null,function(){b.invertSelection()},m,null,null,n)));return z};a.defaultHandler=p;return a})},"davinci/html/CSSAtRule":function(){define(["dojo/_base/declare","davinci/html/CSSElement"],function(n,m){return n("davinci.html.CSSAtRule",m,{constructor:function(){this.elementType="CSSAtRule"},getCSSFile:function(){return this.parent},getText:function(k){s="@";return s=s+this.name+" "+this.value+"\n"}})})},"dijit/layout/_LayoutWidget":function(){define("dojo/_base/lang ../_Widget ../_Container ../_Contained ../Viewport dojo/_base/declare dojo/dom-class dojo/dom-geometry dojo/dom-style".split(" "),
function(n,m,k,h,d,b,c,g,p){return b("dijit.layout._LayoutWidget",[m,k,h],{baseClass:"dijitLayoutContainer",isLayoutContainer:!0,_setTitleAttr:null,buildRendering:function(){this.inherited(arguments);c.add(this.domNode,"dijitContainer")},startup:function(){if(!this._started){this.inherited(arguments);var a=this.getParent&&this.getParent();a&&a.isLayoutContainer||(this.resize(),this.own(d.on("resize",n.hitch(this,"resize"))))}},resize:function(a,b){var c=this.domNode;a&&g.setMarginBox(c,a);b=b||{};
n.mixin(b,a||{});"h"in b&&"w"in b||(b=n.mixin(g.getMarginBox(c),b));a=p.getComputedStyle(c);var e=g.getMarginExtents(c,a),d=g.getBorderExtents(c,a);b=this._borderBox={w:b.w-(e.w+d.w),h:b.h-(e.h+d.h)};e=g.getPadExtents(c,a);this._contentBox={l:p.toPixelValue(c,a.paddingLeft),t:p.toPixelValue(c,a.paddingTop),w:b.w-e.w,h:b.h-e.h};this.layout()},layout:function(){},_setupChild:function(a){c.add(a.domNode,this.baseClass+"-child "+(a.baseClass?this.baseClass+"-"+a.baseClass:""))},addChild:function(a,b){this.inherited(arguments);
this._started&&this._setupChild(a)},removeChild:function(a){c.remove(a.domNode,this.baseClass+"-child"+(a.baseClass?" "+this.baseClass+"-"+a.baseClass:""));this.inherited(arguments)}})})},"xdocker/Docker2":function(){define("dcl/dcl xide/types xide/utils wcDocker/docker xdocker/Panel2 xdocker/Frame2 xdocker/Splitter2 xide/mixins/EventedMixin xide/registry wcDocker/types wcDocker/base xaction/ActionProvider xide/widgets/_Widget xide/widgets/ContextMenu require".split(" "),function(n,m,k,h,d,b,c,g,
p,a,e,q,u,w,r){var v=n([h,e,q.dcl,u.dcl,g.dcl],{isResizing:!1,_last:null,_lastResize:null,_needResize:!1,_lastResizeTimer:null,_declaredClass:"xdocker.Docker2",__eventHandles:[],contextMenu:null,contextMenuEventTarget:null,contextMenuPanelId:null,setupActions:function(a){this.__on(this._root.$container,"contextmenu",".wcPanelTab",function(a){b.contextMenuEventTarget=a.target;b.contextMenuPanelId=a.target.parentNode?a.target.parentNode.id:null});var b=this,c={addPermission:!0},e={group:"Misc",tab:"View",
mixin:a||c};a=function(a,c,g){return b.createAction(_.extend({label:a,command:c,icon:g},e))};a=this.addActions([a("Close","View/Close","fa-close"),a("Close others","View/Close Others","fa-close"),a("Close all in group","View/Close all group","fa-close"),a("Split Horizontal","View/Split Horizontal","fa-columns"),a("Split Vertical","View/Split Vertical","fa-columns")]);c=this._root.$container[0];c=new w({owner:this,delegate:this,limitTo:"wcPanelTab",openTarget:c},c);c.init({preventDoubleContext:!1});
c.setActionEmitter(this,m.EVENTS.ON_VIEW_SHOW,this);this.contextMenu=c;this.add(c,null,!1);return a},runAction:function(a,b,c){function e(a){var b=d.next(-1)||d.next(1);b&&d!=b&&(q.movePanel(b,a==g.ORIENTATION.HORIZONTAL?g.DOCK.BOTTOM:g.DOCK.RIGHT,d,a),(a=b.getSplitter())&&a.pos(.5))}var g=m.DOCKER,d=this.contextMenuEventTarget?this.__panel(this.contextMenuEventTarget):null,q=this;c=(b=d?d.getFrame():null)?b.panels():null;"View/Close"===a.command&&d&&this.removePanel(d);if("View/Close all group"===
a.command&&d&&b){var r=[];_.each(c,function(a){a&&a._moveable&&a._closeable&&r.push(a)});_.each(r,function(a){q.removePanel(a)})}"View/Close Others"===a.command&&d&&(b&&_.each(c,function(a){a&&a!=d&&a._moveable&&a._closeable&&q.removePanel(a)}),d.select());"View/Split Horizontal"===a.command&&d&&e(g.ORIENTATION.HORIZONTAL);"View/Split Vertical"===a.command&&d&&e(g.ORIENTATION.VERTICAL)},__panel:function(a){this.getPanels();var b=null;_.each(this._frameList,function(c){$.contains(c.$container[0],a)&&
(b=c)});var c=this.contextMenuPanelId;this.contextMenuPanelId=this.contextMenuEventTarget=null;if(b&&null!==c&&(c=b.panel(c)))return c},allPanels:function(){var a=[];_.each(this._frameList,function(b){_.each(b._panelList,function(b){a.push(b)})});return a},destroy:function(){p.remove(this.id);this.__destroy()},__on:function(a,b,c,e){"function"!=typeof c||e||(e=c,c=null);a.on(b,c,e);this.__eventHandles.push({element:a,type:b,selector:c,handler:e})},__destroy:function(){var a=this;_.each(a.__eventHandles,
function(b){b&&b.element&&b.element.off(b.type,b.selector,b.handler);a.__eventHandles.remove(b)});_.each(a._events,function(b,c){_.each(b,function(b){a.off(c,b)})});a.clear();delete a._events;delete a.__eventHandles;a._updateId&&clearTimeout(a._updateId)},resize:function(a,b,c){if("deselected"!==c){var e=this;return this.debounce("resize",function(){if(e.$container){var a=e.$container.height(),b=e.$container.width();if(110>a||110>b)return}e._dirty=!0;e._root&&e._root.__update(!0);_.invoke(e._floatingList,
"__update")}.bind(this),100,null)}},getPanels:function(){var a=[];_.each(this._frameList,function(b){_.each(b._panelList,function(b){a.push(b)})});return a},getDefaultPanel:function(){return _.find(this.getPanels(),{isDefault:!0})},addTab:function(a,b){var c=null,e=this;b=b||{};a=a||"DefaultTab";(function(a){"tabOrientation"in a||(a.tabOrientation=m.DOCKER.TAB.TOP);"location"in a||(a.location=m.DOCKER.DOCK.STACKED);"target"in a||(a.target=e.getDefaultPanel());"select"in a||(a.select=!0);"title"in
a||(a.title=" ")})(b);_.isString(a)?c=this.addPanel(a,b.location,b.target,b):_.isObject(a)&&(c=a);(function(a,b){for(var c in b)if(_.isFunction(a[c]))a[c](b[c])})(c,b);!0===b.select&&c.select();return c}});v.defaultPaneType=function(a,b,c,e,g,d,q){return{isPrivate:null!==q?q:!1,faicon:b,closeable:c,title:a,moveable:g,onCreate:function(a,b){function q(a,b,c){var e=0,g=a.resizeToChildren;a.onResize&&a.onResize();if(g){var g=k.getHeight(a._findWidgets()),d=a._parent.$container;(e=d.outerHeight()-d.height())&&
(g+=e);b.css("width",a._actualSize.x+"px");a.set("height",g)}else b.css("height",a._actualSize.y+"px"),b.css("width",a._actualSize.x+"px"),_.each(a.containerNode.children,function(b){if(b.id){var g=p.byId(b.id),d=!0;g&&!1===g.resizeToParent&&(d=!1);d&&($(b).css("height",a._actualSize.y-e+"px"),$(b).css("width",a._actualSize.x+"px"));g&&g.resize&&g.resize(null,null,c)}})}function r(b,c){if(a.selected&&b)return!0;(a.selected=b)&&(u._lastSelected=a);q(a,v,b?"selected":"deselected");var e=b?"onShow":
"onHide";a[e]&&a[e]();_.each(a._findWidgets(),function(a){if(a){b&&(a._started||a.startup&&a.startup());if(a[e])a[e]();a._emit&&a._emit(b?m.EVENTS.ON_VIEW_SHOW:m.EVENTS.ON_VIEW_HIDE,a);a.setFocused&&a.setFocused(b)}})}var u=a.docker();k.mixin(a._options,b);a.on(h.EVENT.ATTACHED,function(){u._emit(h.EVENT.ATTACHED,a)});a.on(h.EVENT.DETACHED,function(){u._emit(h.EVENT.DETACHED,a)});a.on(h.EVENT.CLOSED,function(){u._emit(h.EVENT.CLOSED,a)});null!==c&&a.closeable(c);null!==e&&a.collapsible&&a.collapsible(e);
null!==g&&a.moveable(g);b&&(a.title(b.title),b.closeable&&a.closeable(b.closeable));var v=$('\x3cdiv style\x3d"height: 100%;width: 100%;overflow: hidden;" class\x3d"panelParent"/\x3e');a.layout().addItem(v).stretch("100%","100%");a.containerNode=v[0];k.mixin(a,b.mixin);a.on(m.DOCKER.EVENT.VISIBILITY_CHANGED,function(b){!0!==a.silent&&r(b,"vis changed")});a._on(m.DOCKER.EVENT.SELECT,function(b){!0!==a.silent&&r(!0,"select")});a._on(m.DOCKER.EVENT.MOVE_STARTED,function(){u.trigger(m.DOCKER.EVENT.MOVE_STARTED,
a)});a._on(m.DOCKER.EVENT.MOVE_ENDED,function(){u.trigger(m.DOCKER.EVENT.MOVE_ENDED,a)});a.on(m.DOCKER.EVENT.SAVE_LAYOUT,function(b){a.onSaveLayout({data:b,panel:a});b.widgets||(b.widgets=[]);_.each(a._findWidgets(),function(c){c&&(c._emit&&c._emit(m.EVENTS.SAVE_LAYOUT,{panel:a,data:b}),c.onSaveLayout&&c.onSaveLayout({data:b,owner:a}))})});a.on(m.DOCKER.EVENT.RESTORE_LAYOUT,function(b){a.onRestoreLayout({data:b,panel:a})});a.on(m.DOCKER.EVENT.RESIZE_STARTED,function(){a.onResizeBegin(arguments);u.trigger(m.DOCKER.EVENT.BEGIN_RESIZE,
a)});a.on(m.DOCKER.EVENT.RESIZE_ENDED,function(){a.onResizeEnd(arguments);q(a,v);u.trigger(m.DOCKER.EVENT.END_RESIZE,a)});a.on(m.DOCKER.EVENT.RESIZED,function(){q(a,v)});k.mixin(a,b.mixin);d&&d(a)}}};v.registerDefaultTypes=function(a){a.registerPanelType("DefaultFixed",v.defaultPaneType("","",!1,!1,!0,null,!0));a.registerPanelType("DefaultTab",v.defaultPaneType("","",!0,!1,!0,null,!0));a.registerPanelType("Collapsible",v.defaultPaneType("","",!1,!0,!0,null,!0))};v.createDefault=function(a,e){function g(a){var b=
$("#xIFrames");b.css("display",a?"none":"block");b.children().css("display",a?"none":"block")}r({cacheBust:null});e=e||{};var q=v;e.extension&&(q=n([v,e.extension],{}));a=new q($(a),k.mixin({allowCollapse:!0,responseRate:100,allowContextMenu:!1,themePath:r.toUrl("xdocker")+"/Themes/",theme:"transparent2",wcPanelClass:d,wcFrameClass:b,wcSplitterClass:c},e||{}));v.registerDefaultTypes(a);a.on(h.EVENT.BEGIN_DOCK,_.partial(g,!0));a.on(h.EVENT.END_DOCK,_.partial(g,!1));a.on(h.EVENT.RESIZE_STARTED,_.partial(g,
!0));a.on(h.EVENT.RESIZED,_.partial(g,!1));a.id||(a.id=p.getUniqueId(a._declaredClass.replace(/\./g,"_")),a.$container.attr("id",a.id));p.add(a);return a};v.DOCK=h.DOCK;v.EVENT=h.EVENT;v.LAYOUT=h.LAYOUT;v.ORIENTATION=h.ORIENTATION;return v})},"davinci/html/CSSParser":function(){define("dojo/_base/declare davinci/html/CSSSelector davinci/html/CSSCombinedSelector davinci/html/CSSRule davinci/html/CSSProperty davinci/html/CSSAtRule davinci/html/CSSImport davinci/model/parser/Tokenizer davinci/model/Comment".split(" "),
function(n,m,k,h,d,b,c,g,p){var a=null,e=function(){function a(a,b,c){return function(e){return!a||/^\}/.test(e)?c:b?c+2*indentUnit:c+indentUnit}}var b=function(){function a(a,g){var d=a.next();if("@"==d)return a.nextWhileMatches(/[a-zA-Z0-9_-]/),"css-at";if("/"==d&&a.equals("*"))return g(b),null;if("\x3c"==d&&a.equals("!"))return g(c),null;if("\x3d"==d)return"css-compare";if(!a.equals("\x3d")||"~"!=d&&"|"!=d){if('"'==d||"'"==d)return g(e(d)),null;if("#"==d)return a.nextWhileMatches(/[\w-]/),"css-hash";
if("!"==d)return a.nextWhileMatches(/[ \t]/),a.nextWhileMatches(/\w/),"css-important";if(/\d/.test(d))return a.nextWhileMatches(/[\w.%]/),"css-unit";if(/[,.+>*\/]/.test(d))return"css-select-op";if(/[;{}:\[\]]/.test(d))return"css-punctuation";a.nextWhileMatches(/[\w\\\-_]/);return"css-identifier"}a.next();return"css-compare"}function b(b,c){for(var e=!1;!b.endOfLine();){var g=b.next();if(e&&"/"==g){c(a);break}e="*"==g}return"css-comment"}function c(b,c){for(var e=0;!b.endOfLine();){var g=b.next();
if(2<=e&&"\x3e"==g){c(a);break}e="-"==g?e+1:0}return"css-comment"}function e(b){return function(c,e){for(var g=!1;!c.endOfLine();){var d=c.next();if(d==b&&!g)break;g=!g&&"\\"==d}g||e(a);return"css-string"}}return function(b,c){return g.tokenizer(b,c||a)}}();return{make:function(c,e){e=e||0;var g=b(c),d=!1,q=!1,r=!1,p={next:function(){var b=g.next(),c=b.style,p=b.content;"css-hash"==c&&(c=b.style=q?"css-colorcode":"css-identifier");"css-identifier"==c&&(q?b.style="css-value":d||r||(b.style="css-selector"));
"\n"==p&&(b.indentation=a(d,q,e));"{"==p&&"@media"==r?r=!1:"{"==p?d=!0:"}"==p?d=q=r=!1:";"==p?q=r=!1:d&&"css-comment"!=c&&"whitespace"!=c?q=!0:d||"css-at"!=c||(r=p);return b},copy:function(){var a=d,c=q,e=g.state;return function(r){g=b(r,e);d=a;q=c;return p}}};return p},electricChars:"}"}}();e.parse=function(q,u){function w(){var b;n=z.next();for(var c=!1;"css-comment"==n.style||"whitespace"==n.style;){if("css-comment"==n.style||c)a||(a=new p),b=n.content,0===n.content.indexOf("/*")&&(b=b.substring(2),
c=!0,a.addComment("block",void 0,void 0,"")),-1<b.lastIndexOf("*/")&&b.lastIndexOf("*/")==b.length-2&&(b=b.substring(0,b.length-2),c=!1),a.appendComment(b);n=z.next()}return n}function r(){B=new m;B.startOffset=n.offset;B.parent=D;C?(C.selectors.push(B),B.parent=C):D.selectors.push(B)}function v(){var a=B;a.endOffset=n.offset-1;C||(C=new k,C.parent=D,C.selectors.push(a),B.startOffset=a.startOffset,D.selectors[D.selectors.length-1]=C);r();C.combiners.push(E);E=" "}var x,A;"string"==typeof q?x=g.stringStream({next:function(){if(1==
++this.count)return q;throw StopIteration;},count:0,text:q}):(x=q,A=!0);var z=e.make(x),n,B,C,E=" ",F=[],G=[],D,H;try{do switch(w(),n.style){case "css-selector":case "css-select-op":if(A&&"\x3c"==n.content)throw x.push("\x3c"),StopIteration;D=new h;G.push(D);D.startOffset=n.offset;u&&u.addChild(D,void 0,!0);H=!1;C=void 0;E=" ";r();a:for(;;){switch(n.style){case "css-select-op":switch(n.content){case ",":C=void 0;r();break;case ".":H&&v();w();B.cls=B.cls?B.cls+"."+n.content:n.content;H=n.value.length>
n.content.length;break;case "*":(B.element||B.cls)&&v();B.element="*";break;case "+":case "\x3e":E=n.content,v()}break;case "css-selector":"css-identifier"==n.type?((B.element||B.cls||H)&&v(),B.element=n.content):"css-hash"==n.type&&((B.id||H)&&v(),B.id=n.content.substring(1));H=n.value.length>n.content.length;break;case "css-punctuation":if("{"==n.content)break a;else":"==n.content?(w(),":"==n.content?(w(),B.pseudoElement=n.content):(B.pseudoRule=n.content,H=!0)):"["==n.content&&(w(),B.attribute=
{name:n.content},w(),"\x3d"===n.content||"~\x3d"===n.content||"|\x3d"===n.content)&&(B.attribute.type=n.content,w(),B.attribute.value=n.content.substring(1,n.content.length-1),w())}w()}a&&(D.comment=a,a=null);for(B.endOffset=n.offset-1;"}"!=w().content;){var J=n.offset,Q=n.content,N=!1;"css-hash"==n.type?(w(),"css-identifier"==n.type?Q+=n.content:N=!0):"css-identifier"!=n.type&&("*"!=n.content?F.push("expecting identifier around "+B.getText()+"{ "+O.name+": "+propery.value):(w(),Q+=n.content));var O=
new d;O.startOffset=J;O.parent=D;a&&(O.comment=a,a=null);D.properties.push(O);D.addChild(O,void 0,!0);O.name=Q;N||":"!=w().content&&F.push("expecting ':' "+B.getText()+"{ "+O.name+": "+propery.value);w();O.value=n.value;if("url"==O.value){for(;")"!=w().content;)O.value+=n.value;O.value+=n.value}for(;";"!=w().content&&"}"!=n.content;)O.value+=n.value;a&&(O.postComment=a,a=null);O.endOffset=n.offset-1;if("}"==n.content)break}a&&(O.postComment=a,a=null);D.endOffset=n.offset;break;case "css-at":var P=
n.content.substring(1),L="import"==P?new c:new b;L.startOffset=n.offset;u&&u.addChild(L,void 0,!0);if("import"==P)N=L,w(),"url"==n.content&&(N.isURL=!0,w(),w()),N.url=n.content.substring(1,n.content.length-1),N.isURL&&w(),w();else if(0<=P.indexOf("keyframes")){var K=N="",M=!1,U="\t\t";w();N=n.content;"."==N&&(w(),N+=n.content);w();L.value=n.content+"\n";w();if(0<=n.content.indexOf("from")||0<=n.content.indexOf("to")||0<=n.content.indexOf("%"))a:for(;;){L.value+="\t"+n.content+" ";w();for(L.value+=
n.content+"\n";"}"!=w().content;){M&&(U="\t\t",M=!1);if(";"==n.content)K="\n",M=!0;else if(":"==n.content||")"==n.content)K=" ";L.value+=U+n.content+K;U=K=""}L.value+="\t"+n.content+"\n";w();if("}"==n.content)break a}else F.push("inside keyframes decl expecting from/to blocks or nn% blocks");L.value+=n.content;L.name=P+" "+N}else for(L.name=P,L.value="";";"!=w().content;)L.value+=n.content;L.endOffset=n.offset}while(1)}catch(V){a&&D&&(D.postComment=a,a=null)}return{errors:F,model:G}};return e})},
"xide/views/WelcomeGrid":function(){define("dcl/dcl xdojo/declare xide/types xide/utils xgrid/TreeRenderer dstore/Trackable xide/data/ObservableStore xgrid/Grid xgrid/MultiRenderer xaction/DefaultActions dojo/dom-construct xgrid/ThumbRenderer module xgrid/Selection xide/widgets/_Widget xide/data/TreeMemory dojo/Deferred xgrid/KeyboardNavigation xide/data/Model xide/data/Reference xide/data/ReferenceMapping xide/mixins/EventedMixin xide/lodash xide/$ xdojo/has!debug?xide/tests/TestUtils".split(" "),
function(n,m,k,h,d,b,c,g,p,a,e,q,u,w,r,v,x,A,z,y,B,C,E,F,G){u=m("xfile.ThumbRenderer2",[q],{thumbSize:"400",resizeThumb:!0,__type:"thumb",deactivateRenderer:function(){F(this.domNode.parentNode).removeClass("metro");F(this.domNode).css("padding","");this.isThumbGrid=!1},activateRenderer:function(){F(this.contentNode).css("padding","8px");this.isThumbGrid=!0;this.refresh()},renderRow:function(a){var b=e.create("div",{className:"tile widget",style:"max-width:200px;float:left;width:120px;height:80px;"});
b.innerHTML='\x3cdiv title\x3d"'+a.label+'" class\x3d"tile-content icon"\x3e'+('\x3cspan style\x3d"text-shadow: 2px 2px 5px rgba(0,0,0,0.3);font-size: 36px;opacity: 0.7" class\x3d"fa fa-4x '+(a.icon||"fa fa-folder fa-4x")+'"\x3e\x3c/span\x3e')+'\x3c/div\x3e\x3cdiv class\x3d"brand opacity"\x3e\x3cspan class\x3d"thumbText text opacity ellipsis" style\x3d"text-align:center"\x3e'+a.label+"\x3c/span\x3e\x3c/div\x3e";return b}});q=m("xfile.GroupRenderer",d,{itemClass:u,groupClass:d,renderRow:function(a){return(a.group?
this.groupClass:this.itemClass).prototype.renderRow.apply(this,arguments)}});d=[q,u,d];p=m.classFactory("xgrid/MultiRendererGroups",{},d,p.Implementation);g=g.createGridClass("xfile.views.Grid",{},{SELECTION:{CLASS:w},KEYBOARD_SELECTION:!0,CONTEXT_MENU:k.GRID_FEATURES.CONTEXT_MENU,ACTIONS:k.GRID_FEATURES.ACTIONS,WIDGET:{CLASS:r},KEYBOARD_NAVIGATION:{CLASS:A}},{RENDERER:p},{renderers:d,selectedRenderer:q});g=m("xide/views/WelcomeGrid",g,{expandOnClick:!0,permissions:[k.ACTION.OPEN,k.ACTION.CONTEXT_MENU],
formatColumn:function(a,b,c){var e=this.selectedRenderer?this.selectedRenderer.prototype:this;if(e.formatColumn_&&(e=e.formatColumn.apply(arguments))||c.renderColumn_&&(e=c.renderColumn.apply(this,arguments)))return e;switch(a){case "label":b=c.group?'\x3cspan style\x3d"float:left;margin-right: 10px"\x3e'+b+'\x3c/span\x3e\x3chr style\x3d"margin-top: 13px;margin-left: 4px"/\x3e':b}return b},_columns:{},router:null,getColumns:function(a){a=a||this.formatters||{};var b=this;this.columns=[];(function(c,
e,g,d){null!=b._columns[c]&&(d=!b._columns[c]);b.columns.push({renderExpando:"Name"===c,label:c,field:e,sortable:g,formatter:function(g,d){return c in a?a[c].apply(b,[e,g,d]):b.formatColumn(e,g,d)},hidden:d})})("Name","label",!0,!1);return this.columns},postMixInProperties:function(){var a=this.state;a&&a._columns&&(this._columns=a._columns);this.columns||(this.columns=this.getColumns());return this.inherited(arguments)},wireStore:function(a){function b(a){c._refreshTimer&&clearTimeout(c._refreshTimer)&&
(c._refreshTimer=null);c._refreshTimer=setTimeout(function(){c.refresh()},100)}var c=this;E.each(["update","added","remove","delete"],function(c){this.addHandle(c,a.on(c,b))},this)},getSelection:function(){var a=this.inherited(arguments);return a=E.map(a,function(a){if(!a.group&&a.owner){var b=a.owner.routeToReference(this.router.match({path:a.url}));if(b)return b}return a},this)},onSelectionChanged:function(a){var b=a.selection[0];a=this.getActionStore();var c=this.getContextMenu(),b=b&&b.getActions?
b.getActions():null;c&&c.removeCustomActions();b&&!E.isEmpty(b)&&(this.addActions(b),c&&(c.setActionStore(null,this,!1,!1),c.setActionStore(a,this,!1,!1)))},runAction:function(a){var b=this._getSelection()[0],c=this.getSelection()[0];if(c&&b&&b.runAction)return b.runAction(a,c,this)},startup:function(){this._patchTreeClick();if(this.permissions){var b=[].concat(a.getDefaultActions(this.permissions,this,this));this.addActions(b)}var b=this.inherited(arguments),c=this.collection;this.wireStore(c);this._on("selectionChanged",
this.onSelectionChanged,this);var e=F(this.domNode);e.addClass("xFileGrid metro welcomeGrid");e.css("padding","16px");e.css("height","30px");this._showHeader(!1);this.add(c);this.wireTrackingStore(this.trackingStore);e=c.putSync({group:"Recent",label:"Recent",url:"Recent",parent:"root",directory:!0});this.publish(k.EVENTS.ON_RENDER_WELCOME_GRID_GROUP,{item:e,store:c,grid:this});e=c.putSync({group:"New",label:"New",url:"New",parent:"root",directory:!0});this.publish(k.EVENTS.ON_RENDER_WELCOME_GRID_GROUP,
{item:e,store:c,grid:this});this.set("collection",c.filter({parent:"root"}));this.refresh().then(function(){this.expand(this.row("Recent"));this.expand(this.row("Devices"));this.expand(this.row("New"))}.bind(this));return b},_renderRow:function(a){},refreshItems:function(){var a=this.collection,b=a.getSync("Recent");b&&(b&&this.publish(k.EVENTS.ON_RENDER_WELCOME_GRID_GROUP,{item:b,store:a,grid:this}),this.refresh())},wireTrackingStore:function(a){var b=this;E.each(["added","updated"],function(c){this.addHandle(c,
a.on(c,function(a){b.refreshItems()}))},this)}});n=m("xide/views/WelcomeStore",[v,b,c],{idProperty:"url",parentProperty:"parent",Model:n([z,y,B],{}),id:h.createUUID(),mayHaveChildren:function(a){return a.group?!0:!1},_fetchRange:function(a){var b=new x;a=this.fetchRangeSync(a);this._state.filter&&this._state.filter.category&&(a=E.filter(this.data,this._state.filter),b.resolve(a));b.resolve(a);return b},getChildren:function(a){var b={};b[this.parentProperty]=this.getIdentity(a);return this.root.filter(b)}});
g.STORE_CLASS=n;return g})},"davinci/ve/_ContextWidgets":function(){define("dojo/_base/declare dojo/query dojo/Deferred dojo/promise/all dojo/_base/connect ../Theme ./widget ./Focus ./metadata ./States ./HTMLWidget ./utils/GeomUtils dojox/html/_base".split(" "),function(n,m,k,h,d,b,c,g,p,a,e,q){return n(null,{_processWidgets:function(a,b,c,e){var g=[];this._loadFileDojoTypesCache={};dojo.forEach(m("*",a),function(a){var b=a.getAttribute("data-dojo-type")||a.getAttribute("dojoType")||a.getAttribute("dvwidget");
b||(b="html."+a.tagName.toLowerCase());g.push(this.loadRequires((b||"").replace(/\./g,"/"),!1,!0));g.push(this._preProcess(a));this._preserveStates(a,c);this._preserveDojoTypes(a)},this);var d=new k;h(g).then(function(){this.getGlobal().require("dojo/ready")(function(){try{this.getGlobal().require("dijit/registry"),this.getGlobal().require("dojo/parser").parse(a).then(function(){this._restoreDojoTypes();d.resolve();b&&this._attachAll();if(e)try{dojox.html.evalInGlobal(e,a)}catch(z){console.error("Error eval script in Context._setSourceData, "+
z)}}.bind(this),function(a){d.reject(a)})}catch(z){console.error("error in _processWidgets",z),d.reject(z)}}.bind(this))}.bind(this));return d},_preProcess:function(a){var b=a.getAttribute("data-dojo-type")||a.getAttribute("dojoType");b||(b="html."+a.tagName.toLowerCase());return c.requireWidgetHelper((b||"").replace(/\./g,"/")).then(function(b){b&&b.preProcess&&b.preProcess(a,this)}.bind(this))},attach:function(a){if(a&&!a._edit_focus)if(a._srcElement||(a._srcElement=this._srcDocument.findElement(a.id)),
a.type||(a.type=a.isHtmlWidget?"html."+a.getTagName():a.isGenericWidget?a.domNode.getAttribute("dvwidget"):a.isObjectWidget?a.getObjectType():a.declaredClass.replace(/\./g,"/")),a.metadata=a.metadata||p.query(a.type),a._edit_context=this,a.attach(),"_"==a.type.charAt(a.type.lastIndexOf(".")+1))a.internal=!0;else{var b=a.getId();if(b){var c=this._widgetIds;-1===c.indexOf(b)&&c.push(b)}if(b=a.getObjectId(a))c=this._objectIds,-1===c.indexOf(b)&&c.push(b);dojo.forEach(a.getChildren(!0),this.attach,this)}},
_attachAll:function(){var a=this.rootWidget=new e({},this.rootNode);a._edit_context=this;a.isRoot=!0;this._srcDocument.getDocumentElement().getChildElement("body");a._srcElement=this._srcDocument.getDocumentElement().getChildElement("body");a._srcElement&&a._srcElement.setAttribute("id","myapp");this._attachChildren(this.rootNode)},_attachChildren:function(a){m("\x3e *",a).map(c.getWidget).forEach(this.attach,this)},detach:function(a){this.getGlobal();var b=function(a,b){b=a.indexOf(b);-1!=b&&a.splice(b,
1)},c=a.getId(),e=this;c&&b(this._widgetIds,c);(c=a.getObjectId())&&b(this._objectIds,c);if(this._selection)for(b=0;b<this._selection.length;b++)this._selection[b]==a&&(this.focus(null,b),this._selection.splice(b,1));if(b=p.getLibraryForType(a.type)){var c=b.name,g=[a.type,this];p.invokeCallback(b,"onRemove",g);--this._widgets[c];0===this._widgets[c]&&p.invokeCallback(b,"onLastRemove",g)}a.getChildren();dojo.forEach(a.getChildren(),function(a){e.detach(a)},this);delete this._containerControls},widgetChanged:function(a,
b){1==a?this.widgetHash[b.id]=b:2==a&&delete this.widgetHash[b.id]},resizeAllWidgets:function(){this.getTopWidgets().forEach(function(a){a.resize&&a.resize()})},getAllWidgets:function(){var a=[],b=function(c){a.push(c);c.getChildren().forEach(function(a){b(a)})};this.rootWidget&&b(this.rootWidget);return a},widgetAddedOrDeleted:function(a){var c=b.getHelper(this.getTheme());c&&c.widgetAddedOrDeleted?c.widgetAddedOrDeleted(this,a):c&&c.then&&c.then(function(b){b.helper&&(this.theme.helper=b.helper,
b.helper.widgetAddedOrDeleted&&b.helper.widgetAddedOrDeleted(this,a))}.bind(this))},clearCachedWidgetBounds:function(){this.getAllWidgets().forEach(function(a){(a=a.domNode)&&q.clearGeomCache(a)})},updateFocus:function(a,b,e){this.editor.getDisplayMode&&"source"==this.editor.getDisplayMode()||c.requireWidgetHelper(a.type).then(function(c){if(this.editor.isActiveEditor()){var g,d,r;if(!p.queryDescriptor(a.type,"isInvisible"))switch((c=a.getHelper())&&c.getMarginBoxPageCoords?g=c.getMarginBoxPageCoords(a):
(g=a.getStyleNode(),c&&c.getSelectNode&&(g=c.getSelectNode(this)||g),g=q.getMarginBoxPageCoords(g)),r=a.getParent(),d={move:!(r&&r.isLayout&&r.isLayout())},r&&r.isLayout&&r.isLayout()?"none":p.queryDescriptor(a.type,"resizable")){case "width":d.resizeWidth=!0;break;case "height":d.resizeHeight=!0;break;case "both":d.resizeWidth=!0,d.resizeHeight=!0}this.focus({box:g,op:d,hasLayout:a.isLayout&&a.isLayout(),isChild:r&&r.isLayout&&r.isLayout()},b,e);this._focuses[0].showContext(this,a)}}.bind(this))},
updateFocusAll:function(){if(!this.editor||!this.editor.getDisplayMode||"source"!=this.editor.getDisplayMode()){var b=this._selection;if(b)for(var c=0;c<b.length;c++)this.updateFocus(b[c],c);a.updateHighlightsBaseStateWidgets(this)}},hideFocusAll:function(a){a||(a=0);var b=this.getFocusContainer();if(this._focuses)for(;a<this._focuses.length;a++){var c=this._focuses[a];c.domNode.parentNode==b&&(c.hide(),b.removeChild(c.domNode))}},getFocus:function(a){a=this.getSelection().indexOf(a);return-1==a?
null:this._focuses[a]},isFocusNode:function(a){if(this._selection&&this._selection.length&&this._focuses&&this._focuses.length>=this._selection.length)for(var b=0;b<this._selection.length;b++)if(this._focuses[b].isFocusNode(a))return!0;return!1},focus:function(a,b,c){this._focuses=this._focuses||[];var e=!1;void 0===b&&(e=!0,b=0);var q;b<this._focuses.length?q=this._focuses[b]:(dojo.withDoc(this.getDocument(),dojo.hitch(this,function(){q=new g;q._edit_focus=!0;q._context=this})),this._focuses.push(q));
var r=this.getFocusContainer();if(a){if(a.box&&a.op){q._connected||(this._connects.push(d.connect(q,"onExtentChange",this,"onExtentChange")),q._connected=!0);var p=this.getSelection();q.resize(a.box,p[0]);var h=b<p.length?b:0;q.resize(a.box,p[h]);q.allow(a.op);q.domNode.parentNode!=r&&r.appendChild(q.domNode);q.show(p[h],{inline:c})}else q.hide();b++}else e||(q.domNode.parentNode==r&&(q.hide(),r.removeChild(q.domNode)),this._focuses.splice(b,1),this._focuses.push(q));e&&this.hideFocusAll(b)},getFocusContainer:function(){var a=
document.getElementById("focusContainer");a||(a=dojo.create("div",{"class":"focusContainer",id:"focusContainer"},document.body),davinci.Workbench.focusContainer=a);return a},getTopWidgets:function(){for(var a=[],b=this.rootNode.firstChild;b;b=b.nextSibling)1==b.nodeType&&b._dvWidget&&a.push(b._dvWidget);return a}})})},"davinci/ve/actions/UnselectAllAction":function(){define(["dojo/_base/declare","davinci/ve/actions/ContextAction"],function(n,m){return n("davinci.ve.actions.SelectParentAction",[m],
{run:function(k){k=this.fixupContext(k);0<(k&&k.getSelection()).length&&k.deselect()},isEnabled:function(k){return(k=(k=this.fixupContext(k))&&k.getSelection())&&0<k.length}})})},"dojox/main":function(){define("dojo/_base/kernel dijit/dijit dojox/html/entities dojox/html/ellipsis dojox/html/_base dojox/widget/ColorPicker".split(" "),function(n){return n.dojox})},"xblox/model/File/ReadJSON":function(){define("dcl/dcl dojo/Deferred xblox/model/Block xide/utils xblox/model/Contains xide/types xdojo/has!xblox-ui?xfile/data/DriverStore xdojo/has!xblox-ui?xfile/views/FileGridLight".split(" "),
function(n,m,k,h,d,b,c,g){function p(a,b,g){return new c({data:[],config:{},mount:"none",options:b,driver:g,micromatch:"(*.json)|!(*.*)",glob:a})}return n([k,d],{declaredClass:"xblox.model.File.ReadJSON",name:"Read JSON",deferred:!1,sharable:!1,context:null,icon:"fa-file",observed:["path"],getContext:function(){return this.context||(this.scope.getContext?this.scope.getContext():this)},getFileContent:function(a){return this.getScope().ctx.getDeviceManager().getInstanceByName("File-Server").callCommand("GetProg",
{override:{args:[a]}})},processJSON:function(a,c){var e=this.jsonPath;this._lastResult=e?h.getAt(a,e):a;this.onSuccess(this,c);this.runByType(b.BLOCK_OUTLET.FINISH,c)},solve:function(a,b,c,g,d){this._currentIndex=0;this._return=[];b=this._lastSettings=b||this._lastSettings||{};c=""+this._get("path");var e=new m,q=this;this.onRunThis(b);a=a.expressionModel.replaceVariables(a,c,null,null);this.getFileContent(a).then(function(a){(a=a.content)&&(a=h.getJson(a,!0))&&q.processJSON(a,b)}.bind(this));try{g&&
g("Expression "+c+" evaluates to "+a)}catch(x){this.onDidRunItemError(e,x,b),this.onFailed(this,b),d&&d("invalid expression : \n"+c+": "+x)}return e},toText:function(){var a='\x3cspan style\x3d""\x3e'+this.getBlockIcon()+" "+this.name+" :: \x3c/span\x3e";this.path&&(a+=this.path.substr(0,50));return a},canAdd:function(){return[]},getFields:function(){var a=this.inherited(arguments)||this.getDefaultFields(),e=this.getScope().ctx,d=e.getDeviceManager().getInstanceByName("File-Server"),u=h.clone(b.DEFAULT_FILE_GRID_PERMISSIONS);
d&&c&&(e={ctx:e,owner:this,selection:"/",resizeToParent:!0,Module:g,permissions:u},u={fields:b.FIELDS.SHOW_ISDIR|b.FIELDS.SHOW_OWNER|b.FIELDS.SHOW_SIZE|b.FIELDS.SHOW_FOLDER_SIZE|b.FIELDS.SHOW_MIME|b.FIELDS.SHOW_PERMISSIONS|b.FIELDS.SHOW_TIME|b.FIELDS.SHOW_MEDIA_INFO},e.leftStore=p("/*",u,d),e.rightStore=p("/*",u,d),a.push(h.createCI("path",4,this.path,{group:"General",title:"Path",dst:"path",filePickerOptions:e,widget:{item:this}})));a.push(h.createCI("jsonPath",13,this.jsonPath,{group:"General",
title:"Select",dst:"jsonPath"}));return a}})})},"dijit/lang/loading":function(){define([],function(){return{loadingState:"Loading...",errorState:"Sorry, an error occurred"}})},"xide/views/Dialog":function(){define("dojo/_base/declare xide/mixins/EventedMixin xide/factory dojo/dom-class dojo/dom-geometry dojo/dom-style dojo/window".split(" "),function(n,m,k,h,d,b,c){return n("xide.views.Dialog",[m],{cssClass:"Dialog",maxRatio:.9,_messages:null,minimizable:!1,_minimizeButton:null,resizeable:!0,_resizeHandle:null,
getCSSNode:function(){return this.containerNode},_buildRendering:function(){this.inherited(arguments)},minimize:function(){},_position:function(){if(!h.contains(this.ownerDocumentBody,"dojoMove")){var g=this.domNode,p=c.getBox(this.ownerDocument),a=this._relativePosition,e=d.position(g);b.set(g,{left:Math.floor(p.l+(a?Math.min(a.x,p.w-e.w):(p.w-e.w)/2))+"px",top:Math.floor(p.t+(a?Math.min(a.y,p.h-e.h):(p.h-e.h)/2))+"px"})}},_fitContent:function(){d.getContentBox(this.containerNode);var c=d.getContentBox(this.titleBar),
c=d.getContentBox(this.domNode).h-c.h;b.set(this.containerNode,{height:c+"px"})},show:function(){var b=this.inherited(arguments),c=this;this.set("title",this.translate(this.title));return b.then(function(){c.fitContent&&c._fitContent();setTimeout(function(){c.resize()},10)})}})})},"xide/form/Select":function(){define("xdojo/declare dcl/dcl xide/_base/_Widget xide/data/TreeMemory xide/data/ObservableStore dstore/Trackable xide/widgets/WidgetBase xide/utils xide/$ xide/lodash dojo/dom-construct".split(" "),
function(n,m,k,h,d,b,c,g,p,a,e){var q={render:function(){this.empty();this._render();var a=this.getPicker();a.val(this.value);a.render()},empty:function(){this.$selectNode.empty()},_destroy:function(){this._picker&&this._picker.destroy();this.store&&this.store.destroy&&this.store.ownStore&&this.store.destroy();delete this._picker;delete this.store},getPicker:function(){this._picker||(this._picker=this.$selectNode.selectpicker(this.selectOptions).data().selectpicker);return this._picker},_createStore:function(a){var c=
new (n("driverStore",[h,b,d],{}))({idProperty:"value",ownStore:!0});c.setData(a);return c},set:function(a,b,c){if("value"===a){this.value=b;var e=this.getPicker();null!==b&&e.refresh();e.val(b,c);e.render();return null}return this.inherited(arguments)},get:function(a){return"value"===a?this.getPicker().val():this.inherited(arguments)},_render:function(){this._destroyItems();if(this.store){var b=[];if(a.isArray(this.query)){var c=this;a.each(this.query,function(a){b=b.concat(c.store.query(a))})}else b=
this.store.query(this.query||{});this._renderItems(b)}else this.options&&(this._items=[],a.each(this.options,function(a){a=this._renderItem(a);"placeAt"in a&&a.placeAt(this)},this))},_renderItems:function(b){this._items=[];var c=a.groupBy(b,function(a){return a.group}),c=g.toArray(c);1==c.length&&"undefined"===c[0].name&&(c=[]);c.length?a.each(c,function(b){var c=this.selectNode.appendChild(p('\x3coptgroup label\x3d"'+b.name+'"\x3e')[0]);a.each(b.value,function(a){this._renderItem(a,c)},this)},this):
b.forEach(function(a){a=this._renderItem(a);"placeAt"in a&&a.placeAt(this)},this)},_renderItem:function(b,c){if(b.divider)return(c||this.selectNode).appendChild(p('\x3coption data-divider\x3d"true"\x3e\x3c/option\x3e')[0]);var e=this.labelField?b[this.labelField]:b.label,g=this.valueField?b[this.valueField]:b.value;a.find(this._items,{value:g})||this._items.push({label:e,value:g});e=p('\x3coption value\x3d"'+g+'" data-icon\x3d"'+b.icon+'"\x3e'+e+"\x3c/option\x3e");(c||this.selectNode).appendChild(e[0]);
e.data("item",b);return e[0]},_destroyItems:function(){this.destroyDescendants(!0);this.empty();this._items=[]},startupPost:function(){var a=this;this.$selectNode.on("change",function(b){b=a.get("value");a.value=b;a._emit("change",b);a.setValue(b)})}},u={render:function(){this.empty();this._render();this.getPicker().val(this.value,null,!0)},empty:function(){this.$selectNode.empty()},_destroy:function(){this._picker&&this._picker.destroy();this.store&&this.store.destroy&&this.store.ownStore&&this.store.destroy();
delete this._picker;delete this.store},getDefaultOptions:function(){return g.mixin({valueField:this.valueField||"value",labelField:this.labelField||"label",searchField:this.labelField||"label",options:[],create:!0,createOnBlur:!0,plugins:["restore_on_backspace"],persist:!1,dropdownParent:"body"},this.selectOptions)},getPicker:function(){if(!this._picker){var a=this.getDefaultOptions();this._picker=p(this.selectNode).selectize(a).data().selectize;this._picker.val=function(a,b,c){return a?this.setValue(a,
c):this.getValue()}}return this._picker},_createStore:function(a){var c=new (this.storeClass||n("driverStore",[h,b,d],{}))({idProperty:"value",ownStore:!0});c.setData(a);return c},set:function(a,b,c,e){var g=this.getPicker();"disabled"===a&&(b?g.disable():g.enable());return"value"===a?(this.value=b,g.val(b,c,e),null):this.inherited(arguments)},get:function(a){return"value"===a?this.getPicker().val():this.inherited(arguments)},_render:function(){this._destroyItems();if(this.store){var b=[];if(a.isArray(this.query)){var c=
this;a.each(this.query,function(a){b=b.concat(c.store.query(a))})}else b=this.store.query(this.query||{});this._renderItems(b)}else this.options&&(this._items=[],a.each(this.options,function(a){(a=this._renderItem(a))&&"placeAt"in a&&a.placeAt(this)},this))},_renderItems:function(a){this._items=[];a.forEach(function(a){this._renderItem(a)},this)},_renderItem:function(b){var c=this.getPicker();if(!b.divider){var e=this.labelField?b[this.labelField]:b.label;b=this.valueField?b[this.valueField]:b.value;
a.find(this._items,{value:b})||(e={label:e,value:b},this._items.push(e),c.addOption(e))}},_destroyItems:function(){this.destroyDescendants(!0);this.empty()},startupPost:function(){var a=this;this.getPicker().on("change",function(){a._emit("change",a.get("value"));a.setValue(a.get("value"))})}},w=function(a){return function(b,c){var e;e=[];p.each(a,function(a,b){e.push(b)});c(e)}},r={_items:function(){return a.map(this.store?this.store.query(this.query):this.options,function(a){return{name:this.labelField?
a[this.labelField]:a.label,value:this.valueField?a[this.valueField]:a.value,run:a.run}},this)},init:function(a){a=e.create("input",{"class":"form-control input-transparent",type:"text",value:a||"No Value"});this.$selectNode.parent().append(a);this.$selectNode.remove();this.$editBox=p(a);var b=this;a=p(a).typeahead(g.mixin({hint:!0,highlight:!0,minLength:0,name:"states",source:w(b._items()),autoSelect:!0,showHintOnFocus:"all",appendTo:p("body"),select:function(){var a=this.$menu.find(".active").data("value");
this.$element.data("active",a);if(this.autoSelect||a)(a=this.updater(a))||(a=""),b.typeahead.value=b.valueField?a[b.valueField]:a.value,this.$element.val(this.displayText(a,!0)||a).change(),this.afterSelect(a);return this.hide()},highlighter:function(a){return a},displayText:function(a,c){return c?b.labelField?a[b.labelField]:a.name:'\x3cspan class\x3d"text-info"\x3e'+a.value+"\x3c/span\x3e"}},{}));this.typeahead=p(a).data("typeahead");this.$editBox.on("click",function(){b.typeahead.lookup("")})},
render:function(){this.empty();this.getPicker().val(this.value,null,!0)},empty:function(){},_destroy:function(){this._picker&&this.typeahead.destroy();this.store&&this.store.destroy&&this.store.ownStore&&this.store.destroy();delete this._picker;delete this.store},getDefaultOptions:function(){return g.mixin({valueField:this.valueField||"value",labelField:this.labelField||"label",searchField:this.labelField||"label",options:[],create:!0,createOnBlur:!0,plugins:["restore_on_backspace"],persist:!1,dropdownParent:"body"},
this.selectOptions)},getPicker:function(){this._picker||(this._picker=this.$editBox);return this._picker},_createStore:function(a){var c=new (this.storeClass||n("driverStore",[h,b,d],{}))({idProperty:"value",ownStore:!0});c.setData(a);return c},set:function(a,b,c,e){var g=this.getPicker();if("disabled"===a)this.$editBox[!0===b?"attr":"removeAttr"](a,b);return"value"===a?(this.value=b,this.typeahead.value=b,g.val(b,c,e),null):this.inherited(arguments)},get:function(a){return"value"===a?this.typeahead.value:
this.inherited(arguments)},_renderItems:function(a){a.forEach(this._renderItem,this)},onStoreChanged:function(){this.typeahead.source=w(this._items())},_destroyItems:function(){this.destroyDescendants(!0);this.empty()},startupPost:function(){var a=this;this.getPicker().on("change",function(){a._emit("change",a.get("value"));a.setValue(a.get("value"))})}};m=m([c,k.StoreMixin],{declaredClass:"xide.form.Select",$selectNode:null,search:!1,style:"btn-info",store:null,query:null,title:"Choose:",disabled:!1,
select:null,value:null,selectOptions:{container:"body"},typeahead:!1,noStore:!1,templateString:"\x3cdiv class\x3d'widgetContainer widgetBorder widgetTable widget' style\x3d''\x3e\x3ctable border\x3d'0' cellpadding\x3d'5px' width\x3d'100%'\x3e\x3ctbody align\x3d'left'\x3e\x3ctr attachTo\x3d'extensionRoot' valign\x3d'middle' style\x3d'height:90%'\x3e\x3ctd attachTo\x3d'titleColumn' width\x3d'15%' class\x3d'widgetTitle'\x3e\x3cspan attachTo\x3d'titleNode'\x3e${!title}\x3c/span\x3e\x3c/td\x3e\x3ctd valign\x3d'middle' class\x3d'widgetValue' attachTo\x3d'valueNode' width\x3d'100px'\x3e\x3cselect disabled\x3d\"${!disabled}\" value\x3d\"${!value}\" title\x3d\"${!title}\" data-live-search\x3d\"${!search}\"  data-style\x3d\"${!style}\" class\x3d\"selectpicker\" attachTo\x3d\"selectNode\"\x3e\x3c/td\x3e\x3ctd class\x3d'extension' attachTo\x3d'previewNode'\x3e\x3c/td\x3e\x3ctd class\x3d'extension' attachTo\x3d'button0'\x3e\x3c/td\x3e\x3ctd class\x3d'extension' attachTo\x3d'button1'\x3e\x3c/td\x3e\x3c/tr\x3e\x3c/tbody\x3e\x3c/table\x3e\x3cdiv attachTo\x3d'expander' style\x3d'width:100%;'\x3e\x3c/div\x3e\x3cdiv attachTo\x3d'last'\x3e\x3c/div\x3e\x3c/div\x3e",
EDITABLE_CLASS:u,init:function(a){},_createStore:function(a){var c=new (n("driverStore",[h,b,d],{}))({idProperty:"value",ownStore:!0});c.setData(a);return c},destroy:function(){this._destroy&&this._destroy()},onStoreChanged:function(){},startup:function(){!this.title&&this.$titleNode&&(this.$titleNode.remove(),this.$titleNode=null,this.$titleColumn.remove(),this.$titleColumn=null);this.disabled||this.$selectNode.removeAttr("disabled");var b=this.userData||{},c=b.value||this.value;this.$titleNode&&
this.$titleNode.html(b.title);g.mixin(this,this.editable?r:q);!0!==this.noStore&&!this.store&&this.options&&(this.store=this._createStore(this.options),(b=a.find(this.options,{selected:!0}))&&(this.value=b.value));this.init(c);this.select=this.getPicker();var e=this;this.store?(this.render(),this.wireStore(this.store,function(a){if("update"!==a.type||a.value!==e._lastUpdateValue)e._lastUpdateValue=a.value,e.onStoreChanged(a)}),this.store._on("update",function(a){if("update"!==a.type||a.value!==e._lastUpdateValue)e._lastUpdateValue=
a.value,e.onStoreChanged(a)})):this.render();null!=c&&this.set("value",c,null,!0);this.startupPost();this.onReady()}});m.SELECTIZE=u;m.SELECT=q;m.TYPEAHEAD=r;return m})},"davinci/ve/widgets/ColorPicker2":function(){define(["xide/widgets/ColorPickerWidget","xide/utils","dcl/dcl","xide/widgets/TemplatedWidgetBase","dojo/_base/lang"],function(n,m,k,h,d){k=k(h,{templateString:"\x3cdiv \x3e\x3c/div\x3e",numberDelta:1,insertPosition:9,data:null,_onChange:function(b){},_setValueAttr:function(b,c){if(this._dropDown&&
(this._dropDown.set("value",b.replace("#",""),!0),this._currentValue=this._dropDown.get("value"),!1!==c&&this._onChange(this._currentValue),!c&&b!==this._currentValue))this.onChange()},set:function(b,c){if("value"===b&&this._dropDown)return this._setValueAttr(c)},get:function(b){return"value"===b&&this._dropDown?this._getValueAttr():""},postCreate:function(){},startup:function(){var b=m.addWidget(n,{title:""},null,this.domNode,!0);this._dropDown=b;this._value=this._value||"";this._dropDown.set("value",
this._value.replace("#",""),!0);var c=this;this._dropDown._on("change",function(b){c._value=c._getValueAttr();c.onChange(c._value)});this.add(b)},_setReadOnlyAttr:function(b){this._isReadOnly=b;this._dropDown.set("disabled",b)},onChange:function(){this._value=this._dropDown.get("value")},_getValueAttr:function(){return this._dropDown.get("value")}});dojo.mixin(k,{divider:"---"});d.setObject("davinci.ve.widgets.ColorPicker",k);return k})},"davinci/ve/commands/ModifyCommand":function(){define(["dojo/_base/declare",
"davinci/ve/commands/_hierarchyCommand","../widget","../utils/ImageUtils","../States"],function(n,m,k,h,d){return n("davinci.ve.commands.ModifyCommand",[m],{name:"modify",constructor:function(b,c,g,d,a){this._oldId=b?b.id:void 0;this._properties=c=c||{};this._children=g||"string"==typeof g?g:c._children;this._context=d||b.getContext();this._scripts=a;delete this._properties._children},setContext:function(b){this._context=b},add:function(b){b&&b._oldId==this._oldId&&(b._properties&&dojo.mixin(this._properties,
b._properties),b._children&&(this._children=b._children))},execute:function(){if(this._oldId&&this._properties){var b=k.byId(this._oldId),c=this._context;if(b){this._oldData=b.getData();this._oldData.context=c;this._newData={type:this._oldData.type,properties:dojo.mixin({},this._oldData.properties,this._properties),children:this._children||"string"==typeof this._children?this._children:this._oldData.children,scripts:dojo.mixin({},this._oldData.scripts,this._scripts),maqAppStates:this._oldData.maqAppStates,
maqDeltas:this._oldData.maqDeltas,context:c};for(var g in this._newData.properties)"$MAQ_MODIFYCOMMAND_DELETE_PROPERTY$"===this._newData.properties[g]&&delete this._newData.properties[g];if(this._doRefreshFromSource(b))b.setProperties(this._newData.properties,!0),setTimeout(function(){c.visualEditor.refresh()},0);else{c&&c.detach(b);this._oldData.properties.isTempID&&!this._properties.id||delete this._newData.properties.isTempID;g=b.getParent();var p=null,a=g.indexOf(b);g.removeChild(b);b.destroyWidget();
if(p=k.createWidget(this._newData)){"IMG"===p.domNode.tagName&&h.ImageUpdateFocus(p,c);g.addChild(p,a);this._newId=p.id;c&&(c.attach(p),p.startup(),p.renderWidget(),c.widgetAddedOrDeleted(),this._oldId!=this._newId&&c.widgetChanged(c.WIDGET_ID_CHANGED,p,this._oldId),c.widgetChanged(c.WIDGET_MODIFIED,p));this.newWidget=p;dojo.publish("/davinci/ui/widget/replaced",[p,b]);d.resetState(p.domNode);var e;if(b=this._isRefreshParentOnPropChange(p))if("string"==typeof b)for(e=g;e&&e.domNode&&e.type!=b&&"BODY"!=
e.domNode.tagName;){if(!e.domNode||"BODY"==e.domNode.tagName){e=null;break}e=e.getParent()}else e=g;(b=this._isRefreshOnDescendantChange(p))&&(e=b);e&&(new davinci.ve.commands.ModifyCommand(e,null,null,g._edit_context)).execute();dojo.publish("/davinci/ui/widgetPropertiesChanged",[[p]])}}}}},_doRefreshFromSource:function(b){var c=this._properties,g,d,a=!1;for(g in c)if(c.hasOwnProperty(g)&&(d=b.metadata.property[g])&&d.refreshFromSource){a=!0;break}return a},_isRefreshParentOnPropChange:function(b){return davinci.ve.metadata.queryDescriptor(b.type,
"refreshParentOnPropChange")},undo:function(){if(this._newId&&this._oldData){var b=k.byId(this._newId);if(b){var c=b.getParent();if(c){var g=c.indexOf(b);if(!(0>g)){var p=c.getContext();p&&p.detach(b);c.removeChild(b);b.destroyWidget();if(newWidget=k.createWidget(this._oldData)){this._oldData=newWidget.getData();this._oldData.context=this._context;c.addChild(newWidget,g);p&&(p.attach(newWidget),newWidget.startup(),newWidget.renderWidget(),p.widgetAddedOrDeleted(),p.widgetChanged(p.WIDGET_MODIFIED,
newWidget));dojo.publish("/davinci/ui/widget/replaced",[newWidget,b]);d.resetState(newWidget.domNode);var a;if(this._isRefreshParentOnPropChange(b))if("string"==typeof refreshParent)for(a=c;a&&a.domNode&&a.type!=refreshParent&&"BODY"!=a.domNode.tagName;){if(!a.domNode||"BODY"==a.domNode.tagName){a=null;break}a=a.getParent()}else a=c;(b=this._isRefreshOnDescendantChange(newWidget))&&(a=b);a&&(new davinci.ve.commands.ModifyCommand(a,null,null,c._edit_context)).execute();dojo.publish("/davinci/ui/widgetPropertiesChanged",
[[newWidget]])}}}}}}})})},"dijit/form/_ComboBoxMenuMixin":function(){define("dojo/_base/array dojo/_base/declare dojo/dom-attr dojo/has dojo/i18n dijit/lang/ComboBox".split(" "),function(n,m,k,h,d){return m("dijit.form._ComboBoxMenuMixin",null,{_messages:null,postMixInProperties:function(){this.inherited(arguments);this._messages=d.getLocalization("dijit.form","ComboBox",this.lang)},buildRendering:function(){this.inherited(arguments);this.previousButton.innerHTML=this._messages.previousMessage;this.nextButton.innerHTML=
this._messages.nextMessage},_setValueAttr:function(b){this._set("value",b);this.onChange(b)},onClick:function(b){if(b==this.previousButton)this._setSelectedAttr(null),this.onPage(-1);else if(b==this.nextButton)this._setSelectedAttr(null),this.onPage(1);else this.onChange(b)},onChange:function(){},onPage:function(){},onClose:function(){this._setSelectedAttr(null)},_createOption:function(b,c){var g=this._createMenuItem();b=c(b);b.html?g.innerHTML=b.label:g.appendChild(g.ownerDocument.createTextNode(b.label));
""==g.innerHTML&&(g.innerHTML="\x26#160;");return g},createOptions:function(b,c,g){this.items=b;this.previousButton.style.display=0==c.start?"none":"";k.set(this.previousButton,"id",this.id+"_prev");n.forEach(b,function(a,b){a=this._createOption(a,g);a.setAttribute("item",b);k.set(a,"id",this.id+b);this.nextButton.parentNode.insertBefore(a,this.nextButton)},this);var d=!1;b.total&&!b.total.then&&-1!=b.total?c.start+c.count<b.total?d=!0:c.start+c.count>b.total&&c.count==b.length&&(d=!0):c.count==b.length&&
(d=!0);this.nextButton.style.display=d?"":"none";k.set(this.nextButton,"id",this.id+"_next")},clearResultList:function(){for(var b=this.containerNode;2<b.childNodes.length;)b.removeChild(b.childNodes[b.childNodes.length-2]);this._setSelectedAttr(null)},highlightFirstOption:function(){this.selectFirstNode()},highlightLastOption:function(){this.selectLastNode()},selectFirstNode:function(){this.inherited(arguments);this.getHighlightedOption()==this.previousButton&&this.selectNextNode()},selectLastNode:function(){this.inherited(arguments);
this.getHighlightedOption()==this.nextButton&&this.selectPreviousNode()},getHighlightedOption:function(){return this.selected}})})},"dgrid/extensions/ColumnReorder":function(){define("dojo/_base/lang dojo/_base/declare dojo/_base/array dojo/dom-class dojo/on dojo/query dojo/dnd/Source".split(" "),function(n,m,k,h,d,b){function c(a,b){var c=b[2];a=a[c?"columnSets":"subRows"][b[1]];return c?a[b[2]]:a}function g(a,b,c){b[2]?a.columnSets[b[1]][b[2]]=c:a.subRows[b[1]]=c}function p(a,b){return b.slice(("dgrid-"+
a+"-").length)}var a=/(\d+)(?:-(\d+))?$/;n=m(b,{copyState:function(){return!1},checkAcceptance:function(a){return a===this},_legalMouseDown:function(a){return-1<a.target.className.indexOf("dgrid-resize-handle")?!1:this.inherited(arguments)},onDropInternal:function(b){var e=this.grid,h=a.exec(p(e.id,b[0].getAttribute("dndType"))),w=h[2]?"columnSets":"subRows",r=c(e,h),v=e.columns;this.inherited(arguments);h&&setTimeout(function(){var a=k.map(b[0].parentNode.childNodes,function(a){return v[a.columnId]});
g(e,h,a);a={grid:e,subRow:a,column:v[b[0].columnId],bubbles:!0,cancelable:!0,parentType:"dnd"};a[w]=e[w];d.emit(e.domNode,"dgrid-columnreorder",a)?e.set(w,e[w]):(g(e,h,r),e.renderHeader(),e.sort.length&&e.updateSortArrow(e.sort))},0)}});m=m("dgrid.ColumnReorder",null,{columnDndConstructor:n,_initSubRowDnd:function(a,b){var c,e,g,d;e=0;for(g=a.length;e<g;e++)d=a[e],!1!==d.reorderable&&(d=d.headerNode,h.add(d,"dojoDndItem"),d.setAttribute("dndType",b),c||(c=d.parentNode));c&&this._columnDndSources.push(new this.columnDndConstructor(c,
{horizontal:!0,grid:this}))},renderHeader:function(){var a="dgrid-"+this.id+"-",b,c;this.inherited(arguments);this._columnDndSources=[];if(this.columnSets)for(c=0,b=this.columnSets.length;c<b;c++)k.forEach(this.columnSets[c],function(b,e){this._initSubRowDnd(b,a+c+"-"+e)},this);else k.forEach(this.subRows,function(b,c){this._initSubRowDnd(b,a+c)},this)},_destroyColumns:function(){this._columnDndSources&&k.forEach(this._columnDndSources,function(a){a&&a.destroy&&a.destroy()});this.inherited(arguments)}});
m.ColumnDndSource=n;return m})},"xgrid/Layout":function(){define(["xdojo/declare","xide/utils","xide/widgets/TemplatedWidgetBase","xide/registry","xide/$"],function(n,m,k,h,d){var b={template:null,attachDirect:!0,destroy:function(){this.template&&this.template.remove(this)&&m.destroy(this.template,!0,this);this.inherited(arguments)},getTemplateNode:function(){return this.template.domNode},getHeaderNode:function(){return this.template.header},getBodyNode:function(){return this.template.grid},getFooterNode:function(){return this.template.footer},
resize:function(){this.inherited(arguments);var b=this.template?this.template.domNode:this.domNode,g=!1;this.__masterPanel&&(b=this.__masterPanel.containerNode,g=!0);var p=d(b).height(),a=this.template;if(a){var e=d(a.header),q=e?e.height():0,h=this._toolbar?this._toolbar._height:0;0<h&&0===q&&(q+=h);h&&e&&e.css("height","auto");e=a.footer?d(a.footer).height():0;p=p-q-e;50<p?(d(a.grid).height(p+"px"),g&&d(a.domNode).width(d(b).width())):d(a.grid).height("inherited")}},buildRendering:function(){if(!this.template){this._domNode=
this.domNode;var b=m.addWidget(k,{templateString:'\x3cdiv tabindex\x3d"-1" attachTo\x3d"template" class\x3d"grid-template" style\x3d"width: 100%;height: 100%;overflow: hidden;position: relative;padding: 0px;margin: 0px"\x3e\x3cdiv tabindex\x3d"-1" attachTo\x3d"header" class\x3d"grid-header row" style\x3d"width: 100%;height: auto"\x3e\x3c/div\x3e\x3cdiv tabindex\x3d"0" attachTo\x3d"grid" class\x3d"grid-body row"\x3e\x3c/div\x3e\x3cdiv attachTo\x3d"footer" class\x3d"grid-footer" style\x3d"position: absolute;bottom: 0px;width: 100%"\x3e\x3c/div\x3e\x3c/div\x3e',
declaredClass:"xgrid/_BaseParent_"+this.declaredClass},null,this.domNode,!0);d(b.domNode).attr("tabIndex",-1);this.template=b;this.header=b.header;this.footer=b.footer;this.domNode=this.gridBody=b.grid;this.id=this.template.id;this.domNode.id=this.id;b.domNode.id=this.id;h._hash[this.id]=this;b.add(this);return this.inherited(arguments)}}};n=n("xgrid.Layout",null,b);n.Implementation=b;return n})},"xblox/model/logic/ElseIfBlock":function(){define(["dcl/dcl","xblox/model/Block","xblox/model/Contains"],
function(n,m,k){return n([m,k],{declaredClass:"xblox.model.logic.ElseIfBlock",condition:"",consequent:null,name:"else if",icon:"",solve:function(h,d){return this._checkCondition(h)?this._solve(h,d):!1},toText:function(){return"\x3cspan class\x3d'text-primary'\x3e"+this.getBlockIcon("E")+this.name+" \x3c/span\x3e\x3cspan class\x3d'text-warning small'\x3e"+(this.condition||"")+"\x3cspan\x3e"},_checkCondition:function(h){return null!==this.condition?h.parseExpression(this.condition):!1},getFields:function(){var h=
this,d=this.inherited(arguments)||this.getDefaultFields();d.push(this.utils.createCI("condition",this.types.ECIType.EXPRESSION_EDITOR,this.condition,{group:"General",title:"Expression",dst:"condition",delegate:{runExpression:function(b,c,g){return h.scope.expressionModel.parse(h.scope,b,!1,c,g)}}}));return d}})})},"dijit/form/ToggleButton":function(){define(["dojo/_base/declare","dojo/_base/kernel","./Button","./_ToggleButtonMixin"],function(n,m,k,h){return n("dijit.form.ToggleButton",[k,h],{baseClass:"dijitToggleButton",
setChecked:function(d){m.deprecated("setChecked("+d+") is deprecated. Use set('checked',"+d+") instead.","","2.0");this.set("checked",d)}})})},"xide/utils/StringUtils":function(){define(["xide/utils","xide/types","dojo/json","xide/lodash"],function(n,m,k,h){function d(b,c){var g=[],d=[];null==c&&(c=function(a,b){return g[0]===b?"[Circular ~]":"[Circular ~."+d.slice(0,g.indexOf(b)).join(".")+"]"});return function(a,e){if(0<g.length){var q=g.indexOf(this);~q?g.splice(q+1):g.push(this);~q?d.splice(q,
Infinity,a):d.push(a);~g.indexOf(e)&&(e=c.call(this,a,e))}else g.push(e);return null==b?e:b.call(this,a,e)}}n.stringify=function(b){return JSON.stringify(b,d(),2)};n.round=function(b,c,g){if("number"!==typeof b||isNaN(b)||Infinity===b||-Infinity===b)return"";c="undefined"===typeof c?3:parseInt(c,10)||0;var d=Math.pow(10,c);b=(Math.round(b*d)/d).toFixed(c);g||(b=""+ +b);return b};n.humanFileSize=function(b,c){var g=c?1E3:1024;if(Math.abs(b)<g)return b+" B";c=c?"kB MB GB TB PB EB ZB YB".split(" "):
"KiB MiB GiB TiB PiB EiB ZiB YiB".split(" ");var d=-1;do b/=g,++d;while(Math.abs(b)>=g&&d<c.length-1);return b.toFixed(1)+" "+c[d]};"function"!=typeof String.prototype.startsWith&&(String.prototype.startsWith=function(b){return 0===this.indexOf(b)});"function"!=typeof String.prototype.endsWith&&(String.prototype.endsWith=function(b){return this.substring(this.length-b.length,this.length)===b});n.isNativeEvent=function(b){var c={onclick:null,ondblclick:null,onmousedown:null,onmouseup:null,onmouseover:null,
onmousemove:null,onmouseout:null,onkeypress:null,onkeydown:null,onkeyup:null,onfocus:null,onblur:null,onchange:null};if(b in c)return!0;c={click:null,dblclick:null,mousedown:null,mouseup:null,mouseover:null,mousemove:null,mouseout:null,keypress:null,keydown:null,keyup:null,focus:null,blur:null,change:null};return b in c};n.isSystemEvent=function(b){for(var c in m.EVENTS)if(m.EVENTS[c]===b)return!0;return!1};n.contains=function(b,c){for(var g=0;g<b.length;g++)if(b[g]===c)return g;return-1};n.getObjectKeyByValue=
function(b,c){if(b&&c)for(var g in b)if(b.hasOwnProperty(g)&&b[g]===c)return g;return null};n.removeURLParameter=function(b,c){var g=b.split("?");if(2<=g.length){b=encodeURIComponent(c)+"\x3d";c=g[1].split(/[&;]/g);for(var d=c.length;0<d--;)-1!==c[d].lastIndexOf(b,0)&&c.splice(d,1);b=g[0]+"?"+c.join("\x26")}return b};n.replaceUrlParam=function(b,c,g){if(-1==b.indexOf(c))return b+=(0<b.indexOf("?")?"\x26":"?")+c+"\x3d"+g;var d=b.replace(new RegExp("("+c+"\x3d).*?(\x26|$)"),"$1"+g+"$2");d==b&&(d=d+
(0<d.indexOf("?")?"\x26":"?")+c+"\x3d"+g);return d};n.buildPath=function(b,c,g){var d=""+b,d=n.replaceAll("/","",b);b=(""+c).replace("./","/").replace(/^\/|\/$/g,"");d=d+"://"+b;return!0===g?encodeURIComponent(d):d};n.isImage=function(b){return null!=b.toLowerCase().match(/\.(jpeg|jpg|gif|png)$/)};n.hasFlag3=function(b,c){return 1<<c&b?!0:!1};n.hasFlag=function(b,c){return 1<<c&b?!0:!1};n.disableFlag=function(b,c){return b&~(1<<c)};n.cleanUrl=function(b){b&&(b=b.replace("//","/"),b=b.replace("./",
"/"),b=b.replace("http:/","http://"),b=b.replace("./","/"),b=b.replace("////","/"),b=b.replace("///","/"));return b};n.getJson=function(b,c,g){try{return h.isString(b)?k.parse(b,!1):!0===c?null:b}catch(p){!1!==g&&console.error("error parsing json data "+b+" error \x3d "+p)}return null};n.fromJson=function(b){if(!h.isString(b))return b;var c=null,g=!1;try{c=eval("("+b+")",{})}catch(p){g=!0}if(g){b=b.substring(b.indexOf("{"),b.lastIndexOf("}")+1);try{c=eval("("+b+")",{})}catch(p){throw Error(b);}}return c};
n.replaceAll=function(b,c,g){return g?g.split(b).join(c):""};n.isValidString=function(b){return null!=b&&null!=b.length&&0<b.length&&"undefined"!=b};n.substituteString=function(b,c){return b.replace(/\$\{([^\s\:\}]+)(?:\:([^\s\:\}]+))?\}/g,function(b,d){return c[d]})};n.findOcurrences=function(b,c){var g=n.escapeRegExp(c.begin);c=n.escapeRegExp(c.end);return b.match(new RegExp(g+"([^"+c+"]*)"+c,"g"))};n.escapeRegExp=function(b){for(var c="[ ] ( ) { } * + . | ||".split(" "),g=0;g<c.length;g++)b=b.replace(c[g],
"\\"+c[g]);return b};n.multipleReplace=function(b,c){var g=[],d;for(d in c)g[g.length]=d;return b.replace(new RegExp(g.join("\\b|\\b"),"g"),function(a){return c[a]||c["\\"+a]})};n.replace=function(b,c,g,d){if(!b)return"";if(g&&h.isObject(g)||h.isArray(g)){if(d){c=n.findOcurrences(b,d);var a=n.replaceAll;if(c)for(var e=0,q=c.length;e<q;e++){var p=c[e],w=a(d.begin,"",p),w=a(d.end,"",w);b=a(p,g[w],b)}}else return n.multipleReplace(b,g);return b}return n.replaceAll(c,g,b)};n.capitalize=function(b){return b.substring(0,
1).toUpperCase()+b.substring(1)};n.vsprintf=function(b,c){return n.sprintf.apply(this,[b].concat(c))};n.sprintf=function(){var b=arguments,c=0,g=function(a,b,c,g){c||(c=" ");b=a.length>=b?"":Array(1+b-a.length>>>0).join(c);return g?a+b:b+a},d=function(a,b,c,d,r,p){var e=d-a.length;0<e&&(a=c||!r?g(a,d,p,c):a.slice(0,b.length)+g("",e,"0",!0)+a.slice(b.length));return a},a=function(a,b,c,p,r,h,k){a>>>=0;c=c&&a&&{2:"0b",8:"0",16:"0x"}[b]||"";a=c+g(a.toString(b),h||0,"0",!1);return d(a,c,p,r,k)};return b[c++].replace(/%%|%(\d+\$)?([-+\'#0 ]*)(\*\d+\$|\*|\d+)?(\.(\*\d+\$|\*|\d+))?([scboxXuideEfFgG])/g,
function(e,q,p,h,r,v,k){var u,w;if("%%"===e)return"%";var x=!1;w="";var m=r=!1;u=" ";for(var n=p.length,E=0;p&&E<n;E++)switch(p.charAt(E)){case " ":w=" ";break;case "+":w="+";break;case "-":x=!0;break;case "'":u=p.charAt(E+1);break;case "0":r=!0;break;case "#":m=!0}h=h?"*"===h?+b[c++]:"*"==h.charAt(0)?+b[h.slice(1,-1)]:+h:0;0>h&&(h=-h,x=!0);if(!isFinite(h))throw Error("sprintf: (minimum-)width must be finite");v=v?"*"===v?+b[c++]:"*"==v.charAt(0)?+b[v.slice(1,-1)]:+v:-1<"fFeE".indexOf(k)?6:"d"===
k?0:void 0;q=q?b[q.slice(0,-1)]:b[c++];switch(k){case "s":return k=String(q),null!=v&&(k=k.slice(0,v)),d(k,"",x,h,r,u);case "c":return k=String.fromCharCode(+q),null!=v&&(k=k.slice(0,v)),d(k,"",x,h,r,void 0);case "b":return a(q,2,m,x,h,v,r);case "o":return a(q,8,m,x,h,v,r);case "x":return a(q,16,m,x,h,v,r);case "X":return a(q,16,m,x,h,v,r).toUpperCase();case "u":return a(q,10,m,x,h,v,r);case "i":case "d":return u=+q||0,u=Math.round(u-u%1),e=0>u?"-":w,q=e+g(String(Math.abs(u)),v,"0",!1),d(q,e,x,h,
r);case "e":case "E":case "f":case "F":case "g":case "G":return u=+q,e=0>u?"-":w,w=["toExponential","toFixed","toPrecision"]["efg".indexOf(k.toLowerCase())],k=["toString","toUpperCase"]["eEfFgG".indexOf(k)%2],q=e+Math.abs(u)[w](v),d(q,e,x,h,r)[k]();default:return e}})};n.cleanString=function(b){return b?b=b.replace(/[\r]/g,"").replace(/[\b]/g,"").replace(/[\f]/g,"").replace(/[\n]/g,"").replace(/\\/g,""):null};n.normalizePath=function(b){if(!b)return null;b=n.cleanString(b);b=b.replace("./","");return b=
b.replace(/([^:]\/)\/+/g,"$1")};m.PATH_PARTS={DIRNAME:1,BASENAME:2,EXTENSION:4,FILENAME:8,PATHINFO_ALL:0};n.basename=function(b,c){var g=b.charAt(b.length-1);if("/"===g||"\\"===g)b=b.slice(0,-1);b=b.replace(/^.*[\/\\]/g,"");"string"===typeof c&&b.substr(b.length-c.length)==c&&(b=b.substr(0,b.length-c.length));return b};n.pathinfo=function(b,c){var g="",d="",a="",e=0,q={},h=0,w=0,r=h=!1,v=!1;if(!b)return!1;c||(c="PATHINFO_ALL");var k={PATHINFO_DIRNAME:1,PATHINFO_BASENAME:2,PATHINFO_EXTENSION:4,PATHINFO_FILENAME:8,
PATHINFO_ALL:0};for(a in k)k.hasOwnProperty(a)&&(k.PATHINFO_ALL|=k[a]);if("number"!==typeof c){c=[].concat(c);for(w=0;w<c.length;w++)k[c[w]]&&(e|=k[c[w]]);c=e}a=function(a){a+="";var b=a.lastIndexOf(".")+1;return b?b!==a.length?a.substr(b):"":!1};c&k.PATHINFO_DIRNAME&&(e=b.replace(/\\/g,"/").replace(/\/[^\/]*\/?$/,""),q.dirname=e===b?".":e);c&k.PATHINFO_BASENAME&&(!1===h&&(h=n.basename(b)),q.basename=h);c&k.PATHINFO_EXTENSION&&(!1===h&&(h=n.basename(b)),!1===r&&(r=a(h)),!1!==r&&(q.extension=r));c&
k.PATHINFO_FILENAME&&(!1===h&&(h=n.basename(b)),!1===r&&(r=a(h)),!1===v&&(v=h.slice(0,h.length-(r?r.length+1:!1===r?0:1))),q.filename=v);h=0;for(g in q)q.hasOwnProperty(g)&&(h++,d=g);return 1===h?q[d]:q};n.parse_url=function(b,c){var g="source scheme authority userInfo user pass host port relative path directory file query fragment".split(" "),d=this.php_js&&this.php_js.ini||{},a=d["phpjs.parse_url.mode"]&&d["phpjs.parse_url.mode"].local_value||"php",e={php:/^(?:([^:\/?#]+):)?(?:\/\/()(?:(?:()(?:([^:@]*):?([^:@]*))?@)?([^:\/?#]*)(?::(\d*))?))?()(?:(()(?:(?:[^?#\/]*\/)*)()(?:[^?#]*))(?:\?([^#]*))?(?:#(.*))?)/,
strict:/^(?:([^:\/?#]+):)?(?:\/\/((?:(([^:@]*):?([^:@]*))?@)?([^:\/?#]*)(?::(\d*))?))?((((?:[^?#\/]*\/)*)([^?#]*))(?:\?([^#]*))?(?:#(.*))?)/,loose:/^(?:(?![^:@]+:[^:@\/]*@)([^:\/?#.]+):)?(?:\/\/\/?)?((?:(([^:@]*):?([^:@]*))?@)?([^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/},e=e[a].exec(b),q={};for(b=14;b--;)e[b]&&(q[g[b]]=e[b]);if(c)return q[c.replace("PHP_URL_","").toLowerCase()];if("php"!==a){var h=d["phpjs.parse_url.queryKey"]&&
d["phpjs.parse_url.queryKey"].local_value||"queryKey",e=/(?:^|&)([^&=]*)=?([^&]*)/g;q[h]={};c=q[g[12]]||"";c.replace(e,function(a,b,c){b&&(q[h][b]=c)})}delete q.source;return q};n.getMimeTable=function(){return{}};n.getMimeTable2=function(){return{mid:"fa-file-audio-o",txt:"fa-file-text-o",sql:"fa-cube",js:"fa-cube",gif:"fa-file-picture-o",jpg:"fa-file-picture-o",html:"fa-cube",htm:"fa-cube",rar:"fa-file-zip-o",gz:"fa-file-zip-o",tgz:"fa-file-zip-o",z:"fa-file-zip-o",ra:"fa-file-movie-o",ram:"fa-file-movie-o",
rm:"fa-file-movie-o",pl:"source_pl.png",zip:"fa-file-zip-o",wav:"fa-file-audio-o",php:"fa-cube",php3:"fa-cube",phtml:"fa-cube",exe:"fa-file-o",bmp:"fa-file-picture-o",png:"fa-file-picture-o",css:"fa-cube",mp3:"fa-file-audio-o",m4a:"fa-file-audio-o",aac:"fa-file-audio-o",xls:"fa-file-excel-o",xlsx:"fa-file-excel-o",ods:"fa-file-excel-o",sxc:"fa-file-excel-o",csv:"fa-file-excel-o",tsv:"fa-file-excel-o",doc:"fa-file-word-o",docx:"fa-file-word-o",odt:"fa-file-word-o",swx:"fa-file-word-o",rtf:"fa-file-word-o",
md:"fa-file-word-o",ppt:"fa-file-powerpoint-o",pps:"fa-file-powerpoint-o",odp:"fa-file-powerpoint-o",sxi:"fa-file-powerpoint-o",pdf:"fa-file-pdf-o",mov:"fa-file-movie-o",avi:"fa-file-movie-o",mpg:"fa-file-movie-o",mpeg:"fa-file-movie-o",mp4:"fa-file-movie-o",m4v:"fa-file-movie-o",ogv:"fa-file-movie-o",webm:"fa-file-movie-o",wmv:"fa-file-movie-o",swf:"fa-file-movie-o",flv:"fa-file-movie-o",tiff:"fa-file-picture-o",tif:"fa-file-picture-o",svg:"fa-file-picture-o",psd:"fa-file-picture-o",ers:"horo.png"}};
n.getIconTable=function(){return{}};n.urlDecode=function(b,c){if(!b||!b.length)return{};var g={};b=b.split("\x26");for(var d,a,e=0,q=b.length;e<q;e++)d=b[e].split("\x3d"),a=decodeURIComponent(d[0]),d=decodeURIComponent(d[1]),null!=d&&"true"===d?d=!0:"false"===d&&(d=!1),!0!==c?"undefined"==typeof g[a]?g[a]=d:("string"==typeof g[a]&&(g[a]=[g[a]]),g[a].push(d)):g[a]=d;return g};n.getUrlArgs=function(b){var c={};if(b&&(-1!=b.indexOf("?")||-1!=b.indexOf("\x26"))){b=(b.substr(b.indexOf("?")+1)||location.search.substring(1)).split("\x26");
for(var g=0;g<b.length;g++){var d=b[g].indexOf("\x3d"),a=b[g].substring(0,d),d=b[g].substring(d+1),d=decodeURIComponent(d);c[a]=d}}return c};n.urlArgs=function(b){b=n.getUrlArgs(b);var c={},g;for(g in b){var d=b[g],a=n.findOcurrences(d,{begin:"|",end:"|"}),e=null;if(a&&a.length)for(var d=d.replace(a[0],""),a=a[0].substr(1,a[0].length-2).split(","),e={},q=0;q<a.length;q++){var h=a[q].split(":");e[h[0]]=h[1]}d&&d.length&&(c[g]={value:d,options:e})}return c};n.getIcon=function(b){if(!b)return"txt2.png";
if(b=n.getFileExtension(b)){var c=n.getMimeTable();if(null!=c[b])return c[b]}return"txt2.png"};n.getIconClass=function(b){if(!b)return"fa-file-o";b=n.getFileExtension(b);if(m.customMimeIcons[b])return m.customMimeIcons[b];if(b){var c=n.getMimeTable2();if(null!=c[b])return c[b]}return"fa-file-o"};n.getFileExtension=function(b){if(!b||""==b)return"";b=n.getBaseName(b).split(".");return 1<b.length?b[b.length-1].toLowerCase():""};n.createUUID=function(){var b=function(){return(65536*(1+Math.random())|
0).toString(16).substring(1)};return b()+b()+"-"+b()+"-"+b()+"-"+b()+"-"+b()+b()+b()};n.getBaseName=function(b){if(null==b)return null;var c="/";-1!==b.indexOf("\\")&&(c="\\");return b.substr(b.lastIndexOf(c)+1,b.length)};n.basename=function(b,c){var g=b.charAt(b.length-1);if("/"===g||"\\"===g)b=b.slice(0,-1);b=b.replace(/^.*[\/\\]/g,"");"string"===typeof c&&b.substr(b.length-c.length)===c&&(b=b.substr(0,b.length-c.length));return b};n.pathinfo=function(b,c){var g=n.basename,d="",a="",e="",q=0,h=
{},w=0,r=0,v=w=!1,k=!1;if(!b)return!1;c||(c="PATHINFO_ALL");var A={PATHINFO_DIRNAME:1,PATHINFO_BASENAME:2,PATHINFO_EXTENSION:4,PATHINFO_FILENAME:8,PATHINFO_ALL:0};for(e in A)A.hasOwnProperty(e)&&(A.PATHINFO_ALL|=A[e]);if("number"!==typeof c){c=[].concat(c);for(r=0;r<c.length;r++)A[c[r]]&&(q|=A[c[r]]);c=q}e=function(a){a+="";var b=a.lastIndexOf(".")+1;return b?b!==a.length?a.substr(b):"":!1};c&A.PATHINFO_DIRNAME&&(q=b.replace(/\\/g,"/").replace(/\/[^\/]*\/?$/,""),h.dirname=q===b?".":q);c&A.PATHINFO_BASENAME&&
(!1===w&&(w=g(b)),h.basename=w);c&A.PATHINFO_EXTENSION&&(!1===w&&(w=g(b)),!1===v&&(v=e(w)),!1!==v&&(h.extension=v));c&A.PATHINFO_FILENAME&&(!1===w&&(w=g(b)),!1===v&&(v=e(w)),!1===k&&(k=w.slice(0,w.length-(v?v.length+1:!1===v?0:1))),h.filename=k);w=0;for(d in h)h.hasOwnProperty(d)&&(w++,a=d);return 1===w?h[a]:h};n.strip_tags=function(b,c){c=(((c||"")+"").toLowerCase().match(/<[a-z][a-z0-9]*>/g)||[]).join("");return b.replace(/\x3c!--[\s\S]*?--\x3e|<\?(?:php)?[\s\S]*?\?>/gi,"").replace(/<\/?([a-z][a-z0-9]*)\b[^>]*>/gi,
function(b,d){return-1<c.indexOf("\x3c"+d.toLowerCase()+"\x3e")?b:""})};return n})},"dijit/MenuItem":function(){define("dojo/_base/declare dojo/dom dojo/dom-attr dojo/dom-class dojo/_base/kernel dojo/sniff dojo/_base/lang ./_Widget ./_TemplatedMixin ./_Contained ./_CssStateMixin dojo/text!./templates/MenuItem.html".split(" "),function(n,m,k,h,d,b,c,g,p,a,e,q){return n("dijit.MenuItem",[g,p,a,e],{templateString:q,baseClass:"dijitMenuItem",label:"",_setLabelAttr:function(a){this._set("label",a);var b=
"",c;c=a.search(/{\S}/);if(0<=c){var b=a.charAt(c+1),e=a.substr(0,c);a=a.substr(c+3);c=e+b+a;a=e+'\x3cspan class\x3d"dijitMenuItemShortcutKey"\x3e'+b+"\x3c/span\x3e"+a}else c=a;this.domNode.setAttribute("aria-label",c+" "+this.accelKey);this.containerNode.innerHTML=a;this._set("shortcutKey",b)},iconClass:"dijitNoIcon",_setIconClassAttr:{node:"iconNode",type:"class"},accelKey:"",disabled:!1,_fillContent:function(a){!a||"label"in this.params||this._set("label",a.innerHTML)},buildRendering:function(){this.inherited(arguments);
k.set(this.containerNode,"id",this.id+"_text");this.accelKeyNode&&k.set(this.accelKeyNode,"id",this.id+"_accel");m.setSelectable(this.domNode,!1)},onClick:function(){},focus:function(){try{8==b("ie")&&this.containerNode.focus(),this.focusNode.focus()}catch(u){}},_setSelected:function(a){h.toggle(this.domNode,"dijitMenuItemSelected",a)},setLabel:function(a){d.deprecated("dijit.MenuItem.setLabel() is deprecated.  Use set('label', ...) instead.","","2.0");this.set("label",a)},setDisabled:function(a){d.deprecated("dijit.Menu.setDisabled() is deprecated.  Use set('disabled', bool) instead.",
"","2.0");this.set("disabled",a)},_setDisabledAttr:function(a){this.focusNode.setAttribute("aria-disabled",a?"true":"false");this._set("disabled",a)},_setAccelKeyAttr:function(a){this.accelKeyNode&&(this.accelKeyNode.style.display=a?"":"none",this.accelKeyNode.innerHTML=a,k.set(this.containerNode,"colSpan",a?"1":"2"));this._set("accelKey",a)}})})},"dijit/_WidgetBase":function(){define("require dojo/_base/array dojo/aspect dojo/_base/config dojo/_base/connect dojo/_base/declare dojo/dom dojo/dom-attr dojo/dom-class dojo/dom-construct dojo/dom-geometry dojo/dom-style dojo/has dojo/_base/kernel dojo/_base/lang dojo/on dojo/ready dojo/Stateful dojo/topic dojo/_base/window ./Destroyable require ./registry".split(" "),
function(n,m,k,h,d,b,c,g,p,a,e,q,u,w,r,v,x,A,z,y,B,C,E){function F(a){return function(b){g[b?"set":"remove"](this.domNode,a,b);this._set(a,b)}}u.add("dijit-legacy-requires",!w.isAsync);u("dijit-legacy-requires")&&x(0,function(){n(["dijit/_base/manager"])});var G={};return b("dijit._WidgetBase",[A,B],{id:"",_setIdAttr:"domNode",lang:"",_setLangAttr:F("lang"),dir:"",_setDirAttr:F("dir"),"class":"",_setClassAttr:{node:"domNode",type:"class"},_setTypeAttr:null,style:"",title:"",tooltip:"",baseClass:"",
srcNodeRef:null,domNode:null,containerNode:null,ownerDocument:null,_setOwnerDocumentAttr:function(a){this._set("ownerDocument",a)},attributeMap:{},_blankGif:h.blankGif||n.toUrl("dojo/resources/blank.gif"),_introspect:function(){var a=this.constructor;if(!a._setterAttrs){var b=a.prototype,c=a._setterAttrs=[],a=a._onMap={},e;for(e in b.attributeMap)c.push(e);for(e in b)/^on/.test(e)&&(a[e.substring(2).toLowerCase()]=e),/^_set[A-Z](.*)Attr$/.test(e)&&(e=e.charAt(4).toLowerCase()+e.substr(5,e.length-
9),b.attributeMap&&e in b.attributeMap||c.push(e))}},postscript:function(a,b){this.create(a,b)},create:function(a,b){this._introspect();this.srcNodeRef=c.byId(b);this._connects=[];this._supportingWidgets=[];this.srcNodeRef&&"string"==typeof this.srcNodeRef.id&&(this.id=this.srcNodeRef.id);a&&(this.params=a,r.mixin(this,a));this.postMixInProperties();this.id||(this.id=E.getUniqueId(this.declaredClass.replace(/\./g,"_")),this.params&&delete this.params.id);this.ownerDocument=this.ownerDocument||(this.srcNodeRef?
this.srcNodeRef.ownerDocument:document);this.ownerDocumentBody=y.body(this.ownerDocument);E.add(this);this.buildRendering();var e;a=function(a,b){a=a.children;for(var c=a.length;c--;){var e=a[c],g=e.dataset;g&&g.dojoType&&"xblox/RunScript"===g.dojoType&&b.appendChild(e)}};this.domNode&&(this._applyAttributes(),(b=this.srcNodeRef)&&b.parentNode&&this.domNode!==b&&(b.parentNode.replaceChild(this.domNode,b),e=!0),this.domNode.setAttribute("widgetId",this.id));this.postCreate();e&&(a(this.srcNodeRef,
this.domNode),delete this.srcNodeRef);this._created=!0},_applyAttributes:function(){var a={},b;for(b in this.params||{})a[b]=this._get(b);m.forEach(this.constructor._setterAttrs,function(b){if(!(b in a)){var c=this._get(b);c&&this.set(b,c)}},this);for(b in a)this.set(b,a[b])},postMixInProperties:function(){},buildRendering:function(){this.domNode||(this.domNode=this.srcNodeRef||this.ownerDocument.createElement("div"));if(this.baseClass){var a=this.baseClass.split(" ");this.isLeftToRight()||(a=a.concat(m.map(a,
function(a){return a+"Rtl"})));p.add(this.domNode,a)}},postCreate:function(){},startup:function(){this._started||(this._started=!0,m.forEach(this.getChildren(),function(a){a._started||a._destroyed||!r.isFunction(a.startup)||(a.startup(),a._started=!0)}))},destroyRecursive:function(a){this._beingDestroyed=!0;this.destroyDescendants(a);this.destroy(a)},destroy:function(a){function b(b){b.destroyRecursive?b.destroyRecursive(a):b.destroy&&b.destroy(a)}this._beingDestroyed=!0;this.uninitialize();m.forEach(this._connects,
r.hitch(this,"disconnect"));m.forEach(this._supportingWidgets,b);this.domNode&&m.forEach(E.findWidgets(this.domNode,this.containerNode),b);this.destroyRendering(a);E.remove(this.id);this._destroyed=!0},destroyRendering:function(b){this.bgIframe&&(this.bgIframe.destroy(b),delete this.bgIframe);this.domNode&&(b?g.remove(this.domNode,"widgetId"):a.destroy(this.domNode),delete this.domNode);this.srcNodeRef&&(b||a.destroy(this.srcNodeRef),delete this.srcNodeRef)},destroyDescendants:function(a){m.forEach(this.getChildren(),
function(b){b.destroyRecursive&&b.destroyRecursive(a)})},uninitialize:function(){return!1},_setStyleAttr:function(a){var b=this.domNode;r.isObject(a)?q.set(b,a):b.style.cssText=b.style.cssText?b.style.cssText+("; "+a):a;this._set("style",a)},_attrToDom:function(a,b,c){c=3<=arguments.length?c:this.attributeMap[a];m.forEach(r.isArray(c)?c:[c],function(c){var e=this[c.node||c||"domNode"];switch(c.type||"attribute"){case "attribute":r.isFunction(b)&&(b=r.hitch(this,b));c=c.attribute?c.attribute:/^on[A-Z][a-zA-Z]*$/.test(a)?
a.toLowerCase():a;if(!e){console.error("ba d! mapNode.tagName");break}e.tagName?g.set(e,c,b):e.set(c,b);break;case "innerText":e.innerHTML="";e.appendChild(this.ownerDocument.createTextNode(b));break;case "innerHTML":e.innerHTML=b;break;case "class":p.replace(e,b,this[a])}},this)},get:function(a){var b=this._getAttrNames(a);return this[b.g]?this[b.g]():this._get(a)},set:function(a,b){if("object"===typeof a){for(var c in a)this.set(c,a[c]);return this}c=this._getAttrNames(a);var e=this[c.s];if(r.isFunction(e))var g=
e.apply(this,Array.prototype.slice.call(arguments,1));else{var e=this.focusNode&&!r.isFunction(this.focusNode)?"focusNode":"domNode",d=this[e]&&this[e].tagName,q;if((q=d)&&!(q=G[d])){q=this[e];var p={},h;for(h in q)p[h.toLowerCase()]=!0;q=G[d]=p}h=q;c=a in this.attributeMap?this.attributeMap[a]:c.s in this?this[c.s]:h&&c.l in h&&"function"!=typeof b||/^aria-|^data-|^role$/.test(a)?e:null;null!=c&&this._attrToDom(a,b,c);this._set(a,b)}return g||this},_attrPairNames:{},_getAttrNames:function(a){var b=
this._attrPairNames;if(b[a])return b[a];var c=a.replace(/^[a-z]|-[a-zA-Z]/g,function(a){return a.charAt(a.length-1).toUpperCase()});return b[a]={n:a+"Node",s:"_set"+c+"Attr",g:"_get"+c+"Attr",l:c.toLowerCase()}},_set:function(a,b){var c=this[a];this[a]=b;!this._created||c===b||c!==c&&b!==b||(this._watchCallbacks&&this._watchCallbacks(a,c,b),this.emit("attrmodified-"+a,{detail:{prevValue:c,newValue:b}}))},_get:function(a){return this[a]},emit:function(a,b,c){b=b||{};void 0===b.bubbles&&(b.bubbles=
!0);void 0===b.cancelable&&(b.cancelable=!0);b.detail||(b.detail={});b.detail.widget=this;var e,g=this["on"+a];g&&(e=g.apply(this,c?c:[b]));this._started&&!this._beingDestroyed&&v.emit(this.domNode,a.toLowerCase(),b);return e},on:function(a,b){var c=this._onMap(a);return c?k.after(this,c,b,!0):this.own(v(this.domNode,a,b))[0]},_onMap:function(a){var b=this.constructor,c=b._onMap;if(!c){var c=b._onMap={},e;for(e in b.prototype)/^on/.test(e)&&(c[e.replace(/^on/,"").toLowerCase()]=e)}return c["string"==
typeof a&&a.toLowerCase()]},toString:function(){return"[Widget "+this.declaredClass+", "+(this.id||"NO ID")+"]"},getChildren:function(){return this.containerNode?E.findWidgets(this.containerNode):[]},getParent:function(){if(this.domNode)return E.getEnclosingWidget(this.domNode.parentNode)},connect:function(a,b,c){return this.own(d.connect(a,b,this,c))[0]},disconnect:function(a){a.remove()},subscribe:function(a,b){return this.own(z.subscribe(a,r.hitch(this,b)))[0]},unsubscribe:function(a){a.remove()},
isLeftToRight:function(){return this.dir?"ltr"==this.dir.toLowerCase():e.isBodyLtr(this.ownerDocument)},isFocusable:function(){return this.focus&&"none"!=q.get(this.domNode,"display")},placeAt:function(b,e){var g=!b.tagName&&E.byId(b);!g||!g.addChild||e&&"number"!==typeof e?(b=g&&"domNode"in g?g.containerNode&&!/after|before|replace/.test(e||"")?g.containerNode:g.domNode:c.byId(b,this.ownerDocument),a.place(this.domNode,b,e),!this._started&&(this.getParent()||{})._started&&this.startup()):g.addChild(this,
e);return this},defer:function(a,b){var c=setTimeout(r.hitch(this,function(){c&&(c=null,this._destroyed||r.hitch(this,a)())}),b||0);return{remove:function(){c&&(clearTimeout(c),c=null);return null}}}})})},"xblox/BlockActions":function(){define("xdojo/declare xdojo/has xide/utils xide/types xaction/DefaultActions xide/factory dojo/promise/all dojo/Deferred xide/views/History xfile/views/FilePreview xblox/views/BlockEditView xide/views/_CIPanelDialog xide/mixins/Electron xblox/model/variables/VariableAssignmentBlock xcf/model/Variable".split(" "),
function(n,m,k,h,d,b,c,g,p,a,e,q,u,w,r){var v={};n=n("xblox.BlockActions",[u],{clipboardCopy:function(){this.currentCutSelection=null;this.currentCopySelection=this.getSelection();v=null;v=this.currentCopySelection;var a=this.getClipboard();if(a){var b=this.blockScope.blocksToJson(this.currentCopySelection),b=JSON.stringify(b,null,2);a.writeText(b)}},download:function(){var a=this.blockScope.blocksToJson(),a=JSON.stringify(a,null,2);k.download("blocks.json",a)},save:function(){var a=this.userData.driver,
b=this.ctx.getFileManager(),c=this.blockScope,e=a.path.replace(".meta.json",".xblox"),a=a.scope;c&&b.setContent(a,e,c.toString(),function(){})},propertyStruct:{currentCIView:null,targetTop:null,_lastItem:null},getPropertyStruct:function(){return this.propertyStruct},setPropertyStruct:function(a){this.propertyStruct=a},onDrop:function(a,c,e,g,d,q){g=a.ctrArgs||{};var r=a.proto,p=!1;a.ctrArgs&&(g.scope=g.scope||c.scope,g.group=g.group||c.group,g.parentId=g.parentId||c.id,p=!0);if(p)c.parentId||q?q&&
c.canAdd&&null!=c.canAdd()&&c.add(r,g,null):(g.parentId=null,b.createBlock(r,g));else if("Moved"===d&&a.scope&&c.scope&&a.scope==c.scope)return a.group=null,c.scope.moveTo(a,c,e,q),a},_paste:function(a,b,c){if(a){var e=this.getSelection()[0],g,d=this.blockScope;if(b){if(!e){for(c=0;c<a.length;c++)e=a[c],e.parentId&&(e._parentOri=""+e.parentId,e.parentId=null);c=d.flatten(a);c=_.uniq(c,!1,function(a){return a.id});b=d.cloneBlocks2(c,this.newRootItemGroup);d.flatten(b);e=null;for(c=0;c<b.length;c++)d=
b[c],e||(e=d);for(c=0;c<a.length;c++)e=a[c],e._parentOri&&(e.parentId=e._parentOri,delete e._parentOri);return b}g=a[0].scope;if(g==e.scope){var q=e.canAdd()||!1,r=g.getBlockById(e.parentId);r||(r=e);c=d.flatten(a);c=_.uniq(c,!1,function(a){return a.id});a=g.cloneBlocks2(c);d=[];for(c=0;c<a.length;c++)g=a[c],g.parentId||(g.parentId=r.id,r.add(g),g=this.onDrop(g,e,!1,b,"Moved",q)),d.push(g);return d}}}},paste:function(a,b,c){if(a){var e=this.getSelection()[0],g,d=this.blockScope;if(b){if(!e){for(c=
0;c<a.length;c++)e=a[c],e.parentId&&(e._parentOri=""+e.parentId,e.parentId=null);c=d.flatten(a);c=_.uniq(c,!1,function(a){return a.id});b=d.cloneBlocks2(c,this.newRootItemGroup);d.flatten(b);e=null;for(c=0;c<b.length;c++){var q=b[c];e||(e=q)}for(c=0;c<a.length;c++)e=a[c],e._parentOri&&(e.parentId=e._parentOri,delete e._parentOri);return b}var r=a[0].scope,q=e.scope;if(r==q){var p=e.canAdd()||!1,h=r.getBlockById(e.parentId);h||(h=e);c=d.flatten(a);a=r.cloneBlocks2(c);d=[];r=e.getTopRoot();for(c=0;c<
a.length;c++){g=a[c];g.getTopRoot();if(g.parentId&&!r){var v=q.getBlockById(g.parentId);v&&_.find(a,{id:v.id})||(g.parentId=null)}g.parentId&&r&&(v=g.getTopRoot(),v.id&&r.id&&v.id!==e.id&&(g.parentId=null));g.parentId||(g.parentId=h.id,h.add(g),g=this.onDrop(g,e,!1,b,"Moved",p));d.push(g)}return d}}}},defaultActionResult:function(a){var b=new g;b.resolve({focus:!0,append:!1,delay:0,select:a,expand:!0});return b},setParentBlock:function(a){a=_.isString(a)?this.collection.getSync(a):a;this.set("collection",
this.collection.filter({parentId:a.id}));this.getHistory().push(a.id)},refreshCurrent:function(){var a=this.getHistory().getNow();a&&this.setParentBlock(a)},runAction:function(a){a=this.getAction(a);if(!a)return null;var c=this.getSelectedRenderer();if(c=c&&c.runAction?c.runAction.apply(this,[a]):null)return c;try{c=function(a,c,e){var d=new g;e=null;e=a==r?b.createBlock(a,{name:"No Title",scope:q.blockScope,group:c}):q.addItem({proto:a,ctrArgs:{scope:q.blockScope,group:c}});var p={select:[e],focus:!0,
append:!1};(a=q.refresh())&&a.then&&a.then(function(){d.resolve(p)});q.grids?_.each(q.grids,function(a){a&&a.refreshRoot&&(a.refreshRoot(),a.refresh(),a.refreshCurrent())}):q.refreshRoot&&(q.refreshRoot(),q.refresh(),q.refreshCurrent());return d};if(-1!==a.command.indexOf("Step/Insert"))return this.addItem(a.item,a);var e=this.getSelection(),d=e[0],q=this;if(a.command==h.ACTION.DOWNLOAD)return this.download();switch(a.command){case "File/Delete":return this.deleteBlock(e);case "File/Reload":return this.refresh();
case "Step/Run":return this.execute(e);case "Step/Stop":return this.stop(e);case "Step/Pause":return this.pause(e);case "Step/Back":return this.goBack();case "Step/Move Left":return this.reParentBlock(-1);case "Step/Move Right":return this.reParentBlock(1);case "Step/Move Up":return this.move(-1),this._itemChanged("moved",d);case "Step/Move Down":return this.move(1),this._itemChanged("moved",d);case "Step/Edit":return this.editBlock();case "Step/Open":return this.openBlock();case "New/Variable":return c(r,
"Variables");case "File/Select/None":return this.deselectAll();case "Step/Enable":return _.each(e,function(a){a&&(a.enabled=!a.enabled);a.enabled?a.activate():a.deactivate();a.set("enabled",a.enabled)}),this.refreshRoot(),this.refreshCurrent(),this.defaultActionResult(e);case "View/Show/Properties":var p=new g,v=this.getRightPanel();(function(){var a=v.getSplitter();if(a){if(a.isCollapsed())return a.expand(),!0;v.collapse();return!1}})()&&this.showProperties(d);p.resolve({focus:!0,append:!1,delay:500,
select:e});this.onAfterAction("View/Show/Properties");return p;case "Step/Help":return this.showHelp(d)}}catch(F){logError(F)}return this.inherited(arguments)},reParentBlock:function(a){var b=this.getSelection()[0];if(!b)return!1;-1==a?b.unparent(this.blockGroup):b.reparent();this.deselectAll();this.refreshRoot();this.refreshCurrent();a=new g;a.resolve({focus:!0,append:!1,delay:100,select:b,expand:!0});return a},move:function(a){var b=this.getSelection();if(b&&b.length){var c=this;_.each(b,function(b){b.move(a)}.bind(this));
c.refresh();this.select(b,null,!0,{focus:!0,delay:10}).then(function(){c.refreshActions()})}},clipboardPaste:function(){var a=this.currentCopySelection||this.currentCutSelection||v,b=this.getClipboard();if(b&&(!a||!a[0])&&(b=b.readText()))try{var c=JSON.parse(b);if(c&&c.length){var e=this.blockScope.owner.getScope(k.createUUID(),null,!1).blocksFromJson(c);e&&e.length&&(a=e)}}catch(B){logError(B,"clipboard extraction from electron failed")}if(a&&a[0])return a=this.paste(a,this,null!=this.currentCutSelection),
c=new g,a&&(this.refreshRoot(),this.refreshCurrent(),c.resolve({focus:!0,append:!1,delay:2,select:a,expand:!0})),c},deleteBlock:function(a){var b=a[0],c=b.getParent(),b=b.next(null,-1)||b.next(null,1)||c;_.each(a,function(a){if(!a)return!1;a.remove&&a.remove();a.destroy&&a.destroy();var b=this.getStore(a);b&&(b.getSync(a[b.idProperty]),b.removeSync(a[b.idProperty]));a._destroyed=!0;a.scope._emit(h.EVENTS.ON_ITEM_REMOVED,{item:a});return!0},this);this.refreshRoot();this.refreshCurrent();a=new g;a.resolve({focus:!0,
append:!1,select:b});return a},editBlock2:function(a,b,c){function g(b){_.each(b,function(b){d.onCIChanged&&d.onCIChanged(b.ci,a,b.oldValue,b.newValue,b.ci.dst,r,b.props)});p.showProperties(a,!0)}if(a&&a.canEdit()){var d=this;b="Edit "+a.name;var r=a.getFields(),p=this;return(new q({title:b,containerClass:"CIDialog",onOk:function(a){g(a);this.headDfd.resolve(a)},onCancel:function(a){this.headDfd.resolve(a)},cis:r,CIViewClass:e,CIViewOptions:{delegate:this,resizeToParent:!0,ciSort:!0,options:{groupOrder:{General:1,
Send:2,Advanced:4,Description:5}},cis:r}})).show()}},_getText:function(a){try{var b;dojo.xhrGet({url:a,sync:!0,handleAs:"text",cache:!1,load:function(a){b=a}});return b||"No help avaiable"}catch(z){return!1}},_helpCache:{},getHelp:function(a){a=k.replaceAll(".","/",a.declaredClass);a=a.replace("xcf","xblox");a="xblox/docs/"+a.replace("xblox/model/","");var b=this._helpCache[a];if(!1===b)return!1;if(_.isString(b))return b;b=this._getText(require.toUrl(a)+".md");if(!b)return!1;"undefined"!==typeof showdown&&
(b=(new showdown.Converter).makeHtml(b));return this._helpCache[a]=b},showHelp:function(b,c){function e(a,b){(b=d.getHelp(b))&&a.html(b);a.addClass("xbloxHelp")}var g=this.row(b).element,d=this;if(this._preview)this._preview.open(),e(this._preview.preview,b);else{var q=new a({node:$(g),parent:$(g),ctx:d.ctx,container:c?c.containerNode:null,title:"Help"});c?q.buildRenderingEmbedded():q.buildRendering();q.init();q.exec();this._preview=q;this._preview.handler=this;q.onOpened=function(){e(q.preview,b)};
this.add(q);d._on("selectionChanged",function(a){0!=d._preview.getstate()&&(a=d.getSelectedItem())&&(q.item=a,e(d._preview.preview,a))})}},getHistory:function(){this._history||(this._history=new p);return this._history},goBack:function(){function a(a){r.resolve({select:a?a:q.getRows()[0],focus:!0,append:!1,delay:250})}var b=this.collection,c=this.getHistory(),e=null,d=c.getNow(),q=this,r=new g;c.pop();(e=c.getNow())&&b.getSync(e)?(this.set("collection",this.collection.filter({parentId:e})),a()):(b.reset(),
this.refreshRoot(),a(b.getSync(d)));return r},openBlock:function(a,b,c){if(a=this.getSelection()[0]||a){b=new g;var e=this;this.setParentBlock(a);c=!0;(a=e.getRows()[0])||setTimeout(function(){e.contentNode.focus()},10);b.resolve({select:!1!==c?a:null,focus:!0,append:!1,delay:1});return b}},editBlock:function(a,b,c){if(a=this.getSelection()[0]||a){var e=new g;a.getChildren();if(b=this.editBlock2(a,null))return b.then(function(){e.resolve({select:[a],focus:!0,append:!1,delay:1})}),e;e.resolve()}},
execute:function(a){var b=this,e=[],g=[],d=h.EVENTS;a=_.isArray(a)?a:[a];_.each(a,function(a){var c=a._on(d.ON_RUN_BLOCK,function(c){b.mark(b.toNode(c),"activeBlock",a)}),q=a._on(d.ON_RUN_BLOCK_SUCCESS,function(c){b.mark(b.toNode(c),"successBlock",a)}),r=a._on(d.ON_RUN_BLOCK_FAILED,function(c){b.mark(b.toNode(c),"failedBlock",a)});if(a&&a.scope){try{var p=a.scope.solveBlock(a,{highlight:!0,force:!0,listener:b});e.push(p)}catch(H){logError(H,"excecuting block -  "+a.name+" failed! : ")}g=g.concat([c,
r,q]);return!0}console.error("have no scope")});c(e).then(function(){_.invoke(g,"remove")})},stop:function(a){a=_.isArray(a)?a:[a];_.each(a,function(a){if(a&&a.scope){try{a.stop(!1)}catch(z){logError(z,"stop block -  "+a.name+" failed! : ")}return!0}console.error("have no scope")})},pause:function(a){a=_.isArray(a)?a:[a];_.each(a,function(a){if(a&&a.scope){try{a.pause(!0)}catch(z){logError(z,"pause block -  "+a.name+" failed! : ")}return!0}console.error("have no scope")})},getAddActions:function(a){var c=
this.inherited(arguments)||[];a=a||{};c=b.getAllBlocks(this.blockScope,this,a,this.blockGroup,!1);this.publish(h.EVENTS.ON_BUILD_BLOCK_INFO_LIST_END,{items:c,view:this,owner:this.owner,item:a,group:this.blockGroup,scope:this.blockScope});this._emit(h.EVENTS.ON_BUILD_BLOCK_INFO_LIST_END,{items:c,view:this,owner:this.owner});return c},getBlockActions:function(a){function b(){var a=r.getSelection();return a&&a.length&&a[0]?a:null}function c(){return b()?!1:!0}function e(){var a=b();if(!a)return!0;a=
a[0];return"Step/Move Up"===this.command?!a.canMove(null,-1):!a.canMove(null,1)}function g(a,b){for(var c=0;c<b.length;c++){var e=b[c];u=e.name;var q=a+"/"+u,p=!_.isEmpty(e.items);d.push(r.createAction({label:u,command:q,icon:e.iconClass,tab:"Home",group:"Insert",mixin:k.mixin({item:e,quick:!0},v)}));p&&g(q,e.items)}}var d=this.inherited(arguments)||[],q=h.ACTION_ICON,r=this,p=r.getActionStore(),v={addPermission:!0};d.push(r.createAction({label:"Save",command:"File/Save",icon:"fa-save",tab:"Home",
group:"File",keycombo:["ctrl s"],mixin:k.mixin({quick:!0},v)}));d.push(r.createAction({label:"Save As",command:"File/Save As",icon:"fa-save",tab:"Home",group:"File",mixin:v}));d.push(this.createAction({label:"Open",command:"Step/Open",icon:"fa-folder-open",keycombo:["ctrl enter"],tab:"Home",group:"Navigation",shouldDisable:c,mixin:k.mixin({quick:!0},v)}));d.push(r.createAction({label:"Go up",command:"Step/Back",icon:q.GO_UP,tab:"Home",group:"Navigation",keycombo:["backspace"],mixin:{quick:!0}}));
d.push(r.createAction({label:"Run",command:"Step/Run",icon:"text-success fa-play",tab:"Home",group:"Step",keycombo:["r"],shouldDisable:c,mixin:k.mixin({quick:!0},v)}));d.push(r.createAction({label:"Stop",command:"Step/Stop",icon:"text-warning fa-stop",tab:"Home",group:"Step",keycombo:["s"],shouldDisable:c,mixin:k.mixin({quick:!0},v)}));d.push(r.createAction({label:"Pause",command:"Step/Pause",icon:"text-info fa-pause",tab:"Home",group:"Step",keycombo:["p"],shouldDisable:c,mixin:k.mixin({quick:!0},
v)}));d.push(r.createAction({label:"MoveUp",command:"Step/Move Up",icon:"text-info fa-arrow-up",tab:"Home",group:"Move",keycombo:["alt up"],shouldDisable:e,mixin:k.mixin({quick:!0},v)}));d.push(r.createAction({label:"MoveDown",command:"Step/Move Down",icon:"text-info fa-arrow-down",tab:"Home",group:"Move",keycombo:["alt down"],shouldDisable:e,mixin:k.mixin({quick:!0},v)}));d.push(r.createAction({label:"MoveLeft",command:"Step/Move Left",icon:"text-info fa-arrow-left",tab:"Home",group:"Move",keycombo:["alt left"],
shouldDisable:e,mixin:k.mixin({quick:!0},v)}));d.push(r.createAction({label:"MoveRight",command:"Step/Move Right",icon:"text-info fa-arrow-right",tab:"Home",group:"Move",keycombo:["alt right"],shouldDisable:function(){var a=r.getSelection();return a?(a=a[0])?"Step/Move Left"===this.command?!a.getParent():a.getParent():!0:!0},mixin:k.mixin({quick:!0},v)}));d.push(r.createAction({label:"Help",command:"Step/Help",icon:"fa-question",tab:"Home",group:"Step",keycombo:["h"],shouldDisable:c,mixin:v}));d.push(r.createAction({label:"On",
command:"Step/Enable",icon:"fa-toggle-off",tab:"Home",group:"Step",keycombo:["alt o"],shouldDisable:c,mixin:k.mixin({actionType:"multiToggle",quick:!0},v),onCreate:function(a){a.value=!0;a.setVisibility(h.ACTION_VISIBILITY.RIBBON,{group:"Common"})},onChange:function(a,b){(a=r.getSelectedItem())&&a.set("enabled",b);this.value=b;r.refreshActions()}}));d.push(this.createAction({label:"Variable",command:"New/Variable",icon:"fa-code",tab:"Home",group:"Insert",mixin:k.mixin({quick:!0},v)}));d.push(this.createAction({label:"Edit",
command:"Step/Edit",icon:q.EDIT,keycombo:["f4","enter","dblclick"],tab:"Home",group:"Step",shouldDisable:c,mixin:k.mixin({quick:!0},v)}));d.push(r.createAction({label:"Properties",command:"View/Show/Properties",icon:"fa-gears",tab:"Home",group:"Show",keycombo:["alt p"],shouldDisable:c,mixin:k.mixin({actionType:"multiToggle",value:!0},v),onCreate:function(a){r.getRightPanel().getSplitter();a.value=!0},onChange:function(a,b){a=r.getRightPanel();(b=a.getSplitter())?b.isCollapsed()?(b.expand(),a=!0):
(a.collapse(),a=!1):a=void 0;a&&r.showProperties(null);r.onAfterAction("View/Show/Properties");return!0}}));var q=this.getAddActions(),u="";d.push(r.createAction({label:"Add Block",command:"Step/Insert",icon:"fa-plus",tab:"Home",group:"Insert",mixin:k.mixin({quick:!0},v)}));g("Step/Insert",q);d.push(r.createAction({label:"Set Variable",command:"Step/Insert/Set Variable",icon:"fa-paper-plane",tab:"Home",group:"Step",mixin:k.mixin({global:!0,quick:!0,getActions:function(a,b){a=r.blockScope.getVariables();
b=[];for(var c=0;c<a.length;c++){var e=a[c];b.push(r.createAction({label:e.name,command:"Step/Insert/Set Variable/"+e.name,icon:"fa-paper-plane",tab:"Home",group:"Step",mixin:k.mixin({item:e,proto:w,custom:!0,ctrArgs:{variable:e.id,variableId:e.id,scope:r.blockScope,value:"0"}},v)}))}return b}},v)}));d.push(r.createAction({label:"None",command:"Step/Insert/Set Variable/None",icon:"fa-paper-plane",tab:"Home",group:"Step",mixin:k.mixin({proto:w,item:w,quick:!0,ctrArgs:{scope:this.blockScope,value:"0"}},
v)}));this._emit("onAddActions",{actions:d,permissions:a,store:p});return d}});n.BLOCK_INSERT_ROOT_COMMAND="Step/Insert";return n})},"xide/widgets/FileEditor":function(){define(["dcl/dcl","xide/widgets/WidgetBase","xide/utils","xide/editor/Registry"],function(n,m,k,h){return n(m,{declaredClass:"xide.widgets.FileEditor",templateString:"\x3cdiv style\x3d'height: inherit;'\x3e\x3c/div\x3e",instance:null,resize:function(){this.instance&&(k.resizeTo(this.domNode,this.domNode.parentNode,!0,!0),k.resizeTo(this.instance.domNode,
this.domNode,!0,!0),this.instance.resize())},createWidgets:function(d){var b=d.editor,c=d.editorArgs,g=d.editorItem;d=d.editorOverrides;var p=h.getEditor(b),a=this;if(p)try{p.onEdit(g,c,d,this.domNode).then(function(b){a.instance=b})}catch(e){debugger}else console.error("no such editor! "+b)},startup:function(){this.createWidgets(this.userData);this.onReady()}})})},"dijit/popup":function(){define("dojo/_base/array dojo/aspect dojo/_base/declare dojo/dom dojo/dom-attr dojo/dom-construct dojo/dom-geometry dojo/dom-style dojo/has dojo/keys dojo/_base/lang dojo/on ./place ./BackgroundIframe ./Viewport ./main dojo/touch".split(" "),
function(n,m,k,h,d,b,c,g,p,a,e,q,u,w,r,v){function x(){this._popupWrapper&&(b.destroy(this._popupWrapper),delete this._popupWrapper)}k=k(null,{_stack:[],_beginZIndex:1E3,_idGen:1,_repositionAll:function(){if(this._firstAroundNode){var a=this._firstAroundPosition,b=c.position(this._firstAroundNode,!0),g=b.x-a.x,a=b.y-a.y;if(g||a)for(this._firstAroundPosition=b,b=0;b<this._stack.length;b++){var d=this._stack[b].wrapper.style;d.top=parseFloat(d.top)+a+"px";"auto"==d.right?d.left=parseFloat(d.left)+g+
"px":d.right=parseFloat(d.right)-g+"px"}this._aroundMoveListener=setTimeout(e.hitch(this,"_repositionAll"),g||a?10:50)}},_createWrapper:function(a){var c=a._popupWrapper,e=a.domNode;c||(c=b.create("div",{"class":"dijitPopup",style:{display:"none"},role:"region","aria-label":a["aria-label"]||a.label||a.name||a.id},a.ownerDocumentBody),c.appendChild(e),e=e.style,e.display="",e.visibility="",e.position="",e.top="0px",a._popupWrapper=c,m.after(a,"destroy",x,!0),"ontouchend"in document&&q(c,"touchend",
function(a){/^(input|button|textarea)$/i.test(a.target.tagName)||a.preventDefault()}),c.dojoClick=!0);return c},moveOffScreen:function(a){var b=this._createWrapper(a);a=c.isBodyLtr(a.ownerDocument);var e={visibility:"hidden",top:"-9999px",display:""};e[a?"left":"right"]="-9999px";e[a?"right":"left"]="auto";g.set(b,e);return b},hide:function(a){var b=this._createWrapper(a);g.set(b,{display:"none",height:"auto",overflowY:"visible",border:""});a=a.domNode;"_originalStyle"in a&&(a.style.cssText=a._originalStyle)},
getTopPopup:function(){for(var a=this._stack,b=a.length-1;0<b&&a[b].parent===a[b-1].widget;b--);return a[b]},open:function(b){for(var v=this._stack,k=b.popup,x=k.domNode,A=b.orient||["below","below-alt","above","above-alt"],m=b.parent?b.parent.isLeftToRight():c.isBodyLtr(k.ownerDocument),n=b.around,G=b.around&&b.around.id?b.around.id+"_dropdown":"popup_"+this._idGen++;v.length&&(!b.parent||!h.isDescendant(b.parent.domNode,v[v.length-1].widget.domNode));)this.close(v[v.length-1].widget);var D=this.moveOffScreen(k);
k.startup&&!k._started&&k.startup();var H,J=c.position(x);if("maxHeight"in b&&-1!=b.maxHeight)H=b.maxHeight||Infinity;else{H=r.getEffectiveBox(this.ownerDocument);var Q=n?c.position(n,!1):{y:b.y-(b.padding||0),h:2*(b.padding||0)};H=Math.floor(Math.max(Q.y,H.h-(Q.y+Q.h)))}J.h>H&&(J=g.getComputedStyle(x),g.set(D,{overflowY:"scroll",height:H+"px",border:J.borderLeftWidth+" "+J.borderLeftStyle+" "+J.borderLeftColor}),x._originalStyle=x.style.cssText,x.style.border="none");d.set(D,{id:G,style:{zIndex:this._beginZIndex+
v.length},"class":"dijitPopup "+(k.baseClass||k["class"]||"").split(" ")[0]+"Popup",dijitPopupParent:b.parent?b.parent.id:""});0==v.length&&n&&(this._firstAroundNode=n,this._firstAroundPosition=c.position(n,!0),this._aroundMoveListener=setTimeout(e.hitch(this,"_repositionAll"),50));p("config-bgIframe")&&!k.bgIframe&&(k.bgIframe=new w(D));G=k.orient?e.hitch(k,"orient"):null;A=n?u.around(D,n,A,m,G):u.at(D,b,"R"==A?["TR","BR","TL","BL"]:["TL","BL","TR","BR"],b.padding,G);D.style.visibility="visible";
x.style.visibility="visible";x=[];x.push(q(D,"keydown",e.hitch(this,function(c){if(c.keyCode==a.ESCAPE&&b.onCancel)c.stopPropagation(),c.preventDefault(),b.onCancel();else if(c.keyCode==a.TAB&&(c.stopPropagation(),c.preventDefault(),(c=this.getTopPopup())&&c.onCancel))c.onCancel()})));k.onCancel&&b.onCancel&&x.push(k.on("cancel",b.onCancel));x.push(k.on(k.onExecute?"execute":"change",e.hitch(this,function(){var a=this.getTopPopup();if(a&&a.onExecute)a.onExecute()})));v.push({widget:k,wrapper:D,parent:b.parent,
onExecute:b.onExecute,onCancel:b.onCancel,onClose:b.onClose,handlers:x});if(k.onOpen)k.onOpen(A);return A},close:function(a){for(var b=this._stack;a&&n.some(b,function(b){return b.widget==a})||!a&&b.length;){var c=b.pop(),e=c.widget,g=c.onClose;e.bgIframe&&(e.bgIframe.destroy(),delete e.bgIframe);if(e.onClose)e.onClose();for(var d;d=c.handlers.pop();)d.remove();e&&e.domNode&&this.hide(e);g&&g()}0==b.length&&this._aroundMoveListener&&(clearTimeout(this._aroundMoveListener),this._firstAroundNode=this._firstAroundPosition=
this._aroundMoveListener=null)}});return v.popup=new k})},"dijit/Dialog":function(){define(["dojo/_base/declare"],function(n){return n(null,{})})},"xcf/types":function(){define(["dojo/_base/declare"],function(n){return n("xcf.types",null,{})})},"xfile/views/FilePreview":function(){define("dcl/dcl xide/types xide/utils xide/mixins/EventedMixin xide/widgets/_Widget dojo/cache dojo/Deferred dijit/registry xide/editor/Default xaction/DefaultActions".split(" "),function(n,m,k,h,d,b,c,g,p,a){var e=[function(a){var b=
["image/jpeg","image/png","image/gif"],c=a.preview;$.each(navigator.mimeTypes,function(a,c){a=c.type;0===a.indexOf("image/")&&$.inArray(a,b)&&b.push(a)});c.bind("update",function(e){var g=e.file,d;a.opened()&&-1!==$.inArray(g.mime,b)&&(e.stopImmediatePropagation(),e=null,a.resizeToPreview&&(e={width:c.width()}),d=$("\x3cimg/\x3e").hide().appendTo(c).load(function(){setTimeout(function(){var b=(d.width()/d.height()).toFixed(2);c.bind("changesize",function(){var a=parseInt(c.width()),e=parseInt(c.height()),
g;b<(a/e).toFixed(2)?(g=e,a=Math.floor(g*b)):g=Math.floor(a/b);d.width(a).height(g).css("margin-top",g<e?Math.floor((e-g)/2):0)}).trigger("changesize");a.hideinfo();d.fadeIn(100)},1)}),d.attr("src",a.fm.url(g,null,e)))})},function(a){var b=["text/html","application/xhtml+xml"],c=a.preview;c.bind("update",function(e){var g=e.file;a.opened()&&-1!==$.inArray(g.mime,b)&&(e.stopImmediatePropagation(),a.ctx.getFileManager().getContent(g.mount,g.path,function(b){a.hideinfo();doc=$('\x3ciframe class\x3d"elfinder-quicklook-preview-html"/\x3e').appendTo(c)[0].contentWindow.document;
doc.open();doc.write(b);doc.close()}))})},function(b){var c=b.preview,e="application/x-empty application/javascript application/xhtml+xml audio/x-mp3-playlist application/x-web-config application/docbook+xml application/x-php application/x-perl application/x-awk application/x-config application/x-csh application/xml application/x-empty text/html text/x-c text/x-php text/plain text/x-c++ text/x-lisp".split(" ");c.bind("update",function(g){var d=g.file,q=d.mime;if(b.opened()&&(0===q.indexOf("text/")||
-1!==$.inArray(q,e))&&(g.stopImmediatePropagation(),b.useAce)){b.hideinfo();g=$('\x3cdiv class\x3d"elfinder-quicklook-preview-text-wrapper"\x3e\x3c/div\x3e');g.appendTo(c);var r=b._editor,q=r;if(!r&&(r=p.Implementation.open(d,g[0],b.editorOptions,!1,b),b._editor=r,b.add(r,null,!1),a.hasAction(b.editorOptions.permissions,m.ACTION.TOOLBAR))){var h=r.getToolbar();h&&$(h.domNode).addClass("bg-opaque")}q&&(g.append(r.domNode),r.set("item",d));c.bind("changesize",function(){parseInt(c.width());parseInt(c.height());
k.resizeTo(r.domNode,c[0],!0,!0);r.resize()})}})},function(a){var b=a.preview,c=!1,c=!1;$.each(navigator.plugins,function(a,b){$.each(b,function(a,b){if("application/pdf"==b.type)return!(c=!0)})});c&&b.bind("update",function(c){var e=c.file,g;a.opened()&&"application/pdf"==e.mime&&(c.stopImmediatePropagation(),b.one("change",function(){g.unbind("load").remove()}),g=$('\x3ciframe class\x3d"elfinder-quicklook-preview-pdf"/\x3e').hide().appendTo(b).load(function(){a.hideinfo();g.show()}).attr("src",
a.fm.url(e)))})},function(a){var b=a.fm,c=a.preview,e=!1;$.each(navigator.plugins,function(a,b){$.each(b,function(a,b){if("application/x-shockwave-flash"==b.type)return!(e=!0)})});e&&c.bind("update",function(e){var g=e.file;a.opened()&&"application/x-shockwave-flash"==g.mime&&(e.stopImmediatePropagation(),a.hideinfo(),c.append($('\x3cembed class\x3d"elfinder-quicklook-preview-flash" pluginspage\x3d"http://www.macromedia.com/go/getflashplayer" src\x3d"'+b.url(g)+'" quality\x3d"high" type\x3d"application/x-shockwave-flash" /\x3e')))})},
function(a){var b=a.preview,c=!!a.options.autoplay,e={"audio/mpeg":"mp3","audio/mpeg3":"mp3","audio/mp3":"mp3","audio/x-mpeg3":"mp3","audio/x-mp3":"mp3","audio/x-wav":"wav","audio/wav":"wav","audio/x-m4a":"m4a","audio/aac":"m4a","audio/mp4":"m4a","audio/x-mp4":"m4a","audio/ogg":"ogg"},g;b.bind("update",function(d){if(a.opened()){var q=d.file;a.support.audio[e[q.mime]]&&(d.stopImmediatePropagation(),g=$('\x3caudio class\x3d"elfinder-quicklook-preview-audio" controls preload\x3d"auto" autobuffer\x3e\x3csource src\x3d"'+
a.fm.url(q)+'" /\x3e\x3c/audio\x3e').appendTo(b),c&&g[0].play())}}).bind("change",function(){g&&g.parent().length&&(g[0].pause(),g.remove(),g=null)})},function(a){var b=a.preview,c=!!a.options.autoplay,e={"video/mp4":"mp4","video/x-m4v":"mp4","video/ogg":"ogg","application/ogg":"ogg","video/webm":"webm"},g;b.bind("update",function(d){if(a.opened()){var q=d.file;a.support.video[e[q.mime]]&&(d.stopImmediatePropagation(),a.hideinfo(),g=$('\x3cvideo class\x3d"elfinder-quicklook-preview-video" controls preload\x3d"auto" autobuffer\x3e\x3csource src\x3d"'+
a.fm.url(q)+'" /\x3e\x3c/video\x3e').appendTo(b),c&&g[0].play())}}).bind("change",function(){g&&g.parent().length&&(g[0].pause(),g.remove(),g=null)})},function(a){var b=a.preview,c=[],e;a.opened()&&($.each(navigator.plugins,function(a,b){$.each(b,function(a,b){0!==b.type.indexOf("audio/")&&0!==b.type.indexOf("video/")||c.push(b.type)})}),b.bind("update",function(g){if(a.opened()){var d=g.file,q=d.mime;-1!==$.inArray(d.mime,c)&&(g.stopImmediatePropagation(),(g=0===q.indexOf("video/"))&&a.hideinfo(),
e=$('\x3cembed src\x3d"'+a.fm.url(d)+'" type\x3d"'+q+'" class\x3d"elfinder-quicklook-preview-'+(g?"video":"audio")+'"/\x3e').appendTo(b))}}).bind("change",function(){e&&e.parent().length&&(e.remove(),e=null)}))}];h=n([d.dcl,h.dcl],{resizeToPreview:!0,useAce:!0,registerEditors:!1,editorPermissions:[],container:null,destroy:function(){this.window.empty();k.destroy(this.window[0]);this.inherited(arguments)},init:function(){var a=this.options={autoplay:!0,jplayer:"extensions/jplayer",ui:"button"},b=this,
c=this.window,g=this.preview,d=this.container;width=0<a.width?parseInt(a.width):450;height=0<a.height?parseInt(a.height):300;d||c.appendTo("body").zIndex(20);$(document).keydown(function(a){27==a.keyCode&&b.opened()&&c.trigger("close")});!d&&$.fn.resizable&&c.resizable({handles:"se",minWidth:350,minHeight:120,resize:function(){g.trigger("changesize")}});$.each(e||[],function(a,c){"function"==typeof c&&new c(b)});g.bind("update",function(){b.info.show()})},buildRenderingEmbedded:function(){var a=this,
b=this.navicon,e=this.container?$(this.container):null;$('\x3cdiv class\x3d"elfinder-quicklook-title" style\x3d"display: none"\x3e'+a.title+"\x3c/div\x3e");var g=$("\x3cdiv/\x3e"),d=$('\x3cdiv class\x3d"elfinder-quicklook-info"/\x3e');a.openDfd=new c;a.fsicon=$('\x3cdiv class\x3d"'+b+" "+b+' fa-2x fa-arrows-alt"/\x3e').mousedown(function(c){var e=a.window,g=e.is("."+a.fullscreen),d=$(window);c.stopPropagation();g?(e.css(e.data("position")).unbind("mousemove"),d.unbind("scroll.elfinder-finder").trigger(a.resize).unbind(a.resize),
a.navbar.unbind("mouseenter").unbind("mousemove")):(e.data("position",{left:e.css("left"),top:e.css("top"),width:e.width(),height:e.height()}).css({width:"100%",height:"100%"}),$(window).bind("scroll.elfinder-finder",function(){e.css({left:parseInt($(window).scrollLeft())+"px",top:parseInt($(window).scrollTop())+"px"})}).bind(a.resize,function(b){a.preview.trigger("changesize")}).trigger("scroll.elfinder-finder").trigger(a.resize),e.bind("mousemove",function(b){a.navbar.stop(!0,!0).show().delay(3E3).fadeOut("slow")}).mousemove(),
a.navbar.mouseenter(function(){a.navbar.stop(!0,!0).show()}).mousemove(function(a){a.stopPropagation()}));a.navbar.attr("style","").draggable(g?"destroy":{});e.toggleClass(a.fullscreen);$(this).toggleClass(b+"-fullscreen-off");parent||(parent=$(".xapp"))});a.navbar=$('\x3cdiv class\x3d"" style\x3d"display: none;"/\x3e');a.preview=$('\x3cdiv class\x3d"elfinder-quicklook-preview ui-helper-clearfix"/\x3e').bind("change",function(b){a.info.attr("style","").hide();g.removeAttr("class").attr("style","");
d.html("")}).bind("update",function(b){var c=b.file;c?(!c.read&&b.stopImmediatePropagation(),a.preview.unbind("changesize").trigger("change").children().remove(),a.info.delay(100).fadeIn(10)):b.stopImmediatePropagation()});a.info=$('\x3cdiv class\x3d"elfinder-quicklook-info-wrapper"/\x3e').append(g).append(d);a.window=$('\x3cdiv id\x3d"'+a.id+'" class\x3d"ui-helper-reset ui-widget elfinder-quicklook widget bg-opaque" style\x3d""/\x3e').click(function(a){a.stopPropagation()}).append(a.preview).append(a.info.hide()).bind("open",
function(b){a._open=!0;b=a.window;var c=a.node;a.closed()&&(a.update(1,a.value),a.navbar.attr("style",""),a.state=1,c&&c.trigger("scrolltoview"),b.css(a.closedCss(c)).show().animate(a.openedCss(),550,function(){a.state=2;a.update(2,a.value);a.openDfd.resolve()}))}).bind("close",function(b){var c=a.window,e=a.preview.trigger("change");b={};var g=function(){a._open=!1;a.state=0;c.hide();e.children().remove();a.update(0,a.value)};a.opened()&&(state=1,c.is("."+a.fullscreen)&&a.fsicon.mousedown(),b.length?
c.animate(a.closedCss(b),500,g):g())});e&&e.append(a.window);e=this.supportTest;a.support={audio:{ogg:e('audio/ogg; codecs\x3d"vorbis"'),mp3:e("audio/mpeg;"),wav:e('audio/wav; codecs\x3d"1"'),m4a:e("audio/x-m4a;")||e("audio/aac;")},video:{ogg:e('video/ogg; codecs\x3d"theora"'),webm:e('video/webm; codecs\x3d"vp8, vorbis"'),mp4:e('video/mp4; codecs\x3d"avc1.42E01E"')||e('video/mp4; codecs\x3d"avc1.42E01E, mp4a.40.2"')}}},buildRendering:function(){var a=this,b=this.navicon,e=this.container?$(this.container):
null,g=$('\x3cdiv class\x3d"elfinder-quicklook-title"\x3e'+a.title+"\x3c/div\x3e"),d=$("\x3cdiv/\x3e"),p=$('\x3cdiv class\x3d"elfinder-quicklook-info"/\x3e');a.openDfd=new c;a.fsicon=$('\x3cdiv class\x3d"'+b+" "+b+' fa-2x fa-arrows-alt"/\x3e').mousedown(function(c){var e=a.window,g=e.is("."+a.fullscreen),d=$(window);c.stopPropagation();g?(e.css(e.data("position")).unbind("mousemove"),d.unbind("scroll.elfinder-finder").trigger(a.resize).unbind(a.resize),a.navbar.unbind("mouseenter").unbind("mousemove")):
(e.data("position",{left:e.css("left"),top:e.css("top"),width:e.width(),height:e.height()}).css({width:"100%",height:"100%"}),$(window).bind("scroll.elfinder-finder",function(){e.css({left:parseInt($(window).scrollLeft())+"px",top:parseInt($(window).scrollTop())+"px"})}).bind(a.resize,function(b){a.preview.trigger("changesize")}).trigger("scroll.elfinder-finder").trigger(a.resize),e.bind("mousemove",function(b){a.navbar.stop(!0,!0).show().delay(3E3).fadeOut("slow")}).mousemove(),a.navbar.mouseenter(function(){a.navbar.stop(!0,
!0).show()}).mousemove(function(a){a.stopPropagation()}));a.navbar.attr("style","").draggable(g?"destroy":{});e.toggleClass(a.fullscreen);$(this).toggleClass(b+"-fullscreen-off");parent||(parent=$(".xapp"))});a.navbar=$('\x3cdiv class\x3d"elfinder-quicklook-navbar"/\x3e').append($('\x3cdiv class\x3d"'+b+" "+b+' fa-2x fa-arrow-left"/\x3e').mousedown(function(){a.navtrigger(37)})).append(a.fsicon).append($('\x3cdiv class\x3d"'+b+" "+b+' fa-2x fa-arrow-right"/\x3e').mousedown(function(){a.navtrigger(39)})).append('\x3cdiv class\x3d"elfinder-quicklook-navbar-separator"/\x3e').append($('\x3cdiv class\x3d"'+
b+" "+b+'-close"/\x3e').mousedown(function(){a.window.trigger("close")}));a.preview=$('\x3cdiv class\x3d"elfinder-quicklook-preview ui-helper-clearfix"/\x3e').bind("change",function(b){a.info.attr("style","").hide();d.removeAttr("class").attr("style","");p.html("")}).bind("update",function(b){var c=b.file;c?(!c.read&&b.stopImmediatePropagation(),a.preview.unbind("changesize").trigger("change").children().remove(),a.info.delay(100).fadeIn(10)):b.stopImmediatePropagation()});a.info=$('\x3cdiv class\x3d"elfinder-quicklook-info-wrapper"/\x3e').append(d).append(p);
a.window=$('\x3cdiv id\x3d"'+a.id+'" class\x3d"ui-helper-reset ui-widget elfinder-quicklook widget bg-opaque" style\x3d"position:absolute"/\x3e').click(function(a){a.stopPropagation()}).append($('\x3cdiv class\x3d"elfinder-quicklook-titlebar"/\x3e').append(g).append($('\x3cspan class\x3d"fa-close" style\x3d"margin-left: 4px; color: white; font-size: 16px; text-align: center; position: absolute; left: 0px; top: 2px;"/\x3e').mousedown(function(b){b.stopPropagation();a.window.trigger("close")}))).append(a.preview.add(a.navbar)).append(a.info.hide()).draggable({handle:"div.elfinder-quicklook-titlebar"}).bind("open",
function(b){a._open=!0;b=a.window;var c=a.node;a.closed()&&(a.update(1,a.value),a.navbar.attr("style",""),a.state=1,c.trigger("scrolltoview"),b.css(a.closedCss(c)).show().animate(a.openedCss(),550,function(){a.state=2;a.update(2,a.value);a.openDfd.resolve()}))}).bind("close",function(b){var c=a.window,e=a.preview.trigger("change");b={};var g=function(){a._open=!1;a.state=0;c.hide();e.children().remove();a.update(0,a.value)};a.opened()&&(state=1,c.is("."+a.fullscreen)&&a.fsicon.mousedown(),b.length?
c.animate(a.closedCss(b),500,g):g())});e&&e.append(a.window);e=this.supportTest;a.support={audio:{ogg:e('audio/ogg; codecs\x3d"vorbis"'),mp3:e("audio/mpeg;"),wav:e('audio/wav; codecs\x3d"1"'),m4a:e("audio/x-m4a;")||e("audio/aac;")},video:{ogg:e('video/ogg; codecs\x3d"theora"'),webm:e('video/webm; codecs\x3d"vp8, vorbis"'),mp4:e('video/mp4; codecs\x3d"avc1.42E01E"')||e('video/mp4; codecs\x3d"avc1.42E01E, mp4a.40.2"')}}},constructor:function(a){k.mixin(this,a)},editorOptions:{permissions:[m.ACTION.TOOLBAR,
m.ACTION.RELOAD,"Editor/Settings","View/Increase Font Size","View/Decrease Font Size","View/Themes","File/Search"]},title:"Preview",width:450,height:300,fm:null,state:0,navicon:"elfinder-quicklook-navbar-icon",fullscreen:"elfinder-quicklook-fullscreen",parent:null,cwd:null,resize:"resize.elfinder-finder",alwaysEnabled:!0,value:null,handlers:{select:function(){this.update(void 0,this.fm.selectedFiles()[0])},error:function(){self.window.is(":visible")&&self.window.data("hash","").trigger("close")},
"searchshow searchhide":function(){this.opened()&&this.window.trigger("close")}},shortcuts:[{pattern:"space"}],navtrigger:function(a){$(document).trigger($.Event("keydown",{keyCode:a,ctrlKey:!1,shiftKey:!1,altKey:!1,metaKey:!1}))},closedCss:function(a){return{opacity:0,width:20,height:20,top:a?a.offset().top+"px":0,left:a?a.offset().left+"px":0}},openedCss:function(){var a=this.container?$(this.container):null,b=a||$(window),c=a?"100%":Math.min(this.width,b.width()-10),a=a?"100%":Math.min(this.height,
b.height()-80);return{opacity:1,width:c,height:a,top:parseInt((b.height()-a-60)/2+b.scrollTop()),left:parseInt((b.width()-c)/2+b.scrollLeft())}},supportTest:function(a){var b=document.createElement(a.substr(0,a.indexOf("/"))),c=!1;try{c=b.canPlayType&&b.canPlayType(a)}catch(r){}return c&&""!==c&&"no"!=c},changeView:function(a){this.currentView&&(k.destroy(this.currentView),this.currentView.destroy&&this.currentView.destroy())},update:function(a){this._open=a;this._emit("changeState",a);if(1==a&&this.onAnimate)this.onAnimate();
if(2==a&&this.onOpened)this.onOpened();if(0==a&&this.onClosed)this.onClosed()},closed:function(){return 0==this.state},opened:function(){return 2==this.state},bind:function(a,b){var c;if("function"==typeof b)for(a=(""+a).toLowerCase().split(/\s+/),c=0;c<a.length;c++)void 0===listeners[a[c]]&&(listeners[a[c]]=[]),listeners[a[c]].push(b);return this},one:function(a,b){var c=this,e=$.proxy(b,function(a){setTimeout(function(){c.unbind(a.type,e)},3);return b.apply(this,arguments)});return this.bind(a,
e)},open:function(a){var b=this;a=b.window;var e=b.node;b._open=!0;b.openDfd=new c;b.closed()?(b.navbar.attr("style",""),b._open=!0,b.state=1,e&&e.trigger("scrolltoview"),a.css(b.closedCss(e)).show().animate(b.openedCss(),550,function(){b.state=2;b.update(1,b.value);b.openDfd.resolve()})):b.openDfd.resolve();return b.openDfd},close:function(a){this._open=!1;var b=this,c=b.window,e=b.preview.trigger("change");a=b.node;var g=function(){b.state=0;c.hide();e.children().remove();b.update(0,b.value);b.closeDfd&&
b.closeDfd.resolve()};b.opened()&&(b.state=1,c.is("."+b.fullscreen)&&b.fsicon.mousedown(),a&&a.length?c.animate(b.closedCss(a),500,g):g());return b.closeDfd},getstate:function(){return 2==this.state?1:0},exec:function(){this.window.trigger(this.opened()?"close":"open")},hideinfo:function(){this.info.stop(!0).hide()}});h=n(h,{destroy:function(){this.close();this.preview.trigger($.Event("update",{file:null}));this.inherited(arguments);k.destroy(this._editor);k.destroy(this.preview);k.destroy(this.window)},
onOpened:function(){var a=this;a.fm={url:function(b,c,e){return a.delegate.getImageUrl(b,c,e)}};a.preview.trigger($.Event("update",{file:a.item}))},onClosed:function(){},onAnimate:function(){}});n=n(h,{resize:function(){this.preview.trigger("changesize")},constructor:function(a){this.parent=$(a._parent.containerNode);this.container=a._parent.containerNode;this.resizeToParent=!0;this.delegate=a.ctx.getFileManager();this.item=a.item;this.buildRenderingEmbedded();this.domNode=this.info[0]},openItem:function(a){this.id=
k.createUUID();g.add(this);this.item=a||this.item;this.init();this.exec();this.window.css({height:"100%",width:"100%"});this._parent.add(this,null,!1);this.preview.trigger($.Event("update",{file:this.item}));this._parent.resize();this.resize()}});h.EditorClass=n;return h})},"dojo/aspect":function(){define([],function(){function n(b,g,d,a){var c=b[g],q="around"==g,p;if(q){var h=d(function(){return c.advice(this,arguments)});p={remove:function(){h&&(h=b=d=null)},advice:function(a,b){return h?h.apply(a,
b):c.advice(a,b)}}}else p={remove:function(){if(p.advice){var a=p.previous,c=p.next;c||a?(a?a.next=c:b[g]=c,c&&(c.previous=a)):delete b[g];b=d=p.advice=null}},id:b.nextId++,advice:d,receiveArguments:a};if(c&&!q)if("after"==g){for(;c.next&&(c=c.next););c.next=p;p.previous=c}else"before"==g&&(b[g]=p,p.next=c,c.previous=p);else b[g]=p;return p}function m(b){return function(c,d,a,e){var g=c[d],p;g&&g.target==c||(c[d]=p=function(){for(var a=p.nextId,b=arguments,c=p.before;c;)c.advice&&(b=c.advice.apply(this,
b)||b),c=c.next;if(p.around)var e=p.around.advice(this,b);for(c=p.after;c&&c.id<a;){if(c.advice)if(c.receiveArguments)var g=c.advice.apply(this,b),e=g===k?e:g;else e=c.advice.call(this,e,b);c=c.next}return e},g&&(p.around={advice:function(a,b){return g.apply(a,b)}}),p.target=c,p.nextId=p.nextId||0);c=n(p||g,b,a,e);a=null;return c}}var k,h=m("after"),d=m("before"),b=m("around");return{before:d,around:b,after:h}})},"davinci/ve/actions/ViewSourceMenuAction":function(){define(["dojo/_base/declare","davinci/ve/actions/ContextAction"],
function(n,m){return n("davinci.ve.actions.ViewSourceMenuAction",[m],{run:function(k){(k=this.fixupContext(k))&&k.editor&&k.editor.switchDisplayModeSource&&k.editor.switchDisplayModeSource()}})})},"xcf/manager/LogManager":function(){define(["dcl/dcl","xlog/manager/LogManager"],function(n,m){return n(m,{declaredClass:"xcf.manager.LogManager",ls:function(k){var h=this;return this.callMethodEx(null,"ls",["unset"],function(d){h.rawData=d;h.initStore(d);k&&k(d)},!0)}})})},"xblox/model/code/RunBlock":function(){define(["dcl/dcl",
"xblox/model/Block","xide/types","xide/utils"],function(n,m,k,h){return n(m,{declaredClass:"xblox.model.code.RunBlock",name:"Run Block",file:"",method:"",args:"",sharable:!0,block:"",description:"Runs another Block",solve:function(d,b){if((d=this.getContext())&&null!=d[this.method]){var c=[],g=d[this.method];try{var p=this._getArgs(),c=g.apply(d,p||[]);this.onSuccess(this,b);return c}catch(a){console.error("call method failed"),this.onFailed(this,b)}}else this.onFailed(this,b);return[]},toText:function(){var d=
this.getBlockIcon()+" "+this.name+" ";this.method&&(d+=this.method.substr(0,20));return d},getFields:function(){var d=this.getDefaultFields();d.push(h.createCI("Block",k.ECIType.BLOCK_REFERENCE,this.block,{toolTip:"Enter  block, you can use also the block's share title",group:"General",dst:"block",value:this.block,title:"Block",scope:this.scope}));d.push(h.createCI("File",k.ECIType.FILE,this.file,{toolTip:"Leave empty to auto-select this file",group:"General",dst:"file",value:this.file,intermediateChanges:!1,
acceptFolders:!1,acceptFiles:!0,encodeFilePath:!1,buildFullPath:!0,filePickerOptions:{dialogTitle:"Select Block File",filePickerMixin:{beanContextName:this.id,persistent:!1,globalPanelMixin:{allowLayoutCookies:!1}},configMixin:{beanContextName:this.id,LAYOUT_PRESET:k.LAYOUT_PRESET.SINGLE,PANEL_OPTIONS:{ALLOW_MAIN_MENU:!1,ALLOW_NEW_TABS:!0,ALLOW_MULTI_TAB:!1,ALLOW_INFO_VIEW:!0,ALLOW_LOG_VIEW:!1,ALLOW_CONTEXT_MENU:!0,ALLOW_LAYOUT_SELECTOR:!0,ALLOW_SOURCE_SELECTOR:!0,ALLOW_COLUMN_RESIZE:!0,ALLOW_COLUMN_REORDER:!0,
ALLOW_COLUMN_HIDE:!0,ALLOW_ACTION_TOOLBAR:!0,ALLOW_BREADCRUMBS:!1}},defaultStoreOptions:{fields:1663,includeList:"xblox",excludeList:"*"},startPath:this.file}}));return d},getBlockIcon:function(){return'\x3cspan class\x3d"el-icon-share-alt"\x3e\x3c/span\x3e'}})})},"davinci/ve/actions/OtherAction":function(){define(["dojo/_base/declare","./_ReorderAction","davinci/commands/CompoundCommand","davinci/ve/commands/ReparentCommand"],function(n,m,k,h){return n("davinci.ve.actions.OtherAction",[m],{run:function(d){},
isEnabled:function(d){return!0},shouldShow:function(d){return(d=(d=this.fixupContext(d))?d.editor:null)&&"davinci.ve.PageEditor"==d.declaredClass}})})},"xblox/model/functions/StopBlock":function(){define(["dcl/dcl","xide/utils","xblox/model/Block"],function(n,m,k){return n(k,{declaredClass:"xblox.model.functions.StopBlock",command:"Select command please",icon:"",args:null,_timeout:100,hasInlineEdits:!0,solve:function(h,d){if(this.command){if((h=h.resolveBlock(this.command))&&h.stop){var b=h.stop();
this.onSuccess(this,d)}else this.onFailed(this,d);return b}},makeEditable:function(h,d,b,c,g){return'\x3ca tabIndex\x3d"-1" pos\x3d\''+d+"' display-mode\x3d'"+(g||"popup")+"' display-type\x3d'"+(b||"text")+"' data-prop\x3d'"+h+"' data-title\x3d'"+c+"' class\x3d'editable editable-click'  href\x3d'#'\x3e"+this[h]+"\x3c/a\x3e"},getFieldOptions:function(h){if("command"===h)return this.scope.getCommandsAsOptions("text")},toText:function(){var h="Unknown",d=this.scope.getBlock(this.command);d&&(h=d.name);
-1!==this.command.indexOf("://")&&(h='\x3cspan class\x3d"text-info"\x3e'+this.scope.toFriendlyName(this,this.command)+"\x3c/span\x3e");return this.getBlockIcon("D")+"Stop Command : "+h},onChangeField:function(h,d){},getFields:function(){var h=this.inherited(arguments)||this.getDefaultFields();h.push(m.createCI("value","xcf.widgets.CommandPicker",this.command,{group:"General",title:"Command",dst:"command",options:this.scope.getCommandsAsOptions(),block:this,pickerType:"command",value:this.command}));
return h}})})},"dijit/TooltipDialog":function(){define("dojo/_base/declare dojo/dom-class dojo/keys dojo/_base/lang dojo/on ./focus ./layout/ContentPane ./_DialogMixin ./form/_FormMixin ./_TemplatedMixin dojo/text!./templates/TooltipDialog.html".split(" "),function(n,m,k,h,d,b,c,g,p,a,e){return n("dijit.TooltipDialog",[c,a,p,g],{title:"",doLayout:!1,autofocus:!0,baseClass:"dijitTooltipDialog",_firstFocusItem:null,_lastFocusItem:null,templateString:e,_setTitleAttr:"containerNode",postCreate:function(){this.inherited(arguments);
this.own(d(this.domNode,"keydown",h.hitch(this,"_onKey")))},orient:function(a,b,c){a={"MR-ML":"dijitTooltipRight","ML-MR":"dijitTooltipLeft","TM-BM":"dijitTooltipAbove","BM-TM":"dijitTooltipBelow","BL-TL":"dijitTooltipBelow dijitTooltipABLeft","TL-BL":"dijitTooltipAbove dijitTooltipABLeft","BR-TR":"dijitTooltipBelow dijitTooltipABRight","TR-BR":"dijitTooltipAbove dijitTooltipABRight","BR-BL":"dijitTooltipRight","BL-BR":"dijitTooltipLeft","BR-TL":"dijitTooltipBelow dijitTooltipABLeft","BL-TR":"dijitTooltipBelow dijitTooltipABRight",
"TL-BR":"dijitTooltipAbove dijitTooltipABRight","TR-BL":"dijitTooltipAbove dijitTooltipABLeft"}[b+"-"+c];m.replace(this.domNode,a,this._currentOrientClass||"");this._currentOrientClass=a},focus:function(){this._getFocusItems();b.focus(this._firstFocusItem)},onOpen:function(a){this.orient(this.domNode,a.aroundCorner,a.corner);var b=a.aroundNodePos;"M"==a.corner.charAt(0)&&"M"==a.aroundCorner.charAt(0)?(this.connectorNode.style.top=b.y+(b.h-this.connectorNode.offsetHeight>>1)-a.y+"px",this.connectorNode.style.left=
""):"M"==a.corner.charAt(1)&&"M"==a.aroundCorner.charAt(1)&&(this.connectorNode.style.left=b.x+(b.w-this.connectorNode.offsetWidth>>1)-a.x+"px");this._onShow()},onClose:function(){this.onHide()},_onKey:function(a){if(a.keyCode==k.ESCAPE)this.defer("onCancel"),a.stopPropagation(),a.preventDefault();else if(a.keyCode==k.TAB){var c=a.target;this._getFocusItems();this._firstFocusItem==this._lastFocusItem?(a.stopPropagation(),a.preventDefault()):c==this._firstFocusItem&&a.shiftKey?(b.focus(this._lastFocusItem),
a.stopPropagation(),a.preventDefault()):c!=this._lastFocusItem||a.shiftKey?a.stopPropagation():(b.focus(this._firstFocusItem),a.stopPropagation(),a.preventDefault())}}})})},"xwire/xwire":function(){},"xfile/manager/Electron":function(){define(["dcl/dcl","xdojo/has","xide/utils","dojo/Deferred"],function(n,m,k,h){m("electronx");return n(null,{declaredClass:"xfile.manager.Electron",require:function(){return window.eRequire.apply(null,arguments)},srequire:function(){return this.require("electron").remote.require.apply(null,
arguments)},remote:function(){return(0,window.eRequire)("electron").remote},getContentE:function(d,b,c,g){var p=(this.ctx||sctx).getResourceManager().getVariable("VFS_CONFIG")||{};g=new h;this.require("os");this.require("electron");var a=this.require("path"),e=this.require("fs");d=d.replace("/","");if(p[d]){d=p[d];if(!d)return console.error("cant resolve file "+d+"/"+b),!1;b=b.replace("./","/");b=k.replaceAll("/",a.sep,b);d=a.resolve(d+a.sep+b);if(e.existsSync(d)){b=e.statSync(d).size;a=new Buffer(b);
d=e.openSync(d,"r");if(!b)return"";e.readSync(d,a,0,b,0);e.closeSync(d);e=a.toString();g.resolve(e);c&&c(e)}else return!1;return g}console.error("open in os failed: have no VFS config for "+d)},setContentE:function(d,b,c,g){var p=(this.ctx||sctx).getResourceManager().getVariable("VFS_CONFIG")||{},a=new h;this.require("os");var e=this.require("path"),q=this.require("fs");d=d.replace("/","");if(p[d]){d=p[d];if(!d)return!1;b=b.replace("./","/");b=k.replaceAll("/",e.sep,b);e=e.resolve(d+e.sep+b);if(q.existsSync(e))try{q.writeFileSync(e,
c),g&&g(),a.resolve()}catch(u){return console.error("error saving file "+e),!1}else return console.error("path "+e+" doesnt exists, fallback to legacy setContent"),!1;return a}console.error("open in os failed: have no VFS config for "+d)}})})},"dojo/node":function(){define(["dojo/_base/kernel","dojo/has","require","dojo/noob"],function(n,m,k,h){var d=n.global.require&&n.global.require.nodeRequire;m=(n="undefined"!==typeof window?window:null)&&n.process&&"renderer"===n.process.type;var b=d?d("module"):
null;!d&&m&&n&&n.nodeRequire&&(d=n.nodeRequire,b=d("module"));return{load:function(c,g,p){b&&b._findPath&&b._nodeModulePaths&&(g=b._findPath(c,b._nodeModulePaths(g.toUrl("."))),!1!==g&&(c=g));if(c&&"undefined"!==typeof global&&global.moduleCache&&global.moduleCache[c])return global.moduleCache[c];if(!b)return p(h);g=define;var a;define=void 0;try{a=d(c)}finally{define=g}p(a)},normalize:function(c,g){"."===c.charAt(0)&&(c=k.toUrl(g("./"+c)));b||(c=g("dojo/noob"));return c}}})},"davinci/ve/widgets/FontDataStore":function(){define(["dojo/_base/declare",
"dojo/data/ItemFileReadStore","davinci/lang/ve","dijit/lang/_common"],function(n,m){n=n("davinci.ve.widgets.FontDataStore",m,{_allValues:[],constructor:function(k){this.setValues(k.values||davinci.ve.widgets.FontDataStore.fonts)},setValues:function(k){this._allValues=this._allValues.concat(k);this._jsonData={label:"name",identifier:"value",items:this._allValues};this._loadFinished=!1},contains:function(k){for(var h=0;h<this._allValues.length;h++)if(this._allValues[h].value==k||this._allValues[h].name==
k)return h;return!1},clearValues:function(){this._allValues=[];this._loadFinished=!1},lookupValue:function(k){k=this.contains(k);return this._allValues[k].value[0]}});return dojo.mixin(n,{fonts:[{name:"",value:""},{name:"Arial,Helvetica,sans-serif",value:"Arial,Helvetica,sans-serif"},{name:"'Arial Black,Gadget',sans-serif",value:"'Arial Black,Gadget',sans-serif"},{name:"'Comic Sans MS',cursive",value:"'Comic Sans MS',cursive"},{name:"'Courier New',Courier,monospace",value:"'Courier New',Courier,monospace"},
{name:"Geneva,Tahoma,sans-serif",value:"Geneva,Tahoma,sans-serif"},{name:"Georgia,serif",value:"Georgia,serif"},{name:"'Helvetica,Trebuchet MS',sans-serif",value:"'Helvetica,Trebuchet MS',sans-serif"},{name:"Impact,Charcoal,sans-serif",value:"Impact,Charcoal,sans-serif"},{name:"'Lucida Console',Monaco,monospace",value:"'Lucida Console',Monaco,monospace"},{name:"'Lucida Sans Unicode','Lucida Grande',sans-serif",value:"'Lucida Sans Unicode','Lucida Grande',sans-serif"},{name:"'Lucida Console', Monaco, monospace",
value:"'Lucida Console', Monaco, monospace"},{name:"'Palatino Linotype','Book Antiqua',Palatino,serif",value:"'Palatino Linotype','Book Antiqua',Palatino,serif"},{name:"Symbol",value:"Symbol"},{name:"Tahoma,Geneva,sans-serif",value:"Tahoma,Geneva,sans-serif"},{name:"'Times New Roman',Times,serif",value:"'Times New Roman',Times,serif"},{name:"'Trebuchet MS',Helvetica,sans-serif",value:"'Trebuchet MS',Helvetica,sans-serif"},{name:"Verdana,Geneva,sans-serif",value:"Verdana,Geneva,sans-serif"},{name:"Webdings",
value:"Webdings"},{name:"Wingdings, 'Zapf Dingbats'",value:"Wingdings, 'Zapf Dingbats'"},{name:"'Zapf Dingbats', Wingdings",value:"'Zapf Dingbats', Wingdings"},{name:"sans-serif",value:"sans-serif"},{name:"serif",value:"serif"},{name:"monospace",value:"monospace"},{name:"cursive",value:"cursive"},{name:"LCD",value:"LCD"}]})})},"dijit/form/_SearchMixin":function(){define("dojo/_base/declare dojo/keys dojo/_base/lang dojo/query dojo/string dojo/when ../registry".split(" "),function(n,m,k,h,d,b,c){return n("dijit.form._SearchMixin",
null,{pageSize:Infinity,store:null,fetchProperties:{},query:{},list:"",_setListAttr:function(b){this._set("list",b)},searchDelay:200,searchAttr:"name",queryExpr:"${0}*",ignoreCase:!0,_patternToRegExp:function(b){return new RegExp("^"+b.replace(/(\\.)|(\*)|(\?)|\W/g,function(b,a,c,g){return c?".*":g?".":a?a:"\\"+b})+"$",this.ignoreCase?"mi":"m")},_abortQuery:function(){this.searchTimer&&(this.searchTimer=this.searchTimer.remove());this._queryDeferHandle&&(this._queryDeferHandle=this._queryDeferHandle.remove());
this._fetchHandle&&(this._fetchHandle.abort&&(this._cancelingQuery=!0,this._fetchHandle.abort(),this._cancelingQuery=!1),this._fetchHandle.cancel&&(this._cancelingQuery=!0,this._fetchHandle.cancel(),this._cancelingQuery=!1),this._fetchHandle=null)},_processInput:function(b){if(!this.disabled&&!this.readOnly){var c=b.charOrCode;if(!("type"in b&&"key"==b.type.substring(0,3)&&(b.altKey||(b.ctrlKey||b.metaKey)&&"x"!=c&&"v"!=c||c==m.SHIFT))){this._prev_key_backspace=b=!1;switch(c){case m.DELETE:case m.BACKSPACE:b=
this._maskValidSubsetError=this._prev_key_backspace=!0;break;default:b="string"==typeof c||229==c}if(b)if(this.store)this.searchTimer=this.defer("_startSearchFromInput",1);else this.onSearch()}}},onSearch:function(){},_startSearchFromInput:function(){this._startSearch(this.focusNode.value)},_startSearch:function(c){this._abortQuery();var g=this,a=k.clone(this.query),e={start:0,count:this.pageSize,queryOptions:{ignoreCase:this.ignoreCase,deep:!0}},q=d.substitute(this.queryExpr,[c.replace(/([\\\*\?])/g,
"\\$1")]),h,w=function(){var c=g._fetchHandle=g.store.query(a,e);g.disabled||g.readOnly||h!==g._lastQuery||b(c,function(d){g._fetchHandle=null;g.disabled||g.readOnly||h!==g._lastQuery||b(c.total,function(b){d.total=b;var c=g.pageSize;if(isNaN(c)||c>d.total)c=d.total;d.nextPage=function(b){e.direction=b=!1!==b;e.count=c;b?(e.start+=d.length,e.start>=d.total&&(e.count=0)):(e.start-=c,0>e.start&&(e.count=Math.max(c+e.start,0),e.start=0));0>=e.count?(d.length=0,g.onSearch(d,a,e)):w()};g.onSearch(d,a,
e)})},function(a){g._fetchHandle=null;g._cancelingQuery||console.error(g.declaredClass+" "+a.toString())})};k.mixin(e,this.fetchProperties);this.store._oldAPI?h=q:(h=this._patternToRegExp(q),h.toString=function(){return q});this._lastQuery=a[this.searchAttr]=h;this._queryDeferHandle=this.defer(w,this.searchDelay)},constructor:function(){this.query={};this.fetchProperties={}},postMixInProperties:function(){if(!this.store){var b=this.list;b&&(this.store=c.byId(b))}this.inherited(arguments)}})})},"dijit/place":function(){define("dojo/_base/array dojo/dom-geometry dojo/dom-style dojo/_base/kernel dojo/_base/window ./Viewport ./main".split(" "),
function(n,m,k,h,d,b,c){function g(a,c,g,p){var e=b.getEffectiveBox(a.ownerDocument);a.parentNode&&"body"==String(a.parentNode.tagName).toLowerCase()||d.body(a.ownerDocument).appendChild(a);var q=null;n.some(c,function(b){var c=b.corner,d=b.pos,r=0,h={w:{L:e.l+e.w-d.x,R:d.x-e.l,M:e.w}[c.charAt(1)],h:{T:e.t+e.h-d.y,B:d.y-e.t,M:e.h}[c.charAt(0)]},v=a.style;v.left=v.right="auto";g&&(r=g(a,b.aroundCorner,c,h,p),r="undefined"==typeof r?0:r);var u=a.style,w=u.display,k=u.visibility;"none"==u.display&&(u.visibility=
"hidden",u.display="");v=m.position(a);u.display=w;u.visibility=k;w={L:d.x,R:d.x-v.w,M:Math.max(e.l,Math.min(e.l+e.w,d.x+(v.w>>1))-v.w)}[c.charAt(1)];k={T:d.y,B:d.y-v.h,M:Math.max(e.t,Math.min(e.t+e.h,d.y+(v.h>>1))-v.h)}[c.charAt(0)];d=Math.max(e.l,w);u=Math.max(e.t,k);w=Math.min(e.l+e.w,w+v.w)-d;k=Math.min(e.t+e.h,k+v.h)-u;r+=v.w-w+(v.h-k);if(null==q||r<q.overflow)q={corner:c,aroundCorner:b.aroundCorner,x:d,y:u,w:w,h:k,overflow:r,spaceAvailable:h};return!r});q.overflow&&g&&g(a,q.aroundCorner,q.corner,
q.spaceAvailable,p);c=q.y;var h=q.x,u=d.body(a.ownerDocument);/relative|absolute/.test(k.get(u,"position"))&&(c-=k.get(u,"marginTop"),h-=k.get(u,"marginLeft"));u=a.style;u.top=c+"px";u.left=h+"px";u.right="auto";return q}var p={TL:"BR",TR:"BL",BL:"TR",BR:"TL"};return c.place={at:function(a,b,c,d,h){c=n.map(c,function(a){var c={corner:a,aroundCorner:p[a],pos:{x:b.x,y:b.y}};d&&(c.pos.x+="L"==a.charAt(1)?d.x:-d.x,c.pos.y+="T"==a.charAt(0)?d.y:-d.y);return c});return g(a,c,h)},around:function(a,b,c,d,
p){function e(a,b){D.push({aroundCorner:a,corner:b,pos:{x:{L:C,R:C+F,M:C+(F>>1)}[a.charAt(1)],y:{T:E,B:E+G,M:E+(G>>1)}[a.charAt(0)]}})}var q;if("string"==typeof b||"offsetWidth"in b||"ownerSVGElement"in b){if(q=m.position(b,!0),/^(above|below)/.test(c[0])){var u=m.getBorderExtents(b),w=b.firstChild?m.getBorderExtents(b.firstChild):{t:0,l:0,b:0,r:0},z=m.getBorderExtents(a),y=a.firstChild?m.getBorderExtents(a.firstChild):{t:0,l:0,b:0,r:0};q.y+=Math.min(u.t+w.t,z.t+y.t);q.h-=Math.min(u.t+w.t,z.t+y.t)+
Math.min(u.b+w.b,z.b+y.b)}}else q=b;if(b.parentNode)for(u="absolute"==k.getComputedStyle(b).position,b=b.parentNode;b&&1==b.nodeType&&"BODY"!=b.nodeName;){w=m.position(b,!0);z=k.getComputedStyle(b);/relative|absolute/.test(z.position)&&(u=!1);if(!u&&/hidden|auto|scroll/.test(z.overflow)){var y=Math.min(q.y+q.h,w.y+w.h),B=Math.min(q.x+q.w,w.x+w.w);q.x=Math.max(q.x,w.x);q.y=Math.max(q.y,w.y);q.h=y-q.y;q.w=B-q.x}"absolute"==z.position&&(u=!0);b=b.parentNode}var C=q.x,E=q.y,F="w"in q?q.w:q.w=q.width,
G="h"in q?q.h:(h.deprecated("place.around: dijit/place.__Rectangle: { x:"+C+", y:"+E+", height:"+q.height+", width:"+F+" } has been deprecated.  Please use { x:"+C+", y:"+E+", h:"+q.height+", w:"+F+" }","","2.0"),q.h=q.height),D=[];n.forEach(c,function(a){var b=d;switch(a){case "above-centered":e("TM","BM");break;case "below-centered":e("BM","TM");break;case "after-centered":b=!b;case "before-centered":e(b?"ML":"MR",b?"MR":"ML");break;case "after":b=!b;case "before":e(b?"TL":"TR",b?"TR":"TL");e(b?
"BL":"BR",b?"BR":"BL");break;case "below-alt":b=!b;case "below":e(b?"BL":"BR",b?"TL":"TR");e(b?"BR":"BL",b?"TR":"TL");break;case "above-alt":b=!b;case "above":e(b?"TL":"TR",b?"BL":"BR");e(b?"TR":"TL",b?"BR":"BL");break;default:e(a.aroundCorner,a.corner)}});a=g(a,D,p,{w:F,h:G});a.aroundNodePos=q;return a}}})},"xlog/xlog":function(){},"xide/manager/SettingsManager":function(){define("dcl/dcl xide/manager/ServerActionBase xide/utils xide/manager/ManagerBase xide/data/Memory dojo/Deferred".split(" "),
function(n,m,k,h,d,b){return n([h,m],{declaredClass:"xide.manager.SettingsManager",serviceClass:"XApp_Store",settingsStore:null,settingsDataAll:null,section:"settings",store:null,has:function(b,g,d,a,e){},getSetting:function(b){return(b=this.getStore().query({id:b}))&&b[0]?b[0].value:null},getStore:function(){return this.settingsStore},_createStore:function(b){return new d({data:b,idProperty:"id"})},onSettingsReceived:function(b){(this.settingsDataAll=b)?this.settingsStore=this._createStore(b[""+
this.section]):this._createStore([])},replace:function(b,g,d,a,e){this.serviceObject[this.serviceClass].set(this.store,b||".",g,d,a).addCallback(function(a){e&&e(a)})},read:function(b,g,d,a){return this.runDeferred(null,"get",[b,g,d]).then(function(b){a&&a(b)}.bind(this))},update:function(b,g,d,a,e){return this.runDeferred(null,"update",[b||this.section,g,d,a,e])},write:function(b,g,d,a,e,q){try{return k.queryStoreEx(this.settingsStore,{id:a.id},!0,!0)?this.update(b,g,{id:a.id},a.data,e,q):this.callMethodEx(this.serviceClass,
"set",[b||this.section,g,d,a,e],q,!1)}catch(u){logError(u,"update")}},write2:function(b,g,d,a,e,q){try{var c=k.queryStoreEx(this.settingsStore,d,!0,!0);return c?(k.mixin(c,a),this.update(b,g,d,a,e,q)):this.callMethodEx(this.serviceClass,"set",[b||this.section,g,d,a,e],q,!1)}catch(w){logError(w,"update")}},initStore:function(){var c=new b,g=this;this.serviceObject.__init.then(function(){g.read(g.section,".",null,g.onSettingsReceived.bind(g));c.resolve()});return c},init:function(){var c=new b;c.resolve();
return c}})})},"xblox/model/Scope":function(){define("dcl/dcl ./ModelBase ./Expression xide/factory xide/utils xide/types xide/mixins/EventedMixin dojo/_base/lang dojo/has xide/encoding/MD5 xcf/model/Variable xdojo/has!host-node?nxapp/utils/_console".split(" "),function(n,m,k,h,d,b,c,g,p,a,e,q){var u="undefined"!==typeof window?window.console:"undefined"!==typeof global?global.console:q;q&&(u=q);m=n([m,c.dcl],{declaredClass:"xblox.model.Scope",variableStore:null,serviceObject:null,context:null,blockStore:null,
expressionModel:null,start:function(){if(!0===this.__didStartBlocks)u.error("already started blocks");else{this.__didStartBlocks=!0;var a=this.getVariable("value");a||(a=new e({id:d.createUUID(),name:"value",value:"",scope:this,type:13,group:"processVariables",gui:!1,cmd:!1}),this.blockStore.putSync(a));var a=[],c=this.getBlocks({group:b.COMMAND_TYPES.INIT_COMMAND}),g=this;try{_.each(c,function(a){!1!==a.enabled&&!0!==a.__started&&(a.solve(g),a.__started=!0)},this)}catch(A){u.error("starting init blocks failed",
A),logError(A,this)}a=a.concat(this.getBlocks({group:b.COMMAND_TYPES.BASIC_COMMAND}));for(c=0;c<a.length;c++){var q=a[c];q.enabled&&q.start&&q.startup&&!0!==q.__started&&(q.start(),q.__started=!0)}}},getExpressionModel:function(){this.expressionModel||(this.expressionModel=new k);return this.expressionModel},toFriendlyName:function(a,b){if(!b||!a)return null;a=this;var c=this.ctx,e=this.driver,g=c.getDeviceManager(),e=c.getDriverManager();if(-1==b.indexOf("://"))return(a=a.getBlockById(b))?a.name:
b;var c=d.parse_url(b),c=d.urlArgs(c.host),q=g.getItemById(c.device.value);return q&&(g=g.toDeviceControlInfo(q),e=e.getDriverById(g.driverId),(q=q.driverInstance)||e)&&(a=e.blockScope?e.blockScope:q?q.blockScope:a,(a=a.getStore().getSync(c.block.value))||q&&q.blockScope&&(a=q.blockScope.getBlock(c.block.value)))?g.title+"/"+a.name:b},getContext:function(){return this.instance},toString:function(){var a={blocks:null,variables:null},b=this.blocksToJson();try{d.fromJson(JSON.stringify(b))}catch(v){return}a.blocks=
b;return JSON.stringify(a,null,2)},initWithData:function(a,b){a&&this.blocksFromJson(a,null,b);this.clearCache()},getService:function(){return this.serviceObject},getStore:function(){return this.blockStore},reset:function(){this.getExpressionModel().reset()},empty:function(){this.clearCache();var a=this.blockStore,b=this.getBlocks();a.silent(!0);_.each(b,function(b){b&&a.removeSync(b.id)});a.setData([]);a.silent(!1)},fromScope:function(a){var b=this.blockStore;b.silent(!0);this.empty();a=a.blocksToJson();
this.blocksFromJson(a);b.silent(!1)},clearCache:function(){this.getExpressionModel().reset()},getVariableStore:function(){return this.blockStore},getBlockStore:function(){return this.blockStore},getVariables:function(a){if(!this.blockStore)return[];var b=this.blockStore.data,c=[];if(a&&"processVariables"===a.group){for(a=0;a<b.length;a++)"processVariables"===b[a].group&&c.push(b[a]);return c}if(!a){for(a=0;a<b.length;a++){var e=b[a],g=e.declaredClass;"xblox.model.variables.Variable"!=g&&"xcf.model.Variable"!=
g||c.push(e)}return c}return this.blockStore.query(a)},loopBlock:function(a,b){1==a._destroyed&&u.error("block destroyed");var c=a.getInterval?a.getInterval():0;if(a&&0<c&&a.enabled&&!0!==a._destroyed){var e=this;a._loop&&clearInterval(a._loop);a._loop=setInterval(function(){!a.enabled||a._destroyed?(clearInterval(a._loop),a._loop=null):a.solve(e,b||a._lastSettings)},c)}},getEventsAsOptions:function(a){var c=[],e;for(e in b.EVENTS)c.push({label:b.EVENTS[e],value:b.EVENTS[e]});c=c.concat([{label:"onclick",
value:"onclick"},{label:"ondblclick",value:"ondblclick"},{label:"onmousedown",value:"onmousedown"},{label:"onmouseup",value:"onmouseup"},{label:"onmouseover",value:"onmouseover"},{label:"onmousemove",value:"onmousemove"},{label:"onmouseout",value:"onmouseout"},{label:"onkeypress",value:"onkeypress"},{label:"onkeydown",value:"onkeydown"},{label:"onkeyup",value:"onkeyup"},{label:"onfocus",value:"onfocus"},{label:"onblur",value:"onblur"},{label:"onchange",value:"onchange"}]);for(e=0;e<c.length;e++){var g=
c[e];if(g.value===a){g.selected=!0;break}}return c},getVariablesAsObject:function(){for(var a=this.getVariables(),b={},c=0;c<a.length;c++)b[a[c].title]=a[c].value;return b},getVariablesAsOptions:function(){var a=this.getVariables(),b=[];if(a)for(var c=0;c<a.length;c++)b.push({label:a[c].label,value:a[c].variable});return b},getCommandsAsOptions:function(a){var b=this.getBlocks({declaredClass:"xcf.model.Command"}),c=[];if(b)for(var e=0;e<b.length;e++){var g={};g[a||"label"]=b[e].name;g.value=b[e].name;
c.push(g)}return c},_cached:null,getBlocks:function(a,b){if(!this.blockStore)return[];a=a||{id:/\S+/};return _.isEmpty(a)?this.blockStore.data:this.blockStore.query(a,null,!0)},registerVariable:function(a){this.variables[a.title]=a;this.blockStore&&this.blockStore.putSync(a)},getVariable:function(a){for(var b=this.getVariables(),c=0;c<b.length;c++){var e=b[c];if(e.name===a)return e}return null},getVariableById:function(a){if(!a)return null;var b=a.split("/"),c=this;2==b.length&&((a=c.owner)&&a.hasScope&&
(a.hasScope(b[0])?c=a.getScope(b[0]):u.error("have scope id but cant resolve it",this)),a=b[1]);return(b=c.blockStore.getSync(a))?b:null},registerBlock:function(a,b){var c=this.blockStore;if(c){var e=c.getSync(a.id);if(e)return e;e=null;return e=a.addToStore?a.addToStore(c):c.putSync(a,b)}},allBlocks:function(a,b){return this.getBlocks({},b)},hasGroup:function(a){for(var b=this.allGroups({},!1),c=0;c<b.length;c++)if(b[c]===a)return!0;return!1},allGroups:function(){for(var a=[],b=this.allBlocks({},
!1),c=function(b){for(var c=0;c<a.length;c++)if(a[c]===b)return!0;return!1},e=0;e<b.length;e++){var g=b[e];g.parentId||(g.group?c(g.group)||a.push(g.group):c("No Group")||a.push("No Group"))}return a},variablesToJson:function(){var a=[],b=this.variableStore?this.getVariables():this.variables,c;for(c in b){var e=b[c];if(!1!==e.serializeMe&&null!=e.keys){var g={},d;for(d in e)if(this.isString(e[d])||this.isNumber(e[d])||this.isBoolean(e[d]))g[d]=e[d];a.push(g)}}return a},isScript:function(a){return this.isString(a)&&
(-1!=a.indexOf("return")||-1!=a.indexOf(";")||-1!=a.indexOf("[")||-1!=a.indexOf("{")||-1!=a.indexOf("}"))},variablesToJavascriptEx:function(a,b){for(var c=[],e=this.variableStore?this.getVariables():this.variables,g=0;g<e.length;g++){var d=e[g];if(d!=a){var q=""+d.value;a&&a.value&&-1==a.value.indexOf(d.title)||b&&-1==b.indexOf(d.title)||0==q.length||(this.isScript(q)||-1!=q.indexOf("'")?this.isScript(q)&&(q=this.expressionModel.parseVariable(this,d)):q="'"+q+"'","''"===q&&(q="'0'"),c.push(q))}}return c},
variablesToJavascript:function(a,b){for(var c="",e=this.variableStore?this.getVariables():this.variables||[],g=0;g<e.length;g++){var d=e[g];if(d!=a){var q=""+d.value;a&&a.value&&-1==a.value.indexOf(d.title)||b&&-1==b.indexOf(d.title)||0==q.length||(this.isScript(q)||-1!=q.indexOf("'")?this.isScript(q)&&(q=this.expressionModel.parseVariable(this,d)):q="'"+q+"'","''"===q&&(q="'0'"),c+="var "+d.title+" \x3d "+q+";",c+="\n")}}return c},variablesFromJson:function(a){for(var b=[],c=0;c<a.length;c++){var e=
a[c];e.scope=this;if(e.declaredClass){var g=d.replaceAll(".","/",e.declaredClass);(g=require(g))&&b.push(new g(e))}}return b},regenerateIDs:function(a){for(var b=this,c=function(a){var e=d.createUUID(),g=b.getBlocks({parentId:a.id});if(g&&0<g.length)for(var q=0;q<g.length;q++){var r=g[q];r.parentId=e;c(r)}a.id=e},e=0;e<a.length;e++)c(a[e])},cloneBlocks2:function(a,b){a=this.blocksToJson(a);var c=this.owner.getScope(d.createUUID(),null,!1);a=c.blocksFromJson(a,!1);var e=this.blockStore;a=c.allBlocks();
c.regenerateIDs(a);a=c.blocksToJson(a);if(b)for(c=0;c<a.length;c++){var g=a[c];null==g.parentId&&(g.group=b)}var q=[];a=this.blocksFromJson(a);_.each(a,function(a){q.push(e.getSync(a.id))});return q},cloneBlocks:function(a){a=this.blocksToJson(a);var b=this.owner.getScope(d.createUUID(),null,!1);a=b.blocksFromJson(a,!1);a=b.allBlocks();for(b=0;b<a.length;b++){var c=a[b];c.id=d.createUUID();c.parentId=null}this.blocksToJson(a);this.blocksFromJson(a);return a},blockToJson:function(a){var b={_containsChildrenIds:[]},
c;for(c in a)if("ctrArgs"!=c&&("function"===typeof a[c]||a.serializeField(c))){if(this.isString(a[c])||this.isNumber(a[c])||this.isBoolean(a[c]))b[c]=a[c];if("parent"!=c)if(this.isBlock(a[c]))b[c]=a[c].id,b._containsChildrenIds.push(c);else if(this.areBlocks(a[c])){b[c]=[];for(var e=0;e<a[c].length;e++)b[c].push(a[c][e].id);b._containsChildrenIds.push(c)}}return b},blocksToJson:function(a){try{var b=[];a=a&&a.length?a:this.blockStore?this.blockStore.data:this.blocks;for(var c in a){var e=a[c];if(null!=
e.keys&&!1!==e.serializeMe){var g={_containsChildrenIds:[]},d;for(d in e)if("ctrArgs"!=d&&("function"===typeof e[d]||e.serializeField(d))){if(this.isString(e[d])||this.isNumber(e[d])||this.isBoolean(e[d]))g[d]=e[d];_.isObject(e[d])&&e.serializeObject&&!0===e.serializeObject(d)&&(g[d]=JSON.stringify(e[d],null,2));if("parent"!=d)if(this.isBlock(e[d]))g[d]=e[d].id,g._containsChildrenIds.push(d);else if(this.areBlocks(e[d])){g[d]=[];for(var q=0;q<e[d].length;q++)g[d].push(e[d][q].id);g._containsChildrenIds.push(d)}}b.push(g)}}}catch(B){u.error("from json failed : "+
B)}return b},_createBlockStore:function(){},blockFromJson:function(a){a.scope=this;null==a._containsChildrenIds&&(a._containsChildrenIds=[]);for(var b={},c=0;c<a._containsChildrenIds.length;c++){var e=a._containsChildrenIds[c];b[e]=a[e];a[e]=null}delete a._containsChildrenIds;if(!a.declaredClass)return null;e=c=null;try{e=d.replaceAll(".","/",a.declaredClass),c=require(e)}catch(A){try{e=d.replaceAll("/",".",a.declaredClass),c=require(e)}catch(z){}}c||(c=n.getObject(a.declaredClass));if(!c)return null;
e=null;try{e=h.createBlock(c,a)}catch(A){return logError(A),null}e._children=b;return e},blocksFromJson:function(a,b,c){for(var e=[],g={},q=0;q<a.length;q++){var r=a[q];r.scope=this;null==r._containsChildrenIds&&(r._containsChildrenIds=[]);for(var p={},v=0;v<r._containsChildrenIds.length;v++){var w=r._containsChildrenIds[v];p[w]=r[w];r[w]=null}delete r._containsChildrenIds;if(r.declaredClass){var k=v=null;try{k=d.replaceAll(".","/",r.declaredClass),v=require(k)}catch(G){u.error("couldnt resolve class "+
k)}v||(v=n.getObject(r.declaredClass));if(v){k=null;try{k=h.createBlock(v,r,null,!1)}catch(G){u.error("error in block creation ",G+" "+r.declaredClass);logError(G);continue}k._children=p;g[k.id]=p;e.push(k)}}}a=this.allBlocks(null,!1);for(q=0;q<a.length;q++){r=a[q];r._children=g[r.id];if(r._children){for(w in r._children)if("string"==typeof r._children[w])(p=this.getBlockById(r._children[w]))?(r[w]=p,p.parent=r,p.postCreate&&p.postCreate()):(this.blockStore.removeSync(r._children[w]),c&&c("   couldnt resolve child: "+
r._children[w]+"@"+r.name+":"+r.declaredClass));else if("object"==typeof r._children[w])for(r[w]=[],v=0;v<r._children[w].length;v++)(p=this.getBlockById(r._children[w][v]))?(r[w].push(p),(k=this.getBlockById(p.parentId))?p.parent=k:u.error("child has no parent")):c&&c("   couldnt resolve child: "+r._children[w]+"@"+r.name+":"+r.declaredClass);delete r._children}!1!==b&&null!=r.parentId&&null==this.getBlockById(r.parentId)&&(r.parentId=null);r.postCreate()}this.allBlocks();return e},resolveDevice:function(a){var b=
this.ctx,c=this.device,e=b.getDeviceManager();b.getDriverManager();if(-1==a.indexOf("://"))return(c=this.getBlockById(a))?c:a;a=d.parse_url(a);a=d.urlArgs(a.host);b=e.getItemById(a.device.value);!b&&(e=e.getInstanceByName(a.device.value))&&(b=e.device);return c},resolveBlock:function(a){var b=this,c=this.ctx,b=this.driver,b=c.getDeviceManager(),c=c.getDriverManager();if(-1==a.indexOf("://"))return(b=this.getBlockById(a))?b:a;a=d.parse_url(a);a=d.urlArgs(a.host);var e=b.getItemById(a.device.value);
if(!e){var g=b.getInstanceByName(a.device.value);g&&(e=g.device)}if(e&&(b=b.toDeviceControlInfo(e))&&(b=c.getDriverById(b.driverId),(c=e.driverInstance)||b)&&(a=(b=c?c.blockScope:b.blockScope)?b.getStore().getSync(a.block.value):null))return a},getBlock:function(a){return this.getBlockById(a)},getBlockByName:function(a){if(-1!==a.indexOf("://")){var b=this.resolveBlock(a);if(b)return b}for(var c=this.getBlocks(),e=0;e<c.length;e++)if(b=c[e],b.name===a)return b;return(a=this.blockStore.query({name:a}))&&
0<a.length?a[0]:null},getBlockById:function(a){return this.blockStore.getSync(a)},_flatten:function(a){var b=[],c;for(c in a){var e=a[c];if(null!=e.keys){b.push(e);for(var g in e)if("ctrArgs"!=g&&"parent"!==g)if(this.isBlock(e[g]))b.push(e[g]);else if(this.areBlocks(e[g]))for(var d=0;d<e[g].length;d++)b.push(e[g][d])}}return b},flatten:function(a){var b=[],c;for(c in a){var e=a[c];if(null!=e.keys){var g=_.find(b,{id:e.id});g||b.push(e);for(var d in e)if("ctrArgs"!=d&&"parent"!==d){var q=e[d];if(this.isBlock(q))(g=
_.find(b,{id:q.id}))||b.push(q);else if(this.areBlocks(q))for(var p=0;p<q.length;p++){var h=q[p];(g=_.find(b,{id:h.id}))||b.push(h);b=b.concat(this.flatten([h]))}}}}return b=_.uniq(b,!1,function(a){return a.id})},_getSolve:function(a){return a.prototype?a.prototype.solve:a.__proto__.solve},solveBlock:function(a,b,c,e){b=b||{highlight:!1};var q=null;this.isString(a)?(q=this.getBlockByName(a))||(q=this.getBlockById(a)):this.isObject(a)&&(q=a);a=null;if(q){if(!0!==b.force&&0==q.enabled)return null;!0===
b.force&&(b.force=!1);var r=q.declaredClass;(r=g.getObject(d.replaceAll("/",".",r))||g.getObject(r))?r.prototype&&r.prototype.solve&&(a=r.prototype.solve.apply(q,[this,b])):(a=q.solve(q.getScope(),b,c,e),delete q.override,q.override={})}return a},solve:function(a,b){for(var c="",e=0;e<this.items.length;e++)c+=this.items[e].solve(a,b);return c},parseExpression:function(a,b,c,e,g,d,q,p){return this.getExpressionModel().parse(this,a,b,e,g,d,c,q,p)},isString:function(a){return"string"==typeof a},isNumber:function(a){return"number"==
typeof a},isBoolean:function(a){return"boolean"==typeof a},isObject:function(a){return"object"===typeof a},isBlock:function(a){var b=!1;"object"==typeof a&&null!=a&&void 0==a.length&&a.serializeMe&&(b=!0);return b},areBlocks:function(a){var b=!1;"object"==typeof a&&null!=a&&0<a.length&&this.isBlock(a[0])&&(b=!0);return b},_onVariableChanged:function(a){a.item&&this.getExpressionModel().variableFuncCache[a.item.title]&&delete this.expressionModel.variableFuncCache[a.item.title]},init:function(){this.getExpressionModel();
this.subscribe(b.EVENTS.ON_DRIVER_VARIABLE_CHANGED,this._onVariableChanged);var a=this;this.subscribe(b.EVENTS.ON_MODULE_RELOADED,function(b){var c=b.module,e=b.newModule;(b=a.getBlocks().filter(function(a){return a.declaredClass==c||a.declaredClass==d.replaceAll("/",".",c)?a:null}))&&_.each(b,function(a){var b=e.prototype,c;for(c in b){var g=b[c];g&&_.isFunction(g)&&(a[c]=g)}})})},_destroy:function(){for(var a=this.allBlocks(),c=0;c<a.length;c++){var e=a[c];if(e)try{e&&e.stop&&e.stop(!0),e&&e.reset&&
e.reset(),e&&e._destroy&&e._destroy(),e&&e.destroy&&e.destroy(),e._emit&&e._emit(b.EVENTS.ON_ITEM_REMOVED,{item:e})}catch(x){}}},destroy:function(){this._destroy();this.reset();this._destroyed=!0;delete this.expressionModel},moveTo:function(a,b,c,e){if(e){if(b.canAdd&&b.canAdd()){var g=this.getBlockById(a.parentId);g&&g.removeBlock(a,!1);return b.add(a,null,null)}u.error("cant reparent");return!1}if(b.parentId||!1!==e)if(!a.parentId&&b.parentId&&0==e)a.group=b.group;else if(a.parentId||b.parentId||
!e){if(a.parentId&&b.parentId&&0==e&&a.parentId===b.parentId){var d=this.getBlockById(a.parentId);if(!d)return!1;var q=d[d._getContainer(a)],g=a.indexOf(q,a);b=a.indexOf(q,b);q=g>b?-1:1;c=Math.abs(g-(b+(1==c?-1:1)));for(b=0;b<c-1;b++)a.move(q);return!0}if(a.parentId&&b.parentId&&0==e&&a.parentId!==b.parentId){g=this.getBlockById(a.parentId);if(g&&(d=this.getBlockById(b.parentId))&&g&&g.removeBlock&&d.canAdd&&d.canAdd())g.removeBlock(a,!1),d.add(a,null,null);else return!1;q=d[d._getContainer(a)];null==
q&&u.error("weird : target parent has no item container");g=d.indexOf(q,a);b=d.indexOf(q,b);if(!g||!b){u.error(" weird : invalid drop processing state, have no valid item indicies");return}q=g>b?-1:1;c=Math.abs(g-(b+(1==c?-1:1)));for(b=0;b<c-1;b++)d.move(a,q);return!0}}else return b.canAdd&&b.canAdd()&&(a.group=null,b.add(a,null,null)),!0;else{(g=this.getBlockById(a.parentId))&&g.removeBlock&&(g.removeBlock(a,!1),a.parentId=null,a.group=b.group);var d=[],q=this.getBlocks({group:b.group}),r=[],g=this.getBlockStore(),
p=g.storage.index[b.id];for(b=0;b<q.length;b++)if(e=q[b],null==q[b].parentId&&q[b]!=a&&(e=g.storage.index[e.id],e=c?e>=p:e<=p))d.push(q[b]),r.push(g.storage.index[q[b].id]);for(b=0;b<d.length;b++)g.remove(d[b].id);this.getBlockStore().remove(a.id);c&&this.getBlockStore().putSync(a);for(b=0;b<d.length;b++)g.put(d[b]);c||this.getBlockStore().putSync(a);return!0}return!1}});n.chainAfter(m,"destroy");return m})},"davinci/ve/Focus":function(){define("require dojo/_base/declare dojo/query dijit/_WidgetBase dojo/dnd/Mover ../Runtime ./metadata ./States ./utils/GeomUtils".split(" "),
function(n,m,k,h,d,b,c,g,p){return m(h,{nobSize:11,frameSize:6,postCreate:function(){dojo.addClass(this.domNode,"maqFocus");dojo.style(this.domNode,{position:"absolute",display:"none"});this._stdChrome=dojo.create("div",{"class":"editFocusStdChrome"},this.domNode);this._frames=[];for(var a=0;4>a;a++){var b=dojo.create("div",{"class":"editFocusFrame"},this._stdChrome);this._frames.push(b);this.connect(b,"onmousedown","onMouseDown")}dojo.addClass(this._frames[0],"editFocusFrameLEFT");dojo.addClass(this._frames[1],
"editFocusFrameRIGHT");dojo.addClass(this._frames[2],"editFocusFrameTOP");dojo.addClass(this._frames[3],"editFocusFrameBOTTOM");this._nobs=[];for(a=0;8>a;a++)b=dojo.create("div",{"class":"editFocusNob"},this._stdChrome),this._nobs.push(b),this.connect(b,"onmousedown","onMouseDown");this._frameIndex=this._nobIndex=-1;this._custom=dojo.create("div",{"class":"editFocusCustom"},this.domNode);window.fframe=this},resize:function(a,b){b&&(this._selectedWidget=b);this._moverCurrent=dojo.mixin({},a);this._moverCurrentConstrained=
dojo.mixin({},this._moverCurrent);this._updateFocusChrome(this._moverCurrent,!0);this._contexDiv&&(this._contexDiv.style.left=a.w+10+"px",this._updateSubwidgetList());this._box=a},getBounds:function(){return this._moverCurrent},show:function(a,b){b=b&&b.inline;if(a){this._custom.innerHTML="";var e=c.queryDescriptor(a.type,"showStandardSelectionChrome");this._stdChrome.style.display=!1===e?"none":"block";this.domNode.style.display="block";this._selectedWidget=a;var e=a.getHelper(),g=!0;if(e&&e.onShowSelection)e.onShowSelection({widget:a,
customDiv:this._custom});b&&(this.showInline(a),g=!1);g&&delete this._inline}},showInline:function(a){this._selectedWidget=a;var b=this._context,g=this;c.getSmartInput(a.type).then(function(c){if(c)if(g._inline=c,c.useParent){if(c=a.getParent())b.deselect(a),b.select(c),b.getFocus(c).showInline(c)}else c.show&&c.show(a.id)})},inlineEditActive:function(){return this._inline&&this._inline.inlineEditActive?this._inline.inlineEditActive():!1},hide:function(a){var b=(a=this._selectedWidget)?a.getHelper():
void 0;if(b&&b.onHideSelection)b.onHideSelection({widget:a,customDiv:this._custom});this.domNode.style.display="none";this._displayedWidget=this._selectedWidget=null;this._inline&&(this._inline.hide(),delete this._inline)},allow:function(a){if(a){this._op=a;var b={},c=this._selectedWidget.getHelper();c&&c.resizeAllowWhich?(c.resizeAllowWhich(this._selectedWidget,b),this._resizeLeft=b.resizeLeft,this._resizeRight=b.resizeRight,this._resizeTop=b.resizeTop,this._resizeBottom=b.resizeBottom):(this._resizeLeft=
this._resizeRight=a.resizeWidth,this._resizeTop=this._resizeBottom=a.resizeHeight);b.left=!this._resizeLeft||this._resizeTop||this._resizeBottom?"none":"block";b.right=!this._resizeRight||this._resizeTop||this._resizeBottom?"none":"block";b.top=!this._resizeTop||this._resizeLeft||this._resizeRight?"none":"block";b.bottom=!this._resizeBottom||this._resizeLeft||this._resizeRight?"none":"block";b.left_top=this._resizeLeft&&this._resizeTop?"block":"none";b.left_bottom=this._resizeLeft&&this._resizeBottom?
"block":"none";b.right_top=this._resizeRight&&this._resizeTop?"block":"none";b.right_bottom=this._resizeRight&&this._resizeBottom?"block":"none";this._nobs[0].style.display=b.left;this._nobs[1].style.display=b.right;this._nobs[2].style.display=b.top;this._nobs[3].style.display=b.bottom;this._nobs[4].style.display=b.left_top;this._nobs[5].style.display=b.left_bottom;this._nobs[6].style.display=b.right_top;this._nobs[7].style.display=b.right_bottom;this._nobs[0].style.cursor=this._frames[0].style.cursor=
this._resizeLeft?"w-resize":"auto";this._nobs[1].style.cursor=this._frames[1].style.cursor=this._resizeRight?"e-resize":"auto";this._nobs[2].style.cursor=this._frames[2].style.cursor=this._resizeTop?"n-resize":"auto";this._nobs[3].style.cursor=this._frames[3].style.cursor=this._resizeBottom?"s-resize":"auto";this._nobs[4].style.cursor="none"!=b.left_top?"nw-resize":"auto";this._nobs[5].style.cursor="none"!=b.left_bottom?"sw-resize":"auto";this._nobs[6].style.cursor="none"!=b.right_top?"ne-resize":
"auto";this._nobs[7].style.cursor="none"!=b.right_bottom?"se-resize":"auto"}},_updateFocusChrome:function(a,b){"moverLeft"in a&&(this._context.isResizing=!0);if(b=dojo.byId("focusContainer")){b=p.getBorderBoxPageCoords(b);var c=this._context.getParentIframe(),e=p.getBorderBoxPageCoords(c);a.l+=e.l;a.t+=e.t;if(c)if(c.contentDocument)if(c.contentDocument.body){c=c.contentDocument.body;a.l-=p.getScrollLeft(c);a.t-=p.getScrollTop(c);this.domNode.style.left=a.l-b.l+"px";this.domNode.style.top=a.t-b.t+
"px";b=a.w;var c=a.h,g=a.w,e=a.h,d=a.w,h=a.h,k=a.w+4+4;a=a.h+4+4;this._frames[0].style.left=this._frames[2].style.left=this._frames[3].style.left="-6px";this._frames[0].style.top=this._frames[2].style.top=this._frames[1].style.top="-6px";this._frames[0].style.height=a+"px";this._frames[1].style.height=a+"px";this._frames[1].style.left=d+"px";this._frames[2].style.width=k+"px";this._frames[3].style.top=h+"px";this._frames[3].style.width=k+"px";a=Math.round(g/2-this.nobSize/2);e=Math.round(e/2-this.nobSize/
2);this._nobs[0].style.left=this._nobs[4].style.left=this._nobs[5].style.left="-11px";this._nobs[2].style.top=this._nobs[4].style.top=this._nobs[6].style.top="-11px";this._nobs[0].style.top=e+"px";this._nobs[1].style.left=b+"px";this._nobs[1].style.top=e+"px";this._nobs[2].style.left=a+"px";this._nobs[3].style.left=a+"px";this._nobs[3].style.top=c+"px";this._nobs[5].style.top=c+"px";this._nobs[6].style.left=b+"px";this._nobs[7].style.left=b+"px";this._nobs[7].style.top=c+"px"}else console.error("have no body");
else console.error("have no contentDocument");else console.error("have no parent iframe")}},onMouseDown:function(a){this._removeKeyHandlers();if(this._selectedWidget&&this._selectedWidget.domNode&&2!==a.button&&!a.ctrlKey&&"davinci.ve.tools.SelectTool"==this._context._activeTool.declaredClass){this._shiftKey=a.shiftKey;this._sKey=!1;this._nobIndex=dojo.indexOf(this._nobs,a.target);this._frameIndex=dojo.indexOf(this._frames,a.target);var b=a.pageX-400,c=a.pageY-400,g=null,h=this._selectedWidget.getHelper(),
g=h&&h.getMarginBoxPageCoords?h.getMarginBoxPageCoords(this._selectedWidget):p.getMarginBoxPageCoords(this._selectedWidget.domNode),h=p.getBorderBoxPageCoords(this._context.getParentIframe());this._moverStart={moverLeft:b,moverTop:c,l:g.l+h.l,t:g.t+h.t,w:g.w,h:g.h};g=document.body;this._moverCurrent=dojo.mixin({},this._moverStart);this._moverDragDiv=dojo.create("div",{className:"focusDragDiv",style:"position:absolute;left:"+b+"px;top:"+c+"px;width:800px;height:800px"},g);this._mover=new d(this._moverDragDiv,
a,this);dojo.stopEvent(a);this._mouseDownInfo={widget:this._selectedWidget,pageX:a.pageX+h.l,pageY:a.pageY+h.t,dateValue:Date.now()};this._moverMouseDownEvent=a;this._moverMouseUpEvent=null;this._moverMouseUpHandler=dojo.connect(this._moverDragDiv,"onmouseup",dojo.hitch(this,function(a){this.onMouseUp(a)}));a=this._context.getDocument();(b=document.getElementById("maqetta_project_select"))&&b.focus();a.defaultView.focus();this._keyDownHandler=dojo.connect(a,"onkeydown",dojo.hitch(this,function(a){this.onKeyDown(a)}));
this._keyUpHandler=dojo.connect(a,"onkeyup",dojo.hitch(this,function(a){this.onKeyUp(a)}))}},onMove:function(a,b,c){this._mouseDownInfo=null;this._moverDragDiv&&(this._moverDragDiv.style.left=b.l+"px",this._moverDragDiv.style.top=b.t+"px");if(!(0===this._frameIndex&&!this._resizeLeft||1===this._frameIndex&&!this._resizeRight||2===this._frameIndex&&!this._resizeTop||3===this._frameIndex&&!this._resizeBottom)){a=this._moverStart;c=b.l-a.moverLeft;b=b.t-a.moverTop;if(0===this._frameIndex||4===this._nobIndex||
0===this._nobIndex||5===this._nobIndex)this._moverCurrent.l=a.l+c,this._moverCurrent.w=a.w-c;else if(1===this._frameIndex||6===this._nobIndex||1===this._nobIndex||7===this._nobIndex)this._moverCurrent.w=a.w+c;if(2===this._frameIndex||4===this._nobIndex||2===this._nobIndex||6===this._nobIndex)this._moverCurrent.t=a.t+b,this._moverCurrent.h=a.h-b;else if(3===this._frameIndex||5===this._nobIndex||3===this._nobIndex||7===this._nobIndex)this._moverCurrent.h=a.h+b;b=this._moverCurrent.w;a=this._moverCurrent.h;
c=!1;if(this._selectedWidget&&"IMG"===this._selectedWidget.domNode.nodeName){var e=this._selectedWidget.domNode,g=e.naturalWidth,e=e.naturalHeight;"number"==typeof e&&0<e&&"number"==typeof g&&0<g&&(c=g/e,b<c*a?b=a*c:a=b/c,c=!0)}c||(0===this._frameIndex||0===this._nobIndex||1===this._frameIndex||1===this._nobIndex?a=b:2===this._frameIndex||2===this._nobIndex||3===this._frameIndex||3===this._nobIndex?b=a:b>a?a=b:b=a);this._moverCurrentConstrained={l:this._moverCurrent.l,t:this._moverCurrent.t,w:b,h:a};
if(0===this._frameIndex||0===this._nobIndex||1===this._frameIndex||1===this._nobIndex)this._moverCurrentConstrained.t-=(this._moverCurrentConstrained.h-this._moverCurrent.h)/2;if(2===this._frameIndex||2===this._nobIndex||3===this._frameIndex||3===this._nobIndex)this._moverCurrentConstrained.l-=(this._moverCurrentConstrained.w-this._moverCurrent.w)/2;b=dojo.mixin({},this._shiftKey?this._moverCurrentConstrained:this._moverCurrent);a=p.getBorderBoxPageCoords(this._context.getParentIframe());b.l-=a.l;
b.t-=a.t;this._updateFocusChrome(b,!1)}},onFirstMove:function(a){},onMoveStart:function(a){},_moverDoneCleanup:function(){var a=this._context,b=a._chooseParent;this._lastEventTarget=null;this._removeKeyHandlers();a.dragMoveCleanup();b.parentListDivDelete();this._mover=void 0;this._frameIndex=this._nobIndex=-1;a.isResizing=!1},onMoveStop:function(a){if(this._moverDragDiv&&((a=this._moverDragDiv.parentNode)&&a.removeChild(this._moverDragDiv),this._moverDragDiv=null,this._moverCurrent.l!=this._moverStart.l||
this._moverCurrent.t!=this._moverStart.t||this._moverCurrent.w!=this._moverStart.w||this._moverCurrent.h!=this._moverStart.h)){a=void 0;if(this._selectedWidget&&this._selectedWidget.domNode)if(this._sKey)for(var b=g.getStatesListCurrent(this._selectedWidget.domNode),c=0;c<b.length;c++){if(b[c]){a=b[c];break}}else a=g.propertyDefinedForAnyCurrentState(this._selectedWidget.domNode,["width","height"]);b=this._shiftKey?this._moverCurrentConstrained:this._moverCurrent;b.w==this._moverStart.w&&delete b.w;
b.h==this._moverStart.h&&delete b.h;"number"!=typeof b.l&&(b.l=this._moverStart.l);"number"!=typeof b.t&&(b.t=this._moverStart.t);b.l==this._moverStart.l&&b.t==this._moverStart.t&&(delete b.l,delete b.t);b=dojo.mixin({},b);b.hasOwnProperty("l")&&(c=p.getBorderBoxPageCoords(this._context.getParentIframe()),b.l-=c.l,b.t-=c.t);this.onExtentChange(this,this._moverStart,b,a)}this._moverDoneCleanup();a=this._moverMouseUpEvent||this._moverMouseDownEvent;this._moverMouseUpEvent=this._moverMouseDownEvent=
null;if(a&&a.target){b=Date.now();this._mouseDownInfo=null;if(this._lastMouseUp&&10>=Math.abs(a.pageX-this._lastMouseUp.pageX)&&10>=Math.abs(a.pageY-this._lastMouseUp.pageY)&&750>=b-this._lastMouseUp.dateValue)this.onDblClick(a);this._lastMouseUp={pageX:a.pageX,pageY:a.pageY,dateValue:b};dojo.stopEvent(a)}},onMouseUp:function(a){this._moverMouseUpEvent=a},onDblClick:function(a){this.showInline(this._selectedWidget);a.stopPropagation()},onKeyDown:function(a){a&&this._moverDragDiv?(dojo.stopEvent(a),
a.keyCode==dojo.keys.SHIFT?(this._shiftKey=!0,this._updateFocusChrome(this._shiftKey?this._moverCurrentConstrained:this._moverCurrent,!1)):83==a.keyCode&&(this._sKey=!0)):this._removeKeyHandlers()},onKeyUp:function(a){a&&this._moverDragDiv?(dojo.stopEvent(a),a.keyCode==dojo.keys.SHIFT?(this._shiftKey=!1,this._updateFocusChrome(this._shiftKey?this._moverCurrentConstrained:this._moverCurrent,!1)):83==a.keyCode&&(this._sKey=!1)):this._removeKeyHandlers()},_removeKeyHandlers:function(){this._keyDownHandler&&
(dojo.disconnect(this._keyDownHandler),this._keyDownHandler=null);this._keyUpHandler&&(dojo.disconnect(this._keyUpHandler),this._keyUpHandler=null)},onExtentChange:function(a,b,c,g){},isFocusNode:function(a){return dojo.hasClass(a,"focusDragDiv")||dojo.hasClass(a,"editFocusNob")||dojo.hasClass(a,"editFocusFrame")||dojo.hasClass(a,"maqFocus")||dojo.hasClass(a,"editFocusStdChrome")},showContext:function(a,b){"davinci.ve.themeEditor.ThemeEditor"==this._context.editor.declaredClass&&(this._contexDiv||
(this._context=a,this._createContextPopUp()),this._contexDiv.style.display="block")},hideContext:function(){"davinci.ve.themeEditor.ThemeEditor"==this._context.editor.declaredClass&&this._contexDiv&&(this._contexDiv.style.display="none")},_createContextPopUp:function(){var a=dojo.doc.createElement("div");a.id="ieb";this._contexDiv=a;this.domNode.appendChild(a)},_createSubwidgetList:function(){var a=this._context._selectedWidget;if(a){var b=this._context.getThemeMeta().metadata,c=b.getWidgetType(a),
b=(b=b.getMetadata(c))?b.subwidgets:null;this._displayedWidget=a;if(b){c=this._contexDiv;c.innerHTML="\x3cspan\x3e\x3c/span\x3e";c.style.position="absolute";c.style.left=this._box.w+10+"px";c.className="themeSubwidgetMenu";dojo.connect(c,"onmousedown",this,"stopPropagation");c.style.display="none";this._contexDiv=c;this.domNode.appendChild(c);var g=this._contexDiv.firstElementChild,d=this._context.theme.name+"_subwidgetmenu";(c=dijit.byId(d))&&c.destroyRecursive(!1);var r=this._context.getDijit(),
c=new r.Menu({id:d},g),g=!1;a.subwidget||(g=!0);g=new r.CheckedMenuItem({label:"WidgetOuterContainer",id:this._context.theme.name+"_WidgetOuterContainer",checked:g,onClick:dojo.hitch(this,"_subwidgetSelected",this._context.theme.name+"_WidgetOuterContainer")});g.domNode.children[0].children[0].setAttribute("src",g.domNode.children[0].children[0].src);c.addChild(g);this._currentItem=g;for(var p in b)g=a.subwidget===p,b=new r.CheckedMenuItem({label:p,id:this._context.theme.name+"_"+p,checked:g,onClick:dojo.hitch(this,
"_subwidgetSelected",this._context.theme.name+"_"+p)}),b.domNode.children[0].children[0].setAttribute("src",b.domNode.children[0].children[0].src),c.addChild(b),g&&(this._currentItem=b);c.startup();this._cm=c;this._updateSubwidgetListForState();this._connections=[];this._connections.push(dojo.subscribe("/davinci/ui/subwidgetSelectionChanged",dojo.hitch(this,this._subwidgetSelectedChange)));this._connections.push(dojo.subscribe("/davinci/states/state/changed",dojo.hitch(this,this._updateSubwidgetListForState)))}else this._contexDiv.innerHTML=
""}},stopPropagation:function(a){a.stopPropagation()},_subwidgetSelected:function(a,b){b.stopPropagation();var c=this._context.getDijit();a=c.byId(a);a.checked?(this._currentItem&&a!=this._currentItem&&this._currentItem.set("checked",!1),this._currentItem=a,c=this._currentItem.label):((this._currentItem=c.byId(this._context.theme.name+"_WidgetOuterContainer"))&&this._currentItem.set("checked",!0),c=null);b.currentTarget.id===this._context.theme.name+"_WidgetOuterContainer"&&(c=null);dojo.publish("/davinci/ui/subwidgetSelectionChanged",
[{subwidget:c,origin:this.declaredClass}])},_subwidgetSelectedChange:function(a){var b=this._context.getDijit();a.origin!==this.declaredClass&&(this._currentItem&&this._currentItem.set("checked",!1),(this._currentItem=a.subwidget?b.byId(this._context.theme.name+"_"+a.subwidget):b.byId(this._context.theme.name+"_WidgetOuterContainer"))&&this._currentItem.set("checked",!0))},_updateSubwidgetListForState:function(){if(this._context.editor==b.currentEditor)if(this._context._selectedWidget&&this._displayedWidget===
this._context._selectedWidget&&this._cm){var a=b.currentEditor,c=a._theme;this._cm.getChildren().forEach(function(b){var e=b.label;"WidgetOuterContainer"===e&&(e=null);b.setDisabled(!c.isStateValid(this._displayedWidget,a._currentState,e))},this)}else this._clearList(),this._createSubwidgetList()},_updateSubwidgetList:function(){this._displayedWidget!==this._context._selectedWidget&&(this._clearList(),this._createSubwidgetList())},_clearList:function(){if(this._cm)for(this._cm.destroyRecursive(!1),
delete this._cm;connection=this._connections.pop();)dojo.unsubscribe(connection);this._currentItem=null},dojoStyle:function(a,b,c){if(a&&a.ownerDocument&&a.ownerDocument.defaultView&&a.ownerDocument.defaultView.getComputedStyle(a))return dojo.style.apply(dojo,arguments)}})})},"dojo/_base/window":function(){define(["./kernel","./lang","../sniff"],function(n,m,k){var h={global:n.global,doc:this.document||null,body:function(d){d=d||n.doc;return d.body||d.getElementsByTagName("body")[0]},setContext:function(d,
b){n.global=h.global=d;n.doc=h.doc=b},withGlobal:function(d,b,c,g){var p=n.global;try{return n.global=h.global=d,h.withDoc.call(null,d.document,b,c,g)}finally{n.global=h.global=p}},withDoc:function(d,b,c,g){var p=h.doc,a=k("quirks"),e=k("ie"),q,u,w;try{return n.doc=h.doc=d,n.isQuirks=k.add("quirks","BackCompat"==n.doc.compatMode,!0,!0),k("ie")&&(w=d.parentWindow)&&w.navigator&&(q=parseFloat(w.navigator.appVersion.split("MSIE ")[1])||void 0,(u=d.documentMode)&&5!=u&&Math.floor(q)!=u&&(q=u),n.isIE=
k.add("ie",q,!0,!0)),c&&"string"==typeof b&&(b=c[b]),b.apply(c,g||[])}finally{n.doc=h.doc=p,n.isQuirks=k.add("quirks",a,!0,!0),n.isIE=k.add("ie",e,!0,!0)}}};m.mixin(n,h);return h})},"dojo/_base/html":function(){define("./kernel ../dom ../dom-style ../dom-attr ../dom-prop ../dom-class ../dom-construct ../dom-geometry".split(" "),function(n,m,k,h,d,b,c,g){n.byId=m.byId;n.isDescendant=m.isDescendant;n.setSelectable=m.setSelectable;n.getAttr=h.get;n.setAttr=h.set;n.hasAttr=h.has;n.removeAttr=h.remove;
n.getNodeProp=h.getNodeProp;n.attr=function(b,a,c){return 2==arguments.length?h["string"==typeof a?"get":"set"](b,a):h.set(b,a,c)};n.hasClass=b.contains;n.addClass=b.add;n.removeClass=b.remove;n.toggleClass=b.toggle;n.replaceClass=b.replace;n._toDom=n.toDom=c.toDom;n.place=c.place;n.create=c.create;n.empty=function(b){c.empty(b)};n._destroyElement=n.destroy=function(b){c.destroy(b)};n._getPadExtents=n.getPadExtents=g.getPadExtents;n._getBorderExtents=n.getBorderExtents=g.getBorderExtents;n._getPadBorderExtents=
n.getPadBorderExtents=g.getPadBorderExtents;n._getMarginExtents=n.getMarginExtents=g.getMarginExtents;n._getMarginSize=n.getMarginSize=g.getMarginSize;n._getMarginBox=n.getMarginBox=g.getMarginBox;n.setMarginBox=g.setMarginBox;n._getContentBox=n.getContentBox=g.getContentBox;n.setContentSize=g.setContentSize;n._isBodyLtr=n.isBodyLtr=g.isBodyLtr;n._docScroll=n.docScroll=g.docScroll;n._getIeDocumentElementOffset=n.getIeDocumentElementOffset=g.getIeDocumentElementOffset;n._fixIeBiDiScrollLeft=n.fixIeBiDiScrollLeft=
g.fixIeBiDiScrollLeft;n.position=g.position;n.marginBox=function(b,a){return a?g.setMarginBox(b,a):g.getMarginBox(b)};n.contentBox=function(b,a){return a?g.setContentSize(b,a):g.getContentBox(b)};n.coords=function(b,a){n.deprecated("dojo.coords()","Use dojo.position() or dojo.marginBox().");b=m.byId(b);var c=k.getComputedStyle(b),c=g.getMarginBox(b,c);b=g.position(b,a);c.x=b.x;c.y=b.y;return c};n.getProp=d.get;n.setProp=d.set;n.prop=function(b,a,c){return 2==arguments.length?d["string"==typeof a?
"get":"set"](b,a):d.set(b,a,c)};n.getStyle=k.get;n.setStyle=k.set;n.getComputedStyle=k.getComputedStyle;n.__toPixelValue=n.toPixelValue=k.toPixelValue;n.style=function(b,a,c){switch(arguments.length){case 1:return k.get(b);case 2:return k["string"==typeof a?"get":"set"](b,a)}return k.set(b,a,c)};return n})},"xblox/model/loops/ForBlock":function(){define("dcl/dcl xblox/model/Block xblox/model/variables/Variable xblox/model/Contains dojo/promise/all dojo/Deferred".split(" "),function(n,m,k,h,d,b){return n([m,
h],{declaredClass:"xblox.model.loops.ForBlock",initial:null,"final":null,comparator:null,modifier:null,items:null,counterName:null,_counter:null,name:"For",sharable:!0,icon:"",ignoreErrors:!1,deferred:!0,_forState:!1,_currentForIndex:0,runFrom:function(c,g,d){var a=this,e=c||this.items;c=[];var q=function(b){b._deferredObject.then(function(c){b._lastResult=b._lastResult||c;a._currentIndex++;a.runFrom(e,a._currentIndex,d)})};if(e.length)for(;g<e.length;g++){var p=e[g];if(!1!==p.enabled)if(!0===p.deferred){p._deferredObject=
new b;this._currentIndex=g;q(p);c.push(p.solve(this.scope,d));break}else c.push(p.solve(this.scope,d))}else this.onSuccess(this,d);return c},runFromDirect:function(c,g,d){var a=this,e=c||this.items;c=[];var q=function(b){b._deferredObject.then(function(c){b._lastResult=b._lastResult||c;a._currentIndex++;a.runFrom(e,a._currentIndex,d)})};if(e.length)for(;g<e.length;g++){var p=e[g];if(!1!==p.enabled)if(!0===p.deferred){p._deferredObject=new b;this._currentIndex=g;q(p);c.push(p.solve(this.scope,d));
break}else c.push(p.solve(this.scope,d))}else this.onSuccess(this,d);return c},solveSubs:function(b,g,p,a){var c=this;a.override=a.override||{};a.override.args=[this._currentForIndex];if(p.length)return g=c.runFrom(p,0,a),d(g).then(function(a){},function(e){c.onDidRunItem(b,e,a)}),g;c.onDidRunItem(b,g,a)},solveSubsDirect:function(b,g,d,a){a.override=a.override||{};a.override.args=[this._currentForIndex];if(d.length)return this.runFromDirect(d,0,a)},_solve:function(c,g){var p=new b,a=this;(c=this.solveSubs(p,
null,this.items,g))?d(c).then(function(b){b=b.indexOf(!1);!0!==a.ignoreErrors&&-1!==b?p.resolve(!1):p.resolve(!0)}):p.resolve(!0);return p},step:function(c,g){var d=this._checkCondition(c,g),a=new b;d&&this._solve(c,g).then(function(b){1==b?a.resolve(!0):a.resolve(!1)});return a},loop:function(b,g){var c=this;this.step(b,g).then(function(a){c._updateCounter(b);c._currentForIndex=c._counter.value;if(1==a)c.loop(b,g);else c.onFailed(c,g)})},_solveDirect:function(b,g){return this.solveSubsDirect(null,
null,this.items,g)},stepDirect:function(b,g){return this._solveDirect(b,g)},loopDirect:function(b,g){this.stepDirect(b,g);for(var c=parseInt(this.initial,10);c<parseInt(this["final"],10);c++)this.stepDirect(b,g)},solve:function(b,g){this._counter=new k({title:this.counterName,value:this.initial,scope:b,register:!1});this._forState=!0;this._currentForIndex=this.initial;this.deferred?this.loop(b,g):this.loopDirect(b,g);return[]},_checkCondition:function(b,g){b=b.parseExpression(""+this._counter.value+
this.comparator+this["final"]);if(0!=b)this.onSuccess(this,g);return this._forState=b},_updateCounter:function(b){var c=this._counter.value,c=b.parseExpression(""+c+this.modifier);if(c==this._counter.value)return!1;this._counter.value=c;return!0},mayHaveChildren:function(){return null!=this.items&&0<this.items.length},getChildren:function(){var b=[];this.items&&(b=b.concat(this.items));return b},canAdd:function(){return[]},toText:function(){return this.getBlockIcon("F")+this.name+" "+this.initial+
" "+this.comparator+" "+this["final"]+" with "+this.modifier},getFields:function(){var b=this.inherited(arguments)||this.getDefaultFields();return b=b.concat([this.utils.createCI("initial",13,this.initial,{group:"General",title:"Initial",dst:"initial"}),this.utils.createCI("Final",13,this["final"],{group:"General",title:"Final",dst:"final"}),this.utils.createCI("comparator",13,this.comparator,{group:"General",title:"Comparision",dst:"comparator"}),this.utils.createCI("modifier",13,this.modifier,{group:"General",
title:"Modifier",dst:"modifier"}),this.utils.createCI("Abort on Error",0,this.ignoreErrors,{group:"General",title:"Ignore Errors",dst:"ignoreErrors"}),this.utils.createCI("Deferred",0,this.deferred,{group:"General",title:"Use Deferred",dst:"deferred"})])}})})},"xide/layout/_TabContainer":function(){define("dcl/dcl xide/utils xide/_base/_Widget xide/container/_PaneBase xide/$ xide/lodash".split(" "),function(n,m,k,h,d,b){h=n(h,{declaredClass:"xide/layout/_TabPane",postMixInProperties:function(){this.templateString=
'\x3cdiv attachTo\x3d"containerNode" style\x3d"height:inherit;width:inherit;position:relative;" class\x3d"tab-pane '+(this.selected?"active":"")+'"\x3e\x3c/div\x3e'},__init:function(){var b=this.$toggleNode;this.__addHandler(b,"hidden.bs.tab","_onHided");this.__addHandler(b,"hide.bs.tab","_onHide");this.__addHandler(b,"shown.bs.tab","_onShown");this.__addHandler(b,"show.bs.tab","_onShow")}});k=n(k,{declaredClass:"xide/layout/_TabContainer",tabClass:h,tabs:null,tabBar:null,tabContentNode:null,padding:"0px",
containerCSSClass:"",direction:"above",navBarClass:"",templateString:'\x3cdiv class\x3d"${!containerCSSClass} tabbable tabs-${!direction}" style\x3d"height: inherit;" attachTo\x3d"containerNode"\x3e\x3cul attachTo\x3d"tabBar" class\x3d"nav nav-tabs" role\x3d"tablist" /\x3e\x3cdiv attachTo\x3d"tabContentNode" style\x3d"width: inherit; height: 100%;" class\x3d"tab-content"/\x3e\x3c/div\x3e',getTab:function(c){return b.find(this._widgets,{title:c})},_unselectAll:function(){b.each(this._widgets,function(b){b.unselect()})},
onShowTab:function(b){this._emit("selectChild",b)},getSelected:function(){for(var b=0;b<this.tabs.length;b++){var g=this.tabs[b];if(g.pane.selected)return g.pane}},selectChild:function(c){var g=c;null!==c&&(b.isString(c)?g=this.getTab(c):b.isNumber(c)&&(g=this._widgets[0]),g&&g.select&&(this._unselectAll(),g.select()));return g},addWidget:function(b,g,d,a,e,q,h,k,r){d=a;b.isContainer||(d=this._createTab(this.tabClass,{title:g.title,icon:g.icon,selected:g.selected,ignoreAddChild:!0}));return d},resize:function(){if(this.tabBar)switch(this.direction){case "left":case "right":this.$tabContentNode.css("width",
"");break;case "above":case "below":this.$containerNode&&!1!==this.resizeContainer&&this.$tabContentNode.css("height",this.$containerNode.height()-this.$tabBar.height())}b.each(this._widgets,function(b){b.resize()})},_createTab:function(b,g){!this.tabs&&(this.tabs=[]);var c=0==this.tabs.length?"active":"",a=g.icon||"",e=g.title||"";b=m.addWidget(b||this.tabClass,{title:e,icon:a,selected:null!=g.selected?g.selected:0==this.tabs.length,owner:this},null,this.tabContentNode,!0);g=b.id;c=d('\x3cli class\x3d"'+
c+'"\x3e\x3ca href\x3d"#'+g+'" data-toggle\x3d"tab"\x3e\x3cspan class\x3d"'+(a?" "+a:"")+'"/\x3e '+e+"\x3c/a\x3e\x3c/li\x3e");d(this.tabBar).append(c);b.$toggleNode=c.find('a[data-toggle\x3d"tab"]');b.$selectorNode=c.find("li");b.$toggleButton=c;b.__init();this.tabs.push({id:g,pane:b,button:c[0]});this.add(b,null,!1);return b},removeChild:function(c,g){if(c=b.isString(c)?this.getTab(c):c){if(c.destroy(),this._widgets||(this._widgets=[]),this._widgets.remove(c),!1!==g&&(c=this._widgets[this._widgets.length-
1]))this.resize(),this.selectChild(c)}else console.error("invalid child !")},empty:function(){for(;this._widgets.length;)this.removeChild(this._widgets[0],!1)},postMixInProperties:function(){"below"===this.direction&&(this.templateString='\x3cdiv class\x3d"${!containerCSSClass} tabbable tabs-${!direction}" style\x3d"height: inherit;" attachTo\x3d"containerNode"\x3e\x3cdiv attachTo\x3d"tabContentNode" style\x3d"width: inherit; padding:${!padding}; height: 100%;" class\x3d"tab-content"/\x3e\x3cul attachTo\x3d"tabBar" class\x3d"nav nav-tabs" role\x3d"tablist" /\x3e\x3c/div\x3e')},
createTab:function(b,g,d,a,e){return this._createTab(a,m.mixin({icon:g,selected:d,title:b},e))}});k.tabClass=h;n.chainAfter(k,"postMixInProperties");n.chainAfter(k,"resize");n.chainAfter(k,"destroy");return k})},"xtrack/data/Store":function(){define(["xdojo/declare","xide/utils","xide/data/TreeMemory","xide/data/ObservableStore","dstore/Trackable"],function(n,m,k,h,d){return n("xtrack.data.TrackingStore",[k,d,h],{parentField:"parent",idProperty:"url",removeSync:function(b){var c=this.getSync(b);c&&
m.removeSync(this,c,b,"parent");return this.inherited(arguments)}})})},"davinci/ve/commands/ResizeCommand":function(){define(["dojo/_base/declare","dojo/dom-geometry","davinci/ve/widget","davinci/ve/States","davinci/ve/utils/StyleArray"],function(n,m,k,h,d){return n("davinci.ve.commands.ResizeCommand",null,{name:"resize",constructor:function(b,c,g,d){this._id=b?b.id:void 0;b=/^\s*[-+]?[0-9]*\.?[0-9]+\s*$/;b.test(c)&&(c=parseFloat(c));b.test(g)&&(g=parseFloat(g));this._newBox={w:c,h:g};this._applyToStateIndex=
d&&"Normal"!=d&&"undefined"!=d?d:"undefined"},execute:function(){if(this._id&&this._newBox){var b=k.byId(this._id);if(b&&b.domNode){var c=b.domNode,g=c.ownerDocument.defaultView.getComputedStyle(c),p=m.getContentBox(c,g);this._oldBox={w:p.w,h:p.h};var p=this._newBox.w,a=this._newBox.h;this._usesBorderBox(c)&&(c=m.getPadBorderExtents(c,g),"number"==typeof p&&0<=p&&(p+=c.w),"number"==typeof a&&0<=a&&(a+=c.h));c=[{}];"number"==typeof p?c[0].width=p+"px":"string"==typeof p&&(c[0].width=p);"number"==typeof a?
c[0].height=a+"px":"string"==typeof a&&(c[0].height=a);p=b.getStyleValuesAllStates();this._oldStyleValuesAllStates=dojo.clone(p);this._oldBox&&(this._oldStyleValuesAllStates[this._applyToStateIndex]=d.mergeStyleArrays(this._oldStyleValuesAllStates[this._applyToStateIndex],[{width:this._oldBox.w+"px"},{height:this._oldBox.h+"px"}]));p[this._applyToStateIndex]=p[this._applyToStateIndex]?d.mergeStyleArrays(p[this._applyToStateIndex],c):c;b.setStyleValuesAllStates(p);a=h.getStatesListCurrent(b.domNode);
c=d.mergeStyleArrays([],p.undefined);for(g=0;g<a.length;g++)p[a[g]]&&(c=d.mergeStyleArrays(c,p[a[g]]));b.setStyleValuesCanvas(c);b.setStyleValuesModel(p.undefined);this._resize(b);h.resetState(b.domNode);dojo.publish("/davinci/ui/widgetPropertiesChanged",[[b]])}}},setContext:function(b){this._context=b},undo:function(){if(this._id){var b=k.byId(this._id);if(b){var c=this._oldStyleValuesAllStates,g=this._applyToStateIndex;b.setStyleValuesAllStates(c);c=d.mergeStyleArrays(c.undefined,c[g]);b.setStyleValuesCanvas(c);
b.setStyleValuesModel(this._oldStyleValuesAllStates.undefined);this._resize(b);h.resetState(b.domNode);dojo.publish("/davinci/ui/widgetPropertiesChanged",[[b]])}}},_usesBorderBox:function(b){var c=b.tagName.toLowerCase();(b=b.getAttribute("type"))&&(b=b.toLowerCase(b));return"table"==c||"button"==c||"input"==c&&"button"==b},_resize:function(b){var c=b.getParent();c&&c.dijitWidget&&c.dijitWidget.isLayoutContainer?c.resize():b.resize&&b.resize();b.renderWidget();b._updateSrcStyle()}})})},"xide/registry":function(){define(["dojo/_base/array",
"dojo/_base/window","xdojo/has"],function(n,m,k){var h={},d={},b={length:0,add:function(b){this._hash[b.id]&&(this.remove(b.id),this.add(b));d[b.id]=b;this.length++},remove:function(b){d[b]&&(delete d[b],this.length--)},byId:function(b){return"string"==typeof b?d[b]:b},byNode:function(b){return d[b.getAttribute("widgetId")]},toArray:function(){return _.values(_.mapKeys(d,function(b,g){b.id=g;return b}))},getUniqueId:function(b){var c;do c=b+"_"+(b in h?++h[b]:h[b]=0);while(d[c]);return c},findWidgets:function(b,
g){function c(b){for(b=b.firstChild;b;b=b.nextSibling)if(1==b.nodeType){var e=b.getAttribute("widgetId");e?(e=d[e])&&a.push(e):b!==g&&c(b)}}var a=[];c(b);return a},_destroyAll:function(){_.each(b.findWidgets(m.body()),function(b){b._destroyed||(b.destroyRecursive?b.destroyRecursive():b.destroy&&b.destroy())})},getEnclosingWidget:function(b){for(;b;){var c=1==b.nodeType&&b.getAttribute("widgetId");if(c)return d[c];b=b.parentNode}return null},_hash:d};return b})},"xfile/views/FileOperationDialog":function(){define(["dcl/dcl",
"xide/types","xide/views/_Dialog"],function(n,m,k){return n(k,{title:"",type:m.DIALOG_TYPE.INFO,size:m.DIALOG_SIZE.SIZE_SMALL,bodyCSS:{},failedText:" Failed!",successText:": Success!",showSpinner:!0,spinner:'  \x3cspan class\x3d"fa-spinner fa-spin"/\x3e',notificationMessage:null,doOk:function(h){this.onBeforeOk&&this.onBeforeOk();this.showMessage();var d=this;h.then(function(b){d._onSuccess(b)},function(b){d._onError()})},_onSuccess:function(h,d,b){h=h||this.title;(b=b||this.notificationMessage)&&
b.update({message:h+this.successText+(d?"\x3cbr/\x3e"+d:""),type:"info",actions:!1,duration:1500});this.onSuccess&&this.onSuccess()},_onError:function(h,d,b){h=h||this.title;(b=b||this.notificationMessage)&&b.update({message:h+this.failedText+(d?"\x3cbr/\x3e"+d:""),type:"error",actions:!1,duration:15E3});this.onError&&this.onError(d)},onOk:function(){this.showMessage();this.doOk(this.getOkDfd())},showMessage:function(h){if(this.notificationMessage)return this.notificationMessage;h=h||this.title;return this.notificationMessage=
h=this.ctx.getNotificationManager().postMessage({message:h+(this.showSpinner?this.spinner:""),type:"info",showCloseButton:!0,duration:4500})}})})},"dojo/_base/event":function(){define(["./kernel","../on","../has","../dom-geometry"],function(n,m,k,h){if(m._fixEvent){var d=m._fixEvent;m._fixEvent=function(b,g){(b=d(b,g))&&h.normalizeEvent(b);return b}}var b={fix:function(b,g){return m._fixEvent?m._fixEvent(b,g):b},stop:function(b){k("dom-addeventlistener")||b&&b.preventDefault?(b.preventDefault(),b.stopPropagation()):
(b=b||window.event,b.cancelBubble=!0,m._preventDefault.call(b))}};n.fixEvent=b.fix;n.stopEvent=b.stop;return b})},"dgrid/_StoreMixin":function(){define("dojo/_base/declare dojo/_base/lang dojo/Deferred dojo/aspect dojo/dom-construct dojo/has dojo/on dojo/when".split(" "),function(n,m,k,h,d,b,c,g){function p(a){if("object"!==typeof a)a=Error(a);else if("cancel"===a.dojoType)return;c.emit(this.domNode,"dgrid-error",{grid:this,error:a,cancelable:!0,bubbles:!0})&&console.error(a)}return n(null,{collection:null,
_renderedCollection:null,_rows:null,_observerHandle:null,shouldTrackCollection:!1,getBeforePut:!0,noDataMessage:"",loadingMessage:"",_total:0,constructor:function(){this.dirty={};this._updating={};this._columnsWithSet={};h.before(this,"configStructure",m.hitch(this,function(){this._columnsWithSet={}}))},destroy:function(){this.inherited(arguments);this._renderedCollection&&this._cleanupCollection()},_configColumn:function(a){a.set&&(this._columnsWithSet[a.field]=a);this.inherited(arguments)},_setCollection:function(a){this._renderedCollection&&
(this.cleanup(),this._cleanupCollection({shouldRevert:!a||a.storage!==this._renderedCollection.storage}));this.collection=a;if(this._started){if(a){var b=a;this.sort&&0<this.sort.length&&(b=a.sort(this.sort));b.track&&this.shouldTrackCollection&&(b=b.track(),this._rows=[],this._observerHandle=this._observeCollection(b,this.contentNode,{rows:this._rows}));this._renderedCollection=b}this.refresh()}},_setStore:function(){},_getTotal:function(){return this._total},_cleanupCollection:function(a){a=a||
{};this._renderedCollection.tracking&&this._renderedCollection.tracking.remove();this._observerHandle&&(this._observerHandle.remove(),this._observerHandle=this._rows=null);!1!==a.shouldRevert&&(this.dirty={});this._renderedCollection=this.collection=null},_applySort:function(){this.collection&&this.set("collection",this.collection)},row:function(){var a=this.inherited(arguments);a&&a.data&&"undefined"!==typeof a.id&&(this.collection?a.id=this.collection.getIdentity(a.data):console.error("_StoreMixin:have no collection!"));
return a},refresh:function(){var a=this.inherited(arguments);this.collection||(this.noDataNode=d.create("div",{className:"dgrid-no-data",innerHTML:this.noDataMessage},this.contentNode),this._emit("noData"));return a},refreshCell:function(a){if(!this.collection||!this._createBodyRowCell)return!1;if(a.column){if(a.column&&a.column.selector)return(new k).resolve();this.inherited(arguments);return this.collection.get(a.row.id).then(m.hitch(this,"_refreshCellFromItem",a))}},_refreshCellFromItem:function(a,
b,c){if(a&&a.element){var e=a.element;e.widget&&e.widget.destroyRecursive();d.empty(e);var g=this.dirty&&this.dirty[a.row.id];g&&(b=m.delegate(b,g));this._createBodyRowCell(e,a.column,b,c)}},renderArray:function(){var a=this.inherited(arguments);this.collection||a.length&&this.noDataNode&&d.destroy(this.noDataNode);return a},insertRow:function(a,b,c,g,p){var e=this.collection,q=this.dirty,e=e&&e.getIdentity(a),h;e in q&&!(e in this._updating)&&(h=q[e]);h&&(a=m.delegate(a,h));q=this.inherited(arguments);
p&&p.rows&&(p.rows[g]=q);this.noDataNode&&(d.destroy(this.noDataNode),this.noDataNode=null);return q},updateDirty:function(a,b,c){var e=this.dirty,g=e[a];g||(g=e[a]={});g[b]=c},save:function(){function a(a,e){return function(d){var q=b._columnsWithSet,p=b._updating,h,u;if("function"===typeof d.set)d.set(e);else for(h in e)d[h]=e[h];for(h in q)u=q[h].set(d),void 0!==u&&(d[h]=u);p[a]=!0;return c.put(d).then(function(b){delete g[a];delete p[a];r[a]=b;return r})}}var b=this,c=this.collection,g=this.dirty,
d=new k,r={},p=function(a){var e;return b.getBeforePut||!(e=b.row(a).data)?function(){return c.get(a)}:function(){return e}},h=d.then(function(){return r}),A;for(A in g)var m=a(A,g[A]),h=h.then(p(A)).then(m);d.resolve();return h},revert:function(){this.dirty={};this.refresh()},_trackError:function(a){"string"===typeof a&&(a=m.hitch(this,a));var b=this,c;try{c=g(a())}catch(u){a=new k,a.reject(u),c=a.promise}c.otherwise(function(a){p.call(b,a)});return c},removeRow:function(a,b,c){var e={element:a};
!b&&this.noDataMessage&&this.up(e).element===a&&this.down(e).element===a&&(this.noDataNode=d.create("div",{className:"dgrid-no-data",innerHTML:this.noDataMessage},this.contentNode),this._emit("noData"));(e=c&&c.rows||this._rows)&&delete e[a.rowIndex];return this.inherited(arguments)},renderQueryResults:function(a,b,c){c=m.mixin({rows:this._rows},c);var e=this;return a.then(function(a){a=e.renderArray(a,b,c);delete e._lastCollection;return a})},_observeCollection:function(a,b,c){var e=this,g=c.rows,
d,q=[a.on("delete, update",function(a){var q=a.previousIndex,r=a.index;void 0!==q&&g[q]&&("max"in g&&(void 0===r||r<g.min||r>g.max)&&g.max--,d=g[q],d.parentNode===b&&e.removeRow(d,!1,c),g.splice(q,1),("delete"===a.type||"update"===a.type&&(q<r||void 0===r))&&g[q]&&g[q].rowIndex--);"delete"===a.type&&(d=null)}),a.on("add, update",function(a){var q=a.previousIndex,r=a.index;if(void 0!==r&&(!("max"in g)||r>=g.min&&r<=g.max)){"max"in g&&(void 0===q||q<g.min||q>g.max)&&g.max++;if(g.length){if(q=g[r],!q&&
(q=g[r-1]))q=(q.connected||q).nextSibling}else q=e._getFirstRowSibling&&e._getFirstRowSibling(b);d&&q&&d.id===q.id&&(q=(q.connected||q).nextSibling);q&&!q.parentNode&&(q=document.getElementById(q.id));g.splice(r,0,void 0);d=e.insertRow(a.target,b,q,r,c);e.highlightRow(d)}d=null}),a.on("add, delete, update",function(b){var c="undefined"!==typeof b.previousIndex?b.previousIndex:Infinity,d="undefined"!==typeof b.index?b.index:Infinity,q=Math.min(c,d);c!==d&&g[q]&&e.adjustRowIndices(g[q]);Infinity!==
c&&e._processScroll&&(g[c]||g[c-1])&&e._processScroll();e._onNotification(g,b,a);a===e._renderedCollection&&"totalLength"in b&&(e._total=b.totalLength)})];return{remove:function(){for(;0<q.length;)q.pop().remove()}}},_onNotification:function(){}})})},"davinci/js/JSFile":function(){define(["dojo/_base/declare","davinci/js/JSElement"],function(n,m){return n("davinci.js.JSFile",m,{constructor:function(k){this.elementType="JSFile";this.nosemicolon=!0;this._textContent="";k&&(this.origin=k)},getText:function(k){return this._textContent},
setText:function(k){this._textContent=k},getLabel:function(){return this.fileName},getID:function(){return this.fileName},visit:function(k){if(!k.visit(this))for(var h=0;h<this.children.length;h++)this.children[h].visit(k);k.endVisit&&k.endVisit(this)}})})},"dijit/a11yclick":function(){define(["dojo/keys","dojo/mouse","dojo/on","dojo/touch"],function(n,m,k,h){var d=function(b,c){b.dojoClick=!0;return k(b,"click",c)};d.click=d;d.press=function(b,c){var g=k(b,h.press,function(a){("mousedown"!=a.type||
m.isLeft(a))&&c(a)}),d=k(b,"keydown",function(a){a.keyCode!==n.ENTER&&a.keyCode!==n.SPACE||c(a)});return{remove:function(){g.remove();d.remove()}}};d.release=function(b,c){var g=k(b,h.release,function(a){("mouseup"!=a.type||m.isLeft(a))&&c(a)}),d=k(b,"keyup",function(a){a.keyCode!==n.ENTER&&a.keyCode!==n.SPACE||c(a)});return{remove:function(){g.remove();d.remove()}}};d.move=h.move;return d})},"dojo/dnd/Moveable":function(){define("../_base/array ../_base/declare ../_base/lang ../dom ../dom-class ../Evented ../on ../topic ../touch ./common ./Mover ../_base/window".split(" "),
function(n,m,k,h,d,b,c,g,p,a,e,q){return m("dojo.dnd.Moveable",[b],{handle:"",delay:0,skip:!1,constructor:function(a,b){this.node=h.byId(a);b||(b={});this.handle=b.handle?h.byId(b.handle):null;this.handle||(this.handle=this.node);this.delay=0<b.delay?b.delay:0;this.skip=b.skip;this.mover=b.mover?b.mover:e;this.events=[c(this.handle,p.press,k.hitch(this,"onMouseDown")),c(this.handle,"dragstart",k.hitch(this,"onSelectStart")),c(this.handle,"selectstart",k.hitch(this,"onSelectStart"))]},markupFactory:function(a,
b,c){return new c(b,a)},destroy:function(){n.forEach(this.events,function(a){a.remove()});this.events=this.node=this.handle=null},onMouseDown:function(b){if(!this.skip||!a.isFormElement(b)){if(this.delay)this.events.push(c(this.handle,p.move,k.hitch(this,"onMouseMove")),c(this.handle.ownerDocument,p.release,k.hitch(this,"onMouseUp"))),this._lastX=b.pageX,this._lastY=b.pageY;else this.onDragDetected(b);b.stopPropagation();b.preventDefault()}},onMouseMove:function(a){if(Math.abs(a.pageX-this._lastX)>
this.delay||Math.abs(a.pageY-this._lastY)>this.delay)this.onMouseUp(a),this.onDragDetected(a);a.stopPropagation();a.preventDefault()},onMouseUp:function(a){for(var b=0;2>b;++b)this.events.pop().remove();a.stopPropagation();a.preventDefault()},onSelectStart:function(b){this.skip&&a.isFormElement(b)||(b.stopPropagation(),b.preventDefault())},onDragDetected:function(a){new this.mover(this.node,a,this)},onMoveStart:function(a){g.publish("/dnd/move/start",a);d.add(q.body(),"dojoMove");d.add(this.node,
"dojoMoveItem")},onMoveStop:function(a){g.publish("/dnd/move/stop",a);d.remove(q.body(),"dojoMove");d.remove(this.node,"dojoMoveItem")},onFirstMove:function(){},onMove:function(a,b){this.onMoving(a,b);var c=a.node.style;c.left=b.l+"px";c.top=b.t+"px";this.onMoved(a,b)},onMoving:function(){},onMoved:function(){}})})},"davinci/ve/widgets/MutableStore":function(){define(["dojo/_base/declare","dojo/data/ItemFileReadStore","davinci/lang/ve","dijit/lang/_common"],function(n,m,k,h){return n("davinci.ve.widgets.MutableStore",
m,{constructor:function(d){this.clearValues();d.divider&&(this.divider=d.divider);d.values&&this.setValues(d.values)},setValues:function(d){var b=[],c=0;d&&(this._values=d);dojo.forEach(this._values,dojo.hitch(this,function(g){b.push({name:g,value:g,id:c++})}));this._jsonData={identifier:"id",items:b};this._loadFinished=!1},modifyItem:function(d,b){for(var c=0;c<this._values.length;c++)this._values[c]==d&&(this._values[c]=b);this.setValues()},insert:function(d,b){this._values.splice(d,0,b);this.setValues()},
contains:function(d){for(var b=0;b<this._values.length;b++)if(this._values[b]==d)return!0;return!1},findSimilar:function(d){if(d=(new RegExp(/(\D*)(-?)(\d+)(\D*)/)).exec(d)){d=new RegExp((0<d.length?d[1]:"")+"(-?)(\\d+)"+(3<d.length?d[4]:""));for(var b=0;b<this._values.length;b++)if(d.test(this._values[b]))return this._values[b]}},getItemNumber:function(d){return this._values[d]},clearValues:function(){this._loadFinished=!1}})})},"dojo/dom-style":function(){define(["./sniff","./dom"],function(n,m){function k(c,
g,d){g=g.toLowerCase();if("auto"==d){if("height"==g)return c.offsetHeight;if("width"==g)return c.offsetWidth}if("fontweight"==g)switch(d){case 700:return"bold";default:return"normal"}g in a||(a[g]=e.test(g));return a[g]?b(c,d):d}var h,d={};h=n("webkit")?function(a){if(!a)return{};var b;if(1==a.nodeType){var c=a.ownerDocument.defaultView;b=c.getComputedStyle(a,null);!b&&a.style&&(a.style.display="",b=c.getComputedStyle(a,null))}return b||{}}:n("ie")&&(9>n("ie")||n("quirks"))?function(a){return 1==
a.nodeType&&a.currentStyle?a.currentStyle:{}}:function(a){return a?1==a.nodeType?a.ownerDocument.defaultView.getComputedStyle(a,null):{}:(console.error("getComputedStyle :: invalid node"),a)};d.getComputedStyle=h;var b;b=n("ie")?function(a,b){if(!b)return 0;if("medium"==b)return 4;if(b.slice&&"px"==b.slice(-2))return parseFloat(b);var c=a.style,e=a.runtimeStyle,g=c.left,d=e.left;e.left=a.currentStyle.left;try{c.left=b,b=c.pixelLeft}catch(z){b=0}c.left=g;e.left=d;return b}:function(a,b){return parseFloat(b)||
0};d.toPixelValue=b;var c=function(a,b){try{return a.filters.item("DXImageTransform.Microsoft.Alpha")}catch(r){return b?{}:null}},g=9>n("ie")||10>n("ie")&&n("quirks")?function(a){try{return c(a).Opacity/100}catch(w){return 1}}:function(a){return h(a).opacity},p=9>n("ie")||10>n("ie")&&n("quirks")?function(a,b){""===b&&(b=1);var e=100*b;1===b?(a.style.zoom="",c(a)&&(a.style.filter=a.style.filter.replace(/\s*progid:DXImageTransform.Microsoft.Alpha\([^\)]+?\)/i,""))):(a.style.zoom=1,c(a)?c(a,1).Opacity=
e:a.style.filter+=" progid:DXImageTransform.Microsoft.Alpha(Opacity\x3d"+e+")",c(a,1).Enabled=!0);if("tr"==a.tagName.toLowerCase())for(a=a.firstChild;a;a=a.nextSibling)"td"==a.tagName.toLowerCase()&&p(a,b);return b}:function(a,b){return a.style.opacity=b},a={left:!0,top:!0},e=/margin|padding|width|height|max|min|offset/,q={cssFloat:1,styleFloat:1,"float":1};d.get=function(a,b){var c=m.byId(a),e=arguments.length;if(2==e&&"opacity"==b)return g(c);b=q[b]?"cssFloat"in c.style?"cssFloat":"styleFloat":
b;var p=d.getComputedStyle(c);return 1==e?p:k(c,b,p[b]||c.style[b])};d.set=function(a,b,c){var e=m.byId(a),g=arguments.length,r="opacity"==b;b=q[b]?"cssFloat"in e.style?"cssFloat":"styleFloat":b;if(3==g)return r?p(e,c):e.style[b]=c;for(var h in b)d.set(a,h,b[h]);return d.getComputedStyle(e)};return d})},"dojo/ready":function(){define(["./_base/kernel","./has","require","./domReady","./_base/lang"],function(n,m,k,h,d){var b=0,c=[],g=0;m=function(){b=1;n._postLoad=n.config.afterOnLoad=!0;p()};var p=
function(){if(!g){for(g=1;b&&(!h||0==h._Q.length)&&(k.idle?k.idle():1)&&c.length;){var a=c.shift();try{a()}catch(u){if(u.info=u.message,k.signal)k.signal("error",u);else throw u;}}g=0}};k.on&&k.on("idle",p);h&&(h._onQEmpty=p);var a=n.ready=n.addOnLoad=function(a,b,e){var g=d._toArray(arguments);"number"!=typeof a?(e=b,b=a,a=1E3):g.shift();e=e?d.hitch.apply(n,g):function(){b()};e.priority=a;for(g=0;g<c.length&&a>=c[g].priority;g++);c.splice(g,0,e);p()},e=n.config.addOnLoad;if(e)a[d.isArray(e)?"apply":
"call"](n,e);h?h(m):m();return a})},"xgrid/Noob":function(){define(["dojo/_base/declare"],function(n){return n("xgrid.Noob",null,{})})},"xide/debug":function(){define(["xdojo/declare","dojo/has","xdojo/has!debug?xide/serverDebug"],function(n,m,k){n=n("xide.debug",null,{});window.onerror=function(h,d,b,c,g){console.error(h,g)};window.logError=function(h,d){console.error((d||"")+" :: "+h.message+" stack:\n",h)};return n})},"davinci/ve/commands/ChangeThemeCommand":function(){define("dojo/_base/declare dojo/_base/lang dojo/query davinci/Theme davinci/Workbench davinci/library davinci/html/CSSImport davinci/html/HTMLElement davinci/html/HTMLText preview/silhouetteiframe davinci/model/Factory".split(" "),
function(n,m,k,h,d,b,c,g,p,a,e){return n("davinci.ve.commands.ChangeThemeCommand",null,{name:"changeTheme",constructor:function(a,b){this._newTheme=a;this._context=b;this._oldTheme=h.getThemeSet(this._context);this._oldTheme||(this._oldTheme=h.dojoThemeSets.themeSets[0])},execute:function(){this._changeTheme(this._newTheme,this._oldTheme)},undo:function(){this._changeTheme(this._oldTheme,this._newTheme)},_changeTheme:function(b,c){c.desktopTheme?this.removeThemeSet(c):this.removeTheme(c);b.desktopTheme?
this.addThemeSet(b):this.addTheme(b);b=this._context;c=b.editor;var e=b.getModel().getText();c.setContent(c.fileName,e);b.widgetAddedOrDeleted(!0);b._configDojoxMobile();c=b.getMobileDevice()||"none";"none"!=c&&(c=a.themeMap[c+".svg"]);(b=m.getObject("dojox.mobile",!0,b.getGlobal()))&&b.loadDeviceTheme&&b.loadDeviceTheme(c);window.setTimeout(function(){this._context.resizeAllWidgets()}.bind(this),50)},removeTheme:function(a){var b=h.getHelper(a);if(b&&b.removeTheme)b.removeTheme(this._context,a);
else{var c=this._context.getModel().getDocumentElement(),b=c.getChildElement("head"),c=c.getChildElement("body"),e=dojo.clone(this._context.getHeader()),g=a.files;a.conditionalFiles&&(g=g.concat(a.conditionalFiles));for(var d=0;d<g.length;d++)for(var q=g[d],p=0;p<e.styleSheets.length;p++)if(-1<e.styleSheets[p].indexOf(q)){var m=c.getAttribute("class");m&&(m=m.replace(a.className,""),e.bodyClasses=m,c.removeAttribute("class"),0<m.length&&c.addAttribute("class",m,!1));this._context.setHeader(e);for(var m=
b.find({elementType:"CSSImport"}),n=0;n<m.length;n++)if(-1<m[n].url.indexOf(q)){var C=m[n].url,E=this._context.getDocument();m[n].url="x";m[n].parent.removeChild(m[n]);m[n].close();k('link[href\x3d"'+C+'"]',E).orphan();this._context.theme=null;break}}}},addTheme:function(a){var b=h.getHelper(a);if(b&&b.addTheme)b.addTheme(this._context,a);else{var d=this._context.getModel().getDocumentElement(),b=d.getChildElement("head"),q=d.getChildElement("body"),p=dojo.clone(this._context.getHeader()),d=this._context.getFullResourcePath(),
d=(new davinci.model.Path(a.getFile().parent.getPath())).append(a.files[0]).relativeTo(d,!0).toString();p.styleSheets[p.styleSheets.length]=d;var k=q.getAttribute("class");k||(k=" ");k=k+" "+a.className;k=k.trim();p.bodyClasses=k;q.removeAttribute("class");q.addAttribute("class",k,!1);this._context.setHeader(p);q=b.getChildElement("style");q||(q=new g("style"),b.addChild(q));b=new c;b.url=d;d=e.getModel({url:h.getBase()+"/"+b.url,includeImports:!0});b.cssFile=d;q.addChild(b,0);this._context.theme=
a}},removeThemeSet:function(a){var c=b.getThemes(d.getProject(),this.workspaceOnly);if(a.desktopTheme)for(var e=0;e<c.length;e++)c[e].name===a.desktopTheme&&this.removeTheme(c[e]);a.mobileTheme&&!h.themeSetEquals(a.mobileTheme,h.dojoMobileDefault)&&(this._context.close(),this._dojoxMobileRemoveTheme(this._context))},addThemeSet:function(a){var c=b.getThemes(d.getProject(),this.workspaceOnly);if(a.desktopTheme)for(var e=0;e<c.length;e++)c[e].name===a.desktopTheme&&this.addTheme(c[e]);a.mobileTheme&&
this._dojoxMobileAddTheme(this._context,a.mobileTheme)},_dojoxMobileRemoveTheme:function(a){a._updateDojoConfig({themeMap:null,mblLoadCompatPattern:null,mblThemeFiles:null})},_dojoxMobileAddTheme:function(a,b,c){h.getThemeLocation().toString().replace(/\//g,"\\/");a._updateDojoConfig({themeMap:h.getDojoxMobileThemeMap(a,b),mblLoadCompatPattern:"''",mblThemeFiles:[]})}})})},"davinci/ve/commands/RemoveCommand":function(){define(["dojo/_base/declare","davinci/ve/commands/_hierarchyCommand","davinci/ve/widget",
"davinci/ve/States","davinci/ve/commands/ModifyCommand"],function(n,m,k,h,d){return n("davinci.ve.commands.RemoveCommand",[m],{name:"remove",constructor:function(b){this._id=b?b.id:void 0},execute:function(){if(this._id){var b=k.byId(this._id);if(b){var c=b.getContext(),g=b.getParent()||c.getContainerNode(),p,a=b.getHelper();a&&a.onRemove&&(p=a.onRemove(b));if(!this._data){this._index=dojo.indexOf(g.getChildren(),b);if(0>this._index)return;this._data=b.getData();this._parentId=g.id}this._data.context=
c;a=this._isRefreshOnDescendantChange(b);c&&c.detach(b);g.removeChild(b);c&&c.widgetChanged(c.WIDGET_REMOVED,b);b.destroyWidget();c&&c.widgetAddedOrDeleted();a&&(new d(a,null,null,g._edit_context)).execute();h.resetState(b.domNode);p&&p()}}},undo:function(){if(this._data&&this._parentId){var b=k.byId(this._parentId);if(b){var c=k.createWidget(this._data);if(c){b.addChild(c,this._index);var g=b.getContext();g&&(g.attach(c),c.startup(),c.renderWidget(),g.widgetAddedOrDeleted(),g.widgetChanged(g.WIDGET_ADDED,
c),(g=this._isRefreshOnDescendantChange(c))&&(new d(g,null,null,b._edit_context)).execute(),h.resetState(c.domNode))}}}}})})},"dojo/dnd/Container":function(){define("../_base/array ../_base/declare ../_base/kernel ../_base/lang ../_base/window ../dom ../dom-class ../dom-construct ../Evented ../has ../on ../query ../touch ./common".split(" "),function(n,m,k,h,d,b,c,g,p,a,e,q,u,w){m=m("dojo.dnd.Container",p,{skipForm:!1,allowNested:!1,constructor:function(a,g){this.node=b.byId(a);g||(g={});this.creator=
g.creator||null;this.skipForm=g.skipForm;this.parent=g.dropParent&&b.byId(g.dropParent);this.map={};this.current=null;this.containerState="";c.add(this.node,"dojoDndContainer");g&&g._skipStartup||this.startup();this.events=[e(this.node,u.over,h.hitch(this,"onMouseOver")),e(this.node,u.out,h.hitch(this,"onMouseOut")),e(this.node,"dragstart",h.hitch(this,"onSelectStart")),e(this.node,"selectstart",h.hitch(this,"onSelectStart"))]},creator:function(){},getItem:function(a){return this.map[a]},setItem:function(a,
b){this.map[a]=b},delItem:function(a){delete this.map[a]},forInItems:function(a,b){b=b||k.global;var c=this.map,e=w._empty,g;for(g in c)g in e||a.call(b,c[g],g,this);return b},clearItems:function(){this.map={}},getAllNodes:function(){return q((this.allowNested?"":"\x3e ")+".dojoDndItem",this.parent)},sync:function(){var a={};this.getAllNodes().forEach(function(b){if(b.id){var c=this.getItem(b.id);if(c){a[b.id]=c;return}}else b.id=w.getUniqueId();var c=b.getAttribute("dndType"),e=b.getAttribute("dndData");
a[b.id]={data:e||b.innerHTML,type:c?c.split(/\s*,\s*/):["text"]}},this);this.map=a;return this},insertNodes:function(a,b,c){this.parent.firstChild?b?c||(c=this.parent.firstChild):c&&(c=c.nextSibling):c=null;var e;if(c)for(b=0;b<a.length;++b)e=this._normalizedCreator(a[b]),this.setItem(e.node.id,{data:e.data,type:e.type}),c.parentNode.insertBefore(e.node,c);else for(b=0;b<a.length;++b)e=this._normalizedCreator(a[b]),this.setItem(e.node.id,{data:e.data,type:e.type}),this.parent.appendChild(e.node);
return this},destroy:function(){n.forEach(this.events,function(a){a.remove()});this.clearItems();this.node=this.parent=this.current=null},markupFactory:function(a,b,c){a._skipStartup=!0;return new c(b,a)},startup:function(){if(!this.parent&&(this.parent=this.node,"table"==this.parent.tagName.toLowerCase())){var a=this.parent.getElementsByTagName("tbody");a&&a.length&&(this.parent=a[0])}this.defaultCreator=w._defaultCreator(this.parent);this.sync()},onMouseOver:function(a){for(var b=a.relatedTarget;b&&
b!=this.node;)try{b=b.parentNode}catch(x){b=null}b||(this._changeState("Container","Over"),this.onOverEvent());b=this._getChildByEvent(a);this.current!=b&&(this.current&&this._removeItemClass(this.current,"Over"),b&&this._addItemClass(b,"Over"),this.current=b)},onMouseOut:function(a){for(a=a.relatedTarget;a;){if(a==this.node)return;try{a=a.parentNode}catch(v){a=null}}this.current&&(this._removeItemClass(this.current,"Over"),this.current=null);this._changeState("Container","");this.onOutEvent()},onSelectStart:function(a){this.skipForm&&
w.isFormElement(a)||(a.stopPropagation(),a.preventDefault())},onOverEvent:function(){},onOutEvent:function(){},_changeState:function(a,b){var e="dojoDnd"+a;a=a.toLowerCase()+"State";c.replace(this.node,e+b,e+this[a]);this[a]=b},_addItemClass:function(a,b){c.add(a,"dojoDndItem"+b)},_removeItemClass:function(a,b){c.remove(a,"dojoDndItem"+b)},_getChildByEvent:function(a){if(a=a.target)for(var b=a.parentNode;b;a=b,b=a.parentNode)if((b==this.parent||this.allowNested)&&c.contains(a,"dojoDndItem"))return a;
return null},_normalizedCreator:function(a,b){a=(this.creator||this.defaultCreator).call(this,a,b);h.isArray(a.type)||(a.type=["text"]);a.node.id||(a.node.id=w.getUniqueId());c.add(a.node,"dojoDndItem");return a}});w._createNode=function(a){return a?function(b){return g.create(a,{innerHTML:b})}:w._createSpan};w._createTrTd=function(a){var b=g.create("tr");g.create("td",{innerHTML:a},b);return b};w._createSpan=function(a){return g.create("span",{innerHTML:a})};w._defaultCreatorNodes={ul:"li",ol:"li",
div:"div",p:"div"};w._defaultCreator=function(a){a=a.tagName.toLowerCase();var b="tbody"==a||"thead"==a?w._createTrTd:w._createNode(w._defaultCreatorNodes[a]);return function(a,c){var e=a&&h.isObject(a),g;e&&a.tagName&&a.nodeType&&a.getAttribute?(g=a.getAttribute("dndData")||a.innerHTML,e=(e=a.getAttribute("dndType"))?e.split(/\s*,\s*/):["text"]):(g=e&&a.data?a.data:a,e=e&&a.type?a.type:["text"],a=("avatar"==c?w._createSpan:b)(String(g)));a.id||(a.id=w.getUniqueId());return{node:a,data:g,type:e}}};
return m})},"xide/widgets/ArgumentsWidget":function(){define("dcl/dcl dojo/_base/declare dojo/_base/lang xide/widgets/WidgetBase xide/factory xide/utils xide/types xide/views/_CIDialog xide/views/CIView xide/widgets/JSONDualEditorWidget xide/views/_Panel".split(" "),function(n,m,k,h,d,b,c,g,p,a,e){return n(h,{declaredClass:"xide.widgets.ArgumentsWidget",minHeight:"400px;",value:"",options:null,templateString:"\x3cdiv class\x3d'widgetContainer widgetBorder widgetTable' style\x3d''\x3e\x3ctable border\x3d'0' cellpadding\x3d'5px' width\x3d'100%' \x3e\x3ctbody\x3e\x3ctr attachTo\x3d'extensionRoot'\x3e\x3ctd width\x3d'15%' class\x3d''\x3e\x3cspan\x3e\x3cb\x3e${!title}\x3c/b\x3e\x3cspan\x3e\x3c/td\x3e\x3ctd width\x3d'100px' class\x3d'widgetValue2' valign\x3d'middle' attachTo\x3d'previewNode'\x3e\x3c/td\x3e\x3ctd class\x3d'extension' width\x3d'25px' attachTo\x3d'button0'\x3e\x3c/td\x3e\x3ctd class\x3d'extension' width\x3d'25px' attachTo\x3d'button1'\x3e\x3c/td\x3e\x3ctd class\x3d'extension' width\x3d'25px' attachTo\x3d'button2'\x3e\x3c/td\x3e\x3c/tr\x3e\x3c/tbody\x3e\x3c/table\x3e\x3cdiv attachTo\x3d'expander' onclick\x3d'' style\x3d'width:100%;'\x3e\x3c/div\x3e\x3cdiv attachTo\x3d'last'\x3e\x3c/div\x3e\x3c/div\x3e",
filePathValidator:function(a,b){return!0},onSelect:function(){var g=this;b.mixin({},this.options);var d=b.toString(this.userData.value),h=null,r=[b.createCI("Arguments",a,d,{group:"Arguments",widget:{jsonOptions:{renderTemplates:[],insertTemplates:[],noActions:!0}}})],d=new e({title:"Arguments",containerClass:"CIDialog",options:{contentSize:{width:"600px",height:"500px"},footerToolbar:[{item:"\x3cbutton style\x3d'margin-left:5px;' type\x3d'button'\x3e\x3cspan class\x3d'...'\x3e\x3c/span\x3e\x3c/button\x3e",
event:"click",btnclass:"btn btn-danger btn-sm",btntext:" Cancel",callback:function(a){a.data.close()}},{item:"\x3cbutton style\x3d'margin-left:5px;' type\x3d'button'\x3e\x3cspan class\x3d'...'\x3e\x3c/span\x3e\x3c/button\x3e",event:"click",btnclass:"btn btn-primary btn-sm",btntext:" Ok",callback:function(a){var e=h.widgets[0].getValue();g.userData.changed=!0;g.userData.active=!0;b.setCIValueByField(g.userData,"value",e);g.editBox.val(e);e={owner:g.delegate||g.owner,ci:g.userData,newValue:e};g.publish(c.EVENTS.ON_CI_UPDATE,
e);g._emit("valueChanged",e);a.data.close()}}]},onShow:function(a,c,e){h=b.addWidget(p,{delegate:this,resizeToParent:!0,options:{groupOrder:{General:1,Send:2,Advanced:4,Description:5}},cis:r},this,c,!0);return[h]}});d.show();return d},fillTemplate:function(){var a=this,e=b.toString(this.userData.value)||"{}",g=$('\x3ctextarea rows\x3d"3" class\x3d"form-control input-transparent" \x3e\x3c/textarea\x3e');g.val(e);this.editBox=g;$(this.previewNode).append(g);this.editBox.on("change",function(e){e=e.target.value;
a.userData.changed=!0;a.userData.active=!0;b.setCIValueByField(a.userData,"value",e);e={owner:a.delegate||a.owner,ci:a.userData,newValue:e,storeItem:a.storeItem};a.publish(c.EVENTS.ON_CI_UPDATE,e);a._emit("valueChanged",e)});e=d.createSimpleButton("","fa-magic","btn-default",{style:""});$(e).click(function(){a.onSelect()});$(this.button0).append(e)},startup:function(){try{this.fillTemplate(),this.onReady()}catch(q){logError(q)}}})})},"xfile/FileActions":function(){define("dcl/dcl xdojo/declare xdojo/has dojo/Deferred xide/utils xide/types xide/factory xide/model/Path xaction/DefaultActions xide/editor/Registry xide/editor/Default dojo/aspect xfile/views/FileOperationDialog xfile/views/FilePreview xide/views/_CIDialog xide/views/_Dialog xide/views/_PanelDialog xfile/views/FilePicker".split(" "),
function(n,m,k,h,d,b,c,g,p,a,e,q,u,w,r,v,x,A,z){function y(){return{includes:["*",".*"],excludes:[],mode:1502}}function B(a,c){var e=c.userData.value||".",g=new h,q=this,p=new x({size:b.DIALOG_SIZE.SIZE_NORMAL,getContentSize:function(){return{width:"600px",height:"500px"}},bodyCSS:{height:"auto","min-height":"500px",padding:"8px","margin-right":"16px"},picker:null,title:c.title,onOk:function(){var a=this.picker._selection;a&&a[0]&&(c.set("value",a[0].path),g.resolve(a[0].path),p.value=a[0].path)},
onShow:function(a,b){this.picker=a=d.addWidget(A,{ctx:q.ctx,owner:q,selection:e||".",resizeToParent:!0,mount:q.collection.mount,storeOptionsMixin:{includeList:"*,.*",excludeList:""},Module:q.Module,permissions:d.clone(q.Module.DEFAULT_PERMISSIONS)},this,b,!0);this.add(a,null,!1);this.startDfd.resolve();return[this.picker]}});p.show();return g}var C=b.ACTION;q={__loading:!0,touch:function(){var a=new h;try{var c=this,e=this.getSelectedItem(),g=this.getCurrentFolder(),q=e?d.pathinfo(e.path,b.PATH_PARTS.ALL).filename:
"",p=this.collection,v={inputs:[d.createCI("Name",13,q,{widget:{instant:!0,validator:function(a){return g?null==p.getSync(g.path+"/"+a)&&0<a.length:!0}}})]},u={select:e,focus:!0,append:!1};(new r({cis:v,title:"Create new File",ctx:this.ctx,size:b.DIALOG_SIZE.SIZE_SMALL,bodyCSS:{height:"auto","min-height":"80px"},_onError:function(a,b,c){a=a||this.title;(c=c||this.notificationMessage)&&c.update({message:a+this.failedText+(b?"\x3cbr/\x3e"+b:""),type:"error",actions:!1,duration:15E3});this.onError&&
this.onError(b)},onCancel:function(){a.resolve()},onOk:function(){var b=this.getField("name");if(null==b)a.resolve(u);else{var e=(c.getCurrentFolder()||{path:"."}).path+"/"+b;c.ctx.getFileManager().mkfile(p.mount,e,{checkErrors:!0,returnProm:!1}).then(function(b){c.runAction(C.RELOAD).then(function(){p.getSync(e)&&a.resolve({select:e,append:!1,focus:!0})})},function(b){a.resolve(u);logError(b,"error creating directory")})}}})).show()}catch(O){logError(O,"error creating dialog")}return a},newTabArgs:null,
openInOS:function(a){var b=this.ctx.getResourceManager().getVariable("VFS_CONFIG")||{},c=a.mount.replace("/","");if(b[c]){var e=window.eRequire;e||console.error("have no electron");var g=e("os"),q=e("electron").shell,e=e("path"),c=b[c],c=d.replaceAll(" ","",c);a=a.path.replace("./","/");a=d.replaceAll("/",e.sep,a);c=e.resolve(c+e.sep+a);c=d.replaceAll(" ","",c);"win32"!==g.platform()?q.openItem(c):q.openItem("file:///"+c)}else console.error("open in os failed: have no VFS config for "+c)},getFileActions:function(a){a=
a||this.permissions;var c=[],e=b.ACTION,g=b.ACTION_ICON,d=this,q=d.ctx,r=d.domNode,h=q.getResourceManager(),h=h?h.getVariable("VFS_CONFIG"):{};d.getActionStore();c.push(d.createAction({label:"Go up",command:e.GO_UP,icon:g.GO_UP,tab:"Home",group:"Navigation",keycombo:["backspace"],mixin:{quick:!0}}));c.push(d.createAction({label:"Copy",command:e.COPY,icon:"fa-paste",tab:"Home",group:"Organize",keycombo:["f5"],shouldDisable:function(){return null==d.getSelectedItem()}}));c.push(d.createAction({label:"Close",
command:e.CLOSE,icon:"fa-close",tab:"View",group:"Organize",keycombo:["ctrl 0"]}));c.push(d.createAction({label:"Move",command:e.MOVE,icon:"fa-long-arrow-right",tab:"Home",group:"Organize",keycombo:["f6"],shouldDisable:function(){return null==d.getSelectedItem()}}));c.push(d.createAction({label:"Create New Scene",command:"File/New Scene",icon:"fa-magic",tab:"Home",group:"Organize",mixin:{addPermission:!0,quick:!0}}));(-1!==location.href.indexOf("electron\x3dtrue")||k("electronx"))&&h&&c.push(d.createAction({label:"Open with System",
command:"File/OpenInOS",icon:"fa-share",tab:"Home",group:"Open",keycombo:["shift f4"],mixin:{addPermission:!0,quick:!0},shouldDisable:function(){if(d.getSelectedItem())return!1}}));c.push(this.createAction("Open In New Tab","File/OpenInNewTab","fa-share",["alt enter"],"Home","Open","item",null,null,{quick:!0},null,function(){var a=d.getSelectedItem();return a&&a.isDir?!1:!0},a,r,d));if(q&&q.getMountManager&&p.hasAction(a,e.SOURCE)){a.push(e.SOURCE);var v=q.getMountManager().getMounts(),u=0;if(v&&
0<v.length){var w=d.collection.mount;c.push(this.createAction({label:"Source",command:e.SOURCE,icon:"fa-hdd-o",keyCombo:["ctrl f1"],tab:"Home",group:"Navigation",mixin:{data:v,addPermission:!0,quick:!0},onCreate:function(a){a.set("value",w)}}));_.each(v,function(g){var q=g.label;a.push(e.SOURCE+"/"+q);q=d.createAction({label:q,command:e.SOURCE+"/"+q,icon:"fa-hdd-o",keyCombo:["alt f"+u],tab:"Home",group:"Navigation",mixin:{data:v,item:g,closeOnClick:!1,quick:!0},onCreate:function(a){a.set("value",
g.name);a._oldIcon=this.icon;a.actionType=b.ACTION_TYPE.SINGLE_TOGGLE}});c.push(q);u++})}}return c.concat(this.getEditorActions(a))},rename:function(a){var c=new h,e=this,g=a||this.getSelectedItem();a=this.getSelection();var q=this.getCurrentFolder(),p=g?d.pathinfo(g.path,b.PATH_PARTS.ALL).basename:"",v=this.collection,u={select:a,focus:!0,append:!1};a={inputs:[d.createCI("name",b.ECIType.STRING,p,{widget:{instant:!0,title:"New Name",validator:function(a){return null==v.getSync(q.path+"/"+a)&&0<a.length}}})]};
(new r({cis:a,title:"Rename",ctx:this.ctx,size:b.DIALOG_SIZE.SIZE_NORMAL,bodyCSS:{height:"auto","min-height":"80px",width:"100%","min-width":"400px"},onCancel:function(){c.resolve(u)},onOk:function(){var a=this.getField("name");if(null==a)c.resolve(u);else{var b=e.getCurrentFolder();e.ctx.getFileManager().rename(g.mount,g.path,a,{checkErrors:!0,returnProm:!1}).then(function(g){e.runAction(C.RELOAD).then(function(){u.select=b.path+"/"+a;c.resolve(u)})},function(a){logError(a,"__error renaming file!");
c.resolve(u)})}}})).show();return c},move:function(a){var c=new h,e=this;a=this.getSelectedItem();var g=this.getSelection(),q=this.getCurrentFolder();a&&d.pathinfo(a.path,b.PATH_PARTS.ALL);var p=this.collection,v={select:g,focus:!0,append:!1};if(!a.directory){var u=a.getParent();u&&(a=u)}a={inputs:[d.createCI("Name",b.ECIType.FILE,a.path,{widget:{instant:!0,title:"Target",validator:function(a){return null==p.getSync(q.path+"/"+a)&&0<a.length}}})]};var k=new r({cis:a,title:e.localize("Move"),ctx:this.ctx,
size:b.DIALOG_SIZE.SIZE_NORMAL,onCancel:function(){c.resolve(v)},onOk:function(){var a=this.getField("name");if(null==a)c.resolve(v);else{var b=e._buildServerSelection(g),q=(a=e.collection.getSync(a))?d.normalizePath(a.mount+"/"+a.path):"";a&&(b.dstPath=q);a=y();e.getCurrentFolder();e.ctx.getFileManager().moveItem(b.selection,b.dstPath,a.includes,a.excludes,a.mode,{checkErrors:!0,returnProm:!1}).then(function(a){e.runAction(C.RELOAD).then(function(){c.resolve(v)})},function(a){logError(a,"__error creating file!");
c.resolve(v)})}}});k._on("widget",function(a){a.widget._onSelect=function(a){return B.apply(e,[k,a])}});k.show();return c},copy:function(a){var c=new h,e=this,g=this.getSelectedItem(),q=this.getSelection(),p=this.getCurrentFolder();g&&d.pathinfo(g.path,b.PATH_PARTS.ALL);var v=this.collection,k={select:q,focus:!0,append:!1};g.directory||(a=g.getParent())&&(g=a);a={inputs:[d.createCI("Name",b.ECIType.FILE,g.path,{widget:{instant:!0,title:"Target",validator:function(a){return null==v.getSync(p.path+
"/"+a)&&0<a.length}}})]};var w=new (n([u,r],{}))({cis:a,title:e.localize("Copy"),ctx:this.ctx,size:b.DIALOG_SIZE.SIZE_NORMAL,bodyCSS:{height:"auto","min-height":"80px",width:"100%","min-width":"400px"},onCancel:function(){c.resolve(k)},onOk:function(){var a=this.getField("name");if(null==a)c.resolve(k);else{this.showMessage();var b=this,p=e._buildServerSelection(q),r=e.collection.getSync(a),h=r?d.normalizePath(r.mount+"/"+r.path):"";p.dstPath=r?h:d.normalizePath(g.mount+"/"+a);e.getCurrentFolder();
a=e.ctx.getFileManager().copyItem(p.selection,p.dstPath,y(),{checkErrors:!0,returnProm:!1});a.then(function(a){b._onSuccess(a)},function(a){b._onError()});a.then(function(a){e.runAction(C.RELOAD).then(function(){c.resolve(k)})},function(a){logError(a,"__error creating file!");c.resolve(k)})}}});w._on("widget",function(a){a.widget._onSelect=function(a){return B.apply(e,[w,a])}});w.show();return c},clipboardPaste:function(){var a=new h,c=this.currentCutSelection,e=c?this.currentCutSelection:this.currentCopySelection,
g=this._buildServerSelection(e),c=c?"moveItem":"copyItem",d=this,q={select:e,focus:!0,append:!1};if(!e)return a.resolve(),a;e=y();d.ctx.getFileManager()[c](g.selection,g.dstPath,{include:e.includes,exclude:e.excludes,mode:e.mode}).then(function(c){d.runAction(b.ACTION.RELOAD).then(function(){a.resolve(q)})},function(b){a.resolve(q)},function(b){a.resolve(q)});return a},mkdir:function(){var a=new h;try{var c=this,e=this.getSelectedItem(),g=this.getCurrentFolder(),q=e?d.pathinfo(e.path,b.PATH_PARTS.ALL).filename:
"",p=this.collection,v={inputs:[d.createCI("Name",13,q,{widget:{instant:!0,validator:function(a){return g?null==p.getSync(g.path+"/"+a)&&0<a.length:!0}}})]},u={select:e,focus:!0,append:!1};(new r({cis:v,title:"Create new Directory",ctx:this.ctx,size:b.DIALOG_SIZE.SIZE_NORMAL,bodyCSS:{height:"auto","min-height":"80px",width:"100%","min-width":"400px"},_onError:function(a,b,c){a=a||this.title;(c=c||this.notificationMessage)&&c.update({message:a+this.failedText+(b?"\x3cbr/\x3e"+b:""),type:"error",actions:!1,
duration:15E3});this.onError&&this.onError(b)},onCancel:function(){a.resolve()},onOk:function(){var b=this.getField("name");if(null==b)a.resolve(u);else{var e=(c.getCurrentFolder()||{path:"."}).path+"/"+b;c.ctx.getFileManager().mkdir(p.mount,e,{checkErrors:!0,returnProm:!1}).then(function(b){c.runAction(C.RELOAD).then(function(){p.getSync(e)&&a.resolve({select:e,append:!1,focus:!0})})},function(b){a.resolve(u);logError(b,"error creating directory")})}}})).show()}catch(O){logError(O,"error creating dialog")}return a},
_buildServerSelection:function(a,b){!b&&(b=this.getCurrentFolder());b&&!b.directory&&(b=b.getParent());_.isArray(a)||(a=[a]);var c=[],e=a[0].getStore(),g=b?d.normalizePath(b.mount+"/"+b.path):"";_.each(a,function(a){e.getSync(a.path)&&c.push(d.normalizePath(a.mount+"/"+a.path))});return{selection:c,store:a[0]._S,dstPath:"/"+g+"/",firstItem:a[0],parent:b}},openPreview:function(a,b){var c=this.row(a).element,e=this,g=new h;if(this._preview)return this._preview.item=a,this._preview.open().then(function(){e._preview.preview.trigger($.Event("update",
{file:a}))});var d=new w({node:$(c),item:a,delegate:this.ctx.getFileManager(),parent:$(c),ctx:e.ctx,container:b?b.containerNode:null});b?d.buildRenderingEmbedded():d.buildRendering();d.init();d.exec();this._preview=d;this._preview.handler=this;e._on("selectionChanged",function(a){if(a=e.getSelectedItem())d.item=a,d.preview.trigger($.Event("update",{file:a}))});this.add(d,null,!1);d._emit("changeState",function(b){0===b&&g.resolve({select:a,focus:!0,append:!1})});return g},deleteSelection:function(a){a=
a||this.getSelection();var c=new h,e=this.getNext(a[0],null,!0),g=this.getPrevious(a[0],null,!0),d=e||g,q=this._buildServerSelection(a),p=this;(new u({ctx:p.ctx,notificationMessage:null,title:"Delete "+q.selection.length+" items",type:b.DIALOG_TYPE.DANGER,onBeforeOk:function(){},getOkDfd:function(){var a=this;return this.ctx.getFileManager().deleteItems(q.selection,{hints:[1]},{checkErrors:!1,returnProm:!1,onError:function(b){a._onError(null,b.message)}})},onCancel:function(){c.resolve({select:a,
focus:!0,append:!1})},onSuccess:function(){p.runAction(b.ACTION.RELOAD).then(function(){c.resolve({select:d,focus:!0,append:!1})})}})).show();return c},goUp:function(a){a=this._history.getNow();a=_.isString(a)?this.collection.getSync(a):a;var b=new h,c=this,e=this.getHistory().getNow();if(!a){var g=this.getRows();g[0]&&g[0]._S&&(g=g[0]._S.getParent(g[0]))&&(g=g._S.getParent(g))&&(a=g)}a?(g=a._S.getParent(a))&&(a=this.openFolder(g,!0,!1))&&a.then&&a.then(function(){if(e){var a=c.collection.getSync(e);
a&&b.resolve({select:a,focus:!0,delay:1})}}):e?(a=this.collection.getSync(e))&&this.select([a],null,!0,{focus:!0,delay:1}):(g=this.getRows(),g[0]&&g[0]._S&&(g=g[0]._S.getParent(g[0]))&&(g=g._S.getParent(g))&&this.openFolder(g,!0));return b},reload:function(a){var b=new h,c=this.getSelection();a=a||this.getRows()[0];var e=this.getCurrentFolder()||{path:"."},g=this;e.isBack&&(e=this.collection.getSync(e.rPath)||{path:"."});var d=!1;this.isExpanded&&this.expand&&a&&(d=this._isExpanded(a))&&this.expand(a,
null,!1);g.collection.resetQueryLog();this.collection.loadItem(e,!0).then(function(a){"."===e.path&&g.collection.resetQueryLog();g.refresh().then(function(){var a=g.openItem(e,!1,!1);a&&a.then&&a.then(function(){b.resolve({select:c,append:!1,focus:!0,delay:1})});g.deselectAll();b.resolve({select:c,append:!1,focus:!0,delay:2})})});return b},toHistory:function(a){a=(a.getFolder?new g(a.getFolder()):new g(".")).getSegments();var b=this.collection.rootSegment,c=b;a&&"."===a[0]&&(a[0]=b);var e=[];_.each(a,
function(a){a=a!==c?c+(c.endsWith("/")?"":"/")+a:a;e.push(a);c=a});return e},openFolder:function(a,b,c){var e=this.getCurrentFolder(),g=this.collection,d=this.getHistory();d.getNow();d.getNow();var q=this;(a=_.isString(a)?g.getSync(a):g.getSync(a.path)||a)||(a=g.getRootItem());var p=q.toHistory(a);d.set(p);if(!a)return this.setQueryEx(g.getRootItem());if(!(e&&a&&b&&e.path===a.path)&&a){this.deselectAll();var e=(e=this.row(a))?e.element:null,r;a._S.isItemLoaded(a)||((e=$(e).find("span.fa"))&&e[0]&&
(r=$(e[0])),r&&(r.removeClass("fa fa-folder"),r.addClass("fa-spinner fa-spin")));var v=new h;this._emit("openFolder",{item:a,back:b});(e=this.setQueryEx(a,null))&&e.then(function(){r&&(r.addClass("fa fa-folder"),r.removeClass("fa-spinner fa-spin"));v.resolve({select:!1!==c?b?a:q.getRows()[0]:null,focus:!0,append:!1,delay:1});q._emit("openedFolder",{item:a,back:b})});return v}},changeSource:function(a,b){var e=new h,g=this,d=g.ctx||d,q=d.getFileManager(),p=c.createFileStore(a.name,null,q.config,null,
d),r=this.collection,d=this.getAction(C.SOURCE),q=a.label||a.name,v=this.getAction(C.SOURCE+"/"+q);r.destroy();!0!==b&&this._emit("changeSource",a);this.set("loading",!0);this.set("collection",p.getDefaultCollection("./"));d.set("value",a.name);g.set("title","Files ("+a.label+")");r=d.getChildren();_.each(r,function(a){a.set("icon",a._oldIcon)});d.set("label",q);v&&v.set("icon","fa-spinner fa-spin");this.refresh().then(function(){g.set("loading",!1);g.set("collection",p.getDefaultCollection("./"));
v&&v.set("icon","fa-check");!0!==b&&g._emit("changedSource",a);g.select([0],null,!0,{append:!1,focus:!0}).then(function(){e.resolve()})});return e},openInNewTab:function(a){var b=this,e=b.ctx,g=e.getWindowManager(),q=new h,p=null,p=_.isFunction(this.newTarget)?this.newTarget({title:a.name,icon:"fa-folder",target:b._parent,location:null,tabOrientation:null}):g.createTab(a.name,"fa-folder",this.newTarget||this),r=this.collection;a.isDir||(a=this.getCurrentFolder());var v=c.createFileStore(r.mount,r.options,
r.config,null,e);v.micromatch=r.micromatch;var e=d.mixin({showToolbar:this.showToolbar,collection:v,selectedRenderer:this.selectedRenderer,showHeader:this.showHeader,newTarget:this.newTarget,style:this.style,options:d.clone(this.options),permissions:this.permissions,_columns:this._columns,attachDirect:!0,registerEditors:this.registerEditors,hideExtensions:this.hideExtensions},this.newTabArgs||{}),u=d.addWidget(this.getClass(),e,null,p,!1);q.resolve();u.set("loading",!0);v.initRoot().then(function(c){(c=
v.getItem(a.path,!0))&&c.then(function(){u.startup();u._showHeader(b.showHeader);u.openItem(a).then(function(){u.set("loading",!1);u.select([0],null,!0,{focus:!0,append:!1,delay:1})});g.registerView(u,!0)})});return q},openItem:function(b,c,e){if(!b){var g=this.getRows();g[0]&&g[0].isBack&&(b=g[0])}if(b&&b.isBack)return b._S=null,this.goUp();if(b=_.isString(b)?this.collection.getSync(b):b){if(!0===b.directory)return this.openFolder(b,c,e);c=a.getEditors(b);return(c=_.find(c,function(a){return!0===
a.isDefault}))?c.onEdit(b,this):this.ctx.getWindowManager().openItem(b,this.newTarget||this,{register:!0})}},getSelectedItem:function(){return this.getSelection()[0]},openDefaultEditor:function(a){return e.Implementation.open(a)},close:function(){var a=this._parent;if(a){var b=a.docker();b&&(this.onAfterAction=null,b.removePanel(a))}return!1},compress:function(a){a=a||this.getSelection();var b=this;(a=this._buildServerSelection(a))&&a.store&&a.selection&&b.ctx.getFileManager().compressItem(a.firstItem.mount,
a.selection,"zip").then(function(a){b.reload()})},newScene:function(){var a=new h;try{var c=this,e=this.getSelectedItem(),g=this.getCurrentFolder();e&&d.pathinfo(e.path,b.PATH_PARTS.ALL);var q=this.collection,p={inputs:[d.createCI("Name",13,"my new scene.dhtml",{widget:{instant:!0,validator:function(a){return g?null==q.getSync(g.path+"/"+a)&&0<a.length:!0}}})]},v={select:e,focus:!0,append:!1};(new r({cis:p,title:"Create new scene",ctx:this.ctx,size:b.DIALOG_SIZE.SIZE_SMALL,bodyCSS:{height:"auto",
"min-height":"80px"},_onError:function(a,b,c){a=a||this.title;(c=c||this.notificationMessage)&&c.update({message:a+this.failedText+(b?"\x3cbr/\x3e"+b:""),type:"error",actions:!1,duration:15E3});this.onError&&this.onError(b)},onCancel:function(){a.resolve()},onOk:function(){var b=this.getField("name");if(null==b)a.resolve(v);else{var e=(c.getCurrentFolder()||{path:"."}).path+"/"+b;c.ctx.getFileManager().mkfile(q.mount,e,z,{checkErrors:!0,returnProm:!1}).then(function(b){c.runAction(C.RELOAD).then(function(){q.getSync(e)&&
a.resolve({select:e,append:!1,focus:!0})})},function(b){a.resolve(v);logError(b,"error creating directory")})}}})).show()}catch(N){logError(N,"error creating dialog")}return a},runAction:function(a,c){_.isString(a)&&(a=this.getAction(a));if(a&&a.command){var e=b.ACTION,g=this.getSelectedItem()||c,d=this.getSelection();if(-1!=a.command.indexOf(C.SOURCE))return this.changeSource(a.item);switch(a.command){case "File/Compress":return this.compress(d);case e.PREVIEW:return this.openPreview(g);case "File/OpenInNewTab":return this.openInNewTab(g||
this.collection.getRootItem());case e.EDIT:return this.openItem(g);case "File/New Scene":return this.newScene(g);case e.NEW_FILE:return this.touch(g);case e.NEW_DIRECTORY:return this.mkdir(g);case e.RELOAD:return this.reload(g);case e.RENAME:return this.rename(g);case e.GO_UP:return this.goUp(null);case e.COPY:return this.copy(null);case e.MOVE:return this.move(null);case e.DELETE:return this.deleteSelection(null);case e.OPEN_IN+"/Default Editor":return this.openDefaultEditor(g);case e.DOWNLOAD:return this.ctx.getFileManager().download(g);
case e.CLOSE:return this.close();case "File/OpenInOS":return this.openInOS(g)}return-1!=a.command.indexOf(e.OPEN_IN+"/")?a.editor.onEdit(g):this.inherited(arguments)}},getEditorActions:function(c){function e(c){function e(a,b){b.handler=function(){a.onEdit(r.getSelection()[0])}}var g=c.selection;if(g&&g[0]){var d=g[0],q=this.permissions,p=b.ACTION,r=this,v=r.domNode,u=r.getActionStore(),g=this.getContextMenu?this.getContextMenu():null;"deselect"!=c.why&&(u.getSync(b.ACTION.OPEN_IN),c=r.addActions(function(b){for(var c=
a.getEditors(b)||[],g=[],d=0;d<c.length;d++){var u=c[d];if("Default Editor"!==u.name){var k=r.createAction(u.name,p.OPEN_IN+"/"+u.name,u.iconClass,null,"Home","Open","item",null,function(){},{addPermission:!0,tab:"Home",editor:u,custom:!0,quick:!0},null,null,q,v,r);e(u,k);g.push(k);u.editorClass&&u.editorClass.getFileActions&&(g=g.concat(u.editorClass.getFileActions(h,b)))}}return g}(d)),this._lastEditorActions&&(_.each(this._lastEditorActions,function(a){u.removeSync(a.command)}),delete this._lastEditorActions),
g&&g.removeCustomActions(),0<c.length&&(c=this.addActions(c),u._emit("onActionsAdded",c),this._lastEditorActions=c))}}c=c||this.permissions;var g=[],d=b.ACTION,q=b.ACTION_ICON,r=this,h=r.ctx,v=r.domNode;r.getActionStore();var u=null;this._selHandle||(this._selHandle=this._on("selectionChanged",function(a){e.apply(r,[a])}));u=this.createAction("Open In",d.OPEN_IN,q.EDIT,null,"Home","Open","item",null,function(){},{addPermission:!0,tab:"Home",quick:!0},null,p.shouldDisableDefaultFileOnly,c,v,r);g.push(u);
c=r.createAction("Default Editor",d.OPEN_IN+"/Default Editor","fa-code",null,"Home","Open","item",null,function(){},{addPermission:!0,tab:"Home",forceSubs:!0,quick:!0},null,null,c,v,r);g.push(c);return g}};m=m("xfile.FileActions",null,q);m.Implementation=q;m.createFilePicker=function(a,c,e,g,q,p,r,h,v){(new x({size:b.DIALOG_SIZE.SIZE_NORMAL,getContentSize:function(){return{width:"600px",height:"500px"}},bodyCSS:{height:"auto","min-height":"500px",padding:"8px","margin-right":"16px"},picker:null,title:g,
onOk:function(){var a=this.picker._selection;a&&a[0]&&(e(a[0]),r&&r.resolve(a[0],a,this.picker))},onShow:function(e,g){this.picker=e=d.addWidget(A,d.mixin({ctx:a.ctx,owner:a,selection:c||".",resizeToParent:!0,storeOptionsMixin:d.mixin({includeList:"*,.*",excludeList:""},v),Module:h,permissions:q||d.clone(b.DEFAULT_FILE_GRID_PERMISSIONS)},p),this,g,!0);this.add(e);this.startDfd.resolve();return[this.picker]}})).show();return r};return m})},"xide/action/Action":function(){define("xdojo/declare dojo/_base/lang xide/model/Base xide/types xide/utils xide/mixins/EventedMixin".split(" "),
function(n,m,k,h,d,b){d.mixin(h,{ACTION_VISIBILITY:{MAIN_MENU:"MAIN_MENU",CONTEXT_MENU:"CONTEXT_MENU",QUICK_LAUNCH:"QUICK_LAUNCH",ACTION_TOOLBAR:"ACTION_TOOLBAR",PROPERTY_VIEW:"PROPERTY_VIEW",RIBBON:"RIBBON",widgetArgs:null,factory:function(){var b=arguments[1]||m.clone(h.ACTION_VISIBILITY),c=arguments;if(0<c[0].length&&_.isNumber(c[0][0])){var a=c[0],e=0;_.each(b,function(c,g){"function"!==typeof b[g]&&e<a.length&&(b[g+"_val"]=a[e]);e++})}if(_.isString(c[0][0])){if(!0===c[0][2])m.mixin(b[c[0][0]+
"_val"],c[0][2]);else return b[c[0][0]+"_val"]=c[0][1],b;return c[1]}return b}}});h.ACTION_VISIBILITY_ALL="ACTION_VISIBILITY_ALL";var c=n("xide/action/Action",[k,b],{disabled:!1,enabled:!0,object:null,show:!0,group:"",types:"",command:null,icon:"fa-play",event:null,handler:null,tab:null,visibility_:null,value:null,setVisibility:function(){if(2==arguments.length&&_.isString(arguments[0])&&arguments[0]==h.ACTION_VISIBILITY_ALL){var b=arguments[1],c=h.ACTION_VISIBILITY,a=this;[c.MAIN_MENU,c.ACTION_TOOLBAR,
c.CONTEXT_MENU,c.RIBBON].forEach(function(c){a.setVisibility(c,d.cloneKeys(b,!1))});return this}c=_.isArray(arguments[0])?arguments[0]:arguments;this.visibility_=h.ACTION_VISIBILITY.factory(c,this.visibility_);return this},getVisibility:function(b){this.visibility_||this.setVisibility(h.ACTION_VISIBILITY_ALL,{});return this.visibility_?(null==this.visibility_[b+"_val"]&&(this.visibility_[b+"_val"]={vis:b}),this.visibility_[b+"_val"]):{}},shouldDestroyWidget:function(b,c,a){b=null!=this.getVisibility?
this.getVisibility(b):null;var e=!0;b&&b.permanent&&(e=!(_.isFunction(b.permanent)?b.permanent(this,c,a):b.permanent));return e}});c.create=function(b,p,a,e,q,h,k,r,v,x,m){b=new c({permanent:e,command:a,icon:p,label:b,owner:this,types:h,operation:q,group:k,handler:x,title:b});d.mixin(b,m);return b};c.createDefault=function(b,d,a,e,q,h){return c.create(b,d,a,!1,null,null,e||"nogroup",null,!1,q,h)};return c})},"davinci/ui/ModelEditor":function(){define(["dojo/_base/declare","../Runtime","./TextEditor",
"../commands/SourceChangeCommand"],function(n,m,k,h){return n(k,{constructor:function(d,b){this.subscribe("/davinci/ui/selectionChanged",this.selectModel)},colorize:function(d){return null},setContent:function(d,b){this.inherited(arguments);this.model.fileName=d;this.model.setText(b)},getHoverText:function(d,b){d=this.convertMouseToLine(d,b);return this.model.findChildAtPosition({startOffset:d.row,endOffset:d.col}).getLabel()},handleChange:function(d){this.inherited(arguments);var b=this.model.getText(),
c=m.currentEditor;c&&c.getCommandStack?(c=c.getCommandStack(),b=new h({model:this.model,oldText:b,newText:d}),c.execute(b)):(this.model.setText(d),dojo.publish("/davinci/ui/modelChanged",[{newModel:this.model}]))},selectModel:function(d,b){this.publishingSelect||b&&this!=b||!d.length||!d[0].model||(d=d[0].model,d.elementType&&(d=this.model.mapPositions(d),this.select(d)))},selectionChange:function(d){var b=this.model.mapPositions(this.model),b=this.model.endOffset-b.endOffset,b=this.model.findChildAtPosition({startOffset:d.startOffset+
b,endOffset:d.endOffset+b-1});d.model=b;if(b!=this._selectedModel)try{this.publishingSelect=!0,dojo.publish("/davinci/ui/selectionChanged",[[d],this])}finally{this.publishingSelect=!1}this._selectedModel=b},getSyntaxPositions:function(d,b){this.model.setText(d);if(this.model.getSyntaxPositions)return this.model.getSyntaxPositions(b).sort(function(b,g){return b.line!=g.line?b.line-g.line:b.col-g.col})},save:function(){this.model.setText(this.getText());this.inherited(arguments)},getErrors:function(){return this.model.errors||
[]}})})},"xide/rpc/Service":function(){define("dojo/_base/kernel dojo/_base/lang dojo/_base/xhr dojo/_base/declare xide/rpc/AdapterRegistry dojo/_base/url xide/utils xide/lodash".split(" "),function(n,m,k,h,d,b,c,g){function p(a,b){var c=a._baseUrl;a.target&&(c=new n._Url(c,a.target)+"");b.target&&(c=new n._Url(c,b.target)+"");return c}function a(a,b){if(n.isArray(b))return b;for(var c=[],e=0;e<a.length;e++)c.push(b[a[e].name]);return c}var e=new d(!0),q=new d(!0),u=1;h=h("xide.rpc.Service",null,
{constructor:function(a,b){function e(a){a._baseUrl=new n._Url(n.isBrowser?location.href:n.config.baseUrl,d||".")+"";q._smd=a;b&&"methods"===b.services&&(a.services=a.methods,delete a.methods,a.transport="POST",b.mixin&&m.mixin(a,b.mixin),b=null);for(var c in q._smd.services){a=c.split(".");for(var e=q,g=0;g<a.length-1;g++)e=e[a[g]]||(e[a[g]]={});e[a[a.length-1]]=q._generateService(c,q._smd.services[c])}}var d,q=this;a&&(g.isString(a)||a instanceof n._Url?(d=a instanceof n._Url?a+"":a,this.__init=
k.getText(d),q=this,this.__init.then(function(a){e(c.fromJson(a))})):e(a));this._options=b?b:{};this._requestId=0},_generateService:function(a,b){if(this[b])throw Error("WARNING: "+a+" already exists for service. Unable to generate function");b.name=a;var c=n.hitch(this,"_executeMethod",b),g=e.match(b.transport||this._smd.transport);g.getExecutor&&(c=g.getExecutor(c,b,this));b=b.returns||(b._schema={});b._service=c;c.servicePath="/"+a+"/";c._schema=b;c.id=u++;return c},_getRequest:function(b,c){var e=
this._smd,g=q.match(b.envelope||e.envelope||"NONE"),d=(b.parameters||[]).concat(e.parameters||[]);if(g.namedParams){if(1==c.length&&n.isObject(c[0]))c=c[0];else{for(var r={},h=0;h<b.parameters.length;h++)"undefined"==typeof c[h]&&b.parameters[h].optional||(r[b.parameters[h].name]=c[h]);c=r}if(b.strictParameters||e.strictParameters)for(h in c){for(var r=!1,u=0;u<d.length;u++)d[u].name==h&&(r=!0);r||delete c[h]}for(h=0;h<d.length;h++)if(r=d[h],!r.optional&&r.name&&!c[r.name])if(r["default"])c[r.name]=
r["default"];else if(!(r.name in c))throw Error("Required parameter "+r.name+" was omitted");}else d&&d[0]&&d[0].name&&1==c.length&&n.isObject(c[0])&&(c=!1===g.namedParams?a(d,c):c[0]);n.isObject(this._options)&&(c=n.mixin(c,this._options));delete c.mixin;d=b._schema||b.returns;c=g.serialize.apply(this,[e,b,c]);c._envDef=g;return n.mixin(c,{sync:!1,contentType:b.contentType||e.contentType||c.contentType,headers:b.headers||e.headers||c.headers||{},target:c.target||p(e,b),transport:b.transport||e.transport||
c.transport,envelope:b.envelope||e.envelope||c.envelope,timeout:b.timeout||e.timeout,callbackParamName:b.callbackParamName||e.callbackParamName,rpcObjectParamName:b.rpcObjectParamName||e.rpcObjectParamName,schema:d,handleAs:c.handleAs||"auto",preventCache:b.preventCache||e.preventCache,frameDoc:this._options.frameDoc||void 0})},_executeMethod:function(a){var b=[],c;for(c=1;c<arguments.length;c++)b.push(arguments[c]);var g=this._getRequest(a,b),b=e.match(g.transport).fire(g);b.addBoth(function(a){return g._envDef.deserialize.call(this,
a)});return b}});h.transportRegistry=e;h.envelopeRegistry=q;h._nextId=u;h.getTarget=p;h.toOrdered=a;h._sync=!1;q.register("URL",function(a){return"URL"==a},{serialize:function(a,b,c){return{data:n.objectToQuery(c),transport:"POST"}},deserialize:function(a){return a},namedParams:!0});q.register("JSON",function(a){return"JSON"==a},{serialize:function(a,b,c){return{data:n.toJson(c),handleAs:"json",contentType:"application/json"}},deserialize:function(a){return a}});q.register("PATH",function(a){return"PATH"==
a},{serialize:function(a,b,c){var e;a=p(a,b);if(n.isArray(c))for(e=0;e<c.length;e++)a+="/"+c[e];else for(e in c)a+="/"+e+"/"+c[e];return{data:"",target:a}},deserialize:function(a){return a}});e.register("POST",function(a){return"POST"==a},{fire:function(a){a.url=a.target;a.postData=a.data;return n.rawXhrPost(a)}});e.register("GET",function(a){return"GET"==a},{fire:function(a){a.url=a.target+(a.data?"?"+(a.rpcObjectParamName?a.rpcObjectParamName+"\x3d":"")+a.data:"");return k.get(a)}});n._contentHandlers&&
(n._contentHandlers.auto=function(a){var b=n._contentHandlers,c=a.getResponseHeader("Content-Type");return c?c.match(/\/.*json/)?b.json(a):c.match(/\/javascript/)?b.javascript(a):c.match(/\/xml/)?b.xml(a):b.text(a):b.text(a)});return h})},"davinci/workbench/WidgetLite":function(){define(["dojo/_base/declare","dijit/_WidgetBase","dojo/parser","xide/mixins/EventedMixin"],function(n,m,k,h){return n("davinci.workbench.WidgetLite",[m,h],{buildRendering:function(){this.inherited(arguments);/dojotype/i.test(this.domNode.innerHTML||
"")&&(this._startupWidgets=dojo.parser.parse(this.domNode,{noStart:!this._earlyTemplatedStartup,inherited:{dir:this.dir,lang:this.lang}}))},_destroyContent:function(){var d=this.containerNode||this.domNode;for(dojo.forEach(dojo.query("[widgetId]",d).map(dijit.byNode),function(b){b.destroy()});d.firstChild;)dojo._destroyElement(d.firstChild);dojo.forEach(this._tooltips,function(b){b.destroy()});delete this._tooltips;this._destroyHandles()},startup:function(){dojo.forEach(this._startupWidgets,function(d){d&&
!d._started&&d.startup&&d.startup()});this.inherited(arguments)}})})},"dojox/color/_base":function(){define(["../main","dojo/_base/lang","dojo/_base/Color","dojo/colors"],function(n,m,k,h){n=m.getObject("color",!0,n);n.Color=k;n.blend=k.blendColors;n.fromRgb=k.fromRgb;n.fromHex=k.fromHex;n.fromArray=k.fromArray;n.fromString=k.fromString;n.greyscale=h.makeGrey;m.mixin(n,{fromCmy:function(d,b,c){m.isArray(d)?(b=d[1],c=d[2],d=d[0]):m.isObject(d)&&(b=d.m,c=d.y,d=d.c);return new k({r:Math.round(255*(1-
d/100)),g:Math.round(255*(1-b/100)),b:Math.round(255*(1-c/100))})},fromCmyk:function(d,b,c,g){m.isArray(d)?(b=d[1],c=d[2],g=d[3],d=d[0]):m.isObject(d)&&(b=d.m,c=d.y,g=d.b,d=d.c);g/=100;return new k({r:Math.round(255*(1-Math.min(1,d/100*(1-g)+g))),g:Math.round(255*(1-Math.min(1,b/100*(1-g)+g))),b:Math.round(255*(1-Math.min(1,c/100*(1-g)+g)))})},fromHsl:function(d,b,c){m.isArray(d)?(b=d[1],c=d[2],d=d[0]):m.isObject(d)&&(b=d.s,c=d.l,d=d.h);b/=100;for(c/=100;0>d;)d+=360;for(;360<=d;)d-=360;var g,p;120>
d?(g=(120-d)/60,p=d/60,d=0):240>d?(g=0,p=(240-d)/60,d=(d-120)/60):(g=(d-240)/60,p=0,d=(360-d)/60);g=2*b*Math.min(g,1)+(1-b);p=2*b*Math.min(p,1)+(1-b);d=2*b*Math.min(d,1)+(1-b);.5>c?(g*=c,p*=c,d*=c):(g=(1-c)*g+2*c-1,p=(1-c)*p+2*c-1,d=(1-c)*d+2*c-1);return new k({r:Math.round(255*g),g:Math.round(255*p),b:Math.round(255*d)})}});n.fromHsv=function(d,b,c){m.isArray(d)?(b=d[1],c=d[2],d=d[0]):m.isObject(d)&&(b=d.s,c=d.v,d=d.h);360==d&&(d=0);b/=100;c/=100;var g,p,a;if(0==b)p=a=g=c;else{var e=d/60;d=Math.floor(e);
var q=e-d,e=c*(1-b),h=c*(1-b*q);b=c*(1-b*(1-q));switch(d){case 0:g=c;p=b;a=e;break;case 1:g=h;p=c;a=e;break;case 2:g=e;p=c;a=b;break;case 3:g=e;p=h;a=c;break;case 4:g=b;p=e;a=c;break;case 5:g=c,p=e,a=h}}return new k({r:Math.round(255*g),g:Math.round(255*p),b:Math.round(255*a)})};m.extend(k,{toCmy:function(){return{c:Math.round(100*(1-this.r/255)),m:Math.round(100*(1-this.g/255)),y:Math.round(100*(1-this.b/255))}},toCmyk:function(){var d,b=this.r/255,c=this.g/255,g=this.b/255;d=Math.min(1-b,1-c,1-
g);return{c:Math.round((1-b-d)/(1-d)*100),m:Math.round((1-c-d)/(1-d)*100),y:Math.round((1-g-d)/(1-d)*100),b:Math.round(100*d)}},toHsl:function(){var d=this.r/255,b=this.g/255,c=this.b/255,g=Math.min(d,c,b),p=Math.max(d,b,c),a=p-g,e=0,q=0,g=(g+p)/2;0<g&&1>g&&(q=a/(.5>g?2*g:2-2*g));0<a&&(p==d&&p!=b&&(e+=(b-c)/a),p==b&&p!=c&&(e+=2+(c-d)/a),p==c&&p!=d&&(e+=4+(d-b)/a),e*=60);return{h:e,s:Math.round(100*q),l:Math.round(100*g)}},toHsv:function(){var d=this.r/255,b=this.g/255,c=this.b/255,g=Math.max(d,b,
c),p=g-Math.min(d,c,b),a=null,e=0==g?0:p/g;0==e?a=0:(a=d==g?60*(b-c)/p:b==g?120+60*(c-d)/p:240+60*(d-b)/p,0>a&&(a+=360));return{h:a,s:Math.round(100*e),v:Math.round(100*g)}}});return n})},"xblox/model/loops/WhileBlock":function(){define(["dcl/dcl","xblox/model/Block","xblox/model/variables/Variable"],function(n,m,k){return n(m,{declaredClass:"xblox.model.loops.WhileBlock",condition:null,items:null,loopLimit:1500,name:"While",wait:0,_currentIndex:0,sharable:!0,icon:"",_timer:null,canAdd:function(){return[]},
_solve:function(h,d){for(var b=0;b<this.items.length;b++)this.items[b].solve(h,d);return[]},doStep:function(h){if(this._currentIndex<this.loopLimit){var d=[];this._checkCondition(this.scope)?(this.onSuccess(this,h),this.addToEnd(d,this._solve(this.scope,h)),this._currentIndex++):(this._timer&&clearInterval(this._timer),this.onFailed(this,h))}else console.error("--while block : reached loop limit"),this.reset()},reset:function(){this._timer&&(clearTimeout(this._timer),this._timer=null);this._currentIndex=
0},solve:function(h,d){this.loopLimit=1500;d=d||{};var b=0,c=this,g=this._getArg(this.wait);this.reset();if(0<g)return this._timer=setInterval(function(){c.doStep(d)},g),[];for(;this._checkCondition(h)&&b<this.loopLimit;)this._solve(h,d),b++;this.reset();return[]},toText:function(){return this.getBlockIcon("G")+this.name+" "+this.condition},_checkCondition:function(h){return h.parseExpression(this.condition)},mayHaveChildren:function(h){return null!=this.items&&0<this.items.length},getChildren:function(h){h=
[];this.items&&(h=h.concat(this.items));return h},getFields:function(){var h=this,d=this.inherited(arguments)||this.getDefaultFields();d.push(this.utils.createCI("condition",25,this.condition,{group:"General",title:"Expression",dst:"condition",delegate:{runExpression:function(b,c,g){return h.scope.expressionModel.parse(h.scope,b,!1,c,g)}}}));d.push(this.utils.createCI("wait",13,this.wait,{group:"General",title:"Wait",dst:"wait"}));return d}})})},"dojo/dnd/common":function(){define(["../sniff","../_base/kernel",
"../_base/lang","../dom"],function(n,m,k,h){var d=k.getObject("dojo.dnd",!0);d.getCopyKeyState=function(b){return b[n("mac")?"metaKey":"ctrlKey"]};d._uniqueId=0;d.getUniqueId=function(){var b;do b=m._scopeName+"Unique"+ ++d._uniqueId;while(h.byId(b));return b};d._empty={};d.isFormElement=function(b){b=b.target;3==b.nodeType&&(b=b.parentNode);return 0<=" a button textarea input select option ".indexOf(" "+b.tagName.toLowerCase()+" ")};return d})},"davinci/actions/UndoAction":function(){define(["dojo/_base/declare",
"./Action","../Workbench"],function(n,m,k){return n("davinci.actions.UndoAction",m,{run:function(h){(h=k.getOpenEditor())&&h.getContext&&h.getContext().getCommandStack().undo()},isEnabled:function(h){var d=(h=k.getOpenEditor())&&h.getContext&&h.getContext();if(h&&d){if(d=d.getCommandStack().canUndo(),"davinci.ve.PageEditor"==h.declaredClass||"davinci.ve.themeEditor.ThemeEditor"==h.declaredClass)return d}else return!1}})})},"davinci/ve/palette/PaletteFolder":function(){define("dojo/_base/declare dijit/_WidgetBase dojo/dom-class dojo/fx davinci/Runtime davinci/ve/metadata".split(" "),
function(n,m,k,h,d,b){return n("davinci.ve.palette.PaletteFolder",m,{icon:"",displayName:"",paletteId:"",palette:null,preset:null,presetId:null,presetClassName:null,_type:"",_isOpen:!1,_openSubsection:null,buildRendering:function(){this.palette=dijit.byId(this.paletteId);var b=this.domNode=this.palette.folderTemplate.cloneNode(!0);this.presetClassName&&k.add(b,this.presetClassName);var g="PaletteFolder__"+this.presetId+"__"+this.section.id;this.subsection&&(g+="__"+this.subsection.id);dojo.attr(b,
"selType",g);g=b.firstChild;dojo.attr(g,"tabIndex","0");g.onclick=this.palette.nop;g.firstChild.src=this.iconBase64?this.iconBase64:this.icon;g.appendChild(dojo.doc.createTextNode(this.displayName));b._paletteFolder=this;this._type=this.subsections?"subsection_container":this.subsection?"subsection":"simple";"subsection"==this._type&&k.add(b,"PaletteFolderSubsection");this._children=[]},postCreate:function(){this.connect(this.domNode,"onmouseover","folderMouseOverHandler");this.connect(this.domNode,
"onmouseout","folderMouseOutHandler");this.connect(this.domNode,"onclick","folderClickHandler")},startup:function(){},isFocusable:function(){return!0},focus:function(){dijit.focus(this.domNode)},addChild:function(b){for(var c=this.palette.getChildren(),d=0,a=c.length;d<a;d++)if(c[d]==this)return this.palette.addChild(b,d+1),!0;return!1},_paletteItemGroupInfo:function(b,g){var c={},a=g,e=b[a],d=e._paletteItemGroup;do{e._paletteGroupSelected&&(c.selectedIndex=a);a++;if(a>=b.length)break;e=b[a]}while("davinci.ve.palette.PaletteItem"==
e.declaredClass&&e._paletteItemGroup===d);"number"!=typeof c.selectedIndex&&(c.selectedIndex=g,b[g]._paletteGroupSelected=!0);c.endIndex=a-1;return c},folderClickHandler:function(b){this.showHideFolderContents()},showHideFolderContents:function(c){for(var g=this.palette.getChildren(),d=0,a=g.length;d<a;){var e=g[d];if(e==this){"none"==this.domNode.style.display&&h.wipeIn({node:this.domNode,duration:100}).play();if("subsection_container"==this._type)for(this._isOpen="boolean"==typeof c?c:!this._isOpen,
e=d+1;e<a;e++)if(d=g[e],"davinci.ve.palette.PaletteFolder"==d.declaredClass){if("subsection"!=d._type)break;0==d._children.length?(d.domNode.style.display="none",d.isOpen=!1):this._isOpen?(h.wipeIn({node:d.id,duration:100}).play(),d._isOpen=d==d.subsection_container._openSubsection):(h.wipeOut({node:d.id,duration:100}).play(),d.isOpen=!1)}else this._isOpen&&d.PaletteFolderSubsection._isOpen?h.wipeIn({node:d.id,duration:100,onEnd:function(a){setTimeout(function(){a.style.height=""},1)}.bind(this,d.domNode)}).play():
d.domNode.style.display="none";else for(this._isOpen="boolean"==typeof c?c:!this._isOpen,"subsection"==this._type&&(this.subsection_container._openSubsection=this._isOpen?this:null),e=d+1;e<a;){d=g[e];if("davinci.ve.palette.PaletteItem"!=d.declaredClass)break;for(d=this._paletteItemGroupInfo(g,e);e<=d.endIndex;e++){var q=g[e],u=b.getWidgetDescriptorForType(q.type),k;u||(k=!0);if(u&&"custom"==u.category)k=!0;else if(u=u&&u.collection,k=!1,q.preset&&q.preset.collections)for(var r=q.preset.collections,
v=0;v<r.length;v++){var x=r[v];if(x.id&&x.id===u){k=x.show;break}}e==d.selectedIndex&&k?this._isOpen?h.wipeIn({node:q.id,duration:100,onEnd:function(a){setTimeout(function(){a.style.height=""},1)}.bind(this,q.domNode)}).play():h.wipeOut({node:q.id,duration:100}).play():q.domNode.style.display="none"}}d=e}else"davinci.ve.palette.PaletteItem"==e.declaredClass&&"none"!=e.domNode.style.display&&h.wipeOut({node:e.id,duration:100}).play(),"davinci.ve.palette.PaletteFolder"!=e.declaredClass||"simple"!=e._type&&
"subsection"!=e._type||(e._isOpen=!1),"davinci.ve.palette.PaletteFolder"==e.declaredClass&&"subsection_container"==e._type&&e!=this.subsection_container&&(e._isOpen=!1),"davinci.ve.palette.PaletteFolder"!=e.declaredClass||"subsection"!=e._type||e.subsection_container._isOpen||"none"==e.domNode.style.display||(h.wipeOut({node:e.id,duration:100}).play(),e._isOpen=!1),d++}return!1},folderMouseOverHandler:function(b){dojo.removeClass(this.domNode,"dojoyPaletteFolderLow");dojo.addClass(this.domNode,"dojoyPaletteFolderHi")},
folderMouseOutHandler:function(b){dojo.removeClass(this.domNode,"dojoyPaletteFolderHi");dojo.addClass(this.domNode,"dojoyPaletteFolderLow")}})})},"xideve/metadata/delite/0.8/delite/Helper":function(){define(function(){var n=function(){};n.prototype={_isAllowed:function(m){return"delite/ViewStack"===m.parentType||"delite/Accordion"===m.parentType?!0:!1},updateWidget:function(){console.error("updateWidget",arguments)},_getWidgetClassText:function(m,k){return""},_remove_prefix:function(m){for(var k=
m,h="dijit/form/ dijit/layout/ dijit/ dojox/mobile/ html. html/ OpenAjax. OpenAjax/".split(" "),d=0;d<h.length;d++)if(0==m.indexOf(h[d])){k=m.substr(h[d].length);"html."==h[d]&&(k="\x26lt;"+k+"\x26gt;");break}return k},getWidgetNameText:function(m){if(m.domNode&&m.domNode.label)return m="\x3cspan class\x3d'propertiesTitleWidgetName'\x3e\x3c/span\x3e ","";m="\x3cspan class\x3d'propertiesTitleWidgetName'\x3e"+this._remove_prefix(m.type);return m+"\x3c/span\x3e "},getWidgetText:function(m){if(m.domNode){var k=
null;return k=m.domNode.get?m.domNode.get("label"):m.domNode.label}return m.type},__getData:function(m,k){if(m){k=m._getData(k);var h=dijit.getUniqueId(m.type.replace(/\./g,"_")),h=h.replace("delite/","d-").toLowerCase();"no_id"===m.id&&(m.id=h,k.properties.id=h,k.properties.id=h);return k}},create:function(m){m._srcElement.setAttribute("id",m.id)},onAdded:function(m,k){return"xblox/RunScript"===k.type?m:k},_getChildren:function(m,k){return[]},___getChildrenData:function(m,k){}};return n})},"davinci/actions/SaveAsWidget":function(){define("dojo/_base/declare ./Action ../Workbench davinci/ui/Dialog ../ui/SaveAsWidgetForm davinci/lang/ui/common".split(" "),
function(n,m,k,h,d,b){return n("davinci.actions.SaveAsWidget",m,{run:function(b){"davinci.ve.Context"!==b.declaredClass&&(b="function"===typeof b.getContext?b.getContext():k.getOpenEditor().getContext());b=this._generateMetadata(b);this._showDialog(b)},_generateMetadata:function(b){var c={spec:"1.0",require:[],library:{}},d=b.model.find({elementType:"HTMLElement",tag:"body"},!0);c.content=dojo.trim(d.getText(b).match(/<body[^>]*>([\s\S]*)<\/body>/)[1]);this._getRequires(b.getTopWidgets(),c);return c},
_getRequires:function(b,g){function c(a,b,e){dojo.forEach(a,function(a){if(!e.hasOwnProperty(a.type)){e[a.type]=!0;dojo.forEach(a.metadata.require,function(a){this._inRequiresArray(a,b.require)||b.require.push(a)},this);for(var g in a.metadata.library)a.metadata.library.hasOwnProperty(g)&&(b.library[g]||(b.library[g]=a.metadata.library[g]))}c.call(this,a.getChildren(),b,e)},this)}var a=a||{};c.call(this,b,g,a);if(1<g.require.length){b=g.require.slice(0,1);for(a=1;a<g.require.length;a++){var e=g.require[a];
e.$text&&b[b.length-1].$text?b[b.length-1].$text+="\n"+e.$text:b.push(e)}g.require=b}},_inRequiresArray:function(b,g){var c=b.$text?b.$text.replace(/\s/g," "):"";return dojo.some(g,function(a){return b.type===a.type&&(b.src&&a.src&&b.src===a.src&&(b.$library&&a.$library&&b.$library===a.$library||!b.$library&&!a.$library)||b.$text&&a.$text&&c===a.$text.replace(/\s/g," "))})},_showDialog:function(c){var g=new h({title:b.sawdTitle,"class":"dvSaveAsWidgetDialog",execute:dojo.hitch(this,function(b){this._saveMetadata(b.metadata)}),
onHide:function(){setTimeout(function(){g.destroyRecursive()},g.duration)}});c=new d({parentId:g.id,metadata:c});g.set("content",c);g.show()},_saveMetadata:function(b){}})})},"xcf/model/Driver":function(){define(["dcl/dcl","xide/data/Model","xide/data/Source","xide/mixins/EventedMixin","xide/utils"],function(n,m,k,h,d){return n([m,k.dcl,h.dcl],{itemMetaPath:"user.meta",getStore:function(){return this._store},getScope:function(){var b=this.getStore();return b?b.scope:this.scope},getMetaValue:function(b){return d.getCIInputValueByName(this.user,
b)},setMetaValue:function(b,c,g){var p=d.getCIByChainAndName(this.user,0,b);if(p){var a=this.getMetaValue(b);d.setCIValueByField(p,"value",c);this[b]=c;!1!==g&&this.publish(types.EVENTS.ON_CI_UPDATE,{owner:this.owner,ci:p,newValue:c,oldValue:a})}},getParent:function(){return this._store.getSync(this.parentId)},_mayHaveChildren:!1})})},"xblox/model/Contains":function(){define(["dcl/dcl","dojo/promise/all","xide/types"],function(n,m,k){return n(null,{declaredClass:"xblox.model.Contains",runByType:function(h,
d){h=this.getItemsByType(h);h.length&&this.runFrom(h,0,d)},getItemsByType:function(h){var d=this.items;if(!h)return d;var b=[];_.each(d,function(c){c.outlet&h&&b.push(c)});return b},getContainer:function(){return this[this._getContainer()]},mayHaveChildren:function(h){h=this[this._getContainer()];return null!=h&&0<h.length},getChildren:function(h){return this[this._getContainer()]},canAdd:function(){return[]},_solve:function(h,d,b,c){!this._lastRunSettings&&d&&(this._lastRunSettings=d);d=this._lastRunSettings||
d;this._currentIndex=0;this._return=[];h=this[this._getContainer()];if(h.length)return h=this.runFrom(h,0,d),this.onSuccess(this,d),h;this.onSuccess(this,d);return[]},onDidRunItem:function(h,d){this._emit(k.EVENTS.ON_RUN_BLOCK_SUCCESS,this);h.resolve(d)},onDidRunItemError:function(h,d){h.reject(d)},onRunThis:function(){this._emit(k.EVENTS.ON_RUN_BLOCK,this)},onDidRunThis:function(h,d,b,c){var g=this;if(b&&b.length)b=g.runFrom(b,0,c),m(b).then(function(){g.onDidRunItem(h,d,c)},function(b){g.onDidRunItem(h,
b,c)});else g.onDidRunItem(h,d,c)},___solve:function(h,d,b,c){}})})},"davinci/ve/widgets/WidgetProperties":function(){define("dojo/_base/declare dojo/_base/connect davinci/workbench/ViewLite davinci/ve/metadata davinci/commands/CompoundCommand davinci/ve/commands/ModifyCommand ./HTMLStringUtil dijit/form/DateTextBox dijit/form/TimeTextBox xide/types xide/factory".split(" "),function(n,m,k,h,d,b,c,g,p,a,e){return n("davinci.ve.widgets.WidgetProperties",[k],{key:"widgetSpecific",_connects:null,buildRendering:function(){this.domNode=
this.propDom=dojo.doc.createElement("div");dojo.addClass(this.domNode,"propGroup");dojo.attr(this.domNode,"propGroup",this.key);this._connects=[];this.inherited(arguments)},onWidgetSelectionChange:function(){if(this._widget&&this._editor&&"davinci.ve.HTMLPageEditor"==this._editor.editorID){var a=davinci.ve.metadata.query(this._widget),b=this._widget.getParent();if(b&&b.isWidget&&(b=h.query(b))&&b.childProperties)if(a.$ownproperty)for(var c in b.childProperties)a.$ownproperty[c]=b.childProperties[c];
else a.$ownproperty=b.childProperties;if(a&&a.$ownproperty){this._disconnectAll();this._destroyProperties();b={};a.$ownproperty.title||(b.title={datatype:"string"});for(c in a.$ownproperty)b[c]=a.$ownproperty[c];a=this.propDom.innerHTML=this._createWidgetRows(b);-1===a.indexOf("data-dojo-type")&&-1===a.indexOf("dojoType")||dojo.parser.parse(this.propDom);this._setValues();this._connectAll()}}else this._disconnectAll(),this._destroyProperties()},onEditorSelected:function(a){if((this._editor=a)&&"davinci.ve.HTMLPageEditor"==
a.editorID){if(this.context=a.getContext())this._widget=this.context.getSelection()[0]}else this._widget=this.context=null;this.onWidgetSelectionChange()},_createWidgetRows:function(a){this._pageLayout=[];for(var b in a){var e=a[b];if(!e.hidden){var g={display:e.title||b,type:e.datatype,format:e.format,target:b,hideCascade:!0,data:e};if(e.dropdownQueryValues&&e.dropdownQueryAttribute){var d=[];dojo.forEach(e.dropdownQueryValues,dojo.hitch(this,function(a){a=dojo.query(a,this.context.rootNode);dojo.forEach(a,
function(a){d.push(a.getAttribute(e.dropdownQueryAttribute))})}));g.values=d;g.type="comboEdit"}if(dojo.isArray(e.mustHaveAncestor)){for(var q=!1,p=this._widget;!q&&p&&p.getParent()!=this.context.rootWidget;)(p=p.getParent())&&-1<dojo.indexOf(e.mustHaveAncestor,p.type)&&(q=!0);q||(g.disabled=!0)}this._pageLayout.push(g);e.option&&(this._pageLayout[this._pageLayout.length-1].values=dojo.map(e.option,function(a){return a}),this._pageLayout[this._pageLayout.length-1].type=e.unconstrained?"comboEdit":
"combo")}}return c.generateTable(this._pageLayout)},_destroyProperties:function(){var a=this.propDom;for(dojo.forEach(dojo.query("[widgetId]",a).map(dijit.byNode),function(a){a.destroy()});a.firstChild;)dojo._destroyElement(a.firstChild)},_connectAll:function(){function b(a){return function(){return this._onChange({target:a})}}for(var c=0,g=this._pageLayout.length;c<g;c++){var d=this._pageLayout[c],p=dijit.byId(d.id),h=p||dojo.byId(d.id),k=p?"onChange":"change",m=p?"onFocus":"focus",n=p?"onBlur":
"blur";h?(h.pageIndex=c,this._connect(h,k,this,b(c)),this._connect(h,m,this,"_onFieldFocus"),this._connect(h,n,this,"_onFieldBlur"),h.owner=this,h.row=c,e.publish(a.EVENTS.WIDGET_PROPERTY_RENDERED,{view:this,row:d,widget:p,node:h},this)):console.error("cant find "+d.id+" node",d)}},_connect:function(a,b,c,e,g){this._connects.push(m.connect.apply(null,arguments))},_disconnectAll:function(){this._connects.forEach(m.disconnect);this._connects=[]},_onChange:function(a){a=this._pageLayout[a.target];var c=
dijit.byId(a.id),e;this.context&&this.context.blockChange(!1);c?(e=c.get("value"))&&e instanceof Date&&(c instanceof g?e=e.toISOString().substring(0,10):c instanceof p&&(e="T"+e.toTimeString().substring(0,8))):(e=dojo.byId(a.id),e=dojo.attr(e,"checkbox"===e.type?"checked":"value"));if(a.value!=e){a.value=e;c={};c[a.target]=e;a=new d;e=new b(this._widget,c,null);a.add(e);if((c=this._widget.getHelper())&&c.onWidgetPropertyChange)c.onWidgetPropertyChange({widget:this._widget,compoundCommand:a,modifyCommand:e});
dojo.publish("/davinci/ui/widgetPropertiesChanges",[{source:this._editor.editor_id,compoundCommand:a,command:e}])}},_onFieldFocus:function(){this.context&&this.context.blockChange(!0)},_onFieldBlur:function(){this.context&&this.context.blockChange(!1)},_setValues:function(){try{for(var a=0,b=this._pageLayout.length;a<b;a++){var c=this._pageLayout[a],e=dojo.byId(c.id);if(e){var g=this._widget,d=c.target,p;p="_children"===d?(p=g.getChildrenData())&&1===p.length?p[0]:g.getPropertyValue(d):g.getPropertyValue(d);
if(p&&p.toISOString){var h=g.metadata.property[d].format;h&&("date"==h?p=p.toISOString().substring(0,10):"time"==h&&(p="T"+p.toTimeString().substring(0,8)))}if(c.value!=p){c.value=p;var k="boolean"===c.type?"checked":"value",m=dijit.byId(c.id);m?m.attr(k,c.value):dojo.attr(e,k,c.value)}}}}catch(C){debugger}}})})},"xgrid/MultiRenderer":function(){define(["xdojo/declare","xide/types","xgrid/Renderer","dojo/_base/kernel"],function(n,m,k,h){function d(c,g){b[g]=function(){var b=this.getSelectedRenderer();
return b[g]?b[g].apply(this,arguments):this.inherited(arguments)}}var b={renderers:null,selectedRenderer:null,lastRenderer:null,rendererActionRootCommand:"View/Layout",runAction:function(b){b=this.getAction(b);if(-1!==b.command.indexOf(this.rendererActionRootCommand)){var c=b.getParent?b.getParent():null;b._originEvent="change";this.setRenderer(b.value);c&&(c.set("icon",b.get("icon")),c=c.getChildren(),_.each(c,function(b){b._oldIcon&&b.set("icon",b._oldIcon)}));b.set&&b.set("icon","fa-check");return!0}return this.inherited(arguments)},
setState:function(b){var c=b.selectedRenderer?h.getObject(b.selectedRenderer):null;c&&(this.setRenderer(c),this.set("collection",this.collection.getDefaultCollection()));return this.inherited(arguments)},getState:function(b){b=this.inherited(arguments)||{};this.selectedRenderer&&(b.selectedRenderer=this.getSelectedRenderer.declaredClass);return b},getRendererActions:function(b,g){function c(b,c,g){var q="shift f"+k;k++;var p=null,p=e.createAction({label:b,command:a+"/"+b,icon:c,tab:"View",group:"Layout",
mixin:{value:g,addPermission:!0,closeOnClick:!1},keycombo:[q],onCreate:function(a){a._oldIcon=c;a.actionType=m.ACTION_TYPE.SINGLE_TOGGLE;a.value=g}});d.push(p);return d}var a=this.rendererActionRootCommand,e=this,d=[];b=b||this.getRenderers();var h=m.ACTION_VISIBILITY,k=1;d.push(this.createAction({label:"Layout",command:a,icon:"fa-laptop",tab:"View",group:"Layout",mixin:{closeOnClick:!1},onCreate:function(a){a.value=e.selectedRenderer;a.setVisibility(h.ACTION_TOOLBAR,!1).setVisibility(h.RIBBON,{expand:!0})}}));
_.each(b,function(a){var b=a.Implementation||a.prototype;b._getLabel&&c(b._getLabel(),b._getIcon(),a)});return d},getSelectedRenderer:function(){return this.selectedRenderer.prototype},startup:function(){var b=this;this._on("onAddGridActions",function(c){b.getRendererActions(b.getRenderers(),c.actions).forEach(function(b){c.actions.push(b)})});this.inherited(arguments);this.selectedRenderer&&$(this.domNode).addClass(this.getSelectedRenderer()._getLabel())},getRenderers:function(){return this.renderers},
setRenderer:function(b,g){var c=this;c.getSelection();c.getFocused();g=c.getSelectedRenderer();var a={"new":b,old:c.selectedRenderer},e=$(this.domNode);e.removeClass(g._getLabel());g.deactivateRenderer.apply(this,a);this._emit("onChangeRenderer",a);this.lastRenderer=this.selectedRenderer;this.selectedRenderer=b;this.selectedRendererClass=b.prototype.declaredClass;e.addClass(b.prototype._getLabel());b.prototype.activateRenderer.apply(this,a);this.collection.reset();(b=this.refresh())&&b.then&&b.then(function(){c._emit("onChangedRenderer",
a)});return b}};_.each("row removeRow renderRow insertRow activateRenderer deactivateRenderer".split(" "),function(c){d(b,c)});n=n("xgrid.MultiRenderer",null,b);n.Implementation=b;return n})},"xide/widgets/IconPicker":function(){define("dcl/dcl dojo/_base/declare dojo/dom-construct xide/widgets/WidgetBase xide/factory xide/utils".split(" "),function(n,m,k,h,d,b){return n(h,{declaredClass:"xide.widgets.EditBox",value:"unset",_lastValue:null,instant:!1,widgetChanged:function(b){this.changed=!0;this.userData&&
(this.userData.changed=!0);this.nativeWidget&&this.setValue(this.nativeWidget.val())},__onChanged:function(b){var c=this.nativeWidget;this.validator&&(this.validator(b,c)?(this.userData.invalid=!1,c.removeClass("text-danger"),c.addClass("text-success")):(c.removeClass("text-success"),c.addClass("text-danger"),this.userData.invalid=!0));if(null===this._lastValue||this._lastValue!==b)this._lastValue=b,this.widgetChanged(this.nativeWidget)},setupNativeWidgetHandler:function(){var b=this.nativeWidget;
if(b){var g=this;this.addHandle("change",this.nativeWidget.on("change",function(c){g.__onChanged(b.val())}));if(this.instant)b.on("keyup change",function(){g.__onChanged(b.val())});this.addHandle("blur",this.nativeWidget.on("blur",function(){g.setActive(!1)}));this.addHandle("focus",this.nativeWidget.on("focus",function(){g.setActive(!0)}))}},set:function(b,g){"value"===b&&this.nativeWidget&&this.nativeWidget.val(g);return this.inherited(arguments)},startup:function(){this.inherited(arguments);this.valueNode.innerHTML=
"";var c=this,g=k.create("input",{"class":"form-control input-transparent icp icp-auto iconpicker-element iconpicker-input",type:"text",value:this.userData.value});this.nativeWidget=$(g);""===this.title&&b.destroy(this.titleColumn);this.valueNode.appendChild(g);$(g).iconpicker({selectedCustomClass:"label label-success",showFooter:!1}).on("iconpickerSelected",function(b){c.__onChanged(c.nativeWidget.val())});this.setupNativeWidgetHandler();this.onReady()}})})},"davinci/ve/RebuildPage":function(){define("dojo/_base/declare ./Context ../model/Path davinci/model/Factory dojo/Deferred dojo/promise/all davinci/ve/commands/ChangeThemeCommand".split(" "),
function(n,m,k,h,d,b,c){return n(null,{constructor:function(b){dojo.mixin(this,b);this.context=new m},getPageCss:function(){return["app.css"]},getPageJs:function(){return["app.js"]},rebuildSource:function(g,p,a,e){if(!p||!p.extension||"html"!=p.extension){var q=new d;q.resolve(g);return q}this.context.model=this.context._srcDocument=h.getNewFromResource(p);var u=new k(p?p.getPath():"");this.context.model.fileName=u.toString();this.context._srcDocument.setText(g,!0);if(null==this.context._srcDocument.find({elementType:"HTMLElement",
tag:"html"},!0))return q=new d,q.resolve(g),q;var w=this.context._srcDocument.find({elementType:"HTMLElement"});g=[];g.push(this.context.loadRequires("html.body",!0,!0,!0));for(p=0;p<w.length;p++){var r=w[p],r=r.getAttribute("data-dojo-type")||r.getAttribute("dojoType")||r.getAttribute("dvwidget");null!=r&&g.push(this.context.loadRequires(r.replace(/\./g,"/"),!0,!0,!0))}a&&this.changeThemeBase(a,u);e&&e.mobileTheme&&(new c(e,this.context))._dojoxMobileAddTheme(this.context,e.mobileTheme);w=this.getPageCss();
a=this.getPageJs();e=this.context._getCurrentBasePath();u=u.getParentPath();for(p=0;p<w.length;p++)r=e.append(w[p]).relativeTo(u).toString(),this.addModeledStyleSheet(r,w[p]);for(p=0;p<a.length;p++)w=e.append(a[p]).relativeTo(u).toString(),this.addJavaScript(w,null,null,null,a[p]);q=new d;b(g).then(function(){q.resolve(this.context._srcDocument.getText())}.bind(this));return q},addModeledStyleSheet:function(b,c){this.context._srcDocument.find({elementType:"CSSImport"}).some(function(a){if(a.url&&
-1<a.url.indexOf(c))return a.setUrl(b),!0})},addJavaScript:function(b,c,a,e,d){!this.context._srcDocument.find({elementType:"HTMLElement",tag:"script"}).some(function(a){var c=a.getAttribute("src");if(c&&-1<c.indexOf(d))return a.setAttribute("src",b),!0})&&b&&(-1<b.indexOf("dojo.js")&&this.context.addHeaderScript(b,{"data-dojo-config":"parseOnLoad: true"}),this.context.addHeaderScript(b))},changeThemeBase:function(b,c){var a=new k(b.getFile().parent.getPath()),e=function(b){var e=a.append(b).relativeTo(c,
!0);this.addModeledStyleSheet(e.toString(),new k(b),!0)}.bind(this);b.files.forEach(e);b.conditionalFiles&&b.conditionalFiles.forEach(e)}})})},"xide/factory/Widgets":function(){define("dojo/dom-construct xide/factory xide/types xide/utils dojo/Deferred dojo/promise/all dojo/when xide/widgets/WidgetBase xide/widgets/NativeWidget xlang/i18 xide/widgets/EditBox xide/widgets/StructuralWidget xide/$ xide/lodash".split(" "),function(n,m,k,h,d,b,c,g,p,a,e,q,u,w){m.radioButtonString=function(a,b,c,e){var g=
b+"_"+h.createUUID();a='\x3cdiv class\x3d"radio radio-info"\x3e'+('\x3cinput attachTo\x3d"'+e+'" name\x3d"'+b+'" id\x3d"'+g+'" type\x3d"radio" '+(1==a?"checked":"")+"/\x3e")+('\x3clabel for\x3d"'+g+'"\x3e')+c;a+="\x3c/label\x3e";return a+="\x3c/div\x3e"};m.renderCIS=function(a,b,e){a=m.createWidgetsFromArray(a,e,null,!1);var g=[],q=new d;c(a,function(a){if(a){for(var c=0;c<a.length;c++){var d=a[c];d.delegate=e;b.appendChild(d.domNode);b&&!0===b.lazy?d._startOnShow=!0:d.startup();d._on("valueChanged",
function(a){e.onValueChanged(a)});e._emit("widget",{widget:d,ci:d.userData});g.push(d);d.userData.view=e;d.onAttached&&d.onAttached(b);e&&e.add&&e.add(d)||(console.error("view has no add",e),e.add(d))}q.resolve(g)}});return q};m.resolveWidget=function(a,b,c,e){(e=e?e[a]:k.resolveType(a))&&(a=e);b=b||{undef:!1,reload:!1};var g=b.defaultModule;c=c||{};var q=w.isString(a)?h.replaceAll(".","/",a):null,p=require,r=null,v=new d;if(w.isObject(a))return c.result=a,v.resolve(a),v;if(b.reload)try{require.undef(q)}catch(G){}try{var u=
p(q);if(u&&w.isObject(u))return c.result=w.isEmpty(u)?g:u,v.resolve(u),v}catch(G){}r=require.on("error",function(e){r.remove();b.undef&&p.undef(q)||g&&define(q,g);c.result=g;v.resolve(g||a);return v});p([q],function(b){"not-a-module"===b?(r.remove(),c.result=g,v.resolve(g||a)):(r.remove(),c.result=b,v.resolve(b))});return v};m.createSimpleButton=function(a,b,c,e,g){return n.create("button",h.mixin({type:"button",innerHTML:b?'\x3ci style\x3d"" class\x3d"'+b+'"\x3e\x3c/i\x3e'+a:""+a,"class":"btn "+
(c||"")},e||{}),g)};m.createDijit=function(a,b,c,e){if(null==a.type)return null;b={delegate:b,intermediateChanges:null!=e.intermediateChanges?e.intermediateChanges:!0,vertical:null!=e.vertical?e.vertical:!1,userData:e};h.mixin(b,e.widget);c=a.type;a.nativeType&&(a.props.intermediateChanges=!0,c=a.nativeType);var g=a.result;if(!g)throw Error("cannot find your widget type :"+c);var d=null;h.mixin(a.props,e.widget);h.mixin(b,{title:a.title,vertical:a.vertical});try{d=new g(h.mixin(b,a.props),a.node)}catch(B){return console.error("constructing dijit widget failed : "+
B.message+" for "+c,a.props),null}return d};m.createWidgetData=function(a,b){b={type:"",nativeType:null,props:{options:a.options||[]},title:"NoTitle",node:null,autocomplete:!0,vertical:null!=a.vertical?a.vertical:!1};b.type=h.getWidgetType(a.type)||a.type;if(b.type){var c=k.resolveWidgetMapping(a.type);c&&(b.type=c)}var e=h.toString(a.name),c=h.toString(a.title);h.isValidString(c)&&0<c.length&&0<c[0].length&&(e=c);a.type==k.ECIType.ENUMERATION&&(a.options||(c=k.resolveEnumeration(a.enumType))&&0<
c.length&&(b.props.options=c),b.props.value=a.value,b.props.prevValue=a.value,b.type="xide.form.Select",b.nativeType="xide.form.Select",b.autocomplete=!0);a.widget&&a.widget["class"]&&(b.nativeType=a.widget["class"]);a.type==k.ECIType.STRING&&(b.props.value=a.value,b.props.prevValue=a.value,b.type="xide.widgets.EditBox",b.props.title=e);a.type==k.ECIType.JSON_DATA&&(b.props.valueStr=a.value,b.type="xide.widgets.JSONEditorWidget",b.props.newEntryTemplate={isRoot:!0,id:"root",schema:"{}"},b.props.initialTemplate=
[],b.props.aceEditorOptions={region:"center",value:"",style:"margin: 0; padding: 0; overflow: auto;position:relative;height:100%;width:100%;",theme:"twilight",mode:"json",readOnly:!1,tabSize:8,softTabs:!0,wordWrap:!1,printMargin:120,showPrintMargin:!0,highlightActiveLine:!0,fontSize:"12px",showGutter:!0});a.type==k.ECIType.BOOL&&(b.props.checked=h.toBoolean(a.value),b.props.value=a.value,b.props.prevValue=a.value,b.type=p,b.props.type="CheckBox");a.type==k.ECIType.IMAGE&&(b.props.value=a.value,b.type=
"xide.widgets.ImageWidget","BACKGROUND"==e&&(e="Background"));a.type==k.ECIType.FILE&&(b.props.value=a.value,b.type="xide.widgets.FileWidget");a.type==k.ECIType.FLAGS&&(b.props.value=a.value,b.props.data=a.data,b.type="xide.widgets.FlagsWidget",b.props.title=e);a.type==k.ECIType.SCRIPT&&(b.props.value=a.value,b.type="xide.widgets.ScriptWidget");a.type==k.ECIType.RICHTEXT&&(b.props.value=a.value,b.type="xide.widgets.RichTextWidget");a.type==k.ECIType.ICON&&(b.props.value=a.value,b.type="xide.widgets.IconPicker");
a.type==k.ECIType.REFERENCE&&(b.props.disabled=!a.enabled,b.props.innerHTML="Select");a.type==k.ECIType.STRUCTURE&&(b.type="xide.widgets.StructuralWidget");a.type==k.ECIType.INTEGER&&(b.props.value=a.value,b.props.prevValue=a.value,b.type="xide.widgets.EditBox",b.props.title=e);if(null===b.type||""==b.type)if(c=k.resolveWidgetMapping(a.type))b.type=c;b.title=e;return b};m.checkForCustomTypes=function(a){for(var b=[],c=[],e=0;e<a.length;e++){var g=a[e],d=h.toInt(g.type);d>k.ECIType.END&&(d=k.resolveType(d))&&
(h.mixin(b,d),c.push(g))}0<b.length&&(a=a.concat(b));if(c)for(e in c)a.remove(c[e]);return a};m.createWidgetsFromArray=function(a,c,e,q,p,u){function r(a){for(var b=0;b<a.length;b++){var g=a[b],d=g.CI,q=m.createDijit(g,c,e,d);q?(q.userData=d,q.owner=c,q.storeItem=e,u?q.order=b:y.order=y.order||b,y._widget=q,m.publish(k.EVENTS.ON_CREATED_WIDGET,{ci:y,widget:q,storeItem:e,owner:c}),q.nativeWidget&&(q.nativeWidget.userData=y,q.nativeWidget.storeItem=e),v.push(q)):console.error("have no widget",g)}u&&
v.sort(function(a,b){a=h.toInt(a.userData.order);b=h.toInt(b.userData.order);return a-b});x.resolve(v)}if(null==a)return null;var v=[],x=new d;a=m.checkForCustomTypes(a);for(var n=[],A={defaultModule:g},z=0;z<a.length;z++){var y=a[z];if(y&&(0!=q||0!=h.toBoolean(y.visible))){var J=m.createWidgetData(y,y.value);J&&J.type&&(J.module=m.resolveWidget(J.type,A,J,p),J.CI=y,n.push(J))}}a=w.pluck(n,"module");b(a).then(function(a){r(n)});return x};m.createButton=function(a,b,c,e,g,d,q){a=m.createSimpleButton(g,
b,c,{},a);if(d)u(a).on("click",function(a){d.apply(q,[a])});return a};m.createValidationTextBox=function(a,b,c,g,d,q,p,u,k){b=h.getDoc().createElement("DIV");c=new e({title:c,value:g,delegate:q,userData:{value:g}},b);a.appendChild(c.domNode);c.startup();return c};m.createCheckBox=function(b,c,e,g,d,q){e=""+('\x3cdiv class\x3d"checkbox checkbox-success " title\x3d"'+(q||c)+'"\x3e')+('\x3cinput id\x3d"'+d+'" type\x3d"checkbox" '+(1==g?"checked":"")+"\x3e")+('\x3clabel for\x3d"'+d+'"\x3e');e+=a.localize(c)+
"\x3c/label\x3e";e+="\x3c/div\x3e";c=u(e);e=c.find("INPUT");u(b).append(c);return e};m.createRadioButton=function(a,b,c,e,g,d,q,p,h){};return m})},"davinci/ve/commands/StyleCommand":function(){define(["dojo/_base/declare","davinci/ve/widget","davinci/ve/utils/StyleArray"],function(n,m,k){return n("davinci.ve.commands.StyleCommand",null,{name:"style",constructor:function(h,d,b){this._newValues=d;this._id=h?h.id:void 0;this._applyToStateIndex=b&&"Normal"!=b&&"undefined"!=b?b:"undefined"},add:function(h){h&&
h._id==this._id&&h._newValues&&dojo.mixin(this._newValues,h._newValues)},execute:function(h,d){if(this._id&&this._newValues&&(h=require("davinci/ve/widget").byId(this._id))&&h.domNode){var b=require("davinci/ve/States"),c=h.getStyleValuesAllStates();this._oldStyleValuesAllStates=dojo.clone(c);c[this._applyToStateIndex]=c[this._applyToStateIndex]?k.mergeStyleArrays(c[this._applyToStateIndex],this._newValues):this._newValues;for(var g=c[this._applyToStateIndex],p=g.length-1;0<=p;p--){var a=g[p],e=!1,
q;for(q in a)"$MAQ_DELETE_PROPERTY$"==a[q]?delete a[q]:e=!0;e||g.splice(p,1)}h.setStyleValuesAllStates(c);q=b.getStatesListCurrent(h.domNode);g=k.mergeStyleArrays([],c.undefined);for(p=0;p<q.length;p++)c[q[p]]&&(g=k.mergeStyleArrays(g,c[q[p]]));h.setStyleValuesCanvas(g);h.setStyleValuesModel(c.undefined);h.refresh();b.resetState(h.domNode);!0!==d&&dojo.publish("/davinci/ui/widgetPropertiesChanged",[[h]])}},undo:function(){if(this._id&&this._oldStyleValuesAllStates){var h=require("davinci/ve/widget").byId(this._id);
if(h){require("davinci/ve/States");var d=this._oldStyleValuesAllStates,b=this._applyToStateIndex;h.setStyleValuesAllStates(d);d=k.mergeStyleArrays(d.undefined,d[b]);h.setStyleValuesCanvas(d);h.setStyleValuesModel(this._oldStyleValuesAllStates.undefined);h.refresh();require("davinci/ve/States").resetState(h.domNode);dojo.publish("/davinci/ui/widgetPropertiesChanged",[[h]])}}}})})},"xnode/types":function(){define([],function(){return null})},"wcDocker/frame":function(){define(["dcl/dcl","wcDocker/types",
"wcDocker/base"],function(n,m,k){return n(k,{declaredClass:"wcFrame",LEFT_TAB_BUFFER:15,constructor:function(h,d,b){this.$container=$(h);this._parent=d;this._isFloating=b;this.$modalBlocker=this.$shadower=this.$buttonBar=this.$corner4=this.$corner3=this.$corner2=this.$corner1=this.$right=this.$left=this.$bottom=this.$top=this.$collapse=this.$close=this.$tabRight=this.$tabLeft=this.$center=this.$tabScroll=this.$tabBar=this.$titleBar=this.$title=this.$frame=null;this._titleVisible=!0;this._canScrollTabs=
!1;this._tabOrientation=m.TAB.TOP;this._tabScrollPos=0;this._curTab=-1;this._panelList=[];this._buttonList=[];this._resizeData={time:-1,timeout:!1,delta:150};this._pos={x:.5,y:.5};this._size={x:400,y:400};this._lastSize={x:400,y:400};this._anchorMouse={x:0,y:0};this.__init()},pos:function(h,d,b){var c=this.$container.width(),g=this.$container.height();if("undefined"===typeof h)return b?{x:this._pos.x*c,y:this._pos.y*g}:{x:this._pos.x,y:this._pos.y};b?(this._pos.x=h/c,this._pos.y=d/g):(this._pos.x=
h,this._pos.y=d)},initSize:function(){for(var h={x:-1,y:-1},d=0;d<this._panelList.length;++d)h.x<this._panelList[d].initSize().x&&(h.x=this._panelList[d].initSize().x),h.y<this._panelList[d].initSize().y&&(h.y=this._panelList[d].initSize().y);return 0>h.x||0>h.y?!1:h},minSize:function(){for(var h={x:0,y:0},d=0;d<this._panelList.length;++d)h.x=Math.max(h.x,this._panelList[d].minSize().x),h.y=Math.max(h.y,this._panelList[d].minSize().y);return h},maxSize:function(){for(var h={x:Infinity,y:Infinity},
d=0;d<this._panelList.length;++d)h.x=Math.min(h.x,this._panelList[d].maxSize().x),h.y=Math.min(h.y,this._panelList[d].maxSize().y);return h},tabOrientation:function(h){void 0!==h&&this._tabOrientation!==h&&this.docker()._canOrientTabs&&(this._tabOrientation=h,this.__updateTabs(),this.__updateTabs());return this._tabOrientation},addPanel:function(h,d){var b=this._panelList.indexOf(h);-1!==b&&this._panelList.splice(b,1);"undefined"===typeof d?this._panelList.push(h):this._panelList.splice(d,0,h);-1===
this._curTab&&this._panelList.length&&(this.isCollapser()||(this._curTab=0),this._size=this.initSize());this.__updateTabs()},removePanel:function(h){for(var d=0;d<this._panelList.length;++d)if(this._panelList[d]===h){this.isCollapser()?this._curTab=-1:this._curTab>=d&&this._curTab--;this._panelList[d]._parent===this&&(this._panelList[d].__container(null),this._panelList[d]._parent=null);this._panelList.splice(d,1);h._isVisible=!1;break}-1===this._curTab&&!this.collapse()&&this._panelList.length&&
(this._curTab=0);this.__updateTabs();return 0<this._panelList.length},panel:function(h,d){"undefined"!==typeof h&&(this.isCollapser()&&h===this._curTab&&(this.collapse(),h=-1),h<this._panelList.length&&(this.$tabBar.find('\x3e .wcTabScroller \x3e .wcPanelTab[id\x3d"'+this._curTab+'"]').removeClass("wcPanelTabActive"),this.$center.children('.wcPanelTabContent[id\x3d"'+this._curTab+'"]').addClass("wcPanelTabContentHidden"),this._curTab!==h&&this.collapse(),this._curTab=h,-1<h&&(this.$tabBar.find('\x3e .wcTabScroller \x3e .wcPanelTab[id\x3d"'+
h+'"]').addClass("wcPanelTabActive"),this.$center.children('.wcPanelTabContent[id\x3d"'+h+'"]').removeClass("wcPanelTabContentHidden"),this.expand()),this.__updateTabs(d)));return-1<this._curTab&&this._curTab<this._panelList.length?this._panelList[this._curTab]:this.isCollapser()&&this._panelList.length?this._panelList[0]:!1},isCollapser:function(){return this._parent&&"wcDrawer"===this._parent.declaredClass},collapse:function(h){return this.isCollapser()?(this._parent.collapse(h),!0):!1},expand:function(){return this.isCollapser()?
(this._parent.expand(),!0):!1},isExpanded:function(){if(this.isCollapser())return this._parent.isExpanded()},__init:function(){this.$frame=$('\x3cdiv class\x3d"wcFrame wcWide wcTall"\x3e');this.$title=$('\x3cdiv class\x3d"wcFrameTitle"\x3e');this.$titleBar=$('\x3cdiv class\x3d"wcFrameTitleBar wcFrameTopper"\x3e');this.$tabBar=$('\x3cdiv class\x3d"wcFrameTitleBar"\x3e');this.$tabScroll=$('\x3cdiv class\x3d"wcTabScroller"\x3e');this.$center=$('\x3cdiv class\x3d"wcFrameCenter wcPanelBackground"\x3e');
this.$tabLeft=$('\x3cdiv class\x3d"wcFrameButton" title\x3d"Scroll tabs to the left."\x3e\x3cspan class\x3d"fa fa-arrow-left"\x3e\x3c/span\x3e\x26lt;\x3c/div\x3e');this.$tabRight=$('\x3cdiv class\x3d"wcFrameButton" title\x3d"Scroll tabs to the right."\x3e\x3cspan class\x3d"fa fa-arrow-right"\x3e\x3c/span\x3e\x26gt;\x3c/div\x3e');this.$close=$('\x3cdiv class\x3d"wcFrameButton" title\x3d"Close the currently active panel tab"\x3e\x3cdiv class\x3d"fa fa-close"\x3e\x3c/div\x3eX\x3c/div\x3e');this.$collapse=
$('\x3cdiv class\x3d"wcFrameButton" title\x3d"Collapse the active panel"\x3e\x3cdiv class\x3d"fa fa-download"\x3e\x3c/div\x3eC\x3c/div\x3e');this.$buttonBar=$('\x3cdiv class\x3d"wcFrameButtonBar"\x3e');this.$tabButtonBar=$('\x3cdiv class\x3d"wcFrameButtonBar"\x3e');this.$tabBar.append(this.$tabScroll);this.$tabBar.append(this.$tabButtonBar);this.$frame.append(this.$buttonBar);this.$buttonBar.append(this.$close);this.$buttonBar.append(this.$collapse);this.$frame.append(this.$center);this._isFloating&&
(this.$top=$('\x3cdiv class\x3d"wcFrameEdgeH wcFrameEdge"\x3e\x3c/div\x3e').css("top","-6px").css("left","0px").css("right","0px"),this.$bottom=$('\x3cdiv class\x3d"wcFrameEdgeH wcFrameEdge"\x3e\x3c/div\x3e').css("bottom","-6px").css("left","0px").css("right","0px"),this.$left=$('\x3cdiv class\x3d"wcFrameEdgeV wcFrameEdge"\x3e\x3c/div\x3e').css("left","-6px").css("top","0px").css("bottom","0px"),this.$right=$('\x3cdiv class\x3d"wcFrameEdgeV wcFrameEdge"\x3e\x3c/div\x3e').css("right","-6px").css("top",
"0px").css("bottom","0px"),this.$corner1=$('\x3cdiv class\x3d"wcFrameCornerNW wcFrameEdge"\x3e\x3c/div\x3e').css("top","-6px").css("left","-6px"),this.$corner2=$('\x3cdiv class\x3d"wcFrameCornerNE wcFrameEdge"\x3e\x3c/div\x3e').css("top","-6px").css("right","-6px"),this.$corner3=$('\x3cdiv class\x3d"wcFrameCornerNW wcFrameEdge"\x3e\x3c/div\x3e').css("bottom","-6px").css("right","-6px"),this.$corner4=$('\x3cdiv class\x3d"wcFrameCornerNE wcFrameEdge"\x3e\x3c/div\x3e').css("bottom","-6px").css("left",
"-6px"),this.$frame.append(this.$top),this.$frame.append(this.$bottom),this.$frame.append(this.$left),this.$frame.append(this.$right),this.$frame.append(this.$corner1),this.$frame.append(this.$corner2),this.$frame.append(this.$corner3),this.$frame.append(this.$corner4));this.__container(this.$container);this._isFloating&&this.$frame.addClass("wcFloating");this.$center.scroll(this.__scrolled.bind(this))},__update:function(){var h=this.$container.width(),d=this.$container.height();if(this._isFloating){var b=
this._pos.x*h-this._size.x/2,c=this._pos.y*d-this._size.y/2;0>c&&(c=0);0>b+this._size.x/2&&(b=-this._size.x/2);b+this._size.x/2>h&&(b=h-this._size.x/2);c+parseInt(this.$center.css("top"))>d&&(c=d-parseInt(this.$center.css("top")));this.$frame.css("left",b+"px");this.$frame.css("top",c+"px");this.$frame.css("width",this._size.x+"px");this.$frame.css("height",this._size.y+"px")}if(h!==this._lastSize.x||d!==this._lastSize.y)this._lastSize.x=h,this._lastSize.y=d,this._resizeData.time=new Date,this._resizeData.timeout||
(this._resizeData.timeout=!0,setTimeout(this.__resizeEnd.bind(this),this._resizeData.delta));this.__onTabChange()},__resizeEnd:function(){this.__updateTabs(null,!0);new Date-this._resizeData.time<this._resizeData.delta?setTimeout(this.__resizeEnd.bind(this),this._resizeData.delta):this._resizeData.timeout=!1},__trigger:function(h,d){for(var b=0;b<this._panelList.length;++b)this._panelList[b].__trigger(h,d)},__save:function(){var h={type:"wcFrame"};h.floating=this._isFloating;h.isFocus=this.$frame.hasClass("wcFloatingFocus");
h.tabOrientation=this._tabOrientation;h.pos={x:this._pos.x,y:this._pos.y};h.size={x:this._size.x,y:this._size.y};h.tab=this._curTab;h.panels=[];for(var d=0;d<this._panelList.length;++d)h.panels.push(this._panelList[d].__save());return h},__restore:function(h,d){this._isFloating=h.floating;this._tabOrientation=h.tabOrientation||m.TAB.TOP;this._pos.x=h.pos.x;this._pos.y=h.pos.y;this._size.x=h.size.x;this._size.y=h.size.y;this._curTab=h.tab;for(var b=0;b<h.panels.length;++b){var c=d.__create(h.panels[b],
this,this.$center);c.__restore(h.panels[b],d);this._panelList.push(c)}this.__update();h.isFocus&&this.$frame.addClass("wcFloatingFocus")},__updateTabs:function(h,d){this.$tabScroll.empty();d=function(a){switch(this._tabOrientation){case m.TAB.BOTTOM:return a.offset().left;case m.TAB.TOP:return a.offset().left;case m.TAB.LEFT:return a.offset().top;case m.TAB.RIGHT:return a.offset().top}}.bind(this);var b=[],c=[],g=0,p=d(this.$tabScroll),a=1<this._panelList.length||this._isFloating||this.isCollapser();
this.isCollapser()?this.$tabBar.addClass("wcNotMoveable"):(this.$titleBar.removeClass("wcNotMoveable"),this.$tabBar.removeClass("wcNotMoveable"));this.$center.children(".wcPanelTabContent").each(function(){$(this).addClass("wcPanelTabContentHidden wcPanelTabUnused")});this._titleVisible=!0;this.$title.html("");for(var e=0;e<this._panelList.length;++e){var q=this._panelList[e],u=null;a&&(u=q.$title,q.$title.attr("id",e),this.$tabScroll.append(q.$title));q.moveable()||(this.$titleBar.addClass("wcNotMoveable"),
this.$tabBar.addClass("wcNotMoveable"));q._titleVisible||(this._titleVisible=!1);var k=null,k=this.$center.children('.wcPanelTabContent[id\x3d"'+e+'"]');k.length||(k=$('\x3cdiv class\x3d"wcPanelTabContent wcPanelTabContentHidden" id\x3d"'+e+'"\x3e'),this.$center.append(k));q.__container(k);q._parent=this;var r=this._curTab===e;q.isVisible()!==r&&b.push({panel:q,isVisible:r});k&&k.removeClass("wcPanelTabUnused");r&&(u&&u.addClass("wcPanelTabActive active"),k&&k.removeClass("wcPanelTabContentHidden"),
this.$title.html(q.title()),q.$icon&&(q=q.$icon.clone(),this.$title.prepend(q)));u&&(g=d(u)-p,c.push(g),g+=u.outerWidth())}u=0;if(this._titleVisible){this.$frame.parent()||this.$center.css("top","");switch(this._tabOrientation){case m.TAB.TOP:this.$frame.prepend(this.$tabBar);this.$titleBar.remove();this.$tabBar.addClass("wcTabTop").removeClass("wcTabLeft wcTabRight wcTabBottom");a?this.$title.remove():this.$tabBar.prepend(this.$title);this.$center.css("left",0).css("right",0).css("bottom",0);u=this.$center.width();
break;case m.TAB.BOTTOM:this.$frame.prepend(this.$titleBar);this.$titleBar.append(this.$title);a?(e=this.$titleBar.height(),this.$frame.append(this.$tabBar),this.$tabBar.addClass("wcTabBottom").removeClass("wcTabTop wcTabLeft wcTabRight"),this.$center.css("left",0).css("right",0).css("bottom",e)):this.$tabBar.remove();u=this.$center.width();break;case m.TAB.LEFT:this.$frame.prepend(this.$titleBar);this.$titleBar.append(this.$title);a?(e=this.$titleBar.height(),this.$frame.append(this.$tabBar),this.$tabBar.addClass("wcTabLeft").removeClass("wcTabTop wcTabRight wcTabBottom"),
this.$center.css("left",e).css("right",0).css("bottom",0)):this.$tabBar.remove();u=this.$center.height();break;case m.TAB.RIGHT:this.$frame.prepend(this.$titleBar),this.$titleBar.append(this.$title),a?(e=this.$titleBar.height(),this.$frame.append(this.$tabBar),this.$tabBar.addClass("wcTabRight").removeClass("wcTabTop wcTabLeft wcTabBottom"),this.$center.css("left",0).css("right",e).css("bottom",0)):this.$tabBar.remove(),u=this.$center.height()}a||this.$center.css("left",0).css("right",0).css("bottom",
0)}else this.$titleBar.remove(),this.$tabBar.remove(),this.$center.css("top",0).css("left",0).css("right",0).css("bottom",0);this.$center.children(".wcPanelTabUnused").each(function(){$(this).remove()});if(this._titleVisible){a=this.__onTabChange();if(h)for(e=0;e<c.length;++e)if(e===this._curTab){h=c[e];q=g;e+1<c.length&&(q=c[e+1]);e=-parseInt(this.$tabScroll.css("left"));c=u-a;h<e?(this._tabScrollPos=h-this.LEFT_TAB_BUFFER,0>this._tabScrollPos&&(this._tabScrollPos=0)):q-e>c&&(this._tabScrollPos=
q-c+this.LEFT_TAB_BUFFER);break}this._canScrollTabs=!1;if(g>u-a){if(this._canScrollTabs=this._titleVisible)this.$tabButtonBar.append(this.$tabRight),this.$tabButtonBar.append(this.$tabLeft),a+=this.$tabRight.outerWidth(),a+=this.$tabLeft.outerWidth();c=g-(u-a)/2;if(this._tabScrollPos>c)for(h=this.$tabScroll.children(),e=0;e<h.length;++e)if(u=$(h[e]),g=d(u)-p,g+u.outerWidth()>c){this._tabScrollPos=g-this.LEFT_TAB_BUFFER;0>this._tabScrollPos&&(this._tabScrollPos=0);break}}else this._tabScrollPos=0,
this.$tabLeft.remove(),this.$tabRight.remove();for(e=0;e<b.length;++e)b[e].panel.__isVisible(b[e].isVisible)}},__onTabChange:function(){var h=0,d=0,b=this.panel();this.$tabLeft.remove();this.$tabRight.remove();this.$close.hide();for(this.$collapse.hide();this._buttonList.length;)this._buttonList.pop().remove();if(b){var c=b.scrollable();this.$center.toggleClass("wcScrollableX",c.x);this.$center.toggleClass("wcScrollableY",c.y);this.$frame.toggleClass("wcOverflowVisible",b.overflowVisible());this.$center.toggleClass("wcOverflowVisible",
b.overflowVisible());if(!this.isCollapser()||this.isExpanded()){b.closeable()&&(this.$close.show(),h+=this.$close.outerWidth());var g=this.docker();if(g.isCollapseEnabled()&&b.moveable()&&b.collapsible()&&!this._isFloating&&!b._isPlaceholder)if(this.isCollapser()){c=this.$collapse.children("div");c[0].className="fa fa-sign-out";switch(this._parent._position){case m.DOCK.LEFT:c.addClass("wcCollapseLeft");break;case m.DOCK.RIGHT:c.addClass("wcCollapseRight");break;case m.DOCK.BOTTOM:c.addClass("wcCollapseBottom")}c.addClass("wcCollapsed");
this.$collapse.show();this.$collapse.attr("title","Dock this collapsed panel back into the main layout.");h+=this.$collapse.outerWidth()}else{c=m.DOCK.BOTTOM;if(b._collapseDirection===m.DOCK.LEFT||b._collapseDirection===m.DOCK.RIGHT||b._collapseDirection===m.DOCK.BOTTOM)c=b._collapseDirection;else{var p=g.$container;!$.isEmptyObject(g._collapser)&&g._collapser.hasOwnProperty(m.DOCK.RIGHT)&&(p=g._collapser[m.DOCK.RIGHT]._parent.$pane[0]);var g=p.offset(),a=this.$container.offset();a.right=(a.left+
this.$container.width()-g.left)/p.width();a.bottom=(a.top+this.$container.height()-g.top)/p.height();a.top=(a.top-g.top)/p.height();a.left=(a.left-g.left)/p.width();"function"===typeof b._collapseDirection?c=b._collapseDirection(a):.5<a.top&&.95<a.bottom?c=m.DOCK.BOTTOM:.05>=a.left?c=m.DOCK.LEFT:.95<=a.right?c=m.DOCK.RIGHT:.95<a.bottom&&(c=m.DOCK.BOTTOM)}g=p="";switch(c){case m.DOCK.LEFT:p="left side.";g="wcCollapseLeft";break;case m.DOCK.RIGHT:p="right side.";g="wcCollapseRight";break;case m.DOCK.BOTTOM:p=
"bottom.",g="wcCollapseBottom"}p&&(c=this.$collapse.children("div"),c[0].className="fa fa-sign-in",c.addClass(g),c.addClass("wcCollapsible"),this.$collapse.show(),this.$collapse.attr("title","Collapse this panel into the "+p),h+=this.$collapse.outerWidth())}for(c=0;c<b._buttonList.length;++c)p=b._buttonList[c],g=$("\x3cdiv\x3e"),a=p.className,g.addClass("wcFrameButton"),p.isTogglable&&(g.addClass("wcFrameButtonToggler"),p.isToggled&&(g.addClass("wcFrameButtonToggled"),a=p.toggleClassName||a)),g.attr("title",
p.tip),g.data("name",p.name),g.text(p.text),a&&g.prepend($('\x3cdiv class\x3d"'+a+'"\x3e')),this._buttonList.push(g),this.$buttonBar.append(g),h+=g.outerWidth()}this._canScrollTabs&&(this.$tabButtonBar.append(this.$tabRight),this.$tabButtonBar.append(this.$tabLeft),d+=this.$tabRight.outerWidth()+this.$tabLeft.outerWidth());if(this._titleVisible)switch(this.$buttonBar.css("right",""),this._tabOrientation){case m.TAB.RIGHT:this.$buttonBar.css("right",this.$tabBar.height());case m.TAB.LEFT:this.$tabBar.css("width",
this.$center.height()+this.$tabBar.height());break;case m.TAB.TOP:case m.TAB.BOTTOM:this.$tabBar.css("width",this.$center.width())}b.__update();this.$center.scrollLeft(b._scroll.x);this.$center.scrollTop(b._scroll.y)}this.$buttonBar.css("min-width",h).css("width",h);this.$tabButtonBar.css("min-width",d).css("width",d);if(this._tabOrientation===m.TAB.TOP)return this.$tabButtonBar.css("right",h),h+d;this.$tabButtonBar.css("right",0);return d},__scrolled:function(){var h=this.panel();h._scroll.x=this.$center.scrollLeft();
h._scroll.y=this.$center.scrollTop();h.__trigger(m.EVENT.SCROLLED)},__focus:function(h){if(h){var d=$('\x3cdiv class\x3d"wcFrameFlasher"\x3e');this.$frame.append(d);d.animate({opacity:1},100).animate({opacity:0},100).animate({opacity:.6},50).animate({opacity:0},50).queue(function(b){d.remove();b()})}},__move:function(h){var d=this.$container.width(),b=this.$container.height();this._pos.x=(h.x+this._anchorMouse.x)/d;this._pos.y=(h.y+this._anchorMouse.y)/b},__anchorMove:function(h){var d=this.$container.width(),
b=this.$container.height();this._anchorMouse.x=this._pos.x*d-h.x;this._anchorMouse.y=this._pos.y*b-h.y},__tabMove:function(h,d){if(0<=h&&h<this._panelList.length&&0<=d&&d<this._panelList.length){var b=this._panelList.splice(h,1);this._panelList.splice(d,0,b[0]);this._curTab===h&&(this._curTab=d);this.__updateTabs();return this.$tabBar.find('\x3e .wcTabScroller \x3e .wcPanelTab[id\x3d"'+d+'"]')[0]}return!1},__checkAnchorDrop:function(h,d,b,c,g,p){var a=this.panel();return a&&a.moveable()?a.layout().__checkAnchorDrop(h,
d&&this._tabOrientation,b,!this._isFloating&&!this.isCollapser()&&c,this.$frame,a.moveable()&&a.title(),g,this.isCollapser()?this._tabOrientation:void 0,p):!1},__resize:function(h,d){var b=this.$container.width(),c=this.$container.height(),g=this.$container.offset();d.x-=g.left;d.y-=g.top;for(var g=this.minSize(),p=this.maxSize(),a=this._pos.x*b-this._size.x/2,e=this._pos.y*c-this._size.y/2,q=0;q<h.length;++q){switch(h[q]){case "top":this._size.y+=e-d.y-2;e=d.y+2;this._size.y<g.y&&(e+=this._size.y-
g.y,this._size.y=g.y);this._size.y>p.y&&(e+=this._size.y-p.y,this._size.y=p.y);break;case "bottom":this._size.y=d.y-4-e;this._size.y<g.y&&(this._size.y=g.y);this._size.y>p.y&&(this._size.y=p.y);break;case "left":this._size.x+=a-d.x-2;a=d.x+2;this._size.x<g.x&&(a+=this._size.x-g.x,this._size.x=g.x);this._size.x>p.x&&(a+=this._size.x-p.x,this._size.x=p.x);break;case "right":this._size.x=d.x-4-a,this._size.x<g.x&&(this._size.x=g.x),this._size.x>p.x&&(this._size.x=p.x)}this._pos.x=(a+this._size.x/2)/
b;this._pos.y=(e+this._size.y/2)/c}},__shadow:function(h){if(h)this.$shadower||(this.$shadower=$('\x3cdiv class\x3d"wcFrameShadower"\x3e'),this.$frame.append(this.$shadower),this.$shadower.animate({opacity:.5},300));else if(this.$shadower){var d=this;this.$shadower.animate({opacity:0},300).queue(function(b){d.$shadower.remove();d.$shadower=null;b()})}},__rect:function(){if(this.isCollapser())return this._parent.__rect();var h=this.$frame.offset(),d=this.$frame.width(),b=this.$frame.height();return{x:h.left,
y:h.top,w:d,h:b}},__container:function(h){if("undefined"===typeof h)return this.$container;(this.$container=h)?this.$container.append(this.$frame):this.$frame.remove();return this.$container},__destroy:function(){this._curTab=-1;for(var h=0;h<this._panelList.length;++h)this._panelList[h].__destroy();for(;this._panelList.length;)this._panelList.pop();this.$modalBlocker&&(this.$modalBlocker.remove(),this.$modalBlocker=null);this.__container(null);this._parent=null}})})},"dijit/Tree":function(){define(["dojo/_base/declare"],
function(n){var m=n(null,{});m._TreeNode=n(null,{});return m})},"xide/widgets/FlagsWidget":function(){define("dcl/dcl dojo/_base/declare xide/widgets/TemplatedWidgetBase xide/factory xide/utils xide/widgets/WidgetBase".split(" "),function(n,m,k,h,d,b){return n(b,{declaredClass:"xide.widgets.FlagsWidget",data:null,title:"NoTitle",value:0,minHeight:"25px;",checkboxRoot:null,lineBreak:!1,flagClass:"",checkboxes:null,single:!1,titleWidth:"15%",templateString:"\x3cdiv class\x3d'widgetContainer widgetBorder widgetTable widget' style\x3d''\x3e\x3ctable border\x3d'0' cellpadding\x3d'5px' width\x3d'100%'\x3e\x3ctbody align\x3d'left'\x3e\x3ctr attachTo\x3d'extensionRoot' valign\x3d'middle' style\x3d'height:90%'\x3e\x3ctd attachTo\x3d'titleColumn' width\x3d'${!titleWidth}' class\x3d'widgetTitle'\x3e\x3cspan attachTo\x3d'titleNode'\x3e${!title}\x3c/span\x3e\x3c/td\x3e\x3ctd valign\x3d'middle' class\x3d'widgetValue' attachTo\x3d'valueNode' width\x3d'300px'\x3e\x3ctable border\x3d'0' cellpadding\x3d'0px' width\x3d'auto'  class\x3d''\x3e\x3ctbody align\x3d'left'\x3e\x3ctr valign\x3d'top' style\x3d''\x3e\x3ctd valign\x3d'top' attachTo\x3d'checkboxRoot' class\x3d''\x3e\x3c/td\x3e\x3c/tr\x3e\x3c/tbody\x3e\x3c/table\x3e\x3c/td\x3e\x3ctd class\x3d'extension' attachTo\x3d'previewNode'\x3e\x3c/td\x3e\x3ctd class\x3d'extension' attachTo\x3d'button0'\x3e\x3c/td\x3e\x3ctd class\x3d'extension' attachTo\x3d'button1'\x3e\x3c/td\x3e\x3c/tr\x3e\x3c/tbody\x3e\x3c/table\x3e\x3cdiv attachTo\x3d'expander' style\x3d'width:100%;'\x3e\x3c/div\x3e\x3cdiv attachTo\x3d'last'\x3e\x3c/div\x3e\x3c/div\x3e",
widgetChanged:function(b,g){b.checkSettings()},_onFlagChange:function(b){var c=this.getValue();if(this.single)for(var p=0;p<this.checkboxes.length;p++)this.checkboxes[p][0].id!==b.id&&(this.checkboxes[p].removeAttr("checked"),c=d.disableFlag(c,this.checkboxes[p]._value));p=b.checked;c=this.hex?!0===p?c|b._value:c&~b._value:!1===p?d.disableFlag(c,b._value):c+(1<<b._value);this.setValue(c);this._emit("change",c)},isChecked:function(b,g){return!0===this.hex?b&g?!0:!1:d.hasFlag3(b,g)},initWithData:function(b,
g){function c(b){b.on("change",function(c){a._onFlagChange(b[0])})}if(!this._renderedCB){this._renderedCB=!0;var a=this;this.checkboxes=[];g=g||this.getValue();for(var e=0;e<b.length;e++){var d=this.isChecked(g,b[e].value),d=h.createCheckBox(this.checkboxRoot,b[e].label,b[e].value,d,this.id+"_cb_"+b[e].value,b[e].title);d[0]._value=b[e].value;this.checkboxes.push(d);if(this.lineBreak){var u=dojo.doc.createElement("br");this.checkboxRoot.appendChild(u)}c(d)}}},enableAll:function(){},setupListeners:function(){},
startup:function(){this.data&&this.initWithData(this.data,this.value)}})})},"xblox/views/BlocksFileEditor":function(){define("dcl/dcl dojo/_base/declare xide/factory xide/utils xblox/model/variables/Variable dojo/Deferred xide/types xide/views/_LayoutMixin xblox/views/BlockGrid xaction/ActionProvider xide/layout/Container xdocker/Docker2 xide/views/_CIPanelDialog xide/lodash".split(" "),function(n,m,k,h,d,b,c,g,p,a,e,q,u,w){g=n(g.dcl,{rootPanel:null,_lastTab:null,getDocker:function(){this._docker||
(this._docker=q.createDefault(this.containerNode),this.add(this._docker));return this._docker},getRootContainer:function(a){if(this.rootPanel)return this.rootPanel;this.reparent=!0;var b=this.getDocker(),e=c.DOCKER;return this.rootPanel=b.addTab(null,h.mixin({icon:!1,closeable:!0,moveable:!0,tabOrientation:e.TAB.TOP,location:e.DOCK.STACKED},a))},createLayout:function(){this.rootPanel||(this.rootPanel=this.getRootContainer({title:"test"}));return this.rootPanel},startup:function(){},getPropertyStruct:function(){return this.propertyStruct},
setPropertyStruct:function(a){this.propertyStruct=a},getGroupContainer:function(){return this.rootPanel},createGroupView:function(a,b,e,g,d,q,p){a=c.DOCKER;b={icon:d,closeable:!0,moveable:!0,title:b,target:this._lastTab||this.rootPanel,tabOrientation:a.TAB.TOP,location:a.DOCK.STACKED};this._lastTab=p=this.getDocker().addTab(null,h.mixin(b,p));this.tabs.push(p);return p}});m=m("BlockGrid",p,{move:function(a){var b=this.getSelection();if(b&&b.length){var c=this;w.each(b,function(b){b.move(b,a)});c.refreshRoot();
c.refreshCurrent();this.select(b,null,!0,{focus:!0,delay:10}).then(function(){c.refreshActions()})}},reParentBlock:function(a){var c=this.getSelection()[0];if(!c)return!1;-1==a?c.unparent(this.blockGroup):c.reparent();this.deselectAll();this.refreshRoot();this.refreshCurrent();a=new b;a.resolve({focus:!0,append:!1,delay:100,select:c,expand:!0});return a},defaultActionResult:function(a){var c=new b;c.resolve({focus:!0,append:!1,delay:0,select:a,expand:!0});return c}});return n([e,g,a.dcl],{declaredClass:"xblox.views.BlocksFileEditor",
registerView:!1,_item:null,cssClass:"bloxEditor",blockManager:null,blockManagerClass:"xblox.manager.BlockManager",model:null,store:null,tree:null,currentItem:null,didLoad:!1,selectable:!1,beanType:"BLOCK",newGroupPrefix:"",_debug:!1,blockScope:null,groupContainer:null,canAddGroups:!0,gridClass:m,activeGrid:null,activeTab:null,registerGrids:!0,visibileTab:null,setVisibleTab:function(a){this.visibileTab=a},getVisibleTab:function(){return this.visibileTab},constructor:function(a,b){h.mixin(this,a)},
onGridAction:function(a){var b=c.ACTION;switch((a.action?a.action:a).command){case b.SAVE:return this.save()}},clearGroupViews:function(a){w.each(this.tabs,function(a){a.destroy()});delete this.tabs;this.destroyWidgets()},getContainerLabel:function(a){var b=""+a;h.isNativeEvent(a)&&(b=b.replace("on",""));if(-1!==a.indexOf(c.EVENTS.ON_DRIVER_VARIABLE_CHANGED)){var e=this.ctx.getDeviceManager(),b=this.ctx.getDriverManager(),g=a.split("__")[1],e=(g=e.getDeviceByUrl(g))?e.getMetaValue(g,c.DEVICE_PROPERTY.CF_DEVICE_TITLE):
"Invalid Device";a=b.getBlock(a);b="("+e+"/"+(a?a.name:"Unknown Variable")+")"}return b},addNewBlockGroup:function(a){if(a){var b=this.blockScope,c=this.getContainerLabel(a),c=this.createGroupView(null,c,b,!0,"fa-bell");a=this.newGroupPrefix+a;b=this.createGroupedBlockView(c,a,b,{newRootItemGroup:a});this.activeGrid=c.grid=b;c.select()}},createGroupedBlockView:function(a,b,e,g,d){var q=this;d=d||this.gridClass;var p=e.blockStore;this._lastTab&&!this.__right&&(this.__right=this.getRightPanel(null,
null,"DefaultFixed",{target:this._lastTab}));b={__right:this.__right,ctx:this.ctx,blockScope:e,blockGroup:b,attachDirect:!0,resizeToParent:!0,collection:p.filter({group:b}),_parent:a,getPropertyStruct:this.getPropertyStruct,setPropertyStruct:this.setPropertyStruct};g&&h.mixin(b,g);var r=h.addWidget(d,b,null,a,!1);r.__editorActions||(r.__editorActions=!0,this.addGridActions(r,r));a.grid=r;r._on("selectionChanged",function(a){q._emit("selectionChanged",a)});r._on("onAfterAction",function(a){q.onGridAction(a)});
a.on(c.DOCKER.EVENT.VISIBILITY_CHANGED,function(b){b?(q.setVisibleTab(a),r.onShow(),q.getRightPanel().getSplitter().isCollapsed()||r.showProperties(r.getSelection()[0]),r.__last&&(r._restoreSelection(),r.focus(r.row(r.__last.focused)))):r.__last=r._preserveSelection()});this.registerGrids&&this.ctx.getWindowManager().registerView(r,!1);a._widgets||(a._widgets=[]);a.add(r);return r},getDeviceVariablesAsEventOptions:function(a){for(var b=[],e=function(a,b,c,e,g){e="";if(0<c)for(var d=0;d<c;d++)e+="\x26nbsp;",
e+="\x26nbsp;",e+="\x26nbsp;";return{label:e+("\x3cspan style\x3d''\x3e"+a+"\x3c/span\x3e"),label2:g,value:b}},g=this.ctx.getDeviceManager(),d=g.getDevices(!1,!0),q=0;q<d.length;q++){var p=d[q],h=p.driver;if(h){var r=g.getMetaValue(p,c.DEVICE_PROPERTY.CF_DEVICE_TITLE),p=g.getMetaValue(p,c.DEVICE_PROPERTY.CF_DEVICE_ID);b.push(e(r,h.id+"/"+h.id,a,!1));for(var u=h.blockScope.getVariables(),k=0;k<u.length;k++){var w=u[k];b.push(e(w.name,c.EVENTS.ON_DRIVER_VARIABLE_CHANGED+"__"+p+"__"+h.id+"__"+w.id,a+
1,!1,r+"/"+w.name))}}}return b},openNewGroupDialog:function(){var a=[],b=function(a,b,c,e){var g="";if(0<c)for(var d=0;d<c;d++)g+="\x26nbsp;",g+="\x26nbsp;",g+="\x26nbsp;";return{label:g+(!0!==e?"\x3cspan style\x3d''\x3e"+a+"\x3c/span\x3e":a),value:b,label2:a}};a.push(b("HTML","",0));var a=a.concat([b("onclick","click",1),b("ondblclick","dblclick",1),b("onmousedown","mousedown",1),b("onmouseup","mouseup",1),b("onmouseover","mouseover",1),b("onmousemove","mousemove",1),b("onmouseout","mouseout",1),
b("onkeypress","keypress",1),b("onkeydown","keydown",1),b("onkeyup","keyup",1),b("onfocus","focus",1),b("onblur","blur",1),b("onchange","change",1),b("input","input",1),b("load","load",1)]),e=this,a=new u({title:"Create a new block group",style:"width:500px;min-height:200px;",size:c.DIALOG_SIZE.SIZE_NORMAL,resizeable:!0,onOk:function(a){if(a&&a[0]&&"variable"===a[0].dst){a=a[0].newValue;var b=h.parse_url(a),b=h.urlArgs(b.host);e.addNewBlockGroup(c.EVENTS.ON_DRIVER_VARIABLE_CHANGED+"__"+a)}else a&&
a[0]&&e.addNewBlockGroup(a[0].newValue)},cis:[h.createCI("Event",c.ECIType.ENUMERATION,"",{group:"Event",delegate:null,options:a,value:"HTML",title:"Select an event \x26nbsp;\x26nbsp;\x26nbsp;\x26nbsp;\x26nbsp;\x26nbsp;\x26nbsp;\x26nbsp;\x26nbsp;\x26nbsp;\x26nbsp;\x26nbsp;\x26nbsp;\x26nbsp;\x26nbsp;\x26nbsp;\x26nbsp;\x26nbsp;\x26nbsp;\x26nbsp;\x26nbsp;\x26nbsp;\x26nbsp;",widget:{search:!0,"class":"xide.form.FilterSelect"}}),h.createCI("value","xcf.widgets.CommandPicker","",{group:"Event",title:" ",
dst:"variable",pickerType:"variable",value:" Select Driver Variable ",block:{scope:{ctx:e.ctx}},widget:{labelField:"name",valueField:"id",value:"Select Driver Variable",query:[{group:"basicVariables"},{group:"processVariables"}]}})]});this.add(a);return a.show()},onGroupsCreated:function(){},getActionStore:function(){return this.activeGrid?this.activeGrid.getActionStore():null},getTabContainer:function(){return this.groupContainer},onReloaded:function(){this.destroyWidgets();this.openItem(this._item)},
openItem:function(a){var c=new b;this._item=a;var e=this;this.getBlockManager().load(a.mount,a.path).then(function(a){e.initWithScope(a);c.resolve(e)});return c},initWithContent:function(a){var b=null;try{b=h.getJson(a)}catch(x){console.error("invalid block data")}b&&this.initWithData(b)},initWithScope:function(a){this.blockScope=a;var b=a.allGroups();-1==b.indexOf("Variables")&&b.push("Variables");-1==b.indexOf("Events")&&b.push("Events");-1==b.indexOf("On Load")&&b.push("On Load");this.renderGroups(b,
a)},getScopeUserData:function(){return{owner:this}},initWithData:function(a){this.onLoaded();var b=h.createUUID(),c=a;!w.isArray(a)&&w.isObject(a)&&(b=a.scopeId||b,c=a.blocks||[]);this.blockManager=a=this.getBlockManager();for(var e=this.getScopeUserData(),b=a.getScope(b,e,!0),c=b.blocksFromJson(c),e=0;e<c.length;e++)c[e]._lastRunSettings={force:!1,highlight:!0};a.onBlocksReady(b);if(c)return this.initWithScope(b)},destroyWidgets:function(){this.blockManager&&this.blockScope&&this.blockManager.removeScope(this.blockScope.id);
this.blockManager=null},destroy:function(){this.destroyWidgets();delete this.tabs;delete this.propertyStruct;delete this.visualEditor;delete this.widget;delete this.params;delete this.pageEditor;delete this.editorContext;delete this.activeGrid;this.delegate=this.blockScope=this.__right=this.docker=this.ctx=this._parent=this.item=null},getBlockManager:function(){if(!this.blockManager){if(this.ctx.blockManager)return this.ctx.blockManager;this.blockManager=k.createInstance(this.blockManagerClass,{ctx:this.ctx})}return this.blockManager},
getActiveGrid:function(){return this.activeGrid},runAction:function(a){return"File/New Group"==a.command?(this.openNewGroupDialog(),null):this.getActiveGrid().runAction(arguments)},addGridActions:function(a,b){a=[];var c={addPermission:!0};a.push(this.createAction({label:"New Group",command:"File/New Group",icon:"fa-magic",tab:"Home",group:"File",keycombo:["f7"],mixin:h.mixin({quick:!0},c)}));a.push(this.createAction({label:"Delete Group",command:"File/Delete Group",icon:"fa-remove",tab:"Home",group:"File",
keycombo:["ctrl f7"],mixin:h.mixin({quick:!0},c)}));(b||this).addActions(a)},onShowGrid:function(a){},renderGroup:function(a,b,c){b=b||this.blockScope;var e=this,g=a.replace(this.newGroupPrefix,"");h.isNativeEvent(a)&&(g=g.replace("on",""));var g=this.getContainerLabel(a.replace(this.newGroupPrefix,"")),q="Variables"===a,g=this.createGroupView(null,g,b,!q,q?" fa-info-circle":"fa-bell",!q),q={};"Variables"===a&&(q.newRootItemFunction=function(){new d({title:"No-Title-Yet",type:13,value:"No Value",
enumType:"VariableType",save:!1,initialize:"",group:"Variables",id:h.createUUID(),scope:b})},q.onGridDataChanged=function(a){var b=a.item;b&&(b[a.field]=a.newValue);e.save()},q.showAllBlocks=!1,q.newRootItemLabel="New Variable",q.newRootItemIcon="fa-code",q.storeField="variableStore",q.gridParams={cssClass:"bloxGridView",getColumns:function(){return[{label:"Name",field:"title",sortable:!0},{label:"Value",field:"value",sortable:!1}]}});q.newRootItemGroup=a;a=this.createGroupedBlockView(g,a,b,q,c);
g.blockView=a;!this.activeGrid&&(this.activeGrid=a);return a},renderGroups:function(a,b){this._isCreating=!0;this.activeGrid=null;this.tabs=[];this._lastTab=null;this.setPropertyStruct({currentCIView:null,targetTop:null,_lastItem:null,id:h.createUUID()});for(var c=0;c<a.length;c++){var e=a[c];if(""!=this.newGroupPrefix||-1===e.indexOf("__"))try{var g=b.getBlocks({group:e});("Variables"===e||g&&g.length)&&this.renderGroup(e,b)}catch(y){logError(y)}}this.tabs&&this.tabs[0]&&(this.tabs[0].silent=!0,
this.tabs[0].select(),this.tabs[0].silent=!1)},onSave:function(a){this.save()},save:function(){if(this.blockScope){var a=this.ctx.getFileManager(),b=this.item;a.setContent(b.mount,b.path,this.blockScope.toString(),function(){})}}})})},"dijit/_base/wai":function(){define(["../main"],function(n){return n})},"dgrid/util/touch":function(){define(["dojo/on"],function(n,m){function k(d,b,c,g){if(!(1<c.targetTouches.length)){var p=c.changedTouches[0],a=p.screenX,e=p.screenY;g&&c.preventDefault();var q=n(d,
"touchend",function(c){var d=c.changedTouches[0];c.targetTouches.length||(Math.abs(d.screenX-a)<h.tapRadius&&Math.abs(d.screenY-e)<h.tapRadius&&(g&&c.preventDefault(),b.call(this,c)),q.remove())})}}var h={tapRadius:10,dbltapTime:250,selector:function(d,b,c){return function(g,p){var a=b.bubble;a?b=a:!1!==c&&(c=!0);return n(g,b,function(a){var b=a.target;3===b.nodeType&&(b=b.parentNode);for(;!m.matches(b,d,g);)if(b===g||!c||!(b=b.parentNode))return;return p.call(b,a)})}},countCurrentTouches:function(d,
b){if(!("touches"in d))return-1;var c,g,p;for(g=c=0;p=d.touches[c];++c)b.contains(p.target)&&++g;return g},tap:function(d,b){return n(d,"touchstart",function(c){k(d,b,c)})},dbltap:function(d,b){var c,g;return n(d,"touchstart",function(p){c?k(d,function(a){if(c){var e=a.changedTouches[0];Math.abs(e.screenX-c.screenX)<h.tapRadius&&Math.abs(e.screenY-c.screenY)<h.tapRadius&&(g&&clearTimeout(g),c=g=null,b.call(this,a))}},p,!0):k(d,function(a){c=a.changedTouches[0];g=setTimeout(function(){c=g=null},h.dbltapTime)},
p)})}};return h})},"xblox/model/logging/Log":function(){define("dcl/dcl dojo/Deferred xblox/model/Block xide/utils xide/types xide/mixins/EventedMixin".split(" "),function(n,m,k,h,d,b){return n([k,b.dcl],{declaredClass:"xblox.model.logging.Log",name:"Log Message",level:"info",message:'return "Message: " + arguments[0];',_type:"XBlox",host:"this host",sharable:!0,toText:function(){var b="text-primary";switch(this.level){case "info":b="text-info";break;case "warn":b="text-warning";break;case "error":b=
"text-danger"}b=this.getBlockIcon()+" "+this.name+" : \x3cspan class\x3d'"+b+" small'\x3e  :: ";this.message&&(b+=this.message);return b+"\x3c/span\x3e"},_solveExpression:function(b,g,d,a,e){if((b=""+b)&&b.length){b=h.convertAllEscapes(b,"none");var c=this.getArgs();try{var p=g.parseExpression(b,null,null,null,null,this,c);a&&a("Expression "+b+" evaluates to "+p);return p}catch(w){e&&e("invalid expression : \n"+b+": "+w),this.onFailed(this,d)}}return b},solve:function(b,g,p,a){var c=new m,q=b.device;
b=this._solveExpression(this.message,b,g,p,a);q={message:b,level:this.level,type:this._type,details:this.getArgs(),time:(new Date).getTime(),data:{device:q?q.info:null},write:!0};this.onSuccess(this,g);c.resolve(b);try{this.publish(d.EVENTS.ON_SERVER_LOG_MESSAGE,q)}catch(u){this.onFailed(this,g)}return c},canAdd:function(){return null},getFields:function(){var b=this.inherited(arguments)||this.getDefaultFields(),g=this;b.push(h.createCI("Level",3,this.level,{group:"General",options:[{value:"info",
label:"Info"},{value:"warn",label:"Warning"},{value:"error",label:"Error"},{value:"debug",label:"Debug"},{value:"help",label:"Help"},{value:"verbose",label:"verbose"},{value:"silly",label:"Silly"}],dst:"level"}));b.push(h.createCI("message",25,this.message,{group:"General",title:"Message",dst:"message",delegate:{runExpression:function(b,a,c){g._solveExpression(b,g.scope,null,a,c)}}}));b.push(h.createCI("message",13,this._type,{group:"General",title:"Type",dst:"_type"}));return b},getBlockIcon:function(){return'\x3cspan class\x3d"fa-bug"\x3e\x3c/span\x3e'}})})},
"dijit/form/_TextBoxMixin":function(){define("dojo/_base/array dojo/_base/declare dojo/dom dojo/has dojo/keys dojo/_base/lang dojo/on ../main".split(" "),function(n,m,k,h,d,b,c,g){var p=m("dijit.form._TextBoxMixin",null,{trim:!1,uppercase:!1,lowercase:!1,propercase:!1,maxLength:"",selectOnClick:!1,placeHolder:"",_getValueAttr:function(){return this.parse(this.get("displayedValue"),this.constraints)},_setValueAttr:function(a,b,c){var e;void 0!==a&&(e=this.filter(a),"string"!=typeof c&&(c=null===e||
"number"==typeof e&&isNaN(e)?"":this.filter(this.format(e,this.constraints)),0!=this.compare(e,this.filter(this.parse(c,this.constraints)))&&(c=null)));this.textbox&&(null==c||"number"==typeof c&&isNaN(c)||this.textbox.value==c||(this.textbox.value=c,this._set("displayedValue",this.get("displayedValue"))),this.inherited(arguments,[e,b]))},displayedValue:"",_getDisplayedValueAttr:function(){return this.textbox?this.filter(this.textbox.value):""},_setDisplayedValueAttr:function(a){null==a?a="":"string"!=
typeof a&&(a=String(a));this.textbox.value=a;this._setValueAttr(this.get("value"),void 0);this._set("displayedValue",this.get("displayedValue"))},format:function(a){return null==a?"":a.toString?a.toString():a},parse:function(a){return a},_refreshState:function(){},onInput:function(){},__skipInputEvent:!1,_onInput:function(a){this._processInput(a);this.intermediateChanges&&this.defer(function(){this._handleOnChange(this.get("value"),!1)})},_processInput:function(a){this._refreshState();this._set("displayedValue",
this.get("displayedValue"))},postCreate:function(){this.textbox.setAttribute("value",this.textbox.value);this.inherited(arguments);this.own(c(this.textbox,"keydown, keypress, paste, cut, input, compositionend",b.hitch(this,function(a){var c;if("keydown"==a.type){c=a.keyCode;switch(c){case d.SHIFT:case d.ALT:case d.CTRL:case d.META:case d.CAPS_LOCK:case d.NUM_LOCK:case d.SCROLL_LOCK:return}if(!a.ctrlKey&&!a.metaKey&&!a.altKey){switch(c){case d.NUMPAD_0:case d.NUMPAD_1:case d.NUMPAD_2:case d.NUMPAD_3:case d.NUMPAD_4:case d.NUMPAD_5:case d.NUMPAD_6:case d.NUMPAD_7:case d.NUMPAD_8:case d.NUMPAD_9:case d.NUMPAD_MULTIPLY:case d.NUMPAD_PLUS:case d.NUMPAD_ENTER:case d.NUMPAD_MINUS:case d.NUMPAD_PERIOD:case d.NUMPAD_DIVIDE:return}if(65<=
c&&90>=c||48<=c&&57>=c||c==d.SPACE)return;c=!1;for(var g in d)if(d[g]===a.keyCode){c=!0;break}if(!c)return}}(c=32<=a.charCode?String.fromCharCode(a.charCode):a.charCode)||(c=65<=a.keyCode&&90>=a.keyCode||48<=a.keyCode&&57>=a.keyCode||a.keyCode==d.SPACE?String.fromCharCode(a.keyCode):a.keyCode);c||(c=229);if("keypress"==a.type){if("string"!=typeof c)return;if("a"<=c&&"z">=c||"A"<=c&&"Z">=c||"0"<=c&&"9">=c||" "===c)if(a.ctrlKey||a.metaKey||a.altKey)return}if("input"==a.type){if(this.__skipInputEvent){this.__skipInputEvent=
!1;return}}else this.__skipInputEvent=!0;var p={faux:!0},h;for(h in a)/^(layer[XY]|returnValue|keyLocation)$/.test(h)||(g=a[h],"function"!=typeof g&&"undefined"!=typeof g&&(p[h]=g));b.mixin(p,{charOrCode:c,_wasConsumed:!1,preventDefault:function(){p._wasConsumed=!0;a.preventDefault()},stopPropagation:function(){a.stopPropagation()}});!1===this.onInput(p)&&(p.preventDefault(),p.stopPropagation());p._wasConsumed||this.defer(function(){this._onInput(p)})})),c(this.domNode,"keypress",function(a){a.stopPropagation()}))},
_blankValue:"",filter:function(a){if(null===a)return this._blankValue;if("string"!=typeof a)return a;this.trim&&(a=b.trim(a));this.uppercase&&(a=a.toUpperCase());this.lowercase&&(a=a.toLowerCase());this.propercase&&(a=a.replace(/[^\s]+/g,function(a){return a.substring(0,1).toUpperCase()+a.substring(1)}));return a},_setBlurValue:function(){this._setValueAttr(this.get("value"),!0)},_onBlur:function(a){this.disabled||(this._setBlurValue(),this.inherited(arguments))},_isTextSelected:function(){return this.textbox.selectionStart!=
this.textbox.selectionEnd},_onFocus:function(a){this.disabled||this.readOnly||(this.selectOnClick&&"mouse"==a&&(this._selectOnClickHandle=c.once(this.domNode,"mouseup, touchend",b.hitch(this,function(a){this._isTextSelected()||p.selectInputText(this.textbox)})),this.own(this._selectOnClickHandle),this.defer(function(){this._selectOnClickHandle&&(this._selectOnClickHandle.remove(),this._selectOnClickHandle=null)},500)),this.inherited(arguments),this._refreshState())},reset:function(){this.textbox.value=
"";this.inherited(arguments)}});p._setSelectionRange=g._setSelectionRange=function(a,b,c){a.setSelectionRange&&a.setSelectionRange(b,c)};p.selectInputText=g.selectInputText=function(a,b,c){a=k.byId(a);isNaN(b)&&(b=0);isNaN(c)&&(c=a.value?a.value.length:0);try{a.focus(),p._setSelectionRange(a,b,c)}catch(u){}};return p})},"xdocker/xdocker":function(){define(["dijit","dojo","dojox"],function(n,m,k){})},"dojo/dom":function(){define(["./sniff","./_base/window"],function(n,m){if(7>=n("ie"))try{document.execCommand("BackgroundImageCache",
!1,!0)}catch(d){}var k={};n("ie")?k.byId=function(d,b){if("string"!=typeof d)return d;var c=b||m.doc;b=d&&c.getElementById(d);if(!b||b.attributes.id.value!=d&&b.id!=d){c=c.all[d];if(!c||c.nodeName)c=[c];for(var g=0;b=c[g++];)if(b.attributes&&b.attributes.id&&b.attributes.id.value==d||b.id==d)return b}else return b}:k.byId=function(d,b){return("string"==typeof d?(b||m.doc).getElementById(d):d)||null};k.isDescendant=function(d,b){try{for(d=k.byId(d),b=k.byId(b);d;){if(d==b)return!0;d=d.parentNode}}catch(c){}return!1};
n.add("css-user-select",function(d,b,c){if(!c)return!1;d=c.style;b=["Khtml","O","ms","Moz","Webkit"];c=b.length;var g="userSelect";do if("undefined"!==typeof d[g])return g;while(c--&&(g=b[c]+"UserSelect"));return!1});var h=n("css-user-select");k.setSelectable=h?function(d,b){k.byId(d).style[h]=b?"":"none"}:function(d,b){d=k.byId(d);var c=d.getElementsByTagName("*"),g=c.length;if(b)for(d.removeAttribute("unselectable");g--;)c[g].removeAttribute("unselectable");else for(d.setAttribute("unselectable",
"on");g--;)c[g].setAttribute("unselectable","on")};return k})},"xlang/i18":function(){define(["xdojo/declare","xide/utils/ObjectUtils","dcl/dcl"],function(n,m,k){function h(a,b,e){a+=1==e?m.capitalize(b):b;return g[c[a]||a]}function d(a){a=a||"";if("move"===a)debugger;var b=a.replace(/\s+/g,"_").split("/"),c=b[b.length-1].toLocaleLowerCase(),b=h("cmd",c),e=h("err",c,!0),g=h("btn",c,!0),q=h("",c),c=h("",c,!0),p=h("",a,!1),r=q||c||p||b||g||e;return r?r.replace("$1",""):-1!==a.indexOf(" ")&&-1==a.indexOf("%%")?
(r="",a=a.split(" "),_.each(a,function(a){r+=" "+d(a)}),r.trim()):a=a.replace("%%","")}var b={language:"English",direction:"ltr",dateFormat:"M d, Y h:i A",fancyDateFormat:"$1 h:i A",messages:{error:"Error",errUnknown:"Unknown error.",errUnknownCmd:"Unknown command.",errJqui:"Invalid jQuery UI configuration. Selectable, draggable and droppable components must be included.",errNode:"elFinder requires DOM Element to be created.",errURL:"Invalid elFinder configuration! URL option is not set.",errAccess:"Access denied.",
errConnect:"Unable to connect to backend.",errAbort:"Connection aborted.",errTimeout:"Connection timeout.",errNotFound:"Backend not found.",errResponse:"Invalid backend response.",errConf:"Invalid backend configuration.",errJSON:"PHP JSON module not installed.",errNoVolumes:"Readable volumes not available.",errCmdParams:'Invalid parameters for command "$1".',errDataNotJSON:"Data is not JSON.",errDataEmpty:"Data is empty.",errCmdReq:"Backend request requires command name.",errOpen:'Unable to open "$1".',
errNotFolder:"Object is not a folder.",errNotFile:"Object is not a file.",errRead:'Unable to read "$1".',errWrite:'Unable to write into "$1".',errPerm:"Permission denied.",errLocked:'"$1" is locked and can not be renamed, moved or removed.',errExists:'File named "$1" already exists.',errInvName:"Invalid file name.",errFolderNotFound:"Folder not found.",errFileNotFound:"File not found.",errTrgFolderNotFound:'Target folder "$1" not found.',errPopup:"Browser prevented opening popup window. To open file enable it in browser options.",
errMkdir:'Unable to create folder "$1".',errMkfile:'Unable to create file "$1".',errRename:'Unable to rename "$1".',errCopyFrom:'Copying files from volume "$1" not allowed.',errCopyTo:'Copying files to volume "$1" not allowed.',errUpload:"Upload error.",errUploadFile:'Unable to upload "$1".',errUploadNoFiles:"No files found for upload.",errUploadTotalSize:"Data exceeds the maximum allowed size.",errUploadFileSize:"File exceeds maximum allowed size.",errUploadMime:"File type not allowed.",errUploadTransfer:'"$1" transfer error.',
errNotReplace:'Object "$1" already exists at this location and can not be replaced by object with another type.',errReplace:'Unable to replace "$1".',errSave:'Unable to save "$1".',errCopy:'Unable to copy "$1".',errMove:'Unable to move "$1".',errCopyInItself:'Unable to copy "$1" into itself.',errRm:'Unable to remove "$1".',errRmSrc:"Unable remove source file(s).",errExtract:'Unable to extract files from "$1".',errArchive:"Unable to create archive.",errArcType:"Unsupported archive type.",errNoArchive:"File is not archive or has unsupported archive type.",
errCmdNoSupport:"Backend does not support this command.",errReplByChild:"The folder \u201c$1\u201d can\u2019t be replaced by an item it contains.",errArcSymlinks:"For security reason denied to unpack archives contains symlinks or files with not allowed names.",errArcMaxSize:"Archive files exceeds maximum allowed size.",errResize:'Unable to resize "$1".',errResizeDegree:"Invalid rotate degree.",errResizeRotate:"Image dose not rotated.",errResizeSize:"Invalid image size.",errResizeNoChange:"Image size not changed.",
errUsupportType:"Unsupported file type.",errNotUTF8Content:'File "$1" is not in UTF-8 and cannot be edited.',errNetMount:'Unable to mount "$1".',errNetMountNoDriver:"Unsupported protocol.",errNetMountFailed:"Mount failed.",errNetMountHostReq:"Host required.",errSessionExpires:"Your session has expired due to inactivity.",errCreatingTempDir:'Unable to create temporary directory: "$1"',errFtpDownloadFile:'Unable to download file from FTP: "$1"',errFtpUploadFile:'Unable to upload file to FTP: "$1"',
errFtpMkdir:'Unable to create remote directory on FTP: "$1"',errArchiveExec:'Error while archiving files: "$1"',errExtractExec:'Error while extracting files: "$1"',cmdarchive:"Create archive",cmdback:"Back",cmdcopy:"Copy",cmdcut:"Cut",cmddownload:"Download",cmdduplicate:"Duplicate",cmdedit:"Edit file",cmdextract:"Extract files from archive",cmdforward:"Forward",cmdgetfile:"Select files",cmdhelp:"About this software",cmdhome:"Home",cmdinfo:"Get info",cmdmkdir:"New folder",cmdmkfile:"New text file",
cmdopen:"Open",cmdpaste:"Paste",cmdquicklook:"Preview",cmdreload:"Reload",cmdrename:"Rename",cmdrm:"Delete",cmdsearch:"Find files",cmdup:"Go to parent directory",cmdupload:"Upload files",cmdview:"View",cmdresize:"Resize \x26 Rotate",cmdsort:"Sort",cmdnetmount:"Mount network volume",btnClose:"Close",btnSave:"Save",btnRm:"Remove",btnApply:"Apply",btnCancel:"Cancel",btnNo:"No",btnYes:"Yes",btnMount:"Mount",ntfopen:"Open folder",ntffile:"Open file",ntfreload:"Reload folder content",ntfmkdir:"Creating directory",
ntfmkfile:"Creating files",ntfrm:"Delete files",ntfcopy:"Copy files",ntfmove:"Move files",ntfprepare:"Prepare to copy files",ntfrename:"Rename files",ntfupload:"Uploading files",ntfdownload:"Downloading files",ntfsave:"Save files",ntfarchive:"Creating archive",ntfextract:"Extracting files from archive",ntfsearch:"Searching files",ntfresize:"Resizing images",ntfsmth:"Doing something",ntfloadimg:"Loading image",ntfnetmount:"Mounting network volume",ntfdim:"Acquiring image dimension",dateUnknown:"unknown",
Today:"Today",Yesterday:"Yesterday",msJan:"Jan",msFeb:"Feb",msMar:"Mar",msApr:"Apr",msMay:"May",msJun:"Jun",msJul:"Jul",msAug:"Aug",msSep:"Sep",msOct:"Oct",msNov:"Nov",msDec:"Dec",January:"January",February:"February",March:"March",April:"April",May:"May",June:"June",July:"July",August:"August",September:"September",October:"October",November:"November",December:"December",Sunday:"Sunday",Monday:"Monday",Tuesday:"Tuesday",Wednesday:"Wednesday",Thursday:"Thursday",Friday:"Friday",Saturday:"Saturday",
Sun:"Sun",Mon:"Mon",Tue:"Tue",Wed:"Wed",Thu:"Thu",Fri:"Fri",Sat:"Sat",sortname:"by name",sortkind:"by kind",sortsize:"by size",sortdate:"by date",sortFoldersFirst:"Folders first",moveup:"Move Up",movedown:"Move Down",moveleft:"Move Left",moveright:"Move Right",edit:"Edit",confirmReq:"Confirmation required",confirmRm:"Are you sure you want to remove files?\x3cbr/\x3eThis cannot be undone!",confirmRepl:"Replace old file with new one?",apllyAll:"Apply to all",name:"Name",size:"Size",perms:"Permissions",
modify:"Modified",kind:"Kind",read:"read",write:"write",noaccess:"no access",and:"and",unknown:"unknown",selectall:"Select all files",selectfiles:"Select file(s)",selectffile:"Select first file",selectlfile:"Select last file",viewlist:"List view",viewicons:"Icons view",places:"Places",calc:"Calculate",path:"Path",aliasfor:"Alias for",locked:"Locked",dim:"Dimensions",files:"Files",folders:"Folders",items:"Items",yes:"yes",no:"no",link:"Link",searcresult:"Search results",selected:"selected items",about:"About",
shortcuts:"Shortcuts",help:"Help",webfm:"Web file manager",ver:"Version",protocolver:"protocol version",homepage:"Project home",docs:"Documentation",github:"Fork us on Github",twitter:"Follow us on twitter",facebook:"Join us on facebook",team:"Team",chiefdev:"chief developer",developer:"developer",contributor:"contributor",maintainer:"maintainer",translator:"translator",icons:"Icons",dontforget:"and don't forget to take your towel",shortcutsof:"Shortcuts disabled",dropFiles:"Drop files here",or:"or",
selectForUpload:"Select files to upload",moveFiles:"Move files",copyFiles:"Copy files",rmFromPlaces:"Remove from places",aspectRatio:"Aspect ratio",scale:"Scale",width:"Width",height:"Height",resize:"Resize",crop:"Crop",rotate:"Rotate","rotate-cw":"Rotate 90 degrees CW","rotate-ccw":"Rotate 90 degrees CCW",degree:"\u00b0",netMountDialogTitle:"Mount network volume",protocol:"Protocol",host:"Host",port:"Port",user:"User",pass:"Password",confirmUnmount:"Are you unmount $1?",dropFilesBrowser:"Drop or Paste files from browser",
dropPasteFiles:"Drop or Paste files and URLs here",encoding:"Encoding",locale:"Locale",searchTarget:"Target: $1",searchMime:"Search by input MIME Type",owner:"Owner",group:"Group",other:"Other",execute:"Execute",perm:"Permission",mode:"Mode",kindUnknown:"Unknown",kindFolder:"Folder",kindAlias:"Alias",kindAliasBroken:"Broken alias",kindApp:"Application",kindPostscript:"Postscript document",kindMsOffice:"Microsoft Office document",kindMsWord:"Microsoft Word document",kindMsExcel:"Microsoft Excel document",
kindMsPP:"Microsoft Powerpoint presentation",kindOO:"Open Office document",kindAppFlash:"Flash application",kindPDF:"Portable Document Format (PDF)",kindTorrent:"Bittorrent file",kind7z:"7z archive",kindTAR:"TAR archive",kindGZIP:"GZIP archive",kindBZIP:"BZIP archive",kindXZ:"XZ archive",kindZIP:"ZIP archive",kindRAR:"RAR archive",kindJAR:"Java JAR file",kindTTF:"True Type font",kindOTF:"Open Type font",kindRPM:"RPM package",kindText:"Text document",kindTextPlain:"Plain text",kindPHP:"PHP source",
kindCSS:"Cascading style sheet",kindHTML:"HTML document",kindJS:"Javascript source",kindRTF:"Rich Text Format",kindC:"C source",kindCHeader:"C header source",kindCPP:"C++ source",kindCPPHeader:"C++ header source",kindShell:"Unix shell script",kindPython:"Python source",kindJava:"Java source",kindRuby:"Ruby source",kindPerl:"Perl script",kindSQL:"SQL source",kindXML:"XML document",kindAWK:"AWK source",kindCSV:"Comma separated values",kindDOCBOOK:"Docbook XML document",kindImage:"Image",kindBMP:"BMP image",
kindJPEG:"JPEG image",kindGIF:"GIF Image",kindPNG:"PNG Image",kindTIFF:"TIFF image",kindTGA:"TGA image",kindPSD:"Adobe Photoshop image",kindXBITMAP:"X bitmap image",kindPXM:"Pixelmator image",kindAudio:"Audio media",kindAudioMPEG:"MPEG audio",kindAudioMPEG4:"MPEG-4 audio",kindAudioMIDI:"MIDI audio",kindAudioOGG:"Ogg Vorbis audio",kindAudioWAV:"WAV audio",AudioPlaylist:"MP3 playlist",kindVideo:"Video media",kindVideoDV:"DV movie",kindVideoMPEG:"MPEG movie",kindVideoMPEG4:"MPEG-4 movie",kindVideoAVI:"AVI movie",
kindVideoMOV:"Quick Time movie",kindVideoWM:"Windows Media movie",kindVideoFlash:"Flash movie",kindVideoMKV:"Matroska movie",kindVideoOGG:"Ogg movie"}},c={cmdpreview:"cmdquicklook",cmddelete:"cmdrm",cmdnew_folder:"cmdmkdir",cmdnew_file:"cmdmkfile",create_archive:"cmdarchive",select_all:"selectall",go_up:"cmdback",source:"places",select:"selectfiles",modified:"modify",list:"viewlist",thumb:"viewicons",type:"kind"},g=b.messages,p="January February March April May June July August September October November December".split(" "),
a="msJan msFeb msMar msApr msMay msJun msJul msAug msSep msOct msNov msDec".split(" "),e="Sunday Monday Tuesday Wednesday Thursday Friday Saturday".split(" "),q="Sun Mon Tue Wed Thu Fri Sat".split(" "),u={translations:b,localize:d},w=n("xlang.i18",null,u);w.dcl=k(null,u);w.Implementation=u;w.setLanguage=function(a){a=a.translations;b.language=a.language;b.direction=a.direction;b.dateFormat=a.dateFormat;b.fancyDateFormat=a.fancyDateFormat;m.mixin(b.messages,a.messages)};w.mappings=c;w.localize=d;w.translations=
b;w.addMapping=function(a){m.mixin(c,a)};w.formatDate=function(b){var c=new Date;this.getHours="getHours";this.getMinutes="getMinutes";this.getSeconds="getSeconds";this.getDate="getDate";this.getDay="getDay";this.getMonth="getMonth";this.getFullYear="getFullYear";this.today=(new Date(c.getFullYear(),c.getMonth(),c.getDate())).getTime()/1E3;this.yesterday=this.today-86400;var g,d,h,r,u,k,m,n;return 0<b?(c=new Date(1E3*b),u=c[this.getHours](),k=12<u?u-12:u,m=c[this.getMinutes](),n=c[this.getSeconds](),
g=c[this.getDate](),d=c[this.getDay](),h=c[this.getMonth]()+1,r=c[this.getFullYear](),c=b>=this.yesterday?w.translations.fancyDateFormat:w.translations.dateFormat,c=c.replace(/[a-z]/gi,function(b){switch(b){case "d":return 9<g?g:"0"+g;case "j":return g;case "D":return w.localize(q[d]);case "l":return w.localize(e[d]);case "m":return 9<h?h:"0"+h;case "n":return h;case "M":return w.localize(a[h-1]);case "F":return w.localize(p[h-1]);case "Y":return r;case "y":return(""+r).substr(2);case "H":return 9<
u?u:"0"+u;case "G":return u;case "g":return k;case "h":return 9<k?k:"0"+k;case "a":return 12<u?"pm":"am";case "A":return 12<u?"PM":"AM";case "i":return 9<m?m:"0"+m;case "s":return 9<n?n:"0"+n}return b}),b>=this.yesterday?c.replace("$1",w.localize(b>=this.today?"Today":"Yesterday")):c):w.localize("dateUnknown")};return w})},"dijit/form/_ToggleButtonMixin":function(){define(["dojo/_base/declare","dojo/dom-attr"],function(n,m){return n("dijit.form._ToggleButtonMixin",null,{checked:!1,_aria_attr:"aria-pressed",
_onClick:function(k){var h=this.checked;this._set("checked",!h);var d=this.inherited(arguments);this.set("checked",d?this.checked:h);return d},_setCheckedAttr:function(k,h){this._set("checked",k);var d=this.focusNode||this.domNode;this._created&&m.get(d,"checked")!=!!k&&m.set(d,"checked",!!k);d.setAttribute(this._aria_attr,String(k));this._handleOnChange(k,h)},postCreate:function(){this.inherited(arguments);var k=this.focusNode||this.domNode;this.checked&&k.setAttribute("checked","checked");void 0===
this._resetValue&&(this._lastValueReported=this._resetValue=this.checked)},reset:function(){this._hasBeenBlurred=!1;this.set("checked",this.params.checked||!1)}})})},"xfile/FolderSize":function(){define("xdojo/declare xide/types xide/utils xfile/Breadcrumb xide/layout/_TabContainer xfile/views/FileSize".split(" "),function(n,m,k,h,d,b){return n("xfile.FolderSize",null,{__sizeDisplay:null,__bottomTabContainer:null,__bottomPanel:null,__sizesTab:null,showStats:function(c){var g=this.getBottomTabContainer(),
p=this.__sizesTab,a=this.__sizeDisplay,e=this,q=this._getBottom(),h=q&&q.isExpanded();if(1==h&&q)c=!1;else if(!h&&q)return q.expand();if(c){q||(q=this.getBottomPanel(!1,.2));if(q&&a)return q.expand();g||(this.__bottomTabContainer=g=c=k.addWidget(d,{direction:"below"},null,q,!0),q._tabs=c);p||(p=this.__sizesTab=g.createTab("Sizes","fa-bar-chart"));a||(a=this.__sizeDisplay=p.add(b,{owner:e},null,!1),a.startup(),this._on("openedFolder",function(a){k.destroy(e.__sizeDisplay);p.resize();e.resize();e.__sizeDisplay=
null;e.__sizeDisplay=k.addWidget(b,{owner:e},null,p,!1);k.resizeTo(e.__sizeDisplay,p,!0,!0);e.__sizeDisplay.startup()}))}else q&&q.collapse()},_runAction:function(b){var c=this.getAction(b);return c&&c.command==m.ACTION.SIZE_STATS?this.showStats(this.__sizeDisplay?!1:!0):this.inherited(arguments)},buildRendering:function(){this.inherited(arguments);this._on("onAddActions",function(b){})}})})},"davinci/model/Model":function(){define(["dojo/_base/declare"],function(n){return n("davinci.model.Model",
null,{constructor:function(){this.name=this.elementType="";this.endOffset=this.startOffset=0;this.parent=null;this.children=[]},inherits:function(m){1<arguments.length?m.apply(this,Array.prototype.slice.call(arguments,1)):m.call(this)},getText:function(){},setText:function(m){},addChild:function(m,k,h){m.parent=this;void 0!=k?this.children.splice(k,0,m):this.children.push(m)},setStart:function(m){this.startOffset=m},setEnd:function(m){this.endOffset=m},getLabel:function(){return null},getID:function(){return null},
mapPositions:function(m){return{startOffset:m.startOffset,endOffset:m.endOffset}},findChildAtPosition:function(m){m.endOffset||(m.endOffset=m.startOffset);if(m.startOffset>=this.startOffset&&m.endOffset<=this.endOffset){for(var k=0;k<this.children.length;k++){var h=this.children[k].findChildAtPosition(m);if(null!=h)return h}return this}return null},removeChild:function(m){for(var k=0;k<this.children.length;k++)if(this.children[k]==m){this.children.splice(k,1);break}},find:function(m,k){var h={visit:function(d){if(0<
this.found.length&&k)return!0;var b=null;for(b in m)if(d[b]!=m[b])break;d[b]==m[b]&&this.found.push(d);return!1},found:[]};this.visit(h);return k?0<h.found.length?h.found[0]:null:h.found},setDirty:function(m){this.dirtyResource=m},isDirty:function(){return this.dirtyResource},searchUp:function(m){if(this.elementType==m)return this;for(var k=this.parent;k&&k.elementType!=m;)k=k.parent;return k},visit:function(m){if(!m.visit(this))for(var k=0;k<this.children.length;k++)this.children[k].visit(m);m.endVisit&&
m.endVisit(this)},updatePositions:function(m,k,h){visitor={visit:function(d){if(d.endOffset<k)return!0;d.startOffset>=k?(d.startOffset+=h,d.endOffset+=h):d.endOffset>=k&&(d.endOffset+=h)}};m.visit(visitor)}})})},"xide/widgets/ActionToolbar":function(){define(["xide/widgets/ActionToolbar4"],function(n){return n})},"xblox/views/BlockGrid":function(){define("dojo/_base/declare xide/types xide/utils xide/factory xblox/views/Grid xide/layout/_Accordion xide/views/CIViewMixin xaction/DefaultActions dojo/dom-class dojo/Deferred xide/views/History".split(" "),
function(n,m,k,h,d,b,c,g,p,a,e){function q(a){a.hightlightTimer&&(clearTimeout(a.hightlightTimer),a.hightlightTimer=null)}var u=m.ACTION,u={highlightDelay:500,currentCIView:null,targetTop:null,lastSelectedTopTabTitle:"General",showHeader:!1,toolbarInitiallyHidden:!0,contextMenuArgs:{actionFilter:{quick:!0}},menuOrder:{File:110,Edit:100,View:90,Block:50,Settings:20,Navigation:10,Step:115,New:4,Window:1},permissions:[u.RELOAD,u.DELETE,u.CLIPBOARD,u.LAYOUT,u.COLUMNS,u.SELECTION,u.DOWNLOAD,u.SAVE,u.SEARCH,
"Step/Run","Step/Move Up","Step/Move Down",u.TOOLBAR,"Step/Properties","Step/Edit","Step/Back","Step/Pause",u.HEADER,u.CONTEXT_MENU],tabOrder:{Home:100,View:50,Settings:20},tabSettings:{Step:{width:"190px"},Show:{width:"130px"},Settings:{width:"100%"}},groupOrder:{Clipboard:110,File:100,Step:80,Open:70,Organize:60,Insert:10,Select:0},options:k.clone(m.DEFAULT_GRID_OPTIONS),columns:[{renderExpando:!0,label:"Name",field:"name",sortable:!1,formatter:function(a,b){var c="";return b.toText?(c=b.toText(),
'\x3cspan class\x3d"" style\x3d"width: 95%;"\x3e'+c+"\x3c/span\x3e"):a}}],getTypeMap:function(){return{}},getBlock:function(a){return this.blockScope.getBlockById(a)},formatOrder:function(a,b){if(b){var c=b.getParent();a=b.index();if(c){b=b.numberOfParents();for(var c="\x26nbsp;",e=0;e<b;e++)c+="\x26nbsp;";c+="";for(e=0;e<b;e++)c+="-"}else return"\x26nbsp;"+a;return c+"\x26nbsp;"+a}return""},focus:function(a){if(a)return this.inherited(arguments)},postMixInProperties:function(){var a=!1,b=this;_.each(this.columns,
function(b){"order"==b.field&&(a=!0)});a||"basicVariables"===this.blockGroup||this.columns.unshift({label:"Line",field:"order",sortable:!1,hidden:!1,formatter:function(a,c){return b.formatOrder(a,c,b)}});this.inherited(arguments)},renderRow:function(a){if(this.collection){var b=this.inherited(arguments);0==a.enabled&&p.add(b,"disabledBlock");var c=$(b),e=a.getScope(),e=e?e.id:null;if(a.getStatusClass&&e){var e=a.getStatusClass(e),g=$(b);e&&!g[0].hightlightTimer&&this.mark($(b),e.className,a,e.delay)}if(a.hasInlineEdits){if(c.__inline)return;
c.__inline=!0;c=c.find(".editable");_.each(c,function(b){b.object=a;b=$(b);var c=b.attr("data-prop"),e=b.attr("display-type")||"text",c=a.getFieldOptions?a.getFieldOptions(c):null,e={type:e,placement:b.attr("pos")||"right",mode:b.attr("display-mode")||"popup",title:b.prop("data-title"),inputclass:"input-transparent",success:function(a,b){a=$(this).attr("data-prop");this.object.set(a,b)}};c&&(e.source=c);b.editable(e);b.attr("tabIndex","-1")})}return b}},getCurrentParent:function(){var a=this.getHistory().getNow();
return a?this.getBlock(a):null},addItem:function(a,b){if(!a)return!1;b=b||{};var c=this.getSelection()[0],e=a.proto||b.proto;b=a.ctrArgs||b.ctrArgs;var g=null;a=null;c||(c=this.getCurrentParent());if(!c){var d=this.getSelection()[0];d&&(c=d)}b&&(b.id&&(b.id=k.createUUID()),b.parent&&(b.parent=null),b.parentId&&(b.parentId=null),b.items&&(b.items=[]));c&&e&&b?(c.owner&&c.dstField&&(g=c.dstField,c=c.owner),b.parentId=c.id,b.group=null,b.parent=c,a=c.add(e,b,g),a.parent=c):!c&&e&&b&&("No Group"===b.group&&
this.newRootItemGroup&&(b.group=this.newRootItemGroup),!b.group&&this.newRootItemGroup&&(b.group=this.newRootItemGroup),!b.group&&this.blockGroup&&(b.group=this.blockGroup),b.group&&this.newRootItemGroup&&b.group!==this.newRootItemGroup&&(b.group=this.newRootItemGroup),a=h.createBlock(e,b));a&&a.postCreate&&a.postCreate();if(a){c=this.getStore(c)||this.collection;e=c.getSync(a[c.idProperty]);e||(console.error("new block not in store"),c.putSync(a));try{a.scope._emit(m.EVENTS.ON_ITEM_ADDED,{item:a,
owner:a.scope})}catch(y){logError(y)}this._itemChanged("added",a,c);return e}console.error("didnt create block")},_itemChanged:function(a,b,c){function e(a,b){g.select(a,null,!0,{focus:!0,delay:1,append:!1,expand:!0},b)}c=c||this.getStore(b);var g=this;switch(a){case "added":g.refreshRoot();g.refresh();g.refreshCurrent();e(b);break;case "deleted":a=b.getParent();c=b.getPreviousBlock()||b.getNextBlock()||a;if(a){var d=a.getContainer();d&&_.each(d,function(a){a.id==b.id&&d.remove(a)})}this.refresh();
c&&e(c)}},printRootOrder:function(a){a=a||this.collection.storage.fullData;_.each(a,function(a,b){})},refreshAll:function(a){a||this._preserveSelection();this.refreshRoot();this.refresh();a||this._restoreSelection();var b=this;a&&setTimeout(function(){b.select(a,null,!0,{focus:!0})},30)},getStore:function(a){return a&&(_.isArray()&&(a=a[0]),a._store)?a._store:null},refreshRoot:function(){return this.set("collection",this.collection.filter(this.getRootFilter()))},refresCurrent:function(){return this.set("collection",
this.collection.filter(this.getRootFilter()))},getRootFilter:function(){return{group:this.blockGroup}},_onCIChanged:function(a,b,c,e,g){},clearPropertyPanel:function(){var a=this.getPropertyStruct();a.currentCIView&&(a.currentCIView.empty(),a.currentCIView=null);a.targetTop&&(k.destroy(a.targetTop,!0),a.targetTop=null);a._lastItem=null;this.setPropertyStruct(a)},getState:function(a){a=this.inherited(arguments)||{};var b=this.getRightPanel();a.properties=b.isExpanded();return a},onCIChanged:function(a,
b,c,e,g,d){c!==e&&(a=this.collection,b=this.collection.getSync(b.id),b.set(g,e),this.refreshActions(),b[g]=e,a.emit("update",{target:b,type:"update"}),b._store.emit("update",{target:b}),this._itemChanged("changed",b,a),b.onChangeField(g,e,d,this),(e=this.cell(b.id,"1"))&&e.column&&this.refreshCell(e).then(function(a){}),"enabled"===g&&this.refresh(),this._itemChanged("changed",b,a))},onShowProperties:function(a){var b=this._console;if(b&&a){var c=a.send||a.method;b.getConsoleEditor().set("value",
c);this._lastConsoleItem=a}},showProperties:function(e,g){function d(a,b){a&&(a=a.title,b?u.lastSelectedTopTabTitle=a:b||u.lastSelectedTopTabTitle!==a||(u.lastSelectedTopTabTitle=null))}var q=new a,p=e||this.getSelection()[0],h=this,r=h.getPanelSplitPosition(m.DOCKER.DOCK.RIGHT);if(p&&1!=r&&!1!==p.canEdit()){r=this.getRightPanel("Properties",null,"DefaultTab",{});r.closeable(!1);var u=this.getPropertyStruct();if(p!=u._lastItem||!0===g){this.clearPropertyPanel();u=this.getPropertyStruct();u._lastItem=
e;var w=u.targetTop;w||(w=k.addWidget(b,{},null,r.containerNode,!0),$(w.domNode).addClass("CIView Accordion"),u.targetTop=w,h.addHandle("show",w._on("show",function(a){d(a.view,!0)})),h.addHandle("hide",w._on("hide",function(a){d(a.view,!1)})));_.each(w.getChildren(),function(a){w.removeChild(a)});u.currentCIView&&u.currentCIView.empty();if(p.getFields){e=p.getFields();for(g=0;g<e.length;g++)e[g].vertical=!0;g=new c({typeMap:h.getTypeMap(),tabContainerClass:b,tabContainer:u.targetTop,delegate:this,
viewStyle:"padding:0px;",autoSelectLast:!0,item:p,source:this.callee,options:{groupOrder:{General:1,Advanced:2,Script:3,Arguments:4,Description:5,Share:6}},cis:e});g.initWithCIS(e);u.currentCIView=g;if(p.onFieldsRendered)p.onFieldsRendered(p,e);h.addHandle("valueChanged",g._on("valueChanged",function(a){setTimeout(function(){h.onCIChanged&&h.onCIChanged(a.ci,p,a.oldValue,a.newValue,a.ci.dst)},10)}));w.getTab(u.lastSelectedTopTabTitle)?w.selectChild(u.lastSelectedTopTabTitle,!0):u.lastSelectedTopTabTitle=
null;this.setPropertyStruct(u);this.onShowProperties(p);return q}}}},onSelectionChanged:function(a,b){var c=a.selection[0],e=this,g=this.ctx;a=e.getActionStore();b=this.getContextMenu();var d=this.getToolbar(),g=g.getWindowManager().getToolbar(),q=c&&c.getActions?c.getActions():null,p=this.getAction("Step/Enable");c&&(p.value=c.enabled);(c=a.query({global:!0}))&&!q&&(q=[]);_.each(c,function(a){(a=a.getActions?a.getActions(e.permissions,e):null)&&a.length&&(q=q.concat(a))});b&&b.removeCustomActions();
d&&d.removeCustomActions();g&&g.removeCustomActions();q&&!_.isEmpty(q)&&(b=this.addActions(q),a._emit("onActionsAdded",b))},startup:function(){if(!this._started){this.inherited(arguments);this._history=new e;this.propertyStruct||(this.propertyStruct={currentCIView:null,targetTop:null,_lastItem:null});this._dontSubscribeToHighligt=!0;$(this.domNode).addClass("blockGrid");var a=this,b=this.permissions||[],c=g.getDefaultActions(b,this),c=c.concat(this.getBlockActions(b));this.addActions(c);g.hasAction(b,
"Step/Properties")&&this._on("selectionChanged",function(b){var c=b.selection[0];clearTimeout(a._propsTimer);a._propsTimer=null;c?a._propsTimer=setTimeout(function(){a.getPropertyStruct();a.showProperties(c)},500):c||"clear"!=b.why||a.clearPropertyPanel();b.view=a;c&&a.publish("ON_SELECTED_BLOCK",b)});this.addHandle("update",this.collection.on("update",function(b){var c=b.target;"update"===b.type&&"value"===b.property&&(b=a.toNode(b))&&a.mark(b,"successBlock",c)}));this.addHandle("added",this.collection._on("added",
function(b){a._refreshTimer||(a._refreshTimer=setTimeout(function(){a.refresh();delete a._refreshTimer;a._refreshTimer=null;b.target&&a.select(b.target,null,!0,{focus:!0,append:!1,expand:!0,delay:10})},10))}));this.addHandle("update",this.collection._on("update",function(b){var c=b.target,e=a.toNode(b);"update"===b.type&&"value"===b.property&&a.mark(e,"successBlock",c)}));this.subscribe(m.EVENTS.ON_RUN_BLOCK,function(b){a.mark(a.toNode(b),"activeBlock",b.target,b.timeout)});this.subscribe(m.EVENTS.ON_RUN_BLOCK_FAILED,
function(b){a.mark(a.toNode(b),"failedBlock",b.target,b.timeout)});this.subscribe(m.EVENTS.ON_RUN_BLOCK_SUCCESS,function(b){a.mark(a.toNode(b),"successBlock",b.target,b.timeout)});this._on("selectionChanged",this.onSelectionChanged,this);this.publish("ON_BLOCK_GRID",{view:this});this.setRenderer(this.selectedRenderer,!1)}},removeRow:function(a,b){(a=a.element||a)&&a.hightlightTimer&&!1===b&&q(a);return this.inherited(arguments)},mark:function(a,b,c,e){if(a&&this.isRendered(c)&&(c=c||{},!1!==this._highlight&&
!0!==c.__ignoreChangeMark&&(e=0==e?!1:this.highlightDelay||500,a[0]._currentHighlightClass!==b))){delete a[0]._currentHighlightClass;a[0]._currentHighlightClass=null;a[0]._currentHighlightClass=b;var g=c.getScope().id;a.removeClass("failedBlock successBlock activeBlock");a.addClass(b);c.setStatusClass(g,{className:b,delay:e});q(a[0]);!1!==e&&0<e&&(a[0].hightlightTimer=setTimeout(function(){a.removeClass(b);a.removeClass("failedBlock successBlock activeBlock");c.setStatusClass(g,null);delete a[0]._currentHighlightClass;
a[0]._currentHighlightClass=null},e))}},toNode:function(a){if(a=a.target||a)if(a=this.row(a))if(a=a.element)return $(a);return null}};n=n("xblox.views.BlockGrid",d,u);n.IMPLEMENTATION=u;return n})},"xcf/model/DefaultDevice":function(){define(["xide/utils","xide/types","xcf/types/Types"],function(n,m,k){return function(h,d,b){b=k.DEVICE_PROPERTY;var c=m.ECIType,g=m.PROTOCOL;return[n.createCI("Title",c.STRING,"My New Device",{group:"Common"}),n.createCI(b.CF_DEVICE_ENABLED,c.BOOL,!1,{group:"Common"}),
n.createCI(b.CF_DEVICE_HOST,c.STRING,"Search",{group:"Network"}),n.createCI(b.CF_DEVICE_ID,c.STRING,n.createUUID(),{group:"Network",visible:!1}),n.createCI(b.CF_DEVICE_PROTOCOL,c.ENUMERATION,"tcp",{group:"Network",options:[{label:"TCP",value:g.TCP},{label:"UDP",value:g.UDP},{label:"Driver",value:g.DRIVER},{label:"SSH",value:g.SSH},{label:"Serial",value:g.SERIAL},{label:"MQTT",value:g.MQTT}]}),n.createCI(b.CF_DEVICE_PORT,c.STRING,"23",{group:"Network"}),n.createCI(b.CF_DEVICE_DRIVER_OPTIONS,c.FLAGS,
0,{group:"Driver",data:[{value:2,label:"Runs Server Side"},{value:4,label:"Show Debug Messages"},{value:16,label:"Server"}]}),n.createCI(b.CF_DEVICE_OPTIONS,c.STRUCTURE,"{}",{group:"Network"}),n.createCI(b.CF_DEVICE_DRIVER,c.ENUMERATION,"auto-create",{group:"Common",enumType:"Driver",options:[].concat(h.getDriverManager().getDriversAsEnumeration(null,d))})]}})},"xaction/Action":function(){define("dcl/dcl xide/model/Base xide/types xide/utils/ObjectUtils xide/utils xide/mixins/EventedMixin xide/cache/Circular".split(" "),
function(n,m,k,h,d,b,c){d.mixin(k,{ACTION_VISIBILITY:{MAIN_MENU:"MAIN_MENU",CONTEXT_MENU:"CONTEXT_MENU",QUICK_LAUNCH:"QUICK_LAUNCH",ACTION_TOOLBAR:"ACTION_TOOLBAR",PROPERTY_VIEW:"PROPERTY_VIEW",RIBBON:"RIBBON",widgetArgs:null,factory:function(){var b=arguments[1]||d.clone(k.ACTION_VISIBILITY),a=arguments;if(0<a[0].length&&_.isNumber(a[0][0])){var c=a[0],g=0;_.each(b,function(a,e){"function"!==typeof b[e]&&g<c.length&&(b[e+"_val"]=c[g]);g++})}if(_.isString(a[0][0])){if(!0===a[0][2])d.mixin(b[a[0][0]+
"_val"],a[0][2]);else return b[a[0][0]+"_val"]=a[0][1],b;return a[1]}return b}}});k.ACTION_VISIBILITY_ALL="ACTION_VISIBILITY_ALL";var g=n([m.dcl,b.dcl],{declaredClass:"xaction/Action",disabled:!1,destroy:function(){},enabled:!0,object:null,show:!0,group:"",types:"",command:null,icon:"fa-play",event:null,handler:null,tab:null,visibility_:null,value:null,setVisibility:function(){if(2==arguments.length&&_.isString(arguments[0])&&arguments[0]==k.ACTION_VISIBILITY_ALL){var b=arguments[1],a=k.ACTION_VISIBILITY,
c=this;[a.MAIN_MENU,a.ACTION_TOOLBAR,a.CONTEXT_MENU,a.RIBBON].forEach(function(a){c.setVisibility(a,d.cloneKeys(b,!1))});return this}a=_.isArray(arguments[0])?arguments[0]:arguments;this.visibility_=k.ACTION_VISIBILITY.factory(a,this.visibility_);return this},getVisibility:function(b){this.visibility_||this.setVisibility(k.ACTION_VISIBILITY_ALL,{});return this.visibility_?(null==this.visibility_[b+"_val"]&&(this.visibility_[b+"_val"]={vis:b}),this.visibility_[b+"_val"]):{}},shouldDestroyWidget:function(b,
a,c){b=null!=this.getVisibility?this.getVisibility(b):null;var e=!0;b&&b.permanent&&(e=!(_.isFunction(b.permanent)?b.permanent(this,a,c):b.permanent));return e}});g.create=function(b,a,c,q,h,k,r,v,m,n,z){v=null;v=new g({permanent:q,command:c,icon:a,label:b,owner:this,types:k,operation:h,group:r,handler:n,title:b});d.mixin(v,z);return v};g.createDefault=function(b,a,c,d,h,k){return g.create(b,a,c,!1,null,null,d||"nogroup",null,!1,h,k)};return g})},"xide/views/ActionDialog":function(){define(["dojo/_base/declare"],
function(n){return n("noob",null,{})})},"davinci/ve/ObjectWidget":function(){define(["dojo/_base/declare","dojo/dom-attr","./_Widget"],function(n,m,k){return n("davinci.ve.ObjectWidget",k,{isObjectWidget:!0,constructor:function(h,d,b,c,g){"string"===typeof b&&(m.set(d,"data-dojo-type",b),g&&g.addAttribute("data-dojo-type",b))},postCreate:function(){var h=this._params.jsId,d=require("davinci/ve/widget")._dojo(this.domNode),b;if(h){if(m.set(this.domNode,"jsId",h),b=this.getObjectType())if(b=d.getObject(b.replace(/\//g,
".")))if(b=b.markupFactory?b.markupFactory(this._params,this.domNode,b):b.prototype&&b.prototype.markupFactory?b.prototype.markupFactory(this._params,this.domNode,b):new b(this._params,this.domNode))b._edit_object_id=h,d.setObject(h,b)}else if(h=this.getObjectId())if(b=d.getObject(h))b._edit_object_id=h},getObjectType:function(){var h=this.domNode,h=m.get(h,"data-dojo-type")||m.get(h,"dojoType");return h=h.replace(/\./g,"/")},getObjectId:function(){return m.get(this.domNode,"jsId")},_getChildren:function(){return[]}})})},
"davinci/js/JSModel":function(){define(["dojo/_base/declare","davinci/model/Model"],function(n,m){davinci.js||(davinci.js={});return n("davinci.js.JSModel",m,{})})},"xfile/views/FileSize":function(){define(["dcl/dcl","xide/_base/_Widget"],function(n,m){return n(m,{_find:function(k,h){var d=_.find(h,{path:k}),b=this;if(d&&d.children&&d.children){var c=b._find(k,d.children);c&&(d=c)}d||_.each(h,function(c){var g=null;c.children&&c.children.length&&(g=b._find(k,c.children))&&(d=g)});return d},select:function(k){(k=
this._find(k,this.d3Nodes))&&this.highlight(k)},direction:"left",templateString:'\x3cdiv class\x3d"sizeDisplay tabbable tabs-${!direction}" attachTo\x3d"containerNode" style\x3d"width: inherit;height: 100%;padding: 4px"\x3e\x3cul class\x3d"nav nav-tabs tabs-right" role\x3d"tablist"\x3e\x3cli class\x3d"active"\x3e\x3ca href\x3d"#_tab-content2_${!id}" data-toggle\x3d"tab"\x3eOverall\x3c/a\x3e\x3c/li\x3e\x3cli\x3e\x3ca href\x3d"#_tab-content1_${!id}" data-toggle\x3d"tab"\x3eBy Type\x3c/a\x3e\x3c/li\x3e\x3c/ul\x3e\x3cdiv class\x3d"body tab-content"\x3e\x3cdiv attachTo\x3d"tab2" id\x3d"_tab-content2_${!id}" class\x3d"tab-pane active clearfix"\x3e\x3cdiv class\x3d"chart1" attachTo\x3d"chart1" style\x3d"width: 100%;height: inherit;min-height:250px"\x3e\x3cdiv class\x3d"" style\x3d"" id\x3d"detailInfo"\x3e\x3c/div\x3e\x3cdiv class\x3d"widget" id\x3d"explanation" \x3e\x3cspan id\x3d"percentage"\x3e\x3c/span\x3e\x3cbr/\x3e\x3cspan id\x3d"percentageDetail"\x3e\x3c/span\x3e\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e\x3cdiv attachTo\x3d"tab1" id\x3d"_tab-content1_${!id}" class\x3d"tab-pane"\x3e\x3csvg class\x3d"chart2" style\x3d"width: 100%;height: inherit;min-height:250px"\x3e\x3c/svg\x3e\x3cdiv id\x3d"tooltip" class\x3d"hidden"\x3e\x3cspan id\x3d"chart2Per1"\x3eA\x3c/span\x3e \x3cbr\x3e\x3cspan id\x3d"chart2Per2"\x3e100\x3c/span\x3e\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e',
data:null,owner:self,vis:null,d3Nodes:null,colors:{dir:"#5687d1",jpeg:"#9b59b6",jpg:"#9b59b6",png:"#9b59b6",gif:"#9b59b6",psd:"#9b59b6",mp3:"#3498db",wav:"#3498db",wma:"#3498db",wmv:"#2ecc71","3gp":"#2ecc71",mp4:"#2ecc71",plv:"#2ecc71",mpg:"#2ecc71",mpeg:"#2ecc71",mkv:"#2ecc71",rm:"#2ecc71",rmvb:"#2ecc71",mov:"#2ecc71",doc:"#1abc9c",xls:"#1abc9c",ppt:"#1abc9c",docx:"#1abc9c",xlsx:"#1abc9c",pptx:"#1abc9c",pages:"#e74c3c",key:"#e74c3c",numbers:"#e74c3c",pdf:"#7b615c",epub:"#7b615c",c:"#f1c40f",cpp:"#f1c40f",
h:"#f1c40f",html:"#f1c40f",js:"#f1c40f",css:"#f1c40f",pl:"#f1c40f",py:"#f1c40f",php:"#f1c40f",sql:"#f1c40f",csv:"#de783b",odp:"#de783b",gz:"#6ab975",tar:"#6ab975",rar:"#6ab975",zip:"#6ab975","7z":"#6ab975","default":"#34495e"},totalSize:0,result:{},overallSize:0,buildHierarchy:function(k){for(var h={name:"root",children:[]},d=0;d<k.length;d++){var b=k[d][0],c=+k[d][1];if(!isNaN(c))for(var g=b.split("/"),p=h,a=0;a<g.length;a++){var e=p.children,q=g[a],u;if(a+1<g.length){for(var p=!1,w=0;w<e.length;w++)if(e[w].name==
q){u=e[w];p=!0;break}p||(u={name:q,type:"dir",children:[],path:b},e.push(u));p=u}else u=q.split(".").pop(),7>u.length&&(this.result[u]=u in this.result?this.result[u]+c:c),u={name:q,type:u,size:c,path:b},this.overallSize+=c,e.push(u)}}return h},bytesToSize:function(k){var h=["Bytes","KB","MB","GB","TB"];if(0==k)return"n/a";var d=parseInt(Math.floor(Math.log(k)/Math.log(1024)));return 0==d?k+" "+h[d]:(k/Math.pow(1024,d)).toFixed(1)+" "+h[d]},getAncestors:function(k){for(var h=[];k.parent;)h.unshift(k),
k=k.parent;return h},highlight:function(k){if(k){var h=(100*k.value/this.totalSize).toPrecision(3),d=h+"%";.1>h&&(d="\x3c 0.1%");var b=this.bytesToSize(k.value)+"/"+this.bytesToSize(this.totalSize),h=this.colors;d3.select("#percentage").text(d);d3.select("#percentageDetail").text(b);d3.select("#explanation").style("visibility","");var c=this.getAncestors(k);k=c.length;d="";for(b=0;b<k;b++)var g=c[b].type,d="dir"==g?d+('\x3cspan style\x3d"color:'+h[g]+'"\x3e'+c[b].name+"/\x3c/span\x3e"):d+('\x3cspan style\x3d"color:'+
h[g]+'"\x3e'+c[b].name+"\x3c/span\x3e");$("#detailInfo").html(d);d3.selectAll("path").style("opacity",.3);this.vis.selectAll("path").filter(function(b){return 0<=c.indexOf(b)}).style("opacity",1)}else console.error("cant find "+path)},createChart1:function(k,h,d,b,c){function g(b){var c=(100*b.value/a.totalSize).toPrecision(3),e=c+"%";.1>c&&(e="\x3c 0.1%");c=a.bytesToSize(b.value)+"/"+a.bytesToSize(a.totalSize);d3.select("#percentage").text(e);d3.select("#percentageDetail").text(c);d3.select("#explanation").style("visibility",
"");var g=a.getAncestors(b);b=g.length;e="";for(c=0;c<b;c++)var d=g[c].type,e="dir"==d?e+('\x3cspan style\x3d"color:'+p[d]+'"\x3e'+g[c].name+"/\x3c/span\x3e"):e+('\x3cspan style\x3d"color:'+p[d]+'"\x3e'+g[c].name+"\x3c/span\x3e");$("#detailInfo").html(e);d3.selectAll("path").style("opacity",.3);h.selectAll("path").filter(function(a){return 0<=g.indexOf(a)}).style("opacity",1)}h.append("svg:circle").attr("r",c).style("opacity",0);var p=this.colors,a=this;d=d3.layout.partition(c).size([2*Math.PI,c*
c]).value(function(a){return a.size}).nodes(k,c).filter(function(a){return.005<a.dx});b=d3.svg.arc().startAngle(function(a){return a.x}).endAngle(function(a){return a.x+a.dx}).innerRadius(function(a){return Math.sqrt(a.y)}).outerRadius(function(a){return Math.sqrt(a.y+a.dy)});k=h.data([k]).selectAll("path").data(d).enter().append("svg:path").attr("display",function(a){return a.depth?null:"none"}).attr("d",b).attr("fill-rule","evenodd").style("fill",function(a){return p[a.type]?p[a.type]:p["default"]}).style("opacity",
1).on("mouseover",g);d3.select("#container").on("mouseleave",function(a){d3.select("#trail").style("visibility","hidden");d3.selectAll("path").on("mouseover",null);d3.selectAll("path").transition().duration(1E3).style("opacity",1).each("end",function(){d3.select(this).on("mouseover",g)});d3.select("#explanation").transition().duration(1E3).style("visibility","hidden");$("#detailInfo").html("")});this.totalSize=k.node().__data__.value;return d},render:function(k){var h=$(this.tab2),d=h.height()-50,
h=h.height()-50;400>d&&(d=400);300>h&&(h=300);var b=h,c=d3.select(this.chart1).append("svg:svg").attr("width",d).attr("height",h).append("svg:g").attr("id","container").attr("transform","translate("+h/2+","+h/2+")"),d=this.createChart1(k,c,d,h,b/4,c);k=[];for(var g in this.result)if(b=this.result[g]/this.overallSize,!(.001>b)){var p=this.bytesToSize(this.result[g])+"/"+this.bytesToSize(this.overallSize);k.push({filetype:g,usage:b,detail:p})}this.vis=c;this.d3Nodes=d;d=$(this.tab1).width();400>d&&
(d=400);this.createChart2(k,d,h-100)},createChart2:function(k,h,d){var b=d3.scale.ordinal().rangeRoundBands([0,h],.1),c=d3.scale.linear().range([d,0]),g=d3.svg.axis().scale(b).orient("bottom"),p=d3.svg.axis().scale(c).orient("left"),a=this.colors;h=d3.select(this.tab1.children[0]).attr("width",h+40+30).attr("height",d+20+30).append("g").attr("transform","translate(40,20)");b.domain(k.map(function(a){return a.filetype}));c.domain([0,d3.max(k,function(a){return a.usage})]);h.append("g").attr("class",
"x axis").attr("transform","translate(0,"+d+")").call(g);h.append("g").attr("class","y axis").call(p);h.selectAll(".bar").data(k).enter().append("rect").attr("class","bar").attr("id",function(a){return"bar"+a.filetype}).attr("x",function(a){return b(a.filetype)}).attr("y",function(a){return c(a.usage)}).attr("height",function(a){return d-c(a.usage)}).attr("width",b.rangeBand()).attr("fill",function(b){return a[b.filetype]?a[b.filetype]:a["default"]}).on("mouseover",function(a){d3.select(this).transition().duration(50).attr("fill",
"#7f8c8d");var c=parseFloat(d3.select(this).attr("x"))+b.rangeBand()/2,e=parseFloat(d3.select(this).attr("y"))/2+d/2,g=parseFloat(100*a.usage).toFixed(2)+"%("+a.filetype+")";d3.select("#tooltip").style("left",c+"px").style("top",e+"px").select("#chart2Per2").text(a.detail);d3.select("#chart2Per1").text(g);d3.select("#tooltip").classed("hidden",!1)}).on("mouseout",function(){d3.select(this).transition().delay(100).duration(250).attr("fill",function(b){return a[b.filetype]?a[b.filetype]:a["default"]});
d3.select("#tooltip").classed("hidden",!0)})},startup:function(){if(this.owner){var k=this.owner,h=k.getRows(),d=[];_.each(h,function(b){d.push([b.path.replace("./",""),""+b.sizeBytes])});h=this.buildHierarchy(d);this.render(h);var b=this;k._on("selectionChanged",function(c){if("clear"!=c.why){c=(c=c.selection)?c[0]:null;var g=k.row(c),g=g?g.element:null;c&&g&&(c=c.path.replace("./",""),b.d3Nodes&&b.select(c))}})}}})})},"dojo/_base/sniff":function(){define(["./kernel","./lang","../sniff"],function(n,
m,k){n._name="browser";m.mixin(n,{isBrowser:!0,isFF:k("ff"),isIE:k("ie"),isKhtml:k("khtml"),isWebKit:k("webkit"),isMozilla:k("mozilla"),isMoz:k("mozilla"),isOpera:k("opera"),isSafari:k("safari"),isChrome:k("chrome"),isMac:k("mac"),isIos:k("ios"),isAndroid:k("android"),isWii:k("wii"),isQuirks:k("quirks"),isAir:k("air")});return k})},"xide/views/JsonEditor":function(){define("dcl/dcl xide/types xide/utils dojo/Deferred xide/widgets/JSONDualEditorWidget xide/editor/Base".split(" "),function(n,m,k,h,
d,b){return n([b],{widget:null,createEditor:function(b,g){this.widget=k.addWidget(d,{userData:{value:g},dfd:this.dfd,item:this.item},null,this.domNode,!1);this.add(this.widget,null,!1);this.widget.startup()},getActionStore:function(){return this.widget.editorWidget.aceEditor.getActionStore()},startup:function(){this.dfd=new h;var b=this;this.dfd.then(function(){var c=b.widget.editorWidget,d=c.aceEditor.runAction;c.aceEditor.runAction=function(a){if(a.command===m.ACTION.SAVE){var e=b.widget.getValue();
b.saveContent(e)}return d.apply(c.aceEditor,[a])};b.ctx&&b.registerView&&b.ctx.getWindowManager().registerView(b)});return this.dfd}})})},"xide/views/TextEditor":function(){define("dojo/_base/declare dojo/_base/lang dijit/_Widget dojo/dom-construct dojo/dom-style dojo/has xide/types xide/factory".split(" "),function(n,m,k,h,d,b,c,g){var p=null,a=function(){function a(a,b){this.$u=a;this.$doc=b}if(p)return p;"use strict";var b=ace.require,c=b("ace/lib/oop"),g=b("ace/lib/lang"),d=b("ace/lib/event_emitter").EventEmitter,
h=b("ace/editor").Editor,k=b("ace/virtual_renderer").VirtualRenderer,m=b("ace/edit_session").EditSession,n=b("ace/undomanager").UndoManager;b("ace/keyboard/hash_handler");b=function(a,b,c){this.BELOW=1;this.BESIDE=0;this.$container=a;this.$theme=b;this.$splits=0;this.$editorCSS="";this.$editors=[];this.$orientation=this.BESIDE;this.setSplits(c||1);this.$cEditor=this.$editors[0];this.on("focus",function(a){this.$cEditor=a}.bind(this))};(function(){c.implement(this,d);this.$createEditor=function(){var a=
document.createElement("div");a.className=this.$editorCSS;a.style.cssText="position: absolute; top:0px; bottom:0px";this.$container.appendChild(a);var b=new h(new k(a,this.$theme));b.on("focus",function(){this._emit("focus",b)}.bind(this));this.$editors.push(b);b.session.setUndoManager(new n);b.setFontSize(this.$fontSize);return b};this.setSplits=function(a){var b;if(1>a)throw"The number of splits have to be \x3e 0!";if(a!=this.$splits){if(a>this.$splits){for(;this.$splits<this.$editors.length&&this.$splits<
a;)b=this.$editors[this.$splits],this.$container.appendChild(b.container),b.setFontSize(this.$fontSize),this.$splits++;for(;this.$splits<a;)this.$createEditor(),this.$splits++}else for(;this.$splits>a;)b=this.$editors[this.$splits-1],this.$container.removeChild(b.container),this.$splits--;this.resize()}};this.getSplits=function(){return this.$splits};this.getEditor=function(a){return this.$editors[a]};this.getCurrentEditor=function(){return this.$cEditor};this.focus=function(){this.$cEditor.focus()};
this.blur=function(){this.$cEditor.blur()};this.setSessionOption=function(a,b){this.$editors.forEach(function(c){c=c.session;"mode"==a&&c.setMode(b)})};this.setTheme=function(a){this.$editors.forEach(function(b){b.setTheme(a)})};this.setKeyboardHandler=function(a){this.$editors.forEach(function(b){b.setKeyboardHandler(a)})};this.forEach=function(a,b){this.$editors.forEach(a,b)};this.$fontSize="";this.setFontSize=function(a){this.$fontSize=a;this.forEach(function(b){b.setFontSize(a)})};this.$cloneSession=
function(b){var c=new m(b.getDocument(),b.getMode()),e=b.getUndoManager();e&&(e=new a(e,c),c.setUndoManager(e));c.$informUndoManager=g.delayedCall(function(){c.$deltas=[]});c.setTabSize(b.getTabSize());c.setUseSoftTabs(b.getUseSoftTabs());c.setOverwrite(b.getOverwrite());c.setBreakpoints(b.getBreakpoints());c.setUseWrapMode(b.getUseWrapMode());c.setUseWorker(b.getUseWorker());c.setWrapLimitRange(b.$wrapLimitRange.min,b.$wrapLimitRange.max);c.$foldData=b.$cloneFoldData();return c};this.setSession=
function(a,b){b=null==b?this.$cEditor:this.$editors[b];this.$editors.some(function(b){return b.session===a})&&(a=this.$cloneSession(a));b.setSession(a);return a};this.getOrientation=function(){return this.$orientation};this.setOrientation=function(a){this.$orientation!=a&&(this.$orientation=a,this.resize())};this.resize=function(){var a=this.$container.clientWidth,b=this.$container.clientHeight,c;if(this.$orientation==this.BESIDE){a/=this.$splits;this.diffGutter&&(a-=60/this.$splits);for(var e=0;e<
this.$splits;e++)c=this.$editors[e],c.container.style.width=a+"px",c.container.style.top="0px",c.container.style.left=e*a+"px",1==e&&this.diffGutter&&(c.container.style.left=60+e*a+"px",this.diffGutter.style.left=e*a+"px"),c.container.style.height=b+"px",c.resize()}else for(b/=this.$splits,e=0;e<this.$splits;e++)c=this.$editors[e],c.container.style.width=a+"px",c.container.style.top=e*b+"px",c.container.style.left="0px",c.container.style.height=b+"px",c.resize()}}).call(b.prototype);(function(){this.execute=
function(a){this.$u.execute(a)};this.undo=function(){var a=this.$u.undo(!0);a&&this.$doc.selection.setSelectionRange(a)};this.redo=function(){var a=this.$u.redo(!0);a&&this.$doc.selection.setSelectionRange(a)};this.reset=function(){this.$u.reset()};this.hasUndo=function(){return this.$u.hasUndo()};this.hasRedo=function(){return this.$u.hasRedo()}}).call(a.prototype);return p=b};return n("xide.views.TextEditor",[k],{_aceConfig:null,_loadedModes:{},focus:function(){!1!==this.autoFocus&&this.editor&&
(this.editor.resize(),this.editor.renderer.updateFull(),this.editor.focus())},addAutoCompleter:function(a){this.getEditor();ace.require("ace/ext/language_tools").addCompleter({getCompletions:function(b,c,e,g,d){0===g.length?d(null,[]):a?d(null,a.map(function(a){return{name:a.value,value:a.word,meta:a.meta}})):d(null,[])}})},onEditorReady:function(){var a=this;this.getEditor().commands.addCommands([{name:"gotoline",bindKey:{win:"Ctrl-L",mac:"Command-L"},exec:function(a,b){"object"==typeof b?(b=this.name+
" "+a.getCursorPosition().row,a.cmdLine.setValue(b,1),a.cmdLine.focus()):(b=parseInt(b,10),isNaN(b)||a.gotoLine(b))},readOnly:!0},{name:"snippet",bindKey:{win:"Alt-C",mac:"Command-Alt-C"},exec:function(a,b){"object"==typeof b?(a.cmdLine.setValue("snippet ",1),a.cmdLine.focus()):(b=snippetManager.getSnippetByName(b,a))&&snippetManager.insertSnippet(a,b.content)},readOnly:!0},{name:"increaseFontSize",bindKey:"Ctrl-+",exec:function(b){b.setFontSize(b.getFontSize()+1);a.onPrefsChanged()}},{name:"decreaseFontSize",
bindKey:"Ctrl+-",exec:function(b){b.setFontSize(b.getFontSize()-1);a.onPrefsChanged()}},{name:"resetFontSize",bindKey:"Ctrl+0",exec:function(a){a.setFontSize(12)}}]);this.focus()},onDidChange:function(){},setOptions:function(a){a=this.getEditor();var b=this;this.editor.session.setUseWorker(!0);a.setOptions({enableBasicAutocompletion:!0,enableSnippets:!0,enableLiveAutocompletion:!0});a.getSelectedText=function(){return this.session.getTextRange(this.getSelectionRange())};a.on("change",function(){b.onDidChange(arguments)});
this.onEditorReady()},getEditor:function(){return this.editor},split:null,buildRendering:function(){this.inherited("buildRendering",arguments);var b=h.create("div");d.set(b,{padding:"0",margin:"0",className:"editor-ace ace_editor ace-codebox-dark ace_dark"});this.getEditor();var c=ace.require("ace/config");try{var g=new (a())(b,null,1);this.split=g;this._aceConfig=c;c.init();ace.require("ace/ext/language_tools");this.editor=g.getEditor(0);this.editorSession=this.editor.getSession();this.domNode=b}catch(w){debugger}},
set:function(a,b){var c=this;if("value"==a)this.editorSession.setValue(b);else if("theme"==a)"string"==typeof b&&(b="ace/theme/"+b),this.editor.setTheme(b),this.split&&this.split.setTheme(b);else if("mode"==a)try{ace.require(["ace/mode/"+b],function(a){a&&a.Mode&&c.split.$editors.forEach(function(b){b.session.setMode(new a.Mode)})})}catch(w){console.error("ace mode failed : "+b)}else"readOnly"==a?this.editor.setReadOnly(b):"tabSize"==a?this.editorSession.setTabSize(b):"softTabs"==a?this.editorSession.setUseSoftTabs(b):
"wordWrap"==a?this.editorSession.setUseWrapMode(b):"printMargin"==a?this.editor.renderer.setPrintMarginColumn(b):"showPrintMargin"==a?this.editor.setShowPrintMargin(b):"highlightActiveLine"==a?this.editor.setHighlightActiveLine(b):"fontSize"==a?d.set(this.domNode,a,b):"showIntentGuides"==a?this.editor.setDisplayIndentGuides(b):"elasticTabstops"==a?this.editor.setOption("useElasticTabstops",b):"useIncrementalSearch"==a?this.editor.setOption("useIncrementalSearch",b):"showGutter"==a&&this.editor.renderer.setShowGutter(b);
return this.inherited("set",arguments)},get:function(a){try{return"value"==a?this.split?this.split.$cEditor.session.getValue():this.editorSession.getValue():"readOnly"==a?this.editor.getReadOnly():this.inherited("get",arguments)}catch(q){console.error(q)}},startup:function(){},resize:function(a){var b=this;b.split&&b.split.resize();this._resizer=setTimeout(m.hitch(b,function(){delete b._resizer;b.split&&b.split.resize();b.editor.resize()}),10)},layout:function(){this._layoutMode=!0},destroy:function(){this._resizer&&
(clearTimeout(this._resizer),delete this._resizer);return this.inherited("destroy",arguments)}})})},"davinci/model/resource/Folder":function(){define(["dojo/_base/declare","dojo/_base/xhr","davinci/Runtime","davinci/model/resource/Resource","davinci/model/resource/File"],function(n,m,k,h,d){var b=n("davinci.model.resource.Folder",h,{serviceClass:"XIDE_Directory_Service",workspaceMount:"/ws/",constructor:function(b,g){this.elementType="Folder";this.name=b;this.parent=g},reload:function(){this._isLoaded=
!1},createResource:function(c,g,p,a){var e;null!=c?e=g?new b(c,this):new d(c,this):(e=this,g="Folder"==this.elementType);var q=this;if(!p){p=""+this.getPath();"."==p&&(p=""+this.workspaceMount);p=p.replace("./",this.workspaceMount);p=this.serviceClass;g=g?"mkDir":"mkFile";if(!this.serviceObject[p][g])return console.error("_createResource : server doesnt support :"+g),this;this.serviceObject[p][g](this.workspaceMount,e.getPath()).then(function(b){if(!0===b&&null!=c||"The file already exists"===b)return q.children.push(e),
delete e.libraryId,delete e.libVersion,delete e._readOnly,dojo.publish("/davinci/resource/resourceChanged",["created",e]),a&&a(e),e;if("OK"!=b)throw"Folder.createResource failed: name\x3d"+c+"response\x3d"+b;delete e.libraryId;delete e.libVersion;delete e._readOnly;a(q);if(!a)debugger})}},getChildren2:function(b,g){if(this._isLoaded)b(this.children);else if(this._loadingCallbacks)this._loadingCallbacks.push(b);else{this._loadingCallbacks=[];this._loadingCallbacks.push(b);b=""+this.getPath();"."==
b&&(b="/ws/");var c=this.serviceClass;if(!this.serviceObject)debugger;if(!this.serviceObject[c])debugger;this.serviceObject.sync=!0;this.serviceObject[c].ls(this.workspaceMount,b).then(function(a){this.setChildrenSync(a);dojo.forEach(this._loadingCallbacks,function(a){a(this.children)},this);delete this._loadingCallbacks}.bind(this),g)}},getChildren:function(b,g){if(this._isLoaded)b.call(null,this.children);else if(this._loading)this._loading.then(function(){b.call(null,this.children)}.bind(this),
g);else{console.error("list files : "+this.getPath());var c=""+this.getPath();"."==c&&(c="/ws/");c=c.replace("./",this.workspaceMount);this.serviceObject[this.serviceClass].ls(c).then(function(a){this.setChildren(a);this._isLoaded=!0;b.call(null,this.children);delete this._loading}.bind(this),g)}},getChildrenSync:function(b,g){this._isLoaded?b(this.children):this._loadingCallbacks?this._loadingCallbacks.push(b):(this._loadingCallbacks=[],this._loadingCallbacks.push(b),console.error("list files : "+
this.getPath()),b=this.getPath(),"./project1"===b&&console.error("gotcha"),b=""+b,"."==b&&(b="/ws/"),b=b.replace("./","/ws/"),k.serverJSONRequest({url:"cmd/listFiles.php",content:{path:this.getPath(),basePath:"./"},sync:g,load:dojo.hitch(this,function(b,a){this.setChildrenSync(b);dojo.forEach(this._loadingCallbacks,function(a){a(this.children)},this);delete this._loadingCallbacks})}))},setChildren:function(b){this.children=[];this._appendFiles(b)},setChildrenSync:function(b){this.children=[];this._appendFiles(b,
!0)},_appendFiles:function(c,g){c.forEach(function(c){var a=g?this.getChildSync(c.name):this._getChild(c.name),e=null!=a;c.isDir||c.isLib?(e||(a=new b(c.name,this)),c.isLib&&(a.isLibrary=!0)):e||(a=new d(c.name,this));a.link=c.link;a.isNew=c.isNew;a._readOnly=c.readOnly;a.setDirty(c.isDirty);c.libraryId&&(a.libraryId=c.libraryId,a.libVersion=c.libVersion);e||this.children.push(a)},this);this._isLoaded=!0},getMarkers:function(b,g){var c=[];this.visit({visit:function(a){if("File"==a.elementType)markers=
a.getMarkers(b),c.concat(markers);else if(!g)return!0}},!0);return c},getChildSync:function(b){if(!this._isLoaded||1>this.children.length)this._isLoaded=!1,this.getChildrenSync(function(b){this.children=b},!0);return this._getChild(b)},getChild:function(b){if(!this._isLoaded||1>this.children.length)this._isLoaded=!1,this.getChildren2(function(b){this.children=b},!0);return this._getChild(b)},_getChild:function(b){if(!this.__CASE_SENSITIVE){if(!b||null==b.toLowerCase)debugger;b=b.toLowerCase()}var c;
this.children.some(function(g){var a=g.getName();this.__CASE_SENSITIVE||(a=a.toLowerCase());(a=a==b)&&(c=g);return a});return c}});return b})},"dijit/form/_AutoCompleterMixin":function(){define("dojo/aspect dojo/_base/declare dojo/dom-attr dojo/keys dojo/_base/lang dojo/query dojo/regexp dojo/sniff ./DataList ./_TextBoxMixin ./_SearchMixin".split(" "),function(n,m,k,h,d,b,c,g,p,a,e){return m("dijit.form._AutoCompleterMixin",e,{item:null,autoComplete:!0,highlightMatch:"first",labelAttr:"",labelType:"text",
maxHeight:-1,_stopClickEvents:!1,_getCaretPos:function(a){var b=0;if("number"==typeof a.selectionStart)b=a.selectionStart;else if(g("ie")){var c=a.ownerDocument.selection.createRange().duplicate();a=a.createTextRange();c.move("character",0);a.move("character",0);try{a.setEndPoint("EndToEnd",c),b=String(a.text).replace(/\r/g,"").length}catch(r){}}return b},_setCaretPos:function(b,c){c=parseInt(c);a.selectInputText(b,c,c)},_setDisabledAttr:function(a){this.domNode&&(this.inherited(arguments),this.domNode.setAttribute("aria-disabled",
a?"true":"false"))},_onKey:function(a){if(!(32<=a.charCode)){var b=a.charCode||a.keyCode;if(b!=h.ALT&&b!=h.CTRL&&b!=h.META&&b!=h.SHIFT){var c=this.dropDown,e=null;this._abortQuery();this.inherited(arguments);if(!(a.altKey||a.ctrlKey||a.metaKey))switch(this._opened&&(e=c.getHighlightedOption()),b){case h.PAGE_DOWN:case h.DOWN_ARROW:case h.PAGE_UP:case h.UP_ARROW:this._opened&&this._announceOption(e);a.stopPropagation();a.preventDefault();break;case h.ENTER:if(e){if(e==c.nextButton){this._nextSearch(1);
a.stopPropagation();a.preventDefault();break}else if(e==c.previousButton){this._nextSearch(-1);a.stopPropagation();a.preventDefault();break}a.stopPropagation();a.preventDefault()}else this._setBlurValue(),this._setCaretPos(this.focusNode,this.focusNode.value.length);case h.TAB:b=this.get("displayedValue");if(c&&(b==c._messages.previousMessage||b==c._messages.nextMessage))break;e&&this._selectOption(e);case h.ESCAPE:this._opened&&(this._lastQuery=null,this.closeDropDown())}}}},_autoCompleteText:function(b){var c=
this.focusNode;a.selectInputText(c,c.value.length);var e=this.ignoreCase?"toLowerCase":"substr";0==b[e](0).indexOf(this.focusNode.value[e](0))?(e=this.autoComplete?this._getCaretPos(c):c.value.length,e+1>c.value.length&&(c.value=b,a.selectInputText(c,e))):(c.value=b,a.selectInputText(c))},_openResultList:function(a,b,c){var e=this.dropDown.getHighlightedOption();this.dropDown.clearResultList();a.length||0!=c.start?(this._nextSearch=this.dropDown.onPage=d.hitch(this,function(b){a.nextPage(-1!==b);
this.focus()}),this.dropDown.createOptions(a,c,d.hitch(this,"_getMenuLabelFromItem")),this._showResultList(),"direction"in c?(c.direction?this.dropDown.highlightFirstOption():c.direction||this.dropDown.highlightLastOption(),e&&this._announceOption(this.dropDown.getHighlightedOption())):!this.autoComplete||this._prev_key_backspace||/^[*]+$/.test(b[this.searchAttr].toString())||this._announceOption(this.dropDown.containerNode.firstChild.nextSibling)):this.closeDropDown()},_showResultList:function(){this.closeDropDown(!0);
this.openDropDown();this.domNode.setAttribute("aria-expanded","true")},loadDropDown:function(){this._startSearchAll()},isLoaded:function(){return!1},closeDropDown:function(){this._abortQuery();this._opened&&(this.inherited(arguments),this.domNode.setAttribute("aria-expanded","false"))},_setBlurValue:function(){var a=this.get("displayedValue"),b=this.dropDown;!b||a!=b._messages.previousMessage&&a!=b._messages.nextMessage?"undefined"==typeof this.item?(this.item=null,this.set("displayedValue",a)):(this.value!=
this._lastValueReported&&this._handleOnChange(this.value,!0),this._refreshState()):this._setValueAttr(this._lastValueReported,!0);this.focusNode.removeAttribute("aria-activedescendant")},_setItemAttr:function(a,b,c){var e="";a&&(c||(c=this.store._oldAPI?this.store.getValue(a,this.searchAttr):a[this.searchAttr]),e=this._getValueField()!=this.searchAttr?this.store.getIdentity(a):c);this.set("value",e,b,c,a)},_announceOption:function(a){if(a){var b;if(a==this.dropDown.nextButton||a==this.dropDown.previousButton)b=
a.innerHTML,this.item=void 0,this.value="";else{var c=this.dropDown.items[a.getAttribute("item")];b=(this.store._oldAPI?this.store.getValue(c,this.searchAttr):c[this.searchAttr]).toString();this.set("item",c,!1,b)}this.focusNode.value=this.focusNode.value.substring(0,this._lastInput.length);this.focusNode.setAttribute("aria-activedescendant",k.get(a,"id"));this._autoCompleteText(b)}},_selectOption:function(a){this.closeDropDown();a&&this._announceOption(a);this._setCaretPos(this.focusNode,this.focusNode.value.length);
this._handleOnChange(this.value,!0);this.focusNode.removeAttribute("aria-activedescendant")},_startSearchAll:function(){this._startSearch("")},_startSearchFromInput:function(){this.item=void 0;this.inherited(arguments)},_startSearch:function(a){if(!this.dropDown){var b=this.id+"_popup";this.dropDown=new (d.isString(this.dropDownClass)?d.getObject(this.dropDownClass,!1):this.dropDownClass)({onChange:d.hitch(this,this._selectOption),id:b,dir:this.dir,textDir:this.textDir})}this._lastInput=a;this.inherited(arguments)},
_getValueField:function(){return this.searchAttr},postMixInProperties:function(){this.inherited(arguments);if(!this.store&&this.srcNodeRef&&(this.store=new p({},this.srcNodeRef),!("value"in this.params))){var a=this.item=this.store.fetchSelectedItem();if(a){var b=this._getValueField();this.value=this.store._oldAPI?this.store.getValue(a,b):a[b]}}},postCreate:function(){var a=b('label[for\x3d"'+this.id+'"]');a.length&&(a[0].id||(a[0].id=this.id+"_label"),this.domNode.setAttribute("aria-labelledby",
a[0].id));this.inherited(arguments);n.after(this,"onSearch",d.hitch(this,"_openResultList"),!0)},_getMenuLabelFromItem:function(a){a=this.labelFunc(a,this.store);var b=this.labelType;"none"!=this.highlightMatch&&"text"==this.labelType&&this._lastInput&&(a=this.doHighlight(a,this._lastInput),b="html");return{html:"html"==b,label:a}},doHighlight:function(a,b){var e=(this.ignoreCase?"i":"")+("all"==this.highlightMatch?"g":""),g=this.queryExpr.indexOf("${0}");b=c.escapeString(b);return this._escapeHtml(a.replace(new RegExp((0==
g?"^":"")+"("+b+")"+(g==this.queryExpr.length-4?"$":""),e),"\uffff$1\uffff")).replace(/\uFFFF([^\uFFFF]+)\uFFFF/g,'\x3cspan class\x3d"dijitComboBoxHighlightMatch"\x3e$1\x3c/span\x3e')},_escapeHtml:function(a){return a=String(a).replace(/&/gm,"\x26amp;").replace(/</gm,"\x26lt;").replace(/>/gm,"\x26gt;").replace(/"/gm,"\x26quot;")},reset:function(){this.item=null;this.inherited(arguments)},labelFunc:function(a,b){return(b._oldAPI?b.getValue(a,this.labelAttr||this.searchAttr):a[this.labelAttr||this.searchAttr]).toString()},
_setValueAttr:function(a,b,c,e){this._set("item",e||null);null==a&&(a="");this.inherited(arguments)}})})},"dijit/lang/ComboBox":function(){define([],function(){return{previousMessage:"Previous choices",nextMessage:"More choices"}})},"xfile/types":function(){define(["xide/utils","xide/types","xide/types/Types","xaction/types"],function(n,m){m.registerCustomMimeIconExtension=function(h,d){m.customMimeIcons[h]=d};var k=m.ACTION;m.DEFAULT_FILE_GRID_PERMISSIONS=[k.EDIT,k.COPY,k.CLOSE,k.MOVE,k.RENAME,k.DOWNLOAD,
k.RELOAD,k.DELETE,k.NEW_FILE,k.NEW_DIRECTORY,k.CLIPBOARD,k.LAYOUT,k.COLUMNS,k.SELECTION,k.PREVIEW,k.OPEN_IN,k.GO_UP,k.SEARCH,k.OPEN_IN_TAB,k.TOOLBAR,k.STATUSBAR,k.UPLOAD,k.SIZE_STATS,k.CONSOLE,k.HEADER,"File/Compress","File/New",k.CONTEXT_MENU,k.SOURCE,"File/OpenInOS"];m.FIELDS={SHOW_ISDIR:1602,SHOW_OWNER:1604,SHOW_MIME:1608,SHOW_SIZE:1616,SHOW_PERMISSIONS:1632,SHOW_TIME:1633,SHOW_FOLDER_SIZE:1634,SHOW_FOLDER_HIDDEN:1635,SHOW_TYPE:1636,SHOW_MEDIA_INFO:1637};m.FILE_PANEL_LAYOUT={TREE:1,LIST:2,THUMB:3,
PREVIEW:4,COVER:5,SPLIT_VERTICAL:6,SPLIT_HORIZONTAL:7,IMAGE_GRID:8};m.LAYOUT_PRESET={DUAL:1,SINGLE:2,BROWSER:3,PREVIEW:4,GALLERY:5,EDITOR:6};m.PANEL_OPTIONS={ALLOW_NEW_TABS:!0,ALLOW_MULTI_TAB:!1,ALLOW_INFO_VIEW:!0,ALLOW_LOG_VIEW:!0,ALLOW_CONTEXT_MENU:!0,ALLOW_LAYOUT_SELECTOR:!0,ALLOW_SOURCE_SELECTOR:!0,ALLOW_COLUMN_RESIZE:!0,ALLOW_COLUMN_REORDER:!0,ALLOW_COLUMN_HIDE:!0,ALLOW_ACTION_TOOLBAR:!0,ALLOW_MAIN_MENU:!0};m.FILE_PANEL_OPTIONS_LEFT={LAYOUT:2,AUTO_OPEN:!0};m.FILE_PANEL_OPTIONS_MAIN={LAYOUT:3,
AUTO_OPEN:!0};m.FILE_PANEL_OPTIONS_RIGHT={LAYOUT:3,AUTO_OPEN:!0};m.FILE_GRID_COLUMNS={NAME:"name",SIZE:"size",MODIFIED:"modified"};m.ACTION_TOOLBAR_MODE={SELF:"self"};n.mixin(m.ITEM_TYPE,{FILE:"BTFILE"});n.mixin(m.EVENTS,{STORE_CHANGED:"onStoreChange",BEFORE_STORE_CHANGE:"onBeforeStoreChange",STORE_REFRESHED:"onStoreRefreshed",ON_FILE_STORE_READY:"onFileStoreReady",ON_DID_OPEN_ITEM:"onDidOpenItem",ON_SHOW_PANEL:"onShowPanel",ITEM_SELECTED:"onItemSelected",ERROR:"fileOperationError",STATUS:"fileOperationStatus",
IMAGE_LOADED:"imageLoaded",IMAGE_ERROR:"imageError",RESIZE:"resize",ON_UPLOAD_BEGIN:"onUploadBegin",ON_UPLOAD_PROGRESS:"onUploadProgress",ON_UPLOAD_FINISH:"onUploadFinish",ON_UPLOAD_FAILED:"onUploadFailed",ON_CLIPBOARD_COPY:"onClipboardCopy",ON_CLIPBOARD_PASTE:"onClipboardPaste",ON_CLIPBOARD_CUT:"onClipboardCut",ON_CONTEXT_MENU_OPEN:"onContextMenuOpen",ON_PLUGIN_LOADED:"onPluginLoaded",ON_PLUGIN_READY:"onPluginReady",ON_MAIN_VIEW_READY:"onMainViewReady",ON_FILE_CONTENT_CHANGED:"onFileContentChanged",
ON_PANEL_CLOSED:"onPanelClosed",ON_PANEL_CREATED:"onPanelCreated",ON_COPY_BEGIN:"onCopyBegin",ON_COPY_END:"onCopyEnd",ON_DOWNLOAD_TO_BEGIN:"onDownloadToBegin",ON_DOWNLOAD_TO_END:"onDownloadToEnd",ON_DELETE_BEGIN:"onDeleteBegin",ON_DELETE_END:"onDeleteEnd",ON_MOVE_BEGIN:"onMoveBegin",ON_MOVE_END:"onMoveEnd",ON_COMPRESS_BEGIN:"onCompressBegin",ON_COMPRESS_END:"onCompressEnd",ON_SOURCE_MENU_OPEN:"onSourceMenuOpen",ON_MOUNT_DATA_READY:"onMountDataReady",ON_XFILE_READY:"onXFileReady",ON_CHANGE_PERSPECTIVE:"onChangePerspective",
ON_FILE_PROPERTIES_RENDERED:"onFilePropertiesRendered"});m.SELECTION_MODE={SINGLE:"single",MULTI:"multiple",EXTENDED:"extended"};m.OPERATION={COPY:"copy",MOVE:"move",RENAME:"rename",DELETE:"delete",OPEN:"open",EDIT:"edit",DOWNLOAD:"download",DOWNLOAD_TO:"downloadTo",INFO:"info",COMPRESS:"compress",RELOAD:"reload",PREVIEW:"preview",INSERT_IMAGE:"insertImage",COPY_PASTE:"copypaste",DND:"dnd",OPTIONS:"options",NEW_FILE:"mkfile",NEW_DIRECTORY:"mkdir",GET_CONTENT:"get",SET_CONTENT:"set",FIND:"find",CUSTOM:"custom",
PERMA_LINK:"permaLink",ADD_MOUNT:"ADD_MOUNT",REMOVE_MOUNT:"REMOVE_MOUNT",EDIT_MOUNT:"EDIT_MOUNT",PERSPECTIVE:"PERSPECTIVE",EXTRACT:"extract"};m.OPERATION_INT={NONE:0,EDIT:1,COPY:2,MOVE:3,INFO:4,DOWNLOAD:5,COMPRESS:6,DELETE:7,RENAME:8,DND:9,COPY_PASTE:10,OPEN:11,RELOAD:12,PREVIEW:13,INSERT_IMAGE:15,NEW_FILE:16,NEW_DIRECTORY:17,UPLOAD:18,READ:19,WRITE:20,PLUGINS:21,CUSTOM:22,FIND:23,PERMA_LINK:24,ADD_MOUNT:25,REMOVE_MOUNT:26,EDIT_MOUNT:27,PERSPECTIVE:28,CLIPBOARD_COPY:29,CLIPBOARD_CUT:30,CLIPBOARD_PASTE:31,
EXTRACT:32};m.EResolveMode={SKIP:0,OVERWRITE:1,IF_NEWER:2,IF_SIZE_DIFFERS:3,APPEND:4,THROW:5,ABORT:6};m.EResolve={ALWAYS:0,THIS:1};m.EError={NONE:"None",EXISTS:"EEXIST",PERMISSION:"EACCES",NOEXISTS:"ENOENT",ISDIR:"EISDIR"};return m})},"xwire/WidgetTarget":function(){define(["dcl/dcl","xide/types","xwire/Target","xide/utils"],function(n,m,k,h){return n(k,{declaredClass:"xwire.WidgetTarget",targetFilter:null,binding:null,delegate:null,run:function(d){var b=null!==this.object&&null!=this.object.render,
c=this.binding.accept?this.binding.accept.getFunction():null,g=this.binding.transform?this.binding.transform.getFunction():null;if(this.object){var p=d.value;null!=this.targetFilter&&this.targetFilter.length&&this.delegate&&this.delegate.resolveFilter&&(p=this.delegate.resolveFilter(this.targetFilter,p,this.object));this.object.ignore=!0;if(!c||c.apply(this.delegate,[p,this.binding.accept,this.delegate,,this.object])){g&&(c=g.apply(this.delegate,[p,this.binding.transform,this.delegate,this.object]),
null!==c&&void 0!==c&&(p=c));if(!b&&this.object.set)this.object.set(this.path,p);else if(this.object._set){if(this.object._set(this.path,p),b="set"+h.capitalize(this.path),this.object[b])this.object[b](p,d)}else this.object[this.path]=p;this.object.ignore=!1}}}})})},"xblox/model/Statement":function(){define(["dcl/dcl","xblox/model/Block"],function(n,m){return n(m,{declaredClass:"xblox.model.Statement",toText:function(){return this.name},getChildren:function(){return this.items}})})},"davinci/ve/themeEditor/metadata/query":function(){define(["dojo/_base/declare",
"davinci/ve/utils/URLRewrite"],function(n,m){return n("davinci.ve.themeEditor.metadata.query",null,{constructor:function(k,h){this.files=k;this.cache={};this.lastLoaded=-1;this.modules=h;this.modulePrefix=null;this.modulePrefix=".";if(h)for(k=0;k<h.length;k++)this.modulePrefix+="/"+h[k]},getType:function(k){var h=null;k.declaredClass?h=k.type:(h=k,"html."==h.substring(0,5)&&(tagName=h.substring(5)));return h},_loadNextFile:function(){var k=this.files[++this.lastLoaded],h=null,h=k.getURL?m.encodeURI(k.getURL()):
this.modulePrefix+k,d=null;dojo.xhrGet({url:h,handleAs:"json",sync:!0,load:function(b){d=b}});return d},_fullyLoaded:function(){return this.files.length<=this.lastLoaded+1},_cacheNext:function(){var k=this._loadNextFile();dojo.mixin(this.cache,k)},getMetaData:function(k){var h=k.split(/[\.\/]/),d=0<=h.length?h[h.length-1]:h;return(h=this.cache[0<=h.length?h[0]:h])&&h[d]?h[d]:this._fullyLoaded()?null:(this._cacheNext(),this.getMetaData(k))}})})},"davinci/ve/actions/AddState":function(){define("dojo/_base/declare davinci/Runtime davinci/Workbench davinci/workbench/Preferences davinci/ve/States davinci/actions/Action davinci/lang/ve davinci/ve/actions/_AddManageStatesWidget".split(" "),
function(n,m,k,h,d,b,c,g){return n("davinci.ve.actions.AddState",[b],{run:function(){var b;m.currentEditor&&m.currentEditor.currentEditor&&m.currentEditor.currentEditor.context&&(b=m.currentEditor.currentEditor.context,(b=d.getFocus(b.rootNode))&&b.stateContainerNode&&(b=new davinci.ve.actions._AddManageStatesWidget({node:b.stateContainerNode}),b._calledBy="AddState",k.showModal(b,c.createNewState,null,null,!0),b.okButton.set("disabled",!0)))}})})},"xideve/xblox/BlockInput":function(){define("dojo/_base/declare dcl/dcl davinci/ve/input/SmartInput dojo/_base/array dojo/_base/connect xide/mixins/ReloadMixin xide/mixins/EventedMixin ./ContainerInput davinci/Workbench davinci/ve/widget xide/types davinci/ve/commands/ModifyCommand xide/widgets/TemplatedWidgetBase xide/views/_Panel xide/factory xide/utils".split(" "),
function(n,m,k,h,d,b,c,g,p,a,e,q,u,w,r,v){return n("xideve.xblox.BlockInput",[k,c],{ctx:null,initWithVariable:function(a,b,c){var e=this;b=a.domNode;(function(a){var b=null,c="widgetProp",e=new w({title:"What you want with the variable ",containerClass:"CIDialog",options:{contentSize:{width:"400px",height:"300px"},footerToolbar:[{item:"\x3cbutton style\x3d'margin-left:5px;' type\x3d'button'\x3e\x3cspan class\x3d'...'\x3e\x3c/span\x3e\x3c/button\x3e",event:"click",btnclass:"btn btn-danger btn-sm",
btntext:" Cancel",callback:function(a){a.data.close()}},{item:"\x3cbutton style\x3d'margin-left:5px;' type\x3d'button'\x3e\x3cspan class\x3d'...'\x3e\x3c/span\x3e\x3c/button\x3e",event:"click",btnclass:"btn btn-primary btn-sm",btntext:" Ok",callback:function(e){a(b?b.get("value"):null,c);e.data.close()}}]},onShow:function(a,e){function g(a){c=a;"widgetProp"===a?b.set("value","label"):b.set("value","state")}a=m(u,{templateString:'\x3cdiv class\x3d"widget" style\x3d"padding: 16px"\x3e'+r.radioButtonString(!0,
"thename","Update Widget Property","wRadioWidgetProp")+" "+r.radioButtonString(!1,"thename","Set State with Variable value","wRadioWidgetState")+"\x3c/div\x3e"});a=v.addWidget(a,{},null,e,!0);v.destroy(b);b=r.createValidationTextBox(e,"","Widget Property","label");a.$wRadioWidgetProp.on("change",function(a){g("widgetProp")});a.$wRadioWidgetState.on("change",function(a){g("widgetState")});return[a]}});e.show();return e})(function(a,c){a={sourceevent:"onDriverVariableChanged",targetproperty:a,targetevent:"",
mode:1};"widgetState"===c&&(a.targetevent="",a.targetproperty="state");e.updateWidget(a);b.onSettingsChanged(a)})},show:function(b){this._widget=a.byId(b);this.publish(e.EVENTS.ON_SHOW_BLOCK_SMART_INPUT,{input:this,widget:this._widget});this._widget&&this._widget.domNode&&this._widget.domNode._targetBlock&&(b=this._widget.domNode._targetBlock,"xcf.model.Variable"==b.declaredClass&&this.initWithVariable(this._widget,b))},updateWidget:function(a){var b=this._widget.getContext();a=new q(this._widget,
a,null,b);this._widget._edit_context.getCommandStack().execute(a);this._widget=a.newWidget;this._widget._edit_context._focuses[0]._selectedWidget=this._widget;b.select(this._widget,null,!1)}})})},"davinci/_WokbenchMisc":function(){define("dcl/dcl require ./Runtime ./ui/Dialog davinci/lang/webContent ./ve/metadata dojo/_base/connect xide/manager/ServerActionBase".split(" "),function(n,m,k,h,d,b,c,g){var p=function(b,c){401==c.status||403==c.status?a():!0===b.canceled&&(b=b.ioArgs.url,(new RegExp("(^|\\.\\/|"+
document.baseURI+"\\/)cmd\\/")).test(b)&&(0<=b.indexOf("getBluePageInfo")||k.handleError(c.message)))},a=function(){var a=new h({title:d.sessionTimedOut}),b=dojo.string.substitute(d.sessionTimedOutMsg,{hrefLoc:"welcome"});a.set("content",b);dojo.connect(a,"onCancel",null,function(){window.location.href="welcome"});setTimeout(function(){window.location.href="welcome"},1E4);a.show()};return n(null,{run:function(){var a=davinci.Workbench;console.error("run ");k.run();a._initKeys();a._baseTitle=dojo.doc.title;
try{a.initService()}catch(u){debugger}window.maqetta&&maqetta.TopBanner&&maqetta.TopBanner.setup&&maqetta.TopBanner.setup();k.subscribe("/davinci/resource/resourceChanged",function(a,b){if("deleted"==a&&(a="editor-"+encodeURIComponent(b.getPath().replace(/[\/| |\t]/g,"_")).replace(/%/g,":"),b=editorIdToShadowId(a),a=dijit.byId(a),b=dijit.byId(b),a&&!a._isClosing)){var c=dijit.byId("editors_container"),e=dijit.byId("davinci_file_tabs");c.removeChild(a);a.destroyRecursive();e.removeChild(b);b.destroyRecursive()}});
k.subscribe("/dojo/io/error",p);k.subscribe("/davinci/states/state/changed",function(a){var b=k.currentEditor;"davinci.ve.themeEditor.ThemeEditor"!=b.declaredClass&&"davinci.review.editor.ReviewEditor"!=b.declaredClass&&b.visualEditor.onContentChange.apply(b.visualEditor,arguments)});k.subscribe("/davinci/ui/widgetPropertiesChanges",function(){var a=k.currentEditor.visualEditor;a._objectPropertiesChange.apply(a,arguments)});c.subscribe("/davinci/states/state/changed",function(a){var b=k.currentEditor&&
"davinci.ve.PageEditor"==k.currentEditor.declaredClass&&k.currentEditor.visualEditor&&k.currentEditor.visualEditor.context;if(b){var c,e,b=b?b.getDijit():null,g=m("davinci/ve/widget");a.newState&&!a.newState.indexOf("_show:")&&(c=b.byId(a.newState.substring(6)),c=g.getWidget(c.domNode),(e=c.getHelper())&&e.popup&&e.popup(c));a.oldState&&!a.oldState.indexOf("_show:")&&(c=b.byId(a.oldState.substring(6)),c=g.getWidget(c.domNode),(e=c.getHelper())&&e.tearDown&&e.tearDown(c))}});c.subscribe("/davinci/ui/repositionFocusContainer",
function(b){a._repositionFocusContainer()});var g=this.service.serviceObject[this.serviceClass].getInfo().then(function(a){k._initializationInfo=a;a=a.userInfo;k.isLocalInstall="maqettaUser"==a.userId;k.userName=a.userId;k.userEmail=a.email;return b.init()}).then(function(){var b=k.initialPerspective||"davinci.ui.main";dojo.query(".loading").orphan();a.showPerspective(b);a._updateTitle();initializeWorkbenchState()}).otherwise(function(a){dojo.query("#load_screen").addContent(dojo.string.substitute(d.startupError,
[a.message]),"only")});a._lastAutoSave=Date.now();setInterval(dojo.hitch(this,"_autoSave"),3E4);return g},initService:function(){this.service||(this.service=new g({serviceClass:"XApp_XIDE_Workbench_Service",serviceUrl:"./xcf/xui.php?debug\x3dtrue\x26view\x3drpc",singleton:!1}),this.service.init())},findView:function(a){if(a=dijit.byId(a))return a},location:function(){return k.location()},logoff:function(a){},unload:function(){davinci.Workbench._autoSave()},singleProjectMode:function(){return!0},getProject:function(){var a=
davinci.Workbench;return a.getActiveProject()||a._DEFAULT_PROJECT},loadProject:function(a){var b=davinci.Workbench;b.setActiveProject(a);return b.updateWorkbenchState().then(function(){location.href="cmd/configProject?configOnly\x3dtrue\x26project\x3d"+encodeURIComponent(a)})},getActiveProject:function(){return"project1"},setActiveProject:function(a){var b=davinci.Workbench;b._state||(b._state={});b._state.project=a;b.saveState=!0},setActionScope:function(a,b){davinci.Workbench.actionScope[a]=b},
clearWorkbenchState:function(){var a=davinci.Workbench;a._state={};return a.updateWorkbenchState()},updateWorkbenchState:function(){delete davinci.Workbench.saveState;return null},getDefaultMount:function(){},workbenchStateCustomPropGet:function(a){var b=davinci.Workbench;if("string"==typeof a)return b._state[a]},workbenchStateCustomPropSet:function(a,b){var c=davinci.Workbench;"string"==typeof a&&("undefined"==typeof b?delete c._state[a]:c._state[a]=b,c.saveState=!0)},_autoSave:function(){var a=
davinci.Workbench,b=!1;if(this.currentEditor){var c=this.currentEditor;if(c.isReadOnly)console.error("workbench : autosave failed : isReadyOnly or is not dirty");else try{c.save(!0)}catch(w){console.error("Error while autosaving file:"+w),b=!0}}b||(a._lastAutoSave=Date.now())},_updateTitle:function(a){var b=davinci.Workbench._baseTitle||"";a&&(b+="",a.isDirty&&(b+="*"),b+=a.item.name);dojo.doc.title=b},_initActionsKeys:function(a,b){var c=davinci.Workbench,e=b.keysDomNode||b.domNode,g={},d;dojo.forEach(a,
function(a){dojo.forEach(a.actions,function(a){a.keySequence&&(g[a.keySequence]=a,d=!0)})});if(d){var q=b.context;dojo.connect(e,"onkeydown",function(a){a=c._keySequence(a);a=g[a];!a||a.action.shouldShow&&!a.action.shouldShow(q)||a.action.isEnabled(q)&&c._runAction(a,q)})}},_initKeys:function(){var a=davinci.Workbench,b={all:[]},c=k.getExtensions("davinci.keyBindings");dojo.forEach(c,function(a){var c=a.contextID||"all",e=b[c];e||(e=b[c]=[]);e[a.sequence]=a.commandID});a.keyBindings=b},handleKey:function(a){var b=
davinci.Workbench;if(b.keyBindings){a=b._keySequence(a);var c;b.currentContext&&b.keyBindings[b.currentContext]&&(c=b.keyBindings[b.currentContext][a]);c||(c=b.keyBindings.all[a]);if(c)return k.executeCommand(c),!0}},_keySequence:function(a){var b=[];window.event?(window.event.ctrlKey&&b.push("M1"),window.event.shiftKey&&b.push("M2"),window.event.altKey&&b.push("M3")):((a.ctrlKey||2==a.modifiers||3==a.modifiers||5<a.modifiers)&&b.push("M1"),(a.shiftKey||3<a.modifiers)&&b.push("M2"),a.modifiers?(a.altKey||
a.modifiers%2)&&b.push("M3"):a.altKey&&b.push("M3"));var c=String.fromCharCode(a.keyCode);/[A-Z0-9]/.test(c)||(c={46:"del",114:"f3"}[a.keyCode]||"xxxxxxxxxx");c=c.toUpperCase();" "==c&&(c="' '");b.push(c);return b.join("+")},setupGlobalKeyboardHandler:function(){var a=k.getExtensions("davinci.actionSets");dojo.forEach(a,function(a){"davinci.ui.main"!=a.id&&"davinci.ui.editorActions"!=a.id||dojo.forEach(a.actions,function(a){a.keyBinding&&k.registerKeyBinding(a.keyBinding,a)})})}})})},"davinci/ve/actions/EditPropertiesAction":function(){define(["dojo/_base/declare",
"davinci/ve/actions/ContextAction"],function(n,m){return n("davinci.ve.actions.EditPropertiesAction",[m],{run:function(k){(k=this.fixupContext(k))&&k.editor&&k.editor.editorContainer&&k.editor.editorContainer.hideShowProperties&&k.editor.editorContainer.hideShowProperties()},isEnabled:function(k){k=this.fixupContext(k);return!0}})})},"davinci/lang/ve/common":function(){define([],function(){return{search:"Search",filter:"Filter","new":"New",errorSavingFile:"Error saving file: ${0} details: ${1}",palette:"palette",
closeAllEditors:"Close all tabs",undo:"Undo",redo:"Redo",copy:"Copy",paste:"Paste",cut:"Cut","delete":"Delete",surround:"Surround",properties:"Properties",styles:"Styles",events:"Events",preferences:"Preferences",addPane:"Add Pane",addColumn:"Add Column",addRow:"Add Row",removeColumn:"Remove Column",removeRow:"Remove Row",joinColumn:"Join Column",joinRow:"Join Row",splitColumn:"Split Column",splitRow:"Split Row",alignLeft:"Align Left",alignRight:"Align Right",alignTop:"Align Top",alignBottom:"Align Bottom",
show:"Show",hide:"Hide",addMenuItem:"Add Menu Item",addSubMenu:"Add Sub Menu",addMenuBarItem:"Add MenuBar Item",addPopupMenuBar:"Add Popup MenuBarItem",ok:"OK",cancel:"Cancel",page:"Page",title:"Title",metaInfo:"Meta Info",httpEquiv:"HTTP Equiv",style:"Style",theme:"Theme",styleSheets:"Style Sheets",rules:"Rules",url:"URL",externalScripts:"External Scripts",modules:"Modules",name:"Name",value:"Value",add:"Add",remove:"Remove",staticOptions:"Static Options",axisOptions:"Axis Options",series:"Series",
axis:"Axis",option:"Option",selected:"Selected",staticItems:"Static Items",dataStore:"Data Store",query:"Query",fields:"Fields",field:"Field",label:"Label",width:"Width",edit:"Edit",key:"Key",rootId:"Root ID",rootLabel:"Root Label",childrenAttrs:"Children Attributes",items:"Items",type:"Type",widget:"Widget",position:"Position",size:"Size",layout:"Layout",visual:"Visual",text:"Text",border:"Border",table:"Table",list:"List",aural:"Aural",others:"Others",onLoad:"Load",onUnload:"Unload",script:"Script",
methodCall:"Method Call",serviceCall:"Service Call",object:"Object",method:"Method",parameters:"Parameters",result:"Result",service:"Service",content:"Content",source:"Source",target:"Target",property:"Property",flowLayout:"Flow Layout",snapToNearestWidget:"Snap to nearest widget",showPossibleParents:"When dragging, show possible parents",warnOnCSSOverride:"Warn on CSS Override",absoluteWidgetsZindex:"z-index for sketch mode",widgetPaletteLayout:"In Palette, display widgets as",widgetPaletteShow_Icons:"icons",
widgetPaletteShow_List:"list",liveEdit:"Live Edit",zazl:"Enable \x3ca href\x3d'http://zazl.org' target\x3d'_blank'\x3eZazl Optimizer\x3c/a\x3e",selectorPrefix:"Selector Prefix",component:"Component",alternates:"Alternates",alternateWidgets:"Alternate widgets:",howToChooseAlternate:"To choose alternate widget, click-select current widget, then click on up arrow icon.",summary:"Summary:",description:"Description:",showSuggestedWidgets:"Suggested Widgets",showAllWidgets:"All Widgets",MoreIconTitleString:"Click here to see alternative similar widgets",
HelpIconTitleString:"Click here to see descriptive info about this widget",__dummy__:""}})},"dijit/_WidgetsInTemplateMixin":function(){define(["dojo/_base/array","dojo/aspect","dojo/_base/declare","dojo/_base/lang","dojo/parser"],function(n,m,k,h,d){return k("dijit._WidgetsInTemplateMixin",null,{_earlyTemplatedStartup:!1,widgetsInTemplate:!0,contextRequire:null,_beforeFillContent:function(){if(this.widgetsInTemplate){var b=this.domNode;this.containerNode&&!this.searchContainerNode&&(this.containerNode.stopParser=
!0);d.parse(b,{noStart:!this._earlyTemplatedStartup,template:!0,inherited:{dir:this.dir,lang:this.lang,textDir:this.textDir},propsThis:this,contextRequire:this.contextRequire,scope:"dojo"}).then(h.hitch(this,function(b){this._startupWidgets=b;for(var c=0;c<b.length;c++)this._processTemplateNode(b[c],function(b,a){return b[a]},function(b,a,c){return a in b?b.connect(b,a,c):b.on(a,c,!0)});this.containerNode&&this.containerNode.stopParser&&delete this.containerNode.stopParser}));if(!this._startupWidgets)throw Error(this.declaredClass+
": parser returned unfilled promise (probably waiting for module auto-load), unsupported by _WidgetsInTemplateMixin.   Must pre-load all supporting widgets before instantiation.");}},_processTemplateNode:function(b,c,g){return c(b,"dojoType")||c(b,"data-dojo-type")?!0:this.inherited(arguments)},startup:function(){n.forEach(this._startupWidgets,function(b){b&&!b._started&&b.startup&&b.startup()});this._startupWidgets=null;this.inherited(arguments)}})})},"xdocker/types":function(){define(["xdojo/declare",
"xide/types"],function(n,m){m.DOCKER={DOCK:null};m.DOCKER.DOCK={MODAL:"modal",FLOAT:"float",TOP:"top",LEFT:"left",RIGHT:"right",BOTTOM:"bottom",STACKED:"stacked"};m.DOCKER.EVENT={SELECT:"ON_VIEW_SELECT",INIT:"panelInit",LOADED:"dockerLoaded",UPDATED:"panelUpdated",VISIBILITY_CHANGED:"panelVisibilityChanged",BEGIN_DOCK:"panelBeginDock",END_DOCK:"panelEndDock",GAIN_FOCUS:"panelGainFocus",LOST_FOCUS:"panelLostFocus",CLOSED:"panelClosed",BUTTON:"panelButton",ATTACHED:"panelAttached",DETACHED:"panelDetached",
MOVE_STARTED:"panelMoveStarted",MOVE_ENDED:"panelMoveEnded",MOVED:"panelMoved",RESIZE_STARTED:"panelResizeStarted",RESIZE_ENDED:"panelResizeEnded",RESIZED:"panelResized",SCROLLED:"panelScrolled",SAVE_LAYOUT:"layoutSave",RESTORE_LAYOUT:"layoutRestore",CUSTOM_TAB_CHANGED:"customTabChanged",CUSTOM_TAB_CLOSED:"customTabClosed",SPLITTER_POS_CHANGED:"splitterPosChanged",BEGIN_FLOAT_RESIZE:"beginFloatResize",END_FLOAT_RESIZE:"endFloatResize",BEGIN_RESIZE:"beginResize",END_RESIZE:"endResize"};m.DOCKER.PANEL_PLACEHOLDER=
"__wcDockerPlaceholderPanel";m.DOCKER.COLLAPSED="__wcDockerCollapsedPanel";m.DOCKER.ORIENTATION={VERTICAL:!1,HORIZONTAL:!0};m.DOCKER.TAB={TOP:"top",LEFT:"left",RIGHT:"right",BOTTOM:"bottom"};m.DOCKER.TAB.ORIENTATION={VERTICAL:!1,HORIZONTAL:!0};m.PANEL_TYPES={DefaultFixed:"DefaultFixed",DefaultTab:"DefaultTab",Collapsible:"Collapsible"};return n("xide.docker.types",null,{})})},"dojo/promise/Promise":function(){define(["../_base/lang"],function(n){function m(){throw new TypeError("abstract");}return n.extend(function(){},
{then:function(k,h,d){m()},cancel:function(k,h){m()},isResolved:function(){m()},isRejected:function(){m()},isFulfilled:function(){m()},isCanceled:function(){m()},always:function(k){return this.then(k,k)},otherwise:function(k){return this.then(null,k)},trace:function(){return this},traceRejected:function(){return this},toString:function(){return"[object Promise]"}})})},"xgrid/typesLite":function(){define("xdojo/declare xide/types xgrid/Selection xgrid/Keyboard xgrid/ColumnHider xide/mixins/EventedMixin dgrid/OnDemandGrid xgrid/Defaults xgrid/Layout xgrid/Focus xgrid/ListRenderer xgrid/Clipboard xgrid/Actions xlang/i18".split(" "),
function(n,m,k,h,d,b,c,g,p,a,e,q,u,w){m.GRID_BASES={GRID:c,LAYOUT:p,DEFAULTS:g,RENDERER:e,EVENTED:b,FOCUS:a,i18:w};m.DEFAULT_GRID_OPTIONS={USE_JQUERY_CSS:!1,DESELECT_SELECTED:!0,CLEAR_SELECTION_ON_CLICK:!0,ITEM_ACTIONS:{},GRID_ACTIONS:{},PUBLISH_SELECTION:!1};m.GRID_OPTION={USE_JQUERY_CSS:"USE_JQUERY_CSS",DESELECT_SELECTED:"DESELECT_SELECTED",CLEAR_SELECTION_ON_CLICK:"CLEAR_SELECTION_ON_CLICK",ITEM_ACTIONS:"ITEM_ACTIONS",GRID_ACTIONS:"GRID_ACTIONS"};m.DEFAULT_GRID_FEATURES_LITE={SELECTION:{CLASS:k,
IMPLEMENTATION:{},CLASSES:null},KEYBOARD_SELECTION:{CLASS:h,IMPLEMENTATION:{},CLASSES:null},COLUMN_HIDER:{CLASS:d,IMPLEMENTATION:{},CLASSES:null}};m.GRID_FEATURES_LITE={SELECTION:{CLASS:k,IMPLEMENTATION:{},CLASSES:null},KEYBOARD_SELECTION:{CLASS:h,IMPLEMENTATION:{},CLASSES:null},ACTIONS:{CLASS:u,IMPLEMENTATION:{},CLASSES:null},CLIPBOARD:{CLASS:q,IMPLEMENTATION:{},CLASSES:null},COLUMN_HIDER:{CLASS:d,IMPLEMENTATION:{},CLASSES:null}};return n(null,[],{})})},"xblox/model/Referenced":function(){define(["dcl/dcl",
"dojo/_base/declare","xide/mixins/ReferenceMixin","xide/utils"],function(n,m,k,h){var d={reference:null,deserialize:function(b){if(!b||0==b.length)return{};try{return h.fromJson(b)}catch(c){return{}}}};m=m("xblox.model.Referenced",[k],d);m.dcl=n(k.dcl,d);return m})},"dojo/_base/url":function(){define(["./kernel"],function(n){var m=/^(([^:/?#]+):)?(\/\/([^/?#]*))?([^?#]*)(\?([^#]*))?(#(.*))?$/,k=/^((([^\[:]+):)?([^@]+)@)?(\[([^\]]+)\]|([^\[:]*))(:([0-9]+))?$/,h=function(){for(var d=arguments,b=[d[0]],
c=1;c<d.length;c++)if(d[c]){var g=new h(d[c]+""),b=new h(b[0]+"");if(""==g.path&&!g.scheme&&!g.authority&&!g.query)null!=g.fragment&&(b.fragment=g.fragment),g=b;else if(!g.scheme&&(g.scheme=b.scheme,!g.authority&&(g.authority=b.authority,"/"!=g.path.charAt(0)))){for(var b=(b.path.substring(0,b.path.lastIndexOf("/")+1)+g.path).split("/"),p=0;p<b.length;p++)"."==b[p]?p==b.length-1?b[p]="":(b.splice(p,1),p--):0<p&&(1!=p||""!=b[0])&&".."==b[p]&&".."!=b[p-1]&&(p==b.length-1?(b.splice(p,1),b[p-1]=""):(b.splice(p-
1,2),p-=2));g.path=b.join("/")}b=[];g.scheme&&b.push(g.scheme,":");g.authority&&b.push("//",g.authority);b.push(g.path);g.query&&b.push("?",g.query);g.fragment&&b.push("#",g.fragment)}this.uri=b.join("");d=this.uri.match(m);this.scheme=d[2]||(d[1]?"":null);this.authority=d[4]||(d[3]?"":null);this.path=d[5];this.query=d[7]||(d[6]?"":null);this.fragment=d[9]||(d[8]?"":null);null!=this.authority&&(d=this.authority.match(k),this.user=d[3]||null,this.password=d[4]||null,this.host=d[6]||d[7],this.port=
d[9]||null)};h.prototype.toString=function(){return this.uri};return n._Url=h})},"dojo/_base/browser":function(){require.has&&require.has.add("config-selectorEngine","acme");define("../ready ./kernel ./connect ./unload ./window ./event ./html ./NodeList ../query ./xhr ./fx".split(" "),function(n){return n})},"davinci/ve/commands/EventCommand":function(){define(["dojo/_base/declare","davinci/ve/widget"],function(n,m){return n("davinci.ve.commands.EventCommand",null,{name:"EventCommand",constructor:function(k,
h){this._oldId=k?k.id:void 0;this._properties=h||{}},setContext:function(k){this._context=k},execute:function(){if(this._oldId&&this._properties){var k=m.byId(this._oldId);this._oldProps=k.properties||{};k.setProperties(this._properties,!0);if(k.isHtmlWidget){var h=k.domNode,d;for(d in this._properties)this._properties[d]||h.removeAttribute(d)}this._newId=this._oldId;dojo.publish("/davinci/ui/widgetPropertiesChanged",[[k]])}},undo:function(){if(this._newId){var k=m.byId(this._newId),h=k.domNode,d=
k._srcElement,b;for(b in this._properties)this._oldProps[b]||(h.removeAttribute(b),d.removeAttribute(b));k.setProperties(this._oldProps);dojo.publish("/davinci/ui/widgetPropertiesChanged",[[k]])}}})})},"dstore/Trackable":function(){define("dojo/_base/lang dojo/_base/declare dojo/aspect dojo/when dojo/promise/all dojo/_base/array dojo/on".split(" "),function(n,m,k,h,d,b,c){function g(a,b,c){for(var e=a.length-1;0<=e;--e){var g=a[e],d=g.start,g=d+g.count;if(b>g){a.splice(e+1,0,{start:b,count:c-b});
return}c>=d&&(b=Math.min(b,d),c=Math.max(c,g),a.splice(e,1))}a.unshift({start:b,count:c-b})}var p=0,a={track:function(){function a(){return function(){var a=this,b=this.inherited(arguments);h(b,function(b){b=a._results=b.slice();a._partialResults&&(a._partialResults=null);a._ranges=[];g(a._ranges,0,b.length)});return b}}function d(){return function(a){var b=this,c=a.start,e=a.end,d=this.inherited(arguments);this._results||h(d,function(a){return h(a.totalLength,function(d){var q=b._partialResults||
(b._partialResults=[]);e=Math.min(e,c+a.length);q.length=d;d=[c,e-c].concat(a);q.splice.apply(q,d);g(b._ranges,c,e);return a})});return d}}function u(a,c){p++;var e=c.target;c=n.delegate(c,y[a]);h(A._results||A._partialResults,function(g){if(g){var d,q,h,p=A._ranges,r,k="id"in c?c.id:w.getIdentity(e),u=-1,v=-1,m=-1,n=-1;if("delete"===a||"update"===a)for(d=0;-1===u&&d<p.length;++d)for(r=p[d],q=r.start,h=q+r.count;q<h;++q)if(w.getIdentity(g[q])==k){u=c.previousIndex=q;v=d;g.splice(u,1);r.count--;for(q=
d+1;q<p.length;++q)p[q].start--;break}if("add"===a||"update"===a){if(z){if(z([e]).length){var x=0;h=p.length-1;q=-1;for(var C;x<=h&&-1===m;)d=x+Math.round((h-x)/2),r=p[d],v=g.slice(r.start,r.start+r.count),"beforeId"in c&&(q=null===c.beforeId?v.length:B(v,c.beforeId)),-1===q&&(q=u>=Math.max(0,r.start-1)&&u<=r.start+r.count?u:w.defaultNewToStart?0:v.length),v.splice(q,0,e),k=b.indexOf(z(v),e),C=r.start+k,0===k&&0!==r.start?h=d-1:k>=v.length-1&&C<g.length?x=d+1:(m=C,n=d);if(-1===m&&0<x&&x<p.length)var y=
!0}}else{q=-1;if("beforeId"in c)if(null===c.beforeId)m=g.length,q=p.length-1;else for(d=0,h=p.length;-1===n&&d<h;++d)r=p[d],m=B(g,c.beforeId,r.start,r.start+r.count),-1!==m&&(n=d);else"update"===a?(m=u,n=v):w.defaultNewToStart?q=m=0:(m=g.length,q=p.length-1);-1!==q&&-1===n&&(r=p[q])&&r.start<=m&&m<=r.start+r.count&&(n=q)}if(-1<m&&-1<n)for(c.index=m,g.splice(m,0,e),p[n].count++,d=n+1;d<p.length;++d)p[d].start++;else if(y)for(c.beforeIndex=p[x].start,d=x;d<p.length;++d)p[d].start++}c.totalLength=g.length}(g=
A["on_tracked"+a])&&g.call(A,c)})}var w=this.store||this,r=[],v={add:1,update:1,"delete":1},x;for(x in v)r.push(this.on(x,function(a){return function(b){u(a,b)}}(x)));var A=m.safeMixin(n.delegate(this),{_ranges:[],fetch:a(),fetchRange:d(),releaseRange:function(a,b){if(this._partialResults){a:for(var c=this._ranges,e=0,g;g=c[e];++e){var d=g.start,q=d+g.count;if(a<=d)if(b>=q)c.splice(e,1);else{g.start=b;g.count=q-g.start;break a}else if(a<q)if(b>d){c.splice(e,1,{start:d,count:a-d},{start:b,count:q-
b});break a}else g.count=a-g.start}for(;a<b;++a)delete this._partialResults[a]}},on:function(a,b){var e=this,g=this.getInherited(arguments);return c.parse(A,a,b,function(a,c){return c in v?k.after(A,"on_tracked"+c,b,!0):g.call(e,c,b)})},tracking:{remove:function(){for(;0<r.length;)r.pop().remove();this.remove=function(){}}},track:null});this.fetchSync&&(m.safeMixin(A,{fetchSync:a(),fetchRangeSync:d()}),A.fetchSync());var z;b.forEach(this.queryLog,function(a){var b=z,c=a.querier;c&&(z=b?function(a){return c(b(a))}:
c)});var y={add:{index:void 0},update:{previousIndex:void 0,index:void 0},"delete":{previousIndex:void 0}},B=function(a,b,c,e){e=void 0!==e?e:a.length;for(c=void 0!==c?c:0;c<e;++c)if(w.getIdentity(a[c])===b)return c;return-1};return A}};d=m(null,a);d.create=function(b,c){b=m.safeMixin(n.delegate(b),a);m.safeMixin(b,c);return b};return d})},"xide/layout/Container":function(){define(["dcl/dcl","xide/_base/_Widget"],function(n,m){m=n(m,{declaredClass:"xide.layout.Container",resizeToParent:!0,templateString:'\x3cdiv attachTo\x3d"containerNode" class\x3d"widget" style\x3d"height: inherit"/\x3e'});
n.chainAfter(m,"destroy");return m})},"xide/json/ContextMenu":function(){define(["dojo/_base/declare","./util"],function(n,m){function k(h,d){function b(a,e,g){g.forEach(function(g){if("separator"==g.type){var d=document.createElement("div");d.className="separator";h=document.createElement("li");h.appendChild(d);a.appendChild(h)}else{var q={},h=document.createElement("li");a.appendChild(h);d=document.createElement("button");d.className=g.className;d.className+=" btn";q.button=d;g.title&&(d.title=
g.title);g.click&&(d.onclick=function(){c.hide();g.click()});h.appendChild(d);if(g.submenu){var p=document.createElement("div");p.className="icon";d.appendChild(p);d.appendChild(document.createTextNode(g.text));var k;g.click?(d.className+=" default",d=document.createElement("button"),q.buttonExpand=d,d.className="expand",d.innerHTML='\x3cdiv class\x3d"expand"\x3e\x3c/div\x3e',h.appendChild(d),g.submenuTitle&&(d.title=g.submenuTitle)):(p=document.createElement("div"),p.className="expand",d.appendChild(p));
k=d;k.onclick=function(){c._onExpandItem(q);k.focus()};d=[];q.subItems=d;p=document.createElement("ul");q.ul=p;p.className="menu";p.style.height="0";h.appendChild(p);b(p,d,g.submenu)}else d.innerHTML='\x3cdiv class\x3d"icon"\x3e\x3c/div\x3e'+g.text;e.push(q)}})}this.dom={};var c=this,g=this.dom;this.anchor=void 0;this.items=h;this.eventListeners={};this.visibleSubmenu=this.selection=void 0;this.onClose=d?d.close:void 0;var p=document.createElement("div");p.className="jsoneditor-contextmenu bg-opaque";
g.menu=p;d=document.createElement("ul");d.className="menu";p.appendChild(d);g.list=d;g.items=[];p=document.createElement("button");g.focusButton=p;g=document.createElement("li");g.style.overflow="hidden";g.style.height="0";g.appendChild(p);d.appendChild(g);b(d,this.dom.items,h);this.maxHeight=0;h.forEach(function(a){c.maxHeight=Math.max(c.maxHeight,24*(h.length+(a.submenu?a.submenu.length:0)))})}k.prototype._getVisibleButtons=function(){var h=[],d=this;this.dom.items.forEach(function(b){h.push(b.button);
b.buttonExpand&&h.push(b.buttonExpand);b.subItems&&b==d.expandedItem&&b.subItems.forEach(function(b){h.push(b.button);b.buttonExpand&&h.push(b.buttonExpand)})});return h};k.visibleMenu=void 0;k.prototype.show=function(h){this.hide();var d=window.innerHeight,b=d+(window.pageYOffset||document.scrollTop||0),c=h.offsetHeight,g=this.maxHeight,p=m.getAbsoluteLeft(h),a=m.getAbsoluteTop(h);a+c+g<b?(this.dom.menu.style.left=p+"px",this.dom.menu.style.top=a+c+"px",this.dom.menu.style.bottom=""):(this.dom.menu.style.left=
p+"px",this.dom.menu.style.top="",this.dom.menu.style.bottom=d-a+"px");document.body.appendChild(this.dom.menu);var e=this,q=this.dom.list;this.eventListeners.mousedown=m.addEventListener(document,"mousedown",function(a){var b=a.target;b==q||e._isChildOf(b,q)||(e.hide(),a.stopPropagation(),a.preventDefault())});this.eventListeners.mousewheel=m.addEventListener(document,"mousewheel",function(a){a.stopPropagation();a.preventDefault()});this.eventListeners.keydown=m.addEventListener(document,"keydown",
function(a){e._onKeyDown(a)});this.selection=m.getSelection();this.anchor=h;setTimeout(function(){e.dom.focusButton.focus()},0);k.visibleMenu&&k.visibleMenu.hide();k.visibleMenu=this};k.prototype.hide=function(){if(this.dom.menu.parentNode&&(this.dom.menu.parentNode.removeChild(this.dom.menu),this.onClose))this.onClose();for(var h in this.eventListeners)if(this.eventListeners.hasOwnProperty(h)){var d=this.eventListeners[h];d&&m.removeEventListener(document,h,d);delete this.eventListeners[h]}k.visibleMenu==
this&&(k.visibleMenu=void 0)};k.prototype._onExpandItem=function(h){var d=this,b=h==this.expandedItem,c=this.expandedItem;c&&(c.ul.style.height="0",c.ul.style.padding="",setTimeout(function(){d.expandedItem!=c&&(c.ul.style.display="",m.removeClassName(c.ul.parentNode,"selected"))},300),this.expandedItem=void 0);if(!b){var g=h.ul;g.style.display="block";setTimeout(function(){d.expandedItem==h&&(g.style.height=24*g.childNodes.length+"px",g.style.padding="5px 10px")},0);m.addClassName(g.parentNode,"selected");
this.expandedItem=h}};k.prototype._onKeyDown=function(h){var d=h.target,b=h.which,c=!1;27==b?(this.selection&&m.setSelection(this.selection),this.anchor&&this.anchor.focus(),this.hide(),c=!0):9==b?h.shiftKey?(b=this._getVisibleButtons(),d=b.indexOf(d),0==d&&(b[b.length-1].focus(),c=!0)):(b=this._getVisibleButtons(),d=b.indexOf(d),d==b.length-1&&(b[0].focus(),c=!0)):37==b?("expand"==d.className&&(b=this._getVisibleButtons(),d=b.indexOf(d),(c=b[d-1])&&c.focus()),c=!0):38==b?(b=this._getVisibleButtons(),
d=b.indexOf(d),(c=b[d-1])&&"expand"==c.className&&(c=b[d-2]),c||(c=b[b.length-1]),c&&c.focus(),c=!0):39==b?(b=this._getVisibleButtons(),d=b.indexOf(d),(c=b[d+1])&&"expand"==c.className&&c.focus(),c=!0):40==b&&(b=this._getVisibleButtons(),d=b.indexOf(d),(c=b[d+1])&&"expand"==c.className&&(c=b[d+2]),c||(c=b[0]),c&&(c.focus(),c=!0),c=!0);c&&(h.stopPropagation(),h.preventDefault())};k.prototype._isChildOf=function(h,d){for(h=h.parentNode;h;){if(h==d)return!0;h=h.parentNode}return!1};return k})},"xide/rpc/AdapterRegistry":function(){define(["dojo/_base/kernel",
"dojo/_base/lang"],function(n,m){n=n.AdapterRegistry=function(k){this.pairs=[];this.returnWrappers=k||!1};m.extend(n,{register:function(k,h,d,b,c){this.pairs[c?"unshift":"push"]([k,h,d,b])},match:function(){for(var k=0;k<this.pairs.length;k++){var h=this.pairs[k];if(h[1].apply(this,arguments))return h[3]||this.returnWrappers?h[2]:h[2].apply(this,arguments)}throw Error("No match found");},unregister:function(k){for(var h=0;h<this.pairs.length;h++)if(this.pairs[h][0]==k)return this.pairs.splice(h,1),
!0;return!1}});return n})},"xide/mixins/ActionMixin":function(){define(["dcl/dcl","xdojo/declare","xide/utils"],function(n,m,k){k={store:null,getActionStore:function(){return this.store},setActionStore:function(h){return this.store=h},sortGroups:function(h,d){return h=h.sort(function(b,c){return b.label&&c.label&&null!=d[b.label]&&null!=d[c.label]?d[c.label]-d[b.label]:100})},visibility:null,_actions:[],clearActions:function(h,d){h=h||this.visibility;d=d||this.getActionStore();var b=d.data;d&&b&&
_.each(b,function(b){var c=null!=b.getVisibility?b.getVisibility(h):null;c&&(c=c.widget)&&(b.removeReference&&b.removeReference(c),c.destroy(),this.setVisibilityField(b,"widget",null))},this)},_computeList:function(h,d){return this._actions},getVisibilityField:function(h,d,b){var c=null!=h.getVisibility?h.getVisibility(this.visibility):{};return null!=c[d]?c[d]:h[d]||b},setVisibilityField:function(h,d,b){var c={};if(h.getVisibility){var g=h.getVisibility(this.visibility)||c;g[d]=b}return g},shouldShowAction:function(h){return 0==
this.getVisibilityField(h,"show")||h.getVisibility&&null==h.getVisibility(this.visibility)?!1:!0}};m=m("xide/mixins/ActionMixin",null,k);m.dcl=n(null,k);return m})},"wcDocker/layoutsimple":function(){define(["dcl/dcl","wcDocker/types","wcDocker/layout"],function(n,m,k){return n(k,{declaredClass:"wcLayoutSimple",addItem:function(h){this.$elem.append(h)},clear:function(){this.$elem.remove();this.$elem=null;this.__init()},__init:function(){this.$elem=$('\x3cdiv class\x3d"wcLayout wcWide wcTall"\x3e\x3c/div\x3e');
this.__container(this.$container)},__update:function(){}})})},"xide/widgets/Expression":function(){define("dcl/dcl xide/widgets/WidgetBase xide/factory xide/utils xide/types xide/views/_CIDialog xide/views/_CIPanelDialog".split(" "),function(n,m,k,h,d,b,c){return n(m,{declaredClass:"xide.widgets.Expression",minHeight:"400px;",value:"",options:null,templateString:"\x3cdiv class\x3d'widgetContainer widgetBorder widgetTable' style\x3d''\x3e\x3ctable border\x3d'0' cellpadding\x3d'5px' width\x3d'100%' \x3e\x3ctbody\x3e\x3ctr attachTo\x3d'extensionRoot'\x3e\x3ctd width\x3d'15%' class\x3d'widgetTitle'\x3e\x3cspan\x3e\x3cb\x3e${!title}\x3c/b\x3e\x3cspan\x3e\x3c/td\x3e\x3ctd width\x3d'100px' class\x3d'widgetValue2' valign\x3d'middle' attachTo\x3d'previewNode'\x3e\x3c/td\x3e\x3ctd class\x3d'extension' width\x3d'25px' attachTo\x3d'button0'\x3e\x3c/td\x3e\x3ctd class\x3d'extension' width\x3d'25px' attachTo\x3d'button1'\x3e\x3c/td\x3e\x3ctd class\x3d'extension' width\x3d'25px' attachTo\x3d'button2'\x3e\x3c/td\x3e\x3c/tr\x3e\x3c/tbody\x3e\x3c/table\x3e\x3cdiv attachTo\x3d'expander' onclick\x3d'' style\x3d'width:100%;'\x3e\x3c/div\x3e\x3cdiv attachTo\x3d'last'\x3e\x3c/div\x3e\x3c/div\x3e",
postMixInProperties:function(){this.inherited(arguments);this.userData&&this.userData.title&&(this.title=this.userData.title);if(this.userData&&!0===this.userData.vertical||!0===this.vertical)this.templateString="\x3cdiv class\x3d'widgetContainer widgetBorder widgetTable' style\x3d''\x3e\x3ctable border\x3d'0' cellpadding\x3d'5px' width\x3d'100%' \x3e\x3ctbody\x3e\x3ctr attachTo\x3d'extensionRoot'\x3e\x3ctd width\x3d'100%' class\x3d'widgetTitle'\x3e\x3cspan\x3e\x3cb\x3e${!title}\x3c/b\x3e\x3cspan\x3e\x3c/td\x3e\x3c/tr\x3e\x3ctr attachTo\x3d'extensionRoot'\x3e\x3ctd width\x3d'100px' class\x3d'widgetValue2' valign\x3d'middle' attachTo\x3d'previewNode'\x3e\x3c/td\x3e\x3ctd class\x3d'extension' width\x3d'25px' attachTo\x3d'button0'\x3e\x3c/td\x3e\x3ctd class\x3d'extension' width\x3d'25px' attachTo\x3d'button1'\x3e\x3c/td\x3e\x3ctd class\x3d'extension' width\x3d'25px' attachTo\x3d'button2'\x3e\x3c/td\x3e\x3c/tr\x3e\x3c/tbody\x3e\x3c/table\x3e\x3cdiv attachTo\x3d'expander' onclick\x3d'' style\x3d'width:100%;'\x3e\x3c/div\x3e\x3cdiv attachTo\x3d'last'\x3e\x3c/div\x3e\x3c/div\x3e"},
onValueChanged:function(b,c){if(this.userData.value!==b){this.userData.changed=!0;this.userData.active=!0;h.setCIValueByField(this.userData,"value",b);var a={owner:this.delegate||this.owner,ci:this.userData,newValue:b};this.publish(d.EVENTS.ON_CI_UPDATE,a);this._emit("valueChanged",a);c&&this.editBox.val(b)}},onSelect:function(){var b=this;h.mixin({},this.options);var p=h.toString(this.userData.value),p=new c({title:"Expression",style:"width:800px;height:600px;min-height:600px;",resizeable:!0,onOk:function(a){if(a&&
a[0])b.onValueChanged(a[0].ci.value,!0)},cis:[h.createCI("Expression",d.ECIType.EXPRESSION_EDITOR,p,{group:"Expression",delegate:this.userData.delegate})]});this.add(p,null,!1);return p.show()},startup:function(){var b=this,c=h.toString(this.userData.value),a=$('\x3ctextarea rows\x3d"3" class\x3d"form-control input-transparent" \x3e\x3c/textarea\x3e');a.val(c);this.editBox=a;$(this.previewNode).append(a);this.editBox.on("change",function(a){b.onValueChanged(a.target.value)});c=k.createSimpleButton("",
"fa-magic","btn-default",{style:""},this.button0);$(c).click(function(){b.onSelect()});this.onReady()}})})},"xide/Wizards":function(){define(["dojo/_base/declare"],function(n){return n("xide.Wizards",null,{})})},"dojo/json":function(){define(["./has"],function(n){var m="undefined"!=typeof JSON;n.add("json-parse",m);n.add("json-stringify",m&&'{"a":1}'==JSON.stringify({a:0},function(h,d){return d||1}));if(n("json-stringify"))return JSON;var k=function(h){return('"'+h.replace(/(["\\])/g,"\\$1")+'"').replace(/[\f]/g,
"\\f").replace(/[\b]/g,"\\b").replace(/[\n]/g,"\\n").replace(/[\t]/g,"\\t").replace(/[\r]/g,"\\r")};return{parse:n("json-parse")?JSON.parse:function(h,d){if(d&&!/^([\s\[\{]*(?:"(?:\\.|[^"])*"|-?\d[\d\.]*(?:[Ee][+-]?\d+)?|null|true|false|)[\s\]\}]*(?:,|:|$))+$/.test(h))throw new SyntaxError("Invalid characters in JSON");return eval("("+h+")")},stringify:function(h,d,b){function c(h,a,e){d&&(h=d(e,h));var q;q=typeof h;if("number"==q)return isFinite(h)?h+"":"null";if("boolean"==q)return h+"";if(null===
h)return"null";if("string"==typeof h)return k(h);if("function"==q||"undefined"==q)return g;if("function"==typeof h.toJSON)return c(h.toJSON(e),a,e);if(h instanceof Date)return'"{FullYear}-{Month+}-{Date}T{Hours}:{Minutes}:{Seconds}Z"'.replace(/\{(\w+)(\+)?\}/g,function(a,b,c){a=h["getUTC"+b]()+(c?1:0);return 10>a?"0"+a:a});if(h.valueOf()!==h)return c(h.valueOf(),a,e);var p=b?a+b:"",w=b?" ":"",r=b?"\n":"";if(h instanceof Array){var w=h.length,v=[];for(e=0;e<w;e++)q=c(h[e],p,e),"string"!=typeof q&&
(q="null"),v.push(r+p+q);return"["+v.join(",")+r+a+"]"}v=[];for(e in h){var m;if(h.hasOwnProperty(e)){if("number"==typeof e)m='"'+e+'"';else if("string"==typeof e)m=k(e);else continue;q=c(h[e],p,e);"string"==typeof q&&v.push(r+p+m+":"+w+q)}}return"{"+v.join(",")+r+a+"}"}var g;"string"==typeof d&&(b=d,d=null);return c(h,"","")}}})},"dijit/_base/typematic":function(){define([],function(){})},"davinci/ui/SaveAsWidgetForm":function(){define("dojo/_base/declare dijit/_Templated dijit/_Widget davinci/lang/ui dijit/lang/_common dojo/text!./templates/SaveAsWidgetForm.html".split(" "),
function(n,m,k,h,d,b){return dojo.declare("davinci.ui.SaveAsWidgetForm",[k,m],{templateString:b,widgetsInTemplate:!0,postMixInProperties:function(){this.descriptionString=d.sawfDesc;this.nameString=d.name;this.idString=d.id;this.versionString=d.version;this.requiredString=d.required;this.saveString=d.save;this.cancelString=d.cancel;this.metadataTitle=d.sawfMetadataTitle;this.namePromptString=d.sawfNamePrompt;this.idPromptString=d.sawfIdPrompt;this.initialTextareaContent=dojo.toJson(this.metadata,
!0)},postCreate:function(){this.inherited(arguments);dojo.forEach(["nameInputNode","idInputNode","versionInputNode","textareaNode"],function(b){this.connect(this[b],"onChange",function(c){this._onChange(b,c)})},this);this.idInputNode.regExp="[a-zA-Z]+://[^\\s]+";this.connect(this.buttonCancel,"onClick",function(){dijit.byId(this.parentId).hide()})},_onChange:function(b,g){switch(b){case "nameInputNode":this.metadata.name=g;break;case "idInputNode":this.metadata.id=g;break;case "versionInputNode":this.metadata.version=
g;break;case "textareaNode":try{this.metadata=dojo.fromJson(g),this._invalidMetadata=!1}catch(p){this._invalidMetadata=!0}}"textareaNode"!==b&&this.textareaNode.set("value",dojo.toJson(this.metadata,!0));this.buttonSave.set("disabled",!this._isValid())},_isValid:function(){return this.idInputNode.isValid()&&!this._invalidMetadata}})})},"xcf/widgets/CommandPicker":function(){define("dcl/dcl dojo/_base/lang xide/utils xide/types xide/factory xide/widgets/WidgetBase xcf/views/DeviceTreeView xide/views/_PanelDialog".split(" "),
function(n,m,k,h,d,b,c,g){function p(a,b,c,g){return m.replace((g||"")+"deviceScope\x3d{deviceScope}\x26device\x3d{deviceId}\x26driver\x3d{driverId}\x26driverScope\x3d{driverScope}\x26block\x3d{block}",{deviceId:a.id,deviceScope:a.scope,driverId:b.id,driverScope:b.scope,block:c.id})}function a(a,b,g,d,r){g=h.ACTION;d=d?d.info.deviceScope:"user_devices";var e=[g.EDIT,g.RELOAD,g.DELETE,g.SELECTION,g.TOOLBAR,g.SEARCH];"group"===r&&(e.remove(g.EDIT),e.push("File/New Group"));var q=k.addWidget(c,{title:"Devices",
collection:b.getDeviceManager().getStore(d),delegate:b.getDeviceManager(),blockManager:b.getBlockManager(),ctx:b,icon:"fa-sliders",showHeader:!1,scope:d,resizeToParent:!0,permissions:e},null,a,!0);q._on("selectionChanged",function(a){var b=(a=a.selection)&&1==a.length?a[0]:null;if(b){var c="command"===r,e="variable"===r,g="device"===r,d="group"===r,h=b.ref||{},k=h.item,u=h.device,h=h.driver;k&&k.getScope();var v=b.isDir,w=b.isDevice,m=k?k.isCommand||-1!==k.declaredClass.indexOf("model.Command"):!1,
n=k?-1!==k.declaredClass.indexOf("model.Variable"):!1;k&&!0===k.isCommand&&(m=!0);b=m&&c?p(u,h,k,"command://"):n&&e?p(u,h,k,"variable://"):v&&d?b:w&&g?b:!1;b&&(q._selected=b,q._selection=a)}});setTimeout(function(){q.showToolbar(!0);q.resize()},500);return q}b=n(b,{declaredClass:"xcf.widgets.CommandPickerWidget",minHeight:"400px;",value:"",options:null,title:"Command",templateString:"\x3cdiv class\x3d'widgetContainer widgetBorder widgetTable' style\x3d''\x3e\x3ctable border\x3d'0' cellpadding\x3d'5px' width\x3d'100%' \x3e\x3ctbody\x3e\x3ctr attachTo\x3d'extensionRoot'\x3e\x3ctd width\x3d'20%' class\x3d'widgetTitle'\x3e\x3cspan\x3e${!title}\x3cspan\x3e\x3c/td\x3e\x3ctd class\x3d'widgetValue2' valign\x3d'middle' attachTo\x3d'valueNode'\x3e\x3c/td\x3e\x3ctd class\x3d'extension' width\x3d'25px' attachTo\x3d'button0'\x3e\x3c/td\x3e\x3ctd class\x3d'extension' width\x3d'25px' attachTo\x3d'button1'\x3e\x3c/td\x3e\x3ctd class\x3d'extension' width\x3d'25px' attachTo\x3d'button2'\x3e\x3c/td\x3e\x3c/tr\x3e\x3c/tbody\x3e\x3c/table\x3e\x3cdiv attachTo\x3d'expander' onclick\x3d'' style\x3d'width:100%;'\x3e\x3c/div\x3e\x3cdiv attachTo\x3d'last'\x3e\x3c/div\x3e\x3c/div\x3e",
onValueChanged:function(a,b){a=a.newValue||a;this.setValue(a);var c=this.userData.block,e=c?c.scope:null;b&&(b=b._selection||[],b[0]&&b[0].ref&&b[0].ref.item&&(e=b[0].ref.item.scope),c=e?e.toFriendlyName&&e.toFriendlyName(c,a):a,a=_.isString(a)?a:a.name,this.commandWidget.set("value",a,c))},onSelect:function(b,c,d){var e=this,q=this.userData;k.mixin({},this.options);k.toString(this.userData.value);var p="command"===q.pickerType?"Select Command":"Select Variable";"group"===q.pickerType&&(p="Select Group");
"device"===q.pickerType&&(p="Select Device");return(new g({size:h.DIALOG_SIZE.SIZE_NORMAL,bodyCSS:{height:"auto","min-height":"500px",padding:"8px","margin-right":"16px"},picker:null,title:p,onOk:function(){var a=e.picker._selected;a&&e.onValueChanged(a,e.picker)},onShow:function(g,h,p){g=a(h,b,c,d,q.pickerType);e.picker=g;e.add(g,null,!1);return $(g.domNode)}})).show()},postMixInProperties:function(){this.inherited(arguments);this.userData&&this.userData.title&&(this.title=this.userData.title);if(this.userData&&
!0===this.userData.vertical||!0===this.vertical)this.templateString="\x3cdiv class\x3d'widgetContainer widgetBorder widgetTable' style\x3d''\x3e\x3ctable border\x3d'0' cellpadding\x3d'5px' width\x3d'100%' \x3e\x3ctbody\x3e\x3ctr attachTo\x3d'extensionRoot'\x3e\x3ctd width\x3d'100%' class\x3d'widgetTitle'\x3e\x3cspan\x3e\x3cb\x3e${!title}\x3c/b\x3e\x3cspan\x3e\x3c/td\x3e\x3c/tr\x3e\x3ctr attachTo\x3d'extensionRoot'\x3e\x3ctd width\x3d'50%' class\x3d'widgetValue2' valign\x3d'middle' attachTo\x3d'valueNode'\x3e\x3c/td\x3e\x3ctd class\x3d'extension' width\x3d'25px' attachTo\x3d'button0'\x3e\x3c/td\x3e\x3ctd class\x3d'extension' width\x3d'25px' attachTo\x3d'button1'\x3e\x3c/td\x3e\x3ctd class\x3d'extension' width\x3d'25px' attachTo\x3d'button2'\x3e\x3c/td\x3e\x3c/tr\x3e\x3c/tbody\x3e\x3c/table\x3e\x3cdiv attachTo\x3d'expander' onclick\x3d'' style\x3d'width:100%;'\x3e\x3c/div\x3e\x3cdiv attachTo\x3d'last'\x3e\x3c/div\x3e\x3c/div\x3e"},
fillTemplate:function(){var a=this,b=k.toString(this.userData.value)||"",c=this.userData,g=c.block||{},h=g.scope||{},p=h&&h.ctx?h.ctx:this.ctx,m=c.pickerType,n=h.driver,z=h.device;p.getDeviceManager();p.getDriverManager();var c=[],y="command"==m,B="group"==m,m="device"==m,C="Command";-1!==b.indexOf("://")&&h.toFriendlyName&&(C=h.toFriendlyName(g,b));m?c.push(k.createCI("value",13,"Select Device",{group:"General",value:b,title:" "})):B?c.push(k.createCI("value",13,"Select Group",{group:"General",value:b,
title:" "})):h.blockStore?c.push(k.createCI("value",3,"Volume",{group:"General",title:C,value:b,widget:{store:h.blockStore,labelField:"name",valueField:"id",search:!0,title:C,query:this.query?this.query:{group:y?"basic":"basicVariables"},templateString:'\x3cselect disabled\x3d"${!disabled}" value\x3d"${!value}" title\x3d"${!title}" data-live-search\x3d"${!search}"  data-style\x3d"${!style}" class\x3d"selectpicker" attachTo\x3d"selectNode"\x3e'}})):c.push(k.createCI("value",13,"Driver Variable",{group:"General",
value:b,title:" "}));d.renderCIS(c,this.valueNode,this).then(function(b){b=b[0];var c=d.createSimpleButton("","fa-magic","btn-default",{style:""});a.commandWidget=b;b._on("onValueChanged",function(b){a.onValueChanged(b)});$(c).click(function(){a.onSelect(p,n,z)});$(a.button0).append(c);a.add(b,null,!1)})},startup:function(){try{this.fillTemplate(),this.onReady()}catch(e){logError(e)}}});n.chainAfter(b,"destroy");return b})},"xide/widgets/MainMenu":function(){define("dcl/dcl xide/types xide/_base/_Widget xlang/i18 xide/mixins/ActionMixin xaction/ActionContext xide/widgets/_MenuMixin4 xide/model/Path xide/$ xide/lodash xide/widgets/_MenuKeyboard".split(" "),
function(n,m,k,h,d,b,c,g,p,a,e){d=n([k,b.dcl,d.dcl],{templateString:'\x3cdiv class\x3d"navbar navbar-default mainMenu bg-opaque"\x3e\x3cnav attachTo\x3d"navigation" class\x3d"" role\x3d"navigation"\x3e\x3cul tabindex\x3d"-1" attachTo\x3d"navBar" class\x3d"nav navbar-nav"/\x3e\x3c/nav\x3e\x3c/div\x3e'});b=n(null,{_lastOpened:null,destroy:function(){this._lastOpened=null},renderTopLevel:function(a,b){var c=this,e=h.localize(a),g="",g=e.charAt(0),d=e.substr(0,0),e=e.substr(1),e=d+'\x3cspan class\x3d"shortcutKey"\x3e'+
g+"\x3c/span\x3e"+e;this.shortcuts[g]=a;b=b||p(this.getRootContainer());a=p('\x3cli tabindex\x3d"-1" class\x3d"dropdown"\x3e\x3ca href\x3d"#" data-delay\x3d"1500" class\x3d"dropdown-toggle" data-toggle\x3d"dropdown"\x3e'+e+'\x3cb class\x3d"caret"\x3e\x3c/b\x3e\x3c/a\x3e\x3c/li\x3e');b.append(a);var q=a.find("A");q.data("owner",this);q.on("click",function(){return c._lastOpened=q});a.on("hide.bs.dropdown",function(a){return c._lastOpened=null});a.on("show.bs.dropdown",function(a){return c._lastOpened=
q});q.bootstrapDropdownHover?q.bootstrapDropdownHover():console.error("bootstrapDropdownHover not loaded!");return a},getRootContainer:function(){return this.navBar}});return n([d,b,c,k.StoreMixin],{target:null,visibility:m.ACTION_VISIBILITY.MAIN_MENU,attachToGlobal:!0,declaredClass:"xide.widgets.MainMenu",shortcuts:null,_topLevelMenu:null,_altDown:!1,_shiftDown:!1,addContext:function(a,b){var c,e;"undefined"!==typeof b.id&&"undefined"!==typeof b.data?(c=b.id,e=p("body").find("#dropdown-"+c)[0],"undefined"===
typeof e&&(e=this.buildMenu(b.data,c),a.append(e))):(c=(new Date).getTime(),e=this.buildMenu(b,c),a.append(e));return e},onRootAction:function(a,b){return this.renderTopLevel(a,b)},setActionStore:function(b,c){this._clear();this._tmpActions=[];delete this._topLevelMenu;this._topLevelMenu={};if(this.store=b){this.addActionStore(b);var e=this,d=p(e.getRootContainer()),q=e.buildActionTree(b,c),k=q.allActionPaths;a.each(q.root,function(q,p){var r=e.onRootAction(p,d);e._topLevelMenu[p]=r;var u={header:""},
v=[],w=q.grouped,m="";a.each(q,function(d){var q=e.getAction(d,b),p=!1;q||(p=!0,q=e.createAction(d));if(q){var r=function(d,q){var h=(new g(d)).getChildren(k,!1),h=(d=0<h.length)?e.toActions(h,b):null;if(d&&h){var p=[];a.each(h,function(a){var b=e.getActionData(a),b=e.toMenuItem(a,c,b.label,b.icon,b.visibility,!0);e.addReference(a,b);p.push(b);0<(new g(a.command)).getChildren(k,!1).length&&r(a.command,b)});q.subMenu=p}},n=e.getActionData(q),x=n.icon,A=n.label,z=n.visibility,n=n.group;!1!==z&&(!p&&
n&&w[n]&&1<=w[n].length&&m!==n&&(u={header:2<=w[n].length?h.localize(n):""},v.push(u),m=n),p=e.toMenuItem(q,c,A,x,z||{},!0),v.push(p),z.widget=p,e.addReference(q,p),r(d,p))}});return e.attach(r,v)});e.onDidRenderActions(b,c)}},startup:function(){this.init({preventDoubleContext:!1});if(this.attachToGlobal){var a=p("#staticTopContainer");if(!a[0]){var b=p("body"),a=p('\x3cdiv id\x3d"staticTopContainer" class\x3d""\x3e\x3c/div\x3e');b.prepend(a)}a.append(p(this.domNode))}},lastFocused:null,setupKeyboard:function(a){p(a).on("keydown",
function(a){try{if(a&&a.target&&a.target.className){var b=a.target.className.toLowerCase();if("BUTTON"!==a.target.tagName&&-1==b.indexOf("input")){16===a.keyCode&&(this._shiftDown="keydown"===a.type);if(27==a.keyCode){var c=this.keyboardController.toNavigationData(p(a.target),this.getRootContainer());c&&c.element&&this.keyboardController.close(c.element);p(this.lastFocused).focus()}this._shiftDown&&a.key in this.shortcuts&&(this.lastFocused=document.activeElement,this.keyboardController.openRoot(null,
this._topLevelMenu[this.shortcuts[a.key]]))}}}catch(v){logError(v,"error in keyboard handler")}}.bind(this))},init:function(a){if(!this._didInit){this._didInit=!0;this.shortcuts={};this.setupKeyboard(this.delegate._domNode||"undefined"!==typeof document?document:null);var b=this.getDefaultOptions();this.keyboardController=new e;this.keyboardController.setup(this);var b=p.extend({},b,a),c=this;a=p(document);this.__on(a,"click",null,function(a){c.isOpen&&(c.isOpen=!1,c.onClose(a),p(".dropdown-context").css({display:""}).find(".drop-left").removeClass("drop-left"))});
b.preventDoubleContext&&this.__on(a,"contextmenu",".dropdown-context",function(a){a.preventDefault()});this.__on(this.getRootContainer(),"mouseenter",".dropdown-menu \x3eLI",function(a){if(a=this.keyboardController.toNavigationData(p(a.target),c.getRootContainer())){var b=a.parent;b.focus();a.element.focus();b.data("currentTarget",a.element);this.keyboardController.initContainer(b)}}.bind(this))}}})})},"dijit/layout/TabContainer":function(){define(["dojo/_base/declare"],function(n){return n(null,
{})})},"davinci/workbench/ViewLite":function(){define(["dojo/_base/declare","./WidgetLite","../ve/States"],function(n,m){return n("davinci.workbench.ViewLite",[m],{_editor:null,_widget:null,_subWidget:null,constructor:function(k,h){this.subscriptions=[];this.publishing={};this.subscribe("/davinci/ui/editorSelected",dojo.hitch(this,this._editorSelected));this.subscribe("/davinci/ui/widgetSelected",dojo.hitch(this,this._widgetSelectionChanged))},_widgetSelectionChanged:function(k){if(this._editor)if(k.selection){var h=
k.selection[0];if(h&&this._widget==h&&this._subwidget==h.subwidget)return!1;this._subwidget=(this._widget=h)&&h.subwidget;if(this.onWidgetSelectionChange)this.onWidgetSelectionChange(k)}else console.error("have no selection")},_editorSelected:function(k){this._editor=k.editor;if(this.onEditorSelected)this.onEditorSelected(this._editor)},_subscribe:function(k,h){this.subscriptions.push(dojo.subscribe(k,this,h))},publish:function(k,h){this.publishing[k]=!0;try{dojo.publish(k,h)}catch(d){console.error(d)}delete this.publishing[k]},
destroy:function(){dojo.forEach(this.subscriptions,dojo.unsubscribe);delete this.subscriptions;this._destroyHandles()}})})},"dijit/form/_FormValueWidget":function(){define(["dojo/_base/declare","dojo/sniff","./_FormWidget","./_FormValueMixin"],function(n,m,k,h){return n("dijit.form._FormValueWidget",[k,h],{_layoutHackIE7:function(){if(7==m("ie"))for(var d=this.domNode,b=d.parentNode,c=d.firstChild||d,g=c.style.filter,h=this;b&&0==b.clientHeight;)(function(){var a=h.connect(b,"onscroll",function(){h.disconnect(a);
c.style.filter=(new Date).getMilliseconds();h.defer(function(){c.style.filter=g})})})(),b=b.parentNode}})})},"xide/mixins/ActionProvider":function(){define(["dcl/inherited","xaction/DefaultActions","xaction/ActionProvider"],function(n,m,k){return k})},"xcf/GUIALL":function(){define("dojo/_base/declare dojo/dom-geometry dojo/dom-construct dojo/dom-style xide/factory/Widgets xide/factory/Views xide/widgets/FileEditor xide/form/FilterSelect xide/views/CIView xide/views/_Dialog xide/views/_CIDialog xide/layout/Container xide/layout/_Accordion xide/layout/_TabContainer".split(" "),
function(n,m,k,h){dojo.place||(dojo.place=k.place);dojo.create||(dojo.create=k.create);return n("xcf.GUIALL",null,{})})},"xide/views/_CIPanelDialog":function(){define(["dcl/dcl","xide/utils","xide/views/_Panel","xide/views/CIView"],function(n,m,k,h){k=n(k,{containerClass:"CIDialog",getContentSize:function(){return{width:"600px",height:"500px"}},getDefaultOptions:function(d){var b=this,c={contentSize:this.getContentSize(),footerToolbar:[{item:"\x3cbutton style\x3d'margin-left:5px;' type\x3d'button'\x3e\x3cspan class\x3d'...'\x3e\x3c/span\x3e\x3c/button\x3e",
event:"click",btnclass:"btn btn-danger btn-sm",btntext:" Cancel",callback:function(c){h.release(b.cis);c.data.close();b.onCancel()}},{item:"\x3cbutton style\x3d'margin-left:5px;' type\x3d'button'\x3e\x3cspan class\x3d'...'\x3e\x3c/span\x3e\x3c/button\x3e",event:"click",btnclass:"btn btn-primary btn-sm",btntext:" Ok",callback:function(c){h.release(b.cis);!1!==b.onOk(b.changedCIS,c.data)&&c.data.close()}}]};m.mixin(c,d);return c},CIViewClass:h,CIViewOptions:{},onShow:function(d,b,c){this.changedCIS=
[];var g=this;this.cisView=m.addWidget(this.CIViewClass,m.mixin({delegate:this,resizeToParent:!0,ciSort:!1,options:{groupOrder:{General:1,Send:2,Advanced:4,Description:5}},cis:this.cis},this.CIViewOptions),this,b,!1);g.add(this.cisView);this.cisView.startup();this.cisView.startDfd.then(function(){g.resize()});this.cisView._on("valueChanged",function(b){var a=_.find(g.changedCIS,{ci:b.ci});a&&g.changedCIS.remove(a);g.changedCIS.push({ci:b.ci,oldValue:b.oldValue,newValue:b.newValue,dst:b.ci.dst,props:b.props})});
return[this.cisView]}});n.chainAfter(k,"onShow");return k})},"xgrid/BaseLite":function(){define("xdojo/declare xide/types xgrid/typesLite xide/utils/ObjectUtils xide/utils dgrid/OnDemandGrid xgrid/Defaults xgrid/Layout xgrid/Focus xgrid/ListRenderer xgrid/ThumbRenderer xgrid/TreeRenderer dgrid/util/misc".split(" "),function(n,m,k,h,d,b,c,g,p,a,e,q,u){function w(a,b,c,e){return n.classFactory(a,b,c,e,z)}function r(a,b){return b.some(function(b){return 0<=a.indexOf(b)})}function v(a,b,c,e,g,q){var h=
!1;b=b||y;if(!b&&!c)return y;b&&(h=r(x,_.keys(e)),q=d.cloneKeys(q||z),h&&(d.mixin(q,e),q=_.pick(q,_.identity)),b=w(a,q,[y],b));e=[];h={};if(b&&c){q=d.cloneKeys(A);d.mixin(q,c);for(var p in q)if(c=q[p],q[p]){var k=null;!0===c?k=A[p]:A[p]?(k=A[p],k=r(["CLASS","CLASSES","IMPLEMENTATION"],_.keys(c))?d.mixin(d.cloneKeys(k),c):k):k=c;k&&(c=w(p,k.CLASSES||[],[k.CLASS],k.IMPLEMENTATION),e.push(c),h[p]=c)}0<e.length&&(b=w(a,[b],e,g));b.prototype._featureMap=h}return b}var x="EVENTED GRID EDITOR RENDERER DEFAULTS LAYOUT FOCUS i18".split(" "),
A=m.DEFAULT_GRID_FEATURES_LITE,z=m.GRID_BASES;k=m.DEFAULT_GRID_OPTIONS;h={_isHighlighting:!1,_featureMap:{},options:d.clone(m.DEFAULT_GRID_OPTIONS),getContextMenu:function(){},getToolbar:function(){},isRendered:function(a){if(!a)return null!=this.bodyNode;a=this._normalize(a);var b=this.collection;if(a){a=a.data;var b=b.idProperty,c=this.getRows(!0);if(c)for(var e=0;e<c.length;e++){var g=this.row(c[e]);if(g&&g.data&&g.data&&a&&g.data[b]===a[b])return!0}}return!1},highlightRow:function(){},getParent:function(){return this._parent},
get:function(a){var b=this.getParent();return"iconClass"===a&&b&&b.icon?b.icon():this.inherited(arguments)},set:function(a,b){var c=this.getParent();if("iconClass"===a){var e=c.set;if(e)e.apply(c,[a,b]);else if(c&&c.icon)return c.icon(b),!0}"title"===a&&b&&c&&((e=c.set)?e.apply(c,[a,b]):c&&c.title&&c.title(b));if("loading"===a&&(this.__loading=b,c)){if(c.startLoading)return e=c._options.icon,!0===b?(c.startLoading("",.5),c.icon("fa-spinner fa-spin")):(c.finishLoading(),c.icon(e)),!0;c.set&&c.set("loading",
b)}return this.inherited(arguments)},runAction:function(a){a.command==m.ACTION.HEADER&&this._setShowHeader(!this.showHeader);return this.inherited(arguments)},highlight:function(a){var b=$(this.domNode.parentNode);a?this._isHighlighting||(this._isHighlighting=!0,b.addClass("highlight")):(this._isHighlighting=!1,b.removeClass("highlight"))},getState:function(a){a=this.inherited(arguments)||{};a.showHeader=this.showHeader;return a},postMixInProperties:function(){var a=this.state;a&&(this.showHeader=
a.showHeader);return this.inherited(arguments)},renderArray:function(a){if(this.__loading)return[];this._lastData=a;return this.inherited(arguments)},getData:function(){return this._lastData},refreshItem:function(a,b){b&&(this._muteSelectionEvents=!0);this.collection.emit("update",{target:a});b&&(this._muteSelectionEvents=!1)},onShow:function(){this._emit(m.EVENTS.ON_VIEW_SHOW,this);return this.inherited(arguments)},isActive:function(a){return d.isDescendant(this.domNode,a||document.activeElement)},
_showHeader:function(a){$(this.domNode).find(".dgrid-header").each(function(b,c){$(c).css("display",a?"":"none")});$(this.domNode).find(".dgrid-scroller").each(function(b,c){$(c).css("margin-top",a?26:0)})},destroy:function(){this._emit("destroy",this);return this.inherited(arguments)},hasFeature:function(a){return r(["name"],_.keys(this._featureMap))},getRows:function(a,b){var c=[],e=this,g=$(e.domNode).find(".dgrid-row");_.each(g,function(b){(b=e.row(b))&&b.element&&c.push(b[a?"element":"data"])});
return b?c.filter(b):c},startup:function(){var a=this.inherited(arguments);this.columns&&_.each(this.columns,function(a){a.width&&this.styleColumn(parseInt(a.id),"width:"+a.width)},this);var b=this;this.showExtraSpace&&this.on("dgrid-refresh-complete",function(){var a=b.getRows(),c=$(b.contentNode).find(".dgrid-extra");a.length&&!c.length&&(c=$('\x3cdiv class\x3d"dgrid-extra" style\x3d"width:100%;height:80px"\x3e\x3c/div\x3e'),$(b.contentNode).append(c),c.on("click",function(){b.deselectAll()}),c.on("contextmenu",
function(){b.deselectAll()}))});return a},removeRow:function(){var a=this.inherited(arguments);if(this.showExtraSpace){var b=this.getRows(),c=$(this.contentNode).find(".dgrid-extra");b.length||c.remove()}return a}};var y=n("xgrid.DefaultLite",null,h);h=v("xgrid/Base",{options:d.clone(k)},{SELECTION:!0,KEYBOARD_SELECTION:!0,PAGINATION:!1,COLUMN_HIDER:!1},null,{});h.createGridClass=v;h.classFactory=w;h.DEFAULT_GRID_FEATURES=A;h.DEFAULT_GRID_BASES=z;h.DEFAULT_GRID_OPTIONS=k;h.DEFAULT_GRID_OPTION_KEYS=
m.DEFAULT_GRID_OPTION_KEYS;return h})},"davinci/ve/tools/_Tool":function(){define(["dojo/_base/declare","davinci/ve/widget","davinci/ve/metadata","davinci/ve/utils/GeomUtils"],function(n,m,k,h){return n("davinci.ve.tools._Tool",null,{_getTarget:function(){return this._target},_setTarget:function(d,b){this._targetOverlays||(this._targetOverlays=[]);if(!this._matchesTargetOverlay(d)){for(var c=this._context.getContainerNode(),g;d&&d!=c;)if((g=m.getEnclosingWidget(d))&&!g.getContext())d=g.domNode.parentNode,
g=null;else{g&&davinci.ve.metadata.queryDescriptor(g.type,"enablePointerEvents")?g=null:g&&g.getContainerNode()&&(davinci.ve.metadata.queryDescriptor(g.type,"isControl")||(g=null));break}g?(this._target=g,this._updateTargetOverlays(b),this._insertTargetOverlays()):(this._removeTargetOverlays(),this._target=null)}},_updateTargetOverlays:function(d){this._removeTargetOverlays();if(this._target){var b=this._target.domNode,c=this._getMaxZIndex(b);if(this._targetOverlays){var g=this._target.getHelper();
if(g&&g.getTargetOverlays&&(g=g.getTargetOverlays(this._target))&&0<g.length){dojo.forEach(g,function(a){a=this._getNewTargetOverlay(a,a.x,a.y,a.width,a.height,c);this._targetOverlays.push(a)},this);return}var g=b.offsetLeft,p=b.offsetTop,a=b.offsetWidth,e=b.offsetHeight;if(d){var q,k=h.getBorderBoxPageCoordsCached(b);d.pageX<k.l&&(q=k.l-d.pageX,g-=q,a+=q);d.pageY<k.t&&(q=k.t-d.pageY,p-=q,e+=q);d.pageX>k.l+k.w&&(q=d.pageX-(k.l+k.w),a+=q);d.pageY>k.t+k.h&&(q=d.pageY-(k.t+k.h),e+=q)}d=this._getNewTargetOverlay(b,
g,p,a,e,c);this._targetOverlays.push(d)}}},_getMaxZIndex:function(d){var b=dojo.style(d,"zIndex");dojo.query("*",d).forEach(function(c){c=dojo.style(c,"zIndex");var g=Number(c),d=Number(b);isNaN(g)||(isNaN(d)?b=c:g>d&&(b=c))});return b},_getNewTargetOverlay:function(d,b,c,g,h,a){return this._context.getDojo().create("div",{className:"editFeedback",style:{position:"absolute",opacity:.1,left:b+"px",top:c+"px",width:g+"px",height:h+"px",zIndex:a}})},_insertTargetOverlays:function(){if(this._targetOverlays&&
this._target){var d=this._target.domNode,b=d.parentNode;dojo.forEach(this._targetOverlays,function(c){b.insertBefore(c,d.nextSibling)},this)}},_removeTargetOverlays:function(){if(this._targetOverlays&&this._target)for(var d=this._targetOverlays.length-1;0<=d;d--)dojo.destroy(this._targetOverlays[d]),this._targetOverlays.pop()},_matchesTargetOverlay:function(d){return dojo.some(this._targetOverlays,function(b){return d==b},this)}})})},"xideve/views/VisualEditorTools":function(){define(["dcl/dcl","davinci/ve/widget"],
function(n,m){return n(null,{declaredClass:"xideve/views/VisualEditorTools",getEditors:function(){var k=[];if(this.parentContainer)for(var h=this.parentContainer.getChildren(),d=0;d<h.length;d++){var b=h[d];"davinci.ve.PageEditor"===b.declaredClass&&k.push(b)}return k},getEditorContext:function(){var k=null;this.editor&&this.editor.currentEditor&&this.editor.currentEditor.context&&(k=this.editor.currentEditor.context);return k},getPageEditor:function(){return this.editor},onWidgetAction:function(k){},
_sameSize:function(){var k=this.getEditorContext();k.getDocument();var h=this.getSelection(),d=$(h[0].domNode),b=d.css("width"),d=d.css("height");h.shift();for(var c=0;c<h.length;c++){var g=h[c];$(g.domNode);(g=k.getCommandForStyleChange({appliesTo:"inline",appliesToWhichState:null,cascade:null,values:[{width:b,height:d}]},[g]))&&k.getCommandStack().execute(g)}},_sameWidth:function(){var k=this.getEditorContext();k.getDocument();var h=this.getSelection(),d=$(h[0].domNode),b=d.css("width");d.css("height");
h.shift();for(d=0;d<h.length;d++){var c=h[d];$(c.domNode);(c=k.getCommandForStyleChange({appliesTo:"inline",appliesToWhichState:null,cascade:null,values:[{width:b}]},[c]))&&k.getCommandStack().execute(c)}},_sameHeight:function(){var k=this.getEditorContext();k.getDocument();var h=this.getSelection(),d=$(h[0].domNode);d.css("width");d=d.css("height");h.shift();this.getSelection();for(var b=0;b<h.length;b++){var c=h[b];$(c.domNode);if(c=k.getCommandForStyleChange({appliesTo:"inline",appliesToWhichState:null,
cascade:null,values:[{height:d}]},[c]))k.getCommandStack().execute(c,!0),this.getSelection(),c._newId&&m.byId(c._newId,context.getDocument())}},_alignBottomHorizontal:function(){var k=this.getEditorContext(),h=k.getDocument(),d=this.getSelection(),b=d[0];d.shift();for(var c=0;c<d.length;c++){var g=d[c],p=(new jQuery.PositionCalculator({item:$(b.domNode),target:$(g.domNode),itemAt:"bottom right",targetAt:"bottom left",boundary:$(h.body)})).calculate(),a=$(g.domNode),e=a.position().top;a.position();
(g=k.getCommandForStyleChange({appliesTo:"inline",appliesToWhichState:null,cascade:null,values:[{top:e+-1*p.moveBy.y+"px"}]},[g]))&&k.getCommandStack().execute(g)}},_alignTopHorizontal:function(){var k=this.getEditorContext(),h=k.getDocument(),d=this.getSelection(),b=d[0];d.shift();for(var c=0;c<d.length;c++){var g=d[c],p=(new jQuery.PositionCalculator({item:$(b.domNode),target:$(g.domNode),itemAt:"top right",targetAt:"top left",boundary:$(h.body)})).calculate(),a=$(g.domNode),e=a.position().top;
a.position();(g=k.getCommandForStyleChange({appliesTo:"inline",appliesToWhichState:null,cascade:null,values:[{top:e+-1*p.moveBy.y+"px"}]},[g]))&&k.getCommandStack().execute(g)}},_alignRightVertical:function(){var k=this.getEditorContext(),h=k.getDocument(),d=this.getSelection(),b=d[0];d.shift();for(var c=0;c<d.length;c++){var g=d[c],p=(new jQuery.PositionCalculator({item:$(b.domNode),target:$(g.domNode),itemAt:"bottom right",targetAt:"top right",boundary:$(h.body)})).calculate(),a=$(g.domNode);a.position();
p={appliesTo:"inline",appliesToWhichState:null,cascade:null,values:[{left:a.position().left+-1*p.moveBy.x+"px"}]};(g=k.getCommandForStyleChange(p,[g]))&&k.getCommandStack().execute(g)}},_alignCenterVertical:function(){var k=this.getEditorContext(),h=k.getDocument(),d=this.getSelection(),b=d[0];d.shift();for(var c=0;c<d.length;c++){var g=d[c],p=(new jQuery.PositionCalculator({item:$(b.domNode),target:$(g.domNode),itemAt:"bottom center",targetAt:"top center",boundary:$(h.body)})).calculate(),a=$(g.domNode);
a.position();p={appliesTo:"inline",appliesToWhichState:null,cascade:null,values:[{left:a.position().left+-1*p.moveBy.x+"px"}]};(g=k.getCommandForStyleChange(p,[g]))&&k.getCommandStack().execute(g)}},_alignLeftVertical:function(){var k=this.getEditorContext(),h=k.getDocument(),d=this.getSelection(),b=d[0];d.shift();for(var c=0;c<d.length;c++){var g=d[c],p=(new jQuery.PositionCalculator({item:$(b.domNode),target:$(g.domNode),itemAt:"bottom left",targetAt:"top left",boundary:$(h.body)})).calculate(),
a=$(g.domNode);a.position();p={appliesTo:"inline",appliesToWhichState:null,cascade:null,values:[{left:a.position().left+-1*p.moveBy.x+"px"}]};(g=k.getCommandForStyleChange(p,[g]))&&k.getCommandStack().execute(g,!0)}}})})},"davinci/ve/actions/ManageStates":function(){define("dojo/_base/declare davinci/Runtime davinci/Workbench davinci/ve/actions/ContextAction davinci/workbench/Preferences dijit/registry davinci/ve/States davinci/actions/Action davinci/lang/ve davinci/ve/actions/_ManageStatesWidget".split(" "),
function(n,m,k,h,d,b,c,g,p,a){return n("davinci.ve.actions.ManageStates",[h],{run:function(){var a;m.currentEditor&&m.currentEditor.currentEditor&&m.currentEditor.currentEditor.context&&(a=m.currentEditor.currentEditor.context,(a=c.getFocus(a.rootNode))&&a.stateContainerNode&&(a=new davinci.ve.actions._ManageStatesWidget({node:a.stateContainerNode}),a._calledBy="ManageStates",a.okButton.set("label",p.updateLabel),a.updateDialog(),k.showModal(a,p.manageStates,{width:400},null,!0)))},isEnabled:function(a){a=
this.fixupContext(a);var b=k.getOpenEditor();return b&&a?"davinci.ve.PageEditor"==b.declaredClass?0<a.getSelection().length:!1:!1},shouldShow:function(a){return(a=(a=this.fixupContext(a))?a.editor:null)&&"davinci.ve.PageEditor"==a.declaredClass}})})},"dojo/regexp":function(){define(["./_base/kernel","./_base/lang"],function(n,m){var k={};m.setObject("dojo.regexp",k);k.escapeString=function(h,d){return h.replace(/([\.$?*|{}\(\)\[\]\\\/\+^])/g,function(b){return d&&-1!=d.indexOf(b)?b:"\\"+b})};k.buildGroupRE=
function(h,d,b){if(!(h instanceof Array))return d(h);for(var c=[],g=0;g<h.length;g++)c.push(d(h[g]));return k.group(c.join("|"),b)};k.group=function(h,d){return"("+(d?"?:":"")+h+")"};return k})},"davinci/ve/utils/StyleArray":function(){define([],function(){return{mergeStyleArrays:function(n,m){n||(n=[]);m||(m=[]);n=dojo.clone(n);for(var k=0;k<m.length;k++)for(var h in m[k])for(j=n.length-1;0<=j;j--){var d=n[j],b;for(b in d)if(h==b){n.splice(j,1);break}}return n.concat(m)}}})},"davinci/ve/commands/ReparentCommand":function(){define(["dojo/_base/declare",
"davinci/ve/commands/_hierarchyCommand","../widget","../States","davinci/ve/commands/ModifyCommand"],function(n,m,k,h,d){return n("davinci.ve.commands.ReparentCommand",[m],{name:"reparent",constructor:function(b,c,g){this._id=b?b.id:void 0;this._newParentId=c?c.id:"myapp";this._newIndex=g},execute:function(){if(this._id&&this._newParentId){var b=k.byId(this._id);if(b){var c=b.getParent();c||(c=dojo.byId("myapp"));var g=k.byId(this._newParentId);g||(g=dojo.byId("myapp"));var p=this._isRefreshOnDescendantChange(b);
this._oldParentId||(this._oldParentId=c.id,this._oldIndex=dojo.indexOf(c.getChildren(),b),this._newIndex&&this._newIndex.domNode&&(this._newIndex=g.indexOf(this._newIndex)));c.removeChild(b);var a=g.getContext();g.addChild(b,g==c&&this._oldIndex<this._newIndex?this._newIndex-1:this._newIndex);if(a){var e=b.getHelper();e&&e.reparent&&e.reparent(b);b.startup();b.renderWidget();a.widgetChanged(a.WIDGET_REPARENTED,b,[c,g]);c=this._isRefreshOnDescendantChange(b);p&&(p=new d(p,null,null,a),p.execute());
c&&(p=new d(c,null,null,a),p.execute())}h.resetState(b.domNode)}}},undo:function(){if(this._id&&this._oldParentId&&this._newParentId){var b=k.byId(this._id);if(b){var c=k.byId(this._oldParentId);if(c){var g=k.byId(this._newParentId);if(g){var p=this._isRefreshOnDescendantChange(b),a=c.getContext();g.removeChild(b);c.addChild(b,this._oldIndex);if(a){var e=b.getHelper();e&&e.reparent&&e.reparent(b);b.startup();b.renderWidget();a.widgetChanged(a.WIDGET_REPARENTED,b,[c,g]);c=this._isRefreshOnDescendantChange(b);
p&&(p=new d(p,null,null,a),p.execute());c&&(p=new d(c,null,null,a),p.execute())}h.resetState(b.domNode)}}}}}})})},"xide/views/ACEEditor":function(){define(["dojo/_base/declare"],function(n){return n("xide.views.ACEEditor",null,{})})},"dojo/fx":function(){define("./_base/lang ./Evented ./_base/kernel ./_base/array ./aspect ./_base/fx ./dom ./dom-style ./dom-geometry ./ready require".split(" "),function(n,m,k,h,d,b,c,g,p,a,e){k.isAsync||a(0,function(){e(["./fx/Toggler"])});k=k.fx={};a={_fire:function(a,
b){this[a]&&this[a].apply(this,b||[]);return this}};var q=function(a){this._index=-1;this._animations=a||[];this._current=this._onAnimateCtx=this._onEndCtx=null;this.duration=0;h.forEach(this._animations,function(a){this.duration+=a.duration;a.delay&&(this.duration+=a.delay)},this)};q.prototype=new m;n.extend(q,{_onAnimate:function(){this._fire("onAnimate",arguments)},_onEnd:function(){this._onAnimateCtx.remove();this._onEndCtx.remove();this._onAnimateCtx=this._onEndCtx=null;this._index+1==this._animations.length?
this._fire("onEnd"):(this._current=this._animations[++this._index],this._onAnimateCtx=d.after(this._current,"onAnimate",n.hitch(this,"_onAnimate"),!0),this._onEndCtx=d.after(this._current,"onEnd",n.hitch(this,"_onEnd"),!0),this._current.play(0,!0))},play:function(a,b){this._current||(this._current=this._animations[this._index=0]);if(!b&&"playing"==this._current.status())return this;var c=d.after(this._current,"beforeBegin",n.hitch(this,function(){this._fire("beforeBegin")}),!0),e=d.after(this._current,
"onBegin",n.hitch(this,function(a){this._fire("onBegin",arguments)}),!0),g=d.after(this._current,"onPlay",n.hitch(this,function(a){this._fire("onPlay",arguments);c.remove();e.remove();g.remove()}));this._onAnimateCtx&&this._onAnimateCtx.remove();this._onAnimateCtx=d.after(this._current,"onAnimate",n.hitch(this,"_onAnimate"),!0);this._onEndCtx&&this._onEndCtx.remove();this._onEndCtx=d.after(this._current,"onEnd",n.hitch(this,"_onEnd"),!0);this._current.play.apply(this._current,arguments);return this},
pause:function(){if(this._current){var a=d.after(this._current,"onPause",n.hitch(this,function(b){this._fire("onPause",arguments);a.remove()}),!0);this._current.pause()}return this},gotoPercent:function(a,b){this.pause();var c=this.duration*a;this._current=null;h.some(this._animations,function(a){if(a.duration<=c)return this._current=a,!0;c-=a.duration;return!1});this._current&&this._current.gotoPercent(c/this._current.duration,b);return this},stop:function(a){if(this._current){if(a){for(;this._index+
1<this._animations.length;++this._index)this._animations[this._index].stop(!0);this._current=this._animations[this._index]}var b=d.after(this._current,"onStop",n.hitch(this,function(a){this._fire("onStop",arguments);b.remove()}),!0);this._current.stop()}return this},status:function(){return this._current?this._current.status():"stopped"},destroy:function(){this._onAnimateCtx&&this._onAnimateCtx.remove();this._onEndCtx&&this._onEndCtx.remove()}});n.extend(q,a);k.chain=function(a){return new q(a)};
var u=function(a){this._animations=a||[];this._connects=[];this.duration=this._finished=0;h.forEach(a,function(a){var b=a.duration;a.delay&&(b+=a.delay);this.duration<b&&(this.duration=b);this._connects.push(d.after(a,"onEnd",n.hitch(this,"_onEnd"),!0))},this);this._pseudoAnimation=new b.Animation({curve:[0,1],duration:this.duration});var c=this;h.forEach("beforeBegin onBegin onPlay onAnimate onPause onStop onEnd".split(" "),function(a){c._connects.push(d.after(c._pseudoAnimation,a,function(){c._fire(a,
arguments)},!0))})};n.extend(u,{_doAction:function(a,b){h.forEach(this._animations,function(c){c[a].apply(c,b)});return this},_onEnd:function(){++this._finished>this._animations.length&&this._fire("onEnd")},_call:function(a,b){var c=this._pseudoAnimation;c[a].apply(c,b)},play:function(a,b){this._finished=0;this._doAction("play",arguments);this._call("play",arguments);return this},pause:function(){this._doAction("pause",arguments);this._call("pause",arguments);return this},gotoPercent:function(a,b){var c=
this.duration*a;h.forEach(this._animations,function(a){a.gotoPercent(a.duration<c?1:c/a.duration,b)});this._call("gotoPercent",arguments);return this},stop:function(a){this._doAction("stop",arguments);this._call("stop",arguments);return this},status:function(){return this._pseudoAnimation.status()},destroy:function(){h.forEach(this._connects,function(a){a.remove()})}});n.extend(u,a);k.combine=function(a){return new u(a)};k.wipeIn=function(a){var e=a.node=c.byId(a.node),q=e.style,h;a=b.animateProperty(n.mixin({properties:{height:{start:function(){h=
q.overflow;q.overflow="hidden";if("hidden"==q.visibility||"none"==q.display)return q.height="1px",q.display="",q.visibility="",1;var a=g.get(e,"height");return Math.max(a,1)},end:function(){return e.scrollHeight}}}},a));var p=function(){q.height="auto";q.overflow=h};d.after(a,"onStop",p,!0);d.after(a,"onEnd",p,!0);return a};k.wipeOut=function(a){var e=(a.node=c.byId(a.node)).style,g;a=b.animateProperty(n.mixin({properties:{height:{end:1}}},a));d.after(a,"beforeBegin",function(){g=e.overflow;e.overflow=
"hidden";e.display=""},!0);var q=function(){e.overflow=g;e.height="auto";e.display="none"};d.after(a,"onStop",q,!0);d.after(a,"onEnd",q,!0);return a};k.slideTo=function(a){var e=null,q=null,h=function(a){return function(){var b=g.getComputedStyle(a),c=b.position;e="absolute"==c?a.offsetTop:parseInt(b.top)||0;q="absolute"==c?a.offsetLeft:parseInt(b.left)||0;"absolute"!=c&&"relative"!=c&&(b=p.position(a,!0),e=b.y,q=b.x,a.style.position="absolute",a.style.top=e+"px",a.style.left=q+"px")}}(a.node=c.byId(a.node));
h();a=b.animateProperty(n.mixin({properties:{top:a.top||0,left:a.left||0}},a));d.after(a,"beforeBegin",h,!0);return a};return k})},"xide/manager/RPCService":function(){define("dojo/_base/declare dojo/_base/kernel dojo/_base/lang xide/rpc/Service xide/rpc/JsonRPC dojo/has dojo/Deferred xide/utils xide/types xide/mixins/EventedMixin xide/encoding/SHA1".split(" "),function(n,m,k,h,d,b,c,g,p,a,e){return n("xide.manager.RPCService",[h,a],{extraArgs:null,signatureField:"sig",signatureToken:null,correctTarget:!0,
sync:!1,defaultOptions:{omit:!0,checkMessages:!0,checkErrors:!0},onError:function(a){if(a)if(1===a.code){if(a.message&&_.isArray(a.message)){this.publish(p.EVENTS.ERROR,{message:a.message.join("\x3cbr/\x3e")});return}}else 0===a.code&&this.publish(p.EVENTS.STATUS,"Ok");this.publish(p.EVENTS.ERROR,{error:a},this)},prepareCall:function(){var a={};this.config&&this.config.RPC_PARAMS&&(this.extraArgs=a=g.mixin(a,this.config.RPC_PARAMS.rpcFixedParams),this.config.RPC_PARAMS.rpcUserField&&(a[this.config.RPC_PARAMS.rpcUserField]=
this.config.RPC_PARAMS.rpcUserValue,this.signatureField=this.config.RPC_PARAMS.rpcSignatureField,this.signatureToken=this.config.RPC_PARAMS.rpcSignatureToken))},runDeferred:function(a,b,e,g){var d=new c;g=g||this.defaultOptions;if(!this.checkCall(a,b,g.omit))return d.reject("method doesnt exists: "+b+" for service class:"+this.serviceClass+" in "+this.declaredClass);this.prepareCall();var q=this;this[this.getServiceClass(a)][b](e).then(function(a){if(g.checkMessages&&a&&a.error&&3==a.error.code)q.onMessages(a.error);
g.checkErrors&&a&&a.error&&a.error&&0!=a.error.code?(q.onError(a.error),d.reject(a.error)):(g.omit&&q.publish(p.EVENTS.STATUS,{message:"Ok!",what:arguments},this),d.resolve(a))},function(a){q.onError(a)});return d},getParameterMap:function(a,b){return(a=this._smd.services[a+"."+b])&&a.parameters?a.parameters:[]},_getRequest:function(a,b){var c=this._smd,e=h.envelopeRegistry.match(a.envelope||c.envelope||"NONE"),g=(a.parameters||a.params||[]).concat(c.parameters||[]);if(e.namedParams){if(1==b.length&&
k.isObject(b[0]))b=b[0];else{for(var d={},q=a.parameters||a.params,p=0;p<q.length;p++)"undefined"==typeof b[p]&&q[p].optional||(d[q[p].name]=b[p]);b=d}if(a.strictParameters||c.strictParameters)for(p in b){d=!1;for(q=0;q<g.length;q++)g[p].name==p&&(d=!0);d||delete b[p]}for(p=0;p<g.length;p++)if(d=g[p],!d.optional&&d.name&&null!=b&&!b[d.name])if(d["default"])b[d.name]=d["default"];else if(!(d.name in b))throw Error("Required parameter "+d.name+" was omitted");}else g&&g[0]&&g[0].name&&1==b.length&&
m.isObject(b[0])&&(b=!1===e.namedParams?h.toOrdered(g,b):b[0]);k.isObject(this._options)&&(b=m.mixin(b,this._options));g=a._schema||a.returns;b=e.serialize.apply(this,[c,a,b]);b._envDef=e;return m.mixin(b,{sync:this.sync,contentType:a.contentType||c.contentType||b.contentType,headers:a.headers||c.headers||b.headers||{},target:b.target||h.getTarget(c,a),transport:a.transport||c.transport||b.transport,envelope:a.envelope||c.envelope||b.envelope,timeout:a.timeout||c.timeout,callbackParamName:a.callbackParamName||
c.callbackParamName,rpcObjectParamName:a.rpcObjectParamName||c.rpcObjectParamName,schema:g,handleAs:b.handleAs||"auto",preventCache:a.preventCache||c.preventCache,frameDoc:this._options.frameDoc||void 0})},_executeMethod:function(a){var b=[],c;if(2==arguments.length&&k.isArray(arguments[1]))b=arguments[1];else for(c=1;c<arguments.length;c++)b.push(arguments[c]);var e=this._getRequest(a,b);this.correctTarget&&(e.target=this._smd.target);b=h.transportRegistry.match(e.transport).fire(e);b.addBoth(function(a){return e._envDef.deserialize.call(this,
a)});return b},getServiceClass:function(a){return a||this.serviceClass},hasMethod:function(a,b){b=b||this.getServiceClass();return this&&b&&null!=this[b]&&null!=this[b][a]},checkCall:function(a,b,c){a=this.getServiceClass(a);if(!this.hasMethod(b,a)&&!0===c){debugger;this.onError({code:1,message:["Sorry, server doesnt know "+b]});return!1}return!0},base64_encode:function(a){var b,c,e,g,d=0,q=0,h="",h=[];if(!a)return a;do b=a.charCodeAt(d++),c=a.charCodeAt(d++),e=a.charCodeAt(d++),g=b<<16|c<<8|e,b=
g>>18&63,c=g>>12&63,e=g>>6&63,g&=63,h[q++]="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/\x3d".charAt(b)+"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/\x3d".charAt(c)+"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/\x3d".charAt(e)+"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/\x3d".charAt(g);while(d<a.length);h=h.join("");a=a.length%3;return(a?h.slice(0,a-3):h)+"\x3d\x3d\x3d".slice(a||3)},callMethodEx:function(a,b,c,e,g,d){if(!this[a]||
null==this[a][b])return!0===d&&g&&g({code:1,message:["Sorry, server doesnt know "+b+" in class"+a]}),null;d={};this.config&&this.config.RPC_PARAMS&&(d=k.mixin(d,this.config.RPC_PARAMS.rpcFixedParams),d[this.config.RPC_PARAMS.rpcUserField]=this.config.RPC_PARAMS.rpcUserValue,this.extraArgs=d,this.signatureField=this.config.RPC_PARAMS.rpcSignatureField,this.signatureToken=this.config.RPC_PARAMS.rpcSignatureToken);this[a][b](c).then(function(c){try{e&&e(c)}catch(z){console.error("bad news : callback for method "+
b+" caused a crash in service class "+a)}c&&c.error&&c.error&&0!=c.error.code&&g&&g(c.error)},function(a){g(a)})},callMethod:function(a,b,c,e,g,d){try{var q=this;if(null==this[a][b]){if(!0===d&&g){debugger;g({code:1,message:["Sorry, server doesnt know "+b]})}return null}d={};d=k.mixin(d,this.config.RPC_PARAMS.rpcFixedParams);this[a][b](c).then(function(a){try{e&&e(a)}catch(y){console.error("crashed in "+b)}a&&a.error&&a.error&&1==a.error.code&&g&&g(a.error)},function(a){q.onError(a)})}catch(z){console.error("crash! "+
z)}}})})},"xide/widgets/ColorPickerWidget":function(){define(["dcl/dcl","xide/widgets/EditBox","xide/$","xide/popup"],function(n,m,k,h){(function(d){function b(a,c){var e,q,h,p,r;a=a?a:"";c=c||{};if(a instanceof b)return a;if(!(this instanceof b))return new b(a,c);q=a;r={r:0,g:0,b:0};var k=1;p=p=h=null;h=p=!1;if("string"==typeof q)a:{q=q.replace(N,"").replace(O,"").toLowerCase();var u=!1;if(V[q])q=V[q],u=!0;else if("transparent"==q){q={r:0,g:0,b:0,a:0,format:"name"};break a}q=(e=T.rgb.exec(q))?{r:e[1],
g:e[2],b:e[3]}:(e=T.rgba.exec(q))?{r:e[1],g:e[2],b:e[3],a:e[4]}:(e=T.hsl.exec(q))?{h:e[1],s:e[2],l:e[3]}:(e=T.hsla.exec(q))?{h:e[1],s:e[2],l:e[3],a:e[4]}:(e=T.hsv.exec(q))?{h:e[1],s:e[2],v:e[3]}:(e=T.hsva.exec(q))?{h:e[1],s:e[2],v:e[3],a:e[4]}:(e=T.hex8.exec(q))?{r:parseInt(e[1],16),g:parseInt(e[2],16),b:parseInt(e[3],16),a:parseInt(e[4],16)/255,format:u?"name":"hex8"}:(e=T.hex6.exec(q))?{r:parseInt(e[1],16),g:parseInt(e[2],16),b:parseInt(e[3],16),format:u?"name":"hex"}:(e=T.hex4.exec(q))?{r:parseInt(e[1]+
""+e[1],16),g:parseInt(e[2]+""+e[2],16),b:parseInt(e[3]+""+e[3],16),a:parseInt(e[4]+""+e[4],16)/255,format:u?"name":"hex8"}:(e=T.hex3.exec(q))?{r:parseInt(e[1]+""+e[1],16),g:parseInt(e[2]+""+e[2],16),b:parseInt(e[3]+""+e[3],16),format:u?"name":"hex"}:!1}if("object"==typeof q){if(Q(q.r)&&Q(q.g)&&Q(q.b))r=q.g,e=q.b,r={r:255*D(q.r,255),g:255*D(r,255),b:255*D(e,255)},p=!0,h="%"===String(q.r).substr(-1)?"prgb":"rgb";else if(Q(q.h)&&Q(q.s)&&Q(q.v)){h=J(q.s);p=J(q.v);u=q.h;e=h;r=p;u=6*D(u,360);e=D(e,100);
r=D(r,100);h=d.floor(u);var v=u-h;p=r*(1-e);u=r*(1-v*e);e=r*(1-(1-v)*e);h%=6;r={r:255*[r,u,p,p,e,r][h],g:255*[e,r,r,u,p,p][h],b:255*[p,p,e,r,r,u][h]};p=!0;h="hsv"}else Q(q.h)&&Q(q.s)&&Q(q.l)&&(h=J(q.s),p=J(q.l),r=g(q.h,h,p),p=!0,h="hsl");q.hasOwnProperty("a")&&(k=q.a)}k=G(k);e=p;q=q.format||h;h=K(255,M(r.r,0));p=K(255,M(r.g,0));r=K(255,M(r.b,0));this._originalInput=a;this._r=h;this._g=p;this._b=r;this._a=k;this._roundA=L(100*this._a)/100;this._format=c.format||q;this._gradientType=c.gradientType;
1>this._r&&(this._r=L(this._r));1>this._g&&(this._g=L(this._g));1>this._b&&(this._b=L(this._b));this._ok=e;this._tc_id=P++}function c(a,b,c){a=D(a,255);b=D(b,255);c=D(c,255);var e=M(a,b,c),g=K(a,b,c),d,q=(e+g)/2;if(e==g)d=g=0;else{var h=e-g,g=.5<q?h/(2-e-g):h/(e+g);switch(e){case a:d=(b-c)/h+(b<c?6:0);break;case b:d=(c-a)/h+2;break;case c:d=(a-b)/h+4}d/=6}return{h:d,s:g,l:q}}function g(a,b,c){function e(a,b,c){0>c&&(c+=1);1<c&&--c;return c<1/6?a+6*(b-a)*c:.5>c?b:c<2/3?a+(b-a)*(2/3-c)*6:a}a=D(a,360);
b=D(b,100);c=D(c,100);if(0===b)c=b=a=c;else{var g=.5>c?c*(1+b):c+b-c*b,d=2*c-g;c=e(d,g,a+1/3);b=e(d,g,a);a=e(d,g,a-1/3)}return{r:255*c,g:255*b,b:255*a}}function h(a,b,c){a=D(a,255);b=D(b,255);c=D(c,255);var e=M(a,b,c),g=K(a,b,c),d,q=e-g;if(e==g)d=0;else{switch(e){case a:d=(b-c)/q+(b<c?6:0);break;case b:d=(c-a)/q+2;break;case c:d=(a-b)/q+4}d/=6}return{h:d,s:0===e?0:q/e,v:e}}function a(a,b,c,e){a=[H(L(a).toString(16)),H(L(b).toString(16)),H(L(c).toString(16))];return e&&a[0].charAt(0)==a[0].charAt(1)&&
a[1].charAt(0)==a[1].charAt(1)&&a[2].charAt(0)==a[2].charAt(1)?a[0].charAt(0)+a[1].charAt(0)+a[2].charAt(0):a.join("")}function e(a,b,c,e){return[H(d.round(255*parseFloat(e)).toString(16)),H(L(a).toString(16)),H(L(b).toString(16)),H(L(c).toString(16))].join("")}function q(a,c){c=0===c?0:c||10;a=b(a).toHsl();a.s-=c/100;a.s=K(1,M(0,a.s));return b(a)}function k(a,c){c=0===c?0:c||10;a=b(a).toHsl();a.s+=c/100;a.s=K(1,M(0,a.s));return b(a)}function w(a){return b(a).desaturate(100)}function r(a,c){c=0===
c?0:c||10;a=b(a).toHsl();a.l+=c/100;a.l=K(1,M(0,a.l));return b(a)}function v(a,c){c=0===c?0:c||10;a=b(a).toRgb();a.r=M(0,K(255,a.r-L(255*-(c/100))));a.g=M(0,K(255,a.g-L(255*-(c/100))));a.b=M(0,K(255,a.b-L(255*-(c/100))));return b(a)}function m(a,c){c=0===c?0:c||10;a=b(a).toHsl();a.l-=c/100;a.l=K(1,M(0,a.l));return b(a)}function n(a,c){a=b(a).toHsl();c=(a.h+c)%360;a.h=0>c?360+c:c;return b(a)}function z(a){a=b(a).toHsl();a.h=(a.h+180)%360;return b(a)}function y(a){var c=b(a).toHsl(),e=c.h;return[b(a),
b({h:(e+120)%360,s:c.s,l:c.l}),b({h:(e+240)%360,s:c.s,l:c.l})]}function B(a){var c=b(a).toHsl(),e=c.h;return[b(a),b({h:(e+90)%360,s:c.s,l:c.l}),b({h:(e+180)%360,s:c.s,l:c.l}),b({h:(e+270)%360,s:c.s,l:c.l})]}function C(a){var c=b(a).toHsl(),e=c.h;return[b(a),b({h:(e+72)%360,s:c.s,l:c.l}),b({h:(e+216)%360,s:c.s,l:c.l})]}function E(a,c,e){c=c||6;e=e||30;var g=b(a).toHsl();e=360/e;a=[b(a)];for(g.h=(g.h-(e*c>>1)+720)%360;--c;)g.h=(g.h+e)%360,a.push(b(g));return a}function F(a,c){c=c||6;var e=b(a).toHsv();
a=e.h;for(var g=e.s,e=e.v,d=[],q=1/c;c--;)d.push(b({h:a,s:g,v:e})),e=(e+q)%1;return d}function G(a){a=parseFloat(a);if(isNaN(a)||0>a||1<a)a=1;return a}function D(a,b){var c=a;"string"==typeof c&&-1!=c.indexOf(".")&&1===parseFloat(c)&&(a="100%");c="string"===typeof a&&-1!=a.indexOf("%");a=K(b,M(0,parseFloat(a)));c&&(a=parseInt(a*b,10)/100);return 1E-6>d.abs(a-b)?1:a%b/parseFloat(b)}function H(a){return 1==a.length?"0"+a:""+a}function J(a){1>=a&&(a=100*a+"%");return a}function Q(a){return!!T.CSS_UNIT.exec(a)}
var N=/^\s+/,O=/\s+$/,P=0,L=d.round,K=d.min,M=d.max,U=d.random;b.prototype={isDark:function(){return 128>this.getBrightness()},isLight:function(){return!this.isDark()},isValid:function(){return this._ok},getOriginalInput:function(){return this._originalInput},getFormat:function(){return this._format},getAlpha:function(){return this._a},getBrightness:function(){var a=this.toRgb();return(299*a.r+587*a.g+114*a.b)/1E3},getLuminance:function(){var a=this.toRgb(),b,c;b=a.r/255;c=a.g/255;a=a.b/255;b=.03928>=
b?b/12.92:d.pow((b+.055)/1.055,2.4);c=.03928>=c?c/12.92:d.pow((c+.055)/1.055,2.4);a=.03928>=a?a/12.92:d.pow((a+.055)/1.055,2.4);return.2126*b+.7152*c+.0722*a},setAlpha:function(a){this._a=G(a);this._roundA=L(100*this._a)/100;return this},toHsv:function(){var a=h(this._r,this._g,this._b);return{h:360*a.h,s:a.s,v:a.v,a:this._a}},toHsvString:function(){var a=h(this._r,this._g,this._b),b=L(360*a.h),c=L(100*a.s),a=L(100*a.v);return 1==this._a?"hsv("+b+", "+c+"%, "+a+"%)":"hsva("+b+", "+c+"%, "+a+"%, "+
this._roundA+")"},toHsl:function(){var a=c(this._r,this._g,this._b);return{h:360*a.h,s:a.s,l:a.l,a:this._a}},toHslString:function(){var a=c(this._r,this._g,this._b),b=L(360*a.h),e=L(100*a.s),a=L(100*a.l);return 1==this._a?"hsl("+b+", "+e+"%, "+a+"%)":"hsla("+b+", "+e+"%, "+a+"%, "+this._roundA+")"},toHex:function(b){return a(this._r,this._g,this._b,b)},toHexString:function(a){return"#"+this.toHex(a)},toHex8:function(a){var b=this._g,c=this._b,e=this._a,b=[H(L(this._r).toString(16)),H(L(b).toString(16)),
H(L(c).toString(16)),H(d.round(255*parseFloat(e)).toString(16))];a=a&&b[0].charAt(0)==b[0].charAt(1)&&b[1].charAt(0)==b[1].charAt(1)&&b[2].charAt(0)==b[2].charAt(1)&&b[3].charAt(0)==b[3].charAt(1)?b[0].charAt(0)+b[1].charAt(0)+b[2].charAt(0)+b[3].charAt(0):b.join("");return a},toHex8String:function(a){return"#"+this.toHex8(a)},toRgb:function(){return{r:L(this._r),g:L(this._g),b:L(this._b),a:this._a}},toRgbString:function(){return 1==this._a?"rgb("+L(this._r)+", "+L(this._g)+", "+L(this._b)+")":"rgba("+
L(this._r)+", "+L(this._g)+", "+L(this._b)+", "+this._roundA+")"},toPercentageRgb:function(){return{r:L(100*D(this._r,255))+"%",g:L(100*D(this._g,255))+"%",b:L(100*D(this._b,255))+"%",a:this._a}},toPercentageRgbString:function(){return 1==this._a?"rgb("+L(100*D(this._r,255))+"%, "+L(100*D(this._g,255))+"%, "+L(100*D(this._b,255))+"%)":"rgba("+L(100*D(this._r,255))+"%, "+L(100*D(this._g,255))+"%, "+L(100*D(this._b,255))+"%, "+this._roundA+")"},toName:function(){return 0===this._a?"transparent":1>this._a?
!1:I[a(this._r,this._g,this._b,!0)]||!1},toFilter:function(a){var c="#"+e(this._r,this._g,this._b,this._a),g=c,d=this._gradientType?"GradientType \x3d 1, ":"";a&&(a=b(a),g="#"+e(a._r,a._g,a._b,a._a));return"progid:DXImageTransform.Microsoft.gradient("+d+"startColorstr\x3d"+c+",endColorstr\x3d"+g+")"},toString:function(a){var b=!!a;a=a||this._format;var c=!1,e=1>this._a&&0<=this._a;if(!b&&e&&("hex"===a||"hex6"===a||"hex3"===a||"hex4"===a||"hex8"===a||"name"===a))return"name"===a&&0===this._a?this.toName():
this.toRgbString();"rgb"===a&&(c=this.toRgbString());"prgb"===a&&(c=this.toPercentageRgbString());if("hex"===a||"hex6"===a)c=this.toHexString();"hex3"===a&&(c=this.toHexString(!0));"hex4"===a&&(c=this.toHex8String(!0));"hex8"===a&&(c=this.toHex8String());"name"===a&&(c=this.toName());"hsl"===a&&(c=this.toHslString());"hsv"===a&&(c=this.toHsvString());return c||this.toHexString()},clone:function(){return b(this.toString())},_applyModification:function(a,b){a=a.apply(null,[this].concat([].slice.call(b)));
this._r=a._r;this._g=a._g;this._b=a._b;this.setAlpha(a._a);return this},lighten:function(){return this._applyModification(r,arguments)},brighten:function(){return this._applyModification(v,arguments)},darken:function(){return this._applyModification(m,arguments)},desaturate:function(){return this._applyModification(q,arguments)},saturate:function(){return this._applyModification(k,arguments)},greyscale:function(){return this._applyModification(w,arguments)},spin:function(){return this._applyModification(n,
arguments)},_applyCombination:function(a,b){return a.apply(null,[this].concat([].slice.call(b)))},analogous:function(){return this._applyCombination(E,arguments)},complement:function(){return this._applyCombination(z,arguments)},monochromatic:function(){return this._applyCombination(F,arguments)},splitcomplement:function(){return this._applyCombination(C,arguments)},triad:function(){return this._applyCombination(y,arguments)},tetrad:function(){return this._applyCombination(B,arguments)}};b.fromRatio=
function(a,c){if("object"==typeof a){var e={},g;for(g in a)a.hasOwnProperty(g)&&(e[g]="a"===g?a[g]:J(a[g]));a=e}return b(a,c)};b.equals=function(a,c){return a&&c?b(a).toRgbString()==b(c).toRgbString():!1};b.random=function(){return b.fromRatio({r:U(),g:U(),b:U()})};b.mix=function(a,c,e){e=0===e?0:e||50;a=b(a).toRgb();c=b(c).toRgb();e/=100;return b({r:(c.r-a.r)*e+a.r,g:(c.g-a.g)*e+a.g,b:(c.b-a.b)*e+a.b,a:(c.a-a.a)*e+a.a})};b.readability=function(a,c){a=b(a);c=b(c);return(d.max(a.getLuminance(),c.getLuminance())+
.05)/(d.min(a.getLuminance(),c.getLuminance())+.05)};b.isReadable=function(a,c,e){a=b.readability(a,c);c=!1;var g;g=e||{level:"AA",size:"small"};e=(g.level||"AA").toUpperCase();g=(g.size||"small").toLowerCase();"AA"!==e&&"AAA"!==e&&(e="AA");"small"!==g&&"large"!==g&&(g="small");switch(e+g){case "AAsmall":case "AAAlarge":c=4.5<=a;break;case "AAlarge":c=3<=a;break;case "AAAsmall":c=7<=a}return c};b.mostReadable=function(a,c,e){var g=null,d=0,q,h,p,r;e=e||{};h=e.includeFallbackColors;p=e.level;r=e.size;
for(var k=0;k<c.length;k++)q=b.readability(a,c[k]),q>d&&(d=q,g=b(c[k]));if(b.isReadable(a,g,{level:p,size:r})||!h)return g;e.includeFallbackColors=!1;return b.mostReadable(a,["#fff","#000"],e)};var V=b.names={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"0ff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000",blanchedalmond:"ffebcd",blue:"00f",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",burntsienna:"ea7e5d",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",
coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"0ff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkgrey:"a9a9a9",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkslategrey:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",
dimgray:"696969",dimgrey:"696969",dodgerblue:"1e90ff",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"f0f",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",grey:"808080",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",
lightgoldenrodyellow:"fafad2",lightgray:"d3d3d3",lightgreen:"90ee90",lightgrey:"d3d3d3",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslategray:"789",lightslategrey:"789",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"0f0",limegreen:"32cd32",linen:"faf0e6",magenta:"f0f",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370db",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",
mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"db7093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",rebeccapurple:"663399",red:"f00",
rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",slategrey:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",wheat:"f5deb3",white:"fff",whitesmoke:"f5f5f5",yellow:"ff0",yellowgreen:"9acd32"},I=b.hexNames=function(a){var b={},
c;for(c in a)a.hasOwnProperty(c)&&(b[a[c]]=c);return b}(V),T={CSS_UNIT:/(?:[-\+]?\d*\.\d+%?)|(?:[-\+]?\d+%?)/,rgb:/rgb[\s|\(]+((?:[-\+]?\d*\.\d+%?)|(?:[-\+]?\d+%?))[,|\s]+((?:[-\+]?\d*\.\d+%?)|(?:[-\+]?\d+%?))[,|\s]+((?:[-\+]?\d*\.\d+%?)|(?:[-\+]?\d+%?))\s*\)?/,rgba:/rgba[\s|\(]+((?:[-\+]?\d*\.\d+%?)|(?:[-\+]?\d+%?))[,|\s]+((?:[-\+]?\d*\.\d+%?)|(?:[-\+]?\d+%?))[,|\s]+((?:[-\+]?\d*\.\d+%?)|(?:[-\+]?\d+%?))[,|\s]+((?:[-\+]?\d*\.\d+%?)|(?:[-\+]?\d+%?))\s*\)?/,hsl:/hsl[\s|\(]+((?:[-\+]?\d*\.\d+%?)|(?:[-\+]?\d+%?))[,|\s]+((?:[-\+]?\d*\.\d+%?)|(?:[-\+]?\d+%?))[,|\s]+((?:[-\+]?\d*\.\d+%?)|(?:[-\+]?\d+%?))\s*\)?/,
hsla:/hsla[\s|\(]+((?:[-\+]?\d*\.\d+%?)|(?:[-\+]?\d+%?))[,|\s]+((?:[-\+]?\d*\.\d+%?)|(?:[-\+]?\d+%?))[,|\s]+((?:[-\+]?\d*\.\d+%?)|(?:[-\+]?\d+%?))[,|\s]+((?:[-\+]?\d*\.\d+%?)|(?:[-\+]?\d+%?))\s*\)?/,hsv:/hsv[\s|\(]+((?:[-\+]?\d*\.\d+%?)|(?:[-\+]?\d+%?))[,|\s]+((?:[-\+]?\d*\.\d+%?)|(?:[-\+]?\d+%?))[,|\s]+((?:[-\+]?\d*\.\d+%?)|(?:[-\+]?\d+%?))\s*\)?/,hsva:/hsva[\s|\(]+((?:[-\+]?\d*\.\d+%?)|(?:[-\+]?\d+%?))[,|\s]+((?:[-\+]?\d*\.\d+%?)|(?:[-\+]?\d+%?))[,|\s]+((?:[-\+]?\d*\.\d+%?)|(?:[-\+]?\d+%?))[,|\s]+((?:[-\+]?\d*\.\d+%?)|(?:[-\+]?\d+%?))\s*\)?/,
hex3:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex6:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/,hex4:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex8:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/};window.tinycolor=b})(Math);k.fn.pickAColor=function(d){var b="ontouchstart"in window,c="localStorage"in window&&null!==window.localStorage&&"object"===typeof JSON,g=document.all&&!window.atob,p=b?"touchstart.pickAColor":"mousedown.pickAColor",
a=b?"touchmove.pickAColor":"mousemove.pickAColor",e=b?"touchend.pickAColor":"mouseup.pickAColor",q=b?"touchend.pickAColor":"click.pickAColor",u=k.extend({showSpectrum:!0,showSavedColors:!0,saveColorsPerElement:!1,fadeMenuToggle:!0,showAdvanced:!0,showBasicColors:!0,showHexInput:!0,allowBlank:!1,inlineDropdown:!1,basicColors:{white:"fff",red:"f00",orange:"f60",yellow:"ff0",green:"008000",blue:"00f",purple:"800080",black:"000"}},d);u.showAdvanced||u.showBasicColors||(u.showBasicColors=!0);var w=u.showSavedColors&&
u.showAdvanced||u.showBasicColors&&u.showSavedColors||u.showBasicColors&&u.showAdvanced,r=function(){var a=k("\x3cdiv\x3e").addClass("input-group-btn"),b=k("\x3cbutton type\x3d'button'\x3e").addClass("btn btn-default color-dropdown dropdown-toggle"),c=k("\x3cspan\x3e").addClass("color-preview current-color"),e=k("\x3cspan\x3e").addClass("caret"),d=k("\x3cdiv\x3e").addClass("color-menu dropdown-menu");u.inlineDropdown&&d.addClass("color-menu--inline");u.showHexInput||(b.addClass("no-hex"),d.addClass("no-hex"));
a.append(b.append(c).append(e));w||u.showSpectrum||d.addClass("small");w&&(b=k("\x3cdiv\x3e").addClass("color-menu-tabs"),c=u.showBasicColors?"savedColors-tab tab":"savedColors-tab tab tab-active",u.showBasicColors&&b.append(k("\x3cspan\x3e").addClass("basicColors-tab tab tab-active").append(k("\x3ca\x3e").text("Basic Colors"))),u.showSavedColors&&b.append(k("\x3cspan\x3e").addClass(c).append(k("\x3ca\x3e").text("Saved Colors"))),u.showAdvanced&&b.append(k("\x3cspan\x3e").addClass("advanced-tab tab").append(k("\x3ca\x3e").text("Advanced"))),
d.append(b));if(u.showBasicColors){b=k("\x3cdiv\x3e").addClass("basicColors-content active-content");u.showSpectrum&&b.append(k("\x3ch6\x3e").addClass("color-menu-instructions").text("Tap spectrum or drag band to change color"));var q=k("\x3cul\x3e").addClass("basic-colors-list");k.each(u.basicColors,function(a,b){var c=k("\x3cli\x3e").addClass("color-item"),e=k("\x3ca\x3e").addClass(a+" color-link"),d=k("\x3cspan\x3e").addClass("color-preview "+a),h=k("\x3cspan\x3e").addClass("color-label").text(a);
e.append(d,h);d.append();"#"!==b[0]&&(b="#"+b);d.css("background-color",b);if(u.showSpectrum){var p=k("\x3cspan\x3e").addClass("color-box spectrum-"+a);g&&k.each([0,1],function(c){"fff"!==b&&"000"!==a&&p.append(k("\x3cspan\x3e").addClass(a+"-spectrum-"+c+" ie-spectrum"))});var r=k("\x3cspan\x3e").addClass("highlight-band");k.each([0,1,2],function(){r.append(k("\x3cspan\x3e").addClass("highlight-band-stripe"))});e.append(p.append(r))}q.append(c.append(e))});d.append(b.append(q))}u.showSavedColors&&
(b=u.showBasicColors?"inactive-content":"active-content",b=k("\x3cdiv\x3e").addClass("savedColors-content").addClass(b),b.append(k("\x3cp\x3e").addClass("saved-colors-instructions").text("Type in a color or use the spectrums to lighten or darken an existing color.")),d.append(b));if(u.showAdvanced){var b=u.showBasicColors||u.showSavedColors?"inactive-content":"active-content",b=k("\x3cdiv\x3e").addClass("advanced-content").addClass(b).append(k("\x3ch6\x3e").addClass("advanced-instructions").text("Tap spectrum or drag band to change color")),
c=k("\x3cul\x3e").addClass("advanced-list"),e=k("\x3cli\x3e").addClass("hue-item"),h=k("\x3cspan\x3e").addClass("hue-text").text("Hue: ").append(k("\x3cspan\x3e").addClass("hue-value").text("0")),p=k("\x3cspan\x3e").addClass("color-box spectrum-hue");g&&k.each([0,1,2,3,4,5,6],function(a){p.append(k("\x3cspan\x3e").addClass("hue-spectrum-"+a+" ie-spectrum hue"))});var r=k("\x3cspan\x3e").addClass("highlight-band");k.each([0,1,2],function(){r.append(k("\x3cspan\x3e").addClass("highlight-band-stripe"))});
c.append(e.append(h).append(p.append(r)));var e=k("\x3cli\x3e").addClass("lightness-item"),v=k("\x3cspan\x3e").addClass("color-box spectrum-lightness"),h=k("\x3cspan\x3e").addClass("lightness-text").text("Lightness: ").append(k("\x3cspan\x3e").addClass("lightness-value").text("50%"));g&&k.each([0,1],function(a){v.append(k("\x3cspan\x3e").addClass("lightness-spectrum-"+a+" ie-spectrum"))});var m=k("\x3cspan\x3e").addClass("highlight-band");k.each([0,1,2],function(){m.append(k("\x3cspan\x3e").addClass("highlight-band-stripe"))});
c.append(e.append(h).append(v.append(m)));var e=k("\x3cli\x3e").addClass("saturation-item"),n=k("\x3cspan\x3e").addClass("color-box spectrum-saturation");g&&k.each([0,1],function(a){n.append(k("\x3cspan\x3e").addClass("saturation-spectrum-"+a+" ie-spectrum"))});var x=k("\x3cspan\x3e").addClass("highlight-band");k.each([0,1,2],function(){x.append(k("\x3cspan\x3e").addClass("highlight-band-stripe"))});h=k("\x3cspan\x3e").addClass("saturation-text").text("Saturation: ").append(k("\x3cspan\x3e").addClass("saturation-value").text("100%"));
c.append(e.append(h).append(n.append(x)));e=k("\x3cli\x3e").addClass("preview-item").append(k("\x3cspan\x3e").addClass("preview-text").text("Preview"));h=k("\x3cspan\x3e").addClass("color-preview advanced").append("\x3cbutton class\x3d'color-select btn btn-default advanced' type\x3d'button'\x3eSelect\x3c/button\x3e");c.append(e.append(h));d.append(b.append(c))}a.append(d);return a},v,m,n;if(u.showSavedColors){var z=[];if(c&&localStorage.allSavedColors)z=JSON.parse(localStorage.allSavedColors);else if(document.cookie.match("pickAColorSavedColors-allSavedColors\x3d")){var y=
document.cookie.split(";");k.each(y,function(a){y[a].match("pickAColorSavedColors-allSavedColors\x3d")&&(z=y[a].split("\x3d")[1].split(","))})}}var B={initialize:function(a){var b=k(this);b.attr("name")||b.attr("name","pick-a-color-"+a);a=b.attr("name");b.addClass("pick-a-color");u.allowBlank?b.val().match(/^\s+$|^$/)||(m=v=tinycolor(b.val()).toHex(),b.val(v)):(m=v=tinycolor(b.val()).toHex(),b.val(v));k(b).wrap('\x3cdiv class\x3d"input-group pick-a-color-markup" id\x3d"'+a+'"\x3e');a=k(b.parent());
u.showHexInput?a.prepend('\x3cspan class\x3d"hex-pound input-group-addon"\x3e#\x3c/span\x3e').append(r()):a.append(r());u.showHexInput||b.attr("type","hidden");b.data("preview",b.siblings(".input-group-btn").find(".current-color"))},updatePreview:function(a){u.allowBlank?(m=a.val().match(/^\s+$|^$/)?"":tinycolor(a.val()).toHex(),""===m?a.siblings(".input-group-btn").find(".current-color").css("background","none"):a.siblings(".input-group-btn").find(".current-color").css("background-color","#"+m)):
(m=tinycolor(a.val()).toHex(),a.siblings(".input-group-btn").find(".current-color").css("background-color","#"+m))},pressPreviewButton:function(a){a=a.thisEvent;a.stopPropagation();B.toggleDropdown(a.target)},openDropdown:function(a,c,e){k(".color-menu").each(function(){var a=k(this);if("block"===a.css("display")){var b=a.parents(".input-group-btn");B.closeDropdown(b,a)}});u.fadeMenuToggle&&!b?k(c).fadeIn("fast"):(c.addClass("pick-a-color-markup"),h.open({popup:c[0],around:e[0],orient:["below","above"],
maxHeight:-1,owner:d.owner}),k(c).show());k(a).addClass("open")},closeDropdown:function(a,c){u.fadeMenuToggle&&!b?k(c).fadeOut("fast"):k(c).css("display","none");k(a).removeClass("open")},closeDropdownIfOpen:function(a){var b=a.button;a=a.menu;"block"===a.css("display")&&B.closeDropdown(b,a)},toggleDropdown:function(a){a=k(a).parents(".pick-a-color-markup");var b=a.find("input"),c=a.find(".input-group-btn"),e=a.find(".color-menu");0===e.length&&(e=a.data("_menu"));b.is(":disabled")||"none"!==e.css("display")?
B.closeDropdown(c,e):B.openDropdown(c,e,a);a.data("_menu",e)},tabbable:function(){var a=k(this);a.parents(".pick-a-color-markup");a.click(function(){var a=k(this),b=a.attr("class").split(" ")[0].split("-")[0]+"-content";a.parents(".dropdown-menu").find("."+b);a=a.parent().parent();_.each([a.find(".basicColors-content"),a.find(".savedColors-content"),a.find(".advanced-content")],function(a){a.removeClass("active-content");a.addClass("inactive-content")});a.find("."+b).addClass("active-content").removeClass("inactive-content")})},
getColorMultiplier:function(a,c,e){var g="basic"===e?parseInt(k(".color-box").first().width(),10):parseInt(k(".advanced-list").find(".color-box").first().width(),10);0===g&&(g="basic"===e?b?160:200:b?160:300);e=g/2;g=c/g;return"bidirectional"===a?.5>=g?(1-c/e)/2:-((c-e)/e)/2:"darkenRight"===a?-(g/2):g/2},modifyHSLLightness:function(a,b){a.l+=b;a.l=Math.min(Math.max(0,a.l),1);return tinycolor(a).toHslString()},getMoveableArea:function(a){var b={},c=a.parent();a=a.outerWidth();var e=c.width(),c=c.offset();
b.minX=c.left;b.maxX=e-a;return b},moveHighlightBand:function(a,c,e){var g=k(".highlight-band").first().outerWidth();e=(b?e.originalEvent.pageX:e.pageX)-c.minX-.75*g;e=Math.max(0,Math.min(e,c.maxX));a.css("position","absolute");a.css("left",e)},horizontallyDraggable:function(){k(this).on(p,function(b){b.preventDefault();var c=k(b.delegateTarget);c.css("cursor","-webkit-grabbing");c.css("cursor","-moz-grabbing");var g=B.getMoveableArea(c);k(document).on(a,function(a){c.trigger("dragging.pickAColor");
B.moveHighlightBand(c,g,a)}).on(e,function(){k(document).off(a);k(document).off("dragging.pickAColor");c.css("cursor","-webkit-grab");c.css("cursor","-moz-grab");c.trigger("endDrag.pickAColor");k(document).off(e)})}).on(e,function(b){b.stopPropagation();k(document).off(a);k(document).off("dragging.pickAColor")})},modifyHighlightBand:function(a,b,c){var e={h:0,s:0,l:.05},g={h:0,s:0,l:.5},d=-b;b=a.find(".highlight-band-stripe");c="lightenRight"===c?B.modifyHSLLightness(g,d):B.modifyHSLLightness(e,d);
a.css("border-color",c);b.css("background-color",c)},calculateHighlightedColor:function(a){var b=k(this),c=b.parent(),e=k(".highlight-band").first().outerWidth()/2,g=a.type,d,q,h,p,r,v,w;if("basic"===g)switch(a=c.attr("class").split("-")[2],a=u.basicColors[a],d=tinycolor(a).toHsl(),a){case "fff":a="darkenRight";break;case "000":a="lightenRight";break;default:a="bidirectional"}else p=b.parents(".advanced-list"),h=a.hsl.s,v=p.find(".spectrum-hue"),q=a.hsl.h,r=p.find(".spectrum-saturation"),w=p.find(".lightness-value"),
p=p.find(".color-preview"),d={h:a.hsl.h,l:.5,s:a.hsl.s},a="bidirectional";e=parseInt(b.css("left"),10)+e;e=B.getColorMultiplier(a,e,g);d=B.modifyHSLLightness(d,e);var m="#"+tinycolor(d).toHex(),n=d.split("(")[1].split(")")[0].split(",")[2],x=parseInt(n.split("%")[0],10)/100;"basic"===g?(c.siblings(".color-preview").css("background-color",m),c.prev(".color-label").replaceWith('\x3cbutton class\x3d"color-select btn btn-default" type\x3d"button"\x3eSelect\x3c/button\x3e'),"darkenRight"!==a&&B.modifyHighlightBand(b,
e,a)):(p.css("background-color",m),w.text(n),B.updateSaturationStyles(r,q,x),B.updateHueStyles(v,h,x),B.modifyHighlightBand(k(".advanced-content .highlight-band"),e,a));return"basic"===g?tinycolor(d).toHex():x},updateSavedColorPreview:function(a){k.each(a,function(b){b=k(a[b]);var c=b.attr("class");b.find(".color-preview").css("background-color",c)})},updateSavedColorMarkup:function(a,b){b=b?b:z;if(u.showSavedColors&&0<b.length){u.saveColorsPerElement||(a=k(".savedColors-content"),b=z);b=b.slice(0,
16);var c=k("\x3cul\x3e").addClass("saved-color-col 0"),e=k("\x3cul\x3e").addClass("saved-color-col 1");k.each(b,function(a,b){var g=k("\x3cli\x3e").addClass("color-item"),d=k("\x3ca\x3e").addClass(b);d.append(k("\x3cspan\x3e").addClass("color-preview"));d.append(k("\x3cspan\x3e").addClass("color-label").text(b));g.append(d);0===a%2?c.append(g):e.append(g)});a.html(c);a.append(e);a=k(a).find("a");B.updateSavedColorPreview(a)}},setSavedColorsCookie:function(a,b){var c=new Date((new Date).getTime()+
31536E7),c=c.toGMTString();document.cookie="undefined"===typeof b?"pickAColorSavedColors-allSavedColors\x3d"+a+";expires\x3d"+c:"pickAColorSavedColors-"+b+"\x3d"+a+"; expires\x3d"+c},saveColorsToLocalStorage:function(a,b){if(c)if("undefined"===typeof b)try{localStorage.allSavedColors=JSON.stringify(a)}catch(F){localStorage.clear()}else try{localStorage["pickAColorSavedColors-"+b]=JSON.stringify(a)}catch(F){localStorage.clear()}else B.setSavedColorsCookie(a,b)},removeFromArray:function(a,b){-1!==k.inArray(b,
a)&&a.splice(k.inArray(b,a),1)},updateSavedColors:function(a,b,c){B.removeFromArray(b,a);b.unshift(a);B.saveColorsToLocalStorage(b,c)},addToSavedColors:function(a,b,c){if(u.showSavedColors&&void 0!==a)if("#"!=a[0]&&(a="#"+a),B.updateSavedColors(a,z),u.saveColorsPerElement){var e=b.colors;B.updateSavedColors(a,e,b.dataAttr);B.updateSavedColorMarkup(c,e)}else B.updateSavedColorMarkup(c,z)},selectFromBasicColors:function(a){var b=k(this).find("span:first").css("background-color"),c=a.els;a=a.savedColorsInfo;
b=tinycolor(b).toHex();k(c.thisEl).val(b);k(c.thisEl).trigger("change");B.updatePreview(c.thisEl);B.addToSavedColors(b,a,c.savedColorsContent);B.closeDropdown(c.colorPreviewButton,c.colorMenu)},tapSpectrum:function(a){var c=a.thisEvent,e=a.savedColorsInfo,g=a.els;a=a.mostRecentClick;c.stopPropagation();var d=k(this).find(".highlight-band"),q=B.getMoveableArea(d);b?B.moveHighlightBand(d,q,a):B.moveHighlightBand(d,q,c);c=B.calculateHighlightedColor.apply(d,[{type:"basic"}]);B.addToSavedColors(c,e,g.savedColorsContent);
g.touchInstructions.html("Press 'select' to choose this color")},executeUnlessScrolled:function(a){var c=a.thisFunction,e=a.theseArguments,g,d;k(this).on(p,function(a){g=k(window).scrollTop();d=a}).on(q,function(a){var q=g-k(window).scrollTop();if(b&&0<Math.abs(q))return!1;e.thisEvent=a;e.mostRecentClick=d;c.apply(k(this),[e])})},updateSaturationStyles:function(a,b,c){c=(100*c).toString()+"%";var e="#"+tinycolor("hsl("+b+",0%,"+c).toHex(),d="#"+tinycolor("hsl("+b+",50%,"+c).toHex(),q="#"+tinycolor("hsl("+
b+",100%,"+c).toHex(),h="";k.each(["-webkit-linear-gradient","-o-linear-gradient"],function(a,b){h+="background-image: "+b+"(left, "+e+" 0%, "+d+" 50%, "+q+" 100%);"});b="progid:DXImageTransform.Microsoft.gradient(startColorstr\x3d'"+e+"', endColorstr\x3d'"+d+"', GradientType\x3d1)";c="progid:DXImageTransform.Microsoft.gradient(startColorstr\x3d'"+d+"', endColorstr\x3d'"+q+"', GradientType\x3d1)";h="background-image: -moz-linear-gradient(left center, "+e+" 0%, "+d+" 50%, "+q+" 100%);background-image: linear-gradient(to right, "+
e+" 0%, "+d+" 50%, "+q+" 100%); background-image: -webkit-gradient(linear, left top, right top,color-stop(0, "+e+"),color-stop(0.5, "+d+"),color-stop(1, "+q+"));"+h;if(g){var p=k(a).find(".saturation-spectrum-0");a=k(a).find(".saturation-spectrum-1");p.css("filter",b);a.css("filter",c)}else a.attr("style",h)},updateLightnessStyles:function(a,b,c){c=(100*c).toString()+"%";var e="#"+tinycolor("hsl("+b+","+c+",100%)").toHex(),d="#"+tinycolor("hsl("+b+","+c+",50%)").toHex(),q="#"+tinycolor("hsl("+b+","+
c+",0%)").toHex(),h="";k.each(["-webkit-linear-gradient","-o-linear-gradient"],function(a,b){h+="background-image: "+b+"(left, "+e+" 0%, "+d+" 50%, "+q+" 100%);"});b="progid:DXImageTransform.Microsoft.gradient(startColorstr\x3d'"+e+"', endColorstr\x3d'"+d+"', GradientType\x3d1)";c="progid:DXImageTransform.Microsoft.gradient(startColorstr\x3d'"+d+"', endColorstr\x3d'"+q+"', GradientType\x3d1)";h="background-image: -moz-linear-gradient(left center, "+e+" 0%, "+d+" 50%, "+q+" 100%); background-image: linear-gradient(to right, "+
e+" 0%, "+d+" 50%, "+q+" 100%); background-image: -webkit-gradient(linear, left top, right top, color-stop(0, "+e+"), color-stop(0.5, "+d+"), color-stop(1, "+q+")); "+h;if(g){var p=k(a).find(".lightness-spectrum-0");a=k(a).find(".lightness-spectrum-1");p.css("filter",b);a.css("filter",c)}else a.attr("style",h)},updateHueStyles:function(a,b,c){b=(100*b).toString()+"%";c=(100*c).toString()+"%";var e="#"+tinycolor("hsl(0,"+b+","+c+")").toHex(),d="#"+tinycolor("hsl(60,"+b+","+c+")").toHex(),q="#"+tinycolor("hsl(120,"+
b+","+c+")").toHex(),h="#"+tinycolor("hsl(180,"+b+","+c+")").toHex(),p="#"+tinycolor("hsl(240,"+b+","+c+")").toHex(),r="#"+tinycolor("hsl(300,"+b+","+c+")").toHex(),u="#"+tinycolor("hsl(0,"+b+","+c+")").toHex();c="progid:DXImageTransform.Microsoft.gradient(startColorstr\x3d'"+e+"', endColorstr\x3d'"+d+"', GradientType\x3d1)";b="progid:DXImageTransform.Microsoft.gradient(startColorstr\x3d'"+d+"', endColorstr\x3d'"+q+"', GradientType\x3d1)";var v="progid:DXImageTransform.Microsoft.gradient(startColorstr\x3d'"+
q+"', endColorstr\x3d'"+h+"', GradientType\x3d1)",w="progid:DXImageTransform.Microsoft.gradient(startColorstr\x3d'"+h+"', endColorstr\x3d'"+p+"', GradientType\x3d1)",m="progid:DXImageTransform.Microsoft.gradient(startColorstr\x3d'"+p+"', endColorstr\x3d'"+r+"', GradientType\x3d1)",n="progid:DXImageTransform.Microsoft.gradient(startColorstr\x3d'"+r+"', endColorstr\x3d'"+u+"', GradientType\x3d1)",x="";k.each(["-webkit-linear-gradient","-o-linear-gradient"],function(a,b){x+="background-image: "+b+"(left, "+
e+" 0%, "+d+" 17%, "+q+" 24%, "+h+" 51%, "+p+" 68%, "+r+" 85%, "+u+" 100%);"});x+="background-image: -webkit-gradient(linear, left top, right top,color-stop(0%, "+e+"),color-stop(17%, "+d+"),color-stop(34%, "+q+"),color-stop(51%, "+h+"),color-stop(68%, "+p+"),color-stop(85%, "+r+"),color-stop(100%, "+u+"));background-image: linear-gradient(to right, "+e+" 0%, "+d+" 17%, "+q+" 24%,"+h+" 51%,"+p+" 68%,"+r+" 85%,"+u+" 100%); background-image: -moz-linear-gradient(left center, "+e+" 0%, "+d+" 17%, "+
q+" 24%, "+h+" 51%, "+p+" 68%, "+r+" 85%, "+u+" 100%);";if(g){var A=k(a).find(".hue-spectrum-0"),z=k(a).find(".hue-spectrum-1"),y=k(a).find(".hue-spectrum-2"),C=k(a).find(".hue-spectrum-3"),E=k(a).find(".hue-spectrum-4");a=k(a).find(".hue-spectrum-5");A.css("filter",c);z.css("filter",b);y.css("filter",v);C.css("filter",w);E.css("filter",m);a.css("filter",n)}else a.attr("style",x)},getHighlightedHue:function(a){var c=k(this),e=c.outerWidth()/2,g=parseInt(c.css("left"),10)+e,d=c.parents(".advanced-list"),
c=d.find(".color-preview"),e=d.find(".spectrum-lightness"),q=d.find(".spectrum-saturation"),h=parseInt(d.find(".color-box").first().width(),10),d=d.find(".hue-value"),p=a.l;a=a.s;var r=(100*a).toString()+"%",u=(100*p).toString()+"%";0===h&&(h=b?160:300);g=Math.floor(g/h*360);h="#"+tinycolor("hsl("+g+","+r+","+u+")").toHex();c.css("background-color",h);d.text(g);B.updateLightnessStyles(e,g,a);B.updateSaturationStyles(q,g,p);return g},getHighlightedSaturation:function(a){var c=k(this),e=c.outerWidth()/
2,g=parseInt(c.css("left"),10)+e,d=c.parents(".advanced-list"),c=d.find(".color-preview"),e=d.find(".spectrum-lightness"),q=d.find(".spectrum-hue"),h=d.find(".saturation-value"),p=parseInt(d.find(".color-box").first().width(),10),d=a.l,r=(100*d).toString()+"%";a=a.h;0===p&&(p=b?160:300);g/=p;p=Math.round(100*g).toString()+"%";r="#"+tinycolor("hsl("+a+","+p+","+r+")").toHex();c.css("background-color",r);h.text(p);B.updateLightnessStyles(e,a,g);B.updateHueStyles(q,g,d);return g},updateAdvancedInstructions:function(a){a.html("Press the color preview to choose this color")}};
return this.each(function(a){B.initialize.apply(this,[a]);var b={thisEl:k(this),thisWrapper:k(this).parent(),colorTextInput:k(this).find("input"),colorMenuLinks:k(this).parent().find(".color-menu li a"),colorPreviewButton:k(this).parent().find(".input-group-btn"),colorMenu:k(this).parent().find(".color-menu"),colorSpectrums:k(this).parent().find(".color-box"),basicSpectrums:k(this).parent().find(".basicColors-content .color-box"),touchInstructions:k(this).parent().find(".color-menu-instructions"),
advancedInstructions:k(this).parent().find(".advanced-instructions"),highlightBands:k(this).parent().find(".highlight-band"),basicHighlightBands:k(this).parent().find(".basicColors-content .highlight-band")},g,d;w&&(b.tabs=b.thisWrapper.find(".tab"));if(u.showSavedColors&&(b.savedColorsContent=b.thisWrapper.find(".savedColors-content"),u.saveColorsPerElement))if(d={colors:[],dataObj:k(this).data()},k.each(d.dataObj,function(a){d.dataAttr=a}),c&&localStorage["pickAColorSavedColors-"+d.dataAttr])d.colors=
JSON.parse(localStorage["pickAColorSavedColors-"+d.dataAttr]);else if(document.cookie.match("pickAColorSavedColors-"+d.dataAttr)){a=document.cookie.split(";");for(var h=0;h<a.length;h++)a[h].match(d.dataAttr)&&(d.colors=a[h].split("\x3d")[1].split(","))}else d.colors=z;u.showAdvanced&&(g={h:0,s:1,l:.5},b.advancedSpectrums=b.thisWrapper.find(".advanced-list").find(".color-box"),b.advancedHighlightBands=b.thisWrapper.find(".advanced-list").find(".highlight-band"),b.hueSpectrum=b.thisWrapper.find(".spectrum-hue"),
b.lightnessSpectrum=b.thisWrapper.find(".spectrum-lightness"),b.saturationSpectrum=b.thisWrapper.find(".spectrum-saturation"),b.hueHighlightBand=b.thisWrapper.find(".spectrum-hue .highlight-band"),b.lightnessHighlightBand=b.thisWrapper.find(".spectrum-lightness .highlight-band"),b.saturationHighlightBand=b.thisWrapper.find(".spectrum-saturation .highlight-band"),b.advancedPreview=b.thisWrapper.find(".advanced-content .color-preview"));B.addToSavedColors(v,d,b.savedColorsContent);B.updatePreview(b.thisEl);
b.thisEl.focus(function(){var a=k(this);m=a.val();u.allowBlank||a.val("");B.toggleDropdown(b.colorPreviewButton,b.ColorMenu)}).blur(function(){var a=k(this);n=a.val();n.match(/^\s+$|^$/)?u.allowBlank||a.val(m):(n=tinycolor(n).toHex(),a.val(n),B.addToSavedColors(n,d,b.savedColorsContent));B.toggleDropdown(b.colorPreviewButton,b.ColorMenu);B.updatePreview(a)});B.executeUnlessScrolled.apply(b.colorPreviewButton,[{thisFunction:B.pressPreviewButton,theseArguments:{}}]);B.executeUnlessScrolled.apply(k(document),
[{thisFunction:B.closeDropdownIfOpen,theseArguments:{button:b.colorPreviewButton,menu:b.colorMenu}}]);b.colorMenu.on(q,function(a){a.stopPropagation()});b.thisEl.on(q,function(a){a.stopPropagation()});B.executeUnlessScrolled.apply(b.colorMenuLinks,[{thisFunction:B.selectFromBasicColors,theseArguments:{els:b,savedColorsInfo:d}}]);w&&B.tabbable.apply(b.tabs);(u.showSpectrum||u.showAdvanced)&&B.horizontallyDraggable.apply(b.highlightBands);u.showSpectrum&&(B.executeUnlessScrolled.apply(b.basicSpectrums,
[{thisFunction:B.tapSpectrum,theseArguments:{savedColorsInfo:d,els:b}}]),k(b.basicHighlightBands).on("dragging.pickAColor",function(a){B.calculateHighlightedColor.apply(this,[{type:"basic"}])}).on("endDrag.pickAColor",function(a){a=B.calculateHighlightedColor.apply(a.delegateTarget,[{type:"basic"}]);B.addToSavedColors(a,d,b.savedColorsContent)}));u.showAdvanced&&(k(b.hueHighlightBand).on("dragging.pickAColor",function(a){g.h=B.getHighlightedHue.apply(this,[g])}),k(b.lightnessHighlightBand).on("dragging.pickAColor",
function(){B.calculateHighlightedColor.apply(this,[{type:"advanced",hsl:g}])}).on(e,function(){g.l=B.calculateHighlightedColor.apply(this,[{type:"advanced",hsl:g}])}),k(b.saturationHighlightBand).on("dragging.pickAColor",function(){B.getHighlightedSaturation.apply(this,[g])}).on("endDrag.pickAColor",function(){g.s=B.getHighlightedSaturation.apply(this,[g])}),k(b.advancedHighlightBand).on("endDrag.pickAColor",function(){B.updateAdvancedInstructions(b.advancedInstructions)}),k(b.lightnessSpectrum).click(function(a){a.stopPropagation();
var b=k(this).find(".highlight-band"),c=B.getMoveableArea(b);B.moveHighlightBand(b,c,a);g.l=B.calculateHighlightedColor.apply(b,[{type:"advanced",hsl:g}])}),k(b.hueSpectrum).click(function(a){a.stopPropagation();var b=k(this).find(".highlight-band"),c=B.getMoveableArea(b);B.moveHighlightBand(b,c,a);g.h=B.getHighlightedHue.apply(b,[g])}),k(b.saturationSpectrum).click(function(a){a.stopPropagation();var b=k(this).find(".highlight-band"),c=B.getMoveableArea(b);B.moveHighlightBand(b,c,a);g.s=B.getHighlightedSaturation.apply(b,
[g])}),k(b.advancedSpectrums).click(function(){B.updateAdvancedInstructions(b.advancedInstructions)}),k(b.advancedPreview).click(function(){var a=tinycolor(k(this).css("background-color")).toHex();k(b.thisEl).val(a);k(b.thisEl).trigger("change");B.updatePreview(b.thisEl);B.addToSavedColors(a,d,b.savedColorsContent);B.closeDropdown(b.colorPreviewButton,b.colorMenu)}));u.showSavedColors&&(k(b.savedColorsContent).click(function(a){a=k(a.target);if(a.is("SPAN")||a.is("A"))a=a.is("SPAN")?a.parent().attr("class").split("#")[1]:
a.attr("class").split("#")[1],k(b.thisEl).val(a),k(b.thisEl).trigger("change"),B.updatePreview(b.thisEl),B.closeDropdown(b.colorPreviewButton,b.colorMenu),B.addToSavedColors(a,d,b.savedColorsContent)}),u.saveColorsPerElement?u.saveColorsPerElement&&B.updateSavedColorMarkup(b.savedColorsContent,d.colors):B.updateSavedColorMarkup(b.savedColorsContent,z))})};return n(m,{declaredClass:"xide.widgets.ColorWidget",get:function(d){var b=this.nativeWidget;if("value"===d&&b)return d=b.val(),0<d.length&&-1===
d.indexOf("#")?"#"+d:d},set:function(d,b,c){!0===c&&(this.updateOnly=!0);var g=this.nativeWidget;if(g){if("value"===d)return g.val(b),this._lastValue=b,this.nativeWidget&&this.nativeWidget.data("preview")&&this.nativeWidget.data("preview").css("background-color","#"+b),!0;if("disabled"===d)return g[!0===b?"attr":"removeAttr"](d,b),!0}return this.inherited(arguments)},startup:function(){this.nativeWidget.pickAColor({showSpectrum:!0,showSavedColors:!0,saveColorsPerElement:!0,fadeMenuToggle:!1,showAdvanced:!0,
showBasicColors:!0,showHexInput:!0,allowBlank:!0,inlineDropdown:!1,owner:this})}})})},"xide/factory/Clients":function(){define(["xide/factory","xide/utils","xide/types","xide/client/WebSocket"],function(n,m,k,h){n.createClient=function(d,b,c,g){};n.createClientWithStore=function(d,b,c,g){d=m.queryStoreEx(d,{name:b},!0,!0);var p={};m.mixin(p,c);if(d&&0!==d.length){b="http://"+d.host;c=d.port;g=g||h;d.info&&(b=d.info.host,c=d.info.port);try{var a=new g(p);m.mixin(a,p);a.init({options:{host:b,port:c,
channel:"",debug:{all:!1,protocol_connection:!0,protocol_messages:!0,socket_server:!0,socket_client:!0,socket_messages:!0,main:!0}}});a.connect();return a}catch(e){}}else console.error("create client with : failed, no such service :  "+b)};return n})},"xide/wizard/WizardBase":function(){define("dcl/dcl xide/utils xide/factory xide/_base/_Widget xide/layout/_TabContainer xide/wizard/WizardBase".split(" "),function(n,m,k,h,d){var b="onInit onShow onNext onPrevious onFirst onLast onBack onFinish onTabChange onTabClick onTabShow".split(" ");
return n([h],{containerClass:d,containerArgs:{direction:"above",navBarClass:"",resizeToParent:!0},options:null,paneClass:null,panes:[],buttons:[],wizard:null,$wizard:null,buttonBar:null,templateString:'\x3cdiv attachTo\x3d"domNode" style\x3d"height: inherit;position: relative"\x3e\x3cdiv attachTo\x3d"containerNode" style\x3d"height: auto;min-height: 300px"\x3e\x3c/div\x3e\x3cdiv style\x3d"min-height:initial;position: absolute" attachTo\x3d"buttonBar" class\x3d"navbar bg-opaque navbar-fixed-bottom"\x3e\x3c/div\x3e\x3c/div\x3e',
getDefaultOptions:function(){function c(a,b){this._emit(a,b);_.isFunction(this[a])&&this[a].apply(this,b)}var g={},d=this;_.each(this.events||b,function(a){g[a]=function(){c.apply(d,[a,arguments])}});return g},next:function(){},previous:function(){},first:function(){},last:function(){},finish:function(){},back:function(){},currentIndex:function(){},firstIndex:function(){},lastIndex:function(){},getIndex:function(){},nextIndex:function(){},previousIndex:function(){},navigationLength:function(){},activeTab:function(){},
nextTab:function(){},previousTab:function(){},show:function(){},hide:function(){},display:function(){},enable:function(){},disable:function(){},remove:function(){},resetWizard:function(){},onWidgetAdded:function(b){this.add(b,null,!1);this.resize()},disableButton:function(b,g){$(this.domNode).find(b).toggleClass("disabled",g)},hideButton:function(b,g){$(this.domNode).find(b).toggleClass("hidden",g)},onTabShow:function(b,g,d){if(b=this.panes[d])b.widget||(g=b.container,b.create&&(g=b.create.apply(this,
[g,b]),this.onWidgetAdded(g))),b.onShow&&b.onShow.apply(this,[b])},startup:function(){var b=m.addWidget(this.containerClass,this.containerArgs,this,this.$containerNode[0],!0);this.add(b);_.each(this.panes,function(a){a.container=b._createTab(this.paneClass||a.paneClass,a)},this);var g=this.buttonParent||this.$buttonBar[0];this.buttons&&_.each(this.buttons,function(a){a.widget||(a.widget=k.createSimpleButton(a.title,a.icon,a.cls,a.mixin,g),a.name&&$(a.widget).attr("name",a.name),a.value&&$(a.widget).attr("value",
a.value))},this);var d=m.mixin(this.getDefaultOptions(),this.options),a=this.$domNode.bootstrapWizard(d);this.$wizard=a;this.wizard=a.data("bootstrapWizard");this.options=d;m.mixin(this,this.wizard);this.buttons&&_.each(this.buttons,function(a){$(a.widget).toggleClass("disabled",a.disabled)});this.resize()}})})},"xtrack/model/Item":function(){define(["xdojo/declare","xide/views/History","xide/data/Model"],function(n,m,k){return n("TrackingModel",k,{label:null,context:null,category:null,url:null,parent:null,
id:"",command:null,time:null,counter:1,_history:null,retain:function(){this.counter++;this.time=(new Date).getTime();this.getHistory().push(this.time)},getHistory:function(){this._history&&!this._history.push&&(this._history=new m({_history:this._history._history||[]}));this._history||(this._history=new m);return this._history},destroy:function(){this._history&&this._history.destroy()&&(this._history=null)}})})},"xnode/component":function(){define(["dcl/dcl","xide/model/Component"],function(n,m){return n(m,
{beanType:"NODE_SERVICE",hasEditors:function(){return["xnode"]},getDependencies:function(){return["xide/xide","xnode/types","xnode/manager/NodeServiceManager","xnode/views/NodeServiceView"]},getLabel:function(){return"xnode"},getBeanType:function(){return this.beanType}})})},"xide/utils/ObjectUtils":function(){define(["xide/utils","require","dojo/Deferred","xide/lodash"],function(n,m,k,h){function d(a){var b=parseInt(a,10);return b.toString()===a?b:a}function b(a,c,g,p){h.isNumber(c)&&(c=[c]);if(h.isEmpty(c))return a;
if(h.isString(c))return b(a,c.split(".").map(d),g,p);var e=c[0];if(1===c.length)return c=a[e],void 0!==c&&p||(a[e]=g),c;void 0===a[e]&&(h.isNumber(c[1])?a[e]=[]:a[e]={});return b(a[e],c.slice(1),g,p)}function c(a,b){h.isNumber(b)&&(b=[b]);if(!h.isEmpty(a)){if(h.isEmpty(b))return a;if(h.isString(b))return c(a,b.split("."));var e=d(b[0]),g=a[e];if(1===b.length)void 0!==g&&(h.isArray(a)?a.splice(e,1):delete a[e]);else if(void 0!==a[e])return c(a[e],b.slice(1));return a}}"use strict";n.delegate=function(){function a(){}
return function(b,c){a.prototype=b;b=new a;a.prototype=null;c&&lang._mixin(b,c);return b}}();n.debounce=function(a,b,c,g,d,p,k){var e=a[b+"_debounced"];e||(e=a[b+"_debounced"]=h.debounce(c,g,d));!0!==p||a[b+"_debouncedFirst"]||(a[b+"_debouncedFirst"]=!0,c.apply(a,k));return e()};n.pluck=function(a,b){return h.map(a,b)};n.download=function(a,b){var c=document.createElement("a");b=h.isString(b)?b:JSON.stringify(b,null,2);c.setAttribute("href","data:text/plain;charset\x3dutf-8,"+encodeURIComponent(b));
c.setAttribute("download",a);c.style.display="none";document.body.appendChild(c);c.click();document.body.removeChild(c)};n.hasObject=function(a){var b=null;try{b=m(a)}catch(q){console.error("error in utils.hasObject ",q)}return b};n.toUrl=function(a){m({cacheBust:null,waitSeconds:5});return m.toUrl(a)};n.getObject=function(a,b){var c=null;if(n.isString(a)){try{c=m(a)}catch(w){}try{if(!c){var e=new k,c=m([a],function(a){e.resolve(a)});return e.promise}}catch(w){}return c}return n.isObject(a)?a:null!==
c?c:b};n.toArray=function(a){var b=[],c;for(c in a)b.push({name:c,value:a[c]});return b};n.toObject=function(a,b){if(!a)return{};if(!1!==b)return b.object(b.map(a,b.values));if(n.isObject(a)&&a[0])return a[0];b={};for(var c=0;c<a.length;++c)b[c]=a[c];return b};n.byString=function(a,b,c){b=b.replace(/\[(\w+)\]/g,".$1");b=b.replace(/^\./,"");for(b=b.split(".");b.length;)if(c=b.shift(),c in a)a=a[c];else return;return a};var g=Object.prototype.hasOwnProperty,p={has:function(a,b){if(h.isEmpty(a))return!1;
h.isNumber(b)?b=[b]:h.isString(b)&&(b=b.split("."));if(h.isEmpty(b)||0===b.length)return!1;for(var c=0;c<b.length;c++){var e=b[c];if((h.isObject(a)||h.isArray(a))&&g.call(a,e))a=a[e];else return!1}return!0},ensureExists:function(a,c,g){return b(a,c,g,!0)},set:function(a,c,g,d){return b(a,c,g,d)},insert:function(a,b,c,g){var e=p.get(a,b);g=~~g;h.isArray(e)||(e=[],p.set(a,b,e));e.splice(g,0,c)},empty:function(a,b){if(h.isEmpty(b))return a;if(!h.isEmpty(a)){var c,e;if(!(c=p.get(a,b)))return a;if(h.isString(c))return p.set(a,
b,"");if(h.isBoolean(c))return p.set(a,b,!1);if(h.isNumber(c))return p.set(a,b,0);if(h.isArray(c))c.length=0;else if(h.isObject(c))for(e in c)g.call(c,e)&&delete c[e];else return p.set(a,b,null)}},push:function(a,b){var c=p.get(a,b);h.isArray(c)||(c=[],p.set(a,b,c));c.push.apply(c,Array.prototype.slice.call(arguments,2))},coalesce:function(a,b,c){for(var e,g=0,d=b.length;g<d;g++)if(void 0!==(e=p.get(a,b[g])))return e;return c},get:function(a,b,c){h.isNumber(b)&&(b=[b]);if(h.isEmpty(b))return a;if(h.isEmpty(a)&&
a&&null===a.innerHTML)return c;if(h.isString(b))return p.get(a,b.split("."),c);var e=d(b[0]);if(1===b.length){if(a&&void 0===a[e])return c;if(a)return a[e]}return a?p.get(a[e],b.slice(1),c):c},del:function(a,b){return c(a,b)}};n.getAt=function(a,b,c){return p.get(a,b,c)};n.setAt=function(a,b,c){return p.set(a,b,c)};n.hasAt=function(a,b){return p.has(a,b)};n.ensureAt=function(a,b,c){return p.ensureExists(a,b,c)};n.deleteAt=function(a,b){return p.del(a,b)};n.merge=function(a,b){for(var c in b)"object"!=
typeof a[c]?a[c]=b[c]:"object"==typeof b[c]&&(a[c]=n.merge(a[c],b[c]));return a};n.clone=function(a){if(!a||"object"!=typeof a||n.isFunction(a))return a;if(a.nodeType&&"cloneNode"in a)return a.cloneNode(!0);if(a instanceof Date)return new Date(a.getTime());if(a instanceof RegExp)return new RegExp(a);var b,c,g;if(n.isArray(a))for(b=[],c=0,g=a.length;c<g;++c)c in a&&b.push(n.clone(a[c]));else b=a.constructor?new a.constructor:{};return n._mixin(b,a,n.clone)};n._mixin=function(a,b,c){var e,g,d={};for(e in b)g=
b[e],e in a&&(a[e]===g||e in d&&d[e]===g)||(a[e]=c?c(g):g);return a};n.mixin=function(a,b){if(b){a||(a={});for(var c=arguments.length,e=1;e<c;e++)n._mixin(a,arguments[e])}return a};n.cloneKeys=function(a,b){var c={},e;for(e in a)if(!0!==b||e in a)c[e]=a[e];return c};n.isArray=function(a){return h.isArray(a)};n.isObject=function(a){return h.isObject(a)};n.isString=function(a){return h.isString(a)};n.isNumber=function(a){return h.isNumber(a)};n.isFunction=function(a){return h.isFunction(a)};return n})},
"dijit/WidgetSet":function(){define(["dojo/_base/array","dojo/_base/declare","dojo/_base/kernel","./registry"],function(n,m,k,h){var d=m("dijit.WidgetSet",null,{constructor:function(){this._hash={};this.length=0},add:function(b){if(this._hash[b.id])throw Error("Tried to register widget with id\x3d\x3d"+b.id+" but that id is already registered");this._hash[b.id]=b;this.length++},remove:function(b){this._hash[b]&&(delete this._hash[b],this.length--)},forEach:function(b,c){c=c||k.global;var g=0,d;for(d in this._hash)b.call(c,
this._hash[d],g++,this._hash);return this},filter:function(b,c){c=c||k.global;var g=new d,h=0,a;for(a in this._hash){var e=this._hash[a];b.call(c,e,h++,this._hash)&&g.add(e)}return g},byId:function(b){return this._hash[b]},byClass:function(b){var c=new d,g,h;for(g in this._hash)h=this._hash[g],h.declaredClass==b&&c.add(h);return c},toArray:function(){var b=[],c;for(c in this._hash)b.push(this._hash[c]);return b},map:function(b,c){return n.map(this.toArray(),b,c)},every:function(b,c){c=c||k.global;
var g=0,d;for(d in this._hash)if(!b.call(c,this._hash[d],g++,this._hash))return!1;return!0},some:function(b,c){c=c||k.global;var g=0,d;for(d in this._hash)if(b.call(c,this._hash[d],g++,this._hash))return!0;return!1}});n.forEach("forEach filter byClass map every some".split(" "),function(b){h[b]=d.prototype[b]});return d})},"davinci/lang/workbench":function(){define([],function(){return{fileHasUnsavedChanges:"The file '${0}' has unsaved changes. Are you sure you want to close WITHOUT saving?",outlineNotAvailable:"An outline is not available",
preferences:"Preferences",noUserPref:"no user preferences...",restoreDefaults:"Restore Defaults"}})},"davinci/html/HtmlFileXPathAdapter":function(){define(function(){function n(m){this.elem=m}n.prototype={name:function(){return this.elem.tag},parent:function(){var m=this.elem.parent;if("HTMLFile"!==m.elementType)return new n(m)},index:function(){var m=this.elem.tag,k=this.elem.parent.children,h=0;if(1===k.length)return 0;k=k.filter(function(d){return d.tag===m});1<k.length&&k.some(function(d,b){if(d===
this.elem)return h=b+1,!0},this);return h}};return n})},"wcDocker/types":function(){define(["xide/types","xide/utils"],function(n,m){m={DOCK:{MODAL:"modal",FLOAT:"float",TOP:"top",LEFT:"left",RIGHT:"right",BOTTOM:"bottom",STACKED:"stacked"},LAYOUT:{SIMPLE:"wcLayoutSimple",TABLE:"wcLayoutTable"},EVENT:{INIT:"panelInit",LOADED:"dockerLoaded",UPDATED:"panelUpdated",VISIBILITY_CHANGED:"panelVisibilityChanged",BEGIN_DOCK:"panelBeginDock",END_DOCK:"panelEndDock",GAIN_FOCUS:"panelGainFocus",LOST_FOCUS:"panelLostFocus",
CLOSING:"panelClosing",CLOSED:"panelClosed",PERSISTENT_CLOSED:"panelPersistentClosed",PERSISTENT_OPENED:"panelPersistentOpened",BUTTON:"panelButton",ATTACHED:"panelAttached",DETACHED:"panelDetached",MOVE_STARTED:"panelMoveStarted",MOVE_ENDED:"panelMoveEnded",MOVED:"panelMoved",RESIZE_STARTED:"panelResizeStarted",RESIZE_ENDED:"panelResizeEnded",RESIZED:"panelResized",ORDER_CHANGED:"panelOrderChanged",SCROLLED:"panelScrolled",SAVE_LAYOUT:"layoutSave",RESTORE_LAYOUT:"layoutRestore",CUSTOM_TAB_CHANGED:"customTabChanged",
CUSTOM_TAB_CLOSED:"customTabClosed",BEGIN_FLOAT_RESIZE:"beginFloatResize",END_FLOAT_RESIZE:"endFloatResize",BEGIN_RESIZE:"beginResize",END_RESIZE:"endResize"},PANEL_PLACEHOLDER:"__wcDockerPlaceholderPanel",COLLAPSED:"__wcDockerCollapsedPanel",ORIENTATION:{VERTICAL:!1,HORIZONTAL:!0},TAB:{TOP:"top",LEFT:"left",RIGHT:"right",BOTTOM:"bottom"}};n.DOCKER||(n.DOCKER=m);return m})},"davinci/ve/widgets/BackgroundDialog":function(){define("dojo/_base/declare dijit/_WidgetBase dijit/_TemplatedMixin dijit/_WidgetsInTemplateMixin davinci/Runtime davinci/ve/widgets/MutableStore davinci/ve/widgets/ColorStore xide/utils dojo/text!./templates/BackgroundDialog.html davinci/ve/utils/CssUtils davinci/lang/ve dijit/lang/_common davinci/ve/utils/URLRewrite dojo/parser dojo/_base/lang davinci/model/Path dijit/form/Button davinci/ve/widgets/ColorPicker davinci/ve/widgets/ColorPickerFlat dijit/form/Textarea davinci/ui/widgets/FileFieldDialog".split(" "),
function(n,m,k,h,d,b,c,g,p,a,e,q,u,w,r){w._clearCache();var v=function(a,b){return"url('"+b+"')"};n=n("davinci.ve.widgets.BackgroundDialog",[m,k,h],{templateString:p,widgetsInTemplate:!0,_filePicker:null,context:null,veNLS:e,stopRowTemplate:"\x3ctr class\x3d'bgdGradOptRow bgdStopRow' style\x3d'display:none;'\x3e\x3ctd class\x3d'bgdCol1'\x3e\x3c/td\x3e\x3ctd class\x3d'bgdOptsLabel bdgStopLabel'\x3e"+e.bgdTemplate+"\x3c/td\x3e\x3ctd class\x3d'bgdStopColorTD'\x3e\x3cselect class\x3d'bgdColor' dojoType\x3d'dijit.form.ComboBox'\x3e\x3c/select\x3e\x3c/td\x3e\x3ctd\x3e\x3cselect class\x3d'bgdPosition' dojoType\x3d'dijit.form.ComboBox'\x3e\x3c/select\x3e\x3c/td\x3e\x3ctd class\x3d'bgdPlusMinusButtons'\x3e\x3cspan class\x3d'bgdPlusButton' dojoType\x3d'dijit.form.Button'\x3e+\x3c/span\x3e\x3cspan class\x3d'bgdMinusButton' dojoType\x3d'dijit.form.Button'\x3e-\x3c/span\x3e\x3c/td\x3e\x3c/tr\x3e",
postMixInProperties:function(){this.inherited(arguments);dojo.mixin(this,q)},postCreate:function(){this.inherited(arguments);var g=this.langObj=e;this.stoppos_store=new b({values:"0% 100% 10% 20% 30% 40% 50% 60% 70% 80% 90%".split(" ")});var d=davinci.ve._BackgroundWidgets;this._statics=["",davinci.ve.widgets.ColorPicker.divider,g.colorPicker,g.removeValue];var q=[{value:this._statics[0]}];q.push({value:this._statics[2],action:"_colorpicker"});q.push({value:this._statics[3],action:"_removevalue"});
q.push({value:this._statics[1],action:"_donothing"});q.push({value:"transparent"});q.push({value:"black"});q.push({value:"white"});q.push({value:"red"});q.push({value:"green"});q.push({value:"blue"});var h=[];this._bgcolor_action={};var p=[];this._stops_action={};for(var r=0;r<q.length;r++)h.push(q[r].value),q[r].action&&(this._bgcolor_action[q[r].value]=q[r].action),""!=q[r].value&&"_removevalue"!=q[r].action&&(p.push(q[r].value),q[r].action&&(this._stops_action[q[r].value]=q[r].action));this._bgcolor_store=
new c({values:h,noncolors:this._statics});this._stops_store=new c({values:p,noncolors:this._statics});var q=d["background-image"].comboBox.get("value"),k,u;"string"==typeof q&&0<q.length?(k=a.parseBackgroundImage(q),u=k.type):k={};this.bgddata=k;this.bgdOtherTA.set("value",q);var v=[];"emptystring url linear radial none other".split(" ").forEach(function(a){v.push({value:a,label:g["bgdType_"+a]})});this.bgdTypeSelect.addOption(v);this._updateBackgroundImageType(u);this.connect(this.bgdTypeSelect,
"onChange",dojo.hitch(this,function(){var a=this.bgdTypeSelect.get("value");this._updateBackgroundImageType(a);this._onFieldChanged()}));q=d["background-color"].comboBox.get("value");u=this.bgdColorCB;u.set("store",this._bgcolor_store);u.set("value",q);k.backgroundColor=q;this.connect(this.bgdColorCB,"onChange",dojo.hitch(this,function(a){this._onChangeColor(a,this.bgdColorCB,this._bgcolor_action)}));d["background-color"].bgdWidget=this.bgdColorCB;u=d["background-repeat"].comboBox;q=u.get("value");
h=this.bgdRepeatCB;h.set("store",u.store);h.set("regExp","repeat|repeat-x|repeat-y|no-repeat");h.set("value",q);k.backgroundRepeat=q;this.connect(this.bgdRepeatCB,"onChange",dojo.hitch(this,function(){k.backgroundRepeat=this.bgdRepeatCB.get("value");this._onFieldChanged()}));d["background-repeat"].bgdWidget=this.bgdRepeatCB;u=d["background-position"].comboBox;q=u.get("value");h=this.bgdPositionCB;h.set("store",u.store);h.set("regExp","auto|contain|cover|"+a.regstr_posn);h.set("value",q);k.backgroundPosition=
q;this.connect(this.bgdPositionCB,"onChange",dojo.hitch(this,function(){k.backgroundPosition=this.bgdPositionCB.get("value");this._onFieldChanged()}));d["background-position"].bgdWidget=this.bgdPositionCB;u=d["background-size"].comboBox;q=u.get("value");h=this.bgdSizeCB;h.set("store",u.store);h.set("regExp","auto|contain|cover|"+a.regstr_len_or_pct);h.set("value",q);k.backgroundSize=q;this.connect(this.bgdSizeCB,"onChange",dojo.hitch(this,function(){k.backgroundSize=this.bgdSizeCB.get("value");this._onFieldChanged()}));
d["background-size"].bgdWidget=this.bgdSizeCB;u=d["background-origin"].comboBox;q=u.get("value");h=this.bgdOriginCB;h.set("store",u.store);h.set("regExp","border-box|padding-box|content-box");h.set("value",q);k.backgroundOrigin=q;this.connect(this.bgdOriginCB,"onChange",dojo.hitch(this,function(){k.backgroundOrigin=this.bgdOriginCB.get("value");this._onFieldChanged()}));d["background-origin"].bgdWidget=this.bgdOriginCB;u=d["background-clip"].comboBox;q=u.get("value");h=this.bgdClipCB;h.set("store",
u.store);h.set("regExp","border-box|padding-box|content-box");h.set("value",q);k.backgroundClip=q;this.connect(this.bgdClipCB,"onChange",dojo.hitch(this,function(){k.backgroundClip=this.bgdClipCB.get("value");this._onFieldChanged()}));d["background-clip"].bgdWidget=this.bgdClipCB;d=new b({values:"to bottom;to top;to right;to left;45deg;-45deg".split(";")});this.bgdLinearAngleCB.set("store",d);this.bgdLinearAngleCB.set("regExp",a.regstr_angle);this.bgdLinearAngleCB.set("value",k&&k.angle?k.angle:"to bottom");
this.connect(this.bgdLinearAngleCB,"onChange",dojo.hitch(this,function(){k.angle=this.bgdLinearAngleCB.get("value");this._onFieldChanged()}));d=new b({values:"center;left top;center center;right bottom;0% 0%;0px 0px".split(";")});this.bgdRadialPosCB.set("store",d);this.bgdRadialPosCB.set("regExp",a.regstr_posn);this.bgdRadialPosCB.set("value",k&&k.posn?k.posn:"center");this.connect(this.bgdRadialPosCB,"onChange",dojo.hitch(this,function(){k.posn=this.bgdRadialPosCB.get("value");this._onFieldChanged()}));
d=new b({values:["circle","ellipse"]});this.bgdRadialShapeCB.set("store",d);this.bgdRadialShapeCB.set("regExp",a.regstr_shape);this.bgdRadialShapeCB.set("value",k&&k.shape?k.shape:"circle");this.connect(this.bgdRadialShapeCB,"onChange",dojo.hitch(this,function(){k.shape=this.bgdRadialShapeCB.get("value");this._onFieldChanged()}));d=new b({values:["farthest-corner","farthest-side","closest-corner","closest-side"]});this.bgdRadialExtentCB.set("store",d);this.bgdRadialExtentCB.set("regExp",a.regstr_extent);
this.bgdRadialExtentCB.set("value",k&&k.extent?k.extent:"farthest-corner");this.connect(this.bgdRadialExtentCB,"onChange",dojo.hitch(this,function(){k.extent=this.bgdRadialExtentCB.get("value");this._onFieldChanged()}));this._initializeStops(k&&k.stops&&2<=k.stops.length?k.stops:[{color:"white",pos:"0%"},{color:"black",pos:"100%"}])},startup:function(){this.inherited(arguments);var a=this.bgddata&&this.bgddata.url?this.bgddata.url:"";this._filePicker.set("value",a);this._filePicker.owner=this;this.bgddata.url=
a;this.connect(this._filePicker,"onChange",dojo.hitch(this,function(){var a=this._filePicker.get("value");this.bgddata.url=a;this._onFieldChanged()}))},_updateBackgroundImageType:function(a){var b=this.domNode;if(!a||"none"!=a&&"url"!=a&&"linear"!=a&&"radial"!=a&&"other"!=a)a="emptystring";this.bgddata.type=a;this.bgdTypeSelect.set("value",a);var c=dojo.query(".bgdOptionsLabelRow",b),e=dojo.query(".bgdImageOptRow",b),g=dojo.query(".bgdGradOptRow",b),d=dojo.query(".bgdLinearOptRow",b),q=dojo.query(".bgdRadialOptRow",
b),b=dojo.query(".bgdOtherRow",b);"url"==a?(e.concat(c).forEach(function(a){dojo.removeClass(a,"dijitHidden")}),g.concat(b).forEach(function(a){dojo.addClass(a,"dijitHidden")})):"linear"==a?(g.concat(c).forEach(function(a){dojo.removeClass(a,"dijitHidden")}),e.concat(q).concat(b).forEach(function(a){dojo.addClass(a,"dijitHidden")})):"radial"==a?(g.concat(c).forEach(function(a){dojo.removeClass(a,"dijitHidden")}),e.concat(d).concat(b).forEach(function(a){dojo.addClass(a,"dijitHidden")})):"other"==
a?(b.forEach(function(a){dojo.removeClass(a,"dijitHidden")}),e.concat(g).concat(c).forEach(function(a){dojo.addClass(a,"dijitHidden")})):e.concat(g).concat(c).concat(b).forEach(function(a){dojo.addClass(a,"dijitHidden")})},_initializeStops:function(b){var c=this.langObj;b||(b=this.bgddata.stops);for(var e=this.bgdTypeSelect.get("value"),g=dojo.query(".bgdStopRow",this.domNode),d=g.length-1;0<d;d--){var q=g[d],h=dojo.query(".bgdColor",q),h=dijit.byNode(h[0]);h.destroyRecursive();h=dojo.query(".bgdPosition",
q);h=dijit.byNode(h[0]);h.destroyRecursive();dojo.destroy(q)}d=g[0];g=d.parentNode;q=d.nextSibling;for(d=0;d<b.length;d++){var p=b[d],r=dojo.create("tr",{className:"bgdGradOptRow bgdStopRow"});r.innerHTML=this.stopRowTemplate;"linear"!=e&&"radial"!=e&&dojo.addClass(r,"dijitHidden");g.insertBefore(r,q);dojo.parser.parse(r);dojo.query(".bdgStopLabel",r)[0].innerHTML=this.langObj.bgdStop+" #"+(d+1)+":";h=dojo.query(".bgdColor",r);h=dijit.byNode(h[0]);h.set("store",this._stops_store);h.set("regExp",a.regstr_stop_color);
h.set("value",p.color);this.connect(h,"onChange",dojo.hitch(this,function(a,b){this._onChangeColor(b,a,this._stops_action)},h));h=dojo.query(".bgdPosition",r);h=dijit.byNode(h[0]);h.set("store",this.stoppos_store);p="string"==typeof p.pos&&0<p.pos.length?p.pos:0==d?"0%":"100%";h.set("regExp",a.regstr_stop_pos);h.set("value",p);this.connect(h,"onChange",dojo.hitch(this,function(){this._updateDataStructureStops();this._onFieldChanged()}));h=dojo.query(".bgdPlusButton",r)[0];h=dijit.byNode(h);h.set("title",
c.bgdAddStop);this.connect(h,"onClick",dojo.hitch(this,function(a){var b=this.bgddata.stops[a];this.bgddata.stops.splice(a+1,0,{color:b.color,pos:b.pos});this._initializeStops()},d));p=dojo.query(".bgdMinusButton",r)[0];p=dijit.byNode(p);p.set("title",c.bgdRemoveStop);this.connect(p,"onClick",dojo.hitch(this,function(a){this.bgddata.stops.splice(a,1);this._initializeStops()},d));r=dojo.query(".bgdMinusButton",this.domNode);for(h=0;h<r.length;h++)p=r[h],p=dijit.byNode(p),2>=b.length?p.set("disabled",
!0):p.set("disabled",!1)}this._updateDataStructureStops()},_onFieldChanged:function(){this._updateDialogValidity();this._updateBackgroundPreview()},_setBaseLocationAttr:function(a){this._baseLocation=a;this._filePicker.set("baseLocation",a)},_updateDialogValidity:function(){var a=this.bgddata;if(a&&a.type){var b=this.domNode,a=a.type,c=[],e=!0;"url"==a?c=dojo.query(".bgdImageOptRow",b):"linear"==a?c=dojo.query(".bgdStopRow",b).concat(dojo.query(".bgdLinearOptRow",b)):"radial"==a&&(c=dojo.query(".bgdStopRow",
b).concat(dojo.query(".bgdRadialOptRow",b)));c.forEach(function(a){dojo.query("[widgetid]",a).forEach(function(a){"function"!=typeof a.isValid||a.isValid()||(e=!1)})});this.bdgValid=e}},_updateBackgroundPreview:function(){function b(a,b){b=d[b];"string"==typeof b&&0<b.length&&(e+=";"+a+":"+b)}var c=dojo.query(".bgdPreview",this.domNode)[0],e="",d=this.bgddata;b("background-color","backgroundColor");b("background-repeat","backgroundRepeat");b("background-position","backgroundPosition");b("background-size",
"backgroundSize");b("background-origin","backgroundOrigin");b("background-clip","backgroundClip");for(var q=a.buildBackgroundImage(this.bgddata),h=0;h<q.length;h++){var p=q[h];if(u.containsUrl(p)&&!u.isAbsolute(p)&&this.context){var r=u.getUrl(p),r=g.parse_url(r);(r=this.context.ctx.getFileManager().getImageUrl({path:r.host+(r.path||""),mount:r.scheme},!1))&&(p=v(this._baseLocation,r))}e+=";background-image:"+p}c.setAttribute("style",e);this.bgdOtherTA.set("value",q[q.length-1])},_updateDataStructureStops:function(){var a=
this.bgddata;a.stops=[];for(var b=dojo.query(".bgdStopRow",this.domNode),c=1;c<b.length;c++){var e=b[c],g=dojo.query(".bgdColor",e),g=dijit.byNode(g[0]),e=dojo.query(".bgdPosition",e),e=dijit.byNode(e[0]);a.stops.push({color:g.get("value"),pos:e.get("value")})}},_setValueAttr:function(a){a&&this._colorPickerTargetWidget.set("value",a)},_onChangeColor:function(a,b,c){if(a=c[a])if("_removevalue"==a?b.set("value",""):b.set("value",b._currentcolorvalue),"_colorpicker"==a){a=new davinci.ve.widgets.ColorPickerFlat({});
c=b.get("value");var e=this.isLeftToRight();this._colorPickerTargetWidget=b;davinci.ve.widgets.ColorPickerFlat.show(a,c,this,e)}b._currentcolorvalue=b.get("value");this.bgddata.backgroundColor=this.bgdColorCB.get("value");this._updateDataStructureStops();this._onFieldChanged()},okButton:function(){},cancelButton:function(){this.onClose()}});n.getCSSForWorkspaceURL=v;r.setObject("davinci.ve.widgets.BackgroundDialog",n);return n})},"dcl/advise":function(){(function(n){"undefined"!=typeof define?define([],
n):"undefined"!=typeof module?module.exports=n():advise=n()})(function(){function n(d,b){this.next_before=this.prev_before=this.next_after=this.prev_after=this.next_around=this.prev_around=this;this.instance=d;this.name=b}function m(d){var b=function(){var b,g,h=arguments,a;for(b=d.prev_before;b!==d;b=b.prev_before)b.before.apply(this,h);try{d.prev_around!==d&&(g=d.prev_around.around.apply(this,h))}catch(e){g=e,a=!0}for(b=d.next_after;b!==d;b=b.next_after)b.after.call(this,h,g);if(a)throw g;return g};
b.adviceNode=d;return b}function k(d,b,c){var g=d[b],h;g&&g.adviceNode&&g.adviceNode instanceof n?h=g.adviceNode:(h=new n(d,b),g&&g.advices?(g=g.advices,h.add(g.before,g.after,g.around)):h.add(0,0,g),d[b]=m(h));"function"==typeof c&&(c=c(b,d));return h.add(c.before,c.after,0,c.around)}var h=n.prototype={add:function(d,b,c,g){var h=new n(this.instance,this.name);h.parent=this;h.before=d;this._add("before",h);h.after=b;this._add("after",h);h.around=c;this._add("around",h,g);if(h.original=g)h.around=
k._instantiate(g,h.prev_around.around,this);return h},_add:function(d,b,c){if(b[d]||c)c="next_"+d,d="prev_"+d,(b[d]=this[d])[c]=(b[c]=this)[d]=b},remove:function(d){this._remove("before",d);this._remove("after",d);this._remove("around",d)},_remove:function(d,b){var c="next_"+d;d="prev_"+d;b[c][d]=b[d];b[d][c]=b[c]},destroy:function(){var d=this.prev_around.around,b=this.next_around,c=this.parent;this.remove(this);if(b!==this)for(;b!==c;d=b.around,b=b.next_around)b.original&&(b.around=k._instantiate(b.original,
d,this));this.instance=0}};h.unadvise=h.destroy;k.before=function(d,b,c){return k(d,b,{before:c})};k.after=function(d,b,c){return k(d,b,{after:c})};k.around=function(d,b,c){return k(d,b,{around:c})};k.Node=n;k._instantiate=function(d,b,c){return d(b)};return k})},"xblox/model/logic/SwitchBlock":function(){define("dcl/dcl xblox/model/Block xblox/model/logic/CaseBlock xblox/model/logic/DefaultBlock dojo/Deferred xide/lodash".split(" "),function(n,m,k,h,d,b){return n(m,{declaredClass:"xblox.model.logic.SwitchBlock",
items:null,name:"Switch",icon:null,toText:function(){return this.getBlockIcon("H")+this.name+" "},canAdd:function(b){return b&&b.isInstanceOf?b.isInstanceOf(k)||b.isInstanceOf(h):[]},getFields:function(){return this.getDefaultFields(!1,!1)},solve:function(b,g){var c=this._stopped=!1,a=[];this.onSuccess(this,g);for(var e=0;e<this.items.length;e++){var d=this.items[e];if("xblox.model.logic.CaseBlock"===d.declaredClass&&(d=d.solve(b,this,g),0!=d)){c=!0;this.addToEnd(a,d);break}if(this._stopped)break}if(!c)for(e=
0;e<this.items.length;e++)d=this.items[e],"xblox.model.logic.CaseBlock"!=d.declaredClass&&this.addToEnd(a,d.solve(b,g));return a},getChildren:function(){return this.items},stop:function(){this._stopped=!0},runAction:function(b){var c=b.command;if("New/Case"===c||"New/Default"===b.command){b=this.scope.blockStore;var p=new d,a=null;switch(c){case "New/Case":a=this.add(k,{comparator:"\x3d\x3d",expression:"on",group:null});break;case "New/Default":a=this.add(h,{group:null})}p.resolve({select:[a],focus:!0,
append:!1});a.refresh();b._emit("added",{target:a})}},getActions:function(c,g){c=[this.createAction({label:"New Case",command:"New/Case",icon:this.getBlockIcon("I"),tab:"Home",group:"File",mixin:{addPermission:!0,custom:!0,quick:!1}})];b.find(this.items,{declaredClass:"xblox.model.logic.DefaultBlock"})||c.push(this.createAction({label:"Default",command:"New/Default",icon:"fa-eject",tab:"Home",group:"File",mixin:{addPermission:!0,custom:!0,quick:!1}}));return c}})})},"xcf/views/DriverTreeView":function(){define("xdojo/declare xide/utils xide/types xide/factory xcf/views/ProtocolTreeView xgrid/Grid xgrid/TreeRenderer xgrid/Search xide/views/_ActionMixin dstore/SimpleQuery dstore/Filter xaction/DefaultActions xide/views/_Dialog xide/views/_Panel xide/wizard/WizardBase dojo/Deferred dojo/promise/all xide/widgets/_Widget".split(" "),
function(n,m,k,h,d,b,c,g,p,a,e,q,u,w,r,v,x,A){p=k.ACTION;b=b.createGridClass("driverTreeView",{showHeader:!1,menuOrder:{File:110,Edit:100,View:90,Block:50,Settings:20,Navigation:10,Step:5,New:4,Window:1},options:m.clone(k.DEFAULT_GRID_OPTIONS),_refreshInProgress:!1,isGroup:function(a){return a?!0===a.isDir:!1},getRootFilter:function(){return{parentId:""}},getDefaultSort:function(){return[{property:"name",descending:!1,ignoreCase:!0}]},getDefaultCollection:function(){var a=this.getDefaultSort();return this.collection.sort(a)},
postMixInProperties:function(){this.collection=this.store.filter(this.getRootFilter());this.collection=this.getDefaultCollection().filter(this.getRootFilter());this.inherited(arguments);this._on("onAddAction",function(a){a.command===k.ACTION.EDIT&&(a.label="Settings")})},runAction:function(a,b){return this.inherited(arguments)},renderRow:function(a){var b=this.inherited(arguments),c=a.ref,c=c?c.item:null;null!=c&&c.scope&&!1===c.enabled&&$(b).addClass("disabledBlock");return b}},{SELECTION:!0,KEYBOARD_SELECTION:!0,
PAGINATION:!1,ACTIONS:k.GRID_FEATURES.ACTIONS,CONTEXT_MENU:k.GRID_FEATURES.CONTEXT_MENU,TOOLBAR:k.GRID_FEATURES.TOOLBAR,CLIPBOARD:k.GRID_FEATURES.CLIPBOARD,SEARCH:{CLASS:g},WIDGET:{CLASS:A}},{RENDERER:c},null,null);n=n("xcf.views.DriverGridView",b,{permissions:[p.RENAME,p.RELOAD,p.DELETE,p.CLIPBOARD,p.LAYOUT,p.COLUMNS,p.SELECTION,p.TOOLBAR,p.HEADER,p.SEARCH,"File/ImportProtocol",p.CONTEXT_MENU],deselectOnRefresh:!1,showHeader:!1,toolbarInitiallyHidden:!0,attachDirect:!0,groupOrder:{Clipboard:110,
Device:105,File:100,Step:80,Open:70,Organize:60,Insert:10,New:5,Navigation:3,Select:0},columns:[{renderExpando:!0,label:"Name",field:"name",sortable:!0,formatter:function(a,b){if(this.grid.isGroup(b))return'\x3cspan class\x3d"grid-icon fa-folder"\x3e\x3c/span\x3e'+b.name;if(b.iconClass)return'\x3cspan class\x3d"grid-icon '+b.iconClass+'"\x3e\x3c/span\x3e'+b.name;if(b.icon)return'\x3cspan class\x3d"grid-icon '+b.icon+'"\x3e\x3c/span\x3e'+b.name;if(this.grid.isGroup(b))return b.name;var c=(a=b.user)?
m.getCIInputValueByName(a,k.DRIVER_PROPERTY.CF_DRIVER_NAME):null;return a?'\x3cspan class\x3d"grid-icon fa-exchange"\x3e\x3c/span\x3e'+c:b.name}}],_getActions:function(a,b,c){function e(){var a=h.getSelection();return a&&a.length?a[0]?a:(console.error("have no item"),null):null}function g(){var a=e(),b=a?a[0]:null;return!b||b.isGroup?!0:b.instances||b.blockScope?!1:!(a[0].device&&a[0].driver)}function d(){var a=e();return!a||a[0].isGroup?!0:a[0].device&&a[0].driver?!1:!0}var q=[],h=this,p=h.delegate,
r=k.ACTION,u=h.getSelectedItem(),v={addPermission:!0,quick:!0};q.push(this.createAction("Edit",r.EDIT,k.ACTION_ICON.EDIT,["f4","enter","dblclick"],"Home","Open","item",null,function(){return h.editItem(h.getSelectedItem())},{addPermission:!0,tab:"Home",quick:!0},null,g,b,a,c));q.push(this.createAction("Code","File/Code","fa-code",["shift f4"],"Home","Open","item",null,function(){return p.editDriver(null,u)},{addPermission:!0,tab:"Home",quick:!0},null,g,b,a,c));q.push(this.createAction("Console","File/Console",
"fa-terminal",["f5","ctrl s"],"Home","Open","item",null,null,v,null,d,b,a,c));q.push(this.createAction("Log","File/Log","fa-calendar",["f9"],"Home","Open","item",null,null,v,null,d,b,a,c));q.push(this.createAction("New Group","File/New Group",k.ACTION_ICON.NEW_DIRECTORY,["f7"],"Home","New","item|view",null,null,v,null,function(){var a=e();return!(!a||0===a.length)},b,a,c));q.push(this.createAction("New Driver","File/New Driver",k.ACTION_ICON.NEW_FILE,["f4"],"Home","New","item",null,null,v,null,null,
b,a,c));q.push(this.createAction("Source","View/Source","fa-hdd-o",["f4"],"Home","Navigation","item",null,function(){},{addPermission:!0,tab:"Home",dummy:!0},null,null,b,a,h));q.push(this.createAction("Import Protocol","File/ImportProtocol","fa-upload",null,"Home","Navigation","item",null,function(){},{addPermission:!0,tab:"Home",quick:!0},null,g,b,a,h));var w=0;_.each([{label:"System",scope:"system_drivers"},{label:"User",scope:"user_drivers"}],function(c){var e=c.label;q.push(h.createAction(e,"View/Source/"+
e,"fa-hdd-o",["alt f"+w],"Home","Navigation","item",null,function(){},{addPermission:!0,tab:"Home",item:c,quick:!0},null,null,b,a,h));w++});return q},startup:function(){var a=q.getDefaultActions(this.permissions,this,this);this.inherited(arguments);this._createContextMenu||console.error("have no context menu!");this.addActions(a);this.addActions(this._getActions(this.domNode,this.permissions,this));var b=this;this.refresh().then(function(){b.select([0],null,!0,{focus:!0})});this.subscribe(k.EVENTS.ON_STORE_CHANGED,
function(a){a.store==b.collection&&b.refresh()});this.wireStore(this.collection)},editItem:function(a){function b(){a.driver&&(a=a.driver);c.openItem(a,e)}var c=this,e=a.device,g=c.ctx.getDeviceManager();e&&!e.driverInstance&&g.startDevice(e).then(function(){b()});if(a.type===k.ITEM_TYPE.BLOCK)return c.blockManager.editBlock(a.ref.item,null,!1);b()},wireStore:function(a){function b(){setTimeout(function(){e.refresh()},100)}var c=a.scope;if(!this["_storeConnected"+c]){this["_storeConnected"+c]=!0;
var e=this;this.addHandle("update",a.on("update",b));this.addHandle("added",a.on("added",b));this.addHandle("remove",a.on("remove",b));this.addHandle("delete",a.on("delete",b))}},clipboardPaste:function(a,b){new v;var c=this.currentCutSelection,e={focus:!0,append:!1};a=a||c?this.currentCutSelection:this.currentCopySelection;var c=[],g=[],d=new v;b=b||this.getSelectedItem()||{};b.isDriver&&(b=b.getParent());if(!b||!b.isDir)return d.resolve(),d;a=a.filter(function(a){return a.isDriver});if(!a||!a.length)return d.resolve(),
d;for(var q=0;q<a.length;q++){var h=this.delegate.cloneDriver(a[q],b);h.then(function(a){g.push(a)});c.push(h)}x(c).then(function(a){e.select=g;d.resolve(e)});return d},changeSource:function(a){function b(b){c.collection=b;var e=b.filter(c.getRootFilter());c.set("collection",e);c.set("title","Drivers ("+a.label+")");c.scope=g;c.wireStore(b);c.refresh()}var c=this,e=c.delegate,g=a.scope,d=e.getStore(g);d.then?d.then(function(){d=e.getStore(g);b(d)}):b(d)},runAction:function(a,b){if(a&&a.command){var c=
k.ACTION,e=this,g=e.delegate,d=e.ctx.getDeviceManager(),q=e.getSelectedItem()||b,h=q?q.device:null;if(-1!==a.command.indexOf("View/Source"))return this.changeSource(a.item);var p={focus:!0,append:!1,delay:1,expand:!0};switch(a.command){case "File/Code":return h&&h.driverInstance&&(q=h.driverInstance.driver),g.editDriver(null,q);case "File/ImportProtocol":return h&&h.driverInstance&&(q=h.driverInstance.driver),this.importProtocol(q);case "File/Console":if(h&&!h.driverInstance){d.startDevice(h).then(function(){d.openConsole(q.device)});
return}return d.openConsole(q.device);case "File/Log":return d.openLog(q.device);case c.EDIT:return e.editItem(q);case c.RELOAD:return e.refresh();case c.DELETE:return c=g.onDeleteItem(q),c.then(function(){e.refresh()}),c;case "File/New Driver":return c=g.newItem(q),c.then(function(a){try{e.refresh(),a&&e.select(a,null,!0,p)}catch(Q){console.error("error!",Q)}}),c;case "File/New Group":return c=g.newGroup(q,e.scope),c.then(function(a){e.refresh();e.select(a,null,!0,p)}),c}return this.inherited(arguments)}},
importProtocol:function(a){function b(a,b,c,e,g,q){return m.addWidget(d,m.mixin({title:"Devices",collection:b.getProtocolManager().store,delegate:b.getProtocolManager(),blockManager:b.getBlockManager(),ctx:b,icon:"fa-sliders",showHeader:!1,scope:"system_protocols",resizeToParent:!0},q),null,a,!0)}function c(a,c,d,p,k){return m.addWidget(r,{onFinish:function(){for(var a=m.getObject("xcf/model/Variable"),b=m.getObject("xcf/model/Command"),c=d.blockScope,g=e,q=0;q<g.length;q++){var p=g[q],r="protocolVariable"==
p.type,u=p.name||p.title,v=null,v=r?{value:p.value,name:u,group:"basicVariables"}:{send:p.value,name:u,group:"basic"};if(u=c.getBlockByName(u)||c.getVariable(u)){r?u.value=p.value:u.send=p.value;for(var w in p)"name"!==w&&"value"!==w&&"title"!==w&&(u[w]=p[w]);u.refresh();k&&k();break}var r=r?a:b,n;for(n in p)"name"!==n&&"value"!==n&&"title"!==n&&(v[n]=p[n]);p=h.createBlock(r,v);p=c.blockStore.putSync(p);p.scope=c;k&&k()}},options:{tabClass:"nav",nextSelector:".button-next",previousSelector:".button-previous",
firstSelector:".button-first",lastSelector:".button-last",finishSelector:".button-finish",backSelector:".button-back"},panes:[{title:"Select Protocol",icon:"fa-hand-o-up",selected:!0,onShow:function(a){q&&q.hideButton(".button-finish",!0)},create:function(a,e){a=b(a,c,d,p,"command");e.widget=a;a._on("selectionChanged",function(a){g=a.selection[0];q.disableButton(".button-next",!g||g.virtual)});return a}},{title:"Select Items",icon:"fa-hand-o-up",onShow:function(a){q.disableButton(".button-next",!0);
q.hideButton(".button-finish",!1)},create:function(a,h){a=b(a,c,d,p,"command",{getRootFilter:function(){return g?{parentId:g.path}:{parentId:""}}});h.widget=a;a._on("selectionChanged",function(a){e=a=a.selection;q.disableButton(".button-finish",!a.length||a[0].isDir)});q.hideButton(".button-finish",!1);return a}}],buttons:[{title:"Previous",cls:"btn btn-default button-previous pull-left",name:"previous",value:"Previous",disabled:!0},{title:"Finish",cls:"btn btn-default button-finish pull-right",name:"finish",
value:"Finish"},{title:"Next",cls:"btn btn-default button-next pull-right",name:"next",value:"Next",disabled:!0}]},null,a,!0)}var e=[],g=null,q=null;return function(a,b,e,g,d){a=new w({title:"Import protocol ",options:{contentSize:{width:"600px",height:"500px"}},onShow:function(a,d){var h=this;q=c(d,b,e,g,function(){h.destroy()});return[q]}});a.show();return a}(null,this.ctx,a,null,"command",!0)},createProtocolWizard:function(){},changeScope:function(a){this.delegate.ls(a+"_drivers").then(function(a){})},
openItem:function(a,b){!a||a.isDir||a.virtual||this.delegate.openItemSettings(a,b)}});n.getActions=n.prototype._getActions;return n})},"xblox/data/Store":function(){define(["dojo/_base/declare","xide/data/TreeMemory","xide/data/ObservableStore","dstore/Trackable","dojo/Deferred"],function(n,m,k,h,d){return n("xblox.data.Store",[m,h,k],{idProperty:"id",parentField:"parentId",parentProperty:"parentId",filter:function(b){var c=this.inherited(arguments);delete this._state.filter;this._state.filter=b;
return c},getRootItem:function(){return{canAdd:function(){return!0},id:this.id+"_root",group:null,name:"root",isRoot:!0,parentId:null}},getChildren:function(b){return this.root.filter({parentId:this.getIdentity(b)})},_fetchRange:function(b){var c=new d;b=this.fetchRangeSync(b);var g;if(this._state.filter){if(this._state.filter.parentId){var h=this.getSync(this._state.filter.parentId);h&&(this.reset(),g=h.items,h.getChildren&&(g=h.getChildren()),c.resolve(g),b=g)}this._state&&this._state.filter&&this._state.filter.group&&
(g=this.getSync(this._state.filter.parent),h&&(this.reset(),b=h.items))}c.resolve(b);return c},mayHaveChildren:function(b){return b.mayHaveChildren?b.mayHaveChildren(b):null!=b.items&&0<b.items.length}})})},"xide/action/ActionContext":function(){define(["dcl/dcl","xdojo/declare","xide/types","dojo/aspect","xide/views/History"],function(n,m,k,h,d){var b={currentActionEmitter:null,_history:null,isEmpty:function(){var b=this.getCurrentEmitter();return b?0==b.getActionStore().getAll().length:!0},getCurrentEmitter:function(){return this.currentActionEmitter},
_onRemoveEmitter:function(b){this._history.remove(b);var c=this._history.getNow();this.currentActionEmitter==b&&(this.currentActionEmitter=null);c&&this.setActionEmitter(c)},refreshActions:function(b){var c=this;_.each(b,function(b){c.renderAction?c.renderAction(b,null,null,null,null):console.error("renderAction not implemented for refresh actions "+c.declaredClass)})},setActionEmitter:function(b,g,h){if(!b||!b.getActionStore||b.getActionStore())if(this.currentActionEmitter==b)b||this.setActionStore(null);
else{try{var a=this.currentActionEmitter;if(a){if(a.getActionStore){var c=a.getActionStore();c&&(c._all=null);this.clearActions()}a&&a.onDeactivateActionContext&&a.onDeactivateActionContext(this,h)}}catch(q){logError(q)}if(!b||b.getActionStore)if(this.currentActionEmitter=b){if(g=b.getActionStore())g.__all=null,this.setActionStore(g,b),g.addRenderer(this),b&&b.onActivateActionContext&&b.onActivateActionContext(this,h),this._emit("setActionEmitter",{emitter:b}),!this._history&&(this._history=new d),
this._history.setNow(b)}else this.setActionStore(null)}},_registerActionEmitter:function(b){if(!b||b.getActionStore){if(!b||!b.on)return!1;var c=this;b._on("selectionChanged",function(g){g[c.id+"_aceDid"]=!0;c.setActionEmitter(b,"clear"==g.why?"selectionCleared":"selectionChanged",g)});b.on("click",function(g){var a=!0;b.handleActionClick&&(a=b.handleActionClick(g));a&&c.setActionEmitter(b,"click",g)});!this._history&&(this._history=new d);b._on(k.EVENTS.ON_VIEW_SHOW,function(b){c._history.indexOf(b)&&
(b.view&&(b=b.view),c.setActionEmitter(b,k.EVENTS.ON_VIEW_SHOW,b))})}},destroy:function(){this.inherited&&this.inherited(arguments);this._history&&this._history.destroy()&&delete this._history},addActionEmitter:function(b){if(b){var c=this;!this._history&&(this._history=new d);b.getActionStore&&(this._history.push(b),c._registerActionEmitter(b),h.after(b,"destroy",function(){c._onRemoveEmitter(b)},!0),b._on(b,"destroy",function(){try{c._onRemoveEmitter(b)}catch(p){logError(p,"addActionEmitter")}},
!0))}}};m=m("xide/action/ActionContext",null,b);m.dcl=n(null,b);return m})},"xgrid/xgrid":function(){define([],function(){return null})},"xide/widgets/ContextMenu":function(){define("dcl/dcl xide/types xlang/i18 xide/widgets/_Widget xide/_base/_Widget xide/mixins/ActionMixin xaction/ActionContext xide/widgets/_MenuMixin4 xide/model/Path xide/_Popup xide/$ xide/lodash xide/widgets/_MenuKeyboard".split(" "),function(n,m,k,h,d,b,c,g,p,a,e,q,u){var w=n(null,{renderTopLevel:function(a,b){b=b||e(this.getRootContainer());
a=e('\x3cli class\x3d"dropdown"\x3e\x3ca href\x3d"#" class\x3d"dropdown-toggle" data-toggle\x3d"dropdown"\x3e'+k.localize(a)+'\x3cb class\x3d"caret"\x3e\x3c/b\x3e\x3c/a\x3e\x3c/li\x3e');b.append(a);return a},getRootContainer:function(){return this.navBar}});return n([h.dcl,c.dcl,b.dcl,w,g,d.StoreMixin],{target:null,openTarget:null,visibility:m.ACTION_VISIBILITY.CONTEXT_MENU,correctSubMenu:!0,limitTo:null,declaredClass:"xide.widgets.ContextMenu",menuData:null,addContext:function(b,c){function g(a){if(a=
this.keyboardController.toNavigationData(e(a.target),this.getRootContainer()))this.keyboardController.clear(a.parent),this.menu.focus(),a.element.focus(),this.menu.data("currentTarget",a.element)}this.menuData=c;var d,q,h=this,p=this.openTarget?this.openTarget:e(h.target);"undefined"!==typeof c.id&&"undefined"!==typeof c.data?(d=c.id,q=e("body").find("#dropdown-"+d)[0],"undefined"===typeof q&&(q=h.buildMenu(c.data,d),b.append(q))):(d=(new Date).getTime(),q=h.buildMenu(c,d),b.append(q));var r=this.getDefaultOptions();
this.keyboardController=new u;this.keyboardController.setup(this);this.__on(p,"contextmenu",null,function(b){if(h.limitTo){var c=e(b.target),c=c.parent();if(!c.hasClass(h.limitTo))return}h.openEvent=b;h.isOpen=!0;this.lastFocused=document.activeElement;h.onOpen(b);b.preventDefault();b.stopPropagation();e(".dropdown-context:not(.dropdown-context-sub)").hide();c=e("#dropdown-"+d);c.css("zIndex",a.nextZ(1));c.data("init")||(c.data("init",!0),h.__on(c,"mouseenter","LI",g.bind(h)),h.keyboardController.initContainer(c));
if("boolean"==typeof r.above&&r.above)c.css({top:b.pageY-20-e("#dropdown-"+d).height(),left:b.pageX-13}).fadeIn(r.fadeSpeed);else if("string"==typeof r.above&&"auto"==r.above){c.removeClass("dropdown-context-up");var q=c.height()+0;b.pageY+q>e("html").height()?(q=b.pageY-20-q,0>q&&(q=20),c.css({top:q+20,left:b.pageX-13}).fadeIn(r.fadeSpeed)):c.css({top:b.pageY-10,left:b.pageX-13}).fadeIn(r.fadeSpeed)}"boolean"==typeof r.left&&r.left?c.addClass("dropdown-context-left").css({left:b.pageX-c.width()}).fadeIn(r.fadeSpeed):
"string"==typeof r.left&&"auto"==r.left&&(c.removeClass("dropdown-context-left"),q=c.width()-12,b.pageX+q>e("html").width()&&c.addClass("dropdown-context-left").css({left:b.pageX-c.width()+13}));this.keyboardController.activate(e(this.keyboardController.children(c)[0]),c)}.bind(this));this.__on(q,"keydown",function(a){27==a.keyCode&&((a=this.keyboardController.toNavigationData(e(a.target),this.getRootContainer()))&&a.element&&this.keyboardController.close(a.element),e(this.lastFocused).focus())}.bind(this));
return q},onRootAction:function(){return null},buildMenu:function(a,b,c,g){var d='\x3cul tabindex\x3d"-1" aria-expanded\x3d"true" role\x3d"menu" class\x3d"dropdown-menu dropdown-context'+(c?" dropdown-context-sub":" scrollable-menu ")+'" id\x3d"dropdown-'+b+'"\x3e\x3c/ul\x3e';g=g?this._rootMenu||e(d):e(d);c||(this._rootMenu=g,this._rootMenu.addClass("contextMenu"));g.data("data",a);return this.buildMenuItems(g,a,b,c)},onActionAdded:function(a){this.setActionStore(this.getActionStore(),this,!1,!0,
a)},clearAction:function(a){if(a){var b=null!==a.getVisibility?a.getVisibility(this.visibility):{};if(b){var c=b.widget;a.removeReference&&a.removeReference(c);c&&c.destroy&&c.destroy();delete b.widget;b.widget=null}}},onActionRemoved:function(a){this.clearAction(a.target)},removeCustomActions:function(){var a=this.store;if(a){var b=a._find({custom:!0}),c=this.menuData;q.each(b,function(b){a.removeSync(b.command);(b=q.find(c,{command:b.command}))&&c.remove(b)})}},setActionStore:function(a,b,c,g,d){if(!g){if(this.store==
a)return;this._clear();this.addActionStore(a)}var h=this,r=e(h.getRootContainer());if(this.store=a){var u=g?h.lastTree:h.buildActionTree(a,b),v=u.allActionPaths,w=h.menuData,m=[];!1===c||this["_handleAdded_"+a.id]||(this.addHandle("added",a._on("onActionsAdded",function(a){h.onActionAdded(a)})),this.addHandle("delete",a.on("delete",function(a){h.onActionRemoved(a)})),this["_handleAdded_"+a.id]=!0);if(!g)q.each(u.root,function(c,e){h.onRootAction(e,r);var g="",d={header:""},u=c.grouped;q.each(c,function(c){var e=
h.getAction(c,a),r=!1;e||(r=!0,e=h.createAction(c));if(e){var w=function(c,e){c=(new p(c)).getChildren(v,!1);if(c=0<c.length?h.toActions(c,a):null){var g=[];q.each(c,function(a){var c=h.getActionData(a),c=h.toMenuItem(a,b,c.label,c.icon,c.visibility,!0);h.addReference(a,c);g.push(c);0<(new p(a.command)).getChildren(v,!1).length&&w(a.command,c)});e.subMenu=g}},n=h.getActionData(e),x=n.icon,A=n.label,z=n.visibility,n=n.group;if(!z.widget){!r&&n&&u[n]&&1<=u[n].length&&g!==n&&(d={header:2<=u[n].length?
k.localize(n):""},m.push(d),g=n);if("Widget/Move/MoveToBackward"===e.command)debugger;r=h.toMenuItem(e,b,A,x,z||{},!0);m.push(r);z.widget=r;h.addReference(e,r);w(c,r)}}})}),h.attach(e("body"),m),h.onDidRenderActions(a,b);else if(d||!q.isEmpty(d))q.each(d,function(a){if(a){var c=h.getAction(a.command);if(c){var e=h.getActionData(c),g=e.visibility,e=h.toMenuItem(c,b,e.label,e.icon,g||{},null,!1);g.widget=e;h.addReference(a,e);a=c.getParentCommand();(a=h._findParentData(w,a))&&a.subMenu?(a.lazy=!0,a.subMenu.push(e)):
w.splice(0,0,e)}else console.error("cant find action "+a.command)}}),h.buildMenu(w,h.id,null,g)}}})})},"xaction/xaction":function(){define(["dijit","dojo","dojox"],function(n,m,k){})},"xide/mixins/VariableMixin":function(){define(["dcl/dcl","xdojo/declare","xide/utils"],function(n,m,k){var h={resolve:function(d,b,c){b=b||this.resourceVariables||this.ctx.getResourceManager().getResourceVariables()||null;c=c||this.variableDelimiters||null;return k.replace(d,null,b,c)}};m=m("xide/mixins/VariableMixin",
null,h);m.dcl=n(null,h);return m})},"davinci/ve/commands/MoveCommand":function(){define("dojo/_base/declare dojo/dom-geometry davinci/ve/widget davinci/ve/States davinci/ve/utils/StyleArray davinci/ve/utils/GeomUtils".split(" "),function(n,m,k,h,d,b){return n("davinci.ve.commands.MoveCommand",null,{name:"move",constructor:function(b,g,d,a,e,q,h){this._id=b?b.id:void 0;this._context=b.getContext();this._newBox={l:g,t:d};this._commandForXYDeltas=a;this._oldBox=e;this._applyToStateIndex=q&&"Normal"!=
q&&"undefined"!=q?q:"undefined";this._disableSnapping=h},execute:function(){if(this._id){var c=k.byId(this._id);if(c&&c.domNode){var g=this._context;if(!this._oldBox){var p=c.getMarginBox();this._oldBox={l:p.l,t:p.t,w:p.w,h:p.h}}if(!c.domNode.offsetParent)console.error("maeh");else if(dojo.position(c.domNode.offsetParent,!0)){this._commandForXYDeltas?(this._newBox.l=this._oldBox.l+this._commandForXYDeltas._deltaX,this._newBox.t=this._oldBox.t+this._commandForXYDeltas._deltaY):(!this._disableSnapping&&
g&&g._snapX&&(p=this._oldBox.w,"left"==g._snapX.typeRefObj?this._newBox.l=g._snapX.x:p&&"right"==g._snapX.typeRefObj?this._newBox.l=g._snapX.x-p:p&&"center"==g._snapX.typeRefObj&&(this._newBox.l=g._snapX.x-p/2)),!this._disableSnapping&&g&&g._snapY&&(p=this._oldBox.h,"top"==g._snapY.typeRefObj?this._newBox.t=g._snapY.y:p&&"bottom"==g._snapY.typeRefObj?this._newBox.t=g._snapY.y-p:p&&"middle"==g._snapY.typeRefObj&&(this._newBox.t=g._snapY.y-p/2)));this._deltaX=this._newBox.l-this._oldBox.l;this._deltaY=
this._newBox.t-this._oldBox.t;var p=b.getBorderBoxPageCoords(c.domNode.offsetParent),a=m.getBorderExtents(c.domNode.offsetParent),e=this._newBox.l-p.l-a.l,q=this._newBox.t-p.t-a.t;g.getScrollOffset();e=[{left:e+"px"},{top:q+"px"}];g=c.getStyleValuesAllStates();this._oldStyleValuesAllStates=dojo.clone(g);this._oldBox&&(this._oldStyleValuesAllStates[this._applyToStateIndex]=d.mergeStyleArrays(this._oldStyleValuesAllStates[this._applyToStateIndex],[{left:this._oldBox.l-p.l-a.l+"px"},{top:this._oldBox.t-
p.t-a.t+"px"}]));g[this._applyToStateIndex]=g[this._applyToStateIndex]?d.mergeStyleArrays(g[this._applyToStateIndex],e):e;c.setStyleValuesAllStates(g);p=h.getStatesListCurrent(c.domNode);a=d.mergeStyleArrays([],g.undefined);for(e=0;e<p.length;e++)g[p[e]]&&(a=d.mergeStyleArrays(a,g[p[e]]));c.setStyleValuesCanvas(a);c.setStyleValuesModel(g.undefined);c.refresh();h.resetState(c.domNode);dojo.publish("/davinci/ui/widgetPropertiesChanged",[[c]])}}else console.error("no widget")}},undo:function(){if(this._id){var b=
k.byId(this._id);if(b){var g=this._oldStyleValuesAllStates,h=this._applyToStateIndex;b.setStyleValuesAllStates(g);g=d.mergeStyleArrays(g.undefined,g[h]);b.setStyleValuesCanvas(g);b.setStyleValuesModel(this._oldStyleValuesAllStates.undefined);b.refresh();davinci.ve.states.resetState(b.domNode);dojo.publish("/davinci/ui/widgetPropertiesChanged",[[b]])}}}})})},"xcf/factory/Blocks":function(){define("xblox/factory/Blocks xcf/model/Command xblox/model/functions/CallBlock xblox/model/functions/StopBlock xblox/model/functions/PauseBlock xide/factory".split(" "),
function(n,m,k,h,d,b){return n?(n._getCommandBlocks=function(b,g,p,a){var c=[];c.push({name:"Commands",iconClass:"el-icon-random",items:[{name:"Call Command",owner:g,iconClass:"el-icon-video",proto:k,target:p,ctrArgs:{scope:b,group:a,condition:""}},{name:"Stop Command",owner:g,iconClass:"el-icon-video",proto:h,target:p,ctrArgs:{scope:b,group:a,condition:""}},{name:"Pause Command",owner:g,iconClass:"el-icon-video",proto:d,target:p,ctrArgs:{scope:b,group:a,condition:""}},{name:"New Command",owner:g,
iconClass:"el-icon-video",proto:m,target:p,ctrArgs:{scope:b,group:a,condition:"",name:"No-Title"}}]});return c},n):b})},"davinci/html/CSSCombinedSelector":function(){define(["dojo/_base/declare","davinci/html/CSSElement"],function(n,m){return n("davinci.html.CSSCombinedSelector",m,{constructor:function(){this.selectors=[];this.combiners=[];this.elementType="CSSCombinedSelector"},matchesSelector:function(k){if(k.elementType==this.elementType&&k.selectors.length==this.selectors.length){for(var h=0;h<
this.selectors.length;h++)if(this.combiners[h]!=k.combiners[h]||!this.selectors[h].matchesSelector(k.selectors[h]))return!1;return!0}},getText:function(k){for(var h="",d=0;d<this.selectors.length-1;d++)h+=this.selectors[d].getText(k),h=" "!=this.combiners[d]?h+(" "+this.combiners[d]+" "):h+this.combiners[d];return h+=this.selectors[this.selectors.length-1].getText(k)},matches:function(k){for(var h=this.selectors.length-1,d=0,b=0;b<k.length;b++){var c;if(0<=(c=this.selectors[h].matches(k,b))&&(d+=
c,h--,0>h))return d;if(0==b&&0>c)return-1}},visit:function(k){if(!k.visit(this)){for(var h=0;h<this.children.length;h++)this.children[h].visit(k);for(h=0;h<this.selectors.length;h++)this.selectors[h].visit(k)}k.endVisit&&k.endVisit(this)},getCSSRule:function(){return this.parent}})})},"davinci/lang/webContent":function(){define([],function(){return{designer:"Designer,",welcome:"Welcome",loadingMaqetta:"\x26nbsp;Loading Maqetta...",startupError:"Error starting Maqetta: ${0}",logOff:"Log Out",unsupportedBrowser:"Unsupported Browser",
unsupportedNote:'Maqetta supports Firefox 4, Chrome 5, and Safari 5.1 or greater. If you wish to continue with an unsupported browser, click "Continue."',buttonContinue:"Continue",pageDesignerTitle:"Maqetta Designer",maqettaUser:"Maqetta User",localhostUser:"localhost user",sessionTimedOut:"Session timed out",sessionTimedOutMsg:"The session has timed out, please \x3ca href\x3d'${hrefLoc}'\x3elog in\x3c/a\x3e again. (Auto-redirect within 10 seconds)",devicePreviewError:"Maqetta device previewer error. Must supply URL parameter 'file\x3d'",
devicePreviewPreviewing:"Previewing:",help:"Help",tutorials:"Tutorials",aboutMaqetta:"About Maqetta",review:"Review and Commenting,",reviewPageTitle:"Maqetta Review Board",careful:"Warning: You are about to leave Maqetta.",errorLoadingPlugin:"error loading plugin ${0}, response\x3d${1}",errorLoadingPlugins:"error loading plugins",multipleFilesUnsaved:"${0} (NOTE: This is one of ${1} files with unsaved changes.)",idleSessionMessage:"Your session will timeout in ${seconds} seconds, click anywhere in the page to continue using Maqetta.",
fileHasUnsavedChanges:"Save changes to ${0}?",perspectiveNotFound:"perspective not found: ${0}",scopeNotDefined:"scope not defined for action: ${0}",funcNotDefined:"function not defined for action: ${0}",serverConnectError:"\x3ch3\x3eError connecting to the Maqetta Server.\x3c/h3\x3e\x3cbr\x3e\x3cdiv\x3ePlease click here to \x3ca href\x3d'${redirectUrl}'\x3ereturn to Maqetta\x3c/a\x3e\x3cdiv\x3e\x3cdiv\x3eError description: ${error}\x3c/div\x3e"}})},"xide/manager/Application_XBLOX":function(){define(["dcl/dcl",
"require","dojo/Deferred"],function(n,m,k){return n(null,{declaredClass:"xide.manager.Application_XBLOX",onXBlocksReady:function(){m("xfile/manager/BlockManager");var h=this.ctx,d=new k;if(h.blockManager)h.blockManager.onReady();m(["xcf/manager/BlockManager"],function(b){h.blockManager=new b;h.blockManager.ctx=h;h.blockManager.updatePalette=!1;h.blockManager.init();h.blockManager.onReady();h.blockManager.serviceObject=h.fileManager.serviceObject;d.resolve()});var b=m("xblox/views/BlocksFileEditor");
h.registerEditorExtension("xBlocks","xblox","fa-play-circle-o",this,!0,null,b,{ctx:h,mainView:this.mainView,blockManagerClass:"xfile.manager.BlockManager",registerView:!0});return d}})})},"xaction/ActionModel":function(){define("dcl/dcl xaction/Action xide/data/Model xide/data/Source xide/model/Path xide/utils".split(" "),function(n,m,k,h,d,b){return n([m,k,h.dcl],{filterGroup:"item|view",keyboardMappings:null,bindWidgetProperties:["value","icon","disabled"],items:null,onRemove:function(){_.invoke(this.getReferences(),
"destroy");this.keyboardMappings&&_.invoke(this.keyboardMappings,"destroy");this.destroy()},shouldShow:function(){return!0},shouldDisable:function(){return!1},updateReference:function(b,g,d){g.set("disabled",this.shouldDisable(b,g,d));null!==this.icon&&null!==g.icon&&this.icon!==g.icon&&g.set("icon",this.icon);null!==this.value&&null!==g.value&&this.value!==g.value&&g.set("value",this.value)},refreshReferences:function(b,g){_.each(this.getReferences(),function(c){c.set(b,g)},this)},refresh:function(b){this._emit("refresh",
{action:this,selection:b});_.each(this.getReferences(),function(c){this.updateReference(b,c,c.visibility)},this)},setProperty:function(b,g,d){return this.set(b,g)},complete:function(){this.items=this.getChildren()},getParent:function(){var b=this.command.split("/");if(1<b.length)return this._store.getSync(b.slice(0,b.length-1).join("/"))},getParentCommand:function(){var b=this.command.split("/");if(1<b.length)return b.slice(0,b.length-1).join("/")},getSegments:function(b){return b.split("/")},getRoot:function(){return this.command.split("/")[0]},
getItemsAtBranch:function(c,g){return(new d(g)).getChildren(b.pluck(c,"command"),!1)},getChildren:function(){var b=this;return function(c){var g=[];_.each(c,function(a){g.push(b._store.getSync(a))});return g}(this.getItemsAtBranch(this._store.getAll(),this.command))},_onWidgetCreated:function(b){b.widget.addSource&&this.addReference(b.widget,{properties:{value:!0}},!0)}})})},"xgrid/Focus":function(){define(["xdojo/declare","xide/types","xide/utils"],function(n,m,k){k={_focused:!1,_detectFocus:null,
_detectBlur:null,destroy:function(){this.inherited(arguments);window.removeEventListener("focus",this._detectFocus,!0);window.removeEventListener("blur",this._detectBlur,!0)},_onBlur:function(){},set:function(h,d){"focused"==h&&this._onFocusChanged(d);return this.inherited(arguments)},_onFocusChanged:function(h,d){this._focused&&!h&&this._onBlur();!this._focused&&h&&this._emit(m.EVENTS.ON_VIEW_SHOW,this);this._focused=h;this.highlight&&this.highlight(h)},getFocused:function(h){if(this._focusedNode){var d=
this.row(this._focusedNode);if(d)return d[h?"element":"data"]}return null},startup:function(){this.inherited(arguments);this.headerNode.tabIndex=-1;this._focused=!0}};n=n("xgrid.Focus",null,k);n.Implementation=k;return n})},"xide/data/Reference":function(){define(["dcl/dcl","xide/utils","xide/lodash","xide/mixins/EventedMixin"],function(n,m,k,h){var d={_sources:[],destroyOnRemove:!0,_store:null,removeSource:function(b){},updateSource:function(b){},onSourceUpdate:function(b){},onSourceRemoved:function(b){},
onSourceDelete:function(b){},onItemChanged:function(b){},destroy:function(){(!this.item||this.item.removeReference)&&this.item&&this.item.removeReference(this);this.inherited&&this.inherited(arguments);if(this._sources){for(var b=0;b<this._sources.length;b++){var c=this._sources[b];c.item&&c.item.removeReference&&c.item.removeReference(this)}this._sources=null}},hasSource:function(b){return k.find(this._sources,{item:b})},addSource:function(b,c){this.hasSource(b)||(this._sources.push({item:b,settings:c}),
c&&c.onDelete&&this.addHandle("delete",b._store.on("delete",function(c){c.target==b&&this._store.removeSync(this[this._store.idProperty])}.bind(this))))},updateSources:function(b){for(var c=0;c<this._sources.length;c++){var g=this._sources[c],d=g.item,g=g.settings;b.property&&g.properties&&g.properties[b.property]&&(d._store.silent(!0),d.set(b.property,b.value),d._store.silent(!1),d._store.emit("update",{target:d}))}},constructor:function(b){this._sources=[];m.mixin(this,b)}};n=n([h.dcl],d);n.Implementation=
d;return n})},"xide/interface/Route":function(){define(["dcl/dcl","xdojo/declare"],function(n,m){var k={declaredClass:"xide.interface.Route",handleRoute:function(h){},routeToReference:function(h){},getRouteRenderParams:function(h){},getRouteActions:function(h){}};m=m("xide.interface.Route",null,k);m.dcl=n(null,k);return m})},"dojo/dnd/Mover":function(){define("../_base/array ../_base/declare ../_base/lang ../sniff ../_base/window ../dom ../dom-geometry ../dom-style ../Evented ../on ../touch ./common ./autoscroll".split(" "),
function(n,m,k,h,d,b,c,g,p,a,e,q,u){return m("dojo.dnd.Mover",[p],{constructor:function(c,g,d){function q(a){a.preventDefault();a.stopPropagation()}this.node=b.byId(c);this.marginBox={l:g.pageX,t:g.pageY};this.mouseButton=g.button;g=this.host=d;c=c.ownerDocument;this.events=[a(c,e.move,k.hitch(this,"onFirstMove")),a(c,e.move,k.hitch(this,"onMouseMove")),a(c,e.release,k.hitch(this,"onMouseUp")),a(c,"dragstart",q),a(c.body,"selectstart",q)];u.autoScrollStart(c);if(g&&g.onMoveStart)g.onMoveStart(this)},
onMouseMove:function(a){u.autoScroll(a);var b=this.marginBox;this.host.onMove(this,{l:b.l+a.pageX,t:b.t+a.pageY},a);a.preventDefault();a.stopPropagation()},onMouseUp:function(a){(h("webkit")&&h("mac")&&2==this.mouseButton?0==a.button:this.mouseButton==a.button)&&this.destroy();a.preventDefault();a.stopPropagation()},onFirstMove:function(a){var b=this.node.style,e,q=this.host;switch(b.position){case "relative":case "absolute":e=Math.round(parseFloat(b.left))||0;b=Math.round(parseFloat(b.top))||0;break;
default:b.position="absolute";b=c.getMarginBox(this.node);e=d.doc.body;var h=g.getComputedStyle(e),p=c.getMarginBox(e,h),h=c.getContentBox(e,h);e=b.l-(h.l-p.l);b=b.t-(h.t-p.t)}this.marginBox.l=e-this.marginBox.l;this.marginBox.t=b-this.marginBox.t;if(q&&q.onFirstMove)q.onFirstMove(this,a);this.events.shift().remove()},destroy:function(){n.forEach(this.events,function(a){a.remove()});var a=this.host;if(a&&a.onMoveStop)a.onMoveStop(this);this.events=this.node=this.host=null}})})},"xide/Lang":function(){define("xdojo/has xdojo/declare xlang/i18 xide/utils/StringUtils dojo/Deferred require".split(" "),
function(n,m,k,h,d,b){var c=m("xide/Lang",null,{}),g="ar bg ca cs da de el en es fa fr he hu id it jp ko nl no pl pt_BR ro ru sk sl sr sv tr uk vi zh_CN zh_TW".split(" ");c.getLanguage=function(){var b=navigator.languages?navigator.languages[0]:navigator.language||navigator.userLanguage,a="en";"undefined"!==typeof navigator&&(a="Netscape"==navigator.appName?navigator.language.substring(0,2):navigator.browserLanguage.substring(0,2));a!=b&&b&&(a=b);b=h.urlArgs(location.href);b.lang&&(a=b.lang.value);
if(-1!==g.indexOf(a))return a;a=a.substring(0,2);return-1!==g.indexOf(a)?a:"en"};c.loadLanguage=function(g){g=g||c.getLanguage();var a=new d;"en"!==g?b(["xlang/"+g],function(b){k.setLanguage(b);a.resolve(b)}):a.resolve();return a};return c})},"xblox/model/logic/IfBlock":function(){define("dcl/dcl xblox/model/Block xblox/model/Statement xblox/model/logic/ElseIfBlock dojo/Deferred xide/utils".split(" "),function(n,m,k,h,d,b){return n(m,{declaredClass:"xblox.model.logic.IfBlock",condition:"Invalid Expression",
consequent:null,elseIfBlocks:null,alternate:null,canAdd:function(){return[]},autoCreateElse:!0,name:"if",icon:"",add:function(b,g,d){null==d&&(d="consequent");return this._add(b,g,d,!1)},__addToStore:function(b){b.put(this)},mayHaveChildren:function(){return null!==this.items&&this.items.length||null!==this.elseIfBlocks&&this.elseIfBlocks.length||null!=this.consequent&&this.consequent.length||null!=this.alternate&&this.alternate.length},getChildren:function(){var b=[];this.consequent&&(b=b.concat(this.consequent));
this.elseIfBlocks&&(b=b.concat(this.elseIfBlocks));this.alternate&&(b=b.concat(this.alternate));return b},toText:function(){return"\x3cspan class\x3d'text-primary'\x3e"+this.getBlockIcon("E")+this.name+" \x3c/span\x3e\x3cspan class\x3d'text-warning small'\x3e"+this.condition+"\x3cspan\x3e"},_checkCondition:function(b){return b.parseExpression(this.condition,null,null)},solve:function(b,g){var c=this._checkCondition(b),a=this.getElseIfBlocks(),e=this.childrenByNotClass(h),d=null,e=e.filter(function(a){return!a.isInstanceOf(k)});
if(1==c||0<c){this.onSuccess(this,g);if(e&&e.length)for(a=0;a<e.length;a++)d=e[a].solve(b,g);return d}d=!1;this.onFailed(this,g);if(a)for(e=0;e<a.length&&!d;e++){c=a[e];if(c._checkCondition(b))return c.onSuccess(c,g),d=!0,c.solve(b,g);c.onFailed(c,g)}e=this.childrenByClass(k);if(0<e.length&&!d){d=null;for(a=0;a<e.length;a++)d=e[a].solve(b,g);return d}return[]},empty:function(){this._empty(this.alternate);this._empty(this.consequent);this._empty(this.elseIfBlocks)},removeBlock:function(b){b&&(b&&b.empty&&
b.empty(),delete b.items,b.parent=null,this.alternate.remove(b),this.consequent.remove(b),this.elseIfBlocks.remove(b))},_getContainer:function(b){return-1!=this.consequent.indexOf(b)?"consequent":-1!=this.alternate.indexOf(b)?"alternate":-1!=this.elseIfBlocks.indexOf(b)?"elseIfBlocks":"_"},init:function(){this.alternate=this.alternate||[];this.consequent=this.consequent||[];this.elseIfBlocks=this.elseIfBlocks||[];for(var b=0;b<this.alternate.length;b++)this.alternate[b].parentId=this.id,this.alternate[b].parent=
this;for(b=0;b<this.elseIfBlocks.length;b++)this.elseIfBlocks[b].parentId=this.id,this.elseIfBlocks[b].parent=this;for(b=0;b<this.consequent.length;b++)this.consequent[b].parentId=this.id,this.consequent[b].parent=this},getFields:function(){var b=this,g=this.inherited(arguments)||this.getDefaultFields();g.push(this.utils.createCI("condition",this.types.ECIType.EXPRESSION_EDITOR,this.condition,{group:"General",title:"Expression",dst:"condition",delegate:{runExpression:function(c,a,e){return b.scope.expressionModel.parse(b.scope,
c,!1,a,e)}}}));return g},postCreate:function(){this._postCreated||(this._postCreated=!0)},toCode:function(b,g){},getElseIfBlocks:function(){return this.childrenByClass(h)},runAction:function(c){var g=this.scope.blockStore;c=c.command;if("New/Else"===c||"New/Else If"===c){c="New/Else If"===c?h:k;var p=b.mixin({name:"else",items:[],dstField:"alternate",parentId:this.id,parent:this,scope:this.scope,canAdd:function(){return[]},canEdit:function(){return!1}},c==h?{name:"else if",dstField:"elseIfBlocks"}:
{name:"else",dstField:"alternate"});c=this.add(c,p,c==k?"alternate":"elseIfBlocks");var p={select:[c],focus:!0,append:!1,expand:!0,delay:10},a=new d;g._emit("added",{target:c});a.resolve(p);c.refresh();return a}},getActions:function(){var b=[];0==this.alternate.length&&b.push(this.createAction({label:"Else",command:"New/Else",icon:this.getBlockIcon("I"),tab:"Home",group:"File",mixin:{addPermission:!0,custom:!0}}));b.push(this.createAction({label:"Else If",command:"New/Else If",icon:this.getBlockIcon("I"),
tab:"Home",group:"File",mixin:{addPermission:!0,custom:!0}}));return b}})})},"dojo/store/util/SimpleQueryEngine":function(){define(["../../_base/array"],function(n){return function(m,k){function h(b){b=n.filter(b,m);var c=k&&k.sort;c&&b.sort("function"==typeof c?c:function(b,a){for(var e,g=0;e=c[g];g++){var d=b[e.attribute],h=a[e.attribute];if(d!=h)return!!e.descending==(null==d||d>h)?-1:1}return 0});if(k&&(k.start||k.count)){var g=b.length;b=b.slice(k.start||0,(k.start||0)+(k.count||Infinity));b.total=
g}return b}switch(typeof m){default:throw Error("Can not query with a "+typeof m);case "object":case "undefined":var d=m;m=function(b){for(var c in d){var g=d[c];if(g&&g.test){if(!g.test(b[c],b))return!1}else if(g!=b[c])return!1}return!0};break;case "string":if(!this[m])throw Error("No filter function "+m+" was found in store");m=this[m];case "function":}h.matches=m;return h}})},"xide/widgets/SelectWidget":function(){define(["dcl/dcl","xide/widgets/WidgetBase","xide/factory"],function(n,m,k){return n(m,
{declaredClass:"xide.widgets.SelectWidget",value:"unset",_lastValue:null,_nativeHandles:!1,widgetChanged:function(h){this.changed=!0;this.userData&&(this.userData.changed=!0);this.nativeWidget&&(this.nativeWidget instanceof dijit.form.CheckBox?this.setValue(this.nativeWidget.get("checked")):this.setValue(this.nativeWidget.value))},setupNativeWidgetHandler:function(){var h=this;this.nativeWidget&&!this._nativeHandles&&(this.nativeWidget._added=!0,this.nativeWidget._started||(this.valueNode.innerHTML=
"",this.valueNode.appendChild(this.nativeWidget.domNode),this.nativeWidget.startup()),this._nativeHandles=!0,this.nativeWidget._on?this.nativeWidget._on("change",function(d){if(null===h._lastValue||h._lastValue!==d)h._lastValue=d,h.widgetChanged(this)}):this.addHandle("change",this.nativeWidget.on("change",function(d){if(null===h._lastValue||h._lastValue!==d)h._lastValue=d,h.widgetChanged(this)})),this.addHandle("blur",this.nativeWidget.on("blur",function(){h.setActive(!1)})),this.addHandle("focus",
this.nativeWidget.on("focus",function(){h.setActive(!0)})))},initWithDataItem:function(h){this.empty();this.data=h;(this.widgets=k.createWidgetsFromArray(h.inputs,this))&&this.attachWidgets(this.widgets)},startup:function(){this.nativeWidget&&!0!==this.nativeWidget._added&&(this.valueNode.innerHTML="",this.valueNode.appendChild(this.nativeWidget.domNode),this.setupNativeWidgetHandler());this.onReady()}})})},"dijit/_HasDropDown":function(){define("dojo/_base/declare dojo/_base/Deferred dojo/dom dojo/dom-attr dojo/dom-class dojo/dom-geometry dojo/dom-style dojo/has dojo/keys dojo/_base/lang dojo/on dojo/touch ./registry ./focus ./popup ./_FocusMixin".split(" "),
function(n,m,k,h,d,b,c,g,p,a,e,q,u,w,r,v){return n("dijit._HasDropDown",v,{_buttonNode:null,_arrowWrapperNode:null,_popupStateNode:null,_aroundNode:null,dropDown:null,autoWidth:!0,forceWidth:!1,maxHeight:-1,dropDownPosition:["below","above"],_stopClickEvents:!0,_onDropDownMouseDown:function(b){this.disabled||this.readOnly||("MSPointerDown"!=b.type&&"pointerdown"!=b.type&&b.preventDefault(),this.own(e.once(this.ownerDocument,q.release,a.hitch(this,"_onDropDownMouseUp"))),this.toggleDropDown())},_onDropDownMouseUp:function(a){var c=
this.dropDown,e=!1;if(a&&this._opened){var g=b.position(this._buttonNode,!0);if(!(a.pageX>=g.x&&a.pageX<=g.x+g.w&&a.pageY>=g.y&&a.pageY<=g.y+g.h)){for(g=a.target;g&&!e;)d.contains(g,"dijitPopup")?e=!0:g=g.parentNode;if(e){g=a.target;if(c.onItemClick){for(var q;g&&!(q=u.byNode(g));)g=g.parentNode;if(q&&q.onClick&&q.getParent)q.getParent().onItemClick(q,a)}return}}}this._opened?c.focus&&(!1!==c.autoFocus||"mouseup"==a.type&&!this.hovering)&&(this._focusDropDownTimer=this.defer(function(){c.focus();
delete this._focusDropDownTimer})):this.focus&&this.defer("focus")},_onDropDownClick:function(a){this._stopClickEvents&&(a.stopPropagation(),a.preventDefault())},buildRendering:function(){this.inherited(arguments);this._buttonNode=this._buttonNode||this.focusNode||this.domNode;this._popupStateNode=this._popupStateNode||this.focusNode||this._buttonNode;var a={after:this.isLeftToRight()?"Right":"Left",before:this.isLeftToRight()?"Left":"Right",above:"Up",below:"Down",left:"Left",right:"Right"}[this.dropDownPosition[0]]||
this.dropDownPosition[0]||"Down";d.add(this._arrowWrapperNode||this._buttonNode,"dijit"+a+"ArrowButton")},postCreate:function(){this.inherited(arguments);var b=this.focusNode||this.domNode;this.own(e(this._buttonNode,q.press,a.hitch(this,"_onDropDownMouseDown")),e(this._buttonNode,"click",a.hitch(this,"_onDropDownClick")),e(b,"keydown",a.hitch(this,"_onKey")),e(b,"keyup",a.hitch(this,"_onKeyUp")))},destroy:function(){this._opened&&this.closeDropDown(!0);this.dropDown&&(this.dropDown._destroyed||this.dropDown.destroyRecursive(),
delete this.dropDown);this.inherited(arguments)},_onKey:function(a){if(!this.disabled&&!this.readOnly){var b=this.dropDown,c=a.target;b&&this._opened&&b.handleKey&&!1===b.handleKey(a)?(a.stopPropagation(),a.preventDefault()):b&&this._opened&&a.keyCode==p.ESCAPE?(this.closeDropDown(),a.stopPropagation(),a.preventDefault()):!this._opened&&(a.keyCode==p.DOWN_ARROW||(a.keyCode==p.ENTER||a.keyCode==p.SPACE&&(!this._searchTimer||a.ctrlKey||a.altKey||a.metaKey))&&("input"!==(c.tagName||"").toLowerCase()||
c.type&&"text"!==c.type.toLowerCase()))&&(this._toggleOnKeyUp=!0,a.stopPropagation(),a.preventDefault())}},_onKeyUp:function(){if(this._toggleOnKeyUp){delete this._toggleOnKeyUp;this.toggleDropDown();var b=this.dropDown;b&&b.focus&&this.defer(a.hitch(b,"focus"),1)}},_onBlur:function(){this.closeDropDown(!1);this.inherited(arguments)},isLoaded:function(){return!0},loadDropDown:function(a){a()},loadAndOpenDropDown:function(){var b=new m,c=a.hitch(this,function(){this.openDropDown();b.resolve(this.dropDown)});
this.isLoaded()?c():this.loadDropDown(c);return b},toggleDropDown:function(){this.disabled||this.readOnly||(this._opened?this.closeDropDown(!0):this.loadAndOpenDropDown())},openDropDown:function(){var c=this.dropDown,e=c.domNode,g=this._aroundNode||this.domNode,q=this,p=r.open({parent:this,popup:c,around:g,orient:this.dropDownPosition,maxHeight:this.maxHeight,onExecute:function(){q.closeDropDown(!0)},onCancel:function(){q.closeDropDown(!0)},onClose:function(){h.set(q._popupStateNode,"popupActive",
!1);d.remove(q._popupStateNode,"dijitHasDropDownOpen");q._set("_opened",!1)}});if(this.forceWidth||this.autoWidth&&g.offsetWidth>c._popupWrapper.offsetWidth){var g=g.offsetWidth-c._popupWrapper.offsetWidth,k={w:c.domNode.offsetWidth+g};a.isFunction(c.resize)?c.resize(k):b.setMarginBox(e,k);"R"==p.corner[1]&&(c._popupWrapper.style.left=c._popupWrapper.style.left.replace("px","")-g+"px")}h.set(this._popupStateNode,"popupActive","true");d.add(this._popupStateNode,"dijitHasDropDownOpen");this._set("_opened",
!0);this._popupStateNode.setAttribute("aria-expanded","true");this._popupStateNode.setAttribute("aria-owns",c.id);"presentation"===e.getAttribute("role")||e.getAttribute("aria-labelledby")||e.setAttribute("aria-labelledby",this.id);return p},closeDropDown:function(a){this._focusDropDownTimer&&(this._focusDropDownTimer.remove(),delete this._focusDropDownTimer);this._opened&&(this._popupStateNode.setAttribute("aria-expanded","false"),a&&this.focus&&this.focus(),r.close(this.dropDown),this._opened=!1)}})})},
"xcf/manager/ProjectManager":function(){define(["dcl/dcl","xide/manager/ManagerBase"],function(n,m){return n(m,{declaredClass:"xcf.manager.ProjectManager"})})},"dijit/_Widget":function(){define("dojo/aspect dojo/_base/config dojo/_base/connect dojo/_base/declare dojo/has dojo/_base/kernel dojo/_base/lang dojo/query dojo/ready ./registry ./_WidgetBase ./_OnDijitClickMixin ./_FocusMixin dojo/uacss ./hccss".split(" "),function(n,m,k,h,d,b,c,g,p,a,e,q,u){function w(){}function r(a){return function(b,
e,g,d){return b&&"string"==typeof e&&b[e]==w?b.on(e.substring(2).toLowerCase(),c.hitch(g,d)):a.apply(k,arguments)}}n.around(k,"connect",r);b.connect&&n.around(b,"connect",r);n=h("dijit._Widget",[e,q,u],{onClick:w,onDblClick:w,onKeyDown:w,onKeyPress:w,onKeyUp:w,onMouseDown:w,onMouseMove:w,onMouseOut:w,onMouseOver:w,onMouseLeave:w,onMouseEnter:w,onMouseUp:w,constructor:function(a){this._toConnect={};for(var b in a)this[b]===w&&(this._toConnect[b.replace(/^on/,"").toLowerCase()]=a[b],delete a[b])},postCreate:function(){this.inherited(arguments);
for(var a in this._toConnect)this.on(a,this._toConnect[a]);delete this._toConnect},on:function(a,b){return this[this._onMap(a)]===w?k.connect(this.domNode,a.toLowerCase(),this,b):this.inherited(arguments)},_setFocusedAttr:function(a){this._focused=a;this._set("focused",a)},setAttribute:function(a,c){b.deprecated(this.declaredClass+"::setAttribute(attr, value) is deprecated. Use set() instead.","","2.0");this.set(a,c)},attr:function(a,b){return 2<=arguments.length||"object"===typeof a?this.set.apply(this,
arguments):this.get(a)},getDescendants:function(){b.deprecated(this.declaredClass+"::getDescendants() is deprecated. Use getChildren() instead.","","2.0");return this.containerNode?g("[widgetId]",this.containerNode).map(a.byNode):[]},_onShow:function(){this.onShow()},onShow:function(){},onHide:function(){},onClose:function(){return!0}});d("dijit-legacy-requires")&&p(0,function(){require(["dijit/_base"])});return n})},"davinci/ve/widgets/ColorStore":function(){define(["dojo/_base/declare","dojo/data/ItemFileReadStore",
"davinci/lang/ve","dijit/lang/_common"],function(n,m){return n("davinci.ve.widgets.ColorStore",m,{constructor:function(k){this.clearValues();k.noncolors&&(this.noncolors=k.noncolors);k.values&&this.setValues(k.values)},setValues:function(k){var h=[];k&&(this._values=k);dojo.forEach(this._values,dojo.hitch(this,function(d){for(var b=!1,c=0;!b&&c<this.noncolors.length;c++)this.noncolors[c]==d&&(b=!0);b?h.push({name:d,value:d,label:d}):h.push({value:d,name:d,label:"\x3ctable\x3e\x3ctr\x3e\x3ctd style\x3d'width:10em'\x3e"+
d+"\x3c/td\x3e\x3ctd style\x3d'width:10px;height:10px;background-color:"+d+"'\x3e\x3c/td\x3e\x3c/tr\x3e\x3c/table\x3e"})}));this._jsonData={identifier:"value",items:h};this._loadFinished=!1},insert:function(k,h){this._values.splice(k,0,h);this.setValues()},contains:function(k){for(var h=0;h<this._values.length;h++)if(this._values[h]==k)return!0;return!1},getItemNumber:function(k){return this._values[k]},clearValues:function(){this._loadFinished=!1}})})},"xcf/XCFCommons":function(){define("xide/utils xide/utils/StringUtils xide/utils/HexUtils xide/utils/HTMLUtils xide/utils/StoreUtils xide/utils/WidgetUtils xide/utils/CIUtils xide/utils/ObjectUtils xide/utils/CSSUtils xfile/types xide/types xide/types/Types xide/factory xide/factory/Objects xide/factory/Events xide/factory/Clients xcf/model/ModelBase xcf/model/Command xcf/model/Variable xcf/factory/Blocks xcf/types xcf/types/Types xblox/types/Types xaction/types xconsole/types".split(" "),
function(n){Array.prototype.shuffle||(Array.prototype.shuffle=function(){for(var m=this.length,k,h;0<m;)h=Math.random()*m--|0,k=this[m],this[m]=this[h],this[h]=k});Array.prototype.remove||(Array.prototype.remove=function(){for(var m,k=arguments,h=k.length,d;h&&this.length;){m=k[--h];if(null==this.indexOf)break;for(;-1!=(d=this.indexOf(m));)this.splice(d,1)}return this});Array.prototype.swap=function(m,k){var h=this[m];this[m]=this[k];this[k]=h;return this};Array.prototype.indexOfPropertyValue||(Array.prototype.indexOfPropertyValue=
function(m,k){for(var h=0;h<this.length;h++)if(this[h][m]&&this[h][m]==k)return h;return-1});"function"!=typeof String.prototype.startsWith&&(String.prototype.startsWith=function(m){return this.substring(0,m.length)===m});"function"!=typeof String.prototype.endsWith&&(String.prototype.endsWith=function(m){return this.substring(this.length-m.length,this.length)===m});Function.prototype.bind=Function.prototype.bind||function(m){return dojo.hitch(m,this)};window.xlog=function(m){};window.xwarn=console.warn;
window.xerror=console.error;window.xtrace=console.trace})},"xide/views/_Dialog":function(){define("dcl/dcl xide/types xide/utils xide/mixins/EventedMixin xide/widgets/_Widget dojo/Deferred xide/_Popup".split(" "),function(n,m,k,h,d,b,c){var g="undefined"!==typeof BootstrapDialog?BootstrapDialog:{};m=n([d.dcl,h.dcl],{declaredClass:"xide/views/_Dialog",cssClass:"bootstrap3-dialog",containerClass:"",type:m.DIALOG_TYPE.WARNING,size:m.DIALOG_SIZE.SIZE_WIDE,dlg:null,bodyCSS:null,okButtonClass:"btn-danger",
startDfd:null,_ready:!1,getData:function(){return null},getInstance:function(b){this.defaultOptions="undefined"!==typeof BootstrapDialog?BootstrapDialog.defaultOptions:{};if(this.dlg)return this.dlg;b=this.buildArgs(b);var a=new g(b),c=a.realize,d=this;if(a)return a.realize=function(){c.apply(a,null);d.buildRendering(a);$.each(b.buttons,function(b,c){(b=a.getButton(c.id))&&1==c.focus&&b.addClass("active")});$(a.$modalDialog).draggable({handle:".modal-header"})},a.owner=this,this.dlg=a;console.error("BootstrapDialog not loaded, abort")},
buildRendering:function(b){this.containerNode=this.domNode=b.$modalBody[0];b.$modalBody.addClass(this.containerClass);this.bodyCSS&&b.$modalBody.css(this.bodyCSS)},onshown:function(b){b.owner.resize();b.owner.onShow.apply(b.owner,[]);var a=window.__nextZ?window.__nextZ(1):1040,c=window.__nextZ?window.__nextZ():1050;b.$modal.css("z-index",a);b.$modalDialog.css("z-index",c);this._ready=!0},onReady:function(){var b=this;setTimeout(function(){b._ready=!0},100)},startup:function(){this.getInstance()},
destroy:function(){this.dlg&&this.dlg.close()},show:function(c){var a=this;this.startDfd||(this.startDfd=new b,this.startDfd.then(function(){a.onReady()}));this.getInstance(c).open();setTimeout(function(){a._ready=!0},1E3);return this.startDfd},getButtons:function(){var b=this;return[{icon:"fa-check",label:b.localize("Ok"),cssClass:b.okButtonClass||"btn-primary",hotkey:13,autospin:!1,focus:!0,id:k.createUUID(),action:function(a){if(b._ready){a.close(!1);try{a.owner.onOk(b.getData())}catch(e){console.error("Error in dlg ok:",
e)}}}},{icon:"glyphicon glyphicon-check",label:b.localize("CANCEL"),cssClass:"btn-info",autospin:!1,id:k.createUUID(),action:function(a){a.close();a.owner.onCancel()}}]},buildArgs:function(b){b=b||this.defaultOptions||{};k.mixin(b,{type:this.type,size:this.size,message:this.message,title:this.title,buttons:this.buttons,onOk:this.onOk,onCancel:this.onCancel,onShow:this.onShow,onshown:this.onshown});b.title=this.localize(b.title);return b},constructor:function(b){this.buttons=this.getButtons();k.mixin(this,
b)},onOk:function(){},onCancel:function(){}});n.chainAfter(m,"onReady");n.chainAfter(m,"onOk");n.chainAfter(m,"onCancel");n.chainAfter(m,"resize");return m})},"davinci/ve/HTMLWidget":function(){define(["dojo/_base/declare","./_Widget"],function(n,m){return n("davinci.ve.HTMLWidget",m,{isHtmlWidget:!0,addHTMLClasses:!0,constructor:function(k,h,d){this.type="html."+h.tagName.toLowerCase();this.acceptsHTMLChildren=!0;null!=d&&(this.addHTMLClasses=d)},buildRendering:function(){this.containerNode=this.domNode;
if(this._params){for(var k in this._params)this.domNode.setAttribute(k,this._params[k]);this._params=void 0}try{!1!==this.addHTMLClasses&&dojo.addClass(this.domNode,"HtmlWidget")}catch(h){}},_getChildrenData:function(k){function h(b){(b=b.nodeValue.trim())&&(b=davinci.html.escapeXml(b));return b}var d=this.domNode;if(!d.hasChildNodes())return null;if(1===d.childNodes.length&&3===d.firstChild.nodeType)return h(d.firstChild);var b=[];dojo.forEach(d.childNodes,function(c){var g;switch(c.nodeType){case 1:(c=
require("davinci/ve/widget").byNode(c))&&(g=c.getData(k));break;case 3:g=h(c);break;case 8:g="\x3c!--"+c.nodeValue+"--\x3e"}g&&b.push(g)});return b},setProperties:function(k,h){var d=this.domNode;h=h||!1;for(var b in k)if("style"===b)dojo.style(d,k[b]);else if(!h){var c=k[b];c||"boolean"==typeof c||"number"==typeof c?d.setAttribute(b,c):d.removeAttribute(b)}this.inherited(arguments)},resize:function(){this.getChildren().forEach(function(k){k.resize&&k.resize()})},_attr:function(k,h){if(1<arguments.length)this.domNode[k]=
h;else return this.domNode[k]},getTagName:function(){return this.domNode.nodeName.toLowerCase()}})})},"dojo/_base/kernel":function(){define(["../has","./config","require","module"],function(n,m,k,h){var d,b={},c={},g={config:m,global:this,dijit:b,dojox:c},b={dojo:["dojo",g],dijit:["dijit",b],dojox:["dojox",c]};h=k.map&&k.map[h.id.match(/[^\/]+/)[0]];for(d in h)b[d]?b[d][0]=h[d]:b[d]=[h[d],{}];for(d in b)h=b[d],h[1]._scopeName=h[0],m.noGlobals||(this[h[0]]=h[1]);g.scopeMap=b;g.baseUrl=g.config.baseUrl=
k.baseUrl;g.isAsync=k.async;g.locale=m.locale;h="$Rev$".match(/[0-9a-f]{7,}/);g.version={major:1,minor:11,patch:2,flag:"",revision:h?h[0]:NaN,toString:function(){var a=g.version;return a.major+"."+a.minor+"."+a.patch+a.flag+" ("+a.revision+")"}};Function("d","d.eval \x3d function(){return d.global.eval ? d.global.eval(arguments[0]) : eval(arguments[0]);}")(g);g.exit=function(){};"undefined"!=typeof console||(console={});var b="assert count debug dir dirxml error group groupEnd info profile profileEnd time timeEnd trace warn log".split(" "),
p;for(h=0;p=b[h++];)console[p]||function(){var a=p+"";console[a]="log"in console?function(){var b=Array.apply({},arguments);b.unshift(a+":");console.log(b.join(" "))}:function(){};console[a]._fake=!0}();n.add("dojo-debug-messages",!!m.isDebug);g.deprecated=g.experimental=function(){};n("dojo-debug-messages")&&(g.deprecated=function(a,b,c){},g.experimental=function(a,b){});if(m.modulePaths){g.deprecated("dojo.modulePaths","use paths configuration");n={};for(d in m.modulePaths)n[d.replace(/\./g,"/")]=
m.modulePaths[d];k({paths:n})}g.moduleUrl=function(a,b){g.deprecated("dojo.moduleUrl()","use require.toUrl","2.0");var c=null;a&&(c=k.toUrl(a.replace(/\./g,"/")+(b?"/"+b:"")+"/*.*").replace(/\/\*\.\*/,"")+(b?"":"/"));return c};g._hasResource={};return g})},"davinci/workbench/Preferences":function(){define("dojo/_base/declare dojo/_base/xhr dojo/_base/lang dojo/topic dojo/dom ../Runtime dijit/_WidgetBase dijit/_TemplatedMixin dijit/_WidgetsInTemplateMixin dijit/registry davinci/ui/Dialog dijit/Tree dijit/tree/ForestStoreModel dojo/data/ItemFileReadStore davinci/lang/workbench dijit/lang/_common dojo/text!davinci/workbench/templates/Preferences.html dijit/form/Button".split(" "),
function(n,m,k,h,d,b,c,g,p,a,e,q,u,w,r,v,x){var A=n([c,g,p],{templateString:x,commonStrings:v,resize:function(){this.borderContainer.resize()}}),z={_allPrefs:{},savePreferences:function(a,b,c){},_loadExtensions:function(){z._extensions||(z._extensions=b.getExtensions("davinci.preferences"))},showPreferencePage:function(){z._loadExtensions();var b=z.getPrefJson();if(b.items)for(var c=b.items.length-1;0<=c;c--){var g=b.items[c];g.hide&&b.items.splice(c,1)}if(!b||1>b.length)alert(r.noUserPref);else{this.dialog=
e.showModal(new A({}),r.preferences,{width:650,height:350});var g=new w({data:b,jsId:"prefTreeDataStore"}),c=new u({jsId:"fileModel",labelAttr:"name",store:g,rootId:"root"}),h=["root"];if(b=b.items){do g=b[0],h.push(g.id),b=g.children;while(b)}var p=a.byId("prefTree");p||(p=new q({model:c,id:"prefTree",persist:!1,query:"{type:'directory'}",label:"Preferences",labelAttr:"name",showRoot:!1,childrenAttrs:"children",openOnClick:!0,autoExpand:!0}));p.onClick=function(a){z.setPaneContent(a)};d.byId("pref.TreePane").appendChild(p.domNode);
p.startup();p.onLoadDeferred.then(function(){p.set("paths",[h]).then(function(){p.focusNode(p.selectedNode);z.setPaneContent(p.selectedItem)})})}},getPrefJson:function(){var a=z._extensions;if(!a)return[];for(var b=[],c=0;c<a.length;c++)a[c]._index=c,a[c].category?(b[a[c].category]||(b[a[c].category]=[]),b[a[c].category].push(a[c])):(b.root||(b.root=[]),b.root.push(a[c]));return{identifier:"id",items:b.root.map(function(a){return{id:a.id,name:a.name,hide:a.hide,index:a._index,children:z._getPrefJsonChildren(a.id,
b)}})}},_getPrefJsonChildren:function(a,b){a=b[a];if(!a)return[];for(var c=[],e=0;e<a.length;e++)c[e]={id:a[e].id,name:a[e].name,index:a[e]._index},b[a[e].id]&&(c[e].children=z._getPrefJsonChildren(a[e].id,b));return c},setPaneContent:function(b){var c;delete z._currentPane;var e=z._extensions[b.index[0]],g=z.getPreferences(e.id,davinci.Workbench.getProject());e.pane?require([e.pane],function(b){b=new b;z._currentPane=b;z._currentPane._extension=e;z._currentPane.setPreferences(g);a.byId("pref.RightPane").setContent(b.domNode)}):
c=e.pageContent?document.createTextNode(e.pageContent):document.createTextNode("");c&&a.byId("pref.RightPane").setContent(c)},_save:function(a){if(z._currentPane){var b=z._currentPane.getPreferences(),c=z._currentPane._extension.id,e=davinci.Workbench.getProject();z.savePreferences(c,e,b);z._currentPane.save&&z._currentPane.save(b)}for(b=0;b<a.length;b++){try{a[b].save&&a[b].save()}catch(F){}a[b].children&&0<a[b].children.length&&z._save(a[b].children)}},save:function(){z._save(z._extensions);z.finish()},
finish:function(){z._extensions=null;z._currentPane=null;this.dialog.destroyRecursive(!1);this.dialog=null},getPreferences:function(a,b){z._allPrefs[b]||(z._allPrefs[b]={});return{version:"1.7",specVersion:"0.8",snap:!0,helper:"maq-metadata-dojo/dojox/mobile/ThemeHelper",themeSets:[{_COMMENT_:"Defines site-specific default theme sets",desktopTheme:"claro",mobileTheme:[{device:"Android",theme:"android"},{device:"BlackBerry",theme:"blackberry"},{device:"iPad",theme:"ipad"},{device:"iPhone",theme:"iphone"},
{device:"other",theme:"iphone"}],name:"site_dojo_default"}]}},getDefaultPreferences:function(a){z._loadExtensions();for(var c=0;c<z._extensions.length;c++)if(z._extensions[c].id==a)return"string"===typeof z._extensions[c].defaultValues?b.serverJSONRequest({url:z._extensions[c].defaultValues,handleAs:"json",sync:!0}).defaultValues:z._extensions[c].defaultValues}};return k.setObject("davinci.workbench.Preferences",z)})},"xcf/widgets/LoggingWidget":function(){define(["dcl/dcl","xide/types","xide/utils",
"xide/widgets/WidgetBase","xide/widgets/FlagsWidget"],function(n,m,k,h,d){n=n(h,{declaredClass:"xide.widgets.ArgumentsWidget",minHeight:"400px;",value:"",options:null,title:"",templateString:"\x3cdiv class\x3d'widgetContainer widgetBorder widgetTable' style\x3d'overflow: auto;height: 100%'\x3e\x3cdiv attachTo\x3d'itemsNode' class\x3d'text-default'\x3e\x3c/div\x3e\x3c/div\x3e",renderFlags:function(b,c){var g=m.LOGGING_FLAGS;b=k.addWidget(d,{value:c,data:[{value:g.GLOBAL_CONSOLE,label:"Global Console"},
{value:g.DEV_CONSOLE,label:"Chrome Dev - Console"},{value:g.DEVICE_CONSOLE,label:"Device Console"},{value:g.STATUS_BAR,label:"Status Bar"},{value:g.POPUP,label:"%%Popup"},{value:g.FILE,label:"File"}],lineBreak:!1,title:b,titleWidth:"30%",single:!1,hex:!0,userData:{value:c}},this,this.itemsNode,!0,"ui-widget-content");this.$itemsNode.append("\x3chr/\x3e");return b},renderItem:function(b,c,g){c=this.renderFlags(b,c);var d=this;c._on("change",function(a){g[b]=a;d.setValue(JSON.stringify(g,null,2))});
return c},_renderItem:function(b,c){var g=this.userData.value;this.add(this.renderItem(b,b in g?g[b]:c,this.userData.value))},startup:function(){var b=m.LOGGING_FLAGS,c=m.LOG_OUTPUT;_.isString(this.userData.value)&&(this.userData.value=k.fromJson(this.userData.value));this.userData.value&&_.isObject(this.userData.value)||(this.userData.value={});this._renderItem(c.DEVICE_CONNECTED,b.GLOBAL_CONSOLE|b.POPUP|b.STATUS_BAR|b.DEVICE_CONSOLE);this._renderItem(c.DEVICE_DISCONNECTED,b.GLOBAL_CONSOLE|b.POPUP|
b.STATUS_BAR|b.DEVICE_CONSOLE);this._renderItem(c.RESPONSE,b.DEVICE_CONSOLE|b.GLOBAL_CONSOLE);this._renderItem(c.SEND_COMMAND,b.DEVICE_CONSOLE|b.GLOBAL_CONSOLE);this._renderItem(c.DEVICE_ERROR,b.GLOBAL_CONSOLE|b.POPUP|b.STATUS_BAR|b.DEV_CONSOLE|b.DEVICE_CONSOLE);this.onReady()}});m.registerWidgetMapping("Logging Flags",n);return n})},"dojo/_base/unload":function(){define(["./kernel","./lang","../on"],function(n,m,k){var h=window,d={addOnWindowUnload:function(b,c){n.windowUnloaded||k(h,"unload",n.windowUnloaded=
function(){});k(h,"unload",m.hitch(b,c))},addOnUnload:function(b,c){k(h,"beforeunload",m.hitch(b,c))}};n.addOnWindowUnload=d.addOnWindowUnload;n.addOnUnload=d.addOnUnload;return d})},"davinci/ve/widgets/ColorPickerFlat":function(){define("dojo/_base/declare dijit/_Widget dijit/TooltipDialog dijit/form/Button dojox/widget/ColorPicker davinci/lang/ve dijit/lang/_common".split(" "),function(n,m,k,h,d,b,c){n=n("davinci.ve.widgets.ColorPickerFlat",[m],{numberDelta:1,insertPosition:1,data:null,postCreate:function(){this.inherited(arguments);
var b=dojo.doc.createElement("div");this._colorPicker=new d({});b.appendChild(this._colorPicker.domNode);var p=dojo.doc.createElement("div"),a=h({label:c.buttonOk});a.innerHtml="OK";p.appendChild(a.domNode);var e=h({label:c.buttonCancel});p.appendChild(e.domNode);b.appendChild(p);this.domNode.appendChild(b);dojo.connect(a,"onClick",this,"_onOk");dojo.connect(e,"onClick",this,"onCancel");delete this.canceled},onClose:function(){},onCancel:function(){this._value=null;this.canceled=!0},_onOk:function(){delete this.canceled;
this._value=this._colorPicker.get("value");this.onClose()},_getValueAttr:function(){return this._value},_setValueAttr:function(b){b=new dojo.Color(b);this._colorPicker.setColor(b.toHex())}});return dojo.mixin(n,{show:function(c,d,a,e){var g=new k({id:"maqetta_prop_tooltip_color_picker",title:b.selectColor,content:c});dijit.popup.moveOffScreen(g.domNode);var h=!1,p=function(a){return function(){h&&(h=!1,dijit.popup.close(g))}}();g.connect(c,"onCancel",p);g.connect(c,"onClose",p);var r=dijit.byNode(dojo.query("[widgetId]",
g.domNode)[0]);d in dojo.Color.named?(d=dojo.colorFromString(d),c.set("value",d.toHex())):c.set("value",d||"",!0);(function(b){return function(){dijit.popup.open({parent:a,popup:g,around:a.domNode,orient:e?{BL:"TL",BR:"TR",TL:"BL",TR:"BR"}:{BR:"TR",BL:"TL",TR:"BR",TL:"BL"},onClose:function(){r.canceled||(a._colorPickerFlat_comboBoxUpdateDueTo&&(a._comboBoxUpdateDueTo=a._colorPickerFlat_comboBoxUpdateDueTo),a.get("value"),a.set("value",r.get("value")));p();g.destroy()}});h=!0;dijit.focus(g.containerNode)}})()()}})})},
"davinci/html/html.plugin":function(){define(["require"],function(n){return{id:"davinci.html","davinci.editor":[{id:"HTMLEditor",name:"HTML Editor",extensions:"html",isDefault:!1,editorClass:"davinci/html/ui/HTMLEditor",palettePerspective:"davinci.html.htmlEditor",expandPalettes:["left"]},{id:"CSSEditor",name:"CSS Editor",extensions:"css",isDefault:!1,editorClass:"davinci/html/ui/CSSEditor",palettePerspective:"davinci.html.htmlEditor",expandPalettes:["left"]},{id:"ImageViewer",name:"Image Viewer",
extensions:"jpg,gif,jpeg,png",isDefault:!0,editorClass:"davinci/html/ui/ImageViewer",palettePerspective:"davinci.html.htmlEditor",expandPalettes:["left"]}],"davinci.editorActions":{editorContribution:{targetID:"davinci.html.CSSEditor",actions:[{id:"savecombo",className:"maqLabelButton",showLabel:!0,label:"Save",toolbarPath:"save",type:"ComboButton",run:function(){n(["../Workbench"],function(m){n("../ui/Resource").save()})},isEnabled:function(m){return n("../Workbench").getOpenEditor()},menu:[{iconClass:"saveIcon",
run:function(){n("../ui/Resource").save()},isEnabled:function(m){return n("../Workbench").getOpenEditor()},label:"Save",keyBinding:{accel:!0,charOrCode:"s",allowGlobal:!0}},{iconClass:"saveAsIcon",run:function(){n("../ui/Resource").saveAs("html")},isEnabled:function(m){return n("../Workbench").getOpenEditor()},label:"Save As",keyBinding:{accel:!0,shift:!0,charOrCode:"s",allowGlobal:!0}}]}]}},"davinci.preferences":[{name:"HTML",id:"general",category:""}],"davinci.fileType":[{extension:"html",iconClass:"htmlFileIcon",
type:"text"},{extension:"css",iconClass:"cssFileIcon",type:"text"},{extension:"jpeg",iconClass:"imageFileIcon",type:"image"},{extension:"jpg",iconClass:"imageFileIcon",type:"image"},{extension:"png",iconClass:"imageFileIcon",type:"image"},{extension:"gif",iconClass:"imageFileIcon",type:"image"}],"davinci.perspective":[{id:"htmlEditor",title:"HTML Editor",views:[{viewID:"davinci.ve.Palette",position:"left",hidden:!0},{viewID:"davinci.ui.outline",position:"left",hidden:!0},{viewID:"davinci.ve.style",
position:"right"},{viewID:"davinci.ui.comment",position:"right",hidden:!0},{viewID:"davinci.ve.states",position:"right-bottom",hidden:!0},{viewID:"davinci.ui.navigator",position:"left-bottom",selected:!0},{viewID:"davinci.review.reviewNavigator",position:"left"}]}]}})},"davinci/html/HTMLElement":function(){define(["dojo/_base/declare","davinci/html/HTMLItem","davinci/html/HTMLText","davinci/html/HTMLComment","davinci/html/HTMLAttribute"],function(n,m,k,h,d){return n("davinci.html.HTMLElement",m,{constructor:function(b){this.elementType=
"HTMLElement";this.attributes=[];this.tag=b||"";this._fmChildIndent=this._fmChildLine=0},add:function(b){this.statements||(this.statements=[]);this.statements.push(b);this.onChange()},getText:function(b){b=b||{};var c;b.indent+=2;c="\x3c"+this.tag;for(var g=0;g<this.attributes.length;g++){var d=this.attributes[g].getText(b);0<d.length&&(c=c+" "+d)}if(this.noEndTag)c+="/\x3e";else{c=c+"\x3e"+this._addWS(this._fmChildLine,this._fmChildIndent);if(this.statements)for(g=0;g<this.statements.length;g++)c+=
this.statements[g].printStatement(b,this.statements[g]);else if(this.script)c+=this.script;else if(0<this.children.length)for(d="style"==this.tag,g=0;g<this.children.length;g++)if(c+=this.children[g].getText(b),d){var a=this._fmChildLine,e=this._fmChildIndent||0;g+1==this.children.length&&(a=this._fmLine,e=this._fmIndent);c+=this._addWS(a,e)}c=c+"\x3c/"+this.tag+"\x3e"}b.indent-=2;return c+=this._addWS(this._fmLine,this._fmIndent)},_formatModel:function(b,c,g){function d(a,b,c){e+=1+a;b?(b._fmChildLine=
1,b._fmChildIndent=g.indent):(c._fmLine=1,c._fmIndent=g.indent)}function a(b,c){b.startOffset=e;b.wasParsed=!0;e+=b.tag.length+2;for(var g=0;g<b.attributes.length;g++){b.attributes[g].startOffset=e;var h=b.attributes[g].getText(c);0<h.length&&(e+=1+h.length);b.attributes[g].endOffset=e-1}b.noEndTag&&e++;b.startTagOffset=e;h="";if(b.statements)for(g=0;g<b.statements.length;g++)h+=b.statements[g].printStatement(c,b.statements[g]);else b.script&&(h=b.script);if(h)e+=h.length;else if(0<b.children.length){var q;
davinci.html._noFormatElements[b.tag]||(c.indent+=2,d(c.indent,b),q=!0);for(var p,g=0;g<b.children.length;g++){h=b.children[g];switch(h.elementType){case "HTMLElement":p&&"HTMLText"!=p.elementType&&!davinci.html._noFormatElements[h.tag]&&d(c.indent,null,p);a(h,c);break;case "HTMLText":h.startOffset=e;e+=h.value.length;break;case "HTMLComment":h.startOffset=e,e+=h.value.length,e++,h.isProcessingInstruction&&(e+=2)}p=h}q&&(c.indent-=2);p&&"HTMLText"!=p.elementType&&d(c.indent,null,p)}e+=b.tag.length+
3;b.endOffset=e-1}var e=0;void 0==c&&(c=this.children.length);var h,k;this.children.length&&0!=c?(k=this.children[c-1],e=k.endOffset+1):(h=this,e=this.startTagOffset+1);var w=e;davinci.html._noFormatElements[b.tag]||(d(g.indent,h,k),b._fmLine=1,b._fmIndent=c<this.children.length?g.indent:g.indent-2);a(b,g);return e>w?e-w:0},getElementText:function(b){b=b||{};var c="";if(0<this.children.length)for(var g=0;g<this.children.length;g++)"HTMLComment"!=this.children[g].elementType&&(c+=this.children[g].getText(b));
else{if(this.script)return this.script;if(this.statements)for(g=0;g<this.statements.length;g++)c+=this.statements[g].printStatement(b,this.statements[g])}return c},getChildElements:function(b,c,g){g=g||[];for(var d=0;d<this.children.length;d++)this.children[d].tag==b&&g.push(this.children[d]),c&&"HTMLElement"==this.children[d].elementType&&this.children[d].getChildElements(b,c,g);return g},getChildElement:function(b){for(var c=0;c<this.children.length;c++)if(this.children[c].tag==b)return this.children[c]},
hasAttribute:function(b){for(var c=0;c<this.attributes.length;c++)if(this.attributes[c].name==b)return!0;return!1},getAttribute:function(b){if(b=this._getAttribute(b))return b.value},_getAttribute:function(b){for(var c=0;c<this.attributes.length;c++)if(this.attributes[c].name==b)return this.attributes[c]},addText:function(b){this.addChild(new k(b));this.onChange()},addComment:function(b){this.addChild(new h(b));this.onChange()},getLabel:function(){return"\x3c"+this.tag+"\x3e"},addAttribute:function(b,
c,g){if("textContent"==b)this.children=[],this.addText(c);else{var h,a=0<this.attributes.length?this.attributes[this.attributes.length-1].endOffset+1:this.startTagOffset-(this.noEndTag?2:1),e=this._getAttribute(b),q;e?h=c.length-e.value.length:(e=new d,q=!0,h=b.length+c.length+4,e.startOffset=a,e.endOffset=a+h-1);e.name=b;e.setValue(c);e.noPersist=g;this.wasParsed&&!g&&0<h&&this.getHTMLFile().updatePositions(a,h);q&&this.attributes.push(e);this.onChange()}},removeAttribute:function(b){this.attributes.every(function(c,
g,d){return c.name===b?(d.splice(g,1),g=this.getHTMLFile(),!c.noPersist&&g&&(d=c.getText(),g.updatePositions(c.startOffest,0-(d.length+1))),!1):!0},this);this.onChange()},setAttribute:function(b,c){this.removeAttribute(b);this.addAttribute(b,c)},getUniqueID:function(b){if(!this.getAttribute("id")){var c=this.getHTMLFile();c.uniqueIDs||(c.uniqueIDs={});c=c.uniqueIDs.hasOwnProperty(this.tag)?++c.uniqueIDs[this.tag]:c.uniqueIDs[this.tag]=0;this.addAttribute("id",this.tag+"_"+c,b)}},findElement:function(b){var c=
this.getAttribute("id");if(b==c)return this;for(c=0;c<this.children.length;c++)if("HTMLElement"==this.children[c].elementType){var g=this.children[c].findElement(b);if(g)return g}},insertBefore:function(b,c){c=dojo.indexOf(this.children,c);0>c&&(c=void 0);this.addChild(b,c);this.onChange()},addChild:function(b,c,g){if(!g&&this.wasParsed)if("HTMLElement"==b.elementType){var d=this._getIndent(),a;c<this.children.length&&"HTMLElement"==this.children[c].elementType?a=this.children[c]._getIndent():this.children.length?
dojo.forEach(this.children,function(b){"HTMLElement"==b.elementType&&(a=b._getIndent())}):a=d+1;d=this._formatModel(b,c,{indent:a});this.getHTMLFile().updatePositions(b.startOffset,d)}else if("HTMLText"==b.elementType||"CSS"==b.elementType.substring(0,3)){var d=b.getText(),e=this.children.length?this.children[this.children.length-1].endOffset:this.startTagOffset,h=d.length;0<h&&("HTMLText"!=b.elementType&&(h+=this._fmChildIndent+1),this.getHTMLFile().updatePositions(e+1,h));b.startOffset=e+1;b.endOffset=
b.startOffset+d.length-1}m.prototype.addChild.apply(this,arguments)},removeChild:function(b){var c=dojo.indexOf(this.children,b);if(0<=c){var g=1+b.endOffset-b.startOffset;if("HTMLElement"==b.elementType)if(1==this.children.length)g+=1*this._fmChildLine+this._fmChildIndent,this._fmChildIndent-=2;else{if(0<c&&"HTMLElement"==this.children[c-1].elementType)var d=this.children[c-1],g=g+(1*d._fmLine+d._fmIndent);c+1==this.children.length&&"HTMLElement"==this.children[c-1].elementType&&(this.children[c-
1]._fmChildIndent-=2)}0<g&&this.wasParsed&&this.getHTMLFile().updatePositions(b.startOffset,0-g)}m.prototype.removeChild.apply(this,arguments)},_textModify:function(b,c){b=b.length-c.length;0!=b&&this.wasParsed&&this.getHTMLFile().updatePositions(this.startOffset,b)},setScript:function(b){this._textModify(b,this.script);this.script=b},_previous:function(){var b=dojo.indexOf(this.parent.children,this);if(0<b)return this.parent.children[b-1]},_getIndent:function(){var b=this._previous();return b?" HTMLText"==
b.elementType?(b=b.value.split("\n"),b[b.length-1].length):b._fmIndent:this.parent._fmChildIndent},visit:function(b){if(!b.visit(this)){for(var c=0;c<this.attributes.length;c++)this.attributes[c].visit(b);for(c=0;c<this.children.length;c++)this.children[c].visit(b)}b.endVisit&&b.endVisit(this)},setText:function(b){this.script="";var c=this.parent;this.errors=require("davinci/html/HTMLParser").parse(b,this).errors;dojo.mixin(this,this.children[0]);this.parent=c;this.visit({visit:function(b){delete b.wasParsed},
rules:[]});this.onChange()}})})},"davinci/ve/actions/PasteAction":function(){define(["dojo/_base/declare","../../Workbench","./ContextAction","../tools/PasteTool","../../Runtime"],function(n,m,k,h,d){return n("davinci.ve.actions.PasteAction",[k],{shortcut:{keyCode:86,ctrlKey:!0},run:function(b){if(b=this.fixupContext(b))if("davinci.ve.PageEditor"==b.declaredClass&&"source"==b._displayMode)b.htmlEditor.pasteAction.run();else{var c=d.clipboard;c&&b.setActiveTool(new h(c))}},isEnabled:function(b){b=
this.fixupContext(b);var c=m.getOpenEditor();return c&&b?"davinci.ve.PageEditor"==c.declaredClass?(b=c.getDisplayMode(),d.clipboard&&"source"!=b):d.clipboard:!1},shouldShow:function(b){return(b=(b=this.fixupContext(b))?b.editor:null)&&"davinci.ve.PageEditor"==b.declaredClass}})})},"xcf/manager/WidgetManager":function(){define("dcl/dcl dojo/_base/declare dojo/_base/lang dojo/dom-construct xide/mixins/ReloadMixin xide/types xide/utils xide/factory xwire/Binding xwire/EventSource xwire/WidgetTarget xwire/WidgetSource xwire/DeviceTarget xideve/manager/WidgetManager".split(" "),
function(n,m,k,h,d,b,c,g,p,a,e,q,u,w){return n([w,d.dcl],{declaredClass:"xcf/manager/WidgetManager",instances:null,_cbinding:null,options:null,_doOpenRight:!1,onReloaded:function(){this._createBinding()},makeDeviceBinding:function(){},_createBinding:function(){},onDeviceReady:function(a){this.instances.push(a)},getXFileOptions:function(a){var b=window.xFileContext,c=g.cloneConfig(b.config);a=b.getStore("workspace",{fields:1663,includedFileExtensions:a||"*",excludedFileExtensions:"*"});b={cookiePrefix:"driver",
sources:[{name:"System",path:"system_drivers",iconClass:"fileSelectDiscIcon"},{name:"User",path:"user_drivers",iconClass:"fileSelectDiscIcon"},{name:"App",path:"app_drivers",iconClass:"fileSelectDiscIcon"}],delegate:b.getPanelManager()};return{store:a,config:c,title:"Select Driver",filePanelOptions:b}},onFileSelected:function(a,b){a.custom.prop.value=c.buildPath(b.mount,b.path,!1);a.custom.prop.owner._onChange({target:a.custom.prop.row})},onSelectFile:function(a,b){var c=this,e=window.xFileContext;
a={title:"Select Script",owner:window.xFileContext,dst:{name:"Select",path:"."},src:".",ctx:window.xFileContext,custom:{node:a,prop:b}};var d="*";b.data&&b.data.custom&&b.data.custom.extensions&&(d=b.data.custom.extensions);b=this.getXFileOptions(d);this.options&&(a=k.mixin(a,b));a.store=b.store;a.config=b.config;a.filePanelOptions=b.filePanelOptions;a.defaultStoreName="workspace";a.defaultStoreOptions={fields:1663,includedFileExtensions:d||"*",excludedFileExtensions:"*"};e.defaultOptions=a;g.createFileSelectDialogLarge(a,
function(a,b){c.onFileSelected(a,b)})},_addXAppApplication:function(a){a.getGlobal().require.toUrl("xapp/manager/Application")},onShowBlockSmartInput:function(a){a.input.ctx=this.ctx},init:function(){this.instances=[];this.subscribe(b.EVENTS.ON_DEVICE_DRIVER_INSTANCE_READY,this.onDeviceReady);this.subscribe(b.EVENTS.ON_SHOW_BLOCK_SMART_INPUT,this.onShowBlockSmartInput)}})})},"dgrid/Grid":function(){define("dojo/_base/declare dojo/_base/lang dojo/dom-construct dojo/dom-class dojo/on dojo/has ./List ./util/misc dojo/_base/sniff".split(" "),
function(n,m,k,h,d,b,c,g){function p(a,b){b&&b.nodeType&&a.appendChild(b)}n=n(c,{columns:null,hasNeutralSort:!1,cellNavigation:!0,tabableHeader:!0,showHeader:!0,column:function(a){return"object"!==typeof a?this.columns[a]:this.cell(a).column},listType:"grid",cell:function(a,b){if(a.column&&a.element)return a;a.target&&a.target.nodeType&&(a=a.target);var c;if(a.nodeType){do{if(this._rowIdToObject[a.id])break;var e=a.columnId;if(e){b=e;c=a;break}a=a.parentNode}while(a&&a!==this.domNode)}if(!c&&"undefined"!==
typeof b){var g=this.row(a);if(e=g&&g.element)for(var e=e.getElementsByTagName("td"),d=0;d<e.length;d++)if(e[d].columnId===b){c=e[d];break}}if(null!=a)return{row:g||this.row(a),column:b&&this.column(b),element:c}},createRowCells:function(a,c,d,h,p){var e=k.create("table",{className:"dgrid-row-table",role:"presentation"}),q=9>b("ie")?k.create("tbody",null,e):e,u,m,w,n,B,C,E,F,G,D;d=d||this.subRows;m=0;for(w=d.length;m<w;m++)for(C=d[m],u=k.create("tr",null,q),C.className&&(u.className=C.className),
n=0,B=C.length;n<B;n++){E=C[n];F=E.id;G=E.field?" field-"+g.escapeCssIdentifier(E.field,"-"):"";(D="function"===typeof E.className?E.className(h):E.className)&&(G+=" "+D);G=k.create(a,{className:"dgrid-cell"+(F?" dgrid-column-"+g.escapeCssIdentifier(F,"-"):"")+G,role:"th"===a?"columnheader":"gridcell"});G.columnId=F;if(F=E.colSpan)G.colSpan=F;if(F=E.rowSpan)G.rowSpan=F;c(G,E,h,p);u.appendChild(G)}return e},_createBodyRowCell:function(a,b,c,g){var e=c;b.get?e=b.get(c):"field"in b&&"_item"!==b.field&&
(e=c[b.field]);b.renderCell?p(a,b.renderCell(c,e,a,g)):this._defaultRenderCell.call(b,c,e,a,g)},_createHeaderRowCell:function(a,b){var c=b.headerNode=a,e=b.field;e&&(a.field=e);b.renderHeaderCell?p(c,b.renderHeaderCell(c)):("label"in b||b.field)&&c.appendChild(document.createTextNode("label"in b?b.label:b.field));!1!==b.sortable&&e&&"_item"!==e&&(a.sortable=!0,a.className+=" dgrid-sortable")},left:function(a,b){a.element||(a=this.cell(a));return this.cell(this._move(a,-(b||1),"dgrid-cell"))},right:function(a,
b){a.element||(a=this.cell(a));return this.cell(this._move(a,b||1,"dgrid-cell"))},_defaultRenderCell:function(a,b,c){if(this.formatter){var e=this.formatter,g=this.grid.formatterScope;c.innerHTML="string"===typeof e&&g?g[e](b,a):this.formatter(b,a)}else null!=b&&c.appendChild(document.createTextNode(b))},renderRow:function(a,b){a=this.createRowCells("td",m.hitch(this,"_createBodyRowCell"),b&&b.subRows,a,b);b=k.create("div",{role:"row"});b.appendChild(a);return b},renderHeader:function(){var a=this,
c=this.headerNode;c.setAttribute("role","row");k.empty(c);var g=this.createRowCells("th",m.hitch(this,"_createHeaderRowCell"),this.subRows&&this.subRows.headerRows);this._rowIdToObject[g.id=this.id+"-header"]=this.columns;c.appendChild(g);this._sortListener&&this._sortListener.remove();this._sortListener=d(g,"click,keydown",function(e){if("click"===e.type||32===e.keyCode||!b("opera")&&13===e.keyCode){var g=e.target,h,q;do if(g.sortable){h=g.field||g.columnId;q=a.sort[0];h=a.hasNeutralSort&&q&&q.property===
h&&q.descending?[]:[{property:h,descending:q&&q.property===h&&!q.descending}];q={bubbles:!0,cancelable:!0,grid:a,parentType:e.type,sort:h};d.emit(e.target,"dgrid-sort",q)&&(a._sortNode=g,a.set("sort",h));break}while((g=g.parentNode)&&g!==c)}})},resize:function(){if(this.headerNode){var a=this.headerNode.firstChild,b=this.contentNode,c;this.inherited(arguments);b.style.width="";b&&a&&(c=a.offsetWidth)>b.offsetWidth&&(b.style.width=c+"px")}},destroy:function(){this._destroyColumns();this._sortListener&&
this._sortListener.remove();this.inherited(arguments)},_setSort:function(){this.inherited(arguments);this.updateSortArrow(this.sort)},_findSortArrowParent:function(a){var b=this.columns,c;for(c in b){var g=b[c];if(g.field===a)return g.headerNode}},updateSortArrow:function(a,b){this._lastSortedArrow&&(h.remove(this._lastSortedArrow.parentNode,"dgrid-sort-up dgrid-sort-down"),k.destroy(this._lastSortedArrow),delete this._lastSortedArrow);b&&(this.sort=a);a[0]&&(b=a[0].property,a=a[0].descending,b=this._sortNode||
this._findSortArrowParent(b),delete this._sortNode,b&&(b=b.contents||b,this._lastSortedArrow=k.create("div",{className:"dgrid-sort-arrow ui-icon",innerHTML:"\x26nbsp;",role:"presentation"},b,"first"),h.add(b,"dgrid-sort-"+(a?"down":"up")),this.resize()))},styleColumn:function(a,b){return this.addCssRule("#"+g.escapeCssIdentifier(this.domNode.id)+" .dgrid-column-"+g.escapeCssIdentifier(a,"-"),b)},_configColumns:function(a,b){var c=[],e=b instanceof Array;g.each(b,function(g,d){"string"===typeof g&&
(b[d]=g={label:g});e||g.field||(g.field=d);d=g.id=g.id||(isNaN(d)?d:a+d);this._configColumn&&(this._configColumn(g,b,a),d=g.id);e&&(this.columns[d]=g);g.grid=this;c.push(g)},this);return e?b:c},_destroyColumns:function(){this.cleanup()},configStructure:function(){var a=this.subRows,b=this._columns=this.columns;this.columns=!b||b instanceof Array?{}:b;if(a)for(b=0;b<a.length;b++)a[b]=this._configColumns(b+"-",a[b]);else this.subRows=[this._configColumns("",b)]},_getColumns:function(){return this._columns||
this.columns},_setColumns:function(a){this._destroyColumns();this.subRows=null;this.columns=a;this._updateColumns()},_setSubRows:function(a){this._destroyColumns();this.subRows=a;this._updateColumns()},_updateColumns:function(){this.configStructure();this.renderHeader();this.refresh();this._lastCollection&&this.renderArray(this._lastCollection);this._started&&(this.sort.length?(this._lastSortedArrow=null,this.updateSortArrow(this.sort)):this.resize())}});n.appendIfNode=p;return n})},"davinci/Workbench":function(){define("dcl/dcl dojo/_base/lang require ./Runtime ./ui/Dialog ./ve/metadata ./ve/utils/GeomUtils davinci/_WokbenchEditors davinci/_WokbenchMisc davinci/_Workbench_Menu davinci/_Workbench_Palette xide/widgets/ContextMenu xide/utils xide/types".split(" "),
function(n,m,k,h,d,b,c,g,p,a,e,q,u,w){Function.prototype.bind=Function.prototype.bind||function(a){return dojo.hitch(a,this)};window.setInterval(function(){r.saveState&&r.updateWorkbenchState()},5E3);var r=new (n([g,p,a,e],{declaredClass:"davinci.Workbench",_XX_last_member:!0,activePerspective:"",actionScope:[],_DEFAULT_PROJECT:"project1",_baseTitle:"Control-Freak ",hideEditorTabs:!0,_editorTabClosing:{},_shadowTabClosing:{},service:null,serviceClass:"XApp_XIDE_Workbench_Service",currentEditor:null,
run2:function(){h.subscribe("/davinci/ui/widgetPropertiesChanges",function(){var a=h.currentEditor.visualEditor;a._objectPropertiesChange.apply(a,arguments)})},onResize:function(a){var b=a.explicitOriginalTarget?a.explicitOriginalTarget:a.srcElement;if(("resize"==a.type||b.id&&-1<b.id.indexOf("dijit_layout__Splitter_")||b.nextSibling&&b.nextSibling.id&&-1<b.nextSibling.id.indexOf("dijit_layout__Splitter_"))&&(a=davinci&&h.currentEditor)&&a.onResize)a.onResize();r._originalOnResize&&r._originalOnResize();
r._repositionFocusContainer()},showModal:function(a,b,c,e,g,h){return d.showModal(a,b,c,e,g,h)},showMessage:function(a,b,c,e,g){return d.showMessage(a,b,c,e,g)},showDialog:function(a){return d.showDialog(a)},_loadActionClass:function(a){a&&"string"==typeof a.action&&k([a.action],function(b){try{if(b)a.action=new b,a.action.item=a;else debugger}catch(A){console.error("action class creation failed : "+a.action)}})},_toggleButton:function(a,b,c,e){a.checked&&(c.forEach(function(b){b!=a&&b.set("checked",
!1)}),r._runAction(a.item,b,a.item.id))},_runAction:function(a,b,c){b&&h.currentEditor&&(b=h.currentEditor);if(a.run)a.run();else if(a.action)dojo.isString(a.action)&&this._loadActionClass(a),a.action.run(b);else if(a.method&&b&&b[a.method]instanceof Function)b[a.method](c);else a.commandID&&h.executeCommand(a.commandID)},createPopup:function(a){function b(a){var b=this.contextMenuArgs||{};u.mixin(b,{owner:this,delegate:this,actionFilter:{quick:!0}});var c=new q(b,a);c.openTarget=a;c.init({preventDoubleContext:!1});
c._registerActionEmitter(this);$(a).one("contextmenu",function(a){a.preventDefault();this.store||c.setActionStore(this.getActionStore(),this)}.bind(this));this.contextMenu=c}var c=a.partID,e=a.domNode,g=a.context,d=a.openCallback;if("davinci.ve.visualEditor"===c)g.cMenu||(g.cMenu=b.apply(g.getVisualEditor(),[e]),g.getVisualEditor().add(g.cMenu));else{var h=this.getActionSets(c),p=h.clonedActionSets,h=h.actionSets;try{if(0<p.length){var k=r._createMenuTree(p,!0);r._initActionsKeys(h,a);var v=r._createMenu(k,
g);v&&e&&v.bindDomNode(e);v._widgetCallback=d;v._partID=c;return v}}catch(D){logError(D,"creating popup")}}},getActionSets:function(a){var c=[];h.getExtension("davinci.actionSetPartAssociations",function(b){return b.parts.some(function(e){if(e==a)return c.push(b.targetID),!0})});var e,g=[];c.length&&(e=h.getExtensions("davinci.actionSets",function(a){return c.some(function(b){return b==a.id})}),e.length&&e.forEach(function(a){var c=b.getLibraryActions(a.id);c.length&&(a=m.mixin({},a),a.actions=a.actions.concat(c));
g.push(a)}));return{actionSets:e,clonedActionSets:g}},getFocusContainer:function(){var a=document.getElementById("focusContainer");a||(a=dojo.create("div",{"class":"focusContainer",id:"focusContainer"},document.body),davinci.Workbench.focusContainer=a);return a},_repositionFocusContainer:function(){var a=dojo.byId("editorsStackContainer"),b=this.getFocusContainer();if(a&&b){var e=h.currentEditor;if(a=e&&e.getFocusContainerBounds?e.getFocusContainerBounds():c.getBorderBoxPageCoords(a))b.style.left=
a.l+"px",b.style.top=a.t+"px",b.style.width=a.w+"px",b.style.height=a.h+"px",e&&e.getContext&&(b=e.getContext())&&b.updateFocusAll&&b.updateFocusAll()}},_removeFocusContainerChildren:function(){davinci.Workbench.focusContainer&&(davinci.Workbench.focusContainer.innerHTML="")}}));dojo.setObject("davinci.Workbench",r);return r})},"wcDocker/drawer":function(){define(["dcl/dcl","wcDocker/types","wcDocker/frame","wcDocker/base"],function(n,m,k,h){return n(h,{declaredClass:"wcDrawer",constructor:function(d,
b,c){this.$container=$(d);this.$frame=null;this._position=c;this._parent=b;this._frame=null;this._closeSize=0;this._sliding=this._expanded=!1;this._orientation=this._position===m.DOCK.LEFT||this._position===m.DOCK.RIGHT?m.ORIENTATION.HORIZONTAL:m.ORIENTATION.VERTICAL;this.__init()},collapse:function(d){if(this._expanded){var b=this._frame.panel();if(b){var c=this._parent.pos();this._position!==m.DOCK.LEFT&&(c=1-c);var g;this._position===m.DOCK.BOTTOM?(g=this.docker().$container.height(),b._size.y=
c*g):(g=this.docker().$container.width(),b._size.x=c*g)}this._expanded=!1;if(d)switch(this._position){case m.DOCK.TOP:case m.DOCK.LEFT:this._parent.pos(0);break;case m.DOCK.RIGHT:case m.DOCK.BOTTOM:this._parent.pos(1)}else{this._sliding=!0;var h=this;d=function(){h._sliding=!1;h._parent.__update()};switch(this._position){case m.DOCK.TOP:case m.DOCK.LEFT:this._parent.animPos(0,d);break;case m.DOCK.RIGHT:case m.DOCK.BOTTOM:this._parent.animPos(1,d)}}}},expand:function(){if(!this._expanded){this._sliding=
this._expanded=!0;var d=this._frame.panel();if(d){var b;this._position===m.DOCK.BOTTOM?(d=d._size.y,b=this.docker().$container.height()):(d=d._size.x,b=this.docker().$container.width());this._position!==m.DOCK.LEFT&&(d=b-d);var c=this;this._parent.animPos(d/b,function(){c._sliding=!1;c._parent.__update()})}}},isExpanded:function(){return this._expanded},minSize:function(){if(this._expanded)return this._root&&"function"===typeof this._root.minSize?this._root.minSize():{x:100,y:50};this.__adjustCollapsedSize();
return{x:this._closeSize,y:this._closeSize}},maxSize:function(){var d=this._orientation===m.ORIENTATION.HORIZONTAL?!0:!1;if(this._expanded||this._sliding)return this._root&&"function"===typeof this._root.maxSize?{x:d?this._root.maxSize().x:Infinity,y:d?Infinity:this._root.maxSize().y}:{x:Infinity,y:Infinity};this.__adjustCollapsedSize();return{x:d?this._closeSize:Infinity,y:d?Infinity:this._closeSize}},__init:function(){this.$frame=$('\x3cdiv class\x3d"wcCollapserFrame"\x3e');this.__container(this.$container);
this._frame=new (this.docker().__getClass("wcFrame"))(this.$frame,this,!1);this._frame.tabOrientation(this._position)},__update:function(d){this.__adjustCollapsedSize();this._frame.__update()},__adjustCollapsedSize:function(){this._frame._panelList.length?(this._closeSize=this._frame.$tabBar.outerHeight(),this._parent.$bar.removeClass("wcSplitterHidden")):(this._closeSize=0,this._parent.$bar.addClass("wcSplitterHidden"))},__rect:function(){var d=this.$frame.offset(),b=this.$frame.width(),c=this.$frame.height(),
g=this._frame.panel();g&&(this._position===m.DOCK.BOTTOM?(c=g._size.y,b/=3):(b=g._size.x,c/=3));return{x:d.left,y:d.top,w:b,h:c}},__save:function(){var d={};d.closeSize=this._closeSize;d.frame=this._frame.__save();return d},__restore:function(d,b){this._closeSize=d.closeSize;this._frame.__restore(d.frame,b);this.__adjustCollapsedSize()},__container:function(d){if("undefined"===typeof d)return this.$container;(this.$container=d)?this.$container.append(this.$frame):this.$frame.remove();return this.$container},
__destroy:function(){this._frame&&(this._frame.__destroy(),this._frame=null);this.__container(null);this._parent=null}})})},"xide/manager/ContextBase":function(){define("dcl/dcl xide/factory xide/types xide/utils xide/mixins/EventedMixin dojo/_base/kernel dojo/_base/lang".split(" "),function(n,m,k,h,d,b,c){d=n(d.dcl,{declaredClass:"xide.manager.ContextBase",language:"en",managers:[],mixins:null,_getModuleDojo:function(b){return c.getObject(h.replaceAll("/",".",b))||c.getObject(b)},_getModuleDcl:function(b){return n.getObject?
n.getObject(b)||n.getObject(h.replaceAll("/",".",b)):null},getModule:function(b){return this._getModuleDojo(b)||this._getModuleDcl(b)},setModule:function(b,d){if(this._getModuleDojo(b))return c.setObject(h.replaceAll("/",".",b),d);if(this._getModuleDcl(b))return n.setObject(h.replaceAll("/",".",b),d)},createManager:function(c,d,a){try{this.managers||(this.managers=[]);var e={ctx:this,config:d||this.config};h.mixin(e,a);if(_.isString(c)&&this.namespace){var g=null,g=-1==c.indexOf(".")?this.namespace+
c:""+c;c=b.getObject(g)&&n.getObject(g)?g:this.defaultNamespace+c}else _.isObject(c);var p=m.createInstance(c,e);if(p)return this.managers.push(p),m.publish(k.EVENTS.ON_CREATED_MANAGER,{instance:p,className:c,ctx:this,config:d||this.config}),p}catch(w){console.error("error creating manager "+w,arguments)}},constructManagers:function(){},initManagers:function(){},doMixins:function(b){this.mixins=b||this.mixins;for(var c=0;c<b.length;c++){var a=b[c],e=this.getModule(a.declaredClass);a.declaredClass===
this.declaredClass&&(e=this);e&&h.mixin(e.prototype,a.mixin)}}});n.chainAfter(d,"constructManagers");n.chainAfter(d,"initManagers");return d})},"xcf/manager/DeviceManager_DeviceServer":function(){define("dcl/dcl xide/encoding/MD5 xide/types xide/utils xide/factory xdojo/has dojo/Deferred xide/mixins/ReloadMixin xide/mixins/EventedMixin require xide/lodash xcf/model/Variable xide/utils/HexUtils xdojo/has!host-node?nxapp/utils/_console".split(" "),function(n,m,k,h,d,b,c,g,p,a,e,q,u,w){var r="undefined"!==
typeof window?window.console:"undefined"!==typeof global?global.console:w;w&&(r=w);var v=!1;if("undefined"!==typeof sctx&&sctx)h.createUUID(),sctx.getResourceManager(),sctx.getApplication();else return b=n(null,{declaredClass:"xcf.manager.DeviceManager_DeviceServer",running:null,onDeviceStarted:function(a,b,c){if(a&&b&&c){var e=this.toDeviceControlInfo(b),g=e.isServer,d=a.blockScope;e.serverSide||g||d.start();a.__didStartBlocks=!0;this.publish(k.EVENTS.ON_DEVICE_DRIVER_INSTANCE_READY,{device:b,instance:a,
driver:c,blockScope:d});this.publish(k.EVENTS.ON_DEVICE_CONNECTED,{device:e,instance:a,driver:c,blockScope:d});this.ctx.getDriverManager().addDeviceInstance(b,c)}},runClass:function(a,b,c){this.checkDeviceServerConnection();if(this.deviceServerClient){var e=h.createUUID();b.id=e;var g={"class":a,args:b,manager_command:k.SOCKET_SERVER_COMMANDS.RUN_CLASS};!this.running&&(this.running={});this.running[e]={"class":a,args:b,delegate:c};this.deviceServerClient.emit(null,g,k.SOCKET_SERVER_COMMANDS.RUN_CLASS)}else this.onHaveNoDeviceServer()},
runAppServerClass:function(a,b,c){this.checkDeviceServerConnection();if(this.deviceServerClient){var e=h.createUUID();b.id=e;var g={"class":a,args:b,manager_command:k.SOCKET_SERVER_COMMANDS.RUN_APP_SERVER_CLASS};!this.running&&(this.running={});this.running[e]={"class":a,args:b,delegate:c};this.deviceServerClient.emit(null,g,k.SOCKET_SERVER_COMMANDS.RUN_APP_SERVER_CLASS)}else this.onHaveNoDeviceServer()},runAppServerClassMethod:function(a,b,c,e){this.checkDeviceServerConnection();if(this.deviceServerClient){b=
h.createUUID();c.id=b;var g={"class":a,method:_method,args:c,manager_command:k.SOCKET_SERVER_COMMANDS.RUN_APP_SERVER_CLASS_METHOD};!this.running&&(this.running={});this.running[b]={"class":a,args:c,delegate:e,method:_method};this.deviceServerClient.emit(null,g,k.SOCKET_SERVER_COMMANDS.RUN_APP_SERVER_CLASS_METHOD)}else this.onHaveNoDeviceServer()},runAppServerComponentMethod:function(a,b,c,e,g){this.checkDeviceServerConnection();if(this.deviceServerClient){var d=h.createUUID();c.id=d;e={component:a,
method:b,options:e,args:c,id:d,manager_command:k.SOCKET_SERVER_COMMANDS.RUN_APP_SERVER_COMPONENT_METHOD};!this.running&&(this.running={});this.running[d]={component:a,args:c,delegate:g,method:b};this.deviceServerClient.emit(null,e,k.SOCKET_SERVER_COMMANDS.RUN_APP_SERVER_COMPONENT_METHOD)}else this.onHaveNoDeviceServer()},cancelAppServerComponentMethod:function(a,b){this.checkDeviceServerConnection();if(this.deviceServerClient)a={component:a,id:b,manager_command:k.SOCKET_SERVER_COMMANDS.CANCEL_APP_SERVER_COMPONENT_METHOD},
!this.running&&(this.running={}),this.deviceServerClient.emit(null,a,k.SOCKET_SERVER_COMMANDS.CANCEL_APP_SERVER_COMPONENT_METHOD);else this.onHaveNoDeviceServer()},answerAppServerComponentMethodInterrupt:function(a,b,c){this.checkDeviceServerConnection();if(this.deviceServerClient)a={component:a,id:b,manager_command:k.SOCKET_SERVER_COMMANDS.ANSWER_APP_SERVER_COMPONENT_METHOD_INTERRUPT,answer:c},!this.running&&(this.running={}),this.deviceServerClient.emit(null,a,k.SOCKET_SERVER_COMMANDS.ANSWER_APP_SERVER_COMPONENT_METHOD_INTERRUPT);
else this.onHaveNoDeviceServer()},startDevice:function(b,e){var g=this;if(!b)return r.error("start device invalid item"),null;this.checkDeviceServerConnection();b.check();v=!0;var d=new c;if(b._startDfd&&!b._startDfd.isResolved())return v&&r.error("already starting "+b.toString()),b._startDfd;!b.driverInstance&&b.reset();!0===e&&b.setMetaValue(k.DEVICE_PROPERTY.CF_DEVICE_ENABLED,!0,!1);if(!b.getMetaValue(k.DEVICE_PROPERTY.CF_DEVICE_ENABLED)&&!0!==e)return v&&r.error("---abort start device : device is not enabled!"+
b.toString()),this.publish(k.EVENTS.ON_STATUS_MESSAGE,{text:"Can`t start device because its not enabled! "+b.toString(),type:"error"}),setTimeout(function(){d.reject()},10),d;var q=this.toDeviceControlInfo(b);if(!q)return r.error("invalid client info, assuming no driver found"),d.reject("invalid client info, assuming no driver found"),d;if(!q)return r.error("couldnt start device, invalid control info "+q.toString()),d.reject(),d;var p=q.hash;e=b.state===k.DEVICE_STATE.LOST_DEVICE_SERVER;if(this.deviceInstances[p]&&
!0!==e)return d.resolve(this.deviceInstances[p]),d;if(e&&this.deviceInstances[p])return g.publish(k.EVENTS.ON_STATUS_MESSAGE,{text:"Trying to re-connect to "+q.toString(),type:"info"}),g.sendManagerCommand(k.SOCKET_SERVER_COMMANDS.CREATE_CONNECTION,q),b.setState(k.DEVICE_STATE.CONNECTING),d.resolve(this.deviceInstances[p]),d;b.setState(k.DEVICE_STATE.CONNECTING);b._userStopped=null;b._startDfd=d;e=this.driverScopes.system_drivers;var u=e+"DriverBase";try{a([u],function(a){a.prototype.declaredClass=
u;g.createDriverInstance(q,a,b).then(function(a){a.id||(a.id=h.createUUID());q.mqtt={driverScopeId:a&&a.blockScope?a.blockScope.id:"have no driver instance",driverId:a?a.driver.id:"have no driver id",deviceId:b.path};g.publish(k.EVENTS.ON_STATUS_MESSAGE,{text:"Trying to connect to "+q.toString(),type:"info"});b.isServerSide()||b.isServer()?g.sendManagerCommand(k.SOCKET_SERVER_COMMANDS.START_DEVICE,q):g.sendManagerCommand(k.SOCKET_SERVER_COMMANDS.CREATE_CONNECTION,q);d.resolve(g.deviceInstances[p]);
delete q.mqtt}).then(function(){},function(a){d.resolve(null)})},function(a){r.error(a)})}catch(F){logError(F,"DeviceManager::startDevice: requiring base driver at "+u+" failed! Base Driver - Prefix : "+e)}return d},createDriverInstance:function(b,e,d){var q=b.hash,u=this.driverScopes[b.driverScope],v=!a.cache,m=a.toUrl(u),m=h.removeURLParameter(m,"bust");v&&(m=m.replace("/.js","/"));var w=decodeURIComponent(m)+b.driver,w=w.replace("","").trim(),A=this,m=A.ctx,v=h.getCIInputValueByName(d.user,k.DEVICE_PROPERTY.CF_DEVICE_DRIVER),
m=m.getDriverManager(),x=m.getDriverById(v),z=new c;d.getMetaValue(k.DEVICE_PROPERTY.CF_DEVICE_ENABLED);if(!1===d.isEnabled())return setTimeout(function(){z.reject("device not enabled, abort "+b.toString())}),z;try{m.getDriverModule(x).then(function(a){var c=new (n([e,p.dcl,g.dcl,a],{}));c.declaredClass=w;c.options=b;c.baseClass=e.prototype.declaredClass;c.modulePath=h.replaceAll("//","/",u+b.driver).replace(".js","");c.delegate=A;c.driver=x;c.serverSide=b.serverSide;c.utils=h;c.types=k;c.device=
d;c.Module=a;c.id=h.createUUID();c.getDevice=function(){return this.device};c.getDeviceInfo=function(){return this.getDevice().info};a=x.user;var v=h.getCIByChainAndName(a,0,k.DRIVER_PROPERTY.CF_DRIVER_COMMANDS);v&&v.params&&(c.sendSettings=h.getJson(v.params));(a=h.getCIByChainAndName(a,0,k.DRIVER_PROPERTY.CF_DRIVER_RESPONSES))&&a.params&&(c.responseSettings=h.getJson(a.params));try{c.start(),c.initReload()}catch(O){r.error("crash in driver instance startup! "+d.toString()),logError(O,"crash in driver instance startup!")}A.deviceInstances[q]=
c;x.blox&&x.blox.blocks||(x.blox={blocks:[]});d.driverInstance=c;A.getDriverInstance(b,!0);c._id=h.createUUID();z.resolve(c);return c})}catch(J){r.error("DeviceManager::createDriverInstance:: requiring base driver at "+w+" failed "+J.message,h.inspect(b))}return z},onSetDeviceServerVariables:function(a){var b=this.getDriverInstance(a.device,!0),c=this.getDeviceStoreItem(a.device);if(c){if(!b.blockScope){var g=c.info,d=g.hash,q=b.driver,p=g.driverId,u=this.getContext(),g=g.serverSide,v=p+"_"+d+"_"+
c.path;q.blox&&q.blox.blocks||(q.blox={blocks:[]});d=u.getBlockManager().createScope({id:v,device:c,driver:q,instance:b,serviceObject:this.serviceObject,ctx:u,serverSide:g,getContext:function(){return this.instance}},h.clone(q.blox.blocks),function(a){a&&r.error(a+" : in "+q.name+" Resave Driver! in scope id "+v)});b.blockScope=d;c.blockScope=d;this.completeDriverInstance(q,b,c)}if(b){var d=a.variables,m=b.blockScope;c.serverVariables=a.variables;e.each(d,function(a){var b=m.getVariable(a.name);b&&
(b.value=a.value)})}this.onDeviceConnected(a,!1);c.setState(k.DEVICE_STATE.SYNCHRONIZING);c.setState(k.DEVICE_STATE.READY);c._startDfd&&c._startDfd.resolve(c.driverInstance);delete c._userStopped;delete c.lastError;delete c._startDfd;c._startDfd=null}},getDeviceServerVariables:function(a,b){b=b.driver;b.blox&&b.blox.blocks||(b.blox={blocks:[]});var c=[];e.each(b.blox.blocks,function(a){a.group===k.BLOCK_GROUPS.CF_DRIVER_BASIC_VARIABLES&&c.push(a)});b=[];for(var g=0;g<c.length;g++)b.push({name:c[g].name,
value:c[g].value,initial:c[g].value});a.setState(k.DEVICE_STATE.SYNCHRONIZING);this.sendManagerCommand(k.SOCKET_SERVER_COMMANDS.GET_DEVICE_VARIABLES,{device:this.toDeviceControlInfo(a),variables:b})},onDeviceConnected:function(b,c){var e=this.getDeviceStoreItem(b.device);if(b.isReplay&&e&&e.state===k.DEVICE_STATE.READY)e.setState(k.DEVICE_STATE.READY);else if(b=this.getDriverInstance(b.device,!0)||b.instance)if(e){var g=this.toDeviceControlInfo(e);if(g)if(b&&!e.serverVariables)e.setState(k.DEVICE_STATE.CONNECTED),
this.getDeviceServerVariables(e,b);else if(g){c=g.hash;if(this.deviceInstances[c]){if(!b.__didStartBlocks)this.onDeviceStarted(b,e,b.driver);e.setState(k.DEVICE_STATE.READY);this.publish(k.EVENTS.ON_STATUS_MESSAGE,{text:'Device is Ready \x3cspan class\x3d"text-success"\x3e'+g.host+":"+g.port+"\x3c/span\x3e",type:"success"});return this.deviceInstances[c]}var d=this,h=this.driverScopes.system_drivers+"DriverBase";try{a([h],function(a){a.prototype.declaredClass=h;d.createDriverInstance(g,a,e)})}catch(E){r.error("requiring base driver at "+
h+" failed",E)}}else r.error("couldnt start device, invalid control info");else v&&r.error("onDeviceConnected:: device info  is null")}else v&&r.error("onDeviceConnected:: deviceStoreItem is null");else e&&e.setState(k.DEVICE_STATE.DISCONNECTED)},onDeviceDisconnected:function(a){if(a||a.device){var b=a.error,c=b&&b.code?b.code:b||"",e=this.getDeviceStoreItem(a.device);if(e)if(!0===a.stopped)this.stopDevice(e);else{this.publish(k.EVENTS.ON_STATUS_MESSAGE,{text:'Device has been disconnected \x3cspan class\x3d"text-warning"\x3e'+
a.device.host+":"+a.device.port+'\x3c/span\x3e :  \x3cspan class\x3d"text-danger"\x3e'+c+"\x3c/span\x3e",type:"info"});var g=this.toDeviceControlInfo(e);this.getDriverInstance(a.device,!0)&&this.removeDriverInstance(a.device);e.reset();if(e.state===k.DEVICE_STATE.DISABLED)e.setState(k.DEVICE_STATE.DISCONNECTED);else if(e.setState(k.DEVICE_STATE.DISCONNECTED),e.lastError=b,e.refresh(),!g.serverSide&&e){var d=this;e.reconnectTimer||(e.isReconnecting=!0,e.lastReconnectTime?3600<e.lastReconnectTime&&
(e.lastReconnectTime=3600):e.lastReconnectTime=d.reconnectDevice,e.reconnectRetry||(e.reconnectRetry=0),e.reconnectTimer=setTimeout(function(){e.reconnectTimer=null;e.lastReconnectTime*=2;e.reconnectRetry+=1;e.shouldReconnect()&&(g&&e.setState(k.DEVICE_STATE.CONNECTING),d.startDevice(e))},e.lastReconnectTime))}}else v&&r.error("deviceStoreItem is null")}},onCommandFinish:function(a,b){var c=this.getDriverInstance(a,!0);if(c){var g=b.params||{};if(g.src&&g.id){var d=c.blockScope.getBlockById(g.src);
if(d&&d.onCommandFinish){g=null;b=d.onCommandFinish(b);try{g=JSON.stringify(b,function(a,b){return"object"==typeof b?null:b},2)}catch(J){logError(J,"error serializing on command finish")}if(g){c=c.device;b=[g];if(d=this.consoles[a.hash+"-Console"])for(var q=0;q<d.length;q++){var p=d[q];if(p){var r=!0,u=!1;p.console&&(u=p.console.getTextEditor(),r=u.getAction("Console/Settings/Split").value,u=u.getAction("Console/Settings/HEX").value);if(!r&&u)u=h.bufferToHexString(deviceMessageData.data.bytes),p.log(u,
r,!1,k.LOG_OUTPUT.RESPONSE);else for(var v=0;v<b.length;v++){var m=b[v];e.isString(m.string)&&0===m.string.length||(u&&(m=h.stringToHex(m)),p.log(m,r,!0,k.LOG_OUTPUT.RESPONSE))}}}b&&b.length&&this.publish(k.EVENTS.ON_DEVICE_MESSAGE_EXT,{device:c,deviceInfo:a,raw:g,messages:b,bytes:[]})}}}}},onCommandProgress:function(a,b){var c=this.getDriverInstance(a,!0);if(c&&(a=b.params||{},a.src&&a.id&&(c=c.blockScope)&&(a=c.getBlockById(a.src))&&a.onCommandProgress))a.onCommandProgress(b)},onCommandPaused:function(a,
b){if(a=this.getDriverInstance(a,!0)){var c=b.params||{};if(c.src&&c.id&&(a=a.blockScope.getBlockById(c.src))&&a.onCommandPaused)a.onCommandPaused(b)}},onCommandStopped:function(a,b){if(a=this.getDriverInstance(a,!0)){var c=b.params||{};if(c.src&&c.id&&(a=a.blockScope.getBlockById(c.src))&&a.onCommandStopped)a.onCommandStopped(b)}},onCommandError:function(a,b){if(a=this.getDriverInstance(a,!0)){var c=b.params||{};if(c.src&&c.id&&(a=a.blockScope.getBlockById(c.src))&&a.onCommandError)a.onCommandError(b)}},
onDeviceServerMessage:function(a){function b(a){delete a.resposeSettings;delete a.driver;delete a.lastResponse;delete a.scope;delete a.driverId;delete a.device;delete a.sourceHost;delete a.sourcePort}var c=a.data,g=null;if(e.isString(c)&&-1!=c.indexOf("{"))try{g=h.fromJson(c)}catch(U){r.error("error parsing device message",a);return}else e.isObject(c)&&c.data&&(g=c);if(g&&g.data&&g.data.device){var d=g.data.device;if(d){var p=this.getDriverInstance(g.data.device,!0);if(p){var u=this.getDeviceStoreItem(d);
if(u){(d=u.info)||r.error("invalid device : "+u.toString());var v=u.get("state");a=d.serverSide;var m=g.data.deviceMessage;if(null!=m){c=[];e.isString(m)?c=p.split(m):e.isObject(m)&&(b(m),c=[m]);var w=p.onMessageRaw({device:g.data.device,message:m,bytes:g.data.bytes});w&&!w.length&&(w=null);for(var n=[],x=0;x<c.length;x++)n.push(h.stringToBuffer(c[x]));if(w&&w.length)for(c=[],n=[],x=0;x<w.length;x++){var Q=w[x];c.push(Q.string);n.push(Q.bytes)}if(c&&c.length)for(x=0;x<c.length;x++)Q=c[x],p.onMessage({device:g.data.device,
message:Q,raw:m,bytes:n[x]}),p.onBroadcastMessage({device:g.data.device,message:Q,raw:m,bytes:n[x]});v!==k.DEVICE_STATE.READY&&u.set("state",k.DEVICE_STATE.READY);x=u.isDebug();g.event&&(g.data.driverInstance=p,this.publish(g.event,g.data));var N=[],v=this.consoles[d.hash+"-Console"];if(x&&(x=k.LOGGING_FLAGS,Q=d.loggingFlags,Q=e.isString(Q)?h.fromJson(Q):Q||{},Q=Q[k.LOG_OUTPUT.RESPONSE],null!=Q&&Q&x.STATUS_BAR)){x=g.data.deviceMessage;if(e.isObject(x)){b(x);try{x=JSON.stringify(x)}catch(U){logError(U,
"error serialize message")}}this.publish(k.EVENTS.ON_STATUS_MESSAGE,{text:"Device Message from "+p.options.host+' : \x3cspan class\x3d"text-info"\x3e'+x+"\x3c/span\x3e"})}if(v)for(var O=0;O<v.length;O++){var P=v[O];if(P){var L=!0,K=!1;P.console&&(x=P.console.getTextEditor(),L=x.getAction("Console/Settings/Split").value,K=x.getAction("Console/Settings/HEX").value);if(!L&&K)x=h.bufferToHexString(g.data.bytes),P.log(x,L,!1,k.LOG_OUTPUT.RESPONSE);else for(N=[],e.isString(m)?N=L?w&&w.length?w:p.split(m):
[m]:e.isObject(m)&&(b(m),N=[m]),x=0;x<N.length;x++)Q=N[x],e.isString(Q.string)&&0===Q.string.length||(K&&(Q=h.stringToHex(Q.string)),P.log(Q,L,!0,k.LOG_OUTPUT.RESPONSE))}}c&&c.length&&this.publish(k.EVENTS.ON_DEVICE_MESSAGE_EXT,{device:u,deviceInfo:d,raw:m,messages:c,bytes:g.data.bytes});if(0<c.length&&p.blockScope)for(g=p.blockScope,d=g.blockStore._find({group:k.BLOCK_GROUPS.CF_DRIVER_RESPONSE_BLOCKS}),p=g.blockStore._find({group:k.BLOCK_GROUPS.CF_DRIVER_RESPONSE_VARIABLES}),u=g.getVariable("value"),
u||(u=new q({id:h.createUUID(),name:"value",value:"",scope:g,type:13,group:"processVariables",gui:!1,cmd:!1}),g.blockStore.putSync(u)),m=0;m<c.length;m++)if(0!==c[m].length){u.value=new String(c[m]);u.value.setBytes(n[m]);u.value.setString(c[m]);this.publish(k.EVENTS.ON_DRIVER_VARIABLE_CHANGED,{item:u,scope:g,owner:this,save:!1,source:k.MESSAGE_SOURCE.DEVICE,publishMQTT:!1});for(w=0;w<p.length;w++){var M=p[w];"value"!=p[w].title&&(v=null,v=u.value,"number"!==typeof v&&(v=""+v,v="'"+v+"'"),M.target&&
"None"!=M.target&&null!==v&&"null"!=v&&"'null'"!=v&&(x=g.getVariable(M.target)))&&(x.value=v,this.publish(k.EVENTS.ON_DRIVER_VARIABLE_CHANGED,{item:x,scope:g,owner:this,save:!1,source:k.MESSAGE_SOURCE.BLOX}))}if(!a){for(v=0;v<c.length;v++)if(x=c[v],e.isObject(x)&&x.src&&(w=g.getBlockById(x.src))&&w.onData)w.onData(x);for(v=0;v<d.length;v++)if(w=d[v],!1!==w.enabled){w.override={args:M?[M.value]:null};try{g.solveBlock(d[v],{highlight:!0})}catch(U){logError(U,"----solving response block crashed ")}}}}}}}else x&&
r.error(" onDeviceMessage : failed! Have no device instance for "+g.data.device.host,g)}}},sendManagerCommand:function(a,b){this.checkDeviceServerConnection();var c={manager_command:a};h.mixin(c,b);if(this.deviceServerClient)return this.deviceServerClient.emit(null,c,a);r.error("Send Manager Command "+a+" failed, have no  device Server client");this.onHaveNoDeviceServer()},sendDeviceCommand:function(a,b,c,g,d,q,p,u,v,w){this.checkDeviceServerConnection();var n=a.getDeviceInfo();h.mixin({src:c},n);
var A={command:b,device_command:v||k.SOCKET_SERVER_COMMANDS.DEVICE_SEND,options:n};h.mixin(A.options,{params:{src:c,id:g,wait:q,stop:p,pause:u,args:w}});g=this.getDevice(n.id);g&&e.isObject(g)?g._userStopped||g&&(g.state===k.DEVICE_STATE.DISABLED||g.state===k.DEVICE_STATE.DISCONNECTED||g.state===k.DEVICE_STATE.CONNECTING)||(v=h.stringFromDecString(A.command),g.isDebug()&&this.publish(k.EVENTS.ON_STATUS_MESSAGE,{text:'Did send message : \x3cspan class\x3d"text-warnin"\x3e'+v.substr(0,30)+'\x3c/span\x3e to \x3cspan class\x3d"text-info"\x3e'+
n.host+":"+n.port+"@"+n.protocol+"\x3c/span\x3e"}),n=m(JSON.stringify(a.options),1)+"-Console",this.deviceServerClient?(this.deviceServerClient.emit(null,A,"Device_Send"),!1!==d&&e.each(this.consoles[n],function(a){a.printCommand('\x3cspan class\x3d"text-info"\x3e\x3cb\x3e'+A.command+"\x3c/span\x3e","")})):(this.onHaveNoDeviceServer(),r.error("this.deviceServerClient is null"),r.error(" Send Device Command "+b+"failed, have no  device Server client")),a.blockScope&&(v=a.blockScope.getBlockById(c),
this.publish(k.EVENTS.ON_DEVICE_COMMAND,{device:g,command:h.stringFromDecString(b),deviceInfo:this.toDeviceControlInfo(g),name:v?v.name:""}))):r.error("invalid device")},loadDevices:function(a){this.sendManagerCommand(k.SOCKET_SERVER_COMMANDS.INIT_DEVICES,{path:a})},protocolMethod:function(a,b,e,g){var d=new c,q=k.SOCKET_SERVER_COMMANDS.PROTOCOL_METHOD,p=h.createUUID(),u=q+"_"+p;a={protocol:a,method:b,options:{args:e,id:p,device:g}};var v=this;this.subscribe(u,function(a){v.unsubscribe(u);clearTimeout(m);
d.resolve(a)});try{this.sendManagerCommand(q,a);var m=setTimeout(function(){v.unsubscribe(u);d.reject("timeout");r.error("protocol method timeout")},8E3)}catch(H){d.reject(H)}return d},callMethod:function(a,b,c,e,g){this.checkDeviceServerConnection();a={method:b,args:c,device_command:k.SOCKET_SERVER_COMMANDS.CALL_METHOD,params:{id:g,src:e},options:a.options};if(this.deviceServerClient)this.deviceServerClient.emit(null,a,k.SOCKET_SERVER_COMMANDS.CALL_METHOD);else this.onHaveNoDeviceServer()},runShell:function(a,
b,c,e,g){a=a.getDeviceInfo();this.sendManagerCommand(k.SOCKET_SERVER_COMMANDS.RUN_SHELL,{cmd:b,args:c,options:h.mixin(a,{params:{id:g,src:e}})})},watchDirectory:function(a,b){this.checkDeviceServerConnection();a={path:a,watch:b,manager_command:k.SOCKET_SERVER_COMMANDS.WATCH};if(this.deviceServerClient)this.deviceServerClient.emit(null,a,k.SOCKET_SERVER_COMMANDS.WATCH);else this.onHaveNoDeviceServer()},handle:function(a){var b=decodeURIComponent(this.ctx.getUserDirectory());a=a.data;return!(b&&a&&
a.device&&a.device.userDirectory&&decodeURIComponent(a.device.userDirectory)!==b)},createDeviceServerClient:function(a){var b=this,g=new c;this.deviceServerClient=null;if(this.deviceServerClient=d.createClientWithStore(a,"Device Control Server",{delegate:{onConnected:function(){b.onDeviceServerConnected();g.resolve();b.publish(k.EVENTS.ON_DEVICE_SERVER_CONNECTED);b.ctx.getNotificationManager().postMessage({message:"Connected to Device Server",type:"success",duration:3E3})},onLostConnection:function(){b.onDeviceServerConnectionLost()},
onServerResponse:function(a){var c=a.data,g=null;if(e.isString(c)){try{g=JSON.parse(c)}catch(E){g=c}if((g=g||{},g.data)&&g.data.deviceMessage&&g.data.deviceMessage.event===k.EVENTS.ON_COMMAND_FINISH){b.onCommandFinish(g.data.device,g.data.deviceMessage);return}if(g&&g.data&&g.data.deviceMessage&&g.data.deviceMessage.event===k.EVENTS.ON_COMMAND_PROGRESS){b.onCommandProgress(g.data.device,g.data.deviceMessage);return}if(g&&g.data&&g.data.deviceMessage&&g.data.deviceMessage.event===k.EVENTS.ON_COMMAND_PAUSED){b.onCommandPaused(g.data.device,
g.data.deviceMessage);return}if(g&&g.data&&g.data.deviceMessage&&g.data.deviceMessage.event===k.EVENTS.ON_COMMAND_STOPPED){b.onCommandStopped(g.data.device,g.data.deviceMessage);return}if(g.data&&g.data.deviceMessage&&g.data.deviceMessage.event===k.EVENTS.ON_COMMAND_ERROR){b.onCommandError(g.data.device,g.data.deviceMessage);return}if(g.event===k.EVENTS.ON_DEVICE_DISCONNECTED){b.publish(k.EVENTS.ON_DEVICE_DISCONNECTED,g.data);return}if(g.event===k.EVENTS.SET_DEVICE_VARIABLES)return b.onSetDeviceServerVariables(g.data);
if(g.event===k.EVENTS.ON_RUN_CLASS_EVENT)return b.onRunClassEvent(g.data);if(g.event===k.EVENTS.ON_DEVICE_CONNECTED){b.publish(k.EVENTS.ON_DEVICE_CONNECTED,g.data);return}if(g.event===k.SOCKET_SERVER_COMMANDS.PROTOCOL_METHOD){b.publish(k.SOCKET_SERVER_COMMANDS.PROTOCOL_METHOD+"_"+g.data.options.id,g.data);return}if(g.event===k.EVENTS.ON_SERVER_LOG_MESSAGE){b.publish(k.EVENTS.ON_SERVER_LOG_MESSAGE,g.data);return}if(g.event===k.EVENTS.ON_MQTT_MESSAGE){b.publish(k.EVENTS.ON_MQTT_MESSAGE,g.data);b.onMQTTMessage(g.data);
return}if(g.event===k.EVENTS.ON_FILE_CHANGED)return b.ctx.onXIDEMessage(h.fromJson(a.data));if(!b.handle(g))return}b.onDeviceServerMessage(a)}}}))return this.deviceServerClient.dfd=g,this.deviceServerClient}}),n.chainAfter(b,"onDeviceStarted"),n.chainAfter(b,"onDeviceDisconnected"),b})},"davinci/ui/widgets/OutlineTree":function(){define(["dojo/_base/declare"],function(n){return n(null,{})})},"xcf/manager/Context":function(){define("dcl/dcl xide/manager/Context xcf/manager/DriverManager xcf/manager/DeviceManager xcf/manager/ProtocolManager xcf/manager/Application xcf/manager/LogManager xide/manager/ResourceManager xide/manager/PluginManager xdojo/has".split(" "),
function(n,m,k,h,d,b,c,g,p,a){return n([m],{declaredClass:"xcf.manager.Context",namespace:"xcf.manager.",driverManager:null,deviceManager:null,protocolManager:null,debugManager:null,nodeServiceManager:null,blockManager:null,getBlockManager:function(){return this.blockManager},getProtocolManager:function(){return this.protocolManager},getDriverManager:function(){return this.driverManager},getDeviceManager:function(){return this.deviceManager},getNodeServiceManager:function(){return this.nodeServiceManager},
getDebugManager:function(){return this.debugManager},constructManagers:function(a){this.isEditor()||(this.driverManager=this.createManager(k,null),this.deviceManager=this.createManager(h,null),this.protocolManager=this.createManager(d,null),this.logManager=this.createManager(c));this.pluginManager=this.createManager(p);this.resourceManager=this.createManager(g);this.application=this.createManager(a||b)},initManagers:function(){this.isEditor()||(this.driverManager.init(),this.deviceManager.init(),
a("log")&&this.logManager.init());this.resourceManager&&this.resourceManager.init()},getUserDirectory:function(){if(this.args&&this.args.userDirectory)return this.args.userDirectory;var a=this.getResourceManager();if(a)return a.getVariable("USER_DIRECTORY")}})})},"davinci/html/CSSElement":function(){define(["dojo/_base/declare","davinci/model/Model"],function(n,m){return n("davinci.html.CSSElement",m,{constructor:function(){"undefined"!=typeof pushComment&&null!==pushComment&&(this.comment=pushComment,
pushComment=null);this.elementType="CSSElement"},getLabel:function(){context={indent:0,noComments:!0};return this.getText(context)},onChange:function(k){if(this.parent)if(k)this.parent.onChange(k);else this.parent.onChange(this)},close:function(k){for(k=0;k<this.children;k++)this.children[k].close()},getCSSFile:function(){var k=this.getCSSRule();if(k)return k.parent},getCSSRule:function(){},_convertNode:function(k){if(dojo.isArray(k))return k;for(var h=[];k&&"HTML"!=k.tagName;)h.push({tagName:k.tagName,
id:k.id,classes:k.className&&k.className.split(" ")}),k=k.parentNode;return h},getID:function(){return this.parent.getID()+":"+this.startOffset+":"+this.getLabel()}})})},"dojo/colors":function(){define(["./_base/kernel","./_base/lang","./_base/Color","./_base/array"],function(n,m,k,h){var d={};m.setObject("dojo.colors",d);var b=function(b,c,a){0>a&&++a;1<a&&--a;var e=6*a;return 1>e?b+(c-b)*e:1>2*a?c:2>3*a?b+(c-b)*(2/3-a)*6:b};n.colorFromRgb=k.fromRgb=function(c,d){var a=c.toLowerCase().match(/^(rgba?|hsla?)\(([\s\.\-,%0-9]+)\)/);
if(a){c=a[2].split(/\s*,\s*/);var e=c.length,a=a[1];if("rgb"==a&&3==e||"rgba"==a&&4==e)return a=c[0],"%"==a.charAt(a.length-1)?(a=h.map(c,function(a){return 2.56*parseFloat(a)}),4==e&&(a[3]=c[3]),k.fromArray(a,d)):k.fromArray(c,d);if("hsl"==a&&3==e||"hsla"==a&&4==e){var a=(parseFloat(c[0])%360+360)%360/360,g=parseFloat(c[1])/100,p=parseFloat(c[2])/100,g=.5>=p?p*(g+1):p+g-p*g,p=2*p-g,a=[256*b(p,g,a+1/3),256*b(p,g,a),256*b(p,g,a-1/3),1];4==e&&(a[3]=c[3]);return k.fromArray(a,d)}}return null};var c=
function(b,c,a){b=Number(b);return isNaN(b)?a:b<c?c:b>a?a:b};k.prototype.sanitize=function(){this.r=Math.round(c(this.r,0,255));this.g=Math.round(c(this.g,0,255));this.b=Math.round(c(this.b,0,255));this.a=c(this.a,0,1);return this};d.makeGrey=k.makeGrey=function(b,c){return k.fromArray([b,b,b,c])};m.mixin(k.named,{aliceblue:[240,248,255],antiquewhite:[250,235,215],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],blanchedalmond:[255,235,205],blueviolet:[138,43,
226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,
150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],
hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,
136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],
navajowhite:[255,222,173],oldlace:[253,245,230],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,
87],seashell:[255,245,238],sienna:[160,82,45],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],whitesmoke:[245,245,245],yellowgreen:[154,205,50]});return k})},"xcf/Widgets":function(){define("dojo/_base/declare xide/widgets/TemplatedWidgetBase xide/widgets/SelectWidget xide/widgets/ScriptWidget xide/widgets/Expression xide/widgets/ExpressionEditor xide/widgets/WidgetReference xide/form/Select".split(" "),
function(n){return n("xcf.Widgets",null,{})})},"davinci/main":function(){define("dojo/_base/kernel dojo/_base/declare davinci/davinci davinci/ve/metadata davinci/Runtime davinci/Workbench davinci/ve/metadata davinci/ui/widgets/OutlineTree".split(" "),function(n){return n.davinci})},"dojo/_base/Deferred":function(){define("./kernel ../Deferred ../promise/Promise ../errors/CancelError ../has ./lang ../when".split(" "),function(n,m,k,h,d,b,c){var g=function(){},p=Object.freeze||function(){},a=n.Deferred=
function(c){function e(a){if(r)throw Error("This deferred has already been resolved");w=a;r=!0;u()}function u(){for(var a;!a&&y;){var c=y;y=y.next;if(a=c.progress==g)r=!1;var e=A?c.error:c.resolved;d("config-useDeferredInstrumentation")&&A&&m.instrumentRejected&&m.instrumentRejected(w,!!e);if(e)try{var h=e(w);h&&"function"===typeof h.then?h.then(b.hitch(c.deferred,"resolve"),b.hitch(c.deferred,"reject"),b.hitch(c.deferred,"progress")):(e=a&&void 0===h,a&&!e&&(A=h instanceof Error),c.deferred[e&&A?
"reject":"resolve"](e?w:h))}catch(H){c.deferred.reject(H)}else A?c.deferred.reject(w):c.deferred.resolve(w)}}var w,r,v,n,A,z,y,B=this.promise=new k;this.isResolved=B.isResolved=function(){return 0==n};this.isRejected=B.isRejected=function(){return 1==n};this.isFulfilled=B.isFulfilled=function(){return 0<=n};this.isCanceled=B.isCanceled=function(){return v};this.resolve=this.callback=function(a){this.fired=n=0;this.results=[a,null];e(a)};this.reject=this.errback=function(a){A=!0;this.fired=n=1;d("config-useDeferredInstrumentation")&&
m.instrumentRejected&&m.instrumentRejected(a,!!y);e(a);this.results=[null,a]};this.progress=function(a){for(var b=y;b;){var c=b.progress;c&&c(a);b=b.next}};this.addCallbacks=function(a,b){this.then(a,b,g);return this};B.then=this.then=function(b,c,e){var d=e==g?this:new a(B.cancel);b={resolved:b,error:c,progress:e,deferred:d};y?z=z.next=b:y=z=b;r&&u();return d.promise};var C=this;B.cancel=this.cancel=function(){if(!r){var a=c&&c(C);r||(a instanceof Error||(a=new h(a)),a.log=!1,C.reject(a))}v=!0};
p(B)};b.extend(a,{addCallback:function(a){return this.addCallbacks(b.hitch.apply(n,arguments))},addErrback:function(a){return this.addCallbacks(null,b.hitch.apply(n,arguments))},addBoth:function(a){var c=b.hitch.apply(n,arguments);return this.addCallbacks(c,c)},fired:-1});a.when=n.when=c;return a})},"xaction/ActionStore":function(){define("xdojo/declare xide/data/TreeMemory xide/utils xide/data/ObservableStore dstore/Trackable xaction/ActionModel".split(" "),function(n,m,k,h,d,b){function c(a,c,q,
p,w){return(a||n)(c||[m,d,h],k.mixin({idProperty:"command",declaredClass:"xaction/ActionStore",Model:q||b,renderers:null,observedProperties:p||g,getAll:function(){return this.data},addRenderer:function(a){!this.renderers&&(this.renderers=[]);!_.contains(this.renderers,a)&&this.renderers.push(a)}},w))}var g=["value","icon","disabled","enabled"],p=c(null,null,null,null,null);p.createDefault=function(a){return new p(a)};p.createClass=c;p.DEFAULT_ACTION_PROPERTIES=g;return p})},"davinci/ve/views/SwitchingStyleView":function(){define("dojo/_base/declare dojo/_base/kernel davinci/lang/ve dijit/lang/_common xide/utils dijit/layout/ContentPane davinci/Runtime davinci/workbench/WidgetLite davinci/ve/widgets/HTMLStringUtil davinci/ve/widgets/WidgetToolBar davinci/ve/widgets/Cascade davinci/ve/widgets/CommonProperties davinci/ve/widgets/WidgetProperties davinci/ve/widgets/EventSelection xide/registry".split(" "),
function(n,m,k,h,d,b,c,g,p,a,e,q,u,w,r){return n("davinci.ve.views.SwitchingStyleView",[g],{_editor:null,_widget:null,_subWidget:null,_titleBarDiv:"\x3cdiv class\x3d'palette_titleBarDiv'\x3e\x3cspan class\x3d'paletteCloseBox'\x3e\x3c/span\x3e\x3cspan class\x3d'titleBarDivTitle'\x3e\x3c/span\x3e\x3c/div\x3e",constructor:function(a,b){},pageTemplate:[{key:"widgetSpecific",className:"maqPropertySection page_editor_only",addCommonPropertiesAtTop:!1,html:"\x3cdiv dojoType\x3d'davinci.ve.widgets.WidgetProperties'\x3e\x3c/div\x3e"},
{key:"events",className:"maqPropertySection page_editor_only",addCommonPropertiesAtTop:!1,pageTemplate:{html:"\x3cdiv dojoType\x3d'davinci.ve.widgets.EventSelection'\x3e\x3c/div\x3e"}},{key:"layout",className:"maqPropertySection",addCommonPropertiesAtTop:!0,pageTemplate:[{display:"width",type:"multi",target:["width"],values:["","auto","100%","200px","10em"]},{display:"height",type:"multi",target:["height"],values:["","auto","100%","200px","10em"]},{html:"\x26nbsp;"},{key:"showMinMax",display:"\x26nbsp;\x26nbsp;\x26nbsp;",
type:"toggleSection",pageTemplate:[{display:"min-height",type:"multi",target:["min-height"],rowClass:"propertiesSectionHidden"},{display:"max-height",type:"multi",target:["max-height"],rowClass:"propertiesSectionHidden"},{display:"min-width",type:"multi",target:["min-width"],rowClass:"propertiesSectionHidden"},{display:"max-width",type:"multi",target:["max-width"],rowClass:"propertiesSectionHidden"},{html:"\x26nbsp;",rowClass:"propertiesSectionHidden"}]},{display:"position",type:"combo",target:["position"],
values:["","absolute","relative"]},{display:"left",type:"multi",target:["left"],values:["","0px","1em"]},{display:"top",type:"multi",target:["top"],values:["","0px","1em"]},{display:"right",type:"multi",target:["right"],values:["","0px","1em"]},{display:"bottom",type:"multi",target:["bottom"],values:["","0px","1em"]},{display:"display",type:"combo",target:["display"],values:["","none","block","inline","inline-block"]},{display:"opacity",type:"multi",target:["opacity"],values:["0","0.5","1.0"]},{display:"box-shadow",
type:"text",target:["box-shadow"],value:["","none","1px 1px rgba(0,0,0,.5)"]},{display:"float",type:"combo",target:["float"],values:["","none","left","right"]},{display:"clear",type:"combo",target:["clear"],values:["","none","left","right","both"]},{display:"overflow",type:"combo",target:["overflow"],values:["","visible","hidden","scroll","auto"]},{display:"z-index",type:"multi",target:["z-index"],values:" auto 0 1 100 -1 -100".split(" ")},{display:"box-sizing",type:"combo",target:["box-sizing","-webkit-box-sizing",
"-ms-box-sizing","-moz-box-sizing"],values:["","content-box","border-box"]}]},{key:"padding",className:"maqPropertySection",addCommonPropertiesAtTop:!0,pageTemplate:[{display:"\x3cb\x3e(padding)\x3c/b\x3e",type:"multi",target:["padding"],values:["","0px","1em"]},{key:"showtrbl",display:"\x26nbsp;\x26nbsp;\x26nbsp;",type:"toggleSection",pageTemplate:[{display:"padding-top",type:"multi",target:["padding-top"],values:["","0px","1em"],rowClass:"propertiesSectionHidden"},{display:"padding-right",type:"multi",
target:["padding-right"],values:["","0px","1em"],rowClass:"propertiesSectionHidden"},{display:"padding-bottom",type:"multi",target:["padding-bottom"],values:["","0px","1em"],rowClass:"propertiesSectionHidden"},{display:"padding-left",type:"multi",target:["padding-left"],values:["","0px","1em"],rowClass:"propertiesSectionHidden"}]}]},{key:"margins",className:"maqPropertySection",addCommonPropertiesAtTop:!0,pageTemplate:[{display:"\x3cb\x3e(margin)\x3c/b\x3e",type:"multi",target:["margin"],values:["",
"0px","1em"]},{key:"showtrbl",display:"\x26nbsp;\x26nbsp;\x26nbsp;",type:"toggleSection",pageTemplate:[{display:"margin-top",type:"multi",target:["margin-top"],values:["","0px","1em"],rowClass:"propertiesSectionHidden"},{display:"margin-right",type:"multi",target:["margin-right"],values:["","0px","1em"],rowClass:"propertiesSectionHidden"},{display:"margin-bottom",type:"multi",target:["margin-bottom"],values:["","0px","1em"],rowClass:"propertiesSectionHidden"},{display:"margin-left",type:"multi",target:["margin-left"],
values:["","0px","1em"],rowClass:"propertiesSectionHidden"}]}]},{key:"background",className:"maqPropertySection",addCommonPropertiesAtTop:!0,pageTemplate:[{display:"background-color",type:"background",target:["background-color"],colorswatch:!0},{display:"background-image",type:"background",target:["background-image"],values:["","none"]},{display:"background-repeat",type:"background",values:["","repeat","repeat-x","repeat-y","no-repeat"],target:["background-repeat"]},{display:"background-position",
type:"background",target:["background-position"],values:";0px 0px;0% 0%;left top;center center;right bottom".split(";")},{display:"background-size",type:"background",target:["background-size"],values:["","auto","contain","cover","100%"]},{display:"background-origin",type:"background",target:["background-origin"],values:["","border-box","padding-box","content-box"]},{display:"background-clip",type:"background",target:["background-clip"],values:["","border-box","padding-box","content-box"]}]},{key:"border",
className:"maqPropertySection",addCommonPropertiesAtTop:!0,pageTemplate:[{display:"\x3cb\x3e(border)\x3c/b\x3e",type:"multi",target:["border"],values:["","none","1px solid black"]},{display:"show",type:"combo",values:["none","props","sides","all"],id:"properties_show_select",onchange:function(a){if("number"==typeof a){var b=function(a,b,c,e,g){for(;b<=c;b++){var d=m.byId(a[b].rowId);b>=e&&b<=g?m.removeClass(d,"propertiesSectionHidden"):m.addClass(d,"propertiesSectionHidden")}};if(this.pageTemplate){a=
this.pageTemplate[a];var c;a&&a.id&&(a=m.byId(a.id))&&(c=a.value);m.isString(c)&&("none"===c?b(this.pageTemplate,2,20,-1,-1):"sides"===c?b(this.pageTemplate,2,20,2,5):"props"===c?b(this.pageTemplate,2,20,6,8):"all"===c&&b(this.pageTemplate,2,20,9,20))}}}},{display:"border-top",type:"multi",target:["border-top"],values:["","none","1px solid black"],rowClass:"propertiesSectionHidden"},{display:"border-right",type:"multi",target:["border-right"],values:["","none","1px solid black"],rowClass:"propertiesSectionHidden"},
{display:"border-bottom",type:"multi",target:["border-bottom"],values:["","none","1px solid black"],rowClass:"propertiesSectionHidden"},{display:"border-left",type:"multi",target:["border-left"],values:["","none","1px solid black"],rowClass:"propertiesSectionHidden"},{display:"border-width",type:"multi",target:["border-width"],values:["","1px","1em"],rowClass:"propertiesSectionHidden"},{display:"border-style",type:"multi",target:["border-style"],values:["","none","solid","dotted","dashed"],rowClass:"propertiesSectionHidden"},
{display:"border-color",type:"color",target:["border-color"],rowClass:"propertiesSectionHidden"},{display:"border-top-width",type:"multi",target:["border-top-width"],values:["","1px","1em"],rowClass:"propertiesSectionHidden"},{display:"border-top-style",type:"multi",target:["border-top-style"],values:["","none","solid","dotted","dashed"],rowClass:"propertiesSectionHidden"},{display:"border-top-color",type:"color",target:["border-top-color"],rowClass:"propertiesSectionHidden"},{display:"border-right-width",
type:"multi",target:["border-right-width"],values:["","1px","1em"],rowClass:"propertiesSectionHidden"},{display:"border-right-style",type:"multi",target:["border-right-style"],values:["","none","solid","dotted","dashed"],rowClass:"propertiesSectionHidden"},{display:"border-right-color",type:"color",target:["border-right-color"],rowClass:"propertiesSectionHidden"},{display:"border-bottom-width",type:"multi",target:["border-bottom-width"],values:["","1px","1em"],rowClass:"propertiesSectionHidden"},
{display:"border-bottom-style",type:"multi",target:["border-bottom-style"],values:["","none","solid","dotted","dashed"],rowClass:"propertiesSectionHidden"},{display:"border-bottom-color",type:"color",target:["border-bottom-color"],rowClass:"propertiesSectionHidden"},{display:"border-left-width",type:"multi",target:["border-left-width"],values:["","1px","1em"],rowClass:"propertiesSectionHidden"},{display:"border-left-style",type:"multi",target:["border-left-style"],values:["","none","solid","dotted",
"dashed"],rowClass:"propertiesSectionHidden"},{display:"border-left-color",type:"color",target:["border-left-color"],rowClass:"propertiesSectionHidden"},{display:"border-collapse",type:"combo",target:["border-collapse"],values:["","separate","collapse"]},{display:"\x3cb\x3e(border-radius)\x3c/b\x3e",type:"multi",target:["border-radius","-moz-border-radius"],values:["","0px","6px"]},{key:"showDetails",display:"",type:"toggleSection",pageTemplate:[{display:"border-top-left-radius",type:"multi",target:["border-top-left-radius",
"-moz-border-radius-topleft"],values:["","0px","6px"],rowClass:"propertiesSectionHidden"},{display:"border-top-right-radius",type:"multi",target:["border-top-right-radius","-moz-border-radius-topright"],values:["","0px","6px"],rowClass:"propertiesSectionHidden"},{display:"border-bottom-right-radius",type:"multi",target:["border-bottom-right-radius","-moz-border-radius-bottomright"],values:["","0px","6px"],rowClass:"propertiesSectionHidden"},{display:"border-bottom-left-radius",type:"multi",target:["border-bottom-left-radius",
"-moz-border-radius-bottomleft"],values:["","0px","6px"],rowClass:"propertiesSectionHidden"}]}]},{key:"fontsAndText",className:"maqPropertySection",addCommonPropertiesAtTop:!0,pageTemplate:[{display:"font",type:"text",target:["font"]},{display:"font-family",type:"font",target:["font-family"]},{display:"size",type:"multi",target:["font-size"],values:["","100%","1em","10px","10pt"]},{display:"color",type:"color",target:["color"]},{display:"font-weight",type:"combo",target:["font-weight"],values:["",
"normal","bold"]},{display:"font-style",type:"combo",target:["font-style"],values:["","normal","italic"]},{display:"text-decoration",type:"combo",target:["text-decoration"],values:["","none","underline","line-through"]},{display:"text-align",type:"combo",target:["text-align"],values:["","left","center","right","justify"]},{display:"vertical-align",type:"combo",target:["vertical-align"],values:["","baseline","top","middle","bottom"]},{display:"white-space",type:"combo",target:["white-space"],values:" normal nowrap pre pre-line pre-wrap".split(" ")},
{display:"text-indent",type:"multi",target:["text-indent"],values:["","0","1em","10px"]},{display:"line-height",type:"multi",target:["line-height"],values:["","normal","1.2","120%"]}]}],buildRendering:function(){this.domNode=m.doc.createElement("div");m.addClass(this.domNode,"propertiesContent");var a;a=""+this._titleBarDiv;for(var b=0;b<this.pageTemplate.length;b++)if(this.pageTemplate[b].title=k[this.pageTemplate[b].key]?k[this.pageTemplate[b].key]:"Key not found",this.pageTemplate[b].pageTemplate)for(var c=
0;c<this.pageTemplate[b].pageTemplate.length;c++)this.pageTemplate[b].pageTemplate[c].key&&(this.pageTemplate[b].pageTemplate[c].display+=k[this.pageTemplate[b].pageTemplate[c].key]?k[this.pageTemplate[b].pageTemplate[c].key]:"Key not found");this.domNode.innerHTML=a+"\x3cdiv class\x3d'propertiesToolBar' dojoType\x3d'davinci.ve.widgets.WidgetToolBar'\x3e\x3c/div\x3e\x3cdiv dojoType\x3d'davinci.ve.widgets.WidgetProperties'\x3e\x3c/div\x3e\x3cdiv class\x3d'propScrollableArea'\x3e\x3ctable class\x3d'propRootDetailsContainer'\x3e\x3ctr\x3e\x3ctd class\x3d'propPaletteRoot'\x3e";
this.inherited(arguments)},_widgetValuesChanged:function(a){var b=this._currentPropSection;if(b){for(var c=!1,e=0;e<this.pageTemplate.length;e++)if(this.pageTemplate[e].key==b){c=!0;break}if(c)for(b=this._getVisibleCascade(e),c=0;c<b.length;c++)b[c]._widgetValuesChanged(a)}},_getVisibleCascade:function(a){if(a)return this.pageTemplate[a].cascade;a=[];var b=this._currentPropSection;if(b)for(var c=0;c<this.pageTemplate.length;c++)if(this.pageTemplate[c].key==b){a=a.concat(this.pageTemplate[c].cascade);
break}return a},_updatePaletteValues:function(a){if(this._editor){var b=a[0];this._subwidget=(this._widget=b)&&b.subwidget;this.setReadOnly(!(this._widget||this._subwidget));for(var b=this._getVisibleCascade(),c=0;c<b.length;c++)b[c]._widgetSelectionChanged(a)}},_widgetSelectionChanged:function(a){!0!==a.isFake&&this._updatePaletteValues(a.selection)},_stateChanged:function(){this._updatePaletteValues(this._widget?[this._widget]:[])},_widgetPropertiesChanged:function(a){this._widget&&this._widget.type!==
a[0].type||this._updatePaletteValues(a)},_titlePaneOpen:function(a){a=this._getVisibleCascade(a);for(var b=0;b<a.length;b++)a[b]._editorSelected({editor:this._editor})},startup:function(){this.domNode.style.height="100%";this._editor=c.currentEditor;this.inherited(arguments);for(var a=0;a<this.pageTemplate.length;a++){var b=this.pageTemplate[a];if(b.pageTemplate)for(var e=0;e<b.pageTemplate.length;e++){var g=b.pageTemplate[e];g.onchange&&g.id&&m.connect(m.byId(g.id),"onchange",m.hitch(b,g.onchange,
e))}}for(a=0;a<this.pageTemplate.length;a++)this.pageTemplate[a].cascade=[];try{this.setReadOnly(!0)}catch(y){logError(y,"set read only crashed ! "+y)}this.onEditorSelected();this.subscribe("/davinci/ui/widgetValuesChanged",m.hitch(this,this._widgetValuesChanged));this.subscribe("/davinci/ui/widgetPropertiesChanged",m.hitch(this,this._widgetPropertiesChanged));this.subscribe("/davinci/ui/editorSelected",m.hitch(this,this._editorSelected));this.subscribe("/davinci/ui/widgetSelected",m.hitch(this,this._widgetSelectionChanged));
this.subscribe("/davinci/states/state/changed",m.hitch(this,this._stateChanged));this.subscribe("/maqetta/appstates/state/changed",m.hitch(this,this._stateChanged));this.subscribe("/davinci/ui/initialPerspectiveReady",m.hitch(this,this._initialPerspectiveReady));this.subscribe("/davinci/workbench/ready",m.hitch(this,this._workbenchReady))},setReadOnly:function(a){for(var b=0;b<this.pageTemplate.length;b++){var c=this.pageTemplate[b].pageTemplate;if(c)for(var e=0;e<c.length;e++){var g=c[e].widget;
g?g.set("readOnly",a):(g=c[e].domNode)&&m.attr(g,"disabled",a)}}},_modelEntryById:function(a){for(var b=0;b<this.pageTemplate.length;b++){var c=this.pageTemplate[b].pageTemplate;if(c)for(var e=0;e<c.length;e++)if(a==c[e].id)return c[e]}},_editorSelected:function(a){this._editor=a.editor;this.onEditorSelected(this._editor);a=this.tabContainer;this.getParent();var b=a.selectedChildWidget||a.getSelected(),c=!1,e=m.query(".maqPropertySection",a.domNode);this._editor?"davinci.ve.PageEditor"!=this._editor.declaredClass&&
"davinci.ve.themeEditor.ThemeEditor"!=this._editor.declaredClass?e.forEach(function(a){dijit.byNode(a)==b&&(c=!0)}):(e.forEach(function(a){}),"davinci.ve.themeEditor.ThemeEditor"==this._editor.declaredClass&&m.query(".page_editor_only",a.domNode).forEach(function(a){dijit.byNode(a)==b&&(c=!0)})):(e.forEach(function(a){dijit.byNode(a)}),c=!0);c&&this._selectFirstVisibleTab()},onEditorSelected:function(){this._subWidget=this._widget=null;if(this._oldClassName)if(this.domNode)m.removeClass(this.domNode.parentNode.parentNode,
this._oldClassName);else{console.error("have no dom node ! : "+this.id);return}if(this._editor)if(this._editor&&this._editor.editorID&&(this._oldClassName=this._editor.editorID.replace(/\./g,"_"),this.domNode?m.addClass(this.domNode.parentNode.parentNode,this._oldClassName):console.error("have no dom node !")),this.domNode){for(var a=this._currentPropSection,b=m.query(".propSectionButton",this.domNode),c=0;c<b.length;c++){var e=b[c];this._editor&&this._editor.supports&&this._editor.supports("propsect_"+
this.pageTemplate[c].key)?m.removeClass(e,"dijitHidden"):(m.addClass(e,"dijitHidden"),a==this.pageTemplate[c].key&&p.showRoot())}a=[];for(c=0;c<this.pageTemplate.length;c++)(b=this.pageTemplate[c].cascade)&&(a=a.concat(b));for(c=0;c<a.length;c++)b=a[c],b._editorSelected&&b._editorSelected({editor:this._editor})}else console.error("have no dom node !")},_destroyContent:function(){var a=this.containerNode||this.domNode;for(m.forEach(m.query("[widgetId]",a).map(dijit.byNode),function(a){a.destroy()});a.firstChild;)m._destroyElement(a.firstChild);
m.forEach(this._tooltips,function(a){a.destroy()});this._tooltips=void 0;this._destroyHandles()},sectionTitleFromKey:function(a){for(var b=0;b<this.pageTemplate.length;b++)if(this.pageTemplate[b].key==a)return this.pageTemplate[b].title},_initialPerspectiveReady:function(){var a=null;if(!this._alreadySplitIntoMultipleTabs){var c=this.tabContainer;m.addClass(c.domNode,"propRootDetailsContainer");m.addClass(c.domNode,"propertiesContent");for(var e=0;e<this.pageTemplate.length;e++){var a=this.pageTemplate[e].key,
g=this.pageTemplate[e].title,h=this.pageTemplate[e].className;h||(h="");var q=this._titleBarDiv,q=q+"\x3cdiv class\x3d'propertiesToolBar' dojoType\x3d'davinci.ve.widgets.WidgetToolBar'\x3e\x3c/div\x3e",q=q+("\x3cdiv class\x3d'cascadeBackButtonDiv'\x3e\x3cbutton class\x3d'btn-info' onclick\x3d'davinci.ve.widgets.HTMLStringUtil.showSection(\""+a+'","'+g+"\")'\x3e"+g+" "+k.properties+"\x3c/button\x3e\x3c/div\x3e"),a=p.generateTemplate(this.pageTemplate[e]),a=q+a;0==e?(a=this,a.set("title",g),m.addClass(a.domNode,
h)):(q=c.createTab(g,null,null,null,{"class":h,delegate:this}),a=d.addWidget(b,{title:g,content:a,"class":h,delegate:this},null,q,!1),q.cp=a,q._maqPropGroup=this.pageTemplate[e].key,q.add(a,null,!1));a._maqPropGroup=this.pageTemplate[e].key;g=m.query(".paletteCloseBox",a.domNode);0<g.length&&m.connect(g[0],"click",this,function(a){davinci.Workbench.collapsePaletteContainer(a.currentTarget)})}for(g=0;g<this.pageTemplate.length;g++)if(this.pageTemplate[g].cascade=[],h=this.pageTemplate[g].pageTemplate){for(e=
0;e<h.length;e++)q=h[e].id,(a=dijit.byId(q))?h[e].widget=a:(a=m.byId(q))&&(h[e].domNode=a);m.query("#"+this.pageTemplate[g].id+" .CascadeTop").forEach(function(a){return function(b){b=dijit.byId(b.id);a.cascade.push(b)}}(this.pageTemplate[g]))}c._on("selectChild",function(a){a._maqPropGroup&&(this._currentPropSection=a._maqPropGroup,a=(a=this._editor&&this._editor.getContext?this._editor.getContext():null)&&a.getSelection?a.getSelection():[],this._updatePaletteValues(a),p._initSection(this._currentPropSection))}.bind(this));
this._alreadySplitIntoMultipleTabs=!0}},_workbenchReady:function(){this._updateToolBars()},_updateToolBars:function(){m.query(".propertiesToolBar").forEach(function(a){this._editor&&"davinci.ve.PageEditor"==this._editor.declaredClass?(m.removeClass(a,"dijitHidden"),a.style.display=""):m.addClass(a,"dijitHidden")}.bind(this))},_selectFirstVisibleTab:function(){var a=this.getParent();if(a&&a.getChildren)for(var b=a.getChildren(),c=0;c<b.length;c++){var e=b[c];if("none"!=e.controlButton.domNode.style.display){a._maqDontExpandCollapse=
!0;a.selectChild(e);delete a._maqDontExpandCollapse;break}}}})})},"davinci/ui.plugin":function(){define(["require"],function(n){return{id:"davinci.ui","davinci.view":[{id:"navigator",title:"Files",viewClass:"davinci/workbench/Explorer",iconClass:"paletteIcon paletteIconFiles"},{id:"hierarchy",title:"Hierarchy"},{id:"devices",title:"Devices",viewClass:"davinci/workbench/DeviceTreeView",iconClass:"paletteIcon paletteIconOutline"},{id:"files",title:"XFiles",viewClass:"davinci/workbench/FileView",iconClass:"paletteIcon paletteIconOutline"},
{id:"comment",title:"Comments",viewClass:"davinci/review/view/CommentView",iconClass:"paletteIcon paletteIconComments"},{id:"scope",title:"Scope"},{id:"properties",title:"Properties",viewClass:"davinci/workbench/PropertyEditor"},{id:"console",title:"Console"},{id:"history",title:"History"},{id:"search",title:"Search"}],"davinci.preferences":[{name:"Project",id:"project",hide:!0,category:"",pageContent:"Project Settings here"},{name:"Project Settings",id:"ProjectPrefs",category:"davinci.ui.project",
pane:"davinci/ui/ProjectPreferences",defaultValues:{webContentFolder:"",themeFolder:"themes",widgetFolder:"lib/custom"}}],"davinci.perspective":{id:"main",title:"AJAX IDE",views:[{viewID:"davinci.ui.navigator",position:"left-bottom"},{viewID:"davinci.ui.outline",position:"right"},{viewID:"davinci.ui.properties",position:"right-bottom"}]},"davinci.actionSets":[{id:"editorActions",visible:!0,menu:[{__mainMenu:!0,separator:["new",!1,"open",!1]},{label:"Create",path:"new",id:"davinci.new",separator:["newApp",
!0,"newSketch",!0,"newFolder",!0,"newTheme",!0,"newProject",!0,"additions",!0]},{label:"Open",path:"open",id:"davinci.open",separator:["openFile",!0,"openTheme",!0,"openOrion",!1,"additions",!1]}],actions:[{id:"newHTMLMobile",run:function(){n(["./ui/Resource"],function(m){m.newHTMLMobile()})},iconClass:"newOpenMenuItem newMobileAppMenuItem",label:"Mobile Application...",menubarPath:"davinci.new/newApp"},{id:"newHTMLDesktop",run:function(){n(["./ui/Resource"],function(m){m.newHTMLDesktop()})},iconClass:"newOpenMenuItem newDesktopAppMenuItem",
label:"Desktop Application...",menubarPath:"davinci.new/newApp"},{id:"newHTMLSketchHiFi",run:function(){n(["./ui/Resource"],function(m){m.newHTMLSketchHiFi()})},iconClass:"newOpenMenuItem newSketchHiFiMenuItem",label:"Sketch (high-fidelity)...",menubarPath:"davinci.new/newSketch"},{id:"newHTMLSketchLoFi",run:function(){n(["./ui/Resource"],function(m){m.newHTMLSketchLoFi()})},iconClass:"newOpenMenuItem newSketchLoFiMenuItem",label:"Sketch (low-fidelity)...",menubarPath:"davinci.new/newSketch"},{id:"newFolder",
run:function(){n(["./ui/Resource"],function(m){m.newFolder()})},iconClass:"newOpenMenuItem newFolderMenuItem",label:"Folder...",menubarPath:"davinci.new/newFolder"},{id:"newCSS",run:function(){n(["./ui/Resource"],function(m){m.newCSS()})},iconClass:"newOpenMenuItem newCSSMenuItem",label:"CSS File...",menubarPath:"davinci.new/newFolder"},{id:"newJS",run:function(){n(["./ui/Resource"],function(m){m.newJS()})},iconClass:"newOpenMenuItem newJSMenuItem",label:"JavaScript File...",menubarPath:"davinci.new/newFolder"},
{id:"newTheme",run:function(){n(["davinci/Workbench","davinci/ui/NewTheme"],function(m,k){m.showModal(new k,"New Theme",{width:300},null,!0)})},iconClass:"newOpenMenuItem newThemeMenuItem",label:"Theme...",menubarPath:"davinci.new/newTheme"},{id:"newProject",run:function(){n(["./ui/Resource"],function(m){m.newProject()})},iconClass:"newOpenMenuItem newProjectMenuItem",label:"Project...",menubarPath:"davinci.new/newProject"},{id:"openThemeEditor",run:function(){n(["davinci/Workbench","davinci/ui/OpenThemeDialog"],
function(m,k){m.showModal(new k,"Open Theme",{width:200},null,!0)})},iconClass:"newOpenMenuItem openThemeMenuItem",label:"Theme Editor...",menubarPath:"davinci.open/openTheme"},{id:"openReview",run:function(){n(["./ui/Resource"],function(m){m.openFile()})},run:function(){n(["davinci/Workbench","davinci/review/widgets/OpenReviewDialog"],function(m,k){m.showModal(new k,"Open Review",{width:350,height:250})})},iconClass:"newOpenMenuItem openReviewMenuItem",label:"Review...",menubarPath:"davinci.open/openTheme"},
{id:"orionNavigator",run:function(){window.open("../navigate/table.html#","_blank");window.focus()},iconClass:"newOpenMenuItem orionIcon",label:"Orion Navigator",menubarPath:"davinci.open/openOrion"}]},{id:"main",visible:!0,menu:[{__mainMenu:!0,separator:["usersettings",!1,"settings",!1,"additions",!1,"help",!1]},{label:"User settings",path:"usersettings",id:"davinci.usersettings",className:"userSettingsMenu",iconClass:"userSettingsMenuIcon",showLabel:!1,separator:["username",!0,"logout",!0,"additions",
!1]},{label:"Settings",path:"settings",id:"davinci.settings",className:"appSettingsMenu",iconClass:"appSettingsMenuIcon",showLabel:!1,separator:["settings",!0,"additions",!1]},{label:"Help",path:"help",id:"davinci.help",className:"helpMenu",iconClass:"helpMenuIcon",showLabel:!1,separator:["help",!0,"about",!1,"additions",!1]}],actions:[{id:"editPreferences",run:function(){n(["davinci/workbench/Preferences"],function(m){m.showPreferencePage()})},label:"Preferences...",menubarPath:"davinci.settings/settings"},
{id:"editThemeSets",run:function(){n(["davinci/ui/ThemeSetsDialog"],function(m){m()})},label:"Theme sets...",menubarPath:"davinci.settings/settings"},{id:"showHelp",run:function(){window.open("app/docs/index.html","MaqettaDocumentation")},label:"Documentation",menubarPath:"davinci.help/help",keyBinding:{charOrCode:dojo.keys.F1}},{id:"showTutotials",run:function(){window.open("app/docs/index.html#tutorials/tutorials","MaqettaTutorials")},label:"Tutorials",menubarPath:"davinci.help/help"},{id:"showVideos",
run:function(){window.open("http://www.youtube.com/user/Maqetta/","MaqettaVideos")},label:"Videos",menubarPath:"davinci.help/help"},{id:"showCheatSheets",run:function(){window.open("app/docs/index.html#cheatsheets/cheatsheets","MaqettaCheatSheets")},label:"Cheat sheets",menubarPath:"davinci.help/help"},{id:"showHowTo",run:function(){window.open("https://www.ibm.com/search/csass/search/?sn\x3ddw\x26en\x3dutf\x26hpp\x3d20\x26dws\x3ddw\x26q\x3dmaqetta\x26Search\x3dSearch","MaqettaHowTo")},label:"How-to articles",
menubarPath:"davinci.help/help"},{id:"about",run:function(){n(["davinci/ui/about"],function(m){m.show()})},label:"About Maqetta",menubarPath:"davinci.help/about"},{id:"username",action:"davinci/actions/UserNameAction",run:function(){window.open("../settings/settings.html","_blank");window.focus()},label:"{user}",menubarPath:"davinci.usersettings/username"},{id:"logout",action:"davinci/actions/LogoutAction",label:"Logout",menubarPath:"davinci.usersettings/logout"}]},{id:"explorerActions",visible:!0,
actions:[{id:"davinci.ui.rename",label:"Rename...",iconClass:"renameIcon",run:function(){n(["./ui/Resource"],function(m){m.renameAction()})},isEnabled:function(m){return n("./ui/Resource").canModify(m)},menubarPath:"addFiles"},{id:"davinci.ui.delete",label:"Delete",iconClass:"deleteIcon",isEnabled:function(m){return n("./ui/Resource").canModify(m)},run:function(){n(["./ui/Resource"],function(m){m.deleteAction()})},menubarPath:"delete",keyBinding:{charOrCode:[dojo.keys.DELETE,dojo.keys.BACKSPACE]}},
{id:"davinci.ui.download",label:"Download",iconClass:"downloadSomeIcon",action:"davinci/actions/DownloadAction",isEnabled:function(m){return n("./ui/Resource").canModify(m)},menubarPath:"delete"}]}],"davinci.actionSetPartAssociations":[{targetID:"davinci.ui.editorActions",parts:["davinci.ui.editorMenuBar"]},{targetID:"davinci.ui.explorerActions",parts:["davinci.ui.navigator"]}],"davinci.viewActions":[{viewContribution:{targetID:"davinci.ui.problems",actions:[{id:"Copy2",iconClass:"copyIcon",run:function(){alert("view toolbar")},
label:"Copy",toolbarPath:"davinci.toolbar.main/edit",menubarPath:"davinci.edit/cut"}]}},{viewContribution:{targetID:"workbench.Explorer",actions:[{id:"davinci.ui.newfile",label:"New folder...",iconClass:"newFolderIcon",className:"FilesToolbarNewFolder",run:function(){n(["./ui/Resource"],function(m){m.newFolder()})},toolbarPath:"download"},{id:"davinci.ui.deletefile",label:"Delete file...",iconClass:"FilesToolbarDeleteFileIcon",className:"FilesToolbarDeleteFile",run:function(){n(["./ui/Resource"],
function(m){m.deleteAction()})},toolbarPath:"download"},{id:"davinci.ui.renamefile",label:"Rename file...",iconClass:"FilesToolbarRenameFileIcon",className:"FilesToolbarRenameFile",run:function(){n(["./ui/Resource"],function(m){m.renameAction()})},toolbarPath:"download"},{id:"download",iconClass:"downloadSomeIcon",className:"FilesToolbarDownloadSelected",run:function(){n(["./Workbench","./ui/DownloadSelected"],function(m,k){m.showModal(new k,"Download",{width:440})})},label:"Download Selected Files",
toolbarPath:"download"},{id:"download",iconClass:"downloadAllIcon",className:"FilesToolbarDownloadAll",run:function(){n(["./Workbench","./ui/Download"],function(m,k){m.showModal(new k,"Download",{width:440})})},label:"Download Entire Project",toolbarPath:"download"}]}}]}})},"dojo/dnd/move":function(){define("../_base/declare ../dom-geometry ../dom-style ./common ./Mover ./Moveable".split(" "),function(n,m,k,h,d,b){h=n("dojo.dnd.move.constrainedMoveable",b,{constraints:function(){},within:!1,constructor:function(b,
g){g||(g={});this.constraints=g.constraints;this.within=g.within},onFirstMove:function(b){var c=this.constraintBox=this.constraints.call(this,b);c.r=c.l+c.w;c.b=c.t+c.h;this.within&&(b=m.getMarginSize(b.node),c.r-=b.w,c.b-=b.h)},onMove:function(b,g){var c=this.constraintBox,a=b.node.style;this.onMoving(b,g);g.l=g.l<c.l?c.l:c.r<g.l?c.r:g.l;g.t=g.t<c.t?c.t:c.b<g.t?c.b:g.t;a.left=g.l+"px";a.top=g.t+"px";this.onMoved(b,g)}});d=n("dojo.dnd.move.boxConstrainedMoveable",h,{box:{},constructor:function(b,
g){var c=g&&g.box;this.constraints=function(){return c}}});n=n("dojo.dnd.move.parentConstrainedMoveable",h,{area:"content",constructor:function(b,g){var c=g&&g.area;this.constraints=function(){var a=this.node.parentNode,b=k.getComputedStyle(a),g=m.getMarginBox(a,b);if("margin"==c)return g;var d=m.getMarginExtents(a,b);g.l+=d.l;g.t+=d.t;g.w-=d.w;g.h-=d.h;if("border"==c)return g;d=m.getBorderExtents(a,b);g.l+=d.l;g.t+=d.t;g.w-=d.w;g.h-=d.h;if("padding"==c)return g;d=m.getPadExtents(a,b);g.l+=d.l;g.t+=
d.t;g.w-=d.w;g.h-=d.h;return g}}});return{constrainedMoveable:h,boxConstrainedMoveable:d,parentConstrainedMoveable:n}})},"xblox/model/code/RunScript":function(){define("dcl/dcl xdojo/has dojo/Deferred xblox/model/Block xide/utils xblox/model/Contains dojo/promise/all xide/types module".split(" "),function(n,m,k,h,d,b,c,g,p,a,e,q,u){var w="undefined"!==typeof window?window.console:global.console;return n([h,b],{declaredClass:"xblox.model.code.RunScript",name:"Run Script",method:"",args:"",deferred:!1,
sharable:!0,context:null,icon:"fa-code",observed:["method"],getContext:function(){return this.context||(this.scope.getContext?this.scope.getContext():this)},solve2:function(a,b,c,e){this._currentIndex=0;this._return=[];var g=""+this._get("method"),d=this,h=this.getContext();if(g&&g.length){var q=function(){var a=new Function("{"+g+"}"),q=d.getArgs()||[];try{var p=a.apply(h,q||{});d._lastResult=p;c&&c("Expression "+g+" evaluates to "+p);if("false"!==p&&!1!==p)d.onSuccess(d,b,{result:p});else return d.onFailed(d,
b),[]}catch(D){return e&&e("invalid expression : \n"+g+": "+D),d.onFailed(d,b),[]}};if(a.global)(function(){window=a.global;var q=d.getArgs()||[];try{var p=null,p=h.runExpression?h.runExpression(g,null,q):(new Function("{"+g+"}")).bind(this).apply(h,q||{});d._lastResult=p;c&&c("Expression "+g+" evaluates to "+p);if("false"!==p&&!1!==p)d.onSuccess(d,b);else return d.onFailed(d,b),[]}catch(G){return d._lastResult=null,e&&e("invalid expression : \n"+g+": "+G),d.onFailed(d,b),[]}}).call(a.global);else return q()}else w.error("have no script");
q=this[this._getContainer()];if(q.length)this.runFrom(q,0,b);else this.onSuccess(this,b);this.onDidRun();return[]},solve:function(a,b,c,e,g,d){this._currentIndex=0;this._return=[];b=b||{};c=e||(this._get("method")?this._get("method"):this.method);if(!a.expressionModel)throw Error("na");var h=this;e=this.getContext();var q=this[this._getContainer()],p=new k,r=h.deferred,u=a.getExpressionModel();this.onRunThis(b);if(!u)return w.error("scope has no expression model"),!1;var v=u.replaceVariables(a,c,
null,null);(a=u.expressionCache[v])||(a=u.expressionCache[v]=new Function("{"+v+"}"));u=h.getArgs(b)||[];try{r&&(e.resolve=function(a){h._deferredObject&&h._deferredObject.resolve();h.onDidRunThis(p,a,q,b)});var m=a.apply(e,u||{});h._lastResult=m;g&&g("Expression "+c+" evaluates to "+m);if(!r)h.onDidRunThis(p,m,q,b);if("false"!==m&&!1!==m)h.onSuccess(h,b);else h.onFailed(h,b)}catch(J){J=J||{},h.onDidRunItemError(p,J,b),h.onFailed(h,b),d&&d("invalid expression : \n"+c+": "+J)}return p},toText:function(){var a=
'\x3cspan style\x3d""\x3e'+this.getBlockIcon()+" "+this.name+" :: \x3c/span\x3e";this.method&&(a+=this.method.substr(0,50));return a},canAdd:function(){return!0},getFields:function(){"No Description"===this.description&&(this.description=q);var a=this.inherited(arguments)||this.getDefaultFields(),b=this;a.push(d.createCI("name",13,this.name,{group:"General",title:"Name",dst:"name"}));a.push(d.createCI("deferred",0,this.deferred,{group:"General",title:"Deferred",dst:"deferred"}));a.push(d.createCI("arguments",
27,this.args,{group:"Arguments",title:"Arguments",dst:"args"}));a.push(d.createCI("value",g.ECIType.EXPRESSION_EDITOR,this.method,{group:"Script",title:"Script",dst:"method",select:!0,widget:{allowACECache:!0,showBrowser:!1,showSaveButton:!0,editorOptions:{showGutter:!0,autoFocus:!1},item:this},delegate:{runExpression:function(a,c,e){b.method=a;b.solve(b.scope,null,c,e)}}}));return a}})})},"xblox/factory/Blocks":function(){define("xide/factory xide/utils xide/types xide/mixins/ReloadMixin xide/mixins/EventedMixin xblox/model/logic/CaseBlock xblox/model/Block xblox/model/functions/CallBlock xblox/model/functions/StopBlock xblox/model/functions/PauseBlock xblox/model/functions/SetProperties xblox/model/code/CallMethod xblox/model/code/RunScript xblox/model/loops/ForBlock xblox/model/loops/WhileBlock xblox/model/variables/VariableAssignmentBlock xblox/model/logic/IfBlock xblox/model/logic/ElseIfBlock xblox/model/logic/SwitchBlock xblox/model/variables/VariableSwitch xblox/model/logging/Log xblox/model/server/RunServerMethod xblox/model/server/Shell xblox/model/code/RunBlock xblox/model/events/OnEvent xblox/model/events/OnKey xblox/model/mqtt/Subscribe xblox/model/mqtt/Publish xblox/model/File/ReadJSON xcf/factory/Blocks".split(" "),
function(n,m,k,h,d,b,c,g,p,a,e,q,u,w,r,v,x,A,z,y,B,C,E,F,G,D,H,J,Q){var N=null;n.createBlock=function(a,b,e,g){c.prototype.prepareArgs(b);a=n.createInstance(a,b,e);a.ctrArgs=null;var d;try{a&&a.init&&a.init(),a.scope&&(d=a.scope.registerBlock(a,g)),a.initReload&&a.initReload()}catch(U){logError(U,"create block")}return d||a};n.clearVariables=function(){};n.getAllBlocks=function(a,b,c,e,g){if(!1!==g&&null!=N)return N;0==g&&(N=null);g=n._getFlowBlocks(a,b,c,e);g=g.concat(n._getLoopBlocks(a,b,c,e));
g=g.concat(n._getCommandBlocks(a,b,c,e));g=g.concat(n._getCodeBlocks(a,b,c,e));g=g.concat(n._getEventBlocks(a,b,c,e));g=g.concat(n._getLoggingBlocks(a,b,c,e));g=g.concat(n._getServerBlocks(a,b,c,e));g=g.concat(n._getMQTTBlocks(a,b,c,e));return N=g=g.concat(n._getFileBlocks(a,b,c,e))};n._getMQTTBlocks=function(a,b,c,e){var g=[];g.push({name:"MQTT",iconClass:"fa-cloud",items:[{name:"Subscribe",owner:b,iconClass:"fa-bell",proto:H,target:c,ctrArgs:{scope:a,group:e}},{name:"Publish",owner:b,iconClass:"fa-send",
proto:J,target:c,ctrArgs:{scope:a,group:e}}]});n.publish(k.EVENTS.ON_BUILD_BLOCK_INFO_LIST,{items:g,group:"MQTT"});return g};n._getFileBlocks=function(a,b,c,e){var g=[];g.push({name:"File",iconClass:"fa-file",items:[{name:"%%Read JSON",owner:b,iconClass:"fa-file",proto:Q,target:c,ctrArgs:{scope:a,group:e}}]});n.publish(k.EVENTS.ON_BUILD_BLOCK_INFO_LIST,{items:g,group:"File"});return g};n._getServerBlocks=function(a,b,c,e){var g=[];g.push({name:"Server",iconClass:"el-icon-repeat",items:[{name:"Run Server Method",
owner:b,iconClass:"fa-plug",proto:C,target:c,ctrArgs:{scope:a,group:e}},{name:"Shell",owner:b,iconClass:"fa-code",proto:E,target:c,ctrArgs:{scope:a,group:e}}]});n.publish(k.EVENTS.ON_BUILD_BLOCK_INFO_LIST,{items:g,group:"Server"});return g};n._getVariableBlocks=function(a,b,c,e){var g=[];g.push({name:"Flow",iconClass:"el-icon-random",items:[{name:"If...Else",owner:b,iconClass:"el-icon-fork",proto:x,target:c,ctrArgs:{scope:a,group:e,condition:"[value]\x3d\x3d'PW'"}}]});return g};n._getEventBlocks=
function(a,b,c,e){var g=[];g.push({name:"Events",iconClass:"fa-bell",items:[{name:"On Event",owner:b,iconClass:"fa-bell",proto:G,target:c,ctrArgs:{scope:a,group:e}},{name:"On Key",owner:b,iconClass:"fa-keyboard-o",proto:D,target:c,ctrArgs:{scope:a,group:e}}]});n.publish(k.EVENTS.ON_BUILD_BLOCK_INFO_LIST,{items:g,group:"Events"});return g};n._getLoggingBlocks=function(a,b,c,e){var g=[];g.push({name:"Logging",iconClass:"fa-bug",items:[{name:"Log",owner:b,iconClass:"fa-bug",proto:B,target:c,ctrArgs:{scope:a,
group:e}}]});n.publish(k.EVENTS.ON_BUILD_BLOCK_INFO_LIST,{items:g,group:"Logging"});return g};n._getCodeBlocks=function(a,b,c,g){var d=[];d.push({name:"Code",iconClass:"fa-code",items:[{name:"Call Method",owner:b,iconClass:"el-icon-video",proto:q,target:c,ctrArgs:{scope:a,group:g}},{name:"Run Script",owner:b,iconClass:"fa-code",proto:u,target:c,ctrArgs:{scope:a,group:g}},{name:"Run Block",owner:b,iconClass:"fa-code",proto:F,target:c,ctrArgs:{scope:a,group:g}},{name:"Set Properties",owner:b,iconClass:"fa-code",
proto:e,target:c,ctrArgs:{scope:a,group:g}}]});n.publish(k.EVENTS.ON_BUILD_BLOCK_INFO_LIST,{items:d,group:"Code"});return d};n._getFlowBlocks=function(a,b,c,e){var g=[];g.push({name:"Flow",iconClass:"el-icon-random",items:[{name:"If...Else",owner:b,iconClass:"el-icon-fork",proto:x,target:c,ctrArgs:{scope:a,group:e,condition:"[value]\x3d\x3d'PW'"}},{name:"Switch",owner:b,iconClass:"el-icon-fork",proto:z,target:c,ctrArgs:{scope:a,group:e}},{name:"Variable Switch",owner:b,iconClass:"el-icon-fork",proto:y,
target:c,ctrArgs:{scope:a,group:e}}]});n.publish(k.EVENTS.ON_BUILD_BLOCK_INFO_LIST,{items:g,group:"Flow"});return g};n._getLoopBlocks=function(a,b,c,e){var g=[];g.push({name:"Loops",iconClass:"el-icon-repeat",items:[{name:"While",owner:b,iconClass:"el-icon-repeat",proto:r,target:c,ctrArgs:{scope:a,group:e,condition:"[Volume]\x3c\x3d100"}},{name:"For",owner:b,iconClass:"el-icon-repeat",proto:w,target:c,ctrArgs:{scope:a,group:e,initial:"1",comparator:"\x3c\x3d","final":"5",modifier:"+1",counterName:"value"}}]});
n.publish(k.EVENTS.ON_BUILD_BLOCK_INFO_LIST,{items:g,group:"Loops"});return g};n._getMathBlocks=function(a,b,c,e){b=[];b.push({name:"Math",owner:this,iconClass:"el-icon-qrcode",dstItem:c,items:[{name:"If...Else",owner:c,iconClass:"el-icon-compass",proto:x,item:c,ctrArgs:{scope:a,group:e}}]});return b};n._getTimeBlocks=function(a,b,c,e){b=[];b.push({name:"Time",owner:this,iconClass:"el-icon-qrcode",dstItem:c,items:[{name:"If...Else",owner:c,iconClass:"el-icon-time",proto:x,item:c,ctrArgs:{scope:a,
group:e}}]});return b};n._getTransformBlocks=function(a,b,c,e){b=[];b.push({name:"Time",owner:this,iconClass:"el-icon-magic",dstItem:c,items:[{name:"If...Else",owner:c,iconClass:"el-icon-time",proto:x,item:c,ctrArgs:{scope:a,group:e}}]});return b};return n})},"xideve/views/VisualEditorLayout":function(){define(["dcl/dcl","xaction/Action","xide/types","davinci/Workbench","dojo/dom-style"],function(n,m,k,h,d){return n(null,{declaredClass:"xideve/views/VisualEditorLayout",changeGlobalLayout:function(b){this.getPageEditor();
var c=this.getMainView(),g=c.layoutLeft,c=c.layoutRight,h=this;switch(b){case k.VE_LAYOUT_RIGHT_CENTER_BOTTOM:g._splitterWidget&&g._splitterWidget.set("state","closed");c._splitterWidget&&c._splitterWidget.set("state","full");this.doSplit(k.VIEW_SPLIT_MODE.SPLIT_HORIZONTAL);break;case k.VE_LAYOUT_CENTER_BOTTOM:this.doSplit(k.VIEW_SPLIT_MODE.SPLIT_HORIZONTAL);g._splitterWidget&&g._splitterWidget.set("state","closed");c._splitterWidget&&c._splitterWidget.set("state","closed");break;case k.VE_LAYOUT_CENTER_RIGHT:this.doSplit(k.VIEW_SPLIT_MODE.DESIGN);
g._splitterWidget&&g._splitterWidget.set("state","closed");c._splitterWidget&&c._splitterWidget.set("state","full");break;case k.VE_LAYOUT_LEFT_CENTER_RIGHT:this.doSplit(k.VIEW_SPLIT_MODE.DESIGN);g._splitterWidget&&g._splitterWidget.set("state","full");c._splitterWidget&&c._splitterWidget.set("state","full");break;case k.VE_LAYOUT_LEFT_CENTER_RIGHT_BOTTOM:this.doSplit(k.VIEW_SPLIT_MODE.SPLIT_HORIZONTAL),d.set(g.domNode,{width:"200px"}),g._splitterWidget&&g._splitterWidget.set("state","full"),c._splitterWidget&&
c._splitterWidget.set("state","full")}this.publish(k.EVENTS.RESIZE);setTimeout(function(){h.publish(k.EVENTS.RESIZE)},1E3)},getLayoutActions:function(){function b(a,b,e,d){a=m.create(a,e,"View/"+b+"_"+g,!1,null,k.ITEM_TYPE.WIDGET,"viewActions",null,!1,function(){c.changeGlobalLayout(b)});a.setVisibility(k.ACTION_VISIBILITY.ACTION_TOOLBAR,{label:"",widgetArgs:{style:"text-align:right;float:right;font-size:120%;"},permanent:function(){return 0==c.destroyed}});g++;return a}if(this._layoutActions)return this._layoutActions;
var c=this,g=0,d=b("Center Bottom Right",k.VE_LAYOUT_RIGHT_CENTER_BOTTOM,"layoutIcon-rightCenterBottom"),a=b("Center Bottom",k.VE_LAYOUT_CENTER_BOTTOM,"layoutIcon-centerBottom"),e=b("Center Right",k.VE_LAYOUT_CENTER_RIGHT,"layoutIcon-centerRight"),h=b("Left Center Right",k.VE_LAYOUT_LEFT_CENTER_RIGHT,"layoutIcon-leftCenterRight"),u=b("Left Center Right Bottom",k.VE_LAYOUT_LEFT_CENTER_RIGHT_BOTTOM,"layoutIcon-leftCenterRightBottom");return this._layoutActions=d=[d,a,e,h,u]},doSplit:function(b){},onSplit:function(){this.editor&&
(h._switchEditor(null),this.publish("/davinci/ui/editorSelected",[{editor:null,oldEditor:this.editor}]))},getSplitTarget:function(){return this.containerNode},getSplitContent:function(){return this.editor.domNode}})})},"xblox/embedded_ui":function(){define(["xblox/embedded","xblox/factory/Blocks","xide/widgets/ScriptWidget"],function(){})},"davinci/ui/dnd/DragSource":function(){define(["dojo/_base/declare","dojo/fx"],function(n,m){return n("davinci.ui.dnd.DragSource",null,{disabled:!1,dragObject:null,
dragClone:null,offsetParent:null,offsetParentCoords:null,parentCoords:null,refNode:null,positioning:null,useCurrentPositioning:!0,targetShouldShowCaret:!1,draggingMousePosition:"TopLeft",data:null,returnCloneOnFailure:!0,constructor:function(k,h,d,b){this.data=d;k=dojo.byId(k);k.dragSource=this;this.domNode=k;this.dragObject=b?b:k;this.refNode=k;this.type=h;this.offsetParent=dojo.doc.body},onDragDown:function(k){this.useCurrentPositioning&&(this.positioning=dojo.style(this.refNode,"position"));this.storeMouseDownInfo(k);
this.initDrag(k)},onDragStart:function(k){this.createDragClone(k);return k._dragClone=this.dragClone},onDragMove:function(k){"TopLeft"==this.draggingMousePosition?(this.dragClone.style.top=k.pageY+4+(k.documentY||0)+"px",this.dragClone.style.left=k.pageX+4+(k.documentX||0)+"px"):"ClickedPosition"==this.draggingMousePosition&&(this.dragClone.style.top=k.pageY-this.dragOffset.y+(k.documentY||0)+"px",this.dragClone.style.left=k.pageX-this.dragOffset.x+(k.documentX||0)+"px");"none"==this.dragClone.style.display&&
(this.dragClone.style.display="")},onDragEnd:function(k){"dropSuccess"!=k.dragStatus&&this.returnCloneOnFailure?"dropFailure"==k.dragStatus?this.returnClone():console.error("DragSource#onDragEnd: internal error: e.dragStatus is not set"):this.removeClone();this.cleanupDrag()},unregister:function(){this.domNode.dragSource=null;this.cleanupDrag()},reregister:function(){this.domNode.dragSource=this;this.initDrag()},storeMouseDownInfo:function(k){this.layerX=k.layerX-1;this.layerY=k.layerY-1;this.pageX=
k.pageX;this.pageY=k.pageY;this.scrollOffset=dojo._docScroll();window.__x&&window.__x.apply(this);this.dragStartPosition=dojo.position(this.refNode,!0);this.dragStartCssPosition={y:this.refNode.offsetTop,x:this.refNode.offsetLeft};this.dragOffset={y:k.pageY-this.dragStartPosition.y,x:k.pageX-this.dragStartPosition.x};this.offsetParentCoords=dojo.position(this.offsetParent,!0);k=dojo.position(this.domNode.parentNode,!0);this.parentCoords={y:k.y-this.offsetParentCoords.y,x:k.x-this.offsetParentCoords.x};
this.fixMouseDownInfo&&this.fixMouseDownInfo(this)},initDrag:function(){},cleanupDrag:function(){},createDragClone:function(k){this.dragClone=k=k.dragSource.dragHandler&&k.dragSource.dragHandler.createDragClone?k.dragSource.dragHandler.createDragClone():this.dragObject.cloneNode(!0);dojo.style(k,"opacity",.5);k.style.zIndex=1001E3;var h=dojo.contentBox(this.dragObject);k.style.width=h.w+"px";k.style.height=h.h+"px";k.style.top=this.dragObject.offsetTop+4+"px";k.style.left=this.dragObject.offsetLeft+
4+"px";k.style.position="absolute";k.style.clear="both";k.style.display="none";this.offsetParent.appendChild(k)},setDragTarget:function(k){this.dragObject=k},cancelEvent:function(k){k.stopPropagation();k.preventDefault()},removeClone:function(){setTimeout(dojo.hitch(this,"removeClone_1"),0)},removeClone_1:function(){try{this.dragClone.parentNode.removeChild(this.dragClone),this.dragClone=null}catch(k){logError(k)}},returnClone:function(){var k=dojo.position(this.dragClone,!0),h=this.dragStartPosition,
d=this;m.slideTo({node:this.dragClone,top:k.y>h.y?h.y-10:h.y+10,left:k.x>h.x?h.x-10:h.x+10,duration:400,onEnd:function(){m.slideTo({node:d.dragClone,top:h.y,left:h.x,duration:100,onEnd:function(){d.dragClone.parentNode.removeChild(d.dragClone);d.dragClone=null;d.onCloneReturned()}}).play()}}).play()},onCloneReturned:function(){},globalChangeCursor:function(k){var h=dojo.doc.styleSheets[0];if(h)if(k){if(this._showingCursor){if(this._showingCursor==k)return;this.globalChangeCursor(null)}this._showingCursor=
k;this._ruleIndex=h.cssRules.length;h.insertRule("*{cursor:"+k+" ! important;}",h.cssRules.length)}else this._showingCursor&&(this._showingCursor=null,h.deleteRule(this._ruleIndex))}})})},"dijit/PopupMenuBarItem":function(){define(["dojo/_base/declare","./PopupMenuItem","./MenuBarItem"],function(n,m,k){return n("dijit.PopupMenuBarItem",[m,k._MenuBarItemMixin],{})})},"xide/encoding/_base":function(){define(["dojo/_base/lang"],function(n){return{outputTypes:{Base64:0,Hex:1,String:2,Raw:3},addWords:function(m,
k){var h=(m&65535)+(k&65535);return(m>>16)+(k>>16)+(h>>16)<<16|h&65535},stringToWord:function(m){for(var k=[],h=0,d=8*m.length;h<d;h+=8)k[h>>5]|=(m.charCodeAt(h/8)&255)<<h%32;return k},wordToString:function(m){for(var k=[],h=0,d=32*m.length;h<d;h+=8)k.push(String.fromCharCode(m[h>>5]>>>h%32&255));return k.join("")},wordToHex:function(m){for(var k=[],h=0,d=4*m.length;h<d;h++)k.push("0123456789abcdef".charAt(m[h>>2]>>h%4*8+4&15)+"0123456789abcdef".charAt(m[h>>2]>>h%4*8&15));return k.join("")},wordToBase64:function(m){for(var k=
[],h=0,d=4*m.length;h<d;h+=3)for(var b=(m[h>>2]>>h%4*8&255)<<16|(m[h+1>>2]>>(h+1)%4*8&255)<<8|m[h+2>>2]>>(h+2)%4*8&255,c=0;4>c;c++)8*h+6*c>32*m.length?k.push("\x3d"):k.push("ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".charAt(b>>6*(3-c)&63));return k.join("")},stringToUtf8:function(m){for(var k="",h=-1,d,b;++h<m.length;)d=m.charCodeAt(h),b=h+1<m.length?m.charCodeAt(h+1):0,55296<=d&&56319>=d&&56320<=b&&57343>=b&&(d=65536+((d&1023)<<10)+(b&1023),h++),127>=d?k+=String.fromCharCode(d):
2047>=d?k+=String.fromCharCode(192|d>>>6&31,128|d&63):65535>=d?k+=String.fromCharCode(224|d>>>12&15,128|d>>>6&63,128|d&63):2097151>=d&&(k+=String.fromCharCode(240|d>>>18&7,128|d>>>12&63,128|d>>>6&63,128|d&63));return k}}})},"davinci/ve/commands/ModifyRuleCommand":function(){define(["dojo/_base/declare","../States","../../html/CSSModel"],function(n,m,k){var h=function(d,b){d.removeAllProperties();b.forEach(function(b){d.addProperty(b.name,b.value)})};return n("davinci.ve.commands.ModifyRuleCommand",
null,{name:"modify rule",constructor:function(d,b,c){this.cssRule=d;this.values=b;this.context=c},execute:function(d){this.context||(this.context=d);if(this.cssRule&&this.values&&this.context){this._oldValues=this.cssRule.getProperties();d=this.cssRule;var b=this.values,c,g,h=[],a=[];for(c=0;c<b.length;c++)for(var e in b[c])(g=d.getProperty(e))&&a.push(g),d.removeProperty(e);for(c=0;c<d.properties.length;c++){g=d.properties[c];var q={};q[g.name]=g.value;h.push(q)}b=h.concat(dojo.clone(b));g=k.shorthand;
for(c=h=0;c<g.length;c++){a:{for(var q=g[c][0],u=0;u<b.length;u++)if(b[u].hasOwnProperty(q)){q=u;break a}q=-1}-1<q&&(u=b[q],b.splice(q,1),b.splice(h,0,u),h++)}for(c=d.properties.length-1;0<=c;c--)if(g=d.properties[c])a.push(d.getProperty(g.name)),d.removeProperty(g.name);for(c=0;c<b.length;c++)for(e in b[c])if(b[c][e]&&""!==b[c][e])for(d.addProperty(e,b[c][e]),g=0;g<a.length;g++)if(a[g].name===e){h=d.getProperty(e,b[c][e]);a[g].comment&&(h.comment=a[g].comment);a[g].postComment&&(h.postComment=a[g].postComment);
a.splice(g,1);break}this._setDirty()}},undo:function(){this.cssRule&&this._oldValues&&this.context&&(h(this.cssRule,this._oldValues),this._setDirty())},_setDirty:function(){this.cssRule.getCSSFile().setDirty(!0);this.context.editor.setDirty(!0);m.resetState(this.context.rootNode);this.context._selection&&(this.context._forceSelectionChange=!0)}})})},"davinci/ve/actions/SelectAncestorAction":function(){define(["dojo/_base/declare","davinci/ve/actions/_SelectAncestorAction","davinci/Workbench","davinci/lang/ve"],
function(n,m,k,h){return n("davinci.ve.actions.SelectAncestorAction",[m],{run:function(d){var b=(d=this.fixupContext(d))&&d.getSelection();if(this.selectionSameParentNotBody(b)){for(var c=[],b=b[0].getParent();"BODY"!=b.domNode.tagName;)c.push(b),b=b.getParent();for(var b='\x3cdiv class\x3d"SelectAncestorLabel"\x3e'+h.selectAncestorLabel+'\x3c/div\x3e\x3cselect dojoType\x3d"dijit.form.Select" id\x3d"SelectAncestor" name\x3d"SelectAncestor" style\x3d"width:12em;"\x3e\x3coption value\x3d"-1"\x3e\x3c/option\x3e',
g=0;g<c.length;g++)var p=require("davinci/ve/widget").getLabel(c[g]),b=b+('\x3coption value\x3d"'+g+'"\x3e'+p+"\x3c/option\x3e");k.showMessage(h.selectAncestorTitle,b+"\x3c/select\x3e\x3cbr/\x3e");b=dijit.byId("SelectAncestor");b._selectAncestor=this._selectAncestor;dojo.connect(b,"onChange",function(a){d.select(c[a])})}},isEnabled:function(d){d=(d=this.fixupContext(d))&&d.getSelection();return this.selectionSameParentNotBody(d)}})})},"davinci/Theme":function(){define("dojo/_base/declare dojo/promise/all ./Workbench ./Runtime ./library ./workbench/Preferences ./model/Path ./html/HTMLFile ./model/Factory system/resource".split(" "),
function(n,m,k,h,d,b,c,g,p,a){var e={TEMP_CLONE_PRE:"clone_",desktop_default:"desktop_default",mobile_default:"custom_default",default_theme:"(device-specific)",none_themeset_name:"(none)",other_device:"other",none_theme:"none",dojoMobileDefault:[{theme:"android",device:"Android"},{theme:"blackberry",device:"BlackBerry"},{theme:"ipad",device:"iPad"},{theme:"iphone",device:"iPhone"},{theme:"iphone",device:"other"}],dojoMobileCustom:[{theme:"custom",device:"Android"},{theme:"custom",device:"BlackBerry"},
{theme:"custom",device:"iPad"},{theme:"custom",device:"iPhone"},{theme:"custom",device:"other"}],isThemeHTML:function(a){return-1<a.getName().indexOf("dojo-theme-editor.html")},CloneTheme:function(b,e,g,d,h,p){function q(b){var e=[];b.forEach(function(b){b=a.findResource(v+"/"+b);b=(new c(b.getPath())).relativeTo("./"+u,!0);for(var g="..",d=0;d<b.segments.length;d++)g=g+"/"+b.segments[d];e.push(g)});return e}g=[];h.getFile();p=(new c(d)).removeLastSegments(0);p=a.findResource(p.toString());p.readOnly()&&
p.createResource();a.createResource(d,!0);var r=a.findResource(d);h.getFile().getName();var k=(new c(r.getPath())).lastSegment();d=r.createResource(k+".theme");p=r.createResource(k+".css");var u=this.getThemeLocation(),v=h.getFile().parent.getPath(),w=q(h.themeEditorHtmls),n=q(h.meta),x=" ";q(h.files).forEach(function(a){x=x+'@import url("'+a+'");'});b={className:h.className,name:b,version:e||h.version,specVersion:h.specVersion,files:[""+k+".css"],meta:n,themeEditorHtmls:w,useBodyFontBackgroundClass:h.useBodyFontBackgroundClass};
h.helper&&(b.helper=h.helper.declaredClass?h.helper.declaredClass:h.helper);h.base&&(b.base=h.base);h.type&&(b.type=h.type);if(h.conditionalFiles)for(b.conditionalFiles=h.conditionalFiles,h=q(h.conditionalFiles),e=0;e<b.conditionalFiles.length;e++)k=r.createResource(b.conditionalFiles[e]),g.push(k.setContents('@import url("'+h[e]+'");'));h=d.setContents(JSON.stringify(b));h.themeFile=d;g.push(h);g.push(p.setContents(x));return{promise:m(g),themeFile:d}},getHelper:function(a){if(a){if(a.helper&&"string"!=
typeof a.helper)return a.helper;var b=a.helper;if(b){var c=new dojo.Deferred;require([b],function(a){a.declaredClass=b;b=a;c.resolve({helper:b})});return c}}},getThemeSet:function(a){var b=e.getThemeSets(k.getProject()),c=dojo.clone(this.dojoMobileDefault),g;b||(b=this.dojoThemeSets);b=dojo.clone(b);if(a){if(g=a._getDojoJsElem().getAttribute("data-dojo-config"))g=require.eval("({ "+g+" })","data-dojo-config"),g.themeMap&&(c=e.getDojoxMobileThemesFromThemeMap(a,g.themeMap));var d=a.getTheme();if(null==
d)console.error("have no desktop theme, abort!");else for(var h=0,q=b.themeSets.length;h<q;h++)if(g=b.themeSets[h],g.desktopTheme===d.name&&this.themeSetEquals(c,g.mobileTheme))return g}d||(console.error("maq hack, restore desktop theme"),d={name:"claro"});g={name:this.none_themeset_name,desktopTheme:a?d.name:"claro",mobileTheme:c};b.themeSets.push(g);return g},getBase:function(){if(k.singleProjectMode())return k.getProject()},getThemeLocation:function(){var a=this.getBase(),e=b.getPreferences("davinci.ui.ProjectPrefs",
a);return(new c(a)).append(e.themeFolder)},getTheme:function(a,b){b=d.getThemes(k.getProject(),this.workspaceOnly);for(var c=0;c<b.length;c++)if(b[c]&&b[c].name===a)return b[c]},getThemeByCssFile:function(b){var c=d.getThemes(k.getProject(),this.workspaceOnly);b=a.findResource(b.url).getPath();for(var e=0;e<c.length;e++)for(var g=c[e].getFile().getParentFolder().getPath(),h=0;h<c[e].files.length;h++)if(g+"/"+c[e].files[h]===b)return c[e];return null},getDojoxMobileThemeMap:function(a,b){for(var e=
[],g=[".*","iphone",[]],d=0;d<b.length;d++)if(b[d].theme!=this.none_theme&&b[d].theme!=this.default_theme){var h=this.getTheme(b[d].theme);if(h){var q;h.path&&h.path[0]?(q=h.path[0].lastIndexOf("/"),q=new c(h.path[0].substring(0,q+1)+h.files[0])):q=(new c(h.getFile().parent.getPath())).append(h.files[0]);var p=a.getFullResourcePath();q=q.relativeTo(p,!0).toString();b[d].device===this.other_device?g=[".*",h.base,[q]]:e.push([b[d].device,h.base,[q]])}}e.push(g);return e},getDojoxMobileThemesFromThemeMap:function(a,
b){var e=d.getThemes(k.getProject(),this.workspaceOnly),g=[];b.forEach(function(b,d,h){for(h=0;h<e.length;h++){d=e[h];var q=(new c(d.getFile().parent.getPath())).append(d.files[0]),p=a.getFullResourcePath();if(q.relativeTo(p,!0).toString()==b[2][0]){h={};h.device=b[0];h.theme=d.name;".*"===h.device&&(h.device="other");g.push(h);break}}},this);return g},themeSetEquals:function(a,b){function c(a){var b=0,c;for(c in a)a.hasOwnProperty(c)&&b++;return b}if(typeof a!==typeof b)return!1;if("function"===
typeof a)return a.toString()===b.toString();if(a instanceof Object&&b instanceof Object){if(c(a)!==c(b))return!1;var e=!0,g;for(g in a)if(e=this.themeSetEquals(a[g],b[g]),!e)return!1;return!0}return a===b},themeMapsEqual:function(a,b){a=JSON.stringify(a);b=JSON.stringify(b);return a===b},singleMobileTheme:function(a){for(var b=a.mobileTheme[0].theme,c=1;c<a.mobileTheme.length;c++)if(a.mobileTheme[c].theme!=b)return!1;return!0},getThemeSets:function(a){var c=h.getDefaultThemeSet(),g=null;if(c){var d=
!1;if(g=b.getPreferences("maqetta.dojo.themesets",a)){for(var q=!1,p=0;p<g.themeSets.length;p++)if(g.themeSets[p].name===c.name){q=!0;e.themeSetEquals(g.themeSets[p],c)||(g.themeSets[p]=c,d=!0);break}q||(g.themeSets.push(c),d=!0)}else g=e.dojoThemeSets,g.themeSets[0]=c,d=!0;d&&e.saveThemeSets(a,g)}return g},saveThemeSets:function(a,c){b.savePreferences("maqetta.dojo.themesets",a,c)}};e.none_themeset={name:e.none_themeset_name,desktopTheme:"claro",mobileTheme:dojo.clone(e.dojoMobileDefault)};e.default_themeset=
{name:e.desktop_default,desktopTheme:"claro",mobileTheme:dojo.clone(e.dojoMobileDefault)};e.custom_themeset={name:e.mobile_default,desktopTheme:"claro",mobileTheme:e.dojoMobileCustom};e.dojoThemeSets={version:"1.7",specVersion:"0.8",helper:"maq-metadata-dojo/dojox/mobile/ThemeHelper",themeSets:[e.custom_themeset]};return e})},"dijit/form/TextBox":function(){define("dojo/_base/declare dojo/dom-construct dojo/dom-style dojo/_base/kernel dojo/_base/lang dojo/on dojo/sniff ./_FormValueWidget ./_TextBoxMixin dojo/text!./templates/TextBox.html ../main".split(" "),
function(n,m,k,h,d,b,c,g,p,a,e){n=n("dijit.form.TextBox",[g,p],{templateString:a,_singleNodeTemplate:'\x3cinput class\x3d"dijit dijitReset dijitLeft dijitInputField" data-dojo-attach-point\x3d"textbox,focusNode" autocomplete\x3d"off" type\x3d"${type}" ${!nameAttrSetting} /\x3e',_buttonInputDisabled:c("ie")?"disabled":"",baseClass:"dijitTextBox",postMixInProperties:function(){var a=this.type.toLowerCase();if(this.templateString&&"input"==this.templateString.toLowerCase()||("hidden"==a||"file"==a)&&
this.templateString==this.constructor.prototype.templateString)this.templateString=this._singleNodeTemplate;this.inherited(arguments)},postCreate:function(){this.inherited(arguments);9>c("ie")&&this.defer(function(){try{var a=k.getComputedStyle(this.domNode);if(a){var b=a.fontFamily;if(b){var c=this.domNode.getElementsByTagName("INPUT");if(c)for(a=0;a<c.length;a++)c[a].style.fontFamily=b}}}catch(r){}})},_setPlaceHolderAttr:function(a){this._set("placeHolder",a);this._phspan||(this._attachPoints.push("_phspan"),
this._phspan=m.create("span",{className:"dijitPlaceHolder dijitInputField"},this.textbox,"after"),this.own(b(this._phspan,"mousedown",function(a){a.preventDefault()}),b(this._phspan,"touchend, pointerup, MSPointerUp",d.hitch(this,function(){this.focus()}))));this._phspan.innerHTML="";this._phspan.appendChild(this._phspan.ownerDocument.createTextNode(a));this._updatePlaceHolder()},_onInput:function(a){this.inherited(arguments);this._updatePlaceHolder()},_updatePlaceHolder:function(){this._phspan&&
(this._phspan.style.display=this.placeHolder&&!this.textbox.value?"":"none")},_setValueAttr:function(a,b,c){this.inherited(arguments);this._updatePlaceHolder()},getDisplayedValue:function(){h.deprecated(this.declaredClass+"::getDisplayedValue() is deprecated. Use get('displayedValue') instead.","","2.0");return this.get("displayedValue")},setDisplayedValue:function(a){h.deprecated(this.declaredClass+"::setDisplayedValue() is deprecated. Use set('displayedValue', ...) instead.","","2.0");this.set("displayedValue",
a)},_onBlur:function(a){this.disabled||(this.inherited(arguments),this._updatePlaceHolder(),c("mozilla")&&this.selectOnClick&&(this.textbox.selectionStart=this.textbox.selectionEnd=void 0))},_onFocus:function(a){this.disabled||this.readOnly||(this.inherited(arguments),this._updatePlaceHolder())}});9>c("ie")&&(n.prototype._isTextSelected=function(){var a=this.ownerDocument.selection.createRange();return a.parentElement()==this.textbox&&0<a.text.length},e._setSelectionRange=p._setSelectionRange=function(a,
b,c){a.createTextRange&&(a=a.createTextRange(),a.collapse(!0),a.moveStart("character",-99999),a.moveStart("character",b),a.moveEnd("character",c-b),a.select())});return n})},"xide/layout/ContentPane":function(){define("dcl/dcl dojo/_base/array dojo/dom-style dojo/dom-geometry xide/types xide/mixins/EventedMixin xide/_base/_Widget".split(" "),function(n,m,k,h,d,b,c){return n(c,{})})},"dstore/Memory":function(){define("dojo/_base/declare dojo/_base/array ./Store ./Promised ./SimpleQuery ./QueryResults".split(" "),
function(n,m,k,h,d,b){return n([k,h,d],{constructor:function(){this.storage.version=0},postscript:function(){this.inherited(arguments);this.setData(this.data||[])},data:null,autoEmitEvents:!1,getSync:function(b){return this.storage.fullData[this.storage.index[b]]},putSync:function(b,g){g=g||{};var c=this.storage,a=c.index,e=c.fullData,d=this.Model;!d||b instanceof d||(b=this._restore(b));var h=this.getIdentity(b);null==h&&(this._setIdentity(b,"id"in g?g.id:Math.random()),h=this.getIdentity(b));c.version++;
var c=h in a?"update":"add",d={target:b},k;if("update"===c){if(!1===g.overwrite)throw Error("Object already exists");e.splice(k=a[h],1);h=k}else h=this.defaultNewToStart?0:e.length;if("beforeId"in g){var r=g.beforeId;null===r?g=e.length:(g=a[r],k<g&&--g);void 0!==g?d.beforeId=r:(console.error("options.beforeId was specified but no corresponding index was found"),g=h)}else g=h;e.splice(g,0,b);k=isFinite(k)?Math.min(k,g):g;for(g=e.length;k<g;++k)a[this.getIdentity(e[k])]=k;this.emit(c,d);return b},
addSync:function(b,g){(g=g||{}).overwrite=!1;return this.putSync(b,g)},removeSync:function(b){var c=this.storage,d=c.index,c=c.fullData;if(b in d)return d=c.splice(d[b],1)[0],this._reindex(),!0!==this._ignoreChangeEvents&&this.emit("delete",{id:b,target:d}),!0},setData:function(b){this.parse&&(b=this.parse(b));b.items&&(this.idProperty=b.identifier||this.idProperty,b=b.items);this.storage.fullData=this.data=b;this._reindex()},_reindex:function(){for(var b=this.storage,g=b.index={},d=b.fullData,a=
this.Model,e=Object.prototype,h=0,k=d.length;h<k;h++){var m=d[h];if(a&&!(m instanceof a)){var r=this._restore(m,m.__proto__===e);m!==r&&(d[h]=m=r)}g[this.getIdentity(m)]=h}b.version++},fetchSync:function(){var c=this.data;if(!c||c._version!==this.storage.version){for(var c=this.storage.fullData,g=this.queryLog,d=0,a=g.length;d<a;d++)c=g[d].querier(c);c._version=this.storage.version;this.data=c}return new b(c)},fetchRangeSync:function(c){var g=this.fetchSync();return new b(g.slice(c.start,c.end),{totalLength:g.length})},
_includePropertyInSubCollection:function(b){return"data"!==b&&this.inherited(arguments)}})})},"xlog/views/LogGrid":function(){define("xdojo/declare xide/types xgrid/ListRenderer xgrid/Grid xgrid/Defaults xgrid/Focus xgrid/KeyboardNavigation xgrid/Search xgrid/Layout dgrid/OnDemandGrid xide/mixins/EventedMixin xide/utils xaction/DefaultActions xide/widgets/_Widget xlang/i18".split(" "),function(n,m,k,h,d,b,c,g,p,a,e,q,u,w,r){k=h.createGridClass("xlog.views.LogGrid",{options:q.clone(m.DEFAULT_GRID_OPTIONS)},
{SELECTION:!0,KEYBOARD_SELECTION:!0,PAGINATION:m.GRID_FEATURES.PAGINATION,ACTIONS:m.GRID_FEATURES.ACTIONS,CONTEXT_MENU:m.GRID_FEATURES.CONTEXT_MENU,TOOLBAR:m.GRID_FEATURES.TOOLBAR,FILTER:{CLASS:c},SEARCH:{CLASS:g},WIDGET:{CLASS:w}},{RENDERER:k},{},{GRID:a,EDITOR:null,LAYOUT:p,DEFAULTS:d,RENDERER:k,EVENTED:e,FOCUS:b});h=m.ACTION;return n("xlog.views.LogView",k,{rowsPerPage:30,minRowsPerPage:100,delegate:{getStore:function(){},removeStore:function(){}},_columns:{Level:!0,Type:!1,Message:!0,Time:!1},
permissions:[h.RELOAD,h.DELETE,h.LAYOUT,h.COLUMNS,h.SELECTION,h.SAVE,h.SEARCH,h.TOOLBAR],runAction:function(a){var b=this;"File/Reload"===a.command&&(this.delegate.removeStore(this.storeId),this.delegate.getStore(this.storeId).then(function(a){b.collection=a;b.set("collection",b.collection.filter(b.getRootFilter()).sort(b.getDefaultSort()))}));"File/Delete"===a.command&&(this.delegate.empty(this.storeId),this.set("collection",this.collection.filter(this.getRootFilter()).sort(this.getDefaultSort())));
return this.inherited(arguments)},getRootFilter:function(){return{show:!0}},postMixInProperties:function(){this.columns=this.getColumns();return this.inherited(arguments)},getDefaultSort:function(){return[{property:"time",descending:!0}]},getMessageFormatter:function(a,b){var c=this;b.progressHandler&&!b._subscribedToProgress&&(b.progressHandler._on("progress",function(){c.refresh()}),b._subscribedToProgress=!0);var e=null!==b.terminatorMessage&&!0===b._isTerminated;b.terminatorMessage||(e=!0);return e?
a:'\x3cspan class\x3d"fa-spinner fa-spin" style\x3d"margin-right: 4px"\x3e\x3c/span\x3e'+a},getColumns:function(){var a=this,b={Level:{field:"level",label:"Level",sortable:!0,formatter:function(a){switch(a){case "info":return'\x3cspan class\x3d"text-info" style\x3d""\x3e'+a+"\x3c/span\x3e";case "error":return'\x3cspan class\x3d"text-danger" style\x3d""\x3e'+a+"\x3c/span\x3e";case "warn":return'\x3cspan class\x3d"text-warning" style\x3d""\x3e'+a+"\x3c/span\x3e"}return a}},Type:{field:"type",label:"Type",
sortable:!0},Host:{field:"host",label:"Host",sortable:!0},Message:{field:"message",label:"Message",sortable:!0,formatter:function(b,c){return a.getMessageFormatter(b,c)}},Time:{field:"timeStr",label:"Time",sortable:!0,get:function(a){return a.time},formatter:function(a,b){if(!b.timeStr){if(""===a)return a;r.translations.dateFormat&&(a=r.formatDate(a),b.timeStr=a.replace("ms",""))}return b.timeStr}}};this.showSource||delete b.Host;return b},set:function(a,b){var c=this;"collection"==a&&c.addHandle("added",
b._on("added",function(){c.refresh()}));return this.inherited(arguments)},_onMessage:function(a){this._showing?this.isMyLog&&!1===this.isMyLog(a)||this.refresh():this._dirty=!0},onShow:function(){this._dirty&&(this.refresh(),this._dirty=!1);return this.inherited(arguments)},startup:function(){this.addActions(u.getDefaultActions(this.permissions,this));this.inherited(arguments);this.subscribe(m.EVENTS.ON_SERVER_LOG_MESSAGE,this._onMessage);this.resize()}})})},"xide/json/Node":function(){define(["./util",
"./ContextMenu","./appendNodeFactory"],function(n,m,k){function h(b,c){this.editor=b;this.dom={};this.expanded=!1;c&&c instanceof Object?(this.setField(c.field,c.fieldEditable),this.setValue(c.value,c.type)):(this.setField(""),this.setValue(null))}h.prototype._updateEditability=function(){this.editable={field:!0,value:!0};if(this.editor&&(this.editable.field="tree"===this.editor.options.mode,this.editable.value="view"!==this.editor.options.mode,"tree"===this.editor.options.mode&&"function"===typeof this.editor.options.editable)){var b=
this.editor.options.editable({field:this.field,value:this.value,path:this.path(),node:this});"boolean"===typeof b?(this.editable.field=b,this.editable.value=b):("boolean"===typeof b.field&&(this.editable.field=b.field),"boolean"===typeof b.value&&(this.editable.value=b.value))}};h.prototype.path=function(){for(var b=this,c=[];b;){var g=void 0!=b.field?b.field:b.index;void 0!==g&&c.unshift(g);b=b.parent}return c};h.prototype.getPath=function(){return this.path().join(".")};h.prototype.setParent=function(b){this.parent=
b};h.prototype.setField=function(b,c){this.field=b;this.fieldEditable=!0===c};h.prototype.getField=function(){void 0===this.field&&this._getDomField();return this.field};h.prototype.setValue=function(b,c){var g=this.childs;if(g)for(;g.length;)this.removeChild(g[0]);this.type=this._getType(b);if(c&&c!=this.type)if("string"==c&&"auto"==this.type)this.type=c;else throw Error('Type mismatch: cannot cast value of type "'+this.type+' to the specified type "'+c+'"');if("array"==this.type){this.childs=[];
for(var d=0,g=b.length;d<g;d++)c=b[d],void 0===c||c instanceof Function||(c=new h(this.editor,{value:c}),this.appendChild(c));this.value=""}else if("object"==this.type){this.childs=[];for(d in b)b.hasOwnProperty(d)&&(c=b[d],void 0===c||c instanceof Function||!0===this.editor.hiddenFields[d]||!1===this.editor.onAddNode({parent:this,field:d,value:c})||(c=new h(this.editor,{field:d,value:c}),this.appendChild(c)));this.value=""}else this.childs=void 0,this.value=b};h.prototype.getValue=function(){if("array"==
this.type){var b=[];this.childs.forEach(function(c){b.push(c.getValue())});return b}if("object"==this.type){var c={};this.childs.forEach(function(b){c[b.getField()]=b.getValue()});return c}void 0===this.value&&this._getDomValue();return this.value};h.prototype.getLevel=function(){return this.parent?this.parent.getLevel()+1:0};h.prototype.clone=function(){var b=new h(this.editor);b.type=this.type;b.field=this.field;b.fieldInnerText=this.fieldInnerText;b.fieldEditable=this.fieldEditable;b.value=this.value;
b.valueInnerText=this.valueInnerText;b.expanded=this.expanded;if(this.childs){var c=[];this.childs.forEach(function(g){g=g.clone();g.setParent(b);c.push(g)});b.childs=c}else b.childs=void 0;return b};h.prototype.expand=function(b){this.childs&&(this.expanded=!0,this.dom.expand&&(this.dom.expand.className="btn expanded"),this.showChilds(),!1!==b&&this.childs.forEach(function(c){c.expand(b)}),this.editor.onAction({action:"expand",params:{node:this,parent:this.parent}}))};h.prototype.collapse=function(b,
c){if(this.childs&&(this.hideChilds(),!1!==b&&this.childs.forEach(function(g){g.collapse(b,c)}),this.dom.expand&&(this.dom.expand.className="btn collapsed"),this.expanded=!1,!0!==c))this.editor.onAction({action:"collapse",params:{node:this,parent:this.parent}})};h.prototype.showChilds=function(){if(this.childs&&this.expanded){var b=this.dom.tr,c=b?b.parentNode:void 0;if(c){var g=this.getAppend();(b=b.nextSibling)?c.insertBefore(g,b):c.appendChild(g);this.childs.forEach(function(b){c.insertBefore(b.getDom(),
g);b.showChilds()})}}};h.prototype.hide=function(){var b=this.dom.tr,c=b?b.parentNode:void 0;c&&c.removeChild(b);this.hideChilds()};h.prototype.hideChilds=function(){if(this.childs&&this.expanded){var b=this.getAppend();b.parentNode&&b.parentNode.removeChild(b);this.childs.forEach(function(b){b.hide()})}};h.prototype.appendChild=function(b){if(this._hasChilds()){b.setParent(this);b.fieldEditable="object"==this.type;"array"==this.type&&(b.index=this.childs.length);this.childs.push(b);if(this.expanded){var c=
b.getDom(),g=this.getAppend(),d=g?g.parentNode:void 0;g&&d&&d.insertBefore(c,g);b.showChilds()}this.updateDom({updateIndexes:!0});b.updateDom({recurse:!0})}};h.prototype.moveBefore=function(b,c){if(this._hasChilds()){var g=this.dom.tr?this.dom.tr.parentNode:void 0;if(g){var h=document.createElement("tr");h.style.height=g.clientHeight+"px";g.appendChild(h)}b.parent&&b.parent.removeChild(b);c instanceof d?this.appendChild(b):this.insertBefore(b,c);g&&g.removeChild(h)}};h.prototype.moveTo=function(b,
c){b.parent==this&&this.childs.indexOf(b)<c&&c++;this.moveBefore(b,this.childs[c]||this.append)};h.prototype.insertBefore=function(b,c){if(this._hasChilds()){if(c==this.append)b.setParent(this),b.fieldEditable="object"==this.type,this.childs.push(b);else{var g=this.childs.indexOf(c);if(-1==g)throw Error("Node not found");b.setParent(this);b.fieldEditable="object"==this.type;this.childs.splice(g,0,b)}if(this.expanded){var g=b.getDom(),d=(c=c.getDom())?c.parentNode:void 0;c&&d&&d.insertBefore(g,c);
b.showChilds()}this.updateDom({updateIndexes:!0});b.updateDom({recurse:!0})}};h.prototype.insertAfter=function(b,c){this._hasChilds()&&(c=this.childs.indexOf(c),(c=this.childs[c+1])?this.insertBefore(b,c):this.appendChild(b))};h.prototype.search=function(b){var c=[],g,d=b?b.toLowerCase():void 0;delete this.searchField;delete this.searchValue;void 0!=this.field&&(g=String(this.field).toLowerCase().indexOf(d),-1!=g&&(this.searchField=!0,c.push({node:this,elem:"field"})),this._updateDomField());if(this._hasChilds()){if(this.childs){var a=
[];this.childs.forEach(function(c){a=a.concat(c.search(b))});c=c.concat(a)}void 0!=d&&(0==a.length?this.collapse(!1):this.expand(!1))}else void 0!=this.value&&(g=String(this.value).toLowerCase().indexOf(d),-1!=g&&(this.searchValue=!0,c.push({node:this,elem:"value"}))),this._updateDomValue();return c};h.prototype.scrollTo=function(b){if(!this.dom.tr||!this.dom.tr.parentNode)for(var c=this.parent;c;)c.expand(!1),c=c.parent;this.dom.tr&&this.dom.tr.parentNode&&this.editor.scrollTo(this.dom.tr.offsetTop,
b)};h.focusElement=void 0;h.prototype.focus=function(b){h.focusElement=b;if(this.dom.tr&&this.dom.tr.parentNode){var c=this.dom;switch(b){case "drag":c.drag?c.drag.focus():c.menu.focus();break;case "menu":c.menu.focus();break;case "expand":this._hasChilds()?c.expand.focus():c.field&&this.fieldEditable?(c.field.focus(),n.selectContentEditable(c.field)):c.value&&!this._hasChilds()?(c.value.focus(),n.selectContentEditable(c.value)):c.menu.focus();break;case "field":c.field&&this.fieldEditable?(c.field.focus(),
n.selectContentEditable(c.field)):c.value&&!this._hasChilds()?(c.value.focus(),n.selectContentEditable(c.value)):this._hasChilds()?c.expand.focus():c.menu.focus();break;default:c.value&&!this._hasChilds()?(c.value.focus(),n.selectContentEditable(c.value)):c.field&&this.fieldEditable?(c.field.focus(),n.selectContentEditable(c.field)):this._hasChilds()?c.expand.focus():c.menu.focus()}}};h.select=function(b){setTimeout(function(){n.selectContentEditable(b)},0)};h.prototype.blur=function(){this._getDomValue(!1);
this._getDomField(!1)};h.prototype._duplicate=function(b){var c=b.clone();this.insertAfter(c,b);return c};h.prototype.containsNode=function(b){if(this==b)return!0;var c=this.childs;if(c)for(var g=0,d=c.length;g<d;g++)if(c[g].containsNode(b))return!0;return!1};h.prototype._move=function(b,c){if(b!=c){if(b.containsNode(this))throw Error("Cannot move a field into a child of itself");b.parent&&b.parent.removeChild(b);var g=b.clone();b.clearDom();c?this.insertBefore(g,c):this.appendChild(g)}};h.prototype.removeChild=
function(b){if(this.childs){var c=this.childs.indexOf(b);if(-1!=c)return b.hide(),delete b.searchField,delete b.searchValue,b=this.childs.splice(c,1)[0],this.updateDom({updateIndexes:!0}),b}};h.prototype._remove=function(b){this.removeChild(b)};h.prototype.changeType=function(b){var c=this.type;if(c!=b){if("string"!=b&&"auto"!=b||"string"!=c&&"auto"!=c){var g=this.dom.tr?this.dom.tr.parentNode:void 0,d;d=(d=this.expanded?this.getAppend():this.getDom())&&d.parentNode?d.nextSibling:void 0;this.hide();
this.clearDom();this.type=b;if("object"==b){if(this.childs||(this.childs=[]),this.childs.forEach(function(a,b){a.clearDom();delete a.index;a.fieldEditable=!0;void 0==a.field&&(a.field="")}),"string"==c||"auto"==c)this.expanded=!0}else if("array"==b){if(this.childs||(this.childs=[]),this.childs.forEach(function(a,b){a.clearDom();a.fieldEditable=!1;a.index=b}),"string"==c||"auto"==c)this.expanded=!0}else this.expanded=!1;g&&(d?g.insertBefore(this.getDom(),d):g.appendChild(this.getDom()));this.showChilds()}else this.type=
b;if("auto"==b||"string"==b)this.value="string"==b?String(this.value):this._stringCast(String(this.value)),this.focus();this.updateDom({updateIndexes:!0})}};h.prototype._getDomValue=function(b){this.dom.value&&"array"!=this.type&&"object"!=this.type&&(this.valueInnerText=n.getInnerText(this.dom.value));if(void 0!=this.valueInnerText)try{var c;if("string"==this.type)c=this._unescapeHTML(this.valueInnerText);else{var g=this._unescapeHTML(this.valueInnerText);c=this._stringCast(g)}if(c!==this.value){var d=
this.value;this.value=c;this.editor._onAction("editValue",{node:this,oldValue:d,newValue:c,oldSelection:this.editor.selection,newSelection:this.editor.getSelection()})}}catch(a){if(this.value=void 0,!0!==b)throw a;}};h.prototype._updateDomValue=function(){var b=this.dom.value;if(b){var c=this.value,g="auto"==this.type?n.type(c):this.type,d="string"==g&&n.isUrl(c),a="",a=d&&!this.editable.value?"":"string"==g?"green":"number"==g?"red":"boolean"==g?"darkorange":this._hasChilds()?"":null===c?"#004ED0":
"black";b.style.color=a;""==String(this.value)&&"array"!=this.type&&"object"!=this.type?n.addClassName(b,"empty"):n.removeClassName(b,"empty");d?n.addClassName(b,"url"):n.removeClassName(b,"url");"array"==g||"object"==g?b.title=this.type+" containing "+(this.childs?this.childs.length:0)+" items":"string"==g&&n.isUrl(c)?this.editable.value&&(b.title="Ctrl+Click or Ctrl+Enter to open url in new window"):b.title="";this.searchValueActive?n.addClassName(b,"highlight-active"):n.removeClassName(b,"highlight-active");
this.searchValue?n.addClassName(b,"highlight"):n.removeClassName(b,"highlight");n.stripFormatting(b)}};h.prototype._updateDomField=function(){var b=this.dom.field;b&&(""==String(this.field)&&"array"!=this.parent.type?n.addClassName(b,"empty"):n.removeClassName(b,"empty"),this.searchFieldActive?n.addClassName(b,"highlight-active"):n.removeClassName(b,"highlight-active"),this.searchField?n.addClassName(b,"highlight"):n.removeClassName(b,"highlight"),n.stripFormatting(b))};h.prototype._getDomField=function(b){this.dom.field&&
this.fieldEditable&&(this.fieldInnerText=n.getInnerText(this.dom.field));if(void 0!=this.fieldInnerText)try{var c=this._unescapeHTML(this.fieldInnerText);if(c!==this.field){var g=this.field;this.field=c;this.editor._onAction("editField",{node:this,oldValue:g,newValue:c,oldSelection:this.editor.selection,newSelection:this.editor.getSelection()})}}catch(p){if(this.field=void 0,!0!==b)throw p;}};h.prototype.clearDom=function(){this.dom={}};h.prototype.getDom=function(){var b=this.dom;if(b.tr)return b.tr;
this._updateEditability();b.tr=document.createElement("tr");b.tr.node=this;if("tree"===this.editor.options.mode){var c=document.createElement("td");if(this.editable.field&&this.parent){var g=document.createElement("button");b.drag=g;g.className="dragarea";g.title="Drag to move this field (Alt+Shift+Arrows)";c.appendChild(g)}b.tr.appendChild(c);c=document.createElement("td");g=document.createElement("button");b.menu=g;g.className="contextmenu";g.title="Click to open the actions menu (Ctrl+M)";c.appendChild(b.menu);
b.tr.appendChild(c)}c=document.createElement("td");b.tr.appendChild(c);b.tree=this._createDomTree();c.appendChild(b.tree);this.updateDom({updateIndexes:!0});this.editor._emit("renderNode",this);return b.tr};h.prototype._onDragStart=function(b){var c=this;this.mousemove||(this.mousemove=n.addEventListener(document,"mousemove",function(b){c._onDrag(b)}));this.mouseup||(this.mouseup=n.addEventListener(document,"mouseup",function(b){c._onDragEnd(b)}));this.editor.highlighter.lock();this.drag={oldCursor:document.body.style.cursor,
startParent:this.parent,startIndex:this.parent.childs.indexOf(this),mouseX:b.pageX,level:this.getLevel()};document.body.style.cursor="move";b.preventDefault()};h.prototype._onDrag=function(b){var c=b.pageY,g=b.pageX,p,a,e,q,k,m,r=!1;p=this.dom.tr;a=n.getAbsoluteTop(p);q=p.offsetHeight;if(c<a){a=p;do a=a.previousSibling,k=h.getNodeFromTarget(a),m=a?n.getAbsoluteTop(a):0;while(a&&c<m);k&&!k.parent&&(k=void 0);k||(a=(p=p.parentNode.firstChild)?p.nextSibling:void 0,k=h.getNodeFromTarget(a),k==this&&(k=
void 0));k&&(m=(a=k.dom.tr)?n.getAbsoluteTop(a):0,c>m+q&&(k=void 0));k&&(k.parent.moveBefore(this,k),r=!0)}else if(p=(q=this.expanded&&this.append?this.append.getDom():this.dom.tr)?q.nextSibling:void 0){m=n.getAbsoluteTop(p);e=p;do p=h.getNodeFromTarget(e),e&&(k=e.nextSibling?n.getAbsoluteTop(e.nextSibling):0,k=e?k-m:0,1==p.parent.childs.length&&p.parent.childs[0]==this&&(a+=23)),e=e.nextSibling;while(e&&c>a+k);if(p&&p.parent){m=this.drag.level+Math.round((g-this.drag.mouseX)/24/2);e=p.getLevel();
for(a=p.dom.tr.previousSibling;e<m&&a;){k=h.getNodeFromTarget(a);if(k!=this&&!k._isChildOf(this))if(k instanceof d)if(k=k.parent.childs,1<k.length||1==k.length&&k[0]!=this)p=h.getNodeFromTarget(a),e=p.getLevel();else break;else break;a=a.previousSibling}q.nextSibling!=p.dom.tr&&(p.parent.moveBefore(this,p),r=!0)}}r&&(this.drag.mouseX=g,this.drag.level=this.getLevel());this.editor.startAutoScroll(c);b.preventDefault()};h.prototype._onDragEnd=function(b){var c={node:this,startParent:this.drag.startParent,
startIndex:this.drag.startIndex,endParent:this.parent,endIndex:this.parent.childs.indexOf(this)};c.startParent==c.endParent&&c.startIndex==c.endIndex||this.editor._onAction("moveNode",c);document.body.style.cursor=this.drag.oldCursor;this.editor.highlighter.unlock();delete this.drag;this.mousemove&&(n.removeEventListener(document,"mousemove",this.mousemove),delete this.mousemove);this.mouseup&&(n.removeEventListener(document,"mouseup",this.mouseup),delete this.mouseup);this.editor.stopAutoScroll();
b.preventDefault()};h.prototype._isChildOf=function(b){for(var c=this.parent;c;){if(c==b)return!0;c=c.parent}return!1};h.prototype._createDomField=function(){return document.createElement("div")};h.prototype.setHighlight=function(b){this.dom.tr&&(this.dom.tr.className=b?"highlight":"",this.append&&this.append.setHighlight(b),this.childs&&this.childs.forEach(function(c){c.setHighlight(b)}))};h.prototype.updateValue=function(b){this.value=b;this.updateDom()};h.prototype.updateField=function(b){this.field=
b;this.updateDom()};h.prototype.updateDom=function(b){var c=this.dom.tree;c&&(c.style.marginLeft=24*this.getLevel()+"px");if(c=this.dom.field){this.fieldEditable?(c.contentEditable=this.editable.field,c.spellcheck=!1,c.className="field"):c.className="readonly";var g;g=void 0!=this.index?this.index:void 0!=this.field?this.field:this._hasChilds()?this.type:"";c.innerHTML=this._escapeHTML(g)}if(c=this.dom.value)g=this.childs?this.childs.length:0,c.innerHTML="array"==this.type?"["+g+"]":"object"==this.type?
"{"+g+"}":this._escapeHTML(this.value);this._updateDomField();this._updateDomValue();b&&!0===b.updateIndexes&&this._updateDomIndexes();b&&!0===b.recurse&&this.childs&&this.childs.forEach(function(c){c.updateDom(b)});this.append&&this.append.updateDom()};h.prototype._updateDomIndexes=function(){var b=this.childs;this.dom.value&&b&&("array"==this.type?b.forEach(function(b,g){b.index=g;if(b=b.dom.field)b.innerHTML=g}):"object"==this.type&&b.forEach(function(b){void 0!=b.index&&(delete b.index,void 0==
b.field&&(b.field=""))}))};h.prototype._createDomValue=function(){var b;"array"==this.type?(b=document.createElement("div"),b.className="readonly",b.innerHTML="[...]"):"object"==this.type?(b=document.createElement("div"),b.className="readonly",b.innerHTML="{...}"):(!this.editable.value&&n.isUrl(this.value)?(b=document.createElement("a"),b.className="value",b.href=this.value,b.target="_blank"):(b=document.createElement("div"),b.contentEditable=this.editable.value,b.spellcheck=!1,b.className="value"),
b.innerHTML=this._escapeHTML(this.value));return b};h.prototype._createDomExpandButton=function(){var b=document.createElement("button");this._hasChilds()?(b.className=this.expanded?"btn expanded":"btn collapsed",b.title="Click to expand/collapse this field (Ctrl+E). \nCtrl+Click to expand/collapse including all childs."):(b.className="invisible",b.title="");return b};h.prototype._createDomTree=function(){var b=this.dom,c=document.createElement("table"),g=document.createElement("tbody");c.style.borderCollapse=
"collapse";c.className="values";c.appendChild(g);var d=document.createElement("tr");g.appendChild(d);g=document.createElement("td");g.className="tree";d.appendChild(g);b.expand=this._createDomExpandButton();g.appendChild(b.expand);b.tdExpand=g;g=document.createElement("td");g.className="tree";d.appendChild(g);b.field=this._createDomField();g.appendChild(b.field);b.tdField=g;g=document.createElement("td");g.className="tree";d.appendChild(g);"object"!=this.type&&"array"!=this.type&&(g.appendChild(document.createTextNode(":")),
g.className="separator");b.tdSeparator=g;g=document.createElement("td");g.className="tree";d.appendChild(g);b.value=this._createDomValue();g.appendChild(b.value);b.tdValue=g;return c};h.prototype.onEvent=function(b){var c=b.type,g=b.target||b.srcElement,d=this.dom,a=this,e=this._hasChilds();if(g==d.drag||g==d.menu)"mouseover"==c?this.editor.highlighter.highlight(this):"mouseout"==c&&this.editor.highlighter.unhighlight();"mousedown"==c&&g==d.drag&&this._onDragStart(b);if("click"==c&&g==d.menu){var h=
a.editor.highlighter;h.highlight(a);h.lock();n.addClassName(d.menu,"selected");this.showContextMenu(d.menu,function(){n.removeClassName(d.menu,"selected");h.unlock();h.unhighlight()})}"click"==c&&g==d.expand&&e&&this._onExpand(b.ctrlKey);var k=d.value;if(g==k)switch(c){case "blur":case "change":this._getDomValue(!0);this._updateDomValue();this.value&&(k.innerHTML=this._escapeHTML(this.value));break;case "input":this._getDomValue(!0);this._updateDomValue();break;case "keydown":case "mousedown":this.editor.selection=
this.editor.getSelection();break;case "click":(b.ctrlKey||!this.editable.value)&&n.isUrl(this.value)&&window.open(this.value,"_blank");break;case "keyup":this._getDomValue(!0);this._updateDomValue();break;case "cut":case "paste":setTimeout(function(){a._getDomValue(!0);a._updateDomValue()},1)}var m=d.field;if(g==m)switch(c){case "blur":case "change":this._getDomField(!0);this._updateDomField();this.field&&(m.innerHTML=this._escapeHTML(this.field));break;case "input":this._getDomField(!0);this._updateDomField();
break;case "keydown":case "mousedown":this.editor.selection=this.editor.getSelection();break;case "keyup":this._getDomField(!0);this._updateDomField();break;case "cut":case "paste":setTimeout(function(){a._getDomField(!0);a._updateDomField()},1)}if(g==d.tree.parentNode)switch(c){case "click":(void 0!=b.offsetX?b.offsetX<24*(this.getLevel()+1):b.pageX<n.getAbsoluteLeft(d.tdSeparator))||e?m&&(n.setEndOfContentEditable(m),m.focus()):k&&(n.setEndOfContentEditable(k),k.focus())}if(g==d.tdExpand&&!e||g==
d.tdField||g==d.tdSeparator)switch(c){case "click":m&&(n.setEndOfContentEditable(m),m.focus())}if("keydown"==c)this.onKeyDown(b)};h.prototype.onKeyDown=function(b){var c=b.which||b.keyCode,g=b.target||b.srcElement,p=b.ctrlKey,a=b.shiftKey,e=b.altKey,q=!1,k="tree"===this.editor.options.mode;13==c?g==this.dom.value?this.editable.value&&!b.ctrlKey||!n.isUrl(this.value)||(window.open(this.value,"_blank"),q=!0):g==this.dom.expand&&this._hasChilds()&&(this._onExpand(b.ctrlKey),g.focus(),q=!0):68==c?p&&
k&&(this._onDuplicate(),q=!0):69==c?p&&(this._onExpand(a),g.focus(),q=!0):77==c&&k?p&&(this.showContextMenu(g),q=!0):46==c&&k?p&&(this._onRemove(),q=!0):45==c&&k?p&&!a?(this._onInsertBefore(),q=!0):p&&a&&(this._onInsertAfter(),q=!0):35==c?e&&((q=this._lastNode())&&q.focus(h.focusElement||this._getElementName(g)),q=!0):36==c?e&&((q=this._firstNode())&&q.focus(h.focusElement||this._getElementName(g)),q=!0):37==c?e&&!a?((g=this._previousElement(g))&&this.focus(this._getElementName(g)),q=!0):e&&a&&k&&
(this.expanded?p=(c=this.getAppend())?c.nextSibling:void 0:(c=this.getDom(),p=c.nextSibling),p&&(c=h.getNodeFromTarget(p),p=p.nextSibling,p=h.getNodeFromTarget(p),c&&c instanceof d&&1!=this.parent.childs.length&&p&&p.parent&&(p.parent.moveBefore(this,p),this.focus(h.focusElement||this._getElementName(g))))):38==c?e&&!a?((c=this._previousNode())&&c.focus(h.focusElement||this._getElementName(g)),q=!0):e&&a&&((c=this._previousNode())&&c.parent&&(c.parent.moveBefore(this,c),this.focus(h.focusElement||
this._getElementName(g))),q=!0):39==c?e&&!a?((g=this._nextElement(g))&&this.focus(this._getElementName(g)),q=!0):e&&a&&(c=this.getDom(),(c=c.previousSibling)&&(c=h.getNodeFromTarget(c))&&c.parent&&c instanceof d&&!c.isVisible()&&(c.parent.moveBefore(this,c),this.focus(h.focusElement||this._getElementName(g)))):40==c&&(e&&!a?((c=this._nextNode())&&c.focus(h.focusElement||this._getElementName(g)),q=!0):e&&a&&k&&(p=(c=this.expanded?this.append?this.append._nextNode():void 0:this._nextNode())?c.getDom():
void 0,p=1==this.parent.childs.length?p:p?p.nextSibling:void 0,(p=h.getNodeFromTarget(p))&&p.parent&&(p.parent.moveBefore(this,p),this.focus(h.focusElement||this._getElementName(g))),q=!0));q&&(b.preventDefault(),b.stopPropagation())};h.prototype._onExpand=function(b){if(b){var c=this.dom.tr.parentNode,g=c.parentNode,d=g.scrollTop;g.removeChild(c)}this.expanded?this.collapse(b):this.expand(b);b&&(g.appendChild(c),g.scrollTop=d)};h.prototype._onRemove=function(){this.editor.highlighter.unhighlight();
var b=this.parent.childs,c=b.indexOf(this),g=this.editor.getSelection();b[c+1]?b[c+1].focus():b[c-1]?b[c-1].focus():this.parent.focus();b=this.editor.getSelection();this.parent._remove(this);this.editor._onAction("removeNode",{node:this,parent:this.parent,index:c,oldSelection:g,newSelection:b})};h.prototype._onDuplicate=function(){var b=this.editor.getSelection(),c=this.parent._duplicate(this);c.focus();var g=this.editor.getSelection();this.editor._onAction("duplicateNode",{node:this,clone:c,parent:this.parent,
oldSelection:b,newSelection:g})};h.prototype._onInsertBefore=function(b,c,g){var d=this.editor.getSelection();b=new h(this.editor,{field:void 0!=b?b:"",value:void 0!=c?c:"",type:g});b.expand(!0);this.parent.insertBefore(b,this);this.editor.highlighter.unhighlight();b.focus("field");c=this.editor.getSelection();this.editor._onAction("insertBeforeNode",{node:b,beforeNode:this,parent:this.parent,oldSelection:d,newSelection:c})};h.prototype._onInsertAfter=function(b,c,g){var d=this.editor.getSelection();
b=new h(this.editor,{field:void 0!=b?b:"",value:void 0!=c?c:"",type:g});b.expand(!0);this.parent.insertAfter(b,this);this.editor.highlighter.unhighlight();b.focus("field");c=this.editor.getSelection();this.editor._onAction("insertAfterNode",{node:b,afterNode:this,parent:this.parent,oldSelection:d,newSelection:c})};h.prototype._onAppend=function(b,c,g){var d=this.editor.getSelection();b=new h(this.editor,{field:void 0!=b?b:"",value:void 0!=c?c:"",type:g});b.expand(!0);this.parent.appendChild(b);this.editor.highlighter.unhighlight();
b.focus("field");c=this.editor.getSelection();this.editor._onAction("appendNode",{node:b,parent:this.parent,oldSelection:d,newSelection:c})};h.prototype._onChangeType=function(b){var c=this.type;if(b!=c){var g=this.editor.getSelection();this.changeType(b);var d=this.editor.getSelection();this.editor._onAction("changeType",{node:this,oldType:c,newType:b,oldSelection:g,newSelection:d})}};h.prototype._onSort=function(b){if(this._hasChilds()){var c="desc"==b?-1:1,g="array"==this.type?"value":"field";
this.hideChilds();b=this.childs;var d=this.sort;this.childs=this.childs.concat();this.childs.sort(function(a,b){return a[g]>b[g]?c:a[g]<b[g]?-c:0});this.sort=1==c?"asc":"desc";this.editor._onAction("sort",{node:this,oldChilds:b,oldSort:d,newChilds:this.childs,newSort:this.sort});this.showChilds()}};h.prototype.getAppend=function(){this.append||(this.append=new d(this.editor),this.append.setParent(this));return this.append.getDom()};h.getNodeFromTarget=function(b){for(;b;){if(b.node)return b.node;
b=b.parentNode}};h.prototype._previousNode=function(){var b=null,c=this.getDom();if(c&&c.parentNode){do c=c.previousSibling,b=h.getNodeFromTarget(c);while(c&&b instanceof d&&!b.isVisible())}return b};h.prototype._nextNode=function(){var b=null,c=this.getDom();if(c&&c.parentNode){do c=c.nextSibling,b=h.getNodeFromTarget(c);while(c&&b instanceof d&&!b.isVisible())}return b};h.prototype._firstNode=function(){var b=null,c=this.getDom();c&&c.parentNode&&(b=h.getNodeFromTarget(c.parentNode.firstChild));
return b};h.prototype._lastNode=function(){var b=null,c=this.getDom();if(c&&c.parentNode)for(c=c.parentNode.lastChild,b=h.getNodeFromTarget(c);c&&b instanceof d&&!b.isVisible();)c=c.previousSibling,b=h.getNodeFromTarget(c);return b};h.prototype._previousElement=function(b){var c=this.dom;switch(b){case c.value:if(this.fieldEditable)return c.field;case c.field:if(this._hasChilds())return c.expand;case c.expand:return c.menu;case c.menu:if(c.drag)return c.drag;default:return null}};h.prototype._nextElement=
function(b){var c=this.dom;switch(b){case c.drag:return c.menu;case c.menu:if(this._hasChilds())return c.expand;case c.expand:if(this.fieldEditable)return c.field;case c.field:if(!this._hasChilds())return c.value;default:return null}};h.prototype._getElementName=function(b){var c=this.dom,g;for(g in c)if(c.hasOwnProperty(g)&&c[g]==b)return g;return null};h.prototype._hasChilds=function(){return"array"==this.type||"object"==this.type};h.TYPE_TITLES={auto:'Field type "auto". The field type is automatically determined from the value and can be a string, number, boolean, or null.',
object:'Field type "object". An object contains an unordered set of key/value pairs.',array:'Field type "array". An array contains an ordered collection of values.',string:'Field type "string". Field type is not determined from the value, but always returned as string.'};h.prototype.showContextMenu=function(b,c){var g=this,d=h.TYPE_TITLES,a=[];this.editable.value&&a.push({text:"Type",title:"Change the type of this field",className:"type-"+this.type,submenu:[{text:"Auto",className:"type-auto"+("auto"==
this.type?" selected":""),title:d.auto,click:function(){g._onChangeType("auto")}},{text:"Array",className:"type-array"+("array"==this.type?" selected":""),title:d.array,click:function(){g._onChangeType("array")}},{text:"Object",className:"type-object"+("object"==this.type?" selected":""),title:d.object,click:function(){g._onChangeType("object")}},{text:"String",className:"type-string"+("string"==this.type?" selected":""),title:d.string,click:function(){g._onChangeType("string")}}]});if(this._hasChilds()){var e=
"asc"==this.sort?"desc":"asc";a.push({text:"Sort",title:"Sort the childs of this "+this.type,className:"sort-"+e,click:function(){g._onSort(e)},submenu:[{text:"Ascending",className:"sort-asc",title:"Sort the childs of this "+this.type+" in ascending order",click:function(){g._onSort("asc")}},{text:"Descending",className:"sort-desc",title:"Sort the childs of this "+this.type+" in descending order",click:function(){g._onSort("desc")}}]})}if(this.parent&&this.parent._hasChilds()){a.length&&a.push({type:"separator"});
var q=g.parent.childs;g==q[q.length-1]&&a.push({text:"Append",title:"Append a new field with type 'auto' after this field (Ctrl+Shift+Ins)",submenuTitle:"Select the type of the field to be appended",className:"append",click:function(){g._onAppend("","","auto")},submenu:[{text:"Auto",className:"type-auto",title:d.auto,click:function(){g._onAppend("","","auto")}},{text:"Array",className:"type-array",title:d.array,click:function(){g._onAppend("",[])}},{text:"Object",className:"type-object",title:d.object,
click:function(){g._onAppend("",{})}},{text:"String",className:"type-string",title:d.string,click:function(){g._onAppend("","","string")}}]});a.push({text:"Insert",title:"Insert a new field with type 'auto' before this field (Ctrl+Ins)",submenuTitle:"Select the type of the field to be inserted",className:"insert",click:function(){g._onInsertBefore("","","auto")},submenu:[{text:"Auto",className:"type-auto",title:d.auto,click:function(){g._onInsertBefore("","","auto")}},{text:"Array",className:"type-array",
title:d.array,click:function(){g._onInsertBefore("",[])}},{text:"Object",className:"type-object",title:d.object,click:function(){g._onInsertBefore("",{})}},{text:"String",className:"type-string",title:d.string,click:function(){g._onInsertBefore("","","string")}}]});this.editable.field&&(a.push({text:"Duplicate",title:"Duplicate this field (Ctrl+D)",className:"duplicate",click:function(){g._onDuplicate()}}),a.push({text:"Remove",title:"Remove this field (Ctrl+Del)",className:"remove",click:function(){g._onRemove()}}))}(new m(a,
{close:c})).show(b)};h.prototype._getType=function(b){return b instanceof Array?"array":b instanceof Object?"object":"string"==typeof b&&"string"!=typeof this._stringCast(b)?"string":"auto"};h.prototype._stringCast=function(b){var c=b.toLowerCase(),g=Number(b),d=parseFloat(b);return""==b?"":"null"==c?null:"true"==c?!0:"false"==c?!1:isNaN(g)||isNaN(d)?b:g};h.prototype._escapeHTML=function(b){b=String(b).replace(/</g,"\x26lt;").replace(/>/g,"\x26gt;").replace(/  /g," \x26nbsp;").replace(/^ /,"\x26nbsp;").replace(/ $/,
"\x26nbsp;");b=JSON.stringify(b);return b.substring(1,b.length-1)};h.prototype._unescapeHTML=function(b){b='"'+this._escapeJSON(b)+'"';return n.parse(b).replace(/&lt;/g,"\x3c").replace(/&gt;/g,"\x3e").replace(/&nbsp;|\u00A0/g," ")};h.prototype._escapeJSON=function(b){for(var c="",g=0,d=b.length;g<d;){var a=b.charAt(g);"\n"==a?c+="\\n":"\\"==a?(c+=a,g++,a=b.charAt(g),-1=='"\\/bfnrtu'.indexOf(a)&&(c+="\\"),c+=a):c='"'==a?c+'\\"':c+a;g++}return c};var d=k(h);return h})},"davinci/ve/commands/ModifyRichTextCommand":function(){define(["dojo/_base/declare"],
function(n){return n("davinci.ve.commands.ModifyRichTextCommand",null,{name:"modify",constructor:function(m,k,h,d){this._oldId=m?m.id:void 0;this._properties=k=k||{};k.richText?(this._richText=!0,this._children=this._newText=k.richText,delete k.richText):this._children=k._children;this._context=d||m.getContext()},setContext:function(m){this._context=m},add:function(m){m&&m._oldId==this._oldId&&(m._properties&&dojo.mixin(this._properties,m._properties),m._children&&(this._children=m._children))},execute:function(){if(this._oldId&&
this._properties){var m=require("davinci/ve/widget"),k=m.byId(this._oldId);if(k){this._parentWidget=k.getParent();this._oldText||(this._oldText=k._srcElement.getElementText(this._context))&&"string"==typeof this._oldText&&(this._oldText=this._oldText.replace(/\n/g,""));this._oldData||(this._oldData=k.getData(),this._oldData.context=this._context,this._newData={type:this._oldData.type,properties:dojo.mixin({},this._oldData.properties,this._properties),children:this._newText,maqStates:this._oldData.maqStates,
maqDeltas:this._oldData.maqDeltas,context:this._context},this._oldData={type:this._oldData.type,properties:dojo.mixin({},this._oldData.properties,this._properties),children:this._oldText,maqStates:this._oldData.maqStates,maqDeltas:this._oldData.maqDeltas,context:this._context});var h=this._context;h&&h.detach(k);this._properties.id&&delete this._newData.properties.isTempID;this._newId_isTempID||(this._newId_isTempID=this._newData.properties.isTempID);this._oldId_isTempID||(this._oldId_isTempID=this._oldData.properties.isTempID);
var d=null,b=this._parentWidget.indexOf(k);this._parentWidget.removeChild(k);k.destroyWidget();this._newId&&(this._newData.properties.id=this._newId);this._newId_isTempID&&(this._newData.properties.isTempID=this._newId_isTempID);if(d=m.createWidget(this._newData))this._parentWidget.addChild(d,b),this._newId=d.id,this._context&&this._refresh(d),h&&(h.widgetAddedOrDeleted(),this._oldId!=this._newId&&h.widgetChanged(h.WIDGET_ID_CHANGED,d,this._oldId),h.widgetChanged(h.WIDGET_MODIFIED,d)),this.newWidget=
d,dojo.publish("/davinci/ui/widget/replaced",[d,k]),require("davinci/ve/States").resetState(d.domNode)}}},undo:function(){if(this._newId&&this._oldData){var m=require("davinci/ve/widget"),k=m.byId(this._newId);if(k){var h=dojo.indexOf(this._parentWidget.getChildren(),k);if(!(0>h)){var d=this._parentWidget.getContext();d&&d.detach(k);this._parentWidget.removeChild(k);k.destroyWidget();this._oldData.children=this._oldText;this._oldData.properties.id=this._oldId;m=m.createWidget(this._oldData);this._parentWidget.addChild(m,
h);d&&this._refresh(m);d.widgetAddedOrDeleted();d.widgetChanged(d.WIDGET_MODIFIED,m);dojo.publish("/davinci/ui/widget/replaced",[m,k]);require("davinci/ve/States").resetState(m.domNode)}}}},_refresh:function(m){var k=m.getContainerNode();k&&this._context.getGlobal().require("dojo/parser").parse(k);this._context.attach(m);m.startup();m.renderWidget();k&&this._context._attachChildren(k)}})})},"xide/data/ObservableStore":function(){define(["dojo/_base/declare","xide/mixins/EventedMixin","xide/lodash"],
function(n,m,k){return n("xide/data/Observable",m,{_ignoreChangeEvents:!0,observedProperties:[],putSync:function(h,d){this.silent(!d);var b=this.inherited(arguments),c=this;!1!==d&&this.emit("added",b);b&&!b._store&&Object.defineProperty(b,"_store",{get:function(){return c}});this._observe(b);this.silent(!1);return b},removeSync:function(h,d){this.silent(d);var b=this.getSync(h);b&&b.onRemove&&b.onRemove();b=this.inherited(arguments);this.silent(!1);return b},_onItemChanged:function(h,d,b,c){this._ignoreChangeEvents||
(d={target:h,property:d,value:b,source:c},this.emit("update",d),h.onItemChanged&&h.onItemChanged(d))},_observe:function(h){var d=this.observedProperties;h.observed&&(d=d.concat(h.observed));k.each(d,function(b){h.property&&h.property(b).observe(function(c){this._onItemChanged(h,b,c,this)}.bind(this))}.bind(this))},setData:function(h){var d=this.inherited(arguments);this.silent(!0);h&&k.each(h,this._observe,this);this.silent(!1);return d}})})},"davinci/ui/widgets/OpenFile":function(){define("dojo/_base/declare dijit/_Templated dijit/_Widget davinci/library system/resource davinci/workbench/Preferences davinci/Runtime davinci/Workbench dijit/Menu dijit/MenuItem davinci/model/Path dijit/form/DropDownButton davinci/lang/ui dijit/lang/_common dijit/form/Button dijit/form/TextBox dijit/form/RadioButton dijit/layout/ContentPane dijit/Tree".split(" "),
function(n,m,k,h,d,b,c,g,p,a,e,q,u,w){return n("davinci.ui.widgets.OpenFile",[k,m],{widgetsInTemplate:!0,fileDialogFileName:null,fileDialogParentFolder:null,postMixInProperties:function(){dojo.mixin(this,u);dojo.mixin(this,w);this.inherited(arguments)},postCreate:function(){this.inherited(arguments);this.fileTree.watch("selectedItem",dojo.hitch(this,this._updateFields));this._value||this._setValueAttr(this._getForcedRootAttr())},startup:function(){this.fileTree.startup()},_setValueAttr:function(a){a!=
this._value&&(this._value=a,this.fileTree.set("selectedItems",[a]))},_getForcedRootAttr:function(){return this._forcedRoot||d.findResource(g.getProject())},_setForcedRootAttr:function(a){this._forcedRoot=a},_updateFields:function(){var a=this.fileTree.get("selectedItems"),a=null!=a&&0<a.length?a[0]:null;dojo.attr(this._okButton,"disabled",!0);null!=a&&"File"==a.elementType&&dojo.attr(this._okButton,"disabled",!1)},_okButton:function(){this.value=this.fileTree.get("selectedItems")[0]},_onDblClick:function(a){this._okButton();
this.onExecute()},_onKeyPress:function(a){a.which==dojo.keys.ENTER&&(this._okButton(),this.onExecute())},_getValueAttr:function(){return this.value},_cancelButton:function(){this.onClose()},resize:function(a){this.contentpane.resize(a)},onExecute:function(){},onClose:function(){}})})},"xcf/manager/DriverManager":function(){define("dcl/dcl dojo/_base/declare dojo/_base/lang dojo/_base/json xide/types xcf/types/Types xide/utils xcf/manager/BeanManager xcf/model/Variable xcf/manager/DriverManager_Server xide/data/TreeMemory xide/data/ObservableStore dstore/Trackable xdojo/has xcf/model/Driver xide/manager/ServerActionBase xide/data/Reference dojo/Deferred xide/mixins/ReloadMixin xide/mixins/EventedMixin xdojo/has!xcf-ui?./DriverManager_UI xdojo/has!xcf-ui?xide/views/_CIDialog".split(" "),
function(n,m,k,h,d,b,c,g,p,a,e,q,u,w,r,v,x,A,z,y,B,C){k=[v,g,a];w("runDrivers");k.push(B);return n(k,{beanName:"Driver",beanUrlPattern:"{id}",breanScheme:"driver://",onStoreCreated:function(a){var b=a.type;a=a.store;var c=a.query({isDir:!1});if(b===d.ITEM_TYPE.DRIVER)for(b=0;b<c.length;b++){var e=c[b];null==e._completed&&"Default"!==e.name&&(e._completed=!0,this.completeDriver(a,e,e))}},removeDriverInstance:function(a,b){try{this.getContext().getDeviceManager().toDeviceControlInfo(b);var c=this.getDriverById(a.device.info.driverId),
e=c._store,g=c.path,d=g+"_instances_instance_"+b.path,h=e.getSync(d);h&&e.removeSync(d);var q=_.find(c.instances,{path:d});q&&c.instances.remove(q);b.removeReference(h);h&&(h.refresh(),e.getSync(g+"_instances").refresh())}catch(O){logError(O,"error removing driver instance")}},createDriverBlockScope:function(a){var b=c.clone(a.blox&&a.blox.blocks?a.blox.blocks:[]);return a.blockScope=this.ctx.getBlockManager().createScope({id:a.id,device:null,driver:a,instance:null,ctx:this.ctx,getContext:function(){return this.instance}},
b,function(b){b&&console.error(b+" : in "+a.name+" , re-save driver!")})},addDeviceInstance:function(a,b){},declaredClass:"xcf.manager.DriverManager",beanNamespace:"driver",beanName:"Driver",beanIconClass:"fa-exchange",groupType:d.ITEM_TYPE.DRIVER_GROUP,itemType:d.ITEM_TYPE.DRIVER,itemMetaTitleField:d.DRIVER_PROPERTY.CF_DRIVER_NAME,defaultScope:"system_drivers",serviceClass:"XCF_Driver_Service",rawData:null,store:null,treeView:null,driverScopes:null,_isLoading:!1,getDriverModule:function(a){var b=
new A,e=c.getCIInputValueByName(a.user,d.DRIVER_PROPERTY.CF_DRIVER_CLASS);a=a.scope;e=e?e.replace("./",""):"";a=require.toUrl(a);a=c.removeURLParameter(a,"bust");a=c.removeURLParameter(a,"time");a=a.replace("/main.js","");require.cache||(a=a.replace("/.js","/"));try{require([a+"/"+e],function(a){b.resolve(a)})}catch(D){console.error("error loading driver module from  "+a+"---"+e,D),logError(D,"error loading driver module"),b.reject(D.message)}return b},loadDriverModule:function(a){var b=this.driverScopes.system_drivers+
"DriverBase";require.toUrl(this.driverScopes.system_drivers);var e=this,g=new A,h=require;h([b],function(b){var q=e.driverScopes[a.scope],p=!require.cache;p?require({config:{urlArgs:null}}):require({cacheBust:null});q=require.toUrl(q);p&&(q=q.replace("/.js","/"));var r=c.getCIInputValueByName(a.user,d.DRIVER_PROPERTY.CF_DRIVER_CLASS),r=r.replace("./",""),r=r.replace(".js",""),r=a.scope+"/"+r,r=r.replace("","").trim();try{h.undef(r),h([r],function(a){function c(b,e){a.getFields=b.getFields;b.onReloaded=
c;e.onReloaded=c}a.declaredClass=r;n([b,y.dcl,z.dcl,a],{}).getFields=a.getFields;a.onReloaded=c;g.resolve(a)})}catch(P){}});return g},getBlock:function(a){a=c.parse_url(a);a=c.urlArgs(a.host);var b=this.getItemById(a.driver.value),e=null;b&&b.blockScope&&(e=b.blockScope.getBlockById(a.block.value));return e},getDriverByUrl:function(a){a=c.parse_url(a);a=c.urlArgs(a.host);return this.getItemById(a.driver.value)},_driverQueryCache:null,_getDriverById:function(a,b){if(b&&b.getSync){var e=b.query();_.isArray(e)||
(e=[e]);for(var g=0;g<e.length;g++){var h=e[g];if(!h.isDir){var q=c.getInputCIByName(h.user,d.DRIVER_PROPERTY.CF_DRIVER_ID);if(q&&q.value==a)return b.getSync(h.path)}}return null}},getDriverById:function(a,b){if(b)return this._getDriverById(a,b);var c=b=null,e;for(e in this.stores)if(b=this.stores[e],b=this._getDriverById(a,b)){c=b;break}return c},getDriverByPath:function(a){var b=null,e;for(e in this.stores){a:{b=c.queryStore(this.stores[e],{isDir:!1});_.isArray(b)||(b=[b]);for(var g=0;g<b.length;g++){var d=
b[g];if(d.path==a){b=d;break a}}b=null}if(b)return b}return null},getItemById:function(a){return this.getDriverById(a)},onNewDriverScopeCreated:function(a){},onScopeCreated:function(a){},onDeviceDisconnected:function(a){},onDriverCreated:function(a){d.registerEnumeration("Driver",this.getDriversAsEnumeration(a))},onDriverRemoved:function(a,b){d.registerEnumeration("Driver",this.getDriversAsEnumeration(a))},onStoreReady:function(a){d.registerEnumeration("Driver",this.getDriversAsEnumeration(a))},createStore:function(a,
b,g){a&&!a.items&&a["0"]&&(a={items:a["0"].items});var d=new (m("driverStore",[e,u,q],{}))({data:[],Model:r,idProperty:"path",scope:b,id:c.createUUID(),mayHaveChildren:function(a){return a.isDir},observedProperties:["name","enabled"]});a&&a.items&&(d.setData(a.items),_.each(a.items,function(a){a._store=d}));b&&!1!==g&&this.setStore(b,d);return d},initStore:function(a,b,c){return this.createStore(a,b,c)},getStore:function(a){a=a||"system_drivers";var b=this.stores[a];return b?b:this.ls(a)},ls:function(a,
b){function c(c){try{var g=this.createStore(c,a,b);this.onStoreReady(g);!1!==b&&this.publish(d.EVENTS.ON_STORE_CREATED,{data:c,owner:this,store:g,type:this.itemType});e.resolve(g)}catch(Q){logError(Q,"error ls drivers")}}var e=new A;if(this.prefetch&&this.prefetch[a])return c.apply(this,[this.prefetch[a]]),delete this.prefetch[a],e;w("php")?this.runDeferred(null,"ls",[a]).then(c.bind(this)):this._getText(require.toUrl(a).replace("main.js","")+a+".json",{sync:!1,handleAs:"json"}).then(c.bind(this));
return e},init:function(){var a=this,b=d.EVENTS;this.subscribe([b.ON_SCOPE_CREATED,b.ON_STORE_CREATED]);this.subscribe(b.ON_BLOCK_EXPRESSION_FAILED,function(c){a.publish(b.ON_SERVER_LOG_MESSAGE,{data:{type:"Expression",device:c.deviceInfo},level:"error",message:"Expression Failed: "+c.item.title+" : "+c.item.value})});this.driverScopes={system_drivers:"system_drivers/",user_drivers:"user_drivers/"}}})})},"xwire/Target":function(){define(["dcl/dcl","xwire/_Base"],function(n,m){m=n(m,{declaredClass:"xwire.Target",
binding:null,object:null,path:null,run:function(){},start:function(){}});n.chainAfter(m,"run");return m})},"xace/base_handler":function(){define(function(n,m,k){k.exports={HANDLES_ANY:0,HANDLES_EDITOR:1,HANDLES_IMMEDIATE:2,HANDLES_EDITOR_AND_IMMEDIATE:3,language:null,path:null,workspaceDir:null,doc:null,isFeatureEnabled:function(h){return!disabledFeatures[h]},$getIdentifierRegex:function(){return null},completeUpdate:function(h){throw Error("Use worker_util.completeUpdate instead()");},handlesLanguage:function(h){throw Error("base_handler.handlesLanguage() is not overridden");
},handlesEditor:function(){return this.HANDLES_EDITOR},getMaxFileSizeSupported:function(){return 8E5},isParsingSupported:function(){return!1},getIdentifierRegex:function(){return null},getCompletionRegex:function(){return null},getTooltipRegex:function(){return null},parse:function(h,d){d()},findNode:function(h,d,b){b()},getPos:function(h,d){d()},init:function(h){h()},onUpdate:function(h,d){d()},onDocumentOpen:function(h,d,b,c){c()},onDocumentClose:function(h,d){d()},onCursorMove:function(h,d,b,c,
g){g()},tooltip:function(h,d,b,c,g){g()},highlightOccurrences:function(h,d,b,c,g){g()},getRefactorings:function(h,d,b,c,g){g()},outline:function(h,d,b){b()},hierarchy:function(h,d,b){b()},complete:function(h,d,b,c,g){g()},analyze:function(h,d,b,c){b()},getRenamePositions:function(h,d,b,c,g){g()},onRenameBegin:function(h,d){d()},commitRename:function(h,d,b,c,g){g()},onRenameCancel:function(h){h()},codeFormat:function(h,d){d()},jumpToDefinition:function(h,d,b,c,g){g()},getResolutions:function(h,d,b,
c){c()},hasResolution:function(h,d,b,c){c()},getInspectExpression:function(h,d,b,c,g){g()}};for(f in k.exports)"function"===typeof k.exports[f]&&(k.exports[f].base_handler=!0)})},"davinci/actions/RedoAction":function(){define(["dojo/_base/declare","./Action","../Workbench"],function(n,m,k){return n("davinci.actions.RedoAction",m,{run:function(h){(h=k.getOpenEditor())&&h.getContext&&h.getContext().getCommandStack().redo()},isEnabled:function(h){var d=(h=k.getOpenEditor())&&h.getContext&&h.getContext();
if(h&&d){if(d=d.getCommandStack().canRedo(),"davinci.ve.PageEditor"==h.declaredClass||"davinci.ve.themeEditor.ThemeEditor"==h.declaredClass)return d}else return!1}})})},"davinci/actions/UserNameAction":function(){define(["dojo/_base/declare","davinci/Runtime","./Action","davinci/lang/ui"],function(n,m,k,h){return n("davinci.actions.UserNameAction",k,{run:function(){},getName:function(){var d=m.getUserDisplayName();return h.User+": \x3ci\x3e"+d+"\x3c/i\x3e"}})})},"xide/views/_PanelDialog":function(){define(["dcl/dcl",
"xide/utils","xide/views/_Panel"],function(n,m,k,h){k=n(k,{containerClass:"CIDialog",getContentSize:function(){return{width:"600px",height:"500px"}},getDefaultOptions:function(d){var b=this,c={contentSize:this.getContentSize(),footerToolbar:[{item:"\x3cbutton style\x3d'margin-left:5px;' type\x3d'button'\x3e\x3cspan class\x3d'...'\x3e\x3c/span\x3e\x3c/button\x3e",event:"click",btnclass:"btn btn-danger btn-sm",btntext:" Cancel",callback:function(c){c.data.close();b.onCancel()}},{item:"\x3cbutton style\x3d'margin-left:5px;' type\x3d'button'\x3e\x3cspan class\x3d'...'\x3e\x3c/span\x3e\x3c/button\x3e",
event:"click",btnclass:"btn btn-primary btn-sm",btntext:" Ok",callback:function(c){b.onOk(b.changedCIS);c.data.close()}}]};m.mixin(c,d);return c},onShow:function(d,b,c){}});n.chainAfter(k,"onShow");return k})},"xace/formatters":function(){define(["xace/lib_jsbeautify"],function(n){return{format:function(m,k){if(!0!==this.disabled){var h=m.session;m=m.selection.getRange();var d={space_before_conditional:!0,keep_array_indentation:!1,preserve_newlines:!0,unescape_strings:!0,jslint_happy:!1,brace_style:"end-expand",
indent_char:" "};d.indent_size=h.getTabSize();var b=h.getLine(m.start.row).match(/^\s*/)[0],c=!1;m.start.column<b.length?m.start.column=0:c=!0;var g=h.getTextRange(m);0==g.length&&(g=h.getValue());h=null;"javascript"==k||"json"==k?h="js":"css"==k||"less"==k?h="css":/^\s*<!?\w/.test(g)?h="html":"xml"==k?h="html":"html"==k?h=/[^<]+?{[\s\-\w]+:[^}]+;/.test(g)?"css":/<\w+[ \/>]/.test(g)?"html":"js":"handlebars"==k&&(d.indent_handlebars=!0,h="html");try{g=n[h+"_beautify"](g,d),c&&(g=g.replace(/^/gm,b).trim()),
0===m.end.column&&(g+="\n"+b)}catch(p){return!1}return g}},modes:{javascript:"Javascript (JS Beautify)",html:"HTML (JS Beautify)",css:"CSS (JS Beautify)",less:"Less (JS Beautify)",xml:"XML (JS Beautify)",json:"JSON (JS Beautify)",handlebars:"Handlebars (JS Beautify)"}}})},"dijit/layout/LayoutContainer":function(){define("dojo/_base/array dojo/_base/declare dojo/dom-class dojo/dom-style dojo/_base/lang ../_WidgetBase ./_LayoutWidget ./utils".split(" "),function(n,m,k,h,d,b,c,g){m=m("dijit.layout.LayoutContainer",
c,{design:"headline",baseClass:"dijitLayoutContainer",startup:function(){this._started||(n.forEach(this.getChildren(),this._setupChild,this),this.inherited(arguments))},_setupChild:function(b){this.inherited(arguments);b.region&&k.add(b.domNode,this.baseClass+"Pane")},_getOrderedChildren:function(){var b=n.map(this.getChildren(),function(a,b){return{pane:a,weight:["center"==a.region?Infinity:0,a.layoutPriority,("sidebar"==this.design?1:-1)*(/top|bottom/.test(a.region)?1:-1),b]}},this);b.sort(function(a,
b){a=a.weight;b=b.weight;for(var c=0;c<a.length;c++)if(a[c]!=b[c])return a[c]-b[c];return 0});return n.map(b,function(a){return a.pane})},layout:function(){g.layoutChildren(this.domNode,this._contentBox,this._getOrderedChildren())},addChild:function(b,a){this.inherited(arguments);this._started&&this.layout()},removeChild:function(b){this.inherited(arguments);this._started&&this.layout();k.remove(b.domNode,this.baseClass+"Pane");h.set(b.domNode,{top:"auto",bottom:"auto",left:"auto",right:"auto",position:"static"});
h.set(b.domNode,/top|bottom/.test(b.region)?"width":"height","auto")}});m.ChildWidgetProperties={region:"",layoutAlign:"",layoutPriority:0};d.extend(b,m.ChildWidgetProperties);return m})},"xide/form/FilterSelect":function(){define(["dcl/dcl","xdojo/declare","xide/widgets/WidgetBase","dojo/store/Memory"],function(n,m,k,h){return n(k,{declaredClass:"xide.form.FilterSelect",title:null,options:null,labelValue:null,value:null,filteringSelect:null,templateString:"\x3cdiv class\x3d'fieldrow ' style\x3d'padding: 8px'\x3e\x3cspan class\x3d'field-label'\x3e${!title}\x3c/span\x3e\x3cdiv data-dojo-attach-point\x3d'selectNode' align\x3d'left'\x3e\x3c/div\x3e\x3c/div\x3e",
widgetChanged:function(d){this.changed=!0;this.userData&&(this.userData.changed=!0)},startup:function(){var d=this,b=this.userData,c=new h({data:b.options,idProperty:"value",getLabel:function(){}}),g=c.get(b.value),p=new FilteringSelect({name:"state",labelType:"html",store:c,searchAttr:"label2",labelAttr:"label"},this.selectNode);p.startup();g&&setTimeout(function(){p.set("item",g)},100);p.on("change",function(a){d.userData.value=a;d.setValue(d.userData.value);d.widgetChanged(!0)});this.filteringSelect=
p}})})},"dgrid/util/misc":function(){define(["dojo/has"],function(n){n.add("dom-contains",function(b,c,a){return!!a.contains});var m=[],k,h,d,b=/([^A-Za-z0-9_\u00A0-\uFFFF-])/g,c={defaultDelay:15,throttle:function(b,d,a){var e=!1;a=a||c.defaultDelay;return function(){e||(e=!0,b.apply(d,arguments),setTimeout(function(){e=!1},a))}},throttleDelayed:function(b,d,a){var e=!1;a=a||c.defaultDelay;return function(){if(!e){e=!0;var c=arguments;setTimeout(function(){e=!1;b.apply(d,c)},a)}}},debounce:function(b,
d,a){var e;a=a||c.defaultDelay;return function(){e&&(clearTimeout(e),e=null);var c=arguments;e=setTimeout(function(){b.apply(d,c)},a)}},each:function(b,c,a){var e,g;if(b)if("number"===typeof b.length)for(e=0,g=b.length;e<g;e++)c.call(a,b[e],e,b);else for(e in b)c.call(a,b[e],e,b)},contains:function(b,c){return n("dom-contains")?b.contains(c):b.compareDocumentPosition(c)&8},addCssRule:function(b,c){k||(k=document.createElement("style"),document.getElementsByTagName("head")[0].appendChild(k),k=k.sheet||
k.styleSheet,h=k.deleteRule?"deleteRule":"removeRule",d=k.cssRules?"cssRules":"rules");var a=m.length;m[a]=(k.cssRules||k.rules).length;k.addRule?k.addRule(b,c):k.insertRule(b+"{"+c+"}",m[a]);return{get:function(b){return k[d][m[a]].style[b]},set:function(b,c){"undefined"!==typeof m[a]&&(k[d][m[a]].style[b]=c)},remove:function(){var b=m[a],c,g;if(void 0!==b)for(k[h](b),m[a]=void 0,c=a+1,g=m.length;c<g;c++)m[c]>b&&m[c]--}}},escapeCssIdentifier:function(c,d){return"string"===typeof c?c.replace(b,d||
"\\$1"):c}};return c})},"xblox/xblox":function(){},"xblox/views/DnD":function(){define(["dojo/_base/declare","dojo/when","xgrid/DnD"],function(n,m,k){var h=n(k.GridSource,{declaredClass:"xblox/views/BlockGridDnDSource",_lastTargetId:null,_lastTargetCrossCounter:0,_markTargetAnchor:function(b,c,g){if(this.current!=this.targetAnchor||this.before!==b||this.center!==c)this.targetAnchor&&(this._removeItemClass(this.targetAnchor,this.before?"Before":"After"),this._removeItemClass(this.targetAnchor,"Disallow"),
this._removeItemClass(this.targetAnchor,"Center")),this.targetAnchor=this.current,this.targetBox=null,this.before=b,this.center=c,this._before=b,this._center=c,this.targetAnchor&&(c&&(this._removeItemClass(this.targetAnchor,"Before"),this._removeItemClass(this.targetAnchor,"After"),this._addItemClass(this.targetAnchor,"Center")),!c&&this._addItemClass(this.targetAnchor,this.before?"Before":"After"),c&&!1===g&&this._addItemClass(this.targetAnchor,"Disallow"))},onDropInternal:function(b,c,g){var d=
this.grid,a=d.collection,e=this,h=e._targetAnchor,k;h&&(k=this._center?h:this.before?h.previousSibling:h.nextSibling);h=d.row(b[0]);if(c||k!==b[0]&&(g||!h||d.down(h).element!==b[0])){var n=d.__dndNodesToModel(b),r=d._sourceToModel(e,d),v={before:this._before,center:this._center,targetGrid:d};this._center&&d.__onDrop(n,r,d,v,c);b.forEach(function(b){m(e.getObject(b),function(b){var h=a.getIdentity(b);d._trackError(function(){return a[c&&a.copy?"copy":"put"](b,{beforeId:g?a.getIdentity(g):null}).then(function(){e._selectedNodes[h]&&
(e._selectedNodes[h]=d.row(h).element);!this.center&&d.__onDrop(n,r,d,v,c)})})})})}},onDropExternal:function(b,c,g,d){function a(a,b){a.refresh();return a.select(b,null,!0,{focus:!0,append:!1,expand:!0,delay:2},"mouse")}var e=this.grid,h=this.grid.collection,p=b.grid,k=this;c.forEach(function(c,q){m(b.getObject(c),function(r){var u={before:k._before,center:k._center,targetGrid:e};if(r.toDropObject&&(r=r.toDropObject(r,u.center?p._sourceToModel(k):d,u,g),u.center))return a(e,r);e._trackError(function(){return h[h.copy?
"copy":"put"](r,{beforeId:d?h.getIdentity(d):null}).then(function(){if(!g){if(p){var d=p.collection.getIdentity(r);!q&&b.selectNone();b.delItem(c.id);a(e,r);return p.collection.remove(d)}b.deleteSelectedNodes()}})})})})}}),d=n([h],{autoSync:!0,skipForm:!0,selfAccept:!1,onDndDrop:function(b,c,g,d){this.targetAnchor&&this._removeItemClass(this.targetAnchor,"Hover");this==d&&(this.onDrop(b,c,g,d),this.grid.refresh());this.onDndCancel()}});n=n("xblox.widgets.DojoDndMixin",k,{dndParams:{allowNested:!0,
checkAcceptance:function(b,c){return!0},isSource:!0},dndConstructor:d,dropEvent:"/dnd/drop",dragEvent:"/dnd/start",overEvent:"/dnd/source/over",__onDrop:function(b,c,g,d,a){var e=!0===d.center;_.each(b,function(b){b.toDropObject&&(b=b.toDropObject(b,c,d,a));if(b!=c){if(e)!1!==c.canAdd(b)&&c.scope.moveTo(b,c,d.before,e);else{var g=b.getParent();if(g){var h=c.getParent();h?h==b.getParent()&&c.scope.moveTo(b,c,d.before,e):(b.group=this.blockGroup,g.removeBlock(b,!1),b._store.putSync(b))}}b.refresh()}},
this);this.set("collection",this.collection.filter({group:this.blockGroup}));this.select(b[0],null,!0,{focus:!0,append:!1,expand:!0,delay:2},"mouse")}});n.BlockGridSource=h;return n})},"xide/widgets/_Widget":function(){define("xdojo/declare dcl/dcl xide/utils xide/mixins/EventedMixin xide/registry xlang/i18".split(" "),function(n,m,k,h,d,b){var c={_widgets:null,__eventHandles:null,_isResizing:!1,cssClass:"",ctx:null,getContext:function(){return this.ctx},onResizeBegin:function(){this._isResizing=
!0;_.each(this._widgets,function(b){b&&(b._isResizing=!0)},this)},onResizeEnd:function(){this._isResizing=!1;_.each(this._widgets,function(b){b&&(b._isResizing=!1)},this)},_toWidget:function(b){return b&&b.id&&(b=d.byId(b.id))?b:null},parentByClass:function(b,c){var a=0,e=this.domNode,g=null;for(c=c||20;!g&&a<c&&e;){if(e){var d=this._toWidget(e);d&&d.declaredClass&&d.declaredClass===b&&(g=d);e=e.parentNode}a++}return g},_startWidgets:function(){var b=!1;if(this._widgets)for(var c=0;c<this._widgets.length;c++){var a=
this._widgets[c];a&&!a._started&&a.startup&&(a.startup(),b=a._started=!0,a._emit("startup"))}return b},_createForward:function(b){var c=this;this[b]||(this[b]=function(){for(var a=0;a<c._widgets.length;a++){var e=c._widgets[a];e[b]&&e[b]()}})},onShow:function(){if(this._widgets){this._startWidgets();for(var b=0;b<this._widgets.length;b++){var c=this._widgets[b];c&&c!==this&&(c._showing=!0,c.open=!0,c.onShow&&c.onShow(),c._emit&&c._emit("show",{}))}}},onHide:function(){if(this._widgets)for(var b=0;b<
this._widgets.length;b++){var c=this._widgets[b];if(c&&c!==this){c._showing=!1;c.open=!1;c.onHide&&c.onHide();try{c._emit&&c._emit("hide",{})}catch(a){logError(a,"error emitting on-hide")}}}},_getChildren:function(){return this._widgets},debounce:function(b,c,a,e,d){return k.debounce(this,b,c,a,e,d)},__addHandler:function(b,c,a){if(b){a=_.isString(a)?this[a]?this[a]:null:a;var e=this;return"function"===typeof a?this.__on(b,c,null,function(){a.apply(e,arguments)}):!1}},_shouldResizeWidgets:function(){return!0},
resize:function(){var b=arguments;this.inherited&&this.inherited(b);if((!this.shouldResizeWidgets||!1!==this.shouldResizeWidgets())&&this._widgets)for(var c=0;c<this._widgets.length;c++){var a=this._widgets[c];a&&(a.resizeToParent&&k.resizeTo(a,this,!0,!0),a&&"function"===typeof a.resize&&a._started&&a.resize.apply(a,b))}},destroy:function(){this.inherited&&this.inherited(arguments);var b=this._widgets;if(b){for(var c=0;c<b.length;c++){var a=b[c];a&&a!=this&&!0!==a._destroyed&&k.destroy(a)}delete this._widgets;
this._widgets=null}this.domNode&&(d.remove(this.domNode.id),k.destroy(this.domNode));this._destroyed=!0},onAdded:function(){},add:function(b,c,a,e,d,h){if(b==this)return b;!this._widgets&&(this._widgets=[]);var g=this._widgets;_.isNumber(c)&&(c=null);null===c||_.isObject(c)||(c={});var q=null;_.isEmpty(c)&&(c=null);var p=a||(!1!==a?this.containerNode||this.domNode:null);if(b&&!c&&!a||!(c||a||e||d||h))return-1==g.indexOf(b)&&g.push(b),b;b&&c&&(q=k.addWidget(b,c,this,p,e,null,null,d,h),g.push(q));return q},
remove:function(b){this._widgets&&this._widgets.remove(b)},buildRendering:function(){this.inherited&&this.inherited(arguments);var b=k.getNode(this);b&&this.cssClass&&$(b).addClass(this.cssClass);b&&this.style&&$(b).attr("style",this.style)}};h=m([h.dcl,b.dcl],c);n=n("xide/widgets/_Widget",b,c);n.Implmentation=c;n.dcl=h;m.chainAfter(h,"destroy");m.chainAfter(h,"onResizeBegin");m.chainAfter(h,"onResizeEnd");return n})},"xideve/views/VisualEditorPalette":function(){define(["dcl/dcl","xide/utils","xide/factory",
"./Palette"],function(n,m,k,h){return n(null,{declaredClass:"xideve/views/VisualEditorPalette",_cPalette:null,_cBPalettePane:null,_createPaletteSection:function(d,b,c){d={id:"ContainersSection_Dojo",iconBase64:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAACXBIWXMAAAsTAAALEwEAmpwYAAAKT2lDQ1BQaG90b3Nob3AgSUNDIHByb2ZpbGUAAHjanVNnVFPpFj333vRCS4iAlEtvUhUIIFJCi4AUkSYqIQkQSoghodkVUcERRUUEG8igiAOOjoCMFVEsDIoK2AfkIaKOg6OIisr74Xuja9a89+bN/rXXPues852zzwfACAyWSDNRNYAMqUIeEeCDx8TG4eQuQIEKJHAAEAizZCFz/SMBAPh+PDwrIsAHvgABeNMLCADATZvAMByH/w/qQplcAYCEAcB0kThLCIAUAEB6jkKmAEBGAYCdmCZTAKAEAGDLY2LjAFAtAGAnf+bTAICd+Jl7AQBblCEVAaCRACATZYhEAGg7AKzPVopFAFgwABRmS8Q5ANgtADBJV2ZIALC3AMDOEAuyAAgMADBRiIUpAAR7AGDIIyN4AISZABRG8lc88SuuEOcqAAB4mbI8uSQ5RYFbCC1xB1dXLh4ozkkXKxQ2YQJhmkAuwnmZGTKBNA/g88wAAKCRFRHgg/P9eM4Ors7ONo62Dl8t6r8G/yJiYuP+5c+rcEAAAOF0ftH+LC+zGoA7BoBt/qIl7gRoXgugdfeLZrIPQLUAoOnaV/Nw+H48PEWhkLnZ2eXk5NhKxEJbYcpXff5nwl/AV/1s+X48/Pf14L7iJIEyXYFHBPjgwsz0TKUcz5IJhGLc5o9H/LcL//wd0yLESWK5WCoU41EScY5EmozzMqUiiUKSKcUl0v9k4t8s+wM+3zUAsGo+AXuRLahdYwP2SycQWHTA4vcAAPK7b8HUKAgDgGiD4c93/+8//UegJQCAZkmScQAAXkQkLlTKsz/HCAAARKCBKrBBG/TBGCzABhzBBdzBC/xgNoRCJMTCQhBCCmSAHHJgKayCQiiGzbAdKmAv1EAdNMBRaIaTcA4uwlW4Dj1wD/phCJ7BKLyBCQRByAgTYSHaiAFiilgjjggXmYX4IcFIBBKLJCDJiBRRIkuRNUgxUopUIFVIHfI9cgI5h1xGupE7yAAygvyGvEcxlIGyUT3UDLVDuag3GoRGogvQZHQxmo8WoJvQcrQaPYw2oefQq2gP2o8+Q8cwwOgYBzPEbDAuxsNCsTgsCZNjy7EirAyrxhqwVqwDu4n1Y8+xdwQSgUXACTYEd0IgYR5BSFhMWE7YSKggHCQ0EdoJNwkDhFHCJyKTqEu0JroR+cQYYjIxh1hILCPWEo8TLxB7iEPENyQSiUMyJ7mQAkmxpFTSEtJG0m5SI+ksqZs0SBojk8naZGuyBzmULCAryIXkneTD5DPkG+Qh8lsKnWJAcaT4U+IoUspqShnlEOU05QZlmDJBVaOaUt2ooVQRNY9aQq2htlKvUYeoEzR1mjnNgxZJS6WtopXTGmgXaPdpr+h0uhHdlR5Ol9BX0svpR+iX6AP0dwwNhhWDx4hnKBmbGAcYZxl3GK+YTKYZ04sZx1QwNzHrmOeZD5lvVVgqtip8FZHKCpVKlSaVGyovVKmqpqreqgtV81XLVI+pXlN9rkZVM1PjqQnUlqtVqp1Q61MbU2epO6iHqmeob1Q/pH5Z/YkGWcNMw09DpFGgsV/jvMYgC2MZs3gsIWsNq4Z1gTXEJrHN2Xx2KruY/R27iz2qqaE5QzNKM1ezUvOUZj8H45hx+Jx0TgnnKKeX836K3hTvKeIpG6Y0TLkxZVxrqpaXllirSKtRq0frvTau7aedpr1Fu1n7gQ5Bx0onXCdHZ4/OBZ3nU9lT3acKpxZNPTr1ri6qa6UbobtEd79up+6Ynr5egJ5Mb6feeb3n+hx9L/1U/W36p/VHDFgGswwkBtsMzhg8xTVxbzwdL8fb8VFDXcNAQ6VhlWGX4YSRudE8o9VGjUYPjGnGXOMk423GbcajJgYmISZLTepN7ppSTbmmKaY7TDtMx83MzaLN1pk1mz0x1zLnm+eb15vft2BaeFostqi2uGVJsuRaplnutrxuhVo5WaVYVVpds0atna0l1rutu6cRp7lOk06rntZnw7Dxtsm2qbcZsOXYBtuutm22fWFnYhdnt8Wuw+6TvZN9un2N/T0HDYfZDqsdWh1+c7RyFDpWOt6azpzuP33F9JbpL2dYzxDP2DPjthPLKcRpnVOb00dnF2e5c4PziIuJS4LLLpc+Lpsbxt3IveRKdPVxXeF60vWdm7Obwu2o26/uNu5p7ofcn8w0nymeWTNz0MPIQ+BR5dE/C5+VMGvfrH5PQ0+BZ7XnIy9jL5FXrdewt6V3qvdh7xc+9j5yn+M+4zw33jLeWV/MN8C3yLfLT8Nvnl+F30N/I/9k/3r/0QCngCUBZwOJgUGBWwL7+Hp8Ib+OPzrbZfay2e1BjKC5QRVBj4KtguXBrSFoyOyQrSH355jOkc5pDoVQfujW0Adh5mGLw34MJ4WHhVeGP45wiFga0TGXNXfR3ENz30T6RJZE3ptnMU85ry1KNSo+qi5qPNo3ujS6P8YuZlnM1VidWElsSxw5LiquNm5svt/87fOH4p3iC+N7F5gvyF1weaHOwvSFpxapLhIsOpZATIhOOJTwQRAqqBaMJfITdyWOCnnCHcJnIi/RNtGI2ENcKh5O8kgqTXqS7JG8NXkkxTOlLOW5hCepkLxMDUzdmzqeFpp2IG0yPTq9MYOSkZBxQqohTZO2Z+pn5mZ2y6xlhbL+xW6Lty8elQfJa7OQrAVZLQq2QqboVFoo1yoHsmdlV2a/zYnKOZarnivN7cyzytuQN5zvn//tEsIS4ZK2pYZLVy0dWOa9rGo5sjxxedsK4xUFK4ZWBqw8uIq2Km3VT6vtV5eufr0mek1rgV7ByoLBtQFr6wtVCuWFfevc1+1dT1gvWd+1YfqGnRs+FYmKrhTbF5cVf9go3HjlG4dvyr+Z3JS0qavEuWTPZtJm6ebeLZ5bDpaql+aXDm4N2dq0Dd9WtO319kXbL5fNKNu7g7ZDuaO/PLi8ZafJzs07P1SkVPRU+lQ27tLdtWHX+G7R7ht7vPY07NXbW7z3/T7JvttVAVVN1WbVZftJ+7P3P66Jqun4lvttXa1ObXHtxwPSA/0HIw6217nU1R3SPVRSj9Yr60cOxx++/p3vdy0NNg1VjZzG4iNwRHnk6fcJ3/ceDTradox7rOEH0x92HWcdL2pCmvKaRptTmvtbYlu6T8w+0dbq3nr8R9sfD5w0PFl5SvNUyWna6YLTk2fyz4ydlZ19fi753GDborZ752PO32oPb++6EHTh0kX/i+c7vDvOXPK4dPKy2+UTV7hXmq86X23qdOo8/pPTT8e7nLuarrlca7nuer21e2b36RueN87d9L158Rb/1tWeOT3dvfN6b/fF9/XfFt1+cif9zsu72Xcn7q28T7xf9EDtQdlD3YfVP1v+3Njv3H9qwHeg89HcR/cGhYPP/pH1jw9DBY+Zj8uGDYbrnjg+OTniP3L96fynQ89kzyaeF/6i/suuFxYvfvjV69fO0ZjRoZfyl5O/bXyl/erA6xmv28bCxh6+yXgzMV70VvvtwXfcdx3vo98PT+R8IH8o/2j5sfVT0Kf7kxmTk/8EA5jz/GMzLdsAAAAgY0hSTQAAeiUAAICDAAD5/wAAgOkAAHUwAADqYAAAOpgAABdvkl/FRgAAAg9JREFUeNp8ks1rE0EYxn9bE/xqikI0lITiQW+VImoONmCQtoonUbAglFDEUtlLxdo/wUNRD0Iw1kOIEmj6D9ir2FRQi4j0lILQJoimRfJB9mNmOx42iWsT+8Iw7DwPv32feUdTSuGtyeQKaT3GZHJlGEgA40AOyKT1WL6lt0rbC2hC9IFg7/a1c5HAib5Dc+WqOb/8pVjb3K4H03os6fVqXToYHgj2RiYun34KhD1S6c27jYeb2/ViWo/lW4c9dFYiPtgfMIQTNoRDw3YwbIeGcMLxwf5AM1a7fF0A436fL15pSNAUGqCUhqYp/P4Dc0AImNoPkNvaqX8MHDn4SkOBiwA0Kg1rHoh6zd0iZD4VyrWaKUpVQ1I1bSqGpGKI0udCuQZk/gu4+XhZpfXY2amRM88vnjq2vlMz7xn2biF41L8+FAl8f5a4cFw4u/mrj3KqK0BYNkDqzv3UyR6N32uFn9H334qhtY1fhyf0lzEgVd76oQDaEKVUe43NLirP97Rnn97rG5tdRCnldrCw9EFd0TNKNEwARmayCkg1tRdAavRBVo3OZAFwpMQR8m+E12+/YjcMzW4CpBsFF7AKgG1aCNM9l4bd9vjc7FZ73gDCtDpGIw27Oc5/9R6AuzeiSFsqRwjX7DH0hYK0fiKbHSSuDyEtq/MSu63zt56o/fRuL5HWxS4srTJ1+xL71Z8BAL+kU+9a36VRAAAAAElFTkSuQmCC",
includes:["RunScript","BorderContainer"],items:[],name:d,preset:b.preset,presetId:c};b.subsections.push(d);return d},_createPaletteComponent:function(d,b){return{id:"containers",name:d,preset:{collections:[{id:"xblox",show:!0},{id:"delite",show:!0},{id:"dijit",show:!0},{id:"dojo",show:!0}],sections:"$"+b+"Sections"},presetId:b,subsections:[]}},_createPaletteBlockItem:function(d,b){var c=d.shareTitle;d={$library:{_maqGetString:function(b){return c},widgets:[],collections:{}},category:"containers",
allowedChild:"",collection:"xblox",description:"",iconBase64:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAPJJREFUeNpi/P//P8PCgzf/bzv3nIFU4GUkycACYoA01wYZkGxA87oLEAP+//vHsPvWa5IN+P/vP8QAbxNphi0nHzL8R5UGYkY4jxEqgizvay4HMWDj0QcMs4qcgUKMqKqg+hmBYv8ZkYyDmp3WvwdiwL+/f8HiohzMRDv/zY+/DP9+/2VgAhvw5y8DOQBkMdQF/xh+Ac14/u0P3AfIfmaEOvs/VJAR6lOQAYywdLBq5zWSXRDmroVIB53pjuSng98/fpKVDkD6wAb4WykAXfGUZANA+qiTlKnihVU7r4DjC2f0IaVIWFSGumlBopESABBgAGY0fipQlZCHAAAAAElFTkSuQmCC",
iconLarge:"dojo/1.8/resources/imagesLarge/AccordionContainer.png",iconLargeBase64:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADIAAAAyCAIAAACRXR/mAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAANxJREFUeNrs17EKwjAQxvGoIZPdi0N3wcFR6NhNn8Wn8VnqZMeimw6ikyCdSn0BwTSxRRzcuvkvXCD7j+9y5G6Q7vaKd3Rzl8kCZdpmh5ZVVQ9iWkEwJrK898LqzHIOyWrykrQ6s6y1NNZQIQ+6E52k1fe0jpc7jnVTE2gnruYhypSeypaljUHOW0YxO5HJ8kyWkiL2Py3m26odlOWkiH1fMWpmWs9XnV9LCCieht/1ddT+1esk+rtpkxUfDHQhE5awhCUsYQlLWGiW/hkqaKx4FuHSys8FrYhvAQYAB2RPPyLZy+IAAAAASUVORK5CYII\x3d",
iconHTML:d.getBlockIcon(),initialSize:"auto",inlineEdit:"",name:c,properties:{style:"position:relative",ignorePosition:!0,blockid:d.id,scopeid:d.scope.id,targetevent:"click",enabled:!0,stop:!0,script:d.name+"("+d.shareTitle+")",block:d.scope.mount.replace("/","")+"://"+d.scope.path.replace("./",""),sourceevent:"onDriverVariableChanged",sourceeventvaluepath:"item.value",sourceeventnamepath:"item.title",bidirectional:!0,targetvariable:"Volume"},section:{},tags:"Scripts",type:"xblox/RunScript",widgetClass:"dijit",
children:[],helper:"",ignoreMeta:!0,forceShow:!0,userData:{block:d,widgetClass:"dijit"}};d.$library.widgets.push(d);d.$library.collections.dijit={name:"Dijit"};d.$library.collections.xblox={name:"XBLOX"};d.$library.collections.delite={name:"DELITE"};b.items.push(d);return d},_blockScopeToPalette:function(d,b){var c=d.getBlockStore(),g=d.allGroups();d=this._createPaletteComponent(d.path,b);for(var h=0;h<g.length;h++){var a=c.query({group:g[h],shareTitle:/\S+/});if(a.length)for(var e=this._createPaletteSection(g[h],
d,b),q=0;q<a.length;q++)this._createPaletteBlockItem(a[q],e)}return d},_buildBlockPalette:function(d){this.getMainView();var b=this.getLeftContainer();this._cBPalettePane||(this._cBPalettePane=k.createPane("Behaviours","fa-cube",b,{parentContainer:b}));this._cPalette&&m.destroy(this._cPalette);this._cPalette=b=m.addWidget(h,{},this,this._cBPalettePane,!0);b._init();var c=d.context.getCompType(),g=d.blockScopes,p=[];if(g&&g.length)for(var a=0;a<g.length;a++){var e=this._blockScopeToPalette(g[a],c);
e&&p.push(e)}if(p.length)for(a=0;a<p.length;a++)b._createPalette(p[a],c);b._context=d.context;b.context=d.context;b._presetSections={};b._filter();b.updatePaletteVisibility()}})})},"dojo/promise/instrumentation":function(){define(["./tracer","../has","../_base/lang","../_base/array"],function(n,m,k,h){function d(a,b,c){var e="";a&&a.stack&&(e+=a.stack);b&&b.stack&&(e+="\n    ----------------------------------------\n    rejected"+b.stack.split("\n").slice(1).join("\n").replace(/^\s+/," "));c&&c.stack&&
(e+="\n    ----------------------------------------\n"+c.stack);console.error(a,e)}function b(a,b,c,e){b||d(a,c,e)}function c(b,c,d,r){c?h.some(p,function(a,c){if(a.error===b)return p.splice(c,1),!0}):h.some(p,function(a){return a.error===b})||p.push({error:b,rejection:d,deferred:r,timestamp:(new Date).getTime()});a||(a=setTimeout(g,e))}function g(){var b=(new Date).getTime(),c=b-e;p=h.filter(p,function(a){return a.timestamp<c?(d(a.error,a.rejection,a.deferred),!1):!0});a=p.length?setTimeout(g,p[0].timestamp+
e-b):!1}var p=[],a=!1,e=1E3;return function(a){var g=m("config-useDeferredInstrumentation");if(g){n.on("resolved",k.hitch(console,"log","resolved"));n.on("rejected",k.hitch(console,"log","rejected"));n.on("progress",k.hitch(console,"log","progress"));var d=[];"string"===typeof g&&(d=g.split(","),g=d.shift());if("report-rejections"===g)a.instrumentRejected=b;else if("report-unhandled-rejections"===g||!0===g||1===g)a.instrumentRejected=c,e=parseInt(d[0],10)||e;else throw Error("Unsupported instrumentation usage \x3c"+
g+"\x3e");}}})},"dojo/cldr/supplemental":function(){define(["../_base/lang","../i18n"],function(n,m){var k={};n.setObject("dojo.cldr.supplemental",k);k.getFirstDayOfWeek=function(h){h={bd:5,mv:5,ae:6,af:6,bh:6,dj:6,dz:6,eg:6,iq:6,ir:6,jo:6,kw:6,ly:6,ma:6,om:6,qa:6,sa:6,sd:6,sy:6,ye:6,ag:0,ar:0,as:0,au:0,br:0,bs:0,bt:0,bw:0,by:0,bz:0,ca:0,cn:0,co:0,dm:0,"do":0,et:0,gt:0,gu:0,hk:0,hn:0,id:0,ie:0,il:0,"in":0,jm:0,jp:0,ke:0,kh:0,kr:0,la:0,mh:0,mm:0,mo:0,mt:0,mx:0,mz:0,ni:0,np:0,nz:0,pa:0,pe:0,ph:0,pk:0,
pr:0,py:0,sg:0,sv:0,th:0,tn:0,tt:0,tw:0,um:0,us:0,ve:0,vi:0,ws:0,za:0,zw:0}[k._region(h)];return void 0===h?1:h};k._region=function(h){h=m.normalizeLocale(h);h=h.split("-");var d=h[1];d?4==d.length&&(d=h[2]):d={aa:"et",ab:"ge",af:"za",ak:"gh",am:"et",ar:"eg",as:"in",av:"ru",ay:"bo",az:"az",ba:"ru",be:"by",bg:"bg",bi:"vu",bm:"ml",bn:"bd",bo:"cn",br:"fr",bs:"ba",ca:"es",ce:"ru",ch:"gu",co:"fr",cr:"ca",cs:"cz",cv:"ru",cy:"gb",da:"dk",de:"de",dv:"mv",dz:"bt",ee:"gh",el:"gr",en:"us",es:"es",et:"ee",eu:"es",
fa:"ir",ff:"sn",fi:"fi",fj:"fj",fo:"fo",fr:"fr",fy:"nl",ga:"ie",gd:"gb",gl:"es",gn:"py",gu:"in",gv:"gb",ha:"ng",he:"il",hi:"in",ho:"pg",hr:"hr",ht:"ht",hu:"hu",hy:"am",ia:"fr",id:"id",ig:"ng",ii:"cn",ik:"us","in":"id",is:"is",it:"it",iu:"ca",iw:"il",ja:"jp",ji:"ua",jv:"id",jw:"id",ka:"ge",kg:"cd",ki:"ke",kj:"na",kk:"kz",kl:"gl",km:"kh",kn:"in",ko:"kr",ks:"in",ku:"tr",kv:"ru",kw:"gb",ky:"kg",la:"va",lb:"lu",lg:"ug",li:"nl",ln:"cd",lo:"la",lt:"lt",lu:"cd",lv:"lv",mg:"mg",mh:"mh",mi:"nz",mk:"mk",ml:"in",
mn:"mn",mo:"ro",mr:"in",ms:"my",mt:"mt",my:"mm",na:"nr",nb:"no",nd:"zw",ne:"np",ng:"na",nl:"nl",nn:"no",no:"no",nr:"za",nv:"us",ny:"mw",oc:"fr",om:"et",or:"in",os:"ge",pa:"in",pl:"pl",ps:"af",pt:"br",qu:"pe",rm:"ch",rn:"bi",ro:"ro",ru:"ru",rw:"rw",sa:"in",sd:"in",se:"no",sg:"cf",si:"lk",sk:"sk",sl:"si",sm:"ws",sn:"zw",so:"so",sq:"al",sr:"rs",ss:"za",st:"za",su:"id",sv:"se",sw:"tz",ta:"in",te:"in",tg:"tj",th:"th",ti:"et",tk:"tm",tl:"ph",tn:"za",to:"to",tr:"tr",ts:"za",tt:"ru",ty:"pf",ug:"cn",uk:"ua",
ur:"pk",uz:"uz",ve:"za",vi:"vn",wa:"be",wo:"sn",xh:"za",yi:"il",yo:"ng",za:"cn",zh:"cn",zu:"za",ace:"id",ady:"ru",agq:"cm",alt:"ru",amo:"ng",asa:"tz",ast:"es",awa:"in",bal:"pk",ban:"id",bas:"cm",bax:"cm",bbc:"id",bem:"zm",bez:"tz",bfq:"in",bft:"pk",bfy:"in",bhb:"in",bho:"in",bik:"ph",bin:"ng",bjj:"in",bku:"ph",bqv:"ci",bra:"in",brx:"in",bss:"cm",btv:"pk",bua:"ru",buc:"yt",bug:"id",bya:"id",byn:"er",cch:"ng",ccp:"in",ceb:"ph",cgg:"ug",chk:"fm",chm:"ru",chp:"ca",chr:"us",cja:"kh",cjm:"vn",ckb:"iq",
crk:"ca",csb:"pl",dar:"ru",dav:"ke",den:"ca",dgr:"ca",dje:"ne",doi:"in",dsb:"de",dua:"cm",dyo:"sn",dyu:"bf",ebu:"ke",efi:"ng",ewo:"cm",fan:"gq",fil:"ph",fon:"bj",fur:"it",gaa:"gh",gag:"md",gbm:"in",gcr:"gf",gez:"et",gil:"ki",gon:"in",gor:"id",grt:"in",gsw:"ch",guz:"ke",gwi:"ca",haw:"us",hil:"ph",hne:"in",hnn:"ph",hoc:"in",hoj:"in",ibb:"ng",ilo:"ph",inh:"ru",jgo:"cm",jmc:"tz",kaa:"uz",kab:"dz",kaj:"ng",kam:"ke",kbd:"ru",kcg:"ng",kde:"tz",kdt:"th",kea:"cv",ken:"cm",kfo:"ci",kfr:"in",kha:"in",khb:"cn",
khq:"ml",kht:"in",kkj:"cm",kln:"ke",kmb:"ao",koi:"ru",kok:"in",kos:"fm",kpe:"lr",krc:"ru",kri:"sl",krl:"ru",kru:"in",ksb:"tz",ksf:"cm",ksh:"de",kum:"ru",lag:"tz",lah:"pk",lbe:"ru",lcp:"cn",lep:"in",lez:"ru",lif:"np",lis:"cn",lki:"ir",lmn:"in",lol:"cd",lua:"cd",luo:"ke",luy:"ke",lwl:"th",mad:"id",mag:"in",mai:"in",mak:"id",man:"gn",mas:"ke",mdf:"ru",mdh:"ph",mdr:"id",men:"sl",mer:"ke",mfe:"mu",mgh:"mz",mgo:"cm",min:"id",mni:"in",mnk:"gm",mnw:"mm",mos:"bf",mua:"cm",mwr:"in",myv:"ru",nap:"it",naq:"na",
nds:"de","new":"np",niu:"nu",nmg:"cm",nnh:"cm",nod:"th",nso:"za",nus:"sd",nym:"tz",nyn:"ug",pag:"ph",pam:"ph",pap:"bq",pau:"pw",pon:"fm",prd:"ir",raj:"in",rcf:"re",rej:"id",rjs:"np",rkt:"in",rof:"tz",rwk:"tz",saf:"gh",sah:"ru",saq:"ke",sas:"id",sat:"in",saz:"in",sbp:"tz",scn:"it",sco:"gb",sdh:"ir",seh:"mz",ses:"ml",shi:"ma",shn:"mm",sid:"et",sma:"se",smj:"se",smn:"fi",sms:"fi",snk:"ml",srn:"sr",srr:"sn",ssy:"er",suk:"tz",sus:"gn",swb:"yt",swc:"cd",syl:"bd",syr:"sy",tbw:"ph",tcy:"in",tdd:"cn",tem:"sl",
teo:"ug",tet:"tl",tig:"er",tiv:"ng",tkl:"tk",tmh:"ne",tpi:"pg",trv:"tw",tsg:"ph",tts:"th",tum:"mw",tvl:"tv",twq:"ne",tyv:"ru",tzm:"ma",udm:"ru",uli:"fm",umb:"ao",unr:"in",unx:"in",vai:"lr",vun:"tz",wae:"ch",wal:"et",war:"ph",xog:"ug",xsr:"np",yao:"mz",yap:"fm",yav:"cm",zza:"tr"}[h[0]];return d};k.getWeekend=function(h){var d=k._region(h);h={"in":0,af:4,dz:4,ir:4,om:4,sa:4,ye:4,ae:5,bh:5,eg:5,il:5,iq:5,jo:5,kw:5,ly:5,ma:5,qa:5,sd:5,sy:5,tn:5}[d];d={af:5,dz:5,ir:5,om:5,sa:5,ye:5,ae:6,bh:5,eg:6,il:6,
iq:6,jo:6,kw:6,ly:6,ma:6,qa:6,sd:6,sy:6,tn:6}[d];void 0===h&&(h=6);void 0===d&&(d=0);return{start:h,end:d}};return k})},"dijit/_base/manager":function(){define(["dojo/_base/array","dojo/_base/config","dojo/_base/lang","../registry","../main"],function(n,m,k,h,d){var b={};n.forEach("byId getUniqueId findWidgets _destroyAll byNode getEnclosingWidget".split(" "),function(c){b[c]=h[c]});k.mixin(b,{defaultDuration:m.defaultDuration||200});k.mixin(d,b);return d})},"xide/widgets/StructuralWidget":function(){define(["dcl/dcl",
"xide/widgets/WidgetBase","xide/utils","xide/factory"],function(n,m,k,h){return n(m,{title:" ",declaredClass:"xide.widgets.StructuralWidget",cssClass:"StructuralWidget",templateString:"\x3cdiv class\x3d'' style\x3d''\x3e\x3cdiv attachTo\x3d'titleColumn' class\x3d''\x3e\x3cspan attachTo\x3d'titleNode'\x3e${!title}\x3c/span\x3e\x3c/div\x3e\x3cdiv valign\x3d'middle' class\x3d'' attachTo\x3d'valueNode'\x3e${!value}\x3c/div\x3e\x3c/div\x3e",onValueChanged:function(d){var b={};_.each(this.cis,function(c){b[c.id]=
c.value});this.setValue(JSON.stringify(b,null,2))},render:function(d){var b=k.getJson(this.userData.value);_.each(b,function(b,g){if(g=k.getInputCIByName(d,g))g.value=b});this.cis=d;this.$valueNode.empty();return h.renderCIS(d,this.valueNode,this)},_render:function(d){d=h.renderCIS(d,this.valueNode,this.owner);d.then(function(){});return d},startup:function(){$(this.domNode).addClass(this.cssClass);this.onReady()}})})},"xfile/views/FilePicker":function(){define("dcl/dcl xide/types xide/utils xide/factory module xide/_base/_Widget xdocker/Docker2 xfile/ThumbRenderer dojo/promise/all xfile/Breadcrumb".split(" "),
function(n,m,k,h,d,b,c,g,p,a){return n(b,{declaredClass:"xfile.views.FilePicker",templateString:'\x3cdiv class\x3d"FilePicker"\x3e\x3c/div\x3e',resizeToParent:!0,docker:null,dockerOptions:{resizeToParent:!0},breadcrumb:null,leftStore:null,rightStore:null,storeOptionsMixin:null,storeOptions:null,leftGrid:null,leftGridArgs:null,rightGrid:null,rightGridArgs:null,removePermissions:[m.ACTION.OPEN_IN_TAB],defaultGridArgs:{registerEditors:!1,_columns:{Name:!0,Path:!1,Size:!1,Modified:!1}},selection:null,
mount:"root",_selection:null,getDocker:function(){if(this.docker)return this.docker;var a=this.dockerOptions||{resizeToParent:!0},a=this.docker||c.createDefault(this.domNode,a);a.resizeToParent=!0;this.add(a,null,!1);return this.docker=a},createLayout:function(){var b=this.getDocker();this.layoutTop=b.addPanel("DefaultFixed",m.DOCKER.DOCK.TOP,null,{h:50,title:!1});this.layoutTop._minSize.y=50;this.layoutTop._maxSize.y=50;this.layoutTop._scrollable={x:!1,y:!1};this.breadcrumb=k.addWidget(a,{},null,
this.layoutTop,!0);this.layoutLeft=b.addPanel("DefaultFixed",m.DOCKER.DOCK.BOTTOM,null,{w:100,title:!1});this.layoutLeft._minSize.x=150;this.layoutLeft.moveable(!0);this.layoutMain=b.addPanel("DefaultFixed",m.DOCKER.DOCK.RIGHT,this.layoutLeft,{w:"70%",title:!1});this.layoutTop.initSize(100,"100%");this.layoutLeft.initSize("100%",150);b.resize()},setSelection:function(a){this._selection=a},connectGrids:function(a,b){var c=this;b._on("selectionChanged",function(a){"deselect"!==a.why&&(a=b.getSelection(),
b.getSelectedItem()&&c.setSelection(a))});a._on("selectionChanged",function(e){e=a.getSelection();var g=a.getSelectedItem();g||(g=a.getCurrentFolder());if(g){var d=null;g.directory?d=g:(g.getParent||console.error("item has no item.getParent!"),d=g.getParent?g.getParent():null);d&&b.openFolder(d.path,!1);g&&c.setSelection(e)}})},createFileGrid:function(a,b,c){return this.Module.createDefault(this.ctx,c,b,!1,!0,a)},onLeftGridReady:function(a){},onRightGridReady:function(a){},onError:function(a,b){},
startGrids:function(a,b){var c=this,e=a.collection,g=b.collection,d={focus:!0,append:!1},h=[a.refresh(),b.refresh()],q=this.selection,n=k.pathinfo(q,m.PATH_PARTS.ALL).dirname||"";"."===n&&(n=q);a.showStatusbar&&a.showStatusbar(!1);a._on("changeSource",function(a){b.changeSource(a,!0)});a._on("changedSource",function(b){a.select([0],null,!0,d)});b._on("changeSource",function(b){a.changeSource(b,!0)});b._on("changedSource",function(b){a.select([0],null,!0,d)});p(h).then(function(){c.onLeftGridReady(a);
c.onRightGridReady(b);c.getDocker().resize();p([e.getItem(n,!0),g.getItem(n,!0)]).then(function(e){p(_.invoke([a],"openFolder",n)).then(function(){p(_.invoke([a,b],"select",[q],null,!0,d)).then(function(){q._selection=q;c.connectGrids(a,b)},function(a){c.onError(a,"selecting items")})},function(a){c.onError(a,"open folder")})},function(a){c.onError(a,"loading items")})},function(a){c.onError(err,"refresh grid")})},setupBreadcrumb:function(a,b,c){function e(a,b,c){g.grid!=c&&g.setSource(c);g.clear();
g.setPath(".",d.getRootItem(),b.getPath(),a)}var g=this.breadcrumb;a.getCurrentFolder();var d=a.collection,h=b.collection;g.setSource(a);this.addHandle("click",a.on("click",function(){g.setSource(a)}));this.addHandle("click",b.on("click",function(){g.setSource(b)}));a._on("openFolder",function(b){e(d,b.item,a)});b._on("openFolder",function(a){e(h,a.item,b)})},destroy:function(){k.destroy(this.leftStore);k.destroy(this.rightStore);k.destroy(this.leftGrid);k.destroy(this.rightGrid);k.destroy(this.breadcrumb);
k.destroy(this.docker)},startup:function(){this.createLayout();var a=this.layoutLeft,b=this.layoutMain,c=this.ctx,d=c.config,p=this.mount||"root",v=this.storeOptions,m=this.storeOptionsMixin||{includeList:"*.jpg,*.png",excludeList:"*"},n=this.leftStore||h.createFileStore(p,v,d,m,c,m),c=this.rightStore||h.createFileStore(p,v,d,m,c,m),p=this.layoutMain,d=k.mixin({},k.clone(this.defaultGridArgs)),z=this.removePermissions,p=k.mixin(d,this.leftGridArgs||{newTarget:p});_.remove(p.permissions,function(a){return-1!==
_.indexOf(z,a)});this.leftGrid=a=this.leftGrid||this.createFileGrid(n,a,p);n=k.mixin(d,this.rightGridArgs||{selectedRenderer:g});_.remove(n.permissions,function(a){return-1!==_.indexOf(z,a)});this.rightGrid=b=this.rightGrid||this.createFileGrid(c,b,n);return this.startGrids(a,b)}})})},"dojo/noob":function(){define([],function(){})},"xwire/WidgetSource":function(){define(["dcl/dcl","dojo/_base/kernel"],function(n,m,k){return n(m,{declaredClass:"xwire.WidgetSource",trigger:null,object:null,onTriggered:function(h){var d=
this;this.object&&!0===this.object.ignore?setTimeout(function(){d.object.ignore=!1},500):this.binding&&this.binding.trigger({value:h,source:this})},start:function(){var h=this;this.handle=k.connect(this.object,this.trigger,function(d){h.onTriggered(d)})},destroy:function(){this.handle.remove()}})})},"dojo/cache":function(){define(["./_base/kernel","./text"],function(n){return n.cache})},"xgrid/Selection":function(){define("xdojo/declare xdojo/has xide/types xide/utils dgrid/Selection dojo/dom-class dojo/on dojo/Deferred xide/lodash xide/$".split(" "),
function(n,m,k,h,d,b,c,g,p,a){function e(a){var b=[];a&&a.rows&&a.rows.forEach(function(a){b.push(a.id)});return b}function q(a){return p.all(a,function(b){return b.length==a[0].length&&0==p.difference(b,a[0]).length})}function u(a,b,c){a=(a?a.map(function(a){return a?a.data||a:{}}):[]).map(function(a){return a[c]});b=b.map(function(a){return a[c]});return a.join(",")===b.join(",")}function w(b){a(b.domNode).find(".dgrid-focus").each(function(b,c){a(c).removeClass("dgrid-focus")})}m={_lastSelection:null,
_lastFocused:null,_refreshInProgress:null,__lastLast:null,__lastFirst:null,_muteSelectionEvents:!0,selectAll:function(a){this.select(this.getRows(a),null,!0,{append:!1,delay:1})},setState:function(a){a&&a.selection&&a.selection.selection&&this.select(a.selection.selection,null,!0,{expand:!0,append:!1,scrollInto:!0},"restore");return this.inherited(arguments)},getState:function(a){a=this.inherited(arguments)||{};var b=this._preserveSelection(),c={selection:[]},e=this.collection.idProperty;b.selection&&
e&&p.each(b.selection,function(a){a&&a[e]&&c.selection.push(a[e])});b.focused&&(c.focused=b.focused.path);a.selection=c;return a},refresh:function(a){if(!this.isRendered())return!1;if(this._refreshInProgress)return this._refreshInProgress;var b=!1!==a?this._preserveSelection():null,c=this,e=this.isActive(),g=this.inherited(arguments);(this._refreshInProgress=g)&&g.then&&g.then(function(){c._refreshInProgress=null;e&&b&&c._restoreSelection(b,1,!e,"restore")});return g},_normalize:function(a){if(!a)return null;
a.element||(a=this.cell(a));a&&a.row&&(a=a.row);return a},deselectAll:function(){this._lastSelection&&(this.clearSelection(),this._lastFocused=this._lastSelection=null,a(this.domNode).find(".dgrid-focus").each(function(b,c){a(c).removeClass("dgrid-focus")}),this._emit("selectionChanged",{selection:[],why:"clear",source:"code"}))},invertSelection:function(a){var b=a||this._getSelection()||[],c=[];a=this.getRows();p.each(a,function(a){-1===b.indexOf(a)&&c.push(a)});return this.select(c,null,!0,{append:!1})},
runAction:function(a){p.isString(a)&&(a=this.getActionStore().getSync(a));return"File/Select/None"===a.command?(this.deselectAll(),!0):"File/Select/All"===a.command?(this.selectAll(),!0):"File/Select/Invert"===a.command?this.invertSelection():this.inherited(arguments)},_preserveSelection:function(){this.__lastSelection=this._getSelection();this._lastFocused=this.getFocused();return{selection:this._getSelection(),focused:this.getFocused()}},_restoreSelection:function(a,b,c,e){var g=a?a.focused:this._lastFocused;
a=a?a.selection:this.__lastSelection;if(p.isEmpty(a))this._lastFocused=g=null;else return b=this.select(a,null,!0,{silent:null!=c?c:!0,append:!1,delay:null!=b?b:0},e),g&&this.isActive()&&this.focus(this.row(g)),b},getPrevious:function(a,b,c){a=a||this.getFocused(b);a=this._normalize(a);var e=this.cell(this._move(a,-1,"dgrid-row"));if(e&&e.row&&(e=e.row[b?"element":"data"],!0===c&&this.isSelected(e))){if(a&&a.data&&a.data==e)return null;if(a=this.getPrevious(e,b,c))return a}return e},getNext:function(a,
b,c){a=a||this.getFocused(b);a=this._normalize(a);var e=this.cell(this._move(a,1,"dgrid-row"));if(e&&e.row&&(e=e.row[b?"element":"data"],!0===c&&this.isSelected(e))){if(a&&a.data&&a.data==e)return null;if(a=this.getNext(e,b,c))return a}return e},getSelection:function(a){return this._getSelection(a)},_getSelection:function(a){var b=[];if(this.collection){for(var c in this.selection){var e=this.collection.getSync(c);e&&b.push(e)}if(a)return b.filter(a)}return b},_getSelected:function(){return a(".dgrid-selected",
this.domNode)},getSelectedItem:function(a){a=this.getSelection(a);return 1===a.length?a[0]:null},postCreate:function(){var a=this;if(!0===this.options[k.GRID_OPTION.CLEAR_SELECTION_ON_CLICK]){var c=function(a){a&&a.target&&b.contains(a.target,"dgrid-content")&&this.deselectAll()}.bind(this);this.on("click",function(a){c(a)}.bind(this))}this.on("dgrid-select",function(b){var c=e(a._lastSelection),g=e(b);q([c,g])||(delete a._lastSelection,a._lastSelection=b,a._emit("selectionChanged",{selection:a._getSelection(),
why:"select",source:b.parentType}))});return this.inherited(arguments)},_fireSelectionEvents:function(){if(!0!==this._muteSelectionEvents)return this.inherited(arguments)},__select:function(a,b,c,e,g){p.each(a,function(a){a&&(a=this.row(a))&&this._select(a,b,c)},this);e&&e.resolve(a);this._muteSelectionEvents=!1;this._fireSelectionEvents();if((e=this.getRows())&&e.length&&a&&a.length&&c&&g&&"mouse"!==g){var d=a[a.length-1];if(e[e.length-1]==d){if(this.__lastLast&&this.__lastLast==d){-1===g.indexOf("pointer")&&
this._emit("bounced",{direction:1,item:d});return}this.__lastLast=d}else this.__lastLast=null;a=a[0];e[0]==a?this.__lastFirst&&this.__lastFirst==a?-1===g.indexOf("pointer")&&this._emit("bounced",{direction:-1,item:a}):this.__lastFirst=a:this.__lastFirst=null}else this.__lastFirst=null},select:function(a,b,c,e,d){clearTimeout(this._selectTimer);this._selectTimer=null;var q="mouse"===d;this.isActive();var r=new g;d=d||"";e=e||{};q&&(e.focus=!0);c=null===c?!0:c;var q=e.delay||0,k=this,v=this.collection,
m=v.idProperty;!0===e.silent&&(k._muteSelectionEvents=!0);var n=h.isArray(a)?a:[a];if(!p.isEmpty(n)){var x=[];if(p.isNumber(n[0])){var A=k.getRows();p.each(n,function(a){x.push(A[a])});n=x}else p.isString(n[0])?(p.each(n,function(a){(a=v.getSync(a))&&x.push(a)}),n=x):n&&n[0]&&n[0].tagName&&(p.each(n,function(a){x.push(k.row(a).data)}),n=x);if(!n.length)return r.resolve(),r;a=(this._lastSelection?this._lastSelection.rows:[]).map(function(a){return a.data});a=u(n,a,m);"update"===d&&c&&(e.focus=!0,e.append=
!1,e.delay=1);"dgrid-cellfocusin"===d&&(e.focus=!0);!1===e.append&&c&&!a&&(k.clearSelection(n),w(k));if(!a||"update"!==d&&"dgrid-cellfocusin"!==d)return!0===e.focus&&e.expand&&(k.isRendered(n[0])||k._expandTo(n[0])),e.expand&&(k.isRendered(n[0])||k._expandTo(n[0])),e.scrollInto&&"restore"!==d&&(a=this.row(n[0]),a.element&&a.element.scrollIntoView()),q&&n.length?this._selectTimer=setTimeout(function(){!k.destroyed&&k.collection&&(!1===e.append&&k.clearSelection(),w(k),k.focus(n[0],!1),k.__select(n,
b,c,r,d))},q):k.__select(n,b,c,r,d),r;e.focus&&(w(k),k.focus(n[0]))}},_setLast:function(a){for(var b=[],c=0;c<a.length;c++)b.push(this.collection.getIdentity(a[c]))},isExpanded:function(a){a=this._normalize("root");return!!this._expanded[a.id]},_expandTo:function(a){if(a){var b=this.collection;p.isString(a)&&(a=b.getSync(a));if(b=b.getSync(a[b.parentField])||a.getParent?a.getParent():null)this.isRendered(b)?(this.isExpanded(b)||this.expand(b,!0,!0),this.isExpanded(a)||this.expand(a,!0,!0)):this._expandTo(b)}},
startup:function(){var a=this.inherited(arguments);this.addHandle("keyup",c(this.domNode,"keyup",function(a){if(!a.metaKey&&!a.altKey){var b=this.keyMap[a.keyCode],c;if(c=b)c=!(a.target.type&&32===a.keyCode);c&&0==this._getSelection().length&&b.call(this,a)}}.bind(this)));return a}};n=n("xgrid.Selection",d,m);n.Implementation=m;return n})},"davinci/ve/widgets/ColorPicker":function(){define(["davinci/ve/widgets/ColorPicker2","dijit/popup"],function(n){return n})},"xide/serverDebug":function(){define(["xdojo/declare",
"xdojo/has"],function(n,m){n=n("xide.serverDebug",null,{});var k={group:1,groupEnd:1,groupCollapsed:1,warn:1,error:1,info:1,table:1,log:1};n.logError=function(h){h=JSON.parse(atob(h));var d={},b,c;for(c in h.columns)b=h.columns[c],d[b]=c;c=h.rows;b=0;var g=c.length;for(b=0;b<g;b++){var p=c[b],a=p[d.label],e=p[d.log],p=p[d.type]||"log",q=!1;-1===h.columns.indexOf("label")&&(q=!0);q||(q=a&&"string"===typeof a,e=[e],q&&e.unshift(a));for(var a=[],u,m,r=0;r<e.length;r++)q=e[r],u=a[a.length-1],q&&"object"===
typeof q&&q.___class_name&&(m="%c"+q.___class_name,"string"===typeof u?a[a.length-1]=u+" "+m:a.push(m),a.push("color: #0563ad; font-weight: bold;"),delete e[r].___class_name),a.push(q);p in k||(p="log");console[p].apply(console,a)}};return n})},"davinci/html/CSSImport":function(){define(["dojo/_base/declare","davinci/html/CSSElement","davinci/model/Path","davinci/html/CSSFile"],function(n,m,k,h){return n("davinci.html.CSSImport",m,{constructor:function(){this.elementType="CSSImport"},getCSSFile:function(){return this.parent},
setUrl:function(d){this.url=d},visit:function(d){if(!d.visit(this)){for(var b=0;b<this.children.length;b++)this.children[b].visit(d);this.cssFile&&this.cssFile.visit(d)}d.endVisit&&d.endVisit(this)},getText:function(d){s="@import ";return s=this.isURL?s+('url("'+this.url+'");'):s+('"'+this.url+'";')},close:function(d){require("davinci/model/Factory").closeModel(this.cssFile);this.connection&&dojo.disconnect(this.connection);delete this.connection},load:function(d){for(var b=this.parent;b&&!b.url&&
!b.fileName;)b=b.parent;b=new k(b.url||b.fileName);b=b.getParentPath().append(this.url);b=b.toString();this.cssFile=require("davinci/model/Factory").getModel({url:b,loader:this.parent.loader,includeImports:this.parent.includeImports||d});this.cssFile.relativeURL=this.url;this.connection=dojo.connect(this.cssFile,"onChange",this.parent,"onChange")}})})},"xcf/types/Types":function(){define("xaction/types xide/types/Types xide/types xide/utils/ObjectUtils xide/utils xide/utils/HexUtils".split(" "),function(n,
m,k,h,d,b){String.prototype.setBytes||(String.prototype.setBytes=function(b){this.bytes=b});String.prototype.getBytes||(String.prototype.getBytes=function(){return this.bytes?this.bytes:b.stringToBuffer(this)});String.prototype.getString||(String.prototype.getString=function(){return this.string});String.prototype.setString||(String.prototype.setString=function(b){this.string=b});String.prototype.hexString||(String.prototype.hexString=function(){var c=this.getBytes();return b.bufferToHexString(c)});
k.VARIABLE_FLAGS={PUBLISH:2,PUBLISH_IF_SERVER:4};k.LOGGING_FLAGS={NONE:0,GLOBAL_CONSOLE:1,STATUS_BAR:2,POPUP:4,FILE:8,DEV_CONSOLE:16,DEVICE_CONSOLE:32};d.mixin(k.ITEM_TYPE,{DEVICE:"Device",DEVICE_GROUP:"Device Group",DRIVER:"Driver",DRIVER_GROUP:"Driver Group",PROTOCOL:"Protocol",PROTOCOL_GROUP:"Protocol Group"});k.SERVICE_STATUS={OFFLINE:"offline",ONLINE:"online",TIMEOUT:"timeout"};k.PROTOCOL={TCP:"tcp",UDP:"udp",SERIAL:"serial",DRIVER:"driver",SSH:"ssh",MQTT:"mqtt"};d.mixin(k.EVENTS,{ON_DEBUGGER_READY:"onDebuggerReady",
ON_DEVICE_SELECTED:"onDeviceSelected",ON_DEVICE_GROUP_SELECTED:"onDeviceGroupSelected",ON_PROTOCOL_SELECTED:"onProtocolSelected",ON_PROTOCOL_GROUP_SELECTED:"onProtocolGroupSelected",ON_PROTOCOL_CHANGED:"onProtocolChanged",ON_MQTT_MESSAGE:"onMQTTMessage",ON_DEVICE_MESSAGE:"onDeviceMessage",ON_DEVICE_MESSAGE_EXT:"onDeviceMessageExt",ON_COMMAND_FINISH:"onCommandFinish",ON_COMMAND_PROGRESS:"onCommandProgress",ON_COMMAND_PAUSED:"onCommandPaused",ON_COMMAND_STOPPED:"onCommandStopped",ON_COMMAND_ERROR:"onCommandError",
ON_DEVICE_DISCONNECTED:"onDeviceDisconnected",ON_DEVICE_CONNECTED:"onDeviceConnected",ON_DEVICE_COMMAND:"onDeviceCommand",ON_DEVICE_STATE_CHANGED:"onDeviceStateChanged",ON_DEVICE_DRIVER_INSTANCE_READY:"onDeviceDriveInstanceReady",ON_DRIVER_SELECTED:"onDriverSelected",ON_DRIVER_GROUP_SELECTED:"onDriverGroupSelected",ON_DRIVER_VARIABLE_ADDED:"onDriverVariableAdded",ON_DRIVER_VARIABLE_REMOVED:"onDriverVariableRemoved",ON_DRIVER_VARIABLE_CHANGED:"onDriverVariableChanged",ON_DRIVER_COMMAND_ADDED:"onDriverCommandAdded",
ON_DRIVER_COMMAND_REMOVED:"onDriverCommandRemoved",ON_DRIVER_COMMAND_CHANGE:"onDriverVariableChanged",ON_SCOPE_CREATED:"onScopeCreated",ON_DRIVER_MODIFIED:"onDriverModified",SET_DEVICE_VARIABLES:"setDeviceVariables",ON_SERVER_LOG_MESSAGE:"onServerLogMessage",ON_CLIENT_LOG_MESSAGE:"onClientLogMessage",ON_DEVICE_SERVER_CONNECTED:"onDeviceServerConnected",ON_RUN_CLASS_EVENT:"onRunClassEvent"});k.MESSAGE_SOURCE={DEVICE:"DEVICE",GUI:"GUI",BLOX:"BLOX",CODE:"CODE"};k.DEVICE_STATE={CONNECTING:"DeviceIsConnecting",
CONNECTED:"DeviceIsConnected",SYNCHRONIZING:"DeviceIsSynchronizing",READY:"DeviceIsReady",DISCONNECTED:"DeviceIsDisconnected",DISABLED:"DeviceIsDisabled",LOST_DEVICE_SERVER:"LostDeviceServerConnection"};k.DRIVER_PROPERTY={CF_DRIVER_NAME:"CF_DRIVER_NAME",CF_DRIVER_ICON:"CF_DRIVER_ICON",CF_DRIVER_CLASS:"CF_DRIVER_CLASS",CF_DRIVER_ID:"CF_DRIVER_ID",CF_DRIVER_COMMANDS:"CF_DRIVER_COMMANDS",CF_DRIVER_VARIABLES:"CF_DRIVER_VARIABLES",CF_DRIVER_RESPONSES:"CF_DRIVER_RESPONSES"};k.PROTOCOL_PROPERTY={CF_PROTOCOL_TITLE:"Title",
CF_PROTOCOL_ICON:"CF_PROTOCOL_ICON",CF_PROTOCOL_CLASS:"CF_PROTOCOL_CLASS",CF_PROTOCOL_ID:"CF_PROTOCOL_ID",CF_PROTOCOL_COMMANDS:"CF_PROTOCOL_COMMANDS",CF_PROTOCOL_VARIABLES:"CF_PROTOCOL_VARIABLES",CF_PROTOCOL_RESPONSES:"CF_PROTOCOL_RESPONSES"};k.DEVICE_PROPERTY={CF_DEVICE_DRIVER:"Driver",CF_DEVICE_HOST:"Host",CF_DEVICE_PORT:"Port",CF_DEVICE_PROTOCOL:"Protocol",CF_DEVICE_TITLE:"Title",CF_DEVICE_ID:"Id",CF_DEVICE_ENABLED:"Enabled",CF_DEVICE_OPTIONS:"Options",CF_DEVICE_DRIVER_OPTIONS:"DriverOptions",
CF_DEVICE_LOGGING_FLAGS:"Logging Flags"};k.LOG_OUTPUT={DEVICE_CONNECTED:"Device Connected",DEVICE_DISCONNECTED:"Device Disonnected",RESPONSE:"Response",SEND_COMMAND:"Send Command",DEVICE_ERROR:"Device Error"};k.DEFAULT_DEVICE_LOGGING_FLAGS={};n=k.LOGGING_FLAGS;k.DEFAULT_DEVICE_LOGGING_FLAGS[k.LOG_OUTPUT.DEVICE_CONNECTED]=n.GLOBAL_CONSOLE|n.POPUP|n.STATUS_BAR|n.DEVICE_CONSOLE;k.DEFAULT_DEVICE_LOGGING_FLAGS[k.LOG_OUTPUT.DEVICE_DISCONNECTED]=n.GLOBAL_CONSOLE|n.POPUP|n.STATUS_BAR|n.DEVICE_CONSOLE;k.DEFAULT_DEVICE_LOGGING_FLAGS[k.LOG_OUTPUT.RESPONSE]=
n.DEVICE_CONSOLE|n.GLOBAL_CONSOLE;k.DEFAULT_DEVICE_LOGGING_FLAGS[k.LOG_OUTPUT.SEND_COMMAND]=n.DEVICE_CONSOLE|n.GLOBAL_CONSOLE;k.DEFAULT_DEVICE_LOGGING_FLAGS[k.LOG_OUTPUT.DEVICE_ERROR]=n.GLOBAL_CONSOLE|n.POPUP|n.STATUS_BAR|n.DEV_CONSOLE|n.DEVICE_CONSOLE;k.DRIVER_FLAGS={RUNS_ON_SERVER:2,DEBUG:4,SERVER:16};d.mixin(k.ITEM_TYPE,{CF_DRIVER_VARIABLE:"DriverVariable",CF_DRIVER_BASIC_COMMAND:"DriverBasicCommand",CF_DRIVER_CONDITIONAL_COMMAND:"DriverConditionalCommand",CF_DRIVER_RESPONSE_VARIABLE:"DriverResponseVariable"});
k.BLOCK_GROUPS={CF_DRIVER_VARIABLE:"DriverVariable",CF_DRIVER_BASIC_COMMAND:"DriverBasicCommand",CF_DRIVER_CONDITIONAL_COMMAND:"DriverConditionalCommand",CF_DRIVER_RESPONSE_VARIABLE:"DriverResponseVariable",CF_DRIVER_RESPONSE_BLOCKS:"conditionalProcess",CF_DRIVER_RESPONSE_VARIABLES:"processVariables",CF_DRIVER_BASIC_VARIABLES:"basicVariables"};k.COMMAND_TYPES={BASIC_COMMAND:"basic",CONDITIONAL_COMMAND:"conditional",INIT_COMMAND:"init"};d.mixin(k.ECIType,{DEVICE_NETWORK_SETTINGS:k.ECIType.END+1,DRIVER_COMMAND_SETTINGS:"CommandSettings"});
k.VFS_ROOTS={SYSTEM_DRIVERS:"system_drivers",USER_DRIVERS:"user_drivers"};k.SOCKET_SERVER_COMMANDS={SIGNAL_MANAGER:"Manager_command",RUN_FILE:"Run_File",RUN_CLASS:"Run_Class",RUN_APP_SERVER_CLASS:"Run_App_Server_Class",RUN_APP_SERVER_CLASS_METHOD:"Run_App_Server_Class_Method",RUN_APP_SERVER_COMPONENT_METHOD:"Run_App_Server_Component_Method",CANCEL_APP_SERVER_COMPONENT_METHOD:"Cancel_App_Server_Component_Method",ANSWER_APP_SERVER_COMPONENT_METHOD_INTERRUPT:"Answer_App_Server_Component_Method_Interrupt",
SIGNAL_DEVICE:"Device_command",SIGNAL_RESPONSE:"WebSocket_response",MANAGER_TEST:"Manager_Test",MANAGER_CLOSE_ALL:"Close_All_Connections",MANAGER_STATUS:"status",MANAGER_START_DRIVER:"startDriver",START_DEVICE:"startDevice",STOP_DEVICE:"stopDevice",CREATE_CONNECTION:"createConnection",MANAGER_STOP_DRIVER:"stopDriver",DEVICE_SEND:"Device_Send",CALL_METHOD:"Call_Method",RUN_SHELL:"Run_Shell",WATCH:"Watch_Directory",MQTT_PUBLISH:"MQTT_PUBLISH",MQTT_SUBSCRIBE:"MQTT_SUBSCRIBE",GET_DEVICE_VARIABLES:"getVariables",
WRITE_LOG_MESSAGE:"Write_Log_Message",INIT_DEVICES:"INIT_DEVICES",PROTOCOL_METHOD:"PROTOCOL_METHOD"};return k})},"davinci/ve/_Widget":function(){define("davinci/ve/_Widget","dojo/_base/declare ./metadata ../html/CSSModel dojox/html/entities davinci/ve/utils/StyleArray davinci/ve/utils/GeomUtils xide/mixins/EventedMixin xide/mixins/ReloadMixin".split(" "),function(n,m,k,h,d,b,c,g){var p=function(a,b,c){if(a==b)return!0;if(!a||!b||a.length!=b.length)return!1;for(var e=0;e<a.length;e++)if(c){if(!c(a[e],
b[e]))return!1}else if(a[e]!=b[e])return!1;return!0};return n("davinci.ve._Widget",[c,g],{isWidget:!0,acceptsHTMLChildren:!1,_skipAttrs:"id style class dir lang _children".split(" "),constructor:function(a,b,c,g){this.domNode=b;this.id=b.id;b._dvWidget=this;this._params=dojo.mixin({},a);this.type=c;this.metadata=g},postscript:function(){var a;if(this.domNode){var b=this.domNode.ownerDocument;b.body._edit_context?a=b.body._edit_context:b.body._dvWidget&&b.body._dvWidget._edit_context&&(a=b.body._dvWidget._edit_context)}this.id&&
a&&(a.widgetHash[this.id]=this);this.buildRendering();this.postCreate()},buildRendering:function(){},postCreate:function(){},getObjectType:function(){},getContext:function(){return this._edit_context},getChildren:function(a){var b=this.getHelper();return b&&b.getChildren?b.getChildren(this,a):this._getChildren(a)},indexOf:function(a){var b=this.getHelper();return b&&b.indexOf?b.indexOf(this,a):dojo.indexOf(this.getChildren(),a)},_getChildrenForTree:function(a){a=this.getContainerNode();var b=[];a&&
!a.children.length&&this.domNode.children.length&&(a=this.domNode);a&&dojo.forEach(a.children,function(a){a=dijit.registry.getEnclosingWidget(a);a!=this&&b.push(a)});return b},_getChildren:function(a){var b=this.getContainerNode(),c=[];b&&dojo.forEach(b.children,function(b){a?c.push(require("davinci/ve/widget").getWidget(b)):(b=b._dvWidget)&&c.push(b)});return c},getContainerNode:function(){var a=this.getHelper();return a&&a.getContainerNode?a.getContainerNode(this):"NONE"!==m.getAllowedChild(this.type)[0]?
this._getContainerNode():null},_getContainerNode:function(){return this.domNode},getMetadata:function(){this.metadata||(this.metadata=m.query(this));return this.metadata},getHelper:function(){this._edit_helper||(this._edit_helper=require("davinci/ve/widget").getWidgetHelper(this.type));return this._edit_helper},attr:function(a,b){var c=this._attr.apply(this,arguments);if(1<arguments.length)b=this._stringValue(a,b),this._srcElement.addAttribute(a,b);else return c},_attr:function(a,b){},indexOf:function(a){var b=
this.getHelper();return b&&b.indexOf?b.indexOf(this,a):dojo.indexOf(this.getChildren(),a)},getStyleNode:function(){return this.styleNode||this.domNode},addChild:function(a,b){if(this.getContainerNode()){if(void 0===b||null===b||-1===b)this._srcElement.addChild(a._srcElement);else{var c=this.getChildren();b<c.length?this._srcElement.insertBefore(a._srcElement,c[b]._srcElement):this._srcElement.addChild(a._srcElement)}(c=this.getHelper())&&c.addChild?c.addChild(this,a,b):this._addChildToDom.apply(this,
arguments)}},_addChildToDom:function(a,b){try{var c=a.domNode,e=this.getContainerNode();if(void 0===b||null===b||-1===b)e.appendChild(c);else{var g=this.getChildren();b<g.length?e.insertBefore(c,g[b].domNode):e.appendChild(c)}}catch(r){debugger}},getParent:function(){return require("davinci/ve/widget").getEnclosingWidget(this.domNode.parentNode)||this.domNode.parentNode},getObjectId:function(a){a=a||this;var b=a._edit_object_id;if(b)return b;if(a.domNode)return a.domNode.getAttribute("jsId")},addClass:function(a){var b=
this.getClassNames(),b=b?b.split(/\s+/):[];-1===b.indexOf(a)&&(b.push(a),this._srcElement.setAttribute("class",b.join(" ")),dojo.addClass(this.domNode,a))},getId:function(){if(!this.id){if(!this.domNode.id||!this.type)return;var a=this.domNode.id,b=(this.isHtmlWidget?this.getTagName():this.type).replace(/\./g,"_")+"_";if(a.length>b.length&&a.substring(0,b.length)==b)return}if(!(this._srcElement&&this._srcElement._getAttribute("id")&&this._srcElement._getAttribute("id").noPersist))return this.id},
setMarginBox:function(a){var b=this.getStyleNode();b&&(dojo.marginBox(b,a),this._updateSrcStyle())},getMarginBox:function(){var a=this.domNode,c=null,c=(c=this.getHelper())&&c.getMarginBoxPageCoords?c.getMarginBoxPageCoords(this):b.getMarginBoxPageCoords(a);c.l-=b.getScrollLeft(a);c.t-=b.getScrollTop(a);c.x=c.l;c.y=c.t;return c},getStyle:function(a){return(a=this.getStyleValues(a))?this._styleText(a):""},_sortStyleValues:function(a){a=dojo.clone(a);for(var b=k.shorthand,c=0,g=0;g<b.length;g++){var d;
a:{d=b[g][0];for(var h=0;h<a.length;h++)if(a[h]&&a[h].hasOwnProperty(d)){d=h;break a}d=-1}-1<d&&(h=a[d],a.splice(d,1),a.splice(c,0,h),c++)}return a},_styleText:function(a){var b="";if(dojo.isArray(a)){a=davinci.ve.states.normalizeArray("style",this.domNode,g,a);for(var c=0;c<a.length;c++)for(var g in a[c])value=a[c][g],void 0!==value&&""!=value&&null!=value&&(b+=g+": "+a[c][g]+"; ")}else for(g in a)value=davinci.ve.states.normalize("style",this.domNode,g,a[g]),void 0!==value&&""!=value&&null!=value&&
(b+=g+": "+a[g]+"; ");return b.trim()},getChildrenData:function(a){a=a||{identify:!0};var b=this.getHelper();return b&&b.getChildrenData?b.getChildrenData.apply(b,[this,a]):this._getChildrenData(a)},_getChildrenData:function(a){return this.getChildren().map(function(b){return b.getData(a)})},getClassNames:function(){return this._srcElement.getAttribute("class")||""},_getData:function(a){var b={type:this.type,properties:{}},c=require("davinci/ve/widget");if(a.identify){this._srcElement||(this._srcElement=
c._createSrcElement(this.domNode));var g=this._srcElement._getAttribute("id");g&&g.noPersist&&(b.properties.isTempID=!0);b.properties.id=this.id}!1!==a.preserveTagName&&this.id&&(b.tagName=this._srcElement.tag);g=m.query(this,"property");this.domNode&&this.domNode.parentNode&&(c=c.getEnclosingWidget(this.domNode.parentNode),(c=m.query(c,"childProperties"))&&(g=g?dojo.mixin({},g,c):c));if(g)for(var d in g)if(-1===this._skipAttrs.indexOf(d.toLowerCase())){var c=g[d],h=this.getPropertyValue(d);h&&h.length?
"array"==c.datatype?p(h,c.defaultValue)||(b.properties[d]=h):h!=c.defaultValue&&(b.properties[d]=h):"boolean"!=c.datatype&&"number"!=c.datatype||h==c.defaultValue?c.datatype&&(0==c.datatype.indexOf("dijit")||"object"==c.datatype&&c.isData)&&(b.properties[d]=h):b.properties[d]=h}b.properties.style=this.getStyle(a);(d=this.getClassNames(a))&&(b.properties["class"]=d);b.children=this.getChildrenData(a);b.type.indexOf("delite");return b},getData:function(a){a=a||{identify:!0,preserveStates:!0};var b=
this.getHelper();a=b&&b.getData?b.getData.apply(b,[this,a]):this._getData(a);a.maqAppStates=dojo.clone(this.domNode._maqAppStates);a.maqDeltas=dojo.clone(this.domNode._maqDeltas);a.properties||(a.properties={});if(this.properties)for(var c in this.properties)c in a.properties||(a.properties[c]=this.properties[c]);c=this._srcElement;for(var b=c.attributes,g=0;g<b.length;g++){var d=b[g];"on"==d.name.substr(0,2).toLowerCase()?a.properties[d.name]=d.value:"a"==c.tag.toLowerCase()&&"href"==d.name.toLowerCase()&&
(a.properties[d.name]=d.value)}return a},getPropertyValue:function(a){if("id"===a)return this.getId();if("jsId"===a)return this.getObjectId();var b=this.getHelper();return b&&b.getPropertyValue?b.getPropertyValue(this,a):this._getPropertyValue(a)},_getPropertyValue:function(a){return this.domNode.getAttribute(a)},getTagName:function(){return this.domNode.nodeName.toLowerCase()},getStyleValues:function(){function a(a){for(var b=g.length-1;0<=b;b--)void 0!==g[b][a]&&g.splice(b,1)}var b=this.getStyleNode().style,
c=this._srcElement.getAttribute("style"),g=require("davinci/ve/widget").parseStyleValues(c),c=this.getParent();b&&c&&c.dijitWidget&&c.dijitWidget.addChild&&!c.acceptsHTMLChildren&&(a("position"),a("left"),a("top"));return g},getStyleValuesAllStates:function(){var a=this.getStyleValues(),b={undefined:a},c=this.domNode._maqDeltas;if(c)for(var g in c)c[g].style&&(b[g]="undefined"==g?d.mergeStyleArrays(a,c[g].style):c[g].style);return b},_updateSrcStyle:function(){var a=this.getStyle();a.length?this._srcElement.addAttribute("style",
a):this._srcElement.removeAttribute("style")},_getStyleString:function(a){if(!a)return"";a=this._sortStyleValues(a);return this._styleText(a)},setStyleValuesCanvas:function(a){if(a){a=this._getStyleString(a);var b=this.getStyleNode();dojo.attr(b,"style",a);this.dijitWidget&&(this.dijitWidget.style=a)}},setStyleValuesModel:function(a){a=this._getStyleString(a);0<a.length?this._srcElement.addAttribute("style",a):this._srcElement.removeAttribute("style")},setStyleValuesAllStates:function(a){this.domNode._maqDeltas=
void 0;if(a)for(var b in a){var c=a[b];"undefined"===b&&(b=void 0);davinci.ve.states.setStyle(this.domNode,b,c,!0)}},isLayout:function(){return!1},resize:function(){},refresh:function(){var a=this.getParent();a&&a.dijitWidget?a.refresh():this.resize&&this.resize()},removeChild:function(a){this._srcElement?this._srcElement.removeChild(a._srcElement):console.error("cant remove child! this._srcElement is null",this);var b=this.getHelper();b&&b.removeChild?b.removeChild(this,a):this._removeChildFromDom.apply(this,
arguments)},_removeChildFromDom:function(a){(a=a.domNode)&&a.parentNode&&a.parentNode.removeChild(a)},setProperties:function(a,b){this.properties||(this.properties={});b=b||!1;a.id&&(this._srcElement.addAttribute("id",a.id,a.isTempID),delete a.id,delete a.isTempID);a.isTempID&&delete a.isTempID;for(var c in a){var e=a[c];e||"boolean"==typeof e||"number"==typeof e?(e=this._stringValue(c,e),b||(this.properties[c]=e),this._srcElement.addAttribute(c,e)):(delete this.properties[c],this._srcElement.removeAttribute(c))}},
startup:function(){this.initReload()},renderWidget:function(){},destroyWidget:function(a){(a=this.getHelper())&&a.destroy?a.destroy(this):this.dijitWidget?this.dijitWidget.destroyRecursive():dojo.forEach(this.getChildren(),function(a){a.destroyWidget()})},destroy:function(){this.inherited(arguments);console.error("destry")},selectChild:function(a){},attach:function(){var a=this.getHelper();a&&a.create&&a.create(this,this._srcElement)},_stringValue:function(a,b){var c=this.getMetadata();a=c.property&&
c.property[a];if(!a)return b;if("object"==a.datatype)if(b.getObjectId)b=b.getObjectId();else{if(a=b._edit_object_id)return a;if(b.domNode)return b.domNode.getAttribute("jsId")}else if("json"==a.datatype)a=(a=this.getContext())&&a.getDojo()||dojo,(c=this.getHelper())&&c.checkValue&&(b=c.checkValue(b)),a.isObject(b)&&(b=a.toJson(b));else if("string"==a.datatype)switch(a.format){case "date":case "time":isFinite(b)&&(b=dojo.date.stamp.toISOString(b,{selector:a.format}));break;default:b=h.encode(b)}return b}})})},
"dojo/dom-prop":function(){define("exports ./_base/kernel ./sniff ./_base/lang ./dom ./dom-style ./dom-construct ./_base/connect".split(" "),function(n,m,k,h,d,b,c,g){function p(a){var b="";a=a.childNodes;for(var c=0,e;e=a[c];c++)8!=e.nodeType&&(b=1==e.nodeType?b+p(e):b+e.nodeValue);return b}var a={},e=1,q=m._scopeName+"attrid";k.add("dom-textContent",function(a,b,c){return"textContent"in c});n.names={"class":"className","for":"htmlFor",tabindex:"tabIndex",readonly:"readOnly",colspan:"colSpan",frameborder:"frameBorder",
rowspan:"rowSpan",textcontent:"textContent",valuetype:"valueType"};n.get=function(a,b){a=d.byId(a);var c=b.toLowerCase();b=n.names[c]||b;return"textContent"!=b||k("dom-textContent")?a[b]:p(a)};n.set=function(p,m,r){p=d.byId(p);if(!p)return console.error("invalid node!",p),p;if(2==arguments.length&&"string"!=typeof m){for(var u in m)n.set(p,u,m[u]);return p}u=m.toLowerCase();u=n.names[u]||m;if("style"==u&&"string"!=typeof r)return b.set(p,r),p;if("innerHTML"==u)return k("ie")&&p.tagName.toLowerCase()in
{col:1,colgroup:1,table:1,tbody:1,tfoot:1,thead:1,tr:1,title:1}?(c.empty(p),p.appendChild(c.toDom(r,p.ownerDocument))):p[u]=r,p;if("textContent"==u&&!k("dom-textContent"))return c.empty(p),p.appendChild(p.ownerDocument.createTextNode(r)),p;if(h.isFunction(r)){var w=p[q];w||(w=e++,p[q]=w);a[w]||(a[w]={});var A=a[w][u];if(A)g.disconnect(A);else try{delete p[u]}catch(z){}r?a[w][u]=g.connect(p,u,r):p[u]=null;return p}p[u]=r;return p}})},"davinci/ve/VisualEditor":function(){define("dojo/_base/declare dojo/_base/lang dojo/_base/connect dojo/dom-class dojo/dom-construct dojo/promise/all dojo/text!./template.html ../Runtime ../Workbench ../model/Path ./metadata ./Context preview/silhouetteiframe preview/loadIndicator ../workbench/Preferences ./widget ../XPathUtils ../html/HtmlFileXPathAdapter ./utils/GeomUtils xide/utils xide/registry".split(" "),
function(n,m,k,h,d,b,c,g,p,a,e,q,u,w,r,v,x,A,z,y,B){return n("davinci.ve.VisualEditor",null,{deviceName:"none",_orientation:"portrait",_subscriptions:[],delite:!1,context:null,getContext:function(){return this.context},template:{},constructor2:function(a,c,g){this._pageEditor=c;this.template=g||{};this.contentPane=dijit.getEnclosingWidget(a)||B.byId(a.id);this.loadingDiv=d.create("div",{className:"loading",innerHTML:dojo.replace("\x3ctable\x3e\x3ctr\x3e\x3ctd\x3e\x3cspan\x3e\x26nbsp;\x26nbsp;\x26nbsp;\x26nbsp;\x26nbsp;\x3c/span\x3e\x26nbsp;{0}\x3c/td\x3e\x3c/tr\x3e\x3c/table\x3e",
["Loading..."])},this.contentPane.domNode.parentNode,"first");h.add(this.contentPane.domNode,"fullPane");a=d.create("div",{className:"silhouette_div_container"},this.contentPane.domNode);d.create("span",{className:"silhouetteiframe_object_container"},a);this.silhouetteiframe=new u({rootNode:a,margin:20});var q=this;this.contentPane.connect(this.contentPane,"resize",function(a){var b=dojo.query(".designCP iframe",this._pageEditor.domNode)[0];b&&b.contentDocument&&b.contentDocument.body&&(q._resizeBody(b.contentDocument.body,
a),setTimeout(function(){var a=q.getContext();a.clearCachedWidgetBounds();a.updateFocusAll();q._registerScrollHandlers()},100))}.bind(this));this._pageEditor.deferreds=b(e.getDeferreds());this._subscriptions.push(dojo.subscribe("/davinci/ui/editorSelected",this._editorSelected.bind(this)));this._subscriptions.push(dojo.subscribe("/davinci/ui/context/loaded",this._contextLoaded.bind(this)))},_setContentRaw:function(b,c,e){this.fileName=b;this.basePath=new a(b);if(this.initialSet)this.context.setSource(c,
this.context._restoreStates,this.context);else{var d=g.getUserWorkspaceUrl();0==b.indexOf("./")&&(b=b.substring(2,b.length));b=d+b;b=d;this._handles=[];d=dojo.query(".silhouette_div_container",this.contentPane.containerNode)[0];$(this.contentPane.containerNode).find(".silhouette_div_container");d={editor:this._pageEditor,visualEditor:this,containerNode:d,model:c,template:this.template,baseURL:b,iframeattrs:{"class":"silhouetteiframe_iframe"},ctx:this._pageEditor.ctx};this.context=this.template&&this.template.contextClass?
new (y.getObject(this.template.contextClass))(d):new q(d);this.context._commandStack=this._commandStack;this._commandStack._context=this.context;try{this._handles.push(dojo.connect(this.context,"activate",this,this.update))}catch(D){debugger}this._handles.push(dojo.connect(this.context,"onContentChange",this,this.onContentChange));this._handles.push(dojo.connect(this.context,"onSelectionChange",this,this.onContentChange));this.title=dojo.doc.title;this.context._setSource(c,this._connectCallback,this,
e);this.context.getFlowLayout();this.initialSet=!0}},constructor:function(a,c,g){this._pageEditor=c;this.template=g||{};this.contentPane=dijit.getEnclosingWidget(a)||B.byId(a.id);a=this.contentPane.containerNode;this.loadingDiv=d.create("div",{className:"loading",innerHTML:dojo.replace("\x3ctable\x3e\x3ctr\x3e\x3ctd\x3e\x3cspan\x3e\x26nbsp;\x26nbsp;\x26nbsp;\x26nbsp;\x26nbsp;\x3c/span\x3e\x26nbsp;{0}\x3c/td\x3e\x3c/tr\x3e\x3c/table\x3e",["Loading..."])},a.parentNode,"first");h.add(a,"fullPane");a=
d.create("div",{className:"silhouette_div_container"},a);d.create("span",{className:"silhouetteiframe_object_container"},a);this.silhouetteiframe=new u({rootNode:a,margin:20});this._pageEditor.deferreds=b(e.getDeferreds());this._subscriptions.push(dojo.subscribe("/davinci/ui/editorSelected",this._editorSelected.bind(this)));this._subscriptions.push(dojo.subscribe("/davinci/ui/context/loaded",this._contextLoaded.bind(this)))},getDevice:function(){return this.deviceName},setDevice:function(a,b){this.deviceName=
a;var c=this.getContext();c.setMobileMeta(a);b||c.setMobileTheme(a);this.silhouetteiframe.setSVGFilename("none"==a?null:"app/preview/images/"+a+".svg");c.clearCachedWidgetBounds();dojo.publish("/davinci/ui/deviceChanged",[a]);dojo.publish("/davinci/ui/repositionFocusContainer",[])},toggleOrientation:function(){"none"!=this.deviceName&&this.setOrientation("landscape"==this._orientation?"portrait":"landscape");this.getContext().clearCachedWidgetBounds()},getOrientation:function(a){return this._orientation},
setOrientation:function(a){if("none"!=this.deviceName&&this._orientation!=a){this._orientation=a;a=p.getOpenEditor();a.editorContainer&&a.editorContainer.updateToolbars&&a.editorContainer.updateToolbars();var b=this.getContext();b.setMobileOrientation(this._orientation);this.silhouetteiframe.setOrientation(this._orientation);a._visualChanged();setTimeout(function(){b.clearCachedWidgetBounds();b.updateFocusAll()},100)}},_objectPropertiesChange:function(a){if(this.isActiveEditor()){var b=this.getContext(),
c=a.command;b.getCommandStack().execute(a.compoundCommand||c);c._newId?(a=v.byId(c._newId,b.getDocument()),b.select(a)):(c=b.getSelection(),a=c.length?c[c.length-1]:void 0,1<c.length&&b.select(a));this._srcChanged()}},isActiveEditor:function(){var a=g.currentEditor;return a&&"davinci.ve.PageEditor"==a.declaredClass&&a.visualEditor==this},_stylePropertiesChange:function(a){if(this.isActiveEditor()){var b=this.getContext().getCommandForStyleChange(a);b&&(this.getContext().getCommandStack().execute(b),
b._newId&&(b=v.byId(b._newId,context.getDocument()),this.context.select(b)),this._srcChanged(),dojo.publish("/davinci/ui/widgetValuesChanged",[a]))}},_srcChanged:function(){this.isDirty=!0},getTemplate:function(){return c},destroy:function(){this._handles&&(this._focusPopup&&this._focusPopup.destroyRecursive(),delete this._focusPopup,this.context.destroy(),this._handles.forEach(dojo.disconnect),this._iframeScrollHandler&&(dojo.disconnect(this._iframeScrollHandler),delete this._iframeScrollHandler),
this._designCPScrollHandler&&(dojo.disconnect(this._designCPScrollHandler),delete this._designCPScrollHandler),this._subscriptions.forEach(dojo.unsubscribe),this._subscriptions=[])},setContent:function(a,b,c){this._onloadMessages=[];this._setContent(a,b,c)},saveAs:function(a,b,c){this._setContent(a,c)},_setContent:function(a,b,c){this._setContentRaw(a,b,c)},_connectCallback:function(a){try{if(a instanceof Error)throw a;var b=this.context,c;this.savePoint=0;try{b.activate2()}catch(G){console.error("crash in context activation! : "+
G),logError(G,"crash in context activation! : ")}c=p.createPopup({partID:"davinci.ve.visualEditor",domNode:b.getContainerNode(),keysDomNode:b.getDocument(),context:b});b.getDocument();c&&(c.adjustPosition=function(a){var c=dojo.position(b.frameNode);dojo.withDoc(b.getDocument(),function(){var a=dojo.docScroll();c.x-=a.x;c.y-=a.y});return c});this._focusPopup=p.createPopup({partID:"davinci.ve.visualEditor",domNode:b.getFocusContainer(),keysDomNode:b.getDocument(),context:b});b.getTopWidgets().forEach(function(a){a.resize&&
a.resize()});b.anyDojoxMobileWidgets=void 0;dojo.publish("/davinci/ui/context/pagebuilt",[b])}catch(G){a=G}finally{a.errorMessage?(this.loadingDiv.innerHTML=a.errorMessage||"(unknown)",console.error("error! ",a.errorMessage)):a instanceof Error?(this.loadingDiv.parentNode&&this.loadingDiv.parentNode.removeChild(this.loadingDiv),delete this.loadingDiv,dojo.publish("/davinci/ui/context/pagebuilt",[b]),console.error("error! ",a)):(this.loadingDiv.parentNode&&this.loadingDiv.parentNode.removeChild(this.loadingDiv),
delete this.loadingDiv)}},getSelectedWidget:function(){var a=this.getContext(),b=a.getSelection(),c=b.length?b[b.length-1]:void 0;1<b.length&&a.select(c);return c},getSelectedSubWidget:function(){return this._selectedSubWidget},save:function(a){if(this.context){var c=[],e=this.context.getModel();e.getText();e.setDirty(!0);e.visit({visit:function(b){"HTMLFile"!=b.elementType&&"CSSFile"!=b.elementType||!b.isDirty()||c.push(b.save(a));return!1}});c=c.concat(this.getContext().saveDynamicCssFiles(this.context.cssFiles,
a));c.length?this.savePromise=b(c):delete this.savePromise;return this.savePromise}},removeWorkingCopy:function(){},getDefaultContent:function(){return this.getTemplate()},previewInBrowser:function(){var a=this.deviceName,b=p.getOpenEditor().resourceFile.getURL(),c=[];"none"!=a&&(c=["preview\x3d1","device\x3d"+encodeURIComponent(a),"file\x3d"+encodeURIComponent(b)],b=p.location(),b+="/maqetta/preview.html?","landscape"==this._orientation&&c.push("orientation\x3d"+this._orientation));this.context.getPreference("zazl")&&
c.push("zazl\x3dtrue");c.length&&(b+="?"+c.join("\x26"));a=function(){var a=window.open(b,"preview_"+b);w(a,g.location()+require.toUrl("dojox/image/resources/images/loading.gif"),"gray")};this.savePromise?this.savePromise.then(a):a()},refresh:function(){var a=this.context,b=x.getXPath(a.getSelection()[0]._srcElement,A);a.setSource(a.model);var b=a.model.evaluate(b).getAttribute("id"),c=v.byId(b,a.getDocument());setTimeout(function(){a.select(c)},0)},_contextLoaded:function(a){a==this.getContext()&&
this._registerScrollHandlers()},_editorSelected:function(a){var b=this.getContext(),b=b?b.getFocusContainer():null;a.oldEditor==this._pageEditor&&b&&this._focusPopup&&this._focusPopup.unBindDomNode(b);a.editor==this._pageEditor&&(this._registerScrollHandlers(),b&&this._focusPopup&&this._focusPopup.bindDomNode(b));if(b=document.getElementById("visualEditorBorder"))b.style.display=a.editor&&"davinci.ve.PageEditor"==a.editor.declaredClass?"block":"none"},_resizeBody:function(a,b){var c=z.getScrollLeft(a),
e=z.getScrollTop(a);a.style.width=0<c?b.w+c+"px":"100%";a.style.height=0<e?b.h+e+"px":"100%"},_scrollHandler:function(a){(a=dojo.query(".designCP iframe",this._pageEditor.domNode)[0])&&a.contentDocument&&a.contentDocument.body&&(this._resizeBody(a.contentDocument.body,{w:dojo.style(this.contentPane.domNode,"width"),h:dojo.style(this.contentPane.domNode,"height")}),setTimeout(function(){var a=this.getContext();a.clearCachedWidgetBounds();a.updateFocusAll()}.bind(this),100))},_registerScrollHandlers:function(){if(!this._iframeScrollHandler){var a=
dojo.query(".designCP iframe",this._pageEditor.domNode)[0];a&&a.contentDocument&&a.contentDocument.body&&(this._iframeScrollHandler=dojo.connect(a.contentDocument.body.ownerDocument,"onscroll",this,this._scrollHandler))}!this._designCPScrollHandler&&(a=dojo.query(".designCP",this._pageEditor.domNode)[0])&&(this._designCPScrollHandler=dojo.connect(a,"onscroll",this,this._scrollHandler))}})})},"dijit/_DialogMixin":function(){define(["dojo/_base/declare","./a11y"],function(n,m){return n("dijit._DialogMixin",
null,{actionBarTemplate:"",execute:function(){},onCancel:function(){},onExecute:function(){},_onSubmit:function(){this.onExecute();this.execute(this.get("value"))},_getFocusItems:function(){var k=m._getTabNavigable(this.domNode);this._firstFocusItem=k.lowest||k.first||this.closeButtonNode||this.domNode;this._lastFocusItem=k.last||k.highest||this._firstFocusItem}})})},"xtrack/manager/TrackingManager":function(){define("dcl/dcl xide/manager/ManagerBase xide/utils xtrack/model/Item xtrack/data/Store xide/manager/ServerActionBase".split(" "),
function(n,m,k,h,d,b){return n([m,b],{declaredClass:"xtrack.manager.TrackingManager",serviceClass:"XApp_Tracking_Service",section:"meta",STORE_CLASS:d,MODEL_CLASS:h,_store:null,getStore:function(){return this._store},last:function(b){b=b||this.getStore().query();return b=b.sort(function(b,c){return(b.time||1)>(c.time||1)?-1:1})},most:function(b,g){g=g||this.getStore().query(b);return g=g.sort(function(b,a){return b.counter===a.counter?0:(b.counter||1)<(a.counter||1)?1:-1})},filterMin:function(b,g,
d){b=this.getStore().query(b);return b=b.filter(function(a){return a[g]>=d})},track:function(b,g,d,a,e,h){var c=this._store.getSync(d);if(c)return c.retain(),this.save(),this._store.emit("update",{target:c}),c;c=k.mixin({id:k.createUUID(),time:(new Date).getTime(),url:d,label:g,category:b,counter:1,command:a,context:e},h);b=this._store.putSync(c);this.save();return b},drop:function(b){this._store.removeSync(b)},_init:function(){this.check();return this._read(this.section,".",null,function(b){this._store=
new this.STORE_CLASS({Model:this.MODEL_CLASS});b=(b=_.find(b.meta,{id:"tracking"}))||{value:[]};this._store.setData(b.value||[])}.bind(this))},init:function(){return this._init()},save:function(){return this.runDeferred(null,"set",[this.section,".",{id:"tracking"},{value:this.current()},!0])},_read:function(b,g,d,a){return this.runDeferred(null,"get",[b,g,d]).then(function(b){a&&a(b)}.bind(this))},serialize:function(){return JSON.stringify(this.current(),null,2)},deserialize:function(b){this._store.setData(k.fromJson(b))},
current:function(){return this._store.query()},destroy:function(){this._store.destroy()}})})},"dstore/QueryMethod":function(){define([],function(){return function(n){var m=n.type,k=n.normalizeArguments,h=n.applyQuery,d=n.querierFactory;return function(){var b=Array.prototype.slice.call(arguments),c=k?k.apply(this,b):b,b={type:m,arguments:b,normalizedArguments:c},g=this._getQuerierFactory(m)||d;g&&(b.querier=g.apply(this,c));c=this._createSubCollection({queryLog:this.queryLog.concat(b)});return h?
h.call(this,c,b):c}}})},"dijit/form/_CheckBoxMixin":function(){define(["dojo/_base/declare","dojo/dom-attr"],function(n,m){return n("dijit.form._CheckBoxMixin",null,{type:"checkbox",value:"on",readOnly:!1,_aria_attr:"aria-checked",_setReadOnlyAttr:function(k){this._set("readOnly",k);m.set(this.focusNode,"readOnly",k)},_setLabelAttr:void 0,_getSubmitValue:function(k){return null==k||""===k?"on":k},_setValueAttr:function(k){k=this._getSubmitValue(k);this._set("value",k);m.set(this.focusNode,"value",
k)},reset:function(){this.inherited(arguments);this._set("value",this._getSubmitValue(this.params.value));m.set(this.focusNode,"value",this.value)},_onClick:function(k){return this.readOnly?(k.stopPropagation(),k.preventDefault(),!1):this.inherited(arguments)}})})},"davinci/commands/CompoundCommand":function(){define(["dojo/_base/declare"],function(n){return n("davinci.commands.CompoundCommand",null,{name:"compound",_commands:[],constructor:function(m){this._commands=[];m&&(this._commands=[m])},add:function(m){if(m)if(this._commands)if("compound"==
m.name)dojo.forEach(m._commands,function(b){this.add(b)},this);else{if("modify"==m.name)for(var k=m._oldId,h=0;h<this._commands.length;h++){var d=this._commands[h];if("modify"==d.name&&d._oldId==k){d.add(m);return}}this._commands.push(m)}else this._commands="compound"==m.name?m._commands:[m]},setContext:function(m){for(var k=0;k<this._commands.length;k++)this._commands[k].setContext&&this._commands[k].setContext(m)},isEmpty:function(){return!this._commands||0===this._commands.length},execute:function(){if(this._commands)for(var m=
0;m<this._commands.length;m++)this._commands[m].execute(),this._commands[m]._oldId&&this._commands[m]._newId&&(this._oldId=this._commands[m]._oldId,this._newId=this._commands[m]._newId)},undo:function(){if(this._commands)for(var m=this._commands.length-1;0<=m;m--)this._commands[m].undo()}})})},"davinci/ve/GenericWidget":function(){define(["dojo/_base/declare","./_Widget"],function(n,m){return n("davinci.ve.GenericWidget",m,{isGenericWidget:!0,constructor:function(k,h,d,b,c){dojo.attr(h,"dvwidget",
d);c&&c.addAttribute("dvwidget",d)},buildRendering:function(){this.containerNode=this.domNode;if(this._params){for(var k in this._params)this.domNode.setAttribute(k,this._params[k]);this._params=void 0}},_getChildrenData:function(k){for(var h=[],d=this.domNode.childNodes,b=0;b<d.length;b++){var c=d[b],g;switch(c.nodeType){case 1:(c=require("davinci/ve/widget").byNode(c))&&(g=c.getData(k));break;case 3:(g=c.nodeValue.trim())&&k.serialize&&(g=davinci.html.escapeXml(g));break;case 8:g="\x3c!--"+c.nodeValue+
"--\x3e"}g&&h.push(g)}if(0!==h.length)return h},setProperties:function(k){var h=this.domNode,d;for(d in k)"style"===d?dojo.style(h,k[d]):k[d]?h[d]=k[d]:h.removeAttribute(d);this.inherited(arguments)},_attr:function(k,h){if(1<arguments.length)this.domNode.setAttribute(k,h);else return this.domNode.getAttribute(k)},getTagName:function(){return this.domNode.nodeName.toLowerCase()}})})},"xide/manager/Application_UI":function(){define("dcl/dcl xide/utils xide/types dojo/has xide/registry xide/editor/Default xide/mixins/PersistenceMixin dojo/has!host-browser?dojo/dom-geometry xdojo/has!xcf-ui?xide/editor/Registry dojo/has!host-browser?xfile/views/FileConsole dojo/has!host-browser?dojo/window dojo/has!host-browser?xide/editor/Default dojo/has!xideve?xide/manager/Application_XIDEVE dojo/has!xnode?xide/manager/Application_XNODE dojo/has!xfile?xide/manager/Application_XFILE dojo/has!xblox?xide/manager/Application_XBLOX dojo/has!xace?xace/views/Editor".split(" "),
function(n,m,k,h,d,b,c,g,p,a,e,q,u,w,r,v,x){e=[];u&&e.push(u);w&&e.push(w);r&&e.push(r);v&&e.push(v);n([c.dcl],{declaredClass:"xcf.manager.ApplicationPersistence",defaultPrefenceTheme:"idle_fingers",defaultPrefenceFontSize:14,saveValueInPreferences:!0,cookiePrefix:"_xcf_application",getDefaultPreferences:function(){return m.mixin({theme:this.defaultPrefenceTheme,fontSize:this.defaultPrefenceFontSize},this.saveValueInPreferences?{}:null)},onAfterAction:function(a){this.savePreferences({});return this.inherited(arguments)},
toPreferenceId:function(a){return(this.cookiePrefix||"")+"_xcf_application"},getDefaultOptions:function(){var a=this.inherited(arguments),b=this.loadPreferences(null);b&&m.mixin(a,b)||this.savePreferences(this.getDefaultPreferences());return a}});return n(e,{declaredClass:"xide.manager.Application_UI",mainView:null,leftLayoutContainer:null,rightLayoutContainer:null,showGUI:!0,showFiles:!0,lastPane:null,_lastWizard:null,_statusMessageTimer:null,_maximized:!1,openFile:function(a){var b=this,c=p.getEditor(a.editor)||
p.getDefaultEditor({path:a.file})||p.getEditor("Default Editor"),e=window.eRequire;e("electron");e=e("electron").remote.BrowserWindow;(e=e.getFocusedWindow()||e.mainWindow)&&e.setTitle(a.file);c?(a=c.onEdit({path:a.file,mount:"__direct__",getPath:function(){return this.path}}),a._on?this.ctx.getWindowManager().registerView(a,!0):a.then&&a.then(function(a){b.ctx.getWindowManager().registerView(a,!0)})):console.error("--have no editor ",a.editor)},registerCustomTypes:function(){},registerEditorExtensions:function(){var a=
this.ctx;q.Implementation.ctx=a;q.ctx=a;a.registerEditorExtension("Default Editor","*","fa-code",this,!1,function(a,b){var c=null;b&&_.isFunction(b.newTarget)&&(c=b.newTarget({title:a.name,icon:"fa-code"}));return q.Implementation.open(a,c,null,null,b)},b,{updateOnSelection:!1,leftLayoutContainer:this.leftLayoutContainer,ctx:a,defaultEditor:!0});"undefined"!==typeof JSONEditor&&a.registerEditorExtension("JSON Editor","json","fa-code",this,!0,null,JSONEditor,{updateOnSelection:!1,leftLayoutContainer:this.leftLayoutContainer,
ctx:a,registerView:!0});k.registerCustomMimeIconExtension("cfhtml","fa-laptop");this.registerSplitEditors&&this.registerSplitEditors()},getActions:function(){function a(a){(a=c.ctx.mainView.layoutLeft)&&(a=a.getSplitter())&&(a.isCollapsed()?a.expand():a.collapse(0,0))}var b=[],c=this;if(h("electronx")){var e=(0,window.eRequire)("electron").webFrame;b.push(this.ctx.createAction({label:"Zoom In",command:"Window/Zoom In",icon:"fa-search-plus",keycombo:["ctrl +"],tab:"Home",group:"Window",owner:c,handler:function(){var a=
e.getZoomFactor();e.setZoomFactor(a+.1)},mixin:{addPermission:!0},onCreate:function(a){a.setVisibility(k.ACTION_VISIBILITY.CONTEXT_MENU,!1)}}));b.push(this.ctx.createAction({label:"Zoom Out",command:"Window/Zoom Out",icon:"fa-search-minus",keycombo:["ctrl -"],tab:"Home",group:"Window",owner:c,handler:function(){var a=e.getZoomFactor();e.setZoomFactor(a+-.1)},mixin:{addPermission:!0},onCreate:function(a){a.setVisibility(k.ACTION_VISIBILITY.CONTEXT_MENU,!1)}}));window.eRequire&&b.push(this.ctx.createAction({label:"Open In Browser",
command:"Window/Open In Browser",icon:"fa-share",tab:"Home",group:"Window",owner:c,handler:function(){(0,window.eRequire)("electron").shell.openExternal(location.href)},mixin:{addPermission:!0},onCreate:function(a){a.setVisibility(k.ACTION_VISIBILITY.CONTEXT_MENU,!1)}}))}b.push(this.ctx.createAction({label:"Show Navigation",command:"Window/Navigation",icon:"fa-cube",keycombo:["ctrl f11"],tab:"Home",group:"Window",owner:c,handler:a,mixin:{addPermission:!0},onCreate:function(a){a.setVisibility(k.ACTION_VISIBILITY.CONTEXT_MENU,
{label:"Show Nav",group:"Organize"})}}));b.push(this.ctx.createAction({label:"Maximize",command:"View/Maximize",icon:k.ACTION_ICON.MAXIMIZE,keycombo:["alt f11"],tab:"Home",group:"View",owner:c,mixin:{addPermission:!0},handler:function(){var b=c.ctx.mainView.getToolbar();c._maximized?(a(),b&&b.expand(),c._maximized=!1):(a(!0),c._maximized=!0);setTimeout(function(){c.ctx.mainView.resize();c.publish(k.EVENTS.RESIZE)},100)}}));this.createAppActions&&(b=b.concat(this.createAppActions()));return b},getConsoleActions:function(b){function c(c){var e=
g.mainView,e=h.createTab(c.label,c.icon,b||e.layoutCenter);c=m.addWidget(a.createShellViewClass(),{type:c.shellType,title:c.label,icon:c.icon,ctx:g,owner:d,value:c.value},null,e,!0);e=a.createShellViewDelegate();c.delegate=new e;return c}function e(a,b,e,h,p,k){q.push(g.createAction({label:a,command:"Window/"+a,icon:b||"fa-code",tab:"Home",group:"View",handler:p||c,mixin:{addPermission:!0,shellType:e,value:k},owner:d}))}for(var g=this.ctx,d=this,h=g.getWindowManager(),q=[],p=[["Javacript","fa-terminal",
"javascript",null,null,"return 2"],["Bash-Shell","fa-terminal","sh",null,null,"ls -l --color\x3dalways"],["PHP-Shell","fa-code","php",null,null,"\x3c?php \n\n\x3e"]],k=0;k<p.length;k++)e.apply(d,p[k]);return q},getTheme:function(){return this.ctx.getSettingsManager().getSetting("theme")},getThemeActions:function(){var a=[],b=this.ctx,c={tab:"Window",group:"View",handler:function(a){a=a.theme;b.getSettingsManager().write2(null,".",{id:"theme"},{value:a},!0,null).then(function(){location.reload()})},
owner:this},e={addPermission:!0,actionType:k.ACTION_TYPE.SINGLE_TOGGLE};_.each(["Dark|transparent","White|white","Blue Transparent|blue","Gray|gray"],function(g){var d=g.split("|");g=d[0];d=d[1];a.push(b.createActionShort(g,"Window/IDE-Theme/"+g,"fa-paint-brush",c,m.mixin({theme:d,value:d},e)))});return a},init:function(){this.ctx.addActions(this.getActions());this.ctx.addActions(this.getThemeActions());return this.inherited(arguments)},resizeToNode:function(a){if(null!=a&&(a=dojo.byId(a))){a=g.getMarginBox(a).h;
a-=20;var b=d.byId("main");b&&(b.containerNode.style.height=a+"px",b.resize(),setTimeout(function(){b.resize()},300))}},repaint:function(){}})})},"davinci/ve/widgets/WidgetToolBar":function(){define("dojo/_base/declare dijit/_Templated dijit/_Widget davinci/Runtime davinci/workbench/ViewLite davinci/ve/commands/ModifyCommand dijit/form/ComboBox dijit/form/ValidationTextBox dijit/form/TextBox dojo/store/Memory davinci/lang/ve dijit/lang/_common davinci/ve/widget dojo/text!./templates/WidgetToolBar.html".split(" "),
function(n,m,k,h,d,b,c,g,p,a,e,q,u,w){return n("davinci.ve.widgets.WidgetToolBar",[d,k,m],{templateString:w,widgetsInTemplate:!0,descNode:null,idTextBox:null,classComboBox:null,blockGroupComboBox:null,widgetDescStart:"",widgetDescUnselectEnd:"",_oldIDName:null,_oldClassName:null,_oldBlockGroup:null,veNLS:e,cssRules:null,postCreate:function(){this.idTextBox.validator=dojo.hitch(this,function(a,b){this.invalidMessage=null;return a&&this._widget&&!this.changing?(a=u.byId(a))&&a!==this._widget?(this.invalidMessage=
e.idAlreadyUsed,!1):!0:!0});dojo.subscribe("/davinci/ui/widget/replaced",dojo.hitch(this,this._widgetReplaced));var a=this;this.subscribe("CSSRulesUpdated",function(b){a.cssRules=b.names;a.onWidgetSelectionChange()})},initialize:function(){if((this._editor=h.currentEditor)&&this._editor.visualEditor&&this._editor.visualEditor.context){var a=this._editor.visualEditor.context.getSelection();this._widget=0==a.length?null:a[0]}else this._widget=null;this.onWidgetSelectionChange()},cssSelect:null,startup:function(){this.inherited(arguments);
if(!this.cssSelect){this.cssSelect=$(this.cssClasses).selectize({delimiter:",",persist:!0,inputClass:"selectize-input form-control input-transparent",plugins:["restore_on_backspace"],createOnBlur:!0,dropdownParent:"body",create:function(a){return{value:a,text:a}}}).data().selectize;var a=this;this.cssSelect.on("change",function(){var b=a.cssSelect.getValue();if(a._widget&&!a.changing&&(a.context&&a.context.blockChange(!1),b=b.split(",").join(" "),b!==a._oldClassName)){a._oldClassName=b;var c={};c["class"]=
b;b=new davinci.ve.commands.ModifyCommand(a._widget,c,null);dojo.publish("/davinci/ui/widgetPropertiesChanges",[{source:a._editor.editor_id,command:b}])}})}},onEditorSelected:function(){this.initialize();this.domNode.style.display=this._editor&&"davinci.ve.HTMLPageEditor"==this._editor.editorID?"block":"none"},_widgetReplaced:function(a,b){this._widget===b&&(this._widget=a,this.onWidgetSelectionChange())},onWidgetSelectionChangeBak:function(){var b="";if(this._widget){b=u.getLabel(this._widget);this.context=
this._widget.getContext();this.classComboBox.set("disabled",!1);this.idTextBox.attr("disabled",!1);this.changing=!0;this._oldBlockGroup=this._oldClassName=this._oldIDName=null;dojo.addClass(this.domNode,"propertiesSelection");this.descNode.innerHTML=b;if(this._editor&&"davinci.ve.PageEditor"===this._editor.declaredClass&&(b=this._widget._srcElement)){var c=[],g=this._widget.getContext().getModel().getDocumentElement();if(g){var d={visit:function(a){"HTMLElement"==a.elementType&&"body"!=a.tag&&"html"!=
a.tag&&(a=a.getAttribute("class"))&&(a=dojo.trim(a).split(" "),dojo.forEach(a,dojo.hitch(this,function(a){-1==dojo.indexOf(this.classes,a)&&this.classes.push(a)})))},classes:[]};g.visit(d);dojo.forEach(d.classes,function(a){c.push({name:a})})}this.cssRules&&_.each(this.cssRules,function(a){_.find(c,{name:a})||c.push({name:a})});g=new a({data:c});this.classComboBox.set("store",g);b=(b=b.getAttribute("class"))&&dojo.trim(b)||"";this.cssSelect&&(_.each(c,function(a){this.cssSelect.addOption({value:a.name,
text:a.name})},this),this.cssSelect.setValue(b.split(" "),!0));this.classComboBox.set("value",b);this._oldClassName=b;this._oldIDName=b=(b=this._widget.getId())&&dojo.trim(b)||"";this.idTextBox.attr("value",b);this._widget.domNode&&this._widget.domNode&&((b=this._widget.domNode.blockGroup)||(b=this._widget.domNode.getAttribute("blockGroup")),this._oldBlockGroup=b)}this.changing=!1}else this.descNode.innerHTML=e.noSelection,dojo.removeClass(this.domNode,"propertiesSelection"),this.context=null,this.classComboBox.set("value",
""),this.classComboBox.set("disabled",!0),this.idTextBox.attr("value",""),this.idTextBox.attr("disabled",!0)},onWidgetSelectionChange:function(){var a="";if(this._widget){a=u.getLabel(this._widget);this.context=this._widget.getContext();this.idTextBox.attr("disabled",!1);this.cssSelect&&this.cssSelect.enable();this.changing=!0;this._oldBlockGroup=this._oldClassName=this._oldIDName=null;dojo.addClass(this.domNode,"propertiesSelection");this.descNode.innerHTML=a;if(this._editor&&"davinci.ve.PageEditor"===
this._editor.declaredClass&&(a=this._widget._srcElement)){var b=[],c=this._widget.getContext().getModel().getDocumentElement();if(c){var g={visit:function(a){"HTMLElement"==a.elementType&&"body"!=a.tag&&"html"!=a.tag&&(a=a.getAttribute("class"))&&(a=dojo.trim(a).split(" "),dojo.forEach(a,dojo.hitch(this,function(a){-1==dojo.indexOf(this.classes,a)&&this.classes.push(a)})))},classes:[]};c.visit(g);dojo.forEach(g.classes,function(a){b.push({name:a})})}this.cssRules&&_.each(this.cssRules,function(a){_.find(b,
{name:a})||b.push({name:a})});a=(a=a.getAttribute("class"))&&dojo.trim(a)||"";this.cssSelect&&(_.each(b,function(a){this.cssSelect.addOption({value:a.name,text:a.name})},this),this.cssSelect.setValue(a.split(" "),!0));this._oldClassName=a;this._oldIDName=a=(a=this._widget.getId())&&dojo.trim(a)||"";this.idTextBox.attr("value",a);this._widget.domNode&&this._widget.domNode&&((a=this._widget.domNode.blockGroup)||(a=this._widget.domNode.getAttribute("blockGroup")),this._oldBlockGroup=a)}this.changing=
!1}else this.descNode.innerHTML=e.noSelection,dojo.removeClass(this.domNode,"propertiesSelection"),this.context=null,this.cssSelect&&this.cssSelect.disable(),this.cssSelect&&this.cssSelect.setValue([]),this.idTextBox.attr("value",""),this.idTextBox.attr("disabled",!0)},_onChangeIDAttribute:function(){if(this._widget&&!this.changing){var a=this.idTextBox;if(a&&a.isValid()&&(this.context&&this.context.blockChange(!1),a=a.attr("value"),a!==this._oldIDName)){this._oldIDName=a;var c={};c.id=a;a=new b(this._widget,
c,null);dojo.publish("/davinci/ui/widgetPropertiesChanges",[{source:this._editor.editor_id,command:a}])}}},_onChangeClassAttribute:function(){if(this._widget&&!this.changing){var a=this.classComboBox;if(a&&(this.context&&this.context.blockChange(!1),a=a.attr("value"),a!==this._oldClassName)){this._oldClassName=a;var b={};b["class"]=a;a=new davinci.ve.commands.ModifyCommand(this._widget,b,null);dojo.publish("/davinci/ui/widgetPropertiesChanges",[{source:this._editor.editor_id,command:a}])}}},_onChangeBlockGroupAttribute:function(){if(this._widget&&
!this.changing){var a=this.blockGroupComboBox;if(a&&(this.context&&this.context.blockChange(!1),a=a.attr("value"),a!==this._oldBlockGroup)){this._oldBlockGroup=a;var b={};b.blockGroup=a;a=new davinci.ve.commands.ModifyCommand(this._widget,b,null);this.publish("/davinci/ui/widgetPropertiesChanges",[{source:this._editor.editor_id,command:a}])}}},_onFieldFocus:function(){this.context&&this.context.blockChange(!0)},_onFieldBlur:function(){this.context&&this.context.blockChange(!1)},_onKeyPress:function(a){a.keyCode==
dojo.keys.ENTER&&this._onChangeIDAttribute()}})})},"xcf/views/ExpressionConsole":function(){define("dcl/dcl xdojo/declare xide/types xide/utils xgrid/ListRenderer xgrid/Grid xgrid/Defaults xgrid/Focus dgrid/OnDemandGrid xide/mixins/EventedMixin xide/views/_LayoutMixin xdocker/Docker2 xide/views/ConsoleView xide/widgets/WidgetBase xide/data/TreeMemory".split(" "),function(n,m,k,h,d,b,c,g,p,a,e,q,u,w,r){return n([w,e.dcl,u.HandlerClass],{type:"javascript",reparent:!1,consoleTabTitle:"Editor",consoleTabOptions:null,
consoleTabType:"DefaultTab",templateString:'\x3cdiv class\x3d"" style\x3d"height:inherit"/\x3e',onAddEditorActions:function(a){a.actions.push(a.owner.createAction({label:"Send",command:"Console/Send",icon:"fa-paper-plane",group:"Console",tab:"Home",mixin:{addPermission:!0}}))},getConsoleClass:function(){return u.ConsoleWidget},showDocumentation:function(a){dojo.empty(this.helpContainer);var b=dojo.create("div",{innerHTML:"",className:"ui-widget"});this.helpContainer.appendChild(b);b.appendChild(dojo.create("span",
{innerHTML:a,className:"ui-content"}))},createTab:function(a,b){return this._docker.addTab(a||"DefaultTab",h.mixin({icon:!1,closeable:!0,moveable:!0,tabOrientation:k.DOCKER.TAB.TOP,location:k.DOCKER.DOCK.STACKED},b))},createBranch:function(a,b){a={name:a,group:"top",children:[],value:null};b.push(a);return a},apiItemToLeaf:function(a){},addAutoCompleterWord:function(a,b){this.autoCompleterWords||(this.autoCompleterWords=[]);this.autoCompleterWords.push({word:a,value:a,meta:b||""})},createLeaf:function(a,
b,c,e,g,d){c={name:a,group:"leaf",value:b,parent:c,help:e,isFunction:null!=g?g:!0};this.addAutoCompleterWord(b,e);d&&d.children.push({_reference:a});return c},getAPIField:function(a,b){for(var c=0;c<a.sectionHTMLs.length;c++){var e=a.sectionHTMLs[c];if(-1!=e.indexOf('id \x3d "'+b+'"'))return e}return""},insertApiItems:function(a,b,c){for(var e=0;e<this.api.length;e++){var g=this.api[e];if(-1!=g.title.indexOf(a)){this.apiItemToLeaf(g);var d=g.title.replace(a,""),q=this.getAPIField(g,"Description"),
p=this.getAPIField(g,"Parameters"),k=this.getAPIField(g,"Examples"),g=this.getAPIField(g,"Syntax"),q=q+"\x3c/br\x3e"+p+"\x3cbr/\x3e"+k,g=h.strip_tags(g),g=g.replace("Syntax",""),g=h.replaceAll("\n","",g),g=h.replaceAll("\r","",g);c.push(this.createLeaf(d,g,a.replace(".",""),q,!0,b))}}return[]},_createExpressionData:function(){var a={items:[],identifier:"name",label:"name"},b=this.createBranch("Array",a.items);this.insertApiItems("Array.",b,a.items);b=this.createBranch("Date",a.items);this.insertApiItems("Date.",
b,a.items);b=this.createBranch("Function",a.items);this.insertApiItems("Function.",b,a.items);b=this.createBranch("Math",a.items);this.insertApiItems("Math.",b,a.items);b=this.createBranch("Number",a.items);this.insertApiItems("Number.",b,a.items);b=this.createBranch("Object",a.items);this.insertApiItems("Object.",b,a.items);b=this.createBranch("String",a.items);this.insertApiItems("String.",b,a.items);b=this.createBranch("RegExp",a.items);this.insertApiItems("RegExp.",b,a.items);this.publish(k.EVENTS.ON_EXPRESSION_EDITOR_ADD_FUNCTIONS,
{root:a,widget:this,user:this.userData});return a},_createExpressionStore:function(){return new (m("apiStore",[r],{getChildren:function(a,b){return this.query({parent:this.getIdentity(a)})},mayHaveChildren:function(a){return!1}}))({data:this._createExpressionData().items,idProperty:"name"})},insertSymbol:function(a,b){var c=this.getEditor();if(c){var e=c.getSelectedText();e&&0<e.length&&(a=b&&-1==a.indexOf("(")?a+"("+e+")":" "+a+" ");c.insert(a)}},getEditor:function(){return this.driverConsole.console.consoleEditor},
createWidgets:function(){var e=this,r=this.ctx,u=r.getDeviceManager(),m=k.DOCKER;this._docker=q.createDefault(this.domNode,{});var n=this.createTab(null,{title:!1,icon:"fa-long-arrow-right",closeable:!1});this.driverConsole=u=u.openConsole(this.device,n,{value:this.value});u.startup();n=this.createTab(null,{title:!1,icon:"fa-long-arrow-right",closeable:!1,tabOrientation:m.TAB.BOTTOM,location:m.TAB.BOTTOM,h:"300px"});this.helpContainer=n.containerNode;n.minSize(200,100);var w=this.createTab(null,{title:!1,
icon:"fa-long-arrow-right",closeable:!1,tabOrientation:m.TAB.BOTTOM,location:m.TAB.BOTTOM});w.maxSize(200);w.getSplitter().pos(.8);var m=this.createTab(null,{title:!1,icon:"fa-long-arrow-right",closeable:!1,tabOrientation:m.TAB.RIGHT,location:m.TAB.RIGHT,target:w}),C=b.createGridClass("driverTreeView",{options:h.clone(k.DEFAULT_GRID_OPTIONS)},{SELECTION:!0,KEYBOARD_SELECTION:!0,PAGINATION:!1,ACTIONS:k.GRID_FEATURES.ACTIONS,CLIPBOARD:k.GRID_FEATURES.CLIPBOARD},{},{},{GRID:p,DEFAULTS:c,RENDERER:d,EVENTED:a,
FOCUS:g}),E=this._createExpressionStore(),F={ctx:r,attachDirect:!0,collection:E.filter({group:"top"}),showHeader:!1,columns:[{label:"Name",field:"name",sortable:!0}]};grid=h.addWidget(C,F,null,w,!0);var r={ctx:r,noDataMessage:"",attachDirect:!0,collection:E.filter({group:"nada"}),showHeader:!1,columns:[{label:"Name",field:"name",sortable:!0}]},G=h.addWidget(C,r,null,m,!0);grid._on("selectionChanged",function(a){a=E.query({parent:a.selection[0].name});G.set("collection",E.filter({parent:"xx"}));G.renderArray([]);
G.renderArray(a)});G._on("selectionChanged",function(a){a=a.selection[0];(e.currentItem=a)&&a.help&&e.showDocumentation(a.help||"")});w.getSplitter().pos(.5);n.getSplitter().pos(.8);if(r=u.__bottom)r.getSplitter().pos(.2),r.title(!1),r.title(!1);n.$container.find(".panelParent").css("overflow","auto");n.$container.parent().css({overflow:"auto"});this.add(grid,null,!1);this.add(G,null,!1);this.add(u,null,!1);G.on("dblclick",function(a){a=G.getSelection()[0];e.insertSymbol(a.value,a.isFunction)})},
startup:function(){var a=this;this.inherited(arguments);require(["xide/widgets/ExpressionJavaScript"],function(b){a.api=b.prototype.api;a.createWidgets()})}})})},"dojo/_base/json":function(){define(["./kernel","../json"],function(n,m){n.fromJson=function(k){return eval("("+k+")")};n._escapeString=m.stringify;n.toJsonIndentStr="\t";n.toJson=function(k,h){return m.stringify(k,function(d,b){return b&&(d=b.__json__||b.json,"function"==typeof d)?d.call(b):b},h&&n.toJsonIndentStr)};return n})},"nxapp/utils/_LogMixin":function(){define(["dcl/dcl"],
function(n){return n(null,{declaredClass:"nxapp.utils._LogMixin",debug_conf:null,logger:null,initLogger:function(m){this.debug_conf=m},log:function(m,k,h,d){k||(k=this._debugContext().main);k&&!this.showDebugMsg(k)||!this.logger||(h=h||"info",d.time=(new Date).getTime(),this.logger.log(h,m,d))},logEx:function(m,k,h,d){this.logger?(k=k||"info",d=d||{},d.type=h||"Unknown",d.time=d.time||(new Date).getTime(),this.logger.log(k,m,d)):console.error("have no logger!")},showDebugMsg:function(m){if(null!=
this.debug_conf)return this.debug_conf.all?!0:this.debug_conf[m]?!0:!1;this.debug_conf={all:!0};return!0}})})},"xblox/model/variables/VariableSwitch":function(){define("dcl/dcl xblox/model/logic/SwitchBlock xide/types xblox/model/logic/CaseBlock xblox/model/logic/DefaultBlock dojo/Deferred".split(" "),function(n,m,k,h,d,b){return n(m,{declaredClass:"xblox.model.variables.VariableSwitch",name:"Switch on Variable",icon:"",variable:"PowerState",toText:function(){var b=this.scope.getVariableById(this.variable),
b=b?b.name:"";return this.getBlockIcon("H")+this.name+" "+b},getFields:function(){var b=this.getDefaultFields(!1,!1);return b=b.concat([this.utils.createCI("Variable",3,this.variable,{group:"General",widget:{store:this.scope.blockStore,labelField:"name",valueField:"id",query:[{group:"basicVariables"},{group:"processVariables"}]},dst:"variable"})])}})})},"davinci/js/js.plugin":function(){define(["require"],function(n){return{id:"davinci.js","davinci.editor":[{id:"JSEditor",name:"JavaScript Editor",
extensions:"js,json",isDefault:!1,editorClass:"davinci/js/ui/JavaScriptEditor",palettePerspective:"davinci.html.htmlEditor",expandPalettes:["left"]},{id:"XIDEEditor",name:"Editor",extensions:"js,json",isDefault:!0,editorClass:"davinci/xide/Editor",palettePerspective:"davinci.html.htmlEditor",expandPalettes:["left"]}],"davinci.actionSets":[{id:"jsSource",visible:!0,menu:[{label:"Source",path:"edit",id:"davinci.js.source",separator:["commentGroup",!0,"editGroup",!0,"codeGroup",!0,"additions",!1]}],
actions:[{id:"davinci.js.comment",icon:null,run:function(){alert("toggle comment")},label:"Toggle Comment",menubarPath:"davinci.js.source/commentGroup"}]},{id:"jsEdit",visible:!0,actions:[{id:"davinci.js.cut",icon:null,label:"cut",commandID:"davinci.js.cut",menubarPath:"davinci.edit/cut"},{id:"davinci.js.add",icon:null,label:"add",commandID:"davinci.js.add",menubarPath:"davinci.edit/add"},{id:"davinci.js.delete",icon:null,label:"delete",commandID:"davinci.js.delete",menubarPath:"davinci.edit/delete"}]}],
"davinci.actionSetPartAssociations":[{targetID:"davinci.js.jsEdit",parts:["davinci.ui.outline","davinci.js.JSEditor"]}],"davinci.editorActions":{editorContribution:{targetID:"davinci.js.JSEditor",actions:[{id:"savecombo",className:"maqLabelButton",showLabel:!0,label:"Save",toolbarPath:"save",type:"ComboButton",run:function(){n(["../Workbench"],function(m){n("../ui/Resource").save()})},isEnabled:function(m){return n("../Workbench").getOpenEditor()},menu:[{iconClass:"saveIcon",run:function(){n("../ui/Resource").save()},
isEnabled:function(m){return n("../Workbench").getOpenEditor()},label:"Save",keyBinding:{accel:!0,charOrCode:"s",allowGlobal:!0}},{iconClass:"saveAsIcon",run:function(){n("../ui/Resource").saveAs("html")},isEnabled:function(m){return n("../Workbench").getOpenEditor()},label:"Save As",keyBinding:{accel:!0,shift:!0,charOrCode:"s",allowGlobal:!0}}]}]}},"davinci.commands":[{id:"cut",run:function(){}},{id:"add",run:function(){}},{id:"delete",run:function(){}}],"davinci.keyBindings":[{platform:"win",sequence:"M1+C",
commandID:"davinci.js.copy",contextID:"davinci.js.JSEditor"}],"davinci.preferences":[{name:"JavaScript",id:"general",category:""},{name:"Formatting",id:"format",category:"davinci.js.general",pane:"davinci/js/ui/FormatOptions",defaultValues:{blockNewLine:!1,blockIndent:3,functionNewLine:!1,functionIndent:5,functionParamSpaceing:1,labelSpace:1,forParamSpacing:0,breakOnLabel:!0,ifStmtSpacing:0,varAssignmentSpaceing:0,switchSpacing:3,objectLitFieldSpace:1}}],"davinci.fileType":[{extension:"js",iconClass:"jsFileIcon",
type:"text"},{extension:"json",iconClass:"jsFileIcon",type:"text"}]}})},"davinci/ve/widgets/FontComboBox":function(){define(["dojo/_base/declare","dijit/form/ComboBox","davinci/lang/ve","dijit/lang/_common"],function(n,m){return n("davinci.ve.widgets.FontComboBox",m,{_getValueAttr:function(){if(this.store)for(var k=0;k<this.store._allValues.length;k++){var h=this.store._allValues[k];if(h.name[0]==this.value)return h.value[0]}return this.value},_setValueAttr:function(k){this.store&&k?this.store.fetch({query:{value:k},
onComplete:function(h,d){1>h.length?this.inherited("_setValueAttr",[k]):(this.inherited("_setValueAttr",[h[0].name[0]]),this.item=h[0])}.bind(this),onError:function(){this.inherited("_setValueAttr",[k])}.bind(this)}):this.inherited("_setValueAttr",[k])}})})},"xcf/model/ModelBase":function(){define(["dcl/dcl","xblox/model/ModelBase"],function(n,m){return n(m,{declaredClass:"xcf.model.ModelBase"})})},"davinci/ve/utils/URLRewrite":function(){define([],function(){var n=/^\s*url\s*\(\s*(\'[^\'\"]*\'|\"[^\'\"]*\"|[^\'\"]*)\s*\)\s*$/,
m=/^[\'\"]?([^\'\"]*)[\'\"]?$/,k=/^(http|ftp)/;return{isAbsolute:function(h){return"string"!=typeof h?!1:(h=this.getUrl(h))?k.test(h):!1},containsUrl:function(h){return"string"!=typeof h?!1:n.test(h)},replaceUrl:function(h,d){return"string"!=typeof h||"string"!=typeof d?null:this.getUrl(h)?"url('"+d+"')":null},stripQuotes:function(h){return h.replace(m,"$1")},encodeURI:function(h){return encodeURI(h).replace(/#/g,"%23")},getUrl:function(h){return"string"!=typeof h?null:(h=h.match(n))&&1<h.length?
this.stripQuotes(h[1]):null}}})},"xgrid/KeyboardNavigation":function(){define(["xdojo/declare","dojo/keys","dojo/_base/lang","dojo/on","xide/utils"],function(n,m,k,h,d){var b=k.hitch;return n("xgrid/KeyboardNavigation",null,{childSelector:".dgrid-row",defer:function(c,g){var d=setTimeout(b(this,function(){d=null;this._destroyed||b(this,c)()}),g||0);return{remove:function(){d&&(clearTimeout(d),d=null);return null}}},buildRendering:function(){this.inherited(arguments);if(!this._keyNavCodes){var c=this._keyNavCodes=
{};c[m.UP_ARROW]=b(this,"_onUpArrow");c[m.DOWN_ARROW]=b(this,"_onDownArrow")}"string"==typeof this.childSelector||b(this,"childSelector");c=this.domNode;this.__on(c,"keypress",null,b(this,"_onContainerKeypress"));this.__on(c,"keydown",null,b(this,"_onContainerKeydown"))},_onLeftArrow:function(){},_onRightArrow:function(){},_onUpArrow:function(){},_onDownArrow:function(){},___focus:function(){this.focusFirstChild()},_getFirstFocusableChild:function(){return this._getNextFocusableChild(null,1)},_getLastFocusableChild:function(){return this._getNextFocusableChild(null,
-1)},_searchString:"",multiCharSearchDuration:1E3,onKeyboardSearch:function(b,g,d,a){b&&(this.deselectAll(),this.select([this.row(b).data],null,!0,{focus:!0,delay:10,append:!0}))},getSearchableText:function(b){return b.message||b.name||""},_keyboardSearchCompare:function(b,g){if(b&&!b.data){var c=this.row(b);c&&(b.data=c.data)}if(b=b?b.data?this.getSearchableText(b.data):"":"")return b=b.toLowerCase(),c=b.replace(/^\s+/,"").substr(0,g.length).toLowerCase(),c=g.length&&c==g?-1:0,b=-1!=b.replace(/^\s+/,
"").indexOf(g.toLowerCase()),0==c&&1<g.length&&b?1:c},_onContainerKeydown:function(b){if(!b.target||-1==b.target.className.indexOf("input")){var c=this._keyNavCodes[b.keyCode];c?(c(b,this.focusedChild),b.stopPropagation(),b.preventDefault(),this._searchString=""):b.keyCode!=m.SPACE||!this._searchTimer||b.ctrlKey||b.altKey||b.metaKey||(b.stopImmediatePropagation(),b.preventDefault(),h.emit(this.domNode,"keypress",{charCode:m.SPACE,cancelable:!0,bubbles:!0}))}},_onContainerKeypress:function(c){if(!(this.editing||
c.target&&-1!=c.target.className.indexOf("input")||32>c.charCode||c.ctrlKey||c.altKey)){var g=null,d,a=0,e=b(this,function(){this._searchTimer&&this._searchTimer.remove();this._searchString+=h;var b=/^(.)\1*$/.test(this._searchString)?1:this._searchString.length;d=this._searchString.substr(0,b);this._searchTimer=this.defer(function(){this._searchTimer=null;this._searchString=""},this.multiCharSearchDuration);var c=this.focusedChildNode||this.focusedChild||null;if(1==b||!c)if(c=this._getNextFocusableChild(c,
1),!c)return;b=c;do{var e=this._keyboardSearchCompare(c,d);e&&0==a++&&(g=c);if(-1==e){a=-1;break}c=this._getNextFocusableChild(c,1)}while(c!=b)}),h=String.fromCharCode(c.charCode).toLowerCase();c.preventDefault();c.stopPropagation();e();this.onKeyboardSearch(g,c,d,a)}},_onChildBlur:function(){},_getNextFocusableChild:function(b,g){var c=b;do{if(b){if(b&&b.node){var a=d.find(".dgrid-cell",b.node,!0);a&&(b=a)}b=this._getNext(b,g)}else if(b=this[0<g?"_getFirst":"_getLast"](),!b)break;if(null!=b&&b!=
c)return b}while(b!=c)},_getFirst:function(){var b=d.find(".dgrid-row",this.domNode,!0);if(b){var g=d.find(".dgrid-cell",b,!0);if(g)return g}return b},_getLast:function(){var b=d.find(".dgrid-row",this.domNode,!1);return b&&(b=d.find(".dgrid-cell",b,!0))?b:null},_getPrev:function(b,g){if(b&&(b=this.up(b,1,!0))){g=null;b.data&&(g=b.data);b.element&&(b=b.element);var c=d.find(".dgrid-cell",b,!0);return c?(c.data||(c.data=g),c):b}},_getNext:function(b,g){if(b&&(b=this.down(b,1,!0)))return b.element&&
(b=b.element),(g=d.find(".dgrid-cell",b,!0))?g:b}})})},"xgrid/ContextMenu":function(){define(["dojo/_base/declare","xide/utils","xide/widgets/ContextMenu","xide/types"],function(n,m,k,h){return n("xgrid.ContextMenu",null,{contextMenu:null,getContextMenu:function(){return this.contextMenu},_createContextMenu:function(){var d=this.contextMenuArgs||{},b=this.contentNode;m.mixin(d,{owner:this,delegate:this,_actionFilter:{quick:!0}});var c=new k(d,b);c.openTarget=b;c.init({preventDoubleContext:!1});c._registerActionEmitter(this);
$(b).one("contextmenu",function(b){b.preventDefault();this.store||c.setActionStore(this.getActionStore(),this)}.bind(this));this.contextMenu=c;this.add(c)},startup:function(){this._started||(this.inherited(arguments),this.hasPermission(h.ACTION.CONTEXT_MENU)&&this._createContextMenu())}})})},"xide/widgets/FileWidget":function(){define("dcl/dcl xide/widgets/WidgetBase xide/widgets/EditBox xide/factory xide/utils xfile/FileActions xfile/views/FileGridLight dojo/Deferred xdojo/has xide/mixins/Electron".split(" "),
function(n,m,k,h,d,b,c,g,p,a){var e=p("electronx");return n([m],{declaredClass:"xide.widgets.FileWidget",oriPath:null,minHeight:"54px;",value:"",options:null,dialogTitle:"Select Script",editBox:null,templateString:"\x3cdiv class\x3d'widgetContainer widgetBorder widgetTable widget' style\x3d''\x3e\x3ctable border\x3d'0' cellpadding\x3d'5px' width\x3d'100%' \x3e\x3ctbody\x3e\x3ctr attachTo\x3d'extensionRoot'\x3e\x3ctd width\x3d'15%' class\x3d'widgetTitle'\x3e\x3cspan\x3e\x3cb\x3e${!title}\x3c/b\x3e\x3cspan\x3e\x3c/td\x3e\x3ctd width\x3d'80px' class\x3d'widgetValue2' valign\x3d'middle' attachTo\x3d'previewNode'\x3e\x3c/td\x3e\x3ctd class\x3d'extension' width\x3d'25px' attachTo\x3d'button0'\x3e\x3c/td\x3e\x3ctd class\x3d'extension' width\x3d'25px' attachTo\x3d'button1'\x3e\x3c/td\x3e\x3ctd class\x3d'extension' width\x3d'25px' attachTo\x3d'button2'\x3e\x3c/td\x3e\x3c/tr\x3e\x3c/tbody\x3e\x3c/table\x3e\x3cdiv attachTo\x3d'expander' onclick\x3d'' style\x3d'width:100%;'\x3e\x3c/div\x3e\x3cdiv attachTo\x3d'last'\x3e\x3c/div\x3e\x3c/div\x3e",
filePathValidator:function(a,b){return!0},onFileSelected:function(a,b){if(b){a=d.toBoolean(this.userData.acceptFiles);var c=d.toBoolean(this.userData.acceptFolders),e=d.toBoolean(this.userData.encodeFilePath),g=d.toBoolean(this.userData.buildFullPath),h=!0===b.directory;if(!h||c)if(h||a)this.userData.changed=!0,this.userData.active=!0,b=g?d.buildPath(b.mount,b.path,e):b.path,this.editBox.set("value",b),this.value=b,this.setValue(b)}},getOptions:function(){var a=this.ctx||window.xFileContext,b={title:this.dialogTitle,
owner:a,dst:{name:"Select",path:"."},src:".",ctx:a},c=this.options||a.defaultOptions;c?b=d.mixin(b,c):console.error("have no options");(c=this.userData?this.userData.filePickerOptions:{})&&(b=d.mixin(b,c));b.store&&b.defaultStoreName?(c&&c.defaultStoreOptions||(b.defaultStoreOptions={fields:1663,includeList:"*",excludeList:"*"}),b.store=a.getStore(b.defaultStoreName,b.defaultStoreOptions)):c&&c.defaultStoreOptions&&(b.store=a.getStore(b.defaultStoreName,c.defaultStoreOptions));return b},onSelect:function(){var h=
this;d.destroy(this.picker);if(this._onSelect){var p=this._onSelect(this);p.then&&p.then(function(a){h.editBox.set("value",a);h.setValue(a)});return p}var p=this.getOptions(),k=this.userData.filePickerOptions||{};try{var r=function(a,b,c){a=a.realPath||a.path;h.editBox.set("value",a);h.setValue(a)},v=new g;if(e&&!0===k.allowElectron){var m=new a;m.srequire("fs");var n=m.remote().dialog.showOpenDialog({properties:["openDirectory"],defaultPath:this.userData.value||"",title:"Select "+this.userData.title});
n&&(n=n[0],h.editBox.set("value",n),h.setValue(n))}else b.createFilePicker(this,"",r,"Select File",null,p,v,c)}catch(z){console.error("file widget crash : "+z),logError(z)}},set:function(a,b){this.editBox&&"value"===a&&this.editBox.set(a,b);return this.inherited(arguments)},postMixInProperties:function(){this.userData&&this.userData.widget&&this.userData.widget.title&&(this.title=this.userData.widget.title);if(this.userData&&!0===this.userData.vertical||!0===this.vertical)this.templateString="\x3cdiv class\x3d'widgetContainer widgetBorder widgetTable' style\x3d''\x3e\x3ctable border\x3d'0' cellpadding\x3d'5px' width\x3d'100%' \x3e\x3ctbody\x3e\x3ctr attachTo\x3d'extensionRoot'\x3e\x3ctd width\x3d'100%' class\x3d'widgetTitle'\x3e\x3cspan\x3e\x3cb\x3e${!title}\x3c/b\x3e\x3cspan\x3e\x3c/td\x3e\x3c/tr\x3e\x3ctr attachTo\x3d'extensionRoot'\x3e\x3ctd width\x3d'100px' class\x3d'widgetValue2' valign\x3d'middle' attachTo\x3d'previewNode'\x3e\x3c/td\x3e\x3ctd class\x3d'extension' width\x3d'25px' attachTo\x3d'button0'\x3e\x3c/td\x3e\x3ctd class\x3d'extension' width\x3d'25px' attachTo\x3d'button1'\x3e\x3c/td\x3e\x3ctd class\x3d'extension' width\x3d'25px' attachTo\x3d'button2'\x3e\x3c/td\x3e\x3c/tr\x3e\x3c/tbody\x3e\x3c/table\x3e\x3cdiv attachTo\x3d'expander' onclick\x3d'' style\x3d'width:100%;'\x3e\x3c/div\x3e\x3cdiv attachTo\x3d'last'\x3e\x3c/div\x3e\x3c/div\x3e";
return this.inherited(arguments)},fillTemplate:function(){d.toString(this.userData.value);var a=this,b=d.addWidget(k,{userData:this.userData,title:""},null,this.previewNode,!0);this.editBox=b;b._on("change",function(b){a.setValue(b)});var c=h.createSimpleButton("","fa-folder","btn-default",{style:""});$(c).click(function(){a.onSelect()});$(this.button0).append(c);this.add(b)},startup:function(){this.inherited(arguments);this.fillTemplate();this.onReady()}})})},"dijit/Menu":function(){define("require dojo/_base/array dojo/_base/declare dojo/dom dojo/dom-attr dojo/dom-geometry dojo/dom-style dojo/keys dojo/_base/lang dojo/on dojo/sniff dojo/_base/window dojo/window ./popup ./DropDownMenu dojo/ready".split(" "),
function(n,m,k,h,d,b,c,g,p,a,e,q,u,w,r,v){e("dijit-legacy-requires")&&v(0,function(){n(["dijit/MenuItem","dijit/PopupMenuItem","dijit/CheckedMenuItem","dijit/MenuSeparator"])});return k("dijit.Menu",r,{constructor:function(){this._bindings=[]},targetNodeIds:[],selector:"",contextMenuForWindow:!1,leftClickToOpen:!1,refocus:!0,postCreate:function(){this.contextMenuForWindow?this.bindDomNode(this.ownerDocumentBody):m.forEach(this.targetNodeIds,this.bindDomNode,this);this.inherited(arguments)},_iframeContentWindow:function(a){return u.get(this._iframeContentDocument(a))||
this._iframeContentDocument(a).__parent__||a.name&&document.frames[a.name]||null},_iframeContentDocument:function(a){return a.contentDocument||a.contentWindow&&a.contentWindow.document||a.name&&document.frames[a.name]&&document.frames[a.name].document||null},bindDomNode:function(b){b=h.byId(b,this.ownerDocument);var c;if("iframe"==b.tagName.toLowerCase()){var e=b;c=this._iframeContentWindow(e);c=q.body(c.document)}else c=b==q.body(this.ownerDocument)?this.ownerDocument.documentElement:b;var k={node:b,
iframe:e};d.set(b,"_dijitMenu"+this.id,this._bindings.push(k));var r=p.hitch(this,function(b){var c=this.selector,d=c?function(b){return a.selector(c,b)}:function(a){return a},h=this;return[a(b,d(this.leftClickToOpen?"click":"contextmenu"),function(a){a.stopPropagation();a.preventDefault();(new Date).getTime()<this._lastKeyDown+500||h._scheduleOpen(this,e,{x:a.pageX,y:a.pageY},a.target)}),a(b,d("keydown"),function(a){if(93==a.keyCode||a.shiftKey&&a.keyCode==g.F10||this.leftClickToOpen&&a.keyCode==
g.SPACE)a.stopPropagation(),a.preventDefault(),h._scheduleOpen(this,e,null,a.target),this._lastKeyDown=(new Date).getTime()})]});k.connects=c?r(c):[];e&&(k.onloadHandler=p.hitch(this,function(){var a=this._iframeContentWindow(e),a=q.body(a.document);k.connects=r(a)}),e.addEventListener?e.addEventListener("load",k.onloadHandler,!1):e.attachEvent("onload",k.onloadHandler))},unBindDomNode:function(a){var b;try{b=h.byId(a,this.ownerDocument)}catch(C){return}a="_dijitMenu"+this.id;if(b&&d.has(b,a)){for(var c=
d.get(b,a)-1,e=this._bindings[c],g;g=e.connects.pop();)g.remove();(g=e.iframe)&&(g.removeEventListener?g.removeEventListener("load",e.onloadHandler,!1):g.detachEvent("onload",e.onloadHandler));d.remove(b,a);delete this._bindings[c]}},_scheduleOpen:function(a,b,c,e){this._openTimer||(this._openTimer=this.defer(function(){delete this._openTimer;this._openMyself({target:e,delegatedTarget:a,iframe:b,coords:c})},1))},_openMyself:function(a){function g(){m.refocus&&n&&n.focus();w.close(m)}var d=a.target,
q=a.iframe,p=a.coords,k=!p;this.currentTarget=a.delegatedTarget;if(p){if(q){a=b.position(q,!0);var d=this._iframeContentWindow(q),d=b.docScroll(d.document),r=c.getComputedStyle(q),u=c.toPixelValue,v=(e("ie")&&e("quirks")?0:u(q,r.paddingLeft))+(e("ie")&&e("quirks")?u(q,r.borderLeftWidth):0),q=(e("ie")&&e("quirks")?0:u(q,r.paddingTop))+(e("ie")&&e("quirks")?u(q,r.borderTopWidth):0);p.x+=a.x+v-d.x;p.y+=a.y+q-d.y}}else p=b.position(d,!0),p.x+=10,p.y+=10;var m=this,q=this._focusManager.get("prevNode");
a=this._focusManager.get("curNode");var n=!a||h.isDescendant(a,this.domNode)?q:a;w.open({popup:this,x:p.x,y:p.y,onExecute:g,onCancel:g,orient:this.isLeftToRight()?"L":"R"});this.focus();k||this.defer(function(){this._cleanUp(!0)});this._onBlur=function(){this.inherited("_onBlur",arguments);w.close(this)}},destroy:function(){m.forEach(this._bindings,function(a){a&&this.unBindDomNode(a.node)},this);this.inherited(arguments)}})})},"davinci/lang/ui":function(){define([],function(){return{dontShowAgain:"Don't show again",
selectFile:"Select a file",openFile:"Open File",aboutMaqetta:"About Maqetta",productVersion:"Version: ${0}",productDate:"Date: ${0}",build:"Build: ${0}",library:"Library",version:"Version",include:"Include",source:"Source",baseLocation:"Base Location",invalidDownloadFileName:"File name may only contain letters, numbers, \x26#8216;_\x26#8216;, and \x26#8216;.\x26#8216;.",selectedFiles:"Selected Files",noFilesSelected:"No files selected!",downloadButtonLabel:"Download",themeAlreadyExists:"Theme already Exists!",
invalidThemeName:"Invalid theme name",errorCreatingTheme:"Error creating theme: ",creatingTheme:"Creating theme",noUserThemes:"No user themes found in workspace. Please create a new theme before editing.",themeSetsDialog:"Manage theme sets",renameThemeSet:"Rename theme set",themeSets:"Theme sets:",currentlySelectedThemeSet:"Currently selected theme set:",themeSetName:"Name:",desktopTheme:"Dojo desktop 1.7 theme:",mobileTheme:"Dojo mobile 1.7 theme:",android:"Android:",blackberry:"Blackberry:",ipad:"iPad:",
iphone:"iPhone:",other:"Other:",selectTheme:"Select theme",themeSet:"Theme set:",themeVersionMessage:"Theme version does not match workspace version this could produce unexpected results. We suggest recreating the custom theme using the current version of Maqetta and deleting the existing theme.",addThemeSet:"Add theme set",deleteThemeSet:"Delete theme set",workspaceLocation:"Workspace Location",savingReadonlyFile:"This file is a read-only file. Please save it to a writeable location.",create:"Create",
open:"Open",save:"Save",select:"Select",update:"Update",unknown:"unknown",fileName:"File name",folderName:"Folder name",parentFolder:"Parent folder: ",newFolderLabel:"New folder",cancelButtonLabel:"Cancel",newFolderName:"Name:",createFolder:"Create Folder",createNewFile:"Create New File",createMobileApplication:"Create a Mobile Application",createDesktopApplication:"Create a Desktop Application",createSketchHiFi:"Create a Sketch (high-fidelity)",createSketchLoFi:"Create a Sketch (low-fidelity)",createNewCSSFile:"Create New CSS File",
createNewJSFile:"Create New JavaScript File",createNewFolder:"Create New Folder",saveFileAs:"Save File As",downloadFile:"Download",selectFiles:"Select Files...",selectZip:"Select ZIP file...",upload:"Upload",addFiles:"Upload",uploading:"Uploading...",completed:"completed: ${0} \n",done:"Done",explodeZipWarning:"Warning: Contents of .zip files will overwrite any conflicting files in your workspace",mustEnterFileName:"You must enter a file name.",cannotSelect:"Cannot select ${0}. It is a folder.",fileAlreadyExistsOverwrite:"File ${0} already exists. OK to overwrite?",
cannotCreate:"Cannot create ${0}. It already Exists.",fileNameSlashCharacter:"File names cannot contain a slash character (/). Your file name is: ${0}",doesNotHaveExtension:"The name ${0} does not have an extension (e.g., .html, .css or .js) and will be treated as a plain text file. OK to proceed?",areYouSureDelete:"Are you sure you want to delete ${0}?",areYouSureDeleteProject:"Are you sure you want to delete project ${0}?",noResourcesSelected:"No resources are currently selected.",optimizeOption:"Use Dojo Web Builder (experimental)",
downloadFullSource:"Download uncompressed source for selected libraries (if available)",selectAll:"All",selectNone:"None",themeToClone:"Theme to clone",newName:"New Name",selectTheme:"Select a Theme",newProject:"New Project",renameProjectDialogTitle:"Rename Project To...",deleteProjectButtonTitle:"Delete Project",renameProjectButtonTitle:"Rename Project...",deleteOnlyProjectError:"You can't delete the only project in your workspace!",newFileShowFiles:"Show file picker",newFileHideFiles:"Hide file picker",
root:"(root)",nhfoDevice:"Device:",nhfoDeviceTooltip:"Select an initial mobile device",nhfoThemeButtonLabel:"Theme...",nhfoThemeButtonTitle:"Select themes or theme set for new HTML file",renameNewLabel:"Name:",renameButtonLabel:"Rename",renameDialogTitle:"Rename To...",createProject:"New project",createProjectMenuItem:"New project...",deleteProjectMenuItem:"Delete this project...",renameProjectMenuItem:"Rename this project...",saveAsProjectTemplateMenuItem:"Save as project template...",manageProjectTemplatesMenuItem:"Manage project templates...",
modifyLibrariesMenuItem:"Modify libraries...",modifyLibraries:"Modify libraries",projectColon:"Project:",ProjectMenu:"Project menu",newProjectName:"Name:",newProjectTemplate:"Template:",newProjectUseProjectTemplate:"Use project template",newProjectCloneExistingProject:"Copy files from current project into new project",newProjectEclipseSupport:"New project should be Eclipse-compatible",newProjectNameExists:"A project with this name already exists",saveAsProjectTemplate:"Save as project template",newProjectTemplateName:"Project template name:",
newProjectTemplateShareLabel:"Share with everyone",newProjectTemplateOverwrite:"Project template {0} already exists. OK to overwrite?",newProjectTemplateCreationSuccess:"Project template {0} has been saved",newProjectTemplateCreationFailure:"Error: Project template {0} save operation failed",newProjectTemplateCancelled:"Operation cancelled",manageProjectTemplates:"Manage project templates",ManageProjectTemplatesHeaderName:"Project template name",ManageProjectTemplatesHeaderShared:"Share with everyone?",
ManageProjectTemplatesHeaderCreatedBy:"Created by",ManageProjectTemplatesHeaderCreatedOn:"Created on",ManageProjectTemplatesHeaderLastModified:"Last updated",ManageProjectTemplatesNoTemplates:"You have no project templates.",ManageProjectTemplatesDuplicateNames:"Invalid entries - two project templates have the same name",ManageProjectTemplateAboutToOccur:"The following actions are about to occur:",ManageProjectTemplateDeletions:"project template deletions",ManageProjectTemplateModifications:"project template modifications",
ManageProjectTemplateOKToProceed:"OK to proceed?",ManageProjectTemplatesInitializing:"Initializing...",modify:"Modify",User:"Account",currentProject:"Current Project:",selectProject:"Select a Project:",NoteOperationNotUndoable:"Note: this operation is not undoable."}})},"davinci/ve/actions/MoveToFrontAction":function(){define(["dojo/_base/declare","./_ReorderAction","davinci/commands/CompoundCommand","davinci/ve/commands/ReparentCommand"],function(n,m,k,h){return n("davinci.ve.actions.MoveToFrontAction",
[m],{name:"MoveToFront",iconClass:"editActionIcon editMoveToFrontIcon",run:function(d){if(d=this.fixupContext(d)){var b=d&&d.getSelection?d.getSelection():[];if(0!==b.length&&this.selectionSameParentAllAbsolute(b)){for(var c=b[0].getParent(),g=this.getAbsoluteSiblings(b[0]),p=new k,a=0;a<g.length;a++){var e=g[a];0<=b.indexOf(e)&&p.add(new h(e,c,null))}d.getCommandStack().execute(p)}}},isEnabled:function(d){d=(d=this.fixupContext(d))&&d.getSelection?d.getSelection():[];if(0===d.length||!this.selectionSameParentAllAbsolute(d))return!1;
for(var b=this.getAbsoluteSiblings(d[0]),c=0;c<d.length;c++)if(b.indexOf(d[c])<b.length-d.length)return!0;return!1}})})},"dijit/layout/utils":function(){define(["dojo/_base/array","dojo/dom-class","dojo/dom-geometry","dojo/dom-style","dojo/_base/lang"],function(n,m,k,h,d){function b(b){return b.substring(0,1).toUpperCase()+b.substring(1)}function c(b,a){var c=b.resize?b.resize(a):k.setMarginBox(b.domNode,a);c?d.mixin(b,c):(d.mixin(b,k.getMarginBox(b.domNode)),d.mixin(b,a))}var g={marginBox2contentBox:function(b,
a){var c=h.getComputedStyle(b),g=k.getMarginExtents(b,c),d=k.getPadBorderExtents(b,c);return{l:h.toPixelValue(b,c.paddingLeft),t:h.toPixelValue(b,c.paddingTop),w:a.w-(g.w+d.w),h:a.h-(g.h+d.h)}},layoutChildren:function(g,a,e,h,k){a=d.mixin({},a);m.add(g,"dijitLayoutContainer");e=n.filter(e,function(a){return"center"!=a.region&&"client"!=a.layoutAlign}).concat(n.filter(e,function(a){return"center"==a.region||"client"==a.layoutAlign}));n.forEach(e,function(e){var g=e.domNode,d=e.region||e.layoutAlign;
if(!d)throw Error("No region setting for "+e.id);var q=g.style;q.left=a.l+"px";q.top=a.t+"px";q.position="absolute";m.add(g,"dijitAlign"+b(d));g={};h&&h==e.id&&(g["top"==e.region||"bottom"==e.region?"h":"w"]=k);"leading"==d&&(d=e.isLeftToRight()?"left":"right");"trailing"==d&&(d=e.isLeftToRight()?"right":"left");"top"==d||"bottom"==d?(g.w=a.w,c(e,g),a.h-=e.h,"top"==d?a.t+=e.h:q.top=a.t+a.h+"px"):"left"==d||"right"==d?(g.h=a.h,c(e,g),a.w-=e.w,"left"==d?a.l+=e.w:q.left=a.l+a.w+"px"):"client"!=d&&"center"!=
d||c(e,a)})}};d.setObject("dijit.layout.utils",g);return g})},"xblox/model/logic/BreakBlock":function(){define(["dcl/dcl","xblox/model/Block"],function(n,m){return n(m,{declaredClass:"xblox.model.logic.BreakBlock",name:"Break",icon:"fa-stop",hasInlineEdits:!1,canAdd:!1,toText:function(){return'\x26nbsp;\x3cspan class\x3d"fa-stop text-warning"\x3e\x3c/span\x3e\x26nbsp;\x26nbsp;\x3cspan\x3e'+this.name+"\x3c/span\x3e"},solve:function(k,h){this.onSuccess(this,h)}})})},"davinci/ve/utils/GeomUtils":function(){define(["dojo/_base/window",
"dojo/dom-geometry","dojo/dom-style","dojo/has","dojo/_base/sniff"],function(n,m,k,h,d){var b=["TABLE","TBODY","TR","TD","TH"];return{getMarginBoxPageCoords:function(b){var c;n.withDoc(b.ownerDocument,function(){var g=this.getBorderBoxPageCoords(b),a=this.getMarginExtents(b);c={l:g.l-a.l,t:g.t-a.t,w:g.w+a.l+a.r,h:g.h+a.t+a.b}}.bind(this));return c},getMarginBoxPageCoordsCached:function(b){b._maqMarginBoxPageCoords||(b._maqMarginBoxPageCoords=this.getMarginBoxPageCoords(b));return b._maqMarginBoxPageCoords},
getBorderBoxPageCoords:function(c){var g;n.withDoc(c.ownerDocument,function(){if(b.indexOf(c.tagName)){var d=c.getBoundingClientRect(),a=this.getScrollLeft(c),e=this.getScrollTop(c);g={l:d.left+a,t:d.top+e,w:d.width,h:d.height}}else{for(var d=c.offsetLeft,a=c.offsetTop,e=c.parentNode,h=c.offsetParent;e&&"BODY"!=e.tagName;){"number"==typeof e.scrollLeft&&"number"==typeof e.scrollTop&&(d-=e.scrollLeft,a-=e.scrollTop);if(e==h)var k=m.getBorderExtents(h),d=d+(h.offsetLeft+k.l),a=a+(h.offsetTop+k.t),h=
h.offsetParent;e=e.parentNode}g={l:d,t:a,w:c.offsetWidth,h:c.offsetHeight}}}.bind(this));return g},getBorderBoxPageCoordsCached:function(b){b._maqBorderBoxPageCoords||(b._maqBorderBoxPageCoords=this.getBorderBoxPageCoords(b));return b._maqBorderBoxPageCoords},getScrollLeft:function(b){b=b&&b.ownerDocument;return h("mozilla")?(b=b&&b.defaultView)?b.pageXOffset:0:(b=b&&b.body)?b.scrollLeft:0},getScrollTop:function(b){b=b&&b.ownerDocument;return h("mozilla")?(b=b&&b.defaultView)?b.pageYOffset:0:(b=b&&
b.body)?b.scrollTop:0},getMarginExtents:function(b,g){var c=g||k.getComputedStyle(b),a;c?(b=parseFloat(c.marginLeft)||0,g=parseFloat(c.marginTop)||0,a=parseFloat(c.marginRight)||0,c=parseFloat(c.marginBottom)||0):b=g=a=c=0;return{l:b,t:g,r:a,b:c,w:b+a,h:g+c}},clearGeomCache:function(b){delete b._maqBorderBoxPageCoords;delete b._maqMarginBoxPageCoords}}})},"xide/widgets/JSONDualEditorWidget":function(){define("dcl/dcl xide/widgets/WidgetBase xide/types xide/utils xide/factory xaction/ActionProvider xide/views/_LayoutMixin xide/widgets/ActionToolbar dojo/promise/all".split(" "),
function(n,m,k,h,d,b,c,g,p){return n([m,c.dcl,b.dcl],{declaredClass:"xide.widgets.JSONDualEditorWidget",minHeight:"400px;",value:"",options:null,templateString:"\x3cdiv attachTo\x3d'domNode' class\x3d'widgetContainer widgetBorder widgetTable' style\x3d''\x3e\x3c/div\x3e",jsonEditorWidget:null,editorWidget:null,jsonOptions:{},setActiveEditor:function(a){this._activeEditor=a;this._emit("setActiveEditor",a)},fillTemplate:function(){var a=this,b=h.toString(this.userData.value)||"{}",c=$('\x3ctextarea rows\x3d"3" class\x3d"form-control input-transparent" \x3e\x3c/textarea\x3e');
c.val(b);this.editBox=c;$(this.previewNode).append(c);this.editBox.on("change",function(b){b=b.target.value;a.userData.changed=!0;a.userData.active=!0;h.setCIValueByField(a.userData,"value",b);b={owner:a.delegate||a.owner,ci:a.userData,newValue:b};a.publish(k.EVENTS.ON_CI_UPDATE,b);a._emit("valueChanged",b)});b=d.createSimpleButton("","fa-magic","btn-default",{style:""});$(b).click(function(){a.onSelect()});$(this.button0).append(b)},createWidgets:function(a,b,c){var e=this.userData,q=this,r=[h.createCI("Arguments",
k.ECIType.JSON_DATA,h.getJson(e.value),h.mixin({options:{readOnlyNodes:{commands:!0,variables:!0,meta:!0},renderTemplates:[{nodeValuePath:"field.innerHTML",match:[/^variables[\s]?\.(\d+)$/,/^commands[\s]?\.(\d+)$/],replaceWith:"{nodeValue} - {name}",variables:null,nodeValueTransform:function(a){return h.capitalize(a)},insertIfMatch:{}}],insertTemplates:[{label:"New Command",path:"commands",value:'{name:"No Title",value:""}',newNodeTemplate:"[]",collapse:!0,select:!0},{label:"New Variable",path:"variables",
value:'{name:"No Title",value:""}',newNodeTemplate:"[]",collapse:!0,select:!0}]},widget:{templateString:"\x3cdiv class\x3d'widgetContainer widgetBorder widgetTable widget' style\x3d'height: 100%'\x3e\x3cdiv class\x3d'widget jsonEditorWidget' attachTo\x3d'valueNode' style\x3d'overflow: auto;height: 100%'\x3e\x3c/div\x3e\x3c/div\x3e",resizeToParent:!0}},this.jsonOptions))];b=d.renderCIS(r,b.containerNode,this);b.then(function(a){q.jsonEditorWidget=a[0];if(!0!==q.jsonOptions.noActions){var b=h.addWidget(g,
{attachToGlobal:!1,resizeToParent:!1},null,c,!0);q.add(b,null,!0);var e=q.getActionStore(),d=q.jsonEditorWidget.editor.getItemActions();_.each(d,function(a){a.mixin={addPermission:!0};a.tab="Home"});q.addActions(d);b.setActionStore(e,q);$(b.domNode).css({width:"auto","float":"left"});$(b.domNode).removeClass("actionToolbar")}$(a[0].domNode).on("click",function(){q.setActiveEditor(a[0])});q.setActiveEditor(a[0])});e=[h.createCI("Arguments",k.ECIType.SCRIPT,e.value,{vertical:!0,widget:{templateString:"\x3cdiv class\x3d'' style\x3d'width: 100%;height:inherit'\x3e",
height:"100%",editorArgs:{showGutter:!0,mode:"json",options:{showGutter:!0,mode:"json"}}}})];a=d.renderCIS(e,a.containerNode,this);a.then(function(a){q.editorWidget=a[0];$(a[0].domNode).on("click",function(){q.setActiveEditor(a[0])})});e=d.createSimpleButton("","fa-caret-up","btn-default",{style:"margin-right:12px"},this.domNode);r=d.createSimpleButton("","fa-caret-down","btn-default",{style:""},this.domNode);$(e).click(function(){q.onUp()});$(r).click(function(){q.onDown()});return p([a,b])},onUp:function(){var a=
this.editorWidget.getValue();try{var b=h.fromJson(a);this.jsonEditorWidget.setData(b)}catch(q){console.error("mal formed "+q)}},onDown:function(){this.editorWidget.aceEditor.set("value",this.jsonEditorWidget.getValue())},onValueChanged:function(){},startup:function(){var a=this.getDocker();this._addPanel(h.mixin({h:"80",title:"  "},{}),k.DOCKER.DOCK.TOP,!1,.5,"DefaultFixed");this.getBottomPanel(!1,null,null,null,null);var b=a.getPanels(),c=b[1],g=b[0],b=b[2],d=this.createWidgets(b,c,g),p=this;setTimeout(function(){c.getSplitter().pos(.5)},
100);this.dfd&&d.then(function(a){p.dfd.resolve(a)});g.maxSize(null,38);b.getSplitter().pos(.5);$(this.domNode).css({textAlign:"center"});this.add(a);this.onReady();return d},getValue:function(){return this._activeEditor.getValue()}})})},"davinci/ve/actions/ViewSourceAction":function(){define(["dojo/_base/declare","davinci/ve/actions/ContextAction","davinci/lang/ve"],function(n,m,k){return n("davinci.ve.actions.ViewSourceAction",[m],{run:function(h){(h=this.fixupContext(h))&&h.editor&&h.editor.switchDisplayModeSourceLatest&&
(editor=h.editor,editor.switchDisplayModeSourceLatest())},updateStyling:function(){var h=davinci.Workbench.getOpenEditor();if(h&&h.getDisplayMode){var d=h.getDisplayMode(),h=h.getSourceDisplayMode(),b=dojo.query(".maqSourceComboButton")[0];if(b){var c=dijit.byNode(b);c&&c.set("label",k["SourceComboButton-"+h]);"design"==d?dojo.removeClass(b,"maqLabelButtonSelected"):dojo.addClass(b,"maqLabelButtonSelected")}}}})})},"xblox/model/BlockModel":function(){define(["dcl/dcl","xdojo/declare","xide/data/Model",
"xide/data/Source"],function(n,m,k,h){return m("xblox.model.BlockModel",[k,h],{declaredClass:"xblox.model.BlockModel",icon:"fa-play",mayHaveChildren:function(d){return null!=this.items&&0<this.items.length},getChildren:function(d){return this.items},getBlockIcon:function(){return'\x3cspan class\x3d"'+this.icon+'"\x3e\x3c/span\x3e'}})})},"preview/loadIndicator":function(){define(["dojo/dom-class","dojo/dom-construct","dojo/on"],function(n,m,k){return function(h,d,b){var c;return[k(h,"DOMContentLoaded",
function(g){var h=g.currentTarget,a=g.target;h.require&&(n.add(a.body,"loading"),c=m.create("style",null,a.head),c.innerText=".loading{background: url('"+d+"') no-repeat center "+b+"}",h.require(["dojo/ready"],function(){n.remove(a.body,"loading");c.parentNode.removeChild(c)}))}),k(h,"error",function(b){console.error("An error has occurred while previewing "+b.filename+": "+b.message);c&&c.parentNode.removeChild(c)})]}})},"dojo/i18n":function(){define("./_base/kernel require ./has ./_base/array ./_base/config ./_base/lang ./_base/xhr ./json module".split(" "),
function(n,m,k,h,d,b,c,g,p){c=n.i18n={};var a=/(^.*(^|\/)nls)(\/|$)([^\/]*)\/?([^\/]*)/,e=function(a,b,c,e){var g=[c+e];b=b.split("-");for(var d="",h=0;h<b.length;h++)if(d+=(d?"-":"")+b[h],!a||a[d])g.push(c+d+"/"+e),g.specificity=d;return g},q={},u=function(a,b,c){c=c?c.toLowerCase():n.locale;a=a.replace(/\./g,"/");b=b.replace(/\./g,"/");return/root/i.test(c)?a+"/nls/"+b:a+"/nls/"+c+"/"+b},w=n.getL10nName=function(a,b,c){return a=p.id+"!"+u(a,b,c)},r=function(a,c,g,d,h,p){a([c],function(k){var r=
b.clone(k.root||k.ROOT),u=e(!k._v1x&&k,h,g,d);a(u,function(){for(var a=1;a<u.length;a++)r=b.mixin(b.clone(r),arguments[a]);q[c+"/"+h]=r;r.$locale=u.specificity;p()})})},v=function(a){var c=d.extraLocale||[],c=b.isArray(c)?c:[c];c.push(a);return c},x=function(c,e,d){var p=c.split("*"),k="preload"==p[1];k&&(q[c]||(q[c]=1,C(p[2],g.parse(p[3]),1,e)),d(1));(p=k)||(y&&B.push([c,e,d]),p=y);if(!p)try{var u=a.exec(c),m=u[1]+"/",w=u[5]||u[4],A=m+w,x=u[5]&&u[4],z=x||n.locale||"",F=A+"/"+z,G=x?[z]:v(z),D=G.length,
H=function(){--D||d(b.delegate(q[F]))};h.forEach(G,function(a){var b=A+"/"+a;E(b);q[b]?H():r(e,A,m,w,a,H)})}catch(S){console.error("error loading i18n bundle "+c,S)}};if(k("dojo-unit-tests"))var A=c.unitTests=[];var z=c.normalizeLocale=function(a){n.local="en";a=a?a.toLowerCase():"en";return"root"==a?"ROOT":a},y=0,B=[],C=c._preloadLocalizations=function(a,b,c,e){function g(a,b){e([a],b)}function d(a,b){for(a=a.split("-");a.length;){if(b(a.join("-")))return;a.pop()}b("ROOT")}function p(c){c=z(c);d(c,
function(c){if(0<=h.indexOf(b,c)){var e=a.replace(/\./g,"/")+"_"+c;y++;g(e,function(a){for(var b in a)q[m.toAbsMid(b)+"/"+c]=a[b];for(--y;!y&&B.length;)x.apply(null,B.shift())});return!0}return!1})}e=e||m;p();h.forEach(n.config.extraLocale,p)},E=function(){},F={},G=new Function("__bundle","__checkForLegacyModules","__mid","__amdValue","var define \x3d function(mid, factory){define.called \x3d 1; __amdValue.result \x3d factory || mid;},\t   require \x3d function(){define.called \x3d 1;};try{define.called \x3d 0;eval(__bundle);if(define.called\x3d\x3d1)return __amdValue;if((__checkForLegacyModules \x3d __checkForLegacyModules(__mid)))return __checkForLegacyModules;}catch(e){}try{return eval('('+__bundle+')');}catch(e){return e;}"),
E=function(a){for(var b,c=a.split("/"),e=n.global[c[0]],g=1;e&&g<c.length-1;e=e[c[g++]]);e&&((b=e[c[g]])||(b=e[c[g].replace(/-/g,"_")]),b&&(q[a]=b));return b};c.getLocalization=function(a,b,c){var e;a=u(a,b,c);x(a,m,function(a){e=a});return e};k("dojo-unit-tests")&&A.push(function(a){a.register("tests.i18n.unit",function(a){var b;b=G("{prop:1}",E,"nonsense",F);a.is({prop:1},b);a.is(void 0,b[1]);b=G("({prop:1})",E,"nonsense",F);a.is({prop:1},b);a.is(void 0,b[1]);b=G("{'prop-x':1}",E,"nonsense",F);
a.is({"prop-x":1},b);a.is(void 0,b[1]);b=G("({'prop-x':1})",E,"nonsense",F);a.is({"prop-x":1},b);a.is(void 0,b[1]);b=G("define({'prop-x':1})",E,"nonsense",F);a.is(F,b);a.is({"prop-x":1},F.result);b=G("define('some/module', {'prop-x':1})",E,"nonsense",F);a.is(F,b);a.is({"prop-x":1},F.result);b=G("this is total nonsense and should throw an error",E,"nonsense",F);a.is(b instanceof Error,!0)})});return b.mixin(c,{dynamic:!0,normalize:function(a,b){return/^\./.test(a)?b(a):a},load:x,cache:q,getL10nName:w})})},
"davinci/ui/Download":function(){define("dojo/_base/declare dijit/_TemplatedMixin dijit/_WidgetBase dijit/_WidgetsInTemplateMixin davinci/library system/resource dojo/promise/all dojo/parser davinci/Workbench davinci/ve/RebaseDownload davinci/lang/ui/ui dijit/lang/_common dojo/text!./templates/download.html davinci/Theme dijit/form/Button dijit/form/ValidationTextBox dijit/form/TextBox".split(" "),function(n,m,k,h,d,b,c,g,p,a,e,q,u,w){return n([k,m,h],{templateString:u,_fileNameValidationRegExp:"[a-zA-z0-9_.]+",
_fileNameMaxLength:50,postMixInProperties:function(){this._projectName=p.getProject();dojo.mixin(this,e);dojo.mixin(this,q);this.inherited(arguments)},buildRendering:function(){this.inherited(arguments);this._buildUITable()},_buildUITable:function(){this._handles=[];this._userLibs=d.getUserLibs(this.getRoot());var a=[dojo.replace("\x3ctable cellspacing\x3d'0' cellpadding\x3d'0' width\x3d'100%' class\x3d'dwnloadLibTable'\x3e\x3ctr\x3e\x3ctd class\x3d'header'\x3e{library}\x3c/td\x3e\x3ctd class\x3d'header'\x3e{version}\x3c/td\x3e\x3ctd class\x3d'header'\x3e{include}\x3cbr\x3e{source}\x3c/td\x3e\x3ctd class\x3d'header'\x3e{baseLocation}\x3c/td\x3e\x3c/tr\x3e\x3ctr\x3e\x3ctd colspan\x3d'4'\x3e\x3chr\x3e\x3c/hr\x3e\x3c/td\x3e\x3c/tr\x3e",
e)];this.libraries={};this._userLibs.forEach(function(b,c){b.initRoot=this._getLibRoot(b.id,b.version);var e=b.id;b.initRoot&&(a.push("\x3ctr libPath\x3d'"+c+"'"),b.required&&a.push(" style\x3d'display:none'"),a.push("\x3e"),a=a.concat(["\x3ctd class\x3d'columna'\x3e"+e+"\x3c/td\x3e","\x3ctd class\x3d'columnb'\x3e"+b.version+"\x3c/td\x3e","\x3ctd class\x3d'columnc'\x3e\x3cinput type\x3d'checkbox' data-dojo-type\x3d'dijit/form/CheckBox' checked\x3e\x3c/input\x3e\x3c/td\x3e","\x3ctd class\x3d'columnd'\x3e\x3cinput type\x3d'text' data-dojo-type\x3d'dijit/form/TextBox' value\x3d'"+
b.initRoot+"'\x3e\x3c/input\x3e\x3c/td\x3e","\x3c/tr\x3e"]))},this);a.push("\x3c/table\x3e");dojo.place(a.join(""),this._tableDiv);g.parse(this._tableDiv)},_getLibRoot:function(a,b){var c=void 0;this._userLibs.some(function(e){if(e.id==a&&e.version==b)return c=e.root,!0});return c},_getLibs:function(){return dojo.query("tr[libPath]",this.domNode).map(function(a){var b=dijit.byNode(dojo.query(".dijitTextBox",a)[0]),c=dijit.byNode(dojo.query(".dijitCheckBox",a)[0]);a=parseInt(dojo.attr(a,"libPath"));
c=c.get("checked");b=b.get("value")||this._userLibs[a].root;return{id:this._userLibs[a].id,version:this._userLibs[a].version,root:b,includeSrc:c}},this)},getRoot:function(){if(p.singleProjectMode())return p.getProject()},_getResources:function(){return[p.getProject()]},_rewriteUrls:function(){var e=[];this._getResources().forEach(function(a){a=b.findResource(a);"Folder"==a.elementType?e=e.concat(b.findResource("*.html",!0,a,!0)):"html"==a.extension&&e.push(a)});var g=new a(this._getLibs()),d=e.filter(function(a){return!w.isThemeHTML(a)}).map(function(a){return g.rebuildSource(a.getContentSync(),
a).then(function(b){a.setContents(b,!0)})});return c(d)},_select:function(a){dojo.query("tr[libPath]",this.domNode).forEach(function(b){(b=dijit.byNode(dojo.query(".dijitCheckBox",b)[0]))&&b.set("checked",a)});return!1},_selectAll:function(){this._select(!0)},_selectNone:function(){this._select(!1)},okButton:function(){if(this.__fileName.isValid()){var a=dojo.attr(this.__fileName,"value");".zip"!=a.slice(-4)&&(a+=".zip");this._rewriteUrls().then(function(){var c=this._getLibs().filter(function(a){return a.includeSrc}),
e={};this.__optimize&&this.__optimize.getValue()&&(e.build="1");this.__fullSource&&this.__fullSource.getValue()&&(e.fullsource="1");setTimeout(function(){b.download(this._getResources(),a,this.getRoot(),c,e)}.bind(this),300)}.bind(this))}},cancelButton:function(){this.cancel=!0;this.onClose()}})})},"xideve/deliteTemplate":function(){define([],function(){return{create:function(n,m,k,h){return{dojoRoot:n,ibmRoot:m,contextClass:"xideve/delite/Context",baseUrl:n+"/"+m,requireUrl:n+ + +m+"/requirejs/require.js",
jQueryUrl:n+"external/jquery-1.9.1.min.js",lodashUrl:n+"external/lodash.min.js",bodyStyle:{width:"100%",height:"100%",visibility:"visible",margin:"0"},bodyTheme:"superhero",templateVariables:{requireUrl:m+"/requirejs/require.js",jQueryUrl:n+"/external/jquery-1.9.1.min.js",lodashUrl:n+"/external/lodash.min.js",ibmRoot:m,offset:k,theme:h}}}}})},"dojo/store/Memory":function(){define(["../_base/declare","./util/QueryResults","./util/SimpleQueryEngine"],function(n,m,k){return n("dojo.store.Memory",null,
{constructor:function(h){for(var d in h)this[d]=h[d];this.setData(this.data||[])},data:null,idProperty:"id",index:null,queryEngine:k,get:function(h){return this.data[this.index[h]]},getIdentity:function(h){return h[this.idProperty]},put:function(h,d){var b=this.data,c=this.index,g=this.idProperty,g=h[g]=d&&"id"in d?d.id:g in h?h[g]:Math.random();if(g in c){if(d&&!1===d.overwrite)throw Error("Object already exists");b[c[g]]=h}else c[g]=b.push(h)-1;return g},add:function(h,d){(d=d||{}).overwrite=!1;
return this.put(h,d)},remove:function(h){var d=this.index,b=this.data;if(h in d)return b.splice(d[h],1),this.setData(b),!0},query:function(h,d){return m(this.queryEngine(h,d)(this.data))},setData:function(h){h.items?(this.idProperty=h.identifier,h=this.data=h.items):this.data=h;this.index={};for(var d=0,b=h.length;d<b;d++)this.index[h[d][this.idProperty]]=d}})})},"xide/console":function(){define([],function(){return"undefined"!==typeof window?window.console:"undefined"!==typeof global?global.console:
{}})},"xide/utils":function(){define(["dcl/dcl"],function(n){return n(null,{declaredClass:"xide.utils"})})},"xblox/types/Types":function(){define(["xide/types/Types","xide/utils"],function(n,m){n.BLOCK_MODE={NORMAL:0,UPDATE_WIDGET_PROPERTY:1};n.BLOCK_OUTLET={NONE:0,PROGRESS:1,ERROR:2,PAUSED:4,FINISH:8,STOPPED:16};m.mixin(n.EVENTS,{ON_RUN_BLOCK:"onRunBlock",ON_RUN_BLOCK_FAILED:"onRunBlockFailed",ON_RUN_BLOCK_SUCCESS:"onRunBlockSuccess",ON_BLOCK_SELECTED:"onItemSelected",ON_BLOCK_UNSELECTED:"onBlockUnSelected",
ON_BLOCK_EXPRESSION_FAILED:"onExpressionFailed",ON_BUILD_BLOCK_INFO_LIST:"onBuildBlockInfoList",ON_BUILD_BLOCK_INFO_LIST_END:"onBuildBlockInfoListEnd",ON_BLOCK_PROPERTY_CHANGED:"onBlockPropertyChanged",ON_SCOPE_CREATED:"onScopeCreated",ON_VARIABLE_CHANGED:"onVariableChanged",ON_CREATE_VARIABLE_CI:"onCreateVariableCI"});n.BlockType={AssignmentExpression:"AssignmentExpression",ArrayExpression:"ArrayExpression",BlockStatement:"BlockStatement",BinaryExpression:"BinaryExpression",BreakStatement:"BreakStatement",
CallExpression:"CallExpression",CatchClause:"CatchClause",ConditionalExpression:"ConditionalExpression",ContinueStatement:"ContinueStatement",DoWhileStatement:"DoWhileStatement",DebuggerStatement:"DebuggerStatement",EmptyStatement:"EmptyStatement",ExpressionStatement:"ExpressionStatement",ForStatement:"ForStatement",ForInStatement:"ForInStatement",FunctionDeclaration:"FunctionDeclaration",FunctionExpression:"FunctionExpression",Identifier:"Identifier",IfStatement:"IfStatement",Literal:"Literal",LabeledStatement:"LabeledStatement",
LogicalExpression:"LogicalExpression",MemberExpression:"MemberExpression",NewExpression:"NewExpression",ObjectExpression:"ObjectExpression",Program:"Program",Property:"Property",ReturnStatement:"ReturnStatement",SequenceExpression:"SequenceExpression",SwitchStatement:"SwitchStatement",SwitchCase:"SwitchCase",ThisExpression:"ThisExpression",ThrowStatement:"ThrowStatement",TryStatement:"TryStatement",UnaryExpression:"UnaryExpression",UpdateExpression:"UpdateExpression",VariableDeclaration:"VariableDeclaration",
VariableDeclarator:"VariableDeclarator",WhileStatement:"WhileStatement",WithStatement:"WithStatement"};n.BLOCK_CAPABILITIES={TOPMOST:16384,TARGET:262144,VARIABLE_INPUTS:128,VARIABLE_OUTPUTS:256,VARIABLE_OUTPUT_PARAMETERS:512,VARIABLE_INPUT_PARAMETERS:1024,CHILDREN:32,SIGNALS:128};n.EXECUTION_STATE={NONE:0,RUNNING:1,ERROR:2,PAUSED:4,FINISH:8,STOPPED:16,ONCE:2147483648,RESET_NEXT_FRAME:8388608,LOCKED:536870912};n.RUN_FLAGS={CHILDREN:32,WAIT:32768};return n})},"davinci/lang/ve":function(){define([],
function(){return{common:"Common",widgetSpecific:"Widget",events:"Events",layout:"Layout",showMinMax:"show min/max",padding:"Padding",margins:"Margins",showtrbl:"show t/r/b/l",background:"Background",border:"Border",showDetails:"show details",fontsAndText:"Fonts/Text",shapesSVG:"SVG",properties:"properties",Scenes:"Scenes",States:"States",ActiveScene:"This scene is currently visible",AppStateFocus:"This application state is the target for application-state-specific visibility or styling changes",
InitialScene:"This scene will show initially when the page runs",chooseDeviceSilhouette:"Choose a device silhouette: ",filesHasUnsavedChanges:"The file '${0}' has unsaved changes, \"Save\" changes and continue with switch device silhouette.",selectAncestorTitle:"Select ancestor",selectAncestorLabel:"Select ancestor (closest ancestor listed first):",createNewState:"Create New State",updateCurrentState:"Update Current State",createLabel:"Create",updateLabel:"Update",modifyState:"Modify State",modifyLabel:"Update",
stateLabel:"Name",enterStateName:"Please enter a state name.",stateNameExists:"State name '${name}' already exists. Please enter a different state name.",renameState:"Rename State",renameLabel:"Rename",cancelLabel:"Cancel",newStateLabel:"New name:",manageStates:"Manage Widget Visibility for Different States",manageStatesCheckLabel:"Check:",manageStatesCheckCurrentStateOnly:"Current state",manageStatesCheckAll:"All",manageStatesUncheckAll:"None",manageStatesCheckBackgroundOnly:"Background only",manageStatesAllVisibleFromBackground:"(Visible from Background)",
manageStatesSomeVisibleFromBackground:"(Some visible from Background)",manageStatesSomeVisibleSomeHidden:"(Some visible, some hidden)",initialStateCheckBoxLabel:"Initial state at document load time",EnableApplicationStates:"Enable/disable application states",EnableAsStateContainerDescription:"Setting the check box below and clicking OK will allow custom application states to be defined on the currently selected widget.",DisableAsStateContainerDescription:"Unsetting the check box below and clicking OK will disallow custom application states on the currently selected widget.",
DisableAsStateContainerDataLoss:"Any existing interactivity based on existing application states will be lost.",EnableAsStateContainerWidgetLabel:"Application states are enabled on this widget",EnableApplicationStatesCurrentWidget:"Currently selected widget",EnableApplicationStatesCurrentStates:"Current application states",EnableApplicationStatesNone:"(none)",NewWidgetsCurrentStateTitleBackground:"Toggle whether new widgets go to Background or selected state (current value: Background)",NewWidgetsCurrentStateTitleCurrentState:"Toggle whether new widgets go to Background or selected state (current value: selected state)",
richTextInputHelp:"Provides Rich Text (word processor-like) editing of HTML.",smartInputHelp1:"If you use any markup characters (\x26lt;,\x26gt;,\x26amp;), you need to specify whether the text represents literal (plain) text or HTML markup that should be parsed (using an innerHTML assignment).",smartInputHelp2:"Text represents literal (plain) text.",loading:"Loading...",htmlMarkup:"HTML markup",creatingStyleRules:"Creating Style Rules with app.css",propChangeCannotComplete:"This property change cannot be completed because the operation attempts to modify a read-only theme CSS file.",
toChangeProperty:"To change this property, one technique is to add a class to this widget (at top of Properties palette)  and then open up the CSS Details pane to target a style rule within your app.css file, as described at ${0}.",errorModifyingValue:"Error modifying value",changeWillModify:"This change will modify one of the CSS style rules defined within a 'CSS theme' and will therefore probably impact other widgets on a global basis.",insteadOfChanging:"Instead of changing the theme CSS files, it is usually better to add a class to this widget (at the top of the Properties palette) and then open up the CSS Details pane to target a style rule within your app.css file, as described at ${0}.",
okToProceed:"OK to proceed with this change?",valueIsOverriden:"This value is overriden and can not be changed.",applyToWhich:"Apply to which style rule:",onlyApplyToState:" Only apply to current state (${0})",newRule:"[class: ${0} - New rule in ${1}] ",newThemeRule:"[theme: - New rule in ${0}] ",existingRule:"[class: ${0} - Existing rule in ${1}] ",line:" line: ${0})",propUndefined:"undefined",bgdType_emptystring:"",bgdType_none:"none",bgdType_url:"image",bgdType_linear:"linear gradient",bgdType_radial:"radial gradient",
bgdType_other:"other",bgdPickFile:"Choose...",bgdStop:"Stop",bgdAddStop:"Add a new gradient stop after this stop",bgdRemoveStop:"Remove this gradient stop",bgdBackgroundColor:"background-color:",bgdBackgroundImageType:"background-image type:",bgdImageUrl:"Image URL:",bgdUrl:"URL:",bgdColorStops:"Color stops:",bgdColor:"color",bgdPosition:"position",bgdOptions:"Options:",bgdAngle:"Angle:",bgdPosition2:"Position:",bgdShape:"Shape:",bgdExtent:"Extent:",bgdBackgroundRepeat:"background-repeat:",bgdBackgroundPosition:"background-position:",
bgdBackgroundSize:"background-size:",bgdBackgroundOrigin:"background-origin:",bgdBackgroundClip:"background-clip:",bgdBackgroundImageValue:"'background-image' value:",bgdTemplate:"Template:",colorPicker:"Color picker...",removeValue:"Remove Value",selectColor:"select a color",toolBarFor:"",noSelection:"(no selection)",toolBarClass:"class:",toolBarId:"ID:",idAlreadyUsed:"This id is already used by another widget",noValidParents:"No valid parents at this position",willBeChildOf:"Will become a child of:",
candidateParents:"Candidate parents:",toChangePress:"To change, press numbers",vteWarningTitle:"Theme Version Warning",vteWarningMessage:"Theme version does not match Maqetta version this could produce unexpected results. We suggest recreating the custom theme using the current version of Maqetta and deleting the existing theme.",vteWarningUnsuportedBrowserTitle:"Unsupported brower",vteWarningUnsuportedBrowserMessage:"Editing mobile themes is only supported on webkit browsers, we sugguest using Chrome or Safari to customize mobile themes.",
vteWarningToolkitMessage:"Theme version does not match workspace library version this could produce unexpected results. We suggest recreating the custom theme using the current version of Maqetta and deleting the existing theme.",vteErrorTitle:"Theme Version Error",vteErrorMessage:"Theme version is not supported by this version of Maqetta. You must recreating custom theme using the current version of Maqetta and deleting the existing theme..",vteErrorSavingResourceMessage:"error saving resource\n",
"SourceComboButton-source":"Source","SourceComboButton-splitHorizontal":"Split-H","SourceComboButton-splitVertical":"Split-V","LayoutDropDownButton-flow":"Flow","LayoutDropDownButton-absolute":"Absolute"}})},"dojo/promise/tracer":function(){define(["../_base/lang","./Promise","../Evented"],function(n,m,k){function h(c){setTimeout(function(){b.apply(d,c)},0)}var d=new k,b=d.emit;d.emit=null;m.prototype.trace=function(){var b=n._toArray(arguments);this.then(function(c){h(["resolved",c].concat(b))},
function(c){h(["rejected",c].concat(b))},function(c){h(["progress",c].concat(b))});return this};m.prototype.traceRejected=function(){var b=n._toArray(arguments);this.otherwise(function(c){h(["rejected",c].concat(b))});return this};return d})},"xide/views/_Console":function(){define(["dcl/dcl","xide/utils","xide/types","dojo/_base/lang","xide/_base/_Widget"],function(n,m,k,h,d){return n([d],{declaredClass:"xide/views/_Console",templateString:'\x3cdiv attachTo\x3d"containerNode" class\x3d"widget" style\x3d"height: 100%;width: 100%;"\x3e\x3cdiv attachTo\x3d"logView" style\x3d"height:50%;overflow: auto"\x3e\x3c/div\x3e\x3c/div\x3e',
value:"return 2;",resizeToParent:!0,serverClass:"XShell",consoleClass:null,server:null,showProgress:!1,jsContext:null,onButton:function(){var b=this.getLoggingContainer();b&&dojo.empty(b)},onConsoleExpanded:function(){this._resizeLogView()},_resizeLogView:function(){if(this.console){var b=this.$containerNode.height(),c=$(this.console.domNode).height();$(this.logView).height(b-c+"px")}},resize:function(){m.resizeTo(this,this._parent);this._resizeLogView();return this.inherited(arguments)},_scrollToEnd:function(){var b=
this;setTimeout(function(){b.getLoggingContainer().lastChild.scrollIntoViewIfNeeded()},10)},onServerResponse:function(b,c){var g=this.getLoggingContainer();100<g.children.length&&dojo.empty(g);this._resizeLogView();b=this.log(b,c);this._scrollToEnd();return b},getLoggingContainer:function(){return this.logView},onEnter:function(b,c){this.showProgress&&(this.Item=this.createLogItem(b,this.getLoggingContainer()));var g="";this.delegate.onConsoleEnter&&(g=this.delegate.onConsoleEnter({view:this,console:this.console},
b,c));if(this.showLastInput){var d=this.getLoggingContainer();!1!==c&&d.appendChild(dojo.create("div",{innerHTML:"# "+(g||b),className:"widget"}))}},getServer:function(){return this.server||ctx.fileManager},_toString:function(b,c){return!1!==c?this.addTime(b):b},addTime:function(b){return moment().format("HH:mm:ss:SSS")+" ::   "+b+""},onMaximized:function(b){this.resize();this.publish(k.EVENTS.RESIZE,null,1500)},maximize:function(){var b=this.domNode,c=$(b);if(this._isMaximized)this._isMaximized=
!1,c.removeClass("AceEditorPaneFullScreen"),this._lastParent.appendChild(b),m.destroy(this._maximizeContainer);else{this._isMaximized=!0;var c=$(this.domNode.ownerDocument),g=$("body")[0],d=m.create("div",{className:"ACEContainer bg-opaque",style:"z-index:300;height:100%;width:100%"});this._maximizeContainer=d;g.appendChild(d);$(b).addClass("AceEditorPaneFullScreen");$(b).css("width",c.width());$(b).css("height",c.height());this.resize();this._lastParent=b.parentNode;d.appendChild(b);$(d).addClass("bg-opaque");
$(d).css("width",c.width());$(d).css("height",c.height());$(d).css({position:"absolute",left:"0px",top:"0px",border:"none medium",width:"100%",height:"100%"})}this.onMaximized(this._isMaximized);return!0},log:function(b,c){m.destroy(this.progressItem);var g="";_.isString(b)?g+=b.replace(/\n/g,"\x3cbr/\x3e"):_.isObject(b)||_.isArray(b)?g+=JSON.stringify(b,null,!0):_.isNumber(b)&&(g+=b+"");b=this.getLoggingContainer();for(var g=g.split("\x3cbr/\x3e"),d=null,a=0;a<g.length;a++){var e=g[a];e&&e.length&&
(d=b.appendChild(dojo.create("div",{className:"logEntry"+(1===this.lastIndex%2?"row-odd":"row-even"),innerHTML:this._toString(g[a],c)})),this.lastIndex++)}d&&d.scrollIntoViewIfNeeded()},startup:function(){this.createWidgets()},createWidgets:function(){this.console=m.addWidget(this.consoleClass,{style:"width:inherit",delegate:this,type:this.type,owner:this,className:"consoleWidget",value:this.value,ctx:this.ctx},this,this.containerNode,!0);this.console.startup();this.add(this.console,null,!1)}})})},
"dojo/request":function(){define(["./request/default!"],function(n){return n})},"davinci/ve/widgets/MetaDataStore":function(){define(["dojo/_base/declare","dojo/data/ItemFileReadStore","davinci/lang/ve","dijit/lang/_common"],function(n,m){return n("davinci.ve.widgets.MetaDataStore",m,{_allValues:[],constructor:function(k){this.setValues(k&&k.values||[])},setValues:function(k){dojo.mixin(this._allValues,k);var h=[];dojo.forEach(this._allValues,function(d){h.push({name:d,value:d})});this._jsonData=
{identifier:"name",items:h};this._loadFinished=!1},contains:function(k){return-1!=dojo.indexOf(this._allValues,k)},clearValues:function(){this._allValues=[];this._loadFinished=!1}})})},"xblox/model/logic/DefaultBlock":function(){define(["dcl/dcl","xblox/model/Block"],function(n,m){return n(m,{declaredClass:"xblox.model.logic.DefaultBlock",name:"Default",icon:"",hasInlineEdits:!1,toText:function(){return'\x26nbsp;\x3cspan class\x3d"fa-eject text-info"\x3e\x3c/span\x3e\x26nbsp;\x26nbsp;\x3cspan\x3e'+
this.name+"\x3c/span\x3e"},solve:function(k,h){this.onSuccess(this,h);return this._solve(k,h)}})})},"xcf/manager/DriverManager_UI":function(){define("dcl/dcl xide/types xide/utils xace/views/Editor xide/views/_CIDialog xcf/views/DriverView2 dojo/Deferred xide/registry xdojo/has!xtrack?xide/interface/Track xide/noob xide/data/Reference xide/data/ReferenceMapping xide/interface/Route xide/mixins/ActionProvider xcf/views/DriverTreeView dojo/_base/lang".split(" "),function(n,m,k,h,d,b,c,g,p,a,e,q,u,w,
r,v){var x=n([e,q],{});e=null;p&&(e={track:function(){return!0},getTrackingCategory:function(){return k.capitalize(this.beanNamespace)},getTrackingEvent:function(){return m.ACTION.OPEN},getTrackingLabel:function(a){return this.getMetaValue(a,m.DRIVER_PROPERTY.CF_DRIVER_NAME)},getActionTrackingUrl:function(a){return v.replace(this.breanScheme+"?action\x3d{action}\x26"+this.beanUrlPattern,{action:a})},getTrackingUrl:function(a){return v.replace(this.breanScheme+"{view}/"+this.beanUrlPattern,{id:a.id,
view:"settings"})}});return n([u.dcl,w.dcl,p?n(p.dcl,e):a.dcl],{declaredClass:"xcf.manager.DriverManager_UI",handleRoute:function(a){switch(a.parameters.view){case "settings":return this.openItemSettings(this.getDriverById(a.parameters.id))}},registerRoutes:function(){this.getContext().registerRoute({id:"Drivers",path:"driver://{view}/{id}",schemes:["drivers"],delegate:this});this.getContext().registerRoute({id:"New Driver",path:"File/New Driver",schemes:[""],delegate:this})},onRenderWelcomeGridGroup:function(a){var c=
this.getContext(),e=c.getTrackingManager(),g=c.getRouter(),d=a.store,h=this,c=a.grid;switch(a.item.group){case "New":e=[];e.push(this.createAction({label:"New Driver",command:"File/New Driver",icon:"fa-magic",mixin:{addPermission:!0}}));_.map(e,function(a){return d.putSync(k.mixin(a,{url:a.command,parent:"New",group:null,label:a.title,owner:h,runAction:function(a,b,c){return r.prototype.runAction.apply(r.prototype,[{command:this.url},b,c])}}))});break;case "Recent":if(e){d.putSync({group:"Drivers",
label:"Drivers",url:"Drivers",parent:"Recent",directory:!0});a=e.filterMin({category:"Driver"},"counter",1);a=e.most(null,a);e.last(a);a=_.map(a,function(a){a.parent="Recent";a.icon="fa-exchange";return a});var q=_.map(r.getActions.apply(r.prototype,[$("\x3cdiv/\x3e")[0],r.DefaultPermissions,c]),function(a){a.custom=!0;return a}),p=null;_.each(a,function(a){var c=g.match({path:a.url});c&&(p=h.routeToReference(c))&&(d.removeSync(a.url,!0),a=new x({url:a.url,enabled:!0,label:a.label,parent:"Drivers",
_mayHaveChildren:!1,virtual:!0,icon:"fa-exchange",owner:h,getActions:function(){return q},runAction:function(a,c,e){return b.prototype.runAction.apply(b.prototype,[a,c,e])}}),a=d.putSync(a,!1),p&&p.addReference?p.addReference(a,{properties:{name:!0,value:!0,state:!0},onDelete:!0,onChange:!0},!0):console.error("device store item has no addReference!",a))});d.emit("added",{target:p})}}},getRouteRenderParams:function(a){return{icon:null}},routeToReference:function(a){return this.getDriverById(a?a.parameters.id:
null)},referenceToRoute:function(a){return v.replace(this.breanScheme+"{view}/"+this.beanUrlPattern,{id:a.id,view:"settings"})},completeDriver:function(a,b,c){},onDriverSettingsChanged:function(a,b){this.ctx.getDeviceManager().onDriverSettingsChanged(a,b)},onDriverModified:function(a){var b=this.getStore();a=a.driver;a.commandsItem&&k.removeFromStore(b,a.commandsItem,!0,"path","parentId");a.variablesItem&&k.removeFromStore(b,a.variablesItem,!0,"path","parentId");a._completed=!1;this.completeDriver(b,
a,a)},openItemSettings:function(a,c,e,d){var h=this.ctx.mainView.getDocker(),q=a.user;if(!q||!q.inputs)return null;var p=this.getViewId(a),r=g.byId(p);try{if(r&&!0!==d)return r._parent.select(),null}catch(J){k.destroy(r)}var r=this.getMetaValue(a,this.itemMetaTitleField),u=null;d=this.ctx;e=e||{};c&&(u=d.getDeviceManager().toDeviceControlInfo(c));h=h.addTab(null,{title:(r||a.name)+""+(c?":"+c.name+":"+u.host.substr(0,20)+":":""),icon:this.beanIconClass});if(q=k.getCIByChainAndName(q,0,m.DRIVER_PROPERTY.CF_DRIVER_COMMANDS))q.device=
c;a.blockScope&&!a.blockScope.serviceObject&&(a.blockScope.serviceObject=this.serviceObject);q&&(q.device=c);var n=this;c=k.addWidget(this.getViewClass({track:function(){return!0},getTrackingCategory:function(){return k.capitalize(n.beanNamespace)},getTrackingEvent:function(){return m.ACTION.OPEN},getTrackingLabel:function(){return n.getMetaValue(this.item,m.DRIVER_PROPERTY.CF_DRIVER_NAME)},getActionTrackingUrl:function(b){return v.replace(n.breanScheme+"?action\x3d{action}\x26"+n.beanUrlPattern,
{id:a.id,action:b})},getTrackingUrl:function(a){return v.replace(n.breanScheme+"{view}/"+n.beanUrlPattern,{id:a.id,view:"settings"})}},b),k.mixin({userData:q,driver:a,device:c,item:a,ctx:d,registerView:!0,id:p},e),null,h,!0);h.add(c,null,!1);return c},updateItemMetaData:function(a,b,c,e,g,d){return this.callMethodEx(null,"updateItemMetaData",[a,b,c,e,g],d,!1)},setDriverScriptContent:function(a,b,c,e){return this.callMethod("set",[a,b,c],e,!0)},getDriverScriptContent:function(a,b,c){a=k.buildPath(a,
b,!1);return this.callMethod("get",[a,!1,!1],c,!0)},init:function(){var a=m.EVENTS;this.subscribe([a.ON_CI_UPDATE,a.ON_WIDGET_READY,a.ON_MAIN_VIEW_READY,a.ON_SCOPE_CREATED,a.ON_DRIVER_MODIFIED,a.ON_STORE_CREATED]);this.subscribe([a.ON_DRIVER_GROUP_SELECTED,a.ON_DRIVER_SELECTED],this.onItemSelected);this.subscribe(a.ON_ACE_READY,this.onACEReady);this.subscribe(a.ON_RENDER_WELCOME_GRID_GROUP);r.prototype.delegate=this;r.prototype.ctx=this.getContext();this.registerRoutes()},onACEReady:function(a){if(a.owner&&
a.owner.userData&&a.owner.userData.widget&&a.owner.userData.widget.item){var b=a.owner.userData.widget.item.scope,c=b.getVariables({group:"basicVariables"});(b=b.getVariables({group:"processVariables"}))&&b.length&&(c=c.concat(b));b=[];if(c&&0<c.length)for(var e=0;e<c.length;e++){var g=c[e];b.push({word:g.name,value:g.value,meta:"Driver Variable"})}b.length&&a.aceEditor.addAutoCompleter(b)}},onVariableAction:function(a,b){if(b&&a){var c=k.getCIByChainAndName(b.user,0,m.DRIVER_PROPERTY.CF_DRIVER_VARIABLES);
a=a.variablesToJson();this.updateCI(c,JSON.stringify(a,null,2),"",b)}},reload:function(){var a=this;this.currentItem=null;this.ls("system_drivers",function(){a.treeView&&a.treeView.reload(a.store)})},getDriversAsEnumeration:function(a,b,c){try{var e=[];a=a||this.getStore()||this.store;var g=k.toArray(this.stores);_.each(g,function(a){var g=a.name;if("system_drivers"!==g||!1!==b)if("user_drivers"!==g||!1!==c){a=a.value;if(!a)return console.error("getDriversAsEnumeration:: have no store!"),e;a=a.query({isDir:!1});
_.isArray(a)||(a=[a]);for(var d=0;d<a.length;d++){var h=a[d],q=h.user,p=k.getInputCIByName(q,m.DRIVER_PROPERTY.CF_DRIVER_ID),r=k.getInputCIByName(q,m.DRIVER_PROPERTY.CF_DRIVER_NAME);q&&(p?e.push({value:k.toString(p.value),label:k.toString(r.value),driver:h,group:k.capitalize(g.replace("_drivers",""))}):console.error("have no id ci",h))}}});return e}catch(E){logError(E,"getDriversAsEnumeration failed")}},saveDriver:function(a){var b=a.user,c={ci:k.getCIByChainAndName(b,0,m.DRIVER_PROPERTY.CF_DRIVER_COMMANDS),
newValue:"",oldValue:"0",storeItem:a,owner:this};this.onCIUpdate(c);var b=k.getCIByChainAndName(b,0,m.DRIVER_PROPERTY.CF_DRIVER_RESPONSES),e={ci:b,newValue:"",oldValue:"0",storeItem:a,owner:this},g=this;setTimeout(function(){g.onCIUpdate(e)},1200);this.onDriverSettingsChanged(b,a)},updateCI:function(a,b,c,e){if(a&&null!==b&&e){if(k.toString(a.name)==m.DRIVER_PROPERTY.CF_DRIVER_COMMANDS||k.toString(a.name)==m.DRIVER_PROPERTY.CF_DRIVER_RESPONSES)this.onDriverSettingsChanged(a,e);this.updateItemMetaData(k.toString(e.scope),
k.toString(e.path),"/inputs",{id:k.toString(a.id)},{value:b,params:k.toString(a.params)})}},onCIUpdate:function(a){var b=a.storeItem;b&&(b=this.getDriverById(b.id))&&this.updateCI(a.ci,a.newValue,a.oldValue,b)},onWidgetReady:function(a){if(a.owner==this&&null!=a.ci&&a.ci.name===m.DRIVER_PROPERTY.CF_DRIVER_CLASS&&null!=a.widget&&null!=a.storeItem&&k.toInt(a.ci.type)===m.ECIType.FILE)this.onDriverClassFileWidgetCreated(a.widget,a.ci,a.storeItem);a.owner==this&&null!=a.ci&&a.ci.name===m.DRIVER_PROPERTY.CF_DRIVER_COMMANDS&&
null!=a.widget&&null!=a.storeItem&&(a.widget.blockScope||(a.widget.blockScope=this.ctx.getBlockManager().getScope(k.toString(a.storeItem.id),a)));a.owner==this&&null!=a.ci&&a.ci.name===m.DRIVER_PROPERTY.CF_DRIVER_RESPONSES&&null!=a.widget&&null!=a.storeItem&&(this.ctx.getBlockManager(),a.widget.blockScope||(a.widget.blockScope=this.ctx.getBlockManager().getScope(k.toString(a.storeItem.id),a)));a.owner==this&&null!=a.ci&&k.toString(a.ci.name)===m.DRIVER_PROPERTY.CF_DRIVER_VARIABLES&&null!=a.widget&&
null!=a.storeItem&&(a.widget.blockScope||(a.widget.blockScope=this.ctx.getBlockManager().getScope(k.toString(a.storeItem.id),a)));null!=a.ci&&k.toString(a.ci.name)===m.DEVICE_PROPERTY.CF_DEVICE_DRIVER&&null!=a.widget&&null!=a.storeItem&&k.toInt(a.ci.type)},onDriverClassFileWidgetCreated:function(a,b,c){},editDriver:function(a,b){var c=this;a=c.ctx;var e=b.name,g=k.getCIInputValueByName(b.user,m.DRIVER_PROPERTY.CF_DRIVER_CLASS),d=k.toString(b.scope);b=a.mainView.getDocker();var q=a.mainView.layoutCenter,
p=e+"."+k.getFileExtension(g);b=b.addTab(null,{title:p,target:q?q._parent:null,icon:"fa-code"});try{var r=k.addWidget(h,{style:"height:inherit",ctx:this.ctx,item:{},storeDelegate:{getContent:function(a){c.getDriverScriptContent(d,g,a)},saveContent:function(a,b,e){c.setDriverScriptContent(d,g,a,b)}},options:{filePath:".js",fileName:e+"."+k.getFileExtension(g)},title:e+"."+k.getFileExtension(g),fileName:g},this,b,!0);a.getWindowManager().registerView(r);r.resize();return r}catch(H){logError(H)}},deleteItem:function(a){var b=
this.getStore(a.scope)||this.store,c=a.getParent();b.removeSync(a.path);this.onDriverRemoved(b,a);c&&b.refreshItem(c)},onDeleteItem:function(a){var b=!0===k.toBoolean(a.isDir),e=new c,g=b?"removeGroup":"removeItem",h=this;(new d({title:"Remove Driver"+(b?" Group":"")+' "'+a.name+'"  ',style:"max-width:400px",titleBarClass:"text-danger",onOk:function(){var b=h.getStore(a.scope);h[g](k.toString(a.scope),k.toString(a.path),k.toString(a.name),function(){h.deleteItem(a);h.publish(m.EVENTS.ON_STORE_CHANGED,
{owner:h,store:b,action:m.DELETE,item:a});b.emit(null);e.resolve()})}})).show();return e},newGroup:function(a,b,e){function g(a,b,c){h.createGroup(b,c+"/"+a,function(){var e=h.createNewGroupItem(a,b,c);p=h.getStore(b);var g=p.putSync(e);h.publish(m.EVENTS.ON_STORE_CHANGED,{owner:h,store:p,action:m.NEW_DIRECTORY,item:e});p.refreshItem(c);p.refreshItem(g);r.resolve(g)});return r}var h=this,q=a?!0===a.isDir?a.path:"":"",p=this.getStore(b),r=new c;if(e&&b)return g(e,b,q);(new d({title:"New Driver Group",
titleBarClass:"text-info",size:m.DIALOG_SIZE.SIZE_SMALL,onOk:function(){var a=this.getField("Title"),b=this.getField("Scope");return g(a,b,q)},delegate:{},ctx:this.ctx,cis:[k.createCI("Title",13,""),k.createCI("Scope",3,b||this.defaultScope,{options:[{label:"System",value:"system_drivers"},{label:"User",value:"user_drivers"}]})]})).show();return r},cloneDriver:function(a,b){var e=new c,g=this,h=this.ctx.getFileManager();this.getFile(b).then(function(c){g.getFile(a).then(function(a){if(a){if(a.getParent()){var q=
function(d){h.getContent(a.mount,a.path,function(q){var p=k.getJson(q);q=m.DRIVER_PROPERTY;var r=p.inputs,u=k.getCIByChainAndName(r,0,q.CF_DRIVER_ID);k.setCIValueByField(u,"value",k.createUUID());var v=k.getCIByChainAndName(r,0,q.CF_DRIVER_NAME);k.setCIValueByField(v,"value",d);q=k.getCIByChainAndName(r,0,q.CF_DRIVER_CLASS);k.setCIValueByField(q,"value",c.path+"/"+d+".js");var n=c.path+"/"+d+".meta.json",w=a.path.replace(".meta.json",".js"),x=c.path+"/"+d+".js";q=a.path.replace(".meta.json",".xblox");
var A=c.path+"/"+d+".xblox";h.getContent(a.mount,q,function(d){h.mkfile(c.mount,A).then(function(){h.setContent(c.mount,A,d,function(){h.getContent(a.mount,w,function(a){h.mkfile(c.mount,x).then(function(){h.setContent(c.mount,x,a,function(){h.mkfile(c.mount,n).then(function(){h.setContent(c.mount,n,JSON.stringify(p,null,2),function(){g.ls(b.scope,!1).then(function(a){if(a){var c=a.query({id:u.value})[0];c&&(a.removeSync(c.path),b._store.removeSync(c.path),c._store=b._store,c=b._store.addSync(c),
c.refresh(),b._store.emit("added",{target:c}),a=b._store,g.onDriverCreated(a),g.completeDriver(a,c,c),g.publish(m.EVENTS.ON_STORE_CHANGED,{owner:g,store:a,item:c}),e.resolve(c))}})})})})})})})})})},!1)};c._store.getChildren(c);var p=h.getNewName(a,c.children),p=p.replace(".meta.json",""),r=[k.createCI("Title",13,p,{group:"Common"})];(new d({title:"New Name",resizable:!0,onOk:function(a){k.toOptions(a);q(k.getInputCIByName(r,"Title").value)},delegate:{},cis:r})).show()}}else e.reject("Cant get file object for device")})});
return e},newItem:function(a,b){function e(a,b,c){if("Default"!==a){try{w.value="./"+b+"/"+a+".js";var e=JSON.stringify(r,null,2);0==b.length&&(b="/");try{A.createItem(c,b,a,e,u).then(function(a){a=A.createNewItem(v.value,c,b);a.path+=".meta.json";a.user=r;a.id=n.value;a.blox={blocks:[],variables:[]};a=x.putSync(a);A.onDriverCreated(x);A.completeDriver(x,a,a);A.publish(m.EVENTS.ON_STORE_CHANGED,{owner:A,store:x,action:m.NEW_FILE,item:a});g.resolve(a)})}catch(U){logError(U)}}catch(U){logError(U,"error in CIDialog")}return g}}
var g=new c;a||(a={path:""});var h=a?!0===a.isDir?a.path:"":"",q=a.scope||"user_drivers",p=require.toUrl("system_drivers/Default.meta.json"),r=k.getJson(this._getText(p)),p=require.toUrl("system_drivers/Default.js"),u=this._getText(p),v=k.getInputCIByName(r,m.DRIVER_PROPERTY.CF_DRIVER_NAME),n=k.getInputCIByName(r,m.DRIVER_PROPERTY.CF_DRIVER_ID),w=k.getInputCIByName(r,m.DRIVER_PROPERTY.CF_DRIVER_CLASS),x=this.getStore(q),A=this;n.value=k.createUUID();v.value=b||"My New Driver";if(a&&b)return e(b,h,
q);(new d({title:"New Driver",resizable:!0,titleBarClass:"text-info",onCancel:function(){g.resolve()},onOk:function(a){a=k.getInputCIByName(a,"Scope");return e(v.value,h,a.value)},cis:[v,k.createCI("Scope",3,q,{group:"General",value:q,options:[{label:"System",value:"system_drivers"},{label:"User",value:"user_drivers"}]})]})).show();return g}})})},"davinci/ui/dnd/DragManager":function(){define(["dojo/_base/declare","dojo/_base/array","dojo/_base/connect","dojo/mouse"],function(n,m,k){n=n("",null,{disabled:!1,
currentDragSource:null,currentDropTarget:null,dropAcceptable:!1,dropTargets:null,dragTriggered:!1,currentDomElement:null,_connectors:null,_moveConnector:null,document:null,documentX:0,documentY:0,_ABSOLUTE_THRESHOLD:3,_STATIC_THRESHOLD:40,constructor:function(){this.dropTargets=[];this._connectors=[k.connect(dojo.doc,"onkeydown",this,"onKeyDown"),k.connect(dojo.doc,"onmouseover",this,"onMouseOver"),k.connect(dojo.doc,"onmouseout",this,"onMouseOut"),k.connect(dojo.doc,"onmousedown",this,"onMouseDown"),
k.connect(dojo.doc,"onmouseup",this,"onMouseUp")]},destroy:function(){m.forEach(this._connectors,dojo.disconnect)},onKeyDown:function(d){27==d.keyCode&&this.currentDragSource&&(this.dropAcceptable=!1,this.onMouseUp(d))},onMouseDown:function(d,b){if(!(this.disabled||this.dragTriggered||!dojo.mouseButtons.isLeft(d)||d.metaKey||d.ctrlKey||this.dragTriggered)&&(b=this.currentDragSource=b||this.findDragSource(d))){b.onDragDown(d);b=0;for(var c=this.dropTargets.length;b<c;b++){var g=this.dropTargets[b];
if(!g.disabled)g.onDragDown(d)}d.preventDefault();this._moveConnectors=[k.connect(dojo.doc,"onmousemove",this,"onMouseMove")];this.document&&this.document!=dojo.doc&&(this._moveConnectors.push(k.connect(this.document,"onmousemove",this,"onMouseMove")),this._moveConnectors.push(k.connect(this.document,"onmouseover",this,"onMouseOver")),this._moveConnectors.push(k.connect(this.document,"onmouseout",this,"onMouseOut")),this._moveConnectors.push(k.connect(this.document,"onmouseup",this,"onMouseUp")))}},
onMouseMove:function(d){d.preventDefault();dojo.isIE&&(d.pageX-=2,d.pageY-=2);if(d.target==this.document||d.target.ownerDocument==this.document)d.documentX=this.documentX,d.documentY=this.documentY,d.documentX-=this.document.documentElement.scrollLeft,d.documentY-=this.document.documentElement.scrollTop;var b=d.dragSource=this.currentDragSource;if(!this.dragTriggered){var c=d.pageX-b.pageX,g=d.pageY-b.pageY,c=Math.sqrt(c*c+g*g);if("absolute"==b.positioning){if(c<this._ABSOLUTE_THRESHOLD)return}else if(c<
this._STATIC_THRESHOLD)return;this.dragTriggered=!0;b.onDragStart(d);c=0;for(g=this.dropTargets.length;c<g;c++){var h=this.dropTargets[c];h.disabled||(d.dropTarget=h,h.onDragStart(d))}this.onMouseOver(d)}b.onDragMove(d);(h=this.currentDropTarget)?this.dropAcceptable&&(d.dropTarget=h,h.onDragMove(d,this.dragObjects)):this.dropAcceptable=!1},onMouseOver:function(d){this.currentDomElement=d.target;if(this.dragTriggered){var b=this.currentDragSource;if(b){d.dragSource=b;var c=this.findDropTarget(this.currentDomElement,
b);c&&b.domNode==c.domNode||(c!=this.currentDropTarget&&(this.currentDropTarget&&(d.dropTarget=this.currentDropTarget,this.currentDropTarget.onDragOut(d)),c&&(d.dropTarget=c,this.dropAcceptable=c.onDragOver(d))),this.currentDropTarget=c)}}},onMouseOut:function(d){},onMouseUp:function(d){if(!this.ignoreMouseUp){m.forEach(this._moveConnectors,dojo.disconnect);if(this.dragTriggered){for(var b=0,c=this.dropTargets.length;b<c;b++){var g=this.dropTargets[b];g.disabled||(d.dropTarget=g,g.onDragEnd(d))}b=
this.currentDragSource;c=this.currentDropTarget;d.dragSource=b;d.dropTarget=c;if(b&&(c?(c.onDropStart(d),this.dropAcceptable?(g=c.onDrop(d),c.onDragOut(d),void 0==g||d.dragStatus||(d.dragStatus=g?"dropSuccess":"dropFailure")):(c.onDragOut(d),d.dragStatus="dropFailure")):d.dragStatus="dropFailure",b.onDragEnd(d),c))c.onDropEnd(d)}this._resetStatus()}},_resetStatus:function(){this.currentDragSource=this.currentDropTarget=null;this.dragTriggered=this.dropAcceptable=!1;this.currentDomElement=null},findDragSource:function(d){for(d=
d.target;d&&d!=dojo.doc.body;d=d.parentNode)if(d.dragSource&&!d.dragSource.disabled)return d.dragSource;return null},findDropTarget:function(d,b){for(var c=null,g=null;null!=d&&d!=dojo.doc.body;d=d.parentNode){var h=d.dropTarget;if(h&&!h.disabled&&h.accepts(b)){c=h;c.nodeUnderMouse=g;break}d.dragSource&&!d.dragSource.disabled&&(g=d)}return c},registerDropTarget:function(d){this.dropTargets.push(d)},unregisterDropTarget:function(d){for(var b=0,c=this.dropTargets.length;b<c;b++)if(this.dropTargets[b]==
d){this.dropTargets.splice(b,1);break}}});var h=new n;h.Module=n;return h})},"dijit/lang/_common":function(){define([],function(){return{buttonOk:"OK",buttonCancel:"Cancel",buttonSave:"Save",itemClose:"Close",loadingState:"Loading...",errorState:"Sorry, an error occurred"}})},"davinci/lang/actions":function(){define([],function(){return{select:"Select",save:"Save",selectDirectory:"Select Directory to link to",parentFolder:"Parent Folder:",localName:"Local Name:",link:"Link",downloadResources:"Download Resources",
downloadFileName:"Download File Name: ",downloadNow:"Download now",titleDownload:"Download",invalidFileName:"File names may only contain letters. numbers, and '_'.",editTheme:"Edit Theme",noEditableThemes:"No editable themes found in your workspace. Please create a new theme from one of the Read Only themes.",newWidgetsShouldUse:"New widgets should use: ",selectTheme:"Select a theme",switchingThemes:"Switching themes",filesHasUnsavedChanges:"The file '${0}' has unsaved changes, \"Save\" changes and continue with switching themes.",
abs:"Absolute positioning",flow:"Flow positioning"}})},"dijit/form/Select":function(){define("dojo/_base/array dojo/_base/declare dojo/dom-attr dojo/dom-class dojo/dom-geometry dojo/i18n dojo/keys dojo/_base/lang dojo/on dojo/sniff ./_FormSelectWidget ../_HasDropDown ../DropDownMenu ../MenuItem ../MenuSeparator ../Tooltip ../_KeyNavMixin ../registry dojo/text!./templates/Select.html dijit/lang/validate".split(" "),function(n,m,k,h,d,b,c,g,p,a,e,q,u,w,r,v,x,A,z){function y(a){return function(b){this._isLoaded?
this.inherited(a,arguments):this.loadDropDown(g.hitch(this,a,b))}}var B=m("dijit.form._SelectMenu",u,{autoFocus:!0,buildRendering:function(){this.inherited(arguments);this.domNode.setAttribute("role","listbox")},postCreate:function(){this.inherited(arguments);this.own(p(this.domNode,"selectstart",function(a){a.preventDefault();a.stopPropagation()}))},focus:function(){var a=!1,b=this.parentWidget.value;g.isArray(b)&&(b=b[b.length-1]);b&&n.forEach(this.parentWidget._getChildren(),function(c){c.option&&
b===c.option.value&&(a=!0,this.focusChild(c,!1))},this);a||this.inherited(arguments)}});m=m("dijit.form.Select",[e,q,x],{baseClass:"dijitSelect dijitValidationTextBox",templateString:z,_buttonInputDisabled:a("ie")?"disabled":"",required:!1,state:"",message:"",tooltipPosition:[],emptyLabel:"\x26#160;",_isLoaded:!1,_childrenLoaded:!1,labelType:"html",_fillContent:function(){this.inherited(arguments);if(this.options.length&&!this.value&&this.srcNodeRef){var a=this.srcNodeRef.selectedIndex||0;this._set("value",
this.options[0<=a?a:0].value)}this.dropDown=new B({id:this.id+"_menu",parentWidget:this});h.add(this.dropDown.domNode,this.baseClass.replace(/\s+|$/g,"Menu "))},_getMenuItemForOption:function(a){if(a.value||a.label){var b=g.hitch(this,"_setValueAttr",a);a=new w({option:a,label:("text"===this.labelType?(a.label||"").toString().replace(/&/g,"\x26amp;").replace(/</g,"\x26lt;"):a.label)||this.emptyLabel,onClick:b,ownerDocument:this.ownerDocument,dir:this.dir,textDir:this.textDir,disabled:a.disabled||
!1});a.focusNode.setAttribute("role","option");return a}return new r({ownerDocument:this.ownerDocument})},_addOptionItem:function(a){this.dropDown&&this.dropDown.addChild(this._getMenuItemForOption(a))},_getChildren:function(){return this.dropDown?this.dropDown.getChildren():[]},focus:function(){if(!this.disabled&&this.focusNode.focus)try{this.focusNode.focus()}catch(C){}},focusChild:function(a){a&&this.set("value",a.option)},_getFirst:function(){var a=this._getChildren();return a.length?a[0]:null},
_getLast:function(){var a=this._getChildren();return a.length?a[a.length-1]:null},childSelector:function(a){return(a=A.byNode(a))&&a.getParent()==this.dropDown},onKeyboardSearch:function(a,b,c,e){a&&this.focusChild(a)},_loadChildren:function(a){if(!0===a)if(this.dropDown&&(delete this.dropDown.focusedChild,this.focusedChild=null),this.options.length)this.inherited(arguments);else{n.forEach(this._getChildren(),function(a){a.destroyRecursive()});var b=new w({ownerDocument:this.ownerDocument,label:this.emptyLabel});
this.dropDown.addChild(b)}else this._updateSelection();this._isLoaded=!1;this._childrenLoaded=!0;this._loadingStore||this._setValueAttr(this.value,!1)},_refreshState:function(){this._started&&this.validate(this.focused)},startup:function(){this.inherited(arguments);this._refreshState()},_setValueAttr:function(a){this.inherited(arguments);k.set(this.valueNode,"value",this.get("value"));this._refreshState()},_setNameAttr:"valueNode",_setDisabledAttr:function(a){this.inherited(arguments);this._refreshState()},
_setRequiredAttr:function(a){this._set("required",a);this.focusNode.setAttribute("aria-required",a);this._refreshState()},_setOptionsAttr:function(a){this._isLoaded=!1;this._set("options",a)},_setDisplay:function(a){a=("text"===this.labelType?(a||"").replace(/&/g,"\x26amp;").replace(/</g,"\x26lt;"):a)||this.emptyLabel;this.containerNode.innerHTML='\x3cspan role\x3d"option" class\x3d"dijitReset dijitInline '+this.baseClass.replace(/\s+|$/g,"Label ")+'"\x3e'+a+"\x3c/span\x3e"},validate:function(a){a=
this.disabled||this.isValid(a);this._set("state",a?"":this._hasBeenBlurred?"Error":"Incomplete");this.focusNode.setAttribute("aria-invalid",a?"false":"true");var b=a?"":this._missingMsg;b&&this.focused&&this._hasBeenBlurred?v.show(b,this.domNode,this.tooltipPosition,!this.isLeftToRight()):v.hide(this.domNode);this._set("message",b);return a},isValid:function(){return!this.required||0===this.value||!/^\s*$/.test(this.value||"")},reset:function(){this.inherited(arguments);v.hide(this.domNode);this._refreshState()},
postMixInProperties:function(){this.inherited(arguments);this._missingMsg=""},postCreate:function(){this.inherited(arguments);this.own(p(this.domNode,"selectstart",function(a){a.preventDefault();a.stopPropagation()}));this.domNode.setAttribute("aria-expanded","false");var a=this._keyNavCodes;delete a[c.LEFT_ARROW];delete a[c.RIGHT_ARROW]},_setStyleAttr:function(a){this.inherited(arguments);h.toggle(this.domNode,this.baseClass.replace(/\s+|$/g,"FixedWidth "),!!this.domNode.style.width)},isLoaded:function(){return this._isLoaded},
loadDropDown:function(a){this._loadChildren(!0);this._isLoaded=!0;a()},destroy:function(a){this.dropDown&&!this.dropDown._destroyed&&(this.dropDown.destroyRecursive(a),delete this.dropDown);v.hide(this.domNode);this.inherited(arguments)},_onFocus:function(){this.validate(!0)},_onBlur:function(){v.hide(this.domNode);this.inherited(arguments);this.validate(!1)}});m._Menu=B;m.prototype._onContainerKeydown=y("_onContainerKeydown");m.prototype._onContainerKeypress=y("_onContainerKeypress");return m})},
"dojo/has":function(){define(["require","module"],function(n,m){var k=n.has||function(){};k.add("dom-addeventlistener",!!document.addEventListener);k.add("touch","ontouchstart"in document||0<window.navigator.msMaxTouchPoints);k.add("device-width",screen.availWidth||innerWidth);n=document.createElement("form");k.add("dom-attributes-explicit",0==n.attributes.length);k.add("dom-attributes-specified-flag",0<n.attributes.length&&40>n.attributes.length);k.clearElement=function(h){h.innerHTML="";return h};
k.normalize=function(h,d){var b=h.match(/[\?:]|[^:\?]*/g),c=0,g=function(d){var a=b[c++];if(":"==a)return 0;if("?"==b[c++]){if(!d&&k(a))return g();g(!0);return g(d)}return a||0};return(h=g())&&d(h)};k.load=function(h,d,b){h?d([h],b):b()};return k})},"xide/json/TreeMode":function(){define("dcl/dcl dojo/_base/declare ./util ./Highlighter ./History ./SearchBox ./Node".split(" "),function(n,m,k,h,d,b,c){return n(null,{declaredClass:"xide.json.TreeMode",focusNode:void 0,domFocus:null,_create:function(b,
c){if(!b)throw Error("No container element provided.");this.container=b;this.dom={};this.highlighter=new h;this.selection=void 0;this._setOptions(c);this.options.history&&"view"!==this.options.mode&&(this.history=new d(this));this._createFrame();this._createTable()},_delete:function(){this.frame&&this.container&&this.frame.parentNode==this.container&&this.container.removeChild(this.frame)},_setOptions:function(b){this.options={search:!0,history:!0,mode:"tree",name:void 0};if(b)for(var c in b)b.hasOwnProperty(c)&&
(this.options[c]=b[c])},setData:function(b,d){this.data=b;this._setsData=!0;d&&(k.log('Warning: second parameter "name" is deprecated. Use setName(name) instead.'),this.options.name=d);b instanceof Function||void 0===b?this.clear():(this.content.removeChild(this.table),b=new c(this,{field:this.options.name,value:b}),this._setRoot(b),this.node.expand(!1),this.content.appendChild(this.table));this.history&&this.history.clear();this._setsData=!1},getData:function(){this.focusNode&&this.focusNode.blur();
if(this.node)return this.node.getValue()},getText:function(){return JSON.stringify(this.get())},setText:function(b){this.set(k.parse(b))},setName:function(b){this.options.name=b;this.node&&this.node.updateField(this.options.name)},getName:function(){return this.options.name},focus:function(){var b=this.content.querySelector("[contenteditable\x3dtrue]");b?b.focus():this.node.dom.expand?this.node.dom.expand.focus():this.node.dom.menu?this.node.dom.menu.focus():(b=this.frame.querySelector("button"))&&
b.focus()},clear:function(){this.node&&(this.node.collapse(null,!0),this.tbody.removeChild(this.node.getDom()),delete this.node)},_setRoot:function(b){this.clear();this.node=b;this.tbody.appendChild(b.getDom())},search:function(b){this.node?(this.content.removeChild(this.table),b=this.node.search(b),this.content.appendChild(this.table)):b=[];return b},expandAll:function(){this.node&&(this.content.removeChild(this.table),this.node.expand(),this.content.appendChild(this.table))},collapseAll:function(){this.node&&
(this.content.removeChild(this.table),this.node.collapse(),this.content.appendChild(this.table))},_onAction:function(b,c){this.history&&this.history.add(b,c);if(this.options.change)try{this.options.change()}catch(a){k.log("Error in change callback: ",a)}this._emit("onAction",{action:b,params:c});this.onAction({action:b,params:c})},startAutoScroll:function(b){var c=this,a=this.content,e=k.getAbsoluteTop(a),g=a.clientHeight,d=e+g;(this.autoScrollStep=b<e+24&&0<a.scrollTop?(e+24-b)/3:b>d-24&&g+a.scrollTop<
a.scrollHeight?(d-24-b)/3:void 0)?this.autoScrollTimer||(this.autoScrollTimer=setInterval(function(){c.autoScrollStep?a.scrollTop-=c.autoScrollStep:c.stopAutoScroll()},50)):this.stopAutoScroll()},stopAutoScroll:function(){this.autoScrollTimer&&(clearTimeout(this.autoScrollTimer),delete this.autoScrollTimer);this.autoScrollStep&&delete this.autoScrollStep},setSelection:function(b){b&&("scrollTop"in b&&this.content&&(this.content.scrollTop=b.scrollTop),b.range&&k.setSelectionOffset(b.range),b.dom&&
b.dom.focus())},getSelection:function(){return{dom:this.domFocus,scrollTop:this.content?this.content.scrollTop:0,range:k.getSelectionOffset()}},scrollTo:function(b,c){var a=this.content;if(a){var e=this;e.animateTimeout&&(clearTimeout(e.animateTimeout),delete e.animateTimeout);e.animateCallback&&(e.animateCallback(!1),delete e.animateCallback);var g=a.clientHeight,d=Math.min(Math.max(b-g/4,0),a.scrollHeight-g),h=function(){var b=d-a.scrollTop;3<Math.abs(b)?(a.scrollTop+=b/3,e.animateCallback=c,e.animateTimeout=
setTimeout(h,50)):(c&&c(!0),a.scrollTop=d,delete e.animateTimeout,delete e.animateCallback)};h()}else c&&c(!1)},_createFrame:function(){function c(a){d._onEvent(a);d._emit("event",a)}this.frame=document.createElement("div");this.frame.className="jsoneditor";this.container.appendChild(this.frame);var d=this;this.frame.onclick=function(a){var b=a.target;c(a);"BUTTON"==b.nodeName&&a.preventDefault()};this.frame.oninput=c;this.frame.onchange=c;this.frame.onkeydown=c;this.frame.onkeyup=c;this.frame.oncut=
c;this.frame.onpaste=c;this.frame.onmousedown=c;this.frame.onmouseup=c;this.frame.onmouseover=c;this.frame.onmouseout=c;k.addEventListener(this.frame,"focus",c,!0);k.addEventListener(this.frame,"blur",c,!0);this.frame.onfocusin=c;this.frame.onfocusout=c;this.menu=document.createElement("div");this.menu.className="ui-state-default dijitToolbar";this.frame.appendChild(this.menu);var a=document.createElement("span");a.className="fa-expand actionToolbarButtonElusive dijitButtonContents dijitButton dijitIcon";
a.title="Expand all fields";a.onclick=function(){d.expandAll()};this.menu.appendChild(a);a=document.createElement("span");a.title="Collapse all fields";a.className="fa-compress actionToolbarButtonElusive dijitButtonContents dijitButton dijitIcon";a.onclick=function(){d.collapseAll()};this.menu.appendChild(a);if(this.history){var e=document.createElement("span");e.className="fa-undo actionToolbarButtonElusive dijitButtonContents dijitButton dijitIcon";e.title="Undo last action (Ctrl+Z)";e.onclick=
function(){d._onUndo()};this.menu.appendChild(e);this.dom.undo=e;var h=document.createElement("span");h.className="fa-repeat actionToolbarButtonElusive dijitButtonContents dijitButton dijitIcon";h.title="Redo (Ctrl+Shift+Z)";h.onclick=function(){d._onRedo()};this.menu.appendChild(h);this.dom.redo=h;this.history.onChange=function(){e.disabled=!d.history.canUndo();h.disabled=!d.history.canRedo()};this.history.onChange()}this.options&&this.options.modes&&this.options.modes.length&&(a=modeswitcher.create(this,
this.options.modes,this.options.mode),this.menu.appendChild(a),this.dom.modeBox=a);this.options.search&&(this.searchBox=new b(this,this.menu));this.options.save&&(a=document.createElement("span"),a.title="Save",a.className="fa-save actionToolbarButtonElusive dijitButtonContents dijitButton dijitIcon",a.onclick=function(){if(d.delegate.onSave)d.delegate.onSave(d.getData())},this.menu.appendChild(a))},_onUndo:function(){this.history&&(this.history.undo(),this.options.change&&this.options.change())},
_onRedo:function(){this.history&&(this.history.redo(),this.options.change&&this.options.change())},_onEvent:function(b){var g=b.target;"keydown"==b.type&&this._onKeyDown(b);"focus"==b.type&&(this.domFocus=g);if(g=c.getNodeFromTarget(g))g.onEvent(b)},_onKeyDown:function(b){var c=b.which||b.keyCode,a=b.ctrlKey,e=b.shiftKey,g=!1;9==c&&setTimeout(function(){k.selectContentEditable(this.domFocus)},0);if(this.searchBox)if(a&&70==c)this.searchBox.dom.search.focus(),this.searchBox.dom.search.select(),g=!0;
else if(114==c||a&&71==c)e?this.searchBox.previous(!0):this.searchBox.next(!0),g=!0;this.history&&(a&&!e&&90==c?(this._onUndo(),g=!0):a&&e&&90==c&&(this._onRedo(),g=!0));g&&(b.preventDefault(),b.stopPropagation())},_createTable:function(){var b=document.createElement("div");b.className="outer";this.contentOuter=b;this.content=document.createElement("div");this.content.className="tree";b.appendChild(this.content);this.table=document.createElement("table");this.table.className="tree";this.content.appendChild(this.table);
var c;this.colgroupContent=document.createElement("colgroup");"tree"===this.options.mode&&(c=document.createElement("col"),c.width="24px",this.colgroupContent.appendChild(c));c=document.createElement("col");c.width="24px";this.colgroupContent.appendChild(c);c=document.createElement("col");this.colgroupContent.appendChild(c);this.table.appendChild(this.colgroupContent);this.tbody=document.createElement("tbody");this.table.appendChild(this.tbody);this.frame.appendChild(b)}})})},"davinci/ve/views/StatesView":function(){define("dojo/_base/declare dojo/query dojo/dom-class dojo/_base/connect dojo/aspect davinci/lang/ve/ve davinci/workbench/ViewPart dijit/layout/BorderContainer dijit/layout/ContentPane davinci/XPathUtils davinci/ve/States davinci/ve/widget davinci/ve/_Widget davinci/ve/commands/AppStateCommand dojo/data/ItemFileWriteStore dijit/tree/ForestStoreModel dijit/Tree dojo/_base/window".split(" "),
function(n,m,k,h,d,b,c,g,p,a,e,q,u,w,r,v,x,A){n(x._TreeNode,{});var z=n(x._TreeNode,{_setLabelAttr:{node:"labelNode",type:"innerHTML"}}),y="sceneId category node sceneContainerNode isCurrent isFocus isInitial".split(" ");return n("davinci.ve.views.StatesView",[c],{nextId:0,_lastSelectedId:null,postCreate:function(){this.inherited(arguments);this._themeState=null;this.container=new g({design:"headline",gutters:!1,liveSplitters:!1});this.centerPane=new p({region:"center"});this.container.addChild(this.centerPane);
this.container.layout();this.container.startup();this.setContent(this.container);this.subscribe("/davinci/ui/editorSelected",this._editorSelected.bind(this));this.subscribe("/davinci/ui/context/loaded",this._contextLoaded.bind(this));this.subscribe("/davinci/ui/context/statesLoaded",this._statesLoaded.bind(this));this.subscribe("/davinci/ui/context/pagebuilt",this._pagebuilt.bind(this));this.subscribe("/davinci/ui/context/pagerebuilt",this._pagerebuilt.bind(this));this.subscribe("/davinci/states/statesReordered",
this._statesReordered.bind(this));this.subscribe("/davinci/ui/deviceChanged",this._deviceChanged.bind(this));this.subscribe("/davinci/states/state/added",this._addState.bind(this));this.subscribe("/davinci/states/state/removed",this._removeState.bind(this));this.subscribe("/davinci/states/state/renamed",this._renameState.bind(this));this.subscribe("/davinci/states/state/changed",this._changeState.bind(this));this.subscribe("/maqetta/appstates/state/changed",this._changeState.bind(this));this.subscribe("/maqetta/appstates/state/containerChange",
this._containerChange.bind(this));this.subscribe("/davinci/ui/context/registerSceneManager",this._registerSceneManager.bind(this));this.subscribe("/davinci/scene/scenesLoaded",this._scenesLoaded.bind(this));this.subscribe("/davinci/scene/added",this._addScene.bind(this));this.subscribe("/davinci/scene/removed",this._removeScene.bind(this));this.subscribe("/davinci/scene/renamed",this._renameScene.bind(this));this.subscribe("/davinci/scene/selectionChanged",this._sceneSelectionChanged.bind(this));
dojo.subscribe("/davinci/ui/widgetPropertiesChanged",dojo.hitch(this,this._widgetPropertiesChanged));this.subscribe("/davinci/ui/widgetSelected",dojo.hitch(this,this._widgetSelectionChanged));this.attachToolbar();dojo.style(this.toolbarDiv,"display","none")},_contextLoaded:function(){},_pagebuilt:function(){this._statesLoaded.apply(this,arguments)},_pagerebuilt:function(){this._destroyTree();this._statesLoaded.apply(this,arguments)},_statesReordered:function(){this._destroyTree();this._statesLoaded.apply(this,
arguments)},_statesLoaded:function(){this._editor&&"davinci.ve.themeEditor.ThemeEditor"!=this._editor.declaredClass&&this._updateView();this._hideShowToolBar()},_deviceChanged:function(){this._updateView()},_addState:function(){this._updateView()},_removeState:function(){this._updateView()},_renameState:function(){this._updateView()},_changeState:function(a){this.isThemeEditor()?this._updateThemeSelection(a.newState):this._updateView()},_containerChange:function(){this._updateView()},_registerSceneManager:function(a){},
_scenesLoaded:function(a){this._updateView()},_addScene:function(a,b,c){this._updateView()},_removeScene:function(a,b,c){this._updateView()},_renameScene:function(a,b,c){this._updateView()},_widgetPropertiesChanged:function(){this._updateView()},_widgetSelectionChanged:function(a){this._editor&&this._editor.getContext&&this._tree&&this._sceneStore&&(a=this._editor.getContext().getSelection(),1==a.length&&(a=a[0].domNode)&&a._maqAppStates&&this._sceneStore.fetch({query:{node:a},queryOptions:{deep:!0},
onComplete:dojo.hitch(this,function(a,b){0<a.length&&(a=this._getTreeSelectionPath(a[0]),this._tree.set("path",a))})}))},_sceneSelectionChanged:function(a,b){a&&a.category&&b&&this._updateView()},_editorSelected:function(a){a=a.editor;this._destroyTree();this._unregisterForContextEvents();a&&a.supports("states")?(this._editor=a,dojo.style(this.container.domNode,"display","block"),"davinci.ve.themeEditor.ThemeEditor"===a.declaredClass?(this.set("title",b.States),this._updateViewForThemeEditor(),this._themeState?
this._updateThemeSelection(this._themeState):this._updateThemeSelection("Normal")):(this.set("title",b.Scenes),this._registerForContextEvents(),this._updateView()),this.container.layout()):(delete this._editor,dojo.style(this.container.domNode,"display","none"));this._hideShowToolBar()},_getRootNode:function(){var a=this._editor,b;a&&a.getContext&&(b=(a=a.getContext())&&a.rootNode);return b},_updateView:function(){if(this._editor&&this._editor.getContext&&!this.isThemeEditor()){var a=this._editor.getContext();
a&&a._statesLoaded&&A.withDoc(document,function(){this._updateList();this._updateSelection()},this)}},isThemeEditor:function(){return this._editor&&"davinci.ve.themeEditor.ThemeEditor"===this._editor.declaredClass},_updateViewForThemeEditor:function(){var a=this._editor._theme.getStatesForAllWidgets(),b={Normal:"Normal"};if(a)for(var c=0;c<a.length;c++){var e=a[c];"Normal"!=e&&(b[e]=e)}window.latestStates=b;var a=this._getScenes(),b={name:this._editor&&this._editor.getFileNameToDisplay?this._editor.getFileNameToDisplay():
this._editor&&this._editor.fileName?this._editor.fileName:"file",type:"file",category:"file",children:[]},c=[],e=[b],g;for(g in latestStates)c.push({name:g,sceneId:g,type:"AppState"});b.children=b.children.concat(c);this._compareStructures(e,a)||(this._destroyTree(),this._createTree(e))},_updateList:function(){function b(c,g){var r,v=c.declaredClass&&c.isInstanceOf&&c.isInstanceOf(u);v?(r=c,c=r.domNode):r=null;var m=e.isStateContainer(c),n=!1,w;for(w in d){var x=d[w];if(x.getSceneChildren&&x.name&&
x.category&&(n=x.isSceneContainer(c)))break}if("BODY"==c.tagName||m||n){for(var A=null,z=0;z<h.length;z++)if(x=h[z],x.node==c){A=x;break}var y=null;if(!A){var C=c.parentNode;a:for(;C;){for(z=0;z<h.length;z++)if(x=h[z],x.node==C){y=x;break a}if("BODY"==C.tagName)break;C=C.parentNode}}if(A)g=A;else{var B=v?q.getLabel(r):q.getLabelForNode(c),z=a.getXPath(c),B={name:B,type:"file",category:"file",node:c,children:[]};y?(B.maqid=y.maqid+"$"+z,y.children.push(B)):(B.maqid=g.maqid+"$"+z,g.children.push(B));
h.push(B);g=B}if(m){z=e.getStates(c);x=e.getState(c);x||(x=e.NORMAL);C=e.getInitial(c);C||(C=e.NORMAL);for(var F={maqid:g.maqid+"$AppStates",name:"Application States",type:"SceneManagerRoot",category:"AppStates",sceneContainerNode:c,parentItem:g,children:[]},E=0;E<z.length;E++){var G=z[E],B=p._treeNodeContent("Normal"==G?"Background":G),m=k&&k.stateContainerNode==c&&k.state==x,y=G===x,A=G===C,B={maqid:F.maqid+"$"+G,name:B,sceneId:G,type:"AppState",isFocus:m,isCurrent:y,isInitial:A,sceneContainerNode:c,
parentItem:F};F.children.push(B);h.push(B)}g.children.push(F);h.push(F)}if(n)for(w in d)if(x=d[w],x.getSceneChildren&&x.getCurrentScene&&x.getInitialScenes&&x.name&&x.category&&(n=x.getSceneChildren(c),0<n.length)){C=x.getCurrentScene(c);F=x.getInitialScenes(c);z=a.getXPath(c);E={maqid:g.maqid+"$"+z,name:x.name,type:"SceneManagerRoot",category:x.category,parentItem:g,children:[]};for(G=0;G<n.length;G++){var D=n[G],B=v?q.getLabel(D._dvWidget):q.getLabelForNode(D),B=p._treeNodeContent(B),m=!1,y=D===
C,A=0<=F.indexOf(D),z=a.getXPath(D),B={maqid:E.maqid+"$"+z,name:B,sceneId:D.id,type:x.category,isFocus:m,isCurrent:y,isInitial:A,sceneContainerNode:c,parentItem:E,node:D,children:[]};E.children.push(B);h.push(B)}g.children.push(E);h.push(B)}}r=v?r.getChildren():e._getChildrenOfNode(c);for(v=0;v<r.length;v++)b(r[v],g)}var c=this._getScenes();if(this._editor&&c){var g=this._editor.getContext();if(g&&g.rootWidget&&g.rootNode&&g._statesLoaded){var d=g.sceneManagers,h=[],p=this,k=e.getFocus(g.rootNode);
k&&!k.state&&(k.state=e.NORMAL);var r={maqid:"root",children:[]};b(g.rootWidget,r);g=[r.children[0]];if(!this._compareStructures(g,c)){var v=null;this._tree&&this._sceneStore&&(c=this._tree.get("path"),0<c.length&&(v=c[c.length-1].maqid[0]));this._destroyTree();this._createTree(g);v&&this._tree.onLoadDeferred.then(function(){this._sceneStore.fetch({query:{maqid:v},queryOptions:{deep:!0},onComplete:dojo.hitch(this,function(a,b){1===a.length&&(a=this._getTreeSelectionPath(a[0]),0<a.length&&this._tree.set("path",
a))})})}.bind(this))}this._hideShowToolBar()}}},_getTreeSelectionPath:function(a){var b=[];b.splice(0,0,a.id[0]);for(a=a.parentItem&&a.parentItem[0];a;)b.splice(0,0,a.id[0]),a=a.parentItem&&a.parentItem[0];b.splice(0,0,"StoryRoot");return b},_updateSelection:function(){if(this._editor&&this._tree){var a=this._editor.getContext();a&&a._statesLoaded&&this._tree.onLoadDeferred.then(function(){var b=this._tree.get("path"),b=0<b.length?b[b.length-1].maqid[0]:null,c=a.sceneManagers,g;for(g in c){var d=
c[g];if(d.getAllSceneContainers&&d.getSceneChildren&&d.getCurrentScene){d.getAllSceneContainers();var h;this._sceneStore.fetch({query:{type:d.category},queryOptions:{deep:!0},onComplete:dojo.hitch(this,function(a,b){h=a})});for(d=0;d<h.length;d++){var q=h[d],p=this._findTreeNodeSpanByClass(q,"ScenesPaletteCurrent"),r=this._findTreeNodeSpanByClass(q,"ScenesPaletteInitial");q.isCurrent&&q.isCurrent[0]?p&&k.remove(p,"ScenesPaletteCurrentHidden"):p&&k.add(p,"ScenesPaletteCurrentHidden");q.isInitial&&
q.isInitial[0]?r&&k.remove(r,"ScenesPaletteInitialHidden"):r&&k.add(r,"ScenesPaletteInitialHidden");q.maqId&&q.maqId[0]==b&&(p=q.node&&q.node[0])&&p._maqAppStates&&(r=e.getState(p),e.setState(r,p,{focus:!0,updateWhenCurrent:!0}))}}}var u=[];this._sceneStore.fetch({query:{type:"AppState"},queryOptions:{deep:!0},onComplete:dojo.hitch(this,function(a,b){u=a})});for(d=0;d<u.length;d++)g=u[d],p=this._findTreeNodeSpanByClass(g,"ScenesPaletteCurrent"),r=this._findTreeNodeSpanByClass(g,"ScenesPaletteInitial"),
g.isCurrent&&g.isCurrent[0]?p&&k.remove(p,"ScenesPaletteCurrentHidden"):p&&k.add(p,"ScenesPaletteCurrentHidden"),g.isInitial&&g.isInitial[0]?r&&k.remove(r,"ScenesPaletteInitialHidden"):r&&k.add(r,"ScenesPaletteInitialHidden")}.bind(this))}},_updateThemeSelection:function(a){if(this._sceneStore){var b;a||(a="Normal");this._sceneStore.fetch({query:{type:"AppState",sceneId:a},queryOptions:{deep:!0},onComplete:dojo.hitch(this,function(a,c){1===a.length&&(b=a[0].sceneId[0])})});b&&this._updateSelectedScene("AppState",
b)}},_getScenes:function(){var a=[];this._sceneStore&&this._sceneStore.fetch({query:{},queryOptions:{},onComplete:dojo.hitch(this,function(b,c){function e(a,b){for(var c={name:a.name[0],type:a.type[0]},g=0;g<y.length;g++){var d=y[g];a[d]&&(c[d]=a[d][0])}b.push(c);a.children&&0<a.children.length&&(c.children=[],a.children.forEach(function(a){e(a,c.children)}))}b.forEach(function(b){e(b,a)})})});return a},_compareStructures:function(a,b){function c(a,b){if(a.length!=b.length)return!1;for(var e=0;e<
a.length;e++){var g;a:{g=a[e];for(var d=b[e],h=0;h<y.length;h++){var q=y[h];q=g[q]&&!d[q]||!g[q]&&d[q]?!1:g[q]&&g[q]!==d[q]?!1:!0;if(!q){g=!1;break a}}h=g.children&&g.children.length;q=d.children&&d.children.length;g=h&&!q||!h&&q||h&&!c(g.children,d.children)?!1:!0}if(!g)return!1}return!0}return c(a,b)},_destroyTree:function(){this._tree&&(this._tree.destroyRecursive(),this._forest.destroy(),this._tree=this._forest=this._sceneStore=null)},_createTree:function(a){require(["dijit/tree/dndSource"],function(b){b=
function(a,b,c){if(a&&b){var e,g,d;b.forInSelectedItems(function(a){if(e=a.data&&a.data.item)g=e.parentItem&&e.parentItem[0],d=g.children&&g.children.indexOf(e)});var h,q;(a=dijit.getEnclosingWidget(a).item)&&(h=a.parentItem&&a.parentItem[0])&&(q=h.children&&h.children.indexOf(a));return"over"!=c&&e&&a&&g&&h&&"AppState"==e.type[0]&&"AppState"==a.type[0]&&g==h&&0!==d&&!("before"==c&&0===q)&&!("before"==c&&d+1==q)&&!("after"==c&&d==q+1)}}.bind(this);var c=function(a,b,c){if(a.tree==this._tree){var e,
d;a.forInSelectedItems(function(a){(e=a.data&&a.data.item)&&(d=e.parentItem&&e.parentItem[0])});if((a=d.sceneContainerNode&&d.sceneContainerNode[0])&&a._maqAppStates&&a._maqAppStates.states){b=[];for(c=1;c<d.children.length;c++)b.push(d.children[c].sceneId[0]);a=new w({action:"reorder",newStatesList:b,stateContainerNode:a,context:g});g.getCommandStack().execute(a)}}}.bind(this);if(this._editor){var g=this._editor.getContext(),h=g.sceneManagers;this._sceneStore=new r({data:{identifier:"id",label:"name",
items:[]},clearOnClose:!0});this._forest=new v({store:this._sceneStore,query:{type:"file"},rootId:"StoryRoot",rootLabel:"All",childrenAttrs:["children"]});this._tree=new x({model:this._forest,persist:!1,showRoot:!1,autoExpand:!0,dndController:"dijit.tree.dndSource",dragThreshold:8,betweenThreshold:5,checkItemAcceptance:b,className:"StatesViewTree",style:"height:150px; overflow-x:hidden; overflow-y:auto;",_createTreeNode:function(a){return new z(a)},getIconClass:function(a,b){return"dijitLeaf"}});
this._tree.tree&&this._tree.tree.dndController&&d.after(this._tree.tree.dndController,"onDndDrop",c,!0);this.centerPane.domNode.appendChild(this._tree.domNode);dojo.connect(this._tree,"onClick",this,function(a){var b=this._editor,c=b?b.getContext():null,g=null,d=null,q=null;a&&a.type&&(d=a.type[0],q=a.category&&a.category[0],"AppState"==d||"SceneManagerRoot"==d&&"AppStates"==q?g=a.sceneContainerNode?a.sceneContainerNode[0]:null:a.node&&a.node[0]._maqAppStates&&(g=a.node[0]));if(this.isThemeEditor())this.publish("/davinci/states/state/changed",
[{editorClass:b.declaredClass,widget:"$all",newState:a.sceneId[0],oldState:this._themeState,context:this._editor.context}]),this._themeState=a.sceneId[0];else{c&&g&&(q="AppState"==d?a.sceneId?a.sceneId[0]:null:e.getState(g),e.setState(q,g,{focus:!0,updateWhenCurrent:!0}),"davinci.ve.PageEditor"===this._editor.declaredClass&&(c.deselectInvisible(),c.clearCachedWidgetBounds(),c.updateFocusAll()));if(a.sceneId)for(var p in h){if(b=h[p],b.selectScene&&b.selectScene({sceneId:a.sceneId[0]}))break}else a.type&&
"file"==a.type[0]&&a.node&&a.node[0]._dvWidget&&c.select(a.node[0]._dvWidget);this._updateSelection()}});var q=function(a,b){var c=dojo.mixin({},a),e=this.nextId+"";this.nextId++;c.id=e;c.parentItem=b;delete c.children;var g;g=b?this._sceneStore.newItem(c,{parent:b,attribute:"children"}):this._sceneStore.newItem(c);a.children&&a.children.forEach(function(a){q(a,g)})}.bind(this);a.forEach(function(a){q(a)});this._sceneStore.save();if(this._tree.getParent){var p=this._tree.getParent();p.resize&&window.setTimeout(function(){p.resize()},
0)}}}.bind(this))},_updateSelectedScene:function(a,b){if(this._sceneStore){for(var c=b,e=[];c;)this._sceneStore.fetch({query:{type:a,sceneId:c},queryOptions:{deep:!0},onComplete:dojo.hitch(this,function(a,b){if(1!==a.length)console.error("_sceneSelectionChanged error. currentSceneId\x3d"+c+",items.length\x3d"+a.length),c=null;else for(a=a[0],e.splice(0,0,a.id[0]),c=a.parentSceneId?a.parentSceneId[0]:null,a=a.parentItem&&a.parentItem[0];a;)e.splice(0,0,a.id[0]),a=a.parentItem&&a.parentItem[0]})});
e.splice(0,0,"StoryRoot");this._tree.set("paths",[e])}},_hideShowToolBar:function(){function a(a,b){var c=a+"Disabled";a=m("."+a);a.length&&(b?k.remove(a[0],c):k.add(a[0],c))}if(this._editor){var b=this._editor.getContext&&this._editor.getContext();dojo.style(this.toolbarDiv,"display","davinci.ve.PageEditor"===this._editor.declaredClass?"block":"none");var c,g,d;c=g=d=!1;b&&b.rootNode&&((b=e.getFocus(b.rootNode))&&b.stateContainerNode&&(c=d=!0),b&&b.state&&b.state!==e.NORMAL&&(g=d=!0));a("addStateIcon",
c);a("removeStateIcon",g);a("modifyStateIcon",d)}},_treeNodeContent:function(a){var c;c=""+('\x3cspan title\x3d"'+b.InitialScene+'" class\x3d"ScenesPaletteAppStateIcon ScenesPaletteInitial"\x3e\x26#x2713;\x3c/span\x3e');c+='\x3cspan title\x3d"'+b.ActiveScene+'" class\x3d"ScenesPaletteAppStateIcon ScenesPaletteCurrent"\x3e\x3c/span\x3e';return c+("\x3cspan\x3e"+a+"\x3c/span\x3e")},_findTreeNodeSpanByClass:function(a,b){var c=(a=(a=this._tree.getNodesByItem(a))&&0<a.length?a[0]:null)?a.domNode:null;
return(b=a?dojo.query("."+b,c):[])&&0<b.length?b[0]:null},_contextEventHandler:function(){this._updateView()},_unregisterForContextEvents:function(){this._contextConnects&&(this._contextConnects.forEach(h.disconnect),this._contextConnects=null)},_registerForContextEvents:function(){var a=["widgetChanged","widgetAddedOrDeleted"];this._unregisterForContextEvents();var b=this._editor&&this._editor.getContext&&this._editor.getContext();b&&(this._contextConnects=[],a.forEach(function(a){b[a]&&this._contextConnects.push(h.connect(b,
a,this,"_contextEventHandler"))}.bind(this)))}})})},"dgrid/extensions/Pagination":function(){define("../_StoreMixin dojo/_base/declare dojo/_base/array dojo/_base/lang dojo/dom-construct dojo/dom-class dojo/on dojo/query dojo/string dojo/has dojo/when ../util/misc dojo/_base/sniff".split(" "),function(n,m,k,h,d,b,c,g,p,a,e,q){function u(a){a.noDataNode?(d.destroy(a.noDataNode),delete a.noDataNode):a.cleanup();a.contentNode.innerHTML=""}function w(a){if(a.loadingNode)d.destroy(a.loadingNode),delete a.loadingNode;
else if(a._oldPageNodes){for(var b in a._oldPageNodes)a.removeRow(a._oldPageNodes[b]);delete a._oldPageNodes}delete a._isLoading}return m(n,{rowsPerPage:10,pagingTextBox:!1,previousNextArrows:!0,firstLastArrows:!1,pagingLinks:2,pageSizeOptions:null,showLoadingMessage:!0,i18nPagination:{status:"${start} - ${end} of ${total} results",gotoFirst:"Go to first page",gotoNext:"Go to next page",gotoPrev:"Go to previous page",gotoLast:"Go to last page",gotoPage:"Go to page",jumpPage:"Jump to page",rowsPerPage:"Number of rows per page"},
showFooter:!0,_currentPage:1,buildRendering:function(){this.inherited(arguments);var a=this,e=this.paginationNode=d.create("div",{className:"dgrid-pagination"},this.footerNode),g=this.paginationStatusNode=d.create("div",{className:"dgrid-status"},e),h=this.i18nPagination;g.tabIndex=0;this.addUiClasses&&b.add(this.footerNode,"ui-widget-content");this._updatePaginationSizeSelect();this._updateRowsPerPageOption();this._updatePaginationStatus(this._total);e=this.paginationNavigationNode=d.create("div",
{className:"dgrid-navigation"},e);this.firstLastArrows&&(this.paginationFirstNode=d.create("span",{"aria-label":h.gotoFirst,className:"dgrid-first dgrid-page-link",innerHTML:"\u00ab",tabIndex:0},e));this.previousNextArrows&&(this.paginationPreviousNode=d.create("span",{"aria-label":h.gotoPrev,className:"dgrid-previous dgrid-page-link",innerHTML:"\u2039",tabIndex:0},e));this.paginationLinksNode=d.create("span",{className:"dgrid-pagination-links"},e);this.previousNextArrows&&(this.paginationNextNode=
d.create("span",{"aria-label":h.gotoNext,className:"dgrid-next dgrid-page-link",innerHTML:"\u203a",tabIndex:0},e));this.firstLastArrows&&(this.paginationLastNode=d.create("span",{"aria-label":h.gotoLast,className:"dgrid-last dgrid-page-link",innerHTML:"\u00bb",tabIndex:0},e));this._listeners.push(c(e,".dgrid-page-link:click,.dgrid-page-link:keydown",function(b){if("keydown"!==b.type||13===b.keyCode){b=this.className;var c,e;a._isLoading||-1<b.indexOf("dgrid-page-disabled")||(c=a._currentPage,e=Math.ceil(a._total/
a.rowsPerPage),this===a.paginationPreviousNode?a.gotoPage(c-1):this===a.paginationNextNode?a.gotoPage(c+1):this===a.paginationFirstNode?a.gotoPage(1):this===a.paginationLastNode?a.gotoPage(e):"dgrid-page-link"===b&&a.gotoPage(+this.innerHTML))}}))},destroy:function(){this.inherited(arguments);this._pagingTextBoxHandle&&this._pagingTextBoxHandle.remove()},_updatePaginationSizeSelect:function(){var a=this.pageSizeOptions,b=this.paginationSizeSelect,e;if(a&&a.length){b||(b=this.paginationSizeSelect=
d.create("select",{"aria-label":this.i18nPagination.rowsPerPage,className:"dgrid-page-size"},this.paginationNode),e=this._paginationSizeChangeHandle=c(b,"change",h.hitch(this,function(){this.set("rowsPerPage",+this.paginationSizeSelect.value)})),this._listeners.push(e));for(e=b.options.length=0;e<a.length;e++)d.create("option",{innerHTML:a[e],selected:this.rowsPerPage===a[e],value:a[e]},b);this._updateRowsPerPageOption()}else a&&a.length||!b||(d.destroy(b),this.paginationSizeSelect=null,this._paginationSizeChangeHandle.remove())},
_setPageSizeOptions:function(a){this.pageSizeOptions=a&&a.sort(function(a,b){return a-b});this._updatePaginationSizeSelect()},_updateRowsPerPageOption:function(){var a=this.rowsPerPage,b=this.pageSizeOptions,c=this.paginationSizeSelect;c&&(0>k.indexOf(b,a)?this._setPageSizeOptions(b.concat([a])):c.value=""+a)},_setRowsPerPage:function(a){this.rowsPerPage=a;this._updateRowsPerPageOption();this.gotoPage(1)},_updateNavigation:function(a){function e(a,b){var e;k.pagingTextBox&&a===m&&1<G?(b=d.create("input",
{"aria-label":r.jumpPage,className:"dgrid-page-input",type:"text",value:m},u),k._pagingTextBoxHandle=c(b,"change",function(){var a=+this.value;!isNaN(a)&&0<a&&a<=G&&k.gotoPage(+this.value)}),D&&"INPUT"===D.tagName&&b.focus()):(e=a===m,b=d.create("span",{"aria-label":r.gotoPage,className:"dgrid-page-link"+(e?" dgrid-page-disabled":""),innerHTML:a+(b?" ":""),tabIndex:e?-1:0},u),H===a&&(e?a<G?H++:J.focus():b.focus()),e||(J=b))}function h(a,c){b.toggle(a,"dgrid-page-disabled",c);a.tabIndex=c?-1:0}function p(){d.create("span",
{className:"dgrid-page-skip",innerHTML:"..."},u)}var k=this,r=this.i18nPagination,u=this.paginationLinksNode,m=this._currentPage,n=this.pagingLinks,w=this.paginationNavigationNode,G=Math.ceil(a/this.rowsPerPage);a=this._pagingTextBoxHandle;var D=document.activeElement,H,J;D&&q.contains(this.paginationNavigationNode,D)?"dgrid-page-link"===D.className&&(H=+D.innerHTML):D=null;a&&a.remove();u.innerHTML="";g(".dgrid-first, .dgrid-previous",w).forEach(function(a){h(a,1===m)});g(".dgrid-last, .dgrid-next",
w).forEach(function(a){h(a,m>=G)});if(n&&0<G){e(1,!0);w=m-n;for(2<w?p():w=2;w<Math.min(m+n+1,G);w++)e(w,!0);m+n+1<G&&p();1<G&&e(G)}else k.pagingTextBox&&e(m);D&&-1===D.tabIndex&&(n=g('[tabindex\x3d"0"]',this.paginationNavigationNode),D===this.paginationPreviousNode||D===this.paginationFirstNode?D=n[0]:n.length&&(D=n[n.length-1]),D&&D.focus())},_updatePaginationStatus:function(a){var b=this.rowsPerPage,c=Math.min(a,(this._currentPage-1)*b+1);this.paginationStatusNode.innerHTML=p.substitute(this.i18nPagination.status,
{start:c,end:Math.min(a,c+b-1),total:a})},refresh:function(a){var b=this,e=a&&a.keepCurrentPage?Math.min(this._currentPage,Math.ceil(this._total/this.rowsPerPage)):1;this.inherited(arguments);return this.gotoPage(e).then(function(a){setTimeout(function(){c.emit(b.domNode,"dgrid-refresh-complete",{bubbles:!0,cancelable:!1,grid:b})},0);return a})},_onNotification:function(a,b,c){a=this.rowsPerPage;var e=this._currentPage*a;"add"===b.type&&b.index<e||"delete"===b.type&&b.previousIndex<e||"update"===
b.type&&Math.floor(b.index/a)!==Math.floor(b.previousIndex/a)?this.gotoPage(Math.min(this._currentPage,Math.ceil(b.totalLength/this.rowsPerPage))):c===this._renderedCollection&&b.totalLength!==this._total&&(this._updatePaginationStatus(b.totalLength),this._updateNavigation(b.totalLength))},renderQueryResults:function(a,b){var c=this,e=this.inherited(arguments);b||(this._topLevelRequest&&(this._topLevelRequest.cancel(),delete this._topLevelRequest),"function"===typeof e.cancel&&(this._topLevelRequest=
e),e.then(function(){c._topLevelRequest&&delete c._topLevelRequest}));return e},insertRow:function(){var a=this._oldPageNodes,b=this.inherited(arguments);a&&b===a[b.id]&&delete a[b.id];return b},gotoPage:function(a){var b=this,c=(this._currentPage-1)*this.rowsPerPage;if(!this._renderedCollection)return e([]);this._renderedCollection.releaseRange&&this._renderedCollection.releaseRange(c,c+this.rowsPerPage);return this._trackError(function(){var c=b.rowsPerPage,e=(a-1)*c,g={start:e,count:c},h,q=b.contentNode,
p,k,r;if(b.showLoadingMessage)u(b),b.loadingNode=d.create("div",{className:"dgrid-loading",innerHTML:b.loadingMessage},q);else for(b._oldPageNodes=p={},q=q.children,k=0,r=q.length;k<r;k++)p[q[k].id]=q[k];b._isLoading=!0;h=b._renderedCollection.fetchRange({start:e,end:e+c});return b.renderQueryResults(h,null,g).then(function(g){w(b);b.scrollTo({y:0});b._rows&&(b._rows.min=e,b._rows.max=e+c-1);h.totalLength.then(function(c){c||(b.noDataNode&&(d.destroy(b.noDataNode),delete b.noDataNode),b.noDataNode=
d.create("div",{className:"dgrid-no-data",innerHTML:b.noDataMessage},b.contentNode));b._total=c;b._currentPage=a;b._rowsOnPage=g.length;b._updatePaginationStatus(c);b._updateNavigation(c)});return h},function(a){w(b);throw a;})})}})})},"dojo/data/ItemFileWriteStore":function(){define("../_base/lang ../_base/declare ../_base/array ../_base/json ../_base/kernel ./ItemFileReadStore ../date/stamp".split(" "),function(n,m,k,h,d,b,c){return m("dojo.data.ItemFileWriteStore",b,{constructor:function(b){this._features["dojo.data.api.Write"]=
!0;this._features["dojo.data.api.Notification"]=!0;this._pending={_newItems:{},_modifiedItems:{},_deletedItems:{}};this._datatypeMap.Date.serialize||(this._datatypeMap.Date.serialize=function(b){return c.toISOString(b,{zulu:!0})});b&&!1===b.referenceIntegrity&&(this.referenceIntegrity=!1);this._saveInProgress=!1},referenceIntegrity:!0,_assert:function(b){if(!b)throw Error("assertion failed in ItemFileWriteStore");},_getIdentifierAttribute:function(){return this.getFeatures()["dojo.data.api.Identity"]},
newItem:function(b,c){this._assert(!this._saveInProgress);this._loadFinished||this._forceLoad();if("object"!=typeof b&&"undefined"!=typeof b)throw Error("newItem() was passed something other than an object");var a=null,e=this._getIdentifierAttribute();if(e===Number)a=this._arrayOfAllItems.length;else{a=b[e];if("undefined"===typeof a)throw Error("newItem() was not passed an identity for the new item");if(n.isArray(a))throw Error("newItem() was not passed an single-valued identity");}this._itemsByIdentity&&
this._assert("undefined"===typeof this._itemsByIdentity[a]);this._assert("undefined"===typeof this._pending._newItems[a]);this._assert("undefined"===typeof this._pending._deletedItems[a]);var g={};g[this._storeRefPropName]=this;g[this._itemNumPropName]=this._arrayOfAllItems.length;this._itemsByIdentity&&(this._itemsByIdentity[a]=g,g[e]=[a]);this._arrayOfAllItems.push(g);e=null;if(c&&c.parent&&c.attribute){var e={item:c.parent,attribute:c.attribute,oldValue:void 0},d=this.getValues(c.parent,c.attribute);
if(d&&0<d.length){var h=d.slice(0,d.length);e.oldValue=1===d.length?d[0]:d.slice(0,d.length);h.push(g);this._setValueOrValues(c.parent,c.attribute,h,!1);e.newValue=this.getValues(c.parent,c.attribute)}else this._setValueOrValues(c.parent,c.attribute,g,!1),e.newValue=g}else g[this._rootItemPropName]=!0,this._arrayOfTopLevelItems.push(g);this._pending._newItems[a]=g;for(var p in b){if(p===this._storeRefPropName||p===this._itemNumPropName)throw Error("encountered bug in ItemFileWriteStore.newItem");
c=b[p];n.isArray(c)||(c=[c]);g[p]=c;if(this.referenceIntegrity)for(a=0;a<c.length;a++)d=c[a],this.isItem(d)&&this._addReferenceToMap(d,g,p)}this.onNew(g,e);return g},_removeArrayElement:function(b,c){c=k.indexOf(b,c);return-1!=c?(b.splice(c,1),!0):!1},deleteItem:function(b){this._assert(!this._saveInProgress);this._assertIsItem(b);var c=b[this._itemNumPropName],a=this.getIdentity(b);if(this.referenceIntegrity){var e=this.getAttributes(b);b[this._reverseRefMap]&&(b["backup_"+this._reverseRefMap]=n.clone(b[this._reverseRefMap]));
k.forEach(e,function(a){k.forEach(this.getValues(b,a),function(c){this.isItem(c)&&(b["backupRefs_"+this._reverseRefMap]||(b["backupRefs_"+this._reverseRefMap]=[]),b["backupRefs_"+this._reverseRefMap].push({id:this.getIdentity(c),attr:a}),this._removeReferenceFromMap(c,b,a))},this)},this);if(e=b[this._reverseRefMap])for(var g in e){var d=null;if(d=this._itemsByIdentity?this._itemsByIdentity[g]:this._arrayOfAllItems[g])for(var h in e[g]){var r=this.getValues(d,h)||[],m=k.filter(r,function(b){return!(this.isItem(b)&&
this.getIdentity(b)==a)},this);this._removeReferenceFromMap(b,d,h);m.length<r.length&&this._setValueOrValues(d,h,m,!0)}}}this._arrayOfAllItems[c]=null;b[this._storeRefPropName]=null;this._itemsByIdentity&&delete this._itemsByIdentity[a];this._pending._deletedItems[a]=b;b[this._rootItemPropName]&&this._removeArrayElement(this._arrayOfTopLevelItems,b);this.onDelete(b);return!0},setValue:function(b,c,a){return this._setValueOrValues(b,c,a,!0)},setValues:function(b,c,a){return this._setValueOrValues(b,
c,a,!0)},unsetAttribute:function(b,c){return this._setValueOrValues(b,c,[],!0)},_setValueOrValues:function(b,c,a,e){this._assert(!this._saveInProgress);this._assertIsItem(b);this._assert(n.isString(c));this._assert("undefined"!==typeof a);var g=this._getIdentifierAttribute();if(c==g)throw Error("ItemFileWriteStore does not have support for changing the value of an item's identifier.");var g=this._getValueOrValues(b,c),d=this.getIdentity(b);if(!this._pending._modifiedItems[d]){var h={},p;for(p in b)h[p]=
p===this._storeRefPropName||p===this._itemNumPropName||p===this._rootItemPropName?b[p]:p===this._reverseRefMap?n.clone(b[p]):b[p].slice(0,b[p].length);this._pending._modifiedItems[d]=h}d=!1;if(n.isArray(a)&&0===a.length){if(d=delete b[c],a=void 0,this.referenceIntegrity&&g){p=g;n.isArray(p)||(p=[p]);for(var m=0;m<p.length;m++)h=p[m],this.isItem(h)&&this._removeReferenceFromMap(h,b,c)}}else{d=n.isArray(a)?a.slice(0,a.length):[a];if(this.referenceIntegrity)if(g){p=g;n.isArray(p)||(p=[p]);var x={};k.forEach(p,
function(a){this.isItem(a)&&(a=this.getIdentity(a),x[a.toString()]=!0)},this);k.forEach(d,function(a){if(this.isItem(a)){var e=this.getIdentity(a);x[e.toString()]?delete x[e.toString()]:this._addReferenceToMap(a,b,c)}},this);for(m in x)this._removeReferenceFromMap(this._itemsByIdentity?this._itemsByIdentity[m]:this._arrayOfAllItems[m],b,c)}else for(m=0;m<d.length;m++)h=d[m],this.isItem(h)&&this._addReferenceToMap(h,b,c);b[c]=d;d=!0}if(e)this.onSet(b,c,g,a);return d},_addReferenceToMap:function(b,
c,a){c=this.getIdentity(c);var e=b[this._reverseRefMap];e||(e=b[this._reverseRefMap]={});(b=e[c])||(b=e[c]={});b[a]=!0},_removeReferenceFromMap:function(b,c,a){c=this.getIdentity(c);var e=b[this._reverseRefMap],g;if(e){for(g in e)g==c&&(delete e[g][a],this._isEmpty(e[g])&&delete e[g]);this._isEmpty(e)&&delete b[this._reverseRefMap]}},_dumpReferenceMap:function(){var b;for(b=0;b<this._arrayOfAllItems.length;b++);},_getValueOrValues:function(b,c){var a=void 0;this.hasAttribute(b,c)&&(b=this.getValues(b,
c),a=1==b.length?b[0]:b);return a},_flatten:function(b){if(this.isItem(b))return{_reference:this.getIdentity(b)};if("object"===typeof b)for(var c in this._datatypeMap){var a=this._datatypeMap[c];if(n.isObject(a)&&!n.isFunction(a)){if(b instanceof a.type){if(!a.serialize)throw Error("ItemFileWriteStore:  No serializer defined for type mapping: ["+c+"]");return{_type:c,_value:a.serialize(b)}}}else if(b instanceof a)return{_type:c,_value:b.toString()}}return b},_getNewFileContentString:function(){var b=
{},c=this._getIdentifierAttribute();c!==Number&&(b.identifier=c);this._labelAttr&&(b.label=this._labelAttr);b.items=[];for(c=0;c<this._arrayOfAllItems.length;++c){var a=this._arrayOfAllItems[c];if(null!==a){var e={},d;for(d in a)if(d!==this._storeRefPropName&&d!==this._itemNumPropName&&d!==this._reverseRefMap&&d!==this._rootItemPropName){var k=this.getValues(a,d);if(1==k.length)e[d]=this._flatten(k[0]);else for(var m=[],r=0;r<k.length;++r)m.push(this._flatten(k[r])),e[d]=m}b.items.push(e)}}return h.toJson(b,
!0)},_isEmpty:function(b){var c=!0;if(n.isObject(b))for(var a in b){c=!1;break}else n.isArray(b)&&0<b.length&&(c=!1);return c},save:function(b){this._assert(!this._saveInProgress);this._saveInProgress=!0;var c=this,a=function(){c._pending={_newItems:{},_modifiedItems:{},_deletedItems:{}};c._saveInProgress=!1;b&&b.onComplete&&b.onComplete.call(b.scope||d.global)},e=function(a){c._saveInProgress=!1;b&&b.onError&&b.onError.call(b.scope||d.global,a)};if(this._saveEverything){var g=this._getNewFileContentString();
this._saveEverything(a,e,g)}this._saveCustom&&this._saveCustom(a,e);this._saveEverything||this._saveCustom||a()},revert:function(){this._assert(!this._saveInProgress);for(var b in this._pending._modifiedItems){var c=this._pending._modifiedItems[b],a=null,a=this._itemsByIdentity?this._itemsByIdentity[b]:this._arrayOfAllItems[b];c[this._storeRefPropName]=this;for(var e in a)delete a[e];n.mixin(a,c)}var d;for(b in this._pending._deletedItems)d=this._pending._deletedItems[b],d[this._storeRefPropName]=
this,c=d[this._itemNumPropName],d["backup_"+this._reverseRefMap]&&(d[this._reverseRefMap]=d["backup_"+this._reverseRefMap],delete d["backup_"+this._reverseRefMap]),this._arrayOfAllItems[c]=d,this._itemsByIdentity&&(this._itemsByIdentity[b]=d),d[this._rootItemPropName]&&this._arrayOfTopLevelItems.push(d);for(b in this._pending._deletedItems)d=this._pending._deletedItems[b],d["backupRefs_"+this._reverseRefMap]&&(k.forEach(d["backupRefs_"+this._reverseRefMap],function(a){this._addReferenceToMap(this._itemsByIdentity?
this._itemsByIdentity[a.id]:this._arrayOfAllItems[a.id],d,a.attr)},this),delete d["backupRefs_"+this._reverseRefMap]);for(b in this._pending._newItems)c=this._pending._newItems[b],c[this._storeRefPropName]=null,this._arrayOfAllItems[c[this._itemNumPropName]]=null,c[this._rootItemPropName]&&this._removeArrayElement(this._arrayOfTopLevelItems,c),this._itemsByIdentity&&delete this._itemsByIdentity[b];this._pending={_newItems:{},_modifiedItems:{},_deletedItems:{}};return!0},isDirty:function(b){return b?
(b=this.getIdentity(b),(new Boolean(this._pending._newItems[b]||this._pending._modifiedItems[b]||this._pending._deletedItems[b])).valueOf()):!this._isEmpty(this._pending._newItems)||!this._isEmpty(this._pending._modifiedItems)||!this._isEmpty(this._pending._deletedItems)},onSet:function(b,c,a,e){},onNew:function(b,c){},onDelete:function(b){},close:function(b){if(this.clearOnClose){if(this.isDirty())throw Error("dojo.data.ItemFileWriteStore: There are unsaved changes present in the store.  Please save or revert the changes before invoking close.");
this.inherited(arguments)}}})})},"dojox/color":function(){define(["./color/_base"],function(n){return n})},"xide/manager/ManagerBase":function(){define("dcl/dcl xide/mixins/EventedMixin xide/model/Base xide/utils dojo/_base/xhr dojo/_base/kernel".split(" "),function(n,m,k,h,d,b){m=n([k.dcl,m.dcl],{declaredClass:"xide.manager.ManagerBase",ctx:null,init:function(){this.initReload&&this.initReload()},_getText:function(b,g){var c;g=h.mixin({url:b,sync:!0,handleAs:"text",load:function(a){c=a}},g);b=d.get(g);
return g.sync?""+c+"":b},getContext:function(){return this.ctx}});n.chainAfter(m,"init");return m})},"xideve/component":function(){define("dcl/dcl xide/model/Component xide/utils dojo/has require xideve/delite/Template dojo/Deferred xaction/ActionProvider".split(" "),function(n,m,k,h,d,b,c,g){return n([m,g.dcl],{cmdOffset:"",userBaseUrl:"",ctx:null,getDependencies:function(){return"dcl/dcl davinci/davinci_ xdojo/declare xdojo/has xideve/types xideve/views/VisualEditor xideve/Embedded xide/widgets/ExpressionJavaScript xideve/manager/WidgetManager xideve/manager/ContextManager xideve/Templates xideve/Template".split(" ")},
getLabel:function(){return"xideve"},getBeanType:function(){return this.getLabel()},run:function(){this.userBaseUrl||(this.userBaseUrl=dojo.baseUrl);this.registerEditors()},_started:!1,onCreateEditor:function(){var b=new c;if(this._started)b.resolve();else{var a=this;(new (d("xideve/Embedded"))).start(this.ctx,!1,this.cmdOffset,this.userBaseUrl).then(function(c){a._started=!0;b.resolve()}.bind(this))}return b},registerEditors:function(){var c=k.getObject("xideve/views/VisualEditor"),a=k.getObject("xideve/manager/WidgetManager"),
e=k.getObject("xideve/manager/ContextManager"),g=this.ctx;c.component=this;a.component=this;e.component=this;this.ctx.registerEditorExtension("Visual Editor","cfhtml","fa-laptop",this,!0,null,c,{updateOnSelection:!1,leftLayoutContainer:null,rightLayoutContainer:null,ctx:this.ctx,mainView:this.ctx.mainView});var d=this.ctx.getResourceManager(),h=d.getVariable("BASE_URL"),h=b.create(h,h+"xibm/ibm/",h,"bootstrap",d.getVariable("APP_URL")),r=k.getObject("xideve/Template"),d=k.getObject("xideve/Templates"),
h=new r(k.mixin({resourceDelegate:this.ctx.getResourceManager(),ctx:this.ctx,getDependencies:function(){return[this.contextClass]},bootstrapModules:""},h));d.register("delite",h);this.ctx.registerEditorExtension("Visual Editor","dhtml","fa-laptop",this,!0,null,c,{updateOnSelection:!1,leftLayoutContainer:null,rightLayoutContainer:null,ctx:this.ctx,mainView:this.ctx.mainView,beanContextName:this.ctx.mainView.beanContextName,template:h});this.ctx.registerEditorExtension("Visual Editor","html","fa-laptop",
this,!1,null,c,{updateOnSelection:!1,leftLayoutContainer:null,rightLayoutContainer:null,ctx:this.ctx,mainView:this.ctx.mainView,beanContextName:this.ctx.mainView.beanContextName,template:h});this.ctx.registerEditorExtension("New Window","html|cfhtml|dhtml","fa-globe",this,!1,function(a,b,c,e){a=g.getFileManager().getImageUrl(a,null,{viewer:"xideve"});window.open(a)});this.ctx.getWidgetManager()||(this.ctx.widgetManager=this.ctx.createManager(a,null),this.ctx.widgetManager.init());this.ctx.getContextManager()||
(this.ctx.contextManager=this.ctx.createManager(e,null),this.ctx.contextManager.init())},onReady:function(){this.registerEditors()}})})},"dijit/_base/focus":function(){define(["../main"],function(n){return n})},"dgrid/OnDemandGrid":function(){define(["dojo/_base/declare","./Grid","./OnDemandList"],function(n,m,k){return n([m,k],{})})},"xide/widgets/TemplatedWidgetBase":function(){define(["dcl/dcl","xide/utils","xide/_base/_Widget"],function(n,m,k){k=n([k],{declaredClass:"xide.widgets.TemplatedWidgetBase",
data:null,delegate:null,didLoad:!1,templateString:null,getParent:function(){return this._parent},debounce:function(h,d,b,c,g){return m.debounce(this,h,d,b,c,g)},translate:function(h){return this.localize(h)},_setupTranslations:function(){this._messages=[]},updateTitleNode:function(h){}});n.chainAfter(k,"startup");n.chainAfter(k,"destroy");return k})},"dojo/on":function(){define(["./has!dom-addeventlistener?:./aspect","./_base/kernel","./sniff"],function(n,m,k){function h(a,b,c,e,d){if(e=b.match(/(.*):(.*)/))return b=
e[2],e=e[1],g.selector(e,b).call(d,a,c);k("touch")&&(p.test(b)&&(c=E(c)),k("event-orientationchange")||"orientationchange"!=b||(b="resize",a=window,c=E(c)));w&&(c=w(c));if(a.addEventListener){var h=b in q,r=h?q[b]:b;a.addEventListener(r,c,h);return{type:b,remove:function(){a.removeEventListener(r,c,h)}}}if(A&&a.attachEvent)return A(a,"on"+b,c);throw Error("Target must be an event emitter");}function d(){this.cancelable=!1;this.defaultPrevented=!0}function b(){this.bubbles=!1}var c=window.ScriptEngineMajorVersion;
k.add("jscript",c&&c()+ScriptEngineMinorVersion()/10);k.add("event-orientationchange",k("touch")&&!k("android"));k.add("event-stopimmediatepropagation",window.Event&&!!window.Event.prototype&&!!window.Event.prototype.stopImmediatePropagation);k.add("event-focusin",function(a,b,c){return!!c.attachEvent});var g=function(a,b,c,e){return"function"!=typeof a.on||"function"==typeof b||a.nodeType?g.parse(a,b,c,h,e,this):a.on(b,c)};g.pausable=function(a,b,c,e){var d;a=g(a,b,function(){if(!d)return c.apply(this,
arguments)},e);a.pause=function(){d=!0};a.resume=function(){d=!1};return a};g.once=function(a,b,c,e){var d=g(a,b,function(){d.remove();return c.apply(this,arguments)});return d};g.parse=function(a,b,c,e,g,d){if(b.call)return b.call(d,a,c);if(-1<b.indexOf(",")){b=b.split(/\s*,\s*/);for(var h=[],q=0,p;p=b[q++];)h.push(e(a,p,c,g,d));h.remove=function(){for(var a=0;a<h.length;a++)h[a].remove()};return h}return e(a,b,c,g,d)};var p=/^touch/;g.selector=function(a,b,c){return function(e,d){function h(b){for(q=
q&&q.matches?q:m.query;!q.matches(b,a,e);)if(b==e||!1===c||!(b=b.parentNode)||1!=b.nodeType)return;return b}var q="function"==typeof a?{matches:a}:this,p=b.bubble;return p?g(e,p(h),d):g(e,b,function(a){var b=h(a.target);return b&&d.call(b,a)})}};var a=[].slice,e=g.emit=function(c,e,g){var h=a.call(arguments,2),q="on"+e;if("parentNode"in c){var p=h[0]={},k;for(k in g)p[k]=g[k];p.preventDefault=d;p.stopPropagation=b;p.target=c;p.type=e;g=p}do c[q]&&c[q].apply(c,h);while(g&&g.bubbles&&(c=c.parentNode));
return g&&g.cancelable&&g},q=k("event-focusin")?{}:{focusin:"focus",focusout:"blur"};if(!k("event-stopimmediatepropagation"))var u=function(){this.modified=this.immediatelyStopped=!0},w=function(a){return function(b){if(!b.immediatelyStopped)return b.stopImmediatePropagation=u,a.apply(this,arguments)}};if(k("dom-addeventlistener"))g.emit=function(a,b,c){if(a.dispatchEvent&&document.createEvent){var d=a.ownerDocument.createEvent("HTMLEvents");d.initEvent(b,!!c.bubbles,!!c.cancelable);for(var h in c)h in
d||(d[h]=c[h]);return a.dispatchEvent(d)&&d}return e.apply(g,arguments)};else{g._fixEvent=function(a,b){a||(a=(b&&(b.ownerDocument||b.document||b).parentWindow||window).event);if(!a)return a;try{r&&a.type==r.type&&a.srcElement==r.target&&(a=r)}catch(D){}if(!a.target)switch(a.target=a.srcElement,a.currentTarget=b||a.srcElement,"mouseover"==a.type&&(a.relatedTarget=a.fromElement),"mouseout"==a.type&&(a.relatedTarget=a.toElement),a.stopPropagation||(a.stopPropagation=z,a.preventDefault=y),a.type){case "keypress":b=
"charCode"in a?a.charCode:a.keyCode,10==b?(b=0,a.keyCode=13):13==b||27==b?b=0:3==b&&(b=99),a.charCode=b,b=a,b.keyChar=b.charCode?String.fromCharCode(b.charCode):"",b.charOrCode=b.keyChar||b.keyCode}return a};var r,v=function(a){this.handle=a};v.prototype.remove=function(){delete _dojoIEListeners_[this.handle]};var x=function(a){return function(b){b=g._fixEvent(b,this);var c=a.call(this,b);b.modified&&(r||setTimeout(function(){r=null}),r=b);return c}},A=function(a,b,c){c=x(c);if(((a.ownerDocument?
a.ownerDocument.parentWindow:a.parentWindow||a.window||window)!=top||5.8>k("jscript"))&&!k("config-_allow_leaks")){"undefined"==typeof _dojoIEListeners_&&(_dojoIEListeners_=[]);var e=a[b];if(!e||!e.listeners){var g=e,e=Function("event","var callee \x3d arguments.callee; for(var i \x3d 0; i\x3ccallee.listeners.length; i++){var listener \x3d _dojoIEListeners_[callee.listeners[i]]; if(listener){listener.call(this,event);}}");e.listeners=[];a[b]=e;e.global=this;g&&e.listeners.push(_dojoIEListeners_.push(g)-
1)}e.listeners.push(a=e.global._dojoIEListeners_.push(c)-1);return new v(a)}return n.after(a,b,c,!0)},z=function(){this.cancelBubble=!0},y=g._preventDefault=function(){this.bubbledKeyCode=this.keyCode;if(this.ctrlKey)try{this.keyCode=0}catch(F){}this.defaultPrevented=!0;this.returnValue=!1;this.modified=!0}}if(k("touch"))var B=function(){},C=window.orientation,E=function(a){return function(b){var c=b.corrected;if(!c){var e=b.type;try{delete b.type}catch(N){}if(b.type){if(k("mozilla")){var c={},g;
for(g in b)c[g]=b[g]}else B.prototype=b,c=new B;c.preventDefault=function(){b.preventDefault()};c.stopPropagation=function(){b.stopPropagation()}}else c=b,c.type=e;b.corrected=c;if("resize"==e){if(C==window.orientation)return null;C=window.orientation;c.type="orientationchange";return a.call(this,c)}"rotation"in c||(c.rotation=0,c.scale=1);var e=c.changedTouches[0],d;for(d in e)delete c[d],c[d]=e[d]}return a.call(this,c)}};return g})},"xide/mixins/ResourceMixin":function(){define(["xdojo/declare",
"xide/utils","dojo/Deferred"],function(n,m,k){function h(){}function d(a,b){if(a){"object"===typeof a&&(a=[].slice.call(a));for(var c=0,e=a.length;c<e;c++)b.call(a,a[c],c)}}function b(a,b){var c=Object.prototype.toString.call(b).slice(8,-1);return void 0!==b&&null!==b&&c===a}function c(a){return b("Function",a)}function g(a){a=a||h;a._done||(a(),a._done=1)}function p(a){var b={};if("object"===typeof a)for(var c in a)a[c]&&(b={name:c,url:a[c]});else b=a.split("/"),b=b[b.length-1],c=b.indexOf("?"),
b={name:-1!==c?b.substring(0,c):b,url:a};return(a=C[b.name])&&a.url===b.url?a:C[b.name]=b}function a(a){a=a||C;for(var b in a)if(a.hasOwnProperty(b)&&4!==a[b].state)return!1;return!0}function e(a){a.state=2;d(a.onpreload,function(a){a.call()})}function q(a,b){void 0===a.state&&(a.state=1,a.onpreload=[],v({url:a.url,type:"cache"},function(){e(a)}))}function u(){var a=arguments,b=[].slice.call(a,1),e=b[0];if(!E)return y.push(function(){D.load.apply(null,a)}),D;e?(d(b,function(a){!c(a)&&a&&q(p(a))}),
r(p(a[0]),c(e)?e:function(){D.load.apply(null,b)})):r(p(a[0]));return D}function w(){var e=arguments,h=e[e.length-1],q={};c(h)||(h=null);if(b("Array",e[0]))return e[0].push(h),D.load.apply(null,e[0]),D;d(e,function(a,b){a!==h&&(a=p(a),q[a.name]=a)});d(e,function(b,c){b!==h&&(b=p(b),r(b,function(){a(q)&&g(h)}))});return D}function r(b,c){c=c||h;4===b.state?c():3===b.state?D.ready(b.name,c):1===b.state?b.onpreload.push(function(){r(b,c)}):(b.state=3,v(b,function(){b.state=4;c();d(B[b.name],function(a){g(a)});
F&&a()&&d(B.ALL,function(a){g(a)})}))}function v(a,b){var c=new k;b=b||h;var e;/\.css[^\.]*$/.test(a.url)?(e=A.createElement("link"),e.type="text/"+(a.type||"css"),e.rel="stylesheet",e.href=a.url):(e=A.createElement("script"),e.type="text/"+(a.type||"javascript"),e.src=a.url);e.onload=e.onreadystatechange=function(g){g=g||x.event;if("load"===g.type||/loaded|complete/.test(e.readyState)&&(!A.documentMode||9>A.documentMode))e.onload=e.onreadystatechange=e.onerror=null,b(),c.resolve({asset:a,node:e})};
e.onerror=function(g){g=g||x.event;e.onload=e.onreadystatechange=e.onerror=null;b();c.reject({asset:a,error:g})};e.async=!1;e.defer=!1;var g=A.head||A.getElementsByTagName("head")[0];g.insertBefore(e,g.lastChild);return c}var x=window,A=x.document,z=[],y=[],B={},C={};m="async"in A.createElement("script")||"MozAppearance"in A.documentElement.style||x.opera;var E,F,G=x.head_conf&&x.head_conf.head||"head",D=x[G]=x[G]||function(){D.ready.apply(null,arguments)};D.load=D.js=m?w:u;D.test=function(a,c,e,
g){a="object"===typeof a?a:{test:a,success:c?b("Array",c)?c:[c]:!1,failure:e?b("Array",e)?e:[e]:!1,callback:g||h};(c=!!a.test)&&a.success?(a.success.push(a.callback),D.load.apply(null,a.success)):!c&&a.failure?(a.failure.push(a.callback),D.load.apply(null,a.failure)):g();return D};D.ready=function(e,h){if(e===A)return F?g(h):z.push(h),D;c(e)&&(h=e,e="ALL");if(b("Array",e)){var q={};d(e,function(b){q[b]=C[b];D.ready(b,function(){a(q)&&g(h)})});return D}if("string"!==typeof e||!c(h))return D;var p=
C[e];if(p&&4===p.state||"ALL"===e&&a()&&F)return g(h),D;(p=B[e])?p.push(h):p=B[e]=[h];return D};return n("xide/mixins/ResourceMixin",null,{loadResource:function(a){return v({name:a,url:a}).then(function(a){},function(a){console.error("error loading asset ",a)})}})})},"xnode/views/NodeServiceView":function(){define("dcl/dcl dojo/_base/declare dgrid/OnDemandGrid dgrid/Selection xide/types xide/utils xaction/Action xide/layout/Container".split(" "),function(n,m,k,h,d,b,c,g){return n(g,{declaredClass:"xide.views.NodeServiceView",
delegate:null,store:null,cssClass:"layoutContainer normalizedGridView",createWidgets:function(c){c=new (m([k,h,"Keyboard"]))({collection:c,columns:{Name:{field:"name",label:"Name",sortable:!0},Status:{field:"status",label:"Status",sortable:!0,formatter:function(a){var c='\x3cdiv style\x3d"color:${color}"\x3e'+b.capitalize(a)+"\x3c/div\x3e";return b.substituteString(c,{color:"offline"==a?"red":"green"})}},Clients:{field:"clients",label:"Clients",sortable:!0}}},this.containerNode);c.refresh();this.grid=
c;this.onGridCreated(c)},startup:function(){this.inherited(arguments);this.store&&this.createWidgets(this.store)},hasItemActions:function(){return null!=this.getCurrentSelection(!0)},getItem:function(){return this.getCurrentSelection(!0)},getItemActions:function(){var b=this.getItem()[0],a=[],e=this.delegate,g=b.status===d.SERVICE_STATUS.ONLINE,h=b.status==d.SERVICE_STATUS.OFFLINE?"start":"stop",k=b.status==d.SERVICE_STATUS.OFFLINE?"Start":"Stop",h=c.createDefault(k,b.status==d.SERVICE_STATUS.OFFLINE?
"el-icon-play":"el-icon-stop","Edit/"+k,"xnode",null,{handler:!1!==b.can[h]?"start"==h?function(a,c,g){e.onStart(a,[b],g)}:function(a,c,g){e.onStop(a,[b],g)}:null}).setVisibility(d.ACTION_VISIBILITY.ACTION_TOOLBAR,{label:""}).setVisibility(d.ACTION_VISIBILITY.MAIN_MENU,{}).setVisibility(d.ACTION_VISIBILITY.CONTEXT_MENU,{});a.push(h);h=c.createDefault("Reload","fa-refresh","Edit/Reload","xnode",null,{handler:function(){e.onReload()}}).setVisibility(d.ACTION_VISIBILITY.ACTION_TOOLBAR,{label:""}).setVisibility(d.ACTION_VISIBILITY.MAIN_MENU,
{}).setVisibility(d.ACTION_VISIBILITY.CONTEXT_MENU,{});a.push(h);g=c.createDefault("Console","el-icon-indent-left","View/Console","xnode",null,{handler:function(){e.openConsole(b)},widgetArgs:{disabled:!g}}).setVisibility(d.ACTION_VISIBILITY.ACTION_TOOLBAR,{label:""}).setVisibility(d.ACTION_VISIBILITY.MAIN_MENU,{}).setVisibility(d.ACTION_VISIBILITY.CONTEXT_MENU,{});a.push(g);return 0==a.length?null:a}})})},"preview/silhouetteiframe":function(){define([],function(){var n=function(m){var k=this.rootNode=
m.rootNode;if(k&&this.verifyDOMTree(!1)){this._isWebKit=-1!=navigator.userAgent.indexOf("WebKit");m.svgfilename&&(this.svgfilename=m.svgfilename);m.orientation&&(this.orientation=m.orientation);m.scalefactor&&(this.scalefactor=m.scalefactor);m.margin&&(this.margin=m.margin);this._silhouette_div_container_orig_style={};m=k.style;for(var h=0;h<m.length;h++)this._silhouette_div_container_orig_style[m.item(h)]=m[m.item(h)];0<k.querySelectorAll(".silhouetteiframe_iframe").length?this._init_silhouetteiframe_iframe_orig_style():
this._silhouetteiframe_iframe_orig_style=null;k._silhouetteiframe=this;this.addStyleDeclarations();this.updateObjectElement()}};n.prototype={rootNode:null,svgfilename:void 0,orientation:"portrait",scalefactor:1,margin:0,_object_elem:null,_silhouette_div_container_orig_style:{},_silhouetteiframe_iframe_orig_style:{},_init_silhouetteiframe_iframe_orig_style:function(){this._silhouetteiframe_iframe_orig_style={};for(var m=this.rootNode.querySelectorAll(".silhouetteiframe_iframe")[0].style,k=0;k<m.length;k++)this._silhouetteiframe_iframe_orig_style[m.item(k)]=
m[m.item(k)]},verifyDOMTree:function(m){var k=this.rootNode;if(k&&k.children&&k.children.length){var h=k.children[0];"loading"===k.children[0].className&&(h=k.children[1])}else return console.error("silhouetteiframe.verifyDOMTree(): no children on rootNode"),!1;if(m){if(2>k.children.length)return console.error("silhouetteiframe.verifyDOMTree(): iframe child not present"),!1;var d;d="loading"===k.children[0].className?k.children[2]:k.children[1]}return"DIV"==k.nodeName&&-1!=k.className.indexOf("silhouette_div_container")&&
h&&"SPAN"==h.nodeName&&-1!=h.className.indexOf("silhouetteiframe_object_container")&&(!m||d&&"IFRAME"==d.nodeName&&-1!=d.className.indexOf("silhouetteiframe_iframe"))?!0:(console.error("silhouetteiframe.verifyDOMTree(): incorrect DOM tree on rootNode"),!1)},addStyleDeclarations:function(){if(0==document.querySelectorAll("style.silhouetteiframe_styles").length){var m=document.querySelectorAll("head")[0];if(m){var k=document.createElement("style");k.setAttribute("type","text/css");k.setAttribute("class",
"silhouetteiframe_styles");k.innerHTML=".silhouetteiframe_div_container { display:inline-block; text-align:left; }\n.silhouetteiframe_iframe { position:absolute; top:0px; left:0px; border:none; }";m.appendChild(k)}else console.error("silhouetteiframe.js addStyleDeclarations(): no HEAD element")}},_restoreStyle:function(m,k){if(m){for(var h=m.length-1;0<=h;h--)m.removeProperty(m.item(h));if(k)for(h in k)m[h]=k[h]}},updateObjectElement:function(){var m=this.rootNode.querySelectorAll(".silhouetteiframe_object_container",
this.rootNode);0!=m.length&&(m=m[0],m.innerHTML="",this.object_elem=null,this.svgfilename?this.verifyDOMTree(!0)&&(null===this._silhouetteiframe_iframe_orig_style&&this._init_silhouetteiframe_iframe_orig_style(),m.innerHTML='\x3cobject class\x3d"silhouetteiframe_object" data\x3d"'+this.svgfilename+'" type\x3d"image/svg+xml" onload\x3d"event.target.parentNode.parentNode._silhouetteiframe.svgloadhandler(event.target)"\x3e\x3c/object\x3e'):(this._restoreStyle(this.rootNode.style,this._silhouette_div_container_orig_style),
m=this.rootNode.querySelectorAll(".silhouetteiframe_iframe",this.rootNode),0<m.length&&this._restoreStyle(m[0].style,this._silhouetteiframe_iframe_orig_style)))},svgloadhandler:function(m){this._object_elem=m;var k=m.getSVGDocument();if(k&&k.documentURI==m.data)this._loadcounter=null,this._silhouette_reset_size_position(!1);else{if(this._loadcounter){if(5<=this._loadcounter){console.error("svgloadhandler failed after 5 tries");return}this._loadcounter++}else this._loadcounter=1;this.rootNode.style.display=
"none";var h=this;setTimeout(function(){h.rootNode.style.display="block";h._silhouette_reset_size_position(!1)},1)}},setSVGFilename:function(m){this.svgfilename=m;this.updateObjectElement()},setScaleFactor:function(m){this.scalefactor=m;this._isWebKit?this.updateObjectElement():this._silhouette_reset_size_position(!1)},setOrientation:function(m){this.orientation=m;this._silhouette_reset_size_position(!1)},_silhouette_reset_size_position:function(m){var k=this._object_elem;m=this.orientation;var h=
this.scalefactor;if(k){var d=k.getSVGDocument();if(d){var b=d.documentElement,c=this.rootNode.querySelector(".silhouetteiframe_iframe");if(c){var g=d.querySelector("#DeviceRect");if(g){var p=d.querySelector("#ScreenRect");if(p){var a=d.querySelector("#ResolutionRect");if(!(0>=h)){var e=this.rootNode,q=g.getAttribute("x")-0,u=g.getAttribute("y")-0,n=g.getAttribute("width")-0,r=g.getAttribute("height")-0,v=p.getAttribute("x")-0,x=p.getAttribute("y")-0,A=p.getAttribute("width")-0,z=p.getAttribute("height")-
0,y=v-q,B=x-u,C,E;if(a){var F=a.getAttribute("width")-0,G=a.getAttribute("height")-0;0<F&&0<G&&0<A&&0<z&&(C=F/A*h,E=G/z*h)}C||(C=E=4/3*h);g.style.display="none";p.style.display="none";a&&(a.style.display="none");obj_style=k.style;obj_style.overflow="hidden";var D=n*C,H=r*E,k=A*C,g=z*E,y=y*C;if(p=d.getElementById("g1_aqzpqtxv")){if(a=d.getElementById("g2_aqzpqtxv"),!a)return}else{p=d.createElementNS("http://www.w3.org/2000/svg","g");p.id="g1_aqzpqtxv";a=d.createElementNS("http://www.w3.org/2000/svg",
"g");a.id="g2_aqzpqtxv";p.appendChild(a);n=null;for(F=b.childNodes.length-1;0<=F;F--)n=a.insertBefore(b.childNodes[F],n);b.appendChild(p)}d=d.createElementNS("http://www.w3.org/2000/svg","rect");d.setAttribute("x",v+1);d.setAttribute("y",x+1);d.setAttribute("width",A-2);d.setAttribute("height",z-2);d.setAttribute("fill","lightgray");a.appendChild(d);e=e.style;e.position="relative";e.overflow="hidden";e.marginLeft="0px";e.marginTop="0px";v=c.style;x=c.contentDocument.body.style;c.contentDocument.documentElement.style.overflow=
"hidden";v.overflow="hidden";x.transformOrigin=x.WebkitTransformOrigin=x.MozTransformOrigin=x.msTransformOrigin="left top";x.transform=x.WebkitTransform=x.MozTransform=x.msTransform="scale("+h+")";x.width=100/h+"%";x.height=100/h+"%";"landscape"!==m?(b.setAttribute("width",D+"px"),b.setAttribute("height",H+"px"),b.setAttribute("viewBox","0 0 "+D+" "+H),v.marginLeft=y+"px",v.marginTop=B*E+"px",v.width=k+"px",v.height=g+"px",p.setAttribute("transform","translate(0 0) rotate(0)"),a.setAttribute("transform",
"scale("+C+","+E+") translate(-"+q+" -"+u+")"),obj_style.width=D+"px",obj_style.height=H+"px",e.width=D+"px",e.height=H+"px",setTimeout(function(){obj_style.width=Math.ceil(D+1)+"px";obj_style.height=Math.ceil(H+1)+"px"},10)):(b.setAttribute("width",H+"px"),b.setAttribute("height",D+"px"),b.setAttribute("viewBox","0 0 "+H+" "+D),v.marginLeft=(r-z-B)*E+"px",v.marginTop=y+"px",v.width=g+"px",v.height=k+"px",p.setAttribute("transform","translate("+H+" 0) rotate(90)"),a.setAttribute("transform","scale("+
C+","+E+") translate(-"+q+" -"+u+")"),obj_style.width=H+"px",obj_style.height=D+"px",e.width=H+"px",e.height=D+"px",setTimeout(function(){obj_style.width=Math.ceil(H+1)+"px";obj_style.height=Math.ceil(D+1)+"px"},10))}}}}}}}};n.themeMap={"android_340x480.svg":"Android","android_480x800.svg":"Android","androidtablet.svg":"Android","bbplaybook.svg":"BlackBerry","blackberry.svg":"BlackBerry","ipad.svg":"iPad","iphone.svg":"iPhone"};n.themeCssMap={Android:["android/android.css"],BlackBerry:["blackberry/blackberry.css"],
iPad:["iphone/iphone.css","iphone/ipad.css"],iPhone:["iphone/iphone.css"]};n.getMobileTheme=function(m){return n.themeMap[m.split("/").pop()]};n.getMobileCss=function(m){return n.themeCssMap[m||"iPhone"]};return n})},"davinci/model/resource/Marker":function(){define(["dojo/_base/declare","davinci/model/resource/Resource"],function(n,m){return n("davinci.model.resource.Marker",m,{constructor:function(k,h,d,b){this.resource=k;this.type=h;this.line=d;this.text=b}})})},"dojo/window":function(){define("./_base/lang ./sniff ./_base/window ./dom ./dom-geometry ./dom-style ./dom-construct".split(" "),
function(n,m,k,h,d,b,c){m.add("rtl-adjust-position-for-verticalScrollBar",function(b,a){b=k.body(a);a=c.create("div",{style:{overflow:"scroll",overflowX:"visible",direction:"rtl",visibility:"hidden",position:"absolute",left:"0",top:"0",width:"64px",height:"64px"}},b,"last");var e=c.create("div",{style:{overflow:"hidden",direction:"ltr"}},a,"last"),g=0!=d.position(e).x;a.removeChild(e);b.removeChild(a);return g});m.add("position-fixed-support",function(b,a){b=k.body(a);a=c.create("span",{style:{visibility:"hidden",
position:"fixed",left:"1px",top:"1px"}},b,"last");var e=c.create("span",{style:{position:"fixed",left:"0",top:"0"}},a,"last"),g=d.position(e).x!=d.position(a).x;a.removeChild(e);b.removeChild(a);return g});var g={getBox:function(b){b=b||k.doc;var a="BackCompat"==b.compatMode?k.body(b):b.documentElement,c=d.docScroll(b);if(m("touch")){var h=g.get(b);b=h.innerWidth||a.clientWidth;a=h.innerHeight||a.clientHeight}else b=a.clientWidth,a=a.clientHeight;return{l:c.x,t:c.y,w:b,h:a}},get:function(b){if(9>
m("ie")&&g!==document.parentWindow){b.parentWindow.execScript("document._parentWindow \x3d window;","Javascript");var a=b._parentWindow;b._parentWindow=null;return a}return b.parentWindow||b.defaultView},scrollIntoView:function(c,a){try{c=h.byId(c);var e=c.ownerDocument||k.doc,g=k.body(e),p=e.documentElement||g.parentNode,n=m("ie"),r=m("webkit");if(c!=g&&c!=p)if(!(m("mozilla")||n||r||m("opera"))&&"scrollIntoView"in c)c.scrollIntoView(!1);else{var v="BackCompat"==e.compatMode,x=Math.min(g.clientWidth||
p.clientWidth,p.clientWidth||g.clientWidth),A=Math.min(g.clientHeight||p.clientHeight,p.clientHeight||g.clientHeight),e=r||v?g:p,z=a||d.position(c),y=c.parentNode;a=function(a){return 6>=n||7==n&&v?!1:m("position-fixed-support")&&"fixed"==b.get(a,"position").toLowerCase()};if(!a(c))for(;y;){y==g&&(y=e);var B=d.position(y),C=a(y),E="rtl"==b.getComputedStyle(y).direction.toLowerCase();if(y==e){B.w=x;B.h=A;e==p&&n&&E&&(B.x+=e.offsetWidth-B.w);if(0>B.x||!n||9<=n)B.x=0;if(0>B.y||!n||9<=n)B.y=0}else{var F=
d.getPadBorderExtents(y);B.w-=F.w;B.h-=F.h;B.x+=F.l;B.y+=F.t;var G=y.clientWidth,D=B.w-G;0<G&&0<D&&(E&&m("rtl-adjust-position-for-verticalScrollBar")&&(B.x+=D),B.w=G);G=y.clientHeight;D=B.h-G;0<G&&0<D&&(B.h=G)}C&&(0>B.y&&(B.h+=B.y,B.y=0),0>B.x&&(B.w+=B.x,B.x=0),B.y+B.h>A&&(B.h=A-B.y),B.x+B.w>x&&(B.w=x-B.x));var H=z.x-B.x,J=z.y-B.y,Q=H+z.w-B.w,N=J+z.h-B.h,O,P;0<Q*H&&(y.scrollLeft||y==e||y.scrollWidth>y.offsetHeight)&&(O=Math[0>H?"max":"min"](H,Q),E&&(8==n&&!v||9<=n)&&(O=-O),P=y.scrollLeft,y.scrollLeft+=
O,O=y.scrollLeft-P,z.x-=O);0<N*J&&(y.scrollTop||y==e||y.scrollHeight>y.offsetHeight)&&(O=Math.ceil(Math[0>J?"max":"min"](J,N)),P=y.scrollTop,y.scrollTop+=O,O=y.scrollTop-P,z.y-=O);y=y!=e&&!C&&y.parentNode}}}catch(L){console.error("scrollIntoView: "+L),c.scrollIntoView(!1)}}};n.setObject("dojo.window",g);return g})},"xblox/manager/BlockManager":function(){define("dcl/dcl dojo/has dojo/Deferred dojo/promise/all xide/types xide/utils xide/factory xblox/model/ModelBase xblox/model/Scope xblox/model/BlockModel xide/mixins/ReloadMixin xide/manager/ManagerBase xblox/data/Store xdojo/has!xblox-ui?xblox/manager/BlockManagerUI xide/lodash".split(" "),
function(n,m,k,h,d,b,c,g,p,a,e,q,u,w,r){return n([w,q,e.dcl],{declaredClass:"xblox/manager/BlockManager",serviceObject:null,loaded:{},test:function(){},scope:null,scopes:null,_createBlock:null,_registerActions:function(){},toScope:function(a){try{a=b.getJson(a)}catch(z){return console.error("BlockManager::toScope: failed,err\x3d"+z),null}a||(console.error("correct data"),a={blocks:[],variables:[]});var c=b.createUUID(),e=a;!r.isArray(a)&&r.isObject(a)&&(c=a.scopeId||c,e=a.blocks||[]);a=this.getScope(c,
{owner:this},!0);e=a.blocksFromJson(e);for(c=0;c<e.length;c++)e[c]._lastRunSettings={force:!1,highlight:!0};a.serviceObject=this.serviceObject;return a},loadFiles:function(a){for(var b=[],c=new k,e=0;e<a.length;e++){var g=a[e];b.push(this.load(g.mount,g.path,g.force))}h(b).then(function(a){c.resolve(a)});return c.promise},load:function(a,c,e){var g=new k,d=this,h=b.replaceAll("/","",a),q=b.replaceAll("./","",c),p=h+q,p=p.trim();this.loaded[p]&&!0===e&&(this.removeScope(this.loaded[p].id),this.loaded[p]=
null);if(!0!==e&&this.loaded[p])return g.resolve(this.loaded[p]),g.promise;this.ctx.getFileManager().getContent(h,q,function(b){if(b=d.toScope(b))d.loaded[p]=b,b.mount=a,b.path=c;g.resolve(b)},!1);return g.promise},onBlocksReady:function(a){for(var b=a.allBlocks(),c=0;c<b.length;c++)this.setScriptFunctions(b[c],a,this);if((a=a.getBlocks({group:"On Load"}))&&0<a.length)for(c=0;c<a.length;c++)if(b=a[c],b.onLoad)b.onLoad()},getBlock:function(){},setScriptFunctions:function(a,b,c){a.blockScope||(a.blockScope=
b);b.serviceObject=this.serviceObject;a.setVariable||(a.setVariable=function(e,g,h,q,p){if(e=this.blockScope.getVariable(e))e.value=g,!1!==q&&c.publish(d.EVENTS.ON_VARIABLE_CHANGED,{item:e,scope:b,driver:a,owner:c,save:!0===h,source:p||d.MESSAGE_SOURCE.BLOX})});a.getVariable||(a.getVariable=function(a){return(a=this.blockScope.getVariable(a))?a.value:""})},hasScope:function(a){this.scopes||(this.scopes={});return this.scopes[a]?this.scopes[a]:null},getScope:function(a,b,e){this.scopes||(this.scopes=
{});if(!this.scopes[a]&&(this.scopes[a]=this.createScope({id:a,ctx:this.ctx}),this.scopes[a].userData=b,!1!==e))try{c.publish(d.EVENTS.ON_SCOPE_CREATED,this.scopes[a])}catch(z){console.error("bad, scope creation failed "+z,z)}return this.scopes[a]},removeScope:function(a){this.scopes||(this.scopes={});for(var b in this.loaded)this.loaded[b].id==a&&delete this.loaded[b];this.scopes[a]&&(this.scopes[a]._destroy(),delete this.scopes[a]);return null},createScope:function(c,e,g){e=e||[];var d=new u({data:[],
Model:a,id:b.createUUID(),__events:{},observedProperties:["name","enabled","value"],getLabel:function(a){return a.name},labelAttr:"name"});d.reset();d.setData([]);d={owner:this,blockStore:d,serviceObject:this.serviceObject,config:this.config};b.mixin(d,c);try{var h=new p(d);e&&h.initWithData(e,g);h.init()}catch(B){logError(B,"error creating scope, data:",c)}return h},onReloaded:function(){},init:function(){this.scope={variables:[],blocks:[]};g.prototype.types=d;g.prototype.factory=c;if(this.onReady)this.onReady()}})})},
"davinci/repositoryinfo":function(){define({revision:"",buildtime:"@buildtime@"})},"davinci/lang/ui/ui":function(){define([],function(){return{dontShowAgain:"Don't show again",selectFile:"Select a file",openFile:"Open File",aboutMaqetta:"About Maqetta",productVersion:"Version: ${0}",productDate:"Date: ${0}",build:"Build: ${0}",library:"Library",version:"Version",include:"Include",source:"Source",baseLocation:"Base Location",invalidDownloadFileName:"File name may only contain letters, numbers, \x26#8216;_\x26#8216;, and \x26#8216;.\x26#8216;.",
selectedFiles:"Selected Files",noFilesSelected:"No files selected!",downloadButtonLabel:"Download",themeAlreadyExists:"Theme already Exists!",invalidThemeName:"Invalid theme name",errorCreatingTheme:"Error creating theme: ",creatingTheme:"Creating theme",noUserThemes:"No user themes found in workspace. Please create a new theme before editing.",themeSetsDialog:"Manage theme sets",renameThemeSet:"Rename theme set",themeSets:"Theme sets:",currentlySelectedThemeSet:"Currently selected theme set:",themeSetName:"Name:",
desktopTheme:"Dojo desktop 1.7 theme:",mobileTheme:"Dojo mobile 1.7 theme:",android:"Android:",blackberry:"Blackberry:",ipad:"iPad:",iphone:"iPhone:",other:"Other:",selectTheme:"Select theme",themeSet:"Theme set:",themeVersionMessage:"Theme version does not match workspace version this could produce unexpected results. We suggest recreating the custom theme using the current version of Maqetta and deleting the existing theme.",addThemeSet:"Add theme set",deleteThemeSet:"Delete theme set",workspaceLocation:"Workspace Location",
savingReadonlyFile:"This file is a read-only file. Please save it to a writeable location.",create:"Create",open:"Open",save:"Save",select:"Select",update:"Update",unknown:"unknown",fileName:"File name",folderName:"Folder name",parentFolder:"Parent folder: ",newFolderLabel:"New folder",cancelButtonLabel:"Cancel",newFolderName:"Name:",createFolder:"Create Folder",createNewFile:"Create New File",createMobileApplication:"Create a Mobile Application",createDesktopApplication:"Create a Desktop Application",
createSketchHiFi:"Create a Sketch (high-fidelity)",createSketchLoFi:"Create a Sketch (low-fidelity)",createNewCSSFile:"Create New CSS File",createNewJSFile:"Create New JavaScript File",createNewFolder:"Create New Folder",saveFileAs:"Save File As",downloadFile:"Download",selectFiles:"Select Files...",selectZip:"Select ZIP file...",upload:"Upload",addFiles:"Upload",uploading:"Uploading...",completed:"completed: ${0} \n",done:"Done",explodeZipWarning:"Warning: Contents of .zip files will overwrite any conflicting files in your workspace",
mustEnterFileName:"You must enter a file name.",cannotSelect:"Cannot select ${0}. It is a folder.",fileAlreadyExistsOverwrite:"File ${0} already exists. OK to overwrite?",cannotCreate:"Cannot create ${0}. It already Exists.",fileNameSlashCharacter:"File names cannot contain a slash character (/). Your file name is: ${0}",doesNotHaveExtension:"The name ${0} does not have an extension (e.g., .html, .css or .js) and will be treated as a plain text file. OK to proceed?",areYouSureDelete:"Are you sure you want to delete ${0}?",
areYouSureDeleteProject:"Are you sure you want to delete project ${0}?",noResourcesSelected:"No resources are currently selected.",optimizeOption:"Use Dojo Web Builder (experimental)",downloadFullSource:"Download uncompressed source for selected libraries (if available)",selectAll:"All",selectNone:"None",themeToClone:"Theme to clone",newName:"New Name",selectTheme:"Select a Theme",newProject:"New Project",renameProjectDialogTitle:"Rename Project To...",deleteProjectButtonTitle:"Delete Project",renameProjectButtonTitle:"Rename Project...",
deleteOnlyProjectError:"You can't delete the only project in your workspace!",newFileShowFiles:"Show file picker",newFileHideFiles:"Hide file picker",root:"(root)",nhfoDevice:"Device:",nhfoDeviceTooltip:"Select an initial mobile device",nhfoThemeButtonLabel:"Theme...",nhfoThemeButtonTitle:"Select themes or theme set for new HTML file",renameNewLabel:"Name:",renameButtonLabel:"Rename",renameDialogTitle:"Rename To...",createProject:"New project",createProjectMenuItem:"New project...",deleteProjectMenuItem:"Delete this project...",
renameProjectMenuItem:"Rename this project...",saveAsProjectTemplateMenuItem:"Save as project template...",manageProjectTemplatesMenuItem:"Manage project templates...",modifyLibrariesMenuItem:"Modify libraries...",modifyLibraries:"Modify libraries",projectColon:"Project:",ProjectMenu:"Project menu",newProjectName:"Name:",newProjectTemplate:"Template:",newProjectUseProjectTemplate:"Use project template",newProjectCloneExistingProject:"Copy files from current project into new project",newProjectEclipseSupport:"New project should be Eclipse-compatible",
newProjectNameExists:"A project with this name already exists",saveAsProjectTemplate:"Save as project template",newProjectTemplateName:"Project template name:",newProjectTemplateShareLabel:"Share with everyone",newProjectTemplateOverwrite:"Project template {0} already exists. OK to overwrite?",newProjectTemplateCreationSuccess:"Project template {0} has been saved",newProjectTemplateCreationFailure:"Error: Project template {0} save operation failed",newProjectTemplateCancelled:"Operation cancelled",
manageProjectTemplates:"Manage project templates",ManageProjectTemplatesHeaderName:"Project template name",ManageProjectTemplatesHeaderShared:"Share with everyone?",ManageProjectTemplatesHeaderCreatedBy:"Created by",ManageProjectTemplatesHeaderCreatedOn:"Created on",ManageProjectTemplatesHeaderLastModified:"Last updated",ManageProjectTemplatesNoTemplates:"You have no project templates.",ManageProjectTemplatesDuplicateNames:"Invalid entries - two project templates have the same name",ManageProjectTemplateAboutToOccur:"The following actions are about to occur:",
ManageProjectTemplateDeletions:"project template deletions",ManageProjectTemplateModifications:"project template modifications",ManageProjectTemplateOKToProceed:"OK to proceed?",ManageProjectTemplatesInitializing:"Initializing...",modify:"Modify",User:"Account",currentProject:"Current Project:",selectProject:"Select a Project:",NoteOperationNotUndoable:"Note: this operation is not undoable."}})},"xcf/views/ProtocolTreeView":function(){define("xdojo/declare xide/utils xide/types xgrid/Grid xgrid/TreeRenderer xaction/DefaultActions xgrid/KeyboardNavigation xide/widgets/_Widget xgrid/Search xaction/types".split(" "),
function(n,m,k,h,d,b,c,g,p,a){a=a.ACTION;h=h.createGridClass("ProtocolTreeView",{menuOrder:{File:110,Edit:100,View:90,Block:50,Settings:20,Navigation:10,Step:5,New:4,Window:1},options:m.clone(k.DEFAULT_GRID_OPTIONS),_refreshInProgress:!1,isGroup:function(a){return a?!0===a.isDir:!1},getRootFilter:function(){return{parentId:""}},postMixInProperties:function(){this.collection=this.collection.filter(this.getRootFilter());this.columns=this.getColumns();this.inherited(arguments)},runAction:function(a,
b){this.inherited(arguments)}},{SELECTION:!0,KEYBOARD_SELECTION:!0,PAGINATION:!1,ACTIONS:k.GRID_FEATURES.ACTIONS,CONTEXT_MENU:k.GRID_FEATURES.CONTEXT_MENU,TOOLBAR:k.GRID_FEATURES.TOOLBAR,CLIPBOARD:k.GRID_FEATURES.CLIPBOARD,KEYBOARD_NAVIGATION:{CLASS:c},WIDGET:{CLASS:g},SEARCH:{CLASS:p}},{RENDERER:d},null,null);return n("xcf.views.ProtocolTreeView",h,{icon:"fa-file-code-o",beanType:k.ITEM_TYPE.PROTOCOL,permissions:[a.EDIT,a.RENAME,a.RELOAD,a.DELETE,a.CLIPBOARD,a.LAYOUT,a.COLUMNS,a.SELECTION,a.TOOLBAR,
a.HEADER,a.SEARCH,"File/New Group"],deselectOnRefresh:!1,showHeader:!1,toolbarInitiallyHidden:!0,groupOrder:{Clipboard:110,Device:105,File:100,Step:80,Open:70,Organize:60,Insert:10,New:5,Navigation:3,Select:0},startup:function(){var a=b.getDefaultActions(this.permissions,this,this);this.inherited(arguments);this.addActions(a);var c=this;this.refresh().then(function(){c.select([0],null,!0,{focus:!0})});this.subscribe(k.EVENTS.ON_STORE_CHANGED,function(a){a.store==c.collection&&c.refresh()});c.collection.on("update",
function(){c.refresh()});c.collection.on("delete",function(){c.refresh()})},openItem:function(a,b){!a||a.isDir||a.virtual||this.delegate.openItemSettings(a,b)},getColumns:function(){var a=this;return[{renderExpando:!0,label:"Name",field:"name",sortable:!1,formatter:function(b,c){if(!a.isGroup(c)&&c.user){var e=(b=c.user.meta)?m.getCIInputValueByName(b,k.PROTOCOL_PROPERTY.CF_PROTOCOL_TITLE):null;return b?'\x3cspan class\x3d"grid-icon fa-exchange"\x3e\x3c/span\x3e'+e:c.name}return c.name}}]}})})},"davinci/UserActivityMonitor":function(){define([],
function(){return{}})},"davinci/ve/actions/MoveForwardAction":function(){define(["dojo/_base/declare","./_ReorderAction","davinci/commands/CompoundCommand","davinci/ve/commands/ReparentCommand"],function(n,m,k,h){return n("davinci.ve.actions.MoveForwardAction",[m],{name:"MoveForward",iconClass:"editActionIcon editMoveForwardIcon",run:function(d){if(d=this.fixupContext(d)){var b=d&&d.getSelection?d.getSelection():[];if(0!==b.length&&this.selectionSameParentAllAbsoluteAdjacent(b)){for(var c,g=b[0].getParent(),
p=g.getChildren(),a=this.getAbsoluteSiblings(b[0]),e=new k,q=b.slice(0),u=0;u<a.length;u++){c=a[u];var m=q.indexOf(c);if(0<=m)q.splice(m,1);else if(0===q.length)break}p=p.indexOf(c)+1;for(q=0;q<a.length;q++)c=a[q],0<=b.indexOf(c)&&e.add(new h(c,g,p));d.getCommandStack().execute(e)}}},isEnabled:function(d){d=(d=this.fixupContext(d))&&d.getSelection?d.getSelection():[];if(0===d.length||!this.selectionSameParentAllAbsoluteAdjacent(d))return!1;for(var b=this.getAbsoluteSiblings(d[0]),c=0;c<d.length;c++)if(b.indexOf(d[c])<
b.length-d.length)return!0;return!1}})})},"dojo/when":function(){define(["./Deferred","./promise/Promise"],function(n,m){return function(k,h,d,b){var c=k&&"function"===typeof k.then,g=c&&k instanceof m;if(!c)return 1<arguments.length?h?h(k):k:(new n).resolve(k);g||(c=new n(k.cancel),k.then(c.resolve,c.reject,c.progress),k=c.promise);return h||d||b?k.then(h,d,b):k}})},"davinci/html/CSSRule":function(){define(["dojo/_base/declare","davinci/html/CSSElement","davinci/html/CSSParser","davinci/html/CSSProperty"],
function(n,m,k,h){return n("davinci.html.CSSRule",m,{constructor:function(){this.elementType="CSSRule";this.selectors=[];this.properties=[]},getText:function(d){var b="";d=d||[];this.comment&&!d.noComments&&(b+=this.comment.getText(d));for(var b=b+this.getSelectorText(d),b=b+" {",c=0;c<this.properties.length;c++)b=b+"\n    "+this.properties[c].getText(d);b+="\n}\n";this.postComment&&!d.noComments&&(b+=this.postComment.getText(d));return b},setText:function(d){require("davinci/html/CSSParser").parse(d,
this);dojo.mixin(this,this.children[0]);this.startOffset=(this.parent?this.parent.endOffset:0)+1;this.setDirty(!0)},addProperty:function(d,b){d=new h(d,b,this);this.properties.push(d);this.setDirty(!0);this.onChange()},insertProperty:function(d,b,c){var g;(g=this.getProperty(d))&&this.removeProperty(d);g=new h(d,b,this);this.properties.splice(c,0,g);this.setDirty(!0);this.onChange()},getSelectorText:function(d){for(var b="",c=0;c<this.selectors.length;c++)0<c&&(b+=", "),b+=this.selectors[c].getText(d);
return b},matches:function(d){d=this._convertNode(d);for(var b,c=0;c<this.selectors.length;c++)if(0<=(b=this.selectors[c].matches(d)))return b},visit:function(d){if(!d.visit(this)){for(var b=0;b<this.children.length;b++)this.children[b].visit(d);for(b=0;b<this.selectors.length;b++)this.selectors[b].visit(d)}d.endVisit&&d.endVisit(this)},hasSelector:function(d){for(var b=0;b<this.selectors.length;b++)if(this.selectors[b].getLabel()==d)return!0;return!1},matchesSelectors:function(d){for(var b=0;b<d.length;b++)for(var c=
0;c<this.selectors.length;c++)if(this.selectors[c].matchesSelector(d[b]))return!0;return!1},getCSSRule:function(){return this},getLabel:function(){return this.getSelectorText({})},getProperty:function(d){for(var b=0;b<this.properties.length;b++)if(d==this.properties[b].name)return this.properties[b]},hasProperty:function(d){for(var b=0;b<this.properties.length;b++)if(d==this.properties[b].name)return!0},getProperties:function(d){for(var b=[],c=0;c<this.properties.length;c++)d&&d!=this.properties[c].name||
b.push(this.properties[c]);return b},setProperty:function(d,b){var c=this.getProperty(d);b?c?c.value=b:(c=new h,c.name=d,c.value=b,this.properties.push(c),c.parent=this):this.removeProperty(d);this.setDirty(!0);this.onChange()},removeProperty:function(d){for(var b=0;b<this.properties.length;b++)d==this.properties[b].name&&this.properties.splice(b,1);this.setDirty(!0);this.onChange()},removeAllProperties:function(){this.properties=[];this.setDirty(!0);this.onChange()},removeStyleValues:function(d){for(var b=
[],c=0;c<this.properties.length;c++){for(var g,h=0;h<d.length&&!g;h++)g=d[h]==this.properties[c].name;g||(b=this.properties[c])}this.properties=b;this.setDirty(!0);this.onChange()}})})},"xdocker/Panel2":function(){define("dcl/dcl dcl/inherited xide/types xide/utils wcDocker/panel xide/mixins/EventedMixin xide/registry wcDocker/types xide/widgets/_Widget".split(" "),function(n,m,k,h,d,b,c,g,p){return n([d,p.dcl,b.dcl],{selected:!1,_isVisible:function(){var a=$(this.containerNode);return a.length&&
0!==a[0].offsetHeight&&"none"!=a.css("display")&&"hidden"!=a.css("visibility")?!0:!1},next:function(a){var b=this.getFrame();if(b){var c=parseInt(b._curTab,10);return b.panelAt(c+a)}},set:function(a,b){if("changed"===a)return this.$title&&(b?this.$title.addClass("changed"):this.$title.removeClass("changed")),!0;"loading"===a&&(b?this.startLoading():this.finishLoading());return"height"===a?($(this.containerNode).css("height",b+"px"),this._maxSize.y=b,this._minSize.y=b,this._actualSize.y=b,!0):this.inherited(arguments)},
isExpanded:function(){var a=this.getSplitter();return a?a.isExpanded():!0},isCollapsed:function(){var a=this.getSplitter();return a?a.isCollapsed():!1},expand:function(){var a=this.getSplitter();if(!a)return!1;a.expand();return _.invoke(this._findWidgets,"onShow")},collapse:function(){var a=this.getSplitter();if(!a)return!1;a.collapse(-1==a._pane[0].panelIndex(this)?1:0);return _.invoke(this._findWidgets,"onHide")},onSaveLayout:function(a){this._emit("onSaveLayout",a)},onRestoreLayout:function(a){this._emit("onRestoreLayout",
a)},__init:function(){this.on(g.EVENT.SAVE_LAYOUT,function(a){a.title=this.title()});this.on(g.EVENT.RESTORE_LAYOUT,function(a){a.title&&this.title(a.title)});var a=this._options&&this._options.layout||"wcLayoutTable";this._layout=new (this.docker().__getClass(a))(this.$container,this);this.$title=$('\x3cli class\x3d"wcPanelTab"\x3e');this.$titleText=$("\x3ca\x3e"+this._title+"\x3c/a\x3e");this.$title.append(this.$titleText);this._options.hasOwnProperty("title")&&this.title(this._options.title);this._options.icon&&
(this.icon(this._options.icon),this._icon=this._options.icon);this._options.faicon&&this.faicon(this._options.faicon);this.id||(this.id=c.getUniqueId(this.declaredClass.replace(/\./g,"_")));h.mixin(this,this._options.mixin);c.add(this)},_findWidgets:function(a){var b=[];(a=a||this.containerNode||(this.$container?this.$container[0]:null))&&_.each(a.children,function(a){a.id&&(a=c.byId(a.id))&&b.push(a)});this._widgets&&(b=b.concat(this._widgets));return b},__onShow:function(){_.each(this._findWidgets(),
function(a){})},destroy:function(a){this.inherited(arguments);if(!1!==a){var b=this.docker();b&&b.removePanel(this)}c.remove(this.id)},__destroy:function(){this._emit("destroy");_.each(this._findWidgets(),function(a){a&&a.destroy&&!a._destroyed&&a.destroy()});this.inherited(arguments);this._destroyHandles();this.off()}})})},"davinci/ve/widgets/Cascade":function(){define("dojo/_base/declare ../../workbench/WidgetLite ../../workbench/Preferences ../../Workbench ../../html/CSSModel ../../library ../../Theme ../../html/CSSRule ../States davinci/lang/ve/ve system/resource".split(" "),
function(n,m,k,h,d,b,c,g,p,a,e){n=n("davinci.ve.widgets.Cascade",[m],{target:null,targetField:null,toggleClasses:null,_regex_combinators:/[\s\~\+\>]+/,_regex_not_pseudoclass:/(.*)\:not\((.*)\)(.*)/,_regex_pseudoelement:/(.*)(\:\:[^\:\.\#\[]*)(.*)/,_regex_id:/(.*)(\#[^\:\.\#\[]*)(.*)/,_regex_class:/(.*)(\.[^\:\.\#\[]*)(.*)/,_regex_attribute:/(.*)(\[[^\]]*\])(.*)/,_regex_pseudoclass:/(.*)(\:[^\:\.\#\[]*)(.*)/,_regex_univeral:/(.*)(\*[^\:\.\#\[]*)(.*)/,delegate:null,constructor:function(a,b){this.subscriptions=
[];this.publishing={};this._radioGroupName="davinci_ve_widgets_Cascade"+davinci.ve.widgets.Cascade.__id++;this._handles=[];this._values=[];this.inherited(arguments)},buildRendering:function(){this.domNode=dojo.doc.createElement("div");this.container=dojo.doc.createElement("div");dojo.addClass(this.container,"showCascade");this.domNode.appendChild(this.container);this.topDiv=dojo.create("div",{"class":"cascadeTopDiv"},this.container);this.cascadeTableDiv=dojo.create("div",{"class":"cascadeTableDiv widget"},
this.container);dojo.removeClass(this.container,"showAllValues");dojo.isArray(this.target)||(this.target=[this.target]);dojo.addClass(this.domNode,"CascadeTop");this.inherited(arguments)},startup:function(){var a=dijit.byId(this.targetField);if(a)a._cascade=this,this._getFieldValue=function(){return a.get("value")},this._setFieldValue=function(b,c){a.set&&(this._value=b||"",this._loc=c,a._setBaseLocationAttr&&a.set("baseLocation",c&&c.getPath?c.getPath():null),a.set("value",this._value,!0))},dojo.connect(a,
"onChange",this,"_onFieldChange"),dojo.connect(a,"onFocus",this,"_onFieldFocus"),dojo.connect(a,"onBlur",this,"_onFieldBlur");else{var b=dojo.byId(this.targetField);this._getFieldValue=function(){return dojo.attr(b,"value")};this._setFieldValue=function(a,c){this._value=a||"";this._loc=c;dojo.attr(b,"value",this._value)};dojo.connect(b,"onchange",this,"_onFieldChange",!0);dojo.connect(b,"onfocus",this,"_onFieldFocus",!0);dojo.connect(b,"onblur",this,"_onFieldBlur",!0)}this._value=this._getFieldValue();
this._started=!0},_canModifyRule:function(a){return a&&a.getCSSFile?(a=a.getCSSFile())?!e.findResource(a.url).readOnly():!0:!0},_onFieldChange:function(b){function c(){d&&m&&m[d]&&m[d].resolve()}function e(a){a._value=a._getFieldValue();a._valueArray=a._valueArrayNew;var b=a._valueArray&&dojo.isArray(a._valueArray)&&0<a._valueArray.length?a._valueArray:a._value;a._changeValue(a._targetValueIndex,b)}b=function(a,b){if(!a&&!b)return!0;if(!a&&b||a&&!b||a.length!=b.length)return!1;for(var c=0;c<a.length;c++)if(a[c]!==
b[c])return!1;return!0};this.context&&this.context.blockChange(!1);if(!(this._value==this._getFieldValue()&&b(this._valueArray,this._valueArrayNew)||1>this._values.length))if("(overrides)"==this._getFieldValue())this._setFieldValue&&this._setFieldValue("(overrides)",null);else if("number"==typeof this._targetValueIndex){var g=k.getPreferences("davinci.ve.editorPrefs",h.getProject());if(this._widget&&this.target&&0<this.target.length){var d=this.target[0];b=this._widget.getContext();var q;b&&(q=b.cascadeBatch);
if(q){var p=q.askUserResponse;if(q.deferreds)var m=q.deferreds}}!1===p?(this._setFieldValue(this._value,this._loc),c()):!0===p?(e(this),c()):(p=null,this._values[this._targetValueIndex].readOnly&&"davinci.themeEdit.ThemeEditor"!=this._editor.editorID?(p=a.propChangeCannotComplete+"\x3cbr\x3e\x3cbr\x3e"+dojo.string.substitute(a.toChangeProperty,["\x3ca href\x3d'app/docs/index.html#CreatingStyleRulesWithAppCss' target\x3d'_blank'\x3e"+a.creatingStyleRules+"\x3c/a\x3e"])+"\x3cbr/\x3e\x3cbr/\x3e",davinci.Workbench.showMessage(a.errorModifyingValue,
p,{width:350},dojo.hitch(this,function(){c();return!0})),q&&(q.askUserResponse=!1),this._setFieldValue(this._value,this._loc)):("theme"==this._values[this._targetValueIndex].type||"theme"==this._values[this._targetValueIndex].proposalTarget)&&g.cssOverrideWarn&&this._editor.supports("MultiPropTarget")?require(["davinci/ve/widgets/ChangeWillModify"],dojo.hitch(this,function(a){var b=new a;a=davinci.Workbench.showDialog({title:"",content:b,style:{width:350},okCallback:dojo.hitch(this,function(){q&&
(q.askUserResponse=!0);e(this);c();b.checkbox.get("checked")&&(g.cssOverrideWarn=!1,k.savePreferences("davinci.ve.editorPrefs",null,g))}),okLabel:null,hideCancel:null,submitOnEnter:!0});dojo.connect(a,"onCancel",dojo.hitch(this,function(){q&&(q.askUserResponse=!1);this._setFieldValue(this._value,this._loc);c();b.checkbox.get("checked")&&(g.cssOverrideWarn=!1,k.savePreferences("davinci.ve.editorPrefs",null,g))}))})):(e(this),c()))}},_changeValue:function(a,b){var c=void 0;this._whichStateInputElement&&
this._whichStateInputElement.checked&&(c=this._whichState);var e=this._values[a];a=[];for(var g=0;g<this.target.length;g++)if(dojo.isArray(b))for(var d=0;d<b.length;d++){var h={};h[this.target[g]]=b[d];a.push(h)}else h={},h[this.target[g]]=b,a.push(h);this._dirtyCascadeList=!0;"element.style"==e.type?("position"==this.target[0]&&1==a.length&&("absolute"==a[0].position?(b=this.context.getPreference("absoluteWidgetsZindex"),a.push({"z-index":b})):a.push({"z-index":""})),dojo.publish("/davinci/ui/styleValuesChange",
[{values:a,appliesTo:"inline",applyToWhichStates:c,cascade:this}])):dojo.publish("/davinci/ui/styleValuesChange",[{values:a,appliesTo:e,applyToWhichStates:c}])},_getAttribStyleValue:function(){return this.context.getStyleAttributeValues(this._widget)},_getShortHands:function(){if(this._shorthands)return this._shorthands;this._shorthands=[];for(var a=0;a<this.target.length;a++)this._buildShortHands(this.target[a]);return this._shorthands},_buildShortHands:function(a){for(var b=!1,c=0;c<d.shorthand.length;c++)if(a==
d.shorthand[c][0]){b=!0;break}if(b)for(a=d.shorthand[c][1],b=0;b<a.length;b++){for(var e=!1,c=0;c<this._shorthands.length&&!e;c++)this._shorthands[c]==a[b]&&(e=!0);e||this._shorthands.push(a[b]);this._buildShortHands(a[b])}return this._shorthands},_onChangeOverride:function(b){alert(a.valueIsOverriden);return!1},_getSelector:function(a,b){var c=this.context.getThemeMeta();if(!c)return[];a=c.loader.getType(a);if(c=c.metadata.getStyleSelectors(a,"Normal"))for(var e in c)for(a=0;a<c[e].length;a++)for(var g=
0;g<b.length;g++)if(b[g]==c[e][a])return e},_getMetaTargets:function(a,b){var c=this._getSelector(a,b);return this.context.getModel().getRule(c).filter(function(a){return a.getSelectorText()==c})},_getSelectionCssRules:function(a){this.context._cssCache=this.context._cssCache||{};var b=this.context.getSelection();if(!a&&!b.length)return{rules:null,matchLevels:null};var c=a||b[0].domNode||b[0],e=c.id+"_"+c.className;if(b.length){var g=this.context._cssCache[e]=this.context.model.getMatchingRules(c,
!0);this.context.cssFiles&&this.context.cssFiles.forEach(function(a){a.getMatchingRules(c,g.rules,g.matchLevels)});g.rules.forEach(function(a){var b=dojo.hitch(a,"onChange",this,function(){delete this.context._cssCache[e];connect.unsubscribe(b)})},this);return g}return{rules:null,matchLevels:null}},_getAllRules:function(){function a(a){if(a&&a.parent&&a.parent.url)return a=a.parent.url,/^themes\//.test(a)||/\/themes\//.test(a)?"theme":"queried"}var b=[];if("davinci.themeEdit.ThemeEditor"!=this._editor.editorID){var c=
this._getDefaultSelection();if(this._editor.supports("inline-style")&&"element.style"==c){for(var c=this._getAttribStyleValue(),e=null,g=0;g<c.length;g++)for(var d=c[g],h=0;h<this.target.length;h++){var p=this.target[h];void 0!==d[p]&&(e=d[p])}b.push({rule:c,value:e,matchLevel:"element.style",type:"element.style"})}if((c=this._getSelectionCssRules(this._topWidgetDom))&&c.rules)for(h=0;h<c.rules.length;h++){e="";g=c.rules[h];for(d=0;d<g.selectors.length;d++)0!=d&&(e+=", "),e+=g.selectors[d].getLabel();
g=a(g);b.push({rule:c.rules[h],ruleString:e,matchLevel:c.matchLevels[h],type:g})}this._addDeltaRules(this._widget,b);for(var c=this._getClasses(this._widget),k=0,h=0;h<c.length;h++){var m=c[h];"string"==typeof m&&0<m.length&&this._getClassSelector(m).forEach(function(a){for(var c=!1,e=0;e<b.length;e++)if(this._compareSelectors(b[e].ruleString,a)){b[e].className=m;c=!0;break}c||(c=this._computeMatchLevelSelector(a),b.splice(k,0,{rule:null,ruleString:a,targetFile:this.targetFile,className:m,value:null,
matchLevel:c,type:"proposal"}),k++)}.bind(this))}}if("davinci.themeEdit.ThemeEditor"==this._editor.editorID){if(c=this._editor._getCssRules(this._widget,this._editor._selectedSubWidget,this._editor._currentState)){h=[];for(e=c.length-1;-1<e;--e)h.push(c[e]);c=h}}else c=this._widget?this._getMetaTargets(this._widget,this.target):[];for(h=0;h<c.length;h++){e=!1;for(g=0;!e&&g<b.length;g++)b[g].rule==c[h]&&(e=!0,b[g].type="theme");e||b.push({rule:c[h],matchLevel:"theme",type:"theme"})}return b},_buildCssRuleset:function(){var a=
this._getAllRules();this._values=[];this._hasOverride=!1;for(var b=this._getShortHands(),c=0;c<a.length;c++){var e=a[c].rule;if(e){for(var g=0;g<b.length;g++)if("element.style"!=a[c].type&&null!=a[c].rule.getProperty(b[g])){a[c].shorthand=b[g];var d=e.getProperty(b[g]);a[c].value=d&&d.value;this._hasOverride=!0}else"element.style"==a[c].type&&-1<dojo.indexOf(a[c].rule,b[g])&&(a[c].shorthand=b[g],d=dojo.indexOf(a[c].rule,b[g]),a[c].value=e[d],this._hasOverride=!0);if(!a[c].shorthand&&"element.style"!=
a[c].type)a[c].value=this._getRuleTargetValue(e);else if(!a[c].shorthand&&"element.style"==a[c].type)for(g=0;g<e.length;g++)e[g].hasOwnProperty(this.target[0])&&(a[c].value=e[g][this.target[0]])}}a=this._sortRules(a);this._addClasses(a);this._values=a},_sortRules:function(a){for(var b=[],c=0;c<a.length;c++){var e=!1;"element.style"==a[c].type&&(b.splice(0,0,a[c]),e=!0);for(var g=0;!e&&g<b.length;g++)"element.style"!=b[g].matchLevel&&b[g].matchLevel<a[c].matchLevel&&(e=!0,b.splice(g,0,a[c]));e||b.push(a[c])}return b},
_addClasses:function(a){for(var b=!1,c=0;c<a.length;c++)a[c].extraClass=[],b&&a[c].extraClass.push("cssShorthandOverRidden"),a[c].value||"element.style"!=a[c].type&&this._getRuleTargetValue(a[c].rule)?b=!0:a[c].value||"element.style"==a[c].type||a[c].extraClass.push("hiddenCascadeNode"),"element.style"!=a[c].type||a[c].value||a[c].extraClass.push("elementStyleNode"),this._canModifyRule(a[c].rule)||(a[c].extraClass.push("readOnlyRule"),a[c].readOnly=!0)},_updateCascadeList:function(){function b(a){return function(){return this._onChange({target:a})}}
function c(a){return function(){return this._onChangeRemove({target:a})}}this._setFieldValue&&this._setFieldValue("",null);if(this._widget&&this._widget.domNode){dojo.removeClass(this.container,"dijitHidden");this._buildCssRuleset();this._destroy();var e=dojo.doc.createElement("table");dojo.addClass(e,"cascadeTable");var g=null,d=null,g=dojo.doc.createElement("tr");g.className="propApplyToLabelRow";d=dojo.doc.createElement("td");d.colSpan="3";d.innerHTML=a.applyToWhich;d.className="propApplyToLabelCell";
g.appendChild(d);e.appendChild(g);this._radio=[];for(var h=0;h<this._values.length;h++){var k=this._formatRuleString(this._values[h]);this._radio.push(dojo.create("input",{type:"radio",name:this._radioGroupName}));for(var g=dojo.doc.createElement("tr"),m=0;m<this._values[h].extraClass.length;m++)dojo.addClass(g,this._values[h].extraClass[m]);d=dojo.doc.createElement("td");g.appendChild(d);dojo.addClass(d,"cascadeSpacer");d=dojo.doc.createElement("td");dojo.addClass(d,"cascadeButton");d.appendChild(this._radio[this._radio.length-
1]);g.appendChild(d);d=dojo.doc.createElement("td");dojo.addClass(d,"cascadText");d.innerHTML="\x3cdiv class\x3d'cascadeRuleText'\x3e"+k+"\x3c/div\x3e";this._values[h].shorthand?this._handles.push(dojo.connect(this._radio[this._radio.length-1],"onclick",this,"_onChangeOverride")):this._handles.push(dojo.connect(this._radio[this._radio.length-1],"onclick",this,b(h)));if(this._values[h].shorthand)d.innerHTML+="\x3cdiv\x3e"+this._values[h].shorthand+":"+this._values[h].value+";\x3c/div\x3e";else if(this._values[h].value){for(m=
0;m<this.target.length;m++);d.innerHTML+="\x3cdiv class\x3d'ruleValue'\x3e"+this.target[0]+":"+this._values[h].value+";\x3c/div\x3e"}g.appendChild(d);d=dojo.doc.createElement("td");dojo.addClass(d,"cascadRemove");k=dojo.doc.createElement("button");this._values[h].readOnly&&dojo.attr(k,"disabled","true");dojo.addClass(k,"cascadeRemoveButton");d.appendChild(k);this._handles.push(dojo.connect(k,"onclick",this,c(h)));g.appendChild(d);d=dojo.doc.createElement("td");d.className="cascadeSpacer";g.appendChild(d);
e.appendChild(g)}this._widgetState=this._whichStateInputElement=void 0;g=p.getStatesListCurrent(this._widget.domNode);for(h=0;h<g.length;h++)if(g[h]){h=g[h];g=dojo.doc.createElement("tr");g.className="propWhichStateRow";d=dojo.doc.createElement("td");d.colSpan="3";k=dojo.create("input",{type:"checkbox",checked:!1,className:"propWhichStateInput"});this._whichState=h;this._whichStateInputElement=k;d.appendChild(k);k=dojo.create("label",{className:"propWhichStateLabel"});k.innerHTML=dojo.string.substitute(a.onlyApplyToState,
[h]);d.appendChild(k);d.className="propWhichStateCell";g.appendChild(d);e.appendChild(g);break}this.cascadeTableDiv.appendChild(e);this._updateFieldValue()}else dojo.addClass(this.container,"dijitHidden")},selectRule:function(a){for(var b=0;b<this._values.length;b++)if("element.style"!=a&&this._values[b].rule==a){dojo.removeClass(this._radio[b].parentNode.parentNode,"hiddenCascadeNode");dojo.attr(this._radio[b],"checked",!0);this._onChange({target:b});break}else if("element.style"==a&&"element.style"==
this._values[b].type){dojo.removeClass(this._radio[b].parentNode.parentNode,"hiddenCascadeNode");dojo.attr(this._radio[b],"checked",!0);this._onChange({target:b});break}},selectRuleBySelector:function(a){if("element.style"==a)this._targetValueIndex=0,0<this._values.length&&(dojo.attr(this._radio[0],"checked",!0),this._values[0].shorthand?dojo.addClass(this._radio[0].parentNode.parentNode,"cssShorthandOverRidden"):(a=this._getBaseLocation(),this._setFieldValue(this._values[0].value,a)));else for(var b=
0;b<this._values.length;b++)if("element.style"!=this._values[b].type&&this._values[b].rule&&this._values[b].rule.hasSelector(a)){dojo.removeClass(this._radio[b].parentNode.parentNode,"hiddenCascadeNode");dojo.attr(this._radio[b],"checked",!0);this._onChange({target:b});break}},_isTarget:function(a){if("$std_10"===a)return!0;for(var b=0;b<this.target.length;b++)if(this.target[b]==a)return!0;return!1},_targetIsRootProperty:function(){for(var a=["left","top","right","bottom"],b=0;b<this.target.length;b++)if(-1<
a.indexOf(this.target[b]))return!0;return!1},_updateFieldValue:function(){null==this._widget&&this._setFieldValue("",this._getBaseLocation());var a=this._getDefaultSelection();this._targetValueIndex=0;for(var b=!1,c=!1,e=0;e<this._values.length;e++){var g="davinci.ve.HTMLPageEditor"==this._editor.editorID,d="davinci.themeEdit.ThemeEditor"==this._editor.editorID;this._values[e].value&&!b&&d||this._values[e].value&&!b&&g&&!this._values[e].readOnly||!b&&!c&&"element.style"!=this._values[e].type&&this._values[e].rule&&
this._values[e].rule.hasSelector(a)||"element.style"==a&&"element.style"==this._values[e].type?(this.selectRule("element.style"==this._values[e].type?"element.style":this._values[e].rule),this._values[e].value&&(b=!0),c=!0):b&&!c&&dojo.addClass(this._radio[e].parentNode.parentNode,"cssOverRidden")}b||c||!g||this.selectRuleBySelector("element.style")},_getThemeMetaDataByWidget:function(a){var e=this.context.getThemeMeta();if(!e)return null;a=e.loader.getType(a);var e=e.loader.getMetaData(a),g=!1,d=
"string"==typeof a?a.split("."):null;d&&"html"==d[0]&&(g=!0);if(!e&&this.context.cssFiles&&!g)for(g=0;g<this.context.cssFiles.length;g++)if(d=c.getThemeByCssFile(this.context.cssFiles[g]))if(e=b.getThemeMetadata(d).loader.getMetaData(a))break;return e},_getDefaultSelection:function(){var a="Normal";"davinci.themeEdit.ThemeEditor"==this._editor.editorID&&(a=a||p.getState());var b=this._getThemeMetaDataByWidget(this._widget);if(!b||!b.states||this._targetIsRootProperty())return"element.style";if(b&&
b.states[a]&&b.states[a].elements){var c=b.states[a].elements,e;for(e in c)for(var g=0;g<c[e].length;g++)if(this._isTarget(c[e][g]))return"$root"==e?"element.style":e}if(b&&b.states[a]&&(c=this.context.getThemeMeta())&&(g=c.loader.getType(this._widget),c=c.metadata.getStyleSelectors(g,a,null)))for(e in c)for(a=0;a<c[e].length;a++)if(this._isTarget(c[e][a])){if(b.rootSelectors)for(a=0;a<b.rootSelectors.length;a++)if(e==b.rootSelectors[a])return"element.style";return e}return null},_addDeltaRules:function(a,
b){var c="Normal",g=-1,d=[],h=this.context._getCssFiles(),h=h&&0<h.length?h[0].url:null,q=!1;h&&(q=(q=e.findResource(h))?q._readOnly:!0);"davinci.themeEdit.ThemeEditor"==this._editor.editorID&&(c=c||p.getState());if((a=this._getThemeMetaDataByWidget(a))&&a.states[c]&&a.states[c].selectors){var c=a.states[c].selectors,k;for(k in c){c=!1;for(a=0;a<b.length;a++){var u=b[a];"element.style"===u.type&&(g=a);if("theme"===u.type&&u.ruleString===k&&(u.rule.parent.relativeURL==this.context._themeUrl||u.rule.parent.url==
h)){c=!0;break}}c||(c=this._computeMatchLevelSelector(k),h&&!q&&d.push({rule:null,ruleString:k,targetFile:h,className:null,value:null,matchLevel:c,type:"proposal"}),this.context._themeUrl&&!this.context.theme.getFile().readOnly()&&d.push({rule:null,ruleString:k,targetFile:this.context._themeUrl,className:null,value:null,matchLevel:c,type:"proposal",proposalTarget:"theme"}))}}var m=g+1;d.forEach(function(a){b.splice(m++,0,a)});return b},_getRuleTargetValue:function(a){var b=null;if(a)for(var c=0;!b&&
c<this.target.length;c++)b=a.getProperties(this.target[c]);if(null!=b){if(1<b.length){a=[];for(c=0;c<b.length;c++)a.push(b[c].value);return a}if(1==b.length)return b[0].value}return null},_onChangeRemove:function(a){this._changeValue(a.target,null);this._updateCascadeList()},_onChange:function(a){var b=null;if("element.style"==this._values[a.target].type)b=this._getBaseLocation();else if("proposal"==this._values[a.target].type){var c=this.context.getModel().find({elementType:"CSSFile",relativeURL:this._values[a.target].targetFile},
!0),g=this.context._getCssFiles();c?b=e.findResource(c.url):g[0].url==this._values[a.target].targetFile&&(b=e.findResource(g[0].url))}else b=e.findResource(this._values[a.target].rule.getCSSFile().url);this._setFieldValue&&this._setFieldValue(this._values[a.target].value||"",b);this._targetValueIndex=a.target},_widgetValuesChanged:function(a){if(this._dirtyCascadeList)this._updateCascadeList(),this._dirtyCascadeList=!1;else{var b=this._getShortHands();a=a.values;for(var c in a)for(a=0;a<b.length;a++)if(b[a]==
c){this._updateCascadeList();return}}},_formatRuleString:function(b){if("element.style"==b.type)return"element.style";var c="";if("proposal"==b.type)c=b.className?c+dojo.string.substitute(a.newRule,[b.className,b.targetFile]):c+dojo.string.substitute(a.newThemeRule,[b.targetFile]),c+=b.ruleString;else{var e=b.rule;b.className?c+=dojo.string.substitute(a.existingRule,[b.className,this.targetFile]):"theme"==b.type&&(c+="["+b.type+"] ");if(b.ruleString)c+=b.ruleString;else for(var g=0;g<e.selectors.length;g++)0!=
g&&(c+=", "),c+=e.selectors[g].getLabel();(g=e.searchUp("CSSFile"))&&(c+="  ("+g.url||g.relativeURL);c=b.property?c+dojo.string.substitute(a.line,[b.property.startLine]):c+dojo.string.substitute(a.line,[e.startLine||a.propUndefined])}return c},_getWidgetTopDom:function(a,b){b=this._getSelector(a,b);var c=function(a,b){if(b.matches(a))return a;for(;0<a.children.length;)return c(a.children[0],b)};if(b){var e=new g;e.setText(b+"{}");return c(a.domNode||a,e)}return null},_widgetSelectionChanged:function(a){(this._widget=
a=a[0])?(this.context=a.getContext(),this.targetFile=this.context.getAppCssRelativeFile(),this._editor=this.context.editor,this._topWidgetDom=this._getWidgetTopDom(this._widget,this.target)||this._widget.domNode||this._widget):this._topWidgetDom=null;this._updateCascadeList()},_getBaseLocation:function(){return{}},_editorSelected:function(a){this._editor=a.editor;var b;this._editor&&this._editor.getContext&&(b=this._editor.getContext());b&&this._editor.supports("style")?(this.context=b,this.targetFile=
b.getAppCssRelativeFile(),a=b.getSelection(),0<a.length?this._widgetSelectionChanged(a):this._widgetSelectionChanged([])):(this._widget=this.context=null,this._setFieldValue&&this._setFieldValue("",null));this._updateCascadeList()},_onFieldFocus:function(){this.context&&this.context.blockChange(!0)},_destroy:function(){var a=this.cascadeTableDiv;for(dojo.forEach(dojo.query("[widgetId]",a).map(dijit.byNode),function(a){a.destroy()});a.firstChild;)dojo._destroyElement(a.firstChild);dojo.forEach(this._handles,
dojo.disconnect);this._handles=[]},_onFieldBlur:function(){this.context&&this.context.blockChange(!1)},_getClasses:function(a){a=a.getClassNames("class")||"";a=a.split(" ");for(var b=0;b<a.length;b++)for(var c=b+1;c<a.length;c++)a[c]==a[b]&&a.splice(c,1);return a},_getRelativeMetaTargetSelector:function(a){var b=this.context.getThemeMeta();if(!b)return[];var c=this.context.getSelection();if(!c.length)return[];c=c[0];c=b.loader.getType(c);return b.metadata.getRelativeStyleSelectorsText(c,"Normal",
null,a,this.context.getTheme().className)},_getClassSelector:function(a){var b=this._getRelativeMetaTargetSelector(this.target),b=b.length?b[0]:"";bodyId=this.context.model.find({elementType:"HTMLElement",tag:"body"},!0).find({elementType:"HTMLAttribute",name:"id"},!0).value;var c=this.context.getTheme(),e=[];if(!c)return e;var g=c.className;b.split(",").forEach(function(b){b=b.trim();e.push("#"+bodyId+"."+g+" ."+a+b)}.bind(this));return e},_computeMatchLevelSelector:function(a){a=a.split(this._regex_combinators);
for(var b=0,c=0;c<a.length;c++){for(var e=a[c];;){var g=e.match(this._regex_not_pseudoclass);if(null!=g)b+=this._computeMatchLevelSimpleSelector(g[2]),e=g[1]+g[3];else break}b+=this._computeMatchLevelSimpleSelector(e)}return b},_computeMatchLevelSimpleSelector:function(a){var b=0;do{var c=function(c,g){c=a.match(c);null!=c&&(e=!0,b+=g,a=c[1]+c[3])},e=!1;c(this._regex_pseudoelement,1);e||(c(this._regex_id,100),c(this._regex_class,10),c(this._regex_attribute,10),c(this._regex_pseudoclass,10),c(this._regex_univeral,
0))}while(e);0<a.length&&(b+=1);return b},_compareSelectors:function(a,b){if(!(a&&b||a==b))return!1;a=a.split(this._regex_combinators);b=b.split(this._regex_combinators);if(a.length!=a.length)return!1;for(var c=0;c<a.length;c++)if(a[c]!=b[c])return!1;return!0},_compareSimpleSelectors:function(a,b){}});return dojo.mixin(n,{__id:0})})},"xide/encoding/SHA1":function(){define(["./_base"],function(n){function m(b,g){b[g>>5]|=128<<24-g%32;b[(g+64>>9<<4)+15]=g;g=Array(80);for(var c=1732584193,a=-271733879,
e=-1732584194,d=271733878,h=-1009589776,k=0;k<b.length;k+=16){for(var r=c,m=a,x=e,A=d,z=h,y=0;80>y;y++){if(16>y)g[y]=b[k+y];else{var B=g[y-3]^g[y-8]^g[y-14]^g[y-16];g[y]=B<<1|B>>>31}B=n.addWords(n.addWords(c<<5|c>>>27,20>y?a&e|~a&d:40>y?a^e^d:60>y?a&e|a&d|e&d:a^e^d),n.addWords(n.addWords(h,g[y]),20>y?1518500249:40>y?1859775393:60>y?-1894007588:-899497514));h=d;d=e;e=a<<30|a>>>2;a=c;c=B}c=n.addWords(c,r);a=n.addWords(a,m);e=n.addWords(e,x);d=n.addWords(d,A);h=n.addWords(h,z)}return[c,a,e,d,h]}function k(b){for(var c=
[],d=0,a=8*b.length;d<a;d+=8)c[d>>5]|=(b.charCodeAt(d/8)&255)<<24-d%32;return c}function h(b){for(var c=[],d=0,a=4*b.length;d<a;d++)c.push("0123456789abcdef".charAt(b[d>>2]>>8*(3-d%4)+4&15),"0123456789abcdef".charAt(b[d>>2]>>8*(3-d%4)&15));return c.join("")}function d(b){for(var c=[],d=0,a=32*b.length;d<a;d+=8)c.push(String.fromCharCode(b[d>>5]>>>24-d%32&255));return c.join("")}function b(b){for(var c=[],d=0,a=4*b.length;d<a;d+=3)for(var e=(b[d>>2]>>8*(3-d%4)&255)<<16|(b[d+1>>2]>>8*(3-(d+1)%4)&255)<<
8|b[d+2>>2]>>8*(3-(d+2)%4)&255,h=0;4>h;h++)8*d+6*h>32*b.length?c.push("\x3d"):c.push("ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".charAt(e>>6*(3-h)&63));return c.join("")}n.SHA1=function(c,g){g=g||n.outputTypes.Base64;c=m(k(c),8*c.length);switch(g){case n.outputTypes.Raw:return c;case n.outputTypes.Hex:return h(c);case n.outputTypes.String:return d(c);default:return b(c)}};n.SHA1._hmac=function(c,g,p){p=p||n.outputTypes.Base64;var a=k(g);16<a.length&&(a=m(a,8*g.length));var e=
Array(16);g=Array(16);for(var q=0;16>q;q++)e[q]=a[q]^909522486,g[q]=a[q]^1549556828;c=m(e.concat(k(c)),512+8*c.length);c=m(g.concat(c),672);switch(p){case n.outputTypes.Raw:return c;case n.outputTypes.Hex:return h(c);case n.outputTypes.String:return d(c);default:return b(c)}};return n.SHA1})},"davinci/ui/TextEditor":function(){define(["dojo/_base/declare","./Editor","../Runtime"],function(n,m,k){return n(m,{constructor:function(h,d){this.subscriptions=[];this._handles=[]},isActiveEditor:function(){return k.currentEditor==
this},handleChange:function(h){this.editorContainer&&this.editorContainer.setDirty(!0);this.isDirty=!0;this.lastModifiedTime=Date.now()},_onKey:function(h){davinci.Workbench.currentContext=this.editorID;return davinci.Workbench.handleKey(h)},subscribe:function(h,d){this.subscriptions.push(dojo.subscribe(h,this,d))},destroy:function(){this.inherited(arguments);this.subscriptions.forEach(dojo.unsubscribe);this._handles.forEach(dojo.disconnect)},getDefaultContent:function(){return null},getErrors:function(){return[]},
save:function(h){var d=this.getText();if(this.resourceFile){this.resourceFile.clearMarkers();for(var b=this.getErrors(),c=0;c<b.length;c++){var g;switch(b[c].id){case "(error)":g="error";break;case "(warning)":g="warning"}g&&this.resourceFile.addMarker(g,b[c].line+1,b[c].reason)}this.resourceFile.setContents(d,h);this.editorContainer&&this.editorContainer.setDirty(h);this.isDirty=!1;this.lastModifiedTime=0}},supports:function(h){return!1},_connect:function(h,d,b){this._handles.push(dojo.connect(h,
d,this,b))}})})},"dijit/_base":function(){define("./main ./a11y ./WidgetSet ./_base/focus ./_base/manager ./_base/place ./_base/popup ./_base/scroll ./_base/sniff ./_base/typematic ./_base/wai ./_base/window".split(" "),function(n){return n._base})},"dstore/Store":function(){define("dojo/_base/lang dojo/_base/array dojo/aspect dojo/has dojo/when dojo/_base/declare dstore/QueryMethod dstore/Filter dojo/Evented".split(" "),function(n,m,k,h,d,b,c,g,p){function a(a){return function(b,c){var e=this;d(b,
function(b){b={target:b};var g=c[1]||{};"beforeId"in g&&(b.beforeId=g.beforeId);e.emit(a,b)});return b}}h.add("object-proto",!!{}.__proto__&&!{}.watch);var e=h("object-proto");return b(p,{constructor:function(c){c&&b.safeMixin(this,c);this.Model&&this.Model.createSubclass&&(this.Model=this.Model.createSubclass([],{}).extend({_store:this}));this.storage=new p;var e=this;this.autoEmitEvents&&(k.after(this,"add",a("add")),k.after(this,"put",a("update")),k.after(this,"remove",function(a,b){d(a,function(){e.emit("delete",
{id:b[0]})});return a}))},autoEmitEvents:!0,idProperty:"id",queryAccessors:!0,getIdentity:function(a){return a.get?a.get(this.idProperty):a[this.idProperty]},_setIdentity:function(a,b){a.set?a.set(this.idProperty,b):a[this.idProperty]=b},forEach:function(a,b){var c=this;return d(this.fetch(),function(e){for(var g=0,d;void 0!==(d=e[g]);g++)a.call(b,d,g,c);return e})},on:function(a,b){return this.storage.on(a,b)},emit:function(a,b){b=b||{};b.type=a;try{return this.storage.emit(a,b)}finally{return b.cancelable}},
parse:null,stringify:null,Model:null,_restore:function(a,b){var c=this.Model;if(c&&a){var g=c.prototype,d=g._restore;d?a=d.call(a,c,b):e&&b?a.__proto__=g:a=n.delegate(g,a)}return a},create:function(a){return new this.Model(a)},_createSubCollection:function(a){var c=n.delegate(this.constructor.prototype),e;for(e in this)this._includePropertyInSubCollection(e,c)&&(c[e]=this[e]);return b.safeMixin(c,a)},_includePropertyInSubCollection:function(a,b){return!(a in b)||b[a]!==this[a]},queryLog:[],filter:new c({type:"filter",
normalizeArguments:function(a){var b=this.Filter;return a instanceof b?[a]:[new b(a)]}}),Filter:g,sort:new c({type:"sort",normalizeArguments:function(a,b){var c;"function"===typeof a?c=[a]:(c=a instanceof Array?a.slice():"object"===typeof a?[].slice.call(arguments):[{property:a,descending:b}],c=m.map(c,function(a){a=n.mixin({},a);a.descending=!!a.descending;return a}),c=[c]);return c}}),select:new c({type:"select"}),_getQuerierFactory:function(a){return this["_create"+(a[0].toUpperCase()+a.substr(1))+
"Querier"]}})})},"dijit/form/_FormValueMixin":function(){define("dojo/_base/declare dojo/dom-attr dojo/keys dojo/_base/lang dojo/on ./_FormWidgetMixin".split(" "),function(n,m,k,h,d,b){return n("dijit.form._FormValueMixin",b,{readOnly:!1,_setReadOnlyAttr:function(b){m.set(this.focusNode,"readOnly",b);this._set("readOnly",b)},postCreate:function(){this.inherited(arguments);void 0===this._resetValue&&(this._lastValueReported=this._resetValue=this.value)},_setValueAttr:function(b,g){this._handleOnChange(b,
g)},_handleOnChange:function(b,g){this._set("value",b);this.inherited(arguments)},undo:function(){this._setValueAttr(this._lastValueReported,!1)},reset:function(){this._hasBeenBlurred=!1;this._setValueAttr(this._resetValue,!0)}})})},"dojo/dom-form":function(){define(["./_base/lang","./dom","./io-query","./json"],function(n,m,k,h){var d={fieldToObject:function(b){var c=null;if(b=m.byId(b)){var g=b.name,d=(b.type||"").toLowerCase();if(g&&d&&!b.disabled)if("radio"==d||"checkbox"==d)b.checked&&(c=b.value);
else if(b.multiple)for(c=[],b=[b.firstChild];b.length;)for(g=b.pop();g;g=g.nextSibling)if(1==g.nodeType&&"option"==g.tagName.toLowerCase())g.selected&&c.push(g.value);else{g.nextSibling&&b.push(g.nextSibling);g.firstChild&&b.push(g.firstChild);break}else c=b.value}return c},toObject:function(b){var c={};b=m.byId(b).elements;for(var g=0,h=b.length;g<h;++g){var a=b[g],e=a.name,q=(a.type||"").toLowerCase();if(e&&q&&0>"file|submit|image|reset|button".indexOf(q)&&!a.disabled){var k=c,w=e,a=d.fieldToObject(a);
if(null!==a){var r=k[w];"string"==typeof r?k[w]=[r,a]:n.isArray(r)?r.push(a):k[w]=a}"image"==q&&(c[e+".x"]=c[e+".y"]=c[e].x=c[e].y=0)}}return c},toQuery:function(b){return k.objectToQuery(d.toObject(b))},toJson:function(b,c){return h.stringify(d.toObject(b),null,c?4:0)}};return d})},"xcf/manager/Application_UI":function(){define("dcl/dcl require xide/utils xcf/views/DriverTreeView xcf/views/DeviceTreeView xcf/views/ProtocolTreeView xide/types xide/factory xace/views/Editor xide/Wizards xide/views/CIView dojo/has xide/editor/Default xide/layout/_Accordion xide/widgets/WidgetBase xide/views/ACEEditor xcf/views/_MainView xaction/Action xide/mixins/PersistenceMixin xide/views/JsonEditor xide/widgets/JSONDualEditorWidget xide/widgets/TemplatedWidgetBase xide/mixins/Electron dojo/Deferred dojo/promise/all xide/$ xide/lodash xide/console xcf/views/GlobalConsole xcf/widgets/CommandPicker xdojo/has!xcf-ui?xide/editor/Registry xdojo/has!x-markdown?x-markdown/views/MarkdownGrid wcDocker/iframe xide/views/WelcomeGrid xide/views/_Dialog xide/views/_Panel xide/wizard/WizardBase xide/views/_CIPanelDialog".split(" "),
function(n,m,k,h,d,b,c,g,p,a,e,q,u,w,r,v,x,A,z,y,B,C,E,F,G,D,H,J,Q,N,O,P,L,K,M,U,V,I){var T=window.sctx;if(T){var Z=function(a){var b=a.addProgress(D(a.contentNode),""),e=0;T.getDeviceManager().runAppServerComponentMethod("xfile","cp",["src","dst"],X,{onError:function(a){J.error("have error : ",a)},onProgress:function(a){e++;a=a[a.length-1];b.label.html(a.path);clearTimeout(null);if(a.total&&a.current){var g=(100*a.current/a.total).toFixed(2)+"%";b.progress.css("width",g);b.detail.html(Y(a.current)+
" of "+Y(a.total))}else b.detail.html(""),b.progress.css("width","0%"),setTimeout(function(){b.progress.css("width","100%")},10);T.publish(c.EVENTS.ON_STATUS_MESSAGE,{text:" Current "+a.current+" of "+a.total+" :  "+a.path,type:"warning"})},onFinish:function(a){b.root.remove();b.label.html("Done, copied "+e+" items.");b.label.addClass("text-info");b.detail.remove();b.progress.remove()},onInterrupt:function(b){S(X.id,b,a,function(a,c){T.getDeviceManager().answerAppServerComponentMethodInterrupt("xfile",
X.id,{answer:{overwrite:a,mode:c},iid:b.iid,error:b.error,path:b.path})})}})},S=function(a,b,e,d){(new (n(I,{type:c.DIALOG_TYPE.DANGER,containerClass:"CIDialog",title:"Error",onOk:function(a,b){this.headDfd.resolve(a);return!0},onCancel:function(b){this.headDfd.resolve(b);e.destroy();T.getDeviceManager().cancelAppServerComponentMethod("xfile",a)},cis:[],contentNode:null,did:!1,onShow:function(a,e,h){if(!this.did){this.did=!0;k.destroy(this.cisView);this.contentNode=e;D(e).css("padding","16px");switch(b.error){case "EEXIST":a=
D('\x3cdiv class\x3d""\x3e\x3clabel class\x3d"labelItem text-error" style\x3d"word-break:break-word"\x3e'+b.path+' Already exists!\x3c/label\x3e\x3cdiv class\x3d"detail"\x3e\x3c/div\x3e'),D(e).append(a),a.append("\x3chr/\x3e"),a.append("\x3cspan\x3e Overwrite this target ? \x3c/span\x3e"),e=D(g.createSimpleButton("Yes","","btn-danger",{},a[0])),W(e,c.EResolveMode.OVERWRITE,c.EResolve.THIS,d,this),e=D(g.createSimpleButton("No","","btn-info",{},a[0])).css("margin-left","16px"),W(e,c.EResolveMode.SKIP,
c.EResolve.THIS,d,this),a.append("\x3chr/\x3e"),a.append("\x3cspan\x3e Overwrite all targets ? \x3c/span\x3e"),e=D(g.createSimpleButton("All","","btn-danger",{},a[0])).css("margin-left","16px"),W(e,c.EResolveMode.OVERWRITE,c.EResolve.ALWAYS,d,this),e=D(g.createSimpleButton("If newer","","btn-danger",{},a[0])).css("margin-left","16px"),W(e,c.EResolveMode.IF_NEWER,c.EResolve.ALWAYS,d,this),e=D(g.createSimpleButton("If size siffers","","btn-danger",{},a[0])).css("margin-left","16px"),W(e,c.EResolveMode.IF_SIZE_DIFFERS,
c.EResolve.ALWAYS,d,this),a=D(g.createSimpleButton("None","","btn-info",{},a[0])).css("margin-left","16px"),W(a,c.EResolveMode.SKIP,c.EResolve.ALWAYS,d,this)}return[]}},CIViewOptions:{delegate:this,ciSort:!1,cis:[]},getContentSize:function(){return{width:"500px",height:"300px"}}}))).show()},W=function(a,b,c,e,g){a.on("click",function(){e(b,c);g.destroy()})},R=function(a){(new (n(I,{title:"Copy",type:c.DIALOG_TYPE.INFO,onOk:function(a,b){this.headDfd.resolve(a);return!0},onCancel:function(b){this.headDfd.resolve(b);
T.getDeviceManager().cancelAppServerComponentMethod("xfile",a)},cis:[],contentNode:null,onShow:function(a,b,c){k.destroy(this.cisView);this.contentNode=b;Z(this);D(b).css("padding","16px")},addProgress:function(a,b){b=D('\x3cdiv class\x3d"progress progress-striped"\x3e\x3cdiv class\x3d"progress-bar progress-bar-warning" style\x3d"width: 0%;"\x3e\x3c/div\x3e\x3c/div\x3e\x3clabel class\x3d"labelItem" style\x3d"word-break:break-word"\x3e'+b+'\x3c/label\x3e\x3cdiv class\x3d"detail"\x3e\x3c/div\x3e');
a.append(b);b=a.find(".progress-bar");var c=a.find(".progress-striped"),e=a.find(".labelItem");a=a.find(".detail");return{progress:b,label:e,root:D(c),detail:D(a)}},CIViewOptions:{delegate:this,ciSort:!1,cis:[]},getContentSize:function(){return{width:"500px",height:"200px"}}}))).show()},Y=function(a){var b=["Bytes","KB","MB","GB","TB"];if(0===a)return"n/a";var c=parseInt(Math.floor(Math.log(a)/Math.log(1024)));return 0===c?a+" "+b[c]:(a/Math.pow(1024,c)).toFixed(1)+" "+b[c]},X={id:k.createUUID()};
(function(){J.clear();var a=[k.createCI("Name",c.ECIType.FILE,"fileWidgetValue",{widget:{instant:!0,title:"Target",filePickerOptions:{allowElectron:!0}}})];(new I({title:"Copy",containerClass:"CIDialog",getContentSize:function(){return{width:"500px",height:"300px"}},onOk:function(a,b){this.headDfd.resolve(a);R(X.id);return!0},onCancel:function(a){this.headDfd.resolve(a)},cis:a,CIViewOptions:{delegate:this,ciSort:!1,cis:a}})).show()})()}q("electronx");b=n([z.dcl],{declaredClass:"xcf.manager.ApplicationPersistence",
defaultPrefenceTheme:"idle_fingers",defaultPrefenceFontSize:14,saveValueInPreferences:!0,cookiePrefix:"_xcf_application",getDefaultPreferences:function(){return k.mixin({theme:this.defaultPrefenceTheme,fontSize:this.defaultPrefenceFontSize},this.saveValueInPreferences?{}:null)},onAfterAction:function(a){this.savePreferences({});return this.inherited(arguments)},toPreferenceId:function(a){return(this.cookiePrefix||"")+"_xcf_application"},getDefaultOptions:function(){var a=this.inherited(arguments),
b=this.loadPreferences(null);b&&k.mixin(a,b)||this.savePreferences(this.getDefaultPreferences());return a}});return n(b.dcl,{declaredClass:"xcf.manager.Application_UI",mainView:null,leftLayoutContainer:null,rightLayoutContainer:null,showGUI:!0,showFiles:!0,lastPane:null,_lastWizard:null,_maximized:!1,grids:null,driverTreeView:null,deviceTreeView:null,openInOS:function(a){var b=window.eRequire;b||J.error("have no electron");var c=b("os"),e=b("electron").shell;b("path");"win32"!==c.platform()?e.openItem(a):
e.openItem("file:///"+a)},exportUser:function(){function a(a,b){if(d.isExporting)return b.close();x.windows=z.value&4?!0:!1;x.linux32=z.value&256?!0:!1;x.linux64=z.value&16?!0:!1;x.osx=z.value&65536?!0:!1;x.system=y.value;x.target=B.value;x.user=A.value;k.destroy(b.cisView);b.content.empty();b.content.css("padding","32px");b.content.append('\x3cspan class\x3d"fa-spinner fa-spin"\x3e\x3c/span\x3e');b.content.append('\x3cspan class\x3d"text-warning"\x3eExporting application, please wait\x3c/span\x3e');
d.isExporting=!0;g.getDeviceManager().runAppServerClass("components/xideve/Exporter",{options:x},{onError:function(a){J.error("have error : ",a);b.content.append('\x3cdiv class\x3d"text-fatal"\x3e'+a+"\x3c/div\x3e")},onProgress:function(a){b.content.append('\x3cdiv class\x3d"text-info"\x3e'+a+"\x3c/div\x3e")},onFinish:function(a){b.content.append('\x3cdiv class\x3d"text-success"\x3e'+a+"\x3c/div\x3e");q("electronx")&&d.openInOS(B.value)}})}var b=new F,e=[],g=this.getContext(),d=this,h=g.getResourceManager(),
p=g.getMount("root"),r=h.getVariable("USER_DIRECTORY"),m=p+"/data/",u=p+"/server/nodejs/dist/",u=p+"/server/",n=p+"/mc007/",v=h.getVariable("ARCH"),w=0;switch(h.getVariable("PLATFORM")){case "osx":w+=65536;break;case "win32":w+=4;break;case "linux":"64"===v&&(w+=16),"32"===v&&(w+=256)}var x={linux32:!1,linux64:!0,osx:!1,arm:!1,windows:!1,root:p,system:m,user:r+"/",nodeServers:u,target:n,debug:!1,layout:"release",platform:h.getVariable("PLATFORM")},z=k.createCI("Platforms",c.ECIType.FLAGS,w,{group:"Common",
data:[{value:2,label:"Windows"},{value:4,label:"Linux 64"},{value:8,label:"Linux 32"},{value:16,label:"OSX 64"}]}),h=k.createCI("Root Folder",c.ECIType.FILE,p,{group:"Source paths",visible:!0,description:"Absolute path to root",filePickerOptions:{allowElectron:!0}}),A=k.createCI("User Scope",c.ECIType.FILE,r,{group:"Source paths",visible:!0,description:"Absolute path to the user folder",filePickerOptions:{allowElectron:!0}}),y=k.createCI("System Scope",c.ECIType.FILE,m,{group:"Source paths",visible:!0,
description:"Absolute path to the system folder",filePickerOptions:{allowElectron:!0}}),B=k.createCI("Target Folder",c.ECIType.FILE,n,{group:"Common",visible:!0,description:"Absolute path to the output folder",filePickerOptions:{allowElectron:!0}}),e=e.concat([h,A,y,z,B]);this.isExporting=!1;e.reverse();(new I({title:"Export",containerClass:"CIDialog",onOk:function(b,c){a(b,c);this.headDfd.resolve(b);return!1},onCancel:function(a){this.headDfd.resolve(a)},cis:e,CIViewOptions:{delegate:this,ciSort:!1,
cis:e}})).show();return b},openGlobalConsole:function(){var a=this.ctx.getWindowManager().createTab("Global Console");k.addWidget(Q,{ctx:this.ctx},null,a,!0)},createAppActions:function(){var a=[];a.push(this.ctx.createAction({label:"Mini Update",command:"Window/MiniUpdate",icon:"fa-cloud",tab:"Home",group:"Window",owner:this,handler:function(){function a(a,b,c){var e=new F,g=u+"/"+a+("?time\x3d"+(new Date).getTime());v.file(a,{content:""});a=v.cwd()+"/"+a;a=q.createWriteStream(a);r(g).on("error",
function(a){J.error("error",a)}).on("response",function(a){var b=parseInt(a.headers["content-length"],10),g=0;a.on("data",function(a){g+=a.length;c((100*g/b).toFixed(2)+"%")}).on("error",function(a){e.resolve(a)})}).on("data",function(a){}).pipe(a);a.on("finish",function(){b();e.resolve()});return e}function b(b,c){return a(b,function(){},function(a){c&&c(a)})}function c(a){w||(w=!0,x.addDownloads(a).then(function(){x.$inner.append(D("\x3cdiv class\x3d'text-info'\x3eRestart all now!\x3c/div\x3e"))}))}
var e=n(C,{declaredClass:"xide.widgets.ArgumentsWidget",templateString:"\x3cdiv class\x3d'widget' style\x3d'overflow: auto'\x3e\x3cdiv attachTo\x3d'inner' style\x3d'width:100%;overflow: auto'\x3e\x3c/div\x3e\x3c/div\x3e",addDownload:function(a){var c=D("\x3cbr/\x3e\x3clabel\x3e"+a+'\x3c/label\x3e\x3cbr/\x3e\x3cdiv class\x3d"progress progress-striped active"\x3e\x3cdiv class\x3d"progress-bar progress-bar-info" style\x3d"width: 0%;"\x3e\x3c/div\x3e\x3c/div\x3e\x3chr/\x3e');this.$inner.append(c);var e=
this.$inner.find(".progress-bar"),g=this.$inner.find(".progress-striped");return b(a,function(a){e.css("width",a);e.html(a)}).then(function(){g.removeClass("active");e.addClass("progress-bar-info");e.html("Finish")})},addDownloads:function(a){this.all=[];H.each(a,function(a){this.all.push(this.addDownload(a))},this);return G(this.all)},startup:function(){}}),g=new E,d=g.srequire("fs-jetpack"),h=g.remote().app;g.srequire("http");var q=g.srequire("fs"),p=g.srequire("path"),r=g.srequire("request"),m=
"",m=h.getAppPath(),m=p.resolve(m+"/../../"),u="https://github.com/net-commander/windows-dist/raw/master/",v=d.cwd(m),g=this.ctx.getWindowManager().createTab("Update"),w=!1,x=k.addWidget(e,{},null,g,!0),z=["Code/client/src/xcf/dojo/xcf.js","server/nodejs/nxappmain/serverbuild.js","data/system/drivers/DriverBase.js","Code/client/src/lib/xblox/build/xblox.js","Code/client/src/lib/xblox/build/xbloxr.js"];try{a("data/update.json",function(){},function(){}).then(function(a){(a=p.resolve(m+"/data/update.json"))&&
q.statSync(a).size?(a=d.read(a),(a=k.fromJson(a))&&a.files?c(a.files):c(z)):c(z)})}catch(ua){logError(ua),c(z)}},mixin:{addPermission:!0},onCreate:function(a){a.setVisibility(c.ACTION_VISIBILITY.CONTEXT_MENU,{label:"Show Nav",group:"Organize"})}}));a.push(this.ctx.createAction({label:"Open Folder",command:"Window/Open Folder",icon:"fa-folder",tab:"Home",group:"Window",owner:this,handler:function(){var a=new E,b=a.getApp(),c=a.srequire("child_process").spawn;a.srequire("fs");var e=a.remote(),g=e.dialog.showOpenDialog({properties:["openDirectory"]});
if(g){e=e.BrowserWindow.args;a.srequire("yargs-parser")(e);var e=process.execPath,d=a.cwd();c(e,[d,"--userDirectory\x3d"+g],{cwd:a.cwd(),detached:!0});b.quit()}},mixin:{addPermission:!0}}));var b=this;a.push(this.ctx.createAction({label:"Global Console",command:"Window/Global Console",icon:"fa-calendar",tab:"Home",group:"Window",owner:this,handler:function(){return b.openGlobalConsole()},mixin:{addPermission:!0}}));a.push(this.ctx.createAction({label:"Export",command:"Window/Export",icon:"fa-save",
tab:"Home",group:"Window",owner:this,handler:function(){return b.exportUser()},mixin:{addPermission:!0}}));return a},openFile:function(a){var b=this,c=O.getEditor(a.editor)||O.getDefaultEditor({path:a.file})||O.getEditor("Default Editor"),e=window.eRequire;e("electron");e=e("electron").remote.BrowserWindow;(e=e.getFocusedWindow()||e.mainWindow)&&e.setTitle(a.file);c?(a=c.onEdit({path:a.file,mount:"__direct__",getPath:function(){return this.path}}),a._on?this.ctx.getWindowManager().registerView(a,
!0):a.then&&a.then(function(a){b.ctx.getWindowManager().registerView(a,!0)})):J.error("--have no editor ",a.editor)},registerCustomTypes:function(){function a(b,e,g){var h=k.getCIByChainAndName(b.cis,0,c.DEVICE_PROPERTY.CF_DEVICE_PROTOCOL);if(h){var q=h.value,p=h.device;e._hostTypeHead&&(e._hostTypeHead.destroy(),e._hostTypeHead=null);var r={ports:"22"};q===c.PROTOCOL.TCP&&(r={ports:"80"});q===c.PROTOCOL.MQTT&&(r={ports:"1883"});var m=D('\x3cspan class\x3d"input-group-addon" style\x3d"text-align: left"\x3e\x3ci class\x3d"fa fa-spinner fa-spin"\x3e\x3c/i\x3e\x3c/span\x3e');
D(e.previewNode).append(m);d.protocolMethod(q,"ls",[r],d.toDeviceControlInfo(p)).then(function(d){d=d.result;d=H.map(d,function(a){return{label:a.host,id:a.host||k.createUUID(),description:a.description||"No Description"}});g.value&&d.push({label:g.value,id:g.value,description:"Last Selected"});if(q===c.PROTOCOL.TCP||q===c.PROTOCOL.SSH||q===c.PROTOCOL.MQTT)d.push({label:"localhost",id:"localhost",description:"Default"}),d.push({label:"0.0.0.0",id:"0.0.0.0",description:"Default"});d=e.nativeWidget.typeahead(k.mixin({hint:!0,
highlight:!0,minLength:0,name:"states",source:function(a){return function(b,c){var e;e=[];D.each(a,function(a,b){e.push(b)});c(e)}}(d),autoSelect:!1,showHintOnFocus:"all",appendTo:D("body"),select:function(){var a=this.$menu.find(".active").data("value");this.$element.data("active",a);if(this.autoSelect||a)(a=this.updater(a))||(a=""),this.$element.val(this.displayText(a,!0)||a).change(),this.afterSelect(a);return this.hide()},highlighter:function(a){return a},displayText:function(a,b){return b?a.label:
a.id+' - \x3cspan class\x3d"text-info"\x3e'+a.description+"\x3c/span\x3e"}},{}));d=D(d).data("typeahead");e._hostTypeHead=d;e.add(d);m.remove();b._hostWidget=e;b.__setupHostCI||(b.__setupHostCI=!0,b._on("destroy",function(){delete b._hostWidget}),b._on("valueChanged",function(c){c.oldValue!==c.newValue&&c.ci==h&&a(b,b._hostWidget,g)}))},function(a){m.remove()})}}function b(a,e,g){var h=a.cis,q=k.getCIByChainAndName(h,0,c.DEVICE_PROPERTY.CF_DEVICE_PROTOCOL);if(q){var p=q.value,r=q.device,m=D('\x3cspan class\x3d"input-group-addon" style\x3d"text-align: left"\x3e\x3ci class\x3d"fa fa-spinner fa-spin"\x3e\x3c/i\x3e\x3c/span\x3e');
D(e.valueNode).append(m);d.protocolMethod(p,"options",[],d.toDeviceControlInfo(r)).then(function(b){m.remove();var g=k.getInputCIByName(h,c.DEVICE_PROPERTY.CF_DEVICE_PORT);g&&a.updateWidget(g.id,"disabled",!1);H.each(h,function(c){try{var e=k.getInputCIByName(b.result,c.name);e&&("disabled"in e&&a.updateWidget(e.id,"disabled",e.disabled),b.result.remove(e))}catch(ea){logError(ea,"error filtering options")}});e.render(b.result)},function(a){m.remove();e.$titleColumn.remove();a=k.getInputCIByName(r.user,
c.DEVICE_PROPERTY.CF_DEVICE_OPTIONS);a.type=c.ECIType.JSON_DATA;e.render([a])});a._optionsWidget=e;a.__setupOptionsCI||(a.__setupOptionsCI=!0,a._on("valueChanged",function(c){c.oldValue!==c.newValue&&c.ci==q&&b(a,a._optionsWidget,g)}))}else J.error("no protocol ci")}this.ctx.getResourceManager();var e=c.DEVICE_PROPERTY;c.registerType(c.ECIType.DEVICE_NETWORK_SETTINGS,[k.createCI(e.CF_DEVICE_HOST,13,"192.168.1.20",{group:"Network"}),k.createCI("Protocol",3,"tcp",{group:"Network",options:[{label:"TCP",
value:"tcp"},{label:"UDP",value:"udp"},{label:"Driver",value:"driver"},{label:"SSH",value:"ssh"},{label:"Serial",value:"serial"},{label:"MQTT",value:"mqtt"}]}),k.createCI("Port",13,"23",{group:"Network"}),k.createCI("Options",28,"{}",{group:"Network"})]);c.registerWidgetMapping("CommandSettings","xcf.widgets.CommandSettings");var d=this.getContext().getDeviceManager();c.registerCICallbacks(e.CF_DEVICE_HOST,{on:{render:function(b,c,e){a(b,c,e);D(g.createSimpleButton("","fa-search","btn-default",null,
c.button0)).on("click",function(){a(b,c,e)})}}});c.registerCICallbacks(e.CF_DEVICE_OPTIONS,{on:{render:function(a,c,e){b(a,c,e)}}})},onMainViewReady:function(){this.logPanel||0==q("log")||this.registerEditorExtensions()},start:function(a,b,e){this.args=e;this.showGUI=a;a=c.ACTION;b=D(b||"#root")[0];var g=[a.MAIN_MENU,a.NAVIGATION,a.STATUSBAR,a.TOOLBAR,a.WELCOME],d=!1;q("electronx")&&e&&e.file&&(g=[a.MAIN_MENU],d=!0);var h=k.addWidget(x,{ctx:this.ctx,permissions:g,config:this.config,windowManager:this.ctx.getWindowManager(),
container:b},null,b,!0);this.mainView=h;this.ctx.mainView=this.mainView;a=h.layoutLeft;d?this.mainView.layoutCenter=this.mainView.layoutLeft:(a=k.addWidget(w,{tabHeight:"500px"},null,a,!0),this.mainView.leftLayoutContainer=a,this.mainView.leftLayoutContainer.$containerNode.addClass("navigationPanel"),this.leftLayoutContainer=a);var p=this;this.doComponents().then(function(){p.registerCustomTypes();p.onComponentsReady();d?p.openFile(e):(p.initData().then(function(){setTimeout(function(){p.addWelcomeGrid()},
2E3)}),p.onAppCreated(),p.subscribe(c.EVENTS.ON_DEVICE_SERVER_CONNECTED,function(){p.args.userDirectory&&p.ctx.getDeviceManager().watchDirectory(p.args.userDirectory,!0)}));h._resize()})},onAppCreated:function(){this.getContext().ready()},registerEditorExtensions:function(){var a=this.ctx;u.Implementation.ctx=a;u.ctx=a;a.registerEditorExtension("Default Editor","*","fa-code",this,!1,function(a,b){var c=null;b&&H.isFunction(b.newTarget)&&(c=b.newTarget({title:a.name,icon:"fa-code"}));return u.Implementation.open(a,
c,null,null,b)},v,{updateOnSelection:!1,leftLayoutContainer:this.leftLayoutContainer,ctx:a,defaultEditor:!0});a.registerEditorExtension("JSON Editor","json","fa-code",this,!0,null,y,{updateOnSelection:!1,leftLayoutContainer:this.leftLayoutContainer,ctx:a,registerView:!0});c.registerCustomMimeIconExtension("cfhtml","fa-laptop");this.registerSplitEditors()},init:function(){this.ctx.addActions(this.getActions());this.ctx.addActions(this.getThemeActions());r.prototype.ctx=this.ctx;var a=this;this.subscribe(c.EVENTS.ON_EXPRESSION_EDITOR_ADD_FUNCTIONS,
this.onExpressionEditorAddFunctions);q("consoleError")&&-1!==location.href.indexOf("consoleError")&&((window.console=window.console||{}).error=function(b){a.publish(c.EVENTS.ON_STATUS_MESSAGE,{text:b,type:"error"})})},getLayoutRightMain:function(a,b){return this.mainView.getLayoutRightMain(a,b)},getRightTopTarget:function(a,b){return this.mainView.getRightTopTarget(a,b)},onExpressionEditorAddFunctions:function(a){var b=a.widget;a=a.root;if(b&&a){var c=b.device;if(c){var c=c.driverInstance,e=b.createBranch("Variables",
a.items);a.items.push(b.createLeaf("getVariable","this.getVariable('variableName')","Variables","gets a variable",!0,e));a.items.push(b.createLeaf("setVariable","this.setVariable('variableName')","Variables","sets a variable by name",!0,e));c&&b.createBranch("Driver",a.items)}}},initWidgets:function(){},initElectron:function(){document.addEventListener("dragover",function(a){a.preventDefault();a.stopPropagation()});var a=this;document.addEventListener("drop",function(b){b.preventDefault();b=Array.prototype.map.call(b.dataTransfer.files,
function(a){return a.path});0<b.length&&a.openFile({file:b[0]});return!1},!1)},onComponentsReady:function(){p.ctx=this.ctx;p.prototype.ctx=this.ctx;D("#loadingWrapper").remove();q("electronx")&&this.initElectron();this.addDocumenation();this.ctx.onComponentsReady()},addWelcomeGrid:function(){var a=this.getContext(),b=a.mainView,e=b.welcomePage.containerNode;D(e).empty();var g=a.getTrackingManager(),d=a.getRouter();g._init().then(function(){k.addWidget(K,{collection:new K.STORE_CLASS({}),_columns:{},
options:k.clone(c.DEFAULT_GRID_OPTIONS),router:d,ctx:a,trackingStore:g.getStore()},null,e,!0);b.getDocker().resize();b.layoutCenter.resize()})},addDocumenation:function(){if(P){var a=this.leftLayoutContainer,b=this,c=this.config,e=b.mainView,g=["internal","assets","modules","index","__"],d={micromatch:"(*.md)|(*.MD)|!(*.*)",_onAfterSort:function(a){return a=a.filter(function(a){return-1==g.indexOf(a.name)})}};m(["xfile/factory/Store","xfile/types","xfile/views/Grid","xfile/views/FileGrid"],function(g){g=
g.createFileStore("docs",null,c,null,b.ctx,d);var h=b.getNavigationState&&b.getNavigationState()||{documentation:!1},q=e.layoutCenter;e.getNewDefaultTab&&(q=function(a){return e.getNewDefaultTab(a)});var h=h.documentation,p=a.createTab("Documentation","fa-info",h),q=k.addWidget(P,{ctx:b.ctx,collection:g,startFile:"./01_Getting_Started.md",editor:!1,resizeToParent:!0,open:h,showHeader:!1,title:"Documentation",style:"height:100%;min-height:200px",getRightPanel:function(){return e.getNewDefaultTab({title:"Documentation"})},
newTabArgs:{showHeader:!0},getEditorTarget:function(){return e.getBottomPanel(!1,.5,"DefaultTab",null,e.layoutCenter)},newTarget:q},null,p,h);p.add(q);b.addNavigationGrid&&b.addNavigationGrid(q);h&&q.set("collection",g.getDefaultCollection());b.documentationGrid=q})}},addDeviceView:function(a){var b,c=this.ctx,e=c.getDeviceManager(),c=c.getWindowManager(),g=this.leftLayoutContainer;b=e.treeView=k.addWidget(d,{title:"Devices",collection:e.getStore("user_devices"),delegate:e,blockManager:this.ctx.getBlockManager(),
ctx:this.ctx,icon:"fa-sliders",showHeader:!1,scope:"user_devices",open:a},null,g,a);c.registerView(b,!1);setTimeout(function(){b.startup();b.select([0],null,!0,{focus:!0,append:!1,delay:1E3}).then(function(){})},500);this.addNavigationGrid(b);this.deviceTreeView=b},_saveNavigationState:function(){var a=this.ctx.getSettingsManager().getStore()||{getSync:function(){}},b={};a&&(a=a.getSync("navigationView"))&&a.value&&(b=a.value);this.deviceTreeView&&(b.devices=this.deviceTreeView.open);this.driverTreeView&&
(b.drivers=!!this.driverTreeView.open);this.fileGrid&&(b.files=!!this.fileGrid.open);this.documentationGrid&&(b.documentation=!!this.documentationGrid.open);this.ctx.getSettingsManager().write2(null,".",{id:"navigationView"},{value:b},!0,null)},getNavigationState:function(){var a=this.ctx.getSettingsManager().getStore()||{getSync:function(){}},b={devices:!0,drivers:!1,files:!1,documentation:!1};a&&(a=a.getSync("navigationView"))&&a.value&&(b=a.value);return b},addNavigationGrid:function(a){!this.grids&&
(this.grids=[]);this.grids.push(a);var b=this;a._on("show",function(){b._saveNavigationState()});a._on("hide",function(){b._saveNavigationState()})},initData:function(){var a=this,b=a.ctx,e=b.getDriverManager(),g=b.getDeviceManager();b.getLogManager();var d=b.getWindowManager();this.grids=[];var r=new F;p.ctx=a.ctx;p.prototype.ctx=a.ctx;N.prototype.ctx=a.ctx;this.publish(c.EVENTS.ON_STATUS_MESSAGE,{text:"Load data, please wait",timeout:8E3});var m=this.getNavigationState();D("#loadingWrapper").remove();
e.ls("system_drivers").then(function(){e.ls("user_drivers").then(function(){a.publish(c.EVENTS.ON_STATUS_MESSAGE,{text:"Load Drivers, please wait..."});g.ls("user_devices").then(function(){g.ls("system_devices").then(function(){a.publish(c.EVENTS.ON_STATUS_MESSAGE,{text:"Start Device View, please wait...",type:"success"});a.showGUI&&a.addDeviceView(m.devices)})});if(a.showGUI)try{var b=e.treeView=k.addWidget(h,{title:"Drivers",store:e.getStore("user_drivers"),delegate:e,blockManager:a.ctx.getBlockManager(),
scope:"user_drivers",ctx:a.ctx,icon:"fa-exchange",open:m.drivers},e,a.leftLayoutContainer,m.drivers);d.registerView(b,!1);a.publish(c.EVENTS.ON_STATUS_MESSAGE,{text:"Driver View Ready"});m.drivers&&setTimeout(function(){b.startup()},500);r.resolve();a.addNavigationGrid(b);a.driverTreeView=b}catch(ca){logError(ca,"Driver Tree-View creation failed")}q("log")})});this.ctx.mainView.resize();this.ctx.mainView.layoutLeft.__update();return r},registerSplitEditors:function(){},createProtocolWizard:function(){},
createWizard:function(){}})})},"xide/json/util":function(){define(["module","exports"],function(n){var m={parse:function(d){try{return JSON.parse(d)}catch(b){throw m.validate(d),b;}},sanitize:function(d){function b(){return d.charAt(e)}function c(){for(var a=e-1;0<=a;){var b=d.charAt(a);if("{"===b)return!0;if(" "===b||"\n"===b||"\r"===b)a--;else break}return!1}function g(c){a.push('"');e++;for(var g=b();e<d.length&&g!==c;)'"'===g&&"\\"!==d.charAt(e-1)&&a.push("\\"),"\\"===g&&(e++,g=b(),"'"!==g&&a.push("\\")),
a.push(g),e++,g=b();g===c&&(a.push('"'),e++)}function h(){for(var c="",g=b(),d=/[a-zA-Z_$\d]/;d.test(g);)c+=g,e++,g=b();-1===["null","true","false"].indexOf(c)?a.push('"'+c+'"'):a.push(c)}var a=[],e=0,q=d.match(/^\s*(\/\*(.|[\r\n])*?\*\/)?\s*[\da-zA-Z_$]+\s*\(([\s\S]*)\)\s*;?\s*$/);for(q&&(d=q[3]);e<d.length;)if(q=b(),"/"===q&&"*"===d.charAt(e+1)){for(e+=2;e<d.length&&("*"!==b()||"/"!==d.charAt(e+1));)e++;e+=2}else"'"===q||'"'===q?g(q):/[a-zA-Z_$]/.test(q)&&c()?h():(a.push(q),e++);return a.join("")},
validate:function(d){"undefined"!=typeof jsonlint?jsonlint.parse(d):JSON.parse(d)},extend:function(d,b){for(var c in b)b.hasOwnProperty(c)&&(d[c]=b[c]);return d},clear:function(d){for(var b in d)d.hasOwnProperty(b)&&delete d[b];return d},log:function(d){"undefined"!==typeof console&&"function"===typeof console.log&&console.log.apply(console,arguments)},type:function(d){return null===d?"null":void 0===d?"undefined":d instanceof Number||"number"===typeof d?"number":d instanceof String||"string"===typeof d?
"string":d instanceof Boolean||"boolean"===typeof d?"boolean":d instanceof RegExp||"regexp"===typeof d?"regexp":m.isArray(d)?"array":"object"}},k=/^https?:\/\/\S+$/;m.isUrl=function(d){return("string"==typeof d||d instanceof String)&&k.test(d)};m.isArray=function(d){return"[object Array]"===Object.prototype.toString.call(d)};m.getAbsoluteLeft=function(d){return d.getBoundingClientRect().left+window.pageXOffset||document.scrollLeft||0};m.getAbsoluteTop=function(d){return d.getBoundingClientRect().top+
window.pageYOffset||document.scrollTop||0};m.addClassName=function(d,b){var c=d.className.split(" ");-1==c.indexOf(b)&&(c.push(b),d.className=c.join(" "))};m.removeClassName=function(d,b){var c=d.className.split(" ");b=c.indexOf(b);-1!=b&&(c.splice(b,1),d.className=c.join(" "))};m.stripFormatting=function(d){d=d.childNodes;for(var b=0,c=d.length;b<c;b++){var g=d[b];g.style&&g.removeAttribute("style");var h=g.attributes;if(h)for(var a=h.length-1;0<=a;a--){var e=h[a];!0===e.specified&&g.removeAttribute(e.name)}m.stripFormatting(g)}};
m.setEndOfContentEditable=function(d){var b;document.createRange&&(b=document.createRange(),b.selectNodeContents(d),b.collapse(!1),d=window.getSelection(),d.removeAllRanges(),d.addRange(b))};m.selectContentEditable=function(d){if(d&&"DIV"==d.nodeName){var b;window.getSelection&&document.createRange&&(b=document.createRange(),b.selectNodeContents(d),d=window.getSelection(),d.removeAllRanges(),d.addRange(b))}};m.getSelection=function(){if(window.getSelection){var d=window.getSelection();if(d.getRangeAt&&
d.rangeCount)return d.getRangeAt(0)}return null};m.setSelection=function(d){if(d&&window.getSelection){var b=window.getSelection();b.removeAllRanges();b.addRange(d)}};m.getSelectionOffset=function(){var d=m.getSelection();return d&&"startOffset"in d&&"endOffset"in d&&d.startContainer&&d.startContainer==d.endContainer?{startOffset:d.startOffset,endOffset:d.endOffset,container:d.startContainer.parentNode}:null};m.setSelectionOffset=function(d){if(document.createRange&&window.getSelection&&window.getSelection()){var b=
document.createRange();b.setStart(d.container.firstChild,d.startOffset);b.setEnd(d.container.firstChild,d.endOffset);m.setSelection(b)}};m.getInnerText=function(d,b){void 0==b&&(b={text:"",flush:function(){var a=this.text;this.text="";return a},set:function(a){this.text=a}});if(d.nodeValue)return b.flush()+d.nodeValue;if(d.hasChildNodes()){d=d.childNodes;for(var c="",g=0,h=d.length;g<h;g++){var a=d[g];if("DIV"==a.nodeName||"P"==a.nodeName){var e=d[g-1];(e=e?e.nodeName:void 0)&&"DIV"!=e&&"P"!=e&&"BR"!=
e&&(c+="\n",b.flush());c+=m.getInnerText(a,b);b.set("\n")}else"BR"==a.nodeName?(c+=b.flush(),b.set("\n")):c+=m.getInnerText(a,b)}return c}return"P"==d.nodeName&&-1!=m.getInternetExplorerVersion()?b.flush():""};m.getInternetExplorerVersion=function(){if(-1==h){var d=-1;"Microsoft Internet Explorer"==navigator.appName&&null!=/MSIE ([0-9]{1,}[.0-9]{0,})/.exec(navigator.userAgent)&&(d=parseFloat(RegExp.$1));h=d}return h};m.isFirefox=function(){return-1!=navigator.userAgent.indexOf("Firefox")};var h=-1;
m.addEventListener=function(d,b,c,g){if(d.addEventListener)return void 0===g&&(g=!1),"mousewheel"===b&&m.isFirefox()&&(b="DOMMouseScroll"),d.addEventListener(b,c,g),c;if(d.attachEvent)return g=function(){return c.call(d,window.event)},d.attachEvent("on"+b,g),g};m.removeEventListener=function(d,b,c,g){d.removeEventListener?(void 0===g&&(g=!1),"mousewheel"===b&&m.isFirefox()&&(b="DOMMouseScroll"),d.removeEventListener(b,c,g)):d.detachEvent&&d.detachEvent("on"+b,c)};return m})},"xace/views/_Split":function(){define(["dcl/dcl"],
function(n){var m=null;n=n(null,{declaredClass:"xace/views/Split"});n.getSplitter=function(){function k(a,b){this.$u=a;this.$doc=b}if(m)return m;var h=ace.require,d=h("ace/lib/oop"),b=h("ace/lib/lang"),c=h("ace/lib/event_emitter").EventEmitter,g=h("ace/editor").Editor,p=h("ace/virtual_renderer").VirtualRenderer,a=h("ace/edit_session").EditSession,e=h("ace/undomanager").UndoManager;h("ace/keyboard/hash_handler");h=function(a,b,c){this.BELOW=1;this.BESIDE=0;this.$container=a;this.$theme=b;this.$splits=
0;this.$editorCSS="";this.$editors=[];this.$orientation=this.BESIDE;this.setSplits(c||1);this.$cEditor=this.$editors[0];this.on("focus",function(a){this.$cEditor=a}.bind(this))};(function(){d.implement(this,c);this.$createEditor=function(){var a=document.createElement("div");a.className=this.$editorCSS;a.style.cssText="position: absolute; top:0px; bottom:0px";this.$container.appendChild(a);var b=new g(new p(a,this.$theme));b.on("focus",function(){this._emit("focus",b)}.bind(this));this.$editors.push(b);
b.session.setUndoManager(new e);b.setFontSize(this.$fontSize);return b};this.setSplits=function(a){var b;if(1>a)throw"The number of splits have to be \x3e 0!";if(a!=this.$splits){if(a>this.$splits){for(;this.$splits<this.$editors.length&&this.$splits<a;)b=this.$editors[this.$splits],this.$container.appendChild(b.container),b.setFontSize(this.$fontSize),this.$splits++;for(;this.$splits<a;)this.$createEditor(),this.$splits++}else for(;this.$splits>a;)b=this.$editors[this.$splits-1],this.$container.removeChild(b.container),
this.$splits--;this.resize()}};this.getSplits=function(){return this.$splits};this.getEditor=function(a){return this.$editors[a]};this.getCurrentEditor=function(){return this.$cEditor};this.focus=function(){this.$cEditor.focus()};this.blur=function(){this.$cEditor.blur()};this.setSessionOption=function(a,b){this.$editors.forEach(function(c){c=c.session;"mode"==a&&c.setMode(b)})};this.setTheme=function(a){this.$editors.forEach(function(b){b.setTheme(a)})};this.setKeyboardHandler=function(a){this.$editors.forEach(function(b){b.setKeyboardHandler(a)})};
this.forEach=function(a,b){this.$editors.forEach(a,b)};this.$fontSize="";this.setFontSize=function(a){this.$fontSize=a;this.forEach(function(b){b.setFontSize(a)})};this.$cloneSession=function(c){var e=new a(c.getDocument(),c.getMode()),g=c.getUndoManager();g&&(g=new k(g,e),e.setUndoManager(g));e.$informUndoManager=b.delayedCall(function(){e.$deltas=[]});e.setTabSize(c.getTabSize());e.setUseSoftTabs(c.getUseSoftTabs());e.setOverwrite(c.getOverwrite());e.setBreakpoints(c.getBreakpoints());e.setUseWrapMode(c.getUseWrapMode());
e.setUseWorker(c.getUseWorker());e.setWrapLimitRange(c.$wrapLimitRange.min,c.$wrapLimitRange.max);e.$foldData=c.$cloneFoldData();return e};this.setSession=function(a,b){b=null==b?this.$cEditor:this.$editors[b];this.$editors.some(function(b){return b.session===a})&&(a=this.$cloneSession(a));b.setSession(a);return a};this.getOrientation=function(){return this.$orientation};this.setOrientation=function(a){this.$orientation!=a&&(this.$orientation=a,this.resize())};this.resize=function(){var a=this.$container.clientWidth,
b=this.$container.clientHeight,c;if(this.$orientation==this.BESIDE){a/=this.$splits;this.diffGutter&&(a-=60/this.$splits);for(var e=0;e<this.$splits;e++){c=this.$editors[e];c.container.style.width=a+"px";c.container.style.top="0px";c.container.style.left=e*a+"px";1==e&&this.diffGutter&&(c.container.style.left=60+e*a+"px",this.diffGutter.style.left=e*a+"px");if(!b)break;$(c.container).css("height",b+"px");var g=$(c.container).find(".ace_content");c.resize();g.css("height",b+"px")}}else for(b/=this.$splits,
e=0;e<this.$splits;e++)c=this.$editors[e],c.container.style.width=a+"px",c.container.style.top=e*b+"px",c.container.style.left="0px",c.container.style.height=b+"px",c.resize()}}).call(h.prototype);(function(){this.execute=function(a){this.$u.execute(a)};this.undo=function(){var a=this.$u.undo(!0);a&&this.$doc.selection.setSelectionRange(a)};this.redo=function(){var a=this.$u.redo(!0);a&&this.$doc.selection.setSelectionRange(a)};this.reset=function(){this.$u.reset()};this.hasUndo=function(){return this.$u.hasUndo()};
this.hasRedo=function(){return this.$u.hasRedo()}}).call(k.prototype);return m=h};return n})},"davinci/ve/actions/ViewDesignAction":function(){define(["dojo/_base/declare","davinci/ve/actions/ContextAction"],function(n,m){return n("davinci.ve.actions.ViewDesignAction",[m],{run:function(k){(k=this.fixupContext(k))&&k.editor&&k.editor.switchDisplayModeDesign&&k.editor.switchDisplayModeDesign()},updateStyling:function(){var k=davinci.Workbench.getOpenEditor();if(k&&k.getDisplayMode){var k=k.getDisplayMode(),
h=dojo.query(".maqDesignButton")[0];h&&("design"==k?dojo.addClass(h,"maqLabelButtonSelected"):dojo.removeClass(h,"maqLabelButtonSelected"))}}})})},"davinci/ve/actions/CopyAction":function(){define(["dojo/_base/declare","./_CutCopyAction","../../Runtime"],function(n,m,k){return n("davinci.ve.actions.CopyAction",[m],{_invokeSourceEditorAction:function(h){h.htmlEditor.copyAction.run()},_executeAction:function(h,d,b,c){c=k.clipboard;k.clipboard=b;if(!c)h.onSelectionChange(d)}})})},"xgrid/GridLite":function(){define(["dojo/_base/declare",
"xide/types","./BaseLite"],function(n,m,k){n=n("xgrid/Grid",k,{});n.createGridClass=k.createGridClass;n.classFactory=k.classFactory;n.DEFAULT_GRID_FEATURES=m.DEFAULT_GRID_FEATURES_LITE;n.DEFAULT_GRID_BASES=k.DEFAULT_GRID_BASES;n.DEFAULT_GRID_OPTIONS=m.DEFAULT_GRID_OPTIONS;n.DEFAULT_GRID_OPTION_KEYS=m.DEFAULT_GRID_OPTION_KEYS;return n})},"xdojo/declare":function(){define(["dcl/dcl","module","xide/utils","dojo/_base/declare"],function(n,m,k,h){(function(d){d.classFactory=function(b,c,g,h,a){a=null!=
c?c:k.cloneKeys(a||{});g=g||[];b=b||"xgrid.Base";h=h||{};c&&k.mixin(a,c);c=[];for(var e in a)a[e]&&c.push(a[e]);c=c.concat(g);return d(b,c,h)}})(h);return h})},"xwire/Source":function(){define(["dcl/dcl","xide/types","xwire/_Base"],function(n,m,k){return n(k,{declaredClass:"xwire.Source"})})},"davinci/lang/ve/ve":function(){define([],function(){return{common:"Common",widgetSpecific:"Widget",events:"Events",layout:"Layout",showMinMax:"show min/max",padding:"Padding",margins:"Margins",showtrbl:"show t/r/b/l",
background:"Background",border:"Border",showDetails:"show details",fontsAndText:"Fonts/Text",shapesSVG:"SVG",properties:"properties",Scenes:"Scenes",States:"States",ActiveScene:"This scene is currently visible",AppStateFocus:"This application state is the target for application-state-specific visibility or styling changes",InitialScene:"This scene will show initially when the page runs",chooseDeviceSilhouette:"Choose a device silhouette: ",filesHasUnsavedChanges:"The file '${0}' has unsaved changes, \"Save\" changes and continue with switch device silhouette.",
selectAncestorTitle:"Select ancestor",selectAncestorLabel:"Select ancestor (closest ancestor listed first):",createNewState:"Create New State",updateCurrentState:"Update Current State",createLabel:"Create",updateLabel:"Update",modifyState:"Modify State",modifyLabel:"Update",stateLabel:"Name",enterStateName:"Please enter a state name.",stateNameExists:"State name '${name}' already exists. Please enter a different state name.",renameState:"Rename State",renameLabel:"Rename",cancelLabel:"Cancel",newStateLabel:"New name:",
manageStates:"Manage Widget Visibility for Different States",manageStatesCheckLabel:"Check:",manageStatesCheckCurrentStateOnly:"Current state",manageStatesCheckAll:"All",manageStatesUncheckAll:"None",manageStatesCheckBackgroundOnly:"Background only",manageStatesAllVisibleFromBackground:"(Visible from Background)",manageStatesSomeVisibleFromBackground:"(Some visible from Background)",manageStatesSomeVisibleSomeHidden:"(Some visible, some hidden)",initialStateCheckBoxLabel:"Initial state at document load time",
EnableApplicationStates:"Enable/disable application states",EnableAsStateContainerDescription:"Setting the check box below and clicking OK will allow custom application states to be defined on the currently selected widget.",DisableAsStateContainerDescription:"Unsetting the check box below and clicking OK will disallow custom application states on the currently selected widget.",DisableAsStateContainerDataLoss:"Any existing interactivity based on existing application states will be lost.",EnableAsStateContainerWidgetLabel:"Application states are enabled on this widget",
EnableApplicationStatesCurrentWidget:"Currently selected widget",EnableApplicationStatesCurrentStates:"Current application states",EnableApplicationStatesNone:"(none)",NewWidgetsCurrentStateTitleBackground:"Toggle whether new widgets go to Background or selected state (current value: Background)",NewWidgetsCurrentStateTitleCurrentState:"Toggle whether new widgets go to Background or selected state (current value: selected state)",richTextInputHelp:"Provides Rich Text (word processor-like) editing of HTML.",
smartInputHelp1:"If you use any markup characters (\x26lt;,\x26gt;,\x26amp;), you need to specify whether the text represents literal (plain) text or HTML markup that should be parsed (using an innerHTML assignment).",smartInputHelp2:"Text represents literal (plain) text.",loading:"Loading...",htmlMarkup:"HTML markup",creatingStyleRules:"Creating Style Rules with app.css",propChangeCannotComplete:"This property change cannot be completed because the operation attempts to modify a read-only theme CSS file.",
toChangeProperty:"To change this property, one technique is to add a class to this widget (at top of Properties palette)  and then open up the CSS Details pane to target a style rule within your app.css file, as described at ${0}.",errorModifyingValue:"Error modifying value",changeWillModify:"This change will modify one of the CSS style rules defined within a 'CSS theme' and will therefore probably impact other widgets on a global basis.",insteadOfChanging:"Instead of changing the theme CSS files, it is usually better to add a class to this widget (at the top of the Properties palette) and then open up the CSS Details pane to target a style rule within your app.css file, as described at ${0}.",
okToProceed:"OK to proceed with this change?",valueIsOverriden:"This value is overriden and can not be changed.",applyToWhich:"Apply to which style rule:",onlyApplyToState:" Only apply to current state (${0})",newRule:"[class: ${0} - New rule in ${1}] ",newThemeRule:"[theme: - New rule in ${0}] ",existingRule:"[class: ${0} - Existing rule in ${1}] ",line:" line: ${0})",propUndefined:"undefined",bgdType_emptystring:"",bgdType_none:"none",bgdType_url:"image",bgdType_linear:"linear gradient",bgdType_radial:"radial gradient",
bgdType_other:"other",bgdPickFile:"Choose...",bgdStop:"Stop",bgdAddStop:"Add a new gradient stop after this stop",bgdRemoveStop:"Remove this gradient stop",bgdBackgroundColor:"background-color:",bgdBackgroundImageType:"background-image type:",bgdImageUrl:"Image URL:",bgdUrl:"URL:",bgdColorStops:"Color stops:",bgdColor:"color",bgdPosition:"position",bgdOptions:"Options:",bgdAngle:"Angle:",bgdPosition2:"Position:",bgdShape:"Shape:",bgdExtent:"Extent:",bgdBackgroundRepeat:"background-repeat:",bgdBackgroundPosition:"background-position:",
bgdBackgroundSize:"background-size:",bgdBackgroundOrigin:"background-origin:",bgdBackgroundClip:"background-clip:",bgdBackgroundImageValue:"'background-image' value:",bgdTemplate:"Template:",colorPicker:"Color picker...",removeValue:"Remove Value",selectColor:"select a color",toolBarFor:"",noSelection:"(no selection)",toolBarClass:"class:",toolBarId:"ID:",idAlreadyUsed:"This id is already used by another widget",noValidParents:"No valid parents at this position",willBeChildOf:"Will become a child of:",
candidateParents:"Candidate parents:",toChangePress:"To change, press numbers",vteWarningTitle:"Theme Version Warning",vteWarningMessage:"Theme version does not match Maqetta version this could produce unexpected results. We suggest recreating the custom theme using the current version of Maqetta and deleting the existing theme.",vteWarningUnsuportedBrowserTitle:"Unsupported brower",vteWarningUnsuportedBrowserMessage:"Editing mobile themes is only supported on webkit browsers, we sugguest using Chrome or Safari to customize mobile themes.",
vteWarningToolkitMessage:"Theme version does not match workspace library version this could produce unexpected results. We suggest recreating the custom theme using the current version of Maqetta and deleting the existing theme.",vteErrorTitle:"Theme Version Error",vteErrorMessage:"Theme version is not supported by this version of Maqetta. You must recreating custom theme using the current version of Maqetta and deleting the existing theme..",vteErrorSavingResourceMessage:"error saving resource\n",
"SourceComboButton-source":"Source","SourceComboButton-splitHorizontal":"Split-H","SourceComboButton-splitVertical":"Split-V","LayoutDropDownButton-flow":"Flow","LayoutDropDownButton-absolute":"Absolute"}})},"xwire/_Base":function(){define(["dcl/dcl","xide/mixins/EventedMixin"],function(n,m){function k(d,b){b=h(b);for(var c=0,g=b.length;c<g;++c){var p=b[c];d=null==d?d:d[p]}return d}function h(d,b){return""===d?[]:"function"!==typeof d.splice?d.split("."):b?d.slice():d}return n([m.dcl],{declaredClass:"xwire._Base",
constructor:function(d){for(var b in d)d.hasOwnProperty(b)&&(this[b]=d[b])},getValue:function(d,b){return k(d,b)},setValue:function(d,b,c){var g=h(b,!0),p=g.pop();d=0<g.length?k(d,g):d;return Object(d)===d&&b?"function"===typeof d.set?d.set(p,c):d[p]=c:void 0}})})},"davinci/ve/_ContextDocument":function(){define("dojo/_base/declare dojo/dom-class dojo/dom-construct dojo/query dojo/_base/connect dojo/window xide/utils xide/factory xide/types ../UserActivityMonitor ../model/Path ../Workbench ./widget ./metadata ../html/HTMLElement ../workbench/Preferences dojox/html/_base".split(" "),
function(n,m,k,h,d,b,c,g,p,a,e,q,u,w,r,v){var x=function(a){var b=w.getLibrary();a&&dojo.filter(a.attributes,function(a){return"on"==a.nodeName.substr(0,2).toLowerCase()}).forEach(function(a){var c=!1,e;for(e in b)if(c=w.getLibrary(e),c=w.invokeCallback(c,"requiredEventAttribute",[a]))break})};return n(null,{hasDirtyResources:function(){return!1},getCompType:function(){var a=this.getDocumentElement().getChildElement("body"),b=a&&a.getAttribute("data-maq-comptype");a&&!b&&(b=this.getMobileDevice()?
"mobile":"desktop",a.addAttribute("data-maq-comptype",b));return b},_significantAttrs:{link:"href",meta:"name"},getContainerNode:function(){return this.rootNode},getParentIframe:function(){if(!this._parentIframeElem)for(var a=this.getDocument(),b=document.getElementsByTagName("iframe"),c=0;c<b.length;c++)if(b[c].contentDocument===a){this._parentIframeElem=b[c];break}return this._parentIframeElem},getModel:function(){return this._srcDocument},setSource:function(a,b,c,e){dojo.withDoc(this.getDocument(),
"_setSource",this,arguments);this.editor&&this.editor._setDirty()},getBase:function(){return""},getFullResourcePath:function(){if(!this._fullResourcePath){var a=this.getModel().fileName;this._fullResourcePath=new e(a)}return this._fullResourcePath},_getCurrentBasePath:function(){var a=new e(q.getProject()),b=v.getPreferences("davinci.ui.ProjectPrefs",a);null!==b.webContentFolder&&""!==b.webContentFolder&&(a=a.append(b.webContentFolder));return a},getRelativeFileString:function(a){var b=this.getFullResourcePath().getParentPath();
return this._getCurrentBasePath().append(a).relativeTo(b).toString()},_setSource:function(a,e,g,d){delete this._requireHtmlElem;delete this._dojoScriptElem;delete this.rootWidget;if(this.frameNode){var h=this.frameNode.contentDocument||this.frameNode.contentWindow&&this.frameNode.contentWindow.document;if(h)try{var q=b.get(h).require("dijit/registry")._destroyAll();q&&(q.forEach(function(a){c.destroy(a,!0)}),q._hash={})}catch(F){console.error("error cleaning registry",F)}}this._srcDocument=a;d&&(h=
a.getDocumentElement().getChildElement("body"),h.setAttribute("data-maq-device",d.device),h.setAttribute("data-maq-flow-layout",d.flowlayout),h.setAttribute("data-maq-comptype",d.comptype));this.loadRequires("html.body",!0,!1,!0).then(function(){d&&this.loadTheme(d);this._setSourcePostLoadRequires(a,e,g,d)}.bind(this))},_setSourceData:function(a){g.publish(p.EVENTS.ON_SET_SOURCE_DATA,{data:a,context:this,editor:this.editor},this);this.getGlobal();this.themeChanged();var b={title:a.title,scripts:a.scripts,
modules:a.modules,styleSheets:a.styleSheets,bodyClasses:a.bodyClasses,style:a.style};g.publish(p.EVENTS.ON_BUILD_HEADER,{data:b,context:this,editor:this.editor},this);this.setHeader(b);var c=a.content||"";if(b=this.isActive())this.select(null),this.getTopWidgets().forEach(this.detach,this);var e={},d=this.getContainerNode();a.maqAppStates&&(e.body=a.maqAppStates);this.getTopWidgets().forEach(function(a){a.getContext()&&a.destroyWidget()});var q=this.getGlobal().require("dijit/registry");q.forEach(function(a){a.destroy()});
q.forEach(function(a){a.destroy();q.remove(a.id)});var c=c.replace(/<\s*\/\s*br\s*>/gi,""),k;this.getGlobal();var r=this.getDojo();r.create||this.getGlobal().require(["dojo/dom-construct","dojo/dom-style","dojo/dom-attr","dojo/_base/html"],function(a,b,c,e){r.create=a.create;r.destroy=a.destroy;r.place=a.place;r.toDom=a.toDom});this.getGlobal().require("dojox/html/_base").set(d,c,{executeScripts:!0,onEnd:function(){k=this._code;this.executeScripts=!1;this.inherited("onEnd",arguments)}});x(d);h("*",
d).forEach(x);d.setAttribute("data-maq-ws","collapse");(a=this._srcDocument.getDocumentElement().getChildElement("body"))&&a.addAttribute("data-maq-ws","collapse");this.getGlobal();(a=this.getDocumentElement().getChildElement("body"))&&a.getAttribute("data-maq-device");var m={SCRIPT:1,STYLE:1},n=function(a){dojo.forEach(a.childNodes,function(a){3==a.nodeType?a.nodeValue=a.data.replace(/^[\f\n\r\t\v\ ]+$/g,""):1!=a.nodeType||m[a.nodeName]||n(a)})};n(d);this._loadFileStatesCache=e;this.global=this.getGlobal();
return this._processWidgets(d,b,this._loadFileStatesCache,k)},getSource:function(){return this._srcDocument.getText()},getDocumentElement:function(){return this._srcDocument.getDocumentElement()},getDocumentLocation:function(){return this._srcDocument.fileName},getHeader:function(){return this._header||{}},setHeader:function(a){var b=[],c,e,g;this._header&&(b=this._header.styleSheets||[],e=this._header.bodyClasses);if(a){c=a.styleSheets||[];g=a.bodyClasses;if(a.modules){var d=this.getGlobal().require;
a.modules.map(function(a){return[a.replace(/\./g,"/")]}).forEach(d)}if(a.className){var h=a.className.split(" ");dojo.some(h,function(a,b){h.splice(b,1);g=h.join(" ");return!0})}}e!=g&&(d=this.getContainerNode(),e&&m.remove(d,e),g&&m.add(d,g));b!=c&&(b=[].concat(b),dojo.forEach(c,function(a){var c=dojo.indexOf(b,a);0>c?this.loadStyleSheet(a):b.splice(c,1)},this),dojo.forEach(b,this.unloadStyleSheet,this));this.setStyle(a?a.style:void 0);this._header=a},onload:function(){this.getCompType();this._connects=
(this._connects||[]).concat(a.addInActivityMonitor(this.getDocument()));var b=this.getMobileDevice();b&&(this.setMobileDevice(b),this.visualEditor.setDevice(b,!0),this.visualEditor.setOrientation(this.getMobileOrientation()));this._configDojoxMobile(!0);window.setTimeout(function(){this.widgetAddedOrDeleted();d.publish("/davinci/ui/context/loaded",[this]);this._markDirtyAtLoadTime?(this.editor.setDirty(!0),delete this._markDirtyAtLoadTime,this.editor.save(!0)):this.editor.setDirty(this.hasDirtyResources());
this.addPseudoClassSelectors()}.bind(this),500)},_onLoadHelpers:function(){var a={};h("\x3e *",this.rootNode).map(u.getWidget).forEach(function(b){var c=b.getHelper();if(c&&c.onLoad){var e=a[b.type];a[b.type]=!0;c.onLoad(b,e)}},this)},_addHeadElement:function(a,b,c){var e=this.getDocumentElement().getChildElement("head");if(!c){var g=this._significantAttrs[a]||"src";if(e.getChildElements(a).some(function(a){return a.getAttribute(g)===b[g]}))return}c=new r(a);for(var d in b)b.hasOwnProperty(d)&&c.addAttribute(d,
b[d]);e.addChild(c);dojo.withGlobal(this.getGlobal(),function(){k.create(a,b,h("head")[0])})},_removeHeadElement:function(a,b){var c=this.getDocumentElement().getChildElement("head");c.getChildElements(a).some(function(a){var e=!0,g;for(g in b)if(b.hasOwnProperty(g)&&a.getAttribute(g)!==b[g]){e=!1;break}if(e)return c.removeChild(a),!0});dojo.withGlobal(this.getGlobal(),function(){var c=a,e;for(e in b)b.hasOwnProperty(e)&&(c+="["+e+'\x3d"'+b[e]+'"]');h(c).orphan()})},getDocument:function(){var a=this.getContainerNode();
return a&&a.ownerDocument},getGlobal:function(){var a=this.getDocument();return a?b.get(a):null}})})},"dojo/promise/all":function(){define(["../_base/array","../Deferred","../when"],function(n,m,k){var h=n.some;return function(d){var b,c;d instanceof Array?c=d:d&&"object"===typeof d&&(b=d);var g,p=[];if(b){c=[];for(var a in b)Object.hasOwnProperty.call(b,a)&&(p.push(a),c.push(b[a]));g={}}else c&&(g=[]);if(!c||!c.length)return(new m).resolve(g);var e=new m;e.promise.always(function(){g=p=null});var q=
c.length;h(c,function(a,c){b||p.push(c);k(a,function(a){e.isFulfilled()||(g[p[c]]=a,0===--q&&e.resolve(g))},e.reject);return e.isFulfilled()});return e.promise}})},"davinci/ve/tools/PasteTool":function(){define("dojo/_base/declare ./CreateTool ../widget ../metadata ../../commands/CompoundCommand ../commands/AddCommand ../commands/MoveCommand ../commands/StyleCommand dojo/Deferred dojo/promise/all".split(" "),function(n,m,k,h,d,b,c,g,p,a){return n("davinci.ve.tools.PasteTool",m,{constructor:function(a){this.inherited(arguments);
this._position_prop=null;var b=a[0];b&&b.properties&&(b=k.parseStyleValues(b.properties.style),this._position_prop=k.retrieveStyleProperty(b,"position",""))},_create:function(e){var q=e.index,m,n,r=new d,v,x=[],A=new p,z=this._data.map(function(d){var u=new p,w=[];if(!this._loadType(d,w))return u.reject(),u;a(w).then(function(){var a=k.parseStyleValues(d.properties&&d.properties.style);if("absolute"==this._position_prop){var p=parseInt(k.retrieveStyleProperty(a,"left","0px")),a=parseInt(k.retrieveStyleProperty(a,
"top","0px"));m?n={x:p+m.x,y:a+m.y}:e.position?(n=e.position,m={x:e.position.x-p,y:e.position.y-a}):(n={x:p,y:a},m={x:0,y:0})}dojo.withDoc(this._context.getDocument(),function(){var a=function(a){void 0!==q&&0<=q&&q++;x.push(a);if(n){var b=this._context.getPreference("absoluteWidgetsZindex");r.add(new g(a,[{position:"absolute"},{"z-index":b}]));a=new c(a,n.x,n.y,v,null,null,v);v||(v=a);r.add(a)}u.resolve()}.bind(this);d.context=this._context;h.getHelper(d.type,"tool").then(function(c){var g;c&&(g=
new c(d));if(g&&g.addPasteCreateCommand)c={parent:e.parent||this._context.getContainerNode(),position:n,index:q},g.addPasteCreateCommand(r,c).then(function(b){if(!b)return u.reject(),u;a(b)});else{g=k.createWidget(d);if(!g)return u.reject(),u;r.add(new b(g,e.parent||this._context.getContainerNode(),q));this.checkAddToCurrentState(r,g);a(g)}}.bind(this))}.bind(this))}.bind(this));return u}.bind(this));a(z).then(function(){r.isEmpty()||(this._context.getCommandStack().execute(r),setTimeout(function(){x.forEach(function(a,
b){this._context.select(a,0<b)}.bind(this))}.bind(this),0));A.resolve()}.bind(this));return A},createWithFlowLayout:function(){return"absolute"!=this._position_prop}})})},"wcDocker/iframe":function(){define(["dcl/dcl","wcDocker/types","wcDocker/base"],function(n,m,k){return n(k,{declaredClass:"wcIFrame",constructor:function(h,d){this._panel=d;this._layout=d.layout();this.$container=$(h);this._window=this.$iFrame=this.$focus=this.$frame=null;this._isHovering=this._isDocking=!1;this._boundEvents=[];
this._onLoadFuncs=[];this._onClosedFuncs=[];this.__init()},openURL:function(h){this.__clearFrame();this.$iFrame=$("\x3ciframe\x3eiFrames not supported on your device!\x3c/iframe\x3e");this.$frame.prepend(this.$iFrame);this.__onMoved();this._window=this.$iFrame[0].contentWindow||this.$iFrame[0];this.__updateFrame();this._window.location.replace(h);this.$iFrame[0].focus();this.$iFrame.hover(this.__onHoverEnter.bind(this),this.__onHoverExit.bind(this));var d=this,d=this;this.$iFrame.load(function(){for(var b=
0;b<d._onLoadFuncs.length;++b)d._onLoadFuncs[b]();d._onLoadFuncs=[];d.$iFrame.contents().click(function(b){$("body").trigger("click",b)});d.$iFrame.contents().keydown(function(b){$(document).trigger("keydown",b)});d.$iFrame.contents().keyup(function(b){$(document).trigger("keyup",b)})})},openHTML:function(h){this.__clearFrame();this.$iFrame=$("\x3ciframe\x3eiFrames not supported on your device!\x3c/iframe\x3e");this.$frame.prepend(this.$iFrame);this.__onMoved();this._window=this.$iFrame[0].contentWindow||
this.$iFrame[0];this.__updateFrame();this._window.document.open();this._window.document.write(h);this._window.document.close();this.$iFrame[0].focus();this.$iFrame.hover(this.__onHoverEnter.bind(this),this.__onHoverExit.bind(this));var d=this;this.$iFrame.load(function(){for(var b=0;b<d._onLoadFuncs.length;++b)d._onLoadFuncs[b]();d._onLoadFuncs=[]})},openSRC:function(h){this.__clearFrame();this.$iFrame=$("\x3ciframe\x3eiFrames not supported on your device!\x3c/iframe\x3e");this.$frame.prepend(this.$iFrame);
this.__onMoved();this._window=this.$iFrame[0].contentWindow||this.$iFrame[0];this.__updateFrame();this.$iFrame[0].srcdoc=h;this.$iFrame[0].focus();this.$iFrame.hover(this.__onHoverEnter.bind(this),this.__onHoverExit.bind(this));var d=this;this.$iFrame.load(function(){for(var b=0;b<d._onLoadFuncs.length;++b)d._onLoadFuncs[b]();d._onLoadFuncs=[]})},onLoaded:function(h){this._onLoadFuncs.push(h)},onClosed:function(h){this._onClosedFuncs.push(h)},show:function(){this.$frame&&this.$frame.removeClass("wcIFrameHidden")},
hide:function(){this.$frame&&this.$frame.addClass("wcIFrameHidden")},window:function(){return this._window},destroy:function(){for(;this._boundEvents.length;)this._panel.off(this._boundEvents[0].event,this._boundEvents[0].handler),this._boundEvents.shift();this.__clearFrame();this.$container=this._layout=this._panel=null;this.$frame.remove();this.$focus=this.$frame=null},__init:function(){this.$frame=$('\x3cdiv class\x3d"wcIFrame"\x3e');this.$focus=$('\x3cdiv class\x3d"wcIFrameFocus"\x3e');this._panel.docker().$container.append(this.$frame);
this.$frame.append(this.$focus);this._boundEvents.push({event:m.EVENT.VISIBILITY_CHANGED,handler:this.__onVisibilityChanged.bind(this)});this._boundEvents.push({event:m.EVENT.BEGIN_DOCK,handler:this.__onBeginDock.bind(this)});this._boundEvents.push({event:m.EVENT.END_DOCK,handler:this.__onEndDock.bind(this)});this._boundEvents.push({event:m.EVENT.MOVE_STARTED,handler:this.__onMoveStarted.bind(this)});this._boundEvents.push({event:m.EVENT.RESIZE_STARTED,handler:this.__onMoveStarted.bind(this)});this._boundEvents.push({event:m.EVENT.MOVE_ENDED,
handler:this.__onMoveFinished.bind(this)});this._boundEvents.push({event:m.EVENT.RESIZE_ENDED,handler:this.__onMoveFinished.bind(this)});this._boundEvents.push({event:m.EVENT.MOVED,handler:this.__onMoved.bind(this)});this._boundEvents.push({event:m.EVENT.RESIZED,handler:this.__onMoved.bind(this)});this._boundEvents.push({event:m.EVENT.ATTACHED,handler:this.__onAttached.bind(this)});this._boundEvents.push({event:m.EVENT.DETACHED,handler:this.__updateFrame.bind(this)});this._boundEvents.push({event:m.EVENT.GAIN_FOCUS,
handler:this.__updateFrame.bind(this)});this._boundEvents.push({event:m.EVENT.LOST_FOCUS,handler:this.__updateFrame.bind(this)});this._boundEvents.push({event:m.EVENT.PERSISTENT_OPENED,handler:this.__updateFrame.bind(this)});this._boundEvents.push({event:m.EVENT.PERSISTENT_CLOSED,handler:this.__updateFrame.bind(this)});this._boundEvents.push({event:m.EVENT.CLOSED,handler:this.__onClosed.bind(this)});this._boundEvents.push({event:m.EVENT.ORDER_CHANGED,handler:this.__onOrderChanged.bind(this)});for(var h=
0;h<this._boundEvents.length;++h)this._panel.on(this._boundEvents[h].event,this._boundEvents[h].handler);$(window).blur(this.__onBlur.bind(this))},__clearFrame:function(){if(this.$iFrame){for(var h=0;h<this._onClosedFuncs.length;++h)this._onClosedFuncs[h]();this._onClosedFuncs=[];this.$iFrame[0].srcdoc="";this.$iFrame.remove();this._window=this.$iFrame=null}},__updateFrame:function(){if(this.$frame&&this._panel){var h=this._panel.isFloating();this.$frame.toggleClass("wcIFrameFloating",h);h?this.$frame.toggleClass("wcIFrameFloatingFocus",
focus):this.$frame.removeClass("wcIFrameFloatingFocus");this.$frame.toggleClass("wcIFramePanelHidden",!this._panel.isVisible());this._panel&&this._panel._parent&&this._panel._parent.instanceOf("wcFrame")&&this.$frame.toggleClass("wcDrawer",this._panel._parent.isCollapser())}},__focusFix:function(){this.$frame.css("left",parseInt(this.$frame.css("left"))+1);this.$frame.css("left",parseInt(this.$frame.css("left"))-1)},__onHoverEnter:function(){this._isHovering=!0},__onHoverExit:function(){this._isHovering=
!1},__onBlur:function(){this._isHovering&&this.__onFocus()},__onFocus:function(){this._panel&&this.docker(this._panel).__focus(this._panel._parent)},__onVisibilityChanged:function(){this.__updateFrame();this._panel.isVisible()&&this.__onMoved()},__onBeginDock:function(){this.$frame&&(this._isDocking=!0,this.$frame.addClass("wcIFrameMoving"))},__onEndDock:function(){this.$frame&&(this._isDocking=!1,this.$frame.removeClass("wcIFrameMoving"),this.__focusFix())},__onAttached:function(){this.$frame.css("z-index",
"");this.__updateFrame()},__onMoveStarted:function(){this.$frame&&!this._isDocking&&this.$frame.addClass("wcIFrameMoving")},__onMoveFinished:function(){this.$frame&&!this._isDocking&&(this.$frame.removeClass("wcIFrameMoving"),this.__focusFix())},__onMoved:function(){if(this.$frame&&this._panel){var h=this.docker(this._panel);if(h){var h=h.$container.offset(),d=this.$container.offset(),b=this.$container.width(),c=this.$container.height();this.$frame.css("top",d.top-h.top);this.$frame.css("left",d.left-
h.left);this.$frame.css("width",b);this.$frame.css("height",c)}else console.error("have no docker")}},__onOrderChanged:function(h){this.$frame.css("z-index",h+1)},__onClosed:function(){this.destroy()}})})},"xide/model/Path":function(){define(["xide/utils","dcl/dcl"],function(n,m){var k=m(null,{declaredClass:"xide.model.Path",constructor:function(h,d,b){h=h||".";"string"==typeof h?(this.path=h,this.getSegments()):(this.segments=h,this.hasLeading=null!==d?d:!1,this.hasTrailing=null!==b?d:!1)},endsWith:function(h){var d=
n.clone(this.segments);for(h=(new k(h)).getSegments();0<h.length&&0<d.length;)if(h.pop()!=d.pop())return!1;return!0},getExtension:function(){this.extension||(this.extension=this.path.substr(this.path.lastIndexOf(".")+1));return this.extension},segment:function(h){var d=this.getSegments();return d.length<h?null:d[h]},getChildren:function(h,d){function b(a){a="string"!==typeof a?a.toString():a;a!==p&&-1==c.indexOf(a)&&c.push(a)}var c=[],g=this,p=this.toString();_.each(h,function(a){a=new k(a);if(a.startsWith(g))if(d)b(a.toString());
else{var c=a.relativeTo(p);c&&(c=c.getSegments(),1==c.length?b(a):1<c.length&&(a=a.getParentPath(),1==a.relativeTo(p).getSegments().length&&b(a.toString())))}});return c},getSegments:function(){if(!this.segments){var h=this.path;this.segments=h.split("/");"/"==h.charAt(0)&&(this.hasLeading=!0);"/"==h.charAt(h.length-1)&&(this.hasTrailing=!0,this.segments.pop());this._canonicalize()}return this.segments},isAbsolute:function(){return this.hasLeading},getParentPath:function(){if(!this._parentPath){var h=
n.clone(this.segments);h.pop();this._parentPath=new k(h,this.hasLeading)}return n.clone(this._parentPath)},_clone:function(){return new k(n.clone(this.segments),this.hasLeading,this.hasTrailing)},append:function(h){h=h||"";"string"==typeof h&&(h=new k(h));if(h.isAbsolute())return h;var d=this.segments,b=h.getSegments(),d=d.concat(b);h=new k(d,this.hasLeading,h.hasTrailing);".."!=b[0]&&"."!=b[0]||h._canonicalize();return h},toString:function(){var h=[];this.hasLeading&&h.push("/");for(var d=0;d<this.segments.length;d++)0<
d&&h.push("/"),h.push(this.segments[d]);this.hasTrailing&&h.push("/");return h.join("")},removeRelative:function(){var h=this.getSegments();return 0<h.length&&"."==h[1]?this.removeFirstSegments(1):this},relativeTo:function(h,d){"string"==typeof h&&(h=new k(h));var b=this.segments;if(this.isAbsolute())return this;var c=h.getSegments();h=this.matchingFirstSegments(h);c=c.length;d&&--c;d=c-h;if(0==d+b.length-h)return k.EMPTY;for(var c=[],g=0;g<d;g++)c.push("..");for(g=h;g<b.length;g++)c.push(b[g]);return new k(c,
!1,this.hasTrailing)},startsWith:function(h){var d=this.matchingFirstSegments(h);return h._length()==d},_length:function(){return this.segments.length},matchingFirstSegments:function(h){var d=this.segments;h=h.getSegments();for(var b=Math.min(d.length,h.length),c=0,g=0;g<b&&d[g]==h[g];g++)c++;return c},removeFirstSegments:function(h){return new k(this.segments.slice(h,this.segments.length),this.hasLeading,this.hasTrailing)},removeMatchingLastSegments:function(h){h=this.matchingFirstSegments(h);return this.removeLastSegments(h)},
removeMatchingFirstSegments:function(h){h=this.matchingFirstSegments(h);return this._clone().removeFirstSegments(h)},removeLastSegments:function(h){h||(h=1);return new k(this.segments.slice(0,this.segments.length-h),this.hasLeading,this.hasTrailing)},lastSegment:function(){return this.segments[this.segments.length-1]},firstSegment:function(h){return this.segments[h||0]},equals:function(h){if(this.segments.length!=h.segments.length)return!1;for(var d=0;d<this.segments.length;d++)if(h.segments[d]!=
this.segments[d])return!1;return!0},_canonicalize:function(){for(var h,d=this.segments,b=0;b<d.length;b++)if("."==d[b]||".."==d[b]){h=!0;break}if(h){h=[];for(b=0;b<d.length;b++)".."==d[b]?0==h.length?this.hasLeading||h.push(d[b]):".."==h[h.length-1]?h.push(".."):h.pop():"."==d[b]&&1!=this.segments.length||h.push(d[b]);h.length!=d.length&&(this.segments=h)}}});k.EMPTY=new k("");return k})},"davinci/ve/PageEditor":function(){define("require dojo/_base/declare ../ui/ModelEditor dojo/dnd/Moveable ../Runtime ../commands/CommandStack ../html/ui/HTMLEditor ./VisualEditor ./VisualEditorOutline ./widget ./States ../XPathUtils ../html/HtmlFileXPathAdapter ./utils/GeomUtils davinci/model/Factory xide/mixins/EventedMixin xide/mixins/ReloadMixin xide/utils xide/types xide/factory xideve/views/BlocksFileEditor xide/widgets/_Widget xide/views/_LayoutMixin xdocker/Docker2 xdocker/types wcDocker/iframe".split(" "),
function(n,m,k,h,d,b,c,g,p,a,e,q,u,w,r,v,x,A,z,y,B,C,E,F,G){m=m("davinci.ve.PageEditor",[k,C,v,x,E],{_latestSourceMode:"source",_latestLayoutMode:"flow",item:null,delegate:null,template:null,bottomTabContainer:null,textEditorPane:null,didBlockViews:!1,_propCP:null,createTab:function(a,b){var c=z.DOCKER;return this._docker.addTab(a||"DefaultTab",A.mixin({icon:!1,closeable:!0,moveable:!0,tabOrientation:c.TAB.TOP,location:c.DOCK.STACKED},b))},createLayout:function(){},constructor:function(a,c,e,d,h,
q){function p(a){setTimeout(function(){var a=k.getContext();a&&a.frameNode&&$(a.frameNode).css("pointer-events","initial")},a||4E3)}c=z.DOCKER;this.item=e;this.template=h;var k=this;this._commandStack=new b(this);this.savePoint=0;this._docker=F.createDefault(a,{});this.domNode=this._docker.$container[0];this._designCP=this.createTab(null,{title:"Design",icon:"fa-eye"});this._docker.on(z.DOCKER.EVENT.BEGIN_RESIZE,function(a){(a=k.getContext())&&a.frameNode&&$(a.frameNode).css("pointer-events","none");
p()});this._docker.on(z.DOCKER.EVENT.MOVE_STARTED,function(a){(a=k.getContext())&&a.frameNode&&$(a.frameNode).css("pointer-events","none");p()});this._docker.on(z.DOCKER.EVENT.MOVE_ENDED,function(a){p(1)});this._docker.on(z.DOCKER.EVENT.END_RESIZE,function(a){p(1)});this._docker.on(z.DOCKER.EVENT.BEGIN_FLOAT_RESIZE,function(a){a=k.getContext();$(a.frameNode).css("pointer-events","none");p()});this._docker.on(z.DOCKER.EVENT.END_FLOAT_RESIZE,function(a){p(1)});this._designCP.$container[0].domNode=this._designCP.$container[0];
this._designCP.domNode=this._designCP.$container[0];this._designCP.minSize(400,400);this.currentEditor=this.visualEditor=new g(this._designCP.$container[0],this,this.template);this.currentEditor._commandStack=this._commandStack;this.initReload();try{this._propCP=this.createTab(null,{title:"Props",icon:"fa-cogs",tabOrientation:c.TAB.TOP,location:c.TAB.RIGHT,target:this._designCP});this._propCP.maxSize(400);this._propCP.minSize(350);this._propCP.closeable(!1);a=null;q.length?this._srcCP=a=this.createTab(null,
{title:"HTML",icon:"fa-code",tabOrientation:c.TAB.TOP,location:c.TAB.BOTTOM}):console.error("have no editors, ");q=null;try{q=this.htmlEditor=d(a)}catch(K){debugger}this.model=q.model;q._on(z.EVENTS.ON_FILE_CONTENT_CHANGED,function(a){k.delegate.onEditorContentChanged(a)});this._displayMode="design";this._connect(this.visualEditor,"onContentChange","_visualChanged");this.subscribe("/davinci/ui/styleValuesChange",this._stylePropertiesChange);this.subscribe("/davinci/ui/widgetSelected",this._widgetSelectionChange);
this.subscribe("/davinci/ui/selectionChanged",this._modelSelectionChange);this.subscribe("/davinci/ui/editorSelected",this._editorSelected.bind(this));this.subscribe("/davinci/ui/context/loaded",this._contextLoaded.bind(this));this.subscribe("/davinci/ui/deviceChanged",this._deviceChanged.bind(this));this._designCP.getSplitter().pos(.5);setTimeout(function(){k._srcCP.getSplitter().pos(.5);k._propCP.maxSize(500)},1500);this.resize()}catch(K){this.visualEditor._connectCallback(K),console.error("page editor crash : "+
K)}this.add(this._docker)},getPropertyPane:function(){return this._propCP},getDesignPane:function(){return this._designCP},getSourcePane:function(){return this._srcCP},getVisualEditor:function(){return this.visualEditor},getBlocksPane:function(){return this._blocksTab},onSceneBlocksLoaded:function(a,b){if(0!=b.showBlocks&&!this.didBlockViews){this.didBlockViews=!0;var c=a.blockScopes;a=a.ctx;var e=z.DOCKER;this._blocksTab=this.createTab(null,{title:"Blocks",icon:"fa-eye",target:this._srcCP,tabOrientation:e.TAB.TOP,
location:e.DOCK.STACKED});c=c[0];e=this._blocksTab;a=A.addWidget(B,{style:"height:inherit;width:inherit;padding:0px;",ctx:a,pageEditor:this,visualEditor:b,editorContext:this.getContext(),item:{path:c.path,mount:c.mount}},this,e,!0);a.initWithScope(c);e.add(a);this._blockEditor=a;(b=b.getItem())&&this._blockEditor._widgetSelectionChanged({selection:[b]})}},getBlockEditor:function(){return this._blockEditor},setRootElement:function(a){this._rootElement=a},supports:function(a){return a.match(/^palette|properties|style|states|inline-style|MultiPropTarget|propsect_common|propsect_widgetSpecific|propsect_events|propsect_layout|propsect_paddingMargins|propsect_background|propsect_border|propsect_fontsAndText|propsect_shapesSVG$/)},
focus:function(){},_editorSelected:function(a){var b=this.getContext();b&&(this==a.oldEditor&&b.hideFocusAll(),a.editor&&a.editor.editorContainer&&("davinci.ve.PageEditor"==a.editor.declaredClass||"davinci.ve.themeEditor.ThemeEditor"==a.editor.declaredClass)&&this==a.editor&&(a=b.getFlowLayout(),this._updateLayoutDropDownButton(a?"flow":"absolute"),b.clearCachedWidgetBounds()))},_contextLoaded:function(){},_deviceChanged:function(){if(d.currentEditor==this&&this.editorContainer){var a=this.getContext();
a&&a.updateFocusAll&&setTimeout(function(){a.updateFocusAll()},1E3)}},_updateLayoutDropDownButton:function(a){(a=dojo.query(".maqLayoutDropDownButton"))&&a[0]&&dijit.byNode(a[0])},_selectLayout:function(a){this._latestLayoutMode=a;n(["davinci/actions/SelectLayoutAction"],function(b){b=new b;b._changeLayoutCommand(a)});this._updateLayoutDropDownButton(a)},selectLayoutFlow:function(){this._selectLayout("flow")},selectLayoutAbsolute:function(){this._selectLayout("absolute")},getDisplayMode:function(){return this._displayMode},
getSourceDisplayMode:function(){return this._latestSourceMode},_switchDisplayModeSource:function(a){this._latestSourceMode=a;this.switchDisplayMode(a)},switchDisplayModeSource:function(){this._switchDisplayModeSource("source")},switchDisplayModeSplitVertical:function(){this._switchDisplayModeSource("splitVertical")},switchDisplayModeSplitHorizontal:function(){this._switchDisplayModeSource("splitHorizontal")},switchDisplayModeSourceLatest:function(){this.switchDisplayMode(this._latestSourceMode)},
switchDisplayModeDesign:function(){this.switchDisplayMode("design")},switchDisplayMode:function(a){},hidePropertyPane:function(a){this.getPropertyPane()},_modelSelectionChange:function(b){if("source"!=this._displayMode&&n("davinci/Runtime").currentEditor===this&&(this._selectionCssRules=null,b.length&&(b=b[0].model)&&"HTMLElement"==b.elementType&&(b=b.getAttribute("id"))&&"source"!=this._displayMode)){b=a.byId(b,this.visualEditor.context.getDocument());var c=w.getMarginBoxPageCoords(b.domNode);this.getContext().getGlobal().scroll(c.l,
c.t);this.visualEditor.context.select(b)}},_widgetSelectionChange:function(a){!0===a.isFake||!this.visualEditor.context||a&&a.length&&a[0]._edit_context!=this.visualEditor.context||(a=this.visualEditor.context.getSelection())&&a.length&&"design"!=this._displayMode&&this.htmlEditor.selectModel([{model:a[0]._srcElement}])},_stylePropertiesChange:function(a){if(!(a&&a.cascade&&a.cascade._widget&&1==a.cascade._widget.isFake)){this.visualEditor._stylePropertiesChange(a);var b=this.visualEditor.context.getSelection();
if(b&&b[0]&&(b=A.getNode(b[0]))&&b.onChanged)b.onChanged();a=a.cascade._topWidgetDom;$(a).attr("style");this.getContext().updateBackground(a)}},_setDirty:function(){this.setDirty(!0)},setDirty:function(a){if(this.isDirty=a)this.lastModifiedTime=Date.now();this.editorContainer&&this.editorContainer.setDirty(a)},_visualChanged:function(a){this.delegate.shouldUpdateTextEditor()&&(a||this._setDirty(),this.htmlEditor.set("value",this.model.getText(),!0),this.getContext().visualEditorChanged())},_srcChanged:function(){dojo.withDoc(window.document,
function(){this.htmlEditor.isTyping&&(this.visualEditor.skipSave=!0);var a=this.visualEditor.context,b=a&&this._getStatesScenes(a);this.visualEditor.setContent(this.fileName,this.htmlEditor.model);this.editorContainer.updateToolbars();dojo.publish("/davinci/ui/context/pagerebuilt",[a]);b&&this._setStatesScenes(a,b);delete this.visualEditor.skipSave;this._setDirty()},this)},_getStatesScenes:function(a){return[]},_setStatesScenes:function(a,b){},getContext:function(){return this.visualEditor.context},
getOutline:function(){this.outline||(this.outline=new p(this));return this.outline},getPropertiesView:function(){return this.currentEditor.getPropertiesView()},setContent:function(a,b,c){this.fileName=a;this.htmlEditor.setContent(a,b);this.visualEditor.setContent(a,this.htmlEditor.model,c);this._connect(this.htmlEditor.model,"onChange","_themeChange")},_themeChange:function(a){a&&"CSSRule"===a.elementType&&(this.setDirty(!0),this.visualEditor.context.hotModifyCssRule(a))},getDefaultContent:function(){this._isNewFile=
!0;return this.visualEditor.getDefaultContent()},selectModel:function(a,b){this.publishingSelect||b&&this!=b||(b=a&&a[0])&&(b.elementType?this.htmlEditor.selectModel(a):b.model&&b.model.isWidget&&this.visualEditor.context.select(b.model,b.add))},save:function(a){if(this.delegate&&this.delegate.save){var b=this.visualEditor.context.getModel(),c=b.getText();this.delegate.save(this,this.visualEditor,b,c)}else this.savePoint=this._commandStack.getUndoCount(),(b=this.visualEditor.save(a))&&b.then&&b.then(function(b){this.isDirty=
a;this.editorContainer&&this.editorContainer.domNode&&this.editorContainer.setDirty(a)}.bind(this),function(a){})},removeWorkingCopy:function(){},previewInBrowser:function(){this.visualEditor.previewInBrowser()},destroy:function(){this.inherited(arguments);this.visualEditor.destroy();this.htmlEditor.destroy();A.destroy(this.bottomTabContainer)},getText:function(){return this.htmlEditor.getText()},onResize:function(){for(var a=this.getContext(),b=a.getSelection(),c=0;c<b.length;c++)a.select(b[c],0!=
c)},handleKeyEvent:function(a){},getFocusContainerBounds:function(){if("source"==this._displayMode)return{l:0,t:0,w:0,h:0};var a=w.getBorderBoxPageCoords(this._designCP.domNode);a.l-=8;a.t-=8;"none"==(this.visualEditor&&this.visualEditor.getDevice?this.visualEditor.getDevice():"none")?(a.w+="splitVertical"==this._displayMode?8:16,a.h+="splitHorizontal"==this._displayMode?8:16):(a.w+=8,a.h+=8);return a},getCommandStack:function(){return this.getContext().getCommandStack()}});m.__test="asd2f";return m})},
"davinci/ve/_ContextDelite":function(){define("dojo/_base/declare dojo/_base/lang dojo/_base/xhr dojo/dom-class dojo/dom-construct dojo/dom-style dojo/query dojo/Deferred dojo/promise/all dojo/_base/connect dojo/topic dojo/window xide/utils xide/factory xide/types system/resource ../UserActivityMonitor ../Theme ./ThemeModifier ../commands/CommandStack ./commands/ChangeThemeCommand ./tools/SelectTool ../model/Path ../Runtime ../Workbench ./widget ./Focus ../library ./metadata ./ChooseParent ./Snap ./States ./HTMLWidget ../html/HTMLElement ../html/HTMLText ../workbench/Preferences ./utils/GeomUtils dojo/text!./newfile.template.html ./utils/pseudoClass dojox/html/_base".split(" "),
function(n){return n(null,{})})},"xideve/manager/WidgetManagerBlox":function(){define(["dcl/dcl","xdojo/declare","xide/types","xide/utils","xide/views/CIActionDialog"],function(n,m,k,h,d){return n(null,{declaredClass:"xideve/manager/WidgetManagerBlox",_removeEventHandlers:function(b,c){},_setEventHandler:function(b,c,g){if(b._attachEvents){var d=c.replace("on","");_.each(b._attachEvents,function(a){a.type===d&&a.remove();b._attachEvents.remove(a)});if(g){var a=new Function("{"+g+"; }");g=b.on(d,function(c){a.call(b,
c)});g.type=c;b._attachEvents.push(g)}}},onModifiedXBLOX:function(b){},openBloxWizard:function(b){var c=this;b=this._completeEventInfo(b);var g="min.xblox",p="workspace";if(b.appSettings&&b.appSettings.xbloxScripts&&0<b.appSettings.xbloxScripts.length)var a=b.appSettings.xbloxScripts[0],g=a.path.replace("./",""),p=a.mount;var e=null;this.ctx.getBlockManager().load(p,g).then(function(a){c.ctx.blockManager.ignoreItemSelection=!0;var q=dojo.subscribe("onItemSelected",function(a){e=a.item}),m=(""+b.value).split(","),
r=h.replaceAll("'","",m[1]),m=dojo.fromJson(m[3]);e=a.getBlockById(r);(new d({title:"Select Block and override inputs",style:"width:800px;min-height:600px;",resizeable:!0,delegate:{onOk:function(a,d){a=h.getCIInputValueByName(d,"Settings");if(e){c.ctx.blockManager.ignoreItemSelection=!1;d=h.buildPath(p,g,!1);if(e){var k="";a&&(k=","+a);a="runBlox('"+d+"','"+e.id+"',this"+k+")";c._setEventHandler(b.dijitWidget||b.node,b.widgetProperty,a);b.editor.setDirty(!0);b.widget.set("value",a);c.onModifiedXBLOX(b,
e)}q.remove()}}},cis:[h.createCI("Block",k.ECIType.BLOCK_REFERENCE,"",{group:"Block",delegate:null,showDialog:!1,scope:a,block:e}),h.createCI("Settings",k.ECIType.BLOCK_SETTINGS,"",{group:"Settings",scope:a,block:e,settings:m})]})).show()})},onXBlox:function(b){var c=b.row.widget,g="";c||(c=dijit.byId(b.row.id))&&(g=c.get("value"));!c&&(c=dojo.byId(b.row.id))&&(g=c.value);this.openBloxWizard({owner:this,delegate:this,widget:c,value:g,target:b.widget,widgetProperty:b.row.display,meta:{context:b}})}})})},
"xide/model/Component":function(){define("dcl/dcl dojo/Deferred dojo/has require xide/model/Base xide/types xide/mixins/EventedMixin".split(" "),function(n,m,k,h,d,b,c){b.COMPONENT_FLAGS={LOAD:1,RUN:1};return n([d.dcl,c.dcl],{declaredClass:"xide/model/Component",_loaded:!1,ctx:null,owner:{reloadComponent:function(){}},beanType:null,packages:null,resources:[],getDependencies:function(){return[]},hasEditors:function(){return[]},getLabel:function(){return"Have no label"},load:function(b){var c=new m,
a=this;b=b||this.getLabel();h(this.getDependencies(),function(){a._loaded=!0;b&&k.add(b,function(){return!0});c.resolve()});return c.promise},run:function(){return!1},onModuleReloaded:function(){this.owner.reloadComponent(this)},isLoaded:function(){return this._loaded}})})},"dijit/_base/scroll":function(){define([],function(){})},"xide/widgets/ToggleButton":function(){define(["dojo/_base/declare","dojo/dom-class","dijit/form/ToggleButton"],function(n,m,k){return n("xide/widgets/ToggleButton",[k],
{currentItem:null,buttons:null,iconClass:"",title:"title",disabled:!1,iconNode:null,linkNode:null,_setCheckedAttr:function(h,d){this.inherited(arguments);m.remove(this.iconNode,this.icon1);m.remove(this.iconNode,this.icon2);m.add(this.iconNode,h?"fa-toggle-on":"fa-toggle-off")},setDisabled:function(h){this.set("disabled",h)},startup:function(){this.inherited(arguments);m.remove(this.iconNode,"dijitReset");this.setDisabled(this.disabled)}})})},"xaction/Toolbar":function(){define("dcl/dcl xdojo/declare xide/utils xide/types xide/widgets/ActionToolbar xide/widgets/_Widget".split(" "),
function(n,m,k,h,d,b){var c={_toolbar:null,toolbarInitiallyHidden:!1,toolbarArgs:null,runAction:function(b){b.command===h.ACTION.TOOLBAR&&this.showToolbar(null==this._toolbar,null,null,this);return this.inherited(arguments)},getToolbar:function(){return this._toolbar},showToolbar:function(b,c,a,e){!b&&(b=null==this._toolbar);this._toolbar||(c=this.add(c||d,k.mixin({style:"height:auto;width:100%"},this.toolbarArgs),a||this.header,!0),k.resizeTo(c,this.header,!1,!0),c.addActionEmitter(e||this),c.setActionEmitter(e||
this),k.resizeTo(this.header,c,!0,!1),this._toolbar=c);!b&&this._toolbar&&k.destroy(this._toolbar,!0,this);this.resize()},startup:function(){var b=h.ACTION.TOOLBAR,c=_.contains(this.permissions,b);c&&this.showToolbar(c,null,null,this);var a=this,e=a.domNode.parentNode;this._on("onAddActions",function(c){!c.store.getSync(b)&&c.actions.push(a.createAction("Toolbar",b,h.ACTION_ICON.TOOLBAR,["ctrl b"],"View","Show","item|view",null,null,null,null,null,c.permissions,e,a))})}};m=m("xaction/Toolbar",b,c);
m.Implementation=c;m.dcl=n([b.dcl],c);return m})},"xcf/manager/DriverManager_Server":function(){define(["dcl/dcl","dojo/_base/declare","xide/types","xide/utils"],function(n,m,k,h){return n(null,{declaredClass:"xcf.manager.DriverManager_Server",onDriverBlocksChanged:function(d,b){},onFileChanged:function(d){if("changed"===d.type&&!d._didb){d._didb=!0;d=h.replaceAll("\\","/",d.path);d=h.replaceAll("//","/",d);d=d.replace(/\\/g,"/");var b;b=d;b=-1!=b.indexOf("system/driver")?b.substr(b.indexOf("system/driver")+
14,b.length):null;if(b&&-1!==b.indexOf(".xblox"))this.onDriverBlocksChanged(d,b)}},createDriverInstance:function(d,b){var c=this,g=this.driverScopes.system_drivers+"DriverBase";require([g],function(p){p.prototype.declaredClass=g;var a=c.driverScopes[d.scope],e=h.getCIInputValueByName(d.user,k.DRIVER_PROPERTY.CF_DRIVER_CLASS);if(e){var q=a+e,q=q.replace(".js",""),q=q.replace("./","");require([q],function(a){a=new (m([p],a.prototype));a.baseClass=p.prototype.declaredClass;a.modulePath=h.replaceAll("//",
"/",q);a.delegate=c;d.instance=a;b&&b(a);try{a.start()}catch(w){}return a})}else console.error("cant find driver class in meta")})}})})},"xide/utils/WidgetUtils":function(){define(["xide/utils","xide/types","xide/registry"],function(n,m,k){n.getParentWidget=function(h,d,b){h=h.containerNode||h.domNode||h;var c=0,g=null;for(b=b||10;c<b&&!g;){if(h){h=h.parentNode;var p=k.byId(h.id)||k.getEnclosingWidget(h);p&&d&&p.declaredClass&&-1!=p.declaredClass.indexOf(d)&&(g=p)}c++}return g};n.getWidgetType=function(h){var d=
"";h==m.ECIType.ENUMERATION&&(d="xide.widgets.Select");h==m.ECIType.STRING&&(d="xide.widgets.TextBox");h==m.ECIType.ICON&&(d="xide.widgets.TextBox");h==m.ECIType.REFERENCE&&(d="xide.widgets.Button");h==m.ECIType.EXPRESSION&&(d="xide.widgets.Expression");h==m.ECIType.EXPRESSION_EDITOR&&(d="xide.widgets.ExpressionEditor");h==m.ECIType.ARGUMENT&&(d="xide.widgets.ArgumentsWidget");h==m.ECIType.WIDGET_REFERENCE&&(d="xide.widgets.WidgetReference");h==m.ECIType.BLOCK_REFERENCE&&(d="xide.widgets.BlockPickerWidget");
h==m.ECIType.BLOCK_SETTINGS&&(d="xide.widgets.BlockSettingsWidget");h==m.ECIType.DOM_PROPERTIES&&(d="xide.widgets.DomStyleProperties");h==m.ECIType.FILE_EDITOR&&(d="xide.widgets.FileEditor");return d};return n})},"davinci/ve/widgets/CommonProperties":function(){define(["dojo/_base/declare","davinci/workbench/ViewLite","davinci/ve/commands/ModifyCommand"],function(n,m,k){return n("davinci.ve.widgets.CommonProperties",[m],{buildRendering:function(){var h=["title"],d;d="\x3ctable width\x3d'100%' class\x3d'property_table_stretchable' border\x3d'0' cellspacing\x3d'0' cellpadding\x3d'0'\x3e\x3ccolgroup\x3e\x3ccol style\x3d'width:15px;' /\x3e\x3ccol class\x3d'gap02' /\x3e\x3ccol class\x3d'gap03' /\x3e\x3ccol style\x3d'width:15px;' /\x3e\x3c/colgroup\x3e";
var b=0;this._boxes={};for(var c=0;c<h.length;c++)this._boxes[h[c]]={value:""},this._boxes[h[c]].id="davinci_properties_event_"+b++ +"_combo",d+="\x3ctr\x3e",d+="\x3ctd/\x3e",d+="\x3ctd class\x3d'propertyDisplayName'\x3e",d+=h[c]+":",d+="\x3c/td\x3e",d+="\x3ctd\x3e",d+="\x3cinput type\x3d'text' id\x3d'"+this._boxes[h[c]].id+"'\x3e\x3c/input\x3e",d+="\x3c/td\x3e",d+="\x3ctd/\x3e",d+="\x3c/tr\x3e";d+="\x3c/table\x3e";this.domNode=dojo.doc.createElement("div");this.domNode.innerHTML=d;dojo.subscribe("/davinci/ui/widgetValuesChanged",
dojo.hitch(this,this.onWidgetSelectionChange));dojo.subscribe("/davinci/ui/widget/replaced",dojo.hitch(this,this._widgetReplaced));this.inherited(arguments)},onEditorSelected:function(h){this._editor&&this._editor.getContext?(this.context=this._editor.getContext(),this._setValues()):(this.context=this._widget=this._subwidget=null,this._clearValues())},startup:function(){function h(b){return function(){return this._onChange({target:b})}}this.inherited(arguments);for(var d in this._boxes)this._boxes[d].domNode=
dojo.byId(this._boxes[d].id),dojo.connect(this._boxes[d].domNode,"onchange",this,h(d)),dojo.connect(this._boxes[d].domNode,"onfocus",this,"_onFocus"),dojo.connect(this._boxes[d].domNode,"onblur",this,"_onBlur")},_onFocus:function(){this.context&&this.context.blockChange(!0)},_onBlur:function(){this.context&&this.context.blockChange(!1)},_onChange:function(h){h=h.target;var d=dojo.attr(this._boxes[h].domNode,"value");this.context&&this.context.blockChange(!1);if(this._boxes[h].value!=d){this._boxes[h].value=
d;var b={};b[h]=d;h=new k(this._widget,b,null);dojo.publish("/davinci/ui/widgetPropertiesChanges",[{source:this._editor.editor_id,command:h}])}},_widgetReplaced:function(h,d){this._widget===d&&(this._widget=h,this.onWidgetSelectionChange())},onWidgetSelectionChange:function(){this._widget?(this._setValues(),this.set("readOnly",!1)):(this.set("readOnly",!0),this._clearValues())},_clearValues:function(){for(name in this._boxes)this._boxes[name].domNode&&dojo.attr(this._boxes[name].domNode,"value",""),
this._boxes[name].value=null},_setValues:function(){if(this._widget)for(var h in this._boxes){var d=this._widget,b=this._boxes[h];b.domNode&&b.domNode.ownerDocument&&(d.getPropertyValue?(d=d.getPropertyValue(h),b.value!=d&&(b.value=d,dojo.attr(b.domNode,"value",b.value))):(b.value="",dojo.attr(b.domNode,"value","")))}}})})},"davinci/ve/_ContextInterface":function(){define("dojo/_base/declare dojo/dom-style dojo/_base/connect dojo/topic ../Theme ../Workbench ./Snap dojox/html/_base".split(" "),function(n,
m,k,h,d,b,c){return n(null,{_designEvents:[],_designMode:!0,isDesignMode:function(){return this._designMode},_disableDesignMode:function(){this._designEvents.forEach(k.disconnect);this._designEvents=[]},_enableDesignMode:function(){var b=this.getContainerNode();this._designEvents.forEach(k.disconnect);this._designEvents=[k.connect(this.getDocument(),"onkeydown",this,"onKeyDown"),k.connect(this.getDocument(),"onkeyup",this,"onKeyUp"),k.connect(b,"ondblclick",this,"onDblClick"),k.connect(b,"onmousedown",
this,"onMouseDown"),k.connect(b,"onclick",this,"onMouseClick"),k.connect(b,"onmousemove",this,"onMouseMove"),k.connect(b,"onmouseup",this,"onMouseUp"),k.connect(b,"onmouseover",this,"onMouseOver"),k.connect(b,"onmouseout",this,"onMouseOut")]},setDesignMode:function(b){!b&&this._designMode&&this._disableDesignMode();b&&!this._designMode&&this._enableDesignMode();this._designMode=b},getActiveDragDiv:function(){return this._activeDragDiv},setActiveDragDiv:function(b){this._activeDragDiv=b},blockChange:function(b){this._blockChange=
b},onMouseClick:function(b){this.eventHandler&&this.eventHandler.click&&this.eventHandler.click(b)},onMouseDown:function(b){if(this._activeTool&&this._activeTool.onMouseDown&&!this._blockChange)this._activeTool.onMouseDown(b);this.blockChange(!1)},onDblClick:function(b){},onMouseMove:function(b){if(this._activeTool&&this._activeTool.onMouseMove&&!this._blockChange)this._activeTool.onMouseMove(b)},onMouseUp:function(b){if(this._activeTool&&this._activeTool.onMouseUp)this._activeTool.onMouseUp(b);this.blockChange(!1);
h.publish("/davinci/ve/context/mouseup",b)},onMouseOver:function(b){if(this._activeTool&&this._activeTool.onMouseOver)this._activeTool.onMouseOver(b)},onMouseOut:function(b){if(this._activeTool&&this._activeTool.onMouseOut)this._activeTool.onMouseOut(b)},dragMoveUpdate:function(b){var g=this,a=this._chooseParent,e=b.widgets,d=b.data,h=b.position,k=b.absolute,r=b.currentParent,m=b.rect,n=b.doSnapLinesX,A=b.doSnapLinesY,z=b.doFindParentsXY,y=b.doCursor,B=b.beforeAfter,C=dojo.isArray(d)?d[0].type:d.type,
E=function(b){if(!(e&&0<=e.indexOf(b))){var q=this.getGlobal().require("dojo/dom-style").get(b.domNode);(n||A)&&c.findSnapOpportunities(this,b,q,n,A);a.findParentsXY({data:d,widget:b,absolute:k,position:h,doCursor:y,beforeAfter:B});dojo.forEach(b.getChildren(),function(a){E.apply(g,[a])})}};if(n||A)doSnapLines=c.updateSnapLinesBeforeTraversal(this,m);m=a.findParentsXYBeforeTraversal(b);E.apply(g,[this.rootWidget]);(n||A)&&c.updateSnapLinesAfterTraversal(this);a.findParentsXYAfterTraversal(b);m&&(a.dragUpdateCandidateParents({widgetType:C,
showCandidateParents:z,doCursor:y,beforeAfter:B,absolute:k,currentParent:r}),a.findParentsXYCleanup(b))},dragMoveCleanup:function(){c.clearSnapLines(this);this._chooseParent.cleanup(this)},onExtentChange:function(b,c,a,e){if(this._activeTool&&this._activeTool.onExtentChange&&!this._blockChange&&(b=dojo.indexOf(this._focuses,b),0<=b))this._activeTool.onExtentChange({index:b,oldBoxes:[c],newBox:a,applyToWhichStates:e});this.blockChange(!1)},onKeyDown:function(b){if(this._activeTool&&this._activeTool.onKeyDown)this._activeTool.onKeyDown(b)},
onKeyUp:function(b){if(this._activeTool&&this._activeTool.onKeyUp)this._activeTool.onKeyUp(b)},onContentChange:function(){this._updateWidgetHash();this.deselectInvisible();dojo.forEach(this.getSelection(),function(b,a){0===a?this.select(b):this.select(b,!0)},this);if("davinci.themeEdit.ThemeEditor"==this.editor.editorID){var c=d.getHelper(this.visualEditor.theme);if(c&&c.onContentChange)c.onContentChange(this,this.visualEditor.theme);else c&&c.then&&c.then(function(b){if(b.helper&&b.helper.onContentChange)b.helper.onContentChange(this,
this.visualEditor.theme)}.bind(this))}this._forceSelectionChange&&(this.onSelectionChange(this.getSelection()),delete this._forceSelectionChange);setTimeout(function(){b._autoSave.call(b)},0)},onSelectionChange:function(b){this._cssCache={};k.publish("/davinci/ui/widgetSelected",{selection:b,context:this})},getActiveTool:function(){return this._activeTool},setActiveTool:function(b){try{this._activeTool&&this._activeTool.deactivate(),this._activeTool=b,this._activeTool||(this._activeTool=this._defaultTool),
this._activeTool.activate(this),k.publish("/davinci/ve/activeToolChanged",[this,b])}catch(p){debugger}},inlineEditActive:function(){return this.getSelection().some(function(b,c){return this._focuses[c].inlineEditActive()},this)},select:function(b,c,a){if(b&&b!=this.rootWidget){var e,g=!1;this._selection&&(g=this._selection.some(function(a,c){return a===b?(e=c,!0):!1}));if(!g){c&&this._selection?(e=this._selection.length,g=this._selection,g.push(b)):g=[b];var d=b.getParent();if(d){var h=d.getHelper();
h&&h.selectChild?h.selectChild(d,b):d.selectChild(b)}if(!this._selection||1<this._selection.length||1<g.length||this.getSelection()!=b)if(d=this._selection,this._selection=g,this.onSelectionChange(g,c),d&&d.forEach(function(a){var b=a.getHelper();if(b&&b.onDeselect)b.onDeselect(a)},this),(c=b.getHelper())&&c.onSelect)c.onSelect(b)}this.updateFocus(b,e,a)}else c||this.deselect()},deselect:function(b){if(this._selection){b&&(helper=b.getHelper());if(b&&this._selection.length){if(1===this._selection.length){if(this._selection[0]!=
b)return;this.focus(null,0);this._selection=void 0}else{var c=dojo.indexOf(this._selection,b);if(0>c)return;this.focus(null,c);this._selection.splice(c,1)}if(helper&&helper.onDeselect)helper.onDeselect(b)}else this._selection&&this._selection.forEach(function(a){var b=a.getHelper();if(b&&b.onDeselect)b.onDeselect(a)},this),this.focus(null),this._selection=void 0;this.onSelectionChange(this.getSelection())}},deselectInvisible:function(){function b(a){return 1==a.nodeType&&"none"==m.get(a,"display")?
!0:a.parentNode?b(a.parentNode):!1}if(this._selection)for(var c=this._selection.length-1;0<=c;c--){var a=this._selection[c],e=a.domNode;if(b(e)&&"xblox/RunScript"!==a.type)this.deselect(a);else for(;e&&"BODY"!=e.tagName.toUpperCase();){if(e&&e.ownerDocument&&e.ownerDocument.defaultView&&"none"==m.get(e,"display")&&"xblox/RunScript"!==a.type){this.deselect(a);break}e=e.parentNode}}},getFlowLayout:function(){var b=!0;b="true"===b;return b},setFlowLayout:function(b){var c=this.getDocumentElement().getChildElement("body");
c&&c.addAttribute(PREF_LAYOUT_ATTR,""+b);return b}})})},"dojo/sniff":function(){define(["./has"],function(n){var m=navigator,k=m.userAgent,m=m.appVersion,h=parseFloat(m);n.add("air",0<=k.indexOf("AdobeAIR"));n.add("wp",parseFloat(k.split("Windows Phone")[1])||void 0);n.add("msapp",parseFloat(k.split("MSAppHost/")[1])||void 0);n.add("khtml",0<=m.indexOf("Konqueror")?h:void 0);n.add("edge",parseFloat(k.split("Edge/")[1])||void 0);n.add("opr",parseFloat(k.split("OPR/")[1])||void 0);n.add("webkit",!n("wp")&&
!n("edge")&&parseFloat(k.split("WebKit/")[1])||void 0);n.add("chrome",!n("edge")&&!n("opr")&&parseFloat(k.split("Chrome/")[1])||void 0);n.add("android",!n("wp")&&parseFloat(k.split("Android ")[1])||void 0);n.add("safari",!(0<=m.indexOf("Safari"))||n("wp")||n("chrome")||n("android")||n("edge")||n("opr")?void 0:parseFloat(m.split("Version/")[1]));n.add("mac",0<=m.indexOf("Macintosh"));n.add("quirks","BackCompat"==document.compatMode);if(!n("wp")&&k.match(/(iPhone|iPod|iPad)/)){var d=RegExp.$1.replace(/P/,
"p"),b=k.match(/OS ([\d_]+)/)?RegExp.$1:"1",b=parseFloat(b.replace(/_/,".").replace(/_/g,""));n.add(d,b);n.add("ios",b)}n.add("bb",(0<=k.indexOf("BlackBerry")||0<=k.indexOf("BB10"))&&parseFloat(k.split("Version/")[1])||void 0);n.add("trident",parseFloat(m.split("Trident/")[1])||void 0);n.add("svg","undefined"!==typeof SVGAngle);n("webkit")||(0<=k.indexOf("Opera")&&n.add("opera",9.8<=h?parseFloat(k.split("Version/")[1])||h:h),!(0<=k.indexOf("Gecko"))||n("wp")||n("khtml")||n("trident")||n("edge")||
n.add("mozilla",h),n("mozilla")&&n.add("ff",parseFloat(k.split("Firefox/")[1]||k.split("Minefield/")[1])||void 0),document.all&&!n("opera")&&(k=parseFloat(m.split("MSIE ")[1])||void 0,(m=document.documentMode)&&5!=m&&Math.floor(k)!=m&&(k=m),n.add("ie",k)),n.add("wii","undefined"!=typeof opera&&opera.wiiremote));return n})},"xideve/metadata/dojo/1.8/callbacks":function(){define(function(){var n=function(k){this.context=k;this.name="Dojo Mobile Views"},m=function(k,h){return-1!=(" "+k.className+" ").indexOf(" "+
h+" ")};n.prototype={id:"DojoMobileViews",category:"DojoMobileView",_viewAdded:function(k,h){dojo.publish("/davinci/scene/added",[this,k,h])},_viewDeleted:function(k){dojo.publish("/davinci/scene/removed",[this,k])},_viewSelectionChanged:function(k,h){h&&h.id&&dojo.publish("/davinci/scene/selectionChanged",[this,h.id])},_reviewEditorSceneChange:function(k){if(k==this.context&&"davinci.review.editor.Context"==k.declaredClass){var h=k.getGlobal();h&&h.require&&h.require(["xide/registry","dojo/topic"],
function(d,b){for(var c=k.rootNode.querySelectorAll(".mblView"),g=0;g<c.length;g++){var h=c[g];if(h.id){var a=d.byId(h.id);a&&(a.onAfterTransitionIn=function(a,b,c,g,d,h,p){dojo.publish("/davinci/scene/selectionChanged",[a,b])}.bind(this,this,h.id),b.subscribe("/dojox/mobile/viewChanged",function(a){this._swapViewChangeHandle||a&&a.id&&dojo.publish("/davinci/scene/selectionChanged",[this,a.id])}.bind(this)))}}}.bind(this))}},selectScene:function(k){k=k.sceneId;var h=this.context.getGlobal();if(h&&
h.require){var d=this.context.getDocument().getElementById(k),b=null;if("davinci.ve.Context"==this.context.declaredClass){if(d){var c=d._dvWidget;c&&(c=c.getHelper())&&c._updateVisibility&&(c._updateVisibility(d),b=k)}}else if("davinci.review.editor.Context"==this.context.declaredClass&&d){for(var g=d,p=g.parentNode,d=[],b=h.require("xide/registry"),a=h.require("dojo/topic");"BODY"!=g.tagName;){if("none"==g.style.display||"true"!=g.getAttribute("selected"))d.splice(0,0,g);else for(var e=0;e<p.childNodes.length;e++)if(h=
p.childNodes[e],1==h.nodeType&&m(h,"mblView")&&h!=g&&("none"!=h.style.display||"true"==h.getAttribute("selected"))){d.splice(0,0,g);break}g=p;p=g.parentNode}for(g=0;g<d.length;g++)if((h=d[g])&&h.id){var q=b.byId(h.id);if(q)if("dojox/mobile/SwapView"==q.declaredClass.replace(/\./g,"/")){for(var p=q.getShowingView(),n,e=p.domNode.parentNode.childNodes,w=!0,r=0;r<e.length;r++)h=e[r],1==h.nodeType&&"dojox/mobile/SwapView"!=h.getAttribute("data-dojo-type").replace(/\./g,"/")&&(w=!1),h.id==p.id&&(c=r),
h.id==q.id&&(n=r);if(w){if(this._swapViewChangeHandle&&(a.unsubscribe(this._swapViewChangeHandle),this._swapViewChangeHandle=null),"number"==typeof c&&"number"==typeof n&&c!==n){var v=n>c?1:-1,x=p;this._swapViewChangeHandle=a.subscribe("/dojox/mobile/viewChanged",function(b){b&&b.id&&b.id!=q.id&&b.id!=x.id?(x=b,x.goTo(v)):(a.unsubscribe(this._swapViewChangeHandle),this._swapViewChangeHandle=null,dojo.publish("/davinci/scene/selectionChanged",[this,q.id]))}.bind(this));x.goTo(v)}}else q.show()}else q.show&&
q.show()}b=d.length?k:null}b&&dojo.publish("/davinci/scene/selectionChanged",[this,b]);return b}},getCurrentScene:function(k){if(k){var h,d,b=this.context.getGlobal();if(b&&b.require){for(var b=b.require("xide/registry"),c=k.querySelectorAll(".mblView"),g=0;g<c.length;g++){var p=c[g];if(p.parentNode==k&&(d=null,"davinci.ve.Context"==this.context.declaredClass?d=p._dvWidget&&p._dvWidget.dijitWidget:"davinci.review.editor.Context"==this.context.declaredClass&&(d=p.id?b.byId(p.id):null),d&&d.getShowingView&&
(d=d.getShowingView())&&d.domNode&&d.domNode.id)){h=d.domNode;break}}return h}}},getInitialScenes:function(k){var h=[];if(!k)return h;var d;if((d=this.context.getGlobal())&&d.require){for(var b=d.require("xide/registry"),c=k.querySelectorAll(".mblView"),g=0;g<c.length;g++){var p=c[g];p.parentNode==k&&(d=null,"davinci.ve.Context"==this.context.declaredClass?d=p._dvWidget&&p._dvWidget.dijitWidget:"davinci.review.editor.Context"==this.context.declaredClass&&(d=p.id?b.byId(p.id):null),d&&d.selected&&
h.push(d.domNode))}return h}},getAllSceneContainers:function(){var k=[];if(!this.context||!this.context.rootNode)return k;for(var h=this.context.rootNode.querySelectorAll(".mblView"),d=0;d<h.length;d++){var b=h[d].parentNode;b&&0>k.indexOf(b)&&k.push(b)}return k},isSceneContainer:function(k){if(!this.context||!k)return!1;var h=this.context.getGlobal();return h&&h.require?dojo.some(k.childNodes,function(d){return 1==d.nodeType&&m(d,"mblView")}):!1},getSceneChildren:function(k){if(!this.context||!k)return[];
var h=this.context.getGlobal();return h&&h.require?dojo.filter(k.childNodes,function(d){return 1==d.nodeType&&m(d,"mblView")}):[]},getSceneContainerForNode:function(k){return this.context&&k?"BODY"==k.tagName?null:k.parentNode:!1}};return{onDocInit:function(k){if(k.registerSceneManager){var h=new n(k);k.registerSceneManager(h);dojo.subscribe("/davinci/ui/context/statesLoaded",function(d){h._reviewEditorSceneChange(d)})}},requiredEventAttribute:function(k){return-1<k.nodeValue.indexOf("dojox.io.scriptFrame._loaded")?
!0:!1},onFirstAdd:function(k,h){},onAdd:function(k,h){},onLastRemove:function(k,h){},onRemove:function(k,h){}}})},"davinci/ve/actions/ViewSplitVMenuAction":function(){define(["dojo/_base/declare","davinci/ve/actions/ContextAction"],function(n,m){return n("davinci.ve.actions.ViewSplitVMenuAction",[m],{run:function(k){(k=this.fixupContext(k))&&k.editor&&k.editor.switchDisplayModeSplitVertical&&k.editor.switchDisplayModeSplitVertical()}})})},"dijit/form/DropDownButton":function(){define("dojo/_base/declare dojo/_base/lang dojo/query ../registry ../popup ./Button ../_Container ../_HasDropDown dojo/text!./templates/DropDownButton.html ../a11yclick".split(" "),
function(n,m,k,h,d,b,c,g,p){return n("dijit.form.DropDownButton",[b,c,g],{baseClass:"dijitDropDownButton",templateString:p,_fillContent:function(){if(this.srcNodeRef){var a=k("*",this.srcNodeRef);this.inherited(arguments,[a[0]]);this.dropDownContainer=this.srcNodeRef}},startup:function(){if(!this._started){if(!this.dropDown&&this.dropDownContainer){var a=k("[widgetId]",this.dropDownContainer)[0];a&&(this.dropDown=h.byNode(a));delete this.dropDownContainer}this.dropDown&&d.hide(this.dropDown);this.inherited(arguments)}},
isLoaded:function(){var a=this.dropDown;return!!a&&(!a.href||a.isLoaded)},loadDropDown:function(a){var b=this.dropDown,c=b.on("load",m.hitch(this,function(){c.remove();a()}));b.refresh()},isFocusable:function(){return this.inherited(arguments)&&!this._mouseDown}})})},"davinci/ve/actions/_ReorderAction":function(){define(["dojo/_base/declare","dojo/_base/array","dojo/dom-style","davinci/ve/actions/ContextAction"],function(n,m,k,h){return n("davinci.ve.actions._ReorderAction",[h],{shouldShow:function(d){return(d=
this.fixupContext(d))&&d.editor&&"davinci.ve.HTMLPageEditor"==d.editor.editorID},selectionSameParentAllAbsolute:function(d){if(0===d.length)return!1;var b=d[0].getParent();if(!b)return!1;for(var c=0;c<d.length;c++){var g=d[c];if(g.getParent()!=b||"absolute"!=(g&&g.domNode?k.get(g.domNode,"position"):null))return!1}return!0},selectionSameParentAllAbsoluteAdjacent:function(d){if(!d||0===d.length||!this.selectionSameParentAllAbsolute(d))return!1;var b=d[0].getParent();if(!b||!b.length)return!1;for(var b=
b.getChildren(),c=Number.MAX_VALUE,g=Number.MIN_VALUE,h=0;h<b.length;h++)0<=d.indexOf(b[h])&&(c=h<c?h:c,g=h>g?h:g);return g-c+1===d.length},getAbsoluteSiblings:function(d){d=d&&d.getParent&&d.getParent();return d?(d=d.getChildren&&d.getChildren())?m.filter(d,function(b){return"absolute"==(b&&b.domNode?k.get(b.domNode,"position"):null)}):[]:[]}})})},"xide/data/Source":function(){define(["dcl/dcl","dojo/_base/declare","xide/utils","xide/lodash"],function(n,m,k,h){var d={_references:null,_originReference:null,
_store:null,onReferenceUpdate:function(){},onReferenceRemoved:function(){},onReferenceDelete:function(){},updateReference:function(){},destroy:function(){this._references=null},getReferences:function(){return this._references?k.pluck(this._references,"item"):[]},hasReference:function(b){return h.find(this._references,{item:b})},addReference:function(b,c,g){!this._references&&(this._references=[]);if(!this.hasReference(b)){this._references.push({item:b,settings:c});if(c&&c.onDelete&&b._store)b._store.on("delete",
function(c){c.target==b&&(this._store.removeSync(this[this._store.idProperty]),this._references.remove(c.target))}.bind(this));g&&b.addSource&&b.addSource(this,c)}},removeReference:function(b){this._references&&h.each(this._references,function(c){if(c&&c.item==b)return this._references&&this._references.remove(c),!0},this)},updateReferences:function(b){var c=b.property,g=b.value;this._references||(this._references=[]);for(var d=0;d<this._references.length;d++){var a=this._references[d],e=a.item,a=
a.settings,h=e._store;if(this._originReference!=e&&b.property&&a.properties&&a.properties[b.property]){h&&h.silent(!0);try{if(e.onSourceChanged)e.onSourceChanged(c,g,b.type);else e.set(c,g)}catch(u){console.error("error updating reference! "+u,u)}h&&(h.silent(!1),h.emit("update",{target:e}))}}},constructor:function(b){this._references=[];k.mixin(this,b)},onItemChanged:function(b){this.updateReferences(b)}};m=m("xgrid.data.Source",null,d);m.dcl=n(null,d);m.Implementation=d;return m})},"xide/manager/ServerActionBase":function(){define("dcl/dcl dojo/_base/declare xdojo/has dojo/Deferred xide/manager/RPCService xide/manager/ManagerBase xide/types xide/utils".split(" "),
function(n,m,k,h,d,b,c,g){var p=null;k={declaredClass:"xide.manager.ServerActionBase",serviceObject:null,serviceUrl:null,singleton:!0,serviceClass:null,defaultOptions:{omit:!0,checkMessages:!0,checkErrors:!0},base64_encode:function(a){var b,c,g,d,h=0,p=0,k="",k=[];if(!a)return a;do b=a.charCodeAt(h++),c=a.charCodeAt(h++),g=a.charCodeAt(h++),d=b<<16|c<<8|g,b=d>>18&63,c=d>>12&63,g=d>>6&63,d&=63,k[p++]="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/\x3d".charAt(b)+"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/\x3d".charAt(c)+
"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/\x3d".charAt(g)+"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/\x3d".charAt(d);while(h<a.length);k=k.join("");a=a.length%3;return(a?k.slice(0,a-3):k)+"\x3d\x3d\x3d".slice(a||3)},runDeferred:function(a,b,c,g,d){var e=this,q=arguments;if(this.serviceObject.__init){if(this.serviceObject.__init.isResolved())return this._runDeferred(a,b,c,g,d);var p=new h;this.serviceObject.__init.then(function(){e._runDeferred(a,b,c,g,
d).then(function(){p.resolve(q)})});return p}return this._runDeferred(a,b,c,g)},_runDeferred:function(a,b,g,d,p){var e=new h,q;d=d||this.defaultOptions;this.check();if(!this.checkCall(a,b,d.omit))return e.reject("method doesnt exists: "+b+" for service class:"+this.serviceClass+" in "+this.declaredClass);this.prepareCall();var k=this.getService(),m=this.getServiceClass(a),n=this,u=function(a,b){var c=e;d.returnProm&&(c=q);c._data=a;if(b&&d.onError)return d.onError(b);c.resolve(a)};q=k[m][b](g);q.then(function(a){a=
a||{};var g=a.error||{};if(d.checkMessages&&g&&3==g.code)n.onMessages(g);if(d.checkErrors){if(1==g.code){d.displayError&&n.onError(g,m+"::"+b);e.reject(g);return}}else{if(1==g.code&&d.displayError)n.onError(g,m+"::"+b);if(g&&g.code&&0!==g.code){u(a,g);return}}d.omit&&n.publish(c.EVENTS.STATUS,{message:"Ok!",what:arguments},this);u(a)},function(a){p&&p(a);n.onError({code:1,message:"Rest Error for "+b})});return d.returnProm?q:e},getService:function(){return this.serviceObject},getServiceClass:function(a){return a||
this.serviceClass},hasMethod:function(a,b){var c=this.getService();b=b||this.getServiceClass();return c&&b&&null!=c[b]&&null!=c[b][a]},findServiceUrl:function(a){var b=window.xFileConfig;if(b&&b.mixins)for(var c=0;c<b.mixins.length;c++){var g=b.mixins[c];if(g.declaredClass===a&&g.mixin&&g.mixin.serviceUrl)return decodeURIComponent(g.mixin.serviceUrl)}return null},init:function(){this.check()},_initService:function(){var a=this;try{var b=p;if(this.singleton){if(b&&b.serviceObject){this.serviceObject=
b.serviceObject;return}this.options||(this.options={});this.options.singleton=this.singleton}this.serviceObject||(this.serviceUrl?(decodeURIComponent(this.serviceUrl),this.serviceObject=new d(decodeURIComponent(this.serviceUrl),this.options),this.serviceObject.runDeferred=function(){return a.runDeferred.apply(a,arguments)},this.serviceObject.sync=this.sync,this.singleton&&(b.serviceObject=this.serviceObject),this.config&&(b.serviceObject.config=this.config),!this.ctx.serviceObject&&(this.ctx.serviceObject=
this.serviceObject)):console.error("have no service url : "+this.declaredClass))}catch(q){console.error("error in rpc service creation : "+q),logError(q)}},check:function(){this.serviceObject||this._initService()},onError:function(a,b){if(a)if(1===a.code){if(a.message&&_.isArray(a.message)){this.publish(c.EVENTS.ERROR,{message:a.message.join("\x3cbr/\x3e")});return}}else 0===a.code&&this.publish(c.EVENTS.STATUS,"Ok");b&&(a.message=b+" -\x3e "+a.message);this.publish(c.EVENTS.ERROR,{error:a},this)},
checkCall:function(a,b,c){a=this.getServiceClass(a);return this.getService()?this.hasMethod(b,a)||!0!==c?!0:(this.onError({code:1,message:["Sorry, server doesnt know "+b]}),!1):!1},prepareCall:function(){var a={};this.config&&this.config.RPC_PARAMS&&(a=g.mixin(a,this.config.RPC_PARAMS.rpcFixedParams),this.serviceObject.extraArgs=a)},callMethodEx:function(a,b,g,d,h){(a=a||this.serviceClass)||console.error("have no service class! "+this.declaredClass,this);this.check();if(this.checkCall(a,b,h)){this.prepareCall();
var e=this;return this.serviceObject[this.getServiceClass(a)][b](g).then(function(g){try{d&&d(g)}catch(x){console.error("bad news : callback for method "+b+" caused a crash in service class "+a),logError(x,"server method failed "+x)}if(g&&g.error&&3==g.error.code)e.onMessages(g.error);if(g&&g.error&&g.error&&0!=g.error.code)e.onError(g.error);else 1==h&&e.publish(c.EVENTS.STATUS,{message:"Ok!"},this)},function(a){e.onError(a)})}},callMethodEx2:function(a,b,c,g,d){this.check();if(this.checkCall(a,
b,d))return this.prepareCall(),this.serviceObject[this.getServiceClass(a)][b](c)},callMethod:function(a,b,d,h){b=b||[[]];var e=this.serviceClass;try{var q=this;if(null==this.serviceObject[e][a]){if(!0===h)this.onError({code:1,message:["Sorry, server doesnt know "+a]});return null}e={};e=g.mixin(e,this.config.RPC_PARAMS.rpcFixedParams);e[this.config.RPC_PARAMS.rpcUserField]=this.config.RPC_PARAMS.rpcUserValue;this.serviceObject.extraArgs=e;this.serviceObject.signatureField=this.config.RPC_PARAMS.rpcSignatureField;
this.serviceObject.signatureToken=this.config.RPC_PARAMS.rpcSignatureToken;this.serviceObject[this.serviceClass][a](b).then(function(a){try{d&&d(a)}catch(x){logError(x,"Error calling RPC method")}if(a&&a.error&&3==a.error.code)this.onMessages(a.error);if(a&&a.error&&a.error&&1==a.error.code)this.onError(a.error);else!1!==h&&this.publish(c.EVENTS.STATUS,{message:"Ok!"},this)}.bind(this),function(a){this.onError(a)}.bind(this))}catch(v){q.onError(v),logError(v,"Error calling RPC method")}}};n=n(b,k);
n.declare=m(null,k);return p=n})},"davinci/html/HTMLItem":function(){define(["dojo/_base/declare","davinci/html/HTMLModel"],function(n,m){return n("davinci.html.HTMLItem",m,{constructor:function(){this.elementType="HTMLItem"},getLabel:function(){return this.getText({indent:0})},onChange:function(k){if(this.parent&&k)this.parent.onChange(k)},_addWS:function(k,h){k=k||0;h=h||0;for(var d=[],b=0;b<k;b++)d.push("\n");d.push("                                          ".substring(0,h));return d.join("")},
close:function(){for(var k=0;k<this.children.length;k++)this.children[k].close()},getID:function(){return this.parent.getID()+":"+this.startOffset+":"+this.getLabel()},getHTMLFile:function(){for(var k=this;k&&"HTMLFile"!=k.elementType;)k=k.parent;return k}})})},"dijit/form/TimeTextBox":function(){define(["dojo/_base/declare"],function(n){return n("dijit.form.TimeTextBox",[],{})})},"davinci/html/CSSProperty":function(){define(["dojo/_base/declare","davinci/html/CSSElement"],function(n,m){return n("davinci.html.CSSProperty",
m,{constructor:function(k,h,d){this.elementType="CSSProperty";this.name=k||"";this.value=h||"";this.parent=d;this.expanded=[];this.lengthValues=[]},getValue:function(){return this.value},getText:function(k){var h="";this.comment&&!k.noComments&&(h+="\n  "+this.comment.getText(k));h+=this.name+" : "+this.value;this.isNotImportant&&(h+=" !important");h+=";";this.postComment&&!k.noComments&&(h+=this.postComment.getText(k));return h},getCSSRule:function(){return this.parent},addProperty:function(k,h){k=
new CSSProperty(k,h,this);this.properties.push(k)},getURL:function(){if(this.url){var k=new davinci.model.Path(this.getCSSFile().url),k=k.getParentPath().append(this.url);return k.toString()}}})})},"xide/widgets/_MenuMixin2":function(){define("dcl/dcl xide/types xide/utils xide/registry xaction/Action xaction/DefaultActions".split(" "),function(n,m,k,h,d,b){var c=function(b,a,c){return function(e){b(e,a,c)}},g=n(null,{actionStores:null,correctSubMenu:!1,_didInit:null,actionFilter:null,hideSubsFirst:!1,
onActionAdded:function(b){this.setActionStore(this.getActionStore(),b.owner||this,!1,!0,b)},onActionRemoved:function(b){this.clearAction(b.target)},clearAction:function(b){if(b){var a=null!==b.getVisibility?b.getVisibility(this.visibility):{};if(a){var c=a.widget;c&&b.removeReference&&b.removeReference(c);c&&c.destroy&&c.destroy();delete a.widget;a.widget=null}}},removeCustomActions:function(){var b=this.store,a=b.query({custom:!0}),c=this.menuData;_.each(a,function(a){b.removeSync(a.command);(a=
_.find(c,{command:a.command}))&&c.remove(a)})},getVisibilityField:function(b,a,c){var e=null!==b.getVisibility?b.getVisibility(this.visibility):{};return null!==e[a]?e[a]:b[a]||c},setVisibilityField:function(b,a,c){var e={};if(b.getVisibility){var g=b.getVisibility(this.visibility)||e;g[a]=c}return g},shouldShowAction:function(b){return!1===this.getVisibilityField(b,"show")||b.getVisibility&&null==b.getVisibility(this.visibility)?!1:!0},addActionStore:function(b){this.actionStores||(this.actionStores=
[]);-1==this.actionStores.indexOf(b)&&this.actionStores.push(b)},buildActionTree:function(b,a){var c=this,g=c.getActions(),d=c.visibility;if(!b)return console.error("buildActionTree : invalid store"),null;c.wireStore(b,function(a){if("update"===a.type){var b=a.target;b.refreshReferences&&b.refreshReferences(a.property,a.value)}});var h=g.filter(function(a){return null!==a.tab}),p=_.groupBy(h,function(a){return a.tab}),k=[];_.each(p,function(a){k=k.concat(a)});var m=[];_.each(h,function(a){a=a.getRoot();
-1==m.indexOf(a)&&m.push(a)});b.menuOrder&&(m=a.sortGroups(m,b.menuOrder));var n={};_.each(m,function(e){var h=a.getItemsAtBranch(g,e),h=c.toActions(h,b),q=_.groupBy(h,function(a){var b=(a.visibility_||{})[d+"_val"]||{};if(a)return b.group||a.group}),p=[];_.each(q,function(a,b){"undefined"!==b&&(p=p.concat(a))});h=_.pluck(p,"command");h.grouped=q;n[e]=h});return this.lastTree=h={root:n,rootActions:m,allActionPaths:_.pluck(g,"command"),allActions:g}},constructor:function(b,a){this.target=a;k.mixin(this,
b)},onClose:function(b){this._rootMenu&&this._rootMenu.parent().removeClass("open")},onOpen:function(){this._rootMenu&&this._rootMenu.parent().addClass("open")},init:function(b){if(!this._didInit){this._didInit=!0;var a=this.getDefaultOptions(),a=$.extend({},a,b),c=this;b=$(document);this.__on(b,"click",null,function(a){c.isOpen&&(c.isOpen=!1,c.onClose(a),$(".dropdown-context").css({display:""}).find(".drop-left").removeClass("drop-left"))});a.preventDoubleContext&&this.__on(b,"contextmenu",".dropdown-context",
function(a){a.preventDefault()});this.__on(b,"mouseenter",".dropdown-submenu",function(b){try{var e=$(b.currentTarget),g=e.find(".dropdown-context-sub:first");if(0!==g.length&&!1!==c.correctSubMenu&&(!c.menu||$.contains(c.menu[0],e[0])))if(e.hasClass("disabled"))g.css("display","none");else{g.css("display","");g.css({top:0});var d=g.height()+0,h=$("html").height(),q=g.offset(),p=h-(q.top+d);q.top+d>h&&g.css({top:p-30}).fadeIn(a.fadeSpeed);var k=g.width(),m=g.offset().left;k+m>window.innerWidth&&g.addClass("drop-left")}}catch(B){logError(B)}})}},
getDefaultOptions:function(){return{fadeSpeed:0,above:"auto",left:"auto",preventDoubleContext:!1,compress:!0}},buildMenuItems:function(b,a,e,g,d){for(g=0;g<a.length;g++){var h=a[g],q,p=h.widget;if("undefined"!==typeof h.divider&&!h.widget)p='\x3cli class\x3d"divider',p+=d?" dynamic-menu-item":"",p+='"\x3e\x3c/li\x3e',h.widget=p,b.append(p);else if("undefined"!==typeof h.header&&!h.widget)p=h.vertical?'\x3cli class\x3d"divider-vertical':'\x3cli class\x3d"nav-header',p+=d?" dynamic-menu-item":"",p+=
'"\x3e'+h.header+"\x3c/li\x3e",h.widget=p,b.append(p);else if("undefined"===typeof h.menu_item_src){"undefined"===typeof h.subMenu||p?p||(h.render?q=h.render(h,b):(q='\x3cli tabindex\x3d"2" class\x3d"" ',q+=d?' class\x3d"dynamic-menu-item"':"",q+="\x3e\x3ca \x3e","undefined"!==typeof a[g].icon&&(q+='\x3cspan class\x3d"'+h.icon+'"\x3e\x3c/span\x3e '),q+=h.text+"\x3c/a\x3e\x3c/li\x3e",q=$(q),h.postRender&&h.postRender(q))):(q='\x3cli class\x3d"dropdown-submenu',q+=d?" dynamic-menu-item":"",q+='"\x3e\x3ca\x3e',
"undefined"!==typeof h.icon&&(q+='\x3cspan class\x3d"icon '+h.icon+'"\x3e\x3c/span\x3e '),q+=h.text+"",q+="\x3c/a\x3e\x3c/li\x3e",q=$(q));if(!("undefined"===typeof h.action||h.widget||h.addClickHandler&&!1===h.addClickHandler())){var k=h.action;if(q&&q.find)q.find("a").addClass("context-event").on("click",c(k,h,q))}q&&!p&&(h.widget=q,q.menu=b,q.data("item",h),h.$menu=b,h.$sub=q,h._render=function(){0===h.index?this.$menu.prepend(this.$sub):this.$menu.append(this.$sub)},h.lazy||h._render());q&&q.attr("level",
h.level);"undefined"==typeof h.subMenu||h.subMenuData?h.subMenu&&h.subMenuData&&this.buildMenuItems(h.subMenuData,h.subMenu,e,!0):(p=this.buildMenu(h.subMenu,e,!0),b.subMenuData=p,h.subMenuData=p,b.find("li:last").append(p),p.attr("level",h.subMenu.level),this.hideSubsFirst&&p.css("display","none"),this.localize(h.text),b.data("item",h))}b._didOnClick||(b.on("click",'.dropdown-menu \x3e li \x3e input[type\x3d"checkbox"] ~ label, .dropdown-menu \x3e li \x3e input[type\x3d"checkbox"], .dropdown-menu.noclose \x3e li',
function(a){a.stopPropagation()}),b._didOnClick=!0)}return b},buildMenu:function(b,a,c){var e=$('\x3cul tabindex\x3d"1" aria-expanded\x3d"true" role\x3d"menu" class\x3d"dropdown-menu dropdown-context'+(c?" dropdown-context-sub":" scrollable-menu ")+'" id\x3d"dropdown-'+a+'"\x3e\x3c/ul\x3e');c||(this._rootMenu=e);return this.buildMenuItems(e,b,a,c)},createNewAction:function(b){var a=b.split("/"),a=a[a.length-1];return new d({command:b,label:a,group:a})},findAction:function(b){var a=null;_.each(this.actionStores,
function(c){(c=c?c.getSync(b):null)&&(a=c)});return a},getAction:function(b,a){a=a||this.store;var c=null;a&&((c=this.findAction(b))||(c=this.createNewAction(b)));return c},getActions:function(b){var a=[],c=this.actionStores,g=this.visibility;b=b||this.actionFilter;_.each(c,function(c){c&&(a=a.concat(c.query(b)))});return a=a.filter(function(a){var b=null!=a.getVisibility?a.getVisibility(g):{};return!1===a.show||!1===b||!1===b.show?!1:!0})},toActions:function(b,a){var c=[],g=this;_.each(b,function(b){(b=
g.getAction(b,a))&&c.push(b)});return c},onRunAction:function(c,a,e){c=this.findAction(c.command);return b.defaultHandler.apply(c.owner||a,[c,e])},getActionProperty:function(b,a,c){b=c in b?b[c]:null;a&&c in a&&(b=a[c]);return b},toMenuItem:function(b,a,c,g,d,h,k){var e=this,q=e.localize(c),p=d.actionType||b.actionType;return{text:q,icon:g,data:b,owner:a,command:b.command,lazy:k,addClickHandler:function(){return p===m.ACTION_TYPE.MULTI_TOGGLE?!1:!0},render:function(a,b){var c=this.data,k=c.getParent?
c.getParent():null,r=e.getActionProperty(c,d,"closeOnClick"),n=" \n",u=null;c.keyboardMappings&&!1!==h&&(u=c.keyboardMappings[0].keys)&&u.length&&(n+=""+u.join(" | ").toUpperCase()+"");if(p===m.ACTION_TYPE.MULTI_TOGGLE){u='\x3cli class\x3d"" \x3e';k=c._store.id+"_"+c.command+"_"+e.id;r=c.get("value");u=u+'\x3cdiv class\x3d"action-checkbox checkbox checkbox-success "\x3e'+('\x3cinput id\x3d"'+k+'" type\x3d"checkbox" '+(!0===r?"checked":"")+"\x3e")+('\x3clabel for\x3d"'+k+'"\x3e')+e.localize(a.text);
u+="\x3c/label\x3e";u+='\x3cspan style\x3d"max-width:100px;margin-right:20px" class\x3d"text-muted pull-right ellipsis keyboardShortCut"\x3e'+n+"\x3c/span\x3e";u+="\x3c/div\x3e";b.addClass("noclose");var n=$(u),v=n.find("INPUT");v.on("change",function(b){c._originReference=a;c._originEvent=b;c.set("value",v[0].checked);c._originReference=null});e.setVisibilityField(c,"widget",a);return n}!1===r&&b.addClass("noclose");p===m.ACTION_TYPE.SINGLE_TOGGLE&&k&&(b=c.value||c.get("value"),u=k.get("value"),
b==u&&(g="fa fa-check"));u='\x3cli\x3e\x3ca title\x3d"'+(a.text||q||e.localize(c.title))+" "+n+'"\x3e';b=a.icon||g;"undefined"!==typeof b&&(u=/<[a-z][\s\S]*>/i.test(b)?u+b:u+('\x3cspan class\x3d"icon '+b+'"/\x3e '));u+=a.text;u+='\x3cspan style\x3d"max-width:100px" class\x3d"text-muted pull-right ellipsis keyboardShortCut"\x3e'+(h?n:"")+"\x3c/span\x3e\x3c/a\x3e\x3c/li\x3e";e.setVisibilityField(c,"widget",a);return $(u)},get:function(a){},set:function(a,b){var c=this.widget;if(c){"disabled"===a&&c.toggleClass&&
c.toggleClass("disabled",b);if("icon"===a){var e=c.find(".icon");e&&(e.attr("class","icon"),this._lastIcon=this.icon,this.icon=b,e.addClass(b))}"value"!==a||p!==m.ACTION_TYPE.MULTI_TOGGLE&&p!==m.ACTION_TYPE.SINGLE_TOGGLE||(a=c.find("input[type\x3dcheckbox]"))&&(b?a.prop("checked",!0):a.removeAttr("checked"))}},action:function(b,c,g){return e.onRunAction(c.data,a,b)},destroy:function(){this.widget&&this.widget.remove()}}},attach:function(b,a){this.target=b;this.menu=this.addContext(b,a);this.domNode=
this.menu[0];this.id=this.domNode.id;h.add(this);return this.menu},addReference:function(b,a){b.addReference&&b.addReference(a,{properties:{value:!0,disabled:!0,enabled:!0}},!0)},onDidRenderActions:function(b,a){a&&a.refreshActions&&a.refreshActions()},getActionData:function(b){var a=null!=b.getVisibility?b.getVisibility(this.visibility):{};return{label:null!=a.label?a.label:b.label,icon:null!=a.icon?a.icon:b.icon,command:null!=a.command?a.command:b.command,visibility:a,group:null!=a.group?a.group:
b.group,widget:a.widget}},_clearAction:function(b){},_findParentData:function(b,a){var c=_.find(b,{command:a});if(c)return c;for(c=0;c<b.length;c++){var g=b[c];if(g.subMenu&&(g=this._findParentData(g.subMenu,a)))return g}return null},_clear:function(){var b=this.getActions(),a=this.store;a&&this.actionStores.remove(a);var c=this,b=b.concat(this._tmpActions);_.each(b,function(a){if(a){var b=null!=a.getVisibility?a.getVisibility(c.visibility):{};if(b){var e=b.widget;a.removeReference&&a.removeReference(e);
e&&e.destroy&&e.destroy();delete b.widget;b.widget=null}}});this.$navBar&&this.$navBar.empty()}});n.chainAfter(g,"destroy");return g})},"dojo/dnd/autoscroll":function(){define("../_base/lang ../sniff ../_base/window ../dom-geometry ../dom-style ../window".split(" "),function(n,m,k,h,d,b){var c={};n.setObject("dojo.dnd.autoscroll",c);c.getViewport=b.getBox;c.V_TRIGGER_AUTOSCROLL=32;c.H_TRIGGER_AUTOSCROLL=32;c.V_AUTOSCROLL_VALUE=16;c.H_AUTOSCROLL_VALUE=16;var g,p=k.doc,a=Infinity,e=Infinity;c.autoScrollStart=
function(c){p=c;g=b.getBox(p);c=k.body(p).parentNode;a=Math.max(c.scrollHeight-g.h,0);e=Math.max(c.scrollWidth-g.w,0)};c.autoScroll=function(d){var h=g||b.getBox(p),q=k.body(p).parentNode,r=0,m=0;d.clientX<c.H_TRIGGER_AUTOSCROLL?r=-c.H_AUTOSCROLL_VALUE:d.clientX>h.w-c.H_TRIGGER_AUTOSCROLL&&(r=Math.min(c.H_AUTOSCROLL_VALUE,e-q.scrollLeft));d.clientY<c.V_TRIGGER_AUTOSCROLL?m=-c.V_AUTOSCROLL_VALUE:d.clientY>h.h-c.V_TRIGGER_AUTOSCROLL&&(m=Math.min(c.V_AUTOSCROLL_VALUE,a-q.scrollTop));window.scrollBy(r,
m)};c._validNodes={div:1,p:1,td:1};c._validOverflow={auto:1,scroll:1};c.autoScrollNodes=function(a){for(var b,e,g,q,p,n=0,z=0,y=a.target;y;){if(1==y.nodeType&&y.tagName.toLowerCase()in c._validNodes){g=d.getComputedStyle(y);p=g.overflowX.toLowerCase()in c._validOverflow;q=g.overflowY.toLowerCase()in c._validOverflow;if(p||q)b=h.getContentBox(y,g),e=h.position(y,!0);if(p){g=Math.min(c.H_TRIGGER_AUTOSCROLL,b.w/2);p=a.pageX-e.x;if(m("webkit")||m("opera"))p+=k.body().scrollLeft;n=0;0<p&&p<b.w&&(p<g?n=
-g:p>b.w-g&&(n=g),y.scrollLeft+=n)}if(q){q=Math.min(c.V_TRIGGER_AUTOSCROLL,b.h/2);g=a.pageY-e.y;if(m("webkit")||m("opera"))g+=k.body().scrollTop;z=0;0<g&&g<b.h&&(g<q?z=-q:g>b.h-q&&(z=q),y.scrollTop+=z)}if(n||z)return}try{y=y.parentNode}catch(B){y=null}}c.autoScroll(a)};return c})},"xide/widgets/_MenuMixin4":function(){define("dcl/dcl xide/types xide/utils xide/registry xaction/Action xaction/DefaultActions xide/popup".split(" "),function(n,m,k,h,d,b,c){var g=function(a,b,c){return function(e){return a(e,
b,c)}};n(null,{actionStores:null,correctSubMenu:!1,_didInit:null,actionFilter:null,hideSubsFirst:!1,collapseSmallGroups:0,containerClass:"",lastTree:null,onActionAdded:function(a){this.setActionStore(this.getActionStore(),a.owner||this,!1,!0,a)},onActionRemoved:function(a){this.clearAction(a.target)},clearAction:function(a){if(a){var b=null!==a.getVisibility?a.getVisibility(this.visibility):{};if(b){var c=b.widget;c&&a.removeReference&&a.removeReference(c);c&&c.destroy&&c.destroy();delete b.widget;
b.widget=null}}},removeCustomActions:function(){var a=this.store,b=a._find({custom:!0}),c=this.menuData;_.each(b,function(b){a.removeSync(b.command);(b=_.find(c,{command:b.command}))&&c.remove(b)})},getVisibilityField:function(a,b,c){var e=null!==a.getVisibility?a.getVisibility(this.visibility):{};return null!==e[b]?e[b]:a[b]||c},setVisibilityField:function(a,b,c){var e={};if(a.getVisibility){var g=a.getVisibility(this.visibility)||e;g[b]=c}return g},shouldShowAction:function(a){return!1===this.getVisibilityField(a,
"show")||a.getVisibility&&null==a.getVisibility(this.visibility)?!1:!0},addActionStore:function(a){this.actionStores||(this.actionStores=[]);-1==this.actionStores.indexOf(a)&&this.actionStores.push(a)},constructor:function(a,b){this.target=b;k.mixin(this,a)},onClose:function(a){this._rootMenu&&this._rootMenu.parent().removeClass("open")},onOpen:function(){this._rootMenu&&this._rootMenu.parent().addClass("open")},isLeftToRight:function(){return!1},init:function(a){if(!this._didInit){this._didInit=
!0;var b=this.getDefaultOptions(),b=$.extend({},b,a),g=this;a=$(document);this.__on(a,"click",null,function(a){g.isOpen&&(g.isOpen=!1,g.onClose(a),$(".dropdown-context").css({display:""}).find(".drop-left").removeClass("drop-left"))});b.preventDoubleContext&&this.__on(a,"contextmenu",".dropdown-context",function(a){a.preventDefault()});this.__on(a,"mouseenter",".dropdown-submenu",function(a){try{var e=$(a.currentTarget),d=e.find(".dropdown-context-sub:first");a=!1;if(0===d.length)if(d=e.data("sub"))a=
!0;else return;var h=d.data("data"),q=1===(h?h[0].level:0);if(!g.menu||$.contains(g.menu[0],e[0]))if(e.hasClass("disabled"))d.css("display","none");else if(d.css("display","block"),q){var p=function(){var a=d.data("_popupWrapper");c.close({domNode:d[0],_popupWrapper:a})};d.css("display","initial");d.css("position","initial");a||(e.data("sub",d),d.data("owner",g),d.on("mouseleave",function(){p()}),e.on("mouseleave",function(){}));c.open({popup:d[0],around:e[0],orient:["below","above"],maxHeight:-1,
owner:g,onExecute:function(){g.closeDropDown(!0)},onCancel:function(){p()},onClose:function(){}})}else{d.data("didSetup")||(d.data("didSetup",!0),e.on("mouseleave",function(){d.css("display","")}));d.css({top:0});var k=d.height()+0,m=$("html").height(),n=d.offset(),u=m-(n.top+k);n.top+k>m&&d.css({top:u-30}).fadeIn(b.fadeSpeed);var E=d.width(),F=d.offset().left;E+F>window.innerWidth&&d.addClass("drop-left")}}catch(G){logError(G)}})}},getDefaultOptions:function(){return{fadeSpeed:0,above:"auto",left:"auto",
preventDoubleContext:!1,compress:!0}},buildMenuItems:function(a,b,c,d,h){for(d=0;d<b.length;d++){var e=b[d],q,p=e.widget;if("undefined"!==typeof e.divider&&!e.widget)p='\x3cli class\x3d"divider',p+=h?" dynamic-menu-item":"",p+='"\x3e\x3c/li\x3e',e.widget=p,a.append(p),p.data("item",e);else if("undefined"!==typeof e.header&&!e.widget)p=e.vertical?'\x3cli class\x3d"divider-vertical':'\x3cli class\x3d"nav-header testClass',p+=h?" dynamic-menu-item":"",p+='"\x3e'+e.header+"\x3c/li\x3e",p=$(p),e.widget=
p,a.append(p),p.data("item",e);else if("undefined"===typeof e.menu_item_src){"undefined"===typeof e.subMenu||p?p||(e.render?q=e.render(e,a):(q='\x3cli tabindex\x3d"-1" class\x3d"" ',q+=h?' class\x3d"dynamic-menu-item"':"",q+="\x3e\x3ca \x3e","undefined"!==typeof b[d].icon&&(q+='\x3cspan class\x3d"'+e.icon+'"\x3e\x3c/span\x3e '),q+=e.text+"\x3c/a\x3e\x3c/li\x3e",q=$(q),e.postRender&&e.postRender(q))):(q='\x3cli tabindex\x3d"-1" class\x3d"dropdown-submenu '+this.containerClass,q+=h?" dynamic-menu-item":
"",q+='"\x3e\x3ca\x3e',"undefined"!==typeof e.icon&&(q+='\x3cspan class\x3d"icon '+e.icon+'"\x3e\x3c/span\x3e '),q+=e.text+"",q+="\x3c/a\x3e\x3c/li\x3e",q=$(q));if(!("undefined"===typeof e.action||e.widget||e.addClickHandler&&!1===e.addClickHandler())){var k=e.action;if(q&&q.find){var m=q.find("a");m.addClass("context-event");k=g(k,e,q);m.data("handler",k).on("click",k)}}q&&!p&&(e.widget=q,q.menu=a,q.data("item",e),e.$menu=a,e.$sub=q,e._render=function(){0===e.index?this.$menu.prepend(this.$sub):
this.$menu.append(this.$sub)},e.lazy||e._render());q&&q.attr("level",e.level);"undefined"==typeof e.subMenu||e.subMenuData?e.subMenu&&e.subMenuData&&this.buildMenuItems(e.subMenuData,e.subMenu,c,!0):(p=this.buildMenu(e.subMenu,c,!0),a.subMenuData=p,e.subMenuData=p,a.find("li:last").append(p),p.attr("level",e.subMenu.level),this.hideSubsFirst&&p.css("display","none"),a.data("item",e))}a._didOnClick||(a.on("click",'.dropdown-menu \x3e li \x3e input[type\x3d"checkbox"] ~ label, .dropdown-menu \x3e li \x3e input[type\x3d"checkbox"], .dropdown-menu.noclose \x3e li',
function(a){a.stopPropagation()}),a._didOnClick=!0)}return a},buildMenu:function(a,b,c){var e=$('\x3cul tabindex\x3d"-1" aria-expanded\x3d"true" role\x3d"menu" class\x3d"dropdown-menu dropdown-context'+(c?" dropdown-context-sub "+this.containerClass:" scrollable-menu ")+'" id\x3d"dropdown-'+b+'"\x3e\x3c/ul\x3e');c||(this._rootMenu=e);b=this.buildMenuItems(e,a,b,c);e.data("data",a);return b},createNewAction:function(a){var b=a.split("/"),b=b[b.length-1];return new d({command:a,label:b,group:b,dynamic:!0})},
findAction:function(a){var b=null;_.each(this.actionStores,function(c){(c=c?c.getSync(a):null)&&(b=c)});return b},getAction:function(a,b){b=b||this.store;var c=null;b&&((c=this.findAction(a))||(c=this.createNewAction(a)));return c},getActions:function(a){var b=[],c=this.actionStores,g=this.visibility;a=a||this.actionFilter;_.each(c,function(c){c&&(b=b.concat(c._find(a)))});return b=b.filter(function(a){var b=null!=a.getVisibility?a.getVisibility(g):{};return!(!1===a.show||!1===b||!1===b.show)})},
toActions:function(a,b){var c=[],e=this;_.each(a,function(a){(a=e.getAction(a,b))&&c.push(a)});return c},onRunAction:function(a,c,g){a=this.findAction(a.command);return b.defaultHandler.apply(a.owner||c,[a,g])},getActionProperty:function(a,b,c){a=c in a?a[c]:null;b&&c in b&&(a=b[c]);return a},attach:function(a,b){this.target=a;this.menu=this.addContext(a,b);this.domNode=this.menu[0];this.id=this.domNode.id;h.add(this);return this.menu},addReference:function(a,b){a.addReference&&a.addReference(b,{properties:{value:!0,
disabled:!0,enabled:!0}},!0)},onDidRenderActions:function(a,b){b&&b.refreshActions&&b.refreshActions()},getActionData:function(a){var b=null!=a.getVisibility?a.getVisibility(this.visibility):{};return{label:null!=b.label?b.label:a.label,icon:null!=b.icon?b.icon:a.icon,command:null!=b.command?b.command:a.command,visibility:b,group:null!=b.group?b.group:a.group,tab:null!=b.tab?b.tab:a.tab,expand:null!=b.expand?b.expand:!1,widget:b.widget}},_clearAction:function(a){},_findParentData:function(a,b){var c=
_.find(a,{command:b});if(c)return c;for(c=0;c<a.length;c++){var e=a[c];if(e.subMenu&&(e=this._findParentData(e.subMenu,b)))return e}return null},_clear:function(){var a=this.getActions(),b=this.store;b&&this.actionStores.remove(b);var c=this,a=a.concat(this._tmpActions);_.each(a,function(a){if(a){var b=null!=a.getVisibility?a.getVisibility(c.visibility):{};if(b){var e=b.widget;a.removeReference&&a.removeReference(e);e&&e.destroy&&e.destroy();delete b.widget;b.widget=null}}});this.$navBar&&this.$navBar.empty()},
buildActionTree:function(a,b){var c=this,e=c.getActions(),g=c.visibility;c.wireStore(a,function(a){if("update"===a.type){var b=a.target;b.refreshReferences&&b.refreshReferences(a.property,a.value)}});var d=e.filter(function(a){var b=(a.visibility_||{})[g+"_val"]||{};if(a)return b.tab||a.tab}),h=_.groupBy(d,function(a){var b=(a.visibility_||{})[g+"_val"]||{};if(a)return b.tab||a.tab}),p=[];_.each(h,function(a){p=p.concat(a)});var k=[];_.each(d,function(a){a=a.getRoot();-1==k.indexOf(a)&&k.push(a)});
a.menuOrder&&(k=b.sortGroups(k,a.menuOrder));var m={},n=k[0],B=0;_.each(k,function(d){var h=b.getItemsAtBranch(e,d),h=c.toActions(h,a),q=[],p=[];_.each(h,function(a){if(c.getActionData(a).expand){var b=a.getChildren();b&&b.length&&(q=q.concat(b));p.push(a)}});var h=h.concat(q),h=h.filter(function(a){return-1==p.indexOf(a)}),k=_.groupBy(h,function(a){var b=(a.visibility_||{})[g+"_val"]||{};if(a)return b.group||a.group}),r=[];_.each(k,function(a,b){"undefined"!==b&&(r=r.concat(a))});h=_.pluck(r,"command");
h.grouped=k;m[d]=h;c.collapseSmallGroups&&(h=_.keys(h.grouped).length,h>B&&(B=h,n=d))});this.collapseSmallGroups&&_.each(m,function(a,b){_.keys(a.grouped).length<c.collapseSmallGroups&&(m[n]&&_.each(a.grouped,function(a,b){m[n].grouped[b]=a}),m[n]&&_.each(a,function(a){m[n].push(a)}),m[n]&&delete m[b])});return this.lastTree=d={root:m,rootActions:k,allActionPaths:_.pluck(e,"command"),allActions:e}}});var p=n(null,{actionStores:null,correctSubMenu:!1,_didInit:null,actionFilter:null,hideSubsFirst:!1,
collapseSmallGroups:0,containerClass:"",lastTree:null,ITEM_TAG:"li",CONTAINER_TAG:"ul",ITEM_CLASS:"actionItem",onActionAdded:function(a){this.setActionStore(this.getActionStore(),a.owner||this,!1,!0,a)},onActionRemoved:function(a){this.clearAction(a.target)},clearAction:function(a){if(a){var b=null!==a.getVisibility?a.getVisibility(this.visibility):{};if(b){var c=b.widget;c&&a.removeReference&&a.removeReference(c);c&&c.destroy&&c.destroy();delete b.widget;b.widget=null}}},removeCustomActions:function(){var a=
this.store,b=a._find({custom:!0}),c=this.menuData;_.each(b,function(b){a.removeSync(b.command);(b=_.find(c,{command:b.command}))&&c.remove(b)})},getVisibilityField:function(a,b,c){var e=null!==a.getVisibility?a.getVisibility(this.visibility):{};return null!==e[b]?e[b]:a[b]||c},setVisibilityField:function(a,b,c){var e={};if(a.getVisibility){var g=a.getVisibility(this.visibility)||e;g[b]=c}return g},shouldShowAction:function(a){return!1===this.getVisibilityField(a,"show")||a.getVisibility&&null==a.getVisibility(this.visibility)?
!1:!0},addActionStore:function(a){this.actionStores||(this.actionStores=[]);-1==this.actionStores.indexOf(a)&&this.actionStores.push(a)},constructor:function(a,b){this.target=b;k.mixin(this,a)},onClose:function(a){this._rootMenu&&this._rootMenu.parent().removeClass("open")},onOpen:function(){this._rootMenu&&this._rootMenu.parent().addClass("open")},isLeftToRight:function(){return!1},init:function(a){if(!this._didInit){this._didInit=!0;var b=this.getDefaultOptions(),b=$.extend({},b,a),g=this;a=$(document);
this.__on(a,"click",null,function(a){g.isOpen&&(g.isOpen=!1,g.onClose(a),$(".dropdown-context").css({display:""}).find(".drop-left").removeClass("drop-left"))});b.preventDoubleContext&&this.__on(a,"contextmenu",".dropdown-context",function(a){a.preventDefault()});this.__on(a,"mouseenter",".dropdown-submenu",function(a){try{var e=$(a.currentTarget),d=e.find(".dropdown-context-sub:first");a=!1;if(0===d.length)if(d=e.data("sub"))a=!0;else return;var h=d.data("data"),q=1===(h?h[0].level:0);if(!g.menu||
$.contains(g.menu[0],e[0]))if(e.hasClass("disabled"))d.css("display","none");else if(d.css("display","block"),q){var p=function(){var a=d.data("_popupWrapper");c.close({domNode:d[0],_popupWrapper:a})};d.css("display","initial");d.css("position","initial");a||(e.data("sub",d),d.data("owner",g),d.on("mouseleave",function(){p()}),e.on("mouseleave",function(){}));c.open({popup:d[0],around:e[0],orient:["below","above"],maxHeight:-1,owner:g,onExecute:function(){g.closeDropDown(!0)},onCancel:function(){p()},
onClose:function(){}})}else{d.data("didSetup")||(d.data("didSetup",!0),e.on("mouseleave",function(){d.css("display","")}));d.css({top:0});var k=d.height()+0,m=$("html").height(),n=d.offset(),u=m-(n.top+k);n.top+k>m&&d.css({top:u-30}).fadeIn(b.fadeSpeed);var E=d.width(),F=d.offset().left;E+F>window.innerWidth&&d.addClass("drop-left")}}catch(G){logError(G)}})}},getDefaultOptions:function(){return{fadeSpeed:0,above:"auto",left:"auto",preventDoubleContext:!1,compress:!0}},buildMenuItems:function(a,b,
c,d,h){d="\x3c"+this.ITEM_TAG+" ";for(var e="\x3c/"+this.ITEM_TAG+"\x3e",q=this.ITEM_CLASS,p=0;p<b.length;p++){var k=b[p],m,n=k.widget;if("undefined"!==typeof k.divider&&!k.widget)n=d+'class\x3d"divider',n+=h?" dynamic-menu-item":"",n+='"\x3e'+e,k.widget=n,a.append(n),n.data("item",k);else if("undefined"!==typeof k.header&&!k.widget)n=k.vertical?'\x3cli class\x3d"divider-vertical':'\x3cli class\x3d"nav-header testClass',n+=h?" dynamic-menu-item":"",n+='"\x3e'+k.header+"\x3c/li\x3e",n=$(n),k.widget=
n,a.append(n),n.data("item",k);else if("undefined"===typeof k.menu_item_src){"undefined"===typeof k.subMenu||n?n||(k.render?m=k.render(k,a):(m=d+' tabindex\x3d"-1" ',m+=h?' class\x3d"dynamic-menu-item"':"",m+="\x3e\x3ca \x3e","undefined"!==typeof b[p].icon&&(m+='\x3cspan class\x3d"'+k.icon+'"\x3e\x3c/span\x3e '),m+=k.text+"\x3c/a\x3e"+e,m=$(m),k.postRender&&k.postRender(m))):(m=d+'tabindex\x3d"-1" class\x3d"dropdown-submenu '+q+this.containerClass,m+=h?" dynamic-menu-item":"",m+='"\x3e\x3ca\x3e',
"undefined"!==typeof k.icon&&(m+='\x3cspan class\x3d"icon '+k.icon+'"\x3e\x3c/span\x3e '),m+=k.text+"",m+="\x3c/a\x3e"+e,m=$(m));if(!("undefined"===typeof k.action||k.widget||k.addClickHandler&&!1===k.addClickHandler())){var u=k.action;if(m&&m.find){var w=m.find("a");w.addClass("context-event");u=g(u,k,m);w.data("handler",u).on("click",u)}}m&&!n&&(k.widget=m,m.menu=a,m.data("item",k),k.$menu=a,k.$sub=m,k._render=function(){0===k.index?this.$menu.prepend(this.$sub):this.$menu.append(this.$sub)},k.lazy||
k._render());m&&m.attr("level",k.level);"undefined"==typeof k.subMenu||k.subMenuData?k.subMenu&&k.subMenuData&&this.buildMenuItems(k.subMenuData,k.subMenu,c,!0):(n=this.buildMenu(k.subMenu,c,!0),a.subMenuData=n,k.subMenuData=n,a.find(this.ITEM_TAG+":last").append(n),n.attr("level",k.subMenu.level),this.hideSubsFirst&&n.css("display","none"),a.data("item",k))}a._didOnClick||(a.on("click",'.dropdown-menu \x3e li \x3e input[type\x3d"checkbox"] ~ label, .dropdown-menu \x3e li \x3e input[type\x3d"checkbox"], .dropdown-menu.noclose \x3e li',
function(a){a.stopPropagation()}),a._didOnClick=!0)}return a},buildMenu:function(a,b,c){var e=$('\x3cul tabindex\x3d"-1" aria-expanded\x3d"true" role\x3d"menu" class\x3d"dropdown-menu dropdown-context'+(c?" dropdown-context-sub "+this.containerClass:" scrollable-menu ")+'" id\x3d"dropdown-'+b+'"\x3e\x3c/ul\x3e');c||(this._rootMenu=e);b=this.buildMenuItems(e,a,b,c);e.data("data",a);return b},createNewAction:function(a){var b=a.split("/"),b=b[b.length-1];return new d({command:a,label:b,group:b,dynamic:!0})},
findAction:function(a){var b=null;_.each(this.actionStores,function(c){(c=c?c.getSync(a):null)&&(b=c)});return b},getAction:function(a,b){b=b||this.store;var c=null;b&&((c=this.findAction(a))||(c=this.createNewAction(a)));return c},getActions:function(a){var b=[],c=this.actionStores,g=this.visibility;a=a||this.actionFilter;_.each(c,function(c){c&&(b=b.concat(c._find(a)))});return b=b.filter(function(a){var b=null!=a.getVisibility?a.getVisibility(g):{};return!(!1===a.show||!1===b||!1===b.show)})},
toActions:function(a,b){var c=[],e=this;_.each(a,function(a){(a=e.getAction(a,b))&&c.push(a)});return c},onRunAction:function(a,c,g){a=this.findAction(a.command);return b.defaultHandler.apply(a.owner||c,[a,g])},getActionProperty:function(a,b,c){a=c in a?a[c]:null;b&&c in b&&(a=b[c]);return a},toMenuItem:function(a,b,c,g,d,h,p){var e=this,q=!1!==a.localize?e.localize(c):c,k=d.actionType||a.actionType,r=this.ITEM_CLASS,n="\x3c"+this.ITEM_TAG+' class\x3d"'+r+'" ',u="\x3c/"+this.ITEM_TAG+"\x3e";return{text:q,
icon:g,data:a,owner:b,command:a.command,lazy:p,addClickHandler:function(){return k!==m.ACTION_TYPE.MULTI_TOGGLE},render:function(a,v){if(e.renderItem)return e.renderItem(this,a,v,this.data,b,c,g,d,h,p);var w=this.data,x=w.getParent?w.getParent():null,z=e.getActionProperty(w,d,"closeOnClick"),A=" \n",y=null;w.keyboardMappings&&!1!==h&&(y=w.keyboardMappings[0].keys)&&y.length&&(A+=""+y.join(" | ").toUpperCase()+"");if(k===m.ACTION_TYPE.MULTI_TOGGLE){y=n+'tabindex\x3d"-1" class\x3d"" \x3e';x=w._store.id+
"_"+w.command+"_"+e.id;z=w.get("value");y=y+'\x3cdiv class\x3d"action-checkbox checkbox checkbox-success "\x3e'+('\x3cinput id\x3d"'+x+'" type\x3d"checkbox" '+(!0===z?"checked":"")+"\x3e")+('\x3clabel for\x3d"'+x+'"\x3e')+e.localize(a.text);y+="\x3c/label\x3e";y+='\x3cspan style\x3d"max-width:100px;margin-right:20px" class\x3d"text-muted pull-right ellipsis keyboardShortCut"\x3e'+A+"\x3c/span\x3e";y+=u;v.addClass("noclose");var A=$(y),B=A.find("INPUT");B.on("change",function(b){w._originReference=
a;w._originEvent=b;w.set("value",B[0].checked);w._originReference=null});e.setVisibilityField(w,"widget",a);return A}!1===z&&v.addClass("noclose");k===m.ACTION_TYPE.SINGLE_TOGGLE&&x&&(v=w.value||w.get("value"),y=x.get("value"),v==y&&(g="fa fa-check"));v=a.text||q||e.localize(w.title);y=n+'class\x3d"'+r+'" tabindex\x3d"-1"\x3e\x3ca title\x3d"'+v+" "+A+'"\x3e';v=a.icon||g;"undefined"!==typeof v&&(y=/<[a-z][\s\S]*>/i.test(v)?y+v:y+('\x3cspan class\x3d"icon '+v+'"/\x3e '));y+=a.text;y+='\x3cspan style\x3d"max-width:100px" class\x3d"text-muted pull-right ellipsis keyboardShortCut"\x3e'+
(h?A:"")+"\x3c/span\x3e\x3c/a\x3e"+u;e.setVisibilityField(w,"widget",a);return $(y)},get:function(a){},set:function(a,b){var c=this.widget;if(c){"disabled"===a&&c.toggleClass&&c.toggleClass("disabled",b);if("icon"===a){var e=c.find(".icon");e&&(e.attr("class","icon"),this._lastIcon=this.icon,this.icon=b,e.addClass(b))}"value"!==a||k!==m.ACTION_TYPE.MULTI_TOGGLE&&k!==m.ACTION_TYPE.SINGLE_TOGGLE||(a=c.find("input[type\x3dcheckbox]"))&&(b?a.prop("checked",!0):a.removeAttr("checked"))}},action:function(a,
c,g){return e.onRunAction(c.data,b,a)},destroy:function(){this.widget&&this.widget.remove()}}},attach:function(a,b){this.target=a;this.menu=this.addContext(a,b);this.domNode=this.menu[0];this.id=this.domNode.id;h.add(this);return this.menu},addReference:function(a,b){a.addReference&&a.addReference(b,{properties:{value:!0,disabled:!0,enabled:!0}},!0)},onDidRenderActions:function(a,b){b&&b.refreshActions&&b.refreshActions()},getActionData:function(a){var b=null!=a.getVisibility?a.getVisibility(this.visibility):
{};return{label:null!=b.label?b.label:a.label,icon:null!=b.icon?b.icon:a.icon,command:null!=b.command?b.command:a.command,visibility:b,group:null!=b.group?b.group:a.group,tab:null!=b.tab?b.tab:a.tab,expand:null!=b.expand?b.expand:!1,widget:b.widget}},_clearAction:function(a){},_findParentData:function(a,b){var c=_.find(a,{command:b});if(c)return c;for(c=0;c<a.length;c++){var e=a[c];if(e.subMenu&&(e=this._findParentData(e.subMenu,b)))return e}return null},_clear:function(){var a=this.getActions(),
b=this.store;b&&this.actionStores.remove(b);var c=this,a=a.concat(this._tmpActions);_.each(a,function(a){if(a){var b=null!=a.getVisibility?a.getVisibility(c.visibility):{};if(b){var e=b.widget;a.removeReference&&a.removeReference(e);e&&e.destroy&&e.destroy();delete b.widget;b.widget=null}}});this.$navBar&&this.$navBar.empty()},buildActionTree:function(a,b){var c=this,e=c.getActions(),g=c.visibility;c.wireStore(a,function(a){if("update"===a.type){var b=a.target;b.refreshReferences&&b.refreshReferences(a.property,
a.value)}});var d=e.filter(function(a){var b=(a.visibility_||{})[g+"_val"]||{};if(a)return b.tab||a.tab}),h=_.groupBy(d,function(a){var b=(a.visibility_||{})[g+"_val"]||{};if(a)return b.tab||a.tab}),p=[];_.each(h,function(a){p=p.concat(a)});var k=[];_.each(d,function(a){a=a.getRoot();-1==k.indexOf(a)&&k.push(a)});a.menuOrder&&(k=b.sortGroups(k,a.menuOrder));var m={},n=k[0],B=0;_.each(k,function(d){var h=b.getItemsAtBranch(e,d),h=c.toActions(h,a),p=[],q=[];_.each(h,function(a){if(c.getActionData(a).expand){var b=
a.getChildren();b&&b.length&&(p=p.concat(b));q.push(a)}});var h=h.concat(p),h=h.filter(function(a){return-1==q.indexOf(a)}),k=_.groupBy(h,function(a){var b=(a.visibility_||{})[g+"_val"]||{};if(a)return b.group||a.group}),r=[];_.each(k,function(a,b){"undefined"!==b&&(r=r.concat(a))});h=_.pluck(r,"command");h.grouped=k;m[d]=h;c.collapseSmallGroups&&(h=_.keys(h.grouped).length,h>B&&(B=h,n=d))});this.collapseSmallGroups&&_.each(m,function(a,b){_.keys(a.grouped).length<c.collapseSmallGroups&&(m[n]&&_.each(a.grouped,
function(a,b){m[n].grouped[b]=a}),m[n]&&_.each(a,function(a){m[n].push(a)}),m[n]&&delete m[b])});return this.lastTree=d={root:m,rootActions:k,allActionPaths:_.pluck(e,"command"),allActions:e}}});n.chainAfter(p,"destroy");return p})},"dcl/mini":function(){(function(n){"undefined"!=typeof define?define([],n):"undefined"!=typeof module?module.exports=n():dcl=n()})(function(){function n(b,d){var a=[0],e,g,p,m,r,v,x,A,z=0,y;if(b)if(b instanceof Array){r={};x=b.slice(0).reverse();for(A=x.length-1;0<=A;--A)if(g=
x[A],g._uniqueId=g._uniqueId||h++,e=g._meta){v=e.bases;for(z=v.length-1;0<z;--z)y=v[z]._uniqueId,r[y]=(r[y]||0)+1;x[A]=v.slice(0)}else x[A]=[g];e={};a:for(;x.length;){for(A=0;A<x.length;++A)if(v=x[A],g=v[0],y=g._uniqueId,!r[y]){e[y]||(a.push(g),e[y]=1);v.shift();v.length?--r[v[0]._uniqueId]:x.splice(A,1);continue a}n._error("cycle",d,x)}b=b[0];z=a.length-((m=b._meta)&&b===a[a.length-(z=m.bases.length)]?z:1)-1}else b._uniqueId=b._uniqueId||h++,a=a.concat((m=b._meta)?m.bases:b);e=b?n.delegate(b.prototype):
{};for(v=b&&(m=b._meta)?n.delegate(m.weaver):{constructor:2};0<z;--z)if(g=a[z],m=g._meta,n.mix(e,m&&m.ownProps||g.prototype),m)for(y in x=m.weaver)v[y]=(+v[y]||0)|x[y];for(y in d)k(m=d[y])?v[y]=+v[y]||0:e[y]=m;m={bases:a,ownProps:d,weaver:v,chains:{}};a[0]={_meta:m,prototype:e};b=e;g=m.weaver;r=m.bases;v=m.chains;for(p in g)b[p]=n._stub(g[p],r,p,v);p=e.constructor;p._meta=m;p.prototype=e;a[0]=p;a=n._postprocess(p);d.declaredClass&&!c[d.declaredClass]&&(c[d.declaredClass]=a);return a}function m(b){this.around=
b}function k(b){return b&&b.spr instanceof m}var h=0,d={},b,c={};(b=function(b,c){for(var a in c)b[a]=c[a]})(n,{mix:b,delegate:function(b){return Object.create(b)},allKeys:function(b){var c=[],a;for(a in b)c.push(a);return c},Super:m,superCall:function(b){return n._makeSuper(b)},_makeSuper:function(b,c){var a=function(){};a.spr=new (c||m)(b);return a},_postprocess:function(b){return b},_error:function(b){throw Error("dcl: "+b);},_instantiate:function(b,c,a){c=b.spr.around(c);c.ctr=b.ctr;return c},
_extractChain:function(b,c,a){for(var e=b.length-1,g=[],h,p,r="around"==a;h=b[e];--e)if((p=h._meta)?(p=p.ownProps).hasOwnProperty(c)&&(k(p=p[c])?r?p.spr.around:p=p.spr[a]:r):r&&(p="constructor"==c?h:h.prototype[c])&&p!==d[c])"function"==typeof p?(p.ctr=h,g.push(p)):n._error("wrong super",h,c);return g},_stubChain:function(b){var c=b.length,a;return c?1==c?(a=b[0],function(){a.apply(this,arguments)}):function(){for(var a=0;a<c;++a)b[a].apply(this,arguments)}:0},_stubSuper:function(b,c){for(var a=0,
e,g=d[c];e=b[a];++a)g=k(e)?b[a]=n._instantiate(e,g,c):e;return"constructor"!=c?g:function(){g.apply(this,arguments)}},_stubChainSuper:function(b,c,a){for(var e=0,g,d,h=0;g=b[e];++e)k(g)&&(d=e-h,b[e]=n._instantiate(g,d?1==d?b[h]:c(b.slice(h,e)):0,a),h=e);return(d=e-h)?1==d&&"constructor"!=a?b[h]:c(h?b.slice(h):b):0},_stub:function(b,c,a,e){c=e[a]=n._extractChain(c,a,"around");return(b?n._stubChainSuper(c,n._stubChain,a):n._stubSuper(c,a))||function(){}}});n.getObject=function(b){return c[b]};n.setObject=
function(b,d){return c[b]=d};return n})},"xcf/views/GlobalConsole":function(){define("dcl/dcl xide/types xide/utils dojo/string xide/_base/_Widget xaction/ActionProvider xaction/Toolbar".split(" "),function(n,m,k,h,d,b,c){return n([d,b.dcl,c.dcl],{declaredClass:"xcf.views.GlobalConsole",templateString:'\x3cdiv attachTo\x3d"template" class\x3d"grid-template widget" style\x3d"width: 100%;height: 100%;overflow: hidden !important;position: relative;padding: 0px;margin: 0px"\x3e\x3cdiv attachTo\x3d"header" class\x3d"view-header row bg-opaque" style\x3d";width:100%;height: 30px;min-height: 30px;"\x3e\x3c/div\x3e\x3cdiv attachTo\x3d"logNode" style\x3d"overflow: hidden;width:inherit"\x3e\x3cdiv class\x3d"logView" style\x3d"display:inline-block;width:100%;overflow: auto;height:inherit" attachTo\x3d"logView"\x3e\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e',
defaultPanelOptions:{w:"100%",title:"Output"},defaultPanelType:"DefaultFixed",resizeToParent:!0,toolbarArgs:{attachToGlobal:!0},permissions:["File/Stop","File/Delete","File/Start"],stopped:!1,hasFlag:function(b,c){var a=this.ctx.getDeviceManager();if(b=a.getDeviceStoreItem(b))if(b=a.toDeviceControlInfo(b))return a=m.LOGGING_FLAGS,b=b.loggingFlags,b=_.isString(b)?k.fromJson(b):b||{},c=b[c],null!=c&&c&a.GLOBAL_CONSOLE?!0:!1},resize:function(){this.getParent();var b=this.getToolbar(),c=!1;$(this.aceNode);
!b||b&&b.isEmpty()?c=!0:b&&b.resize();var a=$(this.domNode).height(),c=1==c?0:$(this.header).height(),a=a-c-0;b&&(a-=4);50<a&&$(this.logNode).height(a+"px")},runAction:function(b){b=this.getAction(b);if(!b)return!1;b=b.command;b===m.ACTION.DELETE&&$(this.logView).empty();"File/Stop"===b&&(this.stopped=!0);"File/Start"===b&&(this.stopped=!1)},getSelection:function(){return null},getLoggingActions:function(b){b=[];b.push(this.createAction({label:"Delete",command:"File/Delete",icon:"fa-remove",tab:"Home",
group:"Organize",mixin:{quick:!0}}));b.push(this.createAction({label:"Stop",command:"File/Stop",icon:"fa-stop",tab:"Home",group:"Organize",mixin:{quick:!0}}));b.push(this.createAction({label:"Stop",command:"File/Start",icon:"fa-play",tab:"Home",group:"Organize",mixin:{quick:!0}}));return b},createWidgets:function(b,c){},getConsole:function(){return this.console},printTemplate:'\x3cspan style\x3d"display:block;margin-bottom: 6px" class\x3d"widget border-top-dark"\x3e# ${time} - ${command}\x3cbr/\x3e\t ${result}\x3c/span\x3e',
printCommand:function(b,c,a,e){var g=this.logView;e=!1!==e?moment().format("HH:mm:SSS"):"";b=k.substituteString(a||this.printTemplate,{command:b,result:c,time:e});b=$(b);g.appendChild(b[0]);b[0].scrollIntoViewIfNeeded();return b},log:function(b,c,a){if(!this.stopped){var e="";if(_.isString(b))!1!==c?e+=b.replace(/\n/g,"\x3cbr/\x3e"):(e=""+b,a&&(e=k.markHex(e,'\x3cspan class\x3d""\x3e',"\x3c/span\x3e")));else if(_.isObject(b)||_.isArray(b))e+=JSON.stringify(b,null,!0);b=[e];for(c=0;c<b.length;c++)this.printCommand(b[c],
"",this.logTemplate,!0)}},getDeviceString:function(b,c,a){var e="user_devices"===b.scope?"User Device - ":"System Device - ";return e+="\x3cb\x3e"+b.name+"\x3c/b\x3e - "+c.host+":"+c.port+"@"+c.protocol+'\x3cspan class\x3d"text-default"\x3e\x3cb\x3e'+(a||"")+"\x3c/b\x3e\x3c/span\x3e"},print:function(){},_lastDeviceString:"",onDeviceMessageExt:function(b){var c=b.messages.length?b.messages:[b.raw],a=this,e=b.device;b=b.deviceInfo;if(this.hasFlag(b,m.LOG_OUTPUT.RESPONSE)){var g=this.getDeviceString(e,
b," Message : ");_.each(c,function(b){b.length&&a.log('\x3cspan class\x3d"text-success"\x3e'+g+" "+b,!1,!0)})}},onDeviceCommand:function(b){var c=m.LOG_OUTPUT;if(!b.__d2){b.__d2=!0;var a=b.device,e=b.deviceInfo,g=e.loggingFlags,g=_.isString(g)?k.fromJson(g):g||{};this.hasFlag(e,c.SEND_COMMAND)&&(b='\x3cspan class\x3d"text-info"\x3e'+(this.getDeviceString(a,e," Command: ")+"\x3cspan class\x3d'text-default'\x3e\""+b.name+'"\x3c/span\x3e ')+'\x3c/span\x3e\x3cspan class\x3d"text-warning"\x3e'+b.command.trim()+
"\x3c/span\x3e",this.log(b,!1,!1))}},extract:function(b){var c=this.ctx.getDeviceManager(),c=(b=b.device&&b.device.info?b.device:c.getDeviceStoreItem(b.device))&&b.info?b.info:c.toDeviceControlInfo(b);return{device:b,info:c}},onDeviceConnected:function(b){var c=this.extract(b),a=m.LOG_OUTPUT;if(!b.__d2){b.__d2=!0;if(!c.device||!0===b.isReplay&&c.device.state===m.DEVICE_STATE.READY)return!1;this.hasFlag(c.info,a.DEVICE_CONNECTED)&&(b=this.getDeviceString(c.device,c.info," has been connected"),this.log('\x3cspan class\x3d"text-info"\x3e'+
b+"\x3c/span\x3e",!1,!0))}},onDeviceDisconnected:function(b){var c=this.extract(b),a=m.LOG_OUTPUT;if(!b.__d2){b.__d2=!0;if(!c.device)return!1;this.hasFlag(c.info,a.DEVICE_DISCONNECTED)&&(b=this.getDeviceString(c.device,c.info," has been disconnected"),this.log('\x3cspan class\x3d"text-warning"\x3e'+b+"\x3c/span\x3e\x3c/span\x3e",!1,!0))}},startup:function(){if(this.permissions){var b=[],b=b.concat(this.getLoggingActions(this.permissions));this.addActions(b)}this.showToolbar(!0);this.getToolbar().setActionEmitter(this);
this.subscribe(m.EVENTS.ON_DEVICE_MESSAGE_EXT);this.subscribe(m.EVENTS.ON_DEVICE_COMMAND);this.subscribe(m.EVENTS.ON_DEVICE_CONNECTED);this.subscribe(m.EVENTS.ON_DEVICE_DISCONNECTED);this.showToolbar(!0);k.resizeTo(this.getToolbar(),this.header,!0,!1);this.getToolbar().resize()}})})},"xideve/manager/ContextManager":function(){define("dcl/dcl dojo/Deferred xide/manager/ManagerBase xide/mixins/VariableMixin xide/mixins/ReloadMixin xide/types xide/utils xide/mixins/EventedMixin davinci/ve/widget xide/manager/ServerActionBase xide/encoding/SHA1 xdojo/has xide/widgets/ContextMenu xaction/ActionProvider xaction/DefaultActions xide/lodash xide/$ davinci/Workbench".split(" "),
function(n,m,k,h,d,b,c,g,p,a,e,q,u,w,r,v,x,A){return n([k,a,h.dcl,d.dcl,w.dcl],{declaredClass:"xideve/manager/ContextManager",serviceClass:"XIDE_VE_Service",singleton:!0,contexts:[],variableDelimiters:{begin:"%%",end:"%%"},onReloaded:function(){},getViewUrl:function(a,b,c){a||console.error("invalid item!");a=this.ctx.getResourceManager().getVariable("ROOT")+"xideve/preview/"+a.mount+"/"+a.path.replace("./","")+"";a+=-1===a.indexOf("?")?"?":"\x26";return a+="userDirectory\x3d"+encodeURIComponent(this.ctx.getUserDirectory())},
viewFile:function(a){a={path:"delite.html",mount:"workspace"};this.getViewUrl(a)},onBuildDojoConfig:function(a){a&&a.data&&a.data&&(a=a.data,a.baseUrl&&(a.baseUrl=this.resolve(a.baseUrl)))},onSetDojoUrl:function(a){a&&a.data&&a.data&&a.data.dojoUrl&&(a.data.dojoUrl=this.resolve("%%XIDEVE_DOJO_URL%%"))},onSetSourceData:function(a){a.context.widgetsReadyDfd&&(delete a.context.widgetsReadyDfd,a.context.widgetsReadyDfd=null);a.context.widgetsReadyDfd=new m},onGetLoaderPackages:function(a){var b=dojo.baseUrl,
c=function(a,c,e,g){a.packages.push({name:c,location:!0!==g?b+"/"+(e||"")+c:b+"/"+c+"-release/"+c})};c(a,"xapp");c(a,"dijit");c(a,"dojox");c(a,"xblox");c(a,"dstore");c(a,"xide");c(a,"xfile");c(a,"xwire");c(a,"xlang");c(a,"xaction");c(a,"xgrid");c(a,"xnode");c(a,"delite","ibm-js/");c(a,"deliteful","ibm-js/");c(a,"decor","ibm-js/");c(a,"dpointer","ibm-js/");c(a,"dcl","ibm-js/");c(a,"requirejs-dplugins","ibm-js/");c(a,"requirejs-domready","ibm-js/");c(a,"requirejs-text","ibm-js/");c(a,"jquery","ibm-js/")},
onContextLoaded:function(a){this.currentContext=a;var b=a.global,c=this;b._=window._;b.Velocity=window.Velocity;b.delegate=this;b.bootx&&b.bootx({delegate:this},m).then(function(b){a.appContext=b.context;c.onContextReady(a,b.context,b.settings)},function(a){console.error("error global.bootx "+a,a)})},onContextReady:function(a,e,g){var d=a.global,h=a.getDocument(),q=this;e.fileManager=this.ctx.fileManager;e.resourceManager=this.ctx.resourceManager;e.driverManager=q.ctx.driverManager;e.deviceManager=
q.ctx.deviceManager;e.nodeServiceManager=q.ctx.nodeServiceManager;e.blockManager=q.ctx.blockManager;e.delegate={isDesignMode:function(){return a.isDesignMode()},getBlockSettings:function(){return a.getBlockSettings()},getEditorContext:function(){return a}};g.delegate=q;g.xbloxScripts=[];e.initVe();e.notifier.publish("onContextReady",e);e.notifier.publish("DevicesConnected");if(g.xbloxScripts){var k=function(){q.ctx.getBlockManager().loadFiles(g.xbloxScripts).then(function(c){g.didXBLOX=!0;var k={context:a,
appContext:e,appSettings:g,ctx:q.ctx,global:d,document:h,blockScopes:c};p.onSceneBlocksLoaded(k);var r=p.item._S,m=p.item.getParent();e.settings=g;e.onReady(g);r.resetQueryLog();r._loadPath(m.path,!0).then(function(){"."===m.path&&r.resetQueryLog();q.publish(b.EVENTS.ON_CONTEXT_READY,k);q.onSceneBlocksLoaded(k)});e.__didv||(e.__didv=!0)})},p=a.getVisualEditor();if(0==g.xbloxScripts.length){var r=a.getVisualEditor().item;if(r){var m=c.replaceAll("/","",r.mount),n=c.getFileExtension(r.path),r=r.path.replace("."+
n,".xblox");g.xbloxScripts.push({mount:m,path:r});this.ctx.getFileManager().mkfile(m,r,JSON.stringify({blocks:[],variables:[]},null,2)).then(function(){k()})}}}e.application.run(g);this.publish(b.EVENTS.ON_APP_READY,{context:a,application:e.application,delegate:this});for(m=0;m<this.contexts.length;m++)if(r=this.contexts[m],r.context==a)return;this.contexts.push({context:a,appContext:e,global:d,doc:h})},onBuildHeader:function(a){if(a&&a.data&&a.data.styleSheets)for(var b=a.data.styleSheets,c=0;c<
b.length;c++)a.data.styleSheets[c]=this.resolve(b[c])},onModuleUpdated:function(a){v.each(this.contexts,function(b){b.appContext.onModuleUpdated(a)},this)},onDriverVariableChanged:function(a){v.each(this.contexts,function(b){b.context.isDesignMode()||b.appContext.publish("onDriverVariableChanged",a)},this)},onContextDestroyed:function(a){var b=v.find(this.contexts,{context:a});b&&(a.systemEvents&&v.each(a.systemEvents,function(a){a&&a.remove?a.remove():console.error("have invalid handle!")}),this.contexts.remove(b))},
getVariable:function(a,c,e){c=this.ctx.getDeviceManager();var g=c.getDeviceById(a),d=null;if(!g)return null;(a=g.driver)&&a.blockScope&&(a=a.blockScope);!a&&g&&(c=c.getMetaValue(g,b.DEVICE_PROPERTY.CF_DEVICE_DRIVER),a=this.ctx.getBlockManager().getScope(c),d=a.getVariableById(c+"/"+e));return d},getBlock:function(a){return this.ctx.getDeviceManager().getBlock(a)},wireNode:function(a,e,d,h,q,k){var p=this,r=null,m=null;if(k&&e===b.EVENTS.ON_DRIVER_VARIABLE_CHANGED)var n=k.params[2],r=function(a){a=
a.item;var b=p.getBlock(n);return b&&a&&b.id===a.id||a.id===n?!1:!0},m=function(a,b){a.override={variables:{value:b.item.value}}};if(a)if(d)if(e)if(v.isString(e))if(h.systemEvents||(h.systemEvents=[]),"BODY"===a.tagName&&a._destroyHandles&&(a._destroyHandles(),delete a.__setup),a.__setup||(a.__setup={}),a.__setup[d.id])console.error("did wire "+d.name+" to "+a.id+"_"+a["wire id"],a);else{a.__setup[d.id]=!0;a["wire id"]||(a["wire id"]=c.createUUID());d&&a&&(d.context=a,d._targetReference=a);var u=
function(a,b,c,e){!("load"!==a&&h&&h.isDesignMode&&h.isDesignMode()||r&&r(b)||c._destroyed)&&c.enabled&&c&&e&&(c.context=e,c._targetReference=e,m&&m(c,b),c.solve(c.scope,{highlight:!0,args:[b]}))};a.subscribe||c.mixin(a,g.prototype);var w=a.domNode||a;q=e;k=a.declaredClass||a.startup;var x=null!=a.on&&null!=a["on"+c.capitalize(q)],A=null,z=null!=w.render&&null!=w.on;if(k&&a.baseClass&&-1!=a.baseClass.indexOf("dijitContentPane")||null!=a.render||null!=a.on)k=!1;w&&(z||x&&k?(w=a,z?c.isSystemEvent(e)?
A=w.subscribe(e,function(b){u(e,b,d,a)}.bind(this),a):(c.isNativeEvent(e)&&(e=e.replace("on","")),A=w.on(e,function(b){var c=b.target.value;"checked"in b.target&&(c=b.target.checked);u(e,c,d,a)}.bind(this))):(q="on"+c.capitalize(q),a[q]=function(a,b){!0!==w.ignore&&u(e,a)})):c.isSystemEvent(e)?(q=function(b){u(e,b,d,a)}.bind(this),A=a.subscribe(e,q),d._on("destroy",function(){console.error("block destroyed");A.remove()})):A=a.__on(w,e,function(b){u(e,b,d,a)}),A?(a.addHandle&&a.addHandle(e,A),d._widgetHandles||
(d._widgetHandles=[]),d._widgetHandles.push(A)):console.error("wire widget: have no handle",a))}else console.error("event not string ",e);else console.error("have no event");else console.error("have no block for event "+e);else console.error("have no widget for event "+e)},wireWidget:function(a,b,c,e,g,d,h,q,k){b=c.getBlocks({group:h});for(c=0;c<b.length;c++)this.wireNode(e.domNode,d,b[c],a,q,k)},wireWidget2:function(a,b,e,g,d){for(var h=e.allGroups(),q=[],k=0;k<h.length;k++){var r=h[k],m;var n=m=
null,u=(r||"").split("__"),v=[];1==u.length&&(m=u[0],n="body",a.rootWidget.domNode.runExpression=a.global.runExpression);if(2==u.length){var w=void 0;-1!==u[1].indexOf("://")?(m=u[0],n="body",w=u[1]):(m=u[1],n=u[0]);w&&(v=c.parse_url(w),v=c.urlArgs(v.host),v=[v.device.value,v.driver.value,w])}3==u.length&&(m=u[1],n=u[0],w=u[2],v=c.parse_url(w),v=c.urlArgs(v.host),v=[v.device.value,v.driver.value,w]);5==u.length&&(m=u[1],n=u[0],v=[u[2],u[3],u[4]]);m&&n?(u=p.byId(n),"body"===n&&(u=a.rootWidget),m={event:m,
widgetId:n,widget:u,params:v}):m=null;m?m.widget==d&&(this.wireWidget(a,b,e,m.widget,m.widget.domNode,m.event,r,g,m),m.widget&&-1==q.indexOf(m.widget)&&q.push(m.widget)):console.error("invalid params for group "+r)}for(k=0;k<q.length;k++){d=q[k];d.domNode&&(d=d.domNode);if(d.__didEmitLoad)break;d.__didEmitLoad=!0;d.emit&&d.emit("load",d)}},wireScope:function(a,e,g,d){for(var h=g.allGroups(),q=this,k=[],r=function(b){var e=null,g=null;b=(b||"").split("__");var d=[];1==b.length&&(e=b[0],g="body",a.rootWidget.domNode.runExpression=
a.global.runExpression);if(2==b.length){var h;-1!==b[1].indexOf("://")?(e=b[0],g="body",h=b[1]):(e=b[1],g=b[0]);h&&(d=c.parse_url(h),d=c.urlArgs(d.host),d=[d.device.value,d.driver.value,h])}3==b.length&&(e=b[1],g=b[0],h=b[2],d=c.parse_url(h),d=c.urlArgs(d.host),d=[d.device.value,d.driver.value,h]);5==b.length&&(e=b[1],g=b[0],d=[b[2],b[3],b[4]]);return e&&g?(b=p.byId(g),"body"===g&&(b=a.rootWidget),{event:e,widgetId:g,widget:b,params:d}):null},m=function(a){a._on(b.EVENTS.ON_ITEM_REMOVED,function(b){try{if(a._widgetHandles){var c=
a._widgetHandles;for(b=0;b<c.length;b++)c[b].remove&&c[b].remove();delete a._widgetHandles}}catch(M){console.error("troubble!"+M,M)}},this)},n=0;n<h.length;n++){var u=h[n],v=r(u);if(v){v.widget&&this.wireWidget(a,e,g,v.widget,v.widget.domNode,v.event,u,d,v);for(var u=g.getBlocks({group:u}),w=0;w<u.length;w++)m(u[w]);v.widget&&-1==k.indexOf(v.widget)&&k.push(v.widget)}else console.error("invalid params for group "+u)}for(n=0;n<k.length;n++){e=k[n];e.domNode&&(e=e.domNode);if(e.__didEmitLoad)return;
e.__didEmitLoad=!0;"BODY"===e.nodeName?x(e.nodeName).trigger("load"):e.emit&&e.emit("load",e)}g._on(b.EVENTS.ON_ITEM_REMOVED,function(a){});g._on(b.EVENTS.ON_ITEM_ADDED,function(b){var c=r(b.item.group);c&&c.widget&&(q.wireNode(c.widget.domNode,c.event,b.item,a,c),m(b.item))})},onSceneBlocksLoaded:function(a){var b=a.context,c=a.appContext,e=a.global,g=a.blockScopes,d=this;a.context.widgetsReadyDfd&&a.context.widgetsReadyDfd.then(function(){if(!c.didWireWidgets){c.didWireWidgets=!0;for(var a=0;a<
g.length;a++){var h=g[a];h.global=e;h.document=b.getDocument();h.editorContext=b;h.appContext=c;d.wireScope(b,d.ctx,h,c)}}})},onItemRemoved:function(a){},init:function(){this.subscribe("/davinci/ui/context/loaded",this.onContextLoaded);this.subscribe([b.EVENTS.ON_GET_LOADER_PACKAGES,b.EVENTS.ON_BUILD_HEADER,b.EVENTS.ON_BUILD_DOJO_CONFIG,b.EVENTS.ON_SET_SOURCE_DATA,b.EVENTS.ON_SET_DOJO_URL,b.EVENTS.ON_MODULE_UPDATED,b.EVENTS.ON_CONTEXT_DESTROYED,b.EVENTS.ON_DRIVER_VARIABLE_CHANGED,b.EVENTS.ON_ITEM_REMOVED])}})})},
"xfile/data/DriverStore":function(){define("dojo/_base/declare dojo/Deferred xide/data/ObservableStore xide/data/TreeMemory xfile/data/Store xide/manager/ServerActionBase xide/utils".split(" "),function(n,m,k,h,d,b,c){d=d.Implementation;return n("driverFileStore",[h,k,b.declare],c.mixin(d(),{driver:null,addDot:!1,rootSegment:"/",getRootItem:function(){var b=this._root;return b?b:this._root={_EX:!1,path:"/",name:"/",mount:this.mount,directory:!0,virtual:!0,_S:this,getPath:function(){return this.path}}},
_filter:function(b){return b},_request:function(b){var c=this,a=this;if("."===b||"/"===b){var e=new m,g=a.driver.callCommand("LSProg",{override:{args:["/*"]}});g.then(function(b){b=b.files;_.each(b,function(a){a.parent="."});b=a._filter(b);b=c._normalize({items:[{mount:"root",path:"/",children:b,name:"/",isDir:!0}]});a._parse(b);b=b.children||b;e.resolve(b)})}else e=new m,g=a.driver.callCommand("LSProg",{override:{args:[b+(a.glob||"/*")]}}),g.then(function(g){g=g.files;_.each(g,function(a){a.parent=
b});g=a._filter(g);g=c._normalize({items:[{mount:"root",path:b,children:g,isDir:!0}]});a._parse(g);g=g.children||g;e.resolve(g)});return e}}))})},"xcf/views/DriverView_Layout":function(){define("dcl/dcl xide/types xide/utils dojo/Deferred xdocker/Docker2 xide/views/_CIDialog".split(" "),function(n,m,k,h,d,b){return n(null,{restoreLayout:function(){var c=new h,g={select:[],focus:!0,append:!1},d=this.getState(),a=d.value.layouts;a||(d.value.layouts=a={});var d=[],e;for(e in a)d.push({value:e,label:e});
var q=this._docker;e={inputs:[k.createCI("name",m.ECIType.ENUMERATION,d[0]?d[0].value:"",{widget:{title:"Layout",options:d}})]};(new b({cis:e,title:"Save Layout",ctx:this.ctx,size:m.DIALOG_SIZE.SIZE_NORMAL,bodyCSS:{height:"auto","min-height":"80px",width:"100%","min-width":"400px"},onCancel:function(){c.resolve(g)},onOk:function(){var b=this.getField("name");b&&(b=a[b])&&q.restore(JSON.stringify(b));c.resolve(g)}})).show();return c},onPanelsRestored:function(){var b=this._docker.getPanels();delete this.logTab;
delete this.consoleTab;delete this.basicCommandsTab;delete this.variablesTab;delete this.responseTab;delete this.settingsTab;delete this.initTab;delete this.basicCommandsGrid;delete this.variablesGrid;delete this.responseGrid;delete this.initGrid;delete this.grids;this.grids=[];this.logTab=_.find(b,{_title:"Log"});this.consoleTab=_.find(b,{_title:"Console"});this.basicCommandsTab=_.find(b,{_title:"Commands"});this.variablesTab=_.find(b,{_title:"Variables"});this.responseTab=_.find(b,{_title:"Responses"});
this.settingsTab=_.find(b,{_title:"Settings"});this.initTab=_.find(b,{_title:"Init"});this.createWidgets()},saveLayout:function(){var c=this._docker.save(),g=new h,d={select:[],focus:!0,append:!1},a="Default",e=this.ctx,q=this.getState(),n=q.value.layouts;n||(q.value.layouts=n={});var w={inputs:[k.createCI("name",m.ECIType.STRING,a,{widget:{instant:!1,title:"Layout Name"}})]};(new b({cis:w,title:"Save Layout",ctx:this.ctx,size:m.DIALOG_SIZE.SIZE_NORMAL,bodyCSS:{height:"auto","min-height":"80px",width:"100%",
"min-width":"400px"},onCancel:function(){g.resolve(d)},onOk:function(){a=this.getField("name");a.length&&(n[a]=k.getJson(c),e.getSettingsManager().write2(null,".",{id:"driverView"},{value:q.value},!0,null).then(function(){g.resolve(d)}))}})).show();return g},createTab:function(b,g){var c=m.DOCKER;return this._docker.addTab(b||"DefaultTab",k.mixin({icon:!1,closeable:!0,moveable:!0,tabOrientation:c.TAB.TOP,location:c.DOCK.STACKED},g))},createLayout:function(){var b=m.DOCKER,g=this;this._docker=d.createDefault(this.domNode,
{extension:d});this._docker._on("endRestore",function(a){g.onPanelsRestored()});var h=this.showBasicCommands?this.createTab(null,{title:"Commands",icon:"fa-long-arrow-right"}):null,a=this.showInitTab?this.createTab(null,{title:"Init",tabOrientation:b.TAB.TOP,target:h,icon:"fa-bell"}):null,e=this.showSettings?this.createTab(null,{title:"Settings",tabOrientation:b.TAB.TOP,target:h,icon:"fa-cogs"}):null,k=null,k=this.showLog||this.showConsole?this.showLog?this.createTab(null,{title:"Log",tabOrientation:b.TAB.BOTTOM,
location:b.TAB.BOTTOM,icon:"fa-calendar"}):null:this.showLog?this.createTab(null,{title:"Log",tabOrientation:b.TAB.TOP,icon:"fa-calendar",target:h}):null,n=this.showConsole?this.createTab(null,{title:"Console",tabOrientation:b.TAB.TOP,target:k,icon:"fa-terminal"}):null,w=k||n||h,r=this.showResponseBlocks?this.createTab(null,{title:"Responses",tabOrientation:b.TAB.TOP,target:w,icon:"fa-long-arrow-left"}):null,b=this.showVariables?this.createTab(null,{title:"Variables",tabOrientation:b.TAB.TOP,target:w,
icon:"fa-list-alt"}):null;this.logTab=k;this.consoleTab=n;this.basicCommandsTab=h;this.variablesTab=b;this.responseTab=r;this.settingsTab=e;this.initTab=a;return this._docker},getState:function(){return(this.ctx.getSettingsManager().getStore()||{getSync:function(){}}).getSync("driverView")||{value:{layouts:{}}}}})})},"davinci/ve/_ContextCSS":function(){define("dojo/_base/declare dojo/dom-construct dojo/query dojo/_base/connect system/resource ../model/Path ../Workbench ./widget ./States ./utils/pseudoClass dojox/html/_base".split(" "),
function(n,m,k,h,d,b,c,g,p,a){return n(null,{getStyleAttributeValues:function(a){for(var b=a?a.getStyleValues():[],c=p.getStateContainersForNode(a.domNode),e=!0,g=0;g<c.length;g++){var d=p.getState(c[g]);if(d&&d!=p.NORMAL){e=!1;break}}if(!e&&(c=davinci.ve.states.getStatesListCurrent(a.domNode),a=davinci.ve.states.getStyle(a.domNode,c))){for(c=0;c<a.length;c++){var e=a[c],h;for(h in e)for(e=b.length-1;0<=e;e--){var g=b[e],k;for(k in g)if(h==k){b.splice(e,1);break}}}b=b.concat(a)}return b},addPseudoClassSelectors:function(b){var c=
function(b){if(b){for(var e=b.cssRules,g=0,g=0;g<e.length;g++){var d=e[g];if(d.type&&d.type===CSSRule.IMPORT_RULE)c(e[g].styleSheet);else if(e[g].type==CSSRule.STYLE_RULE){var h=e[g].selectorText;if(-1<h.indexOf(":")){h=a.replace(h);d.selectorText=h;b.deleteRule(g);b.insertRule(d.cssText,g);break}}}return!0}return!1};dojo.some(this.getDocument().styleSheets,c)},hotModifyCssRule:function(b){function c(a,b){if(a.href==b)return a;var e;a=a.cssRules;for(var g=0;g<a.length&&(!a[g].type||a[g].type!==CSSRule.IMPORT_RULE||
!(e=a[g].href==b?a[g].styleSheet:c(a[g].styleSheet,b)));g++);return e}dojo.some(this.getDocument().styleSheets,function(e){var g;g=d.findResource(b.parent.url).getURL();var h=encodeURI(g);g=b.getSelectorText();-1<g.indexOf(":")&&(g=a.replace(g));g=g.replace(/^\s+|\s+$/g,"");if(e=c(e,h)){for(var k=e.cssRules,h=0;h<k.length;h++)if(k[h].type&&k[h].type==CSSRule.STYLE_RULE&&k[h].selectorText==g){e.deleteRule(h);break}b.properties.length&&(g=b.getText({noComments:!0}),-1<g.indexOf(":")&&(g=a.replace(g)),
e.insertRule(g,h));g=!0}else g=!1;return g})},unloadStyleSheet:function(a){var b=this.getGlobal();b&&b.require&&b.require("dojo/query")("link").filter(function(b){return b.getAttribute("href")==a}).forEach(m.destroy)},addModeledStyleSheet:function(a,b){b||this.loadStyleSheet(a);if(!this.model.hasStyleSheet(a)){b=-1<a.indexOf("app.css");var c,e=this.model.find({elementType:"HTMLElement",tag:"style"},!0);if(e)for(var e=e.children,g=0;g<e.length;g++)-1<e[g].url.indexOf("app.css")&&(c=e[g]);this.model.addStyleSheet(a,
void 0,void 0,b?void 0:c);for(var d in this.model._loadedCSS)this._loadedCSSConnects.push(h.connect(this.model._loadedCSS[d],"onChange",this,"_themeChange"))}},loadStyleSheet:function(a){var b=this.getDocument(),c=this.getGlobal().require("dojo/query")("link");c.some(function(b){return b.getAttribute("href")===a})||dojo.withDoc(b,function(){var e=b.getElementsByTagName("head")[0],g=-1<a.indexOf("app.css"),d=-1<a.indexOf("content.css"),h=-1<a.indexOf("claro.css"),k=-1<a.indexOf("claro/document.css"),
g=!g&&!d&&!k&&!h,q,g=!1,h=m.create("link",{rel:"stylesheet",type:"text/css",href:a});c.forEach(function(a){-1<a.href.indexOf("app.css")?q=a:a.href.indexOf("content.css")});var p;d||(p=q);g?e.appendChild(h):p?e.insertBefore(h,p):e.appendChild(h)})},getStyle:function(){return this._header?this._header.style:void 0},setStyle:function(a){var b=g.parseStyleValues(a);if(this._header){var c=g.parseStyleValues(this._header.style);if(c)for(var e in c)b[e]||(b[e]=void 0);this._header.style=a}else this._header=
{style:a}},getAppCssRelativeFile:function(){this._appCssRelativeFile||(this._appCssRelativeFile=this.getRelativeFileString("app.css"));return this._appCssRelativeFile},_addCssForDevice:function(a,c,g){g=0;for(var e=c.length;g<e;g++){var d=c[g];if(d[0]===a||".*"===d[0]){this.themeCssFiles||(this.themeCssFiles=[]);this.themeCssFiles=this.themeCssFiles.concat(d[2]);this._themePath=new b(this.visualEditor.fileName);this._getCssFiles().forEach(function(a){this._loadedCSSConnects.push(h.connect(a,"onChange",
this,"_themeChange"))},this);break}}}})})},"dojox/widget/ColorPicker":function(){define("dojo/_base/kernel dojo/_base/declare dojo/_base/lang dojo/_base/array dojo/_base/html dojo/_base/connect dojo/_base/sniff dojo/_base/window dojo/_base/event dojo/dom dojo/dom-class dojo/keys dojo/fx dojo/dnd/move dijit/registry dijit/_base/focus dijit/form/_FormWidget dijit/typematic dojox/color dojo/i18n dojo/text!./ColorPicker/ColorPicker.html".split(" "),function(n,m,k,h,d,b,c,g,p,a,e,q,u,w,r,v,x,A,z,y,B){var C=
{redLabel:"r",greenLabel:"g",blueLabel:"b",hueLabel:"h",saturationLabel:"s",valueLabel:"v",degLabel:"\u00b0",hexLabel:"hex",huePickerTitle:"Hue Selector",saturationPickerTitle:"Saturation Selector"};return m("dojox.widget.ColorPicker",x,{showRgb:!0,showHsv:!0,showHex:!0,webSafe:!0,animatePoint:!0,slideDuration:250,liveUpdate:!1,PICKER_HUE_H:150,PICKER_SAT_VAL_H:150,PICKER_SAT_VAL_W:150,PICKER_HUE_SELECTOR_H:8,PICKER_SAT_SELECTOR_H:10,PICKER_SAT_SELECTOR_W:10,value:"#ffffff",_underlay:require.toUrl("dojox/widget/ColorPicker/images/underlay.png"),
_hueUnderlay:require.toUrl("dojox/widget/ColorPicker/images/hue.png"),_pickerPointer:require.toUrl("dojox/widget/ColorPicker/images/pickerPointer.png"),_huePickerPointer:require.toUrl("dojox/widget/ColorPicker/images/hueHandle.png"),_huePickerPointerAlly:require.toUrl("dojox/widget/ColorPicker/images/hueHandleA11y.png"),templateString:B,postMixInProperties:function(){this._uId=r.getUniqueId(this.id);k.mixin(this,C);k.mixin(this,y.getLocalization("dojo.cldr","number"));this.inherited(arguments)},postCreate:function(){this.inherited(arguments);
7>c("ie")&&(this.colorUnderlay.style.filter="progid:DXImageTransform.Microsoft.AlphaImageLoader(src\x3d'"+this._underlay+"', sizingMethod\x3d'scale')",this.colorUnderlay.src=this._blankGif.toString());this.showRgb||(this.rgbNode.style.visibility="hidden");this.showHsv||(this.hsvNode.style.visibility="hidden");this.showHex||(this.hexNode.style.visibility="hidden");this.webSafe||(this.safePreviewNode.style.visibility="hidden")},startup:function(){this._started||(this._started=!0,this.set("value",this.value),
this._mover=new w.boxConstrainedMoveable(this.cursorNode,{box:{t:-(this.PICKER_SAT_SELECTOR_H/2),l:-(this.PICKER_SAT_SELECTOR_W/2),w:this.PICKER_SAT_VAL_W,h:this.PICKER_SAT_VAL_H}}),this._hueMover=new w.boxConstrainedMoveable(this.hueCursorNode,{box:{t:-(this.PICKER_HUE_SELECTOR_H/2),l:0,w:0,h:this.PICKER_HUE_H}}),this._subs=[],this._subs.push(b.subscribe("/dnd/move/stop",k.hitch(this,"_clearTimer"))),this._subs.push(b.subscribe("/dnd/move/start",k.hitch(this,"_setTimer"))),this._keyListeners=[],
this._connects.push(A.addKeyListener(this.hueCursorNode,{charOrCode:q.UP_ARROW,shiftKey:!1,metaKey:!1,ctrlKey:!1,altKey:!1},this,k.hitch(this,this._updateHueCursorNode),25,25)),this._connects.push(A.addKeyListener(this.hueCursorNode,{charOrCode:q.DOWN_ARROW,shiftKey:!1,metaKey:!1,ctrlKey:!1,altKey:!1},this,k.hitch(this,this._updateHueCursorNode),25,25)),this._connects.push(A.addKeyListener(this.cursorNode,{charOrCode:q.UP_ARROW,shiftKey:!1,metaKey:!1,ctrlKey:!1,altKey:!1},this,k.hitch(this,this._updateCursorNode),
25,25)),this._connects.push(A.addKeyListener(this.cursorNode,{charOrCode:q.DOWN_ARROW,shiftKey:!1,metaKey:!1,ctrlKey:!1,altKey:!1},this,k.hitch(this,this._updateCursorNode),25,25)),this._connects.push(A.addKeyListener(this.cursorNode,{charOrCode:q.LEFT_ARROW,shiftKey:!1,metaKey:!1,ctrlKey:!1,altKey:!1},this,k.hitch(this,this._updateCursorNode),25,25)),this._connects.push(A.addKeyListener(this.cursorNode,{charOrCode:q.RIGHT_ARROW,shiftKey:!1,metaKey:!1,ctrlKey:!1,altKey:!1},this,k.hitch(this,this._updateCursorNode),
25,25)))},_setValueAttr:function(a,b){this._started&&this.setColor(a,b)},setColor:function(a,b){a=z.fromString(a);this._updatePickerLocations(a);this._updateColorInputs(a);this._updateValue(a,b)},_setTimer:function(b){if(b.node==this.cursorNode||b.node==this.hueCursorNode)v.focus(b.node),a.setSelectable(this.domNode,!1),this._timer=setInterval(k.hitch(this,"_updateColor"),45)},_clearTimer:function(b){this._timer&&(clearInterval(this._timer),this._timer=null,this.onChange(this.value),a.setSelectable(this.domNode,
!0))},_setHue:function(a){d.style(this.colorUnderlay,"backgroundColor",z.fromHsv(a,100,100).toHex())},_updateHueCursorNode:function(a,b,c){if(-1!==a){a=d.style(this.hueCursorNode,"top");b=this.PICKER_HUE_SELECTOR_H/2;a+=b;var e=!1;c.charOrCode==q.UP_ARROW?0<a&&(--a,e=!0):c.charOrCode==q.DOWN_ARROW&&a<this.PICKER_HUE_H&&(a+=1,e=!0);e&&d.style(this.hueCursorNode,"top",a-b+"px")}else this._updateColor(!0)},_updateCursorNode:function(a,b,c){b=this.PICKER_SAT_SELECTOR_H/2;var e=this.PICKER_SAT_SELECTOR_W/
2;if(-1!==a){a=d.style(this.cursorNode,"top");var g=d.style(this.cursorNode,"left");a+=b;var g=g+e,h=!1;c.charOrCode==q.UP_ARROW?0<a&&(--a,h=!0):c.charOrCode==q.DOWN_ARROW?a<this.PICKER_SAT_VAL_H&&(a+=1,h=!0):c.charOrCode==q.LEFT_ARROW?0<g&&(--g,h=!0):c.charOrCode==q.RIGHT_ARROW&&g<this.PICKER_SAT_VAL_W&&(g+=1,h=!0);h&&(g-=e,d.style(this.cursorNode,"top",a-b+"px"),d.style(this.cursorNode,"left",g+"px"))}else this._updateColor(!0)},_updateColor:function(a){var b=this.PICKER_HUE_SELECTOR_H/2,c=this.PICKER_SAT_SELECTOR_H/
2,e=this.PICKER_SAT_SELECTOR_W/2,b=d.style(this.hueCursorNode,"top")+b,c=d.style(this.cursorNode,"top")+c,e=d.style(this.cursorNode,"left")+e,b=Math.round(360-b/this.PICKER_HUE_H*360),e=z.fromHsv(b,e/this.PICKER_SAT_VAL_W*100,100-c/this.PICKER_SAT_VAL_H*100);this._updateColorInputs(e);this._updateValue(e,a);b!=this._hue&&this._setHue(b)},_colorInputChange:function(a){var b,c=!1;switch(a.target){case this.hexCode:b=z.fromString(a.target.value);c=!0;break;case this.Rval:case this.Gval:case this.Bval:b=
z.fromArray([this.Rval.value,this.Gval.value,this.Bval.value]);c=!0;break;case this.Hval:case this.Sval:case this.Vval:b=z.fromHsv(this.Hval.value,this.Sval.value,this.Vval.value),c=!0}c&&(this._updatePickerLocations(b),this._updateColorInputs(b),this._updateValue(b,!0))},_updateValue:function(a,b){a=a.toHex();this.value=this.valueNode.value=a;if(b&&(!this._timer||this.liveUpdate))this.onChange(a)},_updatePickerLocations:function(a){var b=this.PICKER_HUE_SELECTOR_H/2,c=this.PICKER_SAT_SELECTOR_H/
2,e=this.PICKER_SAT_SELECTOR_W/2;a=a.toHsv();b=Math.round(this.PICKER_HUE_H-a.h/360*this.PICKER_HUE_H)-b;e=Math.round(a.s/100*this.PICKER_SAT_VAL_W)-e;c=Math.round(this.PICKER_SAT_VAL_H-a.v/100*this.PICKER_SAT_VAL_H)-c;this.animatePoint?(u.slideTo({node:this.hueCursorNode,duration:this.slideDuration,top:b,left:0}).play(),u.slideTo({node:this.cursorNode,duration:this.slideDuration,top:c,left:e}).play()):(d.style(this.hueCursorNode,"top",b+"px"),d.style(this.cursorNode,{left:e+"px",top:c+"px"}));a.h!=
this._hue&&this._setHue(a.h)},_updateColorInputs:function(a){var b=a.toHex();this.showRgb&&(this.Rval.value=a.r,this.Gval.value=a.g,this.Bval.value=a.b);this.showHsv&&(a=a.toHsv(),this.Hval.value=Math.round(a.h),this.Sval.value=Math.round(a.s),this.Vval.value=Math.round(a.v));this.showHex&&(this.hexCode.value=b);this.previewNode.style.backgroundColor=b;this.webSafe&&(this.safePreviewNode.style.backgroundColor=b)},_setHuePoint:function(a){a=a.layerY-this.PICKER_HUE_SELECTOR_H/2;this.animatePoint?u.slideTo({node:this.hueCursorNode,
duration:this.slideDuration,top:a,left:0,onEnd:k.hitch(this,function(){this._updateColor(!1);v.focus(this.hueCursorNode)})}).play():(d.style(this.hueCursorNode,"top",a+"px"),this._updateColor(!1))},_setPoint:function(a){var b=a.layerY-this.PICKER_SAT_SELECTOR_H/2,c=a.layerX-this.PICKER_SAT_SELECTOR_W/2;a&&v.focus(a.target);this.animatePoint?u.slideTo({node:this.cursorNode,duration:this.slideDuration,top:b,left:c,onEnd:k.hitch(this,function(){this._updateColor(!0);v.focus(this.cursorNode)})}).play():
(d.style(this.cursorNode,{left:c+"px",top:b+"px"}),this._updateColor(!1))},_handleKey:function(a){},focus:function(){this.focused||v.focus(this.focusNode)},_stopDrag:function(a){p.stop(a)},destroy:function(){this.inherited(arguments);h.forEach(this._subs,function(a){b.unsubscribe(a)});delete this._subs}})})},"dgrid/Tree":function(){define("dojo/_base/declare dojo/_base/lang dojo/_base/array dojo/aspect dojo/dom-construct dojo/dom-class dojo/on dojo/query dojo/when ./util/has-css3 ./Grid ./util/touch".split(" "),
function(n,m,k,h,d,b,c,g,p,a,e,q){return n(null,{collapseOnRefresh:!1,enableTreeTransitions:!1,treeIndentWidth:9,constructor:function(){this._treeColumnListeners=[]},shouldExpand:function(a,b,c){return c},expand:function(e,h,k){function q(a){!0===C.spin&&a.mayHaveChildren&&(b.remove(a,"fa-spin fa-spinner dgrid-cell-loading"),b.replace(a,"ui-icon-triangle-1-"+(E?"se":"e"),"ui-icon-triangle-1-"+(E?"e":"se")))}if(this._treeColumn){var r=this,n=e.element?e:this.row(e),u=!!this._expanded[n.id],w=a("transitionend"),
B,C=this.collection;if(e=n.element){e=-1<e.className.indexOf("dgrid-expando-icon")?e:g(".dgrid-expando-icon",e)[0];k=k||!this.enableTreeTransitions;if(e&&e.mayHaveChildren&&(k||h!==u)){var E=void 0===h?!this._expanded[n.id]:h;!0===C.spin&&h?(b.remove(e,"ui-icon-triangle-1-e"),b.remove(e,"ui-icon-triangle-1-se"),b.add(e,"fa fa-spinner fa-spin dgrid-cell-loading")):b.replace(e,"ui-icon-triangle-1-"+(E?"se":"e"),"ui-icon-triangle-1-"+(E?"e":"se"));b.toggle(n.element,"dgrid-row-expanded",E);h=n.element;
var F=h.connected,G,D,H={};if(!F){var F=H.container=h.connected=d.create("div",{className:"dgrid-tree-container"},h,"after"),J=function(a){var b=r._renderedCollection.getChildren(n.data);r.sort&&(b=b.sort(r.sort));b.track&&r.shouldTrackCollection&&(F._rows=a.rows=[],b=b.track(),F._handles=[b.tracking,r._observeCollection(b,F,a)]);return"start"in a?b.fetchRange({start:a.start,end:a.start+a.count}):b.fetch()};"level"in e&&(J.level=e.level);if(this.renderQuery)B=this.renderQuery(J,H);else{var Q=d.create("div",
null,F);B=this._trackError(function(){return r.renderQueryResults(J(H),Q,m.mixin({rows:H.rows},"level"in J?{queryLevel:J.level}:null)).then(function(a){d.destroy(Q);return a})})}w&&c(F,w,this._onTreeTransitionEnd)}F.hidden=!E;G=F.style;!w||k?(G.display=E?"block":"none",G.height=""):(E?(G.display="block",D=F.scrollHeight,G.height="0px"):(b.add(F,"dgrid-tree-resetting"),G.height=F.scrollHeight+"px"),setTimeout(function(){b.remove(F,"dgrid-tree-resetting");G.height=E?D?D+"px":"auto":"0px"},0));E?this._expanded[n.id]=
!0:delete this._expanded[n.id]}B&&B.then?B.then(function(){q(e)}):q(e);return p(B)}}},_configColumns:function(){var a=this.inherited(arguments);this._expanded={};for(var b=0,c=a.length;b<c;b++)if(a[b].renderExpando){this._configureTreeColumn(a[b]);break}return a},insertRow:function(a){var c=this.inherited(arguments),e=this.row(c);(e=this.shouldExpand(e,this._currentLevel,this._expanded[e.id]))&&this.expand(c,!0,!0);(e||!this.collection.mayHaveChildren||this.collection.mayHaveChildren(a))&&b.add(c,
"dgrid-row-expandable");return c},removeRow:function(a,b){var c=a.connected,e={};c&&(c._handles&&(k.forEach(c._handles,function(a){a.remove()}),delete c._handles),c._rows&&(e.rows=c._rows),g("\x3e.dgrid-row",c).forEach(function(a){this.removeRow(a,!0,e)},this),c._rows&&(c._rows.length=0,delete c._rows),b||d.destroy(c));this.inherited(arguments)},_refreshCellFromItem:function(a,b){if(!a.column.renderExpando)return this.inherited(arguments);this.inherited(arguments,[a,b,{queryLevel:g(".dgrid-expando-icon",
a.element)[0].level-1}])},cleanup:function(){this.inherited(arguments);this.collapseOnRefresh&&(this._expanded={})},_destroyColumns:function(){this.inherited(arguments);for(var a=this._treeColumnListeners,b=a.length;b--;)a[b].remove();this._treeColumnListeners=[];this._treeColumn=null},_calcRowHeight:function(a){var b=a.connected;return this.inherited(arguments)+(b?b.offsetHeight:0)},_configureTreeColumn:function(b){var c=this,e=this.collection,g=".dgrid-content .dgrid-column-"+b.id,d;this._treeColumn=
b;if(!b._isConfiguredTreeColumn){var h=b.renderCell||this._defaultRenderCell;b._isConfiguredTreeColumn=!0;b.renderCell=function(a,g,d,k){if(e){var q=Number(k&&k.queryLevel)+1,p=!e.mayHaveChildren||e.mayHaveChildren(a),r,q=c._currentLevel=isNaN(q)?0:q;r=b.renderExpando(q,p,c._expanded[e.getIdentity(a)],a);r.level=q;r.mayHaveChildren=p;(a=h.call(b,a,g,d,k))&&a.nodeType?(d.appendChild(r),d.appendChild(a)):d.insertBefore(r,d.firstChild)}};"function"!==typeof b.renderExpando&&(b.renderExpando=this._defaultRenderExpando)}var k=
this._treeColumnListeners;0===k.length&&(k.push(this.on(b.expandOn||".dgrid-expando-icon:click,"+g+":dblclick,"+g+":keydown",function(a){var b=c.row(a);c.collection.mayHaveChildren&&!c.collection.mayHaveChildren(b.data)||"keydown"===a.type&&32!==a.keyCode||"dblclick"===a.type&&d&&1<d.count&&b.id===d.id&&-1<a.target.className.indexOf("dgrid-expando-icon")||c.expand(b);-1<a.target.className.indexOf("dgrid-expando-icon")&&(d&&d.id===c.row(a).id?d.count++:d={id:c.row(a).id,count:1})})),a("touch")&&k.push(this.on(q.selector(g,
q.dbltap),function(){c.expand(this)})))},_defaultRenderExpando:function(a,b,c){var e=this.grid.isRTL?"right":"left",g="dgrid-expando-icon";b&&(g+=" ui-icon ui-icon-triangle-1-"+(c?"se":"e"));return d.create("div",{className:g,innerHTML:"\x26nbsp;",style:"margin-"+e+": "+a*this.grid.treeIndentWidth+"px; float: "+e+";"})},_onNotification:function(a,b){"delete"===b.type&&delete this._expanded[b.id];this.inherited(arguments)},_onTreeTransitionEnd:function(a){var c=this,e=this.style.height;e&&(this.style.display=
"0px"===e?"none":"block");a&&(b.add(this,"dgrid-tree-resetting"),setTimeout(function(){b.remove(c,"dgrid-tree-resetting")},0));this.style.height=""}})})},"xace/views/ACEEditor":function(){define("dcl/dcl dojo/has dojo/dom-construct xide/utils xide/types xide/widgets/TemplatedWidgetBase xace/views/_Split xaction/DefaultActions xace/views/_AceMultiDocs".split(" "),function(n,m,k,h,d,b,c,g,p){var a={};m=n([b],{resizeToParent:!0,templateString:'\x3cdiv attachTo\x3d"aceNode" style\x3d"width: 100%;height: 100%" class\x3d""\x3e\x3c/div\x3e'});
p=n(p,{declaredClass:"xace/views/EditorInterface",editorSession:null,_lastValue:null,enableMultiDocuments:function(){this.addFileCompleter().addDocument("asdf.js","var xxxTop \x3d 2*3;")},loadScript:function(a,b,c){b=document.createElement("script");b.type="application/javascript";b.src=a;b.onload=function(){c&&c()};document.body.appendChild(b)},setMode:function(b,c,g){if((c=c||this.ctx||window.sctx)&&c.getResourceManager()){var e=this;if(a[b])e.set("mode",b),g&&g(b);else{var h=null;(h=c.getResourceManager().getVariable(d.RESOURCE_VARIABLES.ACE))?
h=h+"/mode-"+b+".js":(c=c.getResourceManager().getVariable(d.RESOURCE_VARIABLES.APP_URL),h=c+"/xfile/ext/ace//mode-"+b+".js");this.loadScript(h,null,function(){a[b]=!0;e.set("mode",b);g&&g(b)})}}else console.error("have no resource manager!")},get:function(a){if("value"===a){var b=this.getEditor();return(b=b?b.session:null)?b.getValue():null}return this.inherited(arguments)},set:function(a,b){var c=this,e=this.getEditor(),g=this.editorSession;if("iconClass"===a){var d=this._parent;d&&d.icon&&this._parent.icon(b)}if(e&&
g)if(d=e.container,"item"==a&&(g.setUseWorker(!1),c.getContent(b,function(a){var e=c._getMode(b.path);c.set("value",a);c.setMode(e);g.setUseWorker(c.options.useWorker)})),"value"==a&&b)g.setValue(b);else if("theme"==a)"string"==typeof b&&(b="ace/theme/"+b),e.setTheme(b),this.split&&this.split.setTheme(b);else if("mode"==a)try{ace.require(["ace/mode/"+b],function(a){a&&a.Mode&&c.split.$editors.forEach(function(b){b.session.setMode(new a.Mode)})})}catch(x){console.error("ace mode failed : "+b)}else"readOnly"==
a?e.setReadOnly(b):"tabSize"==a?g.setTabSize(b):"softTabs"==a?g.setUseSoftTabs(b):"wordWrap"==a?g.setUseWrapMode(b):"printMargin"==a?e.renderer.setPrintMarginColumn(b):"showPrintMargin"==a?e.setShowPrintMargin(b):"highlightActiveLine"==a?e.setHighlightActiveLine(b):"fontSize"==a?$(d).css(a,b):"showIntentGuides"==a?e.setDisplayIndentGuides(b):"elasticTabstops"==a?e.setOption("useElasticTabstops",b):"useIncrementalSearch"==a?e.setOption("useIncrementalSearch",b):"showGutter"==a&&e.renderer.setShowGutter(b);
return this.inherited("set",arguments)},_getMode:function(a){a=a||this.fileName;var b="javascript";if(a){b=h.getFileExtension(a)||"js";if("js"===b||"xblox"===b)b="javascript";if("h"===b||"cpp"===b)b="c_cpp";if("html"===b||"cfhtml"===b||"dhtml"===b)b="html";"cp"===b&&(b="xml");"md"===b&&(b="markdown");"hbs"===b&&(b="handlebars")}return b},setOptions:function(a){this.options=a;_.each(a,function(a,b){this.set(b,a)},this);var b=this.getEditor();b&&a.aceOptions&&(b.setOptions(a.aceOptions),b.session.setUseWorker(a.useWorker),
b.setOptions({enableBasicAutocompletion:!0,enableSnippets:!0,enableLiveAutocompletion:!0}),this.setMode(a.mode));return this.options},getOptions:function(){return this.options},onContentChange:function(a){this._parent&&this._parent.set&&this._parent.set("changed",a!==this.lastSavedContent)},onDidChange:function(){var a=this.get("value");this._lastValue!==a&&(this._lastValue=a,this._emit("change",a),this.onContentChange(a))},getDefaultOptions:function(a,b){var c=this;return h.mixin({region:"center",
style:"margin: 0; padding: 0; position:relative;overflow: auto;height:inherit;width:inherit;text-align:left;",readOnly:!1,tabSize:2,wordWrap:!1,showPrintMargin:!1,highlightActiveLine:!0,fontSize:16,showGutter:!0,showLineNumbers:!0,useWorker:!0,showInvisibles:!1,displayIndentGuides:!0,useSoftTabs:!0,fileName:"none",mode:"javascript",value:a||this.value||"No value",theme:"idle_fingers",splits:1,useElasticTabstops:!1,animatedScroll:!1,highlightActive:!0,aceOptions:{enableBasicAutocompletion:!0,enableSnippets:!0,
enableLiveAutocompletion:!0},onLoad:function(a){a.$blockScrolling=Infinity},onDidChange:function(){var a=c.get("value");if(a!==c.lastSavedContent)c.onContentChange(a)},onPrefsChanged:function(){c.setPreferences&&c.setPreferences()}},b)},getEditor:function(a){if(this.split)return null==a?this.split.getCurrentEditor():this.split.getEditor(null!=a?a:0);if(this.editor)return this.editor},resize:function(a,b,c){a=this.options||{};this.onResize&&this.onResize();return this.debounce("resize",function(){var a=
this.getEditor(),b=this.split||this.editor;if(a&&this.aceNode&&a.container)return a&&h.resizeTo(a.container,this.aceNode,!0,!0),b?b.resize():null;this.resize_debounced.cancel();this.resize_debounced=null}.bind(this),a.resizeDelay||300,null)},getAce:function(){return this.getEditor()},addBasicCommands:function(a){a=a||this.getEditor();var b=this,c=ace.require("ace/ext/whitespace");this._whiteSpaceExt=c;a.commands.addCommands(c.commands);a.commands.addCommands([{name:"gotoline",bindKey:{win:"Ctrl-L",
mac:"Command-L"},exec:function(a,b){"object"==typeof b?(b=this.name+" "+a.getCursorPosition().row,a.cmdLine.setValue(b,1),a.cmdLine.focus()):(b=parseInt(b,10),isNaN(b)||a.gotoLine(b))},readOnly:!0},{name:"snippet",bindKey:{win:"Alt-C",mac:"Command-Alt-C"},exec:function(a,b){"object"==typeof b?(a.cmdLine.setValue("snippet ",1),a.cmdLine.focus()):(b=snippetManager.getSnippetByName(b,a))&&snippetManager.insertSnippet(a,b.content)},readOnly:!0},{name:"increaseFontSize",bindKey:"Ctrl-+",exec:function(a){a.setFontSize(a.getFontSize()+
1);b.onAfterAction()}},{name:"decreaseFontSize",bindKey:"Ctrl+-",exec:function(a){a.setFontSize(a.getFontSize()-1);b.onAfterAction()}},{name:"resetFontSize",bindKey:"Ctrl+0",exec:function(a){a.setFontSize(12);b.onAfterAction()}}])},onEditorCreated:function(a,b){var c=this;a.getSelectedText=function(){return c.editorSession.getTextRange(this.getSelectionRange())};a.on("change",function(){c.onDidChange(arguments)});this.addBasicCommands(a);a.setFontSize(b.fontSize);a.$blockScrolling=Infinity;this._whiteSpaceExt&&
this._whiteSpaceExt.detectIndentation(a.session)},destroy:function(){var a=this.getEditor();a&&a.destroy();(a=this.resize_debounced)&&a.cancel()},getOptionsMixed:function(a){var b=this.getPreferences?this.getPreferences():{},c=this.getDefaultOptions(this.value,a||this.options);h.mixin(c,a);h.mixin(c,b);c.mode=this._getMode(c.fileName);return c},createEditor:function(a,b){this.set("iconClass",this.iconClassNormal);if(this.editor||this.split)return this.editor||this.split;var e=this.getPreferences?
this.getPreferences():{},g=this.getDefaultOptions(b);h.mixin(g,a);h.mixin(g,e);g.mode=this._getMode(g.fileName);a=g.targetNode||k.create("div");$(a).css({padding:"0",margin:"0",height:"100%",width:"100%"});this.aceNode.appendChild(a);var e=ace.require("ace/config"),d=null,p=null;ace.require("ace/ext/language_tools");try{this.split=d=new (c.getSplitter())(a,null,1),this._aceConfig=e,e.init(),this.editor=p=d.getEditor(0),this.editorSession=this.editor.getSession(),b&&this.editorSession.setValue(b),
d&&d.setSplits(g.splits)}catch(x){logError(x,"error creating editor")}this.setOptions(g);this.onEditorCreated(p,g);return p},addAutoCompleter:function(a){ace.require("ace/ext/language_tools").addCompleter({getCompletions:function(b,c,e,g,d){0===g.length?d(null,[]):a?d(null,a.map(function(a){return{name:a.value,value:a.word,meta:a.meta}})):d(null,[])}})}});b=n(null,{declaredClass:"xace/views/ACE",onLoaded:function(){this.set("iconClass",this.iconClassNormal)},getKeyTarget:function(){return this.aceNode},
startup:function(){this.aceNode.id=h.createUUID();if(this.permissions){var a=g.getDefaultActions(this.permissions,this,this),a=a.concat(this.getEditorActions(this.permissions));this.addActions(a)}this.iconClassNormal=""+this.iconClass;this.set("iconClass","fa-spinner fa-spin");var b=this,c=this.options||{};if(this.item||null!=this.value)null!=this.value?(this.lastSavedContent=""+this.value,b.createEditor(b.options||null,this.value)):this.getContent(this.item,function(a){b.lastSavedContent=a;b.createEditor(b.options||
c,a)},function(a){b.createEditor(b.options||null,"");logError(a,"error loading content from file")})}});n=n([m,b,p],{});n.EditorImplementation=p;n.Editor=b;n.Container=m;n.Splitter=c;return n})},"dojo/dom-construct":function(){define("exports ./_base/kernel ./sniff ./_base/window ./dom ./dom-attr".split(" "),function(n,m,k,h,d,b){function c(a,b){var c=b.parentNode;c&&c.insertBefore(a,b)}function g(a){if("innerHTML"in a)try{a.innerHTML="";return}catch(y){}for(var b;b=a.lastChild;)a.removeChild(b)}
var p={option:["select"],tbody:["table"],thead:["table"],tfoot:["table"],tr:["table","tbody"],td:["table","tbody","tr"],th:["table","thead","tr"],legend:["fieldset"],caption:["table"],colgroup:["table"],col:["table","colgroup"],li:["ul"]},a=/<\s*([\w\:]+)/,e={},q=0,u="__"+m._scopeName+"ToDomId",w;for(w in p)p.hasOwnProperty(w)&&(m=p[w],m.pre="option"==w?'\x3cselect multiple\x3d"multiple"\x3e':"\x3c"+m.join("\x3e\x3c")+"\x3e",m.post="\x3c/"+m.reverse().join("\x3e\x3c/")+"\x3e");var r;8>=k("ie")&&(r=
function(a){a.__dojo_html5_tested="yes";var b=v("div",{innerHTML:"\x3cnav\x3ea\x3c/nav\x3e",style:{visibility:"hidden"}},a.body);1!==b.childNodes.length&&"abbr article aside audio canvas details figcaption figure footer header hgroup mark meter nav output progress section summary time video".replace(/\b\w+\b/g,function(b){a.createElement(b)});x(b)});n.toDom=function(b,c){c=c||h.doc;var g=c[u];g||(c[u]=g=++q+"",e[g]=c.createElement("div"));8>=k("ie")&&!c.__dojo_html5_tested&&c.body&&r(c);b+="";var d=
b.match(a),m=d?d[1].toLowerCase():"",g=e[g];if(d&&p[m])for(d=p[m],g.innerHTML=d.pre+b+d.post,b=d.length;b;--b)g=g.firstChild;else g.innerHTML=b;if(1==g.childNodes.length)return g.removeChild(g.firstChild);for(b=c.createDocumentFragment();c=g.firstChild;)b.appendChild(c);return b};n.place=function(a,b,e){if(b=d.byId(b)){"string"==typeof a&&(a=/^\s*</.test(a)?n.toDom(a,b.ownerDocument):d.byId(a));if("number"==typeof e){var g=b.childNodes;!g.length||g.length<=e?b.appendChild(a):c(a,g[0>e?0:e])}else switch(e){case "before":c(a,
b);break;case "after":e=a;(g=b.parentNode)&&(g.lastChild==b?g.appendChild(e):g.insertBefore(e,b.nextSibling));break;case "replace":b.parentNode.replaceChild(a,b);break;case "only":n.empty(b);b.appendChild(a);break;case "first":if(b.firstChild){c(a,b.firstChild);break}default:if(!b)return console.error("bad"),null;b.appendChild(a)}return a}console.error("have no node in domConstruct")};var v=n.create=function(a,c,e,g){var k=h.doc;e&&(e=d.byId(e),k=e.ownerDocument);"string"==typeof a&&(a=k.createElement(a));
c&&b.set(a,c);e&&n.place(a,e,g);return a};n.empty=function(a){g(d.byId(a))};var x=n.destroy=function(a){if(a=d.byId(a)){var b=a;a=a.parentNode;b.firstChild&&g(b);a&&(k("ie")&&a.canHaveChildren&&"removeNode"in b?b.removeNode(!1):a.removeChild(b))}}})},"davinci/ve/prefs/HTMLEditPreferences":function(){define("dojo/_base/declare dijit/layout/ContentPane dijit/_TemplatedMixin dijit/form/CheckBox dijit/form/TextBox dijit/form/Select davinci/lang/ve/common dojo/text!./HtmlEditPreferences.html".split(" "),
function(n,m,k,h,d,b,c,g){return n([m,k],{templateString:g,postMixInProperties:function(){this._loc=c},postCreate:function(){this._snap=new h({},this.snapNode);this._showPossibleParents=new h({},this.showPossibleParentsNode);this._cssOverrideWarn=new h({},this.cssOverrideWarn);this._absoluteWidgetsZindex=new d({},this.absoluteWidgetsZindex);this._zazl=new h({},this.zazl);this.containerNode||(this.containerNode=this.domNode)},getDefaults:function(){},setDefaults:function(){},doApply:function(){},getPreferences:function(){return{snap:this._snap.checked,
showPossibleParents:this._showPossibleParents.checked,cssOverrideWarn:this._cssOverrideWarn.checked,absoluteWidgetsZindex:this._absoluteWidgetsZindex.value,zazl:this._zazl.checked}},setPreferences:function(b){b=b||{};this._check(this._snap,!!b.snap);this._check(this._showPossibleParents,!!b.showPossibleParents);this._check(this._cssOverrideWarn,!!b.cssOverrideWarn);this._absoluteWidgetsZindex.set("value",b.absoluteWidgetsZindex);this._check(this._zazl,!!b.zazl)},_check:function(b,a){b.set("checked",
a)},save:function(b){davinci.ve._preferences=b}})})},"davinci/ve/actions/_AddManageStatesWidget":function(){define("dojo/_base/declare dojo/dom-style dojo/_base/event dijit/_WidgetBase dijit/_TemplatedMixin dijit/_WidgetsInTemplateMixin davinci/Runtime davinci/Workbench davinci/workbench/Preferences davinci/ve/States davinci/commands/CompoundCommand davinci/ve/commands/StyleCommand davinci/ve/commands/AppStateCommand davinci/actions/Action davinci/lang/ve dijit/lang/_common dojo/text!./templates/AddState.html dijit/form/TextBox dijit/form/Select dijit/form/CheckBox dijit/form/Button".split(" "),
function(n,m,k,h,d,b,c,g,p,a,e,q,u,w,r,v,x,A,z,y,B){return n("davinci.ve.actions._AddManageStatesWidget",[h,d,b],{templateString:x,widgetsInTemplate:!0,veNls:r,commonNls:v,_isValid:function(){var a=this.domNode.querySelector(".addStateNameDiv");if(a&&"none"==m.get(a,"display"))return!0;a=this.input.get("value");return a?davinci.ve.states.hasState(this.node,a)?(alert(dojo.string.substitute(r.stateNameExists,{name:a})),!1):!0:!1},_onKeyPress:function(a){a.keyCode!=dojo.keys.ENTER&&(this._isValid()?
this.okButton.set("disabled",!1):this.okButton.set("disabled",!0))},onOk:function(){var b;if(c.currentEditor&&c.currentEditor.currentEditor&&c.currentEditor.currentEditor.context){if(b=c.currentEditor.currentEditor.context,(b=a.getFocus(b.rootNode))&&b.stateContainerNode){a.getState(b.stateContainerNode);var g=this.input.get("value");if(g)if(c.currentEditor&&c.currentEditor.currentEditor&&c.currentEditor.currentEditor.context){b=c.currentEditor.currentEditor.context;var d=new e;g&&d.add(new u({action:"add",
state:g,stateContainerNode:this.node,context:b}));b.getCommandStack().execute(d)}else console.error("AddState.js - cannot determine context.")}}else console.error("_AddManageStatesWidget.js (from "+this._calledBy+" - cannot determine context.")},onCancel:function(){this.onClose()}})})},"xblox/model/code/CallMethod":function(){define(["dcl/dcl","xblox/model/Block","xide/utils"],function(n,m,k){return n(m,{declaredClass:"xblox.model.code.CallMethod",name:"Call Method",method:"",args:"",sharable:!0,
solve:function(h,d){if((h=this.getContext())&&null!=h[this.method]){var b=[],c=h[this.method];try{var g=this.getArgs(d),b=c.apply(h,g||[]);this.onSuccess(this,d);return b}catch(p){console.error("call method "+this.method+" failed: "+p),logError(p),this.onFailed(this,d)}}else this.onFailed(this,d);return[]},toText:function(){var h=this.getBlockIcon()+" "+this.name+" ";this.method&&(h+=this.makeEditable("method","bottom","text","Enter a driver method","inline"));return h},getFields:function(){var h=
this.getDefaultFields();this.getContext();h.push(k.createCI("value",13,this.method,{group:"General",title:"Method",dst:"method"}));h.push(k.createCI("value",27,this.args,{group:"Arguments",dst:"args",widget:{title:""}}));return h},getBlockIcon:function(){return'\x3cspan class\x3d"fa-caret-square-o-right"\x3e\x3c/span\x3e'}})})},"dijit/_base/window":function(){define(["dojo/window","../main"],function(n,m){m.getDocumentWindow=function(k){return n.get(k)}})},"davinci/html/HTMLFile":function(){define("dojo/_base/declare davinci/html/HTMLItem davinci/html/HTMLParser davinci/html/CSSSelector davinci/html/HTMLElement davinci/html/CSSImport davinci/html/CSSFile davinci/model/Model davinci/model/Path".split(" "),
function(n,m,k,h,d,b,c,g,p){return n("davinci.html.HTMLFile",m,{constructor:function(a){this.url=this.fileName=a;this.elementType="HTMLFile";this._loadedCSS={};this._styleElem=null},save:function(a){var b,c=system.resource.findResource(this.fileName);this.getText();c?(b=this.getText(),b=c.setContents(b,a)):console.error("couldnt find file in resources : "+this.fileName);return b},getText:function(a){a=a||{};a.indent=0;for(var b="",c=0;c<this.children.length;c++){var g=this.children[c],b=b+g.getText(a);
"HTMLComment"==g.elementType&&(b+=this._addWS(g._fmLine,g._fmIndent))}return b},getDocumentElement:function(a){for(a=0;a<this.children.length;a++)if("html"==this.children[a].tag)return this.children[a]},findElement:function(a){var b=this.getDocumentElement();if(b)return b.findElement(a)},getMatchingRules:function(a,b){var c={visit:function(b){if("CSSFile"==b.elementType){var c=[];b=b.getMatchingRules(a,[],c);for(var e=0;e<b.length;e++)for(var g=0;g<this.matchLevels.length;g++)if(c[e]>this.matchLevels[g]){this.matchLevels.splice(g,
0,c[e]);this.rules.splice(g,0,b[e]);break}0==this.rules.length&&(this.rules=b,this.matchLevels=c);return!0}return!1},matchLevels:[],rules:[]};this.visit(c);return b?{rules:c.rules,matchLevels:c.matchLevels}:c.rules},getRule:function(a){if(!a)return[];var b=h.parseSelectors(a);a={visit:function(a){return"CSSFile"==a.elementType?(a=a.getRule(b),this.rules=this.rules.concat(a||[]),!0):!1},rules:[]};this.visit(a);return a.rules},setText:function(a,b){this.visit({visit:function(a){"CSSImport"==a.elementType&&
a.close()}});this.children=[];this._styleElem=null;a=k.parse(a||"",this);var c="";b||0!=a.errors.length||(c=this.getText(),this.children=[],a=k.parse(c,this));this.endOffset=a.endOffset;this.errors=a.errors;var e=this;b||this.visit({visit:function(a){"CSSImport"!=a.elementType||a.cssFile||(a.load(!0),dojo.connect(a.cssFile,"onChange",null,dojo.hitch(e,"onChange")))}});this.onChange()},hasStyleSheet:function(a){for(var b=this.find({elementType:"CSSImport"}),c=0;c<b.length;c++)if(b[c].url==a)return!0;
return!1},addStyleSheet:function(a,c,g,h,k){var e=new p(this.url||this.fileName),e=e.getParentPath().append(a),e=e.toString();g||(this._loadedCSS[e]=require("davinci/model/Factory").getModel({url:e,includeImports:!0,loader:k}));c&&this._loadedCSS[e].setText(c);this.onChange();this._styleElem||(c=this.find({elementType:"HTMLElement",tag:"head"},!0),k=c.getChildElement("style"),k||(k=new d("style"),c.addChild(k)),this._styleElem=k);c=new b;c.parent=this;c.url=a;h?this._styleElem.insertBefore(c,h):this._styleElem.addChild(c);
g||c.load(!0)},close:function(){this.visit({visit:function(a){"CSSImport"==a.elementType&&a.close()}});require("davinci/model/Factory").closeModel(this)},getLabel:function(){return"\x3c\x3e"},getID:function(){return this.fileName},updatePositions:function(a,b){(new g(this)).updatePositions(this,a,b);this.visit({visit:function(c){if(c.endOffset<a)return!0;"HTMLElement"==c.elementType&&c.startTagOffset>a&&(c.startTagOffset+=b)}})},mapPositions:function(a){var b=this.getText();a=a.getText();b=b.indexOf(a);
a=b+a.lastIndexOf("\x3e")+1;return{startOffset:b,endOffset:a}},reportPositions:function(){this.visit({visit:function(a){}})},evaluate:function(a){if("/"!==a.charAt(0))console.error("invalid XPath string");else{var b=this;a.substr(1).split("/").forEach(function(a){a=a.match(this._RE_XPATH);var c=a[1];a=a[2];var e;e=b.children.filter(function(a){return a.tag===c});!a&&1<e.length?console.error("invalid XPath string; no index specified for multiple elements"):b=a?e[a-1]:e[0]},this);return b}},_RE_XPATH:/(\w+)(?:\[(\d+)\])?/})})},
"davinci/ve/Context":function(){define("require dojo/_base/declare dojo/_base/lang dojo/dom-class dojo/query dojo/_base/connect xide/mixins/ReloadMixin xide/mixins/EventedMixin ./_ContextMobile ./_ContextTheme ./_ContextCSS ./_ContextJS ./_ContextDelite ./_ContextDojo ./_ContextInterface ./_ContextDocument ./_ContextWidgets ./ThemeModifier ../commands/CommandStack ./tools/SelectTool ../model/Path ../Workbench ./widget ../library ./metadata ./ChooseParent ./States dojox/html/_base".split(" "),function(n,
m,k,h,d,b,c,g,p,a,e,q,u,w,r,v,x,A,z,y,B,C,E,F,G,D,H){davinci.ve._preferences={};var J=0,Q=function(a){var b=G.getLibrary();a&&dojo.filter(a.attributes,function(a){return"on"==a.nodeName.substr(0,2).toLowerCase()}).forEach(function(a){var c=!1,e;for(e in b)if(c=G.getLibrary(e),c=G.invokeCallback(c,"requiredEventAttribute",[a]))break})};return m("davinci.ve.Context",[p,a,e,q,u,w,r,v,x,A,g,c],{_scripts:[],delite:!1,WIDGET_MODIFIED:0,WIDGET_ADDED:1,WIDGET_REMOVED:2,WIDGET_REPARENTED:3,WIDGET_ID_CHANGED:4,
maqStatesClassCount:0,maqStatesClassPrefix:"maqStatesClass",maqTypesClassCount:0,maqTypesClassPrefix:"maqTypesClass",rootWidget:null,getRootWidget:function(){return this.rootWidget},constructor:function(a){a||(a={});C.location();this._contentStyleSheet=n.toUrl("davinci/ve/resources/content.css");this._id="_edit_context_"+J++;this.widgetHash={};this.delite=a.delite;k.mixin(this,a);"string"==typeof this.containerNode&&(this.containerNode=dijit.byId(this.containerNode));this._commandStack=new z(this);
this._defaultTool=new y;this._widgetIds=[];this._objectIds=[];this._widgets=[];this._loadedCSSConnects=[];this._chooseParent=new D({context:this});this.sceneManagers={};this.catchEvents=!0;this._customWidgetPackages=k.clone(F.getCustomWidgetPackages());a=G.getLibrary();for(var b in a)a=G.getLibrary(b),G.invokeCallback(a,"onDocInit",[this]);b=document.getElementById("focusContainer");b||(b=dojo.create("div",{"class":"focusContainer",id:"focusContainer"},document.body),davinci.Workbench.focusContainer=
b);this.initReload()},getVisualEditor:function(){return this.visualEditor&&this.visualEditor._pageEditor?this.visualEditor._pageEditor.delegate:null},destroy:function(){this.deactivate();this.inherited(arguments);this._loadedCSSConnects&&(this._loadedCSSConnects.forEach(b.disconnect),delete this._loadedCSSConnects)},isActive:function(){return!!this._activeTool},onReloaded:function(){},getPath:function(){return new B(this.getModel().fileName)},activate2:function(){if(!this.isActive()){this.loadStyleSheet(this._contentStyleSheet);
this._attachAll();this._restoreStates();d("*",this.rootNode).forEach(function(a){Q(a);"A"==a.tagName.toUpperCase()&&a.hasAttribute("href")&&a.removeAttribute("href")});this._AppStatesActivateActions();this._statesLoaded=!0;b.publish("/davinci/ui/context/statesLoaded",[this]);this._onLoadHelpers();var a=this.getContainerNode();h.add(a,"editContextContainer");this.catchEvents?(this._connects=[b.connect(this._commandStack,"onExecute",this,"onCommandStackExecute"),b.connect(this._commandStack,"onExecute",
function(){setTimeout(this.onContentChange.bind(this),0)}.bind(this))],this._designEvents=[b.connect(this.getDocument(),"onkeydown",this,"onKeyDown"),b.connect(this.getDocument(),"onkeyup",this,"onKeyUp"),b.connect(a,"ondblclick",this,"onDblClick"),b.connect(a,"onmousedown",this,"onMouseDown"),b.connect(a,"onclick",this,"onMouseClick"),b.connect(a,"onmousemove",this,"onMouseMove"),b.connect(a,"onmouseup",this,"onMouseUp"),b.connect(a,"onmouseover",this,"onMouseOver"),b.connect(a,"onmouseout",this,
"onMouseOut")]):this._connects=[b.connect(this._commandStack,"onExecute",this,"onCommandStackExecute"),b.connect(this._commandStack,"onExecute",function(){setTimeout(this.onContentChange.bind(this),0)}.bind(this)),b.connect(this.getDocument(),"onkeydown",this,"onKeyDown"),b.connect(this.getDocument(),"onkeyup",this,"onKeyUp")];this.visualEditor&&this.visualEditor._pageEditor&&this.visualEditor._pageEditor._visualChanged&&this.visualEditor._pageEditor._visualChanged(!0);try{this.setActiveTool()}catch(O){debugger;
console.error("set active tool failed! "+O.message)}return!0}},deactivate:function(){if(this.isActive()){this._connects.forEach(b.disconnect);this._designEvents.forEach(b.disconnect);delete this._designEvents;delete this._connects;(this._focuses||[]).forEach(function(a){a._connected=!1});this._commandStack.clear();this._activeTool&&(this._activeTool.deactivate(),delete this._activeTool);var a=this.getContainerNode();this.select(null);h.remove(a,"editContextContainer");this.getTopWidgets().forEach(this.detach,
this);this.unloadStyleSheet(this._contentStyleSheet)}},_editorSelectionChange:function(a){a.editor.fileName===this.editor.fileName&&(b.unsubscribe(this._editorSelectConnection),delete this._editorSelectConnection,this._setSource(this._srcDocument))},_preserveStates:function(a,b){var c=davinci.ve.states.retrieve(a);if("BODY"!=a.tagName.toUpperCase()&&(c.maqAppStates||c.maqDeltas)){var e=this.maqStatesClassPrefix+this.maqStatesClassCount;a.className=a.className+" "+e;this.maqStatesClassCount++;b[e]=
{};c.maqAppStates&&(b[e].maqAppStates=c.maqAppStates);c.maqDeltas&&(b[e].maqDeltas=c.maqDeltas);a.style?b[e].style=a.style.cssText:console.error("Context._preserveStates: fail")}},_restoreStates:function(){},_AppStatesActivateActions:function(){if("davinci.ve.PageEditor"===this.editor.declaredClass){if(!this.rootNode._maqAppStates){this.rootNode._maqAppStates={};var a=this.rootWidget._srcElement,b=H.serialize(this.rootNode);b.maqAppStates?a.setAttribute(H.APPSTATES_ATTRIBUTE,b.maqAppStates):a.removeAttribute(H.APPSTATES_ATTRIBUTE);
this.editor._visualChanged(!0)}H.getFocus(this.rootNode)||(a=H.getState(this.rootNode),H.setState(a,this.rootNode,{updateWhenCurrent:!0,silent:!0,focus:!0}))}},getCommandStack:function(){return this._commandStack},getSelection:function(){return this._selection||[]},getPreference:function(a){if(a)return davinci.ve._preferences[a]},getPreferences:function(){return k.mixin({},davinci.ve._preferences)},setPreference:function(a,b){a&&(davinci.ve._preferences[a]=b,this.isActive())},setPreferences:function(a){if(a)for(var b in a)this.setPreference(b,
a[b])},_parse:function(a){var b={metas:[],scripts:[],modules:[],styleSheets:[]},c=a.getDocumentElement();a=c.getChildElement("head");var e=c.getChildElement("body");this._uniqueIDs={};if(e){e.visit({visit:dojo.hitch(this,function(a){"HTMLElement"==a.elementType&&a!=e&&this.getUniqueID(a)})});if(c=e.getAttribute("class"))b.bodyClasses=c;b.style=e.getAttribute("style");b.content=e.getElementText({includeNoPersist:!0,excludeIgnoredContent:!0});c=e.getAttribute(davinci.ve.states.APPSTATES_ATTRIBUTE);
c||(c=e.getAttribute(davinci.ve.states.APPSTATES_ATTRIBUTE_P6))&&e.setAttribute(davinci.ve.states.APPSTATES_ATTRIBUTE,c);e.removeAttribute(davinci.ve.states.APPSTATES_ATTRIBUTE_P6);b.maqAppStates=c}if(c=a.getChildElement("title"))b.title=c.getElementText();c=a.getChildElements("script");dojo.forEach(c,function(a){var c=a.getAttribute("src");c&&b.scripts.push(c);a=a.getElementText();a.length&&(a.replace(/dojo\.require\(["']([^'"]+)["']\)/g,function(a,c){b.modules.push(c)}),a.replace(/require\(\[["']([^'"]+)["']\]\)/g,
function(a,c){b.modules.push(c)}))},this);a=a.getChildElements("style");dojo.forEach(a,function(a){dojo.forEach(a.children,function(a){"CSSImport"===a.elementType&&b.styleSheets.push(a.url)})});return b},getUniqueID:function(a,b){var c=a.getAttribute("id");if(!c){for(var e=this.rootWidget?this.rootWidget.domNode.ownerDocument:null,g=b||a.tag;;)if(c=this._uniqueIDs.hasOwnProperty(g)?++this._uniqueIDs[g]:this._uniqueIDs[g]=0,c=g+"_"+c,e){if(!e.getElementById(c))break}else break;a.addAttribute("id",
c,!b)}return c},registerSceneManager:function(a){if(a&&a.id){var c=a.id;this.sceneManagers[c]||(this.sceneManagers[c]=a,b.publish("/davinci/ui/context/registerSceneManager",[a]))}},onCommandStackExecute:function(){this.clearCachedWidgetBounds();this.editor&&this.editor.editorContainer&&this.editor.editorContainer.updateToolbars&&this.editor.editorContainer.updateToolbars();H.updateHighlightsBaseStateWidgets(this)},reorderPreserveSiblingOrder:function(a){a=[].concat(a);for(var b=0;b<a.length-1;){for(var c=
a[b].getParent(),e=b+1,g=!1;e<a.length;)if(a[e].getParent()==c)g=!0,e++;else break;if(g)for(c=c.getChildren(),g=e-2;g>=b;g--)for(var d=b;d<=g;d++){var h=c.indexOf(a[d]),k=c.indexOf(a[d+1]);h>k&&(h=a[d+1],a[d+1]=a[d],a[d]=h)}b=e}return a},_updateWidgetHash:function(){this.widgetHash={};this.getAllWidgets().forEach(function(a){var b=a.id;b&&(this.widgetHash[b]=a)},this)}})})},"xide/data/TreeMemory":function(){define(["dojo/_base/declare","xide/data/Memory","dstore/Tree","dojo/Deferred","dstore/QueryResults"],
function(n,m,k,h,d){return n("xide.data.TreeMemory",[m,k],{_state:{filter:null},parentProperty:"parentId",reset:function(){this._state.filter=null;this.resetQueryLog()},resetQueryLog:function(){this.queryLog=[]},fetchRange:function(){var b=this._fetchRange(arguments);return new d(b.then(function(b){return b}),{totalLength:b.then(function(b){return b.length})})},filter:function(b){var c=this.inherited(arguments);this._state.filter=b;return c},_fetchRange:function(b){var c=new h;b=this.fetchRangeSync(b);
if(this._state.filter){if(this._state.filter.parent){var g=this.getSync(this._state.filter[this.parentProperty]);g&&(this.reset(),b={},this.getChildrenSync?b=this.getChildrenSync(g):(b[this.parentProperty]=g[this.idProperty],b=this.root.query(b)))}this._state&&this._state.filter&&this._state.filter.group&&(this.getSync(this._state.filter.parent),g&&(this.reset(),b=g.items))}c.resolve(b);return c},getChildren:function(b){var c={};c[this.parentProperty]=this.getIdentity(b);return this.root.filter(c)},
children:function(b){for(var c=this.root.data,g=[],d=0;d<c.length;d++){var a=c[d];a[this.parentProperty]==b[this.idProperty]&&g.push(a)}return c},mayHaveChildren:function(b){return!1===b._mayHaveChildren?!1:!0}})})},"davinci/model/Factory":function(){define(["../html/CSSFile","../js/JSFile","../html/HTMLFile","system/resource"],function(n,m,k,h){var d=[],b=[],c={getModel:function(g){var h=g.url;if(!h)return null;for(var a=0;a<b.length;a++)if(b[a].url==h)return d[a]++,this.incrementImports(b[a]),b[a];
if(/\.html?$/i.test(h)||/\.cfhtml?$/i.test(h))return c.newHTML(g);if(/\.css$/i.test(h))return c.newCSS(g);if(/\.js$/i.test(h))return c.newJS(g)},closeModel:function(c){c=c.url;if(!c)return null;for(var g=0;g<b.length;g++)b[g].url==c&&(d[g]--,0===d[g]&&(b.splice(g,1),d.splice(g,1)))},newHTML:function(c){c=new k(c.url);b.push(c);d[b.length-1]=1;return c},newCSS:function(c){c=new n(c);b.push(c);d[b.length-1]=1;return c},newJS:function(c){c=new m(c);b.push(c);d[b.length-1]=1;return c},getNewFromResource:function(b){b=
b.extension;if(!b)return new k;switch(b){case "html":return new k;case "css":return new n;case "js":case "json":return new m;default:return new k}},incrementImports:function(c){var g={visit:function(a){if("CSSImport"==a.elementType){a=a.cssFile.url;for(var c=0;c<b.length;c++)b[c].url==a&&d[c]++}return!1}};c&&c.visit(g)},log:function(){for(var c=0;c<b.length;c++);}};require(["dojo/_base/connect"],function(b){b.subscribe("davinci/model/closeModel",c,c.closeModel)});return c})},"xide/container/_PaneBase":function(){define(["xdojo/has",
"dcl/dcl","xide/utils","xide/_base/_Widget"],function(n,m,k,h){n=m(h,{templateString:"\x3cdiv/\x3e",isContainer:!0,declaredClass:"xide/container/_PaneBase",panelNode:null,selected:!1,$toggleNode:null,$toggleButton:null,lazy:!0,add:m.superCall(function(d){return function(b,c,g,h){this.lazy&&!1!==b.allowLazy&&(c?!1!==c.allowLazy:1)&&(h=!1);return d.apply(this,[b,c,g,h])}}),addChild:function(d,b,c){this.add(d,b);d.domNode&&k.addChild(this.containerNode,d.domNode);!1!==c&&!d._started&&d.startup&&d.startup()},
unselect:function(){this.$toggleButton&&this.$toggleButton.removeClass("active");this.$selectorNode&&this.$selectorNode.removeClass("active");this.$containerNode&&this.$containerNode.removeClass("active");this.selected=!1},select:function(){this.$toggleButton&&this.$toggleButton.addClass("active");this.$selectorNode&&this.$selectorNode.addClass("active");this.$containerNode&&this.$containerNode.addClass("active");this._onShown();this.onSelect&&this.onSelect()},destroy:function(){k.destroy(this.$toggleButton[0]);
k.destroy(this.$containerNode[0])},_checkWidgets:function(){},_onShown:function(){this.selected=!0;this._startWidgets();this.resize();this.onShow();this.onSelect&&this.onSelect();var d=this;setTimeout(function(){d.owner&&d.owner.onShowTab(d)},1);this._emit("show",this)},_onShow:function(){this.selected=!0;this.resize()},shouldResizeWidgets:function(){return this.selected},_onHide:function(){this.open=this.selected=!1;this.onHide()},_onHided:function(){this.open=!1;this._emit("hide",{view:this})},
hide:function(){var d=$(this.containerRoot),b=$(this.toggleNode);b.addClass("collapsed");b.attr("aria-expanded",!1);d.removeClass("collapse in");d.addClass("collapse");d.attr("aria-expanded",!1);this.open=!1},show:function(){var d=$(this.containerRoot),b=$(this.toggleNode);b.removeClass("collapsed");b.attr("aria-expanded",!0);d.removeClass("collapse");d.addClass("collapse in");d.attr("aria-expanded",!0);this.open=!0},getChildren:function(){!this._widgets&&(this._widgets=[]);return this._widgets},
postMixInProperties:function(){this.templateString='\x3cdiv attachTo\x3d"containerNode" style\x3d"height:100%;width:100%;position:relative;" class\x3d"tab-pane '+(this.selected?"active":"")+'"\x3e\x3c/div\x3e'},__init:function(){var d=this.$toggleNode;this.__addHandler(d,"hidden.bs.tab","_onHided");this.__addHandler(d,"hide.bs.tab","_onHide");this.__addHandler(d,"shown.bs.tab","_onShown");this.__addHandler(d,"show.bs.tab","_onShow")}});m.chainAfter(n,"postMixInProperties");m.chainAfter(n,"resize");
m.chainAfter(n,"show");return n})},"dojo/NodeList-dom":function(){define("./_base/kernel ./query ./_base/array ./_base/lang ./dom-class ./dom-construct ./dom-geometry ./dom-attr ./dom-style".split(" "),function(n,m,k,h,d,b,c,g,p){function a(a){return function(b,c,e){return 2==arguments.length?a["string"==typeof c?"get":"set"](b,c):a.set(b,c,e)}}var e=function(a){return 1==a.length&&"string"==typeof a[0]},q=function(a){var b=a.parentNode;b&&b.removeChild(a)},u=m.NodeList,w=u._adaptWithCondition,r=
u._adaptAsForEach,v=u._adaptAsMap;h.extend(u,{_normalize:function(a,c){var e=!0===a.parse;if("string"==typeof a.template){var g=a.templateFunc||n.string&&n.string.substitute;a=g?g(a.template,a):a}g=typeof a;"string"==g||"number"==g?(a=b.toDom(a,c&&c.ownerDocument),a=11==a.nodeType?h._toArray(a.childNodes):[a]):h.isArrayLike(a)?h.isArray(a)||(a=h._toArray(a)):a=[a];e&&(a._runParse=!0);return a},_cloneNode:function(a){return a.cloneNode(!0)},_place:function(a,c,e,g){if(1==c.nodeType||"only"!=e)for(var d,
h=a.length,k=h-1;0<=k;k--){var p=g?this._cloneNode(a[k]):a[k];if(a._runParse&&n.parser&&n.parser.parse)for(d||(d=c.ownerDocument.createElement("div")),d.appendChild(p),n.parser.parse(d),p=d.firstChild;d.firstChild;)d.removeChild(d.firstChild);k==h-1?b.place(p,c,e):c.parentNode.insertBefore(p,c);c=p}},position:v(c.position),attr:w(a(g),e),style:w(a(p),e),addClass:r(d.add),removeClass:r(d.remove),toggleClass:r(d.toggle),replaceClass:r(d.replace),empty:r(b.empty),removeAttr:r(g.remove),marginBox:v(c.getMarginBox),
place:function(a,c){var e=m(a)[0];return this.forEach(function(a){b.place(a,e,c)})},orphan:function(a){return(a?m._filterResult(this,a):this).forEach(q)},adopt:function(a,b){return m(a).place(this[0],b)._stash(this)},query:function(a){if(!a)return this;var b=new u;this.map(function(c){m(a,c).forEach(function(a){void 0!==a&&b.push(a)})});return b._stash(this)},filter:function(a){var b=arguments,c=this,e=0;if("string"==typeof a){c=m._filterResult(this,b[0]);if(1==b.length)return c._stash(this);e=1}return this._wrap(k.filter(c,
b[e],b[e+1]),this)},addContent:function(a,c){a=this._normalize(a,this[0]);for(var e=0,g;g=this[e];e++)a.length?this._place(a,g,c,0<e):b.empty(g);return this}});return u})},"xide/json/History":function(){define(["dojo/_base/declare","./util"],function(n,m){function k(h){this.editor=h;this.clear();this.actions={editField:{undo:function(d){d.node.updateField(d.oldValue)},redo:function(d){d.node.updateField(d.newValue)}},editValue:{undo:function(d){d.node.updateValue(d.oldValue)},redo:function(d){d.node.updateValue(d.newValue)}},
appendNode:{undo:function(d){d.parent.removeChild(d.node)},redo:function(d){d.parent.appendChild(d.node)}},insertBeforeNode:{undo:function(d){d.parent.removeChild(d.node)},redo:function(d){d.parent.insertBefore(d.node,d.beforeNode)}},insertAfterNode:{undo:function(d){d.parent.removeChild(d.node)},redo:function(d){d.parent.insertAfter(d.node,d.afterNode)}},removeNode:{undo:function(d){var b=d.parent;b.insertBefore(d.node,b.childs[d.index]||b.append)},redo:function(d){d.parent.removeChild(d.node)}},
duplicateNode:{undo:function(d){d.parent.removeChild(d.clone)},redo:function(d){d.parent.insertAfter(d.clone,d.node)}},changeType:{undo:function(d){d.node.changeType(d.oldType)},redo:function(d){d.node.changeType(d.newType)}},moveNode:{undo:function(d){d.startParent.moveTo(d.node,d.startIndex)},redo:function(d){d.endParent.moveTo(d.node,d.endIndex)}},sort:{undo:function(d){var b=d.node;b.hideChilds();b.sort=d.oldSort;b.childs=d.oldChilds;b.showChilds()},redo:function(d){var b=d.node;b.hideChilds();
b.sort=d.newSort;b.childs=d.newChilds;b.showChilds()}}}}k.prototype.onChange=function(){};k.prototype.add=function(h,d){this.index++;this.history[this.index]={action:h,params:d,timestamp:new Date};this.index<this.history.length-1&&this.history.splice(this.index+1,this.history.length-this.index-1);this.onChange()};k.prototype.clear=function(){this.history=[];this.index=-1;this.onChange()};k.prototype.canUndo=function(){return 0<=this.index};k.prototype.canRedo=function(){return this.index<this.history.length-
1};k.prototype.undo=function(){if(this.canUndo()){var h=this.history[this.index];if(h){var d=this.actions[h.action];d&&d.undo?(d.undo(h.params),h.params.oldSelection&&this.editor.setSelection(h.params.oldSelection)):m.log('Error: unknown action "'+h.action+'"')}this.index--;this.onChange()}};k.prototype.redo=function(){if(this.canRedo()){this.index++;var h=this.history[this.index];if(h){var d=this.actions[h.action];d&&d.redo?(d.redo(h.params),h.params.newSelection&&this.editor.setSelection(h.params.newSelection)):
m.log('Error: unknown action "'+h.action+'"')}this.onChange()}};return k})},"xblox/model/Block_UI":function(){define(["dcl/dcl","xide/utils","xide/types","xide/data/Source","xaction/ActionProvider"],function(n,m,k,h,d){return n([h.dcl,d.dcl],{declaredClass:"xblox.model.Block_UI",_statusIcon:null,_statusClass:null,description:"No Description",canDelete:!0,renderBlockIcon:!0,getStatusIcon:function(){return this._statusIcon},getStatusClass:function(b){return this._statusClass?this._statusClass[b]:null},
setStatusClass:function(b,c){this._statusClass||(this._statusClass={});delete this._statusClass[b];c&&(this._statusClass[b]=c)},_getText:function(b){var c;dojo.xhrGet({url:b,sync:!0,handleAs:"text",load:function(b){c=b}});return""+c+""},getHelp:function(){},getIcon:function(b,c,g){return'\x3cspan style\x3d"'+(c||"")+'" class\x3d"'+b+'"\x3e\x3c/span\x3e '+(g||"")},makeEditable2:function(b,c,g,d,a){return'\x3ca tabIndex\x3d"-1" pos\x3d\''+c+"' display-mode\x3d'"+(a||"popup")+"' display-type\x3d'"+(g||
"text")+"' data-prop\x3d'"+b+"' data-title\x3d'"+d+"' class\x3d'editable'  href\x3d'#'\x3e"+this[b]+"\x3c/a\x3e"},makeEditable:function(b,c,g,d,a){return"\x3ca data-value\x3d'"+this[b]+"' tabIndex\x3d'-1' pos\x3d'"+c+"' display-mode\x3d'"+(a||"popup")+"' display-type\x3d'"+(g||"text")+"' data-prop\x3d'"+b+"' data-title\x3d'"+d+"' class\x3d'editable'  href\x3d'#'\x3e"+this[b]+"\x3c/a\x3e"},canMove:function(b,c){b=b||this;if(!b)return!1;var g=b.getParent(),d=null;if(g){d=g[g._getContainer(b)];if(!d||
2>d.length||!this.containsItem(d,b))return!1;b=this.indexOf(d,b);if(0>b+c||!d[b+c])return!1}else return d=this._store.storage.fullData,null!=this.next(d,c);return!0},move:function(b,c){b=b||this;if(!b)return!1;var g=b.getParent(),d=null,a=b._store;if(g){d=g[g._getContainer(b)];if(!d||2>d.length||!this.containsItem(d,b))return!1;g=this.indexOf(d,b);if(0>g+c)return!1;a=d[g+c];if(!a)return!1;d[g+c]=b;d[g]=a}else{var e=function(a,b,c){var g=a.indexOf(b,a),d=b[g+c*k];if(d){if(!d.parentId&&d.group&&d.group===
a.group)return h=g+c*k,d;k++;return e(a,b,c)}return null};a&&b.group&&(d=a.storage.fullData);var h=0,k=1,g=this.indexOf(d,b);if(0>g+c)return!1;c=e(b,d,c);if(!c)return!1;d[h]=b;d[g]=c;a._reindex()}return!0},onActivity:function(b,c,g,d){d=d||{};d.target=b;this._emit(g,d,b);this.publish(g,d,b)},onRun:function(b,c,g){var d=c&&c.highlight;if(b&&d)this.onActivity(b,c,k.EVENTS.ON_RUN_BLOCK,g);this._statusIcon="text-info fa-spinner fa-spin"},onFailed:function(b,c,g){var d=c&&c.highlight;if(b&&d)this.onActivity(b,
c,k.EVENTS.ON_RUN_BLOCK_FAILED,g);this._statusIcon="text-danger fa-exclamation"},onSuccess:function(b,c,g){var d=c&&c.highlight;if(b&&d)this.onActivity(b,c,k.EVENTS.ON_RUN_BLOCK_SUCCESS,g);this._statusIcon="text-success fa-check"},canDisable:function(){return!0},getDefaultFields:function(b,c,g){c=[];this.canDisable&&!1!==this.canDisable()&&c.push(m.createCI("enabled",0,this.enabled,{group:"General",title:"Enabled",dst:"enabled",actionTarget:"value",order:210}));c.push(m.createCI("description",26,
this.description,{group:"Description",title:"Description",dst:"description",useACE:!1}));!1!==b&&c.push(m.createCI("icon",17,this.icon,{group:"General",title:"Icon",dst:"icon",useACE:!1,order:206}));!1!==g&&c.push(m.createCI("outlet",5,this.outlet,{group:"Special",title:"Type",dst:"outlet",order:205,data:[{value:1,label:"Progress",title:"Executed when progress"},{value:2,label:"Error",title:"Executed when errors"},{value:4,label:"Paused",title:"Executed when paused"},{value:8,label:"Finish",title:"Executed when finish"},
{value:16,label:"Stopped",title:"Executed when stopped"}],widget:{hex:!0}}));this.sharable&&c.push(m.createCI("enabled",13,this.shareTitle,{group:"Share",title:"Title",dst:"shareTitle",toolTip:"Enter an unique name to share this block!"}));return c},getFields:function(){return this.getDefaultFields()},toFriendlyName:function(b){for(var c="[](){}".split(""),g=0;g<c.length;g++)b=b.replace(c[g],"");b=m.replaceAll("\x3d\x3d"," equals ",b);b=m.replaceAll("\x3c"," is less than ",b);b=m.replaceAll("\x3d\x3c",
" is less than ",b);b=m.replaceAll("\x3e"," is greater than ",b);b=m.replaceAll("\x3e\x3d"," is greater than ",b);return b=m.replaceAll("'","",b)},getIconClass:function(){return this.icon},getBlockIcon:function(b){return 1==this.renderBlockIcon?'\x3cspan class\x3d"xBloxIcon '+this.icon+'"\x3e'+(b||"")+"\x3c/span\x3e":""},onFieldsRendered:function(b,c){},onChangeField:function(b,c){"enabled"==b&&(1==c?this.activate():this.deactivate())},destroy:function(){this.setStatusClass(this.getScope().id,null)}})})},
"xideve/manager/WidgetManagerJS":function(){define(["dcl/dcl","xide/types","xide/utils","xide/views/CIActionDialog"],function(n,m,k,h){return n(null,{declaredClass:"xideve/manager/WidgetManagerJS",onReloaded:function(){console.error("reloadex2:")},onModifiedJS:function(d){},_createView:function(d,b){var c=this,g=b.target||null,p=b.widget?b.target.getContext():null,a=p?p.getGlobal():null;(new h({title:"Javascript",style:"width:800px;min-height:600px;",resizeable:!0,delegate:{onOk:function(a,g){a=k.getCIInputValueByName(g,
"Expression");p.editor.setDirty(!0);b.widget.set?b.widget.set("value",a):null!=b.widget.value&&(b.widget.value=a,b.widget.owner._onChange({target:b.widget.pageIndex}));c.onModifiedJS(a,b)}},cis:[k.createCI("Settings",m.ECIType.STRING,d,{group:"Settings"}),k.createCI("Expression",m.ECIType.EXPRESSION_EDITOR,d,{group:"Script",delegate:{runExpression:function(b,c,d){var e=null;if(a.runx)try{e=a.runx(g,b)}catch(r){if(d){d(""+r);return}}else e=a.eval.call(g,b);c&&c("Expression "+b+" evaluates to; "+e)}}})]})).show()},
openJSWizard:function(d){this._createView(d.value,d)},onJavascript:function(d){var b=d.row.widget,c="";b||(b=dijit.byId(d.row.id))&&(c=b.get("value"));!b&&(b=dojo.byId(d.row.id))&&(c=b.value);this.openJSWizard({owner:this,delegate:this,widget:b,value:c,target:d.widget,meta:{context:d}})}})})},"xwire/Binding":function(){define(["dcl/dcl","xwire/_Base"],function(n,m){return n(m,{declaredClass:"xwire.Binding",source:null,target:null,accept:null,transform:null,destroy:function(){this.source&&this.source.destroy();
this.target&&this.target.destroy();delete this.transform;delete this.accept},trigger:function(k){this.target&&this.target.run(k)},start:function(){this.source&&(this.source.binding=this,this.source.start());this.target&&(this.target.binding=this,this.target.start())}})})},"davinci/model/resource/File":function(){define("dojo/_base/declare davinci/Runtime davinci/model/resource/Resource davinci/model/resource/Marker davinci/ve/utils/URLRewrite xide/utils".split(" "),function(n,m,k,h,d,b){return n("davinci.model.resource.File",
k,{serviceClass:"XIDE_Directory_Service",mount:"/ws/",getMountPoint:function(){return this.mount},constructor:function(b,g){this.elementType="File";this.name=b;this.parent=g;this.markers=[];this.extension=b.substr(b.lastIndexOf(".")+1)},getExtension:function(){return this.extension},clearMarkers:function(){this.markers=[]},addMarker:function(b,g,d){this.markers.push(new h(this,b,g,d))},getMarkers:function(b){var c=[];if(this.markers)for(var d=0;d<this.markers.length;d++){var a=this.markers[d];b?"string"==
typeof b?a.type==b&&c.push(a):dojo.forEach(b,function(b){b==a.type&&c.push(a)}):c.push(a)}return c},setContents:function(b,g){this.isNew&&!g&&(this.isNew=!1);var c=(g=!1,""),a=encodeURI(this.getPath()+c);return this.serviceObject[this.serviceClass].set(this.getMountPoint(),a,b).then(function(a){this.dirtyResource=g;dojo.publish("/davinci/resource/resourceChanged",["modified",this]);return this}.bind(this),function(b){console.error("An error occurred: davinci.model.resource.File.prototype.setContents "+
b+" : "+a);return b})},getContentSync:function(){return m.serverJSONRequest({url:d.encodeURI(this.getURL()),handleAs:"text",sync:!0})},getContent:function(){return this.serviceObject[this.serviceClass].get(b.buildPath(this.getMountPoint(),encodeURI(this.getPath())),!1,!1)},removeWorkingCopy:function(){m.serverJSONRequest({url:m.cmdOffset+"cmd/removeWorkingCopy",handleAs:"text",content:{path:this.getPath()},sync:!0});this.isNew&&this.deleteResource(!0)}})})},"xide/widgets/Reference":function(){define("dcl/dcl dojo/_base/declare dojo/_base/lang dojo/_base/connect xide/widgets/WidgetBase xide/widgets/FlagsWidget xide/factory xide/utils xide/types xide/views/CIActionDialog xide/form/Select".split(" "),
function(n,m,k,h,d,b,c,g,p,a,e){return n(d,{declaredClass:"xide.widgets.Reference",wContentSelectorButton:null,widgetMode:null,lastUploadedFileName:null,modeNode:null,oriPath:null,minHeight:"400px;",value:"",options:null,mode:p.WIDGET_REFERENCE_MODE.BY_ID,flagsWidget:null,filterFlags:16,pickFilterNode:null,templateString:"\x3cdiv class\x3d'widgetContainer widgetBorder widgetTable' style\x3d''\x3e\x3ctable border\x3d'0' cellpadding\x3d'5px' width\x3d'100%' \x3e\x3ctbody\x3e\x3ctr attachTo\x3d'extensionRoot'\x3e\x3ctd width\x3d'15%' class\x3d'widgetTitle'\x3e\x3cspan\x3e\x3cb\x3e${!title}\x3c/b\x3e\x3cspan\x3e\x3c/td\x3e\x3ctd width\x3d'100px' class\x3d'widgetValue2' valign\x3d'middle' attachTo\x3d'previewNode'\x3e\x3c/td\x3e\x3ctd class\x3d'extension' width\x3d'25px' attachTo\x3d'button0'\x3e\x3c/td\x3e\x3ctd class\x3d'extension' width\x3d'25px' attachTo\x3d'button1'\x3e\x3c/td\x3e\x3ctd class\x3d'extension' width\x3d'25px' attachTo\x3d'button2'\x3e\x3c/td\x3e\x3c/tr\x3e\x3ctr attachTo\x3d'extensionRoot2'\x3e\x3ctd width\x3d'15%' class\x3d'widgetTitle'\x3e\x3cspan\x3e\x3cb\x3ePick Filter\x3c/b\x3e\x3cspan\x3e\x3c/td\x3e\x3ctd width\x3d'100px' class\x3d'widgetValue2' valign\x3d'middle' attachTo\x3d'pickFilterNode'\x3e\x3c/td\x3e\x3ctd class\x3d'extension' width\x3d'25px' attachTo\x3d'button0'\x3e\x3c/td\x3e\x3ctd class\x3d'extension' width\x3d'25px' attachTo\x3d'button1'\x3e\x3c/td\x3e\x3ctd class\x3d'extension' width\x3d'25px' attachTo\x3d'button2'\x3e\x3c/td\x3e\x3c/tr\x3e\x3ctr attachTo\x3d'extensionRoot2'\x3e\x3ctd width\x3d'15%' class\x3d'widgetTitle'\x3e\x3cspan\x3e\x3cb\x3eMode\x3c/b\x3e\x3cspan\x3e\x3c/td\x3e\x3ctd width\x3d'100px' class\x3d'widgetValue2' valign\x3d'middle' attachTo\x3d'modeNode'\x3e\x3c/td\x3e\x3ctd class\x3d'extension' width\x3d'25px' attachTo\x3d'button0'\x3e\x3c/td\x3e\x3ctd class\x3d'extension' width\x3d'25px' attachTo\x3d'button1'\x3e\x3c/td\x3e\x3ctd class\x3d'extension' width\x3d'25px' attachTo\x3d'button2'\x3e\x3c/td\x3e\x3c/tr\x3e\x3c/tbody\x3e\x3c/table\x3e\x3cdiv attachTo\x3d'expander' onclick\x3d'' style\x3d'width:100%;'\x3e\x3c/div\x3e\x3cdiv attachTo\x3d'last'\x3e\x3c/div\x3e\x3c/div\x3e",
filePathValidator:function(a,b){return!0},postMixInProperties:function(){this.userData&&this.userData.title&&(this.title=this.userData.title);if(this.userData&&!0===this.userData.vertical||!0===this.vertical)this.templateString="\x3cdiv class\x3d'widgetContainer widgetBorder widgetTable' style\x3d''\x3e\x3ctable border\x3d'0' cellpadding\x3d'5px' width\x3d'100%' \x3e\x3ctbody\x3e\x3ctr attachTo\x3d'extensionRoot'\x3e\x3ctd width\x3d'100%' class\x3d'widgetTitle'\x3e\x3cspan\x3e\x3cb\x3e${!title}\x3c/b\x3e\x3cspan\x3e\x3c/td\x3e\x3c/tr\x3e\x3ctr attachTo\x3d'extensionRoot'\x3e\x3ctd width\x3d'100px' class\x3d'widgetValue2' valign\x3d'middle' attachTo\x3d'previewNode'\x3e\x3c/td\x3e\x3ctd class\x3d'extension' width\x3d'25px' attachTo\x3d'button0'\x3e\x3c/td\x3e\x3ctd class\x3d'extension' width\x3d'25px' attachTo\x3d'button1'\x3e\x3c/td\x3e\x3ctd class\x3d'extension' width\x3d'25px' attachTo\x3d'button2'\x3e\x3c/td\x3e\x3c/tr\x3e\x3ctr attachTo\x3d'extensionRoot'\x3e\x3ctd width\x3d'100%' class\x3d'widgetTitle'\x3e\x3cspan\x3e\x3cb\x3ePick Filter\x3c/b\x3e\x3cspan\x3e\x3c/td\x3e\x3c/tr\x3e\x3ctr attachTo\x3d'extensionRoot2'\x3e\x3ctd width\x3d'100px' class\x3d'widgetValue2' valign\x3d'middle' attachTo\x3d'pickFilterNode'\x3e\x3c/td\x3e\x3ctd class\x3d'extension' width\x3d'25px' \x3e\x3c/td\x3e\x3ctd class\x3d'extension' width\x3d'25px' \x3e\x3c/td\x3e\x3ctd class\x3d'extension' width\x3d'25px' \x3e\x3c/td\x3e\x3c/tr\x3e\x3ctr attachTo\x3d'extensionRoot'\x3e\x3ctd width\x3d'100%' class\x3d'widgetTitle'\x3e\x3cspan\x3e\x3cb\x3eMode\x3c/b\x3e\x3cspan\x3e\x3c/td\x3e\x3c/tr\x3e\x3ctr attachTo\x3d'extensionRoot2'\x3e\x3ctd width\x3d'100px' class\x3d'widgetValue2' valign\x3d'middle' attachTo\x3d'modeNode'\x3e\x3c/td\x3e\x3ctd class\x3d'extension' width\x3d'25px' \x3e\x3c/td\x3e\x3ctd class\x3d'extension' width\x3d'25px' \x3e\x3c/td\x3e\x3ctd class\x3d'extension' width\x3d'25px' \x3e\x3c/td\x3e\x3c/tr\x3e\x3c/tbody\x3e\x3c/table\x3e\x3cdiv attachTo\x3d'expander' onclick\x3d'' style\x3d'width:100%;'\x3e\x3c/div\x3e\x3cdiv attachTo\x3d'last'\x3e\x3c/div\x3e\x3c/div\x3e"},
onFileSelected:function(a){this.editBox.set("value",a);this.value=a;this.setValue(a)},onSelect:function(){var b=this,c={};this.options&&k.mixin(c,this.options);try{var e=g.toString(this.userData.value);(new a({title:"Widget",style:"width:600px;height:500px;",resizeable:!0,delegate:{onOk:function(a,c){a=g.getCIInputValueByName(c,"Expression");b.userData.changed=!0;b.userData.active=!0;g.setCIValueByField(b.userData,"value",a);b.editBox.set("value",a)}},cis:[g.createCI("Expression",29,e,{group:"Expression",
delegate:this.userData.delegate})]})).show()}catch(r){debugger}},onModeChanged:function(a){this.mode=a},serialize:function(){var a={reference:this.editBox.get("value"),mode:this.mode};return JSON.stringify(a)},addModeSelector:function(){this.widgetMode=g.addWidget(e,{userData:{value:this.mode},options:[{label:"By Id",value:"byid",selected:"byid"==this.mode},{label:"By Declared Class",value:"byclass",selected:"byclass"==this.mode},{label:"By CSS Query",value:"bycss",selected:"bycss"==this.mode},{label:"By Expression",
value:"byexpression",selected:"byexpression"==this.mode}]},this,this.modeNode,!0);var a=this;this.add(this.widgetMode);this.widgetMode._on("change",function(b){a.onModeChanged(b);a.setValue(a.serialize())})},onPickFilterChanged:function(a){this.allowHTMLNodes=4==a;this.allowWidgets=16==a},addPickFilter:function(){var a=this,c=g.addWidget(b,{value:16,data:[{value:2,label:"HTML"},{value:4,label:"Widgets"}],lineBreak:!1,title:"",single:!0,flagClass:"flagItem",style:"display:inline-block;width:auto;",
onFlagChanged:function(b){a.onPickFilterChanged(b)},_onFlagChange2:function(b){return a.onPickFilterChanged(b)},isChecked2:function(a,b){return!0},setValue:function(b){a.filterFlags=b},getValue:function(){return a.filterFlags}},a,this.pickFilterNode,!0,"ui-widget-content");c.startup();return this.flagsWidget=c},fillTemplate:function(){if(!this.editBox){var a=this,b=g.toString(this.userData.value);if(b){var e=g.fromJson(b);e&&(this.mode=e.mode,b=e.reference)}this.editBox=c.createValidationTextBox(this.previewNode,
"","",b,null,this.delegate,"Not a path!","I need some input");this.connectEditBox(this.editBox,function(b){a.setValue(a.serialize())});this.selectButton=c.createButton(this.button0,"fa-eyedropper","elusiveButton","","",this.onPick,this);this.addPickFilter();this.addModeSelector()}},startup:function(){this.fillTemplate();this.onReady()}})})},"davinci/html/ui/HTMLOutlineModel":function(){define(["dojo/_base/declare"],function(n){return n("davinci.html.ui.HTMLOutlineModel",null,{constructor:function(m){this.root=
m;this.subscription=dojo.subscribe("/davinci/ui/modelChanged",this,this._modelChanged)},getRoot:function(m,k){m(this.root)},getIdentity:function(m){return m.getID()},getLabel:function(m){return m.getLabel().replace("\x3c","\x26lt")},_getChildren:function(m){var k=[];"HTMLFile"!=m.elementType&&"HTMLElement"!=m.elementType||dojo.forEach(m.children,function(h){"HTMLElement"==h.elementType&&k.push(h)});return k},mayHaveChildren:function(m){return 0<m.children.length},getChildren:function(m,k,h){k(this._getChildren(m))},
_modelChanged:function(){this.onChildrenChange(this.root,this._getChildren(this.root))},destroy:function(){dojo.unsubscribe(this.subscription)}})})},"xblox/model/server/RunServerMethod":function(){define(["dcl/dcl","xblox/model/server/ServerBlock","xide/utils"],function(n,m,k){return n(m,{declaredClass:"xblox.model.server.RunServerMethod",description:"Runs a JSON-RPC-2.0 method on the server",name:"Run Server Method",method:"XShell::run",args:"",deferred:!0,defaultServiceClass:"XShell",defaultServiceMethod:"run",
sharable:!0,onMethodChanged:function(h,d){this.method=h;k.isValidString(this.args)||(h=this.getServerParams())&&this._updateArgs(h,d)},_getArgs:function(){var h=k.getJson(this.args||"[]"),d=[];if(h){var b=!1;h&&h[0]&&null!=h[0].optional&&(b=!0);if(b)for(b=0;b<h.length;b++){var c=h[b],g=c.value;-1!=c.name.indexOf("Base64")&&(g=this.getService().base64_encode(g));"notset"!==c.value?-1!=c.value.indexOf("[")&&-1!=c.value.indexOf("]")?(g=this.scope.expressionModel.replaceVariables(this.scope,c.value,!1,
!1),-1!=c.name.indexOf("Base64")&&(g=this.getService().base64_encode(g)),d.push(g)):d.push(g||c["default"]):d.push(c["default"]||g)}}else return[this.args];return d},_updateArgs:function(h,d){if(d=this.utils.getCIWidgetByName(d,"args"))h=JSON.stringify(h),d.editBox.set("value",h),this.args=h},getServerParams:function(){var h=this.getService().getParameterMap(this.getServiceClass(),this.getServiceMethod());if(h)for(var d=0;d<h.length;d++)h[d].value="notset";return h},onReloaded:function(h){this._solve()},
_solve:function(h,d,b,c){},solve:function(h,d,b,c){this._return=[];this._lastResult=null;h=[];if(!this.isInValidState())return this.onFailed(this,d),h;h=this._getArgs();this.onRun(this,d);this.getService();d=this.scope.serviceObject;console.error("run deferred");(d=d.runDeferred(this.getServiceClass(),this.getServiceMethod(),h))&&d.then(function(b){console.error("returned ",b)});return d},toText:function(){var h=this.getBlockIcon()+" "+this.name+" :: ";this.method&&(h+=this.method.substr(0,50));return h},
canAdd:function(){return[]},getFields:function(){var h=this.inherited(arguments)||this.getDefaultFields(),d=this;h.push(k.createCI("value",25,this.method,{group:"General",title:"Method",dst:"method",description:"This should be in the format : MyServerClass::myMethod",delegate:{runExpression:function(b,c,g){d.method=b;d.solve(d.scope,null,c,g)}}}));return h=h.concat(this.getServerDefaultFields())},getBlockIcon:function(){return'\x3cspan class\x3d"fa-plug"\x3e\x3c/span\x3e'},mayHaveChildren:function(h){return null!=
this.items&&0<this.items.length},getChildren:function(h){return this.items},onChangeField:function(h,d,b){if("method"===h)this.onMethodChanged(d,b)},isInValidState:function(){return null!=this.getService()},getService:function(){var h=this.scope.getService();h||console.error("have no service object");return h},getServiceClass:function(){return this.method.split("::")[0]||this.defaultServiceClass},getServiceMethod:function(){return this.method.split("::")[1]||this.defaultServiceMethod},hasMethod:function(h){return this.isInValidState()&&
null!=this.getService()[this.getServiceClass()]&&null!=this.getService()[this.getServiceClass()][this.getServiceMethod()]},hasServerClass:function(h){return this.isInValidState()&&null!=this.getService()[this.getServiceClass()]},getServerFunction:function(){return this.isInValidState()&&this.getServiceClass()&&this.getServiceMethod()?this.getService()[this.getServiceClass()][this.getServiceMethod()]:null}})})},"dijit/form/_ButtonMixin":function(){define(["dojo/_base/declare","dojo/dom","dojo/has",
"../registry"],function(n,m,k,h){return n("dijit.form._ButtonMixin",null,{label:"",type:"button",__onClick:function(d){d.stopPropagation();d.preventDefault();this.disabled||this.valueNode.click(d);return!1},_onClick:function(d){if(this.disabled)return d.stopPropagation(),d.preventDefault(),!1;!1===this.onClick(d)&&d.preventDefault();var b=d.defaultPrevented;if(!b&&"submit"==this.type&&!(this.valueNode||this.focusNode).form)for(var c=this.domNode;c.parentNode;c=c.parentNode){var g=h.byNode(c);if(g&&
"function"==typeof g._onSubmit){g._onSubmit(d);d.preventDefault();b=!0;break}}return!b},postCreate:function(){this.inherited(arguments);m.setSelectable(this.focusNode,!1)},onClick:function(){return!0},_setLabelAttr:function(d){this._set("label",d);(this.containerNode||this.focusNode).innerHTML=d}})})},"davinci/ui/Resource":function(){define("system/resource ../model/Path ../Runtime ../Workbench ../workbench/Preferences ../ve/RebuildPage".split(" "),function(n,m,k,h,d){return dojo.setObject("davinci.ui.Resource",
{newHTMLDialogSpecificClass:"davinci/ui/widgets/NewHTMLFileOptions",newHTMLMobile:function(){},newHTMLDesktop:function(){},newHTMLSketchHiFi:function(){},newHTMLSketchLoFi:function(){},newHTML:function(b){},newCSS:function(){},selectResource:function(b){for(var c=dijit.byId("resourceTree"),g=[];b.parent;b=b.parent)g.unshift(b);c.set("path",g)},newFolder:function(b,c){},closeEditor:function(b,c){},save:function(){var b=h.getOpenEditor();b&&system.resource.findResourceAsync(b.fileName).then(dojo.hitch(this,
function(c){c.readOnly()?this.saveAs(c.getExtension(),"save"):b.save()}))},saveAs:function(b,c){},newJS:function(){},openFile:function(){},addFiles:function(){},addFilesZip:function(){},getNewFileName:function(b,c,g){var d,a,e=0;g||(g="");do e++,a="folder"===b?"folder"+e:"file"+e+g,d=c.getPath()+"/"+a,d=n.findResource(d);while(d);return a},canModify:function(b){return!b.readOnly()},newProject:function(){},renameAction:function(){},getResourceIcon:function(b,c){},getResourceClass:function(b){if(b.readOnly())return"readOnlyResource"},
deleteAction:function(){},getSelectedResources:function(){var b=k.getSelection();if(b[0]&&b[0].resource)return dojo.map(b,function(b){return b.resource})},alphabeticalSortFilter:{filterList:function(b){return b.sort(function(b,g){return b.name>g.name?1:b.name<g.name?-1:0})}},foldersFilter:{filterItem:function(b){if("File"==b.elementType)return!0}},openPath:function(b,c){},openResource:function(b,c){}})})},"xide/factory/Views":function(){define(["xide/factory","xide/utils","xide/types"],function(n,
m,k,h){n.createPane=function(d,b,c,g,h,a,e){};n.showStandBy=function(d){var b=document.getElementById("loadingWrapper");b&&(b.style.display=d?"inline-block":"none");return null};n.createTabbedSettingsView=function(d,b,c){var g=new xide.layout.TabContainer({tabStrip:!0,tabPosition:"left-h",splitter:!0,style:"min-width:450px;",className:"ui-widget-content"});b.domNode.appendChild(g.domNode);g.startup();b={};var p=[];c&&(c=b[k.WidgetGroup.All],null==c&&(c=new h({title:"All",style:"padding:5px;",closeable:!1}),
b[k.WidgetGroup.All]=c,c.startup(),g.addChild(c)));c=null;for(var a=0;a<d.length;a++){c=d[a];var e=m.toString(c.group)||null;"-1"===e&&(e=null);if(null==e){c=m.getWidgetGroup(c);if(c==k.WidgetGroup.Hidden)continue;e=m.getWidgetGroupTitle(c)}else c=e;var q=b[c];null==q&&(p.push(c),q=new h({title:e,preload:!1,closeable:!1,adjustChildsToWidth:!0}),b[c]=q)}p.sort(function(a,b){return a-b});for(d=0;d<p.length;d++)if(c=p[d],c=b[c])c.startup(),g.addChild(c);g.widgetTabMap=b;return g}})},"dijit/focus":function(){define("dojo/aspect dojo/_base/declare dojo/dom dojo/dom-attr dojo/dom-class dojo/dom-construct dojo/Evented dojo/_base/lang dojo/on dojo/domReady dojo/sniff dojo/Stateful dojo/_base/window dojo/window ./a11y ./registry ./main".split(" "),
function(n,m,k,h,d,b,c,g,p,a,e,q,u,w,r,v,x){var A,z,y=new (m([q,c],{curNode:null,activeStack:[],constructor:function(){var a=g.hitch(this,function(a){k.isDescendant(this.curNode,a)&&this.set("curNode",null);k.isDescendant(this.prevNode,a)&&this.set("prevNode",null)});n.before(b,"empty",a);n.before(b,"destroy",a)},registerIframe:function(a){return this.registerWin(a.contentWindow,a)},registerWin:function(a,b){var c=this,g=a.document&&a.document.body;if(g){var d=e("pointer-events")?"pointerdown":e("MSPointer")?
"MSPointerDown":e("touch-events")?"mousedown, touchstart":"mousedown",h=p(a.document,d,function(a){a&&a.target&&null==a.target.parentNode||c._onTouchNode(b||a.target,"mouse")}),k=p(g,"focusin",function(a){if(a.target.tagName){var e=a.target.tagName.toLowerCase();"#document"!=e&&"body"!=e&&(r.isFocusable(a.target)?c._onFocusNode(b||a.target):c._onTouchNode(b||a.target))}}),q=p(g,"focusout",function(a){c._onBlurNode(b||a.target)});return{remove:function(){h.remove();k.remove();q.remove();g=h=k=q=null}}}},
_onBlurNode:function(a){a=(new Date).getTime();a<A+100||(this._clearFocusTimer&&clearTimeout(this._clearFocusTimer),this._clearFocusTimer=setTimeout(g.hitch(this,function(){this.set("prevNode",this.curNode);this.set("curNode",null)}),0),this._clearActiveWidgetsTimer&&clearTimeout(this._clearActiveWidgetsTimer),a<z+100||(this._clearActiveWidgetsTimer=setTimeout(g.hitch(this,function(){delete this._clearActiveWidgetsTimer;this._setStack([])}),0)))},_onTouchNode:function(a,b){z=(new Date).getTime();
this._clearActiveWidgetsTimer&&(clearTimeout(this._clearActiveWidgetsTimer),delete this._clearActiveWidgetsTimer);d.contains(a,"dijitPopup")&&(a=a.firstChild);var c=[];try{for(;a;){var e=h.get(a,"dijitPopupParent");if(e)a=v.byId(e).domNode;else if(a.tagName&&"body"==a.tagName.toLowerCase()){if(a===u.body())break;a=w.get(a.ownerDocument).frameElement}else{var g=a.getAttribute&&a.getAttribute("widgetId"),k=g&&v.byId(g);!k||"mouse"==b&&k.get("disabled")||c.unshift(g);a=a.parentNode}}}catch(J){}this._setStack(c,
b)},_onFocusNode:function(a){a&&9!=a.nodeType&&(A=(new Date).getTime(),this._clearFocusTimer&&(clearTimeout(this._clearFocusTimer),delete this._clearFocusTimer),this._onTouchNode(a),a!=this.curNode&&(this.set("prevNode",this.curNode),this.set("curNode",a)))},_setStack:function(a,b){var c=this.activeStack,e=c.length-1,g=a.length-1;if(a[g]!=c[e]){this.set("activeStack",a);var d;for(d=e;0<=d&&c[d]!=a[d];d--)if(e=v.byId(c[d]))e._hasBeenBlurred=!0,e.set("focused",!1),e._focusManager==this&&e._onBlur(b),
this.emit("widget-blur",e,b);for(d++;d<=g;d++)if(e=v.byId(a[d]))e.set("focused",!0),e._focusManager==this&&e._onFocus(b),this.emit("widget-focus",e,b)}},focus:function(a){if(a)try{a.focus()}catch(E){}}}));a(function(){var a=y.registerWin(w.get(document));e("ie")&&p(window,"unload",function(){a&&(a.remove(),a=null)})});x.focus=function(a){y.focus(a)};for(var B in y)/^_/.test(B)||(x.focus[B]="function"==typeof y[B]?g.hitch(y,B):y[B]);y.watch(function(a,b,c){x.focus[a]=c});return y})},"xlog/manager/LogManager":function(){define("dcl/dcl xdojo/declare xide/manager/ServerActionBase xide/manager/BeanManager xide/encoding/MD5 xide/types xide/utils dojo/cookie dojo/json dojo/Deferred xide/data/Memory xide/mixins/EventedMixin".split(" "),
function(n,m,k,h,d,b,c,g,p,a,e,q){var u=m([q],{bytesLoaded:null,percentValue:null,item:null,delegate:null,_onEnd:null,_onHandle:null,serviceClass:"XIDE_Log_Service",constructor:function(a){this.item=a;this.subscribe(a.progressMessage,this._onProgress);this.subscribe(a.progressFailedMessage,this._onProgressFailed)},_onProgressFailed:function(a){this.item.level="error";this.item.message=this.item.oriMessage+" : Failed";this.item._isTerminated=!0;a&&a.item&&a.item.error&&this.item.details&&(this.item.details.error=
a.item.error)},_onFinish:function(){this._onHandle&&this._onHandle.remove()},_onProgress:function(a){try{var b=a.progress;a=null;null==a&&(a=Math.round(100*b.loaded/b.total),this.bytesLoaded=b.loaded);this.percentValue!=a&&(this.item.message=""+(""+this.item.oriMessage+(" : "+a+"%")));this.percentValue=a;this._emit("progress");100<=this.percentValue&&(this.item.message=this.item.oriMessage+" : Done",this._emit("finish"),this._onFinish(),this.destroy())}catch(v){console.error("crash in log progress "+
v)}}});return n([k,h],{declaredClass:"xcf.manager.LogManager",serviceClass:"XIDE_Log_Service",cookiePrefix:"logging",singleton:!0,serviceView:null,clients:null,beanNamespace:"logging",views:null,stores:{},removeStore:function(a){var b=this.stores[a];b&&(b.destroy&&b.destroy(),delete this.stores[a])},getViewId:function(a){return this.beanNamespace+d(JSON.stringify({info:a.info}),1)},loadPreferences:function(){var a=g(this.cookiePrefix+"_debug_settings");return a=a?p.parse(a):{}},savePreferences:function(a){g(this.cookiePrefix+
"_debug_settings",p.stringify(a))},empty:function(a){this.clear(a);a=this.getStore(a);a.then&&a.then(function(a){a.setData([])})},clear:function(a){return this.runDeferred(null,"clearAbs",[a||""]).then(function(a){})},getViewTarget:function(){return this.ctx.getApplication().mainView.getNewAlternateTarget()},getStore:function(b){if(!b)return this.store;var e=new a;if(this.stores[b])return e.resolve(this.stores[b]),e;var g=this;this.runDeferred(null,"lsAbs",[b||""]).then(function(a){_.isString(a)&&
(a=c.getJson(a));a=g.initStore(a);g.stores[b]=a;e.resolve(a)});return e},isValid:function(){return null!=this.store},_buildLoggingMessage:function(a){var b={id:c.createUUID(),level:a.level,message:a.message,host:"",data:a.data||{},time:a.time||(new Date).getTime(),type:"",show:!0,showDevice:!0};a.type&&(b.type=a.type);a.device&&a.device.host&&(b.host=a.device.host+":"+a.device.port);a.deviceMessage&&(b.message=b.message+":"+a.deviceMessage);b.ori=a;return b},initStore:function(a){var b={identifier:"time",
label:"level",items:[],sort:"time"};0==a.length&&(a=[]);for(var g=0;g<a.length;g++)b.items.push(this._buildLoggingMessage(a[g]));return new (m("LogStore",[e],{}))({idProperty:"time",data:b,id:c.createUUID()})},createLoggingView:function(a,b,e){b=b||this.getViewTarget();return c.addWidget(!1,{delegate:this,store:a,title:"Log",closable:!0,style:"padding:0px",silent:e},this,b,!0)},updateViews:function(a,b){for(var c=0;c<this.views.length;c++)this.views[c].update(a,b)},refreshViews:function(){for(var a=
0;a<this.views.length;a++)this.views[a].grid.refresh()},addLogView:function(a){this.views.push(a)},openLogView:function(a,b){this.isValid()||this.initStore([]);a=this.createLoggingView(this.store,a,b);this.views.push(a);return a},_createPendingEvent:function(a,b,c,e){function g(a){!b._isTerminated&&d&&(b.message=b.oriMessage+" : Done",a&&!0===a.failed&&(b.level="error",b.message=b.oriMessage+" : Failed"),b._isTerminated=!0,d.remove(),d=null,h.refreshViews(),b.progressHandler&&b.progressHandler.destroy())}
var d=null,h=this;b._isInProgress=!0;d=h.subscribe(c,g,h)[0];b.showProgress&&b.progressMessage&&!b.progressHandler&&(a=new u(b,this),a._onEnd=g,a._onEndHandle=d,b.progressHandler=a)},addLoggingMessage:function(a){if(a&&a.data){var b=a.data.logId;!b&&a.data&&a.data.device&&(b=a.data.device,b=b.host+"_"+b.port+"_"+b.protocol)}var e={id:c.createUUID(),level:a.level,message:a.message,host:a.host||"",data:a.data||{},time:a.time||(new Date).getTime(),type:a.type||"",show:!0,showDevice:!0,terminatorItem:a.item,
terminatorMessage:a.terminatorMessage,showProgress:a.showProgress,progressMessage:a.progressMessage,progressFailedMessage:a.progressFailedMessage,details:a.details};a.data&&(a.data.type&&(e.type=a.data.type),a.data.device&&a.data.device.host&&(e.host=a.data.device.host+":"+a.data.device.port),a.data.deviceMessage&&(e.message=e.message+":"+a.data.deviceMessage));try{null==e.terminatorMessage||e._isTerminated||(null==e.oriMessage&&(e.oriMessage=""+e.message),this._createPendingEvent(e.oriMessage,e,
e.terminatorMessage,e.time));var g=this.getStore(b);g&&(g.then?g.then(function(a){g=a;e=a.putSync(e);a._emit("added",{item:e,store:g})}):(e=g.putSync(e),g._emit("added",{item:e,store:g})))}catch(A){console.error("adding log message to store failed "+A)}},onServerLogMessage:function(a){a.data&&a.data.time&&(a.time=a.data.time);this.addLoggingMessage(a);!0===a.write&&this.publish(b.EVENTS.ON_CLIENT_LOG_MESSAGE,{message:a.message,data:a.data,details:a.details,level:a.level,type:a.type,time:a.data.time||
a.time})},init:function(){this.subscribe([b.EVENTS.ON_SERVER_LOG_MESSAGE]);this.views=[];this.stores={}},onStoreReloaded:function(){for(var a=0;a<this.views.length;a++){var b=this.views[a];b.reload(this.store);b.update()}},reload:function(){var a=this;this.currentItem=null;this.ls(function(b){a.onStoreReloaded(b)})},ls:function(a,b,e){var g=this;return this.callMethodEx(null,"lsAbs",[b||""],e||function(b){g.rawData=b;_.isString(b)&&(b=c.getJson(b));g.store=g.initStore(b);a&&a(b)},!0)}})})},"davinci/actions/Action":function(){define(["dojo/_base/declare"],
function(n){return n("davinci.actions.Action",null,{item:null,run:function(m){},isEnabled:function(m){return!0},getName:function(){return this.item.label}})})},"xide/editor/Base":function(){define(["dcl/dcl","xide/types","xaction/ActionProvider","xide/layout/Container","dojo/Deferred"],function(n,m,k,h,d){return n([h,k.dcl],{menuOrder:{File:110,Edit:100,View:90,Block:50,Settings:20,Navigation:10,Editor:9,Step:5,New:4,Window:3,Help:2},declaredClass:"xide/views/Editor",options:null,loadingIcon:"fa-spinner fa-spin",
iconClassNormal:"fa-code",getContent:function(b,c,g){this.storeDelegate?this.storeDelegate.getContent(function(b){c(b)},b||this.item):g&&g("Editor::getContent : Have no store delegate!")},saveContent:function(b,c,g){var d=this;this.set("iconClass","fa-spinner fa-spin");var a=b||this.get("value");if(this.storeDelegate)return this.storeDelegate.saveContent(a,function(){d.set("iconClass",d.iconClassNormal);d.lastSavedContent=a;d.onContentChange&&d.onContentChange(!1);d.publish(m.EVENTS.ON_FILE_CONTENT_CHANGED,
{item:d.item,content:a,editor:d},d)},null,d.item);g&&g("Editor::saveContent : Have no store delegate!");return!1},onLoaded:function(){this.set("iconClass",this.iconClassNormal)},startup:function(){this.iconClassNormal=""+this.iconClass;this.set("iconClass","fa-spinner fa-spin");var b=this,c=this.options||{},g=this.item,h=this.ctx,a=new d;this.storeDelegate={getContent:function(a){h.getFileManager().getContent(g.mount,g.path,a)},saveContent:function(a,b,c){h.getFileManager().setContent(g.mount,g.path,
a,b)}};if(!this.item&&null==this.value)return a;null!=this.value?b.createEditor(b.options||null,this.value):this.getContent(this.item,function(a){b.set("iconClass",b.iconClassNormal);b.lastSavedContent=a;b.createEditor(b.options||c,a)},function(a){b.createEditor(b.options||null,"");logError(a,"error loading content from file")});return a}})})},"xide/mixins/PersistenceMixin":function(){define(["dcl/dcl","xdojo/declare","xide/utils","dojo/cookie"],function(n,m,k,h){var d={persistenceFunction:null,clearPreferences:function(){this.savePreferences(null,
null,!0)},getDefaultPreferences:function(){return{}},deserializePreference:function(b){return k.getJson(b)},serializePreference:function(b,c){try{return!0===c?k.stringify(b):JSON.stringify(b)}catch(g){logError(g,"error serializing preference object")}return!1},toPreferenceId:function(b){return(b||this.cookiePrefix||"")+"_ace"},getPreferencePersistence:function(b,c,g){return this.persistenceFunction||g||h},loadPreferences:function(b,c){c=c||this.toPreferenceId();var g=this.getPreferencePersistence(),
d=null;try{d=this.deserializePreference(g.apply(this,[c]))}catch(a){return logError(a,"error loading preferences, loading defaults"),this.getDefaultPreferences()||b}return d||b},savePreferences:function(b,c,g,d){d=d||this.toPreferenceId();b=b||!0!==g?b:this.getDefaultPreferences();return this.getPreferencePersistence().apply(c||this,[d,this.serializePreference(b),{expires:100}])}};m=m("xide.mixins.PreferenceMixin",null,d);m.dcl=n(null,d);return m})},"xide/widgets/JSONEditorWidget":function(){define("dcl/dcl dojo/_base/declare dojo/_base/connect dojo/dom-class dojo/_base/lang xide/widgets/WidgetBase xide/views/TextEditor xide/utils xide/json/JSONEditor".split(" "),
function(n,m,k,h,d,b,c,g,p){return n(b,{declaredClass:"xide.widgets.JSONEditorWidget",didLoad:!1,minHeight:"525px",editorHeight:"470px",jsonEditorHeight:"270px",aceEditorHeight:"200px",newLabel:"New Entry",newEntryTemplate:"",wNew:null,initialTemplate:[],wSaveButton:null,showACEEditor:!0,aceEditorOptions:null,aceEditor:null,aceNode:null,wBorderContainer:null,wJSONPane:null,wACEPane:null,wToAceButton:null,wFromAceButton:null,hasSave:!0,hasNew:!1,editor:null,title:"Options",templateString:"\x3cdiv class\x3d'widgetContainer widgetBorder widgetTable widget' style\x3d''\x3e\x3ctable border\x3d'0' cellpadding\x3d'5px' width\x3d'100%'\x3e\x3ctbody align\x3d'left'\x3e\x3ctr attachTo\x3d'extensionRoot' valign\x3d'middle' style\x3d'height:90%'\x3e\x3ctd attachTo\x3d'titleColumn' width\x3d'15%' class\x3d'widgetTitle'\x3e\x3cb\x3e\x3cspan attachTo\x3d'titleNode'\x3e${!title}\x3c/span\x3e\x3c/b\x3e\x3c/td\x3e\x3ctd valign\x3d'middle' class\x3d'widgetValue widget jsonEditorWidget' attachTo\x3d'valueNode' width\x3d'100px'\x3e\x3c/td\x3e\x3ctd class\x3d'extension' attachTo\x3d'previewNode'\x3e\x3c/td\x3e\x3ctd class\x3d'extension' attachTo\x3d'button0'\x3e\x3c/td\x3e\x3ctd class\x3d'extension' attachTo\x3d'button1'\x3e\x3c/td\x3e\x3c/tr\x3e\x3c/tbody\x3e\x3c/table\x3e\x3cdiv attachTo\x3d'expander' style\x3d'width:100%;'\x3e\x3c/div\x3e\x3cdiv attachTo\x3d'last'\x3e\x3c/div\x3e\x3c/div\x3e",
getValue:function(){if(this.editor){var a=this.editor.getData();return JSON.stringify(a,null,2)}return this.inherited(arguments)},setData:function(a){this.editor&&this.editor.setData(a);return this.inherited(arguments)},onSave:function(a){this.setValue(this.getValue())},startup:function(){var a=g.getJson(this.userData.value),b=g.addWidget(p,g.mixin({options:{save:!0}},this.userData.options),this,this.valueNode,!0);b.setData(a);this.editor=b;this.onReady()}})})},"dojo/selector/_loader":function(){define(["../has",
"require"],function(n,m){var k=document.createElement("div");n.add("dom-qsa2.1",!!k.querySelectorAll);n.add("dom-qsa3",function(){try{return k.innerHTML="\x3cp class\x3d'TEST'\x3e\x3c/p\x3e",1==k.querySelectorAll(".TEST:empty").length}catch(d){}});var h;return{load:function(d,b,c,g){g=m;d="default"==d?n("config-selectorEngine")||"css3":d;d="css2"==d||"lite"==d?"./lite":"css2.1"==d?n("dom-qsa2.1")?"./lite":"./acme":"css3"==d?n("dom-qsa3")?"./lite":"./acme":"acme"==d?"./acme":(g=b)&&d;if("?"==d.charAt(d.length-
1)){d=d.substring(0,d.length-1);var k=!0}if(k&&(n("dom-compliant-qsa")||h))return c(h);g([d],function(a){"./lite"!=d&&(h=a);c(a)})}}})},"davinci/ve/commands/AppStateCommand":function(){define("dojo/_base/declare dojo/_base/lang dojo/topic davinci/XPathUtils davinci/html/HtmlFileXPathAdapter davinci/ve/States".split(" "),function(n,m,k,h,d,b){return n("davinci.ve.commands.AppStateCommand",null,{name:"AppStateCommand",_actions:["add","remove","modify","reorder"],constructor:function(c){if(c){this._params=
m.mixin({},c);var g=c.stateContainerNode;g&&g._dvWidget&&(this._params.stateContainerId=g.id,this._params.stateContainerXpath=h.getXPath(g._dvWidget._srcElement,d));"reorder"==this._params.action&&((g=this._getStateContainerNode())&&c.newStatesList.length?(this._oldStatesList=b.getStates(g),this._oldStatesList.shift()):this._params=null)}},_validParams:function(){return this._params&&0<=this._actions.indexOf(this._params.action)&&this._params.stateContainerNode&&this._params.stateContainerId&&this._params.stateContainerXpath&&
this._params.context},_getStateContainerNode:function(){var b,g=this._params.context;if(!g)return b;var d=g.getDocument();if(!d)return b;var a=this._params.stateContainerXpath;b=d.getElementById(this._params.stateContainerId);b||(g=g.model.evaluate(a))&&(b=d.getElementById(g.getAttribute("id")));return b},execute:function(){if(this._validParams()){var c=this._params.action,g=this._params.state,d=this._getStateContainerNode();d&&("add"==c?(b.add(d,g),this._setStateAndFocus(d)):"remove"==c?(this._stateIndex=
d._maqAppStates&&d._maqAppStates.states&&d._maqAppStates.states.indexOf(g),this._preservedNodesId=[],this._preservedNodesXpath=[],this._preservedStateValues=[],this._preserveStateFromNodeRecursive(d,g),b.remove(d,g),this._setStateAndFocus(d)):"modify"==c?(this._params.newState&&(this._traverseRenameState(this._params.state,this._params.newState),k.publish("/davinci/states/state/renamed",{node:d,oldName:this._params.state,newName:this._params.newState,stateContainerNode:d})),"string"==typeof this._params.initialState&&
(this._oldInitialState=b.getInitial(d),c="undefined"==this._params.initialState?void 0:this._params.initialState,this._params.newState&&c==this._params.state&&(c=this._params.newState),b.setState(c,d,{initial:c,updateWhenCurrent:!0})),this._setStateAndFocus(d)):"reorder"==c&&d&&d._maqAppStates&&d._dvWidget&&(d._maqAppStates.states=this._params.newStatesList,c=b.stringifyWithQuotes(d._maqAppStates),d.setAttribute(b.APPSTATES_ATTRIBUTE,c),srcElement=d._dvWidget._srcElement,srcElement.setAttribute(b.APPSTATES_ATTRIBUTE,
c),k.publish("/davinci/states/statesReordered",[d,this._params.newStatesList])))}},undo:function(){if(this._validParams()){var c=this._params.action,g=this._params.state,d=this._getStateContainerNode();d&&("add"==c?(b.remove(d,g),this._setStateAndFocus(d)):"remove"==c?(b.add(d,g,{index:this._stateIndex}),this._restoreState(g),b.setState(g,d,{focus:!0}),this._setStateAndFocus(d)):"modify"==c?("string"==typeof this._params.initialState&&b.setState(this._oldInitialState,d,{initial:this._oldInitialState,
updateWhenCurrent:!0}),this._params.newState&&this._traverseRenameState(this._params.newState,this._params.state),this._setStateAndFocus(d)):"reorder"==c&&d&&d._maqAppStates&&d._dvWidget&&(d._maqAppStates.states=this._oldStatesList,c=b.stringifyWithQuotes(d._maqAppStates),d.setAttribute(b.APPSTATES_ATTRIBUTE,c),srcElement=d._dvWidget._srcElement,srcElement.setAttribute(b.APPSTATES_ATTRIBUTE,c),k.publish("/davinci/states/statesReordered",[d,this._params.newStatesList])))}},_setStateAndFocus:function(c){var g=
b.getState(c);b.setState(g,c,{focus:g,updateWhenCurrent:!0})},_preserveStateFromNodeRecursive:function(b,g){var c=b._dvWidget;if(b&&c&&g)for(this._preserveStateFromNode(b,g),b=c.getChildren(),c=0;c<b.length;c++)this._preserveStateFromNodeRecursive(b[c].domNode,g)},_preserveStateFromNode:function(b,g){b&&b._maqDeltas&&b._maqDeltas[g]&&b._dvWidget&&b._dvWidget._srcElement&&(this._preservedNodesId.push(b.id),this._preservedNodesXpath.push(h.getXPath(b._dvWidget._srcElement,d)),this._preservedStateValues.push(m.clone(b._maqDeltas[g])))},
_restoreState:function(c){var g=this._params.context;if(g&&this._preservedNodesId){var d=g.getDocument();if(d)for(var a=0;a<this._preservedNodesId.length;a++){var e=this._preservedNodesXpath[a],h=d.getElementById(this._preservedNodesId[a]);h||(e=g.model.evaluate(e))&&(h=d.getElementById(e.getAttribute("id")));h&&(h._maqDeltas||(h._maqDeltas={}),h._maqDeltas[c]=m.clone(this._preservedStateValues[a]),b._updateSrcState(h))}}},_traverseRenameState:function(c,g){var d=this._getStateContainerNode();if(d&&
(b.rename(d,{oldName:c,newName:g}),d=d._dvWidget&&d._dvWidget._srcElement)){var a=null,e=!1,h=/^(.*davinci.states.setState\s*\(\s*)('[^']*'|"[^"]*")([^\)]*\).*)$/,k=/^(['"])(.*)(['"])$/;d.visit({visit:dojo.hitch(this,function(b){if("HTMLElement"==b.elementType)a=b;else if("HTMLAttribute"==b.elementType){var d=b.name;if(d&&"on"==d.substr(0,2).toLowerCase()&&(b=b.value.match(h))){var q=b[2].match(k);q&&q[2]==c&&(a.setAttribute(d,b[1]+q[1]+g+q[3]+b[3]),e=!0)}}})});e&&(d=this._params&&this._params.context&&
this._params.context.editor)&&d._visualChanged()}}})})},"xide/views/CIGroupedSettingsView":function(){define(["dcl/dcl","xide/views/CIViewMixin","xide/layout/_TabContainer","xide/layout/Container"],function(n,m,k,h){return n([h,m.dcl],{declaredClass:"xide.views.CIGroupedSettingsView",style:"width: inherit;height: 100%;",currentWidget:null,allWidgets:null,cis:null,appStore:null,storeDelegate:null,storeItem:null,delegate:null,showAllTab:!1,closable:!0,tabContainerClass:k,onShow:function(){this.inherited(arguments);
this.tabContainer&&_.each(this.tabContainer.getChildren(),function(d){d.onShow()})},startup:function(){try{this.cis&&this.initWithCIS(this.cis)}catch(d){logError(d,"error rendering CIS "+d)}}})})},"xblox/model/variables/Variable":function(){define(["dcl/dcl","xide/types","xblox/model/Block"],function(n,m,k){return n(k,{declaredClass:"xblox.model.variables.Variable",name:null,value:null,register:!0,readOnly:!1,initial:null,isVariable:!0,flags:4096,getValue:function(){return this.value},canDisable:function(){return!1},
canMove:function(){return!1},getIconClass:function(){return"el-icon-quotes-alt"},getBlockIcon:function(){return'\x3cspan class\x3d"'+this.icon+'"\x3e\x3c/span\x3e '},toText:function(){return"\x3cspan class\x3d'text-primary'\x3e"+this.getBlockIcon()+this.makeEditable("name","right","text","Enter a unique name","inline")+"\x3c/span\x3e"},solve:function(){this.scope.parseExpression(this.getValue(),!0);return[]},getFields:function(){var h=this.getDefaultFields(),d=this;h.push(this.utils.createCI("title",
m.ECIType.STRING,this.name,{group:"General",title:"Name",dst:"name"}));h.push(this.utils.createCI("value",m.ECIType.EXPRESSION,this.value,{group:"General",title:"Value",dst:"value",delegate:{runExpression:function(b,c,g){return d.scope.expressionModel.parse(d.scope,b,!1,c,g)}}}));return h}})})},"xfile/data/Store":function(){define("dojo/_base/declare dojo/_base/lang dojo/Deferred xide/mixins/ReloadMixin xide/manager/ServerActionBase dstore/Cache dstore/QueryResults xide/types xide/utils dojo/when xide/data/TreeMemory dstore/Trackable xide/data/ObservableStore xfile/model/File xide/lodash".split(" "),
function(n,m,k,h,d,b,c,g,p,a,e,q,u,w,r){function v(){return{addDot:!0,recursive:!1,rootSegment:".",Model:w,idProperty:"path",parentProperty:"path",parentField:"parent",mount:"path",options:{fields:1663,includeList:"*",excludeList:"*"},serviceUrl:null,serviceClass:null,singleton:!0,queryAccessors:!0,autoEmitEvents:!1,mayHaveChildren:function(a){return 0==a.mayHaveChildren?!1:!0===a.directory},_lastFilter:null,_lastFilterDef:null,_lastFilterItem:null,_initiated:{value:!1},id:null,_state:{initiated:!1,
filter:null,filterDef:null},isInitiated:function(){return this._state.initiated},setInitiated:function(a){this._state.initiated=a},_extraSortProperties:{name:{ignoreCase:!0}},constructor:function(){this.id=p.createUUID()},onSorted:function(a,b){if(1==a.length&&"name"===a[0].property){a=a[0].descending;var c=function(a){return a.name},e=r.groupBy(b,function(a){return!0===a.directory},this);b=r.sortBy(e["true"],c);b=b.concat(r.sortBy(e["false"],c));a&&b.reverse()}if(a=r.find(b,{name:".."}))b.remove(a),
b.unshift(a);return b=this.onAfterSort(b)},onAfterSort:function(a){var b=this.micromatch;if("undefined"!==typeof mm&&b&&a&&a[0]){var c=a[0].realPath?"realPath":"path",c="name",e=r.pluck(a,c),g=mm(e,b);a=a.filter(function(a){return-1===g.indexOf(a[c])?null:a});this._onAfterSort&&(a=this._onAfterSort(a))}return a},_createSortQuerier:function(a){var b=this;return function(c){c=c.slice();c.sort("function"==typeof a?a:function(c,e){for(var g=0;g<a.length;g++){var d;if("function"==typeof a[g])d=a[g](c,
e);else{var h=a[g].property;b._extraSortProperties[h]&&p.mixin(a[g],b._extraSortProperties[h]);d=a[g].descending;var k=c.get?c.get(h):c[h],h=e.get?e.get(h):e[h],q=!!a[g].ignoreCase;null!=k&&(k=k.valueOf());null!=h&&(h=h.valueOf());q&&(k.toUpperCase&&(k=k.toUpperCase()),h.toUpperCase&&(h=h.toUpperCase()));d=k===h?0:!!d===(null===k||k>h)?-1:1}if(0!==d)return d}return 0});return b.onSorted(a,c)}},_getItem:function(a,b){"/"===a&&(a=".");var c=this.getSync(a)||this.getSync("./"+a);return c&&(this.isItemLoaded(c)||
1==b)?c:"."===a?this.getRootItem():null},getItem:function(b,c,e){b=b.replace("./","");if(0==c)return this._getItem(b);if(1==c){c=b.split("/");var g=this,d=[],h=g.getSync(b);if(h&&this.isItemLoaded(h))return h;for(var q=new k,p=function(){if(r.find(d,{loaded:!1}))for(var c=0;c<d.length;c++){if(!d[c].loaded){var h=g.getSync(d[c].path);if(h)if(!0===h.directory&&g.isItemLoaded(h)){d[c].loaded=!0;continue}else if(null==h.directory){q.resolve(h);break}g._loadPath(d[c].path,!1,e).then(function(a){d[c].loaded=
!0;p()},function(b){var e=Math.abs(Math.min(0,c-1));b=d[e];b||(e=d.length-1,b=d[e]);g.getItem(b.path);a(g.getItem(d[e].path,!1),function(a){q.resolve(a,d[e].path)})});break}}else q.resolve(g._getItem(b))},h=".",m=0;m<c.length;m++)"."!=c[m]&&(0<c.length&&(h+="/"),h+=c[m],d.push({path:h,loaded:!1}));p();return q}return"."===b?this.getRootItem():null},getRootItem:function(){return{_EX:!0,path:".",name:".",mount:this.mount,directory:!0,virtual:!0,_S:this,getPath:function(){return this.path+"/"}}},getItemByPath:function(){},
getParents:function(){return null},getParent:function(a){if(!a)return null;var b=a,c=null;m.isString(b)&&(b=this.getSync(a));b&&b.parent&&(c=this.getSync(b.parent));return c||this.getRootItem()},isItemLoaded:function(a){return a&&(!a.directory||this._isLoaded(a))},loadItem:function(a,b){return this._loadItem(a,b)},_parse:function(a){a._S=this;r.isEmpty(a.children)||(r.each(a.children,function(b){b.parent||(b.parent=a.path);this._parse(b)},this),a._EX=!0,a.children=this.addItems(a.children));a.getPath=
function(){return this.path}},_loadPath:function(a,b,c){var e=this,g=this._request(a,c);g.then(function(g){var d=e._getItem(a,!0);if(d)return b&&(r.isEmpty(d.children)||e.removeItems(d.children)),d._EX=!0,e.addItems(g,b),d.children=g;if(c&&c.onError)c.onError("Error Requesting path on server : "+a);else throw Error("cant get item at "+a);}.bind(this),function(a){console.error("error in load")});return g},addSync:function(a,b){(b=b||{}).overwrite=!1;return this.putSync(a,b)},_loadItem:function(a,b){var c=
new k,e=this;if(!a)return c.reject("need item"),c;b&&("."===a.path?(e.setInitiated(!1),e.fetchRange().then(function(b){c.resolve({store:e,items:b,item:a})})):this._loadPath(a.path,!0).then(function(b){c.resolve(a)},function(a){console.error("error occured whilst loading items");c.reject(a)}));return c},_normalize:function(a){return a&&a.items?a.items[0]:[]},_isLoaded:function(a){return a&&!0===a._EX},fetch:function(){},put:function(){},add:function(a){var b=this.getSync(a.path);b||(b=this.addSync(a),
b._S=this,b.getPath=function(){return this.path});return b},removeItems:function(a){r.each(a,function(a){this.getSync(a.path)&&this.removeSync(a.path)},this)},getSync:function(a){var b=this.storage.fullData;return b[this.storage.index[a]]||b[this.storage.index[a.replace("./","")]]},addItems:function(a){var b=[];r.each(a,function(a){this.getSync(a.path)&&this.removeSync(a.path);b.push(this.add(a))},this);return b},open:function(a){var b=this;if(this._isLoaded(a)){var c=new k;b.resetQueryLog();c.resolve(a.children);
return c}a.isLoading=!0;return b._request(a.path).then(function(c){a.isLoading=!1;a._EX=!0;b.addItems(c);return a.children=c})},getDefaultSort:function(){return[{property:"name",descending:!1,ignoreCase:!0}]},filter:function(a){if(a&&"function"===typeof a)return this.inherited(arguments);a.parent&&(this._state.path=a.parent);var b=this.getSync(a.parent);b&&(this.isItemLoaded(b)?this._state.filterDef=null:(b.isLoading=!0,this._state.filterDef=this._loadPath(b.path),this._state.filterDef.then(function(){b.isLoading=
!1})));delete this._state.filter;this._state.filter=a;return this.inherited(arguments)},_request:function(a,b){var c=this,e=this;return this.runDeferred(null,"ls",{path:a,mount:this.mount,options:this.options,recursive:this.recursive},p.mixin({checkErrors:!1,displayError:!0},b),function(a){b&&!1===b.displayError||logError(a,"error in FileStore : "+c.mount+" :"+a)}).then(function(a){a=e._normalize(a);e._parse(a);return a=a.children||a},function(a){b&&!1===b.displayError||logError(a,"error in FileStore : "+
this.mount+" :"+a)})},fetchRangeSync:function(){var a=this.fetchSync(),b=new k;b.resolve(a.length);return new c(a,{totalLength:b})},reset:function(){this._state.filter=null;this._state.filterDef=null;this.resetQueryLog()},resetQueryLog:function(){this.queryLog=[]},fetchRange:function(){var a=this._fetchRange();return new c(a.then(function(a){return a}),{totalLength:a.then(function(a){return a.length})})},initRoot:function(){var a=this;if(!this.isInitiated())return a._request(".").then(function(b){a.isInitiated()||
(r.each(b,a._parse,a),a.setData(b),a.setInitiated(!0),a.emit("loaded"));return a.fetchRangeSync(arguments)}.bind(this));var b=new k;b.resolve();return b},_fetchRange:function(){if(this._state.filter){var a=this._state.filterDef;if(a)return a.then(function(b){this.reset();a&&a.resolve&&a.resolve(b)}.bind(this)),a}var b=this;if(this.isInitiated()){var e=b.fetchRangeSync(arguments),g=new k,d=new k;g.resolve(e);d.resolve(e.length);b.emit("loaded");return new c(g,{totalLength:e.totalLength})}return b._request(".").then(function(a){b.isInitiated()||
(r.each(a,b._parse,b),b.setData(a),b.setInitiated(!0),b.emit("loaded"));return b.fetchRangeSync(arguments)}.bind(this))},getDefaultCollection:function(a){var b=this.getDefaultSort();return null==a?this.sort(b):this.filter(function(b){return b.parent===a}).sort(b)},getChildren:function(a){return this.root.filter({parent:this.getIdentity(a)})},spin:!0}}n=n("xfile/data/Store",[e,b,q,u,d.declare,h],v());n.Implementation=v;return n})},"nxapp/utils":function(){define(["dojo/_base/declare"],function(n){return n("nxapp.utils",
null,{})})},"xgrid/Base":function(){define("xdojo/declare xide/types xgrid/types xide/utils/ObjectUtils xide/utils dgrid/OnDemandGrid xgrid/Defaults xgrid/Layout xgrid/Focus xgrid/ListRenderer xgrid/ThumbRenderer xgrid/TreeRenderer dgrid/util/misc".split(" "),function(n,m,k,h,d,b,c,g,p,a,e,q,u){function w(a,b,c,e){return n.classFactory(a,b,c,e,z)}function r(a,b){return b.some(function(b){return 0<=a.indexOf(b)})}function v(a,b,c,e,g,h){var k=!1;b=b||y;if(!b&&!c)return y;b&&(k=r(x,_.keys(e)),h=d.cloneKeys(h||
z),k&&(d.mixin(h,e),h=_.pick(h,_.identity)),b=w(a,h,[y],b));e=[];k={};if(b&&c){h=d.cloneKeys(A);d.mixin(h,c);for(var q in h)if(c=h[q],h[q]){var p=null;!0===c?p=A[q]:A[q]?(p=A[q],p=r(["CLASS","CLASSES","IMPLEMENTATION"],_.keys(c))?d.mixin(d.cloneKeys(p),c):p):p=c;p&&(c=w(q,p.CLASSES||[],[p.CLASS],p.IMPLEMENTATION),e.push(c),k[q]=c)}0<e.length&&(b=w(a,[b],e,g));b.prototype._featureMap=k}return b}var x="EVENTED GRID EDITOR RENDERER DEFAULTS LAYOUT FOCUS i18".split(" "),A=m.DEFAULT_GRID_FEATURES,z=m.GRID_BASES;
k=m.DEFAULT_GRID_OPTIONS;h={_isHighlighting:!1,_featureMap:{},options:d.clone(m.DEFAULT_GRID_OPTIONS),getContextMenu:function(){},getToolbar:function(){},isRendered:function(a){if(!a)return null!=this.bodyNode;a=this._normalize(a);var b=this.collection;if(a){a=a.data;var b=b.idProperty,c=this.getRows(!0);if(c)for(var e=0;e<c.length;e++){var g=this.row(c[e]);if(g&&g.data&&g.data&&a&&g.data[b]===a[b])return!0}}return!1},highlightRow:function(){},getParent:function(){return this._parent},get:function(a){var b=
this.getParent();return"iconClass"===a&&b&&b.icon?b.icon():this.inherited(arguments)},set:function(a,b){var c=this.getParent();if("iconClass"===a){var e=c.set;if(e)e.apply(c,[a,b]);else if(c&&c.icon)return c.icon(b),!0}"title"===a&&b&&c&&((e=c.set)?e.apply(c,[a,b]):c&&c.title&&c.title(b));if("loading"===a&&(this.__loading=b,c)){if(c.startLoading)return e=c._options.icon,!0===b?(c.startLoading("",.5),c.icon("fa-spinner fa-spin")):(c.finishLoading(),c.icon(e)),!0;c.set&&c.set("loading",b)}return this.inherited(arguments)},
runAction:function(a){a.command==m.ACTION.HEADER&&this._setShowHeader(!this.showHeader);return this.inherited(arguments)},highlight:function(a){var b=$(this.domNode.parentNode);a?this._isHighlighting||(this._isHighlighting=!0,b.addClass("highlight")):(this._isHighlighting=!1,b.removeClass("highlight"))},getState:function(a){a=this.inherited(arguments)||{};a.showHeader=this.showHeader;return a},postMixInProperties:function(){var a=this.state;a&&(this.showHeader=a.showHeader);return this.inherited(arguments)},
renderArray:function(a){if(this.__loading)return[];this._lastData=a;return this.inherited(arguments)},getData:function(){return this._lastData},refreshItem:function(a,b){b&&(this._muteSelectionEvents=!0);this.collection.emit("update",{target:a});b&&(this._muteSelectionEvents=!1)},onShow:function(){this._emit(m.EVENTS.ON_VIEW_SHOW,this);return this.inherited(arguments)},isActive:function(a){return d.isDescendant(this.domNode,a||document.activeElement)},_showHeader:function(a){$(this.domNode).find(".dgrid-header").each(function(b,
c){$(c).css("display",a?"":"none")});$(this.domNode).find(".dgrid-scroller").each(function(b,c){$(c).css("margin-top",a?26:0)})},destroy:function(){this._emit("destroy",this);return this.inherited(arguments)},hasFeature:function(a){return r(["name"],_.keys(this._featureMap))},_rowCount:function(){return this._lastRenderedArray.length},getRows:function(a,b){var c=[],e=this,g=$(e.domNode).find(".dgrid-row");_.each(g,function(b){(b=e.row(b))&&b.element&&c.push(b[a?"element":"data"])});return b?c.filter(b):
c},startup:function(){var a=this.inherited(arguments);this.columns&&_.each(this.columns,function(a){a.width&&this.styleColumn(parseInt(a.id),"width:"+a.width)},this);var b=this;this.showExtraSpace&&this.on("dgrid-refresh-complete",function(){var a=b.getRows(),c=$(b.contentNode).find(".dgrid-extra");a.length&&!c.length&&(c=$('\x3cdiv class\x3d"dgrid-extra" style\x3d"width:100%;height:80px"\x3e\x3c/div\x3e'),$(b.contentNode).append(c),c.on("click",function(){b.deselectAll()}),c.on("contextmenu",function(){b.deselectAll()}))});
return a},removeRow:function(){var a=this.inherited(arguments);this.showExtraSpace&&(this._lastRenderedArray&&0!=this._lastRenderedArray.length||$(self.contentNode).find(".dgrid-extra").remove());return a}};var y=n("xgrid.Default",null,h);h=v("xgrid/Base",{options:d.clone(k)},{SELECTION:!0,KEYBOARD_SELECTION:!0,PAGINATION:!1,COLUMN_HIDER:!1},null,{});h.createGridClass=v;h.classFactory=w;h.DEFAULT_GRID_FEATURES=A;h.DEFAULT_GRID_BASES=z;h.DEFAULT_GRID_OPTIONS=k;h.DEFAULT_GRID_OPTION_KEYS=m.DEFAULT_GRID_OPTION_KEYS;
return h})},"xace/complete_util":function(){define(function(n,m,k){function h(c,a,e){e=e||b;var g=[];for(--a;0<=a&&c;a--)if(e.test(c[a]))g.push(c[a]);else break;return g.reverse().join("")}function d(b,a,e,g,d){if(-1===["javascript","jsx"].indexOf(g.getSession().syntax))return!1;g=null==e?h(b,a,c):e;e=9-(d?1:0);a=a-g.length-e;d=b.substr(a,e)+(d?'"':"");return 0<=a&&d.match(/require\(["']/)||b.substr(a+1,e).match(/require\(["']/)}var b=/[a-zA-Z_0-9\$]/,c=/(?!["'])./,g="../static/lib";m.precededByIdentifier=
function(b,a,c,g){var e=h(b,a);c&&(e+=c);if(c=""!==e&&!("0"<=e[0]&&"9">=e[0])){if(-1===["javascript","jsx"].indexOf(g.getSession().syntax))c=!0;else{c=null;for(var k=0;k<a;k++)'"'!==b[k]||c?'"'===b[k]&&'"'===c&&"\\"!==b[k-1]?c=null:"'"!==b[k]||c?"'"===b[k]&&"'"===c&&"\\"!==b[k-1]?c=null:"/"===b[k]&&"/"===b[k+1]?(c="//",k++):"/"!==b[k]||"*"!==b[k+1]||c?"*"===b[k]&&"/"===b[k+1]&&"/*"===c?(c=null,k++):"/"!==b[k]||c?"/"===b[k]&&"/"===c&&"\\"!==b[k-1]&&(c=null):c="/":"global"!==b.substr(k+2,6)&&(c="/*",
k++):c="'":c='"';c="/"!=c}c=c||d(b,a,e,g)}return c};m.isRequireJSCall=d;m.retrievePrecedingIdentifier=h;m.retrieveFollowingIdentifier=function(c,a,e){e=e||b;for(var g=[];c&&a<c.length;a++)if(e.test(c[a]))g.push(c[a]);else break;return g.join("")};m.findCompletions=function(b,a){a.sort();for(var c=0,g=a.length-1,d=Math.floor((g+c)/2);g>c&&0<=d&&0!==a[d].indexOf(b);)b<a[d]?g=d-1:b>a[d]&&(c=d+1),d=Math.floor((g+c)/2);for(;0<d&&0===a[d-1].indexOf(b);)d--;c=[];for(d=0<=d?d:0;d<a.length&&0===a[d].indexOf(b);d++)c.push(a[d]);
return c};m.fetchText=function(b){var a=new XMLHttpRequest;b=g+"/"+b;console.error("fetch text : "+b);a.open("GET",b,!1);try{a.send()}catch(e){return!1}return 200===a.status||a.responseText?a.responseText:!1};m.setStaticPrefix=function(b){g=b};m.DEFAULT_ID_REGEX=b;m.canCompleteForChangedLine=function(b,a,c,g,d){if(c.row!==g.row||0!==a.indexOf(b))return!1;c=h(b,c.column,d);g=h(a,g.column,d);return a.substr(0,a.length-g.length)===b.substr(0,b.length-c.length)}})},"xcf/views/DeviceTreeView_VE":function(){define("xdojo/declare xdojo/has dojo/_base/lang xide/types xide/utils dijit/focus davinci/ui/dnd/DragManager davinci/ve/utils/GeomUtils davinci/ui/dnd/DragSource davinci/ve/metadata davinci/ve/tools/CreateTool".split(" "),
function(n,m,k,h,d,b,c,g,p,a,e){function q(a,b,c,e){return k.replace((e||"")+"deviceScope\x3d{deviceScope}\x26device\x3d{deviceId}\x26driver\x3d{driverId}\x26driverScope\x3d{driverScope}\x26block\x3d{block}",{deviceId:a.id,deviceScope:a.scope,driverId:b.id,driverScope:b.scope,block:c.id})}var u=function(b,c,g,d,h,q,p){h=k.clone(h);k.mixin(h.properties,p);q=d.dragSource.data.userData||q;q.onCreate=function(){};a.getHelper(h.type,"tool").then(function(a){a=new (a||e)(dojo.clone(h),q);g.setActiveTool(a)}.bind(this));
g.blockChange(!1);d._dragClone&&($(d._dragClone).addClass("paletteDragContainer"),dojo.create("div",{className:"maqCandidateParents"},d._dragClone));g.setActiveDragDiv(d._dragClone)},w=function(a,c,e,d,h,k){if(e){var q=c.domNode,r=new p(c.domNode,"component",c,q);r.targetShouldShowCaret=!0;r.returnCloneOnFailure=!1;var q={handles:[],context:e,node:q,ds:r,destroy:function(){delete this.context;_.each(this.handles,dojo.disconnect);delete this.handles;delete this.node.__vednd;delete this.node;delete this.ds}},
m=q.handles;m.push(dojo.connect(r,"onDragStart",dojo.hitch(a,function(b){u(a,c,e,b,d,h,k)})));m.push(dojo.connect(r,"onDragEnd",dojo.hitch(a,function(a){b.curNode&&b.curNode.blur&&b.curNode.blur()})));m.push(dojo.connect(c.domNode,"onmouseover",function(a){c._mouseover=!0}));m.push(dojo.connect(c.domNode,"onmouseout",function(a){c._mouseover=!1}));m.push(dojo.connect(c.domNode,"onmousedown",function(b){b=a.dragMananager;b.document=e.getDocument();var c=e.frameNode;if(c){var c=dojo.coords(c),d=e.getContainerNode();
b.documentX=c.x-g.getScrollLeft(d);b.documentY=c.y-g.getScrollTop(d)}}));return q}},r={children:"",name:"RunScript",properties:{style:"position:relative",scopeid:"",targetevent:"click"},type:"xblox/RunScript",userData:{}};return n("xcf.views.DeviceTreeView",null,{dragMananager:null,veContext:null,onAppReady:function(a){this.editorContext&&this.editorContext!=a.context&&(this.editorContext=a.context);this.dragMananager||(this.dragMananager=c);this.editorContext=a.context;this.updateDragManager(a.context)},
onDragStart:function(a){},onDragEnd:function(a){},isDnd:function(a){return 1!=a.isDir&&!1!==a.isDnd},onDeviceStateChanged:function(a){this.grid.refresh().then(function(){})},updateDragManager:function(a){this.dragMananager.document=a.getDocument();var b=a.frameNode;b&&(b=dojo.coords(b),a=a.getContainerNode(),this.dragMananager.documentX=b.x-g.getScrollLeft(a),this.dragMananager.documentY=b.y-g.getScrollTop(a))},onContextDestroyed:function(a){a.__veDNDDevHandles&&(_.each(a.__veDNDDevHandles,d.destroy),
a.__veDNDDevHandles);delete this.editorContext},startup:function(){this.subscribe([h.EVENTS.ON_APP_READY,h.EVENTS.ON_DEVICE_STATE_CHANGED,h.EVENTS.ON_CONTEXT_DESTROYED]);var a=this,b=a.ctx;b.getDeviceManager();b.getDriverManager();this._on("selectionChanged",function(b){if((b=(b=b.selection)&&1==b.length?b[0]:null)&&a.editorContext){var c=b.ref||{},e=c.item,g=c.device,d=c.driver;e&&e.getScope();var c=e?e.isCommand||-1!==e.declaredClass.indexOf("model.Command"):!1,h;h=e?-1!==e.declaredClass.indexOf("model.Variable"):
!1;var k=b.ref||{},p=k.item,m=k.device,k=k.driver;p&&p.getScope();var n=p?p.isCommand||-1!==p.declaredClass.indexOf("model.Command"):!1,v=p?-1!==p.declaredClass.indexOf("model.Variable"):!1;h=n&&c?q(m,k,p,"command://"):v&&h?q(m,k,p,"variable://"):!1;h&&(p=a.row(b),h=p.element,p.element.__vednd||(h.__vednd=!0,e=q(g,d,e,c?"command://":"variable://"),e=c?b.ref?{block:e,script:""+b.ref.item.name,targetevent:"click"}:{}:b.ref?{block:e,script:""+b.ref.item.name,targetevent:"",sourceevent:"onDriverVariableChanged",
targetproperty:"label",sourceeventnamepath:"item.name",sourceeventvaluepath:"item.value",mode:1}:{},g=a.editorContext,c={domNode:h},g&&(g.__veDNDDevHandles||(g.__veDNDDevHandles=[]),this.isDnd(b)&&g.__veDNDDevHandles.push(w(this,c,g,r,b,e)))))}});return this.inherited(arguments)}})})},"dojo/string":function(){define(["./_base/kernel","./_base/lang"],function(n,m){var k={};m.setObject("dojo.string",k);k.rep=function(h,d){if(0>=d||!h)return"";for(var b=[];;){d&1&&b.push(h);if(!(d>>=1))break;h+=h}return b.join("")};
k.pad=function(h,d,b,c){b||(b="0");h=String(h);d=k.rep(b,Math.ceil((d-h.length)/b.length));return c?h+d:d+h};k.substitute=function(h,d,b,c){c=c||n.global;b=b?m.hitch(c,b):function(b){return b};return h.replace(/\$\{([^\s\:\}]+)(?:\:([^\s\:\}]+))?\}/g,function(g,h,a){g=m.getObject(h,!1,d);a&&(g=m.getObject(a,!1,c).call(c,g,h));return b(g,h).toString()})};k.trim=String.prototype.trim?m.trim:function(h){h=h.replace(/^\s+/,"");for(var d=h.length-1;0<=d;d--)if(/\S/.test(h.charAt(d))){h=h.substring(0,d+
1);break}return h};return k})},"dojo/dnd/Manager":function(){define("../_base/array ../_base/declare ../_base/lang ../_base/window ../dom-class ../Evented ../has ../keys ../on ../topic ../touch ./common ./autoscroll ./Avatar xide/mixins/EventedMixin xide/lodash xide/types/Types".split(" "),function(n,m,k,h,d,b,c,g,p,a,e,q,u,w,r,v,x){function A(a){a.preventDefault();a.stopPropagation()}var z=x.EVENTS,y=m("dojo.dnd.Manager",[b,r],{avatar:null,source:null,target:null,copy:null,constructor:function(){this.source=
this.avatar=null;this.nodes=[];this.copy=!0;this.target=null;this.canDropFlag=!1;this.events=[]},OFFSET_X:c("touch")?0:16,OFFSET_Y:c("touch")?-64:16,overSource:function(b){this.avatar&&(this.target=b&&"Disabled"!=b.targetState?b:null,this.canDropFlag=!!this.target,this.avatar.update());a.publish(z.ON_DND_SOURCE_OVER,b)},outSource:function(b){this.avatar?this.target==b&&(this.target=null,this.canDropFlag=!1,this.avatar.update(),a.publish(z.ON_DND_SOURCE_OVER,null)):a.publish(z.ON_DND_SOURCE_OVER,null)},
startDrag:function(b,c,g){u.autoScrollStart(h.doc);this.source=b;this.nodes=c;this.copy=!!g;this.avatar=this.makeAvatar();h.body().appendChild(this.avatar.node);a.publish("/dnd/start",b,c,this.copy);this.events=[p(h.doc,e.move,k.hitch(this,"onMouseMove")),p(h.doc,e.release,k.hitch(this,"onMouseUp")),p(h.doc,"keydown",k.hitch(this,"onKeyDown")),p(h.doc,"keyup",k.hitch(this,"onKeyUp")),p(h.doc,"dragstart",A),p(h.body(),"selectstart",A)];b="dojoDnd"+(g?"Copy":"Move");d.add(h.body(),b)},canDrop:function(a){a=
!(!this.target||!a);this.canDropFlag!=a&&(this.canDropFlag=a,this.avatar.update())},stopDrag:function(){d.remove(h.body(),["dojoDndCopy","dojoDndMove"]);v.invoke(this.events,"remove");this.events=[];this.avatar.destroy();this.source=this.target=this.avatar=null;this.nodes=[]},makeAvatar:function(){return new w(this)},updateAvatar:function(){this.avatar.update()},onMouseMove:function(a){var b=this.avatar;b&&(u.autoScrollNodes(a),b=b.node.style,b.left=a.pageX+this.OFFSET_X+"px",b.top=a.pageY+this.OFFSET_Y+
"px",b=!!this.source.copyState(q.getCopyKeyState(a)),this.copy!=b&&this._setCopyStatus(b));c("touch")&&a.preventDefault()},onMouseUp:function(b){if(this.avatar){if(this.target&&this.canDropFlag){var c=!!this.source.copyState(q.getCopyKeyState(b));a.publish(z.ON_DND_DROP_BEFORE,this.source,this.nodes,c,this.target,b);a.publish(z.ON_DND_DROP,this.source,this.nodes,c,this.target,b)}else a.publish(z.ON_DND_CANCEL);this.stopDrag()}},onKeyDown:function(b){if(this.avatar)switch(b.keyCode){case g.CTRL:b=
!!this.source.copyState(!0);this.copy!=b&&this._setCopyStatus(b);break;case g.ESCAPE:a.publish(z.ON_DND_CANCEL),this.stopDrag()}},onKeyUp:function(a){this.avatar&&a.keyCode==g.CTRL&&(a=!!this.source.copyState(!1),this.copy!=a&&this._setCopyStatus(a))},_setCopyStatus:function(a){this.copy=a;this.source._markDndStatus(this.copy);this.updateAvatar();d.replace(h.body(),"dojoDnd"+(this.copy?"Copy":"Move"),"dojoDnd"+(this.copy?"Move":"Copy"))}});q._manager=null;y.manager=q.manager=function(){q._manager||
(q._manager=new y);return q._manager};return y})},"dstore/legacy/DstoreAdapter":function(){define(["dojo/_base/declare","dojo/_base/array","dojo/store/util/QueryResults"],function(n,m,k){function h(b){return b}var d={store:null,constructor:function(b){this.store=b;if(b._getQuerierFactory("filter")||b._getQuerierFactory("sort"))this.queryEngine=function(c,d){d=d||{};var a=b._getQuerierFactory("filter"),e=a?a(c):h;c=b._getQuerierFactory("sort");var g=h;c&&(g=c(m.map(d.sort,function(a){return{property:a.attribute,
descending:a.descending}})));var k=h;isNaN(d.start)&&isNaN(d.count)||(k=function(a){var b=d.start||0,b=a.slice(b,b+(d.count||Infinity));b.total=a.length;return b});return function(a){return k(g(e(a)))}};var c=this;b.on("add,update,delete",function(g){var d=g.type,a=g.target;c.notify("add"===d||"update"===d?a:void 0,"delete"===d||"update"===d?"id"in g?g.id:b.getIdentity(a):void 0)})},labelAttr:"title",getLabel:function(b){return this.store.getLabel(b)},query:function(b,c){c=c||{};var g=this.store.filter(b),
d,a;if(b=c.sort)if("[object Array]"===Object.prototype.toString.call(b))for(var e;e=b.pop();)g=g.sort(e.attribute,e.descending);else g=g.sort(b);g.track&&!g.tracking&&(g=g.track(),a=!0);"start"in c&&(d=c.start||0,d=g[g.fetchRangeSync?"fetchRangeSync":"fetchRange"]({start:d,end:c.count?d+c.count:Infinity}));d=d||g[g.fetchSync?"fetchSync":"fetch"]();c=d.totalLength;d=new k(d);d.total=c;d.observe=function(b,c){function e(b){return void 0===b&&a?-1:b}var d=g.on("add",function(a){b(a.target,-1,e(a.index))}),
h=g.on("update",function(a){!c&&a.previousIndex===a.index&&isFinite(a.index)||b(a.target,e(a.previousIndex),e(a.index))}),k=g.on("delete",function(a){b(a.target,e(a.previousIndex),-1)}),q={remove:function(){d.remove();h.remove();k.remove()}};q.cancel=q.remove;return q};return d},notify:function(){}};m.forEach(["get","put","add","remove","getIdentity"],function(b){d[b]=function(){var c=this.store;return(c[b+"Sync"]||c[b]).apply(c,arguments)}});return n(null,d)})},"xide/widgets/NativeWidget":function(){define(["dcl/dcl",
"dojo/_base/declare","xide/widgets/WidgetBase","xide/factory"],function(n,m,k,h){return n(k,{declaredClass:"xide.widgets.NativeWidget",value:"unset",_lastValue:null,_nativeHandles:!1,widgetChanged:function(d){this.changed=!0;this.userData&&(this.userData.changed=!0);this.setValue(d)},setupNativeWidgetHandler:function(){var d=this;this.nativeWidget&&!this._nativeHandles&&(this.nativeWidget._added=!0,this.nativeWidget._started||(this.valueNode.innerHTML="",this.valueNode.appendChild(this.nativeWidget.domNode),
this.nativeWidget.startup()),this._nativeHandles=!0,this.nativeWidget._on?this.nativeWidget._on("change",function(b){if(null===d._lastValue||d._lastValue!==b)d._lastValue=b,d.widgetChanged(this)}):this.addHandle("change",this.nativeWidget.on("change",function(b){if(null===d._lastValue||d._lastValue!==b)d._lastValue=b,d.widgetChanged(this)})),this.addHandle("blur",this.nativeWidget.on("blur",function(){d.setActive(!1)})),this.addHandle("focus",this.nativeWidget.on("focus",function(){d.setActive(!0)})))},
startup:function(){var d=this.userData,b=this.type,c=d.title||d.name,g=this.value,d=$(this.valueNode),h=this;if(b&&(this.valueNode.innerHTML="",this.titleNode.innerHTML="","CheckBox"===b)){d=$(this.titleNode);b=this.id+"_Checkbox";b='\x3cdiv class\x3d"checkbox checkbox-success "\x3e'+('\x3cinput id\x3d"'+b+'" type\x3d"checkbox" '+(1==g?"checked":"")+"\x3e")+('\x3clabel for\x3d"'+b+'"\x3e')+(this.localize(c)+"\x3c/label\x3e");b+="\x3c/div\x3e";b=$(b);d.append(b);var a=b.find("INPUT");this.__on(a,"change",
null,function(){var b=a[0].checked;if(null===h._lastValue||h._lastValue!==b)h._lastValue=b,h.widgetChanged(b)})}this.onReady()}})})},"x-markdown/views/MarkdownGrid":function(){define("xdojo/declare dcl/dcl xide/utils xide/lodash xide/widgets/TemplatedWidgetBase xdojo/has!xace?xace/views/Editor xfile/views/FileGrid xdojo/has xide/$".split(" "),function(n,m,k,h,d,b,c,g,p){function a(a,b){return k.pathinfo(a.path).dirname.split("/").concat(b.split("/")).join("/")}var e="undefined"!==typeof showdown?
showdown:null,q="undefined"!==typeof q?q:null,u=/!\[(.*?)]\s?\([ \t]*()<?(\S+?)>?(?: =([*\d]+[A-Za-z%]{0,4})x([*\d]+[A-Za-z%]{0,4}))?[ \t]*(?:(['"])(.*?)\6[ \t]*)?\)/g,w=/!\[([^\]]*?)] ?(?:\n *)?\[(.*?)]()()()()()/g;g=g("admin")?"block":"none";var r=m(d,{templateString:"\x3cdiv class\x3d'widget container MarkdownView'\x3e\x3cnav style\x3d\"height:auto;min-height:auto;display:"+g+';" class\x3d"navbar navbar-static-top"\x3e\x3cbutton attachTo\x3d"editButton" class\x3d"btn btn-default" style\x3d"float:right"\x3e\x3cli class\x3d"fa fa-edit"\x3e\x3c/li\x3e Edit\x3c/button\x3e\x3c/nav\x3e\x3cdiv class\x3d\'Page\' attachTo\x3d\'markdown\'/\x3e\x3c/div\x3e'});
return n("FileGrid",c,{showdownExtensions:[],getEditorTarget:function(){},startFile:null,converter:null,handleLinks:!0,hightlightCode:!0,preview:null,EDITOR_CLASS:null,PREVIEW_CLASS:null,editor:null,fileItem:null,_columns:{Type:!1,Path:!1,Size:!1,Modified:!1,Owner:!1,Media:!1},formatters:{Name:function(a,b,c){var e=b.split("_");b=e.length?e[e.length-1]:b;b=k.basename(b,".md");b=k.basename(b,".MD");return this.formatColumn(a,b,c)}},registerShowDown:function(a,b){a.extension("xcf",function(){return[{type:"lang",
filter:function(c){function e(c,e,g,d,h,k,q,p){q=[];var r=[],m=[];g=g.toLowerCase();p||(p="");if(""===d||null===d){if(""===g||null===g)g=e.toLowerCase().replace(/ ?\n/g," ");d="#"+g;if(a.helper.isUndefined(q[g]))return c;d=q[g];a.helper.isUndefined(r[g])||(p=r[g]);a.helper.isUndefined(m[g])||(h=m[g].width,k=m[g].height)}e=e.replace(/"/g,"\x26quot;");e=a.helper.escapeCharacters(e,"*_",!1);d=a.helper.escapeCharacters(d,"*_",!1);d=b.resolveImage(null,d,b.fileItem);c='\x3cimg src\x3d"'+d+'" alt\x3d"'+
e+'"';p&&(p=p.replace(/"/g,"\x26quot;"),p=a.helper.escapeCharacters(p,"*_",!1),c+=' title\x3d"'+p+'"');h&&k&&(c=c+(' width\x3d"'+("*"===h?"auto":h)+'"')+(' height\x3d"'+("*"===k?"auto":k)+'"'));return c+" /\x3e"}c=c.replace(u,e);return c=c.replace(w,e)}}]})},resolveImage:function(a,b){return this.collection?-1==b.toLowerCase().indexOf("http")&&-1==b.indexOf("https")?this.ctx.getFileManager().getImageUrl({mount:this.collection.mount,path:k.pathinfo(this.fileItem.path).dirname.split("/").concat(b.split("/")).join("/")}):
b:b},createMarkdownEditor:function(a,c,e,g,d){var h=ace.require("ace/snippets").snippetManager;c=this.EDITOR_CLASS||m(b,{runAction:function(a){var b=this.editor,c=b.session.getTextRange(b.getSelectionRange());"Markdown/Bold"===a.command&&(""===c?h.insertSnippet(b,"**${1:text}**"):h.insertSnippet(b,"**"+c+"**"));"Markdown/Italic"===a.command&&(""===c?h.insertSnippet(b,"*${1:text}*"):h.insertSnippet(b,"*"+c+"*"));"Markdown/Link"===a.command&&(""===c?h.insertSnippet(b,"[${1:text}](http://$2)"):h.insertSnippet(b,
"["+c+"](http://$1)"));b.focus();return this.inherited(arguments)}});m.chainAfter("runAction",c);var q=this,p=k.addWidget(c,{value:"",item:a,options:{mode:"markdown",fileName:a.path},storeDelegate:{getContent:function(a){return q.ctx.getFileManager().getContent(q.fileItem.mount,q.fileItem.path,a)},saveContent:function(a,b){return q.ctx.getFileManager().setContent(q.fileItem.mount,q.fileItem.path,a,b)}}},this,e,!1,null,null);p._on("onAddActions",function(a){a=a.actions;var b={addPermission:!0};a.push(p.createAction({label:"Bold",
command:"Markdown/Bold",icon:"fa-bold",group:"Text",tab:"Home",mixin:b}));a.push(p.createAction({label:"Italic",command:"Markdown/Italic",icon:"fa-italic",group:"Text",tab:"Home",mixin:b}));a.push(p.createAction({label:"Link",command:"Markdown/Link",icon:"fa-link",group:"Text",tab:"Home",mixin:b}))},q);p.startup();p._on("change",function(a){!q._isSettingValue&&a&&(a=g.makeHtml(a),d.$markdown.html(a))});e.add(p);return p},renderMarkdownContent:function(a,c){var g=this.ctx.getFileManager(),d=this;(d.fileItem=
a)&&(c||d.preview)&&e&&(d.fileItem=a,g.getContent(a.mount,a.path,function(e){d._lastContent=e;var g=d.converter,h=g.makeHtml(e);d.preview||(d.preview=k.addWidget(d.PREVIEW_CLASS||r,null,d,k.getNode(c),!0),c.add(d.preview),d.preview.$editButton.on("click",function(){d.__botton?(k.destroy(d.__botton),k.destroy(d.editor),d.__botton=null,d.editor=null):(d.__botton||(d.__botton=d.getEditorTarget()||d.getBottomPanel(!1,.5,"DefaultTab",null,c)).getSplitter().pos(.5),d.editor||(d._isSettingValue=!0,d.editor=
d.createMarkdownEditor(a,d._lastContent,d.__botton,g,d.preview),d.editor.set("value",d._lastContent),d._isSettingValue=!1))}));d.preview.$markdown.html(h);q&&d.hightlightCode&&d.preview.$markdown.find("code").each(function(a,b){q.highlightBlock(b)});d._isSettingValue=!0;d.__botton||!1===d.editor||!b&&!d.EDITOR_CLASS||(h=d.__botton=d.getBottomPanel(!1,.5,"DefaultTab",null,c),h.getSplitter().pos(.5),d.editor=d.createMarkdownEditor(a,e,h,g,d.preview));d._isSettingValue=!0;d.editor&&(d.editor.item=a,
d.editor.set("value",e));d._emit("rendered",d.preview.$markdown);d._isSettingValue=!1;c&&c.resize()}),c._on("destroy",function(){k.destroy(d.editor,!0,this);k.destroy(d.__botton);d.editor=null;d.__botton=null;d.__right=null}))},startup:function(){function a(){var a=b.__right;a||(a=b.__right=b.getRightPanel(null,null,"DefaultTab",{}),a._on("destroy",function(){b.__right=null;b.preview=null}));return a}var b=this;this.registerShowDown(e,this);b.converter||(b.converter=new showdown.Converter({github_flavouring:!0,
extensions:["xcf"]}),b.converter.setOption("tables",!0));var c=this.inherited(arguments),g=this.collection;this._on("selectionChanged",function(c){(c=c.selection)&&c[0]&&(c=c[0],c.isDir?g.open(c).then(function(c){var e=h.find(c,{name:"_index.md"});e&&b.renderMarkdownContent(e,a(),c.filter(function(a){return a!=e}))}):b.renderMarkdownContent(c,a()))});c.then(function(){this.set("collection",g.getDefaultCollection());this._showHeader(!1);this.showStatusbar(!1);this.startFile&&this.select([this.startFile],
null,!0,{append:!1,focus:!0,delay:1})}.bind(this));this.handleLinks&&this._on("rendered",function(a){a=a.find("A");h.each(a,function(a){a=p(a);var c=a.attr("href");c&&!c.startsWith("#")&&(a.data("href",c),a.attr("href","javascript:void(0)"),a.click(b.onLink.bind(b)))})});return c},_findLink:function(a){var b=a.data("href");return b?b:this._findLink(a.parent())},onLink:function(a){a=p(a.target);a=this._findLink(a);return-1===a.toLowerCase().indexOf("http")&&-1===a.indexOf("https")?this.onRelativeLink(a):
this.onExternalLink(a)},onExternalLink:function(a){},onRelativeLink:function(b){var c=this.collection,e=this;b=a(this.fileItem,b);c=c.getItem(b,!0,{checkErrors:!0,displayError:!1,onError:function(){console.error("error resolving link : "+b)}});c.then?c.then(function(a){a&&e.renderMarkdownContent(a)}):e.renderMarkdownContent(c)}})})},"xide/Keyboard":function(){define(["xdojo/declare","dcl/dcl","dojo/_base/lang","xide/types","xide/utils/ObjectUtils"],function(n,m,k,h,d){d.mixin(h,{KEYBOARD_EVENT:{UP:"on_keyup",
DOWN:"on_keydown",RELEASE:"on_release"}});d.mixin(h,{KEYBOARD_MAPPING:{keys:null,handler:null,scope:null,target:null,type:null,params:null,mouse:{brefore:null,after:null},eventArgs:null}});var b={},c=function(a,c){a.stop=function(){};a.listen=function(){_.invoke(c,"listen")};a.destroy=function(){a.stop();_.each(c,function(a){a.destroy();c.remove(a);delete b[a.targetId]})};return a},g=window?window.keypress?window.keypress.Listener:null:null;g||console.error("you need keypress.min.js installed to use xide/Keyboard");
var p={_keyboardListeners:null,keyPressDefault:function(){return{prevent_repeat:!1,prevent_default:!0,is_unordered:!1,is_counting:!1,is_exclusive:!1,is_solitary:!1,is_sequence:!0}},addKeyboardListerner:function(a,c,h,p,r,m,n){var e=k.clone(this.keyPressDefault());d.mixin(e,c);e["this"]=e["this"]||p||this;h=h||"simple_combo";a=_.isArray(a)?a:[a];var q=[],u="ctrl s;ctrl l;ctrl r;ctrl w;ctrl f4;shift f4;alt tab;ctrl tab".split(";");_.each(a,function(a){var c=m&&m.id?m.id:"global",d=m?!!b[c]:!1,k=!1,
p=b[c];p&&p["_seq"+a]&&(k=!0);k||(p||(p=new g(m,e),p.targetId=c),p["_seq"+a]=!0,p[h](a,function(b){if(!b._did){b._did=!0;var c=b.target.className.toLowerCase();("BUTTON"!==b.target.tagName&&-1==c.indexOf("input")||-1!=c.indexOf("ace_text-input"))&&r&&r.apply&&(r.apply(e["this"],n||[b]),-1!==u.indexOf(a)&&(b.preventDefault(),b.stopPropagation()))}}),b[c]||(b[c]=p),d||(!this._keyboardListeners&&(this._keyboardListeners=[]),this._keyboardListeners.push(p),q.push(p)))},this);return q},registerKeyboardMapping:function(a){var b=
this.addKeyboardListerner(a.keys,a.params,null,a.scope,a.handler,a.target,a.eventArgs);a.listeners=b;return c(a,b)},destroy:function(){this.inherited&&this.inherited(arguments);var a=this.id,c=b[a];c&&(c.destroy(),delete b[a])}},a=n("xide/Keyboard",null,p);a.createMapping=function(a,b,c,g,p,m,n){function e(a){return _.isString(a)?k.hitch(g,a):a}var q=d.clone(h.KEYBOARD_MAPPING);q.keys=a;q.params=b||{};q.type=c;q.scope=g;q.handler=e(p);q.target=m;q.eventArgs=n;q.setHandler=function(a,b){q.params[a]=
e(b);return q};return q};a.defaultMapping=function(b,c,g,d,h,k){return a.createMapping(b,g,null,h,c,d,k)};a.dcl=m(null,p);a.byNode=b;a.listeners=[];return a})},"dgrid/Selection":function(){define("dojo/_base/declare dojo/dom-class dojo/on dojo/has dojo/aspect ./List dgrid/util/touch dojo/query dojo/_base/sniff dojo/dom".split(" "),function(n,m,k,h,d,b,c){function g(a,b){b=a.unselectable=b?"on":"";a=a.getElementsByTagName("*");for(var c=a.length;--c;)"INPUT"!==a[c].tagName&&"TEXTAREA"!==a[c].tagName&&
(a[c].unselectable=b)}function p(a,b){var c=a.bodyNode,q=b?"text":21>h("ff")?"-moz-none":"none";e&&"msUserSelect"!==e?c.style[e]=q:h("dom-selectstart")?b||a._selectstartHandle?b&&a._selectstartHandle&&(a._selectstartHandle.remove(),delete a._selectstartHandle):a._selectstartHandle=k(c,"selectstart",function(a){var b=a.target&&a.target.tagName;"INPUT"!==b&&"TEXTAREA"!==b&&a.preventDefault()}):(g(c,!b),b||a._unselectableHandle)?b&&a._unselectableHandle&&(a._unselectableHandle.remove(),delete a._unselectableHandle):
a._unselectableHandle=d.after(a,"renderRow",function(a){g(a,!0);return a})}h.add("dom-comparedocumentposition",function(a,b,c){return!!c.compareDocumentPosition});h.add("dom-selectstart","undefined"!==typeof document.onselectstart);var a=h("mac")?"metaKey":"ctrlKey",e=h("css-user-select"),q=(b=h("pointer"))&&"MS"===b.slice(0,2),u=b?b+(q?"Down":"down"):"mousedown",w=b?b+(q?"Up":"up"):"mouseup";"WebkitUserSelect"===e&&"undefined"!==typeof document.documentElement.style.msUserSelect&&(e=!1);return n(null,
{selectionDelegate:".dgrid-row",selectionEvents:u+","+w+",dgrid-cellfocusin",selectionTouchEvents:h("touch")?c.tap:null,deselectOnRefresh:!0,allowSelectAll:!1,selection:{},selectionMode:"extended",allowTextSelection:void 0,_selectionTargetType:"rows",create:function(){this.selection={};return this.inherited(arguments)},postCreate:function(){this.inherited(arguments);this._initSelectionEvents();var a=this.selectionMode;this.selectionMode="";this._setSelectionMode(a)},destroy:function(){this.inherited(arguments);
this._selectstartHandle&&this._selectstartHandle.remove();this._unselectableHandle&&this._unselectableHandle.remove();this._removeDeselectSignals&&this._removeDeselectSignals()},_setSelectionMode:function(a){a!==this.selectionMode&&(this.clearSelection(),this.selectionMode=a,this._selectionHandlerName="_"+a+"SelectionHandler",this._setAllowTextSelection(this.allowTextSelection))},_setAllowTextSelection:function(a){"undefined"!==typeof a?p(this,a):p(this,"none"===this.selectionMode);this.allowTextSelection=
a},_handleSelect:function(a,b){if(this[this._selectionHandlerName]&&this.allowSelect(this.row(b))&&("dgrid-cellfocusin"!==a.type||"mousedown"!==a.parentType)&&(a.type!==w||b===this._waitForMouseUp)){this._waitForMouseUp=null;this._selectionTriggerEvent=a;if(!a.keyCode||!a.ctrlKey||32===a.keyCode)if(!a.shiftKey&&a.type===u&&this.isSelected(b))this._waitForMouseUp=b;else this[this._selectionHandlerName](a,b);this._selectionTriggerEvent=null}},_singleSelectionHandler:function(b,c){b=b.keyCode?b.ctrlKey:
b[a];this._lastSelected===c?this.select(c,null,!b||!this.isSelected(c)):(this.clearSelection(),this.select(c),this._lastSelected=c)},_multipleSelectionHandler:function(b,c){var e=this._lastSelected,g=b.keyCode?b.ctrlKey:b[a],d;b.shiftKey||(d=g?null:!0,e=null);this.select(c,e,d,null,-1!==b.type.indexOf("mouse")?"mouse":b.type);e||(this._lastSelected=c)},_extendedSelectionHandler:function(b,c){(2===b.button?this.isSelected(c):b.keyCode?b.ctrlKey:b[a])||this.clearSelection(null,!0);this._multipleSelectionHandler(b,
c)},_toggleSelectionHandler:function(a,b){this.select(b,null,null)},_initSelectionEvents:function(){var b=this,e=this.contentNode,g=this.selectionDelegate;this._selectionEventQueues={deselect:[],select:[]};h("touch")&&!h("pointer")&&this.selectionTouchEvents?(k(e,c.selector(g,this.selectionTouchEvents),function(a){b._handleSelect(a,this);b._ignoreMouseSelect=this}),k(e,k.selector(g,this.selectionEvents),function(a){b._ignoreMouseSelect!==this?b._handleSelect(a,this):a.type===w&&(b._ignoreMouseSelect=
null)})):k(e,k.selector(g,this.selectionEvents),function(a){b._handleSelect(a,this)});this.addKeyHandler&&this.addKeyHandler(32,function(a){b._handleSelect(a,a.target)});if(this.allowSelectAll)this.on("keydown",function(c){c[a]&&65===c.keyCode&&!/\bdgrid-input\b/.test(c.target.className)&&(c.preventDefault(),b[b.allSelected?"clearSelection":"selectAll"]())});this._setCollection&&d.before(this,"_setCollection",function(a){b._updateDeselectionAspect(a)});this._updateDeselectionAspect()},_updateDeselectionAspect:function(a){function b(a,
b,e){if((a=c.row(a))&&c.selection[a.id])c[b](a,null,!0,null,e)}var c=this,e;this._removeDeselectSignals&&this._removeDeselectSignals();e=a&&a.track&&this._observeCollection?[d.before(this,"_observeCollection",function(a){e.push(a.on("delete",function(a){"undefined"===typeof a.index&&b(a.id,"deselect")}))}),d.after(this,"_observeCollection",function(a){e.push(a.on("update",function(c){"undefined"!==typeof c.index&&b(a.getIdentity(c.target),"select","update")}))},!0)]:[d.before(this,"removeRow",function(a,
b){b||(a=this.row(a))&&a.id in this.selection&&this.deselect(a)})];this._removeDeselectSignals=function(){for(var a=e.length;a--;)e[a].remove();e=[]}},allowSelect:function(){return!0},_fireSelectionEvent:function(a){var b=this._selectionEventQueues[a],c=this._selectionTriggerEvent,e;e={bubbles:!0,grid:this};c&&(e.parentType=c.type);e[this._selectionTargetType]=b;this._selectionEventQueues[a]=[];k.emit(this.contentNode,"dgrid-"+a,e)},_fireSelectionEvents:function(){var a=this._selectionEventQueues,
b;for(b in a)a[b].length&&this._fireSelectionEvent(b)},_select:function(a,b,c){var e,g,d;"undefined"===typeof c&&(c=!0);a.element||(a=this.row(a));if(!1===c||this.allowSelect(a))if(e=this.selection,g=!!e[a.id],null===c&&(c=!g),d=a.element,c||this.allSelected?e[a.id]=c:delete this.selection[a.id],d&&(c?m.add(d,"dgrid-selected"+(this.addUiClasses?" ui-state-active":"")):m.remove(d,"dgrid-selected ui-state-active")),c!==g&&d&&this._selectionEventQueues[(c?"":"de")+"select"].push(a),b)if(b.element||(b=
this.row(b)),b){if(b=b.element)for(e=this._determineSelectionDirection(d,b),e||(b=document.getElementById(b.id),e=this._determineSelectionDirection(d,b));a.element!==b&&(a=this[e](a));)this._select(a,null,c)}else this._lastSelected=d},_determineSelectionDirection:h("dom-comparedocumentposition")?function(a,b){a=b.compareDocumentPosition(a);return a&1?!1:2===a?"down":"up"}:function(a,b){return 1>b.sourceIndex?!1:b.sourceIndex>a.sourceIndex?"down":"up"},select:function(a,b,c){this._select(a,b,c);this._fireSelectionEvents()},
deselect:function(a,b){this.select(a,b,!1)},clearSelection:function(a,b){this.allSelected=!1;for(var c in this.selection)a!==c&&this._select(c,null,!1);b||(this._lastSelected=null);this._fireSelectionEvents()},selectAll:function(){this.allSelected=!0;this.selection={};for(var a in this._rowIdToObject){var b=this.row(this._rowIdToObject[a]);this._select(b.id,null,!0)}this._fireSelectionEvents()},isSelected:function(a){if("undefined"===typeof a||null===a)return!1;a.element||(a=this.row(a));return a.id in
this.selection?!!this.selection[a.id]:this.allSelected&&(!a.data||this.allowSelect(a))},refresh:function(){this.deselectOnRefresh&&this.clearSelection();this._lastSelected=null;return this.inherited(arguments)},renderArray:function(){var a=this.inherited(arguments),b=this.selection,c,e,g;for(c=0;c<a.length;c++)e=this.row(a[c]),(g=e.id in b?b[e.id]:this.allSelected)&&this.select(e,null,g,null,"renderArray");this._fireSelectionEvents();return a}})})},"xide/manager/BeanManager":function(){define("dcl/dcl dojo/_base/lang xdojo/has xide/utils xide/encoding/MD5 xide/registry xide/data/TreeMemory".split(" "),
function(n,m,k,h,d,b,c){k=n(null,{declaredClass:"xide.manager.BeanManager",beanNamespace:"beanNS",beanName:"beanName",beanPriority:-1,createItemStruct:function(b,c,a,e,d,h){return{name:b,isDir:d,parentId:a,path:e,beanType:h,scope:c}},getMetaValue:function(b,c){return h.getCIInputValueByName(h.getAt(b,this.itemMetaPath||"user"),c)},getStore:function(){return this.store},isValid:function(){return null!=this.store},initStore:function(b){this.store=new c({data:b.items,idProperty:"path"});this.onStoreReady(this.store);
return this.store},onStoreReady:function(){},_onReloaded:function(b){this.mergeNewModule(b.prototype);b=this.declaredClass;(b=m.getObject(h.replaceAll("/",".",b))||m.getObject(b))&&b.prototype&&b.prototype.solve&&this.mergeNewModule(b.prototype)}});return n(k,{getViewTarget:function(){return this.ctx.getApplication().mainView.getNewAlternateTarget()},getRightTopTarget:function(b,c,a,e){return this.ctx.getApplication().mainView.getRightTopTarget(b,c,a,e)},getLayoutRightMain:function(b,c){return this.ctx.getApplication().mainView.getLayoutRightMain(b,
c)},getRightBottomTarget:function(b,c){return this.ctx.getApplication().mainView.getRightBottomTarget(b,c)},getViewId:function(b,c){return this.beanNamespace+d(h.toString(b.scope)+h.toString(b.path),1)+(null!=c?c:"")},getView:function(c,d){c=this.getViewId(c,d);return b.byId(c)},createGroup:function(b,c,a){return this.callMethodEx(null,"createGroup",[b,c],a,!0)},removeGroup:function(b,c,a,e){return this.callMethodEx(null,"removeGroup",[b,c,a],e,!0)},removeItem:function(b,c,a,e){return this.callMethodEx(null,
"removeItem",[b,c,a],e,!0)},updateCI:function(b,c,a,e){b&&e&&this.updateItemMetaData(h.toString(e.scope),h.toString(e.path),this.itemMetaStorePath||"/inputs",{id:h.toString(b.id)},{value:c})},updateItemMetaData:function(b,c,a,e,d,h,k){return this.callMethodEx(null,"updateItemMetaData",[b,c,a,e,d],h,!1)},mergeNewModule:function(b){for(var c in b){var a=b[c];a&&_.isFunction(a)&&(this[c]=a)}}})})},"xide/manager/Context":function(){define("dcl/dcl dojo/Deferred dojo/has xide/manager/ContextBase xide/types xide/utils require dojo/promise/all xdojo/has!host-browser?xide/manager/Context_UI".split(" "),
function(n,m,k,h,d,b,c,g,p){k.add("xlog",function(){return!0},!0);k=n([h,p],{declaredClass:"xide.manager.Context",application:null,contextManager:null,fileManager:null,resourceManager:null,notificationManager:null,serviceObject:null,pluginManager:null,windowManager:null,logManager:null,mountManager:null,config:null,managers:null,namespace:"xide.manager.",defaultNamespace:"xide.manager.",vfsMounts:null,xideServiceClient:null,fileUpdateTimes:{},onXIDEMessage:function(a,e){if(a&&a.event){var g=this;
if(a.event===d.EVENTS.ON_FILE_CHANGED)if(a.data&&a.data.mask&&-1!==a.data.mask.indexOf("delete"))g.publish(d.EVENTS.ON_FILE_DELETED,a);else if(a.data&&"delete"==a.data.type)g.publish(d.EVENTS.ON_FILE_DELETED,a);else{var h=a.data.path,k=(new Date).getTime();if(g.fileUpdateTimes[h]&&1E3>k-g.fileUpdateTimes[h])g.fileUpdateTimes[h]=k;else if(!1!==e&&g.publish(a.event,a),g.fileUpdateTimes[h]=k,e=b.replaceAll("\\","/",a.data.path),e=b.replaceAll("//","/",a.data.path),e=e.replace(/\\/g,"/"),-1===e.indexOf("/build/")&&
null!=e&&null!=e.indexOf){if(e.match(/\.css$/))g.onCSSChanged({path:e});if(e.match(/\.js$/)){var p=a.data.modulePath;if(p){p=p.replace(".js","");try{c(p)}catch(v){}a="data/system/drivers";-1!=e.indexOf(a)&&(a=e.substr(e.indexOf(a)+(a.length+1),e.length),a=a.replace(".js",""),p="system_drivers/"+a);a="user/drivers";-1!=e.indexOf(a)&&(a=e.substr(e.indexOf(a)+(a.length+1),e.length),a=a.replace(".js",""),p="user_drivers/"+a);(a=(a=this.getResourceManager())?a.getVariable("VFS_CONFIG")||{}:null)&&a.user_drivers&&
-1!==e.indexOf(a.user_drivers)&&(a=a.user_drivers,a=a.replace(/\/+$/,""),a=e.substr(e.indexOf(a)+(a.length+1),e.length),a=a.replace(".js",""),p="user_drivers/"+a);p=b.replaceAll(".","/",p);-1===p.indexOf("/build/")&&setTimeout(function(){g._reloadModule(p,!0)},400)}}}}}},onNodeServiceStoreReady:function(a){},mergeFunctions:function(a,b,c,d){for(var e in b)_.isFunction(b[e])&&b[e]&&a&&(a[e]=b[e])},reloadModules:function(a,b){var e=new m,d=[],h=[],k=this;c({cacheBust:"time\x3d"+(new Date).getTime()});
_.each(a,function(a){var e=null,g=new m;!1!==b&&(e=c(a));c.undef(a);c([a],function(a){e&&k.mergeFunctions(e.prototype,a.prototype);h.push(a);g.resolve()});d.push(g)});g(d).then(function(){e.resolve(h);c({cacheBust:null})});return e},_reloadModule:function(a,e){var g=null,h=new m;if(-1===a.indexOf("nodejs")){a=a.replace("0/8","0.8");a=a.replace("/src/","/");var k=this.getModule(a);if(k&&k.prototype&&k.prototype.reloadModule)return k.prototype.reloadModule();var g=c.on("error",function(a){g.remove();
h.reject(a)}),p=this.getModule(a);if(!p&&(p="undefined"!==typeof a?p:null,!p&&"undefined"!==typeof window))if(p=b.getAt(window,b.replaceAll("/",".",a),null))k=p;else try{p=c(b.replaceAll(".","/",a))}catch(A){}p&&(k=p);var n=document.getElementsByTagName("script");_.each(n,function(b){b&&b.src&&-1!==b.src.indexOf(a)&&b.parentElement.removeChild(b)});c.undef(a);var x=this;e?setTimeout(function(){c({cacheBust:"time\x3d"+(new Date).getTime(),waitSeconds:5});try{c([a],function(b){c({cacheBust:null});if(_.isString(b))console.error("module reloaded failed : "+
b+" for module : "+a);else{b.modulePath=a;k&&(x.mergeFunctions(k.prototype,b.prototype,k,b),k.prototype&&k.prototype._onReloaded&&k.prototype._onReloaded(b));if(p&&p.onReloaded)p.onReloaded(b,p);x.publish(d.EVENTS.ON_MODULE_RELOADED,{module:a,newModule:b});b.prototype&&b.prototype.declaredClass&&x.publish(d.EVENTS.ON_MODULE_UPDATED,{moduleClass:b.prototype.declaredClass,moduleProto:b.prototype});x.setModule(a,b);h.resolve(b)}})}catch(A){console.error("error reloading module",A),logError(A,"error reloading module"),
h.reject(A)}},100):h.resolve();return h}},onCSSChanged:function(a){a=a.path;this.findVFSMount(a);a=b.replaceAll("//","/",a);a=a.replace("/PMaster/","");var c=window.xappOnStyleSheetChanged;c&&c(a)},onDidChangeFileContent:function(a){if(!a.didProcess&&(a.didProcess=!0,this.vfsMounts&&a.path)){var c=a.path;if(-1!=c.indexOf(".css"))this.onCSSChanged(a);else if(-1==c.indexOf("resources")&&-1==c.indexOf("meta")&&-1!=c.indexOf(".js")){var c=a.mount.replace("/",""),d=null;if(this.vfsMounts[c]){var d=""+
a.path,d=d.replace("./",""),d=d.replace("/","."),d=d.replace(".js",""),d=b.replaceAll(".","/",d),g=this;setTimeout(function(){try{g._reloadModule(d,!0)}catch(w){console.error("error reloading module",w)}},100)}}}},getMount:function(a){var b=this.getResourceManager();return(b=b?b.getVariable("VFS_CONFIG")||{}:null)&&b[a]?b[a]:null},toVFSShort:function(a,c){var e=this.getResourceManager();return(e=e?e.getVariable("VFS_CONFIG")||{}:null)&&e[c]&&(c=e[c],c=b.replaceAll("//","/",c),c=c.replace(/\/+$/,""),
-1!==a.indexOf(c))?(c=c.replace(/\/+$/,""),a.substr(a.indexOf(c)+(c.length+1),a.length)):null},findVFSMount:function(a){var c=this.getResourceManager();if(c=c?c.getVariable("VFS_CONFIG")||{}:null)for(var d in c){var g=c[d],g=b.replaceAll("//","/",g),g=g.replace(/\/+$/,"");if(-1!==a.indexOf(g))return d}return null},getBlockManager:function(){return this.blockManager},getPluginManager:function(){return this.pluginManager},getService:function(){return this.serviceObject},getFileManager:function(){return this.fileManager},
getResourceManager:function(){return this.resourceManager},getMountManager:function(){return this.mountManager},getContextManager:function(){return this.contextManager},getLogManager:function(){return this.logManager},getApplication:function(){return this.application},constructor:function(a,b){this.managers=[];this.config=a;this.args=b;this.language="en";this.subscribe(d.EVENTS.ON_CHANGED_CONTENT,this.onDidChangeFileContent)},prepare:function(){this.config&&this.initWithConfig(this.config)},initWithConfig:function(a){a&&
a.mixins&&this.doMixins(a.mixins)},isEditor:function(){return this.args&&this.args.file}});n.chainAfter(k,"constructManagers");n.chainAfter(k,"initManagers");return k})},"dojo/_base/declare":function(){define(["./kernel","../has","./lang"],function(n,m,k){function h(a,b){throw Error("declare"+(b?" "+b:"")+": "+a);}function d(a,b,c){var e,d,g,k,q,p,m,r=this._inherited=this._inherited||{};"string"==typeof a&&(e=a,a=b,b=c);c=0;k=a.callee;(e=e||k.nom)||h("can't deduce a name to call inherited()",this.declaredClass);
q=this.constructor._meta;g=q.bases;m=r.p;if("constructor"!=e){if(r.c!==k&&(m=0,p=g[0],q=p._meta,q.hidden[e]!==k)){(d=q.chains)&&"string"==typeof d[e]&&h("calling chained method with inherited: "+e,this.declaredClass);do if(q=p._meta,d=p.prototype,q&&(d[e]===k&&d.hasOwnProperty(e)||q.hidden[e]===k))break;while(p=g[++m]);m=p?m:-1}if(p=g[++m])if(d=p.prototype,p._meta&&d.hasOwnProperty(e))c=d[e];else{k=y[e];do if(d=p.prototype,(c=d[e])&&(p._meta?d.hasOwnProperty(e):c!==k))break;while(p=g[++m])}c=p&&c||
y[e]}else{if(r.c!==k&&(m=0,(q=g[0]._meta)&&q.ctor!==k)){for((d=q.chains)&&"manual"===d.constructor||h("calling chained constructor with inherited",this.declaredClass);(p=g[++m])&&(!(q=p._meta)||q.ctor!==k););m=p?m:-1}for(;(p=g[++m])&&!(c=(q=p._meta)?q.ctor:p););c=p&&c}r.c=c;r.p=m;if(c)return!0===b?c:c.apply(this,b||a)}function b(a,b){return"string"==typeof a?this.__inherited(a,b,!0):this.__inherited(a,!0)}function c(a,b,c){var e=this.getInherited(a,b);if(e)return e.apply(this,c||b||a)}function g(a){for(var b=
this.constructor._meta.bases,c=0,e=b.length;c<e;++c)if(b[c]===a)return!0;return this instanceof a}function p(a,b){for(var c in b)"constructor"!=c&&b.hasOwnProperty(c)&&(a[c]=b[c]);if(m("bug-for-in-skips-shadowed"))for(var e=k._extraNames,d=e.length;d;)c=e[--d],"constructor"!=c&&b.hasOwnProperty(c)&&(a[c]=b[c])}function a(a){A.safeMixin(this.prototype,a);return this}function e(a,b){return A([this].concat(a),b||{})}function q(a,b){return function(){var c=arguments,e=c,d=c[0],g,h;h=a.length;var k;if(!(this instanceof
c.callee))return x(c);if(b&&(d&&d.preamble||this.preamble))for(k=Array(a.length),k[0]=c,g=0;;){(d=c[0])&&(d=d.preamble)&&(c=d.apply(this,c)||c);d=a[g].prototype;(d=d.hasOwnProperty("preamble")&&d.preamble)&&(c=d.apply(this,c)||c);if(++g==h)break;k[g]=c}for(g=h-1;0<=g;--g)d=a[g],(d=(h=d._meta)?h.ctor:d)&&d.apply(this,k?k[g]:c);(d=this.postscript)&&d.apply(this,e)}}function u(a,b){return function(){var c=arguments,e=c,d=c[0];if(!(this instanceof c.callee))return x(c);b&&(d&&(d=d.preamble)&&(e=d.apply(this,
e)||e),(d=this.preamble)&&d.apply(this,e));a&&a.apply(this,c);(d=this.postscript)&&d.apply(this,c)}}function w(a){return function(){var b=arguments,c=0,e,d;if(!(this instanceof b.callee))return x(b);for(;e=a[c];++c)if(e=(d=e._meta)?d.ctor:e){e.apply(this,b);break}(e=this.postscript)&&e.apply(this,b)}}function r(a,b,c){return function(){var e,d,g=0,h=1;c&&(g=b.length-1,h=-1);for(;e=b[g];g+=h)d=e._meta,(e=(d?d.hidden:e.prototype)[a])&&e.apply(this,arguments)}}function v(a){C.prototype=a.prototype;a=
new C;C.prototype=null;return a}function x(a){var b=a.callee,c=v(b);b.apply(c,a);return c}function A(c,m,n){"string"!=typeof c&&(n=m,m=c,c="");n=n||{};var x,C,G,D,H,L,K,M=1,U=m;if("[object Array]"==B.call(m)){M=c;C=[];G=[{cls:0,refs:[]}];D={};L=1;for(var V=m.length,I=0,T,Z,S,W;I<V;++I){(T=m[I])?"[object Function]"!=B.call(T)&&h("mixin #"+I+" is not a callable constructor.",M):h("mixin #"+I+" is unknown. Did you use dojo.require to pull it in?",M);Z=T._meta?T._meta.bases:[T];S=0;for(T=Z.length-1;0<=
T;--T)W=Z[T].prototype,W.hasOwnProperty("declaredClass")||(W.declaredClass="uniqName_"+E++),W=W.declaredClass,D.hasOwnProperty(W)||(D[W]={count:0,refs:[],cls:Z[T]},++L),W=D[W],S&&S!==W&&(W.refs.push(S),++S.count),S=W;++S.count;G[0].refs.push(S)}for(;G.length;){S=G.pop();C.push(S.cls);for(--L;x=S.refs,1==x.length;){S=x[0];if(!S||--S.count){S=0;break}C.push(S.cls);--L}if(S)for(I=0,V=x.length;I<V;++I)S=x[I],--S.count||G.push(S)}L&&h("can't build consistent linearization",M);T=m[0];C[0]=T?T._meta&&T===
C[C.length-T._meta.bases.length]?T._meta.bases.length:1:0;L=C;G=L[0];M=L.length-G;m=L[M]}else L=[0],m?"[object Function]"==B.call(m)?(G=m._meta,L=L.concat(G?G.bases:m)):h("base class is not a callable constructor.",c):null!==m&&h("unknown base class. Did you use dojo.require to pull it in?",c);if(m)for(C=M-1;;--C){x=v(m);if(!C)break;G=L[C];(G._meta?p:z)(x,G.prototype);D=new Function;D.superclass=m;D.prototype=x;m=x.constructor=D}else x={};A.safeMixin(x,n);G=n.constructor;G!==y.constructor&&(G.nom=
"constructor",x.constructor=G);for(C=M-1;C;--C)(G=L[C]._meta)&&G.chains&&(K=z(K||{},G.chains));x["-chains-"]&&(K=z(K||{},x["-chains-"]));G=!K||!K.hasOwnProperty("constructor");L[0]=D=K&&"manual"===K.constructor?w(L):1==L.length?u(n.constructor,G):q(L,G);D._meta={bases:L,hidden:n,chains:K,parents:U,ctor:n.constructor};D.superclass=m&&m.prototype;D.extend=a;D.createSubclass=e;D.prototype=x;x.constructor=D;x.getInherited=b;x.isInstanceOf=g;x.inherited=F;x.__inherited=d;c&&(x.declaredClass=c,k.setObject(c,
D));if(K)for(H in K)x[H]&&"string"==typeof K[H]&&"constructor"!=H&&(G=x[H]=r(H,L,"after"===K[H]),G.nom=H);return D}var z=k.mixin,y=Object.prototype,B=y.toString,C=new Function,E=0,F=n.config.isDebug?c:d;n.safeMixin=A.safeMixin=function(a,b){var c,e;for(c in b)e=b[c],e===y[c]&&c in y||"constructor"==c||("[object Function]"==B.call(e)&&(e.nom=c),a[c]=e);if(m("bug-for-in-skips-shadowed"))for(var d=k._extraNames,g=d.length;g;)c=d[--g],e=b[c],e===y[c]&&c in y||"constructor"==c||("[object Function]"==B.call(e)&&
(e.nom=c),a[c]=e);return a};return n.declare=A})},"xgrid/ThumbRenderer":function(){define(["xdojo/declare","xide/types","dojo/dom-construct","./Renderer"],function(n,m,k,h){m={isThumbGrid:!1,_getLabel:function(){return"Thumb"},_getIcon:function(){return"fa-th-large"},activateRenderer:function(d){this._showHeader(!1);this.isThumbGrid=!0},deactivateRenderer:function(d){this.isThumbGrid=!1},renderRow:function(d){return d.render?d.render(d,this.inherited):k.create("span",{className:"fileGridCell",innerHTML:'\x3cspan class\x3d"fa-cube fa-5x""\x3e\x3c/span\x3e \x3cdiv class\x3d"name"\x3e'+
d.name+"\x3c/div\x3e",style:"color:blue;max-width:200px;float:left;margin:18px;padding:18px;"})}};n=n("xgrid.ThumbRenderer",[h],m);n.Implementation=m;return n})},"davinci/ve/widget":function(){define("davinci/html/HTMLElement ../Runtime ./metadata dojo/Deferred dojo/_base/lang ./DijitWidget ./GenericWidget ./DeliteWidget ./HTMLWidget ./ObjectWidget dojo/window".split(" "),function(n,m,k,h,d,b,c,g,p,a,e){var q={},u=function(a,b,c){for(var e=0;e<c.children.length;e++){var d=b.childNodes[e],g=c.children[e];
d&&1==d.nodeType&&"HTMLElement"==g.elementType&&(d.id=a.getUniqueID(g),u(a,d,g))}},w={_dojo:function(a){a=(a=a?a.ownerDocument||a:dojo.doc)||dojo.doc;return e.get(a).dojo||dojo},_dijit:function(a){return e.get(a?a.ownerDocument||a:dojo.doc).dijit||dijit},parseStyleValues:function(a){var b=[];a&&dojo.forEach(a.split(";"),function(a){var c=a.indexOf(":");if(0<c){var e=a.substring(0,c).trim();a=a.substring(c+1).trim();c={};c[e]=a;b.push(c)}});return b},retrieveStyleProperty:function(a,b,c){var e=c;a&&
dojo.some(a,function(a){if(a.hasOwnProperty(b))return e=a[b],!0});return e},setStyleProperty:function(a,b,c){var e=!1;a&&dojo.some(a,function(a){if(a.hasOwnProperty(b))return a[b]=c,e=!0});if(!e){var d={};d[b]=c;a.push(d)}},getStyleString:function(a){var b="";dojo.forEach(a,function(a){for(var c in a)a[c]&&(b=b+c+":"+a[c]+";")});return b},getEnclosingWidget:function(a){var b=w.getEnclosingWidgetForRichText(a);if(b)return b;for(;a;){if(a._dvWidget)return a._dvWidget;a=a.parentNode||a.domNode&&a.domNode.parentNode}},
getEnclosingWidgetForRichText:function(a){if(a&&a._dvWidget)return"html.stickynote"===a._dvWidget.type||"html.richtext"===a._dvWidget.type?a._dvWidget:a.parentNode?w.getEnclosingWidgetForRichText(a.parentNode):null},getUniqueObjectId:function(a,b){if(a){a=a.substring((a.lastIndexOf("/")||a.lastIndexOf("."))+1);var c=1,e=a+"_"+c++;for(b=w._dojo(b);b.getObject(e)||b.byId(e);)e=a+"_"+c++;return e}},_remove_prefix:function(a){if(a){for(var b=a,c="dijit/form/ dijit/layout/ dijit/ dojox/mobile/ html. html/ OpenAjax. OpenAjax/".split(" "),
e=0;e<c.length;e++)if(0==a.indexOf(c[e])){b=a.substr(c[e].length);"html."==c[e]&&(b="\x26lt;"+b+"\x26gt;");break}return b}return""},_getWidgetNameText:function(a){return"\x3cspan class\x3d'propertiesTitleWidgetName'\x3e"+this._remove_prefix(a)+"\x3c/span\x3e"},_getWidgetClassText:function(a,b){var c="\x3cspan class\x3d'propertiesTitleClassName'\x3e";a&&(c+="#"+a);b&&(c+="."+b.replace(/\s+/g,"."));return c+"\x3c/span\x3e"},getLabelForNode:function(a){var b=a.getAttribute("data-dojo-type")||a.getAttribute("dojoType");
b||(b=a.tagName.toLowerCase());b=b.replace(/\./g,"/");b=this._getWidgetNameText(b);a.id&&(b+=this._getWidgetClassText(a.id));return b},getLabel:function(a){var b=this._getWidgetNameText(a.type),c,e=w.getWidgetHelper(a.type);e&&e.getWidgetText&&(c=e.getWidgetText(a));e&&e.getWidgetNameText&&(b=e.getWidgetNameText(a));var d=a.domNode;if(!a.type)return"unknown type";switch(a.type.replace(/\//g,".")){case "dijit.form.ComboBox":case "dijit.form.Button":c=a.attr("label");break;case "dijit.layout.ContentPane":c=
a.attr("title");break;case "html.label":c=d.innerHTML;break;case "html.img":c=d.alt,c||(c=d.title)}c&&(b+="\x3cspan class\x3d'propertiesTitleWidgetText'\x3e"+c+"\x3c/span\x3e ");e&&e.getWidgetDescriptor&&(b+=" \x3cspan class\x3d'propertiesTitleWidgetDescriptor'\x3e"+e.getWidgetDescriptor(a)+"\x3c/span\x3e ");var g=a._srcElement;c=a.getId();g=(g=g&&g.getAttribute("class"))&&g.trim();if(c||g)b=e&&e._getWidgetClassText?b+e._getWidgetClassText(c,g):b+this._getWidgetClassText(c,g);e&&e.getWidgetTextExtra&&
(b+=e.getWidgetTextExtra(a));"html.img"==a.type&&(b+="\x3cspan\x3e"+d.src.substr(d.src.lastIndexOf("/")+1)+"\x3c/span\x3e");return b},byId:function(a,b){if(b=dojo.byId(a,b&&b.body?b:void 0)){if(b._dvWidget)return b._dvWidget;if((b=w.getEnclosingWidget(b))&&b.id==a)return b}if(m.currentEditor&&m.currentEditor.currentEditor&&m.currentEditor.currentEditor.context)return m.currentEditor.currentEditor.context.widgetHash[a]},byNode:function(a){if(a._dvWidget)return a._dvWidget},createWidget:function(h,
q,m){if(h&&h.type){var r=dojo.mixin({},h),v=!1;"xblox/RunScript"===r.type&&"xblox/CSSState"===r.type&&(v=!0,delete h.properties.style);r.properties&&(r.properties=dojo.mixin({},h.properties));var x=r.type,B,C,E=k.query(x);if(E){r.properties&&("content"in r.properties&&!r.properties.content&&delete r.properties.content,r.properties.theme&&(C=r.properties.theme.themeName));m&&m.metadata&&m.metadata.childOverride&&d.mixin(r.properties,m.metadata.childOverride);h=k.queryDescriptor(x,"widgetClass");!h&&
q&&q.widgetClass&&(h=q.widgetClass);if(!0===E.delite||"xblox/RunScript"===x||"xblox/CSSState"===x||"xblox/Script"===x||"xblox/StyleSate"===x)h="delite";"delite"==h?B=g:"object"==h?(B=a,E.attributes=E.attributes||{},E.attributes.dojoType=x):"html"==h?B=p:"dijit"==h?B=b:null==B&&(B=c);if(B){h=E.content.trim().replace(/\s+/g," ");e.get(dojo.doc);var F=e.get(dojo.doc).dojo._toDom(h);F.fromWidgetData&&F.fromWidgetData(r);if(11===F.nodeType){m=0;var G=null;h=F.childNodes;for(var D=0;D<h.length&&!(8!==h[D].nodeType&&
(m++,G=h[D],1<m));D++);if(1<m){console.error("ERROR: complex widget content not supported");return}F=G}if(!F)return null;var H=new n(F.tagName.toLowerCase());if(F.hasAttributes())for(h=F.attributes,m=h.length-1;0<=m;--m)v&&"style"===h[m].name||H.addAttribute(h[m].name,h[m].value);F.innerHTML&&H.addText(F.innerHTML);v=k.queryDescriptor(x,"requiresId");h=k.queryDescriptor(x,"name");v=v&&h.match(/^[A-Za-z]\w*$/)?h:void 0;F.id=r.properties&&r.properties.id||(r.context?r.context.getUniqueID(H,v):"");if(h=
r.children)dojo.isString(h)?(F.innerHTML=h,F.nodeName.toLowerCase(),v=H._getAttribute("id"),H.addText(h),h=H.getText(r.context),H.children=[],H.setText(h),v&&H.addAttribute(v.name,v.value,v.noPersist),u(r.context,F,H)):dojo.forEach(h,function(a){if(a)if(dojo.isString(a))7<a.length&&"\x3c!--"==a.substring(0,4)&&"--\x3e"==a.substring(a.length-3)?(F.appendChild(dojo.doc.createComment(a.substring(4,a.length-3))),H.addComment(a.substring(4,a.length-3))):(F.appendChild(dojo.doc.createTextNode(a)),H.addText(a));
else if(a.context=r.context,a=w.createWidget(a))F.appendChild(a.domNode),H.addChild(a._srcElement)});(v=w.getWidgetHelper(x))&&v.preProcessData&&(r=v.preProcessData(r));v={};h={};for(var J in r.properties)m=r.properties[J],null!=m&&("on"==J.substr(0,2).toLowerCase()||"a"==H.tag.toLowerCase()&&"href"==J.toLowerCase()?h[J]=m:v[J]=m);E=new B(v,F,x,E,H,x);E._srcElement=H;E.chart&&r.properties&&r.properties.theme&&(E.chart.theme.themeName=C);r.scripts&&(E.scripts=r.scripts);r.context&&(E._edit_context=
r.context);r.properties&&(E.setProperties(v),E.setProperties(h,!0));if(r.maqAppStates||r.maqDeltas)r.maqAppStates&&(E.domNode._maqAppStates=dojo.clone(r.maqAppStates)),r.maqDeltas&&(E.domNode._maqDeltas=dojo.clone(r.maqDeltas)),C=davinci.states.serialize(E.domNode),C.maqAppStates&&E._srcElement.addAttribute(davinci.states.APPSTATES_ATTRIBUTE,C.maqAppStates),C.maqDeltas&&E._srcElement.addAttribute(davinci.states.DELTAS_ATTRIBUTE,C.maqDeltas);(v=w.getWidgetHelper(x))&&v.cleanSrcElement&&v.cleanSrcElement(E._srcElement,
q);v&&v.postCreateWidget&&v.postCreateWidget(E,q);return E}}else console.error("cant get widget meta data : ",h)}},_createSrcElement:function(a){var b=new n(a.tagName.toLowerCase());if(a.hasAttributes()){a=a.attributes;for(var c=a.length-1;0<=c;--c)b.addAttribute(a[c].name,a[c].value)}return b},getWidgetHelper:function(a){return q[a]},requireWidgetHelper:function(a){var b=new h;k.getHelper(a,"helper").then(function(c){c?b.resolve(q[a]=new c):b.resolve()});return b},getWidget:function(e,d){if(e&&1==
e.nodeType){var h=w.byNode(e);if(!h){if(e){for(var h={properties:{}},k=0;k<e.attributes.length;k++){var q=e.attributes[k];if(q.specified&&q.nodeValue){var m=q.nodeName.toLowerCase();if("id"!=m&&"widgetid"!=m&&"style"!=m&&"_"!=m.charAt(0)){if((q=q.nodeValue)&&"class"==m&&(q=q.replace("HtmlWidget","").trim(),!q))continue;h.properties[m]=q}}}"script"==e.tagName.toLowerCase()&&(h.children=e.innerHTML||void 0)}else h=void 0;if(h.properties.is||null!=e.render||-1!==e.tagName.indexOf("D-"))return h=new g(h,
e);k=e.getAttribute("dvwidget");if(e.hasAttribute("widgetid")||e.hasAttribute("data-dojo-type")||e.hasAttribute("dojotype"))d=w._dijit(e).byNode(e),k=e.getAttribute("data-dojo-type")||e.getAttribute("dojotype"),h=d?new b(h,e,d,null,null,k):new a(h,e);else if(k)h=new c(h,e,k);else{if("svg"==e.nodeName)return;h=new p(h,e,d)}}return h}}};dojo.setObject("davinci.ve.widget",w);return w})},"xideve/xblox/Wizards":function(){define("dojo/_base/declare dojo/_base/lang davinci/ve/input/SmartInput dojo/_base/array dojo/_base/connect xide/mixins/ReloadMixin xide/mixins/EventedMixin ./ContainerInput davinci/Workbench davinci/ve/widget xide/types xide/utils xide/Wizards xide/views/CIView davinci/ve/metadata".split(" "),
function(n,m,k,h,d,b,c,g,p,a,e,q,u,w,r){n=n("xideve.xblox.Wizards",[c,b],{createCISPane:function(a,b,c){a={viewStyle:"padding:0px;height:auto;",options:{groupOrder:{General:0,Advanced:1,Description:2}},cis:a,wizard:b};c&&m.mixin(a,c);return q.addWidget(w,a,this,b,!0,null,[WizardPaneBase])},createWizard:function(a,b){this._lastWizard=a=u.createWizard(a,!1);var c=a.wizard;b&&q.addWidget(w,{viewStyle:"padding:0px;",options:{groupOrder:{General:0,Advanced:1,Description:2}},cis:b},this,c,!0,null,[WizardPaneBase]);
return a},onReloaded:function(){},initWithVariable:function(a,b,c,e,d){b=this.createWizard("Variable Wizard");var g=b.dialog,h=b.wizard,k,p,m=a.domNode,n=function(){var a=k[0].value,b={sourceevent:"onDriverVariableChanged",targetproperty:p[0].value,mode:a};1==a&&(b.targetevent="");d(b);h.destroy();g.hide().then(function(){q.destroy(g)});m.onSettingsChanged(b)};k=[q.createCI("Scope",3,"system_drivers",{options:[{label:"Update a widget property when its value changed",value:1},{label:"User",value:"user_drivers"}],
value:null!=m.mode?m.mode:1,widget:{"class":"xide.form.Radio"}})];a=this.createCISPane(k,h,{inserts:[{query:".dijitDialogPaneContent",insert:'\x3cdiv\x3e\x3cspan class\x3d"wizardPaneText"\x3eWhat you want to do with the variable?\x3c/span\x3e\x3c/div\x3e',place:"first"}],_checkPass:function(){return!0}});p=[q.createCI("",13,"widgetProperty",{value:m.targetproperty,widget:{showLabel:!1}})];b=this.createCISPane(p,h,{inserts:[{query:".dijitDialogPaneContent",insert:'\x3cdiv\x3e\x3cspan class\x3d"wizardPaneText"\x3eWhich property you want to update?\x3c/span\x3e\x3c/div\x3e',
place:"first"}],canGoBack:!0,_checkPass:function(){return!0},doneFunction:function(){n()}});a.isLastChild=!1;b.isLastChild=!0;h._checkButtons();g.show().then(function(){g.resize()});this.initReload()}});n.prototype.instance=new n;n.prototype.instance.initReload();r.getSmartInput("xblox/RunScript");return n})},"dijit/tree/ForestStoreModel":function(){define(["dojo/_base/declare"],function(n){return n(null,{})})},"xcf/manager/DeviceManager_UI":function(){define("dcl/dcl xdojo/has xide/types xide/utils xide/factory xaction/Action xide/registry xlog/views/LogGrid xcf/views/DriverConsole xide/views/_CIDialog dojo/Deferred xcf/views/ExpressionConsole xcf/widgets/LoggingWidget xide/lodash dojo/_base/kernel dojo/_base/lang xide/$ xide/console xide/interface/Route xide/mixins/ActionProvider xide/views/CIGroupedSettingsView xide/data/Reference xide/data/ReferenceMapping xcf/views/DeviceTreeView xcf/model/DefaultDevice xide/views/_CIPanelDialog xcf/widgets/CommandPicker xdojo/has!xtrack?xide/interface/Track xide/noob".split(" "),
function(n,m,k,h,d,b,c,g,p,a,e,q,u,w,r,v,x,A,z,y,B,C,E,F,G,D,H,J,Q){function N(a,b,c,e,d,g){var q=k.LOGGING_FLAGS;e=e?"\x3cbr/\x3e"+e:"";b&q.STATUS_BAR&&this.publish(k.EVENTS.ON_STATUS_MESSAGE,{text:a+" : "+c.info.toString()+' \x3cspan class\x3d"text-warning"\x3e'+h.replaceAll("\x3cbr/\x3e","",e)+"\x3c/span\x3e",type:d||"info"});if(b&q.DEV_CONSOLE){d=d||"debug";var p=a+" : "+c.info.toString()+e,p=p.split("\x3cbr/\x3e").join("\n");if(A[d])A[d](p,c)}b&q.POPUP&&this.ctx.getNotificationManager().postMessage(h.mixin({message:a+
" : "+c.info.title+" "+c.info.toString()+e,type:d||"info",showCloseButton:!0,duration:3E3},g))}function O(a,b,c,e,d,g){a=k.LOG_OUTPUT;var q=k.LOGGING_FLAGS;if(!1===c(b))return!1;var p=this.getDeviceStoreItem(b.device)||(b.device&&b.device.info?this.getDeviceStoreItem(b.device.info):null);if(p)switch(c=(p.info||this.toDeviceControlInfo(p)).loggingFlags,c=w.isString(c)?h.fromJson(c):c||{},e){case a.DEVICE_CONNECTED:return N.apply(this,["Device Connected",this._getLoggingFlags(a.DEVICE_CONNECTED,q.GLOBAL_CONSOLE|
q.POPUP|q.STATUS_BAR|q.DEVICE_CONSOLE,c),p,d,g]);case a.DEVICE_DISCONNECTED:return b.error&&(d="Code: "+b.error.code),N.apply(this,["Device Disconnected",this._getLoggingFlags(a.DEVICE_DISCONNECTED,q.GLOBAL_CONSOLE|q.POPUP|q.STATUS_BAR|q.DEVICE_CONSOLE,c),p,d,g,p._userStopped?{actions:{reconnect:{label:"Abort Reconnect",action:function(){p._userStopped=!0;this.cancel()}}}}:{}]);case a.RESPONSE:return N.apply(this,["Device Message",this._getLoggingFlags(a.RESPONSE,q.DEVICE_CONSOLE|q.GLOBAL_CONSOLE,
c),p,d,g]);case a.SEND_COMMAND:return N.apply(this,["Send Command",this._getLoggingFlags(a.SEND_COMMAND,q.DEVICE_CONSOLE|q.GLOBAL_CONSOLE,c),p,d,g])}else A.error("have no device ",b.device)}window.xhas=m;var P=n([C,E],{});m=null;J&&(m={track:function(){return!0},getTrackingCategory:function(){return h.capitalize(this.beanNamespace)},getTrackingEvent:function(){return k.ACTION.OPEN},getTrackingLabel:function(a){return this.getMetaValue(a,k.DEVICE_PROPERTY.CF_DEVICE_TITLE)},getActionTrackingUrl:function(a){return v.replace(this.breanScheme+
"?action\x3d{action}\x26"+this.beanUrlPattern,{action:a})},getTrackingUrl:function(a){return v.replace(this.breanScheme+"{view}/"+this.beanUrlPattern,{id:a.id,view:"settings"})}});return n([z.dcl,y.dcl,J?n(J.dcl,m):Q.dcl],{declaredClass:"xcf.manager.DeviceManager_UI",onDeviceStarted:function(a,b,c){this.completeDevice(b,c)},onDeviceDisconnected:function(a){if(a&&a.device&&(a=this.getDeviceStoreItem(a.device))){var b=this.toDeviceControlInfo(a),b=this.getContext().getDriverManager().getDriverById(b.driverId);
this.completeDevice(a,b)}},completeDevice:function(a,b,c){function e(b,c,e,g){var h=1==b.isVariable,q=h?n.path:r.path;if(!0===b.isCommand||!0===b.isVariable)c=new C({enabled:!0,path:q+"_reference_"+b.id,name:e,id:b.id,parentId:q,_mayHaveChildren:!1,virtual:!0,icon:g,command:!h,ref:{driver:c,item:b,device:a},type:k.ITEM_TYPE.BLOCK}),c=d.putSync(c,!1),b.addReference(c,{properties:{name:!0,enabled:!0,value:!0},onDelete:!0},!0)}if(a&&b){var d=a._store,g=a.path,q=this.ctx;a.directory=!0;a.isDevice=!0;
this.fixDeviceCI(a);var p=a.getBlockScope()||b.blockScope;if(p){var m=p.blockStore,n,r,u=g+"_commands";h.removeFromStore(d,u,!0,null,null,!0,!0);r=a.commandsItem=d.putSync({path:u,name:"Commands",isDir:!0,type:"leaf",parentId:g,virtual:!0},!1);u=g+"_variables";h.removeFromStore(d,u,!0,null,null,!0,!0);n=a.variablesItem=d.putSync({path:u,name:"Variables",isDir:!0,type:"leaf",parentId:g,virtual:!0},!1);g=p.getBlocks({group:k.COMMAND_TYPES.BASIC_COMMAND});g=g.concat(p.getBlocks({group:k.COMMAND_TYPES.CONDITIONAL_COMMAND}));
w.each(g,function(a){e(a,b,a.name,a.icon||"fa-exclamation")});!1!==c&&m.on("added",function(a){e(a,b,a.name,a.icon||"fa-exclamation")});!1!==c&&m.on("delete",function(a){d.removeSync(a.id);a.target.refresh()});c=p.getVariables({group:k.BLOCK_GROUPS.CF_DRIVER_BASIC_VARIABLES});c=c.concat(p.getVariables({group:k.BLOCK_GROUPS.CF_DRIVER_RESPONSE_VARIABLES}));w.each(c,function(a){e(a,b,a.name,a.icon||"fa-code")});q.getDriverManager().addDeviceInstance(a,b)}}},completeDeviceStore:function(a){a=a||this.getStore();
a=h.queryStore(a,{isDir:!1});try{for(var b=0;b<a.length;b++){var c=a[b];if(null==c._completed){c._completed=[!0];var e=this.getMetaValue(c,k.DEVICE_PROPERTY.CF_DEVICE_DRIVER),d=this.ctx.getDriverManager().getItemById(e);d&&this.completeDevice(c,d)}}}catch(I){logError(I)}},onDriverModified:function(){for(var a=this.getStore(),b=a?h.queryStore(a,{isDir:!1}):[],c=this.ctx.getDriverManager(),e=0;e<b.length;e++){var d=b[e],g=this.getMetaValue(d,k.DEVICE_PROPERTY.CF_DEVICE_DRIVER),g=c.getItemById(g);d.commandsItem&&
h.removeFromStore(a,d.commandsItem,!0,"path","parentId");d.variablesItem&&h.removeFromStore(a,d.variablesItem,!0,"path","parentId");this.completeDevice(d,g)}},handleRoute:function(a){switch(a.parameters.view){case "settings":return this.openItemSettings(this.getDeviceById(a.parameters.id))}},registerRoutes:function(){this.getContext().registerRoute({id:"Devices",path:"device://{view}/{id}",schemes:["device"],delegate:this});this.getContext().registerRoute({id:"New Device",path:"File/New Device",schemes:[""],
delegate:this})},getRouteRenderParams:function(a){return{icon:this.getDeviceStatusIcon(this.getDeviceById(a?a.parameters.id:null))}},routeToReference:function(a){return this.getDeviceById(a?a.parameters.id:null)},referenceToRoute:function(a){return v.replace(this.breanScheme+"{view}/"+this.beanUrlPattern,{id:a.id,view:"settings"})},cloneDevice:function(b,c,d){var g=new e,q=this,p=this.ctx,m=p.getFileManager(),n=this.getStore(c.scope);this.getFile(c).then(function(e){q.getFile(b).then(function(b){if(b){if(b.getParent()){var r=
function(a){m.getContent(b.mount,b.path,function(b){var d=h.getJson(b);b=k.DEVICE_PROPERTY;var r=d.inputs,u=h.getCIByChainAndName(r,0,b.CF_DEVICE_ID);h.setCIValueByField(u,"value",h.createUUID());var v=h.getCIByChainAndName(r,0,b.CF_DEVICE_TITLE);h.setCIValueByField(v,"value",a.replace(".meta.json",""));b=h.getCIByChainAndName(r,0,b.CF_DEVICE_ENABLED);h.setCIValueByField(b,"value",!1);var x=e.path+"/"+a+".meta.json";m.mkfile(e.mount,x).then(function(){m.setContent(e.mount,x,JSON.stringify(d,null,
2),function(){q.ls(c.scope,!1).then(function(a){var b=a.query({id:u.value})[0];b&&(a.removeSync(b.path),c._store.removeSync(b.path),b._store=n,b=n.addSync(b),b=n.getSync(b.path),b.refresh(),w.each(b.user.inputs,function(a){a.device=b;a.actionTarget=p.mainView.getToolbar();a.ctx=p}),(a=q.getMetaValue(b,k.DEVICE_PROPERTY.CF_DEVICE_DRIVER))||A.error("device has no driver id!"),(a=q.ctx.getDriverManager().getItemById(a))&&q.completeDevice(b,a),n.emit("added",{target:b}),A.error("device added to "+n.id,
n),g.resolve(b))})})})},!1)},u=null===d;d=d||m.getNewName(b,e.children);d=d.replace(".meta.json","");if(u){var v=[h.createCI("Title",13,d,{group:"Common"})];(new a({title:"New Name",resizable:!0,onOk:function(){r(h.getInputCIByName(v,"Title").value)},delegate:{},cis:v})).show()}else r(d)}}else g.reject("Cant get file object for device")})});return g},editDeviceSource:function(){},getDeviceStatusIcon:function(a){if(a){var b=k.DEVICE_STATE;switch(a.state){case b.READY:case b.CONNECTED:return"fa-link iconStatusOn";
case b.SYNCHRONIZING:case b.CONNECTING:return"fa-spinner fa-spin"}}return"fa-unlink iconStatusOff"},_getLoggingFlags:function(a,b,c){return a in c?c[a]:b},debounce:function(a,b,c,e,d,g){return h.debounce(this,a,b,c,e,d,g)},init:function(){function a(a){var b=(a=a.device&&a.device.info?a.device:e.getDeviceStoreItem(a.device))&&a.info?a.info:e.toDeviceControlInfo(a);return{device:a,info:b}}function b(b){O.apply(e,[d.ON_DEVICE_CONNECTED,b,function(b){var c=a.apply(e,[b]);return c.device?!(!0===b.isReplay&&
c.device.state===k.DEVICE_STATE.READY):!1},g.DEVICE_CONNECTED,null])}function c(b){O.apply(e,[d.ON_DEVICE_DISCONNECTED,b,function(b){return a.apply(e,[b]).device},g.DEVICE_DISCONNECTED,null,"error"])}var e=this,d=k.EVENTS,g=k.LOG_OUTPUT;F.prototype.delegate=this;F.prototype.ctx=this.getContext();this.subscribe(d.ON_DEVICE_CONNECTED,function(a){b.apply(e,[a])});this.subscribe(d.ON_DEVICE_DISCONNECTED,function(a){c.apply(e,[a])});this.subscribe(d.ON_DEVICE_MESSAGE,function(b){O.apply(e,[d.ON_DEVICE_MESSAGE,
b,function(b){return!(!a.apply(e,[b]).device||!b.deviceMessage)},g.RESPONSE,b.deviceMessage])});this.subscribe(d.ON_DEVICE_COMMAND,function(b){O.apply(e,[d.ON_DEVICE_COMMAND,b,function(b){return!(!a.apply(e,[b]).device||!b.name)},g.SEND_COMMAND,"\x3cb\x3eCommand:\x3c/b\x3e"+b.name,"success"])});this.subscribe(d.ON_RENDER_WELCOME_GRID_GROUP);this.registerRoutes()},onRenderWelcomeGridGroup:function(a){var b=this.getContext(),c=b.getTrackingManager(),e=b.getRouter(),d=a.store,g=this,b=a.grid;switch(a.item.group){case "New":c=
[];c.push(this.createAction({label:"New Device",command:"File/New Device",icon:"fa-magic",mixin:{addPermission:!0}}));w.map(c,function(a){return d.putSync(h.mixin(a,{url:a.command,parent:"New",group:null,label:a.title,owner:g,runAction:function(a,b,c){return F.prototype.runAction.apply(F.prototype,[{command:this.url},b,c])}}))});break;case "Recent":if(c){d.putSync({group:"Devices",label:"Devices",url:"Devices",parent:"Recent",directory:!0});a=c.filterMin({category:"Device"},"counter",1);a=c.most(null,
a);c.last(a);a=w.map(a,function(a){a.parent="Recent";a.icon=g.getRouteRenderParams(e.match({path:a.url})).icon;return a});var k=w.map(F.getActions.apply(F.prototype,[x("\x3cdiv/\x3e")[0],F.DefaultPermissions,b]),function(a){a.custom=!0;return a}),q=null;w.each(a,function(a){var b=e.match({path:a.url});b&&(q=g.routeToReference(b))&&(d.removeSync(a.url,!0),a=new P({url:a.url,enabled:!0,label:a.label,parent:"Devices",_mayHaveChildren:!1,virtual:!0,icon:a.icon,owner:g,mapping:{update:[{from:"iconClass",
to:"icon"}]},getActions:function(){return k},runAction:function(a,b,c){return F.prototype.runAction.apply(F.prototype,[a,b,c])}}),a=d.putSync(a,!1),q&&q.addReference?q.addReference(a,{properties:{name:!0,enabled:!0,value:!0,state:!0,iconClass:!0},onDelete:!0,onChange:!0},!0):A.error("device store item has no addReference!",a))});d.emit("added",{target:q})}}},initUI:function(){var a=this,b=k.EVENTS;this.subscribe(k.EVENTS.ON_APP_READY,function(b){a.onAppReady(b)});this.subscribe([b.ON_MAIN_VIEW_READY,
b.ON_DRIVER_MODIFIED,b.ON_WIDGET_READY]);this.subscribe([k.EVENTS.ON_DEVICE_GROUP_SELECTED,k.EVENTS.ON_DEVICE_SELECTED],this.onItemSelected)},onCIUpdate:function(a){var b=a.ci,c=b?b.device:null,e=a.oldValue,d=a.newValue,g=c?c.get("state"):-1,h=this.ctx.getDriverManager(),q=!1;if(c){this.updateCI(b,a.newValue,a.oldValue,c);var p=k.DEVICE_PROPERTY;if(e===d)return;c.refresh();this.toDeviceControlInfo(c);c._store.emit("update",{});switch(b.id){case p.CF_DEVICE_ENABLED:c.set("enabled",d);if(!0===d)switch(g){case k.DEVICE_STATE.DISCONNECTED:q=
this.startDevice(c,!1)}else switch(g){case k.DEVICE_STATE.READY:case k.DEVICE_STATE.CONNECTED:case k.DEVICE_STATE.CONNECTING:q=this.stopDevice(c)}c.set("enabled",d)}if("Driver"==b.id){if(e=(b=h.getItemById(e))?b._store:null)g=b.path+"_instances_instance_"+c.path,e.getSync(g)&&(e.removeSync(g),b.refresh());d=h.getItemById(d);this.completeDevice(c,d,!1);c._store.getSync(c.path)||(c=c._store.putSync(c),c.refresh());d&&d.refresh()}}if(a.owner&&a.owner.delegate==this){if(a.didUpdate)return a.didUpdate;
a.didUpdate=!0}return q},reload:function(){},createNewGroupItem:function(a,b,c){return this.createItemStruct(a,b,c,a,!0,k.ITEM_TYPE.DEVICE_GROUP)},createItem:function(a,b){return this.callMethodEx(null,"createItem",[r.toJson(a)],b,!0)},createNewItem:function(a,b,c){return this.createItemStruct(a,b,c,c+"/"+a,!1,k.ITEM_TYPE.DEVICE)},onItemSelected:function(a){this.currentItem=a},onReloaded:function(){this.checkDeviceServerConnection()},openExpressionConsole:function(a){var b=this.ctx,c=b.mainView.getDocker();
if(a){var e=this.toDeviceControlInfo(a),c=c.addTab(null,{title:e.host,icon:"fa-terminal"});a=h.addWidget(q,{ctx:b,device:a,value:""},this,c,!0);c.add(c);return a}},openConsole:function(a,b,c){if(!this.getMetaValue(a,k.DEVICE_PROPERTY.CF_DEVICE_ENABLED))return null;this.startDevice(a);var e=this.toDeviceControlInfo(a),d=e.hash,g=d+"-Console",q=this,d=this.deviceInstances[d],m=d.driver,r=this.ctx.mainView.getDocker(),u=this,v=this.getDriverInstance(e,!0),x=v?v.blockScope:m.blockScope,z=x.instance,z=
(z?z.blockScope:null)||x,x=null==b;b=b||r.addTab(null,{title:e.host,icon:"fa-terminal"});e=n(p,{destroy:function(){u.consoles[g].remove(this)}});a=h.mixin({driver:m,device:a,deviceInstance:d,driverInstance:v,blockScope:z,value:c?c.value:""},c);var A=h.addWidget(e,h.mixin({ctx:this.ctx,type:"javascript",value:"return this.getVariable('Volume');",editorArgs:a,owner:this,hasFlag:function(a,b){if(!a||!b)return!0;var c=k.LOGGING_FLAGS;a=a.loggingFlags;a=w.isString(a)?h.fromJson(a):a||{};b=a[b];return null!=
b&&b&c.DEVICE_CONSOLE?!0:!1},log:function(a,b,c,e){a=a.string||a;if(!1!==this.hasFlag(this.device.info,e)){e="";if(w.isString(a))!1!==b?e+=a.replace(/\n/g,"\x3cbr/\x3e"):(e=""+a,c&&(e=h.markHex(e,'\x3cspan class\x3d""\x3e',"\x3c/span\x3e")));else if(w.isObject(a)||w.isArray(a))e+=JSON.stringify(a,null,!0);a=e.split("\x3cbr/\x3e");for(b=0;b<a.length;b++)this.printCommand("",a[b],this.logTemplate,!0)}},onConsoleEnter:function(a){function b(b,d){k='\x3cspan class\x3d"text-primary"\x3e\x3cb\x3e'+a+'\x3c/span\x3e\x3c/b\x3e\x3cspan class\x3d"text-info"\x3e  failed: \x3cspan class\x3d"text-danger"\x3e'+
d.message+"\x3c/span\x3e";c.printCommand(k,"");e=!0;return null}var c=this,e=!1,d=this.getConsole().getTextEditor(),g=d.getAction("Console/Settings/AddConstants").value,k=d.getAction("Console/Settings/Expression").value?this.parse(a,b):a;d.getAction("Console/Settings/ReplaceHEX").value&&(k=h.replaceHex(k));if(e)return null;g&&(k=this.deviceInstance.prepareMessage(k));this.owner.sendDeviceCommand(this.deviceInstance,k,null,null,!1);k=h.stringFromDecString(k);k=k==a?"":'\x3cspan class\x3d"text-info"\x3e\x3cb\x3e'+
a+'\x3c/span\x3e\x3c/b\x3e\x3cspan\x3e  evaluates to \x3cspan class\x3d"text-success"\x3e'+k+"\x3c/span\x3e";this.printCommand(k,"");return k}},a),null,b,x);b.add(A);A.consoleId=g;this.consoles||(this.consoles=[]);this.consoles[g]||(this.consoles[g]=[]);this.consoles[g].push(A);A._on("destroy",function(){q.consoles[g].remove(A)});return A},_getDevices:function(){var a=this.getStore(),a=h.queryStore(a,{isDir:!1});a._S&&(a=[a]);return a},onDriverClassFileWidgetCreated:function(a,b,c){var e=this;a.debugButton=
d.createButton(a.getFreeExtensionSlot(),"el-icon-puzzle","elusiveButton","","",function(){e.debugDriver(b,c)},this);a.editButton=d.createButton(a.getFreeExtensionSlot(),"el-icon-file-edit","elusiveButton","","",function(){e.editDriver(b,c)},this)},onWidgetReady:function(a){if(a.owner==this&&null!=a.ci&&h.toString(a.ci.name)===k.DRIVER_PROPERTY.CF_DRIVER_CLASS&&null!=a.widget&&null!=a.storeItem&&h.toInt(a.ci.type)===k.ECIType.FILE)this.onDriverClassFileWidgetCreated(a.widget,a.ci,a.storeItem)},_newItem:function(a){var b=
this,c=h.getInputCIByName(a,"Title"),d=h.getInputCIByName(a,"Scope"),g=h.getInputCIByName(a,"In Group");w.isObject(g.value)&&(g.value=g.value.path);a=h.toOptions(a);var q=new e;b.createItem(a,function(a){var e=b.createNewItem(c.value,d.value,g.value),h=b.getStore(d.value);e.path+=".meta.json";e.user={inputs:a};var p=h.putSync(e);w.each(p.user.inputs,function(a){a.device=p});b.publish(k.EVENTS.ON_STORE_CHANGED,{owner:b,store:h,action:k.NEW_FILE,item:p});p.refresh();q.resolve(p)});return q},newItem:function(a){function b(a,
b,c,e){var d=k.DEVICE_PROPERTY;w.each([d.CF_DEVICE_HOST,d.CF_DEVICE_PORT,d.CF_DEVICE_PROTOCOL,d.CF_DEVICE_DRIVER_OPTIONS,d.CF_DEVICE_OPTIONS,d.CF_DEVICE_LOGGING_FLAGS,d.CF_DEVICE_ENABLED],function(b){w.find(c,{name:b})&&a.setMetaValue(b,h.getCIInputValueByName(c,b))});if(e){var g=h.getCIInputValueByName(b,d.CF_DEVICE_DRIVER);g.group="Common";g.enumType="Driver";a.setMetaValue(d.CF_DEVICE_DRIVER,e.id)}a.id=h.getCIInputValueByName(b,k.DEVICE_PROPERTY.CF_DEVICE_ID);b=h.getInputCIById(b,k.DEVICE_PROPERTY.CF_DEVICE_OPTIONS);
e=h.getInputCIById(c,k.DEVICE_PROPERTY.CF_DEVICE_OPTIONS);!b&&e&&h.createCI(d.CF_DEVICE_OPTIONS,k.ECIType.JSON_DATA,"{}",{group:"Network"});q.getTrackingManager().track(p.getTrackingCategory(),p.getTrackingLabel(a),p.getTrackingUrl(a),k.ACTION.OPEN,p.getContext().getUserDirectory())}function c(a,c,d){var g=h.getInputCIByName(a,"In Group"),p=h.getInputCIByName(a,k.DEVICE_PROPERTY.CF_DEVICE_TITLE),m=h.getInputCIByName(a,"copyFrom"),n=new e,r=q.getDeviceManager();m&&w.isObject(m.value)?(w.isString(g.value)&&
(g.value=r.getItemByPath(g.value)),r.cloneDevice(m.value,g.value,p.value).then(function(e){b(e,a,c,d);n.resolve(e)})):r._newItem(a).then(function(e){b(e,a,c,d);n.resolve(e)});return n}function d(a,b){function d(a,b,c){var d=new e;(b=p.getItemByPath(b))?d.resolve(b):p.newGroup(null,"user_devices"===a?"user_drivers":"system_drivers",c).then(function(a){d.resolve(a)});return d}var g=q.getDeviceManager(),p=q.getDriverManager(),m=h.getCIInputValueByName(a,"scope"),n=new e;switch(h.getCIInputValueByName(a,
"Driver Creation")){case "auto-create":var r=h.getInputCIByName(a,"In Group"),u=h.getInputCIByName(a,k.DEVICE_PROPERTY.CF_DEVICE_TITLE);w.isString(r.value)&&(r.value=g.getItemByPath(r.value));g=r.value?r.value.name:"";d(m,g,g).then(function(e){p.newItem(e,u.value).then(function(e){c(a,b,e).then(function(a){n.resolve(a)})})});return n;default:return c(a,b,null).then(function(a){n.resolve(a)}),n}}a||(a={path:""});var g=a?!0===a.isDir?a.path:"":"";a=a.scope||"user_devices";var q=this.getContext(),p=
this,m=new e,n=G(q);h.getInputCIByName(n,k.DEVICE_PROPERTY.CF_DEVICE_OPTIONS).type=k.ECIType.STRUCTURE;n=n.concat([h.createCI("Driver Creation",k.ECIType.ENUMERATION,"auto-create",{group:"Driver",visible:!0,description:"Specify the way how the device's driver is created",value:"auto-create",options:[{label:"Create new driver",value:"auto-create",description:"Create a driver with same name"},{label:"None",value:"none",description:"Don`t create any driver"}]}),h.createCI("copyFrom",H,"",{group:"Common",
title:"Copy from",options:[],pickerType:"device",value:""}),h.createCI("In Group",H,g,{group:"Common",title:"In Group",options:[],pickerType:"group",value:g}),h.createCI("Scope",k.ECIType.ENUMERATION,a,{group:"Common",value:a,options:[{label:"System Devices",value:"system_devices"},{label:"User Devices",value:"user_devices"}]})]);n.reverse();(new D({title:"New Device",containerClass:"CIDialog",onOk:function(a){a=w.map(a,function(a){return a.ci});d(n,a).then(function(a){m.resolve(a)});this.headDfd.resolve(a)},
onCancel:function(a){this.headDfd.resolve(a)},cis:n,CIViewOptions:{delegate:this,ciSort:!1,cis:n}})).show();return m},newItem_old:function(b,c){var d=this;b||(b={path:""});var g=this.ctx.getDriverManager().getDriversAsEnumeration(),q=b?!0===b.isDir?b.path:"":"",p=new e,m=[h.createCI("In Group",13,q,{widget:{disabled:!0},group:"Common",visible:!1}),h.createCI("Title",13,"MyNewDevice",{group:"Common"}),h.createCI("Enabled",0,"",{group:"Common",value:!1}),h.createCI("Scope",3,c,{group:"Common",options:[{label:"System",
value:"system_devices"},{label:"User",value:"user_devices"}]}),h.createCI("Driver",3,0<g.length?g[0].value:"",{group:"Common",options:g,name:k.DEVICE_PROPERTY.CF_DEVICE_DRIVER,enumType:"Driver"}),h.createCI("Network-Settings",k.ECIType.DEVICE_NETWORK_SETTINGS,"no value")];(new a({title:"New Device",resizable:!0,onOk:function(a){var b=h.createCI("Id",13,h.createUUID(),{visible:!1,group:"Common"});a.push(b);a=h.toOptions(a);var c=h.getInputCIByName(m,"Title"),e=h.getInputCIByName(m,"Scope");d.createItem(a,
function(a){var g=d.createNewItem(c.value,e.value,q),h=d.getStore(e.value);g.path+=".meta.json";g.user={inputs:a};g.id=b.value;var m=h.putSync(g);w.each(m.user.inputs,function(a){a.device=m});d.publish(k.EVENTS.ON_STORE_CHANGED,{owner:d,store:h,action:k.NEW_FILE,item:m});m.refresh();p.resolve(m)})},delegate:{},cis:m})).show();return p},newGroup:function(b,c){var d=this,g=this.getStore(c),q=new e;(new a({title:"New Device Group",onOk:function(){var a=this.getField("Title"),b=this.getField("Scope");
d.createGroup(b,"/"+a,function(){var c=d.createNewGroupItem(a,b,""),c=g.putSync(c);d.publish(k.EVENTS.ON_STORE_CHANGED,{owner:d,store:g,action:k.NEW_DIRECTORY,item:c});g.refreshItem(c);q.resolve(c)})},delegate:{},cis:[h.createCI("Title",13,""),h.createCI("Scope",3,c,{options:[{label:"System",value:"system_devices"},{label:"User",value:"user_devices"}]})]})).show();return q},onDeleteItem:function(b){var c=!0===h.toBoolean(b.isDir),e=h.toString(b.name),d=c?"removeGroup":"removeItem",g=this;(new a({title:"Remove Device"+
(c?" Group":"")+' "'+e+'"',style:"max-width:400px",titleBarClass:"text-danger",onOk:function(){var a=b._store||g.getStore(b.scope);g[d](h.toString(b.scope),h.toString(b.path),h.toString(b.name),function(){a.removeSync(b.path);a.emit("delete",{target:b});g.publish(k.EVENTS.ON_STORE_CHANGED,{owner:g,store:a,action:k.DELETE,item:b})})},delegate:{isRemoving:!1},inserts:[{query:".dijitDialogPaneContent",insert:'\x3cdiv\x3e\x3cspan class\x3d"fileManagerDialogText"\x3eDo you really want to remove  this item?\x3c/span\x3e\x3c/div\x3e',
place:"first"}]})).show()},openItemSettings:function(a){var b=this,e=a.user;if(!e||!e.inputs)return null;var d=this.getViewId(a),d=c.byId(d);try{if(d)return d._parent&&d._parent.select(d),d}catch(T){h.destroy(d)}var d=this.getContext().getMainView().getDocker().addTab(null,{title:h.toString(a.name),icon:this.beanIconClass}),g=this.getMetaValue(a,k.DEVICE_PROPERTY.CF_DEVICE_TITLE),q=a.user;this.fixDeviceCI(a);h.getCIByChainAndName(q,0,k.DEVICE_PROPERTY.CF_DEVICE_HOST);h.getCIByChainAndName(q,0,k.DEVICE_PROPERTY.CF_DEVICE_PROTOCOL);
h.getInputCIByName(e,k.DEVICE_PROPERTY.CF_DEVICE_OPTIONS).type=k.ECIType.STRUCTURE;d=h.addWidget(this.getViewClass({track:function(){return!0},getTrackingCategory:function(){return h.capitalize(b.beanNamespace)},getTrackingEvent:function(){return k.ACTION.OPEN},getTrackingLabel:function(){return b.getMetaValue(this.storeItem,k.DEVICE_PROPERTY.CF_DEVICE_TITLE)},getActionTrackingUrl:function(c){return v.replace(b.breanScheme+"?action\x3d{action}\x26"+b.beanUrlPattern,{id:a.id,action:c})},getTrackingUrl:function(a){return v.replace(b.breanScheme+
"{view}/"+b.beanUrlPattern,{id:a.id,view:"settings"})}}),{title:g||h.toString(a.name),cis:e.inputs,storeItem:a,item:a,id:this.getViewId(a),iconClass:this.beanIconClass+" "+this.getDeviceStatusIcon(a),delegate:this,storeDelegate:this,closable:!0,owner:this,ctx:this.getContext()},this,d,!1,this.itemType+"_View");d.startup();return d},_getIcon:function(a){var b=k.DEVICE_STATE;switch(a.state){case b.CONNECTING:return"iconStatusBusy";case b.CONNECTED:return"fa-signal"}return"fa-dot-circle-o"}})})},"davinci/workbench/_ToolbaredContainer":function(){define(["dojo/_base/declare",
"dijit/layout/_LayoutWidget","dijit/_Templated"],function(n,m,k){return n("davinci.workbench._ToolbaredContainer",[m,k],{templateString:"\x3cdiv\x3e\x3cdiv dojoAttachPoint\x3d'titleBarDiv' class\x3d'palette_titleBarDiv'\x3e\x3c/div\x3e\x3cdiv dojoAttachPoint\x3d'toolbarDiv' class\x3d'toolbaredContainer_toolbarDiv'\x3e\x3c/div\x3e\x3cdiv dojoAttachPoint\x3d'containerNode'\x3e\x3c/div\x3e\x3c/div\x3e",gutters:!1,_toolbarCreated:{},layout:function(){var h=[{domNode:this.titleBarDiv,layoutAlign:"top"},
{domNode:this.toolbarDiv,layoutAlign:"top"},{domNode:this.containerNode,layoutAlign:"client"}];dijit.layout.layoutChildren(this.domNode,this._contentBox,h);this._containerContentBox=dijit.layout.marginBox2contentBox(this.containerNode,h[2]);var d=dijit.byNode(this.containerNode);d&&d.resize&&d.resize(this._containerContentBox);dojo.marginBox(this.containerNode,h[2])},setContent:function(h){this.mainWidget=h;h=h.domNode||h;dojo.place(h,this.containerNode,"replace");this.containerNode=h;this.toolbarCreated(this.declaredClass)||
this._createToolbar(this.declaredClass);this.titleBarDiv.innerHTML='\x3cspan class\x3d"paletteCloseBox"\x3e\x3c/span\x3e\x3cspan class\x3d"titleBarDivTitle"\x3e'+this.title+"\x3c/span\x3e";h=dojo.query(".paletteCloseBox",this.titleBarDiv);0<h.length&&dojo.connect(h[0],"click",this,function(d){davinci.Workbench.collapsePaletteContainer(d.currentTarget)});this._started&&this.layout()},removeContent:function(){var h=dojo.doc.createElement("div");dojo.place(h,this.containerNode,"replace");this.containerNode=
h;this.mainWidget&&this.mainWidget.destroy();delete this.mainWidget},_getViewActions:function(){},getTopAdditions:function(){},_createToolbar:function(h){var d=require("davinci/Workbench"),b=this.getToolbarDiv(),c=this.getTopAdditions();c&&b.appendChild(c);this.toolbarMenuActionSets&&(c="m"+Date.now(),b=dojo.create("span",{id:c+"_menucontainer","class":"paletteDropdown"},b),b=dojo.create("span",{id:c+"_menu"},b),d.updateMenubar(b,this.toolbarMenuActionSets));(b=this._getViewActions())&&b.length&&
(c=dojo.create("div",{"class":"toolbaredContainer_toolbarDiv"}),c=dojo.create("span",{style:{display:"inline-block"}},c),d=d._createToolBar("toolbarPath",c,b,this._getViewContext()),dojo.style(d.domNode,{display:"inline-block","float":"left"}),this.toolbarCreated(h,d))},_getViewContext:function(){return this},getToolbarDiv:function(){return this.toolbarDiv},toolbarCreated:function(h,d){1<arguments.length&&(this._toolbarCreated[h]=d);return this._toolbarCreated[h]},attachToolbar:function(){var h=this.toolbarCreated(this.declaredClass),
d=this.getToolbarDiv();h&&h.domNode&&d&&(d.innerHTML="",d.appendChild(h.domNode))}})})},"xcf/manager/BeanManager":function(){define("dcl/dcl xdojo/has dojo/_base/lang xide/types xide/utils xide/manager/BeanManager dojo/Deferred xide/noob xdojo/has!xtrack?xide/interface/Track xdojo/has!xcf-ui?xide/views/ActionDialog xdojo/has!xcf-ui?xide/views/CIActionDialog xdojo/has!xcf-ui?xide/views/CIGroupedSettingsView".split(" "),function(n,m,k,h,d,b,c,g,p,a,e,q){m=n(b,{getItemByPath:function(a){for(var b in this.stores){var c=
this.stores[b].getSync(a);if(c)return c}},setStore:function(a,b){var c=this.stores[a];c&&(console.error("setting existing store "+a),c.destroy(),delete this.stores[a]);return this.stores[a]=b},onCIUpdate:function(a){a.owner===this&&this.updateCI(a.ci,a.newValue,a.oldValue,a.storeItem)},init:function(){this.stores={};this.subscribe(h.EVENTS.ON_CI_UPDATE)}});return n(m,{declaredClass:"xcf.manager.BeanManager",getViewClass:function(a,b){a=a||{};d.mixin(a,{startup:function(){p&&this.getContext().getTrackingManager().track(this.getTrackingCategory(),
this.getTrackingLabel(this.item),this.getTrackingUrl(this.item),h.ACTION.OPEN,this.getContext().getUserDirectory());if(this.inherited)return this.inherited(arguments)}});return n([b||q,p?p.dcl:g.dcl],a)},getFile:function(a){var b=new c,e=this.getContext().getFileManager().getStore(a.scope);e.initRoot().then(function(){e._loadPath(".",!0).then(function(){e.getItem(a.path,!0).then(function(a){b.resolve(a)})})});return b},toUrl:function(a,b,c,e){return k.replace((e||"")+"deviceScope\x3d{deviceScope}\x26device\x3d{deviceId}\x26driver\x3d{driverId}\x26driverScope\x3d{driverScope}\x26block\x3d{block}",
{deviceId:a.id,deviceScope:a.scope,driverId:b.id,driverScope:b.scope,block:c?c.id:""})},newGroup:function(){var a=this,b=this.getItem(),c=b?!0===b.isDir?b.path:"":"",b=new e({title:"New "+this.groupType,delegate:{onOk:function(b,e){var g=d.getCIInputValueByName(e,"Title"),k=d.getCIInputValueByName(e,"Scope");a.createGroup(k,c+"/"+g,function(){var b=a.createNewGroupItem(g,k,c);a.store.putSync(b);a.publish(h.EVENTS.ON_STORE_CHANGED,{owner:a,store:a.store,action:h.NEW_DIRECTORY,item:b})})}},cis:[d.createCI("Title",
13,""),d.createCI("Scope",3,this.defaultScope,{options:[{label:"System",value:this.defaultScope},{label:"User",value:this.userScope}]})]});b.startup();b.show()},onDeleteItem:function(b){var c=!0===d.toBoolean(b.isDir),e=c?"removeGroup":"removeItem",g=this;(new a({title:"Remove "+this.beanName+(c?" Group":"")+' "'+b.name+'"  ',style:"max-width:400px",titleBarClass:"text-danger",delegate:{isRemoving:!1,onOk:function(){g[e](d.toString(b.scope),d.toString(b.path),d.toString(b.name),function(){g.onItemDeleted(b);
g.publish(h.EVENTS.ON_STORE_CHANGED,{owner:g,store:g.store,action:h.DELETE,item:b})})}}})).show()},createNewGroupItem:function(a,b,c){return this.createItemStruct(a,b,c,a,!0,this.groupType)},createNewItem:function(a,b,c){return this.createItemStruct(a,b,c,c+"/"+a,!1,this.itemType)},createItem:function(a,b,c,e,d){return this.runDeferred(null,"createItem",[a,b,c,e,d])},ls:function(a,b){return this.runDeferred(null,"ls",[a]).then(function(a){try{this.rawData=a,this.initStore(a),this.publish(h.EVENTS.ON_STORE_CREATED,
{data:a,owner:this,store:this.store,type:this.itemType})}catch(v){logError(v,"error ls")}}.bind(this))}})})},"xfile/manager/FileManagerActions":function(){define(["dcl/dcl","xide/types","xide/utils"],function(n,m,k){return n(null,{declaredClass:"xfile/manager/FileManagerActions",_publishProgress:function(h,d,b,c,g){d={terminatorItem:d,failed:c,items:b||d};k.mixin(d,g);this.publish(h,d,this)},doOperation:function(h,d,b,c,g,k){var a=this,e=h.substring(0,1).toUpperCase()+h.substring(1),q="on"+e+"End";
a._publishProgress("on"+e+"Begin",b,c,!1,g);return this.runDeferred(null,h,d,k).then(function(){a._publishProgress(q,b,c,!1,g)},function(e){a._publishProgress(q,b,c,!0,g)})},deleteItems:function(h,d,b){return this.doOperation(m.OPERATION.DELETE,[h,d,!0],h,h,null,b)},copyItem:function(h,d,b,c){return this.doOperation(m.OPERATION.COPY,[h,d,b,!1],h,h,{dst:d},c)},mkdir:function(h,d,b){return this.doOperation(m.OPERATION.NEW_DIRECTORY,[h,d],d,null,null,b)},mkfile:function(h,d,b){return this.doOperation(m.OPERATION.NEW_FILE,
[h,d,b||""],d)},rename:function(h,d,b){return this.doOperation(m.OPERATION.RENAME,[h,d,b],d)},moveItem:function(h,d,b,c,g,k){return this.doOperation(m.OPERATION.MOVE,[h,d,b,c,g],h,null,null,k)},compressItem:function(h,d,b,c){return this.doOperation(m.OPERATION.COMPRESS,[h,d,b],d)},extractItem:function(h,d,b){return this.doOperation(m.OPERATION.EXTRACT,[h,d],d)}})})},"xide/manager/Context_UI":function(){define("dcl/dcl dojo/Deferred dojo/has xide/types xide/utils xide/mixins/EventedMixin require xide/manager/PluginManager xide/manager/WindowManager xide/manager/NotificationManager xide/manager/SettingsManager xide/editor/Registry xaction/ActionProvider xide/lodash xide/manager/Router".split(" "),
function(n,m,k,h,d,b,c,g,p,a,e,q,u,w,r){k.add("xlog",function(){return!0},!0);b=n([b.dcl,u.dcl,q],{declaredClass:"xide.manager.Context_UI",widgetManager:null,settingsManager:null,trackingManager:null,mainView:null,registerRoute:function(a){this.routes||(this.routes=[]);this.routes.push(a)},ready:function(){this.getRouter()},routes:null,router:null,getRouter:function(){this.router&&this.router.match||(this.router=new r({routes:this.routes}));return this.router},getWindowManager:function(){return this.windowManager},
getWidgetManager:function(){return this.widgetManager},getNotificationManager:function(){return this.notificationManager},getSettingsManager:function(){return this.settingsManager},getTrackingManager:function(){return this.trackingManager},getMainView:function(){return this.mainView},runAction:function(a){a=this.getAction(a);var b=this.inherited(arguments);null==b&&a.handler&&(b=a.handler.apply(this,[a]));return b},getOpenFiles:function(){var a=(this.getSettingsManager().getStore()||{getSync:function(){}}).getSync("openFiles")||
{value:{files:[]}},b=this.getFileManager();w.each(a.value.files,function(a){b.getStore(a.mount).getItem(".",!0).then(function(){})});return a.value.files},trackEditor:function(a,b){b=this.getSettingsManager();var c=((b.getStore()||{getSync:function(){}}).getSync("openFiles")||{value:{files:[]}}).value;w.find(c.files,{path:a.path,mount:a.mount})||(c.files.push({path:a.path,mount:a.mount}),b.write2(null,".",{id:"openFiles"},{value:c},!0,null).then(function(){}))},untrackEditor:function(a,b){b=this.getSettingsManager();
var c=((b.getStore()||{getSync:function(){}}).getSync("openFiles")||{value:{files:[]}}).value;a=w.find(c.files,{path:a.path,mount:a.mount});c.files.remove(a);b.write2(null,".",{id:"openFiles"},{value:c},!0,null).then(function(){})},openItem:function(a,b,c){if(a)return b=q.getEditors(a),(b=w.find(b,function(a){return!0===a.isDefault}))?b.onEdit(a,this):this.getWindowManager().openItem(a,null,{register:!0})},onComponentsReady:function(){},createEditor:function(a,b,c,e,g){g=new m;w.isArray(b)&&(b=b[0]);
var k=this,q=b&&b.name?b.name:d.pathinfo(b.path,"PATHINFO_FILENAME")+"."+d.pathinfo(b.path,"PATHINFO_EXTENSION"),p=this.mainView,n=p.getDocker(),r={ctx:this,config:this.config,item:b,title:q,closeable:!0,closable:!0};d.mixin(r,a);if(w.isString(a.editorClass)&&!this.getModule(a.editorClass))return null;if(!0===a.runFunctionOnly)return a.editorClass.apply(this,[b]),g.resolve(null),g;e=e||p.layoutCenter;var u=n.addTab(null,{title:q,target:e?e._parent:null,icon:"fa-code"});r._parent=u;k.publish(h.EVENTS.ON_CREATE_EDITOR_BEGIN,
{args:r,item:b},this);u.set("loading",!0);a=d.addWidget(a.editorClass,r,k,u,!0,null,null,null,c);this.trackEditor(b,a);a._on("destroy",function(){k.untrackEditor(b)});k.publish(h.EVENTS.ON_CREATE_EDITOR_END,{args:r,item:b,editor:a},this);a.openItem&&(a.openItem(b),g.resolve(a),this.getWindowManager().registerView(a,!1));u.resize&&u.resize();g.then&&g.then(function(){u.set("loading",!1)});return g},registerEditorExtension:function(a,b,c,e,g,k,p,n,r){c=c||"el-icon-brush";var u=this,v={name:a,extensions:b,
onEdit:k,iconClass:c,owner:this,isDefault:null!=g?g:!1,editorClass:p};n&&(v=d.mixin(v,n));k||(v.onEdit=function(a,b,c){if(e&&e.onCreateEditor){var d=new m;e.onCreateEditor().then(function(){var e=u.createEditor(v,a,c,null,b);d.resolve(e)});return d}return u.createEditor(v,a,c,null,b)});w.isString(b)&&-1==b.indexOf(",")&&h.registerCustomMimeIconExtension(b,c);q.onRegisterEditor(v);this.publish(h.EVENTS.REGISTER_EDITOR,v)},initManagers:function(){this.settingsManager&&this.settingsManager.init();this.storeDelegate&&
(this.storeDelegate.appService=this.settingsManager);this.settingsManager&&(this.settingsManager.serviceObject=this.serviceObject,this.settingsManager.ctx=this,this.settingsManager.config=this.config,this.settingsManager.init());this.storeDelegate&&(this.storeDelegate.serviceObject=this.serviceObject);k("plugins")&&"undefined"!=typeof xappPluginResources&&this.pluginManager&&(this.pluginsLoading=this.pluginManager.loadPlugins(xappPluginResources));this.notificationManager&&(this.notificationManager.init(),
this.notificationManager.postMessage({message:"Loading application, please wait!",duration:1E3,showCloseButton:!0}));this.application&&this.application.init();this.windowManager&&this.windowManager.init();var a=this;this.registerEditorExtension("Browser","php|html|mp4|doc|xls|pdf|zip|tar|iso|avi|gz|mp3|mkv|ogg|png|jpg|cfhtml","fa-play-circle-o",this,!1,null,function(b){window.open(a.getFileManager().getImageUrl(b))},{ctx:this.ctx,registerView:!1,runFunctionOnly:!0,isDefault:!1})},constructManagers:function(){this.pluginManager=
this.createManager(g);this.windowManager=this.createManager(p);this.notificationManager=this.createManager(a);this.settingsManager=this.createManager(e)}});n.chainAfter(b,"constructManagers");n.chainAfter(b,"initManagers");n.chainAfter(b,"ready");return b})},"dojo/dom-attr":function(){define("exports ./sniff ./_base/lang ./dom ./dom-style ./dom-prop".split(" "),function(n,m,k,h,d,b){function c(a,b){a=a.getAttributeNode&&a.getAttributeNode(b);return!!a&&a.specified}var g={innerHTML:1,textContent:1,
className:1,htmlFor:m("ie"),value:1},p={classname:"class",htmlfor:"for",tabindex:"tabIndex",readonly:"readOnly"};n.has=function(a,e){var d=e.toLowerCase();return g[b.names[d]||e]||c(h.byId(a),p[d]||e)};n.get=function(a,e){a=h.byId(a);var d=e.toLowerCase(),m=b.names[d]||e,n=a[m];if(g[m]&&"undefined"!=typeof n)return n;if("textContent"==m)return b.get(a,m);if("href"!=m&&("boolean"==typeof n||k.isFunction(n)))return n;e=p[d]||e;return c(a,e)?a.getAttribute(e):null};n.set=function(a,c,q){a=h.byId(a);
if(2==arguments.length){for(var e in c)n.set(a,e,c[e]);return a}e=c.toLowerCase();var m=b.names[e]||c,r=g[m];if("style"==m&&"string"!=typeof q)return d.set(a,q),a;if(r||"boolean"==typeof q||k.isFunction(q))return b.set(a,c,q);a.setAttribute(p[e]||c,q);return a};n.remove=function(a,b){h.byId(a).removeAttribute(p[b.toLowerCase()]||b)};n.getNodeProp=function(a,e){a=h.byId(a);var d=e.toLowerCase(),g=b.names[d]||e;if(g in a&&"href"!=g)return a[g];e=p[d]||e;return c(a,e)?a.getAttribute(e):null}})},"dcl/dcl":function(){(function(n){"undefined"!=
typeof define?define(["./mini"],n):"undefined"!=typeof module?module.exports=n(require("./mini")):dcl=n(dcl)})(function(n){function m(){}function k(b,c,d){var g=b||m,a=c||m,e=d||m,h=function(){var b,c;g.apply(this,arguments);try{b=e.apply(this,arguments)}catch(r){b=r,c=!0}a.call(this,arguments,b);if(c)throw b;return b};h.advices={before:b,after:c,around:d};return h}function h(b){return function(c,d){var g=c._meta,a;g&&((a=+g.weaver[d]||0)&&a!=b&&n._error("set chaining",d,c,b,a),g.weaver[d]=b)}}var d=
n(n.Super,{constructor:function(){this.before=this.around.before;this.after=this.around.after;this.around=this.around.around}});n.mix(n,{Advice:d,advise:function(b){return n._makeSuper(b,d)},before:function(b){return n.advise({before:b})},after:function(b){return n.advise({after:b})},around:n.superCall,chainBefore:h(1),chainAfter:h(2),isInstanceOf:function(b,c){if(b instanceof c)return!0;b=b.constructor._meta;var d;if(b)for(b=b.bases,d=b.length-1;0<=d;--d)if(b[d]===c)return!0;return!1},_stub:function(b,
c,d,h){h=h[d]=n._extractChain(c,d,"around");var a=n._extractChain(c,d,"before").reverse();c=n._extractChain(c,d,"after");h=b?n._stubChainSuper(h,1==b?function(a){return n._stubChain(a.reverse())}:n._stubChain,d):n._stubSuper(h,d);return a.length||c.length?k(n._stubChain(a),n._stubChain(c),h):h||function(){}}});return n})},"xide/lodash":function(){define([],function(){if("undefined"!==typeof _)return _;console.error("error loading lodash",global._)})},"xfile/views/FileGrid":function(){define("xdojo/declare dojo/Deferred xide/types xide/utils xide/views/History xaction/DefaultActions xfile/views/Grid xfile/factory/Store xide/model/Path xfile/model/File xfile/types xlang/i18 xide/$".split(" "),
function(n,m,k,h,d,b,c,g,p,a,e,q,u){p=e.DEFAULT_FILE_GRID_PERMISSIONS;var w=n("xfile.views.FileGrid",c,{resizeAfterStartup:!0,formatters:{},hideExtensions:!1,menuOrder:{File:110,Edit:100,View:50,Settings:20,Navigation:10,Window:5},groupOrder:{Clipboard:110,File:100,Step:80,Open:70,Organize:60,Insert:10,Navigation:5,Select:0},tabOrder:{Home:100,View:50,Settings:20,Navigation:10},noDataMessage:"\x3cspan/\x3e",_history:null,options:h.clone(k.DEFAULT_GRID_OPTIONS),_columns:{},toolbarInitiallyHidden:!0,
itemType:k.ITEM_TYPE.FILE,permissions:p,contextMenuArgs:{limitTo:null,actionFilter:{quick:!0}},setState:function(a){this.inherited(arguments);var b=this,c=b.collection,e=a.store.path;c.getSync(e);var d=b.refresh();d.then(function(){c.getItem(e,!0).then(function(a){b.openFolder(a)})});return d},postMixInProperties:function(){var a=this.state;a&&a._columns&&(this._columns=a._columns);this.columns||(this.columns=this.getColumns());!this.collection&&this.state&&(a=this.state.store,this.collection=g.createFileStore(a.mount,
a.storeOptions,this.ctx.config).getDefaultCollection());return this.inherited(arguments)},getState:function(a){a=this.inherited(arguments)||{};a.store={mount:this.collection.mount,path:this.getCurrentFolder().path,storeOptions:this.collection.options};a._columns={};_.each(this._columns,function(b){a._columns[b.label]=!this.isColumnHidden(b.id)},this);return a},onSaveLayout:function(a){a=a.data;var b=this.getState();a.widgets.push({widget:this.declaredClass,state:b});return a},formatColumn:function(a,
b,c){var e=this.selectedRenderer?this.selectedRenderer.prototype:this;if(e.formatColumn&&(e=e.formatColumn.apply(arguments))||c.renderColumn&&(e=c.renderColumn.apply(this,arguments)))return e;switch(a){case "fileType":if("folder"==b)return q.localize("kindFolder");if(c.mime){var e="kind"+(c.mime.split("/")[1]||"unknown").toUpperCase(),d=q.localize(e);return e!==d?d:b}case "name":var g=c&&null!=c.directory&&!0===c.directory,k=!1===c.read&&!1===c.write,p=".."==c.name,e="",d=!1,e=g?p?"fa fa-level-up itemFolderList":
k?"fa fa-lock itemFolderList":"fa fa-folder itemFolderList":k?"fa fa-lock itemFolderList":"itemFolderList fa "+h.getIconClass(c.path),d=!0,g=!0===c.showPath?c.path:b;this.hideExtensions&&(g=h.pathinfo(g).filename);return d?'\x3cspan class\x3d"'+e+'""\x3e\x3c/span\x3e\x3cspan class\x3d"name fileGridNameNode" style\x3d"vertical-align: middle;padding-top: 0px"\x3e'+g+"\x3c/span\x3e":'\x3cimg class\x3d"fileGridIconCell" src\x3d" "/\x3e\x3cspan class\x3d"fileGridNameCell"\x3e'+g+"\x3c/span\x3e";case "sizeBytes":return c.size;
case "fileType":return h.capitalize(c.fileType||"unknown");case "mediaInfo":return c.mediaInfo||"unknown";case "owner":return c&&(e=c.owner)&&e.user?e.user.name:"";case "modified":if(""!==b)return g=null==!c.directory,!g&&q.translations.dateFormat?q.formatDate(b).replace("ms",""):""}return b},getColumns:function(a){function b(b,e,d,g){null!=c._columns[b]&&(g=!c._columns[b]);c.columns.push({renderExpando:"Name"===b,label:b,field:e,sortable:d,formatter:function(d,g){return b in a?a[b].apply(c,[e,d,
g]):c.formatColumn(e,d,g)},hidden:g})}a=a||this.formatters;var c=this;this.columns=[];b("Name","name",!0,!1);b("Type","fileType",!0,!0);b("Path","path",!0,!0);b("Size","sizeBytes",!0,!1);b("Modified","modified",!0,!1);b("Owner","owner",!0,!0);b("Media","mediaInfo",!0,!0);return this.columns},_focus:function(){var a=this.getRows();a[0]&&this.focus(this.row(a[0]))},setQueryEx:function(a){if(!a||!a.directory)return!1;this._lastPath=a.getPath();var b=this,c=new m,e=b.collection;"."===a.path?(e.resetQueryLog(),
b.set("collection",e.getDefaultCollection(a.getPath())),c.resolve()):e.open(a).then(function(d){e.resetQueryLog();b.set("collection",e.getDefaultCollection(a.getPath()));c.resolve(d)});return c},getCurrentFolder:function(){var a=this.getSelectedRenderer();if(a&&a.getCurrentFolder&&(a=a.getCurrentFolder.apply(this))){if(a.isBack){var b=this.collection.getSync(a.rPath);b&&(a=b)}return a}if((a=this.getRows()[0])&&(a._S||a._store)){if(!0===a.isBack&&(b=this.getHistory().getNow()))return this.collection.getSync(b);
if(a=a._S.getParent(a))return a}return null},getClass:function(){return w},getHistory:function(){this._history||(this._history=new d);return this._history},_createBackItem:function(a){return{name:"..",path:"..",rPath:a,sizeBytes:0,size:"",icon:"fa-level-up",isBack:!0,modified:"",_S:this.collection,directory:!0,_EX:!0,children:[],mayHaveChildren:!1}},startup:function(){if(!this._started){var a=this.inherited(arguments);u(this.domNode).addClass("xfileGrid");this.set("loading",!0);this.permissions&&
this.addActions([].concat(b.getDefaultActions(this.permissions,this,this).concat(this.getFileActions(this.permissions))));this._history=new d;var c=this;this.subscribe(k.EVENTS.ON_CLIPBOARD_COPY,function(a){a.type===c.itemType&&(c.currentCopySelection=a.selection,c.refreshActions())});c._on("noData",function(){if(!(0<c._total)){var a=c._history.getNow();a&&"./."!==a&&c.renderArray([this._createBackItem(a)])}});this.on("dgrid-refresh-complete",function(){var a=c.getRows();a&&1<a.length&&(a=_.find(a,
{isBack:!0}))&&(c.removeRow(a),c.refresh())});this._on("openFolder",function(a){c.set("title",a.item.name)});c.selectedRenderer&&(a=this.refresh())&&a.then(function(){c.set("loading",!1);c.setRenderer(c.selectedRenderer,!1)});this._on("onChangeRenderer",this.refresh);this._emit("startup");a.then(this.resize.bind(this));return a}}});w.prototype.Module=w;w.Module=w;w.createDefault=function(a,b,c,e,d,g){g={collection:g.getDefaultCollection(),_parent:c,Module:w,ctx:a};h.mixin(g,b||{});b=h.addWidget(w,
g,null,c,d,null,null,!0,null);e&&a.getWindowManager().registerView(b,!1);return b};w.DEFAULT_PERMISSIONS=p;return w})},"davinci/html/HTMLParser":function(){define("dojo/_base/declare davinci/html/HTMLText davinci/html/HTMLElement davinci/html/HTMLAttribute davinci/html/HTMLComment davinci/html/PHPBlock davinci/model/parser/Tokenizer davinci/html/CSSParser".split(" "),function(n,m,k,h,d,b,c,g){var p=function(){var a={autoSelfClosers:{br:!0,img:!0,hr:!0,link:!0,input:!0,meta:!0,col:!0,frame:!0,base:!0,
area:!0},doNotIndent:{pre:!0,"!cdata":!0}},b={autoSelfClosers:{},doNotIndent:{"!cdata":!0}},d=a,g=!1,h=function(){function a(a,c){var e=a.next();if("\x3c"==e){if(a.equals("!"))return a.next(),a.equals("[")?a.lookAhead("[CDATA[",!0)?(c(d("xml-cdata","]]\x3e")),null):"xml-text":a.lookAhead("--",!0)?(c(d("xml-comment","--\x3e")),null):a.lookAhead("DOCTYPE",!0)?(a.nextWhileMatches(/[\w\._\-]/),c(d("xml-doctype","\x3e")),"xml-doctype"):"xml-text";if(a.equals("?")){a.next();if(a.lookAhead("php",!0,!1,!0))return c(g("php-block",
"?\x3e")),null;a.nextWhileMatches(/[\w\._\-]/);c(d("xml-processing","?\x3e"));return"xml-processing"}a.equals("/")&&a.next();c(b);return"xml-punctuation"}if("\x26"==e){for(;!a.endOfLine()&&";"!=a.next(););return"xml-entity"}a.nextWhileMatches(/[^&<\n]/);return"xml-text"}function b(b,c){var d=b.next();if("\x3e"==d)return c(a),"xml-punctuation";if(/[?\/]/.test(d)&&b.equals("\x3e"))return b.next(),c(a),"xml-punctuation";if("\x3d"==d)return"xml-punctuation";if(/[\'\"]/.test(d))return c(e(d)),null;b.nextWhileMatches(/[^\s\u00a0=<>\"\'\/?]/);
return"xml-name"}function e(a){return function(c,e){for(;!c.endOfLine();)if(c.next()==a){e(b);break}return"xml-attribute"}}function d(b,c){return function(e,d){for(;!e.endOfLine();){if(e.lookAhead(c,!0)){d(a);break}e.next()}return b}}function g(b,c){return function(e,d){for(var g=!1;!e.endOfLine();){if(e.lookAhead(c,!0)){g=!0;d(a);break}e.next()}if(!g&&e.endOfLine())e.next();else{for(;e.lookAheadRegex(/^[\ \t]/,!0););e.endOfLine()&&e.next()}return b}}return function(b,e){return c.tokenizer(b,e||a)}}();
return{make:function(a){function b(a){for(var b=a.length-1;0<=b;b--)L.push(a[b])}function c(){b(arguments);I=!0}function e(){b(arguments);I=!1}function k(){P.style+=" xml-error"}function q(a){return function(b,e){e==a?c():(k(),c(arguments.callee))}}function p(a,b){var c=d.doNotIndent.hasOwnProperty(a)||V&&V.noIndent;V={prev:V,name:a,indent:M,startOfLine:b,noIndent:c}}function m(a){return function(b,c){var e=a;if(e&&e.noIndent)return c;if(g&&/<!\[CDATA\[/.test(b))return 0;e&&/^<\//.test(b)&&(e=e.prev);
for(;e&&!e.startOfLine;)e=e.prev;return e?e.indent+indentUnit:0}}function n(){return e(r,n)}function r(a,b){"\x3c"==b?c(u,J,H(1==K)):"\x3c/"==b?c(w,q("\x3e")):("xml-cdata"==a?(V&&"!cdata"==V.name||p("!cdata"),/\]\]>$/.test(b)&&(V=V.prev)):T.hasOwnProperty(a)||k(),c())}function u(a,b){"xml-name"==a?(U=b.toLowerCase(),P.style="xml-tagname",c()):(U=null,e())}function w(a,b){"xml-name"==a&&(P.style="xml-tagname",V&&b.toLowerCase()==V.name?V=V.prev:k());c()}function H(a){return function(b,e){"/\x3e"==
e||"\x3e"==e&&d.autoSelfClosers.hasOwnProperty(U)?c():"\x3e"==e?(p(U,a),c()):(k(),c(arguments.callee))}}function J(a){"xml-name"==a?(P.style="xml-attname",c(Q,J)):e()}function Q(a,b){"\x3d"==b?c(N):"\x3e"==b||"/\x3e"==b?e(H):e()}function N(a){"xml-attribute"==a?c(N):e()}var O=h(a),P,L=[n],K=0,M=0,U=null,V=null,I,T={"xml-text":!0,"xml-entity":!0,"xml-comment":!0,"xml-processing":!0,"xml-doctype":!0,"php-block":!0};return{indentation:function(){return M},next:function(){P=O.next();"whitespace"==P.style&&
0==K?M=P.value.length:K++;"\n"==P.content&&(M=K=0,P.indentation=m(V));if("whitespace"==P.style||"xml-comment"==P.type||"php-block"==P.type)return P;for(;;)if(I=!1,L.pop()(P.style,P.content),I)return P},copy:function(){var a=L.concat([]),b=O.state,c=V,e=this;return function(d){L=a.concat([]);K=M=0;V=c;O=h(d,b);return e}}}},electricChars:"/",configure:function(c){null!=c.useHTMLKludges&&(d=c.useHTMLKludges?a:b);c.alignCDATA&&(g=c.alignCDATA)}}}();return{parse:function(a,e){function q(a,b){E=new m;E.wasParsed=
!0;E.startOffset=b;C[C.length-1].addChild(E,void 0,!0);E.value=a}function n(a){a.content!=a.value&&q(a.value.substring(a.content.length),a.offset+a.value.length)}function w(a,b){a=a.split("\n");var c=a[a.length-1].length;b.children.length?(lastElement=b.children[b.children.length-1],lastElement._fmLine=a.length-1,lastElement._fmIndent=c):(b._fmChildLine=a.length-1,b._fmChildIndent=c)}function r(){if(null!=E&&!E.value.match(/\S/)){var a=C[C.length-1];a.children.pop();w(E.value,a)}E=null}function v(){var a=
C[C.length-1];A.nextWhileMatches(/[\s\u00a0]/);var b=A.get();null!=E?(E.value+=b,r()):w(b,a);g.parse(A,a)}function x(a){for(y=z.next();a&&"whitespace"==y.style;)y=z.next();return y}var A=c.stringStream({next:function(){if(1==++this.count)return a;throw StopIteration;},count:0,text:a}),z=p.make(A),y,B=[],C=[];C.push(e);var E,F,G;try{do switch(y=z.next(),y.style){case "xml-punctuation":r();if("\x3c"==y.content){var D=new k;D.wasParsed=!0;D.startOffset=y.offset;C[C.length-1].addChild(D,void 0,!0);x(!0);
for("xml-tagname"==y.style?D.tag=y.content:B.push("expecting tag name");"xml-attname"==(y=x(!0)).style;){var H=new h;H.wasParsed=!0;D.attributes.push(H);H.name=y.content;H.startOffset=y.offset;x(!0);if("\x3d"==y.content)if(y=z.next(),"xml-attribute"==y.style){var J=y.content;H.setValue(J.substring(1,J.length-1))}else B.push("expecting attribute value");else H.noValue=!0,H.setValue(!0);H.endOffset=y.offset-1;if(H.noValue&&"xml-attname"!=y.style)break}"xml-punctuation"!=y.style?B.push("expecting \x3e"):
(D.startTagOffset=y.offset,"\x3e"==y.content?C.push(D):(D.noEndTag=!0,D=C[C.length-1]),n(y));"style"==D.tag&&v()}else"\x3c/"==y.value&&(e=D,y=z.next(),"script"==D.tag&&(D.script=D.getElementText()),C.pop(),D=C[C.length-1],y=z.next(),e.endOffset=y.offset,n(y));G=null;break;case "xml-text":case "whitespace":case "xml-entity":F?F.value+=y.value:G?G.value+=y.value:E?E.value+=y.value:q(y.value,y.offset);G=null;break;case "xml-comment":r();var Q=new d;Q.wasParsed=!0;Q.startOffset=y.offset;Q.value=y.content.substring(4,
y.content.length-3);Q.endOffset=y.offset+y.content.length;C[C.length-1].addChild(Q,void 0,!0);G=null;break;case "php-block":r();var N=new b;N.wasParsed=!0;N.startOffset=y.offset;N.value=y.content;N.endOffset=y.offset+y.content.length;C[C.length-1].addChild(N,void 0,!0);G=N;break;case "xml-doctype":F||(r(),Q=new d,Q.wasParsed=!0,Q.startOffset=y.offset,Q.value=y.value.substring(2),C[C.length-1].addChild(Q,void 0,!0),Q.isProcessingInstruction=!0,y=z.next());var O=y.content.length-1;"\x3e"==y.content.charAt(y.content.length-
1)?(Q.endOffset=y.offset+y.content.length,Q.value+=y.content.substring(0,O),n(y),F=void 0):(F=Q,Q.value+=y.content);G=null}while(1)}catch(P){}return{errors:B,endOffset:y?y.offset:0}}}})},"xfile/factory/Store":function(){define(["xide/types","xide/factory","xide/utils","xfile/data/Store"],function(n,m,k,h){m.createFileStore=function(d,b,c,g,p,a){b=b||{fields:n.FIELDS.SHOW_ISDIR|n.FIELDS.SHOW_OWNER|n.FIELDS.SHOW_SIZE|n.FIELDS.SHOW_MIME|n.FIELDS.SHOW_PERMISSIONS|n.FIELDS.SHOW_TIME|n.FIELDS.SHOW_MEDIA_INFO};
k.mixin(b,g);d=new h(k.mixin({data:[],ctx:p,config:c,url:c.FILE_SERVICE,serviceUrl:c.serviceUrl,serviceClass:c.FILES_STORE_SERVICE_CLASS,mount:d,options:b},a));d._state={initiated:!1,filter:null,filterDef:null};d.reset();d.setData([]);d.init();p&&p.getFileManager().addStore(d);return d};return m})},"xblox/model/functions/PauseBlock":function(){define(["dcl/dcl","xide/utils","xide/types","dojo/Deferred","xblox/model/Block"],function(n,m,k,h,d){return n(d,{declaredClass:"xblox.model.functions.PauseBlock",
command:"Select command please",icon:"",args:null,_timeout:100,hasInlineEdits:!0,solve:function(b,c){if(this.command){if((b=b.resolveBlock(this.command))&&b.pause){var d=b.pause();this.onSuccess(this,c)}else this.onFailed(this,c);return d}},makeEditable:function(b,c,d,h,a,e,k){return'\x3ca   tabIndex\x3d"-1" pos\x3d\''+c+"' display-mode\x3d'"+(a||"popup")+"' display-type\x3d'"+(d||"text")+"' data-prop\x3d'"+b+"' data-title\x3d'"+h+"' class\x3d'editable editable-click'  href\x3d'#'\x3e"+this[b]+"\x3c/a\x3e"},
getFieldOptions:function(b){if("command"===b)return this.scope.getCommandsAsOptions("text")},toText:function(){var b="Unknown",c=this.scope.getBlock(this.command);c&&(b=c.name);-1!==this.command.indexOf("://")&&(b='\x3cspan class\x3d"text-info"\x3e'+this.scope.toFriendlyName(this,this.command)+"\x3c/span\x3e");return this.getBlockIcon("D")+"Pause Command : "+b},getFields:function(){var b=this.inherited(arguments)||this.getDefaultFields();this.command.indexOf("://")&&this.scope.toFriendlyName(this,
this.command);b.push(m.createCI("value","xcf.widgets.CommandPicker",this.command,{group:"General",title:"Command",dst:"command",options:this.scope.getCommandsAsOptions(),block:this,pickerType:"command",value:this.command}));return b}})})},"davinci/html/HTMLModel":function(){define(["dojo/_base/declare","davinci/model/Model"],function(n,m){davinci.html||(davinci.html={});davinci.html._noFormatElements={span:!0,b:!0,it:!0};davinci.html.escapeXml=function(k){return k?k.replace(/&/g,"\x26amp;").replace(/</g,
"\x26lt;").replace(/>/g,"\x26gt;").replace(/"/g,"\x26quot;"):k};davinci.html.unEscapeXml=function(k){return k&&"string"===typeof k?k.replace(/&quot;/g,'"').replace(/&gt;/g,"\x3e").replace(/&lt;/g,"\x3c").replace(/&amp;/g,"\x26"):k};return n("davinci.html.HTMLModel",m,{})})},"xblox/model/ModelBase":function(){define(["dcl/dcl","xide/utils","xide/types","xide/mixins/EventedMixin","xide/lodash"],function(n,m,k,h,d){h=n(h.dcl,{declaredClass:"xblox.model.ModelBase",id:null,description:"",parent:null,parentId:null,
group:null,order:0,_store:null,outputs:function(){return[]},takes:function(){return[]},needs:function(){return[]},constructor:function(b){for(var c in b)b.hasOwnProperty(c)&&(this[c]=b[c]);this.id||(this.id=this.createUUID());this.utils=m;this.types=k},keys:function(b){var c=[],d;for(d in b)c.push(d);return c},values:function(b){var c=[],d;for(d in b)c.push(b[d]);return c},toArray:function(){return this.map()},size:function(){return this.toArray().length},createUUID:m.createUUID,canEdit:function(){return!0},
getFields:function(){return null},isString:function(b){return"string"==typeof b},isNumber:function(b){return"number"==typeof b},isBoolean:function(b){return"boolean"==typeof b},isObject:d.isObject,isArray:d.isArray,getValue:function(b){var c=parseFloat(b);return isNaN(c)?"true"===b||!0===b?!0:"false"===b||!1===b?!1:b:c},isScript:function(b){return this.isString(b)&&(-1!=b.indexOf("return")||-1!=b.indexOf(";")||-1!=b.indexOf("(")||-1!=b.indexOf("+")||-1!=b.indexOf("-")||-1!=b.indexOf("\x3c")||-1!=
b.indexOf("*")||-1!=b.indexOf("/")||-1!=b.indexOf("%")||-1!=b.indexOf("\x3d")||-1!=b.indexOf("\x3d\x3d")||-1!=b.indexOf("\x3e")||-1!=b.indexOf("[")||-1!=b.indexOf("{")||-1!=b.indexOf("}"))},replaceAll:function(b,c,d){return this.isString(d)?d.split(b).join(c):d},isInValidState:function(){return!0},destroy:function(){}});n.chainAfter(h,"destroy");return h})},"xblox/views/Grid":function(){define("xdojo/declare xide/types xgrid/ListRenderer xgrid/TreeRenderer xblox/views/ThumbRenderer xgrid/Grid xgrid/MultiRenderer xide/views/_LayoutMixin xgrid/Defaults xgrid/Layout xgrid/Focus xgrid/KeyboardNavigation dgrid/OnDemandGrid xide/mixins/EventedMixin xide/utils xblox/BlockActions xgrid/Search xide/widgets/_Widget xblox/views/DnD".split(" "),
function(n,m,k,h,d,b,c,g,p,a,e,q,u,w,r,v,x,A,z){d=[h,d];n=n.classFactory("multiRenderer",{},d,c.Implementation);m=b.createGridClass("xblox.views.Grid",{options:r.clone(m.DEFAULT_GRID_OPTIONS)},{SELECTION:!0,KEYBOARD_SELECTION:!0,PAGINATION:!1,ACTIONS:m.GRID_FEATURES.ACTIONS,CONTEXT_MENU:m.GRID_FEATURES.CONTEXT_MENU,TOOLBAR:m.GRID_FEATURES.TOOLBAR,CLIPBOARD:m.GRID_FEATURES.CLIPBOARD,COLUMN_RESIZER:m.GRID_FEATURES.COLUMN_RESIZER,SPLIT:{CLASS:g},BLOCK_ACTIONS:{CLASS:v},DND:{CLASS:z},KEYBOARD_NAVIGATION:{CLASS:q},
SEARCH:{CLASS:x},WIDGET:{CLASS:A}},{RENDERER:n},{renderers:d,selectedRenderer:h},{GRID:u,LAYOUT:a,DEFAULTS:p,RENDERER:k,EVENTED:w,FOCUS:e});m.DEFAULT_RENDERERS=d;m.DEFAULT_MULTI_RENDERER=n;return m})},"dojo/hccss":function(){define("require ./_base/config ./dom-class ./dom-style ./has ./domReady ./_base/window".split(" "),function(n,m,k,h,d,b,c){d.add("highcontrast",function(){var b=c.doc.createElement("div");b.style.cssText="border: 1px solid; border-color:red green; position: absolute; height: 5px; top: -999px;background-image: url("+
(m.blankGif||n.toUrl("./resources/blank.gif"))+");";c.body().appendChild(b);var k=h.getComputedStyle(b),a=k.backgroundImage,k=k.borderTopColor==k.borderRightColor||a&&("none"==a||"url(invalid-url:)"==a);8>=d("ie")?b.outerHTML="":c.body().removeChild(b);return k});b(function(){d("highcontrast")&&k.add(c.body(),"dj_a11y")});return d})},"xnode/xnode":function(){},"davinci/ve/actions/SelectParentAction":function(){define(["dojo/_base/declare","davinci/ve/actions/_SelectAncestorAction"],function(n,m){return n("davinci.ve.actions.SelectParentAction",
[m],{run:function(k){var h=(k=this.fixupContext(k))&&k.getSelection();this.selectionSameParentNotBody(h)&&k.select(h[0].getParent())},isEnabled:function(k){k=(k=this.fixupContext(k))&&k.getSelection();return this.selectionSameParentNotBody(k)}})})},"dojo/date":function(){define(["./has","./_base/lang"],function(n,m){var k={getDaysInMonth:function(h){var d=h.getMonth();return 1==d&&k.isLeapYear(h)?29:[31,28,31,30,31,30,31,31,30,31,30,31][d]},isLeapYear:function(h){h=h.getFullYear();return!(h%400)||
!(h%4)&&!!(h%100)},getTimezoneName:function(h){var d=h.toString(),b="",c=d.indexOf("(");if(-1<c)b=d.substring(++c,d.indexOf(")"));else if(c=/([A-Z\/]+) \d{4}$/,d=d.match(c))b=d[1];else if(d=h.toLocaleString(),c=/ ([A-Z\/]+)$/,d=d.match(c))b=d[1];return"AM"==b||"PM"==b?"":b},compare:function(h,d,b){h=new Date(+h);d=new Date(+(d||new Date));"date"==b?(h.setHours(0,0,0,0),d.setHours(0,0,0,0)):"time"==b&&(h.setFullYear(0,0,0),d.setFullYear(0,0,0));return h>d?1:h<d?-1:0},add:function(h,d,b){var c=new Date(+h),
g=!1,k="Date";switch(d){case "day":break;case "weekday":var a;(d=b%5)?a=parseInt(b/5):(d=0<b?5:-5,a=0<b?(b-5)/5:(b+5)/5);var e=h.getDay(),q=0;6==e&&0<b?q=1:0==e&&0>b&&(q=-1);e+=d;if(0==e||6==e)q=0<b?2:-2;b=7*a+d+q;break;case "year":k="FullYear";g=!0;break;case "week":b*=7;break;case "quarter":b*=3;case "month":g=!0;k="Month";break;default:k="UTC"+d.charAt(0).toUpperCase()+d.substring(1)+"s"}if(k)c["set"+k](c["get"+k]()+b);g&&c.getDate()<h.getDate()&&c.setDate(0);return c},difference:function(h,d,
b){d=d||new Date;b=b||"day";var c=d.getFullYear()-h.getFullYear(),g=1;switch(b){case "quarter":h=h.getMonth();d=d.getMonth();g=Math.floor(d/3)+1+4*c-(Math.floor(h/3)+1);break;case "weekday":c=Math.round(k.difference(h,d,"day"));b=parseInt(k.difference(h,d,"week"));if(0==c%7)c=5*b;else{var g=0,p=h.getDay(),a=d.getDay();b=parseInt(c/7);d=c%7;h=new Date(h);h.setDate(h.getDate()+7*b);h=h.getDay();if(0<c)switch(!0){case 6==p:g=-1;break;case 0==p:g=0;break;case 6==a:g=-1;break;case 0==a:g=-2;break;case 5<
h+d:g=-2}else if(0>c)switch(!0){case 6==p:g=0;break;case 0==p:g=1;break;case 6==a:g=2;break;case 0==a:g=1;break;case 0>h+d:g=2}c=c+g-2*b}g=c;break;case "year":g=c;break;case "month":g=d.getMonth()-h.getMonth()+12*c;break;case "week":g=parseInt(k.difference(h,d,"day")/7);break;case "day":g/=24;case "hour":g/=60;case "minute":g/=60;case "second":g/=1E3;case "millisecond":g*=d.getTime()-h.getTime()}return Math.round(g)}};m.mixin(m.getObject("dojo.date",!0),k);return k})},"xide/json/appendNodeFactory":function(){define(["dojo/_base/declare",
"./util","./ContextMenu"],function(n,m,k){return function(h){function d(b){this.editor=b;this.dom={}}d.prototype=new h;d.prototype.getDom=function(){var b=this.dom;if(b.tr)return b.tr;this._updateEditability();var c=document.createElement("tr");c.node=this;b.tr=c;if(this.editable.field){b.tdDrag=document.createElement("td");var d=document.createElement("td");b.tdMenu=d;var h=document.createElement("button");h.className="contextmenu";h.title="Click to open the actions menu (Ctrl+M)";b.menu=h;d.appendChild(b.menu)}d=
document.createElement("td");h=document.createElement("div");h.innerHTML="(empty)";h.className="readonly";d.appendChild(h);b.td=d;b.text=h;this.updateDom();return c};d.prototype.updateDom=function(){var b=this.dom,c=b.td;c&&(c.style.paddingLeft=24*this.getLevel()+26+"px");var d=b.text;d&&(d.innerHTML="(empty "+this.parent.type+")");d=b.tr;this.isVisible()?b.tr.firstChild||(b.tdDrag&&d.appendChild(b.tdDrag),b.tdMenu&&d.appendChild(b.tdMenu),d.appendChild(c)):b.tr.firstChild&&(b.tdDrag&&d.removeChild(b.tdDrag),
b.tdMenu&&d.removeChild(b.tdMenu),d.removeChild(c))};d.prototype.isVisible=function(){return 0==this.parent.childs.length};d.prototype.showContextMenu=function(b,c){var d=this,p=h.TYPE_TITLES;(new k([{text:"Append",title:"Append a new field with type 'auto' (Ctrl+Shift+Ins)",submenuTitle:"Select the type of the field to be appended",className:"insert",click:function(){d._onAppend("","","auto")},submenu:[{text:"Auto",className:"type-auto",title:p.auto,click:function(){d._onAppend("","","auto")}},{text:"Array",
className:"type-array",title:p.array,click:function(){d._onAppend("",[])}},{text:"Object",className:"type-object",title:p.object,click:function(){d._onAppend("",{})}},{text:"String",className:"type-string",title:p.string,click:function(){d._onAppend("","","string")}}]}],{close:c})).show(b,this.editor.content)};d.prototype.onEvent=function(b){var c=b.type,d=b.target||b.srcElement,h=this.dom;d==h.menu&&("mouseover"==c?this.editor.highlighter.highlight(this.parent):"mouseout"==c&&this.editor.highlighter.unhighlight());
if("click"==c&&d==h.menu){var a=this.editor.highlighter;a.highlight(this.parent);a.lock();m.addClassName(h.menu,"selected");this.showContextMenu(h.menu,function(){m.removeClassName(h.menu,"selected");a.unlock();a.unhighlight()})}if("keydown"==c)this.onKeyDown(b)};return d}})},"xide/widgets/RichTextWidget":function(){define("dcl/dcl dojo/on xide/widgets/WidgetBase dojo/keys dojo/dom-style xide/utils".split(" "),function(n,m,k,h,d,b){return n(k,{declaredClass:"xide.widgets.RichTextWidget",didLoad:!1,
minHeight:"300px",editorHeight:"470px",jsonEditorHeight:"270px",aceEditorHeight:"200px",aceEditorOptions:null,aceEditor:null,aceNode:null,useACE:!1,templateString:"\x3cdiv class\x3d'jsonEditorWidgetContainer' style\x3d'width: 100%;height:300px'\x3e\x3cdiv attachTo\x3d'textArea' class\x3d'textarea' placeholder\x3d'Enter text ...' style\x3d'width: 100%; min-height: 100px; font-size: 14px; line-height: 18px;'\x3e\x3c/div\x3e\x3cdiv attachTo\x3d'toolbar' style\x3d'display: none;'\x3e\x3c/div\x3e\x3c/div\x3e",
editor:null,getValue:function(){return this.aceEditor?this.aceEditor.get("value"):this.inherited(arguments)},resize:function(){this.inherited(arguments);this.aceEditor&&this.aceEditor.resize()},ctlrKeyDown:!1,onKeyUp:function(b){switch(b.keyCode){case h.ALT:case h.CTRL:this.ctlrKeyDown=!1}},onKey:function(b){switch(b.keyCode){case h.META:case h.ALT:case h.SHIFT:case h.CTRL:this.ctlrKeyDown=!0,setTimeout(function(){c.ctlrKeyDown=!1},2E3)}var c=this;if(b.type&&"keyup"==b.type)return this.onKeyUp(b);
var d=b.charCode||b.keyCode;if(this.ctlrKeyDown&&83===d&&(b.preventDefault(),this.delegate&&this.delegate.onSave))this.delegate.onSave(this.userData,this.getValue())},setupEventHandlers:function(){var b=this;m(this.aceNode,"keydown",function(c){b.onKey(c)})},_lastContent:null,_onACEUpdate:function(){var b=this.getValue();this.setValue(b);this.changed=!0;this.userData&&(this.userData.changed=!0)},_createACEEditor:function(c){c={region:"center",value:this.getValue(),style:"margin: 0; padding: 0; position:relative;overflow: auto;height:inherit;width:inherit;",
mode:"text",readOnly:!1,tabSize:2,softTabs:!0,wordWrap:!0,showPrintMargin:!1,highlightActiveLine:!1,fontSize:"13px",showGutter:!1,className:"editor-ace ace_editor ace-codebox-dark ace_dark",autoFocus:!1};-1==c.value&&(c.value="");c=new TextEditor(c,dojo.doc.createElement("div"));this.aceNode.appendChild(c.domNode);c.startup();this.aceEditor=c;this.aceEditor.setOptions();c=this.aceEditor.getEditor();var d=this;c.on("change",function(){var c=d.getValue();d.userData=b.setCIValueByField(d.userData,"value",
c);d.changed=!0;d.userData&&(d.userData.changed=!0)});c.on("blur",function(){d.setActive(!1);var b=d.getValue();d._lastContent!=b&&d.setValue(b)});c.on("focus",function(){d.setActive(!0)})},startup:function(){var b=this.userData?this.userData.value:"",d=this;try{var h=this.$textArea;this.$textArea.html(b);var a=new wysihtml5.Editor(this.$textArea[0],{toolbar:this.$toolbar[0],parserRules:{tags:{strong:{},b:{},i:{},em:{},br:{},p:{},div:{},span:{},ul:{},ol:{},li:{},a:{set_attributes:{target:"_blank",
rel:"nofollow"},check_attributes:{href:"url"}}}}});a.on("change",function(a){d.setValue(h.html())});this.add(a)}catch(e){console.error("constructing json editor widget failed : "+e.message),logError(e)}this.setupEventHandlers()}})})},"davinci/ve/ve.plugin":function(){define(["require"],function(n){return{id:"davinci.ve","davinci.view":[{id:"Palette",title:"Palette",viewClass:"davinci/ve/palette/HtmlWidgets",iconClass:"paletteIcon paletteIconWidgets"},{id:"states",title:"Scenes",viewClass:"davinci/ve/views/StatesView",
iconClass:"paletteIcon paletteIconStates"},{id:"datastores",title:"DataStores",viewClass:"davinci/ve/views/DataStoresView"},{id:"object",title:"Object",viewClass:"davinci/ve/views/ObjectView"},{id:"style",title:"",viewClass:"davinci/ve/views/SwitchingStyleView"}],"davinci.perspective":[{id:"pageDesign",title:"Page Design",views:[{viewID:"davinci.ve.Palette",position:"left",selected:!0},{viewID:"davinci.ui.outline",position:"left"},{viewID:"davinci.ui.devices",position:"left"},{viewID:"davinci.ui.files",
position:"left"},{viewID:"davinci.ve.style",position:"right"},{viewID:"davinci.ui.comment",position:"right",hidden:!0},{viewID:"davinci.ve.states",position:"right-bottom",selected:!0},{viewID:"davinci.ui.navigator",position:"left-bottom",selected:!0},{viewID:"davinci.review.reviewNavigator",position:"left-bottom"}]}],"davinci.editor":[{id:"HTMLPageEditor",name:"HTML Visual Editor",extensions:["html","htm","php"],isDefault:!0,editorClass:"davinci/ve/PageEditor",palettePerspective:"davinci.ve.pageDesign",
expandPalettes:["left"]}],"davinci.actionSets":[{id:"cutCopyPaste",visible:!0,actions:[{label:"Cut",keySequence:"M1+X",iconClass:"editActionIcon editCutIconSmall",action:"davinci/ve/actions/CutAction",menubarPath:"davinci.edit/cut"},{label:"Copy",keySequence:"M1+C",iconClass:"editActionIcon editCopyIconSmall",action:"davinci/ve/actions/CopyAction",menubarPath:"davinci.edit/cut"},{keySequence:"M1+V",iconClass:"editActionIcon editPasteIconSmall",label:"Paste",action:"davinci/ve/actions/PasteAction",
menubarPath:"davinci.edit/cut"},{keySequence:"DEL",iconClass:"editActionIcon editDeleteIconSmall",label:"Delete",action:"davinci/ve/actions/DeleteAction",menubarPath:"davinci.edit/cut"},{iconClass:"fa-crosshairs",label:"Show in Outline",action:"davinci/ve/actions/ShowInOutline",menubarPath:"davinci.edit/cut"},{iconClass:"editActionIcon selectParentIconSmall",label:"Select parent",action:"davinci/ve/actions/SelectParentAction",menubarPath:"davinci.edit/cut"},{iconClass:"editActionIcon selectAncestorIconSmall",
label:"Select ancestor...",action:"davinci/ve/actions/SelectAncestorAction",menubarPath:"davinci.edit/cut"},{iconClass:"editActionIcon unselectAllIconSmall",label:"Unselect all",action:"davinci/ve/actions/UnselectAllAction",menubarPath:"davinci.edit/cut"},{iconClass:"editActionIcon",label:"Surround with \x26lt;A\x26gt;",action:"davinci/ve/actions/SurroundAction",surroundWithTagName:"a",menubarPath:"davinci.edit/cut"},{iconClass:"editActionIcon",label:"Surround with \x26lt;DIV\x26gt;",action:"davinci/ve/actions/SurroundAction",
surroundWithTagName:"div",menubarPath:"davinci.edit/cut"},{iconClass:"editActionIcon",label:"Surround with \x26lt;SPAN\x26gt;",action:"davinci/ve/actions/SurroundAction",surroundWithTagName:"span",menubarPath:"davinci.edit/cut"},{iconClass:"editActionIcon moveToFrontIconSmall",label:"Move to front",action:"davinci/ve/actions/MoveToFrontAction",menubarPath:"davinci.edit/cut"},{iconClass:"editActionIcon moveForwardIconSmall",label:"Move forward",action:"davinci/ve/actions/MoveForwardAction",menubarPath:"davinci.edit/cut"},
{iconClass:"editActionIcon moveBackwardIconSmall",label:"Move backward",action:"davinci/ve/actions/MoveBackwardAction",menubarPath:"davinci.edit/cut"},{iconClass:"editActionIcon moveToBackIconSmall",label:"Move to back",action:"davinci/ve/actions/MoveToBackAction",menubarPath:"davinci.edit/cut"}]}],"davinci.viewActions":[{viewContribution:{targetID:"davinci.ve.outline",actions:[{id:"design",iconClass:"designModeIcon editActionIcon",radioGroup:"displayMode",method:"switchDisplayMode",label:"Widgets",
toolbarPath:"displayMode"},{id:"source",iconClass:"sourceModeIcon editActionIcon",method:"switchDisplayMode",radioGroup:"displayMode",label:"Source",toolbarPath:"displayMode"}]}},{viewContribution:{targetID:"davinci.ve.states",actions:[{id:"addState",iconClass:"viewActionIcon addStateIcon",action:"davinci/ve/actions/AddState",label:"Add state",toolbarPath:"states1"},{id:"removeState",iconClass:"viewActionIcon removeStateIcon",action:"davinci/ve/actions/RemoveState",label:"Remove state",toolbarPath:"states1"},
{id:"modifyState",iconClass:"viewActionIcon modifyStateIcon",action:"davinci/ve/actions/ModifyState",label:"Modify state",toolbarPath:"states1"},{id:"NewWidgetsCurrentState",className:"newWidgetsCurrentStateButton",iconClass:"viewActionIcon newWidgetsCurrentStateIcon",action:"davinci/ve/actions/NewWidgetsCurrentState",label:"Toggle whether new widgets go to Background or current state",toolbarPath:"states2"},{id:"highlightBaseWidgets",className:"highlightBaseWidgetsButton",iconClass:"viewActionIcon highlightBaseWidgetsIcon",
action:"davinci/ve/actions/HighlightBaseWidgets",label:"When in custom state, highlight widgets from Background state",toolbarPath:"states2"}]}}],"davinci.actionSetPartAssociations":[{targetID:"davinci.ve.cutCopyPaste",parts:["davinci.ve.visualEditor","davinci.ve.VisualEditorOutline"]}],"davinci.editorActions":{editorContribution:{targetID:"davinci.ve.HTMLPageEditor",actions:[{id:"savecombo",className:"maqLabelButton",showLabel:!0,label:"Save",toolbarPath:"save",type:"ComboButton",run:function(){n(["../Workbench"],
function(m){n("../ui/Resource").save()})},isEnabled:function(m){return n("../Workbench").getOpenEditor()},menu:[{iconClass:"saveIcon",run:function(){n("../ui/Resource").save()},isEnabled:function(m){return n("../Workbench").getOpenEditor()},label:"Save",keyBinding:{accel:!0,charOrCode:"s",allowGlobal:!0}},{iconClass:"saveAsIcon",run:function(){n("../ui/Resource").saveAs("html")},isEnabled:function(m){return n("../Workbench").getOpenEditor()},label:"Save As",keyBinding:{accel:!0,shift:!0,charOrCode:"s",
allowGlobal:!0}}]},{id:"undo",iconClass:"editActionIcon undoIcon",action:"davinci/actions/UndoAction",label:"Undo",toolbarPath:"undoredo",keyBinding:{accel:!0,charOrCode:"z"},command:"Edit/Undo"},{id:"redo",iconClass:"editActionIcon redoIcon",action:"davinci/actions/RedoAction",label:"Redo",toolbarPath:"undoredo",keyBinding:{accel:!0,shift:!0,charOrCode:"z"},command:"Edit/Redo"},{id:"cut",label:"Cut",iconClass:"editActionIcon editCutIcon",action:"davinci/ve/actions/CutAction",toolbarPath:"cutcopypaste",
keyBinding:{accel:!0,charOrCode:"x"}},{id:"copy",label:"Copy",iconClass:"editActionIcon editCopyIcon",action:"davinci/ve/actions/CopyAction",toolbarPath:"cutcopypaste",keyBinding:{accel:!0,charOrCode:"c"}},{id:"paste",label:"Paste",iconClass:"editActionIcon editPasteIcon",action:"davinci/ve/actions/PasteAction",toolbarPath:"cutcopypaste",keyBinding:{accel:!0,charOrCode:"v"}},{id:"delete",iconClass:"editActionIcon editDeleteIcon",label:"Delete",action:"davinci/ve/actions/DeleteAction",toolbarPath:"delete",
keyBinding:{charOrCode:[dojo.keys.DELETE,dojo.keys.BACKSPACE]}},{id:"outline",iconClass:"fa-crosshairs",label:"Show in Outline",action:"davinci/ve/actions/ShowInOutline",toolbarPath:"outline"},{id:"openBrowser",iconClass:"text-success fa-play",className:"davinciFloatRight openBrowser",run:function(){n(["../Workbench"],function(m){(m=m.getOpenEditor())&&m.resourceFile?m.previewInBrowser():console.error("ERROR. Cannot launch browser window. No editor info.")})},label:"Preview in Browser",toolbarPath:"undoredo",
iconClass:"text-success fa-play",keyBinding:{accel:!0,charOrCode:"0",allowGlobal:!0},command:"File/Open In Browser",group:"File",tab:"Home"},{id:"documentSettings",iconClass:"documentSettingsIcon",className:"documentSettings davinciFloatRight",label:"Document settings",toolbarPath:"undoredo",type:"DropDownButton",menu:[{id:"theme",iconClass:"selectThemeIcon",className:"davinciFloatRight",action:"davinci/actions/SelectThemeAction",label:"Switch theme"},{iconClass:"editActionIcon",label:"Select parent",
action:"davinci/ve/actions/SelectParentAction",command:"Widget/Select/SelectParent",group:"Widget"},{iconClass:"editActionIcon",label:"Select ancestor",action:"davinci/ve/actions/SelectAncestorAction",command:"Widget/Select/SelectAnchestor",group:"Widget"},{iconClass:"editActionIcon",label:"Unselect all",action:"davinci/ve/actions/UnselectAllAction"},{iconClass:"editActionIcon moveToFrontIconSmall",label:"Move to front",action:"davinci/ve/actions/MoveToFrontAction",command:"Widget/Move/MoveToFront",
group:"Widget"},{iconClass:"editActionIcon moveForwardIconSmall",label:"Move forward",action:"davinci/ve/actions/MoveForwardAction",command:"Widget/Move/MoveToForward",group:"Widget"},{iconClass:"editActionIcon moveBackwardIconSmall",label:"Move backward",action:"davinci/ve/actions/MoveBackwardAction",command:"Widget/Move/MoveToBackward",group:"Widget"},{iconClass:"editActionIcon moveToBackIconSmall",label:"Move to back",action:"davinci/ve/actions/MoveToBackAction",command:"Widget/Move/MoveToBack",
group:"Widget"},{iconClass:"editActionIcon",label:"Surround with \x26lt;A\x26gt;",action:"davinci/ve/actions/SurroundAction",surroundWithTagName:"a",command:"Widget/SourroundWithA",group:"Widget",tab:"Tools"},{iconClass:"editActionIcon",label:"Surround with \x26lt;DIV\x26gt;",action:"davinci/ve/actions/SurroundAction",surroundWithTagName:"div",command:"Widget/SourroundWithDIV",group:"Widget",tab:"Tools"},{iconClass:"editActionIcon",label:"Surround with \x26lt;SPAN\x26gt;",action:"davinci/ve/actions/SurroundAction",
surroundWithTagName:"span",command:"Widget/SourroundWithSPAN",group:"Widget",tab:"Tools"}]},{id:"stickynote",iconClass:"stickynoteIcon",action:"davinci/actions/StickyNoteAction",label:"Add note",toolbarPath:"stickynote"},{id:"layout",className:"maqLabelButton davinciFloatRight maqLayoutDropDownButton",showLabel:!0,label:"Flow",toolbarPath:"undoredo",type:"DropDownButton",menu:[{label:"Flow",iconClass:"flowLayoutIcon",method:"selectLayoutFlow"},{label:"Absolute",iconClass:"absoluteLayoutIcon",method:"selectLayoutAbsolute"}]},
{id:"sourcecombo",className:"maqLabelButton davinciFloatRight maqSourceComboButton",showLabel:!0,label:"Source",action:"davinci/ve/actions/ViewSourceAction",toolbarPath:"undoredo",type:"ComboButton",menu:[{keyBinding:{accel:!0,charOrCode:"2",allowGlobal:!0},iconClass:"editActionIcon sourceModeIcon sourceMenuIcon",action:"davinci/ve/actions/ViewSourceMenuAction",label:"Source only"},{keyBinding:{accel:!0,charOrCode:"3",allowGlobal:!0},iconClass:"editActionIcon splitVerticalIcon sourceMenuIcon",action:"davinci/ve/actions/ViewSplitVMenuAction",
label:"Split Vertically"},{keyBinding:{accel:!0,charOrCode:"4",allowGlobal:!0},iconClass:"editActionIcon splitHorizontalIcon sourceMenuIcon",action:"davinci/ve/actions/ViewSplitHMenuAction",label:"Split Horizontally"}]},{id:"design",showLabel:!0,className:"maqLabelButton davinciFloatRight maqDesignButton",action:"davinci/ve/actions/ViewDesignAction",label:"Design",toolbarPath:"undoredo",keyBinding:{accel:!0,charOrCode:"1",allowGlobal:!0}},{id:"closeactiveeditor",run:function(){n(["../Workbench"],
function(m){m.closeActiveEditor()})},keyBinding:{accel:!0,shift:!0,charOrCode:"w",allowGlobal:!0}},{id:"showWidgetsPalette",run:function(){var m=dijit.byId("davinci.ve.Palette");if(m){var k=m.getParent();k&&k.selectChild(m)}},keyBinding:{meta:!0,charOrCode:"p",allowGlobal:!0}}]}},"davinci.preferences":[{name:"Visual Editor",id:"editorPrefs",category:"davinci.html.general",pane:"davinci/ve/prefs/HTMLEditPreferences",defaultValues:{flowLayout:!1,snap:!0,showPossibleParents:!0,cssOverrideWarn:!0,absoluteWidgetsZindex:900,
widgetPaletteLayout:"icons"}}],"davinci.dnd":[{parts:["davinci.ui.navigator"],dragSource:function(m){if("File"==m.elementType)return/gif|jpeg|jpg|png|svg|json/i.test(m.getExtension())},dragHandler:"davinci/ve/palette/ImageDragSource"}],"davinci.fileType":[{extension:"theme",iconClass:"themeFileIcon",type:"text"}],"davinci.defaultEditorActions":{editorContribution:{actions:[{id:"save",run:function(){n("../Workbench").getOpenEditor().save()},isEnabled:function(m){return!0},className:"maqLabelButton",
showLabel:!0,label:"Save",toolbarPath:"save",keyBinding:{accel:!0,charOrCode:"s"}},{id:"undo",iconClass:"editActionIcon undoIcon",action:"davinci/actions/UndoAction",label:"Undo",toolbarPath:"undoredo",keyBinding:{accel:!0,charOrCode:"z"}},{id:"redo",iconClass:"editActionIcon redoIcon",action:"davinci/actions/RedoAction",label:"Redo",toolbarPath:"undoredo",keyBinding:{accel:!0,shift:!0,charOrCode:"z"}}]}}}})},"xideve/Template":function(){define(["dojo/_base/declare","xide/model/Component","xide/model/Bean",
"xide/mixins/VariableMixin"],function(n,m,k,h){return n("xideve/Template",[m,k,h],{ctx:null,contextClass:null,baseUrl:null,requires:[],postRequires:[],defaultTheme:null,mobileMap:{},capabilities:{},errorHandler:null,debugHandler:null,resourceDelegate:null,variableDelegate:null,requireMinimumConfig:{},sharedObjects:[],mixins:[],newFileTemplate:"",bodyStyle:"",beanType:"Document Template",getDependencies:function(){return[]}})})},"xide/widgets/EditBox":function(){define("dcl/dcl dojo/dom-construct xide/widgets/WidgetBase xide/utils xide/types xide/$".split(" "),
function(n,m,k,h,d,b){return n(k,{declaredClass:"xide.widgets.EditBox",value:"unset",_lastValue:null,instant:!1,widgetChanged:function(){this.changed=!0;this.userData&&(this.userData.changed=!0);if(this.nativeWidget){var b=this.nativeWidget.val();this.userData&&this.userData.type===d.ECIType.INTEGER&&(b=parseInt(b,10));this.setValue(b);this.value=b}},__onChanged:function(b){var c=this.nativeWidget;this.validator&&(this.validator(b,c)?(this.userData.invalid=!1,c.removeClass("text-danger"),c.addClass("text-success")):
(c.removeClass("text-success"),c.addClass("text-danger"),this.userData.invalid=!0));if(null===this._lastValue||this._lastValue!==b)this._lastValue=b,this.widgetChanged(c),this.userData&&this.userData.type===d.ECIType.INTEGER&&(b=parseInt(b,10)),this.updateOnly&&(this.updateOnly=!1),this._emit("change",b)},setupNativeWidgetHandler:function(){var b=this.nativeWidget;if(b){var d=this;this.addHandle("change",this.__on(b,"change",null,function(){d.__onChanged(b.val())}));if(this.instant)b.on("keyup change",
function(){d.__onChanged(b.val())});this.addHandle("blur",b.on("blur",function(){d.setActive(!1)}));this.addHandle("focus",b.on("focus",function(){d.setActive(!0)}))}},set:function(b,d,h){!0===h&&(this.updateOnly=!0);var a=this.nativeWidget;if(a){if("value"===b)return a.val(d),this._lastValue=d,!0;if("disabled"===b)a[!0===d?"attr":"removeAttr"](b,d)}return this.inherited(arguments)},get:function(b){var c=this.nativeWidget;if("value"===b&&c)return c.val()},startup:function(){this.valueNode.innerHTML=
"";var c=this.userData,c=m.create("input",{"class":"form-control input-transparent",type:c&&c.password?"password":"text",value:c?c.value:this.value||""});this.nativeWidget=b(c);this.title&&""!==this.title||h.destroy(this.titleColumn);this.valueNode.appendChild(c);this.nativeWidget.trigger("change");this.setupNativeWidgetHandler();this.onReady()}})})},"dojox/html/_base":function(){define("dojo/_base/declare dojo/Deferred dojo/dom-construct dojo/html dojo/_base/kernel dojo/_base/lang dojo/ready dojo/_base/sniff dojo/_base/url dojo/_base/xhr dojo/when dojo/_base/window".split(" "),
function(n,m,k,h,d,b,c,g,p,a,e,q){var u=d.getObject("dojox.html",!0);if(g("ie"))var w=/(AlphaImageLoader\([^)]*?src=(['"]))(?![a-z]+:|\/)([^\r\n;}]+?)(\2[^)]*\)\s*[;}]?)/g;var r=/(?:(?:@import\s*(['"])(?![a-z]+:|\/)([^\r\n;{]+?)\1)|url\(\s*(['"]?)(?![a-z]+:|\/)([^\r\n;]+?)\3\s*\))([a-z, \s]*[;}]?)/g,v=u._adjustCssPaths=function(a,b){if(b&&a)return w&&(b=b.replace(w,function(b,c,e,d,g){return c+(new p(a,"./"+d)).toString()+g})),b.replace(r,function(b,c,e,d,g,h){return e?'@import "'+(new p(a,"./"+e)).toString()+
'"'+h:"url("+(new p(a,"./"+g)).toString()+")"+h})},x=/(<[a-z][a-z0-9]*\s[^>]*)(?:(href|src)=(['"]?)([^>]*?)\3|style=(['"]?)([^>]*?)\5)([^>]*>)/gi,A=u._adjustHtmlPaths=function(a,b){var c=a||"./";return b.replace(x,function(a,b,e,d,g,h,k,q){return b+(e?e+"\x3d"+d+(new p(c,g)).toString()+d:"style\x3d"+h+v(c,k)+h)+q})},z=u._snarfStyles=function(a,b,c){c.attributes=[];b=b.replace(/<[!][-][-](.|\s)*?[-][-]>/g,function(a){return a.replace(/<(\/?)style\b/ig,"\x26lt;$1Style").replace(/<(\/?)link\b/ig,"\x26lt;$1Link").replace(/@import "/ig,
'@ import "')});return b.replace(/(?:<style([^>]*)>([\s\S]*?)<\/style>|<link\s+(?=[^>]*rel=['"]?stylesheet)([^>]*?href=(['"])([^>]*?)\4[^>\/]*)\/?>)/gi,function(b,e,d,g,h,k){b=(e||g||"").replace(/^\s*([\s\S]*?)\s*$/i,"$1");d?d=c.push(a?v(a,d):d):(d=c.push('@import "'+k+'";'),b=b.replace(/\s*(?:rel|href)=(['"])?[^\s]*\1\s*/gi,""));if(b){b=b.split(/\s+/);k={};g=0;for(h=b.length;g<h;g++)e=b[g].split("\x3d"),k[e[0]]=e[1].replace(/^\s*['"]?([\s\S]*?)['"]?\s*$/,"$1");c.attributes[d-1]=k}return""})},y=u._snarfScripts=
function(b,c){function e(b){c.downloadRemote&&(b=b.replace(/&([a-z0-9#]+);/g,function(a,b){switch(b){case "amp":return"\x26";case "gt":return"\x3e";case "lt":return"\x3c";default:return"#"==b.charAt(0)?String.fromCharCode(b.substring(1)):"\x26"+b+";"}}),a.get({url:b,sync:!0,load:function(a){c.code+=a+";"},error:c.errBack}))}c.code="";b=b.replace(/<[!][-][-](.|\s)*?[-][-]>/g,function(a){return a.replace(/<(\/?)script\b/ig,"\x26lt;$1Script")});return b.replace(/<script\s*(?![^>]*type=['"]?(?:dojo\/|text\/html\b))[^>]*?(?:src=(['"]?)([^>]*?)\1[^>]*)?>([\s\S]*?)<\/script>/gi,
function(a,b,d,g){d?e(d):c.code+=g;return""})},B=u.evalInGlobal=function(a,b){b=b||q.doc.body;var c=b.ownerDocument.createElement("script");c.type="text/javascript";b.appendChild(c);c.text=a};u._ContentSetter=n(h._ContentSetter,{adjustPaths:!1,referencePath:".",renderStyles:!1,executeScripts:!1,scriptHasHooks:!1,scriptHookReplacement:null,_renderStyles:function(a){this._styleNodes=[];for(var b,c,e,d=this.node.ownerDocument,g=d.getElementsByTagName("head")[0],h=0,k=a.length;h<k;h++){e=a[h];c=a.attributes[h];
b=d.createElement("style");b.setAttribute("type","text/css");for(var q in c)b.setAttribute(q,c[q]);this._styleNodes.push(b);g.appendChild(b);b.styleSheet?b.styleSheet.cssText=e:b.appendChild(d.createTextNode(e))}},empty:function(){this.inherited("empty",arguments);this._styles=[]},onBegin:function(){this.inherited("onBegin",arguments);var a=this.content,c=this._styles;if(b.isString(a)){this.adjustPaths&&this.referencePath&&(a=A(this.referencePath,a));if(this.renderStyles||this.cleanContent)a=z(this.referencePath,
a,c);if(this.executeScripts){var e=this,c={downloadRemote:!0,errBack:function(a){e._onError.call(e,"Exec",'Error downloading remote script in "'+e.id+'"',a)}},a=y(a,c);this._code=c.code}}this.content=a},onEnd:function(){var a=this._code,d=this._styles;if(this._styleNodes&&this._styleNodes.length)for(;this._styleNodes.length;)k.destroy(this._styleNodes.pop());this.renderStyles&&d&&d.length&&this._renderStyles(d);var g=new m,h=this.getInherited(arguments),q=arguments,d=b.hitch(this,function(){h.apply(this,
q);e(this.parseDeferred,function(){g.resolve()})});if(this.executeScripts&&a){this.cleanContent&&(a=a.replace(/(\x3c!--|(?:\/\/)?--\x3e|<!\[CDATA\[|\]\]>)/g,""));this.scriptHasHooks&&(a=a.replace(/_container_(?!\s*=[^=])/g,this.scriptHookReplacement));try{B(a,this.node)}catch(H){this._onError("Exec","Error eval script in "+this.id+", "+H.message,H)}c(d)}else d();return g.promise},tearDown:function(){this.inherited(arguments);delete this._styles;if(this._styleNodes&&this._styleNodes.length)for(;this._styleNodes.length;)k.destroy(this._styleNodes.pop());
delete this._styleNodes;b.mixin(this,u._ContentSetter.prototype)}});u.set=function(a,c,e){return e?(new u._ContentSetter(b.mixin(e,{content:c,node:a}))).set():h._setNodeContent(a,c,!0)};return u})},"xideve/views/OutlineGridView":function(){define("dcl/dcl dojo/dom-class davinci/Workbench davinci/ui/widgets/OutlineTree xide/layout/ContentPane xide/utils xide/types dgrid/Editor xide/data/TreeMemory dijit/form/CheckBox davinci/ve/widget xide/_base/_Widget xide/mixins/ReloadMixin xgrid/Grid xgrid/TreeRenderer xgrid/KeyboardNavigation xide/widgets/_Widget davinci/ve/States davinci/ve/commands/StyleCommand".split(" "),
function(n,m,k,h,d,b,c,g,p,a,e,q,u,w,r,v,x,A,z){var y=w.createGridClass("OutlineGridView",{menuOrder:{File:110,Edit:100,View:90,Block:50,Settings:20,Navigation:10,Step:5,New:4,Window:3,Instance:1},options:b.clone(c.DEFAULT_GRID_OPTIONS)},{SELECTION:!0,KEYBOARD_SELECTION:!0,PAGINATION:!1,KEYBOARD_NAVIGATION:{CLASS:v},WIDGET:{CLASS:x},EDITOR:{CLASS:g}},{RENDERER:r},null,null);return n([q,u.dcl],{templateString:'\x3cdiv attachTo\x3d"domNode"\x3e\x3c/div\x3e',declaredClass:"xideve.views.OutlineGridView",
rootWidget:null,_lastEvent:null,useRichTextLabel:!1,resizeToParent:!0,onItemSelected:function(a,b){var c=this.getContext();b=this.getStore();c&&(a=b.model._getWidget(a),b=c.getSelection(),dojo.forEach(b,dojo.hitch(this,function(a){c.deselect(a)})),c.select(a,!0))},_toggle:function(a,b,c){b=b?"none":"";var e;if(c=A.getFocus(a.domNode.ownerDocument.body))e=c.state;else{c=A.getStatesListCurrent(a.domNode);for(var d=0;d<c.length;d++)if(c[d]){e=c[d];break}}a=new z(a,[{display:b}],e);this.getContext().getCommandStack().execute(a)},
getLabel:function(a){if("myapp"==a.id)return this.getContext().model.fileName;var b="",c=this._getWidget(a);if("xblox/RunScript"===a.type&&c)return c=c.domNode,1==c.mode&&c.targetproperty&&c._targetBlock?c._targetBlock.name+"-\x3e"+c.targetproperty:c&&c.script&&"null"!==c.script?"XBlox::"+c.script:c.targetEvent&&0<c.targetEvent.length?"XBlox::"+c.targetEvent:"XBlox";if("xblox/CSSState"===a.type&&c)return c=c.domNode,"CSS State/"+c.name;if("xblox/StyleState"===a.type&&c)return c=c.domNode,"Style State/"+
c.name;if(c.isWidget)return b=e.getLabel(c);if(b=c.type){a=this.useRichTextLabel?"\x26lt;":"\x3c";var d=this.useRichTextLabel?"\x26gt;":"\x3e",b=0===b.indexOf("html.")?a+b.substring(5)+d:0===b.indexOf("OpenAjax.")?a+b.substring(9)+d:0<b.indexOf(".")?b.substring(b.lastIndexOf(".")+1):c.label||b;(c=e.byId(c.id,this.getContext().getDocument()))&&(c=c.getId())&&(b+=" id\x3d"+c);return b}},getColumns:function(){var b=this;return[{label:"Visibile",field:"visible",sortable:!1,set:function(a,b,c){},get:function(a){return(a=
b._getWidget(a))?"none"!==a.domNode.style.display:!0},editorArgs:{},editor:a},{renderExpando:!0,label:"Name",field:"type",sortable:!1,formatter:function(a,c){a=b.getLabel(c);if("xblox/RunScript"==c.type&&(c=b._getWidget(c))&&(c=c.domNode)){var e=c._targetBlock;if(e){if(-1!=e.declaredClass.indexOf("Command"))return'\x3cspan class\x3d"grid-icon '+e.getIconClass()+'"\x3e\x3c/span\x3e'+e.name+" ("+c.targetevent+")";e.declaredClass.indexOf("Variable")}}return a}}]},createGrid:function(){b.destroy(this.outlineTree);
dojo.empty(this.domNode);var a=this,c={features:{},className:"outlineGridView dgrid dgrid-dgrid ui-widget",cellNavigation:!1,collection:this.store.filter(this.getRootFilter()),deselectOnRefresh:!1,showHeader:!1,owner:this,resizeToParent:!0,columns:this.getColumns()},e=b.addWidget(y,c,null,this,!0);this.grid=e;this.grid.set("collection",this.store.filter({type:"html.body"}));this.outlineTree=e;e.refresh();this.add(e);this._lastState&&(e.setState(this._lastState),delete this._lastState);e._on("selectionChanged",
function(b){a.onItemSelected(b.selection[0])});e.on("dgrid-datachange",function(b){var c=e.row(b.target);b=b.value;var d=a.getContext(),g=a.getStore();d&&(c=g.model._getWidget(c.data))&&a._toggle(c,!b)})},initStore:function(a){return this.store=new p({data:a.items,model:a.model,provider:a.provider,idProperty:"id",parentProperty:"parent",getSync:function(a){var b=this.inherited(arguments),c=this.provider.getModel();!b&&(c=c._getWidget({id:a}))&&(this.putSync(c),b=c);return b},getChildrenSync:function(a){var b=
this,c=[];this.model.getChildren(a,function(a){for(var e=0;e<a.length;e++)b.putSync(a[e]);c=a});return c},getChildren:function(a,b){var c=this;this.model.getChildren(a,function(a){for(var b=0;b<a.length;b++)c.putSync(a[b])});return this.inherited(arguments)},mayHaveChildren:function(a){return this.model.mayHaveChildren(a)}})},getContext:function(){return this.currentEditor?this.currentEditor.getContext():null},_getWidget:function(a){return e.byId(a.id)},getStore:function(){return this.store},getModel:function(){return this.outlineModel},
getRootFilter:function(){return{id:this.rootWidget?this.rootWidget.id:""}},hasItemActions:function(){return!1},_getViewContext:function(){return this.outlineProvider},_getViewActions:function(){return[]},onWidgetChanged:function(a){var b=a.type,c=this.getContext();b===c.WIDGET_ADDED?this.getStore().putSync(a.widget):b===c.WIDGET_REMOVED&&this.getStore().removeSync(a.widget);this.grid&&this.grid.refresh()},onWidgetSelected:function(a){},startup:function(){m.remove(this.domNode,"ui-widget-content");
this.subscribe("/davinci/ui/editorSelected",this.editorChanged);this.subscribe("/davinci/ui/context/pagerebuilt",this._pageRebuilt);this.subscribe(c.EVENTS.ON_WIDGET_CHANGED);this.subscribe("/davinci/ui/widgetSelected",this.onWidgetSelected);this.initReload()},onReloaded:function(){this.reset();this._lastEvent&&this.editorChanged(this._lastEvent)},reset:function(){this.currentEditor=null;delete this.outlineProvider;delete this.outlineTree},editorChanged:function(a){this._lastEvent=a;a=a.editor;if(this.currentEditor){if(this.currentEditor==
a)return;this.outlineTree&&(this._lastState=this.outlineTree.getState(),this.outlineTree.destroy());this.store&&(this.store.destroy(),delete this.store);delete this.outlineProvider;delete this.outlineTree}if(this.currentEditor=a)a.getOutline&&(this.outlineProvider=a.getOutline()),this.outlineProvider?this.createTree():this.containerNode.innerHTML="no outline aviable"},createTree:function(){this.popup&&this.popup.destroyRecursive();!this.outlineProvider&&this.currentEditor&&(this.outlineProvider=this.currentEditor.getOutline(),
this.outlineProvider._outlineView=this);this.outlineProvider&&this.outlineProvider.getModel&&(this.outlineModel=this.outlineProvider.getModel(this.currentEditor));var a=this.outlineModel,b=this.outlineProvider,c=b&&b._context?b._context.rootWidget:null;c||console.error("have no root");var e=this.outlineProvider.getActionsID&&this.outlineProvider.getActionsID()||"davinci.ui.outline";this.initStore({items:[c],model:a,provider:b});this.createGrid();this.popup=k.createPopup({partID:e,domNode:this.outlineTree.domNode,
openCallback:function(){}})},selectionChanged:function(a){!this.publishing["/davinci/ui/selectionChanged"]&&a.length&&a[0].model&&this.outlineTree&&this.outlineTree.selectNode([a[0].model])},_pageRebuilt:function(){if(this.outlineTree){var a=this.outlineTree.get("paths");this.createTree();this.outlineTree.set("paths",a)}},_modelChanged:function(a){this.outlineModel&&this.outlineModel.refresh?this.outlineModel.refresh():this.outlineProvider&&this.outlineProvider.getStore&&(this.outlineModel.store=
this.outlineProvider.getStore(),this.outlineModel.onChange(this.outlineProvider._rootItem))}})})},"dijit/_KeyNavContainer":function(){define("dojo/_base/array dojo/_base/declare dojo/dom-attr dojo/_base/kernel dojo/keys dojo/_base/lang ./registry ./_Container ./_FocusMixin ./_KeyNavMixin".split(" "),function(n,m,k,h,d,b,c,g,p,a){return m("dijit._KeyNavContainer",[p,a,g],{connectKeyNavHandlers:function(a,c){var e=this._keyNavCodes={},g=b.hitch(this,"focusPrev"),h=b.hitch(this,"focusNext");n.forEach(a,
function(a){e[a]=g});n.forEach(c,function(a){e[a]=h});e[d.HOME]=b.hitch(this,"focusFirstChild");e[d.END]=b.hitch(this,"focusLastChild")},startupKeyNavChildren:function(){h.deprecated("startupKeyNavChildren() call no longer needed","","2.0")},startup:function(){this.inherited(arguments);n.forEach(this.getChildren(),b.hitch(this,"_startupChild"))},addChild:function(a,b){this.inherited(arguments);this._startupChild(a)},_startupChild:function(a){a.set("tabIndex","-1")},_getFirst:function(){var a=this.getChildren();
return a.length?a[0]:null},_getLast:function(){var a=this.getChildren();return a.length?a[a.length-1]:null},focusNext:function(){this.focusChild(this._getNextFocusableChild(this.focusedChild,1))},focusPrev:function(){this.focusChild(this._getNextFocusableChild(this.focusedChild,-1),!0)},childSelector:function(a){return(a=c.byNode(a))&&a.getParent()==this}})})},"xgrid/TreeRenderer":function(){define("xdojo/declare xgrid/Renderer dgrid/Tree dojo/keys dojo/on xide/$".split(" "),function(n,m,k,h,d,b){function c(b){function a(a,
b){_.each(a,function(a){(a=c.row(a))&&a.element&&c.expand(a,b,!0)})}this.onTreeKey(b);var c=this;if(!c.isThumbGrid&&(b.keyCode==h.LEFT_ARROW||b.keyCode==h.RIGHT_ARROW||b.keyCode==h.HOME||b.keyCode==h.END)){var g=b.target;if((!g||-1==g.className.indexOf("InputInner")&&-1==g.className.indexOf("input")&&"text"!==b.target.type)&&(g=this.row(b))&&g.data){var k=g.data,p=this._isExpanded(k),m=this.collection,n=m.getSync(k[m.idProperty]),x=k.getChildren?k.getChildren():n&&n.children?n.children:null,A=!1;
null==x&&m.getChildrenSync&&n&&((x=m.getChildrenSync(n))&&x.length?A=!0:x=null);var z=n?n.isDir||n.directory||n.group:!1;!z&&A&&x&&(z=!0);var A=x?x[0]:!1,y=this._focusedNode,B=y?this.down(y,x?x.length:0,!0):null,x=!0===n._EX||null==n._EX,n=this.getSelection?this.getSelection():[n],C=this.down(y,-1,!0),E=this.down(y,1,!0),F={focus:!0,append:!1,delay:1};if(A&&A._reference){var G=m.getSync(A._reference);G&&(A=G)}if(b.keyCode==h.END&&p&&z&&B&&B.element!==y)this.select(B,null,!0,F);else{if(b.keyCode==
h.LEFT_ARROW){b.preventDefault();if(k[m.parentField]&&(k=g.data,!p)){k=(m=m.getSync(k[m.parentField]))?this.row(m):null;if(m&&k.element)return this.select([m],null,!0,F);if(C)return this.select(C,null,!0,F);d.emit(this.contentNode,"keydown",{keyCode:36,force:!0})}g&&(p?a(n,!1):this.select(C,null,!0,F))}if(b.keyCode==h.RIGHT_ARROW){b.preventDefault();if(z&&x&&p&&!A&&E)return this.select(E,null,!0,F);x&&p?A&&this.select([A],null,!0,F):A||!x||z?a(n,!0):E&&this.select(E,null,!0,F)}}}}}var g={_expandOnClickHandle:null,
_patchTreeClick:function(){this._expandOnClickHandle=this.on("click",this.onTreeClick.bind(this));b(this.domNode).addClass("openTreeOnClick")},_getLabel:function(){return"Tree"},_getIcon:function(){return"fa-tree"},deactivateRenderer:function(c){this._expandOnClickHandle&&this._expandOnClickHandle.remove();this.expandOnClick&&b(this.domNode).removeClass("openTreeOnClick")},activateRenderer:function(){this._showHeader(!0);this.expandOnClick&&(this._expandOnClickHandle=this.on("click",this.onTreeClick.bind(this)),
b(this.domNode).addClass("openTreeOnClick"))},__getParent:function(b){if(b&&b.getParent){var a=b.getParent();if(a)return this.row(a).element?this.__getParent(a):a||b}return b},getCurrentFolder:function(){return this.__getParent(this.getRows()[0])},_isExpanded:function(b){return!!this._expanded[this.row(b).id]},onTreeKey:function(){this.inherited(arguments)},onTreeClick:function(b){-1===b.target.className.indexOf("expando")&&(b=this.row(b))&&this.expand(b,!this._isExpanded(b.data),!0)},startup:function(){if(!this._started){var b=
this.inherited(arguments);this.on("keydown",c.bind(this));this.renderers||this.activateRenderer();return b}}};n=n("xgrid.TreeRenderer",[m,k],g);n.Implementation=g;n.KEYBOARD_HANDLER=c;return n})},"dojo/request/watch":function(){define("./util ../errors/RequestTimeoutError ../errors/CancelError ../_base/array ../_base/window ../has!host-browser?dom-addeventlistener?:../on:".split(" "),function(n,m,k,h,d,b){function c(){for(var b=+new Date,c=0,d;c<a.length&&(d=a[c]);c++){var h=d.response,k=h.options;
d.isCanceled&&d.isCanceled()||d.isValid&&!d.isValid(h)?(a.splice(c--,1),g._onAction&&g._onAction()):d.isReady&&d.isReady(h)?(a.splice(c--,1),d.handleResponse(h),g._onAction&&g._onAction()):d.startTime&&d.startTime+(k.timeout||0)<b&&(a.splice(c--,1),d.cancel(new m("Timeout exceeded",h)),g._onAction&&g._onAction())}g._onInFlight&&g._onInFlight(d);a.length||(clearInterval(p),p=null)}function g(b){b.response.options.timeout&&(b.startTime=+new Date);b.isFulfilled()||(a.push(b),p||(p=setInterval(c,50)),
b.response.options.sync&&c())}var p=null,a=[];g.cancelAll=function(){try{h.forEach(a,function(a){try{a.cancel(new k("All requests canceled."))}catch(q){}})}catch(e){}};d&&b&&d.doc.attachEvent&&b(d.global,"unload",function(){g.cancelAll()});return g})},"xideve/Embedded":function(){define("dojo/_base/declare davinci/davinci_ dojo/Deferred davinci/ve/metadata davinci/Runtime require dojo/_base/connect davinci/Workbench davinci/ve/metadata xideve/views/StyleView".split(" "),function(n,m,k,h,d,b,c,g,p,
a){var e=function(a,b){401!=b.status&&403!=b.status&&!0===a.canceled&&(a=a.ioArgs.url,(new RegExp("(^|\\.\\/|"+document.baseURI+"\\/)cmd\\/")).test(a)&&(0<=a.indexOf("getBluePageInfo")||d.handleError(b.message)))};return n("xideve/Embedded",null,{_loadActionClasses:function(){var a=[];d.getExtensions("davinci.editorActions",function(b){if("davinci.ve.HTMLPageEditor"==b.editorContribution.targetID)return a.push(b.editorContribution),!0});0==a.length&&d.getExtension("davinci.defaultEditorActions",function(b){a.push(b.editorContribution);
return!0});var c=p.getLibraryActions("davinci.editorActions","davinci.ve.HTMLPageEditor"),a=dojo.clone(a);0<a.length&&c.length&&dojo.forEach(c,function(c){var e=b("davinci/Workbench");c.action&&e._loadActionClass(c);if(c.menu)for(var d=0;d<c.menu.length;d++){var g=c.menu[0];g.action&&e._loadActionClass(g)}a[0].actions.push(c)});return a},started:function(){},onReady:function(a){this._loadActionClasses();var b=document.getElementById("focusContainer");b||(b=dojo.create("div",{"class":"focusContainer",
id:"focusContainer"},document.body),g.focusContainer=b);g._state={activeEditor:null,editors:[],nhfo:{project1:{device:"iphone",layout:"flow",themeSet:{name:"(none)",desktopTheme:"claro",mobileTheme:[{theme:"android",device:"Android"},{theme:"blackberry",device:"BlackBerry"},{theme:"ipad",device:"iPad"},{theme:"iphone",device:"iPhone"},{theme:"iphone",device:"other"}]}}},project:"project1",id:"",Fields:[]};g.run2();this.started();a.resolve(this)},start:function(a,p,m,n){var q=this,r=new k;d.cmdOffset=
m||"";d.loadPlugins();d.initialPerspective="davinci.ve.pageDesign";if(!0===p)d.isLocalInstall=!0,d.userName="none",d.userEmail="none",d.run(),g.ctx=a,q.onReady();else return a.getFileManager().callMethodEx("XApp_XIDE_Workbench_Service","getInfo",["nada"],function(e){d.userBaseUrl=n;d._initializationInfo=e;e=e.userInfo;d.isLocalInstall="maqettaUser"==e.userId;d.userName=e.userId;d.userEmail=e.email;e=b.toUrl("xideve/metadata/");h.init(a,e);d.run();g.ctx=a;q.onReady(r);d.subscribe("/davinci/states/state/changed",
function(a){var b=d.currentEditor;"davinci.ve.themeEditor.ThemeEditor"!=b.declaredClass&&"davinci.review.editor.ReviewEditor"!=b.declaredClass&&b.visualEditor.onContentChange.apply(b.visualEditor,arguments)});c.subscribe("/davinci/states/state/changed",function(a){var c=d.currentEditor&&"davinci.ve.PageEditor"==d.currentEditor.declaredClass&&d.currentEditor.visualEditor&&d.currentEditor.visualEditor.context;if(c){var e,g,c=c?c.getDijit():null,h=b("davinci/ve/widget");a.newState&&!a.newState.indexOf("_show:")&&
(e=c.byId(a.newState.substring(6)),e=h.getWidget(e.domNode),(g=e.getHelper())&&g.popup&&g.popup(e));a.oldState&&!a.oldState.indexOf("_show:")&&(e=c.byId(a.oldState.substring(6)),e=h.getWidget(e.domNode),(g=e.getHelper())&&g.tearDown&&g.tearDown(e))}});c.subscribe("/davinci/ui/repositionFocusContainer",function(a){g._repositionFocusContainer()})},!0),d.subscribe("/dojo/io/error",e),r}})})},"xdocker/Splitter2":function(){define(["dcl/dcl","wcDocker/splitter","xide/mixins/EventedMixin"],function(n,m,
k){function h(b,d){_.invoke(b.$tabBar,b.$buttonBar,"css",["display",!0===d?"none":"inherit"])}function d(b,d){b._saveProp("minSize",[0,0]);b._saveProp("pos");b._saveProp("showTitlebar",[]);!1!==d&&h(b,d);b._panelList&&_.each(b._panelList,function(b){b._saveProp("minSize",[0,0]);b._saveProp("title")});d&&b.showTitlebar&&b.showTitlebar(!1)}function b(b){h(b,!1);_.each(b._panelList,function(b){var c=b._restoreProp("minSize",!1);c&&b.minSize(c.x,c.y);b._restoreProp("title")});b._restoreProp("showTitlebar")}
return n([m,k.dcl],{_lastCollapsed:null,_isCollapsed:!1,isExpanded:function(){return null==this._lastCollapsed},isCollapsed:function(){return null!=this._lastCollapsed},collapse:function(b,g){this._isCollapsed=!0;this._saveProp("pos");d(this._pane[0],0==b);d(this._pane[1],1==b);this._lastCollapsed=b;this.pos(null!=g?g:1)},expand:function(){this._isCollapsed=!1;b(this._pane[0]);this._restoreProp("pos");b(this._pane[1]);this._lastCollapsed=null}})})},"xide/widgets/_WidgetPickerMixin":function(){define(["dcl/dcl",
"dojo/_base/declare","dojo/dom-class","dojo/dom-construct","xide/utils"],function(n,m,k,h,d){var b=!1,c=!1,g={},p=null,a,e,q,u,w,r,v,x,A,z,y={fbOutlineT:"fbHorizontalLine",fbOutlineL:"fbVerticalLine",fbOutlineB:"fbHorizontalLine",fbOutlineR:"fbVerticalLine"},B={fbHorizontalLine:"background: #00d706;height: 2px;",fbVerticalLine:"background: #00d706;width: 2px;"};return n(null,{declaredClass:"xide.widgets._WidgetPickerMixin",_inspectFrame:null,_isInspecting:!1,_lastInspecting:0,inspectorMask:{},shouldShowOutline:function(a){},
getWindowSize:function(){var a=0,b=0,c;"number"==typeof this.window.innerWidth?(a=this.window.innerWidth,b=this.window.innerHeight):(c=this.document.documentElement)&&(c.clientHeight||c.clientWidth)?(a=c.clientWidth,b=c.clientHeight):(c=this.document.body)&&(c.clientHeight||c.clientWidth)&&(a=c.clientWidth,b=c.clientHeight);return{width:a,height:b}},addEvent:function(a,b,c,e){a.addEventListener?a.addEventListener(b,c,e):a.attachEvent("on"+b,c)},removeEvent:function(a,b,c,e){try{a.removeEventListener?
a.removeEventListener(b,c,e):a.detachEvent("on"+b,c)}catch(D){}},getWindowScrollSize:function(){var a=0,b=0,c;(c=this.document.documentElement)&&(c.scrollHeight||c.scrollWidth)&&(a=c.scrollWidth,b=c.scrollHeight);(c=this.document.body)&&(c.scrollHeight||c.scrollWidth)&&(c.scrollWidth>a||c.scrollHeight>b)&&(a=c.scrollWidth,b=c.scrollHeight);return{width:a,height:b}},getElementFromPoint:function(a,b){return this.document.elementFromPoint(a,b)},getWindowScrollPosition:function(){var a=0,b=0,c;"number"==
typeof this.window.pageYOffset?(a=this.window.pageYOffset,b=this.window.pageXOffset):(c=this.document.body)&&(c.scrollTop||c.scrollLeft)?(a=c.scrollTop,b=c.scrollLeft):(c=this.document.documentElement)&&(c.scrollTop||c.scrollLeft)&&(a=c.scrollTop,b=c.scrollLeft);return{top:a,left:b}},getElementPosition:function(a){var b=0,c=0;do b+=a.offsetLeft,c+=a.offsetTop;while(a=a.offsetParent);return{left:b,top:c}},getElementBox:function(a){var b={};if(a.getBoundingClientRect){a=a.getBoundingClientRect();var c=
this.getWindowScrollPosition();b.top=Math.round(a.top-0+c.top);b.left=Math.round(a.left-0+c.left);b.height=Math.round(a.bottom-a.top);b.width=Math.round(a.right-a.left)}else c=this.getElementPosition(a),b.top=c.top,b.left=c.left,b.height=a.offsetHeight,b.width=a.offsetWidth;return b},hideBoxModel:function(){c&&(p.appendChild(a),c=!1)},hideOutline:function(){if(b){for(var a in y)p.appendChild(g[a]);b=!1}},showOutline:function(){if(!b){c&&this.hideBoxModel();for(var a in y)this.document.getElementsByTagName("body")[0].appendChild(g[a]);
b=!0}},getCSSAutoMarginBox:function(a){var b=this.document.createElement("div");b.style.cssText="margin:0; padding:1px; border: 0; visibility: hidden;";a=a.cloneNode(!1);var c=this.document.createTextNode("\x26nbsp;");a.appendChild(c);b.appendChild(a);this.document.body.appendChild(b);var c=a.offsetTop-b.offsetTop-1,e=b.offsetHeight-a.offsetHeight-2-c,d=a.offsetLeft-b.offsetLeft-1;a=b.offsetWidth-a.offsetWidth-2-d;this.document.body.removeChild(b);return{top:c+0,left:d,bottom:e-0,right:a}},getMeasurementInPixels:function(a,
b){if(!a)return null;var c=this.getMeasurement(a,b),e=c.value,c=c.unit;if("px"==c)return e;if("pt"==c)return this.pointsToPixels(b,e);if("em"==c)return this.emToPixels(a,e);if("%"==c)return this.percentToPixels(a,e);if("ex"==c)return this.exToPixels(a,e)},getMeasurementBox:function(a,b){var c,e,d=[],g="border"==b?["TopWidth","LeftWidth","BottomWidth","RightWidth"]:["Top","Left","Bottom","Right"];for(e=0;c=g[e];e++)d[e]=this.getMeasurementInPixels(a,b+c);return{top:d[0],left:d[1],bottom:d[2],right:d[3]}},
drawBoxModel:function(a){if(a&&a.parentNode){var b=this.getElementBox(a),d=this.getWindowSize(),g=this.getWindowScrollPosition();if(!(b.top>g.top+d.height-0||b.left>g.left+d.width||g.top>b.top+b.height||g.left>b.left+b.width)){var d=b.top,g=b.left,h=b.height,b=b.width,k=Firebug.browser.getMeasurementBox(a,"margin"),q=Firebug.browser.getMeasurementBox(a,"padding");a=Firebug.browser.getMeasurementBox(a,"border");e.top=d-k.top+"px";e.left=g-k.left+"px";e.height=h+k.top+k.bottom+"px";e.width=b+k.left+
k.right+"px";r.top=k.top+"px";r.left=k.left+"px";r.height=h+"px";r.width=b+"px";x.top=k.top+a.top+"px";x.left=k.left+a.left+"px";x.height=h-a.top-a.bottom+"px";x.width=b-a.left-a.right+"px";z.top=k.top+a.top+q.top+"px";z.left=k.left+a.left+q.left+"px";z.height=h-a.top-q.top-q.bottom-a.bottom+"px";z.width=b-a.left-q.left-q.right-a.right+"px";c||this.showBoxModel()}}},drawOutline:function(a){var c=this.getWindowSize(),e=this.getWindowScrollSize(),d=this.getWindowScrollPosition(),h=this.getElementBox(a);
a=h.top;var k=h.left,q=h.height,h=h.width,p=d.left+c.width-k-h-(e.height>c.height?17:0),c=d.top+c.height-a-q-(e.width>c.width?17:0),e=0<c?2:1,d=g.fbOutlineT.style;d.top=a-2+"px";d.left=k+"px";d.height="2px";d.width=h+"px";d=g.fbOutlineL.style;d.top=a-2+"px";d.left=k-2+"px";d.height=q+2*e+"px";d.width="2px";d=g.fbOutlineB.style;0<c?(d.top=a+q+"px",d.left=k+"px",d.width=h+"px"):(d.top="-4px",d.left="-4px",d.width="2px");d=g.fbOutlineR.style;0<p?(d.top=a-2+"px",d.left=k+h+"px",d.height=q+2*e+"px",d.width=
(2>p?p:2)+"px"):(d.top="-4px",d.left="-4px",d.height="2px",d.width="2px");b||this.showOutline()},onInspecting:function(a){if(30<(new Date).getTime()-this._lastInspecting){this._inspectFrame.style.display="none";a=this.getElementFromPoint(a.clientX,a.clientY);this._inspectFrame.style.display="block";var b=a.id;if(!(b&&/^fbOutline\w$/.test(b)||"FirebugUI"==b)){for(;1!=a.nodeType;)a=a.parentNode;if("body"!=a.nodeName.toLowerCase()){if(this.isPickable)if(this.isPickable(a))this.drawOutline(a);else return;
else this.drawOutline(a);this._lastInspecting=(new Date).getTime()}}}},destroyInspectorFrame:function(){this._inspectFrame&&(this.document.getElementsByTagName("body")[0].removeChild(this._inspectFrame),this._inspectFrame=null)},stopInspecting:function(){this._isInspecting=!1;b&&this.hideOutline();this.removeEvent(this._inspectFrame,"mousemove",this.onInspecting);this.removeEvent(this._inspectFrame,"mousedown",this.onInspectingClick);this.destroyInspectorFrame()},onInspectingClick:function(a){this._inspectFrame.style.display=
"none";a=this.getElementFromPoint(a.clientX,a.clientY);this._inspectFrame.style.display="block";var b=a.id;if(!(b&&/^fbOutline\w$/.test(b)||"FirebugUI"==b)){for(;1!=a.nodeType;)a=a.parentNode;if(this.onNodePicked)this.onNodePicked(a);this.stopInspecting();this._destroy()}},_destroy:function(){a.parentNode.removeChild(a);for(var b in y){var c=g[b];c.parentNode.removeChild(c)}p=null},_createInspectorFrame:function(){this._inspectFrame=h.create("div",{});this._inspectFrame.style.cssText="margin:0; padding:0; border:0; position:absolute; overflow:hidden; display:block;z-index: 2147483550; top:0; left:0;";
this.document.getElementsByTagName("body")[0].appendChild(this._inspectFrame);var a=this.getWindowScrollSize(),b=this;this._inspectFrame.style.width=a.width+"px";this._inspectFrame.style.height=a.height+"px";this.addEvent(this._inspectFrame,"mousemove",function(a){b.onInspecting(a)});this.addEvent(this._inspectFrame,"mousedown",function(a){b.onInspectingClick(a)})},initInspector:function(){p=document.createDocumentFragment();a=h.create("div");a.id="fbBoxModel";a.firebugIgnore=!0;e=a.style;e.cssText=
"margin:0; padding:0; border:0; position:absolute; overflow:hidden; display:block;z-index: 2147483500;opacity:0.8;";q=h.create("div");q.id="fbBoxMargin";u=q.style;u.cssText="margin:0; padding:0; border:0; position:absolute; overflow:hidden; display:block;z-index: 2147483500;background: #EDFF64; height:100%; width:100%;";a.appendChild(q);w=h.create("div");w.id="fbBoxBorder";r=w.style;r.cssText="margin:0; padding:0; border:0; position:absolute; overflow:hidden; display:block;z-index: 2147483500;background: #666;";
a.appendChild(w);v=h.create("div");v.id="fbBoxPadding";x=v.style;x.cssText="margin:0; padding:0; border:0; position:absolute; overflow:hidden; display:block;z-index: 2147483500;background: SlateBlue;";a.appendChild(v);A=h.create("div");A.id="fbBoxContent";z=A.style;z.cssText="margin:0; padding:0; border:0; position:absolute; overflow:hidden; display:block;z-index: 2147483500;background: SkyBlue;";a.appendChild(A);p.appendChild(a);for(var b in y){var c=g[b]=h.create("div");c.id=b;c.firebugIgnore=!0;
c.style.cssText="margin:0; padding:0; border:0; position:absolute; overflow:hidden; display:block;z-index: 2147483500;"+B[y[b]];p.appendChild(c)}},startInspecting:function(){this._isInspecting=!0;this.window=window;this.document=document;this.initInspector();this._createInspectorFrame()},_pick:function(){try{this.startInspecting()}catch(C){console.error("inspector crash!",C)}}})})},"xblox/model/Block":function(){define("dcl/dcl dojo/Deferred dojo/_base/lang dojo/has xblox/model/ModelBase xide/factory xide/utils xide/types xide/utils/ObjectUtils xide/lodash xdojo/has!xblox-ui?xblox/model/Block_UI".split(" "),
function(n,m,k,h,d,b,c,g,p,a,e){function q(a,b){for(var c=0;c<b.length;c++)if(a.id===b[c].id)return c}h=[d];e&&h.push(e);c.mixin(g,{BLOCK_FLAGS:{NONE:0,ACTIVE:1,SCRIPT:2,RESERVED1:4,USEFUNCTION:8,RESERVED2:16,SINGLE:32,WAITSFORMESSAGE:64,VARIABLEINPUTS:128,VARIABLEOUTPUTS:256,VARIABLEPARAMETERINPUTS:512,VARIABLEPARAMETEROUTPUTS:1024,TOPMOST:16384,BUILDINGBLOCK:32768,MESSAGESENDER:65536,MESSAGERECEIVER:131072,TARGETABLE:262144,CUSTOMEDITDIALOG:524288,RESERVED0:1048576,EXECUTEDLASTFRAME:2097152,DEACTIVATENEXTFRAME:4194304,
RESETNEXTFRAME:8388608,INTERNALLYCREATEDINPUTS:16777216,INTERNALLYCREATEDOUTPUTS:33554432,INTERNALLYCREATEDINPUTPARAMS:67108864,INTERNALLYCREATEDOUTPUTPARAMS:134217728,INTERNALLYCREATEDLOCALPARAMS:1073741824,ACTIVATENEXTFRAME:268435456,LOCKED:536870912,LAUNCHEDONCE:2147483648},BLOCK_CALLBACKMASK:{PRESAVE:1,DELETE:2,ATTACH:4,DETACH:8,PAUSE:16,RESUME:32,CREATE:64,RESET:4096,POSTSAVE:256,LOAD:512,EDITED:1024,SETTINGSEDITED:2048,READSTATE:4096,NEWSCENE:8192,ACTIVATESCRIPT:16384,DEACTIVATESCRIPT:32768,
RESETINBREAKPOINT:65536,RENAME:131072,BASE:14,SAVELOAD:769,PPR:304,EDITIONS:3072,ALL:4294967295}});e=n(h,{declaredClass:"xblox.model.Block",scopeId:null,isCommand:!1,outlet:0,_destroyed:!1,enabled:!0,serializeMe:!0,name:null,shareTitle:"",sharable:!1,items:null,parent:null,_return:null,_lastResult:null,_deferredObject:null,_currentIndex:0,_lastRunSettings:null,_onLoaded:!1,beanType:"BLOCK",override:{},ignoreSerialize:"_didSubscribe _currentIndex _deferredObject _destroyed _return parent __started ignoreSerialize _lastRunSettings _onLoaded beanType sharable override virtual _scenario _didRegisterSubscribers additionalProperties renderBlockIcon serializeMe _statusIcon _statusClass hasInlineEdits _loop help owner _lastCommand allowActionOverride canDelete isCommand lastCommand autoCreateElse _postCreated _counter".split(" "),
_parseString:function(a,b,e,d){try{b=b||this._lastSettings||{};d=d||b.flags||g.CIFLAG.EXPRESSION;var h=this.scope,k=!(d&g.CIFLAG.DONT_PARSE),q=d&g.CIFLAG.EXPRESSION;d&g.CIFLAG.TO_HEX&&(a=c.to_hex(a));!1!==k&&(a=c.convertAllEscapes(a,"none"));var p=b.override||this.override||{},m=p&&p.variables?p.variables:null,n="",n=q&&!1!==k?h.parseExpression(a,null,m,null,null,null,p.args,d):""+a}catch(E){console.error(E)}return n},postCreate:function(){},childrenByClass:function(a){for(var b=this.getChildren(),
c=[],e=0;e<b.length;e++){var d=b[e];d.isInstanceOf(a)&&c.push(d)}return c},childrenByNotClass:function(a){for(var b=this.getChildren(),c=[],e=0;e<b.length;e++){var d=b[e];d.isInstanceOf(a)||c.push(d)}return c},getInstance:function(){var a=this.scope.instance;return a?a:null},pause:function(){},mergeNewModule:function(b){for(var c in b){var e=b[c];e&&a.isFunction(e)&&(this[c]=e)}},__onReloaded:function(a){this.mergeNewModule(a.prototype);a=this.declaredClass;(a=k.getObject(c.replaceAll("/",".",a))||
k.getObject(a))&&a.prototype&&a.prototype.solve&&this.mergeNewModule(a.prototype)},reparent:function(){if(!this)return!1;if(!this.getParent()){var a=this.next(null,1)||this.next(null,-1);a&&(this.group=null,a._add(this))}},unparent:function(a,b){if(!this)return!1;var c=this.getParent();c&&c.removeBlock&&c.removeBlock(this,!1);this.group=a;this.parent=this.parentId=null;!1!==b&&(this._place(null,-1,null),this._place(null,-1,null))},move:function(a){if(!this)return!1;var b=this.getParent(),c=null;if(b){c=
b[b._getContainer(this)];if(!c||2>c.length||!this.containsItem(c,this))return!1;b=this.indexOf(c,this);if(0>b+a)return!1;var e=c[b+a];if(!e)return!1;c[b+a]=this;c[b]=e}else this._place(null,a);return!0},_place:function(b,c,e){var d=this._store,g=this;(b=b||g.next(null,c))?(b=a.isString(b)?d.getSync(b):b,g=a.isString(g)?d.getSync(g):g,e=e||d.storage.fullData,c=-1==c?0:1,e.remove(g),-1==c&&(c=0),e.splice(Math.max(q(b,e)+c,0),0,g),d._reindex()):console.error("have no next",this)},index:function(){var a=
this.getParent(),b=null,c=this.group,b=this._store;if(a)return b=a[a._getContainer(this)]||[],b=b.filter(function(a){return a.group===c}),!b||2>b.length||!this.containsItem(b,this)?!1:this.indexOf(b,this);b=b.storage.fullData;b=b.filter(function(a){return a.group===c});return this.indexOf(b,this)},numberOfParents:function(){var a=0,b=this.getParent();b&&(a++,a+=b.numberOfParents());return a},getTopRoot:function(){var a=this.getParent();if(a){var b=a.getParent();b&&(a=b)}return a},next:function(a,
b){function c(a,b,e,d,g){var h=a.indexOf(b,a),k=b[h+e*d];if(k){if(!k.parentId&&k.group&&k.group===a.group)return g=h+e*d,k;d++;return c(a,b,e,d,g)}return null}a=a||this._store.storage.fullData;return c(this,a,b,1,0)},getParent:function(a){if(this.parentId)return this.scope.getBlockById(this.parentId)},getScope:function(){var a=this.scope;if(this.scopeId&&0<this.scopeId.length){var b=a.owner;b&&b.hasScope&&(b.hasScope(this.scopeId)?a=b.getScope(this.scopeId):console.error("have scope id but cant resolve it",
this))}return a},canAdd:function(){return null},getTarget:function(){var a=this._targetReference;if(a)return a;var b=this.getParent();b&&b.getTarget&&(a=b.getTarget());return a},addToEnd:function(a,b){b&&null!=a.length&&null!=b.length&&a.push.apply(a,b);return a},removeBlock:function(a,b){a&&(!1!==b&&a.empty&&a.empty(),!1!==b&&delete a.items,a.parent=null,a.parentId=null,this.items&&this.items.remove(a))},_getContainer:function(a){return"items"},empty:function(a){try{this._empty(a)}catch(w){debugger}},
_empty:function(a){if(a=a||this.items)for(var b=0;b<a.length;b++){var c=a[b];c&&c.empty&&c.empty();c&&this.scope&&this.scope.blockStore&&this.scope.blockStore.remove(c.id)}},containsItem:function(a,b){for(var c=a.length;c--;)if(a[c].id===b.id)return!0;return!1},indexOf:function(a,b){for(var c=a.length;c--;)if(a[c].id===b.id)return c;return-1},_getBlock:function(a){if(!this||!this.parentId)return!1;var b=this.scope.getBlockById(this.parentId);if(!b)return null;b=b[b._getContainer(this)];if(!b||2>b.length||
!this.containsItem(b,this))return null;var c=this.indexOf(b,this);return 0>c+a?!1:(a=b[c+a])?a:null},getPreviousBlock:function(){return this._getBlock(-1)},getNextBlock:function(){return this._getBlock(1)},_getPreviousResult:function(){var a=this.getPreviousBlock()||this.getParent();return a&&null!=a._lastResult?this.isArray(a._lastResult)?a._lastResult:[a._lastResult]:null},getPreviousResult:function(){var a=null;if((a=(a=this.getPreviousBlock())&&a._lastResult&&a.enabled?a:this.getParent())&&!a._lastResult){var b=
a.getParent();b&&(a=b)}return a&&null!=a._lastResult?(this.isArray(a._lastResult),a._lastResult):null},_getArg:function(b,c){var e=parseFloat(b);return isNaN(e)?"true"===b||"false"===b?"true"===b:b&&c&&a.isString(b)?"'"+b+"'":b:e},getArgs:function(b){var e=[];b=b||{};var d=b.args||this._get("args");b.override&&b.override.args&&(d=b.override.args);d&&(e=c.getJson(d,null,!1));if(e&&0==e.length&&d&&d.length&&a.isString(d)){if(-1!==d.indexOf(",")){d=d.split(",");for(b=0;b<d.length;b++){var g=parseFloat(d[b]);
isNaN(g)?"true"===d[b]||"false"===d[b]?e.push(c.toBoolean(d[b])):e.push(d[b]):e.push(g)}return e}e=[this._getArg(d)]}!a.isArray(e)&&(e=[]);b=this.getPreviousResult();null!=b&&(a.isArray(b)&&1==b.length?e.push(b[0]):e.push(b));return e||[d]},remove:function(a){this._destroyed=!0;null!=this.parentId&&null==this.parent&&(this.parent=this.scope.getBlockById(this.parentId));if(this.parent&&this.parent.removeBlock)this.parent.removeBlock(this);else if(a=a||this)a.empty&&a.empty(),delete a.items,a.parent=
null,this.items&&this.items.remove(a)},prepareArgs:function(a){a||(a={});a.id||(a.id=this.createUUID());a.items||(a.items=[])},_add:function(a,c,e,d){var g=null;try{c?(this.prepareArgs(c),g=b.createBlock(a,c,null,d)):null==c&&(g=a);(g.scope=this.scope)&&(g=this.scope.registerBlock(g,d));g.parent=this;g.parentId=this.id;g.scope=this.scope;var h=e||this._getContainer();if(h)if(this[h]||(this[h]=[]),-1!==this.indexOf(this[h],g))console.error(" have already "+g.id+" in "+h);else{if(this.id==g.id){console.error("tried to add our self to "+
h);return}this[h].push(g)}g.group=null;return g}catch(z){logError(z,"_add")}return null},getStore:function(){return this.getScope().getStore()},add:function(a,b,c){a=this._add(a,b,c);return a.getStore().getSync(a.id)},getContext:function(){return this.scope.instance&&this.scope.instance?this.scope.instance:null},resolved:function(){this._deferredObject&&(this._deferredObject.resolve(),delete this._deferredObject)},_solve:function(a,b){b=b||{highlight:!1};for(var c=[],e=0;e<this.items.length;e++)this.addToEnd(c,
this.items[e].solve(a,b));return c},solve:function(a,b){b=b||{highlight:!1};for(var c=[],e=0;e<this.items.length;e++)this.addToEnd(c,this.items[e].solve(a,b));return c},solveMany:function(a,b){!this._lastRunSettings&&b&&(this._lastRunSettings=b);b=this._lastRunSettings||b;this._currentIndex=0;this._return=[];a=this[this._getContainer()];if(a.length)return a=this.runFrom(a,0,b),this.onSuccess(this,b),a;this.onSuccess(this,b);return[]},runFrom:function(a,b,c){var e=this;a=a||this.items;this._return||
(this._return=[]);var d=function(b){b._deferredObject.then(function(d){b._lastResult=b._lastResult||d;e._currentIndex++;e.runFrom(a,e._currentIndex,c)})};if(a.length)for(;b<a.length;b++){var g=a[b];if(!0===g.deferred){g._deferredObject=new m;this._currentIndex=b;d(g);this.addToEnd(this._return,g.solve(this.scope,c));break}else this.addToEnd(this._return,g.solve(this.scope,c))}else this.onSuccess(this,c);return this._return},serializeField:function(a){return-1==this.ignoreSerialize.indexOf(a)},onLoad:function(){},
activate:function(){},deactivate:function(){},_get:function(a){if(this.override)return a in this.override?this.override[a]:this[a]},onDidRun:function(){this.override&&(this.override.args&&delete this.override.args,delete this.override)},destroy:function(){this.stop(!0);this.reset();this._destroyed=!0},reset:function(){this._lastSettings={};clearTimeout(this._loop);this._loop=null;delete this.override;this.override=null;delete this._lastResult;this.override={}},stop:function(){this.reset();this.getItems&&
a.invoke(this.getItems(),"stop")}});e.FLAGS=g.BLOCK_FLAGS;e.EMITS=g.BLOCK_CALLBACKMASK;e.prototype.onSuccess||(e.prototype.onSuccess=function(){},e.prototype.onRun=function(){},e.prototype.onFailed=function(){});n.chainAfter(e,"stop");n.chainAfter(e,"destroy");n.chainAfter(e,"onDidRun");return e})},"xide/manager/ResourceManager":function(){define(["dcl/dcl","xide/manager/ServerActionBase","xide/utils","xide/mixins/VariableMixin"],function(n,m,k,h){return n([m,h.dcl],{declaredClass:"xide.manager.ResourceManager",
serviceClass:"XApp_Resource_Service",resourceData:null,resourceVariables:null,getResourceVariables:function(){return this.resourceVariables},setVariable:function(d,b){return this.resourceVariables[d]=b},getVariable:function(d){return this.resourceVariables[d]},init:function(){this.resourceVariables||(this.resourceVariables={})},replaceVariables:function(d,b){return k.multipleReplace(""+d,b||this.resourceVariables)}})})},"xide/json/JSONEditor":function(){define("dcl/dcl xide/lodash ./util ./TreeMode xide/types xide/utils xide/action/Action xide/widgets/TemplatedWidgetBase".split(" "),
function(n,m,k,h,d,b,c,g){return n([g,h],{declaredClass:"xide.json.JSONEditor",baseClass:"jsoneditor_widget",templateString:'\x3cdiv style\x3d"height: inherit;width: inherit;overflow: hidden"\x3e\x3c/div\x3e',options:null,emits:{visit:!0,setEditable:!0,render:!0,renderNode:!0,onAction:!0,event:!0},preserveExpandState:!0,_expanded:null,preserveSelectedState:!0,_selected:null,insertTemplates:null,renderTemplates:null,_visitedNodes:{},readOnlyNodes:{},hiddenFields:{},modes:{},__create:function(b,a,c){this.container=
b;this.options=a||{};this.json=c||{};this.setMode(this.options.mode||"tree")},setMode:function(b){var a=this.container,c=k.extend({},this.options),d,g;c.mode=b;try{g=this.getName(),d={},this._create(a,c),this.setName(g),this.setData(d)}catch(w){this._onError(w)}},_onError:function(b){this._emit("error",b)},onReloaded:function(){this.insertTemplates=[];this._createInsertTemplate("New Command","blocks","{test:2}","commands",!0,!0)},_createInsertTemplate:function(b,a,c,d,g,h){this.insertTemplates.push({label:b,
path:a,value:c,newNodeTemplate:d,collapse:g,select:h})},getItemActions:function(){var b=this,a=[],e=d.ACTION_VISIBILITY,g=function(g){var h=c.create(g.label,"fa-magic","Edit/Insert "+g.label,!1,null,d.ITEM_TYPE.TEXT,"insertAction",null,!1,function(){b.insert(g.value,g.path,g.newNodeTemplate,g.collapse)},{}).setVisibility(e.ACTION_TOOLBAR,{label:g.label,widgetArgs:{style:"float:right"}});a.push(h)};this.insertTemplates&&m.each(this.insertTemplates,function(a){g(a)},this);return a},insert:function(c,
a,e,d,g){g=this.getData()||{};var h=b.getAt(g,a);h||(e=b.fromJson(e)||[],h=b.ensureAt(g,a,e));null!=h&&(m.isArray(h)?h.push(b.fromJson(c)):b.setAt(h,a,b.fromJson(c)));d&&this.preserveExpandState&&(this._expanded[a]=!0);this.setData(g)},getDefaultOptions:function(){var b=this;return{editable:function(a){return 0==b._emit("setEditable",a)?!1:!(a.path.join(".")in b.readOnlyNodes)}}},onAction:function(c){var a=c.params.node;return this._emit("on"+b.capitalize(c.action),{node:a,params:c.params})},_matches:function(b,
a){},getRenderTemplates:function(b){function a(a,b){return"function"===typeof b&&!0===b(a)||b.test&&b.test(a)||b===a}for(var c=[],d=this.renderTemplates,g=0;g<d.length;g++){var h=d[g],k=h.match;if(m.isArray(k))for(var p=0;p<k.length;p++)a(b,k[p])&&c.push(h);else a(b,k)&&c.push(h)}return c},onRenderNode:function(c,a,e){if(this.renderTemplates){var d=c.path().join("."),g="_"+this.id;this._visitedNodes[d]=c;c[g]=!0;if(g=c.dom){var h=this.getRenderTemplates(d);if(h)for(var k=0;k<h.length;k++){var p=h[k],
m=b.getAt(g,p.nodeValuePath,null)||"";1==a&&(b.setAt(g,p.nodeValuePath,""),m=e||"");p.nodeValueTransform&&(m=p.nodeValueTransform(m));var n=b.getAt(this.data,d,{}),m={nodeValue:m},z;for(z in n)m[z]=n[z];if(p.variables)for(z in p.variables)m[z]=p.variables[z];n=b.replace(p.replaceWith,null,m,{begin:"{",end:"}"});b.setAt(g,p.nodeValuePath,n)}}this.preserveExpandState&&!0===this._expanded[""+d]&&c.expand(!1)}},onAddNode:function(b){return!0},startup:function(){this.inherited(arguments);var c=this.options||
{};b.mixin(c,this.getDefaultOptions());b.mixin(this,c);this._on("renderNode",this.onRenderNode);this._on("onAction",this.onAction);this._visitedNodes={};this._expanded={};this.renderTemplates=[{nodeValuePath:"field.innerHTML",match:[/^variables[\s]?\.(\d+)$/,/^blocks[\s]?\.(\d+)$/],replaceWith:"{nodeValue} - {name}",variables:null,nodeValueTransform:function(a){return b.capitalize(a)},insertIfMatch:{}}];this.__create(this.domNode,c,this.data)},save:function(){if(this.delegate.onSave)this.delegate.onSave(this.get())}})})},
"davinci/ve/actions/ShowInOutline":function(){define(["dojo/_base/declare","davinci/Runtime","davinci/Workbench","davinci/ve/actions/ContextAction"],function(n,m,k,h){return n("davinci.ve.actions.ManageStates",[h],{run:function(){var d=m.currentEditor;d&&d.delegate.showInOutline()},isEnabled:function(d){d=this.fixupContext(d);var b=k.getOpenEditor();return b&&d?"davinci.ve.PageEditor"==b.declaredClass?0<d.getSelection().length:!1:!1},shouldShow:function(d){return(d=(d=this.fixupContext(d))?d.editor:
null)&&"davinci.ve.PageEditor"==d.declaredClass}})})},"davinci/ve/actions/ViewSplitHMenuAction":function(){define(["dojo/_base/declare","davinci/ve/actions/ContextAction"],function(n,m){return n("davinci.ve.actions.ViewSplitHMenuAction",[m],{run:function(k){(k=this.fixupContext(k))&&k.editor&&k.editor.switchDisplayModeSplitHorizontal&&k.editor.switchDisplayModeSplitHorizontal()}})})},"davinci/html/CSSSelector":function(){define(["require","dojo/_base/declare","davinci/html/CSSElement"],function(n,
m,k){m=m("davinci.html.CSSSelector",k,{constructor:function(){this.elementType="CSSSelector"},matchesSelector:function(h){if(h.elementType==this.elementType&&this.id==h.id&&this.cls==h.cls&&this.element==h.element&&this.pseudoRule==h.pseudoRule)return!0},getText:function(h){h="";this.element&&(h+=this.element);this.id&&(h=h+"#"+this.id);this.cls&&(h=h+"."+this.cls);this.pseudoRule&&(h=h+":"+this.pseudoRule);this.pseudoElement&&(h=h+"::"+this.pseudoElement);this.attribute&&(h=h+"["+this.attribute.name,
this.attribute.type&&(h=h+this.attribute.type+'"'+this.attribute.value+'"'),h+="]");return h},matches:function(h,d){d=h[d||0];h=0;var b=!1;if(this.id){if(this.id!=d.id)return-1;h+=100;b=!0}if(this.element){if("*"!=this.element){if(this.element!=d.tagName&&this.element.toUpperCase()!=d.tagName)return-1;h+=1}b=!0}if(this.cls&&d.classes){d=d.classes;if(0<=this.cls.indexOf(".")){for(var b=this.cls.split("."),c=0;c<b.length;c++){for(var g=!1,k=0;k<d.length&&!(g=d[k]==b[c]);k++);if(!g)return-1}h+=10*b.length}else{g=
!1;for(k=0;k<d.length&&!(g=d[k]==this.cls&&!this.pseudoRule);k++);if(!g)return-1;h+=10}b=!0}return b?h:-1},getCSSRule:function(){return"CSSRule"==this.parent.elementType?this.parent:this.parent.parent}});m.parseSelectors=function(h){if("string"==typeof h){h+="{}";var d=new (n("davinci/html/CSSFile"));d.setText(h);return d.children[0].selectors}return h};return m})},"davinci/html/ui/HTMLEditor":function(){define(["dojo/_base/declare","davinci/ui/ModelEditor","davinci/model/Factory","davinci/html/ui/HTMLOutline"],
function(n,m,k,h){return n("davinci.html.ui.HTMLEditor",m,{constructor:function(d,b){this.model=this.htmlFile=k.getModel({url:b});this._handle=dojo.connect(this.htmlFile.getDocumentElement(),"onkeydown",this,"onKeyDown")},destroy:function(){this.htmlFile.close();dojo.disconnect(this._handle);this.inherited(arguments)},getOutline:function(){this.outline||(this.outline=new h(this.model));return this.outline},getDefaultContent:function(){return"\x3chtml\x3e\n \x3chead\x3e\x3c/head\x3e\n \x3cbody\x3e\x3c/body\x3e\n\x3c/html\x3e"},
onKeyDown:function(d){}})})},"xideve/views/VisualEditorAction":function(){define("dcl/dcl xdojo/has require xaction/Action xide/types davinci/Runtime davinci/Workbench davinci/ve/metadata xaction/ActionProvider xaction/DefaultActions davinci/ve/widget dojo/Deferred".split(" "),function(n,m,k,h,d,b,c,g,p,a,e,q){e=d.ACTION;return n(p.dcl,{declaredClass:"xideve/views/VisualEditorAction",_layoutActions:null,_designToggleAction:null,_maqActions:null,_float:function(){var a=this.getPageEditor(),b=a.getDocker(),
c=a.getSourcePane();a.getSourcePane();var e=a.getPropertyPane();b.movePanel(c,d.DOCKER.DOCK.FLOAT,null,{x:300,y:300,w:600,h:400});var g=c._parent;g&&g.instanceOf("wcFrame")&&(g.pos(300,300,!0),g._size.x=600,g._size.y=400);g.__update();g&&g.instanceOf("wcFrame")&&g.pos(300,300,!0);g.__update();b.__focus(g);b.movePanel(e,d.DOCKER.DOCK.STACKED,c);b.movePanel(a.getBlocksPane(),d.DOCKER.DOCK.STACKED,c);b.movePanel(this.cssPane,d.DOCKER.DOCK.STACKED,c);e.maxSize(null,null);e.minSize(null,null);this.cssPane.select()},
_dock:function(){var a=this,b=a.getPageEditor(),c=b.getDocker(),e=b.getSourcePane(),g=b.getDesignPane(),h=b.getPropertyPane();c.movePanel(h,d.DOCKER.DOCK.RIGHT,g,{tabOrientation:d.DOCKER.TAB.TOP,location:d.DOCKER.TAB.RIGHT});h.maxSize(400);h.minSize(350);c.movePanel(e,d.DOCKER.DOCK.BOTTOM,null,{tabOrientation:d.DOCKER.TAB.TOP});c.movePanel(b.getBlocksPane(),d.DOCKER.DOCK.STACKED,e,{});c.movePanel(this.cssPane,d.DOCKER.DOCK.STACKED,e,{});b.resize();c.resize();setTimeout(function(){e.getSplitter().pos(.5);
h.maxSize(500);g.getSplitter().pos(.8);a.cssPane.select()},1500)},getWidgetBlockActions:function(){var a=[],b=this;a.push(this.createAction({label:"Add Block",command:"Widget/Add Block",group:"Widget",tab:"Home",icon:"fa-magic",mixin:{addPermission:!0,quick:!0},shouldDisable:function(){return b.getEditorContext()?1!==b.getSelection().length:!0}}));return a},getMaqettaActions:function(){return this._maqActions},getMaqettaAction:function(a,b,c){b=b||this.getMaqettaActions();var e=_.find(b,{id:a});if(e||
!1===c&&e)return e;for(c=0;c<b.length;c++){var d=b[c];if(d.menu&&(e=this.getMaqettaAction(a,d.menu,!1)))break}return e},onReload:function(){this.contextInfo.appContext.destroy()},reload:function(a){var b=this,c=new q;this.onReload();var e=this.getEditorContext(),d=e?$(e.rootNode):null;d&&d[0]&&d[0]._destroyHandles&&(d[0].__didEmitLoad=!1,d[0]._destroyHandles());if(e=e.appContext)e.didWireWidgets=!1;if(b.blockScopes){for(e=0;e<b.blockScopes.length;e++)d=b.blockScopes[e],b.ctx.getBlockManager().removeScope(d.id);
delete this.blockScopes}e=function(a){b.editor.setContent(b.item.path,a);c.resolve(a)};a?e(a):b.ctx.getFileManager().getContent(b.item.mount,b.item.path,e);return c},showInOutline:function(a){this.getEditorContext().getDocument();var b=this.getSelection()[0];this.outlineGridView.grid.select((a||b).id,null,!0,{focus:!0,append:!1,expand:!0,delay:1})},showCode:!0,toogleCode:function(){this.showCode&&this.getPageEditor()?this.getPageEditor()._srcCP.getSplitter().collapse():this.getPageEditor()._srcCP.getSplitter().expand();
this.showCode=!this.showCode},runAction:function(a){if(a=_.isString(a)?this.getAction(a):a){var b=a.command,e=b.split("/"),d=e[e.length-1],e=this.getEditorContext();if(-1!==b.indexOf("View/Show/Float"))return this._float();if(-1!==b.indexOf("View/Show/Dock"))return this._dock();if(-1!==b.indexOf("View/Show/Code"))return this.toogleCode();if(-1!==b.indexOf("Widget/Focus"))(b=(b=this.getSelection())?b[0].domNode:null)&&b.scrollIntoView();else{if(-1!==b.indexOf("View/Split/"))return this.doSplit(parseInt(d)),
this.updateFrame(),!0;if("Widget/Add Block"===b&&(d=this.getBlockEditor()))return d.runAction({command:"File/New Group"});if("View/Layout Mode/Relative"===b)return this.getPageEditor().selectLayoutFlow();if("File/Reload"===b)return this.reload();if("Widget/Show In Outline"===b)return this.showInOutline();if("View/Layout Mode/Absolute"===b)return this.getPageEditor().selectLayoutAbsolute();if("View/Show/Preview"===b)return this._designMode=!1,this.getPageEditor().getDesignPane().title("\x3cspan class\x3d'text-warning'\x3ePreview\x3c/span\x3e"),
this.getPageEditor().getDesignPane().icon("text-warning fa-eye"),this.setDesignMode(this._designMode);if("View/Show/Design"===b)return this._designMode=!0,this.getPageEditor().getDesignPane().title("Design"),this.getPageEditor().getDesignPane().icon("text-info fa-edit"),this.setDesignMode(this._designMode);if("File/Open In Browser"===b||"File/Preview"===b)return b=this.item.name.replace(".dhtml",".css"),b=this.item.getParent().path+"/"+b,e=this.editor.ctx.getResourceManager().getVariable("VFS_GET_URL"),
b=this.editor.ctx.getFileManager().base64_encode(e+""+this.item.mount+"\x26path\x3d"+b),b={template:"view.template.release.html",css:b,baseOffset:encodeURIComponent(this.item.getParent().path.replace("./","")),userDirectory:encodeURIComponent(this.editor.ctx.getResourceManager().getVariable("USER_DIRECTORY"))},b=this.ctx.getContextManager().getViewUrl(this.item,null,b),m("electronx")?((e=window.eRequire)||console.error("have no electron"),e("electron").shell.openExternal(b)):window.open(b);if(-1!==
b.indexOf("Widget/Align/")){switch(b){case "Widget/Align/Align Left":return this._alignLeftVertical();case "Widget/Align/Align Center":return this._alignCenterVertical();case "Widget/Align/Align Right":return this._alignRightVertical();case "Widget/Align/Align Top":return this._alignTopHorizontal();case "Widget/Align/Same Size":return this._sameSize();case "Widget/Align/Same Width":return this._sameWidth();case "Widget/Align/Same Height":return this._sameHeight()}return!0}d=a.action;if(!d)switch(b){case "Edit/Delete":d=
this.getMaqettaAction("delete");break;case "Edit/Undo":d=this.getMaqettaAction("undo");break;case "Edit/Redo":d=this.getMaqettaAction("redo");break;case "Edit/Copy":d=this.getMaqettaAction("copy");break;case "Edit/Paste":d=this.getMaqettaAction("paste");break;case "Edit/Cut":d=this.getMaqettaAction("cut");break;case "File/ManageStates":d=this.getMaqettaAction("manageStates")}return d?c._runAction(d,e):this.inherited(arguments)}}},_getIconClass:function(a){if(!a)return"";switch(a){case "editActionIcon undoIcon":return"text-info fa-undo";
case "editActionIcon redoIcon":return"text-info fa-repeat";case "editActionIcon editCutIcon":return"text-warning fa-scissors";case "editActionIcon editCopyIcon":return"text-warning fa-copy";case "editActionIcon editPasteIcon":return"text-warning fa-paste";case "editActionIcon editDeleteIcon":return"text-danger fa-remove"}return a},_toCommand:function(a){switch(a){case "Undo":return"Edit/Undo";case "Redo":return"Edit/Redo";case "Cut":return"Edit/Cut";case "Copy":return"Edit/Copy";case "Paste":return"Edit/Paste";
case "Delete":return"Edit/Delete"}},__addAction:function(a){switch(a.id){case "openBrowser":return!1;case "documentSettings":return!1;case "stickynote":return!1;case "tableCommands":return!1}return!0},_createEditToggleAction:function(){var a=this,b=h.createDefault("Design","fa-toggle-on","View/Design Mode","viewActions",null,{widgetClass:"xide/widgets/ToggleButton",widgetArgs:{icon1:"fa-toggle-on",icon2:"fa-toggle-off",delegate:this,checked:a._designMode},handler:function(b,c,e,d){a._designMode=!a._designMode;
d.set("checked",a._designMode);a.setDesignMode(a._designMode)}}).setVisibility(d.ACTION_VISIBILITY.CONTEXT_MENU,null).setVisibility(d.ACTION_VISIBILITY.ACTION_TOOLBAR,{label:"",permanent:function(){return 0==a.destroyed},widgetArgs:{style:"text-align:right;float:right;font-size:120%;"}}).setVisibility(d.ACTION_VISIBILITY.MAIN_MENU,{show:!1});return this._designToggleAction=b},_getItemActions:function(){try{if(!this.editor||!this.ready)return[];this.restoreStyleView();var a=this._getViewActions();
a&&a[0]&&(a=a[0].actions);var b=[],e=this;this._maqActions=a;b.push(this.getSplitViewAction());this._designToggleAction||b.push(this._createEditToggleAction());var k=function(a){a.handler=function(){try{c._runAction(a.action,q)}catch(J){console.error("action failed "+J,a)}}},q=null,p=null;this.editor&&this.editor.currentEditor&&this.editor.currentEditor.context&&(q=this.editor.currentEditor.context);for(var m=0;m<a.length;m++){var n=a[m];_.isString(n.action)&&c._loadActionClass(n);n.action&&n.action.isEnabled&&
n.action.isEnabled(q);"layout"===n.id&&(p=n);var B=this._toAction(n);B&&(B.action=n,k(B),b.push(B))}b.push(h.createDefault("Reload","fa-refresh","File/Reload","viewActions",null,{addPermission:!0,handler:function(){if(e.blockScopes){for(var a=0;a<e.blockScopes.length;a++){var b=e.blockScopes[a];e.ctx.getBlockManager().removeScope(b.id)}delete this.blockScopes}e.ctx.getFileManager().getContent(e.item.mount,e.item.path,function(a){e.editor.setContent(e.item.path,a)})}}));var C=this.getEditorContext().getSelection();
if(C.length){var E=C[0];g.getSmartInput(E.type).then(function(a){a&&a.show&&b.push(h.createDefault("Wizard","fa-magic","Edit/Wizard","viewActions",null,{handler:function(){a.show(E.id)}}))});b=b.concat(this.getWidgetLayoutActions(b))}if(p){var F=h.create("Layout","fa-crosshairs","View/Layout Mode",!1,null,d.ITEM_TYPE.WIDGET,"docActions",null,!1,function(){},{dummy:!0});b.push(F);var G=h.create("Relative","","View/Layout Mode/Relative",!1,null,d.ITEM_TYPE.WIDGET,"docActions",null,!1,function(){e.getPageEditor().selectLayoutFlow()});
b.push(G);var D=h.create("Absolute","","View/Layout Mode/Absolute",!1,null,d.ITEM_TYPE.WIDGET,"docActions",null,!1,function(){e.getPageEditor().selectLayoutAbsolute()});b.push(D)}this._layoutActions||(b=b.concat(this.getLayoutActions()));b.push(h.createDefault("Preview","text-success fa-eye","File/Open In Browser","viewActions",null,{mixin:{quick:!0}}).setVisibility(d.ACTION_VISIBILITY.ACTION_TOOLBAR,{label:"",widgetArgs:{style:"text-align:right;float:right;font-size:120%;"}}));return b}catch(H){return[]}},
getSplitViewActions:function(){return[]},getFlowActions:function(){var a=[],b={addPermission:!0,quick:!0};a.push(this.createAction({label:"Flow",command:"View/Layout Mode",icon:"fa-crosshairs",tab:"Home",group:"View",mixin:b}));a.push(this.createAction({label:"Relative",command:"View/Layout Mode/Relative",tab:"Home",group:"View",mixin:b}));a.push(this.createAction({label:"Absolute",command:"View/Layout Mode/Absolute",tab:"Home",group:"View",mixin:b}));return a},getFloatActions:function(){var a=[];
a.push(this.createAction({label:"Float",command:"View/Show/Float",icon:"fa-compress",tab:"Home",group:"View",mixin:{addPermission:!0,quick:!0}}));a.push(this.createAction({label:"Dock",command:"View/Show/Dock",icon:"fa-expand",tab:"Home",group:"View",mixin:{addPermission:!0,quick:!0}}));a.push(this.createAction({label:"View/Hide Code",command:"View/Show/Code",icon:"fa-code",tab:"Home",group:"View",mixin:{addPermission:!0,quick:!0}}));return a},getItemActions:function(a){function b(a){var b=d._toAction(a);
b&&b.command&&(b.tab="Home",b.mixin=g,b.action=a,e.push(b))}var e=[],d=this,e=e.concat(this.getSplitViewActions()),e=e.concat(this.getFloatActions()),e=e.concat(this.getWidgetBlockActions()),g={addPermission:!0,quick:!0,localize:!1};e.push(this.createAction({label:"Save",command:"File/Save",icon:"fa-save",group:"File",tab:"Home",keycombo:["ctrl s"],mixin:g}));e.push(this.createAction({label:"Select",command:"Widget/Select",group:"Widget",tab:"Home",icon:"fa-hand-o-up",mixin:g}));e.push(this.createAction({label:"Show In Outline",
command:"Widget/Show In Outline",group:"Widget",tab:"Home",icon:"fa-crosshairs",mixin:g}));e.push(this.createAction({label:"Move",command:"Widget/Move",group:"Widget",tab:"Home",icon:"fa-reorder",mixin:g}));e=e.concat(this.getWidgetLayoutActions());e=e.concat(this.getEditToggleActions());e=e.concat(this.getFlowActions());e.push(this.createAction({label:"Focus",command:"Widget/Focus",group:"Widget",tab:"Home",icon:"fa-crosshairs",mixin:g}));(a=this._getViewActions(a))&&a[0]&&(a=a[0].actions);this._maqActions=
a;this.getEditorContext();for(var h=0;h<a.length;h++){var k=a[h];c._loadActionClass(k);["label","showLabel","iconClass"].forEach(function(a){k.hasOwnProperty(a)});if(k.menu&&("DropDownButton"==k.type||"ComboButton"==k.type))for(var q=0;q<k.menu.length;q++){var p=k.menu[q];c._loadActionClass(p);["label","iconClass"].forEach(function(a){});b(p)}"layout"===k.id&&(layoutAction=k);b(k)}return e},getEditToggleActions:function(){var a=[],b={addPermission:!0,quick:!0};a.push(this.createAction({label:"Edit",
command:"View/Show/Design",icon:"fa-edit",tab:"Home",group:"View",mixin:b}));a.push(this.createAction({label:"Preview",command:"View/Show/Preview",icon:"fa-eye",tab:"Home",group:"View",mixin:b}));return a},_toAction:function(a){var b=a.command||this._toCommand(a.label)||a.id;if(!b)return null;var c=this,b=this.createAction({label:a.label,group:a.group||"Ungrouped",icon:this._getIconClass(a.iconClass)||a.iconClass,command:b,tab:a.tab||"Home",mixin:{action:a,addPermission:!0,quick:!0,actionId:a.id,
localize:!1},shouldDisable:function(){var b=c.getEditorContext();return b&&a.action&&a.action.isEnabled?!a.action.isEnabled(b):!1}});switch(a.id){case "documentSettings":return null;case "outline":b.group="Widget";break;case "undo":case "redo":case "cut":case "copy":case "paste":b.group="Edit";break;case "delete":b.group="Organize";break;case "theme":case "rotateDevice":case "chooseDevice":case "stickynote":case "savecombo":case "showWidgetsPalette":case "layout":case "sourcecombo":case "design":case "closeactiveeditor":case "tableCommands":return null}return b},
getWidgetLayoutActions:function(a){function b(a,b,d,g){e.push(c.createAction({label:a,icon:b,group:"Widget",tab:"Home",command:"Widget/Align/"+d,mixin:{addPermission:!0,quick:!0}}))}var c=this,e=[];e.push(this.createAction({label:"Align",command:"Widget/Align",icon:"fa-arrows",group:"Widget",tab:"Home",mixin:{addPermission:!0,quick:!0,localize:!1},shouldDisable:function(){if(!c.getEditorContext())return!0;var a=c.getSelection();return 0==a.length||2>a.length}}));b("Align Left","layoutIcon-alignLeftVertical",
"Align Left",c._alignLeftVertical);b("Align Center","layoutIcon-alignCenterVertical","Align Center",c._alignCenterVertical);b("Align Right","layoutIcon-alignRightVertical","Align Right",c._alignRightVertical);b("Align Top","layoutIcon-alignTopHorizontal","Align Top",c._alignTopHorizontal);b("Align Bottom","layoutIcon-alignBottomHorizontal","Align Bottom",c._alignBottomHorizontal);b("Same Size","layoutIcon-sameSize","Same Size",c._sameSize);b("Same Width","layoutIcon-sameWidth","Same Width",c._sameWidth);
b("Same Height","layoutIcon-sameHeight","Same Height",c._sameHeight);return e},_getViewActions:function(){var a=[];b.getExtensions("davinci.editorActions",function(b){if("davinci.ve.HTMLPageEditor"==b.editorContribution.targetID)return a.push(b.editorContribution),!0});0==a.length&&b.getExtension("davinci.defaultEditorActions",function(b){a.push(b.editorContribution);return!0});var c=g.getLibraryActions("davinci.editorActions","davinci.ve.HTMLPageEditor"),a=dojo.clone(a);0<a.length&&c.length&&dojo.forEach(c,
function(b){var c=k("davinci/Workbench");b.action&&c._loadActionClass(b);if(b.menu)for(var e=0;e<b.menu.length;e++){var d=b.menu[0];d.action&&c._loadActionClass(d)}a[0].actions.push(b)});return a},permissions:[e.RENAME,e.UNDO,e.REDO,e.RELOAD,e.DELETE,e.CLIPBOARD,e.LAYOUT,e.COLUMNS,e.SELECTION,e.SAVE,e.SEARCH,e.TOOLBAR,"File/Properties","File/Edit",e.GO_UP,e.HEADER,e.EDIT,e.COPY,e.CLOSE,e.MOVE,e.RENAME,e.RELOAD,e.CLIPBOARD,e.LAYOUT,e.SELECTION,e.OPEN_IN,e.GO_UP,e.SEARCH,e.OPEN_IN_TAB,e.TOOLBAR,e.STATUSBAR,
e.SOURCE,e.CONSOLE,e.CLIPBOARD_COPY,e.CLIPBOARD_PASTE,e.CLIPBOARD_CUT],startup:function(){var b=this;if(this.permissions){var c=a.getDefaultActions(this.permissions,this,this),c=c.concat(this.getItemActions(c));c.push(this.createAction({label:"Edit",command:"Edit",icon:"fa-edit",tab:"Home",group:"View",mixin:{addPermission:!0,quick:!0}}));this.addActions(c)}this._on("selectionChanged",function(a){b.refreshActions();setTimeout(function(){b.updateFocus()},500)})}})})},"wcDocker/ghost":function(){define(["dcl/dcl",
"wcDocker/types"],function(n,m){return n(null,{declaredClass:"wcGhost",constructor:function(k,h,d){this.$ghost=null;this._rect;this._anchorMouse=!1;this._anchor=null;this._docker=d;(this._outer=d.__findInner())&&this._outer.instanceOf("wcSplitter")&&(this._inner=this._outer.right());this.__init(k,h)},update:function(k,h){this.__move(k);for(var d=0;d<this._docker._floatingList.length;++d){var b=this._docker._floatingList[d].__rect();if(k.x>b.x&&k.y>b.y&&k.x<b.x+b.w&&k.y<b.y+b.h){this._docker._floatingList[d].__checkAnchorDrop(k,
!1,this,!0,void 0,!0)?this._anchor.panel=this._docker._floatingList[d].panel():h||this.anchor(k,null);return}}for(d=0;d<this._docker._frameList.length;++d)if(b=this._docker._frameList[d].__rect(),k.x>b.x&&k.y>b.y&&k.x<b.x+b.w&&k.y<b.y+b.h){this._docker._frameList[d].__checkAnchorDrop(k,!1,this,!0,void 0,!0)?this._anchor.panel=this._docker._frameList[d].panel():h||this.anchor(k,null);break}},anchor:function(k,h){if("undefined"===typeof k)return this._anchor;if(!h||!this._anchor||h.loc!==this._anchor.loc||
h.item!==this._anchor.item){var d=parseInt(this.$ghost.css("left")),b=parseInt(this.$ghost.css("top"));parseInt(this.$ghost.css("width"));parseInt(this.$ghost.css("height"));this._anchorMouse={x:d-k.x,y:b-k.y};this._rect.x=-this._anchorMouse.x;this._rect.y=-this._anchorMouse.y;h?(this._anchor=h,k=.8,h.self&&h.loc===m.DOCK.STACKED?(k=0,this.$ghost.hide()):this.$ghost.show(),this.$ghost.stop().animate({opacity:k,"margin-left":"2px","margin-top":"2px",border:"0px",left:h.x+"px",top:h.y+"px",width:h.w+
"px",height:h.h+"px"},150)):this._anchor&&(this._docker._draggingFrame&&this._docker._draggingFrame.$container&&(h=this._docker._draggingFrame._panelList[0]._options.detachToHeight||this._docker._options.detachToHeight||this._rect.h,this._rect.w=this._docker.__stringToPixel(this._docker._draggingFrame._panelList[0]._options.detachToWidth||this._docker._options.detachToWidth||this._rect.w,this._docker.$container.width()),this._rect.h=this._docker.__stringToPixel(h,this._docker.$container.height())),
this._anchor=null,this.$ghost.show(),this.$ghost.stop().animate({opacity:.3,"margin-left":this._rect.x-this._rect.w/2+"px","margin-top":this._rect.y-10+"px",width:this._rect.w+"px",height:this._rect.h+"px"},150))}},rect:function(){return{x:this.$ghost.offset().left,y:this.$ghost.offset().top,w:parseInt(this.$ghost.css("width")),h:parseInt(this.$ghost.css("height")),tabOrientation:this._anchor&&this._anchor.tab}},destroy:function(){this.__destroy()},__init:function(k,h){this.$ghost=$('\x3cdiv class\x3d"wcGhost"\x3e').css("opacity",
0).css("top",k.y+"px").css("left",k.x+"px").css("width",k.w+"px").css("height",k.h+"px");this._anchorMouse={x:k.x-h.x,y:k.y-h.y};this._rect={x:-this._anchorMouse.x,y:-this._anchorMouse.y,w:k.w,h:k.h};$("body").append(this.$ghost);this.anchor(h,k)},__move:function(k){if(!this._anchor){var h=parseInt(this.$ghost.css("left")),d=parseInt(this.$ghost.css("top")),h=k.x+this._anchorMouse.x,d=k.y+this._anchorMouse.y;this.$ghost.css("left",h+"px");this.$ghost.css("top",d+"px")}},__rect:function(){return this._rect},
__destroy:function(){this.$ghost.stop().animate({opacity:0},{duration:175,complete:function(){$(this).remove()}})}})})},"davinci/ve/utils/pseudoClass":function(){define([],function(){return{MAQETTA_PSEUDO_CLASS:"maqettaPseudoClass",replace:function(n){return"hover link visited active focus first-letter first-line first-child before after".split(" ").reduce(function(m,k){return m.replace(new RegExp(":"+k,"g"),".maqettaPseudoClass"+k[0].toUpperCase()+k.slice(1))},n)}}})},"xideve/views/VisualEditorSourceEditor":function(){define(["dcl/dcl",
"xace/views/Editor","xide/utils","davinci/model/Factory"],function(n,m,k,h){return n(null,{declaredClass:"xideve/views/VisualEditorSourceEditor",createHTMLEditor:function(d,b,c){var g=this;b=k.addWidget(m,{__permissions:[],options:{filePath:c.path},config:g.config,delegate:g,owner:g,parentContainer:d,ctx:g.ctx,style:"padding:0px;",item:c,resizeToParent:!0,model:h.newHTML({url:b}),selectModel:function(b){},setVisible:function(){},setContent:function(b,a){this.model.ctx=g.ctx;this.model.fileName=b;
this.model.setText(a)},store:null,storeDelegate:{getContent:function(b){g.ctx.getFileManager().getContent(c.mount,c.path,b)},saveContent:function(b,a,e){g.ctx.getFileManager().setContent(c.mount,c.path,b,a)}},title:"notitle",closable:!0},this,d,!0);g.textEditor=b;d.add(b);return b}})})},"davinci/ve/actions/CutAction":function(){define(["dojo/_base/declare","./_CutCopyAction","../../Runtime"],function(n,m,k){return n("davinci.ve.actions.CutAction",[m],{_invokeSourceEditorAction:function(h){h.htmlEditor.cutAction.run()},
_executeAction:function(h,d,b,c){k.clipboard=b;h.select(null);h.getCommandStack().execute(c)}})})},"xblox/model/variables/VariableAssignmentBlock":function(){define("dcl/dcl xblox/model/Block xide/utils xide/types dstore/legacy/DstoreAdapter xide/factory xdojo/has".split(" "),function(n,m,k,h,d,b,c){return n(m,{declaredClass:"xblox.model.variables.VariableAssignmentBlock",variable:null,value:null,name:"Set Variable",icon:"",hasInlineEdits:!0,flags:4,toText:function(){var b=this.scope.getVariableById(this.variable),
b=b?b.name:"";this.variable&&-1!==this.variable.indexOf("://")&&(b='\x3cspan class\x3d"text-info"\x3e'+this.scope.toFriendlyName(this,this.variable)+"\x3c/span\x3e");return this.getBlockIcon("C")+this.name+" "+b+"\x3cspan class\x3d'text-muted small'\x3e to \x3ckbd class\x3d'text-warning'\x3e"+this.makeEditable("value","bottom","text","Enter the string to send","inline")+"\x3c/kbd\x3e\x3c/span\x3e"},_getPreviousResult:function(){var b=null;return(b=(b=this.getPreviousBlock())&&b._lastResult&&b.enabled?
b:this.getParent())&&null!=b._lastResult?(this.isArray(b._lastResult),b._lastResult):null},solve:function(c,d){var a=this.value,e=!1;if(!a){var g=this.getArgs();0<g.length&&(a=g[0])}if(this.variable&&null!==a){this.onRun(this,d);var k=-1!==this.variable.indexOf("://")?this.scope.resolveBlock(this.variable):c.getVariableById(this.variable),g=this._getArg(a),p=this.getArgs(d)||[];if(!k)return[];var m=null;this.isScript(g)?(m=this.override||{},m=c.parseExpression(a,null,null,null,null,null,p||m.args),
m=this.replaceAll("'","",m),k.value!==m&&(e=!0)):(p&&1==p.length&&null==a&&(g=p[0]),k.value!==g&&(e=!0),m=k.value=g);k.set("value",m);c=!1;this.getContext();this.flags&h.VARIABLE_FLAGS.PUBLISH&&e&&(c=!0);e&&b.publish(h.EVENTS.ON_DRIVER_VARIABLE_CHANGED,{item:k,scope:this.scope,save:!1,block:this,name:k.name,value:g,publish:c,result:m});this.onSuccess(this,d);return[]}},canAdd:function(){return null},getFields:function(){var b=this.inherited(arguments)||this.getDefaultFields(!1),c=this;b.push(this.utils.createCI("value",
29,this.value,{group:"General",title:"Value",dst:"value",widget:{allowACECache:!0,showBrowser:!1,showSaveButton:!0,editorOptions:{showGutter:!1,autoSelect:!1,autoFocus:!1,hasConsole:!1,hasItemActions:function(){return!1}},item:this},delegate:{runExpression:function(a,b,d){return c.scope.expressionModel.parse(c.scope,a,!1,b,d)}}}));b.push(k.createCI("value","xcf.widgets.CommandPicker",this.variable,{group:"Variable",title:"Variable",dst:"variable",block:this,pickerType:"variable",value:this.variable,
widget:{store:this.scope.blockStore,labelField:"name",valueField:"id",value:this.variable,query:[{group:"basicVariables"},{group:"processVariables"}]}}));b.push(this.utils.createCI("flags",5,this.flags,{group:"Variable",title:"Flags",dst:"flags",data:[{value:2,label:"Publish to network",title:"Publish to network in order to make a network variable"},{value:4,label:"Publish if server",title:"Publish only on network if this is running server side"}],widget:{hex:!0}}));return b}})})},"xblox/model/mqtt/Publish":function(){define(["dcl/dcl",
"xdojo/has","xide/utils","xide/types","xcf/model/Command"],function(n,m,k,h,d,b,c){return n(d,{declaredClass:"xblox.model.mqtt.Publish",name:"Publish",topic:"",args:"",deferred:!1,sharable:!0,context:null,icon:"fa-send",isCommand:!0,qos:0,retain:!1,path:null,flags:0,onData:function(b){if(b&&b.topic&&b.topic==this.topic){this.getContext();var c=this[this._getContainer()],a=this._lastSettings,e=[];if(0<c.length)for(c=b,(this.path="value",_.isObject(b))&&(c=k.getAt(b,this.path,b)),b=0;b<this.items.length;b++){var d=
this.items[b];d.enabled&&(d.override={args:[c]},e.push(d.solve(this.scope,a)))}this.onSuccess(this,this._lastSettings);return e}},observed:["topic"],getContext:function(){return this.context||(this.scope.getContext?this.scope.getContext():this)},solve:function(b,c,a){this._currentIndex=0;this._return=[];c=this._lastSettings=c||this._lastSettings;var e=this.getInstance();!0===a&&this._loop&&this.reset();var d=this.args;a=this.getArgs(c);a[0]&&(d=a[0]);if(e){var g=c.flags||this.flags;a=!(g&h.CIFLAG.DONT_PARSE);
g&=h.CIFLAG.EXPRESSION;d=k.getJson(d,!0,!1);null!==d&&0!==d&&!0!==d&&!1!==d&&_.isObject(d)||(d={payload:this.args});var p=b.expressionModel.replaceVariables(b,this.topic,!1,!1);if(d.payload&&_.isString(d.payload)&&a){var m=c.override||this.override||{},n=m&&m.variables?m.variables:null;!1!==a&&(d.payload=k.convertAllEscapes(d.payload,"none"));g&&!1!==a&&(d.payload=b.parseExpression(d.payload,null,n,null,null,null,m.args))}e.callMethod("publishTopic",k.mixin({topic:p,qos:this.qos,retain:this.retain},
d),this.id,this.id)}c=c||{};this.onDidRun();this.onSuccess(this,c);return!0},toText:function(b){b='\x3cspan style\x3d""\x3e'+this.getBlockIcon()+" "+this.makeEditable("name","top","text","Enter a name","inline")+" :: \x3c/span\x3e";this.topic&&(b+=this.makeEditable("topic","bottom","text","Enter a topic","inline"),this.startup&&(b+=this.getIcon("fa-bell inline-icon text-warning","text-align:right;float:right;","")),0<this.interval&&(b+=this.getIcon("fa-clock-o inline-icon text-warning","text-align:right;float:right",
"")));return b},canAdd:function(){return[]},getFields:function(){var b=this.inherited(arguments)||this.getDefaultFields();b.push(k.createCI("qos",h.ECIType.ENUMERATION,this.qos,{group:"General",title:"QOS",dst:"qos",widget:{options:[{label:"0 - at most once",value:0},{label:"1 - at least once",value:1},{label:"2 - exactly once",value:2}]}}));b.push(k.createCI("arguments",27,this.args,{group:"Arguments",title:"Arguments",dst:"args"}));b.push(this.utils.createCI("flags",5,this.flags,{group:"Arguments",
title:"Flags",dst:"flags",data:[{value:4096,label:"Dont parse",title:"Do not parse the string and use it as is"},{value:2048,label:"Expression",title:"Parse it as Javascript"}],widget:{hex:!0}}));b.push(k.createCI("topic",h.ECIType.STRING,this.topic,{group:"General",title:"Topic",dst:"topic",select:!0}));b.push(k.createCI("retain",h.ECIType.BOOL,this.retain,{group:"General",title:"Retain",dst:"retain"}));b.remove(_.find(b,{name:"send"}));b.remove(_.find(b,{name:"waitForResponse"}));return b}})})},
"wcDocker/panel":function(){define(["dcl/dcl","wcDocker/types","wcDocker/base"],function(n,m,k){k=n(k,{declaredClass:"wcPanel",select:function(){var h=this.getFrame();h&&(h.panel(h.panelIndex(this)),this._startWidgets(),this.onShow())},getSplitter:function(){return this._parentByClass("Splitter")},getFrame:function(){return this._parentByClass("Frame")},resize:function(){this.__update();this.__trigger(m.EVENT.RESIZED)},constructor:function(h,d,b){this.$container=null;this._parent=h;this._panelObject=
this.$loading=this.$titleText=this.$title=this.$closeIcon=this.$icon=null;this._initialized=!1;this._collapseDirection=void 0;this._title=this._type=d;this._titleVisible=!0;this._options=b;this._layout=null;this._buttonList=[];this._actualPos={x:.5,y:.5};this._actualSize={x:0,y:0};this._resizeData={time:-1,timeout:!1,delta:150};this._pos={x:.5,y:.5};this._moveData={time:-1,timeout:!1,delta:150};this._size={x:-1,y:-1};this._minSize={x:100,y:50};this._maxSize={x:Infinity,y:Infinity};this._scroll={x:0,
y:0};this._scrollable={x:!0,y:!0};this._collapsible=!0;this._overflowVisible=!1;this._resizeVisible=this._closeable=this._detachable=this._moveable=!0;this._isVisible=!1;this._events={};this.__init()},title:function(h){"undefined"!==typeof h&&(!1===h?(this._titleVisible=!1,this.$titleText.html(this._type)):(this._title=h,this.$titleText.html(h)),this.$icon&&this.$titleText.prepend(this.$icon),this.$closeIcon&&(this.$titleText.append(this.$closeIcon),this.$closeIcon[0].__panel=this),this._parent&&
this._parent.instanceOf("wcFrame")&&this._parent.__updateTabs());return this._title},info:function(){return this.docker().panelTypeInfo(this._type)},layout:function(){return this._layout},focus:function(h){var d=this.docker();if(d)for(d.__focus(this._parent,h),h=0;h<this._parent._panelList.length;++h)if(this._parent._panelList[h]===this&&this._parent._curTab!==h){this._parent.panel(h);break}},collapseDirection:function(h){this._collapseDirection=h},isVisible:function(){return this._isVisible},isFloating:function(){return this._parent&&
this._parent.instanceOf("wcFrame")?this._parent._isFloating:!1},isInFocus:function(){var h=this.docker();return h&&this._parent&&this._parent.instanceOf("wcFrame")?this._parent===h._focusFrame:!1},addButton:function(h,d,b,c,g,k){this._buttonList.push({name:h,className:d,toggleClassName:k,text:b,tip:c,isTogglable:g,isToggled:!1});this._parent&&this._parent.instanceOf("wcFrame")&&this._parent.__update()},removeButton:function(h){for(var d=0;d<this._buttonList.length;++d)if(this._buttonList[d].name===
h)return this._buttonList.splice(d,1),this._parent&&this._parent.instanceOf("wcFrame")&&this._parent.__onTabChange(),this._parent&&this._parent.instanceOf("wcFrame")&&this._parent.__update(),!0;return!1},buttonState:function(h,d){for(var b=0;b<this._buttonList.length;++b)if(this._buttonList[b].name===h)return"undefined"!==typeof d&&(this._buttonList[b].isToggled=d,this._parent&&this._parent.instanceOf("wcFrame")&&this._parent.__onTabChange()),this._parent&&this._parent.instanceOf("wcFrame")&&this._parent.__update(),
this._buttonList[b].isToggled;return!1},initPos:function(h,d){if("undefined"!==typeof h){var b=this.docker();this._pos.x=b?b.__stringToPercent(h,b.$container.width()):h}"undefined"!==typeof d&&(b=this.docker(),this._pos.y=b?b.__stringToPercent(d,b.$container.height()):d);return{x:this._pos.x,y:this._pos.y}},initSize:function(h,d){if("undefined"!==typeof h){var b=this.docker();this._size.x=b?b.__stringToPixel(h,b.$container.width()):h}"undefined"!==typeof d&&(b=this.docker(),this._size.y=b?b.__stringToPixel(d,
b.$container.height()):d);return{x:this._size.x,y:this._size.y}},minSize:function(h,d){if("undefined"!==typeof h){var b=this.docker();this._minSize.x=b?b.__stringToPixel(h,b.$container.width()):h}"undefined"!==typeof d&&(b=this.docker(),this._minSize.y=b?b.__stringToPixel(d,b.$container.height()):d);return{x:this._minSize.x,y:this._minSize.y}},maxSize:function(h,d){if("undefined"!==typeof h){var b=this.docker();this._maxSize.x=b?b.__stringToPixel(h,b.$container.width()):h}"undefined"!==typeof d&&
(b=this.docker(),this._maxSize.y=b?b.__stringToPixel(d,b.$container.height()):d);return{x:this._maxSize.x,y:this._maxSize.y}},width:function(){return this.$container?this.$container.width():0},height:function(){return this.$container?this.$container.height():0},icon:function(h){this.$icon||(this.$icon=$("\x3cdiv\x3e"),this.$titleText.prepend(this.$icon));this.$icon.removeClass();this.$icon.addClass("wcTabIcon "+h);this._parent&&this._parent.instanceOf("wcFrame")&&this._parent.__updateTabs();this._icon=
h},faicon:function(h){this.$icon||(this.$icon=$("\x3cdiv\x3e"),this.$titleText.prepend(this.$icon));this.$icon.removeClass();this.$icon.addClass("wcTabIcon fa fa-fw fa-"+h);this._parent&&this._parent.instanceOf("wcFrame")&&this._parent.__updateTabs()},scrollable:function(h,d){"undefined"!==typeof h&&(this._scrollable.x=!!h,this._scrollable.y=!!d);return{x:this._scrollable.x,y:this._scrollable.y}},scroll:function(h,d,b){if(!this.$container)return{x:0,y:0};"undefined"!==typeof h&&(b?this.$container.parent().stop().animate({scrollLeft:h,
scrollTop:d},b):(this.$container.parent().scrollLeft(h),this.$container.parent().scrollTop(d)));return{x:this.$container.parent().scrollLeft(),y:this.$container.parent().scrollTop()}},collapsible:function(h){"undefined"!==typeof h&&(this._collapsible=!!h);return this._collapsible},overflowVisible:function(h){"undefined"!==typeof h&&(this._overflowVisible=!!h);return this._overflowVisible},resizeVisible:function(h){"undefined"!==typeof h&&(this._resizeVisible=!!h);return this._resizeVisible},moveable:function(h){"undefined"!==
typeof h&&(this._moveable=!!h,this.$title.toggleClass("wcNotMoveable",!this._moveable));return this._moveable},detachable:function(h){"undefined"!==typeof h&&(this._detachable=!!h);return this._detachable},closeable:function(h){"undefined"!==typeof h&&((this._closeable=!!h)?this.$closeIcon||(this.$closeIcon=$('\x3cdiv class\x3d"wcPanelCloseIcon fa fa-close"/\x3e'),this.$titleText.append(this.$closeIcon)):(this.$closeIcon&&this.$closeIcon.remove(),this.$closeIcon=null),this._parent&&this._parent.__update());
return this._closeable},close:function(){var h=this.docker();h&&h.__closePanel(this)},startLoading:function(h,d,b){this.$loading||(this.$loading=$('\x3cdiv class\x3d"container-fluid center-block" style\x3d"opacity: 1;position: absolute;top:50%;"\x3e\x3cdiv class\x3d""\x3e\x3cdiv class\x3d"offset3 span6 centering center-block"\x3e\x3cdiv class\x3d"fa fa-3x fa-spinner fa-spin "/\x3e\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e'),this.$container.append(this.$loading))},finishLoading:function(h){if(this.$loading)if(0<
h){var d=this;this.$loading.fadeOut(h,function(){d.$loading.remove();d.$loading=null;d.docker().__testLoadFinished()})}else this.$loading.remove(),this.$loading=null,this.docker().__testLoadFinished()},on:function(h,d){if(!h)return!1;this._events[h]||(this._events[h]=[]);if(-1!==this._events[h].indexOf(d))return!1;this._events[h].push(d);return!0},off:function(h,d){if("undefined"===typeof h)this._events={};else if(this._events[h])if("undefined"===typeof d)this._events[h]=[];else for(var b=0;b<this._events[h].length;++b)if(this._events[h][b]===
d){this._events[h].splice(b,1);break}},trigger:function(h,d){var b=this.docker();return b?b.trigger(h,d):[]},__init:function(){var h=this._options&&this._options.layout||"wcLayoutTable";this._layout=new (this.docker().__getClass(h))(this.$container,this);this.$title=$('\x3cdiv class\x3d"wcPanelTab"\x3e');this.$titleText=$("\x3cdiv\x3e"+this._title+"\x3c/div\x3e");this.$title.append(this.$titleText);this._options.hasOwnProperty("title")&&this.title(this._options.title);this._options.icon&&this.icon(this._options.icon);
this._options.faicon&&this.faicon(this._options.faicon)},__update:function(){var h=this.docker();if(h&&(this._layout.__update(),this.$container)){this._resizeVisible?this._parent.$frame.removeClass("wcHideOnResize"):this._parent.$frame.addClass("wcHideOnResize");if(this._initialized)this.__trigger(m.EVENT.UPDATED);else{this._initialized=!0;var d=this;setTimeout(function(){d.__trigger(m.EVENT.INIT);h.__testLoadFinished()},0)}var b=this.$container.width(),c=this.$container.height();if(this._actualSize.x!==
b||this._actualSize.y!==c)this._resizeData.time=new Date,this._resizeData.timeout||(this._resizeData.timeout=!0,setTimeout(this.__resizeEnd.bind(this),this._resizeData.delta),this.__trigger(m.EVENT.RESIZE_STARTED,{width:this._actualSize.x,height:this._actualSize.y})),this._actualSize.x=b,this._actualSize.y=c,this.__trigger(m.EVENT.RESIZED,{width:this._actualSize.x,height:this._actualSize.y});b=this.$container.offset();if(this._actualPos.x!==b.left||this._actualPos.y!==b.top)this._moveData.time=new Date,
this._moveData.timeout||(this._moveData.timeout=!0,setTimeout(this.__moveEnd.bind(this),this._moveData.delta),this.__trigger(m.EVENT.MOVE_STARTED,{x:this._actualPos.x,y:this._actualPos.y})),this._actualPos.x=b.left,this._actualPos.y=b.top,this.__trigger(m.EVENT.MOVED,{x:this._actualPos.x,y:this._actualPos.y})}},__resizeEnd:function(){new Date-this._resizeData.time<this._resizeData.delta?setTimeout(this.__resizeEnd.bind(this),this._resizeData.delta):(this._resizeData.timeout=!1,this.__trigger(m.EVENT.RESIZE_ENDED,
{width:this._actualSize.x,height:this._actualSize.y}))},__moveEnd:function(){new Date-this._moveData.time<this._moveData.delta?setTimeout(this.__moveEnd.bind(this),this._moveData.delta):(this._moveData.timeout=!1,this.__trigger(m.EVENT.MOVE_ENDED,{x:this._actualPos.x,y:this._actualPos.y}))},__isVisible:function(h){this._isVisible!==h&&(this._isVisible=h,this.__trigger(m.EVENT.VISIBILITY_CHANGED,this._isVisible))},__save:function(){var h={type:"wcPanel"};this._icon&&(h.icon=this._icon);h.panelType=
this._type;h.size={x:this._size.x,y:this._size.y};h.customData={};this.__trigger(m.EVENT.SAVE_LAYOUT,h.customData);return h},__restore:function(h){h.size&&(this._size.x=h.size.x,this._size.y=h.size.y);this.__trigger(m.EVENT.RESTORE_LAYOUT,h.customData);h.icon&&this.icon(h.icon);var d=this.docker();d?d._emit("restorePanel",h.customData):console.error("restorePanel : failed, have no docker")},__trigger:function(h,d){if(!h)return!1;var b=[];if(this._events[h]){h=this._events[h].slice(0);for(var c=0;c<
h.length;++c)b.push(h[c].call(this,d))}return b},__rect:function(){var h=this.$container.offset(),d=this.$container.width(),b=this.$container.height();return{x:h.left,y:h.top,w:d,h:b}},__container:function(h){if("undefined"===typeof h)return this.$container;(this.$container=h)?(this._layout.__container(this.$container),this.$loading&&this.$container.append(this.$loading)):(this._layout.__container(null),this.finishLoading());this.$container&&(this.$container[0].id=this.id);return this.$container},
__destroy:function(){this._panelObject=null;this.$closeIcon&&(this.$closeIcon.__panel=null);this.off();this.__container(null);this._parent=null}});n.chainAfter(k,"resize");return k})},"xide/mixins/ReferenceMixin":function(){define(["dcl/dcl","dojo/_base/declare","xide/types","xide/utils","xide/registry"],function(n,m,k,h,d){function b(b,c){return(b=b.document.getElementById(c))?b:null}h.find=function(b,c,a){return(b=$(c).find(b))&&0<b.length?!1===a?b:b[0]:null};var c={_targetReference:null,getTarget:function(){return this._targetReference||
this.inherited(arguments)},skipWidgetCSSClasses:"dijitButtonHover dijitHover dijit dijitInline dijitReset dijitCheckBoxChecked dijitChecked dijitLeft".split(" "),_cssClassesToQuery:function(b){var c="";if(b){b=b.split(" ");for(var a=0;a<b.length;a++)-1<h.contains(this.skipWidgetCSSClasses,b[a])||-1<b[a].toLowerCase().indexOf("hover")||(c+=""+b[a])}return c.trim()},resolveReference:function(c,p){var a=null;try{a=this.getTarget()}catch(u){return logError(u),null}var e=this.scope,g=c.reference;if(!(c&&
g&&g.length)&&a)return[a];switch(c.mode){case k.WIDGET_REFERENCE_MODE.BY_ID:if(this.scope&&this.scope.document){p=[];if(-1!==g.indexOf(" "))for(g=g.split(" "),c=0;c<g.length;c++)(a=b(e,g[c]))&&p.push(a);else return[b(e,g)];return p}e=d.byId(g);g="undefined"!==typeof document?document.getElementById(g):null;if(e||g)return e?[e]:[g];break;case k.WIDGET_REFERENCE_MODE.BY_CLASS:if(e=dojo.getObject(g)||n.getObject(g))return[e];break;case k.WIDGET_REFERENCE_MODE.BY_CSS:e=this._cssClassesToQuery(g);this._parseString&&
(e=this._parseString(e,p,null,p&&p.flags?p.flags:k.CIFLAG.EXPRESSION)||e);g=null;this.scope&&this.scope.global&&this.scope.global.$?g=this.scope.global.$:"undefined"!==typeof $&&(g=$);if(g&&(g=g(e)))return g;if(e=h.find(e,null,!1))return e}return null}};m=m("xblox.model.ReferenceMixin",null,c);m.dcl=n(null,c);return m})},"xide/views/_EditorBase":function(){define(["dcl/dcl","dojo/_base/declare","dojo/_base/connect","xide/types","xide/factory"],function(n,m,k,h,d){return n(null,{declaredClass:"xide.views._EditorBase",
storeDelegate:null,content:null,item:null,ctrlDown:!1,getEditor:function(){return this},focus:function(b){this.getEditor().focus()},getContent:function(b,c){this.storeDelegate?this.storeDelegate.getContent(function(c){b(c)},this.dataItem):c&&c("Editor::getContent : Have no store delegate!")},saveContent:function(b,c){var d=this;this.set("iconClass","fa-spinner fa-spin");var k=this.getValue();this.storeDelegate?this.storeDelegate.saveContent(k,function(){d.set("iconClass",d.iconClassNormal);d.lastSavedContent=
k;d.onContentChange(!1);b&&b(arguments);d.publish(h.EVENTS.ON_FILE_CONTENT_CHANGED,{path:d.filePath,item:d.dataItem,content:k,editor:d},d)},null,this.dataItem):c&&c("Editor::saveContent : Have no store delegate!")},getKeyboardNode:function(){},setupKeyboard:function(){var b=this;k.connect(this.containerNode,"onclick",function(c){b.focus(c)})},startup:function(){this.setupKeyboard()}})})},"xide/widgets/_MenuKeyboard":function(){define(["dcl/dcl","xide/$","xide/lodash","xide/mixins/EventedMixin"],function(n,
m,k,h){var d=[".divider",".nav-header",".disabled"];return n(h.dcl,{owner:null,setup:function(b){this.owner=b},findNavigationContainerElement:function(b,c,d){if(!b||!b[0])return null;if(b&&c&&b[0]==c[0])return b;var g=b.data(d||"data");return g&&null!=g?b:this.findNavigationContainerElement(b.parent(),c,d)},findNavigationElement:function(b,c,d){return b&&b[0]?b&&c&&b[0]==c[0]?b:(c=b.data(d||"item")||b.data(d||"data"))&&!k.isEmpty(c)?b:this.findNavigationElement(b.parent()):null},toNavigationData:function(b,
c,d,h){var a=this.findNavigationElement(b,c,d);if(a){var e=a.data(d||"item")||a.data(d||"data");if(e)return{element:a,data:e,parent:!1!==h?this.findNavigationContainerElement(b,c,d):null}}},next:function(b,c,d){if(c)return c=c[1==d?"next":"prev"](),this.canSelect(c)?c:this.next(b,c,d)},canSelect:function(b){return 0==m(b).is(d.join(","))},children:function(b,c){var d=this;return b.children("LI").filter(function(b,a){return!0!==c?d.canSelect(a):a})},close:function(b){var c=b.parent(),d=b.parent().parent();
c.css("display","");c.removeClass("open");b.removeClass("open");b.removeClass("focus");b.removeClass("active");d.removeClass("open");d.focus()},openRoot:function(b,c,d){b=c||this.topMost(b).parent()[-1===d?"prev":"next"]();m(b.find("A")[0]).trigger("click");if(b=this.toNavigationData(m(b.find("UL")[0]),this.owner.getRootContainer()))return this.activate(m(this.children(b.element)[0]),b.element,!0)},destroy:function(){delete this.owner},open:function(b){b.css("display","block");b=this.toNavigationData(b,
this.owner.getRootContainer(),"data",null,null);if(b=this.children(b.parent)[0])b=this.toNavigationData(m(b),this.owner.getRootContainer()),this.activate(b.element,b.parent,!0)},topMost:function(b){if(b){var c=b.data();if(c.item||c.data){var c=b.parent(),d=c.data();return c&&c[0]&&(d.item||d.data)?this.topMost(c):b}}},keyboardHandler:function(b,c){var d=c.data("currentTarget");if(13===b.keyCode){var h=d.find("A").data("handler");h?(h=h())&&h.then&&h.then(function(){d.focus()}):(d.find("A").click(),
d.focus())}else{var a=38==b.keyCode||40==b.keyCode||36==b.keyCode||35==b.keyCode,e=37==b.keyCode||39==b.keyCode,h=a?38==b.keyCode||36==b.keyCode?-1:1:37==b.keyCode?-1:1,q=!(36!=b.keyCode&&35!=b.keyCode);b=null;var n={},w=null;a&&(b=q?1==h?m(k.last(this.children(c))):m(k.first(this.children(c))):this.next(c,d,h))&&(n=b.data("item"));if(e&&(c=d.data("item")))if(0<h){if(c.subMenuData&&"block"!==c.subMenuData.css("display"))return this.open(c.subMenuData);if(this.openRoot(d,null,1))return}else{this.close(d);
w=this.toNavigationData(d,this.owner.getRootContainer());if(k.isEmpty(w.parent.parent().data()))return this.openRoot(d,null,-1);return}b&&n&&(w=this.toNavigationData(b,this.owner.getRootContainer()),this.activate(w.element,w.parent,!0))}},initContainer:function(b){var c=this;b.data("didSetup")||(b.data("didSetup",!0),this.__on(b,"keydown",null,function(d){m(d.target).parent()[0]==b[0]&&c.keyboardHandler(d,b)}))},activate:function(b,c,d){c&&this.initContainer(c);d&&c&&this.children(c,!0).each(function(b,
a){m(a).removeClass("focus");m(a).removeClass("open");m(a).removeClass("active");b=m(a).find(".dropdown-context-sub");b[0]&&"block"===b.css("display")&&(b.css("display",""),b.removeClass("open"),b.removeClass("active"))});b.addClass("focus");b.addClass("active");b.focus();c.addClass("open");c.data("currentTarget",b);return!0},clear:function(b){this.children(b,!0).each(function(b,d){m(d).removeClass("focus");m(d).removeClass("open");m(d).removeClass("active");b=m(d).find(".dropdown-context-sub");b[0]&&
"block"===b.css("display")&&(b.css("display",""),b.removeClass("open"))})}})})},"davinci/davinci":function(){define([],function(){})},"davinci/ve/actions/ArrangeAction":function(){define(["dojo/_base/declare","./_ReorderAction","davinci/commands/CompoundCommand","davinci/ve/commands/ReparentCommand"],function(n,m,k,h){return n("davinci.ve.actions.ArrangeAction",[m],{run:function(d){},isEnabled:function(d){return!0},shouldShow:function(d){return(d=(d=this.fixupContext(d))?d.editor:null)&&"davinci.ve.PageEditor"==
d.declaredClass}})})},"dojo/_base/connect":function(){define("./kernel ../on ../topic ../aspect ./event ../mouse ./sniff ./lang ../keys".split(" "),function(n,m,k,h,d,b,c,g){function p(a,c,e,d,k){d=g.hitch(e,d);if(!a||!a.addEventListener&&!a.attachEvent)return h.after(a||n.global,c,d,!0);"string"==typeof c&&"on"==c.substring(0,2)&&(c=c.substring(2));a||(a=n.global);if(!k)switch(c){case "keypress":c=w;break;case "mouseenter":c=b.enter;break;case "mouseleave":c=b.leave}return m(a,c,d,k)}function a(a){a.keyChar=
a.charCode?String.fromCharCode(a.charCode):"";a.charOrCode=a.keyChar||a.keyCode}c.add("events-keypress-typed",function(){var a={charCode:0};try{a=document.createEvent("KeyboardEvent"),(a.initKeyboardEvent||a.initKeyEvent).call(a,"keypress",!0,!0,null,!1,!1,!1,!1,9,3)}catch(x){}return 0==a.charCode&&!c("opera")});var e={106:42,111:47,186:59,187:43,188:44,189:45,190:46,191:47,192:96,219:91,220:92,221:93,222:39,229:113},q=c("mac")?"metaKey":"ctrlKey",u=function(b,c){c=g.mixin({},b,c);a(c);c.preventDefault=
function(){b.preventDefault()};c.stopPropagation=function(){b.stopPropagation()};return c},w;w=c("events-keypress-typed")?function(a,b){var d=m(a,"keydown",function(a){var d=a.keyCode,g=13!=d&&32!=d&&(27!=d||!c("ie"))&&(48>d||90<d)&&(96>d||111<d)&&(186>d||192<d)&&(219>d||222<d)&&229!=d;if(g||a.ctrlKey){g=g?0:d;if(a.ctrlKey){if(3==d||13==d)return b.call(a.currentTarget,a);g=95<g&&106>g?g-48:!a.shiftKey&&65<=g&&90>=g?g+32:e[g]||g}d=u(a,{type:"keypress",faux:!0,charCode:g});b.call(a.currentTarget,d);
if(c("ie"))try{a.keyCode=d.keyCode}catch(E){}}}),g=m(a,"keypress",function(a){var c=a.charCode;a=u(a,{charCode:32<=c?c:0,faux:!0});return b.call(this,a)});return{remove:function(){d.remove();g.remove()}}}:c("opera")?function(a,b){return m(a,"keypress",function(a){var c=a.which;3==c&&(c=99);c=32>c&&!a.shiftKey?0:c;a.ctrlKey&&!a.shiftKey&&65<=c&&90>=c&&(c+=32);return b.call(this,u(a,{charCode:c}))})}:function(b,c){return m(b,"keypress",function(b){a(b);return c.call(this,b)})};var r={_keypress:w,connect:function(a,
b,c,e,d){var g=arguments,h=[],k=0;h.push("string"==typeof g[0]?null:g[k++],g[k++]);var q=g[k+1];h.push("string"==typeof q||"function"==typeof q?g[k++]:null,g[k++]);for(q=g.length;k<q;k++)h.push(g[k]);return p.apply(this,h)},disconnect:function(a){a&&a.remove()},subscribe:function(a,b,c){return k.subscribe(a,g.hitch(b,c))},publish:function(a,b){return k.publish.apply(k,[a].concat(b))},connectPublisher:function(a,b,c){var e=function(){r.publish(a,arguments)};return c?r.connect(b,c,e):r.connect(b,e)},
isCopyKey:function(a){return a[q]}};r.unsubscribe=r.disconnect;g.mixin(n,r);return r})},"davinci/maqetta/AppStates":function(){define("dojo/_base/connect dojo/dom-style dojo/dom dojo/_base/html dojo/_base/window dojo/_base/array dojo/parser require dojo/json dojo/_base/lang".split(" "),function(n,m,k,h,d,b,c,g,p,a){m=function(){};m.prototype={NORMAL:"Normal",DELTAS_ATTRIBUTE:"data-maq-deltas",DELTAS_ATTRIBUTE_P6:"dvStates",APPSTATES_ATTRIBUTE:"data-maq-appstates",APPSTATES_ATTRIBUTE_P6:"dvStates",
reImportant:/^(.*)(!\ *important)(.*)/,isStateContainer:function(a){return!(!a||!a._maqAppStates)},getStateContainersForNode:function(a){for(var b=[];a;){a._maqAppStates&&b.splice(0,0,a);if("BODY"==a.tagName)break;a=a.parentNode}return b},getAllStateContainers:function(a){function b(a){a._maqAppStates&&c.push(a);a=e._getChildrenOfNode(a);for(var d=0;d<a.length;d++)b(a[d])}var c=[],e=this;b(a);return c},getStatesArray:function(a,b,c,e){var d=[];if(a)for(a=a.parentNode;a;){if(a._maqAppStates)if(a==
e)d.splice(0,0,{node:a,oldState:b,newState:c});else{var g=a._maqAppStates.states?a._maqAppStates.states.current:void 0;d.splice(0,0,{node:a,oldState:g,newState:g})}if("BODY"==a.tagName)break;a=a.parentNode}return d},findStateContainer:function(a,b){if(a)for(a=a.parentNode;a;){if(a._maqAppStates&&(!b||b==this.NORMAL||a._maqAppStates.states&&0<=a._maqAppStates.states.indexOf(b)))return a;if("BODY"==a.tagName)break;a=a.parentNode}},getAllStatesForNode:function(a){var b=[this.NORMAL];if(a)for(a=a.parentNode;a;){if(a._maqAppStates&&
a._maqAppStates.states)for(var c=a._maqAppStates.states?a._maqAppStates.states:[],e=0;e<c.length;e++)b.push(c[e]);if("BODY"==a.tagName)break;a=a.parentNode}return b},getStatesListCurrent:function(a){var b=[];if(a)for(a=a.parentNode;a;){a._maqAppStates&&b.splice(0,0,a._maqAppStates.current);if("BODY"==a.tagName)break;a=a.parentNode}return b},getAllCurrentStates:function(a){a=this.getAllStateContainers(a);for(var b=[],c=0;c<a.length;c++){var e=a[c],d=this.getState(e);b.push({stateContainerNode:e,state:d})}return b},
getStates:function(a){var b=a&&a._maqAppStates;a=["Normal"];if(b)for(var b=b.states?b.states:[],c=0;c<b.length;c++){var e=b[c];"Normal"!=e&&a.push(e)}return a},_getSCNodeFromElemOrEvent:function(a,b){b&&b.tagName&&b.nodeName?b=b._maqAppStates?b:this.findStateContainer(b,a):b&&b.target&&b.currentTarget?(b=b.currentTarget,b._maqAppStates||(b=this.findStateContainer(b,a))):b=this.getContainer();return b},_updateSrcState:function(a){},hasState:function(a,b){return!!(a&&a._maqAppStates&&a._maqAppStates.states&&
0<=a._maqAppStates.states.indexOf(b))},getState:function(a){return a&&a._maqAppStates&&a._maqAppStates.current},setState:function(a,b,c){var e=c?c.updateWhenCurrent:!1,d=c?c.silent:!1,g=c?c.focus:!1;(b=this._getSCNodeFromElemOrEvent(a,b))&&b._maqAppStates&&(e||b._maqAppStates.current!=a)&&(e=b._maqAppStates.current,this.isNormalState(a)?(b._maqAppStates.hasOwnProperty("current")&&delete b._maqAppStates.current,a=void 0):b._maqAppStates.current=a,g&&this._setFocus(a,b),c&&c.hasOwnProperty("initial")&&
(c.initial?b._maqAppStates.initial=a:b._maqAppStates.initial&&delete b._maqAppStates.initial),d||n.publish("/maqetta/appstates/state/changed",[{node:b,newState:a,oldState:e,stateContainerNode:b}]),this._updateSrcState(b,!a))},getInitial:function(a){return a&&a._maqAppStates&&a._maqAppStates.initial},getFocus:function(a){if(!a)return null;a=this.getAllStateContainers(a);for(var b=0;b<a.length;b++){var c=a[b]._maqAppStates;if(c&&c.hasOwnProperty("focus"))return{stateContainerNode:a[b],state:c.focus}}return null},
_setFocus:function(a,b){if(b&&b._maqAppStates){var c=b.ownerDocument&&b.ownerDocument.body;if(c){var e=this.getFocus(c);if(!e||e.stateContainerNode!=b||e.state!=a){for(var e=this.getAllStateContainers(c),d=0;d<e.length;d++)(c=e[d]._maqAppStates)&&delete c.focus;b._maqAppStates.focus=a}}}},isNormalState:function(a){0==arguments.length&&(a=this.getState());return!a||a==this.NORMAL},_styleArrayMixin:function(a,b){if(b){for(var c=0;c<b.length;c++){var e=b[c],d;for(d in e)for(e=a.length-1;0<=e;e--)a[e].hasOwnProperty(d)&&
a.splice(e,1)}for(c=0;c<b.length;c++)a.push(b[c])}},getStyle:function(a,b,c){for(var e,d=[],g=0;g<b.length;g++)if(e=b[g],e=a&&a._maqDeltas&&a._maqDeltas[e]&&a._maqDeltas[e].style,this._styleArrayMixin(d,e),2<arguments.length&&d)for(e=d.length-1;0<=e;e--){var h=d[e],k;for(k in h)if(k!=c){d.splice(e,1);break}}return d},hasStyle:function(a,b,c){if(a&&c)if(a._maqDeltas&&a._maqDeltas[b]&&a._maqDeltas[b].style)for(a=a._maqDeltas[b].style,b=0;b<a[b];b++){if(a[b].hasProperty(c))return!0}else return!1},setStyle:function(a,
b,c,e){if(a&&c){a._maqDeltas=a._maqDeltas||{};a._maqDeltas[b]=a._maqDeltas[b]||{};a._maqDeltas[b].style=a._maqDeltas[b].style||[];var d=a._maqDeltas[b].style;if(c)for(var g=0;g<c.length;g++){var h=c[g],k;for(k in h)for(h=d.length-1;0<=h;h--){var p=d[h],q;for(q in p)if(k==q){d.splice(h,1);break}}}var m;if(c)for(h=0;h<c.length;h++)for(var r in c[h])g=c[h][r],"undefined"!=typeof g&&null!==g&&("undefined"==typeof m&&(m=[]),k={},k[r]=this._getFormattedValue(r,g),m.push(k));a._maqDeltas[b].style=d&&m?d.concat(m):
d?d:m?m:void 0;e||n.publish("/davinci/states/state/style/changed",[{node:a,state:b,style:c}]);this._updateSrcState(a)}},_convertStyleName:function(a){if(0<=a.indexOf("-")){var b=a.split("-");a=b[0];for(var c=1;c<b.length;c++){var e=b[c];a+=e.charAt(0).toUpperCase()+e.substring(1)}}return a},_DYNAMIC_PROPERTIES:{width:1,height:1,top:1,right:1,bottom:1,left:1},_getFormattedValue:function(a,b){if(a in this._DYNAMIC_PROPERTIES){if("string"!=typeof b)return b+"px";a=g("dojo/_base/lang").trim(b);/^[-+]?[0-9]*\.?[0-9]+$/.test(a)&&
(b=a+"px")}return b},_getStatesListUsingPropName:function(a,b){var c=[];if(a)for(var e=0;e<a.length;e++)c.push(a[e][b]);return c},_resetAndCacheNormalStyle:function(b,c){if(b&&c)for(var e=0;e<c.length;e++){var d=this._getStatesListUsingPropName(c,"oldState"),g=this.getStyle(b,d),d=this._getStatesListUsingPropName(c),d=this.getStyle(b,d);if(g)for(var h=0;h<g.length;h++){var k=g[h],p;for(p in k)k=this._convertStyleName(p),b.style[k]=""}if(d)for(g=0;g<d.length;g++){var h=d[g],q;for(q in h){var k=this._convertStyleName(q),
m=b.style,n=this._getFormattedValue(q,h[q])+"",u=n?n.match(this.reImportant):null;u?(n=u[1]+u[3],n=a.trim(n),m.setProperty?m.setProperty(q,n,"important"):b.style[k]=n):b.style[k]=n}}}},_update:function(b,c){if(b&&b._maqDeltas){var e=this._getStatesListUsingPropName(c,"newState"),e=this.getStyle(b,e);this._resetAndCacheNormalStyle(b,c);if(e)for(c=0;c<e.length;c++){var d=e[c],g;for(g in d){var h=this._convertStyleName(g),k=d[g]+"",p=k?k.match(this.reImportant):null;p?(k=p[1]+p[3],k=a.trim(k),d.setProperty?
d.setProperty(g,k,"important"):b.style[h]=k):b.style[h]=k}}}},isContainer:function(a){var b=!1;if(a){var c=this.getDocument();if(a===(c&&c.body)||"BODY"==a.tagName)b=!0}return b},getContainer:function(){return document.body},add:function(a,b,c){a&&!this.hasState(a,b)&&(c=c&&c.index,a._maqAppStates=a._maqAppStates||{},a._maqAppStates.states=a._maqAppStates.states||[],"number"==typeof c&&0<=c?a._maqAppStates.states.splice(c,0,b):a._maqAppStates.states.push(b),n.publish("/davinci/states/state/added",
[{node:a,state:b}]),this._updateSrcState(a))},remove:function(a,b){if(a&&a._maqAppStates&&a._maqAppStates.states&&this.hasState(a,b)){var c=a._maqAppStates.states.indexOf(b);if(!(0>c)){var e=this.getState(a),d=this.getFocus(a.ownerDocument.body);a._maqAppStates.states.splice(c,1);c={};d&&d.stateContainerNode==a&&d.state==b&&(c.focus=!0,c.updateWhenCurrent=!0);b==e&&this.setState(void 0,a,c);n.publish("/davinci/states/state/removed",[{node:a,state:b}]);this._updateSrcState(a)}}},rename:function(a,
b){if(!b)return!1;var c=b.oldName;b=b.newName;if(!(a&&a._maqAppStates&&a._maqAppStates.states&&a._maqAppStates.states.length))return!1;var e=a._maqAppStates.states;if(0>e.indexOf(c)||0<=e.indexOf(b))return!1;e.splice(e.indexOf(c),1,b);a._maqAppStates.focus===c&&(a._maqAppStates.focus=b);a._maqAppStates.current===c&&(a._maqAppStates.current=b);e=[a];this.getState(a);for(e=e.concat(this._getChildrenOfNode(a));e.length;){var d=e.shift();d._maqDeltas&&d._maqDeltas[c]&&(d._maqDeltas[b]=d._maqDeltas[c],
delete d._maqDeltas[c]);var e=e.concat(this._getChildrenOfNode(d)),g=this.getStatesArray(d,null,b,a);this._update(d,g);this._updateSrcState(d)}n.publish("/davinci/states/state/renamed",[{node:d,oldName:c,newName:b,stateContainerNode:d}]);return!0},_isEmpty:function(a){for(var b in a)if(a.hasOwnProperty(b))return!1;return!0},stringifyWithQuotes:function(a){str=p.stringify(a);str=str.replace(/(\\)?'/g,function(a,b){return b?a:"\\'"});return str=str.replace(/"/g,"'")},serialize:function(a){var b=this,
c=function(c){var e=null;a[c]&&(c=g("dojo/_base/lang").clone(a[c]),delete c.undefined,b._isEmpty(c)||(e=this.stringifyWithQuotes(c)));return e}.bind(this),e={};if(!a)return e;var d=c("_maqAppStates");"string"==typeof d&&(e.maqAppStates=d);c=c("_maqDeltas");"string"==typeof c&&(e.maqDeltas=c);return e},deserialize:function(a,b){"string"==typeof a&&(a=a.replace(/(\\)?'/g,function(a,b){return b?"'":'"'}),a=p.parse(a),this._migrate_m4_m5(a),a=this._migrate_m6_m7(a,b&&b.isBody));return a},_migrate_m4_m5:function(a){for(var b in a){var c=
a[b];if(c){var e=c.style;if(e&&!e.length){var d=[],g;for(g in e){var h={};h[g]=e[g];d.push(h)}c.style=d}}}},_migrate_m6_m7:function(a,b){if(!a||a.states)return a;if(b){b=[];for(var c in a)"current"!=c&&b.push(c);if(0<b.length)return{states:b}}else return delete a.current,a},store:function(a,b,c){if(a){this.clear(a);var e="BODY"==a.tagName;b&&(a._maqAppStates=this.deserialize(b,{isBody:e}));c&&(a._maqDeltas=this.deserialize(c,{isBody:e}));n.publish("/davinci/states/stored",[])}},retrieve:function(a){if(a){var b=
a.getAttribute(this.APPSTATES_ATTRIBUTE);b||"BODY"!==a.tagName||(b=a.getAttribute(this.APPSTATES_ATTRIBUTE_P6));var c=a.getAttribute(this.DELTAS_ATTRIBUTE);c||"BODY"===a.tagName||(c=a.getAttribute(this.DELTAS_ATTRIBUTE_P6));return{maqAppStates:b,maqDeltas:c}}},clear:function(a){a&&(a._maqAppStates&&delete a._maqAppStates,a._maqDeltas&&delete a._maqDeltas)},_parseStyleValues:function(a){var c=[];a&&b.forEach(a.split(";"),function(a){var b=a.indexOf(":");if(0<b){var e=a.substring(0,b).trim();a=a.substring(b+
1).trim();b={};b[e]=a;c.push(b)}});return c},transferElementStyle:function(a,b){a&&(a=a._maqDeltas,b=this._parseStyleValues(b),a.undefined||(a.undefined={}),a.undefined.style=b)},getDocument:function(){return document},shouldInitialize:function(){return!davinci.AppStatesDontInitialize},_getChildrenOfNode:function(a){for(var b=[],c=0;c<a.childNodes.length;c++){var e=a.childNodes[c];1===e.nodeType&&b.push(e)}return b},initialize:function(){this.subscribed||(n.subscribe("/maqetta/appstates/state/changed",
this,function(a){if(!a.editorClass)for(var b=davinci.states._getChildrenOfNode(a.node);b.length;){var c=b.shift();davinci.states.isContainer(c)||(b=b.concat(davinci.states._getChildrenOfNode(c)));var e=this.getStatesArray(c,a.oldState,a.newState,a.stateContainerNode);davinci.states._update(c,e)}}),this.subscribed=!0)}};"undefined"===typeof davinci&&(davinci={});var e=davinci.states=new m;(function(){e.initialize();e.shouldInitialize()&&"undefined"!=typeof g&&g(["dojo/_base/lang","dojo/query","dojo/aspect"],
function(a,b,k){var p=0,q=!1;a=function(a){q||(k.around(a,"parse",function(a){var b={};return function(c,g){var k;k=(k=!g&&c&&c.rootNode?c.rootNode:c)?h.byId(k):d.body();n(b);k=a.apply(this,arguments);var p=e.getDocument(),q,m,r,v,u;for(u in b){var w;if(w="body"==u?p.body:p.querySelectorAll("."+u)[0]){var x="BODY"==w.tagName;q=m=r=v=null;x?q=b[u]:(q=b[u].maqAppStates,m=b[u].maqDeltas);q&&(r=e.deserialize(q,{isBody:x}));m&&(v=e.deserialize(m,{isBody:x}));r&&(r.initial?r.current=r.initial:(r.focus&&
delete r.focus,delete r.current));e.store(w,r,v);m&&davinci.states.transferElementStyle(w,b[u].style)}}u=e.getAllStateContainers(p.body);for(p=0;p<u.length;p++)q=u[p],q._maqAppStates&&"string"==typeof q._maqAppStates.current&&e.setState(q._maqAppStates.current,q,{updateWhenCurrent:!0,focus:q._maqAppStates.focus});return k}}),dojo.parser.parse=a.parse,q=!0)};try{var m=g("dojox/mobile/parser");a.apply(m)}catch(z){}m||a.call(null,c);var n=function(a){var c=e.getDocument();if(!c.body._maqAlreadyPreserved){var d=
davinci.states.retrieve(c.body);d&&d.maqAppStates&&(a.body=d.maqAppStates);c.body._maqAlreadyPreserved=!0}b("*",c).forEach(function(b){var c=b.getAttribute("class");c||(c="");if(!b._maqAlreadyPreserved&&0>c.indexOf("maqTempClass")){b._maqAlreadyPreserved=!0;var d=e.retrieve(b);if("BODY"!=b.tagName&&d&&(d.maqAppStates||d.maqDeltas)){var g="maqTempClass"+p;b.setAttribute("class",c+" "+g);p++;a[g]={};d.maqAppStates&&(a[g].maqAppStates=d.maqAppStates);d.maqDeltas&&(a[g].maqDeltas=d.maqDeltas);b.style?
a[g].style=b.style.cssText:console.error("States.js _preserveStates. No value for node.style.")}}})}})})();davinci.Workbench||"undefined"==typeof dijit||n.subscribe("/maqetta/appstates/state/changed",function(a){var b=a&&a.node&&a.node.ownerDocument&&a.node.ownerDocument.defaultView&&a.node.ownerDocument.defaultView.dijit.byId;b&&(a.newState&&!a.newState.indexOf("_show:")?(a=b(a.newState.substring(6)))&&a.show&&a.show():a.oldState&&!a.oldState.indexOf("_show:")&&(a=b(a.oldState.substring(6)))&&a.hide&&
a.hide())});return m})},"xide/data/_Base":function(){define("dojo/_base/declare dstore/QueryResults xide/mixins/EventedMixin xide/encoding/MD5 xdojo/has xide/lodash dojo/when dojo/Deferred".split(" "),function(n,m,k,h,d,b,c,g){return n("xide/data/_Base",k,{__all:null,allowCache:!0,_find:function(c){c=b.filter(this.data,c);return b.isArray(c)?c:b.isObject(c)?[c]:[]},notify:function(){},_query:function(b){var a=new g;b=this.filter(b);c(b.fetch(),function(b){a.resolve(b)});return a},constructor:function(){var b=
this;if(b._getQuerierFactory("filter")||b._getQuerierFactory("sort"))this.queryEngine=function(a,c){c=c||{};var e=b._getQuerierFactory("filter"),d=e?e(a):passthrough;a=b._getQuerierFactory("sort");var g=passthrough;a&&(g=a(arrayUtil.map(c.sort,function(a){return{property:a.attribute,descending:a.descending}})));var h=passthrough;isNaN(c.start)&&isNaN(c.count)||(h=function(a){var b=c.start||0,b=a.slice(b,b+(c.count||Infinity));b.total=a.length;return b});return function(a){return h(g(d(a)))}};var a=
this;b.on("add,update,delete",function(c){var e=c.type,d=c.target;a.notify("add"===e||"update"===e?d:void 0,"delete"===e||"update"===e?"id"in c?c.id:b.getIdentity(d):void 0)})},destroy:function(){this._emit("destroy",this);_.each(this.query(),function(b){!0===b.destroyOnRemove&&b.destroy&&b.destroy()});delete this._queryCache;this._queryCache=null},refreshItem:function(b,a){this.emit("update",{target:b,property:a})},query:function(c,a,e){if(b.isEmpty(c)){var d=this;return _.map(this.data,function(a){return d.getSync(a[d.idProperty])},
this)}_.some(c,function(a){return null==a});var g=c?h(JSON.stringify(c),1):null;if(g&&!1!==e&&(!this._queryCache&&(this._queryCache={}),this._queryCache[g]))return this._queryCache[g];a=a||{};c=c||{};var k=this.filter(c),p;if(c=a.sort)if("[object Array]"===Object.prototype.toString.call(c))for(;e=c.pop();)k=k.sort(e.attribute,e.descending);else k=k.sort(c);"start"in a&&(p=a.start||0,p=k[k.fetchRangeSync?"fetchRangeSync":"fetchRange"]({start:p,end:a.count?p+a.count:Infinity}),p.total=p.totalLength);
p=p||new m(k[k.fetchSync?"fetchSync":"fetch"]());p.observe=function(a,b){var c=k.on("add",function(b){a(b.target,-1,b.index)}),e=k.on("update",function(c){!b&&c.previousIndex===c.index&&isFinite(c.index)||a(c.target,c.previousIndex,c.index)}),d=k.on("delete",function(b){a(b.target,b.previousIndex,-1)}),g={remove:function(){c.remove();e.remove();d.remove()}};g.cancel=g.remove;return g};return p}})})},"davinci/ve/VisualEditorOutline":function(){define("dojo/_base/declare dojo/_base/connect ./commands/ReparentCommand ./commands/StyleCommand ./widget ./States ../Runtime xide/factory xide/types".split(" "),
function(n,m,k,h,d,b,c,g,p){var a=n(null,{toggleMode:!0,betweenThreshold:4,showRoot:!0,dndController:"dijit.tree.dndSource",onChange:function(a){},constructor:function(a){this._context=a;this._handles=[];this._connect("activate","_rebuild");this._connect("widgetChanged","_widgetChanged")},getRoot:function(a,b){a(this._context.rootWidget||{id:"myapp",label:"application"})},getLabel:function(a){if("myapp"==a.id)return this._context.model.fileName;var b="",c=this._getWidget(a);if("xblox/RunScript"===
a.type&&c)return(b=c.domNode)&&b.script?"XBlox::"+b.script:"XBlox::"+c.dijitWidget.targetEvent;if(c.isWidget)return b=d.getLabel(c);if(b=c.type){a=this.useRichTextLabel?"\x26lt;":"\x3c";var e=this.useRichTextLabel?"\x26gt;":"\x3e",b=0===b.indexOf("html.")?a+b.substring(5)+e:0===b.indexOf("OpenAjax.")?a+b.substring(9)+e:0<b.indexOf(".")?b.substring(b.lastIndexOf(".")+1):c.label||b;(c=d.byId(c.id,this._context.getDocument()))&&(c=c.getId())&&(b+=" id\x3d"+c);return b}},_getChildren:function(a){var b=
[];this._context.rootWidget||console.error("editor context has no root widget yet!");if(!this._context.rootWidget||!a||"state"==a.type||"html.stickynote"==a.type||"html.richtext"==a.type)return[];if("myapp"==a.id||a===this._context.rootNode)b=this._context.getTopWidgets();else{var c=this._getWidget(a);c&&c.getChildren&&(b=this._getWidget(a).getChildren())}return b.filter(function(a){return"xblox/RunScript"==a.type||"xblox/CSSState"==a.type||"xblox/StyleState"==a.type?!0:a&&a.getContext&&a.getContext()&&
!a.internal&&a._srcElement}).map(this._buildItem)},__getChildren:function(a){var b=[];a&&"dijit/form/Button"==a.type&&a.dijitWidget&&dojo.forEach(a.dijitWidget.domNode.children,function(a){(a=davinci.ve.widget.getWidget(a))&&"xblox/RunScript"==a.type&&b.push(a)});return b},mayHaveChildren:function(a){return(a=this._getWidget(a))&&a.type&&0===a.type.indexOf("OpenAjax.")?!1:0<this._getChildren(a).length},getIdentity:function(a){return a?a.id:null},getChildren:function(a,b,c){b(this._getChildren(a))},
put:function(a,b){a=this._getWidget(a);b=a.getParent();this.onChildrenChange(b,this._getChildren(b));return this.getIdentity(a)},add:function(a,b){(b=b||{}).overwrite=!1;return this.put(a,b)},onDelete:function(a){},remove:function(a){this.onDelete(a)},newItem:function(a,b){},pasteItem:function(a,b,c,d,g,h){a&&c&&b&&(c="myapp"==c.id?this._context.rootWidget:this._getWidget(c),b="myapp"==b.id?this._context.rootWidget:this._getWidget(b),a=this._getWidget(a),b!=c||d||dojo.indexOf(b.getChildren(),a)<g&&
g++,a=new k(a,c,g),this._context.getCommandStack().execute(a))},checkItemAcceptance:function(a,b,c){switch(c){case "before":case "after":return!0;default:return a=dijit.getEnclosingWidget(a).item,a=this.tree.model._getWidget(a),a.getContainerNode&&a.getContainerNode()||"myapp"==a.id}},onChildrenChange:function(a,b){},_rebuild:function(){if(!this._skipRefresh){var a=this._context.rootNode;if(a)this.onChildrenChange(this._buildItem(a),this._getChildren(a))}},_widgetChanged:function(a,b,c){try{a===this._context.WIDGET_ADDED?
this.add(b):a===this._context.WIDGET_REMOVED?this.remove(b):a===this._context.WIDGET_MODIFIED?(this.onChange(b),this.onChildrenChange(b,this._getChildren(b))):a===this._context.WIDGET_REPARENTED?(this.remove(b),this.put(b,{overwrite:!0,parent:c[1]})):a===this._context.WIDGET_ID_CHANGED&&(this.remove({id:c}),this.add(b))}catch(w){console.error("VisualEditorOutline._widgetChanged: e \x3d "+w)}g.publish(p.EVENTS.ON_WIDGET_CHANGED,{type:a,widget:b,args:c},this)},toggle:function(a,b,c){a=this._getWidget(a);
var e=a.getHelper(),d=!0;e&&e.onToggleVisibility&&(d=e.onToggleVisibility(a,b));return d?(this._toggle(a,b,c),!0):!1},_toggle:function(a,c,d){c=c?"none":"";var e;if(d=b.getFocus(a.domNode.ownerDocument.body))e=d.state;else{d=b.getStatesListCurrent(a.domNode);for(var g=0;g<d.length;g++)if(d[g]){e=d[g];break}}a=new h(a,[{display:c}],e);this._context.getCommandStack().execute(a)},shouldShowElement:function(a,b){return"toggleNode"==a?"states"!=b.type&&"myapp"!=b.id:!0},_getToggledItemsAttr:function(){var a=
[],b;for(b in this.toggledItems)a.push(b);return a},isToggleOn:function(a){a=this._getWidget(a);var b=a.getHelper();return b&&b.isToggleOn?b.isToggleOn(a):"none"===a.domNode.style.display},_getWidget:function(a){return a?d.byId(a.id):null},_buildItem:function(a){if(a)return{id:a.id,type:a.type}},_connect:function(a,b){this._handles.push(m.connect(this._context,a,this,b))},destroy:function(){this._handles.forEach(m.disconnect)}});return n("davinci.ve.VisualEditorOutline",null,{toolbarID:"davinci.ve.outline",
_outlineMode:"design",constructor:function(b){this._editor=b;this._context=b.visualEditor.context;this._handles=[];this._connect("onSelectionChange","onSelectionChange");this._connect("deselect","deselect");this._widgetModel=new a(this._context);m.subscribe("/maqetta/appstates/state/changed/end",this,function(a){if("davinci.themeEditor.ThemeEditor"!==("undefined"!==typeof davinci&&c.currentEditor&&c.currentEditor.declaredClass)&&this._tree&&(a=a&&a.node&&a.node._dvWidget))for(a=a.getChildren();a.length;){var b=
a.shift();if(b){var e="none"!==b.domNode.style.display;this._tree&&this._tree.toggleNode(b,!e);a=a.concat(b.getChildren())}}})},getActionsID:function(){if("design"===this._outlineMode)return"davinci.ve.VisualEditorOutline"},_connect:function(a,b){this._handles.push(m.connect(this._context,a,this,b))},switchDisplayMode:function(a){this._outlineMode=a;this._outlineView.createTree()},getModel:function(){switch(this._outlineMode){case "design":this._model=this._widgetModel;break;case "source":this._model=
this._srcModel}return this._model},getSelectedItem:function(){return this._tree&&this._tree._getSelectedItemAttr()},onSelectionChange:function(a,b){"design"==this._outlineMode&&(a=a||this._context.getSelection())&&this._tree&&this._tree.selectNode(a,b)},deselect:function(){this._tree&&this._tree&&this._tree.deselectAll()},getIconClass:function(a,b){return(a=a.type)?"xblox/RunScript"==a?"fa fa-play-circle-o":b?"fa fa-circle-thin":"fa fa-circle":b?"fa fa-circle-thin":"fa fa-circle"}})})},"dojo/dom-geometry":function(){define(["./sniff",
"./_base/window","./dom","./dom-style"],function(n,m,k,h){function d(a,b,c,d,g,h){h=h||"px";a=a.style;isNaN(b)||(a.left=b+h);isNaN(c)||(a.top=c+h);0<=d&&(a.width=d+h);0<=g&&(a.height=g+h)}function b(a){return"button"==a.tagName.toLowerCase()||"input"==a.tagName.toLowerCase()&&"button"==(a.getAttribute("type")||"").toLowerCase()}function c(a){return"border-box"==g.boxModel||"table"==a.tagName.toLowerCase()||b(a)}var g={boxModel:"content-box"};n("ie")&&(g.boxModel="BackCompat"==document.compatMode?
"border-box":"content-box");g.getPadExtents=function(a,b){a=k.byId(a);var c=b||h.getComputedStyle(a),e=h.toPixelValue;b=e(a,c.paddingLeft);var d=e(a,c.paddingTop),g=e(a,c.paddingRight);a=e(a,c.paddingBottom);return{l:b,t:d,r:g,b:a,w:b+g,h:d+a}};g.getBorderExtents=function(a,b){a=k.byId(a);var c=h.toPixelValue,e=b||h.getComputedStyle(a);b="none"!=e.borderLeftStyle?c(a,e.borderLeftWidth):0;var d="none"!=e.borderTopStyle?c(a,e.borderTopWidth):0,g="none"!=e.borderRightStyle?c(a,e.borderRightWidth):0;
a="none"!=e.borderBottomStyle?c(a,e.borderBottomWidth):0;return{l:b,t:d,r:g,b:a,w:b+g,h:d+a}};g.getPadBorderExtents=function(a,b){a=k.byId(a);var c=b||h.getComputedStyle(a);b=g.getPadExtents(a,c);a=g.getBorderExtents(a,c);return{l:b.l+a.l,t:b.t+a.t,r:b.r+a.r,b:b.b+a.b,w:b.w+a.w,h:b.h+a.h}};g.getMarginExtents=function(a,b){a=k.byId(a);var c=b||h.getComputedStyle(a),e=h.toPixelValue;b=e(a,c.marginLeft);var d=e(a,c.marginTop),g=e(a,c.marginRight);a=e(a,c.marginBottom);return{l:b,t:d,r:g,b:a,w:b+g,h:d+
a}};g.getMarginBox=function(a,b){a=k.byId(a);if(!a)return console.error("have no node"),{l:0,t:0,w:0,h:0};var c=b||h.getComputedStyle(a);b=g.getMarginExtents(a,c);var e=a.offsetLeft-b.l,d=a.offsetTop-b.t,p=a.parentNode,m=h.toPixelValue;if(n("mozilla")){var x=parseFloat(c.left),c=parseFloat(c.top);isNaN(x)||isNaN(c)?p&&p.style&&(p=h.getComputedStyle(p),"visible"!=p.overflow&&(e+="none"!=p.borderLeftStyle?m(a,p.borderLeftWidth):0,d+="none"!=p.borderTopStyle?m(a,p.borderTopWidth):0)):(e=x,d=c)}else(n("opera")||
8==n("ie")&&!n("quirks"))&&p&&(p=h.getComputedStyle(p),e-="none"!=p.borderLeftStyle?m(a,p.borderLeftWidth):0,d-="none"!=p.borderTopStyle?m(a,p.borderTopWidth):0);return{l:e,t:d,w:a.offsetWidth+b.w,h:a.offsetHeight+b.h}};g.getContentBox=function(a,b){a=k.byId(a);var c=b||h.getComputedStyle(a);b=a.clientWidth;var e=g.getPadExtents(a,c),c=g.getBorderExtents(a,c);b?(a=a.clientHeight,c.w=c.h=0):(b=a.offsetWidth,a=a.offsetHeight);n("opera")&&(e.l+=c.l,e.t+=c.t);return{l:e.l,t:e.t,w:b-e.w-c.w,h:a-e.h-c.h}};
g.setContentSize=function(a,b,h){a=k.byId(a);var e=b.w;b=b.h;c(a)&&(h=g.getPadBorderExtents(a,h),0<=e&&(e+=h.w),0<=b&&(b+=h.h));d(a,NaN,NaN,e,b)};var p={l:0,t:0,w:0,h:0};g.setMarginBox=function(a,e,q){if(a=k.byId(a)){var m=q||h.getComputedStyle(a);q=e.w;var w=e.h,r=c(a)?p:g.getPadBorderExtents(a,m),m=g.getMarginExtents(a,m);if(n("webkit")&&b(a)){var v=a.style;0<=q&&!v.width&&(v.width="4px");0<=w&&!v.height&&(v.height="4px")}0<=q&&(q=Math.max(q-r.w-m.w,0));0<=w&&(w=Math.max(w-r.h-m.h,0));d(a,e.l,e.t,
q,w)}else console.error("have no node")};g.isBodyLtr=function(a){a=a||m.doc;return"ltr"==(m.body(a).dir||a.documentElement.dir||"ltr").toLowerCase()};g.docScroll=function(a){a=a||m.doc;var b=m.doc.parentWindow||m.doc.defaultView;return"pageXOffset"in b?{x:b.pageXOffset,y:b.pageYOffset}:(b=n("quirks")?m.body(a):a.documentElement)&&{x:g.fixIeBiDiScrollLeft(b.scrollLeft||0,a),y:b.scrollTop||0}};g.getIeDocumentElementOffset=function(a){return{x:0,y:0}};g.fixIeBiDiScrollLeft=function(a,b){b=b||m.doc;var c=
n("ie");if(c&&!g.isBodyLtr(b)){var e=n("quirks");b=e?m.body(b):b.documentElement;var d=m.global;6==c&&!e&&d.frameElement&&b.scrollHeight>b.clientHeight&&(a+=b.clientLeft);return 8>c||e?a+b.clientWidth-b.scrollWidth:-a}return a};g.position=function(a,b){a=k.byId(a);var c=m.body(a.ownerDocument),e=a.getBoundingClientRect(),e={x:e.left,y:e.top,w:e.right-e.left,h:e.bottom-e.top};9>n("ie")&&(e.x-=n("quirks")?c.clientLeft+c.offsetLeft:0,e.y-=n("quirks")?c.clientTop+c.offsetTop:0);b&&(a=g.docScroll(a.ownerDocument),
e.x+=a.x,e.y+=a.y);return e};g.getMarginSize=function(a,b){a=k.byId(a);b=g.getMarginExtents(a,b||h.getComputedStyle(a));a=a.getBoundingClientRect();return{w:a.right-a.left+b.w,h:a.bottom-a.top+b.h}};g.normalizeEvent=function(a){"layerX"in a||(a.layerX=a.offsetX,a.layerY=a.offsetY);if(!("pageX"in a)){var b=a.target,b=b&&b.ownerDocument||document,c=n("quirks")?b.body:b.documentElement;a.pageX=a.clientX+g.fixIeBiDiScrollLeft(c.scrollLeft||0,b);a.pageY=a.clientY+(c.scrollTop||0)}};return g})},"xide/factory/Objects":function(){define(["dcl/dcl",
"xide/utils","xide/factory","xdojo/declare"],function(n,m,k,h){k.createInstance=function(d,b,c){var g={};m.mixin(g,b);b=d;if(_.isString(d)&&(b=dojo.getObject(b)||n.getObject(b),!b))return console.error("no such class : "+d),null;c&&(b=h(c,b.prototype));g.id||(g.id=(b.declaredClass||"no_class_").replace(/\//g,"_")+m.createUUID());d=new b(g);d.ctrArgs=g;return d};return k})},"davinci/actions/DownloadAction":function(){define("dojo/_base/declare ./Action ../Workbench ../ui/DownloadSelected system/resource davinci/ui/Resource davinci/lang/ui davinci/lang/actions dijit/form/ValidationTextBox".split(" "),
function(n,m,k,h,d,b,c){return n("davinci.actions.DownloadAction",m,{run:function(){k.showModal(new h,c.downloadFile,{width:"400px"})},isEnabled:function(c){return(c=b.getSelectedResources())&&0<c.length}})})},"xaction/types":function(){define(["xide/types","dojo/_base/lang"],function(n,m){m.mixin(n.EVENTS,{ON_ACTION_CHANGE_CONTEXT:"onChangeActionContext",ON_ACTION_CONTEXT_CHANGED:"onActionContextChanged",REGISTER_ACTION:"registerAction",SET_ITEM_ACTIONS:"onSetItemsActions",ON_CLIPBOARD_COPY:"onClipboardCopy",
ON_CLIPBOARD_PASTE:"onClipboardPaste",ON_CLIPBOARD_CUT:"onClipboardCut",ON_RENDER_ACTIONS:"onRenderActions",ON_DID_ACTION:"onDidAction",ON_AFTER_ACTION:"onAfterAction"});n.ACTION={LAYOUT:"View/Layout",COLUMNS:"View/Columns",SELECTION:"File/Select",CLIPBOARD:"Edit/Clipboard",UNDO:"Edit/Undo",REDO:"Edit/Redo",CLIPBOARD_COPY:"Edit/Clipboard/Copy",CLIPBOARD_PASTE:"Edit/Clipboard/Paste",CLIPBOARD_CUT:"Edit/Clipboard/Cut",COPY:"File/Copy",MOVE:"File/Move",RENAME:"File/Rename",DELETE:"File/Delete",OPEN:"File/Open",
EDIT:"File/Edit",SAVE:"File/Save",SEARCH:"File/Search",TOOLBAR:"View/Show/Toolbar",STATUSBAR:"View/Show/Statusbar",BREADCRUMB:"View/Show/Breadcrumb",HEADER:"View/Show/Header",DOWNLOAD:"File/Download",DOWNLOAD_TO:"File/downloadTo",INFO:"File/Info",COMPRESS:"File/Compress",RELOAD:"File/Reload",UPLOAD:"File/Upload",PREVIEW:"File/Preview",OPEN_IN:"File/Open In",INSERT_IMAGE:"insertImage",COPY_PASTE:"copypaste",DND:"dnd",OPTIONS:"options",NEW_FILE:"File/New/New File",NEW_DIRECTORY:"File/New/New Folder",
GET_CONTENT:"get",SET_CONTENT:"set",FIND:"File/Find",CUSTOM:"custom",PERMA_LINK:"permaLink",ADD_MOUNT:"ADD_MOUNT",REMOVE_MOUNT:"REMOVE_MOUNT",EDIT_MOUNT:"EDIT_MOUNT",PERSPECTIVE:"PERSPECTIVE",RUN:"File/Run",GO_UP:"Navigation/Go Up",STOP:"File/Stop",CLOSE:"View/Close",FULLSCREEN:"View/Fullscreen",OPEN_IN_TAB:"File/OpenInNewTab",SOURCE:"Navigation/Source",RIBBON:"View/Show/Ribbon",MAIN_MENU:"View/Show/MainMenu",NAVIGATION:"View/Show/Navigation",BASH_CONSOLE:"File/Console/Bash",JS_CONSOLE:"File/Console/JS",
PHP_CONSOLE:"File/Console/PHP",CONSOLE:"File/Console/PHP",SIZE_STATS:"View/Show/SizeStats",WELCOME:"Window/Welcome",CONTEXT_MENU:"File/ContextMenu"};n.ACTION_TYPE={MULTI_TOGGLE:"multiToggle",SINGLE_TOGGLE:"singleToggle"};n.ACTION_ICON={CLIPBOARD_COPY:"fa-copy",CLIPBOARD_PASTE:"fa-paste",UPLOAD:"fa-upload",RENAME:"el-icon-edit",DELETE:"text-danger fa-remove",RELOAD:"fa-refresh",EDIT:"fa-pencil",SAVE:"fa-floppy-o",SEARCH:"fa-search",NEW_DIRECTORY:"fa-magic",NEW_FILE:"fa-magic",RUN:"text-success el-icon-play",
COMPRESS:"fa-file-archive-o",EXTRACT:"fa-folder-open",DOWNLOAD:"fa-download",GO_UP:"fa-level-up",TOOLBAR:"fa-bars",STATUSBAR:"fa-terminal",PREVIEW:"fa-eye",MAXIMIZE:"fa-arrows-alt",UNDO:"fa-undo",REDO:"fa-repeat"};return n})},"xideve/xideve":function(){define(["dijit","dojo","dojox"],function(n,m,k){})},"xide/manager/Router":function(){define(["xide/utils"],function(n){var m=function(d,b,c){var g={},h;for(h in d)d.hasOwnProperty(h)&&(g[h]=b.call(c,d[h],h,d));return g},k=function(){var d={};Array.prototype.forEach.call(arguments,
function(b){for(var c in b)b.hasOwnProperty(c)&&(d[c]=b[c])});return d},h=function(d){return Array.isArray(d)?d.map(h):d instanceof RegExp||-1<["string","number","boolean","object"].indexOf(typeof d)||null==d?d:m(d,h)};n=function(d){var b=d.symbols||{},c=b.parametersDelimiters||"\\.|\\/",g=b.parameterStart||"\\{",h=b.parameterMatcher||".*?",a=b.parameterEnd||"\\}";this._NO_HOST={regexp:/.*/,parameters:[]};this._defaultParameterRequirement=b.defaultParameterRequirement||"[^\\/.]*";this._paramsReplaceRegExp=
new RegExp("("+c+")?"+g+"("+h+")"+a,"g");this._defaultMethods=d.defaultMethods||["GET","POST","PUT","DELETE"];this._defaultSchemes=d.defaultSchemes||["http","https"];this._routesDefinitions=this._unifyRoutes(d.routes);this._routes=this._parseRoutes(this._routesDefinitions);this._routeIdToParsedDefinitionMap={}};n.prototype._unifyRoutes=function(d,b){var c=[];d.forEach(function(d){c=c.concat(this._unifyRoute(d,b))},this);return c};n.prototype._unifyRoute=function(d,b){b=b||{};d.defaults=m(k(b.defaults,
d.defaults),function(b){return String(b)});d.requirements=k(b.requirements,d.requirements);b.prefix&&(d.path=b.prefix+d.path,d.prefix=d.prefix?b.prefix+d.prefix:b.prefix);d.host=d.host||b.host;d.methods=d.methods||b.methods||this._defaultMethods;d.schemes=d.schemes||b.schemes||this._defaultSchemes;for(var c in b)b.hasOwnProperty(c)&&"routes"!==c&&!d[c]&&(d[c]=b[c]);return d.routes?this._unifyRoutes(d.routes,d):d};n.prototype._parseRoutes=function(d){return d.map(this._parseRoute,this)};n.prototype._parseRoute=
function(d,b){var c=d.defaults,g=d.requirements,h=d.path,a=d.host,e=a?this._parsePath(a,g,c):this._NO_HOST,k=this._parsePath(h,g,c);return{id:d.id,pattern:k.regexp,path:h,parameters:k.parameters,hostPattern:e.regexp,host:a,hostParameters:e.parameters,requirements:m(g,function(a){return new RegExp("^"+a+"$")}),defaults:c,methods:d.methods,schemes:d.schemes,definition:this._routesDefinitions[b]}};n.prototype._parsePath=function(d,b,c){var g=[],h=this._defaultParameterRequirement;return{regexp:new RegExp("^"+
d.replace(/([\/\.\|])/g,"\\$1").replace(this._paramsReplaceRegExp,function(a,e,d){a=d in c;g.push(d);return(e||"")+(a&&e?"?":"")+"("+(b[d]?b[d]:h)+")"+(a?"?":"")})+"$"),parameters:g}};n.prototype.match=function(d){var b=this._routes,c;c=d.path.split("?");var g=c[0],k=c[1]?this._parseQuery(c[1]):null,a,e,q;d.method="GET";for(var m=0,n=b.length;m<n;m++)if(c=b[m],a=c.pattern.exec(g))if(e=c.hostPattern.exec(d.host))if(q=-1<c.methods.indexOf(d.method))if(q=!d.scheme||-1<c.schemes.indexOf(d.scheme))return a.shift(),
e.shift(),{id:c.id,parameters:this._retrieveParameters(c,a,e,k),definition:h(this._routesDefinitions[m])};return null};n.prototype._parseQuery=function(d){var b={};if("string"!==typeof d||0===d.length)return b;var c=/\+/g;d=d.split("\x26");for(var g=d.length,h=0;h<g;++h){var a=d[h].replace(c,"%20"),e=a.indexOf("\x3d"),k;0<=e?(k=a.substr(0,e),a=a.substr(e+1)):(k=a,a="");k=decodeURIComponent(k);a=decodeURIComponent(a);b.hasOwnProperty(k)?Array.isArray(b[k])?b[k].push(a):b[k]=[b[k],a]:b[k]=a}return b};
n.prototype._retrieveParameters=function(d,b,c,g){g=g||{};for(var h in d.defaults)d.defaults.hasOwnProperty(h)&&(g[h]=d.defaults[h]);this._extendParameters(b,d.parameters,g);this._extendParameters(c,d.hostParameters,g);return g};n.prototype._extendParameters=function(d,b,c){for(var g=0,h=b.length;g<h&&void 0!==d[g];g++)c[b[g]]=decodeURIComponent(d[g])};n.prototype.generate=function(d,b){for(var c=this._routes,g,h=0,a=c.length;h<a;h++)if(g=c[h],g.id===d)return this._generate(g,k({},b));throw Error("No such route: "+
d);};n.prototype._generate=function(d,b){var c,g=d.host,h,a=d.defaults,e=d.requirements,k=this;c=d.path.replace(this._paramsReplaceRegExp,function(c,g,h){g=g||"";c=h in a;if(b&&h in b)return k._getParameterValue(h,b,e,g);c||k._throwParameterNeededError(h,d.id);c=!1;for(var p in b)if(b.hasOwnProperty(p)&&-1<d.parameters.indexOf(p)){c=!0;break}return c?g+a[h]:""});g&&(h=g.replace(this._paramsReplaceRegExp,function(c,g,h){c=h in a;var p=b&&h in b;g=g||"";if(p)return k._getParameterValue(h,b,e,g);if(c)return g+
a[h];k._throwParameterNeededError(h,d.id)}));(g=this._generateQuery(b))&&(c+="?"+g);return h?d.schemes[0]+"://"+h+c:c};n.prototype._generateQuery=function(d){var b="",c;for(c in d)d.hasOwnProperty(c)&&(b+=(b.length?"\x26":"")+encodeURIComponent(c)+"\x3d"+encodeURIComponent(d[c]));return b};n.prototype._getParameterValue=function(d,b,c,g){var h=b[d];delete b[d];if(c[d]&&!c[d].test(h))throw Error('Parameter "'+d+'" has bad value "'+h+'", not suitable for path generation');return g+encodeURIComponent(h)};
n.prototype._throwParameterNeededError=function(d,b){throw Error('Parameter "'+d+'" is needed for route "'+b+'" generation');};n.prototype.getRouteInfo=function(d){if(!this._routeIdToParsedDefinitionMap[d])for(var b=0,c=this._routes.length;b<c;b++)if(this._routes[b].id===d){this._routeIdToParsedDefinitionMap[d]=this._routes[b];break}if(!this._routeIdToParsedDefinitionMap[d])throw Error("No such route: "+d);return h(this._routeIdToParsedDefinitionMap[d])};return n})},"xace/lib_jsbeautify":function(){define(["require",
"exports","module"],function(n,m,k){var h=k.exports={};(function(){function d(a,b){for(var c=0;c<b.length;c+=1)if(b[c]===a)return!0;return!1}function b(a){return a.replace(/^\s+|\s+$/g,"")}function c(a,b){return(new g(a,b)).beautify()}function g(c,g){function h(a,b){var c=0;a&&(c=a.indentation_level,!N.just_added_newline()&&a.line_indent_level>c&&(c=a.line_indent_level));return{mode:b,parent:a,last_text:a?a.last_text:"",last_word:a?a.last_word:"",declaration_statement:!1,declaration_assignment:!1,
multiline_frame:!1,if_block:!1,else_block:!1,do_block:!1,do_while:!1,in_case_statement:!1,in_case:!1,case_body:!1,indentation_level:c,line_indent_level:a?a.line_indent_level:c,start_line_index:N.get_line_number(),ternary_depth:0}}function k(a){var b=a.newlines;if(R.keep_array_indentation&&I.mode===m.ArrayLiteral)for(c=0;c<b;c+=1)q(0<c);else if(R.max_preserve_newlines&&b>R.max_preserve_newlines&&(b=R.max_preserve_newlines),R.preserve_newlines&&1<a.newlines){q();for(var c=1;c<b;c+=1)q(!0)}K=a;W[K.type]()}
function p(a){a=void 0===a?!1:a;N.just_added_newline()||(R.preserve_newlines&&K.wanted_newline||a?q(!1,!0):R.wrap_line_length&&N.current_line.get_character_count()+K.text.length+(N.space_before_token?1:0)>=R.wrap_line_length&&q(!1,!0))}function q(a,b){if(!b&&";"!==I.last_text&&","!==I.last_text&&"\x3d"!==I.last_text&&"TK_OPERATOR"!==M)for(;I.mode===m.Statement&&!I.if_block&&!I.do_block;)u();N.add_new_line(a)&&(I.multiline_frame=!0)}function n(a){a=a||K.text;N.just_added_newline()&&(R.keep_array_indentation&&
I.mode===m.ArrayLiteral&&K.wanted_newline?(N.current_line.push(K.whitespace_before),N.space_before_token=!1):N.set_indent(I.indentation_level)&&(I.line_indent_level=I.indentation_level));N.add_token(a)}function r(a){I?(Z.push(I),T=I):T=h(null,a);I=h(T,a)}function v(a){return d(a,[m.Expression,m.ForInitializer,m.Conditional])}function u(){0<Z.length&&(T=I,I=Z.pop(),T.mode===m.Statement&&N.remove_redundant_indentation(T))}function w(){return I.parent.mode===m.ObjectLiteral&&I.mode===m.Statement&&(":"===
I.last_text&&0===I.ternary_depth||"TK_RESERVED"===M&&d(I.last_text,["get","set"]))}function D(){return"TK_RESERVED"===M&&d(I.last_text,["var","let","const"])&&"TK_WORD"===K.type||"TK_RESERVED"===M&&"do"===I.last_text||"TK_RESERVED"===M&&"return"===I.last_text&&!K.wanted_newline||"TK_RESERVED"===M&&"else"===I.last_text&&("TK_RESERVED"!==K.type||"if"!==K.text)||"TK_END_EXPR"===M&&(T.mode===m.ForInitializer||T.mode===m.Conditional)||"TK_WORD"===M&&I.mode===m.BlockStatement&&!I.in_case&&"--"!==K.text&&
"++"!==K.text&&"TK_WORD"!==K.type&&"TK_RESERVED"!==K.type||I.mode===m.ObjectLiteral&&(":"===I.last_text&&0===I.ternary_depth||"TK_RESERVED"===M&&d(I.last_text,["get","set"]))?(r(m.Statement),I.indentation_level+=1,"TK_RESERVED"===M&&d(I.last_text,["var","let","const"])&&"TK_WORD"===K.type&&(I.declaration_statement=!0),w()||p("TK_RESERVED"===K.type&&d(K.text,["do","for","if","while"])),!0):!1}function H(a){return d(a,"case return do if throw else".split(" "))}function J(a){a=P+(a||0);return 0>a||a>=
O.length?null:O[a]}function Q(){"TK_RESERVED"===K.type&&I.mode!==m.ObjectLiteral&&d(K.text,["set","get"])&&(K.type="TK_WORD");"TK_RESERVED"===K.type&&I.mode===m.ObjectLiteral&&":"==J(1).text&&(K.type="TK_WORD");D()||!K.wanted_newline||v(I.mode)||"TK_OPERATOR"===M&&"--"!==I.last_text&&"++"!==I.last_text||"TK_EQUALS"===M||!R.preserve_newlines&&"TK_RESERVED"===M&&d(I.last_text,["var","let","const","set","get"])||q();if(I.do_block&&!I.do_while){if("TK_RESERVED"===K.type&&"while"===K.text){N.space_before_token=
!0;n();N.space_before_token=!0;I.do_while=!0;return}q();I.do_block=!1}if(I.if_block)if(I.else_block||"TK_RESERVED"!==K.type||"else"!==K.text){for(;I.mode===m.Statement;)u();I.if_block=!1;I.else_block=!1}else I.else_block=!0;if("TK_RESERVED"===K.type&&("case"===K.text||"default"===K.text&&I.in_case_statement)){q();if(I.case_body||R.jslint_happy)0<I.indentation_level&&(!I.parent||I.indentation_level>I.parent.indentation_level)&&--I.indentation_level,I.case_body=!1;n();I.in_case=!0;I.in_case_statement=
!0}else{"TK_RESERVED"===K.type&&"function"===K.text&&(!(d(I.last_text,["}",";"])||N.just_added_newline()&&!d(I.last_text,["[","{",":","\x3d",","]))||N.just_added_blankline()||K.comments_before.length||(q(),q(!0)),"TK_RESERVED"===M||"TK_WORD"===M?"TK_RESERVED"===M&&d(I.last_text,["get","set","new","return","export"])?N.space_before_token=!0:"TK_RESERVED"===M&&"default"===I.last_text&&"export"===U?N.space_before_token=!0:q():"TK_OPERATOR"===M||"\x3d"===I.last_text?N.space_before_token=!0:(I.multiline_frame||
!v(I.mode)&&I.mode!==m.ArrayLiteral)&&q());if("TK_COMMA"===M||"TK_START_EXPR"===M||"TK_EQUALS"===M||"TK_OPERATOR"===M)w()||p();"TK_RESERVED"===K.type&&d(K.text,["function","get","set"])?(n(),I.last_word=K.text):(S="NONE","TK_END_BLOCK"===M?"TK_RESERVED"===K.type&&d(K.text,["else","catch","finally"])?"expand"===R.brace_style||"end-expand"===R.brace_style||"none"===R.brace_style&&K.wanted_newline?S="NEWLINE":(S="SPACE",N.space_before_token=!0):S="NEWLINE":"TK_SEMICOLON"===M&&I.mode===m.BlockStatement?
S="NEWLINE":"TK_SEMICOLON"===M&&v(I.mode)?S="SPACE":"TK_STRING"===M?S="NEWLINE":"TK_RESERVED"===M||"TK_WORD"===M||"*"===I.last_text&&"function"===U?S="SPACE":"TK_START_BLOCK"===M?S="NEWLINE":"TK_END_EXPR"===M&&(N.space_before_token=!0,S="NEWLINE"),"TK_RESERVED"===K.type&&d(K.text,L.line_starters)&&")"!==I.last_text&&(S="else"===I.last_text||"export"===I.last_text?"SPACE":"NEWLINE"),"TK_RESERVED"===K.type&&d(K.text,["else","catch","finally"])?"TK_END_BLOCK"!==M||"expand"===R.brace_style||"end-expand"===
R.brace_style||"none"===R.brace_style&&K.wanted_newline?q():(N.trim(!0),"}"!==N.current_line.last()&&q(),N.space_before_token=!0):"NEWLINE"===S?"TK_RESERVED"===M&&H(I.last_text)?N.space_before_token=!0:"TK_END_EXPR"!==M?"TK_START_EXPR"===M&&"TK_RESERVED"===K.type&&d(K.text,["var","let","const"])||":"===I.last_text||("TK_RESERVED"===K.type&&"if"===K.text&&"else"===I.last_text?N.space_before_token=!0:q()):"TK_RESERVED"===K.type&&d(K.text,L.line_starters)&&")"!==I.last_text&&q():I.multiline_frame&&I.mode===
m.ArrayLiteral&&","===I.last_text&&"}"===U?q():"SPACE"===S&&(N.space_before_token=!0),n(),I.last_word=K.text,"TK_RESERVED"===K.type&&"do"===K.text&&(I.do_block=!0),"TK_RESERVED"===K.type&&"if"===K.text&&(I.if_block=!0))}}var N,O=[],P,L,K,M,U,V,I,T,Z,S,W,R,Y="";W={TK_START_EXPR:function(){D();var a=m.Expression;if("["===K.text){if("TK_WORD"===M||")"===I.last_text){"TK_RESERVED"===M&&d(I.last_text,L.line_starters)&&(N.space_before_token=!0);r(a);n();I.indentation_level+=1;R.space_in_paren&&(N.space_before_token=
!0);return}a=m.ArrayLiteral;I.mode!==m.ArrayLiteral||"["!==I.last_text&&(","!==I.last_text||"]"!==U&&"}"!==U)||R.keep_array_indentation||q()}else"TK_RESERVED"===M&&"for"===I.last_text?a=m.ForInitializer:"TK_RESERVED"===M&&d(I.last_text,["if","while"])&&(a=m.Conditional);";"===I.last_text||"TK_START_BLOCK"===M?q():"TK_END_EXPR"===M||"TK_START_EXPR"===M||"TK_END_BLOCK"===M||"."===I.last_text?p(K.wanted_newline):"TK_RESERVED"===M&&"("===K.text||"TK_WORD"===M||"TK_OPERATOR"===M?"TK_RESERVED"===M&&("function"===
I.last_word||"typeof"===I.last_word)||"*"===I.last_text&&"function"===U?R.space_after_anon_function&&(N.space_before_token=!0):"TK_RESERVED"===M&&(d(I.last_text,L.line_starters)||"catch"===I.last_text)&&R.space_before_conditional&&(N.space_before_token=!0):N.space_before_token=!0;"("!==K.text||"TK_EQUALS"!==M&&"TK_OPERATOR"!==M||w()||p();r(a);n();R.space_in_paren&&(N.space_before_token=!0);I.indentation_level+=1},TK_END_EXPR:function(){for(;I.mode===m.Statement;)u();I.multiline_frame&&p("]"===K.text&&
I.mode===m.ArrayLiteral&&!R.keep_array_indentation);R.space_in_paren&&("TK_START_EXPR"!==M||R.space_in_empty_paren?N.space_before_token=!0:(N.trim(),N.space_before_token=!1));"]"===K.text&&R.keep_array_indentation?(n(),u()):(u(),n());N.remove_redundant_indentation(T);I.do_while&&T.mode===m.Conditional&&(T.mode=m.Expression,I.do_block=!1,I.do_while=!1)},TK_START_BLOCK:function(){var a=J(1),b=J(2);b&&(":"===b.text&&d(a.type,["TK_STRING","TK_WORD","TK_RESERVED"])||d(a.text,["get","set"])&&d(b.type,["TK_WORD",
"TK_RESERVED"]))?d(U,["class","interface"])?r(m.BlockStatement):r(m.ObjectLiteral):r(m.BlockStatement);a=!a.comments_before.length&&"}"===a.text&&"function"===I.last_word&&"TK_END_EXPR"===M;"expand"===R.brace_style||"none"===R.brace_style&&K.wanted_newline?"TK_OPERATOR"!==M&&(a||"TK_EQUALS"===M||"TK_RESERVED"===M&&H(I.last_text)&&"else"!==I.last_text)?N.space_before_token=!0:q(!1,!0):"TK_OPERATOR"!==M&&"TK_START_EXPR"!==M?"TK_START_BLOCK"===M?q():N.space_before_token=!0:T.mode===m.ArrayLiteral&&","===
I.last_text&&("}"===U?N.space_before_token=!0:q());n();I.indentation_level+=1},TK_END_BLOCK:function(){for(;I.mode===m.Statement;)u();var a="TK_START_BLOCK"===M;"expand"===R.brace_style?a||q():a||(I.mode===m.ArrayLiteral&&R.keep_array_indentation?(R.keep_array_indentation=!1,q(),R.keep_array_indentation=!0):q());u();n()},TK_WORD:Q,TK_RESERVED:Q,TK_SEMICOLON:function(){D()&&(N.space_before_token=!1);for(;I.mode===m.Statement&&!I.if_block&&!I.do_block;)u();n()},TK_STRING:function(){D()?N.space_before_token=
!0:"TK_RESERVED"===M||"TK_WORD"===M?N.space_before_token=!0:"TK_COMMA"===M||"TK_START_EXPR"===M||"TK_EQUALS"===M||"TK_OPERATOR"===M?w()||p():q();n()},TK_EQUALS:function(){D();I.declaration_statement&&(I.declaration_assignment=!0);N.space_before_token=!0;n();N.space_before_token=!0},TK_OPERATOR:function(){D();if("TK_RESERVED"===M&&H(I.last_text))N.space_before_token=!0,n();else if("*"===K.text&&"TK_DOT"===M)n();else if(":"===K.text&&I.in_case)I.case_body=!0,I.indentation_level+=1,n(),q(),I.in_case=
!1;else if("::"===K.text)n();else{!K.wanted_newline||"--"!==K.text&&"++"!==K.text||q(!1,!0);"TK_OPERATOR"===M&&p();var a=!0,b=!0;d(K.text,["--","++","!","~"])||d(K.text,["-","+"])&&(d(M,["TK_START_BLOCK","TK_START_EXPR","TK_EQUALS","TK_OPERATOR"])||d(I.last_text,L.line_starters)||","===I.last_text)?(b=a=!1,";"===I.last_text&&v(I.mode)&&(a=!0),"TK_RESERVED"===M||"TK_END_EXPR"===M?a=!0:"TK_OPERATOR"===M&&(a=d(K.text,["--","-"])&&d(I.last_text,["--","-"])||d(K.text,["++","+"])&&d(I.last_text,["++","+"])),
I.mode!==m.BlockStatement&&I.mode!==m.Statement||"{"!==I.last_text&&";"!==I.last_text||q()):":"===K.text?0===I.ternary_depth?a=!1:--I.ternary_depth:"?"===K.text?I.ternary_depth+=1:"*"===K.text&&"TK_RESERVED"===M&&"function"===I.last_text&&(b=a=!1);N.space_before_token=N.space_before_token||a;n();N.space_before_token=b}},TK_COMMA:function(){I.declaration_statement?(v(I.parent.mode)&&(I.declaration_assignment=!1),n(),I.declaration_assignment?(I.declaration_assignment=!1,q(!1,!0)):N.space_before_token=
!0):(n(),I.mode===m.ObjectLiteral||I.mode===m.Statement&&I.parent.mode===m.ObjectLiteral?(I.mode===m.Statement&&u(),q()):N.space_before_token=!0)},TK_BLOCK_COMMENT:function(){for(var a=K.text,a=a.replace(/\x0d/g,""),c=[],e=a.indexOf("\n");-1!==e;)c.push(a.substring(0,e)),a=a.substring(e+1),e=a.indexOf("\n");a.length&&c.push(a);var d,e=a=!1;d=K.whitespace_before;var g=d.length;q(!1,!0);if(1<c.length){var h;a:{h=c.slice(1);for(var k=0;k<h.length;k++)if("*"!==b(h[k]).charAt(0)){h=!1;break a}h=!0}if(h)a=
!0;else{a:{h=c.slice(1);for(var k=0,p=h.length,m;k<p;k++)if((m=h[k])&&0!==m.indexOf(d)){d=!1;break a}d=!0}d&&(e=!0)}}n(c[0]);for(d=1;d<c.length;d++)q(!1,!0),a?n(" "+b(c[d])):e&&c[d].length>g?n(c[d].substring(g)):N.add_token(c[d]);q(!1,!0)},TK_INLINE_COMMENT:function(){N.space_before_token=!0;n();N.space_before_token=!0},TK_COMMENT:function(){K.wanted_newline?q(!1,!0):N.trim(!0);N.space_before_token=!0;n();q(!1,!0)},TK_DOT:function(){D();"TK_RESERVED"===M&&H(I.last_text)?N.space_before_token=!0:p(")"===
I.last_text&&R.break_chained_methods);n()},TK_UNKNOWN:function(){n();"\n"===K.text[K.text.length-1]&&q()},TK_EOF:function(){for(;I.mode===m.Statement;)u()}};g=g?g:{};R={};void 0!==g.braces_on_own_line&&(R.brace_style=g.braces_on_own_line?"expand":"collapse");R.brace_style=g.brace_style?g.brace_style:R.brace_style?R.brace_style:"collapse";"expand-strict"===R.brace_style&&(R.brace_style="expand");R.indent_size=g.indent_size?parseInt(g.indent_size,10):4;R.indent_char=g.indent_char?g.indent_char:" ";
R.preserve_newlines=void 0===g.preserve_newlines?!0:g.preserve_newlines;R.break_chained_methods=void 0===g.break_chained_methods?!1:g.break_chained_methods;R.max_preserve_newlines=void 0===g.max_preserve_newlines?0:parseInt(g.max_preserve_newlines,10);R.space_in_paren=void 0===g.space_in_paren?!1:g.space_in_paren;R.space_in_empty_paren=void 0===g.space_in_empty_paren?!1:g.space_in_empty_paren;R.jslint_happy=void 0===g.jslint_happy?!1:g.jslint_happy;R.space_after_anon_function=void 0===g.space_after_anon_function?
!1:g.space_after_anon_function;R.keep_array_indentation=void 0===g.keep_array_indentation?!1:g.keep_array_indentation;R.space_before_conditional=void 0===g.space_before_conditional?!0:g.space_before_conditional;R.unescape_strings=void 0===g.unescape_strings?!1:g.unescape_strings;R.wrap_line_length=void 0===g.wrap_line_length?0:parseInt(g.wrap_line_length,10);R.e4x=void 0===g.e4x?!1:g.e4x;R.end_with_newline=void 0===g.end_with_newline?!1:g.end_with_newline;R.jslint_happy&&(R.space_after_anon_function=
!0);g.indent_with_tabs&&(R.indent_char="\t",R.indent_size=1);for(V="";0<R.indent_size;)V+=R.indent_char,--R.indent_size;g=0;if(c&&c.length){for(;" "===c.charAt(g)||"\t"===c.charAt(g);)Y+=c.charAt(g),g+=1;c=c.substring(g)}M="TK_START_BLOCK";U="";N=new a(V,Y);Z=[];r(m.BlockStatement);this.beautify=function(){var a;L=new e(c,R,V);O=L.tokenize();for(P=0;a=J();){for(var b=0;b<a.comments_before.length;b++)k(a.comments_before[b]);k(a);U=I.last_text;M=a.type;I.last_text=a.text;P+=1}a=N.get_code();R.end_with_newline&&
(a+="\n");return a}}function k(a){var b=0,c=-1,e=[],d=!0;this.set_indent=function(e){b=a.baseIndentLength+e*a.indent_length;c=e};this.get_character_count=function(){return b};this.is_empty=function(){return d};this.last=function(){return this._empty?null:e[e.length-1]};this.push=function(a){e.push(a);b+=a.length;d=!1};this.remove_indent=function(){0<c&&(--c,b-=a.indent_length)};this.trim=function(){for(;" "===this.last();)e.pop(),--b;d=0===e.length};this.toString=function(){var b="";this._empty||
(0<=c&&(b=a.indent_cache[c]),b+=e.join(""));return b}}function a(a,b){b=b||"";this.indent_cache=[b];this.baseIndentLength=b.length;this.indent_length=a.length;var c=[];this.baseIndentString=b;this.indent_string=a;this.current_line=null;this.space_before_token=!1;this.get_line_number=function(){return c.length};this.add_new_line=function(a){return 1===this.get_line_number()&&this.just_added_newline()?!1:a||!this.just_added_newline()?(this.current_line=new k(this),c.push(this.current_line),!0):!1};
this.add_new_line(!0);this.get_code=function(){return c.join("\n").replace(/[\r\n\t ]+$/,"")};this.set_indent=function(a){if(1<c.length){for(;a>=this.indent_cache.length;)this.indent_cache.push(this.indent_cache[this.indent_cache.length-1]+this.indent_string);this.current_line.set_indent(a);return!0}this.current_line.set_indent(0);return!1};this.add_token=function(a){this.add_space_before_token();this.current_line.push(a)};this.add_space_before_token=function(){this.space_before_token&&!this.just_added_newline()&&
this.current_line.push(" ");this.space_before_token=!1};this.remove_redundant_indentation=function(a){if(!a.multiline_frame&&a.mode!==m.ForInitializer&&a.mode!==m.Conditional){a=a.start_line_index;for(var b=c.length;a<b;)c[a].remove_indent(),a++}};this.trim=function(e){e=void 0===e?!1:e;for(this.current_line.trim(a,b);e&&1<c.length&&this.current_line.is_empty();)c.pop(),this.current_line=c[c.length-1],this.current_line.trim()};this.just_added_newline=function(){return this.current_line.is_empty()};
this.just_added_blankline=function(){return this.just_added_newline()?1===c.length?!0:c[c.length-2].is_empty():!1}}function e(a,c,e){function g(){var g,z=[];r=0;v="";if(x>=J)return["","TK_EOF"];var A;A=w.length?w[w.length-1]:new n("TK_START_BLOCK","{");var y=a.charAt(x);for(x+=1;d(y,h);){"\n"===y?(r+=1,z=[]):r&&(y===e?z.push(e):"\r"!==y&&z.push(" "));if(x>=J)return["","TK_EOF"];y=a.charAt(x);x+=1}z.length&&(v=z.join(""));if(k.test(y)){var z=A=!0,F=k;"0"===y&&x<J&&/[Xx]/.test(a.charAt(x))?(z=A=!1,
y+=a.charAt(x),x+=1,F=/[0123456789abcdefABCDEF]/):(y="",--x);for(;x<J&&F.test(a.charAt(x));)y+=a.charAt(x),x+=1,A&&x<J&&"."===a.charAt(x)&&(y+=a.charAt(x),x+=1,A=!1),z&&x<J&&/[Ee]/.test(a.charAt(x))&&(y+=a.charAt(x),x+=1,x<J&&/[+-]/.test(a.charAt(x))&&(y+=a.charAt(x),x+=1),A=z=!1);return[y,"TK_WORD"]}if(q.isIdentifierStart(a.charCodeAt(x-1))){if(x<J)for(;q.isIdentifierChar(a.charCodeAt(x))&&(y+=a.charAt(x),x+=1,x!==J););return"TK_DOT"===A.type||"TK_RESERVED"===A.type&&d(A.text,["set","get"])||!d(y,
m)?[y,"TK_WORD"]:"in"===y?[y,"TK_OPERATOR"]:[y,"TK_RESERVED"]}if("("===y||"["===y)return[y,"TK_START_EXPR"];if(")"===y||"]"===y)return[y,"TK_END_EXPR"];if("{"===y)return[y,"TK_START_BLOCK"];if("}"===y)return[y,"TK_END_BLOCK"];if(";"===y)return[y,"TK_SEMICOLON"];if("/"===y){z="";F=!0;if("*"===a.charAt(x)){x+=1;if(x<J)for(;x<J&&("*"!==a.charAt(x)||!a.charAt(x+1)||"/"!==a.charAt(x+1));){y=a.charAt(x);z+=y;if("\n"===y||"\r"===y)F=!1;x+=1;if(x>=J)break}x+=2;return F&&0===r?["/*"+z+"*/","TK_INLINE_COMMENT"]:
["/*"+z+"*/","TK_BLOCK_COMMENT"]}if("/"===a.charAt(x)){for(z=y;"\r"!==a.charAt(x)&&"\n"!==a.charAt(x)&&!(z+=a.charAt(x),x+=1,x>=J););return[z,"TK_COMMENT"]}}if("`"===y||"'"===y||'"'===y||("/"===y||c.e4x&&"\x3c"===y&&a.slice(x-1).match(/^<([-a-zA-Z:0-9_.]+|{[^{}]*}|!\[CDATA\[[\s\S]*?\]\])\s*([-a-zA-Z:0-9_.]+=('[^']*'|"[^"]*"|{[^{}]*})\s*)*\/?\s*>/))&&("TK_RESERVED"===A.type&&d(A.text,"return case throw else do typeof yield".split(" "))||"TK_END_EXPR"===A.type&&")"===A.text&&A.parent&&"TK_RESERVED"===
A.parent.type&&d(A.parent.text,["if","while","for"])||d(A.type,"TK_COMMENT TK_START_EXPR TK_START_BLOCK TK_END_BLOCK TK_OPERATOR TK_EQUALS TK_EOF TK_SEMICOLON TK_COMMA".split(" ")))){A=y;var B=z=!1;g=y;if("/"===A)for(y=!1;x<J&&(z||y||a.charAt(x)!==A)&&!q.newline.test(a.charAt(x));)g+=a.charAt(x),z?z=!1:(z="\\"===a.charAt(x),"["===a.charAt(x)?y=!0:"]"===a.charAt(x)&&(y=!1)),x+=1;else if(c.e4x&&"\x3c"===A){if(z=/<(\/?)([-a-zA-Z:0-9_.]+|{[^{}]*}|!\[CDATA\[[\s\S]*?\]\])\s*([-a-zA-Z:0-9_.]+=('[^']*'|"[^"]*"|{[^{}]*})\s*)*(\/?)\s*>/g,
y=a.slice(x-1),(F=z.exec(y))&&0===F.index){A=F[2];for(g=0;F;){var B=!!F[1],C=F[2],E=!!F[F.length-1]||"![CDATA["===C.slice(0,8);C!==A||E||(B?--g:++g);if(0>=g)break;F=z.exec(y)}A=F?F.index+F[0].length:y.length;x+=A-1;return[y.slice(0,A),"TK_STRING"]}}else for(;x<J&&(z||a.charAt(x)!==A&&("`"===A||!q.newline.test(a.charAt(x))));){g+=a.charAt(x);if(z){if("x"===a.charAt(x)||"u"===a.charAt(x))B=!0;z=!1}else z="\\"===a.charAt(x);x+=1}if(B&&c.unescape_strings)a:{y=g;z=!1;F="";g=0;B="";for(C=0;z||g<y.length;)if(E=
y.charAt(g),g++,z){z=!1;if("x"===E)B=y.substr(g,2),g+=2;else if("u"===E)B=y.substr(g,4),g+=4;else{F+="\\"+E;continue}if(!B.match(/^[0123456789abcdefABCDEF]+$/)){g=y;break a}C=parseInt(B,16);if(0<=C&&32>C)F="x"===E?F+("\\x"+B):F+("\\u"+B);else if(34===C||39===C||92===C)F+="\\"+String.fromCharCode(C);else if("x"===E&&126<C&&255>=C){g=y;break a}else F+=String.fromCharCode(C)}else"\\"===E?z=!0:F+=E;g=F}if(x<J&&a.charAt(x)===A&&(g+=A,x+=1,"/"===A))for(;x<J&&q.isIdentifierStart(a.charCodeAt(x));)g+=a.charAt(x),
x+=1;return[g,"TK_STRING"]}if("#"===y){if(0===w.length&&"!"===a.charAt(x)){for(g=y;x<J&&"\n"!==y;)y=a.charAt(x),g+=y,x+=1;return[b(g)+"\n","TK_UNKNOWN"]}A="#";if(x<J&&k.test(a.charAt(x))){do y=a.charAt(x),A+=y,x+=1;while(x<J&&"#"!==y&&"\x3d"!==y);"#"!==y&&("["===a.charAt(x)&&"]"===a.charAt(x+1)?(A+="[]",x+=2):"{"===a.charAt(x)&&"}"===a.charAt(x+1)&&(A+="{}",x+=2));return[A,"TK_WORD"]}}if("\x3c"===y&&"\x3c!--"===a.substring(x-1,x+3)){x+=3;for(y="\x3c!--";"\n"!==a.charAt(x)&&x<J;)y+=a.charAt(x),x++;
u=!0;return[y,"TK_COMMENT"]}if("-"===y&&u&&"--\x3e"===a.substring(x-1,x+2))return u=!1,x+=2,["--\x3e","TK_COMMENT"];if("."===y)return[y,"TK_DOT"];if(d(y,p)){for(;x<J&&d(y+a.charAt(x),p)&&!(y+=a.charAt(x),x+=1,x>=J););return","===y?[y,"TK_COMMA"]:"\x3d"===y?[y,"TK_EQUALS"]:[y,"TK_OPERATOR"]}return[y,"TK_UNKNOWN"]}var h=["\n","\r","\t"," "],k=/[0-9]/,p="+ - * / % \x26 ++ -- \x3d +\x3d -\x3d *\x3d /\x3d %\x3d \x3d\x3d \x3d\x3d\x3d !\x3d !\x3d\x3d \x3e \x3c \x3e\x3d \x3c\x3d \x3e\x3e \x3c\x3c \x3e\x3e\x3e \x3e\x3e\x3e\x3d \x3e\x3e\x3d \x3c\x3c\x3d \x26\x26 \x26\x3d | || ! ~ , : ? ^ ^\x3d |\x3d :: \x3d\x3e \x3c%\x3d \x3c% %\x3e \x3c?\x3d \x3c? ?\x3e".split(" ");
this.line_starters="continue try throw return var let const if switch case default for while break function yield import export".split(" ");var m=this.line_starters.concat("do in else get set new catch finally typeof".split(" ")),r,v,u,w,x,J;this.tokenize=function(){J=a.length;x=0;u=!1;w=[];for(var b,c,e=null,d=[],h=[];!c||"TK_EOF"!==c.type;){b=g();for(b=new n(b[1],b[0],r,v);"TK_INLINE_COMMENT"===b.type||"TK_COMMENT"===b.type||"TK_BLOCK_COMMENT"===b.type||"TK_UNKNOWN"===b.type;)h.push(b),b=g(),b=
new n(b[1],b[0],r,v);h.length&&(b.comments_before=h,h=[]);"TK_START_BLOCK"===b.type||"TK_START_EXPR"===b.type?(b.parent=c,e=b,d.push(b)):("TK_END_BLOCK"===b.type||"TK_END_EXPR"===b.type)&&e&&("]"===b.text&&"["===e.text||")"===b.text&&"("===e.text||"}"===b.text&&"}"===e.text)&&(b.parent=e.parent,e=d.pop());w.push(b);c=b}return w}}var q={};(function(a){var b=/[\u00aa\u00b5\u00ba\u00c0-\u00d6\u00d8-\u00f6\u00f8-\u02c1\u02c6-\u02d1\u02e0-\u02e4\u02ec\u02ee\u0370-\u0374\u0376\u0377\u037a-\u037d\u0386\u0388-\u038a\u038c\u038e-\u03a1\u03a3-\u03f5\u03f7-\u0481\u048a-\u0527\u0531-\u0556\u0559\u0561-\u0587\u05d0-\u05ea\u05f0-\u05f2\u0620-\u064a\u066e\u066f\u0671-\u06d3\u06d5\u06e5\u06e6\u06ee\u06ef\u06fa-\u06fc\u06ff\u0710\u0712-\u072f\u074d-\u07a5\u07b1\u07ca-\u07ea\u07f4\u07f5\u07fa\u0800-\u0815\u081a\u0824\u0828\u0840-\u0858\u08a0\u08a2-\u08ac\u0904-\u0939\u093d\u0950\u0958-\u0961\u0971-\u0977\u0979-\u097f\u0985-\u098c\u098f\u0990\u0993-\u09a8\u09aa-\u09b0\u09b2\u09b6-\u09b9\u09bd\u09ce\u09dc\u09dd\u09df-\u09e1\u09f0\u09f1\u0a05-\u0a0a\u0a0f\u0a10\u0a13-\u0a28\u0a2a-\u0a30\u0a32\u0a33\u0a35\u0a36\u0a38\u0a39\u0a59-\u0a5c\u0a5e\u0a72-\u0a74\u0a85-\u0a8d\u0a8f-\u0a91\u0a93-\u0aa8\u0aaa-\u0ab0\u0ab2\u0ab3\u0ab5-\u0ab9\u0abd\u0ad0\u0ae0\u0ae1\u0b05-\u0b0c\u0b0f\u0b10\u0b13-\u0b28\u0b2a-\u0b30\u0b32\u0b33\u0b35-\u0b39\u0b3d\u0b5c\u0b5d\u0b5f-\u0b61\u0b71\u0b83\u0b85-\u0b8a\u0b8e-\u0b90\u0b92-\u0b95\u0b99\u0b9a\u0b9c\u0b9e\u0b9f\u0ba3\u0ba4\u0ba8-\u0baa\u0bae-\u0bb9\u0bd0\u0c05-\u0c0c\u0c0e-\u0c10\u0c12-\u0c28\u0c2a-\u0c33\u0c35-\u0c39\u0c3d\u0c58\u0c59\u0c60\u0c61\u0c85-\u0c8c\u0c8e-\u0c90\u0c92-\u0ca8\u0caa-\u0cb3\u0cb5-\u0cb9\u0cbd\u0cde\u0ce0\u0ce1\u0cf1\u0cf2\u0d05-\u0d0c\u0d0e-\u0d10\u0d12-\u0d3a\u0d3d\u0d4e\u0d60\u0d61\u0d7a-\u0d7f\u0d85-\u0d96\u0d9a-\u0db1\u0db3-\u0dbb\u0dbd\u0dc0-\u0dc6\u0e01-\u0e30\u0e32\u0e33\u0e40-\u0e46\u0e81\u0e82\u0e84\u0e87\u0e88\u0e8a\u0e8d\u0e94-\u0e97\u0e99-\u0e9f\u0ea1-\u0ea3\u0ea5\u0ea7\u0eaa\u0eab\u0ead-\u0eb0\u0eb2\u0eb3\u0ebd\u0ec0-\u0ec4\u0ec6\u0edc-\u0edf\u0f00\u0f40-\u0f47\u0f49-\u0f6c\u0f88-\u0f8c\u1000-\u102a\u103f\u1050-\u1055\u105a-\u105d\u1061\u1065\u1066\u106e-\u1070\u1075-\u1081\u108e\u10a0-\u10c5\u10c7\u10cd\u10d0-\u10fa\u10fc-\u1248\u124a-\u124d\u1250-\u1256\u1258\u125a-\u125d\u1260-\u1288\u128a-\u128d\u1290-\u12b0\u12b2-\u12b5\u12b8-\u12be\u12c0\u12c2-\u12c5\u12c8-\u12d6\u12d8-\u1310\u1312-\u1315\u1318-\u135a\u1380-\u138f\u13a0-\u13f4\u1401-\u166c\u166f-\u167f\u1681-\u169a\u16a0-\u16ea\u16ee-\u16f0\u1700-\u170c\u170e-\u1711\u1720-\u1731\u1740-\u1751\u1760-\u176c\u176e-\u1770\u1780-\u17b3\u17d7\u17dc\u1820-\u1877\u1880-\u18a8\u18aa\u18b0-\u18f5\u1900-\u191c\u1950-\u196d\u1970-\u1974\u1980-\u19ab\u19c1-\u19c7\u1a00-\u1a16\u1a20-\u1a54\u1aa7\u1b05-\u1b33\u1b45-\u1b4b\u1b83-\u1ba0\u1bae\u1baf\u1bba-\u1be5\u1c00-\u1c23\u1c4d-\u1c4f\u1c5a-\u1c7d\u1ce9-\u1cec\u1cee-\u1cf1\u1cf5\u1cf6\u1d00-\u1dbf\u1e00-\u1f15\u1f18-\u1f1d\u1f20-\u1f45\u1f48-\u1f4d\u1f50-\u1f57\u1f59\u1f5b\u1f5d\u1f5f-\u1f7d\u1f80-\u1fb4\u1fb6-\u1fbc\u1fbe\u1fc2-\u1fc4\u1fc6-\u1fcc\u1fd0-\u1fd3\u1fd6-\u1fdb\u1fe0-\u1fec\u1ff2-\u1ff4\u1ff6-\u1ffc\u2071\u207f\u2090-\u209c\u2102\u2107\u210a-\u2113\u2115\u2119-\u211d\u2124\u2126\u2128\u212a-\u212d\u212f-\u2139\u213c-\u213f\u2145-\u2149\u214e\u2160-\u2188\u2c00-\u2c2e\u2c30-\u2c5e\u2c60-\u2ce4\u2ceb-\u2cee\u2cf2\u2cf3\u2d00-\u2d25\u2d27\u2d2d\u2d30-\u2d67\u2d6f\u2d80-\u2d96\u2da0-\u2da6\u2da8-\u2dae\u2db0-\u2db6\u2db8-\u2dbe\u2dc0-\u2dc6\u2dc8-\u2dce\u2dd0-\u2dd6\u2dd8-\u2dde\u2e2f\u3005-\u3007\u3021-\u3029\u3031-\u3035\u3038-\u303c\u3041-\u3096\u309d-\u309f\u30a1-\u30fa\u30fc-\u30ff\u3105-\u312d\u3131-\u318e\u31a0-\u31ba\u31f0-\u31ff\u3400-\u4db5\u4e00-\u9fcc\ua000-\ua48c\ua4d0-\ua4fd\ua500-\ua60c\ua610-\ua61f\ua62a\ua62b\ua640-\ua66e\ua67f-\ua697\ua6a0-\ua6ef\ua717-\ua71f\ua722-\ua788\ua78b-\ua78e\ua790-\ua793\ua7a0-\ua7aa\ua7f8-\ua801\ua803-\ua805\ua807-\ua80a\ua80c-\ua822\ua840-\ua873\ua882-\ua8b3\ua8f2-\ua8f7\ua8fb\ua90a-\ua925\ua930-\ua946\ua960-\ua97c\ua984-\ua9b2\ua9cf\uaa00-\uaa28\uaa40-\uaa42\uaa44-\uaa4b\uaa60-\uaa76\uaa7a\uaa80-\uaaaf\uaab1\uaab5\uaab6\uaab9-\uaabd\uaac0\uaac2\uaadb-\uaadd\uaae0-\uaaea\uaaf2-\uaaf4\uab01-\uab06\uab09-\uab0e\uab11-\uab16\uab20-\uab26\uab28-\uab2e\uabc0-\uabe2\uac00-\ud7a3\ud7b0-\ud7c6\ud7cb-\ud7fb\uf900-\ufa6d\ufa70-\ufad9\ufb00-\ufb06\ufb13-\ufb17\ufb1d\ufb1f-\ufb28\ufb2a-\ufb36\ufb38-\ufb3c\ufb3e\ufb40\ufb41\ufb43\ufb44\ufb46-\ufbb1\ufbd3-\ufd3d\ufd50-\ufd8f\ufd92-\ufdc7\ufdf0-\ufdfb\ufe70-\ufe74\ufe76-\ufefc\uff21-\uff3a\uff41-\uff5a\uff66-\uffbe\uffc2-\uffc7\uffca-\uffcf\uffd2-\uffd7\uffda-\uffdc]/,
c=/[\u00aa\u00b5\u00ba\u00c0-\u00d6\u00d8-\u00f6\u00f8-\u02c1\u02c6-\u02d1\u02e0-\u02e4\u02ec\u02ee\u0370-\u0374\u0376\u0377\u037a-\u037d\u0386\u0388-\u038a\u038c\u038e-\u03a1\u03a3-\u03f5\u03f7-\u0481\u048a-\u0527\u0531-\u0556\u0559\u0561-\u0587\u05d0-\u05ea\u05f0-\u05f2\u0620-\u064a\u066e\u066f\u0671-\u06d3\u06d5\u06e5\u06e6\u06ee\u06ef\u06fa-\u06fc\u06ff\u0710\u0712-\u072f\u074d-\u07a5\u07b1\u07ca-\u07ea\u07f4\u07f5\u07fa\u0800-\u0815\u081a\u0824\u0828\u0840-\u0858\u08a0\u08a2-\u08ac\u0904-\u0939\u093d\u0950\u0958-\u0961\u0971-\u0977\u0979-\u097f\u0985-\u098c\u098f\u0990\u0993-\u09a8\u09aa-\u09b0\u09b2\u09b6-\u09b9\u09bd\u09ce\u09dc\u09dd\u09df-\u09e1\u09f0\u09f1\u0a05-\u0a0a\u0a0f\u0a10\u0a13-\u0a28\u0a2a-\u0a30\u0a32\u0a33\u0a35\u0a36\u0a38\u0a39\u0a59-\u0a5c\u0a5e\u0a72-\u0a74\u0a85-\u0a8d\u0a8f-\u0a91\u0a93-\u0aa8\u0aaa-\u0ab0\u0ab2\u0ab3\u0ab5-\u0ab9\u0abd\u0ad0\u0ae0\u0ae1\u0b05-\u0b0c\u0b0f\u0b10\u0b13-\u0b28\u0b2a-\u0b30\u0b32\u0b33\u0b35-\u0b39\u0b3d\u0b5c\u0b5d\u0b5f-\u0b61\u0b71\u0b83\u0b85-\u0b8a\u0b8e-\u0b90\u0b92-\u0b95\u0b99\u0b9a\u0b9c\u0b9e\u0b9f\u0ba3\u0ba4\u0ba8-\u0baa\u0bae-\u0bb9\u0bd0\u0c05-\u0c0c\u0c0e-\u0c10\u0c12-\u0c28\u0c2a-\u0c33\u0c35-\u0c39\u0c3d\u0c58\u0c59\u0c60\u0c61\u0c85-\u0c8c\u0c8e-\u0c90\u0c92-\u0ca8\u0caa-\u0cb3\u0cb5-\u0cb9\u0cbd\u0cde\u0ce0\u0ce1\u0cf1\u0cf2\u0d05-\u0d0c\u0d0e-\u0d10\u0d12-\u0d3a\u0d3d\u0d4e\u0d60\u0d61\u0d7a-\u0d7f\u0d85-\u0d96\u0d9a-\u0db1\u0db3-\u0dbb\u0dbd\u0dc0-\u0dc6\u0e01-\u0e30\u0e32\u0e33\u0e40-\u0e46\u0e81\u0e82\u0e84\u0e87\u0e88\u0e8a\u0e8d\u0e94-\u0e97\u0e99-\u0e9f\u0ea1-\u0ea3\u0ea5\u0ea7\u0eaa\u0eab\u0ead-\u0eb0\u0eb2\u0eb3\u0ebd\u0ec0-\u0ec4\u0ec6\u0edc-\u0edf\u0f00\u0f40-\u0f47\u0f49-\u0f6c\u0f88-\u0f8c\u1000-\u102a\u103f\u1050-\u1055\u105a-\u105d\u1061\u1065\u1066\u106e-\u1070\u1075-\u1081\u108e\u10a0-\u10c5\u10c7\u10cd\u10d0-\u10fa\u10fc-\u1248\u124a-\u124d\u1250-\u1256\u1258\u125a-\u125d\u1260-\u1288\u128a-\u128d\u1290-\u12b0\u12b2-\u12b5\u12b8-\u12be\u12c0\u12c2-\u12c5\u12c8-\u12d6\u12d8-\u1310\u1312-\u1315\u1318-\u135a\u1380-\u138f\u13a0-\u13f4\u1401-\u166c\u166f-\u167f\u1681-\u169a\u16a0-\u16ea\u16ee-\u16f0\u1700-\u170c\u170e-\u1711\u1720-\u1731\u1740-\u1751\u1760-\u176c\u176e-\u1770\u1780-\u17b3\u17d7\u17dc\u1820-\u1877\u1880-\u18a8\u18aa\u18b0-\u18f5\u1900-\u191c\u1950-\u196d\u1970-\u1974\u1980-\u19ab\u19c1-\u19c7\u1a00-\u1a16\u1a20-\u1a54\u1aa7\u1b05-\u1b33\u1b45-\u1b4b\u1b83-\u1ba0\u1bae\u1baf\u1bba-\u1be5\u1c00-\u1c23\u1c4d-\u1c4f\u1c5a-\u1c7d\u1ce9-\u1cec\u1cee-\u1cf1\u1cf5\u1cf6\u1d00-\u1dbf\u1e00-\u1f15\u1f18-\u1f1d\u1f20-\u1f45\u1f48-\u1f4d\u1f50-\u1f57\u1f59\u1f5b\u1f5d\u1f5f-\u1f7d\u1f80-\u1fb4\u1fb6-\u1fbc\u1fbe\u1fc2-\u1fc4\u1fc6-\u1fcc\u1fd0-\u1fd3\u1fd6-\u1fdb\u1fe0-\u1fec\u1ff2-\u1ff4\u1ff6-\u1ffc\u2071\u207f\u2090-\u209c\u2102\u2107\u210a-\u2113\u2115\u2119-\u211d\u2124\u2126\u2128\u212a-\u212d\u212f-\u2139\u213c-\u213f\u2145-\u2149\u214e\u2160-\u2188\u2c00-\u2c2e\u2c30-\u2c5e\u2c60-\u2ce4\u2ceb-\u2cee\u2cf2\u2cf3\u2d00-\u2d25\u2d27\u2d2d\u2d30-\u2d67\u2d6f\u2d80-\u2d96\u2da0-\u2da6\u2da8-\u2dae\u2db0-\u2db6\u2db8-\u2dbe\u2dc0-\u2dc6\u2dc8-\u2dce\u2dd0-\u2dd6\u2dd8-\u2dde\u2e2f\u3005-\u3007\u3021-\u3029\u3031-\u3035\u3038-\u303c\u3041-\u3096\u309d-\u309f\u30a1-\u30fa\u30fc-\u30ff\u3105-\u312d\u3131-\u318e\u31a0-\u31ba\u31f0-\u31ff\u3400-\u4db5\u4e00-\u9fcc\ua000-\ua48c\ua4d0-\ua4fd\ua500-\ua60c\ua610-\ua61f\ua62a\ua62b\ua640-\ua66e\ua67f-\ua697\ua6a0-\ua6ef\ua717-\ua71f\ua722-\ua788\ua78b-\ua78e\ua790-\ua793\ua7a0-\ua7aa\ua7f8-\ua801\ua803-\ua805\ua807-\ua80a\ua80c-\ua822\ua840-\ua873\ua882-\ua8b3\ua8f2-\ua8f7\ua8fb\ua90a-\ua925\ua930-\ua946\ua960-\ua97c\ua984-\ua9b2\ua9cf\uaa00-\uaa28\uaa40-\uaa42\uaa44-\uaa4b\uaa60-\uaa76\uaa7a\uaa80-\uaaaf\uaab1\uaab5\uaab6\uaab9-\uaabd\uaac0\uaac2\uaadb-\uaadd\uaae0-\uaaea\uaaf2-\uaaf4\uab01-\uab06\uab09-\uab0e\uab11-\uab16\uab20-\uab26\uab28-\uab2e\uabc0-\uabe2\uac00-\ud7a3\ud7b0-\ud7c6\ud7cb-\ud7fb\uf900-\ufa6d\ufa70-\ufad9\ufb00-\ufb06\ufb13-\ufb17\ufb1d\ufb1f-\ufb28\ufb2a-\ufb36\ufb38-\ufb3c\ufb3e\ufb40\ufb41\ufb43\ufb44\ufb46-\ufbb1\ufbd3-\ufd3d\ufd50-\ufd8f\ufd92-\ufdc7\ufdf0-\ufdfb\ufe70-\ufe74\ufe76-\ufefc\uff21-\uff3a\uff41-\uff5a\uff66-\uffbe\uffc2-\uffc7\uffca-\uffcf\uffd2-\uffd7\uffda-\uffdc\u0300-\u036f\u0483-\u0487\u0591-\u05bd\u05bf\u05c1\u05c2\u05c4\u05c5\u05c7\u0610-\u061a\u0620-\u0649\u0672-\u06d3\u06e7-\u06e8\u06fb-\u06fc\u0730-\u074a\u0800-\u0814\u081b-\u0823\u0825-\u0827\u0829-\u082d\u0840-\u0857\u08e4-\u08fe\u0900-\u0903\u093a-\u093c\u093e-\u094f\u0951-\u0957\u0962-\u0963\u0966-\u096f\u0981-\u0983\u09bc\u09be-\u09c4\u09c7\u09c8\u09d7\u09df-\u09e0\u0a01-\u0a03\u0a3c\u0a3e-\u0a42\u0a47\u0a48\u0a4b-\u0a4d\u0a51\u0a66-\u0a71\u0a75\u0a81-\u0a83\u0abc\u0abe-\u0ac5\u0ac7-\u0ac9\u0acb-\u0acd\u0ae2-\u0ae3\u0ae6-\u0aef\u0b01-\u0b03\u0b3c\u0b3e-\u0b44\u0b47\u0b48\u0b4b-\u0b4d\u0b56\u0b57\u0b5f-\u0b60\u0b66-\u0b6f\u0b82\u0bbe-\u0bc2\u0bc6-\u0bc8\u0bca-\u0bcd\u0bd7\u0be6-\u0bef\u0c01-\u0c03\u0c46-\u0c48\u0c4a-\u0c4d\u0c55\u0c56\u0c62-\u0c63\u0c66-\u0c6f\u0c82\u0c83\u0cbc\u0cbe-\u0cc4\u0cc6-\u0cc8\u0cca-\u0ccd\u0cd5\u0cd6\u0ce2-\u0ce3\u0ce6-\u0cef\u0d02\u0d03\u0d46-\u0d48\u0d57\u0d62-\u0d63\u0d66-\u0d6f\u0d82\u0d83\u0dca\u0dcf-\u0dd4\u0dd6\u0dd8-\u0ddf\u0df2\u0df3\u0e34-\u0e3a\u0e40-\u0e45\u0e50-\u0e59\u0eb4-\u0eb9\u0ec8-\u0ecd\u0ed0-\u0ed9\u0f18\u0f19\u0f20-\u0f29\u0f35\u0f37\u0f39\u0f41-\u0f47\u0f71-\u0f84\u0f86-\u0f87\u0f8d-\u0f97\u0f99-\u0fbc\u0fc6\u1000-\u1029\u1040-\u1049\u1067-\u106d\u1071-\u1074\u1082-\u108d\u108f-\u109d\u135d-\u135f\u170e-\u1710\u1720-\u1730\u1740-\u1750\u1772\u1773\u1780-\u17b2\u17dd\u17e0-\u17e9\u180b-\u180d\u1810-\u1819\u1920-\u192b\u1930-\u193b\u1951-\u196d\u19b0-\u19c0\u19c8-\u19c9\u19d0-\u19d9\u1a00-\u1a15\u1a20-\u1a53\u1a60-\u1a7c\u1a7f-\u1a89\u1a90-\u1a99\u1b46-\u1b4b\u1b50-\u1b59\u1b6b-\u1b73\u1bb0-\u1bb9\u1be6-\u1bf3\u1c00-\u1c22\u1c40-\u1c49\u1c5b-\u1c7d\u1cd0-\u1cd2\u1d00-\u1dbe\u1e01-\u1f15\u200c\u200d\u203f\u2040\u2054\u20d0-\u20dc\u20e1\u20e5-\u20f0\u2d81-\u2d96\u2de0-\u2dff\u3021-\u3028\u3099\u309a\ua640-\ua66d\ua674-\ua67d\ua69f\ua6f0-\ua6f1\ua7f8-\ua800\ua806\ua80b\ua823-\ua827\ua880-\ua881\ua8b4-\ua8c4\ua8d0-\ua8d9\ua8f3-\ua8f7\ua900-\ua909\ua926-\ua92d\ua930-\ua945\ua980-\ua983\ua9b3-\ua9c0\uaa00-\uaa27\uaa40-\uaa41\uaa4c-\uaa4d\uaa50-\uaa59\uaa7b\uaae0-\uaae9\uaaf2-\uaaf3\uabc0-\uabe1\uabec\uabed\uabf0-\uabf9\ufb20-\ufb28\ufe00-\ufe0f\ufe20-\ufe26\ufe33\ufe34\ufe4d-\ufe4f\uff10-\uff19\uff3f]/;
a.newline=/[\n\r\u2028\u2029]/;a.isIdentifierStart=function(a){return 65>a?36===a:91>a?!0:97>a?95===a:123>a?!0:170<=a&&b.test(String.fromCharCode(a))};a.isIdentifierChar=function(a){return 48>a?36===a:58>a?!0:65>a?!1:91>a?!0:97>a?95===a:123>a?!0:170<=a&&c.test(String.fromCharCode(a))}})(q);var m={BlockStatement:"BlockStatement",Statement:"Statement",ObjectLiteral:"ObjectLiteral",ArrayLiteral:"ArrayLiteral",ForInitializer:"ForInitializer",Conditional:"Conditional",Expression:"Expression"},n=function(a,
b,c,e,d,g){this.type=a;this.text=b;this.comments_before=[];this.newlines=c||0;this.wanted_newline=0<c;this.whitespace_before=e||"";this.parent=null};"undefined"!==typeof exports?exports.js_beautify=c:"undefined"!==typeof h?h.js_beautify=c:"undefined"!==typeof global&&(global.js_beautify=c)})();(function(){function d(b,c){function g(){return(C=b.charAt(++B))||""}function h(a){var c=B;a&&k();result=b.charAt(B+1)||"";B=c-1;g();return result}function a(a){for(var c=B;g();)if("\\"===C)g();else if(-1!==
a.indexOf(C))break;else if("\n"===C)break;return b.substring(c,B+1)}function e(b){var c=B;b=a(b);B=c-1;g();return b}function k(){for(var a="";y.test(h());)g(),a+=C;return a}function m(){var a="";for(C&&y.test(C)&&(a=C);y.test(g());)a+=C;return a}function n(a){var c=B;a="/"===h();for(g();g();)if(!a&&"*"===C&&"/"===h()){g();break}else if(a&&"\n"===C)return b.substring(c,B);return b.substring(c,B)+C}function r(a){return b.substring(B-a.length,B).toLowerCase()===a}function v(){for(var a=B+1;a<b.length;a++){var c=
b.charAt(a);if("{"===c)return!0;if(";"===c||"}"===c||")"===c)break}return!1}c=c||{};var x=c.indent_size||4,A=c.indent_char||" ",z=void 0===c.selector_separator_newline?!0:c.selector_separator_newline;c=void 0===c.end_with_newline?!1:c.end_with_newline;"string"===typeof x&&(x=parseInt(x,10));var y=/^\s+$/,B=-1,C,E=b.match(/^[\t ]*/)[0],A=Array(x+1).join(A),F=0,G=0,D={"{":function(a){D.singleSpace();H.push(a);D.newLine()},"}":function(a){D.newLine();H.push(a);D.newLine()},_lastCharWhitespace:function(){return y.test(H[H.length-
1])},newLine:function(a){a||D.trim();H.length&&H.push("\n");E&&H.push(E)},singleSpace:function(){H.length&&!D._lastCharWhitespace()&&H.push(" ")},trim:function(){for(;D._lastCharWhitespace();)H.pop()}},H=[];E&&H.push(E);for(var J=!1,Q=!1,N="",O="";;){var O=m(),P=""!==O,L=-1!==O.indexOf("\n"),O=N;if(N=C)"/"===C&&"*"===h()?(P=r(""),D.newLine(),H.push(n()),D.newLine(),P&&D.newLine(!0)):"/"===C&&"/"===h()?(L||"{"===O||D.trim(),D.singleSpace(),H.push(n()),D.newLine()):"@"===C?(P&&D.singleSpace(),H.push(C),
P=e(": ,;{}()[]/\x3d'\"").replace(/\s$/,""),P in d.NESTED_AT_RULE?(G+=1,P in d.CONDITIONAL_GROUP_RULE&&(Q=!0)):0<=": ".indexOf(P[P.length-1])&&(g(),P=a(": ").replace(/\s$/,""),H.push(P),D.singleSpace())):"{"===C?"}"===h(!0)?(k(),g(),D.singleSpace(),H.push("{}")):(F++,E+=A,D["{"](C),Q?(Q=!1,J=F>G):J=F>=G):"}"===C?(F--,E=E.slice(0,-x),D["}"](C),J=!1,G&&G--):":"===C?(k(),!J&&!Q||r("\x26")||v()?":"===h()?(g(),H.push("::")):H.push(":"):(H.push(":"),D.singleSpace())):'"'===C||"'"===C?(P&&D.singleSpace(),
H.push(a(C))):";"===C?(H.push(C),D.newLine()):"("===C?r("url")?(H.push(C),k(),g()&&(")"!==C&&'"'!==C&&"'"!==C?H.push(a(")")):B--)):(P&&D.singleSpace(),H.push(C),k()):")"===C?H.push(C):","===C?(H.push(C),k(),!J&&z?D.newLine():D.singleSpace()):("]"!==C&&("["===C?P&&D.singleSpace():"\x3d"===C?k():P&&D.singleSpace()),H.push(C));else break}x=H.join("").replace(/[\r\n\t ]+$/,"");c&&(x+="\n");return x}d.NESTED_AT_RULE={"@page":!0,"@font-face":!0,"@keyframes":!0,"@media":!0,"@supports":!0,"@document":!0};
d.CONDITIONAL_GROUP_RULE={"@media":!0,"@supports":!0,"@document":!0};"undefined"!==typeof exports?exports.css_beautify=d:"undefined"!==typeof h?h.css_beautify=d:"undefined"!==typeof global&&(global.css_beautify=d)})();(function(){function d(b,c,a,e){var d,g,h,k,p,m,n,z,y,B,C;c=c||{};void 0!==c.wrap_line_length&&0!==parseInt(c.wrap_line_length,10)||void 0===c.max_char||0===parseInt(c.max_char,10)||(c.wrap_line_length=c.max_char);g=void 0===c.indent_inner_html?!1:c.indent_inner_html;h=void 0===c.indent_size?
4:parseInt(c.indent_size,10);k=void 0===c.indent_char?" ":c.indent_char;m=void 0===c.brace_style?"collapse":c.brace_style;p=0===parseInt(c.wrap_line_length,10)?32786:parseInt(c.wrap_line_length||250,10);n=c.unformatted||"a span img bdo em strong dfn code samp kbd var cite abbr acronym q sub sup tt i b big small u s strike font ins del pre address dt h1 h2 h3 h4 h5 h6".split(" ");y=(z=void 0===c.preserve_newlines?!0:c.preserve_newlines)?isNaN(parseInt(c.max_preserve_newlines,10))?32786:parseInt(c.max_preserve_newlines,
10):0;B=void 0===c.indent_handlebars?!1:c.indent_handlebars;C=void 0===c.end_with_newline?!1:c.end_with_newline;d=new function(){this.pos=0;this.token="";this.current_mode="CONTENT";this.tags={parent:"parent1",parentcount:1,parent1:""};this.token_text=this.last_token=this.last_text=this.token_type=this.tag_type="";this.newlines=0;this.indent_content=g;this.Utils={whitespace:["\n","\r","\t"," "],single_token:"br input link meta !doctype basefont base area hr wbr param img isindex ?xml embed ?php ? ?\x3d".split(" "),
extra_liners:["head","body","/html"],in_array:function(a,b){for(var c=0;c<b.length;c++)if(a===b[c])return!0;return!1}};this.is_whitespace=function(a){for(;0<a.length;a++)if(!this.Utils.in_array(a.charAt(0),this.Utils.whitespace))return!1;return!0};this.traverse_whitespace=function(){var a="",a=this.input.charAt(this.pos);if(this.Utils.in_array(a,this.Utils.whitespace)){for(this.newlines=0;this.Utils.in_array(a,this.Utils.whitespace);)z&&"\n"===a&&this.newlines<=y&&(this.newlines+=1),this.pos++,a=
this.input.charAt(this.pos);return!0}return!1};this.space_or_wrap=function(a){this.line_char_count>=this.wrap_line_length?(this.print_newline(!1,a),this.print_indentation(a)):(this.line_char_count++,a.push(" "))};this.get_content=function(){for(var a="",b=[];"\x3c"!==this.input.charAt(this.pos);){if(this.pos>=this.input.length)return b.length?b.join(""):["","TK_EOF"];if(this.traverse_whitespace())this.space_or_wrap(b);else{if(B)if(a=this.input.substr(this.pos,3),"{{#"===a||"{{/"===a)break;else if("{{"===
this.input.substr(this.pos,2)&&"{{else}}"===this.get_tag(!0))break;a=this.input.charAt(this.pos);this.pos++;this.line_char_count++;b.push(a)}}return b.length?b.join(""):""};this.get_contents_to=function(a){if(this.pos===this.input.length)return["","TK_EOF"];var b="";a=new RegExp("\x3c/"+a+"\\s*\x3e","igm");a.lastIndex=this.pos;a=(a=a.exec(this.input))?a.index:this.input.length;this.pos<a&&(b=this.input.substring(this.pos,a),this.pos=a);return b};this.record_tag=function(a){this.tags[a+"count"]?this.tags[a+
"count"]++:this.tags[a+"count"]=1;this.tags[a+this.tags[a+"count"]]=this.indent_level;this.tags[a+this.tags[a+"count"]+"parent"]=this.tags.parent;this.tags.parent=a+this.tags[a+"count"]};this.retrieve_tag=function(a){if(this.tags[a+"count"]){for(var b=this.tags.parent;b&&a+this.tags[a+"count"]!==b;)b=this.tags[b+"parent"];b&&(this.indent_level=this.tags[a+this.tags[a+"count"]],this.tags.parent=this.tags[b+"parent"]);delete this.tags[a+this.tags[a+"count"]+"parent"];delete this.tags[a+this.tags[a+
"count"]];1===this.tags[a+"count"]?delete this.tags[a+"count"]:this.tags[a+"count"]--}};this.indent_to_tag=function(a){if(this.tags[a+"count"]){for(var b=this.tags.parent;b&&a+this.tags[a+"count"]!==b;)b=this.tags[b+"parent"];b&&(this.indent_level=this.tags[a+this.tags[a+"count"]])}};this.get_tag=function(a){var b="",c=[],b="",d=!1,e,g,h=this.pos,k=this.line_char_count;a=void 0!==a?a:!1;do{if(this.pos>=this.input.length)return a&&(this.pos=h,this.line_char_count=k),c.length?c.join(""):["","TK_EOF"];
b=this.input.charAt(this.pos);this.pos++;if(this.Utils.in_array(b,this.Utils.whitespace))d=!0;else{if("'"===b||'"'===b)b+=this.get_unformatted(b),d=!0;"\x3d"===b&&(d=!1);c.length&&"\x3d"!==c[c.length-1]&&"\x3e"!==b&&d&&(this.space_or_wrap(c),d=!1);B&&"\x3c"===g&&"{{"===b+this.input.charAt(this.pos)&&(b+=this.get_unformatted("}}"),c.length&&" "!==c[c.length-1]&&"\x3c"!==c[c.length-1]&&(b=" "+b),d=!0);"\x3c"!==b||g||(e=this.pos-1,g="\x3c");B&&!g&&2<=c.length&&"{"===c[c.length-1]&&"{"==c[c.length-2]&&
(e="#"===b||"/"===b?this.pos-3:this.pos-2,g="{");this.line_char_count++;c.push(b);if(c[1]&&"!"===c[1]){c=[this.get_comment(e)];break}if(B&&"{"===g&&2<c.length&&"}"===c[c.length-2]&&"}"===c[c.length-1])break}}while("\x3e"!==b);e=c.join("");g=-1!==e.indexOf(" ")?e.indexOf(" "):"{"===e[0]?e.indexOf("}"):e.indexOf("\x3e");g=e.substring("\x3c"!==e[0]&&B?"#"===e[2]?3:2:1,g).toLowerCase();"/"===e.charAt(e.length-2)||this.Utils.in_array(g,this.Utils.single_token)?a||(this.tag_type="SINGLE"):B&&"{"===e[0]&&
"else"===g?a||(this.indent_to_tag("if"),this.tag_type="HANDLEBARS_ELSE",this.indent_content=!0,this.traverse_whitespace()):this.is_unformatted(g,n)?(b=this.get_unformatted("\x3c/"+g+"\x3e",e),c.push(b),this.tag_type="SINGLE"):"script"===g&&(-1===e.search("type")||-1<e.search("type")&&-1<e.search(/\b(text|application)\/(x-)?(javascript|ecmascript|jscript|livescript)/))?a||(this.record_tag(g),this.tag_type="SCRIPT"):"style"===g&&(-1===e.search("type")||-1<e.search("type")&&-1<e.search("text/css"))?
a||(this.record_tag(g),this.tag_type="STYLE"):"!"===g.charAt(0)?a||(this.tag_type="SINGLE",this.traverse_whitespace()):a||("/"===g.charAt(0)?(this.retrieve_tag(g.substring(1)),this.tag_type="END"):(this.record_tag(g),"html"!==g.toLowerCase()&&(this.indent_content=!0),this.tag_type="START"),this.traverse_whitespace()&&this.space_or_wrap(c),this.Utils.in_array(g,this.Utils.extra_liners)&&(this.print_newline(!1,this.output),this.output.length&&"\n"!==this.output[this.output.length-2]&&this.print_newline(!0,
this.output)));a&&(this.pos=h,this.line_char_count=k);return c.join("")};this.get_comment=function(a){var b="",c="\x3e",d=!1;this.pos=a;input_char=this.input.charAt(this.pos);for(this.pos++;this.pos<=this.input.length;){b+=input_char;if(b[b.length-1]===c[c.length-1]&&-1!==b.indexOf(c))break;!d&&10>b.length&&(0===b.indexOf("\x3c![if")?(c="\x3c![endif]\x3e",d=!0):0===b.indexOf("\x3c![cdata[")?(c="]]\x3e",d=!0):0===b.indexOf("\x3c![")?(c="]\x3e",d=!0):0===b.indexOf("\x3c!--")&&(c="--\x3e",d=!0));input_char=
this.input.charAt(this.pos);this.pos++}return b};this.get_unformatted=function(a,b){if(b&&-1!==b.toLowerCase().indexOf(a))return"";var c=b="",d=0,e=!0;do{if(this.pos>=this.input.length)break;b=this.input.charAt(this.pos);this.pos++;if(this.Utils.in_array(b,this.Utils.whitespace)){if(!e){this.line_char_count--;continue}if("\n"===b||"\r"===b){c+="\n";this.line_char_count=0;continue}}c+=b;this.line_char_count++;e=!0;B&&"{"===b&&c.length&&"{"===c[c.length-2]&&(c+=this.get_unformatted("}}"),d=c.length)}while(-1===
c.toLowerCase().indexOf(a,d));return c};this.get_token=function(){var a;if("TK_TAG_SCRIPT"===this.last_token||"TK_TAG_STYLE"===this.last_token){var b=this.last_token.substr(7);a=this.get_contents_to(b);return"string"!==typeof a?a:[a,"TK_"+b]}if("CONTENT"===this.current_mode)return a=this.get_content(),"string"!==typeof a?a:[a,"TK_CONTENT"];if("TAG"===this.current_mode)return a=this.get_tag(),"string"!==typeof a?a:[a,"TK_TAG_"+this.tag_type]};this.get_full_indent=function(a){a=this.indent_level+a||
0;return 1>a?"":Array(a+1).join(this.indent_string)};this.is_unformatted=function(a,b){if(!this.Utils.in_array(a,b))return!1;if("a"!==a.toLowerCase()||!this.Utils.in_array("a",b))return!0;a=(this.get_tag(!0)||"").match(/^\s*<\s*\/?([a-z]*)\s*[^>]*>\s*$/);return!a||this.Utils.in_array(a,b)?!0:!1};this.printer=function(a,b,c,d,e){this.input=a||"";this.output=[];this.indent_character=b;this.indent_string="";this.indent_size=c;this.brace_style=e;this.indent_level=0;this.wrap_line_length=d;for(a=this.line_char_count=
0;a<this.indent_size;a++)this.indent_string+=this.indent_character;this.print_newline=function(a,b){this.line_char_count=0;b&&b.length&&(a||"\n"!==b[b.length-1])&&("\n"!==b[b.length-1]&&(b[b.length-1]=b[b.length-1].replace(/\s+$/g,"")),b.push("\n"))};this.print_indentation=function(a){for(var b=0;b<this.indent_level;b++)a.push(this.indent_string),this.line_char_count+=this.indent_string.length};this.print_token=function(a){if(!this.is_whitespace(a)||this.output.length)(a||""!==a)&&this.output.length&&
"\n"===this.output[this.output.length-1]&&(this.print_indentation(this.output),a=a.replace(/^\s+/g,"")),this.print_token_raw(a)};this.print_token_raw=function(a){0<this.newlines&&(a=a.replace(/\s+$/g,""));a&&""!==a&&(1<a.length&&"\n"===a[a.length-1]?(this.output.push(a.slice(0,-1)),this.print_newline(!1,this.output)):this.output.push(a));for(a=0;a<this.newlines;a++)this.print_newline(0<a,this.output);this.newlines=0};this.indent=function(){this.indent_level++};this.unindent=function(){0<this.indent_level&&
this.indent_level--}};return this};for(d.printer(b,k,h,p,m);;){b=d.get_token();d.token_text=b[0];d.token_type=b[1];if("TK_EOF"===d.token_type)break;switch(d.token_type){case "TK_TAG_START":d.print_newline(!1,d.output);d.print_token(d.token_text);d.indent_content&&(d.indent(),d.indent_content=!1);d.current_mode="CONTENT";break;case "TK_TAG_STYLE":case "TK_TAG_SCRIPT":d.print_newline(!1,d.output);d.print_token(d.token_text);d.current_mode="CONTENT";break;case "TK_TAG_END":"TK_CONTENT"===d.last_token&&
""===d.last_text&&(b=d.token_text.match(/\w+/)[0],h=null,d.output.length&&(h=d.output[d.output.length-1].match(/(?:<|{{#)\s*(\w+)/)),null!==h&&h[1]===b||d.print_newline(!1,d.output));d.print_token(d.token_text);d.current_mode="CONTENT";break;case "TK_TAG_SINGLE":(b=d.token_text.match(/^\s*<([a-z-]+)/i))&&d.Utils.in_array(b[1],n)||d.print_newline(!1,d.output);d.print_token(d.token_text);d.current_mode="CONTENT";break;case "TK_TAG_HANDLEBARS_ELSE":d.print_token(d.token_text);d.indent_content&&(d.indent(),
d.indent_content=!1);d.current_mode="CONTENT";break;case "TK_CONTENT":d.print_token(d.token_text);d.current_mode="TAG";break;case "TK_STYLE":case "TK_SCRIPT":if(""!==d.token_text){d.print_newline(!1,d.output);b=d.token_text;var E;k=1;"TK_SCRIPT"===d.token_type?E="function"===typeof a&&a:"TK_STYLE"===d.token_type&&(E="function"===typeof e&&e);"keep"===c.indent_scripts?k=0:"separate"===c.indent_scripts&&(k=-d.indent_level);h=d.get_full_indent(k);E?b=E(b.replace(/^\s*/,h),c):(p=b.match(/^\s*/)[0].match(/[^\n\r]*$/)[0].split(d.indent_string).length-
1,k=d.get_full_indent(k-p),b=b.replace(/^\s*/,h).replace(/\r\n|\r|\n/g,"\n"+k).replace(/\s+$/,""));b&&(d.print_token_raw(b),d.print_newline(!0,d.output))}d.current_mode="TAG";break;default:""!==d.token_text&&d.print_token(d.token_text)}d.last_token=d.token_type;d.last_text=d.token_text}c=d.output.join("").replace(/[\r\n\t ]+$/,"");C&&(c+="\n");return c}if("undefined"!==typeof exports){var b=require("./beautify.js"),c=require("./beautify-css.js");exports.html_beautify=function(g,h){return d(g,h,b.js_beautify,
c.css_beautify)}}else"undefined"!==typeof h?h.html_beautify=function(b,c){return d(b,c,h.js_beautify,h.css_beautify)}:"undefined"!==typeof global&&(global.html_beautify=function(b,c){return d(b,c,global.js_beautify,global.css_beautify)})})()})},"dojo/store/util/QueryResults":function(){define(["../../_base/array","../../_base/lang","../../when"],function(n,m,k){var h=function(d){function b(b){d[b]||(d[b]=function(){var c=arguments;return k(d,function(d){Array.prototype.unshift.call(c,d);return h(n[b].apply(n,
c))})})}if(!d)return d;d.then&&(d=m.delegate(d));b("forEach");b("filter");b("map");d.total||(d.total=k(d,function(b){return b.length}));return d};m.setObject("dojo.store.util.QueryResults",h);return h})},"davinci/ve/DeliteWidget":function(){define("dojo/_base/declare ./_Widget ./widget require xide/registry xide/utils".split(" "),function(n,m,k,h,d,b){function c(c){c.declaredClass&&"davinci.ve.DeliteWidget"!==c.declaredClass?c.type=c.declaredClass:c.domNode&&c.domNode.declaredClass&&-1==c.domNode.declaredClass.indexOf("uniq")&&
(c.type=c.domNode.declaredClass);if(!c.type)switch("delite/"+b.capitalize(c.domNode.baseClass.replace("d-",""))){case "delite/Radio-button":c.type="delite/RadioButton";break;case "delite/Checkbox":c.type="delite/Checkbox";break;case "delite/Accordion-header":c.type="delite/AccordionHeader";break;case "delite/Combobox":c.type="delite/Combobox";break;case "delite/Toggle-button":c.type="delite/ToggleButton";break;case "delite/Tab-bar":c.type="delite/TabBar";break;case "delite/View-stack":c.type="delite/ViewStack";
break;case "delite/MediaPlayer":c.type="delite/MediaPlayer";break;case "delite/Panel":c.type="delite/Panel";break;case "delite/Select":c.type="delite/Select";break;case "delite/Button":c.type="delite/Button";break;case "delite/Accordion":c.type="delite/Accordion";break;case "delite/Slider":c.type="delite/Slider"}c.type?d.add(c.domNode):console.error("have no widget type ",c)}n=n("davinci.ve.DeliteWidget",m,{isGenericWidget:!0,helper:k,getData:function(b){b=b||{identify:!0,preserveStates:!0};var c;
c=(c=this.getHelper())&&c.getData?c.getData.apply(c,[this,b]):this._getData(b);var a=!1;"no_id"===this.id&&(a=dijit.getUniqueId(this.type.toLowerCase().replace("/","-").replace(/\./g,"_")),this.id=a=a.replace("delite/","d-").toLowerCase(),c.properties.id=a,c.properties.id=a,this.domNode.id=a,a=!0);b.identify&&!a&&d.byId(this.id);d.add(this.domNode);c.maqAppStates=dojo.clone(this.domNode._maqAppStates);c.maqDeltas=dojo.clone(this.domNode._maqDeltas);c.properties||(c.properties={});if(this.properties)for(var e in this.properties)e in
c.properties||(c.properties[e]=this.properties[e]);b=this._srcElement;for(var a=b.attributes,g=0;g<a.length;g++){var h=a[g];e=h.name;if("on"==h.name.substr(0,2).toLowerCase())c.properties[h.name]=h.value;else if("a"==b.tag.toLowerCase()&&"href"==h.name.toLowerCase())c.properties[h.name]=h.value;else if("stop"===e||"bidirectional"===e||"block"===e||"targetevent"===e)c.properties[h.name]=h.value}return c},_fixType:function(b){return c(b)},_getChildren:function(b){function c(b){dojo.forEach(b.children,
function(b){(b=g.getWidget(b,!1))&&!b.type&&d._fixType(b);d.metadata&&d.metadata.ignore&&b.type&&-1!==d.metadata.ignore.indexOf(b.type)||b&&b.type&&(-1==b.type.indexOf("html.")||d.metadata&&1==d.metadata.htmlContent)&&a.push(b)})}var a=[],d=this;b=this.container||this.domNode;b.containerNode&&null==this.domNode.render&&(b=b.containerNode);this.domNode&&null!=this.domNode.render&&(b=this.domNode);var g=h("davinci/ve/widget");b&&(c(b),0==a.length&&this.domNode.containerNode&&c(this.domNode.containerNode));
return d.metadata&&d.metadata.noChildren?[]:a},getChildren:function(b){var c=this.getHelper();return c&&c.getChildren?c.getChildren(this,b):this._getChildren(b)},constructor:function(b,c,a,d,h){this.acceptsHTMLChildren=!0},buildRendering:function(){this.containerNode=this.domNode;if(this._params){for(var b in this._params)this.domNode.setAttribute(b,this._params[b]);this._params=void 0}},_getChildrenData:function(b){var c=this.domNode;if(!c.hasChildNodes())return null;if(c&&c.getChildrenData)return c.getChildrenData();
var c=[],a=this.domNode.childNodes,d=h("davinci/ve/widget");this.metadata&&this.metadata.noChildren&&(a=[]);for(var g=0;g<a.length;g++){var k=a[g],m;switch(k.nodeType){case 1:if((k=d.byNode(k))&&k.type&&-1!==k.type.indexOf("html.")&&!0!==this.metadata.htmlContent)break;if(this.metadata&&this.metadata.ignore&&k.type&&-1!==this.metadata.ignore.indexOf(k.type))break;k&&(m=k.getData(b));break;case 3:(m=k.nodeValue.trim())&&(b.serialize||!0===this.metadata.htmlContent)&&(m=davinci.html.escapeXml(m));break;
case 8:m="\x3c!--"+k.nodeValue+"--\x3e"}(m&&m.type&&-1==m.type.indexOf("html.")||m&&!0===this.metadata.htmlContent)&&c.push(m)}if(0!==c.length)return c},_getPropertyValue:function(b){if(this.domNode._get){var c=this.domNode._get(b);null==c&&(c=this.domNode.getAttribute(b));return c}if(this.containerNode&&b in this.containerNode)return this.containerNode[b]},setProperties:function(b){var c=this.domNode,a;for(a in b)"style"===a?dojo.style(c,b[a]):b[a]?(c[a]=b[a],c._set&&c._set(a,b[a]),dojo.attr(c,a,
b[a])):c.removeAttribute(a);this.inherited(arguments)},_attr:function(b,c){},getTagName:function(){return this.domNode.nodeName.toLowerCase()},getParent:function(){if("xblox/RunScript"==this.type){var b=this.domNode;if(b&&b._targetReference&&b._targetReference._dvWidget)return b._targetReference._dvWidget}return this.inherited(arguments)}});n.fixType=c;return n})},"wcDocker/docker":function(){define("dcl/dcl wcDocker/types wcDocker/panel wcDocker/ghost wcDocker/splitter wcDocker/frame wcDocker/collapser wcDocker/layoutsimple wcDocker/layouttable wcDocker/tabframe wcDocker/drawer wcDocker/base".split(" "),
function(n,m,k,h,d,b,c,g,p,a,e,q){var u={wcPanel:k,wcGhost:h,wcSplitter:d,wcFrame:b,wcCollapser:c,wcLayoutSimple:g,wcLayoutTable:p,wcDrawer:e,wcTabFrame:a};n=n(q,{declaredClass:"wcDocker",constructor:function(a,b){this.$outer=$(a);this.$container=$('\x3cdiv class\x3d"wcDocker"\x3e');this.$transition=$('\x3cdiv class\x3d"wcDockerTransition"\x3e');this.$loading=null;this.$outer.append(this.$container);this.$container.append(this.$transition);this._canOrientTabs=!0;this._events={};this._root=null;this._frameList=
[];this._floatingList=[];this._modalList=[];this._persistentList=[];this._placeholderPanel=this._focusFrame=null;this._contextTimer=0;this._dirtyDontMove=this._dirty=!1;this._splitterList=[];this._tabList=[];this._collapser={};this._dockPanelTypeList=[];this._creatingPanel=!1;this._draggingFrameTab=this._draggingFrameSizer=this._draggingFrame=this._draggingSplitter=null;this._draggingFrameTopper=!1;this._ghost=this._draggingCustomTabFrame=null;this._menuTimer=0;this._mouseOrigin={x:0,y:0};this._resizeData=
{time:-1,timeout:!1,delta:150};a={themePath:"Themes",theme:"default",loadingClass:"fa fa-spinner fa-pulse",allowContextMenu:!0,hideOnResize:!1,allowCollapse:!0,responseRate:10,moveStartDelay:300,edgeAnchorSize:50,panelAnchorSize:"15%",detachToWidth:"50%",detachToHeight:"50%"};this._options={};for(var c in u)a[c+"Class"]=u[c];for(c in a)this._options[c]=a[c];for(c in b)this._options[c]=b[c];this.__init()},isCollapseEnabled:function(){return this._canOrientTabs&&this._options.allowCollapse},registerPanelType:function(a,
b,c){var d=b;"function"===typeof d&&(d={onCreate:b});"undefined"!=typeof c&&(d.isPrivate=c);_.isEmpty(d)&&(d=null);for(b=0;b<this._dockPanelTypeList.length;++b)if(this._dockPanelTypeList[b].name===a)return!1;this._dockPanelTypeList.push({name:a,options:d});return!0},panelTypes:function(a){for(var b=[],c=0;c<this._dockPanelTypeList.length;++c)!a&&this._dockPanelTypeList[c].options.isPrivate||b.push(this._dockPanelTypeList[c].name);return b},panelTypeInfo:function(a){for(var b=0;b<this._dockPanelTypeList.length;++b)if(this._dockPanelTypeList[b].name==
a)return this._dockPanelTypeList[b].options;return!1},addPanel:function(a,b,c,d){function e(a){b===m.DOCK.STACKED?this.__addPanelGrouped(a,c,d):this.__addPanelAlone(a,b,c,d);this._placeholderPanel&&a.moveable()&&b!==m.DOCK.FLOAT&&b!==m.DOCK.MODAL&&this.removePanel(this._placeholderPanel)&&(this._placeholderPanel=null);this.__forceUpdate()}for(var g=0;g<this._persistentList.length;++g)if(this._persistentList[g]._type===a)return a=this._persistentList.splice(g,1)[0],e.call(this,a),a.__trigger(m.EVENT.PERSISTENT_OPENED),
a;for(g=0;g<this._dockPanelTypeList.length;++g)if(this._dockPanelTypeList[g].name===a)return g=this._dockPanelTypeList[g],a=new (this.__getClass("wcPanel"))(this,a,g.options),a.__container(this.$transition),a._panelObject=new g.options.onCreate(a,g.options&&g.options.options||d||{}),e.call(this,a),a;return!1},removePanel:function(a,b){if(!a)return!1;var c=this.__isLastPanel(a),d=a._parent;if(d&&d.instanceOf("wcFrame")){for(var e=a.__trigger(m.EVENT.CLOSING),g=0;g<e.length;++g)if(!e[g])return!1;b?
(a.__container(this.$transition),a._parent=null):a.__trigger(m.EVENT.CLOSED);if(!d.removePanel(a)&&!d.isCollapser()){if(c)return this.__addPlaceholder(d),b?a.__trigger(m.EVENT.PERSISTENT_CLOSED):a.__destroy(),!0;g=this._floatingList.indexOf(d);-1!==g&&this._floatingList.splice(g,1);g=this._frameList.indexOf(d);-1!==g&&this._frameList.splice(g,1);g=this._modalList.indexOf(d);-1!==g&&this._modalList.splice(g,1);this._modalList.length?this.__focus(this._modalList[this._modalList.length-1]):this._floatingList.length&&
this.__focus(this._floatingList[this._floatingList.length-1]);if((c=d._parent)&&c.instanceOf("wcSplitter")){c.__removeChild(d);c.pane(0)?(e=c.pane(0),c._pane[0]=null):(e=c.pane(1),c._pane[1]=null);e.__container(this.$transition);e._parent=null;g=this._splitterList.indexOf(c);-1!==g&&this._splitterList.splice(g,1);var g=c._parent,h=c.__container();c.__destroy();g&&g.instanceOf("wcSplitter")?(g.__removeChild(c),g.pane(0)?g.pane(1,e):g.pane(0,e)):g===this&&(this._root=e,e._parent=this,e.__container(h));
this.__update()}else d===this._root&&(this._root=null);this._focusFrame===d&&(this._focusFrame=null);d.__destroy()}b?a.__trigger(m.EVENT.PERSISTENT_CLOSED):a.__destroy();return!0}return!1},movePanel:function(a,b,c,d){var e=this.__isLastPanel(a),g=a.$container;a._parent&&a._parent.instanceOf("wcFrame")&&(g=a._parent.$frame);var h=g.offset(),k=g.width(),g=g.height(),p=a._parent,q=!1;if(p&&p.instanceOf("wcFrame")){for(var q=p._isFloating,n=0;n<p._panelList.length;++n)if(p._panelList[n]===a){p.isCollapser()?
p._curTab=-1:p._curTab>=n&&p._curTab--;a.__container(this.$transition);a._parent=null;p._panelList.splice(n,1);break}!p.isCollapser()&&-1===p._curTab&&p._panelList.length&&(p._curTab=0);p.__updateTabs();p.collapse();if(!p.isCollapser()&&0===p._panelList.length)if(e)this.__addPlaceholder(p);else{var r=this._floatingList.indexOf(p);-1!==r&&this._floatingList.splice(r,1);r=this._frameList.indexOf(p);-1!==r&&this._frameList.splice(r,1);if((e=p._parent)&&e.instanceOf("wcSplitter")){e.__removeChild(p);
e.pane(0)?(n=e.pane(0),e._pane[0]=null):(n=e.pane(1),e._pane[1]=null);c===e&&(c._shift=n);n.__container(this.$transition);n._parent=null;r=this._splitterList.indexOf(e);-1!==r&&this._splitterList.splice(r,1);var r=e._parent,v=e.__container();e.__destroy();r&&r.instanceOf("wcSplitter")?(r.__removeChild(e),r.pane(0)?r.pane(1,n):r.pane(0,n)):r===this&&(this._root=n,n._parent=this,n.__container(v));this.__update()}this._focusFrame===p&&(this._focusFrame=null);p.__destroy()}}a.initSize(k,g);b===m.DOCK.STACKED?
this.__addPanelGrouped(a,c,d):this.__addPanelAlone(a,b,c,d);c==this._placeholderPanel&&(this.removePanel(this._placeholderPanel),this._placeholderPanel=null);(b=a._parent)&&b.instanceOf("wcFrame")&&1===b._panelList.length&&b.pos(h.left+k/2+20,h.top+g/2+20,!0);this.__update(!0);b&&b.instanceOf("wcFrame")&&q!==b._isFloating&&(b._isFloating?a.__trigger(m.EVENT.DETACHED):a.__trigger(m.EVENT.ATTACHED));a.__trigger(m.EVENT.MOVED);return a},findPanels:function(a){for(var b=[],c=0;c<this._frameList.length;++c)for(var d=
this._frameList[c],e=0;e<d._panelList.length;++e){var g=d._panelList[e];a&&g._type!==a||b.push(g)}return b},startLoading:function(a,b,c){if(!this.$loading){this.$loading=$('\x3cdiv class\x3d"wcLoadingContainer"\x3e\x3c/div\x3e');this.$outer.append(this.$loading);var d=$('\x3cdiv class\x3d"wcLoadingBackground"\x3e\x3c/div\x3e');"number"!==typeof b&&(b=.4);d.css("opacity",b);this.$loading.append(d);b=$('\x3cdiv class\x3d"wcLoadingIconContainer"\x3e\x3ci class\x3d"wcLoadingIcon '+this._options.loadingClass+
'"\x3e\x3c/i\x3e\x3c/div\x3e');this.$loading.append(b);if(a){var e=$('\x3cspan class\x3d"wcLoadingLabel"\x3e'+a+"\x3c/span\x3e");this.$loading.append(e)}"number"!==typeof c&&(c=1);b.css("opacity",c);e&&e.css("opacity",c)}},finishLoading:function(a){if(this.$loading)if(0<a){var b=this;this.$loading.fadeOut(a,function(){b.$loading.remove();b.$loading=null})}else this.$loading.remove(),this.$loading=null},on:function(a,b){if(!a)return!1;this._events[a]||(this._events[a]=[]);if(-1!==this._events[a].indexOf(b))return!1;
this._events[a].push(b);return!0},off:function(a,b){if("undefined"===typeof a)this._events={};else if(this._events[a])if("undefined"===typeof b)this._events[a]=[];else for(var c=0;c<this._events[a].length;++c)if(this._events[a][c]===b){this._events[a].splice(c,1);break}},trigger:function(a,b){if(!a)return!1;for(var c=[],d=0;d<this._frameList.length;++d)for(var e=this._frameList[d],g=0;g<e._panelList.length;++g)c=c.concat(e._panelList[g].__trigger(a,b));return c.concat(this.__trigger(a,b))},save:function(){for(var a=
{floating:[]},b=0;b<this._floatingList.length;++b)a.floating.push(this._floatingList[b].__save());a.root=this._root.__save();_.isEmpty(this._collapser)||(a.collapsers={left:this._collapser[m.DOCK.LEFT].__save(),right:this._collapser[m.DOCK.RIGHT].__save(),bottom:this._collapser[m.DOCK.BOTTOM].__save()});return JSON.stringify(a,function(a,b){return Infinity==b?"Infinity":b})},restore:function(a){a=JSON.parse(a,function(a,b){return"Infinity"===b?Infinity:b});this.clear();this._emit("beginRestore");
this._root=this.__create(a.root,this,this.$container);this._root.__restore(a.root,this);for(var b=0;b<a.floating.length;++b)this.__create(a.floating[b],this,this.$container).__restore(a.floating[b],this);this.__forceUpdate(!1);if(!_.isEmpty(a.collapsers)&&this.isCollapseEnabled()){this.__initCollapsers();this._collapser[m.DOCK.LEFT].__restore(a.collapsers.left,this);this._collapser[m.DOCK.RIGHT].__restore(a.collapsers.right,this);this._collapser[m.DOCK.BOTTOM].__restore(a.collapsers.bottom,this);
var c=this;setTimeout(function(){c.__forceUpdate()})}this._emit("endRestore")},clear:function(){this._root=null;this.trigger(m.EVENT.CLOSED);for(var a=0;a<this._splitterList.length;++a)this._splitterList[a].__destroy();for(a=0;a<this._frameList.length;++a)this._frameList[a].__destroy();_.isEmpty(this._collapser)||(this._collapser[m.DOCK.LEFT].__destroy(),this._collapser[m.DOCK.RIGHT].__destroy(),this._collapser[m.DOCK.BOTTOM].__destroy(),this._collapser={});for(;this._frameList.length;)this._frameList.pop();
for(;this._floatingList.length;)this._floatingList.pop();for(;this._splitterList.length;)this._splitterList.pop();this.off()},__init:function(){function a(c){e=c;var k=b.__mouse(c);if(3===k.which||!(b._draggingSplitter||b._draggingFrameSizer||b._draggingCustomTabFrame||b._ghost||b._draggingFrame||b._draggingFrameTab))return!0;if((new Date).getTime()-d<b._options.responseRate)return g||(g=setTimeout(function(){g=d=0;a(e)},b._options.responseRate)),!0;d=(new Date).getTime();if(b._draggingSplitter)b._draggingSplitter.__moveBar(k);
else if(b._draggingFrameSizer)c=b.$container.offset(),k.x+=c.left,k.y+=c.top,b._draggingFrame.__resize(b._draggingFrameSizer,k),b._draggingFrame.__update();else if(b._draggingCustomTabFrame)b._draggingCustomTabFrame.moveable()&&(k=$(c.target).hasClass("wcPanelTab")?$(c.target):$(c.target).parents(".wcPanelTab"),b._draggingFrameTab&&k&&k.length&&b._draggingFrameTab!==c.target&&(b._draggingFrameTab=b._draggingCustomTabFrame.moveTab(parseInt($(b._draggingFrameTab).attr("id")),parseInt(k.attr("id")))));
else if(b._ghost)if(b._draggingFrame)if(b._ghost.__move(k),c=!(b._draggingFrame._isFloating||1===k.which),b._draggingFrame.__checkAnchorDrop(k,!0,b._ghost,1<b._draggingFrame._panelList.length&&b._draggingFrameTab,b._draggingFrameTopper,!b.__isLastFrame(b._draggingFrame)))b._draggingFrame.__shadow(!1),k=$(document.elementFromPoint(k.x,k.y)),k=k.hasClass("wcPanelTab")?k:k.parents(".wcPanelTab"),b._draggingFrameTab&&k.length&&b._draggingFrameTab!==k[0]&&(b._draggingFrameTab=b._draggingFrame.__tabMove(parseInt($(b._draggingFrameTab).attr("id")),
parseInt(k.attr("id"))));else{if((new Date).getTime()-h<b._options.moveStartDelay)return;b._draggingFrame.__shadow(!0);b.__focus();if(!c)for(c=0;c<b._frameList.length;++c)if(b._frameList[c]!==b._draggingFrame&&b._frameList[c].__checkAnchorDrop(k,!1,b._ghost,!0,b._draggingFrameTopper,!b.__isLastFrame(b._draggingFrame))){b._draggingFrame.__shadow(!0);return}b._draggingFrame.panel().detachable()&&b._ghost.anchor(k,null)}else b._creatingPanel&&b._ghost.update(k,!b._creatingPanelNoFloating);else b._draggingFrame&&
!b._draggingFrameTab&&(b._draggingFrame.__move(k),b._draggingFrame.__update(),b.trigger(m.EVENT.MOVE_STARTED));return!0}var b=this,c=$("body");this._root=null;this.__eventHandles=[];this.__addPlaceholder();b.__on(c,"mouseenter",".wcMenuCreatePanel",function(){b._ghost&&b._ghost.$ghost.stop().fadeIn(200)});b.__on(c,"mouseleave",".wcMenuCreatePanel",function(){b._ghost&&b._ghost.$ghost.stop().fadeOut(200)});b.__on(c,"mousemove",a);b.__on(c,"mousedown",function(a){a=b.__mouse(a);b._mouseOrigin.x=a.x;
b._mouseOrigin.y=a.y});b.__on(c,"mousedown",".wcModalBlocker",function(a){b._modalList.length&&b._modalList[b._modalList.length-1].__focus(!0)});b.__on(c,"mousedown",".wcPanelTab",function(a){a.preventDefault();a.returnValue=!1});b.__on(c,"mousedown",".wcFrameButtonBar \x3e .wcFrameButton",function(){$("body").addClass("wcDisableSelection")});b.__on(c,"mousedown",".wcFrameTitleBar",function(a){var c=b.__mouse(a);if(3===c.which||$(a.target).hasClass("wcFrameButton")||$(a.target).parents(".wcFrameButton").length)return!0;
if($(a.target).hasClass("wcPanelCloseIcon"))return b.__closePanel(a.target.__panel);h=(new Date).getTime();$("body").addClass("wcDisableSelection");for(var d=0;d<b._frameList.length;++d)if(b._frameList[d].$titleBar[0]==this||b._frameList[d].$tabBar[0]==this){b._draggingFrame=b._frameList[d];b._draggingFrame.__anchorMove(c);if((d=$(a.target).hasClass("wcPanelTab")?$(a.target):$(a.target).parents(".wcPanelTab"))&&d.length){var e=parseInt(d.attr("id"));b._draggingFrame.panel(e,!0);b._draggingFrameTab=
d[0];$(window).focus()}e=!0;b._draggingFrameTab?d.hasClass("wcNotMoveable")&&(e=!1):b._draggingFrame._isFloating&&1===c.which&&(e=!1);e&&(!b._draggingFrameTab&&b._draggingFrame.isCollapser()&&(b._draggingFrameTab=b._draggingFrame.panel()),b._draggingFrameTopper=0<$(a.target).parents(".wcFrameTopper").length,d=b._draggingFrame.__rect(),b._ghost=new (b.__getClass("wcGhost"))(d,c,b),b._draggingFrame.__checkAnchorDrop(c,!0,b._ghost,!0,b._draggingFrameTopper,!b.__isLastFrame(b._draggingFrame)),b.trigger(m.EVENT.BEGIN_DOCK));
break}for(d=0;d<b._tabList.length;++d)if(b._tabList[d].$tabBar[0]==this){b._draggingCustomTabFrame=b._tabList[d];(d=$(a.target).hasClass("wcPanelTab")?$(a.target):$(a.target).parents(".wcPanelTab"))&&d.length&&(e=parseInt(d.attr("id")),b._draggingCustomTabFrame.tab(e,!0),b._draggingFrameTab=d[0]);break}b._draggingFrame&&(b.__focus(b._draggingFrame),a=b._focusFrame,(a=a.currentPanel?a.currentPanel():null)&&a._emit("ON_VIEW_SELECT"));return!0});b.__on(c,"mousedown",".wcSplitterBar",function(a){if(1!==
b.__mouse(a).which)return!0;$("body").addClass("wcDisableSelection");for(var c=0;c<b._splitterList.length;++c)if(b._splitterList[c].$bar[0]===this){b._draggingSplitter=b._splitterList[c];b._draggingSplitter.$pane[0].addClass("wcResizing");b._draggingSplitter.$pane[1].addClass("wcResizing");a.preventDefault();break}return!0});b.__on(c,"mousedown",".wcPanelTab",function(a){if(2!==b.__mouse(a).which)return!0;a=parseInt($(this).attr("id"));for(var c=0;c<b._frameList.length;++c){var d=b._frameList[c];
if(d.$tabBar[0]===$(this).parents(".wcFrameTitleBar")[0]){(c=d._panelList[a])&&c.closeable()&&(b._removingPanel=d._panelList[a]);break}}return!0});b.__on(c,"mouseup",".wcPanelTab",function(a){if(2===b.__mouse(a).which){a=parseInt($(this).attr("id"));for(var c=0;c<b._frameList.length;++c){var d=b._frameList[c];if(d.$tabBar[0]===$(this).parents(".wcFrameTitleBar")[0]){a=d._panelList[a];b._removingPanel===a&&(b.removePanel(a),b.__update());break}}}});b.__on(c,"mousedown",".wcLayout",function(a){if(3===
b.__mouse(a).which)return!0;for(var c=0;c<b._frameList.length;++c)if(b._frameList[c].panel()&&b._frameList[c].panel().layout().scene()[0]==this){setTimeout(function(){b.__focus(b._frameList[c])},10);break}return!0});b.__on(c,"mousedown",".wcFrameEdge",function(a){if(3===b.__mouse(a).which)return!0;$("body").addClass("wcDisableSelection");for(a=0;a<b._frameList.length;++a)if(b._frameList[a]._isFloating)if(b._frameList[a].$top[0]==this){b._draggingFrame=b._frameList[a];b._draggingFrameSizer=["top"];
break}else if(b._frameList[a].$bottom[0]==this){b._draggingFrame=b._frameList[a];b._draggingFrameSizer=["bottom"];break}else if(b._frameList[a].$left[0]==this){b._draggingFrame=b._frameList[a];b._draggingFrameSizer=["left"];break}else if(b._frameList[a].$right[0]==this){b._draggingFrame=b._frameList[a];b._draggingFrameSizer=["right"];break}else if(b._frameList[a].$corner1[0]==this){b._draggingFrame=b._frameList[a];b._draggingFrameSizer=["top","left"];break}else if(b._frameList[a].$corner2[0]==this){b._draggingFrame=
b._frameList[a];b._draggingFrameSizer=["top","right"];break}else if(b._frameList[a].$corner3[0]==this){b._draggingFrame=b._frameList[a];b._draggingFrameSizer=["bottom","right"];break}else if(b._frameList[a].$corner4[0]==this){b._draggingFrame=b._frameList[a];b._draggingFrameSizer=["bottom","left"];break}b._draggingFrame&&b.__focus(b._draggingFrame);b._draggingFrameSizer&&b.trigger(m.EVENT.BEGIN_FLOAT_RESIZE);return!0});b.__on(c,"mousedown",".wcCreatePanel",function(a){a=b.__mouse(a);if(1!==a.which)return!0;
var c=$(this).data("panel");if(b.panelTypeInfo(c)){var d={x:a.x-250,y:a.y,w:500,h:500};$("body").addClass("wcDisableSelection");b._ghost=new (b.__getClass("wcGhost"))(d,a,b);b._ghost.update(a);b._ghost.anchor(a,b._ghost.anchor());b._creatingPanel=c;b.__focus();b.trigger(m.EVENT.BEGIN_DOCK)}});b.__on(c,"mouseup",function(a){var c=b.__mouse(a);if(3===c.which)return!0;$("body").removeClass("wcDisableSelection");if(b._draggingFrame)for(var d=0;d<b._frameList.length;++d)b._frameList[d].__shadow(!1);b._draggingFrameSizer&&
b.trigger(m.EVENT.END_FLOAT_RESIZE);if(b._ghost&&(b._draggingFrame||b._creatingPanel)){a=b._ghost.anchor();if(b._draggingFrame)if(!a){b._draggingFrameTab||b._draggingFrame.panel(0);var e=b._draggingFrame.panel(parseInt($(b._draggingFrameTab).attr("id")));b.movePanel(e,m.DOCK.FLOAT,null,b._ghost.__rect());if(!b._draggingFrameTab&&(a=b._draggingFrame._panelList.length,1<a||b._draggingFrame.panel()!==b._placeholderPanel))for(d=0;d<a;++d)b.movePanel(b._draggingFrame.panel(),m.DOCK.STACKED,e,{tabOrientation:b._draggingFrame._tabOrientation});
(a=e._parent)&&a.instanceOf("wcFrame")&&(a.pos(c.x,c.y+b._ghost.__rect().h/2-10,!0),a._size.x=b._ghost.__rect().w,a._size.y=b._ghost.__rect().h);a.__update();b.__focus(a)}else{if(!a.self&&void 0!==a.loc)if(a.tab&&a.item._parent._parent==b._draggingFrame)b._draggingFrame.tabOrientation(a.tab);else{c=0;b._draggingFrameTab?c=parseInt($(b._draggingFrameTab).attr("id")):b._draggingFrame.panel(0);a.item&&(e=a.item._parent);if(-1<b._draggingFrame._panelList.indexOf(e)){if(1===b._draggingFrame._panelList.length)return;
for(d=0;d<b._draggingFrame._panelList.length;++d)if(e!==b._draggingFrame._panelList[d]){e=b._draggingFrame._panelList[d];c--;break}}d=null;d=b._draggingFrameTab?b._draggingFrame.panel(parseInt($(b._draggingFrameTab).attr("id"))):b._draggingFrame.panel();e=b.movePanel(d,a.loc,e,b._ghost.rect());e._parent.panel(e._parent._panelList.length-1,!0);if(b._draggingFrameTab)(a=e._parent)&&a.instanceOf("wcFrame")&&(c+=a._panelList.length);else{var g=b._ghost.rect();g.tabOrientation||(g.tabOrientation=b._draggingFrame.tabOrientation());
a=b._draggingFrame._panelList.length;if(1<a||b._draggingFrame.panel()!==b._placeholderPanel)for(d=0;d<a;++d)b.movePanel(b._draggingFrame.panel(),m.DOCK.STACKED,e,g)}(a=e._parent)&&a.instanceOf("wcFrame")&&a.panel(c);b.__focus(a)}}else b._creatingPanel&&(e=m.DOCK.FLOAT,c=null,a&&(e=a.loc,c=a.item?a.item._parent:a.panel),b.addPanel(b._creatingPanel,e,c,b._ghost.rect()));b._ghost.destroy();b._ghost=null;b.trigger(m.EVENT.END_DOCK);b.__update()}b._draggingSplitter&&(b._draggingSplitter.$pane[0].removeClass("wcResizing"),
b._draggingSplitter.$pane[1].removeClass("wcResizing"));b._draggingSplitter=null;b._draggingFrame=null;b._draggingFrameSizer=null;b._draggingFrameTab=null;b._draggingFrameTopper=!1;b._draggingCustomTabFrame=null;b._removingPanel=null;return!0});b.__on(c,"click",".wcCustomTab .wcFrameButton",function(a){$("body").removeClass("wcDisableSelection");for(var c=0;c<b._tabList.length;++c){var d=b._tabList[c];if(d.$close[0]===this){c=d.tab();d.removeTab(c);a.stopPropagation();break}if(d.$tabLeft[0]===this){d._tabScrollPos-=
d.$tabBar.width()/2;0>d._tabScrollPos&&(d._tabScrollPos=0);d.__updateTabs();a.stopPropagation();break}if(d.$tabRight[0]===this){d._tabScrollPos+=d.$tabBar.width()/2;d.__updateTabs();a.stopPropagation();break}}});b.__on(c,"click",".wcFrameButtonBar \x3e .wcFrameButton",function(){$("body").removeClass("wcDisableSelection");for(var a=0;a<b._frameList.length;++a){var c=b._frameList[a];if(c.$close[0]===this){b.__closePanel(c.panel());break}if(c.$collapse[0]===this){var d=c.$collapse.children("div"),a=
m.DOCK.BOTTOM;d.hasClass("wcCollapseLeft")?a=m.DOCK.LEFT:d.hasClass("wcCollapseRight")&&(a=m.DOCK.RIGHT);if(c.isCollapser()){d={};switch(a){case m.DOCK.LEFT:d.w=c.$frame.width();break;case m.DOCK.RIGHT:d.w=c.$frame.width();break;case m.DOCK.BOTTOM:d.h=c.$frame.height()}var e=b._collapser[m.DOCK.LEFT]._parent.right();c.collapse(!0);b.movePanel(c.panel(),a,e,d)}else b.movePanel(c.panel(),a,m.COLLAPSED);b.__update();break}if(c.$tabLeft[0]===this){c._tabScrollPos-=c.$tabBar.width()/2;0>c._tabScrollPos&&
(c._tabScrollPos=0);c.__updateTabs();break}if(c.$tabRight[0]===this){c._tabScrollPos+=c.$tabBar.width()/2;c.__updateTabs();break}for(d=0;d<c._buttonList.length;++d)if(c._buttonList[d][0]===this){d=c._buttonList[d];a={name:d.data("name"),isToggled:!1};d.hasClass("wcFrameButtonToggler")&&(d.toggleClass("wcFrameButtonToggled"),d.hasClass("wcFrameButtonToggled")&&(a.isToggled=!0));c=c.panel();c.buttonState(a.name,a.isToggled);c.__trigger(m.EVENT.BUTTON,a);return}}});b.__on(c,"keyup",function(a){27==a.keyCode&&
b._ghost&&(b._ghost.destroy(),b._ghost=!1,b.trigger(m.EVENT.END_DOCK),b._draggingFrame&&b._draggingFrame.__shadow(!1),b._creatingPanel=!1,b._draggingSplitter=null,b._draggingFrame=null,b._draggingFrameSizer=null,b._draggingFrameTab=null,b._draggingFrameTopper=!1,b._draggingCustomTabFrame=null,b._removingPanel=null)});var d=(new Date).getTime(),e=null,g=0,h=0;this._started=!0;this.setupActions()},__testLoadFinished:function(){for(var a=0;a<this._frameList.length;++a)for(var b=this._frameList[a],c=
0;c<b._panelList.length;++c){var d=b._panelList[c];if(d._isVisible&&!d._initialized||d.$loading)return}var e=this;setTimeout(function(){e.trigger(m.EVENT.LOADED);e.off(m.EVENT.LOADED);for(var a=0;a<e._frameList.length;++a)for(var b=e._frameList[a],c=0;c<b._panelList.length;++c)b._panelList[c].off(m.EVENT.LOADED)},0)},__findInner:function(){function a(a){return!!(a&&a.instanceOf("wcFrame")&&a.panel()&&!a.panel().moveable()||a.instanceOf("wcCollapser"))}for(var b=this._root;b;)if(b.instanceOf("wcSplitter")){var c=
a(b._pane[0]),d=a(b._pane[1]);if(c&&!d)b=b._pane[1];else if(d&&!c)b=b._pane[0];else if(!c&&!d)break}else break;return b},__initCollapsers:function(){function a(a){this._collapser[a]=this.__addCollapser(a,b);b=this._collapser[a]._parent;this._frameList.push(this._collapser[a]._drawer._frame)}if(this.isCollapseEnabled()&&_.isEmpty(this._collapser)){var b=this.__findInner();a.call(this,m.DOCK.LEFT);a.call(this,m.DOCK.RIGHT);a.call(this,m.DOCK.BOTTOM);var c=this;setTimeout(function(){c.__update()})}},
__update:function(a){this._dirty=!0;this._dirtyDontMove=a},__forceUpdate:function(a){this._dirty=!1;this._root&&this._root.__update(a);for(a=0;a<this._floatingList.length;++a)this._floatingList[a].__update()},__orderPanels:function(){if(0!==this._floatingList.length){var a=this._floatingList.indexOf(this._focusFrame);this._floatingList.splice(this._floatingList.length-1,0,this._floatingList.splice(a,1)[0]);for(var b=0;b<this._floatingList.length;++b)if(a=this._floatingList[b]){var c=10+5*b;a.$frame.css("z-index",
c);a.__trigger(m.EVENT.ORDER_CHANGED,c)}}},__mouse:function(a){return a.originalEvent&&(a.originalEvent.touches||a.originalEvent.changedTouches)?(a=a.originalEvent.touches[0]||a.originalEvent.changedTouches[0],{x:a.clientX,y:a.clientY,which:1}):{x:a.clientX||a.pageX,y:a.clientY||a.pageY,which:a.which||1}},__resize:function(a){this._resizeData.time=new Date;this._resizeData.timeout||(this._resizeData.timeout=!0,setTimeout(this.__resizeEnd.bind(this),this._resizeData.delta),this.__trigger(m.EVENT.RESIZE_STARTED));
this.__trigger(m.EVENT.RESIZED);this.__update(!1)},__resizeEnd:function(){new Date-this._resizeData.time<this._resizeData.delta?setTimeout(this.__resizeEnd.bind(this),this._resizeData.delta):(this._resizeData.timeout=!1,this.__trigger(m.EVENT.RESIZE_ENDED))},__focus:function(a,b){var c=this._focusFrame!=a;if(this._focusFrame){this._focusFrame._isFloating&&this._focusFrame.$frame.removeClass("wcFloatingFocus");var d=this._focusFrame;this._focusFrame=null;d.__trigger(m.EVENT.LOST_FOCUS);d.isCollapser()&&
c&&(d.collapse(),d.panel(-1))}if(this._focusFrame=a)this._focusFrame._isFloating&&(this._focusFrame.$frame.addClass("wcFloatingFocus"),c&&$("body").append(this._focusFrame.$frame)),this._focusFrame.__focus(b),this._focusFrame.__trigger(m.EVENT.GAIN_FOCUS);this.__orderPanels()},__trigger:function(a,b){if(a){var c=[];if(this._events[a]){a=this._events[a].slice(0);for(var d=0;d<a.length;++d)c.push(a[d].call(this,b))}return c}},__isLastPanel:function(a){for(var b=0;b<this._frameList.length;++b){var c=
this._frameList[b];if(!c._isFloating&&!c.isCollapser())for(var d=0;d<c._panelList.length;++d){var e=c._panelList[d];if(e!==a&&e.moveable())return!1}}return!0},__isLastFrame:function(a){for(var b=0;b<this._frameList.length;++b){var c=this._frameList[b];if(!c._isFloating&&c!==a&&!c.isCollapser())for(var d=0;d<c._panelList.length;++d)if(c._panelList[d].moveable())return!1}return!0},__create:function(a,b,c){switch(a.type){case "wcSplitter":return a=new (this.__getClass("wcSplitter"))(c,b,a.horizontal),
a.scrollable(0,!1,!1),a.scrollable(1,!1,!1),a;case "wcFrame":return b=new (this.__getClass("wcFrame"))(c,b,a.floating),this._frameList.push(b),a.floating&&this._floatingList.push(b),b;case "wcPanel":if(a.panelType===m.PANEL_PLACEHOLDER)return this._placeholderPanel||(this._placeholderPanel=new (this.__getClass("wcPanel"))(b,m.PANEL_PLACEHOLDER,{}),this._placeholderPanel._isPlaceholder=!0,this._placeholderPanel.__container(this.$transition),this._placeholderPanel._panelObject=new function(a){a.title(!1);
a.closeable(!1)}(this._placeholderPanel),this._placeholderPanel.__container(c)),this._placeholderPanel;for(var d=0;d<this._dockPanelTypeList.length;++d)if(this._dockPanelTypeList[d].name===a.panelType){var e=new (this.__getClass("wcPanel"))(b,a.panelType,this._dockPanelTypeList[d].options);e.__container(this.$transition);e._panelObject=new this._dockPanelTypeList[d].options.onCreate(e,this._dockPanelTypeList[d].options&&this._dockPanelTypeList[d].options.options||{});e.__container(c);break}return e}return null},
__addPanelGrouped:function(a,b,c){var d=b;d&&d.instanceOf("wcPanel")&&(d=b._parent);d&&d.instanceOf("wcFrame")?(c&&c.tabOrientation&&d.tabOrientation(c.tabOrientation),d.addPanel(a)):this.__addPanelAlone(a,m.DOCK.LEFT,b,c)},__addPanelAlone:function(a,b,c,d){var e;c&&c._shift&&(e=c,c=c._shift,e._shift=void 0);if(d){e=this.$container.width();var g=this.$container.height();d.hasOwnProperty("x")&&(d.x=this.__stringToPixel(d.x,e));d.hasOwnProperty("y")&&(d.y=this.__stringToPixel(d.y,g));d.hasOwnProperty("w")||
(d.w=a.initSize().x);d.hasOwnProperty("h")||(d.h=a.initSize().y);d.w=this.__stringToPixel(d.w,e);d.h=this.__stringToPixel(d.h,g);a._size.x=d.w;a._size.y=d.h}if(c===m.COLLAPSED){this.__initCollapsers();if(this._collapser[b]){c=this._collapser[b]._drawer._frame.addPanel(a);var h=this;setTimeout(function(){h.__update()});return a}return!1}if(b===m.DOCK.FLOAT||b===m.DOCK.MODAL)g=new (this.__getClass("wcFrame"))(this.$container,this,!0),d&&d.tabOrientation&&g.tabOrientation(d.tabOrientation),this._frameList.push(g),
this._floatingList.push(g),this.__focus(g),g.addPanel(a),g.pos(a._pos.x,a._pos.y,!1),b===m.DOCK.MODAL&&(g.$modalBlocker=$('\x3cdiv class\x3d"wcModalBlocker"\x3e\x3c/div\x3e'),g.$frame.prepend(g.$modalBlocker),a.moveable(!1),g.$frame.addClass("wcModal"),this._modalList.push(g)),d&&(a=g.pos(void 0,void 0,!0),d.hasOwnProperty("x")&&(a.x=d.x+d.w/2),d.hasOwnProperty("y")&&(a.y=d.y+d.h/2),g.pos(a.x,a.y,!0),g._size={x:d.w,y:d.h}),this.__orderPanels();else{if(c){for(var g=c._parent,k=c;g&&!g.instanceOf("wcSplitter")&&
!g.instanceOf("wcDocker");)k=g,g=g._parent;if(g&&g.instanceOf("wcSplitter")){var p;p=g.pane(0);g.pane(1);e=c=-1;p===k?(p=new (this.__getClass("wcSplitter"))(this.$transition,g,b!==m.DOCK.BOTTOM&&b!==m.DOCK.TOP),c=g.$pane[0].width(),e=g.$pane[0].height(),g.pane(0,p)):(p=new (this.__getClass("wcSplitter"))(this.$transition,g,b!==m.DOCK.BOTTOM&&b!==m.DOCK.TOP),c=g.$pane[1].width(),e=g.$pane[1].height(),g.pane(1,p));if(p){p.scrollable(0,!1,!1);p.scrollable(1,!1,!1);d||(d={w:a._size.x,h:a._size.y});if(d)switch(0>
d.w&&(d.w=c/2),0>d.h&&(d.h=e/2),b){case m.DOCK.LEFT:p.pos(d.w/c);break;case m.DOCK.RIGHT:p.pos(1-d.w/c);break;case m.DOCK.TOP:p.pos(d.h/e);break;case m.DOCK.BOTTOM:p.pos(1-d.h/e)}else p.pos(.5);g=new (this.__getClass("wcFrame"))(this.$transition,p,!1);this._frameList.push(g);b===m.DOCK.LEFT||b===m.DOCK.TOP?(p.pane(0,g),p.pane(1,k)):(p.pane(0,k),p.pane(1,g));g.addPanel(a)}return}}e=this.$container;g=new (this.__getClass("wcFrame"))(this.$transition,this,!1);this._frameList.push(g);if(this._root){p=
new (this.__getClass("wcSplitter"))(e,this,b!==m.DOCK.BOTTOM&&b!==m.DOCK.TOP);g._parent=p;p.scrollable(0,!1,!1);p.scrollable(1,!1,!1);c=e.width();e=e.height();if(d)switch(0>d.w&&(d.w=c/2),0>d.h&&(d.h=e/2),b){case m.DOCK.LEFT:p.pos(d.w/c);break;case m.DOCK.RIGHT:p.pos(1-d.w/c);break;case m.DOCK.TOP:p.pos(d.h/e);break;case m.DOCK.BOTTOM:p.pos(1-d.h/e)}else p.__findBestPos();b===m.DOCK.LEFT||b===m.DOCK.TOP?(p.pane(0,g),p.pane(1,this._root)):(p.pane(0,this._root),p.pane(1,g));this._root=p}else this._root=
g,g.__container(e);g.addPanel(a)}},__addCollapser:function(a,b){var c=null;if(b){for(var d=b._parent;d&&!d.instanceOf("wcSplitter")&&!d.instanceOf("wcDocker");)b=d,d=d._parent;var e=new (this.__getClass("wcSplitter"))(this.$transition,d,a!==m.DOCK.BOTTOM&&a!==m.DOCK.TOP);d&&d.instanceOf("wcDocker")&&(this._root=e,e.__container(this.$container));if(d&&d.instanceOf("wcSplitter")){var g=d.left();d.right();g===b?(d.$pane[0].width(),d.$pane[0].height(),d.pane(0,e)):(e=new (this.__getClass("wcSplitter"))(this.$transition,
d,a!==m.DOCK.BOTTOM&&a!==m.DOCK.TOP),d.$pane[1].width(),d.$pane[1].height(),d.pane(1,e))}if(e){e.scrollable(0,!1,!1);e.scrollable(1,!1,!1);c=new (this.__getClass("wcCollapser"))(this.$transition,e,a);switch(a){case m.DOCK.TOP:case m.DOCK.LEFT:e.pos(0);break;case m.DOCK.BOTTOM:case m.DOCK.RIGHT:e.pos(1)}a===m.DOCK.LEFT||a===m.DOCK.TOP?(e.pane(0,c),e.pane(1,b)):(e.pane(0,b),e.pane(1,c))}}return c},__addPlaceholder:function(a){this._placeholderPanel=new (this.__getClass("wcPanel"))(this,m.PANEL_PLACEHOLDER,
{});this._placeholderPanel._isPlaceholder=!0;this._placeholderPanel.__container(this.$transition);this._placeholderPanel._panelObject=new function(a){a.title(!1);a.closeable(!1)}(this._placeholderPanel);a?this.__addPanelGrouped(this._placeholderPanel,a):this.__addPanelAlone(this._placeholderPanel,m.DOCK.TOP);this.__update()},__closePanel:function(a){var b=!1,c=this.panelTypeInfo(a._type);c&&c.isPersistent&&(b=!0,this._persistentList.push(a));this.removePanel(a,b);this.__update()},__stringToPercent:function(a,
b){if("string"===typeof a){if(-1!==a.indexOf("%",a.length-1))return parseFloat(a)/100;if(-1!==a.indexOf("px",a.length-2))return parseFloat(a)/b}return parseFloat(a)},__stringToPixel:function(a,b){if("string"===typeof a){if(-1!==a.indexOf("%",a.length-1))return parseFloat(a)/100*b;a.indexOf("px",a.length-2)}return parseFloat(a)}});for(var w in m)n[w]=m[w];n.defaultClasses=u;return n})},"davinci/ve/actions/MoveBackwardAction":function(){define(["dojo/_base/declare","./_ReorderAction","davinci/commands/CompoundCommand",
"davinci/ve/commands/ReparentCommand"],function(n,m,k,h){return n("davinci.ve.actions.MoveBackwardAction",[m],{name:"MoveBackward",iconClass:"editActionIcon editMoveBackwardIcon",run:function(d){if(d=this.fixupContext(d)){var b=d&&d.getSelection?d.getSelection():[];if(0!==b.length&&this.selectionSameParentAllAbsoluteAdjacent(b)){for(var c,g=b[0].getParent(),p=g.getChildren(),a=this.getAbsoluteSiblings(b[0]),e=new k,q=b.slice(0),m=a.length-1;0<=m;m--){c=a[m];var n=q.indexOf(c);if(0<=n)q.splice(n,1);
else if(0===q.length)break}p=p.indexOf(c);for(q=a.length-1;0<=q;q--)c=a[q],0<=b.indexOf(c)&&e.add(new h(c,g,p));d.getCommandStack().execute(e)}}},isEnabled:function(d){d=(d=this.fixupContext(d))&&d.getSelection?d.getSelection():[];if(0===d.length||!this.selectionSameParentAllAbsoluteAdjacent(d))return!1;for(var b=this.getAbsoluteSiblings(d[0]),c=0;c<d.length;c++)if(b.indexOf(d[c])>d.length-1)return!0;return!1}})})},"davinci/ve/tools/SelectTool":function(){define("dojo/_base/declare dojo/dom-geometry ../../Workbench ../../workbench/Preferences ./_Tool ../widget ../metadata dojo/dnd/Mover ../../XPathUtils ../../html/HtmlFileXPathAdapter ../Snap ../../commands/CompoundCommand ../commands/AddCommand ../commands/ReparentCommand ../commands/MoveCommand ../commands/ResizeCommand ../commands/ModifyCommand ../tools/CreateTool ../States ../utils/GeomUtils".split(" "),
function(n,m,k,h,d,b,c,g,p,a,e,q,u,w,r,v,x,A,z,y){return n("davinci.ve.tools.SelectTool",d,{CONSTRAIN_MIN_DIST:3,activate:function(a){this._context=a},deactivate:function(){this._setTarget(null)},onMouseDown:function(a){var d=this._context;if(!d.isFocusNode(a.target)){this._shiftKey=a.shiftKey;this._sKey=this._spaceKey=!1;this._areaSelectClear();var e=this._checkFocusXY(a.pageX,a.pageY);e&&"NONE"!==c.getAllowedChild(e.type)[0]&&(e=null);var h=this._getTarget()||b.getEnclosingWidget(a.target);for(e||
(e=h);e&&!e.getContext();)e=b.getEnclosingWidget(e.domNode.parentNode);if(e)if("NONE"===c.getCanSelect(e.type)[0]&&h&&(h=e),dojo.isMac&&a.ctrlKey||2==a.button)d.select(e);else{for(var k=d.getSelection(),p=null,q=0;q<k.length;q++){for(var n=k[q],r=e;r&&r!=d.rootWidget;){if(r==n){p=n;break}r=r.getParent()}if(p)break}r=null;q=dojo.isMac?a.metaKey:a.ctrlKey;this._mouseDownInfo=null;if(0<=dojo.indexOf(k,e))q?d.deselect(e):(r=e,this._mouseDownInfo={widget:e,eventTargetWidget:h,pageX:a.pageX,pageY:a.pageY,
dateValue:Date.now()});else if(q){if(e==d.rootWidget)return;d.select(e,q)}else if(p)r=p,this._mouseDownInfo={widget:e,eventTargetWidget:h,pageX:a.pageX,pageY:a.pageY,dateValue:Date.now()};else{if(e==d.rootWidget){d.deselect();this._areaSelectInit(a.pageX,a.pageY);return}"NONE"===c.getAllowedChild(e.type)[0]?(d.select(e,q),r=e):(this._mouseDownInfo={widget:e,eventTargetWidget:h,pageX:a.pageX,pageY:a.pageY,dateValue:Date.now()},this._areaSelectInit(a.pageX,a.pageY))}if(r&&(e=d.getDocument(),k=e.defaultView&&
e.defaultView.dojo)&&(k=k.style(r.domNode,"position"),this._moverAbsolute="absolute"==k,k=r.getParent(),h=r.getHelper(),!(h&&h.disableDragging&&h.disableDragging(r)||k&&k.isLayout&&k.isLayout()))){this._moverWidget=r;this._moverWidgets=[r];this._moverLastEventTarget=null;d._chooseParent.setProposedParentWidget(null);k=d.getSelection();this._moverStartLocations=[];this._moverStartLocationsRel=[];for(q=0;q<k.length;q++){k[q]!=r&&this._moverWidgets.push(k[q]);p=null;p=(p=k[q].getHelper())&&p.getMarginBoxPageCoords?
p.getMarginBoxPageCoords(k[q]):y.getMarginBoxPageCoordsCached(k[q].domNode);this._moverStartLocations.push(p);if((n=k[q].domNode.offsetParent)&&"BODY"!=n.tagName)var u=y.getBorderBoxPageCoordsCached(n),v=m.getBorderExtents(n),n=p.l-(u.l+v.l),p=p.t-(u.t+v.t);else n=p.l,p=p.t;this._moverStartLocationsRel.push({l:n,t:p})}q=r.domNode;p=q.offsetWidth;k=q.offsetHeight;n=null;h&&h.getMarginBoxPageCoords?(n=h.getMarginBoxPageCoords(r),p=n.w,k=n.h):n=y.getMarginBoxPageCoordsCached(q);q=n.l;h=n.t;r=n.w;n=n.h;
u=d.getScrollOffset();q+=u.x;h+=u.y;this._moverAbsolute?this._moverDragDiv=dojo.create("div",{className:"selectToolDragDiv",style:"left:"+q+"px;top:"+h+"px;width:"+r+"px;height:"+n+"px"},d.rootNode):(r=p+10,k+=10,p=r-8,n=k-8,this._moverDragDiv=dojo.create("div",{className:"flowDragOuter",style:"left:"+(q-5)+"px;top:"+(h-5)+"px;width:"+r+"px;height:"+k+"px"},d.rootNode),dojo.create("div",{className:"flowDragInner",style:"width:"+p+"px;height:"+n+"px"},this._moverDragDiv));this._mover=new g(this._moverDragDiv,
a,this);this._altKey=a.altKey;this._updateMoveCursor();(a=document.getElementById("maqetta_project_select"))&&a.focus();e.defaultView.focus()}}}},onMouseUp:function(a){var b=this._context;if(!b.isFocusNode(a.target)){var c=1===a.which,d=Date.now();this._mouseDownInfo&&(10>=Math.abs(a.pageX-this._mouseDownInfo.pageX)&&10>=Math.abs(a.pageY-this._mouseDownInfo.pageY)&&750>=d-this._mouseDownInfo.dateValue&&(this._context.select(this._mouseDownInfo.eventTargetWidget?this._mouseDownInfo.eventTargetWidget:
this._mouseDownInfo.widget),c=!1),this._mouseDownInfo=null);if(this._lastMouseUp&&10>=Math.abs(a.pageX-this._lastMouseUp.pageX)&&10>=Math.abs(a.pageY-this._lastMouseUp.pageY)&&750>=d-this._lastMouseUp.dateValue)this.onDblClick(a);this._lastMouseUp={pageX:a.pageX,pageY:a.pageY,dateValue:d};b.getScrollOffset();this._areaSelect&&c&&this._areaSelectSelectWidgets(a.pageX,a.pageY);this._areaSelectClear()}},onDblClick:function(a){if(!this._context.isFocusNode(a.target)){for(var c="selectToolDragDiv"===a.target.getAttribute("class")?
this._context.getSelection()[0]:this._getTarget()||b.getEnclosingWidget(a.target);c&&!c.getContext();)c=b.getEnclosingWidget(c.domNode.parentNode);if(c){var d=this._context.getSelection(),e=dojo.isMac?a.ctrlKey:a.metaKey;0<=dojo.indexOf(d,c)?e&&2!==a.button?this._context.deselect(c):2!==a.button&&this._context.select(c,null,!0):this._context.select(c,e,!0)}}},onMouseMove:function(a){this._context.isFocusNode(a.target)||(this._setTarget(a.target,a),this._areaSelect&&(1===a.which?this._areaSelectUpdate(a.pageX,
a.pageY):this._areaSelectClear()))},onMouseOver:function(a){try{dojo.hasClass(a.target,"editFeedback")||dojo.hasClass(a.target,"selectToolDragDiv")||(this._onMouseOverEventTargetXPath=p.getXPath(a.target)),this._setTarget(a.target,a)}catch(C){}},onMouseOut:function(a){try{this._setTarget(a.relatedTarget,a)}catch(C){}},onExtentChange:function(a){var d=a.index,e=a.newBox,g=a.copy,h=a.oldBoxes,k=a.applyToWhichStates,p,n=this._context,x=n._chooseParent,z=n.getSelection(),B=[];if(!(z.length<=d)){var P=
z[d],L=void 0;if("w"in e||"h"in e){var d=c.queryDescriptor(P.type,"resizable"),K,M;a=P.domNode;var U=a.ownerDocument.defaultView.getComputedStyle(a),x=y.getMarginExtents(a,U),V=m.getBorderExtents(a,U);a=m.getPadExtents(a,U);"number"==typeof e.w&&(e.w-=x.w+V.w+a.w);"number"==typeof e.h&&(e.h-=x.h+V.h+a.h);switch(d){case "width":K=e.w;break;case "height":M=e.h;case "both":K=e.w,M=e.h}d=new v(P,K,M,k);L||(L=new q);L.add(d);d=dojo.style(P.domNode,"position");"l"in e&&"t"in e&&"absolute"==d&&(K=e.l,e=
e.t,e=new r(P,K,e,null,null,k),L.add(e))}else if(a=P.getStyleNode(),"absolute"!=dojo.style(a,"position")){var I=x.getProposedParentWidget();if(I){L||(L=new q);var T=null;a=n.reorderPreserveSiblingOrder(z);dojo.forEach(a,function(a){I.refChild&&(null!==T?p=T+1:(p=I.parent.getChildren().indexOf(I.refChild),0<=p?I.refAfter&&p++:p=null),T=p);if(g){var c,d=a.getData({identify:!1});d.context=n;dojo.withDoc(n.getDocument(),function(){c=b.createWidget(d)},this);c&&(L.add(new u(c,I.parent,p)),A.prototype.checkAddToCurrentState(L,
c),B.push(c))}else L.add(new w(a,I.parent,p)),B.push(a)},this);n.select(null)}else console.error("SelectTool: ppw is null")}else{var Z=[],S=[];dojo.forEach(z,function(a,b){Z[b]=z[b].getParent();S[b]=Z[b].indexOf(a)});K=e.l;e=e.t;L||(L=new q);var W=(I=x.getProposedParentWidget())?I.parent:null;a=P.getParent();M=void 0;W&&W!=a&&(M=W);var R=K-h[0].l,Y=e-h[0].t;g&&(a=n.reorderPreserveSiblingOrder(z),dojo.forEach(a,function(a){var c=a.getParent();if(c){for(var d=c.getChildren(),e=0;e<d.length&&d[e]!=a;e++);
var g,h=a.getData({identify:!1});h.context=n;dojo.withDoc(n.getDocument(),function(){g=b.createWidget(h)},this);g&&(W?L.add(new u(g,W,-1)):L.add(new u(g,c,e)),A.prototype.checkAddToCurrentState(L,g),B.push(g))}},this),newWidget=B[d]);var X=g?newWidget:P,ba=new r(X,K,e,null,h[d],k);L.add(ba);M&&(L.add(new w(X,W,"last")),L.add(new r(X,K,e,null,null,k)));dojo.forEach(z,dojo.hitch(this,function(a,b){X=g?B[b]:a;if(a!=P){var c=h[b].l+R,d=h[b].t+Y;"absolute"==a.getStyleNode().style.position&&(b=new r(X,
c,d,ba,h[b],k,!0),L.add(b));a=a.getParent();W&&W!=a&&(L.add(new w(X,W,"last")),L.add(new r(X,c,d,null,null,k,!0)))}}));g&&dojo.forEach(z,dojo.hitch(this,function(a,b){L.add(new w(z[b],Z[b],S[b]));L.add(new r(z[b],h[b].l,h[b].t,null,h[b],k,!0))}))}L?(n.getCommandStack().execute(L),dojo.forEach(B,function(a,b){n.select(a,0<b)},this)):n.select(P)}},_updateMoveCursor:function(){var a=this._context.getDocument().body;this._moverDragDiv&&(this._altKey?dojo.addClass(a,"selectToolDragCopy"):dojo.addClass(a,
"selectToolDragMove"))},onKeyDown:function(a){if(a)switch(dojo.stopEvent(a),a.keyCode){case dojo.keys.SHIFT:this._shiftKey=!0;e.clearSnapLines(this._context);break;case dojo.keys.ALT:this._altKey=!0;this._updateMoveCursor();break;case dojo.keys.SPACE:this._spaceKey=!0;break;case 83:this._sKey=!0;break;case dojo.keys.TAB:this._moveFocus(a)&&dojo.stopEvent(a);break;case dojo.keys.RIGHT_ARROW:case dojo.keys.LEFT_ARROW:case dojo.keys.DOWN_ARROW:case dojo.keys.UP_ARROW:this._move(a)}},onKeyUp:function(a){if(a&&
this._moverWidget)switch(dojo.stopEvent(a),a.keyCode){case dojo.keys.SHIFT:this._shiftKey=!1;break;case dojo.keys.ALT:this._altKey=!1;this._updateMoveCursor();break;case dojo.keys.SPACE:this._spaceKey=!1;break;case 83:this._sKey=!1}},_move:function(a){var b=this._context.getSelection();if(0!==b.length){var c=0,d=0,e=a.shiftKey?10:1;switch(a.keyCode){case dojo.keys.RIGHT_ARROW:c=e;break;case dojo.keys.LEFT_ARROW:c=-e;break;case dojo.keys.DOWN_ARROW:d=e;break;case dojo.keys.UP_ARROW:d=-e}var g=new q;
dojo.forEach(b,function(a){var b=null,b=(b=a.getHelper())&&b.getMarginBoxPageCoords?b.getMarginBoxPageCoords(a):y.getMarginBoxPageCoords(a.domNode);g.add(new r(a,b.l+c,b.t+d))},this);g.isEmpty()||(this._context.getCommandStack().execute(g),this._updateTargetOverlays())}},_moveFocus:function(a){a=a.shiftKey?-1:1;for(var b=this._context.getSelection()[0],c=this._context.getTopWidgets(),b=b?dojo.indexOf(c,b)+a:0<a?0:c.length-1,d=c[b];d&&!d.getContext();)b+=a,d=c[b];d&&this._context.select(d);return d},
onMove:function(a,b,c){this._mouseDownInfo=null;a=this._context;var d=a._chooseParent,e=a.getSelection(),g=e.indexOf(this._moverWidget);if(0>g)console.error("SelectTool.js onMove error. move widget is not selected");else{this._selectionHideFocus();var p=!1,q=d.getProposedParentWidget();if(q&&q.parent&&q.parent.domNode){var m=q.parent.domNode;if("BODY"==q.parent.domNode.tagName)p=!0;else for(q=c.target;q&&"BODY"!=q.tagName;){if(q==m){p=!0;break}q=q.parentNode}}p&&c.target==this._moverLastEventTarget||
d.setProposedParentWidget(null);this._moverLastEventTarget=c.target;this._moverBox=b;this._moverDragDiv.style.left=b.l+"px";this._moverDragDiv.style.top=b.t+"px";if(this._moverAbsolute)for(p=b.l-this._moverStartLocations[g].l,b=b.t-this._moverStartLocations[g].t,g=Math.abs(p),m=Math.abs(b),this._shiftKey&&(g>=this.CONSTRAIN_MIN_DIST||m>=this.CONSTRAIN_MIN_DIST)&&(g>m?b=0:p=0),g=0;g<e.length;g++)m=e[g],q=this._moverStartLocationsRel[g].t,m.domNode.style.left=this._moverStartLocationsRel[g].l+p+"px",
m.domNode.style.top=q+b+"px";p=this._moverWidget.type;e=this._moverWidget.getParent();(b=d.parentListDivGet())||(b=d.parentListDivCreate({widgetType:p,absolute:this._moverAbsolute,doCursor:!this._moverAbsolute,beforeAfter:null,currentParent:e}));if(g=a.getParentIframe()){offsetTop=offsetLeft=0;for(offsetNode=g;offsetNode&&"BODY"!=offsetNode.tagName;)offsetLeft+=offsetNode.offsetLeft,offsetTop+=offsetNode.offsetTop,offsetNode=offsetNode.offsetParent;g=y.getScrollLeft(a.rootNode.parentNode);m=y.getScrollTop(a.rootNode.parentNode);
b.style.left=offsetLeft+c.pageX-g+"px";b.style.top=offsetTop+c.pageY-m+"px"}b=h.getPreferences("davinci.ve.editorPrefs",k.getProject());b=!this._shiftKey&&b.snap&&this._moverAbsolute;g=a.getPreference("showPossibleParents");g=!0;d=d.isSpaceKeyDown()||this._spaceKey;d=!g&&d||g&&!d;p={type:p};g={x:c.pageX,y:c.pageY};m=null;m=(m=this._moverWidget.getHelper())&&m.getMarginBoxPageCoords?m.getMarginBoxPageCoords(this._moverWidget):y.getMarginBoxPageCoords(this._moverWidget.domNode);a.dragMoveUpdate({widgets:this._moverWidgets,
data:p,eventTarget:c.target,position:g,absolute:this._moverAbsolute,currentParent:e,rect:m,doSnapLinesX:b,doSnapLinesY:b,doFindParentsXY:d,doCursor:!this._moverAbsolute})}},onFirstMove:function(a){},onMoveStart:function(a){},onMoveStop:function(b){b=this._context;var c=this._context._chooseParent;this._moverWidget&&this._moverWidget._srcElement&&p.getXPath(this._moverWidget._srcElement,a);var d=!0,e,g;this._moverBox&&this._moverWidget&&this._moverWidget.domNode?(g={l:this._moverBox.l,t:this._moverBox.t},
e=b.getSelection().indexOf(this._moverWidget),0>e&&(d=!1)):d=!1;if(d){d=void 0;if(this._sKey)for(var h=z.getStatesListCurrent(this._moverWidget.domNode),k=0;k<h.length;k++){if(h[k]){d=h[k];break}}else d=z.propertyDefinedForAnyCurrentState(this._moverWidget.domNode,["left","top","right","bottom"]);var q=this._getPageLeftTop(this._moverWidget.domNode.offsetParent),h=b.getScrollOffset(),k=Math.abs(g.l-q.l-this._moverStartLocations[e].l),q=Math.abs(g.t-q.t-this._moverStartLocations[e].t);this._shiftKey&&
(k>=this.CONSTRAIN_MIN_DIST||q>=this.CONSTRAIN_MIN_DIST)&&(k>q?g.t=this._moverStartLocations[e].t:g.l=this._moverStartLocations[e].l);g.t-=h.y;g.l-=h.x;this.onExtentChange({index:e,newBox:g,oldBoxes:this._moverStartLocations,copy:this._altKey,applyToWhichStates:d})}this._moverDragDiv&&((e=this._moverDragDiv.parentNode)&&e.removeChild(this._moverDragDiv),this._moverDragDiv=null);this._mover=this._moverBox=this._moverWidget=this._moverWidgets=this._moverLastEventTarget=null;this._updateMoveCursor();
b.dragMoveCleanup();c.parentListDivDelete();this._selectionShowFocus();c=p.toCssPath(this._onMouseOverEventTargetXPath);b=b.getDocument();(b=c?b.querySelector(c):null)&&this._setTarget(b)},_getPageLeftTop:function(a){if(a){var b=a.offsetLeft,c=a.offsetTop;for(a=a.offsetParent;a&&"BODY"!=a.tagName;)b+=a.offsetLeft,c+=a.offsetTop,a=a.offsetParent;return{l:b,t:c}}return{l:0,t:0}},_areaSelectInit:function(a,b){this._areaSelect={x:a,y:b,attached:!1};this._areaSelectDiv=dojo.create("div",{className:"areaSelectDiv",
style:"display:none"})},_areaSelectUpdate:function(a,b){this._areaSelect&&this._areaSelectDiv&&(a=this._getBounds(this._areaSelect.x,this._areaSelect.y,a,b),b=this._areaSelectDiv.style,b.display="block",b.left=a.l+"px",b.top=a.t+"px",b.width=a.w+"px",b.height=a.h+"px",this._areaSelect.attached||(this._context.rootNode.appendChild(this._areaSelectDiv),this._areaSelect.attached=!0))},_areaSelectClear:function(){this._areaSelect=null;if(this._areaSelectDiv){var a=this._areaSelectDiv.parentNode;a&&a.removeChild(this._areaSelectDiv);
this._areaSelectDiv=null}},_areaSelectSelectWidgets:function(a,b){if(this._areaSelect){var c=this._getBounds(this._areaSelect.x,this._areaSelect.y,a,b);a=c.l;b=c.t;var d=c.w,c=c.h,e=this._context;e.deselect();for(var e=e.getTopWidgets(),g=0;g<e.length;g++)this._areaSelectRecursive(e[g],a,b,d,c)}},_areaSelectRecursive:function(a,b,c,d,e){if(a&&a.domNode){var g=y.getBorderBoxPageCoordsCached(a.domNode);if(g.l>=b&&g.t>=c&&g.l+g.w<=b+d&&g.t+g.h<=c+e)this._context.select(a,!0);else for(a=a.getChildren(),
g=0;g<a.length;g++)this._areaSelectRecursive(a[g],b,c,d,e)}},_getBounds:function(a,b,c,d){var e={};a<=c?(e.l=a,e.w=c-a):(e.l=c,e.w=a-c);b<=d?(e.t=b,e.h=d-b):(e.t=d,e.h=b-d);return e},_checkFocusXY:function(a,b){for(var c=this._context,d=c.getSelection(),e=0;e<d.length;e++){var g=c._focuses[e].getBounds();if(a>=g.l&&a<=g.l+g.w&&b>=g.t&&b<=g.t+g.h)return d[e]}return null},_selectionHideFocus:function(){for(var a=this._context,b=a.getSelection(),c=0;c<b.length;c++)a._focuses[c].hide()},_selectionShowFocus:function(){for(var a=
this._context,b=a.getSelection(),c=0;c<b.length;c++)a._focuses[c].show(b[c],{})}})})},"dojo/data/util/simpleFetch":function(){define(["../../_base/lang","../../_base/kernel","./sorter"],function(n,m,k){var h={};n.setObject("dojo.data.util.simpleFetch",h);h.errorHandler=function(d,b){b.onError&&b.onError.call(b.scope||m.global,d,b)};h.fetchHandler=function(d,b){var c=b.abort||null,g=!1,h=b.start?b.start:0,a=b.count&&Infinity!==b.count?h+b.count:d.length;b.abort=function(){g=!0;c&&c.call(b)};var e=
b.scope||m.global;b.store||(b.store=this);b.onBegin&&b.onBegin.call(e,d.length,b);b.sort&&d.sort(k.createSortFunction(b.sort,this));if(b.onItem)for(var q=h;q<d.length&&q<a;++q){var n=d[q];g||b.onItem.call(e,n,b)}b.onComplete&&!g&&(q=null,b.onItem||(q=d.slice(h,a)),b.onComplete.call(e,q,b))};h.fetch=function(d){d=d||{};d.store||(d.store=this);this._fetchItems(d,n.hitch(this,"fetchHandler"),n.hitch(this,"errorHandler"));return d};return h})},"xblox/model/events/OnEvent":function(){define("dcl/dcl dojo/_base/lang dojo/Deferred xblox/model/Block xide/utils xide/types xide/mixins/EventedMixin xblox/model/Referenced xide/registry dojo/on xwire/_Base".split(" "),
function(n,m,k,h,d,b,c,g,p,a,e){return n([h,c.dcl,g.dcl,e],{declaredClass:"xblox.model.events.OnEvent",name:"On Event",event:"",reference:"",references:null,sharable:!0,_didSubscribe:!1,filterPath:"item.name",filterValue:"",valuePath:"item.value",_nativeEvents:"onclick ondblclick onmousedown onmouseup onmouseover onmousemove onmouseout onkeypress onkeydown onkeyup onfocus onblur onchange".split(" "),stop:function(){this._destroy()},solve:function(a,b,c,d){c&&this._destroy();b=this._lastSettings=b||
this._lastSettings;if(!this._didSubscribe)return this._registerEvent(this.event),this.onSuccess(this,b),!1;this.onSuccess(this,b);this._currentIndex=0;this._return=[];a=this[this._getContainer()];if(a.length)return a=this.runFrom(a,0,b),this.onSuccess(this,b),a;this.onSuccess(this,b);return[]},toText:function(){var a=this.getBlockIcon()+" "+this.name+" :: ";this.event&&(a+=this.event);return a},canAdd:function(){return[]},getFields:function(){var a=this.inherited(arguments)||this.getDefaultFields();
this.deserialize(this.reference);var c=null;if(-1<d.contains(this._nativeEvents,this.event))for(var c=[{label:"onclick",value:"onclick"},{label:"ondblclick",value:"ondblclick"},{label:"onmousedown",value:"onmousedown"},{label:"onmouseup",value:"onmouseup"},{label:"onmouseover",value:"onmouseover"},{label:"onmousemove",value:"onmousemove"},{label:"onmouseout",value:"onmouseout"},{label:"onkeypress",value:"onkeypress"},{label:"onkeydown",value:"onkeydown"},{label:"onkeyup",value:"onkeyup"},{label:"onfocus",
value:"onfocus"},{label:"onblur",value:"onblur"},{label:"onchange",value:"onchange"}],e=0;e<c.length;e++){var g=c[e];if(g.value===this.event){g.selected=!0;break}}else c=this.scope.getEventsAsOptions(this.event);a.push(d.createCI("Event",b.ECIType.ENUMERATION,this.event,{group:"General",options:c,dst:"event",widget:{search:!0}}));a.push(d.createCI("Filter Path",13,this.filterPath,{group:"General",dst:"filterPath"}));a.push(d.createCI("Filter Value",13,this.filterValue,{group:"General",dst:"filterValue"}));
a.push(d.createCI("Value Path",13,this.valuePath,{group:"General",dst:"valuePath"}));a.push(d.createCI("Object/Widget",b.ECIType.WIDGET_REFERENCE,this.reference,{group:"Widget",dst:"reference",value:this.reference}));return a},getBlockIcon:function(){return'\x3cspan class\x3d"fa-bell"\x3e\x3c/span\x3e'},onEvent:function(a){this._lastResult=a;if(this.filterPath&&this.filterValue){var b=this.getValue(a,this.filterPath);if(b&&this.filterValue!==b)return}b=null;this.valuePath&&(this._lastSettings||(this._lastSettings=
{}),b=this.getValue(a,this.valuePath),null!==b&&(!this._lastSettings.override&&(this._lastSettings.override={}),this._lastSettings.override.args=[b]));this.solve(this.scope,this._lastSettings)},_subscribe:function(b,c,e){if(b)if(-1==d.contains(this._nativeEvents,b))this.__events&&this.__events[b]&&(e=this.__events[b],_.each(e,function(a){this.unsubscribe(a.type,a.handler);a.remove()},this),_.each(e,function(a){this.__events[b].remove(a)},this)),this.subscribe(b,this.onEvent);else if(e){c=b.replace("on",
"");var g=this;e=a(e,c,function(a){g.onEvent(a)});this._events.push(e)}},_registerEvent:function(a){try{if(!a||!a.length)return;var b=this.resolveReference(this.deserialize(this.reference)),c=this;if(b&&b.length)for(var d=0;d<b.length;d++){var e=b[d];if(e&&e.id){var g=p.byId(e.id);if(g&&g.on){var h=this.event.replace("on",""),k=g.on(h,m.hitch(this,function(a){c.onEvent(a)}));this._events.push(k)}else this._subscribe(a,this.onEvent,e)}else this._subscribe(a,this.onEvent,e)}else this._subscribe(a,this.onEvent)}catch(y){logError(y,
"registering event failed")}this._didSubscribe=a},onLoad:function(){this._onLoaded=!0;this.event&&this.event.length&&this.enabled&&this._registerEvent(this.event)},updateEventSelector:function(a,c){var d=[];if(a&&a.length)for(d=[{label:"onclick",value:"onclick"},{label:"ondblclick",value:"ondblclick"},{label:"onmousedown",value:"onmousedown"},{label:"onmouseup",value:"onmouseup"},{label:"onmouseover",value:"onmouseover"},{label:"onmousemove",value:"onmousemove"},{label:"onmouseout",value:"onmouseout"},
{label:"onkeypress",value:"onkeypress"},{label:"onkeydown",value:"onkeydown"},{label:"onkeyup",value:"onkeyup"},{label:"onfocus",value:"onfocus"},{label:"onblur",value:"onblur"},{label:"onchange",value:"onchange"}],a=0;a<d.length;a++){var e=d[a];if(e.value===this.event){e.selected=!0;break}}else d=this.scope.getEventsAsOptions(this.event);for(a=0;a<c.length;a++)if(e=c[a],e.widget&&"Event"===e.widget.title){c=e._widget;c.nativeWidget.set("options",d);c.nativeWidget.reset();c.nativeWidget.set("value",
this.event);this.publish(b.EVENTS.RESIZE,{});break}},onReferenceChanged:function(a,b){this._destroy();this.reference=a;a=this.resolveReference(this.deserialize(a));this.updateEventSelector(a,b);this._registerEvent(this.event)},onChangeField:function(a,b,c){"event"==a&&(this._destroy(),this._onLoaded&&(this.event=b,this._registerEvent(b)));if("reference"==a)this.onReferenceChanged(b,c);this.inherited(arguments)},activate:function(){this._destroy();this._registerEvent(this.event)},deactivate:function(){this._destroy()},
_destroy:function(){this._events||(this._events=[]);_.each(this._events,dojo.unsubscribe);this.unsubscribe(this.event,this.onEvent);this._lastResult=null;this._didSubscribe=!1}})})},"davinci/ve/actions/_SelectAncestorAction":function(){define(["dojo/_base/declare","davinci/ve/actions/ContextAction"],function(n,m){return n("davinci.ve.actions._SelectAncestorAction",[m],{shouldShow:function(k){return(k=this.fixupContext(k))&&k.editor&&"davinci.ve.HTMLPageEditor"==k.editor.editorID},selectionSameParentNotBody:function(k){if(!k||
0===k.length)return!1;var h=k[0].getParent();if(!h||!h.domNode)return!1;for(var d=0;d<k.length;d++)if(k[d].getParent()!=h)return!1;return!0}})})},"davinci/lang/ui/common":function(){define([],function(){return{save:"Save",cancel:"Cancel",discard:"Discard",sawdTitle:"Save As Widget",name:"Name",id:"ID",version:"Version",required:"required",sawfDesc:"Enter the following information to complete the custom widget metadata.",sawfMetadataTitle:"Edit full metadata for custom widget (advanced)",sawfNamePrompt:'A unique "common" name.',
sawfIdPrompt:"A unique identifier for this widget in the form of a URI."}})},"xblox/model/mqtt/Subscribe":function(){define("dcl/dcl xdojo/has xblox/model/Block xide/utils xblox/model/Contains xide/types".split(" "),function(n,m,k,h,d,b,c,g){return n([k,d],{declaredClass:"xblox.model.mqtt.Subscribe",name:"Subscribe",topic:"Topic",args:"",deferred:!1,sharable:!0,context:null,icon:"fa-bell",path:"",qos:0,stop:function(){var b=this.getInstance();b&&b.callMethod("unSubscribeTopic",h.mixin({topic:this.topic},
h.getJson(this.args||{})),this.id,this.id)},onData:function(b){if(b&&b.topic&&b.topic==this.topic){delete b.src;delete b.id;var a=this[this._getContainer()],c=this._lastSettings,d=[];if(0<a.length){var a=b,g=this.path&&this.path.length?this.path:null!==b.payload?"payload":null;g&&_.isObject(b)&&(a=h.getAt(b,g,b));for(b=0;b<this.items.length;b++)g=this.items[b],g.enabled&&(g.override={args:[a]},d.push(g.solve(this.scope,c)))}this.onSuccess(this,this._lastSettings);return d}},observed:["topic"],getContext:function(){return this.context||
(this.scope.getContext?this.scope.getContext():this)},solve:function(b,a){this._currentIndex=0;this._return=[];this._lastSettings=a;(b=this.getInstance())&&b.callMethod("subscribeTopic",h.mixin({topic:this.topic,qos:this.qos},h.getJson(this.args||"{}")),this.id,this.id);a=a||{};this.onRunThis(a)},toText:function(){var b='\x3cspan style\x3d""\x3e'+this.getBlockIcon()+""+this.makeEditable("topic","bottom","text","Enter a topic","inline")+" :: \x3c/span\x3e";this.topic&&(b+=this.topic.substr(0,30));
return b},canAdd:function(){return[]},getFields:function(){var c=this.inherited(arguments)||this.getDefaultFields();c.push(h.createCI("name",13,this.name,{group:"General",title:"Name",dst:"name"}));c.push(h.createCI("arguments",27,this.args,{group:"Arguments",title:"Arguments",dst:"args"}));c.push(h.createCI("topic",b.ECIType.STRING,this.topic,{group:"General",title:"Topic",dst:"topic",select:!0}));c.push(h.createCI("name",b.ECIType.ENUMERATION,this.qos,{group:"General",title:"QOS",dst:"qos",widget:{options:[{label:"0 - at most once",
value:0},{label:"1 - at least once",value:1},{label:"2 - exactly once",value:2}]}}));c.push(h.createCI("path",b.ECIType.STRING,this.path,{group:"General",title:"Value Path",dst:"path"}));return c}})})},"davinci/actions/SelectThemeAction":function(){define("dojo/_base/declare ./Action ../ui/widgets/ThemeSetSelection ../ve/commands/ChangeThemeCommand davinci/lang/actions davinci/Workbench".split(" "),function(n,m,k,h,d,b){return n("davinci.actions.SelectThemeAction",m,{run:function(c){if((c=davinci.Workbench.getOpenEditor())&&
c.isDirty){var g=c.getOnUnloadWarningMessage();g||(g=dojo.string.substitute(d.filesHasUnsavedChanges,[c.fileName]));b.showDialog({title:d.switchingThemes,content:g,style:{width:300},okCallback:dojo.hitch(this,this._okToSwitch),okLabel:d.save,hideCancel:null})}else this._okToSwitch()},_okToSwitch:function(){var b=davinci.Workbench.getOpenEditor();b.isDirty&&b.save();var d=b.getContext().getTheme(),b=b.getContext().getDojo().version.major+"."+b.getContext().getDojo().version.minor;this._themeChooser=
new k({value:d,workspaceOnly:!1,dojoVersion:b});this._themeChooser.buildRendering()},_changeTheme:function(){var b=this._themeChooser.attr("value");this._themeChooser.onClose();this._themeChooser.destroy();var d=davinci.Workbench.getOpenEditor();d&&d.getContext&&d.getContext().getCommandStack().execute(new h(b,d.getContext()))}})})},"xide/$":function(){define([],function(){if("undefined"!==typeof $)return $})},"wcDocker/wcDocker":function(){define([],function(){})},"davinci/ve/palette/HtmlWidgets":function(){define(["dojo/_base/declare",
"davinci/workbench/ViewPart","davinci/ve/palette/Palette"],function(n,m,k){return n("davinci.ve.palette.HtmlWidgets",m,{constructor:function(h,d){dojo.subscribe("/davinci/ui/editorSelected",dojo.hitch(this,this._editorSelected))},_editorSelected:function(h){h.editor&&h.editor.supports("palette")?(this.setContext([h.editor.getContext()]),dojo.removeClass(this.palette.domNode,"dijitHidden")):(this.palette.domNode.scrollTop=0,dojo.addClass(this.palette.domNode,"dijitHidden"))},postCreate:function(){this.inherited(arguments);
this.attachToolbar();this.palette=new k({toolbarDiv:this.toolbarDiv});this.palette.descriptors="dijit,dojox,html,OpenAjax";this.setContent(this.palette);this.palette._loadPalette();dojo.addClass(this.palette.domNode,"dijitHidden")},setContext:function(h){this.palette.setContext(h[0])}})})},"xace/views/_Actions":function(){define("dcl/dcl xide/utils xide/types xide/types/Types xaction/types xaction/ActionProvider xace/views/ACEEditor xaction/Toolbar xaction/DefaultActions dojo/Deferred xace/formatters".split(" "),
function(n,m,k,h,d,b,c,g,p,a,e){h=k.ACTION;var q=k.VIEW_SPLIT_MODE;h=[h.RELOAD,h.SAVE,h.FIND,h.TOOLBAR,"Editor/Keyboard","View/Increase Font Size","View/Decrease Font Size","View/Themes","Help/Editor Shortcuts","Editor/Snippets","Editor/Console","Editor/Settings",h.FULLSCREEN,"View/Layout","Edit/Format"];b=n([c,g.dcl,b.dcl],{permissions:h,_searchBoxOpen:!1,onSingleView:function(){},setSplitMode:function(a){this.splitMode=a;if(!this.doSplit)if("Diff"==a)this.doDiff();else{var b=a==q.SPLIT_HORIZONTAL||
a==q.SPLIT_VERTICAL,c=this.getEditor(),d=this.split;b?(b=1==d.getSplits(),d.setOrientation(a==q.SPLIT_HORIZONTAL?d.BELOW:d.BESIDE),d.setSplits(2),b&&(a=d.getEditor(0).session,d.setSession(a,1).name=a.name,c=c.getOptions(),d.getEditor(1).setOptions(c))):(d.setSplits(1),this.onSingleView())}},onMaximized:function(a){var b=this.getParent();!1===a&&b&&b.resize&&b.resize();var c=this.getToolbar();c&&(a?$(c.domNode).addClass("bg-opaque"):$(c.domNode).removeClass("bg-opaque"));!1===a&&(this.resize(),b&&
m.resizeTo(this,b,!0,!0),this.publish(k.EVENTS.ON_VIEW_MAXIMIZE_END));this.getEditor().focus()},maximize:function(){var a=this.domNode,b=$(a);this.getToolbar();if(this._isMaximized)this._isMaximized=!1,b.removeClass("AceEditorPaneFullScreen"),this._lastParent.appendChild(a),m.destroy(this._maximizeContainer);else{this.publish(k.EVENTS.ON_VIEW_MAXIMIZE_START);this._isMaximized=!0;var b=$(this.domNode.ownerDocument),c=$("body")[0],d=m.create("div",{className:"ACEContainer bg-opaque",style:"z-index:300;height:100%;width:100%"});
this._maximizeContainer=d;c.appendChild(d);$(a).addClass("AceEditorPaneFullScreen");$(a).css("width",b.width());$(a).css("height",b.height());this.resize();this._lastParent=a.parentNode;d.appendChild(a);$(d).addClass("bg-opaque");$(d).css("width",b.width());$(d).css("height",b.height());$(d).css({position:"absolute",left:"0px",top:"0px",border:"none medium",width:"100%",height:"100%"})}this.onMaximized(this._isMaximized);return!0},save:function(a){var b=this.get("value"),c=this.saveContent(this.get("value"),
a),d=this;this._emit(k.EVENTS.ON_FILE_CONTENT_CHANGED,{content:b,item:a});setTimeout(function(){var a=d.getEditor();a&&a.focus()},600);return c},reload:function(){var b=this,c=new a;this.getContent(this.item,function(a){b.lastSavedContent=a;b.set("value",a);c.resolve(a)},function(a){logError(a,"error loading content from file");c.reject(a)});return c},runAction:function(a){a=this.getAction(a);if(!a)return!1;var b=this,c=a.command,d=k.ACTION,g=this.getEditor(),h=this.editorSession;-1!=c.indexOf("View/Layout")&&
b.setSplitMode(a.option,null);switch(c){case d.RELOAD:return this.reload();case "View/Increase Font Size":return g.setFontSize(g.getFontSize()+1),!0;case "View/Decrease Font Size":return g.setFontSize(g.getFontSize()-1),!0;case d.FULLSCREEN:return this.maximize();case "Help/Editor Shortcuts":b.showHelp();break;case d.SAVE:b.save(this.item);break;case d.FIND:var p=function(a){b._searchBoxOpen?(a.hide(),b._searchBoxOpen=!1):(a.show(g.session.getTextRange(),null),b._searchBoxOpen=!0)},h=ace.require("ace/lib/net"),
c=this.getWebRoot();(d=g.searchBox)?p(d):h.loadScript(c+"/xfile/ext/ace/ext-searchbox.js",function(a){a=ace.require("ace/ext/searchbox");p(new a.SearchBox(g))});return!0}if(-1!==c.indexOf("View/Themes")){b.set("theme",a.theme);if(d=a.getParent?a.getParent():null)d=d.getChildren(),_.each(d,function(a){a.set("icon",a._oldIcon)});a.set("icon","fa fa-check")}-1!==c.indexOf("Edit/Format")&&g&&(d=e.format(g,a.formatter),b.set("value",d));if(-1!==c.indexOf("Editor/Settings")){var c=a.option,d=g.getOption(a.option),
q=_.isBoolean(d);if("highlightActive"===c){g.setHighlightActiveLine(!g.getHighlightActiveLine());return}if(q)g.setOption(a.option,!d);else{if("wordWrap"===c)return h=h.getUseWrapMode(),this.set("wordWrap",!h),!0;"off"===d||"on"===d?g.setOption(c,"off"===d?"on":"off"):g.setOption(a.option,!1)}return!0}return this.inherited(arguments)},getEditorActions:function(a){function b(a,b,e,g,h,k,p,q){h=h=h||{};a=d.createAction(m.mixin({label:a,command:b||"Editor/Settings/"+a||"Editor/Settings/"+a,icon:e||"fa-cogs",
group:k||"Settings",mixin:m.mixin({addPermission:!0,option:g,actionType:p,owner:d},h)},q));c.push(a);return a}var c=[],d=this,g=k.ACTION,h=k.ACTION_ICON;c.push(this.createAction({label:"Save",command:g.SAVE,icon:h.SAVE,keycombo:"ctrl s",group:"File"}));c.push(this.createAction({label:"Find",command:g.FIND,icon:h.SEARCH,keycombo:"ctrl f",group:"Search"}));c.push(this.createAction({label:"Fullscreen",command:g.FULLSCREEN,icon:h.MAXIMIZE,keycombo:"ctrl f11",group:"View"}));c.push(this.createAction({label:"Increase Fontsize",
command:"View/Increase Font Size",icon:"fa-text-height",group:"View"}));c.push(this.createAction({label:"Decrease Fontsize",command:"View/Decrease Font Size",icon:"fa-text-height",group:"View"}));p.hasAction(a,"View/Themes")&&(c.push(this.createAction({label:"Themes",command:"View/Themes",icon:"fa-paint-brush",group:"View",mixin:{closeOnClick:!1,value:this.defaultPrefenceTheme},onCreate:function(a){var b=d.getDefaultOptions();a.set("value",b.theme)}})),d._addThemes&&d._addThemes(c));c.push(this.createAction({label:"Help",
command:"Help/Editor Shortcuts",icon:"fa-question",keycombo:"f1"}));c.push(this.createAction({label:"Settings",command:"Editor/Settings",icon:"fa-cogs",group:"Settings"}));g={onCreate:function(a){var b=d.getOptionsMixed()[this.option];null!==b&&a.set("value",b)},onChange:function(a,b){this.value=b;d.runAction(this)}};b("Show Gutters",null,null,"showGutter",null,null,k.ACTION_TYPE.MULTI_TOGGLE,g);b("Show Print Margin",null,null,"showPrintMargin",null,null,k.ACTION_TYPE.MULTI_TOGGLE,g);b("Display Intend Guides",
null,null,"displayIndentGuides",null,null,k.ACTION_TYPE.MULTI_TOGGLE,g);b("Show Line Numbers",null,null,"showLineNumbers",null,null,k.ACTION_TYPE.MULTI_TOGGLE,g);b("Show Indivisibles",null,null,"showInvisibles",null,null,k.ACTION_TYPE.MULTI_TOGGLE,g);b("Use Soft Tabs",null,null,"useSoftTabs",null,null,k.ACTION_TYPE.MULTI_TOGGLE,g);b("Use Elastic Tab Stops",null,null,"useElasticTabstops",null,null,k.ACTION_TYPE.MULTI_TOGGLE,g);b("Animated Scroll",null,null,"animatedScroll",null,null,k.ACTION_TYPE.MULTI_TOGGLE,
g);b("Word Wrap",null,null,"wordWrap",null,null,k.ACTION_TYPE.MULTI_TOGGLE,g);b("Highlight Active Line",null,null,"highlightActive",null,null,k.ACTION_TYPE.MULTI_TOGGLE,g);if(p.hasAction(a,"Edit/Format")){c.push(this.createAction({label:"Format",command:"Edit/Format",icon:"fa-indent",group:"Edit"}));var g=e.modes,h=function(a,b,e){a=d.createAction({label:a,command:"Edit/Format/"+a,icon:"fa-indent",group:"Edit",mixin:{addPermission:!0,formatter:e},onCreate:function(a){}});c.push(a)},n;for(n in g)c.push(h(g[n],
"",n))}p.hasAction(a,"View/Layout")&&(c.push(this.createAction({label:"Split",command:"View/Layout",icon:"fa-columns",group:"View"})),c.push(b("None","View/Layout/None","fa-columns",q.SOURCE,null,"View",k.ACTION_TYPE.SINGLE_TOGGLE)),c.push(b("Horizontal","View/Layout/Horizontal","layoutIcon-horizontalSplit",q.SPLIT_HORIZONTAL,null,"View",k.ACTION_TYPE.SINGLE_TOGGLE)),c.push(b("Vertical","View/Layout/Vertical","layoutIcon-layout293",q.SPLIT_VERTICAL,null,"View",k.ACTION_TYPE.SINGLE_TOGGLE)));return c},
_addThemes:function(a){for(var b=this.getThemeData(),c=this,d=function(a,b,d){return c.createAction({label:a,command:"View/Themes/"+a,group:"View",icon:b,mixin:{addPermission:!0,value:d,theme:d,closeOnClick:!1},onCreate:function(a){a._oldIcon=b;a.set("value",d);a.actionType=k.ACTION_TYPE.SINGLE_TOGGLE}})},e=0;e<b.length;e++){var g=b[e],h=g[1]||g[0].replace(/ /g,"_").toLowerCase(),g=d(g[0]," ",h);a.push(g)}},showHelp:function(a){a=a||this.getEditor();ace.require("ace/config").loadModule("ace/ext/keybinding_menu",
function(b){b.init(a);a.showKeyboardShortcuts()})},getThemeData:function(){return[["Chrome"],["Clouds"],["Crimson Editor"],["Dawn"],["Dreamweaver"],["Eclipse"],["GitHub"],["Solarized Light"],["TextMate"],["Tomorrow"],["XCode"],["Kuroir"],["KatzenMilch"],["Ambiance","ambiance","dark"],["Day","cloud9_day"],["Night","cloud9_night"],["Chaos","chaos","dark"],["Midnight","clouds_midnight","dark"],["Cobalt","cobalt","dark"],["idle Fingers","idle_fingers","dark"],["krTheme","kr_theme","dark"],["Merbivore",
"merbivore","dark"],["Merbivore-Soft","merbivore_soft","dark"],["Mono Industrial","mono_industrial","dark"],["Monokai","monokai","dark"],["Pastel on dark","pastel_on_dark","dark"],["Solarized Dark","solarized_dark","dark"],["Terminal","terminal","dark"],["Tomorrow-Night","tomorrow_night","dark"],["Tomorrow-Night-Blue","tomorrow_night_blue","dark"],["Tomorrow-Night-Bright","tomorrow_night_bright","dark"],["Tomorrow-Night-80s","tomorrow_night_eighties","dark"],["Twilight","twilight","dark"],["Vibrant Ink",
"vibrant_ink","dark"]]}});b.DEFAULT_PERMISSIONS=h;n.chainAfter("runAction",b);return b})},"xgrid/DnD":function(){define("dojo/_base/declare dojo/_base/lang dojo/_base/array dojo/aspect dojo/dom-class dojo/topic dojo/has dojo/when dojo/dnd/Source dojo/dnd/Manager dojo/_base/NodeList dojo/dnd/Manager dojo/dnd/common dojo/dom-geometry xide/lodash xide/$ dojo/has!touch?../util/touch".split(" "),function(n,m,k,h,d,b,c,g,p,a,e,q,u,w,r,v,x){var A=n(p,{grid:null,centerClass:"dgrid-cell",isCenter:function(a){return v(a.target).parent().hasClass(this.centerClass)},
getObject:function(a){var b=this.grid;return b._trackError(function(){return b.collection.get(a.id.slice(b.id.length+5))})},_legalMouseDown:function(a){return this.inherited(arguments)&&a.target!==this.grid.bodyNode},onDrop:function(a,b,c){var d=this,e=this._targetAnchor=this.targetAnchor,h=this.grid,k=h.collection,p=a.grid.collection;!this.before&&e&&(e=e.nextSibling);e=e&&h.row(e);g(e&&k.get(e.id),function(e){if(d!==a&&p.root!=k.root)d.onDropExternal(a,b,c,e);else d.onDropInternal(b,c,e)})},onDropInternal:function(a,
b,c){var d=this.grid,e=d.collection,h=this,k=h._targetAnchor,p;k&&(p=this.before?k.previousSibling:k.nextSibling);k=d.row(a[0]);(b||p!==a[0]&&(c||!k||d.down(k).element!==a[0]))&&a.forEach(function(a){g(h.getObject(a),function(a){var g=e.getIdentity(a);d._trackError(function(){return e[b&&e.copy?"copy":"put"](a,{beforeId:c?e.getIdentity(c):null}).then(function(){h._selectedNodes[g]&&(h._selectedNodes[g]=d.row(g).element)})})})})},onDropExternal:function(a,b,c,d){var e=this.grid,h=this.grid.collection,
k=a.grid;b.forEach(function(b,p){g(a.getObject(b),function(g){e._trackError(function(){return h[h.copy?"copy":"put"](g,{beforeId:d?h.getIdentity(d):null}).then(function(){if(!c){if(k){var d=k.collection.getIdentity(g);!p&&a.selectNone();a.delItem(b.id);return k.collection.remove(d)}a.deleteSelectedNodes()}})})})})},onDndStart:function(b){this.inherited(arguments);b===this&&(a.manager().avatar.node.style.width=this.grid.domNode.offsetWidth/2+"px")},onMouseDown:function(d){"INPUT"!=d.target.tagName&&
(c("touch")&&this.isDragging&&1<x.countCurrentTouches(d,this.grid.touchNode)?(b.publish("/dnd/cancel"),a.manager().stopDrag()):this.inherited(arguments))},onMouseMove:function(a){if((!this.isDragging||"Disabled"!=this.targetState)&&"INPUT"!=a.target.tagName){var b=q.manager();if(!this.isDragging&&this.mouseDown&&this.isSource&&(Math.abs(a.pageX-this._lastX)>this.delay||Math.abs(a.pageY-this._lastY)>this.delay)){var c=this.getSelectedNodes();c.length&&b.startDrag(this,c,this.copyState(u.getCopyKeyState(a),
!0))}if(this.isDragging){var d=c=!1;this.current&&(this.targetBox&&this.targetAnchor==this.current||(this.targetBox=w.position(this.current,!0)),c=this.horizontal?a.pageX-this.targetBox.x<this.targetBox.w/2==w.isBodyLtr(this.current.ownerDocument):a.pageY-this.targetBox.y<this.targetBox.h/2);d=this.isCenter(a);if(this.current!=this.targetAnchor||c!=this.before||d!=this.center){var e=this.grid;a=!this.current||b.source!=this||!(this.current.id in this.selection);var g=e._sourceToModel(b.source),e=
e._sourceToModel(this.current);g&&e&&e.canAdd&&d&&(g=e.canAdd(g),!1===g&&(a=g));this._markTargetAnchor(c,d,a);b.canDrop(a)}}}},checkAcceptance:function(a){return a.getObject&&p.prototype.checkAcceptance.apply(this,arguments)},getSelectedNodes:function(){if(!this.grid.selection)return this.inherited(arguments);var a=new e,b;for(b in this.grid.selection)a.push(this._selectedNodes[b]);return a}});n=n("xgrid/views/DnD",null,{dndSourceType:"dgrid-row",dndParams:null,dndConstructor:A,postMixInProperties:function(){this.inherited(arguments);
this.dndParams=m.mixin({accept:[this.dndSourceType]},this.dndParams)},__dndNodesToModel:function(a){return r.map(a,function(a){return(this.row(a)||{}).data},this)},_sourceToModel:function(a,b){var c=null;if(a){var d=a._targetAnchor||a.anchor||a;b=b||a.grid||this;if(!d||!d.ownerDocument)return null;if(a=b.row(d))return a.data;d&&((c=b.collection.getSync(d.id.slice(b.id.length+5)))||(c=b.row(d)))}return c},postCreate:function(){function a(a){g[a.id]=a.element}function b(a){delete g[a.id];d.remove(a.element,
"dojoDndItemSelected dojoDndItemAnchor")}this.inherited(arguments);var c=this.dndConstructor||A,e=m.mixin(this.dndParams,{grid:this,dropParent:this.contentNode});"function"===typeof this.expand&&(e.allowNested=!0);this.dndSource=new c(this.bodyNode,e);var g=this.dndSource._selectedNodes={};this.on("dgrid-select",function(b){k.forEach(b.rows,a)});this.on("dgrid-deselect",function(a){k.forEach(a.rows,b)});h.after(this,"destroy",function(){delete this.dndSource._selectedNodes;g=null;this.dndSource.destroy()},
!0)},insertRow:function(a){var b=this.inherited(arguments),c="function"===typeof this.getObjectDndType?this.getObjectDndType(a):[this.dndSourceType];d.add(b,"dojoDndItem");this.dndSource.setItem(b.id,{data:a,type:c instanceof Array?c:[c]});return b},removeRow:function(a){this.dndSource.delItem(this.row(a));this.inherited(arguments)}});n.GridSource=A;return n})},"dijit/form/ComboBoxMixin":function(){define("dojo/_base/declare dojo/Deferred dojo/_base/kernel dojo/_base/lang dojo/store/util/QueryResults ./_AutoCompleterMixin ./_ComboBoxMenu ../_HasDropDown dojo/text!./templates/DropDownBox.html".split(" "),
function(n,m,k,h,d,b,c,g,p){return n("dijit.form.ComboBoxMixin",[g,b],{dropDownClass:c,hasDownArrow:!0,templateString:p,baseClass:"dijitTextBox dijitComboBox",cssStateNodes:{_buttonNode:"dijitDownArrowButton"},_setHasDownArrowAttr:function(a){this._set("hasDownArrow",a);this._buttonNode.style.display=a?"":"none"},_showResultList:function(){this.displayMessage("");this.inherited(arguments)},_setStoreAttr:function(a){a.get||h.mixin(a,{_oldAPI:!0,get:function(a){var b=new m;this.fetchItemByIdentity({identity:a,
onItem:function(a){b.resolve(a)},onError:function(a){b.reject(a)}});return b.promise},query:function(a,b){var c=new m(function(){e.abort&&e.abort()});c.total=new m;var e=this.fetch(h.mixin({query:a,onBegin:function(a){c.total.resolve(a)},onComplete:function(a){c.resolve(a)},onError:function(a){c.reject(a)}},b));return d(c)}});this._set("store",a)},postMixInProperties:function(){var a=this.params.store||this.store;a&&this._setStoreAttr(a);this.inherited(arguments);if(!this.params.store&&this.store&&
!this.store._oldAPI){var b=this.declaredClass;h.mixin(this.store,{getValue:function(a,c){k.deprecated(b+".store.getValue(item, attr) is deprecated for builtin store.  Use item.attr directly","","2.0");return a[c]},getLabel:function(a){k.deprecated(b+".store.getLabel(item) is deprecated for builtin store.  Use item.label directly","","2.0");return a.name},fetch:function(a){k.deprecated(b+".store.fetch() is deprecated for builtin store.","Use store.query()","2.0");require(["dojo/data/ObjectStore"],
h.hitch(this,function(b){(new b({objectStore:this})).fetch(a)}))}})}},buildRendering:function(){this.inherited(arguments);this.focusNode.setAttribute("aria-autocomplete",this.autoComplete?"both":"list")}})})},"davinci/ve/actions/_ManageStatesWidget":function(){define("dojo/_base/declare dojo/dom-construct dojo/on dojo/dom-style dojo/dom-class dojo/_base/event dijit/_WidgetBase dijit/_TemplatedMixin dijit/_WidgetsInTemplateMixin davinci/Runtime davinci/Workbench davinci/workbench/Preferences davinci/ve/States davinci/commands/CompoundCommand davinci/ve/commands/StyleCommand davinci/actions/Action davinci/lang/ve dijit/lang/_common dojo/text!./templates/ManageStates.html dijit/form/Button".split(" "),
function(n,m,k,h,d,b,c,g,p,a,e,q,u,w,r,v,x,A,z,y){return n("davinci.ve.actions._ManageStatesWidget",[c,g,p],{templateString:z,widgetsInTemplate:!0,anyCheckBoxChanges:!1,_states:[],_stateContainers:[],_checkBoxes:[],_overrideDisplayValue:[],_notes:[],_handlers:[],veNls:x,commonNls:A,constructor:function(){this.handlers=[]},postCreate:function(){if(this._getContext()){var a=this.domNode.querySelector(".manageStatesStatesListDiv");if(a){var c=this._getAllStatesInDoc();this._states=c.states;this._stateContainers=
c.stateContainers;if(c=this.domNode.querySelector(".manageStatesCheckAcceleratorsTable"))c.style.width="100%";if(c=this.domNode.querySelector(".manageStatesCheckCurrentStateOnlyCell"))c.style.textAlign="left";if(c=this.domNode.querySelector(".manageStatesCheckAllCell"))c.style.textAlign="center";if(c=this.domNode.querySelector(".manageStatesUncheckAllCell"))c.style.textAlign="right";for(var e,a=m.create("table",{"class":"manageStatesStatesListTable",style:"width:100%",border:0,cellspacing:0,cellpadding:3},
a),g=0;g<this._states.length;g++)c=m.create("tr",{},a),e=m.create("td",{"class":"manageStatesCheckboxCell"},c),this._checkBoxes[g]=m.create("div",{id:"manageStatesCheckBox_"+g,"class":"manageStatesCheckbox"},e),this._handlers.push(k(this._checkBoxes[g],"click",function(a,b){b=this._checkBoxes[a];this.anyCheckBoxChanges=!0;d.remove(b,"manageStatesCheckboxNoneVisible");d.remove(b,"manageStatesCheckboxAllVisible");d.remove(b,"manageStatesCheckboxAllVisibleBackgroundAll");d.remove(b,"manageStatesCheckboxAllVisibleBackgroundSome");
d.remove(b,"manageStatesCheckboxSomeVisible");1==b._checkValue?(b._checkValue=0,d.add(b,"manageStatesCheckboxNoneVisible"),this._overrideDisplayValue[a]="none"):(b._checkValue=1,d.add(b,"manageStatesCheckboxAllVisible"),this._overrideDisplayValue[a]="");this.updateDialog()}.bind(this,g))),this._overrideDisplayValue[g]=null,e=this._states[g],m.create("td",{"class":"manageStatesStateNameCell",innerHTML:"Normal"==e?"Background":e},c),e=m.create("td",{"class":"manageStatesNotesCell"},c),this._notes[g]=
m.create("span",{"class":"manageStatesNotesSpan"},e)}(a=this.domNode.querySelector(".manageStatesCheckCurrentStateOnly"))&&this._handlers.push(k(a,"click",function(a){b.stop(a);this._acceleratorClicked("current")}.bind(this)));(a=this.domNode.querySelector(".manageStatesCheckAll"))&&this._handlers.push(k(a,"click",function(a){b.stop(a);this._acceleratorClicked("all")}.bind(this)));(a=this.domNode.querySelector(".manageStatesUncheckAll"))&&this._handlers.push(k(a,"click",function(a){b.stop(a);this._acceleratorClicked("none")}.bind(this)));
(a=this.domNode.querySelector(".manageStatesCheckBackgroundOnly"))&&this._handlers.push(k(a,"click",function(a){b.stop(a);this._acceleratorClicked("background")}.bind(this)));this.anyCheckBoxChanges=!1;setTimeout(function(){this.okButton.focus()}.bind(this),500)}},_acceleratorClicked:function(a){var b=this._getContext();if(b&&(b=u.getFocus(b.rootNode))&&b.stateContainerNode){for(var c=u.getState(b.stateContainerNode),e=0;e<this._states.length;e++){var g=this._states[e];if("undefined"==g||g==u.NORMAL)g=
void 0;var h=this._checkBoxes[e];d.remove(h,"manageStatesCheckboxNoneVisible");d.remove(h,"manageStatesCheckboxAllVisible");d.remove(h,"manageStatesCheckboxAllVisibleBackgroundAll");d.remove(h,"manageStatesCheckboxAllVisibleBackgroundSome");d.remove(h,"manageStatesCheckboxSomeVisible");"current"==a?g==c&&b.stateContainerNode==this._stateContainers[e]?(h._checkValue=1,d.add(h,"manageStatesCheckboxAllVisible"),this._overrideDisplayValue[e]=""):(h._checkValue=0,d.add(h,"manageStatesCheckboxNoneVisible"),
this._overrideDisplayValue[e]="none"):"all"==a?(h._checkValue=1,d.add(h,"manageStatesCheckboxAllVisible"),this._overrideDisplayValue[e]=""):"none"==a?(h._checkValue=0,d.add(h,"manageStatesCheckboxNoneVisible"),this._overrideDisplayValue[e]="none"):"background"==a&&(h._checkValue=1,d.add(h,"manageStatesCheckboxAllVisible"),this._overrideDisplayValue[e]=0==e?"":"$MAQ_DELETE_PROPERTY$")}this.anyCheckBoxChanges=!0;this.updateDialog()}},_isValid:function(){return!0},_onKeyPress:function(a){a.keyCode!=
dojo.keys.ENTER&&(this._isValid()?this.okButton.set("disabled",!1):this.okButton.set("disabled",!0))},_getAllStatesInDoc:function(){var b;if(a.currentEditor&&a.currentEditor.currentEditor&&a.currentEditor.currentEditor.context){b=a.currentEditor.currentEditor.context;var c=[],d=[];if(b=u.getAllStateContainers(b.rootNode))for(var e=0;e<b.length;e++)for(var g=u.getStates(b[e]),h=0;h<g.length;h++)c.push(g[h]),d.push(b[e]);return{states:c,stateContainers:d}}console.error("_ManageStatesWidget.js (from "+
this._calledBy+" - cannot determine context.")},_getContext:function(){var b;a.currentEditor&&a.currentEditor.currentEditor&&a.currentEditor.currentEditor.context?b=a.currentEditor.currentEditor.context:console.error("_ManageStatesWidget.js (from "+this._calledBy+" - cannot determine context.");return b},_getAllEffectedWidgets:function(){var a=this._getContext();if(!a)return[];var b=u.getFocus(a.rootNode);if(b&&b.stateContainerNode)return a.getSelection().slice(0)},updateDialog:function(){var a=this._getContext();
if(a){var b=u.getFocus(a.rootNode);if(b&&b.stateContainerNode)for(var b=this._getAllEffectedWidgets(),c=this._overrideDisplayValue[0],e=0;e<this._states.length;e++){var g=this._states[e];if(g==u.NORMAL||"undefined"==g)g=void 0;for(var h=0,k=0,p=0;p<b.length;p++){var q=b[p],m={undefined:c};m[void 0===g?"undefined":g]=this._overrideDisplayValue[e];q=u.getEffectiveDisplayValue(a,q,g,m);0!=q.effectiveDisplayValue.indexOf("none")&&(h++,g||"undefined"!=q.effectiveState?g&&q.effectiveState==g&&k++:k++)}g=
this._checkBoxes[e];p=this._notes[e];d.remove(g,"manageStatesCheckboxNoneVisible");d.remove(g,"manageStatesCheckboxAllVisible");d.remove(g,"manageStatesCheckboxAllVisibleBackgroundAll");d.remove(g,"manageStatesCheckboxAllVisibleBackgroundSome");d.remove(g,"manageStatesCheckboxSomeVisible");p.innerHTML="";0==h?(g._checkValue=0,d.add(g,"manageStatesCheckboxNoneVisible")):h==b.length?(g._checkValue=1,k==b.length?d.add(g,"manageStatesCheckboxAllVisible"):0<k?(d.add(g,"manageStatesCheckboxAllVisibleBackgroundSome"),
p.innerHTML=x.manageStatesSomeVisibleFromBackground):(d.add(g,"manageStatesCheckboxAllVisibleBackgroundAll"),p.innerHTML=x.manageStatesAllVisibleFromBackground)):(g._checkValue=2,d.add(g,"manageStatesCheckboxSomeVisible"),p.innerHTML=x.manageStatesSomeVisibleSomeHidden)}}},onOk:function(){if(this.anyCheckBoxChanges){var a=this._getContext();if(a){for(var b,c=this._getAllEffectedWidgets(),d=0;d<this._states.length;d++){var e=this._states[d];if(e==u.NORMAL||"undefined"==e)e=void 0;var g=this._checkBoxes[d]._checkValue;
if(0===g||1===g)for(var h=0;h<c.length;h++){var k=c[h];b||(b=new w);b.add(new r(k,[{display:this._overrideDisplayValue[d]?this._overrideDisplayValue[d]:1==g?"":"none"}],e))}}b&&a.getCommandStack().execute(b)}}},onCancel:function(){this.onClose()},destroy:function(){this.inherited(arguments);for(var a=0;a<this._handlers.length;a++)this._handlers[a].remove();this._handlers=[]}})})},"xide/views/CIActionDialog":function(){define(["dojo/_base/declare"],function(n){return n("noob",null,{})})},"dijit/BackgroundIframe":function(){define([],
function(){})},"xblox/views/BlockEditView":function(){define(["dcl/dcl","xide/views/CIView"],function(n,m){return n([m],{declaredClass:"xblox.views.BlockEditView",onSave:function(k,h){if(this.delegate&&this.delegate.onSave)this.delegate.onSave(k,h)}})})},"davinci/ve/ChooseParent":function(){define("dojo/_base/declare davinci/Runtime ./widget ./_Widget ./metadata davinci/ve/utils/GeomUtils".split(" "),function(n,m,k,h,d,b){return n("davinci.ve.ChooseParent",null,{constructor:function(b){this._context=
b.context},getAllowedTargetWidget:function(b,g,p,a){var c=k.getEnclosingWidget,q=[],m=[];g=g.length?g:[g];var n=this;g.forEach(function(a){m.push({type:a.type,allowedParent:d.getAllowedParent(a.type),classList:n.getClassList(a.type)})});do{g=b instanceof h?b.type:b._dvWidget.type;var r=this.getClassList(g);this.isAllowed(m,b,g,r,a)&&q.push(b);b=c(b)}while(b&&p);return q},isAllowed:function(b,g,h,a,e){function c(a,b){return b.some(function(b){return-1!==a.indexOf(b)})}var p=d.getAllowedChild(h);"html.body"===
h&&(p=["ANY"]);return b.every(function(b){var d="NONE"!==p[0]&&("ANY"===p[0]||"BLOCK"===p[0]||c(p,b.classList)),g="ANY"===b.allowedParent[0]||c(b.allowedParent,a),q=k.getWidgetHelper(b.type);return q&&q.isAllowed?q.isAllowed({childType:b.type,childClassList:b.classList,parentType:h,parentClassList:a,absolute:e.absolute,isAllowedChild:d,isAllowedParent:g}):d&&g})},getClassList:function(b){var c=d.queryDescriptor(b,"class");return c?(c=c.split(/\s+/),c.push(b),c):[b]},dragUpdateCandidateParents:function(c){var d=
c.widgetType,h=c.showCandidateParents,a=c.doCursor,e=c.absolute,q=c.currentParent;c=this._XYParent;this._proposedParentWidget||(this._proposedParentWidget=this._getDefaultParent(d,c,e,q));(h||a)&&this.highlightNewWidgetParent(this._proposedParentWidget);var d=this._context,e=d.getActiveDragDiv(),n;e&&(e=dojo.query(".maqCandidateParents",e),1==e.length&&(n=e[0]));if(n)if(h){h=!0;if(this._lastProposedParentWidget!=this._proposedParentWidget)h=!1;else if("undefined"==typeof this._lastAllowedParentList||
null===this._lastAllowedParentList)h=!1;else if(this._lastAllowedParentList.length!=c.length)h=!1;else for(q=0;q<c.length;q++)if(this._lastAllowedParentList[q]!=c[q]){h=!1;break}this._lastProposedParentWidget=this._proposedParentWidget;if(!h)if(h=dojo.i18n.getLocalization("davinci.ve","ve"),n.innerHTML="","undefined"==typeof c||null===c)this._lastAllowedParentList=null,q=0;else{this._lastAllowedParentList=c.slice();var q=c.length,w=dojo.create("div",{className:"maqCandidateParentsHeader"},n),e=dojo.create("div",
{className:"maqCandidateParentsList"},n);n=dojo.create("div",{className:"maqCandidateParentsHelp"},n);if(0===q)w.innerHTML=h.noValidParents;else if(1==q)w.innerHTML=h.willBeChildOf,dojo.create("div",{className:"maqCandidateListItem maqCandidateCurrent",innerHTML:k.getLabel(c[0])},e);else{w.innerHTML=h.candidateParents;for(var w="\x3ctable\x3e",q=c.length-1,r=1;0<=q;q--,r++){var v="maqCandidateListItem";c[q]==this._proposedParentWidget&&(v+=" maqCandidateCurrent");w+='\x3ctr class\x3d"'+v+'"\x3e\x3ctd class\x3d"maqCandidateCheckedColumn"\x3e\x26rarr;\x3c/td\x3e\x3ctd class\x3d"maqCandidateNumberColumn"\x3e'+
r+'\x3c/td\x3e\x3ctd class\x3d"maqCandidateParentColumn"\x3e'+k.getLabel(c[q])+"\x3c/td\x3e\x3c/tr\x3e"}e.innerHTML=w+"\x3c/table\x3e";n.innerHTML=h.toChangePress}}}else n.innerHTML="",this._lastAllowedParentList=null;if(a){for(var x,q=0;q<this._XYParent.length;q++)if(this._XYParent[q]===this._proposedParentWidget){x=q;break}void 0!==x&&(!this._cursorSpan&&(this._cursorSpan=dojo.create("span",{className:"editCursor"}),a=d.getGlobal())&&(this._timer=a.setInterval(function(a,b){var c=m.currentEditor;
(c.getContext&&c.getContext())!==b?this.cleanup():dojo.toggleClass(a,"editCursorBlink")}.bind(this),400,this._cursorSpan,d)),a=this._XYParent[x].domNode,c=(c=this._XYRefChild[x])?c.domNode:null,x=this._XYRefAfter[x],c?(x?c.nextSibling&&c.nextSibling._dvWidget?(d=b.getBorderBoxPageCoordsCached(c.nextSibling),x=d.l):(d=b.getBorderBoxPageCoordsCached(c),x=d.l+d.w):(d=b.getBorderBoxPageCoordsCached(c),x=d.l),c=d.t,d=d.h):(d=b.getBorderBoxPageCoordsCached(a),x=d.l,c=d.t,d=16),n=this._cursorSpan.style,
n.height=d+"px",n.left=x+"px",n.top=c+"px",a.ownerDocument.body.appendChild(this._cursorSpan))}},_getDefaultParent:function(b,d,h,a){var c;d&&(b=k.getWidgetHelper(b),c=1<d.length&&b&&b.chooseParent?b.chooseParent(d):0===d.length?null:h&&a?a:d[d.length-1]);return c},cleanup:function(){this._cursorSpan&&(this._cursorSpan.parentNode.removeChild(this._cursorSpan),this._cursorSpan=null);if(this._timer){var b=this._context.getGlobal();b&&(b.clearInterval(this._timer),this._timer=null)}this.highlightNewWidgetParent(null);
this._lastAllowedParentList=null},highlightNewWidgetParent:function(b){b!=this.newWidgetParent&&(this.newWidgetParent&&(this.newWidgetParent.domNode.style.outline=""),this.newWidgetParent=b)&&(b.domNode.style.outline="1px solid rgba(165,42,42,.7)")},getProposedParentWidget:function(){var b=null;if(this._XYParent){var d=this._XYParent.indexOf(this._proposedParentWidget);0<=d&&(b={},b.parent=this._XYParent[d],b.refChild=this._XYRefChild[d],b.refAfter=this._XYRefAfter[d])}return b},setProposedParentWidget:function(b){this._proposedParentWidget=
b},getProposedParentsList:function(){return this._XYParent},findParentsXYBeforeTraversal:function(b){b=b.position;this._XYParent=[];this._XYRefChild=[];this._XYRefAfter=[];"undefined"==typeof this.findParentsXYLastPosition&&(this.findParentsXYLastPosition={});var c=this.findParentsXYLastPosition;if(b.x===c.x&&b.y===c.y)return!1;c.x=b.x;c.y=b.y;return!0},findParentsXY:function(c){var d=c.data,h=c.widget,a=c.absolute,e=c.position;c=c.beforeAfter;this._context.getScrollOffset();var k=e.x,e=e.y,m=h.getHelper(),
n=null,n=m&&m.getMarginBoxPageCoords?m.getMarginBoxPageCoords(h):b.getMarginBoxPageCoordsCached(h.domNode),r=n.l,v=n.t,m=n.w,x=n.h,A;if(k>=r&&k<=r+m&&e>=v&&e<=v+x&&1===this.getAllowedTargetWidget(h,d,!1,{absolute:a}).length)if(!0===a)this._XYParent.push(h),this._XYRefChild.push(null),this._XYRefAfter.push(!0);else{a=h.getChildren();n=[];for(d=0;d<a.length;d++)m=a[d],r=m.domNode,v=b.getBorderBoxPageCoordsCached(r),m=r.offsetWidth,x=r.offsetHeight,r=v.l,v=v.t,A=r+m,x=v+x,n.push({l:r,t:v,r:A,b:x,c:r+
m/2});for(var z,y,B,d=0;d<n.length;d++){r=n[d];m=a[d];if(k>=r.l&&k<=r.r&&e>=r.t&&e<=r.b){z=m;y=k>=r.c?!0:!1;break}0===d?(z=m,y=e>r.b||k>=r.c?!0:!1,B=r.b):(e>=r.t||e>=B)&&k>=r.l?(z=m,y=e>r.b||k>=r.c?!0:!1):e>=B&&e>=r.b&&(z=m,y=!0);r.b>B&&(B=r.b)}this._XYParent.push(h);this._XYRefChild.push(z);this._XYRefAfter.push("after"===c?!0:"before"===c?!1:y)}},findParentsXYAfterTraversal:function(b){var c=b.widgets,d=b.currentParent,a=b.eventTarget.ownerDocument.body._dvWidget;if(b.absolute&&d&&d!=a){var e=!1;
this._XYParent.forEach(function(a){a==d&&(e=!0)});e||(this._XYParent.push(d),this._XYRefChild.push(c[0]),this._XYRefAfter.push(!0))}this.findParentsXYLastPosition={};for(b=0;b<this._XYRefAfter.length-1;b++)this._XYRefAfter[b]=!0},findParentsXYCleanup:function(b){this.findParentsXYLastPosition={}},parentListDivCreate:function(b){var c=b.widgetType,d=b.absolute,a=b.doCursor,e=b.beforeAfter,h=b.currentParent;b=this._context;if(c){var k=b.getDocument();this._oldActiveElement=document.activeElement;k.defaultView.focus();
this._keyDownHandler=dojo.connect(k,"onkeydown",dojo.hitch(this,function(a,b){this.onKeyDown(b,a[0],a[1],a[2],a[3],a[4])},[c,d,a,e,h]));this._keyUpHandler=dojo.connect(k,"onkeyup",dojo.hitch(this,function(a,b){this.onKeyUp(b,a[0],a[1],a[2],a[3],a[4])},[c,d,a,e,h]));c=this._parentListDiv=dojo.create("div",{className:"maqParentListDiv"},document.body);b.setActiveDragDiv(c);dojo.create("div",{className:"maqCandidateParents"},c);return c}},parentListDivGet:function(){return this._parentListDiv},parentListDivDelete:function(){var b=
this._context,d=this._parentListDiv;d&&(this._oldActiveElement&&(this._oldActiveElement.focus(),this._oldActiveElement=null),dojo.disconnect(this._keyDownHandler),dojo.disconnect(this._keyUpHandler),this._keyDownHandler=this._keyUpHandler=null,d.parentNode.removeChild(d),b.setActiveDragDiv(null),this._parentListDiv=null)},_keyEventDoUpdate:function(b,d,h,a,e){var c=this._context.getPreference("showPossibleParents");this.dragUpdateCandidateParents({widgetType:b,showCandidateParents:!c&&this._spaceKeyDown||
c&&!this._spaceKeyDown,doCursor:h,beforeAfter:a,absolute:d,currentParent:e})},onKeyDown:function(b,d,h,a,e,k){dojo.stopEvent(b);b.keyCode==dojo.keys.SPACE?this._spaceKeyDown=!0:this._processKeyDown(b.keyCode);this._keyEventDoUpdate(d,h,a,e,k)},onKeyUp:function(b,d,h,a,e,k){dojo.stopEvent(b);b.keyCode==dojo.keys.SPACE&&(this._spaceKeyDown=!1);this._keyEventDoUpdate(d,h,a,e,k)},_processKeyDown:function(b){if(49<=b&&57>=b){var c=this.getProposedParentsList();1<c.length&&(b=c.length-(b-48),0<=b&&this.setProposedParentWidget(c[b]))}},
isSpaceKeyDown:function(){return this._spaceKeyDown}})})},"xideve/stub":function(){define(["dojo/_base/declare"],function(n){return n("xideve",null,{})})},"wcDocker/layouttable":function(){define(["dcl/dcl","wcDocker/types","wcDocker/layout"],function(n,m,k){return n(k,{declaredClass:"wcLayoutTable",addItem:function(h,d,b,c,g){if("undefined"===typeof d||0>d)d=0;if("undefined"===typeof b||0>b)b=0;if("undefined"===typeof c||0>=c)c=1;if("undefined"===typeof g||0>=g)g=1;this.__resizeGrid(d+c-1,b+g-1);
if((1<c||1<g)&&!this.__mergeGrid(d,b,c,g))return!1;this._grid[b][d].$el.append($(h));return this.item(d,b)},item:function(h,d){if(d>=this._grid.length||h>=this._grid[d].length)return!1;var b=this,c={$:b._grid[d][h].$el,css:function(g,k){if(b._grid[d][h].$el){if(void 0===k)return b._grid[d][h].$el.css(g);b._grid[d][h].$el.css(g,k)}return c},stretch:function(g,k){b.itemStretch(h,d,g,k);return c}};return c},itemStretch:function(h,d,b,c){var g=this._batchProcess;this._batchProcess=!0;this.__resizeGrid(h,
d);h=this._grid[d][h];if(0>h.x||0>h.y)return!1;void 0!==b&&(h.sx=b);void 0!==c&&(h.sy=c);(this._batchProcess=g)||this.__resizeGrid(0,0);return!0},clear:function(){var h=this.showGrid(),d=this.gridSpacing(),b=this.gridAlternate();this.$elem.remove();this.__init();this.showGrid(h);this.gridSpacing(d);this.gridAlternate(b);this._grid=[]},startBatch:function(){this._batchProcess=!0},finishBatch:function(){this._batchProcess=!1;this.__resizeGrid(0,0)},showGrid:function(h){"undefined"!==typeof h&&this.$elem.toggleClass("wcLayoutGrid",
h);return this.$elem.hasClass("wcLayoutGrid")},gridSpacing:function(h){"undefined"!==typeof h&&this.$elem.css("border-spacing",h+"px");return parseInt(this.$elem.css("border-spacing"))},gridAlternate:function(h){"undefined"!==typeof h&&this.$elem.toggleClass("wcLayoutGridAlternate",h);return this.$elem.hasClass("wcLayoutGridAlternate")},__init:function(){this.$elem=$('\x3ctable class\x3d"wcLayout wcWide wcTall"\x3e\x3c/table\x3e');this.$elem.append($("\x3ctbody\x3e\x3c/tbody\x3e"));this._grid=[];
this.__container(this.$container)},__update:function(){},__resizeGrid:function(h,d){for(var b=0;b<=d;++b){if(this._grid.length<=b){var c=[];c.$row=$("\x3ctr\x3e");this._grid.push(c)}for(c=0;c<=h;++c)this._grid[b].length<=c&&this._grid[b].push({$el:$("\x3ctd\x3e"),x:0,y:0,sx:"",sy:""})}if(!this._batchProcess){h=this.$elem.find("tbody");$(".wcDockerTransition").append(h);d=$("\x3ctbody\x3e");for(b=0;b<this._grid.length;++b)for(var g=null,c=0;c<this._grid[b].length;++c){var k=this._grid[b][c];k.$el&&
(g||(g=this._grid[b].$row,d.append(g)),k.$el.css("width",k.sx),k.$el.css("height",k.sy),g.append(k.$el))}this.$elem.append(d);h.remove()}},__mergeGrid:function(h,d,b,c){for(var g=0;g<c;++g)for(var k=0;k<b;++k){var a=this._grid[d+g][h+k];if(!a.$el||0!==a.x||0!==a.y)return!1}a=this._grid[d][h];1<b&&(a.$el.attr("colspan",""+b),a.x=b-1);1<c&&(a.$el.attr("rowspan",""+c),a.y=c-1);for(g=0;g<c;++g)for(k=0;k<b;++k)if(0!==g||0!==k)a=this._grid[d+g][h+k],a.$el.remove(),a.$el=null,a.x=-k,a.y=-g;return!0}})})},
"xgrid/Clipboard":function(){define(["xdojo/declare","xide/types"],function(n,m){var k={runAction:function(h){switch(h.command){case m.ACTION.CLIPBOARD_COPY:return this.clipboardCopy(),this.refreshActions(),!0;case m.ACTION.CLIPBOARD_PASTE:return this.clipboardPaste();case m.ACTION.CLIPBOARD_CUT:return this.clipboardCut(),!0}return this.inherited(arguments)},clipboardPaste:function(){return this.inherited(arguments)},clipboardCopy:function(){this.currentCutSelection=null;this.currentCopySelection=
this.getSelection();this.publish(m.EVENTS.ON_CLIPBOARD_COPY,{selection:this.currentCopySelection,owner:this,type:this.itemType})},clipboardCut:function(){this.currentCopySelection=null;this.currentCutSelection=this.getSelection()},getClipboardActions:function(h){function d(){var a=g.getSelection();return a&&a.length?a[0]?a:(console.error("have no item"),null):null}function b(){switch(this.title){case "Cut":case "Copy":var a;a=d()?!1:!0;return!1!==a;case "Paste":return null==g.currentCopySelection}return!1}
function c(a,c,d,h){k.push(g.createAction({label:a,command:c,icon:d,tab:"Home",group:"Clipboard",keycombo:h,mixin:{addPermission:!0,quick:!0},shouldDisable:b}))}var g=this,k=[];h=m.ACTION;c("Copy",h.CLIPBOARD_COPY,"fa-copy","ctrl c");c("Paste",h.CLIPBOARD_PASTE,"fa-paste","ctrl v");c("Cut",h.CLIPBOARD_CUT,"fa-cut","ctrl x");return k}};n=n("xgrid.Clipboard",null,k);n.Implementation=k;return n})},"xide/popup":function(){define("dojo/dom-geometry dojo/dom-style dojo/_base/lang dijit/place xide/$ dcl/dcl".split(" "),
function(n,m,k,h,d,b){var c=null;return c=new (b(null,{_stack:[],_beginZIndex:1E3,_idGen:1,_repositionAll:function(){if(this._firstAroundNode){var b=this._firstAroundPosition,c=n.position(this._firstAroundNode,!0),a=c.x-b.x,b=c.y-b.y;if(a||b)for(this._firstAroundPosition=c,c=0;c<this._stack.length;c++){var d=this._stack[c].wrapper.style;d.top=parseFloat(d.top)+b+"px";"auto"==d.right?d.left=parseFloat(d.left)+a+"px":d.right=parseFloat(d.right)-a+"px"}this._aroundMoveListener=setTimeout(k.hitch(this,
"_repositionAll"),a||b?10:50)}},_createWrapper:function(b,c){var a=d(b).data("_popupWrapper");c=d(b).data("owner")||(_.isObject(c)&&c.owner?c.owner:null);if(!a){var e=d("\x3cdiv class\x3d'xPopup' style\x3d'display:none' role\x3d'region'\x3e\x3c/div\x3e");d("body").append(a);e.append(d(b));var a=e[0],g=b.style;g.display="";g.visibility="";g.position="";g.top="0px";c&&c._on&&c._on("destroy",function(a){e.remove()});d(b).data("_popupWrapper",a)}return a},moveOffScreen:function(b,c){b=this._createWrapper(b,
c);d(b).css({visibility:"hidden",top:"-9999px",display:"",left:"-9999px",right:"auto"});return b},hide:function(b,c){c=this._createWrapper(b,c);d(c).css({display:"none",height:"auto",overflowY:"visible",border:""});"_originalStyle"in b&&(b.style.cssText=b._originalStyle)},getTopPopup:function(){for(var b=this._stack,c=b.length-1;0<c&&b[c].parent===b[c-1].widget;c--);return b[c]},open:function(b){var c=this,a=this._stack,e=b.popup,g=b.popup,k=b.orient||["below","below-alt","above","above-alt"],w=b.parent?
b.parent.isLeftToRight():!0,r=b.around;d(g).data("owner");for(var v=b.extraClass||"",x=b.around&&b.around.id?b.around.id+"_dropdown":"popup_"+this._idGen++;a.length&&(!b.parent||d.contains(b.parent.domNode,a[a.length-1].widget.domNode));)this.close(a[a.length-1].widget);var A=this.moveOffScreen(e,b),z=d(A),y,B=n.position(g);if("maxHeight"in b&&-1!=b.maxHeight)y=b.maxHeight||Infinity;else{y=d(window).height();d(window).width();var C=r?n.position(r,!1):{y:b.y-(b.padding||0),h:2*(b.padding||0)};y=Math.floor(Math.max(C.y,
y-(C.y+C.h)))}B.h>y&&(B=m.getComputedStyle(g),z.css({"overflow-y":"scroll",height:y+"px",border:B.borderLeftWidth+" "+B.borderLeftStyle+" "+B.borderLeftColor}),g._originalStyle=g.style.cssText,g.style.border="none");z.attr({id:x,"class":"xPopup "+(e.baseClass||e["class"]||"").split(" ")[0]+"Popup "+(b.css?b.css:""),dijitPopupParent:b.parent?b.parent.id:""});z.css("z-index",this._beginZIndex+a.length);0===a.length&&r&&(this._firstAroundNode=r,x=d(r).offset(),this._firstAroundPosition={w:d(r).width(),
h:d(r).height(),x:x.left,y:x.top},this._aroundMoveListener=setTimeout(function(){c._repositionAll()},50));k=r?h.around(A,r,k,w,null):h.at(A,b,"R"==k?["TR","BR","TL","BL"]:["TL","BL","TR","BR"],b.padding,null);A.style.visibility="visible";g.style.visibility="visible";w=[];d(A).on("keydown",function(a){if(27==a.keyCode&&b.onCancel)a.stopPropagation(),a.preventDefault(),b.onCancel();else if(9==a.keyCode&&(a.stopPropagation(),a.preventDefault(),(a=c.getTopPopup())&&a.onCancel))a.onCancel()});e.onCancel&&
b.onCancel&&w.push(e.on("cancel",b.onCancel));d(g).css("display","block");a.push({widget:e,wrapper:A,parent:b.parent,onExecute:b.onExecute,onCancel:b.onCancel,onClose:b.onClose,handlers:w});if(e.onOpen)e.onOpen(k);d(A).addClass(v);return k},close:function(b){for(var c=this._stack;b&&_.some(c,function(a){return a.widget==b})||!b&&c.length;){var a=c.pop(),e=a.widget,g=a.onClose;if(e.onClose)e.onClose();for(var h;h=a.handlers.pop();)h.remove();e&&e&&this.hide(e);g&&g()}d(b).css("display","none");0===
c.length&&this._aroundMoveListener&&(clearTimeout(this._aroundMoveListener),this._firstAroundNode=this._firstAroundPosition=this._aroundMoveListener=null)}}))})},"davinci/html/PHPBlock":function(){define(["dojo/_base/declare","davinci/html/HTMLItem"],function(n,m){return n("davinci.html.PHPBlock",m,{constructor:function(k){this.elementType="PHPBlock";this.value=k||""},getText:function(k){return k.excludeIgnoredContent?"":this.value}})})},"system/resource":function(){define("require dojo/_base/declare dojo/_base/xhr dojo/Deferred davinci/model/Path davinci/Runtime davinci/model/resource/Folder".split(" "),
function(n,m,k,h,d,b,c){m={root:null,__CASE_SENSITIVE:!1,resourceChanged:function(b,c){if("deleted"!==b&&c==system.resource.getRoot())return c.reload(),system.resource.getRoot().getChildren(dojo.hitch(system.resource,function(a){system.resource.onChildrenChange(system.resource.getRoot(),a)})),system.resource.getRoot();if("created"==b||"deleted"==b||"renamed"==b||"updated"==b||"reload"==b){var a;if(c.parent)a=c.parent,c.getPath();else{var e=(new d(c)).removeLastSegments();a=system.resource.findResource(e.toString())||
system.resource.getRoot()}if("deleted"==b&&"Folder"==c.elementType)system.resource.onChildrenChange(c,[]);"Folder"==a.elementType&&"reload"==b&&a.reload();if("renamed"==b)system.resource.onChange(c);a.getChildren(function(b){system.resource.onChildrenChange(a,b)},function(a){console.error(a)})}"deleted"==b&&dijit.byId("resourceTree").attr("selectedItem",null)},createText:function(b,c){return""},createResource:function(b,c,a,d){b=b.split("/");a=a||system.resource.getWorkspace();for(var e=c?b.length:
b.length-1,g=0;g<e;g++)if("."!=b[g]&&""!=b[g]){var h=a.getChildSync(b[g]);a=null!=h?h:a.createResource(b[g],!0,!1,d)}c||(a=a.createResource(b[b.length-1],c,!1,d));return a},listProjects:function(b,c){var a=system.resource.getRoot();a.parent&&(a=a.parent);a.getChildren(b,c)},createProject:function(b){var c=n("davinci/Workbench");return c.service.serviceObject[c.serviceClass].createProject(b.newProjectName,b.projectToClone,!!b.eclipseSupport,b.projectTemplateName)},newItem:function(b,c){},pasteItem:function(b,
c,a,d){},onChange:function(b){},onChildrenChange:function(b,c){},getLabel:function(b){var c=b.getName();b.link&&(c=c+"  ["+b.link+"]");return c},getIdentity:function(b){return b.getId()},destroy:function(){system.resource.subscriptions.forEach(dojo.unsubscribe)},mayHaveChildren:function(b){return"Folder"==b.elementType},getRoot:function(b,c){if(!system.resource.root){c=system.resource.getWorkspace();var a=n("davinci/Workbench");a.singleProjectMode()?(a=a.getProject(),system.resource.root=system.resource.findResource(a,
!1,c)):system.resource.root=c;system.resource.root._readOnly=!1}if(b)b(system.resource.root);else return system.resource.root},getWorkspace:function(){this.workspace||(this.workspace=new c(".",null));return this.workspace},getChildren:function(b,c,a){b.getChildren(c,a)},copy:function(c,d,a){c=c.getPath?c.getPath():c;var e=d.getPath?d.getPath():d;b.serverJSONRequest({url:"cmd/copy",handleAs:"text",sync:!0,content:{source:c,dest:e,recurse:String(a)}});system.resource.resourceChanged("reload",d)},download:function(b,
c,a,d,h){var e="",g="";d&&(e="\x26libs\x3d"+encodeURIComponent(dojo.toJson(d)));a&&(g="\x26root\x3d"+encodeURIComponent(a));if(h)for(var k in h)g+="\x26"+encodeURIComponent(k)+"\x3d"+encodeURIComponent(h[k]);window.location.href="cmd/download?fileName\x3d"+c+g+"\x26resources\x3d"+encodeURIComponent(dojo.toJson(b))+e},findResourceAsync:function(b,c,a,d){var e=new h;(b=this.findResource(b,c,a,d))?e.resolve(b):e.reject();return e},findResource:function(d,h,a,e){function g(){for(var a=k;a<p.length;a++){var b=
null;if(!m._isLoaded){x=!0;break}".."==p[a]?b=m=m.parent:"."!=p[a]&&(b=m=m._getChild(p[a]));if(!b)return}return b}h=h||!system.resource.__CASE_SENSITIVE;var k=0,p,m=system.resource.getWorkspace();if(a){if("string"==typeof a){var n=a;a=system.resource.findResource(a,h);if(!a)return console.error("resource.findResoure: Folder "+n+" not found"),null}m=a}"string"==typeof d?(p=d.split("/"),"."==p[0]&&(k=1)):d.getSegments&&(p=d.getSegments(),d=d.toString());var n=p.some(function(a){return-1!=a.indexOf("*")}),
x,A;n||(A=g());var z=[];A||!x&&!n?z=[A]:(d=b.serverJSONRequest({url:b.cmdOffset+"cmd/findResource.php",content:{path:d,ignoreCase:h,workspaceOnly:e,inFolder:a?a.getPath():null},sync:!0}))&&d.length&&(z=d.map(function(a){for(var b=system.resource.getWorkspace(),d=0;d<a.parents.length;d++)if(b._isLoaded||b.setChildren(a.parents[d].members),d+1<a.parents.length){var e=a.parents[d+1].name,h=b._getChild(e);h||(h=new c(e,b));b=h}m=system.resource.getWorkspace();k=0;p=a.file.split("/");"."==p[0]&&(k=1);
return g()}));return n?z:z[0]},alphabeticalSort:function(b){return b.sort(function(b,a){b=b.name.toLowerCase();a=a.name.toLowerCase();return b<a?-1:b>a?1:0})}};dojo.subscribe("/davinci/resource/resourceChanged",m,m.resourceChanged);return dojo.setObject("system.resource",m)})},"davinci/ve/States":function(){"undefined"===typeof davinci&&(davinci={});davinci.AppStatesDontInitialize=!0;define("dojo/_base/declare dojo/_base/connect dojo/query dojo/dom-class dojo/dom-style dojo/_base/window dijit/registry davinci/Runtime davinci/Workbench davinci/maqetta/AppStates ./utils/GeomUtils ./commands/EventCommand ./commands/StyleCommand davinci/ve/utils/StyleArray davinci/workbench/Preferences davinci/lang/ve".split(" "),
function(n,m,k,h,d,b,c,g,p,a,e,q,u,w,r,v){var x=document;n=n(a,{_update:function(a,b){g.currentEditor&&"davinci.ve.PageEditor"==g.currentEditor.declaredClass&&a&&a._dvWidget&&(a._maqAppStates||!a._maqDeltas)&&this._refresh(a._dvWidget)},_refresh:function(a){var b=a.getParent();b.dijitWidget?this._refresh(b):a&&a.resize&&a.resize()},_updateEvents:function(a,b,c){if(a&&a._dvWidget){a=a._dvWidget;var d=["onclick","onmouseover","onmouseout","onfocus","onblur"],e,g;for(g in d){var h=d[g],k=a&&a.properties&&
a.properties[h];if("string"==typeof k&&0<=k.indexOf("davinci.states.setState")){var p=k,k=k.replace("'"+b+"'","'"+c+"'");k!==p&&(e=e||{},e[h]=k)}}if(b=this.getContext())e=new q(a,e),b.getCommandStack().execute(e)}},normalize:function(a,b,c,d){switch(a){case "style":var e=this.getStatesListCurrent(b);for(a=0;a<e.length;a++)e[a]="Normal";if(b=this.getStyle(b,e,c))for(a=0;a<b.length;a++)b[a][c]&&(d=b[a][c])}return d},normalizeArray:function(a,b,c,d){d=dojo.clone(d);switch(a){case "style":var e=this.getStatesListCurrent(b);
for(a=0;a<e.length;a++)e[a]="Normal";if(b=this.getStyle(b,e,c)){for(a=0;a<b.length;a++){c=b[a];for(var g in c)for(c=d.length-1;0<=c;c--){var e=d[c],h;for(h in e)if(h==g){d.splice(c,1);break}}}d=d.concat(b)}}return d},getEditor:function(){return g.currentEditor},getContext:function(){var a=this.getEditor();return a&&(a.getContext&&a.getContext()||a.context)},getDocument:function(){var a=this.getContext();return a&&a.getDocument&&a.getDocument()},resetState:function(a){if(a){var b=this.getStateContainersForNode(a);
a=this.getFocus(a.ownerDocument.body);for(var c=0;c<b.length;c++){var d=b[c],e=this.getState(d);this.setState(e,d,{focus:a&&d==a.stateContainerNode&&e==a.state,updateWhenCurrent:!0,silent:!1})}}},_updateSrcState:function(a,b){var c=a&&a._dvWidget;if(c){var d=c._srcElement.getAttribute(davinci.states.APPSTATES_ATTRIBUTE),e=c._srcElement.getAttribute(davinci.states.DELTAS_ATTRIBUTE);c&&c._srcElement&&(a=this.serialize(a),a.maqAppStates&&a.maqAppStates.trim(),a.maqAppStates?c._srcElement.addAttribute(davinci.states.APPSTATES_ATTRIBUTE,
a.maqAppStates):c._srcElement.removeAttribute(davinci.states.APPSTATES_ATTRIBUTE),a.maqDeltas&&a.maqDeltas.trim(),a.maqDeltas?c._srcElement.addAttribute(davinci.states.DELTAS_ATTRIBUTE,a.maqDeltas):c._srcElement.removeAttribute(davinci.states.DELTAS_ATTRIBUTE),a=c._srcElement.getAttribute(davinci.states.APPSTATES_ATTRIBUTE),c=c._srcElement.getAttribute(davinci.states.DELTAS_ATTRIBUTE),(d!==a||e!==c)&&(d=this.getEditor())&&d._visualChanged&&d._visualChanged(b))}},_removeStateFromNodeRecursive:function(a,
b){var c=a._dvWidget;if(a&&c&&b)for(this._removeStateFromNode(a,b),a=c.getChildren(),c=0;c<a.length;c++)this._removeStateFromNodeRecursive(a[c].domNode,b)},_removeStateFromNode:function(a,b){if(a&&a._maqDeltas&&a._maqDeltas[b]){delete a._maqDeltas[b];b=!1;for(var c in a._maqDeltas)if("undefined"!==c){b=!0;break}b||delete a._maqDeltas;this._updateSrcState(a)}},removeUnusedStates:function(a){if(a){a=a.getAllWidgets();for(var b=0;b<a.length;b++){var c=a[b].domNode;if("BODY"!==c.tagName&&c&&c._maqDeltas){var d=
this.getAllStatesForNode(c),e;for(e in c._maqDeltas)"undefined"!==e&&0>d.indexOf(e)&&this._removeStateFromNode(c,e)}}}},_getStateIndex:function(a){return a&&"Normal"!=a&&"undefined"!=a?a:"undefined"},getCurrentStateIndex:function(){return this._getStateIndex(this.getState())},getApplyToStateIndex:function(a){var b=this.getState();return this._getStateIndex("current"===a&&b&&"Normal"!=b&&"undefined"!=b?b:void 0)},getEffectiveDisplayValue:function(a,b,c,e){a=b?b.domNode:null;b="none";var g=c||"undefined";
if(e&&"string"==typeof e[g]&&"$MAQ_DELETE_PROPERTY$"!=e[g])b=e[g],h=!0;else if(a){var h=!1;if(a._maqDeltas&&(!e||"$MAQ_DELETE_PROPERTY$"!=e[g])){var k=a._maqDeltas[c]&&a._maqDeltas[c].style;if(k)for(c=0;c<k.length;c++){var p=k[c],m;for(m in p)"display"==m&&(b=p[m],h=!0)}}if(!h){if(e&&"string"==typeof e.undefined)b=e.undefined;else{e=a._maqDeltas&&a._maqDeltas.undefined&&a._maqDeltas.undefined.style;g=!1;if(e)for(c=0;c<e.length;c++)for(m in p=e[c],p)"display"==m&&(b=p[m],g=!0);g||(b=d.get(a,"display"))}g=
"undefined"}if(0==a.offsetLeft&&0==a.offsetTop&&0==a.offsetWidth&&0==a.offsetHeight)b="none";else for(;a&&"BODY"!=a.tagName.toUpperCase();){if(a&&a.ownerDocument&&a.ownerDocument.defaultView&&"none"==d.get(a,"display")){b="none";break}a=a.parentNode}}else b="none";return{effectiveDisplayValue:b,effectiveState:g}},propertyDefinedForAnyCurrentState:function(a,b){var c,d=a._maqDeltas;if(d){a=this.getStateContainersForNode(a);var e=a.length-1;a:for(;0<=e;e--){var g=this.getState(a[e]),h=g&&g!=this.NORMAL?
g:"undefined";if(h=d[h]&&d[h].style)for(var k=0;k<h.length;k++)for(var p=h[k],m=0;m<b.length;m++)if(p.hasOwnProperty(b[m])){c=g;break a}}}return c},_customStateActive:function(a){return a?this.getState(a.rootNode):!1},updateStateIcons:function(a){a&&a.editor&&a.editor==g.currentEditor&&"davinci.ve.PageEditor"==a.editor.declaredClass&&b.withDoc(x,function(){var b=k(".manageStatesButton")[0],d=c.byNode(b),b=k(".manageStatesIcon")[0];d&&b&&(this.manageStatesActive(a)?(h.remove(b,"manageStatesIconDisabled"),
d.set("disabled",!1)):(h.add(b,"manageStatesIconDisabled"),d.set("disabled",!0)));var d=r.getPreferences("davinci.ve.editorPrefs",davinci.Workbench.getProject()).newWidgetsCurrentState,b=k(".newWidgetsCurrentStateButton")[0],e=c.byNode(b),b=k(".newWidgetsCurrentStateIcon")[0];e&&b&&(this.newWidgetsCurrentStateActive(a)?h.remove(b,"newWidgetsCurrentStateIconDisabled"):h.add(b,"newWidgetsCurrentStateIconDisabled"),d?(h.remove(b,"newWidgetsCurrentStateIconOff"),h.add(b,"newWidgetsCurrentStateIconOn"),
e.set("title",v.NewWidgetsCurrentStateTitleCurrentState)):(h.remove(b,"newWidgetsCurrentStateIconOn"),h.add(b,"newWidgetsCurrentStateIconOff"),e.set("title",v.NewWidgetsCurrentStateTitleBackground)))}.bind(this))},manageStatesActive:function(a){return a&&a.getSelection().length},newWidgetsCurrentStateActive:function(a){return this._customStateActive(a)},highlightBaseWidgetsActive:function(a){return this._customStateActive(a)},updateHighlightsBaseStateWidgets:function(a){},initialize:function(){this.subscribed=
!0}});davinci.ve.states=new n;davinci.ve.states.initialize();return davinci.ve.states})},"davinci/_WokbenchEditors":function(){define(["dcl/dcl","./Runtime","dojo/promise/all"],function(n,m,k){return n(null,{closeAllEditors:function(){var h=dijit.byId("editors_container");h&&h.getChildren().forEach(function(d){h.closeChild(d)})},getOpenEditor:function(h){return this.currentEditor?this.currentEditor:null!=h?(h=dijit.byId(filename2id(h.getPath())))?h.editor:null:(h=dijit.byId("editors_container"))&&
h.selectedChildWidget&&h.selectedChildWidget.editor?h.selectedChildWidget.editor:null},closeActiveEditor:function(){var h=dijit.byId("editors_container"),d=dijit.byId("davinci_file_tabs");if(h&&h.selectedChildWidget&&h.selectedChildWidget.editor){var b=selectedChildWidget.id.replace(/^editor/,"shadow");h.closeChild(h.selectedChildWidget);(h=dijit.byId(b))&&d.closeChild(h)}},getAllOpenEditorIds:function(){},_showEditorTopPanes:function(){this._hideShowEditorTopPanes("block")},_hideEditorTopPanes:function(){this._hideShowEditorTopPanes("none")},
_hideShowEditorTopPanes:function(h){},_editorTabClosed:function(h){if(!davinci.Workbench._editorTabClosing[h.id]){davinci.Workbench._editorTabClosing[h.id]=!0;if(h&&h.editor&&h.editor.fileName){var d=h.id.replace(/^editor/,"shadow"),b=dijit.byId("davinci_file_tabs"),c=dijit.byId(d),g=Workbench._state.editors.indexOf(h.editor.fileName);-1!=g&&Workbench._state.editors.splice(g,1);Workbench.saveState=!0;davinci.Workbench._shadowTabClosing[d]||(b.removeChild(c),c.destroyRecursive())}dijit.byId("editors_container").getChildren().length||
(Workbench._switchEditor(null),this._expandCollapsePaletteContainers(null),d=dijit.byId("editorsStackContainer"),b=dijit.byId("editorsWelcomePage"),d&&b&&d.selectChild(b),this._hideEditorTopPanes());delete davinci.Workbench._editorTabClosing[h.id]}},openEditor:function(h,d){try{var b=h.fileName,c;"string"==typeof b?c=b.substr(b.lastIndexOf(".")+1):(c=b.getExtension(),b=b.getPath());var g=dijit.byId(filename2id(b)),k=dijit.byId("editors_container");if(g){k.selectChild(g);var a=g.editor;h.startOffset&&
a.select(h)}else{var e=h.editorCreateCallback,q=m.getExtensions("davinci.editor",function(a){"string"==typeof a.extensions&&(a.extensions=a.extensions.split(","));return dojo.some(a.extensions,function(a){return a.toLowerCase()==c.toLowerCase()})}),n=q[0];1<q.length&&dojo.some(q,function(a){n=a;return a.isDefault});Workbench._createEditor(n,b,h,d).then(function(a){e&&e.call(window,a);h.noSelect||(m.currentEditor=a)},function(a){console.error("Error opening editor for filename: "+b,a)})}}catch(w){console.error("Exception opening editor for filename: "+
h&&h.fileName),console.error(w)}},_switchEditor:function(h,d){var b=m.currentEditor;m.currentEditor=h;var c=davinci.Workbench;c._state&&(c._state.activeEditor=h?h.fileName:null);this._removeFocusContainerChildren();this._showEditorTopPanes();try{dojo.publish("/davinci/ui/editorSelected",[{editor:h,oldEditor:b}])}catch(g){console.error(g)}c._updateTitle(h);setTimeout(function(){h&&h.visualEditor&&h.visualEditor.context&&h.visualEditor.context.isActive()&&h.visualEditor.context.getTopWidgets().forEach(function(b){b.resize&&
b.resize()});this._repositionFocusContainer()}.bind(this),1E3);k(this._showViewPromises).then(function(){h&&h.focus&&h.focus();this._rearrangePalettes(h);this._expandCollapsePaletteContainers(h)}.bind(this));d||(c.saveState=!0)}})})},"xide/client/ClientBase":function(){define(["dcl/dcl","xide/mixins/EventedMixin","xide/model/Base","dojo/_base/unload","xide/utils"],function(n,m,k,h,d){m=n([k.dcl,m.dcl],{declaredClass:"xide.client.ClientBase",options:null,_socket:null,onConnectionReady:function(){},
onClosed:function(){},destroy:function(){this._socket&&this._socket.close&&(this._socket.close(),this.onClosed())},_defaultOptions:function(){return{}},init:function(b){this.options=d.mixin(this._defaultOptions(),b.options);h.addOnUnload(function(){this.pageUnloaded=!0;this.destroy()}.bind(this))}});n.chainAfter(m,"destroy");return m})},"davinci/library":function(){define("dojo/_base/xhr dojo/Deferred ./Runtime ./model/Path ./ve/themeEditor/metadata/query ./workbench/Preferences dojo/_base/kernel".split(" "),
function(n,m,k,h,d,b,c){var g=[{userLibs:[{id:"dojo",version:"1.8",metaRoot:"app/metadata/dojo/1.8",required:!1,hasSource:!0,root:""},{id:"DojoThemes",version:"1.8",metaRoot:"",required:!1,hasSource:!1,root:"themes"},{id:"gridx",version:"1.0.0",metaRoot:"app/metadata/gridx/1.0.0",required:!1,hasSource:!0,root:"lib/dojo/gridx"},{id:"html",version:"0.8",metaRoot:"app/metadata/html/0.8",required:!0,hasSource:!1},{id:"requirejs",version:"0.8",metaRoot:"app/metadata/requirejs/",required:!0,hasSource:!1},
{id:"delite",version:"0.8",metaRoot:"app/metadata/delite/0.8",required:!1,hasSource:!0},{id:"deliteful",version:"0.8",metaRoot:"app/metadata/deliteful/0.8",required:!1,hasSource:!0},{id:"clipart",version:"1.0",metaRoot:"app/metadata/clipart/1.0",required:!1,hasSource:!1,root:"lib/clipart"},{id:"xblox",version:"1.0",metaRoot:"app/metadata/xblox/1.0",required:!1,hasSource:!1,root:"lib/xblox"},{id:"maqettaSamples",version:"1.0",metaRoot:"app/metadata/maqetta/core/0.3",required:!1,hasSource:!1,root:"samples"},
{id:"maqetta",version:"0.3",metaRoot:"app/metadata/maqetta/core/0.3",required:!1,hasSource:!1,root:"lib/maqetta"},{id:"shapes",version:"1.0",metaRoot:"app/metadata/shapes/1.0",required:!1,hasSource:!1,root:"lib/shapes"}]}],p=[{specVersion:"1.0",files:["blackberry.css"],useBodyFontBackgroundClass:"useBodyFontBg",helper:"maq-metadata-dojo/dojox/mobile/ThemeHelper",themeEditorHtmls:["../custom/dojo-theme-editor.html"],name:"blackberry",path:["project1/themes/blackberry/blackberry.theme"],base:"",className:"blackberry",
type:"dojox.mobile",meta:["../custom/custom.json"],version:"1.8"},{specVersion:"1.0",files:["claro.css"],helper:"maq-metadata-dojo/dijit/ThemeHelper",themeEditorHtmls:["dojo-theme-editor.html"],name:"claro",path:["project1/themes/claro/claro.theme"],conditionalFiles:["document.css"],className:"claro",meta:["claro.json"],version:"1.8"},{specVersion:"1.0",files:["ipad.css"],useBodyFontBackgroundClass:"useBodyFontBg",helper:"maq-metadata-dojo/dojox/mobile/ThemeHelper",themeEditorHtmls:["dojo-theme-editor.html"],
name:"ipad",path:["project1/themes/ipad/ipad.theme"],base:"",className:"ipad",type:"dojox.mobile",meta:["ipad.json"],version:"1.8"},{specVersion:"1.0",files:["android.css"],useBodyFontBackgroundClass:"useBodyFontBg",helper:"maq-metadata-dojo/dojox/mobile/ThemeHelper",themeEditorHtmls:["../custom/dojo-theme-editor.html"],name:"android",path:["project1/themes/android/android.theme"],base:"",className:"android",type:"dojox.mobile",meta:["../custom/custom.json"],version:"1.8"},{specVersion:"1.0",files:["custom.css"],
useBodyFontBackgroundClass:"useBodyFontBg",helper:"maq-metadata-dojo/dojox/mobile/ThemeHelper",themeEditorHtmls:["dojo-theme-editor.html"],name:"custom",path:["project1/themes/custom/custom.theme"],base:"",className:"custom",type:"dojox.mobile",meta:["custom.json"],version:"1.8"},{specVersion:"1.0",files:["iphone.css"],useBodyFontBackgroundClass:"useBodyFontBg",helper:"maq-metadata-dojo/dojox/mobile/ThemeHelper",themeEditorHtmls:["../custom/dojo-theme-editor.html"],name:"iphone",path:["project1/themes/iphone/iphone.theme"],
base:"",className:"iphone",type:"dojox.mobile",meta:["../custom/custom.json"],version:"1.8"},{specVersion:"1.0",files:["sketch.css"],themeEditorHtmls:["../claro/dojo-theme-editor.html"],name:"Sketch",path:["project1/themes/sketch/sketch.theme"],className:"claro",meta:["../claro/claro.json"],version:"1.8"}],a={_customWidgets:{}},e={},q={},u={},w={};c.subscribe("/davinci/ui/libraryChanged/start",this,function(){w={};u={}});c.subscribe("/davinci/resource/resourceChanged",this,function(a,c){var d=require("davinci/Workbench").getProject();
if("deleted"==a||"renamed"==a){var g=b.getPreferences("davinci.ui.ProjectPrefs",d),g=(new h(d)).append(g.themeFolder);(new h(c.getPath())).startsWith(g)&&delete e[d]}"File"==c.elementType&&"theme"==c.extension&&"modified"==a&&c.getContent().then(function(a){a=JSON.parse(a);a.path=[c.getPath()];a.getFile=function(){return system.resource.findResource(this.path[0])}.bind(a);for(var b=0;b<e[d].length;b++)if(e[d][b].name==a.name){e[d][b]=a;return}e[d].push(a)}.bind(this))});return a={themesChanged:function(a){e[a]=
a?null:[]},getThemes:function(a,c,d){function g(){var b=[];e[a]&&(b=c?e[a].filter(function(a){return!a.getFile().isVirtual()}):e[a]);return b}d&&delete e[a];if(e[a])return g();d=b.getPreferences("davinci.ui.ProjectPrefs",a);d.themeFolder="themes";(new h(a)).append(d.themeFolder);p.forEach(function(a){a.getFile=function(){return system.resource.findResource(this.path[0])}.bind(a)}.bind(this));e[a]=p;return g()},getThemeMetadata:function(a){return q[a.name]?q[a.name]:null},addCustomWidgets:function(d,
e,g,k){var p=b.getPreferences("davinci.ui.ProjectPrefs",d);p.widgetFolder||(p.widgetFolder="./lib/custom",b.savePreferences("davinci.ui.ProjectPrefs",d,p));e=e.getParentFolder().getPath();e=new h(e);g=require("davinci/ve/metadata").parseMetaData(k.name,k,e,g);a._customWidgets[d].hasOwnProperty("name")||(a._customWidgets[d].name="custom",a._customWidgets[d].metaPath=p.widgetFolder,a._customWidgets[d].localPath=!0);a._customWidgets[d]=g;c.publish("/davinci/ui/addedCustomWidget",[g]);return g},getCustomWidgets:function(d){if(!a._customWidgets||
!a._customWidgets[d]){a._customWidgets||(a._customWidgets={});a._customWidgets[d]||(a._customWidgets[d]=[]);var e=b.getPreferences("davinci.ui.ProjectPrefs",d);e.widgetFolder||(e.widgetFolder="./lib/custom",b.savePreferences("davinci.ui.ProjectPrefs",d,e));for(var g=(new h(d)).append(e.widgetFolder).getSegments(),e=system.resource.findResource(g[0]),k=1;k<g.length;k++)var p=e.getChild(g[k]),e=p?p:e.createResource(g[k],!0);var m;e.getChildren(function(a){m=a},!0);this._customWidgetPackages=[];null==
m&&(m=[]);g={};for(k=0;k<m.length;k++)if(p=m[k],"Folder"==p.elementType){g[p.name]=p.getPath();var q="maq-lib-custom-"+p.name,n=p.getURL();require({packages:[{name:q,location:n}]});this._customWidgetPackages.push({name:p.name,location:n})}p=system.resource.findResource("*_widgets.json",!1,e);this._customWidgetDescriptors={};for(k=0;k<p.length;k++){var r=p[k],u=r.getParentFolder(),n=e.getURL(),q=u.getURL(),G=q.substr(n.length+1),n=null;try{n=c.fromJson(r.getContentSync())}catch(D){}if(n&&n.customWidgetSpec&&
(G=G.split("/").shift(),n.__metadataModuleId="maq-lib-custom-"+G,a.addCustomWidgets(d,r,g[G],n),w[d]||(w[d]={}),w[d][u.name]||(w[d][u.name]={}),w[d][u.name][n.version]=q,n&&n.widgets))for(r=0;r<n.widgets.length;r++)(u=n.widgets[r].type)&&(this._customWidgetDescriptors[u]={name:G,location:q,descriptor:n})}}return{custom:a._customWidgets[d]}},getCustomWidgetPackages:function(){return this._customWidgetPackages||[]},getCustomWidgetDescriptors:function(){return this._customWidgetDescriptors?this._customWidgetDescriptors:
{}},getInstalledLibs:function(){a._serverLibs||(a._serverLibs=k.serverJSONRequest({url:"cmd/listLibs",handleAs:"json",content:{},sync:!0})[0].userLibs);return a._serverLibs},getUserLibs:function(a){if(u.base)return u.base;u.base=g[0].userLibs;return u.base},getLibRoot:function(a,b,c){var d=new m,e=w;if(e[c]&&e[c][a]&&void 0!==e[c][a][b])return d.resolve(e[c][a][b]||"");e[c]||(e[c]={});e[c][a]||(e[c][a]={});e[a]||(e[a]={});var g=null;switch(a){case "xblox":g="lib/xblox";break;case "dojo":g="lib/dojo";
break;case "maqetta":g="lib/maqetta";break;case "delite":g="lib/ibm-js/delite";break;case "deliteful":g="lib/ibm-js/deliteful";break;case "requirejs":g="lib/ibm-js/requirejs"}e[c][a][b]=g;return d.resolve(g||"")},modifyLib:function(a){return k.serverJSONRequest({url:"cmd/modifyLib",handleAs:"text",content:{libChanges:JSON.stringify(a)},sync:!0})},addLib:function(a,b){return k.serverJSONRequest({url:"cmd/getLibRoots",handleAs:"json",content:{libId:a,version:b},sync:!0})[0].libRoot.root},getLibraryId:function(a,
b){return{sketch:"sketch",claro:"claro"}[a]+(b||"")},getLibraryName:function(a){var b,c;for(c in a)b=c;return b}}})},"dijit/form/SimpleTextarea":function(){define(["dojo/_base/declare","dojo/dom-class","dojo/sniff","./TextBox"],function(n,m,k,h){return n("dijit.form.SimpleTextarea",h,{baseClass:"dijitTextBox dijitTextArea",rows:"3",cols:"20",templateString:"\x3ctextarea ${!nameAttrSetting} data-dojo-attach-point\x3d'focusNode,containerNode,textbox' autocomplete\x3d'off'\x3e\x3c/textarea\x3e",postMixInProperties:function(){!this.value&&
this.srcNodeRef&&(this.value=this.srcNodeRef.value);this.inherited(arguments)},buildRendering:function(){this.inherited(arguments);k("ie")&&this.cols&&m.add(this.textbox,"dijitTextAreaCols")},filter:function(d){d&&(d=d.replace(/\r/g,""));return this.inherited(arguments)},_onInput:function(d){if(this.maxLength){var b=parseInt(this.maxLength),c=this.textbox.value.replace(/\r/g,""),b=c.length-b;if(0<b){var g=this.textbox;if(g.selectionStart){var h=g.selectionStart,a=0;k("opera")&&(a=(this.textbox.value.substring(0,
h).match(/\r/g)||[]).length);this.textbox.value=c.substring(0,h-b-a)+c.substring(h-a);g.setSelectionRange(h-b,h-b)}else this.ownerDocument.selection&&(g.focus(),c=this.ownerDocument.selection.createRange(),c.moveStart("character",-b),c.text="",c.select())}}this.inherited(arguments)}})})},"xblox/model/logic/CaseBlock":function(){define(["dcl/dcl","xide/utils","xblox/model/Block","dojo/Deferred","xblox/model/logic/BreakBlock"],function(n,m,k,h,d){return n(k,{declaredClass:"xblox.model.logic.CaseBlock",
comparator:null,expression:null,items:null,name:"Case",icon:"",hasInlineEdits:!0,toText:function(){return'\x3cspan style\x3d"text-indent: 1em;"\x3e\x26nbsp;\x26nbsp;\x26nbsp;'+this.getBlockIcon("I")+this.name+" "+this.makeEditable("comparator","right","text","Enter a comparison","inline")+(null!=this.expression?" "+this.makeEditable("expression","right","text","Enter a value to compare"):"")+"\x3c/span\x3e"},canAdd:function(){return[]},_solve:function(b,c,d){c=c||{highlight:!1};for(var g=[],a=0;a<
this.items.length;a++){var e=this.items[a];-1!==e.declaredClass.indexOf("BreakBlock")&&d.stop();this.addToEnd(g,e.solve(b,c))}return g},solve:function(b,c,d){try{var g=b.getVariableById(c.variable);!g&&d.args&&d.args[0]&&(g={value:d.args[0]});var a="";if(g)a=this._getArg(g.value,!0);else return this.onFailed(this,d),!1;if(!0!==b.parseExpression(""+a+""+this.comparator+this._getArg(this.expression,!0)))return this.onFailed(this,d),!1;this.onSuccess(this,d);this._solve(b,d,c);return!0}catch(e){logError(e)}},
getChildren:function(){return this.items},getFields:function(){function b(b,c){return{label:c||b,value:b}}var c=this.inherited(arguments)||this.getDefaultFields();c.push(m.createCI("Expression",13,this.expression,{group:"General",title:"Expression",dst:"expression"}));c.push(m.createCI("Comparator",3,this.comparator,{group:"General",title:"Comparator",dst:"comparator",widget:{options:[b("\x3d\x3d"),b("\x3c\x3d"),b("\x3d\x3e"),b("!\x3d"),b("\x3c"),b("\x3e")],editable:!0}}));return c},runAction:function(b){if("New/Break"===
b.command){b=new h;var c=this.add(d,{group:null});b.resolve({select:[c],focus:!0,append:!1});c.refresh();return b}},getActions:function(){return[this.createAction({label:"Break",command:"New/Break",tab:"Home",icon:"fa-stop",group:"File",mixin:{addPermission:!0,custom:!0,quick:!1}})]}})})},"xdojo/has":function(){define(["dojo/has"],function(n){return n})},"xcf/views/DeviceTreeView":function(){define("xdojo/declare dojo/has xide/utils xide/types xgrid/Grid xgrid/TreeRenderer xaction/DefaultActions xgrid/KeyboardNavigation xide/widgets/_Widget xgrid/Search xgrid/Noob dojo/Deferred dojo/promise/all xdojo/has!xideve?xcf/views/DeviceTreeView_VE".split(" "),
function(n,m,k,h,d,b,c,g,p,a,e,q,u,w){m=h.ACTION;d=d.createGridClass("deviceTreeView",{menuOrder:{File:110,Edit:100,View:90,Block:50,Settings:20,Navigation:10,Step:5,New:4,Instance:3,Window:2},options:k.clone(h.DEFAULT_GRID_OPTIONS),_refreshInProgress:!1,isGroup:function(a){return a?!0===a.isDir:!1},getRootFilter:function(){return{parentId:""}},__set:function(a,b){if("title"!==a)return this.inherited(arguments)},postMixInProperties:function(){function a(a){if(a.iconClass)return a.iconClass;var c=
!a||a.isDir?"dijitFolderOpened":"dijitLeaf";if(a.ref&&a.ref.item&&a.ref.item.getIconClass){var d=a.ref.item.getIconClass();if(d)return d}else if(!b.isGroup(a))return b.delegate.getDeviceStatusIcon(a);return"Commands"===k.toString(a.name)?"el-icon-video":c}var b=this;this.collection=this.getDefaultCollection();this.collection=this.collection.filter(this.getRootFilter());this.columns=[{renderExpando:!0,label:"Name",field:"name",sortable:!0,formatter:function(c,d){c=d.user;if(d.isDevice)return'\x3cspan class\x3d"grid-icon '+
a(d)+'"\x3e\x3c/span\x3e'+k.getCIInputValueByName(c,h.DEVICE_PROPERTY.CF_DEVICE_TITLE);if(d.iconClass)return'\x3cspan class\x3d"grid-icon '+d.iconClass+'"\x3e\x3c/span\x3e'+k.getCIInputValueByName(c,h.DEVICE_PROPERTY.CF_DEVICE_TITLE);if(b.isGroup(d))return'\x3cspan class\x3d"grid-icon fa-folder"\x3e\x3c/span\x3e'+d.name;if(d.icon)return'\x3cspan class\x3d"grid-icon '+d.icon+'"\x3e\x3c/span\x3e'+d.name;if(d.ref&&d.ref.item){if(d.ref.item.name)return d.ref.item.name;if(d.ref.item.title)return d.ref.item.title}return b.isGroup(d)?
d.name:c?'\x3cspan class\x3d"grid-icon '+a(d)+'"\x3e\x3c/span\x3e'+k.getCIInputValueByName(c,h.DEVICE_PROPERTY.CF_DEVICE_TITLE):d.name}}];this.inherited(arguments);this._on("onAddAction",function(a){a.command===h.ACTION.EDIT&&(a.label="Settings")})},renderRow:function(a){var b=this.inherited(arguments),c=a.ref,c=c?c.item:null;null!=c&&c.scope&&!1===c.enabled&&$(b).addClass("disabledBlock");return b}},{SELECTION:!0,KEYBOARD_SELECTION:!0,PAGINATION:!1,ACTIONS:h.GRID_FEATURES.ACTIONS,CONTEXT_MENU:h.GRID_FEATURES.CONTEXT_MENU,
TOOLBAR:h.GRID_FEATURES.TOOLBAR,CLIPBOARD:h.GRID_FEATURES.CLIPBOARD,KEYBOARD_NAVIGATION:{CLASS:g},WIDGET:{CLASS:p},SEARCH:{CLASS:a},EXTRAS:{CLASS:w}},{RENDERER:b},null,null);b=[m.EDIT,m.RENAME,m.RELOAD,m.DELETE,m.CLIPBOARD,m.LAYOUT,m.COLUMNS,m.SELECTION,m.TOOLBAR,m.HEADER,m.SEARCH,"File/ConnectDevice","File/DisconnectDevice","File/New Group","File/New Device","Instance/EditInstance","File/Edit Source","File/Edit Driver","File/Edit Driver Code","Instance/Edit Variables","Instance/Edit Commands","Instance/Show Log",
"Instance/Console","File/Enable","Instance/ConsoleWizard","View/Source",m.CONTEXT_MENU];n=n("xcf.views.DeviceTreeView",d,{iconClass:"fa-sliders",beanType:"device",permissions:b,deselectOnRefresh:!1,showHeader:!1,toolbarInitiallyHidden:!0,contextMenuArgs:{actionFilter:{quick:!0}},groupOrder:{Clipboard:110,Device:105,File:100,Step:80,Open:70,Organize:60,Insert:10,New:5,Navigation:3,Select:0},getDeviceActions:function(a,b,c){function d(){var a=c.getSelection();return a&&a.length?a[0]?a:(console.error("have no item"),
null):null}function e(){var a=d();if(!a||!a.length)return null;a=a[0];return a.device||a.ref&&a.ref.device?a.ref.device:a.isDevice?a:null}function g(){var a=d();return!a||a[0].isDir||a[0].virtual?!0:!1}function p(){var a=d();return!a||a[0].isDir||a[0].virtual?!0:(a=e())&&r.getInstance(a)?!1:!0}function m(){var a=d();return a&&a[0]&&a[0].path&&-1!==a[0].path.indexOf(".json")?!1:!0}var q=[],n=this,r=n.delegate,u=h.ACTION,v={addPermission:!0};this.hasPermission(u.EDIT)&&q.push(this.createAction("Edit",
u.EDIT,h.ACTION_ICON.EDIT,["f4","enter","dblclick"],"Home","Device/Command","item",null,null,k.mixin({quick:!0},v),null,g,b,a,c));this.hasPermission("File/Edit Driver")&&q.push(this.createAction("Edit Driver","File/Edit Driver","fa-exchange",["f3","ctrl enter"],"Home","Device/Command","item",null,null,k.mixin({quick:!0},v),null,g,b,a,c));this.hasPermission("Instance/EditInstance")&&q.push(this.createAction("Edit Instance","Instance/EditInstance","fa-exchange text-warning",["f6"],"Home","Instance",
"item",null,null,k.mixin({quick:!0},v),null,p,b,a,c));this.hasPermission("File/Edit Source")&&q.push(this.createAction("Edit %%Source","File/Edit Source",h.ACTION_ICON.EDIT,null,"Home","Device/Command","item",null,null,k.mixin({},v),null,g,b,a,c));this.hasPermission("File/Edit Driver Code")&&q.push(this.createAction("Edit Driver Code","File/Edit Driver Code","fa-code",null,"Home","Device/Command","item",null,null,k.mixin({quick:!0},v),null,p,b,a,c));this.hasPermission("Instance/Console")&&q.push(this.createAction("Open Console",
"Instance/Console","fa-terminal",["f5"],"Home","Instance","item",null,null,k.mixin({quick:!0},v),null,p,b,a,c));this.hasPermission("Instance/ConsoleWizard")&&q.push(this.createAction("Open Expression Wizard","Instance/ConsoleWizard","fa-info",["f7"],"Home","Instance","item",null,null,k.mixin({quick:!0},v),null,p,b,a,c));q.push(n.createAction({label:"Run",command:u.RUN,icon:h.ACTION_ICON.RUN,tab:"Home",group:"Step",keycombo:["r"],shouldDisable:function(){var a=d();return a&&a[0].ref&&a[0].ref.item?
!1:!0},mixin:k.mixin({quick:!0},v)}));this.hasPermission("Instance/Edit Variables")&&q.push(n.createAction({label:"Edit Variables",command:"Instance/Edit Variables",icon:"fa-list-alt",tab:"Home",group:"Instance",shouldDisable:p,mixin:v}));this.hasPermission("Instance/Edit Commands")&&q.push(n.createAction({label:"Edit Commands",command:"Instance/Edit Commands",icon:h.ACTION_ICON.EDIT,tab:"Home",group:"Instance",shouldDisable:p,mixin:v}));this.hasPermission("Instance/Show Log")&&q.push(n.createAction({label:"Show Log",
command:"Instance/Show Log",icon:"fa-calendar",tab:"Home",group:"Instance",shouldDisable:g,mixin:k.mixin({quick:!0},v)}));this.hasPermission("File/Enable")&&q.push(n.createAction({label:"Enable",command:"File/Enable",icon:"fa-on",tab:"View",group:"Device/Command",shouldDisable:g,mixin:{addPermission:!0,closeOnClick:!1,actionType:"multiToggle",quick:!0},onCreate:function(a){var b=e();b&&(b=n.delegate.getMetaValue(b,h.DEVICE_PROPERTY.CF_DEVICE_ENABLED),a.set("value",b))},onChange:function(a,b){(a=e())&&
a.setMetaValue(h.DEVICE_PROPERTY.CF_DEVICE_ENABLED,b)}}));this.hasPermission("File/New Group")&&q.push(this.createAction("New Group","File/New Group","fa-file-o",["f7"],"Home","New","item|view",null,null,k.mixin({quick:!0},v),null,null,b,a,c));q.push(this.createAction("New Device","File/New Device",h.ACTION_ICON.NEW_FILE,["ctrl n"],"Home","New","item",null,null,k.mixin({quick:!0},v),null,null,b,a,c));this.hasPermission("File/New Device")&&q.push(this.createAction("Disconnect","File/DisconnectDevice",
"fa-unlink text-danger",["s"],"Home","Device/Command","item",null,null,k.mixin({quick:!0},v),null,m,b,a,c));this.hasPermission("File/ConnectDevice")&&q.push(this.createAction("%%Connect","File/ConnectDevice","fa-link text-success",["c"],"Home","Device/Command","item",null,null,k.mixin({quick:!0},v),null,m,b,a,c));q.push(this.createAction("Source","View/Source","fa-hdd-o",["f4"],"Home","Navigation","item",null,function(){},{addPermission:!0,tab:"Home",dummy:!0},null,null,b,a,n));var w=0;_.each([{label:"System",
scope:"system_devices"},{label:"User",scope:"user_devices"}],function(c){var d=c.label;q.push(n.createAction(d,"View/Source/"+d,"fa-hdd-o",["alt f"+w],"Home","Navigation","item",null,function(){},{addPermission:!0,tab:"Home",item:c,quick:!0},null,null,b,a,n));w++});return q},editItem:function(a){if(a.type===h.ITEM_TYPE.BLOCK)return this.blockManager.editBlock(a.ref.item,null,!1);a.driver&&(a=a.driver);this.openItem(a)},onSelectionChanged:function(a){a=a.selection[0];var b=this.ctx;this.getActionStore();
this.getContextMenu();this.getToolbar();b.getWindowManager().getToolbar();a&&a.getActions&&a.getActions();b=this.getAction("File/Enable");a&&a.isDevice&&b&&(a=this.delegate.getMetaValue(a,h.DEVICE_PROPERTY.CF_DEVICE_ENABLED),b.set("value",a))},startup:function(){var a=c.getDefaultActions(this.permissions,this,this);this.inherited(arguments);this.addActions(a);this.addActions(this.getDeviceActions(this.domNode,this.permissions,this));var b=this;this.refresh().then(function(){b.select([0],null,!0,{focus:!0})});
this.subscribe(h.EVENTS.ON_STORE_CHANGED,function(a){a.store.id==b.collection.id&&b.refresh();a.store==b.collection&&b.refresh()});b.collection.on("update",function(a){if(a&&a.target)try{var c=b.cell(a.target.path,"0");c&&b.refreshCell(c)}catch(z){logError(z)}else b.refresh();b.refreshActions()});this.wireStore(this.collection);this._on("selectionChanged",this.onSelectionChanged,this)},getDefaultSort:function(){return[{property:"name",descending:!1,ignoreCase:!0}]},getDefaultCollection:function(){var a=
this.getDefaultSort();return this.collection.sort(a)},clipboardPaste:function(a,b){new q;var c=this.currentCutSelection,d={focus:!0,append:!1};a=a||c?this.currentCutSelection:this.currentCopySelection;var c=[],e=[],g=new q;b=b||this.getSelectedItem()||{};b.isDevice&&(b=b.getParent());if(!b||!b.isDir)return g.resolve(),g;a=a.filter(function(a){return a.isDevice});if(!a||!a.length)return g.resolve(),g;for(var h=0;h<a.length;h++){var k=this.delegate.cloneDevice(a[h],b);k.then(function(a){e.push(a)});
c.push(k)}u(c).then(function(a){d.select=e;g.resolve(d)});return g},wireStore:function(a){function b(a){a&&"update"===a.type&&a.target?(a=d.cell(a.target.path,"0"))&&d.refreshCell(a):(d._refreshTimer&&clearTimer(d._refreshTimer)&&delete d._refreshTimer,d._refreshTimer==setTimeout(function(){},100),d.refresh())}var c=a.scope;if(!this["_storeConnected"+c]){this["_storeConnected"+c]=!0;var d=this;this.addHandle("update",a.on("update",b));this.addHandle("added",a.on("added",b));this.addHandle("remove",
a.on("remove",b));this.addHandle("delete",a.on("delete",b))}},changeSource:function(a){function b(b){c.collection=b;var d=b.filter(c.getRootFilter());c.set("collection",d);c.set("title","Devices ("+a.label+")");c.scope=e;c.wireStore(b)}var c=this,d=c.delegate,e=a.scope,g=d.getStore(e);g.then?g.then(function(){g=d.getStore(e);b(g)}):b(g)},runAction:function(a,b,c,d){if((a=this.getAction(a))&&a.command){var e=h.ACTION,g=d||this,k=g.delegate||this.delegate,p=g.ctx,m=p.getDeviceManager(),q=p.getDriverManager(),
n=p.getWindowManager(),r=g.getSelectedItem()||b,u;r&&(u=r&&r.device?r.device:r.ref&&r.ref.device?r.ref.device:r.isDevice?r:null);if(-1!=a.command.indexOf("View/Source"))return this.changeSource(a.item);var v=u?m.getInstance(u):null,w=u?u.getMetaValue(h.DEVICE_PROPERTY.CF_DEVICE_DRIVER):null,w=v?v.driver:q.getItemById(w),x={focus:!0,append:!1,delay:1,expand:!0};switch(a.command){case "Instance/EditInstance":if(v)return q.openItemSettings(w,r);this.publish(h.EVENTS.ON_STATUS_MESSAGE,{text:"Can`t edit driver instance because device is not enabled or connected!",
type:"error"});break;case "File/Edit Source":m.getFile(r).then(function(a){p.mainView.getDocker();n.openItem(a,n.createDefaultTab())});break;case "Instance/Edit Variables":if(v)return q.openItemSettings(w,r,{showBasicCommands:!1,showConditionalCommands:!1,showResponseBlocks:!1,showLog:!1,showConsole:!1,showVariables:!0,showSettings:!1,showInitTab:!1},!0);this.publish(h.EVENTS.ON_STATUS_MESSAGE,{text:"Can`t edit driver instance because device is not enabled or connected!",type:"error"});break;case "Instance/Show Log":return q.openItemSettings(w,
r,{showBasicCommands:!1,showConditionalCommands:!1,showResponseBlocks:!1,showLog:!0,showConsole:!1,showVariables:!1,showSettings:!1,showInitTab:!1,isSingle:!0},!0);case "Instance/Edit Commands":if(v)return q.openItemSettings(w,r,{showBasicCommands:!0,showConditionalCommands:!0,showResponseBlocks:!1,showLog:!1,showConsole:!1,showVariables:!1,showSettings:!1,showInitTab:!1},!0);this.publish(h.EVENTS.ON_STATUS_MESSAGE,{text:"Can`t edit driver instance because device is not enabled or connected!",type:"error"});
break;case "File/Edit Driver":if(w)return q.openItemSettings(w,null);break;case e.RUN:u&&v&&(r=v.blockScope.getBlockById(r.id))&&r.solve(r.scope);break;case "File/Edit Driver Code":return u&&v&&(r=v.driver),q.editDriver(null,r);case "Instance/Console":if(u&&v){m.startDevice(u,!0).then(function(){m.openConsole(u)});return}return m.openConsole(u);case "Instance/ConsoleWizard":if(u&&v){m.startDevice(u,!0).then(function(){m.openExpressionConsole(u)});return}return m.openExpressionConsole(u);case "File/Log":return m.openLog(u);
case e.EDIT:return g.editItem(r);case e.RELOAD:return g.refresh();case e.DELETE:return k.onDeleteItem(r);case "File/DisconnectDevice":return e=k.stopDevice(r),r._userStopped=!0,e;case "File/ConnectDevice":return k.startDevice(r,!0),g.refresh(),!1;case "File/New Device":return r=k.newItem(r,g.scope),r.then(function(a){g.refresh();g.select(a,null,!0,x)}),r;case "File/New Group":return r=k.newGroup(r,g.scope),r.then(function(a){g.refresh();g.select(a,null,!0,x)}),r}return this.inherited(arguments)}},
changeScope:function(a){this.delegate.ls(a+"_devices")},openItem:function(a,b){!a||a.isDir||a.virtual||this.delegate.openItemSettings(a,b)},refresh:function(){return this.inherited(arguments)}});n.DefaultPermissions=b;n.getActions=n.prototype.getDeviceActions;return n})},"xgrid/types":function(){define("xdojo/declare xide/types xgrid/ColumnHider dgrid/extensions/ColumnReorder dgrid/extensions/ColumnResizer dgrid/extensions/Pagination xgrid/Selection xgrid/Toolbar xgrid/ContextMenu xgrid/Keyboard xide/mixins/EventedMixin dgrid/OnDemandGrid xgrid/Defaults xgrid/Layout xgrid/Focus xgrid/ListRenderer xgrid/Clipboard xgrid/Actions xlang/i18".split(" "),
function(n,m,k,h,d,b,c,g,p,a,e,q,u,w,r,v,x,A,z){m.GRID_BASES={GRID:q,LAYOUT:w,DEFAULTS:u,RENDERER:v,EVENTED:e,FOCUS:r,i18:z};m.DEFAULT_GRID_OPTIONS={USE_JQUERY_CSS:!0,DESELECT_SELECTED:!0,CLEAR_SELECTION_ON_CLICK:!0,ITEM_ACTIONS:{},GRID_ACTIONS:{},PUBLISH_SELECTION:!1};m.GRID_OPTION={USE_JQUERY_CSS:"USE_JQUERY_CSS",DESELECT_SELECTED:"DESELECT_SELECTED",CLEAR_SELECTION_ON_CLICK:"CLEAR_SELECTION_ON_CLICK",ITEM_ACTIONS:"ITEM_ACTIONS",GRID_ACTIONS:"GRID_ACTIONS"};m.DEFAULT_GRID_FEATURES={SELECTION:{CLASS:c,
IMPLEMENTATION:{},CLASSES:null},KEYBOARD_SELECTION:{CLASS:a,IMPLEMENTATION:{},CLASSES:null},COLUMN_HIDER:{CLASS:k,IMPLEMENTATION:{},CLASSES:null},COLUMN_REORDER:{CLASS:h,IMPLEMENTATION:{},CLASSES:null},COLUMN_RESIZER:{CLASS:d,IMPLEMENTATION:{},CLASSES:null}};m.GRID_FEATURES={SELECTION:{CLASS:c,IMPLEMENTATION:{},CLASSES:null},KEYBOARD_SELECTION:{CLASS:a,IMPLEMENTATION:{},CLASSES:null},COLUMN_HIDER:{CLASS:k,IMPLEMENTATION:{},CLASSES:null},COLUMN_REORDER:{CLASS:h,IMPLEMENTATION:{},CLASSES:null},COLUMN_RESIZER:{CLASS:d,
IMPLEMENTATION:{},CLASSES:null},PAGINATION:{CLASS:b,IMPLEMENTATION:{},CLASSES:null},TOOLBAR:{CLASS:g,IMPLEMENTATION:{},CLASSES:null},CONTEXT_MENU:{CLASS:p,IMPLEMENTATION:{},CLASSES:null},ACTIONS:{CLASS:A,IMPLEMENTATION:{},CLASSES:null},CLIPBOARD:{CLASS:x,IMPLEMENTATION:{},CLASSES:null}};return n(null,[],{})})},"xfile/model/File":function(){define(["dcl/dcl","xide/data/Model","xide/utils","xide/types"],function(n,m,k,h){return n(m,{declaredClass:"xfile.model.File",getFolder:function(){var d=this.getPath();
return this.directory?d:k.pathinfo(d,h.PATH_PARTS.ALL).dirname},getChildren:function(){return this.children},getParent:function(){return(this.getStore()||this._S).getParent(this)},getStore:function(){return this._store||this._S}})})},"dstore/Cache":function(){define("dojo/_base/array dojo/when dojo/_base/declare dojo/_base/lang ./Store ./Memory ./QueryResults".split(" "),function(n,m,k,h,d,b,c){function g(a){return function(){var b=this.inherited(arguments),c=this.cachingCollection||this.cachingStore;
b.cachingCollection=c[a].apply(c,arguments);b.isValidFetchCache=!0===this.canCacheQuery||this.canCacheQuery(a,arguments);return b}}function p(a){a.cachingStore||(a.cachingStore=new b);a.cachingStore.Model=a.Model;a.cachingStore.idProperty=a.idProperty}var a={cachingStore:null,constructor:function(){p(this)},canCacheQuery:function(a,b){return!1},isAvailableInCache:function(){return this.isValidFetchCache&&(this.allLoaded||this.fetchRequest)||this._parent&&this._parent.isAvailableInCache()},fetch:function(){return this._fetch(arguments)},
fetchRange:function(){return this._fetch(arguments,!0)},_fetch:function(a,b){var d=this.cachingStore,e=this.cachingCollection||d,g=this,h=this.isAvailableInCache();if(h)return new c(m(h,function(){return g.isAvailableInCache()?b?e.fetchRange(a[0]):e.fetch():g.inherited(a)}));h=this.fetchRequest=this.inherited(a);m(h,function(a){var c=!b;g.fetchRequest=null;n.forEach(a,function(a){!g.isLoaded||g.isLoaded(a)?d.put(a):c=!1});c&&(g.allLoaded=!0);return a});return h},isValidFetchCache:!1,get:function(a,
b){var c=this.cachingStore,d=this.getInherited(arguments),e=this;return m(this.fetchRequest,function(){return m(c.get(a),function(g){if(void 0!==g)return g;if(d)return m(d.call(e,a,b),function(b){b&&c.put(b,{id:a});return b})})})},add:function(a,b){var c=this.cachingStore;return m(this.inherited(arguments),function(d){var e=c.put(d&&"object"===typeof d?d:a,b);return d||e})},put:function(a,b){var c=this.cachingStore;c.remove(b&&b.id||this.getIdentity(a));return m(this.inherited(arguments),function(d){var e=
c.put(d&&"object"===typeof d?d:a,b);return d||e})},remove:function(a,b){var c=this.cachingStore;return m(this.inherited(arguments),function(d){return m(c.remove(a,b),function(){return d})})},evict:function(a){this.allLoaded=!1;return this.cachingStore.remove(a)},invalidate:function(){this.allLoaded=!1},_createSubCollection:function(){var a=this.inherited(arguments);a._parent=this;return a},sort:g("sort"),filter:g("filter"),select:g("select"),_getQuerierFactory:function(a){var b=this.cachingStore;
return this.inherited(arguments)||h.hitch(b,b._getQuerierFactory(a))}};d=k(null,a);d.create=function(b,c){b=k.safeMixin(h.delegate(b),a);k.safeMixin(b,c);p(b);return b};return d})},"xcf/mixins/LogMixin":function(){define(["dcl/dcl","xcf/types/Types","xide/utils"],function(n,m,k){var h=m.DEFAULT_DEVICE_LOGGING_FLAGS;n=n(null,{hasFlagEx:function(d,b,c){d=d.loggingFlags;d=_.isString(d)?k.fromJson(d):d||{};c=d[c]?d[c]:h[c];return null!=c&&c&b?!0:!1}});n.DEFAULT_LOGGING_FLAGS=h;return n})},"dijit/MenuBar":function(){define(["dojo/_base/declare",
"dojo/keys","./_MenuBase","dojo/text!./templates/MenuBar.html"],function(n,m,k,h){return n("dijit.MenuBar",k,{templateString:h,baseClass:"dijitMenuBar",popupDelay:0,_isMenuBar:!0,_orient:["below"],_moveToPopup:function(d){if(this.focusedChild&&this.focusedChild.popup&&!this.focusedChild.disabled)this.onItemClick(this.focusedChild,d)},focusChild:function(d){this.inherited(arguments);this.activated&&d.popup&&!d.disabled&&this._openItemPopup(d,!0)},_onChildDeselect:function(d){this.currentPopupItem==
d&&(this.currentPopupItem=null,d._closePopup());this.inherited(arguments)},_onLeftArrow:function(){this.focusPrev()},_onRightArrow:function(){this.focusNext()},_onDownArrow:function(d){this._moveToPopup(d)},_onUpArrow:function(){},onItemClick:function(d,b){!d.popup||!d.popup.isShowingNow||/^key/.test(b.type)&&b.keyCode===m.DOWN_ARROW?this.inherited(arguments):(d.focusNode.focus(),this._cleanUp(!0))}})})},"dojo/errors/RequestError":function(){define(["./create"],function(n){return n("RequestError",
function(m,k){this.response=k})})},"xide/widgets/DomStyleProperties":function(){define("dcl/dcl dojo/dom-class dojo/dom-attr xide/widgets/WidgetBase xide/factory xide/utils xide/types xide/layout/_TabContainer dojo/_base/lang dojo/i18n!davinci/ve/nls/ve dijit/layout/ContentPane xideve/widgets/WidgetLite xide/mixins/ReloadMixin davinci/ve/widgets/HTMLStringUtil davinci/ve/widgets/WidgetToolBar davinci/ve/widgets/Cascade davinci/ve/widgets/CommonProperties davinci/ve/widgets/WidgetProperties davinci/ve/widgets/EventSelection dijit/_WidgetBase davinci/ve/widgets/MutableStore dijit/form/ComboBox dojo/i18n!davinci/ve/nls/ve xide/form/Select xdojo/declare xide/mixins/EventedMixin".split(" "),
function(n,m,k,h,d,b,c,g,p,a,e,q,u,w,r,v,x,A,z,y,B,C,E,F,G,D){var H=G("xideve/views/StyleView",[q,u,D],{showWidgetProperties:!0,_editor:null,_widget:null,_widgets:null,_subWidget:null,_titleBarDiv:"\x3cdiv class\x3d'palette_titleBarDiv'\x3e\x3cspan class\x3d'paletteCloseBox'\x3e\x3c/span\x3e\x3cspan class\x3d'titleBarDivTitle'\x3e\x3c/span\x3e\x3c/div\x3e",constructor:function(a,b){this.subscribe("/davinci/ui/editorSelected",dojo.hitch(this,this._editorSelected));this.subscribe("/davinci/ui/widgetSelected",
dojo.hitch(this,this._widgetSelectionChanged));this.subscribe("/davinci/states/state/changed",dojo.hitch(this,this._stateChanged));this.subscribe("/maqetta/appstates/state/changed",dojo.hitch(this,this._stateChanged));this.subscribe("/davinci/ui/initialPerspectiveReady",dojo.hitch(this,this._initialPerspectiveReady));this.subscribe("/davinci/workbench/ready",dojo.hitch(this,this._workbenchReady))},_pageTemplate:[{key:"widgetSpecific",className:"maqPropertySection page_editor_only",addCommonPropertiesAtTop:!1,
html:"\x3cdiv dojoType\x3d'davinci.ve.widgets.WidgetProperties'\x3e\x3c/div\x3e"},{key:"layout",className:"maqPropertySection",addCommonPropertiesAtTop:!0,pageTemplate:[{display:"width",type:"multi",target:["width"],values:["","auto","100%","200px","10em"]},{display:"height",type:"multi",target:["height"],values:["","auto","100%","200px","10em"]},{html:"\x26nbsp;"},{key:"showMinMax",display:"\x26nbsp;\x26nbsp;\x26nbsp;",type:"toggleSection",pageTemplate:[{display:"min-height",type:"multi",target:["min-height"],
rowClass:"propertiesSectionHidden"},{display:"max-height",type:"multi",target:["max-height"],rowClass:"propertiesSectionHidden"},{display:"min-width",type:"multi",target:["min-width"],rowClass:"propertiesSectionHidden"},{display:"max-width",type:"multi",target:["max-width"],rowClass:"propertiesSectionHidden"},{html:"\x26nbsp;",rowClass:"propertiesSectionHidden"}]},{display:"position",type:"combo",target:["position"],values:["","absolute","fixed","relative","static"]},{display:"left",type:"multi",
target:["left"],values:["","0px","1em"]},{display:"top",type:"multi",target:["top"],values:["","0px","1em"]},{display:"right",type:"multi",target:["right"],values:["","0px","1em"]},{display:"bottom",type:"multi",target:["bottom"],values:["","0px","1em"]},{display:"display",type:"combo",target:["display"],values:["","none","block","inline","inline-block"]},{display:"opacity",type:"multi",target:["opacity"],values:["0","0.5","1.0"]},{display:"box-shadow",type:"text",target:["box-shadow"],value:["",
"none","1px 1px rgba(0,0,0,.5)"]},{display:"float",type:"combo",target:["float"],values:["","none","left","right"]},{display:"clear",type:"combo",target:["clear"],values:["","none","left","right","both"]},{display:"overflow",type:"combo",target:["overflow"],values:["","visible","hidden","scroll","auto"]},{display:"z-index",type:"multi",target:["z-index"],values:" auto 0 1 100 -1 -100".split(" ")},{display:"box-sizing",type:"combo",target:["box-sizing","-webkit-box-sizing","-ms-box-sizing","-moz-box-sizing"],
values:["","content-box","border-box"]}]},{key:"padding",className:"maqPropertySection",addCommonPropertiesAtTop:!0,pageTemplate:[{display:"\x3cb\x3e(padding)\x3c/b\x3e",type:"multi",target:["padding"],values:["","0px","1em"]},{key:"showtrbl",display:"\x26nbsp;\x26nbsp;\x26nbsp;",type:"toggleSection",pageTemplate:[{display:"padding-top",type:"multi",target:["padding-top"],values:["","0px","1em"],rowClass:"propertiesSectionHidden"},{display:"padding-right",type:"multi",target:["padding-right"],values:["",
"0px","1em"],rowClass:"propertiesSectionHidden"},{display:"padding-bottom",type:"multi",target:["padding-bottom"],values:["","0px","1em"],rowClass:"propertiesSectionHidden"},{display:"padding-left",type:"multi",target:["padding-left"],values:["","0px","1em"],rowClass:"propertiesSectionHidden"}]}]},{key:"margins",className:"maqPropertySection",addCommonPropertiesAtTop:!0,pageTemplate:[{display:"\x3cb\x3e(margin)\x3c/b\x3e",type:"multi",target:["margin"],values:["","0px","1em"]},{key:"showtrbl",display:"\x26nbsp;\x26nbsp;\x26nbsp;",
type:"toggleSection",pageTemplate:[{display:"margin-top",type:"multi",target:["margin-top"],values:["","0px","1em"],rowClass:"propertiesSectionHidden"},{display:"margin-right",type:"multi",target:["margin-right"],values:["","0px","1em"],rowClass:"propertiesSectionHidden"},{display:"margin-bottom",type:"multi",target:["margin-bottom"],values:["","0px","1em"],rowClass:"propertiesSectionHidden"},{display:"margin-left",type:"multi",target:["margin-left"],values:["","0px","1em"],rowClass:"propertiesSectionHidden"}]}]},
{key:"background",className:"maqPropertySection",addCommonPropertiesAtTop:!0,pageTemplate:[{display:"background-color",type:"background",target:["background-color"],colorswatch:!0},{display:"background-image",type:"background",target:["background-image"],values:["","none"]},{display:"background-repeat",type:"background",values:["","repeat","repeat-x","repeat-y","no-repeat"],target:["background-repeat"]},{display:"background-position",type:"background",target:["background-position"],values:";0px 0px;0% 0%;left top;center center;right bottom".split(";")},
{display:"background-size",type:"background",target:["background-size"],values:["","auto","contain","cover","100%"]},{display:"background-origin",type:"background",target:["background-origin"],values:["","border-box","padding-box","content-box"]},{display:"background-clip",type:"background",target:["background-clip"],values:["","border-box","padding-box","content-box"]}]},{key:"border",className:"maqPropertySection",addCommonPropertiesAtTop:!0,pageTemplate:[{display:"\x3cb\x3e(border)\x3c/b\x3e",
type:"multi",target:["border"],values:["","none","1px solid black"]},{display:"show",type:"combo",values:["none","props","sides","all"],id:"properties_show_select",onchange:function(a){if("number"==typeof a){var b=function(a,b,c,d,e){for(;b<=c;b++){var g=dojo.byId(a[b].rowId);b>=d&&b<=e?dojo.removeClass(g,"propertiesSectionHidden"):dojo.addClass(g,"propertiesSectionHidden")}};if(this.pageTemplate){a=this.pageTemplate[a];var c;a&&a.id&&(c=dojo.byId(a.id).value);dojo.isString(c)&&("none"===c?b(this.pageTemplate,
2,20,-1,-1):"sides"===c?b(this.pageTemplate,2,20,2,5):"props"===c?b(this.pageTemplate,2,20,6,8):"all"===c&&b(this.pageTemplate,2,20,9,20))}}}},{display:"border-top",type:"multi",target:["border-top"],values:["","none","1px solid black"],rowClass:"propertiesSectionHidden"},{display:"border-right",type:"multi",target:["border-right"],values:["","none","1px solid black"],rowClass:"propertiesSectionHidden"},{display:"border-bottom",type:"multi",target:["border-bottom"],values:["","none","1px solid black"],
rowClass:"propertiesSectionHidden"},{display:"border-left",type:"multi",target:["border-left"],values:["","none","1px solid black"],rowClass:"propertiesSectionHidden"},{display:"border-width",type:"multi",target:["border-width"],values:["","1px","1em"],rowClass:"propertiesSectionHidden"},{display:"border-style",type:"multi",target:["border-style"],values:["","none","solid","dotted","dashed"],rowClass:"propertiesSectionHidden"},{display:"border-color",type:"color",target:["border-color"],rowClass:"propertiesSectionHidden"},
{display:"border-top-width",type:"multi",target:["border-top-width"],values:["","1px","1em"],rowClass:"propertiesSectionHidden"},{display:"border-top-style",type:"multi",target:["border-top-style"],values:["","none","solid","dotted","dashed"],rowClass:"propertiesSectionHidden"},{display:"border-top-color",type:"color",target:["border-top-color"],rowClass:"propertiesSectionHidden"},{display:"border-right-width",type:"multi",target:["border-right-width"],values:["","1px","1em"],rowClass:"propertiesSectionHidden"},
{display:"border-right-style",type:"multi",target:["border-right-style"],values:["","none","solid","dotted","dashed"],rowClass:"propertiesSectionHidden"},{display:"border-right-color",type:"color",target:["border-right-color"],rowClass:"propertiesSectionHidden"},{display:"border-bottom-width",type:"multi",target:["border-bottom-width"],values:["","1px","1em"],rowClass:"propertiesSectionHidden"},{display:"border-bottom-style",type:"multi",target:["border-bottom-style"],values:["","none","solid","dotted",
"dashed"],rowClass:"propertiesSectionHidden"},{display:"border-bottom-color",type:"color",target:["border-bottom-color"],rowClass:"propertiesSectionHidden"},{display:"border-left-width",type:"multi",target:["border-left-width"],values:["","1px","1em"],rowClass:"propertiesSectionHidden"},{display:"border-left-style",type:"multi",target:["border-left-style"],values:["","none","solid","dotted","dashed"],rowClass:"propertiesSectionHidden"},{display:"border-left-color",type:"color",target:["border-left-color"],
rowClass:"propertiesSectionHidden"},{display:"border-collapse",type:"combo",target:["border-collapse"],values:["","separate","collapse"]},{display:"\x3cb\x3e(border-radius)\x3c/b\x3e",type:"multi",target:["border-radius","-moz-border-radius"],values:["","0px","6px"]},{key:"showDetails",display:"",type:"toggleSection",pageTemplate:[{display:"border-top-left-radius",type:"multi",target:["border-top-left-radius","-moz-border-radius-topleft"],values:["","0px","6px"],rowClass:"propertiesSectionHidden"},
{display:"border-top-right-radius",type:"multi",target:["border-top-right-radius","-moz-border-radius-topright"],values:["","0px","6px"],rowClass:"propertiesSectionHidden"},{display:"border-bottom-right-radius",type:"multi",target:["border-bottom-right-radius","-moz-border-radius-bottomright"],values:["","0px","6px"],rowClass:"propertiesSectionHidden"},{display:"border-bottom-left-radius",type:"multi",target:["border-bottom-left-radius","-moz-border-radius-bottomleft"],values:["","0px","6px"],rowClass:"propertiesSectionHidden"}]}]},
{key:"fontsAndText",className:"maqPropertySection",addCommonPropertiesAtTop:!0,pageTemplate:[{display:"font",type:"text",target:["font"]},{display:"font-family",type:"font",target:["font-family"]},{display:"size",type:"multi",target:["font-size"],values:["","100%","1em","10px","10pt"]},{display:"color",type:"color",target:["color"]},{display:"font-weight",type:"combo",target:["font-weight"],values:["","normal","bold"]},{display:"font-style",type:"combo",target:["font-style"],values:["","normal","italic"]},
{display:"text-decoration",type:"combo",target:["text-decoration"],values:["","none","underline","line-through"]},{display:"text-align",type:"combo",target:["text-align"],values:["","left","center","right","justify"]},{display:"vertical-align",type:"combo",target:["vertical-align"],values:["","baseline","top","middle","bottom"]},{display:"white-space",type:"combo",target:["white-space"],values:" normal nowrap pre pre-line pre-wrap".split(" ")},{display:"text-indent",type:"multi",target:["text-indent"],
values:["","0","1em","10px"]},{display:"line-height",type:"multi",target:["line-height"],values:["","normal","1.2","120%"]}]}],getPageTemplate:function(){return[{key:"widgetSpecific",className:"maqPropertySection page_editor_only",addCommonPropertiesAtTop:!1,html:"\x3cdiv dojoType\x3d'davinci.ve.widgets.WidgetProperties'\x3e\x3c/div\x3e"},{key:"layout",className:"maqPropertySection",addCommonPropertiesAtTop:!0,pageTemplate:[{display:"width",type:"multi",target:["width"],values:["","auto","100%","200px",
"10em"]},{display:"height",type:"multi",target:["height"],values:["","auto","100%","200px","10em"]},{html:"\x26nbsp;"},{key:"showMinMax",display:"\x26nbsp;\x26nbsp;\x26nbsp;",type:"toggleSection",pageTemplate:[{display:"min-height",type:"multi",target:["min-height"],rowClass:"propertiesSectionHidden"},{display:"max-height",type:"multi",target:["max-height"],rowClass:"propertiesSectionHidden"},{display:"min-width",type:"multi",target:["min-width"],rowClass:"propertiesSectionHidden"},{display:"max-width",
type:"multi",target:["max-width"],rowClass:"propertiesSectionHidden"},{html:"\x26nbsp;",rowClass:"propertiesSectionHidden"}]},{display:"position",type:"combo",target:["position"],values:["","absolute","fixed","relative","static"]},{display:"left",type:"multi",target:["left"],values:["","0px","1em"]},{display:"top",type:"multi",target:["top"],values:["","0px","1em"]},{display:"right",type:"multi",target:["right"],values:["","0px","1em"]},{display:"bottom",type:"multi",target:["bottom"],values:["",
"0px","1em"]},{display:"display",type:"combo",target:["display"],values:["","none","block","inline","inline-block"]},{display:"opacity",type:"multi",target:["opacity"],values:["0","0.5","1.0"]},{display:"box-shadow",type:"text",target:["box-shadow"],value:["","none","1px 1px rgba(0,0,0,.5)"]},{display:"float",type:"combo",target:["float"],values:["","none","left","right"]},{display:"clear",type:"combo",target:["clear"],values:["","none","left","right","both"]},{display:"overflow",type:"combo",target:["overflow"],
values:["","visible","hidden","scroll","auto"]},{display:"z-index",type:"multi",target:["z-index"],values:" auto 0 1 100 -1 -100".split(" ")},{display:"box-sizing",type:"combo",target:["box-sizing","-webkit-box-sizing","-ms-box-sizing","-moz-box-sizing"],values:["","content-box","border-box"]}]},{key:"padding",className:"maqPropertySection",addCommonPropertiesAtTop:!0,pageTemplate:[{display:"\x3cb\x3e(padding)\x3c/b\x3e",type:"multi",target:["padding"],values:["","0px","1em"]},{key:"showtrbl",display:"\x26nbsp;\x26nbsp;\x26nbsp;",
type:"toggleSection",pageTemplate:[{display:"padding-top",type:"multi",target:["padding-top"],values:["","0px","1em"],rowClass:"propertiesSectionHidden"},{display:"padding-right",type:"multi",target:["padding-right"],values:["","0px","1em"],rowClass:"propertiesSectionHidden"},{display:"padding-bottom",type:"multi",target:["padding-bottom"],values:["","0px","1em"],rowClass:"propertiesSectionHidden"},{display:"padding-left",type:"multi",target:["padding-left"],values:["","0px","1em"],rowClass:"propertiesSectionHidden"}]}]},
{key:"margins",className:"maqPropertySection",addCommonPropertiesAtTop:!0,pageTemplate:[{display:"\x3cb\x3e(margin)\x3c/b\x3e",type:"multi",target:["margin"],values:["","0px","1em"]},{key:"showtrbl",display:"\x26nbsp;\x26nbsp;\x26nbsp;",type:"toggleSection",pageTemplate:[{display:"margin-top",type:"multi",target:["margin-top"],values:["","0px","1em"],rowClass:"propertiesSectionHidden"},{display:"margin-right",type:"multi",target:["margin-right"],values:["","0px","1em"],rowClass:"propertiesSectionHidden"},
{display:"margin-bottom",type:"multi",target:["margin-bottom"],values:["","0px","1em"],rowClass:"propertiesSectionHidden"},{display:"margin-left",type:"multi",target:["margin-left"],values:["","0px","1em"],rowClass:"propertiesSectionHidden"}]}]},{key:"background",className:"maqPropertySection",addCommonPropertiesAtTop:!0,pageTemplate:[{display:"background-color",type:"background",target:["background-color"],colorswatch:!0},{display:"background-image",type:"background",target:["background-image"],
values:["","none"]},{display:"background-repeat",type:"background",values:["","repeat","repeat-x","repeat-y","no-repeat"],target:["background-repeat"]},{display:"background-position",type:"background",target:["background-position"],values:";0px 0px;0% 0%;left top;center center;right bottom".split(";")},{display:"background-size",type:"background",target:["background-size"],values:["","auto","contain","cover","100%"]},{display:"background-origin",type:"background",target:["background-origin"],values:["",
"border-box","padding-box","content-box"]},{display:"background-clip",type:"background",target:["background-clip"],values:["","border-box","padding-box","content-box"]}]},{key:"border",className:"maqPropertySection",addCommonPropertiesAtTop:!0,pageTemplate:[{display:"\x3cb\x3e(border)\x3c/b\x3e",type:"multi",target:["border"],values:["","none","1px solid black"]},{display:"show",type:"combo",values:["none","props","sides","all"],id:"properties_show_select",onchange:function(a){if("number"==typeof a){var b=
function(a,b,c,d,e){for(;b<=c;b++){var g=dojo.byId(a[b].rowId);b>=d&&b<=e?dojo.removeClass(g,"propertiesSectionHidden"):dojo.addClass(g,"propertiesSectionHidden")}};if(this.pageTemplate){a=this.pageTemplate[a];var c;a&&a.id&&(c=dojo.byId(a.id).value);dojo.isString(c)&&("none"===c?b(this.pageTemplate,2,20,-1,-1):"sides"===c?b(this.pageTemplate,2,20,2,5):"props"===c?b(this.pageTemplate,2,20,6,8):"all"===c&&b(this.pageTemplate,2,20,9,20))}}}},{display:"border-top",type:"multi",target:["border-top"],
values:["","none","1px solid black"],rowClass:"propertiesSectionHidden"},{display:"border-right",type:"multi",target:["border-right"],values:["","none","1px solid black"],rowClass:"propertiesSectionHidden"},{display:"border-bottom",type:"multi",target:["border-bottom"],values:["","none","1px solid black"],rowClass:"propertiesSectionHidden"},{display:"border-left",type:"multi",target:["border-left"],values:["","none","1px solid black"],rowClass:"propertiesSectionHidden"},{display:"border-width",type:"multi",
target:["border-width"],values:["","1px","1em"],rowClass:"propertiesSectionHidden"},{display:"border-style",type:"multi",target:["border-style"],values:["","none","solid","dotted","dashed"],rowClass:"propertiesSectionHidden"},{display:"border-color",type:"color",target:["border-color"],rowClass:"propertiesSectionHidden"},{display:"border-top-width",type:"multi",target:["border-top-width"],values:["","1px","1em"],rowClass:"propertiesSectionHidden"},{display:"border-top-style",type:"multi",target:["border-top-style"],
values:["","none","solid","dotted","dashed"],rowClass:"propertiesSectionHidden"},{display:"border-top-color",type:"color",target:["border-top-color"],rowClass:"propertiesSectionHidden"},{display:"border-right-width",type:"multi",target:["border-right-width"],values:["","1px","1em"],rowClass:"propertiesSectionHidden"},{display:"border-right-style",type:"multi",target:["border-right-style"],values:["","none","solid","dotted","dashed"],rowClass:"propertiesSectionHidden"},{display:"border-right-color",
type:"color",target:["border-right-color"],rowClass:"propertiesSectionHidden"},{display:"border-bottom-width",type:"multi",target:["border-bottom-width"],values:["","1px","1em"],rowClass:"propertiesSectionHidden"},{display:"border-bottom-style",type:"multi",target:["border-bottom-style"],values:["","none","solid","dotted","dashed"],rowClass:"propertiesSectionHidden"},{display:"border-bottom-color",type:"color",target:["border-bottom-color"],rowClass:"propertiesSectionHidden"},{display:"border-left-width",
type:"multi",target:["border-left-width"],values:["","1px","1em"],rowClass:"propertiesSectionHidden"},{display:"border-left-style",type:"multi",target:["border-left-style"],values:["","none","solid","dotted","dashed"],rowClass:"propertiesSectionHidden"},{display:"border-left-color",type:"color",target:["border-left-color"],rowClass:"propertiesSectionHidden"},{display:"border-collapse",type:"combo",target:["border-collapse"],values:["","separate","collapse"]},{display:"\x3cb\x3e(border-radius)\x3c/b\x3e",
type:"multi",target:["border-radius","-moz-border-radius"],values:["","0px","6px"]},{key:"showDetails",display:"",type:"toggleSection",pageTemplate:[{display:"border-top-left-radius",type:"multi",target:["border-top-left-radius","-moz-border-radius-topleft"],values:["","0px","6px"],rowClass:"propertiesSectionHidden"},{display:"border-top-right-radius",type:"multi",target:["border-top-right-radius","-moz-border-radius-topright"],values:["","0px","6px"],rowClass:"propertiesSectionHidden"},{display:"border-bottom-right-radius",
type:"multi",target:["border-bottom-right-radius","-moz-border-radius-bottomright"],values:["","0px","6px"],rowClass:"propertiesSectionHidden"},{display:"border-bottom-left-radius",type:"multi",target:["border-bottom-left-radius","-moz-border-radius-bottomleft"],values:["","0px","6px"],rowClass:"propertiesSectionHidden"}]}]},{key:"fontsAndText",className:"maqPropertySection",addCommonPropertiesAtTop:!0,pageTemplate:[{display:"font",type:"text",target:["font"]},{display:"font-family",type:"font",target:["font-family"]},
{display:"size",type:"multi",target:["font-size"],values:["","100%","1em","10px","10pt"]},{display:"color",type:"color",target:["color"]},{display:"font-weight",type:"combo",target:["font-weight"],values:["","normal","bold"]},{display:"font-style",type:"combo",target:["font-style"],values:["","normal","italic"]},{display:"text-decoration",type:"combo",target:["text-decoration"],values:["","none","underline","line-through"]},{display:"text-align",type:"combo",target:["text-align"],values:["","left",
"center","right","justify"]},{display:"vertical-align",type:"combo",target:["vertical-align"],values:["","baseline","top","middle","bottom"]},{display:"white-space",type:"combo",target:["white-space"],values:" normal nowrap pre pre-line pre-wrap".split(" ")},{display:"text-indent",type:"multi",target:["text-indent"],values:["","0","1em","10px"]},{display:"line-height",type:"multi",target:["line-height"],values:["","normal","1.2","120%"]}]}]},buildRendering:function(){this.domNode=dojo.doc.createElement("div");
dojo.addClass(this.domNode,"propertiesContent");var b;b=""+this._titleBarDiv;b+="\x3cdiv class\x3d'propertiesToolBar' dojoType\x3d'davinci.ve.widgets.WidgetToolBar'\x3e\x3c/div\x3e\x3cdiv dojoType\x3d'davinci.ve.widgets.WidgetProperties'\x3e\x3c/div\x3e\x3cdiv class\x3d'propScrollableArea'\x3e\x3ctable class\x3d'propRootDetailsContainer'\x3e\x3ctr\x3e\x3ctd class\x3d'propPaletteRoot'\x3e";this.pageTemplate=this.getPageTemplate();for(var c=0;c<this.pageTemplate.length;c++)if(this.pageTemplate[c].title=
a[this.pageTemplate[c].key]?a[this.pageTemplate[c].key]:"Key not found",this.pageTemplate[c].pageTemplate)for(var d=0;d<this.pageTemplate[c].pageTemplate.length;d++)this.pageTemplate[c].pageTemplate[d].key&&(this.pageTemplate[c].pageTemplate[d].display+=a[this.pageTemplate[c].pageTemplate[d].key]?a[this.pageTemplate[c].pageTemplate[d].key]:"Key not found");this.domNode.innerHTML=b;this.inherited(arguments)},_widgetValuesChanged:function(a){var b=this._currentPropSection;if(b){for(var c=!1,d=0;d<this.pageTemplate.length;d++)if(this.pageTemplate[d].key==
b){c=!0;break}if(c)for(b=this._getVisibleCascade(d),c=0;c<b.length;c++)b[c]._widgetValuesChanged(a)}},_getVisibleCascade:function(a){if(a)return this.pageTemplate[a].cascade;a=[];var b=this._currentPropSection;if(b)for(var c=0;c<this.pageTemplate.length;c++)if(this.pageTemplate[c].key==b){a=a.concat(this.pageTemplate[c].cascade);break}return a},_updatePaletteValues:function(a){if(this._editor){p.isArray(a)||(a=[a]);var b=a[0];this._subwidget=(this._widget=b)&&b.subwidget;this.setReadOnly(!(this._widget||
this._subwidget));for(var b=this._getVisibleCascade(),c=0;c<b.length;c++)b[c]._widgetSelectionChanged(a)}else console.error("have no editor",a)},_widgetSelectionChanged:function(a){this._updatePaletteValues(a)},_stateChanged:function(){this._updatePaletteValues(this._widget?[this._widget]:[])},_widgetPropertiesChanged:function(a){this._widget||console.error("have no widget");this._widget&&this._widget.type!==a[0].type||this._updatePaletteValues(a)},_titlePaneOpen:function(a){a=this._getVisibleCascade(a);
for(var b=0;b<a.length;b++)a[b]._editorSelected({editor:this._editor})},startup:function(){this.domNode.style.height="100%";this.inherited(arguments);for(var a=0;a<this.pageTemplate.length;a++){var b=this.pageTemplate[a];if(b.pageTemplate)for(var c=0;c<b.pageTemplate.length;c++){var d=b.pageTemplate[c];d.onchange&&d.id&&dojo.connect(dojo.byId(d.id),"onchange",dojo.hitch(b,d.onchange,c))}}for(a=0;a<this.pageTemplate.length;a++)this.pageTemplate[a].cascade=[];this.setReadOnly(!0);this.onEditorSelected();
this.subscribe("/davinci/ui/widgetValuesChanged",dojo.hitch(this,this._widgetValuesChanged));this.subscribe("/davinci/ui/widgetPropertiesChanged",dojo.hitch(this,this._widgetPropertiesChanged));this.subscribe("/davinci/ui/widgetSelected",dojo.hitch(this,this._widgetSelectionChanged))},destroy:function(){this.inherited(arguments);for(var a=0;a<this.pageTemplate.length;a++){var b=this.pageTemplate[a].pageTemplate;if(b)for(var c=0;c<b.length;c++){var d=b[c].widget;d&&(d._destroyed?b[c].widget=null:d.destroy())}}},
setReadOnly:function(a){for(var b=0;b<this.pageTemplate.length;b++){var c=this.pageTemplate[b].pageTemplate;if(c)for(var d=0;d<c.length;d++){var e=c[d].widget;e?e.set("readOnly",a):(e=c[d].domNode)&&dojo.attr(e,"disabled",a)}}},_modelEntryById:function(a){for(var b=0;b<this.pageTemplate.length;b++){var c=this.pageTemplate[b].pageTemplate;if(c)for(var d=0;d<c.length;d++)if(a==c[d].id)return c[d]}},_editorSelected:function(a){this._editor=a.editor;this.onEditorSelected(this._editor);a=this.getParent();
var b=a.selectedChildWidget,c=!1,d=dojo.query(".maqPropertySection",a.domNode);this._editor?"davinci.ve.PageEditor"!=this._editor.declaredClass&&"davinci.ve.themeEditor.ThemeEditor"!=this._editor.declaredClass?d.forEach(function(a){a=dijit.byNode(a);a.controlButton&&(a.controlButton.domNode.style.display="none");a==b&&(c=!0)}):(d.forEach(function(a){a=dijit.byNode(a);a.controlButton&&(a.controlButton.domNode.style.display="")}),"davinci.ve.themeEditor.ThemeEditor"==this._editor.declaredClass&&dojo.query(".page_editor_only",
a.domNode).forEach(function(a){a=dijit.byNode(a);a.controlButton&&(a.controlButton.domNode.style.display="none");a==b&&(c=!0)})):(d.forEach(function(a){dijit.byNode(a).controlButton.domNode.style.display=""}),c=!0);c&&this._selectFirstVisibleTab()},onEditorSelected:function(){this._subWidget=this._widget=null;this._oldClassName&&(this.domNode?dojo.removeClass(this.domNode.parentNode.parentNode,this._oldClassName):console.error("have no dom node !"));if(this._editor)if(this._editor&&this._editor.editorID&&
(this._oldClassName=this._editor.editorID.replace(/\./g,"_"),this.domNode?dojo.addClass(this.domNode.parentNode.parentNode,this._oldClassName):console.error("have no dom node !")),this.domNode){for(var a=this._currentPropSection,b=dojo.query(".propSectionButton",this.domNode),c=0;c<b.length;c++){var d=b[c];this._editor&&this._editor.supports&&this._editor.supports("propsect_"+this.pageTemplate[c].key)?dojo.removeClass(d,"dijitHidden"):(dojo.addClass(d,"dijitHidden"),a==this.pageTemplate[c].key&&w.showRoot())}a=
[];for(c=0;c<this.pageTemplate.length;c++)(b=this.pageTemplate[c].cascade)&&(a=a.concat(b));for(c=0;c<a.length;c++)b=a[c],b._editorSelected&&b._editorSelected({editor:this._editor})}else console.error("have no dom node !")},_destroyContent:function(){var a=this.containerNode||this.domNode;for(dojo.forEach(dojo.query("[widgetId]",a).map(dijit.byNode),function(a){a.destroy()});a.firstChild;)dojo._destroyElement(a.firstChild);dojo.forEach(this._tooltips,function(a){a.destroy()});this._tooltips=void 0},
sectionTitleFromKey:function(a){for(var b=0;b<this.pageTemplate.length;b++)if(this.pageTemplate[b].key==a)return this.pageTemplate[b].title},_initialPerspectiveReady:function(){var c=null;if(!this._alreadySplitIntoMultipleTabs){var d=this.tabContainer;dojo.addClass(d.domNode,"propRootDetailsContainer");dojo.addClass(d.domNode,"propertiesContent");for(var g=0;g<this.pageTemplate.length;g++){var c=this.pageTemplate[g].key,h=this.pageTemplate[g].title,k=this.pageTemplate[g].className;k||(k="");var p=
this._titleBarDiv,p=p+"\x3cdiv class\x3d'propertiesToolBar' dojoType\x3d'davinci.ve.widgets.WidgetToolBar'\x3e\x3c/div\x3e",p=p+("\x3cdiv class\x3d'cascadeBackButtonDiv'\x3e\x3cbutton onclick\x3d'davinci.ve.widgets.HTMLStringUtil.showSection(\""+c+'","'+h+"\")'\x3e"+h+" "+a.properties+"\x3c/button\x3e\x3c/div\x3e"),c=w.generateTemplate(this.pageTemplate[g]),c=p+c;0==g?(c=this,c.set("title",h),dojo.addClass(c.domNode,k)):(p=d.createTab(h,null,null,null,{"class":k,delegate:this}),p._maqPropGroup=this.pageTemplate[g].key,
c=b.addWidget(e,{title:h,content:c,"class":k,delegate:this,style:"with:inherit;height:inherit"},null,p,!1),p.cp=c,p._maqPropGroup=this.pageTemplate[g].key,p.add(c,null,!1));c&&(c._maqPropGroup=this.pageTemplate[g].key);h=dojo.query(".paletteCloseBox",c.domNode);0<h.length&&dojo.connect(h[0],"click",this,function(a){davinci.Workbench.collapsePaletteContainer(a.currentTarget)})}for(h=0;h<this.pageTemplate.length;h++)if(this.pageTemplate[h].cascade=[],k=this.pageTemplate[h].pageTemplate){for(g=0;g<k.length;g++)p=
k[g].id,(c=dijit.byId(p))?k[g].widget=c:(c=dojo.byId(p))&&(k[g].domNode=c);dojo.query("#"+this.pageTemplate[h].id+" .CascadeTop").forEach(function(a){return function(b){b=dijit.byId(b.id);a.cascade.push(b)}}(this.pageTemplate[h]))}d._on("selectChild",function(a){if(a._maqPropGroup){this._currentPropSection=a._maqPropGroup;var b=this._editor&&this._editor.getContext?this._editor.getContext():null,b=b&&b.getSelection?b.getSelection():[];this._updatePaletteValues(b);w._initSection(this._currentPropSection);
d.resize();a.resize();a.cp.resize()}}.bind(this));d.selectChild(0);this._alreadySplitIntoMultipleTabs=!0}},_workbenchReady:function(){this._updateToolBars()},_updateToolBars:function(){dojo.query(".propertiesToolBar").forEach(function(a){this._editor&&"davinci.ve.PageEditor"==this._editor.declaredClass?(dojo.removeClass(a,"dijitHidden"),a.style.display=""):dojo.addClass(a,"dijitHidden")}.bind(this))},_selectFirstVisibleTab:function(){for(var a=this.getParent(),b=a.getChildren(),c=0;c<b.length;c++){var d=
b[c];if("none"!=d.controlButton.domNode.style.display){a._maqDontExpandCollapse=!0;a.selectChild(d);delete a._maqDontExpandCollapse;break}}}});return n(h,{declaredClass:"xide.widgets.DomStyleProperties",wContentSelectorButton:null,lastUploadedFileName:null,oriPath:null,minHeight:"400px;",value:"",options:null,styleView:null,tabContainer:null,stylePane:null,preview:null,widgetNode:null,values:{},previewExtraStyle:"max-width:300px;max-height:100px;height:inherit;width:inherit;",templateString:"\x3cdiv class\x3d'widgetContainer widgetBorder widgetTable' style\x3d''\x3e\x3ctable border\x3d'0' cellpadding\x3d'5px' width\x3d'100%' \x3e\x3ctbody\x3e\x3ctr attachTo\x3d'extensionRoot'\x3e\x3ctd width\x3d'100px' class\x3d'widgetValue2' valign\x3d'middle' attachTo\x3d'previewNode'\x3e\x3c/td\x3e\x3ctd class\x3d'extension' width\x3d'25px' attachTo\x3d'button0'\x3e\x3c/td\x3e\x3ctd class\x3d'extension' width\x3d'25px' attachTo\x3d'button1'\x3e\x3c/td\x3e\x3ctd class\x3d'extension' width\x3d'25px' attachTo\x3d'button2'\x3e\x3c/td\x3e\x3c/tr\x3e\x3c/tbody\x3e\x3c/table\x3e\x3cdiv attachTo\x3d'expander' onclick\x3d'' style\x3d'width:100%;'\x3e\x3c/div\x3e\x3cdiv attachTo\x3d'previewRoot' style\x3d'width: inherit;min-height:100px;height:auto;padding: 4px;background-color: #808080'\x3e\x3cdiv id\x3d'div_5' attachTo\x3d'widgetNode' style\x3d'width: inherit;height:inherit;'\x3e\x3c/div\x3e\x3cspan class\x3d'dijitReset' style\x3d'text-align: center'\x3eSome Text\x3c/span\x3e\x3c/div\x3e\x3cdiv attachTo\x3d'last'\x3e\x3c/div\x3e\x3c/div\x3e",
filePathValidator:function(a,b){return!0},loadVE:function(a){dojo.getObject("xideve.views.StyleView")?a():require(["xideve/Embedded"],function(b){new b;a&&a()})},postMixInProperties:function(){this.userData&&this.userData.title&&(this.title=this.userData.title);if(this.userData&&!0===this.userData.vertical||!0===this.vertical)this.templateString="\x3cdiv class\x3d'widgetContainer widgetBorder widgetTable' style\x3d''\x3e\x3ctable border\x3d'0' cellpadding\x3d'5px' width\x3d'100%' \x3e\x3ctbody\x3e\x3ctr attachTo\x3d'extensionRoot'\x3e\x3ctd class\x3d'widgetValue2' valign\x3d'middle' attachTo\x3d'previewNode'\x3e\x3c/td\x3e\x3ctd class\x3d'extension' width\x3d'25px' attachTo\x3d'button0'\x3e\x3c/td\x3e\x3ctd class\x3d'extension' width\x3d'25px' attachTo\x3d'button1'\x3e\x3c/td\x3e\x3ctd class\x3d'extension' width\x3d'25px' attachTo\x3d'button2'\x3e\x3c/td\x3e\x3c/tr\x3e\x3c/tbody\x3e\x3c/table\x3e\x3cdiv attachTo\x3d'expander' onclick\x3d'' style\x3d'width:100%;'\x3e\x3c/div\x3e\x3cdiv attachTo\x3d'previewRoot' style\x3d'width: inherit;height:120px;padding: 4px;background-color: #808080'\x3e\x3cdiv id\x3d'div_5' attachTo\x3d'widgetNode' style\x3d'width: inherit;height:100px;'\x3e\x3cspan class\x3d'dijitReset' style\x3d'text-align: center'\x3eSome Text\x3c/span\x3e\x3c/div\x3e\x3c/div\x3e\x3cdiv attachTo\x3d'last' style\x3d''\x3e\x3c/div\x3e\x3c/div\x3e"},
onReloaded:function(){this._destroyWidgets();this.createWidgets()},_destroyWidgets:function(){b.destroy(this.tabContainer);b.destroy(this.styleView);b.destroy(this.stylePane);dojo.empty(this.last);this.styleView=null},createWidgets:function(){this.styleView=this.createStyleView()},getStyleArray:function(){for(var a=b.toString(this.userData.value).split(";"),c=[],d=0;d<a.length;d++){var e=a[d];if(e&&0!=e.length&&e.split&&(e=e.split(":"))&&e.length){var g={};g[e[0]]=e[1];c.push(g)}}return c},createStyleView:function(){var a=
b.addWidget(e,{title:"Widget Properties",closable:!1,style:"padding:0px;min-height:400px;"},this,this.last,!0,"ui-widget-content");this.stylePane=a;var c=b.addWidget(g,{region:"center",id:"palette-tabcontainer-right-top",tabPosition:"right-h",tabStrip:!1,"class":"davinciPalette davinciTopPalette widget",style:"height:inherit;width:inherit;",splitter:!1,direction:"right",resizeToParent:!0},null,a,!0);m.add(c.domNode,"davinciPalette davinciTopPalette");c.startup();this.tabContainer=c;var d=this,h=null;
try{h=new H({toolbarDiv:a.containerNode,parentContainer:c,tabContainer:c})}catch(L){console.error("html_style_view crash "+L)}this.add(h);var k=this.createFakeContext();this.supports=function(){return!0};a=this.createFakeWidget(k);this._widgetSelection=[a];h._initialPerspectiveReady();h._editor=this;this.editorID="davinci.ve.HTMLPageEditor";h._widgets=[a];h._widget=a;this.getContext=function(){return k};this.getSelection=function(){return d._widgetSelection};this.publish("/davinci/ui/widgetSelected",
this._widgetSelection);return h},onSelect:function(){this.styleView?this._destroyWidgets():this.createWidgets()},_onChanged:function(){var a=this._toStyleString(this.values);";"===a&&(a="");this.userData.changed=!0;this.userData.active=!0;this.editBox.set("value",a);k.set(this.widgetNode,"style",a+this.previewExtraStyle);this.setValue(a)},onChangeStyleProperty:function(a,b){a&&"undefined"!==a&&(b&&b.length?this.values[a]=b:delete this.values[a],this._onChanged())},onStyleValuesChange:function(a){if(a&&
a.cascade&&a.values&&b.isDescendant(this.domNode,a.cascade.domNode))this.onChangeStyleProperty(a.cascade.target[0],a.cascade._value)},_toStyleString:function(a){var b=[],c;for(c in a)b.push(c+":"+a[c]);return b.join(";")+";"},_toObject:function(a){var b={};a=a.split(";");for(var c=0;c<a.length;c++){var d=a[c];d&&0!=d.length&&d.split&&(d=d.split(":"))&&d.length&&(b[d[0]]=d[1])}return b},_createEditBox:function(){var a=this,c=b.toString(this.userData.value);this.editBox=d.createValidationTextBox(this.previewNode,
"","Value",c,this.filePathValidator,this.delegate,"Not a path!","I need some input");this.connectEditBox(this.editBox,function(b){b&&b.length&&(a.values=a._toObject(b),a.setValue(b),k.set(a.widgetNode,"style",b+a.previewExtraStyle),a.styleView&&a.styleView._updatePaletteValues(a._widgetSelection))})},createFakeContext:function(){var a=this;return{editor:a,blockChange:function(){},getAppCssRelativeFile:function(){return""},getThemeMeta:function(){return null},getStyleAttributeValues:function(b){return a.getStyleArray()},
getSelection:function(){return a._widgetSelection},_cssCache:{},_getCssFiles:function(){return null},getModel:function(){return{getRule:function(){return[]}}},model:{getMatchingRules:function(){return{rules:[]}}}}},createFakeWidget:function(a){return{owner:this,isFake:!0,domNode:this.widgetNode,type:"html.div",_srcElement:{tag:"div"},isHtmlWidget:!0,isWidget:!1,_skipAttrs:[],_edit_context:{},id:"div_5",_params:null,children:[],getClassNames:function(){return null},getContext:function(){return a},
metadata:{$ownproperty:{},$src:"no source",content:"\x3cdiv\x3e\x3c/div\x3e",description:{type:"text/html",value:"\x3cp\x3eThe div element has no special meaning at all. It represents its children.\x3c/p\x3e"},version:"1.0",id:"http://www.w3.org/html/div",name:"html.div",spec:"1.0",title:{type:"text/html",value:"\x3cp\x3eHTML block-level container element.\x3c/p\x3e"}}}},fillTemplate:function(){var a=this,b=this.userData.value;this.values=this._toObject(b);k.set(this.widgetNode,"style",b+this.previewExtraStyle);
this.editBox||this._createEditBox();this.selectButton=d.createSimpleButton("","fa-magic","",{},this.button0);$(this.selectButton).on("click",function(b){a.onSelect()});this.subscribe("/davinci/ui/styleValuesChange",this.onStyleValuesChange)},startup:function(){var a=dojo.getObject("xideve.views.StyleView"),b=this;this.values=this._toObject(this.userData.value);this._createEditBox();a?this.fillTemplate():this.loadVE(function(){b.fillTemplate()});this.onReady()}})})},"xcf/views/_MainView":function(){define("xide/types xdocker/Docker2 dcl/dcl xide/utils xide/views/_LayoutMixin xide/views/_MainView xide/_base/_Widget xaction/ActionProvider xfile/Breadcrumb xide/widgets/MainMenu xdocker/types xdocker/Docker2 xdocker/Panel2 xdocker/Frame2 wcDocker/types".split(" "),
function(n,m,k,h,d,b,c,g,p,a){b=k(b,{getNewAlternateTarget:function(){return this.layoutCenter},getNewDefaultTab:function(a){h.mixin(a,{target:this.layoutCenter,location:n.DOCKER.DOCK.STACKED});return this.getDocker().addTab(null,a)},_onResize:function(){this.getDocker().resize()},resize:function(){this.getDocker().resize()},onOpenView:function(a){this.onOpenView2&&this.onOpenView2(a)},startup:function(){function a(){b._resizeToWindow();setTimeout(function(){b.publish(n.EVENTS.RESIZE,{},this)},500)}
var b=this;$(window).resize(function(){return b.debounce("resize",a.bind(b),1E3,null)});setTimeout(function(){a()},5E3);this.subscribe(n.EVENTS.ON_OPEN_VIEW,function(){setTimeout(function(){b._resize()},500)})}});var e=n.ACTION,q=k(null,{}),q=k(q,{getMainMenu:function(){return this.mainMenu},getToolbar:function(){return this.toolbar},getNewAlternateTarget:function(){return this.layoutCenter},getLayoutMain:function(a,b){},getLastTab:function(){var a=this.getDocker().allPanels(),b=this.getLayoutMain();
return _.find(a,function(a){var c=a.option("canAdd");return a!=b&&1==c})},getNewDefaultTab:function(a){h.mixin(a,{target:this.layoutCenter,location:n.DOCKER.DOCK.STACKED});return this.getDocker().addTab(null,a)},createLayout:function(b,c){var d;if(this.hasAction(e.TOOLBAR)||this.hasAction(e.BREADCRUMB)||this.hasAction(e.MAIN_MENU)||this.hasAction(e.RIBBON))d=this.layoutTop=b.addPanel("DefaultFixed",n.DOCKER.DOCK.TOP,null,{h:50,title:!1,canAdd:!1,mixin:{resizeToChildren:!0,_scrollable:{x:!1,y:!1}}}),
this.hasAction(e.MAIN_MENU)&&(this.mainMenu=h.addWidget(a,{style:"height:auto",resizeToParent:!1},this,d,!0),$(this.mainMenu.domNode).css("height:auto")),this.hasAction(e.BREADCRUMB)&&(c=h.addWidget(p,{resizeToParent:!1},null,d,!0),c.resizeToParent=!1,$(c.domNode).css("height:auto"),this.breadcrumb=c);this.layoutLeft=b.addPanel("DefaultTab",n.DOCKER.DOCK.BOTTOM,d,{title:"\x26nbsp;\x26nbsp;",autoHideTabBar:!0,titleStacked:"Navigation"});this.layoutLeft.closeable(!1);this.layoutLeft.resizeToChildren=
!1;this.layoutLeft.getFrame().showTitlebar(!1);b.resize()}});k([c,d.dcl,g.dcl,q],{templateString:'\x3cdiv style\x3d"height: 100%;width: 100%;"\x3e\x3c/div\x3e',permissions:[],getBreadcrumb:function(){return this.breadcrumb},getLayoutMain:function(){return this.layoutLeft},onLastPanelClosed:function(){var a=this.getLayoutMain();a.option("autoHideTabBar")&&(a.title(a.option("title")),a.getFrame().showTitlebar(!1));this.getDocker().resize()},onPanelClosed:function(a){var b=this,c=b.getLayoutMain(),d=
b.getDocker();setTimeout(function(){var a=d.allPanels().filter(function(a){return!1!==a.option("canAdd")});if(1==a.length&&a[0]==c)b.onLastPanelClosed()},1);this.getDocker().resize()},onOpenView:function(a){},startup:function(){var a=m.createDefault(this.domNode);this._docker=a;var b=this;a._on(n.DOCKER.EVENT.CLOSED,function(a){b.onPanelClosed(a)});this.createLayout(a,this.permissions);this.subscribe(n.EVENTS.ON_OPEN_VIEW)}});return b})},"davinci/ve/_ContextMobile":function(){define(["require","dojo/_base/declare",
"../Theme","preview/silhouetteiframe","dojox/html/_base"],function(n,m,k,h){return m(null,{getMobileDevice:function(){var d=this.getDocumentElement().getChildElement("body");if(d){var b=d.getAttribute("data-maq-device"),c=d.getAttribute("data-maqetta-device");!b&&c&&(d.removeAttribute("data-maqetta-device"),d.setAttribute("data-maq-device",c),b=c,this.editor._visualChanged());return b}},setMobileDevice:function(d){this.getGlobal().require("dojo/_base/config").mblUserAgent=h.getMobileTheme(d+".svg");
var b=this.getDocumentElement().getChildElement("body");d&&"none"!=d?b.addAttribute("data-maq-device",d):b.removeAttribute("data-maq-device",d)},setMobileTheme:function(d){(this.getMobileDevice()||"none")!=d&&this.setMobileDevice(d);this.close();try{h.getMobileTheme(d+".svg"),this._configDojoxMobile()}catch(b){}},getMobileOrientation:function(){var d=this.getDocumentElement().getChildElement("body"),b=d.getAttribute("data-maq-orientation"),c=d.getAttribute("data-maqetta-device-orientation");!b&&c&&
(d.removeAttribute("data-maqetta-device-orientation"),d.setAttribute("data-maq-orientation",c),b=c,this.editor._visualChanged());return b},setMobileOrientation:function(d){var b=this.getDocumentElement().getChildElement("body");d?b.setAttribute("data-maq-orientation",d):b.removeAttribute("data-maq-orientation")},_mobileMetaElement:{name:"viewport",content:"width\x3ddevice-width, initial-scale\x3d1.0, user-scalable\x3dno"},setMobileMeta:function(d){"none"===d?this._removeHeadElement("meta",this._mobileMetaElement):
this._addHeadElement("meta",this._mobileMetaElement)},_configDojoxMobile:function(d){try{var b=this.getGlobal().require,c=b("dojox/mobile"),g=b("dojox/mobile/deviceTheme"),h=this.getGlobal().dojo.config,a=this._getDojoJsElem().getAttribute("data-dojo-config"),e=h.mblUserAgent||"none",m,u,w,a=a?n.eval("({ "+a+" })","data-dojo-config"):{};m=a.themeMap;u=a.mblThemeFiles;w=a.mblLoadCompatPattern;delete this.themeCssFiles;delete this.cssFiles;m||(m=k.getDojoxMobileThemeMap(this,dojo.clone(k.dojoMobileDefault)),
u=[],k.getThemeLocation().toString().replace(/\//g,"\\/"),w=RegExp(""));d=!1;k.themeMapsEqual(g.themeMap,m)||(d=!1,g.themeMap=m);u?h.mblThemeFiles=u:delete h.mblThemeFiles;w?(h.mblLoadCompatPattern=w,c.loadCompatPattern=w):(delete h.mblLoadCompatPattern,c.loadCompatPattern=/\/mobile\/themes\/.*\.css$/);if(this._selection)this.onSelectionChange(this._selection);d||g.loadDeviceTheme(e)}catch(r){}}})})},"xtrack/component":function(){define(["dcl/dcl","xide/model/Component","require","dojo/Deferred"],
function(n,m,k,h){return n(m,{beanType:"TRACK",getDependencies:function(){return["xtrack/manager/TrackingManager"]},getLabel:function(){return this.beanType},run:function(d){var b=new h;k(this.getDependencies(),function(c){d.trackingManager=d.createManager(c);d.trackingManager._init().then(function(){b.resolve()})});return b}})})},"xfile/Breadcrumb":function(){define(["dcl/dcl","xide/widgets/TemplatedWidgetBase","xide/model/Path","xide/_base/_Widget"],function(n,m,k,h){return n(h,{templateString:"\x3cul attachTo\x3d'root' style\x3d'-webkit-app-region:drag' class\x3d'breadcrumb'\x3e\x3c/ul\x3e",
grid:null,destroy:function(){this.clear();this.grid=null},setSource:function(d){if(this.grid!=d){this.grid=d;var b=d.collection;this.clear();var c=d.getBreadcrumbPath?d.getBreadcrumbPath():null;!1!==c&&(c?this.setPath(c.root,null,c,null):b&&d.getCurrentFolder&&(d=(d=d.getCurrentFolder())?d.path:"",this.setPath(".",b.getRootItem(),d,b)))}},setPath:function(d,b,c,g,h){this.clear();b&&d&&this.addSegment(d,!0,b);d=(new k(c)).getSegments();var a=h||".";_.each(d,function(b){var c=a+"/"+b;this.addSegment(b,
!0,g?g.getSync(c):null);a=c},this)},onClick:function(d,b,c){this._emit("click",{element:c,event:b,label:d,data:c.data})},addSegment:function(d,b,c){if(c&&this.has(c))return null;var g=this;d=$("\x3cli class\x3d'"+(b?"active":"")+"'\x3e\x3ca href\x3d'#'\x3e"+d+"\x3c/a\x3e\x3c/li\x3e");_.each(this.all(),function(b){b.el.removeClass("active")});$(this.domNode).append(d);c&&(d.on("click",function(b){g.grid&&g.grid.openFolder(c)}),d[0].data=c);return d},pop:function(){this.last().remove()},last:function(){return $(this.root).children().last()},
has:function(d){for(var b=this.all(),c=0;c<b.length;c++)if(b[c].data.path===d.path)return!0;return!1},all:function(){var d=[];_.each(this.$root.children(),function(b){d.push({el:$(b),label:b.outerText,data:b.data})});return d},clear:function(){for(var d=this.all();d.length;){var b=d[d.length-1];b.el.remove();b.data=null;d.remove(b)}},unwind:function(d){var b=this.all().reverse();_.each(b,function(b){b.data&&b.data.path!==(d&&d.path)&&"."!==b.data.path&&this.pop()},this)},startup:function(){this._on("click",
function(d){d=d.element[0].data;var b=this.grid;d&&(this.unwind(d),b&&b.openFolder(d))}.bind(this))}})})},"dojo/text":function(){define(["./_base/kernel","require","./has","./request"],function(n,m,k,h){var d;d=function(a,b,c){h(a,{sync:!!b,headers:{"X-Requested-With":null}}).then(c)};var b={},c=function(a){if(a){a=a.replace(/^\s*<\?xml(\s)+version=[\'\"](\d)*.(\d)*[\'\"](\s)*\?>/im,"");var b=a.match(/<body[^>]*>\s*([\s\S]+)\s*<\/body>/im);b&&(a=b[1])}else a="";return a},g={},p={};n.cache=function(a,
e,g){var h;"string"==typeof a?/\//.test(a)?(h=a,g=e):h=m.toUrl(a.replace(/\./g,"/")+(e?"/"+e:"")):(h=a+"",g=e);a=void 0!=g&&"string"!=typeof g?g.value:g;g=g&&g.sanitize;if("string"==typeof a)return b[h]=a,g?c(a):a;if(null===a)return delete b[h],null;h in b||d(h,!0,function(a){b[h]=a});return g?c(b[h]):b[h]};return{dynamic:!0,normalize:function(a,b){a=a.split("!");var c=a[0];return(/^\./.test(c)?b(c):c)+(a[1]?"!"+a[1]:"")},load:function(a,e,h){a=a.split("!");var k=1<a.length,m=a[0],q=e.toUrl(a[0]);
a="url:"+q;var n=g,x=function(a){h(k?c(a):a)};m in b?n=b[m]:e.cache&&a in e.cache?n=e.cache[a]:q in b?n=b[q]:e.cache&&a.replace("src/lib","src")in e.cache?n=e.cache[a.replace("src/lib","src")]:e.cache&&a.replace("src/build","src")in e.cache&&(n=e.cache[a.replace("src/build","src")]);if(n===g)if(p[q])p[q].push(x);else{var A=p[q]=[x];d(q,!e.async,function(a){b[m]=b[q]=a;for(var c=0;c<A.length;)A[c++](a);delete p[q]})}else x(n)}}})},"davinci/ui/widgets/ThemeSetSelection":function(){define("dojo/_base/declare dijit/_WidgetBase dijit/_TemplatedMixin dijit/_WidgetsInTemplateMixin davinci/library system/resource davinci/workbench/Preferences davinci/Runtime davinci/Workbench davinci/ve/commands/ChangeThemeCommand davinci/ui/Dialog davinci/lang/ui dijit/lang/_common dijit/form/Button dijit/form/Select davinci/Theme dojo/text!./templates/ThemeSetSelection.html".split(" "),
function(n,m,k,h,d,b,c,g,p,a,e,q,u,w,r,v,x){n("davinci.ui.widgets.ThemeSetSelectionWidget",[m,k,h],{templateString:x,widgetsInTemplate:!0,uiNLS:q,commonNLS:u});return n("davinci.ui.widgets.ThemeSetSelection",null,{workspaceOnly:!1,_connections:[],_selectedThemeSet:null,constructor:function(a){dojo.safeMixin(this,a)},buildRendering:function(){this._dialog=new e({title:q.selectTheme,contentStyle:{width:372}});dojo.connect(this._dialog,"onCancel",this,"onClose");var a=null;this.newFile||(a=p.getOpenEditor().getContext());
(a=v.getThemeSet(a))||(a=v.dojoThemeSets.themeSets[0]);this._selectedThemeSet=a;this._dialog.attr("content",new davinci.ui.widgets.ThemeSetSelectionWidget({}));this._connections.push(dojo.connect(dijit.byId("theme_select_themeset_theme_select"),"onChange",this,"onChange"));this._connections.push(dojo.connect(dijit.byId("theme_select_desktop_theme_select"),"onChange",this,"onDesktopChange"));this._connections.push(dojo.connect(dijit.byId("theme_select_mobile_theme_select"),"onChange",this,"onMobileChange"));
this._connections.push(dojo.connect(this._dialog,"onExecute",this,"onOk"));this._connections.push(dojo.connect(dijit.byId("theme_select_cancel_button"),"onClick",this,"onClose"));this._connections.push(dojo.connect(dijit.byId("theme_select_android_select"),"onChange",this,"onAndroidThemeChange"));this._connections.push(dojo.connect(dijit.byId("theme_select_blackberry_select"),"onChange",this,"onBlackberryThemeChange"));this._connections.push(dojo.connect(dijit.byId("theme_select_ipad_select"),"onChange",
this,"oniPadThemeChange"));this._connections.push(dojo.connect(dijit.byId("theme_select_iphone_select"),"onChange",this,"oniPhoneThemeChange"));this._connections.push(dojo.connect(dijit.byId("theme_select_other_select"),"onChange",this,"onOtherThemeChange"));this.addThemeSets();dijit.byId("theme_select_themeset_theme_select").attr("value",a.name);this._dialog.show()},addThemeSets:function(){this._dojoThemeSets=v.getThemeSets(p.getProject());this._dojoThemeSets||(this._dojoThemeSets=v.dojoThemeSets);
this._dojoThemeSets=dojo.clone(this._dojoThemeSets);this._selectedThemeSet.name==v.none_themeset_name?this._dojoThemeSets.themeSets.unshift(this._selectedThemeSet):this._dojoThemeSets.themeSets.unshift(v.none_themeset);for(var a=dijit.byId("theme_select_themeset_theme_select"),b=0;b<this._dojoThemeSets.themeSets.length;b++)opt={value:this._dojoThemeSets.themeSets[b].name,label:this._dojoThemeSets.themeSets[b].name},a.addOption(opt)},addThemes:function(a){this._themeData=d.getThemes(p.getProject(),
this.workspaceOnly);var b=dijit.byId("theme_select_desktop_theme_select");b.options=[];var c=dijit.byId("theme_select_android_select");c.options=[];var e=dijit.byId("theme_select_blackberry_select");e.options=[];var g=dijit.byId("theme_select_ipad_select");g.options=[];var h=dijit.byId("theme_select_iphone_select");h.options=[];var k=dijit.byId("theme_select_other_select");k.options=[];var m=dijit.byId("theme_select_mobile_theme_select");b.options=[];m.options=[];m.addOption({value:v.default_theme,
label:v.default_theme});this._themeCount=this._themeData.length;for(var q=0;q<this._themeData.length;q++){var n={value:this._themeData[q].name,label:this._themeData[q].name};"dojox.mobile"===this._themeData[q].type?(m.addOption(n),c.addOption(n),e.addOption(n),g.addOption(n),h.addOption(n),k.addOption(n)):b.addOption(n)}b.attr("value",a.desktopTheme);for(b=0;b<a.mobileTheme.length;b++)switch(a.mobileTheme[b].device.toLowerCase()){case "android":c.attr("value",a.mobileTheme[b].theme);break;case "blackberry":e.attr("value",
a.mobileTheme[b].theme);break;case "ipad":g.attr("value",a.mobileTheme[b].theme);break;case "iphone":h.attr("value",a.mobileTheme[b].theme);break;case "other":k.attr("value",a.mobileTheme[b].theme)}v.singleMobileTheme(a)?m.attr("value",a.mobileTheme[a.mobileTheme.length-1].theme):m.attr("value",v.default_theme)},onChange:function(a){for(var b=0;b<this._dojoThemeSets.themeSets.length;b++)if(this._dojoThemeSets.themeSets[b].name==a){this.addThemes(this._dojoThemeSets.themeSets[b]);this._selectedThemeSet=
this._dojoThemeSets.themeSets[b];break}var b=dijit.byId("theme_select_mobile_theme_select"),c=dijit.byId("theme_select_desktop_theme_select"),d=dijit.byId("theme_select_android_select"),e=dijit.byId("theme_select_blackberry_select"),g=dijit.byId("theme_select_ipad_select"),h=dijit.byId("theme_select_iphone_select"),k=dijit.byId("theme_select_other_select");a===v.none_themeset_name?(b.set("disabled",!1),c.set("disabled",!1),d.set("disabled",!1),e.set("disabled",!1),g.set("disabled",!1),h.set("disabled",
!1),k.set("disabled",!1)):(b.set("disabled",!0),c.set("disabled",!0),d.set("disabled",!0),e.set("disabled",!0),g.set("disabled",!0),h.set("disabled",!0),k.set("disabled",!0))},onDesktopChange:function(a){this._selectedThemeSet.desktopTheme=a},onDeviceThemeChange:function(a,b){for(var c=0;c<this._selectedThemeSet.mobileTheme.length;c++)if(this._selectedThemeSet.mobileTheme[c].device.toLowerCase()===a.toLowerCase()){this._selectedThemeSet.mobileTheme[c].theme=b;break}},onAndroidThemeChange:function(a){this.onDeviceThemeChange("android",
a)},onBlackberryThemeChange:function(a){this.onDeviceThemeChange("blackberry",a)},oniPadThemeChange:function(a){this.onDeviceThemeChange("ipad",a)},oniPhoneThemeChange:function(a){this.onDeviceThemeChange("iphone",a)},onOtherThemeChange:function(a){this.onDeviceThemeChange("other",a)},onMobileChange:function(a){if(this._selectedThemeSet.name==v.none_themeset_name){var b=dijit.byId("theme_select_android_select"),c=dijit.byId("theme_select_blackberry_select"),d=dijit.byId("theme_select_ipad_select"),
e=dijit.byId("theme_select_iphone_select"),g=dijit.byId("theme_select_other_select");if("(device-specific)"===a&&this._selectedThemeSet.name===v.none_themeset_name)b.set("disabled",!1),c.set("disabled",!1),d.set("disabled",!1),e.set("disabled",!1),g.set("disabled",!1);else for(var h=0;h<this._selectedThemeSet.mobileTheme.length;h++){var k=this._selectedThemeSet.mobileTheme[h].device.toLowerCase();this._selectedThemeSet.mobileTheme[h].theme=a;switch(k){case "android":b.attr("value",a);b.set("disabled",
!0);break;case "blackberry":c.attr("value",a);c.set("disabled",!0);break;case "ipad":d.attr("value",a);d.set("disabled",!0);break;case "iphone":e.attr("value",a);e.set("disabled",!0);break;case "other":g.attr("value",a),g.set("disabled",!0)}}}},updateDeviceThemes:function(){for(var a=0;a<this._selectedThemeSet.mobileTheme.length;a++){var b;switch(this._selectedThemeSet.mobileTheme[a].device.toLowerCase()){case "android":b=dijit.byId("theme_select_android_select");break;case "blackberry":b=dijit.byId("theme_select_blackberry_select");
break;case "ipad":b=dijit.byId("theme_select_ipad_select");break;case "iphone":b=dijit.byId("theme_select_iphone_select");break;default:b=dijit.byId("theme_select_other_select")}this._selectedThemeSet.mobileTheme[a].theme=b.attr("value")}},_changeTheme:function(){debugger;var b=p.getOpenEditor();b&&b.getContext&&b.getContext().getCommandStack().execute(new a(newTheme,b.getContext()))},_onChange:function(){var a=this._getValueAttr();if(null!=a&&!this._blockChange){this.value=a;this._cookieName="maqetta_"+
a.name+"_"+a.version;var b=dojo.cookie(this._cookieName);if(this.dojoVersion&&a.version!==this.dojoVersion&&!b)this._warnDiv.innerHTML="\x3ctable\x3e\x3ctr\x3e\x3ctd\x3e\x3c/td\x3e\x3ctd\x3e"+q.themeVersionMessage+'\x3c/td\x3e\x3ctd\x3e\x3c/td\x3e\x3c/tr\x3e\x3ctr\x3e\x3ctd\x3e\x3c/td\x3e\x3ctd align\x3d"center"\x3e\x3cbutton data-dojo-type\x3d"dijit.form.Button" type\x3d"button" id\x3d"davinci.ui.widgets.ThemeSelection.ok"\x3e'+u.buttonOk+'\x3c/button\x3e\x3cbutton data-dojo-type\x3d"dijit.form.Button" type\x3d"button" id\x3d"davinci.ui.widgets.ThemeSelection.cancel"\x3e'+
u.buttonCancel+"\x3c/button\x3e\x3c/td\x3e\x3ctd\x3e\x3c/td\x3e\x3c/tr\x3e\x3c/table\x3e",a=dijit.byId("davinci.ui.widgets.ThemeSelection.ok"),b=dijit.byId("davinci.ui.widgets.ThemeSelection.cancel"),dojo.connect(a,"onClick",this,"_warnOk"),dojo.connect(b,"onClick",this,"_warnCancel");else this.onChange()}},_warnOk:function(){dojo.cookie(this._cookieName,"true");this._destroy();this.onChange()},_warnCancel:function(){this._destroy();this.onClose()},_destroy:function(){var a=dijit.byId("davinci.ui.widgets.ThemeSelection.ok");
dojo.disconnect(a);a.destroy();a=dijit.byId("davinci.ui.widgets.ThemeSelection.cancel");dojo.disconnect(a);a.destroy()},onOk:function(b){this.onClose(b);this.newFile||(b=p.getOpenEditor())&&b.getContext&&b.getContext().getCommandStack().execute(new a(this._selectedThemeSet,b.getContext()))},onClose:function(a){for(;connection=this._connections.pop();)dojo.disconnect(connection);this._dialog.destroyRecursive();delete this._dialog},_getTemplate:function(){return'\x3ctable style\x3d"width: 100%; margin-left:10px; margin-right:10px;"\x3e\x3ctr\x3e\x3ctd style\x3d"width: 18%;"\x3e'+
q.themeSet+'\x3c/td\x3e\x3ctd style\x3d"text-align: center;"\x3e\x3cselect dojoType\x3d"dijit.form.Select" id\x3d"theme_select_themeset_theme_select" type\x3d"text" style\x3d"width: 175px;" \x3e\x3c/select\x3e\x3c/td\x3e\x3c/tr\x3e\x3c/table\x3e\x3cdiv style\x3d"border-top: 1px solid black; top: 231px; border-top-color: #ccc; left: 429px; width: 300px; height: 11px; margin-top: 6px; margin-left:10px;"\x3e\x3c/div\x3e\x3ctable style\x3d"margin-left: 15px; width: 100%;"\x3e\x3ctr\x3e\x3ctd\x3e'+q.desktopTheme+
'\x3c/td\x3e\x3ctd\x3e\x3cselect dojoType\x3d"dijit.form.Select" id\x3d"theme_select_desktop_theme_select"type\x3d"text"  style\x3d"width: 175px;"  \x3e\x3c/select\x3e\x3c/td\x3e\x3c/tr\x3e\x3ctr\x3e\x3ctd\x3e'+q.mobileTheme+'\x3c/td\x3e\x3ctd\x3e\x3cselect dojoType\x3d"dijit.form.Select" id\x3d"theme_select_mobile_theme_select"type\x3d"text"  style\x3d"width: 175px;" \x3e\x3c/select\x3e\x3c/td\x3e\x3c/tr\x3e\x3c/table\x3e\x3ctable id\x3d"theme_select_devices_table" style\x3d"margin-left:30px; border-collapse: separate; border-spacing: 0 0; width: 100%"\x3e\x3ctr\x3e\x3ctd style\x3d"width: 139px;"\x3e'+
q.android+'\x3c/td\x3e\x3ctd\x3e\x3cselect dojoType\x3d"dijit.form.Select" id\x3d"theme_select_android_select" type\x3d"text"  style\x3d"width: 150px;"\x3e\x3c/select\x3e\x3c/td\x3e\x3c/tr\x3e\x3ctr\x3e\x3ctd\x3e'+q.blackberry+'\x3c/td\x3e\x3ctd\x3e\x3cselect dojoType\x3d"dijit.form.Select" id\x3d"theme_select_blackberry_select" type\x3d"text"  style\x3d"width: 150px;"\x3e\x3c/select\x3e\x3c/td\x3e\x3c/tr\x3e\x3ctr\x3e\x3ctd\x3e'+q.ipad+'\x3c/td\x3e\x3ctd\x3e\x3cselect dojoType\x3d"dijit.form.Select" id\x3d"theme_select_ipad_select" type\x3d"text"  style\x3d"width: 150px;"\x3e\x3c/select\x3e\x3c/td\x3e\x3c/tr\x3e\x3ctr\x3e\x3ctd\x3e'+
q.iphone+'\x3c/td\x3e\x3ctd\x3e\x3cselect dojoType\x3d"dijit.form.Select" id\x3d"theme_select_iphone_select" type\x3d"text"  style\x3d"width: 150px;"\x3e\x3c/select\x3e\x3c/td\x3e\x3c/tr\x3e\x3ctr\x3e\x3ctd\x3e'+q.other+'\x3c/td\x3e\x3ctd\x3e\x3cselect dojoType\x3d"dijit.form.Select" id\x3d"theme_select_other_select" type\x3d"text"  style\x3d"width: 150px;"\x3e\x3c/select\x3e\x3c/td\x3e\x3c/tr\x3e\x3c/table\x3e\x3ctable style\x3d"width:100%; margin-top: 10px;"\x3e\x3ctr\x3e\x3ctd style\x3d"text-align:right; width:80%;"\x3e\x3cinput type\x3d"button" dojoType\x3d"dijit.form.Button" id\x3d"theme_select_ok_button" label\x3d"'+
u.buttonOk+'"\x3e\x3c/input\x3e\x3c/td\x3e\x3ctd\x3e\x3cinput type\x3d"button" dojoType\x3d"dijit.form.Button" id\x3d"theme_select_cancel_button" label\x3d"'+u.buttonCancel+'"\x3e\x3c/input\x3e\x3c/td\x3e\x3c/tr\x3e\x3c/table\x3e'}})})},"dojo/dom-class":function(){define(["./_base/lang","./_base/array","./dom"],function(n,m,k){function h(d){if("string"==typeof d||d instanceof String){if(d&&!b.test(d))return c[0]=d,c;d=d.split(b);d.length&&!d[0]&&d.shift();d.length&&!d[d.length-1]&&d.pop();return d}return d?
m.filter(d,function(a){return a}):[]}var d,b=/\s+/,c=[""],g={};return d={contains:function(b,a){return 0<=(" "+k.byId(b).className+" ").indexOf(" "+a+" ")},add:function(b,a){if(b){b=k.byId(b);a=h(a);var c=b.className,d,c=c?" "+c+" ":" ";d=c.length;for(var g=0,p=a.length,m;g<p;++g)(m=a[g])&&0>c.indexOf(" "+m+" ")&&(c+=m+" ");d<c.length&&(b.className=c.substr(1,c.length-2))}},remove:function(b,a){if(b=k.byId(b)){var c;if(void 0!==a){a=h(a);c=" "+b.className+" ";for(var d=0,g=a.length;d<g;++d)c=c.replace(" "+
a[d]+" "," ");c=n.trim(c)}else c="";b.className!=c&&(b.className=c)}else console.error("dom class remove failed")},replace:function(b,a,c){b=k.byId(b);g.className=b.className;d.remove(g,c);d.add(g,a);b.className!==g.className&&(b.className=g.className)},toggle:function(b,a,c){b=k.byId(b);if(void 0===c){a=h(a);for(var e=0,g=a.length,p;e<g;++e)p=a[e],d[d.contains(b,p)?"remove":"add"](b,p)}else d[c?"add":"remove"](b,a);return c}}})},"xide/views/_Panel":function(){define("dcl/dcl xide/types xide/utils xide/mixins/EventedMixin xide/widgets/_Widget dojo/Deferred xide/_Popup xide/registry".split(" "),
function(n,m,k,h,d,b,c,g){m=n([d.dcl,h.dcl],{containerClass:"",type:m.DIALOG_TYPE.WARNING,size:m.DIALOG_SIZE.SIZE_WIDE,titleBarClass:"",panel:null,bodyCSS:null,startDfd:null,_ready:!1,title:"No Title",options:null,getContentSize:function(){return{width:"600px",height:"500px"}},getDefaultOptions:function(b){var a=this,c={contentSize:this.getContentSize(),footerToolbar:[{item:"\x3cbutton style\x3d'margin-left:5px;' type\x3d'button'\x3e\x3cspan class\x3d'...'\x3e\x3c/span\x3e\x3c/button\x3e",event:"click",
btnclass:"btn btn-danger btn-sm",btntext:" Cancel",callback:function(b){b.data.close();a.onCancel()}},{item:"\x3cbutton style\x3d'margin-left:5px;' type\x3d'button'\x3e\x3cspan class\x3d'...'\x3e\x3c/span\x3e\x3c/button\x3e",event:"click",btnclass:"btn btn-primary btn-sm",btntext:" Ok",callback:function(b){a.onOk();b.data.close()}}]};k.mixin(c,b);return c},getInstance:function(b){if(this.panel)return this.panel;c.nextZ(3);var a=this;this.panel=$.jsPanel(k.mixin({zi:c.nextZ(),position:{left:200,top:100},
title:a.title||"jsPanel theme info",theme:a.theme||"bootstrap-default",onmaximized:function(){a.resize()},onnormalized:function(){a.resize()},onbeforeclose:function(){a.destroy(!1)},callback:function(b){a.domNode=this.content[0];var d=this;a.onshown(this,this.content[0]).then(function(){d.content.addClass(a.containerClass);d.content.css("tabIndex",1);d.header.addClass(a.type);d.footer.addClass("modal-footer");var e=c.nextZ();b.css("z-index",e);b.attr("tabIndex",1);b.keyup(function(b){27===b.which&&
a.destroy(!0)});b.focus()})}},b));this.panel.on("resize",function(){a.resize()});return this.panel},onshown:function(c,a){var d=this,g=new b;if(this.onShow){var h=function(a){d.startDfd.resolve(a);d._ready=!0;d.resize();g.resolve(a)};(c=this.onShow(c,a,this))&&c.then?c.then(h):_.isArray(c)?(_.each(c,function(a){d.add(a,null,!1)}),h(c)):c||h()}return g},onReady:function(){var b=this;setTimeout(function(){b._ready=!0},100)},destroy:function(b){try{!1!==b&&this.panel&&this.panel.close(),g.remove(this.panel.id),
this.headDfd&&this.headDfd.resolve(!1)}catch(a){logError(a,"panel close")}},show:function(c){var a=this;this.headDfd=new b;this.startDfd||(this.startDfd=new b,this.startDfd.then(function(){a.onReady()}));this.panel=this.getInstance(c||this.options);return this.headDfd},constructor:function(b){b=b||{};this.options=b.options||this.options||this.getDefaultOptions();k.mixin(this,b)},onOk:function(){this.headDfd.resolve(!0)},onCancel:function(){this.headDfd.resolve(!1)}});n.chainAfter(m,"onReady");n.chainAfter(m,
"onOk");n.chainAfter(m,"onCancel");n.chainAfter(m,"resize");return m})},"xide/manager/NotificationManager":function(){define(["dcl/dcl","xide/types","xide/utils","xide/manager/ManagerBase","xide/encoding/MD5"],function(n,m,k,h,d){return n([h],{declaredClass:"xide.manager.NotificationManager",onError:function(b){var c="";b&&b&&b.error&&b.error.message?c=b.error.message:b&&_.isString(b)?c=b:b&&_.isString(b.message)&&(c=b.message);var d={message:c,type:"error",duration:500,showCloseButton:!0};-1!==c.indexOf("Stack trace")&&
(d.message=c.substr(0,c.indexOf("Stack trace")),d.duration=4E3);b.messageArgs&&k.mixin(d,b.messageArgs);this.postMessage(d)},_lastMessageTime:null,_lastMessageHash:null,onStatus:function(b){var c="";null==b.did&&(b.did=!0,b&&b&&b.message?c=b.message:b&&_.isString(b)&&(c=b),"Ok!"!=c&&(c={message:c,type:"success",duration:500,showCloseButton:!0},k.mixin(c,b.messageArgs),this.postMessage(c)))},postMessage:function(b){var c=d(JSON.stringify(b),1),g=this;if(this._lastMessageHash===c)setTimeout(function(){g._lastMessageHash=
null},2E3);else return this._lastMessageHash=c,this._lastMessageTime&&clearTimeout(this._lastMessageTime),this._lastMessageTime||(this._lastMessageTime=setTimeout(function(){g._lastMessageHash=null;delete g._lastMessageTime;g._lastMessageTime=null},1E3)),Messenger().post(b)},init:function(){$.globalMessenger&&"undefined"!==typeof Messenger?(this.subscribe(m.EVENTS.STATUS,this.onStatus),this.subscribe(m.EVENTS.ERROR,this.onError),$.globalMessenger({theme:"flat",extraClasses:"messenger-fixed messenger-on-bottom messenger-on-right"}),
Messenger.options={theme:"flat",extraClasses:"messenger-fixed messenger-on-bottom messenger-on-right"}):this.postMessage=function(){}}})})},"xide/widgets/_Search":function(){define(["xdojo/declare","dojo/dom-construct","dojo/on"],function(n,m,k){return n("xide/_Search",null,{_searchBoxHTML:'\x3cdiv class\x3d"widget form-group grid_search right "\x3e\x3cbutton type\x3d"button" action\x3d"hide" class\x3d"grid_searchbtn_close"\x3e\x3c/button\x3e\x3cdiv class\x3d"grid_search_form"\x3e\x3cinput class\x3d"form-control input-transparent grid_search_field" placeholder\x3d"Search for" spellcheck\x3d"false"\x3e\x3c/input\x3e\x3cbutton type\x3d"button input-group-addon" action\x3d"findNext" class\x3d"grid_searchbtn next"\x3e\x3c/button\x3e\x3cbutton type\x3d"button" action\x3d"findPrev" class\x3d"grid_searchbtn prev"\x3e\x3c/button\x3e\x3cbutton type\x3d"button" action\x3d"findAll" class\x3d"grid_searchbtn" title\x3d"Alt-Enter"\x3eAll\x3c/button\x3e\x3c/div\x3e \x3cdiv class\x3d"ace_replace_form"\x3e\x3cinput class\x3d"grid_search_field" placeholder\x3d"Replace with" spellcheck\x3d"false"/\x3e\x3cbutton type\x3d"button" action\x3d"replaceAndFindNext" class\x3d"ace_replacebtn"\x3eReplace\x3c/button\x3e\x3cbutton type\x3d"button" action\x3d"replaceAll" class\x3d"ace_replacebtn"\x3eAll\x3c/button\x3e\x3c/div\x3e\x3cdiv class\x3d"grid_search_options"\x3e\x3cspan action\x3d"toggleRegexpMode" class\x3d"ace_button" title\x3d"RegExp Search"\x3e.*\x3c/span\x3e\x3cspan action\x3d"toggleCaseSensitive" class\x3d"ace_button" title\x3d"CaseSensitive Search"\x3eAa\x3c/span\x3e\x3cspan action\x3d"toggleWholeWords" class\x3d"ace_button" title\x3d"Whole Word Search"\x3e\\b\x3c/span\x3e\x3c/div\x3e'+
"\x3c/div\x3e".replace(/>\s+/g,"\x3e"),isHidden:function(){return!$(this.element).is(":visible")},showSearchBox:function(h){var d=m.create("div");d.innerHTML=this._searchBoxHTML;this.element=d.firstChild;h.appendChild(d);this.init()},highlight:function(h){},find:function(h,d){},findNext:function(){this.find(!0,!1)},findPrev:function(){this.find(!0,!0)},findAll:function(){},replace:function(){},replaceAndFindNext:function(){},replaceAll:function(){},hide:function(){this.element.style.display="none"},
show:function(h,d){this.element.style.display="";this.replaceBox.style.display=d?"":"none";this.isReplace=d;h&&(this.searchInput.value=h);this.searchInput.focus();this.searchInput.select()},isFocused:function(){var h=document.activeElement;return h==this.searchInput||h==this.replaceInput},initElements:function(h){this.searchBox=h.querySelector(".grid_search_form");this.replaceBox=h.querySelector(".ace_replace_form");this.searchOptions=h.querySelector(".grid_search_options");this.regExpOption=h.querySelector("[action\x3dtoggleRegexpMode]");
this.caseSensitiveOption=h.querySelector("[action\x3dtoggleCaseSensitive]");this.wholeWordOption=h.querySelector("[action\x3dtoggleWholeWords]");this.searchInput=this.searchBox.querySelector(".grid_search_field");this.replaceInput=this.replaceBox.querySelector(".grid_search_field")},init:function(){var h=this.element;this.initElements(h);var d=this;k(h,"mousedown",function(b){setTimeout(function(){d.activeInput.focus()},0);event.stopPropagation(b)});this.$onChange=function(b,c){var d=null,h=function(){d=
null;b()},a=function(a){null==d&&(d=setTimeout(h,a||c))};a.delay=function(a){d&&clearTimeout(d);d=setTimeout(h,a||c)};a.schedule=a;a.call=function(){this.cancel();b()};a.cancel=function(){d&&clearTimeout(d);d=null};a.isPending=function(){return d};return a}(function(){d.find(!1,!1)});k(this.searchInput,"input",function(){d.$onChange.schedule(20)});k(this.searchInput,"focus",function(){d.activeInput=d.searchInput;d.searchInput.value&&d.highlight()});k(this.replaceInput,"focus",function(){d.activeInput=
d.replaceInput;d.searchInput.value&&d.highlight()})}})})},"xblox/model/html/SetStyle":function(){define("dcl/dcl xblox/model/Block xide/utils xide/types xide/mixins/EventedMixin xblox/model/Referenced dojo/dom-attr dojo/dom-style dojo/_base/Color xide/registry".split(" "),function(n,m,k,h,d,b,c,g,p,a){d={declaredClass:"xblox.model.html.SetStyle",name:"Set Style",reference:"",references:null,description:"Sets HTML Node Style Attribute",value:"",mode:1,sharable:!0,solve:function(a,b){a=this.value;b=
b||{};var c=b.override||this.override||{};c.variables&&(a=k.replace(a,null,c.variables,{begin:"{",end:"}"}));c.args&&null!==c.args[0]&&(a=k.replace(a,null,{value:c.args[0]},{begin:"{",end:"}"}));this.updateObjects(null,a,this.mode,b);this.onSuccess(this,b);this.onDidRun()},toText:function(){var a=this.deserialize(this.reference),a=this.getBlockIcon()+" "+this.name+" :: on "+a.reference+" to"||"  to ";this.value&&(a+=" "+this.value);return a},getFields:function(){var a=this.inherited(arguments)||this.getDefaultFields();
a.push(k.createCI("Value",h.ECIType.DOM_PROPERTIES,this.value,{group:"General",dst:"value",value:this.value,intermediateChanges:!1}));a.push(k.createCI("Mode",h.ECIType.ENUMERATION,this.mode,{group:"General",options:[k.createOption("Set",1),k.createOption("Add",2),k.createOption("Remove",3),k.createOption("Increase",4),k.createOption("Decrease",5)],dst:"mode"}));var b={group:"General",dst:"reference",value:this.reference};this.scope&&(this.scope.global&&(b.window=this.scope.global,b.allowHTMLNodes=
!0,b.allowWidgets=!1),this.scope.document&&(b.document=this.scope.document));a.push(k.createCI("Target",h.ECIType.WIDGET_REFERENCE,this.reference,b));return a},getBlockIcon:function(){return'\x3cspan class\x3d"fa-paint-brush"\x3e\x3c/span\x3e'},updateEventSelector:function(a,b){var c=[];if(a&&a.length)for(c=[{label:"onclick",value:"onclick"},{label:"ondblclick",value:"ondblclick"},{label:"onmousedown",value:"onmousedown"},{label:"onmouseup",value:"onmouseup"},{label:"onmouseover",value:"onmouseover"},
{label:"onmousemove",value:"onmousemove"},{label:"onmouseout",value:"onmouseout"},{label:"onkeypress",value:"onkeypress"},{label:"onkeydown",value:"onkeydown"},{label:"onkeyup",value:"onkeyup"},{label:"onfocus",value:"onfocus"},{label:"onblur",value:"onblur"},{label:"onchange",value:"onchange"}],a=0;a<c.length;a++){var d=c[a];if(d.value===this.event){d.selected=!0;break}}else c=this.scope.getEventsAsOptions(this.event);for(a=0;a<b.length;a++)if(d=b[a],d.widget&&"Event"===d.widget.title){b=d._widget;
b.nativeWidget.set("options",c);b.nativeWidget.reset();b.nativeWidget.set("value",this.event);this.publish(h.EVENTS.RESIZE,{});break}},onReferenceChanged:function(a,b,c){this.reference=a;this.references=this.resolveReference(this.deserialize(a),c);this.updateObjects(this.references,this.value,null,c)},getPropValue:function(a,b){for(var c in a)if(c===b)return a[c];return null},_getStyle:function(a,b,c){switch(a){case "height":return c.outerHeight();case "width":return c.outerWidth();case "color":return c.css("color");
case "border-color":return c.css("border-color")||"rgba(0,0,0,0)"}return null},updateObject:function(b,d,h,m){if(!b)return!1;h=h||1;(m=b.id?a.byId(b.id):null)&&(b=m);null!=b.domNode&&(b=b.domNode);m=c.get(b,"style");";"===m&&(m="");""===m&&(m=null!=b.lastStyle?b.lastStyle:d);";"===m&&(m=d);switch(h){case 1:var e=this._toObject(m);d=d.split(";");for(m=0;m<d.length;m++)h=d[m].split(":"),2==h.length&&(e[h[0]]=h[1]);m=[];for(var q in e)m.push(q+":"+e[q]);$(b).attr("style",m.join(";"));break;case 2:d=
_.uniq((m+";"+d).split(";")).join(";");c.set(b,"style",d);break;case 3:c.set(b,"style",k.replaceAll(d,"",m));break;case 4:case 5:q=new RegExp(/(\D*)(-?)(\d+)(\D*)/);h=this._toObject(d);var n={},u=$(b);if(h)for(e in h)m=this._getStyle(e,b,u),n[e]=m;u={};for(e in h){var w=""+e.trim();if(null!=n[w]){var y=h[e],B=n[e],C=-1!=y.indexOf("#"),E=-1!=y.indexOf("rgb"),F=-1!=y.indexOf("rgba");if(C||E||F){var G=dojo.colorFromString(y);dojo.colorFromString(y);var D=dojo.colorFromString(B),H=new p;_.each(["r","g",
"b","a"],function(a){H[a]=Math.min(D[a]+G[a],"a"==a?1:255)});w="";C?w=H.toHex():E?w=H.toCss(!1):F&&(w=H.toCss(!0));u[e]=w;g.set(b,e,w)}else(C=q.exec(n[w]))&&3<=C.length&&parseInt(C[3])}}m=this._toObject(m);this._toObject(d);if(!m)return!1;for(e in m)w=""+e.trim();this._toStyleString(u)}},onDomStyleChanged:function(a,b,c,d){if(a=a||this.resolveReference(this.deserialize(this.reference),d))for(var e=0;e<a.length;e++){var g=a[e];g&&g.id&&-1!=g.id.indexOf("davinci")||this.updateObject(g,b,c,d)}},updateObjects:function(a,
b,c,d){a=a||this.resolveReference(this.deserialize(this.reference),d);this.onDomStyleChanged(a,b,c,d)},onChangeField:function(a,b,c){this._destroy();"mode"==a&&b!==this.mode&&(this.mode=b);"value"==a&&b!==this.value&&(this.onDomStyleChanged(null,b,this.mode),this.value=b);if("reference"==a)this.onReferenceChanged(b,c);this.inherited(arguments)},activate:function(){this._destroy()},deactivate:function(){this._destroy()},_destroy:function(){},_changeValue:function(a,b){if(!a)return"";a=a.split(" ");
for(var c="",d=0;d<a.length;d++){0<d&&(c+=" ");var e=a[d].match(/([-\d\.]+)([a-zA-Z%]*)/);if(e)if(1==e.length)c+=e[0];else for(var g=1;g<e.length;g++)c=isNaN(e[g])||""==e[g]?c+e[g]:c+(parseFloat(e[g])+b);else c+=a[d]}return c},_toObject:function(a){if(!a)return{};var b={};a=a.split(";");for(var c=0;c<a.length;c++){var d=a[c];if(d&&0!=d.length&&d.split){var e=d.split(":");e&&e.length&&(e=d.substring(0,d.indexOf(":")),d=d.substring(d.indexOf(":")+1,d.length),b[e]=d)}}return b},_toStyleString:function(a){var b=
[],c;for(c in a)b.push(c+":"+a[c]);return b.join(";")+";"}};n=n([m,b.dcl],d);n.Impl=d;return n})},"xcf/manager/ProtocolManager":function(){define("dcl/dcl dojo/_base/declare xide/manager/ServerActionBase xide/types xide/utils xide/factory xaction/Action xcf/manager/BeanManager".split(" "),function(n,m,k,h,d,b,c,g,p,a,e,q,u,w){return n([k,g],{declaredClass:"xcf.manager.ProtocolManager",beanNamespace:"protocol",beanName:"Protocol",beanIconClass:"fa-code",groupType:h.ITEM_TYPE.PROTOCOL_GROUP,itemType:h.ITEM_TYPE.PROTOCOL,
itemMetaPath:"user.meta",itemMetaStorePath:"/meta/inputs",itemMetaTitleField:h.PROTOCOL_PROPERTY.CF_PROTOCOL_TITLE,systemScope:"system_protocols",userScope:"user_protocols",appScope:"app_protocols",defaultScope:"system_protocols",serviceClass:"XCF_Protocol_Service",rawData:null,store:null,treeView:null,protocolScopes:null,getItemActions:function(){var a=[],b=this,c=this.getItem(),e=c?!0===d.toBoolean(c.isDir):!1;a.push({title:"New Group",icon:"el-icon-folder",place:"last",emit:!1,style:"",handler:function(a,
c,d){b.newGroup()}});a.push({title:"Reload",icon:"fa-refresh",disabled:!1,command:"Reload",place:"last",emit:!1,style:"",handler:function(){b.reload()}});null!=this.getItem()&&(a.push({title:"Delete",icon:"el-icon-remove-circle",disabled:!1,command:"Delete",place:"last",emit:!1,style:"",handler:function(){b.onDeleteItem(c)}}),e?a.push({title:"New Protocol",icon:"el-icon-file-new",disabled:!1,command:"NewItem",place:"last",emit:!1,style:"",handler:function(){b.newItem(c)}}):a.push({title:"Connect",
icon:"el-icon-play-circle",disabled:!1,command:"Start",place:"last",emit:!1,style:"",handler:function(){b.startDevice(c)}}));return a},onItemRemoved:function(a){a==this.currentItem&&(this.currentItem=null);a&&(a=this.getView(a))&&d.destroy(a)},_onDeleteItem:function(a){var b=!0===d.toBoolean(a.isDir),c=d.toString(a.name),e=b?"removeGroup":"removeItem",g=this;(new p({title:"Remove Protocol"+(b?" Group":"")+" '"+c+"'",style:"max-width:400px",titleBarClass:"text-danger",delegate:{isRemoving:!1,onOk:function(b){g[e](d.toString(a.scope),
d.toString(a.path),function(){g.onItemRemoved(a)})}},inserts:[{query:".dijitDialogPaneContent",insert:'\x3cdiv\x3e\x3cspan class\x3d"fileManagerDialogText"\x3eDo you really want to remove  this item?\x3c/span\x3e\x3c/div\x3e',place:"first"}]})).show()},newItem:function(){var a=this.getItem();a||(a={path:""});var b=[d.createCI("In Group",13,d.toString(a.path),{widget:{disabled:!0},group:"Common"}),d.createCI("Title",13,"",{group:"Common"})],a=new e({title:"New Device",resizable:!0,delegate:{onOk:function(a,
c){a=d.createCI("Id",13,d.createUUID(),{visible:!1,group:"Common"});c.push(a);d.toOptions(c);d.getInputCIByName(b,"Title");d.getInputCIByName(b,"Scope");d.getInputCIByName(b,"In Group")}},cis:b});a.show();a.resize()},reload:function(){},onFileChanged:function(a){if(!a._pp2){a._pp2=!0;var b=a.data;this.fileUpdateTimes||(this.fileUpdateTimes={});if(b.event===h.EVENTS.ON_FILE_CHANGED){if(b.data&&b.mask&&-1!==b.mask.indexOf("delete")){console.error("deleted");return}(new Date).getTime()}var c=d.replaceAll("\\",
"/",b.path),c=d.replaceAll("//","/",b.path),c=c.replace(/\\/g,"/");-1!=c.indexOf("protocols")&&(c.match(/\.json$/)&&(c.indexOf("data/system/protocols"),this.ls("system_protocols")),this.onFileChanged2&&this.onFileChanged2(a))}},init:function(){this.subscribe(h.EVENTS.ON_FILE_CHANGED,this.onFileChanged)},_resetItem:function(a){a.commandsItem&&d.removeFromStore(this.getStore(),a.commandsItem,!0,"path","parentId");a.variablesItem&&d.removeFromStore(this.getStore(),a.variablesItem,!0,"path","parentId")},
_completeProtocolItem:function(a){if(a&&a.user){var b=d.getInputCIByName(a.user.meta,"content"),c=this,e=this.getStore();if(!b&&(a.mount=""+a.scope,a.getPath=function(){return a.path},a.virtual=!1,a.isDir=!0,a.children=[],b=d.createCI("Content",h.ECIType.FILE_EDITOR,"no value",{group:"Content",editor:"JSON Editor",editorArgs:{subscribers:[{event:"onSave",handler:function(b){(b=d.getJson(b.value))&&b.meta&&(a.user=b,a._completed=!1,c._resetItem(a),c._completeProtocolItem(a),c.publish(h.EVENTS.ON_PROTOCOL_CHANGED,
{item:a}))},owner:c}],leftEditorArgs:{subscribers:[{event:"addAction",handler:function(a){},owner:c}],hiddenFields:{},readOnlyNodes:{commands:!0,variables:!0,meta:!0},insertTemplates:[{label:"New Command",path:"commands",value:'{title:"No Title",send:""}',newNodeTemplate:"[]",collapse:!0,select:!0},{label:"New Variable",path:"variables",value:'{title:"No Title",value:""}',newNodeTemplate:"[]",collapse:!0,select:!0}],renderTemplates:[{nodeValuePath:"field.innerHTML",match:[/^variables[\s]?\.(\d+)$/,
/^commands[\s]?\.(\d+)$/],replaceWith:"{nodeValue} - {title}",variables:null,nodeValueTransform:function(a){return d.capitalize(a)},insertIfMatch:{}}]},rightEditorArgs:{subscribers:[{event:"addAction",handler:function(a){},owner:c}]}},editorItem:a,editorOverrides:{},isOwnTab:!0}),a.user.meta.inputs.push(b),!a._completed)){a._completed=!0;var g={path:d.createUUID(),name:"Commands",isDir:!0,type:"leaf",parentId:a.path,virtual:!0,children:[]};a.commandsItem=g;a.children.push(g);e.putSync(g);for(var k=
a.user.commands,b=0;b<k.length;b++){var p=k[b];g.children.push(e.putSync({path:d.createUUID(),name:p.name,id:d.createUUID(),parentId:g.path,_mayHaveChildren:!1,virtual:!0,user:{},isDir:!1,value:p.value,ref:{protocol:a,item:p},type:"protocolCommand"}))}g={path:d.createUUID(),name:"Variables",isDir:!0,type:"leaf",parentId:a.path,virtual:!0,items:[],children:[]};e.putSync(g);a.children.push(g);a.variablesItem=g;k=a.user.variables;for(b=0;b<k.length;b++)p=k[b],g.children.push(e.putSync({isDir:!1,path:d.createUUID(),
name:p.name,id:d.createUUID(),parentId:g.path,_mayHaveChildren:!1,value:p.value,virtual:!0,user:{},ref:{protocol:a,item:p},type:"protocolVariable"}))}}},onStoreReady:function(a){a=a?d.queryStore(a,{isDir:!1}):[];var b=this;_.each(a,function(a,c,d){b._completeProtocolItem(a)})},onMainViewReady:function(){a.prototype.ctx=this.ctx},openItemSettings:function(a){var b=a.user;if(!b||!b.meta)return null;var c=this.getViewId(a),e=u.byId(c);try{if(e)return e.parentContainer&&e.parentContainer.selectChild(e),
null}catch(y){d.destroy(e)}var e=this.getViewTarget(),g=this.getMetaValue(a,this.itemMetaTitleField);a.beanContextName=this.ctx.mainView.beanContextName;return d.addWidget(q,{title:g||d.toString(a.name),cis:b.meta.inputs,beanContextName:this.ctx.mainView.beanContextName,storeItem:a,iconClass:this.beanIconClass,id:c,delegate:this,storeDelegate:this,closable:!0,showAllTab:!1,blockManager:this.ctx.getBlockManager()},this,e,!0)}})})},"davinci/ve/actions/DuplicateAction":function(){define("dojo/_base/declare dojo/dom-style davinci/ve/actions/ContextAction davinci/commands/CompoundCommand davinci/ve/commands/AddCommand davinci/ve/commands/MoveCommand davinci/ve/tools/CreateTool davinci/ve/widget davinci/ve/utils/GeomUtils".split(" "),
function(n,m,k,h,d,b,c,g,p){return n("davinci.ve.actions.DuplicateAction",[k],{run:function(a){if((a=this.fixupContext(a))&&"davinci.ve.Context"===a.declaredClass&&"davinci/delite/Context"===a.declaredClass){var e=this._normalizeSelection(a);if(this.selectionSameParent(e)){var k=[];if(0<e.length){var n=new h;dojo.forEach(e,function(e){var h,q=e.getData({identify:!1});q&&(q.context=a,dojo.withDoc(a.getDocument(),function(){h=g.createWidget(q)},this),h&&(n.add(new d(h,e.getParent(),void 0)),c.prototype.checkAddToCurrentState(n,
h),k.push(h),"absolute"==(e&&e.domNode?m.get(e.domNode,"position"):null)&&(e=p.getMarginBoxPageCoords(e.domNode),e.l+=25,n.add(new b(h,e.l,e.t,void 0,void 0,void 0,!0)))))});a.getCommandStack().execute(n);dojo.forEach(k,function(b,c){a.select(b,0<c)},this)}}}},isEnabled:function(a){a=(a=this.fixupContext(a))&&a.getSelection?a.getSelection():[];return 0===a.length?!1:this.selectionSameParent(a)},shouldShow:function(a){return(a=(a=this.fixupContext(a))?a.editor:null)&&"davinci.ve.PageEditor"==a.declaredClass},
selectionSameParent:function(a){if(0===a.length)return!1;for(var b=a[0].getParent(),c=0;c<a.length;c++)if(a[c].getParent()!=b)return!1;return!0}})})},"davinci/commands/SourceChangeCommand":function(){define(["dojo/_base/declare","davinci/Runtime"],function(n,m){return n("davinci.commands.SourceChangeCommand",null,{name:"SourceChange",constructor:function(k){this._model=k.model;this._oldText=k.oldText;this._newText=k.newText},incrementalUpdate:function(k){this._newText=k.newText},execute:function(){this._model.setText(this._newText);
dojo.publish("/davinci/ui/modelChanged",[{newModel:this._model}]);var k=m.currentEditor;"davinci.ve.PageEditor"==k.declaredClass&&k.handleChange&&require(["davinci/ve/PageEditor"],function(h){h.prototype._srcChanged.call(k,this._newText)}.bind(this));if(!this.established)return this.established=!0},undo:function(){this._model.setText(this._oldText);dojo.publish("/davinci/ui/modelChanged",[{newModel:this._model}]);var k=m.currentEditor;"davinci.ve.PageEditor"==k.declaredClass&&k.handleChange&&require(["davinci/ve/PageEditor"],
function(h){h.prototype._srcChanged.call(k,this._oldText)}.bind(this))}})})},"xideve/views/BlocksFileEditor":function(){define("dcl/dcl dojo/on xblox/views/BlocksFileEditor xide/mixins/ReloadMixin xide/mixins/EventedMixin davinci/ve/widget xide/types xide/utils".split(" "),function(n,m,k,h,d,b,c,g){if("not-a-module"!==k)return n([k,h.dcl],{suspendedViews:null,destroy:function(){this.suspendedViews&&(_.each(this.suspendedViews,g.destroy),delete this.suspendedViews)},getSuspendedView:function(){if(this.suspendedViews){var b=
_.last(this.suspendedViews);b&&this.suspendedViews.remove(b);return b}},createGroupedBlockView:function(b,a,d,h,k){var e=this;k=k||this.gridClass;var p=d.blockStore;this._lastTab&&!this.__right&&(this.__right=this.getRightPanel(null,null,"DefaultFixed",{target:this._lastTab}),this.__right.maxSize(400,null));d={__right:this.__right,ctx:this.ctx,blockScope:d,blockGroup:a,attachDirect:!0,resizeToParent:!0,collection:p.filter({group:a}),_parent:b,getPropertyStruct:this.getPropertyStruct,setPropertyStruct:this.setPropertyStruct,
owner:this};g.mixin(d,h);if(h=this.getSuspendedView())return g.mixin(h,d),b._widgets||(b._widgets=[]),b.add(h),b.grid=h,g.addChild(b,h.template.template,!1),h.set("collection",p.filter({group:a})),h;var m=g.addWidget(k,d,null,b,!1);m.__editorActions||(m.__editorActions=!0,this.addGridActions(m,m));b.grid=m;m._on("selectionChanged",function(a){e._emit("selectionChanged",a)});m._on("onAfterAction",function(a){e.onGridAction(a)});b.on(c.DOCKER.EVENT.VISIBILITY_CHANGED,function(a){a?(e.setVisibleTab(b),
m.onShow(),e.getRightPanel().getSplitter().isCollapsed()||m.showProperties(m.getSelection()[0]),m.__last&&(m._restoreSelection(),m.focus(m.row(m.__last.focused)))):m.__last=m._preserveSelection()});this.registerGrids&&this.ctx.getWindowManager().registerView(m,!1);b._widgets||(b._widgets=[]);b.add(m);return m},suspendView:function(b){this.suspendedViews||(this.suspendedViews=[]);this.cacheNode||(this.cacheNode=$("\x3cdiv style\x3d'display: none'\x3e\x3c/div\x3e"),$(this.domNode).append(this.cacheNode),
this.cacheNode=this.cacheNode[0]);var a=b.grid;a&&(b.remove(a),b.grid=null,this.cacheNode.appendChild(a.template.template),this.suspendedViews.push(a))},clearGroupViews:function(b){var a=this;_.each(this.tabs,function(b){a.suspendView(b)});_.each(this.tabs,function(a){a.destroy()});delete this.tabs;this.destroyWidgets()},declaredClass:"xideve.views.BlocksFileEditor",widget:null,registerView:!0,createLinkedBlock:function(b,a,c,d){if(!c.getBlockById(b.id)){var e=c.blockToJson(b);e.group=a;a=(b=b.scope.resolveDevice(d.block))?
b.name:"";var g=c.blockFromJson(e);g.icon="text-success fa-link";b&&(g.name=a+"-\x3e"+g.name);g.virtual=g;g.serializeMe=!1;g.canEdit=function(){return!1};g.canMove=function(){return!1};g.canEdit=function(){return!1};g.canAdd=function(){return!1};g.mayHaveChildren=function(){return!1};d.onDestroy=function(){g.destroy();c.blockStore.removeSync(g.id)}}},getModel:function(){var b=this.visualEditor.outlineGridView;return b&&(b=b.getModel())?b:null},_getWidget:function(c){return b.byId(c.id)},getWidgetChildren:function(b){var a=
[],c=this._getWidget(b);c&&c.getChildren&&(a=this._getWidget(b).getChildren());return a},getWidgetBlocks:function(c){b.byId(c.id);c=this.getWidgetChildren(c);for(var a=[],d=0;d<c.length;d++){var g=c[d];if("xblox/RunScript"===g.type&&g.domNode){var g=g.domNode,h=null;g.targetevent&&!g.sourceevent?h=g.targetevent:g.targetevent&&g.sourceevent&&!0===g.bidirectional&&(h=g.targetevent);a.push({group:h,block:g._targetBlock,proxy:g})}}return a},wireNode:function(b,a,c){var e=function(a,b,c,d){c.enabled&&
c&&d&&c.solve(c.scope)};b.subscribe||g.mixin(b,d.prototype);var h=b.domNode||b,k=a,p=b.declaredClass||b.startup,n=null!=b.on&&null!=b["on"+g.capitalize(k)],x=null,A=null!=h.render&&null!=h.on;c._targetReference=h;if(p&&b.baseClass&&-1!=b.baseClass.indexOf("dijitContentPane")||null!=b.render||null!=b.on)p=!1;h&&(A||n&&p?(h=b,A?g.isSystemEvent(a)?x=h.subscribe(a,function(b){e(a,b,c)}.bind(this),b):(g.isNativeEvent(a)&&(a=a.replace("on","")),x=h.on(a,function(d){e(a,d.currentTarget.value,c,b)}.bind(this))):
(k="on"+g.capitalize(k),b[k]=function(b,c){!0!==h.ignore&&e(a,b)})):x=m(h,a,function(b){e(a)}.bind(this)),x&&b.addHandle&&b.addHandle(a,x))},wireWidget:function(b,a,c,d,g,h,k){b=c.getBlocks({group:k});d._destroyHandles&&d._destroyHandles();for(a=0;a<b.length;a++)this.wireNode(d.domNode,h,b[a])},wireScope:function(c,a,d){for(var e=this.blockScope.allGroups(),g=0;g<e.length;g++){var h=e[g],k=null,p=null,m=h.split("__");2==m.length&&(k=m[1],p=m[0]);k&&p&&(p=b.byId(p))&&this.wireWidget(c,a,d,p,p.domNode,
k,h)}},getPageEditor:function(){return this.delegate},getRootWidget:function(){return this.getPageEditor().getVisualEditor().getContext().getRootWidget()},showWidgetBlocks:function(b){if(b){var a=b.getId(),c=b.domNode.getAttribute("blockGroup"),d=this,g=this.getWidgetBlocks(b);a||c||(a=b.id);this.clearGroupViews(!0);var h=[];b="";var k=this.ctx.getDeviceManager();if(a&&!c){b=a;for(var c=this.blockScope.allGroups(),p=0;p<c.length;p++){var m=c[p],n;n=m.startsWith(""+a)?!0:void 0;n&&h.push(m)}}this.newGroupPrefix=
b+"__";a={};g&&(a=_.groupBy(g,function(a){return a.proxy&&a.proxy.targetevent?a.proxy.targetevent:a.block?a.block.group:a.group}),_.isEmpty(a)||_.each(a,function(a,b){var c=d.newGroupPrefix+b;_.each(a,function(a){var b=a.block,e=a.proxy;if(!b&&a.proxy)if(a.proxy._targetBlock)b=a.proxy._targetBlock;else{var g=a.proxy.block;-1!==g.indexOf("://")&&(g=k.getBlock(g))&&(b=g)}b?d.createLinkedBlock(b,c,d.blockScope,e):console.error("have no block or item!",a)});-1==h.indexOf(c)&&h.push(c)}));-1==h.indexOf("Variables")&&
h.push("Variables");this.renderGroups(h,this.blockScope)}},showGlobalBlocks:function(){this.clearGroupViews(!0);this.newGroupPrefix="";this.initWithScope(this.blockScope)},onItemRemoved:function(){},_widgetSelectionChanged:function(b){b&&b.isFake||(this._mute=!0,b=b.selection,1==b.length?(this.widget=b[0],this.showWidgetBlocks(b[0])):this.showWidgetBlocks(this.getRootWidget()),_.each(this.tabs,function(a){a._emit=function(){};a.publish=function(){}}),this.resize())},onWidgetChanged:function(b){var a=
b.type,d=this.editorContext;b=b.widget;a===d.WIDGET_MODIFIED&&(this.ctx.getContextManager().wireWidget2(d,this.ctx,this.blockScope,d.appContext,b),d.appContext.publish(c.EVENTS.ON_APP_READY,{context:d.appContext}));if(a===d.WIDGET_ADDED){if("xblox/RunScript"===b.type)b.domNode.onAppReady({context:d.appContext})}else a===d.WIDGET_REMOVED&&"xblox/RunScript"===b.type&&b.domNode.destroy()},startup:function(){this.subscribe("/davinci/ui/widgetSelected",this._widgetSelectionChanged);this.subscribe(c.EVENTS.ON_WIDGET_CHANGED);
this.initReload()}})})},"davinci/html/HTMLComment":function(){define(["dojo/_base/declare","davinci/html/HTMLItem"],function(n,m){return n("davinci.html.HTMLComment",m,{constructor:function(k){this.elementType="HTMLComment";this.value=k||""},getText:function(k){k=this.isProcessingInstruction?"":"--";return"\x3c!"+k+this.value+k+"\x3e"}})})},"xide/rpc/JsonRPC":function(){define(["./Service","dojo/errors/RequestError","xide/utils/StringUtils"],function(n,m,k){function h(d){return{serialize:function(b,
c,g,h){b={id:this._requestId++,method:c.name,params:g};d&&(b.jsonrpc=d);return{data:JSON.stringify(b),handleAs:"json",contentType:"application/json",transport:"POST"}},deserialize:function(b){if("Error"==b.name||b instanceof m)b=k.fromJson(b.responseText);if(b.error){var c=Error(b.error.message||b.error);c._rpcErrorObject=b.error;return c}return b.result}}}n.envelopeRegistry.register("JSON-RPC-1.0",function(d){return"JSON-RPC-1.0"==d},k.mixin({namedParams:!1},h()));n.envelopeRegistry.register("JSON-RPC-2.0",
function(d){return"JSON-RPC-2.0"==d},k.mixin({namedParams:!0},h("2.0")))})},"davinci/ui/Editor":function(){define(["../commands/CommandStack","dojo/_base/declare"],function(n,m,k){var h=function(d){this._progSelect||this.selectionChange({startOffset:d.newValue.start,endOffset:d.newValue.end})};return m(null,{constructor:function(d,b,c){this.contentDiv=d;this.commandStack=new n;this._existWhenVisible=c;this._isVisible=!c},setContent:function(d,b){this.editor||this._existWhenVisible&&!this._isVisible||
this._createEditor();this._textModel||(this._textModel=this.editor?this.editor.getModel():new mProjectionTextModel.ProjectionTextModel(new mTextModel.TextModel));this.fileName=d;this.setValue(b,!0);this._textModel&&(dojo.disconnect(this._textModelConnection),this._textModelConnection=dojo.connect(this._textModel,"onChanged",this,onTextChanged))},setVisible:function(d){d!=this._isVisible&&this._existWhenVisible&&(d&&this._existWhenVisible?(this._createEditor(),this._updateStyler()):(this.editor.getTextView().removeEventListener("Selection",
dojo.hitch(this,h)),delete this.editor));this._isVisible=d},setValue:function(d,b){this._dontNotifyChange=b;this.editor?this.editor.setText(d):this._textModel.setText(d)},_createEditor:function(){},_updateStyler:function(){},selectionChange:function(d){},destroy:function(){},select:function(d){if(this.editor)try{this._progSelect=!0,this.editor.setSelection(d.endOffset,d.startOffset)}finally{delete this._progSelect}},getText:function(){return this._textModel.getText(0)},getOnUnloadWarningMessage:function(){return null}})})},
"xide/model/Base":function(){define(["dcl/dcl","dojo/_base/declare","xide/utils"],function(n,m,k){var h={declaredClass:"xide/model/Base",constructor:function(d){k.mixin(this,d)},getLabel:function(){return null},getID:function(){return null}};m=m("xide/model/Base",null,h);m.dcl=n(null,h);return m})},"dstore/SimpleQuery":function(){define(["dojo/_base/declare","dojo/_base/array"],function(n,m){function k(d,b){if(-1<d.indexOf(".")){var c=d.split("."),g=c.length;return function(d){for(var a=0;a<g;a++)d=
d&&(b&&d.get?d.get(c[a]):d[c[a]]);return d}}return function(b){return b.get?b.get(d):b[d]}}var h={eq:function(d,b){return d===b},"in":function(d,b){return-1<m.indexOf(b.data||b,d)},ne:function(d,b){return d!==b},lt:function(d,b){return d<b},lte:function(d,b){return d<=b},gt:function(d,b){return d>b},gte:function(d,b){return d>=b},match:function(d,b,c){return b.test(d,c)},contains:function(d,b,c,g){var h=this;return m.every(b.data||b,function(a){if("object"===typeof a&&a.type){var b=h._getFilterComparator(a.type);
return m.some(d,function(d){return b.call(h,d,a.args[1],c,g)})}return-1<m.indexOf(d,a)})}};return n(null,{_createFilterQuerier:function(d){function b(a){var d=a.type;a=a.args;var p=g._getFilterComparator(d);if(p){var m=a[0],n=k(m,c),r=a[1];r&&r.fetchSync&&(r=r.fetchSync());return function(a){return p.call(g,n(a),r,a,m)}}switch(d){case "and":case "or":for(var v=0,x=a.length;v<x;v++){var A=b(a[v]);h=h?function(a,b){return"and"===d?function(c){return a(c)&&b(c)}:function(c){return a(c)||b(c)}}(h,A):
A}return h;case "function":return a[0];case "string":v=g[a[0]];if(!v)throw Error("No filter function "+a[0]+" was found in the collection");return v;case void 0:return function(){return!0};default:throw Error('Unknown filter operation "'+d+'"');}}var c=this.queryAccessors,g=this,h=b(d);return function(a){return m.filter(a,h)}},_getFilterComparator:function(d){return h[d]||this.inherited(arguments)},_createSelectQuerier:function(d){return function(b){var c=d.length;return m.map(b,d instanceof Array?
function(b){for(var g={},a=0;a<c;a++){var e=d[a];g[e]=b[e]}return g}:function(b){return b[d]})}},_createSortQuerier:function(d){var b=this.queryAccessors;return function(c){c=c.slice();c.sort("function"==typeof d?d:function(c,h){for(var a=0;a<d.length;a++){var e,g=d[a];if("function"==typeof g)e=g(c,h);else{e=g.get||(g.get=k(g.property,b));var g=g.descending,p=e(c);e=e(h);null!=p&&(p=p.valueOf());null!=e&&(e=e.valueOf());e=p===e?0:!!g===(null===p||p>e&&null!==e)?-1:1}if(0!==e)return e}return 0});return c}}})})},
"xnode/manager/NodeServiceManagerUI":function(){define("dcl/dcl xide/encoding/MD5 xide/types xide/utils dojo/cookie dojo/json xide/lodash xdojo/has!xnode-ui?xide/views/ConsoleView xdojo/has!xnode-ui?xnode/views/NodeServiceView".split(" "),function(n,m,k,h,d,b,c,g,p){return n(null,{declaredClass:"xnode.manager.NodeServiceManagerUI",getViewId:function(a){return this.beanNamespace+m(JSON.stringify({info:a.info}),1)},onConsoleEnter:function(a,b){0!=b.length&&(a=a.view.client,c.isString(b)&&a.emit(null,
b))},createConsole:function(a,b,c){var d=this.getViewId(a);a=h.addWidget(g,{delegate:this,title:a.name,closable:!0,style:"padding:0px;margin:0px;height:inherit",className:"runView",client:c,item:a},this,b,!0);this.consoles[d]=a;return c.delegate=a},openConsole:function(a){this.getView(a);this.createConsole(a,this.getViewTarget(),this.createClient(a))},onReload:function(){this.ls(function(){this.serviceView.refresh(this.store)}.bind(this))},loadPreferences:function(){var a=d(this.cookiePrefix+"_debug_settings");
return a=a?b.parse(a):{}},savePreferences:function(a){d(this.cookiePrefix+"_debug_settings",b.stringify(a))},getViewTarget:function(){return this.ctx.getApplication().mainView.getNewAlternateTarget()},createServiceView:function(a,b){b=b||this.getViewTarget();this.serviceView=h.addWidget(p,{delegate:this,store:a,title:"Services",closable:!0,style:"padding:0px"},this,b,!0)},openServiceView:function(){if(this.isValid())this.createServiceView(this.store);else{var a=this;this.ls(function(){a.createServiceView(a.store)})}},
onStart:function(a,b,c){a=[];for(c=0;c<b.length;c++)a.push(b[c].name);this.startServer(a,function(){this.onReload()}.bind(this))},onStop:function(a,b,c){a=[];for(c=0;c<b.length;c++)a.push(b[c].name);this.stopServer(a,function(){this.onReload()}.bind(this))},openServices:function(){this.openServiceView()},getActions:function(){return[]},init:function(){this.ctx.addActions(this.getActions())}})})},"xide/widgets/WidgetReference":function(){define("dcl/dcl dojo/_base/declare xide/widgets/Reference xide/widgets/_WidgetPickerMixin xide/utils xide/types xide/registry".split(" "),
function(n,m,k,h,d,b,c){return n([k,h],{declaredClass:"xide.widgets.WidgetReference",allowHTMLNodes:!1,allowWidgets:!0,lastPickedNode:null,lastPickedWidget:null,getValue:function(){return"asdfasdf"},skipWidgetClasses:["dijit.layout._TabButton","xfile.views.ToggleSplitter"],skipWidgetCSSClasses:"dijitButtonHover dijitHover dijit dijitInline dijitReset dijitCheckBoxChecked dijitChecked dijitLeft".split(" "),toReference:function(b){},widgetToReference:function(c){switch(this.mode){case b.WIDGET_REFERENCE_MODE.BY_ID:return c.id;
case b.WIDGET_REFERENCE_MODE.BY_CLASS:return c.declaredClass||"";case b.WIDGET_REFERENCE_MODE.BY_CSS:c=(c.domNode?c.domNode:c).className.split(" ");for(var g="",a=0;a<c.length;a++)-1<d.contains(this.skipWidgetCSSClasses,c[a])||-1<c[a].toLowerCase().indexOf("hover")||(g+=" "+c[a]);return g.trim()}return null},onModeChanged:function(b){this.mode=b;this.lastPickedNode&&this.updateReferenceNode(this.lastPickedNode)},updateReferenceNode:function(b){var d=c.getEnclosingWidget(b),a=null;!d&&b.render&&(d=
b);d&&(this.lastPickedWidget=d,this.allowWidgets?a=this.widgetToReference(d):this.allowHTMLNodes&&(a=this.widgetToReference(b)));a&&this.editBox.set("value",a)},isPickable:function(b){if(this.allowWidgets){var d=c.getEnclosingWidget(b);if(d){if(-1<this.skipWidgetClasses.indexOf(d.declaredClass))return!1;if(b.id&&b.id==d.id)return!0}}else if(this.allowHTMLNodes)return!0;return!1},onNodePicked:function(b){this.lastPickedNode=b;this.updateReferenceNode(b)},onPick:function(){var b=this.userData,c=this;
if(b.window){var a=b.window;if(a.appContext){a=a.appContext;a.allowWidgets=b.allowWidgets;a.allowHTMLNodes=b.allowHTMLNodes;a.onNodePicked=function(a){c.lastPickedNode=a;c.updateReferenceNode(a)};a._pick();return}}this._pick()}})})},"dijit/form/_FormWidget":function(){define("dojo/_base/declare dojo/sniff dojo/_base/kernel dojo/ready ../_Widget ../_CssStateMixin ../_TemplatedMixin ./_FormWidgetMixin".split(" "),function(n,m,k,h,d,b,c,g){m("dijit-legacy-requires")&&h(0,function(){require(["dijit/form/_FormValueWidget"])});
return n("dijit.form._FormWidget",[d,c,b,g],{setDisabled:function(b){k.deprecated("setDisabled("+b+") is deprecated. Use set('disabled',"+b+") instead.","","2.0");this.set("disabled",b)},setValue:function(b){k.deprecated("dijit.form._FormWidget:setValue("+b+") is deprecated.  Use set('value',"+b+") instead.","","2.0");this.set("value",b)},getValue:function(){k.deprecated(this.declaredClass+"::getValue() is deprecated. Use get('value') instead.","","2.0");return this.get("value")},postMixInProperties:function(){this.nameAttrSetting=
this.name&&!m("msapp")?'name\x3d"'+this.name.replace(/"/g,"\x26quot;")+'"':"";this.inherited(arguments)}})})},"xide/_Popup":function(){define(["dcl/dcl"],function(n){var m=200;n=n(null,{});n.nextZ=function(k){m++;k&&(m+=k);return m};"undefined"!==typeof window&&(window.__nextZ=n.nextZ);n.setStartIndex=function(k){m=k};return n})},"dijit/DropDownMenu":function(){define(["dojo/_base/declare","dojo/keys","dojo/text!./templates/Menu.html","./_MenuBase"],function(n,m,k,h){return n("dijit.DropDownMenu",
h,{templateString:k,baseClass:"dijitMenu",_onUpArrow:function(){this.focusPrev()},_onDownArrow:function(){this.focusNext()},_onRightArrow:function(d){this._moveToPopup(d);d.stopPropagation();d.preventDefault()},_onLeftArrow:function(d){if(this.parentMenu)if(this.parentMenu._isMenuBar)this.parentMenu.focusPrev();else this.onCancel(!1);else d.stopPropagation(),d.preventDefault()}})})},"xfile/views/FileConsole":function(){define("xdojo/declare dcl/dcl xide/types xide/utils xide/mixins/PersistenceMixin xide/layout/_TabContainer xide/views/_Console xide/views/_ConsoleWidget xfile/views/FileSize xide/views/ConsoleView xide/lodash xace/views/Editor".split(" "),
function(n,m,k,h,d,b,c,g,p,a,e,q){function u(){return m(null,{owner:null,onServerResponse:function(a,b,c){if(a&&b&&a.owner&&a.owner.onServerResponse)return a.owner.onServerResponse(b,c)},runBash:function(a,b,c,d){var e=this,g=e.ctx.fileManager;b=g.serviceObject.base64_encode(b);g.runDeferred("XShell","run",["sh",b,c]).then(function(b){d&&$(d).find(".consoleRunningCommand").remove();e.onServerResponse(a,b,!1)})},runPHP:function(a,b,c){var d=this,e=d.ctx.fileManager;b=e.serviceObject.base64_encode(b);
e.runDeferred("XShell","run",["php",b,c]).then(function(b){d.onServerResponse(a,b,!1)})},runJavascript:function(a,b,c,d){c=(new Function("{"+b+"; }")).call(c,d);return null!=c?(this.onServerResponse(a,c),c):b},onConsoleCommand:function(a,b){a=a.console;if("sh"===a.type){var c=this.onServerResponse(a,"\x3cspan class\x3d'consoleRunningCommand fa-spinner fa-spin'\x3e\x3c/span\x3e\x3cpre style\x3d'font-weight: bold'\x3e# "+b+"\x3c/pre\x3e",!0),d=null;if(this.owner&&this.owner.getCurrentFolder){var e=
this.owner.getCurrentFolder();e&&(d=h.buildPath(e.mount,e.path,!1))}return this.runBash(a,b,d,c)}if("php"===a.type)return d=null,a.isLinked()&&(d=this.getCurrentPath()),this.runPHP(a,b,d);if("javascript"===a.type)return this.runJavascript(a,b)},onConsoleEnter:function(a,b){return this.onConsoleCommand(a,b)}})}function w(){var b=m(a.Editor,{didAddMCompleter:!1,multiFileCompleter:null,blockScope:null,driverInstance:null,onACEReady:function(a){},onEditorCreated:function(a,b){this.inherited(arguments);
this.onACEReady(a)}});return m(a,{EditorClass:b,onAddEditorActions:m.superCall(function(a){return function(b){a.call(this,b);b=b.actions;e.find(b,{command:"File/Save"});b.remove(e.find(b,{command:"File/Save"}));b.remove(e.find(b,{command:"File/Reload"}))}}),logTemplate:'\x3cpre style\x3d"font-size:100%;padding: 0px;" class\x3d""\x3e    ${time} - ${result}\x3c/pre\x3e',_parse:function(a,b,c){var d=""+b;0<d.indexOf("{{")||0<d.indexOf("}}")?d=_parser.parse(k.EXPRESSION_PARSER.FILTREX,d,this,{variables:a.getVariablesAsObject(),
delimiters:{begin:"{{",end:"}}"}}):(a=a.parseExpression(b,null,null,null,c))&&(d=a);return d},parse:function(a,b){var c=this.driverInstance;return c&&c.blockScope?this._parse(c.blockScope,a,b):a}})}n=n("xfile.views.FileConsole",null,{isStatusbarOpen:!1,resizeToParent:!0,__bottomTabContainer:null,onCloseStatusPanel:function(a){},onOpenStatusPanel:function(a){if(!a._tabs){var c=this,d=this.__bottomTabContainer||h.addWidget(b,{direction:"below"},null,a,!0);this.__bottomTabContainer=a._tabs=d;var e=w(),
g=new (u());g.ctx=c.ctx;g.owner=this;var k=d.createTab("Bash","fa-terminal");k.add(e,{type:"sh",title:"Bash",icon:"fa-terminal",ctx:c.ctx,owner:c,value:"ls -l --color\x3dalways"},null,!0).delegate=g;k._onShown();k=d.createTab("Javascript","fa-code").add(e,{type:"javascript",title:"Javascript",ctx:c.ctx,value:"return 2+2;",owner:c},null,!1);k.delegate=g;var k=d.createTab("PHP","fa-terminal").add(e,{type:"php",title:"PHP",ctx:c.ctx,value:"\x3c?php \n\n\x3e",owner:c},null,!1),m=d.createTab("Sizes","fa-bar-chart");
this.__fileSize=m.add(p,{owner:this,ctx:c.ctx},null,!1);this._on("openedFolder",function(a){h.destroy(c.__fileSize);m.resize();c.resize();c.__fileSize=null;c.__fileSize=m.add(p,{owner:c,ctx:c.ctx},null,!1);h.resizeTo(c.__fileSize,m,!0,!0);c.__fileSize.startup()});a.add(d)}return this.inherited(arguments)},onStatusbarCollapse:function(a){var b=null;this.isStatusbarOpen?(b=this.getBottomPanel(!1,.2),b.collapse(),this.onCloseStatusPanel(a),a&&a.removeClass("fa-caret-down"),a&&a.addClass("fa-caret-up")):
((b=this._getBottom())?b.expand():b=this.getBottomPanel(!1,.2),this.onOpenStatusPanel(b),a&&a.removeClass("fa-caret-up"),a&&a.addClass("fa-caret-down"));this.isStatusbarOpen=!this.isStatusbarOpen;b.resize()}});n.createEditor=function(a,b,c,d){var e={filePath:"",fileName:""};b={_permissions:[],item:e,value:b,style:"padding:0px;top:0 !important",iconClass:"fa-code",options:h.mixin(d,{filePath:e.path,fileName:e.name}),storeDelegate:{},title:"No Title"};h.mixin(b,d);a=h.addWidget(q,b,c,a,!0,null,null,
!1);a.resize();return a};n.createShellViewDelegate=u;n.createShellViewClass=w;return n})},"davinci/ui/DownloadSelected":function(){define(["dojo/_base/declare","./Download","./Resource","davinci/lang/ui/ui","dojo/text!./templates/downloadSelected.html"],function(n,m,k,h,d){return n([m],{templateString:d,_buildUITable:function(){this._files=k.getSelectedResources();var b=["\x3cdiv class\x3d'downloadSelectedHeader'\x3e"+h.selectedFiles+"\x3c/div\x3e","\x3cdiv class\x3d'downloadSelectedList'\x3e"];this._files||
(b.push("\x3cb\x3e"+h.noFilesSelected+"\x3c/b\x3e"),this._files=[],dojo.attr(this._okButton,"disabled","true"));b=b.concat(this._files.map(function(b){return b.getPath()+"\x3cbr\x3e"}));b.push("\x3c/div\x3e\x3cbr\x3e\x3cbr\x3e");dojo.place(b.join(""),this._selectionDiv)},_getResources:function(){return this._files.map(function(b){return b.getPath()})},_getLibs:function(){return[]}})})},"davinci/ve/widgets/HTMLStringUtil":function(){define("davinci/Runtime ./FontDataStore ./FontComboBox ./MultiInputDropDown dijit/form/ComboBox ./MetaDataStore ./ColorPicker ./Background".split(" "),
function(n,m){var k=dojo.getObject("davinci.ve.widgets.HTMLStringUtil",!0);dojo.mixin(k,{__id:0,idPrefix:"davinci_ve_widgets_properties_generated",_currentPropSection:null,animSS:null,animRuleIndex:{},getCurrentPropSection:function(){return this._currentPropSection},getId:function(){return this.idPrefix+this.__id++},injectId:function(h,d){var b=h.indexOf("\x3e");return b?h.substring(0,b)+" id\x3d'"+d+"'"+h.substring(b,h.length):"\x3cspan id\x3d'"+d+"'\x3e"+h+"\x3c/span\x3e"},getEditor:function(h){function d(b){var a=
{};a.value="undefined"!=typeof b.value&&null!==b.value?b.value:b;a.title=b.title||a.value;return a}var b=h.type,c=this.getId();h.id=c;var g=h.disabled?" disabled\x3d'true' ":"";switch(b){case "multi":return b="",h.values&&(b="data\x3d'"+dojo.toJson(dojo.map(h.values,function(b){return{value:b}}))+"'"),"\x3cdiv dojoType\x3d'davinci.ve.widgets.MultiInputDropDown' "+b+"  class\x3d'propertyPaneEditablevalue' style\x3d'display:inline-block; width:100%;' id\x3d'"+c+"'"+g+"\x3e\x3c/div\x3e";case "boolean":return"\x3cinput type\x3d'checkbox' class\x3d'propertyPaneEditablevalue' style\x3d'display:inline-block;margin-left:5px' id\x3d'"+
c+"'\x3e\x3c/input\x3e";case "comboEdit":h=h.values;c="\x3cselect dojoType\x3d'dijit.form.ComboBox' autoComplete\x3d'false' style\x3d'display:inline-block; width:100%;' id\x3d'"+c+"'"+g+"\x3e";for(g=0;g<h.length;g++)b=d(h[g]),c+="\x3coption class\x3d'option' value\x3d'"+b.value+"'\x3e"+b.title+"\x3c/option\x3e";return c+"\x3c/select\x3e";case "combo":h=h.values;c="\x3cselect class\x3d'form-control input-transparent' style\x3d'display:inline-block; width:100%;' id\x3d'"+c+"'"+g+"\x3e";for(g=0;g<h.length;g++)b=
d(h[g]),c+="\x3coption class\x3d'option' value\x3d'"+b.value+"'\x3e"+b.title+"\x3c/option\x3e";return c+"\x3c/select\x3e";case "font":return c="\x3cdiv dojoType\x3d'davinci.ve.widgets.FontDataStore' jsId\x3d'"+c+"_fontStore'\x3e"+("\x3cdiv dojoType\x3d'davinci.ve.widgets.FontComboBox' value\x3d'"+m.fonts[0].value+"' store\x3d'"+c+"_fontStore'  id\x3d'"+c+"' class\x3d'propertyPaneEditablevalue' style\x3d'display:inline-block; width:100%;'\x3e\x3c/div\x3e");case "state":return"\x3cdiv dojoType\x3d'davinci.ve.widgets.MetaDataStore' jsId\x3d'davinci.properties.event"+
c+"_Store'\x3e"+("\x3cdiv dojoType\x3d'dijit.form.ComboBox' id\x3d'"+c+"'store\x3d'davinci.properties.event"+c+"_Store' class\x3d'propertyPaneEditablevalue' style\x3d'display:inline-block; width:100%;' autoComplete\x3d'false'\x3e\x3c/div\x3e");case "color":return"\x3cdiv class\x3d'propertyPaneEditablevalue' dojoType\x3d'davinci.ve.widgets.ColorPicker' id\x3d'"+c+"' \x3e\x3c/div\x3e";case "background":return b=dojo.isArray(h.values)?" data\x3d'"+dojo.toJson(h.values)+"'":"",g=dojo.isArray(h.target)?
h.target[0]:h.target,c="\x3cdiv dojoType\x3d'davinci.ve.widgets.Background' id\x3d'"+c+"'"+b+(" propname\x3d'"+g+"'")+(h.colorswatch?" colorswatch\x3d'true'":"")+"\x3e\x3c/div\x3e";case "border":case "number":case "object":case "text":case "array":case "widgetState":case "iconClass":case "string":if("date"==h.format)return"\x3cdiv class\x3d'propertyPaneEditablevalue' dojoType\x3d'dijit.form.DateTextBox' id\x3d'"+c+"'\x3e\x3c/input\x3e";if("time"==h.format)return"\x3cdiv class\x3d'propertyPaneEditablevalue' dojoType\x3d'dijit.form.TimeTextBox' id\x3d'"+
c+"'\x3e\x3c/input\x3e";default:return c=h.data&&!0===h.data.readonly?"\x3cinput readonly type\x3d'text' class\x3d'form-control input-transparent propertyPaneEditablevalue' style\x3d'display:inline-block; width:100%;' id\x3d'"+c+"'\x3e\x3c/input\x3e":"\x3cinput type\x3d'text' class\x3d'form-control input-transparent propertyPaneEditablevalue' style\x3d'display:inline-block; width:100%;' id\x3d'"+c+"'\x3e\x3c/input\x3e"}},generateTable:function(h,d){var b=d?d.rowsOnly:!1,c=d&&d.zeroSpaceForIncrDecr?
"0px":"20px";d="";if(h.html)return h.id=this.getId(),this.injectId(h.html,h.id);c="\x3ctable class\x3d'property_table_stretchable' border\x3d'0' width\x3d'100%' align\x3d'center' cellspacing\x3d'0' cellpadding\x3d'0'\x3e\x3ccolgroup\x3e\x3ccol style\x3d'width:6px;' /\x3e\x3ccol class\x3d'gap02' /\x3e\x3ccol class\x3d'gap03' /\x3e"+("\x3ccol style\x3d'width:"+c+";' /\x3e")+"\x3ccol style\x3d'width:6px;' /\x3e\x3c/colgroup\x3e";b||(d+=c);for(var g=0;g<h.length;g++)if(h[g].widgetHtml)h[g].id=this.getId(),
h[g].rowId=this.getId(),d+="\x3ctr id\x3d'"+h[g].rowId+"'",h[g].rowClass&&(d+=" class\x3d'"+h[g].rowClass+"'"),d+="\x3e",d+="\x3ctd colspan\x3d'5' width\x3d'100%'\x3e",d+=this.injectId(h[g].widgetHtml,h[g].id),d+="\x3c/td\x3e",d+="\x3c/tr\x3e";else if(h[g].html)h[g].id=this.getId(),h[g].rowId=this.getId(),d+="\x3ctr id\x3d'"+h[g].rowId+"'",d+=" class\x3d'cssPropertySection",h[g].rowClass&&(d+=" "+h[g].rowClass),d+="'\x3e",d+="\x3ctd colspan\x3d'5' width\x3d'100%'\x3e",d+=h[g].html,d+="\x3c/td\x3e",
d+="\x3c/tr\x3e";else if("toggleSection"==h[g].type){d+="\x3ctr id\x3d'"+h[g].id+"'  class\x3d'cssPropertySection'\x3e\x3ctd colspan\x3d'5'\x3e";for(var k="",a=this.generateTable(h[g].pageTemplate,{rowsOnly:!0}),e=0;e<h[g].pageTemplate.length;e++)h[g].pageTemplate[e].rowId&&(k+="dojo.toggleClass('"+h[g].pageTemplate[e].rowId+"','propertiesSectionHidden');"),h[g].pageTemplate[e].cascadeSectionRowId&&(k+="if(this.checked){dojo.removeClass('"+h[g].pageTemplate[e].cascadeSectionRowId+"','propertiesSectionHidden');}else{{dojo.addClass('"+
h[g].pageTemplate[e].cascadeSectionRowId+"','propertiesSectionHidden');}}");d+="\x3cinput type\x3d'checkbox' onclick\x3d\""+k+'"\x3e\x3c/input\x3e';d+=h[g].display;d+="\x3c/td\x3e\x3c/tr\x3e";d+=a}else h[g].display?(h[g].toggleCascade=this.getId(),h[g].cascadeSection=this.getId(),h[g].rowId=this.getId(),h[g].cascadeSectionRowId=this.getId(),d+="\x3ctr id\x3d'"+h[g].rowId+"'",d+=" class\x3d'cssPropertySection",h[g].rowClass&&(d+=" "+h[g].rowClass),d+="'",d+=" propName\x3d'"+h[g].display+"'",d+="\x3e",
d+="\x3ctd/\x3e",d+="\x3ctd class\x3d'propertyDisplayName'\x3e"+h[g].display+":\x26nbsp;\x3c/td\x3e",d+="\x3ctd class\x3d'propertyInputField propertyInputField"+h[g].type+"' \x3e"+this.getEditor(h[g])+"\x3c/td\x3e",d+="\x3ctd class\x3d'propertyExtra' nowrap\x3d'true'\x3e",d+="\x3ctd class\x3d'propertyExtra2' nowrap\x3d'true'\x3e",h[g].target&&!h[g].hideCascade&&(d+="\x3cdiv width\x3d'100%'\x3e\x3cbutton class\x3d'showCss propertyButton' id\x3d'"+h[g].toggleCascade+"'",d+=' onClick\x3d"davinci.ve.widgets.HTMLStringUtil.showProperty(',
d+="'"+h[g].rowId+"'",d+=')"\x3e\x26gt;\x3c/button\x3e',d+="\x3c/div\x3e"),d+="\x3ctd/\x3e",d+="\x3c/tr\x3e",h[g].target&&!h[g].hideCascade&&(k="{'cascadeSectionRowId':\""+h[g].cascadeSectionRowId+"\",'toggleCascade':\""+h[g].toggleCascade+'"}',d+="\x3ctr id\x3d'"+h[g].cascadeSectionRowId+"' class\x3d'cssCascadeSection cascadeRowHidden'\x3e",d+="\x3ctd colspan\x3d'5' width\x3d'100%' class\x3d'showCascadeDiv'\x3e\x3cdiv dojoType\x3d'davinci.ve.widgets.Cascade' toggleClasses\x3d"+k+" target\x3d'"+dojo.toJson(h[g].target)+
"' targetField\x3d'\""+h[g].id+"\"' id\x3d'"+h[g].cascadeSection+"'\x3e\x3c/div\x3e\x3c/td\x3e\x3c/tr\x3e")):(d+="\x3c/table\x3e",d+=this.getEditor(h[g]),d+=c);b||(d+="\x3c/table\x3e");return d},generateTemplate:function(h){var d="";h.pageTemplate?(h.key&&(h.id=this.getId(),d="\x3cdiv class\x3d'propGroup' id\x3d'"+h.id+"' propGroup\x3d'"+h.key+"'\x3e"),d+=this.generateTable(h.pageTemplate),d+="\x3c/div\x3e"):h.html?d+=h.html:h.widgetHtml&&(h.id=this.getId(),d+=this.injectId(h.widgetHtml,h.id));return d},
stylesheetHref:"propview.css",animShowSectionClass:"propRootDetailsContainer",animShowSectionClassSelector:".propRootDetailsContainer",animShowDetailsClass:"property_table_stretchable",animShowDetailsClassSelector:".property_table_stretchable",showPropAnimClasses:["propRowFadeIn","propRowFadeOut","propRowTransparent","propRowOpaque","propRowHidden"],showRoot:function(){this._hideSectionShowRoot();this._currentPropSection=null;return!1},showSection:function(h,d){this._initSection(h);return!1},showProperty:function(h){function d(a){dojo.disconnect(v);
dojo.disconnect(x);b();var d=g._findRule(g.animShowDetailsClassSelector);d?(a=d.ss,d=d.ruleIndex,a.deleteRule(d),a.insertRule(g.animShowDetailsClassSelector+" { margin-top:0px; }",d),c()):console.error("HTMLStringUtil showProperty: transEnd: rule not found")}var b=function(){for(var b=0;b<e.children.length;b++){var c=e.children[b];1==c.nodeType&&dojo.hasClass(c,"cssPropertySection")&&(c==a?g._addRemoveClasses(c,k,[]):g._addRemoveClasses(c,k,["propRowHidden"]))}},c=function(){u&&(dojo.removeClass(u,
"cascadeRowHidden"),dojo.addClass(u,"cascadeRowTransparent"),setTimeout(function(){dojo.removeClass(u,"cascadeRowTransparent");dojo.addClass(u,"cascadeRowFadeIn")},1))};dojo.addClass(dojo.byId("root"),"showingCascade");var g=this,k=this.showPropAnimClasses,a=dojo.byId(h),e=a.parentNode,m=g._searchSiblingsByTagClass(e.children[0],"TR","cssPropertySection"),u=g._searchSiblingsByTagClass(a.nextSibling,"TR","cssCascadeSection");h=g._searchUpByTagClass(e,"TABLE",g.animShowDetailsClass);var w=g._searchUpByTagClass(a,
"DIV","propGroup"),w=dojo.attr(w,"propGroup");dojo.attr(a,"propName");require("davinci/ve/views/SwitchingStyleView").prototype.sectionTitleFromKey(w);if(n.supportsCSS3Transitions){var m=dojo.marginBox(m),m=dojo.marginBox(a).t-m.t,r=g._findRule(g.animShowDetailsClassSelector);if(r){var w=r.ss,r=r.ruleIndex,v=dojo.connect(h,"webkitTransitionEnd",d),x=dojo.connect(h,"transitionend",d);w.deleteRule(r);w.insertRule(g.animShowDetailsClassSelector+" { margin-top:-"+m+"px; opacity:.99; -webkit-transition: all .6s ease; -moz-transition: all .6s ease; }",
r);h=!1;for(m=0;m<e.children.length;m++)w=e.children[m],1==w.nodeType&&dojo.hasClass(w,"cssPropertySection")&&(w==a?(g._addRemoveClasses(w,k,["propRowFadeIn"]),h=!0):h?g._addRemoveClasses(w,k,["propRowHidden"]):g._addRemoveClasses(w,k,["propRowTransparent"]))}else console.error("HTMLStringUtil showProperty: transEnd: rule not found")}else b(),c()},_initSection:function(h){for(var d=this.showPropAnimClasses,b=this._getRootTD(),c=dojo.query(".propGroup",b),g,b=0;b<c.length;b++){var k=c[b];dojo.attr(k,
"propGroup")==h?(dojo.removeClass(k,"dijitHidden"),g=k):dojo.addClass(k,"dijitHidden")}c=dojo.query(".cssPropertySection",g);for(b=0;b<c.length;b++)this._addRemoveClasses(c[b],d,[]);d=dojo.query(".cssCascadeSection",g);for(b=0;b<d.length;b++)dojo.addClass(d[b],"cascadeRowHidden");this._currentPropSection=h;dojo.removeClass(dojo.byId("root"),"showingCascade")},_hideSectionShowRoot:function(){var h=this._getRootTD();dojo.removeClass(h,"dijitHidden")},_findRule:function(h){function d(b,c){for(var a=
0;a<b.cssRules.length;a++){var e=b.cssRules[a];if(3===e.type){if(e=d(e.styleSheet,c))return e}else if(e.selectorText==c)return{ss:b,ruleIndex:a}}}if(this.animSS&&"number"==typeof this.animRuleIndex[h]){var b=this.animRuleIndex[h];if(this.animSS.cssRules[b].selectorText==h)return{ss:this.animSS,ruleIndex:b}}for(b=0;b<document.styleSheets.length;b++){var c=d(document.styleSheets[b],h);if(c)return this.animSS=c.ss,this.animRuleIndex[h]=c.ruleIndex,c}return null},_addRemoveClasses:function(h,d,b){for(var c=
[],g=0;g<d.length;g++){for(var k=!1,a=0;a<b.length;a++)if(d[g]==b[a]){k=!0;break}k||c.push(d[g])}for(g=0;g<c.length;g++)dojo.removeClass(h,c[g]);for(g=0;g<b.length;g++)dojo.addClass(h,b[g])},_searchUpByTagClass:function(h,d,b){for(;null!=h&&"BODY"!=h.nodeName;){if(h.nodeName==d&&(!b||dojo.hasClass(h,b)))return h;h=h.parentNode}return null},_searchSiblingsByTagClass:function(h,d,b){for(;null!=h;){if(h.nodeName==d&&(!b||dojo.hasClass(h,b)))return h;h=h.nextSibling}return null},_getRootDetailsContainer:function(){this._rootDetailsContainer||
(this._rootDetailsContainer=dojo.query(this.animShowSectionClassSelector)[0]);return this._rootDetailsContainer},_getRootTD:function(){var h=this._getRootDetailsContainer();this._rootTD||(this._rootTD=dojo.query(".propPaletteRoot",h)[0]);return this._rootTD}});return k})},"dgrid/Editor":function(){define("dojo/_base/declare dojo/_base/lang dojo/Deferred dojo/dom-construct dojo/dom-class dojo/on dojo/has dojo/query ./Grid dojo/_base/sniff".split(" "),function(n,m,k,h,d,b,c,g,p){return n(null,{constructor:function(){this._editorInstances=
{};this._editorColumnListeners=[];this._editorCellListeners={};this._editorsPendingStartup=[]},postCreate:function(){var a=this;this.inherited(arguments);this.on(".dgrid-input:focusin",function(){a._focusedEditorCell=a.cell(this)});this._editorFocusoutHandle=b.pausable(this.domNode,".dgrid-input:focusout",function(){a._focusedEditorCell=null});this._listeners.push(this._editorFocusoutHandle)},insertRow:function(){this._editorRowListeners={};var a=this.inherited(arguments),b=this.row(a),c=this._editorCellListeners[a.id]=
this._editorCellListeners[a.id]||{},d;for(d in this._editorRowListeners)c[d]=this._editorRowListeners[d];this._editorRowListeners=null;(c=this._previouslyFocusedEditorCell)&&c.row.id===b.id&&this.edit(this.cell(b,c.column.id));return a},refresh:function(){for(var a in this._editorInstances){var b=this._editorInstances[a].domNode;b&&b.parentNode&&b.parentNode.removeChild(b)}this.inherited(arguments)},removeRow:function(a){var b=this,c=this._focusedEditorCell;c&&c.row.id===this.row(a).id&&(this._previouslyFocusedEditorCell=
c,this._editorFocusoutHandle.pause(),setTimeout(function(){b._editorFocusoutHandle.resume();b._previouslyFocusedEditorCell=null},0));if(this._editorCellListeners[a.id]){for(var d in this._editorCellListeners[a.id])this._editorCellListeners[a.id][d].remove();delete this._editorCellListeners[a.id]}for(c=this._alwaysOnWidgetColumns.length;c--;)if(d=(d=this.cell(a,this._alwaysOnWidgetColumns[c].id).element)&&(d.contents||d).widget)this._editorFocusoutHandle.pause(),d.destroyRecursive();return this.inherited(arguments)},
renderArray:function(){var a=this.inherited(arguments);a.length?this._startupPendingEditors():this._editorsPendingStartup=[];return a},_onNotification:function(){this.inherited(arguments);this._startupPendingEditors()},_destroyColumns:function(){this._editorStructureCleanup();this.inherited(arguments)},_editorStructureCleanup:function(){var a=this._editorInstances,b=this._editorColumnListeners;this._editTimer&&clearTimeout(this._editTimer);for(var c in a){var d=a[c];d.domNode&&d.destroyRecursive()}this._editorInstances=
{};for(a=b.length;a--;)b[a].remove();for(var g in this._editorCellListeners)for(c in this._editorCellListeners[g])this._editorCellListeners[g][c].remove();for(a=0;a<this._editorColumnListeners.length;a++)this._editorColumnListeners[a].remove();this._editorCellListeners={};this._editorColumnListeners=[];this._editorsPendingStartup=[]},_configColumns:function(){var a=this.inherited(arguments);this._alwaysOnWidgetColumns=[];for(var b=0,c=a.length;b<c;b++)a[b].editor&&this._configureEditorColumn(a[b]);
return a},_configureEditorColumn:function(a){var c=this,d=a.renderCell||this._defaultRenderCell,g=a.editOn,h="string"!==typeof a.editor;g?this._editorInstances[a.id]=this._createSharedEditor(a,d):h&&this._alwaysOnWidgetColumns.push(a);a.renderCell=g?function(e,h,k,m){if(!m||!m.alreadyHooked){var p=b(k,g,function(){c._activeOptions=m;c.edit(this)});if(c._editorRowListeners)c._editorRowListeners[a.id]=p;else{var n=c.row(e);c._editorCellListeners[n.element.id][a.id]=p}}return d.call(a,e,h,k,m)}:function(b,
e,g,k){if(!a.canEdit||a.canEdit(b,e))k=c._createEditor(a),k.object=b,c._showEditor(k,a,g,e),g[h?"widget":"input"]=k;else return d.call(a,b,e,g,k)}},edit:function(a){function b(a){c._activeCell=g;c._showEditor(n,d,g,p);c._editTimer=setTimeout(function(){n.focus&&n.focus();d._editorBlurHandle&&d._editorBlurHandle.resume();c._editTimer=null;a.resolve(n)},0)}var c=this,d,g,h,m,p,n,z;a.column||(a=this.cell(a));if(!a||!a.element)return null;d=a.column;m=d.field;g=a.element.contents||a.element;if(n=this._editorInstances[d.id]){if(this._activeCell!==
g){var y=a.row;p=(h=this.dirty&&this.dirty[y.id])&&m in h?h[m]:d.get?d.get(y.data):y.data[m];if(!d.canEdit||d.canEdit(a.row.data,p))return z=new k,a=n.domNode||n,a.offsetWidth?(a.blur(),setTimeout(function(){b(z)},0)):b(z),z.promise}}else if(d.editor&&(n=g.widget||g.input))return z=new k,n.focus&&n.focus(),z.resolve(n),z.promise;return null},refreshCell:function(a){var b=a.row.element.id,c=a.column.id;this._editorCellListeners[b]&&this._editorCellListeners[b][c]&&(this._editorCellListeners[b][c].remove(),
this._editorCellListeners[b][c]=null);return this.inherited(arguments)},_showEditor:function(a,b,c,g){var e=a.domNode;e||this._updateInputValue(a,g);c.innerHTML="";d.add(c,"dgrid-cell-editing");e&&b.editOn&&a.validate&&a.reset&&a.reset();c.appendChild(a.domNode||a);e&&!b.editOn?this._editorsPendingStartup.push([a,b,c,g]):this._startupEditor(a,b,c,g)},_startupEditor:function(a,c,d,g){a.domNode&&(a._started||a.startup(),a._dgridIgnoreChange=!0,a.set("value",g),setTimeout(function(){a._dgridIgnoreChange=
!1},0));a._dgridLastValue=g;this._activeCell&&(this._activeValue=g,b.emit(d,"dgrid-editor-show",{grid:this,cell:this.cell(d),column:c,editor:a,bubbles:!0,cancelable:!1}))},_startupPendingEditors:function(){for(var a=this._editorsPendingStartup,b=a.length;b--;)this._startupEditor.apply(this,a[b]);this._editorsPendingStartup=[]},_handleEditorChange:function(a,b){var c=a.target;"_dgridLastValue"in c&&-1<c.className.indexOf("dgrid-input")&&this._updatePropertyFromEditor(b||this.cell(c).column,c,a)},_createEditor:function(a){var d=
a.editor,g=a.editOn,k=this,p="string"!==typeof d&&d,n,v,x={};n=a.editorArgs||{};"function"===typeof n&&(n=n.call(this,a));p?(v=new p(n),n=v.focusNode||v.domNode,n.className+=" dgrid-input",v.on(g?"blur":"change",function(){v._dgridIgnoreChange||k._updatePropertyFromEditor(a,this,{type:"widget"})})):(this._hasInputListener||(this._hasInputListener=!0,this.on("change",function(a){k._handleEditorChange(a)})),"textarea"===d?p="textarea":(p="input",x.type=d),v=n=h.create(p,m.mixin(x,{className:"dgrid-input",
name:a.field,tabIndex:isNaN(a.tabIndex)?-1:a.tabIndex},n)),9>c("ie")&&(d="radio"===d||"checkbox"===d?b(v,"click",function(b){k._handleEditorChange(b,a)}):b(v,"change",function(b){k._handleEditorChange(b,a)}),g?this._editorColumnListeners.push(d):this._editorRowListeners?this._editorRowListeners[a.id]=d:this._editorCellListeners[this.row(object).element.id][a.id]=d));if(a.autoSelect){var A=v.focusNode||v;A.select&&b(A,"focus",function(){setTimeout(function(){A.select()},0)})}return v},_createSharedEditor:function(a){function e(){var a=
k._activeCell;v.blur();"function"===typeof k.focus&&setTimeout(function(){k.focus(a)},n&&9>c("ie")?15:0)}var g=this._createEditor(a),k=this,n=g.domNode,r=g.domNode||g,v=g.focusNode||r,x=n?function(){g.set("value",g._dgridLastValue)}:function(){k._updateInputValue(g,g._dgridLastValue);k._updatePropertyFromEditor(a,g)};this._editorColumnListeners.push(b(v,"keydown",function(b){b=b.keyCode||b.which;27===b?(x(),k._activeValue=g._dgridLastValue,e()):13===b&&!1!==a.dismissOnEnter&&e()}));(a._editorBlurHandle=
b.pausable(g,"blur",function(){var c=r.parentNode,e={alreadyHooked:!0},n=k.cell(r);b.emit(n.element,"dgrid-editor-hide",{grid:k,cell:n,column:a,editor:g,bubbles:!0,cancelable:!1});a._editorBlurHandle.pause();c.removeChild(r);n.row&&(d.remove(n.element,"dgrid-cell-editing"),h.empty(c),p.appendIfNode(c,a.renderCell(n.row.data,k._activeValue,c,k._activeOptions?m.delegate(e,k._activeOptions):e)));k._focusedEditorCell=k._activeCell=k._activeValue=k._activeOptions=null})).pause();this._editorColumnListeners.push(a._editorBlurHandle);
return g},_updatePropertyFromEditor:function(a,b,c){var d;if(!b.isValid||b.isValid())if(c=this._updateProperty((b.domNode||b).parentNode,this._activeCell?this._activeValue:b._dgridLastValue,this._retrieveEditorValue(a,b),c),this._activeCell?this._activeValue=c:b._dgridLastValue=c,"radio"===b.type&&b.name&&!a.editOn&&a.field)for(d in c=this.row(b),g("input[type\x3dradio][name\x3d"+b.name+"]",this.contentNode).forEach(function(c){var d=this.row(c);c!==b&&c._dgridLastValue&&(c._dgridLastValue=!1,this.updateDirty?
this.updateDirty(d.id,a.field,!1):d.data[a.field]=!1)},this),this.dirty)c.id.toString()!==d&&this.dirty[d][a.field]&&this.updateDirty(d,a.field,!1)},_updateProperty:function(a,c,d,g){var e=this;if((c&&c.valueOf())!==(d&&d.valueOf())){var h=this.cell(a),k=h.row,p=h.column;a=h.element;if(p.field&&k)if(h={grid:this,cell:h,oldValue:c,value:d,bubbles:!0,cancelable:!0},g&&g.type&&(h.parentType=g.type),b.emit(a,"dgrid-datachange",h))this.updateDirty?(this.updateDirty(k.id,p.field,d),p.autoSave&&setTimeout(function(){e._trackError("save")},
0)):k.data[p.field]=d;else{var m;(m=a.widget)?(m._dgridIgnoreChange=!0,m.set("value",c),setTimeout(function(){m._dgridIgnoreChange=!1},0)):(m=a.input)&&this._updateInputValue(m,c);return c}}return d},_updateInputValue:function(a,b){a.value=b;if("radio"===a.type||"checkbox"===a.type)a.checked=a.defaultChecked=!!b},_retrieveEditorValue:function(a,b){return"function"===typeof b.get?this._convertEditorValue(b.get("value")):this._convertEditorValue(b["checkbox"===b.type||"radio"===b.type?"checked":"value"])},
_convertEditorValue:function(a,b){"number"===typeof b?a=isNaN(a)?a:parseFloat(a):"boolean"===typeof b?a="true"===a?!0:"false"===a?!1:a:b instanceof Date&&(b=new Date(a),a=isNaN(b.getTime())?a:b);return a}})})},"dijit/a11y":function(){define("dojo/_base/array dojo/dom dojo/dom-attr dojo/dom-style dojo/_base/lang dojo/sniff ./main".split(" "),function(n,m,k,h,d,b,c){var g={_isElementShown:function(b){var a=h.get(b);return"hidden"!=a.visibility&&"collapsed"!=a.visibility&&"none"!=a.display&&"hidden"!=
k.get(b,"type")},hasDefaultTabStop:function(b){switch(b.nodeName.toLowerCase()){case "a":return k.has(b,"href");case "area":case "button":case "input":case "object":case "select":case "textarea":return!0;case "iframe":var a;try{var c=b.contentDocument;if("designMode"in c&&"on"==c.designMode)return!0;a=c.body}catch(q){try{a=b.contentWindow.document.body}catch(u){return!1}}return a&&("true"==a.contentEditable||a.firstChild&&"true"==a.firstChild.contentEditable);default:return"true"==b.contentEditable}},
effectiveTabIndex:function(b){if(!k.get(b,"disabled"))return k.has(b,"tabIndex")?+k.get(b,"tabIndex"):g.hasDefaultTabStop(b)?0:void 0},isTabNavigable:function(b){return 0<=g.effectiveTabIndex(b)},isFocusable:function(b){return-1<=g.effectiveTabIndex(b)},_getTabNavigable:function(c){function a(a){return a&&"input"==a.tagName.toLowerCase()&&a.type&&"radio"==a.type.toLowerCase()&&a.name&&a.name.toLowerCase()}function d(b){return A[a(b)]||b}var h,m,p,n,v,x,A={},z=g._isElementShown,y=g.effectiveTabIndex,
B=function(c){for(c=c.firstChild;c;c=c.nextSibling)if(!(1!=c.nodeType||9>=b("ie")&&"HTML"!==c.scopeName)&&z(c)){var d=y(c);if(0<=d){if(0==d)h||(h=c),m=c;else if(0<d){if(!p||d<n)n=d,p=c;if(!v||d>=x)x=d,v=c}d=a(c);k.get(c,"checked")&&d&&(A[d]=c)}"SELECT"!=c.nodeName.toUpperCase()&&B(c)}};z(c)&&B(c);return{first:d(h),last:d(m),lowest:d(p),highest:d(v)}},getFirstInTabbingOrder:function(b,a){b=g._getTabNavigable(m.byId(b,a));return b.lowest?b.lowest:b.first},getLastInTabbingOrder:function(b,a){b=g._getTabNavigable(m.byId(b,
a));return b.last?b.last:b.highest}};d.mixin(c,g);return g})},"xideve/xblox/ContainerInput":function(){define("dojo/_base/declare dojox/html/entities davinci/Runtime davinci/ve/input/SmartInput davinci/ve/metadata davinci/ve/widget davinci/commands/CompoundCommand davinci/ve/commands/ModifyCommand davinci/ve/commands/RemoveCommand davinci/ve/commands/AddCommand".split(" "),function(n,m,k,h,d,b,c,g,p,a){return n(h,{propertyName:null,childType:null,property:null,displayOnCreate:"true",format:"columns",
serialize:function(a,b,c){c=[];a=a.getChildren();for(var d=0;d<a.length;d++){var e=a[d];e.dijitWidget?c.push(e.attr("textContent"===this.propertyName?"innerHTML":this.propertyName)):c.push("")}c=this.serializeItems(c);b(c)},parse:function(a){return this.parseItems(a)},getChildType:function(a){this.childType||(this.childType=d.getAllowedChild(a)[0]);return this.childType},update:function(a,b){this.command=new c;for(var d=a.getChildren(),e=0;e<b.length;e++){var g=b[e].text;this.isHtmlSupported()&&"html"===
this.getFormat()&&(g=m.encode(g));if(e<d.length){var h=d[e];this._attr(h,this.propertyName,g)}else this._addChildOfTypeWithProperty(a,this.getChildType(a.type),this.propertyName,g)}if(0<b.length)for(e=b.length;e<d.length;e++)h=d[e],this._removeChild(h);this._addOrExecCommand()},_attr:function(a,b,c){var d={};d[b]=c;a=new g(a,d);this._addOrExecCommand(a)},_removeChild:function(a){a=new p(a);this._addOrExecCommand(a)},_addChildOfTypeWithProperty:function(c,d,g,h){var e={type:d,properties:{},context:this._getContext()};
e.properties[g]=h;var k;dojo.withDoc(this._getContext().getDocument(),function(){k=b.createWidget(e)},this);c=new a(k,c);this._addOrExecCommand(c)},_addOrExecCommand:function(a){this.command&&a?this.command.add(a):this._getContext().getCommandStack().execute(this.command||a)},_getContainer:function(a){for(;a;){if((a.isContainer||a.isLayoutContainer)&&"dojox.layout.ScrollPane"!=a.declaredClass)return a;a=b.getParent(a)}},_getEditor:function(){return k.currentEditor},_getContext:function(){var a=this._getEditor();
return a&&(a.getContext&&a.getContext()||a.context)}})})},"xblox/embedded":function(){define("dojo/_base/declare xide/types xblox/types/Types xide/factory xide/utils xide/mixins/ReloadMixin xide/mixins/EventedMixin xblox/model/logic/CaseBlock xblox/model/Block xblox/model/functions/CallBlock xblox/model/code/CallMethod xblox/model/code/RunScript xblox/model/code/RunBlock xblox/model/loops/ForBlock xblox/model/loops/WhileBlock xblox/model/variables/VariableAssignmentBlock xblox/model/logic/IfBlock xblox/model/logic/ElseIfBlock xblox/model/logic/SwitchBlock xblox/model/variables/VariableSwitch xblox/model/events/OnEvent xblox/model/events/OnKey xblox/model/logging/Log xblox/model/html/SetStyle xblox/model/html/SetCSS xblox/model/html/SetStyle xblox/manager/BlockManager xblox/factory/Blocks xdojo/has!xblox-ui?xblox/model/Block_UI".split(" "),
function(){Array.prototype.remove||(Array.prototype.remove=function(){for(var n,m=arguments,k=m.length,h;k&&this.length;){n=m[--k];if(null==this.indexOf)break;for(;-1!=(h=this.indexOf(n));)this.splice(h,1)}return this});Array.prototype.swap||(Array.prototype.swap=function(n,m){var k=this[n];this[n]=this[m];this[m]=k;return this});"function"!=typeof String.prototype.startsWith&&(String.prototype.startsWith=function(n){return this.substring(0,n.length)===n});"function"!=typeof String.prototype.endsWith&&
(String.prototype.endsWith=function(n){return this.substring(this.length-n.length,this.length)===n});Function.prototype.bind||(Function.prototype.bind=Function.prototype.bind||function(n){return dojo.hitch(n,this)})})},"dojo/errors/CancelError":function(){define(["./create"],function(n){return n("CancelError",null,null,{dojoType:"cancel"})})},"xide/mixins/_State":function(){define(["xdojo/declare"],function(n){return n("xide/mixins/_State",null,{getState:function(){return this.inherited(arguments)||
{}},setState:function(m){return this.inherited(arguments)}})})},"dstore/Tree":function(){define(["dojo/_base/declare"],function(n){return n(null,{constructor:function(){this.root=this},mayHaveChildren:function(m){return"hasChildren"in m?m.hasChildren:!0},getRootCollection:function(){return this.root.filter({parent:null})},getChildren:function(m){return this.root.filter({parent:this.getIdentity(m)})}})})},"davinci/ui/Dialog":function(){define("dojo/_base/declare dijit/form/Button dijit/Dialog dojo/dom-geometry dojo/dom-style dojo/_base/connect dojo/window dojo/parser davinci/_common".split(" "),
function(n,m,k,h,d,b,c,g,p){var a=n(k,{contentStyle:null,buildRendering:function(){this.inherited(arguments);dojo.addClass(this.domNode,"resizableDialog");dojo.addClass(this.domNode,"ui-widget-content");this.submitOnEnter&&dojo.addClass(this.domNode,"submitOnEnter")},_setContent:function(a,b){this.inherited(arguments);var c=dojo.doc.createElement("div");this.containerNode.appendChild(c);(c=dojo.query(".dijitDialogPaneContentArea",this.containerNode)[0])?dojo.connect(c,"onkeydown",this,"_onKeyDown"):
dojo.connect(this.domNode,"onkeydown",this,"_onKeyDown")},resize:function(a){if(a){var b=d.getComputedStyle(this.containerNode),b=h.getPadExtents(this.containerNode,b),c=a.w-b.w,e=a.h-b.h,e=e-h.getMarginBox(this.titleBar).h;a=dojo.query(".dijitDialogPaneContentArea",this.containerNode)[0];b=dojo.query(".dijitDialogPaneActionBar",this.containerNode)[0];e-=h.getMarginBox(b).h;c&&dojo.style(a,"width",c+"px");e&&dojo.style(a,"height",e+"px");dojo.forEach(this.getChildren(),dojo.hitch(this,function(a){a.resize&&
a.resize({w:c,h:e})}))}},show:function(){var a=this.inherited(arguments);if(this.contentStyle){if("object"==typeof this.contentStyle){var b={};this.contentStyle.width&&(b.w=parseInt(this.contentStyle.width));this.contentStyle.height&&(b.h=parseInt(this.contentStyle.height));var d=c.getBox(this.ownerDocument);d.w*=this.maxRatio;d.h*=this.maxRatio;b.h>d.h&&(h.position(this.containerNode),b.h=d.h);this.resize(b)}this._size();this._position();dojo.style(this.containerNode,"width","auto");dojo.style(this.containerNode,
"height","auto")}return a},_onKeyDown:function(a){var b=a.ctrlKey&&!dojo.isMac||dojo.isMac&&a.metaKey;a.which==dojo.keys.ENTER&&(b||this.submitOnEnter)&&(a=dojo.query("input[type\x3dsubmit]",this.containerNode),0<a.length&&(a=dijit.getEnclosingWidget(a[0]),b=document.createEvent("MouseEvents"),b.initMouseEvent("click",!0,!0,window,0,0,0,0,0,!1,!1,!1,!1,0,null),a._onClick(b)))}});a._timedDestroy=function(a,c){c&&c.forEach(b.disconnect);var d=b.connect(a,"onHide",function(){b.disconnect(d);a.destroyRecursive()});
a.hide()};a.showModal=function(c,d,g,h,k,m){var e=[];d={title:d,content:c,contentStyle:g,submitOnEnter:k};m&&(d.onShow=m);var p=new a(d);m=dojo.hitch(this,function(){var a=!1;h&&(a=h());a||this._timedDestroy(p,e)});e.push(b.connect(p,"onExecute",c,m));c.onExecute&&e.push(b.connect(c,"onExecute",c,m));e.push(b.connect(c,"onClose",dojo.hitch(this,function(){this._timedDestroy(p,e)})));e.push(b.connect(p,"onCancel",dojo.hitch(this,function(){this._timedDestroy(p,e)})));p.show();return p};a.showMessage=
function(a,b,c,d,g){return this.showDialog({title:a,content:b,style:c,okCallback:d,okLabel:null,hideCancel:!0})};a.showDialog=function(c){var d=c.title,e=c.content,h=c.style,k=c.okCallback,n=c.okLabel,x=c.hideCancel,A=c.submitOnEnter,z=c.extendLabels,y=c.extendCallbacks,B,C=[];c=document.createElement("div");var E=document.createElement("div");dojo.addClass(E,"dijitDialogPaneContentArea");c.appendChild(E);var F=document.createElement("div");dojo.addClass(F,"dijitDialogPaneActionBar");n=new m({label:n?
n:p.ok,type:"submit","class":"maqPrimaryButton"});F.appendChild(n.domNode);var G=dojo.hitch(this,function(){this._timedDestroy(B,C)});if(z&&y&&0<z.length&&z.length===y.length)for(n=0;n<z.length;n++){var D=function(a){if(y[a])y[a]();B.onCancel()}.bind(this,n);F.appendChild((new m({label:z[n],onClick:D,"class":"maqSecondaryButton"})).domNode)}x||F.appendChild((new m({label:p.cancel,onClick:function(){B.onCancel()},"class":"maqSecondaryButton"})).domNode);c.appendChild(F);B=new a({title:d,content:c,
contentStyle:h,submitOnEnter:A});dojo.isString(e)?(E.innerHTML=e,g.parse(E)):e.domNode?E.appendChild(e.domNode):E.appendChild(e);C.push(b.connect(B,"onExecute",dojo.hitch(this,function(){k&&k();G()})));C.push(b.connect(B,"onCancel",dojo.hitch(this,function(){G()})));B.show();return B};return a})},"xideve/views/OutlineView":function(){define("dcl/dcl dojo/_base/declare dojo/dom-class davinci/Workbench davinci/ui/widgets/OutlineTree xide/layout/ContentPane".split(" "),function(n,m,k,h,d,b){return n([b],
{declaredClass:"davinci.workbench.OutlineView",startup:function(){k.remove(this.domNode,"ui-widget-content")},reset:function(){this.outlineTree&&this.outlineTree.destroy();delete this.outlineProvider;delete this.outlineTree},constructor:function(b,d){this.subscribe("/davinci/ui/editorSelected",this.editorChanged);this.subscribe("/davinci/ui/context/pagerebuilt",this._pageRebuilt)},_getViewActions:function(){return[]},editorChanged:function(b){b=b.editor;if(this.currentEditor){if(this.currentEditor==
b)return;this.outlineTree&&this.outlineTree.destroy();delete this.outlineProvider;delete this.outlineTree}if(this.currentEditor=b)b.getOutline&&(this.outlineProvider=b.getOutline()),this.outlineProvider?(this.outlineProvider._outlineView=this,this.createTree()):this.containerNode.innerHTML="no outline aviable"},createTree:function(){this.outlineTree&&this.removeContent();this.popup&&this.popup.destroyRecursive();!this.outlineProvider&&this.currentEditor&&(this.outlineProvider=this.currentEditor.getOutline(),
this.outlineProvider._outlineView=this);this.outlineProvider&&this.outlineProvider.getModel&&(this.outlineModel=this.outlineProvider.getModel(this.currentEditor));var c={model:this.outlineModel,showRoot:this.outlineModel.showRoot,betweenThreshold:this.outlineModel.betweenThreshold,checkItemAcceptance:this.outlineModel.checkItemAcceptance,isMultiSelect:!0,persist:!1,style:"height:inherit;"};this.outlineProvider.getIconClass&&(c.getIconClass=this.outlineProvider.getIconClass);this.currentEditor.getContext&&
(c.context=this.currentEditor.getContext());this.outlineModel.dndController&&(c.dndController=this.outlineModel.dndController);this.outlineTree=new d(c);this.container=new b({style:"padding:0"});this.subcontainer=dojo.doc.createElement("div");this.subcontainer.id="dvOutlineSubcontainer";this.subcontainer.appendChild(this.outlineTree.domNode);this.container.domNode.appendChild(this.subcontainer);this.setContent(this.container);this.outlineTree.startup();this.outlineProvider&&(this.outlineProvider._tree=
this.outlineTree);c=this.outlineProvider.getActionsID&&this.outlineProvider.getActionsID()||"davinci.ui.outline";this.popup=h.createPopup({partID:c,domNode:this.outlineTree.domNode,openCallback:this.outlineTree.getMenuOpenCallback?this.outlineTree.getMenuOpenCallback():null})},_getViewContext:function(){return this.outlineProvider},selectionChanged:function(b){!this.publishing["/davinci/ui/selectionChanged"]&&b.length&&b[0].model&&this.outlineTree&&this.outlineTree.selectNode([b[0].model])},_pageRebuilt:function(){if(this.outlineTree){var b=
this.outlineTree.get("paths");this.createTree();this.outlineTree.set("paths",b)}},modelChanged:function(b){this.outlineModel&&this.outlineModel.refresh?this.outlineModel.refresh():this.outlineProvider&&this.outlineProvider.getStore&&(this.outlineModel.store=this.outlineProvider.getStore(),this.outlineModel.onChange(this.outlineProvider._rootItem))}})})},"xide/mixins/ReloadMixin":function(){define(["xdojo/declare","dcl/dcl","xide/types","xide/utils","xide/mixins/EventedMixin"],function(n,m,k,h,d){var b=
{_mergeFunctions:!0,_mergeMissingVariables:!0,isInstanceOf_:function(b){try{if(!!this instanceof b||this.isInstanceOf&&this.isInstanceOf(b))return!0;var c=h.getAt(this,"constructor._meta.bases",[]),d=b.prototype.declaredClass;return _.findWhere(c,function(a){return a==b||h.getAt(a,"superclass.declaredClass")===d||h.getAt(a,"prototype.declaredClass")===d})}catch(a){}return!1},mergeFunctions:function(b,d){for(var c in d)"constructor"!==c&&"inherited"!==c&&(_.isFunction(d[c])&&(b[c]=null,b[c]=d[c]),
_.isArray(d[c])&&null==b[c]&&(b[c]=d[c]))},onModuleReloaded:function(b){var c=b.newModule;if(c&&c.prototype&&!b._processed){var d=c.prototype,a=d.declaredClass,e=!1,k=this.declaredClass;a&&(a&&k&&(e=h.replaceAll("/",".",k)===h.replaceAll("/",".",a)),e?(this.mergeFunctions(this,d),this.onReloaded&&(b._processed=!0,this.onReloaded(c))):b.module&&h.replaceAll("//","/",b.module)===k&&this.mergeFunctions(this,d))}},initReload:function(){this.subscribe(k.EVENTS.ON_MODULE_RELOADED)}};n=n(null,b);n.Impl=
b;n.dcl=m(d.dcl,b);return n})},"xide/views/History":function(){define(["dcl/dcl","xide/utils"],function(n,m){return n(null,{declaredClass:"xide.views.History",duplicates:!1,_history:null,_index:0,constructor:function(k){this._history=[];m.mixin(this,k)},destroy:function(){delete this._history},set:function(k){this._history=k;this._index=this.length()},pop:function(){this._history.pop();this._index=this.length()},push:function(k){if(-1==this._history.indexOf(k)||!0===this.duplicates)this._history.push(k),
this._index=this.length()},length:function(){if(this._history)return this._history.length},getNext:function(){this._index+=1;var k=this._history[this._index]||"";this._index=Math.min(this.length(),this._index);return k},getPrev:function(){this._index=Math.max(0,this._index-1);return this._history[this._index]},remove:function(k){this._history&&this._history.remove(k);this._index=Math.min(this.length(),this._index)},getNow:function(){var k=Math.max(0,this._index-1);if(this._history)return this._history[k]},
setNow:function(k){this._history&&(this._history.remove(k),this._history.push(k))},indexOf:function(k){return this._history?this._history.indexOf(k):-1}})})},"xide/views/_ActionMixin":function(){define("dojo/_base/declare dojo/_base/lang xide/utils xide/types xide/Keyboard xaction/Action xide/mixins/EventedMixin".split(" "),function(n,m,k,h,d,b,c){m={createActionParameters:function(b,c,a,d,h,k,m,n,v,x,A){return{title:b,command:c,group:a,icon:d,handler:h,accelKey:k,keyCombo:m,keyProfile:n,keyTarget:v,
keyScope:x,mixin:A}},addAction:function(b,c){b=b||[];var a=this._emit("addAction",c);if(!1===a)return!1;_.isObject(a)&&k.mixin(c,a);b.push(c);return!0}};n=n("xide/views/_ActionMixin",[c,d],m);n.Implementation=m;n.createActionParameters=m.createActionParameters;return n})},"davinci/commands/CommandStack":function(){define(["dojo/_base/declare"],function(n){return n("davinci.commands.CommandStack",null,{constructor:function(m){this._context=m;this._undoStack=[];this._redoStack=[]},execute:function(m,
k){if(m&&(k=this._context&&"davinci.ve.themeEditor.Context"!=this._context.declaredClass?dojo.withDoc(this._context.getDocument(),"execute",m,[this._context,k]):m.execute(k),this._undoStack.push(m),this._redoStack=[],!k))this.onExecute(m,"execute")},undo:function(){if(this.canUndo()){var m=this._undoStack.pop();m._runDelegate?m._runDelegate.undoDelegate(m):this._context&&"davinci.ve.themeEditor.Context"!=this._context.declaredClass?dojo.withDoc(this._context.getDocument(),"undo",m):m.undo();this._redoStack.push(m);
this.onExecute(m,"undo")}},redo:function(){if(this.canRedo()){var m=this._redoStack.pop();m._runDelegate?m._runDelegate.redoDelegate(m):this._context&&"davinci.ve.themeEditor.Context"!=this._context.declaredClass?dojo.withDoc(this._context.getDocument(),"execute",m):m.execute();this._undoStack.push(m);this.onExecute(m,"redo")}},canUndo:function(){return 0<this._undoStack.length},canRedo:function(){return 0<this._redoStack.length},getUndoCount:function(){return this._undoStack.length},getRedoCount:function(){return this._redoStack.length},
clear:function(){this._undoStack=[];this._redoStack=[]},jump:function(m,k){var h=this.getUndoCount(),d=this.getRedoCount();if(m==h)return m;if(0>m||m>h+d)return-1;h=m-h;if(k)if(0>h)for(;0>h;)this._redoStack.push(this._undoStack.pop()),h++;else for(;0<h;)this._undoStack.push(this._redoStack.pop()),h--;else if(0>h)for(;0>h;)this.undo(),h++;else for(;0<h;)this.redo(),h--;return m},onExecute:function(m,k){},undoDelegate:function(m){},redoDelegate:function(m){}})})},"dojo/request/handlers":function(){define(["../json",
"../_base/kernel","../_base/array","../has","../selector/_loader"],function(n,m,k,h){function d(b){var a=g[b.options.handleAs];b.data=a?a(b):b.data||b.text;return b}h.add("activex","undefined"!==typeof ActiveXObject);h.add("dom-parser",function(b){return"DOMParser"in b});var b;if(h("activex")){var c=["Msxml2.DOMDocument.6.0","Msxml2.DOMDocument.4.0","MSXML2.DOMDocument.3.0","MSXML.DOMDocument"];b=function(b){var a=b.data;a&&h("dom-qsa2.1")&&!a.querySelectorAll&&h("dom-parser")&&(a=(new DOMParser).parseFromString(b.text,
"application/xml"));if(!a||!a.documentElement){var d=b.text;k.some(c,function(b){try{var c=new ActiveXObject(b);c.async=!1;c.loadXML(d);a=c}catch(w){return!1}return!0})}return a}}var g={javascript:function(b){return m.eval(b.text||"")},json:function(b){return n.parse(b.text||null)},xml:b};d.register=function(b,a){g[b]=a};return d})},"xideve/delite/Template":function(){define([],function(){return{create:function(n,m,k,h,d){return{dojoRoot:n,ibmRoot:m,contextClass:"xideve/delite/Context",baseUrl:n+
"/"+m,requireUrl:n+m+"/requirejs/require.js",jQueryUrl:n+"external/jquery-1.9.1.min.js",lodashUrl:n+"external/lodash.min.js",bodyStyle:{width:"100%",height:"100%",visibility:"visible",margin:"0"},bodyTheme:"superhero",templateVariables:{requireUrl:m+"/requirejs/require.js",jQueryUrl:n+"/external/jquery-1.9.1.min.js",lodashUrl:n+"/external/lodash.min.js",ibmRoot:m,offset:k,theme:h,baseUrl:n,appUrl:d}}}}})},"dojo/io-query":function(){define(["dojo/_base/lang"],function(n){var m={};return{objectToQuery:function(k){var h=
encodeURIComponent,d=[],b;for(b in k){var c=k[b];if(c!=m[b]){var g=h(b)+"\x3d";if(n.isArray(c))for(var p=0,a=c.length;p<a;++p)d.push(g+h(c[p]));else d.push(g+h(c))}}return d.join("\x26")},queryToObject:function(k){var h=decodeURIComponent;k=k.split("\x26");for(var d={},b,c,g=0,m=k.length;g<m;++g)if(c=k[g],c.length){var a=c.indexOf("\x3d");0>a?(b=h(c),c=""):(b=h(c.slice(0,a)),c=h(c.slice(a+1)));"string"==typeof d[b]&&(d[b]=[d[b]]);n.isArray(d[b])?d[b].push(c):d[b]=c}return d}}})},"dijit/form/_FormMixin":function(){define("dojo/_base/array dojo/_base/declare dojo/_base/kernel dojo/_base/lang dojo/on dojo/window".split(" "),
function(n,m,k,h,d,b){return m("dijit.form._FormMixin",null,{state:"",_getDescendantFormWidgets:function(b){var c=[];n.forEach(b||this.getChildren(),function(b){"value"in b?c.push(b):c=c.concat(this._getDescendantFormWidgets(b.getChildren()))},this);return c},reset:function(){n.forEach(this._getDescendantFormWidgets(),function(b){b.reset&&b.reset()})},validate:function(){var c=!1;return n.every(n.map(this._getDescendantFormWidgets(),function(d){d._hasBeenBlurred=!0;var g=d.disabled||!d.validate||
d.validate();g||c||(b.scrollIntoView(d.containerNode||d.domNode),d.focus(),c=!0);return g}),function(b){return b})},setValues:function(b){k.deprecated(this.declaredClass+"::setValues() is deprecated. Use set('value', val) instead.","","2.0");return this.set("value",b)},_setValueAttr:function(b){var c={};n.forEach(this._getDescendantFormWidgets(),function(a){a.name&&(c[a.name]||(c[a.name]=[])).push(a)});for(var d in c)if(c.hasOwnProperty(d)){var a=c[d],e=h.getObject(d,!1,b);void 0!==e&&(e=[].concat(e),
"boolean"==typeof a[0].checked?n.forEach(a,function(a){a.set("value",-1!=n.indexOf(e,a._get("value")))}):a[0].multiple?a[0].set("value",e):n.forEach(a,function(a,b){a.set("value",e[b])}))}},getValues:function(){k.deprecated(this.declaredClass+"::getValues() is deprecated. Use get('value') instead.","","2.0");return this.get("value")},_getValueAttr:function(){var b={};n.forEach(this._getDescendantFormWidgets(),function(c){var d=c.name;if(d&&!c.disabled){var a=c.get("value");"boolean"==typeof c.checked?
/Radio/.test(c.declaredClass)?!1!==a?h.setObject(d,a,b):(a=h.getObject(d,!1,b),void 0===a&&h.setObject(d,null,b)):(c=h.getObject(d,!1,b),c||(c=[],h.setObject(d,c,b)),!1!==a&&c.push(a)):(c=h.getObject(d,!1,b),"undefined"!=typeof c?h.isArray(c)?c.push(a):h.setObject(d,[c,a],b):h.setObject(d,a,b))}});return b},isValid:function(){return""==this.state},onValidStateChange:function(){},_getState:function(){var b=n.map(this._descendants,function(b){return b.get("state")||""});return 0<=n.indexOf(b,"Error")?
"Error":0<=n.indexOf(b,"Incomplete")?"Incomplete":""},disconnectChildren:function(){},connectChildren:function(b){this._descendants=this._getDescendantFormWidgets();n.forEach(this._descendants,function(b){b._started||b.startup()});b||this._onChildChange()},_onChildChange:function(b){b&&"state"!=b&&"disabled"!=b||this._set("state",this._getState());b&&"value"!=b&&"disabled"!=b&&"checked"!=b||(this._onChangeDelayTimer&&this._onChangeDelayTimer.remove(),this._onChangeDelayTimer=this.defer(function(){delete this._onChangeDelayTimer;
this._set("value",this.get("value"))},10))},startup:function(){this.inherited(arguments);this._descendants=this._getDescendantFormWidgets();this.value=this.get("value");this.state=this._getState();var b=this;this.own(d(this.containerNode,"attrmodified-state, attrmodified-disabled, attrmodified-value, attrmodified-checked",function(c){c.target!=b.domNode&&b._onChildChange(c.type.replace("attrmodified-",""))}));this.watch("state",function(b,c,a){this.onValidStateChange(""==a)})},destroy:function(){this.inherited(arguments)}})})},
"xide/utils/HexUtils":function(){define(["xide/utils","xide/types","dojo/json","xide/lodash"],function(n,m,k,h){function d(a){var b="";a=parseInt(a,16);65535>=a?b+=String.fromCharCode(a):1114111>=a?(a-=65536,b+=String.fromCharCode(55296|a>>10)+String.fromCharCode(56320|a&1023)):b+="hex2Char error: Code point out of range: "+c(a);return b}function b(a){var b="";65535>=a?b+=String.fromCharCode(a):1114111>=a?(a-=65536,b+=String.fromCharCode(55296|a>>10)+String.fromCharCode(56320|a&1023)):b+="dec2char error: Code point out of range: "+
c(a);return b}function c(a){return(a+0).toString(16).toUpperCase()}function g(a){return B[a>>4&15]+B[a&15]}function p(a){return a=a.replace(/0x([A-Fa-f0-9]{1,4})(\s)?/g,function(a,b){d(b);return d(b)})}function a(a){a=a.replace(/[Uu]\+10([A-Fa-f0-9]{4})/g,function(a,b){return d("10"+b)});return a=a.replace(/[Uu]\+([A-Fa-f0-9]{1,5})/g,function(a,b){return d(b)})}function e(a){return a=a.replace(/&#x([A-Fa-f0-9]{1,6});/g,function(a,b){return d(b)})}function q(a){return a=a.replace(/&#([0-9]{1,7});/g,
function(a,c){return b(c)})}function u(a){return a=a.replace(/0x([A-Fa-f0-9]{1,6})/g,function(a,b){return d(b)})}function w(a,b){b?(a=a.replace(/\\([A-Fa-f0-9]{1,6})(\s)?/g,function(a,b){return d(b)}),a=a.replace(/\\/g,"")):a=a.replace(/\\([A-Fa-f0-9]{2,6})(\s)?/g,function(a,b){return d(b)});return a}function r(a,b){a=a.replace(/\\u\{([A-Fa-f0-9]{1,})\}/g,function(a,b){return d(b)});a=a.replace(/\\U([A-Fa-f0-9]{8})/g,function(a,b){return d(b)});a=a.replace(/\\u([A-Fa-f0-9]{4})/g,function(a,b){return d(b)});
b&&(a=a.replace(/\\b/g,"\b"),a=a.replace(/\\t/g,"\t"),a=a.replace(/\\n/g,"\n"),a=a.replace(/\\v/g,"\v"),a=a.replace(/\\f/g,"\f"),a=a.replace(/\\r/g,"\r"),a=a.replace(/\\\'/g,"'"),a=a.replace(/\\\"/g,'"'),a=a.replace(/\\\\/g,"\\"));return a}function v(a){return a=a.replace(/((%[A-Fa-f0-9]{2})+)/g,function(a,d){a="";var e=0,g=0;d=d.split("%");for(var h=1;h<d.length;h++){var k=parseInt(d[h],16);switch(e){case 0:0<=k&&127>=k?a+=b(k):192<=k&&223>=k?(e=1,g=k&31):224<=k&&239>=k?(e=2,g=k&15):240<=k&&247>=
k?(e=3,g=k&7):a+="convertpEsc2Char: error "+c(k)+"! ";break;case 1:if(128>k||191<k)a+="convertpEsc2Char: error "+c(k)+"! ";e--;a+=b(g<<6|k-128);g=0;break;case 2:case 3:if(128>k||191<k)a+="convertpEsc2Char: error "+c(k)+"! ";g=g<<6|k-128;e--}}return a})}function x(a){var b={};return a=a.replace(/&([A-Za-z0-9]+);/g,function(a,c){return c in b?b[c]:a})}function A(a,c){"hex"==c?a=a.replace(/(\b[A-Fa-f0-9]{2,6}\b)/g,function(a,b){return d(b)}):"dec"==c?a=a.replace(/(\b[0-9]+\b)/g,function(a,c){return b(c)}):
"utf8"==c?a=a.replace(/(( [A-Fa-f0-9]{2})+)/g,function(a,b){return z(b)}):"utf16"==c&&(a=a.replace(/(( [A-Fa-f0-9]{1,6})+)/g,function(a,b){return y(b)}));return a}function z(a){var d="",e=0,g=0;a=a.replace(/^\s+/,"");a=a.replace(/\s+$/,"");if(0==a.length)return"";a=a.replace(/\s+/g," ");a=a.split(" ");for(var h=0;h<a.length;h++){var k=parseInt(a[h],16);switch(e){case 0:0<=k&&127>=k?d+=b(k):192<=k&&223>=k?(e=1,g=k&31):224<=k&&239>=k?(e=2,g=k&15):240<=k&&247>=k?(e=3,g=k&7):d+="convertUTF82Char: error1 "+
c(k)+"! ";break;case 1:if(128>k||191<k)d+="convertUTF82Char: error2 "+c(k)+"! ";e--;d+=b(g<<6|k-128);g=0;break;case 2:case 3:if(128>k||191<k)d+="convertUTF82Char: error3 "+c(k)+"! ";g=g<<6|k-128;e--}}return d.replace(/ $/,"")}function y(a){var d=0,e="";a=a.replace(/^\s+/,"");a=a.replace(/\s+$/,"");if(0==a.length)return null;a=a.replace(/\s+/g," ");a=a.split(" ");for(var g=0;g<a.length;g++){var h=parseInt(a[g],16);if(0>h||65535<h)e+="!Error in convertUTF162Char: unexpected value, b\x3d"+c(h)+"!";if(0!=
d)if(56320<=h&&57343>=h){e+=b(65536+(d-55296<<10)+(h-56320));d=0;continue}else e+="Error in convertUTF162Char: low surrogate expected, b\x3d"+c(h)+"!",d=0;55296<=h&&56319>=h?d=h:e+=b(h)}return e}var B="0123456789ABCDEF".split("");n.dec2hex4=function(a){return B[a>>12&15]+B[a>>8&15]+B[a>>4&15]+B[a&15]};n.dec2hex=c;n.dec2char=b;n.dec2hex2=g;n.convertUTF82Char=z;n.convertUTF162Char=y;n.convertUnicode2Char=a;n.convertCharStr2pEsc=function(a){var b="",d;d=0;for(var e="",h=0;h<a.length;h++){var k=a.charCodeAt(h);
if(0>k||65535<k)e+="Error in convertChar2CP: byte out of range "+c(k)+"!";if(0!=d)if(56320<=k&&57343>=k){e+=c(65536+(d-55296<<10)+(k-56320))+" ";d=0;continue}else e+="Error in convertChar2CP: surrogate out of range "+c(d)+"!",d=0;55296<=k&&56319>=k?d=k:e+=c(k)+" "}d=e.substring(0,e.length-1);if(0==a.length)return"";a=d.split(" ");for(d=0;d<a.length;d++)e=parseInt(a[d],16),b=32==e?b+"%20":65<=e&&90>=e?b+String.fromCharCode(e):97<=e&&122>=e?b+String.fromCharCode(e):48<=e&&57>=e?b+String.fromCharCode(e):
45==e||46==e||95==e||126==e?b+String.fromCharCode(e):127>=e?b+("%"+g(e)):2047>=e?b+("%"+g(192|e>>6&31)+"%"+g(128|e&63)):65535>=e?b+("%"+g(224|e>>12&15)+"%"+g(128|e>>6&63)+"%"+g(128|e&63)):1114111>=e?b+("%"+g(240|e>>18&7)+"%"+g(128|e>>12&63)+"%"+g(128|e>>6&63)+"%"+g(128|e&63)):b+("!Error "+c(e)+"!");return b};n.convertAllEscapes=function(b,c){b=a(b);b=p(b);b=u(b);b=e(b);b=q(b);b=r(b,!1);b=w(b,!1);b=v(b);b=x(b);return b=A(b,c)};var C="0123456789abcdef".split("");n.to_hex=function(a){for(var b="",c=
!0,d=32;0<d;){var d=d-4,e=a>>d&15;c&&0==e||(c=!1,b+=C[e])}return"0x"+(""==b?"0":b)};n.replaceHex=function(a){return h.isString(a)?a.replace(/x([0-9A-Fa-f]{2})/gmi,function(a,b){return String.fromCharCode(parseInt(b,16))}):a};var E=function(a,b){for(a=a.toString(16).toUpperCase();a.length<b;)a="0"+a;return a};n.stringToHex=function(a){for(var b="",c=0,d=a.length,e;c<d;c+=1)e=a.charCodeAt(c),b+=E(e.toString(16),2)+" ";return b};n.stringToBufferStr=function(a){for(var b=0,c=a.length,d,e=[];b<c;b+=1)d=
a.charCodeAt(b),e.push(d);return e.join(",")};n.stringToBuffer=function(a){for(var b=0,c=a.length,d,e=[];b<c;b+=1)d=a.charCodeAt(b),e.push(d);return e};n.bufferToHexString=function(a){a=-1!==a.indexOf(",")?a.split(","):[a];for(var b=[],c=0;c<a.length;c++)b.push(n.dec2hex2(a[c]));return b.join(" ")};n.bufferFromDecString=function(a){a=-1!==a.indexOf(",")?a.split(","):[a];for(var b=0;b<a.length;b++)a[b]=parseInt(a[b],10);return a};n.stringFromDecString=function(a){a=n.bufferFromDecString(a);for(var b=
"",c=0;c<a.length;c++)b+=String.fromCharCode(a[c]);return b};n.stringToHex2=function(a){for(var b="",c=0,d=a.length,e;c<d;c+=1)e=a.charCodeAt(c),b+=E(e.toString(16),2)+" ";return b};n.hexToString=function(a){a=a.split(" ");for(var b="",c=0,d=a.length,e;c<d;c+=1)e=String.fromCharCode(parseInt(a[c],16)),b+=e;return b};n.prettyHex=function(a){var b=Math.ceil(a.length/16),c=a.length%16||16,d=a.length.toString(16).length;6>d&&(d=6);for(var e="Offset";e.length<d;)e+=" ";var e="\u001b[36m"+e+"  ",g;for(g=
0;16>g;g++)e+=" "+E(g,2);e+="\u001b[0m\n";a.length&&(e+="\n");var h=0,k,m;for(g=0;g<b;g++){e+="\u001b[36m"+E(h,d)+"\u001b[0m  ";k=g===b-1?c:16;m=16-k;var p;for(p=0;p<k;p++)e+=" "+E(a[h],2),h++;for(p=0;p<m;p++)e+="   ";h-=k;e+="   ";for(p=0;p<k;p++)m=a[h],e+=31<m&&127>m||159<m?String.fromCharCode(m):".",h++;e+="\n"}return e};n.hexEncode=function(a,b){var c,d,e="";for(d=0;d<a.length;d++)c=a.charCodeAt(d).toString(16),e+=((null!==b?b:"000")+c).slice(-4);return e};n.markHex=function(a,b,c,d){b=b||"";
c=c||"";var e=""+a;a=/[^\x20-\x7E]/gim;a.exec(e);e.match(a);e.replace(a,function(a,d){d=n.hexEncode(a,"$");2==d.length&&(d=d.replace("$","$0"));d=d.toUpperCase();e=e.replace(a,b+d+c)});return e};return n})},"davinci/ve/widgets/Background":function(){define("dojo/_base/declare dojo/Deferred davinci/workbench/WidgetLite davinci/ve/widgets/ColorPickerFlat davinci/ve/widgets/ColorStore davinci/ve/widgets/MutableStore dijit/form/ComboBox davinci/ve/widgets/BackgroundDialog davinci/Workbench davinci/ve/utils/URLRewrite davinci/model/Path davinci/lang/ve dijit/lang/_common davinci/ve/utils/CssUtils davinci/ve/widgets/ColorPicker xide/views/_PanelDialog xide/utils".split(" "),
function(n,m,k,h,d,b,c,g,p,a,e,q,u,w,r,v,x){var A=0;return n("davinci.ve.widgets.Background",[k],{__id:0,data:null,buildRendering:function(){this.domNode=dojo.doc.createElement("div",{style:"width:100%"});this._textFieldId="davinci_ve_widgets_properties_border_generated"+A++;this._buttonId="davinci_ve_widgets_properties_border_generated"+A++;var a=dojo.create("div",{className:"bgPropButtonDiv",style:"float:right; width:28px;"});dojo.create("button",{innerHTML:"...",id:this._buttonId,className:"bgPropButton btn-info",
style:"font-size:1em;"},a);var e=38,g=this._colorswatch="true"==this.colorswatch;if(g){var e=56,k=dojo.doc.createElement("div");dojo.addClass(k,"colorPicker");this._selectedColor=dojo.doc.createElement("div");this._selectedColor.innerHTML="\x26nbsp;";dojo.addClass(this._selectedColor,"colorPickerSelected");dojo.addClass(this._selectedColor,"colorPickerSelectedSkinny");this._colorPickerFlat=new h({})}var e=dojo.create("div",{className:"bgPropComboDiv",style:"margin-right:"+e+"px;padding:1px 0;"}),
m=dojo.isArray(this.data)?this.data:[""],p=this.langObjVE=q;if(g){this._statics=["",davinci.ve.widgets.ColorPicker.divider,p.colorPicker,p.removeValue];this._run={};this.data?(this.data.push({value:davinci.ve.widgets.ColorPicker.divider}),this.data.push({value:langObj.removeValue,run:function(){this.set("value","")}})):(this.data=[{value:this._statics[0]}],this.data.push({value:this._statics[2],run:this._chooseColorValue}),this.data.push({value:this._statics[3],run:function(){this.set("value","")}}),
this.data.push({value:this._statics[1]}),this.data.push({value:"transparent"}),this.data.push({value:"black"}),this.data.push({value:"white"}),this.data.push({value:"red"}),this.data.push({value:"green"}),this.data.push({value:"blue"}));m=[];for(p=0;p<this.data.length;p++)m.push(this.data[p].value),this.data[p].run&&(this._run[this.data[p].value]=this.data[p].run);this._store=new d({values:m,noncolors:this._statics})}else this._store=new b({values:m});this._comboBox=new c({store:this._store,id:this._textFieldId,
style:"width:100%;"});e.appendChild(this._comboBox.domNode);this.domNode.appendChild(a);g&&(this.domNode.appendChild(k),dojo.connect(k,"onclick",dojo.hitch(this,function(a){dojo.stopEvent(a);this._chooseColorValue()})),k.appendChild(this._selectedColor),this._colorPickerFlat_comboBoxUpdateDueTo="colorSwatch");this.domNode.appendChild(e);"string"==typeof this.propname&&this._comboBox&&(davinci.ve._BackgroundWidgets||(davinci.ve._BackgroundWidgets={}),davinci.ve._BackgroundWidgets[this.propname]={propPaletteWidget:this,
comboBox:this._comboBox});this.inherited(arguments)},startup:function(){this.inherited(arguments);this._button=dojo.byId(this._buttonId);dojo.connect(this._button,"onclick",this,function(){var b=this._cascade&&this._cascade._widget&&this._cascade._widget.getContext?this._cascade._widget.getContext():null,c=new g({context:b}),d=dojo.hitch(this,function(c){b||(console.error("Background.js. no context"),b={});var d=b.cascadeBatch={},g=d.propList=[],h=d.actions={},k=d.deferreds={};d.askUserResponse=void 0;
if(!c.cancel){var p=davinci.ve._BackgroundWidgets,n;for(n in p){var q=p[n];if(q.bgdWidget){var d=q.bgdWidget.get("value"),r=q.propPaletteWidget.get("value");d!==r&&(g.push(n),h[n]=dojo.hitch(this,function(a,b){a.propPaletteWidget._comboBoxUpdateDueTo="backgroundDialog";a.propPaletteWidget.set("value",b)},q,d),k[n]=new m)}}n="background-image";q=p[n];c=w.buildBackgroundImage(c.bgddata);for(d=0;d<c.length;d++)r=c[d],a.containsUrl(r)&&!a.isAbsolute(r)&&((p=a.getUrl(r))&&(r="url('"+(new e(p)).toString()+
"')"),c[d]=r);d=0==c.length?"":c[c.length-1];r=q.propPaletteWidget.get("value");d!==r&&(q.propPaletteWidget._cascade&&(q.propPaletteWidget._cascade._valueArrayNew=c),g.push(n),h[n]=dojo.hitch(this,function(a,b){q.propPaletteWidget._comboBoxUpdateDueTo="backgroundDialog";q.propPaletteWidget.set("value",b)},q,d),k[n]=new m);for(d=0;d<g.length;d++)n=g[d],k[n].then(dojo.hitch(this,function(a){(a=g[a+1])?h[a].apply():delete b.cascadeBatch},d));0<g.length&&(n=g[0],h[n].apply())}return!0},c),h=davinci.ve._BackgroundWidgets,
k;for(k in h){var p=h[k].propPaletteWidget._cascade;p&&(p._valueArrayNew=p._valueArray)}c.set("baseLocation",this._baseLocation);(new v({onOk:function(){d()},onShow:function(a,b,d){x.addChild(b,c,!0);this.add(c,null,!1);this.startDfd.resolve();return[c]}})).show()});this.connect(this._comboBox,"onChange",dojo.hitch(this,function(a){a!=davinci.ve.widgets.ColorPicker.divider&&a!=this.langObjVE.colorPicker||this._comboBox.set("value",this.value);var b=this._comboBoxUpdateDueTo;this._comboBoxUpdateDueTo=
void 0;"setAttr"!=b&&this._onChange(a)}));this.connect(this._comboBox,"onFocus",dojo.hitch(this,function(a){a=davinci.ve._BackgroundWidgets;for(var b in a){var c=a[b].propPaletteWidget._cascade;c&&(c._valueArrayNew=void 0)}(b=this._cascade&&this._cascade._widget&&this._cascade._widget.getContext?this._cascade._widget.getContext():null)&&delete b.cascadeBatch}));this._maqStartupComplete=!0},_setBaseLocationAttr:function(a){this._baseLocation=a},_setValueAttr:function(a){var b=this._comboBox.get("value");
this._colorswatch&&dojo.style(this._selectedColor,"backgroundColor",a);a=dojo.isArray(a)?0<a.length?a[a.length-1]:"":a;b!==a&&("backgroundDialog"!==this._comboBoxUpdateDueTo&&"colorSwatch"!==this._comboBoxUpdateDueTo&&(this._comboBoxUpdateDueTo="setAttr"),this._comboBox.set("value",a))},_onChange:function(a){this._colorswatch&&"string"==typeof a&&(a in this._run?dojo.hitch(this,this._run[a])():a==davinci.ve.widgets.ColorPicker.divider?this._comboBox.set("value",this._store.getItemNumber(0)):dojo.style(this._selectedColor,
"backgroundColor",a));this.value=this._comboBox.get("value");this.onChange(a)},onChange:function(a){},_getValueAttr:function(){return this._comboBox.get("value")},_setReadOnlyAttr:function(a){this._maqStartupComplete&&(this._isReadOnly=a,this._comboBox.set("disabled",a),this._button.disabled=a)},_chooseColorValue:function(){if(!this._isReadOnly){var a=this._comboBox.get("value"),b=this.isLeftToRight();davinci.ve.widgets.ColorPickerFlat.show(this._colorPickerFlat,a,this,b)}}})})},"xide/types/Types":function(){define(["dojo/_base/lang",
"xide/types","dojo/_base/json","dojo/_base/kernel","xide/utils"],function(n,m,k,h,d){null==m.customTypes&&(m.customTypes={});null==m.customEnumerations&&(m.customEnumerations={});null==m.widgetMappings&&(m.widgetMappings={});null==m.customMimeIcons&&(m.customMimeIcons={});null==m.CICallbacks&&(m.CICallbacks={});m.resolveType=function(b){return m.customTypes[b]?m.customTypes[b]:null};m.registerType=function(b,c){m.customTypes[b]=c};m.registerWidgetMapping=function(b,c){m.widgetMappings[b]=c};m.registerEnumeration=
function(b,c){m.customEnumerations[b]=c};m.resolveEnumeration=function(b){return m.customEnumerations[b]?m.customEnumerations[b]:null};m.resolveWidgetMapping=function(b){return m.widgetMappings[b]?m.widgetMappings[b]:null};m.registerCICallbacks=function(b,c){m.CICallbacks[b]||(m.CICallbacks[b]={});d.mixin(m.CICallbacks[b],c);return null};m.getCICallbacks=function(b){return m.CICallbacks[b]?m.CICallbacks[b]:null};m.GRID_FEATURE={KEYBOARD_NAVIGATION:"KEYBOARD_NAVIGATION",KEYBOARD_SELECT:"KEYBOARD_SELECT",
SELECTION:"SELECTION",ACTIONS:"ACTIONS",CONTEXT_MENU:"CONTEXT_MENU"};m.VIEW_FEATURE={KEYBOARD_NAVIGATION:"KEYBOARD_NAVIGATION",KEYBOARD_SELECT:"KEYBOARD_SELECT",SELECTION:"SELECTION",ACTIONS:"ACTIONS",CONTEXT_MENU:"CONTEXT_MENU"};m.KEYBOARD_PROFILE={DEFAULT:{prevent_default:!0,prevent_repeat:!1},PASS_THROUGH:{prevent_default:!1,prevent_repeat:!1},SEQUENCE:{prevent_default:!0,is_sequence:!0,prevent_repeat:!0}};m.CI_STATE={NONE:0,PENDING:1,PROCESSING:2,FAILED:4,SUCCESSED:8,PROCESSED:16,DEQUEUED:32,
SOLVED:64,END:128};m.CIFLAG={NONE:0,BASE_64:1,USE_FUNCTION:2,REPLACE_VARIABLES:4,REPLACE_VARIABLES_EVALUATED:8,ESCAPE:16,REPLACE_BLOCK_CALLS:32,REMOVE_DELIMTTERS:64,ESCAPE_SPECIAL_CHARS:128,USE_REGEX:256,USE_FILTREX:512,CASCADE:1024,EXPRESSION:2048,DONT_PARSE:4096,TO_HEX:8192,REPLACE_HEX:16384,WAIT:32768,DONT_ESCAPE:65536,END:131072};m.CI_CORDER={};m.ECIType={BOOL:0,BOX:1,COLOUR:2,ENUMERATION:3,FILE:4,FLAGS:5,FLOAT:6,INTEGER:7,MATRIX:8,OBJECT:9,REFERENCE:10,QUATERNION:11,RECTANGLE:12,STRING:13,VECTOR:14,
VECTOR2D:15,VECTOR4D:16,ICON:17,IMAGE:18,BANNER:19,LOGO:20,STRUCTURE:21,BANNER2:22,ICON_SET:23,SCRIPT:24,EXPRESSION:25,RICHTEXT:26,ARGUMENT:27,JSON_DATA:28,EXPRESSION_EDITOR:29,WIDGET_REFERENCE:30,DOM_PROPERTIES:31,BLOCK_REFERENCE:32,BLOCK_SETTINGS:33,FILE_EDITOR:34,END:35,UNKNOWN:-1};m.ITEM_TYPE={FILE:"BTFILE",WIDGET:"WIDGET",BLOCK:"BLOCK",TEXT:"TEXT",EXPRESSION:"EXPRESSION"};m.EXPRESSION_PARSER||(m.EXPRESSION_PARSER={});m.COMPONENT_NAMES={XIDEVE:"xideve",XNODE:"xnode",XBLOX:"xblox",XFILE:"xfile",
XACE:"xace",XEXPRESSION:"xexpression",XCONSOLE:"xconsole",XTRACK:"xtrack"};m.WIDGET_REFERENCE_MODE={BY_ID:"byid",BY_CLASS:"byclass",BY_CSS:"bycss",BY_EXPRESSION:"expression"};m.VIEW_SPLIT_MODE={DESIGN:1,SOURCE:2,SPLIT_VERTICAL:6,SPLIT_HORIZONTAL:7};m.RESOURCE_VARIABLES={ACE:"ACE",APP_URL:"APP_URL",SITE_URL:"SITE_URL"};m.EVENTS={ERROR:"onError",STATUS:"onStatus",ON_CREATED_MANAGER:"onCreatedManager",ON_ITEM_SELECTED:"onItemSelected",ON_ITEM_REMOVED:"onItemRemoved",ON_ITEM_CLOSED:"onItemClosed",ON_ITEM_ADDED:"onItemAdded",
ON_ITEM_MODIFIED:"onItemModified",ON_NODE_SERVICE_STORE_READY:"onNodeServiceStoreReady",ON_FILE_STORE_READY:"onFileStoreReady",ON_CONTEXT_MENU_OPEN:"onContextMenuOpen",ON_CI_UPDATE:"onCIUpdate",ON_WIDGET_READY:"onWidgetReady",ON_CREATED_WIDGET:"onWidgetCreated",RESIZE:"onResize",ON_MODULE_RELOADED:"onModuleReloaded",ON_MODULE_UPDATED:"onModuleUpdated",ON_DID_OPEN_ITEM:"onDidOpenItem",ON_DID_RENDER_COLLECTION:"onDidRenderCollection",ON_PLUGIN_LOADED:"onPluginLoaded",ON_PLUGIN_READY:"onPluginReady",
ALL_PLUGINS_READY:"onAllPluginsReady",ON_CREATE_EDITOR_BEGIN:"onCreateEditorBegin",ON_CREATE_EDITOR_END:"onCreateEditorEnd",REGISTER_EDITOR:"registerEditor",ON_EXPRESSION_EDITOR_ADD_FUNCTIONS:"onExpressionEditorAddFunctions",ON_ACE_READY:"onACEReady",ON_UNSAVED_CONTENT:"onUnSavedContent",ON_FILE_CHANGED:"fileChanged",ON_FILE_DELETED:"fileDeleted",IMAGE_LOADED:"imageLoaded",IMAGE_ERROR:"imageError",UPLOAD_BEGIN:"uploadBegin",UPLOAD_PROGRESS:"uploadProgress",UPLOAD_FINISH:"uploadFinish",UPLOAD_FAILED:"uploadFailed",
ON_FILE_CONTENT_CHANGED:"onFileContentChanged",ON_COPY_BEGIN:"onCopyBegin",ON_COPY_END:"onCopyEnd",ON_DELETE_BEGIN:"onDeleteBegin",ON_DELETE_END:"onDeleteEnd",ON_MOVE_BEGIN:"onMoveBegin",ON_MOVE_END:"onMoveEnd",ON_CHANGED_CONTENT:"onChangedContent",ON_COMPRESS_BEGIN:"onCompressBegin",ON_COMPRESS_END:"onCompressEnd",ON_COMPONENT_READY:"onComponentReady",ON_ALL_COMPONENTS_LOADED:"onAllComponentsLoaded",ON_APP_READY:"onAppReady",ON_CREATE_STORE:"onCreateStore",ON_STORE_CREATED:"onStoreCreated",ON_STORE_CHANGED:"onStoreChanged",
ON_STATUS_MESSAGE:"onStatusMessage",SAVE_LAYOUT:"layoutSave",RESTORE_LAYOUT:"layoutRestore",ON_SHOW_PANEL:"onShowPanel",ON_PANEL_CLOSED:"onPanelClosed",ON_PANEL_CREATED:"onPanelCreated",ON_MAIN_VIEW_READY:"onMainViewReady",ON_MAIN_MENU_READY:"onMainMenuReady",ON_MAIN_MENU_OPEN:"onMainMenuOpen",ON_VIEW_REMOVED:"onViewRemoved",ON_VIEW_SHOW:"onViewShow",ON_VIEW_HIDE:"onViewHide",ON_VIEW_ADDED:"onViewAdded",ON_OPEN_VIEW:"onOpenView",ON_VIEW_MAXIMIZE_START:"onViewMaximizeStart",ON_VIEW_MAXIMIZE_END:"onViewMaximizeEnd",
ON_CONTAINER_ADDED:"onContainerAdded",ON_CONTAINER_REMOVED:"onContainerRemoved",ON_REMOVE_CONTAINER:"onRemoveContainer",ON_CONTAINER_REPLACED:"onContainerReplaced",ON_CONTAINER_SPLIT:"onContainerSplit",ON_RENDER_WELCOME_GRID_GROUP:"onRenderWelcomeGridGroup",ON_DND_SOURCE_OVER:"/dnd/source/over",ON_DND_START:"/dnd/start",ON_DND_DROP_BEFORE:"/dnd/drop/before",ON_DND_DROP:"/dnd/drop",ON_DND_CANCEL:"/dnd/cancel"};m.DIALOG_SIZE={SIZE_NORMAL:"size-normal",SIZE_SMALL:"size-small",SIZE_WIDE:"size-wide",SIZE_LARGE:"size-large"};
m.DIALOG_TYPE={DEFAULT:"type-default",INFO:"type-info",PRIMARY:"type-primary",SUCCESS:"type-success",WARNING:"type-warning",DANGER:"type-danger"};n.mixin(m,{LAYOUT_RIGHT_CENTER_BOTTOM:"LAYOUT_RIGHT_CENTER_BOTTOM",LAYOUT_CENTER_BOTTOM:"LAYOUT_CENTER_BOTTOM",LAYOUT_CENTER_RIGHT:"LAYOUT_CENTER_RIGHT",LAYOUT_LEFT_CENTER_RIGHT:"LAYOUT_LEFT_CENTER_RIGHT",LAYOUT_LEFT_CENTER_RIGHT_BOTTOM:"LAYOUT_LEFT_CENTER_RIGHT_BOTTOM"});h.fromJson=function(b,c){var d=null,h=!1;c=!0;try{d=eval("("+b+")")}catch(a){h=!0}if(h){h=
b.substring(b.indexOf("{"),b.lastIndexOf("}")+1);try{h&&(d=eval("("+h+")"))}catch(a){!1!==c&&console.error("error in json parsing! "+b);if(-1!==b.indexOf("error"))return{jsonrpc:"2.0",result:{error:{code:1,message:b,data:null}},id:0};throw Error(b);}}return d};return m})},"davinci/html/CSSModel":function(){define({shorthand:[["border","border-width border-style border-color border-top border-left border-right border-bottom".split(" ")],["border-width",["border-top-width","border-right-width","border-bottom-width",
"border-left-width"]],["border-style",["border-top-style","border-right-style","border-bottom-style","border-left-style"]],["border-color",["border-top-color","border-right-color","border-bottom-color","border-left-color"]],["border-bottom",["border-bottom-width","border-bottom-style","border-bottom-color"]],["border-top",["border-top-width","border-top-style","border-top-color"]],["border-left",["border-left-width","border-left-style","border-left-color"]],["border-right",["border-right-width","border-right-style",
"border-right-color"]],["font","font-size line-height font-weight font-style font-family line-height".split(" ")],["border-radius",["border-top-left-radius","border-top-right-radius","border-bottom-right-radius","border-bottom-left-radius"]],["-moz-border-radius",["-moz-border-radius-topleft","-moz-border-radius-topright","-moz-border-radius-bottomright","-moz-border-radius-bottomleft"]],["margin",["margin-top","margin-right","margin-bottom","margin-left"]],["padding",["padding-top","padding-right",
"padding-bottom","padding-left"]],["background",["background-color","background-image","background-repeat","background-position","background-attachment"]]]})},"dojo/selector/lite":function(){define(["../has","../_base/kernel"],function(n,m){var k=document.createElement("div"),h=k.matchesSelector||k.webkitMatchesSelector||k.mozMatchesSelector||k.msMatchesSelector||k.oMatchesSelector,d=k.querySelectorAll,b=/([^\s,](?:"(?:\\.|[^"])+"|'(?:\\.|[^'])+'|[^,])*)/g;n.add("dom-matches-selector",!!h);n.add("dom-qsa",
!!d);var c=function(b,h){if(a&&-1<b.indexOf(","))return a(b,h);var e=h?h.ownerDocument||h:m.doc||document,k=(d?/^([\w]*)#([\w\-]+$)|^(\.)([\w\-\*]+$)|^(\w+$)/:/^([\w]*)#([\w\-]+)(?:\s+(.*))?$|(?:^|(>|.+\s+))([\w\-\*]+)(\S*$)/).exec(b);h=h||e;if(k){if(k[2]){var n=m.byId?m.byId(k[2],e):e.getElementById(k[2]);if(!n||k[1]&&k[1]!=n.tagName.toLowerCase())return[];if(h!=e)for(b=n;b!=h;)if(b=b.parentNode,!b)return[];return k[3]?c(k[3],n):[n]}if(k[3]&&h.getElementsByClassName)return h.getElementsByClassName(k[4]);
if(k[5])if(n=h.getElementsByTagName(k[5]),k[4]||k[6])b=(k[4]||"")+k[6];else return n}if(d)return 1===h.nodeType&&"object"!==h.nodeName.toLowerCase()?g(h,b,h.querySelectorAll):h.querySelectorAll(b);n||(n=h.getElementsByTagName("*"));for(var k=[],e=0,q=n.length;e<q;e++){var x=n[e];1==x.nodeType&&p(x,b,h)&&k.push(x)}return k},g=function(a,c,d){var e=a,g=a.getAttribute("id"),h=g||"__dojo__",k=a.parentNode,m=/^\s*[+~]/.test(c);if(m&&!k)return[];g?h=h.replace(/'/g,"\\$\x26"):a.setAttribute("id",h);m&&k&&
(a=a.parentNode);c=c.match(b);for(k=0;k<c.length;k++)c[k]="[id\x3d'"+h+"'] "+c[k];c=c.join(",");try{return d.call(a,c)}finally{g||e.removeAttribute("id")}};if(!n("dom-matches-selector"))var p=function(){function a(a,b,c){var d=b.charAt(0);if('"'==d||"'"==d)b=b.slice(1,-1);b=b.replace(/\\/g,"");var e=m[c||""];return function(c){return(c=c.getAttribute(a))&&e(c,b)}}function b(a){return function(b,c){for(;(b=b.parentNode)!=c;)if(a(b,c))return!0}}function c(a){return function(b,c){b=b.parentNode;return a?
b!=c&&a(b,c):b==c}}function d(a,b){return a?function(c,d){return b(c)&&a(c,d)}:b}var g="div"==k.tagName?"toLowerCase":"toUpperCase",h={"":function(a){a=a[g]();return function(b){return b.tagName==a}},".":function(a){var b=" "+a+" ";return function(c){return-1<c.className.indexOf(a)&&-1<(" "+c.className+" ").indexOf(b)}},"#":function(a){return function(b){return b.id==a}}},m={"^\x3d":function(a,b){return 0==a.indexOf(b)},"*\x3d":function(a,b){return-1<a.indexOf(b)},"$\x3d":function(a,b){return a.substring(a.length-
b.length,a.length)==b},"~\x3d":function(a,b){return-1<(" "+a+" ").indexOf(" "+b+" ")},"|\x3d":function(a,b){return 0==(a+"-").indexOf(b+"-")},"\x3d":function(a,b){return a==b},"":function(a,b){return!0}},p={};return function(e,g,k){var m=p[g];if(!m){if(g.replace(/(?:\s*([> ])\s*)|(#|\.)?((?:\\.|[\w-])+)|\[\s*([\w-]+)\s*(.?=)?\s*("(?:\\.|[^"])+"|'(?:\\.|[^'])+'|(?:\\.|[^\]])*)\s*\]/g,function(e,g,k,p,n,q,r){p?m=d(m,h[k||""](p.replace(/\\/g,""))):g?m=(" "==g?b:c)(m):n&&(m=d(m,a(n,r,q)));return""}))throw Error("Syntax error in query");
if(!m)return!0;p[g]=m}return m(e,k)}}();if(!n("dom-qsa"))var a=function(a,d){for(var e=a.match(b),g=[],h=0;h<e.length;h++){a=new String(e[h].replace(/\s*$/,""));a.indexOf=escape;a=c(a,d);for(var k=0,m=a.length;k<m;k++){var p=a[k];g[p.sourceIndex]=p}}d=[];for(h in g)d.push(g[h]);return d};c.match=h?function(a,b,c){return c&&9!=c.nodeType?g(c,b,function(b){return h.call(a,b)}):h.call(a,b)}:p;return c})},"wcDocker/base":function(){define(["dcl/dcl","xide/utils"],function(n,m){return n(null,{_saveProp:function(k,
h){this["__"+k]=_.isFunction(this[k])?this[k]():this[k];h&&null!=this[k]&&this[k].apply&&this[k].apply(this,h)},_restoreProp:function(k,h){this["_"+k]&&(this["_"+k]=this["__"+k]);var d=this["__"+k];return!1!==h?_.isFunction(this[k])?this[k].apply(this,[d]):this[k]:d},debounce:function(k,h,d,b,c){return m.debounce(this,k,h,d,b,c)},getOptions:function(){return this._options||this.docker()._options||{}},option:function(k,h){return this.getOptions()[k]||h},__getClass:function(k){return this.getOptions()[k+
"Class"]},instanceOf:function(k,h){h=h||this;return!(!h||-1==h.declaredClass.indexOf(k))},docker:function(k){for(k=k||this._parent;k&&!k.instanceOf("wcDocker");)k=k._parent;return k},_parentByClass:function(k){var h=this._parent;if(_.isString(k))for(;h&&-1===h.declaredClass.indexOf(k);)h=h._parent;return h}})})},"dojo/domReady":function(){define(["./has"],function(n){function m(a){p.push(a);g&&k()}function k(){if(!a){for(a=!0;p.length;)try{p.shift()(d)}catch(v){}a=!1;m._onQEmpty()}}var h=function(){return this}(),
d=document,b={loaded:1,complete:1},c="string"!=typeof d.readyState,g=!!b[d.readyState],p=[],a;m.load=function(a,b,c){m(c)};m._Q=p;m._onQEmpty=function(){};c&&(d.readyState="loading");if(!g){var e=[],q=function(a){a=a||h.event;g||"readystatechange"==a.type&&!b[d.readyState]||(c&&(d.readyState="complete"),g=1,k())},u=function(a,b){a.addEventListener(b,q,!1);p.push(function(){a.removeEventListener(b,q,!1)})};if(!n("dom-addeventlistener")){var u=function(a,b){b="on"+b;a.attachEvent(b,q);p.push(function(){a.detachEvent(b,
q)})},w=d.createElement("div");try{w.doScroll&&null===h.frameElement&&e.push(function(){try{return w.doScroll("left"),1}catch(v){}})}catch(v){}}u(d,"DOMContentLoaded");u(h,"load");"onreadystatechange"in d?u(d,"readystatechange"):c||e.push(function(){return b[d.readyState]});if(e.length){var r=function(){if(!g){for(var a=e.length;a--;)if(e[a]()){q("poller");return}setTimeout(r,30)}};r()}}return m})},"xfile/xfile":function(){},"xide/data/Memory":function(){define(["dojo/_base/declare","dstore/Memory",
"xide/data/_Base"],function(n,m,k){return n("xide.data.Memory",[m,k],{silent:function(h){if(void 0===h)return this._ignoreChangeEvents;if(!0===h||!1===h&&h!==this._ignoreChangeEvents)this._ignoreChangeEvents=h},putSync:function(h){var d=this;(h=this.inherited(arguments))&&!h._store&&Object.defineProperty(h,"_store",{get:function(){return d}});return h}})})},"dgrid/extensions/ColumnResizer":function(){define("dojo/_base/declare dojo/on dojo/query dojo/_base/lang dojo/dom dojo/dom-construct dojo/dom-geometry dojo/has ../util/misc dojo/_base/html".split(" "),
function(n,m,k,h,d,b,c,g,p){function a(a){for(var b=a.length,c=b,d=a[0].length,e=Array(b);b--;)e[b]=Array(d);for(var g={},b=0;b<c;b++)for(var h=e[b],k=a[b],m=0,p=0;m<d;m++){var n=k[p],q;if("undefined"===typeof h[m]){h[m]=n.id;if(n.rowSpan&&1<n.rowSpan){q=e;for(var r=n.rowSpan,u=b,w=m,N=n.id,O=1;O<r;O++)q[u+O][w]=N}if(0<b&&n.colSpan&&1<n.colSpan)for(q=1;q<n.colSpan;q++)if(h[++m]=n.id,n.rowSpan&&1<n.rowSpan)for(var r=e,u=n.rowSpan,w=b,N=m,O=n.id,P=1;P<u;P++)r[w+P][N]=O;g[n.id]=a[0][m].id;p++}}return g}
function e(a,b,c,d,e){if(!(0>=c)){var g=a.columns[b],h;if(g&&(h={grid:a,columnId:b,width:c,bubbles:!0,cancelable:!0},d&&(h.parentType=d),!a._resizedColumns||m.emit(a.headerNode,"dgrid-columnresize",h)))return"auto"===c?delete g.width:(g.width=c,c+="px"),(d=a._columnSizes[b])?d.set("width",c):d=p.addCssRule("#"+p.escapeCssIdentifier(a.domNode.id)+" .dgrid-column-"+p.escapeCssIdentifier(b,"-"),"width: "+c+";"),a._columnSizes[b]=d,!1!==e&&a.resize(),!0}}var q,u=0,w={create:function(){q=b.create("div",
{className:"dgrid-column-resizer"})},destroy:function(){b.destroy(q);q=null},show:function(a){a=c.position(a.domNode,!0);q.style.top=a.y+"px";q.style.height=a.h+"px";document.body.appendChild(q)},move:function(a){q.style.left=a+"px"},hide:function(){q.parentNode.removeChild(q)}};return n("dgrid.ColumnResizer",null,{resizeNode:null,minWidth:40,adjustLastColumn:!0,_resizedColumns:!1,buildRendering:function(){this.inherited(arguments);u||w.create();u++},destroy:function(){this.inherited(arguments);for(var a in this._columnSizes)this._columnSizes[a].remove();
--u||w.destroy()},resizeColumnWidth:function(a,b){return e(this,a,b)},configStructure:function(){var a=this._oldColumnSizes=h.mixin({},this._columnSizes),b;this._resizedColumns=!1;this._columnSizes={};this.inherited(arguments);for(b in a)b in this._columnSizes||a[b].remove();delete this._oldColumnSizes},_configColumn:function(a){this.inherited(arguments);var b=a.id,c;"width"in a&&((c=this._oldColumnSizes[b])?c.set("width",a.width+"px"):c=p.addCssRule("#"+p.escapeCssIdentifier(this.domNode.id)+" .dgrid-column-"+
p.escapeCssIdentifier(b,"-"),"width: "+a.width+"px;"),this._columnSizes[b]=c)},renderHeader:function(){this.inherited(arguments);var c=this,d;if(this.columnSets&&this.columnSets.length)for(var e=this.columnSets.length;e--;)d=h.mixin(d||{},a(this.columnSets[e]));else this.subRows&&1<this.subRows.length&&(d=a(this.subRows));for(var e=k(".dgrid-cell",c.headerNode),n=e.length;n--;){var q=e[n],u=q.columnId,w=c.columns[u],C=q.childNodes;if(w&&!1!==w.resizable){w=b.create("div",{className:"dgrid-resize-header-container"});
for(q.contents=w;0<C.length;)w.appendChild(C[0]);C=b.create("div",{className:"dgrid-resize-handle resizeNode-"+p.escapeCssIdentifier(u,"-")},w);q.appendChild(w);C.columnId=d&&d[u]||u}}c.mouseMoveListen||(m(c.headerNode,".dgrid-resize-handle:mousedown"+(g("touch")?",.dgrid-resize-handle:touchstart":""),function(a){c._resizeMouseDown(a,this);c.mouseMoveListen.resume();c.mouseUpListen.resume()}),c._listeners.push(c.mouseMoveListen=m.pausable(document,"mousemove"+(g("touch")?",touchmove":""),p.throttleDelayed(function(a){c._updateResizerPosition(a)}))),
c._listeners.push(c.mouseUpListen=m.pausable(document,"mouseup"+(g("touch")?",touchend":""),function(a){c._resizeMouseUp(a);c.mouseMoveListen.pause();c.mouseUpListen.pause()})),c.mouseMoveListen.pause(),c.mouseUpListen.pause())},_resizeMouseDown:function(a,b){a.preventDefault();d.setSelectable(this.domNode,!1);this._startX=this._getResizeMouseLocation(a);this._targetCell=k(".dgrid-column-"+p.escapeCssIdentifier(b.columnId,"-"),this.headerNode)[0];this._updateResizerPosition(a);w.show(this)},_resizeMouseUp:function(a){var b=
this._columnSizes,c,g,h;this.adjustLastColumn&&(h=this.headerNode.clientWidth-1);this._resizedColumns||(c=k(".dgrid-cell",this.headerNode),this.columnSets&&this.columnSets.length?c=c.filter(function(a){return"0"===a.columnId.split("-")[0]&&!(a.columnId in b)}):this.subRows&&1<this.subRows.length&&(c=c.filter(function(a){return"0"===a.columnId.charAt(0)&&!(a.columnId in b)})),g=c.map(function(a){return a.offsetWidth}),c.forEach(function(a,b){e(this,a.columnId,g[b],null,!1)},this),this._resizedColumns=
!0);d.setSelectable(this.domNode,!0);c=this._targetCell;var m=this._getResizeMouseLocation(a)-this._startX,n=c.offsetWidth+m,q=this._getResizedColumnWidths(),r=q.totalWidth,q=q.lastColId,u=k(".dgrid-column-"+p.escapeCssIdentifier(q,"-"),this.headerNode)[0].offsetWidth;n<this.minWidth&&(n=this.minWidth);e(this,c.columnId,n,a.type)&&c.columnId!==q&&this.adjustLastColumn&&(r+m<h?e(this,q,"auto",a.type):u-m<=this.minWidth&&e(this,q,this.minWidth,a.type));w.hide();delete this._startX;delete this._targetCell},
_updateResizerPosition:function(a){if(this._targetCell){a=this._getResizeMouseLocation(a);var b=this._targetCell.offsetWidth,c=a;b+(a-this._startX)<this.minWidth&&(c=this._startX-(b-this.minWidth));w.move(c)}},_getResizeMouseLocation:function(a){var b=0;a.pageX?b=a.pageX:a.clientX&&(b=a.clientX+document.body.scrollLeft+document.documentElement.scrollLeft);return b},_getResizedColumnWidths:function(){var a=0,b=k((this.columnSets?".dgrid-column-set-cell ":"")+"tr:first-child .dgrid-cell",this.headerNode),
c=b.length;if(!c)return{};for(var d=b[c-1].columnId;c--;)a+=b[c].offsetWidth;return{totalWidth:a,lastColId:d}}})})},"davinci/actions/StickyNoteAction":function(){define("dojo/_base/declare ./Action ../Workbench davinci/commands/CompoundCommand ../ve/commands/AddCommand ../ve/commands/MoveCommand ../ve/commands/ResizeCommand ../ve/tools/CreateTool ../ve/widget ../ve/metadata".split(" "),function(n,m,k,h,d,b,c,g,p,a){return n("davinci.actions.StickyNoteAction",m,{run:function(e){var m=k.getOpenEditor();
if(e=davinci.ve.metadata.queryDescriptor("html.stickynote")){var n=dojo.clone(e);n.context=m.getContext();if(m&&m.getContext){var w=void 0;dojo.withDoc(m.getContext().getDocument(),function(){w=p.createWidget(n)});w&&(e=new h,m.getContext().getDocument(),m.getContext().getContainerNode(),e.add(new d(w,m.getContext().getContainerNode())),g.prototype.checkAddToCurrentState(e,w),e.add(new b(w,50,50)),w.isLayoutContainer&&e.add(new c(w,args.size&&args.size.w,args.size&&args.size.h)),m.getContext().getCommandStack().execute(e),
a.getSmartInput(w.type).then(function(a){a&&a.displayOnCreate?m.getContext().select(w,null,!0):m.getContext().select(w)}.bind(this)))}}},isEnabled:function(a){return(a=k.getOpenEditor())&&a.getContext}})})},"dgrid/util/has-css3":function(){define(["dojo/has"],function(n){function m(h,d){h=h.style;var b;if(d in h)return!0;d=d.slice(0,1).toUpperCase()+d.slice(1);for(b=k.length;b--;)if(k[b]+d in h)return k[b];return!1}var k=["ms","O","Moz","Webkit"];n.add("css-transitions",function(h,d,b){return m(b,
"transitionProperty")});n.add("css-transforms",function(h,d,b){return m(b,"transform")});n.add("css-transforms3d",function(h,d,b){return m(b,"perspective")});n.add("transitionend",function(){var h=n("css-transitions");return h?!0===h?"transitionend":{ms:"MSTransitionEnd",O:"oTransitionEnd",Moz:"transitionend",Webkit:"webkitTransitionEnd"}[h]:!1});return n})},"xace/views/_AceMultiDocs":function(){define(["dcl/dcl","xdojo/declare","module","xace/base_handler","xace/complete_util"],function(n,m,k,h,
d){function b(a,b,c,d){b=b.split(/[^a-zA-Z_0-9\$]+/);for(var e=0;e<b.length;e++){var g=b[e];g&&(Object.prototype.hasOwnProperty.call(c,g)?c[g]++:(c[g]=1,d[g]={}),d[g][a]=!0)}return c}function c(b){var c=p[b];if(c){for(var d in c)a[d]-=c[d],delete e[d][b],0===a[d]&&(delete a[d],delete e[d]);delete p[b]}}function g(c,d){p[c]||(8E5<d.size?delete p[c]:(p[c]=b(c,d,{},{}),b(c,d,a,e)))}var p={},a={},e={},q,u,w=k.exports=Object.create(h);w.handlesLanguage=function(a){return!0};w.handlesEditor=function(){return this.HANDLES_ANY};
w.getMaxFileSizeSupported=function(){return 1E6};w.onDocumentOpen=function(a,b,c,d){p[a]||g(a,b.getValue());d()};w.addDocument=function(a,b){p[a]||g(a,b)};w.onDocumentClose=function(a,b){c(a);a==q&&(u=null);b()};w.analyze=function(a,b,d,e){u&&this.path!==q&&(c(q),g(q,u),u=null);q=this.path;u=a;d()};w.complete=function(b,c,g,h,k){b=b.getSession().getLine(g.row);g=d.retrievePrecedingIdentifier(b,g.column,this.$getIdentifierRegex());var m=a;b=[];for(var p in m)b.push(p);p=d.findCompletions(g,b);var n=
this.path;p=p.filter(function(a){return!e[a][n]});p=p.slice(0,100);k(p.filter(function(a){return!a.match(/^[0-9$_\/]/)}).map(function(a){var b=(Object.keys(e[a])[0]||"[unknown]").split("/");return{name:a,value:a,icon:null,score:m[a],meta:b[b.length-1],priority:0,isGeneric:!0}}))};w.getCompletions=function(a,b,c,d,e){var g=null;w.complete(a,null,c,null,function(a){g=a});e(null,g)};n=n(null,{declaredClass:"xide.views._AceMultiDocs",didAddMCompleter:!1,multiFileCompleter:null,addFileCompleter:function(){var a=
null;this.didAddMCompleter||(this.multiFileCompleter=a=w,ace.require("ace/ext/language_tools").addCompleter(a),this.didAddMCompleter=!0);return a}});n.completer=w;return n})},"dojo/data/util/filter":function(){define(["../../_base/lang"],function(n){var m={};n.setObject("dojo.data.util.filter",m);m.patternToRegExp=function(k,h){for(var d="^",b=null,c=0;c<k.length;c++)switch(b=k.charAt(c),b){case "\\":d+=b;c++;d+=k.charAt(c);break;case "*":d+=".*";break;case "?":d+=".";break;case "$":case "^":case "/":case "+":case ".":case "|":case "(":case ")":case "{":case "}":case "[":case "]":d+=
"\\";default:d+=b}d+="$";return h?new RegExp(d,"mi"):new RegExp(d,"m")};return m})},"xgrid/Keyboard":function(){define("dojo/_base/declare dojo/aspect dojo/dom-class dojo/on dojo/_base/lang dojo/has dgrid/util/misc dojo/_base/sniff dcl/dcl".split(" "),function(n,m,k,h,d,b,c,g){function p(a){a.preventDefault()}var a={checkbox:1,radio:1,button:1},e=/\bdgrid-cell\b/,q=/\bdgrid-row\b/;b.add("dom-contains",function(a,b,c){return!!c.contains});var u=function(a,b,c){function d(a,b){return a[b+"All"]("[id]:not(.ui-state-disabled):not(.dgrid-content-parent):first")}
c=0>c;var e,g;a=b.row(a).element;a=$(a);if(a.length)if(e=b.up(b._focusedNode,1,!0),e=$(e.element),e.length)if(b=a.position().top,g=a.position().left,e=a,c){do e=e.prev("[id]");while(e.length&&!(e.position().top<b&&e.position().left<=g));e.is(".ui-state-disabled")&&(e=d(e,"next"))}else{do e=e.next("[id]");while(e.length&&!(e.position().top>b&&e.position().left>=g));e.is(".ui-state-disabled")&&(e=d(e,"prev"))}else e=a;return e},w={pageSkip:10,tabIndex:-1,keyMap:null,headerKeyMap:null,postMixInProperties:function(){this.inherited(arguments);
this.keyMap||(this.keyMap=d.mixin({},w.defaultKeyMap));this.headerKeyMap||(this.headerKeyMap=d.mixin({},w.defaultHeaderKeyMap))},postCreate:function(){function b(b){var c=b.target;return c.type&&(!a[c.type]||32===b.keyCode)}function d(a){function d(){g._focusedHeaderNode&&(g._focusedHeaderNode.tabIndex=-1);if(g.showHeader){if(k)for(var a=g.headerNode.getElementsByTagName("th"),b=0,c;c=a[b];++b){if(p.test(c.className)){g._focusedHeaderNode=r=c;break}}else g._focusedHeaderNode=r=g.headerNode;r&&(r.tabIndex=
g.tabIndex)}}var k=g.cellNavigation,p=k?e:q,n=a===g.headerNode,r=a;n?(d(),m.after(g,"renderHeader",d,!0)):m.after(g,"renderArray",function(b){var d=g._focusedNode||r;if(p.test(d.className)&&c.contains(a,d))return b;for(var e=a.getElementsByTagName("*"),h=0,k;k=e[h];++h)if(p.test(k.className)){d=g._focusedNode=k;break}d.tabIndex=g.tabIndex;return b});g._listeners.push(h(a,"mousedown",function(a){b(a)||g._focusOnNode(a.target,n,a)}));g._listeners.push(h(a,"keydown",function(a){if(!a.metaKey&&!a.altKey){var c=
g[n?"headerKeyMap":"keyMap"][a.keyCode];c&&!b(a)&&c.call(g,a)}}))}this.inherited(arguments);var g=this;this.tabableHeader&&(d(this.headerNode),h(this.headerNode,"dgrid-cellfocusin",function(){g.scrollTo({x:this.scrollLeft})}));d(this.contentNode);this._debouncedEnsureScroll=c.debounce(this._ensureScroll,this)},removeRow:function(a){if(!this._focusedNode)return this.inherited(arguments);var b=this,c=document.activeElement===this._focusedNode,d=this[this.cellNavigation?"cell":"row"](this._focusedNode);
if(!d)return console.error("no focus target"),this.inherited(arguments);var e=d.row||d,g;a=a.element||a;a===e.element&&((g=this.down(e,!0))&&g.element!==a||(g=this.up(e,!0)),this._removedFocus={active:c,rowId:e.id,columnId:d.column&&d.column.id,siblingId:g&&g.element!==a?g.id:void 0},setTimeout(function(){b._removedFocus&&b._restoreFocus(e.id)},0),this._focusedNode=null);this.inherited(arguments)},insertRow:function(){var a=this.inherited(arguments);this._removedFocus&&!this._removedFocus.wait&&this._restoreFocus(a);
return a},_restoreFocus:function(a){var b=this._removedFocus,c;if((a=(a=a&&this.row(a))&&a.element&&a.id===b.rowId?a:"undefined"!==typeof b.siblingId&&this.row(b.siblingId))&&a.element){if(!a.element.parentNode.parentNode){b.wait=!0;return}"undefined"!==typeof b.columnId&&(c=this.cell(a,b.columnId))&&c.element&&(a=c);b.active&&0!==a.element.offsetHeight?this._focusOnNode(a,!1,null):(k.add(a.element,"dgrid-focus"),a.element.tabIndex=this.tabIndex,this._focusedNode=a.element)}delete this._removedFocus},
addKeyHandler:function(a,b,c){return m.after(this[c?"headerKeyMap":"keyMap"],a,b,!0)},_ensureRowScroll:function(a){var b=this.getScrollPosition().y;b>a.offsetTop?this.scrollTo({y:a.offsetTop}):b+this.contentNode.offsetHeight<a.offsetTop+a.offsetHeight&&this.scrollTo({y:a.offsetTop-this.contentNode.offsetHeight+a.offsetHeight})},_ensureColumnScroll:function(a){var b=this.getScrollPosition().x,c=a.offsetLeft;if(b>c)this.scrollTo({x:c});else{var d=this.bodyNode.clientWidth;a=a.offsetWidth;var e=c+a;
b+d<e&&this.scrollTo({x:d>a?e-d:c})}},_ensureScroll:function(a,b){this.cellNavigation&&(this.columnSets||1<this.subRows.length)&&!b&&this._ensureRowScroll(a.row.element);this.bodyNode.clientWidth<this.contentNode.offsetWidth&&this._ensureColumnScroll(a.element)},_focusOnNode:function(a,b,c,g){var m="_focused"+(b?"Header":"")+"Node",p=this[m],n=this.cellNavigation?"cell":"row",r=this[n](a),u,v,w,x,z;if(a=r&&r.element){if(this.cellNavigation)for(u=a.getElementsByTagName("input"),z=0,w=u.length;z<w;z++)if(v=
u[z],(-1!==v.tabIndex||"_dgridLastValue"in v)&&!v.disabled){v.focus();x=!0;break}null!==c&&(c=d.mixin({grid:this},c),c.type&&(c.parentType=c.type),c.bubbles||(c.bubbles=!0));p&&(k.remove(p,"dgrid-focus"),p.removeAttribute("tabindex"),c&&(c[n]=this[n](p),h.emit(p,"dgrid-cellfocusout",c)));p=this[m]=a;c&&(c[n]=r);m=this.cellNavigation?e:q;!x&&m.test(a.className)&&(a.tabIndex=this.tabIndex,a.focus());k.add(a,"dgrid-focus");c&&!1!==g&&h.emit(p,"dgrid-cellfocusin",c);this._debouncedEnsureScroll(r,b)}},
focusHeader:function(a){this._focusOnNode(a||this._focusedHeaderNode,!0)},focus:function(a,b){(a=a||this._focusedNode)?this._focusOnNode(a,!1,null,b):this.contentNode.focus()}},r=w.moveFocusVertical=function(a,b){if(this.isThumbGrid){var c=u(a,this,b);if(c&&c.length){this._focusOnNode(c[0],!1,a);a.preventDefault();return}}var d=this.cellNavigation,c=this[d?"cell":"row"](a),e=d&&c.column.id,c=this.down(this._focusedNode,b,!0);d&&(c=this.cell(c,e));this._focusOnNode(c,!1,a);a.preventDefault()},v=w.moveFocusUp=
function(a){r.call(this,a,-1)},x=w.moveFocusDown=function(a){r.call(this,a,1)},A=w.moveFocusPageUp=function(a){r.call(this,a,-this.pageSkip)},z=w.moveFocusPageDown=function(a){r.call(this,a,this.pageSkip)},y=w.moveFocusHorizontal=function(a,b){if(this.cellNavigation||!0===this.isThumbGrid){var c=!this.row(a),d=this["_focused"+(c?"Header":"")+"Node"];1==this.isThumbGrid?(b=this.down(this._focusedNode,b,!0),this._focusOnNode(b,!1,a)):this._focusOnNode(this.right(d,b),c,a);a.preventDefault()}},B=w.moveFocusLeft=
function(a){y.call(this,a,-1)},C=w.moveFocusRight=function(a){y.call(this,a,1)},E=w.moveHeaderFocusEnd=function(a,b){var c;this.cellNavigation&&(c=this.headerNode.getElementsByTagName("th"),this._focusOnNode(c[b?0:c.length-1],!0,a));a.preventDefault()},F=w.moveHeaderFocusHome=function(a){E.call(this,a,!0)},G=w.moveFocusEnd=function(a,c){var e=this.cellNavigation,g=this.contentNode,h=g.scrollTop+(c?0:g.scrollHeight),g=g[c?"firstChild":"lastChild"];-1<g.className.indexOf("dgrid-extra")&&(g=g.previousSibling);
var k=-1<g.className.indexOf("dgrid-preload"),p=k?g[(c?"next":"previous")+"Sibling"]:g,n=p.offsetTop+(c?0:p.offsetHeight),q;if(k){for(;p&&0>p.className.indexOf("dgrid-row");)p=p[(c?"next":"previous")+"Sibling"];if(!p)return}!k||1>g.offsetHeight?(e&&(p=this.cell(p,this.cell(a).column.id)),this._focusOnNode(p,!1,a)):(b("dom-addeventlistener")||(a=d.mixin({},a)),q=m.after(this,"renderArray",function(b){var d=b[c?0:b.length-1];e&&(d=this.cell(d,this.cell(a).column.id));this._focusOnNode(d,!1,a);q.remove();
return b}));h===n&&a.preventDefault()},D=w.moveFocusHome=function(a){G.call(this,a,!0)};w.defaultKeyMap={32:p,33:A,34:z,35:G,36:D,37:B,38:v,39:C,40:x};w.defaultHeaderKeyMap={32:p,35:E,36:F,37:B,39:C};n=n(null,w);n.dcl=g(null,w);return n})},"dojo/Deferred":function(){define(["./has","./_base/lang","./errors/CancelError","./promise/Promise","./promise/instrumentation"],function(n,m,k,h,d){var b=Object.freeze||function(){},c=function(a,b,c,d,h){2===b&&e.instrumentRejected&&0===a.length&&e.instrumentRejected(c,
!1,d,h);for(h=0;h<a.length;h++)g(a[h],b,c,d)},g=function(b,c,d,g){var h=b[c],k=b.deferred;if(h)try{var m=h(d);if(0===c)"undefined"!==typeof m&&a(k,c,m);else{if(m&&"function"===typeof m.then){b.cancel=m.cancel;m.then(p(k,1),p(k,2),p(k,0));return}a(k,1,m)}}catch(z){"undefined"!==typeof logError?logError(z):console.error("error! ",z),a(k,2,z)}else a(k,c,d);2===c&&e.instrumentRejected&&e.instrumentRejected(d,!!h,g,k.promise)},p=function(b,c){return function(d){a(b,c,d)}},a=function(a,b,c){if(!a.isCanceled())switch(b){case 0:a.progress(c);
break;case 1:a.resolve(c);break;case 2:a.reject(c)}},e=function(a){var d=this.promise=new h,m=this,p,n,q,A=!1,z=[];Error.captureStackTrace&&(Error.captureStackTrace(m,e),Error.captureStackTrace(d,e));this.isResolved=d.isResolved=function(){return 1===p};this.isRejected=d.isRejected=function(){return 2===p};this.isFulfilled=d.isFulfilled=function(){return!!p};this.isCanceled=d.isCanceled=function(){return A};this.progress=function(a,b){if(p){if(!0===b)throw Error("This deferred has already been fulfilled.");
return d}c(z,0,a,null,m);return d};this.resolve=function(a,b){if(p){if(!0===b)throw Error("This deferred has already been fulfilled.");return d}c(z,p=1,n=a,null,m);z=null;return d};var y=this.reject=function(a,b){if(p){if(!0===b)throw Error("This deferred has already been fulfilled.");return d}Error.captureStackTrace&&Error.captureStackTrace(q={},y);c(z,p=2,n=a,q,m);z=null;return d};this.then=d.then=function(a,b,c){var h=[c,a,b];h.cancel=d.cancel;h.deferred=new e(function(a){return h.cancel&&h.cancel(a)});
p&&!z?g(h,p,n,q):z.push(h);return h.deferred.promise};this.cancel=d.cancel=function(b,c){if(!p){a&&(c=a(b),b="undefined"===typeof c?b:c);A=!0;if(!p)return"undefined"===typeof b&&(b=new k),y(b),b;if(2===p&&n===b)return b}else if(!0===c)throw Error("This deferred has already been fulfilled.");};b(d)};e.prototype.toString=function(){return"[object Deferred]"};d&&d(e);return e})},"wcDocker/layout":function(){define(["dcl/dcl","wcDocker/types"],function(n,m){return n(null,{declaredClass:"wcLayout",constructor:function(k,
h){this.$container=$(k);this._parent=h;this.$elem=null;this.__init()},addItem:function(k){},clear:function(){},scene:function(){return this.$elem},__init:function(){},__update:function(){},__checkAnchorDrop:function(k,h,d,b,c,g,p,a,e){function n(a,b,c){return"number"===typeof a||"string"===typeof a&&-1!==a.indexOf("px",a.length-2)?(a=parseInt(a),{x:a,y:a}):"string"===typeof a&&-1!==a.indexOf("%",a.length-1)?(a=parseInt(a)/100,{x:b*a,y:c*a}):{x:0,y:0}}var u=this._parent.docker(),w=c.outerWidth(),r=
c.outerHeight(),v=c.offset();c=c.find(".wcFrameTitleBar").height();g||(c=0);var x=n(u._options.edgeAnchorSize,u.$container.outerWidth(),u.$container.outerHeight()),A=n(u._options.panelAnchorSize,w,r);if(g){if((!a||a===m.TAB.TOP)&&k.y>=v.top&&k.y<=v.top+c&&k.x>=v.left&&k.x<=v.left+w)return d.anchor(k,{x:v.left-2,y:v.top-2,w:w,h:c-2,loc:m.DOCK.STACKED,tab:m.TAB.TOP,item:this,self:h===m.TAB.TOP||p&&h}),!0;if(u._canOrientTabs){if((!a||a===m.TAB.BOTTOM)&&k.y>=v.top+r-c&&k.y<=v.top+r&&k.x>=v.left&&k.x<=
v.left+w)return d.anchor(k,{x:v.left-2,y:v.top+r-c-2,w:w,h:c,loc:m.DOCK.STACKED,tab:m.TAB.BOTTOM,item:this,self:h===m.TAB.BOTTOM}),!0;if((!a||a===m.TAB.LEFT)&&k.y>=v.top&&k.y<=v.top+r&&k.x>=v.left&&k.x<=v.left+c)return d.anchor(k,{x:v.left-2,y:v.top-2,w:c-2,h:r,loc:m.DOCK.STACKED,tab:m.TAB.LEFT,item:this,self:h===m.TAB.LEFT}),!0;if((!a||a===m.TAB.RIGHT)&&k.y>=v.top&&k.y<=v.top+r&&k.x>=v.left+w-c&&k.x<=v.left+w)return d.anchor(k,{x:v.left+w-c-2,y:v.top-2,w:c,h:r,loc:m.DOCK.STACKED,tab:m.TAB.RIGHT,
item:this,self:h===m.TAB.RIGHT}),!0}}if(e&&d._outer&&d._inner){h=d._outer.$container.outerWidth();g=d._outer.$container.outerHeight();p=d._outer.$container.offset();if(k.y>=p.top&&k.y<=p.top+g&&k.x>=p.left+c&&k.x<=p.left+c+x.x)return d.anchor(k,{x:p.left-2,y:p.top-2,w:h/3,h:g,loc:m.DOCK.LEFT,item:d._inner,self:!1}),!0;if(k.y>=p.top&&k.y<=p.top+g&&k.x>=p.left+h-x.x-c&&k.x<=p.left+h-c)return d.anchor(k,{x:p.left+h-h/3-2,y:p.top-2,w:h/3,h:g,loc:m.DOCK.RIGHT,item:d._inner,self:!1}),!0;if(k.y>=p.top+c&&
k.y<=p.top+c+x.y&&k.x>=p.left&&k.x<=p.left+h)return d.anchor(k,{x:p.left-2,y:p.top-2,w:h,h:g/3,loc:m.DOCK.TOP,item:d._inner,self:!1}),!0;if(k.y>=p.top+g-c-x.y&&k.y<=p.top+g-c&&k.x>=p.left&&k.x<=p.left+h)return d.anchor(k,{x:p.left-2,y:p.top+g-g/3-2,w:h,h:g/3,loc:m.DOCK.BOTTOM,item:d._inner,self:!1}),!0}if(!b)return!1;if(this._parent&&this._parent.instanceOf("wcPanel")&&this._parent._isPlaceholder)return d.anchor(k,{x:v.left-2,y:v.top-2,w:w,h:r,loc:m.DOCK.TOP,item:this,self:!1}),!0;if(w<r){if(k.y>=
v.top&&k.y<=v.top+c+A.y&&k.x>=v.left&&k.x<=v.left+w)return d.anchor(k,{x:v.left-2,y:v.top-2,w:w,h:.5*r,loc:m.DOCK.TOP,item:this,self:!1}),!0;if(k.y>=v.top+r-A.y-c&&k.y<=v.top+r&&k.x>=v.left&&k.x<=v.left+w)return d.anchor(k,{x:v.left-2,y:v.top+(r-.5*r)-2,w:w,h:.5*r,loc:m.DOCK.BOTTOM,item:this,self:!1}),!0}if(k.y>=v.top&&k.y<=v.top+r){if(k.x>=v.left&&k.x<=v.left+A.x+c)return d.anchor(k,{x:v.left-2,y:v.top-2,w:.5*w,h:r,loc:m.DOCK.LEFT,item:this,self:!1}),!0;if(k.x>=v.left+w-A.x-c&&k.x<=v.left+w)return d.anchor(k,
{x:v.left+.5*w-2,y:v.top-2,w:.5*w,h:r,loc:m.DOCK.RIGHT,item:this,self:!1}),!0}if(w>=r){if(k.y>=v.top&&k.y<=v.top+A.y+c&&k.x>=v.left&&k.x<=v.left+w)return d.anchor(k,{x:v.left-2,y:v.top-2,w:w,h:.5*r,loc:m.DOCK.TOP,item:this,self:!1}),!0;if(k.y>=v.top+r-A.y-c&&k.y<=v.top+r&&k.x>=v.left&&k.x<=v.left+w)return d.anchor(k,{x:v.left-2,y:v.top+(r-.5*r)-2,w:w,h:.5*r,loc:m.DOCK.BOTTOM,item:this,self:!1}),!0}return!1},__container:function(k){if("undefined"===typeof k)return this.$container;(this.$container=
k)?this.$container.append(this.$elem):this.$elem.remove();return this.$container},__destroy:function(){this.__container(null);this._parent=null;this.clear();this.$elem.remove();this.$elem=null}})})},"xgrid/Search":function(){define(["xdojo/declare","xide/widgets/_Search","dojo/on","xide/Keyboard","xide/types"],function(n,m,k,h,d){return n("xgrid/Search",null,{_searchText:null,_search:null,runAction:function(b){b&&b.command==d.ACTION.SEARCH&&this._search&&(this._search.isHidden()?this._search.show("",
!1):this._search.hide());return this.inherited(arguments)},buildRendering:function(){this.inherited(arguments);var b=this,c=b.domNode.parentNode,g=new m({});g.find=function(){b._searchText=this.searchInput.value;b.set("collection",b.collection)};g.showSearchBox(c);g.show("",!1);g.hide();this._search=g;k(g.searchInput,"keydown",function(a){"Escape"===a.code&&(g.hide(),b.focus())});var p=h.defaultMapping(["ctrl f"],function(){g.show("",!1)},d.KEYBOARD_PROFILE.DEFAULT,b.domNode,b,null);this.registerKeyboardMapping(p);
this._on("onAddActions",function(a){var e=a.actions,g=a.permissions;action=d.ACTION.SEARCH;a.store.getSync(action)||(a=b.createAction("Search",action,d.ACTION_ICON.SEARCH,["ctrl f"],"Home","File","item|view",null,null,null,null,null,g,c,b))&&e.push(a)})},_setCollection:function(b){var c=this.inherited(arguments),d=this._searchText,h=this._renderedCollection;if(h&&d){var a=new h.Filter,d=new RegExp(d,"i"),e=this.columns,k=[],m;for(m in e)e.hasOwnProperty(m)&&k.push(a.match(e[m].searchText||e[m].field,
d));a=a.or.apply(a,k);this._renderedCollection=h.filter(a);this.refresh()}return c}})})},"davinci/_Workbench_Palette":function(){define(["dcl/dcl","davinci/Runtime"],function(n,m){var k={};return n(null,{declaredClass:"davinci.Workbench_Menu",_rearrangePalettes:function(h){var d,b,c;h?((b=m.getExtensions("davinci.editor",function(b){return h?b.id===h.editorID:!1}))&&0<b.length&&(d=b[0].palettePerspective),b=h._rightPaletteExpanded,c=h._leftPaletteExpanded):d=m.initialPerspective||"davinci.ui.main";
d&&((d=m.getExtension("davinci.perspective",d))||console.error("---error"),dojo.forEach(d.views,function(b){var c=b.viewID,a=b.position;0>a.indexOf("bottom")&&(a+="-top");if(c=dijit.byId(c)){var d=c.getParent(),a=mainBody.tabs.perspective[a];d!=a&&(d&&d.removeChild(c),b.hidden||(a.addChild(c),d=a));d&&(b.hidden?d.removeChild(c):b.selected&&(d._maqDontExpandCollapse=!0,d.selectChild(c),delete d._maqDontExpandCollapse))}}));h&&(h.hasOwnProperty("_rightPaletteExpanded")&&(h._rightPaletteExpanded=b),
h.hasOwnProperty("_leftPaletteExpanded")&&(h._leftPaletteExpanded=c))},_nearlyCollapsed:function(h){h=dojo.style(h,"width");"string"==typeof h&&(h=parseInt(h));return 91>h},_expandCollapsePaletteContainer:function(h){if(h&&h.domNode&&(h=davinci.Workbench.findPaletteContainerNode(h.domNode),h.id)){var d=h._maqExpanded,b;this._nearlyCollapsed(h)&&(d=!1,b=91<=k[h.id].expandToSize?k[h.id].expandToSize:k[h.id].initialExpandToSize);d?this.collapsePaletteContainer(h):this.expandPaletteContainer(h,{expandToSize:b})}},
_expandCollapsePaletteContainers:function(h,d){var b=dijit.byId("left_mainBody"),c=dijit.byId("right_mainBody");if(h){var g=m.getExtensions("davinci.editor",function(a){return a.id===h.editorID});if(g&&0<g.length){var g=g[0].expandPalettes,k;b&&((k=h&&h.hasOwnProperty("_leftPaletteExpanded")?h._leftPaletteExpanded:g&&0<=g.indexOf("left"))?this.expandPaletteContainer(b.domNode,d):this.collapsePaletteContainer(b.domNode,d));c&&((k=h&&h.hasOwnProperty("_rightPaletteExpanded")?h._rightPaletteExpanded:
g&&0<=g.indexOf("right"))?this.expandPaletteContainer(c.domNode,d):this.collapsePaletteContainer(c.domNode,d))}}else b&&this.collapsePaletteContainer(b.domNode,d),c&&this.collapsePaletteContainer(c.domNode,d)},findPaletteContainerNode:function(h){for(var d;h&&"BODY"!=h.tagName;){if(dojo.hasClass(h,"davinciPaletteContainer")){d=h;break}h=h.parentNode}return d},collapsePaletteContainer:function(h,d){if((h=davinci.Workbench.findPaletteContainerNode(h))&&h.id){var b=h.id,c=dojo.style(h,"width"),g=dijit.byNode(h),
p=dojo.query("[role\x3dtablist]",h);if(g&&0<p.length){var p=dojo.marginBox(p[0]),a=g.getParent();a&&a.resize&&p&&p.w&&(this._nearlyCollapsed(h)||d&&d.dontPreserveWidth||(k[b].expandToSize=c),h.style.width=p.w+"px",a.resize(),g._isCollapsed=!0)}dojo.removeClass(h,"maqPaletteExpanded");h._maqExpanded=!1;davinci.Workbench._repositionFocusContainer();if(d=m.currentEditor)"left_mainBody"==h.id?d._leftPaletteExpanded=!1:"right_mainBody"==h.id&&(d._rightPaletteExpanded=!1)}},expandPaletteContainer:function(h,
d){d=d&&d.expandToSize;if((h=davinci.Workbench.findPaletteContainerNode(h))&&h.id){var b=h.id,c=dijit.byNode(h);d&&(k[b].expandToSize=d);c&&k[b].expandToSize&&(d=c.getParent())&&d.resize&&(h.style.width=k[b].expandToSize+"px",d.resize(),delete c._isCollapsed);dojo.addClass(h,"maqPaletteExpanded");h._maqExpanded=!0;davinci.Workbench._repositionFocusContainer();if(d=m.currentEditor)"left_mainBody"==h.id?d._leftPaletteExpanded=!0:"right_mainBody"==h.id&&(d._rightPaletteExpanded=!0)}}})})},"dijit/form/Textarea":function(){define(["dojo/_base/declare",
"dojo/dom-style","./SimpleTextarea"],function(n,m,k){return n("dijit.form.Textarea",[k],{baseClass:"dijitTextBox dijitTextArea dijitExpandingTextArea",cols:"",buildRendering:function(){this.inherited(arguments);m.set(this.textbox,{overflowY:"hidden",overflowX:"auto",boxSizing:"border-box",MsBoxSizing:"border-box",WebkitBoxSizing:"border-box",MozBoxSizing:"border-box"})}})})},"davinci/ve/Snap":function(){define(["davinci/ve/utils/GeomUtils"],function(n){dojo.getObject("davinci.ve.Snap",!0);return davinci.ve.Snap=
{updateSnapLinesBeforeTraversal:function(m,k){m._snapX=null;m._snapY=null;if(m._lastSnapBox&&m._lastSnapBox.l==k.l&&m._lastSnapBox.t==k.t&&m._lastSnapBox.w==k.w&&m._lastSnapBox.h==k.h)return!1;snapBox={l:k.l,t:k.t,w:k.w,h:k.h,c:k.l+k.w/2,r:k.l+k.w,m:k.t+k.h/2,b:k.t+k.h};m._lastSnapBox=snapBox;return!0},findSnapOpportunities:function(m,k,h,d,b){function c(a,b,c,d){d<q&&(m._snapX={type:a,typeRefObj:a,typeCurrObj:b,x:c,widget:k,delta:d},q=d,m._snapXLast=m._snapX)}function g(a,b,c,d){d<u&&(m._snapY={type:a,
typeRefObj:a,typeCurrObj:b,y:c,widget:k,delta:d},u=d,m._snapYLast=m._snapY)}h=m._lastSnapBox;var p=k.domNode;if("BODY"!=p.tagName){var a=null,e=k.getHelper(),a=e&&e.getMarginBoxPageCoords?e.getMarginBoxPageCoords(k):n.getMarginBoxPageCoordsCached(p);m.getScrollOffset();a.x=a.l;a.y=a.t;var q=m._snapX?m._snapX.delta:6,u=m._snapY?m._snapY.delta:6,p={snapRect:{l:a.x,c:a.x+a.w/2,r:a.x+a.w,t:a.y,m:a.y+a.h/2,b:a.y+a.h}};e&&e.getSnapInfo&&(p=e.getSnapInfo(k,p));var e=p.snapRect,w;if(e){if(d){d=m._snapXLast&&
m._snapXLast.widget===k?Infinity:75;a=Math.abs(e.t-h.b);w=Math.abs(e.b-h.t);var r=Math.abs(e.b-h.b);if(Math.abs(e.t-h.t)<=d||a<=d||w<=d||r<=d)d=Math.abs(e.l-h.l),a=Math.abs(e.c-h.c),w=Math.abs(e.r-h.r),c("left","left",e.l,d),c("center","center",e.c,a),c("right","right",e.r,w),c("left","center",e.c,Math.abs(e.c-h.l)),c("left","right",e.r,Math.abs(e.r-h.l)),c("right","left",e.l,Math.abs(e.l-h.r)),c("right","center",e.c,Math.abs(e.c-h.r)),c("center","left",e.l,Math.abs(e.l-h.c)),c("center","right",e.r,
Math.abs(e.r-h.c))}b&&(b=m._snapYLast&&m._snapYLast.widget===k?Infinity:75,d=Math.abs(e.l-h.r),a=Math.abs(e.r-h.l),w=Math.abs(e.r-h.r),Math.abs(e.l-h.l)<=b||d<=b||a<=b||w<=b)&&(d=Math.abs(e.t-h.t),a=Math.abs(e.m-h.m),w=Math.abs(e.b-h.b),g("top","top",e.t,d),g("middle","middle",e.m,a),g("bottom","bottom",e.b,w),g("top","middle",e.m,Math.abs(e.m-h.t)),g("top","bottom",e.b,Math.abs(e.b-h.t)),g("bottom","top",e.t,Math.abs(e.t-h.b)),g("bottom","middle",e.m,Math.abs(e.m-h.b)),g("middle","top",e.t,Math.abs(e.t-
h.m)),g("middle","bottom",e.b,Math.abs(e.b-h.m)))}if(p=p.snapPoints)for(e=0;e<p.length;e++)b=p[e],d=Math.abs(b.x-h.l),a=Math.abs(b.x-h.c),w=Math.abs(b.x-h.r),c("point",b.x,d),c("point",b.x,a),c("point",b.x,w),d=Math.abs(b.y-h.t),a=Math.abs(b.y-h.m),w=Math.abs(b.y-h.b),g("point",b.y,d),g("point",b.y,a),g("point",b.y,w)}},updateSnapLinesAfterTraversal:function(m){function k(b,a,c,g){c.style.display="block";g.style.display="block";d=(g=a.getHelper())&&g.getMarginBoxPageCoords?g.getMarginBoxPageCoords(a):
n.getMarginBoxPageCoordsCached(a.domNode);b.getScrollOffset();d.x=d.l;d.y=d.t;d.r=d.x+d.w;d.b=d.y+d.h;d.c=d.x+d.w/2;d.m=d.y+d.h/2;c.style.left=d.x+"px";c.style.top=d.y+"px";c.style.width=d.w+"px";c.style.height=d.h+"px";c.style.backgroundColor="rgba(255,0,255,.05)"}var h=m.getContainerNode();m._snapLinesDiv||(m._snapLinesDiv=dojo.create("div",{"class":"snaplines",style:"position:absolute;top:0px;left:0px;z-index:1000001;pointer-events:none;"},h),m._snapLinesDivWidgetX=dojo.create("div",{"class":"snaplinesWidgetX",
style:"position:absolute;pointer-events:none;"},m._snapLinesDiv),m._snapLinesDivAlignX=dojo.create("div",{"class":"snaplinesAlignX",style:"position:absolute;pointer-events:none;"},m._snapLinesDiv),m._snapLinesDivWidgetY=dojo.create("div",{"class":"snaplinesWidgetY",style:"position:absolute;pointer-events:none;"},m._snapLinesDiv),m._snapLinesDivAlignY=dojo.create("div",{"class":"snaplinesAlignY",style:"position:absolute;pointer-events:none;"},m._snapLinesDiv));m._snapLinesDiv.style.display="block";
var d,h=m._snapLinesDivAlignX.style,b=m._snapLinesDivWidgetX.style;if(m._snapX){b=m._snapX;k(m,b.widget,m._snapLinesDivWidgetX,m._snapLinesDivAlignX);var c,g;d.y<snapBox.t?(c=d.y,g=snapBox.t-d.y):(c=snapBox.t,g=d.y-snapBox.t);h.left="point"==b.typeCurrObj?m._snapX.x+"px":"left"==b.typeCurrObj?d.x+"px":"center"==b.typeCurrObj?d.c+"px":d.r+"px";h.top=c+"px";h.width="1px";h.height=g+"px";h.backgroundColor="rgba(255,0,255,.75)"}else h.display="none",b.display="none";h=m._snapLinesDivAlignY.style;b=m._snapLinesDivWidgetY.style;
m._snapY?(b=m._snapY,k(m,b.widget,m._snapLinesDivWidgetY,m._snapLinesDivAlignY),d.x<snapBox.l?(m=d.x,c=snapBox.l-d.x):(m=snapBox.l,c=d.x-snapBox.l),h.top="point"==b.type?b.y+"px":"top"==b.typeCurrObj?d.y+"px":"middle"==b.typeCurrObj?d.m+"px":d.b+"px",h.left=m+"px",h.height="1px",h.width=c+"px",h.backgroundColor="rgba(255,0,255,.75)"):(h.display="none",b.display="none")},clearSnapLines:function(m){m._snapLinesDiv&&(m._snapLinesDiv.style.display="none");m._snapX=m._snapY=null}}})},"dijit/_TemplatedMixin":function(){define("dojo/cache dojo/_base/declare dojo/dom-construct dojo/_base/lang dojo/on dojo/sniff dojo/string ./_AttachMixin".split(" "),
function(n,m,k,h,d,b,c,g){var p=m("dijit._TemplatedMixin",g,{templateString:null,templatePath:null,_skipNodeCache:!1,searchContainerNode:!0,_stringRepl:function(a){var b=this.declaredClass,d=this;return c.substitute(a,this,function(a,c){"!"==c.charAt(0)&&(a=h.getObject(c.substr(1),!1,d));if("undefined"==typeof a)throw Error(b+" template:"+c);return null==a?"":"!"==c.charAt(0)?a:this._escapeValue(""+a)},this)},_escapeValue:function(a){return a.replace(/["'<>&]/g,function(a){return{"\x26":"\x26amp;",
"\x3c":"\x26lt;","\x3e":"\x26gt;",'"':"\x26quot;","'":"\x26#x27;"}[a]})},buildRendering:function(){if(!this._rendered){this.templateString||(this.templateString=n(this.templatePath,{sanitize:!0}));var a=p.getCachedTemplate(this.templateString,this._skipNodeCache,this.ownerDocument),b;if(h.isString(a)){if(b=k.toDom(this._stringRepl(a),this.ownerDocument),1!=b.nodeType)throw Error("Invalid template: "+a);}else b=a.cloneNode(!0);this.domNode=b}this.inherited(arguments);this._rendered||this._fillContent(this.srcNodeRef);
this._rendered=!0},_fillContent:function(a){var b=this.containerNode;if(a&&b)for(;a.hasChildNodes();)b.appendChild(a.firstChild)}});p._templateCache={};p.getCachedTemplate=function(a,b,d){var e=p._templateCache,g=a,h=e[g];if(h){try{if(!h.ownerDocument||h.ownerDocument==(d||document))return h}catch(v){}k.destroy(h)}a=c.trim(a);if(b||a.match(/\$\{([^\}]+)\}/g))return e[g]=a;b=k.toDom(a,d);if(1!=b.nodeType)throw Error("Invalid template: "+a);return e[g]=b};b("ie")&&d(window,"unload",function(){var a=
p._templateCache,b;for(b in a){var c=a[b];"object"==typeof c&&k.destroy(c);delete a[b]}});return p})},"dojo/_base/fx":function(){define("./kernel ./config ./lang ../Evented ./Color ../aspect ../sniff ../dom ../dom-style".split(" "),function(n,m,k,h,d,b,c,g,p){var a=k.mixin,e={},q=e._Line=function(a,b){this.start=a;this.end=b};q.prototype.getValue=function(a){return(this.end-this.start)*a+this.start};var u=e.Animation=function(b){a(this,b);k.isArray(this.curve)&&(this.curve=new q(this.curve[0],this.curve[1]))};
u.prototype=new h;k.extend(u,{duration:350,repeat:0,rate:20,_percent:0,_startRepeatCount:0,_getStep:function(){var a=this._percent,b=this.easing;return b?b(a):a},_fire:function(a,b){b=b||[];if(this[a])if(m.debugAtAllCosts)this[a].apply(this,b);else try{this[a].apply(this,b)}catch(B){console.error("exception in animation handler for:",a),console.error(B)}return this},play:function(a,b){this._delayTimer&&this._clearTimer();if(b)this._stopTimer(),this._active=this._paused=!1,this._percent=0;else if(this._active&&
!this._paused)return this;this._fire("beforeBegin",[this.node]);a=a||this.delay;b=k.hitch(this,"_play",b);if(0<a)return this._delayTimer=setTimeout(b,a),this;b();return this},_play:function(a){this._delayTimer&&this._clearTimer();this._startTime=(new Date).valueOf();this._paused&&(this._startTime-=this.duration*this._percent);this._active=!0;this._paused=!1;a=this.curve.getValue(this._getStep());this._percent||(this._startRepeatCount||(this._startRepeatCount=this.repeat),this._fire("onBegin",[a]));
this._fire("onPlay",[a]);this._cycle();return this},pause:function(){this._delayTimer&&this._clearTimer();this._stopTimer();if(!this._active)return this;this._paused=!0;this._fire("onPause",[this.curve.getValue(this._getStep())]);return this},gotoPercent:function(a,b){this._stopTimer();this._active=this._paused=!0;this._percent=a;b&&this.play();return this},stop:function(a){this._delayTimer&&this._clearTimer();if(!this._timer)return this;this._stopTimer();a&&(this._percent=1);this._fire("onStop",
[this.curve.getValue(this._getStep())]);this._active=this._paused=!1;return this},status:function(){return this._active?this._paused?"paused":"playing":"stopped"},_cycle:function(){if(this._active){var a=(new Date).valueOf(),a=0===this.duration?1:(a-this._startTime)/this.duration;1<=a&&(a=1);this._percent=a;this.easing&&(a=this.easing(a));this._fire("onAnimate",[this.curve.getValue(a)]);1>this._percent?this._startTimer():(this._active=!1,0<this.repeat?(this.repeat--,this.play(null,!0)):-1==this.repeat?
this.play(null,!0):this._startRepeatCount&&(this.repeat=this._startRepeatCount,this._startRepeatCount=0),this._percent=0,this._fire("onEnd",[this.node]),!this.repeat&&this._stopTimer())}return this},_clearTimer:function(){clearTimeout(this._delayTimer);delete this._delayTimer}});var w=0,r=null,v={run:function(){}};k.extend(u,{_startTimer:function(){this._timer||(this._timer=b.after(v,"run",k.hitch(this,"_cycle"),!0),w++);r||(r=setInterval(k.hitch(v,"run"),this.rate))},_stopTimer:function(){this._timer&&
(this._timer.remove(),this._timer=null,w--);0>=w&&(clearInterval(r),r=null,w=0)}});var x=c("ie")?function(a){var b=a.style;b.width.length||"auto"!=p.get(a,"width")||(b.width="auto")}:function(){};e._fade=function(c){c.node=g.byId(c.node);var d=a({properties:{}},c);c=d.properties.opacity={};c.start="start"in d?d.start:function(){return+p.get(d.node,"opacity")||0};c.end=d.end;c=e.animateProperty(d);b.after(c,"beforeBegin",k.partial(x,d.node),!0);return c};e.fadeIn=function(b){return e._fade(a({end:1},
b))};e.fadeOut=function(b){return e._fade(a({end:0},b))};e._defaultEasing=function(a){return.5+Math.sin((a+1.5)*Math.PI)/2};var A=function(a){this._properties=a;for(var b in a){var c=a[b];c.start instanceof d&&(c.tempColor=new d)}};A.prototype.getValue=function(a){var b={},c;for(c in this._properties){var e=this._properties[c],g=e.start;g instanceof d?b[c]=d.blendColors(g,e.end,a,e.tempColor).toCss():k.isArray(g)||(b[c]=(e.end-g)*a+g+("opacity"!=c?e.units||"px":0))}return b};e.animateProperty=function(c){var e=
c.node=g.byId(c.node);c.easing||(c.easing=n._defaultEasing);c=new u(c);b.after(c,"beforeBegin",k.hitch(c,function(){var b={},c;for(c in this.properties){var g=function(a,b){var c={height:a.offsetHeight,width:a.offsetWidth}[b];if(void 0!==c)return c;c=p.get(a,b);return"opacity"==b?+c:m?c:parseFloat(c)};if("width"==c||"height"==c)this.node.display="block";var h=this.properties[c];k.isFunction(h)&&(h=h(e));h=b[c]=a({},k.isObject(h)?h:{end:h});k.isFunction(h.start)&&(h.start=h.start(e));k.isFunction(h.end)&&
(h.end=h.end(e));var m=0<=c.toLowerCase().indexOf("color");"end"in h?"start"in h||(h.start=g(e,c)):h.end=g(e,c);m?(h.start=new d(h.start),h.end=new d(h.end)):h.start="opacity"==c?+h.start:parseFloat(h.start)}this.curve=new A(b)}),!0);b.after(c,"onAnimate",k.hitch(p,"set",c.node),!0);return c};e.anim=function(a,b,c,d,g,h){return e.animateProperty({node:a,duration:c||u.prototype.duration,properties:b,easing:d,onEnd:g}).play(h||0)};a(n,e);n._Animation=u;return e})},"xide/client/WebSocket":function(){define(["dcl/dcl",
"xide/utils","xide/utils/_LogMixin","xide/client/ClientBase","xdojo/has"],function(n,m,k,h,d){return n([h,k],{declaredClass:"xide.client.WebSocket",_socket:null,debugConnect:!0,autoReconnect:!0,reconnect:function(){},close:function(){this.destroy()},onLostConnection:function(){},onConnected:function(){},connect_sock_js:function(b){this.options=m.mixin(this.options,b);var c=this.options.host,d=this.options.port;this.options.debug&&this.initLogger(this.options.debug);if(c){b=new SockJS(c+":"+d,null,
{debug:!1,devel:!0,noCredentials:!0,nullOrigin:!0,transports:"websocket xdr-streaming xhr-streaming iframe-eventsource iframe-htmlfile xdr-polling xhr-polling iframe-xhr-polling jsonp-polling".split(" ")});var h=this;b.onopen=function(){h.onConnected();if(h.delegate.onConnected)h.delegate.onConnected()};b.onmessage=function(a){if(h.delegate.onServerResponse)h.delegate.onServerResponse(a)};b.onerror=function(){console.error("error")};b.onclose=function(a){if(h.autoReconnect){if(h.delegate.onLostConnection)h.delegate.onLostConnection(a);
h.reconnect()}};this._socket=b}else console.error("something wrong with data!",b)},connect_socket_io:function(b){this.options=m.mixin(this.options,b);var c=this.options.host,d=this.options.port;this.options.debug&&this.initLogger(this.options.debug);if(c){b=new SockJS(c+":"+d,null,{debug:!1,devel:!0,noCredentials:!0,nullOrigin:!0,transports:"websocket xdr-streaming xhr-streaming iframe-eventsource iframe-htmlfile xdr-polling xhr-polling iframe-xhr-polling jsonp-polling".split(" ")});var h=this;b.onopen=
function(){h.onConnected();if(h.delegate.onConnected)h.delegate.onConnected()};b.onmessage=function(a){if(h.delegate.onServerResponse)h.delegate.onServerResponse(a)};b.onerror=function(){console.error("error")};b.onclose=function(a){if(h.autoReconnect){if(h.delegate.onLostConnection)h.delegate.onLostConnection(a);h.reconnect()}};this._socket=b}else console.error("something wrong with data!",b)},connect:function(b){return this.connect_sock_js(b)},emit:function(b,c,d){c.tag=d||"notag";b=JSON.stringify(c);
this._socket.send(b)},onSignal:function(b,c){this._socket.on("data",c)}})})},"xfile/Statusbar":function(){define(["xdojo/declare","xide/types","xfile/Breadcrumb"],function(n,m,k){return n("xgrid.Statusbar",null,{statusbar:null,setState:function(h){this.showStatusbar(h.statusBar);return this.inherited(arguments)},getState:function(h){h=this.inherited(arguments)||{};h.statusBar=null!=this.statusbar;return h},runAction:function(h){h.command==m.ACTION.STATUSBAR&&this.showStatusbar(this.statusbar?!1:!0);
return this.inherited(arguments)},showStatusbar:function(h,d){!h&&this.statusbar?this._destroyStatusbar():h&&this.getStatusbar();this.resize();this._statusbarAction&&!0!==d&&this._statusbarAction.set("value",h)},_destroyStatusbar:function(){this.statusbarRoot&&this.statusbarRoot.remove();this.statusbarRoot=this.statusbar=null},_statusbarAction:null,buildRendering:function(){this.inherited(arguments);var h=this;this._on("onAddActions",function(d){var b=d.actions,c=m.ACTION.STATUSBAR;d.store.getSync(c)||
(d=h.createAction({label:"Statusbar",command:c,icon:m.ACTION_ICON.STATUSBAR,tab:"View",group:"Show",mixin:{actionType:"multiToggle"},onCreate:function(b){b.set("value",null!==h.statusbar);h._statusbarAction=b},onChange:function(b,c,a){h.showStatusbar(c,!0)}}),b.push(d))})},getStatusbar:function(){return this.statusbar?this.statusbar:this.createStatusbar()},onRenderedStatusBar:function(h,d,b){h=this.__bc;!h&&d&&d.append&&(h=new k({},$("\x3cdiv\x3e")),d.append(h.domNode),$(h.domNode).css({"float":"right",
padding:0,"margin-right":10,top:0,right:50,position:"absolute"}),this.__bc=h,h.setSource(this));h&&(h.clear(),d=this.collection,b=(b=this.getCurrentFolder())?b.path:"",h.setPath(".",d.getRootItem(),b,d))},onStatusbarCollapse:function(h){},createStatusbar:function(h){h=h=this.footer;var d=this.statusbar,b=this;if(!d){var c=$('\x3cdiv class\x3d"statusbar widget" style\x3d"width:inherit;padding: 0;margin:0;padding-left: 4px;"\x3e\x3c/div\x3e')[0];h.appendChild(c);d=$('\x3cdiv class\x3d"status-bar-text ellipsis" style\x3d"display: inline-block;"\x3e0 items selected\x3c/div\x3e')[0];
c.appendChild(d);var g=$('\x3cdiv class\x3d"status-bar-collapser fa-caret-up" style\x3d"" \x3e\x3c/div\x3e');g.click(function(c){b.onStatusbarCollapse(g)});h=g[0];c.appendChild(h);this.statusbar=d;this.statusbarCollapse=h;this.statusbarRoot=c;this._emit("createStatusbar",{root:c,statusbar:d,collapser:h})}return d},startup:function(){function h(b){if(0==b)return"0 Byte";var c=parseInt(Math.floor(Math.log(b)/Math.log(1024)));return Math.round(b/Math.pow(1024,c),2)+" "+["Bytes","KB","MB","GB","TB"][c]}
function d(b){var c=0,a="0 KB";_.each(b,function(a){c+=a.sizeBytes||0});0<c&&(a=h(c));return{bytes:c,sizeStr:a}}this.inherited(arguments);if(this.hasPermission(m.ACTION.STATUSBAR)){var b=this.getStatusbar(),c=this;b&&this._on("selectionChanged",function(g){var h=g.selection||[];g=h.length;h=d(h);g=g+"  "+c.localize("selected")+" ("+h.sizeStr+")";b.innerHTML=g;if(c.onRenderedStatusBar)c.onRenderedStatusBar(b,c.statusbarRoot,g)})}}})})},"xgrid/Defaults":function(){define(["xdojo/declare"],function(n){return n("xgrid/Defaults",
null,{minRowsPerPage:100,keepScrollPosition:!0,rowsPerPage:30,deselectOnRefresh:!1,cellNavigation:!1,_skipFirstRender:!1,loadingMessage:null,preload:null,childSelector:".dgrid-row",addUiClasses:!1,noDataMessage:'\x3cspan class\x3d"textWarning"\x3eNo data....\x3c/span\x3e',showExtraSpace:!0,expandOnClick:!0})})},"xcf/Views":function(){define(["dojo/_base/declare","xide/views/CIView","xide/views/_Dialog","xide/views/_CIDialog"],function(n){return n("xcf.Views",null,{})})},"dojo/debounce":function(){define([],
function(){return function(n,m){var k;return function(){k&&clearTimeout(k);var h=this,d=arguments;k=setTimeout(function(){n.apply(h,d)},m)}}})},"xide/views/CIViewMixin":function(){define("dcl/dcl xdojo/declare dojo/Stateful xide/utils xide/factory xide/mixins/EventedMixin xide/layout/_TabContainer xide/widgets/_Widget dojo/Deferred dojo/promise/all dojo/when".split(" "),function(n,m,k,h,d,b,c,g,p,a,e){var q=null;k={declaredClass:"xide.views.CIViewMixin",widgets:null,delegate:null,helpNodes:null,store:null,
groups:null,groupContainer:null,cssClass:"CIView",ciSort:!0,options:{},tabContainer:null,viewStyle:"",tabs:null,tabContainerClass:c,_didRenderCIS:!1,typeMap:null,containerArgs:null,getWidgetByType:function(a){for(var b=0;b<this.widgets.length;b++){var c=this.widgets[b];if(c.userData.type===a)return c}return null},updateWidget:function(a,b,c){a=this.getWidgetById(a);b&&a&&a.set&&a.set(b,c)},getWidgetById:function(a){var b=null;_.each(this.widgets,function(c){c.userData&&c.userData.id===a&&(b=c)});
return b},constructor:function(a){h.mixin(this,a)},onValueChanged:function(a){this._emit("valueChanged",a)},createGroupContainer:function(){if(this.tabContainer)return this.tabContainer;var a=h.addWidget(this.tabContainerClass||c,h.mixin({direction:"left",style:"min-width:450px;",_parent:this,resizeToParent:!0},this.containerArgs),null,this,!0);this.tabContainer=a;this.add(a);return a},getGroupContainer:function(){return this.groupContainer?this.groupContainer:this.groupContainer=this.createGroupContainer()},
createGroupView:function(a,b,d,e){return a.createTab(b,d,e,this.tabContainerClass.tabClass||c.tabClass)},attachWidgets:function(a,b,c){var d=this;b=b||this.domNode;!b&&this.tabContainer&&(b=this.tabContainer.containerNode);if(b){a=a.reverse();for(var e=0;e<a.length;e++){var g=a[e];g.delegate=this.owner||this;b.appendChild(g.domNode);var h=g.userData;if(c&&!0===c.lazy)g._startOnShow=!0;else try{!g._started&&g.startup()}catch(y){logError(y,"Error starting widget")}g._on("valueChanged",function(a){a.view=
c;a.widget=g;d.onValueChanged(a)});!g.__emitted&&this._emit("widget",{widget:g,ci:h});g.__emitted=!0;-1==this.widgets.indexOf(g)&&this.widgets.push(g);g.userData.view=c;g.onAttached&&g.onAttached(c);c&&c.add&&c.add(g)||this.add(g)}}else console.error("have no parent dstNode!")},empty:function(a){_.each(this.helpNodes,h.destroy);_.each(this.widgets,h.destroy);!1!==a&&this._destroyHandles();this.tabs=[];this.widgets=[]},toArray:function(a){var b=[],c;for(c in a)b.push({name:c,value:a[c]});return b},
onRendered:function(){var a=this.getGroupContainer();this.options.select?a.selectChild(this.options.select):a.selectChild(0);a.resize()},getTypeMap:function(){},renderGroup:function(a,b,c){var g=this.createGroupView(a,b);this.tabs.push(g);this.ciSort&&(c=c.sort(function(a,b){return(a.order||0)>(b.order||0)?-1:1}));a=d.createWidgetsFromArray(c,this,null,!1,this.getTypeMap(),!this.ciSort);var h=this;e(a,function(a){a&&h.attachWidgets(a,g.containerNode,g)});return a},renderGroups:function(b){var c=this.getGroupContainer(),
d=this,e=new p,g=[];this.widgets=[];this.helpNodes=[];for(var h=0;h<b.length;h++)try{var k=this.renderGroup(c,b[h].name,b[h].value);g.push(k)}catch(y){logError(y)}a(g).then(function(){c.resize();d.onRendered();e.resolve()});return e},getCIS:function(){return this.data},initWithCIS:function(a){if(this._didRenderCIS)return null;this._didRenderCIS=!0;this.empty(!1);a=a||this.cis;this.data=a=h.flattenCIS(a);var b=null,c=this,b=_.groupBy(a,function(a){return a.group}),g=this.options.groupOrder||{},k=[],
b=this.toArray(b);_.each(b,function(a){_.find(a.value,{visible:!0})&&k.push(a)});b=_.sortByOrder(k,function(a){return g[a.name]||100});null!=b&&1<b.length?b=this.renderGroups(b):(b=d.createWidgetsFromArray(a,c,null,!1,this.getTypeMap(),!this.ciSort),e(b,function(a){(c.widgets=a)&&c.attachWidgets(a)}));b.then(function(){_.invoke(c.widgets,"onDidRenderWidgets",c,c.widgets)});return b},destroy:function(){q.release(this.cis);delete this.helpNodes;this.tabContainer=this.groupContainer=this.data=this.cis=
this.delegate=null;delete this.tabs;this.storeDelegate=this.storeItem=this.owner=null}};q=m("xide.views.CIViewMixin",[g,b],k);q.dcl=n([g.dcl,b.dcl],k);q.release=function(a){return a=_.map(a,function(a){a.view=null;a._widget=null;a.options=null;delete a.view;delete a._widget;delete a.options;return a})};return q})},"dijit/form/RadioButton":function(){define(["dojo/_base/declare"],function(n){return n("dijit.form.RadioButton",[],{baseClass:"dijitRadio"})})},"xideve/manager/WidgetManager":function(){define("dcl/dcl dojo/_base/lang dojo/dom-construct xide/manager/ManagerBase xide/mixins/ReloadMixin xide/types xide/utils xide/factory xide/layout/ContentPane xide/widgets/_MenuMixin2 xide/mixins/ActionMixin xaction/Action ./WidgetManagerBlox ./WidgetManagerJS xide/mixins/VariableMixin davinci/ve/metadata xdojo/has!xtrack?xide/interface/Track xide/interface/Route xide/noob xide/data/Reference xide/data/ReferenceMapping xide/mixins/ActionProvider".split(" "),
function(n,m,k,h,d,b,c,g,p,a,e,q,u,w,r,v,x,A,z,y,B,C){n([y,B],{});p=null;x&&(p={track:function(){return!0},getTrackingCategory:function(){return c.capitalize(this.beanNamespace)},getTrackingEvent:function(){return b.ACTION.OPEN},getTrackingLabel:function(a){return this.getMetaValue(a,b.DRIVER_PROPERTY.CF_DRIVER_NAME)},getActionTrackingUrl:function(a){return m.replace(this.breanScheme+"?action\x3d{action}\x26"+this.beanUrlPattern,{action:a})},getTrackingUrl:function(a){return m.replace(this.breanScheme+
"{view}/"+this.beanUrlPattern,{id:a.id,view:"settings"})}});c.mixin(b.ACTION_VISIBILITY,{WIDGET_PROPERTY:"WIDGET_PROPERTY"});var E={onclick:null,ondblclick:null,onmousedown:null,onmouseup:null,onmouseover:null,onmousemove:null,onmouseout:null,onkeypress:null,onkeydown:null,onkeyup:null,onfocus:null,onblur:null,onchange:null};return n([A.dcl,C.dcl,h,d.dcl,u,w,a,r.dcl,x?n(x.dcl,p):z.dcl],{declaredClass:"xideve/manager/WidgetManager",currentContext:null,_currentWidget:null,visibility:b.ACTION_VISIBILITY.WIDGET_PROPERTY,
onReloaded:function(){},onLibraryContainerCreated:function(a){},onContextReady:function(a){},_completeEventInfo:function(a){var b=a.target||null,c=a.widget?a.target.getContext():null;a.editor=c.editor?c.editor:c._edit_context.editor;var d=c?c.getGlobal():null,c=c.appContext,e=c.application,g=b.domNode||b;b.isDijitWidget&&(g=b.dijitWidget.domNode);a.appSettings=e.settings;a.appContext=c;a.app=e;a.global=d;a.node=g;a.widgetContext=b;a.dijitWidget=b.isDijitWidget?b.dijitWidget:null;return a},onWidgetPropertyChanged:function(a){a=
this._completeEventInfo(a);var b=a.widgetProperty,c=a.node,d=a.dijitWidget,e=b in E,g=a.global;b&&c&&e&&d&&d.on&&(c.removeAttribute(b),c[b]&&c.removeEventListener(b,c[b]),c[b]=null,g.dojo.setAttr(a.node,a.widgetProperty,""),g.dojo.setAttr(a.node,a.widgetProperty,a.value))},onWidgetPropertyRendered:function(a){if(!a.wmHandled){a.wmHandled=!0;var b=a.row;switch(b.type){case "widgetState":this.onStatePropertyRendered(b,a.node,a.view,a.row);break;case "iconClass":this.onIconClassPropertyRendered(b,a.node,
a.view,a.row)}}},onIconClassPropertyRendered:function(a,b,d,e){if(!b.iconPicker){var g=$(b).iconpicker({selectedCustomClass:"label label-success",showFooter:!1});b.iconPicker=g;g.on("iconpickerSelected",function(a){var b={};b.iconClass="fa "+a.iconpickerValue;a=new davinci.ve.commands.ModifyCommand(g._widget,b,null);dojo.publish("/davinci/ui/widgetPropertiesChanges",[{source:g._context.editor_id,command:a}])})}d._widget&&(c.getNode(d._widget),b.iconPicker._widget=d._widget,b.iconPicker._context=d.context)},
onStatePropertyRendered:function(a,b,d,e){if(!b._selectize){var g=$(b).selectize({value:"Test,Another",delimiter:",",persist:!1,maxItems:1,create:!0,sortField:"text"}).data().selectize;b._selectize=g;g.on("change",function(){var a=g.getValue(),b={};b.state=a;a=new davinci.ve.commands.ModifyCommand(g._widget,b,null);dojo.publish("/davinci/ui/widgetPropertiesChanges",[{source:g._context.editor_id,command:a}])})}b._selectize.setValue([],!0);d._widget&&(a=c.getNode(d._widget))&&a.getStates&&(e=a.getStates(),
_.each(e,function(a){b._selectize.addOption({value:a.name,text:a.name})}),b._selectize.setValue(a.state,!0),b._selectize._widget=d._widget,b._selectize._context=d.context)},defaultNumberActions:function(a){var c=this,d=q.createDefault("Javascript","fa-code","Widget/Bind to Javascript","widgetPropertyAction",function(a,b,d,e,g){c.onJavascript(g.context)});d.setVisibility(this.visibility,{});d.context=a;var e=q.createDefault("XBlox","fa-play-circle-o","Widget/Bind to XBlox","widgetPropertyAction",function(a,
b,d,e,g){c.onXBlox(g.context)});e.setVisibility(b.ACTION_VISIBILITY.WIDGET_PROPERTY,{});e.context=a;return[d,e]},_showContextActions:function(a,b,c,d){},_createContextMenu:function(a,b,c,d){},doWidgetPropWizard:function(a,b,c,d,e){this._createContextMenu(d,b,c,e)},renderBlockWidget:function(a,b,c){},onNumberPropertyRendered:function(a,b,c,d){},onContextLoaded:function(a){this.currentContext=a},onEventPropertyRendered:function(a,b,c){},onEventSelectionRendered:function(a){},onSelectionChanged:function(a){},
onWidgetSelected:function(a){},renderFileWidget:function(a,b,c){var d=b;b.parentNode&&b.parentNode.nextSibling&&-1!=b.parentNode.nextSibling.className.indexOf("propertyExtra")&&(d=b.parentNode.nextSibling);var e=g.createButton(k.create("div"),"el-icon-folder-open","elusiveButton","","",function(){this.onSelectFile(b,a,c)}.bind(this),this);dojo.place(e.domNode,d,"after")},init:function(){this.subscribe("/davinci/ui/onSelectionChanged",this.onSelectionChanged);this.subscribe("/davinci/ui/widgetSelected",
this.onWidgetSelected);this.subscribe("/davinci/ui/context/loaded",this.onContextLoaded);this.subscribe([b.EVENTS.WIDGET_PROPERTY_RENDERED,b.EVENTS.ON_EVENT_SELECTION_RENDERED,b.EVENTS.ON_WIDGET_PROPERTY_CHANGED,b.EVENTS.ON_LIBRARY_CONTAINER_CREATED,b.EVENTS.ON_CONTEXT_READY,b.EVENTS.ON_RENDER_WELCOME_GRID_GROUP]);this.registerRoutes()},handleRoute:function(a){switch(a.parameters.view){case "settings":return this.openItemSettings(this.getDriverById(a.parameters.id))}},registerRoutes:function(){this.getContext().registerRoute({id:"Scene",
path:"scene://{view}/{id}",schemes:["scenes"],delegate:this});this.getContext().registerRoute({id:"New Scene",path:"File/New Scene",schemes:[""],delegate:this})},onRenderWelcomeGridGroup:function(a){var b=this.getContext(),d=b.getTrackingManager();b.getRouter();var e=a.store,g=this;switch(a.item.group){case "New":d=[];d.push(this.createAction({label:"New Scene",command:"File/New Scene",icon:"fa-magic",mixin:{addPermission:!0}}));_.map(d,function(a){return e.putSync(c.mixin(a,{url:a.command,parent:"New",
group:null,label:a.title,owner:g,runAction:function(a,b,c){return DriverTreeView.prototype.runAction.apply(DriverTreeView.prototype,[{command:this.url},b,c])}}))});break;case "Recent":d&&(e.putSync({group:"Scenes",label:"Scenes",url:"Scenes",parent:"Recent",directory:!0}),a=d.filterMin({category:"Driver"},"counter",1),a=d.most(null,a),d.last(a))}},getRouteRenderParams:function(a){return{icon:null}},routeToReference:function(a){return this.getDriverById(a?a.parameters.id:null)},referenceToRoute:function(a){return m.replace(this.breanScheme+
"{view}/"+this.beanUrlPattern,{id:a.id,view:"settings"})}})})},"dijit/_CssStateMixin":function(){define(["dojo/_base/array","dojo/_base/declare","dojo/dom-class","dojo/_base/lang"],function(n,m,k,h){return m("dijit._CssStateMixin",[],{hovering:!1,active:!1,_applyAttributes:function(){this.inherited(arguments);n.forEach("disabled readOnly checked selected focused state hovering active _opened".split(" "),function(b){this.watch(b,h.hitch(this,"_setStateClass"))},this);for(var d in this.cssStateNodes||
{})this._trackMouseState(this[d],this.cssStateNodes[d]);this._trackMouseState(this.domNode,this.baseClass);this._setStateClass()},_cssMouseEvent:function(d){if(!this.disabled)switch(d.type){case "mouseover":case "MSPointerOver":case "pointerover":this._set("hovering",!0);this._set("active",this._mouseDown);break;case "mouseout":case "MSPointerOut":case "pointerout":this._set("hovering",!1);this._set("active",!1);break;case "mousedown":case "touchstart":case "MSPointerDown":case "pointerdown":case "keydown":this._set("active",
!0);break;case "mouseup":case "dojotouchend":case "MSPointerUp":case "pointerup":case "keyup":this._set("active",!1)}},_setStateClass:function(){function d(a){b=b.concat(n.map(b,function(b){return b+a}),"dijit"+a)}var b=this.baseClass.split(" ");this.isLeftToRight()||d("Rtl");var c="mixed"==this.checked?"Mixed":this.checked?"Checked":"";this.checked&&d(c);this.state&&d(this.state);this.selected&&d("Selected");this._opened&&d("Opened");this.disabled?d("Disabled"):this.readOnly?d("ReadOnly"):this.active?
d("Active"):this.hovering&&d("Hover");this.focused&&d("Focused");var c=this.stateNode||this.domNode,g={};if(c){n.forEach(c.className.split(" "),function(a){g[a]=!0});"_stateClasses"in this&&n.forEach(this._stateClasses,function(a){delete g[a]});n.forEach(b,function(a){g[a]=!0});var h=[],a;for(a in g)h.push(a);c.className=h.join(" ");this._stateClasses=b}},_subnodeCssMouseEvent:function(d,b,c){function g(c){k.toggle(d,b+"Active",c)}if(!this.disabled&&!this.readOnly)switch(c.type){case "mouseover":case "MSPointerOver":case "pointerover":k.toggle(d,
b+"Hover",!0);break;case "mouseout":case "MSPointerOut":case "pointerout":k.toggle(d,b+"Hover",!1);g(!1);break;case "mousedown":case "touchstart":case "MSPointerDown":case "pointerdown":case "keydown":g(!0);break;case "mouseup":case "MSPointerUp":case "pointerup":case "dojotouchend":case "keyup":g(!1);break;case "focus":case "focusin":k.toggle(d,b+"Focused",!0);break;case "blur":case "focusout":k.toggle(d,b+"Focused",!1)}},_trackMouseState:function(d,b){d._cssState=b}})})},"dijit/form/ValidationTextBox":function(){define("dojo/_base/declare dojo/_base/kernel dojo/_base/lang dojo/i18n ./TextBox ../Tooltip dojo/text!./templates/ValidationTextBox.html dijit/lang/validate".split(" "),
function(n,m,k,h,d,b,c,g){var p;return p=n("dijit.form.ValidationTextBox",d,{templateString:c,required:!1,promptMessage:"",invalidMessage:"$_unset_$",missingMessage:"$_unset_$",message:"",constraints:{},pattern:".*",regExp:"",regExpGen:function(){},state:"",tooltipPosition:[],_deprecateRegExp:function(a,b){b!=p.prototype[a]&&(m.deprecated("ValidationTextBox id\x3d"+this.id+", set('"+a+"', ...) is deprecated.  Use set('pattern', ...) instead.","","2.0"),this.set("pattern",b))},_setRegExpGenAttr:function(a){this._deprecateRegExp("regExpGen",
a);this._set("regExpGen",this._computeRegexp)},_setRegExpAttr:function(a){this._deprecateRegExp("regExp",a)},_setValueAttr:function(){this.inherited(arguments);this._refreshState()},validator:function(a,b){return(new RegExp("^(?:"+this._computeRegexp(b)+")"+(this.required?"":"?")+"$")).test(a)&&(!this.required||!this._isEmpty(a))&&(this._isEmpty(a)||void 0!==this.parse(a,b))},_isValidSubset:function(){return 0==this.textbox.value.search(this._partialre)},isValid:function(){return this.textbox?this.validator(this.textbox.value,
this.get("constraints")):!1},_isEmpty:function(a){return(this.trim?/^\s*$/:/^$/).test(a)},getErrorMessage:function(){var a="$_unset_$"==this.invalidMessage?this.messages.invalidMessage:this.invalidMessage?this.invalidMessage:this.promptMessage,b="$_unset_$"==this.missingMessage?this.messages.missingMessage:this.missingMessage?this.missingMessage:a;return this.required&&this._isEmpty(this.textbox.value)?b:a},getPromptMessage:function(){return this.promptMessage},_maskValidSubsetError:!0,validate:function(a){var b=
"";if(!this.focusNode||!this.domNode||!this.textbox)return!1;var c=this.disabled||this.isValid(a);c&&(this._maskValidSubsetError=!0);var d=this._isEmpty(this.textbox.value),g=!c&&a&&this._isValidSubset();this._set("state",c?"":((!this._hasBeenBlurred||a)&&d||g)&&(this._maskValidSubsetError||g&&!this._hasBeenBlurred&&a)?"Incomplete":"Error");this.focusNode.setAttribute("aria-invalid","Error"==this.state?"true":"false");"Error"==this.state?(this._maskValidSubsetError=a&&g,b=this.getErrorMessage(a)):
"Incomplete"==this.state?(b=this.getPromptMessage(a),this._maskValidSubsetError=!this._hasBeenBlurred||a):d&&(b=this.getPromptMessage(a));this.set("message",b);return c},displayMessage:function(a){a&&this.focused?b.show(a,this.domNode,this.tooltipPosition,!this.isLeftToRight()):b.hide(this.domNode)},_refreshState:function(){this._created&&this.validate(this.focused);this.inherited(arguments)},constructor:function(a){this.constraints=k.clone(this.constraints);this.baseClass+=" dijitValidationTextBox"},
startup:function(){this.inherited(arguments);this._refreshState()},_setConstraintsAttr:function(a){!a.locale&&this.lang&&(a.locale=this.lang);this._set("constraints",a);this._refreshState()},_setPatternAttr:function(a){this._set("pattern",a);this._refreshState()},_computeRegexp:function(a){var b=this.pattern;"function"==typeof b&&(b=b.call(this,a));if(b!=this._lastRegExp){var c="";this._lastRegExp=b;".*"!=b&&b.replace(/\\.|\[\]|\[.*?[^\\]{1}\]|\{.*?\}|\(\?[=:!]|./g,function(a){switch(a.charAt(0)){case "{":case "+":case "?":case "*":case "^":case "$":case "|":case "(":c+=
a;break;case ")":c+="|$)";break;default:c+="(?:"+a+"|$)"}});try{"".search(c)}catch(u){c=this.pattern}this._partialre="^(?:"+c+")$"}return b},postMixInProperties:function(){this.inherited(arguments);this.messages=g;this._setConstraintsAttr(this.constraints)},_setDisabledAttr:function(a){this.inherited(arguments);this._refreshState()},_setRequiredAttr:function(a){this._set("required",a);this.focusNode.setAttribute("aria-required",a);this._refreshState()},_setMessageAttr:function(a){this._set("message",
a);this.displayMessage(a)},reset:function(){this._maskValidSubsetError=!0;this.inherited(arguments)},_onBlur:function(){this.displayMessage("");this.inherited(arguments)},destroy:function(){b.hide(this.domNode);this.inherited(arguments)}})})},"xdocker/Frame2":function(){define(["dcl/dcl","wcDocker/frame"],function(n,m){return n([m],{_showTitlebar:!0,panel:function(k,h){"undefined"!==typeof k&&(this.isCollapser()&&k===this._curTab&&(this.collapse(),k=-1),k<this._panelList.length&&(this.$tabBar.find('\x3e .wcTabScroller \x3e .wcPanelTab[id\x3d"'+
this._curTab+'"]').removeClass("wcPanelTabActive active"),this.$center.children('.wcPanelTabContent[id\x3d"'+this._curTab+'"]').addClass("wcPanelTabContentHidden"),this._curTab!==k&&this.collapse(),this._curTab=k,-1<k&&(this.$tabBar.find('\x3e .wcTabScroller \x3e .wcPanelTab[id\x3d"'+k+'"]').addClass("wcPanelTabActive active"),this.$center.children('.wcPanelTabContent[id\x3d"'+k+'"]').removeClass("wcPanelTabContentHidden"),this.expand()),this.__updateTabs(h)));return-1<this._curTab&&this._curTab<
this._panelList.length?this._panelList[this._curTab]:this.isCollapser()&&this._panelList.length?this._panelList[0]:!1},__init:function(){this.$frame=$('\x3cdiv class\x3d"wcFrame wcWide wcTall widget"\x3e');this.$title=$('\x3cdiv class\x3d"wcFrameTitle"\x3e');this.$titleBar=$('\x3cdiv class\x3d"wcFrameTitleBar wcFrameTopper"\x3e');this.$tabBar=$('\x3cheader class\x3d"wcFrameTitleBar"\x3e');this.$tabScroll=$('\x3cul class\x3d"wcTabScroller nav nav-tabs"\x3e');this.$center=$('\x3cdiv class\x3d"wcFrameCenter wcPanelBackground"\x3e');
this.$tabLeft=$('\x3cdiv class\x3d"wcFrameButton" title\x3d"Scroll tabs to the left."\x3e\x3cspan class\x3d"fa fa-arrow-left"\x3e\x3c/span\x3e\x26lt;\x3c/div\x3e');this.$tabRight=$('\x3cdiv class\x3d"wcFrameButton" title\x3d"Scroll tabs to the right."\x3e\x3cspan class\x3d"fa fa-arrow-right"\x3e\x3c/span\x3e\x26gt;\x3c/div\x3e');this.$close=$('\x3cdiv class\x3d"wcFrameButton" title\x3d"Close the currently active panel tab"\x3e\x3cdiv class\x3d"fa fa-close"\x3e\x3c/div\x3eX\x3c/div\x3e');this.$collapse=
$('\x3cdiv class\x3d"wcFrameButton" title\x3d"Collapse the active panel"\x3e\x3cdiv class\x3d"fa fa-download"\x3e\x3c/div\x3eC\x3c/div\x3e');this.$buttonBar=$('\x3cdiv class\x3d"wcFrameButtonBar"\x3e');this.$tabButtonBar=$('\x3cdiv class\x3d"wcFrameButtonBar"\x3e');this.$tabBar.append(this.$tabScroll);this.$tabBar.append(this.$tabButtonBar);this.$frame.append(this.$buttonBar);this.$buttonBar.append(this.$close);this.$buttonBar.append(this.$collapse);this.$frame.append(this.$center);this._isFloating&&
(this.$top=$('\x3cdiv class\x3d"wcFrameEdgeH wcFrameEdge"\x3e\x3c/div\x3e').css("top","-6px").css("left","0px").css("right","0px"),this.$bottom=$('\x3cdiv class\x3d"wcFrameEdgeH wcFrameEdge"\x3e\x3c/div\x3e').css("bottom","-6px").css("left","0px").css("right","0px"),this.$left=$('\x3cdiv class\x3d"wcFrameEdgeV wcFrameEdge"\x3e\x3c/div\x3e').css("left","-6px").css("top","0px").css("bottom","0px"),this.$right=$('\x3cdiv class\x3d"wcFrameEdgeV wcFrameEdge"\x3e\x3c/div\x3e').css("right","-6px").css("top",
"0px").css("bottom","0px"),this.$corner1=$('\x3cdiv class\x3d"wcFrameCornerNW wcFrameEdge"\x3e\x3c/div\x3e').css("top","-6px").css("left","-6px"),this.$corner2=$('\x3cdiv class\x3d"wcFrameCornerNE wcFrameEdge"\x3e\x3c/div\x3e').css("top","-6px").css("right","-6px"),this.$corner3=$('\x3cdiv class\x3d"wcFrameCornerNW wcFrameEdge"\x3e\x3c/div\x3e').css("bottom","-6px").css("right","-6px"),this.$corner4=$('\x3cdiv class\x3d"wcFrameCornerNE wcFrameEdge"\x3e\x3c/div\x3e').css("bottom","-6px").css("left",
"-6px"),this.$frame.append(this.$top),this.$frame.append(this.$bottom),this.$frame.append(this.$left),this.$frame.append(this.$right),this.$frame.append(this.$corner1),this.$frame.append(this.$corner2),this.$frame.append(this.$corner3),this.$frame.append(this.$corner4));this.__container(this.$container);this._isFloating&&this.$frame.addClass("wcFloating");this.$center.scroll(this.__scrolled.bind(this))},showTitlebar:function(k){if(null!=k){var h=k?"inherit":"none";this.$titleBar.css("display",h);
this.$tabBar.css("display",h);this.$center.css("top",k?30:0);this._showTitlebar=k}return this._showTitlebar},currentPanel:function(){return this._panelList[this._curTab]},__widgets:function(){return this._panelList},panels:function(){return this._panelList},panelAt:function(k){return this._panelList[k]},panelIndex:function(k){return _.findIndex(this._panelList,k)}})})},"xide/manager/Application_XNODE":function(){define(["dcl/dcl","dojo/Deferred"],function(n,m){return n(null,{declaredClass:"xide.manager.Application_XNODE",
onXIDELoaded:function(k,h){var d=this;k={delegate:{onServerResponse:function(b){d.ctx.onXIDEMessage(utils.fromJson(b.data))}}};try{var b=new h(k);lang.mixin(b,k);b.init({options:{host:"http://127.0.0.1",port:9994,channel:"",debug:{all:!1,protocol_connection:!0,protocol_messages:!0,socket_server:!0,socket_client:!0,socket_messages:!0,main:!0}}});b.connect()}catch(c){console.error("create client with store : failed : "+c)}},loadXIDE:function(){var k=this;require(["xide/min","xide/client/WebSocket"],
function(h,d){k._didXIDE||(k._didXIDE=!0,k.onXIDELoaded(h,d))})},initXNODE:function(){var k=require,h=new m,k=k("xnode/manager/NodeServiceManager"),k=this.ctx.createManager(k,null);this.ctx.nodeServiceManager=k;k.init();h.resolve();return h}})})},"davinci/html/HTMLAttribute":function(){define(["dojo/_base/declare","davinci/html/HTMLItem"],function(n,m){return n("davinci.html.HTMLAttribute",m,{constructor:function(){this.elementType="HTMLAttribute";this.value=this.name=""},getText:function(k){if(this.noPersist&&
!k.includeNoPersist)return"";k=this.name;({checked:1,selected:1,disabled:1,readonly:1,multiple:1,ismap:1,autofocus:1,autoplay:1,controls:1,formnovalidate:1,loop:1,muted:1,required:1})[this.name.toLowerCase()]?k=this.value&&"false"!==this.value?k+('\x3d"'+this.value+'"'):"":this.noValue||(k=k+'\x3d"'+davinci.html.escapeXml(String(this.value))+'"');return k},setValue:function(k){this.value=davinci.html.unEscapeXml(k);this.onChange()}})})},"dijit/_base/sniff":function(){define([],function(){})},"dojox/dojox":function(){},
"davinci/ve/input/SmartInput":function(){define("dojo/_base/declare dojo/dom-geometry davinci/ve/commands/ModifyRichTextCommand dojox/html/entities davinci/lang/ve dijit/lang/_common xide/registry".split(" "),function(n,m,k,h,d,b,c){return n("davinci.ve.input.SmartInput",null,{property:null,_X_MOVE_RANGE:10,_Y_MOVE_RANGE:10,_POINTER_TOP_OFFSET:-13,multiLine:"false",displayOnCreate:"true",_connection:[],getHelpText:function(){return this.helpText?this.helpText:this.isHtmlSupported()?d.smartInputHelp1:
d.smartInputHelp2},isHtmlSupported:function(){this.supportsHTML||("html"==this._widget.type.match("^html")?this.supportsHTML="true":this.supportsHTML="false");return"boolean"===typeof this.supportsHTML?this.supportsHTML:"true"===this.supportsHTML},parse:function(b){return b},parseItems:function(b){this.trim&&(b=dojo.trim(b));return b.match(/[^\\][\r\n]/)?this.parseItemsInRows(b):this.parseItemsInColumns(b)},parseItemsInRows:function(b){b=this.splitRows(b);for(var c=b.length,a=0;a<c;a++){var d=b[a],
d=this.parseItem(d);b[a]=d}return b},parseItemsInColumns:function(b){b=this.splitColumns(b);for(var c=b.length,a=0;a<c;a++){var d=b[a],d=this.parseItem(d);b[a]=d}return b},parseGrid:function(b){b=this.splitRows(b);for(var c=b.length,a=0;a<c;a++){var d=this.parseItemsInColumns(b[a]);b[a]=d}return b},parseItem:function(b){var c=null,a=b,d=b.match(/^([-~!>|(*)[+\]]*) ?(.*)$/);d&&(c=d[1],a=d[2]);var d=0,g=!1,h=!1;if(c)for(var k=0;k<c.length;k++)switch(c[k]){case "-":case "~":case "!":g=!0;break;case "\x3e":d++;
break;case "*":case "+":h=!0}return{original:b,specialChars:c,text:a,indent:d,disabled:g,selected:h}},splitRows:function(b){var c=[],a,d="",g=!1;for(a=0;a<b.length;a++){var h=b.charAt(a);switch(h){case "\\":g&&(d+=h);g=!g;break;case "r":g?(d+="\r",g=!1):d+=h;break;case "n":g?(d+="\n",g=!1):d+=h;break;case "\r":case "\n":g?(d+=h,g=!1):(this.trim&&(d=dojo.trim(d)),c.push(d),d="");break;default:d+=h,g=!1}}d&&(this.trim&&(d=dojo.trim(d)),c.push(d));return c},splitColumns:function(b){var c=[],a,d="",g=
!1;for(a=0;a<b.length;a++){var h=b.charAt(a);switch(h){case "\\":g&&(d+=h);g=!g;break;case "r":g?(d+="\r",g=!1):d+=h;break;case "n":g?(d+="\n",g=!1):d+=h;break;case ",":g?(d+=h,g=!1):(this.trim&&(d=dojo.trim(d)),c.push(d),d="");break;default:d+=h,g=!1}}d&&(this.trim&&(d=dojo.trim(d)),c.push(d));return c},serializeItems:function(b){return"columns"==this.format?this.serializeColumns(b):this.serializeRows(b)},serializeColumns:function(b){for(var c=0;c<b.length;c++){var a=b[c],a=a.replace(/\\/g,"\\\\");
b[c]=a.replace(/,/g,"\\,")}return b.join(", ")},serializeRows:function(b){for(var c=0;c<b.length;c++){var a=b[c],a=a.replace(/\\/g,"\\\\");b[c]=a.replace(/\n/g,"\\\n")}return b.join("\n")},inlineEditActive:function(){return!(!this._inline||"none"==this._inline.style.display||!this._inline.eb)},show:function(b){this._widget=davinci.ve.widget.byId(b);this._inline||this._createInline();b=dojo.hitch(this,function(a){this._inline.style.display="block";this.setFormat(a);a=h.decode(a,[["\x26","amp"],['"',
"quot"],["\x3c","lt"],["\x3e","gt"]]);this._inline.eb.set("value",String(a));this.updateFormats();this.help(!1);dijit.selectInputText(this._inline.eb.textbox);this.updateSimStyle();this._inline.eb.textbox.focus()});var c=this._node(this._widget),a=this.property,d="maq_innerText"===a?"innerHTML":a,g;a&&(c?g=dojo.attr(c,d):"innerHTML"===d||"textContent"==d?(g=this._widget._srcElement.getElementText(this._context),g=g.replace(/\s+/g," ")):g=this._widget.attr(a));this.serialize?this.serialize(c||this._widget,
b,g):a&&b(g)},_createInline:function(){if(this.multiLine&&"false"!=this.multiLine){this._loading(115,200);var b=this._getTemplate()}else this._loading(85,200),b=this._getTemplate();this._inline.set("content",b);this._inline.eb=dijit.byId("davinciIleb");this._connection.push(dojo.connect(this._inline.eb,"onMouseDown",this,"stopEvent"));this._connection.push(dojo.connect(this._inline.eb,"onKeyDown",this,"stopEvent_Intercept_Enter"));this._connection.push(dojo.connect(this._inline.eb,"onKeyUp",this,
"handleEvent"));"true"==this.multiLine&&(this._connection.push(dojo.connect(this._inline.eb,"onBlur",this,"onBlur")),this._connectSimDiv());b=this._widget._srcElement.getElementText(this._context);this._inline.eb.setValue(b);this._loadingDiv.style.backgroundImage="none";this._inline._setStyleAttr({display:"block"});this._connectHelpDiv();window.setTimeout(function(){this._inline&&this._inline.eb&&this._inline.eb.textbox&&this._inline.eb.textbox.focus();this._connection.push(dojo.connect(this._inline,
"onBlur",this,"onOk"))}.bind(this),500);this.resize(null)},_connectHelpDiv:function(){var b=dojo.byId("davinci.ve.input.SmartInput_img_help");this._connection.push(dojo.connect(b,"onclick",this,"toggleHelp"));this._connection.push(dojo.connect(dijit.byId("davinci.ve.input.SmartInput_ok"),"_onSubmit",this,"onOk"));this._connection.push(dojo.connect(dijit.byId("davinci.ve.input.SmartInput_cancel"),"onClick",this,"onCancel"))},_findSmartInputContainer:function(b){return document.body},_loading:function(b,
d){this._widget&&this._widget._edit_context||console.error("have no widget");var a=this._widget._edit_context.frameNode,e=a.ownerDocument,g=e.createElement("div"),h=this._findSmartInputContainer(a);if(h){h.appendChild(g);this._loadingDiv=g;dojo.addClass(g,"smartInputLoading");g=e.createElement("div");g.id="ieb";dojo.addClass(g,"inlineEdit dijitTooltipContainer");e=e.createElement("div");e.id="iebPointer";this._inline=g;h.appendChild(g);h.appendChild(e);var k=new dojo.dnd.Moveable("ieb");this._connection.push(dojo.connect(k,
"onMoveStart",this,"onMoveStart"));this._connection.push(dojo.connect(k,"onMoveStop",this,"onMoveStop"));this._inline=new ContentPane({},g);g=c.byId("editorsStackContainer").domNode;c.byId("editorsStackContainer");g=m.position(g);this._loadingDiv.style.position="absolute";this._loadingDiv.style.left=g.x+"px";this._loadingDiv.style.top=g.y+"px";this._loadingDiv.style.width=g.w+"px";this._loadingDiv.style.height=g.h+"px";var g=this._widget.getMarginBox(),k=dojo.position(a),p=dojo.position(h),a=k.x-
p.x+h.scrollLeft-1,k=k.y-p.y+h.scrollTop-1,n=h.clientWidth,p=26,x=0;g.y+b+26<h.clientHeight?(p=g.y+26,dojo.addClass(e,"inlineEditConnectorBelow")):0<g.y-b?(p=g.y-b,x=b+12):p=26;b="0";g.x+d+20<n?b=g.x:g.x+d>n&&(d=g.x-d+g.w,0>d&&(d=0),b=d);b+=a;p+=k;this._inline._setStyleAttr({display:"block",top:p+"px",left:b+"px",padding:"1px",overflow:"hidden",backgroundImage:"none"});this._startTop=p;this._startLeft=b;dojo.style(e,"left",g.x+20+a+"px");dojo.style(e,"top",p+x+this._POINTER_TOP_OFFSET+"px")}},handleEvent:function(b){switch(b.keyCode){case 13:var c=
this.multiLine;if(!c||"false"==c||13==this._lastKeyCode||b.ctrlKey)this.onOk();else if(b.which==dojo.keys.ENTER&&b.ctrlKey)this.onOk();break;case 27:this.onCancel();break;default:this.updateFormats()}this._lastKeyCode=b.keyCode;this.updateSimStyle()},onOk:function(b){this.hide()},onCancel:function(b){this.hide(!0)},onMoveStart:function(b){dojo.style("iebPointer","display","none")},onMoveStop:function(b){var c=dojo.style("ieb","left");b=dojo.style("ieb","top");c=this._startLeft-c;b-=this._startTop;
b<this._Y_MOVE_RANGE&&b>-this._Y_MOVE_RANGE?(dojo.style("iebPointer","display",""),dojo.style("iebPointer","top",this._startTop+this._POINTER_TOP_OFFSET+b+"px"),c<this._X_MOVE_RANGE&&c>-this._X_MOVE_RANGE?dojo.style("iebPointer","display",""):dojo.style("iebPointer","display","none")):dojo.style("iebPointer","display","none")},stopEvent:function(b){b.stopPropagation();this.updateSimStyle()},stopEvent_Intercept_Enter:function(b){this.stopEvent(b);13!=b.keyCode||this.multiLine||b.preventDefault()},
_node:function(){var b,c=this.path,a=this.selector;if(c||a)b=this._widget.domNode,c&&(b=dojo.getObject(c,!1,this._widget)),a&&(b=dojo.query(a,b)[0]);return b},updateWidget:function(b){if(!this._widget._destroyed){this.parse&&(b=this.parse(b));var c=this._node(this._widget),a=this._widget.getContext(),d=this.property,g="maq_innerText"===d?"innerHTML":d;if(this.update){if(b=this.update(c||this._widget,b,d))this._widget=b;a.select(this._widget,null,!1)}else if(d){if(c)dojo.attr(c,g,b);else{c={};b&&"string"==
typeof b&&(b=b.replace(/\n/g,""));var h=null;"textContent"==d?h=b:c[d]=b;"innerHTML"===g?(c.richText=c[d],delete c[d],b=new k(this._widget,c,null,a)):b=new davinci.ve.commands.ModifyCommand(this._widget,c,h,a);this._widget._edit_context.getCommandStack().execute(b);this._widget=b.newWidget;this._widget._edit_context._focuses[0]._selectedWidget=this._widget}a.select(this._widget,null,!1)}}},hide:function(b){if(this._inline){for(var c;connection=this._connection.pop();)connection&&dojo.disconnect(connection);
var a=this._findSmartInputContainer(this._widget._edit_context.frameNode);if(a&&(this._loadingDiv&&a.removeChild(this._loadingDiv),"none"!=this._inline.style.display&&this._inline.eb)){this._value=c=this._inline.eb.get("value");this._format=this.getFormat();this._inline.style.display="none";this._inline.eb&&(this._inline.eb.destroyRecursive(),delete this._inline.eb);this._inline.destroyRecursive();delete this._inline;var d=a.ownerDocument.getElementById("iebPointer");a.removeChild(d);null==c||b||
(this.disableEncode||"text"!==this._format||(c=h.encode(c)),this.updateWidget(c));this._widget.getContext().getDocument().defaultView.focus()}}},getFormat:function(){var b=dijit.byId("davinci.ve.input.SmartInput_radio_html"),c="text";b&&b.checked&&(c="html");return c},containsHtmlMarkUp:function(b){return 0<dojo.create("div",{innerHTML:b}).children.length},toggleHelp:function(){var b=dojo.byId("davinci.ve.input.SmartInput_img_help");dojo.hasClass(b,"inlineEditHelpSelected")?this.help(!1):this.help(!0);
dojo.toggleClass(b,"inlineEditHelpSelected")},setFormat:function(b){var c=dijit.byId("davinci.ve.input.SmartInput_radio_html"),a=dijit.byId("davinci.ve.input.SmartInput_radio_text");b=dojo.create("div",{innerHTML:b}).children.length?"html":"text";"html"===b?(c.set("checked",!0),a.set("checked",!1)):(c.set("checked",!1),a.set("checked",!0));this._format=b},help:function(b){var c=dojo.byId("davinci.ve.input.SmartInput_div_help");dojo.byId("davinci.ve.input.SmartInput_radio_div");b?dojo.style(c,"display",
""):dojo.style(c,"display","none")},updateFormats:function(){var b=this._inline.eb.get("value"),c=!0;this.containsHtmlMarkUp(b)&&(c=!1);this._widget.getContext().getDojo();var a=dojo.byId("davinci.ve.input.SmartInput_radio_text_width_div"),b=h.encode(b);a.innerHTML='\x3cdiv class\x3d"dojoxEllipsis"\x3e'+dojo.replace("Plain text ({0})",[b])+"\x3c/div\x3e";b=dojo.byId("davinci.ve.input.SmartInput_radio_html_width_div");b.innerHTML='\x3cdiv id\x3d"davinci.ve.input.SmartInput_radio_html_div" class\x3d"dojoxEllipsis"\x3e'+
d.htmlMarkup+"\x3c/div\x3e";var e=dijit.byId("davinci.ve.input.SmartInput_radio_html"),k=dijit.byId("davinci.ve.input.SmartInput_radio_text"),m=dojo.byId("davinci.ve.input.SmartInput_table");e.setDisabled(c);k.setDisabled(c);c?(dojo.addClass(a,"inlineEditDisabled"),dojo.addClass(b,"inlineEditDisabled"),e.set("checked",!1),k.set("checked",!0)):(dojo.removeClass(a,"inlineEditDisabled"),dojo.removeClass(b,"inlineEditDisabled"));!c&&this.isHtmlSupported()?(dojo.style(k.domNode,"display",""),dojo.style(e.domNode,
"display",""),dojo.style(b,"display",""),dojo.style(a,"display",""),dojo.style(m,"display","")):(dojo.style(k.domNode,"display","none"),dojo.style(e.domNode,"display","none"),dojo.style(b,"display","none"),dojo.style(a,"display","none"),dojo.style(m,"display","none"))},resize:function(b){b=dojo.byId("iedResizeDiv");var c=dijit.byId("davinciIleb"),a=b.clientWidth-5,d=b.clientHeight-6,g=b.clientWidth-10,a=b.clientWidth-8,d=b.clientHeight-20,g=b.clientWidth-9,h=dojo.byId("smartInputSim");dojo.style(h,
"width",a+10+"px");this.updateSimStyle();c&&(c._setStyleAttr({width:a+"px",height:d+"px",maxHeight:d+"px"}),c._setStyleAttr({width:b.clientWidth+"px"}));c=dojo.byId("davinci.ve.input.SmartInput_radio_div");dojo.style(c,"width",g+2+"px");c=dojo.byId("davinci.ve.input.SmartInput_radio_text_width_div");dojo.style(c,"width",b.clientWidth-50+"px");c=dojo.byId("davinci.ve.input.SmartInput_radio_html_width_div");dojo.style(c,"width",b.clientWidth-50+"px")},onBlur:function(b){this.updateSimStyle(b)},updateSimStyle:function(b){var c=
dijit.byId("davinciIleb");if(b=dojo.byId("smartInputSim"))c=dojo.style(c.domNode),dojo.style(b,"borderColor",c.borderTopColor),dojo.style(b,"backgroundColor",c.backgroundColor)},_getTemplate:function(){var c='\x3cdiv id\x3d"iedResizeDiv" class\x3d"iedResizeDiv" \x3e\x3ctextarea  dojoType\x3d"dijit.form.SimpleTextarea" name\x3d"davinciIleb" trim\x3d"true" id\x3d"davinciIleb" class\x3d"smartInputTextArea" \x3e\x3c/textarea\x3e\x3cdiv id\x3d"smartInputSim" class\x3d"smartInputSim" \x3e\x3c/div\x3e\x3c/div\x3e';
"true"===this.multiLine&&(c='\x3cdiv id\x3d"iedResizeDiv" class\x3d"iedResizeDiv" \x3e\x3ctextarea  dojoType\x3d"dijit.form.SimpleTextarea" name\x3d"davinciIleb" trim\x3d"true" id\x3d"davinciIleb" class\x3d"smartInputTextAreaMulti" \x3e\x3c/textarea\x3e\x3cdiv id\x3d"smartInputSim" class\x3d"smartInputSim" \x3e\x3c/div\x3e\x3c/div\x3e');return""+c+'\x3cdiv  id\x3d"davinci.ve.input.SmartInput_div"  class\x3d"davinciVeInputSmartInputDiv" \x3e\x3cdiv id\x3d"davinci.ve.input.SmartInput_radio_div" class\x3d"smartInputRadioDiv" \x3e\x3ctable id\x3d"davinci.ve.input.SmartInput_table"\x3e \x3ctbody\x3e\x3ctr\x3e \x3ctd class\x3d"smartInputTd1" \x3e \x3cinput id\x3d"davinci.ve.input.SmartInput_radio_text" showlabel\x3d"true" type\x3d"radio" dojoType\x3d"dijit.form.RadioButton" disabled\x3d"false" readOnly\x3d"false" intermediateChanges\x3d"false" checked\x3d"true"\x3e \x3c/input\x3e \x3c/td\x3e \x3ctd class\x3d"smartInputTd2" \x3e\x3cdiv id\x3d"davinci.ve.input.SmartInput_radio_text_width_div" class\x3d"smartInputRadioTextDiv"\x3e\x3c/div\x3e\x3c/td\x3e \x3c/tr\x3e\x3ctr\x3e \x3ctd class\x3d"smartInputTd1"\x3e \x3cinput id\x3d"davinci.ve.input.SmartInput_radio_html" showlabel\x3d"true" type\x3d"radio" dojoType\x3d"dijit.form.RadioButton"\x3e \x3c/input\x3e  \x3c/td\x3e \x3ctd class\x3d"smartInputTd2"\x3e\x3cdiv id\x3d"davinci.ve.input.SmartInput_radio_html_width_div" class\x3d"smartInputRadioTextDiv"\x3e\x3c/div\x3e\x3c/td\x3e \x3c/tr\x3e \x3c/tbody\x3e\x3c/table\x3e \x3cdiv class\x3d"smartInputHelpDiv" \x3e \x3cspan id\x3d"davinci.ve.input.SmartInput_img_help"  title\x3d"Help" class\x3d"inlineEditHelp" \x3e \x3c/span\x3e\x3cspan class\x3d"smartInputSpacerSpan" \x3e\x3cbutton id\x3d"davinci.ve.input.SmartInput_ok"  dojoType\x3d"dijit.form.Button" type\x3d"submit" class\x3d"inlineEditHelpOk" \x3e'+
b.buttonOk+'\x3c/button\x3e \x3cbutton id\x3ddavinci.ve.input.SmartInput_cancel dojoType\x3d"dijit.form.Button" class\x3d"inlineEditHelpCancel"\x3e '+b.buttonCancel+'\x3c/button\x3e  \x3c/span\x3e   \x3c/div\x3e \x3cdiv id\x3d"davinci.ve.input.SmartInput_div_help" style\x3d"display:none;" class\x3d"smartInputHelpTextDiv" \x3e \x3cdiv dojoType\x3d"dijit.layout.ContentPane" class\x3d"smartInputHelpTextDivContentPane "style\x3d"padding:0;" \x3e'+this.getHelpText()+'\x3c/div\x3e \x3cdiv style\x3d"text-align: left; padding:0; height:2px;" \x3e\x3c/div\x3e \x3c/div\x3e \x3c/div\x3e\x3c/div\x3e '},
_connectResizeHandle:function(){},_connectSimDiv:function(){this._connection.push(dojo.connect(this._inline.eb,"onFocus",this,"updateSimStyle"));this._connection.push(dojo.connect(this._inline.eb,"onMouseOver",this,"updateSimStyle"));this._connection.push(dojo.connect(this._inline.eb,"onMouseOut",this,"updateSimStyle"));this._connection.push(dojo.connect(dojo.byId(" davinci.ve.input.SmartInput_div"),"onclick",this,"updateSimStyle"))}})})},"xblox/model/Expression":function(){define(["xdojo/declare",
"xdojo/has","xide/utils","xide/types","xblox/model/ModelBase"],function(n,m,k,h,d,b,c){var g="undefined"!==typeof window?window.console:global.console;return n("xblox.model.Expression",[d],{id:null,context:null,variableDelimiters:{begin:"[",end:"]"},blockCallDelimiters:{begin:"{",end:"}"},expressionCache:null,variableFuncCache:null,constructor:function(){this.reset()},reset:function(){this.expressionCache={};this.variableFuncCache={}},replaceVariables:function(b,a,c,d,g,k,m,n){var e=h.CIFLAG;m=m||
this.variableDelimiters;n=n||e.NONE;n&e.DONT_ESCAPE&&(d=!1);n&e.DONT_PARSE&&(c=!1);var p=this.findOccurrences(a,m);if(p)for(var q=0;q<p.length;q++){var r=p[q],r=r.replace(m.begin,""),r=r.replace(m.end,"");(r=this._getVar(b,r))&&r.flags&e.DONT_PARSE&&(c=!1);var u=null;if(r){if(k){a=a.replace(p[q],"this.getVariable('"+r.name+"')");continue}u=this.getValue(r.value);g&&r.name in g&&(u=g[r.name]);if(this.isScript(u)&&!1!==c)try{var v=b.variablesToJavascript(r,!0);v&&(u=v+u);var w=(new Function("{\n"+u+
"\n}")).call(b.context||{});"undefined"===w||"undefined"===typeof w?u=""+r.value:(u=w,n&e.DONT_ESCAPE||(u="'"+u+"'"))}catch(F){}else this.isNumber(u)||!1!==d&&(u="'"+u+"'")}else u=p[q];a=a.replace(p[q],u)}return a},parse:function(b,a,c,d,h,k,m,n,x){a=this.replaceAll("''","'",a);c=k||b.context||b.getContext()||{};a=this.replaceVariables(b,a,null,null,m,null!=c.getVariable,null,x);b=this.isScript(a);if(!b&&(this.isString(a)||this.isNumber(a)))return d&&d("Expression "+a+" evaluates to "+a),a;-1==a.indexOf("return")&&
b&&(a="return "+a);b=this;try{a=this.replaceAll("''","'",a);var e=this.expressionCache[a];e||(e=new Function("{"+a+"; }"),this.expressionCache[a]=e);b=e.apply(c,n)}catch(z){return g.error("invalid expression : \n"+a,z),h&&h("invalid expression : \n"+a+": "+z,z),""+a}d&&d("Expression "+a+" evaluates to "+b);return b},parseVariable:function(b,a,c,d,g,h,k){var e=""+a.value;c=c||"";!1!==g?(g=this.variableFuncCache[b.id+"|"+a.title],g||(g=new Function("{"+c+e+"}"),this.variableFuncCache[b.id+"|"+a.title]=
g)):g=new Function("{"+c+e+"}");b=g.apply(h||b.context||{},k||[]);return e="undefined"===b||"undefined"===typeof b?""+a.value:this.isNumber(b)||!1===d?b:"'"+b+"'"},replaceBlockCalls:function(b,a){var c=this.findOccurrences(a,this.blockCallDelimiters);if(c)for(var d=0;d<c.length;d++){var g=this._removeDelimiters(c[d],this.blockCallDelimiters),g=b.solveBlock(g).join("\n");a=a.replace(c[d],g)}return a},_getVar:function(b,a){return b.getVariable(this._getVarName(a))},_getVarName:function(b){return this._removeDelimiters(b,
this.variableDelimiters)},_removeDelimiters:function(b,a){return b.replace(a.begin,"").replace(a.end,"")},_escapeRegExp:function(b){for(var a="[](){}*+.".split(""),c=0;c<a.length;c++)b=b.replace(a[c],"\\"+a[c]);return b},findOccurrences:function(b,a){var c=this._escapeRegExp(a.begin);a=this._escapeRegExp(a.end);return b.match(new RegExp(c+"([^"+a+"]*)"+a,"g"))}})})},"dojo/query":function(){define("./_base/kernel ./has ./dom ./on ./_base/array ./_base/lang ./selector/_loader ./selector/_loader!default".split(" "),
function(n,m,k,h,d,b,c,g){function p(a,b){var c=function(c,d){if("string"==typeof d&&(d=k.byId(d),!d))return new b([]);c="string"==typeof c?a(c,d):c?c.end&&c.on?c:[c]:[];return c.end&&c.on?c:new b(c)};c.matches=a.match||function(a,b,d){return 0<c.filter([a],b,d).length};c.filter=a.filter||function(a,b,e){return c(b,e).filter(function(b){return-1<d.indexOf(a,b)})};if("function"!=typeof a){var e=a.search;a=function(a,b){return e(b||document,a)}}return c}m.add("array-extensible",function(){return 1==
b.delegate([],{length:1}).length&&!m("bug-for-in-skips-shadowed")});var a=Array.prototype,e=a.slice,q=a.concat,u=d.forEach,w=function(a,b,c){b=[0].concat(e.call(b,0));c=c||n.global;return function(d){b[0]=d;return a.apply(c,b)}},r=function(a){var c=this instanceof v&&m("array-extensible");"number"==typeof a&&(a=Array(a));var d=a&&"length"in a?a:arguments;if(c||!d.sort){for(var e=c?this:[],g=e.length=d.length,h=0;h<g;h++)e[h]=d[h];if(c)return e;d=e}b._mixin(d,x);d._NodeListCtor=function(a){return v(a)};
return d},v=r,x=v.prototype=m("array-extensible")?[]:{};v._wrap=x._wrap=function(a,b,c){a=new (c||this._NodeListCtor||v)(a);return b?a._stash(b):a};v._adaptAsMap=function(a,b){return function(){return this.map(w(a,arguments,b))}};v._adaptAsForEach=function(a,b){return function(){this.forEach(w(a,arguments,b));return this}};v._adaptAsFilter=function(a,b){return function(){return this.filter(w(a,arguments,b))}};v._adaptWithCondition=function(a,b,c){return function(){var d=arguments,e=w(a,d,c);if(b.call(c||
n.global,d))return this.map(e);this.forEach(e);return this}};u(["slice","splice"],function(b){var c=a[b];x[b]=function(){return this._wrap(c.apply(this,arguments),"slice"==b?this:null)}});u(["indexOf","lastIndexOf","every","some"],function(a){var b=d[a];x[a]=function(){return b.apply(n,[this].concat(e.call(arguments,0)))}});b.extend(r,{constructor:v,_NodeListCtor:v,toString:function(){return this.join(",")},_stash:function(a){this._parent=a;return this},on:function(a,b){var c=this.map(function(c){return h(c,
a,b)});c.remove=function(){for(var a=0;a<c.length;a++)c[a].remove()};return c},end:function(){return this._parent?this._parent:new this._NodeListCtor(0)},concat:function(a){var b=e.call(this,0),c=d.map(arguments,function(a){return e.call(a,0)});return this._wrap(q.apply(b,c),this)},map:function(a,b){return this._wrap(d.map(this,a,b),this)},forEach:function(a,b){u(this,a,b);return this},filter:function(a){var b=arguments,c=this,e=0;if("string"==typeof a){c=A._filterResult(this,b[0]);if(1==b.length)return c._stash(this);
e=1}return this._wrap(d.filter(c,b[e],b[e+1]),this)},instantiate:function(a,c){var d=b.isFunction(a)?a:b.getObject(a);c=c||{};return this.forEach(function(a){new d(c,a)})},at:function(){var a=new this._NodeListCtor(0);u(arguments,function(b){0>b&&(b=this.length+b);this[b]&&a.push(this[b])},this);return a._stash(this)}});var A=p(g,r);n.query=p(g,function(a){return r(a)});A.load=function(a,b,d){c.load(a,b,function(a){d(p(a,r))})};n._filterQueryResult=A._filterResult=function(a,b,c){return new r(A.filter(a,
b,c))};n.NodeList=A.NodeList=r;return A})},"dojo/_base/array":function(){define(["./kernel","../has","./lang"],function(n,m,k){function h(a){return c[a]=new Function("item","index","array",a)}function d(a){var b=!a;return function(d,e,g){var k=0,m=d&&d.length||0,n;m&&"string"==typeof d&&(d=d.split(""));"string"==typeof e&&(e=c[e]||h(e));if(g)for(;k<m;++k){if(n=!e.call(g,d[k],k,d),a^n)return!n}else for(;k<m;++k)if(n=!e(d[k],k,d),a^n)return!n;return b}}function b(a){var b=1,c=0,d=0;a||(b=c=d=-1);return function(e,
h,k,m){if(m&&0<b)return p.lastIndexOf(e,h,k);m=e&&e.length||0;var n=a?m+d:c;k===g?k=a?c:m+d:0>k?(k=m+k,0>k&&(k=c)):k=k>=m?m+d:k;for(m&&"string"==typeof e&&(e=e.split(""));k!=n;k+=b)if(e[k]==h)return k;return-1}}var c={},g,p={every:d(!1),some:d(!0),indexOf:b(!0),lastIndexOf:b(!1),forEach:function(a,b,d){var e=0,g=a&&a.length||0;g&&"string"==typeof a&&(a=a.split(""));"string"==typeof b&&(b=c[b]||h(b));if(d)for(;e<g;++e)b.call(d,a[e],e,a);else for(;e<g;++e)b(a[e],e,a)},map:function(a,b,d,g){var e=0,
k=a&&a.length||0;g=new (g||Array)(k);k&&"string"==typeof a&&(a=a.split(""));"string"==typeof b&&(b=c[b]||h(b));if(d)for(;e<k;++e)g[e]=b.call(d,a[e],e,a);else for(;e<k;++e)g[e]=b(a[e],e,a);return g},filter:function(a,b,d){var e=0,g=a&&a.length||0,k=[],m;g&&"string"==typeof a&&(a=a.split(""));"string"==typeof b&&(b=c[b]||h(b));if(d)for(;e<g;++e)m=a[e],b.call(d,m,e,a)&&k.push(m);else for(;e<g;++e)m=a[e],b(m,e,a)&&k.push(m);return k},clearCache:function(){c={}}};k.mixin(n,p);return p})},"dijit/main":function(){define(["dojo/_base/kernel"],
function(n){return n.dijit})},"xide/data/ReferenceMapping":function(){define(["dcl/dcl","xide/lodash"],function(n,m){return n(null,{mapping:null,getMapping:function(k){this.mapping||(this.mapping={});return this.mapping[k]},addMapping:function(k,h,d){this.mapping||(this.mapping={});!this.mapping[k]&&(this.mapping[k]=[]);this.mapping[k].push({from:h,to:d})},onSourceChanged:function(k,h,d){if(k=(d=this.getMapping(d))?m.find(d,{from:k}):null)return this.set(k.to,h)}})})},"xcf/manager/DeviceManager_Server":function(){define(["dcl/dcl"],
function(n){return n(null,{})})},"dijit/Destroyable":function(){define(["dojo/_base/array","dojo/aspect","dojo/_base/declare"],function(n,m,k){return k("dijit.Destroyable",null,{destroy:function(h){this._destroyed=!0},own:function(){var h=["destroyRecursive","destroy","remove"];n.forEach(arguments,function(d){function b(){g.remove();n.forEach(k,function(a){a.remove()})}var c,g=m.before(this,"destroy",function(a){d[c](a)}),k=[];d.then?(c="cancel",d.then(b,b)):n.forEach(h,function(a){"function"===typeof d[a]&&
(c||(c=a),k.push(m.after(d,a,b,!0)))})},this);return arguments}})})},"xide/views/_LayoutMixin":function(){define("xdojo/declare dcl/dcl xide/types xdocker/Docker2 xide/utils xide/layout/_TabContainer".split(" "),function(n,m,k,h,d,b){var c={_docker:null,_parent:null,__right:null,__bottom:null,__masterPanel:null,__bottomTabContainer:null,defaultPanelOptions:null,defaultPanelType:"DefaultFixed",reparent:!0,getTop:function(){return this._parent},resize:function(){this._docker&&this._docker.resize();
if(this.inherited)return this.inherited(arguments)},getDockerTargetNode:function(){return null},getDocker:function(b){if(!this._docker){var c=this._domNode||this.domNode;b=this.getDockerTargetNode()||b||c.parentNode;this._docker=h.createDefault(b);this._oldParent=this._parent;b=this.defaultPanelOptions||{w:"100%",title:!1};var a=this._docker.addPanel(this.defaultPanelType,k.DOCKER.TOP,null,b);this.reparent&&dojo.place(c,a.containerNode);this.reparent&&this._docker.$container.css("top",0);this.__masterPanel=
this._parent=a;!b.title&&a._parent.showTitlebar(!1);c.id=this.id;this.add(this._docker)}return this._docker},getPanelSplitPosition:function(b){return b==k.DOCKER.DOCK.RIGHT&&this.__right&&(b=this.__right.getSplitter())?b.pos():!1},setPanelSplitPosition:function(b,c){var a=this.__right;b==k.DOCKER.DOCK.RIGHT&&a&&(b=a.getSplitter(),1==c?(b._isToggledMin=!0,b._isToggledMax=!0):1>c&&0<c&&(b._isToggledMin=!1,b._isToggledMax=!1),b.pos(c))},openRight:function(b){var c=this.getPanelSplitPosition(k.DOCKER.DOCK.RIGHT);
!b&&1>c?this.setPanelSplitPosition(k.DOCKER.DOCK.RIGHT,1):b&&1==c&&this.setPanelSplitPosition(k.DOCKER.DOCK.RIGHT,.6)},_getRight:function(){return this.__right},_getBottom:function(){return this.__bottom},getBottomTabContainer:function(c){this.__bottomTabContainer||!1===c||(this.__bottomTabContainer=d.addWidget(b,{direction:"below"},null,this.getBottomPanel(!1,.2),!0));return this.__bottomTabContainer},_addPanel:function(b,c,a,d,h,k){b=this.getDocker().addPanel(h||"DefaultFixed",c,!1===k?null:k||
this._parent,b||{w:"30%",h:"30%",title:a||!1});a||b._parent.showTitlebar(!1);d&&(a=b.getSplitter(),1==d||0==d?a.pos(d):a.pos(.6));return b},getBottomPanel:function(b,c,a,e,h){return this.__bottom||this._getBottom()?this.__bottom||this._getBottom():this.__bottom=this._addPanel(d.mixin({w:"30%",title:b||"  "},e),k.DOCKER.DOCK.BOTTOM,b,c,a,h)},getRightPanel:function(b,c,a,e){if(this.__right||this._getRight())return this.__right||this._getRight();e=d.mixin({w:"30%",title:b||"  "},e);return this.__right=
b=this._addPanel(e,k.DOCKER.DOCK.RIGHT,b,null,a,e.target)}};n=n("xide/views/_LayoutMixin",null,c);n.Implementation=c;n.dcl=m(null,c);return n})},"xblox/model/server/Shell":function(){define(["dcl/dcl","xblox/model/server/ServerBlock","xide/utils","xcf/model/Command"],function(n,m,k,h){return n([h,m],{declaredClass:"xblox.model.server.Shell",description:"Runs a JSON-RPC-2.0 method on the server",name:"Run Shell",method:"",args:"",deferred:!0,defaultServiceClass:"XShell",defaultServiceMethod:"run",
sharable:!0,onMethodChanged:function(d,b){this.method=d;k.isValidString(this.args)||(d=this.getServerParams())&&this._updateArgs(d,b)},_getArgs:function(){var d=k.getJson(this.args||"[]"),b=[];if(d){var c=!1;d&&d[0]&&null!=d[0].optional&&(c=!0);if(c)for(c=0;c<d.length;c++){var g=d[c],h=g.value;-1!=g.name.indexOf("Base64")&&(h=this.getService().base64_encode(h));"notset"!==g.value?-1!=g.value.indexOf("[")&&-1!=g.value.indexOf("]")?(h=this.scope.expressionModel.replaceVariables(this.scope,g.value,!1,
!1),-1!=g.name.indexOf("Base64")&&(h=this.getService().base64_encode(h)),b.push(h)):b.push(h||g["default"]):b.push(g["default"]||h)}}else return[this.args];return b},_updateArgs:function(d,b){if(b=this.utils.getCIWidgetByName(b,"args"))d=JSON.stringify(d),b.editBox.set("value",d),this.args=d},getServerParams:function(){var d=this.getService().getParameterMap(this.getServiceClass(),this.getServiceMethod());if(d)for(var b=0;b<d.length;b++)d[b].value="notset";return d},solve:function(d,b,c,g,h,a){this._return=
[];this._lastResult=null;b=this._lastSettings=b||this._lastSettings;b=this.getInstance();d=d.expressionModel.replaceVariables(d,this.method,!1,!1);b.runShell(d,k.mixin({},{}),this.id,this.id,this)},toText:function(){var d=this.getBlockIcon()+" "+this.name+" :: ";this.method&&(d+=this.method.substr(0,50));return d},canAdd:function(){return[]},getFields:function(){var d=this.inherited(arguments)||this.getDefaultFields(),b=this;d.push(k.createCI("value",25,this.method,{group:"General",title:"Cmd",dst:"method",
delegate:{runExpression:function(c,d,h){b.method=c;b.solve(b.scope,null,d,h)}}}));return d},getBlockIcon:function(){return'\x3cspan class\x3d"fa-plug"\x3e\x3c/span\x3e'},mayHaveChildren:function(d){return null!=this.items&&0<this.items.length},getChildren:function(d){return this.items},onChangeField:function(d,b,c){if("method"===d)this.onMethodChanged(b,c)},isInValidState:function(){return null!=this.getService()},getService:function(){var d=this.scope.getService();d||console.error("have no service object");
return d},getServiceClass:function(){return this.method.split("::")[0]||this.defaultServiceClass},getServiceMethod:function(){return this.method.split("::")[1]||this.defaultServiceMethod},hasMethod:function(d){return this.isInValidState()&&null!=this.getService()[this.getServiceClass()]&&null!=this.getService()[this.getServiceClass()][this.getServiceMethod()]},hasServerClass:function(d){return this.isInValidState()&&null!=this.getService()[this.getServiceClass()]},getServerFunction:function(){return this.isInValidState()&&
this.getServiceClass()&&this.getServiceMethod()?this.getService()[this.getServiceClass()][this.getServiceMethod()]:null}})})},"davinci/ve/actions/SurroundAction":function(){define("dojo/_base/declare dojo/_base/array dojo/dom-style davinci/ve/actions/ContextAction davinci/commands/CompoundCommand davinci/ve/commands/AddCommand davinci/ve/commands/StyleCommand davinci/ve/commands/MoveCommand davinci/ve/commands/ResizeCommand davinci/ve/commands/ReparentCommand davinci/ve/tools/CreateTool davinci/ve/widget davinci/ve/utils/GeomUtils".split(" "),
function(n,m,k,h,d,b,c,g,p,a,e,q,u){return n("davinci.ve.actions.SurroundAction",[h],{run:function(h){h=this.fixupContext(h);var n,v,w,A,z=[],y,B=this.item.surroundWithTagName;if(B){dojo.withDoc(h.getDocument(),function(){y=q.createWidget({type:"html."+B,properties:{},children:[],context:h})});var C=new d,E=[].concat(h.getSelection()),F=E[0],G=F.getParent();u.getMarginBoxPageCoords(G.domNode);E.sort(function(a,b){return G.indexOf(a)-G.indexOf(b)});var D=h.getDocument(),H=D.defaultView&&D.defaultView.dojo;
H.style||(H.style=k);(D=m.every(E,function(a){if(H)return position_prop=H.style(a.domNode,"position"),"absolute"==position_prop}))&&m.forEach(E,function(a,b){z.push(u.getMarginBoxPageCoordsCached(a.domNode));C.add(new g(a,z[b].l,z[b].t,null,z[b]))});C.add(new b(y,G,G.indexOf(F)));e.prototype.checkAddToCurrentState(C,y);D&&(C.add(new c(y,[{position:"absolute"}])),m.forEach(E,function(a,b){a=z[b].l+z[b].w;var c=z[b].t+z[b].h;if(0==b||z[b].l<n)n=z[b].l;if(0==b||z[b].t<v)v=z[b].t;if(0==b||a>w)w=a;if(0==
b||c>A)A=c}),C.add(new g(y,n,v)),C.add(new p(y,w-n,A-v)));m.forEach(E,function(b){C.add(new a(b,y,"last"))});D&&m.forEach(E,function(a,b){C.add(new g(a,z[b].l,z[b].t,null,z[b]))});h.getCommandStack().execute(C);h.select(y)}else console.error("missing surroundWithTagName")},isEnabled:function(a){if((a=this.fixupContext(a))&&a.getSelection().length){var b=a.getSelection()[0].getParent(),c=[];if(!b||!b.length)return!1;if(m.every(a.getSelection(),function(a){var d=a.getParent();if(!d)return!1;c.push(b.indexOf(a));
return b.id==d.id})){c.sort();var d;for(a=c.shift();c.length;a=d)if(d=c.shift(),d!=a+1)return!1;return!0}}return!1}})})},"xide/factory":function(){define(["dcl/dcl"],function(n){return new n(null,{declaredClass:"xide/factory"})})},"xblox/model/functions/SetProperties":function(){define("dcl/dcl xide/utils xide/types dojo/Deferred xblox/model/Block xide/lodash".split(" "),function(n,m,k,h,d,b){return n(d,{declaredClass:"xblox.model.functions.SetProperties",command:"Select block",icon:"",args:null,
_timeout:100,hasInlineEdits:!1,solve:function(b,d){var c=new h;if(this.command){if((b=b.resolveBlock(this.command))&&this.props){for(var a in this.props)b.set(a,this.props[a]),b[a]=this.props[a],b.onChangeField&&b.onChangeField(a,this.props[a]);this.onSuccess(this,d)}else this.onFailed(this,d);c.resolve([])}return c},makeEditable:function(b,d,h,a,e){return'\x3ca   tabIndex\x3d"-1" pos\x3d\''+d+"' display-mode\x3d'"+(e||"popup")+"' display-type\x3d'"+(h||"text")+"' data-prop\x3d'"+b+"' data-title\x3d'"+
a+"' class\x3d'editable editable-click'  href\x3d'#'\x3e"+this[b]+"\x3c/a\x3e"},getFieldOptions:function(b){if("command"===b)return this.scope.getCommandsAsOptions("text")},toText:function(){var b="Unknown",d=this.scope.getBlock(this.command);d&&(b=d.name);-1!==this.command.indexOf("://")&&(b='\x3cspan class\x3d"text-info"\x3e'+this.scope.toFriendlyName(this,this.command)+"\x3c/span\x3e");return this.getBlockIcon("D")+"Set Properties : "+b},serializeObject:function(b){return"props"===b},onChangeField:function(b){"command"===
b&&(delete this.props,this.props={})},init:function(){this.props&&b.isString(this.props)&&(this.props=m.fromJson(this.props))},getFields:function(){var c=this.inherited(arguments)||this.getDefaultFields();c.push(m.createCI("value","xcf.widgets.CommandPicker",this.command,{group:"General",title:"Command",dst:"command",options:this.scope.getCommandsAsOptions(),block:this,pickerType:"command",value:this.command}));var d=this.scope.resolveBlock(this.command);if(d&&d.getFields){this.props||(this.props=
{});var d=d.getFields(),h=b.find(d,{dst:"description"});d.remove(h);b.each(d,function(a){a.group="Properties";a.value=m.getAt(this.props,a.dst,a.value);a.dst="props."+a.dst},this);c=c.concat(d)}return c}})})},"xide/widgets/ExpressionEditor":function(){define(["dcl/dcl","xide/utils","xide/widgets/WidgetBase","xide/views/ConsoleView","xide/views/_LayoutMixin"],function(n,m,k,h,d){k=n([k,d.dcl,h.HandlerClass],{type:"javascript",reparent:!1,consoleTabTitle:"Editor",consoleTabOptions:null,consoleTabType:"DefaultTab",
EditorClass:null,declaredClass:"xide.widgets.ExpressionEditor",instantChanges:!1,templateString:'\x3cdiv class\x3d"" style\x3d"height: inherit"\x3e\x3cdiv attachTo\x3d"consoleParent" class\x3d"" style\x3d"height:inherit;padding: 0;margin: 0;"\x3e\x3c/div\x3e\x3c/div\x3e',onAddEditorActions:function(b){b.actions.push(b.owner.createAction({label:"Send",command:"Console/Send",icon:"fa-paper-plane",group:"Console",tab:"Home",mixin:{addPermission:!0},handler:function(){debugger}}))},getConsoleClass:function(){return h.ConsoleWidget},
startup:n.superCall(function(b){return function(){b.call(this);var c=this;this.EditorClass=this.EditorClass||n(h.Editor,{});var d={saveContent:function(a){c.setValue(a)}};this.editorArgs=this.editorArgs||{options:{showGutter:!1,wordWrap:!0},storeDelegate:d};var d=this.consoleParent,k=this.userData.value||this.value,d=m.addWidget(this.getConsoleClass(),{delegate:this,type:this.type,value:k,ctx:this.ctx},this,d,!0);this.add(d,null,!1);!1!==this.instantChanges&&d._on("change",function(a){k!==a&&c.setValue(a)});
this.onCreatedConsole&&this.onCreatedConsole(d);return this.console=d}})});n.chainAfter(k,"onAddEditorActions");return k})},"xide/widgets/WidgetBase":function(){define("dcl/dcl dojo/_base/connect dojo/dom-class xide/widgets/TemplatedWidgetBase xide/utils xide/factory xide/types dojo/dom-construct xide/lodash xide/$".split(" "),function(n,m,k,h,d,b,c,g,p,a){h=n([h],{declaredClass:"xide.widgets.WidgetBase",data:null,model:null,widgets:null,delegate:null,helpNodes:null,currentWidget:null,currentDataItem:null,
didLoad:!1,isSubWidget:!1,title:"NoTitle",value:"Unset",minHeight:"60px;",previewNode:null,button0:null,valueNode:null,button1:null,button2:null,button3:null,wButton2:null,wButton3:null,nativeWidget:null,isInherited:!1,lastHeight:null,titleNode:null,extensionRoot:null,extensionTag:"td",extensionClass:"extension",_didSendReady:!1,styles:null,active:!0,vertical:!1,changed:!1,titleColumn:null,templateString:"\x3cdiv class\x3d'widgetContainer widgetBorder widgetTable widget' style\x3d''\x3e\x3ctable border\x3d'0' cellpadding\x3d'5px' width\x3d'100%'\x3e\x3ctbody align\x3d'left'\x3e\x3ctr attachTo\x3d'extensionRoot' valign\x3d'middle' style\x3d'height:90%'\x3e\x3ctd attachTo\x3d'titleColumn' width\x3d'20%' class\x3d'widgetTitle'\x3e\x3cspan attachTo\x3d'titleNode'\x3e${!title}\x3c/span\x3e\x3c/td\x3e\x3ctd valign\x3d'middle' class\x3d'widgetValue' attachTo\x3d'valueNode'\x3e${!value}\x3c/td\x3e\x3ctd class\x3d'extension' attachTo\x3d'previewNode'\x3e\x3c/td\x3e\x3ctd class\x3d'extension' attachTo\x3d'button0'\x3e\x3c/td\x3e\x3ctd class\x3d'extension' attachTo\x3d'button1'\x3e\x3c/td\x3e\x3c/tr\x3e\x3c/tbody\x3e\x3c/table\x3e\x3cdiv attachTo\x3d'expander' style\x3d'width:100%;'\x3e\x3c/div\x3e\x3cdiv attachTo\x3d'last'\x3e\x3c/div\x3e\x3c/div\x3e",
postMixInProperties:function(){this.title=(this.title||"").replace(/([a-z](?=[A-Z]))/g,"$1 ")},setActive:function(a){this.active=!1;this.userData&&(this.userData._active=a)},setStoreDelegate:function(a){this.storeDelegate=a},getExtensionRoot:function(){return this.extensionRoot},getFreeExtensionSlot:function(a){a=a||this.getExtensionRoot();if(!a)return null;var b=d.findEmptyNode(a,".extension");b||(b=g.create(this.extensionTag,{className:this.extensionClass},a));return b},getCurrentPlatform:function(){return this._currentPlatform},
getRootId:function(){return this.id},save:function(){this.publish(c.EVENTS.ON_CI_UPDATE,{owner:this.delegate||this.owner,ci:this.userData,newValue:this.getValue(),storeItem:this.storeItem})},setValue:function(a){var b=this.userData||{},e=d.getCIValueByField(b,"value");d.setCIValueByField(b,"value",a);1==this.skipSave?this.skipSave=!1:(a={owner:this.delegate||this.owner,ci:b,newValue:a,oldValue:e,storeItem:this.storeItem},this.publish(c.EVENTS.ON_CI_UPDATE,a),this._emit("valueChanged",a))},getValue:function(a,
b){return d.getCIValueByField(this.userData,b||"value")},clearValue:function(){},empty:function(){},fillTemplate:function(){this.nativeWidget&&(this.valueNode.innerHTML="",this.valueNode.appendChild(this.nativeWidget.domNode))},startup:function(){null==this.value&&(this.value="Unset");if(!this._started){var a=this.inherited(arguments);this.userData&&this.userData.inherited&&1==this.userData.inherited&&(this.isInherited=!0,k.remove(this.domNode,"widgetContainer"),this.buildToolbar(),k.add(this.domNode,
"widgetContainerAlternate"));this.userData.toolTip&&this.initToolTip(this.userData.toolTip);this.nativeWidget&&this.setupNativeWidgetHandler&&this.setupNativeWidgetHandler();this.updateTitleNode(this.title);0==this.showLabel&&d.destroy(this.titleColumn);return a}},connectEditBox:function(a,g){function e(a){g&&g(a);var e=d.toString(h.userData.value);a!==e&&(h.userData.changed=!0,h.userData.active=!0,h.serialize&&(a=h.serialize()),d.setCIValueByField(h.userData,"value",a),b.publish(c.EVENTS.ON_CI_UPDATE,
{owner:h.delegate||h.owner,ci:h.userData,newValue:a,storeItem:h.storeItem},h))}var h=this;a._on?a._on("change",e):m.connect(a,"onChange",e)},onReady:function(){this._didSendReady||(b.publish(c.EVENTS.ON_WIDGET_READY,{ci:this.userData,widget:this,storeItem:this.storeItem,owner:this.owner}),this._didSendReady=!0);var d=a(this.domNode);this.userData&&!0===this.userData.vertical&&d.addClass("vertical");var g=p.last(this.declaredClass.split("."));d.addClass(g);this.userData&&(d=this.userData,(g=c.getCICallbacks(d.id))&&
g.on&&g.on.render&&g.on.render(this.owner,this,d),d=d.description,!this.tooltip&&d&&5<d.length&&"Options"!==d&&(d=(this.nativeWidget?a(this.nativeWidget):a(this.domNode)).tooltip({title:d,placement:"bottom",container:"body"}),this.tooltip=d.data()["bs.tooltip"],this.add(d)))},onDidRenderWidgets:function(a,b){},onAttached:function(a){},set:function(b,c,d){if("disabled"===b)a(this.domNode)[!0===c?"attr":"removeAttr"](b,c)}});n.chainAfter(h,"destroy");return h})},"davinci/workbench/ViewPart":function(){define(["dojo/_base/declare",
"./_ToolbaredContainer","../ve/States","../Runtime"],function(n,m,k,h){return n("davinci.workbench.ViewPart",m,{constructor:function(d,b){this.viewExt=d.view;this.subscriptions=[];this.publishing={}},startup:function(){this.inherited(arguments);this.domNode.view=this;this.viewExt.startup&&this.viewExt.startup()},subscribe:function(d,b){this.subscriptions.push(dojo.subscribe(d,this,b))},publish:function(d,b){this.publishing[d]=!0;try{dojo.publish(d,b)}catch(c){console.error(c)}delete this.publishing[d]},
destroy:function(){dojo.forEach(this.subscriptions,dojo.unsubscribe);delete this.subscriptions},_getViewActions:function(){var d=this.toolbarID||this.viewExt.id,b=[];h.getExtensions("davinci.viewActions",function(c){if(d==c.viewContribution.targetID)return b.push(c.viewContribution),!0});return b}})})},"xide/factory/Events":function(){define("xide/factory dojo/_base/connect dojo/_base/lang dojo/on dojo/has xide/lodash".split(" "),function(n,m,k,h,d){var b={click:null,dblclick:null,mousedown:null,
mouseup:null,mouseover:null,mousemove:null,mouseout:null,keypress:null,keydown:null,keyup:null,focus:null,blur:null,change:null};n.publish=function(b,d,h,a){d=d?_.isString(d)?{message:d}:d:{};h=b;var c=m.publish,g=[];_.isArray(b)||(h=[b]);b=0;for(var k=h.length;b<k;b++){var n=h[b];if(!a||a(n))g=c(n,d)}return g};n.subscribe=function(c,d,n,a){var e=c,g=m.subscribe,p=[];_.isArray(c)||(e=[c]);c=0;for(var w=e.length;c<w;c++)if(e[c]&&(!a||a(x))){var r=e[c],v=_.isString(r),x=v?r:r.key,r=v?d:r.handler,v=
x in b;null!=n?(r=null!=r?r:n[x],v=v?h(n,x,k.hitch(n,r)):g(x,k.hitch(n,r)),v.handler=k.hitch(n,r)):(v=m.subscribe(x,r),v.handler=r);v.type=x;p.push(v)}return p};return n})},"davinci/model/Path":function(){define(["dojo/_base/declare"],function(n){"undefined"===typeof davinci.model&&(davinci.model={});"undefined"===typeof davinci.model.Path&&(davinci.model.Path={});var m=n("davinci.model.Path",null,{constructor:function(k,h,d){k=k||".";"string"==typeof k?(this.path=k,this.getSegments()):(this.segments=
k,this.hasLeading=h,this.hasTrailing=d)},endsWith:function(k){var h=dojo.clone(this.segments);for(k=(new m(k)).getSegments();0<k.length&&0<h.length;)if(k.pop()!=h.pop())return!1;return!0},getExtension:function(){this.extension||(this.extension=this.path.substr(this.path.lastIndexOf(".")+1));return this.extension},segment:function(k){var h=this.getSegments();return h.length<k?null:h[k]},getSegments:function(){if(!this.segments){var k=this.path;this.segments=k.split("/");"/"==k.charAt(0)&&(this.hasLeading=
!0);"/"==k.charAt(k.length-1)&&(this.hasTrailing=!0,this.segments.pop());this._canonicalize()}return this.segments},isAbsolute:function(){return this.hasLeading},getParentPath:function(){if(!this._parentPath){var k=dojo.clone(this.segments);k.pop();this._parentPath=new m(k,this.hasLeading)}return dojo.clone(this._parentPath)},_clone:function(){return new m(dojo.clone(this.segments),this.hasLeading,this.hasTrailing)},append:function(k){k=k||"";"string"==typeof k&&(k=new m(k));if(k.isAbsolute())return k;
var h=this.segments,d=k.getSegments(),h=h.concat(d);k=new m(h,this.hasLeading,k.hasTrailing);".."!=d[0]&&"."!=d[0]||k._canonicalize();return k},toString:function(){var k=[];this.hasLeading&&k.push("/");for(var h=0;h<this.segments.length;h++)0<h&&k.push("/"),k.push(this.segments[h]);this.hasTrailing&&k.push("/");return k.join("")},removeRelative:function(){var k=this.getSegments();return 0<k.length&&"."==k[1]?this.removeFirstSegments(1):this},relativeTo:function(k,h){"string"==typeof k&&(k=new m(k));
var d=this.segments;if(this.isAbsolute())return this;var b=k.getSegments();k=this.matchingFirstSegments(k);b=b.length;h&&--b;h=b-k;if(0==h+d.length-k)return davinci.model.Path.EMPTY;for(var b=[],c=0;c<h;c++)b.push("..");for(c=k;c<d.length;c++)b.push(d[c]);return new m(b,!1,this.hasTrailing)},startsWith:function(k){var h=this.matchingFirstSegments(k);return k._length()==h},_length:function(k){return this.segments.length},matchingFirstSegments:function(k){var h=this.segments;k=k.getSegments();for(var d=
Math.min(h.length,k.length),b=0,c=0;c<d&&h[c]==k[c];c++)b++;return b},removeFirstSegments:function(k){return new m(this.segments.slice(k,this.segments.length),this.hasLeading,this.hasTrailing)},removeMatchingLastSegments:function(k){k=this.matchingFirstSegments(k);return this.removeLastSegments(k)},removeMatchingFirstSegments:function(k){k=this.matchingFirstSegments(k);return this._clone().removeFirstSegments(k)},removeLastSegments:function(k){k||(k=1);return new m(this.segments.slice(0,this.segments.length-
k),this.hasLeading,this.hasTrailing)},lastSegment:function(){return this.segments[this.segments.length-1]},firstSegment:function(k){return this.segments[k||0]},equals:function(k){if(this.segments.length!=k.segments.length)return!1;for(var h=0;h<this.segments.length;h++)if(k.segments[h]!=this.segments[h])return!1;return!0},_canonicalize:function(){for(var k,h=this.segments,d=0;d<h.length;d++)if("."==h[d]||".."==h[d]){k=!0;break}if(k){k=[];for(d=0;d<h.length;d++)".."==h[d]?0==k.length?this.hasLeading||
k.push(h[d]):".."==k[k.length-1]?k.push(".."):k.pop():"."==h[d]&&1!=this.segments.length||k.push(h[d]);k.length!=h.length&&(this.segments=k)}}});davinci.model.Path.EMPTY=new m("");return m})},"davinci/ve/RebaseDownload":function(){define(["dojo/_base/declare","./RebuildPage","../library"],function(n,m,k){return n(m,{constructor:function(h){this.libs=h},getLibraryBase:function(h,d){for(var b in this.libs){var c=this.libs[b];if(c.id==h&&c.version==d)return h=new Deferred,h.resolve(c.root),h}return k.getLibRoot(h,
d)||""}})})},"dojo/cookie":function(){define(["./_base/kernel","./regexp"],function(n,m){n.cookie=function(k,h,d){var b=document.cookie,c;if(1==arguments.length)c=(c=b.match(new RegExp("(?:^|; )"+m.escapeString(k)+"\x3d([^;]*)")))?decodeURIComponent(c[1]):void 0;else{d=d||{};b=d.expires;if("number"==typeof b){var g=new Date;g.setTime(g.getTime()+864E5*b);b=d.expires=g}b&&b.toUTCString&&(d.expires=b.toUTCString());h=encodeURIComponent(h);var b=k+"\x3d"+h,n;for(n in d)b+="; "+n,g=d[n],!0!==g&&(b+="\x3d"+
g);document.cookie=b}return c};n.cookie.isSupported=function(){"cookieEnabled"in navigator||(this("__djCookieTest__","CookiesAllowed"),navigator.cookieEnabled="CookiesAllowed"==this("__djCookieTest__"),navigator.cookieEnabled&&this("__djCookieTest__","",{expires:-1}));return navigator.cookieEnabled};return n.cookie})},"xfile/views/FileGridLight":function(){define("xdojo/declare dojo/dom-class dojo/Deferred xide/types xide/utils xide/views/History xaction/DefaultActions xfile/views/GridLight xfile/factory/Store xide/model/Path xfile/model/File xfile/types xlang/i18".split(" "),
function(n,m,k,h,d,b,c,g,p,a,e,q,u){a=q.DEFAULT_FILE_GRID_PERMISSIONS;var w=n("xfile.views.FileGrid",g,{resizeAfterStartup:!0,menuOrder:{File:110,Edit:100,View:50,Settings:20,Navigation:10,Window:5},groupOrder:{Clipboard:110,File:100,Step:80,Open:70,Organize:60,Insert:10,Navigation:5,Select:0},tabOrder:{Home:100,View:50,Settings:20,Navigation:10},noDataMessage:"\x3cspan/\x3e",_history:null,options:d.clone(h.DEFAULT_GRID_OPTIONS),_columns:{},toolbarInitiallyHidden:!0,itemType:h.ITEM_TYPE.FILE,permissions:a,
contextMenuArgs:{limitTo:null},setState:function(a){this.inherited(arguments);var b=this,c=b.collection,d=a.store.path;c.getSync(d);var e=b.refresh();try{e.then(function(){c.getItem(d,!0).then(function(a){b.openFolder(a)})})}catch(y){console.error("error restoring folder state")}return e},postMixInProperties:function(){var a=this.state;a&&a._columns&&(this._columns=a._columns);this.columns||(this.columns=this.getColumns());!this.collection&&this.state&&(a=this.state.store,this.collection=p.createFileStore(a.mount,
a.storeOptions,this.ctx.config).getDefaultCollection());return this.inherited(arguments)},getState:function(a){a=this.inherited(arguments)||{};a.store={mount:this.collection.mount,path:this.getCurrentFolder().path,storeOptions:this.collection.options};a._columns={};_.each(this._columns,function(b){a._columns[b.label]=!this.isColumnHidden(b.id)},this);return a},onSaveLayout:function(a){a=a.data;var b=this.getState();a.widgets.push({widget:this.declaredClass,state:b});return a},formatColumn:function(a,
b,c){var e=this.selectedRenderer?this.selectedRenderer.prototype:this;if(e.formatColumn&&(e=e.formatColumn.apply(arguments))||c.renderColumn&&(e=c.renderColumn.apply(this,arguments)))return e;switch(a){case "fileType":if("folder"==b)return u.localize("kindFolder");if(c.mime){var e="kind"+(c.mime.split("/")[1]||"unknown").toUpperCase(),g=u.localize(e);return e!==g?g:b}case "name":var g=c&&null!=c.directory&&!0===c.directory,h=!1===c.read&&!1===c.write,k=".."==c.name,e="",e=g?k?"fa fa-level-up itemFolderList":
h?"fa fa-lock itemFolderList":"fa fa-folder itemFolderList":h?"fa fa-lock itemFolderList":"itemFolderList fa "+d.getIconClass(c.path),g=!0===c.showPath?c.path:b;return'\x3cspan class\x3d"'+e+'""\x3e\x3c/span\x3e\x3cspan class\x3d"name fileGridNameNode" style\x3d"vertical-align: middle;padding-top: 0px"\x3e'+g+"\x3c/span\x3e";case "sizeBytes":return c.size;case "fileType":return d.capitalize(c.fileType||"unknown");case "mediaInfo":return c.mediaInfo||"unknown";case "owner":return c&&(e=c.owner)&&e.user?
e.user.name:"";case "modified":if(""!==b)return g=null==!c.directory,!g&&u.translations.dateFormat?u.formatDate(b).replace("ms",""):""}return b},getColumns:function(){function a(a,c,d,e){null!=b._columns[a]&&(e=!b._columns[a]);b.columns.push({renderExpando:"Name"===a,label:a,field:c,sortable:d,formatter:function(a,d){return b.formatColumn(c,a,d)},hidden:e})}var b=this;this.columns=[];a("Name","name",!0,!1);a("Type","fileType",!0,!0);a("Path","path",!0,!0);a("Size","sizeBytes",!0,!1);a("Modified",
"modified",!0,!1);a("Owner","owner",!0,!0);a("Media","mediaInfo",!0,!0);return this.columns},_focus:function(){var a=this.getRows();a[0]&&(a=this.row(a[0]),this.focus(a.data))},setQueryEx:function(a,b){if(!a)return console.error("bad, no item!"),!1;if(!a.directory)return!1;this._lastPath=a.getPath();var c=this,d=new k;if(c){var e=this.collection;"."===a.path?(e.resetQueryLog(),c.set("collection",e.getDefaultCollection(a.getPath())),d.resolve&&d.resolve()):e.open(a).then(function(b){e.resetQueryLog();
c.set("collection",e.getDefaultCollection(a.getPath()));d.resolve&&d.resolve(b)});return d}console.error("have no grid")},getCurrentFolder:function(){var a=this.getSelectedRenderer();if(a&&a.getCurrentFolder&&(a=a.getCurrentFolder.apply(this))){if(a.isBack){var b=this.collection.getSync(a.rPath);b&&(a=b)}return a}if((a=this.getRows()[0])&&(a._S||a._store)){if(1==a.isBack&&(b=this.getHistory().getNow()))return this.collection.getSync(b);if(a=a._S.getParent(a))return a}return null},getClass:function(){return w},
getHistory:function(){this._history||(this._history=new b);return this._history},renderArray:function(a,b){_.find(arguments[0],{isBack:!0});return this.inherited(arguments)},startup:function(){if(!this._started){var a=this.inherited(arguments);m.add(this.domNode,"xfileGrid");this.set("loading",!0);if(this.permissions){var d=c.getDefaultActions(this.permissions,this,this),d=d.concat(this.getFileActions(this.permissions));this.addActions(d)}this._history=new b;var e=this;this.subscribe(h.EVENTS.ON_CLIPBOARD_COPY,
function(a){a.type===e.itemType&&(e.currentCopySelection=a.selection,e.refreshActions())});e._on("noData",function(){e.getRows();if(!(0<e._total)){var a=e._history.getNow();a&&"./."!==a&&e.renderArray([{name:"..",path:"..",rPath:a,sizeBytes:0,size:"",icon:"fa-level-up",isBack:!0,modified:"",_S:e.collection,directory:!0,_EX:!0,children:[],mayHaveChildren:!1}])}});this.on("dgrid-refresh-complete",function(){var a=e.getRows();a&&1<a.length&&(a=_.find(a,{isBack:!0}))&&(e.removeRow(a),e.refresh())});this._on("openFolder",
function(a){e.set("title",a.item.name)});e.selectedRenderer&&(a=this.refresh())&&a.then(function(){e.set("loading",!1);e.setRenderer(e.selectedRenderer,!1)});this._on("onChangeRenderer",function(){e.refresh()});setTimeout(function(){e.resize()},500);return a}}});w.prototype.Module=w;w.Module=w;w.createDefault=function(a,b,c,e,g,h){b=d.mixin({collection:h.getDefaultCollection(),_parent:c,Module:w,ctx:a},b||{});b=d.addWidget(w,b,null,c,g,null,null,!0,null);e&&a.getWindowManager().registerView(b,!1);
return b};w.DEFAULT_PERMISSIONS=a;return w})},"davinci/ve/palette/PaletteItem":function(){define("dojo/_base/declare dojo/on dojo/_base/event dojo/query dojo/dom-construct dojo/dom-geometry dijit/focus dijit/_WidgetBase dojo/dom-class dojox/html/entities dijit/popup dijit/Tooltip dijit/TooltipDialog davinci/ve/tools/CreateTool davinci/ui/dnd/DragManager davinci/ve/utils/GeomUtils davinci/ve/metadata davinci/_common".split(" "),function(n,m,k,h,d,b,c,g,p,a,e,q,u,w,r,v,x,A){return n("davinci.ve.palette.PaletteItem",
g,{icon:"",displayName:"",name:"",paletteId:"",type:"",data:null,tool:"",palette:null,category:"",template:'\x3ca href\x3d"javascript:void(0)"\x3e\x3cspan class\x3d"paletteItemSelectionContainer"\x3e\x3c/span\x3e\x3cspan class\x3d"paletteItemNormalContainer"\x3e\x3cspan class\x3d"paletteItemImageContainer"\x3e\x3cimg class\x3d"paletteItemImage" border\x3d"0"/\x3e\x3c/span\x3e\x3cspan class\x3d"paletteItemLabelContainer"\x3e\x3cspan class\x3d"paletteItemLabel"\x3e\x3c/span\x3e\x3c/span\x3e\x3c/span\x3e\x3c/a\x3e',
selectedWidgetTemplate:'\x3cspan class\x3d"paletteItemSelectionContent"\x3e\x3cspan class\x3d"paletteItemSelectedStrip paletteItemSelectedStripV paletteItemSelectedStripL"\x3e\x3c/span\x3e\x3cspan class\x3d"paletteItemSelectedStrip paletteItemSelectedStripV paletteItemSelectedStripR"\x3e\x3c/span\x3e\x3cspan class\x3d"paletteItemSelectedStrip paletteItemSelectedStripH paletteItemSelectedStripT"\x3e\x3c/span\x3e\x3cspan class\x3d"paletteItemSelectedStrip paletteItemSelectedStripH paletteItemSelectedStripB"\x3e\x3c/span\x3e\x3cspan class\x3d"paletteItemSelectedIcon paletteItemSelectedMoreIcon" title\x3d"'+
A.MoreIconTitleString+'"\x3e\x3c/span\x3e\x3cspan class\x3d"paletteItemSelectedIcon paletteItemSelectedHelpIcon" title\x3d"'+A.HelpIconTitleString+'"\x3e\x3c/span\x3e\x3c/span\x3e',preset:null,presetId:null,presetClassName:null,_paletteItemGroup:null,_collectionName:null,_paletteItemMoreConnects:[],_paletteItemHelpConnects:[],item:null,constructor:function(a){this.item=a},buildRendering:function(){this.palette=dijit.byId(this.paletteId);var b=this.domNode=dojo.create("div",{className:"dojoyPaletteCommon dojoyPaletteItem"});
b.innerHTML=this.template;b._paletteItem=this;this.presetClassName&&p.add(b,this.presetClassName);var c=this.type+"__"+this.presetId+"__"+this.PaletteFolderSection.section.id;this.PaletteFolderSubsection&&(c+="__"+this.PaletteFolderSubsection.subsection.id);dojo.attr(b,"selType",c);b=b.firstChild;dojo.attr(b,"tabIndex","0");b.onclick=this.palette.nop;c=b.querySelector("img");this.item&&this.item.iconHTML?(dojo.destroy(c),b.querySelector(".paletteItemImageContainer").innerHTML=this.item.iconHTML):
c.src=this.icon;b=b.querySelector(".paletteItemLabel");b.appendChild(dojo.doc.createTextNode(this.displayName));for(var c=a.encode(b.textContent),d=c.length-1;0<d;d--)0<="_-".indexOf(c[d])?(c=c.substr(0,d+1)+"\x26#8203;"+c.substr(d+1),b.innerHTML=c):c[d].toLowerCase()!=c[d]&&(c=c.substr(0,d)+"\x26#8203;"+c.substr(d),b.innerHTML=c);this.domNode.componentClassName=this.name;dojo.setSelectable(this.domNode,!1)},postCreate:function(){var a=h(".paletteItemNormalContainer",this.domNode)[0];this.connect(a,
"onmouseover","itemMouseOverHandler");this.connect(a,"onmouseout","itemMouseOutHandler");this.connect(this.domNode,"onmousedown","itemMouseDownHandler");this.connect(this.domNode,"onmouseup","itemMouseUpHandler");this.connect(this.domNode,"onkeydown","itemKeyDownHandler")},startup:function(){},isFocusable:function(){return"none"!=dojo.style(this.domNode,"display")},focus:function(){dijit.focus(this.domNode)},itemMouseOverHandler:function(c){this._mouseover=!0;c=this.domNode;this.palette.selectedItem!=
this&&this.raised(c);setTimeout(function(){if(this._mouseover&&0==this.palette.moreItems.length&&0==this.palette.helpItems.length&&this._tooltipNode!=this.domNode){this._tooltipNode&&dijit.hideTooltip(this._tooltipPos);this._tooltipNode=this.domNode;this._tooltipPos=b.position(this.domNode,!0);var c;c='\x3cdiv class\x3d"paletteTooltip"\x3e'+('\x3cdiv class\x3d"paletteTooltipCurrent"\x3e\x3cspan class\x3d"paletteTooltipCurrentWidget"\x3e'+a.encode(this.displayName)+'\x3c/span\x3e \x3cspan class\x3d"paletteTooltipCurrentLibrary"\x3e('+
this._collectionName+")\x3c/span\x3e\x3c/div\x3e");var d=this.palette.getPaletteItemsSameGroup(this);if(1<d.length){c+='\x3cdiv class\x3d"paletteTooltipAlternates"\x3e\x3cspan class\x3d"paletteTooltipAlternatesLabel"\x3e'+A.alternates+': \x3c/span\x3e\x3cspan class\x3d"paletteTooltipAlternatesLibraries"\x3e';for(var e=!1,g=0;g<d.length;g++){var h=d[g];h!=this&&(e&&(c+=", "),c+=h._collectionName,e=!0)}c=c+"\x3c/div\x3e"+('\x3cdiv class\x3d"paletteTooltipNote"\x3e'+A.howToChooseAlternate+"\x3c/div\x3e");
c+="\x3c/div\x3e"}dijit.showTooltip(c,this._tooltipPos);setTimeout(function(){dijit.hideTooltip(this._tooltipPos);this._tooltipPos=this._tooltipNode=null}.bind(this),5E3)}}.bind(this),750)},itemMouseOutHandler:function(a){this._mouseover=!1;this._tooltipPos&&(dijit.hideTooltip(this._tooltipPos),this._tooltipPos=this._tooltipNode=null);a=this.domNode;this.palette.selectedItem==this?this.sunken(a):this.flat(a)},itemMouseDownHandler:function(a){a=this.domNode;this.focus();this.sunken(a);this.palette.selectedItem&&
this.palette.selectedItem!=this&&(this.palette.removeSelectionAll(),this.flat(this.palette.selectedItem.domNode),this.palette.selectedItem=null);r.document=this.palette._context.getDocument();if(a=this.palette._context.frameNode){a=dojo.coords(a);var b=this.palette._context.getContainerNode();r.documentX=a.x-v.getScrollLeft(b);r.documentY=a.y-v.getScrollTop(b)}x.getHelper(this.type,"helper")},itemMouseUpHandler:function(a){a=this.domNode;if(this.palette.selectedItem==this)this.palette.removeSelectionAll(),
this.palette.selectedItem.flat(this.palette.selectedItem.domNode),this.palette.selectedItem=null,this.palette.sunkenItem=null,this.palette.flattenAll(),this.palette._context.setActiveTool(null),c.curNode&&c.curNode==a&&c.curNode.blur&&c.curNode.blur();else{this.palette.selectedItem&&this.palette.selectedItem!=this&&(this.palette.removeSelectionAll(),this.flat(this.palette.selectedItem.domNode),this.palette.selectedItem=null);this.palette.selectedItem=this;this.sunken(a);x.getHelper(this.type,"tool").then(function(a){a=
new (a||w)(dojo.clone(this.data),this.userData);this.palette._context.setActiveTool(a)}.bind(this));var b=function(){this.palette._contextMouseUpHandler&&(this.disconnect(this.palette._contextMouseUpHandler),this.palette._contextMouseUpHandler=null);this.palette._docMouseUpHandler&&(dojo.disconnect(this.palette._docMouseUpHandler),this.palette._docMouseUpHandler=null);this.palette.removeSelectionAll();this.palette.selectedItem=null;this.flat(this.domNode);this.palette._context.dragMoveCleanup()}.bind(this);
this.palette._contextMouseUpHandler=this.connect(this.palette._context,"onMouseUp",function(a){b()}.bind(this));setTimeout(function(){this.palette._docMouseUpHandler=dojo.connect(document,"onmouseup",function(a){var c=!1;if(this.palette.selectedItem){var d=this.palette.selectedItem.domNode;for(a=a.target;a&&"BODY"!=a.tagName;){if(a==d){c=!0;break}a=a.parentNode}}this.palette.selectedItem&&!c&&(b(),this.palette._context.setActiveTool(null))}.bind(this))}.bind(this),0)}},itemKeyDownHandler:function(a){a.keyCode==
dojo.keys.ENTER&&(this.palette.selectedItem&&(this.flat(this.palette.selectedItem.domNode),this.palette.selectedItem=null),x.getHelper(this.type,"tool").then(function(a){a=new (a||w)(dojo.clone(this.data));var b=this.palette._context;b.setActiveTool(a);a.create({target:b.getSelection()[0],position:{x:50,y:50}});b.setActiveTool(null);b.getContainerNode().focus()}),x.getHelper(this.type,"helper"))},flat:function(a){a&&(dojo.removeClass(a,"dojoyPaletteItemRaised"),dojo.removeClass(a,"dojoyPaletteItemSunken"),
dojo.addClass(a,"dojoyPaletteItemFlat"))},raised:function(a){dojo.removeClass(a,"dojoyPaletteItemFlat");dojo.removeClass(a,"dojoyPaletteItemSunken");dojo.addClass(a,"dojoyPaletteItemRaised");this.palette.raisedItems.push(this)},sunken:function(a){dojo.removeClass(a,"dojoyPaletteItemFlat");dojo.removeClass(a,"dojoyPaletteItemRaised");dojo.addClass(a,"dojoyPaletteItemSunken");this.palette.sunkenItems.push(this);this._selectionShowing=!0;h(".paletteItemSelectionContainer",this.domNode)[0].innerHTML=
this.selectedWidgetTemplate;var b=h(".paletteItemSelectedMoreIcon",a)[0],c=this.palette.getPaletteItemsSameGroup(this);1<c.length?(b.style.display="inline-block",m(b,"mousedown, mouseup",function(a){k.stop(a)}),m(b,"click",function(a){k.stop(a);this._tooltipNode&&(dijit.hideTooltip(this._tooltipPos),this._tooltipPos=this._tooltipNode=null);if(this._moreShowing)this.paletteItemMoreCloseCleanup();else{a=d.create("div",{className:"paletteItemMoreContent"});var g=d.create("span",{className:"paletteItemMoreCloseBox"},
a);d.create("div",{className:"paletteItemAlternatesLabel",innerHTML:A.alternateWidgets},a);this._paletteItemMoreConnects.push(m(g,"mousedown, mouseup",function(a){k.stop(a)}.bind(this)));this._paletteItemMoreConnects.push(m(g,"click",function(a){k.stop(a);this.paletteItemMoreCloseCleanup()}.bind(this)));for(var g=d.create("div",{className:"paletteItemAlternatesContainer"},a),h=[],n=0;n<c.length;n++){var p=c[n],q=p._collectionName,p=d.create("button",{className:"paletteItemAlternate "+(p._paletteGroupSelected?
"paletteItemMoreSelected":"paletteItemMoreUnselected"),innerHTML:q},g);h.push(p);this._paletteItemMoreConnects.push(m(p,"mousedown, mouseup",function(a){k.stop(a)}.bind(this)));this._paletteItemMoreConnects.push(m(p,"click",function(a,b){k.stop(b);var d;for(b=0;b<c.length;b++){var e=c[b];if(e._collectionName==a){d=e;break}}if(d){for(b=0;b<c.length;b++)e=c[b],e==d?(e._paletteGroupSelected=!0,e.domNode.style.display=this.palette._displayShowValue):(e._paletteGroupSelected=!1,e.domNode.style.display=
"none");d.sunken(d.domNode);x.getHelper(d.type,"tool").then(function(a){a=new (a||w)(dojo.clone(this.data));this.palette._context.setActiveTool(a)}.bind(d))}this.paletteItemMoreCloseCleanup()}.bind(this,q)))}this._tooltipDialog=new u({className:"paletteItemMorePopup",style:"width: auto; ",content:a,onShow:function(a){if(a=this._tooltipDialog.domNode.parentNode){var b=parseFloat(a.style.top);isNaN(b)||(a.style.top=b+12+"px")}}.bind(this)});e.open({popup:this._tooltipDialog,around:b,orient:["above-centered"]});
this._moreShowing=!0;this.palette.moreItems.push(this)}}.bind(this))):b.style.display="none";var g=h(".paletteItemSelectedHelpIcon",a)[0];m(g,"mousedown, mouseup",function(a){k.stop(a)}.bind(this));m(g,"click",function(a){k.stop(a);this._tooltipNode&&(dijit.hideTooltip(this._tooltipPos),this._tooltipPos=this._tooltipNode=null);if(this._helpShowing)this.paletteItemHelpCloseCleanup();else{var b=x.getOamDescriptivePropertyForType(this.type,"title"),c=x.getOamDescriptivePropertyForType(this.type,"description");
a=d.create("div",{className:"helpInnerContent"});var h=d.create("div",{className:"paletteTooltipCurrent"},a);d.create("span",{className:"paletteTooltipCurrentWidget"},h).textContent=this.name;this._collectionName&&d.create("span",{className:"paletteTooltipCurrentLibrary",innerHTML:" ("+this._collectionName+")"},h);h={container:"helpInnerContentSummary",title:"helpInnerContentSummaryTitle",content:"helpInnerContentSummaryContent"};this._createHelpSection(b,a,A.summary,h);this._createHelpSection(c,
a,A.description,h);b=d.create("div",{className:"paletteItemHelpContent"});c=d.create("span",{className:"paletteItemHelpCloseBox"},b);d.create("div",{className:"paletteItemHelpDescription"},b).appendChild(a);this._paletteItemHelpConnects.push(m(c,"mousedown, mouseup",function(a){k.stop(a)}.bind(this)));this._paletteItemHelpConnects.push(m(c,"click",function(a){k.stop(a);this.paletteItemHelpCloseCleanup()}.bind(this)));this._tooltipDialog=new u({className:"paletteItemHelpPopup",style:"width: auto; ",
content:b,onShow:function(a){if(a=this._tooltipDialog.domNode.parentNode){var b=parseFloat(a.style.top);isNaN(b)||(a.style.top=b-12+"px")}}.bind(this)});e.open({popup:this._tooltipDialog,around:g,orient:["below-centered"]});this._helpShowing=!0;this.palette.helpItems.push(this)}}.bind(this))},_createHelpSection:function(a,b,c,e){a&&a.value&&(b=d.create("div",{className:e.container},b),d.create("div",{className:e.title,innerHTML:c},b),c=d.create("div",{className:e.content},b),"text/html"==a.type?c.innerHTML=
a.value:c.textContent=a.value)},paletteItemMoreCloseCleanup:function(){if(this._moreShowing){for(var a=0;a<this._paletteItemMoreConnects.length;a++)this._paletteItemMoreConnects[a].remove();this._paletteItemMoreConnects=[];this._moreShowing=!1;index=this.palette.moreItems.indexOf(this);0<=index&&this.palette.moreItems.splice(index,1)}this._tooltipDialog&&(e.close(this._tooltipDialog),this._tooltipDialog.destroyRecursive(),this._tooltipDialog=null)},paletteItemHelpCloseCleanup:function(){if(this._helpShowing){for(var a=
0;a<this._paletteItemHelpConnects.length;a++)this._paletteItemHelpConnects[a].remove();this._paletteItemHelpConnects=[];this._helpShowing=!1;index=this.palette.helpItems.indexOf(this);0<=index&&this.palette.helpItems.splice(index,1)}this._tooltipDialog&&(e.close(this._tooltipDialog),this._tooltipDialog.destroyRecursive(),this._tooltipDialog=null)},updateImgSrc:function(a){this.domNode.querySelector(".paletteItemImage").src=a}})})},"dojo/Stateful":function(){define(["./_base/declare","./_base/lang",
"./_base/array","./when"],function(n,m,k,h){return n("dojo.Stateful",null,{_attrPairNames:{},_getAttrNames:function(d){var b=this._attrPairNames;return b[d]?b[d]:b[d]={s:"_"+d+"Setter",g:"_"+d+"Getter"}},postscript:function(d){d&&this.set(d)},_get:function(d,b){return"function"===typeof this[b.g]?this[b.g]():this[d]},get:function(d){return this._get(d,this._getAttrNames(d))},set:function(d,b){if("object"===typeof d){for(var c in d)d.hasOwnProperty(c)&&"_watchCallbacks"!=c&&this.set(c,d[c]);return this}c=
this._getAttrNames(d);var g=this._get(d,c);c=this[c.s];var k;"function"===typeof c?k=c.apply(this,Array.prototype.slice.call(arguments,1)):this[d]=b;if(this._watchCallbacks){var a=this;h(k,function(){a._watchCallbacks(d,g,b)})}return this},_changeAttrValue:function(d,b){var c=this.get(d);this[d]=b;this._watchCallbacks&&this._watchCallbacks(d,c,b);return this},watch:function(d,b){var c=this._watchCallbacks;if(!c)var g=this,c=this._watchCallbacks=function(a,b,d,h){var e=function(c){if(c){c=c.slice();
for(var e=0,h=c.length;e<h;e++)c[e].call(g,a,b,d)}};e(c["_"+a]);h||e(c["*"])};b||"function"!==typeof d?d="_"+d:(b=d,d="*");var h=c[d];"object"!==typeof h&&(h=c[d]=[]);h.push(b);d={};d.unwatch=d.remove=function(){var a=k.indexOf(h,b);-1<a&&h.splice(a,1)};return d}})})},"xide/_base/_Widget":function(){define("dcl/dcl dcl/inherited xide/widgets/_Widget xide/utils dojo/string dojo/_base/lang xide/registry dojo/cache dojo/dom-construct xide/lodash xide/$".split(" "),function(n,m,k,h,d,b,c,g,p,a,e){function q(a,
b){a.destroyRecursive?a.destroyRecursive(b):a.destroy&&a.destroy(b)}m=n(null,{__attachAsjQueryObject:!0,__attachViaAddChild:!0,__stopAtContainerNode:!1,_started:!1,declaredClass:"xide/_base/_AttachMixin",cssClass:"",buildRendering:function(){this._attachPoints=[];this._attachTemplateNodes(this.domNode);this._beforeFillContent();this.cssClass&&this.domNode&&e(this.domNode).addClass(this.cssClass)},_beforeFillContent:function(){},_attachTemplateNodes:function(a){for(var b=a;;)if(1==b.nodeType&&this._processTemplateNode(b,
function(a,b){return a.getAttribute(b)},this._attach)&&b.firstChild)b=b.firstChild;else{if(b==a)break;for(;!b.nextSibling;)if(b=b.parentNode,b==a)return;b=b.nextSibling}},_processTemplateNode:function(b,c,d){d=!0;var g=this.attachScope||this;if(c=c(b,"attachTo"))for(var h=c.split(/\s*,\s*/);c=h.shift();)a.isArray(g[c])?g[c].push(b):(g[c]=b,this.__attachAsjQueryObject&&(g["$"+c]=e(b))),d=this.__stopAtContainerNode?"containerNode"!=c:d,this._attachPoints.push(c);return d},_detachTemplateNodes:function(){var b=
this.attachScope||this;a.each(this._attachPoints,function(a){delete b[a]});this._attachPoints=[]},destroyRendering:function(){this._detachTemplateNodes();this.inherited&&this.inherited(arguments)},startup:n.superCall(function(a){return function(){var b=null;a&&(b=a.call(this));this._started=!0;return b}})});var u=n(m,{declaredClass:"xide/_base/_TemplatedMixin",templateString:null,templatePath:null,_skipNodeCache:!1,_stringRepl:function(a){var c=this.declaredClass,e=this;return d.substitute(a,this,
function(a,d){"!"==d.charAt(0)&&(a=b.getObject(d.substr(1),!1,e));"undefined"==typeof a&&logError(Error(c+" template:"+d));return null==a?"":"!"==d.charAt(0)?a:this._escapeValue(""+a)},this)},_escapeValue:function(a){return a.replace(/["'<>&]/g,function(a){return{"\x26":"\x26amp;","\x3c":"\x26lt;","\x3e":"\x26gt;",'"':"\x26quot;","'":"\x26#x27;"}[a]})},buildRendering:n.superCall(function(b){return function(){if(!this._rendered){this.templateString||(this.templateString=g(this.templatePath,{sanitize:!0}));
var c=u.getCachedTemplate(this.templateString,this._skipNodeCache,this.ownerDocument),d;if(a.isString(c)){if(d=e(this._stringRepl(c))[0],1!=d.nodeType)throw Error("Invalid template: "+c);}else d=c.cloneNode(!0);this.domNode=d}b.call(this,arguments);this._rendered||this._fillContent(this.srcNodeRef);this._rendered=!0;this.domNode&&this.declaredClass&&e(this.domNode).addClass(h.replaceAll("/",".",this.declaredClass))}}),_fillContent:function(a){var b=this.containerNode;if(a&&b)for(;a.hasChildNodes();)b.appendChild(a.firstChild)}});
u._templateCache={};u.getCachedTemplate=function(b,c,d){var e=u._templateCache,g=b,h=e[g];if(h){try{if(!h.ownerDocument||h.ownerDocument==(d||document))return h}catch(C){}p.destroy(h)}b=a.trim(b);if(c||b.match(/\$\{([^\}]+)\}/g))return e[g]=b;c=p.toDom(b,d);if(1!=c.nodeType)throw Error("Invalid template: "+b);return e[g]=c};var w=n(null,{wireStore:function(a,b,c){a=a||this.store;var d=[];c=c||["update","added","remove","delete"];for(var e=0;e<c.length;e++){var g=c[e],h=a.on(g,b.bind(this));d.push(h);
this.addHandle&&this.addHandle(g,h)}return d}}),r=function(){var d={};return n(null,{_attrPairNames:{},attributeMap:{},declaredClass:"xide/_base/_Widget",on:function(a,b){return this._on(a,b)},emit:function(a,b){return this._emit(a,b)},_set:function(a,b){var c=this[a];this[a]=b;!this._created||c===b||c!==c&&b!==b||(this._watchCallbacks&&this._watchCallbacks(a,c,b),this.emit("attrmodified-"+a,{detail:{prevValue:c,newValue:b}}))},_get:function(a){return this[a]},_getAttrNames:function(a){var b=this._attrPairNames;
if(b[a])return b[a];var c=a.replace(/^[a-z]|-[a-zA-Z]/g,function(a){return a.charAt(a.length-1).toUpperCase()});return b[a]={n:a+"Node",s:"_set"+c+"Attr",g:"_get"+c+"Attr",l:c.toLowerCase()}},set:function(c,e){if("object"===typeof c){for(var g in c)this.set(g,c[g]);return this}g=this._getAttrNames(c);var h=this[g.s];if(a.isFunction(h))h.apply(this,Array.prototype.slice.call(arguments,1));else{var h=this.focusNode&&!b.isFunction(this.focusNode)?"focusNode":"domNode",k=this[h]&&this[h].tagName,m;if((m=
k)&&!(m=d[k])){m=this[h];var n={},p;for(p in m)n[p.toLowerCase()]=!0;m=d[k]=n}p=m;g=c in this.attributeMap?this.attributeMap[c]:g.s in this?this[g.s]:p&&g.l in p&&"function"!=typeof e||/^aria-|^data-|^role$/.test(c)?h:null;null!=g&&this._attrToDom(c,e,g);this._set(c,e)}return this},postCreate:function(){},postMixInProperties:n.superCall(function(a){return function(b){a&&a.call(this,b)}}),create:function(a,b){this.srcNodeRef=e(b)[0];this._connects=[];this._supportingWidgets=[];this.srcNodeRef&&this.srcNodeRef.id&&
(this.id=this.srcNodeRef.id);a&&(this.params=a,h.mixin(this,a));this.postMixInProperties&&this.postMixInProperties();this.id||(this.id=c.getUniqueId(this.declaredClass.replace(/\//g,"_")),this.params&&delete this.params.id);this.ownerDocument=this.ownerDocument||(this.srcNodeRef?this.srcNodeRef.ownerDocument:document);this.ownerDocumentBody=e("body")[0];c.add(this);this.buildRendering();this.domNode&&((a=this.srcNodeRef)&&a.parentNode&&this.domNode!==a&&a.parentNode.replaceChild(this.domNode,a),this.domNode.setAttribute("id",
this.id),this.style&&e(this.domNode).css(this.style));this.postCreate();this._created=!0},constructor:function(a,b){this.postscript&&this.postscript(a,b)},postscript:function(a,b){return this.create(a,b)},getChildren:function(){return this.containerNode?c.findWidgets(this.containerNode):[]},getParent:function(){return c.getEnclosingWidget(this.domNode.parentNode)},destroyRecursive:function(a){this._beingDestroyed=!0;this.destroyDescendants(a);this.destroy(a)},destroy:function(b){this._beingDestroyed=
!0;this.domNode&&a.each(c.findWidgets(this.domNode,this.containerNode),q);this.destroyRendering(b);c.remove(this.id);this._destroyed=!0;this._emit("destroy")},destroyRendering:function(a){this.domNode&&(a||p.destroy(this.domNode),delete this.domNode);this.srcNodeRef&&(a||p.destroy(this.srcNodeRef),delete this.srcNodeRef)},destroyDescendants:function(b){a.each(this.getChildren(),function(a){a.destroyRecursive&&a.destroyRecursive(b)})}})}();k=n([r,u,k.dcl],{});k.AttachClass=m;k.TemplateClass=u;k.WidgetClass=
r;k.StoreMixin=w;n.chainAfter(k,"resize");n.chainAfter(k,"destroy");n.chainAfter(k,"startup");return k})},"dijit/_Templated":function(){define("./_WidgetBase ./_TemplatedMixin ./_WidgetsInTemplateMixin dojo/_base/array dojo/_base/declare dojo/_base/lang dojo/_base/kernel".split(" "),function(n,m,k,h,d,b,c){b.extend(n,{waiRole:"",waiState:""});return d("dijit._Templated",[m,k],{widgetsInTemplate:!1,constructor:function(){c.deprecated(this.declaredClass+": dijit._Templated deprecated, use dijit._TemplatedMixin and if necessary dijit._WidgetsInTemplateMixin",
"","2.0")},_processNode:function(b,c){var a=this.inherited(arguments),d=c(b,"waiRole");d&&b.setAttribute("role",d);(d=c(b,"waiState"))&&h.forEach(d.split(/\s*,\s*/),function(a){-1!=a.indexOf("-")&&(a=a.split("-"),b.setAttribute("aria-"+a[0],a[1]))});return a}})})},"dojo/_base/Color":function(){define(["./kernel","./lang","./array","./config"],function(n,m,k,h){var d=n.Color=function(b){b&&this.setColor(b)};d.named={black:[0,0,0],silver:[192,192,192],gray:[128,128,128],white:[255,255,255],maroon:[128,
0,0],red:[255,0,0],purple:[128,0,128],fuchsia:[255,0,255],green:[0,128,0],lime:[0,255,0],olive:[128,128,0],yellow:[255,255,0],navy:[0,0,128],blue:[0,0,255],teal:[0,128,128],aqua:[0,255,255],transparent:h.transparentColor||[0,0,0,0]};m.extend(d,{r:255,g:255,b:255,a:1,_set:function(b,c,d,h){this.r=b;this.g=c;this.b=d;this.a=h},setColor:function(b){m.isString(b)?d.fromString(b,this):m.isArray(b)?d.fromArray(b,this):(this._set(b.r,b.g,b.b,b.a),b instanceof d||this.sanitize());return this},sanitize:function(){return this},
toRgb:function(){return[this.r,this.g,this.b]},toRgba:function(){return[this.r,this.g,this.b,this.a]},toHex:function(){return"#"+k.map(["r","g","b"],function(b){b=this[b].toString(16);return 2>b.length?"0"+b:b},this).join("")},toCss:function(b){var c=this.r+", "+this.g+", "+this.b;return(b?"rgba("+c+", "+this.a:"rgb("+c)+")"},toString:function(){return this.toCss(!0)}});d.blendColors=n.blendColors=function(b,c,g,h){var a=h||new d;k.forEach(["r","g","b","a"],function(d){a[d]=b[d]+(c[d]-b[d])*g;"a"!=
d&&(a[d]=Math.round(a[d]))});return a.sanitize()};d.fromRgb=n.colorFromRgb=function(b,c){return(b=b.toLowerCase().match(/^rgba?\(([\s\.,0-9]+)\)/))&&d.fromArray(b[1].split(/\s*,\s*/),c)};d.fromHex=n.colorFromHex=function(b,c){var g=c||new d,h=4==b.length?4:8,a=(1<<h)-1;b=Number("0x"+b.substr(1));if(isNaN(b))return null;k.forEach(["b","g","r"],function(c){var d=b&a;b>>=h;g[c]=4==h?17*d:d});g.a=1;return g};d.fromArray=n.colorFromArray=function(b,c){c=c||new d;c._set(Number(b[0]),Number(b[1]),Number(b[2]),
Number(b[3]));isNaN(c.a)&&(c.a=1);return c.sanitize()};d.fromString=n.colorFromString=function(b,c){var g=d.named[b];return g&&d.fromArray(g,c)||d.fromRgb(b,c)||d.fromHex(b,c)};return d})},"xide/json/Highlighter":function(){define(["dojo/_base/declare","./util"],function(n,m){function k(){this.locked=!1}k.prototype.highlight=function(h){this.locked||(this.node!=h&&(this.node&&this.node.setHighlight(!1),this.node=h,this.node.setHighlight(!0)),this._cancelUnhighlight())};k.prototype.unhighlight=function(){if(!this.locked){var h=
this;this.node&&(this._cancelUnhighlight(),this.unhighlightTimer=setTimeout(function(){h.node.setHighlight(!1);h.node=void 0;h.unhighlightTimer=void 0},0))}};k.prototype._cancelUnhighlight=function(){this.unhighlightTimer&&(clearTimeout(this.unhighlightTimer),this.unhighlightTimer=void 0)};k.prototype.lock=function(){this.locked=!0};k.prototype.unlock=function(){this.locked=!1};return k})},"dojo/dnd/Source":function(){define("../_base/array ../_base/declare ../_base/kernel ../_base/lang ../dom-class ../dom-geometry ../mouse ../ready ../topic ./common ./Selector ./Manager xide/mixins/EventedMixin xide/utils".split(" "),
function(n,m,k,h,d,b,c,g,p,a,e,q,u,w){var r=m("dojo.dnd.Source",[e,u],{isSource:!0,horizontal:!1,copyOnly:!1,selfCopy:!1,selfAccept:!0,skipForm:!1,withHandles:!1,autoSync:!1,delay:0,accept:["text"],generateText:!0,isCenter:function(){},constructor:function(a,b){h.mixin(this,h.mixin({},b));a=this.accept;if(a.length)for(this.accept={},b=0;b<a.length;++b)this.accept[a[b]]=1;this.mouseDown=this.isDragging=!1;this.targetBox=this.targetAnchor=null;this.before=!0;this.center=!1;this._lastY=this._lastX=0;
this.sourceState="";this.isSource&&d.add(this.node,"dojoDndSource");this.targetState="";this.accept&&d.add(this.node,"dojoDndTarget");this.horizontal&&d.add(this.node,"dojoDndHorizontal");this.subscribe("/dnd/source/over",this.onDndSourceOver);this.subscribe("/dnd/start",this.onDndStart);this.subscribe("/dnd/drop",this.onDndDrop);this.subscribe("/dnd/cancel",this.onDndCancel)},checkAcceptance:function(a,b){if(this==a)return!this.copyOnly||this.selfAccept;for(var c=0;c<b.length;++c){for(var d=a.getItem(b[c].id).type,
e=!1,g=0;g<d.length;++g)if(d[g]in this.accept){e=!0;break}if(!e)return!1}return!0},copyState:function(a,b){if(a)return!0;2>arguments.length&&(b=this==q.manager().target);if(b){if(this.copyOnly)return this.selfCopy}else return this.copyOnly;return!1},destroy:function(){r.superclass.destroy.call(this);this.targetAnchor=null},onMouseMove:function(c){if(!this.isDragging||"Disabled"!=this.targetState){r.superclass.onMouseMove.call(this,c);var d=q.manager();if(!this.isDragging&&this.mouseDown&&this.isSource&&
(Math.abs(c.pageX-this._lastX)>this.delay||Math.abs(c.pageY-this._lastY)>this.delay)){var e=this.getSelectedNodes();e.length&&d.startDrag(this,e,this.copyState(a.getCopyKeyState(c),!0))}if(this.isDragging){var g=e=!1;this.current&&(this.targetBox&&this.targetAnchor==this.current||(this.targetBox=b.position(this.current,!0)),e=this.horizontal?c.pageX-this.targetBox.x<this.targetBox.w/2==b.isBodyLtr(this.current.ownerDocument):c.pageY-this.targetBox.y<this.targetBox.h/2);g=this.isCenter(c);if(this.current!=
this.targetAnchor||e!=this.before||g!=this.center)this._markTargetAnchor(e,g,c),d.canDrop(!this.current||d.source!=this||!(this.current.id in this.selection))}}},onMouseDown:function(b){this.mouseDown||!this._legalMouseDown(b)||this.skipForm&&a.isFormElement(b)||(this.mouseDown=!0,this._lastX=b.pageX,this._lastY=b.pageY,r.superclass.onMouseDown.call(this,b))},onMouseUp:function(a){this.mouseDown&&(this.mouseDown=!1,r.superclass.onMouseUp.call(this,a))},onDndSourceOver:function(a){this!==a?(this.mouseDown=
!1,this.targetAnchor&&this._unmarkTargetAnchor()):this.isDragging&&(a=q.manager(),a.canDrop("Disabled"!=this.targetState&&(!this.current||a.source!=this||!(this.current.id in this.selection))))},onDndStart:function(a,b,c){this.autoSync&&this.sync();this.isSource&&this._changeState("Source",this==a?c?"Copied":"Moved":"");b=this.accept&&this.checkAcceptance(a,b);this._changeState("Target",b?"":"Disabled");this==a&&q.manager().overSource(this);this.isDragging=!0},onDndDrop:function(a,b,c,d){if(this==
d)this.onDrop(a,b,c);this.onDndCancel()},onDndCancel:function(){this.targetAnchor&&(this._unmarkTargetAnchor(),this.targetAnchor=null);this.before=!0;this.mouseDown=this.isDragging=!1;this._changeState("Source","");this._changeState("Target","")},onDrop:function(a,b,c){if(this!=a)this.onDropExternal(a,b,c);else this.onDropInternal(b,c)},onDropExternal:function(b,c,d){var e=this._normalizedCreator;this._normalizedCreator=this.creator?function(a,c){return e.call(this,b.getItem(a.id).data,c)}:d?function(c){var d=
b.getItem(c.id);c=c.cloneNode(!0);c.id=a.getUniqueId();return{node:c,data:d.data,type:d.type}}:function(a){var c=b.getItem(a.id);b.delItem(a.id);return{node:a,data:c.data,type:c.type}};this.selectNone();d||this.creator||b.selectNone();this.insertNodes(!0,c,this.before,this.current);!d&&this.creator&&b.deleteSelectedNodes();this._normalizedCreator=e},onDropInternal:function(b,c){var d=this._normalizedCreator;if(!(this.current&&this.current.id in this.selection)){if(c)this._normalizedCreator=this.creator?
function(a,b){return d.call(this,this.getItem(a.id).data,b)}:function(b){var c=this.getItem(b.id);b=b.cloneNode(!0);b.id=a.getUniqueId();return{node:b,data:c.data,type:c.type}};else{if(!this.current)return;this._normalizedCreator=function(a){var b=this.getItem(a.id);return{node:a,data:b.data,type:b.type}}}this._removeSelection();this.insertNodes(!0,b,this.before,this.current);this._normalizedCreator=d}},onDraggingOver:function(){},onDraggingOut:function(){},onOverEvent:function(){r.superclass.onOverEvent.call(this);
q.manager().overSource(this);if(this.isDragging&&"Disabled"!=this.targetState)this.onDraggingOver()},onOutEvent:function(){r.superclass.onOutEvent.call(this);q.manager().outSource(this);if(this.isDragging&&"Disabled"!=this.targetState)this.onDraggingOut()},_markTargetAnchor:function(a,b,c){if(this.current!=this.targetAnchor||this.before!==a||this.center!==b)this.targetAnchor&&(this._removeItemClass(this.targetAnchor,this.before?"Before":"After"),this._removeItemClass(this.targetAnchor,"Disallow"),
this._removeItemClass(this.targetAnchor,"Center")),this.targetAnchor=this.current,this.targetBox=null,this.before=a,this.center=b,this._before=a,this._center=b,this.targetAnchor&&(b&&(this._removeItemClass(this.targetAnchor,"Before"),this._removeItemClass(this.targetAnchor,"After"),this._addItemClass(this.targetAnchor,"Center")),!b&&this._addItemClass(this.targetAnchor,this.before?"Before":"After"),b&&!1===c&&this._addItemClass(this.targetAnchor,"Disallow"))},_unmarkTargetAnchor:function(){this.targetAnchor&&
(this._removeItemClass(this.targetAnchor,this.before?"Before":"After"),this._removeItemClass(this.targetAnchor,"Center"),this._removeItemClass(this.targetAnchor,"Disallow"),this.targetBox=this.targetAnchor=null,this.center=this.before=!0)},_markDndStatus:function(a){this._changeState("Source",a?"Copied":"Moved")},_legalMouseDown:function(a){if("touchstart"!=a.type&&!c.isLeft(a))return!1;if(!this.withHandles)return!0;for(a=a.target;a&&a!==this.node;a=a.parentNode){if(d.contains(a,"dojoDndHandle"))return!0;
if(d.contains(a,"dojoDndItem")||d.contains(a,"dojoDndIgnore"))break}return!1}});return r})},"dijit/form/_ComboBoxMenu":function(){define("dojo/_base/declare dojo/dom-class dojo/dom-style dojo/keys ../_WidgetBase ../_TemplatedMixin ./_ComboBoxMenuMixin ./_ListMouseMixin".split(" "),function(n,m,k,h,d,b,c,g){return n("dijit.form._ComboBoxMenu",[d,b,g,c],{templateString:"\x3cdiv class\x3d'dijitReset dijitMenu' data-dojo-attach-point\x3d'containerNode' style\x3d'overflow: auto; overflow-x: hidden;' role\x3d'listbox'\x3e\x3cdiv class\x3d'dijitMenuItem dijitMenuPreviousButton' data-dojo-attach-point\x3d'previousButton' role\x3d'option'\x3e\x3c/div\x3e\x3cdiv class\x3d'dijitMenuItem dijitMenuNextButton' data-dojo-attach-point\x3d'nextButton' role\x3d'option'\x3e\x3c/div\x3e\x3c/div\x3e",
baseClass:"dijitComboBoxMenu",postCreate:function(){this.inherited(arguments);this.isLeftToRight()||(m.add(this.previousButton,"dijitMenuItemRtl"),m.add(this.nextButton,"dijitMenuItemRtl"));this.containerNode.setAttribute("role","listbox")},_createMenuItem:function(){var b=this.ownerDocument.createElement("div");b.className="dijitReset dijitMenuItem"+(this.isLeftToRight()?"":" dijitMenuItemRtl");b.setAttribute("role","option");return b},onHover:function(b){m.add(b,"dijitMenuItemHover")},onUnhover:function(b){m.remove(b,
"dijitMenuItemHover")},onSelect:function(b){m.add(b,"dijitMenuItemSelected")},onDeselect:function(b){m.remove(b,"dijitMenuItemSelected")},_page:function(b){var a=0,c=this.domNode.scrollTop,d=k.get(this.domNode,"height");for(this.getHighlightedOption()||this.selectNextNode();a<d;){var g=this.getHighlightedOption();if(b){if(!g.previousSibling||"none"==g.previousSibling.style.display)break;this.selectPreviousNode()}else{if(!g.nextSibling||"none"==g.nextSibling.style.display)break;this.selectNextNode()}g=
this.domNode.scrollTop;a+=(g-c)*(b?-1:1);c=g}},handleKey:function(b){switch(b.keyCode){case h.DOWN_ARROW:return this.selectNextNode(),!1;case h.PAGE_DOWN:return this._page(!1),!1;case h.UP_ARROW:return this.selectPreviousNode(),!1;case h.PAGE_UP:return this._page(!0),!1;default:return!0}}})})},"xgrid/Toolbar":function(){define(["xdojo/declare","xide/utils","xide/types","xide/widgets/ActionToolbar"],function(n,m,k,h){var d={_toolbar:null,toolbarClass:null,toolbarInitiallyHidden:!1,runAction:function(b){return b.command==
k.ACTION.TOOLBAR?(this.showToolbar(null==this._toolbar),!0):this.inherited(arguments)},getToolbar:function(){return this._toolbar},showToolbar:function(b,c,d,k,a){if(c=c||this.toolbarClass)this.toolbarClass=c;null==b&&(b=null==this._toolbar);b&&!this._toolbar&&(c=m.addWidget(c||h,m.mixin({style:"min-height:30px;height:auto;width:100%"},a),this,d||this.header,!0),!1!==k&&(c.addActionEmitter(this),c.setActionEmitter(this),this.refreshActions&&this.refreshActions()),this._toolbar=c,this.add&&this.add(c),
this._emit("showToolbar",c));!b&&this._toolbar&&(m.destroy(this._toolbar,!0,this),$(d||this.header).css("height","auto"));this.resize();return this._toolbar},getState:function(b){b=this.inherited(arguments)||{};b.toolbar=null!==this._toolbar;return b},setState:function(b){b&&b.toolbar&&this.showToolbar(b.toolbar);return this.inherited(arguments)},startup:function(){var b=this;this._started||(this._on("onAddActions",function(c){var d=c.actions,h=k.ACTION.TOOLBAR;!c.store.getSync(h)&&this.hasPermission(h)&&
d.push(b.createAction({label:"Toolbar",command:h,icon:k.ACTION_ICON.TOOLBAR,tab:"View",group:"Show",keycombo:["ctrl b"],mixin:{actionType:"multiToggle",value:!1,id:m.createUUID()},onCreate:function(a){a.value=null!==b._toolbar},onChange:function(a,c){b.showToolbar(c);b.onAfterAction(k.ACTION.TOOLBAR)}}))}),this.inherited(arguments),this.showToolbar(!this.toolbarInitiallyHidden))}};n=n("xgrid.Toolbar",null,d);n.Implementation=d;return n})},"dojo/errors/create":function(){define(["../_base/lang"],function(n){return function(m,
k,h,d){h=h||Error;var b=function(c){if(h===Error){Error.captureStackTrace&&Error.captureStackTrace(this,b);var d=Error.call(this,c),m;for(m in d)d.hasOwnProperty(m)&&(this[m]=d[m]);this.message=c;this.stack=d.stack}else h.apply(this,arguments);k&&k.apply(this,arguments)};b.prototype=n.delegate(h.prototype,d);b.prototype.name=m;return b.prototype.constructor=b}})},"dojo/_base/config":function(){define(["../has","require"],function(n,m){n={};m=m.rawConfig;for(var k in m)n[k]=m[k];!n.locale&&"undefined"!=
typeof navigator&&(k=navigator.languages&&navigator.languages.length?navigator.languages[0]:navigator.language||navigator.userLanguage)&&(n.locale=k.toLowerCase());return n})},"xfile/manager/MountManager":function(){define("dcl/dcl dojo/_base/lang xdojo/has xide/manager/ResourceManager xide/mixins/ReloadMixin xide/mixins/EventedMixin xide/types xide/utils dojo/Deferred".split(" "),function(n,m,k,h,d,b,c,g,p){return n([h,b.dcl,d.dcl],{declaredClass:"xfile.manager.MountManager",serviceClass:"XApp_Resource_Service",
mountData:null,didReload:!1,editMount:function(a){},removeMount:function(a){},getMounts:function(){return this.mountData},_onDialogOk:function(a,b,c){var d=g.toOptions(b),e=this;a=null!=c.name;b={"class":"cmx.types.Resource",enabled:!0};for(var h=0;h<d.length;h++){var k=d[h];null==k.user?b[k.name]=k.value:(b.config||(b.config={}),b.config[k.name]=k.value)}d="";b.label?d=b.label:b.config.label&&(d=b.config.label);b.name=""+(null!=c.name?c.name:d.toLowerCase());"FILE_PROXY"===b.config.type?(b.path=
""+b.path+"",m.mixin(b,b.config)):"REMOTE_FILE_PROXY"===b.config.type&&(b.path=b.name+"://");c=function(){e.ls(function(a){e.onMountDataReady(a)})};a?this.updateResource(b,!1,c):this.createResource(b,!1,c)},registerLocalMount:function(a){},registerFTP:function(a){},registerSFTP:function(a){},registerDropbox:function(a){},registerWebDav:function(){},onMountDataReady:function(a){this.mountData=a;this.publish(c.EVENTS.ON_MOUNT_DATA_READY,{data:a});var b=this;setTimeout(function(){b.publish(c.EVENTS.ON_MOUNT_DATA_READY,
{data:a})},4E3)},check:function(){this.serviceObject||this._initService()},init:function(){this.ctx.getFileManager()&&(this.serviceObject=this.ctx.getFileManager().serviceObject)},createResource:function(a,b,c){return this.callMethodEx(null,"createResource",[a,b],c,!0)},removeResource:function(a,b,c){return this.callMethodEx(null,"removeResource",[a,!0],c,!0)},updateResource:function(a,b,c){return this.callMethodEx(null,"updateResource",[a,!0],c,!0)},ls:function(a){function b(b){this.mountData=b=
b[0];this.onMountDataReady(b);a&&a(b)}if(!_.isEmpty(this.prefetch)){var c=new p;c.resolve(this.prefetch);b.apply(this,[this.prefetch]);delete this.prefetch;return c}return this.runDeferred(null,"ls",[]).then(b.bind(this))}})})},"davinci/ve/commands/_hierarchyCommand":function(){define(["dojo/_base/declare"],function(n){return n("davinci.ve.commands._hierarchyCommand",null,{_isRefreshOnDescendantChange:function(m){for(var k;m&&m.domNode&&"BODY"!=m.domNode.tagName;)(m=m.getParent())&&davinci.ve.metadata.queryDescriptor(m.type,
"refreshOnDescendantChange")&&(k=m);return k}})})},"xide/editor/Registry":function(){define(["dcl/dcl","xdojo/declare","xide/factory","xide/types","xide/data/Memory"],function(n,m,k,h,d){var b,c;b=n(null,{declaredClass:"xide.editor.Registry",delegate:null,editors:null,_started:!1,startup:function(){this.subscribe(h.EVENTS.REGISTER_EDITOR,function(c){b.onRegisterEditor(c)})}});b.editors=[];var g=b.editors;b.getStore=function(){c||(c=new d({idProperty:"name"}));return c};b.getExtension=function(b){return null!=
b?b.substr((~-b.lastIndexOf(".")>>>0)+2):""};b._hasEditor=function(c,a){return _.find(b.editors,{name:c,extensions:a})};b.unregisterEditor=function(c){var a=b.getStore(),d=a._find({name:c});_.each(d,function(b){a.removeSync(b.name);_.each(d,function(a){a&&a.name===b.name&&d.remove(a)})})};b.onRegisterEditor=function(c){var a=b.getStore(),d=a._find({name:c.name});0<d.length&&_.each(d,function(c){a.removeSync(c.name);b.unregisterEditor(c.name)});a.putSync(c);b._hasEditor(c.name,c.extensions)||g.push(c)};
b.getDefaultEditor=function(c){c=b.getEditors(c);if(!c)return null;for(var a=0;a<c.length;a++){var d=c[a];if(!0===d.isDefault)return d}return null};b.getEditor=function(b){return _.find(g,{name:b})};b.getEditors=function(c){if(!c)return g;c=b.getExtension(c.path);if(null!=c&&0==c.length)return null;c=c.toLowerCase();var a=[];if(!b.editors)return null;for(var d=b.getStore()._find({defaultEditor:!0}),h=0;h<g.length;h++){var k=g[h];if(k)if(-1!=k.extensions.indexOf("|"))for(var m=k.extensions.split("|"),
n=0;n<m.length;n++)m[n]===c&&a.push(k);else k.extensions===c&&a.push(k)}1==d.length&&a.push(d[0]);return 0<a.length?a:null};return b})},"xide/utils/_LogMixin":function(){define(["dcl/dcl","xide/utils","xide/model/Base"],function(n,m,k){return n(k.dcl,{declaredClass:"xide.utils._LogMixin",debug_conf:null,initLogger:function(h){this.debug_conf=h},log:function(h,d){d||(d=this._debugContext().main);this.showDebugMsg(d)},showDebugMsg:function(h){if(null!=this.debug_conf)return this.debug_conf.all?!0:this.debug_conf[h]?
!0:!1;this.debug_conf={all:!0};return!0}})})},"xide/widgets/ScriptWidget":function(){define(["dcl/dcl","xide/widgets/WidgetBase","xide/utils","xace/views/Editor"],function(n,m,k,h){return n(m,{declaredClass:"xide.widgets.ScriptWidget",aceEditor:null,editorArgs:{},editorOptions:{showGutter:!1,mode:"javascript"},height:"200px",templateString:"\x3cdiv class\x3d'' style\x3d'width: 100%;height:auto'\x3e\x3cdiv valign\x3d'middle' class\x3d'aceEditorWidget' attachTo\x3d'aceNode' style\x3d'height:${!height}'\x3e\x3c/div\x3e\x3c/div\x3e",
getValue:function(){return this.aceEditor?this.aceEditor.get("value"):this.inherited(arguments)},setValue:function(d){this.userData=k.setCIValueByField(this.userData,"value",d)},_onACEUpdate:function(){var d=this.getValue();this.setValue(d);this.changed=!0;this.userData&&(this.userData.changed=!0)},createWidgets:function(){var d=k.mixin({style:"padding:0px;",iconClass:"fa-code",value:this.getValue(),options:this.userData.options||this.editorOptions||{showGutter:!1}},this.editorArgs),b=this,d=this.add(h,
d,this.aceNode,!0,!0),c=d.getAce();c.on("change",function(){b._onACEUpdate()});c.on("blur",function(){b.setActive(!1)});c.on("focus",function(){b.setActive(!0)});this.height&&$(d.domNode).css("max-height",this.height);return d},startup:function(){this.aceEditor=this.createWidgets(this.aceNode)}})})},"xblox/model/html/SetCSS":function(){define("dojo/_base/declare xblox/model/Block xide/utils xide/types xide/mixins/EventedMixin xblox/model/Targeted".split(" "),function(n,m,k,h,d,b){return n("xblox.model.html.SetCSS",
[m,d,b],{name:"Set CSS",file:"",reference:"",references:null,description:"Sets HTML Node CSS",solve:function(b,d){this.onSuccess(this,d)},toText:function(){var b=this.getBlockIcon()+" "+this.name+" :: ";this.event&&(b+=this.event);return b},getFields:function(){try{var b=this.inherited(arguments)||this.getDefaultFields();b.push(k.createCI("File",h.ECIType.FILE,this.file,{group:"General",dst:"file",value:this.file,intermediateChanges:!1,acceptFolders:!1,acceptFiles:!0,encodeFilePath:!1,buildFullPath:!0,
filePickerOptions:{dialogTitle:"Select CSS File",filePickerMixin:{beanContextName:"CSSFilePicker",persistent:!1,globalPanelMixin:{allowLayoutCookies:!1}},configMixin:{beanContextName:"CSSFilePicker",LAYOUT_PRESET:h.LAYOUT_PRESET.SINGLE,PANEL_OPTIONS:{ALLOW_MAIN_MENU:!1}},defaultStoreOptions:{fields:1663,includeList:"css",excludeList:"*"},startPath:this.file}}));b.push(k.createCI("Target",h.ECIType.WIDGET_REFERENCE,this.reference,{group:"General",dst:"reference",value:this.reference}))}catch(g){}return b},
getBlockIcon:function(){return'\x3cspan class\x3d"fa-paint-brush"\x3e\x3c/span\x3e'},onReferenceChanged:function(b){this._destroy();this.reference=b},onChangeField:function(b,d,h){if("reference"==b)this.onReferenceChanged(d,h);this.inherited(arguments)},activate:function(){this._destroy()},deactivate:function(){this._destroy()},_destroy:function(){}})})},"dojo/parser":function(){define("require ./_base/kernel ./_base/lang ./_base/array ./_base/config ./dom ./_base/window ./_base/url ./aspect ./promise/all ./date/stamp ./Deferred ./has ./query ./on ./ready".split(" "),
function(n,m,k,h,d,b,c,g,p,a,e,q,u,w,r,v){function x(a){return eval("("+a+")")}function A(a){var b=a._nameCaseMap,c=a.prototype;if(!b||b._extendCnt<y){var b=a._nameCaseMap={},d;for(d in c)"_"!==d.charAt(0)&&(b[d.toLowerCase()]=d);b._extendCnt=y}return b}function z(a,b){var c=a.join();if(!B[c]){for(var d=[],e=0,g=a.length;e<g;e++){var h=a[e];d[d.length]=B[h]=B[h]||k.getObject(h)||~h.indexOf("/")&&(b?b(h):n(h))}a=d.shift();B[c]=d.length?a.createSubclass?a.createSubclass(d):a.extend.apply(a,d):a}return B[c]}
new Date("X");var y=0;p.after(k,"extend",function(){y++},!0);var B={},C={_clearCache:function(){y++;B={}},_functionFromScript:function(a,b){var c="",d="",e=a.getAttribute(b+"args")||a.getAttribute("args");b=a.getAttribute("with");e=(e||"").split(/\s*,\s*/);b&&b.length&&h.forEach(b.split(/\s*,\s*/),function(a){c+="with("+a+"){";d+="}"});return new Function(e,c+a.innerHTML+d)},instantiate:function(a,b,c){b=b||{};c=c||{};var d=(c.scope||m._scopeName)+"Type",e="data-"+(c.scope||m._scopeName)+"-",g=e+
"type",k=e+"mixins",n=[];h.forEach(a,function(a){var c=d in b?b[d]:a.getAttribute(g)||a.getAttribute(d);if(c){var e=a.getAttribute(k),c=e?[c].concat(e.split(/\s*,\s*/)):[c];n.push({node:a,types:c})}});return this._instantiate(n,b,c)},_instantiate:function(b,c,d,e){function g(a){c._started||d.noStart||h.forEach(a,function(a){"function"!==typeof a.startup||a._started||a.startup()});return a}b=h.map(b,function(a){var b=a.ctor||z(a.types,d.contextRequire);if(!b)throw Error("Unable to resolve constructor for: '"+
a.types.join()+"'");return this.construct(b,a.node,c,d,a.scripts,a.inherited)},this);return e?a(b).then(g):g(b)},construct:function(a,b,c,d,n,q){function v(a){G&&k.setObject(G,a);for(E=0;E<S.length;E++)p[S[E].advice||"after"](a,S[E].method,k.hitch(a,S[E].func),!0);for(E=0;E<W.length;E++)W[E].call(a);for(E=0;E<R.length;E++)a.watch(R[E].prop,R[E].func);for(E=0;E<Y.length;E++)r(a,Y[E].event,Y[E].func);return a}var z=a&&a.prototype;d=d||{};var y={};d.defaults&&k.mixin(y,d.defaults);q&&k.mixin(y,q);var B;
u("dom-attributes-explicit")?B=b.attributes:u("dom-attributes-specified-flag")?B=h.filter(b.attributes,function(a){return a.specified}):(q=(/^input$|^img$/i.test(b.nodeName)?b:b.cloneNode(!1)).outerHTML.replace(/=[^\s"']+|="[^"]*"|='[^']*'/g,"").replace(/^\s*<[a-zA-Z0-9]*\s*/,"").replace(/\s*>.*$/,""),B=h.map(q.split(/\s+/),function(a){var c=a.toLowerCase();return{name:a,value:"LI"==b.nodeName&&"value"==a||"enctype"==c?b.getAttribute(c):b.getAttributeNode(c).value}}));var C=d.scope||m._scopeName;
q="data-"+C+"-";var D={};"dojo"!==C&&(D[q+"props"]="data-dojo-props",D[q+"type"]="data-dojo-type",D[q+"mixins"]="data-dojo-mixins",D[C+"type"]="dojoType",D[q+"id"]="data-dojo-id");for(var E=0,F,C=[],G,I;F=B[E++];){var H=F.name,J=H.toLowerCase();F=F.value;switch(D[J]||J){case "data-dojo-type":case "dojotype":case "data-dojo-mixins":break;case "data-dojo-props":I=F;break;case "data-dojo-id":case "jsid":G=F;break;case "data-dojo-attach-point":case "dojoattachpoint":y.dojoAttachPoint=F;break;case "data-dojo-attach-event":case "dojoattachevent":y.dojoAttachEvent=
F;break;case "class":y["class"]=b.className;break;case "style":y.style=b.style&&b.style.cssText;break;default:if(H in z||(H=A(a)[J]||H),H in z)switch(typeof z[H]){case "string":y[H]=F;break;case "number":y[H]=F.length?Number(F):NaN;break;case "boolean":y[H]="false"!=F.toLowerCase();break;case "function":""===F||-1!=F.search(/[^\w\.]+/i)?y[H]=new Function(F):y[H]=k.getObject(F,!1)||new Function(F);C.push(H);break;default:J=z[H],y[H]=J&&"length"in J?F?F.split(/\s*,\s*/):[]:J instanceof Date?""==F?new Date(""):
"now"==F?new Date:e.fromISOString(F):J instanceof g?m.baseUrl+F:x(F)}else y[H]=F}}for(B=0;B<C.length;B++)D=C[B].toLowerCase(),b.removeAttribute(D),b[D]=null;if(I)try{I=x.call(d.propsThis,"{"+I+"}"),k.mixin(y,I)}catch(X){throw Error(X.toString()+" in data-dojo-props\x3d'"+I+"'");}k.mixin(y,c);n||(n=a&&(a._noScript||z._noScript)?[]:w("\x3e script[type^\x3d'dojo/']",b));var S=[],W=[],R=[],Y=[];if(n)for(E=0;E<n.length;E++)D=n[E],b.removeChild(D),c=D.getAttribute(q+"event")||D.getAttribute("event"),d=
D.getAttribute(q+"prop"),I=D.getAttribute(q+"method"),C=D.getAttribute(q+"advice"),B=D.getAttribute("type"),D=this._functionFromScript(D,q),c?"dojo/connect"==B?S.push({method:c,func:D}):"dojo/on"==B?Y.push({event:c,func:D}):y[c]=D:"dojo/aspect"==B?S.push({method:I,advice:C,func:D}):"dojo/watch"==B?R.push({prop:d,func:D}):W.push(D);a=(n=a.markupFactory||z.markupFactory)?n(y,b,a):new a(y,b);return a.then?a.then(v):v(a)},scan:function(a,b){function c(a){if(!a.inherited){a.inherited={};var b=a.node,d=
c(a.parent),b={dir:b.getAttribute("dir")||d.dir,lang:b.getAttribute("lang")||d.lang,textDir:b.getAttribute(v)||d.textDir},e;for(e in b)b[e]&&(a.inherited[e]=b[e])}return a.inherited}var d=[],e=[],g={},k=(b.scope||m._scopeName)+"Type",p="data-"+(b.scope||m._scopeName)+"-",r=p+"type",v=p+"textdir",p=p+"mixins",w=a.firstChild,x=b.inherited;if(!x){var y=function(a,b){return a.getAttribute&&a.getAttribute(b)||a.parentNode&&y(a.parentNode,b)},x={dir:y(a,"dir"),lang:y(a,"lang"),textDir:y(a,v)},A;for(A in x)x[A]||
delete x[A]}A={inherited:x};for(var B,C;;)if(w)if(1!=w.nodeType)w=w.nextSibling;else if(B&&"script"==w.nodeName.toLowerCase())(x=w.getAttribute("type"))&&/^dojo\/\w/i.test(x)&&B.push(w),w=w.nextSibling;else if(C)w=w.nextSibling;else if(x=w.getAttribute(r)||w.getAttribute(k),a=w.firstChild,x||a&&(3!=a.nodeType||a.nextSibling)){C=null;if(x){var E=w.getAttribute(p);B=E?[x].concat(E.split(/\s*,\s*/)):[x];try{C=z(B,b.contextRequire)}catch(S){}C||h.forEach(B,function(a){~a.indexOf("/")&&!g[a]&&(g[a]=!0,
e[e.length]=a)});E=C&&!C.prototype._noScript?[]:null;A={types:B,ctor:C,parent:A,node:w,scripts:E};A.inherited=c(A);d.push(A)}else A={node:w,scripts:B,parent:A};B=E;C=w.stopParser||C&&C.prototype.stopParser&&!b.template;w=a}else w=w.nextSibling;else{if(!A||!A.node)break;w=A.node.nextSibling;C=!1;A=A.parent;B=A.scripts}var F=new q;e.length?(u("dojo-debug-messages"),(b.contextRequire||n)(e,function(){F.resolve(h.filter(d,function(a){if(!a.ctor)try{a.ctor=z(a.types,b.contextRequire)}catch(Y){}for(var c=
a.parent;c&&!c.types;)c=c.parent;var d=a.ctor&&a.ctor.prototype;a.instantiateChildren=!(d&&d.stopParser&&!b.template);a.instantiate=!c||c.instantiate&&c.instantiateChildren;return a.instantiate}))})):F.resolve(d);return F.promise},_require:function(a,b){a=x("{"+a.innerHTML+"}");var c=[],d=[],e=new q;b=b&&b.contextRequire||n;for(var g in a)c.push(g),d.push(a[g]);b(d,function(){for(var a=0;a<c.length;a++)k.setObject(c[a],arguments[a]);e.resolve(arguments)});return e.promise},_scanAmd:function(a,b){var c=
new q,d=c.promise;c.resolve(!0);var e=this;w("script[type\x3d'dojo/require']",a).forEach(function(a){d=d.then(function(){return e._require(a,b)});a.parentNode.removeChild(a)});return d},parse:function(a,d){var e;!d&&a&&a.rootNode?(d=a,e=d.rootNode):!a||!k.isObject(a)||"nodeType"in a?e=a:d=a;e=e?b.byId(e):c.body();d=d||{};var g=d.template?{template:!0}:{},h=[],m=this;a=this._scanAmd(e,d).then(function(){return m.scan(e,d)}).then(function(a){return m._instantiate(a,g,d,!0)}).then(function(a){return h=
h.concat(a)}).otherwise(function(a){console.error("dojo/parser::parse() error",a);throw a;});k.mixin(h,a);return h}};m.parser=C;d.parseOnLoad&&v(100,C,"parse");return C})},"davinci/XPathUtils":function(){define(function(){function n(k){this.node=k}n.prototype={name:function(){return this.node.nodeName},parent:function(){var k=this.node.parentNode;if(k!==this.node.ownerDocument)return new n(k)},index:function(){var k=this.node.nodeName,h=this.node.parentNode,d=!1,b=0;h.id||(h.id="__XPATH_UTILS_TEMP_ID__"+
Date.now(),d=!0);k=h.querySelectorAll("#"+h.id+"\x3e"+k);if(1<k.length)for(var c=0,g=k.length;c<g;c++)if(k[c]===this.node){b=c+1;break}d&&(h.id="");return b}};var m=/(\w+)(?:\[(\d+)\])?/;return{getXPath:function(k,h){function d(b,c){var g=c.name(),h=c.parent();return h?(c=c.index(),d((c?g+("["+c+"]"):g+"[1]")+(b?"/"+b:""),h)):"/"+g+"/"+b}h=h||n;k=new h(k);return d("",k).toLowerCase()},toCssPath:function(k){"/"===k.charAt(0)&&(k=k.substr(1));var h="";k.split("/").forEach(function(d){d=d.match(m);var b=
d[2];h+=(h?"\x3e":"")+d[1];b&&(h+=":nth-of-type("+b+")")});return h}}})},"xide/utils/CSSUtils":function(){define(["xide/utils","xide/types"],function(n,m){n.findStyle=function(k,h){k=(new CSSParser).parse(".foo{"+k+"}",!1,!0).cssRules[0].declarations;return(h=_.find(k,{property:h}))?h.valueText:""};n.getBackgroundUrl=function(k){if(k=n.findStyle(k,"background-image"))try{return k.match(/\((.*?)\)/)[1].replace(/('|")/g,"")}catch(h){}return null};return n})},"xblox/model/html/SetState":function(){define("dcl/dcl xblox/model/Block xide/utils xide/types xide/mixins/EventedMixin xblox/model/Referenced dojo/dom-attr dojo/dom-style dojo/_base/Color xide/registry".split(" "),
function(n,m,k,h,d,b,c,g,p,a){var e={declaredClass:"xblox.model.html.SetState",name:"Set State",reference:"",references:null,description:"Switches to a state",value:"",mode:1,sharable:!1,solve:function(b,c){var d=this.value;c=c||{};c.flags=h.CIFLAG.DONT_PARSE;b=this.resolveReference(this.deserialize(this.reference),c);this.override&&this.override.variables&&(d=k.replace(d,null,this.override.variables,{begin:"{",end:"}"}));b&&b.length&&_.each(b,function(b){(b=a.byId(b.id)||b)&&b.setState&&b.setState(d)});
this.onSuccess(this,c);this.onDidRun()},toText:function(){var a=this.deserialize(this.reference),a=this.getBlockIcon()+" "+this.name+" :: on "+a.reference+" to"||"  to ";this.value&&(a+=" "+this.value);return a},getFields:function(){var a=this.getDefaultFields(!1),b={group:"General",dst:"reference",value:this.reference};a.push(k.createCI("State",h.ECIType.STRING,this.value,{group:"General",dst:"value",value:this.value,intermediateChanges:!1}));a.push(k.createCI("Target",h.ECIType.WIDGET_REFERENCE,
this.reference,b));return a},getBlockIcon:function(){return'\x3cspan class\x3d"fa-paint-brush"\x3e\x3c/span\x3e'},getPropValue:function(a,b){for(var c in a)if(c===b)return a[c];return null},updateObject:function(a,b,d){if(!a)return!1;d=d||1;null!=a.domNode&&(a=a.domNode);var e=c.get(a,"style");";"===e&&(e="");""===e&&(e=null!=a.lastStyle?a.lastStyle:b);";"===e&&(e=b);switch(d){case 1:var e=this._toObject(e),h=b.split(";");for(b=0;b<h.length;b++)d=h[b].split(":"),2==d.length&&(e[d[0]]=d[1]);var h=
[],m;for(m in e)h.push(m+":"+e[m]);$(a).attr("style",h.join(";"));break;case 2:e=_.uniq((e+";"+b).split(";")).join(";");c.set(a,"style",e);break;case 3:c.set(a,"style",k.replaceAll(b,"",e));break;case 4:case 5:m=new RegExp(/(\D*)(-?)(\d+)(\D*)/);b=this._toObject(b);d={};var n=$(a);if(b)for(h in b)d[h]=this._getStyle(h,a,n);for(h in b){var q=""+h.trim();if(null!=d[q]){var u=b[h],w=d[h],n=-1!=u.indexOf("#"),C=-1!=u.indexOf("rgb"),E=-1!=u.indexOf("rgba");if(n||C||E){var F=dojo.colorFromString(u);dojo.colorFromString(u);
var G=dojo.colorFromString(w),D=new p;_.each(["r","g","b","a"],function(a){D[a]=Math.min(G[a]+F[a],"a"==a?1:255)});q="";n?q=D.toHex():C?q=D.toCss(!1):E&&(q=D.toCss(!0));g.set(a,h,q)}else(n=m.exec(d[q]))&&3<=n.length&&parseInt(n[3])}}h=this._toObject(e);if(!h)return!1}},activate:function(){this._destroy()},deactivate:function(){this._destroy()}};n=n([m,d.dcl,b.dcl],e);n.Impl=e;return n})},"davinci/ve/metadata":function(){define("require dojo/Deferred dojo/promise/all dojo/_base/lang dojo/_base/connect ../library ../model/Path ../repositoryinfo xide/types xide/utils".split(" "),
function(n,m,k,h,d,b,c,g,p,a){function e(a,b){a=a||{};for(var c=1,d=arguments.length;c<d;c++){var g=arguments[c],h,k;for(h in g)g.hasOwnProperty(h)&&(k=g[h],h in a&&("object"===typeof k||a[h]===k)?e(a[h],k):a[h]=k)}return a}function q(b,d,k){G[b.name]=b;d=new c(d);var p=b.overlays,q;for(q in p)p.hasOwnProperty(q)&&("oam"!==q&&"maqetta"!==q||e(b,p[q]));delete b.overlays;b.__metadataModuleId="maq-metadata-"+b.name;q=new c(location.href);q.path=q.path.substring(0,q.path.lastIndexOf("/"));q.path=a.removeURLParameter(q.path,
"theme");q.path=""+k;p=[{name:b.__metadataModuleId,location:k+d}];p[0].location=p[0].location.replace("index.php","");p[0].location=p[0].location.replace("?debug\x3dtrue","");p[0].location=p[0].location.replace("\x26isDesktop\x3dtrue","");p[0].location=p[0].location.replace("maqetta.html","");p[0].location=p[0].location.replace("maqettar.html","");p[0].location=p[0].location.replace("index.html","");p[0].location=p[0].location.replace("xui.php","");p[0].location=p[0].location.replace("xui.php?debug\x3dtrue",
"");"dojo"!==b.name&&"xide"!==b.name&&"xblox"!==b.name&&(b.__libraryModuleId=b.name,q={name:b.__libraryModuleId,location:q.append("app/static/lib/"+b.name+"/"+b.version).toString()},"xide"!==b.__libraryModuleId&&p.push(q));var r;if(h.exists("scripts.widget_metadata",b))if("string"===typeof b.scripts.widget_metadata){var v=d.append(b.scripts.widget_metadata);r=dojo.xhrGet({url:k+v.toString()+(0<g.revision.length?"?"+g.revision:""),handleAs:"json"}).then(function(a){if(a){var c=v.getParentPath();return u(b.name,
a,c,c,k)}})}else r=u(b.name,b.scripts.widget_metadata,d,k);if(h.exists("scripts.callbacks",b)){var w=new m;n([b.scripts.callbacks],function(a){b.$callbacks=a;w.resolve()});J.push(w)}return r}function u(a,b,c,d){function e(a,b,c){"undefined"==typeof a.$providedTags[b]&&(a.$providedTags[b]=[]);a.$providedTags[b].push(c)}a||console.error("parseLibraryDescriptor: missing 'libName' arg");var g=G[a];b.$descriptorFolderPath=c.toString();b.$moduleFolderPath=d.toString();if(g)if(g.$widgets){b.widgets.forEach(function(a){g.$wm.widgets.push(a)});
for(var h in b.categories)g.$wm.categories.hasOwnProperty(h)||(g.$wm.categories[h]=b.categories[h])}else if(g.$wm)for(d=0;d<b.widgets.length;d++){h=!1;for(var k=0;!h&&k<g.$wm.widgets.length;k++)g.$wm.widgets[k].type==b.widgets[d].type&&(h=!0);h||g.$wm.widgets.push(b.widgets[d])}else g.$wm||(g.$wm=b);else G[a]={$wm:b,name:b.name,version:b.version},b.__metadataModuleId&&(G[a].__metadataModuleId=b.__metadataModuleId),g=G[a];var m=g.$wm;m.$providedTypes=m.$providedTypes||{};m.$providedTags=m.$providedTags||
{};m.widgets.forEach(function(a){m.$providedTypes[a.type]=a;if("string"==typeof a.tags)e(m,a.tags,a);else if(a.tags&&a.tags.length)for(var b=0;b<a.tags.length;b++)e(m,a.tags[b],a);a.icon&&!a.iconLocal&&(a.icon=c.append(a.icon).toString());a.iconLarge&&!a.iconLargeLocal&&(a.iconLarge=c.append(a.iconLarge).toString());a.widgetClass=m.categories[a.category].widgetClass});dojo.mixin(m,{_maqGetString:v});if(m.extend)for(var n in m.extend)m.extend.hasOwnProperty(n)&&(G[n]&&G[n].$wm?w(G[n].$wm,[m.extend[n]]):
(b=Q[n]||[],b.push(m.extend[n]),Q[n]=b));Q[a]&&w(m,Q[a]);return g}function w(a,b){var c=a.$providedTypes;b.forEach(function(a){for(var b in a)if(a.hasOwnProperty(b)){var d=a[b],e=c[b];d.mixin&&h.mixin(e,d.mixin);if(d.concat)for(var g in d.concat)if(d.concat.hasOwnProperty(g)){var k=d.concat[g];if(e[g]){var m=e,n=g;var p=e[g];"string"===typeof p?k=p+","+k:p instanceof Array?k=p.concat(k):(console.error('Unhandled type for "concat()"'),k=void 0);m[n]=k}else e[g]=k}}})}function r(a){if(a)for(var b in G)if(G.hasOwnProperty(b)){var c=
G[b];if(c.$wm&&c.$wm.$providedTypes[a])return c}return null}function v(a){O||(O=!0);return null}function x(a){if(a){if(D.hasOwnProperty(a))return D[a];var b=r(a),c;b&&(c=b.$wm.$descriptorFolderPath);if(!c)return null;var b=b.$wm,d=null,g=F.getResourceManager().getVariable(p.RESOURCE_VARIABLES.APP_URL);b.localPath?(c=a.replace(/\./g,"/").split("/"),c.shift(),c=c.join("/"),c=[b.$moduleFolderPath,"/",c,"_oam.json"].join(""),g=system.resource.findResource(c).getContentSync(),d=dojo.fromJson(g)):(c=[c,
"/",a.replace(/\./g,"/"),"_oam.json"].join(""),c=g+"/lib/xideve/metadata/"+c,dojo.xhrGet({url:c,handleAs:"json",sync:!0}).then(function(a){d=a}));if(!d)return console.error("ERROR: Could not load metadata for type: "+a),null;d.$ownproperty=dojo.mixin({},d.property);d.property=dojo.mixin({},N,d.property);d.$src=c;D[a]=d;e(d,b.$providedTypes[a].metadata);return d}}function A(a,b){if(!b)return a;dojo.every(b.split("."),function(b){if(void 0===a[b])return a=void 0,!1;a=a[b];return!0});return a}function z(a,
b){(b=C.queryDescriptor(b,"allowed"+a))||(b="Parent"===a?"ANY":"NONE");return b.split(/\s*,\s*/)}function y(a,b){b=C.queryDescriptor(a,b);if(!b)return null;a=r(a);return B(a,b)}function B(a,b){return a&&b?"string"===typeof b&&"./"===b.substr(0,2)?(new c(a.__metadataModuleId)).append(b).toString():b:null}var C,E,F,G={},D={},H={},J=[],Q={},N={id:{datatype:"string",hidden:!0},lang:{datatype:"string",hidden:!0},dir:{datatype:"string",hidden:!0},"class":{datatype:"string",hidden:!0},style:{datatype:"string",
hidden:!0},title:{datatype:"string",hidden:!0}};dojo.subscribe("/davinci/ui/libraryChanged/start",function(){G={};D={};H={};C.init().then(function(){dojo.publish("/davinci/ui/libraryChanged")})});var O=!1;C={prefix:"",init:function(a,c){F=a;var d=[];E=n("../Workbench");a=F.getResourceManager().getVariable(p.RESOURCE_VARIABLES.APP_URL);c=c.replace(a,"");c=n.toUrl("xideve/metadata/");b.getUserLibs(E.getProject()).forEach(function(a){var b=a.metaRoot;(b=b.replace("app/metadata/",""))&&d.push(dojo.xhrGet({url:c+
b+"/package.json?"+g.revision,handleAs:"json"}).then(function(a){return q(a,b,c)}))});return k(d)},parseMetaData:function(a,b,c,d){return u(a,b,c,d)},getLibrary:function(a){return a?G[a]:G},getLibraryActions:function(a,b){var c=[],d;for(d in G)if(G.hasOwnProperty(d)){var e=G[d];if(e.$wm){var g=e.$wm["davinci.actionSets"];g&&dojo.forEach(g,function(d){d.id!=a||b&&d.targetID!==b||(d=dojo.clone(d.actions),dojo.forEach(d,function(a){if(a.action){var b=B(e,a.action);a.action=b}a.menu&&a.menu.forEach(function(a){if(a.action){var b=
B(e,a.action);a.action=b}});c.push(a)}))})}}return c},loadThemeMeta:function(a){for(var d=a.find({elementType:"HTMLElement",tag:"style"}),e=[],g,h=0;h<d.length;h++)for(var k=0;k<d[h].children.length;k++)"CSSImport"==d[h].children[k].elementType&&e.push(d[h].children[k]);new c(a.fileName);h=b.getThemes(E.getProject());d={};for(k=0;k<h.length;k++)if(h[k].files)for(var m=0;m<h[k].files.length;m++)d[h[k].files[m]]=h[k];for(k=0;k<e.length;k++){var h=e[k].url,n;for(n in d)if(-1<n.indexOf("claro")&&(g=n),
-1<h.indexOf(n))return{themeUrl:h,themeMetaCache:b.getThemeMetadata(d[n]),theme:d[n]}}if(k=C._loadThemeMetaDojoxMobile(a,d))return k;if(g){for(var p,k=0;k<e.length;k++)if((n=e[k].url.match(/\/([^\/]*)\.css$/))&&2==n.length&&(n=n[1],e[k].url.match(new RegExp("themes/"+n+"/"+n+".css$")))){p=n;break}if(p)return n=a.getDocumentElement(),a=n.getChildElement("head"),n=n.getChildElement("body"),(h=n.getAttribute("class"))&&n.setAttribute("class",h.replace(new RegExp("\\b"+p+"\\b","g"),"claro")),a=a.getChildElements("style"),
dojo.forEach(a,function(a){dojo.forEach(a.children,function(a){"CSSImport"==a.elementType&&(a.url=a.url.replace(new RegExp("/"+p,"g"),"/claro"))})}),h=e[k].url.replace(new RegExp("/"+p,"g"),"/claro"),e={themeUrl:h,themeMetaCache:b.getThemeMetadata(d[g]),theme:d[g]},e.themeMetaCache.usingSubstituteTheme={oldThemeName:p,newThemeName:"claro"},e}},_loadThemeMetaDojoxMobile:function(a,c){a=a.find({elementType:"HTMLElement",tag:"script"});for(var d=0;d<a.length;d++){var e=a[d].getElementText();if(e.length){var g=
e.indexOf("dojoxMobile.themeMap");if(0<g){var g=e.indexOf("\x3d",g),h=e.indexOf(";",g);if(h>g){var e=dojo.fromJson(e.substring(g+1,h))[0][2][0],k;for(k in c)if(-1<e.indexOf(k))return{themeUrl:e,themeMetaCache:b.getThemeMetadata(c[k]),theme:c[k]}}}}}},getLibraryForType:function(a){return r(a)},getLibraryMetadataForType:function(a){return(a=r(a))?a.$wm:null},getWidgetDescriptorForType:function(a){var b=r(a);a=b?b.$wm.$providedTypes[a]:void 0;return a},getOamDescriptivePropertyForType:function(a,b){return(a=
x(a))&&a[b]?(b=a[b],"string"==typeof b?{type:"text/plain",value:b}:"string"==typeof b.value?{type:b.type?b.type:"text/plain",value:b.value}:null):null},getWidgetsWithTag:function(a){var b=[];if(a)for(var c in G)if(G.hasOwnProperty(c)){var d=G[c];d.$wm&&d.$wm.$providedTags[a]&&(b=b.concat(d.$wm.$providedTags[a]))}return b},getLibraryBase:function(a){if(a=r(a))return a.$wm.$descriptorFolderPath},invokeCallback:function(a,b,c){var d=a;"string"===typeof a&&(d=r(type));if(d&&d.$callbacks&&(a=d.$callbacks[b]))return a.apply(d.$callbacks,
c)},query:function(a,b){if(a){var c,d;a.declaredClass?(a.metadata&&(d=a.metadata),c=a.type):c=a;if(!d){d=x(c);if(!d)return;a.declaredClass&&(a.metadata=d)}return A(d,b)}},queryDescriptorByName:function(a,b,c){b=r(b);var d;if(b){b=b.$wm.widgets;for(var e=0;e<b.length;e++)if(b[e].name==a){d=b[e];break}}return this._queryDescriptor(d,c)},queryDescriptor:function(a,b){var c=r(a),d;c&&(d=c.$wm.$providedTypes[a]);return this._queryDescriptor(d,b)},_queryDescriptor:function(a,b){if(a&&"object"===typeof a)return a=
A(a,b),"resizable"===b&&(a||(a="both")),a},getAllowedParent:function(a){return z("Parent",a)},getAllowedChild:function(a){return z("Child",a)},getCanSelect:function(a){return(a=C.queryDescriptor(a,"canSelect"))?a.split(/\s*,\s*/):[]},getHelper:function(a,b){var c=new m,d=a+":"+b;if(d in H)return c.resolve(H[d]),c;(a=y(a,b))?n([a],function(a){c.resolve(a);H[d]=a}):c.resolve();return c},getSmartInput:function(a){var b=new m;if(a in P)b.resolve(P[a]);else{var c=y(a,"inlineEdit");c?"string"===typeof c?
n([c],function(c){b.resolve(P[a]=new c)}):"[object Array]"===Object.prototype.toString.call(c.property)?n(["davinci/ve/input/MultiFieldSmartInput"],function(d){d=new d;h.mixin(d,c);b.resolve(P[a]=d)}):n(["davinci/ve/input/SmartInput"],function(d){d=new d;h.mixin(d,c);b.resolve(P[a]=d)}):b.resolve(null)}return b},getDeferreds:function(){return J}};var P={};d.subscribe("/davinci/ui/libraryChanged/start",function(){P={}});return dojo.setObject("davinci.ve.metadata",C)})},"xcf/model/Variable":function(){define(["dcl/dcl",
"xide/types","xblox/model/variables/Variable"],function(n,m,k){return n(k,{declaredClass:"xcf.model.Variable",hasInlineEdits:!0,gui:"off",cmd:"off",save:!1,target:"None",name:"No Title",value:-1,observed:["value","initial","name"],solve:function(){var h="";if("processVariables"===this.group){var d=this.scope.getVariable("value");d&&(d=d.value,this.isNumber(d)||(d="'"+d+"'"),h="var value \x3d "+d+";\n")}return this.scope.parseExpression(h+this.getValue(),!0)},canEdit:function(){return!0},canDisable:function(){return!1},
getFields:function(){var h=this.getDefaultFields();h.push(this.utils.createCI("title",13,this.name,{group:"General",title:"Name",dst:"name"}));var d=this;h.push(this.utils.createCI("value",this.types.ECIType.EXPRESSION,this.value,{group:"General",title:"Value",dst:"value",widget:{allowACECache:!0,showBrowser:!1,showSaveButton:!0,editorOptions:{showGutter:!1,autoFocus:!1,hasConsole:!1},aceOptions:{hasEmmet:!1,hasLinking:!1,hasMultiDocs:!1},item:this},delegate:{runExpression:function(b,c,g){if("processVariables"==
d.group){var h=d.scope.getVariable("value"),a="";h&&(h=h.value,d.isNumber(h)||(h="'"+h+"'"),a="var value \x3d "+h+";\n")}return d.scope.expressionModel.parse(d.scope,a+b,!1,c,g)}}}));h.push(this.utils.createCI("flags",5,this.flags,{group:"General",title:"Flags",dst:"flags",data:[{value:4096,label:"Dont parse",title:"Do not parse the string and use it as is"},{value:2048,label:"Expression",title:"Parse it as Javascript"}],widget:{hex:!0}}));return h},onChangeField:function(h,d,b){"value"===h&&this.publish(m.EVENTS.ON_DRIVER_VARIABLE_CHANGED,
{item:this,scope:this.scope,save:!1,source:m.MESSAGE_SOURCE.GUI})}})})},"dijit/layout/BorderContainer":function(){define(["dojo/_base/declare"],function(n){return n(null,{})})},"davinci/ve/actions/NewWidgetsCurrentState":function(){define("dojo/_base/declare davinci/Runtime davinci/Workbench davinci/ve/States davinci/actions/Action davinci/workbench/Preferences".split(" "),function(n,m,k,h,d,b){return n("davinci.ve.actions.NewWidgetsCurrentState",[d],{run:function(){var c;if(m.currentEditor&&m.currentEditor.currentEditor&&
m.currentEditor.currentEditor.context){c=m.currentEditor.currentEditor.context;var d=k.getProject(),n=b.getPreferences("davinci.ve.editorPrefs",d);n.newWidgetsCurrentState=n.newWidgetsCurrentState?!1:!0;b.savePreferences("davinci.ve.editorPrefs",d,n);h.updateStateIcons(c)}}})})},"dijit/form/DataList":function(){define("dojo/_base/declare dojo/dom dojo/_base/lang dojo/query dojo/store/Memory ../registry".split(" "),function(n,m,k,h,d,b){function c(b){return{id:b.value,value:b.value,name:k.trim(b.innerText||
b.textContent||"")}}return n("dijit.form.DataList",d,{constructor:function(d,n){this.domNode=m.byId(n);k.mixin(this,d);this.id&&b.add(this);this.domNode.style.display="none";this.inherited(arguments,[{data:h("option",this.domNode).map(c)}])},destroy:function(){b.remove(this.id)},fetchSelectedItem:function(){var b=h("\x3e option[selected]",this.domNode)[0]||h("\x3e option",this.domNode)[0];return b&&c(b)}})})},"xideve/types":function(){define(["xide/types","xide/utils"],function(n,m){m.mixin(n,{VE_LAYOUT_RIGHT_CENTER_BOTTOM:"VE_LAYOUT_RIGHT_CENTER_BOTTOM",
VE_LAYOUT_CENTER_BOTTOM:"VE_LAYOUT_CENTER_BOTTOM",VE_LAYOUT_CENTER_RIGHT:"VE_LAYOUT_CENTER_RIGHT",VE_LAYOUT_LEFT_CENTER_RIGHT:"VE_LAYOUT_LEFT_CENTER_RIGHT",VE_LAYOUT_LEFT_CENTER_RIGHT_BOTTOM:"VE_LAYOUT_LEFT_CENTER_RIGHT_BOTTOM"});m.mixin(n.EVENTS,{WIDGET_PROPERTIES_RENDERED:"OnWidgetPropertiesRendered",WIDGET_PROPERTY_RENDERED:"onWidgetPropertyRendered",ON_SET_WIDGET_PROPERTY_ACTIONS:"onSetWidgetPropertyActions",ON_GET_LOADER_PACKAGES:"onGetLoaderPackages",ON_VISUAL_EDITOR_SAVE:"onVisualEditorSave",
ON_BUILD_HEADER:"onBuildHeader",ON_BUILD_DOJO_CONFIG:"onBuildDojoConfig",ON_SET_DOJO_URL:"onSetDojoUrl",ON_SET_SOURCE_DATA:"onSetSourceData",ON_EVENT_SELECTION_RENDERED:"onEventSelectionRendered",ON_WIDGET_PROPERTY_CHANGED:"onWidgetPropertyChanged",ON_LIBRARY_CONTAINER_CREATED:"onLibraryContainerCreated",ON_CONTEXT_READY:"onContextReady",ON_CONTEXT_DESTROYED:"onContextDestroyed",ON_BUILD_WIDGET_BLOCK_LIBRARY:"onBuildWidgetBlockLibrary",ON_SHOW_BLOCK_SMART_INPUT:"onShowBlockSmartInput",ON_WIDGET_CHANGED:"onWidgetChanged"});
return n})},"xblox/model/server/ServerBlock":function(){define(["dcl/dcl","xblox/model/Block","xide/utils"],function(n,m,k){return n(m,{declaredClass:"xblox.model.server.ServerBlock",name:"Run Server Block",method:"XShell::run",args:"",deferred:!0,defaultServiceClass:"XShell",defaultServiceMethod:"run",sharable:!0,onReloaded:function(){},solve:function(h,d,b,c){this._currentIndex=0;this._return=[];if((h=""+this.method)&&h.length){var g=new Function("{"+h+"}"),k=this.getArgs();try{var a=g.apply(this,
k||{});this._lastResult=a;b&&b("Expression "+h+" evaluates to "+a);if("false"!==a&&!1!==a)this.onSuccess(this,d);else return this.onFailed(this,d),[]}catch(e){return c&&c("invalid expression : \n"+h+": "+e),this.onFailed(this,d),[]}}else console.error("have no script");b=this[this._getContainer()];if(b.length)this.runFrom(b,0,d);else this.onSuccess(this,d);return[]},toText:function(){var h=this.getBlockIcon()+" "+this.name+" :: ";this.method&&(h+=this.method.substr(0,50));return h},canAdd:function(){return[]},
getServerDefaultFields:function(h){h=h||[];h.push(k.createCI("args",27,this.args,{group:"General",title:"Arguments",dst:"args"}));return h},getBlockIcon:function(){return'\x3cspan class\x3d"fa-plug"\x3e\x3c/span\x3e'},mayHaveChildren:function(h){return null!=this.items&&0<this.items.length},getChildren:function(h){return this.items},isInValidState:function(){return null!=this.getService()},getService:function(){return this.scope.getService()},getServiceClass:function(){return this.method.split("::")[0]||
this.defaultServiceClass},getServiceMethod:function(){return this.method.split("::")[1]||this.defaultServiceMethod},hasMethod:function(h){return this.isInValidState()&&null!=this.getService()[this.getServiceClass()]&&null!=this.getService()[this.getServiceClass()][this.getServiceMethod()]},hasServerClass:function(h){return this.isInValidState()&&null!=this.getService()[this.getServiceClass()]},getServerFunction:function(){return this.isInValidState()&&this.getServiceClass()&&this.getServiceMethod()?
this.getService()[this.getServiceClass()][this.getServiceMethod()]:null}})})},"dijit/_OnDijitClickMixin":function(){define("dojo/on dojo/_base/array dojo/keys dojo/_base/declare dojo/has ./a11yclick".split(" "),function(n,m,k,h,d,b){n=h("dijit._OnDijitClickMixin",null,{connect:function(c,d,h){return this.inherited(arguments,[c,"ondijitclick"==d?b:d,h])}});n.a11yclick=b;return n})},"dijit/form/_ListBase":function(){define(["dojo/_base/declare","dojo/on","dojo/window"],function(n,m,k){return n("dijit.form._ListBase",
null,{selected:null,_listConnect:function(h,d){var b=this;return b.own(m(b.containerNode,m.selector(function(b,d,h){return b.parentNode==h},h),function(c){b[d](c,this)}))},selectFirstNode:function(){for(var h=this.containerNode.firstChild;h&&"none"==h.style.display;)h=h.nextSibling;this._setSelectedAttr(h,!0)},selectLastNode:function(){for(var h=this.containerNode.lastChild;h&&"none"==h.style.display;)h=h.previousSibling;this._setSelectedAttr(h,!0)},selectNextNode:function(){var h=this.selected;if(h){for(h=
h.nextSibling;h&&"none"==h.style.display;)h=h.nextSibling;h?this._setSelectedAttr(h,!0):this.selectFirstNode()}else this.selectFirstNode()},selectPreviousNode:function(){var h=this.selected;if(h){for(h=h.previousSibling;h&&"none"==h.style.display;)h=h.previousSibling;h?this._setSelectedAttr(h,!0):this.selectLastNode()}else this.selectLastNode()},_setSelectedAttr:function(h,d){if(this.selected!=h){var b=this.selected;if(b)this.onDeselect(b);h&&(d&&k.scrollIntoView(h),this.onSelect(h));this._set("selected",
h)}else if(h)this.onSelect(h)}})})},"davinci/ve/actions/ContextAction":function(){define(["dojo/_base/declare","davinci/actions/Action","davinci/Runtime"],function(n,m,k){return n("davinci.ve.actions.ContextAction",[m],{_normalizeSelection:function(h){var d=h.getSelection();if(2>d.length)return d;var b=h.rootWidget,c=[];dojo.forEach(d,function(g){for(var k=g.getParent();k&&k!=b;){for(var a=0;a<d.length;a++)if(d[a]==k){h.deselect(g);return}k=k.getParent()}c.push(g)});return c},_getContext:function(h){return h?
h:(h=k.currentEditor)&&(h.getContext&&h.getContext()||h.context)},fixupContext:function(h){h=this._getContext(h);return"davinci.ve.Context"==h.declaredClass||"xideve/delite/Context"==h.declaredClass?h:"function"==typeof h.getContext?h.getContext():null}})})},"xgrid/Renderer":function(){define(["xdojo/declare","xide/types"],function(n,m){m={_renderIndex:0,_lastRenderedArray:null,publishRendering:!1,_getLabel:function(){return""},activateRenderer:function(k){},deactivateRenderer:function(k){},runAction:function(k){},
delegate:{onDidRenderCollection:function(){}},renderRow:function(k){return k.render?k.render(k,this.inherited):this.inherited(arguments)},renderArray:function(){this._lastRenderedArray=this.inherited(arguments);this._onDidRenderCollection(arguments);return this._lastRenderedArray},_onDidRenderCollection:function(){this._renderIndex++},didRender:function(){return 0<=this._renderIndex}};n=n("xgrid.Renderer",null,m);n.Implementation=m;return n})},"url:dijit/templates/Menu.html":'\x3ctable class\x3d"dijit dijitMenu dijitMenuPassive dijitReset dijitMenuTable" role\x3d"menu" tabIndex\x3d"${tabIndex}"\n\t   cellspacing\x3d"0"\x3e\n\t\x3ctbody class\x3d"dijitReset" data-dojo-attach-point\x3d"containerNode"\x3e\x3c/tbody\x3e\n\x3c/table\x3e\n',
"url:davinci/ui/templates/downloadSelected.html":"\x3cdiv class\x3d'downloadDialog'\x3e\t \n\t\x3cdiv class\x3d\"dijitDialogPaneContentArea\"\x3e\n\t\t\x3cdiv style\x3d\"margin-bottom: 20px\"\x3e\n\t\t  ${fileName}: \x3cinput data-dojo-type\x3d'dijit/form/ValidationTextBox' type\x3d\"text\" maxLength\x3d'${_fileNameMaxLength}' data-dojo-attach-point\x3d\"__fileName\" value\x3d'${_projectName}.zip' data-dojo-props\x3d\"regExp:'${_fileNameValidationRegExp}', required:true, invalidMessage:'${invalidDownloadFileName}'\"\x3e\x3c/input\x3e\n\t\t\x3c/div\x3e\n\t\t\n\t\t\x3cdiv data-dojo-attach-point\x3d\"_selectionDiv\"\x3e\x3c/div\x3e\n\n  \x3c/div\x3e\n\t\x3cdiv class\x3d\"dijitDialogPaneActionBar\"\x3e\n\t\t\x3cbutton data-dojo-type\x3d'dijit/form/Button' data-dojo-attach-point\x3d\"_okButton\" data-dojo-attach-event\x3d'onClick:okButton' label\x3d'${downloadButtonLabel}' class\x3d\"maqPrimaryButton\" type\x3d\"submit\"\x3e\x3c/button\x3e\n\t\t\x3cbutton data-dojo-type\x3d'dijit/form/Button' data-dojo-attach-event\x3d'onClick:cancelButton' label\x3d'${buttonCancel}' class\x3d\"maqSecondaryButton\"\x3e\x3c/button\x3e\n\t\x3c/div\x3e\n\x3c/div\x3e",
"url:dijit/templates/MenuBar.html":'\x3cdiv class\x3d"dijitMenuBar dijitMenuPassive" data-dojo-attach-point\x3d"containerNode" role\x3d"menubar" tabIndex\x3d"${tabIndex}"\n\t \x3e\x3c/div\x3e\n',"url:xide/views/welcome.html":'\x3cdiv class\x3d"widget" style\x3d"overflow: auto;margin: 4px;font-size: 30px !important;"\x3e\n\n\x3cdiv class\x3d"widget" attachTo\x3d"welcomeHead"/\x3e\n\n\n\x3cpre style\x3d"font-size: initial" class\x3d"widget" attachTo\x3d"welcomeMain"\x3e\n\nKeyboard\n\nF1 : Help\nF2 : Rename\nF3 : Preview file\nF4 / Enter : Edit file\nF5 : Copy to\nF6 : Move to\nF7 : Create directory\nF8 / Delete : Delete\nF9 : Create file\n\nNavigation\n\nEnter : Open or edit folder or file\nAlt + ENTER : Open in new tab\nBACKSPACE : Go back in history\n\n    Window\n\nCTRL + W : Close current tab\nF11 : Browser fullscreen\nALT + F11 : Toggle navigation panel (if exists)\nCTRL + F11 : Toggle navigation panel and ribbon, (if exists)\nNUM + + : Num \x26 Plus selects next tab\nNUM + - : Num \x26 Minus/Subtract selects prev. tab\n\n    Selection\n\nSHIFT+UP/DOWN : Multi-Selection, hold CTRL and release SHIFT to skip next whilst pressing up or down\nCTRL+A : Select all\nCTRL-D : Select none\nCTRL-I : Inverse\nCTRL + CLICK : Append/add to selection\nHOME : Go to first row : works with SHIFT\nEND : Go to last row : works with SHIFT\n\n    Tree\n\nLeft : Collapse/Expand folder\nRight : Expand folder, if open, go into!\n\n    Clipboard\n\nCTRL + C : Copy selection to clipboard\nCTRL + X : Cut selection to clipboard\nCTRL + V : Paste selection\n\n    Editor (ACE)\n\nCTRL + F11 : Maximize Toggle\nCTRL + S : Save\nCTRL + F : Open search\nCTRL + L : Reload\n\nCtrl-F / Cmd-F : Start searching\n\nCtrl-G / Cmd-G : Find next\nCtrl -/ + : Change Font Size\n\nSHIFT + CTRL-G / SHIFT-Cmd-G : Find previous\n\nSHIFT-Ctrl-F / Cmd-Option-F : Replace\nSHIFT-Ctrl-R / SHIFT-Cmd-Option-F : Replace all\n\n    Console\n\nEnter : Send or run buffer (in single line mode)\nCTRL + Enter : Send or run buffer (in multi-line mode)\nSHIFT + Enter : Clear output\nMain - Menu\n\nSHIFT + ALT + F : Open main menu\n\n    Controls - Mouse\n\nRight-Click : Open context menu\nCTRL : Enable copy mode for drag and drop\n\n    Upload\n\nSimple drag files from your desktop into any file panel\nRemote downloads: drag the browser url into any file panel\n\x3c/pre\x3e\n\x3c/div\x3e',
"url:davinci/ui/templates/download.html":'\x3cdiv class\x3d\'downloadDialog\'\x3e\t \n\t\x3cdiv class\x3d"dijitDialogPaneContentArea"\x3e\n\t\t\x3cdiv style\x3d"margin-bottom: 20px"\x3e\n\t\t  ${fileName}: \x3cinput data-dojo-type\x3d\'dijit/form/ValidationTextBox\' type\x3d"text" maxLength\x3d\'${_fileNameMaxLength}\' data-dojo-attach-point\x3d"__fileName" value\x3d\'${_projectName}.zip\' data-dojo-props\x3d"regExp:\'${_fileNameValidationRegExp}\', required:true, invalidMessage:\'${invalidDownloadFileName}\'"\x3e\x3c/input\x3e\n\t\t\x3c/div\x3e\n\t\t\n\t\t\x3cdiv data-dojo-attach-point\x3d"_selectionDiv"\x3e\x3c/div\x3e\n\t\t\x3cdiv data-dojo-attach-point\x3d"_tableDiv"\x3e\x3c/div\x3e\n\n\t\t\x3cdiv style\x3d"margin-top: 8px"\x3e\n\t\t  Select: \x3ca href\x3d"javascript:;" data-dojo-attach-event\x3d"onclick: _selectAll"\x3e${selectAll}\x3c/a\x3e / \x3ca href\x3d"javascript:;" data-dojo-attach-event\x3d"onclick: _selectNone"\x3e${selectNone}\x3c/a\x3e\n\t\t\x3c/div\x3e\n\n\t\t\x3cdiv style\x3d"margin-top: 20px"\x3e\n\t\t\t\x3cinput data-dojo-type\x3d\'dijit/form/CheckBox\' type\x3d"text" data-dojo-attach-point\x3d"__fullSource" data-dojo-props\x3d""\x3e\x3c/input\x3e\x3cspan style\x3d\'padding-left: 3px;\'\x3e${downloadFullSource}\x3c/span\x3e\n\t\t\t\x3cbr\x3e\n\t\t\t\x3cinput data-dojo-type\x3d\'dijit/form/CheckBox\' type\x3d"text" data-dojo-attach-point\x3d"__optimize" data-dojo-props\x3d""\x3e\x3c/input\x3e\x3cspan style\x3d\'padding-left: 3px;\'\x3e${optimizeOption}\x3c/span\x3e\n\t\t\x3c/div\x3e\n  \x3c/div\x3e\n\t\x3cdiv class\x3d"dijitDialogPaneActionBar"\x3e\n\t\t\x3cbutton data-dojo-type\x3d\'dijit/form/Button\' data-dojo-attach-point\x3d"_okButton" data-dojo-attach-event\x3d\'onClick:okButton\' label\x3d\'${downloadButtonLabel}\' class\x3d"maqPrimaryButton" type\x3d"submit"\x3e\x3c/button\x3e\n\t\t\x3cbutton data-dojo-type\x3d\'dijit/form/Button\' data-dojo-attach-event\x3d\'onClick:cancelButton\' label\x3d\'${buttonCancel}\' class\x3d"maqSecondaryButton"\x3e\x3c/button\x3e\n\t\x3c/div\x3e\n\x3c/div\x3e',
"url:dijit/templates/MenuSeparator.html":'\x3ctr class\x3d"dijitMenuSeparator" role\x3d"separator"\x3e\n\t\x3ctd class\x3d"dijitMenuSeparatorIconCell"\x3e\n\t\t\x3cdiv class\x3d"dijitMenuSeparatorTop"\x3e\x3c/div\x3e\n\t\t\x3cdiv class\x3d"dijitMenuSeparatorBottom"\x3e\x3c/div\x3e\n\t\x3c/td\x3e\n\t\x3ctd colspan\x3d"3" class\x3d"dijitMenuSeparatorLabelCell"\x3e\n\t\t\x3cdiv class\x3d"dijitMenuSeparatorTop dijitMenuSeparatorLabel"\x3e\x3c/div\x3e\n\t\t\x3cdiv class\x3d"dijitMenuSeparatorBottom"\x3e\x3c/div\x3e\n\t\x3c/td\x3e\n\x3c/tr\x3e\n',
"url:davinci/ve/actions/templates/ModifyState.html":'\x3cdiv\x3e\n\t\x3cdiv class\x3d"dijitDialogPaneContentArea"\x3e\n\t\t\x3cdiv class\x3d\'modify_state_container\'\x3e\n\t\t\t\x3cdiv data-dojo-type\x3d"dijit.form.DropDownButton" label\x3d\'${veNls.renameLabel}\' dojoAttachPoint\x3d"renameButton" class\x3d"modify_state_rename_button"\x3e\n\t\t\t\t\t\x3cdiv data-dojo-type\x3d"dijit.TooltipDialog" class\x3d\'modify_state_rename_container\' id\x3d\'state_rename_tooltip_dialog\'\x3e\n\t\t\t\t\t\t\x3cdiv\x3e\n\t\t\t\t\t\t\t\x3clabel for\x3d"state_rename_new_name"\x3e${veNls.newStateLabel}\x3c/label\x3e\n\t\t\t\t\t\t\t\x3cinput data-dojo-type\x3d"dijit.form.ValidationTextBox" id\x3d"state_rename_new_name" name\x3d"state_rename_new_name"\x3e\x3c/input\x3e\n\t\t\t\t\t\t\x3c/div\x3e\n\t\t\t\t\t\t\x3cdiv\x3e\n\t\t\t\t\t\t\t\x3cbutton id\x3d"state_rename_do_it" dojoType\x3d\'dijit.form.Button\' label\x3d\'${veNls.renameLabel}\'\x3e\x3c/button\x3e\n\t\t\t\t\t\t\t\x3cbutton id\x3d"state_rename_cancel" dojoType\x3d\'dijit.form.Button\' label\x3d\'${veNls.cancelLabel}\'\x3e\x3c/button\x3e\n\t\t\t\t\t\t\x3c/div\x3e\n\t\t\t\t\t\x3c/div\x3e\n\t\t\t\t\x3c/div\x3e\n\t\t\t${veNls.stateLabel}: \x3cspan id\x3d\'modify_state_old_name\'\x3eaaa\x3c/span\x3e\n\t\t\x3c/div\x3e\n\t\t\x3cdiv class\x3d\'initial_state_row\'\x3e\n\t\t\t\x3cinput data-dojo-type\x3d"dijit.form.CheckBox" dojoAttachPoint\x3d"initialState" id\x3d"modify_state_initial_state" name\x3d"modify_state_initial_state"\x3e\x3c/input\x3e\n\t\t\t\x3clabel for\x3d\'modify_state_initial_state\'\x3e${veNls.initialStateCheckBoxLabel}\x3c/label\x3e\n\t\t\x3c/div\x3e\n\t\x3c/div\x3e\n\t\t\t\t\n\t\x3cdiv class\x3d"dijitDialogPaneActionBar"\x3e\n\t\t\x3cbutton dojoType\x3d\'dijit.form.Button\' dojoAttachPoint\x3d"okButton" label\x3d\'${veNls.modifyLabel}\' class\x3d"maqPrimaryButton"\x3e\x3c/button\x3e\n\t\t\x3cbutton dojoType\x3d\'dijit.form.Button\' dojoAttachPoint\x3d"cancelButton" label\x3d\'${commonNls.buttonCancel}\' class\x3d"maqSecondaryButton"\x3e\x3c/button\x3e\n\t\x3c/div\x3e\n\x3c/div\x3e\n',
"url:dijit/form/templates/DropDownButton.html":'\x3cspan class\x3d"dijit dijitReset dijitInline"\n\t\x3e\x3cspan class\x3d\'dijitReset dijitInline dijitButtonNode\'\n\t\tdata-dojo-attach-event\x3d"ondijitclick:__onClick" data-dojo-attach-point\x3d"_buttonNode"\n\t\t\x3e\x3cspan class\x3d"dijitReset dijitStretch dijitButtonContents"\n\t\t\tdata-dojo-attach-point\x3d"focusNode,titleNode,_arrowWrapperNode,_popupStateNode"\n\t\t\trole\x3d"button" aria-haspopup\x3d"true" aria-labelledby\x3d"${id}_label"\n\t\t\t\x3e\x3cspan class\x3d"dijitReset dijitInline dijitIcon"\n\t\t\t\tdata-dojo-attach-point\x3d"iconNode"\n\t\t\t\x3e\x3c/span\n\t\t\t\x3e\x3cspan class\x3d"dijitReset dijitInline dijitButtonText"\n\t\t\t\tdata-dojo-attach-point\x3d"containerNode"\n\t\t\t\tid\x3d"${id}_label"\n\t\t\t\x3e\x3c/span\n\t\t\t\x3e\x3cspan class\x3d"dijitReset dijitInline dijitArrowButtonInner fa fa-sort-desc"\x3e\x3c/span\n\t\t\t\x3e\x3cspan class\x3d"dijitReset dijitInline dijitArrowButtonChar"\x3e\x26#9660;\x3c/span\n\t\t\x3e\x3c/span\n\t\x3e\x3c/span\n\t\x3e\x3cinput ${!nameAttrSetting} type\x3d"${type}" value\x3d"${value}" class\x3d"dijitOffScreen" tabIndex\x3d"-1"\n\t\tdata-dojo-attach-event\x3d"onclick:_onClick"\n\t\tdata-dojo-attach-point\x3d"valueNode" role\x3d"presentation" aria-hidden\x3d"true"\n/\x3e\x3c/span\x3e\n',
"url:dijit/form/templates/DropDownBox.html":'\x3cdiv class\x3d"dijit dijitReset dijitInline dijitLeft"\n\tid\x3d"widget_${id}"\n\trole\x3d"combobox"\n\taria-haspopup\x3d"true"\n\tdata-dojo-attach-point\x3d"_popupStateNode"\n\t\x3e\x3cdiv class\x3d\'dijitReset dijitRight dijitButtonNode dijitArrowButton dijitDownArrowButton dijitArrowButtonContainer\'\n\t\tdata-dojo-attach-point\x3d"_buttonNode" role\x3d"presentation"\n\t\t\x3e\x3cinput class\x3d"dijitReset dijitInputField dijitArrowButtonInner" value\x3d"\x26#9660; " type\x3d"text" tabIndex\x3d"-1" readonly\x3d"readonly" role\x3d"button presentation" aria-hidden\x3d"true"\n\t\t\t${_buttonInputDisabled}\n\t/\x3e\x3c/div\n\t\x3e\x3cdiv class\x3d\'dijitReset dijitValidationContainer\'\n\t\t\x3e\x3cinput class\x3d"dijitReset dijitInputField dijitValidationIcon dijitValidationInner" value\x3d"\x26#935; " type\x3d"text" tabIndex\x3d"-1" readonly\x3d"readonly" role\x3d"presentation"\n\t/\x3e\x3c/div\n\t\x3e\x3cdiv class\x3d"dijitReset dijitInputField dijitInputContainer"\n\t\t\x3e\x3cinput class\x3d\'dijitReset dijitInputInner\' ${!nameAttrSetting} type\x3d"text" autocomplete\x3d"off"\n\t\t\tdata-dojo-attach-point\x3d"textbox,focusNode" role\x3d"textbox"\n\t/\x3e\x3c/div\n\x3e\x3c/div\x3e\n',
"url:davinci/ve/actions/templates/EnableApplicationStates.html":"\x3cdiv\x3e\n\t\x3cdiv class\x3d\"dijitDialogPaneContentArea\"\x3e\n\t\t\x3cdiv class\x3d'EnableAsStateContainerWidgetDiv'\x3e\n\t\t\t${veNls.EnableApplicationStatesCurrentWidget}:\n\t\t\t\x3cspan class\x3d'EnableAsStateContainerWidgetLabel' dojoAttachPoint\x3d'widgetLabel'\x3e\x3c/span\x3e\n\t\t\x3c/div\x3e\n\t\t\x3cdiv class\x3d'EnableAsStateContainerStatesDiv' dojoAttachPoint\x3d'statesListDiv'\x3e\n\t\t\t//Filled in by JavaScript logic\n\t\t\x3c/div\x3e\n\t\t\x3cdiv class\x3d'EnableAsStateContainerDescriptionDiv' dojoAttachPoint\x3d'description'\x3e\n\t\t\t//Filled in by JavaScript logic\n\t\t\x3c/div\x3e\n\t\t\x3cdiv class\x3d'EnableAsStateContainerCheckBoxDiv'\x3e\n\t\t\t\x3cinput dojoAttachPoint\x3d\"checkBoxWidget\" dojoType\x3d\"dijit.form.CheckBox\" dojoAttachEvent\x3d\"onKeyUp:_onKeyPress\" type\x3d\"text\"\x3e\x3c/input\x3e\n\t\t\t${veNls.EnableAsStateContainerWidgetLabel}\n\t\t\x3c/div\x3e\n\t\x3c/div\x3e\n\t\t\t\t\n\t\x3cdiv class\x3d\"dijitDialogPaneActionBar\"\x3e\n\t\t\x3cbutton dojoType\x3d'dijit.form.Button' dojoAttachPoint\x3d'okButton' label\x3d'${commonNls.buttonOk}' class\x3d\"maqPrimaryButton\"\x3e\x3c/button\x3e\n\t\t\x3cbutton dojoType\x3d'dijit.form.Button' dojoAttachPoint\x3d'cancelButton' label\x3d'${commonNls.buttonCancel}' class\x3d\"maqSecondaryButton\"\x3e\x3c/button\x3e\n\t\x3c/div\x3e\n\x3c/div\x3e\n",
"url:dijit/form/templates/ValidationTextBox.html":'\x3cdiv class\x3d"dijit dijitReset dijitInline dijitLeft"\n\tid\x3d"widget_${id}" role\x3d"presentation"\n\t\x3e\x3cdiv class\x3d\'dijitReset dijitValidationContainer\'\n\t\t\x3e\x3cinput class\x3d"dijitReset dijitInputField dijitValidationIcon dijitValidationInner" value\x3d"\x26#935; " type\x3d"text" tabIndex\x3d"-1" readonly\x3d"readonly" role\x3d"presentation"\n\t/\x3e\x3c/div\n\t\x3e\x3cdiv class\x3d"dijitReset dijitInputField dijitInputContainer"\n\t\t\x3e\x3cinput class\x3d"dijitReset dijitInputInner" data-dojo-attach-point\x3d\'textbox,focusNode\' autocomplete\x3d"off"\n\t\t\t${!nameAttrSetting} type\x3d\'${type}\'\n\t/\x3e\x3c/div\n\x3e\x3c/div\x3e\n',
"url:davinci/ve/widgets/templates/WidgetToolBar.html":'\x3cdiv class\x3d"propertiesTitleBar ui-widget-content" style\x3d"display: none"\x3e\n    \x3cdiv class\x3d\'propertiesWidgetDescription\'\x3e\n        \x3cspan class\x3d\'propertiesWidgetDescriptionFor\'\x3e${veNLS.toolBarFor}\x3c/span\x3e\n        \x3cspan data-dojo-attach-point\x3d"descNode"\x3e${veNLS.noSelection}\x3c/span\x3e\n    \x3c/div\x3e\n    \x3cdiv class\x3d"propertiesTitleBarPropertiesContainer"\x3e\n        \x3ctable width\x3d"100%" cellspacing\x3d"0" cellpadding\x3d"0" border\x3d"0" align\x3d"center"\n               class\x3d"propertiesTitleBarProperties property_table_stretchable"\x3e\n            \x3ccolgroup\x3e\n                \x3ccol style\x3d"width:10px;"\x3e\n                \x3ccol class\x3d"gap02"\x3e\n                \x3ccol class\x3d"gap03"\x3e\n                \x3ccol style\x3d"width:10px;"\x3e\n                \x3ccol style\x3d"width:6px;"\x3e\n            \x3c/colgroup\x3e\n            \x3ctbody\x3e\n            \x3c!--tr class\x3d"cssPropertySection"\x3e\n                \x3ctd\x3e\x3c/td\x3e\n                \x3ctd class\x3d"propertyDisplayName"\x3e${veNLS.toolBarClass}\x26nbsp;\x3c/td\x3e\n                \x3ctd class\x3d"propertyInputField"\x3e\n                  \x3cinput data-dojo-type\x3d"dijit.form.ComboBox" data-dojo-attach-point\x3d"classComboBox" label\x3d"" data-dojo-attach-event\x3d"onChange:_onChangeClassAttribute,onFocus:_onFieldFocus,onBlur:_onFieldBlur" style\x3d"width: 100%" searchAttr\x3d"name"/\x3e\n                \x3c/td\x3e\n                \x3ctd nowrap\x3d"true" class\x3d"propertyExtra"\x3e\x3c/td\x3e\n                \x3ctd\x3e\x3c/td\x3e\n            \x3c/tr--\x3e\n            \x3ctr class\x3d"cssPropertySection"\x3e\n                \x3ctd\x3e\x3c/td\x3e\n                \x3ctd class\x3d"propertyDisplayName"\x3e${veNLS.toolBarId}\x26nbsp;\x3c/td\x3e\n                \x3ctd class\x3d"propertyInputField"\x3e\n                    \x3cinput class\x3d"form-control input-transparent" data-dojo-type\x3d"dijit.form.ValidationTextBox" data-dojo-attach-point\x3d"idTextBox" label\x3d"" data-dojo-attach-event\x3d"onChange:_onChangeIDAttribute,onKeyPress:_onKeyPress,onFocus:_onFieldFocus,onBlur:_onFieldBlur" style\x3d"width: 100%"/\x3e\n                \x3c/td\x3e\n                \x3ctd nowrap\x3d"true" class\x3d"propertyExtra"\x3e\x3c/td\x3e\n                \x3ctd\x3e\x3c/td\x3e\n            \x3c/tr\x3e\n\n            \x3ctr class\x3d"cssPropertySection"\x3e\n                \x3ctd\x3e\x3c/td\x3e\n                \x3ctd class\x3d"propertyDisplayName"\x3eClass\x3c/td\x3e\n                \x3ctd class\x3d"propertyInputField"\x3e\n                    \x3cinput data-dojo-attach-point\x3d"cssClasses" type\x3d"text" class\x3d"" value\x3d"" style\x3d"width: 100%"\x3e\n                \x3c/td\x3e\n                \x3ctd nowrap\x3d"true" class\x3d"propertyExtra"\x3e\x3c/td\x3e\n                \x3ctd\x3e\x3c/td\x3e\n            \x3c/tr\x3e\n            \x3c!--tr class\x3d"cssPropertySection"\x3e\n                \x3ctd\x3e\x3c/td\x3e\n                \x3ctd class\x3d"propertyDisplayName"\x3eBlock Group\x26nbsp;\x3c/td\x3e\n                \x3ctd class\x3d"propertyInputField"\x3e\n                    \x3cinput data-dojo-type\x3d"dijit.form.ComboBox" data-dojo-attach-point\x3d"blockGroupComboBox" label\x3d"" data-dojo-attach-event\x3d"onChange:_onChangeBlockGroupAttribute,onFocus:_onFieldFocus,onBlur:_onFieldBlur" style\x3d"width: 100%" searchAttr\x3d"name"/\x3e\n                \x3c/td\x3e\n                \x3ctd nowrap\x3d"true" class\x3d"propertyExtra"\x3e\x3c/td\x3e\n                \x3ctd\x3e\x3c/td\x3e\n            \x3c/tr--\x3e\n            \x3c/tbody\x3e\n        \x3c/table\x3e\n    \x3c/div\x3e\n\x3c/div\x3e\n',
"url:davinci/ui/widgets/templates/FileFieldDialog.html":"\x3cdiv\x3e\n\t\x3cdiv style\x3d'float:right;'\x3e\n\t\t\x3cbutton type\x3d'button' style\x3d'font-size:.75em;float:right;' dojoType\x3d\"dijit.form.Button\" dojoAttachPoint\x3d\"button\" dojoAttachEvent\x3d\"onClick:_showFileSelectionDialog\"\x3e...\x3c/button\x3e\n\t\x3c/div\x3e\n\t\x3cdiv style\x3d'margin-right:35px;'\x3e\n\t\t\x3cinput style\x3d'width:100%;' type\x3d'text' dojoType\x3d\"dijit.form.TextBox\" dojoAttachPoint\x3d\"textField\" dojoAttachEvent\x3d\"onChange:_onChange\"\x3e\x3c/input\x3e\n\t\x3c/div\x3e\n\x3c/div\x3e\n\n",
"url:davinci/ve/widgets/templates/BackgroundDialog.html":"\x3cdiv class\x3d\"backgroundDialog\" style\x3d\"position:relative\" dojoAttachPoint\x3d\"_fileDialog\"\x3e\n\t\x3cstyle type\x3d\"text/css\"\x3e\n\t\t.backgroundDialog {\n\t\t\twidth:31em;\n\t\t}\n\t\t.bgdTopDiv {\n\t\t\tmargin-top: 4px;\n\t\t\tpadding-left: .75em;\n\t\t}\n\t\t.bgdTopTable {\n\t\t\twidth:100%;\n\t\t\tborder-collapse:collapse;\n\t\t}\n\t\t.bgdTopLabel, .bgdTopField, .bgdTopPreview {\n\t\t\twidth:1px;\n\t\t\twhite-space:nowrap;\n\t\t}\n\t\t.bgdTopLabel {\n\t\t\ttext-align:right;\n\t\t\tpadding-right:6px;\n\t\t}\n\t\t.bgdTopTable .dijitSelect .dijitButtonContents {\n\t\t\twidth:8em;\n\t\t}\n\t\t.bgdTopTable .dijitTextBox {\n\t\t\twidth: 9.8em;\n\t\t}\n\t\t.bgdPreview {\n\t\t\tdisplay:inline-block;\n\t\t\twidth: 6em;\n\t\t\theight: 2.8em;\n\t\t\tmargin-left:12px;\n\t\t\tborder:1px solid gray;\n\t\t\tvertical-align: middle;\n\t\t}\n\t\t.bgdOptionsDiv {\n\t\t\tmargin:0.3em 0em 1em 1em;\n\t\t}\n\t\t.bgdOptionsDiv \x3e table {\n\t\t\twidth:27em;\n\t\t}\n\t\t.bgdSection {\n\t\t\tbackground-color:#d8d8d8;\n\t\t}\n\t\tdiv.bgdSection, .bgdSection td, .bgdSection.bgdUrlSectionLabel {\n\t\t\tpadding:2px 5px;\n\t\t}\n\t\t.bgdBeforeStopsLabel {\n\t\t\theight:6px;\n\t\t}\n\t\t.bgdStopsLabel {\n\t\t\tmargin-top:1em;\n\t\t}\n\t\t.bgdAfterStopsLabel {\n\t\t\theight:0px;\n\t\t}\n\t\t.bgdBeforeOptionsLabel {\n\t\t\theight:16px;\n\t\t}\n\t\t.bgdOptionsLabel {\n\t\t\tmargin-top:1em;\n\t\t}\n\t\t.bgdAfterOptionsLabel {\n\t\t\theight:4px;\n\t\t}\n\t\t.bgdCol1 {\n\t\t\twidth:10px;\n\t\t}\n\t\t.bgdPlusMinusButtons {\n\t\t\twhite-space:nowrap;\n\t\t\twidth:51px;\n\t\t}\n\t\t.bgdOptionsDiv th {\n\t\t\ttext-align:center;\n\t\t\tfont-style:italic;\n\t\t}\n\t\t.bgdOptsLabel {\n\t\t\ttext-align:right;\n\t\t\tpadding-right: 6px;\n\t\t\twhite-space:nowrap;\n\t\t}\n\t\t.bgdColor.dijitTextBox {\n\t\t\twidth:9em;\n\t\t}\n\t\t.bgdOptionsDiv .bgdPosition.dijitTextBox {\n\t\t\twidth:5em;\n\t\t}\n\t\t.bgdOptionsDiv .dijitTextBox {\n\t\t\twidth:10.6em;\n\t\t}\n\t\t.bgdStopColorTD .dijitTextBox {\n\t\t\twidth:14em;\n\t\t}\n\t\t.bgdOptionsDiv .dijitSelect {\n\t\t\tmargin:0;\n\t\t}\n\t\t.bgdOptionsDiv .dijitSelect .dijitButtonContents {\n\t\t\twidth:9em;\n\t\t}\n\t\t.bgdUrlContainerOuter {\n\t\t\tmargin-top:1em;\n\t\t\tmargin-left:1em;\n\t\t}\n\t\t.bgdUrlContainerInner {\n\t\t\tmargin:0 1em;\n\t\t}\n\t\t.bgdUrlSectionLabel {\n\t\t\tmargin:1em 0 .25em;\n\t\t}\n\t\t.bgdFileTreeContainer {\n\t\t\tmargin: 0 0 0 3px;\n\t\t\tborder: 1px solid #26A;\n\t\t}\n\t\t.bgdFileTreeContainer .dijitTree {\n\t\t\theight:125px;\n\t\t}\t\t\n\t\t.backgroundDialog .fileNameRow  {\n\t\t\tmargin:8px 0 .4em;\n\t\t}\n\t\t.backgroundDialog .fileNameRow label {\n\t\t\tvertical-align:middle;\n\t\t\tmargin-right:4px;\n\t\t}\n\t\t.backgroundDialog .fileNameRow .dijitTextBox {\n\t\t\twidth:16em;\n\t\t}\n\t\t.bgdOptionsDiv .bgdOtherRow .dijitTextBox {\n\t\t\twidth:15em;\n\t\t}\n\t\t\n\t\x3c/style\x3e\n\n\t\x3cdiv class\x3d\"dijitDialogPaneContentArea\"\x3e\n\t\t\x3cdiv class\x3d'bgdTopDiv'\x3e\n\t\t\t\x3ctable class\x3d'bgdTopTable'\x3e\n\t\t\t\t\x3ctr\x3e\n\t\t\t\t\t\x3ctd class\x3d'bgdTopLabel'\x3e\x3clabel class\x3d'bgdTypeDivTypeLabel'\x3e${veNLS.bgdBackgroundColor}\x3c/label\x3e\x3c/td\x3e\n\t\t\t\t\t\x3ctd class\x3d'bgdTopField'\x3e\n\t\t\t\t\t\t\x3cselect dojoType\x3d\"dijit.form.ComboBox\" dojoAttachPoint\x3d'bgdColorCB'\x3e\n\t\t\t\t\t\t\t\x3c!--  values added dynamically --\x3e\n\t\t\t\t\t\t\x3c/select\x3e\n\t\t\t\t\t\x3c/td\x3e\n\t\t\t\t\t\x3ctd rowspan\x3d'2' class\x3d'bgdTopPreview' style\x3d'border-collapse:collapse'\x3e\x3cspan class\x3d'bgdPreview'\x3e\x3c/span\x3e\x3c/td\x3e\n\t\t\t\t\t\x3ctd class\x3d'bgdTopExpando'\x3e\x26nbsp;\x3c/td\x3e\n\t\t\t\t\x3c/tr\x3e\n\t\t\t\t\x3ctr\x3e\n\t\t\t\t\t\x3ctd class\x3d'bgdTopLabel'\x3e\x3clabel class\x3d'bgdTypeDivTypeLabel'\x3e${veNLS.bgdBackgroundImageType}\x3c/label\x3e\x3c/td\x3e\n\t\t\t\t\t\x3ctd class\x3d'bgdTopField'\x3e\n\t\t\t\t\t\t\x3cselect dojoType\x3d'dijit.form.Select' value\x3d'linear' dojoAttachPoint\x3d'bgdTypeSelect'\x3e\n\t\t\t\t\t\t\t\x3c!--  values added dynamically --\x3e\n\t\x3c!-- FIXME: Add plain text type-in box if unrecognized syntax --\x3e\n\t\t\t\t\t\t\x3c/select\x3e\n\t\t\t\t\t\x3c/td\x3e\n\t\t\t\t\t\x3ctd class\x3d'bgdTopExpando'\x3e\x26nbsp;\x3c/td\x3e\n\t\t\t\t\x3c/tr\x3e\n\t\t\t\x3c/table\x3e\n\t\t\x3c/div\x3e\n\t\t\n\t\t\x3cdiv class\x3d\"bgdUrlContainerOuter bgdImageOptRow\"\x3e\n\t\t\t\x3cdiv class\x3d\"bgdSection bgdOptionsLabel\"\x3e${veNLS.bgdImageUrl}\x3c/div\x3e\n\t\t\t\x3cdiv class\x3d\"bgdUrlContainerInner\"\x3e\n\t\t\t\t\x3cdiv class\x3d'fileNameRow'\x3e\n\t\t\t\t\t\x3ctd class\x3d\"fileDialogLabelCell\"\x3e\n\t\t\t\t\t\x3clabel\x3e${veNLS.bgdUrl}\x3c/label\x3e\n\t\t\t\t\t\x3c/td\x3e\n\t\t\t\t\t\x3ctd\x3e\n\t\t\t\t\t\x3cdiv dojoType\x3d'davinci.ui.widgets.FileFieldDialog' dojoAttachPoint\x3d\"_filePicker\"\x3e\x3c/div\x3e\n\t\t\t\t\t\x3c/td\x3e\n\t\t\t\t\x3c/div\x3e\n\t\t\t\x3c/div\x3e\n\t\t\x3c/div\x3e\n\t\t\x3cdiv class\x3d\"bgdOptionsDiv\"\x3e\n\t\t\t\x3ctable\x3e\n\t\t\t\t\x3ctr class\x3d\"bgdGradOptRow bgdBeforeStopsLabel\"\x3e\x3c/tr\x3e\n\t\t\t\t\x3ctr class\x3d\"bgdGradOptRow bgdSection bgdStopsLabel\"\x3e\n\t\t\t\t\t\x3ctd colspan\x3d\"5\"\x3e${veNLS.bgdColorStops}\x3c/td\x3e\n\t\t\t\t\x3c/tr\x3e\n\t\t\t\t\x3ctr class\x3d\"bgdGradOptRow bgdAfterStopsLabel\"\x3e\x3c/tr\x3e\n\t\t\t\t\x3ctr class\x3d'bgdGradOptRow bgdStopRow'\x3e\n\t\t\t\t\t\x3cth\x3e\x3c/th\x3e\x3cth\x3e\x3c/th\x3e\x3cth\x3e${veNLS.bgdColor}\x3c/th\x3e\x3cth\x3e${veNLS.bgdPosition}\x3c/th\x3e\x3cth\x3e\x3c/th\x3e\n\t\t\t\t\x3c/tr\x3e\n\t\t\t\t\x3c!--  gradient stop rows added dynamically --\x3e\n\t\t\t\t\x3ctr class\x3d\"bgdBeforeOptionsLabel bgdOptionsLabelRow\"\x3e\x3c/tr\x3e\n\t\t\t\t\x3ctr class\x3d\"bgdSection bgdOptionsLabel bgdOptionsLabelRow\"\x3e\n\t\t\t\t\t\x3ctd colspan\x3d\"5\"\x3e${veNLS.bgdOptions}\x3c/td\x3e\n\t\t\t\t\x3c/tr\x3e\n\t\t\t\t\x3ctr class\x3d\"bgdAfterOptionsLabel bgdOptionsLabelRow\"\x3e\x3c/tr\x3e\n\t\t\t\t\x3ctr class\x3d\"bgdGradOptRow bgdLinearOptRow\"\x3e\t\n\t\t\t\t\t\x3ctd class\x3d'bgdCol1'\x3e\x3c/td\x3e\n\t\t\t\t\t\x3ctd class\x3d'bgdOptsLabel'\x3e\x3clabel\x3e${veNLS.bgdAngle}\x3c/label\x3e\x3c/td\x3e\n\t\t\t\t\t\x3ctd colspan\x3d'3'\x3e\n\t\t\t\t\t\t\x3cselect dojoType\x3d\"dijit.form.ComboBox\" dojoAttachPoint\x3d'bgdLinearAngleCB'\x3e\n\t\t\t\t\t\t\t\x3c!--  values added dynamically --\x3e\n\t\t\t\t\t\t\x3c/select\x3e\n\t\t\t\t\t\x3c/td\x3e\n\t\t\t\t\x3c/tr\x3e\n\t\t\t\t\x3ctr class\x3d\"bgdGradOptRow bgdRadialOptRow\"\x3e\t\n\t\t\t\t\t\x3ctd class\x3d'bgdCol1'\x3e\x3c/td\x3e\n\t\t\t\t\t\x3ctd class\x3d'bgdOptsLabel'\x3e${veNLS.bgdPosition2}\x3c/td\x3e\n\t\t\t\t\t\x3ctd colspan\x3d'3'\x3e\n\t\t\t\t\t\t\x3cselect dojoType\x3d\"dijit.form.ComboBox\" dojoAttachPoint\x3d'bgdRadialPosCB'\x3e\n\t\t\t\t\t\t\t\x3c!--  values added dynamically --\x3e\n\t\t\t\t\t\t\x3c/select\x3e\n\t\t\t\t\t\x3c/td\x3e\n\t\t\t\t\x3c/tr\x3e\n\t\t\t\t\x3ctr dojoAttachPoint\x3d\"bgdShapeRow\" class\x3d\"bgdGradOptRow bgdRadialOptRow\"\x3e\t\n\t\t\t\t\t\x3ctd class\x3d'bgdCol1'\x3e\x3c/td\x3e\n\t\t\t\t\t\x3ctd class\x3d'bgdOptsLabel'\x3e\x3clabel\x3e${veNLS.bgdShape}\x3c/label\x3e\x3c/td\x3e\n\t\t\t\t\t\x3ctd colspan\x3d'3'\x3e\n\t\t\t\t\t\t\x3cselect dojoType\x3d\"dijit.form.ComboBox\" dojoAttachPoint\x3d'bgdRadialShapeCB'\x3e\n\t\t\t\t\t\t\t\x3c!--  values added dynamically --\x3e\n\t\t\t\t\t\t\x3c/select\x3e\n\t\t\t\t\t\x3c/td\x3e\n\t\t\t\t\x3c/tr\x3e\n\t\t\t\t\x3ctr dojoAttachPoint\x3d\"bgdExtentRow\" class\x3d\"bgdGradOptRow bgdRadialOptRow\"\x3e\t\n\t\t\t\t\t\x3ctd class\x3d'bgdCol1'\x3e\x3c/td\x3e\n\t\t\t\t\t\x3ctd class\x3d'bgdOptsLabel'\x3e\x3clabel\x3e${veNLS.bgdExtent}\x3c/label\x3e\x3c/td\x3e\n\t\t\t\t\t\x3ctd colspan\x3d'3'\x3e\n\t\t\t\t\t\t\x3cselect dojoType\x3d\"dijit.form.ComboBox\" dojoAttachPoint\x3d'bgdRadialExtentCB'\x3e\n\t\t\t\t\t\t\t\x3c!--  values added dynamically --\x3e\n\t\t\t\t\t\t\x3c/select\x3e\n\t\t\t\t\t\x3c/td\x3e\n\t\t\t\t\x3c/tr\x3e\n\t\t\t\t\x3ctr dojoAttachPoint\x3d\"bgdRepeatRow\" class\x3d\"bgdImageOptRow\"\x3e\t\n\t\t\t\t\t\x3ctd class\x3d'bgdCol1'\x3e\x3c/td\x3e\n\t\t\t\t\t\x3ctd class\x3d'bgdOptsLabel'\x3e\x3clabel\x3e${veNLS.bgdBackgroundRepeat}\x3c/label\x3e\x3c/td\x3e\n\t\t\t\t\t\x3ctd colspan\x3d'3'\x3e\n\t\t\t\t\t\t\x3cselect dojoType\x3d\"dijit.form.ComboBox\" dojoAttachPoint\x3d'bgdRepeatCB'\x3e\n\t\t\t\t\t\t\t\x3c!--  values added dynamically --\x3e\n\t\t\t\t\t\t\x3c/select\x3e\n\t\t\t\t\t\x3c/td\x3e\n\t\t\t\t\x3c/tr\x3e\n\t\t\t\t\x3ctr dojoAttachPoint\x3d\"bgdPositionRow\" class\x3d\"bgdImageOptRow\"\x3e\t\n\t\t\t\t\t\x3ctd class\x3d'bgdCol1'\x3e\x3c/td\x3e\n\t\t\t\t\t\x3ctd class\x3d'bgdOptsLabel'\x3e${veNLS.bgdBackgroundPosition}\x3c/td\x3e\n\t\t\t\t\t\x3ctd colspan\x3d'3'\x3e\n\t\x3c!-- FIXME: regExp, invalidMessage --\x3e\n\t\t\t\t\t\t\x3cselect dojoType\x3d\"dijit.form.ComboBox\" dojoAttachPoint\x3d'bgdPositionCB'\x3e\n\t\t\t\t\t\t\t\x3c!--  values added dynamically --\x3e\n\t\t\t\t\t\t\x3c/select\x3e\n\t\t\t\t\t\x3c/td\x3e\n\t\t\t\t\x3c/tr\x3e\n\t\t\t\t\x3ctr dojoAttachPoint\x3d\"bgdSizeRow\" class\x3d\"bgdImageOptRow\"\x3e\t\n\t\t\t\t\t\x3ctd class\x3d'bgdCol1'\x3e\x3c/td\x3e\n\t\t\t\t\t\x3ctd class\x3d'bgdOptsLabel'\x3e${veNLS.bgdBackgroundSize}\x3c/td\x3e\n\t\t\t\t\t\x3ctd colspan\x3d'3'\x3e\n\t\x3c!-- FIXME: regExp, invalidMessage --\x3e\n\t\t\t\t\t\t\x3cselect dojoType\x3d\"dijit.form.ComboBox\" dojoAttachPoint\x3d'bgdSizeCB'\x3e\n\t\t\t\t\t\t\t\x3c!--  values added dynamically --\x3e\n\t\t\t\t\t\t\x3c/select\x3e\n\t\t\t\t\t\x3c/td\x3e\n\t\t\t\t\x3c/tr\x3e\n\t\t\t\t\x3ctr dojoAttachPoint\x3d\"bgdOriginRow\" class\x3d\"bgdImageOptRow\"\x3e\t\n\t\t\t\t\t\x3ctd class\x3d'bgdCol1'\x3e\x3c/td\x3e\n\t\t\t\t\t\x3ctd class\x3d'bgdOptsLabel'\x3e\x3clabel\x3e${veNLS.bgdBackgroundOrigin}\x3c/label\x3e\x3c/td\x3e\n\t\t\t\t\t\x3ctd colspan\x3d'3'\x3e\n\t\t\t\t\t\t\x3cselect dojoType\x3d\"dijit.form.ComboBox\" dojoAttachPoint\x3d'bgdOriginCB'\x3e\n\t\t\t\t\t\t\t\x3c!--  values added dynamically --\x3e\n\t\t\t\t\t\t\x3c/select\x3e\n\t\t\t\t\t\x3c/td\x3e\n\t\t\t\t\x3c/tr\x3e\n\t\t\t\t\x3ctr dojoAttachPoint\x3d\"bgdClipRow\" class\x3d\"bgdImageOptRow\"\x3e\t\n\t\t\t\t\t\x3ctd class\x3d'bgdCol1'\x3e\x3c/td\x3e\n\t\t\t\t\t\x3ctd class\x3d'bgdOptsLabel'\x3e\x3clabel\x3e${veNLS.bgdBackgroundClip}\x3c/label\x3e\x3c/td\x3e\n\t\t\t\t\t\x3ctd colspan\x3d'3'\x3e\n\t\t\t\t\t\t\x3cselect dojoType\x3d\"dijit.form.ComboBox\" dojoAttachPoint\x3d'bgdClipCB'\x3e\n\t\t\t\t\t\t\t\x3c!--  values added dynamically --\x3e\n\t\t\t\t\t\t\x3c/select\x3e\n\t\t\t\t\t\x3c/td\x3e\n\t\t\t\t\x3c/tr\x3e\n\t\t\t\t\x3ctr dojoAttachPoint\x3d\"bgdOtherTypeInRow\" class\x3d\"bgdOtherRow\"\x3e\t\n\t\n\t\t\t\t\t\x3ctd class\x3d'bgdCol1'\x3e\x3c/td\x3e\n\t\t\t\t\t\x3ctd class\x3d'bgdOptsLabel'\x3e\x3clabel\x3e${veNLS.bgdBackgroundImageValue}\x3c/label\x3e\x3c/td\x3e\n\t\t\t\t\t\x3ctd colspan\x3d'3'\x3e\n\t\t\t\t\t\t\x3ctextarea dojoType\x3d\"dijit.form.Textarea\" dojoAttachPoint\x3d'bgdOtherTA'\x3e\x3c/textarea\x3e\n\t\t\t\t\t\x3c/td\x3e\n\t\n\t\t\t\t\x3c/tr\x3e\n\t\n\t\t\t\x3c/table\x3e\n\t\t\x3c/div\x3e\n\t\x3c/div\x3e\n\n\t\x3c!--div class\x3d\"dijitDialogPaneActionBar\"\x3e\n\t\t\x3cspan dojoType\x3d'dijit.form.Button' dojoAttachPoint\x3d\"_okButton\" dojoAttachEvent\x3d'onClick:okButton' label\x3d'${buttonOk}' class\x3d\"maqPrimaryButton\" type\x3d\"submit\"\x3e\x3c/span\x3e \n\t\t\x3cspan dojoType\x3d'dijit.form.Button' dojoAttachEvent\x3d'onClick:cancelButton' label\x3d'${buttonCancel}' class\x3d\"maqSecondaryButton\"/\x3e\x3c/span\x3e \n\t\x3c/div--\x3e\n\x3c/div\x3e\n",
"url:davinci/workbench/templates/Preferences.html":"\x3cdiv style\x3d'width:100%; height: 100%'\x3e\n\t\x3cdiv class\x3d\"dijitDialogPaneContentArea\"\x3e\n\t\t\x3cdiv dojoType\x3d'dijit.layout.BorderContainer' dojoAttachPoint\x3d\"borderContainer\" style\x3d'width:100%; height: 100%' gutters\x3d'false' liveSplitters\x3d'true' id\x3d'preferencesContainer'\x3e\n\t\t\t\x3cdiv dojoType\x3d'dijit.layout.ContentPane' id\x3d'pref.TreePane' splitter\x3d'true' region\x3d'leading' style\x3d'width: 200px;' minSize\x3d'100' maxSize\x3d'300'\x3e\x3c/div\x3e\n\t\t\t\x3cdiv dojoType\x3d'dijit.layout.ContentPane' region\x3d'center' id\x3d'pref.RightPane'\x3e\x3c/div\x3e\n\t\t\x3c/div\x3e\n\t\x3c/div\x3e\n\t\x3cdiv class\x3d\"dijitDialogPaneActionBar\"\x3e\n\t\t\x3c!-- FIXME: we don't have logic to yet implement restoreDefaults() yet. See #627\n\t\t\x3cbutton dojoType\x3ddijit.form.Button type\x3d\"button\" onclick\x3d\"davinci.workbench.Preferences.restoreDefaults();\"\x3e\x3c/button\x3e--\x3e\n\t\t\x3cbutton dojoType\x3d\"dijit.form.Button\" type\x3d\"button\" onclick\x3d\"davinci.workbench.Preferences.save();\" class\x3d\"maqPrimaryButton\" type\x3d\"submit\"\x3e${commonStrings.buttonSave}\x3c/button\x3e\n\t\t\x3cbutton dojoType\x3d\"dijit.form.Button\" type\x3d\"button\" onclick\x3d\"davinci.workbench.Preferences.finish();\" class\x3d\"maqSecondaryButton\"\x3e${commonStrings.buttonCancel}\x3c/button\x3e\n\t\x3c/div\x3e\n\x3c/div\x3e\n\n\n",
"url:dijit/form/templates/Select.html":'\x3ctable class\x3d"dijit dijitReset dijitInline dijitLeft"\n\tdata-dojo-attach-point\x3d"_buttonNode,tableNode,focusNode,_popupStateNode" cellspacing\x3d\'0\' cellpadding\x3d\'0\'\n\trole\x3d"listbox" aria-haspopup\x3d"true"\n\t\x3e\x3ctbody role\x3d"presentation"\x3e\x3ctr role\x3d"presentation"\n\t\t\x3e\x3ctd class\x3d"dijitReset dijitStretch dijitButtonContents" role\x3d"presentation"\n\t\t\t\x3e\x3cdiv class\x3d"dijitReset dijitInputField dijitButtonText"  data-dojo-attach-point\x3d"containerNode,textDirNode" role\x3d"presentation"\x3e\x3c/div\n\t\t\t\x3e\x3cdiv class\x3d"dijitReset dijitValidationContainer"\n\t\t\t\t\x3e\x3cinput class\x3d"dijitReset dijitInputField dijitValidationIcon dijitValidationInner" value\x3d"\x26#935; " type\x3d"text" tabIndex\x3d"-1" readonly\x3d"readonly" role\x3d"presentation"\n\t\t\t/\x3e\x3c/div\n\t\t\t\x3e\x3cinput type\x3d"hidden" ${!nameAttrSetting} data-dojo-attach-point\x3d"valueNode" value\x3d"${value}" aria-hidden\x3d"true"\n\t\t/\x3e\x3c/td\n\t\t\x3e\x3ctd class\x3d"dijitReset dijitRight dijitButtonNode dijitArrowButton dijitDownArrowButton dijitArrowButtonContainer"\n\t\t\tdata-dojo-attach-point\x3d"titleNode" role\x3d"presentation"\n\t\t\t\x3e\x3cinput class\x3d"dijitReset dijitInputField dijitArrowButtonInner" value\x3d"\x26#9660; " type\x3d"text" tabIndex\x3d"-1" readonly\x3d"readonly" role\x3d"presentation"\n\t\t\t\t${_buttonInputDisabled}\n\t\t/\x3e\x3c/td\n\t\x3e\x3c/tr\x3e\x3c/tbody\n\x3e\x3c/table\x3e\n',
"url:dijit/form/templates/TextBox.html":'\x3cdiv class\x3d"dijit dijitReset dijitInline dijitLeft" id\x3d"widget_${id}" role\x3d"presentation"\n\t\x3e\x3cdiv class\x3d"dijitReset dijitInputField dijitInputContainer"\n\t\t\x3e\x3cinput class\x3d"dijitReset dijitInputInner" data-dojo-attach-point\x3d\'textbox,focusNode\' autocomplete\x3d"off"\n\t\t\t${!nameAttrSetting} type\x3d\'${type}\'\n\t/\x3e\x3c/div\n\x3e\x3c/div\x3e\n',"url:davinci/ve/actions/templates/ManageStates.html":"\x3cdiv\x3e\n\t\x3cdiv class\x3d\"dijitDialogPaneContentArea\"\x3e\n\t\t\x3cdiv class\x3d\"addStateDialogOptions\"\x3e\n\t\t\t\x3cdiv class\x3d'manageStatesStatesListDiv'\x3e\n\t\t\t\t\x3c!-- Filled in by JavaScript --\x3e\n\t\t\t\x3c/div\x3e\n\t\t\t\x3cdiv class\x3d'manageStatesCheckAcceleratorsDiv'\x3e\n\t\t\t\t${veNls.manageStatesCheckLabel}\n\t\t\t\t\x3ca href\x3d'' class\x3d'manageStatesCheckCurrentStateOnly'\x3e${veNls.manageStatesCheckCurrentStateOnly}\x3c/a\x3e\n\t\t\t\t/\n\t\t\t\t\x3ca href\x3d'' class\x3d'manageStatesCheckAll'\x3e${veNls.manageStatesCheckAll}\x3c/a\x3e\n\t\t\t\t/\n\t\t\t\t\x3ca href\x3d'' class\x3d'manageStatesUncheckAll'\x3e${veNls.manageStatesUncheckAll}\x3c/a\x3e\n\t\t\t\t/\n\t\t\t\t\x3ca href\x3d'' class\x3d'manageStatesCheckBackgroundOnly'\x3e${veNls.manageStatesCheckBackgroundOnly}\x3c/a\x3e\n\t\t\t\x3c/div\x3e\n\t\t\t\n\t\t\x3c/div\x3e\t\n\t\x3c/div\x3e\n\t\x3cdiv class\x3d\"dijitDialogPaneActionBar\"\x3e\n\t\t\x3cbutton dojoType\x3d'dijit.form.Button' dojoAttachPoint\x3d\"okButton\" dojoAttachEvent\x3d'onClick:onOk' label\x3d'${veNls.createLabel}' class\x3d\"maqPrimaryButton\" type\x3d\"submit\"\x3e\x3c/button\x3e\n\t\t\x3cbutton dojoType\x3d'dijit.form.Button' dojoAttachEvent\x3d'onClick:onCancel' label\x3d'${commonNls.buttonCancel}' class\x3d\"maqSecondaryButton\"\x3e\x3c/button\x3e\n\t\x3c/div\x3e\n\x3c/div\x3e\n",
"url:dijit/templates/MenuItem.html":'\x3ctr class\x3d"dijitReset dijitMenuItem" data-dojo-attach-point\x3d"focusNode" role\x3d"menuitem" tabIndex\x3d"-1"\x3e\n\t\x3ctd class\x3d"dijitReset dijitMenuItemIconCell" role\x3d"presentation"\x3e\n\t\t\x3cspan role\x3d"presentation" class\x3d"dijitInline dijitIcon dijitMenuItemIcon" data-dojo-attach-point\x3d"iconNode"\x3e\x3c/span\x3e\n\t\x3c/td\x3e\n\t\x3ctd class\x3d"dijitReset dijitMenuItemLabel" colspan\x3d"2" data-dojo-attach-point\x3d"containerNode,textDirNode"\n\t\trole\x3d"presentation"\x3e\x3c/td\x3e\n\t\x3ctd class\x3d"dijitReset dijitMenuItemAccelKey" style\x3d"display: none" data-dojo-attach-point\x3d"accelKeyNode"\x3e\x3c/td\x3e\n\t\x3ctd class\x3d"dijitReset dijitMenuArrowCell" role\x3d"presentation"\x3e\n\t\t\x3cspan data-dojo-attach-point\x3d"arrowWrapper" style\x3d"visibility: hidden"\x3e\n\t\t\t\x3cspan class\x3d"dijitInline dijitIcon dijitMenuExpand"\x3e\x3c/span\x3e\n\t\t\t\x3cspan class\x3d"dijitMenuExpandA11y"\x3e+\x3c/span\x3e\n\t\t\x3c/span\x3e\n\t\x3c/td\x3e\n\x3c/tr\x3e\n',
"url:dijit/templates/MenuBarItem.html":'\x3cdiv class\x3d"dijitReset dijitInline dijitMenuItem dijitMenuItemLabel" data-dojo-attach-point\x3d"focusNode"\n\t \trole\x3d"menuitem" tabIndex\x3d"-1"\x3e\n\t\x3cspan data-dojo-attach-point\x3d"containerNode,textDirNode"\x3e\x3c/span\x3e\n\x3c/div\x3e\n',"url:davinci/ve/template.html":'\n\x3c!DOCTYPE html\x3e\n\x3chtml\x3e\n\x3chead\x3e\n\x3cmeta charset\x3d"utf-8" /\x3e\n\x3cmeta http-equiv\x3d"X-UA-Compatible" content\x3d"IE\x3dedge" /\x3e\n\x3ctitle\x3eUntitled\x3c/title\x3e\n\x3c/head\x3e\n\x3cbody\x3e\n\x3c/body\x3e\n\x3c/html\x3e\n',
"url:davinci/ve/newfile.template.html":'\x3c!DOCTYPE html\x3e\n\x3c!--\n\tTODO: margin:0 is a temporary hack. In previous releases, we always included dojo.css\n\twhich set margin:0, but we now only include dojo.css with the first Dojo widget\n\tadded to the page. That causes scrollbars when page was loaded initially,\n\twhich went want when first Dojo widget was added.\n\tNeed to rethink this whole business of width:100%;height:100%;margin:0\n--\x3e\n\x3chtml style\x3d"height: 100%; width: 100%; margin: 0;"\x3e\n\t\x3chead\x3e\n\t\t\x3cbase href\x3d"{baseUrl}"/\x3e\n\t\t\x3cmeta charset\x3d"utf-8"/\x3e\n\t\t\x3cscript src\x3d"{dojoUrl}" data-dojo-config\x3d"{dojoConfig}" {additionalDojoAttrs}\x3e\x3c/script\x3e\n\t\t\x3cscript\x3e\n\t\t\t// base dependencies needed for VE\n\t\t\trequire([\n\t\t\t\t\'dojo/parser\',\n\t\t\t\t\'dojox/html/_base\',\n\t\t\t\t\'dojo/domReady!\'\n\t\t\t\t{additionalModules}\n\t\t\t], top.loading{id});\n\t\t\x3c/script\x3e\n\t\t{themeHeadImports}\n\t\t{themeCssFiles}\n\t\x3c/head\x3e\n\t\x3cbody\x3e\n\t\x3c/body\x3e\n\x3c/html\x3e\n',
"url:davinci/ui/templates/SaveAsWidgetForm.html":'\x3cdiv class\x3d\'dvSaveAsWidgetForm\'\x3e\n\t\x3cdiv class\x3d"dijitDialogPaneContentArea"\x3e\n\t\t\x3cp class\x3d"dvSawfDesc"\x3e${descriptionString}\x3c/p\x3e\n\t\t\x3cp\x3e\n\t\t\t\x3cspan class\x3d"dvSawfLabel"\x3e${nameString}:\x3c/span\x3e\n\t\t\t\x3cinput dojoType\x3d\'dijit.form.ValidationTextBox\' dojoAttachPoint\x3d"nameInputNode" trim\x3d"true"\n\t\t\t\t\tpromptMessage\x3d"${namePromptString}"\x3e\x3c/input\x3e\n\t\t\x3c/p\x3e\n\t\t\x3cp\x3e\n\t\t\t\x3cspan class\x3d"dvSawfLabel"\x3e\x3cspan class\x3d"dvRequired"\x3e*\x3c/span\x3e${idString}:\x3c/span\x3e\n\t\t\t\x3cinput dojoType\x3d\'dijit.form.ValidationTextBox\' dojoAttachPoint\x3d"idInputNode" trim\x3d"true"\n\t\t\t\t\trequired\x3d"true" intermediateChanges\x3d"true" promptMessage\x3d"${idPromptString}"\x3e\x3c/input\x3e\n\t\t\x3c/p\x3e\n\t\t\x3cp\x3e\n\t\t\t\x3cspan class\x3d"dvSawfLabel"\x3e${versionString}:\x3c/span\x3e\n\t\t\t\x3cinput dojoType\x3d\'dijit.form.ValidationTextBox\' dojoAttachPoint\x3d"versionInputNode"\n\t\t\t\t\ttrim\x3d"true"\x3e\x3c/input\x3e\n\t\t\x3c/p\x3e\n\t\t\x3ch4 class\x3d"dvRequired"\x3e*${requiredString}\x3c/h4\x3e\n\t\n\t\t\x3cdiv dojoType\x3d"dijit.TitlePane" title\x3d"${metadataTitle}" open\x3d"false"\x3e\n\t\t\t\x3ctextarea dojoType\x3d"dijit.form.SimpleTextarea" dojoAttachPoint\x3d"textareaNode" name\x3d"metadata"\n\t\t\t\t\trows\x3d"15" cols\x3d"50" intermediateChanges\x3d"true"\x3e${initialTextareaContent}\x3c/textarea\x3e\n\t\t\x3c/div\x3e\n\t\x3c/div\x3e\n  \x3cdiv class\x3d"dijitDialogPaneActionBar"\x3e\n    \x3cbutton dojoType\x3d"dijit.form.Button" dojoAttachPoint\x3d"buttonSave" class\x3d"maqPrimaryButton" type\x3d"submit" disabled\x3d"true"\x3e${saveString}\x3c/button\x3e\n    \x3cbutton dojoType\x3d"dijit.form.Button" dojoAttachPoint\x3d"buttonCancel" type\x3d"button" class\x3d"maqSecondaryButton"\x3e${cancelString}\x3c/button\x3e\n  \x3c/div\x3e\n\x3c/div\x3e\n',
"url:dijit/form/templates/CheckBox.html":'\x3cdiv class\x3d"dijit dijitReset dijitInline" role\x3d"presentation"\n\t\x3e\x3cinput\n\t \t${!nameAttrSetting} type\x3d"${type}" role\x3d"${type}" aria-checked\x3d"false" ${checkedAttrSetting}\n\t\tclass\x3d"dijitReset dijitCheckBoxInput"\n\t\tdata-dojo-attach-point\x3d"focusNode"\n\t \tdata-dojo-attach-event\x3d"ondijitclick:_onClick"\n/\x3e\x3c/div\x3e\n',"url:davinci/ve/prefs/HtmlEditPreferences.html":"\x3cdiv\x3e\n\t\x3ctable style\x3d'margin: 4px;' cellspacing\x3d'4'\x3e\n\t\t\x3ctbody\x3e\n\t\t\t\x3c!--\n\t\t\t\x3ctr\x3e\n\t\t\t\t\x3ctd\x3e${_loc.flowLayout}:\x3c/td\x3e\n\t\t\t\t\x3ctd\x3e\n\t\t\t\t\t\x3cdiv dojoAttachPoint\x3d'flowBoxNode'\x3e\x3c/div\x3e\n\t\t\t\t\x3c/td\x3e\n\t\t\t\x3c/tr\x3e\n\t\t\t--\x3e\n\t\t\t\x3ctr\x3e\n\t\t\t\t\x3ctd\x3e${_loc.snapToNearestWidget}:\x3c/td\x3e\n\t\t\t\t\x3ctd\x3e\n\t\t\t\t\t\x3cdiv dojoAttachPoint\x3d'snapNode'\x3e\x3c/div\x3e\n\t\t\t\t\x3c/td\x3e\n\t\t\t\x3c/tr\x3e\n\t\t\t\x3ctr\x3e\n\t\t\t\t\x3ctd\x3e${_loc.showPossibleParents}:\x3c/td\x3e\n\t\t\t\t\x3ctd\x3e\n\t\t\t\t\t\x3cdiv dojoAttachPoint\x3d'showPossibleParentsNode'\x3e\x3c/div\x3e\n\t\t\t\t\x3c/td\x3e\n\t\t\t\x3c/tr\x3e\n\t\t\t\x3ctr\x3e\n\t\t\t\t\x3ctd\x3e${_loc.warnOnCSSOverride}:\x3c/td\x3e\n\t\t\t\t\x3ctd\x3e\n\t\t\t\t\t\x3cdiv dojoAttachPoint\x3d'cssOverrideWarn'\x3e\x3c/div\x3e\n\t\t\t\t\x3c/td\x3e\n\t\t\t\x3c/tr\x3e\n\t\t\t\x3ctr\x3e\n\t\t\t\t\x3ctd\x3e${_loc.absoluteWidgetsZindex}:\x3c/td\x3e\n\t\t\t\t\x3ctd\x3e\n\t\t\t\t\t\x3cdiv dojoAttachPoint\x3d'absoluteWidgetsZindex'\x3e\x3c/div\x3e\n\t\t\t\t\x3c/td\x3e\n\t\t\t\x3c/tr\x3e\n\t\t\t\x3c!-- FIXME: Disabled for now. Ultimately, UI for this option should go to widget palette\n\t\t\t\x3ctr\x3e\n\t\t\t\t\x3ctd\x3e${_loc.widgetPaletteLayout}:\x3c/td\x3e\n\t\t\t\t\x3ctd\x3e\n\t\t\t\t\t\x3cdiv dojoAttachPoint\x3d'widgetPaletteLayout'\x3e\x3c/div\x3e\n\t\t\t\t\x3c/td\x3e\n\t\t\t\x3c/tr\x3e\n\t\t\t--\x3e\n\t\t\t\x3ctr\x3e\n\t\t\t\t\x3ctd\x3e${_loc.zazl}:\x3c/td\x3e\n\t\t\t\t\x3ctd\x3e\n\t\t\t\t\t\x3cdiv dojoAttachPoint\x3d'zazl'\x3e\x3c/div\x3e\n\t\t\t\t\x3c/td\x3e\n\t\t\t\x3c/tr\x3e\n\t\t\x3c/tbody\x3e\n\t\x3c/table\x3e\n\x3c/div\x3e",
"url:davinci/ve/actions/templates/AddState.html":'\x3cdiv\x3e\n\t\x3cdiv class\x3d"dijitDialogPaneContentArea"\x3e\n\t\t\x3cdiv class\x3d\'addStateNameDiv\'\x3e\n\t\t\t\x3clabel\x3e${veNls.stateLabel}:\x3c/label\x3e\x3cinput dojoAttachPoint\x3d"input" dojoType\x3d"dijit.form.TextBox" dojoAttachEvent\x3d"onKeyUp:_onKeyPress" type\x3d"text"\x3e\x3c/input\x3e\n\t\t\x3c/div\x3e\n\t\x3c/div\x3e\n\t\x3cdiv class\x3d"dijitDialogPaneActionBar"\x3e\n\t\t\x3cbutton dojoType\x3d\'dijit.form.Button\' dojoAttachPoint\x3d"okButton" dojoAttachEvent\x3d\'onClick:onOk\' label\x3d\'${veNls.createLabel}\' class\x3d"maqPrimaryButton" type\x3d"submit"\x3e\x3c/button\x3e\n\t\t\x3cbutton dojoType\x3d\'dijit.form.Button\' dojoAttachEvent\x3d\'onClick:onCancel\' label\x3d\'${commonNls.buttonCancel}\' class\x3d"maqSecondaryButton"\x3e\x3c/button\x3e\n\t\x3c/div\x3e\n\x3c/div\x3e\n',
"url:davinci/ui/widgets/templates/ThemeSetSelection.html":'\x3cdiv\x3e\n  \x3cdiv class\x3d"dijitDialogPaneContentArea"\x3e\n\t\t\x3ctable style\x3d"width: 100%; padding-left:10px; padding-right:10px;"\x3e\n\t\t\t\x3ctr\x3e\n\t\t\t\t\x3ctd style\x3d"" NOWRAP\x3e${uiNLS.themeSet}\x3c/td\x3e\n\t\t\t\t\x3ctd style\x3d"width: 100%; text-align: center;"\x3e\x3cselect dojoType\x3d"dijit.form.Select" id\x3d"theme_select_themeset_theme_select" type\x3d"text" style\x3d"width: 175px;" \x3e\x3c/select\x3e\x3c/td\x3e\n\t\t\t\x3c/tr\x3e\n\t\t\x3c/table\x3e\n\t\n\t\t\x3cdiv style\x3d"border-top: 1px solid black; top: 231px; border-top-color: #ccc; left: 429px; width: 300px; height: 11px; margin-top: 6px; padding-left:10px;"\x3e\x3c/div\x3e\n\t\t\x3ctable style\x3d"padding-left: 15px; width: 100%;"\x3e\n\t\t\t\x3ctr\x3e\x3ctd style\x3d"width: 139px;"\x3e${uiNLS.desktopTheme}\x3c/td\x3e\x3ctd\x3e\x3cselect dojoType\x3d"dijit.form.Select" id\x3d"theme_select_desktop_theme_select"type\x3d"text"  style\x3d"width: 175px;"  \x3e\x3c/select\x3e\x3c/td\x3e\x3c/tr\x3e\n\t\t\t\x3ctr\x3e\x3ctd\x3e${uiNLS.mobileTheme}\x3c/td\x3e\x3ctd\x3e\x3cselect dojoType\x3d"dijit.form.Select" id\x3d"theme_select_mobile_theme_select"type\x3d"text"  style\x3d"width: 175px;" \x3e\x3c/select\x3e\x3c/td\x3e\x3c/tr\x3e\n\t\t\x3c/table\x3e\n\t\t\x3ctable id\x3d"theme_select_devices_table" style\x3d"padding-left:30px; border-collapse: separate; border-spacing: 0 0; width: 100%"\x3e\n\t\t\t\x3ctr\x3e\x3ctd style\x3d"width: 139px;"\x3e${uiNLS.android}\x3c/td\x3e\x3ctd\x3e\x3cselect dojoType\x3d"dijit.form.Select" id\x3d"theme_select_android_select" type\x3d"text"  style\x3d"width: 150px;"\x3e\x3c/select\x3e\x3c/td\x3e\x3c/tr\x3e\n\t\t\t\x3ctr\x3e\x3ctd\x3e${uiNLS.blackberry}\x3c/td\x3e\x3ctd\x3e\x3cselect dojoType\x3d"dijit.form.Select" id\x3d"theme_select_blackberry_select" type\x3d"text"  style\x3d"width: 150px;"\x3e\x3c/select\x3e\x3c/td\x3e\x3c/tr\x3e\n\t\t\t\x3ctr\x3e\x3ctd\x3e${uiNLS.ipad}\x3c/td\x3e\x3ctd\x3e\x3cselect dojoType\x3d"dijit.form.Select" id\x3d"theme_select_ipad_select" type\x3d"text"  style\x3d"width: 150px;"\x3e\x3c/select\x3e\x3c/td\x3e\x3c/tr\x3e\n\t\t\t\x3ctr\x3e\x3ctd\x3e${uiNLS.iphone}\x3c/td\x3e\x3ctd\x3e\x3cselect dojoType\x3d"dijit.form.Select" id\x3d"theme_select_iphone_select" type\x3d"text"  style\x3d"width: 150px;"\x3e\x3c/select\x3e\x3c/td\x3e\x3c/tr\x3e\n\t\t\t\x3ctr\x3e\x3ctd\x3e${uiNLS.other}\x3c/td\x3e\x3ctd\x3e\x3cselect dojoType\x3d"dijit.form.Select" id\x3d"theme_select_other_select" type\x3d"text"  style\x3d"width: 150px;"\x3e\x3c/select\x3e\x3c/td\x3e\x3c/tr\x3e\n\t\t\x3c/table\x3e\n\t\x3c/div\x3e\n\n\t\x3cdiv class\x3d"dijitDialogPaneActionBar"\x3e\n\t\t\x3cbutton dojoType\x3d"dijit.form.Button" id\x3d"theme_select_ok_button" label\x3d"${uiNLS.select}" class\x3d"maqPrimaryButton" type\x3d"submit"\x3e\x3c/button\x3e\n\t\t\x3cbutton dojoType\x3d"dijit.form.Button" id\x3d"theme_select_cancel_button" label\x3d"${commonNLS.buttonCancel}" class\x3d"maqSecondaryButton"\x3e\x3c/button\x3e\n\t\x3c/div\x3e\n\x3c/div\x3e\n',
"url:dojox/widget/ColorPicker/ColorPicker.html":'\x3ctable class\x3d"dojoxColorPicker" dojoAttachEvent\x3d"onkeypress: _handleKey" cellpadding\x3d"0" cellspacing\x3d"0" role\x3d"presentation"\x3e\n\t\x3ctr\x3e\n\t\t\x3ctd valign\x3d"top" class\x3d"dojoxColorPickerRightPad"\x3e\n\t\t\t\x3cdiv class\x3d"dojoxColorPickerBox"\x3e\n\t\t\t\t\x3c!-- Forcing ABS in style attr due to dojo DND issue with not picking it up form the class. --\x3e\n\t\t\t\t\x3cimg title\x3d"${saturationPickerTitle}" alt\x3d"${saturationPickerTitle}" class\x3d"dojoxColorPickerPoint" src\x3d"${_pickerPointer}" tabIndex\x3d"0" dojoAttachPoint\x3d"cursorNode" style\x3d"position: absolute; top: 0px; left: 0px;"\x3e\n\t\t\t\t\x3cimg role\x3d"presentation" alt\x3d"" dojoAttachPoint\x3d"colorUnderlay" dojoAttachEvent\x3d"onclick: _setPoint, onmousedown: _stopDrag" class\x3d"dojoxColorPickerUnderlay" src\x3d"${_underlay}" ondragstart\x3d"return false"\x3e\n\t\t\t\x3c/div\x3e\n\t\t\x3c/td\x3e\n\t\t\x3ctd valign\x3d"top" class\x3d"dojoxColorPickerRightPad"\x3e\n\t\t\t\x3cdiv class\x3d"dojoxHuePicker"\x3e\n\t\t\t\t\x3c!-- Forcing ABS in style attr due to dojo DND issue with not picking it up form the class. --\x3e\n\t\t\t\t\x3cimg dojoAttachPoint\x3d"hueCursorNode" tabIndex\x3d"0" class\x3d"dojoxHuePickerPoint" title\x3d"${huePickerTitle}" alt\x3d"${huePickerTitle}" src\x3d"${_huePickerPointer}" style\x3d"position: absolute; top: 0px; left: 0px;"\x3e\n\t\t\t\t\x3cdiv class\x3d"dojoxHuePickerUnderlay" dojoAttachPoint\x3d"hueNode"\x3e\n\t\t\t\t    \x3cimg role\x3d"presentation" alt\x3d"" dojoAttachEvent\x3d"onclick: _setHuePoint, onmousedown: _stopDrag" src\x3d"${_hueUnderlay}"\x3e\n\t\t\t\t\x3c/div\x3e\n\t\t\t\x3c/div\x3e\n\t\t\x3c/td\x3e\n\t\t\x3ctd valign\x3d"top"\x3e\n\t\t\t\x3ctable cellpadding\x3d"0" cellspacing\x3d"0" role\x3d"presentation"\x3e\n\t\t\t\t\x3ctr\x3e\n\t\t\t\t\t\x3ctd valign\x3d"top" class\x3d"dojoxColorPickerPreviewContainer"\x3e\n\t\t\t\t\t\t\x3ctable cellpadding\x3d"0" cellspacing\x3d"0" role\x3d"presentation"\x3e\n\t\t\t\t\t\t\t\x3ctr\x3e\n\t\t\t\t\t\t\t\t\x3ctd valign\x3d"top" class\x3d"dojoxColorPickerRightPad"\x3e\n\t\t\t\t\t\t\t\t\t\x3cdiv dojoAttachPoint\x3d"previewNode" class\x3d"dojoxColorPickerPreview"\x3e\x3c/div\x3e\n\t\t\t\t\t\t\t\t\x3c/td\x3e\n\t\t\t\t\t\t\t\t\x3ctd valign\x3d"top"\x3e\n\t\t\t\t\t\t\t\t\t\x3cdiv dojoAttachPoint\x3d"safePreviewNode" class\x3d"dojoxColorPickerWebSafePreview"\x3e\x3c/div\x3e\n\t\t\t\t\t\t\t\t\x3c/td\x3e\n\t\t\t\t\t\t\t\x3c/tr\x3e\n\t\t\t\t\t\t\x3c/table\x3e\n\t\t\t\t\t\x3c/td\x3e\n\t\t\t\t\x3c/tr\x3e\n\t\t\t\t\x3ctr\x3e\n\t\t\t\t\t\x3ctd valign\x3d"bottom"\x3e\n\t\t\t\t\t\t\x3ctable class\x3d"dojoxColorPickerOptional" cellpadding\x3d"0" cellspacing\x3d"0" role\x3d"presentation"\x3e\n\t\t\t\t\t\t\t\x3ctr\x3e\n\t\t\t\t\t\t\t\t\x3ctd\x3e\n\t\t\t\t\t\t\t\t\t\x3cdiv class\x3d"dijitInline dojoxColorPickerRgb" dojoAttachPoint\x3d"rgbNode"\x3e\n\t\t\t\t\t\t\t\t\t\t\x3ctable cellpadding\x3d"1" cellspacing\x3d"1" role\x3d"presentation"\x3e\n\t\t\t\t\t\t\t\t\t\t\x3ctr\x3e\x3ctd\x3e\x3clabel for\x3d"${_uId}_r"\x3ered\x3c/label\x3e\x3c/td\x3e\x3ctd\x3e\x3cinput id\x3d"${_uId}_r" dojoAttachPoint\x3d"Rval" size\x3d"1" dojoAttachEvent\x3d"onchange: _colorInputChange"\x3e\x3c/td\x3e\x3c/tr\x3e\n\t\t\t\t\t\t\t\t\t\t\x3ctr\x3e\x3ctd\x3e\x3clabel for\x3d"${_uId}_g"\x3egreen\x3c/label\x3e\x3c/td\x3e\x3ctd\x3e\x3cinput id\x3d"${_uId}_g" dojoAttachPoint\x3d"Gval" size\x3d"1" dojoAttachEvent\x3d"onchange: _colorInputChange"\x3e\x3c/td\x3e\x3c/tr\x3e\n\t\t\t\t\t\t\t\t\t\t\x3ctr\x3e\x3ctd\x3e\x3clabel for\x3d"${_uId}_b"\x3eblue\x3c/label\x3e\x3c/td\x3e\x3ctd\x3e\x3cinput id\x3d"${_uId}_b" dojoAttachPoint\x3d"Bval" size\x3d"1" dojoAttachEvent\x3d"onchange: _colorInputChange"\x3e\x3c/td\x3e\x3c/tr\x3e\n\t\t\t\t\t\t\t\t\t\t\x3c/table\x3e\n\t\t\t\t\t\t\t\t\t\x3c/div\x3e\n\t\t\t\t\t\t\t\t\x3c/td\x3e\n\t\t\t\t\t\t\t\t\x3ctd\x3e\n\t\t\t\t\t\t\t\t\t\x3cdiv class\x3d"dijitInline dojoxColorPickerHsv" dojoAttachPoint\x3d"hsvNode"\x3e\n\t\t\t\t\t\t\t\t\t\t\x3ctable cellpadding\x3d"1" cellspacing\x3d"1" role\x3d"presentation"\x3e\n\t\t\t\t\t\t\t\t\t\t\x3ctr\x3e\x3ctd\x3e\x3clabel for\x3d"${_uId}_h"\x3ehue\x3c/label\x3e\x3c/td\x3e\x3ctd\x3e\x3cinput id\x3d"${_uId}_h" dojoAttachPoint\x3d"Hval"size\x3d"1" dojoAttachEvent\x3d"onchange: _colorInputChange"\x3e deg\x3c/td\x3e\x3c/tr\x3e\n\t\t\t\t\t\t\t\t\t\t\x3ctr\x3e\x3ctd\x3e\x3clabel for\x3d"${_uId}_s"\x3esat\x3c/label\x3e\x3c/td\x3e\x3ctd\x3e\x3cinput id\x3d"${_uId}_s" dojoAttachPoint\x3d"Sval" size\x3d"1" dojoAttachEvent\x3d"onchange: _colorInputChange"\x3e%\x3c/td\x3e\x3c/tr\x3e\n\t\t\t\t\t\t\t\t\t\t\x3ctr\x3e\x3ctd\x3e\x3clabel for\x3d"${_uId}_v"\x3evalue\x3c/label\x3e\x3c/td\x3e\x3ctd\x3e\x3cinput id\x3d"${_uId}_v" dojoAttachPoint\x3d"Vval" size\x3d"1" dojoAttachEvent\x3d"onchange: _colorInputChange"\x3e %\x3c/td\x3e\x3c/tr\x3e\n\t\t\t\t\t\t\t\t\t\t\x3c/table\x3e\n\t\t\t\t\t\t\t\t\t\x3c/div\x3e\n\t\t\t\t\t\t\t\t\x3c/td\x3e\n\t\t\t\t\t\t\t\x3c/tr\x3e\n\t\t\t\t\t\t\t\x3ctr\x3e\n\t\t\t\t\t\t\t\t\x3ctd colspan\x3d"2"\x3e\n\t\t\t\t\t\t\t\t\t\x3cdiv class\x3d"dojoxColorPickerHex" dojoAttachPoint\x3d"hexNode" aria-live\x3d"polite"\x3e\t\n\t\t\t\t\t\t\t\t\t\t\x3clabel for\x3d"${_uId}_hex"\x3e\x26nbsp;#\x26nbsp;\x3c/label\x3e\x3cinput id\x3d"${_uId}_hex" dojoAttachPoint\x3d"hexCode, focusNode, valueNode" size\x3d"6" class\x3d"dojoxColorPickerHexCode" dojoAttachEvent\x3d"onchange: _colorInputChange"\x3e\n\t\t\t\t\t\t\t\t\t\x3c/div\x3e\n\t\t\t\t\t\t\t\t\x3c/td\x3e\n\t\t\t\t\t\t\t\x3c/tr\x3e\n\t\t\t\t\t\t\x3c/table\x3e\n\t\t\t\t\t\x3c/td\x3e\n\t\t\t\t\x3c/tr\x3e\n\t\t\t\x3c/table\x3e\n\t\t\x3c/td\x3e\n\t\x3c/tr\x3e\n\x3c/table\x3e\n\n',
"url:dijit/form/templates/Button.html":'\x3cspan class\x3d"dijit dijitReset dijitInline" role\x3d"presentation"\n\t\x3e\x3cspan class\x3d"dijitReset dijitInline dijitButtonNode"\n\t\tdata-dojo-attach-event\x3d"ondijitclick:__onClick" role\x3d"presentation"\n\t\t\x3e\x3cspan class\x3d"dijitReset dijitStretch dijitButtonContents"\n\t\t\tdata-dojo-attach-point\x3d"titleNode,focusNode"\n\t\t\trole\x3d"button" aria-labelledby\x3d"${id}_label"\n\t\t\t\x3e\x3cspan class\x3d"dijitReset dijitInline dijitIcon" data-dojo-attach-point\x3d"iconNode"\x3e\x3c/span\n\t\t\t\x3e\x3cspan class\x3d"dijitReset dijitToggleButtonIconChar"\x3e\x26#x25CF;\x3c/span\n\t\t\t\x3e\x3cspan class\x3d"dijitReset dijitInline dijitButtonText"\n\t\t\t\tid\x3d"${id}_label"\n\t\t\t\tdata-dojo-attach-point\x3d"containerNode"\n\t\t\t\x3e\x3c/span\n\t\t\x3e\x3c/span\n\t\x3e\x3c/span\n\t\x3e\x3cinput ${!nameAttrSetting} type\x3d"${type}" value\x3d"${value}" class\x3d"dijitOffScreen"\n\t\tdata-dojo-attach-event\x3d"onclick:_onClick"\n\t\ttabIndex\x3d"-1" role\x3d"presentation" aria-hidden\x3d"true" data-dojo-attach-point\x3d"valueNode"\n/\x3e\x3c/span\x3e\n',
"url:dijit/templates/TooltipDialog.html":'\x3cdiv role\x3d"alertdialog" tabIndex\x3d"-1"\x3e\n\t\x3cdiv class\x3d"dijitTooltipContainer" role\x3d"presentation"\x3e\n\t\t\x3cdiv data-dojo-attach-point\x3d"contentsNode" class\x3d"dijitTooltipContents dijitTooltipFocusNode"\x3e\n\t\t\t\x3cdiv data-dojo-attach-point\x3d"containerNode"\x3e\x3c/div\x3e\n\t\t\t${!actionBarTemplate}\n\t\t\x3c/div\x3e\n\t\x3c/div\x3e\n\t\x3cdiv class\x3d"dijitTooltipConnector" role\x3d"presentation" data-dojo-attach-point\x3d"connectorNode"\x3e\x3c/div\x3e\n\x3c/div\x3e\n',
"*now":function(n){n(['dojo/i18n!*preload*dojo/nls/dojo*["ar","ca","cs","da","de","el","en-gb","en-us","es-es","fi-fi","fr-fr","he-il","hu","it-it","ja-jp","ko-kr","nl-nl","nb","pl","pt-br","pt-pt","ru","sk","sl","sv","th","tr","zh-tw","zh-cn","ROOT"]'])}}});(function(){var n=this.require;n({cache:{}});!n.async&&n(["dojo"]);n.boot&&n.apply(null,n.boot)})();
//# sourceMappingURL=dojo.js.map