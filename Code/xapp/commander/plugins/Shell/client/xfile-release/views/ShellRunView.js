//>>built
define("Shell/views/ShellRunView","../widgets/Console dojo/_base/lang dojo/_base/declare dojo/dom-geometry dojo/dom-style xfile/widgets/ProgressItem xide/factory xide/types xide/utils xide/widgets/_CSSMixin xide/widgets/_InsertionMixin xide/widgets/_StyleMixin xide/widgets/TemplatedWidgetBase".split(" "),function(g,d,h,e,k,l,m,n,f,p,q,r,t){return h("Shell.xfile.views.ShellRunView",[t,p,r,q],{delegate:null,value:null,editorNode:null,cmdNode:null,console:null,type:null,logView:null,logPane:null,progressItem:null,
templateString:"\x3cdiv\x3e\x3cdiv class\x3d'runPanel' data-dojo-attach-point\x3d'root' data-dojo-type\x3d'dijit.layout.ContentPane'\x3e\x3cdiv class\x3d'logPane ui-widget-content' data-dojo-attach-point\x3d'logView' data-dojo-type\x3d'dijit.layout.ContentPane'\x3e\x3c/div\x3e\x3cdiv data-dojo-attach-point\x3d'cmdNode' class\x3d'cmdParent' style\x3d'height:25px'\x3e\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e",createLogItem:function(a,b){var c=new l({terminatorItem:a,message:a,autoDestroy:!0},dojo.doc.createElement("div"));
b.appendChild(c.domNode);c.startup();b.appendChild(dojo.create("div",{className:"logEntry",innerHTML:""}));var d=this;setTimeout(function(){d._scrollToEnd()},200);return c},onEnter:function(a){this.progressItem=this.createLogItem(a,this.getLoggingContainer());this.delegate.onConsoleEnter(this.console,a)},getLoggingContainer:function(){return this.logView.containerNode},log:function(a){f.destroyWidget(this.progressItem);var b="";if(d.isString(a))b+=a.replace(/\n/g,"\x3cbr/\x3e");else if(d.isObject(a)||
d.isArray(a))b+=JSON.stringify(a,null,!0);a=this.getLoggingContainer();a.appendChild(dojo.create("span",{innerHTML:"# "+this.console.getPrev()+" "}));for(var b=b.split("\x3cbr/\x3e"),c=0;c<b.length;c++)a.appendChild(dojo.create("div",{className:"logEntry",innerHTML:b[c]+""}));a.appendChild(dojo.create("hr",{}))},_fixHeight:function(){var a=e.getMarginBox(this.console.domNode),a=e.getMarginBox(this.domNode).h-a.h-22;k.set(this.logView.domNode,{height:a+"px"})},resize:function(){this.inherited(arguments);
this._fixHeight()},_scrollToEnd:function(){var a=$(this.getLoggingContainer());$(a).animate({scrollTop:$(a[0].lastChild.previousSibling).position().bottom},300)},onServerResponse:function(a,b){this.log(b);this._fixHeight();this._scrollToEnd()},createWidgets:function(){this.console=f.addWidget(g,{type:this.type,owner:this},this,this.domNode,!0,"consoleWidget ui-state-default");this._fixHeight()},getValue:function(){return this.editBox.get("value")},startup:function(){this.inherited(arguments);this.createWidgets();
m.subscribe(n.EVENTS.RESIZE,this.resize,this)}})});
//# sourceMappingURL=ShellRunView.js.map