<!DOCTYPE html>

<html lang="en">
<head>
	<meta charset="utf-8">
	<meta name="viewport" content="width=device-width">
	<title>Documentation Source: manager/ProtocolManager.js</title>

	<!--[if lt IE 9]>
	<script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
	<![endif]-->
	<link type="text/css" rel="stylesheet" href="styles/sunlight.default.css">

	<link type="text/css" rel="stylesheet" href="styles/site.simplex.css">
	<link type="text/css" rel="stylesheet" href="styles/override.css">
	<link type="text/css" rel="stylesheet" href="styles/theme.css">

</head>

<body>

<div class="navbar navbar-default navbar-fixed-top navbar-inverse">
<div class="container">
	<div class="navbar-header">
		<a class="navbar-brand" href="index.html">Documentation</a>
		<button class="navbar-toggle" type="button" data-toggle="collapse" data-target="#topNavigation">
			<span class="icon-bar"></span>
			<span class="icon-bar"></span>
			<span class="icon-bar"></span>
        </button>
	</div>
	<div class="navbar-collapse collapse" id="topNavigation">
		<ul class="nav navbar-nav">
			
			<li class="dropdown">
				<a href="modules.list.html" class="dropdown-toggle" data-toggle="dropdown">Modules<b class="caret"></b></a>
				<ul class="dropdown-menu ">
					<li><a href="module-xcf_driver_DriverBase.html">xcf/driver/DriverBase</a></li><li><a href="module-xcf_manager_BeanManager.html">xcf/manager/BeanManager</a></li><li><a href="module-xcf_manager_DeviceManager.html">xcf/manager/DeviceManager</a></li><li><a href="module-xcf_manager_DeviceManager_DeviceServer.html">xcf/manager/DeviceManager_DeviceServer</a></li><li><a href="module-xide_manager_DeviceManager.html">xide/manager/DeviceManager</a></li>
				</ul>
			</li>
			
			<li class="dropdown">
				<a href="classes.list.html" class="dropdown-toggle" data-toggle="dropdown">Classes<b class="caret"></b></a>
				<ul class="dropdown-menu ">
					<li><a href="module-xcf.driver.DriverBase.html">xcf.driver.DriverBase</a></li><li><a href="module-xcf.manager.DeviceManager_DeviceServer.html">xcf.manager.DeviceManager_DeviceServer</a></li><li><a href="module-xcf_manager_Context.html">xcf/manager/Context</a></li>
				</ul>
			</li>
			
			<li class="dropdown">
				<a href="global.html" class="dropdown-toggle" data-toggle="dropdown">Global<b class="caret"></b></a>
				<ul class="dropdown-menu ">
					<li><a href="global.html#addDeviceInstance">addDeviceInstance</a></li><li><a href="global.html#appScope">appScope</a></li><li><a href="global.html#beanIconClass">beanIconClass</a></li><li><a href="global.html#completeDriver">completeDriver</a></li><li><a href="global.html#createDriverInstance">createDriverInstance</a></li><li><a href="global.html#createLeftView">createLeftView</a></li><li><a href="global.html#createRightView">createRightView</a></li><li><a href="global.html#defaultScope">defaultScope</a></li><li><a href="global.html#driverScopes">driverScopes</a></li><li><a href="global.html#editDriver">editDriver</a></li><li><a href="global.html#groupType">groupType</a></li><li><a href="global.html#insertIfMatch">insertIfMatch</a></li><li><a href="global.html#itemMetaPath">itemMetaPath</a></li><li><a href="global.html#itemMetaStorePath">itemMetaStorePath</a></li><li><a href="global.html#itemMetaTitleField">itemMetaTitleField</a></li><li><a href="global.html#itemType">itemType</a></li><li><a href="global.html#match">match</a></li><li><a href="global.html#newGroup">newGroup</a></li><li><a href="global.html#newItem">newItem</a></li><li><a href="global.html#nodeValuePath">nodeValuePath</a></li><li><a href="global.html#nodeValueTransform">nodeValueTransform</a></li><li><a href="global.html#onCreateVariableCI">onCreateVariableCI</a></li><li><a href="global.html#onDeviceMessage">onDeviceMessage</a></li><li><a href="global.html#onDeviceReady">onDeviceReady</a></li><li><a href="global.html#onMainViewReady">onMainViewReady</a></li><li><a href="global.html#onNewDriverScopeCreated">onNewDriverScopeCreated</a></li><li><a href="global.html#onReloaded">onReloaded</a></li><li><a href="global.html#onStoreReady">onStoreReady</a></li><li><a href="global.html#onWidgetReady">onWidgetReady</a></li><li><a href="global.html#registerEditorExtensions">registerEditorExtensions</a></li><li><a href="global.html#replaceWith">replaceWith</a></li><li><a href="global.html#setScriptFunctions">setScriptFunctions</a></li><li><a href="global.html#start">start</a></li><li><a href="global.html#systemScope">systemScope</a></li><li><a href="global.html#toPreferenceId">toPreferenceId</a></li><li><a href="global.html#updateItemMetaData">updateItemMetaData</a></li><li><a href="global.html#userScope">userScope</a></li><li><a href="global.html#variables">variables</a></li>
				</ul>
			</li>
			
		</ul>
		<div class="col-sm-3 col-md-3">
            <form class="navbar-form" role="search">
                <div class="input-group">
                    <input type="text" class="form-control" placeholder="Search" name="q" id="search-input">
                    <div class="input-group-btn">
                        <button class="btn btn-default" id="search-submit"><i class="glyphicon glyphicon-search"></i></button>
                    </div>
                </div>
            </form>
        </div>
	</div>

</div>
</div>


<div class="container" id="toc-content">
<div class="row">

	
	<div class="col-md-12">
	
		<div id="main">
			

		<h1 class="page-title">Source: manager/ProtocolManager.js</h1>
    
<section>
    <article>
        <pre
            class="sunlight-highlight-javascript linenums">define([
    'dcl/dcl',
    "dojo/_base/declare",
    "xide/manager/ServerActionBase",
    'xide/types',
    'xide/utils',
    'xide/factory',
    'xaction/Action',
    'xcf/manager/BeanManager'
    /*,
    'xide/views/ActionDialog',
    'xide/widgets/FileEditor',
    'xide/views/CIActionDialog',
    'xide/views/CIGroupedSettingsView',
    'xide/registry',
    'require'*/
], function (dcl,declare, ServerActionBase, types, utils, factory,Action,BeanManager, ActionDialog,FileEditor,CIActionDialog, CIGroupedSettingsView,registry,require) {
    return dcl([ServerActionBase, BeanManager], {
        declaredClass:"xcf.manager.ProtocolManager",
        /***
         * The Bean-Manager needs a unique name of the bean:
         */
        beanNamespace: 'protocol',
        /***
         * The Bean-Manager has some generic function like creating Dialogs for adding new items, please
         * provide a title for the interface.
         */
        beanName: 'Protocol',
        /**
         * the icon class for bean edit views
         */
        beanIconClass:'fa-code',
        /**
         * Bean group type
         */
        groupType:types.ITEM_TYPE.PROTOCOL_GROUP,
        /**
         * Bean item type
         */
        itemType:types.ITEM_TYPE.PROTOCOL,
        /**
         * the path to the meta data within the store item
         */
        itemMetaPath:'user.meta',
        /**
         * the path to the meta data within the store item when saving
         */
        itemMetaStorePath:'/meta/inputs',
        /**
         * The name of the CI in the meta database for the title or name.
         */
        itemMetaTitleField:types.PROTOCOL_PROPERTY.CF_PROTOCOL_TITLE,
        /**
         * Name of the system scope
         */
        systemScope:'system_protocols',
        /**
         * Name of the user scope
         */
        userScope:'user_protocols',
        /**
         * Name of the app scope
         */
        appScope:'app_protocols',
        /**
         * Name of the default scope for new created items
         */
        defaultScope:'system_protocols',
        /***
         * The RPC server class:
         */
        serviceClass: 'XCF_Protocol_Service',
        /***
         * A copy of all devices raw data from the server
         */
        rawData: null,
        /***
         * {dojo.data.ItemFileWriteStore}
         */
        store: null,
        /***
         * {xcf.views.ProtocolTreeView}
         */
        treeView: null,
        /***
         *  A map of scope names for module hot reloading
         */
        protocolScopes: null,
        /////////////////////////////////////////////////////////////////////////////////////
        //
        //  Bean protocol impl.
        //
        /////////////////////////////////////////////////////////////////////////////////////
        getItemActions: function () {

            var actions = [];
            var thiz = this;
            var selectedItem = this.getItem();
            var isGroup = selectedItem ? utils.toBoolean(selectedItem.isDir) === true : false;

            //New Group
            actions.push({
                title: 'New Group',
                icon: 'el-icon-folder',
                place: 'last',
                emit: false,
                style: '',
                handler: function (command, item, owner) {
                    thiz.newGroup()
                }
            });
            //reload
            actions.push({
                title: 'Reload',
                icon: 'fa-refresh',
                disabled: false,
                command: 'Reload',
                place: 'last',
                emit: false,
                style: '',
                handler: function () {
                    thiz.reload()
                }
            });

            //item actions, if
            if (this.getItem() != null) {

                //delete
                actions.push({
                    title: 'Delete',
                    icon: 'el-icon-remove-circle',
                    disabled: false,
                    command: 'Delete',
                    place: 'last',
                    emit: false,
                    style: '',
                    handler: function () {
                        thiz.onDeleteItem(selectedItem)
                    }
                });

                //new item
                if (isGroup) {
                    actions.push({
                        title: 'New Protocol',
                        icon: 'el-icon-file-new',
                        disabled: false,
                        command: 'NewItem',
                        place: 'last',
                        emit: false,
                        style: '',
                        handler: function () {
                            thiz.newItem(selectedItem)
                        }
                    });
                } else {
                    actions.push({
                        title: 'Connect',
                        icon: 'el-icon-play-circle',
                        disabled: false,
                        command: 'Start',
                        place: 'last',
                        emit: false,
                        style: '',
                        handler: function () {
                            thiz.startDevice(selectedItem)
                        }
                    });
                }
            }
            return actions;
        },
        /////////////////////////////////////////////////////////////////////////////////////
        //
        //  UX related functions, @TODO : move it to somewhere else
        //
        /////////////////////////////////////////////////////////////////////////////////////
        onItemRemoved: function (item) {

            if(item == this.currentItem) {
                this.currentItem = null;
            }

            if (item) {
                var view = this.getView(item);
                if (view) {
                    utils.destroyWidget(view);
                }
            }
            //this.reload();
        },
        _onDeleteItem: function (item) {


            var isDir = utils.toBoolean(item.isDir) === true;
            var name = utils.toString(item['name']);
            //pick the right service function
            var removeFn = isDir ? 'removeGroup' : 'removeItem';
            var thiz = this;
            var actionDialog = new ActionDialog({
                title: 'Remove Protocol' + (isDir ? ' Group' : '') + ' ' + '\'' + name + '\'',
                style: 'max-width:400px',
                titleBarClass: 'text-danger',
                delegate: {
                    isRemoving: false,
                    onOk: function (dlg) {
                        thiz[removeFn](
                            utils.toString(item.scope),
                            utils.toString(item.path),
                            function () {
                                thiz.onItemRemoved(item)
                            });
                    }
                },
                inserts: [{
                    query: '.dijitDialogPaneContent',
                    insert: '&lt;div>&lt;span class="fileManagerDialogText">Do you really want to remove  this item' + '?&lt;/span>&lt;/div>',
                    place: 'first'
                }]
            });
            actionDialog.show();
        },
        /**
         * Bean UX function to create a new item by opening a dialog, followed by a server call
         */
        newItem: function () {

            var thiz = this;
            var currentItem = this.getItem();
            var parent = currentItem ? currentItem.isDir === true ? currentItem.path : '' : '';
            if (!currentItem) {
                currentItem = {
                    path: ""
                }
            }

            var cis = [
                utils.createCI('In Group', 13, utils.toString(currentItem.path), {
                    widget: {
                        disabled: true
                    },
                    group: 'Common'
                }),
                utils.createCI('Title', 13, '', {
                    group: 'Common'
                })
            ];

            var actionDialog = new CIActionDialog({
                title: 'New Device',
                /*style: 'max-width:400px;width:400px;height:300px;',*/
                resizable: true,
                delegate: {
                    onOk: function (dlg, data) {
                        var idCi = utils.createCI('Id', 13, utils.createUUID(), {
                            visible: false,
                            group:"Common"
                        });
                        data.push(idCi);
                        var options = utils.toOptions(data);
                        var nameCi = utils.getInputCIByName(cis, "Title");
                        var scopeCi = utils.getInputCIByName(cis, "Scope");
                        var groupCi = utils.getInputCIByName(cis, "In Group");
                    }
                },
                cis: cis
            });

            actionDialog.show();
            actionDialog.resize();

        },
        /////////////////////////////////////////////////////////////////////////////////////
        //
        //  Data related
        //
        /////////////////////////////////////////////////////////////////////////////////////
        reload: function () {
        },
        /***
         * Callback when the NodeJS service manager initialized its service store. That may
         * happen multiple times as user can reload the store.
         *
         * @param evt
         */
        onFileChanged:function(evt){

            if (evt._pp2) {
                return;
            }
            evt._pp2 = true;
            var data = evt.data;

            var thiz = this;
            if (!this.fileUpdateTimes) {
                this.fileUpdateTimes = {}
            };

            if (data.event === types.EVENTS.ON_FILE_CHANGED) {

                if (data.data &amp;&amp; data.mask &amp;&amp; data.mask.indexOf('delete') !== -1) {
                    //thiz.publish(types.EVENTS.ON_FILE_DELETED, data);
                    console.error('deleted');
                    return;
                }
                var _path = data.path;
                var timeNow = new Date().getTime();
            }

            var path = utils.replaceAll('\\', '/', data.path);
            path = utils.replaceAll('//', '/', data.path);
            path = path.replace(/\\/g, "/");

            if(path.indexOf('protocols')==-1){
                return;
            }

            if (path.match(/\.json$/)) {

                var _start = 'data/system/protocols';
                if (path.indexOf(_start) != -1) {
                    console.log('protocol changed' + path);
                }


                this.ls('system_protocols');
            }
            /*
            if(evt._pp){
                return;
            }
            evt._pp = true;

            //console.log('file changed',evt);

            */
            this['onFileChanged2'] &amp;&amp; this['onFileChanged2'](evt);

        },
        /***
         * Common manager function, called by the context of the application
         */
        init: function () {
            this.subscribe(types.EVENTS.ON_FILE_CHANGED,this.onFileChanged);
        },
        _resetItem:function(item){

            if(item.commandsItem) {
                utils.removeFromStore(this.getStore(), item.commandsItem, true, 'path', 'parentId');
            }

            if(item.variablesItem) {
                utils.removeFromStore(this.getStore(), item.variablesItem, true, 'path', 'parentId');
            }

        },
        _completeProtocolItem:function(item){


            if(!item || !item.user){
                return;
            }
            var contentCI = utils.getInputCIByName(item.user.meta, 'content'),
                thiz = this,
                store = this.getStore();

            if(!contentCI){

                //upgrade to file item
                item.mount = '' + item.scope;
                item.getPath=function(){
                    return item.path;
                };

                item.virtual = false;
                item.isDir = true;
                item.children = [];
                contentCI = utils.createCI('Content', types.ECIType.FILE_EDITOR, 'no value', {
                    group: 'Content',
                    editor:'JSON Editor',
                    editorArgs:{
                        subscribers:[
                            {
                                event: 'onSave',
                                handler: function (evt) {

                                    var value = utils.getJson(evt.value);

                                    if(value &amp;&amp; value.meta){
                                        item.user = value;
                                        item._completed=false;
                                        thiz._resetItem(item);
                                        thiz._completeProtocolItem(item);
                                        thiz.publish(types.EVENTS.ON_PROTOCOL_CHANGED,{
                                            item:item
                                        });


                                    }

                                },
                                owner:thiz
                            }
                        ],
                        leftEditorArgs:{

                            subscribers:[
                                {
                                    event: 'addAction',
                                    handler: function (action) {
                                        console.log('add action',arguments);
                                    },
                                    owner:thiz
                                }
                            ],
                            hiddenFields:{

                            },
                            readOnlyNodes:{
                                "commands":true,
                                "variables":true,
                                "meta":true
                            },
                            insertTemplates:[
                                {
                                    label: 'New Command',
                                    path: 'commands',
                                    value: '{title:"No Title",send:""}',
                                    newNodeTemplate: '[]',
                                    collapse:true,
                                    select:true
                                },
                                {
                                    label: 'New Variable',
                                    path: 'variables',
                                    value: '{title:"No Title",value:""}',
                                    newNodeTemplate: '[]',
                                    collapse:true,
                                    select:true
                                }
                            ],
                            renderTemplates : [
                                {
                                    //
                                    //  This segment is used to replace something in the node's dom structure
                                    //

                                    /**
                                     * @type {string} the path within the dom structure
                                     */
                                    nodeValuePath: 'field.innerHTML',
                                    /**
                                     * @type {RegExp|string|function|RegExp[]|string[]|function[]}
                                     */
                                    match: [/^variables[\s]?\.(\d+)$/,/^commands[\s]?\.(\d+)$/],
                                    /**
                                     * @type {string} the new value for the field specified in nodeValuePath
                                     */
                                    replaceWith: '{nodeValue} - {title}',
                                    /**
                                     * @type {object} additional variables
                                     */
                                    variables: null,

                                    /**
                                     * @type {function} a function to transform the node's dom value into something else
                                     */
                                    nodeValueTransform:function(value){
                                        return utils.capitalize(value);
                                    },
                                    //
                                    //  This segment is about dom manipulation, todo!
                                    //
                                    /**
                                     * @type (object)
                                     */
                                    insertIfMatch:{}
                                }
                            ]
                        },
                        rightEditorArgs:{

                            subscribers:[
                                {
                                    event: 'addAction',
                                    handler: function (action) {
                                        console.log('add action',arguments);
                                    },
                                    owner:thiz
                                }
                            ]
                        }
                    },
                    editorItem:item,
                    editorOverrides:{},
                    isOwnTab:true
                });
                item.user.meta.inputs.push(contentCI);


                //append variables and commands
                if(!item._completed){
                    item._completed=true;
                    var  commands = {
                        path: utils.createUUID(),
                        name: 'Commands',
                        isDir: true,
                        type: 'leaf',
                        parentId: item.path,
                        virtual: true,
                        children:[]
                    };

                    item.commandsItem = commands;

                    item.children.push(commands);

                    //complete commands
                    store.putSync(commands);




                    var commandItems = item.user.commands;

                    for (var i = 0; i &lt; commandItems.length; i++) {

                        var command = commandItems[i];
                        commands.children.push(store.putSync({
                            path: utils.createUUID(),
                            name: command.name,
                            id: utils.createUUID(),
                            parentId: commands.path,
                            _mayHaveChildren: false,
                            virtual: true,
                            user:{},
                            isDir:false,
                            value:command.value,
                            ref: {
                                protocol: item,
                                item: command
                            },
                            type: 'protocolCommand'
                        }));
                    }

                    var  variables = {
                        path: utils.createUUID(),
                        name: 'Variables',
                        isDir: true,
                        type: 'leaf',
                        parentId: item.path,
                        virtual: true,
                        items:[],
                        children:[]
                    };
                    //complete commands
                    store.putSync(variables);

                    item.children.push(variables);

                    item.variablesItem = variables;

                    var variablesItems = item.user.variables;
                    for (var i = 0; i &lt; variablesItems.length; i++) {

                        var variable = variablesItems[i];
                        variables.children.push(store.putSync({
                            isDir:false,
                            path: utils.createUUID(),
                            name: variable.name,
                            id: utils.createUUID(),
                            parentId: variables.path,
                            _mayHaveChildren: false,
                            value:variable.value,
                            virtual: true,
                            user:{},
                            ref: {
                                protocol: item,
                                item: variable
                            },
                            type: 'protocolVariable'
                        }));
                    }

                }

            }
        },

        /**
         * Protocol store is ready, extend each item with a file-editor CI (protocol content)
         * @param store
         */
        onStoreReady:function(store){
            var items = store ? utils.queryStore(store, {
                    isDir: false
                }) : [],
                thiz = this;

            _.each(items,function(what,value,item){
                thiz._completeProtocolItem(what);

            });
            console.log('store ready : ',items);
        },
        onMainViewReady: function () {


            var thiz = this;

            /**
             * Register permanent actions
             */
            var newProtocol = Action.createDefault('New Protocol', 'fa-exchange', 'File/New/Protocol', '__anewAction', null, {
                permanent: true,
                handler: function () {
                    thiz.newItem();
                }

            }).setVisibility(types.ACTION_VISIBILITY.ACTION_TOOLBAR, null).
            setVisibility(types.ACTION_VISIBILITY.MAIN_MENU, {}).
            setVisibility(types.ACTION_VISIBILITY.CONTEXT_MENU, null);

            thiz.publish(types.EVENTS.REGISTER_ACTION, {
                owner: thiz,
                action: newProtocol
            });


            //@TODO wrong place:
            FileEditor.prototype.ctx = this.ctx;
        },
        /////////////////////////////////////////////////////////////////////////////////////
        //
        //  Server methods (NodeJs)
        //
        /////////////////////////////////////////////////////////////////////////////////////

        /////////////////////////////////////////////////////////////////////////////////////
        //
        //  Utils
        //
        /////////////////////////////////////////////////////////////////////////////////////
        /***
         * openItemSettings creates a new settings view for a protocol
         * @param item
         * @returns {xide.views.CIGroupedSettingsView|null}
         */
        openItemSettings: function (item) {

            //1. sanity check
            var userData = item.user;
            if (!userData || !userData.meta) {
                return null;
            }

            //2. check its not open already
            var viewId = this.getViewId(item);
            var view = registry.byId(viewId);
            try {
                if (view) {
                    if (view.parentContainer) {
                        view.parentContainer.selectChild(view);
                    }
                    return null;
                }
            } catch (e) {
                utils.destroyWidget(view);
            }

            //3. get a view target
            var parent = this.getViewTarget();

            var title = this.getMetaValue(item, this.itemMetaTitleField);


            item.beanContextName = this.ctx.mainView.beanContextName;

            return utils.addWidget(CIGroupedSettingsView, {
                title: title || utils.toString(item.name),
                cis: userData.meta.inputs,
                beanContextName:this.ctx.mainView.beanContextName,
                storeItem: item,
                iconClass: this.beanIconClass,
                id: viewId,
                delegate: this,
                storeDelegate: this,
                closable: true,
                showAllTab: false,
                blockManager: this.ctx.getBlockManager()
            }, this, parent, true);

        }
    });
});
</pre>
    </article>
</section>





		</div>
	</div>

	<div class="clearfix"></div>

	

</div>
</div>

<div class="modal fade" id="searchResults">
  <div class="modal-dialog">
    <div class="modal-content">
      <div class="modal-header">
        <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
        <h4 class="modal-title">Search results</h4>
      </div>
      <div class="modal-body"></div>
      <div class="modal-footer">
        <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
      </div>
    </div><!-- /.modal-content -->
  </div><!-- /.modal-dialog -->
</div>

<footer>


<span class="jsdoc-message">
	Documentation generated by <a href="https://github.com/jsdoc3/jsdoc">JSDoc 3.4.0</a>
	
		on 2016-06-02T17:42:36+02:00
	
	using the <a href="https://github.com/docstrap/docstrap">DocStrap template</a>.
</span>
</footer>

<script src="scripts/docstrap.lib.js"></script>
<script src="scripts/toc.js"></script>
<script type="text/javascript" src="scripts/fulltext-search-ui.js"></script>

<script>
$( function () {
	$( "[id*='$']" ).each( function () {
		var $this = $( this );

		$this.attr( "id", $this.attr( "id" ).replace( "$", "__" ) );
	} );

	$( ".tutorial-section pre, .readme-section pre" ).each( function () {
		var $this = $( this );

		var example = $this.find( "code" );
		exampleText = example.html();
		var lang = /{@lang (.*?)}/.exec( exampleText );
		if ( lang && lang[1] ) {
			exampleText = exampleText.replace( lang[0], "" );
			example.html( exampleText );
			lang = lang[1];
		} else {
			var langClassMatch = example.parent()[0].className.match(/lang\-(\S+)/);
			lang = langClassMatch ? langClassMatch[1] : "javascript";
		}

		if ( lang ) {

			$this
			.addClass( "sunlight-highlight-" + lang )
			.addClass( "linenums" )
			.html( example.html() );

		}
	} );

	Sunlight.highlightAll( {
		lineNumbers : true,
		showMenu : true,
		enableDoclinks : true
	} );

	$.catchAnchorLinks( {
        navbarOffset: 10
	} );
	$( "#toc" ).toc( {
		anchorName  : function ( i, heading, prefix ) {
			var id = $( heading ).attr( "id" );
			return id && id.replace(/\~/g, '-inner-').replace(/\./g, '-static-') || ( prefix + i );
		},
		selectors   : "#toc-content h1,#toc-content h2,#toc-content h3,#toc-content h4",
		showAndHide : false,
		smoothScrolling: true
	} );

	$( "#main span[id^='toc']" ).addClass( "toc-shim" );
	$( '.dropdown-toggle' ).dropdown();

    $( "table" ).each( function () {
      var $this = $( this );
      $this.addClass('table');
    } );

} );
</script>



<!--Navigation and Symbol Display-->


<!--Google Analytics-->


<script type="text/javascript">
	$(document).ready(function() {
		SearcherDisplay.init();
	});
</script>

</body>
</html>
